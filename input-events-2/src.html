<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="generator" content="ReSpec 35.5.0">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <style>
        .issue-label {
            text-transform: initial
        }

        .warning>p:first-child {
            margin-top: 0
        }

        .warning {
            padding: .5em;
            border-left-width: .5em;
            border-left-style: solid
        }

        span.warning {
            padding: .1em .5em .15em
        }

        .issue.closed span.issue-number {
            text-decoration: line-through
        }

        .issue.closed span.issue-number::after {
            content: " (Closed)";
            font-size: smaller
        }

        .warning {
            border-color: #f11;
            border-color: var(--warning-border, #f11);
            border-width: .2em;
            border-style: solid;
            background: #fbe9e9;
            background: var(--warning-bg, #fbe9e9);
            color: #000;
            color: var(--text, #000)
        }

        .warning-title:before {
            content: "⚠";
            font-size: 1.3em;
            float: left;
            padding-right: .3em;
            margin-top: -.3em
        }

        li.task-list-item {
            list-style: none
        }

        input.task-list-item-checkbox {
            margin: 0 .35em .25em -1.6em;
            vertical-align: middle
        }

        .issue a.respec-gh-label {
            padding: 5px;
            margin: 0 2px 0 2px;
            font-size: 10px;
            text-transform: none;
            text-decoration: none;
            font-weight: 700;
            border-radius: 4px;
            position: relative;
            bottom: 2px;
            border: none;
            display: inline-block
        }
    </style>
    <style>
        pre.idl {
            padding: 1em;
            position: relative
        }

        pre.idl>code {
            color: #000;
            color: var(--text, #000)
        }

        @media print {
            pre.idl {
                white-space: pre-wrap
            }
        }

        .idlHeader {
            display: block;
            width: 150px;
            background: #8ccbf2;
            background: var(--def-border, #8ccbf2);
            color: #fff;
            color: var(--defrow-border, #fff);
            font-family: sans-serif;
            font-weight: 700;
            margin: -1em 0 1em -1em;
            height: 28px;
            line-height: 28px
        }

        .idlHeader a.self-link {
            margin-left: .3cm;
            text-decoration: none;
            border-bottom: none;
            color: inherit
        }

        .idlID {
            font-weight: 700;
            color: #005a9c
        }

        .idlType {
            color: #005a9c
        }

        .idlName {
            color: #ff4500
        }

        .idlName a {
            color: #ff4500;
            border-bottom: 1px dotted #ff4500;
            text-decoration: none
        }

        a.idlEnumItem {
            color: #000;
            border-bottom: 1px dotted #ccc;
            text-decoration: none
        }

        .idlSuperclass {
            font-style: italic;
            color: #005a9c
        }

        .idlDefaultValue,
        .idlParamName {
            font-style: italic
        }

        .extAttr {
            color: #666
        }

        .idlSectionComment {
            color: gray
        }

        .idlIncludes a {
            font-weight: 700
        }

        .respec-button-copy-paste:focus {
            text-decoration: none;
            border-color: #51a7e8;
            outline: 0;
            box-shadow: 0 0 5px rgba(81, 167, 232, .5)
        }

        .respec-button-copy-paste:is(:focus:hover, .selected:focus) {
            border-color: #51a7e8
        }

        .respec-button-copy-paste:is(:hover, :active, .zeroclipboard-is-hover, .zeroclipboard-is-active) {
            text-decoration: none;
            background-color: #ddd;
            background-image: linear-gradient(#eee, #ddd);
            border-color: #ccc
        }

        .respec-button-copy-paste:is(:active, .selected, .zeroclipboard-is-active) {
            background-color: #dcdcdc;
            background-image: none;
            border-color: #b5b5b5;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, .15)
        }

        .respec-button-copy-paste.selected:hover {
            background-color: #cfcfcf
        }

        .respec-button-copy-paste:is(:disabled, :disabled:hover, .disabled, .disabled:hover) {
            color: rgba(102, 102, 102, .5);
            cursor: default;
            background-color: rgba(229, 229, 229, .5);
            background-image: none;
            border-color: rgba(197, 197, 197, .5);
            box-shadow: none
        }

        @media print {
            .respec-button-copy-paste {
                visibility: hidden
            }
        }
    </style>
    <style>
        dfn {
            cursor: pointer
        }

        .dfn-panel {
            position: absolute;
            z-index: 35;
            min-width: 300px;
            max-width: 500px;
            padding: .5em .75em;
            margin-top: .6em;
            font-family: "Helvetica Neue", sans-serif;
            font-size: small;
            background: #fff;
            background: var(--indextable-hover-bg, #fff);
            color: #000;
            color: var(--text, #000);
            box-shadow: 0 1em 3em -.4em rgba(0, 0, 0, .3), 0 0 1px 1px rgba(0, 0, 0, .05);
            box-shadow: 0 1em 3em -.4em var(--tocsidebar-shadow, rgba(0, 0, 0, .3)), 0 0 1px 1px var(--tocsidebar-shadow, rgba(0, 0, 0, .05));
            border-radius: 2px
        }

        .dfn-panel:not(.docked)>.caret {
            position: absolute;
            top: -9px
        }

        .dfn-panel:not(.docked)>.caret::after,
        .dfn-panel:not(.docked)>.caret::before {
            content: "";
            position: absolute;
            border: 10px solid transparent;
            border-top: 0;
            border-bottom: 10px solid #fff;
            border-bottom-color: var(--indextable-hover-bg, #fff);
            top: 0
        }

        .dfn-panel:not(.docked)>.caret::before {
            border-bottom: 9px solid #a2a9b1;
            border-bottom-color: var(--indextable-hover-bg, #a2a9b1)
        }

        .dfn-panel * {
            margin: 0
        }

        .dfn-panel b {
            display: block;
            color: #000;
            color: var(--text, #000);
            margin-top: .25em
        }

        .dfn-panel ul a[href] {
            color: #333;
            color: var(--text, #333)
        }

        .dfn-panel>div {
            display: flex
        }

        .dfn-panel a.self-link {
            font-weight: 700;
            margin-right: auto
        }

        .dfn-panel .marker {
            padding: .1em;
            margin-left: .5em;
            border-radius: .2em;
            text-align: center;
            white-space: nowrap;
            font-size: 90%;
            color: #040b1c
        }

        .dfn-panel .marker.dfn-exported {
            background: #d1edfd;
            box-shadow: 0 0 0 .125em #1ca5f940
        }

        .dfn-panel .marker.idl-block {
            background: #8ccbf2;
            box-shadow: 0 0 0 .125em #0670b161
        }

        .dfn-panel a:not(:hover) {
            text-decoration: none !important;
            border-bottom: none !important
        }

        .dfn-panel a[href]:hover {
            border-bottom-width: 1px
        }

        .dfn-panel ul {
            padding: 0
        }

        .dfn-panel li {
            margin-left: 1em
        }

        .dfn-panel.docked {
            position: fixed;
            left: .5em;
            top: unset;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - .75em * 2 - .5em - .2em * 2);
            max-height: 30vh;
            overflow: auto
        }
    </style>


    <title>Input Events Level 2</title>

    <style>
        .invisible-table table {
            border: 0;
            border-spacing: 0px;
            border-collapse: collapse;
        }

        .invisible-table table td,
        .invisible-table table th {
            padding: 6px;
        }
    </style>



    <style id="respec-mainstyle">
        @keyframes pop {
            0% {
                transform: scale(1, 1)
            }

            25% {
                transform: scale(1.25, 1.25);
                opacity: .75
            }

            100% {
                transform: scale(1, 1)
            }
        }

        a.internalDFN {
            color: inherit;
            border-bottom: 1px solid #99c;
            text-decoration: none
        }

        a.externalDFN {
            color: inherit;
            border-bottom: 1px dotted #ccc;
            text-decoration: none
        }

        a.bibref {
            text-decoration: none
        }

        .respec-offending-element:target {
            animation: pop .25s ease-in-out 0s 1
        }

        .respec-offending-element,
        a[href].respec-offending-element {
            text-decoration: red wavy underline
        }

        @supports not (text-decoration:red wavy underline) {
            .respec-offending-element:not(pre) {
                display: inline-block
            }

            .respec-offending-element {
                background: url(data:image/gif;base64,R0lGODdhBAADAPEAANv///8AAP///wAAACwAAAAABAADAEACBZQjmIAFADs=) bottom repeat-x
            }
        }

        #references :target {
            background: #eaf3ff;
            animation: pop .4s ease-in-out 0s 1
        }

        cite .bibref {
            font-style: italic
        }

        a[href].orcid {
            padding-left: 4px;
            padding-right: 4px
        }

        a[href].orcid>svg {
            margin-bottom: -2px
        }

        ol.tof,
        ul.tof {
            list-style: none outside none
        }

        .caption {
            margin-top: .5em;
            font-style: italic
        }

        #issue-summary>ul {
            column-count: 2
        }

        #issue-summary li {
            list-style: none;
            display: inline-block
        }

        details.respec-tests-details {
            margin-left: 1em;
            display: inline-block;
            vertical-align: top
        }

        details.respec-tests-details>* {
            padding-right: 2em
        }

        details.respec-tests-details[open] {
            z-index: 999999;
            position: absolute;
            border: thin solid #cad3e2;
            border-radius: .3em;
            background-color: #fff;
            padding-bottom: .5em
        }

        details.respec-tests-details[open]>summary {
            border-bottom: thin solid #cad3e2;
            padding-left: 1em;
            margin-bottom: 1em;
            line-height: 2em
        }

        details.respec-tests-details>ul {
            width: 100%;
            margin-top: -.3em
        }

        details.respec-tests-details>li {
            padding-left: 1em
        }

        .self-link:hover {
            opacity: 1;
            text-decoration: none;
            background-color: transparent
        }

        aside.example .marker>a.self-link {
            color: inherit
        }

        .header-wrapper {
            display: flex;
            align-items: baseline
        }

        :is(h2, h3, h4, h5, h6):not(#toc>h2, #abstract>h2, #sotd>h2, .head>h2) {
            position: relative;
            left: -.5em
        }

        :is(h2, h3, h4, h5, h6):not(#toch2)+a.self-link {
            color: inherit;
            order: -1;
            position: relative;
            left: -1.1em;
            font-size: 1rem;
            opacity: .5
        }

        :is(h2, h3, h4, h5, h6)+a.self-link::before {
            content: "§";
            text-decoration: none;
            color: var(--heading-text)
        }

        :is(h2, h3)+a.self-link {
            top: -.2em
        }

        :is(h4, h5, h6)+a.self-link::before {
            color: #000
        }

        @media (max-width:767px) {
            dd {
                margin-left: 0
            }
        }

        @media print {
            .removeOnSave {
                display: none
            }
        }
    </style>
    <meta name="color-scheme" content="light">
    <meta name="revision" content="453a1a0c28e9e38ab3918dc8ea4b6b709e53ff6d">
    <meta name="description" content="This specification defines additions to events for text and related
        input to allow for the monitoring and manipulation of default browser
        behavior in the context of text editor applications and other
        applications that deal with text input and text formatting. This
        specification builds on the UI events spec [UI-EVENTS].">
    <link rel="canonical" href="https://www.w3.org/TR/input-events-2/">
    <style>
        var:hover {
            text-decoration: underline;
            cursor: pointer
        }

        var.respec-hl {
            color: var(--color, #000);
            background-color: var(--bg-color);
            box-shadow: 0 0 0 2px var(--bg-color)
        }

        @media (prefers-color-scheme:dark) {
            var.respec-hl {
                filter: saturate(.9) brightness(.9)
            }
        }

        var.respec-hl-c1 {
            --bg-color: #f4d200
        }

        var.respec-hl-c2 {
            --bg-color: #ff87a2
        }

        var.respec-hl-c3 {
            --bg-color: #96e885
        }

        var.respec-hl-c4 {
            --bg-color: #3eeed2
        }

        var.respec-hl-c5 {
            --bg-color: #eacfb6
        }

        var.respec-hl-c6 {
            --bg-color: #82ddff
        }

        var.respec-hl-c7 {
            --bg-color: #ffbcf2
        }

        @media print {
            var.respec-hl {
                background: 0 0;
                color: #000;
                box-shadow: unset
            }
        }
    </style>
    <style>
        var {
            position: relative;
            cursor: pointer
        }

        var[data-type]::after,
        var[data-type]::before {
            position: absolute;
            left: 50%;
            top: -6px;
            opacity: 0;
            transition: opacity .4s;
            pointer-events: none
        }

        var[data-type]::before {
            content: "";
            transform: translateX(-50%);
            border-width: 4px 6px 0 6px;
            border-style: solid;
            border-color: transparent;
            border-top-color: #222
        }

        var[data-type]::after {
            content: attr(data-type);
            transform: translateX(-50%) translateY(-100%);
            background: #222;
            text-align: center;
            font-family: "Dank Mono", "Fira Code", monospace;
            font-style: normal;
            padding: 6px;
            border-radius: 3px;
            color: #daca88;
            text-indent: 0;
            font-weight: 400
        }

        var[data-type]:hover::after,
        var[data-type]:hover::before {
            opacity: 1
        }
    </style>
    <script id="initialUserConfig" type="application/json">{
  "specStatus": "WD",
  "github": "w3c/input-events",
  "level": 2,
  "group": "webediting",
  "wgPublicList": "public-editing-tf",
  "editors": [
    {
      "name": "Johannes Wilm",
      "mailto": "johannes@fiduswriter.org",
      "company": "Invited Expert",
      "w3cid": "75083",
      "url": "mailto:johannes@fiduswriter.org"
    }
  ],
  "formerEditors": [
    {
      "name": "Ben Peters",
      "company": "Microsoft",
      "companyURL": "https://www.microsoft.com",
      "retiredDate": "2015-02-23"
    }
  ],
  "otherLinks": [
    {
      "key": "Latest published version by level",
      "data": [
        {
          "value": "Level 2",
          "href": "https://www.w3.org/TR/input-events-2/"
        }
      ]
    },
    {
      "key": "Latest editor's draft by level",
      "data": [
        {
          "value": "Level 2",
          "href": "https://w3c.github.io/input-events/"
        }
      ]
    }
  ],
  "xref": [
    "dom",
    "html",
    "infra",
    "mimesniff",
    "uievents",
    "i18n-glossary"
  ],
  "gitRevision": "453a1a0c28e9e38ab3918dc8ea4b6b709e53ff6d",
  "publishDate": "2025-08-14",
  "publishISODate": "2025-08-14T00:00:00.000Z",
  "generatedSubtitle": "W3C Working Draft 14 August 2025"
}</script>
    <link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2021/W3C-WD">
</head>

<body class="h-entry" data-cite="WEBIDL dom html infra mimesniff uievents i18n-glossary">
    <div class="head">
        <p class="logos"><a class="logo" href="https://www.w3.org/"><img alt="W3C" height="48"
                    src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72">
            </a></p>
        <h1 id="title" class="title">Input Events Level 2</h1>
        <p id="w3c-state"><a href="https://www.w3.org/standards/types#WD">W3C Working Draft</a> <time
                class="dt-published" datetime="2025-08-14">14 August 2025</time></p>
        <details open="">
            <summary>More details about this document</summary>
            <dl>
                <dt>This version:</dt>
                <dd>
                    <a class="u-url"
                        href="https://www.w3.org/TR/2025/WD-input-events-2-20250814/">https://www.w3.org/TR/2025/WD-input-events-2-20250814/</a>
                </dd>
                <dt>Latest published version:</dt>
                <dd>
                    <a href="https://www.w3.org/TR/input-events-2/">https://www.w3.org/TR/input-events-2/</a>
                </dd>
                <dt>Latest editor's draft:</dt>
                <dd><a href="https://w3c.github.io/input-events/">https://w3c.github.io/input-events/</a></dd>
                <dt>History:</dt>
                <dd>
                    <a
                        href="https://www.w3.org/standards/history/input-events-2/">https://www.w3.org/standards/history/input-events-2/</a>
                </dd>
                <dd>
                    <a href="https://github.com/w3c/input-events/commits/">Commit history</a>
                </dd>





                <dt>Editor:</dt>
                <dd class="editor p-author h-card vcard" data-editor-id="75083">
                    <a class="ed_mailto u-email email p-name" href="mailto:johannes@fiduswriter.org">Johannes Wilm</a>
                    (<span class="p-org org h-org">Invited Expert</span>)
                </dd>
                <dt>
                    Former editor:
                </dt>
                <dd class="editor p-author h-card vcard">
                    <span class="p-name fn">Ben Peters</span> (<a class="p-org org h-org"
                        href="https://www.microsoft.com">Microsoft</a>) - Until <time datetime="2015-02-23">23 February
                        2015</time>
                </dd>

                <dt>Feedback:</dt>
                <dd>
                    <a href="https://github.com/w3c/input-events/">GitHub w3c/input-events</a>
                    (<a href="https://github.com/w3c/input-events/pulls/">pull requests</a>,
                    <a href="https://github.com/w3c/input-events/issues/new/choose">new issue</a>,
                    <a href="https://github.com/w3c/input-events/issues/">open issues</a>)
                </dd>
                <dd><a
                        href="mailto:public-editing-tf@w3.org?subject=%5Binput-events-2%5D%20YOUR%20TOPIC%20HERE">public-editing-tf@w3.org</a>
                    with subject line <kbd>[input-events-2] <em>… message topic …</em></kbd> (<a rel="discussion"
                        href="https://lists.w3.org/Archives/Public/public-editing-tf">archives</a>)</dd>

                <dt>Latest published version by level</dt>
                <dd>
                    <a href="https://www.w3.org/TR/input-events-2/">Level 2</a>
                </dd>
                <dt>Latest editor's draft by level</dt>
                <dd>
                    <a href="https://w3c.github.io/input-events/">Level 2</a>
                </dd>
            </dl>
        </details>


        <p class="copyright">
            <a href="https://www.w3.org/policies/#copyright">Copyright</a>
            ©
            2025

            <a href="https://www.w3.org/">World Wide Web Consortium</a>.
            <abbr title="World Wide Web Consortium">W3C</abbr><sup>®</sup>
            <a href="https://www.w3.org/policies/#Legal_Disclaimer">liability</a>,
            <a href="https://www.w3.org/policies/#W3C_Trademarks">trademark</a> and
            <a rel="license" href="https://www.w3.org/copyright/software-license-2023/"
                title="W3C Software and Document Notice and License">permissive document license</a> rules apply.
        </p>
        <hr title="Separator for header">
    </div>
    <section id="abstract" class="introductory">
        <h2>Abstract</h2>
        <p>
            This specification defines additions to events for text and related
            input to allow for the monitoring and manipulation of default browser
            behavior in the context of text editor applications and other
            applications that deal with text input and text formatting. This
            specification builds on the UI events spec [<cite><a class="bibref" data-link-type="biblio"
                    href="#bib-ui-events" title="UI Events">UI-EVENTS</a></cite>].
        </p>
    </section>
    <section id="sotd" class="introductory">
        <h2>Status of This Document</h2>
        <p><em>This section describes the status of this
                document at the time of its publication. A list of current <abbr
                    title="World Wide Web Consortium">W3C</abbr>
                publications and the latest revision of this technical report can be found
                in the
                <a href="https://www.w3.org/TR/"><abbr title="World Wide Web Consortium">W3C</abbr> standards and drafts
                    index</a>.</em></p>
        <p>
            Input Events Level 2 replaces the first version of Input Events
            [<cite><a class="bibref" data-link-type="biblio" href="#bib-input-events"
                    title="Input Events Level 1">INPUT-EVENTS</a></cite>] and includes:
        </p>
        <ul>
            <li>Inputtypes for beforeinput events for the start and end of IME
                compositions that allow isolation of the IME composition process.
            </li>
            <li>More requirements for cancelability of beforeinput events, so that
                all beforeinput events apart from those being emited within an IME
                composition process are cancelable.
            </li>
        </ul>
        <p>
            The <a href="https://github.com/web-platform-tests/wpt/tree/master/input-events">test
                suite</a> and <a href="https://w3c.github.io/test-results/input-events/">implementation
                reports</a> for the Input Events specification are still work in
            progress.
        </p>
        <p>
            This document was published by the <a href="https://www.w3.org/groups/wg/webediting">Web Editing Working
                Group</a> as
            a Working Draft using the
            <a href="https://www.w3.org/policies/process/20231103/#recs-and-notes">Recommendation track</a>.
        </p>
        <p>Publication as a Working Draft does not
            imply endorsement by <abbr title="World Wide Web Consortium">W3C</abbr> and its Members. </p>
        <p>
            This is a draft document and may be updated, replaced, or obsoleted by other
            documents at any time. It is inappropriate to cite this document as other
            than a work in progress.

        </p>
        <p>

            This document was produced by a group
            operating under the
            <a href="https://www.w3.org/policies/patent-policy/"><abbr title="World Wide Web Consortium">W3C</abbr>
                Patent
                Policy</a>.


            <abbr title="World Wide Web Consortium">W3C</abbr> maintains a
            <a rel="disclosure" href="https://www.w3.org/groups/wg/webediting/ipr">public list of any patent
                disclosures</a>
            made in connection with the deliverables of
            the group; that page also includes
            instructions for disclosing a patent. An individual who has actual
            knowledge of a patent that the individual believes contains
            <a href="https://www.w3.org/policies/patent-policy/#def-essential">Essential Claim(s)</a>
            must disclose the information in accordance with
            <a href="https://www.w3.org/policies/patent-policy/#sec-Disclosure">section 6 of the <abbr
                    title="World Wide Web Consortium">W3C</abbr> Patent Policy</a>.

        </p>
        <p>
            This document is governed by the
            <a id="w3c_process_revision" href="https://www.w3.org/policies/process/20231103/">03 November 2023 <abbr
                    title="World Wide Web Consortium">W3C</abbr> Process Document</a>.
        </p>
    </section>
    <nav id="toc">
        <h2 class="introductory" id="table-of-contents">Table of Contents</h2>
        <ol class="toc">
            <li class="tocline"><a class="tocxref" href="#abstract">Abstract</a></li>
            <li class="tocline"><a class="tocxref" href="#sotd">Status of This Document</a></li>
            <li class="tocline"><a class="tocxref" href="#introduction"><bdi class="secno">1. </bdi>
                    Introduction
                </a></li>
            <li class="tocline"><a class="tocxref" href="#conformance"><bdi class="secno">2. </bdi>Conformance</a></li>
            <li class="tocline"><a class="tocxref" href="#definitions"><bdi class="secno">3. </bdi>
                    Definitions
                </a></li>
            <li class="tocline"><a class="tocxref" href="#problems-solved"><bdi class="secno">4. </bdi>
                    Problems solved
                </a></li>
            <li class="tocline"><a class="tocxref" href="#use-cases"><bdi class="secno">5. </bdi>
                    Use cases
                </a></li>
            <li class="tocline"><a class="tocxref" href="#events-inputevents"><bdi class="secno">6. </bdi>
                    Input Event Types
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#interface-InputEvent"><bdi class="secno">6.1 </bdi>
                            Interface InputEvent
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#overview"><bdi class="secno">6.1.1 </bdi>
                                    Overview
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#interface-InputEvent-Attributes"><bdi
                                        class="secno">6.1.2 </bdi>
                                    Attributes
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#interface-InputEvent-Methods"><bdi
                                        class="secno">6.1.3 </bdi>
                                    Methods
                                </a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#event-definitions"><bdi class="secno">6.2 </bdi>
                            Event definitions
                        </a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#input-event-order-during-composition"><bdi class="secno">7.
                    </bdi>
                    Input Event Order During Composition
                </a></li>
            <li class="tocline"><a class="tocxref" href="#event-order-when-using-insertfrompaste"><bdi class="secno">8.
                    </bdi>
                    Event order when using <code>"insertFromPaste"</code>
                </a></li>
            <li class="tocline"><a class="tocxref" href="#privacy-and-security-considerations"><bdi class="secno">9.
                    </bdi>
                    Privacy and security considerations
                </a></li>
            <li class="tocline"><a class="tocxref" href="#acknowledgements"><bdi class="secno">10. </bdi>
                    Acknowledgements
                </a></li>
            <li class="tocline"><a class="tocxref" href="#references"><bdi class="secno">A. </bdi>References</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#normative-references"><bdi class="secno">A.1
                            </bdi>Normative references</a></li>
                    <li class="tocline"><a class="tocxref" href="#informative-references"><bdi class="secno">A.2
                            </bdi>Informative references</a></li>
                </ol>
            </li>
        </ol>
    </nav>
    <section id="introduction">
        <div class="header-wrapper">
            <h2 id="x1-introduction"><bdi class="secno">1. </bdi>
                Introduction
            </h2><a class="self-link" href="#introduction" aria-label="Permalink for Section 1."></a>
        </div>

        <p>
            This document describes editing related additions to 2 events -
            <a href="https://w3c.github.io/uievents/#event-type-input">input</a>
            and <a href="https://w3c.github.io/uievents/#beforeinput">beforeinput</a> which are
            described in the UI events spec [<cite><a class="bibref" data-link-type="biblio" href="#bib-ui-events"
                    title="UI Events">UI-EVENTS</a></cite>]. The goal of these events
            is to allow authors to understand and/or override default edit behavior
            both before and after editing occurs.
        </p>
    </section>
    <section id="conformance">
        <div class="header-wrapper">
            <h2 id="x2-conformance"><bdi class="secno">2. </bdi>Conformance</h2><a class="self-link" href="#conformance"
                aria-label="Permalink for Section 2."></a>
        </div>
        <p>As well as sections marked as non-normative, all authoring guidelines, diagrams, examples, and notes in this
            specification are non-normative. Everything else in this specification is normative.</p>
        <p>
            The key words <em class="rfc2119">MAY</em>, <em class="rfc2119">MUST</em>, and <em class="rfc2119">MUST
                NOT</em> in this document
            are to be interpreted as described in
            <a href="https://www.rfc-editor.org/info/bcp14">BCP 14</a>
            [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc2119"
                    title="Key words for use in RFCs to Indicate Requirement Levels">RFC2119</a></cite>] [<cite><a
                    class="bibref" data-link-type="biblio" href="#bib-rfc8174"
                    title="Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words">RFC8174</a></cite>]
            when, and only when, they appear in all
            capitals, as shown here.
        </p>
    </section>
    <section id="definitions">
        <div class="header-wrapper">
            <h2 id="x3-definitions"><bdi class="secno">3. </bdi>
                Definitions
            </h2><a class="self-link" href="#definitions" aria-label="Permalink for Section 3."></a>
        </div>

        <dl>
            <dt>
                <dfn id="dfn-express-intention" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">express
                    intention</dfn>
            </dt>
            <dd>
                A user can <a data-lt="express intention" href="#dfn-express-intention" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-express-intention-1">express an intention</a> to
                execute a specific editing operation by means of keyboard, IME,
                speech, or similar method. Specific input actions are mapped to
                intentions following platform-specific conventions.
            </dd>
            <dt>
                <dfn id="dfn-kill-buffer" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">kill buffer</dfn>
            </dt>
            <dd>
                <p>
                    <i>This definition is not normative.</i>
                </p>A <a href="#dfn-kill-buffer" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-kill-buffer-1">kill buffer</a> is a in-memory store of richtext content
                that is separate from the clipboard which allows for the temporal
                storage of content that was deleted using specific deletion commands.
                The user can replace the current selection with the content held in
                the kill buffer by indicating an intention to yank the kill buffer.
            </dd>
        </dl>
    </section>
    <section id="problems-solved">
        <div class="header-wrapper">
            <h2 id="x4-problems-solved"><bdi class="secno">4. </bdi>
                Problems solved
            </h2><a class="self-link" href="#problems-solved" aria-label="Permalink for Section 4."></a>
        </div>

        <p>
            <i>This section is not normative.</i>
        </p>
        <p>
            Creating a webbased texteditor requires a considerable amount of
            JavaScript on top of the browser code, among other things because:
        </p>
        <ol>
            <li>Browsers do not handle all editing operations the same way.
            </li>
            <li>Browsers are often buggy in the way they handle certain editing
                operations.
            </li>
            <li>Individual sites may have custom preferences for how they want to
                handle certain editing operations.
            </li>
            <li>The development of high-level text editing features in browsers has
                not followed the principles laid out in the <a href="https://extensiblewebmanifesto.org/">Extensible Web
                    Manifesto</a> in
                that development of these features has not always been in coordination
                with the needs of the web developer community.
            </li>
        </ol>
        <p>
            This spec seeks to alleviate the problem by providing a simple way for
            web developers to both override browser handling of all user input
            related to text editing through the <a href="#dfn-beforeinput" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-beforeinput-1">beforeinput</a> event, and to
            monitor what browsers have changed in the DOM due to user input through
            the <a href="#dfn-input" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-input-1">input</a> event.
        </p>
    </section>
    <section id="use-cases">
        <div class="header-wrapper">
            <h2 id="x5-use-cases"><bdi class="secno">5. </bdi>
                Use cases
            </h2><a class="self-link" href="#use-cases" aria-label="Permalink for Section 5."></a>
        </div>

        <p>
            <i>This section is not normative.</i>
        </p>
        <ol>
            <li>Creating a JavaScript text editor in which the &lt;strong&gt;-tag
                is used instead of the &lt;b&gt;-tag to mark text that the user marks
                as bold, using any browser-builtin way to mark a text as bold, without
                having access to all existing browsers.
            </li>
            <li>Creating a JavaScript text editor which works with a data model in
                the background where JavaScript takes care of rendering changes to the
                edited text to the DOM.
            </li>
            <li>Creating a JavaScript editor which only allows a subset of richtext
                editing (for example: bold is allowed, but italic not).
            </li>
            <li>Creating a collaborative editor in which JavaScript is used to
                render changes to the DOM, based on user intentions with users using
                different browsers with different ways of expressing specific
                intentions.
            </li>
            <li>Creating a JavaScript editor with different user access options,
                where some users only can add or delete text and other users only can
                add or remove certain types of formatting.
            </li>
        </ol>
    </section>
    <section id="events-inputevents">
        <div class="header-wrapper">
            <h2 id="x6-input-event-types"><bdi class="secno">6. </bdi>
                Input Event Types
            </h2><a class="self-link" href="#events-inputevents" aria-label="Permalink for Section 6."></a>
        </div>

        <p>
            Input events are sent before (beforeinput event) and after (input
            event) a user attempts to edit the markup. This includes insertion and
            deletion of content, and formatting changes.
        </p>
        <p>
            Input events are <a data-link-type="dfn"
                href="https://dom.spec.whatwg.org/#concept-event-dispatch">dispatched</a> on elements that act as <a
                data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/interaction.html#editing-host">editing
                hosts</a>, including elements with the contenteditable attribute set,
            <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/form-elements.html#the-textarea-element">textarea</a></code>
            elements, and
            <code><a data-link-type="element" href="#dfn-input" class="internalDFN" id="ref-for-dfn-input-2">input</a></code>
            elements that permit text input.
        </p>
        <section id="interface-InputEvent">
            <div class="header-wrapper">
                <h3 id="x6-1-interface-inputevent"><bdi class="secno">6.1 </bdi>
                    Interface InputEvent
                </h3><a class="self-link" href="#interface-InputEvent" aria-label="Permalink for Section 6.1"></a>
            </div>

            <pre class="idl def" id="webidl-827932857"><span class="idlHeader"><a class="self-link" href="#webidl-827932857">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-inputevent-partial-1" data-title="InputEvent">partial interface <a data-idl="partial" data-link-type="interface" data-title="InputEvent" class="idlID" data-dfn-for="InputEvent" href="https://www.w3.org/TR/uievents/#inputevent">InputEvent</a> {<span data-idl="" class="idlAttribute" id="idl-def-inputevent-datatransfer" data-title="dataTransfer" data-dfn-for="InputEvent">
   readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://html.spec.whatwg.org/multipage/dnd.html#datatransfer">DataTransfer</a>?</span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-inputevent-datatransfer" id="ref-for-dom-inputevent-datatransfer-1"><code>dataTransfer</code></a>;</span><span data-idl="" class="idlMethod" id="idl-def-inputevent-gettargetranges" data-title="getTargetRanges" data-dfn-for="InputEvent"><span class="idlType">
   <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="idl" href="https://dom.spec.whatwg.org/#interface-staticrange">StaticRange</a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-inputevent-gettargetranges" id="ref-for-dom-inputevent-gettargetranges-1"><code>getTargetRanges</code></a>();</span>
};</span><span data-idl="" class="idlDictionary" id="idl-def-inputeventinit-partial-1" data-title="InputEventInit">

partial dictionary <a data-idl="partial" data-link-type="dictionary" data-title="InputEventInit" class="idlID" data-dfn-for="InputEventInit" href="https://www.w3.org/TR/uievents/#dictdef-inputeventinit">InputEventInit</a> {<span data-idl="" class="idlMember" id="idl-def-inputeventinit-datatransfer" data-title="dataTransfer" data-dfn-for="InputEventInit"><span class="idlType">
   <a data-link-type="interface" href="https://html.spec.whatwg.org/multipage/dnd.html#datatransfer">DataTransfer</a>?</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-inputeventinit-datatransfer" id="ref-for-dom-inputeventinit-datatransfer-1"><code>dataTransfer</code></a> = null;</span><span data-idl="" class="idlMember" id="idl-def-inputeventinit-targetranges" data-title="targetRanges" data-dfn-for="InputEventInit"><span class="idlType">
   <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="idl" href="https://dom.spec.whatwg.org/#interface-staticrange">StaticRange</a>&gt;</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-inputeventinit-targetranges" id="ref-for-dom-inputeventinit-targetranges-1"><code>targetRanges</code></a> = [];</span>
};</span></code></pre>
            <p data-dfn-for="InputEventInit">
                The attributes <a data-link-type="attribute"
                    href="https://www.w3.org/TR/uievents/#dom-inputevent-inputtype"><code>inputType</code></a>, <dfn
                    data-export="" data-dfn-type="dict-member" id="dom-inputeventinit-datatransfer" data-idl="field"
                    data-title="dataTransfer" data-dfn-for="InputEventInit" data-type="DataTransfer" tabindex="0"
                    aria-haspopup="dialog"><code>dataTransfer</code></dfn> and
                <dfn data-lt="targetRange|targetRanges" data-plurals="targetrange" data-export=""
                    data-dfn-type="dict-member" id="dom-inputeventinit-targetranges" data-idl="field"
                    data-title="targetRanges" data-dfn-for="InputEventInit" data-type="sequence" tabindex="0"
                    aria-haspopup="dialog"><code>targetRanges</code></dfn> of <a data-link-type="dictionary"
                    data-lt="InputEventInit"
                    href="https://www.w3.org/TR/uievents/#dictdef-inputeventinit"><code>InputEventInit</code></a>
                initialize the corresponding attributes of the <a data-link-type="interface" data-lt="InputEvent"
                    href="https://www.w3.org/TR/uievents/#inputevent"><code>InputEvent</code></a> object.
            </p>
            <section id="overview">
                <div class="header-wrapper">
                    <h4 id="x6-1-1-overview"><bdi class="secno">6.1.1 </bdi>
                        Overview
                    </h4><a class="self-link" href="#overview" aria-label="Permalink for Section 6.1.1"></a>
                </div>

                <p>
                    <i>This section is not normative.</i>
                </p>
                <p data-link-for="InputEvent">
                    The following table provides a summary of when the <a href="#dfn-data" class="internalDFN"
                        data-link-type="dfn" id="ref-for-dfn-data-1"><code>data</code></a> and
                    <a href="#dom-inputevent-datatransfer" class="internalDFN" data-link-type="idl"
                        id="ref-for-dom-inputevent-datatransfer-2"><code>dataTransfer</code></a> attributes contain
                    contents and when they are
                    null as well as when the <a href="#dom-inputevent-gettargetranges" class="internalDFN"
                        data-link-type="idl"
                        id="ref-for-dom-inputevent-gettargetranges-2"><code>getTargetRanges()</code></a> method returns
                    an
                    empty or non-empty Array, based on the inputType.
                </p>
                <table class="parameters simple">
                    <thead>
                        <tr>
                            <th>
                                Editing host
                            </th>
                            <th>
                                inputType
                            </th>
                            <th>
                                data
                            </th>
                            <th>
                                dataTransfer
                            </th>
                            <th>
                                getTargetRanges()
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                Contenteditable
                            </td>
                            <td>
                                <code>"insertText"</code>,
                                <code>"insertCompositionText"</code>,
                                <code>"formatSetBlockTextDirection"</code>,
                                <code>"formatSetInlineTextDirection"</code>,
                                <code>"formatBackColor"</code>,
                                <code>"formatFontColor"</code>,
                                <code>"formatFontName"</code>, <code>"insertLink"</code>
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                null
                            </td>
                            <td>
                                Non-empty Array
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Contenteditable
                            </td>
                            <td>
                                <code>"insertFromPaste"</code>,
                                <code>"insertFromPasteAsQuotation"</code>,
                                <code>"insertFromDrop"</code>,
                                <code>"insertReplacementText"</code>,
                                <code>"insertFromYank"</code>
                            </td>
                            <td>
                                null
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Non-empty Array
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>&lt;textarea&gt;</code>, <code>&lt;input
                  type="text"&gt;</code>
                            </td>
                            <td>
                                <code>"insertText"</code>,
                                <code>"insertCompositionText"</code>,
                                <code>"insertFromPaste"</code>,
                                <code>"insertFromPasteAsQuotation"</code>,
                                <code>"insertFromDrop"</code>,
                                <code>"insertReplacementText"</code>,
                                <code>"insertFromYank"</code>,
                                <code>"formatSetBlockTextDirection"</code>,
                                <code>"formatSetInlineTextDirection"</code>,
                                <code>"formatBackColor"</code>,
                                <code>"formatFontColor"</code>,
                                <code>"formatFontName"</code>, <code>"insertLink"</code>
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                null
                            </td>
                            <td>
                                Empty Array
                            </td>
                        </tr>
                        <tr>
                            <td>
                                All
                            </td>
                            <td>
                                <code>"historyUndo"</code>, <code>"historyRedo"</code>
                            </td>
                            <td>
                                null
                            </td>
                            <td>
                                null
                            </td>
                            <td>
                                Empty Array
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Contenteditable
                            </td>
                            <td>
                                All Remaining
                            </td>
                            <td>
                                null
                            </td>
                            <td>
                                null
                            </td>
                            <td>
                                Non-empty Array
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>&lt;textarea&gt;</code>, <code>&lt;input
                  type="text"&gt;</code>
                            </td>
                            <td>
                                All Remaining
                            </td>
                            <td>
                                null
                            </td>
                            <td>
                                null
                            </td>
                            <td>
                                Empty Array
                            </td>
                        </tr>
                    </tbody>
                </table>
            </section>
            <section id="interface-InputEvent-Attributes" data-dfn-for="InputEvent">
                <div class="header-wrapper">
                    <h4 id="x6-1-2-attributes"><bdi class="secno">6.1.2 </bdi>
                        Attributes
                    </h4><a class="self-link" href="#interface-InputEvent-Attributes"
                        aria-label="Permalink for Section 6.1.2"></a>
                </div>

                <p>
                    The cancelability of the beforeinput event depends on the
                    inputType.
                </p>
                <p>
                    The inputType to be picked depends on the user's <a data-lt="express intention"
                        href="#dfn-express-intention" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-express-intention-2">expression of intention</a>, whether or not the
                    editing takes place during an IME composition and the state of the
                    selection.
                </p>
                <p>
                    This specification defines the inputType values as the values in
                    the inputType column of the following table.
                </p>
                <table class="parameters simple">
                    <thead>
                        <tr>
                            <th>
                                inputType
                            </th>
                            <th>
                                User's expression of intention
                            </th>
                            <th>
                                Part of IME composition
                            </th>
                            <th>
                                beforeinput cancelable
                            </th>
                            <th>
                                State of selection
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <code>"insertText"</code>
                            </td>
                            <td>
                                insert typed plain text
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"insertReplacementText"</code>
                            </td>
                            <td>
                                insert or replace existing content by means of a spell
                                checker, auto-correct, writing suggestions or similar
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"insertLineBreak"</code>
                            </td>
                            <td>
                                insert a line break
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"insertParagraph"</code>
                            </td>
                            <td>
                                insert a paragraph break
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"insertOrderedList"</code>
                            </td>
                            <td>
                                insert a numbered list
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"insertUnorderedList"</code>
                            </td>
                            <td>
                                insert a bulleted list
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"insertHorizontalRule"</code>
                            </td>
                            <td>
                                insert a horizontal rule
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"insertFromYank"</code>
                            </td>
                            <td>
                                replace the current selection with content stored in a
                                <a href="#dfn-kill-buffer" class="internalDFN" data-link-type="dfn"
                                    id="ref-for-dfn-kill-buffer-2">kill buffer</a>
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"insertFromDrop"</code>
                            </td>
                            <td>
                                insert content by means of drop
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"insertFromPaste"</code>
                            </td>
                            <td>
                                paste content from clipboard or paste image from client
                                provided image library
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"insertFromPasteAsQuotation"</code>
                            </td>
                            <td>
                                paste content from the clipboard as a quotation
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"insertTranspose"</code>
                            </td>
                            <td>
                                transpose the last two <a data-link-type="dfn"
                                    href="https://www.w3.org/TR/i18n-glossary/#dfn-grapheme-cluster"
                                    class="respec-offending-element" title="Normative reference to non-normative term."
                                    id="respec-offender-normative-reference-to-non-normative-term">grapheme cluster</a>.
                                that were
                                entered
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"insertCompositionText"</code>
                            </td>
                            <td>
                                replace the current composition string
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"insertLink"</code>
                            </td>
                            <td>
                                insert a link
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"deleteWordBackward"</code>
                            </td>
                            <td>
                                delete a word directly before the caret position
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Collapsed
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"deleteWordForward"</code>
                            </td>
                            <td>
                                delete a word directly after the caret position
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Collapsed
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"deleteSoftLineBackward"</code>
                            </td>
                            <td>
                                delete from the caret to the nearest visual line break before
                                the caret position
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Collapsed
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"deleteSoftLineForward"</code>
                            </td>
                            <td>
                                delete from the caret to the nearest visual line break after
                                the caret position
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Collapsed
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"deleteEntireSoftLine"</code>
                            </td>
                            <td>
                                delete from the nearest visual line break before the caret
                                position to the nearest visual line break after the caret
                                position
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Collapsed
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"deleteHardLineBackward"</code>
                            </td>
                            <td>
                                delete from the caret to the nearest beginning of a block
                                element or
                                <code><a data-link-type="element" href="https://html.spec.whatwg.org/#the-br-element">br</a></code>
                                element before the caret position
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Collapsed
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"deleteHardLineForward"</code>
                            </td>
                            <td>
                                delete from the caret to the nearest end of a block element
                                or
                                <code><a data-link-type="element" href="https://html.spec.whatwg.org/#the-br-element">br</a></code>
                                element after the caret position
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Collapsed
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"deleteByDrag"</code>
                            </td>
                            <td>
                                remove content from the DOM by means of drag
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"deleteByCut"</code>
                            </td>
                            <td>
                                remove the current selection as part of a cut
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"deleteContent"</code>
                            </td>
                            <td>
                                delete the selection without specifying the direction of the
                                deletion and this intention is not covered by another
                                inputType
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Non-collapsed
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"deleteContentBackward"</code>
                            </td>
                            <td>
                                delete the content directly before the caret position and
                                this intention is not covered by another inputType or delete
                                the selection with the selection collapsing to its start
                                after the deletion
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"deleteContentForward"</code>
                            </td>
                            <td>
                                delete the content directly after the caret position and this
                                intention is not covered by another inputType or delete the
                                selection with the selection collapsing to its end after the
                                deletion
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"historyUndo"</code>
                            </td>
                            <td>
                                undo the last editing action
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"historyRedo"</code>
                            </td>
                            <td>
                                to redo the last undone editing action
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatBold"</code>
                            </td>
                            <td>
                                initiate bold text
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatItalic"</code>
                            </td>
                            <td>
                                initiate italic text
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatUnderline"</code>
                            </td>
                            <td>
                                initiate underline text
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatStrikeThrough"</code>
                            </td>
                            <td>
                                initiate stricken through text
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatSuperscript"</code>
                            </td>
                            <td>
                                initiate superscript text
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatSubscript"</code>
                            </td>
                            <td>
                                initiate subscript text
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatJustifyFull"</code>
                            </td>
                            <td>
                                make the current selection fully justified
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatJustifyCenter"</code>
                            </td>
                            <td>
                                center align the current selection
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatJustifyRight"</code>
                            </td>
                            <td>
                                right align the current selection
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatJustifyLeft"</code>
                            </td>
                            <td>
                                left align the current selection
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatIndent"</code>
                            </td>
                            <td>
                                indent the current selection
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatOutdent"</code>
                            </td>
                            <td>
                                outdent the current selection
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatRemove"</code>
                            </td>
                            <td>
                                remove all formatting from the current selection
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatSetBlockTextDirection"</code>
                            </td>
                            <td>
                                set the text block direction
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatSetInlineTextDirection"</code>
                            </td>
                            <td>
                                set the text inline direction
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatBackColor"</code>
                            </td>
                            <td>
                                change the background color
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatFontColor"</code>
                            </td>
                            <td>
                                change the font color
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatFontName"</code>
                            </td>
                            <td>
                                change the font-family
                            </td>
                            <td>
                                No
                            </td>
                            <td>
                                Yes
                            </td>
                            <td>
                                Any
                            </td>
                        </tr>
                    </tbody>
                </table>
                <div class="note" role="note" id="issue-container-generatedID">
                    <div role="heading" class="note-title marker" id="h-note" aria-level="5"><span>Note</span></div>
                    <div class="">
                        Other specifications may expand on this definition.
                    </div>
                </div>
                <div class="note" role="note" id="issue-container-generatedID-0">
                    <div role="heading" class="note-title marker" id="h-note-0" aria-level="5"><span>Note</span></div>
                    <div class="">
                        The existence of the above mentioned <code>inputTypes</code> does
                        not mean that any given implementation will support all of these.
                        But if a given browser supports an editing operation which
                        potentially leads to a change of the DOM, it <em class="rfc2119">MUST</em> <a
                            data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-dispatch">dispatch</a>
                        the
                        corresponding <code>beforeinput</code> and <code>input</code>
                        events.
                    </div>
                </div>
                <div class="note" role="note" id="issue-container-generatedID-1">
                    <div role="heading" class="note-title marker" id="h-note-1" aria-level="5"><span>Note</span></div>
                    <div class="">
                        If the selection is collapsed, <code>"deleteContentBackward"</code>
                        will be used both when the user asks for text deletion within a
                        text node, and when the user shows the intention to deletion of
                        more complex elements or merge paragraphs if the caret is at the
                        start of a text node.
                    </div>
                </div>
                <div class="note" role="note" id="issue-container-generatedID-2">
                    <div role="heading" class="note-title marker" id="h-note-2" aria-level="5"><span>Note</span></div>
                    <div class="">
                        If the selection is collapsed, <code>"deleteContentForward"</code>
                        will be used both when the user asks for text deletion within a
                        text node, and when the user shows the intention to deletion of
                        more complex elements or merge paragraphs if the caret is at the
                        end of a text node.
                    </div>
                </div>
                <p>
                    <dfn id="dfn-data" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn"><code>data</code></dfn>
                    holds information plaintext data
                    related to what is to be added to the document.
                </p>
                <table class="parameters simple">
                    <thead>
                        <tr>
                            <th>
                                inputType
                            </th>
                            <th>
                                Editing host
                            </th>
                            <th>
                                data
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <code>"insertText"</code> or
                                <code>"insertCompositionText"</code>
                            </td>
                            <td>
                                Any
                            </td>
                            <td>
                                the plain text string to be inserted
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"insertFromPaste"</code>,
                                <code>"insertFromPasteAsQuotation"</code>,
                                <code>"insertFromDrop"</code>,
                                <code>"insertTranspose"</code>,
                                <code>"insertReplacementText"</code> or
                                <code>"insertFromYank"</code>
                            </td>
                            <td>
                                <code><a href="https://html.spec.whatwg.org/multipage/input.html#the-input-element">input</a></code>
                                or
                                <code><a href="https://html.spec.whatwg.org/multipage/form-elements.html#the-textarea-element">textarea</a></code>
                            </td>
                            <td>
                                the plain text string to be inserted
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatSetInlineTextDirection"</code> or
                                <code>"formatSetBlockTextDirection"</code>
                            </td>
                            <td>
                                Any
                            </td>
                            <td>
                                <code>"ltr"</code>, <code>"rtl"</code>, <code>"auto"</code>
                                or <code>"null"</code>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatBackColor"</code> or
                                <code>"formatFontColor"</code>
                            </td>
                            <td>
                                Any
                            </td>
                            <td>
                                a string containing a <a
                                    href="https://www.w3.org/TR/cssom-1/#serialize-a-css-component-value">serialized CSS
                                    component value</a> [<cite><a class="bibref" data-link-type="biblio"
                                        href="#bib-cssom" title="CSS Object Model (CSSOM)">CSSOM</a></cite>] of the
                                proposed color
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"formatFontName"</code>
                            </td>
                            <td>
                                Any
                            </td>
                            <td>
                                the proposed value of the font-family CSS property
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <code>"insertLink"</code>
                            </td>
                            <td>
                                Any
                            </td>
                            <td>
                                the url of the proposed link
                            </td>
                        </tr>
                        <tr>
                            <td>
                                All remaining
                            </td>
                            <td>
                                Any
                            </td>
                            <td>
                                null
                            </td>
                        </tr>
                    </tbody>
                </table>
                <p>
                    <dfn data-dfn-for="InputEvent" data-export="" data-dfn-type="attribute"
                        id="dom-inputevent-datatransfer" data-idl="attribute" data-title="dataTransfer"
                        data-type="DataTransfer" data-lt="dataTransfer" data-local-lt="InputEvent.dataTransfer"
                        tabindex="0" aria-haspopup="dialog"><code>dataTransfer</code></dfn> holds information
                    about richtext and plaintext data that is to be taken from or added
                    to the document in a <a data-link-type="interface" data-lt="DataTransfer"
                        href="https://html.spec.whatwg.org/multipage/dnd.html#datatransfer"><code>DataTransfer</code></a>
                    object if there is relevant
                    data.
                </p>
                <table class="parameters simple">
                    <thead>
                        <tr>
                            <th>
                                inputType
                            </th>
                            <th>
                                Editing host
                            </th>
                            <th>
                                dataTransfer
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <code>"insertFromPaste"</code>,
                                <code>"insertFromPasteAsQuotation"</code>,
                                <code>"insertFromDrop"</code>,
                                <code>"insertTranspose"</code>,
                                <code>"insertReplacementText"</code> or
                                <code>"insertFromYank"</code>
                            </td>
                            <td>
                                <code>contenteditable</code>
                            </td>
                            <td>
                                A prepopulated <a data-link-type="interface" data-lt="DataTransfer"
                                    href="https://html.spec.whatwg.org/multipage/dnd.html#datatransfer"><code>DataTransfer</code></a>
                                object so that:
                                <ol>
                                    <li>The <a data-link-type="interface" data-lt="DataTransfer"
                                            href="https://html.spec.whatwg.org/multipage/dnd.html#datatransfer"><code>DataTransfer</code></a>
                                        object's <a
                                            href="https://html.spec.whatwg.org/multipage/dnd.html#drag-data-store">drag
                                            data store</a> is in
                                        <a
                                            href="https://html.spec.whatwg.org/multipage/dnd.html#concept-dnd-ro">read-only</a>
                                        mode. [<cite><a class="bibref" data-link-type="biblio" href="#bib-html"
                                                title="HTML Standard">HTML</a></cite>]
                                    </li>
                                    <li>If the pasted content is a file, the <a data-link-type="interface"
                                            data-lt="DataTransfer"
                                            href="https://html.spec.whatwg.org/multipage/dnd.html#datatransfer"><code>DataTransfer</code></a>
                                        object's <a
                                            href="https://html.spec.whatwg.org/multipage/dnd.html#the-drag-data-item-kind">drag
                                            data store
                                            item list</a> contains one entry with the <a
                                            href="https://html.spec.whatwg.org/multipage/dnd.html#the-drag-data-item-type-string">drag
                                            data
                                            item type string</a> being the file's <a data-link-type="dfn"
                                            href="https://mimesniff.spec.whatwg.org/#mime-type">mime type</a>, whose
                                        <a
                                            href="https://html.spec.whatwg.org/multipage/dnd.html#the-drag-data-item-kind">kind</a>
                                        is
                                        <i>File</i>, and whose data is a <a
                                            href="https://www.w3.org/TR/FileAPI/#dfn-file">File object</a> corresponding
                                        to the
                                        pasted file. [<cite><a class="bibref" data-link-type="biblio" href="#bib-html"
                                                title="HTML Standard">HTML</a></cite>]
                                    </li>
                                    <li>The <a data-link-type="interface" data-lt="DataTransfer"
                                            href="https://html.spec.whatwg.org/multipage/dnd.html#datatransfer"><code>DataTransfer</code></a>
                                        object's <a
                                            href="https://html.spec.whatwg.org/multipage/dnd.html#drag-data-store-item-list">drag
                                            data store
                                            item list</a> contains one entry with the <a
                                            href="https://html.spec.whatwg.org/multipage/dnd.html#the-drag-data-item-type-string">drag
                                            data
                                            item type string</a> <code>"text/html"</code>, whose
                                        <a
                                            href="https://html.spec.whatwg.org/multipage/dnd.html#the-drag-data-item-kind">kind</a>
                                        is
                                        <i>Plain Unicode string</i>, and whose data is a HTML
                                        representation of the content that is in the clipboard, or
                                        in the <a href="#dfn-kill-buffer" class="internalDFN" data-link-type="dfn"
                                            id="ref-for-dfn-kill-buffer-3">kill buffer</a>, to be dropped or otherwise
                                        the
                                        content that is to be added. [<cite><a class="bibref" data-link-type="biblio"
                                                href="#bib-html" title="HTML Standard">HTML</a></cite>]
                                    </li>
                                    <li>The <a data-link-type="interface" data-lt="DataTransfer"
                                            href="https://html.spec.whatwg.org/multipage/dnd.html#datatransfer"><code>DataTransfer</code></a>
                                        object's <a
                                            href="https://html.spec.whatwg.org/multipage/dnd.html#the-drag-data-item-kind">drag
                                            data store
                                            item list</a> contains one entry with the <a
                                            href="https://html.spec.whatwg.org/multipage/dnd.html#the-drag-data-item-type-string">drag
                                            data
                                            item type string</a> <code>"text/plain"</code>, whose
                                        <a
                                            href="https://html.spec.whatwg.org/multipage/dnd.html#the-drag-data-item-kind">kind</a>
                                        is
                                        <i>Plain Unicode string</i>, and whose data is a plain text
                                        representation of the content that is to be pasted, dropped
                                        or otherwise added. [<cite><a class="bibref" data-link-type="biblio"
                                                href="#bib-html" title="HTML Standard">HTML</a></cite>]
                                    </li>
                                    <li>If the content to be pasted is a link, the
                                        <a data-link-type="interface" data-lt="DataTransfer"
                                            href="https://html.spec.whatwg.org/multipage/dnd.html#datatransfer"><code>DataTransfer</code></a>
                                        object's <a
                                            href="https://html.spec.whatwg.org/multipage/dnd.html#the-drag-data-item-kind">drag
                                            data store
                                            item list</a> contains one entry with the <a
                                            href="https://html.spec.whatwg.org/multipage/dnd.html#the-drag-data-item-type-string">drag
                                            data
                                            item type string</a> <code>"text/uri-list"</code>, whose
                                        <a
                                            href="https://html.spec.whatwg.org/multipage/dnd.html#the-drag-data-item-kind">kind</a>
                                        is
                                        <i>Plain Unicode string</i>, and whose data is a plain text
                                        representation of the link that is dropped or otherwise
                                        added. [<cite><a class="bibref" data-link-type="biblio" href="#bib-html"
                                                title="HTML Standard">HTML</a></cite>]
                                    </li>
                                </ol>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                All remaining
                            </td>
                            <td>
                                Any
                            </td>
                            <td>
                                null
                            </td>
                        </tr>
                    </tbody>
                </table>
                <p>
                    <dfn data-dfn-for="InputEvent" data-lt="targetRange|getTargetRanges()" data-export=""
                        data-dfn-type="method" id="dom-inputevent-gettargetranges" data-idl="operation"
                        data-title="getTargetRanges()" data-type="sequence"
                        data-local-lt="InputEvent.getTargetRanges|InputEvent.getTargetRanges()|getTargetRanges"
                        tabindex="0" aria-haspopup="dialog"><code>getTargetRanges()</code></dfn> returns an array of
                    <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#interface-staticrange">StaticRanges</a>
                    representing the content that the event will
                    modify if it is not canceled, if the <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/interaction.html#editing-host">editing host</a> is
                    contenteditable node or an <a
                        href="https://w3c.github.io/edit-context/#dfn-editcontext-editing-host">
                        EditContext editing host</a>. Otherwise this method will return
                    none. The returned <a data-link-type="dfn"
                        href="https://dom.spec.whatwg.org/#interface-staticrange">StaticRanges</a> <em
                        class="rfc2119">MUST</em> cover only the <a
                        href="https://infra.spec.whatwg.org/#code-points">code points</a>
                    that the browser would normally replace, even if they are only part
                    of a <a data-link-type="dfn" href="https://www.w3.org/TR/i18n-glossary/#dfn-grapheme-cluster"
                        class="respec-offending-element" title="Normative reference to non-normative term."
                        id="respec-offender-normative-reference-to-non-normative-term-0">grapheme cluster</a>.
                </p>
                <div class="note" role="note" id="issue-container-generatedID-3">
                    <div role="heading" class="note-title marker" id="h-note-3" aria-level="5"><span>Note</span></div>
                    <div class="" data-link-for="InputEvent">
                        <p>
                            <i>This note is not normative.</i>
                        </p>Depending on the script and the platform, deleting backward or
                        forward in a text node with a collapsed selection may affect one or
                        multiple <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#code-point">code
                            points</a> or an entire
                        <a data-link-type="dfn"
                            href="https://www.w3.org/TR/i18n-glossary/#dfn-grapheme-cluster">grapheme cluster</a>. For
                        example, deleting backward in a text node
                        containing “café” may remove either the acute accent or the entire
                        “é” character, depending on the script and the platform.
                    </div>
                </div>
            </section>
            <section id="interface-InputEvent-Methods" data-dfn-for="InputEvent">
                <div class="header-wrapper">
                    <h4 id="x6-1-3-methods"><bdi class="secno">6.1.3 </bdi>
                        Methods
                    </h4><a class="self-link" href="#interface-InputEvent-Methods"
                        aria-label="Permalink for Section 6.1.3"></a>
                </div>

                <table class="parameters simple">
                    <thead>
                        <tr>
                            <th>
                                inputType
                            </th>
                            <th>
                                Editing host
                            </th>
                            <th>
                                Response of <code>getTargetRanges()</code>
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <code>"historyUndo"</code> or <code>"historyRedo"</code>
                            </td>
                            <td>
                                Any
                            </td>
                            <td>
                                empty Array
                            </td>
                        </tr>
                        <tr>
                            <td>
                                All remaining
                            </td>
                            <td>
                                <code>contenteditable</code>
                            </td>
                            <td>
                                an Array of <dfn data-lt="StaticRange" id="dfn-staticrange" class="externalDFN"
                                    data-no-export="" data-dfn-type="dfn"><a
                                        href="https://dom.spec.whatwg.org/#interface-staticrange">StaticRanges</a></dfn>
                                [<cite><a class="bibref" data-link-type="biblio" href="#bib-dom"
                                        title="DOM Standard">DOM</a></cite>]
                                associated with event
                            </td>
                        </tr>
                        <tr>
                            <td>
                                All remaining
                            </td>
                            <td>
                                <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/input.html#the-input-element">input</a></code>
                                or
                                <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/form-elements.html#the-textarea-element">textarea</a></code>
                            </td>
                            <td>
                                an empty Array
                            </td>
                        </tr>
                    </tbody>
                </table>
                <p>
                    returns , unless the inputType is <code>"historyUndo"</code> or
                    <code>"historyRedo"</code> or the <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/interaction.html#editing-host">editing host</a> is
                    not a
                    contenteditable element, in which case it returns an empty Array.
                </p>
            </section>
        </section>
        <section id="event-definitions">
            <div class="header-wrapper">
                <h3 id="x6-2-event-definitions"><bdi class="secno">6.2 </bdi>
                    Event definitions
                </h3><a class="self-link" href="#event-definitions" aria-label="Permalink for Section 6.2"></a>
            </div>

            <div class="event-definition">
                <dl>
                    <dt id="event-type-beforeinput">
                        <dfn id="dfn-beforeinput" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn"><a
                                class="eventtype" href="#event-type-beforeinput"><code>beforeinput</code></a></dfn>
                    </dt>
                    <dd>
                        <table class="invisible-table"
                            data-summary="This table contains information about the semantics of the given event type">
                            <tbody>
                                <tr>
                                    <th>
                                        Type
                                    </th>
                                    <td>
                                        <strong><code>beforeinput</code></strong>
                                    </td>
                                </tr>
                                <tr>
                                    <th>
                                        Interface
                                    </th>
                                    <td>
                                        <a href="#interface-InputEvent"><code>InputEvent</code></a>
                                    </td>
                                </tr>
                                <tr>
                                    <th>
                                        Sync / Async
                                    </th>
                                    <td>
                                        Sync
                                    </td>
                                </tr>
                                <tr>
                                    <th>
                                        Bubbles
                                    </th>
                                    <td>
                                        Yes
                                    </td>
                                </tr>
                                <tr>
                                    <th>
                                        Trusted Targets
                                    </th>
                                    <td>
                                        Any <code>Element</code> that is an <a data-link-type="dfn"
                                            href="https://html.spec.whatwg.org/multipage/interaction.html#editing-host">editing
                                            host</a>.
                                    </td>
                                </tr>
                                <tr>
                                    <th>
                                        <a href="https://www.w3.org/TR/uievents/#default-action">Default
                                            action</a> [<cite><a class="bibref" data-link-type="biblio"
                                                href="#bib-ui-events" title="UI Events">UI-EVENTS</a></cite>]
                                    </th>
                                    <td>
                                        <ul>
                                            <li>For contentEditable=typing editing hosts for
                                                inputType <code>"insertCompositionText"</code>: 'Update
                                                the DOM'.
                                            </li>
                                            <li>For <code>contentEditable="true"</code> <a data-link-type="dfn"
                                                    href="https://html.spec.whatwg.org/multipage/interaction.html#editing-host">editing
                                                    hosts</a> for all inputTypes: 'Update the DOM'.
                                            </li>
                                            <li>For <a
                                                    href="https://w3c.github.io/edit-context/#dfn-editcontext-editing-host">
                                                    EditContext editing hosts</a> for <a
                                                    href="https://w3c.github.io/edit-context/#dfn-editcontext-handled-inputtype">
                                                    EditContext-handled inputTypes</a>: <a
                                                    href="https://w3c.github.io/edit-context/#dfn-handle-input-for-editcontext">
                                                    Handle input for EditContext</a> given the <a data-link-type="dfn"
                                                    href="https://html.spec.whatwg.org/multipage/interaction.html#editing-host">editing
                                                    host</a> element.
                                            </li>
                                            <li>None otherwise.
                                            </li>
                                        </ul>
                                    </td>
                                </tr>
                                <tr>
                                    <th>
                                        Context<br>
                                        (trusted events)
                                    </th>
                                    <td>
                                        <ul>
                                            <li>
                                                <a href="#dfn-data" id="ref-for-dfn-data-2"><code
                                                        class="attribute-name">InputEvent.data</code></a>: the string
                                                containing the data that was added to the element,
                                                which <em class="rfc2119">MAY</em> be null if it doesn't apply.
                                            </li>
                                            <li>
                                                <a href="#dom-inputevent-datatransfer"
                                                    id="ref-for-dom-inputevent-datatransfer-3"><code
                                                        class="attribute-name">InputEvent.dataTransfer</code></a>:
                                                richtext data added or removed from element, which <em
                                                    class="rfc2119">MAY</em>
                                                be null if it doesn't apply.
                                            </li>
                                            <li>
                                                <a href="#dom-inputevent-gettargetranges" class="internalDFN"
                                                    data-link-type="idl"
                                                    id="ref-for-dom-inputevent-gettargetranges-3"><code
                                                        class="methods-name">InputEvent.getTargetRanges()</code></a>:
                                                returns an array of <a data-link-type="dfn"
                                                    href="https://dom.spec.whatwg.org/#interface-staticrange">StaticRanges</a>
                                                which will be
                                                affected by the change to the DOM if it is not
                                                canceled.
                                            </li>
                                        </ul>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <p>
                            A <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#user-agent">user agent</a>
                            <em class="rfc2119">MUST</em> <a data-link-type="dfn"
                                href="https://dom.spec.whatwg.org/#concept-event-dispatch">dispatch</a> this event when
                            the user has
                            attempted to input in a contenteditable element. It does not
                            necessarily mean the <a data-link-type="dfn"
                                href="https://infra.spec.whatwg.org/#user-agent">user agent</a> will then update the
                            DOM.
                        </p>
                        <p>
                            A <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#user-agent">user agent</a>
                            <em class="rfc2119">MUST NOT</em> <a data-link-type="dfn"
                                href="https://dom.spec.whatwg.org/#concept-event-dispatch">dispatch</a> this event due
                            to events
                            that are not caused by attempted user input, such as system
                            events.
                        </p>
                    </dd>
                </dl>
            </div>

            <div class="event-definition">
                <dl>
                    <dt id="event-type-input">
                        <dfn id="dfn-input" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn"><a class="eventtype"
                                href="#event-type-input"><code>input</code></a></dfn>
                    </dt>
                    <dd>
                        <table class="invisible-table"
                            data-summary="This table contains information about the semantics of the given event type">
                            <tbody>
                                <tr>
                                    <th>
                                        Type
                                    </th>
                                    <td>
                                        <strong><code>input</code></strong>
                                    </td>
                                </tr>
                                <tr>
                                    <th>
                                        Interface
                                    </th>
                                    <td>
                                        <a href="#interface-InputEvent"><code>InputEvent</code></a>
                                    </td>
                                </tr>
                                <tr>
                                    <th>
                                        Sync / Async
                                    </th>
                                    <td>
                                        Sync
                                    </td>
                                </tr>
                                <tr>
                                    <th>
                                        Bubbles
                                    </th>
                                    <td>
                                        Yes
                                    </td>
                                </tr>
                                <tr>
                                    <th>
                                        Trusted Targets
                                    </th>
                                    <td>
                                        Any <code>Element</code> with <code>contenteditable</code>
                                        attribute enabled.
                                    </td>
                                </tr>
                                <tr>
                                    <th>
                                        <a href="https://www.w3.org/TR/uievents/#default-action">Default
                                            action</a> [<cite><a class="bibref" data-link-type="biblio"
                                                href="#bib-ui-events" title="UI Events">UI-EVENTS</a></cite>]
                                    </th>
                                    <td>
                                        None
                                    </td>
                                </tr>
                                <tr>
                                    <th>
                                        Context<br>
                                        (trusted events)
                                    </th>
                                    <td>
                                        <ul>
                                            <li>
                                                <a href="#dfn-data" id="ref-for-dfn-data-3"><code
                                                        class="attribute-name">InputEvent.data</code></a>: the string
                                                containing the data that was added to the element,
                                                which <em class="rfc2119">MAY</em> be null if it doesn't apply.
                                            </li>
                                            <li>
                                                <a href="#dom-inputevent-datatransfer"
                                                    id="ref-for-dom-inputevent-datatransfer-4"><code
                                                        class="attribute-name">InputEvent.dataTransfer</code></a>:
                                                richtext data added or removed from element, which <em
                                                    class="rfc2119">MAY</em>
                                                be null if it doesn't apply.
                                            </li>
                                        </ul>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <p>
                            A <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#user-agent">user agent</a>
                            <em class="rfc2119">MUST</em> <a data-link-type="dfn"
                                href="https://dom.spec.whatwg.org/#concept-event-dispatch">dispatch</a> this event
                            immediately after
                            the DOM has been updated due to user expressed intention to
                            change the document contents which the browser has handled. If
                            the browser makes no DOM change, either because the editing
                            host is an <a href="https://w3c.github.io/edit-context/#dfn-editcontext-editing-host">
                                EditContext editing host</a> (which does not do automatic DOM
                            changes) or because the <a data-link-type="dfn"
                                href="https://infra.spec.whatwg.org/#user-agent">user agent</a> concludes that no DOM
                            change is needed, the user agent <em class="rfc2119">MUST NOT</em> dispatch this event.
                        </p>
                    </dd>
                </dl>
            </div>
        </section>
    </section>
    <section id="input-event-order-during-composition">
        <div class="header-wrapper">
            <h2 id="x7-input-event-order-during-composition"><bdi class="secno">7. </bdi>
                Input Event Order During Composition
            </h2><a class="self-link" href="#input-event-order-during-composition"
                aria-label="Permalink for Section 7."></a>
        </div>

        <p>
            The start of a composition is marked by dispatching a
            <a data-link-type="dfn" href="https://www.w3.org/TR/uievents/#compositionstart">compositionstart</a>
            event.
        </p>
        <p>
            During a composition session, whenever a text composition system
            updates its active text passage, a <a data-link-type="dfn"
                href="https://www.w3.org/TR/uievents/#compositionupdate">compositionupdate</a>
            event is dispatched.
        </p>
        <p>
            After each <a data-link-type="dfn"
                href="https://www.w3.org/TR/uievents/#compositionupdate">compositionupdate</a>
            event, a pair of <a data-link-type="idl" data-lt="beforeinput" href="#dfn-beforeinput" class="internalDFN"
                id="ref-for-dfn-beforeinput-2"><code>beforeinput</code></a> and <a data-link-type="idl" data-lt="input"
                href="#dfn-input" class="internalDFN" id="ref-for-dfn-input-3"><code>input</code></a> events are
            dispatched.
            The <a data-link-type="idl" data-lt="beforeinput" href="#dfn-beforeinput" class="internalDFN"
                id="ref-for-dfn-beforeinput-3"><code>beforeinput</code></a> and <a data-link-type="idl" data-lt="input"
                href="#dfn-input" class="internalDFN" id="ref-for-dfn-input-4"><code>input</code></a> events:
        </p>
        <ul>
            <li>Are not cancellable
            </li>
            <li>Have an <a data-link-type="attribute"
                    href="https://www.w3.org/TR/uievents/#dom-inputevent-inputtype"><code>inputType</code></a> set to
                <code>"insertCompositionText"</code>
            </li>
            <li>Have a <a data-link-type="idl" data-lt="data" href="#dfn-data" class="internalDFN"
                    id="ref-for-dfn-data-4"><code><code>data</code></code></a> attribute equal to that of the <a
                    data-link-type="dfn" href="https://www.w3.org/TR/uievents/#compositionupdate">compositionupdate</a>
                event
            </li>
            <li>Have a <a data-link-type="idl" href="#dom-inputevent-gettargetranges" class="internalDFN"
                    id="ref-for-dom-inputevent-gettargetranges-4"><code>targetRange</code></a> that surrounds the active
                text
                passage of the composition
            </li>
        </ul>
        <p>
            The DOM contents of the active text passage are updated after the
            <a data-link-type="idl" data-lt="beforeinput" href="#dfn-beforeinput" class="internalDFN"
                id="ref-for-dfn-beforeinput-4"><code>beforeinput</code></a> event is dispatched and before the <a
                data-link-type="idl" data-lt="input" href="#dfn-input" class="internalDFN"
                id="ref-for-dfn-input-5"><code>input</code></a> event is
            dispatched.
        </p>
        <p>
            The end of a composition session is marked by dispatching a
            <a data-link-type="dfn" href="https://www.w3.org/TR/uievents/#compositionend">compositionend</a>
            event.
        </p>
    </section>
    <section id="event-order-when-using-insertfrompaste">
        <div class="header-wrapper">
            <h2 id="x8-event-order-when-using-insertfrompaste"><bdi class="secno">8. </bdi>
                Event order when using <code>"insertFromPaste"</code>
            </h2><a class="self-link" href="#event-order-when-using-insertfrompaste"
                aria-label="Permalink for Section 8."></a>
        </div>

        <p>
            When an <code>"insertFromPaste"</code> <a data-link-type="idl" data-lt="beforeinput" href="#dfn-beforeinput"
                class="internalDFN" id="ref-for-dfn-beforeinput-5"><code>beforeinput</code></a> event is
            dispatched, it <em class="rfc2119">MUST</em> be preceded by a <a
                href="https://www.w3.org/TR/clipboard-apis/#clipboard-event-paste">paste</a>
            [<cite><a class="bibref" data-link-type="biblio" href="#bib-clipboard-apis"
                    title="Clipboard API and events">CLIPBOARD-APIS</a></cite>] event.
        </p>
    </section>
    <section id="privacy-and-security-considerations">
        <div class="header-wrapper">
            <h2 id="x9-privacy-and-security-considerations"><bdi class="secno">9. </bdi>
                Privacy and security considerations
            </h2><a class="self-link" href="#privacy-and-security-considerations"
                aria-label="Permalink for Section 9."></a>
        </div>

        <p>
            <i>This section is not normative.</i>
        </p>
        <p>
            There are no known security or privacy impacts of this feature beyond
            <a data-link-type="dfn"
                href="https://www.w3.org/TR/fingerprinting-guidance/#dfn-browser-fingerprinting">fingerprinting</a>
            [<cite><a class="bibref" data-link-type="biblio" href="#bib-fingerprinting-guidance"
                    title="Mitigating Browser Fingerprinting in Web Specifications">fingerprinting-guidance</a></cite>]
            techniques that already are available
            through existing events, such as the <a data-link-type="dfn"
                href="https://www.w3.org/TR/uievents/#keydown"><code>keydown</code></a> and <a data-link-type="dfn"
                href="https://www.w3.org/TR/uievents/#keypress"><code>keypress</code></a> [<cite><a class="bibref"
                    data-link-type="biblio" href="#bib-ui-events" title="UI Events">UI-EVENTS</a></cite>]
            events.
        </p>
        <p>
            If this feature replaces existing events, it <em class="rfc2119">MAY</em> lead to a decline in
            available <a data-link-type="dfn"
                href="https://www.w3.org/TR/fingerprinting-guidance/#dfn-browser-fingerprinting">fingerprinting</a>
            [<cite><a class="bibref" data-link-type="biblio" href="#bib-fingerprinting-guidance"
                    title="Mitigating Browser Fingerprinting in Web Specifications">fingerprinting-guidance</a></cite>]
            techniques, as users' intentions are
            recorded, and not the particular type of hardware they used to
            <a data-lt="express intention" href="#dfn-express-intention" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-express-intention-3">express</a> this intention.
        </p>
    </section>
    <section id="acknowledgements">
        <div class="header-wrapper">
            <h2 id="x10-acknowledgements"><bdi class="secno">10. </bdi>
                Acknowledgements
            </h2><a class="self-link" href="#acknowledgements" aria-label="Permalink for Section 10."></a>
        </div>

        <p>
            Thanks to: Michael Aufreiter, Adrian Bateman, Oliver Buchtala, Robin
            Berjon, Enrica Casucci, Bo Cupp, Domenic Denicola, Emil Eklund, Olivier
            Forget, Aryeh Gregor, Marijn Haverbeke, Yoshifumi Inoue, Koji Ishii,
            Gary Kacmarcik, Ian Kilpatrick, Frederico Caldeira Knabben, Takayoshi
            Kochi, Piotrek Koszuliński, Travis Leithead, Grisha Lyukshin, Miles
            Maxfield, Chaals McCathie Nevile, Masayuki Nakano, Ryosuke Niwa, Julie
            Parent, Ben Peters, Florian Rivoal, Morgan Smith, Hallvord R. M. Steen,
            Johan Sörlin, Cristian Talau, Dave Tapuska, Ojan Vafai, Léonie Watson,
            Xiaoqian Wu, Chong Zhang, Joanmarie, and everyone in the Editing
            Taskforce for their input and feedback.
        </p>
    </section>


    <section id="references" class="appendix">
        <div class="header-wrapper">
            <h2 id="a-references"><bdi class="secno">A. </bdi>References</h2><a class="self-link" href="#references"
                aria-label="Permalink for Appendix A."></a>
        </div>
        <section id="normative-references">
            <div class="header-wrapper">
                <h3 id="a-1-normative-references"><bdi class="secno">A.1 </bdi>Normative references</h3><a
                    class="self-link" href="#normative-references" aria-label="Permalink for Appendix A.1"></a>
            </div>

            <dl class="bibliography">
                <dt id="bib-clipboard-apis">[CLIPBOARD-APIS]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/clipboard-apis/"><cite>Clipboard API and events</cite></a>. Gary
                    Kacmarcik; Anupam Snigdha. W3C. 16 May 2025. W3C Working Draft. URL: <a
                        href="https://www.w3.org/TR/clipboard-apis/">https://www.w3.org/TR/clipboard-apis/</a>
                </dd>
                <dt id="bib-cssom">[CSSOM]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/cssom-1/"><cite>CSS Object Model (CSSOM)</cite></a>. Daniel Glazman;
                    Emilio Cobos Álvarez. W3C. 26 August 2021. W3C Working Draft. URL: <a
                        href="https://www.w3.org/TR/cssom-1/">https://www.w3.org/TR/cssom-1/</a>
                </dd>
                <dt id="bib-dom">[DOM]</dt>
                <dd>
                    <a href="https://dom.spec.whatwg.org/"><cite>DOM Standard</cite></a>. Anne van Kesteren. WHATWG.
                    Living Standard. URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
                </dd>
                <dt id="bib-fileapi">[FileAPI]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/FileAPI/"><cite>File API</cite></a>. Marijn Kruisselbrink. W3C. 4
                    December 2024. W3C Working Draft. URL: <a
                        href="https://www.w3.org/TR/FileAPI/">https://www.w3.org/TR/FileAPI/</a>
                </dd>
                <dt id="bib-fingerprinting-guidance">[fingerprinting-guidance]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/fingerprinting-guidance/"><cite>Mitigating Browser Fingerprinting in
                            Web Specifications</cite></a>. Nick Doty; Tom Ritter. W3C. 4 August 2025. W3C Working Group
                    Note. URL: <a
                        href="https://www.w3.org/TR/fingerprinting-guidance/">https://www.w3.org/TR/fingerprinting-guidance/</a>
                </dd>
                <dt id="bib-html">[HTML]</dt>
                <dd>
                    <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML Standard</cite></a>. Anne van Kesteren;
                    Domenic Denicola; Dominic Farolino; Ian Hickson; Philip Jägenstedt; Simon Pieters. WHATWG. Living
                    Standard. URL: <a
                        href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
                </dd>
                <dt id="bib-infra">[infra]</dt>
                <dd>
                    <a href="https://infra.spec.whatwg.org/"><cite>Infra Standard</cite></a>. Anne van Kesteren; Domenic
                    Denicola. WHATWG. Living Standard. URL: <a
                        href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
                </dd>
                <dt id="bib-mimesniff">[mimesniff]</dt>
                <dd>
                    <a href="https://mimesniff.spec.whatwg.org/"><cite>MIME Sniffing Standard</cite></a>. Gordon P.
                    Hemsley. WHATWG. Living Standard. URL: <a
                        href="https://mimesniff.spec.whatwg.org/">https://mimesniff.spec.whatwg.org/</a>
                </dd>
                <dt id="bib-rfc2119">[RFC2119]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc2119"><cite>Key words for use in RFCs to Indicate
                            Requirement Levels</cite></a>. S. Bradner. IETF. March 1997. Best Current Practice. URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc2119">https://www.rfc-editor.org/rfc/rfc2119</a>
                </dd>
                <dt id="bib-rfc8174">[RFC8174]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc8174"><cite>Ambiguity of Uppercase vs Lowercase in RFC
                            2119 Key Words</cite></a>. B. Leiba. IETF. May 2017. Best Current Practice. URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc8174">https://www.rfc-editor.org/rfc/rfc8174</a>
                </dd>
                <dt id="bib-ui-events">[UI-EVENTS]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/uievents/"><cite>UI Events</cite></a>. Gary Kacmarcik; Travis
                    Leithead. W3C. 7 September 2024. W3C Working Draft. URL: <a
                        href="https://www.w3.org/TR/uievents/">https://www.w3.org/TR/uievents/</a>
                </dd>
                <dt id="bib-webidl">[WEBIDL]</dt>
                <dd>
                    <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL Standard</cite></a>. Edgar Chen; Timothy Gu.
                    WHATWG. Living Standard. URL: <a
                        href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
                </dd>
            </dl>
        </section>
        <section id="informative-references">
            <div class="header-wrapper">
                <h3 id="a-2-informative-references"><bdi class="secno">A.2 </bdi>Informative references</h3><a
                    class="self-link" href="#informative-references" aria-label="Permalink for Appendix A.2"></a>
            </div>

            <dl class="bibliography">
                <dt id="bib-i18n-glossary">[i18n-glossary]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/i18n-glossary/"><cite>Internationalization Glossary</cite></a>.
                    Richard Ishida; Addison Phillips. W3C. 17 October 2024. W3C Working Group Note. URL: <a
                        href="https://www.w3.org/TR/i18n-glossary/">https://www.w3.org/TR/i18n-glossary/</a>
                </dd>
                <dt id="bib-input-events">[INPUT-EVENTS]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/input-events-1/"><cite>Input Events Level 1</cite></a>. Johannes
                    Wilm. W3C. 28 September 2023. W3C Working Draft. URL: <a
                        href="https://www.w3.org/TR/input-events-1/">https://www.w3.org/TR/input-events-1/</a>
                </dd>
            </dl>
        </section>
    </section>
    <p role="navigation" id="back-to-top">
        <a href="#title"><abbr title="Back to Top">↑</abbr></a>
    </p>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-express-intention"
        aria-label="Links in this document to definition: express intention">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-express-intention"
                aria-label="Permalink for definition: express intention. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-express-intention-1" title="§ 3. Definitions">§ 3. Definitions</a>
            </li>
            <li>
                <a href="#ref-for-dfn-express-intention-2" title="§ 6.1.2 Attributes">§ 6.1.2 Attributes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-express-intention-3" title="§ 9. Privacy and security considerations">§ 9. Privacy
                    and security considerations</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-kill-buffer"
        aria-label="Links in this document to definition: kill buffer">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-kill-buffer"
                aria-label="Permalink for definition: kill buffer. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-kill-buffer-1" title="§ 3. Definitions">§ 3. Definitions</a>
            </li>
            <li>
                <a href="#ref-for-dfn-kill-buffer-2" title="§ 6.1.2 Attributes">§ 6.1.2 Attributes</a> <a
                    href="#ref-for-dfn-kill-buffer-3" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-inputeventinit-datatransfer"
        aria-label="Links in this document to definition: dataTransfer">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-inputeventinit-datatransfer"
                aria-label="Permalink for definition: dataTransfer. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-827932857">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-inputeventinit-datatransfer-1" title="§ 6.1 Interface InputEvent">§ 6.1 Interface
                    InputEvent</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-inputeventinit-targetranges"
        aria-label="Links in this document to definition: targetRanges">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-inputeventinit-targetranges"
                aria-label="Permalink for definition: targetRanges. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-827932857">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-inputeventinit-targetranges-1" title="§ 6.1 Interface InputEvent">§ 6.1 Interface
                    InputEvent</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-data"
        aria-label="Links in this document to definition: data">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-data"
                aria-label="Permalink for definition: data. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-data-1" title="§ 6.1.1 Overview">§ 6.1.1 Overview</a>
            </li>
            <li>
                <a href="#ref-for-dfn-data-2" title="§ 6.2 Event definitions">§ 6.2 Event definitions</a> <a
                    href="#ref-for-dfn-data-3" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-data-4" title="§ 7. Input Event Order During Composition">§ 7. Input Event Order
                    During Composition</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-inputevent-datatransfer"
        aria-label="Links in this document to definition: dataTransfer">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-inputevent-datatransfer"
                aria-label="Permalink for definition: dataTransfer. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-827932857">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-inputevent-datatransfer-1" title="§ 6.1 Interface InputEvent">§ 6.1 Interface
                    InputEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-inputevent-datatransfer-2" title="§ 6.1.1 Overview">§ 6.1.1 Overview</a>
            </li>
            <li>
                <a href="#ref-for-dom-inputevent-datatransfer-3" title="§ 6.2 Event definitions">§ 6.2 Event
                    definitions</a> <a href="#ref-for-dom-inputevent-datatransfer-4" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-inputevent-gettargetranges"
        aria-label="Links in this document to definition: getTargetRanges()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-inputevent-gettargetranges"
                aria-label="Permalink for definition: getTargetRanges(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-827932857">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-inputevent-gettargetranges-1" title="§ 6.1 Interface InputEvent">§ 6.1 Interface
                    InputEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-inputevent-gettargetranges-2" title="§ 6.1.1 Overview">§ 6.1.1 Overview</a>
            </li>
            <li>
                <a href="#ref-for-dom-inputevent-gettargetranges-3" title="§ 6.2 Event definitions">§ 6.2 Event
                    definitions</a>
            </li>
            <li>
                <a href="#ref-for-dom-inputevent-gettargetranges-4" title="§ 7. Input Event Order During Composition">§
                    7. Input Event Order During Composition</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-beforeinput"
        aria-label="Links in this document to definition: beforeinput">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-beforeinput"
                aria-label="Permalink for definition: beforeinput. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-beforeinput-1" title="§ 4. Problems solved">§ 4. Problems solved</a>
            </li>
            <li>
                <a href="#ref-for-dfn-beforeinput-2" title="§ 7. Input Event Order During Composition">§ 7. Input Event
                    Order During Composition</a> <a href="#ref-for-dfn-beforeinput-3" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-beforeinput-4" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-beforeinput-5" title="§ 8. Event order when using &quot;insertFromPaste&quot;">§
                    8. Event order when using "insertFromPaste"</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-input"
        aria-label="Links in this document to definition: input">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-input"
                aria-label="Permalink for definition: input. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-input-1" title="§ 4. Problems solved">§ 4. Problems solved</a>
            </li>
            <li>
                <a href="#ref-for-dfn-input-2" title="§ 6. Input Event Types">§ 6. Input Event Types</a>
            </li>
            <li>
                <a href="#ref-for-dfn-input-3" title="§ 7. Input Event Order During Composition">§ 7. Input Event Order
                    During Composition</a> <a href="#ref-for-dfn-input-4" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-input-5" title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <script id="respec-highlight-vars">(() => {
            // @ts-check

            if (document.respec) {
                document.respec.ready.then(setupVarHighlighter);
            } else {
                setupVarHighlighter();
            }

            function setupVarHighlighter() {
                document
                    .querySelectorAll("var")
                    .forEach(varElem => varElem.addEventListener("click", highlightListener));
            }

            function highlightListener(ev) {
                ev.stopPropagation();
                const { target: varElem } = ev;
                const hightligtedElems = highlightVars(varElem);
                const resetListener = () => {
                    const hlColor = getHighlightColor(varElem);
                    hightligtedElems.forEach(el => removeHighlight(el, hlColor));
                    [...HL_COLORS.keys()].forEach(key => HL_COLORS.set(key, true));
                };
                if (hightligtedElems.length) {
                    document.body.addEventListener("click", resetListener, { once: true });
                }
            }

            // availability of highlight colors. colors from var.css
            const HL_COLORS = new Map([
                ["respec-hl-c1", true],
                ["respec-hl-c2", true],
                ["respec-hl-c3", true],
                ["respec-hl-c4", true],
                ["respec-hl-c5", true],
                ["respec-hl-c6", true],
                ["respec-hl-c7", true],
            ]);

            function getHighlightColor(target) {
                // return current colors if applicable
                const { value } = target.classList;
                const re = /respec-hl-\w+/;
                const activeClass = re.test(value) && value.match(re);
                if (activeClass) return activeClass[0];

                // first color preference
                if (HL_COLORS.get("respec-hl-c1") === true) return "respec-hl-c1";

                // otherwise get some other available color
                return [...HL_COLORS.keys()].find(c => HL_COLORS.get(c)) || "respec-hl-c1";
            }

            function highlightVars(varElem) {
                const textContent = norm(varElem.textContent);
                const parent = varElem.closest(".algorithm, section");
                const highlightColor = getHighlightColor(varElem);

                const varsToHighlight = [...parent.querySelectorAll("var")].filter(
                    el =>
                        norm(el.textContent) === textContent &&
                        el.closest(".algorithm, section") === parent
                );

                // update availability of highlight color
                const colorStatus = varsToHighlight[0].classList.contains("respec-hl");
                HL_COLORS.set(highlightColor, colorStatus);

                // highlight vars
                if (colorStatus) {
                    varsToHighlight.forEach(el => removeHighlight(el, highlightColor));
                    return [];
                } else {
                    varsToHighlight.forEach(el => addHighlight(el, highlightColor));
                }
                return varsToHighlight;
            }

            function removeHighlight(el, highlightColor) {
                el.classList.remove("respec-hl", highlightColor);
                // clean up empty class attributes so they don't come in export
                if (!el.classList.length) el.removeAttribute("class");
            }

            function addHighlight(elem, highlightColor) {
                elem.classList.add("respec-hl", highlightColor);
            }

            /**
             * Same as `norm` from src/core/utils, but our build process doesn't allow
             * imports in runtime scripts, so duplicated here.
             * @param {string} str
             */
            function norm(str) {
                return str.trim().replace(/\s+/g, " ");
            }
        })()</script>
    <script id="respec-dfn-panel">(() => {
                                               // @ts-check
                                               if (document.respec) {
                                                   document.respec.ready.then(setupPanel);
                                               } else {
                                                   setupPanel();
                                               }

                                               function setupPanel() {
                                                   const listener = panelListener();
                                                   document.body.addEventListener("keydown", listener);
                                                   document.body.addEventListener("click", listener);
                                               }

                                               function panelListener() {
                                                   /** @type {HTMLElement} */
                                                   let panel = null;
                                                   return event => {
                                                       const { target, type } = event;

                                                       if (!(target instanceof HTMLElement)) return;

                                                       // For keys, we only care about Enter key to activate the panel
                                                       // otherwise it's activated via a click.
                                                       if (type === "keydown" && event.key !== "Enter") return;

                                                       const action = deriveAction(event);

                                                       switch (action) {
                                                           case "show": {
                                                               hidePanel(panel);
                                                               /** @type {HTMLElement} */
                                                               const dfn = target.closest("dfn, .index-term");
                                                               panel = document.getElementById(`dfn-panel-for-${dfn.id}`);
                                                               const coords = deriveCoordinates(event);
                                                               displayPanel(dfn, panel, coords);
                                                               break;
                                                           }
                                                           case "dock": {
                                                               panel.style.left = null;
                                                               panel.style.top = null;
                                                               panel.classList.add("docked");
                                                               break;
                                                           }
                                                           case "hide": {
                                                               hidePanel(panel);
                                                               panel = null;
                                                               break;
                                                           }
                                                       }
                                                   };
                                               }

                                               /**
                                                * @param {MouseEvent|KeyboardEvent} event
                                                */
                                               function deriveCoordinates(event) {
                                                   const target = /** @type HTMLElement */ (event.target);

                                                   // We prevent synthetic AT clicks from putting
                                                   // the dialog in a weird place. The AT events sometimes
                                                   // lack coordinates, so they have clientX/Y = 0
                                                   const rect = target.getBoundingClientRect();
                                                   if (
                                                       event instanceof MouseEvent &&
                                                       event.clientX >= rect.left &&
                                                       event.clientY >= rect.top
                                                   ) {
                                                       // The event probably happened inside the bounding rect...
                                                       return { x: event.clientX, y: event.clientY };
                                                   }

                                                   // Offset to the middle of the element
                                                   const x = rect.x + rect.width / 2;
                                                   // Placed at the bottom of the element
                                                   const y = rect.y + rect.height;
                                                   return { x, y };
                                               }

                                               /**
                                                * @param {Event} event
                                                */
                                               function deriveAction(event) {
                                                   const target = /** @type {HTMLElement} */ (event.target);
                                                   const hitALink = !!target.closest("a");
                                                   if (target.closest("dfn:not([data-cite]), .index-term")) {
                                                       return hitALink ? "none" : "show";
                                                   }
                                                   if (target.closest(".dfn-panel")) {
                                                       if (hitALink) {
                                                           return target.classList.contains("self-link") ? "hide" : "dock";
                                                       }
                                                       const panel = target.closest(".dfn-panel");
                                                       return panel.classList.contains("docked") ? "hide" : "none";
                                                   }
                                                   if (document.querySelector(".dfn-panel:not([hidden])")) {
                                                       return "hide";
                                                   }
                                                   return "none";
                                               }

                                               /**
                                                * @param {HTMLElement} dfn
                                                * @param {HTMLElement} panel
                                                * @param {{ x: number, y: number }} clickPosition
                                                */
                                               function displayPanel(dfn, panel, { x, y }) {
                                                   panel.hidden = false;
                                                   // distance (px) between edge of panel and the pointing triangle (caret)
                                                   const MARGIN = 20;

                                                   const dfnRects = dfn.getClientRects();
                                                   // Find the `top` offset when the `dfn` can be spread across multiple lines
                                                   let closestTop = 0;
                                                   let minDiff = Infinity;
                                                   for (const rect of dfnRects) {
                                                       const { top, bottom } = rect;
                                                       const diffFromClickY = Math.abs((top + bottom) / 2 - y);
                                                       if (diffFromClickY < minDiff) {
                                                           minDiff = diffFromClickY;
                                                           closestTop = top;
                                                       }
                                                   }

                                                   const top = window.scrollY + closestTop + dfnRects[0].height;
                                                   const left = x - MARGIN;
                                                   panel.style.left = `${left}px`;
                                                   panel.style.top = `${top}px`;

                                                   // Find if the panel is flowing out of the window
                                                   const panelRect = panel.getBoundingClientRect();
                                                   const SCREEN_WIDTH = Math.min(window.innerWidth, window.screen.width);
                                                   if (panelRect.right > SCREEN_WIDTH) {
                                                       const newLeft = Math.max(MARGIN, x + MARGIN - panelRect.width);
                                                       const newCaretOffset = left - newLeft;
                                                       panel.style.left = `${newLeft}px`;
                                                       /** @type {HTMLElement} */
                                                       const caret = panel.querySelector(".caret");
                                                       caret.style.left = `${newCaretOffset}px`;
                                                   }

                                                   // As it's a dialog, we trap focus.
                                                   // TODO: when <dialog> becomes a implemented, we should really
                                                   // use that.
                                                   trapFocus(panel, dfn);
                                               }

                                               /**
                                                * @param {HTMLElement} panel
                                                * @param {HTMLElement} dfn
                                                * @returns
                                                */
                                               function trapFocus(panel, dfn) {
                                                   /** @type NodeListOf<HTMLAnchorElement> elements */
                                                   const anchors = panel.querySelectorAll("a[href]");
                                                   // No need to trap focus
                                                   if (!anchors.length) return;

                                                   // Move focus to first anchor element
                                                   const first = anchors.item(0);
                                                   first.focus();

                                                   const trapListener = createTrapListener(anchors, panel, dfn);
                                                   panel.addEventListener("keydown", trapListener);

                                                   // Hiding the panel releases the trap
                                                   const mo = new MutationObserver(records => {
                                                       const [record] = records;
                                                       const target = /** @type HTMLElement */ (record.target);
                                                       if (target.hidden) {
                                                           panel.removeEventListener("keydown", trapListener);
                                                           mo.disconnect();
                                                       }
                                                   });
                                                   mo.observe(panel, { attributes: true, attributeFilter: ["hidden"] });
                                               }

                                               /**
                                                *
                                                * @param {NodeListOf<HTMLAnchorElement>} anchors
                                                * @param {HTMLElement} panel
                                                * @param {HTMLElement} dfn
                                                * @returns
                                                */
                                               function createTrapListener(anchors, panel, dfn) {
                                                   const lastIndex = anchors.length - 1;
                                                   let currentIndex = 0;
                                                   return event => {
                                                       switch (event.key) {
                                                           // Hitting "Tab" traps us in a nice loop around elements.
                                                           case "Tab": {
                                                               event.preventDefault();
                                                               currentIndex += event.shiftKey ? -1 : +1;
                                                               if (currentIndex < 0) {
                                                                   currentIndex = lastIndex;
                                                               } else if (currentIndex > lastIndex) {
                                                                   currentIndex = 0;
                                                               }
                                                               anchors.item(currentIndex).focus();
                                                               break;
                                                           }

                                                           // Hitting "Enter" on an anchor releases the trap.
                                                           case "Enter":
                                                               hidePanel(panel);
                                                               break;

                                                           // Hitting "Escape" returns focus to dfn.
                                                           case "Escape":
                                                               hidePanel(panel);
                                                               dfn.focus();
                                                               return;
                                                       }
                                                   };
                                               }

                                               /** @param {HTMLElement} panel */
                                               function hidePanel(panel) {
                                                   if (!panel) return;
                                                   panel.hidden = true;
                                                   panel.classList.remove("docked");
                                               }
                                           })()</script>
    <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
</body>

</html>