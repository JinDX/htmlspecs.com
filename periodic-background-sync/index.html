<!doctype html>
<html lang="zh-hans">

<head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <title>Web 周期性后台同步</title>
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
    <link href="https://www.w3.org/StyleSheets/TR/2016/cg-draft" rel="stylesheet">
    <!-- <meta content="Bikeshed version c5fd42b86, updated Mon Apr 5 16:27:33 2021 -0700" name="generator"> -->
    <link href="https://wicg.github.io/periodic-background-sync/index.html" rel="canonical">
    <!-- <meta content="6bdc291e9d941c9aaecb17fcab02d49d99576221" name="document-revision"> -->
    <style>
        /* style-autolinks */

        .css.css,
        .property.property,
        .descriptor.descriptor {
            color: var(--a-normal-text);
            font-size: inherit;
            font-family: inherit;
        }

        .css::before,
        .property::before,
        .descriptor::before {
            content: "‘";
        }

        .css::after,
        .property::after,
        .descriptor::after {
            content: "’";
        }

        .property,
        .descriptor {
            /* Don't wrap property and descriptor names */
            white-space: nowrap;
        }

        .type {
            /* CSS value <type> */
            font-style: italic;
        }

        pre .property::before,
        pre .property::after {
            content: "";
        }

        [data-link-type="property"]::before,
        [data-link-type="propdesc"]::before,
        [data-link-type="descriptor"]::before,
        [data-link-type="value"]::before,
        [data-link-type="function"]::before,
        [data-link-type="at-rule"]::before,
        [data-link-type="selector"]::before,
        [data-link-type="maybe"]::before {
            content: "‘";
        }

        [data-link-type="property"]::after,
        [data-link-type="propdesc"]::after,
        [data-link-type="descriptor"]::after,
        [data-link-type="value"]::after,
        [data-link-type="function"]::after,
        [data-link-type="at-rule"]::after,
        [data-link-type="selector"]::after,
        [data-link-type="maybe"]::after {
            content: "’";
        }

        [data-link-type].production::before,
        [data-link-type].production::after,
        .prod [data-link-type]::before,
        .prod [data-link-type]::after {
            content: "";
        }

        [data-link-type=element],
        [data-link-type=element-attr] {
            font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
            font-size: .9em;
        }

        [data-link-type=element]::before {
            content: "<"
        }

        [data-link-type=element]::after {
            content: ">"
        }

        [data-link-type=biblio] {
            white-space: pre;
        }
    </style>
    <style>
        /* style-colors */

        /* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
        :root {
            color-scheme: light dark;

            --text: black;
            --bg: white;

            --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

            --logo-bg: #1a5e9a;
            --logo-active-bg: #c00;
            --logo-text: white;

            --tocnav-normal-text: #707070;
            --tocnav-normal-bg: var(--bg);
            --tocnav-hover-text: var(--tocnav-normal-text);
            --tocnav-hover-bg: #f8f8f8;
            --tocnav-active-text: #c00;
            --tocnav-active-bg: var(--tocnav-normal-bg);

            --tocsidebar-text: var(--text);
            --tocsidebar-bg: #f7f8f9;
            --tocsidebar-shadow: rgba(0, 0, 0, .1);
            --tocsidebar-heading-text: hsla(203, 20%, 40%, .7);

            --toclink-text: var(--text);
            --toclink-underline: #3980b5;
            --toclink-visited-text: var(--toclink-text);
            --toclink-visited-underline: #054572;

            --heading-text: #005a9c;

            --hr-text: var(--text);

            --algo-border: #def;

            --del-text: red;
            --del-bg: transparent;
            --ins-text: #080;
            --ins-bg: transparent;

            --a-normal-text: #034575;
            --a-normal-underline: #707070;
            --a-visited-text: var(--a-normal-text);
            --a-visited-underline: #bbb;
            --a-hover-bg: rgba(75%, 75%, 75%, .25);
            --a-active-text: #c00;
            --a-active-underline: #c00;

            --blockquote-border: silver;
            --blockquote-bg: transparent;
            --blockquote-text: currentcolor;

            --issue-border: #e05252;
            --issue-bg: #fbe9e9;
            --issue-text: var(--text);
            --issueheading-text: #831616;

            --example-border: #e0cb52;
            --example-bg: #fcfaee;
            --example-text: var(--text);
            --exampleheading-text: #574b0f;

            --note-border: #52e052;
            --note-bg: #e9fbe9;
            --note-text: var(--text);
            --noteheading-text: hsl(120, 70%, 30%);
            --notesummary-underline: silver;

            --assertion-border: #aaa;
            --assertion-bg: #eee;
            --assertion-text: black;

            --advisement-border: orange;
            --advisement-bg: #fec;
            --advisement-text: var(--text);
            --advisementheading-text: #b35f00;

            --warning-border: red;
            --warning-bg: hsla(40, 100%, 50%, 0.95);
            --warning-text: var(--text);

            --amendment-border: #330099;
            --amendment-bg: #F5F0FF;
            --amendment-text: var(--text);
            --amendmentheading-text: #220066;

            --def-border: #8ccbf2;
            --def-bg: #def;
            --def-text: var(--text);
            --defrow-border: #bbd7e9;

            --datacell-border: silver;

            --indexinfo-text: #707070;

            --indextable-hover-text: black;
            --indextable-hover-bg: #f7f8f9;

            --outdatedspec-bg: rgba(0, 0, 0, .5);
            --outdatedspec-text: black;
            --outdated-bg: maroon;
            --outdated-text: white;
            --outdated-shadow: red;

            --editedrec-bg: darkorange;
        }
    </style>
    <style>
        /* style-counters */

        body {
            counter-reset: example figure issue;
        }

        .issue {
            counter-increment: issue;
        }

        .issue:not(.no-marker)::before {
            content: "Issue " counter(issue);
        }

        .example {
            counter-increment: example;
        }

        .example:not(.no-marker)::before {
            content: "Example " counter(example);
        }

        .invalid.example:not(.no-marker)::before,
        .illegal.example:not(.no-marker)::before {
            content: "Invalid Example" counter(example);
        }

        figcaption {
            counter-increment: figure;
        }

        figcaption:not(.no-marker)::before {
            content: "Figure " counter(figure) " ";
        }
    </style>
    <style>
        /* style-dfn-panel */

        :root {
            --dfnpanel-bg: #ddd;
            --dfnpanel-text: var(--text);
        }

        .dfn-panel {
            position: absolute;
            z-index: 35;
            height: auto;
            width: -webkit-fit-content;
            width: fit-content;
            max-width: 300px;
            max-height: 500px;
            overflow: auto;
            padding: 0.5em 0.75em;
            font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
            background: var(--dfnpanel-bg);
            color: var(--dfnpanel-text);
            border: outset 0.2em;
        }

        .dfn-panel:not(.on) {
            display: none;
        }

        .dfn-panel * {
            margin: 0;
            padding: 0;
            text-indent: 0;
        }

        .dfn-panel>b {
            display: block;
        }

        .dfn-panel a {
            color: var(--dfnpanel-text);
        }

        .dfn-panel a:not(:hover) {
            text-decoration: none !important;
            border-bottom: none !important;
        }

        .dfn-panel>b+b {
            margin-top: 0.25em;
        }

        .dfn-panel ul {
            padding: 0;
        }

        .dfn-panel li {
            list-style: inside;
        }

        .dfn-panel.activated {
            display: inline-block;
            position: fixed;
            left: .5em;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - 1.5em - .4em - .5em);
            max-height: 30vh;
        }

        .dfn-paneled {
            cursor: pointer;
        }
    </style>
    <style>
        /* style-md-lists */

        /* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
        [data-md]> :first-child {
            margin-top: 0;
        }

        [data-md]> :last-child {
            margin-bottom: 0;
        }
    </style>
    <style>
        /* style-mdn-anno */

        @media (max-width: 767px) {
            .mdn-anno {
                opacity: .1
            }
        }

        .mdn-anno {
            font: 1em sans-serif;
            padding: 0.3em;
            position: absolute;
            z-index: 8;
            right: 0.3em;
            background: #EEE;
            color: black;
            box-shadow: 0 0 3px #999;
            overflow: hidden;
            border-collapse: initial;
            border-spacing: initial;
            min-width: 9em;
            max-width: min-content;
            white-space: nowrap;
            word-wrap: normal;
            hyphens: none
        }

        .mdn-anno:not(.wrapped) {
            opacity: 1
        }

        .mdn-anno:hover {
            z-index: 9
        }

        .mdn-anno.wrapped {
            min-width: 0
        }

        .mdn-anno.wrapped> :not(button) {
            display: none;
        }

        .mdn-anno>.mdn-anno-btn {
            cursor: pointer;
            border: none;
            color: #000;
            background: transparent;
            margin: -8px;
            float: right;
            padding: 10px 8px 8px 8px;
            outline: none;
        }

        .mdn-anno>.mdn-anno-btn>.less-than-two-engines-flag {
            color: red;
            padding-right: 2px;
        }

        .mdn-anno>.mdn-anno-btn>.all-engines-flag {
            color: green;
            padding-right: 2px;
        }

        .mdn-anno>.mdn-anno-btn>span {
            color: #fff;
            background-color: #000;
            font-weight: normal;
            font-family: zillaslab, Palatino, "Palatino Linotype", serif;
            padding: 2px 3px 0px 3px;
            line-height: 1.3em;
            vertical-align: top;
        }

        .mdn-anno>.feature {
            margin-top: 20px;
        }

        .mdn-anno>.feature:not(:first-of-type) {
            border-top: 1px solid #999;
            margin-top: 6px;
            padding-top: 2px;
        }

        .mdn-anno>.feature>.less-than-two-engines-text {
            color: red
        }

        .mdn-anno>.feature>.all-engines-text {
            color: green
        }

        .mdn-anno>.feature>p {
            font-size: .75em;
            margin-top: 6px;
            margin-bottom: 0;
        }

        .mdn-anno>.feature>p+p {
            margin-top: 3px;
        }

        .mdn-anno>.feature>.support {
            display: block;
            font-size: 0.6em;
            margin: 0;
            padding: 0;
            margin-top: 2px
        }

        .mdn-anno>.feature>.support+div {
            padding-top: 0.5em;
        }

        .mdn-anno>.feature>.support>hr {
            display: block;
            border: none;
            border-top: 1px dotted #999;
            padding: 3px 0px 0px 0px;
            margin: 2px 3px 0px 3px;
        }

        .mdn-anno>.feature>.support>hr::before {
            content: "";
        }

        .mdn-anno>.feature>.support>span {
            padding: 0.2em 0;
            display: block;
            display: table;
        }

        .mdn-anno>.feature>.support>span.no {
            color: #CCCCCC;
            filter: grayscale(100%);
        }

        .mdn-anno>.feature>.support>span.no::before {
            opacity: 0.5;
        }

        .mdn-anno>.feature>.support>span:first-of-type {
            padding-top: 0.5em;
        }

        .mdn-anno>.feature>.support>span>span {
            padding: 0 0.5em;
            display: table-cell;
        }

        .mdn-anno>.feature>.support>span>span:first-child {
            width: 100%;
        }

        .mdn-anno>.feature>.support>span>span:last-child {
            width: 100%;
            white-space: pre;
            padding: 0;
        }

        .mdn-anno>.feature>.support>span::before {
            content: ' ';
            display: table-cell;
            min-width: 1.5em;
            height: 1.5em;
            background: no-repeat center center;
            background-size: contain;
            text-align: right;
            font-size: 0.75em;
            font-weight: bold;
        }

        .mdn-anno>.feature>.support>.chrome_android::before {
            background-image: url(https://resources.whatwg.org/browser-logos/chrome.svg);
        }

        .mdn-anno>.feature>.support>.firefox_android::before {
            background-image: url(https://resources.whatwg.org/browser-logos/firefox.png);
        }

        .mdn-anno>.feature>.support>.chrome::before {
            background-image: url(https://resources.whatwg.org/browser-logos/chrome.svg);
        }

        .mdn-anno>.feature>.support>.edge_blink::before {
            background-image: url(https://resources.whatwg.org/browser-logos/edge.svg);
        }

        .mdn-anno>.feature>.support>.edge::before {
            background-image: url(https://resources.whatwg.org/browser-logos/edge_legacy.svg);
        }

        .mdn-anno>.feature>.support>.firefox::before {
            background-image: url(https://resources.whatwg.org/browser-logos/firefox.png);
        }

        .mdn-anno>.feature>.support>.ie::before {
            background-image: url(https://resources.whatwg.org/browser-logos/ie.png);
        }

        .mdn-anno>.feature>.support>.safari_ios::before {
            background-image: url(https://resources.whatwg.org/browser-logos/safari-ios.svg);
        }

        .mdn-anno>.feature>.support>.nodejs::before {
            background-image: url(https://nodejs.org/static/images/favicons/favicon.ico);
        }

        .mdn-anno>.feature>.support>.opera_android::before {
            background-image: url(https://resources.whatwg.org/browser-logos/opera.svg);
        }

        .mdn-anno>.feature>.support>.opera::before {
            background-image: url(https://resources.whatwg.org/browser-logos/opera.svg);
        }

        .mdn-anno>.feature>.support>.safari::before {
            background-image: url(https://resources.whatwg.org/browser-logos/safari.png);
        }

        .mdn-anno>.feature>.support>.samsunginternet_android::before {
            background-image: url(https://resources.whatwg.org/browser-logos/samsung.svg);
        }

        .mdn-anno>.feature>.support>.webview_android::before {
            background-image: url(https://resources.whatwg.org/browser-logos/android-webview.png);
        }

        .name-slug-mismatch {
            color: red
        }

        .caniuse-status:hover {
            z-index: 9;
        }

        /* dt, li, .issue, .note, and .example are "position: relative", so to put annotation at right margin, must move to right of containing block */
        .h-entry:not(.status-LS) dt>.mdn-anno,
        .h-entry:not(.status-LS) li>.mdn-anno,
        .h-entry:not(.status-LS) .issue>.mdn-anno,
        .h-entry:not(.status-LS) .note>.mdn-anno,
        .h-entry:not(.status-LS) .example>.mdn-anno {
            right: -6.7em;
        }

        .h-entry p+.mdn-anno {
            margin-top: 0;
        }

        h2+.mdn-anno.after {
            margin: -48px 0 0 0;
        }

        h3+.mdn-anno.after {
            margin: -46px 0 0 0;
        }

        h4+.mdn-anno.after {
            margin: -42px 0 0 0;
        }

        h5+.mdn-anno.after {
            margin: -40px 0 0 0;
        }

        h6+.mdn-anno.after {
            margin: -40px 0 0 0;
        }
    </style>
    <style>
        /* style-selflinks */

        :root {
            --selflink-text: white;
            --selflink-bg: gray;
            --selflink-hover-text: black;
        }

        .heading,
        .issue,
        .note,
        .example,
        li,
        dt {
            position: relative;
        }

        a.self-link {
            position: absolute;
            top: 0;
            left: calc(-1 * (3.5rem - 26px));
            width: calc(3.5rem - 26px);
            height: 2em;
            text-align: center;
            border: none;
            transition: opacity .2s;
            opacity: .5;
        }

        a.self-link:hover {
            opacity: 1;
        }

        .heading>a.self-link {
            font-size: 83%;
        }

        li>a.self-link {
            left: calc(-1 * (3.5rem - 26px) - 2em);
        }

        dfn>a.self-link {
            top: auto;
            left: auto;
            opacity: 0;
            width: 1.5em;
            height: 1.5em;
            background: var(--selflink-bg);
            color: var(--selflink-text);
            font-style: normal;
            transition: opacity .2s, background-color .2s, color .2s;
        }

        dfn:hover>a.self-link {
            opacity: 1;
        }

        dfn>a.self-link:hover {
            color: var(--selflink-hover-text);
        }

        a.self-link::before {
            content: "¶";
        }

        .heading>a.self-link::before {
            content: "§";
        }

        dfn>a.self-link::before {
            content: "#";
        }
    </style>
    <style>
        /* style-syntax-highlighting */

        pre.idl.highlight {
            background: var(--borderedblock-bg, var(--def-bg));
        }

        code.highlight {
            padding: .1em;
            border-radius: .3em;
        }

        pre.highlight,
        pre>code.highlight {
            display: block;
            padding: 1em;
            margin: .5em 0;
            overflow: auto;
            border-radius: 0;
        }

        .highlight:not(.idl) {
            background: rgba(0, 0, 0, .03);
        }

        c-[a] {
            color: #990055
        }

        /* Keyword.Declaration */
        c-[b] {
            color: #990055
        }

        /* Keyword.Type */
        c-[c] {
            color: #708090
        }

        /* Comment */
        c-[d] {
            color: #708090
        }

        /* Comment.Multiline */
        c-[e] {
            color: #0077aa
        }

        /* Name.Attribute */
        c-[f] {
            color: #669900
        }

        /* Name.Tag */
        c-[g] {
            color: #222222
        }

        /* Name.Variable */
        c-[k] {
            color: #990055
        }

        /* Keyword */
        c-[l] {
            color: #000000
        }

        /* Literal */
        c-[m] {
            color: #000000
        }

        /* Literal.Number */
        c-[n] {
            color: #0077aa
        }

        /* Name */
        c-[o] {
            color: #999999
        }

        /* Operator */
        c-[p] {
            color: #999999
        }

        /* Punctuation */
        c-[s] {
            color: #a67f59
        }

        /* Literal.String */
        c-[t] {
            color: #a67f59
        }

        /* Literal.String.Single */
        c-[u] {
            color: #a67f59
        }

        /* Literal.String.Double */
        c-[cp] {
            color: #708090
        }

        /* Comment.Preproc */
        c-[c1] {
            color: #708090
        }

        /* Comment.Single */
        c-[cs] {
            color: #708090
        }

        /* Comment.Special */
        c-[kc] {
            color: #990055
        }

        /* Keyword.Constant */
        c-[kn] {
            color: #990055
        }

        /* Keyword.Namespace */
        c-[kp] {
            color: #990055
        }

        /* Keyword.Pseudo */
        c-[kr] {
            color: #990055
        }

        /* Keyword.Reserved */
        c-[ld] {
            color: #000000
        }

        /* Literal.Date */
        c-[nc] {
            color: #0077aa
        }

        /* Name.Class */
        c-[no] {
            color: #0077aa
        }

        /* Name.Constant */
        c-[nd] {
            color: #0077aa
        }

        /* Name.Decorator */
        c-[ni] {
            color: #0077aa
        }

        /* Name.Entity */
        c-[ne] {
            color: #0077aa
        }

        /* Name.Exception */
        c-[nf] {
            color: #0077aa
        }

        /* Name.Function */
        c-[nl] {
            color: #0077aa
        }

        /* Name.Label */
        c-[nn] {
            color: #0077aa
        }

        /* Name.Namespace */
        c-[py] {
            color: #0077aa
        }

        /* Name.Property */
        c-[ow] {
            color: #999999
        }

        /* Operator.Word */
        c-[mb] {
            color: #000000
        }

        /* Literal.Number.Bin */
        c-[mf] {
            color: #000000
        }

        /* Literal.Number.Float */
        c-[mh] {
            color: #000000
        }

        /* Literal.Number.Hex */
        c-[mi] {
            color: #000000
        }

        /* Literal.Number.Integer */
        c-[mo] {
            color: #000000
        }

        /* Literal.Number.Oct */
        c-[sb] {
            color: #a67f59
        }

        /* Literal.String.Backtick */
        c-[sc] {
            color: #a67f59
        }

        /* Literal.String.Char */
        c-[sd] {
            color: #a67f59
        }

        /* Literal.String.Doc */
        c-[se] {
            color: #a67f59
        }

        /* Literal.String.Escape */
        c-[sh] {
            color: #a67f59
        }

        /* Literal.String.Heredoc */
        c-[si] {
            color: #a67f59
        }

        /* Literal.String.Interpol */
        c-[sx] {
            color: #a67f59
        }

        /* Literal.String.Other */
        c-[sr] {
            color: #a67f59
        }

        /* Literal.String.Regex */
        c-[ss] {
            color: #a67f59
        }

        /* Literal.String.Symbol */
        c-[vc] {
            color: #0077aa
        }

        /* Name.Variable.Class */
        c-[vg] {
            color: #0077aa
        }

        /* Name.Variable.Global */
        c-[vi] {
            color: #0077aa
        }

        /* Name.Variable.Instance */
        c-[il] {
            color: #000000
        }

        /* Literal.Number.Integer.Long */
    </style>
    <style>
        /* style-var-click-highlighting */

        var {
            cursor: pointer;
        }

        var.selected0 {
            background-color: #F4D200;
            box-shadow: 0 0 0 2px #F4D200;
        }

        var.selected1 {
            background-color: #FF87A2;
            box-shadow: 0 0 0 2px #FF87A2;
        }

        var.selected2 {
            background-color: #96E885;
            box-shadow: 0 0 0 2px #96E885;
        }

        var.selected3 {
            background-color: #3EEED2;
            box-shadow: 0 0 0 2px #3EEED2;
        }

        var.selected4 {
            background-color: #EACFB6;
            box-shadow: 0 0 0 2px #EACFB6;
        }

        var.selected5 {
            background-color: #82DDFF;
            box-shadow: 0 0 0 2px #82DDFF;
        }

        var.selected6 {
            background-color: #FFBCF2;
            box-shadow: 0 0 0 2px #FFBCF2;
        }
    </style>
    <style>
        /* style-darkmode */

        @media (prefers-color-scheme: dark) {
            :root {
                --text: #ddd;
                --bg: black;

                --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

                --logo-bg: #1a5e9a;
                --logo-active-bg: #c00;
                --logo-text: white;

                --tocnav-normal-text: #999;
                --tocnav-normal-bg: var(--bg);
                --tocnav-hover-text: var(--tocnav-normal-text);
                --tocnav-hover-bg: #080808;
                --tocnav-active-text: #f44;
                --tocnav-active-bg: var(--tocnav-normal-bg);

                --tocsidebar-text: var(--text);
                --tocsidebar-bg: #080808;
                --tocsidebar-shadow: rgba(255, 255, 255, .1);
                --tocsidebar-heading-text: hsla(203, 20%, 40%, .7);

                --toclink-text: var(--text);
                --toclink-underline: #6af;
                --toclink-visited-text: var(--toclink-text);
                --toclink-visited-underline: #054572;

                --heading-text: #8af;

                --hr-text: var(--text);

                --algo-border: #456;

                --del-text: #f44;
                --del-bg: transparent;
                --ins-text: #4a4;
                --ins-bg: transparent;

                --a-normal-text: #6af;
                --a-normal-underline: #555;
                --a-visited-text: var(--a-normal-text);
                --a-visited-underline: var(--a-normal-underline);
                --a-hover-bg: rgba(25%, 25%, 25%, .2);
                --a-active-text: #f44;
                --a-active-underline: var(--a-active-text);

                --borderedblock-bg: rgba(255, 255, 255, .05);

                --blockquote-border: silver;
                --blockquote-bg: var(--borderedblock-bg);
                --blockquote-text: currentcolor;

                --issue-border: #e05252;
                --issue-bg: var(--borderedblock-bg);
                --issue-text: var(--text);
                --issueheading-text: hsl(0deg, 70%, 70%);

                --example-border: hsl(50deg, 90%, 60%);
                --example-bg: var(--borderedblock-bg);
                --example-text: var(--text);
                --exampleheading-text: hsl(50deg, 70%, 70%);

                --note-border: hsl(120deg, 100%, 35%);
                --note-bg: var(--borderedblock-bg);
                --note-text: var(--text);
                --noteheading-text: hsl(120, 70%, 70%);
                --notesummary-underline: silver;

                --assertion-border: #444;
                --assertion-bg: var(--borderedblock-bg);
                --assertion-text: var(--text);

                --advisement-border: orange;
                --advisement-bg: #222218;
                --advisement-text: var(--text);
                --advisementheading-text: #f84;

                --warning-border: red;
                --warning-bg: hsla(40, 100%, 20%, 0.95);
                --warning-text: var(--text);

                --amendment-border: #330099;
                --amendment-bg: #080010;
                --amendment-text: var(--text);
                --amendmentheading-text: #cc00ff;

                --def-border: #8ccbf2;
                --def-bg: #080818;
                --def-text: var(--text);
                --defrow-border: #136;

                --datacell-border: silver;

                --indexinfo-text: #aaa;

                --indextable-hover-text: var(--text);
                --indextable-hover-bg: #181818;

                --outdatedspec-bg: rgba(255, 255, 255, .5);
                --outdatedspec-text: black;
                --outdated-bg: maroon;
                --outdated-text: white;
                --outdated-shadow: red;

                --editedrec-bg: darkorange;
            }

            /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
            img {
                background: white;
            }
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --selflink-text: black;
                --selflink-bg: silver;
                --selflink-hover-text: white;
            }
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --dfnpanel-bg: #222;
                --dfnpanel-text: var(--text);
            }
        }

        @media (prefers-color-scheme: dark) {
            .highlight:not(.idl) {
                background: rgba(255, 255, 255, .05);
            }

            c-[a] {
                color: #d33682
            }

            /* Keyword.Declaration */
            c-[b] {
                color: #d33682
            }

            /* Keyword.Type */
            c-[c] {
                color: #2aa198
            }

            /* Comment */
            c-[d] {
                color: #2aa198
            }

            /* Comment.Multiline */
            c-[e] {
                color: #268bd2
            }

            /* Name.Attribute */
            c-[f] {
                color: #b58900
            }

            /* Name.Tag */
            c-[g] {
                color: #cb4b16
            }

            /* Name.Variable */
            c-[k] {
                color: #d33682
            }

            /* Keyword */
            c-[l] {
                color: #657b83
            }

            /* Literal */
            c-[m] {
                color: #657b83
            }

            /* Literal.Number */
            c-[n] {
                color: #268bd2
            }

            /* Name */
            c-[o] {
                color: #657b83
            }

            /* Operator */
            c-[p] {
                color: #657b83
            }

            /* Punctuation */
            c-[s] {
                color: #6c71c4
            }

            /* Literal.String */
            c-[t] {
                color: #6c71c4
            }

            /* Literal.String.Single */
            c-[u] {
                color: #6c71c4
            }

            /* Literal.String.Double */
            c-[ch] {
                color: #2aa198
            }

            /* Comment.Hashbang */
            c-[cp] {
                color: #2aa198
            }

            /* Comment.Preproc */
            c-[cpf] {
                color: #2aa198
            }

            /* Comment.PreprocFile */
            c-[c1] {
                color: #2aa198
            }

            /* Comment.Single */
            c-[cs] {
                color: #2aa198
            }

            /* Comment.Special */
            c-[kc] {
                color: #d33682
            }

            /* Keyword.Constant */
            c-[kn] {
                color: #d33682
            }

            /* Keyword.Namespace */
            c-[kp] {
                color: #d33682
            }

            /* Keyword.Pseudo */
            c-[kr] {
                color: #d33682
            }

            /* Keyword.Reserved */
            c-[ld] {
                color: #657b83
            }

            /* Literal.Date */
            c-[nc] {
                color: #268bd2
            }

            /* Name.Class */
            c-[no] {
                color: #268bd2
            }

            /* Name.Constant */
            c-[nd] {
                color: #268bd2
            }

            /* Name.Decorator */
            c-[ni] {
                color: #268bd2
            }

            /* Name.Entity */
            c-[ne] {
                color: #268bd2
            }

            /* Name.Exception */
            c-[nf] {
                color: #268bd2
            }

            /* Name.Function */
            c-[nl] {
                color: #268bd2
            }

            /* Name.Label */
            c-[nn] {
                color: #268bd2
            }

            /* Name.Namespace */
            c-[py] {
                color: #268bd2
            }

            /* Name.Property */
            c-[ow] {
                color: #657b83
            }

            /* Operator.Word */
            c-[mb] {
                color: #657b83
            }

            /* Literal.Number.Bin */
            c-[mf] {
                color: #657b83
            }

            /* Literal.Number.Float */
            c-[mh] {
                color: #657b83
            }

            /* Literal.Number.Hex */
            c-[mi] {
                color: #657b83
            }

            /* Literal.Number.Integer */
            c-[mo] {
                color: #657b83
            }

            /* Literal.Number.Oct */
            c-[sa] {
                color: #6c71c4
            }

            /* Literal.String.Affix */
            c-[sb] {
                color: #6c71c4
            }

            /* Literal.String.Backtick */
            c-[sc] {
                color: #6c71c4
            }

            /* Literal.String.Char */
            c-[dl] {
                color: #6c71c4
            }

            /* Literal.String.Delimiter */
            c-[sd] {
                color: #6c71c4
            }

            /* Literal.String.Doc */
            c-[se] {
                color: #6c71c4
            }

            /* Literal.String.Escape */
            c-[sh] {
                color: #6c71c4
            }

            /* Literal.String.Heredoc */
            c-[si] {
                color: #6c71c4
            }

            /* Literal.String.Interpol */
            c-[sx] {
                color: #6c71c4
            }

            /* Literal.String.Other */
            c-[sr] {
                color: #6c71c4
            }

            /* Literal.String.Regex */
            c-[ss] {
                color: #6c71c4
            }

            /* Literal.String.Symbol */
            c-[fm] {
                color: #268bd2
            }

            /* Name.Function.Magic */
            c-[vc] {
                color: #cb4b16
            }

            /* Name.Variable.Class */
            c-[vg] {
                color: #cb4b16
            }

            /* Name.Variable.Global */
            c-[vi] {
                color: #cb4b16
            }

            /* Name.Variable.Instance */
            c-[vm] {
                color: #cb4b16
            }

            /* Name.Variable.Magic */
            c-[il] {
                color: #657b83
            }

            /* Literal.Number.Integer.Long */
        }
    </style>

<body class="h-entry">
    <div class="head">
        <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48"
                    src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" width="72"> </a> </p>
        <h1 class="p-name no-ref" id="title">Web 周期性后台同步</h1>
        <h2 class="no-num no-toc no-ref heading settled" id="subtitle"><span class="content">社区组草案报告， <time
                    class="dt-updated" datetime="2021-04-12">2021年4月12日</time></span></h2>
        <div data-fill-with="spec-metadata">
            <dl>
                <dt>此版本：
                <dd><a class="u-url"
                        href="https://wicg.github.io/periodic-background-sync/index.html">https://wicg.github.io/periodic-background-sync/index.html</a>
                <dt>问题跟踪：
                <dd><a href="https://github.com/WICG/periodic-background-sync/issues/">GitHub</a>
                <dt class="editor">编辑：
                <dd class="editor p-author h-card vcard"><a class="p-name fn u-email email"
                        href="mailto:nator@chromium.org">Mugdha Lakhani</a> (<span class="p-org org">Google</span>)
                <dd class="editor p-author h-card vcard"><a class="p-name fn u-email email"
                        href="mailto:jakearchibald@chromium.org">Jake Archibald</a> (<span
                        class="p-org org">Google</span>)
            </dl>
        </div>
        <div data-fill-with="warning"></div>
        <p class="copyright" data-fill-with="copyright"><a
                href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 2021 the Contributors to
            the Web Periodic Background Synchronization Specification, published by the <a
                href="https://www.w3.org/community/wicg/">Web Platform Incubator Community Group</a> under the <a
                href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement
                (CLA)</a>.
            A human-readable <a href="http://www.w3.org/community/about/agreements/cla-deed/">summary</a> is available.
        </p>
        <hr title="Separator for header">
    </div>
    <div class="p-summary" data-fill-with="abstract">
        <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">摘要</span></h2>
        <p>本规范描述了一种方法，允许 Web 应用在后台定期同步数据和内容。</p>
    </div>
    <div data-fill-with="at-risk"></div>
    <h2 class="no-num no-toc no-ref heading settled" id="status"><span class="content">本文档状态</span>
    </h2>
    <div data-fill-with="status">
        <p> 本规范由 <a href="https://www.w3.org/community/wicg/">Web 平台孵化器社区组</a> 发布。
            它不是 W3C 标准，也不在 W3C 标准化轨道上。

            请注意，根据 <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community
                Contributor License Agreement (CLA)</a>，存在有限的选择退出权并适用其他条件。

            了解有关 <a href="http://www.w3.org/community/">W3C Community and Business Groups</a> 的更多信息。 </p>
        <p></p>
    </div>
    <div data-fill-with="at-risk"></div>
    <nav data-fill-with="table-of-contents" id="toc">
        <h2 class="no-num no-toc no-ref" id="contents">目录</h2>
        <ol class="toc" role="directory">
            <li>
                <a href="#intro"><span class="secno">1</span> <span class="content">介绍</span></a>
                <ol class="toc">
                    <li><a href="#example"><span class="secno">1.1</span> <span class="content">示例</span></a>
                </ol>
            <li><a href="#concepts"><span class="secno">2</span> <span class="content">概念</span></a>
            <li><a href="#extensions-to-service-worker-registration"><span class="secno">3</span> <span
                        class="content">对 service worker 注册的扩展</span></a>
            <li>
                <a href="#constructs"><span class="secno">4</span> <span class="content">构造</span></a>
                <ol class="toc">
                    <li><a href="#periodic-sync-registration-construct"><span class="secno">4.1</span> <span
                                class="content">周期性同步注册</span></a>
                    <li><a href="#periodic-sync-scheduler-construct"><span class="secno">4.2</span> <span
                                class="content"><span>周期性同步调度器</span></span></a>
                    <li><a href="#constants"><span class="secno">4.3</span> <span class="content">常量</span></a>
                </ol>
            <li>
                <a href="#privacy"><span class="secno">5</span> <span class="content">隐私考虑</span></a>
                <ol class="toc">
                    <li><a href="#permission"><span class="secno">5.1</span> <span class="content">权限</span></a>
                    <li><a href="#location-tracking"><span class="secno">5.2</span> <span
                                class="content">位置跟踪</span></a>
                    <li><a href="#history-leaking"><span class="secno">5.3</span> <span class="content">历史泄露</span></a>
                </ol>
            <li><a href="#resources"><span class="secno">6</span> <span class="content">资源使用</span></a>
            <li>
                <a href="#algorithms"><span class="secno">7</span> <span class="content">算法</span></a>
                <ol class="toc">
                    <li><a href="#process-periodic-sync-registrations-algorithm"><span class="secno">7.1</span> <span
                                class="content"><span>处理周期性同步注册</span></span></a>
                    <li><a href="#responding-to-permission-revocation-algorithm"><span class="secno">7.2</span> <span
                                class="content"><span>响应权限撤销</span></span></a>
                </ol>
            <li>
                <a href="#api-description"><span class="secno">8</span> <span class="content">API 描述</span></a>
                <ol class="toc">
                    <li><a href="#extensions-to-serviceworkerglobalscope"><span class="secno">8.1</span> <span
                                class="content">对 <code class="idl"><span>ServiceWorkerGlobalScope</span></code>
                                接口的扩展</span></a>
                    <li><a href="#extensions-to-serviceworkerregistration"><span class="secno">8.2</span> <span
                                class="content">对 <code class="idl"><span>ServiceWorkerRegistration</span></code>
                                接口的扩展</span></a>
                    <li><a href="#periodicsyncmanager-interface"><span class="secno">8.3</span> <span
                                class="content"><code class="idl"><span>PeriodicSyncManager</span></code>
                                接口</span></a>
                    <li>
                        <a href="#periodicsync-event-interface"><span class="secno">8.4</span> <span class="content">The
                                <span>periodicsync 事件</span></span></a>
                        <ol class="toc">
                            <li><a href="#firing-a-periodicsync-event"><span class="secno">8.4.1</span> <span
                                        class="content"><span>触发 periodicsync 事件</span></span></a>
                        </ol>
                </ol>
            <li>
                <a href="#w3c-conformance"><span class="secno"></span> <span class="content">一致性</span></a>
                <ol class="toc">
                    <li><a href="#w3c-conventions"><span class="secno"></span> <span class="content">文档约定</span></a>
                    <li><a href="#w3c-conformant-algorithms"><span class="secno"></span> <span
                                class="content">一致性算法</span></a>
                </ol>
            <li>
                <a href="#index"><span class="secno"></span> <span class="content">索引</span></a>
                <ol class="toc">
                    <li><a href="#index-defined-here"><span class="secno"></span> <span
                                class="content">本规范定义的术语</span></a>
                    <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span
                                class="content">引用中定义的术语</span></a>
                </ol>
            <li>
                <a href="#references"><span class="secno"></span> <span class="content">参考文献</span></a>
                <ol class="toc">
                    <li><a href="#normative"><span class="secno"></span> <span class="content">规范性引用</span></a>
                </ol>
            <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL 索引</span></a>
        </ol>
    </nav>
    <main>
        <h2 class="heading settled" data-level="1" id="intro"><span class="secno">1. </span><span
                class="content">介绍</span><a class="self-link" href="#intro"></a></h2>
        <p><em>本节为非规范性内容。</em></p>
        <p>Web 应用经常在网络不可靠（例如移动电话）且生命周期未知（浏览器可能被终止或用户可能导航离开）的环境中运行。
            这使得 Web 应用难以将其内容和状态与服务器保持同步。</p>
        <p>此 API 的目的是缩短内容创建与服务器与 Web 应用之间内容同步的时间。它通过允许 Web 应用注册一个定期同步状态和数据的意图，并指定希望的最小间隔来实现。通过 service worker
            事件，用户代理随后定期允许 Web 应用下载网络资源并更新状态。</p>
        <p>由于此 API 依赖于 service workers，因此此 API 提供的功能仅在<a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/webappapis.html#secure-context"
                id="ref-for-secure-context">安全上下文</a>中可用。</p>
        <h3 class="heading settled" data-level="1.1" id="example"><span class="secno">1.1. </span><span
                class="content">示例</span><a class="self-link" href="#example"></a></h3>
        从<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#concept-document-bc"
            id="ref-for-concept-document-bc">浏览上下文</a>注册最小间隔为一天的定期后台同步：
        <pre class="lang-js highlight"><c- k>async</c-> <c- a>function</c-> registerPeriodicNewsCheck<c- p>()</c-> <c- p>{</c->
  <c- a>const</c-> registration <c- o>=</c-> <c- k>await</c-> navigator<c- p>.</c->serviceWorker<c- p>.</c->ready<c- p>;</c->
  <c- k>try</c-> <c- p>{</c->
    <c- k>await</c-> registration<c- p>.</c->periodicSync<c- p>.</c->register<c- p>(</c-><c- t>'fetch-news'</c-><c- p>,</c-> <c- p>{</c->
      minInterval<c- o>:</c-> <c- mf>24</c-> <c- o>*</c-> <c- mf>60</c-> <c- o>*</c-> <c- mf>60</c-> <c- o>*</c-> <c- mf>1000</c-><c- p>,</c->
    <c- p>});</c->
  <c- p>}</c-> <c- k>catch</c-> <c- p>{</c->
    console<c- p>.</c->log<c- p>(</c-><c- t>'Periodic Sync could not be registered!'</c-><c- p>);</c->
  <c- p>}</c->
<c- p>}</c->
</pre>
        <p>在 <a data-link-type="dfn" href="#periodicsync-event" id="ref-for-periodicsync-event">periodicsync 事件</a> 在 <a
                data-link-type="dfn" href="https://w3c.github.io/ServiceWorker/#dfn-service-worker"
                id="ref-for-dfn-service-worker">service worker</a> 中触发时的响应示例：</p>
        <pre class="lang-js highlight">self<c- p>.</c->addEventListener<c- p>(</c-><c- t>'periodicsync'</c-><c- p>,</c-> event <c- p>=></c-> <c- p>{</c->
  event<c- p>.</c->waitUntil<c- p>(</c->fetchAndCacheLatestNews<c- p>());</c->
<c- p>});</c->
</pre>
        <p>在上面的示例中 <code>fetchAndCacheLatestNews</code> 是一个开发者定义的函数是一个
            开发者定义的函数，它从服务器获取最新的新闻文章并将它们本地存储，例如使用 <code
                class="idl"><a data-link-type="idl" href="https://w3c.github.io/ServiceWorker/#cache" id="ref-for-cache">Cache</a></code>
            API，以便离线使用。</p>
        <h2 class="heading settled" data-level="2" id="concepts"><span class="secno">2. </span><span
                class="content">概念</span><a class="self-link" href="#concepts"></a></h2>
        <p>当为 <a data-link-type="dfn" href="#periodicsync-event" id="ref-for-periodicsync-event①">periodicsync 事件</a>
            对某个 <a data-link-type="dfn" href="#periodic-sync-registration"
                id="ref-for-periodic-sync-registration">周期性同步注册</a> <var>registration</var> 触发时，如果不存在其关联的 <a
                data-link-type="dfn" href="https://w3c.github.io/ServiceWorker/#dfn-service-worker-client"
                id="ref-for-dfn-service-worker-client">service worker 客户端</a>，且这些客户端的 <a data-link-type="dfn"
                href="https://w3c.github.io/ServiceWorker/#dfn-service-worker-client-frame-type"
                id="ref-for-dfn-service-worker-client-frame-type">frame type</a> 为 "<code>top-level</code>",
            "<code>auxiliary</code>" 或 "<code>nested</code>"，则该事件被视为在 <dfn class="dfn-paneled"
                data-dfn-for="periodicsync event" data-dfn-type="dfn" data-noexport
                id="periodicsync-event-in-the-background">后台运行</dfn>，这些客户端是针对与 <var>registration</var> 关联的 <a
                data-link-type="dfn" href="https://w3c.github.io/ServiceWorker/#service-worker-client-origin"
                id="ref-for-service-worker-client-origin">origin</a> 的 <a data-link-type="dfn"
                href="#periodic-sync-registration-service-worker-registration"
                id="ref-for-periodic-sync-registration-service-worker-registration">service worker registration</a>
            存在的情况除外。</p>
        <h2 class="heading settled" data-level="3" id="extensions-to-service-worker-registration"><span class="secno">3.
            </span><span class="content">对 service worker 注册的扩展</span><a class="self-link"
                href="#extensions-to-service-worker-registration"></a></h2>
        A <a data-link-type="dfn" href="https://w3c.github.io/ServiceWorker/#dfn-service-worker-registration"
            id="ref-for-dfn-service-worker-registration">service worker registration</a> additionally has:
        <ul>
            <li data-md>
                <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                        id="active-periodic-sync-registrations">活动的周期性同步注册</dfn>（一个 <a data-link-type="dfn"
                        href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map">映射</a>），其中每个键是一个
                    <code
                        class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-DOMString" id="ref-for-idl-DOMString">DOMString</a></code>，
                    每个项是一个 <a data-link-type="dfn" href="#periodic-sync-registration"
                        id="ref-for-periodic-sync-registration①">周期性同步注册</a>。
                </p>
            <li data-md>
                <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                        id="periodic-sync-processing-queue">周期性同步处理队列</dfn>，最初是 <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/infrastructure.html#starting-a-new-parallel-queue"
                        id="ref-for-starting-a-new-parallel-queue">启动一个新的并行队列</a> 的结果。</p>
        </ul>
        <h2 class="heading settled" data-level="4" id="constructs"><span class="secno">4. </span><span
                class="content">构造</span><a class="self-link" href="#constructs"></a></h2>
        <h3 class="heading settled" data-level="4.1" id="periodic-sync-registration-construct"><span class="secno">4.1.
            </span><span class="content">周期性同步注册</span><a class="self-link"
                href="#periodic-sync-registration-construct"></a></h3>
        A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="periodic-sync-registration">周期性同步注册</dfn>
        consists of:
        <div>
            A <dfn class="dfn-paneled" data-dfn-for="periodic sync registration" data-dfn-type="dfn" data-noexport
                id="periodic-sync-registration-service-worker-registration">service worker registration</dfn>, which is
            a <a data-link-type="dfn" href="https://w3c.github.io/ServiceWorker/#dfn-service-worker-registration"
                id="ref-for-dfn-service-worker-registration①">service worker registration</a>.
            <p>A <dfn class="dfn-paneled" data-dfn-for="periodic sync registration" data-dfn-type="dfn" data-noexport
                    id="periodic-sync-registration-tag">标签</dfn>, which is a <code
                    class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-DOMString" id="ref-for-idl-DOMString①">DOMString</a></code>.
            </p>
            <p class="note" role="note"><span>注：</span>周期性后台同步（Periodic Background Sync）不与后台同步（Background
                Sync）共享命名空间，因此同一 <a data-link-type="dfn"
                    href="https://w3c.github.io/ServiceWorker/#service-worker-client-origin"
                    id="ref-for-service-worker-client-origin①">origin</a> 可以同时拥有两种类型且使用相同标签的注册。</p>
            <p><dfn class="dfn-paneled" data-dfn-for="periodic sync registration" data-dfn-type="dfn" data-noexport
                    id="periodic-sync-registration-minimum-interval">最小间隔</dfn>（一个 long
                long），用于指定周期性同步应发生的最小间隔（以毫秒为单位）。<a data-link-type="dfn"
                    href="#periodic-sync-registration-minimum-interval"
                    id="ref-for-periodic-sync-registration-minimum-interval">最小间隔</a> 是对用户代理的建议。</p>
            <p class="note" role="note"><span>注：</span><a data-link-type="dfn" href="#periodicsync-event"
                    id="ref-for-periodicsync-event②">periodicsync 事件</a> 实际触发的间隔必须大于或等于此值。</p>
            <p>An <dfn class="dfn-paneled" data-dfn-for="periodic sync registration" data-dfn-type="dfn" data-noexport
                    id="periodic-sync-registration-anchor-time">锚点时间</dfn>（一个时间戳），表示此<a data-link-type="dfn"
                    href="#periodicsync-event" id="ref-for-periodicsync-event③">periodicsync 事件</a> 上一次为该 <a
                    data-link-type="dfn" href="#periodic-sync-registration"
                    id="ref-for-periodic-sync-registration②">周期性同步注册</a> 触发的时间，或初始注册的时间。</p>
            <p>A <dfn class="dfn-paneled" data-dfn-for="periodic sync registration" data-dfn-type="dfn" data-noexport
                    id="periodic-sync-registration-state">状态</dfn>，其值为
                "<code>pending</code>"、"<code>firing</code>"、"<code>suspended</code>" 或
                "<code>reregistered-while-firing</code>" 之一。初始值为 "<code>pending</code>"。</p>
        </div>
        <h3 class="heading settled" data-level="4.2" id="periodic-sync-scheduler-construct"><span class="secno">4.2.
            </span><span class="content"><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                    id="periodic-sync-scheduler">周期性同步调度器</dfn></span><a class="self-link"
                href="#periodic-sync-scheduler-construct"></a></h3>
        The <a data-link-type="dfn" href="#periodic-sync-scheduler" id="ref-for-periodic-sync-scheduler">周期性同步调度器</a>
        负责调度<a data-link-type="dfn" href="#periodicsync-event" id="ref-for-periodicsync-event④">periodicsync 事件</a> 的触发。
        响应这些触发器，调度器要么安排延迟处理以在将来的适当时间触发<a data-link-type="dfn" href="#periodicsync-event"
            id="ref-for-periodicsync-event⑤">periodicsync 事件</a>，要么取消此类调度。
        <div>
            调度器维护：
            <ul>
                <li data-md>
                    <p>The <dfn class="dfn-paneled" data-dfn-for="periodic sync scheduler" data-dfn-type="dfn"
                            data-noexport id="periodic-sync-scheduler-time-of-last-fire">上次触发时间</dfn>，一个 <a
                            data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map"
                            id="ref-for-ordered-map①">映射</a>，其中每个键是一个 <a data-link-type="dfn"
                            href="https://w3c.github.io/ServiceWorker/#service-worker-client-origin"
                            id="ref-for-service-worker-client-origin②">origin</a>，每个项是一个时间戳。该映射的键是与<a
                            data-link-type="dfn" href="#periodic-sync-registration-service-worker-registration"
                            id="ref-for-periodic-sync-registration-service-worker-registration①">service worker 注册</a>
                        相关联的 <a data-link-type="dfn" href="#active-periodic-sync-registrations"
                            id="ref-for-active-periodic-sync-registrations">活动周期性同步注册</a> 的 <a data-link-type="dfn"
                            href="https://w3c.github.io/ServiceWorker/#service-worker-client-origin"
                            id="ref-for-service-worker-client-origin③">origins</a>。该映射最初为空的 <a data-link-type="dfn"
                            href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map②">映射</a>。</p>
            </ul>
        </div>
        <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="effective-minimum-sync-interval-for-origin">针对 origin 的有效最小同步间隔</dfn>
            <var>origin</var>（一个 <a data-link-type="dfn"
                href="https://w3c.github.io/ServiceWorker/#service-worker-client-origin"
                id="ref-for-service-worker-client-origin④">origin</a>），是 <a data-link-type="dfn"
                href="#minimum-periodic-sync-interval-for-any-origin"
                id="ref-for-minimum-periodic-sync-interval-for-any-origin">针对任何 origin 的最小周期性同步间隔</a> 加上用户代理为该
            <var>origin</var> 定义的某个值。
        </p>
        <p class="note" role="note"><span>注：</span>用户代理定义的该值可能基于用户与该 origin 的互动程度。每次调用 <a data-link-type="dfn"
                href="#effective-minimum-sync-interval-for-origin"
                id="ref-for-effective-minimum-sync-interval-for-origin">针对 origin 的有效最小同步间隔</a> 时，这个值可以不同。</p>
        <p>调度器会 <a data-link-type="dfn" href="#process-periodic-sync-registrations"
                id="ref-for-process-periodic-sync-registrations">处理周期性同步注册</a>。</p>
        <p class="note" role="note"><span>注：</span>当没有 <a data-link-type="dfn"
                href="#active-periodic-sync-registrations"
                id="ref-for-active-periodic-sync-registrations①">活动的周期性同步注册</a> 时，浏览器可能会暂停此处理循环以节省资源。</p>
        <h3 class="heading settled" data-level="4.3" id="constants"><span class="secno">4.3. </span><span
                class="content">常量</span><a class="self-link" href="#constants"></a></h3>
        As recommended in <a href="#privacy">§ 5 Privacy Considerations</a> and <a href="#resources">§ 6 Resource
            Usage</a>, the user agent SHOULD also define:
        <ul>
            <li data-md>
                <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                        id="minimum-periodic-sync-interval-for-any-origin">针对任何 origin 的最小周期性同步间隔</dfn>，一个 long
                    long，表示任一给定 origin 的 <a data-link-type="dfn" href="#periodicsync-event"
                        id="ref-for-periodicsync-event⑥">periodicsync 事件</a> 之间的最小间隔，且，</p>
            <li data-md>
                <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                        id="minimum-periodic-sync-interval-across-origins">跨 origin 的最小周期性同步间隔</dfn>，一个 long long，表示所有
                    origin 之间 <a data-link-type="dfn" href="#periodicsync-event"
                        id="ref-for-periodicsync-event⑦">periodicsync 事件</a> 之间的最小间隔。</p>
        </ul>
        <p><a data-link-type="dfn" href="#minimum-periodic-sync-interval-across-origins"
                id="ref-for-minimum-periodic-sync-interval-across-origins">跨 origin 的最小周期性同步间隔</a> 必须大于或等于 <a
                data-link-type="dfn" href="#minimum-periodic-sync-interval-for-any-origin"
                id="ref-for-minimum-periodic-sync-interval-for-any-origin①">针对任何 origin 的最小周期性同步间隔</a>。
            如果未定义，这些值被设置为 43200000（以毫秒计，即十二小时）。</p>
        <p class="note" role="note"><span>注：</span>需要两种频率上限，因为对每个 origin 遵守 <a data-link-type="dfn"
                href="#minimum-periodic-sync-interval-for-any-origin"
                id="ref-for-minimum-periodic-sync-interval-for-any-origin②">针对任何 origin 的最小周期性同步间隔</a>
            的限制，仍可能导致浏览器非常频繁地触发 <a data-link-type="dfn" href="#periodicsync-event"
                id="ref-for-periodicsync-event⑧">periodicsync 事件</a>。例如，当存在许多针对不同 origin 的 <a data-link-type="dfn"
                href="#periodic-sync-registration" id="ref-for-periodic-sync-registration③">周期性同步注册</a> 时，就可能发生这种情况。<a
                data-link-type="dfn" href="#minimum-periodic-sync-interval-across-origins"
                id="ref-for-minimum-periodic-sync-interval-across-origins①">跨 origin 的最小周期性同步间隔</a> 确保了触发这些事件的全局上限。</p>
        <p>用户代理可以定义一个 <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="maximum-number-of-retries">最大重试次数</dfn>，一个数字，允许用于每个 <a data-link-type="dfn"
                href="#periodicsync-event" id="ref-for-periodicsync-event⑨">periodicsync 事件</a>。
            在选择此值时，用户代理应确保尝试 <a data-link-type="dfn" href="#maximum-number-of-retries"
                id="ref-for-maximum-number-of-retries">最大重试次数</a> 所需的时间数量级小于 <a data-link-type="dfn"
                href="#minimum-periodic-sync-interval-for-any-origin"
                id="ref-for-minimum-periodic-sync-interval-for-any-origin③">针对任何 origin 的最小周期性同步间隔</a>。如果未定义，则该值为零。</p>
        <h2 class="heading settled" data-level="5" id="privacy"><span class="secno">5. </span><span
                class="content">隐私考虑</span><a class="self-link" href="#privacy"></a></h2>
        <h3 class="heading settled" data-level="5.1" id="permission"><span class="secno">5.1. </span><span
                class="content">权限</span><a class="self-link" href="#permission"></a></h3>
        Periodic Background Sync 仅在为具有 <code
            class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#enumdef-permissionstate" id="ref-for-enumdef-permissionstate">PermissionState</a></code>
        的 <code
            class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dictdef-permissiondescriptor" id="ref-for-dictdef-permissiondescriptor">PermissionDescriptor</a></code>
        且其 <code
            class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissiondescriptor-name" id="ref-for-dom-permissiondescriptor-name">name</a></code>
        为 <code>"periodic-background-sync"</code> 的权限状态为 <code
            class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted">granted</a></code>
        时可用。
        此外，用户代理应当为用户提供禁用 Periodic Background Sync 的方式。
        当 Periodic Background Sync 被禁用时，<a data-link-type="dfn" href="#periodicsync-event"
            id="ref-for-periodicsync-event①⓪">periodicsync 事件</a>不得向受此权限影响的 <a data-link-type="dfn"
            href="#periodic-sync-registration" id="ref-for-periodic-sync-registration④">周期性同步注册</a> 派发。（参见 <a
            href="#responding-to-permission-revocation-algorithm">§ 7.2 响应权限撤销</a>。）
        <h3 class="heading settled" data-level="5.2" id="location-tracking"><span class="secno">5.2. </span><span
                class="content">位置追踪</span><a class="self-link" href="#location-tracking"></a></h3>
        在 <a data-link-type="dfn" href="#periodicsync-event" id="ref-for-periodicsync-event①①">periodicsync event</a>
        内发起的 fetch 请求在 <a data-link-type="dfn" href="#periodicsync-event-in-the-background"
            id="ref-for-periodicsync-event-in-the-background">后台运行</a> 时，
        可能在用户离开页面后向服务器暴露客户端的 IP 地址。用户代理应当通过限制重试次数和 <a data-link-type="dfn" href="#periodicsync-event"
            id="ref-for-periodicsync-event①②">periodicsync 事件</a> 的持续时长来减少网站能够追踪用户位置的时间。此外，用户代理还应当通过限制对一个 <a
            data-link-type="dfn" href="https://w3c.github.io/ServiceWorker/#service-worker-client-origin"
            id="ref-for-service-worker-client-origin⑤">origin</a> 以及跨 <a data-link-type="dfn"
            href="https://w3c.github.io/ServiceWorker/#service-worker-client-origin"
            id="ref-for-service-worker-client-origin⑥">origins</a> 的 <a data-link-type="dfn" href="#periodicsync-event"
            id="ref-for-periodicsync-event①③">periodicsync 事件</a> 的频率，来限制持久的位置信息追踪。
        <h3 class="heading settled" data-level="5.3" id="history-leaking"><span class="secno">5.3. </span><span
                class="content">历史泄露</span><a class="self-link" href="#history-leaking"></a></h3>
        在 <a data-link-type="dfn" href="#periodicsync-event" id="ref-for-periodicsync-event①④">periodicsync 事件</a> 内发起的
        fetch 请求在 <a data-link-type="dfn" href="#periodicsync-event-in-the-background"
            id="ref-for-periodicsync-event-in-the-background①">后台运行</a> 时，
        可能会向与创建该 <a data-link-type="dfn" href="#periodic-sync-registration"
            id="ref-for-periodic-sync-registration⑤">周期性同步注册</a> 所用网络不同的网络中的中间设备泄露关于客户端导航历史的信息。
        例如，客户端可能访问了 https://example.com，该站点注册了一个 <a data-link-type="dfn" href="#periodicsync-event"
            id="ref-for-periodicsync-event①⑤">periodicsync 事件</a>，但根据实现，该事件可能在用户已离开页面并切换网络后才触发。新网络上的中间设备可能会看到 <a
            data-link-type="dfn" href="#periodicsync-event" id="ref-for-periodicsync-event①⑥">periodicsync 事件</a> 发起的
        fetch 请求。由于这些 fetch 请求是使用 HTTPS 发起的，请求内容不会被泄露，但请求的目的地和域名可能会被泄露（通过 DNS 查询和请求的 IP 地址）。为防止这种浏览历史泄露，用户代理可以选择仅在创建该 <a
            data-link-type="dfn" href="#periodic-sync-registration" id="ref-for-periodic-sync-registration⑥">周期性同步注册</a>
        时所用的网络上触发 <a data-link-type="dfn" href="#periodicsync-event" id="ref-for-periodicsync-event①⑦">periodicsync
            事件</a>，但这将以降低可用性为代价，因为无法机会性地进行同步。
        <h2 class="heading settled" data-level="6" id="resources"><span class="secno">6. </span><span
                class="content">资源使用</span><a class="self-link" href="#resources"></a></h2>
        <p><em>本节为非规范性内容。</em></p>
        <p>网站在处理 <a data-link-type="dfn" href="#periodicsync-event" id="ref-for-periodicsync-event①⑧">periodicsync
                事件</a> 时，很可能会从网络下载资源。底层操作系统可能会启动用户代理来派发这些事件，并在预定义的时长内保持其活跃以允许处理事件。两者都会消耗电池。
            用户代理应当限制这些事件的持续时间和频率，以在用户已离开页面时控制网站的资源使用。</p>
        <p>对于大型资源，应当通过在 <a data-link-type="dfn" href="https://wicg.github.io/background-fetch/#background-fetch"
                id="ref-for-background-fetch">后台下载（background fetch）</a> 中注册来下载，使用 <code
                class="idl"><a data-link-type="idl" href="https://wicg.github.io/background-fetch/#backgroundfetchmanager" id="ref-for-backgroundfetchmanager">BackgroundFetchManager</a></code>
            接口。</p>
        <p>此外，用户代理应当考虑用户与该 <a data-link-type="dfn"
                href="https://w3c.github.io/ServiceWorker/#service-worker-client-origin"
                id="ref-for-service-worker-client-origin⑦">origin</a> 的参与度，以及任何用户指示临时减少数据消耗（例如数据节省模式），以调整 <a
                data-link-type="dfn" href="#periodicsync-event" id="ref-for-periodicsync-event①⑨">periodicsync 事件</a>
            的频率。</p>
        <h2 class="heading settled" data-level="7" id="algorithms"><span class="secno">7. </span><span
                class="content">算法</span><a class="self-link" href="#algorithms"></a></h2>
        <div class="algorithm" data-algorithm="Process periodic sync registrations">
            <h3 class="heading settled" data-level="7.1" id="process-periodic-sync-registrations-algorithm"><span
                    class="secno">7.1. </span><span class="content"><dfn class="dfn-paneled" data-dfn-type="dfn"
                        data-noexport id="process-periodic-sync-registrations">处理周期性同步注册</dfn></span><a
                    class="self-link" href="#process-periodic-sync-registrations-algorithm"></a></h3>
            当用户代理启动时，按 <a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel"
                id="ref-for-in-parallel">并行</a> 运行以下步骤：
            <ol>
                <li data-md>
                    <p>重复执行：</p>
                    <ol>
                        <li data-md>
                            <p>等待 <a data-link-type="dfn" href="#minimum-periodic-sync-interval-across-origins"
                                    id="ref-for-minimum-periodic-sync-interval-across-origins②">跨 origin 的最小周期性同步间隔</a>。
                            </p>
                        <li data-md>
                            <p>令 <var>firedPeriodicSync</var> 为 false。</p>
                        <li data-md>
                            <p>当 <var>firedPeriodicSync</var> 为 false 时：</p>
                            <ol>
                                <li data-md>
                                    <p>等待某个用户代理定义的时间段。</p>
                                    <p class="note" role="note"><span>注：</span>这可以用于将不同 <a data-link-type="dfn"
                                            href="#periodic-sync-registration"
                                            id="ref-for-periodic-sync-registration⑦">周期性同步注册</a> 的同步合并到一次设备唤醒中。</p>
                                <li data-md>
                                    <p>等待直到处于 <a data-link-type="dfn"
                                            href="https://wicg.github.io/background-sync/spec/#online"
                                            id="ref-for-online">在线</a> 状态。</p>
                                <li data-md>
                                    <p>对于每个不是 <a data-link-type="dfn"
                                            href="https://w3c.github.io/ServiceWorker/#dfn-service-worker-registration-unregistered"
                                            id="ref-for-dfn-service-worker-registration-unregistered">已注销</a> 的 <a
                                            data-link-type="dfn"
                                            href="https://w3c.github.io/ServiceWorker/#dfn-service-worker-registration"
                                            id="ref-for-dfn-service-worker-registration②">service worker
                                            registration</a> <var>registration</var>，
                                        将以下步骤 <a data-link-type="dfn"
                                            href="https://html.spec.whatwg.org/multipage/infrastructure.html#enqueue-the-following-steps"
                                            id="ref-for-enqueue-the-following-steps">入队</a> 到 <var>registration</var> 的
                                        <a data-link-type="dfn" href="#periodic-sync-processing-queue"
                                            id="ref-for-periodic-sync-processing-queue">周期性同步处理队列</a>：
                                    </p>
                                    <ol>
                                        <li data-md>
                                            <p>令 <var>origin</var> 为与 <var>periodicSyncRegistration</var> 的 <a
                                                    data-link-type="dfn"
                                                    href="#periodic-sync-registration-service-worker-registration"
                                                    id="ref-for-periodic-sync-registration-service-worker-registration②">service
                                                    worker registration</a> 相关联的 <a data-link-type="dfn"
                                                    href="https://w3c.github.io/ServiceWorker/#service-worker-client-origin"
                                                    id="ref-for-service-worker-client-origin⑧">origin</a>。</p>
                                        <li data-md>
                                            <p>如果 <a data-link-type="dfn"
                                                    href="#periodic-sync-scheduler-time-of-last-fire"
                                                    id="ref-for-periodic-sync-scheduler-time-of-last-fire">time of last
                                                    fire</a>[<var>origin</var>] + 针对该 <var>origin</var> 的 <a
                                                    data-link-type="dfn"
                                                    href="#effective-minimum-sync-interval-for-origin"
                                                    id="ref-for-effective-minimum-sync-interval-for-origin①">有效最小同步间隔</a>
                                                大于现在，则 <a data-link-type="dfn"
                                                    href="https://infra.spec.whatwg.org/#iteration-continue"
                                                    id="ref-for-iteration-continue">继续</a>。</p>
                                        <li data-md>
                                            <p>对于 <var>registration</var> 的 <a data-link-type="dfn"
                                                    href="#active-periodic-sync-registrations"
                                                    id="ref-for-active-periodic-sync-registrations②">活动周期性同步注册</a> 中的每个
                                                <a data-link-type="dfn" href="#periodic-sync-registration"
                                                    id="ref-for-periodic-sync-registration⑧">periodic sync
                                                    registration</a> <var>periodicSyncRegistration</var>：
                                            </p>
                                            <ol>
                                                <li data-md>
                                                    <p>如果 <var>periodicSyncRegistration</var> 的 <a data-link-type="dfn"
                                                            href="#periodic-sync-registration-state"
                                                            id="ref-for-periodic-sync-registration-state">state</a> 不是
                                                        "<code>pending</code>"，则 <a data-link-type="dfn"
                                                            href="https://infra.spec.whatwg.org/#iteration-continue"
                                                            id="ref-for-iteration-continue①">继续</a>。</p>
                                                <li data-md>
                                                    <p>如果 <var>periodicSyncRegistration</var> 的 <a data-link-type="dfn"
                                                            href="#periodic-sync-registration-anchor-time"
                                                            id="ref-for-periodic-sync-registration-anchor-time">anchor
                                                            time</a> + <var>periodicSyncRegistration</var> 的 <a
                                                            data-link-type="dfn"
                                                            href="#periodic-sync-registration-minimum-interval"
                                                            id="ref-for-periodic-sync-registration-minimum-interval①">minimum
                                                            interval</a> 大于现在，则 <a data-link-type="dfn"
                                                            href="https://infra.spec.whatwg.org/#iteration-continue"
                                                            id="ref-for-iteration-continue②">继续</a>。</p>
                                                <li data-md>
                                                    <p>将 <var>firedPeriodicSync</var> 设为 true。</p>
                                                <li data-md>
                                                    <p>为 <var>periodicSyncRegistration</var> <a data-link-type="dfn"
                                                            href="#fire-a-periodicsync-event"
                                                            id="ref-for-fire-a-periodicsync-event">触发 periodicsync
                                                            事件</a>。</p>
                                            </ol>
                                    </ol>
                            </ol>
                    </ol>
            </ol>
        </div>
        <div class="algorithm" data-algorithm="Respond to permission revocation">
            <h3 class="heading settled" data-level="7.2" id="responding-to-permission-revocation-algorithm"><span
                    class="secno">7.2. </span><span class="content"><dfn class="dfn-paneled" data-dfn-type="dfn"
                        data-noexport id="respond-to-permission-revocation">响应权限撤销</dfn></span><a class="self-link"
                    href="#responding-to-permission-revocation-algorithm"></a></h3>
            为了对名为 <code
                class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissiondescriptor-name" id="ref-for-dom-permissiondescriptor-name①">name</a></code>
            为 <code>"periodic-background-sync"</code> 的权限在某个 <a data-link-type="dfn"
                href="https://w3c.github.io/ServiceWorker/#service-worker-client-origin"
                id="ref-for-service-worker-client-origin⑨">origin</a> <var>origin</var> 上被撤销做出响应，用户代理必须将以下步骤排入 <a
                data-link-type="dfn" href="#periodic-sync-processing-queue"
                id="ref-for-periodic-sync-processing-queue①">周期性同步处理队列</a>：
            <ol>
                <li data-md>
                    <p>对于 <a data-link-type="dfn" href="#active-periodic-sync-registrations"
                            id="ref-for-active-periodic-sync-registrations③">活动周期性同步注册</a> 中的每个 <a data-link-type="dfn"
                            href="#periodic-sync-registration" id="ref-for-periodic-sync-registration⑨">periodic sync
                            registration</a> <var>registration</var>，如果其 <a data-link-type="dfn"
                            href="#periodic-sync-registration-service-worker-registration"
                            id="ref-for-periodic-sync-registration-service-worker-registration③">service worker
                            registration</a> 与 <var>origin</var> 相同：</p>
                    <ol>
                        <li data-md>
                            <p>将 <var>registration</var> 从 <a data-link-type="dfn"
                                    href="#active-periodic-sync-registrations"
                                    id="ref-for-active-periodic-sync-registrations④">active periodic sync
                                    registrations</a> 中移除。</p>
                    </ol>
            </ol>
        </div>
        <h2 class="heading settled" data-level="8" id="api-description"><span class="secno">8. </span><span
                class="content">API 描述</span><a class="self-link" href="#api-description"></a></h2>
        <h3 class="heading settled" data-level="8.1" id="extensions-to-serviceworkerglobalscope"><span
                class="secno">8.1. </span><span class="content">对 <code
                    class="idl"><a data-link-type="idl" href="https://w3c.github.io/ServiceWorker/#serviceworkerglobalscope" id="ref-for-serviceworkerglobalscope">ServiceWorkerGlobalScope</a></code>
                接口的扩展</span><a class="self-link" href="#extensions-to-serviceworkerglobalscope"></a></h3>
        <pre class="idl highlight def"><c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://w3c.github.io/ServiceWorker/#serviceworkerglobalscope" id="ref-for-serviceworkerglobalscope①"><c- g>ServiceWorkerGlobalScope</c-></a> {
    <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" id="ref-for-eventhandler"><c- n>EventHandler</c-></a> <dfn class="idl-code" data-dfn-for="ServiceWorkerGlobalScope" data-dfn-type="attribute" data-export data-type="EventHandler" id="dom-serviceworkerglobalscope-onperiodicsync"><code><c- g>onperiodicsync</c-></code><a class="self-link" href="#dom-serviceworkerglobalscope-onperiodicsync"></a></dfn>;
};
</pre>
        <h3 class="heading settled" data-level="8.2" id="extensions-to-serviceworkerregistration"><span
                class="secno">8.2. </span><span class="content">对 <code
                    class="idl"><a data-link-type="idl" href="https://w3c.github.io/ServiceWorker/#serviceworkerregistration" id="ref-for-serviceworkerregistration">ServiceWorkerRegistration</a></code>
                接口的扩展</span><a class="self-link" href="#extensions-to-serviceworkerregistration"></a></h3>
        <div class="mdn-anno wrapped after">
            <button class="mdn-anno-btn"><b class="less-than-two-engines-flag"
                    title="This feature is in less than two current engines.">⚠</b><span>MDN</span></button>
            <div class="feature">
                <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerRegistration/periodicSync"
                        title="The periodicSync read-only property of the ServiceWorkerRegistration interface returns a reference to the PeriodicSyncManager interface, which allows for registering of tasks to run at specific intervals.">ServiceWorkerRegistration/periodicSync</a>
                </p>
                <p class="less-than-two-engines-text">仅在一个当前引擎中可用。</p>
                <div class="support">
                    <span class="firefox no"><span>Firefox</span><span>None</span></span><span
                        class="safari no"><span>Safari</span><span>None</span></span><span
                        class="chrome yes"><span>Chrome</span><span>80+</span></span>
                    <hr>
                    <span class="opera no"><span>Opera</span><span>None</span></span><span
                        class="edge_blink yes"><span>Edge</span><span>80+</span></span>
                    <hr>
                    <span class="edge no"><span>Edge (Legacy)</span><span>None</span></span><span
                        class="ie no"><span>IE</span><span>None</span></span>
                    <hr>
                    <span class="firefox_android no"><span>Firefox for Android</span><span>None</span></span><span
                        class="safari_ios no"><span>iOS Safari</span><span>None</span></span><span
                        class="chrome_android yes"><span>Chrome for Android</span><span>80+</span></span><span
                        class="webview_android yes"><span>Android WebView</span><span>80+</span></span><span
                        class="samsunginternet_android yes"><span>Samsung Internet</span><span>13.0+</span></span><span
                        class="opera_android no"><span>Opera Mobile</span><span>None</span></span>
                </div>
            </div>
        </div>
        <pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed"><c- g>Exposed</c-></a>=(<c- n>Window</c->,<c- n>Worker</c->)]
<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://w3c.github.io/ServiceWorker/#serviceworkerregistration" id="ref-for-serviceworkerregistration①"><c- g>ServiceWorkerRegistration</c-></a> {
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#periodicsyncmanager" id="ref-for-periodicsyncmanager"><c- n>PeriodicSyncManager</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="PeriodicSyncManager" href="#dom-serviceworkerregistration-periodicsync" id="ref-for-dom-serviceworkerregistration-periodicsync"><c- g>periodicSync</c-></a>;
};
</pre>
        <div>
            A <code
                class="idl"><a data-link-type="idl" href="https://w3c.github.io/ServiceWorker/#serviceworkerregistration" id="ref-for-serviceworkerregistration②">ServiceWorkerRegistration</a></code>
            有一个 <dfn class="dfn-paneled" data-dfn-for="ServiceWorkerRegistration" data-dfn-type="dfn" data-noexport
                id="serviceworkerregistration-periodic-sync-manager">periodic sync manager</dfn>（一个 <code
                class="idl"><a data-link-type="idl" href="#periodicsyncmanager" id="ref-for-periodicsyncmanager①">PeriodicSyncManager</a></code>）。
            <p>属性 <dfn class="dfn-paneled idl-code" data-dfn-for="ServiceWorkerRegistration" data-dfn-type="attribute"
                    data-export id="dom-serviceworkerregistration-periodicsync"><code>periodicSync</code></dfn>
                的 getter 必须返回该 <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#context-object"
                    id="ref-for-context-object">context object</a> 的
                <a data-link-type="dfn" href="#serviceworkerregistration-periodic-sync-manager"
                    id="ref-for-serviceworkerregistration-periodic-sync-manager">periodic sync manager</a>，初始为一个新的 <code
                    class="idl"><a data-link-type="idl" href="#periodicsyncmanager" id="ref-for-periodicsyncmanager②">PeriodicSyncManager</a></code>，
                其 <a data-link-type="dfn" href="#periodicsyncmanager-service-worker-registration"
                    id="ref-for-periodicsyncmanager-service-worker-registration">service worker registration</a> 为该 <a
                    data-link-type="dfn" href="https://dom.spec.whatwg.org/#context-object"
                    id="ref-for-context-object①">context object</a> 的 <a data-link-type="dfn"
                    href="https://w3c.github.io/ServiceWorker/#dfn-service-worker-registration"
                    id="ref-for-dfn-service-worker-registration③">service worker registration</a>。
            </p>
        </div>
        <h3 class="heading settled" data-level="8.3" id="periodicsyncmanager-interface"><span class="secno">8.3.
            </span><span class="content"><code
                    class="idl"><a data-link-type="idl" href="#periodicsyncmanager" id="ref-for-periodicsyncmanager③">PeriodicSyncManager</a></code>
                接口</span><a class="self-link" href="#periodicsyncmanager-interface"></a></h3>
        <div class="mdn-anno wrapped">
            <button class="mdn-anno-btn"><b class="less-than-two-engines-flag"
                    title="This feature is in less than two current engines.">⚠</b><span>MDN</span></button>
            <div class="feature">
                <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/PeriodicSyncManager"
                        title="The PeriodicSyncManager interface of the Web Periodic Background Synchronization API provides a way to register tasks to be run in a service worker at periodic intervals with network connectivity. These tasks are referred to as periodic background sync requests. Access PeriodicSyncManager through the ServiceWorkerRegistration.periodicSync.">PeriodicSyncManager</a>
                </p>
                <p class="less-than-two-engines-text">仅在一个当前引擎中可用。</p>
                <div class="support">
                    <span class="firefox no"><span>Firefox</span><span>None</span></span><span
                        class="safari no"><span>Safari</span><span>None</span></span><span
                        class="chrome yes"><span>Chrome</span><span>80+</span></span>
                    <hr>
                    <span class="opera yes"><span>Opera</span><span>67+</span></span><span
                        class="edge_blink yes"><span>Edge</span><span>80+</span></span>
                    <hr>
                    <span class="edge no"><span>Edge (Legacy)</span><span>None</span></span><span
                        class="ie no"><span>IE</span><span>None</span></span>
                    <hr>
                    <span class="firefox_android no"><span>Firefox for Android</span><span>None</span></span><span
                        class="safari_ios no"><span>iOS Safari</span><span>None</span></span><span
                        class="chrome_android yes"><span>Chrome for Android</span><span>80+</span></span><span
                        class="webview_android yes"><span>Android WebView</span><span>80+</span></span><span
                        class="samsunginternet_android yes"><span>Samsung Internet</span><span>13.0+</span></span><span
                        class="opera_android yes"><span>Opera Mobile</span><span>57+</span></span>
                </div>
            </div>
        </div>
        <pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed①"><c- g>Exposed</c-></a>=(<c- n>Window</c->,<c- n>Worker</c->)]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="periodicsyncmanager"><code><c- g>PeriodicSyncManager</c-></code></dfn> {
    <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-promise" id="ref-for-idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-undefined" id="ref-for-idl-undefined"><c- b>undefined</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-periodicsyncmanager-register" id="ref-for-dom-periodicsyncmanager-register"><c- g>register</c-></a>(<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString" id="ref-for-idl-DOMString②"><c- b>DOMString</c-></a> <dfn class="idl-code" data-dfn-for="PeriodicSyncManager/register(tag, options), PeriodicSyncManager/register(tag)" data-dfn-type="argument" data-export id="dom-periodicsyncmanager-register-tag-options-tag"><code><c- g>tag</c-></code><a class="self-link" href="#dom-periodicsyncmanager-register-tag-options-tag"></a></dfn>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-backgroundsyncoptions" id="ref-for-dictdef-backgroundsyncoptions"><c- n>BackgroundSyncOptions</c-></a> <dfn class="idl-code" data-dfn-for="PeriodicSyncManager/register(tag, options), PeriodicSyncManager/register(tag)" data-dfn-type="argument" data-export id="dom-periodicsyncmanager-register-tag-options-options"><code><c- g>options</c-></code><a class="self-link" href="#dom-periodicsyncmanager-register-tag-options-options"></a></dfn> = {});
    <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-promise" id="ref-for-idl-promise①"><c- b>Promise</c-></a>&lt;<a data-link-type="dfn" href="https://heycam.github.io/webidl/#idl-sequence" id="ref-for-idl-sequence"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString" id="ref-for-idl-DOMString③"><c- b>DOMString</c-></a>>> <a class="idl-code" data-link-type="method" href="#dom-periodicsyncmanager-gettags" id="ref-for-dom-periodicsyncmanager-gettags"><c- g>getTags</c-></a>();
    <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-promise" id="ref-for-idl-promise②"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-undefined" id="ref-for-idl-undefined①"><c- b>undefined</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-periodicsyncmanager-unregister" id="ref-for-dom-periodicsyncmanager-unregister"><c- g>unregister</c-></a>(<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString" id="ref-for-idl-DOMString④"><c- b>DOMString</c-></a> <dfn class="idl-code" data-dfn-for="PeriodicSyncManager/unregister(tag)" data-dfn-type="argument" data-export id="dom-periodicsyncmanager-unregister-tag-tag"><code><c- g>tag</c-></code><a class="self-link" href="#dom-periodicsyncmanager-unregister-tag-tag"></a></dfn>);
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-backgroundsyncoptions"><code><c- g>BackgroundSyncOptions</c-></code></dfn> {
    [<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#EnforceRange" id="ref-for-EnforceRange"><c- g>EnforceRange</c-></a>] <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-unsigned-long-long" id="ref-for-idl-unsigned-long-long"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a> <dfn class="dfn-paneled idl-code" data-default="0" data-dfn-for="BackgroundSyncOptions" data-dfn-type="dict-member" data-export data-type="unsigned long long " id="dom-backgroundsyncoptions-mininterval"><code><c- g>minInterval</c-></code></dfn> = 0;
};
</pre>
        <div> A <code
                class="idl"><a data-link-type="idl" href="#periodicsyncmanager" id="ref-for-periodicsyncmanager④">PeriodicSyncManager</a></code>
            有一个 <dfn class="dfn-paneled" data-dfn-for="PeriodicSyncManager" data-dfn-type="dfn" data-noexport
                id="periodicsyncmanager-service-worker-registration">service worker registration</dfn>（一个 <a
                data-link-type="dfn" href="https://w3c.github.io/ServiceWorker/#dfn-service-worker-registration"
                id="ref-for-dfn-service-worker-registration④">service worker registration</a>）。 </div>
        <div class="mdn-anno wrapped">
            <button class="mdn-anno-btn"><b class="less-than-two-engines-flag"
                    title="This feature is in less than two current engines.">⚠</b><span>MDN</span></button>
            <div class="feature">
                <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/PeriodicSyncManager/register"
                        title="The register() method of the PeriodicSyncManager interface registers a periodic sync request with the browser with the specified tag and options. It returns a Promise that resolves when the registration completes.">PeriodicSyncManager/register</a>
                </p>
                <p class="less-than-two-engines-text">仅在一个当前引擎中可用。</p>
                <div class="support">
                    <span class="firefox no"><span>Firefox</span><span>None</span></span><span
                        class="safari no"><span>Safari</span><span>None</span></span><span
                        class="chrome yes"><span>Chrome</span><span>80+</span></span>
                    <hr>
                    <span class="opera yes"><span>Opera</span><span>67+</span></span><span
                        class="edge_blink yes"><span>Edge</span><span>80+</span></span>
                    <hr>
                    <span class="edge no"><span>Edge (Legacy)</span><span>None</span></span><span
                        class="ie no"><span>IE</span><span>None</span></span>
                    <hr>
                    <span class="firefox_android no"><span>Firefox for Android</span><span>None</span></span><span
                        class="safari_ios no"><span>iOS Safari</span><span>None</span></span><span
                        class="chrome_android yes"><span>Chrome for Android</span><span>80+</span></span><span
                        class="webview_android yes"><span>Android WebView</span><span>80+</span></span><span
                        class="samsunginternet_android yes"><span>Samsung Internet</span><span>13.0+</span></span><span
                        class="opera_android yes"><span>Opera Mobile</span><span>57+</span></span>
                </div>
            </div>
        </div>
        <div class="algorithm" data-algorithm="register(tag, options)" data-algorithm-for="PeriodicSyncManager">
            The
            <code><dfn class="dfn-paneled idl-code" data-dfn-for="PeriodicSyncManager" data-dfn-type="method" data-export data-lt="register(tag, options)|register(tag)" id="dom-periodicsyncmanager-register" title="register(tag, options)"><code>register(<var>tag</var>, <var>options</var>)</code></dfn></code>
            方法在被调用时，必须返回一个新的 <a data-link-type="dfn" href="https://heycam.github.io/webidl/#a-new-promise"
                id="ref-for-a-new-promise">promise</a>
            并将以下步骤 <a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/infrastructure.html#enqueue-the-following-steps"
                id="ref-for-enqueue-the-following-steps②">入队</a> 到 <a data-link-type="dfn"
                href="#periodic-sync-processing-queue" id="ref-for-periodic-sync-processing-queue②">周期性同步处理队列</a>：
            <ol>
                <li data-md>
                    <p>令 <var>serviceWorkerRegistration</var> 为与该上下文对象的 <code
                            class="idl"><a data-link-type="idl" href="#periodicsyncmanager" id="ref-for-periodicsyncmanager⑤">PeriodicSyncManager</a></code>
                        相关联的 <a data-link-type="dfn" href="#periodicsyncmanager-service-worker-registration"
                            id="ref-for-periodicsyncmanager-service-worker-registration①">service worker
                            registration</a>。</p>
                <li data-md>
                    <p>如果 <var>serviceWorkerRegistration</var> 的 <a data-link-type="dfn"
                            href="https://w3c.github.io/ServiceWorker/#dfn-active-worker"
                            id="ref-for-dfn-active-worker">active worker</a> 为 null，则用 <code
                            class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#invalidstateerror" id="ref-for-invalidstateerror">InvalidStateError</a></code>
                        拒绝 <var>promise</var> 并中止这些步骤。</p>
                <li data-md>
                    <p>如果名为 <code>"periodic-background-sync"</code> 的权限的 <code
                            class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#enumdef-permissionstate" id="ref-for-enumdef-permissionstate①">PermissionState</a></code>
                        不是 <code
                            class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted①">granted</a></code>，
                        则用 <code
                            class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#notallowederror" id="ref-for-notallowederror">NotAllowedError</a></code>
                        拒绝 <var>promise</var> 并中止这些步骤。</p>
                <li data-md>
                    <p>令 <var>isBackground</var>（布尔值）为 true。</p>
                <li data-md>
                    <p>对于与 <var>serviceWorkerRegistration</var> 的 <a data-link-type="dfn"
                            href="https://w3c.github.io/ServiceWorker/#service-worker-client-origin"
                            id="ref-for-service-worker-client-origin①①">origin</a> 关联的每个 <a data-link-type="dfn"
                            href="https://w3c.github.io/ServiceWorker/#dfn-service-worker-client"
                            id="ref-for-dfn-service-worker-client①">service worker clients</a> 的 <var>client</var>：</p>
                    <ol>
                        <li data-md>
                            <p>如果 <var>client</var> 的 <a data-link-type="dfn"
                                    href="https://w3c.github.io/ServiceWorker/#dfn-service-worker-client-frame-type"
                                    id="ref-for-dfn-service-worker-client-frame-type①">frame type</a> 为
                                "<code>top-level</code>" 或 "<code>auxiliary</code>"，则将 <var>isBackground</var> 设为 false。
                            </p>
                    </ol>
                <li data-md>
                    <p>如果 <var>isBackground</var> 为 true，则用 <code
                            class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#invalidaccesserror" id="ref-for-invalidaccesserror">InvalidAccessError</a></code>
                        拒绝 <var>promise</var> 并中止这些步骤。</p>
                <li data-md>
                    <p>令 <var>currentRegistration</var> 为在 <var>serviceWorkerRegistration</var> 的 <a
                            data-link-type="dfn" href="#active-periodic-sync-registrations"
                            id="ref-for-active-periodic-sync-registrations⑤">active periodic sync registrations</a> 中其
                        <a data-link-type="dfn" href="#periodic-sync-registration-tag"
                            id="ref-for-periodic-sync-registration-tag">tag</a> 等于 <var>tag</var> 的 <a
                            data-link-type="dfn" href="#periodic-sync-registration"
                            id="ref-for-periodic-sync-registration①⓪">periodic sync registration</a>（若存在），否则为 null。
                    </p>
                <li data-md>
                    <p>如果 <var>currentRegistration</var> 为 null：</p>
                    <ol>
                        <li data-md>
                            <p>令 <var>newRegistration</var> 为一个新的 <a data-link-type="dfn"
                                    href="#periodic-sync-registration"
                                    id="ref-for-periodic-sync-registration①①">periodic sync registration</a>。</p>
                        <li data-md>
                            <p>将 <var>newRegistration</var> 的 <a data-link-type="dfn"
                                    href="#periodic-sync-registration-tag"
                                    id="ref-for-periodic-sync-registration-tag①">tag</a> 设为 <var>tag</var>。</p>
                        <li data-md>
                            <p>将 <var>newRegistration</var> 的 <a data-link-type="dfn"
                                    href="#periodic-sync-registration-minimum-interval"
                                    id="ref-for-periodic-sync-registration-minimum-interval②">minimum interval</a> 设为
                                <var>options</var> 的 <code
                                    class="idl"><a data-link-type="idl" href="#dom-backgroundsyncoptions-mininterval" id="ref-for-dom-backgroundsyncoptions-mininterval">minInterval</a></code>
                                成员。
                            </p>
                        <li data-md>
                            <p>将 <var>newRegistration</var> 的 <a data-link-type="dfn"
                                    href="#periodic-sync-registration-state"
                                    id="ref-for-periodic-sync-registration-state①">state</a> 设为 "<code>pending</code>"。
                            </p>
                        <li data-md>
                            <p>将 <var>newRegistration</var> 的 <a data-link-type="dfn"
                                    href="#periodic-sync-registration-service-worker-registration"
                                    id="ref-for-periodic-sync-registration-service-worker-registration④">service worker
                                    registration</a> 设为 <var>serviceWorkerRegistration</var>。</p>
                        <li data-md>
                            <p>将 <var>newRegistration</var> 的 <a data-link-type="dfn"
                                    href="#periodic-sync-registration-anchor-time"
                                    id="ref-for-periodic-sync-registration-anchor-time①">anchor time</a> 设为表示当前时间的时间戳。
                            </p>
                        <li data-md>
                            <p>将 <var>newRegistration</var> 添加到 <var>serviceWorkerRegistration</var> 的 <a
                                    data-link-type="dfn" href="#active-periodic-sync-registrations"
                                    id="ref-for-active-periodic-sync-registrations⑥">active periodic sync
                                    registrations</a>。</p>
                        <li data-md>
                            <p><a data-link-type="dfn" href="https://heycam.github.io/webidl/#resolve"
                                    id="ref-for-resolve">Resolve</a> <var>promise</var>。</p>
                    </ol>
                <li data-md>
                    <p>否则：</p>
                    <ol>
                        <li data-md>
                            <p>如果 <var>currentRegistration</var> 的 <a data-link-type="dfn"
                                    href="#periodic-sync-registration-minimum-interval"
                                    id="ref-for-periodic-sync-registration-minimum-interval③">minimum interval</a> 与
                                <var>options</var> 的 <code
                                    class="idl"><a data-link-type="idl" href="#dom-backgroundsyncoptions-mininterval" id="ref-for-dom-backgroundsyncoptions-mininterval①">minInterval</a></code>
                                成员不同：
                            </p>
                            <ol>
                                <li data-md>
                                    <p>将 <var>currentRegistration</var> 的 <a data-link-type="dfn"
                                            href="#periodic-sync-registration-minimum-interval"
                                            id="ref-for-periodic-sync-registration-minimum-interval④">minimum
                                            interval</a> 设为 <var>options</var> 的 <code
                                            class="idl"><a data-link-type="idl" href="#dom-backgroundsyncoptions-mininterval" id="ref-for-dom-backgroundsyncoptions-mininterval②">minInterval</a></code>
                                        成员。</p>
                            </ol>
                        <li data-md>
                            <p>否则，如果 <var>currentRegistration</var> 的 <a data-link-type="dfn"
                                    href="#periodic-sync-registration-state"
                                    id="ref-for-periodic-sync-registration-state②">state</a> 为 "<code>firing</code>"，则将
                                <var>serviceWorkerRegistration</var> 的 <a data-link-type="dfn"
                                    href="#periodic-sync-registration-state"
                                    id="ref-for-periodic-sync-registration-state③">state</a> 设为
                                "<code>reregistered-while-firing</code>"。
                            </p>
                        <li data-md>
                            <p><a data-link-type="dfn" href="https://heycam.github.io/webidl/#resolve"
                                    id="ref-for-resolve①">Resolve</a> <var>promise</var>。</p>
                    </ol>
            </ol>
        </div>
        <div class="mdn-anno wrapped">
            <button class="mdn-anno-btn"><b class="less-than-two-engines-flag"
                    title="This feature is in less than two current engines.">⚠</b><span>MDN</span></button>
            <div class="feature">
                <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/PeriodicSyncManager/getTags"
                        title="The getTags() method of the PeriodicSyncManager interface returns a Promise that resolves with a list of String objects representing the tags that are currently registered for periodic syncing.">PeriodicSyncManager/getTags</a>
                </p>
                <p class="less-than-two-engines-text">仅在一个当前引擎中可用。</p>
                <div class="support">
                    <span class="firefox no"><span>Firefox</span><span>None</span></span><span
                        class="safari no"><span>Safari</span><span>None</span></span><span
                        class="chrome yes"><span>Chrome</span><span>80+</span></span>
                    <hr>
                    <span class="opera yes"><span>Opera</span><span>67+</span></span><span
                        class="edge_blink yes"><span>Edge</span><span>80+</span></span>
                    <hr>
                    <span class="edge no"><span>Edge (Legacy)</span><span>None</span></span><span
                        class="ie no"><span>IE</span><span>None</span></span>
                    <hr>
                    <span class="firefox_android no"><span>Firefox for Android</span><span>None</span></span><span
                        class="safari_ios no"><span>iOS Safari</span><span>None</span></span><span
                        class="chrome_android yes"><span>Chrome for Android</span><span>80+</span></span><span
                        class="webview_android yes"><span>Android WebView</span><span>80+</span></span><span
                        class="samsunginternet_android yes"><span>Samsung Internet</span><span>13.0+</span></span><span
                        class="opera_android yes"><span>Opera Mobile</span><span>57+</span></span>
                </div>
            </div>
        </div>
        <div class="algorithm" data-algorithm="getTags()" data-algorithm-for="PeriodicSyncManager">
            The
            <code><dfn class="dfn-paneled idl-code" data-dfn-for="PeriodicSyncManager" data-dfn-type="method" data-export id="dom-periodicsyncmanager-gettags" title="getTags()"><code>getTags()</code></dfn></code>
            方法在被调用时，必须返回一个新的 <a data-link-type="dfn" href="https://heycam.github.io/webidl/#a-new-promise"
                id="ref-for-a-new-promise①">promise</a>
            并将以下步骤 <a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/infrastructure.html#enqueue-the-following-steps"
                id="ref-for-enqueue-the-following-steps③">入队</a> 到 <a data-link-type="dfn"
                href="#periodic-sync-processing-queue" id="ref-for-periodic-sync-processing-queue③">周期性同步处理队列</a>：
            <ol>
                <li data-md>
                    <p>令 <var>serviceWorkerRegistration</var> 为与该上下文对象的 <code
                            class="idl"><a data-link-type="idl" href="#periodicsyncmanager" id="ref-for-periodicsyncmanager⑥">PeriodicSyncManager</a></code>
                        相关联的 <a data-link-type="dfn" href="#periodicsyncmanager-service-worker-registration"
                            id="ref-for-periodicsyncmanager-service-worker-registration②">service worker
                            registration</a>。</p>
                <li data-md>
                    <p>令 <var>currentTags</var> 为一个新的 <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list"
                            id="ref-for-list">列表</a>。</p>
                <li data-md>
                    <p>对于 <var>serviceWorkerRegistration</var> 的每个 <a data-link-type="dfn"
                            href="#active-periodic-sync-registrations"
                            id="ref-for-active-periodic-sync-registrations⑦">active periodic sync registrations</a> 中的
                        <var>registration</var>，将 <var>registration</var> 的 <a data-link-type="dfn"
                            href="#periodic-sync-registration-tag" id="ref-for-periodic-sync-registration-tag②">tag</a>
                        <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append"
                            id="ref-for-list-append">追加</a> 到 <var>currentTags</var>。
                    </p>
                <li data-md>
                    <p><a data-link-type="dfn" href="https://heycam.github.io/webidl/#resolve"
                            id="ref-for-resolve②">Resolve</a> <var>promise</var> 并返回 <var>currentTags</var>。</p>
            </ol>
        </div>
        <div class="mdn-anno wrapped">
            <button class="mdn-anno-btn"><b class="less-than-two-engines-flag"
                    title="This feature is in less than two current engines.">⚠</b><span>MDN</span></button>
            <div class="feature">
                <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/PeriodicSyncManager/unregister"
                        title="The unregister() method of the PeriodicSyncManager interface unregisters the periodic sync request corresponding to the specified tag and returns a Promise that resolves when unregistration completes.">PeriodicSyncManager/unregister</a>
                </p>
                <p class="less-than-two-engines-text">仅在一个当前引擎中可用。</p>
                <div class="support">
                    <span class="firefox no"><span>Firefox</span><span>None</span></span><span
                        class="safari no"><span>Safari</span><span>None</span></span><span
                        class="chrome yes"><span>Chrome</span><span>80+</span></span>
                    <hr>
                    <span class="opera yes"><span>Opera</span><span>67+</span></span><span
                        class="edge_blink yes"><span>Edge</span><span>80+</span></span>
                    <hr>
                    <span class="edge no"><span>Edge (Legacy)</span><span>None</span></span><span
                        class="ie no"><span>IE</span><span>None</span></span>
                    <hr>
                    <span class="firefox_android no"><span>Firefox for Android</span><span>None</span></span><span
                        class="safari_ios no"><span>iOS Safari</span><span>None</span></span><span
                        class="chrome_android yes"><span>Chrome for Android</span><span>80+</span></span><span
                        class="webview_android yes"><span>Android WebView</span><span>80+</span></span><span
                        class="samsunginternet_android yes"><span>Samsung Internet</span><span>13.0+</span></span><span
                        class="opera_android yes"><span>Opera Mobile</span><span>57+</span></span>
                </div>
            </div>
        </div>
        <div class="algorithm" data-algorithm="unregister(tag)" data-algorithm-for="PeriodicSyncManager">
            The
            <code><dfn class="dfn-paneled idl-code" data-dfn-for="PeriodicSyncManager" data-dfn-type="method" data-export id="dom-periodicsyncmanager-unregister" title="unregister(tag)"><code>unregister(<var>tag</var>)</code></dfn></code>
            方法在被调用时，必须返回一个新的 <a data-link-type="dfn" href="https://heycam.github.io/webidl/#a-new-promise"
                id="ref-for-a-new-promise②">promise</a>
            并将以下步骤 <a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/infrastructure.html#enqueue-the-following-steps"
                id="ref-for-enqueue-the-following-steps④">入队</a> 到 <a data-link-type="dfn"
                href="#periodic-sync-processing-queue" id="ref-for-periodic-sync-processing-queue④">周期性同步处理队列</a>：
            <ol>
                <li data-md>
                    <p>令 <var>serviceWorkerRegistration</var> 为与该上下文对象的 <code
                            class="idl"><a data-link-type="idl" href="#periodicsyncmanager" id="ref-for-periodicsyncmanager⑦">PeriodicSyncManager</a></code>
                        相关联的 <a data-link-type="dfn" href="#periodicsyncmanager-service-worker-registration"
                            id="ref-for-periodicsyncmanager-service-worker-registration③">service worker
                            registration</a>。</p>
                    <ol>
                        <li data-md>
                            <p>令 <var>currentRegistration</var> 为在 <var>serviceWorkerRegistration</var> 的 <a
                                    data-link-type="dfn" href="#active-periodic-sync-registrations"
                                    id="ref-for-active-periodic-sync-registrations⑧">active periodic sync
                                    registrations</a> 中其 <a data-link-type="dfn" href="#periodic-sync-registration-tag"
                                    id="ref-for-periodic-sync-registration-tag③">tag</a> 等于 <var>tag</var> 的 <a
                                    data-link-type="dfn" href="#periodic-sync-registration"
                                    id="ref-for-periodic-sync-registration①②">periodic sync registration</a>（若存在），否则为
                                null。</p>
                        <li data-md>
                            <p>如果 <var>currentRegistration</var> 非空，则从 <var>serviceWorkerRegistration</var> 的 <a
                                    data-link-type="dfn" href="#active-periodic-sync-registrations"
                                    id="ref-for-active-periodic-sync-registrations⑨">active periodic sync
                                    registrations</a> 中移除 <var>currentRegistration</var>。</p>
                        <li data-md>
                            <p>Resolve <var>promise</var>。</p>
                    </ol>
            </ol>
        </div>
        <h3 class="heading settled" data-level="8.4" id="periodicsync-event-interface"><span class="secno">8.4.
            </span><span class="content"><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                    id="periodicsync-event">periodicsync 事件</dfn></span><a class="self-link"
                href="#periodicsync-event-interface"></a></h3>
        <div class="mdn-anno wrapped after">
            <button class="mdn-anno-btn"><b class="less-than-two-engines-flag"
                    title="此功能在不到两个主流浏览器引擎中支持。">⚠</b><span>MDN</span></button>
            <div class="feature">
                <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/PeriodicSyncEvent/PeriodicSyncEvent"
                        title="PeriodicSyncEvent() 构造函数用于创建一个新的 PeriodicSyncEvent 对象。通常不直接使用此构造函数。浏览器会自行创建这些对象，并将其提供给 ServiceWorkerGlobalScope.onperiodicsync 回调。">PeriodicSyncEvent/PeriodicSyncEvent</a>
                </p>
                <p class="less-than-two-engines-text">仅有一个主流引擎支持。</p>
                <div class="support">
                    <span class="firefox no"><span>Firefox</span><span>不支持</span></span><span
                        class="safari no"><span>Safari</span><span>不支持</span></span><span
                        class="chrome yes"><span>Chrome</span><span>80+</span></span>
                    <hr>
                    <span class="opera yes"><span>Opera</span><span>67+</span></span><span
                        class="edge_blink yes"><span>Edge</span><span>80+</span></span>
                    <hr>
                    <span class="edge no"><span>Edge (旧版)</span><span>不支持</span></span><span
                        class="ie no"><span>IE</span><span>不支持</span></span>
                    <hr>
                    <span class="firefox_android no"><span>Android 版 Firefox</span><span>不支持</span></span><span
                        class="safari_ios no"><span>iOS Safari</span><span>不支持</span></span><span
                        class="chrome_android yes"><span>Android 版 Chrome</span><span>80+</span></span><span
                        class="webview_android yes"><span>Android WebView</span><span>80+</span></span><span
                        class="samsunginternet_android yes"><span>三星浏览器</span><span>13.0+</span></span><span
                        class="opera_android yes"><span>Opera Mobile</span><span>57+</span></span>
                </div>
            </div>
            <div class="feature">
                <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/PeriodicSyncEvent"
                        title="Web 定期后台同步 API 的 PeriodicSyncEvent 接口为在 service worker 中具备网络连接时执行任务提供了一种方式。">PeriodicSyncEvent</a>
                </p>
                <p class="less-than-two-engines-text">仅有一个主流引擎支持。</p>
                <div class="support">
                    <span class="firefox no"><span>Firefox</span><span>不支持</span></span><span
                        class="safari no"><span>Safari</span><span>不支持</span></span><span
                        class="chrome yes"><span>Chrome</span><span>80+</span></span>
                    <hr>
                    <span class="opera yes"><span>Opera</span><span>67+</span></span><span
                        class="edge_blink yes"><span>Edge</span><span>80+</span></span>
                    <hr>
                    <span class="edge no"><span>Edge (旧版)</span><span>不支持</span></span><span
                        class="ie no"><span>IE</span><span>不支持</span></span>
                    <hr>
                    <span class="firefox_android no"><span>Android 版 Firefox</span><span>不支持</span></span><span
                        class="safari_ios no"><span>iOS Safari</span><span>不支持</span></span><span
                        class="chrome_android yes"><span>Android 版 Chrome</span><span>80+</span></span><span
                        class="webview_android yes"><span>Android WebView</span><span>80+</span></span><span
                        class="samsunginternet_android yes"><span>三星浏览器</span><span>13.0+</span></span><span
                        class="opera_android yes"><span>Opera Mobile</span><span>57+</span></span>
                </div>
            </div>
        </div>
        <pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-periodicsynceventinit"><code><c- g>PeriodicSyncEventInit</c-></code></dfn> : <a data-link-type="idl-name" href="https://w3c.github.io/ServiceWorker/#dictdef-extendableeventinit" id="ref-for-dictdef-extendableeventinit"><c- n>ExtendableEventInit</c-></a> {
    <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString" id="ref-for-idl-DOMString⑤"><c- b>DOMString</c-></a> <dfn class="idl-code" data-dfn-for="PeriodicSyncEventInit" data-dfn-type="dict-member" data-export data-type="DOMString " id="dom-periodicsynceventinit-tag"><code><c- g>tag</c-></code><a class="self-link" href="#dom-periodicsynceventinit-tag"></a></dfn>;
};
[<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed②"><c- g>Exposed</c-></a>=<c- n>ServiceWorker</c->]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="periodicsyncevent"><code><c- g>PeriodicSyncEvent</c-></code></dfn> : <a data-link-type="idl-name" href="https://w3c.github.io/ServiceWorker/#extendableevent" id="ref-for-extendableevent"><c- n>ExtendableEvent</c-></a> {
    <dfn class="idl-code" data-dfn-for="PeriodicSyncEvent" data-dfn-type="constructor" data-export data-lt="PeriodicSyncEvent(type, init)|constructor(type, init)" id="dom-periodicsyncevent-periodicsyncevent"><code><c- g>constructor</c-></code><a class="self-link" href="#dom-periodicsyncevent-periodicsyncevent"></a></dfn>(<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString" id="ref-for-idl-DOMString⑥"><c- b>DOMString</c-></a> <dfn class="idl-code" data-dfn-for="PeriodicSyncEvent/PeriodicSyncEvent(type, init), PeriodicSyncEvent/constructor(type, init)" data-dfn-type="argument" data-export id="dom-periodicsyncevent-periodicsyncevent-type-init-type"><code><c- g>type</c-></code><a class="self-link" href="#dom-periodicsyncevent-periodicsyncevent-type-init-type"></a></dfn>, <a data-link-type="idl-name" href="#dictdef-periodicsynceventinit" id="ref-for-dictdef-periodicsynceventinit"><c- n>PeriodicSyncEventInit</c-></a> <dfn class="idl-code" data-dfn-for="PeriodicSyncEvent/PeriodicSyncEvent(type, init), PeriodicSyncEvent/constructor(type, init)" data-dfn-type="argument" data-export id="dom-periodicsyncevent-periodicsyncevent-type-init-init"><code><c- g>init</c-></code><a class="self-link" href="#dom-periodicsyncevent-periodicsyncevent-type-init-init"></a></dfn>);
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString" id="ref-for-idl-DOMString⑦"><c- b>DOMString</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="DOMString" href="#dom-periodicsyncevent-tag" id="ref-for-dom-periodicsyncevent-tag"><c- g>tag</c-></a>;
};
</pre>
        <div class="mdn-anno wrapped">
            <button class="mdn-anno-btn"><b class="less-than-two-engines-flag"
                    title="此功能在不到两个主流浏览器引擎中支持。">⚠</b><span>MDN</span></button>
            <div class="feature">
                <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/PeriodicSyncEvent/tag"
                        title="PeriodicSyncEvent 接口的只读属性 tag 返回开发者定义的 PeriodicSyncEvent 标识符。此标识符在调用 PeriodicSyncManager 接口的 PeriodicSyncManager.register() 方法时指定。Web 应用可以通过多个 tag 管理不同周期任务的不同运行频率。">PeriodicSyncEvent/tag</a>
                </p>
                <p class="less-than-two-engines-text">仅有一个主流引擎支持。</p>
                <div class="support">
                    <span class="firefox no"><span>Firefox</span><span>不支持</span></span><span
                        class="safari no"><span>Safari</span><span>不支持</span></span><span
                        class="chrome yes"><span>Chrome</span><span>80+</span></span>
                    <hr>
                    <span class="opera yes"><span>Opera</span><span>67+</span></span><span
                        class="edge_blink yes"><span>Edge</span><span>80+</span></span>
                    <hr>
                    <span class="edge no"><span>Edge (旧版)</span><span>不支持</span></span><span
                        class="ie no"><span>IE</span><span>不支持</span></span>
                    <hr>
                    <span class="firefox_android no"><span>Android 版 Firefox</span><span>不支持</span></span><span
                        class="safari_ios no"><span>iOS Safari</span><span>不支持</span></span><span
                        class="chrome_android yes"><span>Android 版 Chrome</span><span>80+</span></span><span
                        class="webview_android yes"><span>Android WebView</span><span>80+</span></span><span
                        class="samsunginternet_android yes"><span>三星浏览器</span><span>13.0+</span></span><span
                        class="opera_android yes"><span>Opera Mobile</span><span>57+</span></span>
                </div>
            </div>
        </div>
        <div> <code
                class="idl"><a data-link-type="idl" href="#periodicsyncevent" id="ref-for-periodicsyncevent">PeriodicSyncEvent</a></code>
            拥有一个 <dfn class="dfn-paneled" data-dfn-for="PeriodicSyncEvent" data-dfn-type="dfn" data-noexport
                id="periodicsyncevent-tag">tag</dfn>（一个 <a data-link-type="dfn" href="#periodic-sync-registration-tag"
                id="ref-for-periodic-sync-registration-tag④">tag</a>）。
            <dfn class="dfn-paneled idl-code" data-dfn-for="PeriodicSyncEvent" data-dfn-type="attribute" data-export
                id="dom-periodicsyncevent-tag"><code>tag</code></dfn> 属性必须返回其初始化时的值。
        </div>
        <h4 class="heading settled" data-level="8.4.1" id="firing-a-periodicsync-event"><span class="secno">8.4.1.
            </span><span class="content"><a data-link-type="dfn" href="#fire-a-periodicsync-event"
                    id="ref-for-fire-a-periodicsync-event①">触发 periodicsync 事件</a></span><a class="self-link"
                href="#firing-a-periodicsync-event"></a></h4>
        Note: 用户代理可以对 <code
            class="idl"><a data-link-type="idl" href="#periodicsyncevent" id="ref-for-periodicsyncevent①">PeriodicSyncEvent</a></code>
        的生命周期扩展和执行时间施加比一般 <code
            class="idl"><a data-link-type="idl" href="https://w3c.github.io/ServiceWorker/#extendableevent" id="ref-for-extendableevent①">ExtendableEvent</a></code>
        更严格的时间限制。尤其是对 <code
            class="idl"><a data-link-type="idl" href="#periodicsyncevent" id="ref-for-periodicsyncevent②">PeriodicSyncEvent</a></code>
        的任何重试可能有明显缩短的时间限制。
        <div class="algorithm" data-algorithm="fire a periodicsync event">
            要为 <a data-link-type="dfn" href="#periodic-sync-registration"
                id="ref-for-periodic-sync-registration①③">periodic sync registration</a> <var>registration</var> <dfn
                class="dfn-paneled" data-dfn-type="dfn" data-noexport id="fire-a-periodicsync-event">触发 periodicsync
                事件</dfn>，用户代理必须执行以下步骤：
            <ol>
                <li data-md>
                    <p>令 <var>serviceWorkerRegistration</var> 为 <var>registration</var> 的 <a data-link-type="dfn"
                            href="#periodic-sync-registration-service-worker-registration"
                            id="ref-for-periodic-sync-registration-service-worker-registration⑤">service worker 注册</a>。
                    </p>
                <li data-md>
                    <p>如果 <var>registration</var> 不再属于 <var>serviceWorkerRegistration</var> 的 <a data-link-type="dfn"
                            href="#active-periodic-sync-registrations"
                            id="ref-for-active-periodic-sync-registrations①⓪">活跃 periodic sync 注册</a>，则终止这些步骤。</p>
                <li data-md>
                    <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert"
                            id="ref-for-assert">断言</a>：<var>registration</var> 的 <a data-link-type="dfn"
                            href="#periodic-sync-registration-state"
                            id="ref-for-periodic-sync-registration-state④">state</a> 为 "<code>pending</code>"。</p>
                <li data-md>
                    <p>令 retryCount 为 0。</p>
                <li data-md>
                    <p>将 <var>registration</var> 的 <a data-link-type="dfn" href="#periodic-sync-registration-state"
                            id="ref-for-periodic-sync-registration-state⑤">state</a> 设为 "<code>firing</code>"。</p>
                <li data-md>
                    <p>当条件为真，循环：</p>
                    <ol>
                        <li data-md>
                            <p>令 <var>continue</var> 为 false。</p>
                        <li data-md>
                            <p>令 <var>success</var> 为 false。</p>
                        <li data-md>
                            <p><a data-link-type="dfn" href="https://w3c.github.io/ServiceWorker/#fire-functional-event"
                                    id="ref-for-fire-functional-event">触发功能事件</a>
                                "<code>periodicsync</code>"，使用 <code
                                    class="idl"><a data-link-type="idl" href="#periodicsyncevent" id="ref-for-periodicsyncevent③">PeriodicSyncEvent</a></code>
                                于 <var>serviceWorkerRegistration</var>，其 <a data-link-type="dfn"
                                    href="#periodicsyncevent-tag" id="ref-for-periodicsyncevent-tag">tag</a> 设置为
                                <var>registration</var> 的 <a data-link-type="dfn" href="#periodic-sync-registration-tag"
                                    id="ref-for-periodic-sync-registration-tag⑤">tag</a>。记
                                <var>dispatchedEvent</var>，类型为 <code
                                    class="idl"><a data-link-type="idl" href="https://w3c.github.io/ServiceWorker/#extendableevent" id="ref-for-extendableevent②">ExtendableEvent</a></code>，表示派发出的
                                <a data-link-type="dfn" href="#periodicsync-event"
                                    id="ref-for-periodicsync-event②⓪">periodicsync 事件</a> 并使用 <var>dispatchedEvent</var>
                                执行以下步骤：
                            </p>
                        <li data-md>
                            <p>令 <var>waitUntilPromise</var> 为 <a data-link-type="dfn"
                                    href="https://heycam.github.io/webidl/#wait-for-all"
                                    id="ref-for-wait-for-all">等待全部</a> <var>dispatchedEvent</var> 的 <a
                                    data-link-type="dfn"
                                    href="https://w3c.github.io/ServiceWorker/#extendableevent-extend-lifetime-promises"
                                    id="ref-for-extendableevent-extend-lifetime-promises">延长生命周期 promises</a> 的结果。
                            </p>
                        <li data-md>
                            <p>对于 <a data-link-type="dfn" href="https://heycam.github.io/webidl/#upon-fulfillment"
                                    id="ref-for-upon-fulfillment">fulfilled</a>（满足） <var>waitUntilPromise</var>
                                时，执行以下步骤：</p>
                            <ol>
                                <li data-md>
                                    <p>将 <var>success</var> 设为 true。</p>
                                <li data-md>
                                    <p>将 <var>continue</var> 设为 true。</p>
                            </ol>
                        <li data-md>
                            <p>对于 <a data-link-type="dfn" href="https://heycam.github.io/webidl/#upon-rejection"
                                    id="ref-for-upon-rejection">rejection</a>（拒绝） <var>waitUntilPromise</var> 时，执行以下步骤：
                            </p>
                            <ol>
                                <li data-md>
                                    <p>将 <var>continue</var> 设为 true。</p>
                            </ol>
                        <li data-md>
                            <p><a data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel"
                                    id="ref-for-in-parallel①">并行</a>：</p>
                            <ol>
                                <li data-md>
                                    <p>等待 <var>continue</var> 为 true。</p>
                                <li data-md>
                                    <p>令 <var>origin</var> 为与 <var>registration</var> 的 <a data-link-type="dfn"
                                            href="#periodic-sync-registration-service-worker-registration"
                                            id="ref-for-periodic-sync-registration-service-worker-registration⑥">service
                                            worker 注册</a> 关联的 <a data-link-type="dfn"
                                            href="https://w3c.github.io/ServiceWorker/#service-worker-client-origin"
                                            id="ref-for-service-worker-client-origin①②">源（origin）</a>。
                                    </p>
                                <li data-md>
                                    <p>如果 <var>success</var> 为 true，则将 key 为 <var>origin</var> 的 <a data-link-type="dfn"
                                            href="#periodic-sync-scheduler-time-of-last-fire"
                                            id="ref-for-periodic-sync-scheduler-time-of-last-fire①">最后触发时间</a> 设置为当前时间。
                                    </p>
                                <li data-md>
                                    <p>如果 <var>success</var> 为 true，或 <var>retryCount</var> 大于 <a data-link-type="dfn"
                                            href="#maximum-number-of-retries"
                                            id="ref-for-maximum-number-of-retries①">最大重试次数</a>，或
                                        <var>registration</var> 的 state 为 "<code>reregistered-while-firing</code>"，则：
                                    </p>
                                    <ol>
                                        <li data-md>
                                            <p>将 <var>registration</var> 的 <a data-link-type="dfn"
                                                    href="#periodic-sync-registration-state"
                                                    id="ref-for-periodic-sync-registration-state⑥">state</a> 设为
                                                "<code>pending</code>"。</p>
                                        <li data-md>
                                            <p>将 <var>registration</var> 的 <a data-link-type="dfn"
                                                    href="#periodic-sync-registration-anchor-time"
                                                    id="ref-for-periodic-sync-registration-anchor-time②">anchor time</a>
                                                设置为当前时间戳。</p>
                                        <li data-md>
                                            <p>终止这些步骤。</p>
                                    </ol>
                            </ol>
                        <li data-md>
                            <p>将 <var>retryCount</var> 增加 1。</p>
                        <li data-md>
                            <p>等待一个基于 <var>retryCount</var> 的小退避时间。</p>
                    </ol>
            </ol>
        </div>
    </main>
    <div data-fill-with="conformance">
        <h2 class="no-ref no-num heading settled" id="w3c-conformance"><span class="content">一致性</span><a
                class="self-link" href="#w3c-conformance"></a></h2>
        <h3 class="no-ref no-num heading settled" id="w3c-conventions"><span class="content">文档约定</span><a
                class="self-link" href="#w3c-conventions"></a></h3>
        <p>一致性要求由描述性断言和 RFC 2119 术语结合表达。</p>
        <p>本规范的规范性部分中的关键词 “MUST（必须）”、“MUST NOT（禁止）”、“REQUIRED（必需）”、“SHALL（应当）”、“SHALL NOT（不得）”、“SHOULD（建议）”、“SHOULD
            NOT（不建议）”、“RECOMMENDED（推荐）”、“MAY（可以）” 和 “OPTIONAL（可选的）”
            应按照 RFC 2119 所述解释。
            但为提升可读性，
            在本规范中这些单词不都用大写字母表示。
        </p>
        <p>除非特别标注为非规范性、示例或注释的部分外，本规范的所有文本均为规范性内容。<a data-link-type="biblio" href="#biblio-rfc2119">[RFC2119]</a></p>
        <p>本规范中的示例会以 “例如” 开头，
            或以 <code>class="example"</code> 的形式与规范性文本区分，
            例如：</p>
        <div class="example" id="w3c-example">
            <a class="self-link" href="#w3c-example"></a>
            <p>这是信息性示例。</p>
        </div>
        <p>信息性注释以 “Note” 开头，
            并以 <code>class="note"</code> 与规范性文本区分，
            例如：</p>
        <p class="note" role="note">注：这是一条信息性注释。</p>
        <h3 class="no-ref no-num heading settled" id="w3c-conformant-algorithms"><span class="content">一致性算法</span><a
                class="self-link" href="#w3c-conformant-algorithms"></a></h3>
        <p>以命令式短语表达的算法要求（如 "strip any leading space characters" 或 "return false and abort these steps"）
            应按照用来引入算法的关键词（“must”，“should”，“may”等）的含义来解释。</p>
        <p>以算法或具体步骤形式表达的一致性要求，可以用任何方式实现，只要最终结果等价。
            本规范中的算法特别注重易读性，
            并非为了高性能实现，
            鼓励实现者进行优化。</p>
    </div>
    <script src="https://www.w3.org/scripts/TR/2016/fixup.js"></script>
    <h2 class="no-num no-ref heading settled" id="index"><span class="content">索引</span><a class="self-link"
            href="#index"></a></h2>
    <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">本规范定义的术语</span><a
            class="self-link" href="#index-defined-here"></a></h3>
    <ul class="index">
        <li><a href="#active-periodic-sync-registrations">活跃的定期同步注册</a><span>，见 §3</span>
        <li><a href="#periodic-sync-registration-anchor-time">锚点时间</a><span>，见 §4.1</span>
        <li><a href="#dictdef-backgroundsyncoptions">BackgroundSyncOptions</a><span>，见 §8.3</span>
        <li><a href="#dom-periodicsyncevent-periodicsyncevent">constructor(type, init)</a><span>，见 §8.4</span>
        <li><a href="#effective-minimum-sync-interval-for-origin">origin 的有效最小同步间隔</a><span>，见 §4.2</span>
        <li><a href="#fire-a-periodicsync-event">触发 periodicsync 事件</a><span>，见 §8.4.1</span>
        <li><a href="#dom-periodicsyncmanager-gettags">getTags()</a><span>，见 §8.3</span>
        <li><a href="#periodicsync-event-in-the-background">后台</a><span>，见 §2</span>
        <li><a href="#maximum-number-of-retries">最大重试次数</a><span>，见 §4.3</span>
        <li><a href="#periodic-sync-registration-minimum-interval">最小间隔</a><span>，见 §4.1</span>
        <li><a href="#minimum-periodic-sync-interval-across-origins">所有 origin 的最小定期同步间隔</a><span>，见 §4.3</span>
        <li><a href="#minimum-periodic-sync-interval-for-any-origin">任意 origin 的最小定期同步间隔</a><span>，见 §4.3</span>
        <li><a href="#dom-backgroundsyncoptions-mininterval">minInterval</a><span>，见 §8.3</span>
        <li><a href="#dom-serviceworkerglobalscope-onperiodicsync">onperiodicsync</a><span>，见 §8.1</span>
        <li><a href="#dom-serviceworkerregistration-periodicsync">periodicSync</a><span>，见 §8.2</span>
        <li><a href="#periodicsync-event">periodicsync 事件</a><span>，见 §8.4</span>
        <li><a href="#periodicsyncevent">PeriodicSyncEvent</a><span>，见 §8.4</span>
        <li><a href="#dictdef-periodicsynceventinit">PeriodicSyncEventInit</a><span>，见 §8.4</span>
        <li><a href="#dom-periodicsyncevent-periodicsyncevent">PeriodicSyncEvent(type, init)</a><span>，见 §8.4</span>
        <li><a href="#serviceworkerregistration-periodic-sync-manager">定期同步管理器</a><span>，见 §8.2</span>
        <li><a href="#periodicsyncmanager">PeriodicSyncManager</a><span>，见 §8.3</span>
        <li><a href="#periodic-sync-processing-queue">定期同步处理队列</a><span>，见 §3</span>
        <li><a href="#periodic-sync-registration">定期同步注册</a><span>，见 §4.1</span>
        <li><a href="#periodic-sync-scheduler">定期同步调度器</a><span>，见 §4.2</span>
        <li><a href="#process-periodic-sync-registrations">处理定期同步注册</a><span>，见 §7.1</span>
        <li><a href="#dom-periodicsyncmanager-register">register(tag)</a><span>，见 §8.3</span>
        <li><a href="#dom-periodicsyncmanager-register">register(tag, options)</a><span>，见 §8.3</span>
        <li><a href="#respond-to-permission-revocation">响应权限撤销</a><span>，见 §7.2</span>
        <li>
            service worker 注册
            <ul>
                <li><a href="#periodicsyncmanager-service-worker-registration">dfn for PeriodicSyncManager</a><span>，见
                        §8.3</span>
                <li><a href="#periodic-sync-registration-service-worker-registration">dfn for periodic sync
                        registration</a><span>，见 §4.1</span>
            </ul>
        <li><a href="#periodic-sync-registration-state">状态</a><span>，见 §4.1</span>
        <li>
            tag
            <ul>
                <li><a href="#dom-periodicsyncevent-tag">PeriodicSyncEvent 的属性</a><span>，见 §8.4</span>
                <li><a href="#periodicsyncevent-tag">PeriodicSyncEvent 的定义</a><span>，见 §8.4</span>
                <li><a href="#periodic-sync-registration-tag">定期同步注册的定义</a><span>，见 §4.1</span>
                <li><a href="#dom-periodicsynceventinit-tag">PeriodicSyncEventInit 的字典成员</a><span>，见 §8.4</span>
            </ul>
        <li><a href="#periodic-sync-scheduler-time-of-last-fire">最后触发时间</a><span>，见 §4.2</span>
        <li><a href="#dom-periodicsyncmanager-unregister">unregister(tag)</a><span>，见 §8.3</span>
    </ul>
    <aside class="dfn-panel" data-for="term-for-backgroundfetchmanager">
        <a
            href="https://wicg.github.io/background-fetch/#backgroundfetchmanager">https://wicg.github.io/background-fetch/#backgroundfetchmanager</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-backgroundfetchmanager">6. Resource Usage</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-background-fetch">
        <a
            href="https://wicg.github.io/background-fetch/#background-fetch">https://wicg.github.io/background-fetch/#background-fetch</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-background-fetch">6. Resource Usage</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-context-object">
        <a href="https://dom.spec.whatwg.org/#context-object">https://dom.spec.whatwg.org/#context-object</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-context-object">8.2. Extensions to the ServiceWorkerRegistration interface</a> <a
                    href="#ref-for-context-object①">(2)</a>
            <li><a href="#ref-for-context-object②">8.3. PeriodicSyncManager interface</a> <a
                    href="#ref-for-context-object③">(2)</a> <a href="#ref-for-context-object④">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-eventhandler">
        <a
            href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-eventhandler">8.1. Extensions to the ServiceWorkerGlobalScope interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-document-bc">
        <a
            href="https://html.spec.whatwg.org/multipage/browsers.html#concept-document-bc">https://html.spec.whatwg.org/multipage/browsers.html#concept-document-bc</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-document-bc">1.1. Example</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-enqueue-the-following-steps">
        <a
            href="https://html.spec.whatwg.org/multipage/infrastructure.html#enqueue-the-following-steps">https://html.spec.whatwg.org/multipage/infrastructure.html#enqueue-the-following-steps</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-enqueue-the-following-steps">7.1. Process periodic sync registrations</a>
            <li><a href="#ref-for-enqueue-the-following-steps①">7.2. Respond to permission revocation</a>
            <li><a href="#ref-for-enqueue-the-following-steps②">8.3. PeriodicSyncManager interface</a> <a
                    href="#ref-for-enqueue-the-following-steps③">(2)</a> <a
                    href="#ref-for-enqueue-the-following-steps④">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-in-parallel">
        <a
            href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-in-parallel">7.1. Process periodic sync registrations</a>
            <li><a href="#ref-for-in-parallel①">8.4.1. Fire a periodicsync event</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-secure-context">
        <a
            href="https://html.spec.whatwg.org/multipage/webappapis.html#secure-context">https://html.spec.whatwg.org/multipage/webappapis.html#secure-context</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-secure-context">1. Introduction</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-starting-a-new-parallel-queue">
        <a
            href="https://html.spec.whatwg.org/multipage/infrastructure.html#starting-a-new-parallel-queue">https://html.spec.whatwg.org/multipage/infrastructure.html#starting-a-new-parallel-queue</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-starting-a-new-parallel-queue">3. Extensions to service worker registration</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-list-append">
        <a href="https://infra.spec.whatwg.org/#list-append">https://infra.spec.whatwg.org/#list-append</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-list-append">8.3. PeriodicSyncManager interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-assert">
        <a href="https://infra.spec.whatwg.org/#assert">https://infra.spec.whatwg.org/#assert</a><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-assert">8.4.1. Fire a periodicsync event</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-iteration-continue">
        <a
            href="https://infra.spec.whatwg.org/#iteration-continue">https://infra.spec.whatwg.org/#iteration-continue</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-iteration-continue">7.1. Process periodic sync registrations</a> <a
                    href="#ref-for-iteration-continue①">(2)</a> <a href="#ref-for-iteration-continue②">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-list">
        <a href="https://infra.spec.whatwg.org/#list">https://infra.spec.whatwg.org/#list</a><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-list">8.3. PeriodicSyncManager interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-ordered-map">
        <a href="https://infra.spec.whatwg.org/#ordered-map">https://infra.spec.whatwg.org/#ordered-map</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-ordered-map">3. Extensions to service worker registration</a>
            <li><a href="#ref-for-ordered-map①">4.2. Periodic Sync Scheduler</a> <a href="#ref-for-ordered-map②">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-permissionstate-granted">
        <a
            href="https://w3c.github.io/permissions/#dom-permissionstate-granted">https://w3c.github.io/permissions/#dom-permissionstate-granted</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-permissionstate-granted">5.1. Permission</a>
            <li><a href="#ref-for-dom-permissionstate-granted①">8.3. PeriodicSyncManager interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dictdef-permissiondescriptor">
        <a
            href="https://w3c.github.io/permissions/#dictdef-permissiondescriptor">https://w3c.github.io/permissions/#dictdef-permissiondescriptor</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dictdef-permissiondescriptor">5.1. Permission</a>
            <li><a href="#ref-for-dictdef-permissiondescriptor①">8.3. PeriodicSyncManager interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-enumdef-permissionstate">
        <a
            href="https://w3c.github.io/permissions/#enumdef-permissionstate">https://w3c.github.io/permissions/#enumdef-permissionstate</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-enumdef-permissionstate">5.1. Permission</a>
            <li><a href="#ref-for-enumdef-permissionstate①">8.3. PeriodicSyncManager interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-permissiondescriptor-name">
        <a
            href="https://w3c.github.io/permissions/#dom-permissiondescriptor-name">https://w3c.github.io/permissions/#dom-permissiondescriptor-name</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-permissiondescriptor-name">5.1. Permission</a>
            <li><a href="#ref-for-dom-permissiondescriptor-name①">7.2. Respond to permission revocation</a>
            <li><a href="#ref-for-dom-permissiondescriptor-name②">8.3. PeriodicSyncManager interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-cache">
        <a href="https://w3c.github.io/ServiceWorker/#cache">https://w3c.github.io/ServiceWorker/#cache</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-cache">1.1. Example</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-extendableevent">
        <a
            href="https://w3c.github.io/ServiceWorker/#extendableevent">https://w3c.github.io/ServiceWorker/#extendableevent</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-extendableevent">8.4. The periodicsync event</a>
            <li><a href="#ref-for-extendableevent①">8.4.1. Fire a periodicsync event</a> <a
                    href="#ref-for-extendableevent②">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dictdef-extendableeventinit">
        <a
            href="https://w3c.github.io/ServiceWorker/#dictdef-extendableeventinit">https://w3c.github.io/ServiceWorker/#dictdef-extendableeventinit</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dictdef-extendableeventinit">8.4. The periodicsync event</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-serviceworkerglobalscope">
        <a
            href="https://w3c.github.io/ServiceWorker/#serviceworkerglobalscope">https://w3c.github.io/ServiceWorker/#serviceworkerglobalscope</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-serviceworkerglobalscope">8.1. Extensions to the ServiceWorkerGlobalScope
                    interface</a> <a href="#ref-for-serviceworkerglobalscope①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-serviceworkerregistration">
        <a
            href="https://w3c.github.io/ServiceWorker/#serviceworkerregistration">https://w3c.github.io/ServiceWorker/#serviceworkerregistration</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-serviceworkerregistration">8.2. Extensions to the ServiceWorkerRegistration
                    interface</a> <a href="#ref-for-serviceworkerregistration①">(2)</a> <a
                    href="#ref-for-serviceworkerregistration②">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dfn-active-worker">
        <a
            href="https://w3c.github.io/ServiceWorker/#dfn-active-worker">https://w3c.github.io/ServiceWorker/#dfn-active-worker</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dfn-active-worker">8.3. PeriodicSyncManager interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-extendableevent-extend-lifetime-promises">
        <a
            href="https://w3c.github.io/ServiceWorker/#extendableevent-extend-lifetime-promises">https://w3c.github.io/ServiceWorker/#extendableevent-extend-lifetime-promises</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-extendableevent-extend-lifetime-promises">8.4.1. Fire a periodicsync event</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-fire-functional-event">
        <a
            href="https://w3c.github.io/ServiceWorker/#fire-functional-event">https://w3c.github.io/ServiceWorker/#fire-functional-event</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-fire-functional-event">8.4.1. Fire a periodicsync event</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dfn-service-worker-client-frame-type">
        <a
            href="https://w3c.github.io/ServiceWorker/#dfn-service-worker-client-frame-type">https://w3c.github.io/ServiceWorker/#dfn-service-worker-client-frame-type</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dfn-service-worker-client-frame-type">2. Concepts</a>
            <li><a href="#ref-for-dfn-service-worker-client-frame-type①">8.3. PeriodicSyncManager interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-service-worker-client-origin">
        <a
            href="https://w3c.github.io/ServiceWorker/#service-worker-client-origin">https://w3c.github.io/ServiceWorker/#service-worker-client-origin</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-service-worker-client-origin">2. Concepts</a>
            <li><a href="#ref-for-service-worker-client-origin①">4.1. Periodic sync registration</a>
            <li><a href="#ref-for-service-worker-client-origin②">4.2. Periodic Sync Scheduler</a> <a
                    href="#ref-for-service-worker-client-origin③">(2)</a> <a
                    href="#ref-for-service-worker-client-origin④">(3)</a>
            <li><a href="#ref-for-service-worker-client-origin⑤">5.2. Location Tracking</a> <a
                    href="#ref-for-service-worker-client-origin⑥">(2)</a>
            <li><a href="#ref-for-service-worker-client-origin⑦">6. Resource Usage</a>
            <li><a href="#ref-for-service-worker-client-origin⑧">7.1. Process periodic sync registrations</a>
            <li><a href="#ref-for-service-worker-client-origin⑨">7.2. Respond to permission revocation</a> <a
                    href="#ref-for-service-worker-client-origin①⓪">(2)</a>
            <li><a href="#ref-for-service-worker-client-origin①①">8.3. PeriodicSyncManager interface</a>
            <li><a href="#ref-for-service-worker-client-origin①②">8.4.1. Fire a periodicsync event</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dfn-service-worker">
        <a
            href="https://w3c.github.io/ServiceWorker/#dfn-service-worker">https://w3c.github.io/ServiceWorker/#dfn-service-worker</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dfn-service-worker">1.1. Example</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dfn-service-worker-client">
        <a
            href="https://w3c.github.io/ServiceWorker/#dfn-service-worker-client">https://w3c.github.io/ServiceWorker/#dfn-service-worker-client</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dfn-service-worker-client">2. Concepts</a>
            <li><a href="#ref-for-dfn-service-worker-client①">8.3. PeriodicSyncManager interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dfn-service-worker-registration">
        <a
            href="https://w3c.github.io/ServiceWorker/#dfn-service-worker-registration">https://w3c.github.io/ServiceWorker/#dfn-service-worker-registration</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dfn-service-worker-registration">3. Extensions to service worker registration</a>
            <li><a href="#ref-for-dfn-service-worker-registration①">4.1. Periodic sync registration</a>
            <li><a href="#ref-for-dfn-service-worker-registration②">7.1. Process periodic sync registrations</a>
            <li><a href="#ref-for-dfn-service-worker-registration③">8.2. Extensions to the ServiceWorkerRegistration
                    interface</a>
            <li><a href="#ref-for-dfn-service-worker-registration④">8.3. PeriodicSyncManager interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dfn-service-worker-registration-unregistered">
        <a
            href="https://w3c.github.io/ServiceWorker/#dfn-service-worker-registration-unregistered">https://w3c.github.io/ServiceWorker/#dfn-service-worker-registration-unregistered</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dfn-service-worker-registration-unregistered">7.1. Process periodic sync
                    registrations</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-online">
        <a
            href="https://wicg.github.io/background-sync/spec/#online">https://wicg.github.io/background-sync/spec/#online</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-online">7.1. Process periodic sync registrations</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-idl-DOMString">
        <a href="https://heycam.github.io/webidl/#idl-DOMString">https://heycam.github.io/webidl/#idl-DOMString</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-idl-DOMString">3. Extensions to service worker registration</a>
            <li><a href="#ref-for-idl-DOMString①">4.1. Periodic sync registration</a>
            <li><a href="#ref-for-idl-DOMString②">8.3. PeriodicSyncManager interface</a> <a
                    href="#ref-for-idl-DOMString③">(2)</a> <a href="#ref-for-idl-DOMString④">(3)</a>
            <li><a href="#ref-for-idl-DOMString⑤">8.4. The periodicsync event</a> <a
                    href="#ref-for-idl-DOMString⑥">(2)</a> <a href="#ref-for-idl-DOMString⑦">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-EnforceRange">
        <a href="https://heycam.github.io/webidl/#EnforceRange">https://heycam.github.io/webidl/#EnforceRange</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-EnforceRange">8.3. PeriodicSyncManager interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-Exposed">
        <a href="https://heycam.github.io/webidl/#Exposed">https://heycam.github.io/webidl/#Exposed</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-Exposed">8.2. Extensions to the ServiceWorkerRegistration interface</a>
            <li><a href="#ref-for-Exposed①">8.3. PeriodicSyncManager interface</a>
            <li><a href="#ref-for-Exposed②">8.4. The periodicsync event</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-invalidaccesserror">
        <a
            href="https://heycam.github.io/webidl/#invalidaccesserror">https://heycam.github.io/webidl/#invalidaccesserror</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-invalidaccesserror">8.3. PeriodicSyncManager interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-invalidstateerror">
        <a
            href="https://heycam.github.io/webidl/#invalidstateerror">https://heycam.github.io/webidl/#invalidstateerror</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-invalidstateerror">8.3. PeriodicSyncManager interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-notallowederror">
        <a
            href="https://heycam.github.io/webidl/#notallowederror">https://heycam.github.io/webidl/#notallowederror</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-notallowederror">8.3. PeriodicSyncManager interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-idl-promise">
        <a href="https://heycam.github.io/webidl/#idl-promise">https://heycam.github.io/webidl/#idl-promise</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-idl-promise">8.3. PeriodicSyncManager interface</a> <a
                    href="#ref-for-idl-promise①">(2)</a> <a href="#ref-for-idl-promise②">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-a-new-promise">
        <a href="https://heycam.github.io/webidl/#a-new-promise">https://heycam.github.io/webidl/#a-new-promise</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-a-new-promise">8.3. PeriodicSyncManager interface</a> <a
                    href="#ref-for-a-new-promise①">(2)</a> <a href="#ref-for-a-new-promise②">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-reject">
        <a href="https://heycam.github.io/webidl/#reject">https://heycam.github.io/webidl/#reject</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-reject">8.3. PeriodicSyncManager interface</a> <a href="#ref-for-reject①">(2)</a> <a
                    href="#ref-for-reject②">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-resolve">
        <a href="https://heycam.github.io/webidl/#resolve">https://heycam.github.io/webidl/#resolve</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-resolve">8.3. PeriodicSyncManager interface</a> <a href="#ref-for-resolve①">(2)</a> <a
                    href="#ref-for-resolve②">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-idl-sequence">
        <a href="https://heycam.github.io/webidl/#idl-sequence">https://heycam.github.io/webidl/#idl-sequence</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-idl-sequence">8.3. PeriodicSyncManager interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-idl-undefined">
        <a href="https://heycam.github.io/webidl/#idl-undefined">https://heycam.github.io/webidl/#idl-undefined</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-idl-undefined">8.3. PeriodicSyncManager interface</a> <a
                    href="#ref-for-idl-undefined①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-idl-unsigned-long-long">
        <a
            href="https://heycam.github.io/webidl/#idl-unsigned-long-long">https://heycam.github.io/webidl/#idl-unsigned-long-long</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-idl-unsigned-long-long">8.3. PeriodicSyncManager interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-upon-fulfillment">
        <a
            href="https://heycam.github.io/webidl/#upon-fulfillment">https://heycam.github.io/webidl/#upon-fulfillment</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-upon-fulfillment">8.4.1. Fire a periodicsync event</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-upon-rejection">
        <a href="https://heycam.github.io/webidl/#upon-rejection">https://heycam.github.io/webidl/#upon-rejection</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-upon-rejection">8.4.1. Fire a periodicsync event</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-wait-for-all">
        <a href="https://heycam.github.io/webidl/#wait-for-all">https://heycam.github.io/webidl/#wait-for-all</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-wait-for-all">8.4.1. Fire a periodicsync event</a>
        </ul>
    </aside>
    <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">引用中定义的术语</span><a
            class="self-link" href="#index-defined-elsewhere"></a></h3>
    <ul class="index">
        <li>
            <a data-link-type="biblio">[BACKGROUND-FETCH]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-backgroundfetchmanager">BackgroundFetchManager</span>
                <li><span class="dfn-paneled" id="term-for-background-fetch">background fetch（后台获取）</span>
            </ul>
        <li>
            <a data-link-type="biblio">[DOM]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-context-object">context object（上下文对象）</span>
            </ul>
        <li>
            <a data-link-type="biblio">[HTML]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-eventhandler">EventHandler（事件处理器）</span>
                <li><span class="dfn-paneled" id="term-for-concept-document-bc">browsing context（浏览上下文）</span>
                <li><span class="dfn-paneled" id="term-for-enqueue-the-following-steps">enqueue the following
                        steps（入队以下步骤）</span>
                <li><span class="dfn-paneled" id="term-for-in-parallel">in parallel（并行）</span>
                <li><span class="dfn-paneled" id="term-for-secure-context">secure context（安全上下文）</span>
                <li><span class="dfn-paneled" id="term-for-starting-a-new-parallel-queue">starting a new parallel
                        queue（启动新的并行队列）</span>
            </ul>
        <li>
            <a data-link-type="biblio">[INFRA]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-list-append">append（追加）</span>
                <li><span class="dfn-paneled" id="term-for-assert">assert（断言）</span>
                <li><span class="dfn-paneled" id="term-for-iteration-continue">continue（继续）</span>
                <li><span class="dfn-paneled" id="term-for-list">list（列表）</span>
                <li><span class="dfn-paneled" id="term-for-ordered-map">map（映射）</span>
            </ul>
        <li>
            <a data-link-type="biblio">[permissions]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-dom-permissionstate-granted">"granted"（已授予）</span>
                <li><span class="dfn-paneled"
                        id="term-for-dictdef-permissiondescriptor">PermissionDescriptor（权限描述符）</span>
                <li><span class="dfn-paneled" id="term-for-enumdef-permissionstate">PermissionState（权限状态）</span>
                <li><span class="dfn-paneled" id="term-for-dom-permissiondescriptor-name">name（名称）</span>
            </ul>
        <li>
            <a data-link-type="biblio">[service-workers-1]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-cache">Cache（缓存）</span>
                <li><span class="dfn-paneled" id="term-for-extendableevent">ExtendableEvent（可扩展事件）</span>
                <li><span class="dfn-paneled"
                        id="term-for-dictdef-extendableeventinit">ExtendableEventInit（可扩展事件初始化）</span>
                <li><span class="dfn-paneled" id="term-for-serviceworkerglobalscope">ServiceWorkerGlobalScope（Service
                        Worker 全局作用域）</span>
                <li><span class="dfn-paneled" id="term-for-serviceworkerregistration">ServiceWorkerRegistration（Service
                        Worker 注册）</span>
                <li><span class="dfn-paneled" id="term-for-dfn-active-worker">active worker（活跃 worker）</span>
                <li><span class="dfn-paneled" id="term-for-extendableevent-extend-lifetime-promises">extend lifetime
                        promises（延长生命周期的 promise）</span>
                <li><span class="dfn-paneled" id="term-for-fire-functional-event">fire functional event（触发功能性事件）</span>
                <li><span class="dfn-paneled" id="term-for-dfn-service-worker-client-frame-type">frame type（帧类型）</span>
                <li><span class="dfn-paneled" id="term-for-service-worker-client-origin">origin（源）</span>
                <li><span class="dfn-paneled" id="term-for-dfn-service-worker">service worker（Service Worker）</span>
                <li><span class="dfn-paneled" id="term-for-dfn-service-worker-client">service worker client（Service
                        Worker 客户端）</span>
                <li><span class="dfn-paneled" id="term-for-dfn-service-worker-registration">service worker
                        registration（Service Worker 注册）</span>
                <li><span class="dfn-paneled"
                        id="term-for-dfn-service-worker-registration-unregistered">unregistered（未注册）</span>
            </ul>
        <li>
            <a data-link-type="biblio">[WEB-BACKGROUND-SYNC]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-online">online（在线）</span>
            </ul>
        <li>
            <a data-link-type="biblio">[WebIDL]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-idl-DOMString">DOMString</span>
                <li><span class="dfn-paneled" id="term-for-EnforceRange">EnforceRange（强制范围）</span>
                <li><span class="dfn-paneled" id="term-for-Exposed">Exposed（暴露）</span>
                <li><span class="dfn-paneled" id="term-for-invalidaccesserror">InvalidAccessError（无效访问错误）</span>
                <li><span class="dfn-paneled" id="term-for-invalidstateerror">InvalidStateError（无效状态错误）</span>
                <li><span class="dfn-paneled" id="term-for-notallowederror">NotAllowedError（不允许的错误）</span>
                <li><span class="dfn-paneled" id="term-for-idl-promise">Promise</span>
                <li><span class="dfn-paneled" id="term-for-a-new-promise">a new promise（新 Promise）</span>
                <li><span class="dfn-paneled" id="term-for-reject">reject（拒绝）</span>
                <li><span class="dfn-paneled" id="term-for-resolve">resolve（解决）</span>
                <li><span class="dfn-paneled" id="term-for-idl-sequence">sequence（序列）</span>
                <li><span class="dfn-paneled" id="term-for-idl-undefined">undefined（未定义）</span>
                <li><span class="dfn-paneled" id="term-for-idl-unsigned-long-long">unsigned long long（无符号长整型）</span>
                <li><span class="dfn-paneled" id="term-for-upon-fulfillment">upon fulfillment（完成时）</span>
                <li><span class="dfn-paneled" id="term-for-upon-rejection">upon rejection（拒绝时）</span>
                <li><span class="dfn-paneled" id="term-for-wait-for-all">waiting for all（全部等待）</span>
            </ul>
    </ul>
    <h2 class="no-num no-ref heading settled" id="references"><span class="content">参考文献</span><a class="self-link"
            href="#references"></a></h2>
    <h3 class="no-num no-ref heading settled" id="normative"><span class="content">规范性引用</span><a class="self-link"
            href="#normative"></a></h3>
    <dl>
        <dt id="biblio-background-fetch">[BACKGROUND-FETCH]
        <dd><a href="https://wicg.github.io/background-fetch/">后台获取（Background Fetch）</a>. cg-draft. URL: <a
                href="https://wicg.github.io/background-fetch/">https://wicg.github.io/background-fetch/</a>
        <dt id="biblio-dom">[DOM]
        <dd>Anne van Kesteren. <a href="https://dom.spec.whatwg.org/">DOM 标准</a>. Living Standard. URL: <a
                href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
        <dt id="biblio-html">[HTML]
        <dd>Anne van Kesteren; 等. <a href="https://html.spec.whatwg.org/multipage/">HTML 标准</a>. Living
            Standard. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
        <dt id="biblio-infra">[INFRA]
        <dd>Anne van Kesteren; Domenic Denicola. <a href="https://infra.spec.whatwg.org/">Infra 标准</a>. Living
            Standard. URL: <a href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
        <dt id="biblio-permissions">[PERMISSIONS]
        <dd>Mounir Lamouri; Marcos Caceres; Jeffrey Yasskin. <a
                href="https://www.w3.org/TR/permissions/">Permissions</a>. 2020年7月20日. WD. URL: <a
                href="https://www.w3.org/TR/permissions/">https://www.w3.org/TR/permissions/</a>
        <dt id="biblio-rfc2119">[RFC2119]
        <dd>S. Bradner. <a href="https://tools.ietf.org/html/rfc2119">RFC 中用于指明需求级别的关键词</a>. 1997年3月. 最佳实践. URL: <a
                href="https://tools.ietf.org/html/rfc2119">https://tools.ietf.org/html/rfc2119</a>
        <dt id="biblio-service-workers-1">[SERVICE-WORKERS-1]
        <dd>Alex Russell; 等. <a href="https://www.w3.org/TR/service-workers-1/">Service Workers 1</a>. 2019年11月19日. CR.
            URL: <a href="https://www.w3.org/TR/service-workers-1/">https://www.w3.org/TR/service-workers-1/</a>
        <dt id="biblio-web-background-sync">[WEB-BACKGROUND-SYNC]
        <dd><a href="https://wicg.github.io/background-sync/spec/">Web 后台同步（Web Background Synchronization）</a>.
            cg-draft. URL: <a
                href="https://wicg.github.io/background-sync/spec/">https://wicg.github.io/background-sync/spec/</a>
        <dt id="biblio-webidl">[WebIDL]
        <dd>Boris Zbarsky. <a href="https://heycam.github.io/webidl/">Web IDL</a>. 2016年12月15日. ED. URL: <a
                href="https://heycam.github.io/webidl/">https://heycam.github.io/webidl/</a>
    </dl>
    <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL 索引</span><a class="self-link"
            href="#idl-index"></a></h2>
    <pre class="idl highlight def"><c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://w3c.github.io/ServiceWorker/#serviceworkerglobalscope"><c- g>ServiceWorkerGlobalScope</c-></a> {
    <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><c- n>EventHandler</c-></a> <a data-type="EventHandler" href="#dom-serviceworkerglobalscope-onperiodicsync"><code><c- g>onperiodicsync</c-></code></a>;
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed"><c- g>Exposed</c-></a>=(<c- n>Window</c->,<c- n>Worker</c->)]
<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://w3c.github.io/ServiceWorker/#serviceworkerregistration"><c- g>ServiceWorkerRegistration</c-></a> {
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#periodicsyncmanager"><c- n>PeriodicSyncManager</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="PeriodicSyncManager" href="#dom-serviceworkerregistration-periodicsync"><c- g>periodicSync</c-></a>;
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed"><c- g>Exposed</c-></a>=(<c- n>Window</c->,<c- n>Worker</c->)]
<c- b>interface</c-> <a href="#periodicsyncmanager"><code><c- g>PeriodicSyncManager</c-></code></a> {
    <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-undefined"><c- b>undefined</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-periodicsyncmanager-register"><c- g>register</c-></a>(<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString"><c- b>DOMString</c-></a> <a href="#dom-periodicsyncmanager-register-tag-options-tag"><code><c- g>tag</c-></code></a>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-backgroundsyncoptions"><c- n>BackgroundSyncOptions</c-></a> <a href="#dom-periodicsyncmanager-register-tag-options-options"><code><c- g>options</c-></code></a> = {});
    <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="dfn" href="https://heycam.github.io/webidl/#idl-sequence"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString"><c- b>DOMString</c-></a>>> <a class="idl-code" data-link-type="method" href="#dom-periodicsyncmanager-gettags"><c- g>getTags</c-></a>();
    <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-undefined"><c- b>undefined</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-periodicsyncmanager-unregister"><c- g>unregister</c-></a>(<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString"><c- b>DOMString</c-></a> <a href="#dom-periodicsyncmanager-unregister-tag-tag"><code><c- g>tag</c-></code></a>);
};

<c- b>dictionary</c-> <a href="#dictdef-backgroundsyncoptions"><code><c- g>BackgroundSyncOptions</c-></code></a> {
    [<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#EnforceRange"><c- g>EnforceRange</c-></a>] <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-unsigned-long-long"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a> <a data-default="0" data-type="unsigned long long " href="#dom-backgroundsyncoptions-mininterval"><code><c- g>minInterval</c-></code></a> = 0;
};

<c- b>dictionary</c-> <a href="#dictdef-periodicsynceventinit"><code><c- g>PeriodicSyncEventInit</c-></code></a> : <a data-link-type="idl-name" href="https://w3c.github.io/ServiceWorker/#dictdef-extendableeventinit"><c- n>ExtendableEventInit</c-></a> {
    <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString"><c- b>DOMString</c-></a> <a data-type="DOMString " href="#dom-periodicsynceventinit-tag"><code><c- g>tag</c-></code></a>;
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed"><c- g>Exposed</c-></a>=<c- n>ServiceWorker</c->]
<c- b>interface</c-> <a href="#periodicsyncevent"><code><c- g>PeriodicSyncEvent</c-></code></a> : <a data-link-type="idl-name" href="https://w3c.github.io/ServiceWorker/#extendableevent"><c- n>ExtendableEvent</c-></a> {
    <a href="#dom-periodicsyncevent-periodicsyncevent"><code><c- g>constructor</c-></code></a>(<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString"><c- b>DOMString</c-></a> <a href="#dom-periodicsyncevent-periodicsyncevent-type-init-type"><code><c- g>type</c-></code></a>, <a data-link-type="idl-name" href="#dictdef-periodicsynceventinit"><c- n>PeriodicSyncEventInit</c-></a> <a href="#dom-periodicsyncevent-periodicsyncevent-type-init-init"><code><c- g>init</c-></code></a>);
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString"><c- b>DOMString</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="DOMString" href="#dom-periodicsyncevent-tag"><c- g>tag</c-></a>;
};

</pre>
    <aside class="dfn-panel" data-for="periodicsync-event-in-the-background">
        <b><a href="#periodicsync-event-in-the-background">#periodicsync-event-in-the-background</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-periodicsync-event-in-the-background">5.2. Location Tracking</a>
            <li><a href="#ref-for-periodicsync-event-in-the-background①">5.3. History Leaking</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="active-periodic-sync-registrations">
        <b><a href="#active-periodic-sync-registrations">#active-periodic-sync-registrations</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-active-periodic-sync-registrations">4.2. Periodic Sync Scheduler</a> <a
                    href="#ref-for-active-periodic-sync-registrations①">(2)</a>
            <li><a href="#ref-for-active-periodic-sync-registrations②">7.1. Process periodic sync registrations</a>
            <li><a href="#ref-for-active-periodic-sync-registrations③">7.2. Respond to permission revocation</a> <a
                    href="#ref-for-active-periodic-sync-registrations④">(2)</a>
            <li><a href="#ref-for-active-periodic-sync-registrations⑤">8.3. PeriodicSyncManager interface</a> <a
                    href="#ref-for-active-periodic-sync-registrations⑥">(2)</a> <a
                    href="#ref-for-active-periodic-sync-registrations⑦">(3)</a> <a
                    href="#ref-for-active-periodic-sync-registrations⑧">(4)</a> <a
                    href="#ref-for-active-periodic-sync-registrations⑨">(5)</a>
            <li><a href="#ref-for-active-periodic-sync-registrations①⓪">8.4.1. Fire a periodicsync event</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="periodic-sync-processing-queue">
        <b><a href="#periodic-sync-processing-queue">#periodic-sync-processing-queue</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-periodic-sync-processing-queue">7.1. Process periodic sync registrations</a>
            <li><a href="#ref-for-periodic-sync-processing-queue①">7.2. Respond to permission revocation</a>
            <li><a href="#ref-for-periodic-sync-processing-queue②">8.3. PeriodicSyncManager interface</a> <a
                    href="#ref-for-periodic-sync-processing-queue③">(2)</a> <a
                    href="#ref-for-periodic-sync-processing-queue④">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="periodic-sync-registration">
        <b><a href="#periodic-sync-registration">#periodic-sync-registration</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-periodic-sync-registration">2. Concepts</a>
            <li><a href="#ref-for-periodic-sync-registration①">3. Extensions to service worker registration</a>
            <li><a href="#ref-for-periodic-sync-registration②">4.1. Periodic sync registration</a>
            <li><a href="#ref-for-periodic-sync-registration③">4.3. Constants</a>
            <li><a href="#ref-for-periodic-sync-registration④">5.1. Permission</a>
            <li><a href="#ref-for-periodic-sync-registration⑤">5.3. History Leaking</a> <a
                    href="#ref-for-periodic-sync-registration⑥">(2)</a>
            <li><a href="#ref-for-periodic-sync-registration⑦">7.1. Process periodic sync registrations</a> <a
                    href="#ref-for-periodic-sync-registration⑧">(2)</a>
            <li><a href="#ref-for-periodic-sync-registration⑨">7.2. Respond to permission revocation</a>
            <li><a href="#ref-for-periodic-sync-registration①⓪">8.3. PeriodicSyncManager interface</a> <a
                    href="#ref-for-periodic-sync-registration①①">(2)</a> <a
                    href="#ref-for-periodic-sync-registration①②">(3)</a>
            <li><a href="#ref-for-periodic-sync-registration①③">8.4.1. Fire a periodicsync event</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="periodic-sync-registration-service-worker-registration">
        <b><a
                href="#periodic-sync-registration-service-worker-registration">#periodic-sync-registration-service-worker-registration</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-periodic-sync-registration-service-worker-registration">2. Concepts</a>
            <li><a href="#ref-for-periodic-sync-registration-service-worker-registration①">4.2. Periodic Sync
                    Scheduler</a>
            <li><a href="#ref-for-periodic-sync-registration-service-worker-registration②">7.1. Process periodic sync
                    registrations</a>
            <li><a href="#ref-for-periodic-sync-registration-service-worker-registration③">7.2. Respond to permission
                    revocation</a>
            <li><a href="#ref-for-periodic-sync-registration-service-worker-registration④">8.3. PeriodicSyncManager
                    interface</a>
            <li><a href="#ref-for-periodic-sync-registration-service-worker-registration⑤">8.4.1. Fire a periodicsync
                    event</a> <a href="#ref-for-periodic-sync-registration-service-worker-registration⑥">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="periodic-sync-registration-tag">
        <b><a href="#periodic-sync-registration-tag">#periodic-sync-registration-tag</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-periodic-sync-registration-tag">8.3. PeriodicSyncManager interface</a> <a
                    href="#ref-for-periodic-sync-registration-tag①">(2)</a> <a
                    href="#ref-for-periodic-sync-registration-tag②">(3)</a> <a
                    href="#ref-for-periodic-sync-registration-tag③">(4)</a>
            <li><a href="#ref-for-periodic-sync-registration-tag④">8.4. The periodicsync event</a>
            <li><a href="#ref-for-periodic-sync-registration-tag⑤">8.4.1. Fire a periodicsync event</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="periodic-sync-registration-minimum-interval">
        <b><a
                href="#periodic-sync-registration-minimum-interval">#periodic-sync-registration-minimum-interval</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-periodic-sync-registration-minimum-interval">4.1. Periodic sync registration</a>
            <li><a href="#ref-for-periodic-sync-registration-minimum-interval①">7.1. Process periodic sync
                    registrations</a>
            <li><a href="#ref-for-periodic-sync-registration-minimum-interval②">8.3. PeriodicSyncManager interface</a>
                <a href="#ref-for-periodic-sync-registration-minimum-interval③">(2)</a> <a
                    href="#ref-for-periodic-sync-registration-minimum-interval④">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="periodic-sync-registration-anchor-time">
        <b><a
                href="#periodic-sync-registration-anchor-time">#periodic-sync-registration-anchor-time</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-periodic-sync-registration-anchor-time">7.1. Process periodic sync registrations</a>
            <li><a href="#ref-for-periodic-sync-registration-anchor-time①">8.3. PeriodicSyncManager interface</a>
            <li><a href="#ref-for-periodic-sync-registration-anchor-time②">8.4.1. Fire a periodicsync event</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="periodic-sync-registration-state">
        <b><a href="#periodic-sync-registration-state">#periodic-sync-registration-state</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-periodic-sync-registration-state">7.1. Process periodic sync registrations</a>
            <li><a href="#ref-for-periodic-sync-registration-state①">8.3. PeriodicSyncManager interface</a> <a
                    href="#ref-for-periodic-sync-registration-state②">(2)</a> <a
                    href="#ref-for-periodic-sync-registration-state③">(3)</a>
            <li><a href="#ref-for-periodic-sync-registration-state④">8.4.1. Fire a periodicsync event</a> <a
                    href="#ref-for-periodic-sync-registration-state⑤">(2)</a> <a
                    href="#ref-for-periodic-sync-registration-state⑥">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="periodic-sync-scheduler">
        <b><a href="#periodic-sync-scheduler">#periodic-sync-scheduler</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-periodic-sync-scheduler">4.2. Periodic Sync Scheduler</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="periodic-sync-scheduler-time-of-last-fire">
        <b><a
                href="#periodic-sync-scheduler-time-of-last-fire">#periodic-sync-scheduler-time-of-last-fire</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-periodic-sync-scheduler-time-of-last-fire">7.1. Process periodic sync
                    registrations</a>
            <li><a href="#ref-for-periodic-sync-scheduler-time-of-last-fire①">8.4.1. Fire a periodicsync event</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="effective-minimum-sync-interval-for-origin">
        <b><a
                href="#effective-minimum-sync-interval-for-origin">#effective-minimum-sync-interval-for-origin</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-effective-minimum-sync-interval-for-origin">4.2. Periodic Sync Scheduler</a>
            <li><a href="#ref-for-effective-minimum-sync-interval-for-origin①">7.1. Process periodic sync
                    registrations</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="minimum-periodic-sync-interval-for-any-origin">
        <b><a
                href="#minimum-periodic-sync-interval-for-any-origin">#minimum-periodic-sync-interval-for-any-origin</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-minimum-periodic-sync-interval-for-any-origin">4.2. Periodic Sync Scheduler</a>
            <li><a href="#ref-for-minimum-periodic-sync-interval-for-any-origin①">4.3. Constants</a> <a
                    href="#ref-for-minimum-periodic-sync-interval-for-any-origin②">(2)</a> <a
                    href="#ref-for-minimum-periodic-sync-interval-for-any-origin③">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="minimum-periodic-sync-interval-across-origins">
        <b><a
                href="#minimum-periodic-sync-interval-across-origins">#minimum-periodic-sync-interval-across-origins</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-minimum-periodic-sync-interval-across-origins">4.3. Constants</a> <a
                    href="#ref-for-minimum-periodic-sync-interval-across-origins①">(2)</a>
            <li><a href="#ref-for-minimum-periodic-sync-interval-across-origins②">7.1. Process periodic sync
                    registrations</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="maximum-number-of-retries">
        <b><a href="#maximum-number-of-retries">#maximum-number-of-retries</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-maximum-number-of-retries">4.3. Constants</a>
            <li><a href="#ref-for-maximum-number-of-retries①">8.4.1. Fire a periodicsync event</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="process-periodic-sync-registrations">
        <b><a href="#process-periodic-sync-registrations">#process-periodic-sync-registrations</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-process-periodic-sync-registrations">4.2. Periodic Sync Scheduler</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="respond-to-permission-revocation">
        <b><a href="#respond-to-permission-revocation">#respond-to-permission-revocation</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-respond-to-permission-revocation">7.2. Respond to permission revocation</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="serviceworkerregistration-periodic-sync-manager">
        <b><a
                href="#serviceworkerregistration-periodic-sync-manager">#serviceworkerregistration-periodic-sync-manager</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-serviceworkerregistration-periodic-sync-manager">8.2. Extensions to the
                    ServiceWorkerRegistration interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-serviceworkerregistration-periodicsync">
        <b><a
                href="#dom-serviceworkerregistration-periodicsync">#dom-serviceworkerregistration-periodicsync</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-serviceworkerregistration-periodicsync">8.2. Extensions to the
                    ServiceWorkerRegistration interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="periodicsyncmanager">
        <b><a href="#periodicsyncmanager">#periodicsyncmanager</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-periodicsyncmanager">8.2. Extensions to the ServiceWorkerRegistration interface</a> <a
                    href="#ref-for-periodicsyncmanager①">(2)</a> <a href="#ref-for-periodicsyncmanager②">(3)</a>
            <li><a href="#ref-for-periodicsyncmanager③">8.3. PeriodicSyncManager interface</a> <a
                    href="#ref-for-periodicsyncmanager④">(2)</a> <a href="#ref-for-periodicsyncmanager⑤">(3)</a> <a
                    href="#ref-for-periodicsyncmanager⑥">(4)</a> <a href="#ref-for-periodicsyncmanager⑦">(5)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dictdef-backgroundsyncoptions">
        <b><a href="#dictdef-backgroundsyncoptions">#dictdef-backgroundsyncoptions</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dictdef-backgroundsyncoptions">8.3. PeriodicSyncManager interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-backgroundsyncoptions-mininterval">
        <b><a href="#dom-backgroundsyncoptions-mininterval">#dom-backgroundsyncoptions-mininterval</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-backgroundsyncoptions-mininterval">8.3. PeriodicSyncManager interface</a> <a
                    href="#ref-for-dom-backgroundsyncoptions-mininterval①">(2)</a> <a
                    href="#ref-for-dom-backgroundsyncoptions-mininterval②">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="periodicsyncmanager-service-worker-registration">
        <b><a
                href="#periodicsyncmanager-service-worker-registration">#periodicsyncmanager-service-worker-registration</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-periodicsyncmanager-service-worker-registration">8.2. Extensions to the
                    ServiceWorkerRegistration interface</a>
            <li><a href="#ref-for-periodicsyncmanager-service-worker-registration①">8.3. PeriodicSyncManager
                    interface</a> <a href="#ref-for-periodicsyncmanager-service-worker-registration②">(2)</a> <a
                    href="#ref-for-periodicsyncmanager-service-worker-registration③">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-periodicsyncmanager-register">
        <b><a href="#dom-periodicsyncmanager-register">#dom-periodicsyncmanager-register</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-periodicsyncmanager-register">8.3. PeriodicSyncManager interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-periodicsyncmanager-gettags">
        <b><a href="#dom-periodicsyncmanager-gettags">#dom-periodicsyncmanager-gettags</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-periodicsyncmanager-gettags">8.3. PeriodicSyncManager interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-periodicsyncmanager-unregister">
        <b><a href="#dom-periodicsyncmanager-unregister">#dom-periodicsyncmanager-unregister</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-periodicsyncmanager-unregister">8.3. PeriodicSyncManager interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="periodicsync-event">
        <b><a href="#periodicsync-event">#periodicsync-event</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-periodicsync-event">1.1. Example</a>
            <li><a href="#ref-for-periodicsync-event①">2. Concepts</a>
            <li><a href="#ref-for-periodicsync-event②">4.1. Periodic sync registration</a> <a
                    href="#ref-for-periodicsync-event③">(2)</a>
            <li><a href="#ref-for-periodicsync-event④">4.2. Periodic Sync Scheduler</a> <a
                    href="#ref-for-periodicsync-event⑤">(2)</a>
            <li><a href="#ref-for-periodicsync-event⑥">4.3. Constants</a> <a href="#ref-for-periodicsync-event⑦">(2)</a>
                <a href="#ref-for-periodicsync-event⑧">(3)</a> <a href="#ref-for-periodicsync-event⑨">(4)</a>
            <li><a href="#ref-for-periodicsync-event①⓪">5.1. Permission</a>
            <li><a href="#ref-for-periodicsync-event①①">5.2. Location Tracking</a> <a
                    href="#ref-for-periodicsync-event①②">(2)</a> <a href="#ref-for-periodicsync-event①③">(3)</a>
            <li><a href="#ref-for-periodicsync-event①④">5.3. History Leaking</a> <a
                    href="#ref-for-periodicsync-event①⑤">(2)</a> <a href="#ref-for-periodicsync-event①⑥">(3)</a> <a
                    href="#ref-for-periodicsync-event①⑦">(4)</a>
            <li><a href="#ref-for-periodicsync-event①⑧">6. Resource Usage</a> <a
                    href="#ref-for-periodicsync-event①⑨">(2)</a>
            <li><a href="#ref-for-periodicsync-event②⓪">8.4.1. Fire a periodicsync event</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dictdef-periodicsynceventinit">
        <b><a href="#dictdef-periodicsynceventinit">#dictdef-periodicsynceventinit</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dictdef-periodicsynceventinit">8.4. The periodicsync event</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="periodicsyncevent">
        <b><a href="#periodicsyncevent">#periodicsyncevent</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-periodicsyncevent">8.4. The periodicsync event</a>
            <li><a href="#ref-for-periodicsyncevent①">8.4.1. Fire a periodicsync event</a> <a
                    href="#ref-for-periodicsyncevent②">(2)</a> <a href="#ref-for-periodicsyncevent③">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="periodicsyncevent-tag">
        <b><a href="#periodicsyncevent-tag">#periodicsyncevent-tag</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-periodicsyncevent-tag">8.4.1. Fire a periodicsync event</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-periodicsyncevent-tag">
        <b><a href="#dom-periodicsyncevent-tag">#dom-periodicsyncevent-tag</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-periodicsyncevent-tag">8.4. The periodicsync event</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="fire-a-periodicsync-event">
        <b><a href="#fire-a-periodicsync-event">#fire-a-periodicsync-event</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-fire-a-periodicsync-event">7.1. Process periodic sync registrations</a>
            <li><a href="#ref-for-fire-a-periodicsync-event①">8.4.1. Fire a periodicsync event</a>
        </ul>
    </aside>
    <script>/* script-dfn-panel */

        document.body.addEventListener("click", function (e) {
            var queryAll = function (sel) { return [].slice.call(document.querySelectorAll(sel)); }
            // Find the dfn element or panel, if any, that was clicked on.
            var el = e.target;
            var target;
            var hitALink = false;
            while (el.parentElement) {
                if (el.tagName == "A") {
                    // Clicking on a link in a <dfn> shouldn't summon the panel
                    hitALink = true;
                }
                if (el.classList.contains("dfn-paneled")) {
                    target = "dfn";
                    break;
                }
                if (el.classList.contains("dfn-panel")) {
                    target = "dfn-panel";
                    break;
                }
                el = el.parentElement;
            }
            if (target != "dfn-panel") {
                // Turn off any currently "on" or "activated" panels.
                queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(function (el) {
                    el.classList.remove("on");
                    el.classList.remove("activated");
                });
            }
            if (target == "dfn" && !hitALink) {
                // open the panel
                var dfnPanel = document.querySelector(".dfn-panel[data-for='" + el.id + "']");
                if (dfnPanel) {
                    dfnPanel.classList.add("on");
                    var rect = el.getBoundingClientRect();
                    dfnPanel.style.left = window.scrollX + rect.right + 5 + "px";
                    dfnPanel.style.top = window.scrollY + rect.top + "px";
                    var panelRect = dfnPanel.getBoundingClientRect();
                    var panelWidth = panelRect.right - panelRect.left;
                    if (panelRect.right > document.body.scrollWidth && (rect.left - (panelWidth + 5)) > 0) {
                        // Reposition, because the panel is overflowing
                        dfnPanel.style.left = window.scrollX + rect.left - (panelWidth + 5) + "px";
                    }
                } else {
                    console.log("Couldn't find .dfn-panel[data-for='" + el.id + "']");
                }
            } else if (target == "dfn-panel") {
                // Switch it to "activated" state, which pins it.
                el.classList.add("activated");
                el.style.left = null;
                el.style.top = null;
            }

        });
    </script>
    <script>/* script-mdn-anno */

        document.body.addEventListener("click", (e) => {
            if (e.target.closest(".mdn-anno-btn")) {
                e.target.closest(".mdn-anno").classList.toggle("wrapped");
            }
        });
    </script>
    <script>/* script-var-click-highlighting */

        document.addEventListener("click", e => {
            if (e.target.nodeName == "VAR") {
                highlightSameAlgoVars(e.target);
            }
        });
        {
            const indexCounts = new Map();
            const indexNames = new Map();
            function highlightSameAlgoVars(v) {
                // Find the algorithm container.
                let algoContainer = null;
                let searchEl = v;
                while (algoContainer == null && searchEl != document.body) {
                    searchEl = searchEl.parentNode;
                    if (searchEl.hasAttribute("data-algorithm")) {
                        algoContainer = searchEl;
                    }
                }

                // Not highlighting document-global vars,
                // too likely to be unrelated.
                if (algoContainer == null) return;

                const algoName = algoContainer.getAttribute("data-algorithm");
                const varName = getVarName(v);
                const addClass = !v.classList.contains("selected");
                let highlightClass = null;
                if (addClass) {
                    const index = chooseHighlightIndex(algoName, varName);
                    indexCounts.get(algoName)[index] += 1;
                    indexNames.set(algoName + "///" + varName, index);
                    highlightClass = nameFromIndex(index);
                } else {
                    const index = previousHighlightIndex(algoName, varName);
                    indexCounts.get(algoName)[index] -= 1;
                    highlightClass = nameFromIndex(index);
                }

                // Find all same-name vars, and toggle their class appropriately.
                for (const el of algoContainer.querySelectorAll("var")) {
                    if (getVarName(el) == varName) {
                        el.classList.toggle("selected", addClass);
                        el.classList.toggle(highlightClass, addClass);
                    }
                }
            }
            function getVarName(el) {
                return el.textContent.replace(/(\s|\xa0)+/, " ").trim();
            }
            function chooseHighlightIndex(algoName, varName) {
                let indexes = null;
                if (indexCounts.has(algoName)) {
                    indexes = indexCounts.get(algoName);
                } else {
                    // 7 classes right now
                    indexes = [0, 0, 0, 0, 0, 0, 0];
                    indexCounts.set(algoName, indexes);
                }

                // If the element was recently unclicked,
                // *and* that color is still unclaimed,
                // give it back the same color.
                const lastIndex = previousHighlightIndex(algoName, varName);
                if (indexes[lastIndex] === 0) return lastIndex;

                // Find the earliest index with the lowest count.
                const minCount = Math.min.apply(null, indexes);
                let index = null;
                for (var i = 0; i < indexes.length; i++) {
                    if (indexes[i] == minCount) {
                        return i;
                    }
                }
            }
            function previousHighlightIndex(algoName, varName) {
                return indexNames.get(algoName + "///" + varName);
            }
            function nameFromIndex(index) {
                return "selected" + index;
            }
        }
    </script>
    <script src="/dropdown.js"></script>