<!doctype html>
<html lang="zh-hans">

<head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <title>后台获取</title>
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
    <link href="https://www.w3.org/StyleSheets/TR/2016/cg-draft" rel="stylesheet">
    <meta content="Bikeshed version c6f50773a, updated Fri Apr 16 16:45:47 2021 -0700" name="generator">
    <link href="https://wicg.github.io/background-fetch/" rel="canonical">
    <meta content="56974241e32a71462f215744effc89ca94340c4f" name="document-revision">
    <style>
        .algorithm dl {
            overflow: hidden;
        }

        .algorithm dt {
            font-weight: normal;
            float: left;
            clear: left;
            line-height: 1.5;
            margin-right: 0.3em;
        }

        .algorithm dt::after {
            content: '- ';
        }

        .algorithm dd {
            margin-left: 0em;
        }
    </style>
    <style>
        /* style-autolinks */

        .css.css,
        .property.property,
        .descriptor.descriptor {
            color: var(--a-normal-text);
            font-size: inherit;
            font-family: inherit;
        }

        .css::before,
        .property::before,
        .descriptor::before {
            content: "‘";
        }

        .css::after,
        .property::after,
        .descriptor::after {
            content: "’";
        }

        .property,
        .descriptor {
            /* Don't wrap property and descriptor names */
            white-space: nowrap;
        }

        .type {
            /* CSS value <type> */
            font-style: italic;
        }

        pre .property::before,
        pre .property::after {
            content: "";
        }

        [data-link-type="property"]::before,
        [data-link-type="propdesc"]::before,
        [data-link-type="descriptor"]::before,
        [data-link-type="value"]::before,
        [data-link-type="function"]::before,
        [data-link-type="at-rule"]::before,
        [data-link-type="selector"]::before,
        [data-link-type="maybe"]::before {
            content: "‘";
        }

        [data-link-type="property"]::after,
        [data-link-type="propdesc"]::after,
        [data-link-type="descriptor"]::after,
        [data-link-type="value"]::after,
        [data-link-type="function"]::after,
        [data-link-type="at-rule"]::after,
        [data-link-type="selector"]::after,
        [data-link-type="maybe"]::after {
            content: "’";
        }

        [data-link-type].production::before,
        [data-link-type].production::after,
        .prod [data-link-type]::before,
        .prod [data-link-type]::after {
            content: "";
        }

        [data-link-type=element],
        [data-link-type=element-attr] {
            font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
            font-size: .9em;
        }

        [data-link-type=element]::before {
            content: "<"
        }

        [data-link-type=element]::after {
            content: ">"
        }

        [data-link-type=biblio] {
            white-space: pre;
        }
    </style>
    <style>
        /* style-colors */

        /* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
        :root {
            color-scheme: light dark;

            --text: black;
            --bg: white;

            --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

            --logo-bg: #1a5e9a;
            --logo-active-bg: #c00;
            --logo-text: white;

            --tocnav-normal-text: #707070;
            --tocnav-normal-bg: var(--bg);
            --tocnav-hover-text: var(--tocnav-normal-text);
            --tocnav-hover-bg: #f8f8f8;
            --tocnav-active-text: #c00;
            --tocnav-active-bg: var(--tocnav-normal-bg);

            --tocsidebar-text: var(--text);
            --tocsidebar-bg: #f7f8f9;
            --tocsidebar-shadow: rgba(0, 0, 0, .1);
            --tocsidebar-heading-text: hsla(203, 20%, 40%, .7);

            --toclink-text: var(--text);
            --toclink-underline: #3980b5;
            --toclink-visited-text: var(--toclink-text);
            --toclink-visited-underline: #054572;

            --heading-text: #005a9c;

            --hr-text: var(--text);

            --algo-border: #def;

            --del-text: red;
            --del-bg: transparent;
            --ins-text: #080;
            --ins-bg: transparent;

            --a-normal-text: #034575;
            --a-normal-underline: #bbb;
            --a-visited-text: var(--a-normal-text);
            --a-visited-underline: #707070;
            --a-hover-bg: rgba(75%, 75%, 75%, .25);
            --a-active-text: #c00;
            --a-active-underline: #c00;

            --blockquote-border: silver;
            --blockquote-bg: transparent;
            --blockquote-text: currentcolor;

            --issue-border: #e05252;
            --issue-bg: #fbe9e9;
            --issue-text: var(--text);
            --issueheading-text: #831616;

            --example-border: #e0cb52;
            --example-bg: #fcfaee;
            --example-text: var(--text);
            --exampleheading-text: #574b0f;

            --note-border: #52e052;
            --note-bg: #e9fbe9;
            --note-text: var(--text);
            --noteheading-text: hsl(120, 70%, 30%);
            --notesummary-underline: silver;

            --assertion-border: #aaa;
            --assertion-bg: #eee;
            --assertion-text: black;

            --advisement-border: orange;
            --advisement-bg: #fec;
            --advisement-text: var(--text);
            --advisementheading-text: #b35f00;

            --warning-border: red;
            --warning-bg: hsla(40, 100%, 50%, 0.95);
            --warning-text: var(--text);

            --amendment-border: #330099;
            --amendment-bg: #F5F0FF;
            --amendment-text: var(--text);
            --amendmentheading-text: #220066;

            --def-border: #8ccbf2;
            --def-bg: #def;
            --def-text: var(--text);
            --defrow-border: #bbd7e9;

            --datacell-border: silver;

            --indexinfo-text: #707070;

            --indextable-hover-text: black;
            --indextable-hover-bg: #f7f8f9;

            --outdatedspec-bg: rgba(0, 0, 0, .5);
            --outdatedspec-text: black;
            --outdated-bg: maroon;
            --outdated-text: white;
            --outdated-shadow: red;

            --editedrec-bg: darkorange;
        }
    </style>
    <style>
        /* style-counters */

        body {
            counter-reset: example figure issue;
        }

        .issue {
            counter-increment: issue;
        }

        .issue:not(.no-marker)::before {
            content: "Issue " counter(issue);
        }

        .example {
            counter-increment: example;
        }

        .example:not(.no-marker)::before {
            content: "Example " counter(example);
        }

        .invalid.example:not(.no-marker)::before,
        .illegal.example:not(.no-marker)::before {
            content: "Invalid Example" counter(example);
        }

        figcaption {
            counter-increment: figure;
        }

        figcaption:not(.no-marker)::before {
            content: "Figure " counter(figure) " ";
        }
    </style>
    <style>
        /* style-dfn-panel */

        :root {
            --dfnpanel-bg: #ddd;
            --dfnpanel-text: var(--text);
        }

        .dfn-panel {
            position: absolute;
            z-index: 35;
            height: auto;
            width: -webkit-fit-content;
            width: fit-content;
            max-width: 300px;
            max-height: 500px;
            overflow: auto;
            padding: 0.5em 0.75em;
            font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
            background: var(--dfnpanel-bg);
            color: var(--dfnpanel-text);
            border: outset 0.2em;
        }

        .dfn-panel:not(.on) {
            display: none;
        }

        .dfn-panel * {
            margin: 0;
            padding: 0;
            text-indent: 0;
        }

        .dfn-panel>b {
            display: block;
        }

        .dfn-panel a {
            color: var(--dfnpanel-text);
        }

        .dfn-panel a:not(:hover) {
            text-decoration: none !important;
            border-bottom: none !important;
        }

        .dfn-panel>b+b {
            margin-top: 0.25em;
        }

        .dfn-panel ul {
            padding: 0;
        }

        .dfn-panel li {
            list-style: inside;
        }

        .dfn-panel.activated {
            display: inline-block;
            position: fixed;
            left: .5em;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - 1.5em - .4em - .5em);
            max-height: 30vh;
        }

        .dfn-paneled {
            cursor: pointer;
        }
    </style>
    <style>
        /* style-md-lists */

        /* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
        [data-md]> :first-child {
            margin-top: 0;
        }

        [data-md]> :last-child {
            margin-bottom: 0;
        }
    </style>
    <style>
        /* style-railroad */

        :root {
            --railroad-bg: hsl(30, 20%, 95%);
            --railroad-stroke: black;
            --railroad-fill: hsl(120, 100%, 90%);
        }

        svg.railroad-diagram {
            background-color: var(--railroad-bg);
        }

        svg.railroad-diagram path {
            stroke-width: 3px;
            stroke: var(--railroad-stroke);
            fill: transparent;
        }

        svg.railroad-diagram text {
            font: bold 14px monospace;
            fill: var(--text, currentcolor);
            text-anchor: middle;
        }

        svg.railroad-diagram text.label {
            text-anchor: start;
        }

        svg.railroad-diagram text.comment {
            font: italic 12px monospace;
        }

        svg.railroad-diagram rect {
            stroke-width: 3px;
            stroke: var(--railroad-stroke);
            fill: var(--railroad-fill);
        }
    </style>
    <style>
        /* style-selflinks */

        :root {
            --selflink-text: white;
            --selflink-bg: gray;
            --selflink-hover-text: black;
        }

        .heading,
        .issue,
        .note,
        .example,
        li,
        dt {
            position: relative;
        }

        a.self-link {
            position: absolute;
            top: 0;
            left: calc(-1 * (3.5rem - 26px));
            width: calc(3.5rem - 26px);
            height: 2em;
            text-align: center;
            border: none;
            transition: opacity .2s;
            opacity: .5;
        }

        a.self-link:hover {
            opacity: 1;
        }

        .heading>a.self-link {
            font-size: 83%;
        }

        li>a.self-link {
            left: calc(-1 * (3.5rem - 26px) - 2em);
        }

        dfn>a.self-link {
            top: auto;
            left: auto;
            opacity: 0;
            width: 1.5em;
            height: 1.5em;
            background: var(--selflink-bg);
            color: var(--selflink-text);
            font-style: normal;
            transition: opacity .2s, background-color .2s, color .2s;
        }

        dfn:hover>a.self-link {
            opacity: 1;
        }

        dfn>a.self-link:hover {
            color: var(--selflink-hover-text);
        }

        a.self-link::before {
            content: "¶";
        }

        .heading>a.self-link::before {
            content: "§";
        }

        dfn>a.self-link::before {
            content: "#";
        }
    </style>
    <style>
        /* style-syntax-highlighting */

        pre.idl.highlight {
            background: var(--borderedblock-bg, var(--def-bg));
        }

        code.highlight {
            padding: .1em;
            border-radius: .3em;
        }

        pre.highlight,
        pre>code.highlight {
            display: block;
            padding: 1em;
            margin: .5em 0;
            overflow: auto;
            border-radius: 0;
        }

        .highlight:not(.idl) {
            background: rgba(0, 0, 0, .03);
        }

        c-[a] {
            color: #990055
        }

        /* Keyword.Declaration */
        c-[b] {
            color: #990055
        }

        /* Keyword.Type */
        c-[c] {
            color: #708090
        }

        /* Comment */
        c-[d] {
            color: #708090
        }

        /* Comment.Multiline */
        c-[e] {
            color: #0077aa
        }

        /* Name.Attribute */
        c-[f] {
            color: #669900
        }

        /* Name.Tag */
        c-[g] {
            color: #222222
        }

        /* Name.Variable */
        c-[k] {
            color: #990055
        }

        /* Keyword */
        c-[l] {
            color: #000000
        }

        /* Literal */
        c-[m] {
            color: #000000
        }

        /* Literal.Number */
        c-[n] {
            color: #0077aa
        }

        /* Name */
        c-[o] {
            color: #999999
        }

        /* Operator */
        c-[p] {
            color: #999999
        }

        /* Punctuation */
        c-[s] {
            color: #a67f59
        }

        /* Literal.String */
        c-[t] {
            color: #a67f59
        }

        /* Literal.String.Single */
        c-[u] {
            color: #a67f59
        }

        /* Literal.String.Double */
        c-[cp] {
            color: #708090
        }

        /* Comment.Preproc */
        c-[c1] {
            color: #708090
        }

        /* Comment.Single */
        c-[cs] {
            color: #708090
        }

        /* Comment.Special */
        c-[kc] {
            color: #990055
        }

        /* Keyword.Constant */
        c-[kn] {
            color: #990055
        }

        /* Keyword.Namespace */
        c-[kp] {
            color: #990055
        }

        /* Keyword.Pseudo */
        c-[kr] {
            color: #990055
        }

        /* Keyword.Reserved */
        c-[ld] {
            color: #000000
        }

        /* Literal.Date */
        c-[nc] {
            color: #0077aa
        }

        /* Name.Class */
        c-[no] {
            color: #0077aa
        }

        /* Name.Constant */
        c-[nd] {
            color: #0077aa
        }

        /* Name.Decorator */
        c-[ni] {
            color: #0077aa
        }

        /* Name.Entity */
        c-[ne] {
            color: #0077aa
        }

        /* Name.Exception */
        c-[nf] {
            color: #0077aa
        }

        /* Name.Function */
        c-[nl] {
            color: #0077aa
        }

        /* Name.Label */
        c-[nn] {
            color: #0077aa
        }

        /* Name.Namespace */
        c-[py] {
            color: #0077aa
        }

        /* Name.Property */
        c-[ow] {
            color: #999999
        }

        /* Operator.Word */
        c-[mb] {
            color: #000000
        }

        /* Literal.Number.Bin */
        c-[mf] {
            color: #000000
        }

        /* Literal.Number.Float */
        c-[mh] {
            color: #000000
        }

        /* Literal.Number.Hex */
        c-[mi] {
            color: #000000
        }

        /* Literal.Number.Integer */
        c-[mo] {
            color: #000000
        }

        /* Literal.Number.Oct */
        c-[sb] {
            color: #a67f59
        }

        /* Literal.String.Backtick */
        c-[sc] {
            color: #a67f59
        }

        /* Literal.String.Char */
        c-[sd] {
            color: #a67f59
        }

        /* Literal.String.Doc */
        c-[se] {
            color: #a67f59
        }

        /* Literal.String.Escape */
        c-[sh] {
            color: #a67f59
        }

        /* Literal.String.Heredoc */
        c-[si] {
            color: #a67f59
        }

        /* Literal.String.Interpol */
        c-[sx] {
            color: #a67f59
        }

        /* Literal.String.Other */
        c-[sr] {
            color: #a67f59
        }

        /* Literal.String.Regex */
        c-[ss] {
            color: #a67f59
        }

        /* Literal.String.Symbol */
        c-[vc] {
            color: #0077aa
        }

        /* Name.Variable.Class */
        c-[vg] {
            color: #0077aa
        }

        /* Name.Variable.Global */
        c-[vi] {
            color: #0077aa
        }

        /* Name.Variable.Instance */
        c-[il] {
            color: #000000
        }

        /* Literal.Number.Integer.Long */
    </style>
    <style>
        /* style-var-click-highlighting */

        var {
            cursor: pointer;
        }

        var.selected0 {
            background-color: #F4D200;
            box-shadow: 0 0 0 2px #F4D200;
        }

        var.selected1 {
            background-color: #FF87A2;
            box-shadow: 0 0 0 2px #FF87A2;
        }

        var.selected2 {
            background-color: #96E885;
            box-shadow: 0 0 0 2px #96E885;
        }

        var.selected3 {
            background-color: #3EEED2;
            box-shadow: 0 0 0 2px #3EEED2;
        }

        var.selected4 {
            background-color: #EACFB6;
            box-shadow: 0 0 0 2px #EACFB6;
        }

        var.selected5 {
            background-color: #82DDFF;
            box-shadow: 0 0 0 2px #82DDFF;
        }

        var.selected6 {
            background-color: #FFBCF2;
            box-shadow: 0 0 0 2px #FFBCF2;
        }
    </style>
    <style>
        /* style-darkmode */

        @media (prefers-color-scheme: dark) {
            :root {
                --text: #ddd;
                --bg: black;

                --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

                --logo-bg: #1a5e9a;
                --logo-active-bg: #c00;
                --logo-text: white;

                --tocnav-normal-text: #999;
                --tocnav-normal-bg: var(--bg);
                --tocnav-hover-text: var(--tocnav-normal-text);
                --tocnav-hover-bg: #080808;
                --tocnav-active-text: #f44;
                --tocnav-active-bg: var(--tocnav-normal-bg);

                --tocsidebar-text: var(--text);
                --tocsidebar-bg: #080808;
                --tocsidebar-shadow: rgba(255, 255, 255, .1);
                --tocsidebar-heading-text: hsla(203, 20%, 40%, .7);

                --toclink-text: var(--text);
                --toclink-underline: #6af;
                --toclink-visited-text: var(--toclink-text);
                --toclink-visited-underline: #054572;

                --heading-text: #8af;

                --hr-text: var(--text);

                --algo-border: #456;

                --del-text: #f44;
                --del-bg: transparent;
                --ins-text: #4a4;
                --ins-bg: transparent;

                --a-normal-text: #6af;
                --a-normal-underline: #555;
                --a-visited-text: var(--a-normal-text);
                --a-visited-underline: var(--a-normal-underline);
                --a-hover-bg: rgba(25%, 25%, 25%, .2);
                --a-active-text: #f44;
                --a-active-underline: var(--a-active-text);

                --borderedblock-bg: rgba(255, 255, 255, .05);

                --blockquote-border: silver;
                --blockquote-bg: var(--borderedblock-bg);
                --blockquote-text: currentcolor;

                --issue-border: #e05252;
                --issue-bg: var(--borderedblock-bg);
                --issue-text: var(--text);
                --issueheading-text: hsl(0deg, 70%, 70%);

                --example-border: hsl(50deg, 90%, 60%);
                --example-bg: var(--borderedblock-bg);
                --example-text: var(--text);
                --exampleheading-text: hsl(50deg, 70%, 70%);

                --note-border: hsl(120deg, 100%, 35%);
                --note-bg: var(--borderedblock-bg);
                --note-text: var(--text);
                --noteheading-text: hsl(120, 70%, 70%);
                --notesummary-underline: silver;

                --assertion-border: #444;
                --assertion-bg: var(--borderedblock-bg);
                --assertion-text: var(--text);

                --advisement-border: orange;
                --advisement-bg: #222218;
                --advisement-text: var(--text);
                --advisementheading-text: #f84;

                --warning-border: red;
                --warning-bg: hsla(40, 100%, 20%, 0.95);
                --warning-text: var(--text);

                --amendment-border: #330099;
                --amendment-bg: #080010;
                --amendment-text: var(--text);
                --amendmentheading-text: #cc00ff;

                --def-border: #8ccbf2;
                --def-bg: #080818;
                --def-text: var(--text);
                --defrow-border: #136;

                --datacell-border: silver;

                --indexinfo-text: #aaa;

                --indextable-hover-text: var(--text);
                --indextable-hover-bg: #181818;

                --outdatedspec-bg: rgba(255, 255, 255, .5);
                --outdatedspec-text: black;
                --outdated-bg: maroon;
                --outdated-text: white;
                --outdated-shadow: red;

                --editedrec-bg: darkorange;
            }

            /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
            img {
                background: white;
            }
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --selflink-text: black;
                --selflink-bg: silver;
                --selflink-hover-text: white;
            }
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --railroad-bg: rgba(255, 255, 255, .05);
                --railroad-stroke: #bbb;
                --railroad-fill: hsla(240deg, 20%, 15%);
            }
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --dfnpanel-bg: #222;
                --dfnpanel-text: var(--text);
            }
        }

        @media (prefers-color-scheme: dark) {
            .highlight:not(.idl) {
                background: rgba(255, 255, 255, .05);
            }

            c-[a] {
                color: #d33682
            }

            /* Keyword.Declaration */
            c-[b] {
                color: #d33682
            }

            /* Keyword.Type */
            c-[c] {
                color: #2aa198
            }

            /* Comment */
            c-[d] {
                color: #2aa198
            }

            /* Comment.Multiline */
            c-[e] {
                color: #268bd2
            }

            /* Name.Attribute */
            c-[f] {
                color: #b58900
            }

            /* Name.Tag */
            c-[g] {
                color: #cb4b16
            }

            /* Name.Variable */
            c-[k] {
                color: #d33682
            }

            /* Keyword */
            c-[l] {
                color: #657b83
            }

            /* Literal */
            c-[m] {
                color: #657b83
            }

            /* Literal.Number */
            c-[n] {
                color: #268bd2
            }

            /* Name */
            c-[o] {
                color: #657b83
            }

            /* Operator */
            c-[p] {
                color: #657b83
            }

            /* Punctuation */
            c-[s] {
                color: #6c71c4
            }

            /* Literal.String */
            c-[t] {
                color: #6c71c4
            }

            /* Literal.String.Single */
            c-[u] {
                color: #6c71c4
            }

            /* Literal.String.Double */
            c-[ch] {
                color: #2aa198
            }

            /* Comment.Hashbang */
            c-[cp] {
                color: #2aa198
            }

            /* Comment.Preproc */
            c-[cpf] {
                color: #2aa198
            }

            /* Comment.PreprocFile */
            c-[c1] {
                color: #2aa198
            }

            /* Comment.Single */
            c-[cs] {
                color: #2aa198
            }

            /* Comment.Special */
            c-[kc] {
                color: #d33682
            }

            /* Keyword.Constant */
            c-[kn] {
                color: #d33682
            }

            /* Keyword.Namespace */
            c-[kp] {
                color: #d33682
            }

            /* Keyword.Pseudo */
            c-[kr] {
                color: #d33682
            }

            /* Keyword.Reserved */
            c-[ld] {
                color: #657b83
            }

            /* Literal.Date */
            c-[nc] {
                color: #268bd2
            }

            /* Name.Class */
            c-[no] {
                color: #268bd2
            }

            /* Name.Constant */
            c-[nd] {
                color: #268bd2
            }

            /* Name.Decorator */
            c-[ni] {
                color: #268bd2
            }

            /* Name.Entity */
            c-[ne] {
                color: #268bd2
            }

            /* Name.Exception */
            c-[nf] {
                color: #268bd2
            }

            /* Name.Function */
            c-[nl] {
                color: #268bd2
            }

            /* Name.Label */
            c-[nn] {
                color: #268bd2
            }

            /* Name.Namespace */
            c-[py] {
                color: #268bd2
            }

            /* Name.Property */
            c-[ow] {
                color: #657b83
            }

            /* Operator.Word */
            c-[mb] {
                color: #657b83
            }

            /* Literal.Number.Bin */
            c-[mf] {
                color: #657b83
            }

            /* Literal.Number.Float */
            c-[mh] {
                color: #657b83
            }

            /* Literal.Number.Hex */
            c-[mi] {
                color: #657b83
            }

            /* Literal.Number.Integer */
            c-[mo] {
                color: #657b83
            }

            /* Literal.Number.Oct */
            c-[sa] {
                color: #6c71c4
            }

            /* Literal.String.Affix */
            c-[sb] {
                color: #6c71c4
            }

            /* Literal.String.Backtick */
            c-[sc] {
                color: #6c71c4
            }

            /* Literal.String.Char */
            c-[dl] {
                color: #6c71c4
            }

            /* Literal.String.Delimiter */
            c-[sd] {
                color: #6c71c4
            }

            /* Literal.String.Doc */
            c-[se] {
                color: #6c71c4
            }

            /* Literal.String.Escape */
            c-[sh] {
                color: #6c71c4
            }

            /* Literal.String.Heredoc */
            c-[si] {
                color: #6c71c4
            }

            /* Literal.String.Interpol */
            c-[sx] {
                color: #6c71c4
            }

            /* Literal.String.Other */
            c-[sr] {
                color: #6c71c4
            }

            /* Literal.String.Regex */
            c-[ss] {
                color: #6c71c4
            }

            /* Literal.String.Symbol */
            c-[fm] {
                color: #268bd2
            }

            /* Name.Function.Magic */
            c-[vc] {
                color: #cb4b16
            }

            /* Name.Variable.Class */
            c-[vg] {
                color: #cb4b16
            }

            /* Name.Variable.Global */
            c-[vi] {
                color: #cb4b16
            }

            /* Name.Variable.Instance */
            c-[vm] {
                color: #cb4b16
            }

            /* Name.Variable.Magic */
            c-[il] {
                color: #657b83
            }

            /* Literal.Number.Integer.Long */
        }
    </style>

<body class="h-entry">
    <div class="head">
        <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48"
                    src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" width="72"> </a> </p>
        <h1 class="p-name no-ref" id="title">后台获取</h1>
        <h2 class="no-num no-toc no-ref heading settled" id="profile-and-date"><span class="content">社区组草案报告, <time
                    class="dt-updated" datetime="2021-04-21">2021年4月21日</time></span></h2>
        <div data-fill-with="spec-metadata">
            <dl>
                <dt>此版本：
                <dd><a class="u-url"
                        href="https://wicg.github.io/background-fetch/">https://wicg.github.io/background-fetch/</a>
                <dt>问题追踪：
                <dd><a href="https://github.com/WICG/background-fetch/issues/">GitHub</a>
                <dd><a href="#issues-index">规范中的内联问题</a>
                <dt class="editor">编辑者：
                <dd class="editor p-author h-card vcard"><a class="p-name fn u-email email"
                        href="mailto:jakearchibald@google.com">Jake Archibald</a> (<span class="p-org org">谷歌</span>)
                <dd class="editor p-author h-card vcard"><a class="p-name fn u-email email"
                        href="mailto:beverloo@google.com">Peter Beverloo</a> (<span class="p-org org">谷歌</span>)
            </dl>
        </div>
        <div data-fill-with="warning"></div>
        <p class="copyright" data-fill-with="copyright"><a
                href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 2021 the Contributors to
            the Background Fetch Specification, published by the <a href="https://www.w3.org/community/wicg/">Web
                Platform Incubator Community Group</a> under the <a
                href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement
                (CLA)</a>.
            A human-readable <a href="http://www.w3.org/community/about/agreements/cla-deed/">summary</a> is available.
        </p>
        <hr title="标题分隔线">
    </div>
    <div class="p-summary" data-fill-with="abstract">
        <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">摘要</span></h2>
        <p>一个处理后台大规模上传/下载的 API，提供用户可见性。</p>
    </div>
    <div data-fill-with="at-risk"></div>
    <h2 class="no-num no-toc no-ref heading settled" id="status"><span class="content">本文档的状态</span>
    </h2>
    <div data-fill-with="status">
        <p> 该规范由 <a href="https://www.w3.org/community/wicg/">Web 平台孵化社区组</a> 发布。
            它不是 W3C 标准，也不在 W3C 标准轨道上。

            请注意，根据 <a href="https://www.w3.org/community/about/agreements/cla/">W3C 社区贡献者许可协议（CLA）</a>，有有限的选择退出权，其他条件适用。

            了解更多关于 <a href="http://www.w3.org/community/">W3C 社区和业务组</a>的信息。 </p>
        <p></p>
    </div>
    <div data-fill-with="at-risk"></div>
    <nav data-fill-with="table-of-contents" id="toc">
        <h2 class="no-num no-toc no-ref" id="contents">目录</h2>
        <ol class="toc" role="directory">
            <li><a href="#intro"><span class="secno">1</span> <span class="content">简介</span></a>
            <li><a href="#realms"><span class="secno">2</span> <span class="content">领域</span></a>
            <li>
                <a href="#infrastructure"><span class="secno">3</span> <span class="content">基础设施</span></a>
                <ol class="toc">
                    <li><a href="#service-worker-registration-concept-extensions"><span class="secno">3.1</span> <span
                                class="content">Service Worker 注册的扩展</span></a>
                    <li>
                        <a href="#background-fetch-concept"><span class="secno">3.2</span> <span
                                class="content"><span>后台获取</span></span></a>
                        <ol class="toc">
                            <li><a href="#background-fetch-display-algorithm"><span class="secno">3.2.1</span> <span
                                        class="content"><span>显示</span></span></a>
                        </ol>
                    <li><a href="#background-fetch-record-concept"><span class="secno">3.3</span> <span
                                class="content">后台获取记录</span></a>
                    <li><a href="#background-fetch-response-concept"><span class="secno">3.4</span> <span
                                class="content">后台获取响应</span></a>
                </ol>
            <li>
                <a href="#algorithms"><span class="secno">4</span> <span class="content">算法</span></a>
                <ol class="toc">
                    <li><a href="#perform-a-background-fetch-algorithm"><span class="secno">4.1</span> <span
                                class="content"><span>执行后台获取</span></span></a>
                    <li><a href="#complete-a-record-algorithm"><span class="secno">4.2</span> <span
                                class="content"><span>完成记录</span></span></a>
                    <li><a href="#update-background-fetch-instance-algorithm"><span class="secno">4.3</span> <span
                                class="content"><span>更新后台获取实例</span></span></a>
                    <li><a href="#fire-a-background-fetch-click-event-algorithm"><span class="secno">4.4</span> <span
                                class="content"><span>触发后台获取点击事件</span></span></a>
                    <li><a href="#get-a-backgroundfetchregistration-instance-algorithm"><span class="secno">4.5</span>
                            <span class="content"><span>获取 BackgroundFetchRegistration 实例</span></span></a>
                    <li><a href="#validate-partial-response-algorithm"><span class="secno">4.6</span> <span
                                class="content"><span>验证部分响应</span></span></a>
                    <li><a href="#extract-content-range-values-algorithm"><span class="secno">4.7</span> <span
                                class="content"><span>提取内容范围值</span></span></a>
                    <li><a href="#create-settled-fetches-algorithm"><span class="secno">4.8</span> <span
                                class="content"><span>创建记录对象</span></span></a>
                    <li><a href="#contains-background-fetch-algorithm"><span class="secno">4.9</span> <span
                                class="content"><span>包含后台获取</span></span></a>
                </ol>
            <li><a href="#header-syntax"><span class="secno">5</span> <span class="content">标头语法</span></a>
            <li>
                <a href="#api"><span class="secno">6</span> <span class="content">API</span></a>
                <ol class="toc">
                    <li>
                        <a href="#extensions-to-service-worker-global"><span class="secno">6.1</span> <span
                                class="content">对 <code class="idl"><span>ServiceWorkerGlobalScope</span></code>
                                的扩展</span></a>
                        <ol class="toc">
                            <li><a href="#service-worker-global-events"><span class="secno">6.1.1</span> <span
                                        class="content">事件</span></a>
                        </ol>
                    <li><a href="#extensions-to-service-worker-registration"><span class="secno">6.2</span> <span
                                class="content">对 <code class="idl"><span>ServiceWorkerRegistration</span></code>
                                的扩展</span></a>
                    <li>
                        <a href="#background-fetch-manager"><span class="secno">6.3</span> <span class="content"><code
                                    class="idl"><span>BackgroundFetchManager</span></code></span></a>
                        <ol class="toc">
                            <li><a href="#background-fetch-manager-fetch"><span class="secno">6.3.1</span> <span
                                        class="content"><code class="idl"><span>fetch()</span></code></span></a>
                            <li><a href="#background-fetch-manager-get"><span class="secno">6.3.2</span> <span
                                        class="content"><code class="idl"><span>get()</span></code></span></a>
                            <li><a href="#background-fetch-manager-get-ids"><span class="secno">6.3.3</span> <span
                                        class="content"><code class="idl"><span>getIds()</span></code></span></a>
                        </ol>
                    <li>
                        <a href="#background-fetch-registration"><span class="secno">6.4</span> <span
                                class="content"><code
                                    class="idl"><span>BackgroundFetchRegistration</span></code></span></a>
                        <ol class="toc">
                            <li><a href="#background-fetch-registration-events"><span class="secno">6.4.1</span> <span
                                        class="content">事件</span></a>
                            <li><a href="#background-fetch-registration-abort"><span class="secno">6.4.2</span> <span
                                        class="content"><code class="idl"><span>abort()</span></code></span></a>
                            <li><a href="#background-fetch-registration-match"><span class="secno">6.4.3</span> <span
                                        class="content"><code class="idl"><span>match()</span></code></span></a>
                            <li><a href="#background-fetch-registration-match-all"><span class="secno">6.4.4</span>
                                    <span class="content"><code class="idl"><span>matchAll()</span></code></span></a>
                        </ol>
                    <li><a href="#background-fetch-record-interface"><span class="secno">6.5</span> <span
                                class="content"><code class="idl"><span>BackgroundFetchRecord</span></code></span></a>
                    <li><a href="#background-fetch-event"><span class="secno">6.6</span> <span class="content"><code
                                    class="idl"><span>BackgroundFetchEvent</span></code></span></a>
                    <li>
                        <a href="#background-fetch-update-ui-event"><span class="secno">6.7</span> <span
                                class="content"><code
                                    class="idl"><span>BackgroundFetchUpdateUIEvent</span></code></span></a>
                        <ol class="toc">
                            <li><a href="#background-fetch-update-ui-event-update-ui"><span class="secno">6.7.1</span>
                                    <span class="content"><code class="idl"><span>updateUI()</span></code></span></a>
                        </ol>
                </ol>
            <li>
                <a href="#automation"><span class="secno">7</span> <span class="content">自动化</span></a>
                <ol class="toc">
                    <li><a href="#automation-click"><span class="secno">7.1</span> <span
                                class="content"><span>点击</span></span></a>
                </ol>
            <li><a href="#privacy-and-bandwidth-use"><span class="secno">8</span> <span
                        class="content">隐私和带宽使用</span></a>
            <li>
                <a href="#w3c-conformance"><span class="secno"></span> <span class="content">一致性</span></a>
                <ol class="toc">
                    <li><a href="#w3c-conventions"><span class="secno"></span> <span class="content">文档约定</span></a>
                    <li><a href="#w3c-conformant-algorithms"><span class="secno"></span> <span
                                class="content">一致性算法</span></a>
                </ol>
            <li>
                <a href="#index"><span class="secno"></span> <span class="content">索引</span></a>
                <ol class="toc">
                    <li><a href="#index-defined-here"><span class="secno"></span> <span
                                class="content">本规范定义的术语</span></a>
                    <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span
                                class="content">引用定义的术语</span></a>
                </ol>
            <li>
                <a href="#references"><span class="secno"></span> <span class="content">参考文献</span></a>
                <ol class="toc">
                    <li><a href="#normative"><span class="secno"></span> <span class="content">规范性引用</span></a>
                </ol>
            <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL 索引</span></a>
            <li><a href="#issues-index"><span class="secno"></span> <span class="content">问题索引</span></a>
        </ol>
    </nav>
    <main>
        <h2 class="heading settled" data-level="1" id="intro"><span class="secno">1. </span><span
                class="content">简介</span><a class="self-link" href="#intro"></a></h2>
        <p><a data-link-type="dfn" href="https://w3c.github.io/ServiceWorker/#dfn-service-worker"
                id="ref-for-dfn-service-worker">Service Worker</a> 能够获取和缓存资源，其大小仅受限于 <a
                href="https://storage.spec.whatwg.org/#usage-and-quota">源存储</a>。然而，如果用户离开该站点或关闭浏览器，Service Worker可能会被 <a
                href="https://www.w3.org/TR/service-workers-1/#service-worker-lifetime">终止</a>。即使有传递给 <code
                class="idl"><a data-link-type="idl" href="https://w3c.github.io/ServiceWorker/#dom-extendableevent-waituntil" id="ref-for-dom-extendableevent-waituntil">waitUntil()</a></code>
            的未完成 Promise——如果它在几分钟内没有解析，浏览器可能会认为这是对 <a data-link-type="dfn"
                href="https://w3c.github.io/ServiceWorker/#dfn-service-worker" id="ref-for-dfn-service-worker①">Service
                Worker</a> 的滥用，并终止该进程。</p>
        <p>这对电池寿命和隐私非常有利，但却使得下载和缓存诸如播客和电影等大文件，以及上传视频和图片变得困难。</p>
        <p>本规范旨在：</p>
        <ul>
            <li data-md>
                <p>即使用户关闭所有与源相关的窗口和 Worker，仍允许继续进行获取（请求和响应）。</p>
            <li data-md>
                <p>允许单个作业涉及多个请求，具体由应用程序定义。</p>
            <li data-md>
                <p>允许浏览器/操作系统显示该作业的进度，并允许用户暂停/中止。</p>
            <li data-md>
                <p>允许浏览器/操作系统通过暂停/恢复下载来应对不佳的连接。</p>
            <li data-md>
                <p>允许应用程序对作业的成功/失败做出反应，可能通过缓存结果。</p>
            <li data-md>
                <p>允许在后台获取资源时访问这些资源。</p>
        </ul>
        <h2 class="heading settled" data-level="2" id="realms"><span class="secno">2. </span><span
                class="content">领域</span><a class="self-link" href="#realms"></a></h2>
        <p>所有平台对象均在 <a data-link-type="dfn">上下文对象</a>的 <a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm"
                id="ref-for-concept-relevant-realm">相关领域</a> 中创建，除非另有规定。</p>
        <h2 class="heading settled" data-level="3" id="infrastructure"><span class="secno">3. </span><span
                class="content">基础设施</span><a class="self-link" href="#infrastructure"></a></h2>
        <p>当用户代理认为资源可能很快可用时，资源被认为是 <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="temporarily-unavailable">暂时不可用</dfn>。原因可能包括：</p>
        <ul>
            <li data-md>
                <p>用户代理处于离线状态。</p>
            <li data-md>
                <p>用户代理位于强制门户之后。</p>
        </ul>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="background-fetch-task-source">后台获取任务源</dfn>
            是一个 <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#task-source"
                id="ref-for-task-source">任务源</a>。</p>
        <div class="algorithm" data-algorithm="queue a bgfetch task"> 要在一个可选的 <var>eventLoop</var>（一个 <a
                data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-agent-event-loop"
                id="ref-for-concept-agent-event-loop">事件循环</a>，默认为调用者的 <a data-link-type="dfn">上下文对象</a> 的 <a
                data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object"
                id="ref-for-relevant-settings-object">相关设置对象</a>的 <a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/webappapis.html#responsible-event-loop"
                id="ref-for-responsible-event-loop">负责的事件循环</a>）上排队一个 <var>steps</var>（步骤），请使用 <a data-link-type="dfn"
                href="#background-fetch-task-source" id="ref-for-background-fetch-task-source">后台获取任务源</a> 在
            <var>eventLoop</var> 上排队一个任务以运行 <var>steps</var>。
        </div>
        <h3 class="heading settled" data-level="3.1" id="service-worker-registration-concept-extensions"><span
                class="secno">3.1. </span><span class="content">Service Worker 注册的扩展</span><a class="self-link"
                href="#service-worker-registration-concept-extensions"></a></h3>
        <p><a data-link-type="dfn" href="https://w3c.github.io/ServiceWorker/#dfn-service-worker-registration"
                id="ref-for-dfn-service-worker-registration">Service Worker 注册</a> 另外包含：</p>
        <div>
            <ul>
                <li data-md>
                    <p><dfn class="dfn-paneled" data-dfn-for="service worker registration" data-dfn-type="dfn"
                            data-noexport id="service-worker-registration-active-background-fetches">活跃的后台获取</dfn>（一个 <a
                            data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map"
                            id="ref-for-ordered-map">映射</a>），每个键是一个 DOMString，每个项目是一个 <a data-link-type="dfn"
                            href="#background-fetch" id="ref-for-background-fetch">后台获取</a>。它最初是一个空的 <a
                            data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map"
                            id="ref-for-ordered-map①">映射</a>。</p>
                <li data-md>
                    <p>一个 <dfn class="dfn-paneled" data-dfn-for="service worker registration" data-dfn-type="dfn"
                            data-noexport
                            id="service-worker-registration-active-background-fetches-edit-queue">活跃后台获取编辑队列</dfn>（一个 <a
                            data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/infrastructure.html#parallel-queue"
                            id="ref-for-parallel-queue">并行队列</a>），最初是 <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/infrastructure.html#starting-a-new-parallel-queue"
                            id="ref-for-starting-a-new-parallel-queue">启动一个新并行队列</a> 的结果。</p>
            </ul>
        </div>
        <h3 class="heading settled" data-level="3.2" id="background-fetch-concept"><span class="secno">3.2. </span><span
                class="content"><a data-link-type="dfn" href="#background-fetch"
                    id="ref-for-background-fetch①">后台获取</a></span><a class="self-link"
                href="#background-fetch-concept"></a></h3>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="background-fetch">后台获取</dfn>
            包含以下内容：</p>
        <div>
            <ul>
                <li data-md>
                    <p><dfn class="dfn-paneled" data-dfn-for="background fetch" data-dfn-type="dfn" data-noexport
                            id="background-fetch-id">id</dfn>（一个 DOMString）。</p>
                <li data-md>
                    <p><dfn class="dfn-paneled" data-dfn-for="background fetch" data-dfn-type="dfn" data-noexport
                            id="background-fetch-records">记录</dfn>（一个 <a data-link-type="dfn"
                            href="https://infra.spec.whatwg.org/#list" id="ref-for-list">列表</a>，包含 <a
                            data-link-type="dfn" href="#background-fetch-record"
                            id="ref-for-background-fetch-record">后台获取记录</a>）。</p>
                <li data-md>
                    <p><dfn class="dfn-paneled" data-dfn-for="background fetch" data-dfn-type="dfn" data-noexport
                            id="background-fetch-title">标题</dfn>（一个 DOMString）。</p>
                <li data-md>
                    <p><dfn class="dfn-paneled" data-dfn-for="background fetch" data-dfn-type="dfn" data-noexport
                            id="background-fetch-download-total">下载总量</dfn>（一个数字）。</p>
                <li data-md>
                    <p><dfn class="dfn-paneled" data-dfn-for="background fetch" data-dfn-type="dfn" data-noexport
                            id="background-fetch-upload-total">上传总量</dfn>（一个数字）。</p>
                <li data-md>
                    <p><dfn class="dfn-paneled" data-dfn-for="background fetch" data-dfn-type="dfn" data-noexport
                            id="background-fetch-uploaded">已上传</dfn>（一个数字），最初为 0。</p>
                <li data-md>
                    <p><dfn class="dfn-paneled" data-dfn-for="background fetch" data-dfn-type="dfn" data-noexport
                            id="background-fetch-result">结果</dfn>（一个 <code
                            class="idl"><a data-link-type="idl" href="#enumdef-backgroundfetchresult" id="ref-for-enumdef-backgroundfetchresult">BackgroundFetchResult</a></code>），最初为空字符串。
                    </p>
                <li data-md>
                    <p><dfn class="dfn-paneled" data-dfn-for="background fetch" data-dfn-type="dfn" data-noexport
                            id="background-fetch-failure-reason">失败原因</dfn>（一个 <code
                            class="idl"><a data-link-type="idl" href="#enumdef-backgroundfetchfailurereason" id="ref-for-enumdef-backgroundfetchfailurereason">BackgroundFetchFailureReason</a></code>），
                        最初为空字符串。</p>
                <li data-md>
                    <p><dfn class="dfn-paneled" data-dfn-for="background fetch" data-dfn-type="dfn" data-noexport
                            id="background-fetch-records-available-flag">记录可用标志</dfn> 最初设置。</p>
                <li data-md>
                    <p><dfn class="dfn-paneled" data-dfn-for="background fetch" data-dfn-type="dfn" data-noexport
                            id="background-fetch-icons">图标</dfn>（一个 <a data-link-type="dfn"
                            href="https://infra.spec.whatwg.org/#list" id="ref-for-list①">列表</a>，包含 <code
                            class="idl"><a data-link-type="idl" href="https://w3c.github.io/image-resource/#dom-imageresource" id="ref-for-dom-imageresource">ImageResource</a></code>）。
                    </p>
                <li data-md>
                    <p><dfn class="dfn-paneled" data-dfn-for="background fetch" data-dfn-type="dfn" data-noexport
                            id="background-fetch-service-worker-registration">Service Worker 注册</dfn>（一个 <a
                            data-link-type="dfn"
                            href="https://w3c.github.io/ServiceWorker/#dfn-service-worker-registration"
                            id="ref-for-dfn-service-worker-registration①">Service Worker 注册</a>）。</p>
                <li data-md>
                    <p><dfn class="dfn-paneled" data-dfn-for="background fetch" data-dfn-type="dfn" data-noexport
                            id="background-fetch-update-handling-queue">更新处理队列</dfn>（一个 <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/infrastructure.html#parallel-queue"
                            id="ref-for-parallel-queue①">并行队列</a>），最初是 <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/infrastructure.html#starting-a-new-parallel-queue"
                            id="ref-for-starting-a-new-parallel-queue①">启动一个新并行队列</a> 的结果。</p>
                <li data-md>
                    <p><dfn class="dfn-paneled" data-dfn-for="background fetch" data-dfn-type="dfn" data-noexport
                            id="background-fetch-paused-flag">暂停标志</dfn>，最初未设置。</p>
                <li data-md>
                    <p><dfn class="dfn-paneled" data-dfn-for="background fetch" data-dfn-type="dfn" data-noexport
                            id="background-fetch-abort-all-flag">中止所有标志</dfn>，最初未设置。</p>
            </ul>
            <div class="algorithm" data-algorithm="stored body bytes total">
                要获取 <a data-link-type="dfn" href="#background-fetch" id="ref-for-background-fetch②">后台获取</a> 的
                (<var>bgFetch</var>) <dfn class="dfn-paneled" data-dfn-for="background fetch" data-dfn-type="dfn"
                    data-noexport id="background-fetch-stored-body-bytes-total">已存储主体字节总数</dfn>，请执行以下步骤：
                <ol>
                    <li data-md>
                        <p>令 <var>total</var> 为 0。</p>
                    <li data-md>
                        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate"
                                id="ref-for-list-iterate">对于每一个</a> <var>record</var>，在 <var>bgFetch</var> 的 <a
                                data-link-type="dfn" href="#background-fetch-records"
                                id="ref-for-background-fetch-records">记录</a>中：</p>
                        <ol>
                            <li data-md>
                                <p>通过 <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte-sequence-length"
                                        id="ref-for-byte-sequence-length">长度</a>，增加 <var>record</var> 的 <a
                                        data-link-type="dfn" href="#background-fetch-record-response-data"
                                        id="ref-for-background-fetch-record-response-data">响应数据</a> 的 <a
                                        data-link-type="dfn" href="#background-fetch-response-bytes"
                                        id="ref-for-background-fetch-response-bytes">字节</a> 到 <var>total</var>。</p>
                        </ol>
                    <li data-md>
                        <p>返回 <var>total</var>。</p>
                </ol>
            </div>
            <h4 class="heading settled" data-level="3.2.1" id="background-fetch-display-algorithm"><span
                    class="secno">3.2.1. </span><span class="content"><a data-link-type="dfn"
                        href="#background-fetch-display" id="ref-for-background-fetch-display">显示</a></span><a
                    class="self-link" href="#background-fetch-display-algorithm"></a></h4>
            <div class="algorithm" data-algorithm="display">
                要为给定的 <var>environment</var>（一个 <a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object"
                    id="ref-for-environment-settings-object">环境设置对象</a>）显示 <a data-link-type="dfn"
                    href="#background-fetch" id="ref-for-background-fetch③">后台获取</a>
                (<var>bgFetch</var>)，用户代理必须展示一个遵循以下规则的用户界面：
                <ul>
                    <li data-md>
                        <p>UI 必须突出显示 <var>bgFetch</var> 的 <a data-link-type="dfn"
                                href="#background-fetch-service-worker-registration"
                                id="ref-for-background-fetch-service-worker-registration">Service Worker 注册</a>的 <a
                                data-link-type="dfn" href="https://w3c.github.io/ServiceWorker/#dfn-scope-url"
                                id="ref-for-dfn-scope-url">范围 URL</a> 的 <a data-link-type="dfn"
                                href="https://url.spec.whatwg.org/#concept-url-origin"
                                id="ref-for-concept-url-origin">源</a></p>
                    <li data-md>
                        <p>如果 <var>bgFetch</var> 的 <a data-link-type="dfn" href="#background-fetch-paused-flag"
                                id="ref-for-background-fetch-paused-flag">暂停标志</a> 未设置，并且 <var>bgFetch</var> 的 <a
                                data-link-type="dfn" href="#background-fetch-result"
                                id="ref-for-background-fetch-result">结果</a> 不是空字符串，则 UI 必须指示带宽正在被使用。
                        </p>
                    <li data-md>
                        <p>UI 在 <var>bgFetch</var> 的 <a data-link-type="dfn" href="#background-fetch-result"
                                id="ref-for-background-fetch-result①">结果</a> 不为空字符串之前，不能被关闭（例如滑动关闭）。</p>
                    <li data-md>
                        <p>UI 可以显示 <var>bgFetch</var> 的 <a data-link-type="dfn" href="#background-fetch-title"
                                id="ref-for-background-fetch-title">标题</a>。</p>
                    <li data-md>
                        <p>UI 可以选择一个用于显示的 <a data-link-type="dfn"
                                href="https://w3c.github.io/image-resource/#image-resource"
                                id="ref-for-image-resource">图像资源</a> (<var>icon</var>)，从 <var>bgFetch</var> 的 <a
                                data-link-type="dfn" href="#background-fetch-icons"
                                id="ref-for-background-fetch-icons">图标</a> 中，成功 <a data-link-type="dfn"
                                href="https://w3c.github.io/image-resource/#processing-an-imageresource-from-an-api"
                                id="ref-for-processing-an-imageresource-from-an-api">处理</a> 并通过新的 <a
                                data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request"
                                id="ref-for-concept-request">请求</a>获取，具有以下属性：
                        </p>
                        <dl>
                            <dt data-md><a data-link-type="dfn"
                                    href="https://fetch.spec.whatwg.org/#concept-request-url"
                                    id="ref-for-concept-request-url">URL</a>
                            <dd data-md>
                                <p><var>icon</var> 的 <a data-link-type="dfn"
                                        href="https://w3c.github.io/image-resource/#dfn-src"
                                        id="ref-for-dfn-src">src</a>。</p>
                            <dt data-md><a data-link-type="dfn"
                                    href="https://fetch.spec.whatwg.org/#concept-request-client"
                                    id="ref-for-concept-request-client">客户端</a>
                            <dd data-md>
                                <p><var>environment</var>。</p>
                            <dt data-md><a data-link-type="dfn">Keepalive 标志</a>
                            <dd data-md>
                                <p>设置。</p>
                            <dt data-md><a data-link-type="dfn"
                                    href="https://fetch.spec.whatwg.org/#request-service-workers-mode"
                                    id="ref-for-request-service-workers-mode">Service Worker 模式</a>
                            <dd data-md>
                                <p>"<code>none</code>"。</p>
                            <dt data-md><a data-link-type="dfn"
                                    href="https://fetch.spec.whatwg.org/#concept-request-destination"
                                    id="ref-for-concept-request-destination">目标</a>
                            <dd data-md>
                                <p>"<code>image</code>"。</p>
                            <dt data-md><a data-link-type="dfn"
                                    href="https://fetch.spec.whatwg.org/#concept-request-mode"
                                    id="ref-for-concept-request-mode">模式</a>
                            <dd data-md>
                                <p>"<code>no-cors</code>"。</p>
                            <dt data-md><a data-link-type="dfn"
                                    href="https://fetch.spec.whatwg.org/#concept-request-credentials-mode"
                                    id="ref-for-concept-request-credentials-mode">凭证模式</a>
                            <dd data-md>
                                <p>"<code>include</code>"。</p>
                        </dl>
                        <p class="issue" id="issue-20b63876"><a class="self-link" href="#issue-20b63876"></a> <a
                                href="https://github.com/w3c/manifest/pull/710">manifest/pull/710</a>.</p>
                    <li data-md>
                        <p>UI 可以使用 <var>bgFetch</var> 的 <a data-link-type="dfn" href="#background-fetch-download-total"
                                id="ref-for-background-fetch-download-total">下载总量</a>，<a data-link-type="dfn"
                                href="#background-fetch-upload-total"
                                id="ref-for-background-fetch-upload-total">上传总量</a>，<a data-link-type="dfn"
                                href="#background-fetch-stored-body-bytes-total"
                                id="ref-for-background-fetch-stored-body-bytes-total">已存储主体字节总量</a>，<a
                                data-link-type="dfn" href="#background-fetch-uploaded"
                                id="ref-for-background-fetch-uploaded">已上传</a>，<a data-link-type="dfn"
                                href="#background-fetch-paused-flag"
                                id="ref-for-background-fetch-paused-flag①">暂停标志</a>，以及 <a data-link-type="dfn"
                                href="#background-fetch-result" id="ref-for-background-fetch-result②">结果</a> 来显示获取的进度。
                        </p>
                    <li data-md>
                        <p>UI 必须提供一种方式让用户通过设置 <var>bgFetch</var> 的 <a data-link-type="dfn"
                                href="#background-fetch-abort-all-flag"
                                id="ref-for-background-fetch-abort-all-flag">中止所有标志</a> 来中止 <var>bgFetch</var>。
                        </p>
                    <li data-md>
                        <p>如果 <var>bgFetch</var> 的 <a data-link-type="dfn" href="#background-fetch-record-request"
                                id="ref-for-background-fetch-record-request">请求</a>中的每个请求的 <a data-link-type="dfn"
                                href="https://fetch.spec.whatwg.org/#concept-request-method"
                                id="ref-for-concept-request-method">方法</a>都是 `<code>GET</code>`，则 UI 可以提供一种方式来切换
                            <var>bgFetch</var> 的 <a data-link-type="dfn" href="#background-fetch-paused-flag"
                                id="ref-for-background-fetch-paused-flag②">暂停标志</a>。
                        </p>
                        <p class="note" role="note"><span>注意：</span> 如果 <a data-link-type="dfn"
                                href="https://fetch.spec.whatwg.org/#concept-request-method"
                                id="ref-for-concept-request-method①">方法</a> 不是 `<code>GET</code>`，重新发出请求可能会产生意想不到的副作用。
                        </p>
                    <li data-md>
                        <p>UI 可能会被激活（例如通过点击），在这种情况下<a data-link-type="dfn" href="#fire-a-background-fetch-click-event"
                                id="ref-for-fire-a-background-fetch-click-event">触发后台获取点击事件</a> 用于 <var>bgFetch</var>。
                        </p>
                    <li data-md>
                        <p>UI 可以在操作完成后仍然存在，在这种情况下仍然可以被激活。
                        </p>
                </ul>
                <p>令 <var>permission</var> 为 <a data-link-type="dfn"
                        href="https://w3c.github.io/permissions/#permission-state"
                        id="ref-for-permission-state">权限状态</a>，其对应于 <code
                        class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dictdef-permissiondescriptor" id="ref-for-dictdef-permissiondescriptor">PermissionDescriptor</a></code>
                    中具有 <code
                        class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissiondescriptor-name" id="ref-for-dom-permissiondescriptor-name">name</a></code>
                    值为 <code>"background-fetch"</code> 和 <var>environment</var>。如果 <var>permission</var> 为
                    <code>"prompt"</code>，则用户代理可能会在该算法开始时设置 <var>bgFetch</var> 的 <a data-link-type="dfn"
                        href="#background-fetch-paused-flag"
                        id="ref-for-background-fetch-paused-flag③">暂停标志</a>。用户代理应允许用户接受后台获取（取消设置 <var>bgFetch</var> 的 <a
                        data-link-type="dfn" href="#background-fetch-paused-flag"
                        id="ref-for-background-fetch-paused-flag④">暂停标志</a>），或拒绝后台获取（设置 <var>bgFetch</var> 的 <a
                        data-link-type="dfn" href="#background-fetch-abort-all-flag"
                        id="ref-for-background-fetch-abort-all-flag①">中止所有标志</a>）。用户代理还可以提供始终允许和始终拒绝选项，可以用作此权限的 <a
                        data-link-type="dfn"
                        href="https://w3c.github.io/permissions/#new-information-about-the-users-intent"
                        id="ref-for-new-information-about-the-users-intent">用户意图的新增信息</a>。
                </p>
                <p>如果用户使用的是计量连接，或后台获取是在后台启动的，用户代理还可以考虑设置 <var>bgFetch</var> 的 <a data-link-type="dfn"
                        href="#background-fetch-paused-flag" id="ref-for-background-fetch-paused-flag⑤">暂停标志</a>。
                </p>
            </div>
        </div>
        <h3 class="heading settled" data-level="3.3" id="background-fetch-record-concept"><span class="secno">3.3.
            </span><span class="content">后台获取记录</span><a class="self-link" href="#background-fetch-record-concept"></a>
        </h3>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="background-fetch-record">后台获取记录</dfn> 包含以下内容：
        </p>
        <div>
            <ul>
                <li data-md>
                    <p><dfn class="dfn-paneled" data-dfn-for="background fetch record" data-dfn-type="dfn" data-noexport
                            id="background-fetch-record-request">请求</dfn>（一个 <a data-link-type="dfn"
                            href="https://fetch.spec.whatwg.org/#concept-request" id="ref-for-concept-request①">请求</a>）。
                    </p>
                <li data-md>
                    <p><dfn class="dfn-paneled" data-dfn-for="background fetch record" data-dfn-type="dfn" data-noexport
                            id="background-fetch-record-response-data">响应数据</dfn>（一个 <a data-link-type="dfn"
                            href="#background-fetch-response" id="ref-for-background-fetch-response">后台获取响应</a>），最初为一个新的
                        <a data-link-type="dfn" href="#background-fetch-response"
                            id="ref-for-background-fetch-response①">后台获取响应</a>。
                    </p>
            </ul>
        </div>
        <h3 class="heading settled" data-level="3.4" id="background-fetch-response-concept"><span class="secno">3.4.
            </span><span class="content">后台获取响应</span><a class="self-link"
                href="#background-fetch-response-concept"></a></h3>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="background-fetch-response">后台获取响应</dfn>
            包含以下内容：</p>
        <div>
            <ul>
                <li data-md>
                    <p><dfn class="dfn-paneled" data-dfn-for="background fetch response" data-dfn-type="dfn"
                            data-noexport id="background-fetch-response-response">响应</dfn>（一个 <a data-link-type="dfn"
                            href="https://fetch.spec.whatwg.org/#concept-response" id="ref-for-concept-response">响应</a>
                        或 null），最初为 null。</p>
                <li data-md>
                    <p><dfn class="dfn-paneled" data-dfn-for="background fetch response" data-dfn-type="dfn"
                            data-noexport id="background-fetch-response-bytes">字节</dfn>（一个 <a data-link-type="dfn"
                            href="https://infra.spec.whatwg.org/#byte-sequence"
                            id="ref-for-byte-sequence">字节序列</a>），最初为一个空的 <a data-link-type="dfn"
                            href="https://infra.spec.whatwg.org/#byte-sequence" id="ref-for-byte-sequence①">字节序列</a>。
                    </p>
                <li data-md>
                    <p><dfn class="dfn-paneled" data-dfn-for="background fetch response" data-dfn-type="dfn"
                            data-noexport id="background-fetch-response-result">结果</dfn>，（任何 <code
                            class="idl"><a data-link-type="idl" href="#enumdef-backgroundfetchfailurereason" id="ref-for-enumdef-backgroundfetchfailurereason①">BackgroundFetchFailureReason</a></code>、
                        <code>"success"</code> 或 <code>"redundant"</code>），最初为空字符串。
                    </p>
            </ul>
            <p>如果 <a data-link-type="dfn" href="#background-fetch-response-response"
                    id="ref-for-background-fetch-response-response">响应</a> 的 <dfn class="dfn-paneled"
                    data-dfn-for="background fetch response" data-dfn-type="dfn" data-noexport
                    id="background-fetch-response-exposed">暴露</dfn> 状态为结果是空字符串、<code>"success"</code> 或
                <code>"bad-status"</code>，则可以暴露该响应。
            </p>
        </div>
        <h2 class="heading settled" data-level="4" id="algorithms"><span class="secno">4. </span><span
                class="content">算法</span><a class="self-link" href="#algorithms"></a></h2>
        <h3 class="heading settled" data-level="4.1" id="perform-a-background-fetch-algorithm"><span class="secno">4.1.
            </span><span class="content"><a data-link-type="dfn" href="#perform-a-background-fetch"
                    id="ref-for-perform-a-background-fetch">执行后台获取</a></span><a class="self-link"
                href="#perform-a-background-fetch-algorithm"></a></h3>
        <p class="note" role="note"><span>注意：</span> 这是管理后台获取的“后台”部分的算法。每个 <a data-link-type="dfn"
                href="#background-fetch" id="ref-for-background-fetch④">后台获取</a> 只运行该算法的一个实例。</p>
        <div class="algorithm" data-algorithm="perform a background fetch">
            要为 <var>bgFetch</var>（一个 <a data-link-type="dfn" href="#background-fetch"
                id="ref-for-background-fetch⑤">后台获取</a>）执行后台获取，请运行以下步骤：
            <ol>
                <li data-md>
                    <p>令 <var>swRegistration</var> 为 <var>bgFetch</var> 的 <a data-link-type="dfn"
                            href="#background-fetch-service-worker-registration"
                            id="ref-for-background-fetch-service-worker-registration①">Service Worker 注册</a>。
                    </p>
                <li data-md>
                    <p>令 <var>settledFetches</var> 为 0。</p>
                <li data-md>
                    <p>令 <var>immediateFailure</var> 为 false。</p>
                <li data-md>
                    <p>令 <var>failureReason</var> 为空字符串。</p>
                <li data-md>
                    <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate"
                            id="ref-for-list-iterate①">对于每一个</a> <var>record</var>，在 <var>bgFetch</var> 的 <a
                            data-link-type="dfn" href="#background-fetch-records"
                            id="ref-for-background-fetch-records②">记录</a> 中，<a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel"
                            id="ref-for-in-parallel">并行</a> 运行以下步骤：</p>
                    <ol>
                        <li data-md>
                            <p><a data-link-type="dfn" href="#complete-a-record" id="ref-for-complete-a-record">完成
                                    记录</a>，用于 <var>bgFetch</var> 和 <var>record</var>。</p>
                        <li data-md>
                            <p>令 <var>result</var> 为 <var>record</var> 的 <a data-link-type="dfn"
                                    href="#background-fetch-record-response-data"
                                    id="ref-for-background-fetch-record-response-data①">响应数据</a>的 <a
                                    data-link-type="dfn" href="#background-fetch-response-result"
                                    id="ref-for-background-fetch-response-result①">结果</a>。</p>
                        <li data-md>
                            <p>如果 <var>failureReason</var> 不是空字符串：</p>
                            <ol>
                                <li data-md>
                                    <p class="assertion">断言：<var>result</var> 不是 <code>"redundant"</code>。</p>
                                <li data-md>
                                    <p>将 <var>failureReason</var> 设置为 <var>result</var>。</p>
                            </ol>
                        <li data-md>
                            <p>将 <var>settledFetches</var> 增加 1。</p>
                        <li data-md>
                            <p>如果 <var>result</var> 是 <code>"download-total-exceeded"</code>，则将
                                <var>immediateFailure</var> 设置为 true。
                            </p>
                    </ol>
                <li data-md>
                    <p>等待 <var>settledFetches</var> 等于 <var>bgFetch</var> 的 <a data-link-type="dfn"
                            href="#background-fetch-records" id="ref-for-background-fetch-records③">记录</a> 的 <a
                            data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-size"
                            id="ref-for-list-size">大小</a>，或 <var>immediateFailure</var> 为 true。</p>
                <li data-md>
                    <p>如果 <var>immediateFailure</var> 为 true，则将 <var>bgFetch</var> 的 <a data-link-type="dfn"
                            href="#background-fetch-abort-all-flag"
                            id="ref-for-background-fetch-abort-all-flag②">中止所有标志</a> 设置为 true。</p>
                    <p class="note" role="note"><span>注意：</span> <a data-link-type="dfn" href="#complete-a-record"
                            id="ref-for-complete-a-record①">完成记录</a> 算法会监听此标志，并在设置时终止获取。</p>
                <li data-md>
                    <p><a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/infrastructure.html#enqueue-the-following-steps"
                            id="ref-for-enqueue-the-following-steps">排队以下步骤</a> 到 <var>swRegistration</var> 的 <a
                            data-link-type="dfn"
                            href="#service-worker-registration-active-background-fetches-edit-queue"
                            id="ref-for-service-worker-registration-active-background-fetches-edit-queue">活跃后台获取编辑队列</a>：
                    </p>
                    <ol>
                        <li data-md>
                            <p>令 <var>activeBgFetches</var> 为 <var>swRegistration</var> 的 <a data-link-type="dfn"
                                    href="#service-worker-registration-active-background-fetches"
                                    id="ref-for-service-worker-registration-active-background-fetches">活跃后台获取</a>。</p>
                        <li data-md>
                            <p>令 <var>id</var> 为 <var>bgFetch</var> 的 <a data-link-type="dfn"
                                    href="#background-fetch-id" id="ref-for-background-fetch-id">id</a>。</p>
                        <li data-md>
                            <p>如果 <var>activeBgFetches</var> <a data-link-type="dfn" href="#contains-background-fetch"
                                    id="ref-for-contains-background-fetch">包含后台获取</a> <var>bgFetch</var>，则移除
                                <var>activeBgFetches</var>[<var>id</var>]。
                            </p>
                        <li data-md>
                            <p>否则，将 <var>failureReason</var> 设置为 <code>"aborted"</code>。</p>
                            <p class="note" role="note"><span>注意：</span> 这解决了一个竞争条件，在该条件下 <code
                                    class="idl"><a data-link-type="idl" href="#dom-backgroundfetchregistration-abort" id="ref-for-dom-backgroundfetchregistration-abort">abort()</a></code>
                                已成功调用，但其中一个获取操作同时失败。如果我们已经从 <code
                                    class="idl"><a data-link-type="idl" href="#dom-backgroundfetchregistration-abort" id="ref-for-dom-backgroundfetchregistration-abort①">abort()</a></code>
                                返回 true，这将确保我们触发相关的中止事件。</p>
                        <li data-md>
                            <p>如果 <var>failureReason</var> 不是空字符串，则：</p>
                            <ol>
                                <li data-md>
                                    <p>将 <var>bgFetch</var> 的 <a data-link-type="dfn" href="#background-fetch-result"
                                            id="ref-for-background-fetch-result③">结果</a> 设置为 <code>"failure"</code>。
                                    </p>
                                <li data-md>
                                    <p>将 <var>bgFetch</var> 的 <a data-link-type="dfn"
                                            href="#background-fetch-failure-reason"
                                            id="ref-for-background-fetch-failure-reason">失败原因</a> 设置为
                                        <var>failureReason</var>。
                                    </p>
                            </ol>
                        <li data-md>
                            <p>否则，将 <var>bgFetch</var> 的 <a data-link-type="dfn" href="#background-fetch-result"
                                    id="ref-for-background-fetch-result④">结果</a> 设置为
                                <code>"success"</code>。
                            </p>
                        <li data-md>
                            <p><a data-link-type="dfn" href="#update-background-fetch-instances"
                                    id="ref-for-update-background-fetch-instances">更新后台获取实例</a>
                                用于 <var>bgFetch</var>。</p>
                        <li data-md>
                            <p>令 <var>eventName</var> 为空字符串。</p>
                        <li data-md>
                            <p>令 <var>eventConstructor</var> 为 null。</p>
                        <li data-md>
                            <p>如果 <var>failureReason</var> 是 <code>"aborted"</code>，则：</p>
                            <ol>
                                <li data-md>
                                    <p>将 <var>eventName</var> 设置为 "<code>backgroundfetchabort</code>"。</p>
                                <li data-md>
                                    <p>将 <var>eventConstructor</var> 设置为 <code
                                            class="idl"><a data-link-type="idl" href="#backgroundfetchevent" id="ref-for-backgroundfetchevent">BackgroundFetchEvent</a></code>。
                                    </p>
                            </ol>
                        <li data-md>
                            <p>否则，如果 <var>failureReason</var> 不是空字符串，则：</p>
                            <ol>
                                <li data-md>
                                    <p>将 <var>eventName</var> 设置为 "<code>backgroundfetchfail</code>"。</p>
                                <li data-md>
                                    <p>将 <var>eventConstructor</var> 设置为 <code
                                            class="idl"><a data-link-type="idl" href="#backgroundfetchupdateuievent" id="ref-for-backgroundfetchupdateuievent">BackgroundFetchUpdateUIEvent</a></code>。
                                    </p>
                            </ol>
                        <li data-md>
                            <p>否则：</p>
                            <ol>
                                <li data-md>
                                    <p>将 <var>eventName</var> 设置为 "<code>backgroundfetchsuccess</code>"。</p>
                                <li data-md>
                                    <p>将 <var>eventConstructor</var> 设置为 <code
                                            class="idl"><a data-link-type="idl" href="#backgroundfetchupdateuievent" id="ref-for-backgroundfetchupdateuievent①">BackgroundFetchUpdateUIEvent</a></code>。
                                    </p>
                            </ol>
                        <li data-md>
                            <p><a data-link-type="dfn" href="https://w3c.github.io/ServiceWorker/#fire-functional-event"
                                    id="ref-for-fire-functional-event">触发一个功能事件</a>，命名为
                                <var>eventName</var>，使用 <var>eventConstructor</var> 在 <var>swRegistration</var>
                                上触发，属性如下：
                            </p>
                            <dl>
                                <dt data-md><code
                                        class="idl"><a data-link-type="idl" href="#dom-backgroundfetchevent-registration" id="ref-for-dom-backgroundfetchevent-registration">registration</a></code>
                                <dd data-md>
                                    <p><a data-link-type="dfn" href="#get-a-backgroundfetchregistration-instance"
                                            id="ref-for-get-a-backgroundfetchregistration-instance">获取一个
                                            BackgroundFetchRegistration 实例</a>，用于 <var>bgFetch</var> 在事件对象的 <a
                                            data-link-type="dfn"
                                            href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm"
                                            id="ref-for-concept-relevant-realm①">相关领域</a>。</p>
                            </dl>
                            <p>然后使用 <var>dispatchedEvent</var> 运行以下步骤，<a data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel"
                                    id="ref-for-in-parallel①">并行</a>：</p>
                            <ol>
                                <li data-md>
                                    <p>等待直到 <var>dispatchedEvent</var> 不再 <a data-link-type="dfn"
                                            href="https://w3c.github.io/ServiceWorker/#extendableevent-active"
                                            id="ref-for-extendableevent-active">活跃</a>。</p>
                                    <p class="issue" id="issue-b420dc4f"><a class="self-link"
                                            href="#issue-b420dc4f"></a> <a
                                            href="https://github.com/w3c/ServiceWorker/pull/1348">ServiceWorker/1348</a>。
                                    </p>
                                <li data-md>
                                    <p>取消设置 <var>bgFetch</var> 的 <a data-link-type="dfn"
                                            href="#background-fetch-records-available-flag"
                                            id="ref-for-background-fetch-records-available-flag">记录可用标志</a>。</p>
                                <li data-md>
                                    <p><a data-link-type="dfn" href="#update-background-fetch-instances"
                                            id="ref-for-update-background-fetch-instances①">更新后台获取实例</a>，用于
                                        <var>bgFetch</var>。
                                    </p>
                            </ol>
                    </ol>
            </ol>
        </div>
        <h3 class="heading settled" data-level="4.2" id="complete-a-record-algorithm"><span class="secno">4.2.
            </span><span class="content"><a data-link-type="dfn" href="#complete-a-record"
                    id="ref-for-complete-a-record②">完成记录</a></span><a class="self-link"
                href="#complete-a-record-algorithm"></a></h3>
        <p class="note" role="note"><span>注意：</span> 此算法管理 <a data-link-type="dfn" href="#background-fetch-record"
                id="ref-for-background-fetch-record①">后台获取记录</a> 的获取。每个 <a data-link-type="dfn"
                href="#background-fetch-record" id="ref-for-background-fetch-record②">后台获取记录</a>
            启动此算法的一个实例，但它会递归调用以重试获取或获取部分响应的下一部分。</p>
        <div class="algorithm" data-algorithm="complete a record">
            要为 <var>bgFetch</var>（一个 <a data-link-type="dfn" href="#background-fetch"
                id="ref-for-background-fetch⑥">后台获取</a>）和 <var>record</var>（一个 <a data-link-type="dfn"
                href="#background-fetch-record" id="ref-for-background-fetch-record③">后台获取记录</a>）完成记录，请运行以下步骤：
            <ol>
                <li data-md>
                    <p>令 <var>responseData</var> 为 <var>record</var> 的 <a data-link-type="dfn"
                            href="#background-fetch-record-response-data"
                            id="ref-for-background-fetch-record-response-data②">响应数据</a>。</p>
                <li data-md>
                    <p>令 <var>downloadTotal</var> 为 <var>bgFetch</var> 的 <a data-link-type="dfn"
                            href="#background-fetch-download-total"
                            id="ref-for-background-fetch-download-total①">下载总量</a>（如果不是 0），否则为 infinity。</p>
                <li data-md>
                    <p>等待 <var>bgFetch</var> 的 <a data-link-type="dfn" href="#background-fetch-paused-flag"
                            id="ref-for-background-fetch-paused-flag⑥">暂停标志</a> 被取消设置。</p>
                <li data-md>
                    <p>令 <var>request</var> 为 <var>record</var> 的 <a data-link-type="dfn"
                            href="#background-fetch-record-request" id="ref-for-background-fetch-record-request①">请求</a>
                        的副本。</p>
                    <p class="note" role="note"><span>注意：</span> 此时，请求完全存储在存储中，即使它最初是流。</p>
                <li data-md>
                    <p>设置 <var>request</var> 的 <a data-link-type="dfn">keepalive 标志</a>。</p>
                <li data-md>
                    <p>将 <var>request</var> 的 <a data-link-type="dfn"
                            href="https://fetch.spec.whatwg.org/#request-service-workers-mode"
                            id="ref-for-request-service-workers-mode①">Service Worker 模式</a> 设置为 "<code>none</code>"。
                    </p>
                <li data-md>
                    <p>令 <var>rangeStart</var> 为 <var>responseData</var> 的 <a data-link-type="dfn"
                            href="https://infra.spec.whatwg.org/#byte-sequence-length"
                            id="ref-for-byte-sequence-length①">字节</a> 的 <a data-link-type="dfn"
                            href="#background-fetch-response-bytes"
                            id="ref-for-background-fetch-response-bytes①">长度</a>。</p>
                <li data-md>
                    <p>如果 <var>rangeStart</var> 不为 0，则 <a data-link-type="dfn"
                            href="https://fetch.spec.whatwg.org/#concept-request-add-range-header"
                            id="ref-for-concept-request-add-range-header">添加 range 标头</a> 到 <var>request</var>，使用
                        <var>rangeStart</var>。
                    </p>
                    <p class="note" role="note"><span>注意：</span> 如果 <var>rangeStart</var> 为 0，则进行正常请求。这允许初始请求利用内容编码，因为带有
                        range 标头的请求会添加 <code>Accept-Encoding: identity</code>。</p>
                <li data-md>
                    <p>令 <var>fetchAttemptComplete</var> 为 false。</p>
                <li data-md>
                    <p>令 <var>lastTransmittedSize</var> 为 0。</p>
                <li data-md>
                    <p><a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-fetch"
                            id="ref-for-concept-fetch①">获取</a> <var>request</var>。</p>
                    <p class="issue" id="issue-775cdb79"><a class="self-link" href="#issue-775cdb79"></a> 本步骤的其余部分使用
                        fetch "回调"，目前将任务排队。这在这里不可取也不可能，所以假设任务没有排队。（<a
                            href="https://github.com/whatwg/fetch/issues/536#issuecomment-330184276">问题</a>）</p>
                    <p>为 <var>request</var> <a data-link-type="dfn">处理请求体</a>，运行以下步骤：</p>
                    <ol>
                        <li data-md>
                            <p>令 <var>transmittedSize</var> 为 <var>request</var> 的 <a data-link-type="dfn"
                                    href="https://fetch.spec.whatwg.org/#concept-request-body"
                                    id="ref-for-concept-request-body">请求体</a> 的 <a data-link-type="dfn">已传输字节</a>。</p>
                        <li data-md>
                            <p>将 <var>bgFetch</var> 的 <a data-link-type="dfn" href="#background-fetch-uploaded"
                                    id="ref-for-background-fetch-uploaded①">已上传</a> 增加 <var>transmittedSize</var> 减去
                                <var>lastTransmittedSize</var>。
                            </p>
                        <li data-md>
                            <p>将 <var>lastTransmittedSize</var> 设置为 <var>transmittedSize</var>。</p>
                        <li data-md>
                            <p><a data-link-type="dfn" href="#update-background-fetch-instances"
                                    id="ref-for-update-background-fetch-instances②">更新后台获取实例</a>，用于 <var>bgFetch</var>。
                            </p>
                    </ol>
                    <p>为 <var>response</var> <a data-link-type="dfn">处理响应</a>，运行以下步骤：</p>
                    <ol>
                        <li data-md>
                            <p>如果 <var>response</var> 是一个 <a data-link-type="dfn"
                                    href="https://fetch.spec.whatwg.org/#concept-network-error"
                                    id="ref-for-concept-network-error">网络错误</a>，则：</p>
                            <ol>
                                <li data-md>
                                    <p>如果资源是 <a data-link-type="dfn" href="#temporarily-unavailable"
                                            id="ref-for-temporarily-unavailable">暂时不可用</a>，并且 <var>request</var> 的 <a
                                            data-link-type="dfn"
                                            href="https://fetch.spec.whatwg.org/#concept-request-method"
                                            id="ref-for-concept-request-method②">方法</a> 是 `<code>GET</code>`，则等待资源不再 <a
                                            data-link-type="dfn" href="#temporarily-unavailable"
                                            id="ref-for-temporarily-unavailable①">暂时不可用</a>，然后将
                                        <var>fetchAttemptComplete</var> 设置为 true 并中止这些步骤。
                                    </p>
                                    <p class="note" role="note"><span>注意：</span> 如果 <var>request</var> 的 <a
                                            data-link-type="dfn"
                                            href="https://fetch.spec.whatwg.org/#concept-request-method"
                                            id="ref-for-concept-request-method③">方法</a> 不是
                                        `<code>GET</code>`，重新发出请求可能会产生不良副作用。如果有一种标准方法来恢复请求，它将在此采用。</p>
                                <li data-md>
                                    <p>如果 <var>response</var> 是一个 <a data-link-type="dfn"
                                            href="https://fetch.spec.whatwg.org/#concept-aborted-network-error"
                                            id="ref-for-concept-aborted-network-error">中止的网络错误</a>，则将
                                        <var>responseData</var> 的 <a data-link-type="dfn"
                                            href="#background-fetch-response-result"
                                            id="ref-for-background-fetch-response-result②">结果</a> 设置为
                                        <code>"aborted"</code>，否则设置为 <code>"fetch-error"</code>。
                                    </p>
                                <li data-md>
                                    <p>将 <var>fetchAttemptComplete</var> 设置为 true，并中止这些步骤。</p>
                            </ol>
                        <li data-md>
                            <p>如果 <var>response</var> 的 <a data-link-type="dfn"
                                    href="https://fetch.spec.whatwg.org/#concept-response-status"
                                    id="ref-for-concept-response-status">状态</a> 是 <code>206</code>，则：</p>
                            <ol>
                                <li data-md>
                                    <p>如果 <a data-link-type="dfn" href="#validate-a-partial-response"
                                            id="ref-for-validate-a-partial-response">验证部分响应</a>，对
                                        <var>rangeStart</var>、<var>response</var> 和 <var>responseData</var> 的 <a
                                            data-link-type="dfn" href="#background-fetch-response-response"
                                            id="ref-for-background-fetch-response-response①">响应</a> 返回无效，则：
                                    </p>
                                    <ol>
                                        <li data-md>
                                            <p>将 <var>responseData</var> 的 <a data-link-type="dfn"
                                                    href="#background-fetch-response-result"
                                                    id="ref-for-background-fetch-response-result③">结果</a> 设置为
                                                <code>"fetch-error"</code>。
                                            </p>
                                        <li data-md>
                                            <p>将 <var>fetchAttemptComplete</var> 设置为 true。</p>
                                        <li data-md>
                                            <p><a data-link-type="dfn"
                                                    href="https://fetch.spec.whatwg.org/#concept-fetch-terminate"
                                                    id="ref-for-concept-fetch-terminate">终止</a>正在进行的获取，并中止这些步骤。</p>
                                    </ol>
                            </ol>
                        <li data-md>
                            <p>否则：</p>
                            <ol>
                                <li data-md>
                                    <p>将 <var>responseData</var> 的 <a data-link-type="dfn"
                                            href="#background-fetch-response-result"
                                            id="ref-for-background-fetch-response-result④">结果</a> 设置为
                                        <code>"redundant"</code>。
                                    </p>
                                <li data-md>
                                    <p>将 <var>responseData</var> 设置为一个新的 <a data-link-type="dfn"
                                            href="#background-fetch-response"
                                            id="ref-for-background-fetch-response②">后台获取响应</a>。</p>
                                <li data-md>
                                    <p>将 <var>record</var> 的 <a data-link-type="dfn"
                                            href="#background-fetch-record-response-data"
                                            id="ref-for-background-fetch-record-response-data③">响应数据</a> 设置为
                                        <var>responseData</var>。
                                    </p>
                                    <p class="note" role="note"><span>注意：</span> <a data-link-type="dfn"
                                            href="#create-record-objects" id="ref-for-create-record-objects">创建记录对象</a>
                                        算法可能会保留对先前 <a data-link-type="dfn" href="#background-fetch-response"
                                            id="ref-for-background-fetch-response③">后台获取响应</a> 的引用。</p>
                                <li data-md>
                                    <p><a data-link-type="dfn" href="#update-background-fetch-instances"
                                            id="ref-for-update-background-fetch-instances③">更新后台获取实例</a>，用于
                                        <var>bgFetch</var>。
                                    </p>
                            </ol>
                        <li data-md>
                            <p>如果 <var>rangeStart</var> 为 0 或 <var>response</var> 的 <a data-link-type="dfn"
                                    href="https://fetch.spec.whatwg.org/#concept-response-status"
                                    id="ref-for-concept-response-status①">状态</a> 不是 <code>206</code>，则将
                                <var>responseData</var> 的 <a data-link-type="dfn"
                                    href="#background-fetch-response-response"
                                    id="ref-for-background-fetch-response-response②">响应</a> 设置为 <var>response</var>
                                的副本，除了它的 <a data-link-type="dfn"
                                    href="https://fetch.spec.whatwg.org/#concept-response-body"
                                    id="ref-for-concept-response-body">主体</a>。
                            </p>
                        <li data-md>
                            <p>令 <var>stream</var> 为 <var>response</var> 的 <a data-link-type="dfn"
                                    href="https://fetch.spec.whatwg.org/#concept-response-body"
                                    id="ref-for-concept-response-body①">主体</a> 的 <a data-link-type="dfn"
                                    href="https://fetch.spec.whatwg.org/#concept-body-stream"
                                    id="ref-for-concept-body-stream">流</a>。</p>
                        <li data-md>
                            <p>每当从 <var>stream</var> 传输一个或多个字节时，令 <var>bytes</var> 为已传输字节并运行以下步骤：</p>
                            <ol>
                                <li data-md>
                                    <p>如果 <var>bgFetch</var> 的 <a data-link-type="dfn"
                                            href="#background-fetch-stored-body-bytes-total"
                                            id="ref-for-background-fetch-stored-body-bytes-total①">已存储主体字节总量</a> 加上
                                        <var>bytes</var> 的大小大于 <var>downloadTotal</var>，则：
                                    </p>
                                    <ol>
                                        <li data-md>
                                            <p><a data-link-type="dfn"
                                                    href="https://streams.spec.whatwg.org/#readablestream-cancel"
                                                    id="ref-for-readablestream-cancel">取消</a> <var>stream</var>。</p>
                                        <li data-md>
                                            <p>将 <var>responseData</var> 的 <a data-link-type="dfn"
                                                    href="#background-fetch-response-result"
                                                    id="ref-for-background-fetch-response-result⑤">结果</a> 设置为
                                                <code>"download-total-exceeded"</code>，将 <var>fetchAttemptComplete</var>
                                                设置为 true，并中止这些步骤。
                                            </p>
                                    </ol>
                                <li data-md>
                                    <p>将 <var>bytes</var> 附加到 <var>responseData</var> 的 <a data-link-type="dfn"
                                            href="#background-fetch-response-bytes"
                                            id="ref-for-background-fetch-response-bytes②">字节</a>。</p>
                                <li data-md>
                                    <p>如果上一步因超出配额限制而失败，将 <var>responseData</var> 的 <a data-link-type="dfn"
                                            href="#background-fetch-response-result"
                                            id="ref-for-background-fetch-response-result⑥">结果</a> 设置为
                                        <code>"quota-exceeded"</code>，将 <var>fetchAttemptComplete</var> 设置为
                                        true，并中止这些步骤。
                                    </p>
                                <li data-md>
                                    <p><a data-link-type="dfn" href="#update-background-fetch-instances"
                                            id="ref-for-update-background-fetch-instances④">更新后台获取实例</a>，用于
                                        <var>bgFetch</var>。
                                    </p>
                            </ol>
                        <li data-md>
                            <p>如果 <var>stream</var> 的字节传输在任何时候正常完成，则：</p>
                            <ol>
                                <li data-md>
                                    <p>如果 <var>response</var> 的 <a data-link-type="dfn"
                                            href="https://fetch.spec.whatwg.org/#concept-response-status"
                                            id="ref-for-concept-response-status②">状态</a> 是 <code>206</code>，则：</p>
                                    <ol>
                                        <li data-md>
                                            <p>令 <var>firstBytePos</var>、<var>lastBytePos</var> 和
                                                <var>completeLength</var> 为 <a data-link-type="dfn"
                                                    href="#extract-content-range-values"
                                                    id="ref-for-extract-content-range-values">提取内容范围值</a> 的结果。
                                            </p>
                                        <li data-md>
                                            <p>如果 <var>completeLength</var> 不是 null，并且等于 <var>responseData</var> 的 <a
                                                    data-link-type="dfn"
                                                    href="https://infra.spec.whatwg.org/#byte-sequence-length"
                                                    id="ref-for-byte-sequence-length②">字节</a> 的 <a data-link-type="dfn"
                                                    href="#background-fetch-response-bytes"
                                                    id="ref-for-background-fetch-response-bytes③">长度</a>，则将
                                                <var>responseData</var> 的 <a data-link-type="dfn"
                                                    href="#background-fetch-response-result"
                                                    id="ref-for-background-fetch-response-result⑦">结果</a> 设置为
                                                <code>"success"</code>。
                                            </p>
                                            <p class="note" role="note"><span>注意：</span>
                                                虽然我们要求整个资源或资源的剩余部分，但服务器可能没有返回剩余部分，在这种情况下，我们需要再发出一个请求。</p>
                                    </ol>
                                <li data-md>
                                    <p>否则，如果 <var>response</var> 的 <a data-link-type="dfn"
                                            href="https://fetch.spec.whatwg.org/#concept-response-status"
                                            id="ref-for-concept-response-status③">状态</a> 不是 <a data-link-type="dfn"
                                            href="https://fetch.spec.whatwg.org/#ok-status" id="ref-for-ok-status">ok
                                            状态</a>，将 <var>responseData</var> 的 <a data-link-type="dfn"
                                            href="#background-fetch-response-result"
                                            id="ref-for-background-fetch-response-result⑧">结果</a> 设置为
                                        <code>"bad-status"</code>。
                                    </p>
                                <li data-md>
                                    <p>否则，将 <var>responseData</var> 的 <a data-link-type="dfn"
                                            href="#background-fetch-response-result"
                                            id="ref-for-background-fetch-response-result⑨">结果</a> 设置为
                                        <code>"success"</code>。
                                    </p>
                                <li data-md>
                                    <p>将 <var>fetchAttemptComplete</var> 设置为 true。</p>
                            </ol>
                        <li data-md>
                            <p>如果 <var>stream</var> 在任何时候 <a data-link-type="dfn"
                                    href="https://streams.spec.whatwg.org/#readablestream-errored"
                                    id="ref-for-readablestream-errored">出错</a>，则：</p>
                            <ol>
                                <li data-md>
                                    <p>如果资源是 <a data-link-type="dfn" href="#temporarily-unavailable"
                                            id="ref-for-temporarily-unavailable②">暂时不可用</a>，并且 <var>request</var> 的 <a
                                            data-link-type="dfn"
                                            href="https://fetch.spec.whatwg.org/#concept-request-method"
                                            id="ref-for-concept-request-method④">方法</a> 是 `<code>GET</code>`，则等待资源不再 <a
                                            data-link-type="dfn" href="#temporarily-unavailable"
                                            id="ref-for-temporarily-unavailable③">暂时不可用</a>，然后将
                                        <var>fetchAttemptComplete</var> 设置为 true。
                                    </p>
                                <li data-md>
                                    <p>否则，将 <var>responseData</var> 的 <a data-link-type="dfn"
                                            href="#background-fetch-response-result"
                                            id="ref-for-background-fetch-response-result①⓪">结果</a> 设置为
                                        <code>"fetch-error"</code>，并将 <var>fetchAttemptComplete</var> 设置为 true。
                                    </p>
                            </ol>
                    </ol>
                <li data-md>
                    <p>令 <var>result</var> 为空字符串。</p>
                <li data-md>
                    <p>运行以下步骤，但 <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#abort-when"
                            id="ref-for-abort-when">在中止时</a> <var>bgFetch</var> 的 <a data-link-type="dfn"
                            href="#background-fetch-paused-flag" id="ref-for-background-fetch-paused-flag⑦">暂停标志</a> 或
                        <a data-link-type="dfn" href="#background-fetch-abort-all-flag"
                            id="ref-for-background-fetch-abort-all-flag③">中止所有标志</a> 被设置：
                    </p>
                    <ol>
                        <li data-md>
                            <p>等待 <var>fetchAttemptComplete</var> 为 true。</p>
                        <li data-md>
                            <p>将 <var>result</var> 设置为 <var>responseData</var> 的 <a data-link-type="dfn"
                                    href="#background-fetch-response-result"
                                    id="ref-for-background-fetch-response-result①①">结果</a>。</p>
                    </ol>
                <li data-md>
                    <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#if-aborted"
                            id="ref-for-if-aborted">如果中止</a>，则：</p>
                    <ol>
                        <li data-md>
                            <p>如果 <var>bgFetch</var> 的 <a data-link-type="dfn" href="#background-fetch-paused-flag"
                                    id="ref-for-background-fetch-paused-flag⑧">暂停标志</a> 被设置，则断言 <var>request</var> 的 <a
                                    data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-method"
                                    id="ref-for-concept-request-method⑤">方法</a> 为 `<code>GET</code>`。</p>
                        <li data-md>
                            <p>如果 <var>bgFetch</var> 的 <a data-link-type="dfn" href="#background-fetch-abort-all-flag"
                                    id="ref-for-background-fetch-abort-all-flag④">中止所有标志</a> 被设置，则将
                                <var>responseData</var> 的 <a data-link-type="dfn"
                                    href="#background-fetch-response-result"
                                    id="ref-for-background-fetch-response-result①②">结果</a> 设置为 <code>"aborted"</code>。
                            </p>
                        <li data-md>
                            <p>将 <var>result</var> 设置为 <var>responseData</var> 的 <a data-link-type="dfn"
                                    href="#background-fetch-response-result"
                                    id="ref-for-background-fetch-response-result①③">结果</a>。</p>
                            <p class="note" role="note"><span>注意：</span> 结果现在被存储，因为终止获取可能会改变结果。</p>
                        <li data-md>
                            <p><a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-fetch-terminate"
                                    id="ref-for-concept-fetch-terminate①">终止</a>正在进行的获取。</p>
                    </ol>
                <li data-md>
                    <p>如果 <var>result</var> 为空字符串，则 <a data-link-type="dfn" href="#complete-a-record"
                            id="ref-for-complete-a-record③">完成记录</a>，用于 <var>bgFetch</var> 和 <var>record</var>。</p>
            </ol>
        </div>
        <h3 class="heading settled" data-level="4.3" id="update-background-fetch-instance-algorithm"><span
                class="secno">4.3. </span><span class="content"><a data-link-type="dfn"
                    href="#update-background-fetch-instances"
                    id="ref-for-update-background-fetch-instances⑤">更新后台获取实例</a></span><a class="self-link"
                href="#update-background-fetch-instance-algorithm"></a></h3>
        <div class="algorithm" data-algorithm="update background fetch instances">
            要 <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="update-background-fetch-instances">更新后台获取实例</dfn>，用于 <var>bgFetch</var>（一个 <a data-link-type="dfn"
                href="#background-fetch" id="ref-for-background-fetch⑦">后台获取</a>），请<a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/infrastructure.html#enqueue-the-following-steps"
                id="ref-for-enqueue-the-following-steps①">将以下步骤排队</a>到 <var>bgFetch</var> 的 <a data-link-type="dfn"
                href="#background-fetch-update-handling-queue"
                id="ref-for-background-fetch-update-handling-queue">更新处理队列</a>：
            <ol>
                <li data-md>
                    <p>令 <var>downloaded</var> 为 <var>bgFetch</var> 的 <a data-link-type="dfn"
                            href="#background-fetch-stored-body-bytes-total"
                            id="ref-for-background-fetch-stored-body-bytes-total②">已存储主体字节总量</a>。</p>
                <li data-md>
                    <p>令 <var>uploaded</var> 为 <var>bgFetch</var> 的 <a data-link-type="dfn"
                            href="#background-fetch-uploaded" id="ref-for-background-fetch-uploaded②">已上传</a>。</p>
                <li data-md>
                    <p>令 <var>result</var> 为 <var>bgFetch</var> 的 <a data-link-type="dfn"
                            href="#background-fetch-result" id="ref-for-background-fetch-result⑤">结果</a>。</p>
                <li data-md>
                    <p>令 <var>failureReason</var> 为 <var>bgFetch</var> 的 <a data-link-type="dfn"
                            href="#background-fetch-failure-reason"
                            id="ref-for-background-fetch-failure-reason①">失败原因</a>。</p>
                <li data-md>
                    <p>如果 <var>bgFetch</var> 的 <a data-link-type="dfn" href="#background-fetch-records-available-flag"
                            id="ref-for-background-fetch-records-available-flag①">记录可用标志</a> 被设置，则令
                        <var>recordsAvailable</var> 为 true，否则为 false。
                    </p>
                <li data-md>
                    <p>对于每个 <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object"
                            id="ref-for-environment-settings-object①">环境设置对象</a> <var>env</var>，其 <a
                            data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin"
                            id="ref-for-concept-settings-object-origin">origin</a> 等于 <var>bgFetch</var> 的 <a
                            data-link-type="dfn" href="#background-fetch-service-worker-registration"
                            id="ref-for-background-fetch-service-worker-registration②">Service Worker 注册</a> 的 <a
                            data-link-type="dfn" href="https://w3c.github.io/ServiceWorker/#dfn-scope-url"
                            id="ref-for-dfn-scope-url①">范围 URL</a> 的 <a data-link-type="dfn"
                            href="https://url.spec.whatwg.org/#concept-url-origin"
                            id="ref-for-concept-url-origin①">origin</a>，<a data-link-type="dfn"
                            href="#queue-a-bgfetch-task" id="ref-for-queue-a-bgfetch-task">排队一个后台获取任务</a>，用于
                        <var>env</var> 的 <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#responsible-event-loop"
                            id="ref-for-responsible-event-loop①">负责的事件循环</a>，运行以下步骤：
                    </p>
                    <ol>
                        <li data-md>
                            <p>令 <var>bgFetchRegistration</var> 为 <code
                                    class="idl"><a data-link-type="idl" href="#backgroundfetchregistration" id="ref-for-backgroundfetchregistration">BackgroundFetchRegistration</a></code>
                                的实例，位于 <a data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm"
                                    id="ref-for-concept-relevant-realm②">相关领域</a>，其 <a data-link-type="dfn"
                                    href="#backgroundfetchregistration-background-fetch"
                                    id="ref-for-backgroundfetchregistration-background-fetch">后台获取</a> 等于
                                <var>bgFetch</var>，如果不存在则为 null。
                            </p>
                            <p class="note" role="note"><span>注意：</span> 每个环境最多只有一个，因 <a data-link-type="dfn"
                                    href="#get-a-backgroundfetchregistration-instance"
                                    id="ref-for-get-a-backgroundfetchregistration-instance①">获取
                                    BackgroundFetchRegistration 实例</a> 算法所致。</p>
                        <li data-md>
                            <p>如果 <var>bgFetchRegistration</var> 为 null，则中止这些步骤。</p>
                        <li data-md>
                            <p>如果 <var>recordsAvailable</var> 为 false，且 <var>bgFetchRegistration</var> 的 <a
                                    data-link-type="dfn" href="#backgroundfetchregistration-records-available-flag"
                                    id="ref-for-backgroundfetchregistration-records-available-flag">记录可用标志</a> 被设置，则取消设置
                                <var>bgFetchRegistration</var> 的 <a data-link-type="dfn"
                                    href="#backgroundfetchregistration-records-available-flag"
                                    id="ref-for-backgroundfetchregistration-records-available-flag①">记录可用标志</a>。
                            </p>
                        <li data-md>
                            <p>如果 <var>bgFetchRegistration</var> 的 <a data-link-type="dfn"
                                    href="#backgroundfetchregistration-result"
                                    id="ref-for-backgroundfetchregistration-result">结果</a> 不是空字符串，则中止这些步骤。</p>
                            <p class="note" role="note"><span>注意：</span> 这可以防止在后台获取已结算后报告进度。当操作已中止，但某些获取尚未终止时，这是可能的。</p>
                        <li data-md>
                            <p>如果以下条件全为 true：</p>
                            <ul>
                                <li data-md>
                                    <p><var>bgFetchRegistration</var> 的 <a data-link-type="dfn"
                                            href="#backgroundfetchregistration-downloaded"
                                            id="ref-for-backgroundfetchregistration-downloaded">已下载</a> 等于
                                        <var>downloaded</var>。
                                    </p>
                                <li data-md>
                                    <p><var>bgFetchRegistration</var> 的 <a data-link-type="dfn"
                                            href="#backgroundfetchregistration-uploaded"
                                            id="ref-for-backgroundfetchregistration-uploaded">已上传</a> 等于
                                        <var>uploaded</var>。
                                    </p>
                                <li data-md>
                                    <p><var>bgFetchRegistration</var> 的 <a data-link-type="dfn"
                                            href="#backgroundfetchregistration-result"
                                            id="ref-for-backgroundfetchregistration-result①">结果</a> 等于
                                        <var>result</var>。
                                    </p>
                                <li data-md>
                                    <p><var>bgFetchRegistration</var> 的 <a data-link-type="dfn"
                                            href="#backgroundfetchregistration-failure-reason"
                                            id="ref-for-backgroundfetchregistration-failure-reason">失败原因</a> 等于
                                        <var>failureReason</var>。
                                    </p>
                            </ul>
                            <p>则中止这些步骤。</p>
                        <li data-md>
                            <p>将 <var>bgFetchRegistration</var> 的 <a data-link-type="dfn"
                                    href="#backgroundfetchregistration-downloaded"
                                    id="ref-for-backgroundfetchregistration-downloaded①">已下载</a> 设置为
                                <var>downloaded</var>。
                            </p>
                        <li data-md>
                            <p>将 <var>bgFetchRegistration</var> 的 <a data-link-type="dfn"
                                    href="#backgroundfetchregistration-uploaded"
                                    id="ref-for-backgroundfetchregistration-uploaded①">已上传</a> 设置为 <var>uploaded</var>。
                            </p>
                        <li data-md>
                            <p>将 <var>bgFetchRegistration</var> 的 <a data-link-type="dfn"
                                    href="#backgroundfetchregistration-result"
                                    id="ref-for-backgroundfetchregistration-result②">结果</a> 设置为 <var>result</var>。</p>
                        <li data-md>
                            <p>将 <var>bgFetchRegistration</var> 的 <a data-link-type="dfn"
                                    href="#backgroundfetchregistration-failure-reason"
                                    id="ref-for-backgroundfetchregistration-failure-reason①">失败原因</a> 设置为
                                <var>failureReason</var>。
                            </p>
                        <li data-md>
                            <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire"
                                    id="ref-for-concept-event-fire">触发一个事件</a>，名为 "<code>progress</code>"，在
                                <var>bgFetchRegistration</var> 上。
                            </p>
                    </ol>
                    <p class="issue" id="issue-20ad71fa"><a class="self-link" href="#issue-20ad71fa"></a>
                        我需要像鼠标移动事件那样防抖此事件。</p>
            </ol>
        </div>
        <h3 class="heading settled" data-level="4.4" id="fire-a-background-fetch-click-event-algorithm"><span
                class="secno">4.4. </span><span class="content"><a data-link-type="dfn"
                    href="#fire-a-background-fetch-click-event"
                    id="ref-for-fire-a-background-fetch-click-event①">触发后台获取点击事件</a></span><a class="self-link"
                href="#fire-a-background-fetch-click-event-algorithm"></a></h3>
        <div class="algorithm" data-algorithm="fire a background fetch click event">
            要<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="fire-a-background-fetch-click-event">触发后台获取点击事件</dfn>，用于 <var>bgFetch</var>（一个 <a
                data-link-type="dfn" href="#background-fetch" id="ref-for-background-fetch⑧">后台获取</a>），<a
                data-link-type="dfn" href="https://w3c.github.io/ServiceWorker/#fire-functional-event"
                id="ref-for-fire-functional-event①">触发一个功能性事件</a>，命名为
            "<code>backgroundfetchclick</code>"，使用 <code
                class="idl"><a data-link-type="idl" href="#backgroundfetchevent" id="ref-for-backgroundfetchevent①">BackgroundFetchEvent</a></code>，在
            <var>bgFetch</var> 的 <a data-link-type="dfn" href="#background-fetch-service-worker-registration"
                id="ref-for-background-fetch-service-worker-registration③">Service Worker 注册</a>上，具备以下属性：
            <dl>
                <dt data-md><code
                        class="idl"><a data-link-type="idl" href="#dom-backgroundfetchevent-registration" id="ref-for-dom-backgroundfetchevent-registration①">registration</a></code>
                <dd data-md>
                    <p>通过 <a data-link-type="dfn" href="#get-a-backgroundfetchregistration-instance"
                            id="ref-for-get-a-backgroundfetchregistration-instance②">获取 BackgroundFetchRegistration
                            实例</a> 的结果，应用于 <var>bgFetch</var>，在事件对象的 <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm"
                            id="ref-for-concept-relevant-realm③">相关领域</a>中。</p>
            </dl>
        </div>

        <h3 class="heading settled" data-level="4.5" id="get-a-backgroundfetchregistration-instance-algorithm"><span
                class="secno">4.5. </span><span class="content"><a data-link-type="dfn"
                    href="#get-a-backgroundfetchregistration-instance"
                    id="ref-for-get-a-backgroundfetchregistration-instance③">获取 BackgroundFetchRegistration
                    实例</a></span><a class="self-link" href="#get-a-backgroundfetchregistration-instance-algorithm"></a>
        </h3>
        <p class="note" role="note"><span>注意：</span> 该算法确保为给定的 <code
                class="idl"><a data-link-type="idl" href="#backgroundfetchregistration" id="ref-for-backgroundfetchregistration①">BackgroundFetchRegistration</a></code>
            实例返回相同的结果，用于整个 <code
                class="idl"><a data-link-type="idl" href="#backgroundfetchmanager" id="ref-for-backgroundfetchmanager">BackgroundFetchManager</a></code>
            生命周期中的给定 <a data-link-type="dfn" href="#background-fetch"
                id="ref-for-background-fetch⑨">后台获取</a>。浏览器可以优化此过程，只要无法通过相等性、扩展或弱关联数据来检测到为给定的<a data-link-type="dfn"
                href="#background-fetch" id="ref-for-background-fetch①⓪">后台获取</a>创建了多个实例即可。</p>
        <div class="algorithm" data-algorithm="get a BackgroundFetchRegistration instance">
            要<dfn class="dfn-paneled" data-dfn-type="dfn"
                data-lt="get a BackgroundFetchRegistration instance|getting a BackgroundFetchRegistration instance"
                data-noexport id="get-a-backgroundfetchregistration-instance">获取 BackgroundFetchRegistration 实例</dfn>，用于
            <var>bgFetch</var>（一个 <a data-link-type="dfn" href="#background-fetch"
                id="ref-for-background-fetch①①">后台获取</a>），在 <var>realm</var>（一个 <a data-link-type="dfn"
                href="https://tc39.github.io/ecma262/#realm" id="ref-for-realm">领域</a>）中，执行以下步骤：
            <ol>
                <li data-md>
                    <p>令 <var>instancesMap</var> 为该 <var>realm</var> 中唯一实例的 <a data-link-type="dfn"
                            href="#backgroundfetchmanager-backgroundfetchregistration-instances"
                            id="ref-for-backgroundfetchmanager-backgroundfetchregistration-instances">BackgroundFetchRegistration
                            实例</a>。</p>
                <li data-md>
                    <p>如果 <var>instancesMap</var>[<var>bgFetch</var>] <a data-link-type="dfn"
                            href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists">存在</a>，则返回
                        <var>instancesMap</var>[<var>bgFetch</var>]。
                    </p>
                <li data-md>
                    <p>令 <var>instance</var> 为一个新的 <code
                            class="idl"><a data-link-type="idl" href="#backgroundfetchregistration" id="ref-for-backgroundfetchregistration②">BackgroundFetchRegistration</a></code>，在
                        <var>realm</var> 中，其 <a data-link-type="dfn"
                            href="#backgroundfetchregistration-background-fetch"
                            id="ref-for-backgroundfetchregistration-background-fetch①">后台获取</a> 设置为 <var>bgFetch</var>。
                    </p>
                <li data-md>
                    <p>将 <var>instancesMap</var>[<var>bgFetch</var>] 设置为 <var>instance</var>。</p>
                <li data-md>
                    <p>返回 <var>instance</var>。</p>
            </ol>
        </div>
        <h3 class="heading settled" data-level="4.6" id="validate-partial-response-algorithm"><span class="secno">4.6.
            </span><span class="content"><a data-link-type="dfn" href="#validate-a-partial-response"
                    id="ref-for-validate-a-partial-response①">验证部分响应</a></span><a class="self-link"
                href="#validate-partial-response-algorithm"></a></h3>
        <p class="note" role="note"><span>注意：</span>该算法检查部分响应是否合理匹配所请求的内容，并可选地检查是否应与先前的响应合并。</p>
        <div class="algorithm" data-algorithm="validate a partial response">
            要<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="validate-a-partial-response">验证部分响应</dfn>，为
            <var>expectedRangeStart</var>（一个数字），<var>partialResponse</var>（一个 <a data-link-type="dfn"
                href="https://fetch.spec.whatwg.org/#concept-response" id="ref-for-concept-response①">响应</a>），和一个可选的
            <var>previousResponse</var>（一个 <a data-link-type="dfn"
                href="https://fetch.spec.whatwg.org/#concept-response" id="ref-for-concept-response②">响应</a> 或
            null，除非另有说明，否则为 null），执行以下步骤：
            <ol>
                <li data-md>
                    <p class="assertion">断言：<var>partialResponse</var> 的 <a data-link-type="dfn"
                            href="https://fetch.spec.whatwg.org/#concept-response-status"
                            id="ref-for-concept-response-status④">状态</a> 是 <code>206</code>。</p>
                <li data-md>
                    <p>令 <var>responseFirstBytePos</var>、<var>responseLastBytePos</var> 和
                        <var>responseCompleteLength</var> 为从 <var>partialResponse</var> 中 <a data-link-type="dfn"
                            href="#extract-content-range-values" id="ref-for-extract-content-range-values①">提取内容范围值</a>
                        的结果。如果失败，则返回无效。
                    </p>
                <li data-md>
                    <p>如果 <var>responseFirstBytePos</var> 不等于 <var>expectedRangeStart</var>，则返回无效。</p>
                <li data-md>
                    <p>如果 <var>previousResponse</var> 不为 null，则：</p>
                    <ol>
                        <li data-md>
                            <p>对于 « `<code>ETag</code>`、`<code>Last-Modified</code>` » 中的 <var>headerName</var>：</p>
                            <ol>
                                <li data-md>
                                    <p>如果 <var>previousResponse</var> 的 <a data-link-type="dfn"
                                            href="https://fetch.spec.whatwg.org/#concept-response-header-list"
                                            id="ref-for-concept-response-header-list">响应头列表</a> 包含
                                        <var>headerName</var>，并且 <var>headerName</var> 在 <var>previousResponse</var> 的
                                        <a data-link-type="dfn"
                                            href="https://fetch.spec.whatwg.org/#concept-response-header-list"
                                            id="ref-for-concept-response-header-list①">响应头列表</a> 中的合并值与在
                                        <var>partialResponse</var> 的 <a data-link-type="dfn"
                                            href="https://fetch.spec.whatwg.org/#concept-response-header-list"
                                            id="ref-for-concept-response-header-list②">响应头列表</a> 中的合并值不相等，则返回无效。
                                    </p>
                            </ol>
                        <li data-md>
                            <p>如果 <var>previousResponse</var> 的 <a data-link-type="dfn"
                                    href="https://fetch.spec.whatwg.org/#concept-response-status"
                                    id="ref-for-concept-response-status⑤">状态</a> 是 <code>206</code>，则：</p>
                            <ol>
                                <li data-md>
                                    <p>令 <var>previousResponseFirstBytePos</var>、<var>previousResponseLastBytePos</var>
                                        和 <var>previousResponseCompleteLength</var> 为从 <var>previousResponse</var> 中 <a
                                            data-link-type="dfn" href="#extract-content-range-values"
                                            id="ref-for-extract-content-range-values②">提取内容范围值</a> 的结果。如果失败，则返回无效。</p>
                                <li data-md>
                                    <p>如果 <var>previousResponseCompleteLength</var> 不为 null，且
                                        <var>responseCompleteLength</var> 不等于
                                        <var>previousResponseCompleteLength</var>，则返回无效。
                                    </p>
                            </ol>
                    </ol>
                <li data-md>
                    <p>返回有效。</p>
            </ol>
        </div>

        <h3 class="heading settled" data-level="4.7" id="extract-content-range-values-algorithm"><span
                class="secno">4.7. </span><span class="content"><a data-link-type="dfn"
                    href="#extract-content-range-values" id="ref-for-extract-content-range-values③">提取内容范围值</a></span><a
                class="self-link" href="#extract-content-range-values-algorithm"></a></h3>
        <p class="note" role="note"><span>注意：</span>该算法将 `<code>Content-Range</code>` 解析为 <a data-link-type="dfn"
                href="#single-byte-content-range" id="ref-for-single-byte-content-range">单字节内容范围</a> 并提取值。</p>
        <div class="algorithm" data-algorithm="extract content-range values">
            要<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="extract-content-range-values">提取内容范围值</dfn>，从 <var>response</var>（一个 <a data-link-type="dfn"
                href="https://fetch.spec.whatwg.org/#concept-response" id="ref-for-concept-response③">响应</a>）中，执行以下步骤：
            <ol>
                <li data-md>
                    <p>如果 <var>response</var> 的 <a data-link-type="dfn"
                            href="https://fetch.spec.whatwg.org/#concept-response-header-list"
                            id="ref-for-concept-response-header-list③">响应头列表</a> 不包含 `<code>Content-Range</code>`，则返回失败。
                    </p>
                <li data-md>
                    <p>令 <var>contentRangeValue</var> 为第一个 <a data-link-type="dfn"
                            href="https://fetch.spec.whatwg.org/#concept-header" id="ref-for-concept-header">响应头</a> 的
                        <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-header-value"
                            id="ref-for-concept-header-value">值</a>，其 <a data-link-type="dfn"
                            href="https://fetch.spec.whatwg.org/#concept-header-name"
                            id="ref-for-concept-header-name">名称</a> 与 `<code>Content-Range</code>` 字节大小写不敏感匹配，位于
                        <var>response</var> 的 <a data-link-type="dfn"
                            href="https://fetch.spec.whatwg.org/#concept-response-header-list"
                            id="ref-for-concept-response-header-list④">响应头列表</a>中。
                    </p>
                <li data-md>
                    <p>如果按 <a data-link-type="dfn" href="#single-byte-content-range"
                            id="ref-for-single-byte-content-range①">单字节内容范围</a> 解析 <var>contentRangeValue</var>
                        失败，则返回失败。</p>
                <li data-md>
                    <p>令 <var>firstBytePos</var> 为当 <var>contentRangeValue</var> 被解析为 <a data-link-type="dfn"
                            href="#single-byte-content-range" id="ref-for-single-byte-content-range②">单字节内容范围</a> 时，名为
                        <code>first-byte-pos</code> 的部分，解析为整数。
                    </p>
                <li data-md>
                    <p>令 <var>lastBytePos</var> 为当 <var>contentRangeValue</var> 被解析为 <a data-link-type="dfn"
                            href="#single-byte-content-range" id="ref-for-single-byte-content-range③">单字节内容范围</a> 时，名为
                        <code>last-byte-pos</code> 的部分，解析为整数。
                    </p>
                <li data-md>
                    <p>令 <var>completeLength</var> 为当 <var>contentRangeValue</var> 被解析为 <a data-link-type="dfn"
                            href="#single-byte-content-range" id="ref-for-single-byte-content-range④">单字节内容范围</a> 时，名为
                        <code>complete-length</code> 的部分。
                    </p>
                <li data-md>
                    <p>如果 <var>completeLength</var> 为 <code>"*"</code>，则将 <var>completeLength</var> 设置为 null，否则将
                        <var>completeLength</var> 设置为解析为整数的 <var>completeLength</var>。
                    </p>
                <li data-md>
                    <p>返回 <var>firstBytePos</var>、<var>lastBytePos</var> 和 <var>completeLength</var>。</p>
            </ol>
            <p class="issue" id="issue-cddfe468"><a class="self-link" href="#issue-cddfe468"></a> 解析为整数 <a
                    href="https://github.com/whatwg/infra/issues/189">infra/189</a>。</p>
        </div>
        <h3 class="heading settled" data-level="4.8" id="create-settled-fetches-algorithm"><span class="secno">4.8.
            </span><span class="content"><a data-link-type="dfn" href="#create-record-objects"
                    id="ref-for-create-record-objects①">创建记录对象</a></span><a class="self-link"
                href="#create-settled-fetches-algorithm"></a></h3>
        <p class="note" role="note"><span>注意：</span>该算法为 <a data-link-type="dfn" href="#background-fetch-record"
                id="ref-for-background-fetch-record④">后台获取记录</a> 创建平台对象。它还管理从存储的 <a data-link-type="dfn"
                href="#background-fetch-response-bytes" id="ref-for-background-fetch-response-bytes④">字节</a>流式传输 <a
                data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response"
                id="ref-for-concept-response④">响应</a>。此时后台获取操作可能仍在进行中。</p>
        <div class="algorithm" data-algorithm="create record objects">
            要<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="create-record-objects">创建记录对象</dfn>，从
            <var>records</var>（一个 <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list"
                id="ref-for-list②">列表</a>中的 <a data-link-type="dfn" href="#background-fetch-record"
                id="ref-for-background-fetch-record⑤">后台获取记录</a>）到 <var>realm</var>（一个 <a data-link-type="dfn"
                href="https://tc39.github.io/ecma262/#realm" id="ref-for-realm①">领域</a>），执行以下步骤：
            <p>所有平台对象必须在 <var>realm</var> 中创建。</p>
            <ol>
                <li data-md>
                    <p>令 <var>recordObjects</var> 为一个新的 <a data-link-type="dfn"
                            href="https://infra.spec.whatwg.org/#list" id="ref-for-list③">列表</a>。</p>
                <li data-md>
                    <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate"
                            id="ref-for-list-iterate②">对于每一个</a> <var>record</var> 中的 <var>records</var>：</p>
                    <ol>
                        <li data-md>
                            <p>令 <var>responseData</var> 为 <var>record</var> 的 <a data-link-type="dfn"
                                    href="#background-fetch-record-response-data"
                                    id="ref-for-background-fetch-record-response-data④">响应数据</a>。</p>
                        <li data-md>
                            <p>令 <var>recordObject</var> 为一个新的 <code
                                    class="idl"><a data-link-type="idl" href="#backgroundfetchrecord" id="ref-for-backgroundfetchrecord">BackgroundFetchRecord</a></code>。
                            </p>
                        <li data-md>
                            <p>设置 <var>recordObject</var> 的 <code
                                    class="idl"><a data-link-type="idl" href="#dom-backgroundfetchrecord-responseready" id="ref-for-dom-backgroundfetchrecord-responseready">responseReady</a></code>
                                为 <a data-link-type="dfn" href="https://heycam.github.io/webidl/#a-new-promise"
                                    id="ref-for-a-new-promise">一个新的 Promise</a>。</p>
                        <li data-md>
                            <p>令 <var>requestObject</var> 为一个新的 <code
                                    class="idl"><a data-link-type="idl" href="https://fetch.spec.whatwg.org/#request" id="ref-for-request">Request</a></code>
                                对象，包含以下内容：</p>
                            <dl>
                                <dt data-md><a data-link-type="dfn"
                                        href="https://fetch.spec.whatwg.org/#concept-request-request"
                                        id="ref-for-concept-request-request">请求</a>
                                <dd data-md>
                                    <p>一个 <var>record</var> 的 <a data-link-type="dfn"
                                            href="#background-fetch-record-request"
                                            id="ref-for-background-fetch-record-request②">请求</a> 的副本，包括它的 <a
                                            data-link-type="dfn"
                                            href="https://fetch.spec.whatwg.org/#concept-request-body"
                                            id="ref-for-concept-request-body①">主体</a>。</p>
                                <dt data-md><a data-link-type="dfn"
                                        href="https://fetch.spec.whatwg.org/#request-headers"
                                        id="ref-for-request-headers">头部</a>
                                <dd data-md>
                                    <p>与此 <code
                                            class="idl"><a data-link-type="idl" href="https://fetch.spec.whatwg.org/#request" id="ref-for-request①">Request</a></code>
                                        的 <a data-link-type="dfn"
                                            href="https://fetch.spec.whatwg.org/#concept-request-header-list"
                                            id="ref-for-concept-request-header-list">请求头列表</a> 相关联的新 <code
                                            class="idl"><a data-link-type="idl" href="https://fetch.spec.whatwg.org/#headers" id="ref-for-headers">Headers</a></code>
                                        对象。</p>
                            </dl>
                        <li data-md>
                            <p>将 <var>recordObject</var> 的 <code
                                    class="idl"><a data-link-type="idl" href="#dom-backgroundfetchrecord-request" id="ref-for-dom-backgroundfetchrecord-request">request</a></code>
                                设置为 <var>requestObject</var>。</p>
                        <li data-md>
                            <p>令 <var>transmittedBytes</var> 为 0。</p>
                        <li data-md>
                            <p>令 <var>stream</var> 为 <a data-link-type="dfn">一个新的可读流</a>，带有一个 pull 操作，返回 <a
                                    data-link-type="dfn" href="https://heycam.github.io/webidl/#a-new-promise"
                                    id="ref-for-a-new-promise①">一个新的 Promise</a> 并执行这些步骤 <a data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel"
                                    id="ref-for-in-parallel②">并行运行</a>：</p>
                            <ol>
                                <li data-md>
                                    <p>等待 <a data-link-type="dfn"
                                            href="https://infra.spec.whatwg.org/#byte-sequence-length"
                                            id="ref-for-byte-sequence-length③">字节序列长度</a> 大于
                                        <var>transmittedBytes</var>，或者 <var>responseData</var> 的 <a data-link-type="dfn"
                                            href="#background-fetch-response-result"
                                            id="ref-for-background-fetch-response-result①④">结果</a> 不是空字符串。
                                    </p>
                                <li data-md>
                                    <p>令 <var>bytes</var> 为 null。</p>
                                <li data-md>
                                    <p>如果 <var>responseData</var> 的 <a data-link-type="dfn"
                                            href="https://infra.spec.whatwg.org/#byte-sequence-length"
                                            id="ref-for-byte-sequence-length④">长度</a> 大于 <var>transmittedBytes</var> 且
                                        <var>responseData</var> 可以 <a data-link-type="dfn"
                                            href="#background-fetch-response-exposed"
                                            id="ref-for-background-fetch-response-exposed">暴露</a>，则：
                                    </p>
                                    <ol>
                                        <li data-md>
                                            <p>将 <var>bytes</var> 设置为从 <var>responseData</var> 的 <a data-link-type="dfn"
                                                    href="#background-fetch-response-bytes"
                                                    id="ref-for-background-fetch-response-bytes⑦">字节</a> 中，从
                                                <var>transmittedBytes</var> 偏移的用户代理确定的片段。
                                            </p>
                                            <p class="note" role="note"><span>注意：</span>这允许用户代理以适当的速率从存储中流式传输资源。</p>
                                        <li data-md>
                                            <p>将 <var>transmittedBytes</var> 增加 <var>bytes</var> 的 <a
                                                    data-link-type="dfn"
                                                    href="https://infra.spec.whatwg.org/#byte-sequence-length"
                                                    id="ref-for-byte-sequence-length⑤">长度</a>。</p>
                                    </ol>
                                <li data-md>
                                    <p><a data-link-type="dfn"
                                            href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task"
                                            id="ref-for-queue-a-task①">在任务队列中排队</a>，于 <var>stream</var> 的 <a
                                            data-link-type="dfn"
                                            href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object"
                                            id="ref-for-relevant-settings-object①">相关设置对象</a> 的 <a data-link-type="dfn"
                                            href="https://html.spec.whatwg.org/multipage/webappapis.html#responsible-event-loop"
                                            id="ref-for-responsible-event-loop②">负责的事件循环</a> 中，使用 <a
                                            data-link-type="dfn"
                                            href="https://html.spec.whatwg.org/multipage/webappapis.html#networking-task-source"
                                            id="ref-for-networking-task-source">网络任务源</a> 来运行这些步骤：</p>
                                    <ol>
                                        <li data-md>
                                            <p>如果 <var>bytes</var> 不是 null，则：</p>
                                            <ol>
                                                <li data-md>
                                                    <p>令 <var>array</var> 为一个新的 <code
                                                            class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-Uint8Array" id="ref-for-idl-Uint8Array">Uint8Array</a></code>，封装一个新的
                                                        <code
                                                            class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-ArrayBuffer" id="ref-for-idl-ArrayBuffer">ArrayBuffer</a></code>，由
                                                        <var>bytes</var> 构成。
                                                    </p>
                                                <li data-md>
                                                    <p><a data-link-type="dfn"
                                                            href="https://streams.spec.whatwg.org/#readablestream-enqueue"
                                                            id="ref-for-readablestream-enqueue">将</a> <var>array</var>
                                                        加入 <var>stream</var>。</p>
                                            </ol>
                                        <li data-md>
                                            <p>如果 <var>responseData</var> 可以 <a data-link-type="dfn"
                                                    href="#background-fetch-response-exposed"
                                                    id="ref-for-background-fetch-response-exposed①">暴露</a>，<var>responseData</var>
                                                的 <a data-link-type="dfn" href="#background-fetch-response-result"
                                                    id="ref-for-background-fetch-response-result①⑤">结果</a> 不是空字符串，并且
                                                <var>transmittedBytes</var> 为 <var>responseData</var> 的 <a
                                                    data-link-type="dfn"
                                                    href="https://infra.spec.whatwg.org/#byte-sequence-length"
                                                    id="ref-for-byte-sequence-length⑥">长度</a>，则 <a data-link-type="dfn"
                                                    href="https://streams.spec.whatwg.org/#readablestream-close"
                                                    id="ref-for-readablestream-close">关闭</a> <var>stream</var>。
                                            </p>
                                        <li data-md>
                                            <p>否则，如果 <var>responseData</var> 的 <a data-link-type="dfn"
                                                    href="#background-fetch-response-result"
                                                    id="ref-for-background-fetch-response-result①⑥">结果</a> 是
                                                <code>"已中止"</code>，则 <a data-link-type="dfn"
                                                    href="https://streams.spec.whatwg.org/#readablestream-error"
                                                    id="ref-for-readablestream-error">抛出错误</a>，使用 <code
                                                    class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#aborterror" id="ref-for-aborterror">AbortError</a></code>
                                                <code
                                                    class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-DOMException" id="ref-for-idl-DOMException">DOMException</a></code>。
                                            </p>
                                        <li data-md>
                                            <p>否则，如果 <var>responseData</var> 不能被 <a data-link-type="dfn"
                                                    href="#background-fetch-response-exposed"
                                                    id="ref-for-background-fetch-response-exposed②">暴露</a>，则 <a
                                                    data-link-type="dfn"
                                                    href="https://streams.spec.whatwg.org/#readablestream-error"
                                                    id="ref-for-readablestream-error①">抛出错误</a>，使用 <code
                                                    class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror">TypeError</a></code>。
                                            </p>
                                        <li data-md>
                                            <p><a data-link-type="dfn" href="https://heycam.github.io/webidl/#resolve"
                                                    id="ref-for-resolve">解决</a> <var>promise</var>。</p>
                                    </ol>
                            </ol>
                        <li data-md>
                            <p><a data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel"
                                    id="ref-for-in-parallel③">并行</a>运行这些步骤：</p>
                            <ol>
                                <li data-md>
                                    <p>等待 <var>responseData</var> 的 <a data-link-type="dfn"
                                            href="#background-fetch-response-response"
                                            id="ref-for-background-fetch-response-response③">响应</a> 变为非空。</p>
                                <li data-md>
                                    <p>如果 <var>responseData</var> 可以 <a data-link-type="dfn"
                                            href="#background-fetch-response-exposed"
                                            id="ref-for-background-fetch-response-exposed③">暴露</a>，则：</p>
                                    <ol>
                                        <li data-md>
                                            <p>令 <var>response</var> 为 <var>responseData</var> 的 <a data-link-type="dfn"
                                                    href="#background-fetch-response-response"
                                                    id="ref-for-background-fetch-response-response④">响应</a> 的副本。</p>
                                        <li data-md>
                                            <p><a data-link-type="dfn"
                                                    href="https://fetch.spec.whatwg.org/#concept-header-list-delete"
                                                    id="ref-for-concept-header-list-delete">删除</a>
                                                `<code>Content-Range</code>` 从 <var>response</var> 的 <a
                                                    data-link-type="dfn"
                                                    href="https://fetch.spec.whatwg.org/#concept-response-header-list"
                                                    id="ref-for-concept-response-header-list⑤">头列表</a> 中。</p>
                                        <li data-md>
                                            <p><a data-link-type="dfn"
                                                    href="https://fetch.spec.whatwg.org/#concept-header-list-delete"
                                                    id="ref-for-concept-header-list-delete①">删除</a>
                                                `<code>Content-Length</code>` 从 <var>response</var> 的 <a
                                                    data-link-type="dfn"
                                                    href="https://fetch.spec.whatwg.org/#concept-response-header-list"
                                                    id="ref-for-concept-response-header-list⑥">头列表</a> 中。</p>
                                        <li data-md>
                                            <p>令 <var>body</var> 为一个新的 <a data-link-type="dfn"
                                                    href="https://fetch.spec.whatwg.org/#concept-body"
                                                    id="ref-for-concept-body">主体</a>，其中 <a data-link-type="dfn"
                                                    href="https://fetch.spec.whatwg.org/#concept-body-stream"
                                                    id="ref-for-concept-body-stream①">流</a> 设置为 <var>stream</var>。</p>
                                        <li data-md>
                                            <p>将 <var>response</var> 的 <a data-link-type="dfn"
                                                    href="https://fetch.spec.whatwg.org/#concept-response-body"
                                                    id="ref-for-concept-response-body②">主体</a> 设置为 <var>body</var>。</p>
                                        <li data-md>
                                            <p><a data-link-type="dfn"
                                                    href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task"
                                                    id="ref-for-queue-a-task②">在任务队列中排队</a>，于 <var>recordObject</var> 的
                                                <a data-link-type="dfn"
                                                    href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object"
                                                    id="ref-for-relevant-settings-object②">相关设置对象</a> 的 <a
                                                    data-link-type="dfn"
                                                    href="https://html.spec.whatwg.org/multipage/webappapis.html#responsible-event-loop"
                                                    id="ref-for-responsible-event-loop③">负责的事件循环</a> 中，使用 <a
                                                    data-link-type="dfn"
                                                    href="https://html.spec.whatwg.org/multipage/webappapis.html#networking-task-source"
                                                    id="ref-for-networking-task-source①">网络任务源</a> 来运行这些步骤：
                                            </p>
                                            <ol>
                                                <li data-md>
                                                    <p>令 <var>responseObject</var> 为一个新的 <code
                                                            class="idl"><a data-link-type="idl" href="https://fetch.spec.whatwg.org/#response" id="ref-for-response">Response</a></code>
                                                        对象，包含以下内容：</p>
                                                    <dl>
                                                        <dt data-md><a data-link-type="dfn"
                                                                href="https://fetch.spec.whatwg.org/#concept-response-response"
                                                                id="ref-for-concept-response-response">响应</a>
                                                        <dd data-md>
                                                            <p><var>response</var>。</p>
                                                        <dt data-md><a data-link-type="dfn"
                                                                href="https://fetch.spec.whatwg.org/#response-headers"
                                                                id="ref-for-response-headers">头部</a>
                                                        <dd data-md>
                                                            <p>与此 <code
                                                                    class="idl"><a data-link-type="idl" href="https://fetch.spec.whatwg.org/#response" id="ref-for-response①">Response</a></code>
                                                                的 <a data-link-type="dfn"
                                                                    href="https://fetch.spec.whatwg.org/#concept-response-response"
                                                                    id="ref-for-concept-response-response①">响应</a> 的 <a
                                                                    data-link-type="dfn"
                                                                    href="https://fetch.spec.whatwg.org/#concept-response-header-list"
                                                                    id="ref-for-concept-response-header-list⑦">头列表</a>
                                                                相关联的新 <code
                                                                    class="idl"><a data-link-type="idl" href="https://fetch.spec.whatwg.org/#headers" id="ref-for-headers①">Headers</a></code>
                                                                对象。</p>
                                                    </dl>
                                                <li data-md>
                                                    <p><a data-link-type="dfn"
                                                            href="https://heycam.github.io/webidl/#resolve"
                                                            id="ref-for-resolve①">解决</a> <var>recordObject</var> 的 <code
                                                            class="idl"><a data-link-type="idl" href="#dom-backgroundfetchrecord-responseready" id="ref-for-dom-backgroundfetchrecord-responseready①">responseReady</a></code>，并带有
                                                        <var>responseObject</var>。
                                                    </p>
                                            </ol>
                                    </ol>
                                <li data-md>
                                    <p>否则，如果 <var>responseData</var> 的 <a data-link-type="dfn"
                                            href="#background-fetch-response-result"
                                            id="ref-for-background-fetch-response-result①⑦">结果</a> 是
                                        <code>"已中止"</code>，则 <a data-link-type="dfn"
                                            href="https://heycam.github.io/webidl/#reject" id="ref-for-reject">拒绝</a>
                                        <var>recordObject</var> 的 <code
                                            class="idl"><a data-link-type="idl" href="#dom-backgroundfetchrecord-responseready" id="ref-for-dom-backgroundfetchrecord-responseready②">responseReady</a></code>，并附带
                                        <code
                                            class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#aborterror" id="ref-for-aborterror①">AbortError</a></code>
                                        <code
                                            class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-DOMException" id="ref-for-idl-DOMException①">DOMException</a></code>。
                                    </p>
                                <li data-md>
                                    <p>否则，<a data-link-type="dfn" href="https://heycam.github.io/webidl/#reject"
                                            id="ref-for-reject①">拒绝</a> <var>recordObject</var> 的 <code
                                            class="idl"><a data-link-type="idl" href="#dom-backgroundfetchrecord-responseready" id="ref-for-dom-backgroundfetchrecord-responseready③">responseReady</a></code>，并附带
                                        <code
                                            class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①">TypeError</a></code>。
                                    </p>
                            </ol>
                        <li data-md>
                            <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append"
                                    id="ref-for-list-append">将</a> <var>recordObject</var> 附加到 <var>recordObjects</var>。
                            </p>
                    </ol>
                <li data-md>
                    <p>返回 <var>recordObjects</var>。</p>
            </ol>
        </div>
        <h3 class="heading settled" data-level="4.9" id="contains-background-fetch-algorithm"><span class="secno">4.9.
            </span><span class="content"><a data-link-type="dfn" href="#contains-background-fetch"
                    id="ref-for-contains-background-fetch①">包含后台提取</a></span><a class="self-link"
                href="#contains-background-fetch-algorithm"></a></h3>
        <div class="algorithm" data-algorithm="contains background fetch">
            要确定 <var>map</var> (一个 <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map"
                id="ref-for-ordered-map②">map</a>) 是否 <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="contains-background-fetch">包含后台提取</dfn> <var>bgFetch</var> (一个 <a data-link-type="dfn"
                href="#background-fetch" id="ref-for-background-fetch①②">后台提取</a>)，请执行以下步骤：
            <ol>
                <li data-md>
                    <p>让 <var>id</var> 成为 <var>bgFetch</var> 的 <a data-link-type="dfn" href="#background-fetch-id"
                            id="ref-for-background-fetch-id①">id</a>。</p>
                </li>
                <li data-md>
                    <p>如果 <var>map</var> [<var>id</var>] 不 <a data-link-type="dfn"
                            href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists①">存在</a>，则返回 false。
                    </p>
                </li>
                <li data-md>
                    <p>如果 <var>map</var> [<var>id</var>] 不等于 <var>bgFetch</var>，则返回 false。</p>
                </li>
                <li data-md>
                    <p>返回 true。</p>
                </li>
            </ol>
        </div>
        <div class="algorithm" data-algorithm="does not contain background fetch">
            要确定 <var>map</var> (一个 <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map"
                id="ref-for-ordered-map③">map</a>) 是否 <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="does-not-contain-background-fetch">不包含后台提取</dfn> <var>bgFetch</var> (一个 <a data-link-type="dfn"
                href="#background-fetch" id="ref-for-background-fetch①③">后台提取</a>)，请执行以下步骤：
            <ol>
                <li data-md>
                    <p>如果 <var>map</var> <a data-link-type="dfn" href="#contains-background-fetch"
                            id="ref-for-contains-background-fetch②">包含后台提取</a> <var>bgFetch</var>，则返回 false。</p>
                </li>
                <li data-md>
                    <p>返回 true。</p>
                </li>
            </ol>
        </div>
        <h2 class="heading settled" data-level="5" id="header-syntax"><span class="secno">5. </span><span
                class="content">标头语法</span><a class="self-link" href="#header-syntax"></a></h2>
        <p>以下是用于 <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc7230#section-7"
                id="ref-for-section-7">HTTP ABNF</a> 的 <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="single-byte-content-range">单字节内容范围</dfn> 语法：</p>
        <pre>"bytes=" first-byte-pos "-" last-byte-pos "/" complete-length
first-byte-pos = 1*DIGIT
last-byte-pos  = 1*DIGIT
complete-length = ( 1*DIGIT / "*" )</pre>
        <p class="note" role="note"><span>注意：</span> 这是 <a href="https://tools.ietf.org/html/rfc7233#section-3.1">RFC
                7233</a> 允许的子集。</p>
        <div class="note" role="note">
            <p>以上内容的铁路图：</p>

            <div class="railroad">
                <svg class="railroad-diagram" height="197" viewBox="0 0 651 197" width="651">
                    <g transform="translate(.5 .5)">
                        <path d="M 20 21 v 20 m 10 -20 v 20 m -10 -10 h 20.5"></path>
                        <path d="M40 31h10"></path>
                        <g class="terminal">
                            <path d="M50 31h0"></path>
                            <path d="M134 31h0"></path>
                            <rect height="22" rx="10" ry="10" width="84" x="50" y="20"></rect>
                            <text x="92" y="35">"bytes="</text>
                        </g>
                        <path d="M134 31h10"></path>
                        <path d="M144 31h10"></path>
                        <g>
                            <path d="M154 31h0"></path>
                            <path d="M154 31h10"></path>
                            <g>
                                <path d="M164 31h10"></path>
                                <path d="M581 31h10"></path>
                                <g>
                                    <path d="M174 31h0"></path>
                                    <path d="M282 31h0"></path>
                                    <text class="comment" x="228" y="36">first-byte-pos</text>
                                </g>
                                <path d="M282 31h10"></path>
                                <path d="M292 31h10"></path>
                                <g>
                                    <path d="M302 31h0"></path>
                                    <path d="M382 31h0"></path>
                                    <path d="M302 31h10"></path>
                                    <g class="non-terminal">
                                        <path d="M312 31h0"></path>
                                        <path d="M372 31h0"></path>
                                        <rect height="22" width="60" x="312" y="20"></rect>
                                        <text x="342" y="35">digit</text>
                                    </g>
                                    <path d="M372 31h10"></path>
                                    <path d="M312 31a10 10 0 0 0 -10 10v0a10 10 0 0 0 10 10"></path>
                                    <g>
                                        <path d="M312 51h60"></path>
                                    </g>
                                    <path d="M372 51a10 10 0 0 0 10 -10v0a10 10 0 0 0 -10 -10"></path>
                                </g>
                                <path d="M382 31h10"></path>
                                <path d="M392 31h10"></path>
                                <g>
                                    <path d="M402 31h0"></path>
                                    <path d="M517 31h0"></path>
                                    <text class="comment" x="459.5" y="36">/first-byte-pos</text>
                                </g>
                                <path d="M517 31h10"></path>
                                <path d="M527 31h10"></path>
                                <g class="non-terminal">
                                    <path d="M537 31h0"></path>
                                    <path d="M581 31h0"></path>
                                    <rect height="22" width="44" x="537" y="20"></rect>
                                    <text x="559" y="35">"/"</text>
                                </g>
                            </g>
                            <path
                                d="M591 31a10 10 0 0 1 10 10v8a10 10 0 0 1 -10 10h-427a10 10 0 0 0 -10 10v0a10 10 0 0 0 10 10">
                            </path>
                            <g>
                                <path d="M164 79h17"></path>
                                <path d="M574 79h17"></path>
                                <g>
                                    <path d="M181 79h0"></path>
                                    <path d="M282 79h0"></path>
                                    <text class="comment" x="231.5" y="84">last-byte-pos</text>
                                </g>
                                <path d="M282 79h10"></path>
                                <path d="M292 79h10"></path>
                                <g>
                                    <path d="M302 79h0"></path>
                                    <path d="M382 79h0"></path>
                                    <path d="M302 79h10"></path>
                                    <g class="non-terminal">
                                        <path d="M312 79h0"></path>
                                        <path d="M372 79h0"></path>
                                        <rect height="22" width="60" x="312" y="68"></rect>
                                        <text x="342" y="83">digit</text>
                                    </g>
                                    <path d="M372 79h10"></path>
                                    <path d="M312 79a10 10 0 0 0 -10 10v0a10 10 0 0 0 10 10"></path>
                                    <g>
                                        <path d="M312 99h60"></path>
                                    </g>
                                    <path d="M372 99a10 10 0 0 0 10 -10v0a10 10 0 0 0 -10 -10"></path>
                                </g>
                                <path d="M382 79h10"></path>
                                <path d="M392 79h10"></path>
                                <g>
                                    <path d="M402 79h0"></path>
                                    <path d="M510 79h0"></path>
                                    <text class="comment" x="456" y="84">/last-byte-pos</text>
                                </g>
                                <path d="M510 79h10"></path>
                                <path d="M520 79h10"></path>
                                <g class="non-terminal">
                                    <path d="M530 79h0"></path>
                                    <path d="M574 79h0"></path>
                                    <rect height="22" width="44" x="530" y="68"></rect>
                                    <text x="552" y="83">"/"</text>
                                </g>
                            </g>
                            <path
                                d="M591 79a10 10 0 0 1 10 10v8a10 10 0 0 1 -10 10h-427a10 10 0 0 0 -10 10v0a10 10 0 0 0 10 10">
                            </path>
                            <g>
                                <path d="M164 127h25"></path>
                                <path d="M566 127h25"></path>
                                <g>
                                    <path d="M189 127h0"></path>
                                    <path d="M304 127h0"></path>
                                    <text class="comment" x="246.5" y="132">complete-length</text>
                                </g>
                                <path d="M304 127h10"></path>
                                <g>
                                    <path d="M314 127h0"></path>
                                    <path d="M434 127h0"></path>
                                    <path d="M314 127h20"></path>
                                    <g class="non-terminal">
                                        <path d="M334 127h18"></path>
                                        <path d="M396 127h18"></path>
                                        <rect height="22" width="44" x="352" y="116"></rect>
                                        <text x="374" y="131">"*"</text>
                                    </g>
                                    <path d="M414 127h20"></path>
                                    <path d="M314 127a10 10 0 0 1 10 10v10a10 10 0 0 0 10 10"></path>
                                    <g>
                                        <path d="M334 157h0"></path>
                                        <path d="M414 157h0"></path>
                                        <path d="M334 157h10"></path>
                                        <g class="non-terminal">
                                            <path d="M344 157h0"></path>
                                            <path d="M404 157h0"></path>
                                            <rect height="22" width="60" x="344" y="146"></rect>
                                            <text x="374" y="161">digit</text>
                                        </g>
                                        <path d="M404 157h10"></path>
                                        <path d="M344 157a10 10 0 0 0 -10 10v0a10 10 0 0 0 10 10"></path>
                                        <g>
                                            <path d="M344 177h60"></path>
                                        </g>
                                        <path d="M404 177a10 10 0 0 0 10 -10v0a10 10 0 0 0 -10 -10"></path>
                                    </g>
                                    <path d="M414 157a10 10 0 0 0 10 -10v-10a10 10 0 0 1 10 -10"></path>
                                </g>
                                <path d="M434 127h10"></path>
                                <g>
                                    <path d="M444 127h0"></path>
                                    <path d="M566 127h0"></path>
                                    <text class="comment" x="505" y="132">/complete-length</text>
                                </g>
                            </g>
                            <path d="M591 127h10"></path>
                            <path d="M601 127h0"></path>
                        </g>
                        <path d="M601 127h10"></path>
                        <path d="M 611 127 h 20 m -10 -10 v 20 m 10 -20 v 20"></path>
                    </g>
                </svg>
            </div>
        </div>
        <h2 class="heading settled" data-level="6" id="api"><span class="secno">6. </span><span
                class="content">API</span><a class="self-link" href="#api"></a></h2>
        <h3 class="heading settled" data-level="6.1" id="extensions-to-service-worker-global"><span class="secno">6.1.
            </span><span class="content">对 <code
                    class="idl"><a data-link-type="idl" href="https://w3c.github.io/ServiceWorker/#serviceworkerglobalscope" id="ref-for-serviceworkerglobalscope">ServiceWorkerGlobalScope</a></code>
                的扩展</span><a class="self-link" href="#extensions-to-service-worker-global"></a></h3>
        <pre class="idl highlight def"><c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://w3c.github.io/ServiceWorker/#serviceworkerglobalscope" id="ref-for-serviceworkerglobalscope①"><c- g>ServiceWorkerGlobalScope</c-></a> {
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" id="ref-for-eventhandler"><c- n>EventHandler</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ServiceWorkerGlobalScope" data-dfn-type="attribute" data-export data-type="EventHandler" id="dom-serviceworkerglobalscope-onbackgroundfetchsuccess"><code><c- g>onbackgroundfetchsuccess</c-></code></dfn>;
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" id="ref-for-eventhandler①"><c- n>EventHandler</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ServiceWorkerGlobalScope" data-dfn-type="attribute" data-export data-type="EventHandler" id="dom-serviceworkerglobalscope-onbackgroundfetchfail"><code><c- g>onbackgroundfetchfail</c-></code></dfn>;
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" id="ref-for-eventhandler②"><c- n>EventHandler</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ServiceWorkerGlobalScope" data-dfn-type="attribute" data-export data-type="EventHandler" id="dom-serviceworkerglobalscope-onbackgroundfetchabort"><code><c- g>onbackgroundfetchabort</c-></code></dfn>;
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" id="ref-for-eventhandler③"><c- n>EventHandler</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ServiceWorkerGlobalScope" data-dfn-type="attribute" data-export data-type="EventHandler" id="dom-serviceworkerglobalscope-onbackgroundfetchclick"><code><c- g>onbackgroundfetchclick</c-></code></dfn>;
};
</pre>
        <h4 class="heading settled" data-level="6.1.1" id="service-worker-global-events"><span class="secno">6.1.1.
            </span><span class="content">事件</span><a class="self-link" href="#service-worker-global-events"></a></h4>
        <p>以下是 <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers"
                id="ref-for-event-handlers">事件处理程序</a>（及其对应的 <a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type"
                id="ref-for-event-handler-event-type">事件处理程序事件类型</a>），这些程序作为 <a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes"
                id="ref-for-event-handler-idl-attributes">事件处理程序 IDL 属性</a> 必须被所有实现了 <code
                class="idl"><a data-link-type="idl" href="https://w3c.github.io/ServiceWorker/#serviceworker" id="ref-for-serviceworker">ServiceWorker</a></code>
            接口的对象支持：</p>
        <table class="data">
            <thead>
                <tr>
                    <th><a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type"
                            id="ref-for-event-handler-event-type①">事件处理程序事件类型</a>
                    <th><a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers"
                            id="ref-for-event-handlers①">事件处理程序</a>
                    <th>接口
            <tbody>
                <tr>
                    <td><dfn class="idl-code" data-dfn-for="ServiceWorkerGlobalScope" data-dfn-type="event" data-export
                            id="eventdef-serviceworkerglobalscope-backgroundfetchsuccess"><code>backgroundfetchsuccess</code><a
                                class="self-link"
                                href="#eventdef-serviceworkerglobalscope-backgroundfetchsuccess"></a></dfn>
                    <td><code
                            class="idl"><a data-link-type="idl" href="#dom-serviceworkerglobalscope-onbackgroundfetchsuccess" id="ref-for-dom-serviceworkerglobalscope-onbackgroundfetchsuccess">onbackgroundfetchsuccess</a></code>
                    <td><code
                            class="idl"><a data-link-type="idl" href="#backgroundfetchupdateuievent" id="ref-for-backgroundfetchupdateuievent②">BackgroundFetchUpdateUIEvent</a></code>
                <tr>
                    <td><dfn class="idl-code" data-dfn-for="ServiceWorkerGlobalScope" data-dfn-type="event" data-export
                            id="eventdef-serviceworkerglobalscope-backgroundfetchfail"><code>backgroundfetchfail</code><a
                                class="self-link"
                                href="#eventdef-serviceworkerglobalscope-backgroundfetchfail"></a></dfn>
                    <td><code
                            class="idl"><a data-link-type="idl" href="#dom-serviceworkerglobalscope-onbackgroundfetchfail" id="ref-for-dom-serviceworkerglobalscope-onbackgroundfetchfail">onbackgroundfetchfail</a></code>
                    <td><code
                            class="idl"><a data-link-type="idl" href="#backgroundfetchupdateuievent" id="ref-for-backgroundfetchupdateuievent③">BackgroundFetchUpdateUIEvent</a></code>
                <tr>
                    <td><dfn class="idl-code" data-dfn-for="ServiceWorkerGlobalScope" data-dfn-type="event" data-export
                            id="eventdef-serviceworkerglobalscope-backgroundfetchabort"><code>backgroundfetchabort</code><a
                                class="self-link"
                                href="#eventdef-serviceworkerglobalscope-backgroundfetchabort"></a></dfn>
                    <td><code
                            class="idl"><a data-link-type="idl" href="#dom-serviceworkerglobalscope-onbackgroundfetchabort" id="ref-for-dom-serviceworkerglobalscope-onbackgroundfetchabort">onbackgroundfetchabort</a></code>
                    <td><code
                            class="idl"><a data-link-type="idl" href="#backgroundfetchevent" id="ref-for-backgroundfetchevent②">BackgroundFetchEvent</a></code>
                <tr>
                    <td><dfn class="idl-code" data-dfn-for="ServiceWorkerGlobalScope" data-dfn-type="event" data-export
                            id="eventdef-serviceworkerglobalscope-backgroundfetchclick"><code>backgroundfetchclick</code><a
                                class="self-link"
                                href="#eventdef-serviceworkerglobalscope-backgroundfetchclick"></a></dfn>
                    <td><code
                            class="idl"><a data-link-type="idl" href="#dom-serviceworkerglobalscope-onbackgroundfetchclick" id="ref-for-dom-serviceworkerglobalscope-onbackgroundfetchclick">onbackgroundfetchclick</a></code>
                    <td><code
                            class="idl"><a data-link-type="idl" href="#backgroundfetchevent" id="ref-for-backgroundfetchevent③">BackgroundFetchEvent</a></code>
        </table>
        <h3 class="heading settled" data-level="6.2" id="extensions-to-service-worker-registration"><span
                class="secno">6.2. </span><span class="content">对 <code
                    class="idl"><a data-link-type="idl" href="https://w3c.github.io/ServiceWorker/#serviceworkerregistration" id="ref-for-serviceworkerregistration">ServiceWorkerRegistration</a></code>
                的扩展</span><a class="self-link" href="#extensions-to-service-worker-registration"></a></h3>
        <pre class="idl highlight def"><c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://w3c.github.io/ServiceWorker/#serviceworkerregistration" id="ref-for-serviceworkerregistration①"><c- g>ServiceWorkerRegistration</c-></a> {
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#backgroundfetchmanager" id="ref-for-backgroundfetchmanager②"><c- n>BackgroundFetchManager</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="BackgroundFetchManager" href="#dom-serviceworkerregistration-backgroundfetch" id="ref-for-dom-serviceworkerregistration-backgroundfetch"><c- g>backgroundFetch</c-></a>;
};
</pre>
        <div>
            <p>一个 <code
                    class="idl"><a data-link-type="idl" href="https://w3c.github.io/ServiceWorker/#serviceworkerregistration" id="ref-for-serviceworkerregistration②">ServiceWorkerRegistration</a></code>
                拥有一个 <dfn class="dfn-paneled" data-dfn-for="ServiceWorkerRegistration" data-dfn-type="dfn" data-noexport
                    id="serviceworkerregistration-background-fetch-manager">背景获取管理器</dfn> (即 <code
                    class="idl"><a data-link-type="idl" href="#backgroundfetchmanager" id="ref-for-backgroundfetchmanager③">BackgroundFetchManager</a></code>),
                初始时这是一个新的 <code
                    class="idl"><a data-link-type="idl" href="#backgroundfetchmanager" id="ref-for-backgroundfetchmanager④">BackgroundFetchManager</a></code>，其
                <a data-link-type="dfn" href="#backgroundfetchmanager-service-worker-registration"
                    id="ref-for-backgroundfetchmanager-service-worker-registration">服务工作者注册</a> 是 <a
                    data-link-type="dfn">上下文对象</a> 的 <a data-link-type="dfn"
                    href="https://w3c.github.io/ServiceWorker/#dfn-service-worker-registration"
                    id="ref-for-dfn-service-worker-registration②">服务工作者注册</a>。
            </p>
            <p><dfn class="dfn-paneled idl-code" data-dfn-for="ServiceWorkerRegistration" data-dfn-type="attribute"
                    data-export id="dom-serviceworkerregistration-backgroundfetch"><code>backgroundFetch</code></dfn>
                属性的 getter 应返回 <a data-link-type="dfn">上下文对象</a> 的 <a data-link-type="dfn"
                    href="#serviceworkerregistration-background-fetch-manager"
                    id="ref-for-serviceworkerregistration-background-fetch-manager">背景获取管理器</a>。</p>
        </div>
        <h3 class="heading settled" data-level="6.3" id="background-fetch-manager"><span class="secno">6.3. </span><span
                class="content"><code
                    class="idl"><a data-link-type="idl" href="#backgroundfetchmanager" id="ref-for-backgroundfetchmanager⑤">BackgroundFetchManager</a></code></span><a
                class="self-link" href="#background-fetch-manager"></a></h3>
        <pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed"><c- g>Exposed</c-></a>=(<c- n>Window</c->,<c- n>Worker</c->)]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="backgroundfetchmanager"><code><c- g>BackgroundFetchManager</c-></code></dfn> {
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-promise" id="ref-for-idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#backgroundfetchregistration" id="ref-for-backgroundfetchregistration③"><c- n>BackgroundFetchRegistration</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-backgroundfetchmanager-fetch" id="ref-for-dom-backgroundfetchmanager-fetch"><c- g>fetch</c-></a>(<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString" id="ref-for-idl-DOMString"><c- b>DOMString</c-></a> <dfn class="idl-code" data-dfn-for="BackgroundFetchManager/fetch(id, requests, options), BackgroundFetchManager/fetch(id, requests)" data-dfn-type="argument" data-export id="dom-backgroundfetchmanager-fetch-id-requests-options-id"><code><c- g>id</c-></code><a class="self-link" href="#dom-backgroundfetchmanager-fetch-id-requests-options-id"></a></dfn>, (<a data-link-type="idl-name" href="https://fetch.spec.whatwg.org/#requestinfo" id="ref-for-requestinfo"><c- n>RequestInfo</c-></a> <c- b>or</c-> <a data-link-type="dfn" href="https://heycam.github.io/webidl/#idl-sequence" id="ref-for-idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="https://fetch.spec.whatwg.org/#requestinfo" id="ref-for-requestinfo①"><c- n>RequestInfo</c-></a>>) <dfn class="idl-code" data-dfn-for="BackgroundFetchManager/fetch(id, requests, options), BackgroundFetchManager/fetch(id, requests)" data-dfn-type="argument" data-export id="dom-backgroundfetchmanager-fetch-id-requests-options-requests"><code><c- g>requests</c-></code><a class="self-link" href="#dom-backgroundfetchmanager-fetch-id-requests-options-requests"></a></dfn>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-backgroundfetchoptions" id="ref-for-dictdef-backgroundfetchoptions"><c- n>BackgroundFetchOptions</c-></a> <dfn class="idl-code" data-dfn-for="BackgroundFetchManager/fetch(id, requests, options), BackgroundFetchManager/fetch(id, requests)" data-dfn-type="argument" data-export id="dom-backgroundfetchmanager-fetch-id-requests-options-options"><code><c- g>options</c-></code><a class="self-link" href="#dom-backgroundfetchmanager-fetch-id-requests-options-options"></a></dfn> = {});
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-promise" id="ref-for-idl-promise①"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#backgroundfetchregistration" id="ref-for-backgroundfetchregistration④"><c- n>BackgroundFetchRegistration</c-></a>?> <a class="idl-code" data-link-type="method" href="#dom-backgroundfetchmanager-get" id="ref-for-dom-backgroundfetchmanager-get"><c- g>get</c-></a>(<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString" id="ref-for-idl-DOMString①"><c- b>DOMString</c-></a> <dfn class="idl-code" data-dfn-for="BackgroundFetchManager/get(id)" data-dfn-type="argument" data-export id="dom-backgroundfetchmanager-get-id-id"><code><c- g>id</c-></code><a class="self-link" href="#dom-backgroundfetchmanager-get-id-id"></a></dfn>);
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-promise" id="ref-for-idl-promise②"><c- b>Promise</c-></a>&lt;<a data-link-type="dfn" href="https://heycam.github.io/webidl/#idl-sequence" id="ref-for-idl-sequence①"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString" id="ref-for-idl-DOMString②"><c- b>DOMString</c-></a>>> <a class="idl-code" data-link-type="method" href="#dom-backgroundfetchmanager-getids" id="ref-for-dom-backgroundfetchmanager-getids"><c- g>getIds</c-></a>();
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-backgroundfetchuioptions"><code><c- g>BackgroundFetchUIOptions</c-></code></dfn> {
  <a data-link-type="dfn" href="https://heycam.github.io/webidl/#idl-sequence" id="ref-for-idl-sequence②"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="https://w3c.github.io/image-resource/#dom-imageresource" id="ref-for-dom-imageresource①"><c- n>ImageResource</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="BackgroundFetchUIOptions" data-dfn-type="dict-member" data-export data-type="sequence<ImageResource> " id="dom-backgroundfetchuioptions-icons"><code><c- g>icons</c-></code></dfn>;
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString" id="ref-for-idl-DOMString③"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="BackgroundFetchUIOptions" data-dfn-type="dict-member" data-export data-type="DOMString " id="dom-backgroundfetchuioptions-title"><code><c- g>title</c-></code></dfn>;
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-backgroundfetchoptions"><code><c- g>BackgroundFetchOptions</c-></code></dfn> : <a data-link-type="idl-name" href="#dictdef-backgroundfetchuioptions" id="ref-for-dictdef-backgroundfetchuioptions"><c- n>BackgroundFetchUIOptions</c-></a> {
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-unsigned-long-long" id="ref-for-idl-unsigned-long-long"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a> <dfn class="idl-code" data-default="0" data-dfn-for="BackgroundFetchOptions" data-dfn-type="dict-member" data-export data-type="unsigned long long " id="dom-backgroundfetchoptions-downloadtotal"><code><c- g>downloadTotal</c-></code><a class="self-link" href="#dom-backgroundfetchoptions-downloadtotal"></a></dfn> = 0;
};
</pre>
        <div>
            <p>一个 <code
                    class="idl"><a data-link-type="idl" href="#backgroundfetchmanager" id="ref-for-backgroundfetchmanager⑥">BackgroundFetchManager</a></code>
                包含：</p>
            <div>
                <ul>
                    <li data-md>
                        <p><dfn class="dfn-paneled" data-dfn-for="BackgroundFetchManager" data-dfn-type="dfn"
                                data-noexport
                                id="backgroundfetchmanager-backgroundfetchregistration-instances">BackgroundFetchRegistration
                                实例</dfn> (即 <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map"
                                id="ref-for-ordered-map④">映射</a>), 键为 <a data-link-type="dfn" href="#background-fetch"
                                id="ref-for-background-fetch①④">背景获取</a>，值为 <code
                                class="idl"><a data-link-type="idl" href="#backgroundfetchregistration" id="ref-for-backgroundfetchregistration⑤">BackgroundFetchRegistration</a></code>
                            对象。初始值为空的 <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map"
                                id="ref-for-ordered-map⑤">映射</a>。</p>
                    <li data-md>
                        <p>一个 <dfn class="dfn-paneled" data-dfn-for="BackgroundFetchManager" data-dfn-type="dfn"
                                data-noexport id="backgroundfetchmanager-service-worker-registration">服务工作者注册</dfn> (即
                            <a data-link-type="dfn"
                                href="https://w3c.github.io/ServiceWorker/#dfn-service-worker-registration"
                                id="ref-for-dfn-service-worker-registration③">服务工作者注册</a>)。
                        </p>
                </ul>
            </div>
            <h4 class="heading settled" data-level="6.3.1" id="background-fetch-manager-fetch"><span
                    class="secno">6.3.1. </span><span class="content"><code
                        class="idl"><a data-link-type="idl" href="#dom-backgroundfetchmanager-fetch" id="ref-for-dom-backgroundfetchmanager-fetch①">fetch()</a></code></span><a
                    class="self-link" href="#background-fetch-manager-fetch"></a></h4>
            <div class="algorithm" data-algorithm="fetch(id, requests, options)">
                <dfn class="dfn-paneled idl-code" data-dfn-for="BackgroundFetchManager" data-dfn-type="method"
                    data-export data-lt="fetch(id, requests, options)|fetch(id, requests)"
                    id="dom-backgroundfetchmanager-fetch"><code>fetch(<var>id</var>, <var>requests</var>, <var>options</var>)</code></dfn>
                方法执行以下步骤：
                <ol>
                    <li data-md>
                        <p>将 <var>registration</var> 设为 <a data-link-type="dfn">上下文对象</a>的 <a data-link-type="dfn"
                                href="#backgroundfetchmanager-service-worker-registration"
                                id="ref-for-backgroundfetchmanager-service-worker-registration①">服务工作者注册</a>。</p>
                    <li data-md>
                        <p>将 <var>records</var> 设为一个新的 <a data-link-type="dfn"
                                href="https://infra.spec.whatwg.org/#list" id="ref-for-list④">列表</a>。</p>
                    <li data-md>
                        <p>将 <var>uploadTotal</var> 设为 0。</p>
                    <li data-md>
                        <p>如果 <var>requests</var> 是一个 <code
                                class="idl"><a data-link-type="idl" href="https://fetch.spec.whatwg.org/#requestinfo" id="ref-for-requestinfo②">RequestInfo</a></code>，将
                            <var>requests</var> 设为 « <var>requests</var> »。
                        </p>
                    <li data-md>
                        <p>如果 <var>requests</var> 是 <a data-link-type="dfn"
                                href="https://infra.spec.whatwg.org/#list-empty" id="ref-for-list-empty">空的</a>，则返回 <a
                                data-link-type="dfn" href="https://heycam.github.io/webidl/#a-promise-rejected-with"
                                id="ref-for-a-promise-rejected-with">一个被拒绝的 promise</a>，并带有 <code
                                class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror②">TypeError</a></code>。
                        </p>
                    <li data-md>
                        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate"
                                id="ref-for-list-iterate③">迭代</a> <var>requests</var> 的每个 <var>request</var>：</p>
                        <ol>
                            <li data-md>
                                <p>将 <var>internalRequest</var> 设为 <a data-link-type="dfn"
                                        href="https://fetch.spec.whatwg.org/#concept-request-request"
                                        id="ref-for-concept-request-request②">请求</a>，其结果为使用 <var>request</var> 调用 <code
                                        class="idl"><a data-link-type="idl" href="https://fetch.spec.whatwg.org/#request" id="ref-for-request②">Request</a></code>
                                    构造函数。如果抛出异常，则返回 <a data-link-type="dfn"
                                        href="https://heycam.github.io/webidl/#a-promise-rejected-with"
                                        id="ref-for-a-promise-rejected-with①">一个被拒绝的 promise</a> 并带有异常。</p>
                            <li data-md>
                                <p>如果 <var>internalRequest</var> 的 <a data-link-type="dfn"
                                        href="https://fetch.spec.whatwg.org/#concept-request-mode"
                                        id="ref-for-concept-request-mode①">模式</a> 为 "<code>no-cors</code>"，则返回 <a
                                        data-link-type="dfn"
                                        href="https://heycam.github.io/webidl/#a-promise-rejected-with"
                                        id="ref-for-a-promise-rejected-with②">一个被拒绝的 promise</a> 并带有 <code
                                        class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror③">TypeError</a></code>。
                                </p>
                            <li data-md>
                                <p>将 <var>internalRequest</var> 的 <a data-link-type="dfn"
                                        href="https://fetch.spec.whatwg.org/#concept-request-client"
                                        id="ref-for-concept-request-client①">client</a> 设为 null。</p>
                            <li data-md>
                                <p>将 <var>record</var> 设为一个新的 <a data-link-type="dfn" href="#background-fetch-record"
                                        id="ref-for-background-fetch-record⑥">背景获取记录</a>。</p>
                            <li data-md>
                                <p>将 <var>record</var> 的 <a data-link-type="dfn" href="#background-fetch-record-request"
                                        id="ref-for-background-fetch-record-request③">请求</a> 设为
                                    <var>internalRequest</var>。
                                </p>
                            <li data-md>
                                <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append"
                                        id="ref-for-list-append①">将</a> <var>record</var> 添加到 <var>records</var>。</p>
                        </ol>
                    <li data-md>
                        <p>将 <var>promise</var> 设为 <a data-link-type="dfn"
                                href="https://heycam.github.io/webidl/#a-new-promise" id="ref-for-a-new-promise②">一个新的
                                promise</a>。</p>
                    <li data-md>
                        <p><a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/infrastructure.html#enqueue-the-following-steps"
                                id="ref-for-enqueue-the-following-steps②">将以下步骤入队</a>到 <var>registration</var> 的 <a
                                data-link-type="dfn"
                                href="#service-worker-registration-active-background-fetches-edit-queue"
                                id="ref-for-service-worker-registration-active-background-fetches-edit-queue①">活动背景获取编辑队列</a>：
                        </p>
                        <ol>
                            <li data-md>
                                <p>将 <var>permission</var> 设为 <a data-link-type="dfn"
                                        href="https://w3c.github.io/permissions/#permission-state"
                                        id="ref-for-permission-state①">权限状态</a>，使用 <code
                                        class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dictdef-permissiondescriptor" id="ref-for-dictdef-permissiondescriptor①">PermissionDescriptor</a></code>，其
                                    <code
                                        class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissiondescriptor-name" id="ref-for-dom-permissiondescriptor-name①">name</a></code>
                                    为 <code>"background-fetch"</code>，并使用 <a data-link-type="dfn">上下文对象</a>的 <a
                                        data-link-type="dfn"
                                        href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object"
                                        id="ref-for-relevant-settings-object③">相关设置对象</a>。
                                </p>
                            <li data-md>
                                <p>如果 <var>permission</var> 为 <code>"denied"</code>，则拒绝 <var>promise</var> 并带有 <code
                                        class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#notallowederror" id="ref-for-notallowederror">NotAllowedError</a></code>
                                    <code
                                        class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-DOMException" id="ref-for-idl-DOMException②">DOMException</a></code>
                                    并中止这些步骤。
                                </p>
                            <li data-md>
                                <p>将 <var>bgFetchMap</var> 设为 <var>registration</var> 的 <a data-link-type="dfn"
                                        href="#service-worker-registration-active-background-fetches"
                                        id="ref-for-service-worker-registration-active-background-fetches①">活动背景获取</a>。
                                </p>
                            <li data-md>
                                <p>如果 <var>registration</var> 的 <a data-link-type="dfn"
                                        href="https://w3c.github.io/ServiceWorker/#dfn-active-worker"
                                        id="ref-for-dfn-active-worker">活动工作者</a> 为 null，则拒绝 <var>promise</var> 并带有 <code
                                        class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror④">TypeError</a></code>
                                    并中止这些步骤。</p>
                            <li data-md>
                                <p>如果 <var>bgFetchMap</var>[<var>id</var>] <a data-link-type="dfn"
                                        href="https://infra.spec.whatwg.org/#map-exists"
                                        id="ref-for-map-exists②">存在</a>，<a data-link-type="dfn"
                                        href="https://heycam.github.io/webidl/#reject" id="ref-for-reject②">拒绝</a>
                                    <var>promise</var> 并带有 <code
                                        class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑤">TypeError</a></code>
                                    并中止这些步骤。
                                </p>
                            <li data-md>
                                <p>将 <var>requestBodiesRemaining</var> 设为 <var>requests</var> 的 <a data-link-type="dfn"
                                        href="https://infra.spec.whatwg.org/#list-size" id="ref-for-list-size①">大小</a>。
                                </p>
                            <li data-md>
                                <p>将 <var>requestReadFailed</var> 设为 false。</p>
                            <li data-md>
                                <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate"
                                        id="ref-for-list-iterate④">迭代</a> <var>requests</var> 的每个 <var>request</var>：
                                </p>
                                <ol>
                                    <li data-md>
                                        <p>如果 <var>request</var> 的 <a data-link-type="dfn"
                                                href="https://fetch.spec.whatwg.org/#concept-request-body"
                                                id="ref-for-concept-request-body②">body</a> 为 null，则 <a
                                                data-link-type="dfn"
                                                href="https://infra.spec.whatwg.org/#iteration-continue"
                                                id="ref-for-iteration-continue">继续</a>。</p>
                                    <li data-md>
                                        <p>将 <var>stream</var> 设为 <var>request</var> 的 <a data-link-type="dfn"
                                                href="https://fetch.spec.whatwg.org/#concept-request-body"
                                                id="ref-for-concept-request-body③">body</a> 的 <a data-link-type="dfn"
                                                href="https://fetch.spec.whatwg.org/#concept-body-stream"
                                                id="ref-for-concept-body-stream②">流</a>。</p>
                                    <li data-md>
                                        <p>并行 <a data-link-type="dfn"
                                                href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel"
                                                id="ref-for-in-parallel④">运行</a>这些步骤：</p>
                                        <ol>
                                            <li data-md>
                                                <p>运行这些步骤，但 <a data-link-type="dfn"
                                                        href="https://infra.spec.whatwg.org/#abort-when"
                                                        id="ref-for-abort-when①">在</a> <var>requestReadFailed</var> 为
                                                    true 时终止：</p>
                                                <ol>
                                                    <li data-md>
                                                        <p><a data-link-type="dfn">等待</a> <var>request</var> 的 <a
                                                                data-link-type="dfn"
                                                                href="https://fetch.spec.whatwg.org/#concept-request-body"
                                                                id="ref-for-concept-request-body④">body</a>。</p>
                                                    <li data-md>
                                                        <p>如果 <var>stream</var> 已 <a data-link-type="dfn"
                                                                href="https://streams.spec.whatwg.org/#readablestream-errored"
                                                                id="ref-for-readablestream-errored①">错误</a>，则将
                                                            <var>requestReadFailed</var> 设为 true。
                                                        </p>
                                                </ol>
                                                <p class="note" role="note"><span>注意：</span>这确保在解决之前，我们有请求字节的副本。</p>
                                            <li data-md>
                                                <p><a data-link-type="dfn"
                                                        href="https://infra.spec.whatwg.org/#if-aborted"
                                                        id="ref-for-if-aborted①">如果中止</a> 且 <var>stream</var> 为 <a
                                                        data-link-type="dfn"
                                                        href="https://streams.spec.whatwg.org/#readablestream-readable"
                                                        id="ref-for-readablestream-readable">可读</a>，则使用 <code
                                                        class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#aborterror" id="ref-for-aborterror②">AbortError</a></code>
                                                    和 <code
                                                        class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-DOMException" id="ref-for-idl-DOMException③">DOMException</a></code>
                                                    <a data-link-type="dfn"
                                                        href="https://streams.spec.whatwg.org/#readablestream-error"
                                                        id="ref-for-readablestream-error②">使</a> <var>stream</var>
                                                    错误并中止这些步骤。
                                                </p>
                                            <li data-md>
                                                <p>将 <var>uploadTotal</var> 增加 <var>request</var> 的 <a
                                                        data-link-type="dfn"
                                                        href="https://fetch.spec.whatwg.org/#concept-request-body"
                                                        id="ref-for-concept-request-body⑤">body</a> 的 <a
                                                        data-link-type="dfn">总字节数</a>。</p>
                                            <li data-md>
                                                <p>将 <var>requestBodiesRemaining</var> 减 1。</p>
                                        </ol>
                                </ol>
                            <li data-md>
                                <p>如果在任何时候，存储 <var>requests</var> 因超出配额限制而失败，则 <a data-link-type="dfn"
                                        href="https://heycam.github.io/webidl/#reject" id="ref-for-reject③">拒绝</a>
                                    <var>promise</var> 并带有 <code
                                        class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#quotaexceedederror" id="ref-for-quotaexceedederror">QuotaExceededError</a></code>
                                    <code
                                        class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-DOMException" id="ref-for-idl-DOMException④">DOMException</a></code>
                                    并中止这些步骤。
                                </p>
                            <li data-md>
                                <p>等待 <var>requestBodiesRemaining</var> 为 0 或 <var>requestReadFailed</var> 为 true。</p>
                            <li data-md>
                                <p>如果 <var>requestReadFailed</var> 为 true，则 <a data-link-type="dfn"
                                        href="https://heycam.github.io/webidl/#reject" id="ref-for-reject④">拒绝</a>
                                    <var>promise</var> 并带有 <code
                                        class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑥">TypeError</a></code>
                                    并中止这些步骤。
                                </p>
                            <li data-md>
                                <p>将 <var>bgFetch</var> 设为一个新的 <a data-link-type="dfn" href="#background-fetch"
                                        id="ref-for-background-fetch①⑤">背景获取</a>，包含以下内容：</p>
                                <dl>
                                    <dt data-md><a data-link-type="dfn" href="#background-fetch-id"
                                            id="ref-for-background-fetch-id②">id</a>
                                    <dd data-md>
                                        <p><var>id</var>。</p>
                                    <dt data-md><a data-link-type="dfn" href="#background-fetch-records"
                                            id="ref-for-background-fetch-records④">记录</a>
                                    <dd data-md>
                                        <p><var>records</var>。</p>
                                    <dt data-md><a data-link-type="dfn" href="#background-fetch-download-total"
                                            id="ref-for-background-fetch-download-total②">下载总量</a>
                                    <dd data-md>
                                        <p><var>options</var>的 <code>downloadTotal</code> 成员。</p>
                                    <dt data-md><a data-link-type="dfn" href="#background-fetch-upload-total"
                                            id="ref-for-background-fetch-upload-total①">上传总量</a>
                                    <dd data-md>
                                        <p><var>uploadTotal</var>。</p>
                                    <dt data-md><a data-link-type="dfn" href="#background-fetch-icons"
                                            id="ref-for-background-fetch-icons①">图标</a>
                                    <dd data-md>
                                        <p>如果存在，<var>options</var> 的 <code>icons</code> 成员，否则为空的 <a data-link-type="dfn"
                                                href="https://infra.spec.whatwg.org/#list" id="ref-for-list⑤">列表</a>。
                                        </p>
                                    <dt data-md><a data-link-type="dfn" href="#background-fetch-title"
                                            id="ref-for-background-fetch-title①">标题</a>
                                    <dd data-md>
                                        <p>如果存在，<var>options</var> 的 <code>title</code> 成员，否则为空字符串。</p>
                                    <dt data-md><a data-link-type="dfn"
                                            href="#background-fetch-service-worker-registration"
                                            id="ref-for-background-fetch-service-worker-registration④">服务工作者注册</a>
                                    <dd data-md>
                                        <p><var>registration</var>。</p>
                                </dl>
                            <li data-md>
                                <p>将 <var>bgFetchMap</var>[<var>id</var>] 设为 <var>bgFetch</var>。</p>
                            <li data-md>
                                <p><a data-link-type="dfn" href="#queue-a-bgfetch-task"
                                        id="ref-for-queue-a-bgfetch-task①">将背景获取任务入队</a>以运行这些步骤：</p>
                                <ol>
                                    <li data-md>
                                        <p><a data-link-type="dfn" href="https://heycam.github.io/webidl/#resolve"
                                                id="ref-for-resolve②">解决</a> <var>promise</var>，并使用 <a
                                                data-link-type="dfn" href="#get-a-backgroundfetchregistration-instance"
                                                id="ref-for-get-a-backgroundfetchregistration-instance④">获取背景获取注册实例</a>，适用于
                                            <var>bgFetch</var> 并在 <a data-link-type="dfn">上下文对象</a>的 <a
                                                data-link-type="dfn"
                                                href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm"
                                                id="ref-for-concept-relevant-realm④">相关领域</a>中。
                                        </p>
                                    </li>
                                </ol>
                            <li data-md>
                                <p><a data-link-type="dfn"
                                        href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel"
                                        id="ref-for-in-parallel⑤">并行</a>显示 <var>bgFetch</var>，从 <a
                                        data-link-type="dfn">上下文对象</a>的 <a data-link-type="dfn"
                                        href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object"
                                        id="ref-for-relevant-settings-object④">相关设置对象</a>中。</p>
                            </li>
                            <li data-md>
                                <p><a data-link-type="dfn"
                                        href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel"
                                        id="ref-for-in-parallel⑥">并行</a>执行 <a data-link-type="dfn"
                                        href="#perform-a-background-fetch"
                                        id="ref-for-perform-a-background-fetch①">背景获取</a>，使用 <var>bgFetch</var>。</p>
                            </li>
                        </ol>
                    <li data-md>
                        <p>返回 <var>promise</var>。</p>
                </ol>
            </div>
            <h4 class="heading settled" data-level="6.3.2" id="background-fetch-manager-get"><span class="secno">6.3.2.
                </span><span class="content"><code
                        class="idl"><a data-link-type="idl" href="#dom-backgroundfetchmanager-get" id="ref-for-dom-backgroundfetchmanager-get①">get()</a></code></span><a
                    class="self-link" href="#background-fetch-manager-get"></a></h4>
            <div class="algorithm" data-algorithm="get(id)">
                <dfn class="dfn-paneled idl-code" data-dfn-for="BackgroundFetchManager" data-dfn-type="method"
                    data-export id="dom-backgroundfetchmanager-get"><code>get(<var>id</var>)</code></dfn>
                方法在调用时必须返回<a data-link-type="dfn" href="https://heycam.github.io/webidl/#a-new-promise"
                    id="ref-for-a-new-promise③">一个新的 promise</a> <var>promise</var> 并<a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel"
                    id="ref-for-in-parallel⑦">并行</a>执行以下步骤：
                <ol>
                    <li data-md>
                        <p>将 <var>registration</var> 设为 <a data-link-type="dfn">上下文对象</a>的相关 <a data-link-type="dfn"
                                href="#backgroundfetchmanager-service-worker-registration"
                                id="ref-for-backgroundfetchmanager-service-worker-registration②">服务工作者注册</a>。</p>
                    <li data-md>
                        <p>将 <var>bgFetch</var> 设为 <var>registration</var> 的 <a data-link-type="dfn"
                                href="#service-worker-registration-active-background-fetches"
                                id="ref-for-service-worker-registration-active-background-fetches②">活动的背景获取</a>[<var>id</var>]。
                        </p>
                    <li data-md>
                        <p>如果 <var>bgFetch</var> 为 undefined，<a data-link-type="dfn"
                                href="https://heycam.github.io/webidl/#resolve" id="ref-for-resolve③">解决</a>
                            <var>promise</var> 为 undefined 并中止这些步骤。
                        </p>
                    <li data-md>
                        <p><a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/infrastructure.html#enqueue-the-following-steps"
                                id="ref-for-enqueue-the-following-steps③">将以下步骤入队</a>到 <var>bgFetch</var>的 <a
                                data-link-type="dfn" href="#background-fetch-update-handling-queue"
                                id="ref-for-background-fetch-update-handling-queue①">更新处理队列</a>中：</p>
                        <ol>
                            <li data-md>
                                <p><a data-link-type="dfn" href="#queue-a-bgfetch-task"
                                        id="ref-for-queue-a-bgfetch-task②">入队一个背景获取任务</a> <var>task</var> 以运行这些步骤：</p>
                                <ol>
                                    <li data-md>
                                        <p>将 <var>bgFetchRegistration</var> 设为 <a data-link-type="dfn"
                                                href="#get-a-backgroundfetchregistration-instance"
                                                id="ref-for-get-a-backgroundfetchregistration-instance⑤">获取背景获取注册实例</a>
                                            的结果，适用于 <var>bgFetch</var> 并在 <a data-link-type="dfn">上下文对象</a>的 <a
                                                data-link-type="dfn"
                                                href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm"
                                                id="ref-for-concept-relevant-realm⑤">相关领域</a>。</p>
                                    <li data-md>
                                        <p><a data-link-type="dfn" href="https://heycam.github.io/webidl/#resolve"
                                                id="ref-for-resolve④">解决</a> <var>promise</var>，返回
                                            <var>bgFetchRegistration</var>。
                                        </p>
                                </ol>
                            <li data-md>
                                <p>等待 <var>task</var> 完成。</p>
                                <p class="note" role="note"><span>注意：</span>这确保了新的 <code
                                        class="idl"><a data-link-type="idl" href="#backgroundfetchregistration" id="ref-for-backgroundfetchregistration⑥">BackgroundFetchRegistration</a></code>
                                    实例不会错过任何 <code
                                        class="idl"><a class="idl-code" data-link-type="event" href="#eventdef-backgroundfetchregistration-progress" id="ref-for-eventdef-backgroundfetchregistration-progress">进度</a></code>事件。
                                </p>
                        </ol>
                </ol>
            </div>
            <h4 class="heading settled" data-level="6.3.3" id="background-fetch-manager-get-ids"><span
                    class="secno">6.3.3. </span><span class="content"><code
                        class="idl"><a data-link-type="idl" href="#dom-backgroundfetchmanager-getids" id="ref-for-dom-backgroundfetchmanager-getids①">getIds()</a></code></span><a
                    class="self-link" href="#background-fetch-manager-get-ids"></a></h4>
            <div class="algorithm" data-algorithm="getIds()">
                <dfn class="dfn-paneled idl-code" data-dfn-for="BackgroundFetchManager" data-dfn-type="method"
                    data-export id="dom-backgroundfetchmanager-getids"><code>getIds()</code></dfn>
                方法在调用时必须返回 <a data-link-type="dfn" href="https://heycam.github.io/webidl/#a-new-promise"
                    id="ref-for-a-new-promise④">一个新的 promise</a> <var>promise</var> 并<a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel"
                    id="ref-for-in-parallel⑧">并行</a>执行以下步骤：
                <ol>
                    <li data-md>
                        <p>将 <var>registration</var> 设为 <a data-link-type="dfn">上下文对象</a>的相关 <a data-link-type="dfn"
                                href="#backgroundfetchmanager-service-worker-registration"
                                id="ref-for-backgroundfetchmanager-service-worker-registration③">服务工作者注册</a>。</p>
                    <li data-md>
                        <p><a data-link-type="dfn" href="https://heycam.github.io/webidl/#resolve"
                                id="ref-for-resolve⑤">解决</a> <var>promise</var>，返回 <var>registration</var> 的 <a
                                data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-getting-the-keys"
                                id="ref-for-map-getting-the-keys">获取的键</a> 结果，键是 <var>registration</var> 的 <a
                                data-link-type="dfn" href="#service-worker-registration-active-background-fetches"
                                id="ref-for-service-worker-registration-active-background-fetches③">活动的背景获取</a>。</p>
                </ol>
            </div>
        </div>
        <h3 class="heading settled" data-level="6.4" id="background-fetch-registration"><span class="secno">6.4.
            </span><span class="content"><code
                    class="idl"><a data-link-type="idl" href="#backgroundfetchregistration" id="ref-for-backgroundfetchregistration⑦">BackgroundFetchRegistration</a></code></span><a
                class="self-link" href="#background-fetch-registration"></a></h3>
        <pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed①"><c- g>Exposed</c-></a>=(<c- n>Window</c->,<c- n>Worker</c->)]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="backgroundfetchregistration"><code><c- g>BackgroundFetchRegistration</c-></code></dfn> : <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#eventtarget" id="ref-for-eventtarget"><c- n>EventTarget</c-></a> {
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString" id="ref-for-idl-DOMString④"><c- b>DOMString</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="DOMString" href="#dom-backgroundfetchregistration-id" id="ref-for-dom-backgroundfetchregistration-id"><c- g>id</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-unsigned-long-long" id="ref-for-idl-unsigned-long-long①"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="unsigned long long" href="#dom-backgroundfetchregistration-uploadtotal" id="ref-for-dom-backgroundfetchregistration-uploadtotal"><c- g>uploadTotal</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-unsigned-long-long" id="ref-for-idl-unsigned-long-long②"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="unsigned long long" href="#dom-backgroundfetchregistration-uploaded" id="ref-for-dom-backgroundfetchregistration-uploaded"><c- g>uploaded</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-unsigned-long-long" id="ref-for-idl-unsigned-long-long③"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="unsigned long long" href="#dom-backgroundfetchregistration-downloadtotal" id="ref-for-dom-backgroundfetchregistration-downloadtotal"><c- g>downloadTotal</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-unsigned-long-long" id="ref-for-idl-unsigned-long-long④"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="unsigned long long" href="#dom-backgroundfetchregistration-downloaded" id="ref-for-dom-backgroundfetchregistration-downloaded"><c- g>downloaded</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#enumdef-backgroundfetchresult" id="ref-for-enumdef-backgroundfetchresult①"><c- n>BackgroundFetchResult</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="BackgroundFetchResult" href="#dom-backgroundfetchregistration-result" id="ref-for-dom-backgroundfetchregistration-result"><c- g>result</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#enumdef-backgroundfetchfailurereason" id="ref-for-enumdef-backgroundfetchfailurereason②"><c- n>BackgroundFetchFailureReason</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="BackgroundFetchFailureReason" href="#dom-backgroundfetchregistration-failurereason" id="ref-for-dom-backgroundfetchregistration-failurereason"><c- g>failureReason</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-boolean" id="ref-for-idl-boolean"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-backgroundfetchregistration-recordsavailable" id="ref-for-dom-backgroundfetchregistration-recordsavailable"><c- g>recordsAvailable</c-></a>;

  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" id="ref-for-eventhandler④"><c- n>EventHandler</c-></a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-backgroundfetchregistration-onprogress" id="ref-for-dom-backgroundfetchregistration-onprogress"><c- g>onprogress</c-></a>;

  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-promise" id="ref-for-idl-promise③"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-boolean" id="ref-for-idl-boolean①"><c- b>boolean</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-backgroundfetchregistration-abort" id="ref-for-dom-backgroundfetchregistration-abort②"><c- g>abort</c-></a>();
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-promise" id="ref-for-idl-promise④"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#backgroundfetchrecord" id="ref-for-backgroundfetchrecord①"><c- n>BackgroundFetchRecord</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-backgroundfetchregistration-match" id="ref-for-dom-backgroundfetchregistration-match"><c- g>match</c-></a>(<a data-link-type="idl-name" href="https://fetch.spec.whatwg.org/#requestinfo" id="ref-for-requestinfo③"><c- n>RequestInfo</c-></a> <dfn class="idl-code" data-dfn-for="BackgroundFetchRegistration/match(request, options), BackgroundFetchRegistration/match(request)" data-dfn-type="argument" data-export id="dom-backgroundfetchregistration-match-request-options-request"><code><c- g>request</c-></code><a class="self-link" href="#dom-backgroundfetchregistration-match-request-options-request"></a></dfn>, <c- b>optional</c-> <a data-link-type="idl-name" href="https://w3c.github.io/ServiceWorker/#dictdef-cachequeryoptions" id="ref-for-dictdef-cachequeryoptions"><c- n>CacheQueryOptions</c-></a> <dfn class="idl-code" data-dfn-for="BackgroundFetchRegistration/match(request, options), BackgroundFetchRegistration/match(request)" data-dfn-type="argument" data-export id="dom-backgroundfetchregistration-match-request-options-options"><code><c- g>options</c-></code><a class="self-link" href="#dom-backgroundfetchregistration-match-request-options-options"></a></dfn> = {});
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-promise" id="ref-for-idl-promise⑤"><c- b>Promise</c-></a>&lt;<a data-link-type="dfn" href="https://heycam.github.io/webidl/#idl-sequence" id="ref-for-idl-sequence③"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#backgroundfetchrecord" id="ref-for-backgroundfetchrecord②"><c- n>BackgroundFetchRecord</c-></a>>> <a class="idl-code" data-link-type="method" href="#dom-backgroundfetchregistration-matchall" id="ref-for-dom-backgroundfetchregistration-matchall"><c- g>matchAll</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="https://fetch.spec.whatwg.org/#requestinfo" id="ref-for-requestinfo④"><c- n>RequestInfo</c-></a> <dfn class="idl-code" data-dfn-for="BackgroundFetchRegistration/matchAll(request, options), BackgroundFetchRegistration/matchAll(request), BackgroundFetchRegistration/matchAll()" data-dfn-type="argument" data-export id="dom-backgroundfetchregistration-matchall-request-options-request"><code><c- g>request</c-></code><a class="self-link" href="#dom-backgroundfetchregistration-matchall-request-options-request"></a></dfn>, <c- b>optional</c-> <a data-link-type="idl-name" href="https://w3c.github.io/ServiceWorker/#dictdef-cachequeryoptions" id="ref-for-dictdef-cachequeryoptions①"><c- n>CacheQueryOptions</c-></a> <dfn class="idl-code" data-dfn-for="BackgroundFetchRegistration/matchAll(request, options), BackgroundFetchRegistration/matchAll(request), BackgroundFetchRegistration/matchAll()" data-dfn-type="argument" data-export id="dom-backgroundfetchregistration-matchall-request-options-options"><code><c- g>options</c-></code><a class="self-link" href="#dom-backgroundfetchregistration-matchall-request-options-options"></a></dfn> = {});
};

<c- b>enum</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="enum" data-export id="enumdef-backgroundfetchresult"><code><c- g>BackgroundFetchResult</c-></code></dfn> { <dfn class="idl-code" data-dfn-for="BackgroundFetchResult" data-dfn-type="enum-value" data-export id="dom-backgroundfetchresult"><code><c- s>""</c-></code><a class="self-link" href="#dom-backgroundfetchresult"></a></dfn>, <dfn class="idl-code" data-dfn-for="BackgroundFetchResult" data-dfn-type="enum-value" data-export id="dom-backgroundfetchresult-success"><code><c- s>"success"</c-></code><a class="self-link" href="#dom-backgroundfetchresult-success"></a></dfn>, <dfn class="idl-code" data-dfn-for="BackgroundFetchResult" data-dfn-type="enum-value" data-export id="dom-backgroundfetchresult-failure"><code><c- s>"failure"</c-></code><a class="self-link" href="#dom-backgroundfetchresult-failure"></a></dfn> };

<c- b>enum</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="enum" data-export id="enumdef-backgroundfetchfailurereason"><code><c- g>BackgroundFetchFailureReason</c-></code></dfn> {
  // 后台抓取尚未完成，或已成功。
  <dfn class="idl-code" data-dfn-for="BackgroundFetchFailureReason" data-dfn-type="enum-value" data-export id="dom-backgroundfetchfailurereason"><code><c- s>""</c-></code><a class="self-link" href="#dom-backgroundfetchfailurereason"></a></dfn>,
  // 操作已被用户中止，或调用了abort()。
  <dfn class="idl-code" data-dfn-for="BackgroundFetchFailureReason" data-dfn-type="enum-value" data-export id="dom-backgroundfetchfailurereason-aborted"><code><c- s>"aborted"</c-></code><a class="self-link" href="#dom-backgroundfetchfailurereason-aborted"></a></dfn>,
  // 响应状态不是ok。
  <dfn class="idl-code" data-dfn-for="BackgroundFetchFailureReason" data-dfn-type="enum-value" data-export id="dom-backgroundfetchfailurereason-bad-status"><code><c- s>"bad-status"</c-></code><a class="self-link" href="#dom-backgroundfetchfailurereason-bad-status"></a></dfn>,
  // 抓取因其他原因失败，例如CORS、MIX、无效的部分响应，或无法重试的网络故障。
  <dfn class="idl-code" data-dfn-for="BackgroundFetchFailureReason" data-dfn-type="enum-value" data-export id="dom-backgroundfetchfailurereason-fetch-error"><code><c- s>"fetch-error"</c-></code><a class="self-link" href="#dom-backgroundfetchfailurereason-fetch-error"></a></dfn>,
  // 操作期间达到存储配额。
  <dfn class="idl-code" data-dfn-for="BackgroundFetchFailureReason" data-dfn-type="enum-value" data-export id="dom-backgroundfetchfailurereason-quota-exceeded"><code><c- s>"quota-exceeded"</c-></code><a class="self-link" href="#dom-backgroundfetchfailurereason-quota-exceeded"></a></dfn>,
  // 超过了提供的downloadTotal。
  <dfn class="idl-code" data-dfn-for="BackgroundFetchFailureReason" data-dfn-type="enum-value" data-export id="dom-backgroundfetchfailurereason-download-total-exceeded"><code><c- s>"download-total-exceeded"</c-></code><a class="self-link" href="#dom-backgroundfetchfailurereason-download-total-exceeded"></a></dfn>
};
</pre>
        <div>
            <p>一个 <code
                    class="idl"><a data-link-type="idl" href="#backgroundfetchregistration" id="ref-for-backgroundfetchregistration⑧">BackgroundFetchRegistration</a></code>
                实例有：</p>
            <ul>
                <li data-md>
                    <p>一个 <dfn class="dfn-paneled" data-dfn-for="BackgroundFetchRegistration" data-dfn-type="dfn"
                            data-noexport id="backgroundfetchregistration-background-fetch">background fetch</dfn>（一个
                        <a data-link-type="dfn" href="#background-fetch" id="ref-for-background-fetch①⑥">background
                            fetch</a>）。
                    </p>
                <li data-md>
                    <p>一个 <dfn class="dfn-paneled" data-dfn-for="BackgroundFetchRegistration" data-dfn-type="dfn"
                            data-noexport id="backgroundfetchregistration-downloaded">downloaded</dfn>（一个数字），
                        初始值为 <a data-link-type="dfn" href="#backgroundfetchregistration-background-fetch"
                            id="ref-for-backgroundfetchregistration-background-fetch②">background fetch</a> 的
                        <a data-link-type="dfn" href="#background-fetch-stored-body-bytes-total"
                            id="ref-for-background-fetch-stored-body-bytes-total③">已存储的主体字节总数</a> 的副本。
                    </p>
                <li data-md>
                    <p>一个 <dfn class="dfn-paneled" data-dfn-for="BackgroundFetchRegistration" data-dfn-type="dfn"
                            data-noexport id="backgroundfetchregistration-uploaded">uploaded</dfn>（一个数字），
                        初始值为 <a data-link-type="dfn" href="#backgroundfetchregistration-background-fetch"
                            id="ref-for-backgroundfetchregistration-background-fetch③">background fetch</a> 的
                        <a data-link-type="dfn" href="#background-fetch-uploaded"
                            id="ref-for-background-fetch-uploaded③">uploaded</a> 的副本。
                    </p>
                <li data-md>
                    <p>一个 <dfn class="dfn-paneled" data-dfn-for="BackgroundFetchRegistration" data-dfn-type="dfn"
                            data-noexport id="backgroundfetchregistration-result">result</dfn>（一个
                        <code
                            class="idl"><a data-link-type="idl" href="#enumdef-backgroundfetchresult" id="ref-for-enumdef-backgroundfetchresult②">BackgroundFetchResult</a></code>），
                        初始值为 <a data-link-type="dfn" href="#backgroundfetchregistration-background-fetch"
                            id="ref-for-backgroundfetchregistration-background-fetch④">background fetch</a> 的
                        <a data-link-type="dfn" href="#background-fetch-result"
                            id="ref-for-background-fetch-result⑥">结果</a> 的副本。
                    </p>
                <li data-md>
                    <p>一个 <dfn class="dfn-paneled" data-dfn-for="BackgroundFetchRegistration" data-dfn-type="dfn"
                            data-noexport id="backgroundfetchregistration-failure-reason">失败原因</dfn>（一个
                        <code
                            class="idl"><a data-link-type="idl" href="#enumdef-backgroundfetchfailurereason" id="ref-for-enumdef-backgroundfetchfailurereason③">BackgroundFetchFailureReason</a></code>），
                        初始值为 <a data-link-type="dfn" href="#backgroundfetchregistration-background-fetch"
                            id="ref-for-backgroundfetchregistration-background-fetch⑤">background fetch</a> 的
                        <a data-link-type="dfn" href="#background-fetch-failure-reason"
                            id="ref-for-background-fetch-failure-reason②">失败原因</a> 的副本。
                    </p>
                <li data-md>
                    <p>一个 <dfn class="dfn-paneled" data-dfn-for="BackgroundFetchRegistration" data-dfn-type="dfn"
                            data-noexport id="backgroundfetchregistration-id">ID</dfn>（一个数字），
                        是 <a data-link-type="dfn" href="#backgroundfetchregistration-background-fetch"
                            id="ref-for-backgroundfetchregistration-background-fetch⑥">background fetch</a> 的
                        <a data-link-type="dfn" href="#background-fetch-id" id="ref-for-background-fetch-id③">ID</a>
                        的副本。
                    </p>
                <li data-md>
                    <p>一个 <dfn class="dfn-paneled" data-dfn-for="BackgroundFetchRegistration" data-dfn-type="dfn"
                            data-noexport id="backgroundfetchregistration-upload-total">上传总数</dfn>（一个数字），
                        是 <a data-link-type="dfn" href="#backgroundfetchregistration-background-fetch"
                            id="ref-for-backgroundfetchregistration-background-fetch⑦">background fetch</a> 的
                        <a data-link-type="dfn" href="#background-fetch-upload-total"
                            id="ref-for-background-fetch-upload-total②">上传总数</a> 的副本。
                    </p>
                <li data-md>
                    <p>一个 <dfn class="dfn-paneled" data-dfn-for="BackgroundFetchRegistration" data-dfn-type="dfn"
                            data-noexport id="backgroundfetchregistration-download-total">下载总数</dfn>（一个数字），
                        是 <a data-link-type="dfn" href="#backgroundfetchregistration-background-fetch"
                            id="ref-for-backgroundfetchregistration-background-fetch⑧">background fetch</a> 的
                        <a data-link-type="dfn" href="#background-fetch-download-total"
                            id="ref-for-background-fetch-download-total③">下载总数</a> 的副本。
                    </p>
                <li data-md>
                    <p>一个 <dfn class="dfn-paneled" data-dfn-for="BackgroundFetchRegistration" data-dfn-type="dfn"
                            data-noexport id="backgroundfetchregistration-records-available-flag">可用记录标志</dfn>，
                        初始设置为 <a data-link-type="dfn" href="#backgroundfetchregistration-background-fetch"
                            id="ref-for-backgroundfetchregistration-background-fetch⑨">background fetch</a> 的
                        <a data-link-type="dfn" href="#background-fetch-records-available-flag"
                            id="ref-for-background-fetch-records-available-flag②">可用记录标志</a> 设置的值，否则未设置。
                    </p>
            </ul>
            <p class="note" role="note"><span>注意：</span>上述值为副本，因此它们可以同步使用。</p>
            <p>属性 <dfn class="dfn-paneled idl-code" data-dfn-for="BackgroundFetchRegistration" data-dfn-type="attribute"
                    data-export id="dom-backgroundfetchregistration-id"><code>id</code></dfn> 的getter
                必须返回 <a data-link-type="dfn">上下文对象</a> 的 <a data-link-type="dfn" href="#backgroundfetchregistration-id"
                    id="ref-for-backgroundfetchregistration-id">ID</a>。</p>
            <p>属性 <dfn class="dfn-paneled idl-code" data-dfn-for="BackgroundFetchRegistration" data-dfn-type="attribute"
                    data-export id="dom-backgroundfetchregistration-uploadtotal"><code>uploadTotal</code></dfn> 的getter
                必须返回 <a data-link-type="dfn">上下文对象</a> 的 <a data-link-type="dfn"
                    href="#backgroundfetchregistration-upload-total"
                    id="ref-for-backgroundfetchregistration-upload-total">上传总数</a>。</p>
            <p>属性 <dfn class="dfn-paneled idl-code" data-dfn-for="BackgroundFetchRegistration" data-dfn-type="attribute"
                    data-export id="dom-backgroundfetchregistration-downloadtotal"><code>downloadTotal</code></dfn>
                的getter
                必须返回 <a data-link-type="dfn">上下文对象</a> 的 <a data-link-type="dfn"
                    href="#backgroundfetchregistration-download-total"
                    id="ref-for-backgroundfetchregistration-download-total">下载总数</a>。</p>
            <p>属性 <dfn class="dfn-paneled idl-code" data-dfn-for="BackgroundFetchRegistration" data-dfn-type="attribute"
                    data-export id="dom-backgroundfetchregistration-uploaded"><code>uploaded</code></dfn> 的getter
                必须返回 <a data-link-type="dfn">上下文对象</a> 的 <a data-link-type="dfn"
                    href="#backgroundfetchregistration-uploaded"
                    id="ref-for-backgroundfetchregistration-uploaded②">已上传</a>。</p>
            <p>属性 <dfn class="dfn-paneled idl-code" data-dfn-for="BackgroundFetchRegistration" data-dfn-type="attribute"
                    data-export id="dom-backgroundfetchregistration-downloaded"><code>downloaded</code></dfn> 的getter
                必须返回 <a data-link-type="dfn">上下文对象</a> 的 <a data-link-type="dfn"
                    href="#backgroundfetchregistration-downloaded"
                    id="ref-for-backgroundfetchregistration-downloaded②">已下载</a>。</p>
            <p>属性 <dfn class="dfn-paneled idl-code" data-dfn-for="BackgroundFetchRegistration" data-dfn-type="attribute"
                    data-export id="dom-backgroundfetchregistration-result"><code>result</code></dfn> 的getter
                必须返回 <a data-link-type="dfn">上下文对象</a> 的 <a data-link-type="dfn"
                    href="#backgroundfetchregistration-result" id="ref-for-backgroundfetchregistration-result③">结果</a>。
            </p>
            <p>属性 <dfn class="dfn-paneled idl-code" data-dfn-for="BackgroundFetchRegistration" data-dfn-type="attribute"
                    data-export id="dom-backgroundfetchregistration-failurereason"><code>failureReason</code></dfn>
                的getter
                必须返回 <a data-link-type="dfn">上下文对象</a> 的 <a data-link-type="dfn"
                    href="#backgroundfetchregistration-failure-reason"
                    id="ref-for-backgroundfetchregistration-failure-reason②">失败原因</a>。</p>
            <p>属性 <dfn class="dfn-paneled idl-code" data-dfn-for="BackgroundFetchRegistration" data-dfn-type="attribute"
                    data-export
                    id="dom-backgroundfetchregistration-recordsavailable"><code>recordsAvailable</code></dfn>
                的getter 必须在 <a data-link-type="dfn">上下文对象</a> 的 <a data-link-type="dfn"
                    href="#backgroundfetchregistration-records-available-flag"
                    id="ref-for-backgroundfetchregistration-records-available-flag②">可用记录标志</a> 设置时返回true，
                否则返回false。</p>
            <h4 class="heading settled" data-level="6.4.1" id="background-fetch-registration-events"><span
                    class="secno">6.4.1. </span><span class="content">事件</span><a class="self-link"
                    href="#background-fetch-registration-events"></a></h4>
            <p>属性 <dfn class="dfn-paneled idl-code" data-dfn-for="BackgroundFetchRegistration" data-dfn-type="attribute"
                    data-export id="dom-backgroundfetchregistration-onprogress"><code>onprogress</code></dfn> 的 <a
                    data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers"
                    id="ref-for-event-handlers②">事件处理器</a> 的 <a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type"
                    id="ref-for-event-handler-event-type②">事件处理类型</a> 为 <code
                    class="idl"><a class="idl-code" data-link-type="event" href="#eventdef-backgroundfetchregistration-progress" id="ref-for-eventdef-backgroundfetchregistration-progress①">progress</a></code>。
            </p>
            <p>事件 <dfn class="dfn-paneled idl-code" data-dfn-for="BackgroundFetchRegistration" data-dfn-type="event"
                    data-export id="eventdef-backgroundfetchregistration-progress"><code>progress</code></dfn> 使用 <code
                    class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#event" id="ref-for-event">Event</a></code>
                接口。</p>

            <h4 class="heading settled" data-level="6.4.2" id="background-fetch-registration-abort"><span
                    class="secno">6.4.2. </span><span class="content"><code
                        class="idl"><a data-link-type="idl" href="#dom-backgroundfetchregistration-abort" id="ref-for-dom-backgroundfetchregistration-abort③">abort()</a></code></span><a
                    class="self-link" href="#background-fetch-registration-abort"></a></h4>
            <div class="algorithm" data-algorithm="abort()">
                <p>方法 <dfn class="dfn-paneled idl-code" data-dfn-for="BackgroundFetchRegistration"
                        data-dfn-type="method" data-export
                        id="dom-backgroundfetchregistration-abort"><code>abort()</code></dfn> 调用时，必须返回 <a
                        data-link-type="dfn" href="https://heycam.github.io/webidl/#a-new-promise"
                        id="ref-for-a-new-promise⑤">一个新的promise</a> <var>promise</var> 并按以下步骤 <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel"
                        id="ref-for-in-parallel⑨">并行</a> 运行：</p>
                <ol>
                    <li data-md>
                        <p>令 <var>bgFetch</var> 为 <a data-link-type="dfn">上下文对象</a> 关联的 <a data-link-type="dfn"
                                href="#backgroundfetchregistration-background-fetch"
                                id="ref-for-backgroundfetchregistration-background-fetch①⓪">background fetch</a>。</p>
                    </li>
                    <li data-md>
                        <p>令 <var>swRegistration</var> 为 <var>bgFetch</var> 的 <a data-link-type="dfn"
                                href="#background-fetch-service-worker-registration"
                                id="ref-for-background-fetch-service-worker-registration⑤">service worker
                                registration</a>。</p>
                    </li>
                    <li data-md>
                        <p><a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/infrastructure.html#enqueue-the-following-steps"
                                id="ref-for-enqueue-the-following-steps④">将以下步骤入队</a> 到 <var>swRegistration</var> 的 <a
                                data-link-type="dfn"
                                href="#service-worker-registration-active-background-fetches-edit-queue"
                                id="ref-for-service-worker-registration-active-background-fetches-edit-queue②">active
                                background fetches 编辑队列</a>：</p>
                        <ol>
                            <li data-md>
                                <p>令 <var>activeBgFetches</var> 为 <var>swRegistration</var> 的 <a data-link-type="dfn"
                                        href="#service-worker-registration-active-background-fetches"
                                        id="ref-for-service-worker-registration-active-background-fetches④">active
                                        background fetches</a>。</p>
                            </li>
                            <li data-md>
                                <p>令 <var>id</var> 为 <var>bgFetch</var> 的 <a data-link-type="dfn"
                                        href="#background-fetch-id" id="ref-for-background-fetch-id④">id</a>。</p>
                            </li>
                            <li data-md>
                                <p>如果 <var>activeBgFetches</var> <a data-link-type="dfn"
                                        href="#does-not-contain-background-fetch"
                                        id="ref-for-does-not-contain-background-fetch">不包含background fetch</a>
                                    <var>bgFetch</var>，则 <a data-link-type="dfn"
                                        href="https://heycam.github.io/webidl/#resolve"
                                        id="ref-for-resolve⑥">resolve</a> <var>promise</var> 为 false 并中止这些步骤。
                                </p>
                            </li>
                            <li data-md>
                                <p>移除 <var>activeBgFetches</var>[<var>id</var>]。</p>
                            </li>
                            <li data-md>
                                <p><a data-link-type="dfn" href="https://heycam.github.io/webidl/#resolve"
                                        id="ref-for-resolve⑦">resolve</a> <var>promise</var> 为 true。</p>
                            </li>
                            <li data-md>
                                <p>设置 <var>bgFetch</var> 的 <a data-link-type="dfn"
                                        href="#background-fetch-abort-all-flag"
                                        id="ref-for-background-fetch-abort-all-flag⑤">abort all flag</a>。</p>
                            </li>
                        </ol>
                    </li>
                </ol>
            </div>

            <h4 class="heading settled" data-level="6.4.3" id="background-fetch-registration-match"><span
                    class="secno">6.4.3. </span><span class="content"><code
                        class="idl"><a data-link-type="idl" href="#dom-backgroundfetchregistration-match" id="ref-for-dom-backgroundfetchregistration-match①">match()</a></code></span><a
                    class="self-link" href="#background-fetch-registration-match"></a></h4>
            <div class="algorithm" data-algorithm="match(request, options)">
                <p>方法 <dfn class="dfn-paneled idl-code" data-dfn-for="BackgroundFetchRegistration"
                        data-dfn-type="method" data-export data-lt="match(request, options)|match(request)"
                        id="dom-backgroundfetchregistration-match"><code>match(<var>request</var>, <var>options</var>)</code></dfn>
                    调用时，必须按以下步骤运行：</p>
                <ol>
                    <li data-md>
                        <p>令 <var>promise</var> 为调用算法 <code
                                class="idl"><a data-link-type="idl" href="#dom-backgroundfetchregistration-matchall" id="ref-for-dom-backgroundfetchregistration-matchall①">matchAll()</a></code>
                            的结果，传递 <var>request</var> 和 <var>options</var>。</p>
                    </li>
                    <li data-md>
                        <p>返回 <a data-link-type="dfn"
                                href="https://heycam.github.io/webidl/#dfn-perform-steps-once-promise-is-settled"
                                id="ref-for-dfn-perform-steps-once-promise-is-settled">对promise反应</a>
                            的结果，带有一个实现处理程序，当被调用时以参数 <var>matches</var> 返回 <var>matches</var>[0]。</p>
                    </li>
                </ol>
                <p class="note" role="note"><span>注意：</span> 鼓励用户代理对上述操作进行优化，使其比调用 <code
                        class="idl"><a data-link-type="idl" href="#dom-backgroundfetchregistration-matchall" id="ref-for-dom-backgroundfetchregistration-matchall②">matchAll()</a></code>
                    更快。</p>
            </div>
            <h4 class="heading settled" data-level="6.4.4" id="background-fetch-registration-match-all"><span
                    class="secno">6.4.4. </span><span class="content"><code
                        class="idl"><a data-link-type="idl" href="#dom-backgroundfetchregistration-matchall" id="ref-for-dom-backgroundfetchregistration-matchall③">matchAll()</a></code></span><a
                    class="self-link" href="#background-fetch-registration-match-all"></a></h4>
            <div class="algorithm" data-algorithm="matchAll(request, options)">
                <p>方法 <dfn class="dfn-paneled idl-code" data-dfn-for="BackgroundFetchRegistration"
                        data-dfn-type="method" data-export
                        data-lt="matchAll(request, options)|matchAll(request)|matchAll()"
                        id="dom-backgroundfetchregistration-matchall"><code>matchAll(<var>request</var>, <var>options</var>)</code></dfn>
                    调用时，必须按以下步骤运行：</p>
                <ol>
                    <li data-md>
                        <p>如果 <a data-link-type="dfn">上下文对象</a> 的 <a data-link-type="dfn"
                                href="#backgroundfetchregistration-records-available-flag"
                                id="ref-for-backgroundfetchregistration-records-available-flag③">记录可用标志</a> 未设置，返回 <a
                                data-link-type="dfn" href="https://heycam.github.io/webidl/#a-promise-rejected-with"
                                id="ref-for-a-promise-rejected-with③">一个被拒绝的promise</a> 并带有 <code
                                class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#invalidstateerror" id="ref-for-invalidstateerror">InvalidStateError</a></code>
                            和 <code
                                class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-DOMException" id="ref-for-idl-DOMException⑤">DOMException</a></code>。
                        </p>
                    </li>
                    <li data-md>
                        <p>令 <var>promise</var> 为 <a data-link-type="dfn"
                                href="https://heycam.github.io/webidl/#a-new-promise"
                                id="ref-for-a-new-promise⑥">一个新的promise</a>。</p>
                    </li>
                    <li data-md>
                        <p>按以下步骤 <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel"
                                id="ref-for-in-parallel①⓪">并行</a> 运行：</p>
                        <ol>
                            <li data-md>
                                <p>令 <var>matchingRecords</var> 为一个空的 <a data-link-type="dfn"
                                        href="https://infra.spec.whatwg.org/#list" id="ref-for-list⑥">列表</a>。</p>
                            </li>
                            <li data-md>
                                <p>对于 <a data-link-type="dfn">上下文对象</a> 的 <a data-link-type="dfn"
                                        href="#backgroundfetchregistration-background-fetch"
                                        id="ref-for-backgroundfetchregistration-background-fetch①①">background fetch</a>
                                    的每个 <a data-link-type="dfn" href="#background-fetch-records"
                                        id="ref-for-background-fetch-records⑤">记录</a>，执行以下步骤：</p>
                                <ol>
                                    <li data-md>
                                        <p>如果 <a data-link-type="dfn"
                                                href="https://w3c.github.io/ServiceWorker/#request-matches-cached-item"
                                                id="ref-for-request-matches-cached-item">请求与缓存项匹配</a>，则对于
                                            <var>request</var>、<var>record</var> 的 <a data-link-type="dfn"
                                                href="#background-fetch-record-request"
                                                id="ref-for-background-fetch-record-request④">请求</a>、<var>record</var> 的
                                            <a data-link-type="dfn" href="#background-fetch-record-response-data"
                                                id="ref-for-background-fetch-record-response-data⑤">响应数据</a> 中的 <a
                                                data-link-type="dfn" href="#background-fetch-response-response"
                                                id="ref-for-background-fetch-response-response⑤">响应</a>，以及
                                            <var>options</var> 返回 true，则 <a data-link-type="dfn"
                                                href="https://infra.spec.whatwg.org/#list-append"
                                                id="ref-for-list-append②">追加</a> <var>record</var> 到
                                            <var>matchingRecords</var>。
                                        </p>
                                    </li>
                                </ol>
                            </li>
                            <li data-md>
                                <p><a data-link-type="dfn" href="#queue-a-bgfetch-task"
                                        id="ref-for-queue-a-bgfetch-task③">入列一个background fetch任务</a> 来 <a
                                        data-link-type="dfn" href="https://heycam.github.io/webidl/#resolve"
                                        id="ref-for-resolve⑧">resolve</a> <var>promise</var>，结果为通过 <a
                                        data-link-type="dfn" href="#create-record-objects"
                                        id="ref-for-create-record-objects②">创建记录对象</a> 从 <var>matchingRecords</var> 在 <a
                                        data-link-type="dfn">上下文对象</a> 的 <a data-link-type="dfn"
                                        href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm"
                                        id="ref-for-concept-relevant-realm⑥">相关领域</a>中。</p>
                            </li>
                        </ol>
                    </li>
                    <li data-md>
                        <p>返回 <var>promise</var>。</p>
                    </li>
                </ol>
            </div>
        </div>
        <h3 class="heading settled" data-level="6.5" id="background-fetch-record-interface"><span class="secno">6.5.
            </span><span class="content"><code
                    class="idl"><a data-link-type="idl" href="#backgroundfetchrecord" id="ref-for-backgroundfetchrecord③">BackgroundFetchRecord</a></code></span><a
                class="self-link" href="#background-fetch-record-interface"></a></h3>
        <pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed②"><c- g>Exposed</c-></a>=(<c- n>Window</c->,<c- n>Worker</c->)]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="backgroundfetchrecord"><code><c- g>BackgroundFetchRecord</c-></code></dfn> {
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://fetch.spec.whatwg.org/#request" id="ref-for-request③"><c- n>Request</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="Request" href="#dom-backgroundfetchrecord-request" id="ref-for-dom-backgroundfetchrecord-request①"><c- g>request</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-promise" id="ref-for-idl-promise⑥"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="https://fetch.spec.whatwg.org/#response" id="ref-for-response②"><c- n>Response</c-></a>> <a class="idl-code" data-link-type="attribute" data-readonly data-type="Promise<Response>" href="#dom-backgroundfetchrecord-responseready" id="ref-for-dom-backgroundfetchrecord-responseready④"><c- g>responseReady</c-></a>;
};
</pre>
        <div>
            一个 <code
                class="idl"><a data-link-type="idl" href="#backgroundfetchrecord" id="ref-for-backgroundfetchrecord④">BackgroundFetchRecord</a></code>
            拥有：
            <ul>
                <li data-md>
                    <p>一个 <dfn class="dfn-paneled" data-dfn-for="BackgroundFetchRecord" data-dfn-type="dfn"
                            data-noexport id="backgroundfetchrecord-request">请求</dfn> (一个 <a data-link-type="dfn"
                            href="https://fetch.spec.whatwg.org/#concept-request"
                            id="ref-for-concept-request②">request</a>)。</p>
                </li>
                <li data-md>
                    <p>一个 <dfn class="dfn-paneled" data-dfn-for="BackgroundFetchRecord" data-dfn-type="dfn"
                            data-noexport id="backgroundfetchrecord-response-promise">响应 promise</dfn> (一个 <code
                            class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-promise" id="ref-for-idl-promise⑦">Promise</a></code>，用于
                        <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response"
                            id="ref-for-concept-response⑤">response</a>）。
                    </p>
                </li>
            </ul>
            <p><dfn class="dfn-paneled idl-code" data-dfn-for="BackgroundFetchRecord" data-dfn-type="attribute"
                    data-export id="dom-backgroundfetchrecord-request"><code>request</code></dfn> 属性的 getter 必须返回 <a
                    data-link-type="dfn">上下文对象</a> 的 <a data-link-type="dfn" href="#backgroundfetchrecord-request"
                    id="ref-for-backgroundfetchrecord-request">请求</a>。</p>
            <p><dfn class="dfn-paneled idl-code" data-dfn-for="BackgroundFetchRecord" data-dfn-type="attribute"
                    data-export id="dom-backgroundfetchrecord-responseready"><code>responseReady</code></dfn> 属性的 getter
                必须返回 <a data-link-type="dfn">上下文对象</a> 的 <a data-link-type="dfn"
                    href="#backgroundfetchrecord-response-promise"
                    id="ref-for-backgroundfetchrecord-response-promise">响应 promise</a>。</p>
        </div>
        <h3 class="heading settled" data-level="6.6" id="background-fetch-event"><span class="secno">6.6. </span><span
                class="content"><code
                    class="idl"><a data-link-type="idl" href="#backgroundfetchevent" id="ref-for-backgroundfetchevent④">BackgroundFetchEvent</a></code></span><a
                class="self-link" href="#background-fetch-event"></a></h3>
        <pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed③"><c- g>Exposed</c-></a>=<c- n>ServiceWorker</c->]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="backgroundfetchevent"><code><c- g>BackgroundFetchEvent</c-></code></dfn> : <a data-link-type="idl-name" href="https://w3c.github.io/ServiceWorker/#extendableevent" id="ref-for-extendableevent"><c- n>ExtendableEvent</c-></a> {
  <dfn class="idl-code" data-dfn-for="BackgroundFetchEvent" data-dfn-type="constructor" data-export data-lt="BackgroundFetchEvent(type, init)|constructor(type, init)" id="dom-backgroundfetchevent-backgroundfetchevent"><code><c- g>constructor</c-></code><a class="self-link" href="#dom-backgroundfetchevent-backgroundfetchevent"></a></dfn>(<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString" id="ref-for-idl-DOMString⑤"><c- b>DOMString</c-></a> <dfn class="idl-code" data-dfn-for="BackgroundFetchEvent/BackgroundFetchEvent(type, init), BackgroundFetchEvent/constructor(type, init)" data-dfn-type="argument" data-export id="dom-backgroundfetchevent-backgroundfetchevent-type-init-type"><code><c- g>type</c-></code><a class="self-link" href="#dom-backgroundfetchevent-backgroundfetchevent-type-init-type"></a></dfn>, <a data-link-type="idl-name" href="#dictdef-backgroundfetcheventinit" id="ref-for-dictdef-backgroundfetcheventinit"><c- n>BackgroundFetchEventInit</c-></a> <dfn class="idl-code" data-dfn-for="BackgroundFetchEvent/BackgroundFetchEvent(type, init), BackgroundFetchEvent/constructor(type, init)" data-dfn-type="argument" data-export id="dom-backgroundfetchevent-backgroundfetchevent-type-init-init"><code><c- g>init</c-></code><a class="self-link" href="#dom-backgroundfetchevent-backgroundfetchevent-type-init-init"></a></dfn>);
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#backgroundfetchregistration" id="ref-for-backgroundfetchregistration⑨"><c- n>BackgroundFetchRegistration</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="BackgroundFetchRegistration" href="#dom-backgroundfetchevent-registration" id="ref-for-dom-backgroundfetchevent-registration②"><c- g>registration</c-></a>;
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-backgroundfetcheventinit"><code><c- g>BackgroundFetchEventInit</c-></code></dfn> : <a data-link-type="idl-name" href="https://w3c.github.io/ServiceWorker/#dictdef-extendableeventinit" id="ref-for-dictdef-extendableeventinit"><c- n>ExtendableEventInit</c-></a> {
  <c- b>required</c-> <a data-link-type="idl-name" href="#backgroundfetchregistration" id="ref-for-backgroundfetchregistration①⓪"><c- n>BackgroundFetchRegistration</c-></a> <dfn class="idl-code" data-dfn-for="BackgroundFetchEventInit" data-dfn-type="dict-member" data-export data-type="BackgroundFetchRegistration " id="dom-backgroundfetcheventinit-registration"><code><c- g>registration</c-></code><a class="self-link" href="#dom-backgroundfetcheventinit-registration"></a></dfn>;
};
</pre>
        <div>
            一个 <code
                class="idl"><a data-link-type="idl" href="#backgroundfetchevent" id="ref-for-backgroundfetchevent⑤">BackgroundFetchEvent</a></code>
            拥有一个 <dfn class="dfn-paneled" data-dfn-for="BackgroundFetchEvent" data-dfn-type="dfn" data-noexport
                id="backgroundfetchevent-background-fetch">background fetch</dfn> (一个 <a data-link-type="dfn"
                href="#background-fetch" id="ref-for-background-fetch①⑦">background fetch</a>), 最初是被 <code
                class="idl"><a data-link-type="idl" href="#dom-backgroundfetchevent-registration" id="ref-for-dom-backgroundfetchevent-registration③">registration</a></code>
            初始化的值。
            <p><dfn class="dfn-paneled idl-code" data-dfn-for="BackgroundFetchEvent" data-dfn-type="attribute"
                    data-export id="dom-backgroundfetchevent-registration"><code>registration</code></dfn> 属性必须返回初始化的值。
            </p>
        </div>
        <h3 class="heading settled" data-level="6.7" id="background-fetch-update-ui-event"><span class="secno">6.7.
            </span><span class="content"><code
                    class="idl"><a data-link-type="idl" href="#backgroundfetchupdateuievent" id="ref-for-backgroundfetchupdateuievent④">BackgroundFetchUpdateUIEvent</a></code></span><a
                class="self-link" href="#background-fetch-update-ui-event"></a></h3>
        <pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed④"><c- g>Exposed</c-></a>=<c- n>ServiceWorker</c->]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="backgroundfetchupdateuievent"><code><c- g>BackgroundFetchUpdateUIEvent</c-></code></dfn> : <a data-link-type="idl-name" href="#backgroundfetchevent" id="ref-for-backgroundfetchevent⑥"><c- n>BackgroundFetchEvent</c-></a> {
  <dfn class="idl-code" data-dfn-for="BackgroundFetchUpdateUIEvent" data-dfn-type="constructor" data-export data-lt="BackgroundFetchUpdateUIEvent(type, init)|constructor(type, init)" id="dom-backgroundfetchupdateuievent-backgroundfetchupdateuievent"><code><c- g>constructor</c-></code><a class="self-link" href="#dom-backgroundfetchupdateuievent-backgroundfetchupdateuievent"></a></dfn>(<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString" id="ref-for-idl-DOMString⑥"><c- b>DOMString</c-></a> <dfn class="idl-code" data-dfn-for="BackgroundFetchUpdateUIEvent/BackgroundFetchUpdateUIEvent(type, init), BackgroundFetchUpdateUIEvent/constructor(type, init)" data-dfn-type="argument" data-export id="dom-backgroundfetchupdateuievent-backgroundfetchupdateuievent-type-init-type"><code><c- g>type</c-></code><a class="self-link" href="#dom-backgroundfetchupdateuievent-backgroundfetchupdateuievent-type-init-type"></a></dfn>, <a data-link-type="idl-name" href="#dictdef-backgroundfetcheventinit" id="ref-for-dictdef-backgroundfetcheventinit①"><c- n>BackgroundFetchEventInit</c-></a> <dfn class="idl-code" data-dfn-for="BackgroundFetchUpdateUIEvent/BackgroundFetchUpdateUIEvent(type, init), BackgroundFetchUpdateUIEvent/constructor(type, init)" data-dfn-type="argument" data-export id="dom-backgroundfetchupdateuievent-backgroundfetchupdateuievent-type-init-init"><code><c- g>init</c-></code><a class="self-link" href="#dom-backgroundfetchupdateuievent-backgroundfetchupdateuievent-type-init-init"></a></dfn>);
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-promise" id="ref-for-idl-promise⑧"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-undefined" id="ref-for-idl-undefined"><c- b>undefined</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-backgroundfetchupdateuievent-updateui" id="ref-for-dom-backgroundfetchupdateuievent-updateui"><c- g>updateUI</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-backgroundfetchuioptions" id="ref-for-dictdef-backgroundfetchuioptions①"><c- n>BackgroundFetchUIOptions</c-></a> <dfn class="idl-code" data-dfn-for="BackgroundFetchUpdateUIEvent/updateUI(options), BackgroundFetchUpdateUIEvent/updateUI()" data-dfn-type="argument" data-export id="dom-backgroundfetchupdateuievent-updateui-options-options"><code><c- g>options</c-></code><a class="self-link" href="#dom-backgroundfetchupdateuievent-updateui-options-options"></a></dfn> = {});
};
</pre>
        <div>
            <p>一个 <code
                    class="idl"><a data-link-type="idl" href="#backgroundfetchupdateuievent" id="ref-for-backgroundfetchupdateuievent⑤">BackgroundFetchUpdateUIEvent</a></code>
                拥有一个 <dfn class="dfn-paneled" data-dfn-for="BackgroundFetchUpdateUIEvent" data-dfn-type="dfn"
                    data-noexport id="backgroundfetchupdateuievent-ui-updated-flag">UI 更新标志</dfn>，其初始状态为未设置。</p>
            <h4 class="heading settled" data-level="6.7.1" id="background-fetch-update-ui-event-update-ui"><span
                    class="secno">6.7.1. </span><span class="content"><code
                        class="idl"><a data-link-type="idl" href="#dom-backgroundfetchupdateuievent-updateui" id="ref-for-dom-backgroundfetchupdateuievent-updateui①">updateUI()</a></code></span><a
                    class="self-link" href="#background-fetch-update-ui-event-update-ui"></a></h4>
            <div class="algorithm" data-algorithm="updateUI(options)">
                <dfn class="dfn-paneled idl-code" data-dfn-for="BackgroundFetchUpdateUIEvent" data-dfn-type="method"
                    data-export data-lt="updateUI(options)|updateUI()"
                    id="dom-backgroundfetchupdateuievent-updateui"><code>updateUI(<var>options</var>)</code></dfn>
                方法在调用时必须返回一个 <a data-link-type="dfn" href="https://heycam.github.io/webidl/#a-new-promise"
                    id="ref-for-a-new-promise⑦">新的 promise</a> <var>promise</var>，并按照这些步骤 <a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel"
                    id="ref-for-in-parallel①①">并行</a> 运行：
                <ol>
                    <li data-md>
                        <p>如果以下任一情况为真：</p>
                        <ul>
                            <li data-md>
                                <p><a data-link-type="dfn">上下文对象</a>的 <code
                                        class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-istrusted" id="ref-for-dom-event-istrusted">isTrusted</a></code>
                                    属性为假。</p>
                            </li>
                            <li data-md>
                                <p><a data-link-type="dfn">上下文对象</a>的 <a data-link-type="dfn"
                                        href="#backgroundfetchupdateuievent-ui-updated-flag"
                                        id="ref-for-backgroundfetchupdateuievent-ui-updated-flag">UI 更新标志</a> 已设置。</p>
                            </li>
                            <li data-md>
                                <p><a data-link-type="dfn">上下文对象</a>未处于 <a data-link-type="dfn"
                                        href="https://w3c.github.io/ServiceWorker/#extendableevent-active"
                                        id="ref-for-extendableevent-active①">活动</a> 状态。</p>
                            </li>
                        </ul>
                        <p>抛出 <code
                                class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#invalidstateerror" id="ref-for-invalidstateerror①">InvalidStateError</a></code>
                            <code
                                class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-DOMException" id="ref-for-idl-DOMException⑥">DOMException</a></code>。
                        </p>
                    </li>
                    <li data-md>
                        <p>设置 <a data-link-type="dfn">上下文对象</a>的 <a data-link-type="dfn"
                                href="#backgroundfetchupdateuievent-ui-updated-flag"
                                id="ref-for-backgroundfetchupdateuievent-ui-updated-flag①">UI 更新标志</a>。</p>
                    </li>
                    <li data-md>
                        <p>如果 <var>options</var> 为 null，则返回。</p>
                    </li>
                    <li data-md>
                        <p>让 <var>bgFetch</var> 成为 <a data-link-type="dfn">上下文对象</a>的 <a data-link-type="dfn"
                                href="#backgroundfetchevent-background-fetch"
                                id="ref-for-backgroundfetchevent-background-fetch">后台提取</a>。</p>
                    </li>
                    <li data-md>
                        <p>如果 <var>options</var> 的 <code
                                class="idl"><a data-link-type="idl" href="#dom-backgroundfetchuioptions-icons" id="ref-for-dom-backgroundfetchuioptions-icons">icons</a></code>
                            成员存在，将 <var>bgFetch</var> 的 <a data-link-type="dfn" href="#background-fetch-icons"
                                id="ref-for-background-fetch-icons②">图标</a> 设置为 <var>options</var> 的 <code
                                class="idl"><a data-link-type="idl" href="#dom-backgroundfetchuioptions-icons" id="ref-for-dom-backgroundfetchuioptions-icons①">icons</a></code>。
                        </p>
                    </li>
                    <li data-md>
                        <p>如果 <var>options</var> 的 <code
                                class="idl"><a data-link-type="idl" href="#dom-backgroundfetchuioptions-title" id="ref-for-dom-backgroundfetchuioptions-title">title</a></code>
                            成员存在，将 <var>bgFetch</var> 的 <a data-link-type="dfn" href="#background-fetch-title"
                                id="ref-for-background-fetch-title②">标题</a> 设置为 <var>options</var> 的 <code
                                class="idl"><a data-link-type="idl" href="#dom-backgroundfetchuioptions-title" id="ref-for-dom-backgroundfetchuioptions-title①">title</a></code>。
                        </p>
                    </li>
                    <li data-md>
                        <p><a data-link-type="dfn" href="https://heycam.github.io/webidl/#resolve"
                                id="ref-for-resolve⑨">解决</a> <var>promise</var>。</p>
                    </li>
                </ol>
            </div>
        </div>
        <h2 class="heading settled" data-level="7" id="automation"><span class="secno">7. </span><span
                class="content">自动化</span><a class="self-link" href="#automation"></a></h2>
        <p>为了用户代理自动化和应用程序测试的目的，本文档为<a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-extension-command"
                id="ref-for-dfn-extension-command">扩展命令</a>定义了以下<a data-link-type="biblio"
                href="#biblio-webdriver">[WebDriver]</a>规范。</p>

        <h3 class="heading settled" data-level="7.1" id="automation-click"><span class="secno">7.1. </span><span
                class="content"><a data-link-type="dfn" href="#background-fetch-click"
                    id="ref-for-background-fetch-click">点击</a></span><a class="self-link" href="#automation-click"></a>
        </h3>
        <div class="algorithm" data-algorithm="background fetch click">
            <table>
                <tbody>
                    <tr>
                        <th><a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-method"
                                id="ref-for-concept-request-method⑥">方法</a></th>
                        <th><a data-link-type="dfn"
                                href="https://w3c.github.io/webdriver/#dfn-extension-command-uri-template"
                                id="ref-for-dfn-extension-command-uri-template">URI 模板</a></th>
                    </tr>
                    <tr>
                        <td>POST</td>
                        <td>/session/{session id}/backgroundfetch/{<var>id</var>}/click</td>
                    </tr>
                </tbody>
            </table>
            <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="background-fetch-click">后台提取点击</dfn> <a
                    data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-extension-command"
                    id="ref-for-dfn-extension-command①">扩展命令</a> 模拟用户激活<a data-link-type="dfn"
                    href="#background-fetch-display" id="ref-for-background-fetch-display②">显示</a>后台提取的操作。<a
                    data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-remote-end-steps"
                    id="ref-for-dfn-remote-end-steps">远程端步骤</a>如下：</p>
            <ol>
                <li data-md>
                    <p>如果<a data-link-type="dfn"
                            href="https://w3c.github.io/webdriver/#dfn-current-top-level-browsing-context"
                            id="ref-for-dfn-current-top-level-browsing-context">当前顶级浏览上下文</a> <a data-link-type="dfn"
                            href="https://w3c.github.io/webdriver/#dfn-no-longer-open"
                            id="ref-for-dfn-no-longer-open">不再打开</a>，则返回 <a data-link-type="dfn"
                            href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors">WebDriver
                            错误</a>，错误代码为 <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code"
                            id="ref-for-dfn-error-code">WebDriver 错误代码</a> <a data-link-type="dfn"
                            href="https://w3c.github.io/webdriver/#dfn-no-such-window"
                            id="ref-for-dfn-no-such-window">没有这样的窗口</a>。</p>
                </li>
                <li data-md>
                    <p>令 <var>pageURL</var> 为当前顶级浏览上下文的<a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/browsers.html#active-document"
                            id="ref-for-active-document">活动文档</a>的<a data-link-type="dfn"
                            href="https://dom.spec.whatwg.org/#concept-document-url"
                            id="ref-for-concept-document-url">URL</a>。</p>
                </li>
                <li data-md>
                    <p>令 <var>swRegistration</var> 为<var>pageURL</var>的<a data-link-type="dfn"
                            href="https://w3c.github.io/ServiceWorker/#match-service-worker-registration"
                            id="ref-for-match-service-worker-registration">匹配的服务工作者注册</a>。</p>
                </li>
                <li data-md>
                    <p>如果 <var>swRegistration</var> 为空，则返回 <a data-link-type="dfn"
                            href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors①">WebDriver
                            错误</a>，状态码为 <code>400</code>，JSON 错误代码为“<code>invalid service worker state</code>”。</p>
                </li>
                <li data-md>
                    <p>令 <var>bgFetch</var> 为具有 <a data-link-type="dfn" href="#background-fetch-id"
                            id="ref-for-background-fetch-id⑤">id</a>为 <a data-link-type="dfn"
                            href="https://w3c.github.io/webdriver/#dfn-url-variables" id="ref-for-dfn-url-variables">url
                            变量</a> <var>id</var> 的最新<a data-link-type="dfn" href="#background-fetch"
                            id="ref-for-background-fetch①⑨">后台提取</a>，并且具有 <var>swRegistration</var> 的<a
                            data-link-type="dfn" href="#background-fetch-service-worker-registration"
                            id="ref-for-background-fetch-service-worker-registration⑥">服务工作者注册</a>，否则为 null。</p>
                </li>
                <li data-md>
                    <p>如果 <var>bgFetch</var> 为空，则返回 <a data-link-type="dfn"
                            href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors②">WebDriver
                            错误</a>，状态码为 <code>404</code>，JSON 错误代码为“<code>background fetch not found</code>”。</p>
                </li>
                <li data-md>
                    <p><a data-link-type="dfn" href="#fire-a-background-fetch-click-event"
                            id="ref-for-fire-a-background-fetch-click-event②">触发后台提取点击事件</a>，针对 <var>bgFetch</var>。</p>
                </li>
                <li data-md>
                    <p>返回 <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success"
                            id="ref-for-dfn-success">WebDriver 成功</a>。</p>
                </li>
            </ol>
        </div>
        <h2 class="heading settled" data-level="8" id="privacy-and-bandwidth-use"><span class="secno">8. </span><span
                class="content">隐私和带宽使用</span><a class="self-link" href="#privacy-and-bandwidth-use"></a></h2>
        <p>提取操作可能很大且需要很长时间才能完成。在此期间，用户将从一个或多个服务器获取数据。用户的 IP 地址可能在操作过程中发生变化，并可能被用来跟踪用户的长期位置。</p>
        <p>为了缓解这种情况，显示<a data-link-type="dfn" href="#background-fetch-display"
                id="ref-for-background-fetch-display③">后台提取</a>的步骤要求：</p>
        <ul>
            <li data-md>
                <p>显示发起提取的站点的<a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-origin"
                        id="ref-for-concept-url-origin②">来源</a>。</p>
            </li>
            <li data-md>
                <p>在<a data-link-type="dfn" href="#background-fetch"
                        id="ref-for-background-fetch②①">后台提取</a>处于活动状态时，用户界面不能被关闭。</p>
            </li>
            <li data-md>
                <p>允许轻松终止操作。</p>
            </li>
            <li data-md>
                <p>允许操作以暂停状态启动，需用户交互才能开始。</p>
            </li>
        </ul>
        <p>这些步骤还允许用户代理在用户处于计量连接时暂停<a data-link-type="dfn" href="#background-fetch"
                id="ref-for-background-fetch②②">后台提取</a>。</p>
        <p>所有存储的数据都与特定的<a data-link-type="dfn"
                href="https://w3c.github.io/ServiceWorker/#dfn-service-worker-registration"
                id="ref-for-dfn-service-worker-registration④">服务工作者注册</a>相关联。清除<a data-link-type="dfn"
                href="https://w3c.github.io/ServiceWorker/#dfn-service-worker-registration"
                id="ref-for-dfn-service-worker-registration⑤">服务工作者注册</a>将清除所有关联的<a data-link-type="dfn"
                href="#background-fetch" id="ref-for-background-fetch②③">后台提取</a>。</p>
    </main>
    <div data-fill-with="conformance">
        <h2 class="no-ref no-num heading settled" id="w3c-conformance"><span class="content">一致性</span><a
                class="self-link" href="#w3c-conformance"></a></h2>
        <h3 class="no-ref no-num heading settled" id="w3c-conventions"><span class="content">文档约定</span><a
                class="self-link" href="#w3c-conventions"></a></h3>
        <p>一致性要求通过描述性断言和 RFC 2119 术语的组合来表达。文档中使用的关键字 “MUST”、"MUST NOT"、"REQUIRED"、"SHALL"、"SHALL NOT"、"SHOULD"、"SHOULD
            NOT"、"RECOMMENDED"、"MAY" 和 "OPTIONAL" 应按照 RFC 2119 的描述进行解释。然而，为了提高可读性，这些词在本规范中并未全部使用大写字母。</p>
        <p>本规范的所有文本都是规范性的，除非明确标记为非规范性部分、示例或注释。<a data-link-type="biblio" href="#biblio-rfc2119">[RFC2119]</a></p>
        <p>本规范中的示例以“例如”开头，或者用 <code>class="example"</code> 与规范性文本区分开来，如下所示：</p>
        <div class="example" id="w3c-example">
            <a class="self-link" href="#w3c-example"></a>
            <p>这是一个提供信息的示例。</p>
        </div>
        <p>信息性注释以“注释”一词开头，并用 <code>class="note"</code> 与规范性文本区分开来，如下所示：</p>
        <p class="note" role="note">注意，这是一个提供信息的注释。</p>
        <h3 class="no-ref no-num heading settled" id="w3c-conformant-algorithms"><span class="content">一致性算法</span><a
                class="self-link" href="#w3c-conformant-algorithms"></a></h3>
        <p>算法中以命令式表达的要求（例如“去除任何前导空格字符”或“返回 false 并中止这些步骤”）应按照引入算法时使用的关键字（如“必须”、“应”、“可以”等）的含义进行解释。</p>
        <p>以算法或特定步骤措辞的一致性要求可以以任何方式实现，只要最终结果等效即可。特别是，本规范中定义的算法旨在易于理解，而非高性能实现。鼓励实现者进行优化。</p>
    </div>
    <script src="https://www.w3.org/scripts/TR/2016/fixup.js"></script>
    <h2 class="no-num no-ref heading settled" id="index"><span class="content">索引</span><a class="self-link"
            href="#index"></a></h2>
    <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">本规范定义的术语</span><a
            class="self-link" href="#index-defined-here"></a></h3>
    <ul class="index">
        <li>""
            <ul>
                <li><a href="#dom-backgroundfetchfailurereason">BackgroundFetchFailureReason 的枚举值</a><span>，在
                        §6.4</span></li>
                <li><a href="#dom-backgroundfetchresult">BackgroundFetchResult 的枚举值</a><span>，在 §6.4</span></li>
            </ul>
        <li><a href="#dom-backgroundfetchregistration-abort">abort()</a><span>，在 §6.4.2</span></li>
        <li><a href="#background-fetch-abort-all-flag">abort all flag</a><span>，在 §3.2</span></li>
        <li><a href="#dom-backgroundfetchfailurereason-aborted">"aborted"</a><span>，在 §6.4</span></li>
        <li><a href="#service-worker-registration-active-background-fetches">活跃的后台获取</a><span>，在 §3.1</span></li>
        <li><a href="#service-worker-registration-active-background-fetches-edit-queue">活跃的后台获取编辑队列</a><span>，在
                §3.1</span></li>
        <li>后台获取
            <ul>
                <li><a href="#background-fetch">定义</a><span>，在 §3.2</span></li>
                <li><a href="#backgroundfetchevent-background-fetch">BackgroundFetchEvent 的定义</a><span>，在 §6.6</span>
                </li>
                <li><a href="#backgroundfetchregistration-background-fetch">BackgroundFetchRegistration 的定义</a><span>，在
                        §6.4</span></li>
            </ul>
        <li><a href="#dom-serviceworkerregistration-backgroundfetch">backgroundFetch</a><span>，在 §6.2</span></li>
        <li><a href="#eventdef-serviceworkerglobalscope-backgroundfetchabort">backgroundfetchabort</a><span>，在
                §6.1.1</span></li>
        <li><a href="#background-fetch-click">后台获取点击</a><span>，在 §7.1</span></li>
        <li><a href="#eventdef-serviceworkerglobalscope-backgroundfetchclick">backgroundfetchclick</a><span>，在
                §6.1.1</span></li>
        <li><a href="#backgroundfetchevent">BackgroundFetchEvent</a><span>，在 §6.6</span></li>
        <li><a href="#dictdef-backgroundfetcheventinit">BackgroundFetchEventInit</a><span>，在 §6.6</span></li>
        <li><a href="#dom-backgroundfetchevent-backgroundfetchevent">BackgroundFetchEvent(type, init)</a><span>，在
                §6.6</span></li>
        <li><a href="#eventdef-serviceworkerglobalscope-backgroundfetchfail">backgroundfetchfail</a><span>，在
                §6.1.1</span></li>
        <li><a href="#enumdef-backgroundfetchfailurereason">BackgroundFetchFailureReason</a><span>，在 §6.4</span></li>
        <li><a href="#serviceworkerregistration-background-fetch-manager">后台获取管理器</a><span>，在 §6.2</span></li>
        <li><a href="#backgroundfetchmanager">BackgroundFetchManager</a><span>，在 §6.3</span></li>
        <li><a href="#dictdef-backgroundfetchoptions">BackgroundFetchOptions</a><span>，在 §6.3</span></li>
        <li><a href="#background-fetch-record">后台获取记录</a><span>，在 §3.3</span></li>
        <li><a href="#backgroundfetchrecord">BackgroundFetchRecord</a><span>，在 §6.5</span></li>
        <li><a href="#backgroundfetchregistration">BackgroundFetchRegistration</a><span>，在 §6.4</span></li>
        <li><a href="#backgroundfetchmanager-backgroundfetchregistration-instances">BackgroundFetchRegistration
                实例</a><span>，在 §6.3</span></li>
        <li><a href="#background-fetch-response">后台获取响应</a><span>，在 §3.4</span></li>
        <li><a href="#enumdef-backgroundfetchresult">BackgroundFetchResult</a><span>，在 §6.4</span></li>
        <li><a href="#eventdef-serviceworkerglobalscope-backgroundfetchsuccess">backgroundfetchsuccess</a><span>，在
                §6.1.1</span></li>
        <li><a href="#background-fetch-task-source">后台获取任务源</a><span>，在 §3</span></li>
        <li><a href="#dictdef-backgroundfetchuioptions">BackgroundFetchUIOptions</a><span>，在 §6.3</span></li>
        <li><a href="#backgroundfetchupdateuievent">BackgroundFetchUpdateUIEvent</a><span>，在 §6.7</span></li>
        <li><a href="#dom-backgroundfetchupdateuievent-backgroundfetchupdateuievent">BackgroundFetchUpdateUIEvent(type,
                init)</a><span>，在 §6.7</span></li>
        <li><a href="#dom-backgroundfetchfailurereason-bad-status">"bad-status"</a><span>，在 §6.4</span></li>
        <li><a href="#background-fetch-response-bytes">字节</a><span>，在 §3.4</span></li>
        <li><a href="#complete-a-record">完成一条记录</a><span>，在 §4.2</span></li>
        <li>constructor(type, init)
            <ul>
                <li><a href="#dom-backgroundfetchevent-backgroundfetchevent">BackgroundFetchEvent 的构造函数</a><span>，在
                        §6.6</span></li>
                <li><a href="#dom-backgroundfetchupdateuievent-backgroundfetchupdateuievent">BackgroundFetchUpdateUIEvent
                        的构造函数</a><span>，在 §6.7</span></li>
            </ul>
        <li><a href="#contains-background-fetch">包含后台获取</a><span>，在 §4.9</span></li>
        <li><a href="#create-record-objects">创建记录对象</a><span>，在 §4.8</span></li>
        <li><a href="#background-fetch-display">显示</a><span>，在 §3.2.1</span></li>
        <li><a href="#does-not-contain-background-fetch">不包含后台获取</a><span>，在 §4.9</span></li>
        <li>下载
            <ul>
                <li><a href="#dom-backgroundfetchregistration-downloaded">BackgroundFetchRegistration 的属性</a><span>，在
                        §6.4</span></li>
                <li><a href="#backgroundfetchregistration-downloaded">BackgroundFetchRegistration 的定义</a><span>，在
                        §6.4</span></li>
            </ul>
        <li>下载总量
            <ul>
                <li><a href="#backgroundfetchregistration-download-total">BackgroundFetchRegistration 的定义</a><span>，在
                        §6.4</span></li>
                <li><a href="#background-fetch-download-total">后台获取的定义</a><span>，在 §3.2</span></li>
            </ul>
        <li>downloadTotal
            <ul>
                <li><a href="#dom-backgroundfetchregistration-downloadtotal">BackgroundFetchRegistration 的属性</a><span>，在
                        §6.4</span></li>
                <li><a href="#dom-backgroundfetchoptions-downloadtotal">BackgroundFetchOptions 的字典成员</a><span>，在
                        §6.3</span></li>
            </ul>
        <li><a href="#dom-backgroundfetchfailurereason-download-total-exceeded">"download-total-exceeded"</a><span>，在
                §6.4</span></li>
        <li><a href="#background-fetch-response-exposed">公开的后台获取响应</a><span>，在 §3.4</span></li>
        <li><a href="#extract-content-range-values">提取内容范围值</a><span>，在 §4.7</span></li>
        <li><a href="#extract-content-range-values">提取内容范围值</a><span>，在 §4.7</span></li>
        <li><a href="#dom-backgroundfetchresult-failure">"failure"</a><span>，在 §6.4</span></li>
        <li>失败原因
            <ul>
                <li><a href="#backgroundfetchregistration-failure-reason">BackgroundFetchRegistration 的定义</a><span>，在
                        §6.4</span></li>
                <li><a href="#background-fetch-failure-reason">后台获取的定义</a><span>，在 §3.2</span></li>
            </ul>
        <li><a href="#dom-backgroundfetchregistration-failurereason">failureReason</a><span>，在 §6.4</span></li>
        <li><a href="#dom-backgroundfetchfailurereason-fetch-error">"fetch-error"</a><span>，在 §6.4</span></li>
        <li><a href="#dom-backgroundfetchmanager-fetch">fetch(id, requests)</a><span>，在 §6.3.1</span></li>
        <li><a href="#dom-backgroundfetchmanager-fetch">fetch(id, requests, options)</a><span>，在 §6.3.1</span></li>
        <li><a href="#fire-a-background-fetch-click-event">触发后台获取点击事件</a><span>，在 §4.4</span></li>
        <li><a href="#get-a-backgroundfetchregistration-instance">获取 BackgroundFetchRegistration 实例</a><span>，在
                §4.5</span></li>
        <li><a href="#dom-backgroundfetchmanager-get">get(id)</a><span>，在 §6.3.2</span></li>
        <li><a href="#dom-backgroundfetchmanager-getids">getIds()</a><span>，在 §6.3.3</span></li>
        <li><a href="#get-a-backgroundfetchregistration-instance">获取 BackgroundFetchRegistration 实例</a><span>，在
                §4.5</span></li>
        <li><a href="#background-fetch-icons">图标</a><span>，在 §3.2</span></li>
        <li><a href="#dom-backgroundfetchuioptions-icons">icons</a><span>，在 §6.3</span></li>
        <li>id
            <ul>
                <li><a href="#dom-backgroundfetchregistration-id">BackgroundFetchRegistration 的属性</a><span>，在
                        §6.4</span></li>
                <li><a href="#backgroundfetchregistration-id">BackgroundFetchRegistration 的定义</a><span>，在 §6.4</span>
                </li>
                <li><a href="#background-fetch-id">后台获取的定义</a><span>，在 §3.2</span></li>
            </ul>
        <li><a href="#dom-backgroundfetchregistration-matchall">matchAll()</a><span>，在 §6.4.4</span></li>
        <li><a href="#dom-backgroundfetchregistration-matchall">matchAll(request)</a><span>，在 §6.4.4</span></li>
        <li><a href="#dom-backgroundfetchregistration-matchall">matchAll(request, options)</a><span>，在 §6.4.4</span>
        </li>
        <li><a href="#dom-backgroundfetchregistration-match">match(request)</a><span>，在 §6.4.3</span></li>
        <li><a href="#dom-backgroundfetchregistration-match">match(request, options)</a><span>，在 §6.4.3</span></li>
        <li><a href="#dom-serviceworkerglobalscope-onbackgroundfetchabort">onbackgroundfetchabort</a><span>，在
                §6.1</span></li>
        <li><a href="#dom-serviceworkerglobalscope-onbackgroundfetchclick">onbackgroundfetchclick</a><span>，在
                §6.1</span></li>
        <li><a href="#dom-serviceworkerglobalscope-onbackgroundfetchfail">onbackgroundfetchfail</a><span>，在 §6.1</span>
        </li>
        <li><a href="#dom-serviceworkerglobalscope-onbackgroundfetchsuccess">onbackgroundfetchsuccess</a><span>，在
                §6.1</span></li>
        <li><a href="#dom-backgroundfetchregistration-onprogress">onprogress</a><span>，在 §6.4.1</span></li>
        <li><a href="#background-fetch-paused-flag">暂停标志</a><span>，在 §3.2</span></li>
        <li><a href="#perform-a-background-fetch">执行后台获取</a><span>，在 §4.1</span></li>
        <li><a href="#eventdef-backgroundfetchregistration-progress">progress</a><span>，在 §6.4.1</span></li>
        <li><a href="#queue-a-bgfetch-task">排队后台获取任务</a><span>，在 §3</span></li>
        <li><a href="#dom-backgroundfetchfailurereason-quota-exceeded">"quota-exceeded"</a><span>，在 §6.4</span></li>
        <li><a href="#background-fetch-records">记录</a><span>，在 §3.2</span></li>
        <li><a href="#dom-backgroundfetchregistration-recordsavailable">recordsAvailable</a><span>，在 §6.4</span></li>
        <li>可用记录标志
            <ul>
                <li><a href="#backgroundfetchregistration-records-available-flag">BackgroundFetchRegistration
                        的定义</a><span>，在 §6.4</span></li>
                <li><a href="#background-fetch-records-available-flag">后台获取的定义</a><span>，在 §3.2</span></li>
            </ul>
        <li>注册
            <ul>
                <li><a href="#dom-backgroundfetchevent-registration">BackgroundFetchEvent 的属性</a><span>，在 §6.6</span>
                </li>
                <li><a href="#dom-backgroundfetcheventinit-registration">BackgroundFetchEventInit 的字典成员</a><span>，在
                        §6.6</span></li>
            </ul>
        <li>请求
            <ul>
                <li><a href="#dom-backgroundfetchrecord-request">BackgroundFetchRecord 的属性</a><span>，在 §6.5</span></li>
                <li><a href="#backgroundfetchrecord-request">BackgroundFetchRecord 的定义</a><span>，在 §6.5</span></li>
                <li><a href="#background-fetch-record-request">后台获取记录的定义</a><span>，在 §3.3</span></li>
            </ul>
        <li><a href="#background-fetch-response-response">响应</a><span>，在 §3.4</span></li>
        <li><a href="#background-fetch-record-response-data">响应数据</a><span>，在 §3.3</span></li>
        <li><a href="#backgroundfetchrecord-response-promise">响应承诺</a><span>，在 §6.5</span></li>
        <li><a href="#dom-backgroundfetchrecord-responseready">responseReady</a><span>，在 §6.5</span></li>
        <li>结果
            <ul>
                <li><a href="#dom-backgroundfetchregistration-result">BackgroundFetchRegistration 的属性</a><span>，在
                        §6.4</span></li>
                <li><a href="#backgroundfetchregistration-result">BackgroundFetchRegistration 的定义</a><span>，在
                        §6.4</span></li>
                <li><a href="#background-fetch-result">后台获取的定义</a><span>，在 §3.2</span></li>
                <li><a href="#background-fetch-response-result">后台获取响应的定义</a><span>，在 §3.4</span></li>
            </ul>
        <li>service worker 注册
            <ul>
                <li><a href="#backgroundfetchmanager-service-worker-registration">BackgroundFetchManager 的定义</a><span>，在
                        §6.3</span></li>
                <li><a href="#background-fetch-service-worker-registration">后台获取的定义</a><span>，在 §3.2</span></li>
            </ul>
        <li><a href="#single-byte-content-range">单字节内容范围</a><span>，在 §5</span></li>
        <li><a href="#background-fetch-stored-body-bytes-total">存储的主体字节总数</a><span>，在 §3.2</span></li>
        <li><a href="#dom-backgroundfetchresult-success">"success"</a><span>，在 §6.4</span></li>
        <li><a href="#temporarily-unavailable">暂时不可用</a><span>，在 §3</span></li>
        <li>标题
            <ul>
                <li><a href="#background-fetch-title">后台获取的定义</a><span>，在 §3.2</span></li>
                <li><a href="#dom-backgroundfetchuioptions-title">BackgroundFetchUIOptions 的字典成员</a><span>，在 §6.3</span>
                </li>
            </ul>
        <li><a href="#backgroundfetchupdateuievent-ui-updated-flag">UI 已更新标志</a><span>，在 §6.7</span></li>
        <li><a href="#update-background-fetch-instances">更新后台获取实例</a><span>，在 §4.3</span></li>
        <li><a href="#background-fetch-update-handling-queue">更新处理队列</a><span>，在 §3.2</span></li>
        <li><a href="#dom-backgroundfetchupdateuievent-updateui">updateUI()</a><span>，在 §6.7.1</span></li>
        <li><a href="#dom-backgroundfetchupdateuievent-updateui">updateUI(options)</a><span>，在 §6.7.1</span></li>
        <li>上传
            <ul>
                <li><a href="#dom-backgroundfetchregistration-uploaded">BackgroundFetchRegistration 的属性</a><span>，在
                        §6.4</span></li>
                <li><a href="#backgroundfetchregistration-uploaded">BackgroundFetchRegistration 的定义</a><span>，在
                        §6.4</span></li>
                <li><a href="#background-fetch-uploaded">后台获取的定义</a><span>，在 §3.2</span></li>
            </ul>
        <li>上传总量
            <ul>
                <li><a href="#backgroundfetchregistration-upload-total">BackgroundFetchRegistration 的定义</a><span>，在
                        §6.4</span></li>
                <li><a href="#background-fetch-upload-total">后台获取的定义</a><span>，在 §3.2</span></li>
            </ul>
        <li><a href="#dom-backgroundfetchregistration-uploadtotal">uploadTotal</a><span>，在 §6.4</span></li>
        <li><a href="#validate-a-partial-response">验证部分响应</a><span>，在 §4.6</span></li>
    </ul>
    <aside class="dfn-panel" data-for="term-for-event">
        <a href="https://dom.spec.whatwg.org/#event">https://dom.spec.whatwg.org/#event</a><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-event">6.4.1. Events</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-eventtarget">
        <a href="https://dom.spec.whatwg.org/#eventtarget">https://dom.spec.whatwg.org/#eventtarget</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-eventtarget">6.4. BackgroundFetchRegistration</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-event-fire">
        <a href="https://dom.spec.whatwg.org/#concept-event-fire">https://dom.spec.whatwg.org/#concept-event-fire</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-event-fire">4.3. Update background fetch instances</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-event-istrusted">
        <a
            href="https://dom.spec.whatwg.org/#dom-event-istrusted">https://dom.spec.whatwg.org/#dom-event-istrusted</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-event-istrusted">6.7.1. updateUI()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-document-url">
        <a
            href="https://dom.spec.whatwg.org/#concept-document-url">https://dom.spec.whatwg.org/#concept-document-url</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-document-url">7.1. Click</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-realm">
        <a href="https://tc39.github.io/ecma262/#realm">https://tc39.github.io/ecma262/#realm</a><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-realm">4.5. Get a BackgroundFetchRegistration instance</a>
            <li><a href="#ref-for-realm①">4.8. Create record objects</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-headers">
        <a href="https://fetch.spec.whatwg.org/#headers">https://fetch.spec.whatwg.org/#headers</a><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-headers">4.8. Create record objects</a> <a href="#ref-for-headers①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-request">
        <a href="https://fetch.spec.whatwg.org/#request">https://fetch.spec.whatwg.org/#request</a><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-request">4.8. Create record objects</a> <a href="#ref-for-request①">(2)</a>
            <li><a href="#ref-for-request②">6.3.1. fetch()</a>
            <li><a href="#ref-for-request③">6.5. BackgroundFetchRecord</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-requestinfo">
        <a href="https://fetch.spec.whatwg.org/#requestinfo">https://fetch.spec.whatwg.org/#requestinfo</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-requestinfo">6.3. BackgroundFetchManager</a> <a href="#ref-for-requestinfo①">(2)</a>
            <li><a href="#ref-for-requestinfo②">6.3.1. fetch()</a>
            <li><a href="#ref-for-requestinfo③">6.4. BackgroundFetchRegistration</a> <a
                    href="#ref-for-requestinfo④">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-response">
        <a href="https://fetch.spec.whatwg.org/#response">https://fetch.spec.whatwg.org/#response</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-response">4.8. Create record objects</a> <a href="#ref-for-response①">(2)</a>
            <li><a href="#ref-for-response②">6.5. BackgroundFetchRecord</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-aborted-network-error">
        <a
            href="https://fetch.spec.whatwg.org/#concept-aborted-network-error">https://fetch.spec.whatwg.org/#concept-aborted-network-error</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-aborted-network-error">4.2. Complete a record</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-request-add-range-header">
        <a
            href="https://fetch.spec.whatwg.org/#concept-request-add-range-header">https://fetch.spec.whatwg.org/#concept-request-add-range-header</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-request-add-range-header">4.2. Complete a record</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-response-body">
        <a
            href="https://fetch.spec.whatwg.org/#concept-response-body">https://fetch.spec.whatwg.org/#concept-response-body</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-response-body">4.2. Complete a record</a> <a
                    href="#ref-for-concept-response-body①">(2)</a>
            <li><a href="#ref-for-concept-response-body②">4.8. Create record objects</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-request-client">
        <a
            href="https://fetch.spec.whatwg.org/#concept-request-client">https://fetch.spec.whatwg.org/#concept-request-client</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-request-client">3.2.1. Display</a>
            <li><a href="#ref-for-concept-request-client①">6.3.1. fetch()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-header-list-combine">
        <a
            href="https://fetch.spec.whatwg.org/#concept-header-list-combine">https://fetch.spec.whatwg.org/#concept-header-list-combine</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-header-list-combine">4.6. Validate a partial response</a> <a
                    href="#ref-for-concept-header-list-combine①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-header-list-contains">
        <a
            href="https://fetch.spec.whatwg.org/#header-list-contains">https://fetch.spec.whatwg.org/#header-list-contains</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-header-list-contains">4.6. Validate a partial response</a>
            <li><a href="#ref-for-header-list-contains①">4.7. Extract content-range values</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-request-credentials-mode">
        <a
            href="https://fetch.spec.whatwg.org/#concept-request-credentials-mode">https://fetch.spec.whatwg.org/#concept-request-credentials-mode</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-request-credentials-mode">3.2.1. Display</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-header-list-delete">
        <a
            href="https://fetch.spec.whatwg.org/#concept-header-list-delete">https://fetch.spec.whatwg.org/#concept-header-list-delete</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-header-list-delete">4.8. Create record objects</a> <a
                    href="#ref-for-concept-header-list-delete①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-request-destination">
        <a
            href="https://fetch.spec.whatwg.org/#concept-request-destination">https://fetch.spec.whatwg.org/#concept-request-destination</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-request-destination">3.2.1. Display</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-fetch">
        <a href="https://fetch.spec.whatwg.org/#concept-fetch">https://fetch.spec.whatwg.org/#concept-fetch</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-fetch">3.2.1. Display</a>
            <li><a href="#ref-for-concept-fetch①">4.2. Complete a record</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-header">
        <a href="https://fetch.spec.whatwg.org/#concept-header">https://fetch.spec.whatwg.org/#concept-header</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-header">4.7. Extract content-range values</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-response-header-list">
        <a
            href="https://fetch.spec.whatwg.org/#concept-response-header-list">https://fetch.spec.whatwg.org/#concept-response-header-list</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-response-header-list">4.6. Validate a partial response</a> <a
                    href="#ref-for-concept-response-header-list①">(2)</a> <a
                    href="#ref-for-concept-response-header-list②">(3)</a>
            <li><a href="#ref-for-concept-response-header-list③">4.7. Extract content-range values</a> <a
                    href="#ref-for-concept-response-header-list④">(2)</a>
            <li><a href="#ref-for-concept-response-header-list⑤">4.8. Create record objects</a> <a
                    href="#ref-for-concept-response-header-list⑥">(2)</a> <a
                    href="#ref-for-concept-response-header-list⑦">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-response-headers">
        <a href="https://fetch.spec.whatwg.org/#response-headers">https://fetch.spec.whatwg.org/#response-headers</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-response-headers">4.8. Create record objects</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-request-method">
        <a
            href="https://fetch.spec.whatwg.org/#concept-request-method">https://fetch.spec.whatwg.org/#concept-request-method</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-request-method">3.2.1. Display</a> <a
                    href="#ref-for-concept-request-method①">(2)</a>
            <li><a href="#ref-for-concept-request-method②">4.2. Complete a record</a> <a
                    href="#ref-for-concept-request-method③">(2)</a> <a href="#ref-for-concept-request-method④">(3)</a>
                <a href="#ref-for-concept-request-method⑤">(4)</a>
            <li><a href="#ref-for-concept-request-method⑥">7.1. Click</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-request-mode">
        <a
            href="https://fetch.spec.whatwg.org/#concept-request-mode">https://fetch.spec.whatwg.org/#concept-request-mode</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-request-mode">3.2.1. Display</a>
            <li><a href="#ref-for-concept-request-mode①">6.3.1. fetch()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-header-name">
        <a
            href="https://fetch.spec.whatwg.org/#concept-header-name">https://fetch.spec.whatwg.org/#concept-header-name</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-header-name">4.7. Extract content-range values</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-network-error">
        <a
            href="https://fetch.spec.whatwg.org/#concept-network-error">https://fetch.spec.whatwg.org/#concept-network-error</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-network-error">4.2. Complete a record</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-ok-status">
        <a href="https://fetch.spec.whatwg.org/#ok-status">https://fetch.spec.whatwg.org/#ok-status</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-ok-status">4.2. Complete a record</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-request-request">
        <a
            href="https://fetch.spec.whatwg.org/#concept-request-request">https://fetch.spec.whatwg.org/#concept-request-request</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-request-request">4.8. Create record objects</a> <a
                    href="#ref-for-concept-request-request①">(2)</a>
            <li><a href="#ref-for-concept-request-request②">6.3.1. fetch()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-response-response">
        <a
            href="https://fetch.spec.whatwg.org/#concept-response-response">https://fetch.spec.whatwg.org/#concept-response-response</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-response-response">4.8. Create record objects</a> <a
                    href="#ref-for-concept-response-response①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-request-service-workers-mode">
        <a
            href="https://fetch.spec.whatwg.org/#request-service-workers-mode">https://fetch.spec.whatwg.org/#request-service-workers-mode</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-request-service-workers-mode">3.2.1. Display</a>
            <li><a href="#ref-for-request-service-workers-mode①">4.2. Complete a record</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-response-status">
        <a
            href="https://fetch.spec.whatwg.org/#concept-response-status">https://fetch.spec.whatwg.org/#concept-response-status</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-response-status">4.2. Complete a record</a> <a
                    href="#ref-for-concept-response-status①">(2)</a> <a href="#ref-for-concept-response-status②">(3)</a>
                <a href="#ref-for-concept-response-status③">(4)</a>
            <li><a href="#ref-for-concept-response-status④">4.6. Validate a partial response</a> <a
                    href="#ref-for-concept-response-status⑤">(2)</a>
            <li><a href="#ref-for-concept-response-status⑥">7.1. Click</a> <a
                    href="#ref-for-concept-response-status⑦">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-body-stream">
        <a
            href="https://fetch.spec.whatwg.org/#concept-body-stream">https://fetch.spec.whatwg.org/#concept-body-stream</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-body-stream">4.2. Complete a record</a>
            <li><a href="#ref-for-concept-body-stream①">4.8. Create record objects</a>
            <li><a href="#ref-for-concept-body-stream②">6.3.1. fetch()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-fetch-terminate">
        <a
            href="https://fetch.spec.whatwg.org/#concept-fetch-terminate">https://fetch.spec.whatwg.org/#concept-fetch-terminate</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-fetch-terminate">4.2. Complete a record</a> <a
                    href="#ref-for-concept-fetch-terminate①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-request-url">
        <a
            href="https://fetch.spec.whatwg.org/#concept-request-url">https://fetch.spec.whatwg.org/#concept-request-url</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-request-url">3.2.1. Display</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-header-value">
        <a
            href="https://fetch.spec.whatwg.org/#concept-header-value">https://fetch.spec.whatwg.org/#concept-header-value</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-header-value">4.7. Extract content-range values</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-eventhandler">
        <a
            href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-eventhandler">6.1. Extensions to ServiceWorkerGlobalScope</a> <a
                    href="#ref-for-eventhandler①">(2)</a> <a href="#ref-for-eventhandler②">(3)</a> <a
                    href="#ref-for-eventhandler③">(4)</a>
            <li><a href="#ref-for-eventhandler④">6.4. BackgroundFetchRegistration</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-active-document">
        <a
            href="https://html.spec.whatwg.org/multipage/browsers.html#active-document">https://html.spec.whatwg.org/multipage/browsers.html#active-document</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-active-document">7.1. Click</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-enqueue-the-following-steps">
        <a
            href="https://html.spec.whatwg.org/multipage/infrastructure.html#enqueue-the-following-steps">https://html.spec.whatwg.org/multipage/infrastructure.html#enqueue-the-following-steps</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-enqueue-the-following-steps">4.1. Perform a background fetch</a>
            <li><a href="#ref-for-enqueue-the-following-steps①">4.3. Update background fetch instances</a>
            <li><a href="#ref-for-enqueue-the-following-steps②">6.3.1. fetch()</a>
            <li><a href="#ref-for-enqueue-the-following-steps③">6.3.2. get()</a>
            <li><a href="#ref-for-enqueue-the-following-steps④">6.4.2. abort()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-environment-settings-object">
        <a
            href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object">https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-environment-settings-object">3.2.1. Display</a>
            <li><a href="#ref-for-environment-settings-object①">4.3. Update background fetch instances</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-event-handlers">
        <a
            href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers">https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-event-handlers">6.1.1. Events</a> <a href="#ref-for-event-handlers①">(2)</a>
            <li><a href="#ref-for-event-handlers②">6.4.1. Events</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-event-handler-event-type">
        <a
            href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type">https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-event-handler-event-type">6.1.1. Events</a> <a
                    href="#ref-for-event-handler-event-type①">(2)</a>
            <li><a href="#ref-for-event-handler-event-type②">6.4.1. Events</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-event-handler-idl-attributes">
        <a
            href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes">https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-event-handler-idl-attributes">6.1.1. Events</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-agent-event-loop">
        <a
            href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-agent-event-loop">https://html.spec.whatwg.org/multipage/webappapis.html#concept-agent-event-loop</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-agent-event-loop">3. Infrastructure</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-in-parallel">
        <a
            href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-in-parallel">4.1. Perform a background fetch</a> <a
                    href="#ref-for-in-parallel①">(2)</a>
            <li><a href="#ref-for-in-parallel②">4.8. Create record objects</a> <a href="#ref-for-in-parallel③">(2)</a>
            <li><a href="#ref-for-in-parallel④">6.3.1. fetch()</a> <a href="#ref-for-in-parallel⑤">(2)</a> <a
                    href="#ref-for-in-parallel⑥">(3)</a>
            <li><a href="#ref-for-in-parallel⑦">6.3.2. get()</a>
            <li><a href="#ref-for-in-parallel⑧">6.3.3. getIds()</a>
            <li><a href="#ref-for-in-parallel⑨">6.4.2. abort()</a>
            <li><a href="#ref-for-in-parallel①⓪">6.4.4. matchAll()</a>
            <li><a href="#ref-for-in-parallel①①">6.7.1. updateUI()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-networking-task-source">
        <a
            href="https://html.spec.whatwg.org/multipage/webappapis.html#networking-task-source">https://html.spec.whatwg.org/multipage/webappapis.html#networking-task-source</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-networking-task-source">4.8. Create record objects</a> <a
                    href="#ref-for-networking-task-source①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-settings-object-origin">
        <a
            href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin">https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-settings-object-origin">4.3. Update background fetch instances</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-parallel-queue">
        <a
            href="https://html.spec.whatwg.org/multipage/infrastructure.html#parallel-queue">https://html.spec.whatwg.org/multipage/infrastructure.html#parallel-queue</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-parallel-queue">3.1. Extensions to service worker registration</a>
            <li><a href="#ref-for-parallel-queue①">3.2. Background fetch</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-queue-a-task">
        <a
            href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-queue-a-task">3. Infrastructure</a>
            <li><a href="#ref-for-queue-a-task①">4.8. Create record objects</a> <a href="#ref-for-queue-a-task②">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-relevant-realm">
        <a
            href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm">https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-relevant-realm">2. Realms</a>
            <li><a href="#ref-for-concept-relevant-realm①">4.1. Perform a background fetch</a>
            <li><a href="#ref-for-concept-relevant-realm②">4.3. Update background fetch instances</a>
            <li><a href="#ref-for-concept-relevant-realm③">4.4. Fire a background fetch click event</a>
            <li><a href="#ref-for-concept-relevant-realm④">6.3.1. fetch()</a>
            <li><a href="#ref-for-concept-relevant-realm⑤">6.3.2. get()</a>
            <li><a href="#ref-for-concept-relevant-realm⑥">6.4.4. matchAll()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-relevant-settings-object">
        <a
            href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object">https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-relevant-settings-object">3. Infrastructure</a>
            <li><a href="#ref-for-relevant-settings-object①">4.8. Create record objects</a> <a
                    href="#ref-for-relevant-settings-object②">(2)</a>
            <li><a href="#ref-for-relevant-settings-object③">6.3.1. fetch()</a> <a
                    href="#ref-for-relevant-settings-object④">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-responsible-event-loop">
        <a
            href="https://html.spec.whatwg.org/multipage/webappapis.html#responsible-event-loop">https://html.spec.whatwg.org/multipage/webappapis.html#responsible-event-loop</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-responsible-event-loop">3. Infrastructure</a>
            <li><a href="#ref-for-responsible-event-loop①">4.3. Update background fetch instances</a>
            <li><a href="#ref-for-responsible-event-loop②">4.8. Create record objects</a> <a
                    href="#ref-for-responsible-event-loop③">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-starting-a-new-parallel-queue">
        <a
            href="https://html.spec.whatwg.org/multipage/infrastructure.html#starting-a-new-parallel-queue">https://html.spec.whatwg.org/multipage/infrastructure.html#starting-a-new-parallel-queue</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-starting-a-new-parallel-queue">3.1. Extensions to service worker registration</a>
            <li><a href="#ref-for-starting-a-new-parallel-queue①">3.2. Background fetch</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-task-source">
        <a
            href="https://html.spec.whatwg.org/multipage/webappapis.html#task-source">https://html.spec.whatwg.org/multipage/webappapis.html#task-source</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-task-source">3. Infrastructure</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-imageresource">
        <a
            href="https://w3c.github.io/image-resource/#dom-imageresource">https://w3c.github.io/image-resource/#dom-imageresource</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-imageresource">3.2. Background fetch</a>
            <li><a href="#ref-for-dom-imageresource①">6.3. BackgroundFetchManager</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-image-resource">
        <a
            href="https://w3c.github.io/image-resource/#image-resource">https://w3c.github.io/image-resource/#image-resource</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-image-resource">3.2.1. Display</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-processing-an-imageresource-from-an-api">
        <a
            href="https://w3c.github.io/image-resource/#processing-an-imageresource-from-an-api">https://w3c.github.io/image-resource/#processing-an-imageresource-from-an-api</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-processing-an-imageresource-from-an-api">3.2.1. Display</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dfn-src">
        <a href="https://w3c.github.io/image-resource/#dfn-src">https://w3c.github.io/image-resource/#dfn-src</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dfn-src">3.2.1. Display</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-abort-when">
        <a href="https://infra.spec.whatwg.org/#abort-when">https://infra.spec.whatwg.org/#abort-when</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-abort-when">4.2. Complete a record</a>
            <li><a href="#ref-for-abort-when①">6.3.1. fetch()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-list-append">
        <a href="https://infra.spec.whatwg.org/#list-append">https://infra.spec.whatwg.org/#list-append</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-list-append">4.8. Create record objects</a>
            <li><a href="#ref-for-list-append①">6.3.1. fetch()</a>
            <li><a href="#ref-for-list-append②">6.4.4. matchAll()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-byte-sequence">
        <a href="https://infra.spec.whatwg.org/#byte-sequence">https://infra.spec.whatwg.org/#byte-sequence</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-byte-sequence">3.4. Background fetch response</a> <a
                    href="#ref-for-byte-sequence①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-byte-case-insensitive">
        <a
            href="https://infra.spec.whatwg.org/#byte-case-insensitive">https://infra.spec.whatwg.org/#byte-case-insensitive</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-byte-case-insensitive">4.7. Extract content-range values</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-iteration-continue">
        <a
            href="https://infra.spec.whatwg.org/#iteration-continue">https://infra.spec.whatwg.org/#iteration-continue</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-iteration-continue">6.3.1. fetch()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-list-empty">
        <a href="https://infra.spec.whatwg.org/#list-empty">https://infra.spec.whatwg.org/#list-empty</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-list-empty">6.3.1. fetch()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-map-exists">
        <a href="https://infra.spec.whatwg.org/#map-exists">https://infra.spec.whatwg.org/#map-exists</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-map-exists">4.5. Get a BackgroundFetchRegistration instance</a>
            <li><a href="#ref-for-map-exists①">4.9. Contains background fetch</a>
            <li><a href="#ref-for-map-exists②">6.3.1. fetch()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-list-iterate">
        <a href="https://infra.spec.whatwg.org/#list-iterate">https://infra.spec.whatwg.org/#list-iterate</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-list-iterate">3.2. Background fetch</a>
            <li><a href="#ref-for-list-iterate①">4.1. Perform a background fetch</a>
            <li><a href="#ref-for-list-iterate②">4.8. Create record objects</a>
            <li><a href="#ref-for-list-iterate③">6.3.1. fetch()</a> <a href="#ref-for-list-iterate④">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-map-getting-the-keys">
        <a
            href="https://infra.spec.whatwg.org/#map-getting-the-keys">https://infra.spec.whatwg.org/#map-getting-the-keys</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-map-getting-the-keys">6.3.3. getIds()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-if-aborted">
        <a href="https://infra.spec.whatwg.org/#if-aborted">https://infra.spec.whatwg.org/#if-aborted</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-if-aborted">4.2. Complete a record</a>
            <li><a href="#ref-for-if-aborted①">6.3.1. fetch()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-byte-sequence-length">
        <a
            href="https://infra.spec.whatwg.org/#byte-sequence-length">https://infra.spec.whatwg.org/#byte-sequence-length</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-byte-sequence-length">3.2. Background fetch</a>
            <li><a href="#ref-for-byte-sequence-length①">4.2. Complete a record</a> <a
                    href="#ref-for-byte-sequence-length②">(2)</a>
            <li><a href="#ref-for-byte-sequence-length③">4.8. Create record objects</a> <a
                    href="#ref-for-byte-sequence-length④">(2)</a> <a href="#ref-for-byte-sequence-length⑤">(3)</a> <a
                    href="#ref-for-byte-sequence-length⑥">(4)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-list">
        <a href="https://infra.spec.whatwg.org/#list">https://infra.spec.whatwg.org/#list</a><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-list">3.2. Background fetch</a> <a href="#ref-for-list①">(2)</a>
            <li><a href="#ref-for-list②">4.8. Create record objects</a> <a href="#ref-for-list③">(2)</a>
            <li><a href="#ref-for-list④">6.3.1. fetch()</a> <a href="#ref-for-list⑤">(2)</a>
            <li><a href="#ref-for-list⑥">6.4.4. matchAll()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-ordered-map">
        <a href="https://infra.spec.whatwg.org/#ordered-map">https://infra.spec.whatwg.org/#ordered-map</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-ordered-map">3.1. Extensions to service worker registration</a> <a
                    href="#ref-for-ordered-map①">(2)</a>
            <li><a href="#ref-for-ordered-map②">4.9. Contains background fetch</a> <a
                    href="#ref-for-ordered-map③">(2)</a>
            <li><a href="#ref-for-ordered-map④">6.3. BackgroundFetchManager</a> <a href="#ref-for-ordered-map⑤">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-list-size">
        <a href="https://infra.spec.whatwg.org/#list-size">https://infra.spec.whatwg.org/#list-size</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-list-size">4.1. Perform a background fetch</a>
            <li><a href="#ref-for-list-size①">6.3.1. fetch()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dictdef-permissiondescriptor">
        <a
            href="https://w3c.github.io/permissions/#dictdef-permissiondescriptor">https://w3c.github.io/permissions/#dictdef-permissiondescriptor</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dictdef-permissiondescriptor">3.2.1. Display</a>
            <li><a href="#ref-for-dictdef-permissiondescriptor①">6.3.1. fetch()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-permissiondescriptor-name">
        <a
            href="https://w3c.github.io/permissions/#dom-permissiondescriptor-name">https://w3c.github.io/permissions/#dom-permissiondescriptor-name</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-permissiondescriptor-name">3.2.1. Display</a>
            <li><a href="#ref-for-dom-permissiondescriptor-name①">6.3.1. fetch()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-new-information-about-the-users-intent">
        <a
            href="https://w3c.github.io/permissions/#new-information-about-the-users-intent">https://w3c.github.io/permissions/#new-information-about-the-users-intent</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-new-information-about-the-users-intent">3.2.1. Display</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-permission-state">
        <a
            href="https://w3c.github.io/permissions/#permission-state">https://w3c.github.io/permissions/#permission-state</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-permission-state">3.2.1. Display</a>
            <li><a href="#ref-for-permission-state①">6.3.1. fetch()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dictdef-cachequeryoptions">
        <a
            href="https://w3c.github.io/ServiceWorker/#dictdef-cachequeryoptions">https://w3c.github.io/ServiceWorker/#dictdef-cachequeryoptions</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dictdef-cachequeryoptions">6.4. BackgroundFetchRegistration</a> <a
                    href="#ref-for-dictdef-cachequeryoptions①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-extendableevent">
        <a
            href="https://w3c.github.io/ServiceWorker/#extendableevent">https://w3c.github.io/ServiceWorker/#extendableevent</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-extendableevent">6.6. BackgroundFetchEvent</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dictdef-extendableeventinit">
        <a
            href="https://w3c.github.io/ServiceWorker/#dictdef-extendableeventinit">https://w3c.github.io/ServiceWorker/#dictdef-extendableeventinit</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dictdef-extendableeventinit">6.6. BackgroundFetchEvent</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-serviceworker">
        <a
            href="https://w3c.github.io/ServiceWorker/#serviceworker">https://w3c.github.io/ServiceWorker/#serviceworker</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-serviceworker">6.1.1. Events</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-serviceworkerglobalscope">
        <a
            href="https://w3c.github.io/ServiceWorker/#serviceworkerglobalscope">https://w3c.github.io/ServiceWorker/#serviceworkerglobalscope</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-serviceworkerglobalscope">6.1. Extensions to ServiceWorkerGlobalScope</a> <a
                    href="#ref-for-serviceworkerglobalscope①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-serviceworkerregistration">
        <a
            href="https://w3c.github.io/ServiceWorker/#serviceworkerregistration">https://w3c.github.io/ServiceWorker/#serviceworkerregistration</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-serviceworkerregistration">6.2. Extensions to ServiceWorkerRegistration</a> <a
                    href="#ref-for-serviceworkerregistration①">(2)</a> <a
                    href="#ref-for-serviceworkerregistration②">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-extendableevent-active">
        <a
            href="https://w3c.github.io/ServiceWorker/#extendableevent-active">https://w3c.github.io/ServiceWorker/#extendableevent-active</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-extendableevent-active">4.1. Perform a background fetch</a>
            <li><a href="#ref-for-extendableevent-active①">6.7.1. updateUI()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dfn-active-worker">
        <a
            href="https://w3c.github.io/ServiceWorker/#dfn-active-worker">https://w3c.github.io/ServiceWorker/#dfn-active-worker</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dfn-active-worker">6.3.1. fetch()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-fire-functional-event">
        <a
            href="https://w3c.github.io/ServiceWorker/#fire-functional-event">https://w3c.github.io/ServiceWorker/#fire-functional-event</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-fire-functional-event">4.1. Perform a background fetch</a>
            <li><a href="#ref-for-fire-functional-event①">4.4. Fire a background fetch click event</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-match-service-worker-registration">
        <a
            href="https://w3c.github.io/ServiceWorker/#match-service-worker-registration">https://w3c.github.io/ServiceWorker/#match-service-worker-registration</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-match-service-worker-registration">7.1. Click</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-request-matches-cached-item">
        <a
            href="https://w3c.github.io/ServiceWorker/#request-matches-cached-item">https://w3c.github.io/ServiceWorker/#request-matches-cached-item</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-request-matches-cached-item">6.4.4. matchAll()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dfn-scope-url">
        <a
            href="https://w3c.github.io/ServiceWorker/#dfn-scope-url">https://w3c.github.io/ServiceWorker/#dfn-scope-url</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dfn-scope-url">3.2.1. Display</a>
            <li><a href="#ref-for-dfn-scope-url①">4.3. Update background fetch instances</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dfn-service-worker">
        <a
            href="https://w3c.github.io/ServiceWorker/#dfn-service-worker">https://w3c.github.io/ServiceWorker/#dfn-service-worker</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dfn-service-worker">1. Introduction</a> <a href="#ref-for-dfn-service-worker①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dfn-service-worker-registration">
        <a
            href="https://w3c.github.io/ServiceWorker/#dfn-service-worker-registration">https://w3c.github.io/ServiceWorker/#dfn-service-worker-registration</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dfn-service-worker-registration">3.1. Extensions to service worker registration</a>
            <li><a href="#ref-for-dfn-service-worker-registration①">3.2. Background fetch</a>
            <li><a href="#ref-for-dfn-service-worker-registration②">6.2. Extensions to ServiceWorkerRegistration</a>
            <li><a href="#ref-for-dfn-service-worker-registration③">6.3. BackgroundFetchManager</a>
            <li><a href="#ref-for-dfn-service-worker-registration④">8. Privacy and bandwidth usage</a> <a
                    href="#ref-for-dfn-service-worker-registration⑤">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-extendableevent-waituntil">
        <a
            href="https://w3c.github.io/ServiceWorker/#dom-extendableevent-waituntil">https://w3c.github.io/ServiceWorker/#dom-extendableevent-waituntil</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-extendableevent-waituntil">1. Introduction</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-readablestream-cancel">
        <a
            href="https://streams.spec.whatwg.org/#readablestream-cancel">https://streams.spec.whatwg.org/#readablestream-cancel</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-readablestream-cancel">4.2. Complete a record</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-readablestream-close">
        <a
            href="https://streams.spec.whatwg.org/#readablestream-close">https://streams.spec.whatwg.org/#readablestream-close</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-readablestream-close">4.8. Create record objects</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-readablestream-enqueue">
        <a
            href="https://streams.spec.whatwg.org/#readablestream-enqueue">https://streams.spec.whatwg.org/#readablestream-enqueue</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-readablestream-enqueue">4.8. Create record objects</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-readablestream-error">
        <a
            href="https://streams.spec.whatwg.org/#readablestream-error">https://streams.spec.whatwg.org/#readablestream-error</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-readablestream-error">4.8. Create record objects</a> <a
                    href="#ref-for-readablestream-error①">(2)</a>
            <li><a href="#ref-for-readablestream-error②">6.3.1. fetch()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-readablestream-errored">
        <a
            href="https://streams.spec.whatwg.org/#readablestream-errored">https://streams.spec.whatwg.org/#readablestream-errored</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-readablestream-errored">4.2. Complete a record</a>
            <li><a href="#ref-for-readablestream-errored①">6.3.1. fetch()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-readablestream-readable">
        <a
            href="https://streams.spec.whatwg.org/#readablestream-readable">https://streams.spec.whatwg.org/#readablestream-readable</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-readablestream-readable">6.3.1. fetch()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-url-origin">
        <a href="https://url.spec.whatwg.org/#concept-url-origin">https://url.spec.whatwg.org/#concept-url-origin</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-url-origin">3.2.1. Display</a>
            <li><a href="#ref-for-concept-url-origin①">4.3. Update background fetch instances</a>
            <li><a href="#ref-for-concept-url-origin②">8. Privacy and bandwidth usage</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dfn-current-top-level-browsing-context">
        <a
            href="https://w3c.github.io/webdriver/#dfn-current-top-level-browsing-context">https://w3c.github.io/webdriver/#dfn-current-top-level-browsing-context</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dfn-current-top-level-browsing-context">7.1. Click</a> <a
                    href="#ref-for-dfn-current-top-level-browsing-context①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dfn-extension-command">
        <a
            href="https://w3c.github.io/webdriver/#dfn-extension-command">https://w3c.github.io/webdriver/#dfn-extension-command</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dfn-extension-command">7. Automation</a>
            <li><a href="#ref-for-dfn-extension-command①">7.1. Click</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dfn-extension-command-uri-template">
        <a
            href="https://w3c.github.io/webdriver/#dfn-extension-command-uri-template">https://w3c.github.io/webdriver/#dfn-extension-command-uri-template</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dfn-extension-command-uri-template">7.1. Click</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dfn-no-longer-open">
        <a
            href="https://w3c.github.io/webdriver/#dfn-no-longer-open">https://w3c.github.io/webdriver/#dfn-no-longer-open</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dfn-no-longer-open">7.1. Click</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dfn-no-such-window">
        <a
            href="https://w3c.github.io/webdriver/#dfn-no-such-window">https://w3c.github.io/webdriver/#dfn-no-such-window</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dfn-no-such-window">7.1. Click</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dfn-remote-end-steps">
        <a
            href="https://w3c.github.io/webdriver/#dfn-remote-end-steps">https://w3c.github.io/webdriver/#dfn-remote-end-steps</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dfn-remote-end-steps">7.1. Click</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dfn-url-variables">
        <a
            href="https://w3c.github.io/webdriver/#dfn-url-variables">https://w3c.github.io/webdriver/#dfn-url-variables</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dfn-url-variables">7.1. Click</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dfn-errors">
        <a href="https://w3c.github.io/webdriver/#dfn-errors">https://w3c.github.io/webdriver/#dfn-errors</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dfn-errors">7.1. Click</a> <a href="#ref-for-dfn-errors①">(2)</a> <a
                    href="#ref-for-dfn-errors②">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dfn-error-code">
        <a href="https://w3c.github.io/webdriver/#dfn-error-code">https://w3c.github.io/webdriver/#dfn-error-code</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dfn-error-code">7.1. Click</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dfn-success">
        <a href="https://w3c.github.io/webdriver/#dfn-success">https://w3c.github.io/webdriver/#dfn-success</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dfn-success">7.1. Click</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-aborterror">
        <a href="https://heycam.github.io/webidl/#aborterror">https://heycam.github.io/webidl/#aborterror</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-aborterror">4.8. Create record objects</a> <a href="#ref-for-aborterror①">(2)</a>
            <li><a href="#ref-for-aborterror②">6.3.1. fetch()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-idl-ArrayBuffer">
        <a
            href="https://heycam.github.io/webidl/#idl-ArrayBuffer">https://heycam.github.io/webidl/#idl-ArrayBuffer</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-idl-ArrayBuffer">4.8. Create record objects</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-idl-DOMException">
        <a
            href="https://heycam.github.io/webidl/#idl-DOMException">https://heycam.github.io/webidl/#idl-DOMException</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-idl-DOMException">4.8. Create record objects</a> <a
                    href="#ref-for-idl-DOMException①">(2)</a>
            <li><a href="#ref-for-idl-DOMException②">6.3.1. fetch()</a> <a href="#ref-for-idl-DOMException③">(2)</a> <a
                    href="#ref-for-idl-DOMException④">(3)</a>
            <li><a href="#ref-for-idl-DOMException⑤">6.4.4. matchAll()</a>
            <li><a href="#ref-for-idl-DOMException⑥">6.7.1. updateUI()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-idl-DOMString">
        <a href="https://heycam.github.io/webidl/#idl-DOMString">https://heycam.github.io/webidl/#idl-DOMString</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-idl-DOMString">6.3. BackgroundFetchManager</a> <a
                    href="#ref-for-idl-DOMString①">(2)</a> <a href="#ref-for-idl-DOMString②">(3)</a> <a
                    href="#ref-for-idl-DOMString③">(4)</a>
            <li><a href="#ref-for-idl-DOMString④">6.4. BackgroundFetchRegistration</a>
            <li><a href="#ref-for-idl-DOMString⑤">6.6. BackgroundFetchEvent</a>
            <li><a href="#ref-for-idl-DOMString⑥">6.7. BackgroundFetchUpdateUIEvent</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-Exposed">
        <a href="https://heycam.github.io/webidl/#Exposed">https://heycam.github.io/webidl/#Exposed</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-Exposed">6.3. BackgroundFetchManager</a>
            <li><a href="#ref-for-Exposed①">6.4. BackgroundFetchRegistration</a>
            <li><a href="#ref-for-Exposed②">6.5. BackgroundFetchRecord</a>
            <li><a href="#ref-for-Exposed③">6.6. BackgroundFetchEvent</a>
            <li><a href="#ref-for-Exposed④">6.7. BackgroundFetchUpdateUIEvent</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-invalidstateerror">
        <a
            href="https://heycam.github.io/webidl/#invalidstateerror">https://heycam.github.io/webidl/#invalidstateerror</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-invalidstateerror">6.4.4. matchAll()</a>
            <li><a href="#ref-for-invalidstateerror①">6.7.1. updateUI()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-notallowederror">
        <a
            href="https://heycam.github.io/webidl/#notallowederror">https://heycam.github.io/webidl/#notallowederror</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-notallowederror">6.3.1. fetch()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-idl-promise">
        <a href="https://heycam.github.io/webidl/#idl-promise">https://heycam.github.io/webidl/#idl-promise</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-idl-promise">6.3. BackgroundFetchManager</a> <a href="#ref-for-idl-promise①">(2)</a>
                <a href="#ref-for-idl-promise②">(3)</a>
            <li><a href="#ref-for-idl-promise③">6.4. BackgroundFetchRegistration</a> <a
                    href="#ref-for-idl-promise④">(2)</a> <a href="#ref-for-idl-promise⑤">(3)</a>
            <li><a href="#ref-for-idl-promise⑥">6.5. BackgroundFetchRecord</a> <a href="#ref-for-idl-promise⑦">(2)</a>
            <li><a href="#ref-for-idl-promise⑧">6.7. BackgroundFetchUpdateUIEvent</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-quotaexceedederror">
        <a
            href="https://heycam.github.io/webidl/#quotaexceedederror">https://heycam.github.io/webidl/#quotaexceedederror</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-quotaexceedederror">6.3.1. fetch()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-exceptiondef-typeerror">
        <a
            href="https://heycam.github.io/webidl/#exceptiondef-typeerror">https://heycam.github.io/webidl/#exceptiondef-typeerror</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-exceptiondef-typeerror">4.8. Create record objects</a> <a
                    href="#ref-for-exceptiondef-typeerror①">(2)</a>
            <li><a href="#ref-for-exceptiondef-typeerror②">6.3.1. fetch()</a> <a
                    href="#ref-for-exceptiondef-typeerror③">(2)</a> <a href="#ref-for-exceptiondef-typeerror④">(3)</a>
                <a href="#ref-for-exceptiondef-typeerror⑤">(4)</a> <a href="#ref-for-exceptiondef-typeerror⑥">(5)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-idl-Uint8Array">
        <a href="https://heycam.github.io/webidl/#idl-Uint8Array">https://heycam.github.io/webidl/#idl-Uint8Array</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-idl-Uint8Array">4.8. Create record objects</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-a-new-promise">
        <a href="https://heycam.github.io/webidl/#a-new-promise">https://heycam.github.io/webidl/#a-new-promise</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-a-new-promise">4.8. Create record objects</a> <a
                    href="#ref-for-a-new-promise①">(2)</a>
            <li><a href="#ref-for-a-new-promise②">6.3.1. fetch()</a>
            <li><a href="#ref-for-a-new-promise③">6.3.2. get()</a>
            <li><a href="#ref-for-a-new-promise④">6.3.3. getIds()</a>
            <li><a href="#ref-for-a-new-promise⑤">6.4.2. abort()</a>
            <li><a href="#ref-for-a-new-promise⑥">6.4.4. matchAll()</a>
            <li><a href="#ref-for-a-new-promise⑦">6.7.1. updateUI()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-a-promise-rejected-with">
        <a
            href="https://heycam.github.io/webidl/#a-promise-rejected-with">https://heycam.github.io/webidl/#a-promise-rejected-with</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-a-promise-rejected-with">6.3.1. fetch()</a> <a
                    href="#ref-for-a-promise-rejected-with①">(2)</a> <a href="#ref-for-a-promise-rejected-with②">(3)</a>
            <li><a href="#ref-for-a-promise-rejected-with③">6.4.4. matchAll()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-idl-boolean">
        <a href="https://heycam.github.io/webidl/#idl-boolean">https://heycam.github.io/webidl/#idl-boolean</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-idl-boolean">6.4. BackgroundFetchRegistration</a> <a
                    href="#ref-for-idl-boolean①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dfn-perform-steps-once-promise-is-settled">
        <a
            href="https://heycam.github.io/webidl/#dfn-perform-steps-once-promise-is-settled">https://heycam.github.io/webidl/#dfn-perform-steps-once-promise-is-settled</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dfn-perform-steps-once-promise-is-settled">6.4.3. match()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-reject">
        <a href="https://heycam.github.io/webidl/#reject">https://heycam.github.io/webidl/#reject</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-reject">4.8. Create record objects</a> <a href="#ref-for-reject①">(2)</a>
            <li><a href="#ref-for-reject②">6.3.1. fetch()</a> <a href="#ref-for-reject③">(2)</a> <a
                    href="#ref-for-reject④">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-resolve">
        <a href="https://heycam.github.io/webidl/#resolve">https://heycam.github.io/webidl/#resolve</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-resolve">4.8. Create record objects</a> <a href="#ref-for-resolve①">(2)</a>
            <li><a href="#ref-for-resolve②">6.3.1. fetch()</a>
            <li><a href="#ref-for-resolve③">6.3.2. get()</a> <a href="#ref-for-resolve④">(2)</a>
            <li><a href="#ref-for-resolve⑤">6.3.3. getIds()</a>
            <li><a href="#ref-for-resolve⑥">6.4.2. abort()</a> <a href="#ref-for-resolve⑦">(2)</a>
            <li><a href="#ref-for-resolve⑧">6.4.4. matchAll()</a>
            <li><a href="#ref-for-resolve⑨">6.7.1. updateUI()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-idl-sequence">
        <a href="https://heycam.github.io/webidl/#idl-sequence">https://heycam.github.io/webidl/#idl-sequence</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-idl-sequence">6.3. BackgroundFetchManager</a> <a href="#ref-for-idl-sequence①">(2)</a>
                <a href="#ref-for-idl-sequence②">(3)</a>
            <li><a href="#ref-for-idl-sequence③">6.4. BackgroundFetchRegistration</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-idl-undefined">
        <a href="https://heycam.github.io/webidl/#idl-undefined">https://heycam.github.io/webidl/#idl-undefined</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-idl-undefined">6.7. BackgroundFetchUpdateUIEvent</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-idl-unsigned-long-long">
        <a
            href="https://heycam.github.io/webidl/#idl-unsigned-long-long">https://heycam.github.io/webidl/#idl-unsigned-long-long</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-idl-unsigned-long-long">6.3. BackgroundFetchManager</a>
            <li><a href="#ref-for-idl-unsigned-long-long①">6.4. BackgroundFetchRegistration</a> <a
                    href="#ref-for-idl-unsigned-long-long②">(2)</a> <a href="#ref-for-idl-unsigned-long-long③">(3)</a>
                <a href="#ref-for-idl-unsigned-long-long④">(4)</a>
        </ul>
    </aside>
    <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">引用定义的术语</span><a
            class="self-link" href="#index-defined-elsewhere"></a></h3>
    <ul class="index">
        <li>
            <a data-link-type="biblio">[DOM]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-event">事件</span>
                <li><span class="dfn-paneled" id="term-for-eventtarget">事件目标</span>
                <li><span class="dfn-paneled" id="term-for-concept-event-fire">触发事件</span>
                <li><span class="dfn-paneled" id="term-for-dom-event-istrusted">isTrusted</span>
                <li><span class="dfn-paneled" id="term-for-concept-document-url">url</span>
            </ul>
        <li>
            <a data-link-type="biblio">[ECMASCRIPT]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-realm">领域</span>
            </ul>
        <li>
            <a data-link-type="biblio">[FETCH]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-headers">标头</span>
                <li><span class="dfn-paneled" id="term-for-request">请求</span>
                <li><span class="dfn-paneled" id="term-for-requestinfo">请求信息</span>
                <li><span class="dfn-paneled" id="term-for-response">响应</span>
                <li><span class="dfn-paneled" id="term-for-concept-aborted-network-error">中止的网络错误</span>
                <li><span class="dfn-paneled" id="term-for-concept-request-add-range-header">添加范围标头</span>
                <li><span class="dfn-paneled" id="term-for-concept-response-body">主体 <small>（用于响应）</small></span>
                <li><span class="dfn-paneled" id="term-for-concept-request-client">客户端</span>
                <li><span class="dfn-paneled" id="term-for-concept-header-list-combine">合并</span>
                <li><span class="dfn-paneled" id="term-for-header-list-contains">包含</span>
                <li><span class="dfn-paneled" id="term-for-concept-request-credentials-mode">凭证模式</span>
                <li><span class="dfn-paneled" id="term-for-concept-header-list-delete">删除</span>
                <li><span class="dfn-paneled" id="term-for-concept-request-destination">目标</span>
                <li><span class="dfn-paneled" id="term-for-concept-fetch">获取</span>
                <li><span class="dfn-paneled" id="term-for-concept-header">标头</span>
                <li><span class="dfn-paneled" id="term-for-concept-response-header-list">标头列表
                        <small>（用于响应）</small></span>
                <li><span class="dfn-paneled" id="term-for-response-headers">标头 <small>（用于响应）</small></span>
                <li><span class="dfn-paneled" id="term-for-concept-request-method">方法</span>
                <li><span class="dfn-paneled" id="term-for-concept-request-mode">模式</span>
                <li><span class="dfn-paneled" id="term-for-concept-header-name">名称</span>
                <li><span class="dfn-paneled" id="term-for-concept-network-error">网络错误</span>
                <li><span class="dfn-paneled" id="term-for-ok-status">ok 状态</span>
                <li><span class="dfn-paneled" id="term-for-concept-request-request">请求 <small>（用于
                            Request）</small></span>
                <li><span class="dfn-paneled" id="term-for-concept-response-response">响应 <small>（用于响应）</small></span>
                <li><span class="dfn-paneled" id="term-for-request-service-workers-mode">service-workers 模式</span>
                <li><span class="dfn-paneled" id="term-for-concept-response-status">状态</span>
                <li><span class="dfn-paneled" id="term-for-concept-body-stream">流</span>
                <li><span class="dfn-paneled" id="term-for-concept-fetch-terminate">已终止</span>
                <li><span class="dfn-paneled" id="term-for-concept-request-url">url</span>
                <li><span class="dfn-paneled" id="term-for-concept-header-value">值</span>
            </ul>
        <li>
            <a data-link-type="biblio">[HTML]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-eventhandler">事件处理程序</span>
                <li><span class="dfn-paneled" id="term-for-active-document">活动文档</span>
                <li><span class="dfn-paneled" id="term-for-enqueue-the-following-steps">排队以下步骤</span>
                <li><span class="dfn-paneled" id="term-for-environment-settings-object">环境设置对象</span>
                <li><span class="dfn-paneled" id="term-for-event-handlers">事件处理程序</span>
                <li><span class="dfn-paneled" id="term-for-event-handler-event-type">事件处理程序事件类型</span>
                <li><span class="dfn-paneled" id="term-for-event-handler-idl-attributes">事件处理程序 idl 属性</span>
                <li><span class="dfn-paneled" id="term-for-concept-agent-event-loop">事件循环</span>
                <li><span class="dfn-paneled" id="term-for-in-parallel">并行</span>
                <li><span class="dfn-paneled" id="term-for-networking-task-source">网络任务源</span>
                <li><span class="dfn-paneled" id="term-for-concept-settings-object-origin">来源</span>
                <li><span class="dfn-paneled" id="term-for-parallel-queue">并行队列</span>
                <li><span class="dfn-paneled" id="term-for-queue-a-task">排队任务</span>
                <li><span class="dfn-paneled" id="term-for-concept-relevant-realm">相关领域</span>
                <li><span class="dfn-paneled" id="term-for-relevant-settings-object">相关设置对象</span>
                <li><span class="dfn-paneled" id="term-for-responsible-event-loop">负责的事件循环</span>
                <li><span class="dfn-paneled" id="term-for-starting-a-new-parallel-queue">启动一个新的并行队列</span>
                <li><span class="dfn-paneled" id="term-for-task-source">任务源</span>
            </ul>
        <li>
            <a data-link-type="biblio">[image-resource]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-dom-imageresource">ImageResource</span>
                <li><span class="dfn-paneled" id="term-for-image-resource">图像资源</span>
                <li><span class="dfn-paneled" id="term-for-processing-an-imageresource-from-an-api">处理</span>
                <li><span class="dfn-paneled" id="term-for-dfn-src">src</span>
            </ul>
        <li>
            <a data-link-type="biblio">[INFRA]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-abort-when">中止时</span>
                <li><span class="dfn-paneled" id="term-for-list-append">追加</span>
                <li><span class="dfn-paneled" id="term-for-byte-sequence">字节序列</span>
                <li><span class="dfn-paneled" id="term-for-byte-case-insensitive">字节不区分大小写</span>
                <li><span class="dfn-paneled" id="term-for-iteration-continue">继续</span>
                <li><span class="dfn-paneled" id="term-for-list-empty">空</span>
                <li><span class="dfn-paneled" id="term-for-map-exists">存在</span>
                <li><span class="dfn-paneled" id="term-for-list-iterate">遍历</span>
                <li><span class="dfn-paneled" id="term-for-map-getting-the-keys">获取键</span>
                <li><span class="dfn-paneled" id="term-for-if-aborted">如果中止</span>
                <li><span class="dfn-paneled" id="term-for-byte-sequence-length">长度</span>
                <li><span class="dfn-paneled" id="term-for-list">列表</span>
                <li><span class="dfn-paneled" id="term-for-ordered-map">映射</span>
                <li><span class="dfn-paneled" id="term-for-list-size">大小</span>
            </ul>
        <li>
            <a data-link-type="biblio">[permissions]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-dictdef-permissiondescriptor">PermissionDescriptor</span>
                <li><span class="dfn-paneled" id="term-for-dom-permissiondescriptor-name">名称</span>
                <li><span class="dfn-paneled" id="term-for-new-information-about-the-users-intent">有关用户意图的新信息</span>
                <li><span class="dfn-paneled" id="term-for-permission-state">权限状态</span>
            </ul>
        <li>
            <a data-link-type="biblio">[service-workers-1]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-dictdef-cachequeryoptions">CacheQueryOptions</span>
                <li><span class="dfn-paneled" id="term-for-extendableevent">ExtendableEvent</span>
                <li><span class="dfn-paneled" id="term-for-dictdef-extendableeventinit">ExtendableEventInit</span>
                <li><span class="dfn-paneled" id="term-for-serviceworker">ServiceWorker</span>
                <li><span class="dfn-paneled" id="term-for-serviceworkerglobalscope">ServiceWorkerGlobalScope</span>
                <li><span class="dfn-paneled" id="term-for-serviceworkerregistration">ServiceWorkerRegistration</span>
                <li><span class="dfn-paneled" id="term-for-extendableevent-active">激活</span>
                <li><span class="dfn-paneled" id="term-for-dfn-active-worker">活动工作者</span>
                <li><span class="dfn-paneled" id="term-for-fire-functional-event">触发功能事件</span>
                <li><span class="dfn-paneled" id="term-for-match-service-worker-registration">匹配
                        ServiceWorkerRegistration</span>
                <li><span class="dfn-paneled" id="term-for-request-matches-cached-item">请求匹配缓存项</span>
                <li><span class="dfn-paneled" id="term-for-dfn-scope-url">范围 URL</span>
                <li><span class="dfn-paneled" id="term-for-dfn-service-worker">Service Worker</span>
                <li><span class="dfn-paneled" id="term-for-dfn-service-worker-registration">Service Worker 注册</span>
                <li><span class="dfn-paneled" id="term-for-dom-extendableevent-waituntil">waitUntil(f)</span>
            </ul>
        <li>
            <a data-link-type="biblio">[STREAMS]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-readablestream-cancel">取消</span>
                <li><span class="dfn-paneled" id="term-for-readablestream-close">关闭</span>
                <li><span class="dfn-paneled" id="term-for-readablestream-enqueue">入队</span>
                <li><span class="dfn-paneled" id="term-for-readablestream-error">错误</span>
                <li><span class="dfn-paneled" id="term-for-readablestream-errored">已出错</span>
                <li><span class="dfn-paneled" id="term-for-readablestream-readable">可读</span>
            </ul>
        <li>
            <a data-link-type="biblio">[URL]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-concept-url-origin">来源</span>
            </ul>
        <li>
            <a data-link-type="biblio">[WebDriver]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-dfn-current-top-level-browsing-context">当前顶级浏览上下文</span>
                <li><span class="dfn-paneled" id="term-for-dfn-extension-command">扩展命令</span>
                <li><span class="dfn-paneled" id="term-for-dfn-extension-command-uri-template">扩展命令 URI 模板</span>
                <li><span class="dfn-paneled" id="term-for-dfn-no-longer-open">不再打开</span>
                <li><span class="dfn-paneled" id="term-for-dfn-no-such-window">无此窗口</span>
                <li><span class="dfn-paneled" id="term-for-dfn-remote-end-steps">远端步骤</span>
                <li><span class="dfn-paneled" id="term-for-dfn-url-variables">URL 变量</span>
                <li><span class="dfn-paneled" id="term-for-dfn-errors">WebDriver 错误</span>
                <li><span class="dfn-paneled" id="term-for-dfn-error-code">WebDriver 错误代码</span>
                <li><span class="dfn-paneled" id="term-for-dfn-success">WebDriver 成功</span>
            </ul>
        <li>
            <a data-link-type="biblio">[WebIDL]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-aborterror">AbortError</span>
                <li><span class="dfn-paneled" id="term-for-idl-ArrayBuffer">ArrayBuffer</span>
                <li><span class="dfn-paneled" id="term-for-idl-DOMException">DOMException</span>
                <li><span class="dfn-paneled" id="term-for-idl-DOMString">DOMString</span>
                <li><span class="dfn-paneled" id="term-for-Exposed">Exposed</span>
                <li><span class="dfn-paneled" id="term-for-invalidstateerror">InvalidStateError</span>
                <li><span class="dfn-paneled" id="term-for-notallowederror">NotAllowedError</span>
                <li><span class="dfn-paneled" id="term-for-idl-promise">Promise</span>
                <li><span class="dfn-paneled" id="term-for-quotaexceedederror">QuotaExceededError</span>
                <li><span class="dfn-paneled" id="term-for-exceptiondef-typeerror">TypeError</span>
                <li><span class="dfn-paneled" id="term-for-idl-Uint8Array">Uint8Array</span>
                <li><span class="dfn-paneled" id="term-for-a-new-promise">新 Promise</span>
                <li><span class="dfn-paneled" id="term-for-a-promise-rejected-with">被拒绝的 Promise</span>
                <li><span class="dfn-paneled" id="term-for-idl-boolean">布尔值</span>
                <li><span class="dfn-paneled" id="term-for-dfn-perform-steps-once-promise-is-settled">响应</span>
                <li><span class="dfn-paneled" id="term-for-reject">拒绝</span>
                <li><span class="dfn-paneled" id="term-for-resolve">解决</span>
                <li><span class="dfn-paneled" id="term-for-idl-sequence">序列</span>
                <li><span class="dfn-paneled" id="term-for-idl-undefined">undefined</span>
                <li><span class="dfn-paneled" id="term-for-idl-unsigned-long-long">unsigned long long</span>
            </ul>
    </ul>
    <h2 class="no-num no-ref heading settled" id="references"><span class="content">参考文献</span><a class="self-link"
            href="#references"></a></h2>
    <h3 class="no-num no-ref heading settled" id="normative"><span class="content">规范性引用</span><a class="self-link"
            href="#normative"></a></h3>
    <dl>
        <dt id="biblio-dom">[DOM]
        <dd>Anne van Kesteren. <a href="https://dom.spec.whatwg.org/">DOM 标准</a>. 现行标准. URL: <a
                href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
        <dt id="biblio-ecmascript">[ECMASCRIPT]
        <dd><a href="https://tc39.es/ecma262/">ECMAScript 语言规范</a>. URL: <a
                href="https://tc39.es/ecma262/">https://tc39.es/ecma262/</a>
        <dt id="biblio-fetch">[FETCH]
        <dd>Anne van Kesteren. <a href="https://fetch.spec.whatwg.org/">Fetch 标准</a>. 现行标准. URL: <a
                href="https://fetch.spec.whatwg.org/">https://fetch.spec.whatwg.org/</a>
        <dt id="biblio-html">[HTML]
        <dd>Anne van Kesteren; et al. <a href="https://html.spec.whatwg.org/multipage/">HTML 标准</a>. 现行标准. URL: <a
                href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
        <dt id="biblio-image-resource">[IMAGE-RESOURCE]
        <dd>Aaron Gustafson; Rayan Kanso; Marcos Caceres. <a href="https://www.w3.org/TR/image-resource/">图像资源</a>. 2021
            年 3 月 29 日. WD. URL: <a
                href="https://www.w3.org/TR/image-resource/">https://www.w3.org/TR/image-resource/</a>
        <dt id="biblio-infra">[INFRA]
        <dd>Anne van Kesteren; Domenic Denicola. <a href="https://infra.spec.whatwg.org/">Infra 标准</a>. 现行标准. URL: <a
                href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
        <dt id="biblio-permissions">[PERMISSIONS]
        <dd>Mounir Lamouri; Marcos Caceres; Jeffrey Yasskin. <a href="https://www.w3.org/TR/permissions/">权限</a>. 2020 年
            7 月 20 日. WD. URL: <a href="https://www.w3.org/TR/permissions/">https://www.w3.org/TR/permissions/</a>
        <dt id="biblio-rfc2119">[RFC2119]
        <dd>S. Bradner. <a href="https://tools.ietf.org/html/rfc2119">用于在 RFC 中指示需求级别的关键字</a>. 1997 年 3 月. 最佳当前实践. URL:
            <a href="https://tools.ietf.org/html/rfc2119">https://tools.ietf.org/html/rfc2119</a>
        <dt id="biblio-service-workers-1">[SERVICE-WORKERS-1]
        <dd>Alex Russell; et al. <a href="https://www.w3.org/TR/service-workers-1/">Service Workers 1</a>. 2019 年 11 月
            19 日. CR. URL: <a
                href="https://www.w3.org/TR/service-workers-1/">https://www.w3.org/TR/service-workers-1/</a>
        <dt id="biblio-streams">[STREAMS]
        <dd>Adam Rice; Domenic Denicola; 吉野剛史 (Takeshi Yoshino). <a href="https://streams.spec.whatwg.org/">Streams
                标准</a>. 现行标准. URL: <a href="https://streams.spec.whatwg.org/">https://streams.spec.whatwg.org/</a>
        <dt id="biblio-url">[URL]
        <dd>Anne van Kesteren. <a href="https://url.spec.whatwg.org/">URL 标准</a>. 现行标准. URL: <a
                href="https://url.spec.whatwg.org/">https://url.spec.whatwg.org/</a>
        <dt id="biblio-webdriver">[WebDriver]
        <dd>Simon Stewart; David Burns. <a href="https://www.w3.org/TR/webdriver1/">WebDriver</a>. 2018 年 6 月 5 日. REC.
            URL: <a href="https://www.w3.org/TR/webdriver1/">https://www.w3.org/TR/webdriver1/</a>
        <dt id="biblio-webidl">[WebIDL]
        <dd>Boris Zbarsky. <a href="https://heycam.github.io/webidl/">Web IDL</a>. 2016 年 12 月 15 日. ED. URL: <a
                href="https://heycam.github.io/webidl/">https://heycam.github.io/webidl/</a>
    </dl>
    <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL 索引</span><a class="self-link"
            href="#idl-index"></a></h2>
    <pre class="idl highlight def"><c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://w3c.github.io/ServiceWorker/#serviceworkerglobalscope"><c- g>ServiceWorkerGlobalScope</c-></a> {
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><c- n>EventHandler</c-></a> <a data-type="EventHandler" href="#dom-serviceworkerglobalscope-onbackgroundfetchsuccess"><code><c- g>onbackgroundfetchsuccess</c-></code></a>;
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><c- n>EventHandler</c-></a> <a data-type="EventHandler" href="#dom-serviceworkerglobalscope-onbackgroundfetchfail"><code><c- g>onbackgroundfetchfail</c-></code></a>;
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><c- n>EventHandler</c-></a> <a data-type="EventHandler" href="#dom-serviceworkerglobalscope-onbackgroundfetchabort"><code><c- g>onbackgroundfetchabort</c-></code></a>;
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><c- n>EventHandler</c-></a> <a data-type="EventHandler" href="#dom-serviceworkerglobalscope-onbackgroundfetchclick"><code><c- g>onbackgroundfetchclick</c-></code></a>;
};

<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://w3c.github.io/ServiceWorker/#serviceworkerregistration"><c- g>ServiceWorkerRegistration</c-></a> {
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#backgroundfetchmanager"><c- n>BackgroundFetchManager</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="BackgroundFetchManager" href="#dom-serviceworkerregistration-backgroundfetch"><c- g>backgroundFetch</c-></a>;
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed"><c- g>Exposed</c-></a>=(<c- n>Window</c->,<c- n>Worker</c->)]
<c- b>interface</c-> <a href="#backgroundfetchmanager"><code><c- g>BackgroundFetchManager</c-></code></a> {
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#backgroundfetchregistration"><c- n>BackgroundFetchRegistration</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-backgroundfetchmanager-fetch"><c- g>fetch</c-></a>(<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString"><c- b>DOMString</c-></a> <a href="#dom-backgroundfetchmanager-fetch-id-requests-options-id"><code><c- g>id</c-></code></a>, (<a data-link-type="idl-name" href="https://fetch.spec.whatwg.org/#requestinfo"><c- n>RequestInfo</c-></a> <c- b>or</c-> <a data-link-type="dfn" href="https://heycam.github.io/webidl/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="https://fetch.spec.whatwg.org/#requestinfo"><c- n>RequestInfo</c-></a>>) <a href="#dom-backgroundfetchmanager-fetch-id-requests-options-requests"><code><c- g>requests</c-></code></a>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-backgroundfetchoptions"><c- n>BackgroundFetchOptions</c-></a> <a href="#dom-backgroundfetchmanager-fetch-id-requests-options-options"><code><c- g>options</c-></code></a> = {});
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#backgroundfetchregistration"><c- n>BackgroundFetchRegistration</c-></a>?> <a class="idl-code" data-link-type="method" href="#dom-backgroundfetchmanager-get"><c- g>get</c-></a>(<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString"><c- b>DOMString</c-></a> <a href="#dom-backgroundfetchmanager-get-id-id"><code><c- g>id</c-></code></a>);
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="dfn" href="https://heycam.github.io/webidl/#idl-sequence"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString"><c- b>DOMString</c-></a>>> <a class="idl-code" data-link-type="method" href="#dom-backgroundfetchmanager-getids"><c- g>getIds</c-></a>();
};

<c- b>dictionary</c-> <a href="#dictdef-backgroundfetchuioptions"><code><c- g>BackgroundFetchUIOptions</c-></code></a> {
  <a data-link-type="dfn" href="https://heycam.github.io/webidl/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="https://w3c.github.io/image-resource/#dom-imageresource"><c- n>ImageResource</c-></a>> <a data-type="sequence<ImageResource> " href="#dom-backgroundfetchuioptions-icons"><code><c- g>icons</c-></code></a>;
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString"><c- b>DOMString</c-></a> <a data-type="DOMString " href="#dom-backgroundfetchuioptions-title"><code><c- g>title</c-></code></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-backgroundfetchoptions"><code><c- g>BackgroundFetchOptions</c-></code></a> : <a data-link-type="idl-name" href="#dictdef-backgroundfetchuioptions"><c- n>BackgroundFetchUIOptions</c-></a> {
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-unsigned-long-long"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a> <a data-default="0" data-type="unsigned long long " href="#dom-backgroundfetchoptions-downloadtotal"><code><c- g>downloadTotal</c-></code></a> = 0;
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed"><c- g>Exposed</c-></a>=(<c- n>Window</c->,<c- n>Worker</c->)]
<c- b>interface</c-> <a href="#backgroundfetchregistration"><code><c- g>BackgroundFetchRegistration</c-></code></a> : <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#eventtarget"><c- n>EventTarget</c-></a> {
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString"><c- b>DOMString</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="DOMString" href="#dom-backgroundfetchregistration-id"><c- g>id</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-unsigned-long-long"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="unsigned long long" href="#dom-backgroundfetchregistration-uploadtotal"><c- g>uploadTotal</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-unsigned-long-long"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="unsigned long long" href="#dom-backgroundfetchregistration-uploaded"><c- g>uploaded</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-unsigned-long-long"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="unsigned long long" href="#dom-backgroundfetchregistration-downloadtotal"><c- g>downloadTotal</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-unsigned-long-long"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="unsigned long long" href="#dom-backgroundfetchregistration-downloaded"><c- g>downloaded</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#enumdef-backgroundfetchresult"><c- n>BackgroundFetchResult</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="BackgroundFetchResult" href="#dom-backgroundfetchregistration-result"><c- g>result</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#enumdef-backgroundfetchfailurereason"><c- n>BackgroundFetchFailureReason</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="BackgroundFetchFailureReason" href="#dom-backgroundfetchregistration-failurereason"><c- g>failureReason</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-boolean"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-backgroundfetchregistration-recordsavailable"><c- g>recordsAvailable</c-></a>;

  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><c- n>EventHandler</c-></a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-backgroundfetchregistration-onprogress"><c- g>onprogress</c-></a>;

  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-boolean"><c- b>boolean</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-backgroundfetchregistration-abort"><c- g>abort</c-></a>();
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#backgroundfetchrecord"><c- n>BackgroundFetchRecord</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-backgroundfetchregistration-match"><c- g>match</c-></a>(<a data-link-type="idl-name" href="https://fetch.spec.whatwg.org/#requestinfo"><c- n>RequestInfo</c-></a> <a href="#dom-backgroundfetchregistration-match-request-options-request"><code><c- g>request</c-></code></a>, <c- b>optional</c-> <a data-link-type="idl-name" href="https://w3c.github.io/ServiceWorker/#dictdef-cachequeryoptions"><c- n>CacheQueryOptions</c-></a> <a href="#dom-backgroundfetchregistration-match-request-options-options"><code><c- g>options</c-></code></a> = {});
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="dfn" href="https://heycam.github.io/webidl/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#backgroundfetchrecord"><c- n>BackgroundFetchRecord</c-></a>>> <a class="idl-code" data-link-type="method" href="#dom-backgroundfetchregistration-matchall"><c- g>matchAll</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="https://fetch.spec.whatwg.org/#requestinfo"><c- n>RequestInfo</c-></a> <a href="#dom-backgroundfetchregistration-matchall-request-options-request"><code><c- g>request</c-></code></a>, <c- b>optional</c-> <a data-link-type="idl-name" href="https://w3c.github.io/ServiceWorker/#dictdef-cachequeryoptions"><c- n>CacheQueryOptions</c-></a> <a href="#dom-backgroundfetchregistration-matchall-request-options-options"><code><c- g>options</c-></code></a> = {});
};

<c- b>enum</c-> <a href="#enumdef-backgroundfetchresult"><code><c- g>BackgroundFetchResult</c-></code></a> { <a href="#dom-backgroundfetchresult"><code><c- s>""</c-></code></a>, <a href="#dom-backgroundfetchresult-success"><code><c- s>"success"</c-></code></a>, <a href="#dom-backgroundfetchresult-failure"><code><c- s>"failure"</c-></code></a> };

<c- b>enum</c-> <a href="#enumdef-backgroundfetchfailurereason"><code><c- g>BackgroundFetchFailureReason</c-></code></a> {
  // 后台获取尚未完成，或已成功。
  <a href="#dom-backgroundfetchfailurereason"><code><c- s>""</c-></code></a>,
  // 操作被用户中止，或调用了 abort()。
  <a href="#dom-backgroundfetchfailurereason-aborted"><code><c- s>"aborted"</c-></code></a>,
  // 响应状态不为 "ok"。
  <a href="#dom-backgroundfetchfailurereason-bad-status"><code><c- s>"bad-status"</c-></code></a>,
  // 由于其他原因（如 CORS、MIX、无效的部分响应，
  // 或无法重试的网络故障）导致获取失败。
  <a href="#dom-backgroundfetchfailurereason-fetch-error"><code><c- s>"fetch-error"</c-></code></a>,
  // 操作期间达到了存储配额。
  <a href="#dom-backgroundfetchfailurereason-quota-exceeded"><code><c- s>"quota-exceeded"</c-></code></a>,
  // 提供的 downloadTotal 被超出。
  <a href="#dom-backgroundfetchfailurereason-download-total-exceeded"><code><c- s>"download-total-exceeded"</c-></code></a>
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed"><c- g>Exposed</c-></a>=(<c- n>Window</c->,<c- n>Worker</c->)]
<c- b>interface</c-> <a href="#backgroundfetchrecord"><code><c- g>BackgroundFetchRecord</c-></code></a> {
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://fetch.spec.whatwg.org/#request"><c- n>Request</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="Request" href="#dom-backgroundfetchrecord-request"><c- g>request</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="https://fetch.spec.whatwg.org/#response"><c- n>Response</c-></a>> <a class="idl-code" data-link-type="attribute" data-readonly data-type="Promise<Response>" href="#dom-backgroundfetchrecord-responseready"><c- g>responseReady</c-></a>;
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed"><c- g>Exposed</c-></a>=<c- n>ServiceWorker</c->]
<c- b>interface</c-> <a href="#backgroundfetchevent"><code><c- g>BackgroundFetchEvent</c-></code></a> : <a data-link-type="idl-name" href="https://w3c.github.io/ServiceWorker/#extendableevent"><c- n>ExtendableEvent</c-></a> {
  <a href="#dom-backgroundfetchevent-backgroundfetchevent"><code><c- g>constructor</c-></code></a>(<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString"><c- b>DOMString</c-></a> <a href="#dom-backgroundfetchevent-backgroundfetchevent-type-init-type"><code><c- g>type</c-></code></a>, <a data-link-type="idl-name" href="#dictdef-backgroundfetcheventinit"><c- n>BackgroundFetchEventInit</c-></a> <a href="#dom-backgroundfetchevent-backgroundfetchevent-type-init-init"><code><c- g>init</c-></code></a>);
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#backgroundfetchregistration"><c- n>BackgroundFetchRegistration</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="BackgroundFetchRegistration" href="#dom-backgroundfetchevent-registration"><c- g>registration</c-></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-backgroundfetcheventinit"><code><c- g>BackgroundFetchEventInit</c-></code></a> : <a data-link-type="idl-name" href="https://w3c.github.io/ServiceWorker/#dictdef-extendableeventinit"><c- n>ExtendableEventInit</c-></a> {
  <c- b>required</c-> <a data-link-type="idl-name" href="#backgroundfetchregistration"><c- n>BackgroundFetchRegistration</c-></a> <a data-type="BackgroundFetchRegistration " href="#dom-backgroundfetcheventinit-registration"><code><c- g>registration</c-></code></a>;
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed"><c- g>Exposed</c-></a>=<c- n>ServiceWorker</c->]
<c- b>interface</c-> <a href="#backgroundfetchupdateuievent"><code><c- g>BackgroundFetchUpdateUIEvent</c-></code></a> : <a data-link-type="idl-name" href="#backgroundfetchevent"><c- n>BackgroundFetchEvent</c-></a> {
  <a href="#dom-backgroundfetchupdateuievent-backgroundfetchupdateuievent"><code><c- g>constructor</c-></code></a>(<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString"><c- b>DOMString</c-></a> <a href="#dom-backgroundfetchupdateuievent-backgroundfetchupdateuievent-type-init-type"><code><c- g>type</c-></code></a>, <a data-link-type="idl-name" href="#dictdef-backgroundfetcheventinit"><c- n>BackgroundFetchEventInit</c-></a> <a href="#dom-backgroundfetchupdateuievent-backgroundfetchupdateuievent-type-init-init"><code><c- g>init</c-></code></a>);
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-undefined"><c- b>undefined</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-backgroundfetchupdateuievent-updateui"><c- g>updateUI</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-backgroundfetchuioptions"><c- n>BackgroundFetchUIOptions</c-></a> <a href="#dom-backgroundfetchupdateuievent-updateui-options-options"><code><c- g>options</c-></code></a> = {});
};

</pre>
    <h2 class="no-num no-ref heading settled" id="issues-index"><span class="content">问题索引</span><a class="self-link"
            href="#issues-index"></a></h2>
    <div style="counter-reset:issue">
        <div class="issue"> <a href="https://github.com/w3c/manifest/pull/710">manifest/pull/710</a>.<a
                href="#issue-20b63876"> ↵ </a></div>
        <div class="issue"> <a href="https://github.com/w3c/ServiceWorker/pull/1348">ServiceWorker/1348</a>.<a
                href="#issue-b420dc4f"> ↵ </a></div>
        <div class="issue"> 本步骤的其余部分使用了 fetch 的“回调”，当前这些回调会排队任务。这在此不理想或不可行，因此我们假装不排队任务。（<a
                href="https://github.com/whatwg/fetch/issues/536#issuecomment-330184276">问题</a>）<a
                href="#issue-775cdb79"> ↵ </a></div>
        <div class="issue"> 我需要类似于鼠标移动事件去抖动一样来处理此问题。<a href="#issue-20ad71fa">
                ↵ </a></div>
        <div class="issue"> 解析为整数 <a href="https://github.com/whatwg/infra/issues/189">infra/189</a>.<a
                href="#issue-cddfe468"> ↵ </a></div>
        <div class="issue"> <a href="https://github.com/w3c/ServiceWorker/pull/1348">ServiceWorker/1348</a>.<a
                href="#issue-b420dc4f①"> ↵ </a></div>
    </div>
    <aside class="dfn-panel" data-for="temporarily-unavailable">
        <b><a href="#temporarily-unavailable">#temporarily-unavailable</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-temporarily-unavailable">4.2. Complete a record</a> <a
                    href="#ref-for-temporarily-unavailable①">(2)</a> <a href="#ref-for-temporarily-unavailable②">(3)</a>
                <a href="#ref-for-temporarily-unavailable③">(4)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="background-fetch-task-source">
        <b><a href="#background-fetch-task-source">#background-fetch-task-source</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-background-fetch-task-source">3. Infrastructure</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="queue-a-bgfetch-task">
        <b><a href="#queue-a-bgfetch-task">#queue-a-bgfetch-task</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-queue-a-bgfetch-task">4.3. Update background fetch instances</a>
            <li><a href="#ref-for-queue-a-bgfetch-task①">6.3.1. fetch()</a>
            <li><a href="#ref-for-queue-a-bgfetch-task②">6.3.2. get()</a>
            <li><a href="#ref-for-queue-a-bgfetch-task③">6.4.4. matchAll()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="service-worker-registration-active-background-fetches">
        <b><a
                href="#service-worker-registration-active-background-fetches">#service-worker-registration-active-background-fetches</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-service-worker-registration-active-background-fetches">4.1. Perform a background
                    fetch</a>
            <li><a href="#ref-for-service-worker-registration-active-background-fetches①">6.3.1. fetch()</a>
            <li><a href="#ref-for-service-worker-registration-active-background-fetches②">6.3.2. get()</a>
            <li><a href="#ref-for-service-worker-registration-active-background-fetches③">6.3.3. getIds()</a>
            <li><a href="#ref-for-service-worker-registration-active-background-fetches④">6.4.2. abort()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="service-worker-registration-active-background-fetches-edit-queue">
        <b><a
                href="#service-worker-registration-active-background-fetches-edit-queue">#service-worker-registration-active-background-fetches-edit-queue</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-service-worker-registration-active-background-fetches-edit-queue">4.1. Perform a
                    background fetch</a>
            <li><a href="#ref-for-service-worker-registration-active-background-fetches-edit-queue①">6.3.1. fetch()</a>
            <li><a href="#ref-for-service-worker-registration-active-background-fetches-edit-queue②">6.4.2. abort()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="background-fetch">
        <b><a href="#background-fetch">#background-fetch</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-background-fetch">3.1. Extensions to service worker registration</a>
            <li><a href="#ref-for-background-fetch①">3.2. Background fetch</a> <a
                    href="#ref-for-background-fetch②">(2)</a>
            <li><a href="#ref-for-background-fetch③">3.2.1. Display</a>
            <li><a href="#ref-for-background-fetch④">4.1. Perform a background fetch</a> <a
                    href="#ref-for-background-fetch⑤">(2)</a>
            <li><a href="#ref-for-background-fetch⑥">4.2. Complete a record</a>
            <li><a href="#ref-for-background-fetch⑦">4.3. Update background fetch instances</a>
            <li><a href="#ref-for-background-fetch⑧">4.4. Fire a background fetch click event</a>
            <li><a href="#ref-for-background-fetch⑨">4.5. Get a BackgroundFetchRegistration instance</a> <a
                    href="#ref-for-background-fetch①⓪">(2)</a> <a href="#ref-for-background-fetch①①">(3)</a>
            <li><a href="#ref-for-background-fetch①②">4.9. Contains background fetch</a> <a
                    href="#ref-for-background-fetch①③">(2)</a>
            <li><a href="#ref-for-background-fetch①④">6.3. BackgroundFetchManager</a>
            <li><a href="#ref-for-background-fetch①⑤">6.3.1. fetch()</a>
            <li><a href="#ref-for-background-fetch①⑥">6.4. BackgroundFetchRegistration</a>
            <li><a href="#ref-for-background-fetch①⑦">6.6. BackgroundFetchEvent</a>
            <li><a href="#ref-for-background-fetch①⑧">7.1. Click</a> <a href="#ref-for-background-fetch①⑨">(2)</a>
            <li><a href="#ref-for-background-fetch②⓪">8. Privacy and bandwidth usage</a> <a
                    href="#ref-for-background-fetch②①">(2)</a> <a href="#ref-for-background-fetch②②">(3)</a> <a
                    href="#ref-for-background-fetch②③">(4)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="background-fetch-id">
        <b><a href="#background-fetch-id">#background-fetch-id</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-background-fetch-id">4.1. Perform a background fetch</a>
            <li><a href="#ref-for-background-fetch-id①">4.9. Contains background fetch</a>
            <li><a href="#ref-for-background-fetch-id②">6.3.1. fetch()</a>
            <li><a href="#ref-for-background-fetch-id③">6.4. BackgroundFetchRegistration</a>
            <li><a href="#ref-for-background-fetch-id④">6.4.2. abort()</a>
            <li><a href="#ref-for-background-fetch-id⑤">7.1. Click</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="background-fetch-records">
        <b><a href="#background-fetch-records">#background-fetch-records</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-background-fetch-records">3.2. Background fetch</a>
            <li><a href="#ref-for-background-fetch-records①">3.2.1. Display</a>
            <li><a href="#ref-for-background-fetch-records②">4.1. Perform a background fetch</a> <a
                    href="#ref-for-background-fetch-records③">(2)</a>
            <li><a href="#ref-for-background-fetch-records④">6.3.1. fetch()</a>
            <li><a href="#ref-for-background-fetch-records⑤">6.4.4. matchAll()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="background-fetch-title">
        <b><a href="#background-fetch-title">#background-fetch-title</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-background-fetch-title">3.2.1. Display</a>
            <li><a href="#ref-for-background-fetch-title①">6.3.1. fetch()</a>
            <li><a href="#ref-for-background-fetch-title②">6.7.1. updateUI()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="background-fetch-download-total">
        <b><a href="#background-fetch-download-total">#background-fetch-download-total</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-background-fetch-download-total">3.2.1. Display</a>
            <li><a href="#ref-for-background-fetch-download-total①">4.2. Complete a record</a>
            <li><a href="#ref-for-background-fetch-download-total②">6.3.1. fetch()</a>
            <li><a href="#ref-for-background-fetch-download-total③">6.4. BackgroundFetchRegistration</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="background-fetch-upload-total">
        <b><a href="#background-fetch-upload-total">#background-fetch-upload-total</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-background-fetch-upload-total">3.2.1. Display</a>
            <li><a href="#ref-for-background-fetch-upload-total①">6.3.1. fetch()</a>
            <li><a href="#ref-for-background-fetch-upload-total②">6.4. BackgroundFetchRegistration</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="background-fetch-uploaded">
        <b><a href="#background-fetch-uploaded">#background-fetch-uploaded</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-background-fetch-uploaded">3.2.1. Display</a>
            <li><a href="#ref-for-background-fetch-uploaded①">4.2. Complete a record</a>
            <li><a href="#ref-for-background-fetch-uploaded②">4.3. Update background fetch instances</a>
            <li><a href="#ref-for-background-fetch-uploaded③">6.4. BackgroundFetchRegistration</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="background-fetch-result">
        <b><a href="#background-fetch-result">#background-fetch-result</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-background-fetch-result">3.2.1. Display</a> <a
                    href="#ref-for-background-fetch-result①">(2)</a> <a href="#ref-for-background-fetch-result②">(3)</a>
            <li><a href="#ref-for-background-fetch-result③">4.1. Perform a background fetch</a> <a
                    href="#ref-for-background-fetch-result④">(2)</a>
            <li><a href="#ref-for-background-fetch-result⑤">4.3. Update background fetch instances</a>
            <li><a href="#ref-for-background-fetch-result⑥">6.4. BackgroundFetchRegistration</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="background-fetch-failure-reason">
        <b><a href="#background-fetch-failure-reason">#background-fetch-failure-reason</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-background-fetch-failure-reason">4.1. Perform a background fetch</a>
            <li><a href="#ref-for-background-fetch-failure-reason①">4.3. Update background fetch instances</a>
            <li><a href="#ref-for-background-fetch-failure-reason②">6.4. BackgroundFetchRegistration</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="background-fetch-records-available-flag">
        <b><a
                href="#background-fetch-records-available-flag">#background-fetch-records-available-flag</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-background-fetch-records-available-flag">4.1. Perform a background fetch</a>
            <li><a href="#ref-for-background-fetch-records-available-flag①">4.3. Update background fetch instances</a>
            <li><a href="#ref-for-background-fetch-records-available-flag②">6.4. BackgroundFetchRegistration</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="background-fetch-icons">
        <b><a href="#background-fetch-icons">#background-fetch-icons</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-background-fetch-icons">3.2.1. Display</a>
            <li><a href="#ref-for-background-fetch-icons①">6.3.1. fetch()</a>
            <li><a href="#ref-for-background-fetch-icons②">6.7.1. updateUI()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="background-fetch-service-worker-registration">
        <b><a
                href="#background-fetch-service-worker-registration">#background-fetch-service-worker-registration</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-background-fetch-service-worker-registration">3.2.1. Display</a>
            <li><a href="#ref-for-background-fetch-service-worker-registration①">4.1. Perform a background fetch</a>
            <li><a href="#ref-for-background-fetch-service-worker-registration②">4.3. Update background fetch
                    instances</a>
            <li><a href="#ref-for-background-fetch-service-worker-registration③">4.4. Fire a background fetch click
                    event</a>
            <li><a href="#ref-for-background-fetch-service-worker-registration④">6.3.1. fetch()</a>
            <li><a href="#ref-for-background-fetch-service-worker-registration⑤">6.4.2. abort()</a>
            <li><a href="#ref-for-background-fetch-service-worker-registration⑥">7.1. Click</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="background-fetch-update-handling-queue">
        <b><a
                href="#background-fetch-update-handling-queue">#background-fetch-update-handling-queue</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-background-fetch-update-handling-queue">4.3. Update background fetch instances</a>
            <li><a href="#ref-for-background-fetch-update-handling-queue①">6.3.2. get()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="background-fetch-paused-flag">
        <b><a href="#background-fetch-paused-flag">#background-fetch-paused-flag</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-background-fetch-paused-flag">3.2.1. Display</a> <a
                    href="#ref-for-background-fetch-paused-flag①">(2)</a> <a
                    href="#ref-for-background-fetch-paused-flag②">(3)</a> <a
                    href="#ref-for-background-fetch-paused-flag③">(4)</a> <a
                    href="#ref-for-background-fetch-paused-flag④">(5)</a> <a
                    href="#ref-for-background-fetch-paused-flag⑤">(6)</a>
            <li><a href="#ref-for-background-fetch-paused-flag⑥">4.2. Complete a record</a> <a
                    href="#ref-for-background-fetch-paused-flag⑦">(2)</a> <a
                    href="#ref-for-background-fetch-paused-flag⑧">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="background-fetch-abort-all-flag">
        <b><a href="#background-fetch-abort-all-flag">#background-fetch-abort-all-flag</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-background-fetch-abort-all-flag">3.2.1. Display</a> <a
                    href="#ref-for-background-fetch-abort-all-flag①">(2)</a>
            <li><a href="#ref-for-background-fetch-abort-all-flag②">4.1. Perform a background fetch</a>
            <li><a href="#ref-for-background-fetch-abort-all-flag③">4.2. Complete a record</a> <a
                    href="#ref-for-background-fetch-abort-all-flag④">(2)</a>
            <li><a href="#ref-for-background-fetch-abort-all-flag⑤">6.4.2. abort()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="background-fetch-stored-body-bytes-total">
        <b><a
                href="#background-fetch-stored-body-bytes-total">#background-fetch-stored-body-bytes-total</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-background-fetch-stored-body-bytes-total">3.2.1. Display</a>
            <li><a href="#ref-for-background-fetch-stored-body-bytes-total①">4.2. Complete a record</a>
            <li><a href="#ref-for-background-fetch-stored-body-bytes-total②">4.3. Update background fetch instances</a>
            <li><a href="#ref-for-background-fetch-stored-body-bytes-total③">6.4. BackgroundFetchRegistration</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="background-fetch-display">
        <b><a href="#background-fetch-display">#background-fetch-display</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-background-fetch-display">3.2.1. Display</a>
            <li><a href="#ref-for-background-fetch-display①">6.3.1. fetch()</a>
            <li><a href="#ref-for-background-fetch-display②">7.1. Click</a>
            <li><a href="#ref-for-background-fetch-display③">8. Privacy and bandwidth usage</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="background-fetch-record">
        <b><a href="#background-fetch-record">#background-fetch-record</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-background-fetch-record">3.2. Background fetch</a>
            <li><a href="#ref-for-background-fetch-record①">4.2. Complete a record</a> <a
                    href="#ref-for-background-fetch-record②">(2)</a> <a href="#ref-for-background-fetch-record③">(3)</a>
            <li><a href="#ref-for-background-fetch-record④">4.8. Create record objects</a> <a
                    href="#ref-for-background-fetch-record⑤">(2)</a>
            <li><a href="#ref-for-background-fetch-record⑥">6.3.1. fetch()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="background-fetch-record-request">
        <b><a href="#background-fetch-record-request">#background-fetch-record-request</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-background-fetch-record-request">3.2.1. Display</a>
            <li><a href="#ref-for-background-fetch-record-request①">4.2. Complete a record</a>
            <li><a href="#ref-for-background-fetch-record-request②">4.8. Create record objects</a>
            <li><a href="#ref-for-background-fetch-record-request③">6.3.1. fetch()</a>
            <li><a href="#ref-for-background-fetch-record-request④">6.4.4. matchAll()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="background-fetch-record-response-data">
        <b><a href="#background-fetch-record-response-data">#background-fetch-record-response-data</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-background-fetch-record-response-data">3.2. Background fetch</a>
            <li><a href="#ref-for-background-fetch-record-response-data①">4.1. Perform a background fetch</a>
            <li><a href="#ref-for-background-fetch-record-response-data②">4.2. Complete a record</a> <a
                    href="#ref-for-background-fetch-record-response-data③">(2)</a>
            <li><a href="#ref-for-background-fetch-record-response-data④">4.8. Create record objects</a>
            <li><a href="#ref-for-background-fetch-record-response-data⑤">6.4.4. matchAll()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="background-fetch-response">
        <b><a href="#background-fetch-response">#background-fetch-response</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-background-fetch-response">3.3. Background fetch record</a> <a
                    href="#ref-for-background-fetch-response①">(2)</a>
            <li><a href="#ref-for-background-fetch-response②">4.2. Complete a record</a> <a
                    href="#ref-for-background-fetch-response③">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="background-fetch-response-response">
        <b><a href="#background-fetch-response-response">#background-fetch-response-response</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-background-fetch-response-response">3.4. Background fetch response</a>
            <li><a href="#ref-for-background-fetch-response-response①">4.2. Complete a record</a> <a
                    href="#ref-for-background-fetch-response-response②">(2)</a>
            <li><a href="#ref-for-background-fetch-response-response③">4.8. Create record objects</a> <a
                    href="#ref-for-background-fetch-response-response④">(2)</a>
            <li><a href="#ref-for-background-fetch-response-response⑤">6.4.4. matchAll()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="background-fetch-response-bytes">
        <b><a href="#background-fetch-response-bytes">#background-fetch-response-bytes</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-background-fetch-response-bytes">3.2. Background fetch</a>
            <li><a href="#ref-for-background-fetch-response-bytes①">4.2. Complete a record</a> <a
                    href="#ref-for-background-fetch-response-bytes②">(2)</a> <a
                    href="#ref-for-background-fetch-response-bytes③">(3)</a>
            <li><a href="#ref-for-background-fetch-response-bytes④">4.8. Create record objects</a> <a
                    href="#ref-for-background-fetch-response-bytes⑤">(2)</a> <a
                    href="#ref-for-background-fetch-response-bytes⑥">(3)</a> <a
                    href="#ref-for-background-fetch-response-bytes⑦">(4)</a> <a
                    href="#ref-for-background-fetch-response-bytes⑧">(5)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="background-fetch-response-result">
        <b><a href="#background-fetch-response-result">#background-fetch-response-result</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-background-fetch-response-result">3.4. Background fetch response</a>
            <li><a href="#ref-for-background-fetch-response-result①">4.1. Perform a background fetch</a>
            <li><a href="#ref-for-background-fetch-response-result②">4.2. Complete a record</a> <a
                    href="#ref-for-background-fetch-response-result③">(2)</a> <a
                    href="#ref-for-background-fetch-response-result④">(3)</a> <a
                    href="#ref-for-background-fetch-response-result⑤">(4)</a> <a
                    href="#ref-for-background-fetch-response-result⑥">(5)</a> <a
                    href="#ref-for-background-fetch-response-result⑦">(6)</a> <a
                    href="#ref-for-background-fetch-response-result⑧">(7)</a> <a
                    href="#ref-for-background-fetch-response-result⑨">(8)</a> <a
                    href="#ref-for-background-fetch-response-result①⓪">(9)</a> <a
                    href="#ref-for-background-fetch-response-result①①">(10)</a> <a
                    href="#ref-for-background-fetch-response-result①②">(11)</a> <a
                    href="#ref-for-background-fetch-response-result①③">(12)</a>
            <li><a href="#ref-for-background-fetch-response-result①④">4.8. Create record objects</a> <a
                    href="#ref-for-background-fetch-response-result①⑤">(2)</a> <a
                    href="#ref-for-background-fetch-response-result①⑥">(3)</a> <a
                    href="#ref-for-background-fetch-response-result①⑦">(4)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="background-fetch-response-exposed">
        <b><a href="#background-fetch-response-exposed">#background-fetch-response-exposed</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-background-fetch-response-exposed">4.8. Create record objects</a> <a
                    href="#ref-for-background-fetch-response-exposed①">(2)</a> <a
                    href="#ref-for-background-fetch-response-exposed②">(3)</a> <a
                    href="#ref-for-background-fetch-response-exposed③">(4)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="perform-a-background-fetch">
        <b><a href="#perform-a-background-fetch">#perform-a-background-fetch</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-perform-a-background-fetch">4.1. Perform a background fetch</a>
            <li><a href="#ref-for-perform-a-background-fetch①">6.3.1. fetch()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="complete-a-record">
        <b><a href="#complete-a-record">#complete-a-record</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-complete-a-record">4.1. Perform a background fetch</a> <a
                    href="#ref-for-complete-a-record①">(2)</a>
            <li><a href="#ref-for-complete-a-record②">4.2. Complete a record</a> <a
                    href="#ref-for-complete-a-record③">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="update-background-fetch-instances">
        <b><a href="#update-background-fetch-instances">#update-background-fetch-instances</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-update-background-fetch-instances">4.1. Perform a background fetch</a> <a
                    href="#ref-for-update-background-fetch-instances①">(2)</a>
            <li><a href="#ref-for-update-background-fetch-instances②">4.2. Complete a record</a> <a
                    href="#ref-for-update-background-fetch-instances③">(2)</a> <a
                    href="#ref-for-update-background-fetch-instances④">(3)</a>
            <li><a href="#ref-for-update-background-fetch-instances⑤">4.3. Update background fetch instances</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="fire-a-background-fetch-click-event">
        <b><a href="#fire-a-background-fetch-click-event">#fire-a-background-fetch-click-event</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-fire-a-background-fetch-click-event">3.2.1. Display</a>
            <li><a href="#ref-for-fire-a-background-fetch-click-event①">4.4. Fire a background fetch click event</a>
            <li><a href="#ref-for-fire-a-background-fetch-click-event②">7.1. Click</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="get-a-backgroundfetchregistration-instance">
        <b><a
                href="#get-a-backgroundfetchregistration-instance">#get-a-backgroundfetchregistration-instance</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-get-a-backgroundfetchregistration-instance">4.1. Perform a background fetch</a>
            <li><a href="#ref-for-get-a-backgroundfetchregistration-instance①">4.3. Update background fetch
                    instances</a>
            <li><a href="#ref-for-get-a-backgroundfetchregistration-instance②">4.4. Fire a background fetch click
                    event</a>
            <li><a href="#ref-for-get-a-backgroundfetchregistration-instance③">4.5. Get a BackgroundFetchRegistration
                    instance</a>
            <li><a href="#ref-for-get-a-backgroundfetchregistration-instance④">6.3.1. fetch()</a>
            <li><a href="#ref-for-get-a-backgroundfetchregistration-instance⑤">6.3.2. get()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="validate-a-partial-response">
        <b><a href="#validate-a-partial-response">#validate-a-partial-response</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-validate-a-partial-response">4.2. Complete a record</a>
            <li><a href="#ref-for-validate-a-partial-response①">4.6. Validate a partial response</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="extract-content-range-values">
        <b><a href="#extract-content-range-values">#extract-content-range-values</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-extract-content-range-values">4.2. Complete a record</a>
            <li><a href="#ref-for-extract-content-range-values①">4.6. Validate a partial response</a> <a
                    href="#ref-for-extract-content-range-values②">(2)</a>
            <li><a href="#ref-for-extract-content-range-values③">4.7. Extract content-range values</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="create-record-objects">
        <b><a href="#create-record-objects">#create-record-objects</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-create-record-objects">4.2. Complete a record</a>
            <li><a href="#ref-for-create-record-objects①">4.8. Create record objects</a>
            <li><a href="#ref-for-create-record-objects②">6.4.4. matchAll()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="contains-background-fetch">
        <b><a href="#contains-background-fetch">#contains-background-fetch</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-contains-background-fetch">4.1. Perform a background fetch</a>
            <li><a href="#ref-for-contains-background-fetch①">4.9. Contains background fetch</a> <a
                    href="#ref-for-contains-background-fetch②">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="does-not-contain-background-fetch">
        <b><a href="#does-not-contain-background-fetch">#does-not-contain-background-fetch</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-does-not-contain-background-fetch">6.4.2. abort()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="single-byte-content-range">
        <b><a href="#single-byte-content-range">#single-byte-content-range</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-single-byte-content-range">4.7. Extract content-range values</a> <a
                    href="#ref-for-single-byte-content-range①">(2)</a> <a
                    href="#ref-for-single-byte-content-range②">(3)</a> <a
                    href="#ref-for-single-byte-content-range③">(4)</a> <a
                    href="#ref-for-single-byte-content-range④">(5)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-serviceworkerglobalscope-onbackgroundfetchsuccess">
        <b><a
                href="#dom-serviceworkerglobalscope-onbackgroundfetchsuccess">#dom-serviceworkerglobalscope-onbackgroundfetchsuccess</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-serviceworkerglobalscope-onbackgroundfetchsuccess">6.1.1. Events</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-serviceworkerglobalscope-onbackgroundfetchfail">
        <b><a
                href="#dom-serviceworkerglobalscope-onbackgroundfetchfail">#dom-serviceworkerglobalscope-onbackgroundfetchfail</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-serviceworkerglobalscope-onbackgroundfetchfail">6.1.1. Events</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-serviceworkerglobalscope-onbackgroundfetchabort">
        <b><a
                href="#dom-serviceworkerglobalscope-onbackgroundfetchabort">#dom-serviceworkerglobalscope-onbackgroundfetchabort</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-serviceworkerglobalscope-onbackgroundfetchabort">6.1.1. Events</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-serviceworkerglobalscope-onbackgroundfetchclick">
        <b><a
                href="#dom-serviceworkerglobalscope-onbackgroundfetchclick">#dom-serviceworkerglobalscope-onbackgroundfetchclick</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-serviceworkerglobalscope-onbackgroundfetchclick">6.1.1. Events</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="serviceworkerregistration-background-fetch-manager">
        <b><a
                href="#serviceworkerregistration-background-fetch-manager">#serviceworkerregistration-background-fetch-manager</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-serviceworkerregistration-background-fetch-manager">6.2. Extensions to
                    ServiceWorkerRegistration</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-serviceworkerregistration-backgroundfetch">
        <b><a
                href="#dom-serviceworkerregistration-backgroundfetch">#dom-serviceworkerregistration-backgroundfetch</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-serviceworkerregistration-backgroundfetch">6.2. Extensions to
                    ServiceWorkerRegistration</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="backgroundfetchmanager">
        <b><a href="#backgroundfetchmanager">#backgroundfetchmanager</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-backgroundfetchmanager">4.5. Get a BackgroundFetchRegistration instance</a> <a
                    href="#ref-for-backgroundfetchmanager①">(2)</a>
            <li><a href="#ref-for-backgroundfetchmanager②">6.2. Extensions to ServiceWorkerRegistration</a> <a
                    href="#ref-for-backgroundfetchmanager③">(2)</a> <a href="#ref-for-backgroundfetchmanager④">(3)</a>
            <li><a href="#ref-for-backgroundfetchmanager⑤">6.3. BackgroundFetchManager</a> <a
                    href="#ref-for-backgroundfetchmanager⑥">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dictdef-backgroundfetchuioptions">
        <b><a href="#dictdef-backgroundfetchuioptions">#dictdef-backgroundfetchuioptions</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dictdef-backgroundfetchuioptions">6.3. BackgroundFetchManager</a>
            <li><a href="#ref-for-dictdef-backgroundfetchuioptions①">6.7. BackgroundFetchUpdateUIEvent</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-backgroundfetchuioptions-icons">
        <b><a href="#dom-backgroundfetchuioptions-icons">#dom-backgroundfetchuioptions-icons</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-backgroundfetchuioptions-icons">6.7.1. updateUI()</a> <a
                    href="#ref-for-dom-backgroundfetchuioptions-icons①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-backgroundfetchuioptions-title">
        <b><a href="#dom-backgroundfetchuioptions-title">#dom-backgroundfetchuioptions-title</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-backgroundfetchuioptions-title">6.7.1. updateUI()</a> <a
                    href="#ref-for-dom-backgroundfetchuioptions-title①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dictdef-backgroundfetchoptions">
        <b><a href="#dictdef-backgroundfetchoptions">#dictdef-backgroundfetchoptions</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dictdef-backgroundfetchoptions">6.3. BackgroundFetchManager</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="backgroundfetchmanager-backgroundfetchregistration-instances">
        <b><a
                href="#backgroundfetchmanager-backgroundfetchregistration-instances">#backgroundfetchmanager-backgroundfetchregistration-instances</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-backgroundfetchmanager-backgroundfetchregistration-instances">4.5. Get a
                    BackgroundFetchRegistration instance</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="backgroundfetchmanager-service-worker-registration">
        <b><a
                href="#backgroundfetchmanager-service-worker-registration">#backgroundfetchmanager-service-worker-registration</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-backgroundfetchmanager-service-worker-registration">6.2. Extensions to
                    ServiceWorkerRegistration</a>
            <li><a href="#ref-for-backgroundfetchmanager-service-worker-registration①">6.3.1. fetch()</a>
            <li><a href="#ref-for-backgroundfetchmanager-service-worker-registration②">6.3.2. get()</a>
            <li><a href="#ref-for-backgroundfetchmanager-service-worker-registration③">6.3.3. getIds()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-backgroundfetchmanager-fetch">
        <b><a href="#dom-backgroundfetchmanager-fetch">#dom-backgroundfetchmanager-fetch</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-backgroundfetchmanager-fetch">6.3. BackgroundFetchManager</a>
            <li><a href="#ref-for-dom-backgroundfetchmanager-fetch①">6.3.1. fetch()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-backgroundfetchmanager-get">
        <b><a href="#dom-backgroundfetchmanager-get">#dom-backgroundfetchmanager-get</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-backgroundfetchmanager-get">6.3. BackgroundFetchManager</a>
            <li><a href="#ref-for-dom-backgroundfetchmanager-get①">6.3.2. get()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-backgroundfetchmanager-getids">
        <b><a href="#dom-backgroundfetchmanager-getids">#dom-backgroundfetchmanager-getids</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-backgroundfetchmanager-getids">6.3. BackgroundFetchManager</a>
            <li><a href="#ref-for-dom-backgroundfetchmanager-getids①">6.3.3. getIds()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="backgroundfetchregistration">
        <b><a href="#backgroundfetchregistration">#backgroundfetchregistration</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-backgroundfetchregistration">4.3. Update background fetch instances</a>
            <li><a href="#ref-for-backgroundfetchregistration①">4.5. Get a BackgroundFetchRegistration instance</a> <a
                    href="#ref-for-backgroundfetchregistration②">(2)</a>
            <li><a href="#ref-for-backgroundfetchregistration③">6.3. BackgroundFetchManager</a> <a
                    href="#ref-for-backgroundfetchregistration④">(2)</a> <a
                    href="#ref-for-backgroundfetchregistration⑤">(3)</a>
            <li><a href="#ref-for-backgroundfetchregistration⑥">6.3.2. get()</a>
            <li><a href="#ref-for-backgroundfetchregistration⑦">6.4. BackgroundFetchRegistration</a> <a
                    href="#ref-for-backgroundfetchregistration⑧">(2)</a>
            <li><a href="#ref-for-backgroundfetchregistration⑨">6.6. BackgroundFetchEvent</a> <a
                    href="#ref-for-backgroundfetchregistration①⓪">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="enumdef-backgroundfetchresult">
        <b><a href="#enumdef-backgroundfetchresult">#enumdef-backgroundfetchresult</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-enumdef-backgroundfetchresult">3.2. Background fetch</a>
            <li><a href="#ref-for-enumdef-backgroundfetchresult①">6.4. BackgroundFetchRegistration</a> <a
                    href="#ref-for-enumdef-backgroundfetchresult②">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="enumdef-backgroundfetchfailurereason">
        <b><a href="#enumdef-backgroundfetchfailurereason">#enumdef-backgroundfetchfailurereason</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-enumdef-backgroundfetchfailurereason">3.2. Background fetch</a>
            <li><a href="#ref-for-enumdef-backgroundfetchfailurereason①">3.4. Background fetch response</a>
            <li><a href="#ref-for-enumdef-backgroundfetchfailurereason②">6.4. BackgroundFetchRegistration</a> <a
                    href="#ref-for-enumdef-backgroundfetchfailurereason③">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="backgroundfetchregistration-background-fetch">
        <b><a
                href="#backgroundfetchregistration-background-fetch">#backgroundfetchregistration-background-fetch</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-backgroundfetchregistration-background-fetch">4.3. Update background fetch
                    instances</a>
            <li><a href="#ref-for-backgroundfetchregistration-background-fetch①">4.5. Get a BackgroundFetchRegistration
                    instance</a>
            <li><a href="#ref-for-backgroundfetchregistration-background-fetch②">6.4. BackgroundFetchRegistration</a> <a
                    href="#ref-for-backgroundfetchregistration-background-fetch③">(2)</a> <a
                    href="#ref-for-backgroundfetchregistration-background-fetch④">(3)</a> <a
                    href="#ref-for-backgroundfetchregistration-background-fetch⑤">(4)</a> <a
                    href="#ref-for-backgroundfetchregistration-background-fetch⑥">(5)</a> <a
                    href="#ref-for-backgroundfetchregistration-background-fetch⑦">(6)</a> <a
                    href="#ref-for-backgroundfetchregistration-background-fetch⑧">(7)</a> <a
                    href="#ref-for-backgroundfetchregistration-background-fetch⑨">(8)</a>
            <li><a href="#ref-for-backgroundfetchregistration-background-fetch①⓪">6.4.2. abort()</a>
            <li><a href="#ref-for-backgroundfetchregistration-background-fetch①①">6.4.4. matchAll()</a>
            <li><a href="#ref-for-backgroundfetchregistration-background-fetch①②">6.6. BackgroundFetchEvent</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="backgroundfetchregistration-downloaded">
        <b><a
                href="#backgroundfetchregistration-downloaded">#backgroundfetchregistration-downloaded</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-backgroundfetchregistration-downloaded">4.3. Update background fetch instances</a> <a
                    href="#ref-for-backgroundfetchregistration-downloaded①">(2)</a>
            <li><a href="#ref-for-backgroundfetchregistration-downloaded②">6.4. BackgroundFetchRegistration</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="backgroundfetchregistration-uploaded">
        <b><a href="#backgroundfetchregistration-uploaded">#backgroundfetchregistration-uploaded</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-backgroundfetchregistration-uploaded">4.3. Update background fetch instances</a> <a
                    href="#ref-for-backgroundfetchregistration-uploaded①">(2)</a>
            <li><a href="#ref-for-backgroundfetchregistration-uploaded②">6.4. BackgroundFetchRegistration</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="backgroundfetchregistration-result">
        <b><a href="#backgroundfetchregistration-result">#backgroundfetchregistration-result</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-backgroundfetchregistration-result">4.3. Update background fetch instances</a> <a
                    href="#ref-for-backgroundfetchregistration-result①">(2)</a> <a
                    href="#ref-for-backgroundfetchregistration-result②">(3)</a>
            <li><a href="#ref-for-backgroundfetchregistration-result③">6.4. BackgroundFetchRegistration</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="backgroundfetchregistration-failure-reason">
        <b><a
                href="#backgroundfetchregistration-failure-reason">#backgroundfetchregistration-failure-reason</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-backgroundfetchregistration-failure-reason">4.3. Update background fetch instances</a>
                <a href="#ref-for-backgroundfetchregistration-failure-reason①">(2)</a>
            <li><a href="#ref-for-backgroundfetchregistration-failure-reason②">6.4. BackgroundFetchRegistration</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="backgroundfetchregistration-id">
        <b><a href="#backgroundfetchregistration-id">#backgroundfetchregistration-id</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-backgroundfetchregistration-id">6.4. BackgroundFetchRegistration</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="backgroundfetchregistration-upload-total">
        <b><a
                href="#backgroundfetchregistration-upload-total">#backgroundfetchregistration-upload-total</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-backgroundfetchregistration-upload-total">6.4. BackgroundFetchRegistration</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="backgroundfetchregistration-download-total">
        <b><a
                href="#backgroundfetchregistration-download-total">#backgroundfetchregistration-download-total</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-backgroundfetchregistration-download-total">6.4. BackgroundFetchRegistration</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="backgroundfetchregistration-records-available-flag">
        <b><a
                href="#backgroundfetchregistration-records-available-flag">#backgroundfetchregistration-records-available-flag</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-backgroundfetchregistration-records-available-flag">4.3. Update background fetch
                    instances</a> <a href="#ref-for-backgroundfetchregistration-records-available-flag①">(2)</a>
            <li><a href="#ref-for-backgroundfetchregistration-records-available-flag②">6.4.
                    BackgroundFetchRegistration</a>
            <li><a href="#ref-for-backgroundfetchregistration-records-available-flag③">6.4.4. matchAll()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-backgroundfetchregistration-id">
        <b><a href="#dom-backgroundfetchregistration-id">#dom-backgroundfetchregistration-id</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-backgroundfetchregistration-id">6.4. BackgroundFetchRegistration</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-backgroundfetchregistration-uploadtotal">
        <b><a
                href="#dom-backgroundfetchregistration-uploadtotal">#dom-backgroundfetchregistration-uploadtotal</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-backgroundfetchregistration-uploadtotal">6.4. BackgroundFetchRegistration</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-backgroundfetchregistration-downloadtotal">
        <b><a
                href="#dom-backgroundfetchregistration-downloadtotal">#dom-backgroundfetchregistration-downloadtotal</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-backgroundfetchregistration-downloadtotal">6.4. BackgroundFetchRegistration</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-backgroundfetchregistration-uploaded">
        <b><a
                href="#dom-backgroundfetchregistration-uploaded">#dom-backgroundfetchregistration-uploaded</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-backgroundfetchregistration-uploaded">6.4. BackgroundFetchRegistration</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-backgroundfetchregistration-downloaded">
        <b><a
                href="#dom-backgroundfetchregistration-downloaded">#dom-backgroundfetchregistration-downloaded</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-backgroundfetchregistration-downloaded">6.4. BackgroundFetchRegistration</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-backgroundfetchregistration-result">
        <b><a
                href="#dom-backgroundfetchregistration-result">#dom-backgroundfetchregistration-result</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-backgroundfetchregistration-result">6.4. BackgroundFetchRegistration</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-backgroundfetchregistration-failurereason">
        <b><a
                href="#dom-backgroundfetchregistration-failurereason">#dom-backgroundfetchregistration-failurereason</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-backgroundfetchregistration-failurereason">6.4. BackgroundFetchRegistration</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-backgroundfetchregistration-recordsavailable">
        <b><a
                href="#dom-backgroundfetchregistration-recordsavailable">#dom-backgroundfetchregistration-recordsavailable</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-backgroundfetchregistration-recordsavailable">6.4. BackgroundFetchRegistration</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-backgroundfetchregistration-onprogress">
        <b><a
                href="#dom-backgroundfetchregistration-onprogress">#dom-backgroundfetchregistration-onprogress</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-backgroundfetchregistration-onprogress">6.4. BackgroundFetchRegistration</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="eventdef-backgroundfetchregistration-progress">
        <b><a
                href="#eventdef-backgroundfetchregistration-progress">#eventdef-backgroundfetchregistration-progress</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-eventdef-backgroundfetchregistration-progress">6.3.2. get()</a>
            <li><a href="#ref-for-eventdef-backgroundfetchregistration-progress①">6.4.1. Events</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-backgroundfetchregistration-abort">
        <b><a href="#dom-backgroundfetchregistration-abort">#dom-backgroundfetchregistration-abort</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-backgroundfetchregistration-abort">4.1. Perform a background fetch</a> <a
                    href="#ref-for-dom-backgroundfetchregistration-abort①">(2)</a>
            <li><a href="#ref-for-dom-backgroundfetchregistration-abort②">6.4. BackgroundFetchRegistration</a>
            <li><a href="#ref-for-dom-backgroundfetchregistration-abort③">6.4.2. abort()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-backgroundfetchregistration-match">
        <b><a href="#dom-backgroundfetchregistration-match">#dom-backgroundfetchregistration-match</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-backgroundfetchregistration-match">6.4. BackgroundFetchRegistration</a>
            <li><a href="#ref-for-dom-backgroundfetchregistration-match①">6.4.3. match()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-backgroundfetchregistration-matchall">
        <b><a
                href="#dom-backgroundfetchregistration-matchall">#dom-backgroundfetchregistration-matchall</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-backgroundfetchregistration-matchall">6.4. BackgroundFetchRegistration</a>
            <li><a href="#ref-for-dom-backgroundfetchregistration-matchall①">6.4.3. match()</a> <a
                    href="#ref-for-dom-backgroundfetchregistration-matchall②">(2)</a>
            <li><a href="#ref-for-dom-backgroundfetchregistration-matchall③">6.4.4. matchAll()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="backgroundfetchrecord">
        <b><a href="#backgroundfetchrecord">#backgroundfetchrecord</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-backgroundfetchrecord">4.8. Create record objects</a>
            <li><a href="#ref-for-backgroundfetchrecord①">6.4. BackgroundFetchRegistration</a> <a
                    href="#ref-for-backgroundfetchrecord②">(2)</a>
            <li><a href="#ref-for-backgroundfetchrecord③">6.5. BackgroundFetchRecord</a> <a
                    href="#ref-for-backgroundfetchrecord④">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="backgroundfetchrecord-request">
        <b><a href="#backgroundfetchrecord-request">#backgroundfetchrecord-request</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-backgroundfetchrecord-request">6.5. BackgroundFetchRecord</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="backgroundfetchrecord-response-promise">
        <b><a
                href="#backgroundfetchrecord-response-promise">#backgroundfetchrecord-response-promise</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-backgroundfetchrecord-response-promise">6.5. BackgroundFetchRecord</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-backgroundfetchrecord-request">
        <b><a href="#dom-backgroundfetchrecord-request">#dom-backgroundfetchrecord-request</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-backgroundfetchrecord-request">4.8. Create record objects</a>
            <li><a href="#ref-for-dom-backgroundfetchrecord-request①">6.5. BackgroundFetchRecord</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-backgroundfetchrecord-responseready">
        <b><a
                href="#dom-backgroundfetchrecord-responseready">#dom-backgroundfetchrecord-responseready</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-backgroundfetchrecord-responseready">4.8. Create record objects</a> <a
                    href="#ref-for-dom-backgroundfetchrecord-responseready①">(2)</a> <a
                    href="#ref-for-dom-backgroundfetchrecord-responseready②">(3)</a> <a
                    href="#ref-for-dom-backgroundfetchrecord-responseready③">(4)</a>
            <li><a href="#ref-for-dom-backgroundfetchrecord-responseready④">6.5. BackgroundFetchRecord</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="backgroundfetchevent">
        <b><a href="#backgroundfetchevent">#backgroundfetchevent</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-backgroundfetchevent">4.1. Perform a background fetch</a>
            <li><a href="#ref-for-backgroundfetchevent①">4.4. Fire a background fetch click event</a>
            <li><a href="#ref-for-backgroundfetchevent②">6.1.1. Events</a> <a
                    href="#ref-for-backgroundfetchevent③">(2)</a>
            <li><a href="#ref-for-backgroundfetchevent④">6.6. BackgroundFetchEvent</a> <a
                    href="#ref-for-backgroundfetchevent⑤">(2)</a>
            <li><a href="#ref-for-backgroundfetchevent⑥">6.7. BackgroundFetchUpdateUIEvent</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dictdef-backgroundfetcheventinit">
        <b><a href="#dictdef-backgroundfetcheventinit">#dictdef-backgroundfetcheventinit</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dictdef-backgroundfetcheventinit">6.6. BackgroundFetchEvent</a>
            <li><a href="#ref-for-dictdef-backgroundfetcheventinit①">6.7. BackgroundFetchUpdateUIEvent</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="backgroundfetchevent-background-fetch">
        <b><a href="#backgroundfetchevent-background-fetch">#backgroundfetchevent-background-fetch</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-backgroundfetchevent-background-fetch">6.7.1. updateUI()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-backgroundfetchevent-registration">
        <b><a href="#dom-backgroundfetchevent-registration">#dom-backgroundfetchevent-registration</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-backgroundfetchevent-registration">4.1. Perform a background fetch</a>
            <li><a href="#ref-for-dom-backgroundfetchevent-registration①">4.4. Fire a background fetch click event</a>
            <li><a href="#ref-for-dom-backgroundfetchevent-registration②">6.6. BackgroundFetchEvent</a> <a
                    href="#ref-for-dom-backgroundfetchevent-registration③">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="backgroundfetchupdateuievent">
        <b><a href="#backgroundfetchupdateuievent">#backgroundfetchupdateuievent</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-backgroundfetchupdateuievent">4.1. Perform a background fetch</a> <a
                    href="#ref-for-backgroundfetchupdateuievent①">(2)</a>
            <li><a href="#ref-for-backgroundfetchupdateuievent②">6.1.1. Events</a> <a
                    href="#ref-for-backgroundfetchupdateuievent③">(2)</a>
            <li><a href="#ref-for-backgroundfetchupdateuievent④">6.7. BackgroundFetchUpdateUIEvent</a> <a
                    href="#ref-for-backgroundfetchupdateuievent⑤">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="backgroundfetchupdateuievent-ui-updated-flag">
        <b><a
                href="#backgroundfetchupdateuievent-ui-updated-flag">#backgroundfetchupdateuievent-ui-updated-flag</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-backgroundfetchupdateuievent-ui-updated-flag">6.7.1. updateUI()</a> <a
                    href="#ref-for-backgroundfetchupdateuievent-ui-updated-flag①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-backgroundfetchupdateuievent-updateui">
        <b><a
                href="#dom-backgroundfetchupdateuievent-updateui">#dom-backgroundfetchupdateuievent-updateui</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-backgroundfetchupdateuievent-updateui">6.7. BackgroundFetchUpdateUIEvent</a>
            <li><a href="#ref-for-dom-backgroundfetchupdateuievent-updateui①">6.7.1. updateUI()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="background-fetch-click">
        <b><a href="#background-fetch-click">#background-fetch-click</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-background-fetch-click">7.1. Click</a>
        </ul>
    </aside>
    <script>/* script-dfn-panel */

        document.body.addEventListener("click", function (e) {
            var queryAll = function (sel) { return [].slice.call(document.querySelectorAll(sel)); }
            // Find the dfn element or panel, if any, that was clicked on.
            var el = e.target;
            var target;
            var hitALink = false;
            while (el.parentElement) {
                if (el.tagName == "A") {
                    // Clicking on a link in a <dfn> shouldn't summon the panel
                    hitALink = true;
                }
                if (el.classList.contains("dfn-paneled")) {
                    target = "dfn";
                    break;
                }
                if (el.classList.contains("dfn-panel")) {
                    target = "dfn-panel";
                    break;
                }
                el = el.parentElement;
            }
            if (target != "dfn-panel") {
                // Turn off any currently "on" or "activated" panels.
                queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(function (el) {
                    el.classList.remove("on");
                    el.classList.remove("activated");
                });
            }
            if (target == "dfn" && !hitALink) {
                // open the panel
                var dfnPanel = document.querySelector(".dfn-panel[data-for='" + el.id + "']");
                if (dfnPanel) {
                    dfnPanel.classList.add("on");
                    var rect = el.getBoundingClientRect();
                    dfnPanel.style.left = window.scrollX + rect.right + 5 + "px";
                    dfnPanel.style.top = window.scrollY + rect.top + "px";
                    var panelRect = dfnPanel.getBoundingClientRect();
                    var panelWidth = panelRect.right - panelRect.left;
                    if (panelRect.right > document.body.scrollWidth && (rect.left - (panelWidth + 5)) > 0) {
                        // Reposition, because the panel is overflowing
                        dfnPanel.style.left = window.scrollX + rect.left - (panelWidth + 5) + "px";
                    }
                } else {
                    console.log("Couldn't find .dfn-panel[data-for='" + el.id + "']");
                }
            } else if (target == "dfn-panel") {
                // Switch it to "activated" state, which pins it.
                el.classList.add("activated");
                el.style.left = null;
                el.style.top = null;
            }

        });
    </script>
    <script>/* script-var-click-highlighting */

        document.addEventListener("click", e => {
            if (e.target.nodeName == "VAR") {
                highlightSameAlgoVars(e.target);
            }
        });
        {
            const indexCounts = new Map();
            const indexNames = new Map();
            function highlightSameAlgoVars(v) {
                // Find the algorithm container.
                let algoContainer = null;
                let searchEl = v;
                while (algoContainer == null && searchEl != document.body) {
                    searchEl = searchEl.parentNode;
                    if (searchEl.hasAttribute("data-algorithm")) {
                        algoContainer = searchEl;
                    }
                }

                // Not highlighting document-global vars,
                // too likely to be unrelated.
                if (algoContainer == null) return;

                const algoName = algoContainer.getAttribute("data-algorithm");
                const varName = getVarName(v);
                const addClass = !v.classList.contains("selected");
                let highlightClass = null;
                if (addClass) {
                    const index = chooseHighlightIndex(algoName, varName);
                    indexCounts.get(algoName)[index] += 1;
                    indexNames.set(algoName + "///" + varName, index);
                    highlightClass = nameFromIndex(index);
                } else {
                    const index = previousHighlightIndex(algoName, varName);
                    indexCounts.get(algoName)[index] -= 1;
                    highlightClass = nameFromIndex(index);
                }

                // Find all same-name vars, and toggle their class appropriately.
                for (const el of algoContainer.querySelectorAll("var")) {
                    if (getVarName(el) == varName) {
                        el.classList.toggle("selected", addClass);
                        el.classList.toggle(highlightClass, addClass);
                    }
                }
            }
            function getVarName(el) {
                return el.textContent.replace(/(\s|\xa0)+/, " ").trim();
            }
            function chooseHighlightIndex(algoName, varName) {
                let indexes = null;
                if (indexCounts.has(algoName)) {
                    indexes = indexCounts.get(algoName);
                } else {
                    // 7 classes right now
                    indexes = [0, 0, 0, 0, 0, 0, 0];
                    indexCounts.set(algoName, indexes);
                }

                // If the element was recently unclicked,
                // *and* that color is still unclaimed,
                // give it back the same color.
                const lastIndex = previousHighlightIndex(algoName, varName);
                if (indexes[lastIndex] === 0) return lastIndex;

                // Find the earliest index with the lowest count.
                const minCount = Math.min.apply(null, indexes);
                let index = null;
                for (var i = 0; i < indexes.length; i++) {
                    if (indexes[i] == minCount) {
                        return i;
                    }
                }
            }
            function previousHighlightIndex(algoName, varName) {
                return indexNames.get(algoName + "///" + varName);
            }
            function nameFromIndex(index) {
                return "selected" + index;
            }
        }
    </script>
    <script src="/dropdown.js"></script>