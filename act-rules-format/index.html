<!doctype html>
<html lang="zh-hans">

<head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
    <title>辅助功能一致性测试（ACT）规则格式 1.1</title>
    <meta content="CR" name="w3c-status">
    <!-- <meta content="Bikeshed version 7a96e07ec, updated Mon Jul 14 11:12:36 2025 -0700" name="generator"> -->
    <link href="https://www.w3.org/TR/act-rules-format/" rel="canonical">
    <!-- <meta content="6657f27960e730dbb7cc18e168d09c84ae751cbe" name="revision"> -->
    <meta content="dark light" name="color-scheme">
    <style>
        .rfc2119 {
            text-transform: uppercase;
        }

        pre.highlight {
            background: white !important;
            border: solid 1px #ded390;
            border-radius: 2px;
        }

        pre.highlight c-[s],
        pre.highlight c-[u] {
            color: #79532e;
        }

        pre.highlight c-[f] {
            color: #578201;
        }

        pre.highlight c-[p] {
            color: #757575;
        }
    </style>
    <style>
        /* Boilerplate: style-autolinks */
        .css.css,
        .property.property,
        .descriptor.descriptor {
            color: var(--a-normal-text);
            font-size: inherit;
            font-family: inherit;
        }

        .css::before,
        .property::before,
        .descriptor::before {
            content: "‘";
        }

        .css::after,
        .property::after,
        .descriptor::after {
            content: "’";
        }

        .property,
        .descriptor {
            /* Don't wrap property and descriptor names */
            white-space: nowrap;
        }

        .type {
            /* CSS value <type> */
            font-style: italic;
        }

        pre .property::before,
        pre .property::after {
            content: "";
        }

        [data-link-type="property"]::before,
        [data-link-type="propdesc"]::before,
        [data-link-type="descriptor"]::before,
        [data-link-type="value"]::before,
        [data-link-type="function"]::before,
        [data-link-type="at-rule"]::before,
        [data-link-type="selector"]::before,
        [data-link-type="maybe"]::before {
            content: "‘";
        }

        [data-link-type="property"]::after,
        [data-link-type="propdesc"]::after,
        [data-link-type="descriptor"]::after,
        [data-link-type="value"]::after,
        [data-link-type="function"]::after,
        [data-link-type="at-rule"]::after,
        [data-link-type="selector"]::after,
        [data-link-type="maybe"]::after {
            content: "’";
        }

        [data-link-type].production::before,
        [data-link-type].production::after,
        .prod [data-link-type]::before,
        .prod [data-link-type]::after {
            content: "";
        }

        [data-link-type=element],
        [data-link-type=element-attr] {
            font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
            font-size: .9em;
        }

        [data-link-type=element]::before {
            content: "<"
        }

        [data-link-type=element]::after {
            content: ">"
        }

        [data-link-type=biblio] {
            white-space: pre;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --selflink-text: black;
                --selflink-bg: silver;
                --selflink-hover-text: white;
            }
        }
    </style>
    <style>
        /* Boilerplate: style-colors */
        /* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
        :root {
            color-scheme: light dark;

            --text: black;
            --bg: white;

            --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

            --logo-bg: #1a5e9a;
            --logo-active-bg: #c00;
            --logo-text: white;

            --tocnav-normal-text: #707070;
            --tocnav-normal-bg: var(--bg);
            --tocnav-hover-text: var(--tocnav-normal-text);
            --tocnav-hover-bg: #f8f8f8;
            --tocnav-active-text: #c00;
            --tocnav-active-bg: var(--tocnav-normal-bg);

            --tocsidebar-text: var(--text);
            --tocsidebar-bg: #f7f8f9;
            --tocsidebar-shadow: rgba(0, 0, 0, .1);
            --tocsidebar-heading-text: hsla(203, 20%, 40%, .7);

            --toclink-text: var(--text);
            --toclink-underline: #3980b5;
            --toclink-visited-text: var(--toclink-text);
            --toclink-visited-underline: #054572;

            --heading-text: #005a9c;

            --hr-text: var(--text);

            --algo-border: #def;

            --del-text: red;
            --del-bg: transparent;
            --ins-text: #080;
            --ins-bg: transparent;

            --a-normal-text: #034575;
            --a-normal-underline: #bbb;
            --a-visited-text: var(--a-normal-text);
            --a-visited-underline: #707070;
            --a-hover-bg: rgba(75%, 75%, 75%, .25);
            --a-active-text: #c00;
            --a-active-underline: #c00;

            --blockquote-border: silver;
            --blockquote-bg: transparent;
            --blockquote-text: currentcolor;

            --issue-border: #e05252;
            --issue-bg: #fbe9e9;
            --issue-text: var(--text);
            --issueheading-text: #831616;

            --example-border: #e0cb52;
            --example-bg: #fcfaee;
            --example-text: var(--text);
            --exampleheading-text: #574b0f;

            --note-border: #52e052;
            --note-bg: #e9fbe9;
            --note-text: var(--text);
            --noteheading-text: hsl(120, 70%, 30%);
            --notesummary-underline: silver;

            --assertion-border: #aaa;
            --assertion-bg: #eee;
            --assertion-text: black;

            --advisement-border: orange;
            --advisement-bg: #fec;
            --advisement-text: var(--text);
            --advisementheading-text: #b35f00;

            --warning-border: red;
            --warning-bg: hsla(40, 100%, 50%, 0.95);
            --warning-text: var(--text);

            --amendment-border: #330099;
            --amendment-bg: #F5F0FF;
            --amendment-text: var(--text);
            --amendmentheading-text: #220066;

            --def-border: #8ccbf2;
            --def-bg: #def;
            --def-text: var(--text);
            --defrow-border: #bbd7e9;

            --datacell-border: silver;

            --indexinfo-text: #707070;

            --indextable-hover-text: black;
            --indextable-hover-bg: #f7f8f9;

            --outdatedspec-bg: rgba(0, 0, 0, .5);
            --outdatedspec-text: black;
            --outdated-bg: maroon;
            --outdated-text: white;
            --outdated-shadow: red;

            --editedrec-bg: darkorange;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --text: #ddd;
                --bg: black;

                --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

                --logo-bg: #1a5e9a;
                --logo-active-bg: #c00;
                --logo-text: white;

                --tocnav-normal-text: #999;
                --tocnav-normal-bg: var(--bg);
                --tocnav-hover-text: var(--tocnav-normal-text);
                --tocnav-hover-bg: #080808;
                --tocnav-active-text: #f44;
                --tocnav-active-bg: var(--tocnav-normal-bg);

                --tocsidebar-text: var(--text);
                --tocsidebar-bg: #080808;
                --tocsidebar-shadow: rgba(255, 255, 255, .1);
                --tocsidebar-heading-text: hsla(203, 20%, 40%, .7);

                --toclink-text: var(--text);
                --toclink-underline: #6af;
                --toclink-visited-text: var(--toclink-text);
                --toclink-visited-underline: #054572;

                --heading-text: #8af;

                --hr-text: var(--text);

                --algo-border: #456;

                --del-text: #f44;
                --del-bg: transparent;
                --ins-text: #4a4;
                --ins-bg: transparent;

                --a-normal-text: #6af;
                --a-normal-underline: #555;
                --a-visited-text: var(--a-normal-text);
                --a-visited-underline: var(--a-normal-underline);
                --a-hover-bg: rgba(25%, 25%, 25%, .2);
                --a-active-text: #f44;
                --a-active-underline: var(--a-active-text);

                --borderedblock-bg: rgba(255, 255, 255, .05);

                --blockquote-border: silver;
                --blockquote-bg: var(--borderedblock-bg);
                --blockquote-text: currentcolor;

                --issue-border: #e05252;
                --issue-bg: var(--borderedblock-bg);
                --issue-text: var(--text);
                --issueheading-text: hsl(0deg, 70%, 70%);

                --example-border: hsl(50deg, 90%, 60%);
                --example-bg: var(--borderedblock-bg);
                --example-text: var(--text);
                --exampleheading-text: hsl(50deg, 70%, 70%);

                --note-border: hsl(120deg, 100%, 35%);
                --note-bg: var(--borderedblock-bg);
                --note-text: var(--text);
                --noteheading-text: hsl(120, 70%, 70%);
                --notesummary-underline: silver;

                --assertion-border: #444;
                --assertion-bg: var(--borderedblock-bg);
                --assertion-text: var(--text);

                --advisement-border: orange;
                --advisement-bg: #222218;
                --advisement-text: var(--text);
                --advisementheading-text: #f84;

                --warning-border: red;
                --warning-bg: hsla(40, 100%, 20%, 0.95);
                --warning-text: var(--text);

                --amendment-border: #330099;
                --amendment-bg: #080010;
                --amendment-text: var(--text);
                --amendmentheading-text: #cc00ff;

                --def-border: #8ccbf2;
                --def-bg: #080818;
                --def-text: var(--text);
                --defrow-border: #136;

                --datacell-border: silver;

                --indexinfo-text: #aaa;

                --indextable-hover-text: var(--text);
                --indextable-hover-bg: #181818;

                --outdatedspec-bg: rgba(255, 255, 255, .5);
                --outdatedspec-text: black;
                --outdated-bg: maroon;
                --outdated-text: white;
                --outdated-shadow: red;

                --editedrec-bg: darkorange;
            }

            /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
            img {
                background: white;
            }
        }
    </style>
    <style>
        /* Boilerplate: style-counters */
        body {
            counter-reset: example figure issue;
        }

        .issue {
            counter-increment: issue;
        }

        .issue:not(.no-marker)::before {
            content: "Issue " counter(issue);
        }

        .example {
            counter-increment: example;
        }

        .example:not(.no-marker)::before {
            content: "Example " counter(example);
        }

        .invalid.example:not(.no-marker)::before,
        .illegal.example:not(.no-marker)::before {
            content: "Invalid Example" counter(example);
        }

        figcaption {
            counter-increment: figure;
        }

        figcaption:not(.no-marker)::before {
            content: "Figure " counter(figure) " ";
        }
    </style>
    <style>
        /* Boilerplate: style-dfn-panel */
        :root {
            --dfnpanel-bg: #ddd;
            --dfnpanel-text: var(--text);
            --dfnpanel-target-bg: #ffc;
            --dfnpanel-target-outline: orange;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --dfnpanel-bg: #222;
                --dfnpanel-text: var(--text);
                --dfnpanel-target-bg: #333;
                --dfnpanel-target-outline: silver;
            }
        }

        .dfn-panel {
            position: absolute;
            z-index: 35;
            width: 20em;
            width: 300px;
            height: auto;
            max-height: 500px;
            overflow: auto;
            padding: 0.5em 0.75em;
            font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
            background: var(--dfnpanel-bg);
            color: var(--dfnpanel-text);
            border: outset 0.2em;
            white-space: normal;
            /* in case it's moved into a pre */
        }

        .dfn-panel:not(.on) {
            display: none;
        }

        .dfn-panel * {
            margin: 0;
            padding: 0;
            text-indent: 0;
        }

        .dfn-panel>b {
            display: block;
        }

        .dfn-panel a {
            color: var(--dfnpanel-text);
        }

        .dfn-panel a:not(:hover) {
            text-decoration: none !important;
            border-bottom: none !important;
        }

        .dfn-panel a:focus {
            outline: 5px auto Highlight;
            outline: 5px auto -webkit-focus-ring-color;
        }

        .dfn-panel>b+b {
            margin-top: 0.25em;
        }

        .dfn-panel ul {
            padding: 0 0 0 1em;
            list-style: none;
        }

        .dfn-panel li a {
            max-width: calc(300px - 1.5em - 1em);
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .dfn-panel.activated {
            display: inline-block;
            position: fixed;
            left: 8px;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - 1.5em - .4em - .5em);
            max-height: 30vh;
            transition: left 1s ease-out, bottom 1s ease-out;
        }

        .dfn-panel .link-item:hover {
            text-decoration: underline;
        }

        .dfn-panel .link-item .copy-icon {
            opacity: 0;
        }

        .dfn-panel .link-item:hover .copy-icon,
        .dfn-panel .link-item .copy-icon:focus {
            opacity: 1;
        }

        .dfn-panel .copy-icon {
            display: inline-block;
            margin-right: 0.5em;
            width: 0.85em;
            height: 1em;
            border-radius: 3px;
            background-color: #ccc;
            cursor: pointer;
        }

        .dfn-panel .copy-icon .icon {
            width: 100%;
            height: 100%;
            background-color: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        .dfn-panel .copy-icon .icon::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: 1px solid black;
            background-color: #ccc;
            opacity: 0.25;
            transform: translate(3px, -3px);
        }

        .dfn-panel .copy-icon:active .icon::before {
            opacity: 1;
        }

        .dfn-paneled[role="button"] {
            cursor: help;
        }

        .highlighted {
            animation: target-fade 3s;
        }

        @keyframes target-fade {
            from {
                background-color: var(--dfnpanel-target-bg);
                outline: 5px solid var(--dfnpanel-target-outline);
            }

            to {
                color: var(--a-normal-text);
                background-color: transparent;
                outline: transparent;
            }
        }
    </style>
    <style>
        /* Boilerplate: style-issues */
        a[href].issue-return {
            float: right;
            float: inline-end;
            color: var(--issueheading-text);
            font-weight: bold;
            text-decoration: none;
        }
    </style>
    <style>
        /* Boilerplate: style-md-lists */
        /* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
        [data-md]> :first-child {
            margin-top: 0;
        }

        [data-md]> :last-child {
            margin-bottom: 0;
        }
    </style>
    <style>
        /* Boilerplate: style-ref-hints */
        :root {
            --ref-hint-bg: #ddd;
            --ref-hint-text: var(--text);
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --ref-hint-bg: #222;
                --ref-hint-text: var(--text);
            }
        }

        .ref-hint {
            display: inline-block;
            position: absolute;
            z-index: 35;
            width: 20em;
            width: 300px;
            height: auto;
            max-height: 500px;
            overflow: auto;
            padding: 0.5em 0.5em;
            font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
            background: var(--ref-hint-bg);
            color: var(--ref-hint-text);
            border: outset 0.2em;
            white-space: normal;
            /* in case it's moved into a pre */
        }

        .ref-hint * {
            margin: 0;
            padding: 0;
            text-indent: 0;
        }

        .ref-hint ul {
            padding: 0 0 0 1em;
            list-style: none;
        }
    </style>
    <style>
        /* Boilerplate: style-selflinks */
        :root {
            --selflink-text: white;
            --selflink-bg: gray;
            --selflink-hover-text: black;
        }

        .heading,
        .issue,
        .note,
        .example,
        li,
        dt {
            position: relative;
        }

        a.self-link {
            position: absolute;
            top: 0;
            left: calc(-1 * (3.5rem - 26px));
            width: calc(3.5rem - 26px);
            height: 2em;
            text-align: center;
            border: none;
            transition: opacity .2s;
            opacity: .5;
        }

        a.self-link:hover {
            opacity: 1;
        }

        .heading>a.self-link {
            font-size: 83%;
        }

        .example>a.self-link,
        .note>a.self-link,
        .issue>a.self-link {
            /* These blocks are overflow:auto, so positioning outside
       doesn't work. */
            left: auto;
            right: 0;
        }

        li>a.self-link {
            left: calc(-1 * (3.5rem - 26px) - 2em);
        }

        dfn>a.self-link {
            top: auto;
            left: auto;
            opacity: 0;
            width: 1.5em;
            height: 1.5em;
            background: var(--selflink-bg);
            color: var(--selflink-text);
            font-style: normal;
            transition: opacity .2s, background-color .2s, color .2s;
        }

        dfn:hover>a.self-link {
            opacity: 1;
        }

        dfn>a.self-link:hover {
            color: var(--selflink-hover-text);
        }

        a.self-link::before {
            content: "¶";
        }

        .heading>a.self-link::before {
            content: "§";
        }

        dfn>a.self-link::before {
            content: "#";
        }
    </style>
    <style>
        /* Boilerplate: style-syntax-highlighting */
        code.highlight {
            padding: .1em;
            border-radius: .3em;
        }

        pre.highlight,
        pre>code.highlight {
            display: block;
            padding: 1em;
            margin: .5em 0;
            overflow: auto;
            border-radius: 0;
        }

        .highlight:not(.idl) {
            background: rgba(0, 0, 0, .03);
        }

        c-[a] {
            color: #990055
        }

        /* Keyword.Declaration */
        c-[b] {
            color: #990055
        }

        /* Keyword.Type */
        c-[c] {
            color: #708090
        }

        /* Comment */
        c-[d] {
            color: #708090
        }

        /* Comment.Multiline */
        c-[e] {
            color: #0077aa
        }

        /* Name.Attribute */
        c-[f] {
            color: #669900
        }

        /* Name.Tag */
        c-[g] {
            color: #222222
        }

        /* Name.Variable */
        c-[k] {
            color: #990055
        }

        /* Keyword */
        c-[l] {
            color: #000000
        }

        /* Literal */
        c-[m] {
            color: #000000
        }

        /* Literal.Number */
        c-[n] {
            color: #0077aa
        }

        /* Name */
        c-[o] {
            color: #999999
        }

        /* Operator */
        c-[p] {
            color: #999999
        }

        /* Punctuation */
        c-[s] {
            color: #a67f59
        }

        /* Literal.String */
        c-[t] {
            color: #a67f59
        }

        /* Literal.String.Single */
        c-[u] {
            color: #a67f59
        }

        /* Literal.String.Double */
        c-[cp] {
            color: #708090
        }

        /* Comment.Preproc */
        c-[c1] {
            color: #708090
        }

        /* Comment.Single */
        c-[cs] {
            color: #708090
        }

        /* Comment.Special */
        c-[kc] {
            color: #990055
        }

        /* Keyword.Constant */
        c-[kn] {
            color: #990055
        }

        /* Keyword.Namespace */
        c-[kp] {
            color: #990055
        }

        /* Keyword.Pseudo */
        c-[kr] {
            color: #990055
        }

        /* Keyword.Reserved */
        c-[ld] {
            color: #000000
        }

        /* Literal.Date */
        c-[nc] {
            color: #0077aa
        }

        /* Name.Class */
        c-[no] {
            color: #0077aa
        }

        /* Name.Constant */
        c-[nd] {
            color: #0077aa
        }

        /* Name.Decorator */
        c-[ni] {
            color: #0077aa
        }

        /* Name.Entity */
        c-[ne] {
            color: #0077aa
        }

        /* Name.Exception */
        c-[nf] {
            color: #0077aa
        }

        /* Name.Function */
        c-[nl] {
            color: #0077aa
        }

        /* Name.Label */
        c-[nn] {
            color: #0077aa
        }

        /* Name.Namespace */
        c-[py] {
            color: #0077aa
        }

        /* Name.Property */
        c-[ow] {
            color: #999999
        }

        /* Operator.Word */
        c-[mb] {
            color: #000000
        }

        /* Literal.Number.Bin */
        c-[mf] {
            color: #000000
        }

        /* Literal.Number.Float */
        c-[mh] {
            color: #000000
        }

        /* Literal.Number.Hex */
        c-[mi] {
            color: #000000
        }

        /* Literal.Number.Integer */
        c-[mo] {
            color: #000000
        }

        /* Literal.Number.Oct */
        c-[sb] {
            color: #a67f59
        }

        /* Literal.String.Backtick */
        c-[sc] {
            color: #a67f59
        }

        /* Literal.String.Char */
        c-[sd] {
            color: #a67f59
        }

        /* Literal.String.Doc */
        c-[se] {
            color: #a67f59
        }

        /* Literal.String.Escape */
        c-[sh] {
            color: #a67f59
        }

        /* Literal.String.Heredoc */
        c-[si] {
            color: #a67f59
        }

        /* Literal.String.Interpol */
        c-[sx] {
            color: #a67f59
        }

        /* Literal.String.Other */
        c-[sr] {
            color: #a67f59
        }

        /* Literal.String.Regex */
        c-[ss] {
            color: #a67f59
        }

        /* Literal.String.Symbol */
        c-[vc] {
            color: #0077aa
        }

        /* Name.Variable.Class */
        c-[vg] {
            color: #0077aa
        }

        /* Name.Variable.Global */
        c-[vi] {
            color: #0077aa
        }

        /* Name.Variable.Instance */
        c-[il] {
            color: #000000
        }

        /* Literal.Number.Integer.Long */

        @media (prefers-color-scheme: dark) {
            .highlight:not(.idl) {
                background: rgba(255, 255, 255, .05);
            }

            c-[a] {
                color: #d33682
            }

            /* Keyword.Declaration */
            c-[b] {
                color: #d33682
            }

            /* Keyword.Type */
            c-[c] {
                color: #2aa198
            }

            /* Comment */
            c-[d] {
                color: #2aa198
            }

            /* Comment.Multiline */
            c-[e] {
                color: #268bd2
            }

            /* Name.Attribute */
            c-[f] {
                color: #b58900
            }

            /* Name.Tag */
            c-[g] {
                color: #cb4b16
            }

            /* Name.Variable */
            c-[k] {
                color: #d33682
            }

            /* Keyword */
            c-[l] {
                color: #657b83
            }

            /* Literal */
            c-[m] {
                color: #657b83
            }

            /* Literal.Number */
            c-[n] {
                color: #268bd2
            }

            /* Name */
            c-[o] {
                color: #657b83
            }

            /* Operator */
            c-[p] {
                color: #657b83
            }

            /* Punctuation */
            c-[s] {
                color: #6c71c4
            }

            /* Literal.String */
            c-[t] {
                color: #6c71c4
            }

            /* Literal.String.Single */
            c-[u] {
                color: #6c71c4
            }

            /* Literal.String.Double */
            c-[ch] {
                color: #2aa198
            }

            /* Comment.Hashbang */
            c-[cp] {
                color: #2aa198
            }

            /* Comment.Preproc */
            c-[cpf] {
                color: #2aa198
            }

            /* Comment.PreprocFile */
            c-[c1] {
                color: #2aa198
            }

            /* Comment.Single */
            c-[cs] {
                color: #2aa198
            }

            /* Comment.Special */
            c-[kc] {
                color: #d33682
            }

            /* Keyword.Constant */
            c-[kn] {
                color: #d33682
            }

            /* Keyword.Namespace */
            c-[kp] {
                color: #d33682
            }

            /* Keyword.Pseudo */
            c-[kr] {
                color: #d33682
            }

            /* Keyword.Reserved */
            c-[ld] {
                color: #657b83
            }

            /* Literal.Date */
            c-[nc] {
                color: #268bd2
            }

            /* Name.Class */
            c-[no] {
                color: #268bd2
            }

            /* Name.Constant */
            c-[nd] {
                color: #268bd2
            }

            /* Name.Decorator */
            c-[ni] {
                color: #268bd2
            }

            /* Name.Entity */
            c-[ne] {
                color: #268bd2
            }

            /* Name.Exception */
            c-[nf] {
                color: #268bd2
            }

            /* Name.Function */
            c-[nl] {
                color: #268bd2
            }

            /* Name.Label */
            c-[nn] {
                color: #268bd2
            }

            /* Name.Namespace */
            c-[py] {
                color: #268bd2
            }

            /* Name.Property */
            c-[ow] {
                color: #657b83
            }

            /* Operator.Word */
            c-[mb] {
                color: #657b83
            }

            /* Literal.Number.Bin */
            c-[mf] {
                color: #657b83
            }

            /* Literal.Number.Float */
            c-[mh] {
                color: #657b83
            }

            /* Literal.Number.Hex */
            c-[mi] {
                color: #657b83
            }

            /* Literal.Number.Integer */
            c-[mo] {
                color: #657b83
            }

            /* Literal.Number.Oct */
            c-[sa] {
                color: #6c71c4
            }

            /* Literal.String.Affix */
            c-[sb] {
                color: #6c71c4
            }

            /* Literal.String.Backtick */
            c-[sc] {
                color: #6c71c4
            }

            /* Literal.String.Char */
            c-[dl] {
                color: #6c71c4
            }

            /* Literal.String.Delimiter */
            c-[sd] {
                color: #6c71c4
            }

            /* Literal.String.Doc */
            c-[se] {
                color: #6c71c4
            }

            /* Literal.String.Escape */
            c-[sh] {
                color: #6c71c4
            }

            /* Literal.String.Heredoc */
            c-[si] {
                color: #6c71c4
            }

            /* Literal.String.Interpol */
            c-[sx] {
                color: #6c71c4
            }

            /* Literal.String.Other */
            c-[sr] {
                color: #6c71c4
            }

            /* Literal.String.Regex */
            c-[ss] {
                color: #6c71c4
            }

            /* Literal.String.Symbol */
            c-[fm] {
                color: #268bd2
            }

            /* Name.Function.Magic */
            c-[vc] {
                color: #cb4b16
            }

            /* Name.Variable.Class */
            c-[vg] {
                color: #cb4b16
            }

            /* Name.Variable.Global */
            c-[vi] {
                color: #cb4b16
            }

            /* Name.Variable.Instance */
            c-[vm] {
                color: #cb4b16
            }

            /* Name.Variable.Magic */
            c-[il] {
                color: #657b83
            }

            /* Literal.Number.Integer.Long */
        }
    </style>
    <link href="https://www.w3.org/StyleSheets/TR/2021/W3C-CR" rel="stylesheet">
    <link href="https://www.w3.org/StyleSheets/TR/2021/dark.css" media="(prefers-color-scheme: dark)" rel="stylesheet"
        type="text/css">

<body class="h-entry">
    <div class="head">
        <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/">
                <img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72">
            </a>
        </p>
        <h1 class="p-name no-ref" id="title">辅助功能一致性测试（ACT）规则格式 1.1</h1>
        <p id="w3c-state"><a href="https://www.w3.org/standards/types/#CR">W3C候选推荐规范快照</a>,
            <time class="dt-updated" datetime="2025-08-19">2025年8月19日</time>
        </p>
        <details open>
            <summary>关于本文档的更多信息</summary>
            <div data-fill-with="spec-metadata">
                <dl>
                    <dt>本版本：
                    <dd><a class="u-url"
                            href="https://www.w3.org/TR/2025/CR-act-rules-format-1.1-20250819/">https://www.w3.org/TR/2025/CR-act-rules-format-1.1-20250819/</a>
                    <dt>最新发布版本：
                    <dd><a href="https://www.w3.org/TR/act-rules-format/">https://www.w3.org/TR/act-rules-format/</a>
                    <dt>编辑草案：
                    <dd><a
                            href="https://w3c.github.io/wcag-act/act-rules-format.html">https://w3c.github.io/wcag-act/act-rules-format.html</a>
                    <dt>历史记录：
                    <dd><a class="u-url"
                            href="https://www.w3.org/standards/history/act-rules-format-1.1/">https://www.w3.org/standards/history/act-rules-format-1.1/</a>
                    <dt>实现报告：
                    <dd><a
                            href="https://www.w3.org/WAI/standards-guidelines/act/rules/">https://www.w3.org/WAI/standards-guidelines/act/rules/</a>
                    <dt>反馈：
                    <dd><a href="https://github.com/w3c/wcag-act/issues/">开放议题</a>
                    <dd><a href="https://github.com/w3c/wcag-act/issues/">GitHub</a>
                    <dt class="editor">编辑：
                    <dd class="editor p-author h-card vcard" data-editor-id="43334"><span class="p-name fn">Wilco
                            Fiers</span> (<span class="p-org org">Deque Systems</span>)
                    <dd class="editor p-author h-card vcard" data-editor-id="107871"><span class="p-name fn">Kathy
                            Eng</span> (<span class="p-org org">US Access Board</span>)
                    <dd class="editor p-author h-card vcard" data-editor-id="114058"><span class="p-name fn">Daniel
                            Montalvo</span> (<span class="p-org org">W3C</span>)
                    <dt class="editor">前编辑：
                    <dd class="editor p-author h-card vcard" data-editor-id="105887"><span class="p-name fn">Trevor
                            Bostic</span> (<span class="p-org org">MITRE Corp.</span>)
                    <dd class="editor p-author h-card vcard"><span class="p-name fn">Maureen Kraft</span> (<span
                            class="p-org org">IBM Corp.</span>)
                    <dd class="editor p-author h-card vcard"><span class="p-name fn">Mary Jo Mueller</span> (<span
                            class="p-org org">IBM Corp.</span>)
                    <dd class="editor p-author h-card vcard"><span class="p-name fn">Shadi Abou-Zahra</span> (<span
                            class="p-org org">W3C</span>)
                </dl>
            </div>
        </details>
        <div data-fill-with="warning"></div>
        <p class="copyright" data-fill-with="copyright"><a href="https://www.w3.org/policies/#copyright">Copyright</a> ©
            2025 <a href="https://www.w3.org/">World Wide Web Consortium</a>. <abbr
                title="World Wide Web Consortium">W3C</abbr><sup>®</sup> <a
                href="https://www.w3.org/policies/#Legal_Disclaimer">liability</a>, <a
                href="https://www.w3.org/policies/#W3C_Trademarks">trademark</a> and <a
                href="https://www.w3.org/copyright/document-license-2023/">document use</a> rules apply.</p>
        <hr title="Separator for header">
    </div>
    <div class="p-summary" data-fill-with="abstract">
        <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">摘要</span></h2>
        <p>辅助功能一致性测试（ACT）规则格式 1.1
            定义了一种用于编写辅助功能测试规则的格式。这些测试规则可用于开发自动化测试工具和手动测试方法。本文档提供了一种通用格式，使所有参与辅助功能测试的人能够以健壮且易于理解的方式记录和共享各自的测试流程。这有助于测试方法的透明和统一，包括由辅助功能测试工具实现的方法。
        </p>
    </div>
    <h2 class="no-num no-toc no-ref heading settled" id="sotd"><span class="content">本文档状态</span></h2>
    <div data-fill-with="status">
        <p><em>本节描述了本文档在发布时的状态。可在 <a href="https://www.w3.org/TR/"><abbr title="World Wide Web Consortium">W3C</abbr>
                    标准和草案索引</a>中找到当前的 <abbr title="World Wide Web Consortium">W3C</abbr> 发布列表以及本技术报告的最新修订版。</em></p>
        <p>本文档由 <a href="https://www.w3.org/groups/wg/ag/">辅助功能指南工作组</a>以 <a
                href="https://www.w3.org/policies/process/20250818/#recs-and-notes">推荐轨道</a> 发布为候选推荐规范快照。
        </p>
        <p> 本文档将至少保留为候选推荐规范至 <time class="status-deadline" datetime="2025-10-20">2025年10月20日</time>，以确保有充足的时间进行广泛评审。</p>
        <p>工作组对在水平评审过程中收到的反馈已予以回应。详情见：</p>
        <ul>
            <li data-md>
                <p><a href="#changes-since-FPWD">自 ACT 规则格式首次公开工作草案以来的变更</a></p>
            <li data-md>
                <p><a href="#changes-since-1.0">自 ACT 规则格式 1.0 以来的变更</a></p>
            <li data-md>
                <p>完整的 <a
                        href="https://services.w3.org/htmldiff?doc1=https%3A%2F%2Fwww.w3.org%2FTR%2F2024%2FWD-act-rules-format-1.1-20240618%2F&amp;doc2=https%3A%2F%2Fwww.w3.org%2FTR%2F2025%2FCR-act-rules-format-1.1-20250819%2F">候选推荐规范与首次公开工作草案之间的差异</a>
                </p>
        </ul>
        <p>工作组欢迎您反馈，尤其是针对自首次公开工作草案以来所做的修改。请将所有技术性意见集中在本轮评审期间提交，以便工作组更顺利地将该文档转为 W3C 推荐标准。</p>
        <p>
            如需评论，请<a href="https://github.com/w3c/wcag-act/issues/new">在 ACT 的 GitHub 仓库提交议题</a>。请针对每个话题分别创建 GitHub
            议题，而不是在同一个议题下评论多个话题。注册 GitHub 账号免费，便于提交议题。评论之前，请先查阅 ACT GitHub 仓库是否有相关评论。如无法通过 GitHub 提交议题，可邮件<a
                href="mailto:public-wcag-act-comments@w3.org">public-wcag-act-comments@w3.org</a>（<a
                href="https://lists.w3.org/Archives/Public/public-wcag-act-comments/">查看以往评论的邮件存档</a>）。评论截止日期为
            <strong>2025年10月20日</strong>。
        </p>
        <p>作为候选推荐规范发布并不意味着 W3C 及其成员已认可。本候选推荐快照经过了 <a
                href="https://www.w3.org/policies/process/20250818/#dfn-wide-review">广泛评审</a>，旨在收集实施经验，并获得工作组成员对<a
                href="https://www.w3.org/policies/patent-policy/#sec-Requirements">无版税许可</a>的承诺以支持实现。</p>
        <p>本文档由遵循 <a href="https://www.w3.org/policies/patent-policy/">W3C 专利政策</a>的工作组编制。W3C 维护一个<a
                href="https://www.w3.org/groups/wg/ag/ipr/"
                rel="disclosure">与工作组交付物相关的专利公开列表</a>；该页面亦有披露专利的指引。任何个人如果实际知晓某专利且认为包含<a
                href="https://www.w3.org/policies/patent-policy/#def-essential">必要声明</a>，应根据<a
                href="https://www.w3.org/policies/patent-policy/#sec-Disclosure">W3C 专利政策第6节</a>进行信息披露。</p>
        <p>本文档由 <a href="https://www.w3.org/policies/process/20250818/" id="w3c_process_revision">2025年8月18日
                W3C流程文档</a>管理。</p>
    </div>
    <div data-fill-with="at-risk"></div>
    <nav data-fill-with="table-of-contents" id="toc">
        <h2 class="no-num no-toc no-ref" id="contents">目录</h2>
        <ol class="toc" role="directory">
            <li><a href="#intro"><span class="secno">1</span> <span class="content">引言</span></a>
            <li>
                <a href="#scope"><span class="secno">2</span> <span class="content">适用范围</span></a>
                <ol class="toc">
                    <li><a href="#backward-compatible"><span class="secno">2.1</span> <span
                                class="content">向后兼容性</span></a>
                </ol>
            <li><a href="#rule-types"><span class="secno">3</span> <span class="content">ACT 规则类型</span></a>
            <li>
                <a href="#act-rule-structure"><span class="secno">4</span> <span class="content">ACT 规则结构</span></a>
                <ol class="toc">
                    <li><a href="#rule-identifier"><span class="secno">4.1</span> <span class="content">规则标识符</span></a>
                    <li><a href="#rule-description"><span class="secno">4.2</span> <span class="content">规则描述</span></a>
                    <li><a href="#rule-type"><span class="secno">4.3</span> <span class="content">规则类型</span></a>
                    <li>
                        <a href="#accessibility-requirements-mapping"><span class="secno">4.4</span> <span
                                class="content">辅助功能需求映射</span></a>
                        <ol class="toc">
                            <li>
                                <a href="#outcome-mapping"><span class="secno">4.4.1</span> <span
                                        class="content">结果映射</span></a>
                                <ol class="toc">
                                    <li><a href="#conformance-requirements"><span class="secno">4.4.1.1</span> <span
                                                class="content">一致性要求</span></a>
                                    <li><a href="#secondary-requirements"><span class="secno">4.4.1.2</span> <span
                                                class="content">次要要求</span></a>
                                </ol>
                            <li><a href="#mapping-outside-wcag"><span class="secno">4.4.2</span> <span
                                        class="content">WCAG 以外的映射</span></a>
                            <li><a href="#rules-without-accessibility-requirements"><span class="secno">4.4.3</span>
                                    <span class="content">无辅助功能要求的规则</span></a>
                            <li><a href="#external-accessibility-requirements-mapping"><span class="secno">4.4.4</span>
                                    <span class="content">外部辅助功能需求映射</span></a>
                        </ol>
                    <li>
                        <a href="#input"><span class="secno">4.5</span> <span class="content">规则输入</span></a>
                        <ol class="toc">
                            <li><a href="#input-aspects"><span class="secno">4.5.1</span> <span
                                        class="content">输入方面（仅限原子规则）</span></a>
                            <li><a href="#input-rules"><span class="secno">4.5.2</span> <span
                                        class="content">输入规则（仅限复合规则）</span></a>
                        </ol>
                    <li>
                        <a href="#applicability"><span class="secno">4.6</span> <span class="content">适用性</span></a>
                        <ol class="toc">
                            <li>
                                <a href="#applicability-atomic"><span class="secno">4.6.1</span> <span
                                        class="content">原子规则的适用性</span></a>
                                <ol class="toc">
                                    <li><a href="#applicability-type-designation-atomic-optional"><span
                                                class="secno">4.6.1.1</span> <span
                                                class="content">适用性类型标识（可选）</span></a>
                                </ol>
                            <li>
                                <a href="#applicability-composite"><span class="secno">4.6.2</span> <span
                                        class="content">复合规则适用性</span></a>
                                <ol class="toc">
                                    <li><a href="#applicability-type-designation-composite-optional"><span
                                                class="secno">4.6.2.1</span> <span
                                                class="content">适用性类型标识（可选）</span></a>
                                </ol>
                        </ol>
                    <li>
                        <a href="#expectations"><span class="secno">4.7</span> <span class="content">期望</span></a>
                        <ol class="toc">
                            <li><a href="#expectations-atomic"><span class="secno">4.7.1</span> <span
                                        class="content">原子规则的期望</span></a>
                            <li><a href="#expectations-composite"><span class="secno">4.7.2</span> <span
                                        class="content">复合规则期望</span></a>
                        </ol>
                    <li>
                        <a href="#background"><span class="secno">4.8</span> <span class="content">背景</span></a>
                        <ol class="toc">
                            <li><a href="#assumptions"><span class="secno">4.8.1</span> <span
                                        class="content">假设</span></a>
                            <li><a href="#accessibility-support"><span class="secno">4.8.2</span> <span
                                        class="content">辅助功能支持</span></a>
                            <li><a href="#related-rules"><span class="secno">4.8.3</span> <span
                                        class="content">相关规则（可选）</span></a>
                            <li><a href="#other-resources"><span class="secno">4.8.4</span> <span
                                        class="content">其他资源（可选）</span></a>
                        </ol>
                    <li><a href="#examples"><span class="secno">4.9</span> <span class="content">示例</span></a>
                    <li><a href="#rule-versions"><span class="secno">4.10</span> <span class="content">规则版本</span></a>
                    <li><a href="#act-rules-format-version"><span class="secno">4.11</span> <span class="content">ACT
                                规则格式版本</span></a>
                    <li><a href="#glossary"><span class="secno">4.12</span> <span class="content">术语表</span></a>
                    <li><a href="#issues-list"><span class="secno">4.13</span> <span class="content">问题列表（可选）</span></a>
                    <li>
                        <a href="#implementations"><span class="secno">4.14</span> <span
                                class="content">实现（可选）</span></a>
                        <ol class="toc">
                            <li><a href="#impl-consistency"><span class="secno">4.14.1</span> <span
                                        class="content">一致性</span></a>
                            <li><a href="#impl-partial-consistency"><span class="secno">4.14.2</span> <span
                                        class="content">部分一致性</span></a>
                            <li><a href="#impl-multi-check"><span class="secno">4.14.3</span> <span
                                        class="content">多校验一致性</span></a>
                        </ol>
                    <li><a href="#acknowledgments"><span class="secno">4.15</span> <span
                                class="content">致谢（可选）</span></a>
                </ol>
            <li><a href="#rule-accuracy"><span class="secno">5</span> <span class="content">规则准确性</span></a>
            <li><a href="#harmonization"><span class="secno">6</span> <span class="content">统一化</span></a>
            <li><a href="#privacy-considerations"><span class="secno">7</span> <span class="content">隐私注意事项</span></a>
            <li><a href="#security-considerations"><span class="secno">8</span> <span class="content">安全注意事项</span></a>
            <li><a href="#definitions"><span class="secno">9</span> <span class="content">定义</span></a>
            <li><a href="#appendix-data-example"><span class="secno"></span> <span class="content">附录 1：用 JSON-LD 和 EARL
                        表达 ACT 规则结果</span></a>
            <li>
                <a href="#Acknowledgments"><span class="secno"></span> <span class="content">附录 2：致谢</span></a>
                <ol class="toc">
                    <li><a href="#participants"><span class="secno"></span> <span class="content">参与本文件开发的 AG WG
                                成员</span></a>
                    <li><a href="#enabling-funders"><span class="secno"></span> <span class="content">支持资助方</span></a>
                </ol>
            <li>
                <a href="#Change_History"><span class="secno"></span> <span class="content">附录 3：变更历史</span></a>
                <ol class="toc">
                    <li><a href="#changes-since-FPWD"><span class="secno"></span> <span class="content">自 ACT Rules
                                Format 1.1 首次公开工作草案 以来的变更</span></a>
                    <li><a href="#changes-since-1.0"><span class="secno"></span> <span class="content">自 ACT Rules
                                Format 1.0 以来的变更</span></a>
                </ol>
            <li>
                <a href="#w3c-conformance"><span class="secno"></span> <span class="content">一致性</span></a>
                <ol class="toc">
                    <li><a href="#w3c-conventions"><span class="secno"></span> <span class="content">文档约定</span></a>
                    <li><a href="#w3c-conformant-algorithms"><span class="secno"></span> <span
                                class="content">一致性算法</span></a>
                </ol>
            <li>
                <a href="#index"><span class="secno"></span> <span class="content">索引</span></a>
                <ol class="toc">
                    <li><a href="#index-defined-here"><span class="secno"></span> <span
                                class="content">本规范定义的术语</span></a>
                    <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span
                                class="content">引用定义的术语</span></a>
                </ol>
            <li>
                <a href="#references"><span class="secno"></span> <span class="content">参考文献</span></a>
                <ol class="toc">
                    <li><a href="#normative"><span class="secno"></span> <span class="content">规范性参考</span></a>
                    <li><a href="#informative"><span class="secno"></span> <span class="content">参考性参考</span></a>
                </ol>
        </ol>
    </nav>
    <main>
        <h2 class="heading settled" data-level="1" id="intro"><span class="secno">1. </span><span
                class="content">引言</span><a class="self-link" href="#intro"></a></h2>
        <p>目前已经有许多测试流程和工具，帮助用户测试网页内容是否符合诸如 <a href="https://www.w3.org/WAI/standards-guidelines/wcag/">网页内容辅助功能指南</a> <a
                data-link-type="biblio" href="#biblio-wcag22"
                title="Web Content Accessibility Guidelines (WCAG) 2.2">[WCAG22]</a>
            等辅助功能标准。随着互联网规模和复杂度的日益提升，这些流程与工具对于管理网上资源的辅助功能至关重要。</p>
        <p>ACT 规则格式提供了指导意见，旨在确保如何测试 WCAG 以及其他<a data-link-type="dfn" href="#accessibility-requirements-document"
                id="ref-for-accessibility-requirements-document">辅助功能要求文档</a>的一致解释，并推动辅助功能测试结果的一致性。ACT
            规则格式用于描述手动测试和由辅助功能测试工具执行的自动测试。</p>
        <p>记录如何测试<a data-link-type="dfn" href="#accessibility-requirement"
                id="ref-for-accessibility-requirement">辅助功能要求</a>，有助于实现测试过程的透明化并获得可复现的测试结果。ACT
            规则格式定义了这些测试描述的要求，这些描述称为辅助功能一致性测试规则（ACT 规则）。</p>
        <p>ACT 规则是用通俗语言描述如何针对辅助功能要求的某一具体方面测试某种类型内容的方法。ACT 规则说明它适用于何种内容，以及哪些条件适用于被测元素从而满足该规则的所有期望。在 WCAG 语境下，ACT
            规则用于测试未满足成功标准的情形，这些失败通常在 <a href="https://www.w3.org/TR/WCAG22/#wcag-2-layers-of-guidance">常见错误</a>
            中予以说明。ACT 规则专为测试流程编写，通常比常见错误更为具体。</p>
        <p>ACT 规则格式定义了每个规则必须包含的信息类型和结构。ACT 规则的具体结构定义见 <a href="#act-rule-structure">ACT 规则结构</a> 部分。每条 ACT
            规则还需包含通俗描述，被测内容类型、执行的测试及预期结果。若测试结果影响一致性，则该规则需记录所测试的具体要求。测试产生的结果可以用于判断是否符合相关要求。此外，ACT
            规则还会配有示例，确保规则的实现可正确判定预期结果。</p>
        <h2 class="heading settled" data-level="2" id="scope"><span class="secno">2. </span><span
                class="content">适用范围</span><a class="self-link" href="#scope"></a></h2>
        <p>本规范所定义的 ACT 规则格式，设计用于测试使用 Web 技术创建的内容，例如 <a href="https://html.spec.whatwg.org/multipage/">超文本标记语言</a> <a
                data-link-type="biblio" href="#biblio-html" title="HTML Standard">[HTML]</a>、<a
                href="https://www.w3.org/TR/CSS/">层叠样式表</a> <a data-link-type="biblio" href="#biblio-css-2018"
                title="CSS Snapshot 2018">[css-2018]</a>、<a
                href="https://www.w3.org/WAI/standards-guidelines/aria/">辅助功能富互联网应用</a> <a data-link-type="biblio"
                href="#biblio-wai-aria" title="Accessible Rich Internet Applications (WAI-ARIA) 1.0">[WAI-ARIA]</a>、<a
                href="https://www.w3.org/TR/SVG/">可缩放矢量图形</a> <a data-link-type="biblio" href="#biblio-svg2"
                title="Scalable Vector Graphics (SVG) 2">[SVG2]</a>、<a href="https://www.w3.org/TR/epub/">EPUB 3</a> <a
                data-link-type="biblio" href="#biblio-epub-33" title="EPUB 3.3">[epub-33]</a> 等。ACT
            规则格式本身技术无关，也可用于描述其它技术的测试规则。</p>
        <p>ACT 规则格式可用于描述专门测试 <a data-link-type="dfn" href="#accessibility-requirement"
                id="ref-for-accessibility-requirement①">辅助功能要求</a>的 ACT 规则，例如《网页内容辅助功能指南》 <a data-link-type="biblio"
                href="#biblio-wcag22" title="Web Content Accessibility Guidelines (WCAG) 2.2">[WCAG22]</a>
            中界定的这些要求专为网页内容设计。其他适用于 Web 技术的辅助功能要求同样可用 ACT 规则进行测试。例如，可开发 ACT 规则测试基于 Web 的用户代理是否符合 <a
                href="https://www.w3.org/WAI/standards-guidelines/uaag/">用户代理辅助功能指南</a> <a data-link-type="biblio"
                href="#biblio-uaag20" title="User Agent Accessibility Guidelines (UAAG) 2.0">[UAAG20]</a>。但 ACT
            规则格式或许并不总适用于描述其它类型辅助功能要求的测试。</p>
        <h3 class="heading settled" data-level="2.1" id="backward-compatible"><span class="secno">2.1. </span><span
                class="content">向后兼容性</span><a class="self-link" href="#backward-compatible"></a></h3>
        <p>ACT 规则格式 1.1 与 1.0 在很大程度上是向后兼容的，但并非完全兼容。ACT 规则格式 1.1 引入了 1.0 未包含的新要求，也允许少数 1.0 不允许的情况，如主观性的 <a
                href="#applicability">适用性</a>。详情见 <a href="#Change_History">变更历史</a>。</p>
        <h2 class="heading settled" data-level="3" id="rule-types"><span class="secno">3. </span><span
                class="content">ACT 规则类型</span><a class="self-link" href="#rule-types"></a></h2>
        <p>在辅助功能领域中，常有不同技术方案可用于让同类内容变得可访问。例如，HTML 中有多种方式赋予 <code>img</code> 元素可访问名称。若在一条规则中测试多方案，则规则往往过于复杂，难以理解和维护。ACT
            规则格式通过设定规则类型来解决这一问题：</p>
        <ul>
            <li data-md>
                <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                        id="atomic-rules">原子规则</dfn>：描述如何测试某一具体解决方案。它对需测试的元素、节点或其他 <a data-link-type="dfn"
                        href="#test-subject"
                        id="ref-for-test-subject">测试对象</a>的“部分”有明确界定，并规定何时通过或不通过该规则。原子规则应保持简明与“原子性”，即只测试单一“条件”，且不依赖其它规则的
                    <a data-link-type="dfn" href="#outcome" id="ref-for-outcome">结果</a>。
                </p>
            <li data-md>
                <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="composite-rules">复合规则</dfn>：描述如何将多个 <a
                        data-link-type="dfn" href="#outcome" id="ref-for-outcome①">原子规则</a>的结果组合为每个 <a
                        data-link-type="dfn" href="#test-target"
                        id="ref-for-test-target">测试目标</a>的最终结果。一个复合规则可以有多个“条件”，分别由不同的原子规则测试；其逻辑说明不同条件的组合如何得出单一结果。</p>
        </ul>
        <p>复合规则不能包含其它复合规则。若需嵌套复合规则，应直接将相关的原子规则组合进新的复合规则。</p>
        <aside class="example" id="example-2ad07d50">
            <a class="self-link" href="#example-2ad07d50"></a>
            <header>在复合规则中使用多个输入规则：</header>
            <blockquote>
                <p>每个 HTML <code>video</code> 元素至少符合下列某条规则的全部期望：</p>
                <ul>
                    <li>视频元素有转录文本
                    <li>视频元素有音频描述
                    <li>视频元素有描述轨道
                </ul>
            </blockquote>
        </aside>
        <p>并非所有原子规则都需隶属于复合规则。当需要综合多个原子规则的<a data-link-type="dfn" href="#outcome" id="ref-for-outcome②">测试结果</a>以判断某个<a
                data-link-type="dfn" href="#test-subject" id="ref-for-test-subject①">测试对象</a>是否未满足某项<a
                data-link-type="dfn" href="#accessibility-requirement"
                id="ref-for-accessibility-requirement②">辅助功能要求</a>时，才用复合规则。</p>
        <p>原子规则和复合规则的分离形成职责划分。原子规则用于测试某种解决方案的实现是否正确，复合规则用以判定其他原子规则的多个<a data-link-type="dfn" href="#outcome"
                id="ref-for-outcome③">结果</a>是否部分或全部满足辅助功能要求。</p>
        <h2 class="heading settled" data-level="4" id="act-rule-structure"><span class="secno">4. </span><span
                class="content">ACT 规则结构</span><a class="self-link" href="#act-rule-structure"></a></h2>
        <p>一条 ACT 规则<em class="rfc2119">必须</em>至少包含以下项目：</p>
        <ul>
            <li data-md>
                <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="descriptive-title">描述性标题</dfn></p>
            <li data-md>
                <p><a href="#rule-identifier">规则标识符</a></p>
            <li data-md>
                <p><a href="#rule-description">规则描述</a></p>
            <li data-md>
                <p><a href="#rule-type">规则类型</a></p>
            <li data-md>
                <p><a href="#accessibility-requirements-mapping">辅助功能需求映射</a></p>
            <li data-md>
                <p><a href="#input">规则输入</a>，可为下列之一：</p>
                <ul>
                    <li data-md>
                        <p><a href="#input-aspects">输入方面</a>（用于原子规则）或</p>
                    <li data-md>
                        <p><a href="#input-rules">输入规则</a>（用于复合规则）</p>
                </ul>
            <li data-md>
                <p><a href="#applicability">适用性</a></p>
            <li data-md>
                <p><a href="#expectations">期望</a></p>
            <li data-md>
                <p><a href="#background">背景</a></p>
                <ul>
                    <li data-md>
                        <p><a href="#assumptions">假设</a></p>
                    <li data-md>
                        <p><a href="#accessibility-support">无障碍支持</a></p>
                    <li data-md>
                        <p><a href="#related-rules">相关规则（可选）</a></p>
                    <li data-md>
                        <p><a href="#other-resources">其他资源（可选）</a></p>
                </ul>
            <li data-md>
                <p><a href="#examples">示例</a></p>
            <li data-md>
                <p><a href="#rule-versions">规则版本</a></p>
            <li data-md>
                <p><a href="#act-rules-format-version">ACT 规则格式版本</a></p>
            <li data-md>
                <p><a href="#glossary">术语表</a></p>
        </ul>
        <p>一条 ACT 规则还可包含：</p>
        <ul>
            <li data-md>
                <p>背景下的 <a href="#related-rules">相关规则</a>（可选）</p>
            <li data-md>
                <p>背景下的 <a href="#other-resources">其他资源</a>（可选）</p>
            <li data-md>
                <p><a href="#issues-list">问题列表</a>（可选）</p>
            <li data-md>
                <p><a href="#implementations">实现</a>（可选）</p>
            <li data-md>
                <p><a href="#acknowledgments">致谢</a>（可选）</p>
        </ul>
        <p>ACT 规则格式并未规定 ACT 规则必须采用何种文件格式（如 HTML、DOCX、PDF 等）。但 ACT 规则<em class="rfc2119">必须</em>编写在符合《网页内容辅助功能指南》 <a
                data-link-type="biblio" href="#biblio-wcag22"
                title="Web Content Accessibility Guidelines (WCAG) 2.2">[WCAG22]</a> 或同等标准的文档中。这样可确保 ACT
            规则对残障人士也是可访问的。ACT 规则<a href="#examples">示例</a>允许包含不可访问内容。如果任何示例存在<a
                href="https://www.w3.org/TR/WCAG22/#cc5">WCAG 2.2 第 5.2.5 节 非干扰性</a>中列出的辅助功能问题，用户<em
                class="rfc2119">必须</em>提前获得警告。ACT 规则应采用<a data-link-type="dfn"
                href="https://www.w3.org/TR/i18n-glossary/#dfn-localisation"
                id="ref-for-dfn-localisation">可本地化</a>格式，从而规则可包含多种语言版本或可被翻译。</p>
        <h3 class="heading settled" data-level="4.1" id="rule-identifier"><span class="secno">4.1. </span><span
                class="content">规则标识符</span><a class="self-link" href="#rule-identifier"></a></h3>
        <p>一条 ACT 规则<em class="rfc2119">必须</em>拥有在其规则集内唯一的标识符。该标识符可以是任意文本、URL 或数据库编号等。</p>
        <aside class="example" id="example-300c7989">
            <a class="self-link" href="#example-300c7989"></a>
            <header>用作文件名的标识符；包含技术目录及带有元素名或属性的句柄：</header>
            <blockquote>
                <ul>
                    <li>html+svg/video-alternative
                    <li>html+svg/meta-no-refresh
                    <li>html+svg/unique-id
                </ul>
            </blockquote>
        </aside>
        <p>除标识符外，每个 ACT 规则的新版本<em class="rfc2119">必须</em>以日期或编号进行版本管理。需能查阅该规则前一版本的引用。规则更新时<em
                class="rfc2119">不得</em>更改标识符。若为重大变更，则应创建带新标识符的新规则，并对旧规则进行弃用。</p>
        <aside class="example" id="example-c9b253b3">
            <a class="self-link" href="#example-c9b253b3"></a>
            <header>规则的更新：</header>
            <blockquote>
                <p>如果将最初关于按钮的规则，更新为同时适用于链接、菜单项和标签，则按钮规则将被弃用。作为替代，会创建新规则，适用于所有这些元素。</p>
            </blockquote>
        </aside>
        <h3 class="heading settled" data-level="4.2" id="rule-description"><span class="secno">4.2. </span><span
                class="content">规则描述</span><a class="self-link" href="#rule-description"></a></h3>
        <p>一条 ACT 规则<em class="rfc2119">必须</em>有通俗易懂的规则描述，简要说明该规则的作用。</p>
        <p>无论规则以何种数据格式撰写，描述内容都应包含指明语言和基础段落方向的元数据。多数标记语言或文档格式都具备相关标识方式。更多详情见 <a data-link-type="biblio"
                href="#biblio-string-meta"
                title="Strings on the Web: Language and Direction Metadata">[string-meta]</a>。</p>
        <aside class="example" id="example-ebfedd69">
            <a class="self-link" href="#example-ebfedd69"></a>
            <header>规则描述：</header>
            <blockquote>
                <p>本规则检查 HTML 页面是否有标题。</p>
            </blockquote>
        </aside>
        <h3 class="heading settled" data-level="4.3" id="rule-type"><span class="secno">4.3. </span><span
                class="content">规则类型</span><a class="self-link" href="#rule-type"></a></h3>
        <p>一条 ACT 规则<em class="rfc2119">必须</em>指定规则类型，必须为下列之一：</p>
        <ul>
            <li>原子规则
            <li>复合规则
        </ul>
        <p>详细定义参见 <a href="#rule-types">规则类型</a> 部分。</p>
        <h3 class="heading settled" data-level="4.4" id="accessibility-requirements-mapping"><span class="secno">4.4.
            </span><span class="content">辅助功能需求映射</span><a class="self-link"
                href="#accessibility-requirements-mapping"></a></h3>
        <p>当某条 ACT 规则用于测试一项或多项<a data-link-type="dfn" href="#accessibility-requirements-document"
                id="ref-for-accessibility-requirements-document①">辅助功能要求文档</a>的符合性时，规则<em
                class="rfc2119">必须</em>枚举所有当该规则的一项或多项<a data-link-type="dfn" href="#outcome"
                id="ref-for-outcome④">结果</a>为<code>未通过</code>时未被满足的<a data-link-type="dfn"
                href="#accessibility-requirement" id="ref-for-accessibility-requirement③">辅助功能要求</a>。规则<em
                class="rfc2119">可以</em>列出因规则结果为未通过而可能不被满足的要求。辅助功能要求分为两类：</p>
        <ul>
            <li data-md>
                <p><a href="#conformance-requirements">一致性要求</a></p>
            <li data-md>
                <p><a href="#secondary-requirements">次要要求</a></p>
        </ul>
        <p>映射中的每条<a data-link-type="dfn" href="#accessibility-requirement"
                id="ref-for-accessibility-requirement④">辅助功能要求</a> <em class="rfc2119">必须</em>包含：</p>
        <ol>
            <li data-md>
                <p>要求的名称、标题、标识符或摘要之一，及</p>
            <li data-md>
                <p><a data-link-type="dfn" href="#accessibility-requirements-document"
                        id="ref-for-accessibility-requirements-document②">辅助功能要求文档</a>的名称，及
                </p>
            <li data-md>
                <p>如有，<a data-link-type="dfn" href="#accessibility-requirements-document"
                        id="ref-for-accessibility-requirements-document③">辅助功能要求文档</a>的链接或参考，及</p>
            <li data-md>
                <p>如有，对应的符合性级别，及</p>
            <li data-md>
                <p>指明该要求是一致性要求还是次要要求。</p>
        </ol>
        <h4 class="heading settled" data-level="4.4.1" id="outcome-mapping"><span class="secno">4.4.1. </span><span
                class="content">结果映射</span><a class="self-link" href="#outcome-mapping"></a></h4>
        针对映射中的每条一致性要求，ACT 规则<em class="rfc2119">必须</em>说明规则的<a data-link-type="dfn" href="#outcome"
            id="ref-for-outcome⑤">结果</a>对该<a data-link-type="dfn" href="#test-subject"
            id="ref-for-test-subject②">测试对象</a>满足辅助功能要求的影响。
        <h5 class="heading settled" data-level="4.4.1.1" id="conformance-requirements"><span class="secno">4.4.1.1.
            </span><span class="content">一致性要求</span><a class="self-link" href="#conformance-requirements"></a></h5>
        <p>当规则用于测试某一具体辅助功能要求时，仅在以下两个条件均满足时，该要求被映射为<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="conformance-requirement">一致性要求</dfn>：</p>
        <ul>
            <li data-md>
                <p>未通过结果：当某一测试对象的一个或多个结果为<code>未通过</code>时，该辅助功能要求对该测试对象被视为<dfn class="dfn-paneled" data-dfn-type="dfn"
                        data-noexport id="not-satisfied">未满足</dfn>，且</p>
            <li data-md>
                <p>通过或不适用结果：当所有结果均为<code>通过</code>或<code>不适用</code>时，该辅助功能要求对测试对象可视为<dfn class="dfn-paneled"
                        data-dfn-type="dfn" data-noexport id="satisfied">已满足</dfn>或<dfn class="dfn-paneled"
                        data-dfn-type="dfn" data-noexport id="further-testing-is-needed">需进一步测试</dfn>。
                </p>
        </ul>
        <p>能够判定辅助功能要求已满足的规则被称为<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="satisfying-tests">满足性测试</dfn>。</p>
        <ul>
            <li data-md>
                <p>通过：当所有结果均为<code>通过</code>时，该辅助功能要求对测试对象<em>已满足</em>。</p>
        </ul>
        <div class="note" role="note">
            <p><strong>注意：</strong> 在 <a href="https://www.w3.org/WAI/standards-guidelines/wcag/">网页内容辅助功能指南</a> <a
                    data-link-type="biblio" href="#biblio-wcag22"
                    title="Web Content Accessibility Guidelines (WCAG) 2.2">[WCAG22]</a>
                中，成功标准的评估不会直接体现为<code>通过</code>、<code>未通过</code>或<code>不适用</code>。而是体现为<em>已满足</em>（或未满足）。详见 <a
                    href="https://www.w3.org/TR/WCAG22/#dfn-satisfies">WCAG 2.2
                    定义：满足成功标准</a>。若某一成功标准<em>未被满足</em>，仅在网页有合规的备选版本时才符合规范，相关描述见 <a
                    href="https://www.w3.org/TR/WCAG22/#cc1">WCAG 2.2 一致性要求 1</a>。
            </p>
        </div>
        <aside class="example" id="example-36573a50">
            <a class="self-link" href="#example-36573a50"></a>
            <header>用于检测图片按钮是否有辅助名称的规则，将成功标准 1.1.1 非文本内容 和 4.1.2 名称、角色、值 映射为一致性要求：</header>
            <blockquote>
                <ul>
                    <li>
                        <a href="https://www.w3.org/TR/WCAG22/#non-text-content">成功标准 1.1.1：非文本内容</a>
                        <ul>
                            <li><strong>符合性必需</strong>，适用 WCAG 2.0、2.1 与 2.2 的 A 级及以上
                            <li>
                                结果映射：
                                <ul>
                                    <li>任一 <code>未通过</code> 结果：未满足
                                    <li>全为 <code>通过</code> 结果：需进一步测试
                                    <li>出现 <code>不适用</code> 结果：需进一步测试
                                </ul>
                        </ul>
                    <li>
                        <a href="https://www.w3.org/TR/WCAG22/#name-role-value">成功标准 4.1.2：名称、角色、值</a>
                        <ul>
                            <li><strong>符合性必需</strong>，适用 WCAG 2.0、2.1 与 2.2 的 A 级及以上
                            <li>
                                结果映射：
                                <ul>
                                    <li>任一 <code>未通过</code> 结果：未满足
                                    <li>全为 <code>通过</code> 结果：需进一步测试
                                    <li>出现 <code>不适用</code> 结果：需进一步测试
                                </ul>
                        </ul>
                </ul>
            </blockquote>
        </aside>
        <h5 class="heading settled" data-level="4.4.1.2" id="secondary-requirements"><span class="secno">4.4.1.2.
            </span><span class="content">次要要求</span><a class="self-link" href="#secondary-requirements"></a></h5>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="secondary requirement" data-noexport
                id="secondary-requirement">次要辅助功能要求</dfn>是与规则相关但规则本身并未设计用于测试的要求。规则的结果会影响辅助功能要求的判断，但该规则并不针对要求的符合性进行测试。这种相关性通常导致规则的部分示例不满足次要辅助功能要求。
        </p>
        <p>当规则并非设计用于测试某辅助功能要求，或者规则的未通过结果仍需进一步测试该要求时，规则<em class="rfc2119">可以</em>将该辅助功能要求映射为次要要求。映射为次要要求的 ACT 规则<em
                class="rfc2119">必须</em>说明该要求为何为次要要求。</p>
        <p>当规则是为测试某项辅助功能要求而设计时，<a href="#accessibility-support">辅助功能支持</a>方面的差异<em
                class="rfc2119">不能</em>成为将其视为次要辅助功能要求的理由。</p>
        <p>部分情景下规则会有次要要求：</p>
        <p><strong>情景 1</strong>：规则较某要求宽松</p>
        <p>规则只测试了辅助功能最低要求，而存在更严格的要求。规则的未通过结果能确定更严格的辅助功能要求未被满足，但通过结果未必能判定更严格要求已满足。即使规则结果为通过，辅助功能要求也可能未被满足，更严格的要求视为次要要求。
        </p>
        <aside class="example" id="example-f2635d23">
            <a class="self-link" href="#example-f2635d23"></a>

            <header>测试文本最小对比度的规则</header>
            <blockquote>
                此规则用于测试成功标准 1.4.3 最小对比度（AA）。更严格的要求，即成功标准 1.4.6 增强对比度（AAA），当规则结果为未通过时一定未满足，当规则结果为通过时也可能未满足。本规则的映射如下：

                <ul>
                    <li>一致性要求：成功标准 1.4.3 最小对比度
                    <li>次要要求：成功标准 1.4.6 增强对比度
                        <ul>
                            <li>说明：此成功标准比本规则<strong>更严格</strong>，因为其要求更高的最小对比度。一些通过的示例也不满足此成功标准。
                        </ul>
                </ul>
            </blockquote>
        </aside>
        <p><strong>情景 2</strong>：规则比某要求更严格</p>
        <p>规则设计用于测试某辅助功能要求的特定方案，但该要求也可通过规则未涵盖的其他方案来满足，此时规则的未通过结果不能判定辅助功能要求未被满足，因为还需进行进一步测试；而通过结果则能确定要求已满足。该辅助功能要求为次要要求。
        </p>
        <aside class="example" id="example-4593015e">
            <a class="self-link" href="#example-4593015e"></a>

            <header>测试可聚焦元素是否通过标准导航不存在键盘陷阱的规则</header>
            <blockquote>
                此规则用于测试可满足成功标准 2.1.2：无键盘陷阱的特定方案。规则未测试其他可能满足成功标准的方案，如使用非标准导航。其未通过结果不能确定辅助功能要求<a data-link-type="dfn"
                    href="#not-satisfied" id="ref-for-not-satisfied">未被满足</a>。本规则的映射如下：

                <ul>
                    <li>次要要求：成功标准 2.1.2：无键盘陷阱
                        <ul>
                            <li>说明：此成功标准比本规则<strong>更宽松</strong>，因为此标准允许用非标准的按键导航离开键盘陷阱。一些未通过的示例仍可能满足该成功标准。
                        </ul>
                </ul>
            </blockquote>
        </aside>
        <p>规则设计用于测试一项辅助功能要求，且存在较宽松的要求。此时规则的通过结果能判定较宽松要求已满足，而未通过结果未必能判定该要求未被满足。即使规则结果为未通过，辅助功能要求也可能被满足。较宽松的辅助功能要求为次要要求。
        </p>
        <aside class="example" id="example-996e53f3">
            <a class="self-link" href="#example-996e53f3"></a>

            <header>测试增强对比度的规则</header>
            <blockquote>
                此规则用于测试成功标准 1.4.6 增强对比度（AAA）。较宽松的要求，即成功标准 1.4.3 最小对比度（AA），规则结果为通过时一定已满足，规则结果为未通过时也可能被满足。本规则的映射如下：

                <ul>
                    <li>一致性要求：成功标准 1.4.6 增强对比度
                    <li>次要要求：成功标准 1.4.3 最小对比度
                        <ul>
                            <li>说明：此成功标准比本规则<strong>更宽松</strong>，要求的最小对比度较低。一些未通过示例可能其实满足该标准。
                        </ul>
                </ul>
            </blockquote>
        </aside>
        <p><strong>情景 3</strong>：规则可能影响辅助功能要求判定，但未用于测试该要求的符合性</p>
        <p>规则用于测试某辅助功能要求，在某些情况下，其他辅助功能要求也会适用。此时，这些其他辅助功能要求有时满足，有时不满足，因为它们在本规则中并非总是适用，故为次要要求。</p>
        <aside class="example" id="example-474abc60">
            <a class="self-link" href="#example-474abc60"></a>

            <header>测试链接有非空辅助名称的规则</header>
            <blockquote>
                此规则用于测试链接的辅助功能要求 4.1.2 名称、角色、值（A 级），2.4.4 链接目的（上下文中）（A 级），2.4.9 链接目的（仅链接）（AAA 级）。在图片映射中，定义区域的 &lt;area>
                元素即为链接也是图片。对 &lt;area> 元素测试非空辅助名称会对应另一个辅助功能要求 1.1.1 非文本内容。由于此规则测试所有链接，而成功标准 1.1.1 只适用于某些链接，因此本规则的映射如下：

                <ul>
                    <li>一致性要求：成功标准 4.1.2 名称、角色、值（A 级），2.4.4 链接目的（上下文中）（A 级），2.4.9 链接目的（仅链接）（AAA 级）
                    <li>次要要求：成功标准 1.1.1 非文本内容
                        <ul>
                            <li>说明：该成功标准与本规则<strong>相关</strong>，因为 HTML &lt;area> 元素既是链接又是非文本内容。多数未通过示例已满足该标准。
                        </ul>
                </ul>
            </blockquote>
        </aside>
        <aside class="example" id="example-e65bb36c">
            <a class="self-link" href="#example-e65bb36c"></a>

            <header>测试带有显式角色的元素也需指定所有必需状态和属性的规则</header>
            <blockquote>
                此规则用于测试 WAI-ARIA 的要求。在部分情况下，该规则未通过可能导致 WCAG 2 成功标准 4.1.2 名称、角色、值未被满足，但并不总是如此。本规则映射如下：

                <ul>
                    <li>一致性要求：WAI-ARIA 1.2
                    <li>
                        次要要求：成功标准 4.1.2 名称、角色、值

                        <ul>
                            <li>背景部分说明：成功标准 4.1.2 名称、角色、值被映射为次要要求，因为它仅适用于用户控件。
                        </ul>
                </ul>
            </blockquote>
        </aside>
        <h4 class="heading settled" data-level="4.4.2" id="mapping-outside-wcag"><span class="secno">4.4.2. </span><span
                class="content">WCAG 之外的映射</span><a class="self-link" href="#mapping-outside-wcag"></a></h4>
        <p>ACT 规则可用于测试非 W3C 辅助功能标准中的辅助功能要求，比如 <a href="https://html.spec.whatwg.org/multipage/">超文本标记语言</a> <a
                data-link-type="biblio" href="#biblio-html" title="HTML Standard">[HTML]</a> 中的辅助功能要求，或如 <a
                href="https://disic.github.io/rgaa_referentiel_en/criteria.html">RGAA 3 2016</a> 方法学中的测试。ACT 规则<em
                class="rfc2119">必须</em>指明所映射的<a data-link-type="dfn" href="#accessibility-requirement"
                id="ref-for-accessibility-requirement⑤">辅助功能要求</a>在其对应的<a data-link-type="dfn"
                href="#accessibility-requirements-document"
                id="ref-for-accessibility-requirements-document④">辅助功能要求文档</a>是否为符合性必需。例如，WCAG
            充分技术，或包含要求和可选“最佳实践”的企业规范。必须清晰区分何为必需、何为可选。</p>
        <aside class="example" id="example-47818dbf">
            <a class="self-link" href="#example-47818dbf"></a>

            <header>测试每个 <code>img</code> 元素都有 <code>alt</code> 属性的规则的辅助功能要求映射：</header>
            <blockquote>
                <ul>
                    <li>
                        <a href="https://www.w3.org/TR/WCAG20-TECHS/H37.html">技术 H37：img 元素使用 alt 属性</a>
                        <ul>
                            <li><strong>不要求</strong>符合 WCAG 2.0、2.1、2.2 任意级别
                            <li>
                                结果映射：
                                <ul>
                                    <li>任一 <code>未通过</code> 结果：未满足
                                    <li>全为 <code>通过</code> 结果：满足
                                    <li>出现 <code>不适用</code> 结果：满足
                                </ul>
                        </ul>
                    <li>
                        <a href="https://disic.github.io/rgaa_referentiel_en/criteria.html#test-1-1-1">RGAA
                            3，第1.1.1条测试：每张图片是否有文本替代</a>
                        <ul>
                            <li><strong>符合性必需</strong>，适用 RGAA 3 的 A 级及以上
                            <li>
                                结果映射：
                                <ul>
                                    <li>任一 <code>未通过</code> 结果：未满足
                                    <li>全为 <code>通过</code> 结果：满足
                                    <li>出现 <code>不适用</code> 结果：满足
                                </ul>
                        </ul>
                </ul>
            </blockquote>
        </aside>
        <h4 class="heading settled" data-level="4.4.3" id="rules-without-accessibility-requirements"><span
                class="secno">4.4.3. </span><span class="content">无辅助功能要求的规则</span><a class="self-link"
                href="#rules-without-accessibility-requirements"></a></h4>
        <p>如果规则未与任何<a data-link-type="dfn" href="#accessibility-requirement"
                id="ref-for-accessibility-requirement⑥">辅助功能要求</a>映射，辅助功能要求映射仅包含说明其不要求符合对应的<a data-link-type="dfn"
                href="#accessibility-requirements-document"
                id="ref-for-accessibility-requirements-document⑤">辅助功能要求文档</a>。这常见于复合规则中的原子规则。</p>
        <aside class="example" id="example-39b9e5ad">
            <a class="self-link" href="#example-39b9e5ad"></a>

            <header>测试 <code>role=alert</code> 是否用于满足 <a href="https://www.w3.org/TR/WCAG22/#status-messages">WCAG 2.2
                    成功标准 4.1.3 状态消息</a>的规则：</header>
            <blockquote>
                <p>此规则<strong>不要求</strong>符合 WCAG 2.2 任意级别。</p>
            </blockquote>
        </aside>
        <p>若<code>未通过</code> <a data-link-type="dfn" href="#outcome" id="ref-for-outcome⑥">结果</a>无法与任何<a
                data-link-type="dfn" href="#accessibility-requirement"
                id="ref-for-accessibility-requirement⑦">辅助功能要求</a>映射，则辅助功能要求映射中<em class="rfc2119">不能</em>有辅助功能要求。可选的<a
                href="#background">背景部分</a>可用于列出<a data-link-type="dfn" href="#accessibility-requirements-document"
                id="ref-for-accessibility-requirements-document⑥">相关辅助功能要求文档</a>，但规则并非针对这些文档的失败测试。</p>
        <h4 class="heading settled" data-level="4.4.4" id="external-accessibility-requirements-mapping"><span
                class="secno">4.4.4. </span><span class="content">外部辅助功能要求映射</span><a class="self-link"
                href="#external-accessibility-requirements-mapping"></a></h4>
        <p>本节<em>非规范性</em>。</p>
        <p>虽然规则通常为一个或少量<a data-link-type="dfn" href="#accessibility-requirements-document"
                id="ref-for-accessibility-requirements-document⑦">辅助功能要求文档</a>而设计，但其它要求文档也可能映射到这些 ACT 规则。例如，一些规则为<a
                href="https://www.w3.org/WAI/standards-guidelines/wcag/">网页内容辅助功能指南</a> <a data-link-type="biblio"
                href="#biblio-wcag22"
                title="Web Content Accessibility Guidelines (WCAG) 2.2">[WCAG22]</a>编写，但也可能映射到公司的内部辅助功能政策。针对这种情况，可以创建外部辅助功能要求映射。外部映射是在
            ACT 规则的辅助功能要求映射基础上新增其它要求文档的映射，从而避免仅为改变映射而重复编写规则。</p>
        <h3 class="heading settled" data-level="4.5" id="input"><span class="secno">4.5. </span><span
                class="content">规则输入</span><a class="self-link" href="#input"></a></h3>
        <p>要使用 ACT 规则评估内容，规则需要来自<a data-link-type="dfn" href="#test-subject"
                id="ref-for-test-subject③">测试对象</a>的某些信息，这些就是规则的输入。需要哪些输入已明示，以帮助测试人员理解使用规则的能力需求。<a data-link-type="dfn"
                href="#atomic-rules" id="ref-for-atomic-rules①">原子规则</a>与<a data-link-type="dfn" href="#composite-rules"
                id="ref-for-composite-rules">复合规则</a>的输入不同。
        </p>
        <ul>
            <li data-md>
                <p>原子规则有 <a href="#input-aspects">输入方面</a></p>
            <li data-md>
                <p>复合规则有 <a href="#input-rules">输入规则</a></p>
        </ul>
        <h4 class="heading settled" data-level="4.5.1" id="input-aspects"><span class="secno">4.5.1. </span><span
                class="content">输入方面（仅原子规则）</span><a class="self-link" href="#input-aspects"></a>
        </h4>
        <p>输入方面是一种<a data-link-type="dfn" href="#test-subject"
                id="ref-for-test-subject④">测试对象</a>的独立部分。将内容渲染给终端用户通常涉及多个技术，原子规则可能需要所有或部分技术相关的输入。例如，有的规则需直接操作服务器和客户端间交换的<a
                href="https://httpwg.org/specs/rfc9112.html">超文本传输协议</a> <a data-link-type="biblio"
                href="#biblio-http11" title="HTTP/1.1">[http11]</a>消息，有的规则需操作浏览器暴露的<a
                href="https://dom.spec.whatwg.org">文档对象模型</a> <a data-link-type="biblio" href="#biblio-dom"
                title="DOM Standard">[DOM]</a>树。</p>
        <p><a data-link-type="dfn" href="#atomic-rules" id="ref-for-atomic-rules③">原子规则</a><em
                class="rfc2119">必须</em>明确列出用于规则<a href="#applicability-atomic">适用性</a>和 <a
                href="#expectations-atomic">期望</a>判定的输入方面。规则可同时操作多个方面，如 HTTP 消息与 DOM 树。</p>
        <p>部分输入方面在规范中有明确定义，如 HTTP 消息、DOM 树及 CSS 样式 <a data-link-type="biblio" href="#biblio-css-2018"
                title="CSS Snapshot 2018">[css-2018]</a>等。对于这些方面，可引用<a
                href="https://www.w3.org/TR/act-rules-aspects/">通用输入方面说明</a>的相关章节作为描述。若输入方面并无清晰定义，则 ACT 规则<em
                class="rfc2119">必须</em>详细说明或引用权威描述。</p>
        <aside class="example" id="example-e0405914">
            <a class="self-link" href="#example-e0405914"></a>

            <header>视频有转录文本规则的输入方面：</header>
            <blockquote>
                <ul>
                    <li>DOM 树
                    <li>CSS 样式
                    <li>音频输出
                    <li>视觉输出
                </ul>
            </blockquote>
        </aside>
        <aside class="example" id="example-65ee72de">
            <a class="self-link" href="#example-65ee72de"></a>

            <header>检查是否使用（特定语言）通用链接文本如「点击这里」「更多」的规则输入方面：</header>
            <blockquote>
                <ul>
                    <li>DOM 树
                    <li>CSS 样式
                    <li>语言
                </ul>
            </blockquote>
        </aside>
        <p>输入方面的服务方式无关紧要。例如 DOM 树可通过 HTTP 以 HTML 形式提供，也可打包为 <a href="https://www.w3.org/TR/epub/">EPUB
                出版物</a>的多页，或者通过<a href="https://facebook.github.io/jsx/">JSX 源文件</a>推断。所有仅以 DOM 树为输入方面的规则均适用于这些技术。</p>
        <h4 class="heading settled" data-level="4.5.2" id="input-rules"><span class="secno">4.5.2. </span><span
                class="content">输入规则（仅复合规则）</span><a class="self-link" href="#input-rules"></a>
        </h4>
        <p><a data-link-type="dfn" href="#composite-rules" id="ref-for-composite-rules①">复合规则</a>使用 <a
                data-link-type="dfn" href="#outcome" id="ref-for-outcome⑦">原子规则</a>的结果，并对此进行逻辑处理，从而为每个 <a
                data-link-type="dfn" href="#test-target" id="ref-for-test-target①">测试目标</a>得出单一结果。复合规则<em
                class="rfc2119">必须</em>列出所有用于 <a href="#expectations-composite">期望</a> 的原子规则的 <a
                href="#rule-identifier">标识符</a> 及 <a data-link-type="dfn" href="#descriptive-title"
                id="ref-for-descriptive-title">描述性标题</a>。输入规则即对复合规则的输入加以说明，方式类似于为原子规则的输入方面加以说明。</p>
        <h3 class="heading settled" data-level="4.6" id="applicability"><span class="secno">4.6. </span><span
                class="content">适用性</span><a class="self-link" href="#applicability"></a></h3>
        <p>适用性描述了将在<a data-link-type="dfn" href="#test-subject" id="ref-for-test-subject⑤">测试对象</a>中测试哪些部分。</p>
        <h4 class="heading settled" data-level="4.6.1" id="applicability-atomic"><span class="secno">4.6.1. </span><span
                class="content">原子规则的适用性</span><a class="self-link" href="#applicability-atomic"></a></h4>
        <p>适用性为<a data-link-type="dfn" href="#atomic-rules" id="ref-for-atomic-rules⑤">原子规则</a>的必需部分。<em
                class="rfc2119">必须</em>精确描述规则适用的<a data-link-type="dfn" href="#test-subject"
                id="ref-for-test-subject⑥">测试对象</a>部分。例如，DOM <a data-link-type="biblio" href="#biblio-dom"
                title="DOM Standard">[DOM]</a> 树中的特定节点，或 HTML <a data-link-type="biblio" href="#biblio-html"
                title="HTML Standard">[HTML]</a> 文档中闭合不正确的标签。这些被称为<a data-link-type="dfn" href="#test-target"
                id="ref-for-test-target②">测试目标</a>。适用性描述<em class="rfc2119">必须</em>只用规则的 <a
                href="#input-aspects">输入方面</a>所提供的信息，不能使用其他信息。</p>
        <p>适用性<em
                class="rfc2119">必须</em>明确无歧义，即只能有一种理解方式。例如，标题与图片等概念并不明确，因其可指标签名、语义角色或网页上的功能用途，而明确规定仅适用于“heading标签”的规则则满足无歧义要求。
        </p>
        <p>此外，适用性<em class="rfc2119">应当</em>用客观、通俗的语言描述。客观的描述是在特定技术环境下可确定、无不确定性的，比如 HTML 中标签名、计算出的角色以及元素之间距离都属于客观属性。</p>
        <p>主观属性包括装饰性、导航机制和预录制等概念，往往依赖人工判断、定义多样。建议尽量避免主观性描述，以减少误解；如确实无法客观定义，可接受主观性，但若可能，应将客观部分和主观部分拆分成单独规则设计，以确保原子规则只测试一个条件。例如，测试标题标签语义正确性和语义错误的分别用不同规则。
        </p>
        <p>定义可以放在规则<a href="#glossary">术语表</a>中，或在使用处定义。</p>
        <aside class="example" id="example-89a2eb0d">
            <a class="self-link" href="#example-89a2eb0d"></a>

            <header>测试 <a href="https://www.w3.org/WAI/WCAG22/quickref/#audio-control">WCAG 2.2 成功标准 1.4.2 声音控制</a>
                的原子规则适用性客观描述：</header>
            <blockquote>
                <p>适用性：每个带 <code>autoplay</code> 属性的 <code>video</code> 或 <code>audio</code> 元素，以及用于网页加载时自动播放视频或音频的
                    <code>object</code> 元素。
                </p>
                <p>注：网页被视为“加载完成”是指 <code>document.readyState</code> 设置为 <code>complete</code>。
                </p>
            </blockquote>
        </aside>
        <aside class="example" id="example-65081fad">
            <a class="self-link" href="#example-65081fad"></a>

            <header>以页面为测试目标的规则的适用性客观描述</header>
            <blockquote>
                <p>适用性：该规则适用于任意页面，只要文档元素是 <code>html</code> 元素，并且该 <code>html</code> 元素是在顶层上下文中渲染（即并未嵌入其他页面，如
                    <code>iframe</code> 或 <code>object</code> 元素内）。
                </p>
            </blockquote>
        </aside>
        <aside class="example" id="example-a09b65c1">
            <a class="self-link" href="#example-a09b65c1"></a>

            <header>以 DOM 属性为测试目标的规则适用性客观描述</header>
            <blockquote>
                <p>适用性：本规则适用于任何在 HTML 或 SVG 元素上指定的 <code>role</code> 属性。</p>
            </blockquote>
        </aside>
        <aside class="example" id="example-874231df">
            <a class="self-link" href="#example-874231df"></a>

            <header>测试元素样式为标题但需使用正确标题标签的规则的主观适用性。此适用性无法客观描述，因为“样式为标题”较为主观，且取决于页面上下文。</header>
            <blockquote>
                <p>适用性：本规则适用于任何样式为标题的 HTML 元素。样式为标题的元素可能包括字体大于临近文本、加粗或更换字体，或用空白或图形视觉区分元素文本等特征。</p>
            </blockquote>
        </aside>
        <aside class="example" id="example-98b093aa">
            <a class="self-link" href="#example-98b093aa"></a>

            <header><strong>不合规：</strong>此例主观性尝试，未能满足“必须无歧义”。例如，非文本内容概念可能指图片、交互元素，甚至用字符“:)”表示的笑脸表情。由于适用性没有明确界定，无法判断实际所指。
            </header>
            <blockquote>
                <p>适用性：此规则适用于任何非文本内容。</p>
            </blockquote>
        </aside>
        <h5 class="heading settled" data-level="4.6.1.1" id="applicability-type-designation-atomic-optional"><span
                class="secno">4.6.1.1. </span><span class="content">适用性类型标识（可选）</span><a class="self-link"
                href="#applicability-type-designation-atomic-optional"></a></h5>
        <p>规则可选地包含一个适用性类型标识，用以标明规则包含的是客观还是主观适用性。此标识将帮助规则阅读者和实施者清楚了解规则作者对适用性的意图，从而减少因理解差异带来的困惑。</p>
        <h4 class="heading settled" data-level="4.6.2" id="applicability-composite"><span class="secno">4.6.2.
            </span><span class="content">复合规则适用性</span><a class="self-link" href="#applicability-composite"></a></h4>
        <p>复合规则的适用性由<a href="#input-rules">输入规则</a>中所有适用性定义的并集构成。规则作者<em
                class="rfc2119">可以</em>省略复合规则的适用性描述。如果难以用通俗语言表达合并后的适用性可以不写。如果复合规则包含适用性描述，则<em class="rfc2119">必须</em>是<a
                href="#input-rules">输入规则</a>所有适用性的并集。</p>
        <p>注意，复合规则中的输入规则<em class="rfc2119">可以</em>具有不同的适用性。因此，并不是每个适用于复合规则的测试目标都会被每个输入规则测试。</p>
        <aside class="example" id="example-0773ef21">
            <a class="self-link" href="#example-0773ef21"></a>

            <header>复合规则输入规则适用性的并集：</header>
            <blockquote>
                <p><strong>输入适用性：</strong></p>
                <ul>
                    <li><strong>输入规则 1：</strong>所有 <code>img</code> 元素<em>有</em> <code>alt</code> 属性
                    <li><strong>输入规则 2：</strong>所有 <code>img</code> 元素<em>无</em> <code>alt</code> 属性
                </ul>
                <p><strong>合并的适用性：</strong></p>
                <p>所有 <code>img</code> 元素。</p>
            </blockquote>
        </aside>
        <h5 class="heading settled" data-level="4.6.2.1" id="applicability-type-designation-composite-optional"><span
                class="secno">4.6.2.1. </span><span class="content">适用性类型标识（可选）</span><a class="self-link"
                href="#applicability-type-designation-composite-optional"></a></h5>
        <p>复合规则可选地包含一个适用性类型标识，指出规则采用的是客观还是主观适用性。复合规则的适用性类型根据其输入规则来判定：若任何输入规则为主观，则整体为主观，否则为客观。</p>
        <h3 class="heading settled" data-level="4.7" id="expectations"><span class="secno">4.7. </span><span
                class="content">期望</span><a class="self-link" href="#expectations"></a></h3>
        <p>ACT 规则<em class="rfc2119">必须</em>包含一个或多个期望。期望描述了由<a href="#applicability">适用性</a>所派生的<a data-link-type="dfn"
                href="#test-target" id="ref-for-test-target③">测试目标</a>需满足的要求。期望即针对每个<a data-link-type="dfn"
                href="#test-target"
                id="ref-for-test-target④">测试目标</a>的断言。当测试目标满足所有期望时，则<code>通过</code>本规则；若不满足所有期望，则<code>未通过</code>规则；如果没有测试目标，则本规则<a
                data-link-type="dfn" href="#outcome" id="ref-for-outcome⑧">结果</a>为<code>不适用</code>。</p>
        <p>每项期望<em class="rfc2119">必须</em>独立、无歧义，并用通俗语言书写。</p>
        <h4 class="heading settled" data-level="4.7.1" id="expectations-atomic"><span class="secno">4.7.1. </span><span
                class="content">原子规则的期望</span><a class="self-link" href="#expectations-atomic"></a></h4>
        <p>所有<a data-link-type="dfn" href="#atomic-rules" id="ref-for-atomic-rules⑥">原子规则</a>的期望<em
                class="rfc2119">必须</em>描述用于判定某个<a data-link-type="dfn" href="#test-target"
                id="ref-for-test-target⑤">测试目标</a>是<code>通过</code>还是<code>未通过</code>的逻辑。期望<em
                class="rfc2119">必须</em>只用<a
                href="#input-aspects">输入方面</a>、适用性描述和本规则其他期望中可获得的信息，不能用别的规则的信息。例如，可以写“期望一为真且...”，但不能写“规则 XYZ
            通过且...”。这样保证原子规则是封装的。</p>
        <aside class="example" id="example-8234d605">
            <a class="self-link" href="#example-8234d605"></a>

            <header>测试 HTML <code>input</code> 元素辅助名称的规则期望：</header>
            <blockquote>
                <ol>
                    <li>每个 HTML <code>input</code> 元素都有辅助名称（如 <a
                            href="https://www.w3.org/TR/accname-1.1/#mapping_additional_nd_te">辅助名称与描述计算及 API 映射
                            1.1</a>中所述）。<a data-link-type="biblio" href="#biblio-accname-aam-11"
                            title="Accessible Name and Description Computation 1.1">[accname-aam-1.1]</a>
                    <li>辅助名称能描述每个 HTML <code>input</code> 元素用途。
                </ol>
            </blockquote>
        </aside>
        <aside class="example" id="example-be2ec0d3">
            <a class="self-link" href="#example-be2ec0d3"></a>

            <header>测试 <code>role</code> 属性是否有效的规则期望：</header>
            <blockquote>
                <ol>
                    <li>每个 <code>role</code> 属性的值都对应一个非抽象的<a href="https://www.w3.org/TR/wai-aria/">WAI-ARIA 1.2</a>角色。
                </ol>
            </blockquote>
        </aside>
        <div class="note" role="note">
            <p><strong>注意：</strong> 有些规则需要更复杂的汇总逻辑，例如页面上 X% 的图片需有文本替代。这时页面本身就是测试目标，期望描述则是“测试目标（页面）有 X% 的 img
                元素具备文本替代”。这种规则中期望的具体计算逻辑，留给具体实现，以避免规则格式本身过于复杂。</p>
        </div>
        <h4 class="heading settled" data-level="4.7.2" id="expectations-composite"><span class="secno">4.7.2.
            </span><span class="content">复合规则期望</span><a class="self-link" href="#expectations-composite"></a></h4>
        <p>所有<a data-link-type="dfn" href="#composite-rules" id="ref-for-composite-rules②">复合规则</a>的期望<em
                class="rfc2119">必须</em>描述用于根据其<a href="#input-rules">输入规则</a>的结果，判定某个<a data-link-type="dfn"
                href="#test-target" id="ref-for-test-target⑥">测试目标</a>是<code>通过</code>还是<code>未通过</code>的逻辑。复合规则期望<em
                class="rfc2119">不能</em>使用<a href="#input-aspects">输入方面</a>的信息。若所有输入规则均为不适用，则复合规则结果为<code>不适用</code>。</p>
        <aside class="example" id="example-bbf41b4d">
            <a class="self-link" href="#example-bbf41b4d"></a>

            <header>复合规则“视频元素有音频描述或媒体替代”的期望（<a
                    href="https://www.w3.org/WAI/WCAG22/quickref/#audio-description-or-media-alternative-prerecorded">WCAG
                    2.2 成功标准 1.2.3 音频描述或媒体替代</a>）：</header>
            <blockquote>
                <p>每个 HTML <code>video</code> 元素至少满足以下某条规则的全部期望：</p>
                <ul>
                    <li>视频元素有转录文本
                    <li>视频元素有音频描述
                    <li>视频元素有描述轨道
                </ul>
            </blockquote>
        </aside>
        <aside class="example" id="example-c9996f09">
            <a class="self-link" href="#example-c9996f09"></a>

            <header>复合规则期望示例：检查是否有机制可用来逃离键盘陷阱；可以是标准方式，也可以有说明其操作的方法：</header>
            <blockquote>
                <p>对于每个可聚焦元素，以下某一规则的结果为<code>通过</code>：</p>
                <ul>
                    <li>带标准逃离机制的键盘陷阱
                    <li>带逃离说明的键盘陷阱
                </ul>
            </blockquote>
        </aside>
        <h3 class="heading settled" data-level="4.8" id="background"><span class="secno">4.8. </span><span
                class="content">背景</span><a class="self-link" href="#background"></a></h3>
        <p>ACT 规则的背景<em class="rfc2119">必须</em>包含假设和辅助功能支持两个部分。背景还<em
                class="rfc2119">可以</em>包含规则开发相关信息，或指向相关重要阅读的其他资源、相关规则。当在规则中引用资料时，可说明与本规则内容的关系。比如关于<a
                href="https://www.w3.org/WAI/standards-guidelines/wcag/">网页内容辅助功能指南</a> <a data-link-type="biblio"
                href="#biblio-wcag22" title="Web Content Accessibility Guidelines (WCAG) 2.2">[WCAG22]</a> 成功标准的规则，可以引用
            <a href="https://www.w3.org/WAI/WCAG22/Understanding/">WCAG 2.2 解读文档</a>、<a
                href="https://www.w3.org/WAI/WCAG22/Techniques/">WCAG 2.2 技术</a>、<a
                href="https://www.w3.org/TR/wai-aria/">WAI-ARIA 1.2</a>、CSS <a data-link-type="biblio"
                href="#biblio-css-2018" title="CSS Snapshot 2018">[css-2018]</a>、HTML <a data-link-type="biblio"
                href="#biblio-html" title="HTML Standard">[HTML]</a> 等规范。
        </p>
        <h4 class="heading settled" data-level="4.8.1" id="assumptions"><span class="secno">4.8.1. </span><span
                class="content">假设</span><a class="self-link" href="#assumptions"></a></h4>
        <p>ACT 规则<em class="rfc2119">必须</em>列明任何已知的假设、局限性或测试、测试环境、所用技术或被测对象中的任何例外。例如，仅通过 CSS 属性检查部分测试 <a
                href="https://www.w3.org/WAI/WCAG22/quickref/#contrast-minimum">WCAG 2.2 成功标准 1.4.3 最小对比度</a>
            的规则，需要说明仅适用于可用 CSS 样式的 HTML 文本内容，且不支持图片文本。</p>
        <p>有时同一辅助功能要求可有多种合理解释。例如，在<a href="https://www.w3.org/WAI/standards-guidelines/wcag/">网页内容辅助功能指南</a> <a
                data-link-type="biblio" href="#biblio-wcag22"
                title="Web Content Accessibility Guidelines (WCAG) 2.2">[WCAG22]</a>中，表情符号字符是“文本”还是“非文本内容”并不直观。无论选择哪一种解释，<em
                class="rfc2119">必须</em>在规则中明确说明。</p>
        <p>虽然假设部分<em class="rfc2119">必须</em>包含在 ACT 规则中，但如无假设、局限或例外则可<em class="rfc2119">为空</em>。</p>
        <h4 class="heading settled" data-level="4.8.2" id="accessibility-support"><span class="secno">4.8.2.
            </span><span class="content">辅助功能支持</span><a class="self-link" href="#accessibility-support"></a></h4>
        <p>内容可以设计为依赖不同辅助技术和用户代理对某些辅助功能特性的支持。例如，使用某个<a href="https://www.w3.org/TR/wai-aria/">WAI-ARIA
                1.2</a>特性的内容，依赖相关特性有辅助技术及用户代理支持，否则就不可用。详见 WCAG 对<a
                href="https://www.w3.org/TR/WCAG22/#dfn-accessibility-supported">辅助功能支持的定义</a>。</p>
        <p>ACT 规则<em class="rfc2119">必须</em>包括任何已知的辅助功能支持局限性。</p>
        <aside class="example" id="example-2c462832">
            <a class="self-link" href="#example-2c462832"></a>

            <header>检查 <code>aria-errormessage</code> 是否用于满足 <a
                    href="https://www.w3.org/TR/WCAG22/#status-messages">WCAG 2.2 成功标准 4.1.3 状态消息</a>的规则：</header>
            <blockquote>
                <p>
                    已知 <code>aria-errormessage</code> 在多个主流屏幕阅读器中的支持有限。此方法不可靠，建议用动态区域等方案作为备用。（2019年1月）
                </p>
            </blockquote>
        </aside>
        <p>尽管辅助功能支持部分<em class="rfc2119">必须</em>包含在 ACT 规则中，若无相关问题可<em class="rfc2119">为空</em>。</p>
        <div class="note" role="note">
            <p><strong>注意：</strong> 网站辅助功能符合性评估方法（WCAG-EM）为测试场景定义<a
                    href="https://www.w3.org/TR/WCAG-EM/#step1c">辅助功能支持基线</a>提供了指导，帮助 ACT 规则用户选择适合自身环境的规则。</p>
        </div>
        <h4 class="heading settled" data-level="4.8.3" id="related-rules"><span class="secno">4.8.3. </span><span
                class="content">相关规则（可选）</span><a class="self-link" href="#related-rules"></a></h4>
        <p>相关规则是指同时测试相同辅助功能要求的其它规则。例如，某复合规则的相关规则可以是决定其结果的两个原子规则。同理，每个原子规则也可将其它原子规则及对应复合规则列为相关规则。</p>
        <h4 class="heading settled" data-level="4.8.4" id="other-resources"><span class="secno">4.8.4. </span><span
                class="content">其他资源（可选）</span><a class="self-link" href="#other-resources"></a></h4>
        <p>每当规则引用某资源时，可说明资源与本规则内容的关系。比如关于<a href="https://www.w3.org/WAI/standards-guidelines/wcag/">网页内容辅助功能指南</a> <a
                data-link-type="biblio" href="#biblio-wcag22"
                title="Web Content Accessibility Guidelines (WCAG) 2.2">[WCAG22]</a> 成功标准的规则，可以引用 <a
                href="https://www.w3.org/WAI/WCAG22/Understanding/">WCAG 2.2 解读文档</a>、<a
                href="https://www.w3.org/WAI/WCAG22/Techniques/">WCAG 2.2 技术</a>、<a
                href="https://www.w3.org/TR/wai-aria/">WAI-ARIA 1.2</a>、CSS <a data-link-type="biblio"
                href="#biblio-css-2018" title="CSS Snapshot 2018">[css-2018]</a>、HTML <a data-link-type="biblio"
                href="#biblio-html" title="HTML Standard">[HTML]</a> 等规范。</p>
        <h3 class="heading settled" data-level="4.9" id="examples"><span class="secno">4.9. </span><span
                class="content">示例</span><a class="self-link" href="#examples"></a></h3>
        <p>示例是可用于验证 ACT 规则实现效果的内容片段。每条规则<em
                class="rfc2119">必须</em>有一个或多个用于<code>通过</code>、<code>未通过</code>和<code>不适用</code> <a data-link-type="dfn"
                href="#outcome" id="ref-for-outcome①①">结果</a>的示例。示例包括两部分数据：每个规则<a
                href="#input-aspects">输入方面</a>的内容片段，以及该规则的预期结果。示例既为读者提供场景，以便了解何时规则结果为<code>通过</code>、<code>未通过</code>或<code>不适用</code>，也供辅助功能测试工具和方法的开发者、使用者验证规则实现的正确性。
        </p>
        <p>ACT 规则的每一个<code>通过</code>和<code>不适用</code>示例<em class="rfc2119">必须</em>满足本规则所有<a data-link-type="dfn"
                href="#conformance-requirement"
                id="ref-for-conformance-requirement">一致性要求</a>。每个<code>未通过</code>示例，所有一致性要求<em
                class="rfc2119">必须</em>处于<em>未满足</em>状态。对于<a data-link-type="dfn" href="#composite-rules"
                id="ref-for-composite-rules③">复合规则</a>，所有<a href="#input-rules">输入规则</a>的示例<em
                class="rfc2119">必须</em>同样满足复合规则的一致性要求。</p>
        <aside class="example" id="example-023bafb1">
            <a class="self-link" href="#example-023bafb1"></a>

            <header>用于检查 <code>img</code> 元素是否有文本替代的规则的 HTML 示例：</header>
            <blockquote>
                <p><code>通过</code>结果示例：</p>
                <pre class="language-html highlight"><c- p>&lt;</c-><c- f>img</c-> <c- e>alt</c-><c- o>=</c-><c- s>"W3C Logo"</c-> <c- e>src</c-><c- o>=</c-><c- s>"image/w3c.png"</c-><c- p>></c->
</pre>
                <p><code>未通过</code>结果示例：</p>
                <pre class="language-html highlight"><c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"image/w3c.png"</c-><c- p>></c->
</pre>
                <p><code>不适用</code>结果示例：</p>
                <pre class="language-html highlight"><c- p>&lt;</c-><c- f>input</c-> <c- e>type</c-><c- o>=</c-><c- s>"image"</c-> <c- e>alt</c-><c- o>=</c-><c- s>"W3C Logo"</c-> <c- e>src</c-><c- o>=</c-><c- s>"image/w3c.png"</c-><c- p>></c->
</pre>
            </blockquote>
        </aside>
        <h3 class="heading settled" data-level="4.10" id="rule-versions"><span class="secno">4.10. </span><span
                class="content">规则版本</span><a class="self-link" href="#rule-versions"></a></h3>
        <p>需要记录 ACT 规则的各个版本，以便规则使用者判断测试结果变化究竟源自规则变更还是内容本身变更。所有 ACT 规则以往版本<em class="rfc2119">必须</em>在规则文档中记录或引用。</p>
        <p>本节原名“变更日志”，两者均可。</p>
        <h3 class="heading settled" data-level="4.11" id="act-rules-format-version"><span class="secno">4.11.
            </span><span class="content">ACT 规则格式版本</span><a class="self-link" href="#act-rules-format-version"></a>
        </h3>
        <p>ACT 规则针对某一特定版本的 ACT 规则格式编写。每条 ACT 规则<em class="rfc2119">必须</em>指明其所采用的 ACT 规则格式版本。因为规则格式并非完全<a
                href="#backward-compatible">向后兼容</a>，此项很重要。</p>
        <h3 class="heading settled" data-level="4.12" id="glossary"><span class="secno">4.12. </span><span
                class="content">术语表</span><a class="self-link" href="#glossary"></a></h3>
        <p>ACT 规则<em class="rfc2119">必须</em>有术语表。术语表<em class="rfc2119">必须</em>包含<a data-link-type="dfn" href="#outcome"
                id="ref-for-outcome①②">结果</a>定义，同时需收录规则<a href="#applicability">适用性</a>和<a
                href="#expectations">期望</a>章节所用的所有定义。因定义的更改会导致规则本身变化，这些定义不能与规则分离维护。如果为规则集采用共享术语表，则<em
                class="rfc2119">必须</em>在术语表变动时，对所有引用该术语表的规则同步进行<a href="#rule-versions">规则版本</a>更新。</p>
        <div class="note" role="note">
            <p><strong>注意：</strong> 规则可用多个术语表，部分在规则内，部分在外部。术语表也可以引用其它文档（如 WCAG 2.2、HTML 5
                等）中的定义。若外部术语表条目会独立变动，则需注明条目的版本。例如 HTML 5 标准经常更新，可在链接中注明作者采用的日期版本。</p>
        </div>
        <h3 class="heading settled" data-level="4.13" id="issues-list"><span class="secno">4.13. </span><span
                class="content">问题列表（可选）</span><a class="self-link" href="#issues-list"></a></h3>
        <p>ACT 规则<em class="rfc2119">可以</em>包含已知问题列表或相关问题列表。问题列表用于记录出现 ACT 规则的<a data-link-type="dfn" href="#outcome"
                id="ref-for-outcome①③">结果</a>为<code>未通过</code>但本应<code>通过</code>或<code>不适用</code>，或相反的情况。产生这类问题的原因有多种，详情见<a
                href="#rule-accuracy">规则准确性</a>。</p>
        <p>问题列表有两个作用：一方面能让 ACT 规则使用者了解为何会有不准确的结果，增强对规则的信心；另一方面也便于规则设计者规划规则的未来更新。新版本规则中已解决的问题会移入变更日志。</p>
        <h3 class="heading settled" data-level="4.14" id="implementations"><span class="secno">4.14. </span><span
                class="content">实现（可选）</span><a class="self-link" href="#implementations"></a></h3>
        <p>ACT 规则<em class="rfc2119">可以</em>包含<a data-link-type="dfn" href="#implementation"
                id="ref-for-implementation">实现</a>列表，每个实现包含一个或多个<a data-link-type="dfn" href="#check"
                id="ref-for-check">校验</a>，这些校验与规则保持一致或部分一致。实现指用<a data-link-type="dfn" href="#check"
                id="ref-for-check①">校验</a>判断<a data-link-type="dfn" href="#outcome" id="ref-for-outcome①④">结果</a>，从而确定<a
                data-link-type="dfn" href="#accessibility-requirement"
                id="ref-for-accessibility-requirement⑧">辅助功能要求</a>是否有可能被满足的测试方法或工具。这些校验可以完全自动化、完全手动，或二者结合。</p>
        <p><a data-link-type="dfn" href="#check" id="ref-for-check②">校验</a>无需与 ACT 规则一一对应。单个校验可和多条 ACT 规则一致，一组校验也可与单条
            ACT 规则一致。</p>
        <p>每个实现可包含如下信息：</p>
        <ul>
            <li data-md>
                <p>与规则一致或部分一致的校验的名称、标题或标识符</p>
            <li data-md>
                <p><a href="#impl-consistency">一致性</a></p>
            <li data-md>
                <p>校验的<a href="https://www.w3.org/TR/EARL10-Schema/#TestMode">测试模式</a>（如自动、手动、半自动）</p>
            <li data-md>
                <p>实现名称</p>
            <li data-md>
                <p>用于测试一致性和覆盖率的版本</p>
            <li data-md>
                <p>供应商名称</p>
        </ul>
        <h4 class="heading settled" data-level="4.14.1" id="impl-consistency"><span class="secno">4.14.1. </span><span
                class="content">一致性</span><a class="self-link" href="#impl-consistency"></a></h4>
        <p>一致性描述某<a data-link-type="dfn" href="#check" id="ref-for-check③">校验</a>与 ACT 规则意图的匹配程度。若在 ACT 规则中包含一致性描述，则<em
                class="rfc2119">必须</em>按本节规定判定一致性。ACT 规则的一致校验指可用于识别规则所描述的部分或全部不符合问题。校验为<dfn class="dfn-paneled"
                data-dfn-type="dfn" data-noexport id="consistent">一致</dfn>需满足以下全部条件：</p>
        <ol>
            <li data-md>
                <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                        id="true-positives">真实阳性</dfn>：示例无不一致之处，具体为：</p>
                <ol>
                    <li data-md>
                        <p><code>通过</code>和<code>不适用</code>示例<strong>不能</strong>被报告为<code>未通过</code>；并且</p>
                    <li data-md>
                        <p><code>未通过</code>示例<strong>不能</strong>被报告为<code>通过</code>或<code>不适用</code>；并且
                        </p>
                </ol>
            <li data-md>
                <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="completeness">完整性</dfn>：覆盖范围无缺口，即：</p>
                <ol>
                    <li data-md>
                        <p><a data-link-type="dfn" href="#check" id="ref-for-check④">校验</a>的结果不应有任何<code>未测试</code>；并且
                        </p>
                    <li data-md>
                        <p>至少有一个<code>未通过</code>示例被报告为<code>未通过</code>；并且</p>
                </ol>
            <li data-md>
                <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                        id="rule-mapping">规则映射</dfn>：辅助功能要求需一致报告，即：</p>
                <ol>
                    <li data-md>
                        <p><a data-link-type="dfn" href="#check" id="ref-for-check⑤">校验</a>需报告测试本规则的所有<a
                                data-link-type="dfn" href="#conformance-requirement"
                                id="ref-for-conformance-requirement①">一致性要求</a>，除非所用实现不支持该级别或标准；并且</p>
                    <li data-md>
                        <p>规则报告为“包含”的所有辅助功能要求均为<a data-link-type="dfn" href="#conformance-requirement"
                                id="ref-for-conformance-requirement②">一致性要求</a>或<a data-link-type="dfn"
                                href="#secondary-requirement"
                                id="ref-for-secondary-requirement">次要要求</a>，除非这类要求在规则未提及的<a data-link-type="dfn"
                                href="#accessibility-requirements-document"
                                id="ref-for-accessibility-requirements-document⑧">辅助功能要求文档</a>中。
                </ol>
        </ol>
        <p>当某<a data-link-type="dfn" href="#check" id="ref-for-check⑥">校验</a>对一个示例报告多个结果时，需依照如下有序列表，取出现最早的结果用于判定一致性：</p>
        <ol>
            <li data-md>
                <p><code>未通过</code></p>
            <li data-md>
                <p><code>未测试</code></p>
            <li data-md>
                <p><code>无法判定</code></p>
            <li data-md>
                <p><code>通过</code></p>
            <li data-md>
                <p><code>不适用</code></p>
        </ol>
        <h4 class="heading settled" data-level="4.14.2" id="impl-partial-consistency"><span class="secno">4.14.2.
            </span><span class="content">部分一致性</span><a class="self-link" href="#impl-partial-consistency"></a></h4>
        <p>若某<a data-link-type="dfn" href="#check" id="ref-for-check⑦">校验</a>不属于<a data-link-type="dfn"
                href="#consistent" id="ref-for-consistent">一致</a>，但满足<a data-link-type="dfn" href="#true-positives"
                id="ref-for-true-positives">真实阳性</a>条件，且其报告结果不全为<code>无法判定</code>或<code>未测试</code>，则视为<dfn
                class="dfn-paneled" data-dfn-type="dfn" data-noexport id="partially-consistent">部分一致</dfn>。</p>
        <h4 class="heading settled" data-level="4.14.3" id="impl-multi-check"><span class="secno">4.14.3. </span><span
                class="content">多校验一致性</span><a class="self-link" href="#impl-multi-check"></a></h4>
        <p><a data-link-type="dfn" href="#implementation" id="ref-for-implementation②">实现</a>可包含仅测试某个 ACT 规则部分的<a
                data-link-type="dfn" href="#check" id="ref-for-check⑧">校验</a>。只要组合后的校验覆盖 ACT 规则全部内容，这组校验就是一致的。<dfn
                class="dfn-paneled" data-dfn-type="dfn" data-noexport id="set-of-checks">校验集</dfn>的“一致性”可以将所有<a
                data-link-type="dfn" href="#partially-consistent"
                id="ref-for-partially-consistent">部分一致</a>的校验视为一个整体校验来判断。</p>
        <p>若<a data-link-type="dfn" href="#set-of-checks" id="ref-for-set-of-checks">校验集</a>满足<a data-link-type="dfn"
                href="#consistent" id="ref-for-consistent②">一致校验</a>的所有要求，则它就与 ACT 规则<a data-link-type="dfn"
                href="#consistent" id="ref-for-consistent①">一致</a>。该校验集的<a data-link-type="dfn" href="#outcome"
                id="ref-for-outcome①⑤">结果</a>为与 ACT 规则部分一致的所有校验的结果列表，校验集的辅助功能要求为所有与 ACT 规则部分一致校验的辅助功能要求的列表。</p>
        <aside class="example" id="example-61c2c463">
            <a class="self-link" href="#example-61c2c463"></a>
            <header>一致校验集：</header>
            <blockquote>
                <p>某 ACT 规则用于检测所有原生 button 元素以及含 role="button" 的元素是否有辅助名称，规则示例包含原生按钮和 role="button" 元素。</p>
                <p>ACME 合规工具有一个只针对原生按钮元素的校验。该校验能通过所有有辅助名称的原生按钮，未通过所有没有辅助名称的原生按钮，对只包含 role="button" 元素的页面报告为不适用。因为对于部分
                    ACT 规则的未通过示例，报告为不适用，所以该校验是部分一致。</p>
                <p>ACME 合规工具还有一个只针对 role="button" 元素的校验。它和先前类似，只是通过和未通过的是 role="button"
                    元素，对于只包含原生按钮的页面则报告为不适用。该校验也是部分一致。将这两个校验组合起来则是 “一致的”，因为所有 ACT 规则中的未通过示例都被其中至少一个校验判定为未通过。</p>
            </blockquote>
        </aside>
        <h3 class="heading settled" data-level="4.15" id="acknowledgments"><span class="secno">4.15. </span><span
                class="content">致谢（可选）</span><a class="self-link" href="#acknowledgments"></a></h3>
        <p>ACT 规则<em class="rfc2119">可以</em>包含致谢信息，包括但不限于：</p>
        <ul>
            <li data-md>
                <p>规则作者名单</p>
            <li data-md>
                <p>规则审阅者/贡献者名单</p>
            <li data-md>
                <p>资助或其他支持</p>
        </ul>
        <h2 class="heading settled" data-level="5" id="rule-accuracy"><span class="secno">5. </span><span
                class="content">规则准确性</span><a class="self-link" href="#rule-accuracy"></a></h2>
        <p>本节为<em>非规范性</em>。</p>
        <p>虽然<a href="#examples">示例</a>可用于判断 ACT 规则实现是否正确，但并不能保证实现永远不会产出错误结果。编写 ACT
            规则时，难免会忽略某些边界情况。技术不断发展，内容作者也不断发现新颖或意外的用法。导致不准确的例子包括：</p>
        <ul>
            <li data-md>
                <p>对测试对象的<a href="#assumptions">假设</a>后来被证明不成立</p>
            <li data-md>
                <p>技术被以不寻常且难以预测的方式使用</p>
            <li data-md>
                <p>技术有变更，或某些技术方面被忽略</p>
            <li data-md>
                <p>辅助功能要求被错误理解</p>
        </ul>
        <p>错误结果有两类：实现不准确可以用示例改进，而规则本身不准确则无法靠示例修正。毕竟规则不准确是因为作者没意识到某边界情况。</p>
        <p>当测试错误地指出不符合辅助功能要求时称为“假阳性”；反之，规则错误地判定符合性，就是“假阴性”。假阳性和假阴性比例可通过与辅助功能审计结果对比获得：</p>
        <ul>
            <li data-md>
                <p><strong>假阳性：</strong>指<a data-link-type="dfn" href="#test-target"
                        id="ref-for-test-target⑦">测试目标</a>被规则判定为<code>未通过</code>，但实际满足<a data-link-type="dfn"
                        href="#accessibility-requirement" id="ref-for-accessibility-requirement⑨">辅助功能要求</a>的比例。</p>
            <li data-md>
                <p><strong>假阴性：</strong>指<a data-link-type="dfn" href="#test-target"
                        id="ref-for-test-target⑧">测试目标</a>被规则判定为<code>通过</code>，但未满足<a data-link-type="dfn"
                        href="#accessibility-requirement" id="ref-for-accessibility-requirement①⓪">辅助功能要求</a>的比例。</p>
        </ul>
        <p>ACT 规则的假阳性和假阴性始终存在可能，因此规则通常要持续维护。维护 ACT 规则的流程不属于 ACT 规则格式的范畴，但建议规则作者自行制定维护流程。</p>
        <h2 class="heading settled" data-level="6" id="harmonization"><span class="secno">6. </span><span
                class="content">统一化</span><a class="self-link" href="#harmonization"></a></h2>
        <p>本节为<em>非规范性</em>。</p>
        <p>虽然 ACT 规则格式设计用来促进统一，但 ACT 规则格式中没有直接要求禁止作者编写与已有规则不一致的新规则，也没有规定规则需具备多少实现或准确度。这样一来，不同规则集可设不同质量要求，也能随时间发展。</p>
        <p>统一（harmonization）发生在一群规则实现者集体认可某条 ACT 规则的有效性。例如某无障碍测试工具厂商组成的社群可声明他们在某套 ACT 规则上达成统一。此类社群可自行为规则制定验收标准及更高质量要求。
        </p>
        <aside class="example" id="example-4cd6f8d1">
            <a class="self-link" href="#example-4cd6f8d1"></a>
            <header>EPUB 规则组验收标准：</header>
            <blockquote>
                <ul>
                    <li>某条 ACT EPUB 规则需获得 3 个组织成员批准，且
                    <li>该 EPUB 规则有 2 个独立实现后方可视为统一
                </ul>
            </blockquote>
        </aside>
        <p>类似的流程可参考<a href="https://w3c.github.io/wcag-act/wcag-ruleset-review-process">WCAG ACT 评审流程</a>。</p>
        <h2 class="heading settled" data-level="7" id="privacy-considerations"><span class="secno">7. </span><span
                class="content">隐私注意事项</span><a class="self-link" href="#privacy-considerations"></a>
        </h2>
        <p>本规范提供辅助功能一致性测试（ACT）规则以测试内容是否符合网页内容辅助功能指南。本规范无意访问用户信息，也不会将用户信息直接暴露给用户代理或辅助技术。</p>
        <h2 class="heading settled" data-level="8" id="security-considerations"><span class="secno">8. </span><span
                class="content">安全注意事项</span><a class="self-link" href="#security-considerations"></a>
        </h2>
        <p>本规范不提供协议、域和端口直接与底层平台（包括浏览器和操作系统）通信的方式，也不允许访问设备传感器。规范也未启用新的脚本执行或加载机制。目前未发现其他安全注意事项。</p>
        <h2 class="heading settled" data-level="9" id="definitions"><span class="secno">9. </span><span
                class="content">定义</span><a class="self-link" href="#definitions"></a></h2>
        <dl>
            <dt><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="accessibility-requirement">辅助功能要求</dfn>
            <dd>
                <p>辅助功能要求旨在提升残障人士使用信息与通信技术产品的便利。对 ACT
                    规则映射来说，要求可分为强制或建议。强制要求必须满足以符合标准，或符合同类合同、政策或法规。建议要求仅推荐满足，不满足不会导致不符合或违规。</p>
                <p>典型辅助功能要求如 WCAG 成功标准，也有其他标准（包括 W3C 标准）含有辅助功能建议，如 WAI-ARIA、HTML。公司政策、地区标准或立法中也常见辅助功能要求。</p>
            <dt><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                    id="accessibility-requirements-document">辅助功能要求文档</dfn>
            <dd>
                <p>包含<a data-link-type="dfn" href="#accessibility-requirement"
                        id="ref-for-accessibility-requirement①①">辅助功能要求</a>的文档，如标准、合同、政策或法规。例：WCAG 2.2、WAI-ARIA 1.2、HTML
                    5.2、EPUB Accessibility 1.0、BBC HTML Accessibility Standards v2.0</p>
            <dt><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="check">校验</dfn>
            <dd>
                <p>对网页或其它测试对象的无障碍性进行评估后得出一个或多个<a data-link-type="dfn" href="#outcome"
                        id="ref-for-outcome①⑥">结果</a>的流程。流程可为手动测试步骤说明、全自动测试，或手动与自动结合。</p>
            <dt><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="implementation">实现</dfn>
            <dd>
                <p>辅助功能测试方法或测试工具，内含一组<a data-link-type="dfn" href="#check" id="ref-for-check⑨">校验</a>，可用来判断<a
                        data-link-type="dfn" href="#accessibility-requirement"
                        id="ref-for-accessibility-requirement①②">辅助功能要求</a>是否（不）符合要求。</p>
            <dt><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="outcome">结果</dfn>
            <dd>
                <p>针对<a data-link-type="dfn" href="#test-subject" id="ref-for-test-subject⑦">测试对象</a>或其组成部分<a
                        data-link-type="dfn" href="#test-target" id="ref-for-test-target⑨">测试目标</a>执行 ACT
                    规则后得出的结论。结果有以下五种类型：</p>
                <ul>
                    <li><strong>不适用：</strong>测试对象无部分匹配适用性
                    <li><strong>通过：</strong><a data-link-type="dfn" href="#test-target"
                            id="ref-for-test-target①⓪">测试目标</a>满足所有期望
                    <li><strong>未通过：</strong><a data-link-type="dfn" href="#test-target"
                            id="ref-for-test-target①①">测试目标</a>未满足所有期望
                    <li><strong>无法判定：</strong>无法确定规则是否适用或是否满足所有期望
                    <li><strong>未测试：</strong>未对规则进行评估
                </ul>
                <div class="note" role="note">
                    <p><strong>注意：</strong>每个<a data-link-type="dfn" href="#test-target"
                            id="ref-for-test-target①②">测试目标</a>对应一个<code>通过</code>或<code>未通过</code>结果。评估测试目标时，如无法全部测试，可报告为<code>无法判定</code>（如适用性自动，期望要手动判断）。
                    </p>
                    <p>如无测试目标，则规则只有一个<code>不适用</code>结果。如无法确定是否存在测试目标，则有一个<code>无法判定</code>结果。若未进行评估，则测试目标有一个<code>未测试</code>结果。因此每个<a
                            data-link-type="dfn" href="#test-subject" id="ref-for-test-subject⑧">测试对象</a>总有一个或多个结果。</p>
                    <p>ACT 规则中的结果可参照<a href="https://www.w3.org/TR/EARL10-Schema/#outcome">EARL 结果属性</a>表达，详见<a
                            data-link-type="biblio" href="#biblio-earl10-schema"
                            title="Evaluation and Report Language (EARL) 1.0 Schema">[EARL10-Schema]</a>。</p>
                </div>
            <dt><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="test-subject">测试对象</dfn>
            <dd>
                <p>可由 ACT 规则评估的资源或资源集合。</p>
                <aside class="example" id="example-8ddcecf8">
                    <a class="self-link" href="#example-8ddcecf8"></a>
                    <header>测试对象示例：</header>
                    <blockquote>
                        <ul>
                            <li>HTML 页面，包括所有嵌入脚本、样式和图片
                            <li>EPUB 出版物
                            <li>网页组件文件
                        </ul>
                    </blockquote>
                </aside>
                <div class="note" role="note">
                    <p><strong>注意：</strong>实现者可用<a data-link-type="biblio" href="#biblio-earl10-schema"
                            title="Evaluation and Report Language (EARL) 1.0 Schema">[EARL10-Schema]</a>的 <a
                            href="https://www.w3.org/TR/EARL10-Schema/#subject">subject 属性</a> 表达测试对象</p>
                </div>
            <dt><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="test-target">测试目标</dfn>
            <dd>
                <p>依<a href="#applicability">适用性</a>描述而定义的<a data-link-type="dfn" href="#test-subject"
                        id="ref-for-test-subject⑨">测试对象</a>的独立部分。</p>
                <aside class="example" id="example-c06dfb1e">
                    <a class="self-link" href="#example-c06dfb1e"></a>
                    <header>测试目标示例：</header>
                    <blockquote>
                        <ul>
                            <li>HTML 页面中的节点
                            <li>视频中的时间段
                            <li>文档中的字符范围
                        </ul>
                    </blockquote>
                </aside>
                <div class="note" role="note">
                    <p><strong>注意：</strong>实现者可用<a data-link-type="biblio" href="#biblio-earl10-schema"
                            title="Evaluation and Report Language (EARL) 1.0 Schema">[EARL10-Schema]</a>的 <a
                            href="https://www.w3.org/TR/EARL10-Schema/#pointer">pointer 属性</a> 表达测试目标</p>
                </div>
        </dl>
        <h2 class="heading settled" id="appendix-data-example"><span class="content">附录 1：用 JSON-LD 和 EARL 表达 ACT
                规则结果</span><a class="self-link" href="#appendix-data-example"></a></h2>
        <p>本节为<em>非规范性</em>。</p>
        <p>本节提供了使用 EARL 和 JSON-LD 表达执行 ACT 规则后的结果示例。详情请参阅<a
                href="https://www.w3.org/WAI/standards-guidelines/earl/">评估与报告语言</a>和<a
                href="https://www.w3.org/TR/json-ld/">JSON-LD（面向关联数据的 JSON 序列化）</a>。更多示例和背景资料可在<a
                href="https://github.com/w3c/earl">EARL 的 JSON-LD 序列化 GitHub 仓库</a>获取。</p>
        <p>本节示例包括：</p>
        <ul>
            <li data-md>
                <p>单断言的最简结果</p>
            <li data-md>
                <p>多断言的结果</p>
            <li data-md>
                <p>基于要求汇总</p>
            <li data-md>
                <p>基于“测试对象”汇总</p>
            <li data-md>
                <p>本节的假定上下文</p>
        </ul>
        <aside class="example" id="example-00a7173a">
            <a class="self-link" href="#example-00a7173a"></a>
            <header>单断言的最简结果</header>
            <pre class="language-javascript highlight"><c- p>{</c->
  <c- u>"@context"</c-><c- o>:</c-> <c- u>"context.json"</c-><c- p>,</c->
  <c- u>"@type"</c-><c- o>:</c-> <c- u>"Assertion"</c-><c- p>,</c->
  <c- u>"assertedBy"</c-><c- o>:</c-> <c- u>"https://example.org/MyTool"</c-><c- p>,</c->
  <c- u>"subject"</c-><c- o>:</c-> <c- u>"https://example.org/page1.html"</c-><c- p>,</c->
  <c- u>"test"</c-><c- o>:</c-> <c- u>"ACT-CG:rules/23a2a8"</c-><c- p>,</c->
  <c- u>"result"</c-><c- o>:</c-> <c- p>{</c->
    <c- u>"outcome"</c-><c- o>:</c-> <c- u>"earl:failed"</c-><c- p>,</c->
    <c- u>"pointer"</c-><c- o>:</c-> <c- u>"html > body > h1:first-child"</c->
  <c- p>}</c->
<c- p>}</c->
</pre>
        </aside>
        <aside class="example" id="example-26d05dbb">
            <a class="self-link" href="#example-26d05dbb"></a>
            <header>多断言结果</header>
            <pre class="language-javascript highlight"><c- p>{</c->
  <c- u>"@context"</c-><c- o>:</c-> <c- u>"context.json"</c-><c- p>,</c->
  <c- u>"@graph"</c-><c- o>:</c-> <c- p>[{</c->
    <c- u>"@type"</c-><c- o>:</c-> <c- u>"Assertion"</c-><c- p>,</c->
    <c- u>"assertedBy"</c-><c- o>:</c-> <c- u>"https://example.org/MyTool"</c-><c- p>,</c->
    <c- u>"subject"</c-><c- o>:</c-> <c- u>"https://example.org/page1.html"</c-><c- p>,</c->
    <c- u>"test"</c-><c- o>:</c-> <c- u>"ACT-CG:rules/23a2a8"</c-><c- p>,</c->
    <c- u>"result"</c-><c- o>:</c-> <c- p>{</c->
      <c- u>"outcome"</c-><c- o>:</c-> <c- u>"earl:failed"</c-><c- p>,</c->
      <c- u>"pointer"</c-><c- o>:</c-> <c- u>"html > body > h1:first-child"</c->
    <c- p>}</c->
  <c- p>},</c-> <c- p>{</c->
    <c- u>"@type"</c-><c- o>:</c-> <c- u>"Assertion"</c-><c- p>,</c->
    <c- u>"assertedBy"</c-><c- o>:</c-> <c- u>"https://example.org/AnotherTool"</c-><c- p>,</c->
    <c- u>"subject"</c-><c- o>:</c-> <c- u>"https://example.org/page1.html"</c-><c- p>,</c->
    <c- u>"test"</c-><c- o>:</c-> <c- u>"ACT-CG:rules/23a2a8"</c-><c- p>,</c->
    <c- u>"result"</c-><c- o>:</c-> <c- p>{</c->
      <c- u>"outcome"</c-><c- o>:</c-> <c- u>"earl:passed"</c-><c- p>,</c->
      <c- u>"pointer"</c-><c- o>:</c-> <c- u>"html > body > h1:nth-child(2)"</c->
    <c- p>}</c->
  <c- p>}]</c->
<c- p>}</c->
</pre>
        </aside>
        <aside class="example" id="example-811b3b05">
            <a class="self-link" href="#example-811b3b05"></a>
            <header>基于要求汇总（如 WCAG 成功标准）</header>
            <pre class="language-javascript highlight"><c- p>{</c->
  <c- u>"@context"</c-><c- o>:</c-> <c- u>"context.json"</c-><c- p>,</c->
  <c- u>"@type"</c-><c- o>:</c-> <c- u>"Assertion"</c-><c- p>,</c->
  <c- u>"assertedBy"</c-><c- o>:</c-> <c- u>"https://example.org/MyTool"</c-><c- p>,</c->
  <c- u>"subject"</c-><c- o>:</c-> <c- u>"https://example.org/page1.html"</c-><c- p>,</c->
  <c- u>"test"</c-><c- o>:</c-> <c- p>{</c->
    <c- u>"@type"</c-><c- o>:</c-> <c- u>"earl:TestRequirement"</c-><c- p>,</c->
    <c- u>"@id"</c-><c- o>:</c-> <c- u>"WCAG22:non-text-content"</c->
  <c- p>},</c->
  <c- u>"result"</c-><c- o>:</c-> <c- p>{</c->
    <c- u>"outcome"</c-><c- o>:</c-> <c- u>"earl:failed"</c-><c- p>,</c->
    <c- u>"source"</c-><c- o>:</c-> <c- p>[{</c->
      <c- u>"test"</c-><c- o>:</c-> <c- u>"ACT-CG:rules/23a2a8"</c-><c- p>,</c->
      <c- u>"result"</c-><c- o>:</c-> <c- p>{</c->
        <c- u>"outcome"</c-><c- o>:</c-> <c- u>"earl:failed"</c-><c- p>,</c->
        <c- u>"pointer"</c-><c- o>:</c-> <c- u>"html > body > h1:first-child"</c->
      <c- p>}</c->
    <c- p>},</c-> <c- p>{</c->
      <c- u>"test"</c-><c- o>:</c-> <c- u>"ACT-RULES-CG:rules/23a2a8"</c-><c- p>,</c->
      <c- u>"result"</c-> <c- o>:</c-> <c- p>{</c->
        <c- u>"outcome"</c-><c- o>:</c-> <c- u>"earl:passed"</c-><c- p>,</c->
        <c- u>"pointer"</c-><c- o>:</c-> <c- u>"html > body > h1:nth-child(2)"</c->
      <c- p>}</c->
    <c- p>}]</c->
  <c- p>}</c->
<c- p>}</c->
</pre>
        </aside>
        <aside class="example" id="example-351919ff">
            <a class="self-link" href="#example-351919ff"></a>
            <header>基于“测试对象”汇总（如网站）</header>
            <pre class="language-javascript highlight"><c- p>{</c->
  <c- u>"@context"</c-><c- o>:</c-> <c- u>"context.json"</c-><c- p>,</c->
  <c- u>"@type"</c-><c- o>:</c-> <c- u>"Assertion"</c-><c- p>,</c->
  <c- u>"assertedBy"</c-><c- o>:</c-> <c- p>{</c->
    <c- u>"@type"</c-><c- o>:</c-> <c- u>"Organization"</c-><c- p>,</c->
    <c- u>"@id"</c-><c- o>:</c-> <c- u>"_:myOrg"</c-><c- p>,</c->
    <c- u>"title"</c-><c- o>:</c-> <c- u>"My Organization"</c-><c- p>,</c->
    <c- u>"description"</c-> <c- o>:</c-> <c- u>"Accessibility testing service"</c-><c- p>,</c->
    <c- u>"homepage"</c-> <c- o>:</c-> <c- u>"http://example.org/myOrg/"</c->
  <c- p>},</c->
  <c- u>"subject"</c-><c- o>:</c-> <c- p>{</c->
    <c- u>"@type"</c-><c- o>:</c-> <c- p>[</c-><c- u>"WebSite"</c-><c- p>,</c-> <c- u>"TestSubject"</c-><c- p>],</c->
    <c- u>"@id"</c-><c- o>:</c-> <c- u>"https://example.org/"</c->
  <c- p>},</c->
  <c- u>"test"</c-><c- o>:</c-> <c- p>{</c->
    <c- u>"@type"</c-><c- o>:</c-> <c- u>"earl:TestRequirement"</c-><c- p>,</c->
    <c- u>"@id"</c-><c- o>:</c-> <c- u>"http://www.w3.org/WAI/WCAG2A-Conformance"</c->
  <c- p>},</c->
  <c- u>"result"</c-><c- o>:</c-> <c- p>{</c->
    <c- u>"outcome"</c-><c- o>:</c-> <c- u>"earl:failed"</c-><c- p>,</c->
    <c- u>"source"</c-><c- o>:</c-> <c- p>[{</c->
      <c- u>"test"</c-><c- o>:</c-> <c- p>{</c->
        <c- u>"@type"</c-><c- o>:</c-> <c- u>"earl:TestRequirement"</c-><c- p>,</c->
        <c- u>"@id"</c-><c- o>:</c-> <c- u>"WCAG22:non-text-content"</c->
      <c- p>},</c->
      <c- u>"result"</c-><c- o>:</c-> <c- p>{</c->
        <c- u>"outcome"</c-><c- o>:</c-> <c- u>"earl:failed"</c-><c- p>,</c->
        <c- u>"source"</c-><c- o>:</c-> <c- p>[</c-> … <c- p>]</c->
      <c- p>}</c->
    <c- p>},</c-> <c- p>{</c->
      <c- u>"test"</c-><c- o>:</c-> <c- p>{</c->
        <c- u>"@type"</c-><c- o>:</c-> <c- u>"earl:TestRequirement"</c-><c- p>,</c->
        <c- u>"@id"</c-><c- o>:</c-> <c- u>"WCAG22:audio-only-and-video-only-prerecorded"</c->
      <c- p>},</c->
      <c- u>"result"</c-><c- o>:</c-> <c- p>{</c->
        <c- u>"outcome"</c-><c- o>:</c-> <c- u>"earl:passed"</c-><c- p>,</c->
        <c- u>"source"</c-><c- o>:</c-> <c- p>[</c-> … <c- p>]</c->
      <c- p>}</c->
    <c- p>},</c-> <c- p>{</c->
      <c- u>"test"</c-><c- o>:</c-> <c- p>{</c->
        <c- u>"@type"</c-><c- o>:</c-> <c- u>"earl:TestRequirement"</c-><c- p>,</c->
        <c- u>"@id"</c-><c- o>:</c-> <c- u>"WCAG22:captions-prerecorded"</c->
      <c- p>},</c->
      <c- u>"result"</c-> <c- o>:</c-> <c- p>{</c->
        <c- u>"outcome"</c-><c- o>:</c-> <c- u>"earl:passed"</c-><c- p>,</c->
        <c- u>"source"</c-><c- o>:</c-> <c- p>[</c-> … <c- p>]</c->
      <c- p>}</c->
    <c- p>},</c-> … <c- p>]</c->
  <c- p>}</c->
<c- p>}</c->
</pre>
        </aside>
        <aside class="example" id="example-ba90e833">
            <a class="self-link" href="#example-ba90e833"></a>
            <header>本节假定上下文</header>
            <pre class="language-javascript highlight"><c- p>{</c->
  <c- u>"@vocab"</c-><c- o>:</c-> <c- u>"http://www.w3.org/ns/earl#"</c-><c- p>,</c->

  <c- u>"cnt"</c-><c- o>:</c-> <c- u>"http://www.w3.org/2011/content#"</c-><c- p>,</c->
  <c- u>"dct"</c-><c- o>:</c-> <c- u>"http://purl.org/dc/terms/"</c-><c- p>,</c->
  <c- u>"earl"</c-><c- o>:</c-> <c- u>"http://www.w3.org/ns/earl#"</c-><c- p>,</c->
  <c- u>"foaf"</c-><c- o>:</c-> <c- u>"http://xmlns.com/foaf/0.1/"</c-><c- p>,</c->
  <c- u>"htp"</c-><c- o>:</c-> <c- u>"http://www.w3.org/2011/http#"</c-><c- p>,</c->
  <c- u>"ptr"</c-><c- o>:</c-> <c- u>"https://www.w3.org/2009/pointers#"</c-><c- p>,</c->
  <c- u>"schema"</c-><c- o>:</c-> <c- u>"http://schema.org/"</c-><c- p>,</c->
  <c- u>"xsd"</c-><c- o>:</c-> <c- u>"https://www.w3.org/2001/XMLSchema#"</c-><c- p>,</c->

  <c- u>"WCAG20"</c-><c- o>:</c-> <c- u>"https://www.w3.org/TR/WCAG20#"</c-><c- p>,</c->
  <c- u>"WCAG22"</c-><c- o>:</c-> <c- u>"https://www.w3.org/TR/WCAG22#"</c-><c- p>,</c->
  <c- u>"ACT-RULES-CG"</c-><c- o>:</c-> <c- u>"https://act-rules.github.io/"</c-><c- p>,</c->

  <c- u>"WebSite"</c-><c- o>:</c-> <c- u>"schema:WebSite"</c-><c- p>,</c->
  <c- u>"WebPage"</c-><c- o>:</c-> <c- u>"schema:WebPage"</c-><c- p>,</c->

  <c- u>"title"</c-><c- o>:</c-> <c- u>"dct:title"</c-><c- p>,</c->
  <c- u>"description"</c-><c- o>:</c-> <c- u>"dct:description"</c-><c- p>,</c->
  <c- u>"date"</c-><c- o>:</c-> <c- u>"dct:date"</c-><c- p>,</c->
  <c- u>"hasVersion"</c-><c- o>:</c-> <c- u>"dct:hasVesion"</c-><c- p>,</c-> 
  <c- u>"isPartOf"</c-><c- o>:</c-> <c- u>"dct:isPartOf"</c-><c- p>,</c-> 
  <c- u>"hasPart"</c-><c- o>:</c-> <c- u>"dct:hasPart"</c-><c- p>,</c->
  <c- u>"source"</c-><c- o>:</c-> <c- u>"dct:source"</c-><c- p>,</c->

  <c- u>"Agent"</c-><c- o>:</c-> <c- u>"foaf:Agent"</c-><c- p>,</c->
  <c- u>"Person"</c-><c- o>:</c-> <c- u>"foaf:Person"</c-><c- p>,</c->
  <c- u>"Organization"</c-><c- o>:</c-> <c- u>"foaf:Organization"</c-><c- p>,</c->
  <c- u>"Group"</c-><c- o>:</c-> <c- u>"foaf:Group"</c-><c- p>,</c->
  <c- u>"Document"</c-><c- o>:</c-> <c- u>"foaf:Document"</c-><c- p>,</c->
  <c- u>"name"</c-><c- o>:</c-> <c- u>"foaf:name"</c-><c- p>,</c->
  <c- u>"firstName"</c-><c- o>:</c-> <c- u>"foaf:firstName"</c-><c- p>,</c->
  <c- u>"surname"</c-><c- o>:</c-> <c- u>"foaf:surname"</c-><c- p>,</c->
  <c- u>"mbox"</c-><c- o>:</c-> <c- u>"foaf:mbox"</c-><c- p>,</c->
  <c- u>"mbox_sha1sum"</c-><c- o>:</c-> <c- u>"foaf:mbox_sha1sum"</c-><c- p>,</c->
  <c- u>"member"</c-><c- o>:</c-> <c- u>"foaf:member"</c-><c- p>,</c->
  <c- u>"homepage"</c-><c- o>:</c-> <c- u>"foaf:homepage"</c-><c- p>,</c->

  <c- u>"assertedBy"</c-><c- o>:</c-> <c- p>{</c-> <c- u>"@type"</c-><c- o>:</c-> <c- u>"@id"</c-> <c- p>},</c->
  <c- u>"subject"</c-><c- o>:</c-> <c- p>{</c-> <c- u>"@type"</c-><c- o>:</c-> <c- u>"@id"</c-> <c- p>},</c->
  <c- u>"test"</c-><c- o>:</c-> <c- p>{</c-> <c- u>"@type"</c-><c- o>:</c-> <c- u>"@id"</c-> <c- p>},</c->
  <c- u>"mode"</c-><c- o>:</c-> <c- p>{</c-> <c- u>"@type"</c-><c- o>:</c-> <c- u>"@id"</c-> <c- p>},</c->
  <c- u>"outcome"</c-><c- o>:</c-> <c- p>{</c-> <c- u>"@type"</c-><c- o>:</c-> <c- u>"@id"</c-> <c- p>},</c->
  <c- u>"pointer"</c-><c- o>:</c-> <c- p>{</c->
    <c- u>"@id"</c-><c- o>:</c-> <c- u>"earl:pointer"</c-><c- p>,</c->
    <c- u>"@type"</c-><c- o>:</c-> <c- u>"ptr:CSSSelectorPointer"</c->
  <c- p>}</c->
<c- p>}</c->
</pre>
        </aside>
        <h2 class="heading settled" id="Acknowledgments"><span class="content">附录 2：致谢</span><a class="self-link"
                href="#Acknowledgments"></a></h2>
        <p>本节为<em>非规范性内容</em>。</p>
        <h3 class="heading settled" id="participants"><span class="content">参与本文件开发的 AG WG 成员</span><a class="self-link"
                href="#participants"></a>
        </h3>
        <p>Shadi Abou-Zahra、Trevor Bostic、Helen Burge、Tom Brunet、Romain Deltour、Catherine Droege、Kathy Eng、Wilco
            Fiers、Alistair Garrison、Kasper Isager、严顺国、Todd Libby、Chris Loiselle、Sage Keriazes、Maureen
            Kraft、Daniel Montalvo、Mary Jo Mueller、Jey Nandakumar、Charu Pandhi、Stein Erik Skotkjerra、Suji Sreerama、
            Anne Thyme Nørregaard 和 Kathleen Wahlbin。</p>
        <h3 class="heading settled" id="enabling-funders"><span class="content">支持资助方</span><a class="self-link"
                href="#enabling-funders"></a></h3>
        <p>本出版物由<a href="https://www.w3.org/WAI/about/projects/wai-tools/">WAI-Tools 项目</a>支持开发，该项目由欧盟委员会（EC）在 Horizon
            2020 计划（资助协议 780057）下共同资助。出版物内容不一定反映欧盟委员会（EC）或欧盟（EU）成员国的观点或政策。</p>
        <h2 class="heading settled" id="Change_History"><span class="content">附录 3：变更历史</span><a class="self-link"
                href="#Change_History"></a></h2>
        <p>本节为<em>非规范性内容</em>。</p>
        <h3 class="heading settled" id="changes-since-FPWD"><span class="content">自 <a
                    href="https://www.w3.org/TR/2024/WD-act-rules-format-1.1-20240618/">ACT Rules Format 1.1
                    首次公开工作草案</a> 以来的变更</span><a class="self-link" href="#changes-since-FPWD"></a></h3>
        <ul>
            <li><strong>2 范围</strong> 明确 ACT Rules Format 1.1 并非与 1.0 完全向后兼容
            <li><strong>4.9 示例</strong> 明确输入规则测试用例必须与一致性要求保持一致

            <li><strong>全部</strong> Test cases 更名为示例（examples）
            <li><strong>全部</strong> 示例现在仅使用 Bikeshed 自动编号
            <li><strong>附录 1：用 JSON-LD 和 EARL 表达 ACT Rule 结果</strong> 新增本节示例正确渲染的标记
            <li><strong>4.2. 规则描述</strong> 增加文本含有语言和书写方向元数据的假设
            <li><strong>4. ACT 规则结构</strong> 强调 ACT 规则需支持本地化
            <li><strong>4.1. 规则标识符</strong> 细化判断规则标识符唯一性的说明
            <li><strong>4.4.1.2. 次要要求</strong> 次要要求说明不再需要在背景部分给出。
            <li><strong>9. 定义</strong> 更新 cantTell 和 Untested 的定义。
            <li><strong>4.12. 术语表</strong> 支持内部和外部术语表

            <li><strong>7. 隐私注意事项</strong> 新增
            <li><strong>8. 安全注意事项</strong> 新增
        </ul>
        <h3 class="heading settled" id="changes-since-1.0"><span class="content">自 <a
                    href="https://www.w3.org/TR/act-rules-format-1.0/">ACT Rules Format 1.0</a> 以来的变更</span><a
                class="self-link" href="#changes-since-1.0"></a></h3>
        <ul>
            <li><strong>4. 规则结构</strong> Accessibility Support 与 Assumptions 现为背景的子节。
            <li><strong>4.4. 辅助功能要求映射</strong> 辅助功能要求现分为一致性要求与次要要求。
            <li><strong>4.6 适用性</strong> 接受主观适用性表达。客观与通俗要求由 <em class="rfc2119">must</em> 改为 <em
                    class="rfc2119">should</em>。
            <li><strong>4.8. 背景</strong> 新增可选相关规则和其他资源子节
            <li><strong>4.10. 变更日志</strong> 变更日志重命名为规则版本
            <li><strong>4.11 ACT 规则格式版本</strong> 新增需标识规则格式兼容版本的要求
            <li><strong>4.14. 实现</strong> 新增该节，包括判断与 ACT 规则一致性的方法
            <li><strong>7. 定义</strong> Outcome 定义涵盖 cantTell 与 untested
            <li><strong>整体</strong> 指向 W3C 规范的链接已更新至最新版
        </ul>
        <p>所有已发布版本的变更可通过 <a
                href="https://services.w3.org/htmldiff?doc1=https://www.w3.org/TR/act-rules-format/&amp;doc2=https://w3c.github.io/wcag-act/act-rules-format.html">Editor's
                draft 到 Rules Format 1.0 推荐版的差异</a>查看</p>
    </main>
    <div data-fill-with="conformance">
        <h2 class="no-ref no-num heading settled" id="w3c-conformance"><span class="content">一致性</span><a
                class="self-link" href="#w3c-conformance"></a></h2>
        <h3 class="no-ref no-num heading settled" id="w3c-conventions"><span class="content">文档约定</span><a
                class="self-link" href="#w3c-conventions"></a></h3>
        <p>一致性要求由描述性断言结合 RFC 2119 术语表述。本规范中的关键词“MUST”、 “MUST NOT”、 “REQUIRED”、 “SHALL”、 “SHALL NOT”、 “SHOULD”、 “SHOULD
            NOT”、 “RECOMMENDED”、 “MAY” 和 “OPTIONAL”需按 RFC 2119 定义理解。为便于阅读，本文未将这些词全部大写。</p>
        <p>除非被显式标记为非规范性内容、示例或注释，本文的全部正文均为规范性内容。<a data-link-type="biblio" href="#biblio-rfc2119"
                title="Key words for use in RFCs to Indicate Requirement Levels">[RFC2119]</a>
        </p>
        <p>规范中的示例由“例如”引入，或通过 <code>class="example"</code> 与规范性内容区分，如下所示：</p>
        <div class="example" id="w3c-example">
            <a class="self-link" href="#w3c-example"></a>
            <p>这是一个说明性质的示例。</p>
        </div>
        <p>说明性注释以“Note”开头，并用 <code>class="note"</code> 加以区分，例如：</p>
        <p class="note" role="note">注意，这是一个说明性注释。</p>
        <section>
            <h3 class="no-ref no-num heading settled" id="w3c-conformant-algorithms"><span
                    class="content">一致性算法</span><a class="self-link" href="#w3c-conformant-algorithms"></a></h3>
            <p>以命令式表达在算法部分的要求（如“去除所有前导空格字符” 或 “返回 false 并中止步骤”），应按算法前述关键字（“must”、“should”、“may”等）理解。</p>
            <p>以算法或步骤形式表达的一致性要求，可以采用任何实现方式，只要最终结果等效即可。特别要说明的是，本规范所定义的算法旨在易于理解，并不追求高性能。建议实现者优先考虑优化。</p>
        </section>
    </div>
    <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
    <h2 class="no-num no-ref heading settled" id="index"><span class="content">索引</span><a class="self-link"
            href="#index"></a></h2>
    <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">本规范定义的术语</span><a
            class="self-link" href="#index-defined-here"></a></h3>
    <ul class="index">
        <li><a href="#accessibility-requirement">辅助功能要求</a><span>, 见 § 9</span>
        <li><a href="#accessibility-requirements-document">辅助功能要求文档</a><span>, 见 § 9</span>
        <li><a href="#atomic-rules">原子规则</a><span>, 见 § 3</span>
        <li><a href="#check">校验</a><span>, 见 § 9</span>
        <li><a href="#completeness">完整性</a><span>, 见 § 4.14.1</span>
        <li><a href="#composite-rules">复合规则</a><span>, 见 § 3</span>
        <li><a href="#conformance-requirement">一致性要求</a><span>, 见 § 4.4.1.1</span>
        <li><a href="#consistent">一致</a><span>, 见 § 4.14.1</span>
        <li><a href="#descriptive-title">描述性标题</a><span>, 见 § 4</span>
        <li><a href="#further-testing-is-needed">需进一步测试</a><span>, 见 § 4.4.1.1</span>
        <li><a href="#implementation">实现</a><span>, 见 § 9</span>
        <li><a href="#not-satisfied">未满足</a><span>, 见 § 4.4.1.1</span>
        <li><a href="#outcome">结果</a><span>, 见 § 9</span>
        <li><a href="#partially-consistent">部分一致</a><span>, 见 § 4.14.2</span>
        <li><a href="#rule-mapping">规则映射</a><span>, 见 § 4.14.1</span>
        <li><a href="#satisfied">满足</a><span>, 见 § 4.4.1.1</span>
        <li><a href="#satisfying-tests">满足性测试</a><span>, 见 § 4.4.1.1</span>
        <li><a href="#secondary-requirement">次要要求</a><span>, 见 § 4.4.1.2</span>
        <li><a href="#set-of-checks">校验集</a><span>, 见 § 4.14.3</span>
        <li><a href="#test-subject">测试对象</a><span>, 见 § 9</span>
        <li><a href="#test-target">测试目标</a><span>, 见 § 9</span>
        <li><a href="#true-positives">真实阳性</a><span>, 见 § 4.14.1</span>
    </ul>
    <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">引用定义的术语</span><a
            class="self-link" href="#index-defined-elsewhere"></a></h3>
    <ul class="index">
        <li>
            <a data-link-type="biblio">[I18N-GLOSSARY]</a> 定义如下术语：
            <ul>
                <li><span class="dfn-paneled" id="5e597e00">localisation</span>
            </ul>
    </ul>
    <h2 class="no-num no-ref heading settled" id="references"><span class="content">参考文献</span><a class="self-link"
            href="#references"></a></h2>
    <h3 class="no-num no-ref heading settled" id="normative"><span class="content">规范性参考</span><a class="self-link"
            href="#normative"></a></h3>
    <dl>
        <dt id="biblio-i18n-glossary">[I18N-GLOSSARY]
        <dd>Richard Ishida；Addison Phillips。<a
                href="https://www.w3.org/TR/i18n-glossary/"><cite>国际化词汇表</cite></a>。2024年10月17日。说明。URL：<a
                href="https://www.w3.org/TR/i18n-glossary/">https://www.w3.org/TR/i18n-glossary/</a>
        <dt id="biblio-rfc2119">[RFC2119]
        <dd>S. Bradner。<a href="https://datatracker.ietf.org/doc/html/rfc2119"><cite>RFC
                    中用于表示需求级别的关键字</cite></a>。1997年3月。最佳当前实践。URL：<a
                href="https://datatracker.ietf.org/doc/html/rfc2119">https://datatracker.ietf.org/doc/html/rfc2119</a>
    </dl>
    <h3 class="no-num no-ref heading settled" id="informative"><span class="content">参考性参考</span><a class="self-link"
            href="#informative"></a></h3>
    <dl>
        <dt id="biblio-accname-aam-11">[ACCNAME-AAM-1.1]
        <dd>Joanmarie Diggs；Bryan Garaventa；Michael Cooper。<a href="https://www.w3.org/TR/accname-1.1/"><cite>辅助名称与描述计算
                    1.1</cite></a>。2018年12月18日。REC。URL：<a
                href="https://www.w3.org/TR/accname-1.1/">https://www.w3.org/TR/accname-1.1/</a>
        <dt id="biblio-css-2018">[CSS-2018]
        <dd>Tab Atkins Jr.；Elika Etemad；Florian Rivoal。<a href="https://www.w3.org/TR/css-2018/"><cite>CSS 快照
                    2018</cite></a>。2019年1月22日。说明。URL：<a
                href="https://www.w3.org/TR/css-2018/">https://www.w3.org/TR/css-2018/</a>
        <dt id="biblio-dom">[DOM]
        <dd>Anne van Kesteren。<a href="https://dom.spec.whatwg.org/"><cite>DOM 标准</cite></a>。现行标准。URL：<a
                href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
        <dt id="biblio-earl10-schema">[EARL10-Schema]
        <dd>Shadi Abou-Zahra。<a href="https://www.w3.org/TR/EARL10-Schema/"><cite>评估与报告语言 (EARL) 1.0
                    Schema</cite></a>。2017年2月2日。说明。URL：<a
                href="https://www.w3.org/TR/EARL10-Schema/">https://www.w3.org/TR/EARL10-Schema/</a>
        <dt id="biblio-epub-33">[EPUB-33]
        <dd>Ivan Herman；Matt Garrish；Dave Cramer。<a href="https://www.w3.org/TR/epub-33/"><cite>EPUB 3.3</cite></a>。
            2025年3月27日。REC。URL：<a href="https://www.w3.org/TR/epub-33/">https://www.w3.org/TR/epub-33/</a>
        <dt id="biblio-html">[HTML]
        <dd>Anne van Kesteren 等。<a href="https://html.spec.whatwg.org/multipage/"><cite>HTML 标准</cite></a>。现行标准。URL：<a
                href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
        <dt id="biblio-http11">[HTTP11]
        <dd>R. Fielding（编），M. Nottingham（编），J. Reschke（编）。<a
                href="https://httpwg.org/specs/rfc9112.html"><cite>HTTP/1.1</cite></a>。2022年6月。互联网标准。URL：<a
                href="https://httpwg.org/specs/rfc9112.html">https://httpwg.org/specs/rfc9112.html</a>
        <dt id="biblio-string-meta">[STRING-META]
        <dd>Richard Ishida；Addison Phillips。<a href="https://www.w3.org/TR/string-meta/"><cite>Web
                    字符串：语言与书写方向元数据</cite></a>。2024年10月17日。说明。URL：<a
                href="https://www.w3.org/TR/string-meta/">https://www.w3.org/TR/string-meta/</a>
        <dt id="biblio-svg2">[SVG2]
        <dd>Amelia Bellamy-Royds 等。<a href="https://www.w3.org/TR/SVG2/"><cite>可缩放矢量图形 (SVG)
                    2</cite></a>。2018年10月4日。CR。URL：<a href="https://www.w3.org/TR/SVG2/">https://www.w3.org/TR/SVG2/</a>
        <dt id="biblio-uaag20">[UAAG20]
        <dd>James Allan 等。<a href="https://www.w3.org/TR/UAAG20/"><cite>用户代理辅助功能指南 (UAAG)
                    2.0</cite></a>。2015年12月15日。说明。URL：<a
                href="https://www.w3.org/TR/UAAG20/">https://www.w3.org/TR/UAAG20/</a>
        <dt id="biblio-wai-aria">[WAI-ARIA]
        <dd>James Craig、Michael Cooper 等。<a href="https://www.w3.org/TR/wai-aria/"><cite>无障碍富互联网应用 (WAI-ARIA)
                    1.0</cite></a>。2014年3月20日。REC。URL：<a
                href="https://www.w3.org/TR/wai-aria/">https://www.w3.org/TR/wai-aria/</a>
        <dt id="biblio-wcag22">[WCAG22]
        <dd>Michael Cooper 等。<a href="https://www.w3.org/TR/WCAG22/"><cite>网页内容辅助功能指南 (WCAG)
                    2.2</cite></a>。2024年12月12日。REC。URL：<a
                href="https://www.w3.org/TR/WCAG22/">https://www.w3.org/TR/WCAG22/</a>
    </dl>
    <script>/* Boilerplate: script-dom-helper */
        "use strict";
        function query(sel) { return document.querySelector(sel); }

        function queryAll(sel) { return [...document.querySelectorAll(sel)]; }

        function iter(obj) {
            if (!obj) return [];
            var it = obj[Symbol.iterator];
            if (it) return it;
            return Object.entries(obj);
        }

        function mk(tagname, attrs, ...children) {
            const el = document.createElement(tagname);
            for (const [k, v] of iter(attrs)) {
                if (k.slice(0, 3) == "_on") {
                    const eventName = k.slice(3);
                    el.addEventListener(eventName, v);
                } else if (k[0] == "_") {
                    // property, not attribute
                    el[k.slice(1)] = v;
                } else {
                    if (v === false || v == null) {
                        continue;
                    } else if (v === true) {
                        el.setAttribute(k, "");
                        continue;
                    } else {
                        el.setAttribute(k, v);
                    }
                }
            }
            append(el, children);
            return el;
        }

        /* Create shortcuts for every known HTML element */
        [
            "a",
            "abbr",
            "acronym",
            "address",
            "applet",
            "area",
            "article",
            "aside",
            "audio",
            "b",
            "base",
            "basefont",
            "bdo",
            "big",
            "blockquote",
            "body",
            "br",
            "button",
            "canvas",
            "caption",
            "center",
            "cite",
            "code",
            "col",
            "colgroup",
            "datalist",
            "dd",
            "del",
            "details",
            "dfn",
            "dialog",
            "div",
            "dl",
            "dt",
            "em",
            "embed",
            "fieldset",
            "figcaption",
            "figure",
            "font",
            "footer",
            "form",
            "frame",
            "frameset",
            "head",
            "header",
            "h1",
            "h2",
            "h3",
            "h4",
            "h5",
            "h6",
            "hr",
            "html",
            "i",
            "iframe",
            "img",
            "input",
            "ins",
            "kbd",
            "label",
            "legend",
            "li",
            "link",
            "main",
            "map",
            "mark",
            "meta",
            "meter",
            "nav",
            "nobr",
            "noscript",
            "object",
            "ol",
            "optgroup",
            "option",
            "output",
            "p",
            "param",
            "pre",
            "progress",
            "q",
            "s",
            "samp",
            "script",
            "section",
            "select",
            "small",
            "source",
            "span",
            "strike",
            "strong",
            "style",
            "sub",
            "summary",
            "sup",
            "table",
            "tbody",
            "td",
            "template",
            "textarea",
            "tfoot",
            "th",
            "thead",
            "time",
            "title",
            "tr",
            "u",
            "ul",
            "var",
            "video",
            "wbr",
            "xmp",
        ].forEach(tagname => {
            mk[tagname] = (...args) => mk(tagname, ...args);
        });

        function* nodesFromChildList(children) {
            for (const child of children.flat(Infinity)) {
                if (child instanceof Node) {
                    yield child;
                } else {
                    yield new Text(child);
                }
            }
        }
        function append(el, ...children) {
            for (const child of nodesFromChildList(children)) {
                if (el instanceof Node) el.appendChild(child);
                else el.push(child);
            }
            return el;
        }

        function insertAfter(el, ...children) {
            for (const child of nodesFromChildList(children)) {
                el.parentNode.insertBefore(child, el.nextSibling);
            }
            return el;
        }

        function clearContents(el) {
            el.innerHTML = "";
            return el;
        }

        function parseHTML(markup) {
            if (markup.toLowerCase().trim().indexOf('<!doctype') === 0) {
                const doc = document.implementation.createHTMLDocument("");
                doc.documentElement.innerHTML = markup;
                return doc;
            } else {
                const el = mk.template({});
                el.innerHTML = markup;
                return el.content;
            }
        }</script>
    <script>/* Boilerplate: script-dfn-panel */
        "use strict";
        {
            let dfnPanelData = {
                "5e597e00": { "dfnID": "5e597e00", "dfnText": "localisation", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dfn-localisation" }], "title": "4. ACT Rule Structure" }], "url": "https://www.w3.org/TR/i18n-glossary/#dfn-localisation" },
                "accessibility-requirement": { "dfnID": "accessibility-requirement", "dfnText": "Accessibility requirement", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-accessibility-requirement" }], "title": "1. Introduction" }, { "refs": [{ "id": "ref-for-accessibility-requirement\u2460" }], "title": "2. Scope" }, { "refs": [{ "id": "ref-for-accessibility-requirement\u2461" }], "title": "3. ACT Rule Types" }, { "refs": [{ "id": "ref-for-accessibility-requirement\u2462" }, { "id": "ref-for-accessibility-requirement\u2463" }], "title": "4.4. Accessibility Requirements Mapping" }, { "refs": [{ "id": "ref-for-accessibility-requirement\u2464" }], "title": "4.4.2. Mapping Outside WCAG" }, { "refs": [{ "id": "ref-for-accessibility-requirement\u2465" }, { "id": "ref-for-accessibility-requirement\u2466" }], "title": "4.4.3. Rules Without Accessibility Requirements" }, { "refs": [{ "id": "ref-for-accessibility-requirement\u2467" }], "title": "4.14. Implementations (optional)" }, { "refs": [{ "id": "ref-for-accessibility-requirement\u2468" }, { "id": "ref-for-accessibility-requirement\u2460\u24ea" }], "title": "5. Rule Accuracy" }, { "refs": [{ "id": "ref-for-accessibility-requirement\u2460\u2460" }, { "id": "ref-for-accessibility-requirement\u2460\u2461" }], "title": "9. Definitions" }], "url": "#accessibility-requirement" },
                "accessibility-requirements-document": { "dfnID": "accessibility-requirements-document", "dfnText": "Accessibility requirements document", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-accessibility-requirements-document" }], "title": "1. Introduction" }, { "refs": [{ "id": "ref-for-accessibility-requirements-document\u2460" }, { "id": "ref-for-accessibility-requirements-document\u2461" }, { "id": "ref-for-accessibility-requirements-document\u2462" }], "title": "4.4. Accessibility Requirements Mapping" }, { "refs": [{ "id": "ref-for-accessibility-requirements-document\u2463" }], "title": "4.4.2. Mapping Outside WCAG" }, { "refs": [{ "id": "ref-for-accessibility-requirements-document\u2464" }, { "id": "ref-for-accessibility-requirements-document\u2465" }], "title": "4.4.3. Rules Without Accessibility Requirements" }, { "refs": [{ "id": "ref-for-accessibility-requirements-document\u2466" }], "title": "4.4.4. External Accessibility Requirements Mapping" }, { "refs": [{ "id": "ref-for-accessibility-requirements-document\u2467" }], "title": "4.14.1. Consistency" }], "url": "#accessibility-requirements-document" },
                "atomic-rules": { "dfnID": "atomic-rules", "dfnText": "Atomic rules", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-atomic-rules" }], "title": "3. ACT Rule Types" }, { "refs": [{ "id": "ref-for-atomic-rules\u2460" }], "title": "4.5. Rule Input" }, { "refs": [{ "id": "ref-for-atomic-rules\u2461" }, { "id": "ref-for-atomic-rules\u2462" }], "title": "4.5.1. Input Aspects (Atomic rules only)" }, { "refs": [{ "id": "ref-for-atomic-rules\u2463" }], "title": "4.5.2. Input Rules (Composite rules only)" }, { "refs": [{ "id": "ref-for-atomic-rules\u2464" }], "title": "4.6.1. Applicability for Atomic Rules" }, { "refs": [{ "id": "ref-for-atomic-rules\u2465" }], "title": "4.7.1. Expectations for Atomic Rules" }], "url": "#atomic-rules" },
                "check": { "dfnID": "check", "dfnText": "Check", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-check" }, { "id": "ref-for-check\u2460" }, { "id": "ref-for-check\u2461" }], "title": "4.14. Implementations (optional)" }, { "refs": [{ "id": "ref-for-check\u2462" }, { "id": "ref-for-check\u2463" }, { "id": "ref-for-check\u2464" }, { "id": "ref-for-check\u2465" }], "title": "4.14.1. Consistency" }, { "refs": [{ "id": "ref-for-check\u2466" }], "title": "4.14.2. Partial Consistency" }, { "refs": [{ "id": "ref-for-check\u2467" }], "title": "4.14.3. Consistency with Multiple Checks" }, { "refs": [{ "id": "ref-for-check\u2468" }], "title": "9. Definitions" }], "url": "#check" },
                "completeness": { "dfnID": "completeness", "dfnText": "Completeness", "external": false, "refSections": [], "url": "#completeness" },
                "composite-rules": { "dfnID": "composite-rules", "dfnText": "Composite rules", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-composite-rules" }], "title": "4.5. Rule Input" }, { "refs": [{ "id": "ref-for-composite-rules\u2460" }], "title": "4.5.2. Input Rules (Composite rules only)" }, { "refs": [{ "id": "ref-for-composite-rules\u2461" }], "title": "4.7.2. Expectations for Composite Rules" }, { "refs": [{ "id": "ref-for-composite-rules\u2462" }], "title": "4.9. Examples" }], "url": "#composite-rules" },
                "conformance-requirement": { "dfnID": "conformance-requirement", "dfnText": "Conformance Requirement", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-conformance-requirement" }], "title": "4.9. Examples" }, { "refs": [{ "id": "ref-for-conformance-requirement\u2460" }, { "id": "ref-for-conformance-requirement\u2461" }], "title": "4.14.1. Consistency" }], "url": "#conformance-requirement" },
                "consistent": { "dfnID": "consistent", "dfnText": "consistent", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-consistent" }], "title": "4.14.2. Partial Consistency" }, { "refs": [{ "id": "ref-for-consistent\u2460" }, { "id": "ref-for-consistent\u2461" }], "title": "4.14.3. Consistency with Multiple Checks" }], "url": "#consistent" },
                "descriptive-title": { "dfnID": "descriptive-title", "dfnText": "Descriptive Title", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-descriptive-title" }], "title": "4.5.2. Input Rules (Composite rules only)" }], "url": "#descriptive-title" },
                "further-testing-is-needed": { "dfnID": "further-testing-is-needed", "dfnText": "further testing is needed", "external": false, "refSections": [], "url": "#further-testing-is-needed" },
                "implementation": { "dfnID": "implementation", "dfnText": "Implementation", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-implementation" }, { "id": "ref-for-implementation\u2460" }], "title": "4.14. Implementations (optional)" }, { "refs": [{ "id": "ref-for-implementation\u2461" }], "title": "4.14.3. Consistency with Multiple Checks" }], "url": "#implementation" },
                "not-satisfied": { "dfnID": "not-satisfied", "dfnText": "not satisfied", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-not-satisfied" }], "title": "4.4.1.2. Secondary Requirements" }], "url": "#not-satisfied" },
                "outcome": { "dfnID": "outcome", "dfnText": "Outcome", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-outcome" }, { "id": "ref-for-outcome\u2460" }, { "id": "ref-for-outcome\u2461" }, { "id": "ref-for-outcome\u2462" }], "title": "3. ACT Rule Types" }, { "refs": [{ "id": "ref-for-outcome\u2463" }], "title": "4.4. Accessibility Requirements Mapping" }, { "refs": [{ "id": "ref-for-outcome\u2464" }], "title": "4.4.1. Outcome Mapping" }, { "refs": [{ "id": "ref-for-outcome\u2465" }], "title": "4.4.3. Rules Without Accessibility Requirements" }, { "refs": [{ "id": "ref-for-outcome\u2466" }], "title": "4.5.2. Input Rules (Composite rules only)" }, { "refs": [{ "id": "ref-for-outcome\u2467" }], "title": "4.7. Expectations" }, { "refs": [{ "id": "ref-for-outcome\u2468" }], "title": "4.7.1. Expectations for Atomic Rules" }, { "refs": [{ "id": "ref-for-outcome\u2460\u24ea" }], "title": "4.7.2. Expectations for Composite Rules" }, { "refs": [{ "id": "ref-for-outcome\u2460\u2460" }], "title": "4.9. Examples" }, { "refs": [{ "id": "ref-for-outcome\u2460\u2461" }], "title": "4.12. Glossary" }, { "refs": [{ "id": "ref-for-outcome\u2460\u2462" }], "title": "4.13. Issues List (optional)" }, { "refs": [{ "id": "ref-for-outcome\u2460\u2463" }], "title": "4.14. Implementations (optional)" }, { "refs": [{ "id": "ref-for-outcome\u2460\u2464" }], "title": "4.14.3. Consistency with Multiple Checks" }, { "refs": [{ "id": "ref-for-outcome\u2460\u2465" }], "title": "9. Definitions" }], "url": "#outcome" },
                "partially-consistent": { "dfnID": "partially-consistent", "dfnText": "partially consistent", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-partially-consistent" }], "title": "4.14.3. Consistency with Multiple Checks" }], "url": "#partially-consistent" },
                "rule-mapping": { "dfnID": "rule-mapping", "dfnText": "Rule Mapping", "external": false, "refSections": [], "url": "#rule-mapping" },
                "satisfied": { "dfnID": "satisfied", "dfnText": "satisfied", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-satisfied" }], "title": "4.4.1.1. Conformance Requirements" }], "url": "#satisfied" },
                "satisfying-tests": { "dfnID": "satisfying-tests", "dfnText": "satisfying tests", "external": false, "refSections": [], "url": "#satisfying-tests" },
                "secondary-requirement": { "dfnID": "secondary-requirement", "dfnText": "secondary accessibility requirement", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-secondary-requirement" }], "title": "4.14.1. Consistency" }], "url": "#secondary-requirement" },
                "set-of-checks": { "dfnID": "set-of-checks", "dfnText": "set of checks", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-set-of-checks" }], "title": "4.14.3. Consistency with Multiple Checks" }], "url": "#set-of-checks" },
                "test-subject": { "dfnID": "test-subject", "dfnText": "Test Subject", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-test-subject" }, { "id": "ref-for-test-subject\u2460" }], "title": "3. ACT Rule Types" }, { "refs": [{ "id": "ref-for-test-subject\u2461" }], "title": "4.4.1. Outcome Mapping" }, { "refs": [{ "id": "ref-for-test-subject\u2462" }], "title": "4.5. Rule Input" }, { "refs": [{ "id": "ref-for-test-subject\u2463" }], "title": "4.5.1. Input Aspects (Atomic rules only)" }, { "refs": [{ "id": "ref-for-test-subject\u2464" }], "title": "4.6. Applicability" }, { "refs": [{ "id": "ref-for-test-subject\u2465" }], "title": "4.6.1. Applicability for Atomic Rules" }, { "refs": [{ "id": "ref-for-test-subject\u2466" }, { "id": "ref-for-test-subject\u2467" }, { "id": "ref-for-test-subject\u2468" }], "title": "9. Definitions" }], "url": "#test-subject" },
                "test-target": { "dfnID": "test-target", "dfnText": "Test Target", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-test-target" }], "title": "3. ACT Rule Types" }, { "refs": [{ "id": "ref-for-test-target\u2460" }], "title": "4.5.2. Input Rules (Composite rules only)" }, { "refs": [{ "id": "ref-for-test-target\u2461" }], "title": "4.6.1. Applicability for Atomic Rules" }, { "refs": [{ "id": "ref-for-test-target\u2462" }, { "id": "ref-for-test-target\u2463" }], "title": "4.7. Expectations" }, { "refs": [{ "id": "ref-for-test-target\u2464" }], "title": "4.7.1. Expectations for Atomic Rules" }, { "refs": [{ "id": "ref-for-test-target\u2465" }], "title": "4.7.2. Expectations for Composite Rules" }, { "refs": [{ "id": "ref-for-test-target\u2466" }, { "id": "ref-for-test-target\u2467" }], "title": "5. Rule Accuracy" }, { "refs": [{ "id": "ref-for-test-target\u2468" }, { "id": "ref-for-test-target\u2460\u24ea" }, { "id": "ref-for-test-target\u2460\u2460" }, { "id": "ref-for-test-target\u2460\u2461" }], "title": "9. Definitions" }], "url": "#test-target" },
                "true-positives": { "dfnID": "true-positives", "dfnText": "True positives", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-true-positives" }], "title": "4.14.2. Partial Consistency" }], "url": "#true-positives" },
            };

            document.addEventListener("DOMContentLoaded", () => {
                genAllDfnPanels();

                document.body.addEventListener("click", (e) => {
                    // If not handled already, just hide all dfn panels.
                    hideAllDfnPanels();
                });
            });

            window.addEventListener("resize", () => {
                // Pin any visible dfn panel
                queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(el => positionDfnPanel(el));
            });

            function genAllDfnPanels() {
                for (const panelData of Object.values(dfnPanelData)) {
                    const dfnID = panelData.dfnID;
                    const dfn = document.getElementById(dfnID);
                    if (!dfn) {
                        console.log(`Can't find dfn#${dfnID}.`, panelData);
                        continue;
                    }
                    dfn.panelData = panelData;
                    insertDfnPopupAction(dfn);
                }
            }

            function genDfnPanel(dfn, { dfnID, url, dfnText, refSections, external }) {
                const dfnPanel = mk.aside({
                    class: "dfn-panel on",
                    id: `infopanel-for-${dfnID}`,
                    "data-for": dfnID,
                    "aria-labelled-by": `infopaneltitle-for-${dfnID}`,
                },
                    mk.span({ id: `infopaneltitle-for-${dfnID}`, style: "display:none" },
                        `Info about the '${dfnText}' ${external ? "external" : ""} reference.`),
                    mk.a({ href: url, class: "dfn-link" }, url),
                    refSections.length == 0 ? [] :
                        mk.b({}, "Referenced in:"),
                    mk.ul({},
                        ...refSections.map(section =>
                            mk.li({},
                                ...section.refs.map((ref, refI) =>
                                    [
                                        mk.a({ href: `#${ref.id}` },
                                            (refI == 0) ? section.title : `(${refI + 1})`
                                        ),
                                        " ",
                                    ]
                                ),
                            ),
                        ),
                    ),
                    genLinkingSyntaxes(dfn),
                );

                dfnPanel.addEventListener('click', (event) => {
                    if (event.target.nodeName == 'A') {
                        scrollToTargetAndHighlight(event);
                        pinDfnPanel(dfnPanel);
                    }
                    event.stopPropagation();
                    refocusOnTarget(event);
                });
                dfnPanel.addEventListener('keydown', (event) => {
                    if (event.keyCode == 27) { // Escape key
                        hideDfnPanel({ dfnPanel });
                        event.stopPropagation();
                        event.preventDefault();
                    }
                });

                dfnPanel.dfn = dfn;
                dfn.dfnPanel = dfnPanel;
                return dfnPanel;
            }



            function hideAllDfnPanels() {
                // Delete the currently-active dfn panel.
                queryAll(".dfn-panel").forEach(dfnPanel => hideDfnPanel({ dfnPanel }));
            }

            function showDfnPanel(dfn) {
                hideAllDfnPanels(); // Only display one at a time.

                dfn.setAttribute("aria-expanded", "true");

                const dfnPanel = genDfnPanel(dfn, dfn.panelData);

                // Give the dfn a unique tabindex, and then
                // give all the tabbable panel bits successive indexes.
                let tabIndex = 100;
                dfn.tabIndex = tabIndex++;
                const tabbable = dfnPanel.querySelectorAll(":is(a, button)");
                for (const el of tabbable) {
                    el.tabIndex = tabIndex++;
                }

                append(document.body, dfnPanel);
                positionDfnPanel(dfnPanel);
            }

            function positionDfnPanel(dfnPanel) {
                const dfn = dfnPanel.dfn;
                const dfnPos = getBounds(dfn);
                dfnPanel.style.top = dfnPos.bottom + "px";
                dfnPanel.style.left = dfnPos.left + "px";

                const panelPos = dfnPanel.getBoundingClientRect();
                const panelMargin = 8;
                const maxRight = document.body.parentNode.clientWidth - panelMargin;
                if (panelPos.right > maxRight) {
                    const overflowAmount = panelPos.right - maxRight;
                    const newLeft = Math.max(panelMargin, dfnPos.left - overflowAmount);
                    dfnPanel.style.left = newLeft + "px";
                }
            }

            function pinDfnPanel(dfnPanel) {
                // Switch it to "activated" state, which pins it.
                dfnPanel.classList.add("activated");
                dfnPanel.style.position = "fixed";
                dfnPanel.style.left = null;
                dfnPanel.style.top = null;
            }

            function hideDfnPanel({ dfn, dfnPanel }) {
                if (!dfnPanel) dfnPanel = dfn.dfnPanel;
                if (!dfn) dfn = dfnPanel.dfn;
                dfn.dfnPanel = undefined;
                dfnPanel.dfn = undefined;
                dfn.setAttribute("aria-expanded", "false");
                dfn.tabIndex = undefined;
                dfnPanel.remove()
            }

            function toggleDfnPanel(dfn) {
                if (dfn.dfnPanel) {
                    hideDfnPanel(dfn);
                } else {
                    showDfnPanel(dfn);
                }
            }

            function insertDfnPopupAction(dfn) {
                dfn.setAttribute('role', 'button');
                dfn.setAttribute('aria-expanded', 'false')
                dfn.tabIndex = 0;
                dfn.classList.add('has-dfn-panel');
                dfn.addEventListener('click', (event) => {
                    toggleDfnPanel(dfn);
                    event.stopPropagation();
                });
                dfn.addEventListener('keypress', (event) => {
                    const kc = event.keyCode;
                    // 32->Space, 13->Enter
                    if (kc == 32 || kc == 13) {
                        toggleDfnPanel(dfn);
                        event.stopPropagation();
                        event.preventDefault();
                    }
                });
            }

            function refocusOnTarget(event) {
                const target = event.target;
                setTimeout(() => {
                    // Refocus on the event.target element.
                    // This is needed after browser scrolls to the destination.
                    target.focus();
                });
            }

            // TODO: shared util
            // Returns the root-level absolute position {left and top} of element.
            function getBounds(el, relativeTo = document.body) {
                const relativeRect = relativeTo.getBoundingClientRect();
                const elRect = el.getBoundingClientRect();
                const top = elRect.top - relativeRect.top;
                const left = elRect.left - relativeRect.left;
                return {
                    top,
                    left,
                    bottom: top + elRect.height,
                    right: left + elRect.width,
                }
            }

            function scrollToTargetAndHighlight(event) {
                let hash = event.target.hash;
                if (hash) {
                    hash = decodeURIComponent(hash.substring(1));
                    const dest = document.getElementById(hash);
                    if (dest) {
                        dest.classList.add('highlighted');
                        setTimeout(() => dest.classList.remove('highlighted'), 1000);
                    }
                }
            }

            // Functions, divided by link type, that wrap an autolink's
            // contents with the appropriate outer syntax.
            // Alternately, a string naming another type they format
            // the same as.
            function needsFor(type) {
                switch (type) {
                    case "descriptor":
                    case "value":
                    case "element-attr":
                    case "attr-value":
                    case "element-state":
                    case "method":
                    case "constructor":
                    case "argument":
                    case "attribute":
                    case "const":
                    case "dict-member":
                    case "event":
                    case "enum-value":
                    case "stringifier":
                    case "serializer":
                    case "iterator":
                    case "maplike":
                    case "setlike":
                    case "state":
                    case "mode":
                    case "context":
                    case "facet": return true;

                    default: return false;
                }
            }
            function refusesFor(type) {
                switch (type) {
                    case "property":
                    case "element":
                    case "interface":
                    case "namespace":
                    case "callback":
                    case "dictionary":
                    case "enum":
                    case "exception":
                    case "typedef":
                    case "http-header":
                    case "permission": return true;

                    default: return false;
                }
            }
            function linkFormatterFromType(type) {
                switch (type) {
                    case 'scheme':
                    case 'permission':
                    case 'dfn': return (text) => `[=${text}=]`;

                    case 'abstract-op': return (text) => `[\$${text}\$]`;

                    case 'function':
                    case 'at-rule':
                    case 'selector':
                    case 'value': return (text) => `''${text}''`;

                    case 'http-header': return (text) => `[:${text}:]`;

                    case 'interface':
                    case 'constructor':
                    case 'method':
                    case 'argument':
                    case 'attribute':
                    case 'callback':
                    case 'dictionary':
                    case 'dict-member':
                    case 'enum':
                    case 'enum-value':
                    case 'exception':
                    case 'const':
                    case 'typedef':
                    case 'stringifier':
                    case 'serializer':
                    case 'iterator':
                    case 'maplike':
                    case 'setlike':
                    case 'extended-attribute':
                    case 'event':
                    case 'idl': return (text) => `{{${text}}}`;

                    case 'element-state':
                    case 'element-attr':
                    case 'attr-value':
                    case 'element': return (element) => `<{${element}}>`;

                    case 'grammar': return (text) => `${text} (within a <pre class=prod>)`;

                    case 'type': return (text) => `<<${text}>>`;

                    case 'descriptor':
                    case 'property': return (text) => `'${text}'`;

                    default: return;
                };
            };

            function genLinkingSyntaxes(dfn) {
                if (dfn.tagName != "DFN") return;

                const type = dfn.getAttribute('data-dfn-type');
                if (!type) {
                    console.log(`<dfn> doesn't have a data-dfn-type:`, dfn);
                    return [];
                }

                // Return a function that wraps link text based on the type
                const linkFormatter = linkFormatterFromType(type);
                if (!linkFormatter) {
                    console.log(`<dfn> has an unknown data-dfn-type:`, dfn);
                    return [];
                }

                let ltAlts;
                if (dfn.hasAttribute('data-lt')) {
                    ltAlts = dfn.getAttribute('data-lt')
                        .split("|")
                        .map(x => x.trim());
                } else {
                    ltAlts = [dfn.textContent.trim()];
                }
                if (type == "type") {
                    // lt of "<foo>", but "foo" is the interior;
                    // <<foo/bar>> is how you write it with a for,
                    // not <foo/<bar>> or whatever.
                    for (var i = 0; i < ltAlts.length; i++) {
                        const lt = ltAlts[i];
                        const match = /<(.*)>/.exec(lt);
                        if (match) { ltAlts[i] = match[1]; }
                    }
                }

                let forAlts;
                if (dfn.hasAttribute('data-dfn-for')) {
                    forAlts = dfn.getAttribute('data-dfn-for')
                        .split(",")
                        .map(x => x.trim());
                } else {
                    forAlts = [''];
                }

                let linkingSyntaxes = [];
                if (!needsFor(type)) {
                    for (const lt of ltAlts) {
                        linkingSyntaxes.push(linkFormatter(lt));
                    }
                }
                if (!refusesFor(type)) {
                    for (const f of forAlts) {
                        linkingSyntaxes.push(linkFormatter(`${f}/${ltAlts[0]}`))
                    }
                }
                return [
                    mk.b({}, 'Possible linking syntaxes:'),
                    mk.ul({},
                        ...linkingSyntaxes.map(link => {
                            const copyLink = async () =>
                                await navigator.clipboard.writeText(link);
                            return mk.li({},
                                mk.div({ class: 'link-item' },
                                    mk.button({
                                        class: 'copy-icon', title: 'Copy',
                                        type: 'button',
                                        _onclick: copyLink,
                                        tabindex: 0,
                                    }, mk.span({ class: 'icon' })),
                                    mk.span({}, link)
                                )
                            );
                        })
                    )
                ];
            }
        }
    </script>
    <script>/* Boilerplate: script-ref-hints */
        "use strict";
        {
            let refsData = {
                "#accessibility-requirement": { "displayText": "accessibility requirement", "export": true, "for_": [], "level": "1.1", "normative": true, "shortname": "act-rules-format", "spec": "act-rules-format-1.1", "status": "local", "text": "accessibility requirement", "type": "dfn", "url": "#accessibility-requirement" },
                "#accessibility-requirements-document": { "displayText": "accessibility requirements document", "export": true, "for_": [], "level": "1.1", "normative": true, "shortname": "act-rules-format", "spec": "act-rules-format-1.1", "status": "local", "text": "accessibility requirements document", "type": "dfn", "url": "#accessibility-requirements-document" },
                "#atomic-rules": { "displayText": "atomic rules", "export": true, "for_": [], "level": "1.1", "normative": true, "shortname": "act-rules-format", "spec": "act-rules-format-1.1", "status": "local", "text": "atomic rules", "type": "dfn", "url": "#atomic-rules" },
                "#check": { "displayText": "check", "export": true, "for_": [], "level": "1.1", "normative": true, "shortname": "act-rules-format", "spec": "act-rules-format-1.1", "status": "local", "text": "check", "type": "dfn", "url": "#check" },
                "#composite-rules": { "displayText": "composite rules", "export": true, "for_": [], "level": "1.1", "normative": true, "shortname": "act-rules-format", "spec": "act-rules-format-1.1", "status": "local", "text": "composite rules", "type": "dfn", "url": "#composite-rules" },
                "#conformance-requirement": { "displayText": "conformance requirement", "export": true, "for_": [], "level": "1.1", "normative": true, "shortname": "act-rules-format", "spec": "act-rules-format-1.1", "status": "local", "text": "conformance requirement", "type": "dfn", "url": "#conformance-requirement" },
                "#consistent": { "displayText": "consistent", "export": true, "for_": [], "level": "1.1", "normative": true, "shortname": "act-rules-format", "spec": "act-rules-format-1.1", "status": "local", "text": "consistent", "type": "dfn", "url": "#consistent" },
                "#descriptive-title": { "displayText": "descriptive title", "export": true, "for_": [], "level": "1.1", "normative": true, "shortname": "act-rules-format", "spec": "act-rules-format-1.1", "status": "local", "text": "descriptive title", "type": "dfn", "url": "#descriptive-title" },
                "#implementation": { "displayText": "implementation", "export": true, "for_": [], "level": "1.1", "normative": true, "shortname": "act-rules-format", "spec": "act-rules-format-1.1", "status": "local", "text": "implementation", "type": "dfn", "url": "#implementation" },
                "#not-satisfied": { "displayText": "not satisfied", "export": true, "for_": [], "level": "1.1", "normative": true, "shortname": "act-rules-format", "spec": "act-rules-format-1.1", "status": "local", "text": "not satisfied", "type": "dfn", "url": "#not-satisfied" },
                "#outcome": { "displayText": "outcome", "export": true, "for_": [], "level": "1.1", "normative": true, "shortname": "act-rules-format", "spec": "act-rules-format-1.1", "status": "local", "text": "outcome", "type": "dfn", "url": "#outcome" },
                "#partially-consistent": { "displayText": "partially consistent", "export": true, "for_": [], "level": "1.1", "normative": true, "shortname": "act-rules-format", "spec": "act-rules-format-1.1", "status": "local", "text": "partially consistent", "type": "dfn", "url": "#partially-consistent" },
                "#satisfied": { "displayText": "satisfied", "export": true, "for_": [], "level": "1.1", "normative": true, "shortname": "act-rules-format", "spec": "act-rules-format-1.1", "status": "local", "text": "satisfied", "type": "dfn", "url": "#satisfied" },
                "#secondary-requirement": { "displayText": "secondary requirement", "export": true, "for_": [], "level": "1.1", "normative": true, "shortname": "act-rules-format", "spec": "act-rules-format-1.1", "status": "local", "text": "secondary requirement", "type": "dfn", "url": "#secondary-requirement" },
                "#set-of-checks": { "displayText": "set of checks", "export": true, "for_": [], "level": "1.1", "normative": true, "shortname": "act-rules-format", "spec": "act-rules-format-1.1", "status": "local", "text": "set of checks", "type": "dfn", "url": "#set-of-checks" },
                "#test-subject": { "displayText": "test subject", "export": true, "for_": [], "level": "1.1", "normative": true, "shortname": "act-rules-format", "spec": "act-rules-format-1.1", "status": "local", "text": "test subject", "type": "dfn", "url": "#test-subject" },
                "#test-target": { "displayText": "test target", "export": true, "for_": [], "level": "1.1", "normative": true, "shortname": "act-rules-format", "spec": "act-rules-format-1.1", "status": "local", "text": "test target", "type": "dfn", "url": "#test-target" },
                "#true-positives": { "displayText": "true positives", "export": true, "for_": [], "level": "1.1", "normative": true, "shortname": "act-rules-format", "spec": "act-rules-format-1.1", "status": "local", "text": "true positives", "type": "dfn", "url": "#true-positives" },
                "https://www.w3.org/TR/i18n-glossary/#dfn-localisation": { "displayText": "localisation", "export": true, "for_": [], "level": "1", "normative": false, "shortname": "i18n-glossary", "spec": "i18n-glossary", "status": "snapshot", "text": "localisation", "type": "dfn", "url": "https://www.w3.org/TR/i18n-glossary/#dfn-localisation" },
            };

            function mkRefHint(link, ref) {
                const linkText = link.textContent;
                let dfnTextElements = '';
                if (ref.displayText.toLowerCase() != linkText.toLowerCase()) {
                    // Give the original term if it's being displayed in a different way.
                    // But allow casing differences, they're insignificant.
                    dfnTextElements =
                        mk.li({},
                            mk.b({}, "Term: "),
                            mk.span({}, ref.displayText)
                        );
                }
                const forList = ref.for_;
                let forListElements;
                if (forList.length == 0) {
                    forListElements = [];
                } else if (forList.length == 1) {
                    forListElements = mk.li({},
                        mk.b({}, "For: "),
                        mk.span({}, forList[0]),
                    );
                } else {
                    forListElements = mk.li({},
                        mk.b({}, "For: "),
                        mk.ul({},
                            ...forList.map(forItem =>
                                mk.li({},
                                    mk.span({}, forItem)
                                ),
                            ),
                        ),
                    );
                }
                const url = ref.url;
                const safeUrl = encodeURIComponent(url);
                const hintPanel = mk.aside({
                    class: "ref-hint",
                    id: `ref-hint-for-${safeUrl}`,
                    "data-for": url,
                    "aria-labelled-by": `ref-hint-for-${safeUrl}`,
                },
                    mk.ul({},
                        dfnTextElements,
                        mk.li({},
                            mk.b({}, "URL: "),
                            mk.a({ href: url, class: "ref" }, url),
                        ),
                        mk.li({},
                            mk.b({}, "Type: "),
                            mk.span({}, `${ref.type}`),
                        ),
                        mk.li({},
                            mk.b({}, "Spec: "),
                            mk.span({}, `${ref.spec ? ref.spec : ''}`),
                        ),
                        forListElements
                    ),
                );
                hintPanel.forLink = link;
                setupRefHintEventListeners(link, hintPanel);
                return hintPanel;
            }

            function hideAllRefHints() {
                queryAll(".ref-hint").forEach(el => hideRefHint(el));
            }

            function hideRefHint(refHint) {
                const link = refHint.forLink;
                link.setAttribute("aria-expanded", "false");
                if (refHint.teardownEventListeners) {
                    refHint.teardownEventListeners();
                }
                refHint.remove();
            }

            function showRefHint(link) {
                if (link.classList.contains("dfn-link")) return;
                const url = link.getAttribute("href");
                const refHintKey = link.getAttribute("data-refhint-key");
                let key = url;
                if (refHintKey) {
                    key = refHintKey + "_" + url;
                }
                const ref = refsData[key];
                if (!ref) return;

                hideAllRefHints(); // Only display one at this time.

                const refHint = mkRefHint(link, ref);
                append(document.body, refHint);
                link.setAttribute("aria-expanded", "true");
                positionRefHint(refHint);
            }

            function setupRefHintEventListeners(link, refHint) {
                if (refHint.teardownEventListeners) return;
                // Add event handlers to hide the refHint after the user moves away
                // from both the link and refHint, if not hovering either within one second.
                let timeout = null;
                const startHidingRefHint = (event) => {
                    if (timeout) {
                        clearTimeout(timeout);
                    }
                    timeout = setTimeout(() => {
                        hideRefHint(refHint);
                    }, 1000);
                }
                const resetHidingRefHint = (event) => {
                    if (timeout) clearTimeout(timeout);
                    timeout = null;
                };
                link.addEventListener("mouseleave", startHidingRefHint);
                link.addEventListener("mouseenter", resetHidingRefHint);
                link.addEventListener("blur", startHidingRefHint);
                link.addEventListener("focus", resetHidingRefHint);
                refHint.addEventListener("mouseleave", startHidingRefHint);
                refHint.addEventListener("mouseenter", resetHidingRefHint);
                refHint.addEventListener("blur", startHidingRefHint);
                refHint.addEventListener("focus", resetHidingRefHint);

                refHint.teardownEventListeners = () => {
                    // remove event listeners
                    resetHidingRefHint();
                    link.removeEventListener("mouseleave", startHidingRefHint);
                    link.removeEventListener("mouseenter", resetHidingRefHint);
                    link.removeEventListener("blur", startHidingRefHint);
                    link.removeEventListener("focus", resetHidingRefHint);
                    refHint.removeEventListener("mouseleave", startHidingRefHint);
                    refHint.removeEventListener("mouseenter", resetHidingRefHint);
                    refHint.removeEventListener("blur", startHidingRefHint);
                    refHint.removeEventListener("focus", resetHidingRefHint);
                };
            }

            function positionRefHint(refHint) {
                const link = refHint.forLink;
                const linkPos = getBounds(link);
                refHint.style.top = linkPos.bottom + "px";
                refHint.style.left = linkPos.left + "px";

                const panelPos = refHint.getBoundingClientRect();
                const panelMargin = 8;
                const maxRight = document.body.parentNode.clientWidth - panelMargin;
                if (panelPos.right > maxRight) {
                    const overflowAmount = panelPos.right - maxRight;
                    const newLeft = Math.max(panelMargin, linkPos.left - overflowAmount);
                    refHint.style.left = newLeft + "px";
                }
            }

            // TODO: shared util
            // Returns the root-level absolute position {left and top} of element.
            function getBounds(el, relativeTo = document.body) {
                const relativeRect = relativeTo.getBoundingClientRect();
                const elRect = el.getBoundingClientRect();
                const top = elRect.top - relativeRect.top;
                const left = elRect.left - relativeRect.left;
                return {
                    top,
                    left,
                    bottom: top + elRect.height,
                    right: left + elRect.width,
                }
            }

            function showRefHintListener(e) {
                // If the target isn't in a link (or is a link),
                // just ignore it.
                let link = e.target.closest("a");
                if (!link) return;

                // If the target is in a ref-hint panel
                // (aka a link in the already-open one),
                // also just ignore it.
                if (link.closest(".ref-hint")) return;

                // Otherwise, show the panel for the link.
                showRefHint(link);
            }

            function hideAllHintsListener(e) {
                // If the click is inside a ref-hint panel, ignore it.
                if (e.target.closest(".ref-hint")) return;
                // Otherwise, close all the current panels.
                hideAllRefHints();
            }

            document.addEventListener("DOMContentLoaded", () => {
                document.body.addEventListener("mousedown", showRefHintListener);
                document.body.addEventListener("focus", showRefHintListener);

                document.body.addEventListener("click", hideAllHintsListener);
            });

            window.addEventListener("resize", () => {
                // Hide any open ref hint.
                hideAllRefHints();
            });
        }
    </script>
    <script src="https://htmlspecs.com/dropdown.js"></script>