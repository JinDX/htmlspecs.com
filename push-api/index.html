<!DOCTYPE html>
<html lang="zh-hans">

<head>
    <meta charset="utf-8">
    <meta name="generator" content="ReSpec 35.1.1">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <style>
        span.example-title {
            text-transform: none
        }

        :is(aside, div).example,
        div.illegal-example {
            padding: .5em;
            margin: 1em 0;
            position: relative;
            clear: both
        }

        div.illegal-example {
            color: red
        }

        div.illegal-example p {
            color: #000
        }

        aside.example div.example {
            border-left-width: .1em;
            border-color: #999;
            background: #fff
        }
    </style>
    <style>
        .issue-label {
            text-transform: initial
        }

        .warning>p:first-child {
            margin-top: 0
        }

        .warning {
            padding: .5em;
            border-left-width: .5em;
            border-left-style: solid
        }

        span.warning {
            padding: .1em .5em .15em
        }

        .issue.closed span.issue-number {
            text-decoration: line-through
        }

        .issue.closed span.issue-number::after {
            content: " (Closed)";
            font-size: smaller
        }

        .warning {
            border-color: #f11;
            border-color: var(--warning-border, #f11);
            border-width: .2em;
            border-style: solid;
            background: #fbe9e9;
            background: var(--warning-bg, #fbe9e9);
            color: #000;
            color: var(--text, #000)
        }

        .warning-title:before {
            content: "⚠";
            font-size: 1.3em;
            float: left;
            padding-right: .3em;
            margin-top: -.3em
        }

        li.task-list-item {
            list-style: none
        }

        input.task-list-item-checkbox {
            margin: 0 .35em .25em -1.6em;
            vertical-align: middle
        }

        .issue a.respec-gh-label {
            padding: 5px;
            margin: 0 2px 0 2px;
            font-size: 10px;
            text-transform: none;
            text-decoration: none;
            font-weight: 700;
            border-radius: 4px;
            position: relative;
            bottom: 2px;
            border: none;
            display: inline-block
        }
    </style>
    <style>
        pre.idl {
            padding: 1em;
            position: relative
        }

        pre.idl>code {
            color: #000;
            color: var(--text, #000)
        }

        @media print {
            pre.idl {
                white-space: pre-wrap
            }
        }

        .idlHeader {
            display: block;
            width: 150px;
            background: #8ccbf2;
            background: var(--def-border, #8ccbf2);
            color: #fff;
            color: var(--defrow-border, #fff);
            font-family: sans-serif;
            font-weight: 700;
            margin: -1em 0 1em -1em;
            height: 28px;
            line-height: 28px
        }

        .idlHeader a.self-link {
            margin-left: .3cm;
            text-decoration: none;
            border-bottom: none;
            color: inherit
        }

        .idlID {
            font-weight: 700;
            color: #005a9c
        }

        .idlType {
            color: #005a9c
        }

        .idlName {
            color: #ff4500
        }

        .idlName a {
            color: #ff4500;
            border-bottom: 1px dotted #ff4500;
            text-decoration: none
        }

        a.idlEnumItem {
            color: #000;
            border-bottom: 1px dotted #ccc;
            text-decoration: none
        }

        .idlSuperclass {
            font-style: italic;
            color: #005a9c
        }

        .idlDefaultValue,
        .idlParamName {
            font-style: italic
        }

        .extAttr {
            color: #666
        }

        .idlSectionComment {
            color: gray
        }

        .idlIncludes a {
            font-weight: 700
        }

        .respec-button-copy-paste:focus {
            text-decoration: none;
            border-color: #51a7e8;
            outline: 0;
            box-shadow: 0 0 5px rgba(81, 167, 232, .5)
        }

        .respec-button-copy-paste:is(:focus:hover, .selected:focus) {
            border-color: #51a7e8
        }

        .respec-button-copy-paste:is(:hover, :active, .zeroclipboard-is-hover, .zeroclipboard-is-active) {
            text-decoration: none;
            background-color: #ddd;
            background-image: linear-gradient(#eee, #ddd);
            border-color: #ccc
        }

        .respec-button-copy-paste:is(:active, .selected, .zeroclipboard-is-active) {
            background-color: #dcdcdc;
            background-image: none;
            border-color: #b5b5b5;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, .15)
        }

        .respec-button-copy-paste.selected:hover {
            background-color: #cfcfcf
        }

        .respec-button-copy-paste:is(:disabled, :disabled:hover, .disabled, .disabled:hover) {
            color: rgba(102, 102, 102, .5);
            cursor: default;
            background-color: rgba(229, 229, 229, .5);
            background-image: none;
            border-color: rgba(197, 197, 197, .5);
            box-shadow: none
        }

        @media print {
            .respec-button-copy-paste {
                visibility: hidden
            }
        }
    </style>
    <style>
        dfn {
            cursor: pointer
        }

        .dfn-panel {
            position: absolute;
            z-index: 35;
            min-width: 300px;
            max-width: 500px;
            padding: .5em .75em;
            margin-top: .6em;
            font-family: "Helvetica Neue", sans-serif;
            font-size: small;
            background: #fff;
            background: var(--indextable-hover-bg, #fff);
            color: #000;
            color: var(--text, #000);
            box-shadow: 0 1em 3em -.4em rgba(0, 0, 0, .3), 0 0 1px 1px rgba(0, 0, 0, .05);
            box-shadow: 0 1em 3em -.4em var(--tocsidebar-shadow, rgba(0, 0, 0, .3)), 0 0 1px 1px var(--tocsidebar-shadow, rgba(0, 0, 0, .05));
            border-radius: 2px
        }

        .dfn-panel:not(.docked)>.caret {
            position: absolute;
            top: -9px
        }

        .dfn-panel:not(.docked)>.caret::after,
        .dfn-panel:not(.docked)>.caret::before {
            content: "";
            position: absolute;
            border: 10px solid transparent;
            border-top: 0;
            border-bottom: 10px solid #fff;
            border-bottom-color: var(--indextable-hover-bg, #fff);
            top: 0
        }

        .dfn-panel:not(.docked)>.caret::before {
            border-bottom: 9px solid #a2a9b1;
            border-bottom-color: var(--indextable-hover-bg, #a2a9b1)
        }

        .dfn-panel * {
            margin: 0
        }

        .dfn-panel b {
            display: block;
            color: #000;
            color: var(--text, #000);
            margin-top: .25em
        }

        .dfn-panel ul a[href] {
            color: #333;
            color: var(--text, #333)
        }

        .dfn-panel>div {
            display: flex
        }

        .dfn-panel a.self-link {
            font-weight: 700;
            margin-right: auto
        }

        .dfn-panel .marker {
            padding: .1em;
            margin-left: .5em;
            border-radius: .2em;
            text-align: center;
            white-space: nowrap;
            font-size: 90%;
            color: #040b1c
        }

        .dfn-panel .marker.dfn-exported {
            background: #d1edfd;
            box-shadow: 0 0 0 .125em #1ca5f940
        }

        .dfn-panel .marker.idl-block {
            background: #8ccbf2;
            box-shadow: 0 0 0 .125em #0670b161
        }

        .dfn-panel a:not(:hover) {
            text-decoration: none !important;
            border-bottom: none !important
        }

        .dfn-panel a[href]:hover {
            border-bottom-width: 1px
        }

        .dfn-panel ul {
            padding: 0
        }

        .dfn-panel li {
            margin-left: 1em
        }

        .dfn-panel.docked {
            position: fixed;
            left: .5em;
            top: unset;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - .75em * 2 - .5em - .2em * 2);
            max-height: 30vh;
            overflow: auto
        }
    </style>

    <title>推送 API</title>


    <style id="respec-mainstyle">
        @keyframes pop {
            0% {
                transform: scale(1, 1)
            }

            25% {
                transform: scale(1.25, 1.25);
                opacity: .75
            }

            100% {
                transform: scale(1, 1)
            }
        }

        a.internalDFN {
            color: inherit;
            border-bottom: 1px solid #99c;
            text-decoration: none
        }

        a.externalDFN {
            color: inherit;
            border-bottom: 1px dotted #ccc;
            text-decoration: none
        }

        a.bibref {
            text-decoration: none
        }

        .respec-offending-element:target {
            animation: pop .25s ease-in-out 0s 1
        }

        .respec-offending-element,
        a[href].respec-offending-element {
            text-decoration: red wavy underline
        }

        @supports not (text-decoration:red wavy underline) {
            .respec-offending-element:not(pre) {
                display: inline-block
            }

            .respec-offending-element {
                background: url(data:image/gif;base64,R0lGODdhBAADAPEAANv///8AAP///wAAACwAAAAABAADAEACBZQjmIAFADs=) bottom repeat-x
            }
        }

        #references :target {
            background: #eaf3ff;
            animation: pop .4s ease-in-out 0s 1
        }

        cite .bibref {
            font-style: normal
        }

        a[href].orcid {
            padding-left: 4px;
            padding-right: 4px
        }

        a[href].orcid>svg {
            margin-bottom: -2px
        }

        ol.tof,
        ul.tof {
            list-style: none outside none
        }

        .caption {
            margin-top: .5em;
            font-style: italic
        }

        #issue-summary>ul {
            column-count: 2
        }

        #issue-summary li {
            list-style: none;
            display: inline-block
        }

        details.respec-tests-details {
            margin-left: 1em;
            display: inline-block;
            vertical-align: top
        }

        details.respec-tests-details>* {
            padding-right: 2em
        }

        details.respec-tests-details[open] {
            z-index: 999999;
            position: absolute;
            border: thin solid #cad3e2;
            border-radius: .3em;
            background-color: #fff;
            padding-bottom: .5em
        }

        details.respec-tests-details[open]>summary {
            border-bottom: thin solid #cad3e2;
            padding-left: 1em;
            margin-bottom: 1em;
            line-height: 2em
        }

        details.respec-tests-details>ul {
            width: 100%;
            margin-top: -.3em
        }

        details.respec-tests-details>li {
            padding-left: 1em
        }

        .self-link:hover {
            opacity: 1;
            text-decoration: none;
            background-color: transparent
        }

        aside.example .marker>a.self-link {
            color: inherit
        }

        .header-wrapper {
            display: flex;
            align-items: baseline
        }

        :is(h2, h3, h4, h5, h6):not(#toc>h2, #abstract>h2, #sotd>h2, .head>h2) {
            position: relative;
            left: -.5em
        }

        :is(h2, h3, h4, h5, h6):not(#toch2)+a.self-link {
            color: inherit;
            order: -1;
            position: relative;
            left: -1.1em;
            font-size: 1rem;
            opacity: .5
        }

        :is(h2, h3, h4, h5, h6)+a.self-link::before {
            content: "§";
            text-decoration: none;
            color: var(--heading-text)
        }

        :is(h2, h3)+a.self-link {
            top: -.2em
        }

        :is(h4, h5, h6)+a.self-link::before {
            color: #000
        }

        @media (max-width:767px) {
            dd {
                margin-left: 0
            }
        }

        @media print {
            .removeOnSave {
                display: none
            }
        }
    </style>


    <meta name="color-scheme" content="light">
    <meta name="revision" content="53fc46529183943a4574abc28adec493a0c3042a">
    <meta name="description"
        content="推送 API 使通过推送服务向 Web 应用程序发送推送消息成为可能。应用服务器可以在任何时候发送推送消息，即使 Web 应用程序或用户代理处于非活动状态。推送服务确保消息可靠且高效地传递给用户代理。推送消息会发送到运行在 Web 应用程序源中的服务工作线程，服务工作线程可以使用消息中的信息更新本地状态或向用户显示通知。">
    <link rel="canonical" href="https://www.w3.org/TR/push-api/">
    <style>
        .hljs {
            --base: #fafafa;
            --mono-1: #383a42;
            --mono-2: #686b77;
            --mono-3: #717277;
            --hue-1: #0b76c5;
            --hue-2: #336ae3;
            --hue-3: #a626a4;
            --hue-4: #42803c;
            --hue-5: #ca4706;
            --hue-5-2: #c91243;
            --hue-6: #986801;
            --hue-6-2: #9a6a01
        }

        @media (prefers-color-scheme:dark) {
            .hljs {
                --base: #282c34;
                --mono-1: #abb2bf;
                --mono-2: #818896;
                --mono-3: #5c6370;
                --hue-1: #56b6c2;
                --hue-2: #61aeee;
                --hue-3: #c678dd;
                --hue-4: #98c379;
                --hue-5: #e06c75;
                --hue-5-2: #be5046;
                --hue-6: #d19a66;
                --hue-6-2: #e6c07b
            }
        }

        .hljs {
            display: block;
            overflow-x: auto;
            padding: .5em;
            color: #383a42;
            color: var(--mono-1, #383a42);
            background: #fafafa;
            background: var(--base, #fafafa)
        }

        .hljs-comment,
        .hljs-quote {
            color: #717277;
            color: var(--mono-3, #717277);
            font-style: italic
        }

        .hljs-doctag,
        .hljs-formula,
        .hljs-keyword {
            color: #a626a4;
            color: var(--hue-3, #a626a4)
        }

        .hljs-deletion,
        .hljs-name,
        .hljs-section,
        .hljs-selector-tag,
        .hljs-subst {
            color: #ca4706;
            color: var(--hue-5, #ca4706);
            font-weight: 700
        }

        .hljs-literal {
            color: #0b76c5;
            color: var(--hue-1, #0b76c5)
        }

        .hljs-addition,
        .hljs-attribute,
        .hljs-meta-string,
        .hljs-regexp,
        .hljs-string {
            color: #42803c;
            color: var(--hue-4, #42803c)
        }

        .hljs-built_in,
        .hljs-class .hljs-title {
            color: #9a6a01;
            color: var(--hue-6-2, #9a6a01)
        }

        .hljs-attr,
        .hljs-number,
        .hljs-selector-attr,
        .hljs-selector-class,
        .hljs-selector-pseudo,
        .hljs-template-variable,
        .hljs-type,
        .hljs-variable {
            color: #986801;
            color: var(--hue-6, #986801)
        }

        .hljs-bullet,
        .hljs-link,
        .hljs-meta,
        .hljs-selector-id,
        .hljs-symbol,
        .hljs-title {
            color: #336ae3;
            color: var(--hue-2, #336ae3)
        }

        .hljs-emphasis {
            font-style: italic
        }

        .hljs-strong {
            font-weight: 700
        }

        .hljs-link {
            text-decoration: underline
        }
    </style>
    <style>
        var {
            position: relative;
            cursor: pointer
        }

        var[data-type]::after,
        var[data-type]::before {
            position: absolute;
            left: 50%;
            top: -6px;
            opacity: 0;
            transition: opacity .4s;
            pointer-events: none
        }

        var[data-type]::before {
            content: "";
            transform: translateX(-50%);
            border-width: 4px 6px 0 6px;
            border-style: solid;
            border-color: transparent;
            border-top-color: #222
        }

        var[data-type]::after {
            content: attr(data-type);
            transform: translateX(-50%) translateY(-100%);
            background: #222;
            text-align: center;
            font-family: "Dank Mono", "Fira Code", monospace;
            font-style: normal;
            padding: 6px;
            border-radius: 3px;
            color: #daca88;
            text-indent: 0;
            font-weight: 400
        }

        var[data-type]:hover::after,
        var[data-type]:hover::before {
            opacity: 1
        }
    </style>
    <script id="initialUserConfig" type="application/json">{
      "specStatus": "WD",
      "shortName": "push-api",
      "previousMaturity": "WD",
      "editors": [
        {
          "name": "Peter Beverloo",
          "company": "Google",
          "companyURL": "https://www.google.com/",
          "w3cid": "44819"
        },
        {
          "name": "Martin Thomson",
          "company": "Mozilla Foundation",
          "companyURL": "https://www.mozilla.org/",
          "w3cid": "68503"
        },
        {
          "name": "Marcos Caceres",
          "company": "Apple Inc.",
          "companyURL": "https://www.apple.com/",
          "w3cid": "39125"
        }
      ],
      "group": "webapps",
      "github": "w3c/push-api",
      "xref": "web-platform",
      "gitRevision": "53fc46529183943a4574abc28adec493a0c3042a",
      "publishDate": "2024-09-03",
      "previousPublishDate": "2024-09-03",
      "publishISODate": "2024-09-03T00:00:00.000Z",
      "generatedSubtitle": "W3C Working Draft 03 September 2024"
    }</script>
    <link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2021/W3C-WD">
</head>

<body
    data-cite="WEBIDL service-workers FILEAPI secure-contexts hr-time permissions ECMASCRIPT HTML INFRA URL WEBIDL DOM FETCH"
    class="h-entry">
    <div class="head">
        <p class="logos"><a class="logo" href="https://www.w3.org/"><img crossorigin="" alt="W3C" height="48"
                    src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72">
            </a></p>
        <h1 id="title" class="title">推送 API</h1>
        <p id="w3c-state"><a href="https://www.w3.org/standards/types#WD">W3C 工作草案</a> <time class="dt-published"
                datetime="2024-09-03">2024年9月3日</time></p>
        <details open="">
            <summary>关于本文档的更多细节</summary>
            <dl>
                <dt>当前版本：</dt>
                <dd>
                    <a class="u-url"
                        href="https://www.w3.org/TR/2024/WD-push-api-20240903/">https://www.w3.org/TR/2024/WD-push-api-20240903/</a>
                </dd>
                <dt>最新发布版本：</dt>
                <dd>
                    <a href="https://www.w3.org/TR/push-api/">https://www.w3.org/TR/push-api/</a>
                </dd>
                <dt>最新编辑草案：</dt>
                <dd><a href="https://w3c.github.io/push-api/">https://w3c.github.io/push-api/</a></dd>
                <dt>历史记录：</dt>
                <dd>
                    <a
                        href="https://www.w3.org/standards/history/push-api/">https://www.w3.org/standards/history/push-api/</a>
                </dd>
                <dd>
                    <a href="https://github.com/w3c/push-api/commits/">提交历史</a>
                </dd>

                <dt>编辑：</dt>
                <dd class="editor p-author h-card vcard" data-editor-id="44819">
                    <span class="p-name fn">Peter Beverloo</span> (<a class="p-org org h-org"
                        href="https://www.google.com/">Google</a>)
                </dd>
                <dd class="editor p-author h-card vcard" data-editor-id="68503">
                    <span class="p-name fn">Martin Thomson</span> (<a class="p-org org h-org"
                        href="https://www.mozilla.org/">Mozilla 基金会</a>)
                </dd>
                <dd class="editor p-author h-card vcard" data-editor-id="39125">
                    <span class="p-name fn">Marcos Caceres</span> (<a class="p-org org h-org"
                        href="https://www.apple.com/">Apple 公司</a>)
                </dd>
                <dt>前任编辑：</dt>
                <dd class="editor p-author h-card vcard">
                    <span class="p-name fn">Bryan Sullivan</span> (<a class="p-org org h-org"
                        href="http://www.att.com/">AT&amp;T</a>) - 截至 <time datetime="2015-05-01">2015年5月1日</time>
                </dd>
                <dd class="editor p-author h-card vcard">
                    <span class="p-name fn">Eduardo Fullea</span> (<a class="p-org org h-org"
                        href="http://www.telefonica.com/">Telefonica</a>) - 截至 <time
                        datetime="2015-05-01">2015年5月1日</time>
                </dd>
                <dd class="editor p-author h-card vcard">
                    <span class="p-name fn">Michaël van Ouwerkerk</span> (<a class="p-org org h-org"
                        href="https://www.google.com/">Google</a>) - 截至 <time datetime="2016-11-08">2016年11月8日</time>
                </dd>

                <dt>反馈：</dt>
                <dd>
                    <a href="https://github.com/w3c/push-api/">GitHub w3c/push-api</a>
                    (<a href="https://github.com/w3c/push-api/pulls/">拉取请求</a>，
                    <a href="https://github.com/w3c/push-api/issues/new/choose">新问题</a>，
                    <a href="https://github.com/w3c/push-api/issues/">开放问题</a>)
                </dd>


            </dl>
        </details>

        <p class="copyright">
            <a href="https://www.w3.org/policies/#copyright">版权</a>
            ©
            2024

            <a href="https://www.w3.org/">万维网联盟</a>。
            <abbr title="World Wide Web Consortium">W3C</abbr><sup>®</sup>
            <a href="https://www.w3.org/policies/#Legal_Disclaimer">责任</a>，
            <a href="https://www.w3.org/policies/#W3C_Trademarks">商标</a> 和
            <a rel="license" href="https://www.w3.org/copyright/software-license-2023/"
                title="W3C 软件和文档声明与许可">宽松的文档许可</a>规则适用。
        </p>
        <hr title="标题分隔线">
    </div>
    <section id="abstract" class="introductory">
        <h2>摘要</h2>
        <p>
            <cite>推送 API</cite> 允许通过 <a href="#dfn-push-message" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-message-1">推送消息</a> 将信息发送到 Web 应用程序，
            该操作通过 <a href="#dfn-push-service" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-service-1">推送服务</a> 实现。
            <a href="#dfn-application-server" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-application-server-1">应用服务器</a> 可以在任何时候发送
            <a href="#dfn-push-message" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-message-2">推送消息</a>，
            即使 Web 应用程序或 <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-user-agent-1">用户代理</a> 处于非活动状态。
            <a href="#dfn-push-service" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-service-2">推送服务</a>
            确保推送消息可靠且高效地传递到 <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-user-agent-2">用户代理</a>。
            <a href="#dfn-push-message" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-message-3">推送消息</a>
            被传送到在 Web 应用程序源中运行的 <a data-type="dfn"
                href="https://www.w3.org/TR/service-workers/#dfn-service-worker">Service Worker</a>，
            该 Service Worker 可以使用消息中的信息来更新本地状态或向用户显示通知。
        </p>
        <p>
            本规范旨在与 <a href="#dfn-web-push-protocol" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-web-push-protocol-1">Web 推送协议</a> 一起使用，
            该协议描述了 <a href="#dfn-application-server" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-application-server-2">应用服务器</a> 或 <a href="#dfn-user-agent" class="internalDFN"
                data-link-type="dfn" id="ref-for-dfn-user-agent-3">用户代理</a> 如何与
            <a href="#dfn-push-service" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-service-3">推送服务</a> 交互。
        </p>
    </section>
    <section id="sotd" class="introductory">
        <h2>本文档的状态</h2>
        <p><em>本节描述了本文档在发布时的状态。当前 <abbr title="World Wide Web Consortium">W3C</abbr> 出版物的列表以及本技术报告的最新修订版可在
                <a href="https://www.w3.org/TR/"><abbr title="World Wide Web Consortium">W3C</abbr> 技术报告索引</a>中找到，
                地址为 https://www.w3.org/TR/。</em></p>
        <p>
            本文档由 <a href="https://www.w3.org/groups/wg/webapps">Web 应用工作组</a> 作为工作草案发布，
            并采用了 <a href="https://www.w3.org/policies/process/20231103/#recs-and-notes">推荐流程</a>。
        </p>
        <p>作为工作草案发布并不意味着 <abbr title="World Wide Web Consortium">W3C</abbr> 及其成员的认可。</p>
        <p>
            这是一个草案文档，可能会随时更新、替换或被其他文档废弃。在引用此文档时，除了作为进行中的工作外，不应作为其他用途引用。
        </p>
        <p>
            本文档由一个遵循 <a href="https://www.w3.org/policies/patent-policy/"><abbr
                    title="World Wide Web Consortium">W3C</abbr>
                专利政策</a> 的小组制作。<abbr title="World Wide Web Consortium">W3C</abbr> 维护了
            <a rel="disclosure" href="https://www.w3.org/groups/wg/webapps/ipr">与本小组成果相关的专利披露公开列表</a>，
            该页面还包括披露专利的说明。任何知晓可能包含
            <a href="https://www.w3.org/policies/patent-policy/#def-essential">基本声明</a> 的专利的个人，必须按照
            <a href="https://www.w3.org/policies/patent-policy/#sec-Disclosure"><abbr
                    title="World Wide Web Consortium">W3C</abbr> 专利政策</a> 第6节披露该信息。
        </p>
        <p>
            本文档受 <a id="w3c_process_revision" href="https://www.w3.org/policies/process/20231103/">2023年11月3日 <abbr
                    title="World Wide Web Consortium">W3C</abbr> 流程文档</a> 管辖。
        </p>
    </section>
    <nav id="toc">
        <h2 class="introductory" id="table-of-contents">目录</h2>
        <ol class="toc">
            <li class="tocline"><a class="tocxref" href="#abstract">摘要</a></li>
            <li class="tocline"><a class="tocxref" href="#sotd">本文档的状态</a></li>
            <li class="tocline"><a class="tocxref" href="#introduction"><bdi class="secno">1. </bdi>
                    介绍
                </a></li>
            <li class="tocline"><a class="tocxref" href="#dependencies"><bdi class="secno">2. </bdi>
                    依赖项
                </a></li>
            <li class="tocline"><a class="tocxref" href="#concepts"><bdi class="secno">3. </bdi>
                    概念
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#application-server"><bdi class="secno">3.1 </bdi>
                            应用服务器
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#push-message"><bdi class="secno">3.2 </bdi>
                            推送消息
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#push-subscription"><bdi class="secno">3.3 </bdi>
                            推送订阅
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#subscription-refreshes"><bdi
                                        class="secno">3.3.1 </bdi>
                                    订阅刷新
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#subscription-deactivation"><bdi
                                        class="secno">3.3.2 </bdi>
                                    订阅停用
                                </a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#push-service"><bdi class="secno">3.4 </bdi>
                            推送服务
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#permission"><bdi class="secno">3.5 </bdi>
                            权限
                        </a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#security-and-privacy-considerations"><bdi class="secno">4.
                    </bdi>
                    安全和隐私注意事项
                </a></li>
            <li class="tocline"><a class="tocxref" href="#pushframework"><bdi class="secno">5. </bdi>
                    推送框架
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#example"><bdi class="secno">5.1 </bdi>
                            示例
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#sequence-diagram"><bdi class="secno">5.2 </bdi>
                            序列图
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#push-service-use"><bdi class="secno">5.3 </bdi>
                            推送服务使用
                        </a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#extensions-to-the-serviceworkerregistration-interface"><bdi
                        class="secno">6. </bdi>
                    <code>ServiceWorkerRegistration</code> 接口的扩展
                </a></li>
            <li class="tocline"><a class="tocxref" href="#pushmanager-interface"><bdi class="secno">7. </bdi>
                    <span data-export="" data-dfn-type="interface" data-idl="interface" data-title="PushManager"
                        data-dfn-for=""><code>PushManager</code></span> 接口
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#subscribe-method"><bdi class="secno">7.1 </bdi>
                            <code>subscribe()</code> 方法
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#pushsubscriptionoptions-interface"><bdi
                                class="secno">7.2 </bdi>
                            <span data-export="" data-dfn-type="interface" data-idl="interface"
                                data-title="PushSubscriptionOptions"
                                data-dfn-for=""><code>PushSubscriptionOptions</code></span> 接口
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#pushsubscriptionoptionsinit-dictionary"><bdi
                                class="secno">7.3 </bdi>
                            <span data-export="" data-dfn-type="dictionary" data-idl="dictionary"
                                data-title="PushSubscriptionOptionsInit"
                                data-dfn-for=""><code>PushSubscriptionOptionsInit</code></span> 字典
                        </a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#pushsubscription-interface"><bdi class="secno">8. </bdi>
                    <span data-export="" data-dfn-type="interface" data-idl="interface" data-title="PushSubscription"
                        data-dfn-for=""><code>PushSubscription</code></span> 接口
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#pushencryptionkeyname-enumeration"><bdi
                                class="secno">8.1 </bdi>
                            <span data-export="" data-dfn-type="enum" data-idl="enum" data-title="PushEncryptionKeyName"
                                data-dfn-for=""><code>PushEncryptionKeyName</code></span> 枚举
                        </a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#pushmessagedata-interface"><bdi class="secno">9. </bdi>
                    <span data-export="" data-dfn-type="interface" data-idl="interface" data-title="PushMessageData"
                        data-dfn-for=""><code>PushMessageData</code></span> 接口
                </a></li>
            <li class="tocline"><a class="tocxref" href="#events"><bdi class="secno">10. </bdi>
                    事件
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref"
                            href="#extensions-to-the-serviceworkerglobalscope-interface"><bdi class="secno">10.1 </bdi>
                            <code>ServiceWorkerGlobalScope</code> 接口的扩展
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#pushevent-interface"><bdi class="secno">10.2 </bdi>
                            <span data-export="" data-dfn-type="interface" data-idl="interface" data-title="PushEvent"
                                data-dfn-for=""><code>PushEvent</code></span> 接口
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#pusheventinit-dictionary"><bdi class="secno">10.3
                            </bdi>
                            <span data-export="" data-dfn-type="dictionary" data-idl="dictionary"
                                data-title="PushEventInit" data-dfn-for=""><code>PushEventInit</code></span> 字典
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#receiving-a-push-message"><bdi class="secno">10.4
                            </bdi>
                            接收 <span class="formerLink" data-link-type="dfn">推送消息</span>
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#the-pushsubscriptionchange-event"><bdi
                                class="secno">10.5 </bdi>
                            <span>pushsubscriptionchange</span> 事件
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#pushsubscriptionchangeevent-interface"><bdi
                                        class="secno">10.5.1 </bdi>
                                    <span data-export="" data-dfn-type="interface" data-idl="interface"
                                        data-title="PushSubscriptionChangeEvent"
                                        data-dfn-for=""><code>PushSubscriptionChangeEvent</code></span> 接口
                                </a></li>
                            <li class="tocline"><a class="tocxref"
                                    href="#pushsubscriptionchangeeventinit-interface"><bdi class="secno">10.5.2 </bdi>
                                    <span data-export="" data-dfn-type="dictionary" data-idl="dictionary"
                                        data-title="PushSubscriptionChangeEventInit"
                                        data-dfn-for=""><code>PushSubscriptionChangeEventInit</code></span> 接口
                                </a></li>
                        </ol>
                    </li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#accessibility"><bdi class="secno">11. </bdi>
                    可访问性
                </a></li>
            <li class="tocline"><a class="tocxref" href="#conformance"><bdi class="secno">12. </bdi>符合性</a></li>
            <li class="tocline"><a class="tocxref" href="#idl-index"><bdi class="secno">A. </bdi>IDL 索引</a></li>
            <li class="tocline"><a class="tocxref" href="#acknowledgements"><bdi class="secno">B. </bdi>
                    致谢
                </a></li>
            <li class="tocline"><a class="tocxref" href="#references"><bdi class="secno">C. </bdi>参考文献</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#normative-references"><bdi class="secno">C.1
                            </bdi>规范性参考文献</a></li>
                    <li class="tocline"><a class="tocxref" href="#informative-references"><bdi class="secno">C.2
                            </bdi>参考文献</a></li>
                </ol>
            </li>
        </ol>
    </nav>
    <section class="informative" id="introduction">
        <div class="header-wrapper">
            <h2 id="x1-introduction"><bdi class="secno">1. </bdi>
                介绍
            </h2><a class="self-link" href="#introduction" aria-label="第1节的永久链接"></a>
        </div>
        <p><em>本节为非规范性内容。</em></p>

        <p>
            推送 API 允许 Web 应用程序与 <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-user-agent-4">用户代理</a> 异步通信。
            这使得 <a href="#dfn-application-server" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-application-server-3">应用服务器</a> 可以在掌握时间敏感信息时，
            向 <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-user-agent-5">用户代理</a>
            提供这些信息，而无需等待用户打开 Web 应用程序。
        </p>
        <p>
            如本文所定义，<a href="#dfn-push-service" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-service-4">推送服务</a> 支持随时传递 <a href="#dfn-push-message" class="internalDFN"
                data-link-type="dfn" id="ref-for-dfn-push-message-4">推送消息</a>。
        </p>
        <p>
            特别地，<a href="#dfn-push-message" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-message-5">推送消息</a> 即使在 Web 应用程序当前没有在浏览器窗口中运行时也会被传送：
            这与用户关闭 Web 应用程序但仍能从应用程序接收消息的情况相关。
            例如，当接收到 <a href="#dfn-push-message" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-message-6">推送消息</a> 时，Web 应用程序可能会被重新启动，
            例如推送消息可能用于通知用户有 WebRTC 来电。
        </p>
        <p>
            当 <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-user-agent-6">用户代理</a>
            暂时离线时，也可以发送 <a href="#dfn-push-message" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-message-8">推送消息</a>。
            为了支持这一点，<a href="#dfn-push-service" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-service-5">推送服务</a> 会存储消息，直到 <a href="#dfn-user-agent" class="internalDFN"
                data-link-type="dfn" id="ref-for-dfn-user-agent-7">用户代理</a> 可用为止。
            这支持了用户离线时 web 应用程序获知变更的用例，并确保 <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-user-agent-9">用户代理</a>
            能够及时获得相关信息。<a href="#dfn-push-message" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-message-9">推送消息</a> 由 <a href="#dfn-push-service" class="internalDFN"
                data-link-type="dfn" id="ref-for-dfn-push-service-6">推送服务</a> 存储，直到 <a href="#dfn-user-agent"
                class="internalDFN" data-link-type="dfn" id="ref-for-dfn-user-agent-10">用户代理</a> 可访问并可以传递消息。
        </p>
        <p>
            当 <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-user-agent-11">用户代理</a>
            正在积极使用 Web 应用程序时，推送 API 也会确保推送消息的可靠传递，
            例如用户正在积极使用 Web 应用程序，或 Web 应用程序通过活动的 worker、框架或后台窗口与
            <a href="#dfn-application-server" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-application-server-4">应用服务器</a> 进行通信时。
            这并不是推送 API 的主要使用场景。
            Web 应用程序可能选择使用推送 API 发送不频繁的消息，以避免与
            <a href="#dfn-application-server" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-application-server-5">应用服务器</a> 保持持续通信。
        </p>
        <p>
            推送消息适合于用户代理与 Web 应用程序之间尚未建立活动通信通道的场合。
            与通过 <cite><a class="bibref" data-link-type="biblio" href="#bib-fetch" title="Fetch 标准">Fetch API</a></cite>
            或 [<cite><a class="bibref" data-link-type="biblio" href="#bib-websockets"
                    title="WebSockets 标准">WebSockets</a></cite>]
            等更直接的通信方法相比，发送 <a href="#dfn-push-message" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-message-10">推送消息</a> 需要消耗更多资源。
            <a href="#dfn-push-message" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-message-11">推送消息</a>
            通常具有比直接通信更高的延迟，并且可能受到使用限制。
            大多数 <a href="#dfn-push-service" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-service-7">推送服务</a> 会限制可以发送的
            <a href="#dfn-push-message" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-message-12">推送消息</a> 的大小和数量。
        </p>
    </section>
    <section id="dependencies">
        <div class="header-wrapper">
            <h2 id="x2-dependencies"><bdi class="secno">2. </bdi>
                依赖项
            </h2><a class="self-link" href="#dependencies" aria-label="第2节的永久链接"></a>
        </div>

        <p>
            <dfn id="dfn-web-push-protocol" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">Web 推送协议</dfn>
            [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc8030"
                    title="使用 HTTP 推送的通用事件传递">RFC8030</a></cite>] 描述了一种协议，该协议使 <a href="#dfn-user-agent"
                class="internalDFN" data-link-type="dfn" id="ref-for-dfn-user-agent-13">用户代理</a> 或 <a
                href="#dfn-application-server" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-application-server-6">应用服务器</a> 能够与 <a href="#dfn-push-service" class="internalDFN"
                data-link-type="dfn" id="ref-for-dfn-push-service-8">推送服务</a> 通信。
            也可以使用其他协议来替代该协议，但本规范假定使用此协议；其他协议应提供兼容的语义。
        </p>
        <p>
            <code><dfn id="dfn-content-encoding" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">Content-Encoding</dfn></code>
            HTTP 头部，描述于
            [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc7231"
                    title="超文本传输协议 (HTTP/1.1): 语义与内容">RFC7231</a></cite>] 的第3.1.2.2节，
            指示应用于 <a href="#dfn-push-message" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-message-13">推送消息</a> 的内容编码。
        </p>
    </section>
    <section id="concepts">
        <div class="header-wrapper">
            <h2 id="x3-concepts"><bdi class="secno">3. </bdi>
                概念
            </h2><a class="self-link" href="#concepts" aria-label="第3节的永久链接"></a>
        </div>

        <section id="application-server">
            <div class="header-wrapper">
                <h3 id="x3-1-application-server"><bdi class="secno">3.1 </bdi>
                    应用服务器
                </h3><a class="self-link" href="#application-server" aria-label="第3.1节的永久链接"></a>
            </div>

            <p>
                <dfn data-plurals="application servers" id="dfn-application-server" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">应用服务器</dfn> 指的是 Web 应用程序的服务器端组件。
            </p>
        </section>
        <section id="push-message">
            <div class="header-wrapper">
                <h3 id="x3-2-push-message"><bdi class="secno">3.2 </bdi>
                    推送消息
                </h3><a class="self-link" href="#push-message" aria-label="第3.2节的永久链接"></a>
            </div>

            <p>
                <dfn data-plurals="push messages" id="dfn-push-message" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">推送消息</dfn> 是从 <a href="#dfn-application-server" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-application-server-7">应用服务器</a> 发送到 Web 应用程序的数据。
            </p>
            <p>
                当消息提交给 <a href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-push-subscription-1">推送订阅</a> 时，推送消息会传送给与其关联的 <a data-link-type="dfn|abstract-op"
                    data-type="dfn" href="https://www.w3.org/TR/service-workers/#dfn-active-worker">活动 worker</a>。
                如果 service worker 当前未运行，则会启动该 worker 以传递消息。
            </p>
        </section>
        <section id="push-subscription">
            <div class="header-wrapper">
                <h3 id="x3-3-push-subscription"><bdi class="secno">3.3 </bdi>
                    推送订阅
                </h3><a class="self-link" href="#push-subscription" aria-label="第3.3节的永久链接"></a>
            </div>

            <p>
                <dfn data-plurals="push subscriptions" id="dfn-push-subscription" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">推送订阅</dfn> 是在 <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-user-agent-14">用户代理</a> 和代表 Web 应用程序的 <a href="#dfn-push-service"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-service-9">推送服务</a> 之间建立的消息传递上下文。
                每个 <a href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-push-subscription-2">推送订阅</a>
                都与一个 <a data-type="dfn"
                    href="https://www.w3.org/TR/service-workers/#dfn-service-worker-registration">service worker 注册</a>
                关联，
                并且一个 <a data-type="dfn"
                    href="https://www.w3.org/TR/service-workers/#dfn-service-worker-registration">service
                    worker 注册</a> 最多只能有一个 <a href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-push-subscription-3">推送订阅</a>。
            </p>
            <p>
                一个 <a href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-push-subscription-4">推送订阅</a> 关联了一个 <dfn data-plurals="push endpoints"
                    id="dfn-push-endpoint" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">推送端点</dfn>。它 <em
                    class="rfc2119">必须</em> 是由 <a href="#dfn-push-service" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-push-service-10">推送服务</a> 暴露的绝对 URL，应用服务器可在该处发送 <a href="#dfn-push-message"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-message-15">推送消息</a>。推送端点 <em
                    class="rfc2119">必须</em> 唯一标识该 <a href="#dfn-push-subscription" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-push-subscription-5">推送订阅</a>。
            </p>
            <p>
                一个 <a href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-push-subscription-6">推送订阅</a> <em class="rfc2119">可以</em> 具有关联的 <dfn
                    id="dfn-subscription-expiration-time" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">订阅到期时间</dfn>。如果设置了该时间，则它 <em class="rfc2119">必须</em> 表示自1970年1月1日00:00:00
                UTC以来的毫秒数，
                到该时间点订阅将被 <a href="#dfn-deactivate" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-deactivate-1">停用</a>。
                <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-user-agent-15">用户代理</a>
                <em class="rfc2119">应该</em> 尝试在订阅到期前 <a href="#dfn-refresh" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-refresh-1">刷新</a> 该推送订阅。
            </p>
            <p>
                一个 <a href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-push-subscription-7">推送订阅</a> 具有用于 P-256 <a href="#dfn-ecdh" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-ecdh-1"><abbr title="椭圆曲线 Diffie-Hellman">ECDH</abbr></a>
                密钥对和身份验证密钥的内部槽，
                根据 [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc8291"
                        title="Web 推送的消息加密">RFC8291</a></cite>]。这些槽在创建 <a href="#dfn-push-subscription"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-subscription-8">推送订阅</a> 时 <em
                    class="rfc2119">必须</em> 被填充。
            </p>
            <p>
                如果 <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-user-agent-16">用户代理</a> 出于任何原因需要更改密钥，则它 <em class="rfc2119">必须</em>
                <a href="#dfn-fire-the-pushsubscriptionchange-event" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-fire-the-pushsubscriptionchange-event-1">触发 "<code>pushsubscriptionchange</code>"
                    事件</a>，
                该事件应与 <a data-type="dfn"
                    href="https://www.w3.org/TR/service-workers/#dfn-service-worker-registration">service worker 注册</a>
                关联，
                该注册与拥有旧密钥的 <var>oldSubscription</var> 实例和拥有新密钥的 <var>newSubscription</var> 实例关联的
                <a data-link-type="idl" data-lt="PushSubscription" href="#dom-pushsubscription" class="internalDFN"
                    id="ref-for-dom-pushsubscription-1"><code>PushSubscription</code></a> 实例表示。
            </p>
            <p>
                若要 <dfn id="dfn-create-a-push-subscription" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">创建推送订阅</dfn>，给定 <var
                    data-type="PushSubscriptionOptionsInit">optionsDictionary</var>:
            </p>
            <ol class="algorithm">
                <li>将 <var data-type="PushSubscription">subscription</var> 设为新的 <a data-link-type="idl"
                        data-lt="PushSubscription" href="#dom-pushsubscription" class="internalDFN"
                        id="ref-for-dom-pushsubscription-3"><code>PushSubscription</code></a>。
                </li>
                <li>将 <var data-type="PushSubscriptionOptions">options</var> 设为新创建的 <a data-link-type="idl"
                        data-lt="PushSubscriptionOptions" href="#dom-pushsubscriptionoptions" class="internalDFN"
                        id="ref-for-dom-pushsubscriptionoptions-1"><code>PushSubscriptionOptions</code></a>
                    对象，并用 <var data-type="PushSubscriptionOptionsInit">optionsDictionary</var> 的相应成员和值初始化其属性。
                </li>
                <li>将 <var data-type="PushSubscription">subscription</var> 的 <a data-link-type="idl"
                        href="#dom-pushsubscription-options" class="internalDFN"
                        id="ref-for-dom-pushsubscription-options-1"><code>options</code></a> 属性设置为 <var
                        data-type="PushSubscriptionOptions">options</var>。
                </li>
                <li>生成新的 P-256 <a href="#dfn-ecdh" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-ecdh-2"><abbr title="椭圆曲线 Diffie-Hellman">ECDH</abbr></a> 密钥对
                    [<cite><a class="bibref" data-link-type="biblio" href="#bib-ansi-x9-62"
                            title="金融服务行业的公钥密码学, 椭圆曲线数字签名算法 (ECDSA)">ANSI-X9-62</a></cite>]。
                    将私钥存储在 <var data-type="PushSubscription">subscription</var> 的内部槽中；该值 <em class="rfc2119">不得</em>
                    供应用程序使用。
                    公钥也存储在内部槽中，并可通过调用 <a data-link-type="idl" data-lt="getKey()" href="#dom-pushsubscription-getkey"
                        class="internalDFN"
                        id="ref-for-dom-pushsubscription-getkey-1"><code>getKey</code></a><code>()</code> 方法，并传递 "<a
                        data-link-type="idl" href="#dom-pushencryptionkeyname-p256dh" class="internalDFN"
                        id="ref-for-dom-pushencryptionkeyname-p256dh-1"><code>p256dh</code></a>" 作为参数来检索。
                </li>
                <li>生成新的身份验证密钥，它是根据 [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc8291"
                            title="Web 推送的消息加密">RFC8291</a></cite>] 定义的八位字节序列。将身份验证密钥存储在 <var
                        data-type="PushSubscription">subscription</var> 的内部槽中。
                    可以通过调用 <a data-link-type="idl" data-lt="getKey()" href="#dom-pushsubscription-getkey"
                        class="internalDFN"
                        id="ref-for-dom-pushsubscription-getkey-2"><code>getKey</code></a><code>()</code> 方法并传递 "<a
                        data-link-type="idl" href="#dom-pushencryptionkeyname-auth" class="internalDFN"
                        id="ref-for-dom-pushencryptionkeyname-auth-1"><code>auth</code></a>" 作为参数来检索该密钥。
                </li>
                <li>请求新的 <a href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-push-subscription-12">推送订阅</a>。当设置了 <var
                        data-type="PushSubscriptionOptions">options</var> 的
                    <a data-link-type="idl" href="#dom-pushsubscriptionoptions-applicationserverkey" class="internalDFN"
                        id="ref-for-dom-pushsubscriptionoptions-applicationserverkey-1"><code>applicationServerKey</code></a>
                    属性时，请求中应包括该属性。重抛任何异常。
                </li>
                <li>当 <a href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-push-subscription-13">推送订阅</a> 请求成功完成时：
                    <ol>
                        <li>将 <var data-type="PushSubscription">subscription</var> 的 <a data-link-type="idl"
                                href="#dom-pushsubscription-endpoint" class="internalDFN"
                                id="ref-for-dom-pushsubscription-endpoint-1"><code>endpoint</code></a> 属性设置为该
                            <a href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-push-subscription-14">推送订阅</a> 的 <a href="#dfn-push-endpoint"
                                class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-endpoint-2">推送端点</a>。
                        </li>
                        <li>如果 <a href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-push-subscription-15">推送订阅</a> 提供了到期时间，则设置 <var
                                data-type="PushSubscription">subscription</var> 的
                            <a data-link-type="idl" href="#dom-pushsubscription-expirationtime" class="internalDFN"
                                id="ref-for-dom-pushsubscription-expirationtime-1"><code>expirationTime</code></a> 属性。
                        </li>
                    </ol>
                </li>
                <li>返回 <var data-type="PushSubscription">subscription</var>。
                </li>
            </ol>
            <section id="subscription-refreshes">
                <div class="header-wrapper">
                    <h4 id="x3-3-1-subscription-refreshes"><bdi class="secno">3.3.1 </bdi>
                        订阅刷新
                    </h4><a class="self-link" href="#subscription-refreshes" aria-label="第3.3.1节的永久链接"></a>
                </div>

                <p>
                    <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-user-agent-17">用户代理</a> 或 <a href="#dfn-push-service" class="internalDFN"
                        data-link-type="dfn" id="ref-for-dfn-push-service-11">推送服务</a> <em class="rfc2119">可以</em>
                    选择随时刷新（<dfn id="dfn-refresh" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">refresh</dfn>）<a href="#dfn-push-subscription" class="internalDFN"
                        data-link-type="dfn" id="ref-for-dfn-push-subscription-16">推送订阅</a>，例如因为其已达到某个年龄。
                </p>
                <p>
                    当这种情况发生时，<a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-user-agent-18">用户代理</a> <em class="rfc2119">必须</em> 根据为创建当前 <a
                        href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-push-subscription-17">推送订阅</a> 提供的 <a href="#dom-pushsubscriptionoptions"
                        class="internalDFN" data-link-type="idl"
                        id="ref-for-dom-pushsubscriptionoptions-2"><code>PushSubscriptionOptions</code></a> 执行 <a
                        href="#dfn-create-a-push-subscription" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-create-a-push-subscription-1">创建推送订阅</a> 的步骤。新的 <a href="#dfn-push-subscription"
                        class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-subscription-18">推送订阅</a> <em
                        class="rfc2119">必须</em> 拥有一个与原始订阅不同的密钥对。
                </p>
                <p>
                    成功后，<a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-user-agent-19">用户代理</a> <em class="rfc2119">必须</em> 触发<a
                        href="#dfn-fire-the-pushsubscriptionchange-event" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-fire-the-pushsubscriptionchange-event-2">“<code>pushsubscriptionchange</code>”事件</a>，
                    其中 <a data-type="dfn"
                        href="https://www.w3.org/TR/service-workers/#dfn-service-worker-registration">service worker
                        注册</a>与 <a href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-push-subscription-19">推送订阅</a> 关联，<var>registration</var> 表示最初的 <a
                        href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-push-subscription-20">推送订阅</a> 的 <a data-link-type="idl"
                        data-lt="PushSubscription" href="#dom-pushsubscription" class="internalDFN"
                        id="ref-for-dom-pushsubscription-6"><code>PushSubscription</code></a> 实例为
                    <var>oldSubscription</var>，
                    新的 <a href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-push-subscription-21">推送订阅</a> 的 <a data-link-type="idl"
                        data-lt="PushSubscription" href="#dom-pushsubscription" class="internalDFN"
                        id="ref-for-dom-pushsubscription-7"><code>PushSubscription</code></a> 实例为
                    <var>newSubscription</var>。
                </p>
                <p>
                    为了提供足够的时间将更改传播到 <a href="#dfn-application-server" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-application-server-9">应用服务器</a>，<a href="#dfn-user-agent" class="internalDFN"
                        data-link-type="dfn" id="ref-for-dfn-user-agent-20">用户代理</a> <em class="rfc2119">可以</em>
                    在刷新后的一段时间内继续接受来自旧<a href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-push-subscription-22">推送订阅</a>的消息。
                    一旦为刷新后的<a href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-push-subscription-23">推送订阅</a> 接收到消息，所有旧的<a href="#dfn-push-subscription"
                        class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-subscription-24">推送订阅</a> <em
                        class="rfc2119">必须</em> 被<a href="#dfn-deactivate" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-deactivate-2">停用</a>。
                </p>
                <p>
                    如果 <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-user-agent-21">用户代理</a> 无法刷新 <a href="#dfn-push-subscription"
                        class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-subscription-25">推送订阅</a>，则 <em
                        class="rfc2119">应</em> 定期重试刷新。
                    当 <a href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-push-subscription-26">推送订阅</a> 无法再使用时，例如它已过期，<a href="#dfn-user-agent"
                        class="internalDFN" data-link-type="dfn" id="ref-for-dfn-user-agent-22">用户代理</a> <em
                        class="rfc2119">必须</em> 触发<a href="#dfn-fire-the-pushsubscriptionchange-event"
                        class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-fire-the-pushsubscriptionchange-event-3">“<code>pushsubscriptionchange</code>”事件</a>，
                    其中 <a data-type="dfn"
                        href="https://www.w3.org/TR/service-workers/#dfn-service-worker-registration">service worker
                        注册</a>与 <a href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-push-subscription-27">推送订阅</a> 关联，<var>registration</var> 表示即将停用的 <a
                        href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-push-subscription-28">推送订阅</a> 的 <a data-link-type="idl"
                        data-lt="PushSubscription" href="#dom-pushsubscription" class="internalDFN"
                        id="ref-for-dom-pushsubscription-8"><code>PushSubscription</code></a> 实例为
                    <var>oldSubscription</var>，
                    而 <var>newSubscription</var> 为 <code>null</code>。
                </p>
            </section>
            <section id="subscription-deactivation">
                <div class="header-wrapper">
                    <h4 id="x3-3-2-subscription-deactivation"><bdi class="secno">3.3.2 </bdi>
                        订阅停用
                    </h4><a class="self-link" href="#subscription-deactivation" aria-label="第3.3.2节的永久链接"></a>
                </div>

                <p>
                    当 <a href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-push-subscription-29">推送订阅</a>被<dfn data-lt="deactivate|deactivated"
                        id="dfn-deactivate" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">停用</dfn>时，<a
                        href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-user-agent-23">用户代理</a>和<a href="#dfn-push-service" class="internalDFN"
                        data-link-type="dfn" id="ref-for-dfn-push-service-12">推送服务</a> <em class="rfc2119">必须</em>
                    删除其存储的任何副本。之后针对该<a href="#dfn-push-message" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-push-message-16">推送消息</a>的任何<a href="#dfn-push-subscription" class="internalDFN"
                        data-link-type="dfn" id="ref-for-dfn-push-subscription-30">推送订阅</a> <em
                        class="rfc2119">不得</em>再传递。
                </p>
                <p>
                    当关联的<a data-type="dfn"
                        href="https://www.w3.org/TR/service-workers/#dfn-service-worker-registration">service worker
                        注册</a>被注销时，
                    该<a href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-push-subscription-31">推送订阅</a>
                    会被<a href="#dfn-deactivate" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-deactivate-3">停用</a>，尽管<a href="#dfn-push-subscription" class="internalDFN"
                        data-link-type="dfn" id="ref-for-dfn-push-subscription-32">推送订阅</a> <em class="rfc2119">可以</em>
                    更早被<a href="#dfn-deactivate" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-deactivate-4">停用</a>。
                </p>
                <div class="note" role="note" id="issue-container-generatedID">
                    <div role="heading" class="note-title marker" id="h-note" aria-level="5"><span>注意</span></div>
                    <p class="">
                        当<a href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-push-subscription-33">推送订阅</a>关联的<a data-type="dfn"
                            href="https://www.w3.org/TR/service-workers/#dfn-service-worker-registration">service worker
                            注册</a>
                        被清除时，该推送订阅将被删除。
                    </p>
                </div>
            </section>
        </section>
        <section id="push-service">
            <div class="header-wrapper">
                <h3 id="x3-4-push-service"><bdi class="secno">3.4 </bdi>
                    推送服务
                </h3><a class="self-link" href="#push-service" aria-label="第3.4节的永久链接"></a>
            </div>

            <p>
                <dfn data-plurals="push services" id="dfn-push-service" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">推送服务</dfn> 指的是一种允许 <a href="#dfn-application-server" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-application-server-10">应用服务器</a> 向 Web 应用程序发送 <a
                    href="#dfn-push-message" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-push-message-17">推送消息</a> 的系统。推送服务为其服务的 <a href="#dfn-push-endpoint"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-endpoint-3">推送端点</a>或<a
                    data-lt="push endpoints" href="#dfn-push-endpoint" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-push-endpoint-4">端点</a>提供服务。
            </p>
            <p>
                <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-user-agent-24">用户代理</a> 会连接到用于创建 <a href="#dfn-push-subscription"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-subscription-35">推送订阅</a> 的 <a
                    href="#dfn-push-service" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-push-service-13">推送服务</a>。<a href="#dfn-user-agent" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-user-agent-25">用户代理</a> <em class="rfc2119">可以</em> 限制可用的<a
                    href="#dfn-push-service" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-push-service-14">推送服务</a>的选择。这样做的原因包括与性能相关的考虑，例如服务可用性（包括特定国家或工作场所网络中服务是否被防火墙阻止）、可靠性、电池寿命的影响，以及元数据传递或规避特定<a
                    href="#dfn-push-service" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-push-service-15">推送服务</a>的协议。
            </p>
        </section>
        <section id="permission">
            <div class="header-wrapper">
                <h3 id="x3-5-permission"><bdi class="secno">3.5 </bdi>
                    权限
                </h3><a class="self-link" href="#permission" aria-label="第3.5节的永久链接"></a>
            </div>

            <p>
                推送 API 是一种被称为 <dfn class="permission export" data-dfn-type="permission" data-export="" id="dfn-push"
                    tabindex="0" aria-haspopup="dialog">“推送”</dfn> 的<a data-link-type="dfn|abstract-op" data-type="dfn"
                    href="https://www.w3.org/TR/permissions/#dfn-powerful-feature">强大功能</a>。
            </p>
            <p>
                为了与 <cite><a data-matched-text="[[[Permissions]]]"
                        href="https://www.w3.org/TR/permissions/">权限</a></cite> 规范集成，本规范定义了
                <a data-link-type="idl" data-lt="PushPermissionDescriptor" href="#dom-pushpermissiondescriptor"
                    class="internalDFN"
                    id="ref-for-dom-pushpermissiondescriptor-1"><code>PushPermissionDescriptor</code></a> 的<a
                    data-link-type="dfn|abstract-op" data-type="dfn"
                    href="https://www.w3.org/TR/permissions/#dfn-permission-descriptor-type">权限描述符类型</a>。
            </p>
            <pre class="idl def" id="webidl-1117437819"><span class="idlHeader"><a class="self-link" href="#webidl-1117437819">WebIDL</a></span><code><span data-idl="" class="idlDictionary" id="idl-def-pushpermissiondescriptor" data-title="PushPermissionDescriptor">dictionary <dfn data-export="" data-dfn-type="dictionary" id="dom-pushpermissiondescriptor" data-idl="dictionary" data-title="PushPermissionDescriptor" data-dfn-for="" class="idlID" tabindex="0" aria-haspopup="dialog"><code>PushPermissionDescriptor</code></dfn> : <span class="idlSuperclass"><a data-link-type="idl" data-type="dictionary" href="https://www.w3.org/TR/permissions/#dom-permissiondescriptor">PermissionDescriptor</a></span> {<span data-idl="" class="idlMember" id="idl-def-pushpermissiondescriptor-uservisibleonly" data-title="userVisibleOnly" data-dfn-for="PushPermissionDescriptor"><span class="idlType">
      <a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean">boolean</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-pushpermissiondescriptor-uservisibleonly" id="ref-for-dom-pushpermissiondescriptor-uservisibleonly-1"><code>userVisibleOnly</code></a> = false;</span>
    };</span></code></pre>
            <p data-dfn-for="PushPermissionDescriptor">
                <dfn data-export="" data-dfn-type="dict-member" id="dom-pushpermissiondescriptor-uservisibleonly"
                    data-idl="field" data-title="userVisibleOnly" data-dfn-for="PushPermissionDescriptor"
                    data-type="boolean" tabindex="0" aria-haspopup="dialog"><code>userVisibleOnly</code></dfn> 的语义与
                <a data-link-type="idl" href="#dom-pushsubscriptionoptionsinit-uservisibleonly" class="internalDFN"
                    id="ref-for-dom-pushsubscriptionoptionsinit-uservisibleonly-1"><code>userVisibleOnly</code></a> 相同。
            </p>
            <p>
                <code>{name: "push", userVisibleOnly: false}</code> 被认为 <a data-link-type="dfn|abstract-op"
                    data-type="dfn" href="https://www.w3.org/TR/permissions/#dfn-stronger-than">强于</a>
                <code>{name: "push", userVisibleOnly: true}</code>。
            </p>
        </section>
    </section>
    <section id="security-and-privacy-considerations">
        <div class="header-wrapper">
            <h2 id="x4-security-and-privacy-considerations"><bdi class="secno">4. </bdi>
                安全和隐私注意事项
            </h2><a class="self-link" href="#security-and-privacy-considerations" aria-label="第4节的永久链接"></a>
        </div>

        <p>
            <a href="#dfn-push-message" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-message-18">推送消息</a>的内容是加密的 [<cite><a class="bibref" data-link-type="biblio"
                    href="#bib-rfc8291" title="用于网络推送的消息加密">RFC8291</a></cite>]。然而，<a href="#dfn-push-service"
                class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-service-16">推送服务</a>仍然暴露于由<a
                href="#dfn-application-server" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-application-server-11">应用服务器</a>通过<a href="#dfn-push-subscription" class="internalDFN"
                data-link-type="dfn" id="ref-for-dfn-push-subscription-36">推送订阅</a>发送给<a href="#dfn-user-agent"
                class="internalDFN" data-link-type="dfn" id="ref-for-dfn-user-agent-26">用户代理</a>的消息的元数据。
            这包括消息的时间、频率和大小。除了更换<a href="#dfn-push-service" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-service-17">推送服务</a>（用户代理可能会禁止此操作），唯一已知的缓解措施是通过填充增加消息的表观大小。
        </p>
        <p>
            不能保证<a href="#dfn-push-message" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-message-19">推送消息</a>是由与Web应用程序具有相同来源的<a href="#dfn-application-server"
                class="internalDFN" data-link-type="dfn" id="ref-for-dfn-application-server-12">应用服务器</a>发送的。<a
                href="#dfn-application-server" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-application-server-13">应用服务器</a>可以自行决定与第三方共享使用<a href="#dfn-push-subscription"
                class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-subscription-37">推送订阅</a>所需的详细信息。
        </p>
        <p>
            以下要求旨在尽可能保护用户的隐私和安全，并在满足该目标的前提下，保护<a href="#dfn-application-server" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-application-server-14">应用服务器</a>与用户通信的完整性。
        </p>
        <p>
            <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-user-agent-27">用户代理</a><em class="rfc2119">不得</em>在没有用户的<a data-type="dfn"
                href="https://www.w3.org/TR/permissions/#dfn-express-permission">明确许可</a>的情况下向Web应用程序提供Push API访问权限。<a
                href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-user-agent-28">用户代理</a><em
                class="rfc2119">必须</em>通过用户界面在每次调用<code>subscribe()</code>方法时获取许可，除非已保存了之前的许可授予，或存在预先安排的信任关系。保留超出当前浏览会话的许可<em
                class="rfc2119">必须</em>是可撤销的。
        </p>
        <p>
            Push API可能需要唤醒与<a data-type="dfn"
                href="https://www.w3.org/TR/service-workers/#dfn-service-worker-registration">Service
                Worker注册</a>关联的Service Worker，以运行开发人员提供的事件处理程序。这可能会导致资源使用，例如网络流量，<a href="#dfn-user-agent"
                class="internalDFN" data-link-type="dfn" id="ref-for-dfn-user-agent-29">用户代理</a><em
                class="rfc2119">应</em>将其归因于创建了<a href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-subscription-38">推送订阅</a>的Web应用程序。
        </p>
        <p>
            <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-user-agent-30">用户代理</a><em class="rfc2119">可以</em>在获取许可或确定许可状态时考虑<a
                href="#dom-pushsubscriptionoptions" class="internalDFN" data-link-type="idl"
                id="ref-for-dom-pushsubscriptionoptions-3"><code>PushSubscriptionOptions</code></a>。
        </p>
        <p>
            当许可被撤销时，<a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-user-agent-31">用户代理</a><em class="rfc2119">可以</em><a
                href="#dfn-fire-the-pushsubscriptionchange-event" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-fire-the-pushsubscriptionchange-event-4">触发"<code>pushsubscriptionchange</code>"事件</a>，该事件适用于使用该许可创建的订阅，关联的<a
                data-type="dfn" href="https://www.w3.org/TR/service-workers/#dfn-service-worker-registration">Service
                Worker注册</a>作为<var>registration</var>，代表<a href="#dfn-push-subscription" class="internalDFN"
                data-link-type="dfn" id="ref-for-dfn-push-subscription-40">推送订阅</a>的<a data-link-type="idl"
                data-lt="PushSubscription" href="#dom-pushsubscription" class="internalDFN"
                id="ref-for-dom-pushsubscription-9"><code>PushSubscription</code></a>实例作为<var>oldSubscription</var>，<code>null</code>作为<var>newSubscription</var>。<a
                href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-user-agent-32">用户代理</a><em class="rfc2119">必须</em>并行<a href="#dfn-deactivate"
                class="internalDFN" data-link-type="dfn" id="ref-for-dfn-deactivate-5">停用</a>受影响的订阅。
        </p>
        <p>
            当<a data-type="dfn" href="https://www.w3.org/TR/service-workers/#dfn-service-worker-registration">Service
                Worker注册</a>被注销时，任何关联的<a href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-subscription-41">推送订阅</a><em class="rfc2119">必须</em>被<a href="#dfn-deactivate"
                class="internalDFN" data-link-type="dfn" id="ref-for-dfn-deactivate-6">停用</a>。
        </p>
        <p>
            <a href="#dfn-push-endpoint" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-endpoint-5">推送端点</a><em class="rfc2119">不得</em>向<a href="#dfn-push-service"
                class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-service-18">推送服务</a>之外的其他参与方暴露任何有关用户设备、身份或位置的信息。有关确切要求，请参阅[<cite><a class="bibref"
                    data-link-type="biblio" href="#bib-rfc8030" title="使用HTTP推送的通用事件传递">RFC8030</a></cite>]中的隐私注意事项。
        </p>
        <p>
            已停用的<a href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-subscription-42">推送订阅</a>的<a href="#dfn-push-endpoint" class="internalDFN"
                data-link-type="dfn" id="ref-for-dfn-push-endpoint-6">推送端点</a><em class="rfc2119">不得</em>被重新用于新的<a
                href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-subscription-43">推送订阅</a>。这可以防止用户无法移除的持久标识符的创建。它还可以防止利用一个<a
                href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-subscription-44">推送订阅</a>的详细信息来向另一个<a href="#dfn-push-subscription"
                class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-subscription-45">推送订阅</a>发送<a
                href="#dfn-push-message" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-message-20">推送消息</a>。
        </p>
        <p>
            <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-user-agent-33">用户代理</a><em class="rfc2119">必须</em>将Push API的实现仅限于<a
                data-link-type="dfn|abstract-op" data-type="dfn"
                href="https://html.spec.whatwg.org/multipage/webappapis.html#secure-context">安全上下文</a>中可用。这为用户提供了更好的保护，防止中间人攻击以获取推送订阅数据。浏览器仅可在开发目的下忽略此规则。
        </p>
    </section>
    <section class="informative" id="pushframework">
        <div class="header-wrapper">
            <h2 id="x5-push-framework"><bdi class="secno">5. </bdi>
                推送框架
            </h2><a class="self-link" href="#pushframework" aria-label="第5节的永久链接"></a>
        </div>
        <p><em>本节为非规范性内容。</em></p>

        <p>
            <a href="#dfn-push-message" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-message-21">推送消息</a>是由<a href="#dfn-application-server" class="internalDFN"
                data-link-type="dfn" id="ref-for-dfn-application-server-15">应用服务器</a>按以下方式发送到Web应用程序的：
        </p>
        <ul>
            <li><a href="#dfn-application-server" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-application-server-16">应用服务器</a>请求<a href="#dfn-push-service" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-push-service-19">推送服务</a>使用[<cite><a class="bibref"
                        data-link-type="biblio" href="#bib-rfc8030" title="使用HTTP推送的通用事件传递">RFC8030</a></cite>]传递<a
                    href="#dfn-push-message" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-push-message-22">推送消息</a>。此请求使用包含在<a href="#dfn-push-subscription"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-subscription-46">推送订阅</a>中的<a
                    href="#dfn-push-endpoint" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-push-endpoint-7">推送端点</a>；
            </li>
            <li><a href="#dfn-push-service" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-push-service-20">推送服务</a>将消息传递给特定的<a href="#dfn-user-agent" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-user-agent-34">用户代理</a>，并在消息中标识<a href="#dfn-push-endpoint"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-endpoint-8">推送端点</a>；
            </li>
            <li><a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-user-agent-35">用户代理</a>识别目标<a data-type="dfn"
                    href="https://www.w3.org/TR/service-workers/#dfn-service-worker">Service Worker</a>并根据需要激活它，然后将<a
                    href="#dfn-push-message" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-push-message-23">推送消息</a>传递给<a data-type="dfn"
                    href="https://www.w3.org/TR/service-workers/#dfn-service-worker">Service Worker</a>。
            </li>
        </ul>
        <p>
            这一整体框架允许<a href="#dfn-application-server" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-application-server-17">应用服务器</a>响应<a href="#dfn-application-server" class="internalDFN"
                data-link-type="dfn" id="ref-for-dfn-application-server-18">应用服务器</a>上的事件激活<a data-type="dfn"
                href="https://www.w3.org/TR/service-workers/#dfn-service-worker">Service Worker</a>。这些事件的信息可以包含在<a
                href="#dfn-push-message" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-message-24">推送消息</a>中，这使得Web应用程序能够适当地响应这些事件，可能无需发起网络请求。
        </p>
        <p>
            以下代码和图表展示了推送API的一个假设使用示例。
        </p>
        <section class="informative" id="example">
            <div class="header-wrapper">
                <h3 id="x5-1-example"><bdi class="secno">5.1 </bdi>
                    示例
                </h3><a class="self-link" href="#example" aria-label="第5.1节的永久链接"></a>
            </div>
            <p><em>本节为非规范性内容。</em></p>

            <div class="example" id="example-1">
                <div class="marker">
                    <a class="self-link" href="#example-1">示例<bdi> 1</bdi></a>
                </div>
                <pre aria-busy="false"><code class="hljs javascript"><span class="hljs-comment">// https://example.com/serviceworker.js</span>
    <span class="hljs-built_in">this</span>.onpush = <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
      <span class="hljs-built_in">console</span>.log(event.data);
      <span class="hljs-comment">// 从这里我们可以将数据写入IndexedDB，发送到任何打开的窗口，</span>
      <span class="hljs-comment">// 显示通知等。</span>
    }
    
    <span class="hljs-comment">// https://example.com/webapp.js</span>
    <span class="hljs-comment">// 在一个异步函数内部...</span>
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> serviceWorkerRegistration = <span class="hljs-keyword">await</span> navigator.serviceWorker.register(
        <span class="hljs-string">"serviceworker.js"</span>
      );
      <span class="hljs-keyword">const</span> pushSubscription = <span class="hljs-keyword">await</span> serviceWorkerRegistration.pushManager.subscribe();
      <span class="hljs-comment">// 应用服务器所需的推送订阅详细信息现在已可用，</span>
      <span class="hljs-comment">// 并且可以使用，例如，XMLHttpRequest发送给它。</span>
      <span class="hljs-built_in">console</span>.log(pushSubscription.endpoint);
      <span class="hljs-built_in">console</span>.log(pushSubscription.getKey(<span class="hljs-string">"p256dh"</span>));
      <span class="hljs-built_in">console</span>.log(pushSubscription.getKey(<span class="hljs-string">"auth"</span>));
    } <span class="hljs-keyword">catch</span> (err) {
      <span class="hljs-comment">// 在生产环境中，可能还需要将错误信息</span>
      <span class="hljs-comment">// 报告回应用服务器。</span>
      <span class="hljs-built_in">console</span>.log(error);
    }</code></pre>
            </div>
        </section>
        <section class="informative" id="sequence-diagram">
            <div class="header-wrapper">
                <h3 id="x5-2-sequence-diagram"><bdi class="secno">5.2 </bdi>
                    序列图
                </h3><a class="self-link" href="#sequence-diagram" aria-label="第5.2节的永久链接"></a>
            </div>
            <p><em>本节为非规范性内容。</em></p>

            <figure id="fig-example-flow-of-events-for-subscription-push-message-delivery-and-unsubscription">
                <a href="images/sequence_diagram.png"><img
                        src="https://www.w3.org/TR/push-api/images/sequence_diagram.png" width="795" height="870"
                        alt="订阅、推送消息传递和取消订阅的事件流程示例"></a>
                <figcaption><a class="self-link"
                        href="#fig-example-flow-of-events-for-subscription-push-message-delivery-and-unsubscription">图
                        <bdi class="figno">1</bdi></a> <span class="fig-title">
                        订阅、推送消息传递和取消订阅的事件流程示例
                    </span></figcaption>
            </figure>
        </section>
        <section id="push-service-use">
            <div class="header-wrapper">
                <h3 id="x5-3-push-service-use"><bdi class="secno">5.3 </bdi>
                    推送服务的使用
                </h3><a class="self-link" href="#push-service-use" aria-label="第5.3节的永久链接"></a>
            </div>

            <p>
                <a data-link-type="idl" data-lt="PushSubscription" href="#dom-pushsubscription" class="internalDFN"
                    id="ref-for-dom-pushsubscription-10"><code>PushSubscription</code></a>中包含的字段是<a
                    href="#dfn-application-server" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-application-server-19">应用服务器</a>发送<a href="#dfn-push-message" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-push-message-25">推送消息</a>所需的所有信息。与Push API兼容的推送服务提供符合<a
                    href="#dfn-web-push-protocol" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-web-push-protocol-2">Web推送协议</a>的<a href="#dfn-push-endpoint" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-push-endpoint-9">推送端点</a>。这些参数和属性包括：
            </p>
            <ul>
                <li><a href="#dfn-push-endpoint" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-push-endpoint-10">推送端点</a>是<a data-link-type="idl" data-lt="PushSubscription"
                        href="#dom-pushsubscription" class="internalDFN"
                        id="ref-for-dom-pushsubscription-11"><code>PushSubscription</code></a>的URL，允许<a
                        href="#dfn-application-server" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-application-server-20">应用服务器</a>请求将<a href="#dfn-push-message"
                        class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-message-26">推送消息</a>传递给Web应用程序。
                </li>
                <li><a data-link-type="idl" data-lt="getKey()" href="#dom-pushsubscription-getkey" class="internalDFN"
                        id="ref-for-dom-pushsubscription-getkey-3"><code>getKey</code></a><code>()</code>方法用于<a
                        data-link-type="idl" data-lt="PushSubscription" href="#dom-pushsubscription" class="internalDFN"
                        id="ref-for-dom-pushsubscription-12"><code>PushSubscription</code></a>中检索用于加密和认证<a
                        href="#dfn-push-message" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-push-message-27">推送消息</a>的密钥材料。
                    每次调用该函数都会返回一个包含相应密钥值的新的<a data-link-type="idl" data-lt="ArrayBuffer" data-type="interface"
                        href="https://webidl.spec.whatwg.org/#idl-ArrayBuffer"><code>ArrayBuffer</code></a>，如果标识的密钥不存在，则返回<code>null</code>。传递"<a
                        data-link-type="idl" href="#dom-pushencryptionkeyname-p256dh" class="internalDFN"
                        id="ref-for-dom-pushencryptionkeyname-p256dh-2"><code>p256dh</code></a>"值可检索与<a
                        href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-push-subscription-47">推送订阅</a>关联的<dfn data-abbr="ECDH"
                        data-lt="ECDH|椭圆曲线Diffie-Hellman" id="dfn-ecdh" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">椭圆曲线Diffie-Hellman</dfn>（<abbr
                        title="椭圆曲线Diffie-Hellman">ECDH</abbr>）公钥。传递<code>auth</code>值返回应用服务器用于认证其消息的认证密钥。这些密钥由<a
                        href="#dfn-application-server" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-application-server-21">应用服务器</a>用于加密和认证<a href="#dfn-push-subscription"
                        class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-push-subscription-48">推送订阅</a>的消息，如[<cite><a class="bibref"
                            data-link-type="biblio" href="#bib-rfc8291" title="用于Web推送的消息加密">RFC8291</a></cite>]中所述。
                </li>
            </ul>
        </section>
    </section>
    <section data-dfn-for="ServiceWorkerRegistration" id="extensions-to-the-serviceworkerregistration-interface">
        <div class="header-wrapper">
            <h2 id="x6-extensions-to-the-serviceworkerregistration-interface"><bdi class="secno">6. </bdi>
                <code>ServiceWorkerRegistration</code>接口的扩展
            </h2><a class="self-link" href="#extensions-to-the-serviceworkerregistration-interface"
                aria-label="第6节的永久链接"></a>
        </div>

        <p>
            Service Worker规范定义了<a data-link-type="idl" data-lt="ServiceWorkerRegistration" data-type="interface"
                href="https://www.w3.org/TR/service-workers/#serviceworkerregistration"><code>ServiceWorkerRegistration</code></a>
            接口
            [<cite><a class="bibref" data-link-type="biblio" href="#bib-service-workers"
                    title="Service Workers">SERVICE-WORKERS</a></cite>]，而本规范对其进行了扩展。
        </p>
        <pre class="idl def" data-cite="WEBIDL service-workers" id="webidl-27231878"><span class="idlHeader"><a class="self-link" href="#webidl-27231878">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-serviceworkerregistration-partial-1" data-title="ServiceWorkerRegistration">[<span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>]
    partial interface <a data-idl="partial" data-link-type="interface" data-title="ServiceWorkerRegistration" class="idlID" data-dfn-for="ServiceWorkerRegistration" data-type="interface" href="https://www.w3.org/TR/service-workers/#serviceworkerregistration">ServiceWorkerRegistration</a> {<span data-idl="" class="idlAttribute" id="idl-def-serviceworkerregistration-pushmanager" data-title="pushManager" data-dfn-for="ServiceWorkerRegistration">
      readonly attribute<span class="idlType"> <a data-link-type="idl" href="#dom-pushmanager" class="internalDFN" id="ref-for-dom-pushmanager-1"><code>PushManager</code></a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-serviceworkerregistration-pushmanager" id="ref-for-dom-serviceworkerregistration-pushmanager-1"><code>pushManager</code></a>;</span>
    };</span></code></pre>
        <p>
            <dfn data-export="" data-dfn-type="attribute" id="dom-serviceworkerregistration-pushmanager"
                data-idl="attribute" data-title="pushManager" data-dfn-for="ServiceWorkerRegistration"
                data-type="PushManager" data-lt="pushManager" data-local-lt="ServiceWorkerRegistration.pushManager"
                tabindex="0" aria-haspopup="dialog"><code>pushManager</code></dfn>属性暴露了一个<a data-link-type="idl"
                data-lt="PushManager" href="#dom-pushmanager" class="internalDFN"
                id="ref-for-dom-pushmanager-2"><code>PushManager</code></a>，它与<a data-type="dfn"
                href="https://www.w3.org/TR/service-workers/#dfn-service-worker-registration">Service
                Worker注册</a>相关联，由暴露该属性的<a data-link-type="idl" data-lt="ServiceWorkerRegistration" data-type="interface"
                href="https://www.w3.org/TR/service-workers/#serviceworkerregistration"><code>ServiceWorkerRegistration</code></a>表示。
        </p>
    </section>
    <section data-dfn-for="PushManager" id="pushmanager-interface">
        <div class="header-wrapper">
            <h2 id="x7-pushmanager-interface"><bdi class="secno">7. </bdi>
                <dfn data-export="" data-dfn-type="interface" id="dom-pushmanager" data-idl="interface"
                    data-title="PushManager" data-dfn-for="" tabindex="0"
                    aria-haspopup="dialog"><code>PushManager</code></dfn>接口
            </h2><a class="self-link" href="#pushmanager-interface" aria-label="第7节的永久链接"></a>
        </div>

        <p>
            <a data-link-type="idl" data-lt="PushManager" href="#dom-pushmanager" class="internalDFN"
                id="ref-for-dom-pushmanager-3"><code>PushManager</code></a>接口定义了访问<a href="#dfn-push-service"
                class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-service-21">推送服务</a>的操作。
        </p>
        <pre class="idl def" id="webidl-1816674501"><span class="idlHeader"><a class="self-link" href="#webidl-1816674501">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-pushmanager" data-title="PushManager">[<span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=(Window,Worker)</span>, <span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>]
    interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-pushmanager" id="ref-for-dom-pushmanager-4"><code>PushManager</code></a> {<span data-idl="" class="idlAttribute" id="idl-def-pushmanager-supportedcontentencodings" data-title="supportedContentEncodings" data-dfn-for="PushManager">
      [<span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject">SameObject</a></span>] static readonly attribute<span class="idlType"> <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-frozen-array">FrozenArray</a>&lt;<a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a>&gt;</span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-pushmanager-supportedcontentencodings" id="ref-for-dom-pushmanager-supportedcontentencodings-1"><code>supportedContentEncodings</code></a>;</span><span data-idl="" class="idlMethod" id="idl-def-pushmanager-subscribe-options" data-title="subscribe" data-dfn-for="PushManager"><span class="idlType">
    
      <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dom-pushsubscription" class="internalDFN" id="ref-for-dom-pushsubscription-13"><code>PushSubscription</code></a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-pushmanager-subscribe" id="ref-for-dom-pushmanager-subscribe-1"><code>subscribe</code></a>(optional<span class="idlType"> <a data-link-type="idl" href="#dom-pushsubscriptionoptionsinit" class="internalDFN" id="ref-for-dom-pushsubscriptionoptionsinit-2"><code>PushSubscriptionOptionsInit</code></a></span> <span class="idlParamName">options</span> = {});</span><span data-idl="" class="idlMethod" id="idl-def-pushmanager-getsubscription" data-title="getSubscription" data-dfn-for="PushManager"><span class="idlType">
      <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dom-pushsubscription" class="internalDFN" id="ref-for-dom-pushsubscription-14"><code>PushSubscription</code></a>?&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-pushmanager-getsubscription" id="ref-for-dom-pushmanager-getsubscription-1"><code>getSubscription</code></a>();</span><span data-idl="" class="idlMethod" id="idl-def-pushmanager-permissionstate-options" data-title="permissionState" data-dfn-for="PushManager"><span class="idlType">
      <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" data-type="enum" href="https://www.w3.org/TR/permissions/#dom-permissionstate">PermissionState</a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-pushmanager-permissionstate" id="ref-for-dom-pushmanager-permissionstate-1"><code>permissionState</code></a>(optional<span class="idlType"> <a data-link-type="idl" href="#dom-pushsubscriptionoptionsinit" class="internalDFN" id="ref-for-dom-pushsubscriptionoptionsinit-3"><code>PushSubscriptionOptionsInit</code></a></span> <span class="idlParamName">options</span> = {});</span>
    };</span></code></pre>
        <p>
            <dfn data-export="" data-dfn-type="attribute" id="dom-pushmanager-supportedcontentencodings"
                data-idl="attribute" data-title="supportedContentEncodings" data-dfn-for="PushManager"
                data-type="FrozenArray" data-lt="supportedContentEncodings"
                data-local-lt="PushManager.supportedContentEncodings" tabindex="0"
                aria-haspopup="dialog"><code>supportedContentEncodings</code></dfn>属性公开了可用于加密<a href="#dfn-push-message"
                class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-message-28">推送消息</a>的有效载荷的支持内容编码的序列。请求推送服务发送<a href="#dfn-push-message"
                class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-message-29">推送消息</a>时，使用<a
                href="#dfn-content-encoding" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-content-encoding-1"><code>Content-Encoding</code></a>头字段指示内容编码。
        </p>
        <p>
            <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-user-agent-36">用户代理</a><em class="rfc2119">必须</em>支持[<cite><a class="bibref"
                    data-link-type="biblio" href="#bib-rfc8291"
                    title="用于Web推送的消息加密">RFC8291</a></cite>]中定义的<code>aes128gcm</code>内容编码，
            <em class="rfc2119">可以</em>为了兼容性支持早期草案版本中定义的内容编码。
        </p>
        <section id="subscribe-method">
            <div class="header-wrapper">
                <h3 id="x7-1-subscribe-method"><bdi class="secno">7.1 </bdi>
                    <code>subscribe()</code> 方法
                </h3><a class="self-link" href="#subscribe-method" aria-label="第7.1节的永久链接"></a>
            </div>
            <p>
                当调用 <dfn data-export="" data-dfn-type="method" id="dom-pushmanager-subscribe" data-idl="operation"
                    data-title="subscribe()" data-dfn-for="PushManager" data-type="Promise"
                    data-lt="subscribe()|subscribe(options)"
                    data-local-lt="PushManager.subscribe|PushManager.subscribe()|subscribe" tabindex="0"
                    aria-haspopup="dialog"><code>subscribe()</code></dfn> 方法时，<em class="rfc2119">必须</em>执行以下步骤：
            </p>
            <ol class="algorithm">
                <li>将 <var>promise</var> 设为<a data-link-type="dfn|abstract-op" data-type="dfn"
                        href="https://webidl.spec.whatwg.org/#a-new-promise">一个新的promise</a>。
                </li>
                <li>将 <var>global</var> 设为 <a data-link-type="dfn|abstract-op" data-type="dfn"
                        href="https://webidl.spec.whatwg.org/#this">this</a> 的 <a data-link-type="dfn|abstract-op"
                        data-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global">相关全局对象</a>。
                </li>
                <li>返回 <var>promise</var> 并继续<a data-link-type="dfn|abstract-op" data-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">并行</a>执行。
                    <div class="note" role="note" id="issue-container-generatedID-0">
                        <div role="heading" class="note-title marker" id="h-note-0" aria-level="3">
                            <span>注释</span><span class="issue-label">: 验证顺序可能因用户代理而异</span>
                        </div>
                        <aside class="">
                            <p>
                                由于实现特定的原因，已知用户代理会以不同顺序执行某些检查（例如，有些会在验证<a data-link-type="idl"
                                    href="#dom-pushsubscriptionoptionsinit-uservisibleonly" class="internalDFN"
                                    id="ref-for-dom-pushsubscriptionoptionsinit-uservisibleonly-2"><code>userVisibleOnly</code></a>是否允许之前，验证<a
                                    data-link-type="idl" href="#dom-pushsubscriptionoptionsinit-applicationserverkey"
                                    class="internalDFN"
                                    id="ref-for-dom-pushsubscriptionoptionsinit-applicationserverkey-1"><code>applicationServerKey</code></a>，反之亦然）。但是，我们认为这不会影响实现或Web应用程序的互操作性。
                            </p>
                        </aside>
                    </div>
                </li>
                <li>如果 <var>options</var> 参数的 <a data-link-type="idl"
                        href="#dom-pushsubscriptionoptionsinit-uservisibleonly" class="internalDFN"
                        id="ref-for-dom-pushsubscriptionoptionsinit-uservisibleonly-3"><code>userVisibleOnly</code></a>
                    值设置为 <code>false</code> 且用户代理要求其为 <code>true</code>，则使用 <var>global</var> 在<a
                        data-link-type="dfn|abstract-op" data-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task">网络任务源</a>上<a
                        data-link-type="dfn|abstract-op" data-type="dfn"
                        href="https://webidl.spec.whatwg.org/#reject">拒绝</a> <var>promise</var> 并返回一个 <a
                        data-link-type="idl" data-type="exception"
                        href="https://webidl.spec.whatwg.org/#notallowederror"><code>NotAllowedError</code></a> <a
                        data-link-type="idl" data-lt="DOMException" data-type="interface"
                        href="https://webidl.spec.whatwg.org/#idl-DOMException"><code>DOMException</code></a>。
                </li>
                <li>如果 <var>options</var> 参数未包含 <a data-link-type="idl"
                        href="#dom-pushsubscriptionoptionsinit-applicationserverkey" class="internalDFN"
                        id="ref-for-dom-pushsubscriptionoptionsinit-applicationserverkey-2"><code>applicationServerKey</code></a>
                    的非空值，且<a href="#dfn-push-service" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-push-service-23">推送服务</a>需要提供一个，则使用 <var>global</var> 在<a
                        data-link-type="dfn|abstract-op" data-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task">网络任务源</a>上<a
                        data-link-type="dfn|abstract-op" data-type="dfn"
                        href="https://webidl.spec.whatwg.org/#reject">拒绝</a> <var>promise</var> 并返回一个 <a
                        data-link-type="idl" data-type="exception"
                        href="https://webidl.spec.whatwg.org/#notsupportederror"><code>NotSupportedError</code></a> <a
                        data-link-type="idl" data-lt="DOMException" data-type="interface"
                        href="https://webidl.spec.whatwg.org/#idl-DOMException"><code>DOMException</code></a>。
                </li>
                <li>如果 <var>options</var> 参数包含 <a data-link-type="idl"
                        href="#dom-pushsubscriptionoptions-applicationserverkey" class="internalDFN"
                        id="ref-for-dom-pushsubscriptionoptions-applicationserverkey-2"><code>applicationServerKey</code></a>
                    的非空值，执行以下子步骤：
                    <ol>
                        <li>如果 <var>options</var> 的 <a data-link-type="idl"
                                href="#dom-pushsubscriptionoptionsinit-applicationserverkey" class="internalDFN"
                                id="ref-for-dom-pushsubscriptionoptionsinit-applicationserverkey-3"><code>applicationServerKey</code></a>
                            是一个 <a data-link-type="idl" data-lt="DOMString" data-type="interface"
                                href="https://webidl.spec.whatwg.org/#idl-DOMString"><code>DOMString</code></a>，将其值设置为一个包含<var>options</var>
                            的 <a data-link-type="idl" href="#dom-pushsubscriptionoptionsinit-applicationserverkey"
                                class="internalDFN"
                                id="ref-for-dom-pushsubscriptionoptionsinit-applicationserverkey-4"><code>applicationServerKey</code></a>
                            的 Base64URL 编码的<a data-link-type="idl" data-lt="ArrayBuffer" data-type="interface"
                                href="https://webidl.spec.whatwg.org/#idl-ArrayBuffer"><code>ArrayBuffer</code></a>。
                        </li>
                        <li>如果解码失败，使用 <var>global</var> 在<a data-link-type="dfn|abstract-op" data-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task">网络任务源</a>上<a
                                data-link-type="dfn|abstract-op" data-type="dfn"
                                href="https://webidl.spec.whatwg.org/#reject">拒绝</a> <var>promise</var> 并返回一个 <a
                                data-link-type="idl" data-type="exception"
                                href="https://webidl.spec.whatwg.org/#invalidcharactererror"><code>InvalidCharacterError</code></a>
                            <a data-link-type="idl" data-lt="DOMException" data-type="interface"
                                href="https://webidl.spec.whatwg.org/#idl-DOMException"><code>DOMException</code></a>
                            并终止这些步骤。
                        </li>
                        <li>确保 <var>options</var> 的 <a data-link-type="idl"
                                href="#dom-pushsubscriptionoptionsinit-applicationserverkey" class="internalDFN"
                                id="ref-for-dom-pushsubscriptionoptionsinit-applicationserverkey-5"><code>applicationServerKey</code></a>
                            描述了 P-256 曲线上的有效点。如果其值无效，使用 <var>global</var> 在<a data-link-type="dfn|abstract-op"
                                data-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task">网络任务源</a>上<a
                                data-link-type="dfn|abstract-op" data-type="dfn"
                                href="https://webidl.spec.whatwg.org/#reject">拒绝</a> <var>promise</var> 并返回一个 <a
                                data-link-type="idl" data-type="exception"
                                href="https://webidl.spec.whatwg.org/#invalidaccesserror"><code>InvalidAccessError</code></a>
                            <a data-link-type="idl" data-lt="DOMException" data-type="interface"
                                href="https://webidl.spec.whatwg.org/#idl-DOMException"><code>DOMException</code></a>
                            并终止这些步骤。
                        </li>
                    </ol>
                </li>
                <li>将 <var data-type="ServiceWorkerRegistration">registration</var> 设为 <a
                        data-link-type="dfn|abstract-op" data-type="dfn"
                        href="https://webidl.spec.whatwg.org/#this">this</a> 相关联的<a data-type="dfn"
                        href="https://www.w3.org/TR/service-workers/#dfn-service-worker-registration">service worker
                        registration</a>。
                </li>
                <li>如果 <var data-type="ServiceWorkerRegistration">registration</var> 的 <a
                        data-link-type="dfn|abstract-op" data-type="dfn"
                        href="https://www.w3.org/TR/service-workers/#dfn-active-worker">active worker</a> 为 null，使用
                    <var>global</var> 在<a data-link-type="dfn|abstract-op" data-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task">网络任务源</a>上<a
                        data-link-type="dfn|abstract-op" data-type="dfn"
                        href="https://webidl.spec.whatwg.org/#reject">拒绝</a> <var>promise</var> 并返回一个 <a
                        data-link-type="idl" data-type="exception"
                        href="https://webidl.spec.whatwg.org/#invalidstateerror"><code>InvalidStateError</code></a> <a
                        data-link-type="idl" data-lt="DOMException" data-type="interface"
                        href="https://webidl.spec.whatwg.org/#idl-DOMException"><code>DOMException</code></a> 并终止这些步骤。
                </li>
                <li>将 <var>permission</var> 设为<a data-link-type="dfn|abstract-op" data-type="dfn"
                        href="https://www.w3.org/TR/permissions/#dfn-request-permission-to-use">请求使用</a>“推送”的权限。
                </li>
                <li>如果 <var>permission</var> 为 "<a data-link-type="idl" data-type="enum-value"
                        href="https://www.w3.org/TR/permissions/#dom-permissionstate-denied"><code>denied</code></a>"，使用
                    <var>global</var> 在<a data-link-type="dfn|abstract-op" data-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#user-interaction-task-source">用户交互任务源</a>上<a
                        data-link-type="dfn|abstract-op" data-type="dfn"
                        href="https://webidl.spec.whatwg.org/#reject">拒绝</a> <var>promise</var> 并返回一个 <a
                        data-link-type="idl" data-type="exception"
                        href="https://webidl.spec.whatwg.org/#notallowederror"><code>NotAllowedError</code></a> <a
                        data-link-type="idl" data-lt="DOMException" data-type="interface"
                        href="https://webidl.spec.whatwg.org/#idl-DOMException"><code>DOMException</code></a> 并终止这些步骤。
                </li>
                <li>如果 <var data-type="ServiceWorkerRegistration">registration</var> 具有 <a href="#dfn-push-subscription"
                        class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-subscription-49">推送订阅</a>：
                    <ol>
                        <li>将 <var>subscription</var> 设为获取 <var data-type="ServiceWorkerRegistration">registration</var>
                            的<a href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-push-subscription-50">推送
                                订阅</a>的结果。如果出现错误，使用 <var>global</var> 在<a data-link-type="dfn|abstract-op"
                                data-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task">网络任务源</a>上<a
                                data-link-type="dfn|abstract-op" data-type="dfn"
                                href="https://webidl.spec.whatwg.org/#reject">拒绝</a> <var>promise</var> 并返回一个 <a
                                data-link-type="idl" data-type="exception"
                                href="https://webidl.spec.whatwg.org/#aborterror"><code>AbortError</code></a> <a
                                data-link-type="idl" data-lt="DOMException" data-type="interface"
                                href="https://webidl.spec.whatwg.org/#idl-DOMException"><code>DOMException</code></a>
                            并终止这些步骤。
                        </li>
                        <li>比较 <var>options</var> 参数与 <var>subscription</var> 的 <code>options</code> 属性。<a
                                data-link-type="idl" data-lt="BufferSource" data-type="typedef"
                                href="https://webidl.spec.whatwg.org/#BufferSource"><code>BufferSource</code></a>
                            的内容按值比较，而不是<a data-link-type="dfn|abstract-op" data-lt="reference record" data-type="dfn"
                                href="https://tc39.es/ecma262/multipage/ecmascript-data-types-and-values.html#sec-reference-record-specification-type">引用</a>。
                        </li>
                        <li>如果 <var>options</var> 中的任何属性值与存储在 <var>subscription</var> 中的值不同，则使用 <var>global</var> 在<a
                                data-link-type="dfn|abstract-op" data-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task">网络任务源</a>上<a
                                data-link-type="dfn|abstract-op" data-type="dfn"
                                href="https://webidl.spec.whatwg.org/#reject">拒绝</a> <var>promise</var> 并返回一个 <a
                                data-link-type="idl" data-type="exception"
                                href="https://webidl.spec.whatwg.org/#invalidstateerror"><code>InvalidStateError</code></a>
                            <a data-link-type="idl" data-lt="DOMException" data-type="interface"
                                href="https://webidl.spec.whatwg.org/#idl-DOMException"><code>DOMException</code></a>
                            并终止这些步骤。
                        </li>
                        <li>当请求完成时，使用 <var>global</var> 在<a data-link-type="dfn|abstract-op" data-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task">网络任务源</a>上<a
                                data-link-type="dfn|abstract-op" data-type="dfn"
                                href="https://webidl.spec.whatwg.org/#resolve">解决</a> <var>promise</var>，返回
                            <var>subscription</var> 并终止这些步骤。
                        </li>
                    </ol>
                </li>
                <li>将 <var>subscription</var> 设为尝试使用 <var>options</var><a data-link-type="dfn|abstract-op"
                        href="#dfn-create-a-push-subscription" class="internalDFN"
                        id="ref-for-dfn-create-a-push-subscription-2">创建推送订阅</a> 的结果。如果创建订阅时<a
                        data-link-type="dfn|abstract-op" data-type="dfn"
                        href="https://webidl.spec.whatwg.org/#dfn-throw">抛出</a> <a data-link-type="dfn|abstract-op"
                        data-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-exception">异常</a>，使用 <var>global</var>
                    在<a data-link-type="dfn|abstract-op" data-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task">网络任务源</a>上<a
                        data-link-type="dfn|abstract-op" data-type="dfn"
                        href="https://webidl.spec.whatwg.org/#reject">拒绝</a> <var>promise</var> 并返回该<a
                        data-link-type="dfn|abstract-op" data-type="dfn"
                        href="https://webidl.spec.whatwg.org/#dfn-exception">异常</a> 并终止这些步骤。
                </li>
                <li>否则，使用 <var>global</var> 在<a data-link-type="dfn|abstract-op" data-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task">网络任务源</a>上<a
                        data-link-type="dfn|abstract-op" data-type="dfn"
                        href="https://webidl.spec.whatwg.org/#resolve">解决</a> <var>promise</var>，返回一个提供新订阅详细信息的<a
                        data-link-type="idl" data-lt="PushSubscription" href="#dom-pushsubscription" class="internalDFN"
                        id="ref-for-dom-pushsubscription-15"><code>PushSubscription</code></a>。
                </li>
            </ol>
            <p>
                当调用 <dfn data-dfn-for="PushManager" data-export="" data-dfn-type="method"
                    id="dom-pushmanager-getsubscription" data-idl="operation" data-title="getSubscription"
                    data-type="Promise" data-lt="getSubscription()"
                    data-local-lt="PushManager.getSubscription|PushManager.getSubscription()|getSubscription"
                    tabindex="0" aria-haspopup="dialog"><code>getSubscription</code></dfn> 方法时，<em
                    class="rfc2119">必须</em>执行以下步骤：
            </p>
            <ol>
                <li>将 <var>promise</var> 设为<a data-type="dfn"
                        href="https://webidl.spec.whatwg.org/#a-new-promise">一个新的promise</a>。
                </li>
                <li>返回 <var>promise</var> 并异步执行以下步骤。
                </li>
                <li>如果 <a data-type="dfn" href="https://www.w3.org/TR/service-workers/#dfn-service-worker">Service
                        Worker</a> 没有订阅，使用 null 解决 <var>promise</var>。
                </li>
                <li>检索与 <a href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-push-subscription-51">推送订阅</a> 相关联的<a data-type="dfn"
                        href="https://www.w3.org/TR/service-workers/#dfn-service-worker">Service Worker</a>。
                </li>
                <li>如果出现错误，使用一个名称为<a data-link-type="idl" data-lt="DOMException" data-type="interface"
                        href="https://webidl.spec.whatwg.org/#idl-DOMException"><code>AbortError</code></a>的<a
                        data-link-type="idl" data-type="exception"
                        href="https://webidl.spec.whatwg.org/#aborterror"><code>DOMException</code></a> 拒绝
                    <var>promise</var> 并终止这些步骤。
                </li>
                <li>当请求完成时，使用一个提供检索到的<a href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-push-subscription-52">推送订阅</a>详细信息的<a data-link-type="idl"
                        data-lt="PushSubscription" href="#dom-pushsubscription" class="internalDFN"
                        id="ref-for-dom-pushsubscription-16"><code>PushSubscription</code></a>解决 <var>promise</var>。
                </li>
            </ol>
            <p>
                当调用 <dfn data-dfn-for="PushManager" data-export="" data-dfn-type="method"
                    id="dom-pushmanager-permissionstate" data-idl="operation" data-title="permissionState()"
                    data-type="Promise" data-lt="permissionState()|permissionState(options)"
                    data-local-lt="PushManager.permissionState|PushManager.permissionState()|permissionState"
                    tabindex="0" aria-haspopup="dialog"><code>permissionState()</code></dfn> 方法时，<em
                    class="rfc2119">必须</em>执行以下步骤：
            </p>
            <ol>
                <li>将 <var>promise</var> 设为<a data-type="dfn"
                        href="https://webidl.spec.whatwg.org/#a-new-promise">一个新的promise</a>。
                </li>
                <li>返回 <var>promise</var> 并异步执行以下步骤。
                </li>
                <li>将 <var>descriptor</var> 设为一个新的<a data-link-type="idl" data-lt="PermissionDescriptor"
                        data-type="dictionary"
                        href="https://www.w3.org/TR/permissions/#dom-permissiondescriptor"><code>PermissionDescriptor</code></a>，并将其
                    <a data-link-type="idl" data-type="dict-member"
                        href="https://www.w3.org/TR/permissions/#dom-permissiondescriptor-name"><code>name</code></a>
                    初始化为 "push"。
                </li>
                <li>将 <var>state</var> 设为 <var>descriptor</var> 的<a data-link-type="dfn|abstract-op" data-type="dfn"
                        href="https://www.w3.org/TR/permissions/#dfn-permission-state">权限状态</a> 并返回结果。
                </li>
                <li>使用 <var>state</var> 解决 <var>promise</var>。
                </li>
            </ol>
            <p>
                使用推送服务的权限可以是持久的，即如果存在有效的权限，则不需要为后续订阅重新确认。
            </p>
            <p>
                如果需要请求权限，则需要通过调用 <a data-link-type="idl" data-lt="subscribe()" href="#dom-pushmanager-subscribe"
                    class="internalDFN"
                    id="ref-for-dom-pushmanager-subscribe-2"><code>subscribe</code></a><code>()</code> 方法来执行。
            </p>
        </section>
        <section data-dfn-for="PushSubscriptionOptions" id="pushsubscriptionoptions-interface">
            <div class="header-wrapper">
                <h3 id="x7-2-pushsubscriptionoptions-interface"><bdi class="secno">7.2 </bdi>
                    <dfn data-export="" data-dfn-type="interface" id="dom-pushsubscriptionoptions" data-idl="interface"
                        data-title="PushSubscriptionOptions" data-dfn-for="" tabindex="0"
                        aria-haspopup="dialog"><code>PushSubscriptionOptions</code></dfn> 接口
                </h3><a class="self-link" href="#pushsubscriptionoptions-interface" aria-label="第7.2节的永久链接"></a>
            </div>

            <pre class="idl def" id="webidl-1484551711"><span class="idlHeader"><a class="self-link" href="#webidl-1484551711">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-pushsubscriptionoptions" data-title="PushSubscriptionOptions">[<span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=(Window,Worker)</span>, <span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>]
    interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-pushsubscriptionoptions" id="ref-for-dom-pushsubscriptionoptions-4"><code>PushSubscriptionOptions</code></a> {<span data-idl="" class="idlAttribute" id="idl-def-pushsubscriptionoptions-uservisibleonly" data-title="userVisibleOnly" data-dfn-for="PushSubscriptionOptions">
      readonly attribute<span class="idlType"> <a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean">boolean</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-pushsubscriptionoptions-uservisibleonly" id="ref-for-dom-pushsubscriptionoptions-uservisibleonly-1"><code>userVisibleOnly</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-pushsubscriptionoptions-applicationserverkey" data-title="applicationServerKey" data-dfn-for="PushSubscriptionOptions">
      [<span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject">SameObject</a></span>] readonly attribute<span class="idlType"> <a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-ArrayBuffer">ArrayBuffer</a>?</span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-pushsubscriptionoptions-applicationserverkey" id="ref-for-dom-pushsubscriptionoptions-applicationserverkey-3"><code>applicationServerKey</code></a>;</span>
    };</span></code></pre>
            <p>
                <dfn data-export="" data-dfn-type="attribute" id="dom-pushsubscriptionoptions-uservisibleonly"
                    data-idl="attribute" data-title="userVisibleOnly" data-dfn-for="PushSubscriptionOptions"
                    data-type="boolean" data-lt="userVisibleOnly"
                    data-local-lt="PushSubscriptionOptions.userVisibleOnly" tabindex="0"
                    aria-haspopup="dialog"><code>userVisibleOnly</code></dfn> 属性在获取时，返回其初始化的值。
            </p>
            <p>
                <dfn data-export="" data-dfn-type="attribute" id="dom-pushsubscriptionoptions-applicationserverkey"
                    data-idl="attribute" data-title="applicationServerKey" data-dfn-for="PushSubscriptionOptions"
                    data-type="ArrayBuffer" data-lt="applicationServerKey"
                    data-local-lt="PushSubscriptionOptions.applicationServerKey" tabindex="0"
                    aria-haspopup="dialog"><code>applicationServerKey</code></dfn> 属性在获取时，返回其初始化的值。
            </p>
            <p>
                如果存在，<a data-link-type="idl" href="#dom-pushsubscriptionoptions-applicationserverkey"
                    class="internalDFN"
                    id="ref-for-dom-pushsubscriptionoptions-applicationserverkey-4"><code>applicationServerKey</code></a>
                的值<em class="rfc2119">必须</em>包含
                P-256 椭圆曲线上的一个点 [<cite><a class="bibref" data-link-type="biblio" href="#bib-dss"
                        title="FIPS PUB 186-5: 数字签名标准 (DSS)">DSS</a></cite>]，并按照 [<cite><a class="bibref"
                        data-link-type="biblio" href="#bib-ansi-x9-62"
                        title="金融服务业的公钥加密，椭圆曲线数字签名算法 (ECDSA)">ANSI-X9-62</a></cite>]
                附录A中描述的未压缩形式进行编码（即65个八位字节，以0x04八位字节开头）。当以<a data-link-type="idl" data-lt="DOMString"
                    data-type="interface"
                    href="https://webidl.spec.whatwg.org/#idl-DOMString"><code>DOMString</code></a> 提供时，该值<em
                    class="rfc2119">必须</em>使用 base64url 编码 [<cite><a class="bibref" data-link-type="biblio"
                        href="#bib-rfc7515" title="JSON Web Signature (JWS)">RFC7515</a></cite>]。
            </p>
            <p>
                当<a data-link-type="idl" href="#dom-pushsubscriptionoptions-applicationserverkey" class="internalDFN"
                    id="ref-for-dom-pushsubscriptionoptions-applicationserverkey-5"><code>applicationServerKey</code></a>不存在且<a
                    href="#dfn-push-service" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-push-service-24">推送服务</a>因操作原因需要时，用户代理<em class="rfc2119">可以</em>拒绝订阅尝试。
            </p>
            <p>
                <a data-link-type="idl" href="#dom-pushsubscriptionoptions-applicationserverkey" class="internalDFN"
                    id="ref-for-dom-pushsubscriptionoptions-applicationserverkey-6"><code>applicationServerKey</code></a><em
                    class="rfc2119">必须</em>与用于消息加密的值不同 [<cite><a class="bibref" data-link-type="biblio"
                        href="#bib-rfc8291" title="用于Web推送的消息加密">RFC8291</a></cite>]。
            </p>
        </section>
        <section data-dfn-for="PushSubscriptionOptionsInit" id="pushsubscriptionoptionsinit-dictionary">
            <div class="header-wrapper">
                <h3 id="x7-3-pushsubscriptionoptionsinit-dictionary"><bdi class="secno">7.3 </bdi>
                    <dfn data-export="" data-dfn-type="dictionary" id="dom-pushsubscriptionoptionsinit"
                        data-idl="dictionary" data-title="PushSubscriptionOptionsInit" data-dfn-for="" tabindex="0"
                        aria-haspopup="dialog"><code>PushSubscriptionOptionsInit</code></dfn> 字典
                </h3><a class="self-link" href="#pushsubscriptionoptionsinit-dictionary" aria-label="第7.3节的永久链接"></a>
            </div>

            <pre class="idl def" id="webidl-975599346"><span class="idlHeader"><a class="self-link" href="#webidl-975599346">WebIDL</a></span><code><span data-idl="" class="idlDictionary" id="idl-def-pushsubscriptionoptionsinit" data-title="PushSubscriptionOptionsInit">dictionary <a class="internalDFN idlID" data-link-type="dictionary" href="#dom-pushsubscriptionoptionsinit" id="ref-for-dom-pushsubscriptionoptionsinit-4"><code>PushSubscriptionOptionsInit</code></a> {<span data-idl="" class="idlMember" id="idl-def-pushsubscriptionoptionsinit-uservisibleonly" data-title="userVisibleOnly" data-dfn-for="PushSubscriptionOptionsInit"><span class="idlType">
      <a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean">boolean</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-pushsubscriptionoptionsinit-uservisibleonly" id="ref-for-dom-pushsubscriptionoptionsinit-uservisibleonly-4"><code>userVisibleOnly</code></a> = false;</span><span data-idl="" class="idlMember" id="idl-def-pushsubscriptionoptionsinit-applicationserverkey" data-title="applicationServerKey" data-dfn-for="PushSubscriptionOptionsInit"><span class="idlType">
      (<a data-link-type="idl" data-type="typedef" href="https://webidl.spec.whatwg.org/#BufferSource">BufferSource</a> or <a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a>)?</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-pushsubscriptionoptionsinit-applicationserverkey" id="ref-for-dom-pushsubscriptionoptionsinit-applicationserverkey-6"><code>applicationServerKey</code></a> = null;</span>
    };</span></code></pre>
            <p>
                <dfn data-export="" data-dfn-type="dict-member" id="dom-pushsubscriptionoptionsinit-uservisibleonly"
                    data-idl="field" data-title="userVisibleOnly" data-dfn-for="PushSubscriptionOptionsInit"
                    data-type="boolean" tabindex="0" aria-haspopup="dialog"><code>userVisibleOnly</code></dfn>
                成员，当设置为<code>true</code>时，表示<a href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-push-subscription-53">推送订阅</a>仅用于将效果可见给用户的<a href="#dfn-push-message"
                    class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-push-message-30">推送消息</a>，例如通过显示Web通知。[<cite><a class="bibref"
                        data-link-type="biblio" href="#bib-notifications" title="通知API标准">NOTIFICATIONS</a></cite>]
            </p>
            <p>
                <a href="#dom-pushsubscriptionoptionsinit" class="internalDFN" data-link-type="idl"
                    id="ref-for-dom-pushsubscriptionoptionsinit-5"><code>PushSubscriptionOptionsInit</code></a> 表示与<a
                    href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-push-subscription-54">推送订阅</a>相关的附加选项。<a href="#dfn-user-agent" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-user-agent-37">用户代理</a> <em class="rfc2119">可以</em>在请求用户的<a
                    data-type="dfn"
                    href="https://www.w3.org/TR/permissions/#dfn-express-permission">明确许可</a>时考虑这些选项。当选项被考虑时，<a
                    href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-user-agent-38">用户代理</a> <em class="rfc2119">应当</em>在接收到的<a href="#dfn-push-message"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-message-31">推送消息</a>上强制执行这些选项。
            </p>
            <p>
                这些选项是可选的，<a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-user-agent-39">用户代理</a> <em class="rfc2119">可以</em>选择仅支持其中的一部分。<a
                    href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-user-agent-40">用户代理</a> <em class="rfc2119">不得</em>暴露其不支持的选项。
            </p>
            <p>
                一旦设置，<a href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-push-subscription-55">推送订阅</a> 的选项将无法更改。可以通过 <a data-link-type="idl"
                    href="#dom-pushsubscription-unsubscribe" class="internalDFN"
                    id="ref-for-dom-pushsubscription-unsubscribe-1"><code>unsubscribe</code></a> 取消现有的 <a
                    href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-push-subscription-56">推送订阅</a>，以创建具有新选项的 <a href="#dfn-push-subscription"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-subscription-57">推送订阅</a>。
            </p>
            <p>
                <dfn data-export="" data-dfn-type="dict-member"
                    id="dom-pushsubscriptionoptionsinit-applicationserverkey" data-idl="field"
                    data-title="applicationServerKey" data-dfn-for="PushSubscriptionOptionsInit"
                    data-type="BufferSource|DOMString" tabindex="0"
                    aria-haspopup="dialog"><code>applicationServerKey</code></dfn> 成员由<a href="#dfn-user-agent"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-user-agent-41">用户代理</a>用于与<a
                    href="#dfn-push-service" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-push-service-25">推送服务</a>建立<a href="#dfn-push-subscription" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-push-subscription-58">推送订阅</a>时使用。<a data-link-type="idl"
                    href="#dom-pushsubscriptionoptions-applicationserverkey" class="internalDFN"
                    id="ref-for-dom-pushsubscriptionoptions-applicationserverkey-7"><code>applicationServerKey</code></a>选项包含<a
                    href="#dfn-application-server" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-application-server-22">应用服务器</a>的椭圆曲线公钥。这是<a href="#dfn-application-server"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-application-server-23">应用服务器</a>在向该<a
                    href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-push-subscription-59">推送订阅</a>发送<a href="#dfn-push-message" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-push-message-32">推送消息</a>时用于认证自身的密钥，如 [<cite><a class="bibref"
                        data-link-type="biblio" href="#bib-rfc8292"
                        title="用于Web推送的自愿应用服务器标识 (VAPID)">RFC8292</a></cite>] 中定义；<a href="#dfn-push-service"
                    class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-push-service-26">推送服务</a>将拒绝任何没有使用相应私钥生成身份验证令牌的<a href="#dfn-push-message"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-message-33">推送消息</a>。
            </p>
        </section>
    </section>
    <section data-dfn-for="PushSubscription" id="pushsubscription-interface">
        <div class="header-wrapper">
            <h2 id="x8-pushsubscription-interface"><bdi class="secno">8. </bdi> <dfn data-export=""
                    data-dfn-type="interface" id="dom-pushsubscription" data-idl="interface"
                    data-title="PushSubscription" data-dfn-for="" tabindex="0"
                    aria-haspopup="dialog"><code>PushSubscription</code></dfn> 接口 </h2><a class="self-link"
                href="#pushsubscription-interface" aria-label="第8节的永久链接"></a>
        </div>
        <p>
            <a data-link-type="idl" data-lt="PushSubscription" href="#dom-pushsubscription" class="internalDFN"
                id="ref-for-dom-pushsubscription-17"><code>PushSubscription</code></a> 对象表示一个<a
                href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-subscription-60">推送订阅</a>。
        </p>
        <pre class="idl def" id="webidl-1348261679"><span class="idlHeader"><a class="self-link" href="#webidl-1348261679">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-pushsubscription" data-title="PushSubscription">[<span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=(Window,Worker)</span>, <span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>]
    interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-pushsubscription" id="ref-for-dom-pushsubscription-18"><code>PushSubscription</code></a> {<span data-idl="" class="idlAttribute" id="idl-def-pushsubscription-endpoint" data-title="endpoint" data-dfn-for="PushSubscription">
      readonly attribute<span class="idlType"> <a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString">USVString</a></span> <dfn data-export="" data-dfn-type="attribute" id="dom-pushsubscription-endpoint" data-idl="attribute" data-title="endpoint" data-dfn-for="PushSubscription" data-type="USVString" data-lt="endpoint" data-local-lt="PushSubscription.endpoint" class="idlName" tabindex="0" aria-haspopup="dialog"><code>endpoint</code></dfn>;</span><span data-idl="" class="idlAttribute" id="idl-def-pushsubscription-expirationtime" data-title="expirationTime" data-dfn-for="PushSubscription">
      readonly attribute<span class="idlType"> <a data-link-type="idl" data-type="typedef" href="https://www.w3.org/TR/hr-time-3/#dom-epochtimestamp">EpochTimeStamp</a>?</span> <dfn data-export="" data-dfn-type="attribute" id="dom-pushsubscription-expirationtime" data-idl="attribute" data-title="expirationTime" data-dfn-for="PushSubscription" data-type="EpochTimeStamp" data-lt="expirationTime" data-local-lt="PushSubscription.expirationTime" class="idlName" tabindex="0" aria-haspopup="dialog"><code>expirationTime</code></dfn>;</span><span data-idl="" class="idlAttribute" id="idl-def-pushsubscription-options" data-title="options" data-dfn-for="PushSubscription">
      [<span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject">SameObject</a></span>] readonly attribute<span class="idlType"> <a data-link-type="idl" href="#dom-pushsubscriptionoptions" class="internalDFN" id="ref-for-dom-pushsubscriptionoptions-5"><code>PushSubscriptionOptions</code></a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-pushsubscription-options" id="ref-for-dom-pushsubscription-options-2"><code>options</code></a>;</span><span data-idl="" class="idlMethod" id="idl-def-pushsubscription-getkey-name" data-title="getKey" data-dfn-for="PushSubscription"><span class="idlType">
      <a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-ArrayBuffer">ArrayBuffer</a>?</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-pushsubscription-getkey" id="ref-for-dom-pushsubscription-getkey-4"><code>getKey</code></a>(<span class="idlType"><a data-link-type="idl" href="#dom-pushencryptionkeyname" class="internalDFN" id="ref-for-dom-pushencryptionkeyname-1"><code>PushEncryptionKeyName</code></a></span> <span class="idlParamName">name</span>);</span><span data-idl="" class="idlMethod" id="idl-def-pushsubscription-unsubscribe" data-title="unsubscribe" data-dfn-for="PushSubscription"><span class="idlType">
      <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean">boolean</a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-pushsubscription-unsubscribe" id="ref-for-dom-pushsubscription-unsubscribe-2"><code>unsubscribe</code></a>();</span><span data-idl="" class="idlMethod" id="idl-def-pushsubscription-tojson" data-title="toJSON" data-dfn-for="PushSubscription"><span class="idlType">
    
      <a data-link-type="idl" href="#dom-pushsubscriptionjson" class="internalDFN" id="ref-for-dom-pushsubscriptionjson-1"><code>PushSubscriptionJSON</code></a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-pushsubscription-tojson" id="ref-for-dom-pushsubscription-tojson-1"><code>toJSON</code></a>();</span>
    };</span><span data-idl="" class="idlDictionary" id="idl-def-pushsubscriptionjson" data-title="PushSubscriptionJSON">
    
    dictionary <a class="internalDFN idlID" data-link-type="dictionary" href="#dom-pushsubscriptionjson" id="ref-for-dom-pushsubscriptionjson-2"><code>PushSubscriptionJSON</code></a> {<span data-idl="" class="idlMember" id="idl-def-pushsubscriptionjson-endpoint" data-title="endpoint" data-dfn-for="PushSubscriptionJSON"><span class="idlType">
      <a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString">USVString</a></span> <dfn data-export="" data-dfn-type="dict-member" id="dom-pushsubscriptionjson-endpoint" data-idl="field" data-title="endpoint" data-dfn-for="PushSubscriptionJSON" data-type="USVString" class="idlName" tabindex="0" aria-haspopup="dialog"><code>endpoint</code></dfn>;</span><span data-idl="" class="idlMember" id="idl-def-pushsubscriptionjson-expirationtime" data-title="expirationTime" data-dfn-for="PushSubscriptionJSON"><span class="idlType">
      <a data-link-type="idl" data-type="typedef" href="https://www.w3.org/TR/hr-time-3/#dom-epochtimestamp">EpochTimeStamp</a>?</span> <dfn data-export="" data-dfn-type="dict-member" id="dom-pushsubscriptionjson-expirationtime" data-idl="field" data-title="expirationTime" data-dfn-for="PushSubscriptionJSON" data-type="EpochTimeStamp" class="idlName" tabindex="0" aria-haspopup="dialog"><code>expirationTime</code></dfn> = null;</span><span data-idl="" class="idlMember" id="idl-def-pushsubscriptionjson-keys" data-title="keys" data-dfn-for="PushSubscriptionJSON"><span class="idlType">
      <a data-type="dfn" href="https://webidl.spec.whatwg.org/#idl-record">record</a>&lt;<a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a>, <a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString">USVString</a>&gt;</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-pushsubscriptionjson-keys" id="ref-for-dom-pushsubscriptionjson-keys-1"><code>keys</code></a>;</span>
    };</span></code></pre>
        <p>
            当<dfn id="dfn-getting-the-endpoint-attribute" tabindex="0" aria-haspopup="dialog"
                data-dfn-type="dfn">获取<code>endpoint</code>属性</dfn>时，<a href="#dfn-user-agent" class="internalDFN"
                data-link-type="dfn" id="ref-for-dfn-user-agent-42">用户代理</a><em class="rfc2119">必须</em>返回与<a
                href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-subscription-61">推送订阅</a>相关联的<a href="#dfn-push-endpoint" class="internalDFN"
                data-link-type="dfn" id="ref-for-dfn-push-endpoint-11">推送端点</a>。<a href="#dfn-user-agent"
                class="internalDFN" data-link-type="dfn" id="ref-for-dfn-user-agent-43">用户代理</a><em
                class="rfc2119">必须</em>使用不包含依赖于输入的分支的序列化方法（即，恒定时间的方法）。
        </p>
        <p>
            当<dfn id="dfn-getting-the-expirationtime-attribute" tabindex="0" aria-haspopup="dialog"
                data-dfn-type="dfn">获取<code>expirationTime</code>属性</dfn>时，<a href="#dfn-user-agent" class="internalDFN"
                data-link-type="dfn" id="ref-for-dfn-user-agent-44">用户代理</a><em class="rfc2119">必须</em>返回与<a
                href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-subscription-62">推送订阅</a>相关联的<a href="#dfn-subscription-expiration-time"
                class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-subscription-expiration-time-1">订阅过期时间</a>，如果没有则返回<code>null</code>。
        </p>
        <p>
            当获取<dfn data-export="" data-dfn-type="attribute" id="dom-pushsubscription-options" data-idl="attribute"
                data-title="options" data-dfn-for="PushSubscription" data-type="PushSubscriptionOptions"
                data-lt="options" data-local-lt="PushSubscription.options" tabindex="0"
                aria-haspopup="dialog"><code>options</code></dfn>属性时，
            <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-user-agent-45">用户代理</a><em class="rfc2119">必须</em>返回一个表示与<a
                href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-subscription-63">推送订阅</a>关联的选项的<a href="#dom-pushsubscriptionoptions"
                class="internalDFN" data-link-type="idl"
                id="ref-for-dom-pushsubscriptionoptions-6"><code>PushSubscriptionOptions</code></a>对象。
        </p>
        <p>
            <dfn data-export="" data-dfn-type="method" id="dom-pushsubscription-getkey" data-idl="operation"
                data-title="getKey()" data-dfn-for="PushSubscription" data-type="ArrayBuffer"
                data-lt="getKey()|getKey(name)" data-local-lt="PushSubscription.getKey|PushSubscription.getKey()|getKey"
                tabindex="0" aria-haspopup="dialog"><code>getKey()</code></dfn>方法用于检索可用于加密和验证消息的密钥材料。
            当调用<a data-link-type="idl" data-lt="getKey()" href="#dom-pushsubscription-getkey" class="internalDFN"
                id="ref-for-dom-pushsubscription-getkey-5"><code>getKey</code></a><code>()</code>时，执行以下过程：
        </p>
        <ol>
            <li>找到与<code>name</code>参数指定的密钥对应的内部槽位。
            </li>
            <li>如果未找到槽位，则返回<code>null</code>。
            </li>
            <li>初始化变量<var>key</var>为一个新创建的<a data-link-type="idl" data-lt="ArrayBuffer" data-type="interface"
                    href="https://webidl.spec.whatwg.org/#idl-ArrayBuffer"><code>ArrayBuffer</code></a>实例。
            </li>
            <li>如果内部槽位包含非对称密钥对，则将<var>key</var>的内容设置为密钥对中公钥的序列化值。这使用定义名称的规范中描述的序列化格式。
                例如，[<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc8291"
                        title="Message Encryption for Web Push">RFC8291</a></cite>]规定
                "<a data-link-type="idl" href="#dom-pushencryptionkeyname-p256dh" class="internalDFN"
                    id="ref-for-dom-pushencryptionkeyname-p256dh-3"><code>p256dh</code></a>"公钥使用定义在
                [<cite><a class="bibref" data-link-type="biblio" href="#bib-ansi-x9-62"
                        title="Public Key Cryptography for the Financial Services Industry, The Elliptic Curve Digital Signature Algorithm (ECDSA)">ANSI-X9-62</a></cite>]
                附录A中的未压缩格式（即65个字节序列，以0x04字节开头）编码。
            </li>
            <li>否则，如果内部槽位包含对称密钥，则将<var>key</var>的内容设置为内部槽位中的值副本。例如，<code>auth</code>参数包含用于
                <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-user-agent-46">用户代理</a>
                验证由<a href="#dfn-application-server" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-application-server-24">应用服务器</a>发送的消息的字节序列。
            </li>
            <li>返回<var>key</var>。
            </li>
        </ol>
        <p>
            <code>p256dh</code>和<code>auth</code>两个密钥名称<em class="rfc2119">必须</em>被支持，其值<em
                class="rfc2119">必须</em>与用户代理在接收推送消息时解密所需的值相对应，按照[<cite><a class="bibref" data-link-type="biblio"
                    href="#bib-rfc8291" title="Message Encryption for Web Push">RFC8291</a></cite>]的规定。
        </p>
        <p>
            当调用<dfn data-lt="unsubscribed|unsubscribe()" data-export="" data-dfn-type="method"
                id="dom-pushsubscription-unsubscribe" data-idl="operation" data-title="unsubscribe()"
                data-dfn-for="PushSubscription" data-type="Promise"
                data-local-lt="PushSubscription.unsubscribe|PushSubscription.unsubscribe()|unsubscribe" tabindex="0"
                aria-haspopup="dialog"><code>unsubscribe()</code></dfn> 方法时，<em class="rfc2119">必须</em>运行以下步骤：
        </p>
        <ol>
            <li>让<var>promise</var>成为<a data-type="dfn"
                    href="https://webidl.spec.whatwg.org/#a-new-promise">一个新的promise</a>。</li>
            <li>返回<var>promise</var>，并继续以下步骤异步进行。</li>
            <li>如果<a href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-push-subscription-64">推送订阅</a>已被<a href="#dfn-deactivate" class="internalDFN"
                    data-link-type="dfn"
                    id="ref-for-dfn-deactivate-8">停用</a>，则用<code>false</code>解析<var>promise</var>并终止这些步骤。</li>
            <li>并行运行以下步骤：
                <ol>
                    <li><a href="#dfn-deactivate" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-deactivate-9">停用</a><a href="#dfn-push-subscription" class="internalDFN"
                            data-link-type="dfn" id="ref-for-dfn-push-subscription-65">推送订阅</a>。<a
                            href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-user-agent-47">用户代理</a><em class="rfc2119">不得</em>为<a
                            href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-push-subscription-66">推送订阅</a>提供任何进一步的<a href="#dfn-push-message"
                            class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-message-34">推送消息</a>。
                        <p>如果<a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-user-agent-48">用户代理</a>未能请求<a href="#dfn-push-service"
                                class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-service-27">推送服务</a>
                            <a href="#dfn-deactivate" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-deactivate-10">停用</a>
                            <a href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-push-subscription-67">推送订阅</a>，例如由于网络故障，它<em
                                class="rfc2119">应</em>在合理的时间内重试该请求。
                        </p>
                    </li>
                </ol>
            </li>
            <li>用<code>true</code>解析<var>promise</var>。</li>
        </ol>
        <p>
            当调用<dfn data-export="" data-dfn-type="method" id="dom-pushsubscription-tojson" data-idl="operation"
                data-title="toJSON()" data-dfn-for="PushSubscription" data-type="PushSubscriptionJSON"
                data-lt="toJSON()" data-local-lt="PushSubscription.toJSON|PushSubscription.toJSON()|toJSON" tabindex="0"
                aria-haspopup="dialog"><code>toJSON()</code></dfn> 方法时，<em class="rfc2119">必须</em>运行以下步骤：
        </p>
        <ol>
            <li>让<var data-type="PushSubscriptionJSON">json</var>成为一个新的<a data-link-type="idl"
                    data-lt="PushSubscriptionJSON" href="#dom-pushsubscriptionjson" class="internalDFN"
                    id="ref-for-dom-pushsubscriptionjson-3"><code>PushSubscriptionJSON</code></a>字典。
            </li>
            <li>将<var data-type="PushSubscriptionJSON">json</var>["endpoint"]设置为<a data-link-type="dfn|abstract-op"
                    href="#dfn-getting-the-endpoint-attribute" class="internalDFN"
                    id="ref-for-dfn-getting-the-endpoint-attribute-1">获取<code>endpoint</code>属性</a>的结果。
            </li>
            <li>将<var data-type="PushSubscriptionJSON">json</var>["expirationTime"]设置为<a
                    data-link-type="dfn|abstract-op" href="#dfn-getting-the-expirationtime-attribute"
                    class="internalDFN"
                    id="ref-for-dfn-getting-the-expirationtime-attribute-1">获取<code>expirationTime</code>属性</a>的结果。
            </li>
            <li>让<var>keys</var>成为<code>record&lt;DOMString, USVString&gt;</code>的新空实例。
            </li>
            <li>对于每个标识符<var>i</var>，按键的名称顺序对应内部槽中的键：
                <ol>
                    <li>如果内部槽对应于非对称密钥对，则让<var>b</var>成为密钥名称<var>i</var>对应的公钥的编码值，使用定义的编码（请参阅<a data-link-type="idl"
                            data-lt="getKey()" href="#dom-pushsubscription-getkey" class="internalDFN"
                            id="ref-for-dom-pushsubscription-getkey-6"><code>getKey</code></a><code>()</code>）。
                    </li>
                    <li>否则，让<var>b</var>为<a data-link-type="idl" href="#dom-pushsubscription-getkey" class="internalDFN"
                            id="ref-for-dom-pushsubscription-getkey-7"><code>getKey</code></a>返回的值。
                    </li>
                    <li>让<var>s</var>为URL安全的base64编码不带填充的<var>b</var>[<cite><a class="bibref" data-link-type="biblio"
                                href="#bib-rfc4648"
                                title="The Base16, Base32, and Base64 Data Encodings">RFC4648</a></cite>]，作为<a
                            data-link-type="idl" data-lt="USVString" data-type="interface"
                            href="https://webidl.spec.whatwg.org/#idl-USVString"><code>USVString</code></a>。<a
                            href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-user-agent-49">用户代理</a><em
                            class="rfc2119">必须</em>使用不基于<var>b</var>值的分支序列化方法。
                    </li>
                    <li>将<var>keys</var>[<var>i</var>]设置为<var>s</var>。
                    </li>
                </ol>
            </li>
            <li>将<var data-type="PushSubscriptionJSON">json</var>["keys"]设置为<var>keys</var>。
            </li>
            <li>返回<var data-type="PushSubscriptionJSON">json</var>。
            </li>
        </ol>
        <p>
            一个<dfn data-export="" data-dfn-type="dictionary" id="dom-pushsubscriptionjson" data-idl="dictionary"
                data-title="PushSubscriptionJSON" data-dfn-for="" tabindex="0"
                aria-haspopup="dialog"><code>PushSubscriptionJSON</code></dfn>字典代表了<a data-type="dfn"
                href="https://webidl.spec.whatwg.org/#dfn-json-types">JSON类型</a>的<a data-link-type="idl"
                data-lt="PushSubscription" href="#dom-pushsubscription" class="internalDFN"
                id="ref-for-dom-pushsubscription-20"><code>PushSubscription</code></a>。在ECMAScript中，这可以通过<code>JSON</code>.<a
                data-link-type="idl" data-lt="stringify()" data-type="method"
                href="https://tc39.es/ecma262/multipage/structured-data.html#sec-json.stringify"><code>stringify</code></a><code>()</code>函数转换为JSON字符串。
        </p>
        <p>
            <dfn data-dfn-for="PushSubscriptionJSON" data-export="" data-dfn-type="dict-member"
                id="dom-pushsubscriptionjson-keys" data-idl="field" data-title="keys" data-type="record" tabindex="0"
                aria-haspopup="dialog"><code>keys</code></dfn>记录包含每个支持的<a data-link-type="idl"
                data-lt="PushEncryptionKeyName" href="#dom-pushencryptionkeyname" class="internalDFN"
                id="ref-for-dom-pushencryptionkeyname-2"><code>PushEncryptionKeyName</code></a>条目的URL安全base64编码表示[<cite><a
                    class="bibref" data-link-type="biblio" href="#bib-rfc4648"
                    title="The Base16, Base32, and Base64 Data Encodings">RFC4648</a></cite>]。
        </p>
        <p>
            请注意，<a data-link-type="idl" data-lt="PushSubscription" href="#dom-pushsubscription" class="internalDFN"
                id="ref-for-dom-pushsubscription-21"><code>PushSubscription</code></a>的选项不会被序列化。
        </p>
        <section data-dfn-for="PushEncryptionKeyName" id="pushencryptionkeyname-enumeration">
            <div class="header-wrapper">
                <h3 id="x8-1-pushencryptionkeyname-enumeration"><bdi class="secno">8.1 </bdi>
                    <dfn data-export="" data-dfn-type="enum" id="dom-pushencryptionkeyname" data-idl="enum"
                        data-title="PushEncryptionKeyName" data-dfn-for="" tabindex="0"
                        aria-haspopup="dialog"><code>PushEncryptionKeyName</code></dfn> 枚举
                </h3><a class="self-link" href="#pushencryptionkeyname-enumeration" aria-label="第8.1节的永久链接"></a>
            </div>

            <p>
                用于<a href="#dfn-push-message" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-push-message-35">推送消息</a>加密的加密密钥通过
                <a data-link-type="idl" data-lt="getKey()" href="#dom-pushsubscription-getkey" class="internalDFN"
                    id="ref-for-dom-pushsubscription-getkey-8"><code>getKey</code></a><code>()</code> 方法或
                <a data-link-type="idl" data-lt="PushSubscription" href="#dom-pushsubscription" class="internalDFN"
                    id="ref-for-dom-pushsubscription-22"><code>PushSubscription</code></a>的序列化器提供给Web应用程序。
                每个密钥使用<a data-link-type="idl" data-lt="PushEncryptionKeyName" href="#dom-pushencryptionkeyname"
                    class="internalDFN" id="ref-for-dom-pushencryptionkeyname-3"><code>PushEncryptionKeyName</code></a>
                枚举中的一个值命名。
            </p>
            <pre class="idl def" id="webidl-226775330"><span class="idlHeader"><a class="self-link" href="#webidl-226775330">WebIDL</a></span><code><span data-idl="" class="idlEnum" id="idl-def-pushencryptionkeyname" data-title="PushEncryptionKeyName">enum <a class="internalDFN idlID" data-link-type="enum" href="#dom-pushencryptionkeyname" id="ref-for-dom-pushencryptionkeyname-4"><code>PushEncryptionKeyName</code></a> {
      <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-pushencryptionkeyname-p256dh" id="ref-for-dom-pushencryptionkeyname-p256dh-5"><code>p256dh</code></a>"</span>,
      <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-pushencryptionkeyname-auth" id="ref-for-dom-pushencryptionkeyname-auth-3"><code>auth</code></a>"</span>
    };</span></code></pre>
            <p>
                <dfn data-export="" data-dfn-type="enum-value" id="dom-pushencryptionkeyname-p256dh"
                    data-idl="enum-value" data-title="p256dh" data-dfn-for="PushEncryptionKeyName" tabindex="0"
                    aria-haspopup="dialog"><code>p256dh</code></dfn> 值用于检索P-256 <abbr
                    title="椭圆曲线Diffie-Hellman">ECDH</abbr> Diffie-Hellman 公钥，
                如[<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc8291"
                        title="用于Web推送的消息加密">RFC8291</a></cite>] 中所描述。
            </p>
            <p>
                <dfn data-export="" data-dfn-type="enum-value" id="dom-pushencryptionkeyname-auth" data-idl="enum-value"
                    data-title="auth" data-dfn-for="PushEncryptionKeyName" tabindex="0"
                    aria-haspopup="dialog"><code>auth</code></dfn> 值用于检索身份验证密钥，
                如[<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc8291"
                        title="用于Web推送的消息加密">RFC8291</a></cite>] 中所描述。
            </p>
        </section>
    </section>
    <section data-dfn-for="PushMessageData" id="pushmessagedata-interface">
        <div class="header-wrapper">
            <h2 id="x9-pushmessagedata-interface"><bdi class="secno">9. </bdi>
                <dfn data-export="" data-dfn-type="interface" id="dom-pushmessagedata" data-idl="interface"
                    data-title="PushMessageData" data-dfn-for="" tabindex="0"
                    aria-haspopup="dialog"><code>PushMessageData</code></dfn> 接口
            </h2><a class="self-link" href="#pushmessagedata-interface" aria-label="第9节的永久链接"></a>
        </div>

        <pre class="idl def" data-cite="WEBIDL FILEAPI" id="webidl-1430759589"><span class="idlHeader"><a class="self-link" href="#webidl-1430759589">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-pushmessagedata" data-title="PushMessageData">[<span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=ServiceWorker</span>, <span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>]
        interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-pushmessagedata" id="ref-for-dom-pushmessagedata-1"><code>PushMessageData</code></a> {<span data-idl="" class="idlMethod" id="idl-def-pushmessagedata-arraybuffer" data-title="arrayBuffer" data-dfn-for="PushMessageData"><span class="idlType">
          <a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-ArrayBuffer">ArrayBuffer</a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-pushmessagedata-arraybuffer" id="ref-for-dom-pushmessagedata-arraybuffer-1"><code>arrayBuffer</code></a>();</span><span data-idl="" class="idlMethod" id="idl-def-pushmessagedata-blob" data-title="blob" data-dfn-for="PushMessageData"><span class="idlType">
          <a data-link-type="idl" data-type="interface" href="https://www.w3.org/TR/FileAPI/#dfn-Blob">Blob</a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-pushmessagedata-blob" id="ref-for-dom-pushmessagedata-blob-1"><code>blob</code></a>();</span><span data-idl="" class="idlMethod" id="idl-def-pushmessagedata-bytes" data-title="bytes" data-dfn-for="PushMessageData"><span class="idlType">
          <a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-Uint8Array">Uint8Array</a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-pushmessagedata-bytes" id="ref-for-dom-pushmessagedata-bytes-1"><code>bytes</code></a>();</span><span data-idl="" class="idlMethod" id="idl-def-pushmessagedata-json" data-title="json" data-dfn-for="PushMessageData"><span class="idlType">
          <a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-any">any</a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-pushmessagedata-json" id="ref-for-dom-pushmessagedata-json-1"><code>json</code></a>();</span><span data-idl="" class="idlMethod" id="idl-def-pushmessagedata-text" data-title="text" data-dfn-for="PushMessageData"><span class="idlType">
          <a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString">USVString</a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-pushmessagedata-text" id="ref-for-dom-pushmessagedata-text-1"><code>text</code></a>();</span>
        };</span></code></pre>
        <p>
            <a data-link-type="idl" data-lt="PushMessageData" href="#dom-pushmessagedata" class="internalDFN"
                id="ref-for-dom-pushmessagedata-2"><code>PushMessageData</code></a> 对象关联了一个 <dfn id="dfn-bytes"
                tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">字节序列</dfn>（一个 <a
                data-link-type="dfn|abstract-op" data-type="dfn"
                href="https://infra.spec.whatwg.org/#byte-sequence">字节序列</a>），
            这是在创建时设置的。
        </p>
        <p>
            <dfn data-export="" data-dfn-type="method" id="dom-pushmessagedata-arraybuffer" data-idl="operation"
                data-title="arrayBuffer()" data-dfn-for="PushMessageData" data-type="ArrayBuffer"
                data-lt="arrayBuffer()"
                data-local-lt="PushMessageData.arrayBuffer|PushMessageData.arrayBuffer()|arrayBuffer" tabindex="0"
                aria-haspopup="dialog"><code>arrayBuffer()</code></dfn> 方法步骤是返回一个 <a data-link-type="idl"
                data-lt="ArrayBuffer" data-type="interface"
                href="https://webidl.spec.whatwg.org/#idl-ArrayBuffer"><code>ArrayBuffer</code></a>，其内容为
            <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#this">this</a> 的
            <a data-link-type="dfn|abstract-op" href="#dfn-bytes" class="internalDFN"
                id="ref-for-dfn-bytes-1">字节序列</a>。在创建
            <a data-link-type="idl" data-lt="ArrayBuffer" data-type="interface"
                href="https://webidl.spec.whatwg.org/#idl-ArrayBuffer"><code>ArrayBuffer</code></a>
            对象时抛出的异常将被重新抛出。
        </p>
        <p>
            <dfn data-export="" data-dfn-type="method" id="dom-pushmessagedata-blob" data-idl="operation"
                data-title="blob()" data-dfn-for="PushMessageData" data-type="Blob" data-lt="blob()"
                data-local-lt="PushMessageData.blob|PushMessageData.blob()|blob" tabindex="0"
                aria-haspopup="dialog"><code>blob()</code></dfn> 方法步骤是返回一个新的 <a data-link-type="idl" data-lt="Blob"
                data-type="interface" href="https://www.w3.org/TR/FileAPI/#dfn-Blob"><code>Blob</code></a> 对象，其内容为
            <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#this">this</a> 的
            <a data-link-type="dfn|abstract-op" href="#dfn-bytes" class="internalDFN" id="ref-for-dfn-bytes-2">字节序列</a>。
        </p>
        <p>
            <dfn data-export="" data-dfn-type="method" id="dom-pushmessagedata-bytes" data-idl="operation"
                data-title="bytes()" data-dfn-for="PushMessageData" data-type="Uint8Array" data-lt="bytes()"
                data-local-lt="PushMessageData.bytes|PushMessageData.bytes()|bytes" tabindex="0"
                aria-haspopup="dialog"><code>bytes()</code></dfn> 方法步骤是返回一个新的 <a data-link-type="idl"
                data-lt="Uint8Array" data-type="interface"
                href="https://webidl.spec.whatwg.org/#idl-Uint8Array"><code>Uint8Array</code></a>，其背后的
            <a data-link-type="idl" data-lt="ArrayBuffer" data-type="interface"
                href="https://webidl.spec.whatwg.org/#idl-ArrayBuffer"><code>ArrayBuffer</code></a> 的内容为
            <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#this">this</a> 的
            <a data-link-type="dfn|abstract-op" href="#dfn-bytes" class="internalDFN"
                id="ref-for-dfn-bytes-3">字节序列</a>。在创建
            <a data-link-type="idl" data-lt="ArrayBuffer" data-type="interface"
                href="https://webidl.spec.whatwg.org/#idl-ArrayBuffer"><code>ArrayBuffer</code></a> 对象时抛出的异常将被重新抛出。
        </p>
        <p data-cite="encoding">
            <dfn data-export="" data-dfn-type="method" id="dom-pushmessagedata-json" data-idl="operation"
                data-title="json()" data-dfn-for="PushMessageData" data-type="any" data-lt="json()"
                data-local-lt="PushMessageData.json|PushMessageData.json()|json" tabindex="0"
                aria-haspopup="dialog"><code>json()</code></dfn> 方法步骤是返回
            <a data-type="dfn"
                href="https://infra.spec.whatwg.org/#parse-json-bytes-to-a-javascript-value">将字节序列解析为JavaScript值</a>的结果，给定
            <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#this">this</a> 的
            <a data-link-type="dfn|abstract-op" href="#dfn-bytes" class="internalDFN" id="ref-for-dfn-bytes-4">字节序列</a>。
        </p>
        <p data-cite="encoding">
            <dfn data-export="" data-dfn-type="method" id="dom-pushmessagedata-text" data-idl="operation"
                data-title="text()" data-dfn-for="PushMessageData" data-type="USVString" data-lt="text()"
                data-local-lt="PushMessageData.text|PushMessageData.text()|text" tabindex="0"
                aria-haspopup="dialog"><code>text()</code></dfn> 方法步骤是返回运行 <a data-type="dfn"
                href="https://encoding.spec.whatwg.org/#utf-8-decode">UTF-8 解码</a>的结果，
            给定 <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#this">this</a>
            的 <a data-link-type="dfn|abstract-op" href="#dfn-bytes" class="internalDFN"
                id="ref-for-dfn-bytes-5">字节序列</a>。
        </p>
        <p>
            要从<var>object</var>中<dfn id="dfn-extract-a-byte-sequence" tabindex="0" aria-haspopup="dialog"
                data-dfn-type="dfn">提取字节序列</dfn>，请运行以下步骤：
        </p>
        <ol>
            <li>让<var>bytes</var>成为一个空字节序列。
            </li>
            <li>根据<var>object</var>的类型切换：
                <dl data-cite="WebIDL">
                    <dt>
                        <a data-link-type="idl" data-lt="BufferSource" data-type="typedef"
                            href="https://webidl.spec.whatwg.org/#BufferSource"><code>BufferSource</code></a>
                    </dt>
                    <dd>
                        将<var>bytes</var>设置为<var>object</var>内容的副本。
                    </dd>
                    <dt>
                        <a data-link-type="idl" data-lt="USVString" data-type="interface"
                            href="https://webidl.spec.whatwg.org/#idl-USVString"><code>USVString</code></a>
                    </dt>
                    <dd data-cite="encoding">
                        将<var>bytes</var>设置为运行 <a data-type="dfn"
                            href="https://encoding.spec.whatwg.org/#utf-8-encode">utf-8 编码</a> 在 <var>object</var>上的结果。
                    </dd>
                </dl>
            </li>
            <li>返回<var>bytes</var>。
            </li>
        </ol>
    </section>
    <section id="events">
        <div class="header-wrapper">
            <h2 id="x10-events"><bdi class="secno">10. </bdi>事件</h2>
            <a class="self-link" href="#events" aria-label="第10节的永久链接"></a>
        </div>

        <section data-dfn-for="ServiceWorkerGlobalScope" id="extensions-to-the-serviceworkerglobalscope-interface">
            <div class="header-wrapper">
                <h3 id="x10-1-extensions-to-the-serviceworkerglobalscope-interface">
                    <bdi class="secno">10.1 </bdi>对 <code>ServiceWorkerGlobalScope</code> 接口的扩展
                </h3>
                <a class="self-link" href="#extensions-to-the-serviceworkerglobalscope-interface"
                    aria-label="第10.1节的永久链接"></a>
            </div>

            <p>
                Service Worker 规范定义了一个 <a data-link-type="idl" data-lt="ServiceWorkerGlobalScope" data-type="interface"
                    href="https://www.w3.org/TR/service-workers/#serviceworkerglobalscope"><code>ServiceWorkerGlobalScope</code></a>
                接口 [<cite><a class="bibref" data-link-type="biblio" href="#bib-service-workers"
                        title="Service Workers">SERVICE-WORKERS</a></cite>]，该规范对此进行了扩展。
            </p>
            <pre class="idl def" data-cite="WEBIDL HTML" id="webidl-801193280"><span class="idlHeader"><a class="self-link" href="#webidl-801193280">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-serviceworkerglobalscope-partial-1" data-title="ServiceWorkerGlobalScope">[<span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=ServiceWorker</span>, <span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>]
    partial interface <a data-idl="partial" data-link-type="interface" data-title="ServiceWorkerGlobalScope" class="idlID" data-dfn-for="ServiceWorkerGlobalScope" data-type="interface" href="https://www.w3.org/TR/service-workers/#serviceworkerglobalscope">ServiceWorkerGlobalScope</a> {<span data-idl="" class="idlAttribute" id="idl-def-serviceworkerglobalscope-onpush" data-title="onpush" data-dfn-for="ServiceWorkerGlobalScope">
      attribute<span class="idlType"> <a data-link-type="idl" data-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-serviceworkerglobalscope-onpush" id="ref-for-dom-serviceworkerglobalscope-onpush-1"><code>onpush</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-serviceworkerglobalscope-onpushsubscriptionchange" data-title="onpushsubscriptionchange" data-dfn-for="ServiceWorkerGlobalScope">
      attribute<span class="idlType"> <a data-link-type="idl" data-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-serviceworkerglobalscope-onpushsubscriptionchange" id="ref-for-dom-serviceworkerglobalscope-onpushsubscriptionchange-1"><code>onpushsubscriptionchange</code></a>;</span>
    };</span></code></pre>
            <p>
                <dfn data-export="" data-dfn-type="attribute" id="dom-serviceworkerglobalscope-onpush"
                    data-idl="attribute" data-title="onpush" data-dfn-for="ServiceWorkerGlobalScope"
                    data-type="EventHandler" data-lt="onpush" data-local-lt="ServiceWorkerGlobalScope.onpush"
                    tabindex="0" aria-haspopup="dialog"><code>onpush</code></dfn> 属性是一个
                <a data-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes">
                    事件处理器 IDL 属性</a>，其对应的<a data-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type">
                    事件处理器事件类型</a>为 "<code>push</code>"。 "<code>push</code>" 事件表示
                已接收到一个 <a href="#dfn-push-message" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-push-message-36">推送消息</a>，用于某个
                <a href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-push-subscription-68">推送订阅</a>。
            </p>
            <p>
                <dfn data-export="" data-dfn-type="attribute" id="dom-serviceworkerglobalscope-onpushsubscriptionchange"
                    data-idl="attribute" data-title="onpushsubscriptionchange" data-dfn-for="ServiceWorkerGlobalScope"
                    data-type="EventHandler" data-lt="onpushsubscriptionchange"
                    data-local-lt="ServiceWorkerGlobalScope.onpushsubscriptionchange" tabindex="0"
                    aria-haspopup="dialog"><code>onpushsubscriptionchange</code></dfn> 属性是一个
                <a data-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes">
                    事件处理器 IDL 属性</a>，其对应的<a data-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type">
                    事件处理器事件类型</a>为 "<code>pushsubscriptionchange</code>"。
            </p>
        </section>
        <section data-dfn-for="PushEvent" id="pushevent-interface">
            <div class="header-wrapper">
                <h3 id="x10-2-pushevent-interface"><bdi class="secno">10.2 </bdi>
                    <dfn data-export="" data-dfn-type="interface" id="dom-pushevent" data-idl="interface"
                        data-title="PushEvent" data-dfn-for="" tabindex="0"
                        aria-haspopup="dialog"><code>PushEvent</code></dfn> 接口
                </h3><a class="self-link" href="#pushevent-interface" aria-label="第10.2节的固定链接"></a>
            </div>

            <pre class="idl def" data-cite="WEBIDL service-workers" id="webidl-302405565"><span class="idlHeader"><a class="self-link" href="#webidl-302405565">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-pushevent" data-title="PushEvent">[<span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=ServiceWorker</span>, <span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>]
    interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-pushevent" id="ref-for-dom-pushevent-1"><code>PushEvent</code></a> : <span class="idlSuperclass"><a data-link-type="idl" data-type="interface" href="https://www.w3.org/TR/service-workers/#extendableevent">ExtendableEvent</a></span> {<span data-idl="" class="idlConstructor" id="idl-def-pushevent-constructor-type-eventinitdict" data-title="constructor" data-dfn-for="PushEvent">
      <a class="internalDFN" data-link-type="constructor" href="#dom-pushevent-constructor" id="ref-for-dom-pushevent-constructor-1"><code>constructor</code></a>(<span class="idlType"><a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">type</span>, optional<span class="idlType"> <a data-link-type="idl" href="#dom-pusheventinit" class="internalDFN" id="ref-for-dom-pusheventinit-1"><code>PushEventInit</code></a></span> <span class="idlParamName">eventInitDict</span> = {});</span><span data-idl="" class="idlAttribute" id="idl-def-pushevent-data" data-title="data" data-dfn-for="PushEvent">
      readonly attribute<span class="idlType"> <a data-link-type="idl" href="#dom-pushmessagedata" class="internalDFN" id="ref-for-dom-pushmessagedata-3"><code>PushMessageData</code></a>?</span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-pushevent-data" id="ref-for-dom-pushevent-data-1"><code>data</code></a>;</span>
    };</span></code></pre>
            <p>
                当 <dfn data-export="" data-dfn-type="constructor" id="dom-pushevent-constructor" data-idl="constructor"
                    data-title="constructor" data-dfn-for="PushEvent"
                    data-lt="constructor()|constructor(type)|constructor(type, eventInitDict)"
                    data-local-lt="PushEvent.constructor|PushEvent.constructor()|constructor" tabindex="0"
                    aria-haspopup="dialog"><code>constructor</code></dfn> 的 <a href="#dom-pushevent" class="internalDFN"
                    data-link-type="idl" id="ref-for-dom-pushevent-2"><code>PushEvent</code></a>
                接口或继承自 <a href="#dom-pushevent" class="internalDFN" data-link-type="idl"
                    id="ref-for-dom-pushevent-3"><code>PushEvent</code></a> 接口的接口被调用时，通常的 <a data-type="dfn"
                    href="https://dom.spec.whatwg.org/#concept-event-constructor-ext">事件构造步骤</a> 会扩展为包括以下步骤：
            </p>
            <ol>
                <li>如果 <var>eventInitDict</var> 的 <code>data</code> 成员不存在，将事件的 <code>data</code> 属性设置为 <code>null</code>
                    并终止这些步骤。
                </li>
                <li>将 <var>b</var> 设置为从 <var>eventInitDict</var> 的 "<code>data</code>" 成员中 <a
                        data-lt="extract a byte sequence" href="#dfn-extract-a-byte-sequence" class="internalDFN"
                        data-link-type="dfn" id="ref-for-dfn-extract-a-byte-sequence-1">提取字节序列</a> 的结果。
                </li>
                <li>将事件的 <code>data</code> 属性设置为一个新的 <a href="#dom-pushmessagedata" class="internalDFN"
                        data-link-type="idl" id="ref-for-dom-pushmessagedata-4"><code>PushMessageData</code></a> 实例，并将
                    <code>bytes</code> 设置为 <var>b</var>。
                </li>
            </ol>
            <p>
                当获取 <dfn data-export="" data-dfn-type="attribute" id="dom-pushevent-data" data-idl="attribute"
                    data-title="data" data-dfn-for="PushEvent" data-type="PushMessageData" data-lt="data"
                    data-local-lt="PushEvent.data" tabindex="0" aria-haspopup="dialog"><code>data</code></dfn>
                时，返回其初始化的值。
            </p>
        </section>
        <section data-dfn-for="PushEventInit" id="pusheventinit-dictionary">
            <div class="header-wrapper">
                <h3 id="x10-3-pusheventinit-dictionary"><bdi class="secno">10.3 </bdi>
                    <dfn data-export="" data-dfn-type="dictionary" id="dom-pusheventinit" data-idl="dictionary"
                        data-title="PushEventInit" data-dfn-for="" tabindex="0"
                        aria-haspopup="dialog"><code>PushEventInit</code></dfn> 字典
                </h3><a class="self-link" href="#pusheventinit-dictionary" aria-label="第10.3节的固定链接"></a>
            </div>

            <pre class="idl def" data-cite="WEBIDL service-workers" id="webidl-173618782"><span class="idlHeader"><a class="self-link" href="#webidl-173618782">WebIDL</a></span><code><span data-idl="" class="idlTypedef" id="idl-def-pushmessagedatainit" data-title="PushMessageDataInit">typedef<span class="idlType"> (<a data-link-type="idl" data-type="typedef" href="https://webidl.spec.whatwg.org/#BufferSource">BufferSource</a> or <a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString">USVString</a>)</span> <dfn data-export="" data-dfn-type="typedef" id="dom-pushmessagedatainit" data-idl="typedef" data-title="PushMessageDataInit" data-dfn-for="" class="idlID" tabindex="0" aria-haspopup="dialog"><code>PushMessageDataInit</code></dfn>;</span><span data-idl="" class="idlDictionary" id="idl-def-pusheventinit" data-title="PushEventInit">
    
    dictionary <a class="internalDFN idlID" data-link-type="dictionary" href="#dom-pusheventinit" id="ref-for-dom-pusheventinit-2"><code>PushEventInit</code></a> : <span class="idlSuperclass"><a data-link-type="idl" data-type="dictionary" href="https://www.w3.org/TR/service-workers/#dictdef-extendableeventinit">ExtendableEventInit</a></span> {<span data-idl="" class="idlMember" id="idl-def-pusheventinit-data" data-title="data" data-dfn-for="PushEventInit"><span class="idlType">
      <a data-link-type="idl" href="#dom-pushmessagedatainit" class="internalDFN" id="ref-for-dom-pushmessagedatainit-1"><code>PushMessageDataInit</code></a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-pusheventinit-data" id="ref-for-dom-pusheventinit-data-1"><code>data</code></a>;</span>
    };</span></code></pre>
            <p>
                <dfn data-export="" data-dfn-type="dict-member" id="dom-pusheventinit-data" data-idl="field"
                    data-title="data" data-dfn-for="PushEventInit" data-type="PushMessageDataInit" tabindex="0"
                    aria-haspopup="dialog"><code>data</code></dfn> 成员包含了在 <a href="#dfn-push-message"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-message-37">推送消息</a> 中包含的数据，并且在 <a
                    href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-user-agent-50">用户代理</a> 验证其真实性时会被设置。 在所有其他情况下，该值将被设置为 <code>null</code>。
            </p>
        </section>
        <section id="receiving-a-push-message">
            <div class="header-wrapper">
                <h3 id="x10-4-receiving-a-push-message"><bdi class="secno">10.4 </bdi>
                    接收 <a href="#dfn-push-message" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-push-message-38">推送消息</a>
                </h3><a class="self-link" href="#receiving-a-push-message" aria-label="第10.4节的固定链接"></a>
            </div>

            <p>
                当 <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-user-agent-51">用户代理</a> 从 <a href="#dfn-push-service" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-push-service-29">推送服务</a> 接收到 <a href="#dfn-push-message"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-message-39">推送消息</a> 时，
                <em class="rfc2119">必须</em> 执行以下步骤。
            </p>
            <ol>
                <li>将 <var>registration</var> 设置为与 <a data-type="dfn"
                        href="https://www.w3.org/TR/service-workers/#dfn-service-worker-registration">service worker
                        注册</a> 对应的 <a href="#dfn-push-message" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-push-message-40">
                        推送消息</a>。
                </li>
                <li>如果找不到 <var>registration</var>，中止这些步骤。
                </li>
                <li>将 <var>subscription</var> 设置为 <var>registration</var> 的活动 <a href="#dfn-push-subscription"
                        class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-subscription-69">推送订阅</a>。
                </li>
                <li>将 <var>bytes</var> 设置为 null。
                </li>
                <li>如果 <a href="#dfn-push-message" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-push-message-41">推送消息</a> 包含负载：
                    <ol>
                        <li>使用与 <var>subscription</var> 相关的密钥对中的私钥解密 <a href="#dfn-push-message" class="internalDFN"
                                data-link-type="dfn" id="ref-for-dfn-push-message-42">推送消息</a> 的负载，并使用 [<cite><a
                                    class="bibref" data-link-type="biblio" href="#bib-rfc8291"
                                    title="Message Encryption for Web Push">RFC8291</a></cite>] 中描述的过程。 将
                            <var>bytes</var> 设置为生成的 <a data-link-type="dfn|abstract-op" data-type="dfn"
                                href="https://infra.spec.whatwg.org/#byte-sequence">字节序列</a>。
                        </li>
                        <li>如果 <a href="#dfn-push-message" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-push-message-43">推送消息</a> 的负载由于任何原因无法解密：
                            <ol>
                                <li>根据 [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc8030"
                                            title="Generic Event Delivery Using HTTP Push">RFC8030</a></cite>] 确认收到
                                    <a href="#dfn-push-message" class="internalDFN" data-link-type="dfn"
                                        id="ref-for-dfn-push-message-44">推送消息</a>。尽管消息未成功接收和处理，但这可以防止推送服务尝试重新传输消息；
                                    错误加密的消息是无法恢复的。
                                </li>
                                <li>中止这些步骤。
                                </li>
                            </ol>
                            <div class="note" role="note" id="issue-container-generatedID-1">
                                <div role="heading" class="note-title marker" id="h-note-1" aria-level="4">
                                    <span>注意</span>
                                </div>
                                <p class="">
                                    对于未使用与 <a href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                                        id="ref-for-dfn-push-subscription-70">推送订阅</a> 关联的密钥对成功解密的 <a
                                        href="#dfn-push-message" class="internalDFN" data-link-type="dfn"
                                        id="ref-for-dfn-push-message-45">推送消息</a>，不会触发 <code>push</code> 事件。
                                </p>
                            </div>
                        </li>
                    </ol>
                </li>
                <li>
                    <p>
                        <a data-type="dfn" href="https://www.w3.org/TR/service-workers/#fire-functional-event">触发名为
                            <code>push</code> 的功能事件</a>，并在 <var>registration</var> 上使用 <a href="#dom-pushevent"
                            class="internalDFN" data-link-type="idl"
                            id="ref-for-dom-pushevent-4"><code>PushEvent</code></a>，具有以下属性：
                    </p>
                    <dl>
                        <dt>
                            <code>data</code>
                        </dt>
                        <dd>
                            一个新的 <a data-link-type="idl" data-lt="PushMessageData" href="#dom-pushmessagedata"
                                class="internalDFN" id="ref-for-dom-pushmessagedata-5"><code>PushMessageData</code></a>
                            对象，其 <a data-link-type="dfn|abstract-op" href="#dfn-bytes" class="internalDFN"
                                id="ref-for-dfn-bytes-6">字节</a> 为 <var>bytes</var>。
                        </dd>
                    </dl>
                    <p>
                        然后并行运行以下步骤，并使用 <var>dispatchedEvent</var>：
                    </p>
                    <ol>
                        <li>等待 <var>dispatchedEvent</var> 的所有 <a data-link-type="dfn|abstract-op" data-type="dfn"
                                href="https://www.w3.org/TR/service-workers/#extendableevent-extend-lifetime-promises">延长生命周期的
                                promise</a> 全部解决。
                        </li>
                        <li>如果所有的 promise 都成功解决，则根据 [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc8030"
                                    title="Generic Event Delivery Using HTTP Push">RFC8030</a></cite>] 确认收到 <a
                                href="#dfn-push-message" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-push-message-46">推送消息</a> 并中止这些步骤。
                        </li>
                        <li>
                            <p>
                                如果相同的 <a href="#dfn-push-message" class="internalDFN" data-link-type="dfn"
                                    id="ref-for-dfn-push-message-47">推送消息</a> 已多次未成功地传递给 <a data-type="dfn"
                                    href="https://www.w3.org/TR/service-workers/#dfn-service-worker-registration">service
                                    worker 注册</a>，
                                则根据 [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc8030"
                                        title="Generic Event Delivery Using HTTP Push">RFC8030</a></cite>] 确认收到 <a
                                    href="#dfn-push-message" class="internalDFN" data-link-type="dfn"
                                    id="ref-for-dfn-push-message-48">推送消息</a>。
                            </p>
                            <p>
                                确认推送消息会使 <a href="#dfn-push-service" class="internalDFN" data-link-type="dfn"
                                    id="ref-for-dfn-push-service-30">推送服务</a> 停止传递消息，并向 <a
                                    href="#dfn-application-server" class="internalDFN" data-link-type="dfn"
                                    id="ref-for-dfn-application-server-25">应用服务器</a> 报告成功。这可以防止相同的 <a
                                    href="#dfn-push-message" class="internalDFN" data-link-type="dfn"
                                    id="ref-for-dfn-push-message-50">推送消息</a> 被 <a href="#dfn-push-service"
                                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-service-31">推送服务</a>
                                无限期重试。
                            </p>
                            <p>
                                确认还意味着 <a href="#dfn-application-server" class="internalDFN" data-link-type="dfn"
                                    id="ref-for-dfn-application-server-26">应用服务器</a> 可能会错误地接收到表示推送消息成功传递的交付收据。因此，<em
                                    class="rfc2119">应</em> 允许在确认之前进行多次拒绝；建议至少允许三次尝试。
                            </p>
                        </li>
                    </ol>
                </li>
            </ol>
        </section>
        <section id="the-pushsubscriptionchange-event">
            <div class="header-wrapper">
                <h3 id="x10-5-the-pushsubscriptionchange-event"><bdi class="secno">10.5 </bdi>
                    <dfn id="dfn-pushsubscriptionchange" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">pushsubscriptionchange</dfn> 事件
                </h3><a class="self-link" href="#the-pushsubscriptionchange-event" aria-label="第10.5节的固定链接"></a>
            </div>

            <p>
                <a href="#dfn-pushsubscriptionchange" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-pushsubscriptionchange-1">pushsubscriptionchange</a> 事件表示
                <a href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-push-subscription-71">推送订阅</a> 的变更，这些变更是在应用程序控制之外触发的，例如由于订阅已刷新、撤销或丢失。
            </p>
            <p>
                要在给定 <var>registration</var> 的 <a data-type="dfn"
                    href="https://www.w3.org/TR/service-workers/#dfn-service-worker-registration">service worker
                    注册</a>、<var>newSubscription</var> 和 <var>oldSubscription</var> 的情况下
                <dfn id="dfn-fire-the-pushsubscriptionchange-event" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">触发 "<code>pushsubscriptionchange</code>" 事件</dfn>，<a href="#dfn-user-agent"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-user-agent-52">用户代理</a> 必须<a
                    data-type="dfn" href="https://www.w3.org/TR/service-workers/#fire-functional-event">触发一个功能事件</a>，
                名为 "<code>pushsubscriptionchange</code>"，使用
                <a href="#dom-pushsubscriptionchangeevent" class="internalDFN" data-link-type="idl"
                    id="ref-for-dom-pushsubscriptionchangeevent-1"><code>PushSubscriptionChangeEvent</code></a> 在
                <var>registration</var> 上，
                并具有以下属性：
            </p>
            <dl>
                <dt>
                    <code>newSubscription</code>
                </dt>
                <dd>
                    <var>newSubscription</var>
                </dd>
                <dt>
                    <code>oldSubscription</code>
                </dt>
                <dd>
                    <var>oldSubscription</var>
                </dd>
            </dl>
            <div class="note" role="note" id="issue-container-generatedID-2">
                <div role="heading" class="note-title marker" id="h-note-2" aria-level="4"><span>注意</span></div>
                <p class="">
                    当将新的 <a href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-push-subscription-72">推送订阅</a> 详细信息发送到
                    <a href="#dfn-application-server" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-application-server-27">应用服务器</a> 时，
                    可以考虑使用更可靠的同步机制，例如 [<cite><a class="bibref" data-link-type="biblio" href="#bib-web-background-sync"
                            title="Web Background Synchronization">WEB-BACKGROUND-SYNC</a></cite>]。用户可能处于不可靠的网络条件下，导致请求失败。
                </p>
            </div>
            <section data-dfn-for="PushSubscriptionChangeEvent" id="pushsubscriptionchangeevent-interface">
                <div class="header-wrapper">
                    <h4 id="x10-5-1-pushsubscriptionchangeevent-interface"><bdi class="secno">10.5.1 </bdi>
                        <dfn data-export="" data-dfn-type="interface" id="dom-pushsubscriptionchangeevent"
                            data-idl="interface" data-title="PushSubscriptionChangeEvent" data-dfn-for="" tabindex="0"
                            aria-haspopup="dialog"><code>PushSubscriptionChangeEvent</code></dfn> 接口
                    </h4><a class="self-link" href="#pushsubscriptionchangeevent-interface"
                        aria-label="第10.5.1节的固定链接"></a>
                </div>

                <pre class="idl def" data-cite="WEBIDL service-workers" id="webidl-2104077905"><span class="idlHeader"><a class="self-link" href="#webidl-2104077905">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-pushsubscriptionchangeevent" data-title="PushSubscriptionChangeEvent">[<span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=ServiceWorker</span>, <span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>]
    interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-pushsubscriptionchangeevent" id="ref-for-dom-pushsubscriptionchangeevent-2"><code>PushSubscriptionChangeEvent</code></a> : <span class="idlSuperclass"><a data-link-type="idl" data-type="interface" href="https://www.w3.org/TR/service-workers/#extendableevent">ExtendableEvent</a></span> {<span data-idl="" class="idlConstructor" id="idl-def-pushsubscriptionchangeevent-constructor-type-eventinitdict" data-title="constructor" data-dfn-for="PushSubscriptionChangeEvent">
      <dfn data-export="" data-dfn-type="constructor" id="dom-pushsubscriptionchangeevent-constructor" data-idl="constructor" data-title="constructor" data-dfn-for="PushSubscriptionChangeEvent" data-lt="constructor()|constructor(type)|constructor(type, eventInitDict)" data-local-lt="PushSubscriptionChangeEvent.constructor|PushSubscriptionChangeEvent.constructor()|constructor" tabindex="0" aria-haspopup="dialog"><code>constructor</code></dfn>(<span class="idlType"><a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">type</span>, optional<span class="idlType"> <a data-link-type="idl" href="#dom-pushsubscriptionchangeeventinit" class="internalDFN" id="ref-for-dom-pushsubscriptionchangeeventinit-1"><code>PushSubscriptionChangeEventInit</code></a></span> <span class="idlParamName">eventInitDict</span> = {});</span><span data-idl="" class="idlAttribute" id="idl-def-pushsubscriptionchangeevent-newsubscription" data-title="newSubscription" data-dfn-for="PushSubscriptionChangeEvent">
      readonly attribute<span class="idlType"> <a data-link-type="idl" href="#dom-pushsubscription" class="internalDFN" id="ref-for-dom-pushsubscription-23"><code>PushSubscription</code></a>?</span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-pushsubscriptionchangeevent-newsubscription" id="ref-for-dom-pushsubscriptionchangeevent-newsubscription-1"><code>newSubscription</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-pushsubscriptionchangeevent-oldsubscription" data-title="oldSubscription" data-dfn-for="PushSubscriptionChangeEvent">
      readonly attribute<span class="idlType"> <a data-link-type="idl" href="#dom-pushsubscription" class="internalDFN" id="ref-for-dom-pushsubscription-24"><code>PushSubscription</code></a>?</span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-pushsubscriptionchangeevent-oldsubscription" id="ref-for-dom-pushsubscriptionchangeevent-oldsubscription-1"><code>oldSubscription</code></a>;</span>
    };</span></code></pre>
                <p>
                    当获取 <dfn data-export="" data-dfn-type="attribute"
                        id="dom-pushsubscriptionchangeevent-newsubscription" data-idl="attribute"
                        data-title="newSubscription" data-dfn-for="PushSubscriptionChangeEvent"
                        data-type="PushSubscription" data-lt="newSubscription"
                        data-local-lt="PushSubscriptionChangeEvent.newSubscription" tabindex="0"
                        aria-haspopup="dialog"><code>newSubscription</code></dfn> 属性时，返回其初始化的值。
                </p>
                <p>
                    当获取 <dfn data-export="" data-dfn-type="attribute"
                        id="dom-pushsubscriptionchangeevent-oldsubscription" data-idl="attribute"
                        data-title="oldSubscription" data-dfn-for="PushSubscriptionChangeEvent"
                        data-type="PushSubscription" data-lt="oldSubscription"
                        data-local-lt="PushSubscriptionChangeEvent.oldSubscription" tabindex="0"
                        aria-haspopup="dialog"><code>oldSubscription</code></dfn> 属性时，返回其初始化的值。
                </p>
            </section>
            <section data-dfn-for="PushSubscriptionChangeEventInit" id="pushsubscriptionchangeeventinit-interface">
                <div class="header-wrapper">
                    <h4 id="x10-5-2-pushsubscriptionchangeeventinit-interface"><bdi class="secno">10.5.2 </bdi>
                        <dfn data-export="" data-dfn-type="dictionary" id="dom-pushsubscriptionchangeeventinit"
                            data-idl="dictionary" data-title="PushSubscriptionChangeEventInit" data-dfn-for=""
                            tabindex="0" aria-haspopup="dialog"><code>PushSubscriptionChangeEventInit</code></dfn>
                        接口
                    </h4><a class="self-link" href="#pushsubscriptionchangeeventinit-interface"
                        aria-label="第10.5.2节的固定链接"></a>
                </div>

                <pre class="idl def" data-cite="WEBIDL service-workers" id="webidl-1842180883"><span class="idlHeader"><a class="self-link" href="#webidl-1842180883">WebIDL</a></span><code><span data-idl="" class="idlDictionary" id="idl-def-pushsubscriptionchangeeventinit" data-title="PushSubscriptionChangeEventInit">dictionary <a class="internalDFN idlID" data-link-type="dictionary" href="#dom-pushsubscriptionchangeeventinit" id="ref-for-dom-pushsubscriptionchangeeventinit-2"><code>PushSubscriptionChangeEventInit</code></a> : <span class="idlSuperclass"><a data-link-type="idl" data-type="dictionary" href="https://www.w3.org/TR/service-workers/#dictdef-extendableeventinit">ExtendableEventInit</a></span> {<span data-idl="" class="idlMember" id="idl-def-pushsubscriptionchangeeventinit-newsubscription" data-title="newSubscription" data-dfn-for="PushSubscriptionChangeEventInit"><span class="idlType">
      <a data-link-type="idl" href="#dom-pushsubscription" class="internalDFN" id="ref-for-dom-pushsubscription-25"><code>PushSubscription</code></a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-pushsubscriptionchangeeventinit-newsubscription" id="ref-for-dom-pushsubscriptionchangeeventinit-newsubscription-1"><code>newSubscription</code></a> = null;</span><span data-idl="" class="idlMember" id="idl-def-pushsubscriptionchangeeventinit-oldsubscription" data-title="oldSubscription" data-dfn-for="PushSubscriptionChangeEventInit"><span class="idlType">
      <a data-link-type="idl" href="#dom-pushsubscription" class="internalDFN" id="ref-for-dom-pushsubscription-26"><code>PushSubscription</code></a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-pushsubscriptionchangeeventinit-oldsubscription" id="ref-for-dom-pushsubscriptionchangeeventinit-oldsubscription-1"><code>oldSubscription</code></a> = null;</span>
    };</span></code></pre>
                <p>
                    <dfn data-export="" data-dfn-type="dict-member"
                        id="dom-pushsubscriptionchangeeventinit-newsubscription" data-idl="field"
                        data-title="newSubscription" data-dfn-for="PushSubscriptionChangeEventInit"
                        data-type="PushSubscription" tabindex="0"
                        aria-haspopup="dialog"><code>newSubscription</code></dfn> 成员详细说明了在调用
                    <a href="#dfn-pushsubscriptionchange" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-pushsubscriptionchange-2">pushsubscriptionchange</a> 事件时有效的
                    <a href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-push-subscription-73">推送订阅</a>。 当未能建立新的
                    <a href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-push-subscription-74">推送订阅</a> 时，
                    该值将为 <code>null</code>，例如因为 web 应用程序失去了<a data-type="dfn"
                        href="https://www.w3.org/TR/permissions/#dfn-express-permission">明确许可</a>。
                </p>
                <p>
                    <dfn data-export="" data-dfn-type="dict-member"
                        id="dom-pushsubscriptionchangeeventinit-oldsubscription" data-idl="field"
                        data-title="oldSubscription" data-dfn-for="PushSubscriptionChangeEventInit"
                        data-type="PushSubscription" tabindex="0"
                        aria-haspopup="dialog"><code>oldSubscription</code></dfn> 成员详细说明了不应再使用的
                    <a href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-push-subscription-75">推送订阅</a>。 当 <a href="#dfn-user-agent" class="internalDFN"
                        data-link-type="dfn" id="ref-for-dfn-user-agent-53">用户代理</a> 无法提供完整详细信息时，
                    例如由于部分数据库损坏，该值将为 <code>null</code>。
                </p>
            </section>
        </section>
    </section>
    <section id="accessibility">
        <div class="header-wrapper">
            <h2 id="x11-accessibility"><bdi class="secno">11. </bdi>
                无障碍访问
            </h2><a class="self-link" href="#accessibility" aria-label="第11节的固定链接"></a>
        </div>

        <p>
            <cite>推送 API</cite> 本身不提供任何呈现从 <a data-link-type="dfn|abstract-op" href="#dfn-push-service"
                class="internalDFN" id="ref-for-dfn-push-service-32">推送服务</a> 接收到的数据的手段。相反，<cite>推送 API</cite> 依赖其他
            API——
            主要是 <cite><a data-matched-text="[[[NOTIFICATIONS]]]" href="https://notifications.spec.whatwg.org/">通知 API
                    标准</a></cite> ——将接收到的信息呈现给最终用户。
            因此，<cite>推送 API</cite> 本身没有无障碍要求。然而，诸如 [<cite><a class="bibref" data-link-type="biblio"
                    href="#bib-notifications" title="Notifications API Standard">通知</a></cite>] 等规范提供了关于如何以无障碍方式呈现通知的指导。
        </p>
        <p>
            此外，呈现无障碍界面可能需要传输比推送消息所能传达的更多信息。推送消息最适合传递少量内容或标识符。任何更大的资源都需要从服务器获取。
        </p>
    </section>
    <section id="conformance">
        <div class="header-wrapper">
            <h2 id="x12-conformance"><bdi class="secno">12. </bdi>一致性</h2><a class="self-link" href="#conformance"
                aria-label="第12节的固定链接"></a>
        </div>
        <p>与标记为非规范性的部分一样，本规范中的所有作者指南、图表、示例和注释均为非规范性内容。本规范中的其他内容均为规范性内容。</p>
        <p>
            本文档中的关键字 <em class="rfc2119">可以</em>、<em class="rfc2119">必须</em>、<em class="rfc2119">不得</em>、<em
                class="rfc2119">应</em> 和 <em class="rfc2119">不应</em>
            应按照 <a href="https://datatracker.ietf.org/doc/html/bcp14">BCP 14</a> 中的描述进行解释，
            当且仅当这些词汇以大写形式出现时，如此处所示。
            [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc2119"
                    title="在 RFC 中使用关键字来表示需求级别">RFC2119</a></cite>] [<cite><a class="bibref" data-link-type="biblio"
                    href="#bib-rfc8174" title="RFC 2119 关键字大小写之间的歧义">RFC8174</a></cite>]
        </p>
        <p>
            本规范定义了一致性标准，适用于一个单一产品：实现其所包含接口的
            <dfn data-plurals="user agents" id="dfn-user-agent" tabindex="0" aria-haspopup="dialog"
                data-dfn-type="dfn">用户代理</dfn>。
        </p>
    </section>
    <section class="appendix" id="idl-index">
        <div class="header-wrapper">
            <h2 id="a-idl-index"><bdi class="secno">A. </bdi>IDL 索引</h2><a class="self-link" href="#idl-index"
                aria-label="附录 A 的固定链接"></a>
        </div>
        <pre class="idl def" id="actual-idl-index"><span class="idlHeader"><a class="self-link" href="#actual-idl-index">WebIDL</a></span><code><span data-idl="" class="idlDictionary" data-title="PushPermissionDescriptor">dictionary <dfn data-export="" data-dfn-type="dictionary" data-idl="dictionary" data-title="PushPermissionDescriptor" data-dfn-for="" class="idlID"><code>PushPermissionDescriptor</code></dfn> : <span class="idlSuperclass"><a data-link-type="idl" data-type="dictionary" href="https://www.w3.org/TR/permissions/#dom-permissiondescriptor">PermissionDescriptor</a></span> {<span data-idl="" class="idlMember" data-title="userVisibleOnly" data-dfn-for="PushPermissionDescriptor"><span class="idlType">
      <a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean">boolean</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-pushpermissiondescriptor-uservisibleonly" id="ref-for-dom-pushpermissiondescriptor-uservisibleonly-2"><code>userVisibleOnly</code></a> = false;</span>
    };</span>
    
    <span data-idl="" class="idlInterface" data-title="ServiceWorkerRegistration">[<span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>]
    partial interface <a data-idl="partial" data-link-type="interface" data-title="ServiceWorkerRegistration" class="idlID" data-dfn-for="ServiceWorkerRegistration" data-type="interface" href="https://www.w3.org/TR/service-workers/#serviceworkerregistration">ServiceWorkerRegistration</a> {<span data-idl="" class="idlAttribute" data-title="pushManager" data-dfn-for="ServiceWorkerRegistration">
      readonly attribute<span class="idlType"> <a data-link-type="idl" href="#dom-pushmanager" class="internalDFN" id="ref-for-dom-pushmanager-5"><code>PushManager</code></a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-serviceworkerregistration-pushmanager" id="ref-for-dom-serviceworkerregistration-pushmanager-2"><code>pushManager</code></a>;</span>
    };</span>
    
    <span data-idl="" class="idlInterface" data-title="PushManager">[<span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=(Window,Worker)</span>, <span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>]
    interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-pushmanager" id="ref-for-dom-pushmanager-6"><code>PushManager</code></a> {<span data-idl="" class="idlAttribute" data-title="supportedContentEncodings" data-dfn-for="PushManager">
      [<span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject">SameObject</a></span>] static readonly attribute<span class="idlType"> <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-frozen-array">FrozenArray</a>&lt;<a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a>&gt;</span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-pushmanager-supportedcontentencodings" id="ref-for-dom-pushmanager-supportedcontentencodings-2"><code>supportedContentEncodings</code></a>;</span><span data-idl="" class="idlMethod" data-title="subscribe" data-dfn-for="PushManager"><span class="idlType">
    
      <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dom-pushsubscription" class="internalDFN" id="ref-for-dom-pushsubscription-27"><code>PushSubscription</code></a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-pushmanager-subscribe" id="ref-for-dom-pushmanager-subscribe-3"><code>subscribe</code></a>(optional<span class="idlType"> <a data-link-type="idl" href="#dom-pushsubscriptionoptionsinit" class="internalDFN" id="ref-for-dom-pushsubscriptionoptionsinit-6"><code>PushSubscriptionOptionsInit</code></a></span> <span class="idlParamName">options</span> = {});</span><span data-idl="" class="idlMethod" data-title="getSubscription" data-dfn-for="PushManager"><span class="idlType">
      <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dom-pushsubscription" class="internalDFN" id="ref-for-dom-pushsubscription-28"><code>PushSubscription</code></a>?&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-pushmanager-getsubscription" id="ref-for-dom-pushmanager-getsubscription-2"><code>getSubscription</code></a>();</span><span data-idl="" class="idlMethod" data-title="permissionState" data-dfn-for="PushManager"><span class="idlType">
      <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" data-type="enum" href="https://www.w3.org/TR/permissions/#dom-permissionstate">PermissionState</a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-pushmanager-permissionstate" id="ref-for-dom-pushmanager-permissionstate-2"><code>permissionState</code></a>(optional<span class="idlType"> <a data-link-type="idl" href="#dom-pushsubscriptionoptionsinit" class="internalDFN" id="ref-for-dom-pushsubscriptionoptionsinit-7"><code>PushSubscriptionOptionsInit</code></a></span> <span class="idlParamName">options</span> = {});</span>
    };</span>
    
    <span data-idl="" class="idlInterface" data-title="PushSubscriptionOptions">[<span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=(Window,Worker)</span>, <span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>]
    interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-pushsubscriptionoptions" id="ref-for-dom-pushsubscriptionoptions-7"><code>PushSubscriptionOptions</code></a> {<span data-idl="" class="idlAttribute" data-title="userVisibleOnly" data-dfn-for="PushSubscriptionOptions">
      readonly attribute<span class="idlType"> <a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean">boolean</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-pushsubscriptionoptions-uservisibleonly" id="ref-for-dom-pushsubscriptionoptions-uservisibleonly-2"><code>userVisibleOnly</code></a>;</span><span data-idl="" class="idlAttribute" data-title="applicationServerKey" data-dfn-for="PushSubscriptionOptions">
      [<span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject">SameObject</a></span>] readonly attribute<span class="idlType"> <a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-ArrayBuffer">ArrayBuffer</a>?</span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-pushsubscriptionoptions-applicationserverkey" id="ref-for-dom-pushsubscriptionoptions-applicationserverkey-8"><code>applicationServerKey</code></a>;</span>
    };</span>
    
    <span data-idl="" class="idlDictionary" data-title="PushSubscriptionOptionsInit">dictionary <a class="internalDFN idlID" data-link-type="dictionary" href="#dom-pushsubscriptionoptionsinit" id="ref-for-dom-pushsubscriptionoptionsinit-8"><code>PushSubscriptionOptionsInit</code></a> {<span data-idl="" class="idlMember" data-title="userVisibleOnly" data-dfn-for="PushSubscriptionOptionsInit"><span class="idlType">
      <a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean">boolean</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-pushsubscriptionoptionsinit-uservisibleonly" id="ref-for-dom-pushsubscriptionoptionsinit-uservisibleonly-5"><code>userVisibleOnly</code></a> = false;</span><span data-idl="" class="idlMember" data-title="applicationServerKey" data-dfn-for="PushSubscriptionOptionsInit"><span class="idlType">
      (<a data-link-type="idl" data-type="typedef" href="https://webidl.spec.whatwg.org/#BufferSource">BufferSource</a> or <a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a>)?</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-pushsubscriptionoptionsinit-applicationserverkey" id="ref-for-dom-pushsubscriptionoptionsinit-applicationserverkey-7"><code>applicationServerKey</code></a> = null;</span>
    };</span>
    
    <span data-idl="" class="idlInterface" data-title="PushSubscription">[<span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=(Window,Worker)</span>, <span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>]
    interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-pushsubscription" id="ref-for-dom-pushsubscription-29"><code>PushSubscription</code></a> {<span data-idl="" class="idlAttribute" data-title="endpoint" data-dfn-for="PushSubscription">
      readonly attribute<span class="idlType"> <a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString">USVString</a></span> <dfn data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="endpoint" data-dfn-for="PushSubscription" data-type="USVString" data-lt="endpoint" data-local-lt="PushSubscription.endpoint" class="idlName"><code>endpoint</code></dfn>;</span><span data-idl="" class="idlAttribute" data-title="expirationTime" data-dfn-for="PushSubscription">
      readonly attribute<span class="idlType"> <a data-link-type="idl" data-type="typedef" href="https://www.w3.org/TR/hr-time-3/#dom-epochtimestamp">EpochTimeStamp</a>?</span> <dfn data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="expirationTime" data-dfn-for="PushSubscription" data-type="EpochTimeStamp" data-lt="expirationTime" data-local-lt="PushSubscription.expirationTime" class="idlName"><code>expirationTime</code></dfn>;</span><span data-idl="" class="idlAttribute" data-title="options" data-dfn-for="PushSubscription">
      [<span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject">SameObject</a></span>] readonly attribute<span class="idlType"> <a data-link-type="idl" href="#dom-pushsubscriptionoptions" class="internalDFN" id="ref-for-dom-pushsubscriptionoptions-8"><code>PushSubscriptionOptions</code></a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-pushsubscription-options" id="ref-for-dom-pushsubscription-options-3"><code>options</code></a>;</span><span data-idl="" class="idlMethod" data-title="getKey" data-dfn-for="PushSubscription"><span class="idlType">
      <a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-ArrayBuffer">ArrayBuffer</a>?</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-pushsubscription-getkey" id="ref-for-dom-pushsubscription-getkey-9"><code>getKey</code></a>(<span class="idlType"><a data-link-type="idl" href="#dom-pushencryptionkeyname" class="internalDFN" id="ref-for-dom-pushencryptionkeyname-5"><code>PushEncryptionKeyName</code></a></span> <span class="idlParamName">name</span>);</span><span data-idl="" class="idlMethod" data-title="unsubscribe" data-dfn-for="PushSubscription"><span class="idlType">
      <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean">boolean</a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-pushsubscription-unsubscribe" id="ref-for-dom-pushsubscription-unsubscribe-3"><code>unsubscribe</code></a>();</span><span data-idl="" class="idlMethod" data-title="toJSON" data-dfn-for="PushSubscription"><span class="idlType">
    
      <a data-link-type="idl" href="#dom-pushsubscriptionjson" class="internalDFN" id="ref-for-dom-pushsubscriptionjson-4"><code>PushSubscriptionJSON</code></a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-pushsubscription-tojson" id="ref-for-dom-pushsubscription-tojson-2"><code>toJSON</code></a>();</span>
    };</span><span data-idl="" class="idlDictionary" data-title="PushSubscriptionJSON">
    
    dictionary <a class="internalDFN idlID" data-link-type="dictionary" href="#dom-pushsubscriptionjson" id="ref-for-dom-pushsubscriptionjson-5"><code>PushSubscriptionJSON</code></a> {<span data-idl="" class="idlMember" data-title="endpoint" data-dfn-for="PushSubscriptionJSON"><span class="idlType">
      <a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString">USVString</a></span> <dfn data-export="" data-dfn-type="dict-member" data-idl="field" data-title="endpoint" data-dfn-for="PushSubscriptionJSON" data-type="USVString" class="idlName"><code>endpoint</code></dfn>;</span><span data-idl="" class="idlMember" data-title="expirationTime" data-dfn-for="PushSubscriptionJSON"><span class="idlType">
      <a data-link-type="idl" data-type="typedef" href="https://www.w3.org/TR/hr-time-3/#dom-epochtimestamp">EpochTimeStamp</a>?</span> <dfn data-export="" data-dfn-type="dict-member" data-idl="field" data-title="expirationTime" data-dfn-for="PushSubscriptionJSON" data-type="EpochTimeStamp" class="idlName"><code>expirationTime</code></dfn> = null;</span><span data-idl="" class="idlMember" data-title="keys" data-dfn-for="PushSubscriptionJSON"><span class="idlType">
      <a data-type="dfn" href="https://webidl.spec.whatwg.org/#idl-record">record</a>&lt;<a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a>, <a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString">USVString</a>&gt;</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-pushsubscriptionjson-keys" id="ref-for-dom-pushsubscriptionjson-keys-2"><code>keys</code></a>;</span>
    };</span>
    
    <span data-idl="" class="idlEnum" data-title="PushEncryptionKeyName">enum <a class="internalDFN idlID" data-link-type="enum" href="#dom-pushencryptionkeyname" id="ref-for-dom-pushencryptionkeyname-6"><code>PushEncryptionKeyName</code></a> {
      <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-pushencryptionkeyname-p256dh" id="ref-for-dom-pushencryptionkeyname-p256dh-6"><code>p256dh</code></a>"</span>,
      <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-pushencryptionkeyname-auth" id="ref-for-dom-pushencryptionkeyname-auth-4"><code>auth</code></a>"</span>
    };</span>
    
    <span data-idl="" class="idlInterface" data-title="PushMessageData">[<span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=ServiceWorker</span>, <span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>]
    interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-pushmessagedata" id="ref-for-dom-pushmessagedata-6"><code>PushMessageData</code></a> {<span data-idl="" class="idlMethod" data-title="arrayBuffer" data-dfn-for="PushMessageData"><span class="idlType">
      <a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-ArrayBuffer">ArrayBuffer</a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-pushmessagedata-arraybuffer" id="ref-for-dom-pushmessagedata-arraybuffer-2"><code>arrayBuffer</code></a>();</span><span data-idl="" class="idlMethod" data-title="blob" data-dfn-for="PushMessageData"><span class="idlType">
      <a data-link-type="idl" data-type="interface" href="https://www.w3.org/TR/FileAPI/#dfn-Blob">Blob</a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-pushmessagedata-blob" id="ref-for-dom-pushmessagedata-blob-2"><code>blob</code></a>();</span><span data-idl="" class="idlMethod" data-title="bytes" data-dfn-for="PushMessageData"><span class="idlType">
      <a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-Uint8Array">Uint8Array</a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-pushmessagedata-bytes" id="ref-for-dom-pushmessagedata-bytes-2"><code>bytes</code></a>();</span><span data-idl="" class="idlMethod" data-title="json" data-dfn-for="PushMessageData"><span class="idlType">
      <a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-any">any</a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-pushmessagedata-json" id="ref-for-dom-pushmessagedata-json-2"><code>json</code></a>();</span><span data-idl="" class="idlMethod" data-title="text" data-dfn-for="PushMessageData"><span class="idlType">
      <a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString">USVString</a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-pushmessagedata-text" id="ref-for-dom-pushmessagedata-text-2"><code>text</code></a>();</span>
    };</span>
    
    <span data-idl="" class="idlInterface" data-title="ServiceWorkerGlobalScope">[<span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=ServiceWorker</span>, <span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>]
    partial interface <a data-idl="partial" data-link-type="interface" data-title="ServiceWorkerGlobalScope" class="idlID" data-dfn-for="ServiceWorkerGlobalScope" data-type="interface" href="https://www.w3.org/TR/service-workers/#serviceworkerglobalscope">ServiceWorkerGlobalScope</a> {<span data-idl="" class="idlAttribute" data-title="onpush" data-dfn-for="ServiceWorkerGlobalScope">
      attribute<span class="idlType"> <a data-link-type="idl" data-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-serviceworkerglobalscope-onpush" id="ref-for-dom-serviceworkerglobalscope-onpush-2"><code>onpush</code></a>;</span><span data-idl="" class="idlAttribute" data-title="onpushsubscriptionchange" data-dfn-for="ServiceWorkerGlobalScope">
      attribute<span class="idlType"> <a data-link-type="idl" data-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-serviceworkerglobalscope-onpushsubscriptionchange" id="ref-for-dom-serviceworkerglobalscope-onpushsubscriptionchange-2"><code>onpushsubscriptionchange</code></a>;</span>
    };</span>
    
    <span data-idl="" class="idlInterface" data-title="PushEvent">[<span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=ServiceWorker</span>, <span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>]
    interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-pushevent" id="ref-for-dom-pushevent-5"><code>PushEvent</code></a> : <span class="idlSuperclass"><a data-link-type="idl" data-type="interface" href="https://www.w3.org/TR/service-workers/#extendableevent">ExtendableEvent</a></span> {<span data-idl="" class="idlConstructor" data-title="constructor" data-dfn-for="PushEvent">
      <a class="internalDFN" data-link-type="constructor" href="#dom-pushevent-constructor" id="ref-for-dom-pushevent-constructor-2"><code>constructor</code></a>(<span class="idlType"><a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">type</span>, optional<span class="idlType"> <a data-link-type="idl" href="#dom-pusheventinit" class="internalDFN" id="ref-for-dom-pusheventinit-3"><code>PushEventInit</code></a></span> <span class="idlParamName">eventInitDict</span> = {});</span><span data-idl="" class="idlAttribute" data-title="data" data-dfn-for="PushEvent">
      readonly attribute<span class="idlType"> <a data-link-type="idl" href="#dom-pushmessagedata" class="internalDFN" id="ref-for-dom-pushmessagedata-7"><code>PushMessageData</code></a>?</span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-pushevent-data" id="ref-for-dom-pushevent-data-2"><code>data</code></a>;</span>
    };</span>
    
    <span data-idl="" class="idlTypedef" data-title="PushMessageDataInit">typedef<span class="idlType"> (<a data-link-type="idl" data-type="typedef" href="https://webidl.spec.whatwg.org/#BufferSource">BufferSource</a> or <a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString">USVString</a>)</span> <dfn data-export="" data-dfn-type="typedef" data-idl="typedef" data-title="PushMessageDataInit" data-dfn-for="" class="idlID"><code>PushMessageDataInit</code></dfn>;</span><span data-idl="" class="idlDictionary" data-title="PushEventInit">
    
    dictionary <a class="internalDFN idlID" data-link-type="dictionary" href="#dom-pusheventinit" id="ref-for-dom-pusheventinit-4"><code>PushEventInit</code></a> : <span class="idlSuperclass"><a data-link-type="idl" data-type="dictionary" href="https://www.w3.org/TR/service-workers/#dictdef-extendableeventinit">ExtendableEventInit</a></span> {<span data-idl="" class="idlMember" data-title="data" data-dfn-for="PushEventInit"><span class="idlType">
      <a data-link-type="idl" href="#dom-pushmessagedatainit" class="internalDFN" id="ref-for-dom-pushmessagedatainit-2"><code>PushMessageDataInit</code></a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-pusheventinit-data" id="ref-for-dom-pusheventinit-data-2"><code>data</code></a>;</span>
    };</span>
    
    <span data-idl="" class="idlInterface" data-title="PushSubscriptionChangeEvent">[<span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=ServiceWorker</span>, <span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>]
    interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-pushsubscriptionchangeevent" id="ref-for-dom-pushsubscriptionchangeevent-3"><code>PushSubscriptionChangeEvent</code></a> : <span class="idlSuperclass"><a data-link-type="idl" data-type="interface" href="https://www.w3.org/TR/service-workers/#extendableevent">ExtendableEvent</a></span> {<span data-idl="" class="idlConstructor" data-title="constructor" data-dfn-for="PushSubscriptionChangeEvent">
      <dfn data-export="" data-dfn-type="constructor" data-idl="constructor" data-title="constructor" data-dfn-for="PushSubscriptionChangeEvent" data-lt="constructor()|constructor(type)|constructor(type, eventInitDict)" data-local-lt="PushSubscriptionChangeEvent.constructor|PushSubscriptionChangeEvent.constructor()|constructor"><code>constructor</code></dfn>(<span class="idlType"><a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">type</span>, optional<span class="idlType"> <a data-link-type="idl" href="#dom-pushsubscriptionchangeeventinit" class="internalDFN" id="ref-for-dom-pushsubscriptionchangeeventinit-3"><code>PushSubscriptionChangeEventInit</code></a></span> <span class="idlParamName">eventInitDict</span> = {});</span><span data-idl="" class="idlAttribute" data-title="newSubscription" data-dfn-for="PushSubscriptionChangeEvent">
      readonly attribute<span class="idlType"> <a data-link-type="idl" href="#dom-pushsubscription" class="internalDFN" id="ref-for-dom-pushsubscription-30"><code>PushSubscription</code></a>?</span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-pushsubscriptionchangeevent-newsubscription" id="ref-for-dom-pushsubscriptionchangeevent-newsubscription-2"><code>newSubscription</code></a>;</span><span data-idl="" class="idlAttribute" data-title="oldSubscription" data-dfn-for="PushSubscriptionChangeEvent">
      readonly attribute<span class="idlType"> <a data-link-type="idl" href="#dom-pushsubscription" class="internalDFN" id="ref-for-dom-pushsubscription-31"><code>PushSubscription</code></a>?</span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-pushsubscriptionchangeevent-oldsubscription" id="ref-for-dom-pushsubscriptionchangeevent-oldsubscription-2"><code>oldSubscription</code></a>;</span>
    };</span>
    
    <span data-idl="" class="idlDictionary" data-title="PushSubscriptionChangeEventInit">dictionary <a class="internalDFN idlID" data-link-type="dictionary" href="#dom-pushsubscriptionchangeeventinit" id="ref-for-dom-pushsubscriptionchangeeventinit-4"><code>PushSubscriptionChangeEventInit</code></a> : <span class="idlSuperclass"><a data-link-type="idl" data-type="dictionary" href="https://www.w3.org/TR/service-workers/#dictdef-extendableeventinit">ExtendableEventInit</a></span> {<span data-idl="" class="idlMember" data-title="newSubscription" data-dfn-for="PushSubscriptionChangeEventInit"><span class="idlType">
      <a data-link-type="idl" href="#dom-pushsubscription" class="internalDFN" id="ref-for-dom-pushsubscription-32"><code>PushSubscription</code></a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-pushsubscriptionchangeeventinit-newsubscription" id="ref-for-dom-pushsubscriptionchangeeventinit-newsubscription-2"><code>newSubscription</code></a> = null;</span><span data-idl="" class="idlMember" data-title="oldSubscription" data-dfn-for="PushSubscriptionChangeEventInit"><span class="idlType">
      <a data-link-type="idl" href="#dom-pushsubscription" class="internalDFN" id="ref-for-dom-pushsubscription-33"><code>PushSubscription</code></a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-pushsubscriptionchangeeventinit-oldsubscription" id="ref-for-dom-pushsubscriptionchangeeventinit-oldsubscription-2"><code>oldSubscription</code></a> = null;</span>
    };</span></code></pre>
    </section>
    <section class="appendix" id="acknowledgements">
        <div class="header-wrapper">
            <h2 id="b-acknowledgements"><bdi class="secno">B. </bdi>
                致谢
            </h2><a class="self-link" href="#acknowledgements" aria-label="附录 B 的固定链接"></a>
        </div>

        <p>
            编辑们要感谢实施 Firefox OS 推送消息解决方案的 Mozilla 和 Telefónica Digital 团队，以及以下为本文档提供了重要技术意见的人：Antonio Amaya、Miguel
            García
            Arribas、Ben Bangert、Kit Cambridge、José Manuel Cantera、JR Conlin、Albert Crespell、Matt
            Gaunt、Phil Jenvey、Guillermo López、Nikhil Marathe、John Mellor、Pınar Özlen、Fernando R.
            Sela、Shijun Sun 和 Doug Turner。
        </p>
    </section>


    <section id="references" class="appendix">
        <div class="header-wrapper">
            <h2 id="c-references"><bdi class="secno">C. </bdi>参考文献</h2><a class="self-link" href="#references"
                aria-label="附录 C 的固定链接"></a>
        </div>
        <section id="normative-references">
            <div class="header-wrapper">
                <h3 id="c-1-normative-references"><bdi class="secno">C.1 </bdi>规范性引用</h3><a class="self-link"
                    href="#normative-references" aria-label="附录 C.1 的固定链接"></a>
            </div>

            <dl class="bibliography">
                <dt id="bib-ansi-x9-62">[ANSI-X9-62]</dt>
                <dd>
                    <a href="https://webstore.ansi.org/RecordDetail.aspx?sku=ANSI+X9.62%3a2005"><cite>金融服务行业的公钥密码学，椭圆曲线数字签名算法
                            (ECDSA)</cite></a>。ANSI。2005 年。URL: <a
                        href="https://webstore.ansi.org/RecordDetail.aspx?sku=ANSI+X9.62%3a2005">https://webstore.ansi.org/RecordDetail.aspx?sku=ANSI+X9.62%3a2005</a>
                </dd>
                <dt id="bib-dom">[dom]</dt>
                <dd>
                    <a href="https://dom.spec.whatwg.org/"><cite>DOM 标准</cite></a>。Anne van Kesteren。WHATWG。现行标准。URL: <a
                        href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
                </dd>
                <dt id="bib-dss">[DSS]</dt>
                <dd>
                    <a href="https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.186-5.pdf"><cite>FIPS PUB 186-5: 数字签名标准
                            (DSS)</cite></a>。美国商务部/国家标准与技术研究院。2023 年 2 月 3 日。国家标准。URL: <a
                        href="https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.186-5.pdf">https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.186-5.pdf</a>
                </dd>
                <dt id="bib-ecmascript">[ecmascript]</dt>
                <dd>
                    <a href="https://tc39.es/ecma262/multipage/"><cite>ECMAScript 语言规范</cite></a>。
                    Ecma International。URL: <a
                        href="https://tc39.es/ecma262/multipage/">https://tc39.es/ecma262/multipage/</a>
                </dd>
                <dt id="bib-encoding">[encoding]</dt>
                <dd>
                    <a href="https://encoding.spec.whatwg.org/"><cite>编码标准</cite></a>。Anne van Kesteren。
                    WHATWG。现行标准。URL: <a href="https://encoding.spec.whatwg.org/">https://encoding.spec.whatwg.org/</a>
                </dd>
                <dt id="bib-fileapi">[fileapi]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/FileAPI/"><cite>文件 API</cite></a>。Marijn Kruisselbrink。W3C。2024 年 5 月
                    24 日。W3C 工作草案。URL: <a href="https://www.w3.org/TR/FileAPI/">https://www.w3.org/TR/FileAPI/</a>
                </dd>
                <dt id="bib-hr-time">[hr-time]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/hr-time-3/"><cite>高精度时间</cite></a>。Yoav Weiss。W3C。2023 年 7 月 19 日。W3C
                    工作草案。URL: <a href="https://www.w3.org/TR/hr-time-3/">https://www.w3.org/TR/hr-time-3/</a>
                </dd>
                <dt id="bib-html">[html]</dt>
                <dd>
                    <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML 标准</cite></a>。Anne van Kesteren；
                    Domenic Denicola；Ian Hickson；Philip Jägenstedt；Simon Pieters。WHATWG。现行标准。URL: <a
                        href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
                </dd>
                <dt id="bib-infra">[infra]</dt>
                <dd>
                    <a href="https://infra.spec.whatwg.org/"><cite>Infra 标准</cite></a>。Anne van Kesteren；Domenic
                    Denicola。WHATWG。现行标准。URL: <a
                        href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
                </dd>
                <dt id="bib-notifications">[NOTIFICATIONS]</dt>
                <dd>
                    <a href="https://notifications.spec.whatwg.org/"><cite>通知 API 标准</cite></a>。Anne van
                    Kesteren。WHATWG。现行标准。URL: <a
                        href="https://notifications.spec.whatwg.org/">https://notifications.spec.whatwg.org/</a>
                </dd>
                <dt id="bib-permissions">[Permissions]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/permissions/"><cite>权限</cite></a>。Marcos Caceres；Mike
                    Taylor。W3C。2024 年 3 月 19 日。W3C 工作草案。URL: <a
                        href="https://www.w3.org/TR/permissions/">https://www.w3.org/TR/permissions/</a>
                </dd>
                <dt id="bib-rfc2119">[RFC2119]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc2119"><cite>在 RFC 中使用关键字以表示需求级别</cite></a>。S.
                    Bradner。IETF。1997 年 3 月。最佳现行做法。URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc2119">https://www.rfc-editor.org/rfc/rfc2119</a>
                </dd>
                <dt id="bib-rfc4648">[RFC4648]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc4648"><cite>Base16、Base32 和 Base64 数据编码</cite></a>。S.
                    Josefsson。IETF。2006 年 10 月。提议标准。URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc4648">https://www.rfc-editor.org/rfc/rfc4648</a>
                </dd>
                <dt id="bib-rfc7231">[RFC7231]</dt>
                <dd>
                    <a href="https://httpwg.org/specs/rfc7231.html"><cite>超文本传输协议 (HTTP/1.1)：语义和内容</cite></a>。R.
                    Fielding, Ed.；J. Reschke, Ed.. IETF。2014 年 6 月。提议标准。URL: <a
                        href="https://httpwg.org/specs/rfc7231.html">https://httpwg.org/specs/rfc7231.html</a>
                </dd>
                <dt id="bib-rfc7515">[RFC7515]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc7515"><cite>JSON Web 签名 (JWS)</cite></a>。M.
                    Jones；J. Bradley；N. Sakimura。IETF。2015 年 5 月。提议标准。URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc7515">https://www.rfc-editor.org/rfc/rfc7515</a>
                </dd>
                <dt id="bib-rfc8030">[RFC8030]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc8030"><cite>使用 HTTP 推送的通用事件传递</cite></a>。M. Thomson；E.
                    Damaggio；B. Raymor, Ed.. IETF。2016 年 12 月。提议标准。URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc8030">https://www.rfc-editor.org/rfc/rfc8030</a>
                </dd>
                <dt id="bib-rfc8174">[RFC8174]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc8174"><cite>RFC 2119 中大写和小写的歧义</cite></a>。B.
                    Leiba。IETF。2017 年 5 月。最佳现行做法。URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc8174">https://www.rfc-editor.org/rfc/rfc8174</a>
                </dd>
                <dt id="bib-rfc8291">[RFC8291]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc8291"><cite>Web 推送消息加密</cite></a>。
                    M. Thomson。IETF。2017 年 11 月。提议标准。URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc8291">https://www.rfc-editor.org/rfc/rfc8291</a>
                </dd>
                <dt id="bib-rfc8292">[RFC8292]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc8292"><cite>Web 推送的自愿应用服务器识别 (VAPID)</cite></a>。M.
                    Thomson；P. Beverloo。IETF。2017 年 11 月。提议标准。URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc8292">https://www.rfc-editor.org/rfc/rfc8292</a>
                </dd>
                <dt id="bib-service-workers">[SERVICE-WORKERS]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/service-workers/"><cite>服务工作者</cite></a>。Jake Archibald；
                    Marijn Kruisselbrink。W3C。2022 年 7 月 12 日。W3C 候选推荐标准。URL: <a
                        href="https://www.w3.org/TR/service-workers/">https://www.w3.org/TR/service-workers/</a>
                </dd>
                <dt id="bib-webidl">[WEBIDL]</dt>
                <dd>
                    <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL 标准</cite></a>。Edgar Chen；Timothy Gu。
                    WHATWG。现行标准。URL: <a href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
                </dd>
            </dl>
        </section>
        <section id="informative-references">
            <div class="header-wrapper">
                <h3 id="c-2-informative-references"><bdi class="secno">C.2 </bdi>参考性引用</h3><a class="self-link"
                    href="#informative-references" aria-label="附录 C.2 的固定链接"></a>
            </div>

            <dl class="bibliography">
                <dt id="bib-fetch">[Fetch]</dt>
                <dd>
                    <a href="https://fetch.spec.whatwg.org/"><cite>Fetch 标准</cite></a>。Anne van
                    Kesteren。WHATWG。现行标准。URL: <a
                        href="https://fetch.spec.whatwg.org/">https://fetch.spec.whatwg.org/</a>
                </dd>
                <dt id="bib-web-background-sync">[WEB-BACKGROUND-SYNC]</dt>
                <dd>
                    <a href="https://wicg.github.io/background-sync/spec/"><cite>Web 后台同步</cite></a>。WICG。cg-draft。URL:
                    <a
                        href="https://wicg.github.io/background-sync/spec/">https://wicg.github.io/background-sync/spec/</a>
                </dd>
                <dt id="bib-websockets">[WebSockets]</dt>
                <dd>
                    <a href="https://websockets.spec.whatwg.org/"><cite>WebSockets 标准</cite></a>。Adam
                    Rice。WHATWG。现行标准。URL: <a
                        href="https://websockets.spec.whatwg.org/">https://websockets.spec.whatwg.org/</a>
                </dd>
            </dl>
        </section>
    </section>
    <p role="navigation" id="back-to-top">
        <a href="#title"><abbr title="返回顶部">↑</abbr></a>
    </p>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-web-push-protocol"
        aria-label="Links in this document to definition: web push protocol">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-web-push-protocol"
                aria-label="Permalink for definition: web push protocol. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-web-push-protocol-1" title="§ Abstract">§ Abstract</a>
            </li>
            <li>
                <a href="#ref-for-dfn-web-push-protocol-2" title="§ 5.3 Push service use">§ 5.3 Push service use</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-content-encoding"
        aria-label="Links in this document to definition: Content-Encoding">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-content-encoding"
                aria-label="Permalink for definition: Content-Encoding. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-content-encoding-1" title="§ 7. PushManager interface">§ 7. PushManager
                    interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-application-server"
        aria-label="Links in this document to definition: application server">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-application-server"
                aria-label="Permalink for definition: application server. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-application-server-1" title="§ Abstract">§ Abstract</a> <a
                    href="#ref-for-dfn-application-server-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-application-server-3" title="§ 1. Introduction">§ 1. Introduction</a> <a
                    href="#ref-for-dfn-application-server-4" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-application-server-5" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-application-server-6" title="§ 2. Dependencies">§ 2. Dependencies</a>
            </li>
            <li>
                <a href="#ref-for-dfn-application-server-7" title="§ 3.2 Push message">§ 3.2 Push message</a>
            </li>
            <li>
                <a href="#ref-for-dfn-application-server-8" title="§ 3.3 Push subscription">§ 3.3 Push subscription</a>
            </li>
            <li>
                <a href="#ref-for-dfn-application-server-9" title="§ 3.3.1 Subscription Refreshes">§ 3.3.1 Subscription
                    Refreshes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-application-server-10" title="§ 3.4 Push service">§ 3.4 Push service</a>
            </li>
            <li>
                <a href="#ref-for-dfn-application-server-11" title="§ 4. Security and privacy considerations">§ 4.
                    Security and privacy considerations</a> <a href="#ref-for-dfn-application-server-12"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-application-server-13" title="Reference 3">(3)</a>
                <a href="#ref-for-dfn-application-server-14" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-application-server-15" title="§ 5. Push Framework">§ 5. Push Framework</a> <a
                    href="#ref-for-dfn-application-server-16" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-application-server-17" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-application-server-18" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-application-server-19" title="§ 5.3 Push service use">§ 5.3 Push service use</a>
                <a href="#ref-for-dfn-application-server-20" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-application-server-21" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-application-server-22" title="§ 7.3 PushSubscriptionOptionsInit dictionary">§ 7.3
                    PushSubscriptionOptionsInit dictionary</a> <a href="#ref-for-dfn-application-server-23"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-application-server-24" title="§ 8. PushSubscription interface">§ 8.
                    PushSubscription interface</a>
            </li>
            <li>
                <a href="#ref-for-dfn-application-server-25" title="§ 10.4 Receiving a Push Message">§ 10.4 Receiving a
                    Push Message</a> <a href="#ref-for-dfn-application-server-26" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-application-server-27" title="§ 10.5 The pushsubscriptionchange Event">§ 10.5 The
                    pushsubscriptionchange Event</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-push-message"
        aria-label="Links in this document to definition: push message">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-push-message"
                aria-label="Permalink for definition: push message. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-push-message-1" title="§ Abstract">§ Abstract</a> <a
                    href="#ref-for-dfn-push-message-2" title="Reference 2">(2)</a> <a href="#ref-for-dfn-push-message-3"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-message-4" title="§ 1. Introduction">§ 1. Introduction</a> <a
                    href="#ref-for-dfn-push-message-5" title="Reference 2">(2)</a> <a href="#ref-for-dfn-push-message-6"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-push-message-7" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-push-message-8" title="Reference 5">(5)</a> <a href="#ref-for-dfn-push-message-9"
                    title="Reference 6">(6)</a> <a href="#ref-for-dfn-push-message-10" title="Reference 7">(7)</a> <a
                    href="#ref-for-dfn-push-message-11" title="Reference 8">(8)</a> <a
                    href="#ref-for-dfn-push-message-12" title="Reference 9">(9)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-message-13" title="§ 2. Dependencies">§ 2. Dependencies</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-message-14" title="§ 3.2 Push message">§ 3.2 Push message</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-message-15" title="§ 3.3 Push subscription">§ 3.3 Push subscription</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-message-16" title="§ 3.3.2 Subscription Deactivation">§ 3.3.2 Subscription
                    Deactivation</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-message-17" title="§ 3.4 Push service">§ 3.4 Push service</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-message-18" title="§ 4. Security and privacy considerations">§ 4. Security
                    and privacy considerations</a> <a href="#ref-for-dfn-push-message-19" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-push-message-20" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-message-21" title="§ 5. Push Framework">§ 5. Push Framework</a> <a
                    href="#ref-for-dfn-push-message-22" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-push-message-23" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-push-message-24" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-message-25" title="§ 5.3 Push service use">§ 5.3 Push service use</a> <a
                    href="#ref-for-dfn-push-message-26" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-push-message-27" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-message-28" title="§ 7. PushManager interface">§ 7. PushManager interface</a>
                <a href="#ref-for-dfn-push-message-29" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-message-30" title="§ 7.3 PushSubscriptionOptionsInit dictionary">§ 7.3
                    PushSubscriptionOptionsInit dictionary</a> <a href="#ref-for-dfn-push-message-31"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-push-message-32" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-push-message-33" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-message-34" title="§ 8. PushSubscription interface">§ 8. PushSubscription
                    interface</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-message-35" title="§ 8.1 PushEncryptionKeyName enumeration">§ 8.1
                    PushEncryptionKeyName enumeration</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-message-36"
                    title="§ 10.1 Extensions to the ServiceWorkerGlobalScope interface">§ 10.1 Extensions to the
                    ServiceWorkerGlobalScope interface</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-message-37" title="§ 10.3 PushEventInit dictionary">§ 10.3 PushEventInit
                    dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-message-38" title="§ 10.4 Receiving a Push Message">§ 10.4 Receiving a Push
                    Message</a> <a href="#ref-for-dfn-push-message-39" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-push-message-40" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-push-message-41" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-push-message-42" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-push-message-43" title="Reference 6">(6)</a> <a
                    href="#ref-for-dfn-push-message-44" title="Reference 7">(7)</a> <a
                    href="#ref-for-dfn-push-message-45" title="Reference 8">(8)</a> <a
                    href="#ref-for-dfn-push-message-46" title="Reference 9">(9)</a> <a
                    href="#ref-for-dfn-push-message-47" title="Reference 10">(10)</a> <a
                    href="#ref-for-dfn-push-message-48" title="Reference 11">(11)</a> <a
                    href="#ref-for-dfn-push-message-49" title="Reference 12">(12)</a> <a
                    href="#ref-for-dfn-push-message-50" title="Reference 13">(13)</a> <a
                    href="#ref-for-dfn-push-message-51" title="Reference 14">(14)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-push-subscription"
        aria-label="Links in this document to definition: push subscription">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-push-subscription"
                aria-label="Permalink for definition: push subscription. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-push-subscription-1" title="§ 3.2 Push message">§ 3.2 Push message</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-subscription-2" title="§ 3.3 Push subscription">§ 3.3 Push subscription</a>
                <a href="#ref-for-dfn-push-subscription-3" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-push-subscription-4" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-push-subscription-5" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-push-subscription-6" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-push-subscription-7" title="Reference 6">(6)</a> <a
                    href="#ref-for-dfn-push-subscription-8" title="Reference 7">(7)</a> <a
                    href="#ref-for-dfn-push-subscription-9" title="Reference 8">(8)</a> <a
                    href="#ref-for-dfn-push-subscription-10" title="Reference 9">(9)</a> <a
                    href="#ref-for-dfn-push-subscription-11" title="Reference 10">(10)</a> <a
                    href="#ref-for-dfn-push-subscription-12" title="Reference 11">(11)</a> <a
                    href="#ref-for-dfn-push-subscription-13" title="Reference 12">(12)</a> <a
                    href="#ref-for-dfn-push-subscription-14" title="Reference 13">(13)</a> <a
                    href="#ref-for-dfn-push-subscription-15" title="Reference 14">(14)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-subscription-16" title="§ 3.3.1 Subscription Refreshes">§ 3.3.1 Subscription
                    Refreshes</a> <a href="#ref-for-dfn-push-subscription-17" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-push-subscription-18" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-push-subscription-19" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-push-subscription-20" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-push-subscription-21" title="Reference 6">(6)</a> <a
                    href="#ref-for-dfn-push-subscription-22" title="Reference 7">(7)</a> <a
                    href="#ref-for-dfn-push-subscription-23" title="Reference 8">(8)</a> <a
                    href="#ref-for-dfn-push-subscription-24" title="Reference 9">(9)</a> <a
                    href="#ref-for-dfn-push-subscription-25" title="Reference 10">(10)</a> <a
                    href="#ref-for-dfn-push-subscription-26" title="Reference 11">(11)</a> <a
                    href="#ref-for-dfn-push-subscription-27" title="Reference 12">(12)</a> <a
                    href="#ref-for-dfn-push-subscription-28" title="Reference 13">(13)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-subscription-29" title="§ 3.3.2 Subscription Deactivation">§ 3.3.2
                    Subscription Deactivation</a> <a href="#ref-for-dfn-push-subscription-30"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-push-subscription-31" title="Reference 3">(3)</a>
                <a href="#ref-for-dfn-push-subscription-32" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-push-subscription-33" title="Reference 5">(5)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-subscription-34" title="§ 3.4 Push service">§ 3.4 Push service</a> <a
                    href="#ref-for-dfn-push-subscription-35" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-subscription-36" title="§ 4. Security and privacy considerations">§ 4.
                    Security and privacy considerations</a> <a href="#ref-for-dfn-push-subscription-37"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-push-subscription-38" title="Reference 3">(3)</a>
                <a href="#ref-for-dfn-push-subscription-39" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-push-subscription-40" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-push-subscription-41" title="Reference 6">(6)</a> <a
                    href="#ref-for-dfn-push-subscription-42" title="Reference 7">(7)</a> <a
                    href="#ref-for-dfn-push-subscription-43" title="Reference 8">(8)</a> <a
                    href="#ref-for-dfn-push-subscription-44" title="Reference 9">(9)</a> <a
                    href="#ref-for-dfn-push-subscription-45" title="Reference 10">(10)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-subscription-46" title="§ 5. Push Framework">§ 5. Push Framework</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-subscription-47" title="§ 5.3 Push service use">§ 5.3 Push service use</a> <a
                    href="#ref-for-dfn-push-subscription-48" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-subscription-49" title="§ 7.1 subscribe() method">§ 7.1 subscribe()
                    method</a> <a href="#ref-for-dfn-push-subscription-50" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-push-subscription-51" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-push-subscription-52" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-subscription-53" title="§ 7.3 PushSubscriptionOptionsInit dictionary">§ 7.3
                    PushSubscriptionOptionsInit dictionary</a> <a href="#ref-for-dfn-push-subscription-54"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-push-subscription-55" title="Reference 3">(3)</a>
                <a href="#ref-for-dfn-push-subscription-56" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-push-subscription-57" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-push-subscription-58" title="Reference 6">(6)</a> <a
                    href="#ref-for-dfn-push-subscription-59" title="Reference 7">(7)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-subscription-60" title="§ 8. PushSubscription interface">§ 8.
                    PushSubscription interface</a> <a href="#ref-for-dfn-push-subscription-61"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-push-subscription-62" title="Reference 3">(3)</a>
                <a href="#ref-for-dfn-push-subscription-63" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-push-subscription-64" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-push-subscription-65" title="Reference 6">(6)</a> <a
                    href="#ref-for-dfn-push-subscription-66" title="Reference 7">(7)</a> <a
                    href="#ref-for-dfn-push-subscription-67" title="Reference 8">(8)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-subscription-68"
                    title="§ 10.1 Extensions to the ServiceWorkerGlobalScope interface">§ 10.1 Extensions to the
                    ServiceWorkerGlobalScope interface</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-subscription-69" title="§ 10.4 Receiving a Push Message">§ 10.4 Receiving a
                    Push Message</a> <a href="#ref-for-dfn-push-subscription-70" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-subscription-71" title="§ 10.5 The pushsubscriptionchange Event">§ 10.5 The
                    pushsubscriptionchange Event</a> <a href="#ref-for-dfn-push-subscription-72"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-subscription-73" title="§ 10.5.2 PushSubscriptionChangeEventInit Interface">§
                    10.5.2 PushSubscriptionChangeEventInit Interface</a> <a href="#ref-for-dfn-push-subscription-74"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-push-subscription-75" title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-push-endpoint"
        aria-label="Links in this document to definition: push endpoint">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-push-endpoint"
                aria-label="Permalink for definition: push endpoint. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-push-endpoint-1" title="§ 3.3 Push subscription">§ 3.3 Push subscription</a> <a
                    href="#ref-for-dfn-push-endpoint-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-endpoint-3" title="§ 3.4 Push service">§ 3.4 Push service</a> <a
                    href="#ref-for-dfn-push-endpoint-4" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-endpoint-5" title="§ 4. Security and privacy considerations">§ 4. Security
                    and privacy considerations</a> <a href="#ref-for-dfn-push-endpoint-6" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-endpoint-7" title="§ 5. Push Framework">§ 5. Push Framework</a> <a
                    href="#ref-for-dfn-push-endpoint-8" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-endpoint-9" title="§ 5.3 Push service use">§ 5.3 Push service use</a> <a
                    href="#ref-for-dfn-push-endpoint-10" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-endpoint-11" title="§ 8. PushSubscription interface">§ 8. PushSubscription
                    interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-subscription-expiration-time"
        aria-label="Links in this document to definition: subscription expiration time">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-subscription-expiration-time"
                aria-label="Permalink for definition: subscription expiration time. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-subscription-expiration-time-1" title="§ 8. PushSubscription interface">§ 8.
                    PushSubscription interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-create-a-push-subscription"
        aria-label="Links in this document to definition: create a push subscription">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-create-a-push-subscription"
                aria-label="Permalink for definition: create a push subscription. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-create-a-push-subscription-1" title="§ 3.3.1 Subscription Refreshes">§ 3.3.1
                    Subscription Refreshes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-create-a-push-subscription-2" title="§ 7.1 subscribe() method">§ 7.1 subscribe()
                    method</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-refresh"
        aria-label="Links in this document to definition: refresh">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-refresh"
                aria-label="Permalink for definition: refresh. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-refresh-1" title="§ 3.3 Push subscription">§ 3.3 Push subscription</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-deactivate"
        aria-label="Links in this document to definition: deactivated">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-deactivate"
                aria-label="Permalink for definition: deactivated. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-deactivate-1" title="§ 3.3 Push subscription">§ 3.3 Push subscription</a>
            </li>
            <li>
                <a href="#ref-for-dfn-deactivate-2" title="§ 3.3.1 Subscription Refreshes">§ 3.3.1 Subscription
                    Refreshes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-deactivate-3" title="§ 3.3.2 Subscription Deactivation">§ 3.3.2 Subscription
                    Deactivation</a> <a href="#ref-for-dfn-deactivate-4" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-deactivate-5" title="§ 4. Security and privacy considerations">§ 4. Security and
                    privacy considerations</a> <a href="#ref-for-dfn-deactivate-6" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-deactivate-7" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-deactivate-8" title="§ 8. PushSubscription interface">§ 8. PushSubscription
                    interface</a> <a href="#ref-for-dfn-deactivate-9" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-deactivate-10" title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-push-service"
        aria-label="Links in this document to definition: push service">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-push-service"
                aria-label="Permalink for definition: push service. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-push-service-1" title="§ Abstract">§ Abstract</a> <a
                    href="#ref-for-dfn-push-service-2" title="Reference 2">(2)</a> <a href="#ref-for-dfn-push-service-3"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-service-4" title="§ 1. Introduction">§ 1. Introduction</a> <a
                    href="#ref-for-dfn-push-service-5" title="Reference 2">(2)</a> <a href="#ref-for-dfn-push-service-6"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-push-service-7" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-service-8" title="§ 2. Dependencies">§ 2. Dependencies</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-service-9" title="§ 3.3 Push subscription">§ 3.3 Push subscription</a> <a
                    href="#ref-for-dfn-push-service-10" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-service-11" title="§ 3.3.1 Subscription Refreshes">§ 3.3.1 Subscription
                    Refreshes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-service-12" title="§ 3.3.2 Subscription Deactivation">§ 3.3.2 Subscription
                    Deactivation</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-service-13" title="§ 3.4 Push service">§ 3.4 Push service</a> <a
                    href="#ref-for-dfn-push-service-14" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-push-service-15" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-service-16" title="§ 4. Security and privacy considerations">§ 4. Security
                    and privacy considerations</a> <a href="#ref-for-dfn-push-service-17" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-push-service-18" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-service-19" title="§ 5. Push Framework">§ 5. Push Framework</a> <a
                    href="#ref-for-dfn-push-service-20" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-service-21" title="§ 7. PushManager interface">§ 7. PushManager interface</a>
                <a href="#ref-for-dfn-push-service-22" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-service-23" title="§ 7.1 subscribe() method">§ 7.1 subscribe() method</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-service-24" title="§ 7.2 PushSubscriptionOptions Interface">§ 7.2
                    PushSubscriptionOptions Interface</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-service-25" title="§ 7.3 PushSubscriptionOptionsInit dictionary">§ 7.3
                    PushSubscriptionOptionsInit dictionary</a> <a href="#ref-for-dfn-push-service-26"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-service-27" title="§ 8. PushSubscription interface">§ 8. PushSubscription
                    interface</a> <a href="#ref-for-dfn-push-service-28" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-service-29" title="§ 10.4 Receiving a Push Message">§ 10.4 Receiving a Push
                    Message</a> <a href="#ref-for-dfn-push-service-30" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-push-service-31" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-service-32" title="§ 11. Accessibility">§ 11. Accessibility</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-push"
        aria-label="Links in this document to definition: &quot;push&quot;">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-push"
                aria-label="Permalink for definition: &quot;push&quot;. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pushpermissiondescriptor"
        aria-label="Links in this document to definition: PushPermissionDescriptor">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushpermissiondescriptor"
                aria-label="Permalink for definition: PushPermissionDescriptor. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushpermissiondescriptor-1" title="§ 3.5 Permission">§ 3.5 Permission</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-pushpermissiondescriptor-uservisibleonly"
        aria-label="Links in this document to definition: userVisibleOnly">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushpermissiondescriptor-uservisibleonly"
                aria-label="Permalink for definition: userVisibleOnly. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1117437819">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushpermissiondescriptor-uservisibleonly-1" title="§ 3.5 Permission">§ 3.5
                    Permission</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushpermissiondescriptor-uservisibleonly-2" title="§ A. IDL Index">§ A. IDL
                    Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-ecdh"
        aria-label="Links in this document to definition: elliptic curve Diffie-Hellman">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-ecdh"
                aria-label="Permalink for definition: elliptic curve Diffie-Hellman. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-ecdh-1" title="§ 3.3 Push subscription">§ 3.3 Push subscription</a> <a
                    href="#ref-for-dfn-ecdh-2" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-serviceworkerregistration-pushmanager"
        aria-label="Links in this document to definition: pushManager">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-serviceworkerregistration-pushmanager"
                aria-label="Permalink for definition: pushManager. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-27231878">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-serviceworkerregistration-pushmanager-1"
                    title="§ 6. Extensions to the ServiceWorkerRegistration Interface">§ 6. Extensions to the
                    ServiceWorkerRegistration Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-serviceworkerregistration-pushmanager-2" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pushmanager"
        aria-label="Links in this document to definition: PushManager">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushmanager"
                aria-label="Permalink for definition: PushManager. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1816674501">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushmanager-1"
                    title="§ 6. Extensions to the ServiceWorkerRegistration Interface">§ 6. Extensions to the
                    ServiceWorkerRegistration Interface</a> <a href="#ref-for-dom-pushmanager-2"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushmanager-3" title="§ 7. PushManager interface">§ 7. PushManager interface</a>
                <a href="#ref-for-dom-pushmanager-4" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushmanager-5" title="§ A. IDL Index">§ A. IDL Index</a> <a
                    href="#ref-for-dom-pushmanager-6" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-pushmanager-supportedcontentencodings"
        aria-label="Links in this document to definition: supportedContentEncodings">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushmanager-supportedcontentencodings"
                aria-label="Permalink for definition: supportedContentEncodings. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1816674501">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushmanager-supportedcontentencodings-1" title="§ 7. PushManager interface">§ 7.
                    PushManager interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushmanager-supportedcontentencodings-2" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pushmanager-subscribe"
        aria-label="Links in this document to definition: subscribe()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushmanager-subscribe"
                aria-label="Permalink for definition: subscribe(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1816674501">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushmanager-subscribe-1" title="§ 7. PushManager interface">§ 7. PushManager
                    interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushmanager-subscribe-2" title="§ 7.1 subscribe() method">§ 7.1 subscribe()
                    method</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushmanager-subscribe-3" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pushmanager-getsubscription"
        aria-label="Links in this document to definition: getSubscription">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushmanager-getsubscription"
                aria-label="Permalink for definition: getSubscription. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1816674501">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushmanager-getsubscription-1" title="§ 7. PushManager interface">§ 7. PushManager
                    interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushmanager-getsubscription-2" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pushmanager-permissionstate"
        aria-label="Links in this document to definition: permissionState()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushmanager-permissionstate"
                aria-label="Permalink for definition: permissionState(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1816674501">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushmanager-permissionstate-1" title="§ 7. PushManager interface">§ 7. PushManager
                    interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushmanager-permissionstate-2" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pushsubscriptionoptions"
        aria-label="Links in this document to definition: PushSubscriptionOptions">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushsubscriptionoptions"
                aria-label="Permalink for definition: PushSubscriptionOptions. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1484551711">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushsubscriptionoptions-1" title="§ 3.3 Push subscription">§ 3.3 Push
                    subscription</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscriptionoptions-2" title="§ 3.3.1 Subscription Refreshes">§ 3.3.1
                    Subscription Refreshes</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscriptionoptions-3" title="§ 4. Security and privacy considerations">§ 4.
                    Security and privacy considerations</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscriptionoptions-4" title="§ 7.2 PushSubscriptionOptions Interface">§ 7.2
                    PushSubscriptionOptions Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscriptionoptions-5" title="§ 8. PushSubscription interface">§ 8.
                    PushSubscription interface</a> <a href="#ref-for-dom-pushsubscriptionoptions-6"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscriptionoptions-7" title="§ A. IDL Index">§ A. IDL Index</a> <a
                    href="#ref-for-dom-pushsubscriptionoptions-8" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-pushsubscriptionoptions-uservisibleonly"
        aria-label="Links in this document to definition: userVisibleOnly">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushsubscriptionoptions-uservisibleonly"
                aria-label="Permalink for definition: userVisibleOnly. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1484551711">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushsubscriptionoptions-uservisibleonly-1"
                    title="§ 7.2 PushSubscriptionOptions Interface">§ 7.2 PushSubscriptionOptions Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscriptionoptions-uservisibleonly-2" title="§ A. IDL Index">§ A. IDL
                    Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-pushsubscriptionoptions-applicationserverkey"
        aria-label="Links in this document to definition: applicationServerKey">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushsubscriptionoptions-applicationserverkey"
                aria-label="Permalink for definition: applicationServerKey. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1484551711">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushsubscriptionoptions-applicationserverkey-1" title="§ 3.3 Push subscription">§
                    3.3 Push subscription</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscriptionoptions-applicationserverkey-2" title="§ 7.1 subscribe() method">§
                    7.1 subscribe() method</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscriptionoptions-applicationserverkey-3"
                    title="§ 7.2 PushSubscriptionOptions Interface">§ 7.2 PushSubscriptionOptions Interface</a> <a
                    href="#ref-for-dom-pushsubscriptionoptions-applicationserverkey-4" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-pushsubscriptionoptions-applicationserverkey-5" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-pushsubscriptionoptions-applicationserverkey-6" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscriptionoptions-applicationserverkey-7"
                    title="§ 7.3 PushSubscriptionOptionsInit dictionary">§ 7.3 PushSubscriptionOptionsInit
                    dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscriptionoptions-applicationserverkey-8" title="§ A. IDL Index">§ A. IDL
                    Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pushsubscriptionoptionsinit"
        aria-label="Links in this document to definition: PushSubscriptionOptionsInit">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushsubscriptionoptionsinit"
                aria-label="Permalink for definition: PushSubscriptionOptionsInit. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-975599346">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushsubscriptionoptionsinit-1" title="§ 3.3 Push subscription">§ 3.3 Push
                    subscription</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscriptionoptionsinit-2" title="§ 7. PushManager interface">§ 7. PushManager
                    interface</a> <a href="#ref-for-dom-pushsubscriptionoptionsinit-3" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscriptionoptionsinit-4"
                    title="§ 7.3 PushSubscriptionOptionsInit dictionary">§ 7.3 PushSubscriptionOptionsInit
                    dictionary</a> <a href="#ref-for-dom-pushsubscriptionoptionsinit-5" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscriptionoptionsinit-6" title="§ A. IDL Index">§ A. IDL Index</a> <a
                    href="#ref-for-dom-pushsubscriptionoptionsinit-7" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-pushsubscriptionoptionsinit-8" title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-pushsubscriptionoptionsinit-uservisibleonly"
        aria-label="Links in this document to definition: userVisibleOnly">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushsubscriptionoptionsinit-uservisibleonly"
                aria-label="Permalink for definition: userVisibleOnly. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-975599346">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushsubscriptionoptionsinit-uservisibleonly-1" title="§ 3.5 Permission">§ 3.5
                    Permission</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscriptionoptionsinit-uservisibleonly-2" title="§ 7.1 subscribe() method">§
                    7.1 subscribe() method</a> <a href="#ref-for-dom-pushsubscriptionoptionsinit-uservisibleonly-3"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscriptionoptionsinit-uservisibleonly-4"
                    title="§ 7.3 PushSubscriptionOptionsInit dictionary">§ 7.3 PushSubscriptionOptionsInit
                    dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscriptionoptionsinit-uservisibleonly-5" title="§ A. IDL Index">§ A. IDL
                    Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-pushsubscriptionoptionsinit-applicationserverkey"
        aria-label="Links in this document to definition: applicationServerKey">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushsubscriptionoptionsinit-applicationserverkey"
                aria-label="Permalink for definition: applicationServerKey. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-975599346">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushsubscriptionoptionsinit-applicationserverkey-1"
                    title="§ 7.1 subscribe() method">§ 7.1 subscribe() method</a> <a
                    href="#ref-for-dom-pushsubscriptionoptionsinit-applicationserverkey-2" title="Reference 2">(2)</a>
                <a href="#ref-for-dom-pushsubscriptionoptionsinit-applicationserverkey-3" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-pushsubscriptionoptionsinit-applicationserverkey-4" title="Reference 4">(4)</a>
                <a href="#ref-for-dom-pushsubscriptionoptionsinit-applicationserverkey-5" title="Reference 5">(5)</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscriptionoptionsinit-applicationserverkey-6"
                    title="§ 7.3 PushSubscriptionOptionsInit dictionary">§ 7.3 PushSubscriptionOptionsInit
                    dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscriptionoptionsinit-applicationserverkey-7" title="§ A. IDL Index">§ A.
                    IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pushsubscription"
        aria-label="Links in this document to definition: PushSubscription">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushsubscription"
                aria-label="Permalink for definition: PushSubscription. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1348261679">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushsubscription-1" title="§ 3.3 Push subscription">§ 3.3 Push subscription</a> <a
                    href="#ref-for-dom-pushsubscription-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-pushsubscription-3" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-pushsubscription-4" title="Reference 4">(4)</a> <a
                    href="#ref-for-dom-pushsubscription-5" title="Reference 5">(5)</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscription-6" title="§ 3.3.1 Subscription Refreshes">§ 3.3.1 Subscription
                    Refreshes</a> <a href="#ref-for-dom-pushsubscription-7" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-pushsubscription-8" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscription-9" title="§ 4. Security and privacy considerations">§ 4. Security
                    and privacy considerations</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscription-10" title="§ 5.3 Push service use">§ 5.3 Push service use</a> <a
                    href="#ref-for-dom-pushsubscription-11" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-pushsubscription-12" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscription-13" title="§ 7. PushManager interface">§ 7. PushManager
                    interface</a> <a href="#ref-for-dom-pushsubscription-14" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscription-15" title="§ 7.1 subscribe() method">§ 7.1 subscribe() method</a>
                <a href="#ref-for-dom-pushsubscription-16" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscription-17" title="§ 8. PushSubscription interface">§ 8. PushSubscription
                    interface</a> <a href="#ref-for-dom-pushsubscription-18" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-pushsubscription-19" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-pushsubscription-20" title="Reference 4">(4)</a> <a
                    href="#ref-for-dom-pushsubscription-21" title="Reference 5">(5)</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscription-22" title="§ 8.1 PushEncryptionKeyName enumeration">§ 8.1
                    PushEncryptionKeyName enumeration</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscription-23" title="§ 10.5.1 PushSubscriptionChangeEvent Interface">§
                    10.5.1 PushSubscriptionChangeEvent Interface</a> <a href="#ref-for-dom-pushsubscription-24"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscription-25" title="§ 10.5.2 PushSubscriptionChangeEventInit Interface">§
                    10.5.2 PushSubscriptionChangeEventInit Interface</a> <a href="#ref-for-dom-pushsubscription-26"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscription-27" title="§ A. IDL Index">§ A. IDL Index</a> <a
                    href="#ref-for-dom-pushsubscription-28" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-pushsubscription-29" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-pushsubscription-30" title="Reference 4">(4)</a> <a
                    href="#ref-for-dom-pushsubscription-31" title="Reference 5">(5)</a> <a
                    href="#ref-for-dom-pushsubscription-32" title="Reference 6">(6)</a> <a
                    href="#ref-for-dom-pushsubscription-33" title="Reference 7">(7)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pushsubscription-endpoint"
        aria-label="Links in this document to definition: endpoint">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushsubscription-endpoint"
                aria-label="Permalink for definition: endpoint. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushsubscription-endpoint-1" title="§ 3.3 Push subscription">§ 3.3 Push
                    subscription</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-pushsubscription-expirationtime"
        aria-label="Links in this document to definition: expirationTime">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushsubscription-expirationtime"
                aria-label="Permalink for definition: expirationTime. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushsubscription-expirationtime-1" title="§ 3.3 Push subscription">§ 3.3 Push
                    subscription</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-pushsubscriptionjson-endpoint"
        aria-label="Links in this document to definition: endpoint">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushsubscriptionjson-endpoint"
                aria-label="Permalink for definition: endpoint. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-pushsubscriptionjson-expirationtime"
        aria-label="Links in this document to definition: expirationTime">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushsubscriptionjson-expirationtime"
                aria-label="Permalink for definition: expirationTime. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-getting-the-endpoint-attribute"
        aria-label="Links in this document to definition: getting the endpoint attribute">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-getting-the-endpoint-attribute"
                aria-label="Permalink for definition: getting the endpoint attribute. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-getting-the-endpoint-attribute-1" title="§ 8. PushSubscription interface">§ 8.
                    PushSubscription interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-getting-the-expirationtime-attribute"
        aria-label="Links in this document to definition: getting the expirationTime attribute">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-getting-the-expirationtime-attribute"
                aria-label="Permalink for definition: getting the expirationTime attribute. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-getting-the-expirationtime-attribute-1" title="§ 8. PushSubscription interface">§
                    8. PushSubscription interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pushsubscription-options"
        aria-label="Links in this document to definition: options">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushsubscription-options"
                aria-label="Permalink for definition: options. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1348261679">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushsubscription-options-1" title="§ 3.3 Push subscription">§ 3.3 Push
                    subscription</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscription-options-2" title="§ 8. PushSubscription interface">§ 8.
                    PushSubscription interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscription-options-3" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pushsubscription-getkey"
        aria-label="Links in this document to definition: getKey()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushsubscription-getkey"
                aria-label="Permalink for definition: getKey(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1348261679">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushsubscription-getkey-1" title="§ 3.3 Push subscription">§ 3.3 Push
                    subscription</a> <a href="#ref-for-dom-pushsubscription-getkey-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscription-getkey-3" title="§ 5.3 Push service use">§ 5.3 Push service
                    use</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscription-getkey-4" title="§ 8. PushSubscription interface">§ 8.
                    PushSubscription interface</a> <a href="#ref-for-dom-pushsubscription-getkey-5"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-pushsubscription-getkey-6"
                    title="Reference 3">(3)</a> <a href="#ref-for-dom-pushsubscription-getkey-7"
                    title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscription-getkey-8" title="§ 8.1 PushEncryptionKeyName enumeration">§ 8.1
                    PushEncryptionKeyName enumeration</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscription-getkey-9" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pushsubscription-unsubscribe"
        aria-label="Links in this document to definition: unsubscribe()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushsubscription-unsubscribe"
                aria-label="Permalink for definition: unsubscribe(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1348261679">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushsubscription-unsubscribe-1"
                    title="§ 7.3 PushSubscriptionOptionsInit dictionary">§ 7.3 PushSubscriptionOptionsInit
                    dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscription-unsubscribe-2" title="§ 8. PushSubscription interface">§ 8.
                    PushSubscription interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscription-unsubscribe-3" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pushsubscription-tojson"
        aria-label="Links in this document to definition: toJSON()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushsubscription-tojson"
                aria-label="Permalink for definition: toJSON(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1348261679">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushsubscription-tojson-1" title="§ 8. PushSubscription interface">§ 8.
                    PushSubscription interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscription-tojson-2" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pushsubscriptionjson"
        aria-label="Links in this document to definition: PushSubscriptionJSON">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushsubscriptionjson"
                aria-label="Permalink for definition: PushSubscriptionJSON. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1348261679">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushsubscriptionjson-1" title="§ 8. PushSubscription interface">§ 8.
                    PushSubscription interface</a> <a href="#ref-for-dom-pushsubscriptionjson-2"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-pushsubscriptionjson-3"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscriptionjson-4" title="§ A. IDL Index">§ A. IDL Index</a> <a
                    href="#ref-for-dom-pushsubscriptionjson-5" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pushsubscriptionjson-keys"
        aria-label="Links in this document to definition: keys">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushsubscriptionjson-keys"
                aria-label="Permalink for definition: keys. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1348261679">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushsubscriptionjson-keys-1" title="§ 8. PushSubscription interface">§ 8.
                    PushSubscription interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscriptionjson-keys-2" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pushencryptionkeyname"
        aria-label="Links in this document to definition: PushEncryptionKeyName">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushencryptionkeyname"
                aria-label="Permalink for definition: PushEncryptionKeyName. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-226775330">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushencryptionkeyname-1" title="§ 8. PushSubscription interface">§ 8.
                    PushSubscription interface</a> <a href="#ref-for-dom-pushencryptionkeyname-2"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushencryptionkeyname-3" title="§ 8.1 PushEncryptionKeyName enumeration">§ 8.1
                    PushEncryptionKeyName enumeration</a> <a href="#ref-for-dom-pushencryptionkeyname-4"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushencryptionkeyname-5" title="§ A. IDL Index">§ A. IDL Index</a> <a
                    href="#ref-for-dom-pushencryptionkeyname-6" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pushencryptionkeyname-p256dh"
        aria-label="Links in this document to definition: p256dh">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushencryptionkeyname-p256dh"
                aria-label="Permalink for definition: p256dh. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-226775330">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushencryptionkeyname-p256dh-1" title="§ 3.3 Push subscription">§ 3.3 Push
                    subscription</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushencryptionkeyname-p256dh-2" title="§ 5.3 Push service use">§ 5.3 Push service
                    use</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushencryptionkeyname-p256dh-3" title="§ 8. PushSubscription interface">§ 8.
                    PushSubscription interface</a> <a href="#ref-for-dom-pushencryptionkeyname-p256dh-4"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushencryptionkeyname-p256dh-5" title="§ 8.1 PushEncryptionKeyName enumeration">§
                    8.1 PushEncryptionKeyName enumeration</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushencryptionkeyname-p256dh-6" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pushencryptionkeyname-auth"
        aria-label="Links in this document to definition: auth">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushencryptionkeyname-auth"
                aria-label="Permalink for definition: auth. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-226775330">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushencryptionkeyname-auth-1" title="§ 3.3 Push subscription">§ 3.3 Push
                    subscription</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushencryptionkeyname-auth-2" title="§ 8. PushSubscription interface">§ 8.
                    PushSubscription interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushencryptionkeyname-auth-3" title="§ 8.1 PushEncryptionKeyName enumeration">§
                    8.1 PushEncryptionKeyName enumeration</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushencryptionkeyname-auth-4" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pushmessagedata"
        aria-label="Links in this document to definition: PushMessageData">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushmessagedata"
                aria-label="Permalink for definition: PushMessageData. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1430759589">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushmessagedata-1" title="§ 9. PushMessageData interface">§ 9. PushMessageData
                    interface</a> <a href="#ref-for-dom-pushmessagedata-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushmessagedata-3" title="§ 10.2 PushEvent Interface">§ 10.2 PushEvent
                    Interface</a> <a href="#ref-for-dom-pushmessagedata-4" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushmessagedata-5" title="§ 10.4 Receiving a Push Message">§ 10.4 Receiving a Push
                    Message</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushmessagedata-6" title="§ A. IDL Index">§ A. IDL Index</a> <a
                    href="#ref-for-dom-pushmessagedata-7" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-bytes"
        aria-label="Links in this document to definition: bytes">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-bytes"
                aria-label="Permalink for definition: bytes. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-bytes-1" title="§ 9. PushMessageData interface">§ 9. PushMessageData interface</a>
                <a href="#ref-for-dfn-bytes-2" title="Reference 2">(2)</a> <a href="#ref-for-dfn-bytes-3"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-bytes-4" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-bytes-5" title="Reference 5">(5)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-bytes-6" title="§ 10.4 Receiving a Push Message">§ 10.4 Receiving a Push
                    Message</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pushmessagedata-arraybuffer"
        aria-label="Links in this document to definition: arrayBuffer()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushmessagedata-arraybuffer"
                aria-label="Permalink for definition: arrayBuffer(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1430759589">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushmessagedata-arraybuffer-1" title="§ 9. PushMessageData interface">§ 9.
                    PushMessageData interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushmessagedata-arraybuffer-2" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pushmessagedata-blob"
        aria-label="Links in this document to definition: blob()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushmessagedata-blob"
                aria-label="Permalink for definition: blob(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1430759589">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushmessagedata-blob-1" title="§ 9. PushMessageData interface">§ 9.
                    PushMessageData interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushmessagedata-blob-2" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pushmessagedata-bytes"
        aria-label="Links in this document to definition: bytes()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushmessagedata-bytes"
                aria-label="Permalink for definition: bytes(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1430759589">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushmessagedata-bytes-1" title="§ 9. PushMessageData interface">§ 9.
                    PushMessageData interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushmessagedata-bytes-2" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pushmessagedata-json"
        aria-label="Links in this document to definition: json()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushmessagedata-json"
                aria-label="Permalink for definition: json(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1430759589">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushmessagedata-json-1" title="§ 9. PushMessageData interface">§ 9.
                    PushMessageData interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushmessagedata-json-2" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pushmessagedata-text"
        aria-label="Links in this document to definition: text()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushmessagedata-text"
                aria-label="Permalink for definition: text(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1430759589">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushmessagedata-text-1" title="§ 9. PushMessageData interface">§ 9.
                    PushMessageData interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushmessagedata-text-2" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-extract-a-byte-sequence"
        aria-label="Links in this document to definition: extract a byte sequence">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-extract-a-byte-sequence"
                aria-label="Permalink for definition: extract a byte sequence. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-extract-a-byte-sequence-1" title="§ 10.2 PushEvent Interface">§ 10.2 PushEvent
                    Interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-serviceworkerglobalscope-onpush"
        aria-label="Links in this document to definition: onpush">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-serviceworkerglobalscope-onpush"
                aria-label="Permalink for definition: onpush. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-801193280">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-serviceworkerglobalscope-onpush-1"
                    title="§ 10.1 Extensions to the ServiceWorkerGlobalScope interface">§ 10.1 Extensions to the
                    ServiceWorkerGlobalScope interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-serviceworkerglobalscope-onpush-2" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-serviceworkerglobalscope-onpushsubscriptionchange"
        aria-label="Links in this document to definition: onpushsubscriptionchange">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-serviceworkerglobalscope-onpushsubscriptionchange"
                aria-label="Permalink for definition: onpushsubscriptionchange. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-801193280">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-serviceworkerglobalscope-onpushsubscriptionchange-1"
                    title="§ 10.1 Extensions to the ServiceWorkerGlobalScope interface">§ 10.1 Extensions to the
                    ServiceWorkerGlobalScope interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-serviceworkerglobalscope-onpushsubscriptionchange-2" title="§ A. IDL Index">§ A.
                    IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pushevent"
        aria-label="Links in this document to definition: PushEvent">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushevent"
                aria-label="Permalink for definition: PushEvent. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-302405565">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushevent-1" title="§ 10.2 PushEvent Interface">§ 10.2 PushEvent Interface</a> <a
                    href="#ref-for-dom-pushevent-2" title="Reference 2">(2)</a> <a href="#ref-for-dom-pushevent-3"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushevent-4" title="§ 10.4 Receiving a Push Message">§ 10.4 Receiving a Push
                    Message</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushevent-5" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pushevent-constructor"
        aria-label="Links in this document to definition: constructor">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushevent-constructor"
                aria-label="Permalink for definition: constructor. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-302405565">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushevent-constructor-1" title="§ 10.2 PushEvent Interface">§ 10.2 PushEvent
                    Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushevent-constructor-2" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pushevent-data"
        aria-label="Links in this document to definition: data">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushevent-data"
                aria-label="Permalink for definition: data. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-302405565">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushevent-data-1" title="§ 10.2 PushEvent Interface">§ 10.2 PushEvent
                    Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushevent-data-2" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pusheventinit"
        aria-label="Links in this document to definition: PushEventInit">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pusheventinit"
                aria-label="Permalink for definition: PushEventInit. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-173618782">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pusheventinit-1" title="§ 10.2 PushEvent Interface">§ 10.2 PushEvent Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-pusheventinit-2" title="§ 10.3 PushEventInit dictionary">§ 10.3 PushEventInit
                    dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-pusheventinit-3" title="§ A. IDL Index">§ A. IDL Index</a> <a
                    href="#ref-for-dom-pusheventinit-4" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pushmessagedatainit"
        aria-label="Links in this document to definition: PushMessageDataInit">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushmessagedatainit"
                aria-label="Permalink for definition: PushMessageDataInit. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushmessagedatainit-1" title="§ 10.3 PushEventInit dictionary">§ 10.3
                    PushEventInit dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushmessagedatainit-2" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pusheventinit-data"
        aria-label="Links in this document to definition: data">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pusheventinit-data"
                aria-label="Permalink for definition: data. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-173618782">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pusheventinit-data-1" title="§ 10.3 PushEventInit dictionary">§ 10.3 PushEventInit
                    dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-pusheventinit-data-2" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-pushsubscriptionchange"
        aria-label="Links in this document to definition: pushsubscriptionchange">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-pushsubscriptionchange"
                aria-label="Permalink for definition: pushsubscriptionchange. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-pushsubscriptionchange-1" title="§ 10.5 The pushsubscriptionchange Event">§ 10.5
                    The pushsubscriptionchange Event</a>
            </li>
            <li>
                <a href="#ref-for-dfn-pushsubscriptionchange-2"
                    title="§ 10.5.2 PushSubscriptionChangeEventInit Interface">§ 10.5.2 PushSubscriptionChangeEventInit
                    Interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-fire-the-pushsubscriptionchange-event"
        aria-label="Links in this document to definition: fire the &quot;pushsubscriptionchange&quot; event">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-fire-the-pushsubscriptionchange-event"
                aria-label="Permalink for definition: fire the &quot;pushsubscriptionchange&quot; event. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-fire-the-pushsubscriptionchange-event-1" title="§ 3.3 Push subscription">§ 3.3
                    Push subscription</a>
            </li>
            <li>
                <a href="#ref-for-dfn-fire-the-pushsubscriptionchange-event-2" title="§ 3.3.1 Subscription Refreshes">§
                    3.3.1 Subscription Refreshes</a> <a href="#ref-for-dfn-fire-the-pushsubscriptionchange-event-3"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-fire-the-pushsubscriptionchange-event-4"
                    title="§ 4. Security and privacy considerations">§ 4. Security and privacy considerations</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pushsubscriptionchangeevent"
        aria-label="Links in this document to definition: PushSubscriptionChangeEvent">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushsubscriptionchangeevent"
                aria-label="Permalink for definition: PushSubscriptionChangeEvent. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-2104077905">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushsubscriptionchangeevent-1" title="§ 10.5 The pushsubscriptionchange Event">§
                    10.5 The pushsubscriptionchange Event</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscriptionchangeevent-2"
                    title="§ 10.5.1 PushSubscriptionChangeEvent Interface">§ 10.5.1 PushSubscriptionChangeEvent
                    Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscriptionchangeevent-3" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-pushsubscriptionchangeevent-constructor"
        aria-label="Links in this document to definition: constructor">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushsubscriptionchangeevent-constructor"
                aria-label="Permalink for definition: constructor. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-pushsubscriptionchangeevent-newsubscription"
        aria-label="Links in this document to definition: newSubscription">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushsubscriptionchangeevent-newsubscription"
                aria-label="Permalink for definition: newSubscription. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-2104077905">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushsubscriptionchangeevent-newsubscription-1"
                    title="§ 10.5.1 PushSubscriptionChangeEvent Interface">§ 10.5.1 PushSubscriptionChangeEvent
                    Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscriptionchangeevent-newsubscription-2" title="§ A. IDL Index">§ A. IDL
                    Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-pushsubscriptionchangeevent-oldsubscription"
        aria-label="Links in this document to definition: oldSubscription">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushsubscriptionchangeevent-oldsubscription"
                aria-label="Permalink for definition: oldSubscription. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-2104077905">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushsubscriptionchangeevent-oldsubscription-1"
                    title="§ 10.5.1 PushSubscriptionChangeEvent Interface">§ 10.5.1 PushSubscriptionChangeEvent
                    Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscriptionchangeevent-oldsubscription-2" title="§ A. IDL Index">§ A. IDL
                    Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-pushsubscriptionchangeeventinit"
        aria-label="Links in this document to definition: PushSubscriptionChangeEventInit">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushsubscriptionchangeeventinit"
                aria-label="Permalink for definition: PushSubscriptionChangeEventInit. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1842180883">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushsubscriptionchangeeventinit-1"
                    title="§ 10.5.1 PushSubscriptionChangeEvent Interface">§ 10.5.1 PushSubscriptionChangeEvent
                    Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscriptionchangeeventinit-2"
                    title="§ 10.5.2 PushSubscriptionChangeEventInit Interface">§ 10.5.2 PushSubscriptionChangeEventInit
                    Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscriptionchangeeventinit-3" title="§ A. IDL Index">§ A. IDL Index</a> <a
                    href="#ref-for-dom-pushsubscriptionchangeeventinit-4" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-pushsubscriptionchangeeventinit-newsubscription"
        aria-label="Links in this document to definition: newSubscription">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushsubscriptionchangeeventinit-newsubscription"
                aria-label="Permalink for definition: newSubscription. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1842180883">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushsubscriptionchangeeventinit-newsubscription-1"
                    title="§ 10.5.2 PushSubscriptionChangeEventInit Interface">§ 10.5.2 PushSubscriptionChangeEventInit
                    Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscriptionchangeeventinit-newsubscription-2" title="§ A. IDL Index">§ A. IDL
                    Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-pushsubscriptionchangeeventinit-oldsubscription"
        aria-label="Links in this document to definition: oldSubscription">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushsubscriptionchangeeventinit-oldsubscription"
                aria-label="Permalink for definition: oldSubscription. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1842180883">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushsubscriptionchangeeventinit-oldsubscription-1"
                    title="§ 10.5.2 PushSubscriptionChangeEventInit Interface">§ 10.5.2 PushSubscriptionChangeEventInit
                    Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscriptionchangeeventinit-oldsubscription-2" title="§ A. IDL Index">§ A. IDL
                    Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-user-agent"
        aria-label="Links in this document to definition: user agent">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-user-agent"
                aria-label="Permalink for definition: user agent. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-user-agent-1" title="§ Abstract">§ Abstract</a> <a
                    href="#ref-for-dfn-user-agent-2" title="Reference 2">(2)</a> <a href="#ref-for-dfn-user-agent-3"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-user-agent-4" title="§ 1. Introduction">§ 1. Introduction</a> <a
                    href="#ref-for-dfn-user-agent-5" title="Reference 2">(2)</a> <a href="#ref-for-dfn-user-agent-6"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-user-agent-7" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-user-agent-8" title="Reference 5">(5)</a> <a href="#ref-for-dfn-user-agent-9"
                    title="Reference 6">(6)</a> <a href="#ref-for-dfn-user-agent-10" title="Reference 7">(7)</a> <a
                    href="#ref-for-dfn-user-agent-11" title="Reference 8">(8)</a> <a href="#ref-for-dfn-user-agent-12"
                    title="Reference 9">(9)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-user-agent-13" title="§ 2. Dependencies">§ 2. Dependencies</a>
            </li>
            <li>
                <a href="#ref-for-dfn-user-agent-14" title="§ 3.3 Push subscription">§ 3.3 Push subscription</a> <a
                    href="#ref-for-dfn-user-agent-15" title="Reference 2">(2)</a> <a href="#ref-for-dfn-user-agent-16"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-user-agent-17" title="§ 3.3.1 Subscription Refreshes">§ 3.3.1 Subscription
                    Refreshes</a> <a href="#ref-for-dfn-user-agent-18" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-user-agent-19" title="Reference 3">(3)</a> <a href="#ref-for-dfn-user-agent-20"
                    title="Reference 4">(4)</a> <a href="#ref-for-dfn-user-agent-21" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-user-agent-22" title="Reference 6">(6)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-user-agent-23" title="§ 3.3.2 Subscription Deactivation">§ 3.3.2 Subscription
                    Deactivation</a>
            </li>
            <li>
                <a href="#ref-for-dfn-user-agent-24" title="§ 3.4 Push service">§ 3.4 Push service</a> <a
                    href="#ref-for-dfn-user-agent-25" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-user-agent-26" title="§ 4. Security and privacy considerations">§ 4. Security and
                    privacy considerations</a> <a href="#ref-for-dfn-user-agent-27" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-user-agent-28" title="Reference 3">(3)</a> <a href="#ref-for-dfn-user-agent-29"
                    title="Reference 4">(4)</a> <a href="#ref-for-dfn-user-agent-30" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-user-agent-31" title="Reference 6">(6)</a> <a href="#ref-for-dfn-user-agent-32"
                    title="Reference 7">(7)</a> <a href="#ref-for-dfn-user-agent-33" title="Reference 8">(8)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-user-agent-34" title="§ 5. Push Framework">§ 5. Push Framework</a> <a
                    href="#ref-for-dfn-user-agent-35" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-user-agent-36" title="§ 7. PushManager interface">§ 7. PushManager interface</a>
            </li>
            <li>
                <a href="#ref-for-dfn-user-agent-37" title="§ 7.3 PushSubscriptionOptionsInit dictionary">§ 7.3
                    PushSubscriptionOptionsInit dictionary</a> <a href="#ref-for-dfn-user-agent-38"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-user-agent-39" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-user-agent-40" title="Reference 4">(4)</a> <a href="#ref-for-dfn-user-agent-41"
                    title="Reference 5">(5)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-user-agent-42" title="§ 8. PushSubscription interface">§ 8. PushSubscription
                    interface</a> <a href="#ref-for-dfn-user-agent-43" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-user-agent-44" title="Reference 3">(3)</a> <a href="#ref-for-dfn-user-agent-45"
                    title="Reference 4">(4)</a> <a href="#ref-for-dfn-user-agent-46" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-user-agent-47" title="Reference 6">(6)</a> <a href="#ref-for-dfn-user-agent-48"
                    title="Reference 7">(7)</a> <a href="#ref-for-dfn-user-agent-49" title="Reference 8">(8)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-user-agent-50" title="§ 10.3 PushEventInit dictionary">§ 10.3 PushEventInit
                    dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dfn-user-agent-51" title="§ 10.4 Receiving a Push Message">§ 10.4 Receiving a Push
                    Message</a>
            </li>
            <li>
                <a href="#ref-for-dfn-user-agent-52" title="§ 10.5 The pushsubscriptionchange Event">§ 10.5 The
                    pushsubscriptionchange Event</a>
            </li>
            <li>
                <a href="#ref-for-dfn-user-agent-53" title="§ 10.5.2 PushSubscriptionChangeEventInit Interface">§ 10.5.2
                    PushSubscriptionChangeEventInit Interface</a>
            </li>
        </ul>
    </div>
    <script id="respec-dfn-panel">(() => {
            // @ts-check
            if (document.respec) {
                document.respec.ready.then(setupPanel);
            } else {
                setupPanel();
            }

            function setupPanel() {
                const listener = panelListener();
                document.body.addEventListener("keydown", listener);
                document.body.addEventListener("click", listener);
            }

            function panelListener() {
                /** @type {HTMLElement} */
                let panel = null;
                return event => {
                    const { target, type } = event;

                    if (!(target instanceof HTMLElement)) return;

                    // For keys, we only care about Enter key to activate the panel
                    // otherwise it's activated via a click.
                    if (type === "keydown" && event.key !== "Enter") return;

                    const action = deriveAction(event);

                    switch (action) {
                        case "show": {
                            hidePanel(panel);
                            /** @type {HTMLElement} */
                            const dfn = target.closest("dfn, .index-term");
                            panel = document.getElementById(`dfn-panel-for-${dfn.id}`);
                            const coords = deriveCoordinates(event);
                            displayPanel(dfn, panel, coords);
                            break;
                        }
                        case "dock": {
                            panel.style.left = null;
                            panel.style.top = null;
                            panel.classList.add("docked");
                            break;
                        }
                        case "hide": {
                            hidePanel(panel);
                            panel = null;
                            break;
                        }
                    }
                };
            }

            /**
             * @param {MouseEvent|KeyboardEvent} event
             */
            function deriveCoordinates(event) {
                const target = /** @type HTMLElement */ (event.target);

                // We prevent synthetic AT clicks from putting
                // the dialog in a weird place. The AT events sometimes
                // lack coordinates, so they have clientX/Y = 0
                const rect = target.getBoundingClientRect();
                if (
                    event instanceof MouseEvent &&
                    event.clientX >= rect.left &&
                    event.clientY >= rect.top
                ) {
                    // The event probably happened inside the bounding rect...
                    return { x: event.clientX, y: event.clientY };
                }

                // Offset to the middle of the element
                const x = rect.x + rect.width / 2;
                // Placed at the bottom of the element
                const y = rect.y + rect.height;
                return { x, y };
            }

            /**
             * @param {Event} event
             */
            function deriveAction(event) {
                const target = /** @type {HTMLElement} */ (event.target);
                const hitALink = !!target.closest("a");
                if (target.closest("dfn:not([data-cite]), .index-term")) {
                    return hitALink ? "none" : "show";
                }
                if (target.closest(".dfn-panel")) {
                    if (hitALink) {
                        return target.classList.contains("self-link") ? "hide" : "dock";
                    }
                    const panel = target.closest(".dfn-panel");
                    return panel.classList.contains("docked") ? "hide" : "none";
                }
                if (document.querySelector(".dfn-panel:not([hidden])")) {
                    return "hide";
                }
                return "none";
            }

            /**
             * @param {HTMLElement} dfn
             * @param {HTMLElement} panel
             * @param {{ x: number, y: number }} clickPosition
             */
            function displayPanel(dfn, panel, { x, y }) {
                panel.hidden = false;
                // distance (px) between edge of panel and the pointing triangle (caret)
                const MARGIN = 20;

                const dfnRects = dfn.getClientRects();
                // Find the `top` offset when the `dfn` can be spread across multiple lines
                let closestTop = 0;
                let minDiff = Infinity;
                for (const rect of dfnRects) {
                    const { top, bottom } = rect;
                    const diffFromClickY = Math.abs((top + bottom) / 2 - y);
                    if (diffFromClickY < minDiff) {
                        minDiff = diffFromClickY;
                        closestTop = top;
                    }
                }

                const top = window.scrollY + closestTop + dfnRects[0].height;
                const left = x - MARGIN;
                panel.style.left = `${left}px`;
                panel.style.top = `${top}px`;

                // Find if the panel is flowing out of the window
                const panelRect = panel.getBoundingClientRect();
                const SCREEN_WIDTH = Math.min(window.innerWidth, window.screen.width);
                if (panelRect.right > SCREEN_WIDTH) {
                    const newLeft = Math.max(MARGIN, x + MARGIN - panelRect.width);
                    const newCaretOffset = left - newLeft;
                    panel.style.left = `${newLeft}px`;
                    /** @type {HTMLElement} */
                    const caret = panel.querySelector(".caret");
                    caret.style.left = `${newCaretOffset}px`;
                }

                // As it's a dialog, we trap focus.
                // TODO: when <dialog> becomes a implemented, we should really
                // use that.
                trapFocus(panel, dfn);
            }

            /**
             * @param {HTMLElement} panel
             * @param {HTMLElement} dfn
             * @returns
             */
            function trapFocus(panel, dfn) {
                /** @type NodeListOf<HTMLAnchorElement> elements */
                const anchors = panel.querySelectorAll("a[href]");
                // No need to trap focus
                if (!anchors.length) return;

                // Move focus to first anchor element
                const first = anchors.item(0);
                first.focus();

                const trapListener = createTrapListener(anchors, panel, dfn);
                panel.addEventListener("keydown", trapListener);

                // Hiding the panel releases the trap
                const mo = new MutationObserver(records => {
                    const [record] = records;
                    const target = /** @type HTMLElement */ (record.target);
                    if (target.hidden) {
                        panel.removeEventListener("keydown", trapListener);
                        mo.disconnect();
                    }
                });
                mo.observe(panel, { attributes: true, attributeFilter: ["hidden"] });
            }

            /**
             *
             * @param {NodeListOf<HTMLAnchorElement>} anchors
             * @param {HTMLElement} panel
             * @param {HTMLElement} dfn
             * @returns
             */
            function createTrapListener(anchors, panel, dfn) {
                const lastIndex = anchors.length - 1;
                let currentIndex = 0;
                return event => {
                    switch (event.key) {
                        // Hitting "Tab" traps us in a nice loop around elements.
                        case "Tab": {
                            event.preventDefault();
                            currentIndex += event.shiftKey ? -1 : +1;
                            if (currentIndex < 0) {
                                currentIndex = lastIndex;
                            } else if (currentIndex > lastIndex) {
                                currentIndex = 0;
                            }
                            anchors.item(currentIndex).focus();
                            break;
                        }

                        // Hitting "Enter" on an anchor releases the trap.
                        case "Enter":
                            hidePanel(panel);
                            break;

                        // Hitting "Escape" returns focus to dfn.
                        case "Escape":
                            hidePanel(panel);
                            dfn.focus();
                            return;
                    }
                };
            }

            /** @param {HTMLElement} panel */
            function hidePanel(panel) {
                if (!panel) return;
                panel.hidden = true;
                panel.classList.remove("docked");
            }
        })()</script>
    <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
    <script src="/dropdown.js"></script>
</body>

</html>