<!DOCTYPE html>
<html lang="zh-hans">

<head>
    <meta charset="utf-8">
    <meta name="generator" content="ReSpec 35.4.3">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <style>
        span.example-title {
            text-transform: none
        }

        :is(aside, div).example,
        div.illegal-example {
            padding: .5em;
            margin: 1em 0;
            position: relative;
            clear: both
        }

        div.illegal-example {
            color: red
        }

        div.illegal-example p {
            color: #000
        }

        aside.example div.example {
            border-left-width: .1em;
            border-color: #999;
            background: #fff
        }
    </style>
    <style>
        .issue-label {
            text-transform: initial
        }

        .warning>p:first-child {
            margin-top: 0
        }

        .warning {
            padding: .5em;
            border-left-width: .5em;
            border-left-style: solid
        }

        span.warning {
            padding: .1em .5em .15em
        }

        .issue.closed span.issue-number {
            text-decoration: line-through
        }

        .issue.closed span.issue-number::after {
            content: " (Closed)";
            font-size: smaller
        }

        .warning {
            border-color: #f11;
            border-color: var(--warning-border, #f11);
            border-width: .2em;
            border-style: solid;
            background: #fbe9e9;
            background: var(--warning-bg, #fbe9e9);
            color: #000;
            color: var(--text, #000)
        }

        .warning-title:before {
            content: "⚠";
            font-size: 1.3em;
            float: left;
            padding-right: .3em;
            margin-top: -.3em
        }

        li.task-list-item {
            list-style: none
        }

        input.task-list-item-checkbox {
            margin: 0 .35em .25em -1.6em;
            vertical-align: middle
        }

        .issue a.respec-gh-label {
            padding: 5px;
            margin: 0 2px 0 2px;
            font-size: 10px;
            text-transform: none;
            text-decoration: none;
            font-weight: 700;
            border-radius: 4px;
            position: relative;
            bottom: 2px;
            border: none;
            display: inline-block
        }
    </style>
    <style>
        pre.idl {
            padding: 1em;
            position: relative
        }

        pre.idl>code {
            color: #000;
            color: var(--text, #000)
        }

        @media print {
            pre.idl {
                white-space: pre-wrap
            }
        }

        .idlHeader {
            display: block;
            width: 150px;
            background: #8ccbf2;
            background: var(--def-border, #8ccbf2);
            color: #fff;
            color: var(--defrow-border, #fff);
            font-family: sans-serif;
            font-weight: 700;
            margin: -1em 0 1em -1em;
            height: 28px;
            line-height: 28px
        }

        .idlHeader a.self-link {
            margin-left: .3cm;
            text-decoration: none;
            border-bottom: none;
            color: inherit
        }

        .idlID {
            font-weight: 700;
            color: #005a9c
        }

        .idlType {
            color: #005a9c
        }

        .idlName {
            color: #ff4500
        }

        .idlName a {
            color: #ff4500;
            border-bottom: 1px dotted #ff4500;
            text-decoration: none
        }

        a.idlEnumItem {
            color: #000;
            border-bottom: 1px dotted #ccc;
            text-decoration: none
        }

        .idlSuperclass {
            font-style: italic;
            color: #005a9c
        }

        .idlDefaultValue,
        .idlParamName {
            font-style: italic
        }

        .extAttr {
            color: #666
        }

        .idlSectionComment {
            color: gray
        }

        .idlIncludes a {
            font-weight: 700
        }

        .respec-button-copy-paste:focus {
            text-decoration: none;
            border-color: #51a7e8;
            outline: 0;
            box-shadow: 0 0 5px rgba(81, 167, 232, .5)
        }

        .respec-button-copy-paste:is(:focus:hover, .selected:focus) {
            border-color: #51a7e8
        }

        .respec-button-copy-paste:is(:hover, :active, .zeroclipboard-is-hover, .zeroclipboard-is-active) {
            text-decoration: none;
            background-color: #ddd;
            background-image: linear-gradient(#eee, #ddd);
            border-color: #ccc
        }

        .respec-button-copy-paste:is(:active, .selected, .zeroclipboard-is-active) {
            background-color: #dcdcdc;
            background-image: none;
            border-color: #b5b5b5;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, .15)
        }

        .respec-button-copy-paste.selected:hover {
            background-color: #cfcfcf
        }

        .respec-button-copy-paste:is(:disabled, :disabled:hover, .disabled, .disabled:hover) {
            color: rgba(102, 102, 102, .5);
            cursor: default;
            background-color: rgba(229, 229, 229, .5);
            background-image: none;
            border-color: rgba(197, 197, 197, .5);
            box-shadow: none
        }

        @media print {
            .respec-button-copy-paste {
                visibility: hidden
            }
        }
    </style>
    <style>
        dfn {
            cursor: pointer
        }

        .dfn-panel {
            position: absolute;
            z-index: 35;
            min-width: 300px;
            max-width: 500px;
            padding: .5em .75em;
            margin-top: .6em;
            font-family: "Helvetica Neue", sans-serif;
            font-size: small;
            background: #fff;
            background: var(--indextable-hover-bg, #fff);
            color: #000;
            color: var(--text, #000);
            box-shadow: 0 1em 3em -.4em rgba(0, 0, 0, .3), 0 0 1px 1px rgba(0, 0, 0, .05);
            box-shadow: 0 1em 3em -.4em var(--tocsidebar-shadow, rgba(0, 0, 0, .3)), 0 0 1px 1px var(--tocsidebar-shadow, rgba(0, 0, 0, .05));
            border-radius: 2px
        }

        .dfn-panel:not(.docked)>.caret {
            position: absolute;
            top: -9px
        }

        .dfn-panel:not(.docked)>.caret::after,
        .dfn-panel:not(.docked)>.caret::before {
            content: "";
            position: absolute;
            border: 10px solid transparent;
            border-top: 0;
            border-bottom: 10px solid #fff;
            border-bottom-color: var(--indextable-hover-bg, #fff);
            top: 0
        }

        .dfn-panel:not(.docked)>.caret::before {
            border-bottom: 9px solid #a2a9b1;
            border-bottom-color: var(--indextable-hover-bg, #a2a9b1)
        }

        .dfn-panel * {
            margin: 0
        }

        .dfn-panel b {
            display: block;
            color: #000;
            color: var(--text, #000);
            margin-top: .25em
        }

        .dfn-panel ul a[href] {
            color: #333;
            color: var(--text, #333)
        }

        .dfn-panel>div {
            display: flex
        }

        .dfn-panel a.self-link {
            font-weight: 700;
            margin-right: auto
        }

        .dfn-panel .marker {
            padding: .1em;
            margin-left: .5em;
            border-radius: .2em;
            text-align: center;
            white-space: nowrap;
            font-size: 90%;
            color: #040b1c
        }

        .dfn-panel .marker.dfn-exported {
            background: #d1edfd;
            box-shadow: 0 0 0 .125em #1ca5f940
        }

        .dfn-panel .marker.idl-block {
            background: #8ccbf2;
            box-shadow: 0 0 0 .125em #0670b161
        }

        .dfn-panel a:not(:hover) {
            text-decoration: none !important;
            border-bottom: none !important
        }

        .dfn-panel a[href]:hover {
            border-bottom-width: 1px
        }

        .dfn-panel ul {
            padding: 0
        }

        .dfn-panel li {
            margin-left: 1em
        }

        .dfn-panel.docked {
            position: fixed;
            left: .5em;
            top: unset;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - .75em * 2 - .5em - .2em * 2);
            max-height: 30vh;
            overflow: auto
        }
    </style>

    <title>推送 API</title>


    <style id="respec-mainstyle">
        @keyframes pop {
            0% {
                transform: scale(1, 1)
            }

            25% {
                transform: scale(1.25, 1.25);
                opacity: .75
            }

            100% {
                transform: scale(1, 1)
            }
        }

        a.internalDFN {
            color: inherit;
            border-bottom: 1px solid #99c;
            text-decoration: none
        }

        a.externalDFN {
            color: inherit;
            border-bottom: 1px dotted #ccc;
            text-decoration: none
        }

        a.bibref {
            text-decoration: none
        }

        .respec-offending-element:target {
            animation: pop .25s ease-in-out 0s 1
        }

        .respec-offending-element,
        a[href].respec-offending-element {
            text-decoration: red wavy underline
        }

        @supports not (text-decoration:red wavy underline) {
            .respec-offending-element:not(pre) {
                display: inline-block
            }

            .respec-offending-element {
                background: url(data:image/gif;base64,R0lGODdhBAADAPEAANv///8AAP///wAAACwAAAAABAADAEACBZQjmIAFADs=) bottom repeat-x
            }
        }

        #references :target {
            background: #eaf3ff;
            animation: pop .4s ease-in-out 0s 1
        }

        cite .bibref {
            font-style: italic
        }

        a[href].orcid {
            padding-left: 4px;
            padding-right: 4px
        }

        a[href].orcid>svg {
            margin-bottom: -2px
        }

        ol.tof,
        ul.tof {
            list-style: none outside none
        }

        .caption {
            margin-top: .5em;
            font-style: italic
        }

        #issue-summary>ul {
            column-count: 2
        }

        #issue-summary li {
            list-style: none;
            display: inline-block
        }

        details.respec-tests-details {
            margin-left: 1em;
            display: inline-block;
            vertical-align: top
        }

        details.respec-tests-details>* {
            padding-right: 2em
        }

        details.respec-tests-details[open] {
            z-index: 999999;
            position: absolute;
            border: thin solid #cad3e2;
            border-radius: .3em;
            background-color: #fff;
            padding-bottom: .5em
        }

        details.respec-tests-details[open]>summary {
            border-bottom: thin solid #cad3e2;
            padding-left: 1em;
            margin-bottom: 1em;
            line-height: 2em
        }

        details.respec-tests-details>ul {
            width: 100%;
            margin-top: -.3em
        }

        details.respec-tests-details>li {
            padding-left: 1em
        }

        .self-link:hover {
            opacity: 1;
            text-decoration: none;
            background-color: transparent
        }

        aside.example .marker>a.self-link {
            color: inherit
        }

        .header-wrapper {
            display: flex;
            align-items: baseline
        }

        :is(h2, h3, h4, h5, h6):not(#toc>h2, #abstract>h2, #sotd>h2, .head>h2) {
            position: relative;
            left: -.5em
        }

        :is(h2, h3, h4, h5, h6):not(#toch2)+a.self-link {
            color: inherit;
            order: -1;
            position: relative;
            left: -1.1em;
            font-size: 1rem;
            opacity: .5
        }

        :is(h2, h3, h4, h5, h6)+a.self-link::before {
            content: "§";
            text-decoration: none;
            color: var(--heading-text)
        }

        :is(h2, h3)+a.self-link {
            top: -.2em
        }

        :is(h4, h5, h6)+a.self-link::before {
            color: #000
        }

        @media (max-width:767px) {
            dd {
                margin-left: 0
            }
        }

        @media print {
            .removeOnSave {
                display: none
            }
        }
    </style>


    <meta name="color-scheme" content="light">
    <meta name="revision" content="54d5cb1f2f7f7295ca39e5cc5756213fb113e09b">
    <meta name="description" content="The Push API enables sending of a push message to a web application via
        a push service. An application server can send a push message at any
        time, even when a web application or user agent is inactive. The push service
        ensures reliable and efficient delivery to the user agent. Push messages are
        delivered to a Service Worker that runs in the origin of the web application, which
        can use the information in the message to update local state or display a notification to
        the user.">
    <link rel="canonical" href="https://www.w3.org/TR/push-api/">
    <style>
        .hljs {
            --base: #fafafa;
            --mono-1: #383a42;
            --mono-2: #686b77;
            --mono-3: #717277;
            --hue-1: #0b76c5;
            --hue-2: #336ae3;
            --hue-3: #a626a4;
            --hue-4: #42803c;
            --hue-5: #ca4706;
            --hue-5-2: #c91243;
            --hue-6: #986801;
            --hue-6-2: #9a6a01
        }

        @media (prefers-color-scheme:dark) {
            .hljs {
                --base: #282c34;
                --mono-1: #abb2bf;
                --mono-2: #818896;
                --mono-3: #5c6370;
                --hue-1: #56b6c2;
                --hue-2: #61aeee;
                --hue-3: #c678dd;
                --hue-4: #98c379;
                --hue-5: #e06c75;
                --hue-5-2: #be5046;
                --hue-6: #d19a66;
                --hue-6-2: #e6c07b
            }
        }

        .hljs {
            display: block;
            overflow-x: auto;
            padding: .5em;
            color: #383a42;
            color: var(--mono-1, #383a42);
            background: #fafafa;
            background: var(--base, #fafafa)
        }

        .hljs-comment,
        .hljs-quote {
            color: #717277;
            color: var(--mono-3, #717277);
            font-style: italic
        }

        .hljs-doctag,
        .hljs-formula,
        .hljs-keyword {
            color: #a626a4;
            color: var(--hue-3, #a626a4)
        }

        .hljs-deletion,
        .hljs-name,
        .hljs-section,
        .hljs-selector-tag,
        .hljs-subst {
            color: #ca4706;
            color: var(--hue-5, #ca4706);
            font-weight: 700
        }

        .hljs-literal {
            color: #0b76c5;
            color: var(--hue-1, #0b76c5)
        }

        .hljs-addition,
        .hljs-attribute,
        .hljs-meta-string,
        .hljs-regexp,
        .hljs-string {
            color: #42803c;
            color: var(--hue-4, #42803c)
        }

        .hljs-built_in,
        .hljs-class .hljs-title {
            color: #9a6a01;
            color: var(--hue-6-2, #9a6a01)
        }

        .hljs-attr,
        .hljs-number,
        .hljs-selector-attr,
        .hljs-selector-class,
        .hljs-selector-pseudo,
        .hljs-template-variable,
        .hljs-type,
        .hljs-variable {
            color: #986801;
            color: var(--hue-6, #986801)
        }

        .hljs-bullet,
        .hljs-link,
        .hljs-meta,
        .hljs-selector-id,
        .hljs-symbol,
        .hljs-title {
            color: #336ae3;
            color: var(--hue-2, #336ae3)
        }

        .hljs-emphasis {
            font-style: italic
        }

        .hljs-strong {
            font-weight: 700
        }

        .hljs-link {
            text-decoration: underline
        }
    </style>
    <style>
        var:hover {
            text-decoration: underline;
            cursor: pointer
        }

        var.respec-hl {
            color: var(--color, #000);
            background-color: var(--bg-color);
            box-shadow: 0 0 0 2px var(--bg-color)
        }

        @media (prefers-color-scheme:dark) {
            var.respec-hl {
                filter: saturate(.9) brightness(.9)
            }
        }

        var.respec-hl-c1 {
            --bg-color: #f4d200
        }

        var.respec-hl-c2 {
            --bg-color: #ff87a2
        }

        var.respec-hl-c3 {
            --bg-color: #96e885
        }

        var.respec-hl-c4 {
            --bg-color: #3eeed2
        }

        var.respec-hl-c5 {
            --bg-color: #eacfb6
        }

        var.respec-hl-c6 {
            --bg-color: #82ddff
        }

        var.respec-hl-c7 {
            --bg-color: #ffbcf2
        }

        @media print {
            var.respec-hl {
                background: 0 0;
                color: #000;
                box-shadow: unset
            }
        }
    </style>
    <style>
        var {
            position: relative;
            cursor: pointer
        }

        var[data-type]::after,
        var[data-type]::before {
            position: absolute;
            left: 50%;
            top: -6px;
            opacity: 0;
            transition: opacity .4s;
            pointer-events: none
        }

        var[data-type]::before {
            content: "";
            transform: translateX(-50%);
            border-width: 4px 6px 0 6px;
            border-style: solid;
            border-color: transparent;
            border-top-color: #222
        }

        var[data-type]::after {
            content: attr(data-type);
            transform: translateX(-50%) translateY(-100%);
            background: #222;
            text-align: center;
            font-family: "Dank Mono", "Fira Code", monospace;
            font-style: normal;
            padding: 6px;
            border-radius: 3px;
            color: #daca88;
            text-indent: 0;
            font-weight: 400
        }

        var[data-type]:hover::after,
        var[data-type]:hover::before {
            opacity: 1
        }
    </style>
    <script id="initialUserConfig" type="application/json">{
  "specStatus": "WD",
  "shortName": "push-api",
  "previousMaturity": "WD",
  "editors": [
    {
      "name": "Peter Beverloo",
      "company": "Google",
      "companyURL": "https://www.google.com/",
      "w3cid": "44819"
    },
    {
      "name": "Martin Thomson",
      "company": "Mozilla Foundation",
      "companyURL": "https://www.mozilla.org/",
      "w3cid": "68503"
    },
    {
      "name": "Marcos Caceres",
      "company": "Apple Inc.",
      "companyURL": "https://www.apple.com/",
      "w3cid": "39125"
    }
  ],
  "group": "webapps",
  "github": "w3c/push-api",
  "xref": "web-platform",
  "gitRevision": "54d5cb1f2f7f7295ca39e5cc5756213fb113e09b",
  "publishDate": "2025-08-06",
  "previousPublishDate": "2024-09-03",
  "publishISODate": "2025-08-06T00:00:00.000Z",
  "generatedSubtitle": "W3C Working Draft 06 August 2025"
}</script>
    <link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2021/W3C-WD">
</head>

<body
    data-cite="WEBIDL SERVICE-WORKERS FILEAPI SECURE-CONTEXTS HR-TIME PERMISSIONS ECMASCRIPT NOTIFICATIONS BADGING HTML INFRA URL WEBIDL DOM FETCH"
    class="h-entry">
    <div class="head">
        <p class="logos"><a class="logo" href="https://www.w3.org/"><img crossorigin="" alt="W3C" height="48"
                    src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72">
            </a></p>
        <h1 id="title" class="title">推送 API</h1>
        <p id="w3c-state"><a href="https://www.w3.org/standards/types#WD">W3C 工作草案</a> <time class="dt-published"
                datetime="2025-08-06">2025年8月6日</time></p>
        <details open="">
            <summary>关于本文档的更多详情</summary>
            <dl>
                <dt>本版本：</dt>
                <dd>
                    <a class="u-url"
                        href="https://www.w3.org/TR/2025/WD-push-api-20250806/">https://www.w3.org/TR/2025/WD-push-api-20250806/</a>
                </dd>
                <dt>最新发布版本：</dt>
                <dd>
                    <a href="https://www.w3.org/TR/push-api/">https://www.w3.org/TR/push-api/</a>
                </dd>
                <dt>最新编辑草稿：</dt>
                <dd><a href="https://w3c.github.io/push-api/">https://w3c.github.io/push-api/</a></dd>
                <dt>历史记录：</dt>
                <dd>
                    <a
                        href="https://www.w3.org/standards/history/push-api/">https://www.w3.org/standards/history/push-api/</a>
                </dd>
                <dd>
                    <a href="https://github.com/w3c/push-api/commits/">提交历史</a>
                </dd>
                <dt>编辑者：</dt>
                <dd class="editor p-author h-card vcard" data-editor-id="44819">
                    <span class="p-name fn">Peter Beverloo</span> (<a class="p-org org h-org"
                        href="https://www.google.com/">Google</a>)
                </dd>
                <dd class="editor p-author h-card vcard" data-editor-id="68503">
                    <span class="p-name fn">Martin Thomson</span> (<a class="p-org org h-org"
                        href="https://www.mozilla.org/">Mozilla基金会</a>)
                </dd>
                <dd class="editor p-author h-card vcard" data-editor-id="39125">
                    <span class="p-name fn">Marcos Caceres</span> (<a class="p-org org h-org"
                        href="https://www.apple.com/">苹果公司</a>)
                </dd>
                <dt>
                    前编辑者：
                </dt>
                <dd class="editor p-author h-card vcard">
                    <span class="p-name fn">Bryan Sullivan</span> (<a class="p-org org h-org"
                        href="http://www.att.com/">AT&amp;T</a>) - 截止于 <time datetime="2015-05-01">2015年5月1日</time>
                </dd>
                <dd class="editor p-author h-card vcard">
                    <span class="p-name fn">Eduardo Fullea</span> (<a class="p-org org h-org"
                        href="http://www.telefonica.com/">Telefonica</a>) - 截止于 <time
                        datetime="2015-05-01">2015年5月1日</time>
                </dd>
                <dd class="editor p-author h-card vcard">
                    <span class="p-name fn">Michaël van Ouwerkerk</span> (<a class="p-org org h-org"
                        href="https://www.google.com/">Google</a>) - 截止于 <time datetime="2016-11-08">2016年11月8日</time>
                </dd>
                <dt>反馈：</dt>
                <dd>
                    <a href="https://github.com/w3c/push-api/">GitHub w3c/push-api</a>
                    (<a href="https://github.com/w3c/push-api/pulls/">拉取请求</a>,
                    <a href="https://github.com/w3c/push-api/issues/new/choose">新建问题</a>,
                    <a href="https://github.com/w3c/push-api/issues/">开放问题</a>)
                </dd>
            </dl>
        </details>


        <p class="copyright">
            <a href="https://www.w3.org/policies/#copyright">Copyright</a>
            ©
            2025

            <a href="https://www.w3.org/">World Wide Web Consortium</a>.
            <abbr title="World Wide Web Consortium">W3C</abbr><sup>®</sup>
            <a href="https://www.w3.org/policies/#Legal_Disclaimer">liability</a>,
            <a href="https://www.w3.org/policies/#W3C_Trademarks">trademark</a> and
            <a rel="license" href="https://www.w3.org/copyright/software-license-2023/"
                title="W3C Software and Document Notice and License">permissive document license</a> rules apply.
        </p>
        <hr title="Separator for header">
    </div>
    <section id="abstract" class="introductory">
        <h2>摘要</h2>
        <p>
            <cite>推送 API</cite> 允许通过 <a href="#dfn-push-service" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-service-1">推送服务</a> 向 Web 应用发送 <a href="#dfn-push-message" class="internalDFN"
                data-link-type="dfn" id="ref-for-dfn-push-message-1">推送消息</a>。<a href="#dfn-application-server"
                class="internalDFN" data-link-type="dfn" id="ref-for-dfn-application-server-1">应用服务器</a> 可以在任何时间发送 <a
                href="#dfn-push-message" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-message-2">推送消息</a>，即使 Web 应用或 <a href="#dfn-user-agent" class="internalDFN"
                data-link-type="dfn" id="ref-for-dfn-user-agent-1">用户代理</a>处于非活动状态。<a href="#dfn-push-service"
                class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-service-2">推送服务</a>确保可靠高效地将消息投递给 <a
                href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-user-agent-2">用户代理</a>。<a href="#dfn-push-message" class="internalDFN"
                data-link-type="dfn" id="ref-for-dfn-push-message-3">推送消息</a>被投递到在 Web 应用源内运行的 <a data-link-type="dfn"
                href="https://www.w3.org/TR/service-workers/#dfn-service-worker">Service Worker</a>，该 Service Worker
            可利用消息中的信息更新本地状态或向用户显示通知。
        </p>
        <p>
            本规范设计用于配合 <a href="#dfn-web-push-protocol" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-web-push-protocol-1">Web 推送协议</a>使用，该协议描述了 <a href="#dfn-application-server"
                class="internalDFN" data-link-type="dfn" id="ref-for-dfn-application-server-2">应用服务器</a> 或 <a
                href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-user-agent-3">用户代理</a>如何与 <a href="#dfn-push-service" class="internalDFN"
                data-link-type="dfn" id="ref-for-dfn-push-service-3">推送服务</a> 交互。
        </p>
    </section>
    <section id="sotd" class="introductory">
        <h2>本文档状态</h2>
        <p><em>本节描述了本文档在发布时的状态。当前 <abbr title="World Wide Web Consortium">W3C</abbr> 发布内容及本技术报告最新修订版可在 <a
                    href="https://www.w3.org/TR/"><abbr title="World Wide Web Consortium">W3C</abbr>
                    标准与草案索引</a>中查阅。</em></p>
        <p>
            本文档由 <a href="https://www.w3.org/groups/wg/webapps">Web 应用工作组</a>以工作草案的身份在 <a
                href="https://www.w3.org/policies/process/20231103/#recs-and-notes">推荐标准流程</a>下发布。
        </p>
        <p>作为工作草案发布，并不意味着获得 <abbr title="World Wide Web Consortium">W3C</abbr> 及其成员的认可。</p>
        <p>
            本文档为草稿，可能随时被更新、替换或废止。除作为正在进行中的工作外，不应引用本文件为正式文献。
        </p>
        <p>
            本文档由遵循 <a href="https://www.w3.org/policies/patent-policy/"><abbr
                    title="World Wide Web Consortium">W3C</abbr> 专利政策</a>的工作组制定。
            <abbr title="World Wide Web Consortium">W3C</abbr> 维护着与工作组成果相关的<a rel="disclosure"
                href="https://www.w3.org/groups/wg/webapps/ipr">专利披露公开列表</a>；该页面也包含专利披露说明。如个人确知某项专利包含<a
                href="https://www.w3.org/policies/patent-policy/#def-essential">必要权利要求</a>，则应按 <a
                href="https://www.w3.org/policies/patent-policy/#sec-Disclosure">W3C 专利政策第6节</a>进行披露。
        </p>
        <p>
            本文档受 <a id="w3c_process_revision" href="https://www.w3.org/policies/process/20231103/">2023年11月3日 <abbr
                    title="World Wide Web Consortium">W3C</abbr> 流程文件</a>管理。
        </p>
    </section>
    <nav id="toc">
        <h2 class="introductory" id="table-of-contents">目录</h2>
        <ol class="toc">
            <li class="tocline"><a class="tocxref" href="#abstract">摘要</a></li>
            <li class="tocline"><a class="tocxref" href="#sotd">本文档状态</a></li>
            <li class="tocline"><a class="tocxref" href="#introduction"><bdi class="secno">1. </bdi>
                    介绍
                </a></li>
            <li class="tocline"><a class="tocxref" href="#dependencies"><bdi class="secno">2. </bdi>
                    依赖
                </a></li>
            <li class="tocline"><a class="tocxref" href="#concepts"><bdi class="secno">3. </bdi>
                    概念
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#application-server"><bdi class="secno">3.1 </bdi>
                            应用服务器
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#push-message"><bdi class="secno">3.2 </bdi>
                            推送消息
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#declarative-push-message"><bdi class="secno">3.3
                            </bdi>
                            声明式推送消息
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#members"><bdi class="secno">3.3.1 </bdi>
                                    成员
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#parser"><bdi class="secno">3.3.2 </bdi>
                                    解析器
                                </a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#push-subscription"><bdi class="secno">3.4 </bdi>
                            推送订阅
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#subscription-refreshes"><bdi
                                        class="secno">3.4.1 </bdi>
                                    订阅刷新
                                </a></li>
                            <li class="tocline"><a class="tocxref" href="#subscription-deactivation"><bdi
                                        class="secno">3.4.2 </bdi>
                                    订阅停用
                                </a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#push-service"><bdi class="secno">3.5 </bdi>
                            推送服务
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#permission"><bdi class="secno">3.6 </bdi>
                            权限
                        </a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#security-and-privacy-considerations"><bdi class="secno">4.
                    </bdi>
                    安全与隐私注意事项
                </a></li>
            <li class="tocline"><a class="tocxref" href="#pushframework"><bdi class="secno">5. </bdi>
                    推送框架
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#example"><bdi class="secno">5.1 </bdi>
                            示例
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#sequence-diagram"><bdi class="secno">5.2 </bdi>
                            时序图
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#push-service-use"><bdi class="secno">5.3 </bdi>
                            推送服务使用
                        </a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#extensions-to-the-serviceworkerregistration-interface"><bdi
                        class="secno">6. </bdi>
                    <code>ServiceWorkerRegistration</code> 接口扩展
                </a></li>
            <li class="tocline"><a class="tocxref" href="#pushmanager-interface"><bdi class="secno">7. </bdi>
                    <span data-export="" data-dfn-type="interface" data-idl="interface" data-title="PushManager"
                        data-dfn-for=""><code>PushManager</code></span> 接口
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#subscribe-method"><bdi class="secno">7.1 </bdi>
                            <code>subscribe()</code> 方法
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#pushsubscriptionoptions-interface"><bdi
                                class="secno">7.2 </bdi>
                            <span data-export="" data-dfn-type="interface" data-idl="interface"
                                data-title="PushSubscriptionOptions"
                                data-dfn-for=""><code>PushSubscriptionOptions</code></span> 接口
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#pushsubscriptionoptionsinit-dictionary"><bdi
                                class="secno">7.3 </bdi>
                            <span data-export="" data-dfn-type="dictionary" data-idl="dictionary"
                                data-title="PushSubscriptionOptionsInit"
                                data-dfn-for=""><code>PushSubscriptionOptionsInit</code></span> 字典
                        </a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#pushsubscription-interface"><bdi class="secno">8. </bdi>
                    <span data-export="" data-dfn-type="interface" data-idl="interface" data-title="PushSubscription"
                        data-dfn-for=""><code>PushSubscription</code></span> 接口
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#pushencryptionkeyname-enumeration"><bdi
                                class="secno">8.1 </bdi>
                            <span data-export="" data-dfn-type="enum" data-idl="enum" data-title="PushEncryptionKeyName"
                                data-dfn-for=""><code>PushEncryptionKeyName</code></span> 枚举
                        </a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#pushmessagedata-interface"><bdi class="secno">9. </bdi>
                    <span data-export="" data-dfn-type="interface" data-idl="interface" data-title="PushMessageData"
                        data-dfn-for=""><code>PushMessageData</code></span> 接口
                </a></li>
            <li class="tocline"><a class="tocxref" href="#events"><bdi class="secno">10. </bdi>
                    事件
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref"
                            href="#extensions-to-the-serviceworkerglobalscope-interface"><bdi class="secno">10.1 </bdi>
                            <code>ServiceWorkerGlobalScope</code> 接口扩展
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#pushevent-interface"><bdi class="secno">10.2 </bdi>
                            <span data-export="" data-dfn-type="interface" data-idl="interface" data-title="PushEvent"
                                data-dfn-for=""><code>PushEvent</code></span> 接口
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#receiving-a-push-message"><bdi class="secno">10.3
                            </bdi>
                            接收 <span class="formerLink" data-link-type="dfn">推送消息</span>
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#the-pushsubscriptionchange-event"><bdi
                                class="secno">10.4 </bdi>
                            <span>pushsubscriptionchange</span> 事件
                        </a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#pushsubscriptionchangeevent-interface"><bdi
                                        class="secno">10.4.1 </bdi>
                                    <span data-export="" data-dfn-type="interface" data-idl="interface"
                                        data-title="PushSubscriptionChangeEvent"
                                        data-dfn-for=""><code>PushSubscriptionChangeEvent</code></span> 接口
                                </a></li>
                            <li class="tocline"><a class="tocxref"
                                    href="#pushsubscriptionchangeeventinit-interface"><bdi class="secno">10.4.2 </bdi>
                                    <span data-export="" data-dfn-type="dictionary" data-idl="dictionary"
                                        data-title="PushSubscriptionChangeEventInit"
                                        data-dfn-for=""><code>PushSubscriptionChangeEventInit</code></span> 接口
                                </a></li>
                        </ol>
                    </li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#accessibility"><bdi class="secno">11. </bdi>
                    无障碍
                </a></li>
            <li class="tocline"><a class="tocxref" href="#conformance"><bdi class="secno">12. </bdi>一致性</a></li>
            <li class="tocline"><a class="tocxref" href="#idl-index"><bdi class="secno">A. </bdi>IDL 索引</a></li>
            <li class="tocline"><a class="tocxref" href="#acknowledgements"><bdi class="secno">B. </bdi>
                    致谢
                </a></li>
            <li class="tocline"><a class="tocxref" href="#references"><bdi class="secno">C. </bdi>参考文献</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#normative-references"><bdi class="secno">C.1
                            </bdi>规范性引用</a></li>
                    <li class="tocline"><a class="tocxref" href="#informative-references"><bdi class="secno">C.2
                            </bdi>参考性引用</a></li>
                </ol>
            </li>
        </ol>
    </nav>
    <section class="informative" id="introduction">
        <div class="header-wrapper">
            <h2 id="x1-introduction"><bdi class="secno">1. </bdi>
                介绍
            </h2><a class="self-link" href="#introduction" aria-label="Permalink for Section 1."></a>
        </div>
        <p><em>本节为非规范性内容。</em></p>

        <p>
            推送 API 允许 Web 应用异步与 <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-user-agent-4">用户代理</a>进行通信。这使得<a href="#dfn-application-server" class="internalDFN"
                data-link-type="dfn" id="ref-for-dfn-application-server-3">应用服务器</a>可以在信息变得可用时，随时向<a
                href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-user-agent-5">用户代理</a>提供时效性信息，而无需等待用户打开 Web 应用。
        </p>
        <p>
            按照本规范的定义，<a href="#dfn-push-service" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-service-4">推送服务</a>支持在任何时间投递<a href="#dfn-push-message" class="internalDFN"
                data-link-type="dfn" id="ref-for-dfn-push-message-4">推送消息</a>。
        </p>
        <p>
            尤其是，即使 Web 应用当前未在浏览器窗口中激活，<a href="#dfn-push-message" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-message-5">推送消息</a>也会被投递到 Web 应用：这适用于用户可能关闭 Web 应用，但仍希望在收到<a
                href="#dfn-push-message" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-message-6">推送消息</a>时能够重新启动 Web 应用的场景。例如，<a href="#dfn-push-message"
                class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-message-7">推送消息</a>可用于通知用户有来电的 WebRTC 通话。
        </p>
        <p>
            即使<a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-user-agent-6">用户代理</a>暂时离线，也可以发送<a href="#dfn-push-message" class="internalDFN"
                data-link-type="dfn" id="ref-for-dfn-push-message-8">推送消息</a>。为此，<a href="#dfn-push-service"
                class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-service-5">推送服务</a>会为<a
                href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-user-agent-7">用户代理</a>暂存消息，直到<a href="#dfn-user-agent" class="internalDFN"
                data-link-type="dfn" id="ref-for-dfn-user-agent-8">用户代理</a>恢复可用。这样可以支持用户离线期间 Web 应用获知状态变化，并确保<a
                href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-user-agent-9">用户代理</a>能及时获得相关信息。<a href="#dfn-push-message" class="internalDFN"
                data-link-type="dfn" id="ref-for-dfn-push-message-9">推送消息</a>会由<a href="#dfn-push-service"
                class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-service-6">推送服务</a>存储，直到<a
                href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-user-agent-10">用户代理</a>恢复可达，消息得以投递。
        </p>
        <p>
            推送 API 还会确保在<a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-user-agent-11">用户代理</a>活跃使用 Web 应用时可靠投递推送消息，例如用户正在使用 Web 应用，或 Web 应用正通过活跃的
            worker、窗口或后台窗口与<a href="#dfn-application-server" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-application-server-4">应用服务器</a>进行通信。这并非推送 API 的主要用例。Web 应用可能会选择使用推送 API 来发送少量消息，以避免与<a
                href="#dfn-application-server" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-application-server-5">应用服务器</a>保持持续通信。
        </p>
        <p>
            推送消息最适用于<a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-user-agent-12">用户代理</a>与 Web 应用之间尚未建立活跃通信渠道的场景。与更直接的通信方式（如 <cite><a class="bibref"
                    data-link-type="biblio" href="#bib-fetch" title="Fetch Standard">Fetch API</a></cite> 或 [<cite><a
                    class="bibref" data-link-type="biblio" href="#bib-websockets"
                    title="WebSockets Standard">WebSockets</a></cite>]）相比，发送<a href="#dfn-push-message"
                class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-message-10">推送消息</a>需要消耗更多资源。<a
                href="#dfn-push-message" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-message-11">推送消息</a>通常延迟更高，也可能受到限制。大多数<a href="#dfn-push-service"
                class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-service-7">推送服务</a>会限制可发送<a
                href="#dfn-push-message" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-message-12">推送消息</a>的大小和数量。
        </p>
    </section>
    <section id="dependencies">
        <div class="header-wrapper">
            <h2 id="x2-dependencies"><bdi class="secno">2. </bdi>
                依赖
            </h2><a class="self-link" href="#dependencies" aria-label="Permalink for Section 2."></a>
        </div>

        <p>
            <dfn id="dfn-web-push-protocol" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">Web 推送协议</dfn>
            [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc8030"
                    title="Generic Event Delivery Using HTTP Push">RFC8030</a></cite>] 描述了一种协议，使 <a
                href="#dfn-user-agent" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-user-agent-13">用户代理</a>
            或 <a href="#dfn-application-server" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-application-server-6">应用服务器</a> 能够与 <a href="#dfn-push-service" class="internalDFN"
                data-link-type="dfn"
                id="ref-for-dfn-push-service-8">推送服务</a>进行通信。虽然可以使用其他协议替代该协议，但本规范假定使用该协议；其他协议应提供兼容的语义。
        </p>
        <p>
            <code><dfn id="dfn-content-encoding" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">Content-Encoding</dfn></code>
            HTTP 头部（详见 [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc7231"
                    title="Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content">RFC7231</a></cite>] 第 3.1.2.2
            节）表示应用于 <a href="#dfn-push-message" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-message-13">推送消息</a>负载的数据编码方式。
        </p>
    </section>
    <section id="concepts">
        <div class="header-wrapper">
            <h2 id="x3-concepts"><bdi class="secno">3. </bdi>
                概念
            </h2><a class="self-link" href="#concepts" aria-label="Permalink for Section 3."></a>
        </div>

        <section id="application-server">
            <div class="header-wrapper">
                <h3 id="x3-1-application-server"><bdi class="secno">3.1 </bdi>
                    应用服务器
                </h3><a class="self-link" href="#application-server" aria-label="Permalink for Section 3.1"></a>
            </div>

            <p>
                <dfn data-plurals="application servers" id="dfn-application-server" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">应用服务器</dfn> 指的是 Web 应用的服务器端组件。
            </p>
        </section>
        <section id="push-message">
            <div class="header-wrapper">
                <h3 id="x3-2-push-message"><bdi class="secno">3.2 </bdi>
                    推送消息
                </h3><a class="self-link" href="#push-message" aria-label="Permalink for Section 3.2"></a>
            </div>

            <p>
                <dfn data-plurals="push messages" id="dfn-push-message" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">推送消息</dfn> 是从 <a href="#dfn-application-server" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-application-server-7">应用服务器</a> 发送到 Web 应用的数据。
            </p>
            <p>
                <a href="#dfn-push-message" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-push-message-14">推送消息</a> 会被投递到与提交该消息的 <a data-link-type="dfn"
                    href="https://www.w3.org/TR/service-workers/#dfn-active-worker">活跃 worker</a> 关联的 <a
                    href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-push-subscription-1">推送订阅</a>。如果 Service Worker 当前未运行，则会启动 Worker 以实现消息的投递。
            </p>
        </section>
        <section id="declarative-push-message">
            <div class="header-wrapper">
                <h3 id="x3-3-declarative-push-message"><bdi class="secno">3.3 </bdi>
                    声明式推送消息
                </h3><a class="self-link" href="#declarative-push-message" aria-label="Permalink for Section 3.3"></a>
            </div>

            <p>
                <dfn id="dfn-declarative-push-message" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">声明式推送消息</dfn> 是一种 <a data-link-type="dfn|abstract-op" href="#dfn-push-message"
                    class="internalDFN" id="ref-for-dfn-push-message-15">推送消息</a>，其数据为用户代理可理解的 JSON 文档。用户代理会对每个收到的 <a
                    data-link-type="dfn|abstract-op" href="#dfn-push-message" class="internalDFN"
                    id="ref-for-dfn-push-message-16">推送消息</a>进行解析，以判断其是否为 <a data-link-type="dfn|abstract-op"
                    href="#dfn-declarative-push-message" class="internalDFN"
                    id="ref-for-dfn-declarative-push-message-1">声明式推送消息</a>，解析过程由 <a data-link-type="dfn|abstract-op"
                    href="#dfn-declarative-push-message-parser" class="internalDFN"
                    id="ref-for-dfn-declarative-push-message-parser-1">声明式推送消息解析器</a>完成。
            </p>
            <p>
                <a data-link-type="dfn|abstract-op" href="#dfn-declarative-push-message" class="internalDFN"
                    id="ref-for-dfn-declarative-push-message-2">声明式推送消息</a>允许无需 Service Worker 即可创建和展示通知。当然，如果 <a
                    data-link-type="dfn|abstract-op" href="#dfn-application-server" class="internalDFN"
                    id="ref-for-dfn-application-server-8">应用服务器</a>需要，Service Worker 仍可参与。在这种场景下，声明式 <a
                    data-link-type="dfn|abstract-op" href="#dfn-push-message" class="internalDFN"
                    id="ref-for-dfn-push-message-17">推送消息</a>可作为备份方案（如由于存储压力导致 Service Worker
                被清除），同时也提供了一种更面向对象的通知数据传递方式。
            </p>
            <div class="example" id="example-1">
                <div class="marker">
                    <a class="self-link" href="#example-1">示例<bdi> 1</bdi></a>
                </div>
                <pre aria-busy="false"><code class="hljs json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"web_push"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">8030</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"notification"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Ada emailed ‘London’"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"lang"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"en-US"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"dir"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ltr"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"body"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Did you hear about the tube strikes?"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"navigate"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://email.example/message/12"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span></code></pre>
            </div>
            <section id="members">
                <div class="header-wrapper">
                    <h4 id="x3-3-1-members"><bdi class="secno">3.3.1 </bdi>
                        成员
                    </h4><a class="self-link" href="#members" aria-label="Permalink for Section 3.3.1"></a>
                </div>

                <p>
                    <a data-link-type="dfn|abstract-op" href="#dfn-declarative-push-message" class="internalDFN"
                        id="ref-for-dfn-declarative-push-message-3">声明式推送消息</a>包含以下成员：
                </p>
                <dl>
                    <dt>
                        <code>web_push</code>（必需）
                    </dt>
                    <dd>
                        <p>
                            一个必须为8030的整数。用于区分 <a data-link-type="dfn|abstract-op" href="#dfn-declarative-push-message"
                                class="internalDFN" id="ref-for-dfn-declarative-push-message-4">声明式推送消息</a> 与其他 JSON 文档。
                        </p>
                    </dd>
                    <dt>
                        <code>notification</code>（必需）
                    </dt>
                    <dd>
                        <p>
                            一个 JSON 对象，包含如下成员，均与 Notifications API 特性类似，但类型可能稍严格。除 <code>title</code> 外，其余成员均源自 <a
                                data-link-type="dictionary" data-lt="NotificationOptions"
                                href="https://notifications.spec.whatwg.org/#dictdef-notificationoptions"><code>NotificationOptions</code></a>
                            字典，并需保持同步。 [<cite><a class="bibref" data-link-type="biblio" href="#bib-notifications"
                                    title="Notifications API Standard">NOTIFICATIONS</a></cite>]
                        </p>
                        <dl>
                            <dt>
                                <code>title</code>（必需）
                            </dt>
                            <dd>
                                <p>
                                    字符串。
                                </p>
                            </dd>
                            <dt>
                                <code>dir</code>
                            </dt>
                            <dd>
                                <p>
                                    "<code>auto</code>"、"<code>ltr</code>" 或 "<code>rtl</code>"。
                                </p>
                            </dd>
                            <dt>
                                <code>lang</code>
                            </dt>
                            <dd>
                                <p>
                                    存放语言标签的字符串。
                                </p>
                            </dd>
                            <dt>
                                <code>body</code>
                            </dt>
                            <dd>
                                <p>
                                    字符串。
                                </p>
                            </dd>
                            <dt>
                                <code>navigate</code>（必需）
                            </dt>
                            <dd>
                                <p>
                                    存放 URL 的字符串。
                                </p>
                            </dd>
                            <dt>
                                <code>tag</code>
                            </dt>
                            <dd>
                                <p>
                                    字符串。
                                </p>
                            </dd>
                            <dt>
                                <code>image</code>
                            </dt>
                            <dd>
                                <p>
                                    存放 URL 的字符串。
                                </p>
                            </dd>
                            <dt>
                                <code>icon</code>
                            </dt>
                            <dd>
                                <p>
                                    存放 URL 的字符串。
                                </p>
                            </dd>
                            <dt>
                                <code>badge</code>
                            </dt>
                            <dd>
                                <p>
                                    存放 URL 的字符串。
                                </p>
                            </dd>
                            <dt>
                                <code>vibrate</code>
                            </dt>
                            <dd>
                                <p>
                                    由 <a data-link-type="dfn"
                                        href="https://infra.spec.whatwg.org/#32-bit-unsigned-integer">32
                                        位无符号整数</a>组成的数组。
                                </p>
                            </dd>
                            <dt>
                                <code>timestamp</code>
                            </dt>
                            <dd>
                                <p>
                                    <a data-link-type="dfn"
                                        href="https://infra.spec.whatwg.org/#64-bit-unsigned-integer">64 位无符号整数</a>。
                                </p>
                            </dd>
                            <dt>
                                <code>renotify</code>
                            </dt>
                            <dd>
                                <p>
                                    布尔值。
                                </p>
                            </dd>
                            <dt>
                                <code>silent</code>
                            </dt>
                            <dd>
                                <p>
                                    布尔值。
                                </p>
                            </dd>
                            <dt>
                                <code>requireInteraction</code>
                            </dt>
                            <dd>
                                <p>
                                    布尔值。
                                </p>
                                <div class="note" role="note" id="issue-container-generatedID">
                                    <div role="heading" class="note-title marker" id="h-note" aria-level="5">
                                        <span>注意</span>
                                    </div>
                                    <p class="">
                                        为了与 <a data-link-type="dictionary" data-lt="NotificationOptions"
                                            href="https://notifications.spec.whatwg.org/#dictdef-notificationoptions"><code>NotificationOptions</code></a>
                                        字典保持一致，此项未命名为 <code>require_interaction</code>。
                                    </p>
                                </div>
                            </dd>
                            <dt>
                                <code>data</code>
                            </dt>
                            <dd>
                                <p>
                                    任意 JSON 值。
                                </p>
                            </dd>
                            <dt>
                                <code>actions</code>
                            </dt>
                            <dd>
                                <p>
                                    由 JSON 对象组成的数组，每个对象包含如下成员，均源自 <a data-link-type="dictionary"
                                        data-lt="NotificationAction"
                                        href="https://notifications.spec.whatwg.org/#dictdef-notificationaction"><code>NotificationAction</code></a>
                                    字典，并需保持同步。
                                </p>
                                <dl>
                                    <dt>
                                        <code>action</code>（必需）
                                    </dt>
                                    <dd>
                                        <p>
                                            字符串。
                                        </p>
                                    </dd>
                                    <dt>
                                        <code>title</code>（必需）
                                    </dt>
                                    <dd>
                                        <p>
                                            字符串。
                                        </p>
                                    </dd>
                                    <dt>
                                        <code>navigate</code>（必需）
                                    </dt>
                                    <dd>
                                        <p>
                                            存放 URL 的字符串。
                                        </p>
                                    </dd>
                                    <dt>
                                        <code>icon</code>
                                    </dt>
                                    <dd>
                                        <p>
                                            存放 URL 的字符串。
                                        </p>
                                    </dd>
                                </dl>
                            </dd>
                        </dl>
                    </dd>
                    <dt>
                        <code>mutable</code>
                    </dt>
                    <dd>
                        <p>
                            布尔值。当为 true 时，会向 Service Worker（如果有）派发包含由 <a data-link-type="interface"
                                data-lt="Notification"
                                href="https://notifications.spec.whatwg.org/#notification"><code>Notification</code></a>
                            对象描述的 <a href="#dfn-declarative-push-message" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-declarative-push-message-5">声明式推送消息</a> 的 <code>push</code> 事件。
                        </p>
                    </dd>
                </dl>
            </section>
            <section id="parser">
                <div class="header-wrapper">
                    <h4 id="x3-3-2-parser"><bdi class="secno">3.3.2 </bdi>
                        解析器
                    </h4><a class="self-link" href="#parser" aria-label="Permalink for Section 3.3.2"></a>
                </div>

                <p>
                    <dfn id="dfn-declarative-push-message-parser-result" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">声明式推送消息解析结果</dfn>是一个由
                    <dfn data-dfn-for="declarative push message parser result" id="dfn-notification" tabindex="0"
                        aria-haspopup="dialog" data-dfn-type="dfn">notification</dfn>（一个
                    <a data-link-type="permission"
                        href="https://notifications.spec.whatwg.org/#permissiondef-notifications">通知</a>）和
                    <dfn data-dfn-for="declarative push message parser result" id="dfn-mutable" tabindex="0"
                        aria-haspopup="dialog" data-dfn-type="dfn">mutable</dfn>（一个布尔值）组成的<a data-link-type="dfn"
                        href="https://infra.spec.whatwg.org/#tuple">元组</a>。
                </p>
                <p>
                    <dfn id="dfn-declarative-push-message-parser" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">声明式推送消息解析器</dfn>给定一个<a data-link-type="dfn"
                        href="https://infra.spec.whatwg.org/#byte-sequence">字节序列</a>
                    <var>bytes</var>、<a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a>
                    <var>origin</var>、<a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url">URL</a>
                    <var>baseURL</var>和
                    <a data-link-type="typedef" data-lt="EpochTimeStamp"
                        href="https://www.w3.org/TR/hr-time-3/#dom-epochtimestamp"><code>EpochTimeStamp</code></a>
                    <var>fallbackTimestamp</var>，按照如下步骤运行。返回失败或一个<a data-link-type="dfn|abstract-op"
                        href="#dfn-declarative-push-message-parser-result" class="internalDFN"
                        id="ref-for-dfn-declarative-push-message-parser-result-1">声明式推送消息解析结果</a>。
                </p>
                <ol>
                    <li>
                        <p>
                            令 <var>message</var> 为 <a data-link-type="dfn" data-lt="parse JSON bytes to an Infra value"
                                href="https://infra.spec.whatwg.org/#parse-json-bytes-to-an-infra-value">解析 JSON 字节为
                                Infra 值</a>给定 <var>bytes</var> 的结果。如果抛出异常，则返回失败。
                        </p>
                    </li>
                    <li>
                        <p data-cite="INFRA">
                            如果 <var>message</var> 不是<a data-link-type="dfn"
                                href="https://infra.spec.whatwg.org/#ordered-map">有序映射</a>，则返回失败。
                        </p>
                    </li>
                    <li>
                        <p>
                            如果 <var>message</var>["<code>web_push</code>"] 不<a data-link-type="dfn"
                                href="https://infra.spec.whatwg.org/#map-exists">存在</a>或不为8030，则返回失败。
                        </p>
                    </li>
                    <li>
                        <p>
                            如果 <var>message</var>["<code>notification</code>"] 不<a data-link-type="dfn"
                                href="https://infra.spec.whatwg.org/#map-exists">存在</a>，则返回失败。
                        </p>
                    </li>
                    <li>
                        <p>
                            令 <var>notificationInput</var> 为 <var>message</var>["<code>notification</code>"]。
                        </p>
                    </li>
                    <li>
                        <p data-cite="INFRA">
                            如果 <var>notificationInput</var> 不是<a data-link-type="dfn"
                                href="https://infra.spec.whatwg.org/#ordered-map">有序映射</a>，则返回失败。
                        </p>
                    </li>
                    <li>
                        <p>
                            如果 <var>notificationInput</var>["<code>title</code>"] 不<a data-link-type="dfn"
                                href="https://infra.spec.whatwg.org/#map-exists">存在</a>或不是字符串，则返回失败。
                        </p>
                    </li>
                    <li>
                        <p>
                            如果 <var>notificationInput</var>["<code>navigate</code>"] 不<a data-link-type="dfn"
                                href="https://infra.spec.whatwg.org/#map-exists">存在</a>或不是字符串，则返回失败。
                        </p>
                    </li>

                    <li>
                        <p>
                            令 <var>notificationTitle</var> 为 <var>notificationInput</var>["<code>title</code>"]。
                        </p>
                    </li>
                    <li>
                        <p>
                            令 <var>notificationOptions</var> 为一个 <a data-link-type="dictionary"
                                data-lt="NotificationOptions"
                                href="https://notifications.spec.whatwg.org/#dictdef-notificationoptions"><code>NotificationOptions</code></a>
                            字典。
                        </p>
                    </li>
                    <li>
                        <p>
                            如果 <var>notificationInput</var>["<code>dir</code>"]<a data-link-type="dfn"
                                href="https://infra.spec.whatwg.org/#map-exists">存在</a>且为"<code>auto</code>"、"<code>ltr</code>"或"<code>rtl</code>"，则将
                            <var>notificationOptions</var>["<a data-link-type="dict-member"
                                href="https://notifications.spec.whatwg.org/#dom-notificationoptions-dir"><code>dir</code></a>"]
                            设为 <var>notificationInput</var>["<code>dir</code>"]。
                        </p>
                    </li>
                    <li>
                        <p>
                            如果 <var>notificationInput</var>["<code>lang</code>"]<a data-link-type="dfn"
                                href="https://infra.spec.whatwg.org/#map-exists">存在</a>且为字符串，则将
                            <var>notificationOptions</var>["<a data-link-type="dict-member"
                                href="https://notifications.spec.whatwg.org/#dom-notificationoptions-lang"><code>lang</code></a>"]
                            设为 <var>notificationInput</var>["<code>lang</code>"]。
                        </p>
                    </li>
                    <li>
                        <p>
                            如果 <var>notificationInput</var>["<code>body</code>"]<a data-link-type="dfn"
                                href="https://infra.spec.whatwg.org/#map-exists">存在</a>且为字符串，则将
                            <var>notificationOptions</var>["<a data-link-type="dict-member"
                                href="https://notifications.spec.whatwg.org/#dom-notificationoptions-body"><code>body</code></a>"]
                            设为 <var>notificationInput</var>["<code>body</code>"]。
                        </p>
                    </li>
                    <li>
                        <p>
                            将 <var>notificationOptions</var>["<a data-link-type="dict-member"
                                href="https://notifications.spec.whatwg.org/#dom-notificationoptions-navigate"><code>navigate</code></a>"]
                            设为 <var>notificationInput</var>["<code>navigate</code>"]，并<a data-link-type="dfn"
                                href="https://infra.spec.whatwg.org/#javascript-string-convert">转换</a>。
                        </p>
                    </li>
                    <li>
                        <p>
                            如果 <var>notificationInput</var>["<code>tag</code>"]<a data-link-type="dfn"
                                href="https://infra.spec.whatwg.org/#map-exists">存在</a>且为字符串，则将
                            <var>notificationOptions</var>["<a data-link-type="dict-member"
                                href="https://notifications.spec.whatwg.org/#dom-notificationoptions-tag"><code>tag</code></a>"]
                            设为 <var>notificationInput</var>["<code>tag</code>"]。
                        </p>
                    </li>
                    <li>
                        <p>
                            如果 <var>notificationInput</var>["<code>image</code>"]<a data-link-type="dfn"
                                href="https://infra.spec.whatwg.org/#map-exists">存在</a>且为字符串，则将
                            <var>notificationOptions</var>["<a data-link-type="dict-member"
                                href="https://notifications.spec.whatwg.org/#dom-notificationoptions-image"><code>image</code></a>"]
                            设为 <var>notificationInput</var>["<code>image</code>"]，并<a data-link-type="dfn"
                                href="https://infra.spec.whatwg.org/#javascript-string-convert">转换</a>。
                        </p>
                    </li>
                    <li>
                        <p>
                            如果 <var>notificationInput</var>["<code>icon</code>"]<a data-link-type="dfn"
                                href="https://infra.spec.whatwg.org/#map-exists">存在</a>且为字符串，则将
                            <var>notificationOptions</var>["<a data-link-type="dict-member"
                                href="https://notifications.spec.whatwg.org/#dom-notificationoptions-icon"><code>icon</code></a>"]
                            设为 <var>notificationInput</var>["<code>icon</code>"]，并<a data-link-type="dfn"
                                href="https://infra.spec.whatwg.org/#javascript-string-convert">转换</a>。
                        </p>
                    </li>
                    <li>
                        <p>
                            如果 <var>notificationInput</var>["<code>badge</code>"]<a data-link-type="dfn"
                                href="https://infra.spec.whatwg.org/#map-exists">存在</a>且为字符串，则将
                            <var>notificationOptions</var>["<a data-link-type="dict-member"
                                href="https://notifications.spec.whatwg.org/#dom-notificationoptions-badge"><code>badge</code></a>"]
                            设为 <var>notificationInput</var>["<code>badge</code>"]，并<a data-link-type="dfn"
                                href="https://infra.spec.whatwg.org/#javascript-string-convert">转换</a>。
                        </p>
                    </li>
                    <li>
                        <p>
                            如果 <var>notificationInput</var>["<code>vibrate</code>"]<a data-link-type="dfn"
                                href="https://infra.spec.whatwg.org/#map-exists">存在</a>且为<a data-link-type="dfn"
                                href="https://infra.spec.whatwg.org/#list">列表</a>，且每个<a data-link-type="dfn"
                                href="https://infra.spec.whatwg.org/#list-item">项</a>
                            都是<a data-link-type="dfn"
                                href="https://infra.spec.whatwg.org/#32-bit-unsigned-integer">32位无符号整数</a>，则将
                            <var>notificationOptions</var>["<a data-link-type="dict-member"
                                href="https://notifications.spec.whatwg.org/#dom-notificationoptions-vibrate"><code>vibrate</code></a>"]
                            设为 <var>notificationInput</var>["<code>vibrate</code>"]。
                        </p>
                    </li>
                    <li>
                        <p>
                            如果 <var>notificationInput</var>["<code>timestamp</code>"]<a data-link-type="dfn"
                                href="https://infra.spec.whatwg.org/#map-exists">存在</a>且为<a data-link-type="dfn"
                                href="https://infra.spec.whatwg.org/#64-bit-unsigned-integer">64位无符号整数</a>，则将
                            <var>notificationOptions</var>["<a data-link-type="dict-member"
                                href="https://notifications.spec.whatwg.org/#dom-notificationoptions-timestamp"><code>timestamp</code></a>"]
                            设为 <var>notificationInput</var>["<code>timestamp</code>"]。
                        </p>
                    </li>
                    <li>
                        <p>
                            如果 <var>notificationInput</var>["<code>renotify</code>"]<a data-link-type="dfn"
                                href="https://infra.spec.whatwg.org/#map-exists">存在</a>且为布尔值，则将
                            <var>notificationOptions</var>["<a data-link-type="dict-member"
                                href="https://notifications.spec.whatwg.org/#dom-notificationoptions-renotify"><code>renotify</code></a>"]
                            设为 <var>notificationInput</var>["<code>renotify</code>"]。
                        </p>
                    </li>
                    <li>
                        <p>
                            如果 <var>notificationInput</var>["<code>silent</code>"]<a data-link-type="dfn"
                                href="https://infra.spec.whatwg.org/#map-exists">存在</a>且为布尔值，则将
                            <var>notificationOptions</var>["<a data-link-type="dict-member"
                                href="https://notifications.spec.whatwg.org/#dom-notificationoptions-silent"><code>silent</code></a>"]
                            设为 <var>notificationInput</var>["<code>silent</code>"]。
                        </p>
                    </li>
                    <li>
                        <p>
                            如果 <var>notificationInput</var>["<code>requireInteraction</code>"]<a data-link-type="dfn"
                                href="https://infra.spec.whatwg.org/#map-exists">存在</a>且为布尔值，则将
                            <var>notificationOptions</var>["<a data-link-type="dict-member"
                                href="https://notifications.spec.whatwg.org/#dom-notificationoptions-requireinteraction"><code>requireInteraction</code></a>"]
                            设为 <var>notificationInput</var>["<code>requireInteraction</code>"]。
                        </p>
                    </li>
                    <li>
                        <p>
                            如果 <var>notificationInput</var>["<code>data</code>"]<a data-link-type="dfn"
                                href="https://infra.spec.whatwg.org/#map-exists">存在</a>，则将
                            <var>notificationOptions</var>["<a data-link-type="dict-member"
                                href="https://notifications.spec.whatwg.org/#dom-notificationoptions-data"><code>data</code></a>"]
                            设为运行 <a data-link-type="dfn"
                                href="https://infra.spec.whatwg.org/#convert-an-infra-value-to-a-json-compatible-javascript-value">将
                                Infra 值转换为 JSON 兼容的 JavaScript 值</a>给定
                            <var>notificationInput</var>["<code>data</code>"] 的结果。
                        </p>
                    </li>
                    <li>
                        <p>
                            如果 <var>notificationInput</var>["<code>actions</code>"]<a data-link-type="dfn"
                                href="https://infra.spec.whatwg.org/#map-exists">存在</a>且为<a data-link-type="dfn"
                                href="https://infra.spec.whatwg.org/#list">列表</a>：
                        </p>
                        <ol>
                            <li>
                                <p>
                                    令 <var>notificationActions</var> 为 « »。
                                </p>
                            </li>
                            <li>
                                <p>
                                    <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate">遍历</a>
                                    <var>notificationInput</var>["<code>actions</code>"]中的每个 <var>actionInput</var>：
                                </p>
                                <ol>
                                    <li>
                                        <p>
                                            如果 <var>actionInput</var>["<code>action</code>"] 不<a data-link-type="dfn"
                                                href="https://infra.spec.whatwg.org/#map-exists">存在</a>或不是字符串，则<a
                                                data-link-type="dfn"
                                                href="https://infra.spec.whatwg.org/#iteration-continue">跳过</a>。
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            如果 <var>actionInput</var>["<code>title</code>"] 不<a data-link-type="dfn"
                                                href="https://infra.spec.whatwg.org/#map-exists">存在</a>或不是字符串，则<a
                                                data-link-type="dfn"
                                                href="https://infra.spec.whatwg.org/#iteration-continue">跳过</a>。
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            如果 <var>actionInput</var>["<code>navigate</code>"] 不<a data-link-type="dfn"
                                                href="https://infra.spec.whatwg.org/#map-exists">存在</a>或不是字符串，则<a
                                                data-link-type="dfn"
                                                href="https://infra.spec.whatwg.org/#iteration-continue">跳过</a>。
                                        </p>
                                    </li>

                                    <li>
                                        <p>
                                            令 <var>actionNavigate</var> 为
                                            <var>actionInput</var>["<code>navigate</code>"]，
                                            <a data-link-type="dfn"
                                                href="https://infra.spec.whatwg.org/#javascript-string-convert">转换</a>。
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            令 <var>notificationAction</var> 为 <a data-link-type="dictionary"
                                                data-lt="NotificationAction"
                                                href="https://notifications.spec.whatwg.org/#dictdef-notificationaction"><code>NotificationAction</code></a>
                                            字典
                                            «[ "<a data-link-type="dict-member"
                                                href="https://notifications.spec.whatwg.org/#dom-notificationaction-action"><code>action</code></a>"
                                            → <var>actionInput</var>["<code>action</code>"],
                                            "<a data-link-type="dict-member"
                                                href="https://notifications.spec.whatwg.org/#dom-notificationaction-title"><code>title</code></a>"
                                            → <var>actionInput</var>["<code>title</code>"],
                                            "<a data-link-type="dict-member"
                                                href="https://notifications.spec.whatwg.org/#dom-notificationaction-navigate"><code>navigate</code></a>"
                                            → <var>actionNavigate</var> ]»。
                                        </p>
                                    </li>

                                    <li>
                                        <p>
                                            如果 <var>actionInput</var>["<code>icon</code>"]<a data-link-type="dfn"
                                                href="https://infra.spec.whatwg.org/#map-exists">存在</a>且为字符串，则
                                            将 <var>notificationAction</var>["<a data-link-type="dict-member"
                                                href="https://notifications.spec.whatwg.org/#dom-notificationaction-icon"><code>icon</code></a>"]
                                            设为 <var>actionInput</var>["<code>icon</code>"]，并<a data-link-type="dfn"
                                                href="https://infra.spec.whatwg.org/#javascript-string-convert">转换</a>。
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            <a data-link-type="dfn"
                                                href="https://infra.spec.whatwg.org/#list-append">追加</a>
                                            <var>notificationAction</var> 到 <var>notificationActions</var>。
                                        </p>
                                    </li>
                                </ol>
                            </li>
                            <li>
                                <p>
                                    将 <var>notificationOptions</var>["<a data-link-type="dict-member"
                                        href="https://notifications.spec.whatwg.org/#dom-notificationoptions-actions"><code>actions</code></a>"]
                                    设为 <var>notificationActions</var>。
                                </p>
                            </li>
                        </ol>
                    </li>
                    <li>
                        <p>
                            令 <var>notification</var> 为运行 <a data-lt="create a notification" data-link-type="dfn"
                                href="https://notifications.spec.whatwg.org/#create-a-notification">创建通知</a>给定
                            <var>notificationTitle</var>、<var>notificationOptions</var>、<var>origin</var>、
                            <var>baseURL</var>和 <var>fallbackTimestamp</var> 的结果。如果抛出异常，则返回失败。
                        </p>
                    </li>
                    <li>
                        <p>
                            如果 <var>notification</var> 的 <a data-link-type="dfn"
                                href="https://notifications.spec.whatwg.org/#notification-navigation-url">导航 URL</a>为
                            null，则返回失败。
                        </p>
                    </li>
                    <li>
                        <p>
                            如果 <var>notification</var> 的任何<a data-link-type="dfn"
                                href="https://notifications.spec.whatwg.org/#action">通知动作</a>的<a data-link-type="dfn"
                                href="https://notifications.spec.whatwg.org/#notification-action-navigation-url">导航
                                URL</a>为 null，则返回失败。
                        </p>
                    </li>
                    <li>
                        <p>
                            令 <var>mutable</var> 为 false。
                        </p>
                    </li>
                    <li>
                        <p>
                            如果 <var>message</var>["<code>mutable</code>"]<a data-link-type="dfn"
                                href="https://infra.spec.whatwg.org/#map-exists">存在</a>且
                            <var>message</var>["<code>mutable</code>"]为布尔值，则将 <var>mutable</var> 设为
                            <var>message</var>["<code>mutable</code>"]。
                        </p>
                    </li>
                    <li>
                        <p>
                            返回 (<var>notification</var>, <var>mutable</var>)。
                        </p>
                    </li>
                </ol>
            </section>
        </section>
        <section id="push-subscription">
            <div class="header-wrapper">
                <h3 id="x3-4-push-subscription"><bdi class="secno">3.4 </bdi>
                    推送订阅
                </h3><a class="self-link" href="#push-subscription" aria-label="Permalink for Section 3.4"></a>
            </div>

            <p>
                <dfn data-plurals="push subscriptions" id="dfn-push-subscription" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">推送订阅</dfn>是为 Web 应用在<a href="#dfn-user-agent" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-user-agent-14">用户代理</a>和<a href="#dfn-push-service"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-service-9">推送服务</a>之间建立的消息投递上下文。每个<a
                    href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-push-subscription-2">推送订阅</a>都与<a data-link-type="dfn"
                    href="https://www.w3.org/TR/service-workers/#dfn-service-worker-registration">Service Worker
                    注册</a>关联，且每个<a data-link-type="dfn"
                    href="https://www.w3.org/TR/service-workers/#dfn-service-worker-registration">Service Worker
                    注册</a>最多只有一个<a href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-push-subscription-3">推送订阅</a>。
            </p>
            <p>
                <a href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-push-subscription-4">推送订阅</a>有一个关联的<dfn data-plurals="push endpoints"
                    id="dfn-push-endpoint" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">推送端点</dfn>。它<em
                    class="rfc2119">必须</em>是<a href="#dfn-push-service" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-push-service-10">推送服务</a>公开的绝对 URL，<a href="#dfn-application-server"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-application-server-9">应用服务器</a>可通过该 URL
                向其发送<a href="#dfn-push-message" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-push-message-18">推送消息</a>。<a href="#dfn-push-endpoint" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-push-endpoint-1">推送端点</a><em class="rfc2119">必须</em>唯一标识该<a
                    href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-push-subscription-5">推送订阅</a>。
            </p>
            <p>
                <a href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-push-subscription-6">推送订阅</a><em class="rfc2119">可以</em>具有一个关联的<dfn
                    id="dfn-subscription-expiration-time" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">订阅过期时间</dfn>。如果设置了，<em class="rfc2119">必须</em>为自 1970 年 1 月 1 日 00:00:00 UTC
                起的毫秒数，表示订阅将被<a href="#dfn-deactivate" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-deactivate-1">停用</a>的时间。<a href="#dfn-user-agent" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-user-agent-15">用户代理</a><em class="rfc2119">应当</em>在订阅过期前尝试<a
                    href="#dfn-refresh" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-refresh-1">刷新</a>推送订阅。
            </p>
            <p>
                <a href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-push-subscription-7">推送订阅</a>在内部保存 P-256 <a href="#dfn-ecdh" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-ecdh-1"><abbr
                        title="elliptic curve Diffie-Hellman">ECDH</abbr></a> 密钥对和认证密钥，符合 [<cite><a class="bibref"
                        data-link-type="biblio" href="#bib-rfc8291"
                        title="Message Encryption for Web Push">RFC8291</a></cite>]。这些内容<em class="rfc2119">必须</em>在创建<a
                    href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-push-subscription-8">推送订阅</a>时填充。
            </p>
            <p>
                如果<a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-user-agent-16">用户代理</a>因任何原因需要更换密钥，则<em class="rfc2119">必须</em><a
                    href="#dfn-fire-the-pushsubscriptionchange-event" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-fire-the-pushsubscriptionchange-event-1">触发 "<code>pushsubscriptionchange</code>"
                    事件</a>，将与该<a href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-push-subscription-9">推送订阅</a>关联的<a data-link-type="dfn"
                    href="https://www.w3.org/TR/service-workers/#dfn-service-worker-registration">Service Worker
                    注册</a>作为<var>registration</var>，以旧密钥的<a data-link-type="idl" data-lt="PushSubscription"
                    href="#dom-pushsubscription" class="internalDFN"
                    id="ref-for-dom-pushsubscription-1"><code>PushSubscription</code></a>实例作为<var>oldSubscription</var>，以新密钥的<a
                    data-link-type="idl" data-lt="PushSubscription" href="#dom-pushsubscription" class="internalDFN"
                    id="ref-for-dom-pushsubscription-2"><code>PushSubscription</code></a>实例作为<var>newSubscription</var>。
            </p>
            <p>
                <dfn id="dfn-create-a-push-subscription" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">创建推送订阅</dfn>，给定一个<a data-link-type="idl" data-lt="PushSubscriptionOptionsInit"
                    href="#dom-pushsubscriptionoptionsinit" class="internalDFN"
                    id="ref-for-dom-pushsubscriptionoptionsinit-1"><code>PushSubscriptionOptionsInit</code></a>
                <var data-type="PushSubscriptionOptionsInit">optionsDictionary</var>：
            </p>
            <ol class="algorithm">
                <li>令 <var data-type="PushSubscription">subscription</var> 为一个新的 <a data-link-type="idl"
                        data-lt="PushSubscription" href="#dom-pushsubscription" class="internalDFN"
                        id="ref-for-dom-pushsubscription-3"><code>PushSubscription</code></a>。
                </li>
                <li>令 <var data-type="PushSubscriptionOptions">options</var> 为新创建的 <a data-link-type="idl"
                        data-lt="PushSubscriptionOptions" href="#dom-pushsubscriptionoptions" class="internalDFN"
                        id="ref-for-dom-pushsubscriptionoptions-1"><code>PushSubscriptionOptions</code></a>对象，使用<var
                        data-type="PushSubscriptionOptionsInit">optionsDictionary</var>中的成员和值初始化其属性。
                </li>
                <li>设置 <var data-type="PushSubscription">subscription</var> 的 <a data-link-type="idl"
                        href="#dom-pushsubscription-options" class="internalDFN"
                        id="ref-for-dom-pushsubscription-options-1"><code>options</code></a> 属性为 <var
                        data-type="PushSubscriptionOptions">options</var>。
                </li>
                <li>生成新的 P-256 <a href="#dfn-ecdh" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-ecdh-2"><abbr title="elliptic curve Diffie-Hellman">ECDH</abbr></a> 密钥对
                    [<cite><a class="bibref" data-link-type="biblio" href="#bib-ansi-x9-62"
                            title="Public Key Cryptography for the Financial Services Industry, The Elliptic Curve Digital Signature Algorithm (ECDSA)">ANSI-X9-62</a></cite>]。将私钥存储于
                    <var data-type="PushSubscription">subscription</var> 的内部槽中；该值<em
                        class="rfc2119">不得</em>提供给应用。公钥同样存储于内部槽中，可通过调用 <a data-link-type="idl" data-lt="getKey()"
                        href="#dom-pushsubscription-getkey" class="internalDFN"
                        id="ref-for-dom-pushsubscription-getkey-1"><code>getKey</code></a><code>()</code> 方法并传入参数 "<a
                        data-link-type="idl" href="#dom-pushencryptionkeyname-p256dh" class="internalDFN"
                        id="ref-for-dom-pushencryptionkeyname-p256dh-1"><code>p256dh</code></a>" 获取。
                </li>
                <li>生成新的认证密钥，为一串字节序列，定义见 [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc8291"
                            title="Message Encryption for Web Push">RFC8291</a></cite>]。将认证密钥存储于 <var
                        data-type="PushSubscription">subscription</var> 的内部槽中。可通过调用 <a data-link-type="idl"
                        data-lt="getKey()" href="#dom-pushsubscription-getkey" class="internalDFN"
                        id="ref-for-dom-pushsubscription-getkey-2"><code>getKey</code></a><code>()</code> 方法并传入参数 "<a
                        data-link-type="idl" href="#dom-pushencryptionkeyname-auth" class="internalDFN"
                        id="ref-for-dom-pushencryptionkeyname-auth-1"><code>auth</code></a>" 获取该密钥。
                </li>
                <li>请求新的<a href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-push-subscription-12">推送订阅</a>。当 <var
                        data-type="PushSubscriptionOptions">options</var> 的 <a data-link-type="idl"
                        href="#dom-pushsubscriptionoptions-applicationserverkey" class="internalDFN"
                        id="ref-for-dom-pushsubscriptionoptions-applicationserverkey-1"><code>applicationServerKey</code></a>
                    属性被设置时应包含该属性。若发生<a data-link-type="dfn"
                        href="https://webidl.spec.whatwg.org/#dfn-exception">异常</a>，则重新抛出。
                </li>
                <li>当<a href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-push-subscription-13">推送订阅</a>请求成功完成时：
                    <ol>
                        <li>将 <var data-type="PushSubscription">subscription</var> 的 <a data-link-type="idl"
                                href="#dom-pushsubscription-endpoint" class="internalDFN"
                                id="ref-for-dom-pushsubscription-endpoint-1"><code>endpoint</code></a> 属性设置为该<a
                                href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-push-subscription-14">推送订阅</a>的<a href="#dfn-push-endpoint"
                                class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-endpoint-2">推送端点</a>。
                        </li>
                        <li>如果<a href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-push-subscription-15">推送订阅</a>提供该值，则设置 <var
                                data-type="PushSubscription">subscription</var> 的 <a data-link-type="idl"
                                href="#dom-pushsubscription-expirationtime" class="internalDFN"
                                id="ref-for-dom-pushsubscription-expirationtime-1"><code>expirationTime</code></a>。
                        </li>
                    </ol>
                </li>
                <li>返回 <var data-type="PushSubscription">subscription</var>。
                </li>
            </ol>
            <section id="subscription-refreshes">
                <div class="header-wrapper">
                    <h4 id="x3-4-1-subscription-refreshes"><bdi class="secno">3.4.1 </bdi>
                        订阅刷新
                    </h4><a class="self-link" href="#subscription-refreshes"
                        aria-label="Permalink for Section 3.4.1"></a>
                </div>

                <p>
                    <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-user-agent-17">用户代理</a>或<a href="#dfn-push-service" class="internalDFN"
                        data-link-type="dfn" id="ref-for-dfn-push-service-11">推送服务</a><em
                        class="rfc2119">可以</em>在任何时间选择<dfn id="dfn-refresh" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">刷新</dfn><a href="#dfn-push-subscription" class="internalDFN"
                        data-link-type="dfn" id="ref-for-dfn-push-subscription-16">推送订阅</a>，例如因其达到一定年龄。
                </p>
                <p>
                    当发生刷新时，<a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-user-agent-18">用户代理</a><em class="rfc2119">必须</em>按照创建当前<a
                        href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-push-subscription-17">推送订阅</a>时提供的<a href="#dom-pushsubscriptionoptions"
                        class="internalDFN" data-link-type="idl"
                        id="ref-for-dom-pushsubscriptionoptions-2"><code>PushSubscriptionOptions</code></a>运行<a
                        href="#dfn-create-a-push-subscription" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-create-a-push-subscription-1">创建推送订阅</a>步骤。新<a href="#dfn-push-subscription"
                        class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-subscription-18">推送订阅</a><em
                        class="rfc2119">必须</em>拥有与原订阅不同的密钥对。
                </p>
                <p>
                    刷新成功后，<a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-user-agent-19">用户代理</a><em class="rfc2119">必须</em><a
                        href="#dfn-fire-the-pushsubscriptionchange-event" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-fire-the-pushsubscriptionchange-event-2">触发
                        "<code>pushsubscriptionchange</code>" 事件</a>，将与该<a href="#dfn-push-subscription"
                        class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-subscription-19">推送订阅</a>关联的<a
                        data-link-type="dfn"
                        href="https://www.w3.org/TR/service-workers/#dfn-service-worker-registration">Service Worker
                        注册</a>作为<var>registration</var>，以初始<a href="#dfn-push-subscription" class="internalDFN"
                        data-link-type="dfn" id="ref-for-dfn-push-subscription-20">推送订阅</a>的<a data-link-type="idl"
                        data-lt="PushSubscription" href="#dom-pushsubscription" class="internalDFN"
                        id="ref-for-dom-pushsubscription-6"><code>PushSubscription</code></a>实例作为<var>oldSubscription</var>，以新<a
                        href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-push-subscription-21">推送订阅</a>的<a data-link-type="idl"
                        data-lt="PushSubscription" href="#dom-pushsubscription" class="internalDFN"
                        id="ref-for-dom-pushsubscription-7"><code>PushSubscription</code></a>实例作为<var>newSubscription</var>。
                </p>
                <p>
                    为了给<a href="#dfn-application-server" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-application-server-10">应用服务器</a>传播变更留出时间，<a href="#dfn-user-agent"
                        class="internalDFN" data-link-type="dfn" id="ref-for-dfn-user-agent-20">用户代理</a><em
                        class="rfc2119">可以</em>在刷新后短暂继续接受针对旧<a href="#dfn-push-subscription" class="internalDFN"
                        data-link-type="dfn" id="ref-for-dfn-push-subscription-22">推送订阅</a>的消息。一旦接收到针对已刷新的<a
                        href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-push-subscription-23">推送订阅</a>的消息，所有旧的<a href="#dfn-push-subscription"
                        class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-subscription-24">推送订阅</a><em
                        class="rfc2119">必须</em>被<a href="#dfn-deactivate" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-deactivate-2">停用</a>。
                </p>
                <p>
                    如果<a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-user-agent-21">用户代理</a>无法刷新<a href="#dfn-push-subscription" class="internalDFN"
                        data-link-type="dfn" id="ref-for-dfn-push-subscription-25">推送订阅</a>，则<em
                        class="rfc2119">应当</em>定期重试刷新。当<a href="#dfn-push-subscription" class="internalDFN"
                        data-link-type="dfn" id="ref-for-dfn-push-subscription-26">推送订阅</a>无法再使用时，例如因过期，<a
                        href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-user-agent-22">用户代理</a><em class="rfc2119">必须</em><a
                        href="#dfn-fire-the-pushsubscriptionchange-event" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-fire-the-pushsubscriptionchange-event-3">触发
                        "<code>pushsubscriptionchange</code>" 事件</a>，将与该<a href="#dfn-push-subscription"
                        class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-subscription-27">推送订阅</a>关联的<a
                        data-link-type="dfn"
                        href="https://www.w3.org/TR/service-workers/#dfn-service-worker-registration">Service Worker
                        注册</a>作为<var>registration</var>，以正在失效的<a data-link-type="idl" data-lt="PushSubscription"
                        href="#dom-pushsubscription" class="internalDFN"
                        id="ref-for-dom-pushsubscription-8"><code>PushSubscription</code></a>实例作为<var>oldSubscription</var>，以<code>null</code>作为<var>newSubscription</var>。
                </p>
            </section>
            <section id="subscription-deactivation">
                <div class="header-wrapper">
                    <h4 id="x3-4-2-subscription-deactivation"><bdi class="secno">3.4.2 </bdi>
                        订阅停用
                    </h4><a class="self-link" href="#subscription-deactivation"
                        aria-label="Permalink for Section 3.4.2"></a>
                </div>

                <p>
                    当<a href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-push-subscription-29">推送订阅</a><dfn data-lt="deactivate|deactivated"
                        id="dfn-deactivate" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">停用</dfn>后，<a
                        href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-user-agent-23">用户代理</a>和<a href="#dfn-push-service" class="internalDFN"
                        data-link-type="dfn" id="ref-for-dfn-push-service-12">推送服务</a><em
                        class="rfc2119">必须</em>删除其存储的所有相关信息。后续针对该<a href="#dfn-push-message" class="internalDFN"
                        data-link-type="dfn" id="ref-for-dfn-push-message-19">推送消息</a>的<a href="#dfn-push-subscription"
                        class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-subscription-30">推送订阅</a><em
                        class="rfc2119">不得</em>被投递。
                </p>
                <p>
                    当<a href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-push-subscription-31">推送订阅</a>关联的<a data-link-type="dfn"
                        href="https://www.w3.org/TR/service-workers/#dfn-service-worker-registration">Service Worker
                        注册</a>被注销时，该订阅即被<a href="#dfn-deactivate" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-deactivate-3">停用</a>，但<a href="#dfn-push-subscription" class="internalDFN"
                        data-link-type="dfn" id="ref-for-dfn-push-subscription-32">推送订阅</a><em
                        class="rfc2119">可以</em>更早<a href="#dfn-deactivate" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-deactivate-4">停用</a>。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-0">
                    <div role="heading" class="note-title marker" id="h-note-0" aria-level="5"><span>注意</span></div>
                    <p class="">
                        当<a href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-push-subscription-33">推送订阅</a>被移除时，<a data-link-type="dfn"
                            href="https://www.w3.org/TR/service-workers/#dfn-service-worker-registration">Service Worker
                            注册</a>也会被清除。
                    </p>
                </div>
            </section>
        </section>
        <section id="push-service">
            <div class="header-wrapper">
                <h3 id="x3-5-push-service"><bdi class="secno">3.5 </bdi>
                    推送服务
                </h3><a class="self-link" href="#push-service" aria-label="Permalink for Section 3.5"></a>
            </div>

            <p>
                <dfn data-plurals="push services" id="dfn-push-service" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">推送服务</dfn>指的是一种系统，允许<a href="#dfn-application-server" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-application-server-11">应用服务器</a>向 Web 应用发送<a
                    href="#dfn-push-message" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-push-message-20">推送消息</a>。推送服务为其服务的<a href="#dfn-push-subscription"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-subscription-34">推送订阅</a>提供<a
                    href="#dfn-push-endpoint" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-push-endpoint-3">推送端点</a>或<a data-lt="push endpoints" href="#dfn-push-endpoint"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-endpoint-4">端点</a>。
            </p>
            <p>
                <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-user-agent-24">用户代理</a>连接到用于创建<a href="#dfn-push-subscription" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-push-subscription-35">推送订阅</a>的<a href="#dfn-push-service"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-service-13">推送服务</a>。<a
                    href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-user-agent-25">用户代理</a><em class="rfc2119">可以</em>限制可用的<a href="#dfn-push-service"
                    class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-push-service-14">推送服务</a>的选择。这样做的原因包括与性能相关的考虑，例如服务可用性（包括某些国家或工作场所网络是否被防火墙阻断）、可靠性、电池寿命影响，以及协议指定元数据流向特定<a
                    href="#dfn-push-service" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-push-service-15">推送服务</a>或规避某些服务的协议约定。
            </p>
        </section>
        <section id="permission">
            <div class="header-wrapper">
                <h3 id="x3-6-permission"><bdi class="secno">3.6 </bdi>
                    权限
                </h3><a class="self-link" href="#permission" aria-label="Permalink for Section 3.6"></a>
            </div>

            <p>
                推送 API 是一个被<a data-link-type="dfn"
                    href="https://www.w3.org/TR/permissions/#dfn-powerful-feature">识别为强大功能</a>的特性，其<a
                    data-link-type="dfn" href="https://www.w3.org/TR/permissions/#dfn-name">名称</a>为<dfn
                    class="permission export" data-dfn-type="permission" data-export="" id="dfn-push" tabindex="0"
                    aria-haspopup="dialog">"push"</dfn>。
            </p>
            <p>
                为了与<cite><a data-matched-text="[[[Permissions]]]"
                        href="https://www.w3.org/TR/permissions/">权限规范</a></cite>集成，本规范定义了<a data-link-type="idl"
                    data-lt="PushPermissionDescriptor" href="#dom-pushpermissiondescriptor" class="internalDFN"
                    id="ref-for-dom-pushpermissiondescriptor-1"><code>PushPermissionDescriptor</code></a> <a
                    data-link-type="dfn"
                    href="https://www.w3.org/TR/permissions/#dfn-permission-descriptor-type">权限描述符类型</a>。
            </p>
            <pre class="idl def" id="webidl-1117437819"><span class="idlHeader"><a class="self-link" href="#webidl-1117437819">WebIDL</a></span><code><span data-idl="" class="idlDictionary" id="idl-def-pushpermissiondescriptor" data-title="PushPermissionDescriptor">dictionary <dfn data-export="" data-dfn-type="dictionary" id="dom-pushpermissiondescriptor" data-idl="dictionary" data-title="PushPermissionDescriptor" data-dfn-for="" class="idlID" tabindex="0" aria-haspopup="dialog"><code>PushPermissionDescriptor</code></dfn> : <span class="idlSuperclass"><a data-link-type="dictionary" href="https://www.w3.org/TR/permissions/#dom-permissiondescriptor">PermissionDescriptor</a></span> {<span data-idl="" class="idlMember" id="idl-def-pushpermissiondescriptor-uservisibleonly" data-title="userVisibleOnly" data-dfn-for="PushPermissionDescriptor"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean">boolean</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-pushpermissiondescriptor-uservisibleonly" id="ref-for-dom-pushpermissiondescriptor-uservisibleonly-1"><code>userVisibleOnly</code></a> = false;</span>
};</span></code></pre>
            <p data-dfn-for="PushPermissionDescriptor">
                <dfn data-export="" data-dfn-type="dict-member" id="dom-pushpermissiondescriptor-uservisibleonly"
                    data-idl="field" data-title="userVisibleOnly" data-dfn-for="PushPermissionDescriptor"
                    data-type="boolean" tabindex="0" aria-haspopup="dialog"><code>userVisibleOnly</code></dfn> 的语义与<a
                    data-link-type="idl" href="#dom-pushsubscriptionoptionsinit-uservisibleonly" class="internalDFN"
                    id="ref-for-dom-pushsubscriptionoptionsinit-uservisibleonly-1"><code>userVisibleOnly</code></a>一致。
            </p>
            <p>
                <code>{name: "push", userVisibleOnly: false}</code> 比 <code>{name: "push", userVisibleOnly: true}</code>
                <a data-link-type="dfn" href="https://www.w3.org/TR/permissions/#dfn-stronger-than">权限更高</a>。
            </p>
        </section>
    </section>
    <section id="security-and-privacy-considerations">
        <div class="header-wrapper">
            <h2 id="x4-security-and-privacy-considerations"><bdi class="secno">4. </bdi>
                安全与隐私注意事项
            </h2><a class="self-link" href="#security-and-privacy-considerations"
                aria-label="Permalink for Section 4."></a>
        </div>

        <p>
            <a href="#dfn-push-message" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-message-21">推送消息</a>的内容是加密的 [<cite><a class="bibref" data-link-type="biblio"
                    href="#bib-rfc8291" title="Message Encryption for Web Push">RFC8291</a></cite>]。然而，<a
                href="#dfn-push-service" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-service-16">推送服务</a>仍然能接触到由<a href="#dfn-application-server" class="internalDFN"
                data-link-type="dfn" id="ref-for-dfn-application-server-12">应用服务器</a>通过<a href="#dfn-push-subscription"
                class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-subscription-36">推送订阅</a>发送给<a
                href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-user-agent-26">用户代理</a>的信息元数据。这包括消息的时间、频率和大小。除了更换<a href="#dfn-push-service"
                class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-service-17">推送服务</a>（用户代理可能不允许），唯一已知的缓解措施是通过填充增加表面上的消息大小。
        </p>
        <p>
            无法保证<a href="#dfn-push-message" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-message-22">推送消息</a>一定是由和 Web 应用同源的<a href="#dfn-application-server"
                class="internalDFN" data-link-type="dfn" id="ref-for-dfn-application-server-13">应用服务器</a>发送的。<a
                href="#dfn-application-server" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-application-server-14">应用服务器</a>可自行决定将使用<a href="#dfn-push-subscription"
                class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-subscription-37">推送订阅</a>所需的详细信息分享给第三方。
        </p>
        <p>
            下述要求旨在尽可能保护用户的隐私与安全，同时在满足该目标的前提下，保护<a href="#dfn-application-server" class="internalDFN"
                data-link-type="dfn" id="ref-for-dfn-application-server-15">应用服务器</a>与用户之间通信的完整性。
        </p>
        <p>
            <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-user-agent-27">用户代理</a><em class="rfc2119">不得</em>在未获得用户<a data-link-type="dfn"
                href="https://www.w3.org/TR/permissions/#dfn-express-permission">明确许可</a>的情况下向 Web 应用开放 Push API。<a
                href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-user-agent-28">用户代理</a><em
                class="rfc2119">必须</em>在每次调用<code>subscribe()</code>方法时通过用户界面获取许可，除非已保存的许可或预设的信任关系适用。超出当前浏览会话保存的权限<em
                class="rfc2119">必须</em>可撤销。
        </p>
        <p>
            Push API 可能需要唤醒与<a data-link-type="dfn"
                href="https://www.w3.org/TR/service-workers/#dfn-service-worker-registration">Service Worker 注册</a>相关联的
            Service Worker，以运行开发者提供的事件处理器。这可能会造成资源消耗，如网络流量，<a href="#dfn-user-agent" class="internalDFN"
                data-link-type="dfn" id="ref-for-dfn-user-agent-29">用户代理</a><em class="rfc2119">应当</em>将这些消耗归因于创建该<a
                href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-subscription-38">推送订阅</a>的 Web 应用。
        </p>
        <p>
            <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-user-agent-30">用户代理</a><em class="rfc2119">可以</em>在获取权限或判断权限状态时考虑<a
                href="#dom-pushsubscriptionoptions" class="internalDFN" data-link-type="idl"
                id="ref-for-dom-pushsubscriptionoptions-3"><code>PushSubscriptionOptions</code></a>。
        </p>
        <p>
            权限被撤销时，<a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-user-agent-31">用户代理</a><em class="rfc2119">可以</em>为使用该权限创建的订阅<a
                href="#dfn-fire-the-pushsubscriptionchange-event" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-fire-the-pushsubscriptionchange-event-4">触发 "<code>pushsubscriptionchange</code>"
                事件</a>，使用与该<a data-link-type="dfn"
                href="https://www.w3.org/TR/service-workers/#dfn-service-worker-registration">Service Worker 注册</a>相关的<a
                href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-subscription-39">推送订阅</a>为<var>registration</var>，以代表<a
                href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-subscription-40">推送订阅</a>的<a data-link-type="idl" data-lt="PushSubscription"
                href="#dom-pushsubscription" class="internalDFN"
                id="ref-for-dom-pushsubscription-9"><code>PushSubscription</code></a>实例为<var>oldSubscription</var>，<code>null</code>为<var>newSubscription</var>。<a
                href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-user-agent-32">用户代理</a><em class="rfc2119">必须</em>并行<a href="#dfn-deactivate"
                class="internalDFN" data-link-type="dfn" id="ref-for-dfn-deactivate-5">停用</a>受影响的订阅。
        </p>
        <p>
            当<a data-link-type="dfn"
                href="https://www.w3.org/TR/service-workers/#dfn-service-worker-registration">Service Worker
                注册</a>被注销时，所有关联的<a href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-subscription-41">推送订阅</a><em class="rfc2119">必须</em>被<a href="#dfn-deactivate"
                class="internalDFN" data-link-type="dfn" id="ref-for-dfn-deactivate-6">停用</a>。
        </p>
        <p>
            <a href="#dfn-push-endpoint" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-endpoint-5">推送端点</a><em class="rfc2119">不得</em>泄露用户的设备、身份或位置等信息给除<a
                href="#dfn-push-service" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-service-18">推送服务</a>以外的参与者。具体要求参见 [<cite><a class="bibref" data-link-type="biblio"
                    href="#bib-rfc8030" title="Generic Event Delivery Using HTTP Push">RFC8030</a></cite>] 的隐私注意事项。
        </p>
        <p>
            <a href="#dfn-deactivate" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-deactivate-7">已停用</a>的<a
                href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-subscription-42">推送订阅</a>的<a href="#dfn-push-endpoint" class="internalDFN"
                data-link-type="dfn" id="ref-for-dfn-push-endpoint-6">推送端点</a><em class="rfc2119">不得</em>被新<a
                href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-subscription-43">推送订阅</a>复用。这可防止用户无法移除的持久标识符的创建，也能防止利用某一<a
                href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-subscription-44">推送订阅</a>的详情向另一<a href="#dfn-push-subscription" class="internalDFN"
                data-link-type="dfn" id="ref-for-dfn-push-subscription-45">推送订阅</a>发送<a href="#dfn-push-message"
                class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-message-23">推送消息</a>。
        </p>
        <p>
            <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-user-agent-33">用户代理</a><em class="rfc2119">必须</em>仅在<a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/webappapis.html#secure-context">安全上下文</a>中实现 Push
            API。这能更好地防护针对推送订阅数据的中间人攻击。浏览器可仅为开发目的忽略此规则。
        </p>
    </section>
    <section class="informative" id="pushframework">
        <div class="header-wrapper">
            <h2 id="x5-push-framework"><bdi class="secno">5. </bdi>
                推送框架
            </h2><a class="self-link" href="#pushframework" aria-label="Permalink for Section 5."></a>
        </div>
        <p><em>本节为非规范性内容。</em></p>

        <p>
            <a href="#dfn-push-message" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-message-24">推送消息</a>从<a href="#dfn-application-server" class="internalDFN"
                data-link-type="dfn" id="ref-for-dfn-application-server-16">应用服务器</a>发送到 Web 应用的流程如下：
        </p>
        <ul>
            <li><a href="#dfn-application-server" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-application-server-17">应用服务器</a>请求<a href="#dfn-push-service" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-push-service-19">推送服务</a>使用 [<cite><a class="bibref"
                        data-link-type="biblio" href="#bib-rfc8030"
                        title="Generic Event Delivery Using HTTP Push">RFC8030</a></cite>] 投递<a href="#dfn-push-message"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-message-25">推送消息</a>。该请求使用<a
                    href="#dfn-push-endpoint" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-push-endpoint-7">推送端点</a>，该端点包含在<a href="#dfn-push-subscription" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-push-subscription-46">推送订阅</a>中；
            </li>
            <li><a href="#dfn-push-service" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-push-service-20">推送服务</a>将消息投递给指定的<a href="#dfn-user-agent" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-user-agent-34">用户代理</a>，并在消息中标识<a href="#dfn-push-endpoint"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-endpoint-8">推送端点</a>；
            </li>
            <li><a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-user-agent-35">用户代理</a>识别目标<a data-link-type="dfn"
                    href="https://www.w3.org/TR/service-workers/#dfn-service-worker">Service Worker</a>并按需激活，最终将<a
                    href="#dfn-push-message" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-push-message-26">推送消息</a>投递给<a data-link-type="dfn"
                    href="https://www.w3.org/TR/service-workers/#dfn-service-worker">Service Worker</a>。
            </li>
        </ul>
        <p>
            这一整体框架允许<a href="#dfn-application-server" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-application-server-18">应用服务器</a>在发生事件时激活<a data-link-type="dfn"
                href="https://www.w3.org/TR/service-workers/#dfn-service-worker">Service Worker</a>。这些事件的信息可包含在<a
                href="#dfn-push-message" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-message-27">推送消息</a>中，使 Web 应用能够适时响应这些事件，甚至无需主动发起网络请求。
        </p>
        <p>
            下述代码和示意图展示了推送 API 的一个假设用例。
        </p>
        <section class="informative" id="example">
            <div class="header-wrapper">
                <h3 id="x5-1-example"><bdi class="secno">5.1 </bdi>
                    示例
                </h3><a class="self-link" href="#example" aria-label="Permalink for Section 5.1"></a>
            </div>
            <p><em>本节为非规范性内容。</em></p>

            <div class="example" id="example-2">
                <div class="marker">
                    <a class="self-link" href="#example-2">示例<bdi> 2</bdi></a>
                </div>
                <pre aria-busy="false"><code class="hljs javascript"><span class="hljs-comment">// https://example.com/serviceworker.js</span>
<span class="hljs-variable language_">this</span>.<span class="hljs-property">onpush</span> = <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(event.<span class="hljs-property">data</span>);
  <span class="hljs-comment">// 可以在这里将数据写入 IndexedDB、发送到任意已打开的窗口、显示通知等。</span>
}

<span class="hljs-comment">// https://example.com/webapp.js</span>
<span class="hljs-comment">// 在异步函数内部...</span>
<span class="hljs-keyword">try</span> {
  <span class="hljs-keyword">const</span> serviceWorkerRegistration = <span class="hljs-keyword">await</span> navigator.<span class="hljs-property">serviceWorker</span>.<span class="hljs-title function_">register</span>(
    <span class="hljs-string">"serviceworker.js"</span>
  );
  <span class="hljs-keyword">const</span> pushSubscription = <span class="hljs-keyword">await</span> serviceWorkerRegistration.<span class="hljs-property">pushManager</span>.<span class="hljs-title function_">subscribe</span>();
  <span class="hljs-comment">// 现在已获得应用服务器需要的推送订阅详细信息，可以通过例如 XMLHttpRequest 发送给服务器。</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(pushSubscription.<span class="hljs-property">endpoint</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(pushSubscription.<span class="hljs-title function_">getKey</span>(<span class="hljs-string">"p256dh"</span>));
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(pushSubscription.<span class="hljs-title function_">getKey</span>(<span class="hljs-string">"auth"</span>));
} <span class="hljs-keyword">catch</span> (err) {
  <span class="hljs-comment">// 在生产环境下也可以将错误信息上报给应用服务器。</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(error);
}</code></pre>
            </div>
        </section>
        <section class="informative" id="sequence-diagram">
            <div class="header-wrapper">
                <h3 id="x5-2-sequence-diagram"><bdi class="secno">5.2 </bdi>
                    时序图
                </h3><a class="self-link" href="#sequence-diagram" aria-label="Permalink for Section 5.2"></a>
            </div>
            <p><em>本节为非规范性内容。</em></p>

            <figure id="fig-example-flow-of-events-for-subscription-push-message-delivery-and-unsubscription">
                <a href="https://www.w3.org/TR/push-api/images/sequence_diagram.png"><img src="https://www.w3.org/TR/push-api/images/sequence_diagram.png" width="795" height="870"
                        alt="订阅、推送消息投递和退订的示例事件流程"></a>
                <figcaption><a class="self-link"
                        href="#fig-example-flow-of-events-for-subscription-push-message-delivery-and-unsubscription">图
                        <bdi class="figno">1</bdi></a> <span class="fig-title">
                        订阅、推送消息投递和退订的示例事件流程
                    </span></figcaption>
            </figure>
        </section>
        <section id="push-service-use">
            <div class="header-wrapper">
                <h3 id="x5-3-push-service-use"><bdi class="secno">5.3 </bdi>
                    推送服务使用
                </h3><a class="self-link" href="#push-service-use" aria-label="Permalink for Section 5.3"></a>
            </div>

            <p>
                <a data-link-type="idl" data-lt="PushSubscription" href="#dom-pushsubscription" class="internalDFN"
                    id="ref-for-dom-pushsubscription-10"><code>PushSubscription</code></a>包含的字段即为<a
                    href="#dfn-application-server" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-application-server-20">应用服务器</a>发送<a href="#dfn-push-message" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-push-message-28">推送消息</a>所需的全部信息。与 Push API 兼容的推送服务会提供符合<a
                    href="#dfn-web-push-protocol" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-web-push-protocol-2">Web 推送协议</a>的<a href="#dfn-push-endpoint" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-push-endpoint-9">推送端点</a>。这些参数和属性包括：
            </p>
            <ul>
                <li><a href="#dfn-push-endpoint" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-push-endpoint-10">推送端点</a>是<a data-link-type="idl" data-lt="PushSubscription"
                        href="#dom-pushsubscription" class="internalDFN"
                        id="ref-for-dom-pushsubscription-11"><code>PushSubscription</code></a>的一个 URL，允许<a
                        href="#dfn-application-server" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-application-server-21">应用服务器</a>向 Web 应用请求投递<a href="#dfn-push-message"
                        class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-message-29">推送消息</a>。
                </li>
                <li>在<a data-link-type="idl" data-lt="PushSubscription" href="#dom-pushsubscription" class="internalDFN"
                        id="ref-for-dom-pushsubscription-12"><code>PushSubscription</code></a>上调用<a data-link-type="idl"
                        data-lt="getKey()" href="#dom-pushsubscription-getkey" class="internalDFN"
                        id="ref-for-dom-pushsubscription-getkey-3"><code>getKey</code></a><code>()</code>方法用于获取加密和认证<a
                        href="#dfn-push-message" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-push-message-30">推送消息</a>所需的密钥材料。每次调用该函数会返回一个新的<a data-link-type="interface"
                        data-lt="ArrayBuffer"
                        href="https://webidl.spec.whatwg.org/#idl-ArrayBuffer"><code>ArrayBuffer</code></a>，包含所对应密钥的值，如果指定密钥不存在则返回<code>null</code>。传递"<a
                        data-link-type="idl" href="#dom-pushencryptionkeyname-p256dh" class="internalDFN"
                        id="ref-for-dom-pushencryptionkeyname-p256dh-2"><code>p256dh</code></a>"可获取与<a
                        href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-push-subscription-47">推送订阅</a>关联的<dfn data-abbr="ECDH"
                        data-lt="ECDH|elliptic curve Diffie-Hellman" id="dfn-ecdh" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">椭圆曲线 Diffie-Hellman</dfn>（<abbr
                        title="elliptic curve Diffie-Hellman">ECDH</abbr>）公钥。传递<code>auth</code>可获取应用服务器用于消息认证的认证密钥。这些密钥由<a
                        href="#dfn-application-server" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-application-server-22">应用服务器</a>用于加密和认证针对<a href="#dfn-push-subscription"
                        class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-subscription-48">推送订阅</a>的消息，详细见
                    [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc8291"
                            title="Message Encryption for Web Push">RFC8291</a></cite>]。
                </li>
            </ul>
        </section>
    </section>
    <section data-dfn-for="ServiceWorkerRegistration" id="extensions-to-the-serviceworkerregistration-interface">
        <div class="header-wrapper">
            <h2 id="x6-extensions-to-the-serviceworkerregistration-interface"><bdi class="secno">6. </bdi>
                <code>ServiceWorkerRegistration</code> 接口扩展
            </h2><a class="self-link" href="#extensions-to-the-serviceworkerregistration-interface"
                aria-label="Permalink for Section 6."></a>
        </div>

        <p>
            Service Worker 规范定义了一个 <a data-link-type="interface" data-lt="ServiceWorkerRegistration"
                href="https://www.w3.org/TR/service-workers/#serviceworkerregistration"><code>ServiceWorkerRegistration</code></a>
            接口
            [<cite><a class="bibref" data-link-type="biblio" href="#bib-service-workers"
                    title="Service Workers">SERVICE-WORKERS</a></cite>]，本规范对此接口进行了扩展。
        </p>
        <pre class="idl def" data-cite="WEBIDL SERVICE-WORKERS" id="webidl-27231878"><span class="idlHeader"><a class="self-link" href="#webidl-27231878">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-serviceworkerregistration-partial-1" data-title="ServiceWorkerRegistration">[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>]
partial interface <a data-idl="partial" data-link-type="interface" data-title="ServiceWorkerRegistration" class="idlID" data-dfn-for="ServiceWorkerRegistration" href="https://www.w3.org/TR/service-workers/#serviceworkerregistration">ServiceWorkerRegistration</a> {<span data-idl="" class="idlAttribute" id="idl-def-serviceworkerregistration-pushmanager" data-title="pushManager" data-dfn-for="ServiceWorkerRegistration">
  readonly attribute<span class="idlType"> <a data-link-type="idl" href="#dom-pushmanager" class="internalDFN" id="ref-for-dom-pushmanager-1"><code>PushManager</code></a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-serviceworkerregistration-pushmanager" id="ref-for-dom-serviceworkerregistration-pushmanager-1"><code>pushManager</code></a>;</span>
};</span></code></pre>
        <p>
            <dfn data-export="" data-dfn-type="attribute" id="dom-serviceworkerregistration-pushmanager"
                data-idl="attribute" data-title="pushManager" data-dfn-for="ServiceWorkerRegistration"
                data-type="PushManager" data-lt="pushManager" data-local-lt="ServiceWorkerRegistration.pushManager"
                tabindex="0" aria-haspopup="dialog"><code>pushManager</code></dfn> 属性暴露了一个 <a data-link-type="idl"
                data-lt="PushManager" href="#dom-pushmanager" class="internalDFN"
                id="ref-for-dom-pushmanager-2"><code>PushManager</code></a>，它与当前的<a data-link-type="dfn"
                href="https://www.w3.org/TR/service-workers/#dfn-service-worker-registration">Service Worker
                注册</a>相关联，并通过 <a data-link-type="interface" data-lt="ServiceWorkerRegistration"
                href="https://www.w3.org/TR/service-workers/#serviceworkerregistration"><code>ServiceWorkerRegistration</code></a>
            进行表示。
        </p>
    </section>
    <section data-dfn-for="PushManager" id="pushmanager-interface">
        <div class="header-wrapper">
            <h2 id="x7-pushmanager-interface"><bdi class="secno">7. </bdi>
                <dfn data-export="" data-dfn-type="interface" id="dom-pushmanager" data-idl="interface"
                    data-title="PushManager" data-dfn-for="" tabindex="0"
                    aria-haspopup="dialog"><code>PushManager</code></dfn> 接口
            </h2><a class="self-link" href="#pushmanager-interface" aria-label="Permalink for Section 7."></a>
        </div>

        <p>
            <a data-link-type="idl" data-lt="PushManager" href="#dom-pushmanager" class="internalDFN"
                id="ref-for-dom-pushmanager-3"><code>PushManager</code></a> 接口定义了访问<a href="#dfn-push-service"
                class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-service-21">推送服务</a>的相关操作。
        </p>
        <pre class="idl def" id="webidl-1816674501"><span class="idlHeader"><a class="self-link" href="#webidl-1816674501">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-pushmanager" data-title="PushManager">[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=(Window,Worker)</span>, <span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>]
interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-pushmanager" id="ref-for-dom-pushmanager-4"><code>PushManager</code></a> {<span data-idl="" class="idlAttribute" id="idl-def-pushmanager-supportedcontentencodings" data-title="supportedContentEncodings" data-dfn-for="PushManager">
  [<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject">SameObject</a></span>] static readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-frozen-array">FrozenArray</a>&lt;<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a>&gt;</span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-pushmanager-supportedcontentencodings" id="ref-for-dom-pushmanager-supportedcontentencodings-1"><code>supportedContentEncodings</code></a>;</span><span data-idl="" class="idlMethod" id="idl-def-pushmanager-subscribe-options" data-title="subscribe" data-dfn-for="PushManager"><span class="idlType">

  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dom-pushsubscription" class="internalDFN" id="ref-for-dom-pushsubscription-13"><code>PushSubscription</code></a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-pushmanager-subscribe" id="ref-for-dom-pushmanager-subscribe-1"><code>subscribe</code></a>(optional<span class="idlType"> <a data-link-type="idl" href="#dom-pushsubscriptionoptionsinit" class="internalDFN" id="ref-for-dom-pushsubscriptionoptionsinit-2"><code>PushSubscriptionOptionsInit</code></a></span> <span class="idlParamName">options</span> = {});</span><span data-idl="" class="idlMethod" id="idl-def-pushmanager-getsubscription" data-title="getSubscription" data-dfn-for="PushManager"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dom-pushsubscription" class="internalDFN" id="ref-for-dom-pushsubscription-14"><code>PushSubscription</code></a>?&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-pushmanager-getsubscription" id="ref-for-dom-pushmanager-getsubscription-1"><code>getSubscription</code></a>();</span><span data-idl="" class="idlMethod" id="idl-def-pushmanager-permissionstate-options" data-title="permissionState" data-dfn-for="PushManager"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="enum" href="https://www.w3.org/TR/permissions/#dom-permissionstate">PermissionState</a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-pushmanager-permissionstate" id="ref-for-dom-pushmanager-permissionstate-1"><code>permissionState</code></a>(optional<span class="idlType"> <a data-link-type="idl" href="#dom-pushsubscriptionoptionsinit" class="internalDFN" id="ref-for-dom-pushsubscriptionoptionsinit-3"><code>PushSubscriptionOptionsInit</code></a></span> <span class="idlParamName">options</span> = {});</span>
};</span></code></pre>
        <p>
            <dfn data-export="" data-dfn-type="attribute" id="dom-pushmanager-supportedcontentencodings"
                data-idl="attribute" data-title="supportedContentEncodings" data-dfn-for="PushManager"
                data-type="FrozenArray" data-lt="supportedContentEncodings"
                data-local-lt="PushManager.supportedContentEncodings" tabindex="0"
                aria-haspopup="dialog"><code>supportedContentEncodings</code></dfn> 属性暴露了可用来加密<a
                href="#dfn-push-message" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-message-31">推送消息</a>载荷的内容编码序列。内容编码通过 <a href="#dfn-content-encoding"
                class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-content-encoding-1"><code>Content-Encoding</code></a> 头字段指示，在向<a
                href="#dfn-push-service" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-service-22">推送服务</a>请求发送<a href="#dfn-push-message" class="internalDFN"
                data-link-type="dfn" id="ref-for-dfn-push-message-32">推送消息</a>时使用。
        </p>
        <p>
            <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-user-agent-36">用户代理</a><em class="rfc2119">必须</em>支持 [<cite><a class="bibref"
                    data-link-type="biblio" href="#bib-rfc8291"
                    title="Message Encryption for Web Push">RFC8291</a></cite>] 定义的 <code>aes128gcm</code> 内容编码，且<em
                class="rfc2119">可以</em>为兼容原因支持早期规范版本定义的内容编码。
        </p>
        <section id="subscribe-method">
            <div class="header-wrapper">
                <h3 id="x7-1-subscribe-method"><bdi class="secno">7.1 </bdi>
                    <code>subscribe()</code> 方法
                </h3><a class="self-link" href="#subscribe-method" aria-label="Permalink for Section 7.1"></a>
            </div>
            <p>
                当调用 <dfn data-export="" data-dfn-type="method" id="dom-pushmanager-subscribe" data-idl="operation"
                    data-title="subscribe()" data-dfn-for="PushManager" data-type="Promise"
                    data-lt="subscribe()|subscribe(options)"
                    data-local-lt="PushManager.subscribe|PushManager.subscribe()|subscribe" tabindex="0"
                    aria-haspopup="dialog"><code>subscribe()</code></dfn> 方法时，<em class="rfc2119">必须</em>依次执行以下步骤：
            </p>
            <ol class="algorithm">
                <li>令 <var>promise</var> 为 <a data-link-type="dfn"
                        href="https://webidl.spec.whatwg.org/#a-new-promise">新建的 promise</a>。
                </li>
                <li>令 <var>global</var> 为 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this">this</a> 的
                    <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global">相关全局对象</a>。
                </li>
                <li>返回 <var>promise</var>，并继续<a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">并行</a>执行。
                    <div class="note" role="note" id="issue-container-generatedID-1">
                        <div role="heading" class="note-title marker" id="h-note-1" aria-level="3">
                            <span>注意</span><span class="issue-label">：不同用户代理的校验顺序可能不同</span>
                        </div>
                        <aside class="">
                            <p>
                                由于实现细节不同，已知用户代理会以不同顺序进行以下某些校验（例如，有的会在校验 <a data-link-type="idl"
                                    href="#dom-pushsubscriptionoptionsinit-uservisibleonly" class="internalDFN"
                                    id="ref-for-dom-pushsubscriptionoptionsinit-uservisibleonly-2"><code>userVisibleOnly</code></a>
                                是否允许后才校验 <a data-link-type="idl"
                                    href="#dom-pushsubscriptionoptionsinit-applicationserverkey" class="internalDFN"
                                    id="ref-for-dom-pushsubscriptionoptionsinit-applicationserverkey-1"><code>applicationServerKey</code></a>，反之亦然）。但我们认为这不会影响实现或
                                Web 应用的互操作性。
                            </p>
                        </aside>
                    </div>
                </li>
                <li>如果 <var>options</var> 参数的 <a data-link-type="idl"
                        href="#dom-pushsubscriptionoptionsinit-uservisibleonly" class="internalDFN"
                        id="ref-for-dom-pushsubscriptionoptionsinit-uservisibleonly-3"><code>userVisibleOnly</code></a>
                    值
                    被设置为 <code>false</code> 且用户代理要求为 <code>true</code>，则<a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task">在网络任务源上排队全局任务</a>，使用
                    <var>global</var> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject">拒绝</a>
                    <var>promise</var>，错误为 "<a data-link-type="exception"
                        href="https://webidl.spec.whatwg.org/#notallowederror"><code>NotAllowedError</code></a>"
                    <a data-link-type="interface" data-lt="DOMException"
                        href="https://webidl.spec.whatwg.org/#idl-DOMException"><code>DOMException</code></a>
                </li>
                <li>如果 <var>options</var> 参数未包含非 null 的 <a data-link-type="idl"
                        href="#dom-pushsubscriptionoptionsinit-applicationserverkey" class="internalDFN"
                        id="ref-for-dom-pushsubscriptionoptionsinit-applicationserverkey-2"><code>applicationServerKey</code></a>
                    成员，且<a href="#dfn-push-service" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-push-service-23">推送服务</a>要求必须提供，则<a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task">在网络任务源上排队全局任务</a>，使用
                    <var>global</var> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject">拒绝</a>
                    <var>promise</var>，错误为 "<a data-link-type="exception"
                        href="https://webidl.spec.whatwg.org/#notsupportederror"><code>NotSupportedError</code></a>" <a
                        data-link-type="interface" data-lt="DOMException"
                        href="https://webidl.spec.whatwg.org/#idl-DOMException"><code>DOMException</code></a>。
                </li>
                <li>如果 <var>options</var> 参数包含非 null 的 <a data-link-type="idl"
                        href="#dom-pushsubscriptionoptions-applicationserverkey" class="internalDFN"
                        id="ref-for-dom-pushsubscriptionoptions-applicationserverkey-2"><code>applicationServerKey</code></a>
                    属性，则执行以下子步骤：
                    <ol>
                        <li>如果 <var>options</var> 的 <a data-link-type="idl"
                                href="#dom-pushsubscriptionoptionsinit-applicationserverkey" class="internalDFN"
                                id="ref-for-dom-pushsubscriptionoptionsinit-applicationserverkey-3"><code>applicationServerKey</code></a>
                            是
                            <a data-link-type="interface" data-lt="DOMString"
                                href="https://webidl.spec.whatwg.org/#idl-DOMString"><code>DOMString</code></a>，则将其值设置为一个
                            <a data-link-type="interface" data-lt="ArrayBuffer"
                                href="https://webidl.spec.whatwg.org/#idl-ArrayBuffer"><code>ArrayBuffer</code></a>，包含以
                            base64url 编码 [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc7515"
                                    title="JSON Web Signature (JWS)">RFC7515</a></cite>] 解码 <var>options</var> 的 <a
                                data-link-type="idl" href="#dom-pushsubscriptionoptionsinit-applicationserverkey"
                                class="internalDFN"
                                id="ref-for-dom-pushsubscriptionoptionsinit-applicationserverkey-4"><code>applicationServerKey</code></a>
                            后得到的字节序列。
                        </li>
                        <li>如果解码失败，则<a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task">在网络任务源上排队全局任务</a>，使用
                            <var>global</var> <a data-link-type="dfn"
                                href="https://webidl.spec.whatwg.org/#reject">拒绝</a> <var>promise</var>，错误为 "<a
                                data-link-type="exception"
                                href="https://webidl.spec.whatwg.org/#invalidcharactererror"><code>InvalidCharacterError</code></a>"
                            <a data-link-type="interface" data-lt="DOMException"
                                href="https://webidl.spec.whatwg.org/#idl-DOMException"><code>DOMException</code></a>
                            并终止这些步骤。
                        </li>
                        <li>确保 <var>options</var> 的 <a data-link-type="idl"
                                href="#dom-pushsubscriptionoptionsinit-applicationserverkey" class="internalDFN"
                                id="ref-for-dom-pushsubscriptionoptionsinit-applicationserverkey-5"><code>applicationServerKey</code></a>
                            描述的是 P-256 曲线上的有效点。如果值无效，则<a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task">在网络任务源上排队全局任务</a>，使用
                            <var>global</var> <a data-link-type="dfn"
                                href="https://webidl.spec.whatwg.org/#reject">拒绝</a> <var>promise</var>，错误为 "<a
                                data-link-type="exception"
                                href="https://webidl.spec.whatwg.org/#invalidaccesserror"><code>InvalidAccessError</code></a>"
                            <a data-link-type="interface" data-lt="DOMException"
                                href="https://webidl.spec.whatwg.org/#idl-DOMException"><code>DOMException</code></a>
                            并终止这些步骤。
                        </li>
                    </ol>
                </li>
                <li>令 <var data-type="ServiceWorkerRegistration">registration</var> 为 <a data-link-type="dfn"
                        href="https://webidl.spec.whatwg.org/#this">this</a> 关联的 <a data-link-type="dfn"
                        href="https://www.w3.org/TR/service-workers/#dfn-service-worker-registration">Service Worker
                        注册</a>。
                </li>
                <li>如果 <var data-type="ServiceWorkerRegistration">registration</var> 的 <a data-link-type="dfn"
                        href="https://www.w3.org/TR/service-workers/#dfn-active-worker">活跃 worker</a>为 null，则<a
                        data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task">在网络任务源上排队全局任务</a>，使用
                    <var>global</var> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject">拒绝</a>
                    <var>promise</var>，错误为
                    "<a data-link-type="exception"
                        href="https://webidl.spec.whatwg.org/#invalidstateerror"><code>InvalidStateError</code></a>" <a
                        data-link-type="interface" data-lt="DOMException"
                        href="https://webidl.spec.whatwg.org/#idl-DOMException"><code>DOMException</code></a> 并终止这些步骤。
                </li>
                <li>令 <var>permission</var> 为 <a data-link-type="dfn"
                        href="https://www.w3.org/TR/permissions/#dfn-request-permission-to-use">请求使用权限</a> "push"。
                </li>
                <li>如果 <var>permission</var> 为 "<a data-link-type="enum-value"
                        href="https://www.w3.org/TR/permissions/#dom-permissionstate-denied"><code>denied</code></a>"，
                    <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task">在用户交互任务源上排队全局任务</a>，使用
                    <var>global</var> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject">拒绝</a>
                    <var>promise</var>，错误为
                    "<a data-link-type="exception"
                        href="https://webidl.spec.whatwg.org/#notallowederror"><code>NotAllowedError</code></a>" <a
                        data-link-type="interface" data-lt="DOMException"
                        href="https://webidl.spec.whatwg.org/#idl-DOMException"><code>DOMException</code></a> 并终止这些步骤。
                </li>
                <li>如果 <var data-type="ServiceWorkerRegistration">registration</var> 有一个 <a
                        href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-push-subscription-49">推送订阅</a>：
                    <ol>
                        <li>令 <var>subscription</var> 为获取 <var data-type="ServiceWorkerRegistration">registration</var>
                            的 <a href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-push-subscription-50">推送订阅</a>的结果。如果出错，<a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task">在网络任务源上排队全局任务</a>，使用
                            <var>global</var> <a data-link-type="dfn"
                                href="https://webidl.spec.whatwg.org/#reject">拒绝</a> <var>promise</var>，错误为 "<a
                                data-link-type="exception"
                                href="https://webidl.spec.whatwg.org/#aborterror"><code>AbortError</code></a>"
                            <a data-link-type="interface" data-lt="DOMException"
                                href="https://webidl.spec.whatwg.org/#idl-DOMException"><code>DOMException</code></a>
                            并终止这些步骤。
                        </li>
                        <li>比较 <var>options</var> 参数与 <var>subscription</var> 的 <code>options</code> 属性。
                            <a data-link-type="typedef" data-lt="BufferSource"
                                href="https://webidl.spec.whatwg.org/#BufferSource"><code>BufferSource</code></a>
                            类型的值按内容比较而不是引用比较。
                        </li>
                        <li>如果 <var>options</var> 中任何属性的值与 <var>subscription</var> 存储的不同，则<a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task">在网络任务源上排队全局任务</a>，使用
                            <var>global</var> <a data-link-type="dfn"
                                href="https://webidl.spec.whatwg.org/#reject">拒绝</a> <var>promise</var>，错误为 "<a
                                data-link-type="exception"
                                href="https://webidl.spec.whatwg.org/#invalidstateerror"><code>InvalidStateError</code></a>"
                            <a data-link-type="interface" data-lt="DOMException"
                                href="https://webidl.spec.whatwg.org/#idl-DOMException"><code>DOMException</code></a>
                            并
                            终止这些步骤。
                        </li>
                        <li>当请求完成时，<a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task">在网络任务源上排队全局任务</a>，使用
                            <var>global</var> <a data-link-type="dfn"
                                href="https://webidl.spec.whatwg.org/#resolve">解析</a> <var>promise</var>，值为
                            <var>subscription</var> 并终止这些步骤。
                        </li>
                    </ol>
                </li>
                <li>令 <var>subscription</var> 为尝试使用 <a data-link-type="dfn|abstract-op"
                        href="#dfn-create-a-push-subscription" class="internalDFN"
                        id="ref-for-dfn-create-a-push-subscription-2">创建推送订阅</a>和 <var>options</var> 得到的结果。如果创建订阅<a
                        data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw">抛出</a><a
                        data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-exception">异常</a>，<a
                        data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task">在网络任务源上排队全局任务</a>，使用
                    <var>global</var> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject">拒绝</a>
                    <var>promise</var>，错误为该<a data-link-type="dfn"
                        href="https://webidl.spec.whatwg.org/#dfn-exception">异常</a>，并终止这些步骤。
                </li>
                <li>否则，<a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task">在网络任务源上排队全局任务</a>，使用
                    <var>global</var> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve">解析</a>
                    <var>promise</var>，值为提供新 <var>subscription</var> 详情的 <a data-link-type="idl"
                        data-lt="PushSubscription" href="#dom-pushsubscription" class="internalDFN"
                        id="ref-for-dom-pushsubscription-15"><code>PushSubscription</code></a> 并终止这些步骤。
                </li>
            </ol>
            <p>
                当调用 <dfn data-dfn-for="PushManager" data-export="" data-dfn-type="method"
                    id="dom-pushmanager-getsubscription" data-idl="operation" data-title="getSubscription"
                    data-type="Promise" data-lt="getSubscription()"
                    data-local-lt="PushManager.getSubscription|PushManager.getSubscription()|getSubscription"
                    tabindex="0" aria-haspopup="dialog"><code>getSubscription</code></dfn> 方法时，<em
                    class="rfc2119">必须</em>依次执行以下步骤：
            </p>
            <ol>
                <li>令 <var>promise</var> 为 <a data-link-type="dfn"
                        href="https://webidl.spec.whatwg.org/#a-new-promise">新建的 promise</a>。
                </li>
                <li>返回 <var>promise</var>，并异步执行后续步骤。
                </li>
                <li>如果 <a data-link-type="dfn" href="https://www.w3.org/TR/service-workers/#dfn-service-worker">Service
                        Worker</a> 未订阅，则以 null 解析 <var>promise</var>。
                </li>
                <li>检索与 <a data-link-type="dfn" href="https://www.w3.org/TR/service-workers/#dfn-service-worker">Service
                        Worker</a> 关联的 <a href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-push-subscription-51">推送订阅</a>。
                </li>
                <li>如有错误，则以名为 "<a data-link-type="exception"
                        href="https://webidl.spec.whatwg.org/#aborterror"><code>AbortError</code></a>" 的 <a
                        data-link-type="interface" data-lt="DOMException"
                        href="https://webidl.spec.whatwg.org/#idl-DOMException"><code>DOMException</code></a> 拒绝
                    <var>promise</var> 并终止这些步骤。
                </li>
                <li>请求完成后，以包含检索到的 <a href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-push-subscription-52">推送订阅</a>详情的 <a data-link-type="idl"
                        data-lt="PushSubscription" href="#dom-pushsubscription" class="internalDFN"
                        id="ref-for-dom-pushsubscription-16"><code>PushSubscription</code></a> 解析 <var>promise</var>。
                </li>
            </ol>
            <p>
                当调用 <dfn data-dfn-for="PushManager" data-export="" data-dfn-type="method"
                    id="dom-pushmanager-permissionstate" data-idl="operation" data-title="permissionState()"
                    data-type="Promise" data-lt="permissionState()|permissionState(options)"
                    data-local-lt="PushManager.permissionState|PushManager.permissionState()|permissionState"
                    tabindex="0" aria-haspopup="dialog"><code>permissionState()</code></dfn> 方法时，<em
                    class="rfc2119">必须</em>依次执行以下步骤：
            </p>
            <ol>
                <li>令 <var>promise</var> 为 <a data-link-type="dfn"
                        href="https://webidl.spec.whatwg.org/#a-new-promise">新建的 promise</a>。
                </li>
                <li>返回 <var>promise</var>，并异步执行后续步骤。
                </li>
                <li>令 <var>descriptor</var> 为新建的 <a data-link-type="dictionary" data-lt="PermissionDescriptor"
                        href="https://www.w3.org/TR/permissions/#dom-permissiondescriptor"><code>PermissionDescriptor</code></a>
                    ，其 <a data-link-type="dict-member"
                        href="https://www.w3.org/TR/permissions/#dom-permissiondescriptor-name"><code>name</code></a>
                    初始化为 "push"。
                </li>
                <li>令 <var>state</var> 为 <var>descriptor</var> 的 <a data-link-type="dfn"
                        href="https://www.w3.org/TR/permissions/#dfn-permission-state">权限状态</a>结果。
                </li>
                <li>以 <var>state</var> 解析 <var>promise</var>。
                </li>
            </ol>
            <p>
                使用推送服务的权限可以是持久性的，即如果存在有效权限，则后续订阅无需再次确认。
            </p>
            <p>
                如需请求权限，须通过调用 <a data-link-type="idl" data-lt="subscribe()" href="#dom-pushmanager-subscribe"
                    class="internalDFN"
                    id="ref-for-dom-pushmanager-subscribe-2"><code>subscribe</code></a><code>()</code> 方法实现。
            </p>
        </section>
        <section data-dfn-for="PushSubscriptionOptions" id="pushsubscriptionoptions-interface">
            <div class="header-wrapper">
                <h3 id="x7-2-pushsubscriptionoptions-interface"><bdi class="secno">7.2 </bdi>
                    <dfn data-export="" data-dfn-type="interface" id="dom-pushsubscriptionoptions" data-idl="interface"
                        data-title="PushSubscriptionOptions" data-dfn-for="" tabindex="0"
                        aria-haspopup="dialog"><code>PushSubscriptionOptions</code></dfn> 接口
                </h3><a class="self-link" href="#pushsubscriptionoptions-interface"
                    aria-label="Permalink for Section 7.2"></a>
            </div>

            <pre class="idl def" id="webidl-1484551711"><span class="idlHeader"><a class="self-link" href="#webidl-1484551711">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-pushsubscriptionoptions" data-title="PushSubscriptionOptions">[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=(Window,Worker)</span>, <span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>]
interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-pushsubscriptionoptions" id="ref-for-dom-pushsubscriptionoptions-4"><code>PushSubscriptionOptions</code></a> {<span data-idl="" class="idlAttribute" id="idl-def-pushsubscriptionoptions-uservisibleonly" data-title="userVisibleOnly" data-dfn-for="PushSubscriptionOptions">
  readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean">boolean</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-pushsubscriptionoptions-uservisibleonly" id="ref-for-dom-pushsubscriptionoptions-uservisibleonly-1"><code>userVisibleOnly</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-pushsubscriptionoptions-applicationserverkey" data-title="applicationServerKey" data-dfn-for="PushSubscriptionOptions">
  [<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject">SameObject</a></span>] readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-ArrayBuffer">ArrayBuffer</a>?</span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-pushsubscriptionoptions-applicationserverkey" id="ref-for-dom-pushsubscriptionoptions-applicationserverkey-3"><code>applicationServerKey</code></a>;</span>
};</span></code></pre>
            <p>
                <dfn data-export="" data-dfn-type="attribute" id="dom-pushsubscriptionoptions-uservisibleonly"
                    data-idl="attribute" data-title="userVisibleOnly" data-dfn-for="PushSubscriptionOptions"
                    data-type="boolean" data-lt="userVisibleOnly"
                    data-local-lt="PushSubscriptionOptions.userVisibleOnly" tabindex="0"
                    aria-haspopup="dialog"><code>userVisibleOnly</code></dfn> 属性，在获取时，返回其初始化时的值。
            </p>
            <p>
                <dfn data-export="" data-dfn-type="attribute" id="dom-pushsubscriptionoptions-applicationserverkey"
                    data-idl="attribute" data-title="applicationServerKey" data-dfn-for="PushSubscriptionOptions"
                    data-type="ArrayBuffer" data-lt="applicationServerKey"
                    data-local-lt="PushSubscriptionOptions.applicationServerKey" tabindex="0"
                    aria-haspopup="dialog"><code>applicationServerKey</code></dfn> 属性，在获取时，返回其初始化时的值。
            </p>
            <p>
                如果存在，<a data-link-type="idl" href="#dom-pushsubscriptionoptions-applicationserverkey"
                    class="internalDFN"
                    id="ref-for-dom-pushsubscriptionoptions-applicationserverkey-4"><code>applicationServerKey</code></a>
                的值<em class="rfc2119">必须</em>包含 P-256 椭圆曲线上的一个点 [<cite><a class="bibref" data-link-type="biblio"
                        href="#bib-dss" title="FIPS PUB 186-5: Digital Signature Standard (DSS)">DSS</a></cite>]，采用
                [<cite><a class="bibref" data-link-type="biblio" href="#bib-ansi-x9-62"
                        title="Public Key Cryptography for the Financial Services Industry, The Elliptic Curve Digital Signature Algorithm (ECDSA)">ANSI-X9-62</a></cite>]
                附录 A 所述的未压缩格式编码（即 65 字节，以 0x04 开头）。如以 <a data-link-type="interface" data-lt="DOMString"
                    href="https://webidl.spec.whatwg.org/#idl-DOMString"><code>DOMString</code></a> 形式提供，则该值<em
                    class="rfc2119">必须</em>使用 base64url 编码 [<cite><a class="bibref" data-link-type="biblio"
                        href="#bib-rfc7515" title="JSON Web Signature (JWS)">RFC7515</a></cite>]。
            </p>
            <p>
                当 <a data-link-type="idl" href="#dom-pushsubscriptionoptions-applicationserverkey" class="internalDFN"
                    id="ref-for-dom-pushsubscriptionoptions-applicationserverkey-5"><code>applicationServerKey</code></a>
                未设置且 <a href="#dfn-push-service" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-push-service-24">推送服务</a>因业务需要要求设置时，用户代理<em class="rfc2119">可以</em>拒绝订阅尝试。
            </p>
            <p>
                <a data-link-type="idl" href="#dom-pushsubscriptionoptions-applicationserverkey" class="internalDFN"
                    id="ref-for-dom-pushsubscriptionoptions-applicationserverkey-6"><code>applicationServerKey</code></a>
                的值<em class="rfc2119">必须</em>与用于消息加密的密钥不同 [<cite><a class="bibref" data-link-type="biblio"
                        href="#bib-rfc8291" title="Message Encryption for Web Push">RFC8291</a></cite>]。
            </p>
        </section>
        <section data-dfn-for="PushSubscriptionOptionsInit" id="pushsubscriptionoptionsinit-dictionary">
            <div class="header-wrapper">
                <h3 id="x7-3-pushsubscriptionoptionsinit-dictionary"><bdi class="secno">7.3 </bdi>
                    <dfn data-export="" data-dfn-type="dictionary" id="dom-pushsubscriptionoptionsinit"
                        data-idl="dictionary" data-title="PushSubscriptionOptionsInit" data-dfn-for="" tabindex="0"
                        aria-haspopup="dialog"><code>PushSubscriptionOptionsInit</code></dfn> 字典
                </h3><a class="self-link" href="#pushsubscriptionoptionsinit-dictionary"
                    aria-label="Permalink for Section 7.3"></a>
            </div>

            <pre class="idl def" id="webidl-975599346"><span class="idlHeader"><a class="self-link" href="#webidl-975599346">WebIDL</a></span><code><span data-idl="" class="idlDictionary" id="idl-def-pushsubscriptionoptionsinit" data-title="PushSubscriptionOptionsInit">dictionary <a class="internalDFN idlID" data-link-type="dictionary" href="#dom-pushsubscriptionoptionsinit" id="ref-for-dom-pushsubscriptionoptionsinit-4"><code>PushSubscriptionOptionsInit</code></a> {<span data-idl="" class="idlMember" id="idl-def-pushsubscriptionoptionsinit-uservisibleonly" data-title="userVisibleOnly" data-dfn-for="PushSubscriptionOptionsInit"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean">boolean</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-pushsubscriptionoptionsinit-uservisibleonly" id="ref-for-dom-pushsubscriptionoptionsinit-uservisibleonly-4"><code>userVisibleOnly</code></a> = false;</span><span data-idl="" class="idlMember" id="idl-def-pushsubscriptionoptionsinit-applicationserverkey" data-title="applicationServerKey" data-dfn-for="PushSubscriptionOptionsInit"><span class="idlType">
  (<a data-link-type="typedef" href="https://webidl.spec.whatwg.org/#BufferSource">BufferSource</a> or <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a>)?</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-pushsubscriptionoptionsinit-applicationserverkey" id="ref-for-dom-pushsubscriptionoptionsinit-applicationserverkey-6"><code>applicationServerKey</code></a> = null;</span>
};</span></code></pre>
            <p>
                当 <dfn data-export="" data-dfn-type="dict-member" id="dom-pushsubscriptionoptionsinit-uservisibleonly"
                    data-idl="field" data-title="userVisibleOnly" data-dfn-for="PushSubscriptionOptionsInit"
                    data-type="boolean" tabindex="0" aria-haspopup="dialog"><code>userVisibleOnly</code></dfn> 成员设置为
                <code>true</code> 时，表示该 <a href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-push-subscription-53">推送订阅</a> 仅用于那些对用户可见的 <a href="#dfn-push-message"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-message-33">推送消息</a>（例如通过 Web
                Notification 显示）。[<cite><a class="bibref" data-link-type="biblio" href="#bib-notifications"
                        title="Notifications API Standard">NOTIFICATIONS</a></cite>]
            </p>
            <p>
                <a href="#dom-pushsubscriptionoptionsinit" class="internalDFN" data-link-type="idl"
                    id="ref-for-dom-pushsubscriptionoptionsinit-5"><code>PushSubscriptionOptionsInit</code></a>
                表示与 <a href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-push-subscription-54">推送订阅</a>相关的附加选项。<a href="#dfn-user-agent" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-user-agent-37">用户代理</a><em class="rfc2119">可以</em>在请求用户<a
                    data-link-type="dfn"
                    href="https://www.w3.org/TR/permissions/#dfn-express-permission">明确授权</a>时考虑这些选项。选项被考虑时，<a
                    href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-user-agent-38">用户代理</a><em class="rfc2119">应当</em>对接收到的 <a href="#dfn-push-message"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-message-34">推送消息</a>强制执行这些选项。
            </p>
            <p>
                这些选项是可选的，<a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-user-agent-39">用户代理</a><em class="rfc2119">可以</em>选择只支持其中一部分。<a
                    href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-user-agent-40">用户代理</a><em class="rfc2119">不得</em>暴露其不支持的选项。
            </p>
            <p>
                一旦设置，<a href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-push-subscription-55">推送订阅</a>的选项不可更改。已存在的 <a href="#dfn-push-subscription"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-subscription-56">推送订阅</a>可通过 <a
                    data-link-type="idl" href="#dom-pushsubscription-unsubscribe" class="internalDFN"
                    id="ref-for-dom-pushsubscription-unsubscribe-1"><code>unsubscribe</code></a> 取消，再创建带新选项的 <a
                    href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-push-subscription-57">推送订阅</a>。
            </p>
            <p>
                <dfn data-export="" data-dfn-type="dict-member"
                    id="dom-pushsubscriptionoptionsinit-applicationserverkey" data-idl="field"
                    data-title="applicationServerKey" data-dfn-for="PushSubscriptionOptionsInit"
                    data-type="BufferSource|DOMString" tabindex="0"
                    aria-haspopup="dialog"><code>applicationServerKey</code></dfn> 成员由 <a href="#dfn-user-agent"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-user-agent-41">用户代理</a>在与 <a
                    href="#dfn-push-service" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-push-service-25">推送服务</a>建立 <a href="#dfn-push-subscription" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-push-subscription-58">推送订阅</a>时使用。<a data-link-type="idl"
                    href="#dom-pushsubscriptionoptions-applicationserverkey" class="internalDFN"
                    id="ref-for-dom-pushsubscriptionoptions-applicationserverkey-7"><code>applicationServerKey</code></a>
                选项包含 <a href="#dfn-application-server" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-application-server-23">应用服务器</a>的椭圆曲线公钥。该密钥用于 <a href="#dfn-application-server"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-application-server-24">应用服务器</a>在向该 <a
                    href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-push-subscription-59">推送订阅</a>发送 <a href="#dfn-push-message" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-push-message-35">推送消息</a>时进行身份认证，详见 [<cite><a class="bibref"
                        data-link-type="biblio" href="#bib-rfc8292"
                        title="Voluntary Application Server Identification (VAPID) for Web Push">RFC8292</a></cite>]；<a
                    href="#dfn-push-service" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-push-service-26">推送服务</a>会拒绝未用对应私钥生成认证令牌的 <a href="#dfn-push-message"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-message-36">推送消息</a>。
            </p>
        </section>
    </section>
    <section data-dfn-for="PushSubscription" id="pushsubscription-interface">
        <div class="header-wrapper">
            <h2 id="x8-pushsubscription-interface"><bdi class="secno">8. </bdi>
                <dfn data-export="" data-dfn-type="interface" id="dom-pushsubscription" data-idl="interface"
                    data-title="PushSubscription" data-dfn-for="" tabindex="0"
                    aria-haspopup="dialog"><code>PushSubscription</code></dfn> 接口
            </h2><a class="self-link" href="#pushsubscription-interface" aria-label="Permalink for Section 8."></a>
        </div>

        <p>
            <a data-link-type="idl" data-lt="PushSubscription" href="#dom-pushsubscription" class="internalDFN"
                id="ref-for-dom-pushsubscription-17"><code>PushSubscription</code></a> 对象表示一个 <a
                href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-subscription-60">推送订阅</a>。
        </p>
        <pre class="idl def" id="webidl-1348261679"><span class="idlHeader"><a class="self-link" href="#webidl-1348261679">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-pushsubscription" data-title="PushSubscription">[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=(Window,Worker)</span>, <span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>]
interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-pushsubscription" id="ref-for-dom-pushsubscription-18"><code>PushSubscription</code></a> {<span data-idl="" class="idlAttribute" id="idl-def-pushsubscription-endpoint" data-title="endpoint" data-dfn-for="PushSubscription">
  readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString">USVString</a></span> <dfn data-export="" data-dfn-type="attribute" id="dom-pushsubscription-endpoint" data-idl="attribute" data-title="endpoint" data-dfn-for="PushSubscription" data-type="USVString" data-lt="endpoint" data-local-lt="PushSubscription.endpoint" class="idlName" tabindex="0" aria-haspopup="dialog"><code>endpoint</code></dfn>;</span><span data-idl="" class="idlAttribute" id="idl-def-pushsubscription-expirationtime" data-title="expirationTime" data-dfn-for="PushSubscription">
  readonly attribute<span class="idlType"> <a data-link-type="typedef" href="https://www.w3.org/TR/hr-time-3/#dom-epochtimestamp">EpochTimeStamp</a>?</span> <dfn data-export="" data-dfn-type="attribute" id="dom-pushsubscription-expirationtime" data-idl="attribute" data-title="expirationTime" data-dfn-for="PushSubscription" data-type="EpochTimeStamp" data-lt="expirationTime" data-local-lt="PushSubscription.expirationTime" class="idlName" tabindex="0" aria-haspopup="dialog"><code>expirationTime</code></dfn>;</span><span data-idl="" class="idlAttribute" id="idl-def-pushsubscription-options" data-title="options" data-dfn-for="PushSubscription">
  [<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject">SameObject</a></span>] readonly attribute<span class="idlType"> <a data-link-type="idl" href="#dom-pushsubscriptionoptions" class="internalDFN" id="ref-for-dom-pushsubscriptionoptions-5"><code>PushSubscriptionOptions</code></a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-pushsubscription-options" id="ref-for-dom-pushsubscription-options-2"><code>options</code></a>;</span><span data-idl="" class="idlMethod" id="idl-def-pushsubscription-getkey-name" data-title="getKey" data-dfn-for="PushSubscription"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-ArrayBuffer">ArrayBuffer</a>?</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-pushsubscription-getkey" id="ref-for-dom-pushsubscription-getkey-4"><code>getKey</code></a>(<span class="idlType"><a data-link-type="idl" href="#dom-pushencryptionkeyname" class="internalDFN" id="ref-for-dom-pushencryptionkeyname-1"><code>PushEncryptionKeyName</code></a></span> <span class="idlParamName">name</span>);</span><span data-idl="" class="idlMethod" id="idl-def-pushsubscription-unsubscribe" data-title="unsubscribe" data-dfn-for="PushSubscription"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean">boolean</a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-pushsubscription-unsubscribe" id="ref-for-dom-pushsubscription-unsubscribe-2"><code>unsubscribe</code></a>();</span><span data-idl="" class="idlMethod" id="idl-def-pushsubscription-tojson" data-title="toJSON" data-dfn-for="PushSubscription"><span class="idlType">

  <a data-link-type="idl" href="#dom-pushsubscriptionjson" class="internalDFN" id="ref-for-dom-pushsubscriptionjson-1"><code>PushSubscriptionJSON</code></a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-pushsubscription-tojson" id="ref-for-dom-pushsubscription-tojson-1"><code>toJSON</code></a>();</span>
};</span><span data-idl="" class="idlDictionary" id="idl-def-pushsubscriptionjson" data-title="PushSubscriptionJSON">

dictionary <a class="internalDFN idlID" data-link-type="dictionary" href="#dom-pushsubscriptionjson" id="ref-for-dom-pushsubscriptionjson-2"><code>PushSubscriptionJSON</code></a> {<span data-idl="" class="idlMember" id="idl-def-pushsubscriptionjson-endpoint" data-title="endpoint" data-dfn-for="PushSubscriptionJSON"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString">USVString</a></span> <dfn data-export="" data-dfn-type="dict-member" id="dom-pushsubscriptionjson-endpoint" data-idl="field" data-title="endpoint" data-dfn-for="PushSubscriptionJSON" data-type="USVString" class="idlName" tabindex="0" aria-haspopup="dialog"><code>endpoint</code></dfn>;</span><span data-idl="" class="idlMember" id="idl-def-pushsubscriptionjson-expirationtime" data-title="expirationTime" data-dfn-for="PushSubscriptionJSON"><span class="idlType">
  <a data-link-type="typedef" href="https://www.w3.org/TR/hr-time-3/#dom-epochtimestamp">EpochTimeStamp</a>?</span> <dfn data-export="" data-dfn-type="dict-member" id="dom-pushsubscriptionjson-expirationtime" data-idl="field" data-title="expirationTime" data-dfn-for="PushSubscriptionJSON" data-type="EpochTimeStamp" class="idlName" tabindex="0" aria-haspopup="dialog"><code>expirationTime</code></dfn> = null;</span><span data-idl="" class="idlMember" id="idl-def-pushsubscriptionjson-keys" data-title="keys" data-dfn-for="PushSubscriptionJSON"><span class="idlType">
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-record">record</a>&lt;<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a>, <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString">USVString</a>&gt;</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-pushsubscriptionjson-keys" id="ref-for-dom-pushsubscriptionjson-keys-1"><code>keys</code></a>;</span>
};</span></code></pre>
        <p>
            当<dfn id="dfn-getting-the-endpoint-attribute" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">获取
                <code>endpoint</code> 属性</dfn>时，<a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-user-agent-42">用户代理</a><em class="rfc2119">必须</em>返回与该 <a href="#dfn-push-subscription"
                class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-subscription-61">推送订阅</a>关联的 <a
                href="#dfn-push-endpoint" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-endpoint-11">推送端点</a>。<a href="#dfn-user-agent" class="internalDFN"
                data-link-type="dfn" id="ref-for-dfn-user-agent-43">用户代理</a><em
                class="rfc2119">必须</em>使用无输入相关分支（即常数时间）的序列化方法。
        </p>
        <p>
            当<dfn id="dfn-getting-the-expirationtime-attribute" tabindex="0" aria-haspopup="dialog"
                data-dfn-type="dfn">获取 <code>expirationTime</code> 属性</dfn>时，<a href="#dfn-user-agent"
                class="internalDFN" data-link-type="dfn" id="ref-for-dfn-user-agent-44">用户代理</a><em
                class="rfc2119">必须</em>返回与该 <a href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-subscription-62">推送订阅</a>关联的 <a href="#dfn-subscription-expiration-time"
                class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-subscription-expiration-time-1">订阅过期时间</a>，如果没有则返回 <code>null</code>。
        </p>
        <p>
            获取<dfn data-export="" data-dfn-type="attribute" id="dom-pushsubscription-options" data-idl="attribute"
                data-title="options" data-dfn-for="PushSubscription" data-type="PushSubscriptionOptions"
                data-lt="options" data-local-lt="PushSubscription.options" tabindex="0"
                aria-haspopup="dialog"><code>options</code></dfn> 属性时，<a href="#dfn-user-agent" class="internalDFN"
                data-link-type="dfn" id="ref-for-dfn-user-agent-45">用户代理</a><em class="rfc2119">必须</em>返回一个
            <a href="#dom-pushsubscriptionoptions" class="internalDFN" data-link-type="idl"
                id="ref-for-dom-pushsubscriptionoptions-6"><code>PushSubscriptionOptions</code></a> 对象，表示与该 <a
                href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-push-subscription-63">推送订阅</a>关联的选项。
        </p>
        <p>
            <dfn data-export="" data-dfn-type="method" id="dom-pushsubscription-getkey" data-idl="operation"
                data-title="getKey()" data-dfn-for="PushSubscription" data-type="ArrayBuffer"
                data-lt="getKey()|getKey(name)" data-local-lt="PushSubscription.getKey|PushSubscription.getKey()|getKey"
                tabindex="0" aria-haspopup="dialog"><code>getKey()</code></dfn> 方法用于获取可用于加密和认证消息的密钥材料。调用 <a
                data-link-type="idl" data-lt="getKey()" href="#dom-pushsubscription-getkey" class="internalDFN"
                id="ref-for-dom-pushsubscription-getkey-5"><code>getKey</code></a><code>()</code> 时，遵循如下流程：
        </p>
        <ol>
            <li>查找与 <code>name</code> 参数同名的内部槽。
            </li>
            <li>如果未找到槽，则返回 <code>null</code>。
            </li>
            <li>用新实例化的 <a data-link-type="interface" data-lt="ArrayBuffer"
                    href="https://webidl.spec.whatwg.org/#idl-ArrayBuffer"><code>ArrayBuffer</code></a> 实例初始化变量
                <var>key</var>。
            </li>
            <li>如果内部槽包含非对称密钥对，则将 <var>key</var> 的内容设置为密钥对中的公钥序列化值。序列化格式见各自规范。例如 [<cite><a class="bibref"
                        data-link-type="biblio" href="#bib-rfc8291"
                        title="Message Encryption for Web Push">RFC8291</a></cite>] 指定 "<a data-link-type="idl"
                    href="#dom-pushencryptionkeyname-p256dh" class="internalDFN"
                    id="ref-for-dom-pushencryptionkeyname-p256dh-3"><code>p256dh</code></a>" 公钥采用 [<cite><a
                        class="bibref" data-link-type="biblio" href="#bib-ansi-x9-62"
                        title="Public Key Cryptography for the Financial Services Industry, The Elliptic Curve Digital Signature Algorithm (ECDSA)">ANSI-X9-62</a></cite>]
                附录 A 未压缩格式（65 字节，以 0x04 开头）。
            </li>
            <li>否则，如果内部槽包含对称密钥，则将 <var>key</var> 的内容设置为内部槽值的副本。例如，<code>auth</code> 参数包含用户代理用于认证应用服务器发送消息的字节序列。
            </li>
            <li>返回 <var>key</var>。
            </li>
        </ol>
        <p data-link-for="">
            "<a data-link-type="idl" href="#dom-pushencryptionkeyname-p256dh" class="internalDFN"
                id="ref-for-dom-pushencryptionkeyname-p256dh-4"><code>p256dh</code></a>" 和 "<a data-link-type="idl"
                href="#dom-pushencryptionkeyname-auth" class="internalDFN"
                id="ref-for-dom-pushencryptionkeyname-auth-2"><code>auth</code></a>" 两个密钥<em
                class="rfc2119">必须</em>被支持，且其值<em class="rfc2119">必须</em>满足用户代理解密接收推送消息的要求，详见 [<cite><a class="bibref"
                    data-link-type="biblio" href="#bib-rfc8291"
                    title="Message Encryption for Web Push">RFC8291</a></cite>]。
        </p>
        <p>
            <dfn data-lt="unsubscribed|unsubscribe()" data-export="" data-dfn-type="method"
                id="dom-pushsubscription-unsubscribe" data-idl="operation" data-title="unsubscribe()"
                data-dfn-for="PushSubscription" data-type="Promise"
                data-local-lt="PushSubscription.unsubscribe|PushSubscription.unsubscribe()|unsubscribe" tabindex="0"
                aria-haspopup="dialog"><code>unsubscribe()</code></dfn> 方法被调用时，<em class="rfc2119">必须</em>执行以下步骤：
        </p>
        <ol>
            <li>令 <var>promise</var> 为 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-new-promise">新建的
                    promise</a>。
            </li>
            <li>返回 <var>promise</var>，并异步执行后续步骤。
            </li>
            <li>如果 <a href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-push-subscription-64">推送订阅</a>已被 <a href="#dfn-deactivate" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-deactivate-8">停用</a>，则以 <code>false</code> 解析
                <var>promise</var>并终止这些步骤。
            </li>
            <li>并行执行以下步骤：
                <ol>
                    <li>
                        <a href="#dfn-deactivate" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-deactivate-9">停用</a>该 <a href="#dfn-push-subscription" class="internalDFN"
                            data-link-type="dfn" id="ref-for-dfn-push-subscription-65">推送订阅</a>。<a
                            href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-user-agent-47">用户代理</a><em class="rfc2119">不得</em>再为该 <a
                            href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-push-subscription-66">推送订阅</a>投递任何 <a href="#dfn-push-message"
                            class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-message-37">推送消息</a>。
                        <p>
                            如果<a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-user-agent-48">用户代理</a>因网络等原因未能请求<a href="#dfn-push-service"
                                class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-service-27">推送服务</a><a
                                href="#dfn-deactivate" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-deactivate-10">停用</a>该 <a href="#dfn-push-subscription"
                                class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-push-subscription-67">推送订阅</a>，则<em class="rfc2119">应当</em>在合理时间内重试请求。
                        </p>
                    </li>
                </ol>
            </li>
            <li>以 <code>true</code> 解析 <var>promise</var>。
            </li>
        </ol>
        <p>
            <dfn data-export="" data-dfn-type="method" id="dom-pushsubscription-tojson" data-idl="operation"
                data-title="toJSON()" data-dfn-for="PushSubscription" data-type="PushSubscriptionJSON"
                data-lt="toJSON()" data-local-lt="PushSubscription.toJSON|PushSubscription.toJSON()|toJSON" tabindex="0"
                aria-haspopup="dialog"><code>toJSON()</code></dfn> 方法被调用时，<em class="rfc2119">必须</em>执行以下步骤：
        </p>
        <ol>
            <li>令 <var data-type="PushSubscriptionJSON">json</var> 为新建的 <a data-link-type="idl"
                    data-lt="PushSubscriptionJSON" href="#dom-pushsubscriptionjson" class="internalDFN"
                    id="ref-for-dom-pushsubscriptionjson-3"><code>PushSubscriptionJSON</code></a> 字典。
            </li>
            <li>设置 <var data-type="PushSubscriptionJSON">json</var>["endpoint"] 为 <a data-link-type="dfn|abstract-op"
                    href="#dfn-getting-the-endpoint-attribute" class="internalDFN"
                    id="ref-for-dfn-getting-the-endpoint-attribute-1">获取 <code>endpoint</code> 属性</a>的结果。
            </li>
            <li>设置 <var data-type="PushSubscriptionJSON">json</var>["expirationTime"] 为 <a
                    data-link-type="dfn|abstract-op" href="#dfn-getting-the-expirationtime-attribute"
                    class="internalDFN" id="ref-for-dfn-getting-the-expirationtime-attribute-1">获取
                    <code>expirationTime</code> 属性</a>的结果。
            </li>
            <li>令 <var>keys</var> 为新建空 <code>record&lt;DOMString, USVString&gt;</code> 实例。
            </li>
            <li>对于每个与 <a data-link-type="idl" data-lt="PushSubscription" href="#dom-pushsubscription"
                    class="internalDFN" id="ref-for-dom-pushsubscription-19"><code>PushSubscription</code></a>
                的内部槽相关的标识符 <var>i</var>，按密钥名排序：
                <ol>
                    <li>如果内部槽为非对称密钥对，则令 <var>b</var> 为密钥名 <var>i</var> 对应公钥按指定编码后的值（见 <a data-link-type="idl"
                            data-lt="getKey()" href="#dom-pushsubscription-getkey" class="internalDFN"
                            id="ref-for-dom-pushsubscription-getkey-6"><code>getKey</code></a><code>()</code>）。
                    </li>
                    <li>否则，令 <var>b</var> 为 <a data-link-type="idl" href="#dom-pushsubscription-getkey"
                            class="internalDFN" id="ref-for-dom-pushsubscription-getkey-7"><code>getKey</code></a> 返回的值。
                    </li>
                    <li>令 <var>s</var> 为 <var>b</var> 的 URL 安全 base64 编码且无填充 [<cite><a class="bibref"
                                data-link-type="biblio" href="#bib-rfc4648"
                                title="The Base16, Base32, and Base64 Data Encodings">RFC4648</a></cite>]，格式为 <a
                            data-link-type="interface" data-lt="USVString"
                            href="https://webidl.spec.whatwg.org/#idl-USVString"><code>USVString</code></a>。<a
                            href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-user-agent-49">用户代理</a><em class="rfc2119">必须</em>使用无分支序列化方法。
                    </li>
                    <li>设置 <var>keys</var>[<var>i</var>] 为 <var>s</var>。
                    </li>
                </ol>
            </li>
            <li>设置 <var data-type="PushSubscriptionJSON">json</var>["keys"] 为 <var>keys</var>。
            </li>
            <li>返回 <var data-type="PushSubscriptionJSON">json</var>。
            </li>
        </ol>
        <p>
            <dfn data-export="" data-dfn-type="dictionary" id="dom-pushsubscriptionjson" data-idl="dictionary"
                data-title="PushSubscriptionJSON" data-dfn-for="" tabindex="0"
                aria-haspopup="dialog"><code>PushSubscriptionJSON</code></dfn> 字典表示 <a data-link-type="dfn"
                href="https://webidl.spec.whatwg.org/#dfn-json-types">JSON 类型</a>的 <a data-link-type="idl"
                data-lt="PushSubscription" href="#dom-pushsubscription" class="internalDFN"
                id="ref-for-dom-pushsubscription-20"><code>PushSubscription</code></a>。在 ECMAScript 中可通过
            <code>JSON</code>.<a data-link-type="method" data-lt="stringify()"
                href="https://tc39.es/ecma262/multipage/structured-data.html#sec-json.stringify"><code>stringify</code></a><code>()</code>
            方法转换为 JSON 字符串。
        </p>
        <p>
            <dfn data-dfn-for="PushSubscriptionJSON" data-export="" data-dfn-type="dict-member"
                id="dom-pushsubscriptionjson-keys" data-idl="field" data-title="keys" data-type="record" tabindex="0"
                aria-haspopup="dialog"><code>keys</code></dfn> 记录包含每个支持的 <a data-link-type="idl"
                data-lt="PushEncryptionKeyName" href="#dom-pushencryptionkeyname" class="internalDFN"
                id="ref-for-dom-pushencryptionkeyname-2"><code>PushEncryptionKeyName</code></a> 条目的 URL 安全 base64 编码值
            [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc4648"
                    title="The Base16, Base32, and Base64 Data Encodings">RFC4648</a></cite>]。
        </p>
        <p>
            注意：<a data-link-type="idl" data-lt="PushSubscription" href="#dom-pushsubscription" class="internalDFN"
                id="ref-for-dom-pushsubscription-21"><code>PushSubscription</code></a> 的选项不会被序列化。
        </p>
        <section data-dfn-for="PushEncryptionKeyName" id="pushencryptionkeyname-enumeration">
            <div class="header-wrapper">
                <h3 id="x8-1-pushencryptionkeyname-enumeration"><bdi class="secno">8.1 </bdi>
                    <dfn data-export="" data-dfn-type="enum" id="dom-pushencryptionkeyname" data-idl="enum"
                        data-title="PushEncryptionKeyName" data-dfn-for="" tabindex="0"
                        aria-haspopup="dialog"><code>PushEncryptionKeyName</code></dfn> 枚举
                </h3><a class="self-link" href="#pushencryptionkeyname-enumeration"
                    aria-label="Permalink for Section 8.1"></a>
            </div>

            <p>
                用于 <a href="#dfn-push-message" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-push-message-38">推送消息</a>加密的密钥通过 <a data-link-type="idl" data-lt="getKey()"
                    href="#dom-pushsubscription-getkey" class="internalDFN"
                    id="ref-for-dom-pushsubscription-getkey-8"><code>getKey</code></a><code>()</code> 方法或 <a
                    data-link-type="idl" data-lt="PushSubscription" href="#dom-pushsubscription" class="internalDFN"
                    id="ref-for-dom-pushsubscription-22"><code>PushSubscription</code></a> 的序列化器提供给 Web 应用。每个密钥由 <a
                    data-link-type="idl" data-lt="PushEncryptionKeyName" href="#dom-pushencryptionkeyname"
                    class="internalDFN" id="ref-for-dom-pushencryptionkeyname-3"><code>PushEncryptionKeyName</code></a>
                枚举中的值命名。
            </p>
            <pre class="idl def" id="webidl-226775330"><span class="idlHeader"><a class="self-link" href="#webidl-226775330">WebIDL</a></span><code><span data-idl="" class="idlEnum" id="idl-def-pushencryptionkeyname" data-title="PushEncryptionKeyName">enum <a class="internalDFN idlID" data-link-type="enum" href="#dom-pushencryptionkeyname" id="ref-for-dom-pushencryptionkeyname-4"><code>PushEncryptionKeyName</code></a> {
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-pushencryptionkeyname-p256dh" id="ref-for-dom-pushencryptionkeyname-p256dh-5"><code>p256dh</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-pushencryptionkeyname-auth" id="ref-for-dom-pushencryptionkeyname-auth-3"><code>auth</code></a>"</span>
};</span></code></pre>
            <p>
                <dfn data-export="" data-dfn-type="enum-value" id="dom-pushencryptionkeyname-p256dh"
                    data-idl="enum-value" data-title="p256dh" data-dfn-for="PushEncryptionKeyName" tabindex="0"
                    aria-haspopup="dialog"><code>p256dh</code></dfn> 用于获取 [<cite><a class="bibref"
                        data-link-type="biblio" href="#bib-rfc8291"
                        title="Message Encryption for Web Push">RFC8291</a></cite>] 描述的 P-256 <abbr
                    title="elliptic curve Diffie-Hellman">ECDH</abbr> Diffie-Hellman 公钥。
            </p>
            <p>
                <dfn data-export="" data-dfn-type="enum-value" id="dom-pushencryptionkeyname-auth" data-idl="enum-value"
                    data-title="auth" data-dfn-for="PushEncryptionKeyName" tabindex="0"
                    aria-haspopup="dialog"><code>auth</code></dfn> 用于获取 [<cite><a class="bibref" data-link-type="biblio"
                        href="#bib-rfc8291" title="Message Encryption for Web Push">RFC8291</a></cite>] 描述的认证密钥。
            </p>
        </section>
    </section>
    <section data-dfn-for="PushMessageData" id="pushmessagedata-interface">
        <div class="header-wrapper">
            <h2 id="x9-pushmessagedata-interface"><bdi class="secno">9. </bdi>
                <dfn data-export="" data-dfn-type="interface" id="dom-pushmessagedata" data-idl="interface"
                    data-title="PushMessageData" data-dfn-for="" tabindex="0"
                    aria-haspopup="dialog"><code>PushMessageData</code></dfn> 接口
            </h2><a class="self-link" href="#pushmessagedata-interface" aria-label="Permalink for Section 9."></a>
        </div>

        <pre class="idl def" data-cite="WEBIDL FILEAPI" id="webidl-1430759589"><span class="idlHeader"><a class="self-link" href="#webidl-1430759589">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-pushmessagedata" data-title="PushMessageData">[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=ServiceWorker</span>, <span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>]
interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-pushmessagedata" id="ref-for-dom-pushmessagedata-1"><code>PushMessageData</code></a> {<span data-idl="" class="idlMethod" id="idl-def-pushmessagedata-arraybuffer" data-title="arrayBuffer" data-dfn-for="PushMessageData"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-ArrayBuffer">ArrayBuffer</a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-pushmessagedata-arraybuffer" id="ref-for-dom-pushmessagedata-arraybuffer-1"><code>arrayBuffer</code></a>();</span><span data-idl="" class="idlMethod" id="idl-def-pushmessagedata-blob" data-title="blob" data-dfn-for="PushMessageData"><span class="idlType">
  <a data-link-type="interface" href="https://www.w3.org/TR/FileAPI/#dfn-Blob">Blob</a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-pushmessagedata-blob" id="ref-for-dom-pushmessagedata-blob-1"><code>blob</code></a>();</span><span data-idl="" class="idlMethod" id="idl-def-pushmessagedata-bytes" data-title="bytes" data-dfn-for="PushMessageData"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-Uint8Array">Uint8Array</a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-pushmessagedata-bytes" id="ref-for-dom-pushmessagedata-bytes-1"><code>bytes</code></a>();</span><span data-idl="" class="idlMethod" id="idl-def-pushmessagedata-json" data-title="json" data-dfn-for="PushMessageData"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any">any</a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-pushmessagedata-json" id="ref-for-dom-pushmessagedata-json-1"><code>json</code></a>();</span><span data-idl="" class="idlMethod" id="idl-def-pushmessagedata-text" data-title="text" data-dfn-for="PushMessageData"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString">USVString</a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-pushmessagedata-text" id="ref-for-dom-pushmessagedata-text-1"><code>text</code></a>();</span>
};</span></code></pre>
        <p>
            <a data-link-type="idl" data-lt="PushMessageData" href="#dom-pushmessagedata" class="internalDFN"
                id="ref-for-dom-pushmessagedata-2"><code>PushMessageData</code></a> 对象有一个关联的 <dfn
                data-dfn-for="PushMessageData" id="dfn-bytes" tabindex="0" aria-haspopup="dialog"
                data-dfn-type="dfn">字节序列（bytes）</dfn>（一个 <a data-link-type="dfn"
                href="https://infra.spec.whatwg.org/#byte-sequence">字节序列</a>），在创建时设置。
        </p>
        <p>
            <dfn data-export="" data-dfn-type="method" id="dom-pushmessagedata-arraybuffer" data-idl="operation"
                data-title="arrayBuffer()" data-dfn-for="PushMessageData" data-type="ArrayBuffer"
                data-lt="arrayBuffer()"
                data-local-lt="PushMessageData.arrayBuffer|PushMessageData.arrayBuffer()|arrayBuffer" tabindex="0"
                aria-haspopup="dialog"><code>arrayBuffer()</code></dfn> 方法步骤为：返回一个内容为 <a data-link-type="dfn"
                href="https://webidl.spec.whatwg.org/#this">this</a> 的 <a data-link-type="dfn"
                href="https://infra.spec.whatwg.org/#byte">字节序列</a>的 <a data-link-type="interface" data-lt="ArrayBuffer"
                href="https://webidl.spec.whatwg.org/#idl-ArrayBuffer"><code>ArrayBuffer</code></a>。创建 <a
                data-link-type="interface" data-lt="ArrayBuffer"
                href="https://webidl.spec.whatwg.org/#idl-ArrayBuffer"><code>ArrayBuffer</code></a> 对象时抛出的异常会被重新抛出。
        </p>
        <p>
            <dfn data-export="" data-dfn-type="method" id="dom-pushmessagedata-blob" data-idl="operation"
                data-title="blob()" data-dfn-for="PushMessageData" data-type="Blob" data-lt="blob()"
                data-local-lt="PushMessageData.blob|PushMessageData.blob()|blob" tabindex="0"
                aria-haspopup="dialog"><code>blob()</code></dfn> 方法步骤为：返回一个新的 <a data-link-type="interface"
                data-lt="Blob" href="https://www.w3.org/TR/FileAPI/#dfn-Blob"><code>Blob</code></a> 对象，其内容为 <a
                data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this">this</a> 的 <a data-link-type="dfn"
                href="https://infra.spec.whatwg.org/#byte">字节序列</a>。
        </p>
        <p>
            <dfn data-export="" data-dfn-type="method" id="dom-pushmessagedata-bytes" data-idl="operation"
                data-title="bytes()" data-dfn-for="PushMessageData" data-type="Uint8Array" data-lt="bytes()"
                data-local-lt="PushMessageData.bytes|PushMessageData.bytes()|bytes" tabindex="0"
                aria-haspopup="dialog"><code>bytes()</code></dfn> 方法步骤为：返回一个新的 <a data-link-type="interface"
                data-lt="Uint8Array"
                href="https://webidl.spec.whatwg.org/#idl-Uint8Array"><code>Uint8Array</code></a>，其底层为内容为 <a
                data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this">this</a> 的 <a data-link-type="dfn"
                href="https://infra.spec.whatwg.org/#byte">字节序列</a>的 <a data-link-type="interface" data-lt="ArrayBuffer"
                href="https://webidl.spec.whatwg.org/#idl-ArrayBuffer"><code>ArrayBuffer</code></a>。创建 <a
                data-link-type="interface" data-lt="ArrayBuffer"
                href="https://webidl.spec.whatwg.org/#idl-ArrayBuffer"><code>ArrayBuffer</code></a> 对象时抛出的异常会被重新抛出。
        </p>
        <p data-cite="ENCODING">
            <dfn data-export="" data-dfn-type="method" id="dom-pushmessagedata-json" data-idl="operation"
                data-title="json()" data-dfn-for="PushMessageData" data-type="any" data-lt="json()"
                data-local-lt="PushMessageData.json|PushMessageData.json()|json" tabindex="0"
                aria-haspopup="dialog"><code>json()</code></dfn> 方法步骤为：返回运行 <a data-link-type="dfn"
                data-lt="parse JSON bytes to a JavaScript value"
                href="https://infra.spec.whatwg.org/#parse-json-bytes-to-a-javascript-value">解析 JSON 字节为 JavaScript
                值</a>，输入为 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this">this</a> 的 <a
                data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte">字节序列</a> 的结果。
        </p>
        <p data-cite="ENCODING">
            <dfn data-export="" data-dfn-type="method" id="dom-pushmessagedata-text" data-idl="operation"
                data-title="text()" data-dfn-for="PushMessageData" data-type="USVString" data-lt="text()"
                data-local-lt="PushMessageData.text|PushMessageData.text()|text" tabindex="0"
                aria-haspopup="dialog"><code>text()</code></dfn> 方法步骤为：返回对 <a data-link-type="dfn"
                href="https://webidl.spec.whatwg.org/#this">this</a> 的 <a data-link-type="dfn"
                href="https://infra.spec.whatwg.org/#byte">字节序列</a>运行 <a data-link-type="dfn"
                href="https://encoding.spec.whatwg.org/#utf-8-decode">UTF-8 解码</a>后的结果。
        </p>
        <p>
            <dfn id="dfn-extract-a-byte-sequence" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">从
                <var>object</var> 提取字节序列</dfn>，步骤如下：
        </p>
        <ol>
            <li>令 <var>bytes</var> 为一个空字节序列。
            </li>
            <li>根据 <var>object</var> 的类型进行分支：
                <dl data-cite="WEBIDL">
                    <dt>
                        <a data-link-type="typedef" data-lt="BufferSource"
                            href="https://webidl.spec.whatwg.org/#BufferSource"><code>BufferSource</code></a>
                    </dt>
                    <dd>
                        将 <var>bytes</var> 设置为 <var>object</var> 内容的副本。
                    </dd>
                    <dt>
                        <a data-link-type="interface" data-lt="USVString"
                            href="https://webidl.spec.whatwg.org/#idl-USVString"><code>USVString</code></a>
                    </dt>
                    <dd data-cite="ENCODING">
                        将 <var>bytes</var> 设置为对 <var>object</var> 运行 <a data-link-type="dfn"
                            href="https://encoding.spec.whatwg.org/#utf-8-encode">utf-8 编码</a>的结果。
                    </dd>
                </dl>
            </li>
            <li>返回 <var>bytes</var>。
            </li>
        </ol>
    </section>
    <section id="events">
        <div class="header-wrapper">
            <h2 id="x10-events"><bdi class="secno">10. </bdi>
                事件
            </h2><a class="self-link" href="#events" aria-label="Permalink for Section 10."></a>
        </div>

        <section data-dfn-for="ServiceWorkerGlobalScope" id="extensions-to-the-serviceworkerglobalscope-interface">
            <div class="header-wrapper">
                <h3 id="x10-1-extensions-to-the-serviceworkerglobalscope-interface"><bdi class="secno">10.1 </bdi>
                    <code>ServiceWorkerGlobalScope</code> 接口扩展
                </h3><a class="self-link" href="#extensions-to-the-serviceworkerglobalscope-interface"
                    aria-label="Permalink for Section 10.1"></a>
            </div>

            <p>
                Service Worker 规范定义了 <a data-link-type="interface" data-lt="ServiceWorkerGlobalScope"
                    href="https://www.w3.org/TR/service-workers/#serviceworkerglobalscope"><code>ServiceWorkerGlobalScope</code></a>
                接口
                [<cite><a class="bibref" data-link-type="biblio" href="#bib-service-workers"
                        title="Service Workers">SERVICE-WORKERS</a></cite>]，本规范对此进行了扩展。
            </p>
            <pre class="idl def" data-cite="WEBIDL HTML" id="webidl-801193280"><span class="idlHeader"><a class="self-link" href="#webidl-801193280">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-serviceworkerglobalscope-partial-1" data-title="ServiceWorkerGlobalScope">[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=ServiceWorker</span>, <span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>]
partial interface <a data-idl="partial" data-link-type="interface" data-title="ServiceWorkerGlobalScope" class="idlID" data-dfn-for="ServiceWorkerGlobalScope" href="https://www.w3.org/TR/service-workers/#serviceworkerglobalscope">ServiceWorkerGlobalScope</a> {<span data-idl="" class="idlAttribute" id="idl-def-serviceworkerglobalscope-onpush" data-title="onpush" data-dfn-for="ServiceWorkerGlobalScope">
  attribute<span class="idlType"> <a data-link-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-serviceworkerglobalscope-onpush" id="ref-for-dom-serviceworkerglobalscope-onpush-1"><code>onpush</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-serviceworkerglobalscope-onpushsubscriptionchange" data-title="onpushsubscriptionchange" data-dfn-for="ServiceWorkerGlobalScope">
  attribute<span class="idlType"> <a data-link-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-serviceworkerglobalscope-onpushsubscriptionchange" id="ref-for-dom-serviceworkerglobalscope-onpushsubscriptionchange-1"><code>onpushsubscriptionchange</code></a>;</span>
};</span></code></pre>
            <p>
                <dfn data-export="" data-dfn-type="attribute" id="dom-serviceworkerglobalscope-onpush"
                    data-idl="attribute" data-title="onpush" data-dfn-for="ServiceWorkerGlobalScope"
                    data-type="EventHandler" data-lt="onpush" data-local-lt="ServiceWorkerGlobalScope.onpush"
                    tabindex="0" aria-haspopup="dialog"><code>onpush</code></dfn> 属性是一个 <a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes">事件处理器 IDL
                    属性</a>，
                其对应的 <a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type">事件类型</a>为
                "<code>push</code>"。"<code>push</code>" 事件表示收到针对某 <a href="#dfn-push-subscription" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-push-subscription-68">推送订阅</a>的 <a href="#dfn-push-message"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-message-39">推送消息</a>。
            </p>
            <p>
                <dfn data-export="" data-dfn-type="attribute" id="dom-serviceworkerglobalscope-onpushsubscriptionchange"
                    data-idl="attribute" data-title="onpushsubscriptionchange" data-dfn-for="ServiceWorkerGlobalScope"
                    data-type="EventHandler" data-lt="onpushsubscriptionchange"
                    data-local-lt="ServiceWorkerGlobalScope.onpushsubscriptionchange" tabindex="0"
                    aria-haspopup="dialog"><code>onpushsubscriptionchange</code></dfn> 属性是一个 <a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes">事件处理器 IDL
                    属性</a>，其对应的 <a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type">事件类型</a>为
                "<code>pushsubscriptionchange</code>"。
            </p>
        </section>
        <section data-dfn-for="PushEvent" id="pushevent-interface">
            <div class="header-wrapper">
                <h3 id="x10-2-pushevent-interface"><bdi class="secno">10.2 </bdi>
                    <dfn data-export="" data-dfn-type="interface" id="dom-pushevent" data-idl="interface"
                        data-title="PushEvent" data-dfn-for="" tabindex="0"
                        aria-haspopup="dialog"><code>PushEvent</code></dfn> 接口
                </h3><a class="self-link" href="#pushevent-interface" aria-label="Permalink for Section 10.2"></a>
            </div>

            <pre class="idl def" data-cite="WEBIDL SERVICE-WORKERS NOTIFICATIONS"
                id="webidl-1213098884"><span class="idlHeader"><a class="self-link" href="#webidl-1213098884">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-pushevent" data-title="PushEvent">[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=ServiceWorker</span>, <span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>]
interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-pushevent" id="ref-for-dom-pushevent-1"><code>PushEvent</code></a> : <span class="idlSuperclass"><a data-link-type="interface" href="https://www.w3.org/TR/service-workers/#extendableevent">ExtendableEvent</a></span> {<span data-idl="" class="idlConstructor" id="idl-def-pushevent-constructor-type-eventinitdict" data-title="constructor" data-dfn-for="PushEvent">
  <a class="internalDFN" data-link-type="constructor" href="#dom-pushevent-constructor" id="ref-for-dom-pushevent-constructor-1"><code>constructor</code></a>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">type</span>, optional<span class="idlType"> <a data-link-type="idl" href="#dom-pusheventinit" class="internalDFN" id="ref-for-dom-pusheventinit-1"><code>PushEventInit</code></a></span> <span class="idlParamName">eventInitDict</span> = {});</span><span data-idl="" class="idlAttribute" id="idl-def-pushevent-data" data-title="data" data-dfn-for="PushEvent">
  readonly attribute<span class="idlType"> <a data-link-type="idl" href="#dom-pushmessagedata" class="internalDFN" id="ref-for-dom-pushmessagedata-3"><code>PushMessageData</code></a>?</span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-pushevent-data" id="ref-for-dom-pushevent-data-1"><code>data</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-pushevent-notification" data-title="notification" data-dfn-for="PushEvent">
  readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://notifications.spec.whatwg.org/#notification">Notification</a>?</span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-pushevent-notification" id="ref-for-dom-pushevent-notification-1"><code>notification</code></a>;</span>
};</span><span data-idl="" class="idlDictionary" id="idl-def-pusheventinit" data-title="PushEventInit">

dictionary <dfn data-export="" data-dfn-type="dictionary" id="dom-pusheventinit" data-idl="dictionary" data-title="PushEventInit" data-dfn-for="" class="idlID" tabindex="0" aria-haspopup="dialog"><code>PushEventInit</code></dfn> : <span class="idlSuperclass"><a data-link-type="dictionary" href="https://www.w3.org/TR/service-workers/#dictdef-extendableeventinit">ExtendableEventInit</a></span> {<span data-idl="" class="idlMember" id="idl-def-pusheventinit-data" data-title="data" data-dfn-for="PushEventInit"><span class="idlType">
  <a data-link-type="idl" href="#dom-pushmessagedatainit" class="internalDFN" id="ref-for-dom-pushmessagedatainit-1"><code>PushMessageDataInit</code></a>?</span> <dfn data-export="" data-dfn-type="dict-member" id="dom-pusheventinit-data" data-idl="field" data-title="data" data-dfn-for="PushEventInit" data-type="PushMessageDataInit" class="idlName" tabindex="0" aria-haspopup="dialog"><code>data</code></dfn> = null;</span><span data-idl="" class="idlMember" id="idl-def-pusheventinit-notification" data-title="notification" data-dfn-for="PushEventInit"><span class="idlType">
  <a data-link-type="interface" href="https://notifications.spec.whatwg.org/#notification">Notification</a>?</span> <dfn data-export="" data-dfn-type="dict-member" id="dom-pusheventinit-notification" data-idl="field" data-title="notification" data-dfn-for="PushEventInit" data-type="Notification" class="idlName" tabindex="0" aria-haspopup="dialog"><code>notification</code></dfn> = null;</span>
};</span><span data-idl="" class="idlTypedef" id="idl-def-pushmessagedatainit" data-title="PushMessageDataInit">

typedef<span class="idlType"> (<a data-link-type="typedef" href="https://webidl.spec.whatwg.org/#BufferSource">BufferSource</a> or <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString">USVString</a>)</span> <dfn data-export="" data-dfn-type="typedef" id="dom-pushmessagedatainit" data-idl="typedef" data-title="PushMessageDataInit" data-dfn-for="" class="idlID" tabindex="0" aria-haspopup="dialog"><code>PushMessageDataInit</code></dfn>;</span></code></pre>
            <p>
                当 <a href="#dom-pushevent" class="internalDFN" data-link-type="idl"
                    id="ref-for-dom-pushevent-2"><code>PushEvent</code></a>
                接口或继承自 <a href="#dom-pushevent" class="internalDFN" data-link-type="idl"
                    id="ref-for-dom-pushevent-3"><code>PushEvent</code></a> 的接口构造函数被调用时，常规的 <a data-link-type="dfn"
                    href="https://dom.spec.whatwg.org/#concept-event-constructor-ext">事件构造步骤</a>需额外执行如下步骤：
            </p>
            <ol>
                <li>如果 <var>eventInitDict</var> 的 <code>data</code> 成员不存在，则将事件的 <code>data</code> 属性设为
                    <code>null</code>，并终止这些步骤。
                </li>
                <li>令 <var>b</var> 为对 <var>eventInitDict</var> 的 "<code>data</code>" 成员<a
                        href="#dfn-extract-a-byte-sequence" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-extract-a-byte-sequence-1">提取字节序列</a>的结果。
                </li>
                <li>将事件的 <code>data</code> 属性设置为一个新的 <a data-link-type="idl" data-lt="PushMessageData"
                        href="#dom-pushmessagedata" class="internalDFN"
                        id="ref-for-dom-pushmessagedata-4"><code>PushMessageData</code></a> 实例，其 <a
                        data-link-type="dfn|abstract-op" href="#dfn-bytes" class="internalDFN"
                        id="ref-for-dfn-bytes-1">字节序列（bytes）</a>为 <var>b</var>。
                </li>
            </ol>
            <p>
                <dfn data-export="" data-dfn-type="attribute" id="dom-pushevent-data" data-idl="attribute"
                    data-title="data" data-dfn-for="PushEvent" data-type="PushMessageData" data-lt="data"
                    data-local-lt="PushEvent.data" tabindex="0" aria-haspopup="dialog"><code>data</code></dfn>
                属性应返回其初始化时的值。
            </p>
            <p>
                <dfn data-export="" data-dfn-type="attribute" id="dom-pushevent-notification" data-idl="attribute"
                    data-title="notification" data-dfn-for="PushEvent" data-type="Notification" data-lt="notification"
                    data-local-lt="PushEvent.notification" tabindex="0"
                    aria-haspopup="dialog"><code>notification</code></dfn> 属性应返回其初始化时的值。
            </p>
        </section>
        <section id="receiving-a-push-message">
            <div class="header-wrapper">
                <h3 id="x10-3-receiving-a-push-message"><bdi class="secno">10.3 </bdi>
                    接收<a href="#dfn-push-message" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-push-message-40">推送消息</a>
                </h3><a class="self-link" href="#receiving-a-push-message" aria-label="Permalink for Section 10.3"></a>
            </div>

            <p>
                当<a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-user-agent-50">用户代理</a>从<a href="#dfn-push-service" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-push-service-29">推送服务</a>收到<a href="#dfn-push-message"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-message-41">推送消息</a>时，<em
                    class="rfc2119">必须</em>按以下步骤运行。
            </p>
            <ol>
                <li>令 <var>registration</var> 为与该<a data-link-type="dfn"
                        href="https://www.w3.org/TR/service-workers/#dfn-service-worker-registration">Service Worker
                        注册</a>对应的 <a href="#dfn-push-message" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-push-message-42">
                        推送消息</a>。
                </li>
                <li>如果未找到 <var>registration</var>，则终止这些步骤。
                </li>
                <li>令 <var>subscription</var> 为 <var>registration</var> 的活跃<a href="#dfn-push-subscription"
                        class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-subscription-69">推送订阅</a>。
                </li>
                <li>令 <var>bytes</var> 为 null。
                </li>
                <li>如果<a href="#dfn-push-message" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-push-message-43">推送消息</a>包含载荷：
                    <ol>
                        <li>使用与 <var>subscription</var> 相关联的密钥对的私钥，按照 [<cite><a class="bibref" data-link-type="biblio"
                                    href="#bib-rfc8291" title="Message Encryption for Web Push">RFC8291</a></cite>]
                            描述的过程解密<a href="#dfn-push-message" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-push-message-44">推送消息</a>的载荷。将 <var>bytes</var> 设置为解密后的<a
                                data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte-sequence">字节序列</a>。
                        </li>
                        <li>
                            <p>
                                如果出于任何原因无法解密<a href="#dfn-push-message" class="internalDFN" data-link-type="dfn"
                                    id="ref-for-dfn-push-message-45">推送消息</a>载荷，则<a data-link-type="dfn|abstract-op"
                                    data-lt="acknowledge a push message" href="#dfn-acknowledge-a-push-message"
                                    class="internalDFN" id="ref-for-dfn-acknowledge-a-push-message-1">确认</a>该<a
                                    href="#dfn-push-message" class="internalDFN" data-link-type="dfn"
                                    id="ref-for-dfn-push-message-46">推送消息</a>并终止这些步骤。
                            </p>
                            <div class="note" role="note" id="issue-container-generatedID-2">
                                <div role="heading" class="note-title marker" id="h-note-2" aria-level="4">
                                    <span>注意</span>
                                </div>
                                <p class="">
                                    未能使用与<a href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                                        id="ref-for-dfn-push-subscription-70">推送订阅</a>相关联的密钥对成功解密的<a
                                        href="#dfn-push-message" class="internalDFN" data-link-type="dfn"
                                        id="ref-for-dfn-push-message-47">推送消息</a>不会触发 <code>push</code> 事件。
                                </p>
                            </div>
                        </li>
                    </ol>
                </li>
                <li>
                    <p>
                        如果 <var>bytes</var> 非 null：
                    </p>
                    <ol>
                        <li>
                            <p>
                                令 <var>baseURL</var> 为 <var>registration</var> 的 <a data-link-type="dfn"
                                    href="https://www.w3.org/TR/service-workers/#dfn-scope-url">scope URL</a>。
                            </p>
                        </li>
                        <li>
                            <p>
                                令 <var>origin</var> 为 <var>baseURL</var> 的 <a data-link-type="dfn"
                                    href="https://url.spec.whatwg.org/#concept-url-origin">origin</a>。
                            </p>
                        </li>
                        <li>
                            <p>
                                令 <var>fallbackTimestamp</var> 为 <a data-link-type="dfn"
                                    href="https://www.w3.org/TR/hr-time-3/#dfn-current-wall-time">当前时间</a>。
                            </p>
                        </li>
                        <li>
                            <p>
                                令 <var>declarativeResult</var> 为运行 <a data-link-type="dfn|abstract-op"
                                    href="#dfn-declarative-push-message-parser" class="internalDFN"
                                    id="ref-for-dfn-declarative-push-message-parser-2">声明式推送消息解析器</a>，输入参数为<var>bytes</var>、<var>origin</var>、<var>baseURL</var>和<var>fallbackTimestamp</var>的结果。
                            </p>
                        </li>
                        <li>
                            <p>
                                如果 <var>declarativeResult</var> 非 failure：
                            </p>
                            <ol>
                                <li>
                                    <p>
                                        令 <var>notification</var> 为 <var>declarativeResult</var> 的 <a
                                            data-link-type="dfn|abstract-op" href="#dfn-notification"
                                            class="internalDFN" id="ref-for-dfn-notification-1">notification</a>。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        设置 <var>notification</var> 的 <a data-link-type="dfn"
                                            href="https://notifications.spec.whatwg.org/#service-worker-registration">Service
                                            Worker 注册</a>为
                                        <var>registration</var>。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        令 <var>notificationShown</var> 为 false。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        如果 <var>declarativeResult</var> 的 <a data-link-type="dfn|abstract-op"
                                            href="#dfn-mutable" class="internalDFN"
                                            id="ref-for-dfn-mutable-1">mutable</a>
                                        为 true：
                                    </p>
                                    <ol>
                                        <li>
                                            <p>
                                                令 <var>result</var> 为运行 <a data-link-type="dfn|abstract-op"
                                                    data-lt="fire a push event" href="#dfn-fire-a-push-event"
                                                    class="internalDFN" id="ref-for-dfn-fire-a-push-event-1">触发 push
                                                    事件</a>
                                                ，参数为 <var>registration</var>、null 和表示 <var>notification</var> 的新的 <a
                                                    data-link-type="interface" data-lt="Notification"
                                                    href="https://notifications.spec.whatwg.org/#notification"><code>Notification</code></a>
                                                对象的结果。
                                            </p>
                                        </li>
                                        <li>
                                            <p>
                                                如果 <var>result</var> 非 failure，则将 <var>notificationShown</var> 设置为
                                                <var>result</var> 的 <a data-link-type="dfn|abstract-op"
                                                    href="#dfn-notification-shown" class="internalDFN"
                                                    id="ref-for-dfn-notification-shown-1">notification shown</a>。
                                            </p>
                                        </li>
                                    </ol>
                                </li>
                                <li>
                                    <p>
                                        如果 <var>notificationShown</var> 为 false，则运行 <a data-link-type="dfn"
                                            href="https://notifications.spec.whatwg.org/#notification-show-steps">notification
                                            show steps</a>
                                        ，参数为 <var>notification</var>。
                                    </p>
                                </li>
                                <li>
                                    <p>
                                        <a data-link-type="dfn|abstract-op" data-lt="acknowledge a push message"
                                            href="#dfn-acknowledge-a-push-message" class="internalDFN"
                                            id="ref-for-dfn-acknowledge-a-push-message-2">确认</a>该<a
                                            href="#dfn-push-message" class="internalDFN" data-link-type="dfn"
                                            id="ref-for-dfn-push-message-48">推送消息</a>并终止这些步骤。
                                    </p>
                                </li>
                            </ol>
                        </li>
                    </ol>
                </li>
                <li>
                    <p>
                        令 <var>data</var> 为新的 <a data-link-type="idl" data-lt="PushMessageData"
                            href="#dom-pushmessagedata" class="internalDFN"
                            id="ref-for-dom-pushmessagedata-5"><code>PushMessageData</code></a> 对象，其 <a
                            data-link-type="dfn|abstract-op" href="#dfn-bytes" class="internalDFN"
                            id="ref-for-dfn-bytes-2">字节序列（bytes）</a>为 <var>bytes</var>（如 <var>bytes</var> 非 null），否则为
                        null。
                    </p>
                </li>
                <li>
                    <p>
                        令 <var>result</var> 为运行 <a data-link-type="dfn|abstract-op" data-lt="fire a push event"
                            href="#dfn-fire-a-push-event" class="internalDFN" id="ref-for-dfn-fire-a-push-event-2">触发
                            push 事件</a>，参数为
                        <var>registration</var>、<var>data</var> 和 null 的结果。
                    </p>
                </li>
                <li>
                    <p>
                        如果 <var>result</var> 为 failure 且同一 <a href="#dfn-push-message" class="internalDFN"
                            data-link-type="dfn" id="ref-for-dfn-push-message-49">推送消息</a>多次投递给 Service Worker 注册均失败，则<a
                            data-link-type="dfn|abstract-op" data-lt="acknowledge a push message"
                            href="#dfn-acknowledge-a-push-message" class="internalDFN"
                            id="ref-for-dfn-acknowledge-a-push-message-3">确认</a>该<a href="#dfn-push-message"
                            class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-message-50">推送消息</a>。
                    </p>
                </li>
                <li>
                    <p>
                        如果 <var>result</var> 非 failure，则<a data-link-type="dfn|abstract-op"
                            data-lt="acknowledge a push message" href="#dfn-acknowledge-a-push-message"
                            class="internalDFN" id="ref-for-dfn-acknowledge-a-push-message-4">确认</a>
                        该<a href="#dfn-push-message" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-push-message-51">推送消息</a>。
                    </p>
                </li>
            </ol>
            <p>
                <dfn id="dfn-push-event-result" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">push
                    事件结果</dfn>是一个<a data-link-type="dfn" href="https://infra.spec.whatwg.org/#tuple">元组</a>，包含一个<dfn
                    data-dfn-for="push event result" id="dfn-notification-shown" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">notification shown</dfn>（一个<a data-link-type="dfn"
                    href="https://infra.spec.whatwg.org/#boolean">布尔值</a>）。
            </p>
            <p>
                <dfn id="dfn-fire-a-push-event" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">触发 push
                    事件</dfn>，给定一个<a data-link-type="dfn"
                    href="https://www.w3.org/TR/service-workers/#dfn-service-worker-registration">Service Worker 注册</a>
                <var>registration</var>、
                <a data-link-type="idl" data-lt="PushMessageData" href="#dom-pushmessagedata" class="internalDFN"
                    id="ref-for-dom-pushmessagedata-6"><code>PushMessageData</code></a> 对象或 null <var>data</var>，
                和一个<a data-link-type="permission"
                    href="https://notifications.spec.whatwg.org/#permissiondef-notifications">notification</a> 或 null
                <var>notification</var>，按如下步骤运行。返回 failure 或 <a data-link-type="dfn|abstract-op"
                    href="#dfn-push-event-result" class="internalDFN" id="ref-for-dfn-push-event-result-1">push
                    事件结果</a>。
            </p>
            <ol>
                <li>
                    <p>
                        令 <var>notificationResult</var> 为 null。
                    </p>
                </li>
                <li>
                    <p>
                        设置 <var>registration</var> 的 <a data-link-type="dfn"
                            data-lt="has shownotification() been successfully invoked"
                            href="https://notifications.spec.whatwg.org/#service-worker-registration-has-shownotification-been-successfully-invoked">showNotification()
                            是否成功调用</a>为 false。
                    </p>
                </li>
                <li>
                    <p>
                        <a data-link-type="dfn"
                            href="https://www.w3.org/TR/service-workers/#fire-functional-event">触发功能事件</a>，事件名为
                        "<code>push</code>"，在 <var>registration</var> 上使用 <a href="#dom-pushevent" class="internalDFN"
                            data-link-type="idl" id="ref-for-dom-pushevent-4"><code>PushEvent</code></a>，属性如下：
                    </p>
                    <dl>
                        <dt>
                            <a data-link-type="idl" href="#dom-pushevent-data" class="internalDFN"
                                id="ref-for-dom-pushevent-data-2"><code>data</code></a>
                        </dt>
                        <dd>
                            <var>data</var>
                        </dd>
                        <dt>
                            <a data-link-type="idl" href="#dom-pushevent-notification" class="internalDFN"
                                id="ref-for-dom-pushevent-notification-2"><code>notification</code></a>
                        </dt>
                        <dd>
                            <var>notification</var>
                        </dd>
                    </dl>
                    <p>
                        然后并行运行以下步骤，参数 <var>dispatchedEvent</var>：
                    </p>
                    <ol>
                        <li>
                            <p>
                                等待 <var>dispatchedEvent</var> 的所有 <a data-link-type="dfn"
                                    href="https://www.w3.org/TR/service-workers/#extendableevent-extend-lifetime-promises">extend
                                    lifetime promises</a> 均 resolve。
                            </p>
                        </li>
                        <li>
                            <p>
                                如果未全部成功 resolve，则将 <var>notificationResult</var> 设为 failure。
                            </p>
                        </li>
                        <li>
                            <p>
                                否则，将 <var>notificationResult</var> 设为 <var>registration</var> 的 <a data-link-type="dfn"
                                    data-lt="has shownotification() been successfully invoked"
                                    href="https://notifications.spec.whatwg.org/#service-worker-registration-has-shownotification-been-successfully-invoked">showNotification()
                                    是否成功调用</a>。
                            </p>
                        </li>
                    </ol>
                </li>
                <li>
                    <p>
                        等待 <var>notificationResult</var> 非 null。
                    </p>
                </li>
                <li>
                    <p>
                        如果 <var>notificationResult</var> 为 failure，则返回 failure。
                    </p>
                </li>
                <li>
                    <p>
                        <a data-link-type="dfn"
                            href="https://infra.spec.whatwg.org/#assert">断言</a>：<var>notificationResult</var> 是一个<a
                            data-link-type="dfn" href="https://infra.spec.whatwg.org/#boolean">布尔值</a>。
                    </p>
                </li>
                <li>
                    <p>
                        返回 (<var>notificationResult</var>)。
                    </p>
                </li>
            </ol>
            <p>
                <dfn id="dfn-acknowledge-a-push-message" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">确认推送消息</dfn>，参数为 <a href="#dfn-push-message" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-push-message-52">pushMessage</a>
                ，表示按照 [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc8030"
                        title="Generic Event Delivery Using HTTP Push">RFC8030</a></cite>] 确认已收到 <var>pushMessage</var>。
            </p>
            <p>
                确认<a href="#dfn-push-message" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-push-message-53">推送消息</a>会使<a href="#dfn-push-service" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-push-service-30">推送服务</a>停止投递该消息，并向<a
                    href="#dfn-application-server" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-application-server-26">应用服务器</a>报告成功。这能防止同一 <a href="#dfn-push-message"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-message-54">推送消息</a>被推送服务无限重试投递。
            </p>
            <p>
                确认也意味着<a href="#dfn-application-server" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-application-server-27">应用服务器</a>可能会错误地收到成功投递该<a href="#dfn-push-message"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-push-message-55">推送消息</a>的投递回执。因此，<em
                    class="rfc2119">应当</em>允许多次拒绝后再确认，建议至少允许三次尝试。
            </p>
        </section>
        <section id="the-pushsubscriptionchange-event">
            <div class="header-wrapper">
                <h3 id="x10-4-the-pushsubscriptionchange-event"><bdi class="secno">10.4 </bdi>
                    <dfn id="dfn-pushsubscriptionchange" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">pushsubscriptionchange</dfn> 事件
                </h3><a class="self-link" href="#the-pushsubscriptionchange-event"
                    aria-label="Permalink for Section 10.4"></a>
            </div>

            <p>
                <a href="#dfn-pushsubscriptionchange" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-pushsubscriptionchange-1">pushsubscriptionchange</a> 事件指示某 <a
                    href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-push-subscription-71">推送订阅</a>发生了应用外部触发的变更，如被刷新、撤销或丢失等。
            </p>
            <p>
                <dfn id="dfn-fire-the-pushsubscriptionchange-event" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">触发 "<code>pushsubscriptionchange</code>" 事件</dfn>，参数为 <a data-link-type="dfn"
                    href="https://www.w3.org/TR/service-workers/#dfn-service-worker-registration">Service Worker 注册</a>
                <var>registration</var>、<var>newSubscription</var> 和 <var>oldSubscription</var>，则 <a
                    href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-user-agent-51">用户代理</a>必须 <a data-link-type="dfn"
                    href="https://www.w3.org/TR/service-workers/#fire-functional-event">触发功能事件</a>，
                事件名为 "<code>pushsubscriptionchange</code>"，在
                <var>registration</var> 上使用 <a href="#dom-pushsubscriptionchangeevent" class="internalDFN"
                    data-link-type="idl"
                    id="ref-for-dom-pushsubscriptionchangeevent-1"><code>PushSubscriptionChangeEvent</code></a>，属性如下：
            </p>
            <dl>
                <dt>
                    <code>newSubscription</code>
                </dt>
                <dd>
                    <var>newSubscription</var>
                </dd>
                <dt>
                    <code>oldSubscription</code>
                </dt>
                <dd>
                    <var>oldSubscription</var>
                </dd>
            </dl>
            <div class="note" role="note" id="issue-container-generatedID-3">
                <div role="heading" class="note-title marker" id="h-note-3" aria-level="4"><span>注意</span></div>
                <p class="">
                    向<a href="#dfn-application-server" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-application-server-28">应用服务器</a>发送新<a href="#dfn-push-subscription"
                        class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-push-subscription-72">推送订阅</a>详情时，建议使用更可靠的同步机制，如 [<cite><a class="bibref"
                            data-link-type="biblio" href="#bib-web-background-sync"
                            title="Web Background Synchronization">WEB-BACKGROUND-SYNC</a></cite>]。用户可能受到不可靠网络环境影响，导致
                    fetch 失败。
                </p>
            </div>
            <section data-dfn-for="PushSubscriptionChangeEvent" id="pushsubscriptionchangeevent-interface">
                <div class="header-wrapper">
                    <h4 id="x10-4-1-pushsubscriptionchangeevent-interface"><bdi class="secno">10.4.1 </bdi>
                        <dfn data-export="" data-dfn-type="interface" id="dom-pushsubscriptionchangeevent"
                            data-idl="interface" data-title="PushSubscriptionChangeEvent" data-dfn-for="" tabindex="0"
                            aria-haspopup="dialog"><code>PushSubscriptionChangeEvent</code></dfn> 接口
                    </h4><a class="self-link" href="#pushsubscriptionchangeevent-interface"
                        aria-label="Permalink for Section 10.4.1"></a>
                </div>

                <pre class="idl def" data-cite="WEBIDL SERVICE-WORKERS" id="webidl-2104077905"><span class="idlHeader"><a class="self-link" href="#webidl-2104077905">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-pushsubscriptionchangeevent" data-title="PushSubscriptionChangeEvent">[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=ServiceWorker</span>, <span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>]
interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-pushsubscriptionchangeevent" id="ref-for-dom-pushsubscriptionchangeevent-2"><code>PushSubscriptionChangeEvent</code></a> : <span class="idlSuperclass"><a data-link-type="interface" href="https://www.w3.org/TR/service-workers/#extendableevent">ExtendableEvent</a></span> {<span data-idl="" class="idlConstructor" id="idl-def-pushsubscriptionchangeevent-constructor-type-eventinitdict" data-title="constructor" data-dfn-for="PushSubscriptionChangeEvent">
  <dfn data-export="" data-dfn-type="constructor" id="dom-pushsubscriptionchangeevent-constructor" data-idl="constructor" data-title="constructor" data-dfn-for="PushSubscriptionChangeEvent" data-lt="constructor()|constructor(type)|constructor(type, eventInitDict)" data-local-lt="PushSubscriptionChangeEvent.constructor|PushSubscriptionChangeEvent.constructor()|constructor" tabindex="0" aria-haspopup="dialog"><code>constructor</code></dfn>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">type</span>, optional<span class="idlType"> <a data-link-type="idl" href="#dom-pushsubscriptionchangeeventinit" class="internalDFN" id="ref-for-dom-pushsubscriptionchangeeventinit-1"><code>PushSubscriptionChangeEventInit</code></a></span> <span class="idlParamName">eventInitDict</span> = {});</span><span data-idl="" class="idlAttribute" id="idl-def-pushsubscriptionchangeevent-newsubscription" data-title="newSubscription" data-dfn-for="PushSubscriptionChangeEvent">
  readonly attribute<span class="idlType"> <a data-link-type="idl" href="#dom-pushsubscription" class="internalDFN" id="ref-for-dom-pushsubscription-23"><code>PushSubscription</code></a>?</span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-pushsubscriptionchangeevent-newsubscription" id="ref-for-dom-pushsubscriptionchangeevent-newsubscription-1"><code>newSubscription</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-pushsubscriptionchangeevent-oldsubscription" data-title="oldSubscription" data-dfn-for="PushSubscriptionChangeEvent">
  readonly attribute<span class="idlType"> <a data-link-type="idl" href="#dom-pushsubscription" class="internalDFN" id="ref-for-dom-pushsubscription-24"><code>PushSubscription</code></a>?</span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-pushsubscriptionchangeevent-oldsubscription" id="ref-for-dom-pushsubscriptionchangeevent-oldsubscription-1"><code>oldSubscription</code></a>;</span>
};</span></code></pre>
                <p>
                    <dfn data-export="" data-dfn-type="attribute" id="dom-pushsubscriptionchangeevent-newsubscription"
                        data-idl="attribute" data-title="newSubscription" data-dfn-for="PushSubscriptionChangeEvent"
                        data-type="PushSubscription" data-lt="newSubscription"
                        data-local-lt="PushSubscriptionChangeEvent.newSubscription" tabindex="0"
                        aria-haspopup="dialog"><code>newSubscription</code></dfn> 属性，获取时返回其初始化值。
                </p>
                <p>
                    <dfn data-export="" data-dfn-type="attribute" id="dom-pushsubscriptionchangeevent-oldsubscription"
                        data-idl="attribute" data-title="oldSubscription" data-dfn-for="PushSubscriptionChangeEvent"
                        data-type="PushSubscription" data-lt="oldSubscription"
                        data-local-lt="PushSubscriptionChangeEvent.oldSubscription" tabindex="0"
                        aria-haspopup="dialog"><code>oldSubscription</code></dfn> 属性，获取时返回其初始化值。
                </p>
            </section>
            <section data-dfn-for="PushSubscriptionChangeEventInit" id="pushsubscriptionchangeeventinit-interface">
                <div class="header-wrapper">
                    <h4 id="x10-4-2-pushsubscriptionchangeeventinit-interface"><bdi class="secno">10.4.2 </bdi>
                        <dfn data-export="" data-dfn-type="dictionary" id="dom-pushsubscriptionchangeeventinit"
                            data-idl="dictionary" data-title="PushSubscriptionChangeEventInit" data-dfn-for=""
                            tabindex="0" aria-haspopup="dialog"><code>PushSubscriptionChangeEventInit</code></dfn>
                        接口
                    </h4><a class="self-link" href="#pushsubscriptionchangeeventinit-interface"
                        aria-label="Permalink for Section 10.4.2"></a>
                </div>

                <pre class="idl def" data-cite="WEBIDL SERVICE-WORKERS" id="webidl-1842180883"><span class="idlHeader"><a class="self-link" href="#webidl-1842180883">WebIDL</a></span><code><span data-idl="" class="idlDictionary" id="idl-def-pushsubscriptionchangeeventinit" data-title="PushSubscriptionChangeEventInit">dictionary <a class="internalDFN idlID" data-link-type="dictionary" href="#dom-pushsubscriptionchangeeventinit" id="ref-for-dom-pushsubscriptionchangeeventinit-2"><code>PushSubscriptionChangeEventInit</code></a> : <span class="idlSuperclass"><a data-link-type="dictionary" href="https://www.w3.org/TR/service-workers/#dictdef-extendableeventinit">ExtendableEventInit</a></span> {<span data-idl="" class="idlMember" id="idl-def-pushsubscriptionchangeeventinit-newsubscription" data-title="newSubscription" data-dfn-for="PushSubscriptionChangeEventInit"><span class="idlType">
  <a data-link-type="idl" href="#dom-pushsubscription" class="internalDFN" id="ref-for-dom-pushsubscription-25"><code>PushSubscription</code></a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-pushsubscriptionchangeeventinit-newsubscription" id="ref-for-dom-pushsubscriptionchangeeventinit-newsubscription-1"><code>newSubscription</code></a> = null;</span><span data-idl="" class="idlMember" id="idl-def-pushsubscriptionchangeeventinit-oldsubscription" data-title="oldSubscription" data-dfn-for="PushSubscriptionChangeEventInit"><span class="idlType">
  <a data-link-type="idl" href="#dom-pushsubscription" class="internalDFN" id="ref-for-dom-pushsubscription-26"><code>PushSubscription</code></a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-pushsubscriptionchangeeventinit-oldsubscription" id="ref-for-dom-pushsubscriptionchangeeventinit-oldsubscription-1"><code>oldSubscription</code></a> = null;</span>
};</span></code></pre>
                <p>
                    <dfn data-export="" data-dfn-type="dict-member"
                        id="dom-pushsubscriptionchangeeventinit-newsubscription" data-idl="field"
                        data-title="newSubscription" data-dfn-for="PushSubscriptionChangeEventInit"
                        data-type="PushSubscription" tabindex="0"
                        aria-haspopup="dialog"><code>newSubscription</code></dfn> 成员表示本次 <a
                        href="#dfn-pushsubscriptionchange" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-pushsubscriptionchange-2">pushsubscriptionchange</a> 事件有效的 <a
                        href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-push-subscription-73">推送订阅</a>。当无法建立新的 <a href="#dfn-push-subscription"
                        class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-push-subscription-74">推送订阅</a>（例如因丢失明确授权），该值为 <code>null</code>。
                </p>
                <p>
                    <dfn data-export="" data-dfn-type="dict-member"
                        id="dom-pushsubscriptionchangeeventinit-oldsubscription" data-idl="field"
                        data-title="oldSubscription" data-dfn-for="PushSubscriptionChangeEventInit"
                        data-type="PushSubscription" tabindex="0"
                        aria-haspopup="dialog"><code>oldSubscription</code></dfn> 成员表示本次已不应再使用的 <a
                        href="#dfn-push-subscription" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-push-subscription-75">推送订阅</a>。当 <a href="#dfn-user-agent" class="internalDFN"
                        data-link-type="dfn" id="ref-for-dfn-user-agent-52">用户代理</a>无法提供全部详细信息（如数据库部分损坏），该值为
                    <code>null</code>。
                </p>
            </section>
        </section>
    </section>
    <section id="accessibility">
        <div class="header-wrapper">
            <h2 id="x11-accessibility"><bdi class="secno">11. </bdi>
                无障碍
            </h2><a class="self-link" href="#accessibility" aria-label="Permalink for Section 11."></a>
        </div>

        <p>
            <cite>Push API</cite> 本身不提供任何用于展示其从 <a data-link-type="dfn|abstract-op" href="#dfn-push-service"
                class="internalDFN" id="ref-for-dfn-push-service-32">推送服务</a>接收到的数据的手段。相反，<cite>Push API</cite> 依赖其他 API
            —— 主要是 <cite><a data-matched-text="[[[NOTIFICATIONS]]]" href="https://notifications.spec.whatwg.org/">通知 API
                    标准</a></cite> —— 来向终端用户展示收到的信息。因此，<cite>Push API</cite> 本身没有无障碍要求。
            不过，[<cite><a class="bibref" data-link-type="biblio" href="#bib-notifications"
                    title="Notifications API Standard">NOTIFICATIONS</a></cite>] 等规范对如何以无障碍方式展示通知提供了指导。
        </p>
        <p>
            此外，提供无障碍接口可能需要传递比推送消息能包含的更多信息。推送消息更适合携带少量内容或标识符。任何较大的资源需要从服务器拉取。
        </p>
    </section>
    <section id="conformance">
        <div class="header-wrapper">
            <h2 id="x12-conformance"><bdi class="secno">12. </bdi>一致性
            </h2><a class="self-link" href="#conformance" aria-label="Permalink for Section 12."></a>
        </div>
        <p>除标为非规范性的章节外，本规范中的所有创作指南、图表、示例和备注均为非规范性内容。除此之外的内容均为规范性内容。</p>
        <p>
            本文档中的 <em class="rfc2119">MAY</em>、<em class="rfc2119">MUST</em>、<em class="rfc2119">MUST
                NOT</em>、<em class="rfc2119">SHOULD</em> 和 <em class="rfc2119">SHOULD NOT</em> 这些关键词应按照
            <a href="https://www.rfc-editor.org/info/bcp14">BCP 14</a>
            [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc2119"
                    title="Key words for use in RFCs to Indicate Requirement Levels">RFC2119</a></cite>] [<cite><a
                    class="bibref" data-link-type="biblio" href="#bib-rfc8174"
                    title="Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words">RFC8174</a></cite>]
            的说明进行解释，仅当这些词以全大写形式出现时，如此处所示。
        </p>
        <p>
            本规范定义了适用于单一产品的符合性标准：实现本规范所含接口的
            <dfn data-plurals="user agents" id="dfn-user-agent" tabindex="0" aria-haspopup="dialog"
                data-dfn-type="dfn">用户代理</dfn>。
        </p>
    </section>
    <section class="appendix" id="idl-index">
        <div class="header-wrapper">
            <h2 id="a-idl-index"><bdi class="secno">A. </bdi>IDL 索引</h2><a class="self-link" href="#idl-index"
                aria-label="Permalink for Appendix A."></a>
        </div>
        <pre class="idl def" id="actual-idl-index"><span class="idlHeader"><a class="self-link" href="#actual-idl-index">WebIDL</a></span><code><span data-idl="" class="idlDictionary" data-title="PushPermissionDescriptor">dictionary <dfn data-export="" data-dfn-type="dictionary" data-idl="dictionary" data-title="PushPermissionDescriptor" data-dfn-for="" class="idlID"><code>PushPermissionDescriptor</code></dfn> : <span class="idlSuperclass"><a data-link-type="dictionary" href="https://www.w3.org/TR/permissions/#dom-permissiondescriptor">PermissionDescriptor</a></span> {<span data-idl="" class="idlMember" data-title="userVisibleOnly" data-dfn-for="PushPermissionDescriptor"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean">boolean</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-pushpermissiondescriptor-uservisibleonly" id="ref-for-dom-pushpermissiondescriptor-uservisibleonly-2"><code>userVisibleOnly</code></a> = false;</span>
};</span>

<span data-idl="" class="idlInterface" data-title="ServiceWorkerRegistration">[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>]
partial interface <a data-idl="partial" data-link-type="interface" data-title="ServiceWorkerRegistration" class="idlID" data-dfn-for="ServiceWorkerRegistration" href="https://www.w3.org/TR/service-workers/#serviceworkerregistration">ServiceWorkerRegistration</a> {<span data-idl="" class="idlAttribute" data-title="pushManager" data-dfn-for="ServiceWorkerRegistration">
  readonly attribute<span class="idlType"> <a data-link-type="idl" href="#dom-pushmanager" class="internalDFN" id="ref-for-dom-pushmanager-5"><code>PushManager</code></a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-serviceworkerregistration-pushmanager" id="ref-for-dom-serviceworkerregistration-pushmanager-2"><code>pushManager</code></a>;</span>
};</span>

<span data-idl="" class="idlInterface" data-title="PushManager">[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=(Window,Worker)</span>, <span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>]
interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-pushmanager" id="ref-for-dom-pushmanager-6"><code>PushManager</code></a> {<span data-idl="" class="idlAttribute" data-title="supportedContentEncodings" data-dfn-for="PushManager">
  [<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject">SameObject</a></span>] static readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-frozen-array">FrozenArray</a>&lt;<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a>&gt;</span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-pushmanager-supportedcontentencodings" id="ref-for-dom-pushmanager-supportedcontentencodings-2"><code>supportedContentEncodings</code></a>;</span><span data-idl="" class="idlMethod" data-title="subscribe" data-dfn-for="PushManager"><span class="idlType">

  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dom-pushsubscription" class="internalDFN" id="ref-for-dom-pushsubscription-27"><code>PushSubscription</code></a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-pushmanager-subscribe" id="ref-for-dom-pushmanager-subscribe-3"><code>subscribe</code></a>(optional<span class="idlType"> <a data-link-type="idl" href="#dom-pushsubscriptionoptionsinit" class="internalDFN" id="ref-for-dom-pushsubscriptionoptionsinit-6"><code>PushSubscriptionOptionsInit</code></a></span> <span class="idlParamName">options</span> = {});</span><span data-idl="" class="idlMethod" data-title="getSubscription" data-dfn-for="PushManager"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" href="#dom-pushsubscription" class="internalDFN" id="ref-for-dom-pushsubscription-28"><code>PushSubscription</code></a>?&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-pushmanager-getsubscription" id="ref-for-dom-pushmanager-getsubscription-2"><code>getSubscription</code></a>();</span><span data-idl="" class="idlMethod" data-title="permissionState" data-dfn-for="PushManager"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="enum" href="https://www.w3.org/TR/permissions/#dom-permissionstate">PermissionState</a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-pushmanager-permissionstate" id="ref-for-dom-pushmanager-permissionstate-2"><code>permissionState</code></a>(optional<span class="idlType"> <a data-link-type="idl" href="#dom-pushsubscriptionoptionsinit" class="internalDFN" id="ref-for-dom-pushsubscriptionoptionsinit-7"><code>PushSubscriptionOptionsInit</code></a></span> <span class="idlParamName">options</span> = {});</span>
};</span>

<span data-idl="" class="idlInterface" data-title="PushSubscriptionOptions">[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=(Window,Worker)</span>, <span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>]
interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-pushsubscriptionoptions" id="ref-for-dom-pushsubscriptionoptions-7"><code>PushSubscriptionOptions</code></a> {<span data-idl="" class="idlAttribute" data-title="userVisibleOnly" data-dfn-for="PushSubscriptionOptions">
  readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean">boolean</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-pushsubscriptionoptions-uservisibleonly" id="ref-for-dom-pushsubscriptionoptions-uservisibleonly-2"><code>userVisibleOnly</code></a>;</span><span data-idl="" class="idlAttribute" data-title="applicationServerKey" data-dfn-for="PushSubscriptionOptions">
  [<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject">SameObject</a></span>] readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-ArrayBuffer">ArrayBuffer</a>?</span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-pushsubscriptionoptions-applicationserverkey" id="ref-for-dom-pushsubscriptionoptions-applicationserverkey-8"><code>applicationServerKey</code></a>;</span>
};</span>

<span data-idl="" class="idlDictionary" data-title="PushSubscriptionOptionsInit">dictionary <a class="internalDFN idlID" data-link-type="dictionary" href="#dom-pushsubscriptionoptionsinit" id="ref-for-dom-pushsubscriptionoptionsinit-8"><code>PushSubscriptionOptionsInit</code></a> {<span data-idl="" class="idlMember" data-title="userVisibleOnly" data-dfn-for="PushSubscriptionOptionsInit"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean">boolean</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-pushsubscriptionoptionsinit-uservisibleonly" id="ref-for-dom-pushsubscriptionoptionsinit-uservisibleonly-5"><code>userVisibleOnly</code></a> = false;</span><span data-idl="" class="idlMember" data-title="applicationServerKey" data-dfn-for="PushSubscriptionOptionsInit"><span class="idlType">
  (<a data-link-type="typedef" href="https://webidl.spec.whatwg.org/#BufferSource">BufferSource</a> or <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a>)?</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-pushsubscriptionoptionsinit-applicationserverkey" id="ref-for-dom-pushsubscriptionoptionsinit-applicationserverkey-7"><code>applicationServerKey</code></a> = null;</span>
};</span>

<span data-idl="" class="idlInterface" data-title="PushSubscription">[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=(Window,Worker)</span>, <span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>]
interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-pushsubscription" id="ref-for-dom-pushsubscription-29"><code>PushSubscription</code></a> {<span data-idl="" class="idlAttribute" data-title="endpoint" data-dfn-for="PushSubscription">
  readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString">USVString</a></span> <dfn data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="endpoint" data-dfn-for="PushSubscription" data-type="USVString" data-lt="endpoint" data-local-lt="PushSubscription.endpoint" class="idlName"><code>endpoint</code></dfn>;</span><span data-idl="" class="idlAttribute" data-title="expirationTime" data-dfn-for="PushSubscription">
  readonly attribute<span class="idlType"> <a data-link-type="typedef" href="https://www.w3.org/TR/hr-time-3/#dom-epochtimestamp">EpochTimeStamp</a>?</span> <dfn data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="expirationTime" data-dfn-for="PushSubscription" data-type="EpochTimeStamp" data-lt="expirationTime" data-local-lt="PushSubscription.expirationTime" class="idlName"><code>expirationTime</code></dfn>;</span><span data-idl="" class="idlAttribute" data-title="options" data-dfn-for="PushSubscription">
  [<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject">SameObject</a></span>] readonly attribute<span class="idlType"> <a data-link-type="idl" href="#dom-pushsubscriptionoptions" class="internalDFN" id="ref-for-dom-pushsubscriptionoptions-8"><code>PushSubscriptionOptions</code></a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-pushsubscription-options" id="ref-for-dom-pushsubscription-options-3"><code>options</code></a>;</span><span data-idl="" class="idlMethod" data-title="getKey" data-dfn-for="PushSubscription"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-ArrayBuffer">ArrayBuffer</a>?</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-pushsubscription-getkey" id="ref-for-dom-pushsubscription-getkey-9"><code>getKey</code></a>(<span class="idlType"><a data-link-type="idl" href="#dom-pushencryptionkeyname" class="internalDFN" id="ref-for-dom-pushencryptionkeyname-5"><code>PushEncryptionKeyName</code></a></span> <span class="idlParamName">name</span>);</span><span data-idl="" class="idlMethod" data-title="unsubscribe" data-dfn-for="PushSubscription"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean">boolean</a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-pushsubscription-unsubscribe" id="ref-for-dom-pushsubscription-unsubscribe-3"><code>unsubscribe</code></a>();</span><span data-idl="" class="idlMethod" data-title="toJSON" data-dfn-for="PushSubscription"><span class="idlType">

  <a data-link-type="idl" href="#dom-pushsubscriptionjson" class="internalDFN" id="ref-for-dom-pushsubscriptionjson-4"><code>PushSubscriptionJSON</code></a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-pushsubscription-tojson" id="ref-for-dom-pushsubscription-tojson-2"><code>toJSON</code></a>();</span>
};</span><span data-idl="" class="idlDictionary" data-title="PushSubscriptionJSON">

dictionary <a class="internalDFN idlID" data-link-type="dictionary" href="#dom-pushsubscriptionjson" id="ref-for-dom-pushsubscriptionjson-5"><code>PushSubscriptionJSON</code></a> {<span data-idl="" class="idlMember" data-title="endpoint" data-dfn-for="PushSubscriptionJSON"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString">USVString</a></span> <dfn data-export="" data-dfn-type="dict-member" data-idl="field" data-title="endpoint" data-dfn-for="PushSubscriptionJSON" data-type="USVString" class="idlName"><code>endpoint</code></dfn>;</span><span data-idl="" class="idlMember" data-title="expirationTime" data-dfn-for="PushSubscriptionJSON"><span class="idlType">
  <a data-link-type="typedef" href="https://www.w3.org/TR/hr-time-3/#dom-epochtimestamp">EpochTimeStamp</a>?</span> <dfn data-export="" data-dfn-type="dict-member" data-idl="field" data-title="expirationTime" data-dfn-for="PushSubscriptionJSON" data-type="EpochTimeStamp" class="idlName"><code>expirationTime</code></dfn> = null;</span><span data-idl="" class="idlMember" data-title="keys" data-dfn-for="PushSubscriptionJSON"><span class="idlType">
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-record">record</a>&lt;<a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a>, <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString">USVString</a>&gt;</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-pushsubscriptionjson-keys" id="ref-for-dom-pushsubscriptionjson-keys-2"><code>keys</code></a>;</span>
};</span>

<span data-idl="" class="idlEnum" data-title="PushEncryptionKeyName">enum <a class="internalDFN idlID" data-link-type="enum" href="#dom-pushencryptionkeyname" id="ref-for-dom-pushencryptionkeyname-6"><code>PushEncryptionKeyName</code></a> {
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-pushencryptionkeyname-p256dh" id="ref-for-dom-pushencryptionkeyname-p256dh-6"><code>p256dh</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-pushencryptionkeyname-auth" id="ref-for-dom-pushencryptionkeyname-auth-4"><code>auth</code></a>"</span>
};</span>

<span data-idl="" class="idlInterface" data-title="PushMessageData">[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=ServiceWorker</span>, <span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>]
interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-pushmessagedata" id="ref-for-dom-pushmessagedata-7"><code>PushMessageData</code></a> {<span data-idl="" class="idlMethod" data-title="arrayBuffer" data-dfn-for="PushMessageData"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-ArrayBuffer">ArrayBuffer</a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-pushmessagedata-arraybuffer" id="ref-for-dom-pushmessagedata-arraybuffer-2"><code>arrayBuffer</code></a>();</span><span data-idl="" class="idlMethod" data-title="blob" data-dfn-for="PushMessageData"><span class="idlType">
  <a data-link-type="interface" href="https://www.w3.org/TR/FileAPI/#dfn-Blob">Blob</a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-pushmessagedata-blob" id="ref-for-dom-pushmessagedata-blob-2"><code>blob</code></a>();</span><span data-idl="" class="idlMethod" data-title="bytes" data-dfn-for="PushMessageData"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-Uint8Array">Uint8Array</a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-pushmessagedata-bytes" id="ref-for-dom-pushmessagedata-bytes-2"><code>bytes</code></a>();</span><span data-idl="" class="idlMethod" data-title="json" data-dfn-for="PushMessageData"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any">any</a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-pushmessagedata-json" id="ref-for-dom-pushmessagedata-json-2"><code>json</code></a>();</span><span data-idl="" class="idlMethod" data-title="text" data-dfn-for="PushMessageData"><span class="idlType">
  <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString">USVString</a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-pushmessagedata-text" id="ref-for-dom-pushmessagedata-text-2"><code>text</code></a>();</span>
};</span>

<span data-idl="" class="idlInterface" data-title="ServiceWorkerGlobalScope">[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=ServiceWorker</span>, <span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>]
partial interface <a data-idl="partial" data-link-type="interface" data-title="ServiceWorkerGlobalScope" class="idlID" data-dfn-for="ServiceWorkerGlobalScope" href="https://www.w3.org/TR/service-workers/#serviceworkerglobalscope">ServiceWorkerGlobalScope</a> {<span data-idl="" class="idlAttribute" data-title="onpush" data-dfn-for="ServiceWorkerGlobalScope">
  attribute<span class="idlType"> <a data-link-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-serviceworkerglobalscope-onpush" id="ref-for-dom-serviceworkerglobalscope-onpush-2"><code>onpush</code></a>;</span><span data-idl="" class="idlAttribute" data-title="onpushsubscriptionchange" data-dfn-for="ServiceWorkerGlobalScope">
  attribute<span class="idlType"> <a data-link-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-serviceworkerglobalscope-onpushsubscriptionchange" id="ref-for-dom-serviceworkerglobalscope-onpushsubscriptionchange-2"><code>onpushsubscriptionchange</code></a>;</span>
};</span>

<span data-idl="" class="idlInterface" data-title="PushEvent">[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=ServiceWorker</span>, <span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>]
interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-pushevent" id="ref-for-dom-pushevent-5"><code>PushEvent</code></a> : <span class="idlSuperclass"><a data-link-type="interface" href="https://www.w3.org/TR/service-workers/#extendableevent">ExtendableEvent</a></span> {<span data-idl="" class="idlConstructor" data-title="constructor" data-dfn-for="PushEvent">
  <a class="internalDFN" data-link-type="constructor" href="#dom-pushevent-constructor" id="ref-for-dom-pushevent-constructor-2"><code>constructor</code></a>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">type</span>, optional<span class="idlType"> <a data-link-type="idl" href="#dom-pusheventinit" class="internalDFN" id="ref-for-dom-pusheventinit-2"><code>PushEventInit</code></a></span> <span class="idlParamName">eventInitDict</span> = {});</span><span data-idl="" class="idlAttribute" data-title="data" data-dfn-for="PushEvent">
  readonly attribute<span class="idlType"> <a data-link-type="idl" href="#dom-pushmessagedata" class="internalDFN" id="ref-for-dom-pushmessagedata-8"><code>PushMessageData</code></a>?</span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-pushevent-data" id="ref-for-dom-pushevent-data-3"><code>data</code></a>;</span><span data-idl="" class="idlAttribute" data-title="notification" data-dfn-for="PushEvent">
  readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://notifications.spec.whatwg.org/#notification">Notification</a>?</span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-pushevent-notification" id="ref-for-dom-pushevent-notification-3"><code>notification</code></a>;</span>
};</span><span data-idl="" class="idlDictionary" data-title="PushEventInit">

dictionary <dfn data-export="" data-dfn-type="dictionary" data-idl="dictionary" data-title="PushEventInit" data-dfn-for="" class="idlID"><code>PushEventInit</code></dfn> : <span class="idlSuperclass"><a data-link-type="dictionary" href="https://www.w3.org/TR/service-workers/#dictdef-extendableeventinit">ExtendableEventInit</a></span> {<span data-idl="" class="idlMember" data-title="data" data-dfn-for="PushEventInit"><span class="idlType">
  <a data-link-type="idl" href="#dom-pushmessagedatainit" class="internalDFN" id="ref-for-dom-pushmessagedatainit-2"><code>PushMessageDataInit</code></a>?</span> <dfn data-export="" data-dfn-type="dict-member" data-idl="field" data-title="data" data-dfn-for="PushEventInit" data-type="PushMessageDataInit" class="idlName"><code>data</code></dfn> = null;</span><span data-idl="" class="idlMember" data-title="notification" data-dfn-for="PushEventInit"><span class="idlType">
  <a data-link-type="interface" href="https://notifications.spec.whatwg.org/#notification">Notification</a>?</span> <dfn data-export="" data-dfn-type="dict-member" data-idl="field" data-title="notification" data-dfn-for="PushEventInit" data-type="Notification" class="idlName"><code>notification</code></dfn> = null;</span>
};</span><span data-idl="" class="idlTypedef" data-title="PushMessageDataInit">

typedef<span class="idlType"> (<a data-link-type="typedef" href="https://webidl.spec.whatwg.org/#BufferSource">BufferSource</a> or <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString">USVString</a>)</span> <dfn data-export="" data-dfn-type="typedef" data-idl="typedef" data-title="PushMessageDataInit" data-dfn-for="" class="idlID"><code>PushMessageDataInit</code></dfn>;</span>

<span data-idl="" class="idlInterface" data-title="PushSubscriptionChangeEvent">[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=ServiceWorker</span>, <span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>]
interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-pushsubscriptionchangeevent" id="ref-for-dom-pushsubscriptionchangeevent-3"><code>PushSubscriptionChangeEvent</code></a> : <span class="idlSuperclass"><a data-link-type="interface" href="https://www.w3.org/TR/service-workers/#extendableevent">ExtendableEvent</a></span> {<span data-idl="" class="idlConstructor" data-title="constructor" data-dfn-for="PushSubscriptionChangeEvent">
  <dfn data-export="" data-dfn-type="constructor" data-idl="constructor" data-title="constructor" data-dfn-for="PushSubscriptionChangeEvent" data-lt="constructor()|constructor(type)|constructor(type, eventInitDict)" data-local-lt="PushSubscriptionChangeEvent.constructor|PushSubscriptionChangeEvent.constructor()|constructor"><code>constructor</code></dfn>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">type</span>, optional<span class="idlType"> <a data-link-type="idl" href="#dom-pushsubscriptionchangeeventinit" class="internalDFN" id="ref-for-dom-pushsubscriptionchangeeventinit-3"><code>PushSubscriptionChangeEventInit</code></a></span> <span class="idlParamName">eventInitDict</span> = {});</span><span data-idl="" class="idlAttribute" data-title="newSubscription" data-dfn-for="PushSubscriptionChangeEvent">
  readonly attribute<span class="idlType"> <a data-link-type="idl" href="#dom-pushsubscription" class="internalDFN" id="ref-for-dom-pushsubscription-30"><code>PushSubscription</code></a>?</span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-pushsubscriptionchangeevent-newsubscription" id="ref-for-dom-pushsubscriptionchangeevent-newsubscription-2"><code>newSubscription</code></a>;</span><span data-idl="" class="idlAttribute" data-title="oldSubscription" data-dfn-for="PushSubscriptionChangeEvent">
  readonly attribute<span class="idlType"> <a data-link-type="idl" href="#dom-pushsubscription" class="internalDFN" id="ref-for-dom-pushsubscription-31"><code>PushSubscription</code></a>?</span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-pushsubscriptionchangeevent-oldsubscription" id="ref-for-dom-pushsubscriptionchangeevent-oldsubscription-2"><code>oldSubscription</code></a>;</span>
};</span>

<span data-idl="" class="idlDictionary" data-title="PushSubscriptionChangeEventInit">dictionary <a class="internalDFN idlID" data-link-type="dictionary" href="#dom-pushsubscriptionchangeeventinit" id="ref-for-dom-pushsubscriptionchangeeventinit-4"><code>PushSubscriptionChangeEventInit</code></a> : <span class="idlSuperclass"><a data-link-type="dictionary" href="https://www.w3.org/TR/service-workers/#dictdef-extendableeventinit">ExtendableEventInit</a></span> {<span data-idl="" class="idlMember" data-title="newSubscription" data-dfn-for="PushSubscriptionChangeEventInit"><span class="idlType">
  <a data-link-type="idl" href="#dom-pushsubscription" class="internalDFN" id="ref-for-dom-pushsubscription-32"><code>PushSubscription</code></a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-pushsubscriptionchangeeventinit-newsubscription" id="ref-for-dom-pushsubscriptionchangeeventinit-newsubscription-2"><code>newSubscription</code></a> = null;</span><span data-idl="" class="idlMember" data-title="oldSubscription" data-dfn-for="PushSubscriptionChangeEventInit"><span class="idlType">
  <a data-link-type="idl" href="#dom-pushsubscription" class="internalDFN" id="ref-for-dom-pushsubscription-33"><code>PushSubscription</code></a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-pushsubscriptionchangeeventinit-oldsubscription" id="ref-for-dom-pushsubscriptionchangeeventinit-oldsubscription-2"><code>oldSubscription</code></a> = null;</span>
};</span></code></pre>
    </section>
    <section class="appendix" id="acknowledgements">
        <div class="header-wrapper">
            <h2 id="b-acknowledgements"><bdi class="secno">B. </bdi>
                致谢
            </h2><a class="self-link" href="#acknowledgements" aria-label="Permalink for Appendix B."></a>
        </div>

        <p>
            编辑们衷心感谢 Mozilla 和 Telefónica Digital 团队在实现 Firefox OS 推送消息解决方案方面的努力，以及为本文档提供重要技术建议的以下人员：Antonio Amaya、Miguel
            García Arribas、Ben Bangert、Kit Cambridge、José Manuel Cantera、JR Conlin、Albert Crespell、Matt Gaunt、Phil
            Jenvey、Guillermo López、Nikhil Marathe、John Mellor、Pınar Özlen、Fernando R. Sela、Shijun Sun 和 Doug Turner。
        </p>
    </section>


    <section id="references" class="appendix">
        <div class="header-wrapper">
            <h2 id="c-references"><bdi class="secno">C. </bdi>参考文献</h2><a class="self-link" href="#references"
                aria-label="Permalink for Appendix C."></a>
        </div>
        <section id="normative-references">
            <div class="header-wrapper">
                <h3 id="c-1-normative-references"><bdi class="secno">C.1 </bdi>规范性引用</h3><a class="self-link"
                    href="#normative-references" aria-label="Permalink for Appendix C.1"></a>
            </div>

            <dl class="bibliography">
                <dt id="bib-ansi-x9-62">[ANSI-X9-62]</dt>
                <dd>
                    <a
                        href="https://webstore.ansi.org/RecordDetail.aspx?sku=ANSI+X9.62%3a2005"><cite>金融服务业公钥密码学，椭圆曲线数字签名算法（ECDSA）</cite></a>。ANSI。2005。URL:
                    <a
                        href="https://webstore.ansi.org/RecordDetail.aspx?sku=ANSI+X9.62%3a2005">https://webstore.ansi.org/RecordDetail.aspx?sku=ANSI+X9.62%3a2005</a>
                </dd>
                <dt id="bib-dom">[dom]</dt>
                <dd>
                    <a href="https://dom.spec.whatwg.org/"><cite>DOM 标准</cite></a>。Anne van Kesteren。WHATWG。Living
                    Standard。URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
                </dd>
                <dt id="bib-dss">[DSS]</dt>
                <dd>
                    <a href="https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.186-5.pdf"><cite>FIPS PUB
                            186-5：数字签名标准（DSS）</cite></a>。美国商务部/国家标准与技术研究院。2023年2月3日。国家标准。URL: <a
                        href="https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.186-5.pdf">https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.186-5.pdf</a>
                </dd>
                <dt id="bib-ecmascript">[ecmascript]</dt>
                <dd>
                    <a href="https://tc39.es/ecma262/multipage/"><cite>ECMAScript 语言规范</cite></a>。Ecma
                    International。URL: <a
                        href="https://tc39.es/ecma262/multipage/">https://tc39.es/ecma262/multipage/</a>
                </dd>
                <dt id="bib-encoding">[encoding]</dt>
                <dd>
                    <a href="https://encoding.spec.whatwg.org/"><cite>编码标准</cite></a>。Anne van Kesteren。WHATWG。Living
                    Standard。URL: <a href="https://encoding.spec.whatwg.org/">https://encoding.spec.whatwg.org/</a>
                </dd>
                <dt id="bib-fileapi">[fileapi]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/FileAPI/"><cite>文件 API</cite></a>。Marijn
                    Kruisselbrink。W3C。2024年12月4日。W3C 工作草案。URL: <a
                        href="https://www.w3.org/TR/FileAPI/">https://www.w3.org/TR/FileAPI/</a>
                </dd>
                <dt id="bib-hr-time">[hr-time]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/hr-time-3/"><cite>高分辨率时间</cite></a>。Yoav Weiss。W3C。2024年11月7日。W3C
                    工作草案。URL: <a href="https://www.w3.org/TR/hr-time-3/">https://www.w3.org/TR/hr-time-3/</a>
                </dd>
                <dt id="bib-html">[html]</dt>
                <dd>
                    <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML 标准</cite></a>。Anne van Kesteren；Domenic
                    Denicola；Dominic Farolino；Ian Hickson；Philip Jägenstedt；Simon Pieters。WHATWG。Living Standard。URL: <a
                        href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
                </dd>
                <dt id="bib-infra">[infra]</dt>
                <dd>
                    <a href="https://infra.spec.whatwg.org/"><cite>Infra 标准</cite></a>。Anne van Kesteren；Domenic
                    Denicola。WHATWG。Living Standard。URL: <a
                        href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
                </dd>
                <dt id="bib-notifications">[NOTIFICATIONS]</dt>
                <dd>
                    <a href="https://notifications.spec.whatwg.org/"><cite>通知 API 标准</cite></a>。Anne van
                    Kesteren。WHATWG。Living Standard。URL: <a
                        href="https://notifications.spec.whatwg.org/">https://notifications.spec.whatwg.org/</a>
                </dd>
                <dt id="bib-permissions">[Permissions]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/permissions/"><cite>权限</cite></a>。Marcos Caceres；Mike
                    Taylor。W3C。2025年6月24日。W3C 工作草案。URL: <a
                        href="https://www.w3.org/TR/permissions/">https://www.w3.org/TR/permissions/</a>
                </dd>
                <dt id="bib-rfc2119">[RFC2119]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc2119"><cite>RFCs 中用于指示需求级别的关键词</cite></a>。S.
                    Bradner。IETF。1997年3月。最佳当前实践。URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc2119">https://www.rfc-editor.org/rfc/rfc2119</a>
                </dd>
                <dt id="bib-rfc4648">[RFC4648]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc4648"><cite>Base16、Base32 和 Base64 数据编码</cite></a>。S.
                    Josefsson。IETF。2006年10月。建议标准。URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc4648">https://www.rfc-editor.org/rfc/rfc4648</a>
                </dd>
                <dt id="bib-rfc7231">[RFC7231]</dt>
                <dd>
                    <a href="https://httpwg.org/specs/rfc7231.html"><cite>超文本传输协议 (HTTP/1.1)：语义与内容</cite></a>。R.
                    Fielding, Ed.；J. Reschke, Ed. IETF。2014年6月。建议标准。URL: <a
                        href="https://httpwg.org/specs/rfc7231.html">https://httpwg.org/specs/rfc7231.html</a>
                </dd>
                <dt id="bib-rfc7515">[RFC7515]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc7515"><cite>JSON Web Signature (JWS)</cite></a>。M.
                    Jones；J. Bradley；N. Sakimura。IETF。2015年5月。建议标准。URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc7515">https://www.rfc-editor.org/rfc/rfc7515</a>
                </dd>
                <dt id="bib-rfc8030">[RFC8030]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc8030"><cite>使用 HTTP Push 的通用事件投递</cite></a>。M. Thomson；E.
                    Damaggio；B. Raymor, Ed. IETF。2016年12月。建议标准。URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc8030">https://www.rfc-editor.org/rfc/rfc8030</a>
                </dd>
                <dt id="bib-rfc8174">[RFC8174]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc8174"><cite>RFC 2119 关键词大小写歧义</cite></a>。B.
                    Leiba。IETF。2017年5月。最佳当前实践。URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc8174">https://www.rfc-editor.org/rfc/rfc8174</a>
                </dd>
                <dt id="bib-rfc8291">[RFC8291]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc8291"><cite>Web 推送消息加密</cite></a>。M.
                    Thomson。IETF。2017年11月。建议标准。URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc8291">https://www.rfc-editor.org/rfc/rfc8291</a>
                </dd>
                <dt id="bib-rfc8292">[RFC8292]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc8292"><cite>Web 推送自愿应用服务器标识（VAPID）</cite></a>。M.
                    Thomson；P. Beverloo。IETF。2017年11月。建议标准。URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc8292">https://www.rfc-editor.org/rfc/rfc8292</a>
                </dd>
                <dt id="bib-service-workers">[SERVICE-WORKERS]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/service-workers/"><cite>Service Workers</cite></a>。Yoshisato
                    Yanagisawa；Monica CHINTALA。W3C。2025年3月6日。CRD。URL: <a
                        href="https://www.w3.org/TR/service-workers/">https://www.w3.org/TR/service-workers/</a>
                </dd>
                <dt id="bib-url">[url]</dt>
                <dd>
                    <a href="https://url.spec.whatwg.org/"><cite>URL 标准</cite></a>。Anne van Kesteren。WHATWG。Living
                    Standard。URL: <a href="https://url.spec.whatwg.org/">https://url.spec.whatwg.org/</a>
                </dd>
                <dt id="bib-webidl">[WEBIDL]</dt>
                <dd>
                    <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL 标准</cite></a>。Edgar Chen；Timothy
                    Gu。WHATWG。Living Standard。URL: <a
                        href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
                </dd>
            </dl>
        </section>
        <section id="informative-references">
            <div class="header-wrapper">
                <h3 id="c-2-informative-references"><bdi class="secno">C.2 </bdi>参考性引用</h3><a class="self-link"
                    href="#informative-references" aria-label="Permalink for Appendix C.2"></a>
            </div>

            <dl class="bibliography">
                <dt id="bib-fetch">[Fetch]</dt>
                <dd>
                    <a href="https://fetch.spec.whatwg.org/"><cite>Fetch 标准</cite></a>。Anne van Kesteren。WHATWG。Living
                    Standard。URL: <a href="https://fetch.spec.whatwg.org/">https://fetch.spec.whatwg.org/</a>
                </dd>
                <dt id="bib-web-background-sync">[WEB-BACKGROUND-SYNC]</dt>
                <dd>
                    <a href="https://wicg.github.io/background-sync/spec/"><cite>Web 后台同步</cite></a>。W3C。社区组报告草案。URL: <a
                        href="https://wicg.github.io/background-sync/spec/">https://wicg.github.io/background-sync/spec/</a>
                </dd>
                <dt id="bib-websockets">[WebSockets]</dt>
                <dd>
                    <a href="https://websockets.spec.whatwg.org/"><cite>WebSockets 标准</cite></a>。Adam Rice。WHATWG。Living
                    Standard。URL: <a href="https://websockets.spec.whatwg.org/">https://websockets.spec.whatwg.org/</a>
                </dd>
            </dl>
        </section>
    </section>
    <p role="navigation" id="back-to-top">
        <a href="#title"><abbr title="返回顶部">↑</abbr></a>
    </p>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-web-push-protocol"
        aria-label="Links in this document to definition: web push protocol">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-web-push-protocol"
                aria-label="Permalink for definition: web push protocol. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-web-push-protocol-1" title="§ Abstract">§ Abstract</a>
            </li>
            <li>
                <a href="#ref-for-dfn-web-push-protocol-2" title="§ 5.3 Push service use">§ 5.3 Push service use</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-content-encoding"
        aria-label="Links in this document to definition: Content-Encoding">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-content-encoding"
                aria-label="Permalink for definition: Content-Encoding. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-content-encoding-1" title="§ 7. PushManager interface">§ 7. PushManager
                    interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-application-server"
        aria-label="Links in this document to definition: application server">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-application-server"
                aria-label="Permalink for definition: application server. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-application-server-1" title="§ Abstract">§ Abstract</a> <a
                    href="#ref-for-dfn-application-server-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-application-server-3" title="§ 1. Introduction">§ 1. Introduction</a> <a
                    href="#ref-for-dfn-application-server-4" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-application-server-5" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-application-server-6" title="§ 2. Dependencies">§ 2. Dependencies</a>
            </li>
            <li>
                <a href="#ref-for-dfn-application-server-7" title="§ 3.2 Push message">§ 3.2 Push message</a>
            </li>
            <li>
                <a href="#ref-for-dfn-application-server-8" title="§ 3.3 Declarative push message">§ 3.3 Declarative
                    push message</a>
            </li>
            <li>
                <a href="#ref-for-dfn-application-server-9" title="§ 3.4 Push subscription">§ 3.4 Push subscription</a>
            </li>
            <li>
                <a href="#ref-for-dfn-application-server-10" title="§ 3.4.1 Subscription Refreshes">§ 3.4.1 Subscription
                    Refreshes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-application-server-11" title="§ 3.5 Push service">§ 3.5 Push service</a>
            </li>
            <li>
                <a href="#ref-for-dfn-application-server-12" title="§ 4. Security and privacy considerations">§ 4.
                    Security and privacy considerations</a> <a href="#ref-for-dfn-application-server-13"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-application-server-14" title="Reference 3">(3)</a>
                <a href="#ref-for-dfn-application-server-15" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-application-server-16" title="§ 5. Push Framework">§ 5. Push Framework</a> <a
                    href="#ref-for-dfn-application-server-17" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-application-server-18" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-application-server-19" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-application-server-20" title="§ 5.3 Push service use">§ 5.3 Push service use</a>
                <a href="#ref-for-dfn-application-server-21" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-application-server-22" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-application-server-23" title="§ 7.3 PushSubscriptionOptionsInit dictionary">§ 7.3
                    PushSubscriptionOptionsInit dictionary</a> <a href="#ref-for-dfn-application-server-24"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-application-server-25" title="§ 8. PushSubscription interface">§ 8.
                    PushSubscription interface</a>
            </li>
            <li>
                <a href="#ref-for-dfn-application-server-26" title="§ 10.3 Receiving a Push Message">§ 10.3 Receiving a
                    Push Message</a> <a href="#ref-for-dfn-application-server-27" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-application-server-28" title="§ 10.4 The pushsubscriptionchange Event">§ 10.4 The
                    pushsubscriptionchange Event</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-push-message"
        aria-label="Links in this document to definition: push message">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-push-message"
                aria-label="Permalink for definition: push message. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-push-message-1" title="§ Abstract">§ Abstract</a> <a
                    href="#ref-for-dfn-push-message-2" title="Reference 2">(2)</a> <a href="#ref-for-dfn-push-message-3"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-message-4" title="§ 1. Introduction">§ 1. Introduction</a> <a
                    href="#ref-for-dfn-push-message-5" title="Reference 2">(2)</a> <a href="#ref-for-dfn-push-message-6"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-push-message-7" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-push-message-8" title="Reference 5">(5)</a> <a href="#ref-for-dfn-push-message-9"
                    title="Reference 6">(6)</a> <a href="#ref-for-dfn-push-message-10" title="Reference 7">(7)</a> <a
                    href="#ref-for-dfn-push-message-11" title="Reference 8">(8)</a> <a
                    href="#ref-for-dfn-push-message-12" title="Reference 9">(9)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-message-13" title="§ 2. Dependencies">§ 2. Dependencies</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-message-14" title="§ 3.2 Push message">§ 3.2 Push message</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-message-15" title="§ 3.3 Declarative push message">§ 3.3 Declarative push
                    message</a> <a href="#ref-for-dfn-push-message-16" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-push-message-17" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-message-18" title="§ 3.4 Push subscription">§ 3.4 Push subscription</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-message-19" title="§ 3.4.2 Subscription Deactivation">§ 3.4.2 Subscription
                    Deactivation</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-message-20" title="§ 3.5 Push service">§ 3.5 Push service</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-message-21" title="§ 4. Security and privacy considerations">§ 4. Security
                    and privacy considerations</a> <a href="#ref-for-dfn-push-message-22" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-push-message-23" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-message-24" title="§ 5. Push Framework">§ 5. Push Framework</a> <a
                    href="#ref-for-dfn-push-message-25" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-push-message-26" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-push-message-27" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-message-28" title="§ 5.3 Push service use">§ 5.3 Push service use</a> <a
                    href="#ref-for-dfn-push-message-29" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-push-message-30" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-message-31" title="§ 7. PushManager interface">§ 7. PushManager interface</a>
                <a href="#ref-for-dfn-push-message-32" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-message-33" title="§ 7.3 PushSubscriptionOptionsInit dictionary">§ 7.3
                    PushSubscriptionOptionsInit dictionary</a> <a href="#ref-for-dfn-push-message-34"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-push-message-35" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-push-message-36" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-message-37" title="§ 8. PushSubscription interface">§ 8. PushSubscription
                    interface</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-message-38" title="§ 8.1 PushEncryptionKeyName enumeration">§ 8.1
                    PushEncryptionKeyName enumeration</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-message-39"
                    title="§ 10.1 Extensions to the ServiceWorkerGlobalScope interface">§ 10.1 Extensions to the
                    ServiceWorkerGlobalScope interface</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-message-40" title="§ 10.3 Receiving a Push Message">§ 10.3 Receiving a Push
                    Message</a> <a href="#ref-for-dfn-push-message-41" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-push-message-42" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-push-message-43" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-push-message-44" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-push-message-45" title="Reference 6">(6)</a> <a
                    href="#ref-for-dfn-push-message-46" title="Reference 7">(7)</a> <a
                    href="#ref-for-dfn-push-message-47" title="Reference 8">(8)</a> <a
                    href="#ref-for-dfn-push-message-48" title="Reference 9">(9)</a> <a
                    href="#ref-for-dfn-push-message-49" title="Reference 10">(10)</a> <a
                    href="#ref-for-dfn-push-message-50" title="Reference 11">(11)</a> <a
                    href="#ref-for-dfn-push-message-51" title="Reference 12">(12)</a> <a
                    href="#ref-for-dfn-push-message-52" title="Reference 13">(13)</a> <a
                    href="#ref-for-dfn-push-message-53" title="Reference 14">(14)</a> <a
                    href="#ref-for-dfn-push-message-54" title="Reference 15">(15)</a> <a
                    href="#ref-for-dfn-push-message-55" title="Reference 16">(16)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-declarative-push-message"
        aria-label="Links in this document to definition: declarative push message">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-declarative-push-message"
                aria-label="Permalink for definition: declarative push message. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-declarative-push-message-1" title="§ 3.3 Declarative push message">§ 3.3
                    Declarative push message</a> <a href="#ref-for-dfn-declarative-push-message-2"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-declarative-push-message-3" title="§ 3.3.1 Members">§ 3.3.1 Members</a> <a
                    href="#ref-for-dfn-declarative-push-message-4" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-declarative-push-message-5" title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-declarative-push-message-parser-result"
        aria-label="Links in this document to definition: declarative push message parser result">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-declarative-push-message-parser-result"
                aria-label="Permalink for definition: declarative push message parser result. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-declarative-push-message-parser-result-1" title="§ 3.3.2 Parser">§ 3.3.2
                    Parser</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-notification"
        aria-label="Links in this document to definition: notification">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-notification"
                aria-label="Permalink for definition: notification. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-notification-1" title="§ 10.3 Receiving a Push Message">§ 10.3 Receiving a Push
                    Message</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-mutable"
        aria-label="Links in this document to definition: mutable">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-mutable"
                aria-label="Permalink for definition: mutable. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-mutable-1" title="§ 10.3 Receiving a Push Message">§ 10.3 Receiving a Push
                    Message</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-declarative-push-message-parser"
        aria-label="Links in this document to definition: declarative push message parser">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-declarative-push-message-parser"
                aria-label="Permalink for definition: declarative push message parser. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-declarative-push-message-parser-1" title="§ 3.3 Declarative push message">§ 3.3
                    Declarative push message</a>
            </li>
            <li>
                <a href="#ref-for-dfn-declarative-push-message-parser-2" title="§ 10.3 Receiving a Push Message">§ 10.3
                    Receiving a Push Message</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-push-subscription"
        aria-label="Links in this document to definition: push subscription">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-push-subscription"
                aria-label="Permalink for definition: push subscription. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-push-subscription-1" title="§ 3.2 Push message">§ 3.2 Push message</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-subscription-2" title="§ 3.4 Push subscription">§ 3.4 Push subscription</a>
                <a href="#ref-for-dfn-push-subscription-3" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-push-subscription-4" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-push-subscription-5" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-push-subscription-6" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-push-subscription-7" title="Reference 6">(6)</a> <a
                    href="#ref-for-dfn-push-subscription-8" title="Reference 7">(7)</a> <a
                    href="#ref-for-dfn-push-subscription-9" title="Reference 8">(8)</a> <a
                    href="#ref-for-dfn-push-subscription-10" title="Reference 9">(9)</a> <a
                    href="#ref-for-dfn-push-subscription-11" title="Reference 10">(10)</a> <a
                    href="#ref-for-dfn-push-subscription-12" title="Reference 11">(11)</a> <a
                    href="#ref-for-dfn-push-subscription-13" title="Reference 12">(12)</a> <a
                    href="#ref-for-dfn-push-subscription-14" title="Reference 13">(13)</a> <a
                    href="#ref-for-dfn-push-subscription-15" title="Reference 14">(14)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-subscription-16" title="§ 3.4.1 Subscription Refreshes">§ 3.4.1 Subscription
                    Refreshes</a> <a href="#ref-for-dfn-push-subscription-17" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-push-subscription-18" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-push-subscription-19" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-push-subscription-20" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-push-subscription-21" title="Reference 6">(6)</a> <a
                    href="#ref-for-dfn-push-subscription-22" title="Reference 7">(7)</a> <a
                    href="#ref-for-dfn-push-subscription-23" title="Reference 8">(8)</a> <a
                    href="#ref-for-dfn-push-subscription-24" title="Reference 9">(9)</a> <a
                    href="#ref-for-dfn-push-subscription-25" title="Reference 10">(10)</a> <a
                    href="#ref-for-dfn-push-subscription-26" title="Reference 11">(11)</a> <a
                    href="#ref-for-dfn-push-subscription-27" title="Reference 12">(12)</a> <a
                    href="#ref-for-dfn-push-subscription-28" title="Reference 13">(13)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-subscription-29" title="§ 3.4.2 Subscription Deactivation">§ 3.4.2
                    Subscription Deactivation</a> <a href="#ref-for-dfn-push-subscription-30"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-push-subscription-31" title="Reference 3">(3)</a>
                <a href="#ref-for-dfn-push-subscription-32" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-push-subscription-33" title="Reference 5">(5)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-subscription-34" title="§ 3.5 Push service">§ 3.5 Push service</a> <a
                    href="#ref-for-dfn-push-subscription-35" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-subscription-36" title="§ 4. Security and privacy considerations">§ 4.
                    Security and privacy considerations</a> <a href="#ref-for-dfn-push-subscription-37"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-push-subscription-38" title="Reference 3">(3)</a>
                <a href="#ref-for-dfn-push-subscription-39" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-push-subscription-40" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-push-subscription-41" title="Reference 6">(6)</a> <a
                    href="#ref-for-dfn-push-subscription-42" title="Reference 7">(7)</a> <a
                    href="#ref-for-dfn-push-subscription-43" title="Reference 8">(8)</a> <a
                    href="#ref-for-dfn-push-subscription-44" title="Reference 9">(9)</a> <a
                    href="#ref-for-dfn-push-subscription-45" title="Reference 10">(10)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-subscription-46" title="§ 5. Push Framework">§ 5. Push Framework</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-subscription-47" title="§ 5.3 Push service use">§ 5.3 Push service use</a> <a
                    href="#ref-for-dfn-push-subscription-48" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-subscription-49" title="§ 7.1 subscribe() method">§ 7.1 subscribe()
                    method</a> <a href="#ref-for-dfn-push-subscription-50" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-push-subscription-51" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-push-subscription-52" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-subscription-53" title="§ 7.3 PushSubscriptionOptionsInit dictionary">§ 7.3
                    PushSubscriptionOptionsInit dictionary</a> <a href="#ref-for-dfn-push-subscription-54"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-push-subscription-55" title="Reference 3">(3)</a>
                <a href="#ref-for-dfn-push-subscription-56" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-push-subscription-57" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-push-subscription-58" title="Reference 6">(6)</a> <a
                    href="#ref-for-dfn-push-subscription-59" title="Reference 7">(7)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-subscription-60" title="§ 8. PushSubscription interface">§ 8.
                    PushSubscription interface</a> <a href="#ref-for-dfn-push-subscription-61"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-push-subscription-62" title="Reference 3">(3)</a>
                <a href="#ref-for-dfn-push-subscription-63" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-push-subscription-64" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-push-subscription-65" title="Reference 6">(6)</a> <a
                    href="#ref-for-dfn-push-subscription-66" title="Reference 7">(7)</a> <a
                    href="#ref-for-dfn-push-subscription-67" title="Reference 8">(8)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-subscription-68"
                    title="§ 10.1 Extensions to the ServiceWorkerGlobalScope interface">§ 10.1 Extensions to the
                    ServiceWorkerGlobalScope interface</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-subscription-69" title="§ 10.3 Receiving a Push Message">§ 10.3 Receiving a
                    Push Message</a> <a href="#ref-for-dfn-push-subscription-70" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-subscription-71" title="§ 10.4 The pushsubscriptionchange Event">§ 10.4 The
                    pushsubscriptionchange Event</a> <a href="#ref-for-dfn-push-subscription-72"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-subscription-73" title="§ 10.4.2 PushSubscriptionChangeEventInit Interface">§
                    10.4.2 PushSubscriptionChangeEventInit Interface</a> <a href="#ref-for-dfn-push-subscription-74"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-push-subscription-75" title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-push-endpoint"
        aria-label="Links in this document to definition: push endpoint">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-push-endpoint"
                aria-label="Permalink for definition: push endpoint. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-push-endpoint-1" title="§ 3.4 Push subscription">§ 3.4 Push subscription</a> <a
                    href="#ref-for-dfn-push-endpoint-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-endpoint-3" title="§ 3.5 Push service">§ 3.5 Push service</a> <a
                    href="#ref-for-dfn-push-endpoint-4" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-endpoint-5" title="§ 4. Security and privacy considerations">§ 4. Security
                    and privacy considerations</a> <a href="#ref-for-dfn-push-endpoint-6" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-endpoint-7" title="§ 5. Push Framework">§ 5. Push Framework</a> <a
                    href="#ref-for-dfn-push-endpoint-8" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-endpoint-9" title="§ 5.3 Push service use">§ 5.3 Push service use</a> <a
                    href="#ref-for-dfn-push-endpoint-10" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-endpoint-11" title="§ 8. PushSubscription interface">§ 8. PushSubscription
                    interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-subscription-expiration-time"
        aria-label="Links in this document to definition: subscription expiration time">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-subscription-expiration-time"
                aria-label="Permalink for definition: subscription expiration time. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-subscription-expiration-time-1" title="§ 8. PushSubscription interface">§ 8.
                    PushSubscription interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-create-a-push-subscription"
        aria-label="Links in this document to definition: create a push subscription">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-create-a-push-subscription"
                aria-label="Permalink for definition: create a push subscription. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-create-a-push-subscription-1" title="§ 3.4.1 Subscription Refreshes">§ 3.4.1
                    Subscription Refreshes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-create-a-push-subscription-2" title="§ 7.1 subscribe() method">§ 7.1 subscribe()
                    method</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-refresh"
        aria-label="Links in this document to definition: refresh">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-refresh"
                aria-label="Permalink for definition: refresh. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-refresh-1" title="§ 3.4 Push subscription">§ 3.4 Push subscription</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-deactivate"
        aria-label="Links in this document to definition: deactivated">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-deactivate"
                aria-label="Permalink for definition: deactivated. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-deactivate-1" title="§ 3.4 Push subscription">§ 3.4 Push subscription</a>
            </li>
            <li>
                <a href="#ref-for-dfn-deactivate-2" title="§ 3.4.1 Subscription Refreshes">§ 3.4.1 Subscription
                    Refreshes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-deactivate-3" title="§ 3.4.2 Subscription Deactivation">§ 3.4.2 Subscription
                    Deactivation</a> <a href="#ref-for-dfn-deactivate-4" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-deactivate-5" title="§ 4. Security and privacy considerations">§ 4. Security and
                    privacy considerations</a> <a href="#ref-for-dfn-deactivate-6" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-deactivate-7" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-deactivate-8" title="§ 8. PushSubscription interface">§ 8. PushSubscription
                    interface</a> <a href="#ref-for-dfn-deactivate-9" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-deactivate-10" title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-push-service"
        aria-label="Links in this document to definition: push service">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-push-service"
                aria-label="Permalink for definition: push service. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-push-service-1" title="§ Abstract">§ Abstract</a> <a
                    href="#ref-for-dfn-push-service-2" title="Reference 2">(2)</a> <a href="#ref-for-dfn-push-service-3"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-service-4" title="§ 1. Introduction">§ 1. Introduction</a> <a
                    href="#ref-for-dfn-push-service-5" title="Reference 2">(2)</a> <a href="#ref-for-dfn-push-service-6"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-push-service-7" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-service-8" title="§ 2. Dependencies">§ 2. Dependencies</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-service-9" title="§ 3.4 Push subscription">§ 3.4 Push subscription</a> <a
                    href="#ref-for-dfn-push-service-10" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-service-11" title="§ 3.4.1 Subscription Refreshes">§ 3.4.1 Subscription
                    Refreshes</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-service-12" title="§ 3.4.2 Subscription Deactivation">§ 3.4.2 Subscription
                    Deactivation</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-service-13" title="§ 3.5 Push service">§ 3.5 Push service</a> <a
                    href="#ref-for-dfn-push-service-14" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-push-service-15" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-service-16" title="§ 4. Security and privacy considerations">§ 4. Security
                    and privacy considerations</a> <a href="#ref-for-dfn-push-service-17" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-push-service-18" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-service-19" title="§ 5. Push Framework">§ 5. Push Framework</a> <a
                    href="#ref-for-dfn-push-service-20" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-service-21" title="§ 7. PushManager interface">§ 7. PushManager interface</a>
                <a href="#ref-for-dfn-push-service-22" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-service-23" title="§ 7.1 subscribe() method">§ 7.1 subscribe() method</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-service-24" title="§ 7.2 PushSubscriptionOptions Interface">§ 7.2
                    PushSubscriptionOptions Interface</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-service-25" title="§ 7.3 PushSubscriptionOptionsInit dictionary">§ 7.3
                    PushSubscriptionOptionsInit dictionary</a> <a href="#ref-for-dfn-push-service-26"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-service-27" title="§ 8. PushSubscription interface">§ 8. PushSubscription
                    interface</a> <a href="#ref-for-dfn-push-service-28" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-service-29" title="§ 10.3 Receiving a Push Message">§ 10.3 Receiving a Push
                    Message</a> <a href="#ref-for-dfn-push-service-30" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-push-service-31" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-push-service-32" title="§ 11. Accessibility">§ 11. Accessibility</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-push"
        aria-label="Links in this document to definition: &quot;push&quot;">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-push"
                aria-label="Permalink for definition: &quot;push&quot;. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pushpermissiondescriptor"
        aria-label="Links in this document to definition: PushPermissionDescriptor">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushpermissiondescriptor"
                aria-label="Permalink for definition: PushPermissionDescriptor. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushpermissiondescriptor-1" title="§ 3.6 Permission">§ 3.6 Permission</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-pushpermissiondescriptor-uservisibleonly"
        aria-label="Links in this document to definition: userVisibleOnly">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushpermissiondescriptor-uservisibleonly"
                aria-label="Permalink for definition: userVisibleOnly. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1117437819">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushpermissiondescriptor-uservisibleonly-1" title="§ 3.6 Permission">§ 3.6
                    Permission</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushpermissiondescriptor-uservisibleonly-2" title="§ A. IDL Index">§ A. IDL
                    Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-ecdh"
        aria-label="Links in this document to definition: elliptic curve Diffie-Hellman">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-ecdh"
                aria-label="Permalink for definition: elliptic curve Diffie-Hellman. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-ecdh-1" title="§ 3.4 Push subscription">§ 3.4 Push subscription</a> <a
                    href="#ref-for-dfn-ecdh-2" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-serviceworkerregistration-pushmanager"
        aria-label="Links in this document to definition: pushManager">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-serviceworkerregistration-pushmanager"
                aria-label="Permalink for definition: pushManager. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-27231878">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-serviceworkerregistration-pushmanager-1"
                    title="§ 6. Extensions to the ServiceWorkerRegistration Interface">§ 6. Extensions to the
                    ServiceWorkerRegistration Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-serviceworkerregistration-pushmanager-2" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pushmanager"
        aria-label="Links in this document to definition: PushManager">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushmanager"
                aria-label="Permalink for definition: PushManager. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1816674501">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushmanager-1"
                    title="§ 6. Extensions to the ServiceWorkerRegistration Interface">§ 6. Extensions to the
                    ServiceWorkerRegistration Interface</a> <a href="#ref-for-dom-pushmanager-2"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushmanager-3" title="§ 7. PushManager interface">§ 7. PushManager interface</a>
                <a href="#ref-for-dom-pushmanager-4" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushmanager-5" title="§ A. IDL Index">§ A. IDL Index</a> <a
                    href="#ref-for-dom-pushmanager-6" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-pushmanager-supportedcontentencodings"
        aria-label="Links in this document to definition: supportedContentEncodings">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushmanager-supportedcontentencodings"
                aria-label="Permalink for definition: supportedContentEncodings. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1816674501">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushmanager-supportedcontentencodings-1" title="§ 7. PushManager interface">§ 7.
                    PushManager interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushmanager-supportedcontentencodings-2" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pushmanager-subscribe"
        aria-label="Links in this document to definition: subscribe()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushmanager-subscribe"
                aria-label="Permalink for definition: subscribe(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1816674501">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushmanager-subscribe-1" title="§ 7. PushManager interface">§ 7. PushManager
                    interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushmanager-subscribe-2" title="§ 7.1 subscribe() method">§ 7.1 subscribe()
                    method</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushmanager-subscribe-3" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pushmanager-getsubscription"
        aria-label="Links in this document to definition: getSubscription">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushmanager-getsubscription"
                aria-label="Permalink for definition: getSubscription. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1816674501">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushmanager-getsubscription-1" title="§ 7. PushManager interface">§ 7. PushManager
                    interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushmanager-getsubscription-2" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pushmanager-permissionstate"
        aria-label="Links in this document to definition: permissionState()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushmanager-permissionstate"
                aria-label="Permalink for definition: permissionState(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1816674501">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushmanager-permissionstate-1" title="§ 7. PushManager interface">§ 7. PushManager
                    interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushmanager-permissionstate-2" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pushsubscriptionoptions"
        aria-label="Links in this document to definition: PushSubscriptionOptions">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushsubscriptionoptions"
                aria-label="Permalink for definition: PushSubscriptionOptions. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1484551711">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushsubscriptionoptions-1" title="§ 3.4 Push subscription">§ 3.4 Push
                    subscription</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscriptionoptions-2" title="§ 3.4.1 Subscription Refreshes">§ 3.4.1
                    Subscription Refreshes</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscriptionoptions-3" title="§ 4. Security and privacy considerations">§ 4.
                    Security and privacy considerations</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscriptionoptions-4" title="§ 7.2 PushSubscriptionOptions Interface">§ 7.2
                    PushSubscriptionOptions Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscriptionoptions-5" title="§ 8. PushSubscription interface">§ 8.
                    PushSubscription interface</a> <a href="#ref-for-dom-pushsubscriptionoptions-6"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscriptionoptions-7" title="§ A. IDL Index">§ A. IDL Index</a> <a
                    href="#ref-for-dom-pushsubscriptionoptions-8" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-pushsubscriptionoptions-uservisibleonly"
        aria-label="Links in this document to definition: userVisibleOnly">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushsubscriptionoptions-uservisibleonly"
                aria-label="Permalink for definition: userVisibleOnly. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1484551711">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushsubscriptionoptions-uservisibleonly-1"
                    title="§ 7.2 PushSubscriptionOptions Interface">§ 7.2 PushSubscriptionOptions Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscriptionoptions-uservisibleonly-2" title="§ A. IDL Index">§ A. IDL
                    Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-pushsubscriptionoptions-applicationserverkey"
        aria-label="Links in this document to definition: applicationServerKey">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushsubscriptionoptions-applicationserverkey"
                aria-label="Permalink for definition: applicationServerKey. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1484551711">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushsubscriptionoptions-applicationserverkey-1" title="§ 3.4 Push subscription">§
                    3.4 Push subscription</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscriptionoptions-applicationserverkey-2" title="§ 7.1 subscribe() method">§
                    7.1 subscribe() method</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscriptionoptions-applicationserverkey-3"
                    title="§ 7.2 PushSubscriptionOptions Interface">§ 7.2 PushSubscriptionOptions Interface</a> <a
                    href="#ref-for-dom-pushsubscriptionoptions-applicationserverkey-4" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-pushsubscriptionoptions-applicationserverkey-5" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-pushsubscriptionoptions-applicationserverkey-6" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscriptionoptions-applicationserverkey-7"
                    title="§ 7.3 PushSubscriptionOptionsInit dictionary">§ 7.3 PushSubscriptionOptionsInit
                    dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscriptionoptions-applicationserverkey-8" title="§ A. IDL Index">§ A. IDL
                    Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pushsubscriptionoptionsinit"
        aria-label="Links in this document to definition: PushSubscriptionOptionsInit">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushsubscriptionoptionsinit"
                aria-label="Permalink for definition: PushSubscriptionOptionsInit. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-975599346">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushsubscriptionoptionsinit-1" title="§ 3.4 Push subscription">§ 3.4 Push
                    subscription</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscriptionoptionsinit-2" title="§ 7. PushManager interface">§ 7. PushManager
                    interface</a> <a href="#ref-for-dom-pushsubscriptionoptionsinit-3" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscriptionoptionsinit-4"
                    title="§ 7.3 PushSubscriptionOptionsInit dictionary">§ 7.3 PushSubscriptionOptionsInit
                    dictionary</a> <a href="#ref-for-dom-pushsubscriptionoptionsinit-5" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscriptionoptionsinit-6" title="§ A. IDL Index">§ A. IDL Index</a> <a
                    href="#ref-for-dom-pushsubscriptionoptionsinit-7" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-pushsubscriptionoptionsinit-8" title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-pushsubscriptionoptionsinit-uservisibleonly"
        aria-label="Links in this document to definition: userVisibleOnly">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushsubscriptionoptionsinit-uservisibleonly"
                aria-label="Permalink for definition: userVisibleOnly. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-975599346">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushsubscriptionoptionsinit-uservisibleonly-1" title="§ 3.6 Permission">§ 3.6
                    Permission</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscriptionoptionsinit-uservisibleonly-2" title="§ 7.1 subscribe() method">§
                    7.1 subscribe() method</a> <a href="#ref-for-dom-pushsubscriptionoptionsinit-uservisibleonly-3"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscriptionoptionsinit-uservisibleonly-4"
                    title="§ 7.3 PushSubscriptionOptionsInit dictionary">§ 7.3 PushSubscriptionOptionsInit
                    dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscriptionoptionsinit-uservisibleonly-5" title="§ A. IDL Index">§ A. IDL
                    Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-pushsubscriptionoptionsinit-applicationserverkey"
        aria-label="Links in this document to definition: applicationServerKey">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushsubscriptionoptionsinit-applicationserverkey"
                aria-label="Permalink for definition: applicationServerKey. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-975599346">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushsubscriptionoptionsinit-applicationserverkey-1"
                    title="§ 7.1 subscribe() method">§ 7.1 subscribe() method</a> <a
                    href="#ref-for-dom-pushsubscriptionoptionsinit-applicationserverkey-2" title="Reference 2">(2)</a>
                <a href="#ref-for-dom-pushsubscriptionoptionsinit-applicationserverkey-3" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-pushsubscriptionoptionsinit-applicationserverkey-4" title="Reference 4">(4)</a>
                <a href="#ref-for-dom-pushsubscriptionoptionsinit-applicationserverkey-5" title="Reference 5">(5)</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscriptionoptionsinit-applicationserverkey-6"
                    title="§ 7.3 PushSubscriptionOptionsInit dictionary">§ 7.3 PushSubscriptionOptionsInit
                    dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscriptionoptionsinit-applicationserverkey-7" title="§ A. IDL Index">§ A.
                    IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pushsubscription"
        aria-label="Links in this document to definition: PushSubscription">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushsubscription"
                aria-label="Permalink for definition: PushSubscription. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1348261679">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushsubscription-1" title="§ 3.4 Push subscription">§ 3.4 Push subscription</a> <a
                    href="#ref-for-dom-pushsubscription-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-pushsubscription-3" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-pushsubscription-4" title="Reference 4">(4)</a> <a
                    href="#ref-for-dom-pushsubscription-5" title="Reference 5">(5)</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscription-6" title="§ 3.4.1 Subscription Refreshes">§ 3.4.1 Subscription
                    Refreshes</a> <a href="#ref-for-dom-pushsubscription-7" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-pushsubscription-8" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscription-9" title="§ 4. Security and privacy considerations">§ 4. Security
                    and privacy considerations</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscription-10" title="§ 5.3 Push service use">§ 5.3 Push service use</a> <a
                    href="#ref-for-dom-pushsubscription-11" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-pushsubscription-12" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscription-13" title="§ 7. PushManager interface">§ 7. PushManager
                    interface</a> <a href="#ref-for-dom-pushsubscription-14" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscription-15" title="§ 7.1 subscribe() method">§ 7.1 subscribe() method</a>
                <a href="#ref-for-dom-pushsubscription-16" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscription-17" title="§ 8. PushSubscription interface">§ 8. PushSubscription
                    interface</a> <a href="#ref-for-dom-pushsubscription-18" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-pushsubscription-19" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-pushsubscription-20" title="Reference 4">(4)</a> <a
                    href="#ref-for-dom-pushsubscription-21" title="Reference 5">(5)</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscription-22" title="§ 8.1 PushEncryptionKeyName enumeration">§ 8.1
                    PushEncryptionKeyName enumeration</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscription-23" title="§ 10.4.1 PushSubscriptionChangeEvent Interface">§
                    10.4.1 PushSubscriptionChangeEvent Interface</a> <a href="#ref-for-dom-pushsubscription-24"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscription-25" title="§ 10.4.2 PushSubscriptionChangeEventInit Interface">§
                    10.4.2 PushSubscriptionChangeEventInit Interface</a> <a href="#ref-for-dom-pushsubscription-26"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscription-27" title="§ A. IDL Index">§ A. IDL Index</a> <a
                    href="#ref-for-dom-pushsubscription-28" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-pushsubscription-29" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-pushsubscription-30" title="Reference 4">(4)</a> <a
                    href="#ref-for-dom-pushsubscription-31" title="Reference 5">(5)</a> <a
                    href="#ref-for-dom-pushsubscription-32" title="Reference 6">(6)</a> <a
                    href="#ref-for-dom-pushsubscription-33" title="Reference 7">(7)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pushsubscription-endpoint"
        aria-label="Links in this document to definition: endpoint">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushsubscription-endpoint"
                aria-label="Permalink for definition: endpoint. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushsubscription-endpoint-1" title="§ 3.4 Push subscription">§ 3.4 Push
                    subscription</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-pushsubscription-expirationtime"
        aria-label="Links in this document to definition: expirationTime">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushsubscription-expirationtime"
                aria-label="Permalink for definition: expirationTime. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushsubscription-expirationtime-1" title="§ 3.4 Push subscription">§ 3.4 Push
                    subscription</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-pushsubscriptionjson-endpoint"
        aria-label="Links in this document to definition: endpoint">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushsubscriptionjson-endpoint"
                aria-label="Permalink for definition: endpoint. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-pushsubscriptionjson-expirationtime"
        aria-label="Links in this document to definition: expirationTime">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushsubscriptionjson-expirationtime"
                aria-label="Permalink for definition: expirationTime. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-getting-the-endpoint-attribute"
        aria-label="Links in this document to definition: getting the endpoint attribute">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-getting-the-endpoint-attribute"
                aria-label="Permalink for definition: getting the endpoint attribute. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-getting-the-endpoint-attribute-1" title="§ 8. PushSubscription interface">§ 8.
                    PushSubscription interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-getting-the-expirationtime-attribute"
        aria-label="Links in this document to definition: getting the expirationTime attribute">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-getting-the-expirationtime-attribute"
                aria-label="Permalink for definition: getting the expirationTime attribute. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-getting-the-expirationtime-attribute-1" title="§ 8. PushSubscription interface">§
                    8. PushSubscription interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pushsubscription-options"
        aria-label="Links in this document to definition: options">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushsubscription-options"
                aria-label="Permalink for definition: options. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1348261679">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushsubscription-options-1" title="§ 3.4 Push subscription">§ 3.4 Push
                    subscription</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscription-options-2" title="§ 8. PushSubscription interface">§ 8.
                    PushSubscription interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscription-options-3" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pushsubscription-getkey"
        aria-label="Links in this document to definition: getKey()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushsubscription-getkey"
                aria-label="Permalink for definition: getKey(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1348261679">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushsubscription-getkey-1" title="§ 3.4 Push subscription">§ 3.4 Push
                    subscription</a> <a href="#ref-for-dom-pushsubscription-getkey-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscription-getkey-3" title="§ 5.3 Push service use">§ 5.3 Push service
                    use</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscription-getkey-4" title="§ 8. PushSubscription interface">§ 8.
                    PushSubscription interface</a> <a href="#ref-for-dom-pushsubscription-getkey-5"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-pushsubscription-getkey-6"
                    title="Reference 3">(3)</a> <a href="#ref-for-dom-pushsubscription-getkey-7"
                    title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscription-getkey-8" title="§ 8.1 PushEncryptionKeyName enumeration">§ 8.1
                    PushEncryptionKeyName enumeration</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscription-getkey-9" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pushsubscription-unsubscribe"
        aria-label="Links in this document to definition: unsubscribe()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushsubscription-unsubscribe"
                aria-label="Permalink for definition: unsubscribe(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1348261679">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushsubscription-unsubscribe-1"
                    title="§ 7.3 PushSubscriptionOptionsInit dictionary">§ 7.3 PushSubscriptionOptionsInit
                    dictionary</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscription-unsubscribe-2" title="§ 8. PushSubscription interface">§ 8.
                    PushSubscription interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscription-unsubscribe-3" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pushsubscription-tojson"
        aria-label="Links in this document to definition: toJSON()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushsubscription-tojson"
                aria-label="Permalink for definition: toJSON(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1348261679">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushsubscription-tojson-1" title="§ 8. PushSubscription interface">§ 8.
                    PushSubscription interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscription-tojson-2" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pushsubscriptionjson"
        aria-label="Links in this document to definition: PushSubscriptionJSON">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushsubscriptionjson"
                aria-label="Permalink for definition: PushSubscriptionJSON. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1348261679">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushsubscriptionjson-1" title="§ 8. PushSubscription interface">§ 8.
                    PushSubscription interface</a> <a href="#ref-for-dom-pushsubscriptionjson-2"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-pushsubscriptionjson-3"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscriptionjson-4" title="§ A. IDL Index">§ A. IDL Index</a> <a
                    href="#ref-for-dom-pushsubscriptionjson-5" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pushsubscriptionjson-keys"
        aria-label="Links in this document to definition: keys">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushsubscriptionjson-keys"
                aria-label="Permalink for definition: keys. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1348261679">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushsubscriptionjson-keys-1" title="§ 8. PushSubscription interface">§ 8.
                    PushSubscription interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscriptionjson-keys-2" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pushencryptionkeyname"
        aria-label="Links in this document to definition: PushEncryptionKeyName">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushencryptionkeyname"
                aria-label="Permalink for definition: PushEncryptionKeyName. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-226775330">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushencryptionkeyname-1" title="§ 8. PushSubscription interface">§ 8.
                    PushSubscription interface</a> <a href="#ref-for-dom-pushencryptionkeyname-2"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushencryptionkeyname-3" title="§ 8.1 PushEncryptionKeyName enumeration">§ 8.1
                    PushEncryptionKeyName enumeration</a> <a href="#ref-for-dom-pushencryptionkeyname-4"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushencryptionkeyname-5" title="§ A. IDL Index">§ A. IDL Index</a> <a
                    href="#ref-for-dom-pushencryptionkeyname-6" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pushencryptionkeyname-p256dh"
        aria-label="Links in this document to definition: p256dh">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushencryptionkeyname-p256dh"
                aria-label="Permalink for definition: p256dh. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-226775330">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushencryptionkeyname-p256dh-1" title="§ 3.4 Push subscription">§ 3.4 Push
                    subscription</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushencryptionkeyname-p256dh-2" title="§ 5.3 Push service use">§ 5.3 Push service
                    use</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushencryptionkeyname-p256dh-3" title="§ 8. PushSubscription interface">§ 8.
                    PushSubscription interface</a> <a href="#ref-for-dom-pushencryptionkeyname-p256dh-4"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushencryptionkeyname-p256dh-5" title="§ 8.1 PushEncryptionKeyName enumeration">§
                    8.1 PushEncryptionKeyName enumeration</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushencryptionkeyname-p256dh-6" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pushencryptionkeyname-auth"
        aria-label="Links in this document to definition: auth">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushencryptionkeyname-auth"
                aria-label="Permalink for definition: auth. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-226775330">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushencryptionkeyname-auth-1" title="§ 3.4 Push subscription">§ 3.4 Push
                    subscription</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushencryptionkeyname-auth-2" title="§ 8. PushSubscription interface">§ 8.
                    PushSubscription interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushencryptionkeyname-auth-3" title="§ 8.1 PushEncryptionKeyName enumeration">§
                    8.1 PushEncryptionKeyName enumeration</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushencryptionkeyname-auth-4" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pushmessagedata"
        aria-label="Links in this document to definition: PushMessageData">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushmessagedata"
                aria-label="Permalink for definition: PushMessageData. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1430759589">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushmessagedata-1" title="§ 9. PushMessageData interface">§ 9. PushMessageData
                    interface</a> <a href="#ref-for-dom-pushmessagedata-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushmessagedata-3" title="§ 10.2 PushEvent Interface">§ 10.2 PushEvent
                    Interface</a> <a href="#ref-for-dom-pushmessagedata-4" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushmessagedata-5" title="§ 10.3 Receiving a Push Message">§ 10.3 Receiving a Push
                    Message</a> <a href="#ref-for-dom-pushmessagedata-6" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushmessagedata-7" title="§ A. IDL Index">§ A. IDL Index</a> <a
                    href="#ref-for-dom-pushmessagedata-8" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-bytes"
        aria-label="Links in this document to definition: bytes">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-bytes"
                aria-label="Permalink for definition: bytes. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-bytes-1" title="§ 10.2 PushEvent Interface">§ 10.2 PushEvent Interface</a>
            </li>
            <li>
                <a href="#ref-for-dfn-bytes-2" title="§ 10.3 Receiving a Push Message">§ 10.3 Receiving a Push
                    Message</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pushmessagedata-arraybuffer"
        aria-label="Links in this document to definition: arrayBuffer()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushmessagedata-arraybuffer"
                aria-label="Permalink for definition: arrayBuffer(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1430759589">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushmessagedata-arraybuffer-1" title="§ 9. PushMessageData interface">§ 9.
                    PushMessageData interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushmessagedata-arraybuffer-2" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pushmessagedata-blob"
        aria-label="Links in this document to definition: blob()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushmessagedata-blob"
                aria-label="Permalink for definition: blob(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1430759589">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushmessagedata-blob-1" title="§ 9. PushMessageData interface">§ 9.
                    PushMessageData interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushmessagedata-blob-2" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pushmessagedata-bytes"
        aria-label="Links in this document to definition: bytes()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushmessagedata-bytes"
                aria-label="Permalink for definition: bytes(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1430759589">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushmessagedata-bytes-1" title="§ 9. PushMessageData interface">§ 9.
                    PushMessageData interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushmessagedata-bytes-2" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pushmessagedata-json"
        aria-label="Links in this document to definition: json()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushmessagedata-json"
                aria-label="Permalink for definition: json(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1430759589">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushmessagedata-json-1" title="§ 9. PushMessageData interface">§ 9.
                    PushMessageData interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushmessagedata-json-2" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pushmessagedata-text"
        aria-label="Links in this document to definition: text()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushmessagedata-text"
                aria-label="Permalink for definition: text(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1430759589">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushmessagedata-text-1" title="§ 9. PushMessageData interface">§ 9.
                    PushMessageData interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushmessagedata-text-2" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-extract-a-byte-sequence"
        aria-label="Links in this document to definition: extract a byte sequence">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-extract-a-byte-sequence"
                aria-label="Permalink for definition: extract a byte sequence. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-extract-a-byte-sequence-1" title="§ 10.2 PushEvent Interface">§ 10.2 PushEvent
                    Interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-serviceworkerglobalscope-onpush"
        aria-label="Links in this document to definition: onpush">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-serviceworkerglobalscope-onpush"
                aria-label="Permalink for definition: onpush. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-801193280">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-serviceworkerglobalscope-onpush-1"
                    title="§ 10.1 Extensions to the ServiceWorkerGlobalScope interface">§ 10.1 Extensions to the
                    ServiceWorkerGlobalScope interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-serviceworkerglobalscope-onpush-2" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-serviceworkerglobalscope-onpushsubscriptionchange"
        aria-label="Links in this document to definition: onpushsubscriptionchange">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-serviceworkerglobalscope-onpushsubscriptionchange"
                aria-label="Permalink for definition: onpushsubscriptionchange. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-801193280">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-serviceworkerglobalscope-onpushsubscriptionchange-1"
                    title="§ 10.1 Extensions to the ServiceWorkerGlobalScope interface">§ 10.1 Extensions to the
                    ServiceWorkerGlobalScope interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-serviceworkerglobalscope-onpushsubscriptionchange-2" title="§ A. IDL Index">§ A.
                    IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pushevent"
        aria-label="Links in this document to definition: PushEvent">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushevent"
                aria-label="Permalink for definition: PushEvent. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1213098884">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushevent-1" title="§ 10.2 PushEvent Interface">§ 10.2 PushEvent Interface</a> <a
                    href="#ref-for-dom-pushevent-2" title="Reference 2">(2)</a> <a href="#ref-for-dom-pushevent-3"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushevent-4" title="§ 10.3 Receiving a Push Message">§ 10.3 Receiving a Push
                    Message</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushevent-5" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pusheventinit"
        aria-label="Links in this document to definition: PushEventInit">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pusheventinit"
                aria-label="Permalink for definition: PushEventInit. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pusheventinit-1" title="§ 10.2 PushEvent Interface">§ 10.2 PushEvent Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-pusheventinit-2" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pusheventinit-data"
        aria-label="Links in this document to definition: data">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pusheventinit-data"
                aria-label="Permalink for definition: data. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pusheventinit-notification"
        aria-label="Links in this document to definition: notification">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pusheventinit-notification"
                aria-label="Permalink for definition: notification. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pushmessagedatainit"
        aria-label="Links in this document to definition: PushMessageDataInit">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushmessagedatainit"
                aria-label="Permalink for definition: PushMessageDataInit. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushmessagedatainit-1" title="§ 10.2 PushEvent Interface">§ 10.2 PushEvent
                    Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushmessagedatainit-2" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pushevent-constructor"
        aria-label="Links in this document to definition: constructor">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushevent-constructor"
                aria-label="Permalink for definition: constructor. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1213098884">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushevent-constructor-1" title="§ 10.2 PushEvent Interface">§ 10.2 PushEvent
                    Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushevent-constructor-2" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pushevent-data"
        aria-label="Links in this document to definition: data">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushevent-data"
                aria-label="Permalink for definition: data. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1213098884">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushevent-data-1" title="§ 10.2 PushEvent Interface">§ 10.2 PushEvent
                    Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushevent-data-2" title="§ 10.3 Receiving a Push Message">§ 10.3 Receiving a Push
                    Message</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushevent-data-3" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pushevent-notification"
        aria-label="Links in this document to definition: notification">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushevent-notification"
                aria-label="Permalink for definition: notification. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1213098884">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushevent-notification-1" title="§ 10.2 PushEvent Interface">§ 10.2 PushEvent
                    Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushevent-notification-2" title="§ 10.3 Receiving a Push Message">§ 10.3 Receiving
                    a Push Message</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushevent-notification-3" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-push-event-result"
        aria-label="Links in this document to definition: push event result">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-push-event-result"
                aria-label="Permalink for definition: push event result. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-push-event-result-1" title="§ 10.3 Receiving a Push Message">§ 10.3 Receiving a
                    Push Message</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-notification-shown"
        aria-label="Links in this document to definition: notification shown">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-notification-shown"
                aria-label="Permalink for definition: notification shown. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-notification-shown-1" title="§ 10.3 Receiving a Push Message">§ 10.3 Receiving a
                    Push Message</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-fire-a-push-event"
        aria-label="Links in this document to definition: fire a push event">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-fire-a-push-event"
                aria-label="Permalink for definition: fire a push event. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-fire-a-push-event-1" title="§ 10.3 Receiving a Push Message">§ 10.3 Receiving a
                    Push Message</a> <a href="#ref-for-dfn-fire-a-push-event-2" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-acknowledge-a-push-message"
        aria-label="Links in this document to definition: acknowledge a push message">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-acknowledge-a-push-message"
                aria-label="Permalink for definition: acknowledge a push message. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-acknowledge-a-push-message-1" title="§ 10.3 Receiving a Push Message">§ 10.3
                    Receiving a Push Message</a> <a href="#ref-for-dfn-acknowledge-a-push-message-2"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-acknowledge-a-push-message-3"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-acknowledge-a-push-message-4"
                    title="Reference 4">(4)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-pushsubscriptionchange"
        aria-label="Links in this document to definition: pushsubscriptionchange">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-pushsubscriptionchange"
                aria-label="Permalink for definition: pushsubscriptionchange. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-pushsubscriptionchange-1" title="§ 10.4 The pushsubscriptionchange Event">§ 10.4
                    The pushsubscriptionchange Event</a>
            </li>
            <li>
                <a href="#ref-for-dfn-pushsubscriptionchange-2"
                    title="§ 10.4.2 PushSubscriptionChangeEventInit Interface">§ 10.4.2 PushSubscriptionChangeEventInit
                    Interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-fire-the-pushsubscriptionchange-event"
        aria-label="Links in this document to definition: fire the &quot;pushsubscriptionchange&quot; event">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-fire-the-pushsubscriptionchange-event"
                aria-label="Permalink for definition: fire the &quot;pushsubscriptionchange&quot; event. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-fire-the-pushsubscriptionchange-event-1" title="§ 3.4 Push subscription">§ 3.4
                    Push subscription</a>
            </li>
            <li>
                <a href="#ref-for-dfn-fire-the-pushsubscriptionchange-event-2" title="§ 3.4.1 Subscription Refreshes">§
                    3.4.1 Subscription Refreshes</a> <a href="#ref-for-dfn-fire-the-pushsubscriptionchange-event-3"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-fire-the-pushsubscriptionchange-event-4"
                    title="§ 4. Security and privacy considerations">§ 4. Security and privacy considerations</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pushsubscriptionchangeevent"
        aria-label="Links in this document to definition: PushSubscriptionChangeEvent">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushsubscriptionchangeevent"
                aria-label="Permalink for definition: PushSubscriptionChangeEvent. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-2104077905">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushsubscriptionchangeevent-1" title="§ 10.4 The pushsubscriptionchange Event">§
                    10.4 The pushsubscriptionchange Event</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscriptionchangeevent-2"
                    title="§ 10.4.1 PushSubscriptionChangeEvent Interface">§ 10.4.1 PushSubscriptionChangeEvent
                    Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscriptionchangeevent-3" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-pushsubscriptionchangeevent-constructor"
        aria-label="Links in this document to definition: constructor">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushsubscriptionchangeevent-constructor"
                aria-label="Permalink for definition: constructor. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-pushsubscriptionchangeevent-newsubscription"
        aria-label="Links in this document to definition: newSubscription">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushsubscriptionchangeevent-newsubscription"
                aria-label="Permalink for definition: newSubscription. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-2104077905">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushsubscriptionchangeevent-newsubscription-1"
                    title="§ 10.4.1 PushSubscriptionChangeEvent Interface">§ 10.4.1 PushSubscriptionChangeEvent
                    Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscriptionchangeevent-newsubscription-2" title="§ A. IDL Index">§ A. IDL
                    Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-pushsubscriptionchangeevent-oldsubscription"
        aria-label="Links in this document to definition: oldSubscription">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushsubscriptionchangeevent-oldsubscription"
                aria-label="Permalink for definition: oldSubscription. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-2104077905">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushsubscriptionchangeevent-oldsubscription-1"
                    title="§ 10.4.1 PushSubscriptionChangeEvent Interface">§ 10.4.1 PushSubscriptionChangeEvent
                    Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscriptionchangeevent-oldsubscription-2" title="§ A. IDL Index">§ A. IDL
                    Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-pushsubscriptionchangeeventinit"
        aria-label="Links in this document to definition: PushSubscriptionChangeEventInit">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushsubscriptionchangeeventinit"
                aria-label="Permalink for definition: PushSubscriptionChangeEventInit. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1842180883">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushsubscriptionchangeeventinit-1"
                    title="§ 10.4.1 PushSubscriptionChangeEvent Interface">§ 10.4.1 PushSubscriptionChangeEvent
                    Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscriptionchangeeventinit-2"
                    title="§ 10.4.2 PushSubscriptionChangeEventInit Interface">§ 10.4.2 PushSubscriptionChangeEventInit
                    Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscriptionchangeeventinit-3" title="§ A. IDL Index">§ A. IDL Index</a> <a
                    href="#ref-for-dom-pushsubscriptionchangeeventinit-4" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-pushsubscriptionchangeeventinit-newsubscription"
        aria-label="Links in this document to definition: newSubscription">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushsubscriptionchangeeventinit-newsubscription"
                aria-label="Permalink for definition: newSubscription. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1842180883">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushsubscriptionchangeeventinit-newsubscription-1"
                    title="§ 10.4.2 PushSubscriptionChangeEventInit Interface">§ 10.4.2 PushSubscriptionChangeEventInit
                    Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscriptionchangeeventinit-newsubscription-2" title="§ A. IDL Index">§ A. IDL
                    Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-pushsubscriptionchangeeventinit-oldsubscription"
        aria-label="Links in this document to definition: oldSubscription">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-pushsubscriptionchangeeventinit-oldsubscription"
                aria-label="Permalink for definition: oldSubscription. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1842180883">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-pushsubscriptionchangeeventinit-oldsubscription-1"
                    title="§ 10.4.2 PushSubscriptionChangeEventInit Interface">§ 10.4.2 PushSubscriptionChangeEventInit
                    Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-pushsubscriptionchangeeventinit-oldsubscription-2" title="§ A. IDL Index">§ A. IDL
                    Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-user-agent"
        aria-label="Links in this document to definition: user agent">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-user-agent"
                aria-label="Permalink for definition: user agent. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-user-agent-1" title="§ Abstract">§ Abstract</a> <a
                    href="#ref-for-dfn-user-agent-2" title="Reference 2">(2)</a> <a href="#ref-for-dfn-user-agent-3"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-user-agent-4" title="§ 1. Introduction">§ 1. Introduction</a> <a
                    href="#ref-for-dfn-user-agent-5" title="Reference 2">(2)</a> <a href="#ref-for-dfn-user-agent-6"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-user-agent-7" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-user-agent-8" title="Reference 5">(5)</a> <a href="#ref-for-dfn-user-agent-9"
                    title="Reference 6">(6)</a> <a href="#ref-for-dfn-user-agent-10" title="Reference 7">(7)</a> <a
                    href="#ref-for-dfn-user-agent-11" title="Reference 8">(8)</a> <a href="#ref-for-dfn-user-agent-12"
                    title="Reference 9">(9)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-user-agent-13" title="§ 2. Dependencies">§ 2. Dependencies</a>
            </li>
            <li>
                <a href="#ref-for-dfn-user-agent-14" title="§ 3.4 Push subscription">§ 3.4 Push subscription</a> <a
                    href="#ref-for-dfn-user-agent-15" title="Reference 2">(2)</a> <a href="#ref-for-dfn-user-agent-16"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-user-agent-17" title="§ 3.4.1 Subscription Refreshes">§ 3.4.1 Subscription
                    Refreshes</a> <a href="#ref-for-dfn-user-agent-18" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-user-agent-19" title="Reference 3">(3)</a> <a href="#ref-for-dfn-user-agent-20"
                    title="Reference 4">(4)</a> <a href="#ref-for-dfn-user-agent-21" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-user-agent-22" title="Reference 6">(6)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-user-agent-23" title="§ 3.4.2 Subscription Deactivation">§ 3.4.2 Subscription
                    Deactivation</a>
            </li>
            <li>
                <a href="#ref-for-dfn-user-agent-24" title="§ 3.5 Push service">§ 3.5 Push service</a> <a
                    href="#ref-for-dfn-user-agent-25" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-user-agent-26" title="§ 4. Security and privacy considerations">§ 4. Security and
                    privacy considerations</a> <a href="#ref-for-dfn-user-agent-27" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-user-agent-28" title="Reference 3">(3)</a> <a href="#ref-for-dfn-user-agent-29"
                    title="Reference 4">(4)</a> <a href="#ref-for-dfn-user-agent-30" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-user-agent-31" title="Reference 6">(6)</a> <a href="#ref-for-dfn-user-agent-32"
                    title="Reference 7">(7)</a> <a href="#ref-for-dfn-user-agent-33" title="Reference 8">(8)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-user-agent-34" title="§ 5. Push Framework">§ 5. Push Framework</a> <a
                    href="#ref-for-dfn-user-agent-35" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-user-agent-36" title="§ 7. PushManager interface">§ 7. PushManager interface</a>
            </li>
            <li>
                <a href="#ref-for-dfn-user-agent-37" title="§ 7.3 PushSubscriptionOptionsInit dictionary">§ 7.3
                    PushSubscriptionOptionsInit dictionary</a> <a href="#ref-for-dfn-user-agent-38"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-user-agent-39" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-user-agent-40" title="Reference 4">(4)</a> <a href="#ref-for-dfn-user-agent-41"
                    title="Reference 5">(5)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-user-agent-42" title="§ 8. PushSubscription interface">§ 8. PushSubscription
                    interface</a> <a href="#ref-for-dfn-user-agent-43" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-user-agent-44" title="Reference 3">(3)</a> <a href="#ref-for-dfn-user-agent-45"
                    title="Reference 4">(4)</a> <a href="#ref-for-dfn-user-agent-46" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-user-agent-47" title="Reference 6">(6)</a> <a href="#ref-for-dfn-user-agent-48"
                    title="Reference 7">(7)</a> <a href="#ref-for-dfn-user-agent-49" title="Reference 8">(8)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-user-agent-50" title="§ 10.3 Receiving a Push Message">§ 10.3 Receiving a Push
                    Message</a>
            </li>
            <li>
                <a href="#ref-for-dfn-user-agent-51" title="§ 10.4 The pushsubscriptionchange Event">§ 10.4 The
                    pushsubscriptionchange Event</a>
            </li>
            <li>
                <a href="#ref-for-dfn-user-agent-52" title="§ 10.4.2 PushSubscriptionChangeEventInit Interface">§ 10.4.2
                    PushSubscriptionChangeEventInit Interface</a>
            </li>
        </ul>
    </div>
    <script id="respec-highlight-vars">(() => {
            // @ts-check

            if (document.respec) {
                document.respec.ready.then(setupVarHighlighter);
            } else {
                setupVarHighlighter();
            }

            function setupVarHighlighter() {
                document
                    .querySelectorAll("var")
                    .forEach(varElem => varElem.addEventListener("click", highlightListener));
            }

            function highlightListener(ev) {
                ev.stopPropagation();
                const { target: varElem } = ev;
                const hightligtedElems = highlightVars(varElem);
                const resetListener = () => {
                    const hlColor = getHighlightColor(varElem);
                    hightligtedElems.forEach(el => removeHighlight(el, hlColor));
                    [...HL_COLORS.keys()].forEach(key => HL_COLORS.set(key, true));
                };
                if (hightligtedElems.length) {
                    document.body.addEventListener("click", resetListener, { once: true });
                }
            }

            // availability of highlight colors. colors from var.css
            const HL_COLORS = new Map([
                ["respec-hl-c1", true],
                ["respec-hl-c2", true],
                ["respec-hl-c3", true],
                ["respec-hl-c4", true],
                ["respec-hl-c5", true],
                ["respec-hl-c6", true],
                ["respec-hl-c7", true],
            ]);

            function getHighlightColor(target) {
                // return current colors if applicable
                const { value } = target.classList;
                const re = /respec-hl-\w+/;
                const activeClass = re.test(value) && value.match(re);
                if (activeClass) return activeClass[0];

                // first color preference
                if (HL_COLORS.get("respec-hl-c1") === true) return "respec-hl-c1";

                // otherwise get some other available color
                return [...HL_COLORS.keys()].find(c => HL_COLORS.get(c)) || "respec-hl-c1";
            }

            function highlightVars(varElem) {
                const textContent = norm(varElem.textContent);
                const parent = varElem.closest(".algorithm, section");
                const highlightColor = getHighlightColor(varElem);

                const varsToHighlight = [...parent.querySelectorAll("var")].filter(
                    el =>
                        norm(el.textContent) === textContent &&
                        el.closest(".algorithm, section") === parent
                );

                // update availability of highlight color
                const colorStatus = varsToHighlight[0].classList.contains("respec-hl");
                HL_COLORS.set(highlightColor, colorStatus);

                // highlight vars
                if (colorStatus) {
                    varsToHighlight.forEach(el => removeHighlight(el, highlightColor));
                    return [];
                } else {
                    varsToHighlight.forEach(el => addHighlight(el, highlightColor));
                }
                return varsToHighlight;
            }

            function removeHighlight(el, highlightColor) {
                el.classList.remove("respec-hl", highlightColor);
                // clean up empty class attributes so they don't come in export
                if (!el.classList.length) el.removeAttribute("class");
            }

            function addHighlight(elem, highlightColor) {
                elem.classList.add("respec-hl", highlightColor);
            }

            /**
             * Same as `norm` from src/core/utils, but our build process doesn't allow
             * imports in runtime scripts, so duplicated here.
             * @param {string} str
             */
            function norm(str) {
                return str.trim().replace(/\s+/g, " ");
            }
        })()</script>
    <script id="respec-dfn-panel">(() => {
                                               // @ts-check
                                               if (document.respec) {
                                                   document.respec.ready.then(setupPanel);
                                               } else {
                                                   setupPanel();
                                               }

                                               function setupPanel() {
                                                   const listener = panelListener();
                                                   document.body.addEventListener("keydown", listener);
                                                   document.body.addEventListener("click", listener);
                                               }

                                               function panelListener() {
                                                   /** @type {HTMLElement} */
                                                   let panel = null;
                                                   return event => {
                                                       const { target, type } = event;

                                                       if (!(target instanceof HTMLElement)) return;

                                                       // For keys, we only care about Enter key to activate the panel
                                                       // otherwise it's activated via a click.
                                                       if (type === "keydown" && event.key !== "Enter") return;

                                                       const action = deriveAction(event);

                                                       switch (action) {
                                                           case "show": {
                                                               hidePanel(panel);
                                                               /** @type {HTMLElement} */
                                                               const dfn = target.closest("dfn, .index-term");
                                                               panel = document.getElementById(`dfn-panel-for-${dfn.id}`);
                                                               const coords = deriveCoordinates(event);
                                                               displayPanel(dfn, panel, coords);
                                                               break;
                                                           }
                                                           case "dock": {
                                                               panel.style.left = null;
                                                               panel.style.top = null;
                                                               panel.classList.add("docked");
                                                               break;
                                                           }
                                                           case "hide": {
                                                               hidePanel(panel);
                                                               panel = null;
                                                               break;
                                                           }
                                                       }
                                                   };
                                               }

                                               /**
                                                * @param {MouseEvent|KeyboardEvent} event
                                                */
                                               function deriveCoordinates(event) {
                                                   const target = /** @type HTMLElement */ (event.target);

                                                   // We prevent synthetic AT clicks from putting
                                                   // the dialog in a weird place. The AT events sometimes
                                                   // lack coordinates, so they have clientX/Y = 0
                                                   const rect = target.getBoundingClientRect();
                                                   if (
                                                       event instanceof MouseEvent &&
                                                       event.clientX >= rect.left &&
                                                       event.clientY >= rect.top
                                                   ) {
                                                       // The event probably happened inside the bounding rect...
                                                       return { x: event.clientX, y: event.clientY };
                                                   }

                                                   // Offset to the middle of the element
                                                   const x = rect.x + rect.width / 2;
                                                   // Placed at the bottom of the element
                                                   const y = rect.y + rect.height;
                                                   return { x, y };
                                               }

                                               /**
                                                * @param {Event} event
                                                */
                                               function deriveAction(event) {
                                                   const target = /** @type {HTMLElement} */ (event.target);
                                                   const hitALink = !!target.closest("a");
                                                   if (target.closest("dfn:not([data-cite]), .index-term")) {
                                                       return hitALink ? "none" : "show";
                                                   }
                                                   if (target.closest(".dfn-panel")) {
                                                       if (hitALink) {
                                                           return target.classList.contains("self-link") ? "hide" : "dock";
                                                       }
                                                       const panel = target.closest(".dfn-panel");
                                                       return panel.classList.contains("docked") ? "hide" : "none";
                                                   }
                                                   if (document.querySelector(".dfn-panel:not([hidden])")) {
                                                       return "hide";
                                                   }
                                                   return "none";
                                               }

                                               /**
                                                * @param {HTMLElement} dfn
                                                * @param {HTMLElement} panel
                                                * @param {{ x: number, y: number }} clickPosition
                                                */
                                               function displayPanel(dfn, panel, { x, y }) {
                                                   panel.hidden = false;
                                                   // distance (px) between edge of panel and the pointing triangle (caret)
                                                   const MARGIN = 20;

                                                   const dfnRects = dfn.getClientRects();
                                                   // Find the `top` offset when the `dfn` can be spread across multiple lines
                                                   let closestTop = 0;
                                                   let minDiff = Infinity;
                                                   for (const rect of dfnRects) {
                                                       const { top, bottom } = rect;
                                                       const diffFromClickY = Math.abs((top + bottom) / 2 - y);
                                                       if (diffFromClickY < minDiff) {
                                                           minDiff = diffFromClickY;
                                                           closestTop = top;
                                                       }
                                                   }

                                                   const top = window.scrollY + closestTop + dfnRects[0].height;
                                                   const left = x - MARGIN;
                                                   panel.style.left = `${left}px`;
                                                   panel.style.top = `${top}px`;

                                                   // Find if the panel is flowing out of the window
                                                   const panelRect = panel.getBoundingClientRect();
                                                   const SCREEN_WIDTH = Math.min(window.innerWidth, window.screen.width);
                                                   if (panelRect.right > SCREEN_WIDTH) {
                                                       const newLeft = Math.max(MARGIN, x + MARGIN - panelRect.width);
                                                       const newCaretOffset = left - newLeft;
                                                       panel.style.left = `${newLeft}px`;
                                                       /** @type {HTMLElement} */
                                                       const caret = panel.querySelector(".caret");
                                                       caret.style.left = `${newCaretOffset}px`;
                                                   }

                                                   // As it's a dialog, we trap focus.
                                                   // TODO: when <dialog> becomes a implemented, we should really
                                                   // use that.
                                                   trapFocus(panel, dfn);
                                               }

                                               /**
                                                * @param {HTMLElement} panel
                                                * @param {HTMLElement} dfn
                                                * @returns
                                                */
                                               function trapFocus(panel, dfn) {
                                                   /** @type NodeListOf<HTMLAnchorElement> elements */
                                                   const anchors = panel.querySelectorAll("a[href]");
                                                   // No need to trap focus
                                                   if (!anchors.length) return;

                                                   // Move focus to first anchor element
                                                   const first = anchors.item(0);
                                                   first.focus();

                                                   const trapListener = createTrapListener(anchors, panel, dfn);
                                                   panel.addEventListener("keydown", trapListener);

                                                   // Hiding the panel releases the trap
                                                   const mo = new MutationObserver(records => {
                                                       const [record] = records;
                                                       const target = /** @type HTMLElement */ (record.target);
                                                       if (target.hidden) {
                                                           panel.removeEventListener("keydown", trapListener);
                                                           mo.disconnect();
                                                       }
                                                   });
                                                   mo.observe(panel, { attributes: true, attributeFilter: ["hidden"] });
                                               }

                                               /**
                                                *
                                                * @param {NodeListOf<HTMLAnchorElement>} anchors
                                                * @param {HTMLElement} panel
                                                * @param {HTMLElement} dfn
                                                * @returns
                                                */
                                               function createTrapListener(anchors, panel, dfn) {
                                                   const lastIndex = anchors.length - 1;
                                                   let currentIndex = 0;
                                                   return event => {
                                                       switch (event.key) {
                                                           // Hitting "Tab" traps us in a nice loop around elements.
                                                           case "Tab": {
                                                               event.preventDefault();
                                                               currentIndex += event.shiftKey ? -1 : +1;
                                                               if (currentIndex < 0) {
                                                                   currentIndex = lastIndex;
                                                               } else if (currentIndex > lastIndex) {
                                                                   currentIndex = 0;
                                                               }
                                                               anchors.item(currentIndex).focus();
                                                               break;
                                                           }

                                                           // Hitting "Enter" on an anchor releases the trap.
                                                           case "Enter":
                                                               hidePanel(panel);
                                                               break;

                                                           // Hitting "Escape" returns focus to dfn.
                                                           case "Escape":
                                                               hidePanel(panel);
                                                               dfn.focus();
                                                               return;
                                                       }
                                                   };
                                               }

                                               /** @param {HTMLElement} panel */
                                               function hidePanel(panel) {
                                                   if (!panel) return;
                                                   panel.hidden = true;
                                                   panel.classList.remove("docked");
                                               }
                                           })()</script>
    <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
    <script src="/dropdown.js"></script>
</body>

</html>