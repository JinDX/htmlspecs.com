<!doctype html>
<html lang="zh-hans">

<head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <title>调整观察器</title>
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
    <meta content="exploring" name="csswg-work-status">
    <meta content="WD" name="w3c-status">
    <meta content="This specification describes an API for observing changes to Element&apos;s size." name="abstract">
    <link href="default.css" rel="stylesheet" type="text/css">
    <meta content="Bikeshed version a8675e8c315faa3f78e47e67c76649fa9a07ee9b" name="generator">
    <link href="https://www.w3.org/TR/resize-observer/" rel="canonical">
    <meta content="c5d81c7002a74ecfc2411af0033516de9a8ca224" name="document-revision">
    <style>
        /* style-md-lists */

        /* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
        [data-md]> :first-child {
            margin-top: 0;
        }

        [data-md]> :last-child {
            margin-bottom: 0;
        }
    </style>
    <style>
        /* style-selflinks */

        .heading,
        .issue,
        .note,
        .example,
        li,
        dt {
            position: relative;
        }

        a.self-link {
            position: absolute;
            top: 0;
            left: calc(-1 * (3.5rem - 26px));
            width: calc(3.5rem - 26px);
            height: 2em;
            text-align: center;
            border: none;
            transition: opacity .2s;
            opacity: .5;
        }

        a.self-link:hover {
            opacity: 1;
        }

        .heading>a.self-link {
            font-size: 83%;
        }

        li>a.self-link {
            left: calc(-1 * (3.5rem - 26px) - 2em);
        }

        dfn>a.self-link {
            top: auto;
            left: auto;
            opacity: 0;
            width: 1.5em;
            height: 1.5em;
            background: gray;
            color: white;
            font-style: normal;
            transition: opacity .2s, background-color .2s, color .2s;
        }

        dfn:hover>a.self-link {
            opacity: 1;
        }

        dfn>a.self-link:hover {
            color: black;
        }

        a.self-link::before {
            content: "¶";
        }

        .heading>a.self-link::before {
            content: "§";
        }

        dfn>a.self-link::before {
            content: "#";
        }
    </style>
    <style>
        /* style-counters */

        body {
            counter-reset: example figure issue;
        }

        .issue {
            counter-increment: issue;
        }

        .issue:not(.no-marker)::before {
            content: "Issue " counter(issue);
        }

        .example {
            counter-increment: example;
        }

        .example:not(.no-marker)::before {
            content: "Example " counter(example);
        }

        .invalid.example:not(.no-marker)::before,
        .illegal.example:not(.no-marker)::before {
            content: "Invalid Example" counter(example);
        }

        figcaption {
            counter-increment: figure;
        }

        figcaption:not(.no-marker)::before {
            content: "Figure " counter(figure) " ";
        }
    </style>
    <style>
        /* style-autolinks */

        .css.css,
        .property.property,
        .descriptor.descriptor {
            color: #005a9c;
            font-size: inherit;
            font-family: inherit;
        }

        .css::before,
        .property::before,
        .descriptor::before {
            content: "‘";
        }

        .css::after,
        .property::after,
        .descriptor::after {
            content: "’";
        }

        .property,
        .descriptor {
            /* Don't wrap property and descriptor names */
            white-space: nowrap;
        }

        .type {
            /* CSS value <type> */
            font-style: italic;
        }

        pre .property::before,
        pre .property::after {
            content: "";
        }

        [data-link-type="property"]::before,
        [data-link-type="propdesc"]::before,
        [data-link-type="descriptor"]::before,
        [data-link-type="value"]::before,
        [data-link-type="function"]::before,
        [data-link-type="at-rule"]::before,
        [data-link-type="selector"]::before,
        [data-link-type="maybe"]::before {
            content: "‘";
        }

        [data-link-type="property"]::after,
        [data-link-type="propdesc"]::after,
        [data-link-type="descriptor"]::after,
        [data-link-type="value"]::after,
        [data-link-type="function"]::after,
        [data-link-type="at-rule"]::after,
        [data-link-type="selector"]::after,
        [data-link-type="maybe"]::after {
            content: "’";
        }

        [data-link-type].production::before,
        [data-link-type].production::after,
        .prod [data-link-type]::before,
        .prod [data-link-type]::after {
            content: "";
        }

        [data-link-type=element],
        [data-link-type=element-attr] {
            font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
            font-size: .9em;
        }

        [data-link-type=element]::before {
            content: "<"
        }

        [data-link-type=element]::after {
            content: ">"
        }

        [data-link-type=biblio] {
            white-space: pre;
        }
    </style>
    <style>
        /* style-dfn-panel */

        .dfn-panel {
            position: absolute;
            z-index: 35;
            height: auto;
            width: -webkit-fit-content;
            width: fit-content;
            max-width: 300px;
            max-height: 500px;
            overflow: auto;
            padding: 0.5em 0.75em;
            font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
            background: #DDDDDD;
            color: black;
            border: outset 0.2em;
        }

        .dfn-panel:not(.on) {
            display: none;
        }

        .dfn-panel * {
            margin: 0;
            padding: 0;
            text-indent: 0;
        }

        .dfn-panel>b {
            display: block;
        }

        .dfn-panel a {
            color: black;
        }

        .dfn-panel a:not(:hover) {
            text-decoration: none !important;
            border-bottom: none !important;
        }

        .dfn-panel>b+b {
            margin-top: 0.25em;
        }

        .dfn-panel ul {
            padding: 0;
        }

        .dfn-panel li {
            list-style: inside;
        }

        .dfn-panel.activated {
            display: inline-block;
            position: fixed;
            left: .5em;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - 1.5em - .4em - .5em);
            max-height: 30vh;
        }

        .dfn-paneled {
            cursor: pointer;
        }
    </style>
    <style>
        /* style-syntax-highlighting */
        pre.idl.highlight {
            color: #708090;
        }

        .highlight:not(.idl) {
            background: hsl(24, 20%, 95%);
        }

        code.highlight {
            padding: .1em;
            border-radius: .3em;
        }

        pre.highlight,
        pre>code.highlight {
            display: block;
            padding: 1em;
            margin: .5em 0;
            overflow: auto;
            border-radius: 0;
        }

        c-[a] {
            color: #990055
        }

        /* Keyword.Declaration */
        c-[b] {
            color: #990055
        }

        /* Keyword.Type */
        c-[c] {
            color: #708090
        }

        /* Comment */
        c-[d] {
            color: #708090
        }

        /* Comment.Multiline */
        c-[e] {
            color: #0077aa
        }

        /* Name.Attribute */
        c-[f] {
            color: #669900
        }

        /* Name.Tag */
        c-[g] {
            color: #222222
        }

        /* Name.Variable */
        c-[k] {
            color: #990055
        }

        /* Keyword */
        c-[l] {
            color: #000000
        }

        /* Literal */
        c-[m] {
            color: #000000
        }

        /* Literal.Number */
        c-[n] {
            color: #0077aa
        }

        /* Name */
        c-[o] {
            color: #999999
        }

        /* Operator */
        c-[p] {
            color: #999999
        }

        /* Punctuation */
        c-[s] {
            color: #a67f59
        }

        /* Literal.String */
        c-[t] {
            color: #a67f59
        }

        /* Literal.String.Single */
        c-[u] {
            color: #a67f59
        }

        /* Literal.String.Double */
        c-[cp] {
            color: #708090
        }

        /* Comment.Preproc */
        c-[c1] {
            color: #708090
        }

        /* Comment.Single */
        c-[cs] {
            color: #708090
        }

        /* Comment.Special */
        c-[kc] {
            color: #990055
        }

        /* Keyword.Constant */
        c-[kn] {
            color: #990055
        }

        /* Keyword.Namespace */
        c-[kp] {
            color: #990055
        }

        /* Keyword.Pseudo */
        c-[kr] {
            color: #990055
        }

        /* Keyword.Reserved */
        c-[ld] {
            color: #000000
        }

        /* Literal.Date */
        c-[nc] {
            color: #0077aa
        }

        /* Name.Class */
        c-[no] {
            color: #0077aa
        }

        /* Name.Constant */
        c-[nd] {
            color: #0077aa
        }

        /* Name.Decorator */
        c-[ni] {
            color: #0077aa
        }

        /* Name.Entity */
        c-[ne] {
            color: #0077aa
        }

        /* Name.Exception */
        c-[nf] {
            color: #0077aa
        }

        /* Name.Function */
        c-[nl] {
            color: #0077aa
        }

        /* Name.Label */
        c-[nn] {
            color: #0077aa
        }

        /* Name.Namespace */
        c-[py] {
            color: #0077aa
        }

        /* Name.Property */
        c-[ow] {
            color: #999999
        }

        /* Operator.Word */
        c-[mb] {
            color: #000000
        }

        /* Literal.Number.Bin */
        c-[mf] {
            color: #000000
        }

        /* Literal.Number.Float */
        c-[mh] {
            color: #000000
        }

        /* Literal.Number.Hex */
        c-[mi] {
            color: #000000
        }

        /* Literal.Number.Integer */
        c-[mo] {
            color: #000000
        }

        /* Literal.Number.Oct */
        c-[sb] {
            color: #a67f59
        }

        /* Literal.String.Backtick */
        c-[sc] {
            color: #a67f59
        }

        /* Literal.String.Char */
        c-[sd] {
            color: #a67f59
        }

        /* Literal.String.Doc */
        c-[se] {
            color: #a67f59
        }

        /* Literal.String.Escape */
        c-[sh] {
            color: #a67f59
        }

        /* Literal.String.Heredoc */
        c-[si] {
            color: #a67f59
        }

        /* Literal.String.Interpol */
        c-[sx] {
            color: #a67f59
        }

        /* Literal.String.Other */
        c-[sr] {
            color: #a67f59
        }

        /* Literal.String.Regex */
        c-[ss] {
            color: #a67f59
        }

        /* Literal.String.Symbol */
        c-[vc] {
            color: #0077aa
        }

        /* Name.Variable.Class */
        c-[vg] {
            color: #0077aa
        }

        /* Name.Variable.Global */
        c-[vi] {
            color: #0077aa
        }

        /* Name.Variable.Instance */
        c-[il] {
            color: #000000
        }

        /* Literal.Number.Integer.Long */
    </style>
    <link href="https://www.w3.org/StyleSheets/TR/2016/W3C-WD" rel="stylesheet" type="text/css">

<body class="h-entry">
    <div class="head">
        <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" width="72"> </a> </p>
        <h1 class="p-name no-ref" id="title">调整观察器</h1>
        <h2 class="no-num no-toc no-ref heading settled" id="subtitle"><span class="content">W3C首次公开工作草案，<time class="dt-updated" datetime="2020-02-11">2020年2月11日</time></span></h2>
        <div data-fill-with="spec-metadata">
            <dl>
                <dt>此版本：
                <dd><a class="u-url" href="https://www.w3.org/TR/2020/WD-resize-observer-1-20200211/">https://www.w3.org/TR/2020/WD-resize-observer-1-20200211/</a>
                <dt>最新发布版本：
                <dd><a href="https://www.w3.org/TR/resize-observer-1/">https://www.w3.org/TR/resize-observer-1/</a>
                <dt>编辑草案：
                <dd><a href="https://drafts.csswg.org/resize-observer/">https://drafts.csswg.org/resize-observer/</a>
                <dt class="editor">编辑者：
                <dd class="editor p-author h-card vcard" data-editor-id="92454"><a class="p-name fn u-email email" href="mailto:atotic@google.com">Aleks Totic</a> (<span class="p-org org">谷歌</span>)
                <dd class="editor p-author h-card vcard" data-editor-id="69511"><a class="p-name fn u-email email" href="mailto:gwhit@microsoft.com">Greg Whitworth</a> (<span class="p-org org">微软</span>)
                <dt>建议对本规范进行编辑：
                <dd><a href="https://github.com/w3c/csswg-drafts/blob/master/resize-observer-1/Overview.bs">GitHub编辑器</a>
                <dt>问题跟踪：
                <dd><a href="https://github.com/w3c/csswg-drafts/labels/resize-observer-1">GitHub问题</a>
            </dl>
        </div>
        <div data-fill-with="warning"></div>
        <p class="copyright" data-fill-with="copyright"><a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">版权</a> © 2020 <a href="https://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a href="https://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">麻省理工学院</abbr></a>, <a href="https://www.ercim.eu/"><abbr title="欧洲信息和数学研究联合会">ERCIM</abbr></a>, <a href="https://www.keio.ac.jp/">庆应义塾大学</a>, <a href="https://ev.buaa.edu.cn/">北航</a>)。W3C <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">责任</a>、<a href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">商标</a>及<a href="https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document">许可文档规则</a>适用。</p>
        <hr title="标题分隔符">
    </div>
    <div class="p-summary" data-fill-with="abstract">
        <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">摘要</span></h2>
        <p>该规范描述了一个用于观察元素大小变化的API。</p>
        <a href="https://www.w3.org/TR/CSS/">CSS</a> 是一种用于描述结构化文档（如HTML和XML）在屏幕、纸张等上呈现的语言。
    </div>
    <h2 class="no-num no-toc no-ref heading settled" id="status"><span class="content">本文件状态</span></h2>
    <div data-fill-with="status">
        <p><em>本节描述了该文档在发布时的状态。其他文档可能会取代本文件。当前W3C出版物列表及本技术报告的最新版本可在
                <a href="https://www.w3.org/TR/">W3C技术报告索引</a>中找到。</em></p>
        <p>该文档是<b>首次公开工作草案</b>。</p>
        <p>作为首次公开工作草案的发布并不意味着W3C成员的认可。此文档是草案，可能会随时更新、替换或被其他文档取代。引用此文档为工作进行中的版本是不合适的。</p>
        <p><a href="https://github.com/w3c/csswg-drafts/issues">GitHub Issues</a>是讨论此规范的首选方式。提交问题时，请在标题中包含“resize-observer”一词，最好像这样：
            “[resize-observer] <i data-lt>…评论摘要…</i>”。所有问题和评论都被<a href="https://lists.w3.org/Archives/Public/public-css-archive/">存档</a>，
            还有一个<a href="https://lists.w3.org/Archives/Public/www-style/">历史档案</a>。</p>
        <p>此文档由<a href="https://www.w3.org/Style/CSS/">CSS工作组</a>生成。</p>
        <p>本文件由根据<a href="https://www.w3.org/Consortium/Patent-Policy/">W3C专利政策</a>运作的小组生成。W3C维护着与小组交付物相关的<a href="https://www.w3.org/2004/01/pp-impl/32061/status" rel="disclosure">公开专利披露列表</a>；该页面还包括披露专利的说明。拥有专利的个人，如果认为其专利包含<a href="https://www.w3.org/Consortium/Patent-Policy/#def-essential">必要主张</a>，必须根据<a href="https://www.w3.org/Consortium/Patent-Policy/#sec-Disclosure">W3C专利政策第6节</a>披露信息。</p>
        <p>本文件受<a href="https://www.w3.org/2019/Process-20190301/" id="w3c_process_revision">2019年3月1日W3C流程文档</a>的约束。</p>
    </div>

    <div data-fill-with="at-risk"></div>
    <nav data-fill-with="table-of-contents" id="toc">
        <h2 class="no-num no-toc no-ref" id="contents">目录</h2>
        <ol class="toc" role="directory">
            <li><a href="#intro"><span class="secno">1</span> <span class="content">介绍</span></a>
            <li>
                <a href="#api"><span class="secno">2</span> <span class="content">调整观察器 API</span></a>
                <ol class="toc">
                    <li><a href="#resize-observer-interface"><span class="secno">2.1</span> <span class="content">ResizeObserver 接口</span></a>
                    <li><a href="#resize-observer-callback"><span class="secno">2.2</span> <span class="content">ResizeObserverCallback</span></a>
                    <li><a href="#resize-observer-entry-interface"><span class="secno">2.3</span> <span class="content">ResizeObserverEntry</span></a>
                </ol>
            <li>
                <a href="#processing-model"><span class="secno">3</span> <span class="content">处理模型</span></a>
                <ol class="toc">
                    <li><a href="#resize-observation-interface"><span class="secno">3.1</span> <span class="content">ResizeObservation 示例结构</span></a>
                    <li>
                        <a href="#internal-slot-definitions"><span class="secno">3.2</span> <span class="content">内部槽定义</span></a>
                        <ol class="toc">
                            <li><a href="#document-slots"><span class="secno">3.2.1</span> <span class="content">文档</span></a>
                            <li><a href="#resize-observer-slots"><span class="secno">3.2.2</span> <span class="content">ResizeObserver</span></a>
                        </ol>
                    <li>
                        <a href="#css-definitions"><span class="secno">3.3</span> <span class="content">CSS 定义</span></a>
                        <ol class="toc">
                            <li><a href="#content-rect-h"><span class="secno">3.3.1</span> <span class="content">内容矩形</span></a>
                        </ol>
                    <li>
                        <a href="#algorithms"><span class="secno">3.4</span> <span class="content">算法</span></a>
                        <ol class="toc">
                            <li><a href="#gather-active-observations-h"><span class="secno">3.4.1</span> <span class="content">按深度收集活动观察</span></a>
                            <li><a href="#has-active-observations-h"><span class="secno">3.4.2</span> <span class="content">存在活动观察</span></a>
                            <li><a href="#has-skipped-observations-h"><span class="secno">3.4.3</span> <span class="content">存在跳过的观察</span></a>
                            <li><a href="#create-and-populate-resizeobserverentry-h"><span class="secno">3.4.4</span> <span class="content">创建并填充 ResizeObserverEntry</span></a>
                            <li><a href="#broadcast-resize-notifications-h"><span class="secno">3.4.5</span> <span class="content">广播活动观察</span></a>
                            <li><a href="#deliver-resize-error"><span class="secno">3.4.6</span> <span class="content">传递调整循环错误</span></a>
                            <li><a href="#calculate-depth-for-node-h"><span class="secno">3.4.7</span> <span class="content">计算节点深度</span></a>
                            <li><a href="#calculate-box-size"><span class="secno">3.4.8</span> <span class="content">根据目标和观察的框计算框大小</span></a>
                        </ol>
                    <li><a href="#lifetime"><span class="secno">3.5</span> <span class="content">ResizeObserver 生命周期</span></a>
                    <li>
                        <a href="#integrations"><span class="secno">3.6</span> <span class="content">外部规范集成</span></a>
                        <ol class="toc">
                            <li><a href="#html-event-loop"><span class="secno">3.6.1</span> <span class="content">HTML 处理模型：事件循环</span></a>
                        </ol>
                </ol>
            <li>
                <a href="#conformance"><span class="secno"></span> <span class="content">符合性</span></a>
                <ol class="toc">
                    <li><a href="#document-conventions"><span class="secno"></span> <span class="content">文档惯例</span></a>
                    <li><a href="#conform-classes"><span class="secno"></span> <span class="content">符合性类别</span></a>
                    <li>
                        <a href="#conform-responsible"><span class="secno"></span> <span class="content">CSS负责任实现要求</span></a>
                        <ol class="toc">
                            <li><a href="#conform-partial"><span class="secno"></span> <span class="content">部分实现</span></a>
                            <li><a href="#conform-future-proofing"><span class="secno"></span> <span class="content">不稳定和专有特性的实现</span></a>
                            <li><a href="#conform-testing"><span class="secno"></span> <span class="content">CR级别特性的实现</span></a>
                        </ol>
                </ol>
            <li>
                <a href="#index"><span class="secno"></span> <span class="content">索引</span></a>
                <ol class="toc">
                    <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">本规范定义的术语</span></a>
                    <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">引用定义的术语</span></a>
                </ol>
            <li>
                <a href="#references"><span class="secno"></span> <span class="content">参考文献</span></a>
                <ol class="toc">
                    <li><a href="#normative"><span class="secno"></span> <span class="content">规范性引用</span></a>
                </ol>
            <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL 索引</span></a>
        </ol>
    </nav>
    <main>
        <h2 class="heading settled" data-level="1" id="intro"><span class="secno">1. </span><span class="content">介绍</span><a class="self-link" href="#intro"></a></h2>
        <p><em>本节是非规范性的。</em></p>
        <p>响应式Web组件需要对<code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element">Element</a></code>的大小变化做出响应。一个例子是一个显示地图的<code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element①">Element</a></code>：</p>
        <ul>
            <li data-md>
                <p>它通过在内容框中铺设<code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element②">Element</a></code>瓦片来显示地图。</p>
            <li data-md>
                <p>当调整大小时，必须重新铺设瓦片。</p>
        </ul>
        <p>响应式Web应用程序已经可以响应<a data-link-type="dfn" href="https://www.w3.org/TR/css3-positioning/#viewport" id="ref-for-viewport">视口</a>大小的变化。
            这可以通过CSS媒体查询或window.<code class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/cssom-view/#eventdef-window-resize" id="ref-for-eventdef-window-resize">resize</a></code>事件来完成。</p>
        <p>ResizeObserver API是一个用于观察Element大小变化的接口。它是Element的对应物，类似于window.<code class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/cssom-view/#eventdef-window-resize" id="ref-for-eventdef-window-resize①">resize</a></code>事件。</p>
        <p>ResizeObserver的通知可用于响应<code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element④">Element</a></code>大小的变化。关于这些观察的一些有趣事实：</p>
        <ul>
            <li data-md>
                <p>当观察的Element插入或从DOM中移除时，将触发观察。</p>
            <li data-md>
                <p>当观察的Element的<a data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#propdef-display" id="ref-for-propdef-display">display</a>被设置为none时，将触发观察。</p>
            <li data-md>
                <p>对于非替换的内联元素，观察不会触发。</p>
            <li data-md>
                <p>CSS变换不会触发观察。</p>
            <li data-md>
                <p>当Element<a href="https://html.spec.whatwg.org/#being-rendered">正在渲染</a>且Element的大小不是0,0时，启动观察时将触发观察。</p>
        </ul>
        <div class="example" id="example-ecce5bcd">
            <a class="self-link" href="#example-ecce5bcd"></a>
            <pre class="highlight"><c- p>&lt;</c-><c- f>canvas</c-> <c- e>id</c-><c- o>=</c-><c- s>"elipse"</c-> <c- e>style</c-><c- o>=</c-><c- s>"display:block"</c-><c- p>>&lt;/</c-><c- f>canvas</c-><c- p>></c->
<c- p>&lt;</c-><c- f>div</c-> <c- e>id</c-><c- o>=</c-><c- s>"menu"</c-> <c- e>style</c-><c- o>=</c-><c- s>"display:block;width:100px"</c-><c- p>></c->
    <c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"hamburger.jpg"</c-> <c- e>style</c-><c- o>=</c-><c- s>"width:24px;height:24px"</c-><c- p>></c->
    <c- p>&lt;</c-><c- f>p</c-> <c- e>class</c-><c- o>=</c-><c- s>"title"</c-><c- p>></c->menu title<c- p>&lt;/</c-><c- f>p</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>div</c-><c- p>></c->
</pre>
            <pre class="highlight"><c- c1>// 响应调整大小时，elipse在canvas内绘制一个椭圆</c->
document<c- p>.</c->querySelector<c- p>(</c-><c- t>'#elipse'</c-><c- p>).</c->handleResize <c- o>=</c-> entry <c- p>=></c-> <c- p>{</c->
    entry<c- p>.</c->target<c- p>.</c->width <c- o>=</c-> entry<c- p>.</c->borderBoxSize<c- p>[</c-><c- mi>0</c-><c- p>].</c->inlineSize<c- p>;</c->
    entry<c- p>.</c->target<c- p>.</c->height <c- o>=</c-> entry<c- p>.</c->borderBoxSize<c- p>[</c-><c- mi>0</c-><c- p>].</c->blockSize<c- p>;</c->
    <c- a>let</c-> rx <c- o>=</c-> Math<c- p>.</c->floor<c- p>(</c->entry<c- p>.</c->target<c- p>.</c->width <c- o>/</c-> <c- mi>2</c-><c- p>);</c->
    <c- a>let</c-> ry <c- o>=</c-> Math<c- p>.</c->floor<c- p>(</c->entry<c- p>.</c->target<c- p>.</c->height <c- o>/</c-> <c- mi>2</c-><c- p>);</c->
    <c- a>let</c-> ctx <c- o>=</c-> entry<c- p>.</c->target<c- p>.</c->getContext<c- p>(</c-><c- t>'2d'</c-><c- p>);</c->
    ctx<c- p>.</c->beginPath<c- p>();</c->
    ctx<c- p>.</c->ellipse<c- p>(</c->rx<c- p>,</c-> ry<c- p>,</c-> rx<c- p>,</c-> ry<c- p>,</c-> <c- mi>0</c-><c- p>,</c-> <c- mi>0</c-><c- p>,</c-> <c- mi>2</c-> <c- o>*</c-> Math<c- p>.</c->PI<c- p>);</c->
    ctx<c- p>.</c->stroke<c- p>();</c->
<c- p>}</c->
<c- c1>// 响应调整大小时，根据宽度更改标题可见性</c->
document<c- p>.</c->querySelector<c- p>(</c-><c- t>'#menu'</c-><c- p>).</c->handleResize <c- o>=</c-> entry <c- p>=></c-> <c- p>{</c->
    <c- a>let</c-> title <c- o>=</c-> entry<c- p>.</c->target<c- p>.</c->querySelector<c- p>(</c-><c- u>".title"</c-><c- p>)</c->
    <c- k>if</c-> <c- p>(</c->entry<c- p>.</c->borderBoxSize<c- p>[</c-><c- mi>0</c-><c- p>].</c->inlineSize <c- o>&lt;</c-> <c- mi>40</c-><c- p>)</c->
        title<c- p>.</c->style<c- p>.</c->display <c- o>=</c-> <c- u>"none"</c-><c- p>;</c->
    <c- k>else</c->
        title<c- p>.</c->style<c- p>.</c->display <c- o>=</c-> <c- u>"inline-block"</c-><c- p>;</c->
<c- p>}</c->

<c- a>var</c-> ro <c- o>=</c-> <c- k>new</c-> ResizeObserver<c- p>(</c-> entries <c- p>=></c-> <c- p>{</c->
  <c- k>for</c-> <c- p>(</c-><c- a>let</c-> entry <c- k>of</c-> entries<c- p>)</c-> <c- p>{</c->
    <c- a>let</c-> cs <c- o>=</c-> window<c- p>.</c->getComputedStyle<c- p>(</c->entry<c- p>.</c->target<c- p>);</c->
    console<c- p>.</c->log<c- p>(</c-><c- t>'观察元素：'</c-><c- p>,</c-> entry<c- p>.</c->target<c- p>);</c->
    console<c- p>.</c->log<c- p>(</c->entry<c- p>.</c->contentRect<c- p>.</c->top<c- p>,</c-><c- t>' 是 '</c-><c- p>,</c-> cs<c- p>.</c->paddingTop<c- p>);</c->
    console<c- p>.</c->log<c- p>(</c->entry<c- p>.</c->contentRect<c- p>.</c->left<c- p>,</c-><c- t>' 是 '</c-><c- p>,</c-> cs<c- p>.</c->paddingLeft<c- p>);</c->
    console<c- p>.</c->log<c- p>(</c->entry<c- p>.</c->borderBoxSize<c- p>[</c-><c- mi>0</c-><c- p>].</c->inlineSize<c- p>,</c-><c- t>' 是 '</c-><c- p>,</c-> cs<c- p>.</c->width<c- p>);</c->
    console<c- p>.</c->log<c- p>(</c->entry<c- p>.</c->borderBoxSize<c- p>[</c-><c- mi>0</c-><c- p>].</c->blockSize<c- p>,</c-><c- t>' 是 '</c-><c- p>,</c-> cs<c- p>.</c->height<c- p>);</c->
    <c- k>if</c-> <c- p>(</c->entry<c- p>.</c->target<c- p>.</c->handleResize<c- p>)</c->
        entry<c- p>.</c->target<c- p>.</c->handleResize<c- p>(</c->entry<c- p>);</c->
  <c- p>}</c->
<c- p>});</c->
ro<c- p>.</c->observe<c- p>(</c->document<c- p>.</c->querySelector<c- p>(</c-><c- t>'#elipse'</c-><c- p>));</c->
ro<c- p>.</c->observe<c- p>(</c->document<c- p>.</c->querySelector<c- p>(</c-><c- t>'#menu'</c-><c- p>));</c->
</pre>
        </div>
        <h2 class="heading settled" data-level="2" id="api"><span class="secno">2. </span><span class="content">调整观察器 API</span><a class="self-link" href="#api"></a></h2>
        <h3 class="heading settled" data-level="2.1" id="resize-observer-interface"><span class="secno">2.1. </span><span class="content">ResizeObserver 接口</span><a class="self-link" href="#resize-observer-interface"></a></h3>
        <p>ResizeObserver 接口用于观察<code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element⑤">Element</a></code>的大小变化。</p>
        <p>它基于<code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#mutationobserver" id="ref-for-mutationobserver">MutationObserver</a></code>和<code class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/intersection-observer/#intersection-observer-interface" id="ref-for-intersection-observer-interface">IntersectionObserver</a></code>。</p>
        <pre class="idl highlight def"><c- b>enum</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="enum" data-export id="enumdef-resizeobserverboxoptions"><code><c- g>ResizeObserverBoxOptions</c-></code></dfn> {
    <dfn class="dfn-paneled idl-code" data-dfn-for="ResizeObserverBoxOptions" data-dfn-type="enum-value" data-export id="dom-resizeobserverboxoptions-border-box"><code><c- s>"border-box"</c-></code></dfn>, <dfn class="dfn-paneled idl-code" data-dfn-for="ResizeObserverBoxOptions" data-dfn-type="enum-value" data-export id="dom-resizeobserverboxoptions-content-box"><code><c- s>"content-box"</c-></code></dfn>, <dfn class="dfn-paneled idl-code" data-dfn-for="ResizeObserverBoxOptions" data-dfn-type="enum-value" data-export id="dom-resizeobserverboxoptions-device-pixel-content-box"><code><c- s>"device-pixel-content-box"</c-></code></dfn>
};
</pre>
        <p>ResizeObserver 可以观察不同类型的CSS大小：</p>
        <ul>
            <li data-md>
                <p><code class="idl"><a data-link-type="idl" href="#dom-resizeobserverboxoptions-border-box" id="ref-for-dom-resizeobserverboxoptions-border-box">border-box</a></code> ：由CSS2定义的<a data-link-type="dfn" href="https://www.w3.org/TR/CSS21/box.html#box-border-area" id="ref-for-box-border-area">边框区域</a>的大小。</p>
            <li data-md>
                <p><code class="idl"><a data-link-type="idl" href="#dom-resizeobserverboxoptions-content-box" id="ref-for-dom-resizeobserverboxoptions-content-box">content-box</a></code> ：由CSS2定义的<a data-link-type="dfn" href="https://drafts.csswg.org/css-box-3/#content-area" id="ref-for-content-area">内容区域</a>的大小。</p>
            <li data-md>
                <p><code class="idl"><a data-link-type="idl" href="#dom-resizeobserverboxoptions-device-pixel-content-box" id="ref-for-dom-resizeobserverboxoptions-device-pixel-content-box">device-pixel-content-box</a></code> ：由CSS2定义的<a data-link-type="dfn" href="https://drafts.csswg.org/css-box-3/#content-area" id="ref-for-content-area①">内容区域</a>的大小，以设备像素表示，且在应用任何CSS变换之前。此大小必须包含整数值。</p>
        </ul>
        <p class="note" role="note"> <code class="idl"><a data-link-type="idl" href="#dom-resizeobserverboxoptions-device-pixel-content-box" id="ref-for-dom-resizeobserverboxoptions-device-pixel-content-box①">device-pixel-content-box</a></code>可以通过将<a data-link-type="dfn" href="https://www.w3.org/TR/cssom-view-1/#dom-window-devicepixelratio" id="ref-for-dom-window-devicepixelratio">devicePixelRatio</a>乘以<code class="idl"><a data-link-type="idl" href="#dom-resizeobserverboxoptions-content-box" id="ref-for-dom-resizeobserverboxoptions-content-box①">content-box</a></code>的大小来近似计算。
            但由于浏览器特定的子像素对齐行为，作者无法确定正确的舍入方式。 UA如何计算元素的设备像素框是依赖于具体实现的。一种可能的实现是将框的大小和位置乘以设备像素比，然后舍入生成的浮点大小和位置，以最大限度地提高渲染输出的质量。</p>
        <p>注意，此大小可能会受到目标位置变化的影响，因此通常比其他大小的观察更昂贵。</p>
        <p></p>
        <pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-resizeobserveroptions"><code><c- g>ResizeObserverOptions</c-></code></dfn> {
    <a class="n" data-link-type="idl-name" href="#enumdef-resizeobserverboxoptions" id="ref-for-enumdef-resizeobserverboxoptions"><c- n>ResizeObserverBoxOptions</c-></a> <dfn class="idl-code" data-default="&quot;content-box&quot;" data-dfn-for="ResizeObserverOptions" data-dfn-type="dict-member" data-export data-type="ResizeObserverBoxOptions " id="dom-resizeobserveroptions-box"><code><c- g>box</c-></code><a class="self-link" href="#dom-resizeobserveroptions-box"></a></dfn> = "content-box";
};
</pre>
        <p>本节是非规范性的。作者可能希望观察多个CSS框。在这种情况下，作者需要使用多个ResizeObserver。</p>
        <pre class="highlight"><c- c1>// 观察 content-box</c->
ro<c- p>.</c->observe<c- p>(</c->document<c- p>.</c->querySelector<c- p>(</c-><c- t>'#menu'</c-><c- p>),</c-> <c- p>{</c-> box<c- o>:</c-> <c- t>'content-box'</c-> <c- p>});</c->

<c- c1>// 仅观察边框框。替换之前的观察。</c->
ro1<c- p>.</c->observe<c- p>(</c->document<c- p>.</c->querySelector<c- p>(</c-><c- t>'#menu'</c-><c- p>),</c-> <c- p>{</c-> box<c- o>:</c-> <c- t>'border-box'</c-> <c- p>});</c->
</pre>
        <p class="note" role="note">这不会影响在事件触发时返回给定义回调的框尺寸，它仅定义作者希望观察布局变化的框。</p>
        <pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed"><c- g>Exposed</c-></a>=(<c- n>Window</c->),
 <a class="idl-code" data-link-type="constructor" href="#dom-resizeobserver-resizeobserver" id="ref-for-dom-resizeobserver-resizeobserver"><c- g>Constructor</c-></a>(<a class="n" data-link-type="idl-name" href="#callbackdef-resizeobservercallback" id="ref-for-callbackdef-resizeobservercallback"><c- n>ResizeObserverCallback</c-></a> <dfn class="idl-code" data-dfn-for="ResizeObserver/ResizeObserver(callback)" data-dfn-type="argument" data-export id="dom-resizeobserver-resizeobserver-callback-callback"><code><c- g>callback</c-></code><a class="self-link" href="#dom-resizeobserver-resizeobserver-callback-callback"></a></dfn>)]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="resizeobserver"><code><c- g>ResizeObserver</c-></code></dfn> {
    <c- b>void</c-> <a class="idl-code" data-link-type="method" href="#dom-resizeobserver-observe" id="ref-for-dom-resizeobserver-observe"><c- g>observe</c-></a>(<a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element" id="ref-for-element⑥"><c- n>Element</c-></a> <dfn class="idl-code" data-dfn-for="ResizeObserver/observe(target, options), ResizeObserver/observe(target)" data-dfn-type="argument" data-export id="dom-resizeobserver-observe-target-options-target"><code><c- g>target</c-></code><a class="self-link" href="#dom-resizeobserver-observe-target-options-target"></a></dfn>, <c- b>optional</c-> <a class="n" data-link-type="idl-name" href="#dictdef-resizeobserveroptions" id="ref-for-dictdef-resizeobserveroptions"><c- n>ResizeObserverOptions</c-></a> <dfn class="idl-code" data-dfn-for="ResizeObserver/observe(target, options), ResizeObserver/observe(target)" data-dfn-type="argument" data-export id="dom-resizeobserver-observe-target-options-options"><code><c- g>options</c-></code><a class="self-link" href="#dom-resizeobserver-observe-target-options-options"></a></dfn>);
    <c- b>void</c-> <a class="idl-code" data-link-type="method" href="#dom-resizeobserver-unobserve" id="ref-for-dom-resizeobserver-unobserve"><c- g>unobserve</c-></a>(<a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element" id="ref-for-element⑦"><c- n>Element</c-></a> <dfn class="idl-code" data-dfn-for="ResizeObserver/unobserve(target)" data-dfn-type="argument" data-export id="dom-resizeobserver-unobserve-target-target"><code><c- g>target</c-></code><a class="self-link" href="#dom-resizeobserver-unobserve-target-target"></a></dfn>);
    <c- b>void</c-> <a class="idl-code" data-link-type="method" href="#dom-resizeobserver-disconnect" id="ref-for-dom-resizeobserver-disconnect"><c- g>disconnect</c-></a>();
};
</pre>
        <div>
            <dl>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="ResizeObserver" data-dfn-type="constructor" data-export data-lt="ResizeObserver(callback)" id="dom-resizeobserver-resizeobserver"><code>new ResizeObserver(callback)</code></dfn>
                <dd data-md>
                    <ol>
                        <li data-md>
                            <p>让 <var>this</var> 成为新的 <code class="idl"><a data-link-type="idl" href="#resizeobserver" id="ref-for-resizeobserver">ResizeObserver</a></code> 对象。</p>
                        <li data-md>
                            <p>将 <var>this</var> 的 <var>callback</var> 内部槽设置为 callback。</p>
                        <li data-md>
                            <p>将 <var>this</var> 的 <var>observationTargets</var> 内部槽设置为空列表。</p>
                        <li data-md>
                            <p>将 <var>this</var> 添加到 <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document">Document</a></code> 的 <var>resizeObservers</var> 槽中。</p>
                    </ol>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="ResizeObserver" data-dfn-type="method" data-export data-lt="observe(target, options)|observe(target)" id="dom-resizeobserver-observe"><code>observe(target, options)</code></dfn>
                <dd data-md>
                    <p>将目标添加到观察元素列表中。</p>
                    <ol>
                        <li data-md>
                            <p>如果 <var>target</var> 已在 <code class="idl"><a data-link-type="idl" href="#dom-resizeobserver-observationtargets" id="ref-for-dom-resizeobserver-observationtargets">observationTargets</a></code> 槽中，调用 unobserve(<var>target</var>)。</p>
                        <li data-md>
                            <p>创建新的 <var>resizeObservation</var>，使用 <code class="idl"><a data-link-type="idl" href="#resizeobservation" id="ref-for-resizeobservation">ResizeObservation</a></code>(<var>target</var>, <var>options</var>)。</p>
                        <li data-md>
                            <p>将 <var>resizeObservation</var> 添加到 <var>observationTargets</var> 槽中。</p>
                    </ol>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="ResizeObserver" data-dfn-type="method" data-export id="dom-resizeobserver-unobserve"><code>unobserve(target)</code></dfn>
                <dd data-md>
                    <p>将 <var>target</var> 从观察元素列表中移除。</p>
                    <ol>
                        <li data-md>
                            <p>在 <code class="idl"><a data-link-type="idl" href="#resizeobservation" id="ref-for-resizeobservation①">ResizeObservation</a></code> 中找到目标为 <var>target</var> 的 <var>observation</var>。</p>
                        <li data-md>
                            <p>如果未找到 <var>observation</var>，则返回。</p>
                        <li data-md>
                            <p>从 <code class="idl"><a data-link-type="idl" href="#dom-resizeobserver-observationtargets" id="ref-for-dom-resizeobserver-observationtargets②">observationTargets</a></code> 中移除 <var>observation</var>。</p>
                    </ol>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="ResizeObserver" data-dfn-type="method" data-export id="dom-resizeobserver-disconnect"><code>disconnect()</code></dfn>
                <dd data-md>
                    <ol>
                        <li data-md>
                            <p>清空 <code class="idl"><a data-link-type="idl" href="#dom-resizeobserver-observationtargets" id="ref-for-dom-resizeobserver-observationtargets③">observationTargets</a></code> 列表。</p>
                        <li data-md>
                            <p>清空 <code class="idl"><a data-link-type="idl" href="#dom-resizeobserver-activetargets" id="ref-for-dom-resizeobserver-activetargets">activeTargets</a></code> 列表。</p>
                    </ol>
            </dl>
        </div>
        <h3 class="heading settled" data-level="2.2" id="resize-observer-callback"><span class="secno">2.2. </span><span class="content">ResizeObserverCallback</span><a class="self-link" href="#resize-observer-callback"></a></h3>
        <pre class="idl highlight def"><c- b>callback</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="callback" data-export id="callbackdef-resizeobservercallback"><code><c- g>ResizeObserverCallback</c-></code></dfn> = <c- b>void</c-> (<c- b>sequence</c->&lt;<a class="n" data-link-type="idl-name" href="#resizeobserverentry" id="ref-for-resizeobserverentry"><c- n>ResizeObserverEntry</c-></a>> <dfn class="idl-code" data-dfn-for="ResizeObserverCallback" data-dfn-type="argument" data-export id="dom-resizeobservercallback-entries"><code><c- g>entries</c-></code><a class="self-link" href="#dom-resizeobservercallback-entries"></a></dfn>, <a class="n" data-link-type="idl-name" href="#resizeobserver" id="ref-for-resizeobserver①"><c- n>ResizeObserver</c-></a> <dfn class="idl-code" data-dfn-for="ResizeObserverCallback" data-dfn-type="argument" data-export id="dom-resizeobservercallback-observer"><code><c- g>observer</c-></code><a class="self-link" href="#dom-resizeobservercallback-observer"></a></dfn>);
</pre>
        <p>此回调传递 <code class="idl"><a data-link-type="idl" href="#resizeobserver" id="ref-for-resizeobserver②">ResizeObserver</a></code> 的通知。它由<a data-link-type="dfn" href="#broadcast-active-observations" id="ref-for-broadcast-active-observations">广播活动观察</a>算法调用。</p>
        <h3 class="heading settled" data-level="2.3" id="resize-observer-entry-interface"><span class="secno">2.3. </span><span class="content">ResizeObserverEntry</span><a class="self-link" href="#resize-observer-entry-interface"></a></h3>
        <pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed①"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="resizeobserverentry"><code><c- g>ResizeObserverEntry</c-></code></dfn> {
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element" id="ref-for-element⑧"><c- n>Element</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="Element" href="#dom-resizeobserverentry-target" id="ref-for-dom-resizeobserverentry-target"><c- g>target</c-></a>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="n" data-link-type="idl-name" href="https://www.w3.org/TR/geometry-1/#domrectreadonly" id="ref-for-domrectreadonly"><c- n>DOMRectReadOnly</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="DOMRectReadOnly" href="#dom-resizeobserverentry-contentrect" id="ref-for-dom-resizeobserverentry-contentrect"><c- g>contentRect</c-></a>;
    <c- b>readonly</c-> <c- b>attribute</c-> <c- b>sequence</c->&lt;<a class="n" data-link-type="idl-name" href="#resizeobserversize" id="ref-for-resizeobserversize"><c- n>ResizeObserverSize</c-></a>> <a class="idl-code" data-link-type="attribute" data-readonly data-type="sequence<ResizeObserverSize>" href="#dom-resizeobserverentry-borderboxsize" id="ref-for-dom-resizeobserverentry-borderboxsize"><c- g>borderBoxSize</c-></a>;
    <c- b>readonly</c-> <c- b>attribute</c-> <c- b>sequence</c->&lt;<a class="n" data-link-type="idl-name" href="#resizeobserversize" id="ref-for-resizeobserversize①"><c- n>ResizeObserverSize</c-></a>> <a class="idl-code" data-link-type="attribute" data-readonly data-type="sequence<ResizeObserverSize>" href="#dom-resizeobserverentry-contentboxsize" id="ref-for-dom-resizeobserverentry-contentboxsize"><c- g>contentBoxSize</c-></a>;
    <c- b>readonly</c-> <c- b>attribute</c-> <c- b>sequence</c->&lt;<a class="n" data-link-type="idl-name" href="#resizeobserversize" id="ref-for-resizeobserversize②"><c- n>ResizeObserverSize</c-></a>> <a class="idl-code" data-link-type="attribute" data-readonly data-type="sequence<ResizeObserverSize>" href="#dom-resizeobserverentry-devicepixelcontentboxsize" id="ref-for-dom-resizeobserverentry-devicepixelcontentboxsize"><c- g>devicePixelContentBoxSize</c-></a>;
};
</pre>
        <p class="note" role="note">contentRect 来源于 ResizeObserver 的孵化阶段，目前仅出于 Web 兼容性原因而包含。它可能在未来的级别中被弃用。</p>
        <div>
            <dl>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="ResizeObserverEntry" data-dfn-type="attribute" data-export id="dom-resizeobserverentry-target"><code>target</code></dfn>, <span> 类型为 <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element" id="ref-for-element⑨">Element</a>，只读</span>
                <dd data-md>
                    <p>大小发生变化的 <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element①⓪">Element</a></code>。</p>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="ResizeObserverEntry" data-dfn-type="attribute" data-export id="dom-resizeobserverentry-contentrect"><code>contentRect</code></dfn>, <span> 类型为 <a data-link-type="idl-name" href="https://www.w3.org/TR/geometry-1/#domrectreadonly" id="ref-for-domrectreadonly①">DOMRectReadOnly</a>，只读</span>
                <dd data-md>
                    <p><code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element①①">Element</a></code> 的 <a data-link-type="dfn" href="#content-rect" id="ref-for-content-rect">内容矩形</a>，在 <code class="idl"><a data-link-type="idl" href="#callbackdef-resizeobservercallback" id="ref-for-callbackdef-resizeobservercallback①">ResizeObserverCallback</a></code> 调用时。</p>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="ResizeObserverEntry" data-dfn-type="attribute" data-export id="dom-resizeobserverentry-borderboxsize"><code>borderBoxSize</code></dfn>, <span> 类型为 sequence&lt;<a data-link-type="idl-name" href="#resizeobserversize" id="ref-for-resizeobserversize③">ResizeObserverSize</a>>，只读</span>
                <dd data-md>
                    <p>包含 <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element①②">Element</a></code> 的 <a data-link-type="dfn" href="https://www.w3.org/TR/css-box-3/#border-box" id="ref-for-border-box">边框盒</a> 大小的序列，在 <code class="idl"><a data-link-type="idl" href="#callbackdef-resizeobservercallback" id="ref-for-callbackdef-resizeobservercallback②">ResizeObserverCallback</a></code> 调用时。</p>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="ResizeObserverEntry" data-dfn-type="attribute" data-export id="dom-resizeobserverentry-contentboxsize"><code>contentBoxSize</code></dfn>, <span> 类型为 sequence&lt;<a data-link-type="idl-name" href="#resizeobserversize" id="ref-for-resizeobserversize④">ResizeObserverSize</a>>，只读</span>
                <dd data-md>
                    <p>包含 <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element①③">Element</a></code> 的 <a data-link-type="dfn" href="#content-rect" id="ref-for-content-rect①">内容矩形</a> 大小的序列，在 <code class="idl"><a data-link-type="idl" href="#callbackdef-resizeobservercallback" id="ref-for-callbackdef-resizeobservercallback③">ResizeObserverCallback</a></code> 调用时。</p>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="ResizeObserverEntry" data-dfn-type="attribute" data-export id="dom-resizeobserverentry-devicepixelcontentboxsize"><code>devicePixelContentBoxSize</code></dfn>, <span> 类型为 sequence&lt;<a data-link-type="idl-name" href="#resizeobserversize" id="ref-for-resizeobserversize⑤">ResizeObserverSize</a>>，只读</span>
                <dd data-md>
                    <p>包含 <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element①④">Element</a></code> 的内容矩形大小的序列，以设备像素为单位，在 <code class="idl"><a data-link-type="idl" href="#callbackdef-resizeobservercallback" id="ref-for-callbackdef-resizeobservercallback④">ResizeObserverCallback</a></code> 调用时。</p>
            </dl>
        </div>
        <p class="note" role="note"> 盒大小属性以序列的形式暴露，以支持具有多个片段的元素，
            这种情况出现在 <a data-link-type="dfn" href="https://www.w3.org/TR/css3-multicol/#">多列</a> 场景中。
            但当前 <a data-link-type="dfn" href="#content-rect" id="ref-for-content-rect③">内容矩形</a> 和 <a data-link-type="dfn" href="https://www.w3.org/TR/css-box-3/#border-box" id="ref-for-border-box①">边框盒</a> 的定义并未提及这些盒在 <span>多列</span> 布局中的影响。
            在本规范中，序列中只会返回一个 ResizeObserverSize，
            该尺寸将对应于第一列的尺寸。
            未来版本的此规范将扩展返回的序列，以包含每个片段的大小信息。 </p>
        <pre class="idl highlight def"><c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="resizeobserversize"><code><c- g>ResizeObserverSize</c-></code></dfn> {
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-unrestricted-double" id="ref-for-idl-unrestricted-double"><c- b>unrestricted</c-> <c- b>double</c-></a> <dfn class="idl-code" data-dfn-for="ResizeObserverSize" data-dfn-type="attribute" data-export data-readonly data-type="unrestricted double" id="dom-resizeobserversize-inlinesize"><code><c- g>inlineSize</c-></code><a class="self-link" href="#dom-resizeobserversize-inlinesize"></a></dfn>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-unrestricted-double" id="ref-for-idl-unrestricted-double①"><c- b>unrestricted</c-> <c- b>double</c-></a> <dfn class="idl-code" data-dfn-for="ResizeObserverSize" data-dfn-type="attribute" data-export data-readonly data-type="unrestricted double" id="dom-resizeobserversize-blocksize"><code><c- g>blockSize</c-></code><a class="self-link" href="#dom-resizeobserversize-blocksize"></a></dfn>;
};
</pre>
        <h2 class="heading settled" data-level="3" id="processing-model"><span class="secno">3. </span><span class="content">处理模型</span><a class="self-link" href="#processing-model"></a></h2>
        <h3 class="heading settled" data-level="3.1" id="resize-observation-interface"><span class="secno">3.1. </span><span class="content">ResizeObservation 示例结构</span><a class="self-link" href="#resize-observation-interface"></a></h3>
        <p class="note" role="note">本节为非规范性内容。ResizeObservation 是一个示例结构体，可以用于实现 Resize Observer。它被包含在此处以帮助在处理模型期间提供清晰的说明。它有效地保存了单个 <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element①⑤">Element</a></code> 的观察信息。此接口对 Javascript 不可见。</p>
        <pre class="idl exclude highlight def">[<dfn class="idl-code" data-dfn-for="ResizeObservation" data-dfn-type="constructor" data-export data-lt="ResizeObservation(target)" id="dom-resizeobservation-resizeobservation"><code><c- g>Constructor</c-></code><a class="self-link" href="#dom-resizeobservation-resizeobservation"></a></dfn>(<a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element" id="ref-for-element①⑥"><c- n>Element</c-></a> <dfn class="idl-code" data-dfn-for="ResizeObservation/ResizeObservation(target)" data-dfn-type="argument" data-export id="dom-resizeobservation-resizeobservation-target-target"><code><c- g>target</c-></code><a class="self-link" href="#dom-resizeobservation-resizeobservation-target-target"></a></dfn>)
]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="resizeobservation"><code><c- g>ResizeObservation</c-></code></dfn> {
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element" id="ref-for-element①⑦"><c- n>Element</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="Element" href="#dom-resizeobservation-target" id="ref-for-dom-resizeobservation-target"><c- g>target</c-></a>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="n" data-link-type="idl-name" href="#enumdef-resizeobserverboxoptions" id="ref-for-enumdef-resizeobserverboxoptions①"><c- n>ResizeObserverBoxOptions</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="ResizeObserverBoxOptions" href="#dom-resizeobservation-observedbox" id="ref-for-dom-resizeobservation-observedbox"><c- g>observedBox</c-></a>;
    <c- b>readonly</c-> <c- b>attribute</c-> <c- b>sequence</c->&lt;<a class="n" data-link-type="idl-name" href="#resizeobserversize" id="ref-for-resizeobserversize⑥"><c- n>ResizeObserverSize</c-></a>> <a class="idl-code" data-link-type="attribute" data-readonly data-type="sequence<ResizeObserverSize>" href="#dom-resizeobservation-lastreportedsizes" id="ref-for-dom-resizeobservation-lastreportedsizes"><c- g>lastReportedSizes</c-></a>;
};
</pre>
        <div>
            <dl>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="ResizeObservation" data-dfn-type="attribute" data-export id="dom-resizeobservation-target"><code>target</code></dfn>, <span> 类型为 <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element" id="ref-for-element①⑧">Element</a>，只读</span>
                <dd data-md>
                    <p>被观察的 <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element①⑨">Element</a></code>。</p>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="ResizeObservation" data-dfn-type="attribute" data-export id="dom-resizeobservation-observedbox"><code>observedBox</code></dfn>, <span> 类型为 <a data-link-type="idl-name" href="#enumdef-resizeobserverboxoptions" id="ref-for-enumdef-resizeobserverboxoptions②">ResizeObserverBoxOptions</a>，只读</span>
                <dd data-md>
                    <p>正在被观察的盒模型。</p>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="ResizeObservation" data-dfn-type="attribute" data-export id="dom-resizeobservation-lastreportedsizes"><code>lastReportedSizes</code></dfn>, <span> 类型为 sequence&lt;<a data-link-type="idl-name" href="#resizeobserversize" id="ref-for-resizeobserversize⑦">ResizeObserverSize</a>>，只读</span>
                <dd data-md>
                    <p>按顺序记录的上次报告的大小。</p>
            </dl>
        </div>
        <div>
            <dl>
                <dt data-md><dfn class="idl-code" data-dfn-for="ResizeObservation" data-dfn-type="constructor" data-export data-lt="ResizeObservation(target, options)" id="dom-resizeobservation-resizeobservation-target-options"><code>new ResizeObservation(target, observedBox)</code><a class="self-link" href="#dom-resizeobservation-resizeobservation-target-options"></a></dfn>
                <dd data-md>
                    <ol>
                        <li data-md>
                            <p>令 <var>this</var> 为一个新的 <code class="idl"><a data-link-type="idl" href="#resizeobservation" id="ref-for-resizeobservation②">ResizeObservation</a></code> 对象</p>
                        <li data-md>
                            <p>将 <var>this</var> 内部的 <code class="idl"><a data-link-type="idl" href="#dom-resizeobservation-target" id="ref-for-dom-resizeobservation-target①">target</a></code> 槽设置为 <var>target</var></p>
                        <li data-md>
                            <p>将 <var>this</var> 内部的 <code class="idl"><a data-link-type="idl" href="#dom-resizeobservation-observedbox" id="ref-for-dom-resizeobservation-observedbox①">observedBox</a></code> 槽设置为 <var>observedBox</var></p>
                        <li data-md>
                            <p>将 <var>this</var> 内部的 <code class="idl"><a data-link-type="idl" href="#dom-resizeobservation-lastreportedsizes" id="ref-for-dom-resizeobservation-lastreportedsizes①">lastReportedSizes</a></code> 槽设置为 [(0,0)]</p>
                    </ol>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="ResizeObservation" data-dfn-type="method" data-export id="dom-resizeobservation-isactive"><code>isActive()</code></dfn>
                <dd data-md>
                    <ol>
                        <li data-md>
                            <p>通过 <a data-link-type="dfn" href="#calculate-box-size①" id="ref-for-calculate-box-size①">计算盒子大小</a> 并根据 <var>target</var> 和 <var>observedBox</var> 设置 <var>currentSize</var>。</p>
                        <li data-md>
                            <p>如果 <var>currentSize</var> 不等于 <code class="idl"><a data-link-type="idl" href="#dom-resizeobservation-lastreportedsizes" id="ref-for-dom-resizeobservation-lastreportedsizes②">lastReportedSizes</a></code> 中的第一个条目，则返回 true。</p>
                        <li data-md>
                            <p>返回 false。</p>
                    </ol>
            </dl>
        </div>
        <h3 class="heading settled" data-level="3.2" id="internal-slot-definitions"><span class="secno">3.2. </span><span class="content">内部槽定义</span><a class="self-link" href="#internal-slot-definitions"></a></h3>
        <h4 class="heading settled" data-level="3.2.1" id="document-slots"><span class="secno">3.2.1. </span><span class="content">文档</span><a class="self-link" href="#document-slots"></a></h4>
        <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document" id="ref-for-concept-document">文档</a> 有一个 <dfn class="dfn-paneled idl-code" data-dfn-for="Document" data-dfn-type="attribute" data-export id="dom-document-resizeobservers"><code>resizeObservers</code></dfn> 槽，它是该文档中 <code class="idl"><a data-link-type="idl" href="#resizeobserver" id="ref-for-resizeobserver③">ResizeObserver</a></code> 的列表。它初始化为空。</p>
        <h4 class="heading settled" data-level="3.2.2" id="resize-observer-slots"><span class="secno">3.2.2. </span><span class="content">ResizeObserver</span><a class="self-link" href="#resize-observer-slots"></a></h4>
        <p><code class="idl"><a data-link-type="idl" href="#resizeobserver" id="ref-for-resizeobserver④">ResizeObserver</a></code> 有一个 <dfn class="dfn-paneled idl-code" data-dfn-for="ResizeObserver" data-dfn-type="attribute" data-export id="dom-resizeobserver-callback"><code>callback</code></dfn> 槽，由构造函数初始化。</p>
        <p><code class="idl"><a data-link-type="idl" href="#resizeobserver" id="ref-for-resizeobserver⑤">ResizeObserver</a></code> 有一个 <dfn class="dfn-paneled idl-code" data-dfn-for="ResizeObserver" data-dfn-type="attribute" data-export id="dom-resizeobserver-observationtargets"><code>observationTargets</code></dfn> 槽，它是 <code class="idl"><a data-link-type="idl" href="#resizeobservation" id="ref-for-resizeobservation③">ResizeObservation</a></code> 的列表。
            它代表所有被观察的元素。</p>
        <p><code class="idl"><a data-link-type="idl" href="#resizeobserver" id="ref-for-resizeobserver⑥">ResizeObserver</a></code> 有一个 <dfn class="dfn-paneled idl-code" data-dfn-for="ResizeObserver" data-dfn-type="attribute" data-export id="dom-resizeobserver-activetargets"><code>activeTargets</code></dfn> 槽，它是 <code class="idl"><a data-link-type="idl" href="#resizeobservation" id="ref-for-resizeobservation④">ResizeObservation</a></code> 的列表。它代表自上次观察广播以来尺寸已更改且符合广播条件的所有元素。</p>
        <p><code class="idl"><a data-link-type="idl" href="#resizeobserver" id="ref-for-resizeobserver⑦">ResizeObserver</a></code> 有一个 <dfn class="dfn-paneled idl-code" data-dfn-for="ResizeObserver" data-dfn-type="attribute" data-export id="dom-resizeobserver-skippedtargets"><code>skippedTargets</code></dfn> 槽，它是 <code class="idl"><a data-link-type="idl" href="#resizeobservation" id="ref-for-resizeobservation⑤">ResizeObservation</a></code> 的列表。它代表自上次观察广播以来尺寸已更改但<strong>不</strong>符合广播条件的所有元素。</p>
        <h3 class="heading settled" data-level="3.3" id="css-definitions"><span class="secno">3.3. </span><span class="content">CSS 定义</span><a class="self-link" href="#css-definitions"></a></h3>
        <h4 class="heading settled" data-level="3.3.1" id="content-rect-h"><span class="secno">3.3.1. </span><span class="content">内容矩形</span><a class="self-link" href="#content-rect-h"></a></h4>
        DOM <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="content-rect">内容矩形</dfn> 是一个矩形，其：
        <ul>
            <li data-md>
                <p>宽度为 <a data-link-type="dfn" href="https://www.w3.org/TR/CSS2/box.html#content-width" id="ref-for-content-width">内容宽度</a></p>
            <li data-md>
                <p>高度为 <a data-link-type="dfn" href="https://www.w3.org/TR/CSS2/box.html#content-height" id="ref-for-content-height">内容高度</a></p>
            <li data-md>
                <p>顶部为 <a data-link-type="dfn" href="https://drafts.csswg.org/css-box-3/#padding-physical" id="ref-for-padding-physical">内边距顶部</a></p>
            <li data-md>
                <p>左侧为 <a data-link-type="dfn" href="https://drafts.csswg.org/css-box-3/#padding-physical" id="ref-for-padding-physical①">内边距左侧</a></p>
        </ul>
        <p><a data-link-type="dfn" href="https://www.w3.org/TR/CSS2/box.html#content-width" id="ref-for-content-width①">内容宽度</a> 规范未提及 <a data-link-type="dfn" href="https://www.w3.org/TR/css3-multicol/#">多列</a> 布局如何影响内容盒。在本规范中，<span>多列</span> 内 <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element②⓪">元素</a></code> 的内容宽度是 <code>getComputedStyle(element).width</code> 的结果。目前，这会计算出第一列的宽度。</p>
        <p>将内容矩形的位置设置为内边距顶部/左侧对于目标子元素的绝对定位很有用。绝对定位坐标空间的原点是内边距矩形的左上角。</p>
        <p>观察内容矩形意味着：</p>
        <ul>
            <li data-md>
                <p>当观察的元素被插入/移除 DOM 时，观察将触发。</p>
            <li data-md>
                <p>当观察的元素显示设置为 none 时，观察将触发。</p>
            <li data-md>
                <p>非替换行内元素将始终有一个空的内容矩形。</p>
            <li data-md>
                <p>观察不会因 CSS 变换而触发。</p>
        </ul>
        <p>Web 内容也可以包含 SVG 元素。SVG 元素定义 <a data-link-type="dfn" href="https://www.w3.org/TR/SVG2/coords.html#BoundingBoxes" id="ref-for-BoundingBoxes">边界框</a> 而不是内容盒。
            <a data-link-type="dfn" href="https://www.w3.org/TR/SVG2/types.html#InterfaceSVGGraphicsElement" id="ref-for-InterfaceSVGGraphicsElement">SVGGraphicsElement</a> 的内容矩形是一个矩形，其：
        </p>
        <ul>
            <li data-md>
                <p>宽度为 <a data-link-type="dfn" href="https://www.w3.org/TR/SVG2/coords.html#BoundingBoxes" id="ref-for-BoundingBoxes①">边界框</a> 宽度</p>
            <li data-md>
                <p>高度为 <a data-link-type="dfn" href="https://www.w3.org/TR/SVG2/coords.html#BoundingBoxes" id="ref-for-BoundingBoxes②">边界框</a> 高度</p>
            <li data-md>
                <p>顶部和左侧为 0</p>
        </ul>
        <h3 class="heading settled" data-level="3.4" id="algorithms"><span class="secno">3.4. </span><span class="content">算法</span><a class="self-link" href="#algorithms"></a></h3>
        <h4 class="heading settled" data-level="3.4.1" id="gather-active-observations-h"><span class="secno">3.4.1. </span><span class="content">按深度收集活动观察</span><a class="self-link" href="#gather-active-observations-h"></a></h4>
        <p>它计算 <var>document</var> 的所有活动观察。要 <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="gather-active-observations-at-depth">按深度收集活动观察</dfn>，请执行以下步骤：</p>
        <ol>
            <li data-md>
                <p>将 <var>depth</var> 设为传入的深度。</p>
            <li data-md>
                <p>对于每个 <var>observer</var> 在 <code class="idl"><a data-link-type="idl" href="#dom-document-resizeobservers" id="ref-for-dom-document-resizeobservers">resizeObservers</a></code> 中运行这些步骤：</p>
                <ol>
                    <li data-md>
                        <p>清除 <var>observer</var> 的 <code class="idl"><a data-link-type="idl" href="#dom-resizeobserver-activetargets" id="ref-for-dom-resizeobserver-activetargets①">activeTargets</a></code> 和 <code class="idl"><a data-link-type="idl" href="#dom-resizeobserver-skippedtargets" id="ref-for-dom-resizeobserver-skippedtargets">skippedTargets</a></code>。</p>
                    <li data-md>
                        <p>对于每个 <var>observation</var> 在 <var>observer</var>.<code class="idl"><a data-link-type="idl" href="#dom-resizeobserver-observationtargets" id="ref-for-dom-resizeobserver-observationtargets④">observationTargets</a></code> 运行此步骤：</p>
                        <ol>
                            <li data-md>
                                <p>如果 <var>observation</var>.<code class="idl"><a data-link-type="idl" href="#dom-resizeobservation-isactive" id="ref-for-dom-resizeobservation-isactive">isActive()</a></code> 为 true</p>
                                <ol>
                                    <li data-md>
                                        <p>将 <var>targetDepth</var> 设为 <a data-link-type="dfn" href="#calculate-depth-for-node" id="ref-for-calculate-depth-for-node">计算节点深度</a> 的结果，针对 <var>observation</var>.<code class="idl"><a data-link-type="idl" href="#dom-resizeobservation-target" id="ref-for-dom-resizeobservation-target②">target</a></code>。</p>
                                    <li data-md>
                                        <p>如果 <var>targetDepth</var> 大于 <var>depth</var>，则将 <var>observation</var> 添加到 <code class="idl"><a data-link-type="idl" href="#dom-resizeobserver-activetargets" id="ref-for-dom-resizeobserver-activetargets②">activeTargets</a></code>。</p>
                                    <li data-md>
                                        <p>否则将 <var>observation</var> 添加到 <code class="idl"><a data-link-type="idl" href="#dom-resizeobserver-skippedtargets" id="ref-for-dom-resizeobserver-skippedtargets①">skippedTargets</a></code>。</p>
                                </ol>
                        </ol>
                </ol>
        </ol>
        <h4 class="heading settled" data-level="3.4.2" id="has-active-observations-h"><span class="secno">3.4.2. </span><span class="content">是否有活动观察</span><a class="self-link" href="#has-active-observations-h"></a></h4>
        <p>要确定 <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document①">Document</a></code> <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="has-active-observations">是否有活动观察</dfn>，请运行以下步骤：</p>
        <ol>
            <li data-md>
                <p>对于每个 <var>observer</var> 在 <code class="idl"><a data-link-type="idl" href="#dom-document-resizeobservers" id="ref-for-dom-document-resizeobservers①">resizeObservers</a></code> 中运行此步骤：</p>
                <ol>
                    <li data-md>
                        <p>如果 <var>observer</var>.<code class="idl"><a data-link-type="idl" href="#dom-resizeobserver-activetargets" id="ref-for-dom-resizeobserver-activetargets③">activeTargets</a></code> 不为空，则返回 true。</p>
                </ol>
            <li data-md>
                <p>返回 false。</p>
        </ol>
        <h4 class="heading settled" data-level="3.4.3" id="has-skipped-observations-h"><span class="secno">3.4.3. </span><span class="content">是否有跳过的观察</span><a class="self-link" href="#has-skipped-observations-h"></a></h4>
        <p>要确定 <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document②">Document</a></code> <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="has-skipped-observations">是否有跳过的观察</dfn>，请运行以下步骤：</p>
        <ol>
            <li data-md>
                <p>对于每个 <var>observer</var> 在 <code class="idl"><a data-link-type="idl" href="#dom-document-resizeobservers" id="ref-for-dom-document-resizeobservers②">resizeObservers</a></code> 中运行此步骤：</p>
                <ol>
                    <li data-md>
                        <p>如果 <var>observer</var>.<code class="idl"><a data-link-type="idl" href="#dom-resizeobserver-skippedtargets" id="ref-for-dom-resizeobserver-skippedtargets②">skippedTargets</a></code> 不为空，则返回 true。</p>
                </ol>
            <li data-md>
                <p>返回 false。</p>
        </ol>
        <h4 class="heading settled" data-level="3.4.4" id="create-and-populate-resizeobserverentry-h"><span class="secno">3.4.4. </span><span class="content"> 创建并填充 ResizeObserverEntry </span><a class="self-link" href="#create-and-populate-resizeobserverentry-h"></a></h4>
        要 <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="create-and-populate-a-resizeobserverentry">创建并填充 ResizeObserverEntry</dfn>，针对给定的 <var>target</var>，请运行以下步骤：
        <ol>
            <li data-md>
                <p>将 <var>this</var> 设为一个新的 <code class="idl"><a data-link-type="idl" href="#resizeobserverentry" id="ref-for-resizeobserverentry①">ResizeObserverEntry</a></code>。</p>
            <li data-md>
                <p>将 <var>this</var>.<code class="idl"><a data-link-type="idl" href="#dom-resizeobserverentry-target" id="ref-for-dom-resizeobserverentry-target①">target</a></code> 槽设置为 <var>target</var>。</p>
            <li data-md>
                <p>将 <var>this</var>.<code class="idl"><a data-link-type="idl" href="#dom-resizeobserverentry-borderboxsize" id="ref-for-dom-resizeobserverentry-borderboxsize①">borderBoxSize</a></code> 槽设置为基于 <a href="#calculate-box-size"> 计算大小，给定 <var>target</var> 和 "border-box" 的 observedBox </a> 的结果。</p>
            <li data-md>
                <p>将 <var>this</var>.<code class="idl"><a data-link-type="idl" href="#dom-resizeobserverentry-contentboxsize" id="ref-for-dom-resizeobserverentry-contentboxsize①">contentBoxSize</a></code> 槽设置为基于 <a href="#calculate-box-size"> 计算大小，给定 <var>target</var> 和 "content-box" 的 observedBox </a> 的结果。</p>
            <li data-md>
                <p>将 <var>this</var>.<code class="idl"><a data-link-type="idl" href="#dom-resizeobserverentry-devicepixelcontentboxsize" id="ref-for-dom-resizeobserverentry-devicepixelcontentboxsize①">devicePixelContentBoxSize</a></code> 槽设置为基于 <a href="#calculate-box-size"> 计算大小，给定 <var>target</var> 和 "device-pixel-content-box" 的 observedBox </a> 的结果。</p>
            <li data-md>
                <p>将 <var>this</var>.<code class="idl"><a data-link-type="idl" href="#dom-resizeobserverentry-contentrect" id="ref-for-dom-resizeobserverentry-contentrect①">contentRect</a></code> 设为逻辑上的 <var>this</var>.<code class="idl"><a data-link-type="idl" href="#dom-resizeobserverentry-contentboxsize" id="ref-for-dom-resizeobserverentry-contentboxsize②">contentBoxSize</a></code>，给定 <var>target</var> 和 "content-box" 的 observedBox。</p>
            <li data-md>
                <p>如果 <var>target</var> 不是 SVG 元素，执行以下步骤：</p>
                <ol>
                    <li data-md>
                        <p>将 <var>this</var>.<var>contentRect</var>.top 设为 <var>target</var>.<a data-link-type="dfn" href="https://drafts.csswg.org/css-box-3/#padding-physical" id="ref-for-padding-physical②">内边距顶部</a>。</p>
                    <li data-md>
                        <p>将 <var>this</var>.<var>contentRect</var>.left 设为 <var>target</var>.<a data-link-type="dfn" href="https://drafts.csswg.org/css-box-3/#padding-physical" id="ref-for-padding-physical③">内边距左侧</a>。</p>
                </ol>
            <li data-md>
                <p>如果 <var>target</var> 是 SVG 元素，执行以下步骤：</p>
                <ol>
                    <li data-md>
                        <p>将 <var>this</var>.<var>contentRect</var>.top 和 <var>this</var>.contentRect.left 设为 0。</p>
                </ol>
        </ol>
        <h4 class="heading settled" data-level="3.4.5" id="broadcast-resize-notifications-h"><span class="secno">3.4.5. </span><span class="content">广播活动观察</span><a class="self-link" href="#broadcast-resize-notifications-h"></a></h4>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="broadcast-active-observations">广播活动观察</dfn> 在文档中传递所有活动观察，并返回最浅广播目标深度。</p>
        <p>要为 <var>document</var> 广播活动观察，请运行以下步骤：</p>
        <ol>
            <li data-md>
                <p>将 <var>shallowestTargetDepth</var> 设为 ∞</p>
            <li data-md>
                <p>对于每个 <var>observer</var> 在 <var>document</var>.<code class="idl"><a data-link-type="idl" href="#dom-document-resizeobservers" id="ref-for-dom-document-resizeobservers③">resizeObservers</a></code> 中运行这些步骤：</p>
                <ol>
                    <li data-md>
                        <p>如果 <var>observer</var>.<code class="idl"><a data-link-type="idl" href="#dom-resizeobserver-activetargets" id="ref-for-dom-resizeobserver-activetargets④">activeTargets</a></code> 槽为空，则继续。</p>
                    <li data-md>
                        <p>将 <var>entries</var> 设为空的 <code class="idl"><a data-link-type="idl" href="#resizeobserverentry" id="ref-for-resizeobserverentry②">ResizeObserverEntry</a></code> 列表。</p>
                    <li data-md>
                        <p>对于每个 <var>observation</var> 在 <code class="idl"><a data-link-type="idl" href="#dom-resizeobserver-activetargets" id="ref-for-dom-resizeobserver-activetargets⑤">activeTargets</a></code> 中，执行以下步骤：</p>
                        <ol>
                            <li data-md>
                                <p>将 <var>entry</var> 设为运行 <a data-link-type="dfn" href="#create-and-populate-a-resizeobserverentry" id="ref-for-create-and-populate-a-resizeobserverentry">创建并填充 ResizeObserverEntry</a> 的结果，针对 <var>observation</var>.<code class="idl"><a data-link-type="idl" href="#dom-resizeobservation-target" id="ref-for-dom-resizeobservation-target③">target</a></code>。</p>
                            <li data-md>
                                <p>将 <var>entry</var> 添加到 <var>entries</var>。</p>
                            <li data-md>
                                <p>将 <var>observation</var>.<code class="idl"><a data-link-type="idl" href="#dom-resizeobservation-lastreportedsizes" id="ref-for-dom-resizeobservation-lastreportedsizes③">lastReportedSizes</a></code> 设为匹配 <var>entry</var> 的大小。</p>
                                <ol>
                                    <li data-md>
                                        <p>匹配的大小是 <var>entry</var>.<code class="idl"><a data-link-type="idl" href="#dom-resizeobserverentry-borderboxsize" id="ref-for-dom-resizeobserverentry-borderboxsize②">borderBoxSize</a></code>，如果 <var>observation</var>.<code class="idl"><a data-link-type="idl" href="#dom-resizeobservation-observedbox" id="ref-for-dom-resizeobservation-observedbox②">observedBox</a></code> 为 "border-box"</p>
                                    <li data-md>
                                        <p>匹配的大小是 <var>entry</var>.<code class="idl"><a data-link-type="idl" href="#dom-resizeobserverentry-contentboxsize" id="ref-for-dom-resizeobserverentry-contentboxsize③">contentBoxSize</a></code>，如果 <var>observation</var>.<code class="idl"><a data-link-type="idl" href="#dom-resizeobservation-observedbox" id="ref-for-dom-resizeobservation-observedbox③">observedBox</a></code> 为 "content-box"</p>
                                    <li data-md>
                                        <p>匹配的大小是 <var>entry</var>.<code class="idl"><a data-link-type="idl" href="#dom-resizeobserverentry-devicepixelcontentboxsize" id="ref-for-dom-resizeobserverentry-devicepixelcontentboxsize②">devicePixelContentBoxSize</a></code>，如果 <var>observation</var>.<code class="idl"><a data-link-type="idl" href="#dom-resizeobservation-observedbox" id="ref-for-dom-resizeobservation-observedbox④">observedBox</a></code> 为 "device-pixel-content-box"</p>
                                </ol>
                            <li data-md>
                                <p>将 <var>targetDepth</var> 设为 <a data-link-type="dfn" href="#calculate-depth-for-node" id="ref-for-calculate-depth-for-node①">计算节点深度</a> 的结果，针对 <var>observation</var>.<code class="idl"><a data-link-type="idl" href="#dom-resizeobservation-target" id="ref-for-dom-resizeobservation-target④">target</a></code>。</p>
                            <li data-md>
                                <p>如果 <var>targetDepth</var> &lt; <var>shallowestTargetDepth</var>，则将 <var>shallowestTargetDepth</var> 设为 <var>targetDepth</var></p>
                        </ol>
                    <li data-md>
                        <p>调用 <var>observer</var>.<code class="idl"><a data-link-type="idl" href="#dom-resizeobserver-callback" id="ref-for-dom-resizeobserver-callback">callback</a></code>，传递 <var>entries</var>。</p>
                    <li data-md>
                        <p>清除 <var>observer</var>.<code class="idl"><a data-link-type="idl" href="#dom-resizeobserver-activetargets" id="ref-for-dom-resizeobserver-activetargets⑥">activeTargets</a></code>。</p>
                </ol>
            <li data-md>
                <p>返回 <var>shallowestTargetDepth</var>。</p>
        </ol>
        <h4 class="heading settled" data-level="3.4.6" id="deliver-resize-error"><span class="secno">3.4.6. </span><span class="content">传递 Resize 循环错误</span><a class="self-link" href="#deliver-resize-error"></a></h4>
        <p>要 <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="deliver-resize-loop-error-notification">传递 Resize 循环错误通知</dfn>，请运行以下步骤：</p>
        <ol>
            <li data-md>
                <p>创建一个新的 <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/webappapis.html#errorevent" id="ref-for-errorevent">ErrorEvent</a></code>。</p>
            <li data-md>
                <p>将 <var>event</var> 的消息槽初始化为 "ResizeObserver 循环完成但未传递通知"。</p>
            <li data-md>
                <p>报告异常 <var>event</var>。</p>
        </ol>
        <h4 class="heading settled" data-level="3.4.7" id="calculate-depth-for-node-h"><span class="secno">3.4.7. </span><span class="content">计算节点深度</span><a class="self-link" href="#calculate-depth-for-node-h"></a></h4>
        <p>要 <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="calculate-depth-for-node">计算节点深度</dfn>，给定 <var>node</var>，请运行以下步骤：</p>
        <ol>
            <li data-md>
                <p>将 <var>p</var> 设为从 <var>node</var> 到此元素的扁平 DOM 树的根元素的父级遍历路径。</p>
            <li data-md>
                <p>返回 <var>p</var> 中的节点数量。</p>
        </ol>
        <h4 class="heading settled" data-level="3.4.8" id="calculate-box-size"><span class="secno">3.4.8. </span><span class="content">计算盒子大小，给定目标和观察盒</span><a class="self-link" href="#calculate-box-size"></a></h4>
        <p>该算法计算 <var>target</var> <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element②①">Element</a></code> 的观察盒大小。盒子的类型由 <code class="idl"><a data-link-type="idl" href="#enumdef-resizeobserverboxoptions" id="ref-for-enumdef-resizeobserverboxoptions③">ResizeObserverBoxOptions</a></code> 描述。
            SVG 元素是一个例外。SVG 的大小始终是其边界框大小，因为 SVG 元素不使用标准 CSS 盒模型。</p>
        <p>要 <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="calculate-box-size①">计算盒子大小</dfn>，给定 <var>target</var> 和 <var>observedBox</var>，请运行以下步骤：</p>
        <ol>
            <li data-md>
                <p>如果 <var>target</var> 是 <code class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/svg2/types.html#InterfaceSVGGraphicsElement" id="ref-for-InterfaceSVGGraphicsElement①">SVGGraphicsElement</a></code></p>
                <ol>
                    <li data-md>
                        <p>将 <var>computedSize</var>.inlineSize 设为 <var>target</var> 的 <a data-link-type="dfn" href="https://www.w3.org/TR/SVG2/coords.html#BoundingBoxes" id="ref-for-BoundingBoxes③">边界框</a> 行内长度。</p>
                    <li data-md>
                        <p>将 <var>computedSize</var>.blockSize 设为 <var>target</var> 的 <a data-link-type="dfn" href="https://www.w3.org/TR/SVG2/coords.html#BoundingBoxes" id="ref-for-BoundingBoxes④">边界框</a> 块长度。</p>
                </ol>
            <li data-md>
                <p>如果 <var>target</var> 不是 <code class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/svg2/types.html#InterfaceSVGGraphicsElement" id="ref-for-InterfaceSVGGraphicsElement②">SVGGraphicsElement</a></code></p>
                <ol>
                    <li data-md>
                        <p>如果 <var>observedBox</var> 是 "border-box"</p>
                        <ol>
                            <li data-md>
                                <p>将 <var>computedSize</var>.inlineSize 设为目标的 <a data-link-type="dfn" href="https://www.w3.org/TR/css-box-3/#border-area" id="ref-for-border-area">边框区域</a> 行内长度。</p>
                            <li data-md>
                                <p>将 <var>computedSize</var>.blockSize 设为目标的 <a data-link-type="dfn" href="https://www.w3.org/TR/css-box-3/#border-area" id="ref-for-border-area①">边框区域</a> 块长度。</p>
                        </ol>
                    <li data-md>
                        <p>如果 <var>observedBox</var> 是 "content-box"</p>
                        <ol>
                            <li data-md>
                                <p>将 <var>computedSize</var>.inlineSize 设为目标的 <a data-link-type="dfn" href="https://drafts.csswg.org/css-box-3/#content-area" id="ref-for-content-area②">内容区域</a> 行内长度。</p>
                            <li data-md>
                                <p>将 <var>computedSize</var>.blockSize 设为目标的 <a data-link-type="dfn" href="https://drafts.csswg.org/css-box-3/#content-area" id="ref-for-content-area③">内容区域</a> 块长度。</p>
                        </ol>
                    <li data-md>
                        <p>如果 <var>observedBox</var> 是 "device-pixel-content-box"</p>
                        <ol>
                            <li data-md>
                                <p>将 <var>computedSize</var>.inlineSize 设为目标的 <a data-link-type="dfn" href="https://drafts.csswg.org/css-box-3/#content-area" id="ref-for-content-area④">内容区域</a> 行内长度，以整设备像素为单位。</p>
                            <li data-md>
                                <p>将 <var>computedSize</var>.blockSize 设为目标的 <a data-link-type="dfn" href="https://drafts.csswg.org/css-box-3/#content-area" id="ref-for-content-area⑤">内容区域</a> 块长度，以整设备像素为单位。</p>
                        </ol>
                    <li data-md>
                        <p>返回 <var>computedSize</var>。</p>
                </ol>
        </ol>
        <h3 class="heading settled" data-level="3.5" id="lifetime"><span class="secno">3.5. </span><span class="content">ResizeObserver 生命周期</span><a class="self-link" href="#lifetime"></a></h3>
        <p><code class="idl"><a data-link-type="idl" href="#resizeobserver" id="ref-for-resizeobserver⑧">ResizeObserver</a></code> 将保持存活，直到满足以下两个条件：</p>
        <ul>
            <li data-md>
                <p>没有对观察者的脚本引用。</p>
            <li data-md>
                <p>观察者没有观察任何目标。</p>
        </ul>
        <h3 class="heading settled" data-level="3.6" id="integrations"><span class="secno">3.6. </span><span class="content">外部规范集成</span><a class="self-link" href="#integrations"></a></h3>
        <h4 class="heading settled" data-level="3.6.1" id="html-event-loop"><span class="secno">3.6.1. </span><span class="content"> HTML 处理模型：事件循环</span><a class="self-link" href="#html-event-loop"></a></h4>
        <p><code class="idl"><a data-link-type="idl" href="#resizeobserver" id="ref-for-resizeobserver⑨">ResizeObserver</a></code> 的处理发生在 <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#processing-model-8" id="ref-for-processing-model-8">HTML 处理模型</a> 事件循环的步骤 7.12 中。</p>
        <p>第 12 步目前的说明为：</p>
        <p><q>对于 docs 中的每个完全活动的文档，更新该文档及其浏览上下文的渲染或用户界面，以反映当前状态。</q></p>
        <p>现有的第 12 步可以详细说明为：</p>
        <p>对于 docs 中的每个完全活动的文档，运行以下步骤以用于该文档及其浏览内容：</p>
        <ol>
            <li data-md>
                <p>重新计算样式</p>
            <li data-md>
                <p>更新布局</p>
            <li data-md>
                <p>绘制</p>
        </ol>
        <p><code class="idl"><a data-link-type="idl" href="#resizeobserver" id="ref-for-resizeobserver①⓪">ResizeObserver</a></code> 通过循环添加调整大小通知来扩展第 12 步，直到没有待处理的通知为止。这可能导致无限循环。</p>
        <p>通过在每次迭代时缩小可以通知的节点集来防止无限循环。在每次迭代中，只有比上一次迭代中最浅节点更深的节点可以发出通知。</p>
        <p>如果通知循环完成并且有未传递的通知，则会生成错误。具有未传递通知的元素将在下一个循环中被考虑进行传递。</p>
        <p>具有 <code class="idl"><a data-link-type="idl" href="#resizeobserver" id="ref-for-resizeobserver①①">ResizeObserver</a></code> 通知的第 12 步为：</p>
        <p>对于 docs 中的每个完全活动的文档，运行以下步骤以用于该文档及其浏览上下文：</p>
        <ol>
            <li data-md>
                <p>重新计算样式</p>
            <li data-md>
                <p>更新布局</p>
            <li data-md>
                <p>设置 <var>depth</var> 为 0</p>
            <li data-md>
                <p><a data-link-type="dfn" href="#gather-active-observations-at-depth" id="ref-for-gather-active-observations-at-depth">按深度收集活动观察</a> <var>depth</var>，针对 <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document③">Document</a></code></p>
            <li data-md>
                <p>当文档 <a data-link-type="dfn" href="#has-active-observations" id="ref-for-has-active-observations">有活动观察</a> 时重复</p>
                <ol start="2">
                    <li data-md>
                        <p>将 <var>depth</var> 设为 <a data-link-type="dfn" href="#broadcast-active-observations" id="ref-for-broadcast-active-observations①">广播活动观察</a> 的结果。</p>
                    <li data-md>
                        <p>重新计算样式</p>
                    <li data-md>
                        <p>更新布局</p>
                    <li data-md>
                        <p><a data-link-type="dfn" href="#gather-active-observations-at-depth" id="ref-for-gather-active-observations-at-depth①">按深度收集活动观察</a> <var>depth</var>，针对 <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document④">Document</a></code></p>
                </ol>
            <li data-md>
                <p>如果 <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document⑤">Document</a></code> <a data-link-type="dfn" href="#has-skipped-observations" id="ref-for-has-skipped-observations">有跳过的观察</a>，则 <a data-link-type="dfn" href="#deliver-resize-loop-error-notification" id="ref-for-deliver-resize-loop-error-notification">传递 Resize 循环错误通知</a></p>
            <li data-md>
                <p>更新 <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document⑥">Document</a></code> 及其浏览上下文的渲染或用户界面，以反映当前状态。</p>
        </ol>
    </main>
    <h2 class="no-ref no-num heading settled" id="conformance"><span class="content"> 规范一致性</span><a class="self-link" href="#conformance"></a></h2>
    <h3 class="heading settled" id="document-conventions"><span class="content"> 文档约定</span><a class="self-link" href="#document-conventions"></a></h3>
    <p>一致性要求通过描述性断言和 RFC 2119 术语的结合表达。规范部分中的关键词“必须”、“禁止”、“需要”、“应”、“不应”、“建议”、“可以”和“可选”应按照 RFC 2119 中的描述进行解释。然而，为了可读性，本规范中这些词并未全部使用大写字母。 </p>
    <p>本规范的所有文字均为规范性内容，除非明确标记为非规范性、示例或注释的部分。<a data-link-type="biblio" href="#biblio-rfc2119">[RFC2119]</a> </p>
    <p>本规范中的示例通过“例如”引入，或与规范性文本分开，使用 <code>class="example"</code>，如下所示： </p>
    <div class="example" id="example-ae2b6bc0">
        <a class="self-link" href="#example-ae2b6bc0"></a>
        <p>这是一个信息性示例的示例。 </p>
    </div>
    <p>信息性注释以“注释”一词开头，并与规范性文本分开，使用 <code>class="note"</code>，如下所示： </p>
    <p class="note" role="note">注释，这是一个信息性注释。 </p>
    <p>建议性部分是规范性部分，旨在引起特别注意，并与其他规范性文本分开，使用 <code>&lt;strong class="advisement"></code>，如下所示： <strong class="advisement"> 用户代理必须提供可访问的替代方案。 </strong> </p>
    <h3 class="heading settled" id="conform-classes"><span class="content"> 规范一致性类别</span><a class="self-link" href="#conform-classes"></a></h3>
    <p>本规范的一致性定义为以下三种一致性类别：</p>
    <dl>
        <dt>样式表
        <dd>一个 <a href="https://www.w3.org/TR/CSS2/conform.html#style-sheet">CSS 样式表</a>。
        <dt>渲染器
        <dd>一个 <a href="https://www.w3.org/TR/CSS2/conform.html#user-agent">用户代理</a>，解释样式表的语义并渲染使用它们的文档。
        <dt>创作工具
        <dd>一个 <a href="https://www.w3.org/TR/CSS2/conform.html#user-agent">用户代理</a>，用于编写样式表。
    </dl>
    <p>如果样式表中使用本模块定义的语法的所有语句都根据通用 CSS 语法和本模块定义的各个特性的语法是有效的，则该样式表符合本规范。</p>
    <p>如果渲染器除了按照相关规范解释样式表之外，还通过正确解析并相应地渲染文档来支持本规范定义的所有特性，则该渲染器符合本规范。但是，用户代理因设备限制无法正确渲染文档的情况并不会使用户代理不符合规范。（例如，用户代理不需要在单色显示器上渲染颜色。）</p>
    <p>如果创作工具编写的样式表在语法上符合通用 CSS 语法以及本模块中每个特性的语法，并满足本模块中描述的样式表的一致性要求，则该创作工具符合本规范。</p>
    <h3 class="heading settled" id="conform-responsible"><span class="content"> 负责任的 CSS 实现要求</span><a class="self-link" href="#conform-responsible"></a></h3>
    <p>以下章节定义了实现 CSS 时负责任的多个一致性要求，以促进当前和未来的互操作性。</p>
    <h4 class="heading settled" id="conform-partial"><span class="content"> 部分实现</span><a class="self-link" href="#conform-partial"></a></h4>
    <p>为了使作者能够利用向前兼容的解析规则分配回退值，<strong>CSS 渲染器<em>必须</em>将其不支持的任何 at-rules、属性、属性值、关键词及其他语法结构视为无效（并<em>适当地忽略</em>它们）</strong>。
        特别是，用户代理<em>不得</em>在单个多值属性声明中选择性地忽略不支持的属性值并仅应用支持的值：如果某个值被视为无效（如不支持的值），则 CSS 要求忽略整个声明。</p>
    <h4 class="heading settled" id="conform-future-proofing"><span class="content"> 实现不稳定和专有特性</span><a class="self-link" href="#conform-future-proofing"></a></h4>
    <p>为了避免与未来稳定的 CSS 特性发生冲突，CSS 工作组建议在实现<a href="https://www.w3.org/TR/CSS/#unstable">不稳定</a>的特性和<a href="https://www.w3.org/TR/CSS/#proprietary-extension">专有扩展</a>时，<a href="https://www.w3.org/TR/CSS/#future-proofing">遵循最佳实践</a>。</p>
    <h4 class="heading settled" id="conform-testing"><span class="content"> 实现 CR 级别特性</span><a class="self-link" href="#conform-testing"></a></h4>
    <p>一旦规范进入候选推荐阶段，实施者应发布任何 CR 级别特性的<a data-link-type="dfn" href="https://www.w3.org/TR/CSS/#vendor-prefix">无前缀</a>实现，前提是他们可以证明该特性已根据规范正确实现，并应避免公开带有前缀的该特性变体。</p>
    <p>为了建立和维护跨实现的 CSS 互操作性，CSS 工作组请求非实验性的 CSS 渲染器在发布无前缀实现之前向 W3C 提交一个实现报告（如有必要，还应提交用于该实现报告的测试用例）。提交给 W3C 的测试用例将由 CSS 工作组进行审核和修正。</p>
    <p>
        有关提交测试用例和实现报告的更多信息，请访问 CSS 工作组网站 <a href="https://www.w3.org/Style/CSS/Test/">https://www.w3.org/Style/CSS/Test/</a>。
        如有疑问，请发送邮件至 <a href="https://lists.w3.org/Archives/Public/public-css-testsuite">public-css-testsuite@w3.org</a> 邮件列表。
        <script src="https://www.w3.org/scripts/TR/2016/fixup.js"></script>
    </p>
    <h2 class="no-num no-ref heading settled" id="index"><span class="content">索引</span><a class="self-link" href="#index"></a></h2>
    <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">本规范定义的术语</span><a class="self-link" href="#index-defined-here"></a></h3>
    <ul class="index">
        <li><a href="#dom-resizeobserver-activetargets">activeTargets</a><span>, 在 §3.2.2 中</span>
        <li><a href="#dom-resizeobserversize-blocksize">blockSize</a><span>, 在 §2.3 中</span>
        <li><a href="#dom-resizeobserverboxoptions-border-box">"border-box"</a><span>, 在 §2.1 中</span>
        <li><a href="#dom-resizeobserverentry-borderboxsize">borderBoxSize</a><span>, 在 §2.3 中</span>
        <li><a href="#dom-resizeobserveroptions-box">box</a><span>, 在 §2.1 中</span>
        <li><a href="#broadcast-active-observations">广播活动观察</a><span>, 在 §3.4.5 中</span>
        <li><a href="#calculate-box-size①">计算盒子大小</a><span>, 在 §3.4.8 中</span>
        <li><a href="#calculate-depth-for-node">计算节点深度</a><span>, 在 §3.4.7 中</span>
        <li><a href="#dom-resizeobserver-callback">callback</a><span>, 在 §3.2.2 中</span>
        <li><a href="#dom-resizeobserverboxoptions-content-box">"content-box"</a><span>, 在 §2.1 中</span>
        <li><a href="#dom-resizeobserverentry-contentboxsize">contentBoxSize</a><span>, 在 §2.3 中</span>
        <li><a href="#content-rect">内容矩形</a><span>, 在 §3.3.1 中</span>
        <li><a href="#dom-resizeobserverentry-contentrect">contentRect</a><span>, 在 §2.3 中</span>
        <li><a href="#create-and-populate-a-resizeobserverentry">创建并填充 ResizeObserverEntry</a><span>, 在 §3.4.4 中</span>
        <li><a href="#deliver-resize-loop-error-notification">传递 Resize 循环错误通知</a><span>, 在 §3.4.6 中</span>
        <li><a href="#dom-resizeobserverboxoptions-device-pixel-content-box">"device-pixel-content-box"</a><span>, 在 §2.1 中</span>
        <li><a href="#dom-resizeobserverentry-devicepixelcontentboxsize">devicePixelContentBoxSize</a><span>, 在 §2.3 中</span>
        <li><a href="#dom-resizeobserver-disconnect">disconnect()</a><span>, 在 §2.1 中</span>
        <li><a href="#gather-active-observations-at-depth">按深度收集活动观察</a><span>, 在 §3.4.1 中</span>
        <li><a href="#has-active-observations">有活动观察</a><span>, 在 §3.4.2 中</span>
        <li><a href="#has-skipped-observations">有跳过的观察</a><span>, 在 §3.4.3 中</span>
        <li><a href="#dom-resizeobserversize-inlinesize">inlineSize</a><span>, 在 §2.3 中</span>
        <li><a href="#dom-resizeobservation-isactive">isActive()</a><span>, 在 §3.1 中</span>
        <li><a href="#dom-resizeobservation-lastreportedsizes">lastReportedSizes</a><span>, 在 §3.1 中</span>
        <li><a href="#dom-resizeobserver-observationtargets">observationTargets</a><span>, 在 §3.2.2 中</span>
        <li><a href="#dom-resizeobservation-observedbox">observedBox</a><span>, 在 §3.1 中</span>
        <li><a href="#dom-resizeobserver-observe">observe(target)</a><span>, 在 §2.1 中</span>
        <li><a href="#dom-resizeobserver-observe">observe(target, options)</a><span>, 在 §2.1 中</span>
        <li><a href="#resizeobservation">ResizeObservation</a><span>, 在 §3.1 中</span>
        <li><a href="#dom-resizeobservation-resizeobservation">ResizeObservation(target)</a><span>, 在 §3.1 中</span>
        <li><a href="#dom-resizeobservation-resizeobservation-target-options">ResizeObservation(target, options)</a><span>, 在 §3.1 中</span>
        <li><a href="#resizeobserver">ResizeObserver</a><span>, 在 §2.1 中</span>
        <li><a href="#enumdef-resizeobserverboxoptions">ResizeObserverBoxOptions</a><span>, 在 §2.1 中</span>
        <li><a href="#dom-resizeobserver-resizeobserver">ResizeObserver(callback)</a><span>, 在 §2.1 中</span>
        <li><a href="#callbackdef-resizeobservercallback">ResizeObserverCallback</a><span>, 在 §2.2 中</span>
        <li><a href="#resizeobserverentry">ResizeObserverEntry</a><span>, 在 §2.3 中</span>
        <li><a href="#dictdef-resizeobserveroptions">ResizeObserverOptions</a><span>, 在 §2.1 中</span>
        <li><a href="#dom-document-resizeobservers">resizeObservers</a><span>, 在 §3.2.1 中</span>
        <li><a href="#resizeobserversize">ResizeObserverSize</a><span>, 在 §2.3 中</span>
        <li><a href="#dom-resizeobserver-skippedtargets">skippedTargets</a><span>, 在 §3.2.2 中</span>
        <li>
            target
            <ul>
                <li><a href="#dom-resizeobservation-target">ResizeObservation 的属性</a><span>, 在 §3.1 中</span>
                <li><a href="#dom-resizeobserverentry-target">ResizeObserverEntry 的属性</a><span>, 在 §2.3 中</span>
            </ul>
        <li><a href="#dom-resizeobserver-unobserve">unobserve(target)</a><span>, 在 §2.1 中</span>
    </ul>
    <aside class="dfn-panel" data-for="term-for-border-area">
        <a href="https://www.w3.org/TR/css-box-3/#border-area">https://www.w3.org/TR/css-box-3/#border-area</a><b>引用于：</b>
        <ul>
            <li><a href="#ref-for-border-area">3.4.8. 计算盒子大小，给定目标和观察盒</a> <a href="#ref-for-border-area①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-border-box">
        <a href="https://www.w3.org/TR/css-box-3/#border-box">https://www.w3.org/TR/css-box-3/#border-box</a><b>引用于：</b>
        <ul>
            <li><a href="#ref-for-border-box">2.3. ResizeObserverEntry</a> <a href="#ref-for-border-box①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-eventdef-window-resize">
        <a href="https://www.w3.org/TR/cssom-view/#eventdef-window-resize">https://www.w3.org/TR/cssom-view/#eventdef-window-resize</a><b>引用于：</b>
        <ul>
            <li><a href="#ref-for-eventdef-window-resize">1. 介绍</a> <a href="#ref-for-eventdef-window-resize①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-document">
        <a href="https://dom.spec.whatwg.org/#document">https://dom.spec.whatwg.org/#document</a><b>引用于：</b>
        <ul>
            <li><a href="#ref-for-document">2.1. ResizeObserver 接口</a>
            <li><a href="#ref-for-document①">3.4.2. 是否有活动观察</a>
            <li><a href="#ref-for-document②">3.4.3. 是否有跳过的观察</a>
            <li><a href="#ref-for-document③">3.6.1. HTML 处理模型：事件循环</a> <a href="#ref-for-document④">(2)</a> <a href="#ref-for-document⑤">(3)</a> <a href="#ref-for-document⑥">(4)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-element">
        <a href="https://dom.spec.whatwg.org/#element">https://dom.spec.whatwg.org/#element</a><b>引用于：</b>
        <ul>
            <li><a href="#ref-for-element">1. 介绍</a> <a href="#ref-for-element①">(2)</a> <a href="#ref-for-element②">(3)</a> <a href="#ref-for-element③">(4)</a> <a href="#ref-for-element④">(5)</a>
            <li><a href="#ref-for-element⑤">2.1. ResizeObserver 接口</a> <a href="#ref-for-element⑥">(2)</a> <a href="#ref-for-element⑦">(3)</a>
            <li><a href="#ref-for-element⑧">2.3. ResizeObserverEntry</a> <a href="#ref-for-element⑨">(2)</a> <a href="#ref-for-element①⓪">(3)</a> <a href="#ref-for-element①①">(4)</a> <a href="#ref-for-element①②">(5)</a> <a href="#ref-for-element①③">(6)</a> <a href="#ref-for-element①④">(7)</a>
            <li><a href="#ref-for-element①⑤">3.1. ResizeObservation 示例结构</a> <a href="#ref-for-element①⑥">(2)</a> <a href="#ref-for-element①⑦">(3)</a> <a href="#ref-for-element①⑧">(4)</a> <a href="#ref-for-element①⑨">(5)</a>
            <li><a href="#ref-for-element②⓪">3.3.1. 内容矩形</a>
            <li><a href="#ref-for-element②①">3.4.8. 计算盒子大小，给定目标和观察盒</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-mutationobserver">
        <a href="https://dom.spec.whatwg.org/#mutationobserver">https://dom.spec.whatwg.org/#mutationobserver</a><b>引用于：</b>
        <ul>
            <li><a href="#ref-for-mutationobserver">2.1. ResizeObserver 接口</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-document">
        <a href="https://dom.spec.whatwg.org/#concept-document">https://dom.spec.whatwg.org/#concept-document</a><b>引用于：</b>
        <ul>
            <li><a href="#ref-for-concept-document">3.2.1. 文档</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-domrectreadonly">
        <a href="https://www.w3.org/TR/geometry-1/#domrectreadonly">https://www.w3.org/TR/geometry-1/#domrectreadonly</a><b>引用于：</b>
        <ul>
            <li><a href="#ref-for-domrectreadonly">2.3. ResizeObserverEntry</a> <a href="#ref-for-domrectreadonly①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-errorevent">
        <a href="https://html.spec.whatwg.org/multipage/webappapis.html#errorevent">https://html.spec.whatwg.org/multipage/webappapis.html#errorevent</a><b>引用于：</b>
        <ul>
            <li><a href="#ref-for-errorevent">3.4.6. 传递 Resize 循环错误</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-InterfaceSVGGraphicsElement">
        <a href="https://www.w3.org/TR/svg2/types.html#InterfaceSVGGraphicsElement">https://www.w3.org/TR/svg2/types.html#InterfaceSVGGraphicsElement</a><b>引用于：</b>
        <ul>
            <li><a href="#ref-for-InterfaceSVGGraphicsElement①">3.4.8. 计算盒子大小，给定目标和观察盒</a> <a href="#ref-for-InterfaceSVGGraphicsElement②">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-Exposed">
        <a href="https://heycam.github.io/webidl/#Exposed">https://heycam.github.io/webidl/#Exposed</a><b>引用于：</b>
        <ul>
            <li><a href="#ref-for-Exposed">2.1. ResizeObserver 接口</a>
            <li><a href="#ref-for-Exposed①">2.3. ResizeObserverEntry</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-idl-unrestricted-double">
        <a href="https://heycam.github.io/webidl/#idl-unrestricted-double">https://heycam.github.io/webidl/#idl-unrestricted-double</a><b>引用于：</b>
        <ul>
            <li><a href="#ref-for-idl-unrestricted-double">2.3. ResizeObserverEntry</a> <a href="#ref-for-idl-unrestricted-double①">(2)</a>
        </ul>
    </aside>
    <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">引用定义的术语</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
    <ul class="index">
        <li>
            <a data-link-type="biblio">[css-box-3]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-border-area" style="color:initial">border area</span>
                <li><span class="dfn-paneled" id="term-for-border-box" style="color:initial">border box</span>
            </ul>
        <li>
            <a data-link-type="biblio">[cssom-view-1]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-eventdef-window-resize" style="color:initial">resize</span>
            </ul>
        <li>
            <a data-link-type="biblio">[DOM]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-document" style="color:initial">Document</span>
                <li><span class="dfn-paneled" id="term-for-element" style="color:initial">Element</span>
                <li><span class="dfn-paneled" id="term-for-mutationobserver" style="color:initial">MutationObserver</span>
                <li><span class="dfn-paneled" id="term-for-concept-document" style="color:initial">document</span>
            </ul>
        <li>
            <a data-link-type="biblio">[geometry-1]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-domrectreadonly" style="color:initial">DOMRectReadOnly</span>
            </ul>
        <li>
            <a data-link-type="biblio">[HTML]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-errorevent" style="color:initial">ErrorEvent</span>
            </ul>
        <li>
            <a data-link-type="biblio">[SVG2]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-InterfaceSVGGraphicsElement" style="color:initial">SVGGraphicsElement</span>
            </ul>
        <li>
            <a data-link-type="biblio">[WebIDL]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-Exposed" style="color:initial">Exposed</span>
                <li><span class="dfn-paneled" id="term-for-idl-unrestricted-double" style="color:initial">unrestricted double</span>
            </ul>
    </ul>
    <h2 class="no-num no-ref heading settled" id="references"><span class="content">参考文献</span><a class="self-link" href="#references"></a></h2>
    <h3 class="no-num no-ref heading settled" id="normative"><span class="content">规范性引用</span><a class="self-link" href="#normative"></a></h3>
    <dl>
        <dt id="biblio-css-box-3">[CSS-BOX-3]
        <dd>Elika Etemad. <a href="https://www.w3.org/TR/css-box-3/">CSS Box Model Module Level 3</a>. 2018年12月18日. WD. URL: <a href="https://www.w3.org/TR/css-box-3/">https://www.w3.org/TR/css-box-3/</a>
        <dt id="biblio-cssom-view-1">[CSSOM-VIEW-1]
        <dd>Simon Pieters. <a href="https://www.w3.org/TR/cssom-view-1/">CSSOM View Module</a>. 2016年3月17日. WD. URL: <a href="https://www.w3.org/TR/cssom-view-1/">https://www.w3.org/TR/cssom-view-1/</a>
        <dt id="biblio-dom">[DOM]
        <dd>Anne van Kesteren. <a href="https://dom.spec.whatwg.org/">DOM 标准</a>. 现行标准. URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
        <dt id="biblio-geometry-1">[GEOMETRY-1]
        <dd>Simon Pieters; Chris Harrelson. <a href="https://www.w3.org/TR/geometry-1/">几何接口模块一级</a>. 2018年12月4日. CR. URL: <a href="https://www.w3.org/TR/geometry-1/">https://www.w3.org/TR/geometry-1/</a>
        <dt id="biblio-html">[HTML]
        <dd>Anne van Kesteren 等. <a href="https://html.spec.whatwg.org/multipage/">HTML 标准</a>. 现行标准. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
        <dt id="biblio-rfc2119">[RFC2119]
        <dd>S. Bradner. <a href="https://tools.ietf.org/html/rfc2119">在RFC中用于指示要求级别的关键词</a>. 1997年3月. 最佳当前实践. URL: <a href="https://tools.ietf.org/html/rfc2119">https://tools.ietf.org/html/rfc2119</a>
        <dt id="biblio-svg2">[SVG2]
        <dd>Amelia Bellamy-Royds 等. <a href="https://www.w3.org/TR/SVG2/">可扩展矢量图形 (SVG) 2</a>. 2018年10月4日. CR. URL: <a href="https://www.w3.org/TR/SVG2/">https://www.w3.org/TR/SVG2/</a>
        <dt id="biblio-webidl">[WebIDL]
        <dd>Boris Zbarsky. <a href="https://heycam.github.io/webidl/">Web IDL</a>. 2016年12月15日. ED. URL: <a href="https://heycam.github.io/webidl/">https://heycam.github.io/webidl/</a>
    </dl>
    <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL 索引</span><a class="self-link" href="#idl-index"></a></h2>
    <pre class="idl highlight def"><c- b>enum</c-> <a href="#enumdef-resizeobserverboxoptions"><code><c- g>ResizeObserverBoxOptions</c-></code></a> {
    <a href="#dom-resizeobserverboxoptions-border-box"><code><c- s>"border-box"</c-></code></a>, <a href="#dom-resizeobserverboxoptions-content-box"><code><c- s>"content-box"</c-></code></a>, <a href="#dom-resizeobserverboxoptions-device-pixel-content-box"><code><c- s>"device-pixel-content-box"</c-></code></a>
};

<c- b>dictionary</c-> <a href="#dictdef-resizeobserveroptions"><code><c- g>ResizeObserverOptions</c-></code></a> {
    <a class="n" data-link-type="idl-name" href="#enumdef-resizeobserverboxoptions" id="ref-for-enumdef-resizeobserverboxoptions④"><c- n>ResizeObserverBoxOptions</c-></a> <a data-default="&quot;content-box&quot;" data-type="ResizeObserverBoxOptions " href="#dom-resizeobserveroptions-box"><code><c- g>box</c-></code></a> = "content-box";
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed②"><c- g>Exposed</c-></a>=(<c- n>Window</c->),
 <a class="idl-code" data-link-type="constructor" href="#dom-resizeobserver-resizeobserver" id="ref-for-dom-resizeobserver-resizeobserver①"><c- g>Constructor</c-></a>(<a class="n" data-link-type="idl-name" href="#callbackdef-resizeobservercallback" id="ref-for-callbackdef-resizeobservercallback⑤"><c- n>ResizeObserverCallback</c-></a> <a href="#dom-resizeobserver-resizeobserver-callback-callback"><code><c- g>callback</c-></code></a>)]
<c- b>interface</c-> <a href="#resizeobserver"><code><c- g>ResizeObserver</c-></code></a> {
    <c- b>void</c-> <a class="idl-code" data-link-type="method" href="#dom-resizeobserver-observe" id="ref-for-dom-resizeobserver-observe①"><c- g>observe</c-></a>(<a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element" id="ref-for-element⑥①"><c- n>Element</c-></a> <a href="#dom-resizeobserver-observe-target-options-target"><code><c- g>target</c-></code></a>, <c- b>optional</c-> <a class="n" data-link-type="idl-name" href="#dictdef-resizeobserveroptions" id="ref-for-dictdef-resizeobserveroptions①"><c- n>ResizeObserverOptions</c-></a> <a href="#dom-resizeobserver-observe-target-options-options"><code><c- g>options</c-></code></a>);
    <c- b>void</c-> <a class="idl-code" data-link-type="method" href="#dom-resizeobserver-unobserve" id="ref-for-dom-resizeobserver-unobserve①"><c- g>unobserve</c-></a>(<a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element" id="ref-for-element⑦①"><c- n>Element</c-></a> <a href="#dom-resizeobserver-unobserve-target-target"><code><c- g>target</c-></code></a>);
    <c- b>void</c-> <a class="idl-code" data-link-type="method" href="#dom-resizeobserver-disconnect" id="ref-for-dom-resizeobserver-disconnect①"><c- g>disconnect</c-></a>();
};

<c- b>callback</c-> <a href="#callbackdef-resizeobservercallback"><code><c- g>ResizeObserverCallback</c-></code></a> = <c- b>void</c-> (<c- b>sequence</c->&lt;<a class="n" data-link-type="idl-name" href="#resizeobserverentry" id="ref-for-resizeobserverentry③"><c- n>ResizeObserverEntry</c-></a>> <a href="#dom-resizeobservercallback-entries"><code><c- g>entries</c-></code></a>, <a class="n" data-link-type="idl-name" href="#resizeobserver" id="ref-for-resizeobserver①②"><c- n>ResizeObserver</c-></a> <a href="#dom-resizeobservercallback-observer"><code><c- g>observer</c-></code></a>);

[<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed①①"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <a href="#resizeobserverentry"><code><c- g>ResizeObserverEntry</c-></code></a> {
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element" id="ref-for-element⑧①"><c- n>Element</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="Element" href="#dom-resizeobserverentry-target" id="ref-for-dom-resizeobserverentry-target②"><c- g>target</c-></a>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="n" data-link-type="idl-name" href="https://www.w3.org/TR/geometry-1/#domrectreadonly" id="ref-for-domrectreadonly②"><c- n>DOMRectReadOnly</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="DOMRectReadOnly" href="#dom-resizeobserverentry-contentrect" id="ref-for-dom-resizeobserverentry-contentrect②"><c- g>contentRect</c-></a>;
    <c- b>readonly</c-> <c- b>attribute</c-> <c- b>sequence</c->&lt;<a class="n" data-link-type="idl-name" href="#resizeobserversize" id="ref-for-resizeobserversize⑧"><c- n>ResizeObserverSize</c-></a>> <a class="idl-code" data-link-type="attribute" data-readonly data-type="sequence<ResizeObserverSize>" href="#dom-resizeobserverentry-borderboxsize" id="ref-for-dom-resizeobserverentry-borderboxsize③"><c- g>borderBoxSize</c-></a>;
    <c- b>readonly</c-> <c- b>attribute</c-> <c- b>sequence</c->&lt;<a class="n" data-link-type="idl-name" href="#resizeobserversize" id="ref-for-resizeobserversize①①"><c- n>ResizeObserverSize</c-></a>> <a class="idl-code" data-link-type="attribute" data-readonly data-type="sequence<ResizeObserverSize>" href="#dom-resizeobserverentry-contentboxsize" id="ref-for-dom-resizeobserverentry-contentboxsize④"><c- g>contentBoxSize</c-></a>;
    <c- b>readonly</c-> <c- b>attribute</c-> <c- b>sequence</c->&lt;<a class="n" data-link-type="idl-name" href="#resizeobserversize" id="ref-for-resizeobserversize②①"><c- n>ResizeObserverSize</c-></a>> <a class="idl-code" data-link-type="attribute" data-readonly data-type="sequence<ResizeObserverSize>" href="#dom-resizeobserverentry-devicepixelcontentboxsize" id="ref-for-dom-resizeobserverentry-devicepixelcontentboxsize③"><c- g>devicePixelContentBoxSize</c-></a>;
};

<c- b>interface</c-> <a href="#resizeobserversize"><code><c- g>ResizeObserverSize</c-></code></a> {
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-unrestricted-double" id="ref-for-idl-unrestricted-double②"><c- b>unrestricted</c-> <c- b>double</c-></a> <a data-readonly data-type="unrestricted double" href="#dom-resizeobserversize-inlinesize"><code><c- g>inlineSize</c-></code></a>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-unrestricted-double" id="ref-for-idl-unrestricted-double①①"><c- b>unrestricted</c-> <c- b>double</c-></a> <a data-readonly data-type="unrestricted double" href="#dom-resizeobserversize-blocksize"><code><c- g>blockSize</c-></code></a>;
};

[<a href="#dom-resizeobservation-resizeobservation"><code><c- g>Constructor</c-></code></a>(<a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element" id="ref-for-element①⑥①"><c- n>Element</c-></a> <a href="#dom-resizeobservation-resizeobservation-target-target"><code><c- g>target</c-></code></a>)
]
<c- b>interface</c-> <a href="#resizeobservation"><code><c- g>ResizeObservation</c-></code></a> {
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element" id="ref-for-element①⑦①"><c- n>Element</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="Element" href="#dom-resizeobservation-target" id="ref-for-dom-resizeobservation-target⑤"><c- g>target</c-></a>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="n" data-link-type="idl-name" href="#enumdef-resizeobserverboxoptions" id="ref-for-enumdef-resizeobserverboxoptions①①"><c- n>ResizeObserverBoxOptions</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="ResizeObserverBoxOptions" href="#dom-resizeobservation-observedbox" id="ref-for-dom-resizeobservation-observedbox⑤"><c- g>observedBox</c-></a>;
    <c- b>readonly</c-> <c- b>attribute</c-> <c- b>sequence</c->&lt;<a class="n" data-link-type="idl-name" href="#resizeobserversize" id="ref-for-resizeobserversize⑥①"><c- n>ResizeObserverSize</c-></a>> <a class="idl-code" data-link-type="attribute" data-readonly data-type="sequence<ResizeObserverSize>" href="#dom-resizeobservation-lastreportedsizes" id="ref-for-dom-resizeobservation-lastreportedsizes④"><c- g>lastReportedSizes</c-></a>;
};

</pre>
    <aside class="dfn-panel" data-for="enumdef-resizeobserverboxoptions">
        <b><a href="#enumdef-resizeobserverboxoptions">#enumdef-resizeobserverboxoptions</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-enumdef-resizeobserverboxoptions">2.1. ResizeObserver interface</a>
            <li><a href="#ref-for-enumdef-resizeobserverboxoptions①">3.1. ResizeObservation example struct</a> <a href="#ref-for-enumdef-resizeobserverboxoptions②">(2)</a>
            <li><a href="#ref-for-enumdef-resizeobserverboxoptions③">3.4.8. Calculate box size, given target and observed box</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-resizeobserverboxoptions-border-box">
        <b><a href="#dom-resizeobserverboxoptions-border-box">#dom-resizeobserverboxoptions-border-box</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-resizeobserverboxoptions-border-box">2.1. ResizeObserver interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-resizeobserverboxoptions-content-box">
        <b><a href="#dom-resizeobserverboxoptions-content-box">#dom-resizeobserverboxoptions-content-box</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-resizeobserverboxoptions-content-box">2.1. ResizeObserver interface</a> <a href="#ref-for-dom-resizeobserverboxoptions-content-box①">(2)</a> <a href="#ref-for-dom-resizeobserverboxoptions-content-box②">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-resizeobserverboxoptions-device-pixel-content-box">
        <b><a href="#dom-resizeobserverboxoptions-device-pixel-content-box">#dom-resizeobserverboxoptions-device-pixel-content-box</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-resizeobserverboxoptions-device-pixel-content-box">2.1. ResizeObserver interface</a> <a href="#ref-for-dom-resizeobserverboxoptions-device-pixel-content-box①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dictdef-resizeobserveroptions">
        <b><a href="#dictdef-resizeobserveroptions">#dictdef-resizeobserveroptions</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dictdef-resizeobserveroptions">2.1. ResizeObserver interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="resizeobserver">
        <b><a href="#resizeobserver">#resizeobserver</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-resizeobserver">2.1. ResizeObserver interface</a>
            <li><a href="#ref-for-resizeobserver①">2.2. ResizeObserverCallback</a> <a href="#ref-for-resizeobserver②">(2)</a>
            <li><a href="#ref-for-resizeobserver③">3.2.1. Document</a>
            <li><a href="#ref-for-resizeobserver④">3.2.2. ResizeObserver</a> <a href="#ref-for-resizeobserver⑤">(2)</a> <a href="#ref-for-resizeobserver⑥">(3)</a> <a href="#ref-for-resizeobserver⑦">(4)</a>
            <li><a href="#ref-for-resizeobserver⑧">3.5. ResizeObserver Lifetime</a>
            <li><a href="#ref-for-resizeobserver⑨">3.6.1. HTML Processing Model: Event Loop</a> <a href="#ref-for-resizeobserver①⓪">(2)</a> <a href="#ref-for-resizeobserver①①">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-resizeobserver-resizeobserver">
        <b><a href="#dom-resizeobserver-resizeobserver">#dom-resizeobserver-resizeobserver</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-resizeobserver-resizeobserver">2.1. ResizeObserver interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-resizeobserver-observe">
        <b><a href="#dom-resizeobserver-observe">#dom-resizeobserver-observe</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-resizeobserver-observe">2.1. ResizeObserver interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-resizeobserver-unobserve">
        <b><a href="#dom-resizeobserver-unobserve">#dom-resizeobserver-unobserve</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-resizeobserver-unobserve">2.1. ResizeObserver interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-resizeobserver-disconnect">
        <b><a href="#dom-resizeobserver-disconnect">#dom-resizeobserver-disconnect</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-resizeobserver-disconnect">2.1. ResizeObserver interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="callbackdef-resizeobservercallback">
        <b><a href="#callbackdef-resizeobservercallback">#callbackdef-resizeobservercallback</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-callbackdef-resizeobservercallback">2.1. ResizeObserver interface</a>
            <li><a href="#ref-for-callbackdef-resizeobservercallback①">2.3. ResizeObserverEntry</a> <a href="#ref-for-callbackdef-resizeobservercallback②">(2)</a> <a href="#ref-for-callbackdef-resizeobservercallback③">(3)</a> <a href="#ref-for-callbackdef-resizeobservercallback④">(4)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="resizeobserverentry">
        <b><a href="#resizeobserverentry">#resizeobserverentry</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-resizeobserverentry">2.2. ResizeObserverCallback</a>
            <li><a href="#ref-for-resizeobserverentry①">3.4.4.
                    Create and populate a ResizeObserverEntry </a>
            <li><a href="#ref-for-resizeobserverentry②">3.4.5. Broadcast active observations</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-resizeobserverentry-target">
        <b><a href="#dom-resizeobserverentry-target">#dom-resizeobserverentry-target</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-resizeobserverentry-target">2.3. ResizeObserverEntry</a>
            <li><a href="#ref-for-dom-resizeobserverentry-target①">3.4.4.
                    Create and populate a ResizeObserverEntry </a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-resizeobserverentry-contentrect">
        <b><a href="#dom-resizeobserverentry-contentrect">#dom-resizeobserverentry-contentrect</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-resizeobserverentry-contentrect">2.3. ResizeObserverEntry</a>
            <li><a href="#ref-for-dom-resizeobserverentry-contentrect①">3.4.4.
                    Create and populate a ResizeObserverEntry </a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-resizeobserverentry-borderboxsize">
        <b><a href="#dom-resizeobserverentry-borderboxsize">#dom-resizeobserverentry-borderboxsize</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-resizeobserverentry-borderboxsize">2.3. ResizeObserverEntry</a>
            <li><a href="#ref-for-dom-resizeobserverentry-borderboxsize①">3.4.4.
                    Create and populate a ResizeObserverEntry </a>
            <li><a href="#ref-for-dom-resizeobserverentry-borderboxsize②">3.4.5. Broadcast active observations</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-resizeobserverentry-contentboxsize">
        <b><a href="#dom-resizeobserverentry-contentboxsize">#dom-resizeobserverentry-contentboxsize</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-resizeobserverentry-contentboxsize">2.3. ResizeObserverEntry</a>
            <li><a href="#ref-for-dom-resizeobserverentry-contentboxsize①">3.4.4.
                    Create and populate a ResizeObserverEntry </a> <a href="#ref-for-dom-resizeobserverentry-contentboxsize②">(2)</a>
            <li><a href="#ref-for-dom-resizeobserverentry-contentboxsize③">3.4.5. Broadcast active observations</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-resizeobserverentry-devicepixelcontentboxsize">
        <b><a href="#dom-resizeobserverentry-devicepixelcontentboxsize">#dom-resizeobserverentry-devicepixelcontentboxsize</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-resizeobserverentry-devicepixelcontentboxsize">2.3. ResizeObserverEntry</a>
            <li><a href="#ref-for-dom-resizeobserverentry-devicepixelcontentboxsize①">3.4.4.
                    Create and populate a ResizeObserverEntry </a>
            <li><a href="#ref-for-dom-resizeobserverentry-devicepixelcontentboxsize②">3.4.5. Broadcast active observations</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="resizeobserversize">
        <b><a href="#resizeobserversize">#resizeobserversize</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-resizeobserversize">2.3. ResizeObserverEntry</a> <a href="#ref-for-resizeobserversize①">(2)</a> <a href="#ref-for-resizeobserversize②">(3)</a> <a href="#ref-for-resizeobserversize③">(4)</a> <a href="#ref-for-resizeobserversize④">(5)</a> <a href="#ref-for-resizeobserversize⑤">(6)</a>
            <li><a href="#ref-for-resizeobserversize⑥">3.1. ResizeObservation example struct</a> <a href="#ref-for-resizeobserversize⑦">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="resizeobservation">
        <b><a href="#resizeobservation">#resizeobservation</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-resizeobservation">2.1. ResizeObserver interface</a> <a href="#ref-for-resizeobservation①">(2)</a>
            <li><a href="#ref-for-resizeobservation②">3.1. ResizeObservation example struct</a>
            <li><a href="#ref-for-resizeobservation③">3.2.2. ResizeObserver</a> <a href="#ref-for-resizeobservation④">(2)</a> <a href="#ref-for-resizeobservation⑤">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-resizeobservation-target">
        <b><a href="#dom-resizeobservation-target">#dom-resizeobservation-target</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-resizeobservation-target">3.1. ResizeObservation example struct</a> <a href="#ref-for-dom-resizeobservation-target①">(2)</a>
            <li><a href="#ref-for-dom-resizeobservation-target②">3.4.1. Gather active observations at depth</a>
            <li><a href="#ref-for-dom-resizeobservation-target③">3.4.5. Broadcast active observations</a> <a href="#ref-for-dom-resizeobservation-target④">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-resizeobservation-observedbox">
        <b><a href="#dom-resizeobservation-observedbox">#dom-resizeobservation-observedbox</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-resizeobservation-observedbox">3.1. ResizeObservation example struct</a> <a href="#ref-for-dom-resizeobservation-observedbox①">(2)</a>
            <li><a href="#ref-for-dom-resizeobservation-observedbox②">3.4.5. Broadcast active observations</a> <a href="#ref-for-dom-resizeobservation-observedbox③">(2)</a> <a href="#ref-for-dom-resizeobservation-observedbox④">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-resizeobservation-lastreportedsizes">
        <b><a href="#dom-resizeobservation-lastreportedsizes">#dom-resizeobservation-lastreportedsizes</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-resizeobservation-lastreportedsizes">3.1. ResizeObservation example struct</a> <a href="#ref-for-dom-resizeobservation-lastreportedsizes①">(2)</a> <a href="#ref-for-dom-resizeobservation-lastreportedsizes②">(3)</a>
            <li><a href="#ref-for-dom-resizeobservation-lastreportedsizes③">3.4.5. Broadcast active observations</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-resizeobservation-isactive">
        <b><a href="#dom-resizeobservation-isactive">#dom-resizeobservation-isactive</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-resizeobservation-isactive">3.4.1. Gather active observations at depth</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-document-resizeobservers">
        <b><a href="#dom-document-resizeobservers">#dom-document-resizeobservers</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-document-resizeobservers">3.4.1. Gather active observations at depth</a>
            <li><a href="#ref-for-dom-document-resizeobservers①">3.4.2. Has active observations</a>
            <li><a href="#ref-for-dom-document-resizeobservers②">3.4.3. Has skipped observations</a>
            <li><a href="#ref-for-dom-document-resizeobservers③">3.4.5. Broadcast active observations</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-resizeobserver-callback">
        <b><a href="#dom-resizeobserver-callback">#dom-resizeobserver-callback</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-resizeobserver-callback">3.4.5. Broadcast active observations</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-resizeobserver-observationtargets">
        <b><a href="#dom-resizeobserver-observationtargets">#dom-resizeobserver-observationtargets</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-resizeobserver-observationtargets">2.1. ResizeObserver interface</a> <a href="#ref-for-dom-resizeobserver-observationtargets①">(2)</a> <a href="#ref-for-dom-resizeobserver-observationtargets②">(3)</a> <a href="#ref-for-dom-resizeobserver-observationtargets③">(4)</a>
            <li><a href="#ref-for-dom-resizeobserver-observationtargets④">3.4.1. Gather active observations at depth</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-resizeobserver-activetargets">
        <b><a href="#dom-resizeobserver-activetargets">#dom-resizeobserver-activetargets</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-resizeobserver-activetargets">2.1. ResizeObserver interface</a>
            <li><a href="#ref-for-dom-resizeobserver-activetargets①">3.4.1. Gather active observations at depth</a> <a href="#ref-for-dom-resizeobserver-activetargets②">(2)</a>
            <li><a href="#ref-for-dom-resizeobserver-activetargets③">3.4.2. Has active observations</a>
            <li><a href="#ref-for-dom-resizeobserver-activetargets④">3.4.5. Broadcast active observations</a> <a href="#ref-for-dom-resizeobserver-activetargets⑤">(2)</a> <a href="#ref-for-dom-resizeobserver-activetargets⑥">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-resizeobserver-skippedtargets">
        <b><a href="#dom-resizeobserver-skippedtargets">#dom-resizeobserver-skippedtargets</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-resizeobserver-skippedtargets">3.4.1. Gather active observations at depth</a> <a href="#ref-for-dom-resizeobserver-skippedtargets①">(2)</a>
            <li><a href="#ref-for-dom-resizeobserver-skippedtargets②">3.4.3. Has skipped observations</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="content-rect">
        <b><a href="#content-rect">#content-rect</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-content-rect">2.3. ResizeObserverEntry</a> <a href="#ref-for-content-rect①">(2)</a> <a href="#ref-for-content-rect②">(3)</a> <a href="#ref-for-content-rect③">(4)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="gather-active-observations-at-depth">
        <b><a href="#gather-active-observations-at-depth">#gather-active-observations-at-depth</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-gather-active-observations-at-depth">3.6.1. HTML Processing Model: Event Loop</a> <a href="#ref-for-gather-active-observations-at-depth①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="has-active-observations">
        <b><a href="#has-active-observations">#has-active-observations</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-has-active-observations">3.6.1. HTML Processing Model: Event Loop</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="has-skipped-observations">
        <b><a href="#has-skipped-observations">#has-skipped-observations</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-has-skipped-observations">3.6.1. HTML Processing Model: Event Loop</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="create-and-populate-a-resizeobserverentry">
        <b><a href="#create-and-populate-a-resizeobserverentry">#create-and-populate-a-resizeobserverentry</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-create-and-populate-a-resizeobserverentry">3.4.5. Broadcast active observations</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="broadcast-active-observations">
        <b><a href="#broadcast-active-observations">#broadcast-active-observations</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-broadcast-active-observations">2.2. ResizeObserverCallback</a>
            <li><a href="#ref-for-broadcast-active-observations①">3.6.1. HTML Processing Model: Event Loop</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="deliver-resize-loop-error-notification">
        <b><a href="#deliver-resize-loop-error-notification">#deliver-resize-loop-error-notification</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-deliver-resize-loop-error-notification">3.6.1. HTML Processing Model: Event Loop</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="calculate-depth-for-node">
        <b><a href="#calculate-depth-for-node">#calculate-depth-for-node</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-calculate-depth-for-node">3.4.1. Gather active observations at depth</a>
            <li><a href="#ref-for-calculate-depth-for-node①">3.4.5. Broadcast active observations</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="calculate-box-size①">
        <b><a href="#calculate-box-size①">#calculate-box-size①</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-calculate-box-size①">3.1. ResizeObservation example struct</a>
        </ul>
    </aside>
    <script>/* script-dfn-panel */

        <p role="navigation" id="back-to-top"><a href="#toc"><abbr title="Back to top">↑</abbr></a></p>

        document.body.addEventListener("click", function (e) {
            var queryAll = function (sel) { return [].slice.call(document.querySelectorAll(sel)); }
            // Find the dfn element or panel, if any, that was clicked on.
            var el = e.target;
            var target;
            var hitALink = false;
            while (el.parentElement) {
                if (el.tagName == "A") {
                    // Clicking on a link in a <dfn> shouldn't summon the panel
                    hitALink = true;
                }
                if (el.classList.contains("dfn-paneled")) {
                    target = "dfn";
                    break;
                }
                if (el.classList.contains("dfn-panel")) {
                    target = "dfn-panel";
                    break;
                }
                el = el.parentElement;
            }
            if (target != "dfn-panel") {
                // Turn off any currently "on" or "activated" panels.
                queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(function (el) {
                    el.classList.remove("on");
                    el.classList.remove("activated");
                });
            }
            if (target == "dfn" && !hitALink) {
                // open the panel
                var dfnPanel = document.querySelector(".dfn-panel[data-for='" + el.id + "']");
                if (dfnPanel) {
                    dfnPanel.classList.add("on");
                    var rect = el.getBoundingClientRect();
                    dfnPanel.style.left = window.scrollX + rect.right + 5 + "px";
                    dfnPanel.style.top = window.scrollY + rect.top + "px";
                    var panelRect = dfnPanel.getBoundingClientRect();
                    var panelWidth = panelRect.right - panelRect.left;
                    if (panelRect.right > document.body.scrollWidth && (rect.left - (panelWidth + 5)) > 0) {
                        // Reposition, because the panel is overflowing
                        dfnPanel.style.left = window.scrollX + rect.left - (panelWidth + 5) + "px";
                    }
                } else {
                    console.log("Couldn't find .dfn-panel[data-for='" + el.id + "']");
                }
            } else if (target == "dfn-panel") {
                // Switch it to "activated" state, which pins it.
                el.classList.add("activated");
                el.style.left = null;
                el.style.top = null;
            }

        });
    </script>