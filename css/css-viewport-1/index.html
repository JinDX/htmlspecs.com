<!doctype html>
<html lang="zh-hans">

<head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
    <title>CSS 视口模块 1 级</title>
    <meta content="WD" name="w3c-status">
    <!-- <meta content="Bikeshed version 82ce88815, updated Thu Sep 7 16:33:55 2023 -0700" name="generator"> -->
    <link href="https://www.w3.org/TR/css-viewport-1/" rel="canonical">
    <!-- <meta content="a5cb08fc8af009aacf2aaa95525f906ca3b0dd15" name="document-revision"> -->
    <style>
        /* Style for algorithm pseudo code. */

        #algorithm {
            font-family: serif;
            font-size: 1em;
            white-space: pre;
            margin: 1em;
            padding: 1em;
        }

        #algorithm .method {
            counter-reset: statement;
            line-height: 1.5em;
        }

        #algorithm .method-name {
            font-variant: small-caps;
        }

        #algorithm .statement {
            counter-increment: statement;
        }

        #algorithm .statement:before {
            content: counter(statement) "   ";
            display: inline-block;
            width: 2em;
        }

        #algorithm .keyword {
            font-weight: bold;
        }
    </style>
    <style>
        /* Boilerplate: style-autolinks */
        .css.css,
        .property.property,
        .descriptor.descriptor {
            color: var(--a-normal-text);
            font-size: inherit;
            font-family: inherit;
        }

        .css::before,
        .property::before,
        .descriptor::before {
            content: "‘";
        }

        .css::after,
        .property::after,
        .descriptor::after {
            content: "’";
        }

        .property,
        .descriptor {
            /* Don't wrap property and descriptor names */
            white-space: nowrap;
        }

        .type {
            /* CSS value <type> */
            font-style: italic;
        }

        pre .property::before,
        pre .property::after {
            content: "";
        }

        [data-link-type="property"]::before,
        [data-link-type="propdesc"]::before,
        [data-link-type="descriptor"]::before,
        [data-link-type="value"]::before,
        [data-link-type="function"]::before,
        [data-link-type="at-rule"]::before,
        [data-link-type="selector"]::before,
        [data-link-type="maybe"]::before {
            content: "‘";
        }

        [data-link-type="property"]::after,
        [data-link-type="propdesc"]::after,
        [data-link-type="descriptor"]::after,
        [data-link-type="value"]::after,
        [data-link-type="function"]::after,
        [data-link-type="at-rule"]::after,
        [data-link-type="selector"]::after,
        [data-link-type="maybe"]::after {
            content: "’";
        }

        [data-link-type].production::before,
        [data-link-type].production::after,
        .prod [data-link-type]::before,
        .prod [data-link-type]::after {
            content: "";
        }

        [data-link-type=element],
        [data-link-type=element-attr] {
            font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
            font-size: .9em;
        }

        [data-link-type=element]::before {
            content: "<"
        }

        [data-link-type=element]::after {
            content: ">"
        }

        [data-link-type=biblio] {
            white-space: pre;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --selflink-text: black;
                --selflink-bg: silver;
                --selflink-hover-text: white;
            }
        }
    </style>
    <style>
        /* Boilerplate: style-colors */

        /* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
        :root {
            color-scheme: light dark;

            --text: black;
            --bg: white;

            --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

            --logo-bg: #1a5e9a;
            --logo-active-bg: #c00;
            --logo-text: white;

            --tocnav-normal-text: #707070;
            --tocnav-normal-bg: var(--bg);
            --tocnav-hover-text: var(--tocnav-normal-text);
            --tocnav-hover-bg: #f8f8f8;
            --tocnav-active-text: #c00;
            --tocnav-active-bg: var(--tocnav-normal-bg);

            --tocsidebar-text: var(--text);
            --tocsidebar-bg: #f7f8f9;
            --tocsidebar-shadow: rgba(0, 0, 0, .1);
            --tocsidebar-heading-text: hsla(203, 20%, 40%, .7);

            --toclink-text: var(--text);
            --toclink-underline: #3980b5;
            --toclink-visited-text: var(--toclink-text);
            --toclink-visited-underline: #054572;

            --heading-text: #005a9c;

            --hr-text: var(--text);

            --algo-border: #def;

            --del-text: red;
            --del-bg: transparent;
            --ins-text: #080;
            --ins-bg: transparent;

            --a-normal-text: #034575;
            --a-normal-underline: #bbb;
            --a-visited-text: var(--a-normal-text);
            --a-visited-underline: #707070;
            --a-hover-bg: rgba(75%, 75%, 75%, .25);
            --a-active-text: #c00;
            --a-active-underline: #c00;

            --blockquote-border: silver;
            --blockquote-bg: transparent;
            --blockquote-text: currentcolor;

            --issue-border: #e05252;
            --issue-bg: #fbe9e9;
            --issue-text: var(--text);
            --issueheading-text: #831616;

            --example-border: #e0cb52;
            --example-bg: #fcfaee;
            --example-text: var(--text);
            --exampleheading-text: #574b0f;

            --note-border: #52e052;
            --note-bg: #e9fbe9;
            --note-text: var(--text);
            --noteheading-text: hsl(120, 70%, 30%);
            --notesummary-underline: silver;

            --assertion-border: #aaa;
            --assertion-bg: #eee;
            --assertion-text: black;

            --advisement-border: orange;
            --advisement-bg: #fec;
            --advisement-text: var(--text);
            --advisementheading-text: #b35f00;

            --warning-border: red;
            --warning-bg: hsla(40, 100%, 50%, 0.95);
            --warning-text: var(--text);

            --amendment-border: #330099;
            --amendment-bg: #F5F0FF;
            --amendment-text: var(--text);
            --amendmentheading-text: #220066;

            --def-border: #8ccbf2;
            --def-bg: #def;
            --def-text: var(--text);
            --defrow-border: #bbd7e9;

            --datacell-border: silver;

            --indexinfo-text: #707070;

            --indextable-hover-text: black;
            --indextable-hover-bg: #f7f8f9;

            --outdatedspec-bg: rgba(0, 0, 0, .5);
            --outdatedspec-text: black;
            --outdated-bg: maroon;
            --outdated-text: white;
            --outdated-shadow: red;

            --editedrec-bg: darkorange;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --text: #ddd;
                --bg: black;

                --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

                --logo-bg: #1a5e9a;
                --logo-active-bg: #c00;
                --logo-text: white;

                --tocnav-normal-text: #999;
                --tocnav-normal-bg: var(--bg);
                --tocnav-hover-text: var(--tocnav-normal-text);
                --tocnav-hover-bg: #080808;
                --tocnav-active-text: #f44;
                --tocnav-active-bg: var(--tocnav-normal-bg);

                --tocsidebar-text: var(--text);
                --tocsidebar-bg: #080808;
                --tocsidebar-shadow: rgba(255, 255, 255, .1);
                --tocsidebar-heading-text: hsla(203, 20%, 40%, .7);

                --toclink-text: var(--text);
                --toclink-underline: #6af;
                --toclink-visited-text: var(--toclink-text);
                --toclink-visited-underline: #054572;

                --heading-text: #8af;

                --hr-text: var(--text);

                --algo-border: #456;

                --del-text: #f44;
                --del-bg: transparent;
                --ins-text: #4a4;
                --ins-bg: transparent;

                --a-normal-text: #6af;
                --a-normal-underline: #555;
                --a-visited-text: var(--a-normal-text);
                --a-visited-underline: var(--a-normal-underline);
                --a-hover-bg: rgba(25%, 25%, 25%, .2);
                --a-active-text: #f44;
                --a-active-underline: var(--a-active-text);

                --borderedblock-bg: rgba(255, 255, 255, .05);

                --blockquote-border: silver;
                --blockquote-bg: var(--borderedblock-bg);
                --blockquote-text: currentcolor;

                --issue-border: #e05252;
                --issue-bg: var(--borderedblock-bg);
                --issue-text: var(--text);
                --issueheading-text: hsl(0deg, 70%, 70%);

                --example-border: hsl(50deg, 90%, 60%);
                --example-bg: var(--borderedblock-bg);
                --example-text: var(--text);
                --exampleheading-text: hsl(50deg, 70%, 70%);

                --note-border: hsl(120deg, 100%, 35%);
                --note-bg: var(--borderedblock-bg);
                --note-text: var(--text);
                --noteheading-text: hsl(120, 70%, 70%);
                --notesummary-underline: silver;

                --assertion-border: #444;
                --assertion-bg: var(--borderedblock-bg);
                --assertion-text: var(--text);

                --advisement-border: orange;
                --advisement-bg: #222218;
                --advisement-text: var(--text);
                --advisementheading-text: #f84;

                --warning-border: red;
                --warning-bg: hsla(40, 100%, 20%, 0.95);
                --warning-text: var(--text);

                --amendment-border: #330099;
                --amendment-bg: #080010;
                --amendment-text: var(--text);
                --amendmentheading-text: #cc00ff;

                --def-border: #8ccbf2;
                --def-bg: #080818;
                --def-text: var(--text);
                --defrow-border: #136;

                --datacell-border: silver;

                --indexinfo-text: #aaa;

                --indextable-hover-text: var(--text);
                --indextable-hover-bg: #181818;

                --outdatedspec-bg: rgba(255, 255, 255, .5);
                --outdatedspec-text: black;
                --outdated-bg: maroon;
                --outdated-text: white;
                --outdated-shadow: red;

                --editedrec-bg: darkorange;
            }

            /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
            img {
                background: white;
            }
        }
    </style>
    <style>
        /* Boilerplate: style-counters */
        body {
            counter-reset: example figure issue;
        }

        .issue {
            counter-increment: issue;
        }

        .issue:not(.no-marker)::before {
            content: "Issue " counter(issue);
        }

        .example {
            counter-increment: example;
        }

        .example:not(.no-marker)::before {
            content: "Example " counter(example);
        }

        .invalid.example:not(.no-marker)::before,
        .illegal.example:not(.no-marker)::before {
            content: "Invalid Example" counter(example);
        }

        figcaption {
            counter-increment: figure;
        }

        figcaption:not(.no-marker)::before {
            content: "Figure " counter(figure) " ";
        }
    </style>
    <style>
        /* Boilerplate: style-dfn-panel */
        :root {
            --dfnpanel-bg: #ddd;
            --dfnpanel-text: var(--text);
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --dfnpanel-bg: #222;
                --dfnpanel-text: var(--text);
            }
        }

        .dfn-panel {
            position: absolute;
            z-index: 35;
            width: 20em;
            width: 300px;
            height: auto;
            max-height: 500px;
            overflow: auto;
            padding: 0.5em 0.75em;
            font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
            background: var(--dfnpanel-bg);
            color: var(--dfnpanel-text);
            border: outset 0.2em;
            white-space: normal;
            /* in case it's moved into a pre */
        }

        .dfn-panel:not(.on) {
            display: none;
        }

        .dfn-panel * {
            margin: 0;
            padding: 0;
            text-indent: 0;
        }

        .dfn-panel>b {
            display: block;
        }

        .dfn-panel a {
            color: var(--dfnpanel-text);
        }

        .dfn-panel a:not(:hover) {
            text-decoration: none !important;
            border-bottom: none !important;
        }

        .dfn-panel>b+b {
            margin-top: 0.25em;
        }

        .dfn-panel ul {
            padding: 0 0 0 1em;
            list-style: none;
        }

        .dfn-panel li a {
            white-space: pre;
            display: inline-block;
            max-width: calc(300px - 1.5em - 1em);
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .dfn-panel.activated {
            display: inline-block;
            position: fixed;
            left: .5em;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - 1.5em - .4em - .5em);
            max-height: 30vh;
        }

        .dfn-paneled[role="button"] {
            cursor: pointer;
        }
    </style>
    <style>
        /* Boilerplate: style-dfn-panel */
        :root {
            --dfnpanel-bg: #ddd;
            --dfnpanel-text: var(--text);
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --dfnpanel-bg: #222;
                --dfnpanel-text: var(--text);
            }
        }

        .dfn-panel {
            position: absolute;
            z-index: 35;
            width: 20em;
            width: 300px;
            height: auto;
            max-height: 500px;
            overflow: auto;
            padding: 0.5em 0.75em;
            font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
            background: var(--dfnpanel-bg);
            color: var(--dfnpanel-text);
            border: outset 0.2em;
            white-space: normal;
            /* in case it's moved into a pre */
        }

        .dfn-panel:not(.on) {
            display: none;
        }

        .dfn-panel * {
            margin: 0;
            padding: 0;
            text-indent: 0;
        }

        .dfn-panel>b {
            display: block;
        }

        .dfn-panel a {
            color: var(--dfnpanel-text);
        }

        .dfn-panel a:not(:hover) {
            text-decoration: none !important;
            border-bottom: none !important;
        }

        .dfn-panel>b+b {
            margin-top: 0.25em;
        }

        .dfn-panel ul {
            padding: 0 0 0 1em;
            list-style: none;
        }

        .dfn-panel li a {
            white-space: pre;
            display: inline-block;
            max-width: calc(300px - 1.5em - 1em);
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .dfn-panel.activated {
            display: inline-block;
            position: fixed;
            left: .5em;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - 1.5em - .4em - .5em);
            max-height: 30vh;
        }

        .dfn-paneled[role="button"] {
            cursor: pointer;
        }
    </style>
    <style>
        /* Boilerplate: style-issues */
        a[href].issue-return {
            float: right;
            float: inline-end;
            color: var(--issueheading-text);
            font-weight: bold;
            text-decoration: none;
        }
    </style>
    <style>
        /* Boilerplate: style-md-lists */
        /* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
        [data-md]> :first-child {
            margin-top: 0;
        }

        [data-md]> :last-child {
            margin-bottom: 0;
        }
    </style>
    <style>
        /* Boilerplate: style-selflinks */

        :root {
            --selflink-text: white;
            --selflink-bg: gray;
            --selflink-hover-text: black;
        }

        .heading,
        .issue,
        .note,
        .example,
        li,
        dt {
            position: relative;
        }

        a.self-link {
            position: absolute;
            top: 0;
            left: calc(-1 * (3.5rem - 26px));
            width: calc(3.5rem - 26px);
            height: 2em;
            text-align: center;
            border: none;
            transition: opacity .2s;
            opacity: .5;
        }

        a.self-link:hover {
            opacity: 1;
        }

        .heading>a.self-link {
            font-size: 83%;
        }

        .example>a.self-link,
        .note>a.self-link,
        .issue>a.self-link {
            /* These blocks are overflow:auto, so positioning outside
       doesn't work. */
            left: auto;
            right: 0;
        }

        li>a.self-link {
            left: calc(-1 * (3.5rem - 26px) - 2em);
        }

        dfn>a.self-link {
            top: auto;
            left: auto;
            opacity: 0;
            width: 1.5em;
            height: 1.5em;
            background: var(--selflink-bg);
            color: var(--selflink-text);
            font-style: normal;
            transition: opacity .2s, background-color .2s, color .2s;
        }

        dfn:hover>a.self-link {
            opacity: 1;
        }

        dfn>a.self-link:hover {
            color: var(--selflink-hover-text);
        }

        a.self-link::before {
            content: "¶";
        }

        .heading>a.self-link::before {
            content: "§";
        }

        dfn>a.self-link::before {
            content: "#";
        }
    </style>
    <link href="https://www.w3.org/StyleSheets/TR/2021/W3C-WD" rel="stylesheet">

<body class="h-entry">
    <div class="head">
        <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48"
                    src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72"> </a> </p>
        <h1 class="p-name no-ref" id="title">CSS 视口模块 1 级</h1>
        <p id="w3c-state"><a href="https://www.w3.org/standards/types#FPWD">W3C 首次公开工作草案</a>，<time class="dt-updated"
                datetime="2024-01-25">2024年1月25日</time></p>
        <details open>
            <summary>关于本文档的更多信息</summary>
            <div data-fill-with="spec-metadata">
                <dl>
                    <dt>本版本：
                    <dd><a class="u-url"
                            href="https://www.w3.org/TR/2024/WD-css-viewport-1-20240125/">https://www.w3.org/TR/2024/WD-css-viewport-1-20240125/</a>
                    <dt>最新发布版本：
                    <dd><a href="https://www.w3.org/TR/css-viewport-1/">https://www.w3.org/TR/css-viewport-1/</a>
                    <dt>编辑草案：
                    <dd><a href="https://drafts.csswg.org/css-viewport/">https://drafts.csswg.org/css-viewport/</a>
                    <dt>以往版本：
                    <dd><a href="https://www.w3.org/TR/2016/WD-css-device-adapt-1-20160329/"
                            rel="prev">https://www.w3.org/TR/2016/WD-css-device-adapt-1-20160329/</a>
                    <dt>历史记录：
                    <dd><a class="u-url"
                            href="https://www.w3.org/standards/history/css-viewport-1/">https://www.w3.org/standards/history/css-viewport-1/</a>
                    <dt>反馈：
                    <dd><a href="https://github.com/w3c/csswg-drafts/labels/css-viewport-1">CSSWG 问题仓库</a>
                    <dd><a href="https://github.com/w3c/csswg-drafts/labels/css-viewport-1">CSSWG GitHub</a>
                    <dd><a href="#issues-index">规范内反馈</a>
                    <dt class="editor">编辑：
                    <dd class="editor p-author h-card vcard" data-editor-id="43241"><a class="p-name fn u-url url"
                            href="https://florian.rivoal.net">Florian Rivoal</a>（<span class="p-org org">受邀专家</span>）
                    <dd class="editor p-author h-card vcard" data-editor-id="106537"><a class="p-name fn u-email email"
                            href="mailto:emilio@mozilla.com">Emilio Cobos Álvarez</a>（<span
                            class="p-org org">Mozilla</span>）
                    <dt class="editor">前编辑：
                    <dd class="editor p-author h-card vcard" data-editor-id="62267"><span class="p-name fn">Matt
                            Rakow</span>（<span class="p-org org">Microsoft</span>）
                    <dd class="editor p-author h-card vcard"><a class="p-name fn u-email email"
                            href="mailto:rune@opera.com">Rune Lillesveen</a>（<span class="p-org org">Opera
                            Software</span>）
                    <dd class="editor p-author h-card vcard"><a class="p-name fn u-email email"
                            href="mailto:rbetts@adobe.com">Ryan Betts</a>（<span class="p-org org">Adobe Systems</span>）
                    <dd class="editor p-author h-card vcard"><a class="p-name fn u-email email"
                            href="mailto:oyvinds@opera.com">Øyvind Stenhaug</a>（<span class="p-org org">Opera
                            Software</span>）
                    <dt>建议为本规范提出编辑意见：
                    <dd><a href="https://github.com/w3c/csswg-drafts/blob/main/css-viewport/Overview.bs">GitHub
                            编辑器</a>
                </dl>
            </div>
        </details>
        <div data-fill-with="warning"></div>
        <p class="copyright" data-fill-with="copyright"><a href="https://www.w3.org/policies/#copyright">Copyright</a> ©
            2024 <a href="https://www.w3.org/">World Wide Web Consortium</a>. <abbr
                title="World Wide Web Consortium">W3C</abbr><sup>®</sup> <a
                href="https://www.w3.org/policies/#Legal_Disclaimer">liability</a>, <a
                href="https://www.w3.org/policies/#W3C_Trademarks">trademark</a> and <a
                href="https://www.w3.org/copyright/software-license/" rel="license"
                title="W3C Software and Document License">permissive document license</a> rules apply. </p>
        <hr title="Separator for header">
    </div>
    <div class="p-summary" data-fill-with="abstract">
        <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">摘要</span></h2>
        <p>本规范为作者提供了一种方式，可以在 CSS 中指定作为初始包含块基础的视口的尺寸、缩放因子和方向。</p>
        <a href="https://www.w3.org/TR/CSS/">CSS</a> 是一种用于描述结构化文档（如 HTML 和 XML）在屏幕、纸张等介质上的呈现的语言。
    </div>
    <h2 class="no-num no-toc no-ref heading settled" id="sotd"><span class="content">本文档状态</span></h2>
    <div data-fill-with="status">
        <p><em>本节描述了本文档在发布时的状态。当前的 W3C 出版物列表，以及本技术报告的最新修订版，可在 <a href="https://www.w3.org/TR/">W3C 技术报告索引
                    https://www.w3.org/TR/</a> 查阅。</em></p>
        <p> 本文档由 <a href="https://www.w3.org/groups/wg/css">CSS 工作组</a> 按照 <a
                href="https://www.w3.org/2023/Process-20231103/#recs-and-notes">推荐流程</a> 以 <strong>首次公开工作草案</strong>
            形式发布。
            作为首次公开工作草案发布，并不意味着获得了 <abbr title="World Wide Web Consortium">W3C</abbr> 及其成员的认可。</p>
        <p> 这是一个草案文件，可能随时被更新、替换或废弃为其他文件。不应将此文件作为定稿内容引用，仅适合作为进行中的工作参考。</p>
        <p>请通过 <a href="https://github.com/w3c/csswg-drafts/issues">在 GitHub 提交
                issue</a>（推荐方式）来反馈意见，反馈时请在标题中包含规范代码“css-viewport”，示例：“[css-viewport] <i>……评论摘要……</i>”。所有 issue 和评论都会被 <a
                href="https://lists.w3.org/Archives/Public/public-css-archive/">归档</a>。
            或者，也可以发送反馈到（<a href="https://lists.w3.org/Archives/Public/www-style/">归档地址</a>）公共邮件列表 <a
                href="mailto:www-style@w3.org?Subject=%5Bcss-viewport%5D%20PUT%20SUBJECT%20HERE">www-style@w3.org</a>。
        </p>
        <p>本文件受 <a href="https://www.w3.org/2023/Process-20231103/" id="w3c_process_revision">2023年11月3日 W3C 流程文档</a>
            管辖。</p>
        <p>本文件由依据 <a href="https://www.w3.org/Consortium/Patent-Policy-20200915/">W3C 专利政策</a> 运作的小组制定。
            W3C 维护一份 <a href="https://www.w3.org/groups/wg/css/ipr" rel="disclosure">与小组成果相关的专利披露公开列表</a>；
            该页面还包括专利披露的相关说明。
            如果个人已知某项专利并认为该专利包含 <a
                href="https://www.w3.org/Consortium/Patent-Policy-20200915/#def-essential">必要权利要求</a>，则必须按照 <a
                href="https://www.w3.org/Consortium/Patent-Policy-20200915/#sec-Disclosure">W3C 专利政策第6节</a> 披露该信息。</p>
        <p></p>
    </div>
    <div data-fill-with="at-risk"></div>
    <nav data-fill-with="table-of-contents" id="toc">
        <h2 class="no-num no-toc no-ref" id="contents">目录</h2>
        <ol class="toc" role="directory">
            <li><a href="#intro"><span class="secno">1</span> <span class="content"> 引言</span></a>
            <li><a href="#the-viewport"><span class="secno">2</span> <span class="content"> 视口</span></a>
            <li>
                <a href="#viewport-meta"><span class="secno">3</span> <span class="content"> 视口 <code
                            class="html">&lt;meta></code> 元素</span></a>
                <ol class="toc">
                    <li><a href="#meta-properties"><span class="secno">3.1</span> <span class="content">
                                属性</span></a>
                    <li><a href="#parsing-algorithm"><span class="secno">3.2</span> <span class="content">
                                解析算法</span></a>
                    <li><a href="#extend-to-zoom"><span class="secno">3.3</span> <span class="content"><span
                                    class="css">extend-to-zoom</span></span></a>
                    <li>
                        <a href="#interactive-widget-section"><span class="secno">3.4</span> <span class="content"><span
                                    class="css">interactive-widget</span></span></a>
                        <ol class="toc">
                            <li><a href="#interaction-with-virtualkeyboard-overlayscontent"><span
                                        class="secno">3.4.1</span> <span class="content"> 与
                                        virtualKeyboard.overlaysContent 的交互 </span></a>
                        </ol>
                </ol>
            <li>
                <a href="#changes"><span class="secno"></span> <span class="content">附录A. 变更记录</span></a>
                <ol class="toc">
                    <li><a href="#since-the-29-march-2016-working-draft"><span class="secno"></span> <span
                                class="content">自 <span>2016年3月29日工作草案</span> 之后 </span></a>
                    <li><a href="#since-the-15-september-2011-first-public-working-draft"><span class="secno"></span>
                            <span class="content">自 <span>2011年9月15日首次公开工作草案</span> 之后 </span></a>
                </ol>
            <li>
                <a href="#w3c-conformance"><span class="secno"></span> <span class="content">一致性</span></a>
                <ol class="toc">
                    <li><a href="#w3c-conventions"><span class="secno"></span> <span class="content"> 文档约定</span></a>
                    <li><a href="#w3c-conformance-classes"><span class="secno"></span> <span class="content">
                                一致性类别</span></a>
                    <li>
                        <a href="#w3c-partial"><span class="secno"></span> <span class="content"> 部分实现</span></a>
                        <ol class="toc">
                            <li><a href="#w3c-conform-future-proofing"><span class="secno"></span> <span
                                        class="content"> 不稳定及专有功能的实现</span></a>
                        </ol>
                    <li><a href="#w3c-testing"><span class="secno"></span> <span class="content"> 非实验性实现</span></a>
                </ol>
            <li>
                <a href="#index"><span class="secno"></span> <span class="content">索引</span></a>
                <ol class="toc">
                    <li><a href="#index-defined-here"><span class="secno"></span> <span
                                class="content">本规范定义的术语</span></a>
                    <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span
                                class="content">引用中定义的术语</span></a>
                </ol>
            <li>
                <a href="#references"><span class="secno"></span> <span class="content">参考文献</span></a>
                <ol class="toc">
                    <li><a href="#normative"><span class="secno"></span> <span class="content">规范性引用</span></a>
                    <li><a href="#informative"><span class="secno"></span> <span class="content">补充性引用</span></a>
                </ol>
            <li><a href="#issues-index"><span class="secno"></span> <span class="content">问题索引</span></a>
        </ol>
    </nav>
    <main>
        <h2 class="heading settled" data-level="1" id="intro"><span class="secno">1. </span><span class="content">
                引言</span><a class="self-link" href="#intro"></a></h2>
        <div class="non-normative">
            <em>本节为非规范性内容。</em>
            <p>CSS 2.1 <a data-link-type="biblio" href="#biblio-css21"
                    title="Cascading Style Sheets Level 2 Revision 1 (CSS 2.1) Specification">[CSS21]</a> 规定了
                <a href="https://www.w3.org/TR/CSS21/visudet.html#containing-block-details">初始包含块</a>，用于<a
                    data-link-type="dfn" href="https://www.w3.org/TR/mediaqueries-5/#continuous-media"
                    id="ref-for-continuous-media">连续媒体</a>，其尺寸由<a
                    href="https://www.w3.org/TR/CSS21/visuren.html#viewport">视口</a>决定。由于视口通常不会比显示器大，
                拥有较小屏幕的设备（如手机或平板）提供的视口通常比桌面或笔记本电脑等大型设备要小。
            </p>
            <p>不幸的是，许多文档在历史上都是针对较大的视口设计的，在小视口中表现会出现各种问题，包括布局意外换行、内容被裁剪、可滚动区域异常及脚本错误。为避免这些问题，移动浏览器通常会使用一个固定的初始包含块宽度来模拟桌面浏览器窗口大小（通常为980-1024px）。随后会将所得布局缩放，使其适应可用屏幕空间。
            </p>
            <p>尽管这种做法缓解了上述问题，但缩放意味着CSS像素大小会比CSS 2.1 <a
                    href="https://www.w3.org/TR/CSS21/syndata.html#length-units">推荐</a>的要小。用户很可能需要对内容进行缩放才能舒适阅读。</p>
            <p>对于那些针对小视口设计的网站，上述做法是没有必要的。</p>
            <p class="issue" id="issue-6c09d247"><a class="self-link" href="#issue-6c09d247"></a>
                本规范从实现角度进行编写，导致其可读性可能较差。为使其对不同受众更易理解，可能需要进行大量编辑工作。同时，需要明确不同js API所指的视口。详见 <a
                    href="http://www.quirksmode.org/blog/archives/2015/09/a_new_device_ad.html">ppk 的这篇博文</a> 以获得更多讨论。
            </p>
            <p class="issue" id="issue-212a8da7"><a class="self-link" href="#issue-212a8da7"></a> 本规范及相关规范涉及的各类问题可见于 <a
                    href="https://www.w3.org/Graphics/SVG/WG/wiki/Proposals/Investigation_of_APIs_for_Level_of_detail#The_issues_on_existing_APIs">此报告</a>。
            </p>
        </div>
        <h2 class="heading settled" data-level="2" id="the-viewport"><span class="secno">2. </span><span
                class="content"> 视口</span><a class="self-link" href="#the-viewport"></a></h2>
        <p>在CSS 2.1中，<a href="https://www.w3.org/TR/CSS21/visuren.html#viewport">视口</a>是用户代理用于<a data-link-type="dfn"
                href="https://www.w3.org/TR/mediaqueries-5/#continuous-media"
                id="ref-for-continuous-media①">连续媒体</a>的一项功能，并用于为<span
                id="ref-for-continuous-media②">连续媒体</span>建立初始包含块。
            对于<a data-link-type="dfn" href="https://www.w3.org/TR/mediaqueries-5/#paged-media"
                id="ref-for-paged-media">分页面媒体</a>，初始包含块基于页面区域。页面区域可通过<a class="css" data-link-type="maybe"
                href="https://www.w3.org/TR/css-page-3/#at-ruledef-page" id="ref-for-at-ruledef-page">@page</a>规则进行设置。
        </p>
        <p>本规范引入了一种覆盖用户代理（UA）提供的视口尺寸的方法。因此，需要引入 <span class="css">initial viewport</span>（初始视口）与 <span
                class="css">actual viewport</span>（实际视口）的区别。</p>
        <dl>
            <dt><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="initial-viewport">initial viewport</dfn>
            <dd> 指被窗口或UA的可视区域提供，且未被UA或作者样式覆盖前的视口。注意，<span class="css">initial viewport</span> 的尺寸会随着窗口或可视区域尺寸变化而改变。
            <dt><dfn data-dfn-type="dfn" data-noexport id="actual-viewport">actual viewport<a class="self-link"
                        href="#actual-viewport"></a></dfn>
            <dd> 这是处理视口 <code>&lt;meta></code> 标签后得到的视口。
        </dl>
        <p class="issue" id="issue-44630653"><a class="self-link" href="#issue-44630653"></a> 将 <span class="css">actual
                viewport</span> 作为布局视口，并定义可视视口（visual viewport）。</p>
        <p>当 <span class="css">actual viewport</span> 无法完全适配窗口或可视区域时（例如 <span class="css">actual viewport</span> 大于
            <span class="css">initial viewport</span>，或缩放因子导致只有部分实际视口可见），UA 应提供滚动或平移机制。
        </p>
        <p>建议初始时，若文档基础方向为 ltr，则 <span class="css">actual viewport</span> 和窗口或可视区域的左上角对齐；若为 rtl，则右上角对齐。文档基础方向由 HTML 或
            XHTML 文档的首个 <code class="html">&lt;BODY></code> 元素的 <a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-writing-modes-3/#propdef-direction"
                id="ref-for-propdef-direction">direction</a> 属性的计算值决定。其他文档类型则取其根元素的计算 <span class="property"
                id="ref-for-propdef-direction①">direction</span>。</p>
        <h2 class="heading settled" data-level="3" id="viewport-meta"><span class="secno">3. </span><span
                class="content"> 视口 <code class="html">&lt;meta></code> 元素</span><a class="self-link"
                href="#viewport-meta"></a></h2>
        <p class="issue" id="issue-76355744"><a class="self-link" href="#issue-76355744"></a> 需要详细规范</p>
        <h3 class="heading settled" data-level="3.1" id="meta-properties"><span class="secno">3.1. </span><span
                class="content"> 属性</span><a class="self-link" href="#meta-properties"></a></h3>
        <p>视口 <code class="html">&lt;meta></code> 元素中可识别的属性有：</p>
        <ul>
            <li><code class="index" data-lt="width!!viewport meta">width</code>
            <li><code class="index" data-lt="height!!viewport meta">height</code>
            <li><code class="index">initial-scale</code>
            <li><code class="index">minimum-scale</code>
            <li><code class="index">maximum-scale</code>
            <li><code class="index">user-scalable</code>
            <li><code class="index">interactive-widget</code>
        </ul>
        <h3 class="heading settled" data-level="3.2" id="parsing-algorithm"><span class="secno">3.2. </span><span
                class="content"> 解析算法</span><a class="self-link" href="#parsing-algorithm"></a></h3>
        <p>下面是针对 <code class="html">content</code> 属性的解析算法，源自对 iPhone 上 Safari 的测试。<span class="note"> 测试在运行 iPhone OS 4
                的 iPod touch 上进行，浏览器UA字符串为：<code>"Mozilla/5.0 (iPod; U; CPU iPhone OS 4_0 like Mac OS X;
en-us) AppleWebKit/532.9 (KHTML, like Gecko) Version/4.0.5
Mobile/8A293 Safari/6531.22.7"</code>。</span> 伪代码记号采用了 <a data-link-type="biblio" href="#biblio-algorithms"
                title="Introduction to Algorithms, Second Edition, MIT Press">[Algorithms]</a> 中的风格。</p>
        <p>空白符类别包含以下字符（ASCII）：</p>
        <ul>
            <li>水平制表符 (0x09)
            <li>换行 (0x0a)
            <li>回车 (0x0d)
            <li>空格 (0x20)
        </ul>
        <p>Safari 实现中，属性/值对之间可用逗号分隔。一些实现也支持逗号和分号，因此现有内容常用分号。为保证内容兼容，作者应使用逗号，但实现者可兼容两者以支持现有内容互操作。</p>
        <p>分隔符类别包含以下字符（ASCII），逗号为首选，分号为可选：</p>
        <ul>
            <li>逗号 (0x2c)
            <li>分号 (0x3b)
        </ul>
        <pre id="algorithm"><span class="method"><span class="method-name">Parse-Content</span>(<span class="variable">S</span>)</span>
<span class="statement"><span class="variable">i</span> ← 1</span>
<span class="statement"><span class="keyword">while</span> <span class="variable">i</span> ≤ <span class="op">length</span>[<span class="variable">S</span>]</span>
<span class="statement">  <span class="keyword">do</span> <span class="keyword">while</span> <span class="variable">i</span> ≤ <span class="op">length</span>[<span class="variable">S</span>] and <span class="variable">S</span>[<span class="variable">i</span>] in [whitespace, separator, '=']</span>
<span class="statement">    <span class="keyword">do</span> <span class="variable">i</span> ← <span class="variable">i</span> + 1</span>
<span class="statement">  <span class="keyword">if</span> <span class="variable">i</span> ≤ <span class="op">length</span>[<span class="variable">S</span>]</span>
<span class="statement">    <span class="keyword">then</span> <span class="variable">i</span> ← <span class="method-name">Parse-Property</span>(<span class="variable">S</span>, <span class="variable">i</span>)</span>

<span class="method"><span class="method-name">Parse-Property</span>(<span class="variable">S</span>, <span class="variable">i</span>)</span>
<span class="statement"><span class="variable">start</span> ← <span class="variable">i</span></span>
<span class="statement"><span class="keyword">while</span> <span class="variable">i</span> ≤ <span class="op">length</span>[<span class="variable">S</span>] and <span class="variable">S</span>[<span class="variable">i</span>] <span class="keyword">not</span> in [whitespace, separator, '=']</span>
<span class="statement">  <span class="keyword">do</span> <span class="variable">i</span> ← <span class="variable">i</span> + 1</span>
<span class="statement"><span class="keyword">if</span> <span class="variable">i</span> > <span class="op">length</span>[<span class="variable">S</span>] or <span class="variable">S</span>[<span class="variable">i</span>] in [separator]</span>
<span class="statement">  <span class="keyword">then</span> <span class="keyword">return</span> <span class="variable">i</span></span>
<span class="statement"><span class="variable">property-name</span> ← <span class="variable">S</span>[<span class="variable">start</span> .. (<span class="variable">i</span> - 1)]</span>
<span class="statement"><span class="keyword">while</span> <span class="variable">i</span> ≤ <span class="op">length</span>[<span class="variable">S</span>] and <span class="variable">S</span>[<span class="variable">i</span>] <span class="keyword">not</span> in [separator, '=']</span>
<span class="statement">  <span class="keyword">do</span> <span class="variable">i</span> ← <span class="variable">i</span> + 1</span>
<span class="statement"><span class="keyword">if</span> <span class="variable">i</span> > <span class="op">length</span>[<span class="variable">S</span>] or <span class="variable">S</span>[<span class="variable">i</span>] in [separator]</span>
<span class="statement">  <span class="keyword">then</span> <span class="keyword">return</span> <span class="variable">i</span></span>
<span class="statement"><span class="keyword">while</span> <span class="variable">i</span> ≤ <span class="op">length</span>[<span class="variable">S</span>] and <span class="variable">S</span>[<span class="variable">i</span>] in [whitespace, '=']</span>
<span class="statement">  <span class="keyword">do</span> <span class="variable">i</span> ← <span class="variable">i</span> + 1</span>
<span class="statement"><span class="keyword">if</span> <span class="variable">i</span> > <span class="op">length</span>[<span class="variable">S</span>] or <span class="variable">S</span>[<span class="variable">i</span>] in [separator]</span>
<span class="statement">  <span class="keyword">then</span> <span class="keyword">return</span> <span class="variable">i</span></span>
<span class="statement"><span class="variable">start</span> ← <span class="variable">i</span></span>
<span class="statement"><span class="keyword">while</span> <span class="variable">i</span> ≤ <span class="op">length</span>[<span class="variable">S</span>] and <span class="variable">S</span>[<span class="variable">i</span>] <span class="keyword">not</span> in [whitespace, separator, '=']</span>
<span class="statement">  <span class="keyword">do</span> <span class="variable">i</span> ← <span class="variable">i</span> + 1</span>
<span class="statement"><span class="variable">property-value</span> ← <span class="variable">S</span>[<span class="variable">start</span> .. (<span class="variable">i</span> - 1)]</span>
<span class="statement"><span class="method-name">Set-Property</span>(<span class="variable">property-name</span>, <span class="variable">property-value</span>)</span>
<span class="statement"><span class="keyword">return</span> <span class="variable">i</span></span>
</pre>
        <p><span class="method-name">Set-Property</span> 匹配<a href="#meta-properties">列出的属性名</a>（不区分大小写）。
            <code class="variable">property-value</code> 字符串的解释方式如下：
        </p>
        <ol>
            <li>如果 <code class="variable">property-value</code> 的前缀可以用 <code>strtod</code> 转换为数字，
                则该值即为该数字，其余部分被忽略。
            <li>若无法如上转换为数字，则整个 <code class="variable">property-value</code> 字符串会与下列字符串（不区分大小写）匹配：<code
                    class="index">yes</code>、<code class="index">no</code>、<code class="index"
                    data-lt="device-width!!viewport meta">device-width</code>、<code class="index"
                    data-lt="device-height!!viewport meta">device-height</code>
            <li>如字符串未匹配任何已知值，则视为未知值。
        </ol>
        <h3 class="heading settled" data-level="3.3" id="extend-to-zoom"><span class="secno">3.3. </span><span
                class="content"><span class="css">extend-to-zoom</span></span><a class="self-link"
                href="#extend-to-zoom"></a></h3>
        <p class="issue" id="issue-275fe943"><a class="self-link" href="#issue-275fe943"></a> 需通过 viewport meta 标签规范
            extend-to-zoom 行为</p>
        <h3 class="heading settled" data-level="3.4" id="interactive-widget-section"><span class="secno">3.4.
            </span><span class="content"><span class="css">interactive-widget</span></span><a class="self-link"
                href="#interactive-widget-section"></a></h3>
        <p class="issue" id="issue-e08318e1"><a class="self-link" href="#issue-e08318e1"></a> 将 <span class="css">visual
                viewport</span> 的定义从 CSSOM-View 移至本规范。</p>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-export
                id="interactive-widget"><code>interactive-widget</code></dfn>
            属性用于指定交互式UI组件对页面视口的影响。它定义了组件是覆盖视口，还是收缩视口以保持其在组件显示时依然全部可见。交互式UI组件是指用户可以输入内容的临时用户代理或操作系统UI。</p>
        <div class="note" role="note">最常见的此类UI组件是虚拟键盘。</div>
        <p>下面列出了 <a data-link-type="dfn" href="#interactive-widget"
                id="ref-for-interactive-widget">interactive-widget</a> 的有效值及其对应的视口调整行为：</p>
        <dl>
            <dt><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                    id="overlays-content"><code>overlays-content</code></dfn>
            <dd> 交互式UI组件不得 <a data-link-type="dfn" href="#resize" id="ref-for-resize">调整</a>
                <a data-link-type="dfn" href="#initial-viewport" id="ref-for-initial-viewport">初始视口</a>
                或
                <a data-link-type="dfn" href="https://drafts.csswg.org/cssom-view-1/#visual-viewport"
                    id="ref-for-visual-viewport">可视视口</a>的尺寸。用户代理应与<code
                    class="idl"><a data-link-type="idl" href="https://w3c.github.io/virtual-keyboard#dom-virtualkeyboard-overlayscontent" id="ref-for-dom-virtualkeyboard-overlayscontent">VirtualKeyboard.overlaysContent</a></code>
                设为 <code>true</code> 时的表现一致。
            <dt><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                    id="resizes-content"><code>resizes-content</code></dfn>
            <dd>
                交互式UI组件必须 <a data-link-type="dfn" href="#resize" id="ref-for-resize①">调整</a>
                <a data-link-type="dfn" href="#initial-viewport" id="ref-for-initial-viewport①">初始视口</a> 尺寸。
                <div class="note" role="note">由于<a data-link-type="dfn"
                        href="https://drafts.csswg.org/cssom-view-1/#visual-viewport"
                        id="ref-for-visual-viewport①">可视视口</a>的尺寸来自<a data-link-type="dfn" href="#initial-viewport"
                        id="ref-for-initial-viewport②">初始视口</a>，因此 <a data-link-type="dfn" href="#resizes-content"
                        id="ref-for-resizes-content">resizes-content</a> 会导致初始视口和可视视口一同调整。</div>
            <dt><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                    id="resizes-visual"><code>resizes-visual</code></dfn>
            <dd> 交互式UI组件应 <a data-link-type="dfn" href="#resize" id="ref-for-resize②">调整</a>
                <a data-link-type="dfn" href="https://drafts.csswg.org/cssom-view-1/#visual-viewport"
                    id="ref-for-visual-viewport②">可视视口</a> 的尺寸，但不得 <span id="ref-for-resize③">调整</span> <a
                    data-link-type="dfn" href="https://drafts.csswg.org/css-viewport/#initial-viewport"
                    id="ref-for-initial-viewport③">初始视口</a>。
        </dl>
        <p>如果 <a data-link-type="dfn" href="#interactive-widget" id="ref-for-interactive-widget①">interactive-widget</a>
            未设置或值无效，则默认行为为 <a data-link-type="dfn" href="#resizes-visual"
                id="ref-for-resizes-visual">resizes-visual</a>。</p>
        <p>要<dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="resize" data-noexport
                id="resize">通过交互式组件调整视口尺寸</dfn>时，需从视口矩形中减去与组件操作系统报告的包围矩形的相交部分。如果结果不是矩形，行为由用户代理自行定义。</p>
        <div class="note" role="note">部分情况下结果会为非矩形：如<a href="https://support.apple.com/en-ca/HT207521">浮动或分离键盘</a>，或<a
                href="https://github.com/MicrosoftEdge/MSEdgeExplainers/blob/main/VirtualKeyboardAPI/explainer.md#motivation">
                只占用部分视口</a>的键盘。</div>
        <h4 class="heading settled" data-level="3.4.1" id="interaction-with-virtualkeyboard-overlayscontent"><span
                class="secno">3.4.1. </span><span class="content"> 与 virtualKeyboard.overlaysContent 的交互
            </span><a class="self-link" href="#interaction-with-virtualkeyboard-overlayscontent"></a></h4>
        <p><a data-link-type="biblio" href="#biblio-virtual-keyboard" title="VirtualKeyboard API">[VIRTUAL-KEYBOARD]</a>
            提供了命令式API，可通过 <a data-link-type="dfn" href="#overlays-content"
                id="ref-for-overlays-content">overlays-content</a> 行为控制
            <code
                class="idl"><a data-link-type="idl" href="https://w3c.github.io/virtual-keyboard#dom-virtualkeyboard-overlayscontent" id="ref-for-dom-virtualkeyboard-overlayscontent①">VirtualKeyboard.overlaysContent</a></code>
            属性。该属性会覆盖通过 <a data-link-type="dfn" href="#interactive-widget"
                id="ref-for-interactive-widget②">interactive-widget</a> 设置的值，具体如下：
        </p>
        <p>当 <code
                class="idl"><a data-link-type="idl" href="https://w3c.github.io/virtual-keyboard#dom-virtualkeyboard-overlayscontent" id="ref-for-dom-virtualkeyboard-overlayscontent②">VirtualKeyboard.overlaysContent</a></code>
            被设为 <code>true</code> 时，UA 判定交互式组件调整行为时必须忽略 <a data-link-type="dfn" href="#interactive-widget"
                id="ref-for-interactive-widget③">interactive-widget</a> 的任何值。</p>
        <p>当 <code
                class="idl"><a data-link-type="idl" href="https://w3c.github.io/virtual-keyboard#dom-virtualkeyboard-overlayscontent" id="ref-for-dom-virtualkeyboard-overlayscontent③">VirtualKeyboard.overlaysContent</a></code>
            被设为 <code>false</code> 时，UA 判定行为时应使用 <a data-link-type="dfn" href="#interactive-widget"
                id="ref-for-interactive-widget④">interactive-widget</a>（如未设置则使用默认值）。</p>
        <p>读取 <code
                class="idl"><a data-link-type="idl" href="https://w3c.github.io/virtual-keyboard#dom-virtualkeyboard-overlayscontent" id="ref-for-dom-virtualkeyboard-overlayscontent④">VirtualKeyboard.overlaysContent</a></code>
            时必须返回先前设置的值。</p>
        <div class="note" role="note">即，除非预先设置，否则 <code>VirtualKeyboard.overlaysContent</code>
            返回 false，即便通过 <code>&lt;meta></code> 标签设置了 <code>interactive-widget=overlays-content</code>。</div>
        <h2 class="no-num heading settled" id="changes"><span class="content">附录A. 变更记录</span><a class="self-link"
                href="#changes"></a></h2>
        <p>本附录为<em>非规范性</em>内容。</p>
        <h3 class="no-num heading settled" id="since-the-29-march-2016-working-draft"><span class="content">自 <a
                    href="https://www.w3.org/TR/2016/WD-css-device-adapt-1-20160329/">2016年3月29日工作草案</a> 之后 </span><a
                class="self-link" href="#since-the-29-march-2016-working-draft"></a></h3>
        <ul>
            <li>在 viewport meta 中添加了 <a class="property css" data-link-type="property">interactive-widgets</a> 属性
            <li>移除了 @viewport 规则
            <li>规范名称从 device-adapt 重命名为 css-viewport
            <li>将 CSSViewportRule 暴露给 Window
        </ul>
        <h3 class="no-num heading settled" id="since-the-15-september-2011-first-public-working-draft"><span
                class="content">自 <a
                    href="https://www.w3.org/TR/2011/WD-css-device-adapt-20110915/">2011年9月15日首次公开工作草案</a> 之后 </span><a
                class="self-link" href="#since-the-15-september-2011-first-public-working-draft"></a></h3>
        <ul>
            <li>进行多项编辑改进与阐述澄清
            <li>增加 OM 接口
            <li>meta viewport 支持分号分隔符
            <li>新增 UA 样式表章节
            <li>补充何时应当采纳 orientation 属性的推荐
            <li>移除对 resolution 描述符的支持
            <li>将 width/height 与 zoom 解耦，引入 <span class="css">extend-to-zoom</span> 用于 meta viewport 转换
            <li>@viewport 和 @media 的交互作出规范规定
            <li><a class="production css" data-link-type="type">&lt;viewport-length></a> 及 <span
                    class="property">zoom</span> 值允许为 0
            <li>移除对 device-width/height 的支持
            <li>@viewport 仅应用于顶层文档
            <li>嵌套 @media 时，扩展 <a data-link-type="biblio" href="#biblio-css3-conditional"
                    title="CSS Conditional Rules Module Level 3">[CSS3-CONDITIONAL]</a> 而不是 CSS21。
            <li>移除 @viewport
        </ul>
    </main>
    <h2 class="no-ref no-num heading settled" id="w3c-conformance"><span class="content"> 一致性</span><a class="self-link"
            href="#w3c-conformance"></a></h2>
    <h3 class="no-ref heading settled" id="w3c-conventions"><span class="content"> 文档约定</span><a class="self-link"
            href="#w3c-conventions"></a></h3>
    <p>一致性要求以描述性断言和 RFC 2119 术语共同表达。规范性内容中的关键词 “MUST”、“MUST NOT”、“REQUIRED”、“SHALL”、“SHALL NOT”、“SHOULD”、“SHOULD
        NOT”、“RECOMMENDED”、“MAY”、“OPTIONAL”
        的解释方式参见 RFC 2119。为了可读性，这些词在规范中并非全部大写。</p>
    <p>除非明确标注为非规范性内容、示例及注释，否则本规范全部文本皆为规范性内容。<a data-link-type="biblio" href="#biblio-rfc2119"
            title="Key words for use in RFCs to Indicate Requirement Levels">[RFC2119]</a></p>
    <p>本规范中的示例以“for example”开头，或使用 <code>class="example"</code> 与规范性文本区分，如下：</p>
    <div class="example" id="w3c-example">
        <a class="self-link" href="#w3c-example"></a>
        <p>这是一个示例性的说明。</p>
    </div>
    <p>注释以 “Note” 开头，并通过 <code>class="note"</code> 区分于规范性文本，如下：</p>
    <p class="note" role="note">注：这是一个说明性注释。</p>
    <p>告诫为规范性章节，采用特别的样式以引起注意，并通过 <code>&lt;strong class="advisement"></code> 区分，如：<strong class="advisement">
            浏览器必须提供可访问性替代方案。 </strong></p>
    <h3 class="no-ref heading settled" id="w3c-conformance-classes"><span class="content"> 一致性类别</span><a
            class="self-link" href="#w3c-conformance-classes"></a></h3>
    <p>对本规范的符合性定义为三类：</p>
    <dl>
        <dt>样式表
        <dd> <a href="https://www.w3.org/TR/CSS21/conform.html#style-sheet">CSS 样式表</a>。
        <dt>渲染器
        <dd> 解释样式表语义并渲染文档的<a href="https://www.w3.org/TR/CSS21/conform.html#user-agent">用户代理</a>。
        <dt>创作工具
        <dd> 能生成 CSS 样式表的<a href="https://www.w3.org/TR/CSS21/conform.html#user-agent">用户代理</a>。
    </dl>
    <p>只要样式表中使用本模块定义语法的所有语句均符合通用CSS语法及本模块定义的各功能的语法，则该样式表即被认为符合本规范。</p>
    <p>渲染器除了按相应规范解释样式表外，若能正确解析本规范定义的所有功能并据此渲染文档，则为符合本规范。但由于设备限制造成的无法正确渲染，并不影响 UA 的符合性（如：UA 未必需要在黑白显示器上渲染颜色）。</p>
    <p>只要创作工具生成的样式表按通用CSS语法及本模块每项功能的语法正确，并满足本模块描述的所有其他样式表符合性要求，即为符合本规范。</p>
    <h3 class="no-ref heading settled" id="w3c-partial"><span class="content"> 部分实现</span><a class="self-link"
            href="#w3c-partial"></a></h3>
    <p>为使作者可用前向兼容解析规约实现降级，CSS 渲染器<strong>必须</strong>将所有无法支持的 at规则、属性、属性值、关键字及其他语法结构等视为无效（并<a
            href="https://www.w3.org/TR/CSS21/conform.html#ignore">适当忽略</a>）。特别是，用户代理<strong>不得</strong>在多值声明中选择性忽略部分不支持的分量：只要有一项值被视为无效（即不支持），整个声明即被CSS要求彻底忽略。
    </p>
    <h4 class="heading settled" id="w3c-conform-future-proofing"><span class="content"> 不稳定及专有功能的实现</span><a
            class="self-link" href="#w3c-conform-future-proofing"></a></h4>
    <p>为避免与未来CSS稳定功能冲突，CSSWG 建议实现 <a href="https://www.w3.org/TR/CSS/#future-proofing">最佳实践</a>，以实现 <a
            href="https://www.w3.org/TR/CSS/#unstable">不稳定</a> 或 <a
            href="https://www.w3.org/TR/CSS/#proprietary-extension">专有扩展</a>。</p>
    <h3 class="no-ref heading settled" id="w3c-testing"><span class="content"> 非实验性实现</span><a class="self-link"
            href="#w3c-testing"></a></h3>
    <p>当规范进入候选推荐阶段（CR）后，实现者可推出未加前缀的、证明能正确实现 CR 级别特性的非实验性实现。</p>
    <p>为确保 CSS 在各实现间的互操作性，CSS 工作组请求非实验性 CSS 渲染器在发布任何新特性的未加前缀实现前提交实现报告（及所用测试用例，如有必要）到 W3C。W3C 收到的用例会经 CSS 工作组审查和修订。</p>
    <p>相关测试用例和实现报告的提交信息参见 CSS 工作组官网：<a href="https://www.w3.org/Style/CSS/Test/">https://www.w3.org/Style/CSS/Test/</a>。
        如有问题，请联系 <a href="https://lists.w3.org/Archives/Public/public-css-testsuite">public-css-testsuite@w3.org</a>
        邮件列表。</p>
    <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
    <h2 class="no-num no-ref heading settled" id="index"><span class="content">索引</span><a class="self-link"
            href="#index"></a></h2>
    <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">本规范定义的术语</span><a
            class="self-link" href="#index-defined-here"></a></h3>
    <ul class="index">
        <li><a href="#actual-viewport">actual viewport</a><span>，见第§2节</span>
        <li><a href="#initial-viewport">initial viewport</a><span>，见第§2节</span>
        <li><a href="#interactive-widget">interactive-widget</a><span>，见第§3.4节</span>
        <li><a href="#overlays-content">overlays-content</a><span>，见第§3.4节</span>
        <li><a href="#resize">resize</a><span>，见第§3.4节</span>
        <li><a href="#resizes-content">resizes-content</a><span>，见第§3.4节</span>
        <li><a href="#resizes-visual">resizes-visual</a><span>，见第§3.4节</span>
    </ul>
    <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">引用中定义的术语</span><a
            class="self-link" href="#index-defined-elsewhere"></a></h3>
    <ul class="index">
        <li>
            <a data-link-type="biblio">[CSS-PAGE-3]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="2c5a261b">@page</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-VIEWPORT]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="f242baf0">initial viewport</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-WRITING-MODES-3]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="fb688f4f">direction</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSSOM-VIEW-1]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="6c514f92">visual viewport</span>
            </ul>
        <li>
            <a data-link-type="biblio">[MEDIAQUERIES-5]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="9e462db5">continuous media</span>
                <li><span class="dfn-paneled" id="23af89d0">paged media</span>
            </ul>
        <li>
            <a data-link-type="biblio">[VIRTUAL-KEYBOARD]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="e3fe45c5">overlaysContent</span>
            </ul>
    </ul>
    <h2 class="no-num no-ref heading settled" id="references"><span class="content">参考文献</span><a class="self-link"
            href="#references"></a></h2>
    <h3 class="no-num no-ref heading settled" id="normative"><span class="content">规范性引用</span><a class="self-link"
            href="#normative"></a></h3>
    <dl>
        <dt id="biblio-css-page-3">[CSS-PAGE-3]
        <dd>Elika Etemad. <a href="https://www.w3.org/TR/css-page-3/"><cite>CSS Paged Media Module Level 3</cite></a>。
            2023年9月14日。WD。URL: <a href="https://www.w3.org/TR/css-page-3/">https://www.w3.org/TR/css-page-3/</a>
        <dt id="biblio-css-viewport">[CSS-VIEWPORT]
        <dd><a href="https://drafts.csswg.org/css-viewport/"><cite>CSS Viewport Module Level 1</cite></a>。编辑草案。URL: <a
                href="https://drafts.csswg.org/css-viewport/">https://drafts.csswg.org/css-viewport/</a>
        <dt id="biblio-css-writing-modes-3">[CSS-WRITING-MODES-3]
        <dd>Elika Etemad; Koji Ishii. <a href="https://www.w3.org/TR/css-writing-modes-3/"><cite>CSS Writing Modes Level
                    3</cite></a>。2019年12月10日。REC。URL: <a
                href="https://www.w3.org/TR/css-writing-modes-3/">https://www.w3.org/TR/css-writing-modes-3/</a>
        <dt id="biblio-css21">[CSS21]
        <dd>Bert Bos 等。<a href="https://www.w3.org/TR/CSS21/"><cite>Cascading Style Sheets Level 2 Revision 1 (CSS
                    2.1) Specification</cite></a>。2011年6月7日。REC。URL: <a
                href="https://www.w3.org/TR/CSS21/">https://www.w3.org/TR/CSS21/</a>
        <dt id="biblio-css3-conditional">[CSS3-CONDITIONAL]
        <dd>David Baron; Elika Etemad; Chris Lilley. <a href="https://www.w3.org/TR/css-conditional-3/"><cite>CSS
                    Conditional Rules Module Level 3</cite></a>。2022年1月13日。CR。URL: <a
                href="https://www.w3.org/TR/css-conditional-3/">https://www.w3.org/TR/css-conditional-3/</a>
        <dt id="biblio-cssom-view-1">[CSSOM-VIEW-1]
        <dd>Simon Pieters. <a href="https://www.w3.org/TR/cssom-view-1/"><cite>CSSOM View
                    Module</cite></a>。2016年3月17日。WD。URL: <a
                href="https://www.w3.org/TR/cssom-view-1/">https://www.w3.org/TR/cssom-view-1/</a>
        <dt id="biblio-mediaqueries-5">[MEDIAQUERIES-5]
        <dd>Dean Jackson 等。<a href="https://www.w3.org/TR/mediaqueries-5/"><cite>Media Queries Level
                    5</cite></a>。2021年12月18日。WD。URL: <a
                href="https://www.w3.org/TR/mediaqueries-5/">https://www.w3.org/TR/mediaqueries-5/</a>
        <dt id="biblio-rfc2119">[RFC2119]
        <dd>S. Bradner. <a href="https://datatracker.ietf.org/doc/html/rfc2119"><cite>Key words for use in RFCs to
                    Indicate Requirement Levels</cite></a>。1997年3月。最佳当前实践。URL: <a
                href="https://datatracker.ietf.org/doc/html/rfc2119">https://datatracker.ietf.org/doc/html/rfc2119</a>
        <dt id="biblio-virtual-keyboard">[VIRTUAL-KEYBOARD]
        <dd>Anupam Snigdha. <a href="https://www.w3.org/TR/virtual-keyboard/"><cite>VirtualKeyboard
                    API</cite></a>。2022年5月5日。WD。URL: <a
                href="https://www.w3.org/TR/virtual-keyboard/">https://www.w3.org/TR/virtual-keyboard/</a>
    </dl>
    <h3 class="no-num no-ref heading settled" id="informative"><span class="content">补充性引用</span><a class="self-link"
            href="#informative"></a></h3>
    <dl>
        <dt id="biblio-algorithms">[Algorithms]
        <dd>Thomas H. Cormen 等。<cite>Introduction to Algorithms, Second Edition, MIT Press</cite>。
    </dl>
    <h2 class="no-num no-ref heading settled" id="issues-index"><span class="content">问题索引</span><a class="self-link"
            href="#issues-index"></a></h2>
    <div style="counter-reset:issue">
        <div class="issue"> 本规范从实现角度进行编写，导致其可读性可能较差。为使其对不同受众更易理解，可能需要进行大量编辑工作。同时，需要明确不同js API所指的视口。详见 <a
                href="http://www.quirksmode.org/blog/archives/2015/09/a_new_device_ad.html">ppk 的这篇博文</a> 以获得更多讨论。 <a
                class="issue-return" href="#issue-6c09d247" title="Jump to section">↵</a></div>
        <div class="issue"> 本规范及相关规范涉及的各类问题可见于 <a
                href="https://www.w3.org/Graphics/SVG/WG/wiki/Proposals/Investigation_of_APIs_for_Level_of_detail#The_issues_on_existing_APIs">此报告</a>。
            <a class="issue-return" href="#issue-212a8da7" title="Jump to section">↵</a>
        </div>
        <div class="issue"> 将 <span class="css">actual viewport</span> 作为布局视口，并定义可视视口。<a class="issue-return"
                href="#issue-44630653" title="Jump to section">↵</a>
        </div>
        <div class="issue"> 需要详细规范 <a class="issue-return" href="#issue-76355744" title="Jump to section">↵</a>
        </div>
        <div class="issue"> 需通过 viewport meta 标签规范 extend-to-zoom 行为 <a class="issue-return" href="#issue-275fe943"
                title="Jump to section">↵</a></div>
        <div class="issue"> 将 <span class="css">visual viewport</span> 的定义从 CSSOM-View 移至本规范。<a class="issue-return"
                href="#issue-e08318e1" title="Jump to section">↵</a></div>
    </div>
    <script>/* Boilerplate: script-dfn-panel */
        "use strict";
        {
            const dfnsJson = window.dfnsJson || {};

            function genDfnPanel({ dfnID, url, dfnText, refSections, external }) {
                return mk.aside({
                    class: "dfn-panel",
                    id: `infopanel-for-${dfnID}`,
                    "data-for": dfnID,
                    "aria-labelled-by": `infopaneltitle-for-${dfnID}`,
                },
                    mk.span({ id: `infopaneltitle-for-${dfnID}`, style: "display:none" },
                        `Info about the '${dfnText}' ${external ? "external" : ""} reference.`),
                    mk.a({ href: url }, url),
                    mk.b({}, "Referenced in:"),
                    mk.ul({},
                        ...refSections.map(section =>
                            mk.li({},
                                ...section.refs.map((ref, refI) =>
                                    [
                                        mk.a({
                                            href: `#${ref.id}`
                                        },
                                            (refI == 0) ? section.title : `(${refI + 1})`
                                        ),
                                        " ",
                                    ]
                                ),
                            ),
                        ),
                    ),
                );
            }

            function genAllDfnPanels() {
                for (const panelData of Object.values(window.dfnpanelData)) {
                    const dfnID = panelData.dfnID;
                    const dfn = document.getElementById(dfnID);
                    if (!dfn) {
                        console.log(`Can't find dfn#${dfnID}.`, panelData);
                    } else {
                        const panel = genDfnPanel(panelData);
                        append(document.body, panel);
                        insertDfnPopupAction(dfn, panel)
                    }
                }
            }

            document.addEventListener("DOMContentLoaded", () => {
                genAllDfnPanels();

                // Add popup behavior to all dfns to show the corresponding dfn-panel.
                var dfns = queryAll('.dfn-paneled');
                for (let dfn of dfns) { ; }

                document.body.addEventListener("click", (e) => {
                    // If not handled already, just hide all dfn panels.
                    hideAllDfnPanels();
                });
            })


            function hideAllDfnPanels() {
                // Turn off any currently "on" or "activated" panels.
                queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(el => hideDfnPanel(el));
            }

            function showDfnPanel(dfnPanel, dfn) {
                hideAllDfnPanels(); // Only display one at this time.
                dfn.setAttribute("aria-expanded", "true");
                dfnPanel.classList.add("on");
                dfnPanel.style.left = "5px";
                dfnPanel.style.top = "0px";
                const panelRect = dfnPanel.getBoundingClientRect();
                const panelWidth = panelRect.right - panelRect.left;
                if (panelRect.right > document.body.scrollWidth) {
                    // Panel's overflowing the screen.
                    // Just drop it below the dfn and flip it rightward instead.
                    // This still wont' fix things if the screen is *really* wide,
                    // but fixing that's a lot harder without 'anchor()'.
                    dfnPanel.style.top = "1.5em";
                    dfnPanel.style.left = "auto";
                    dfnPanel.style.right = "0px";
                }
            }

            function pinDfnPanel(dfnPanel) {
                // Switch it to "activated" state, which pins it.
                dfnPanel.classList.add("activated");
                dfnPanel.style.left = null;
                dfnPanel.style.top = null;
            }

            function hideDfnPanel(dfnPanel, dfn) {
                if (!dfn) {
                    dfn = document.getElementById(dfnPanel.getAttribute("data-for"));
                }
                dfn.setAttribute("aria-expanded", "false")
                dfnPanel.classList.remove("on");
                dfnPanel.classList.remove("activated");
            }

            function toggleDfnPanel(dfnPanel, dfn) {
                if (dfnPanel.classList.contains("on")) {
                    hideDfnPanel(dfnPanel, dfn);
                } else {
                    showDfnPanel(dfnPanel, dfn);
                }
            }

            function insertDfnPopupAction(dfn, dfnPanel) {
                // Find dfn panel
                const panelWrapper = document.createElement('span');
                panelWrapper.appendChild(dfnPanel);
                panelWrapper.style.position = "relative";
                panelWrapper.style.height = "0px";
                dfn.insertAdjacentElement("afterend", panelWrapper);
                dfn.setAttribute('role', 'button');
                dfn.setAttribute('aria-expanded', 'false')
                dfn.tabIndex = 0;
                dfn.classList.add('has-dfn-panel');
                dfn.addEventListener('click', (event) => {
                    showDfnPanel(dfnPanel, dfn);
                    event.stopPropagation();
                });
                dfn.addEventListener('keypress', (event) => {
                    const kc = event.keyCode;
                    // 32->Space, 13->Enter
                    if (kc == 32 || kc == 13) {
                        toggleDfnPanel(dfnPanel, dfn);
                        event.stopPropagation();
                        event.preventDefault();
                    }
                });

                dfnPanel.addEventListener('click', (event) => {
                    if (event.target.nodeName == 'A') {
                        pinDfnPanel(dfnPanel);
                    }
                    event.stopPropagation();
                });

                dfnPanel.addEventListener('keydown', (event) => {
                    if (event.keyCode == 27) { // Escape key
                        hideDfnPanel(dfnPanel, dfn);
                        event.stopPropagation();
                        event.preventDefault();
                    }
                })
            }
        }
    </script>
    <script>/* Boilerplate: script-dfn-panel */
        "use strict";
        {
            const dfnsJson = window.dfnsJson || {};

            function genDfnPanel({ dfnID, url, dfnText, refSections, external }) {
                return mk.aside({
                    class: "dfn-panel",
                    id: `infopanel-for-${dfnID}`,
                    "data-for": dfnID,
                    "aria-labelled-by": `infopaneltitle-for-${dfnID}`,
                },
                    mk.span({ id: `infopaneltitle-for-${dfnID}`, style: "display:none" },
                        `Info about the '${dfnText}' ${external ? "external" : ""} reference.`),
                    mk.a({ href: url }, url),
                    mk.b({}, "Referenced in:"),
                    mk.ul({},
                        ...refSections.map(section =>
                            mk.li({},
                                ...section.refs.map((ref, refI) =>
                                    [
                                        mk.a({
                                            href: `#${ref.id}`
                                        },
                                            (refI == 0) ? section.title : `(${refI + 1})`
                                        ),
                                        " ",
                                    ]
                                ),
                            ),
                        ),
                    ),
                );
            }

            function genAllDfnPanels() {
                for (const panelData of Object.values(window.dfnpanelData)) {
                    const dfnID = panelData.dfnID;
                    const dfn = document.getElementById(dfnID);
                    if (!dfn) {
                        console.log(`Can't find dfn#${dfnID}.`, panelData);
                    } else {
                        const panel = genDfnPanel(panelData);
                        append(document.body, panel);
                        insertDfnPopupAction(dfn, panel)
                    }
                }
            }

            document.addEventListener("DOMContentLoaded", () => {
                genAllDfnPanels();

                // Add popup behavior to all dfns to show the corresponding dfn-panel.
                var dfns = queryAll('.dfn-paneled');
                for (let dfn of dfns) { ; }

                document.body.addEventListener("click", (e) => {
                    // If not handled already, just hide all dfn panels.
                    hideAllDfnPanels();
                });
            })


            function hideAllDfnPanels() {
                // Turn off any currently "on" or "activated" panels.
                queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(el => hideDfnPanel(el));
            }

            function showDfnPanel(dfnPanel, dfn) {
                hideAllDfnPanels(); // Only display one at this time.
                dfn.setAttribute("aria-expanded", "true");
                dfnPanel.classList.add("on");
                dfnPanel.style.left = "5px";
                dfnPanel.style.top = "0px";
                const panelRect = dfnPanel.getBoundingClientRect();
                const panelWidth = panelRect.right - panelRect.left;
                if (panelRect.right > document.body.scrollWidth) {
                    // Panel's overflowing the screen.
                    // Just drop it below the dfn and flip it rightward instead.
                    // This still wont' fix things if the screen is *really* wide,
                    // but fixing that's a lot harder without 'anchor()'.
                    dfnPanel.style.top = "1.5em";
                    dfnPanel.style.left = "auto";
                    dfnPanel.style.right = "0px";
                }
            }

            function pinDfnPanel(dfnPanel) {
                // Switch it to "activated" state, which pins it.
                dfnPanel.classList.add("activated");
                dfnPanel.style.left = null;
                dfnPanel.style.top = null;
            }

            function hideDfnPanel(dfnPanel, dfn) {
                if (!dfn) {
                    dfn = document.getElementById(dfnPanel.getAttribute("data-for"));
                }
                dfn.setAttribute("aria-expanded", "false")
                dfnPanel.classList.remove("on");
                dfnPanel.classList.remove("activated");
            }

            function toggleDfnPanel(dfnPanel, dfn) {
                if (dfnPanel.classList.contains("on")) {
                    hideDfnPanel(dfnPanel, dfn);
                } else {
                    showDfnPanel(dfnPanel, dfn);
                }
            }

            function insertDfnPopupAction(dfn, dfnPanel) {
                // Find dfn panel
                const panelWrapper = document.createElement('span');
                panelWrapper.appendChild(dfnPanel);
                panelWrapper.style.position = "relative";
                panelWrapper.style.height = "0px";
                dfn.insertAdjacentElement("afterend", panelWrapper);
                dfn.setAttribute('role', 'button');
                dfn.setAttribute('aria-expanded', 'false')
                dfn.tabIndex = 0;
                dfn.classList.add('has-dfn-panel');
                dfn.addEventListener('click', (event) => {
                    showDfnPanel(dfnPanel, dfn);
                    event.stopPropagation();
                });
                dfn.addEventListener('keypress', (event) => {
                    const kc = event.keyCode;
                    // 32->Space, 13->Enter
                    if (kc == 32 || kc == 13) {
                        toggleDfnPanel(dfnPanel, dfn);
                        event.stopPropagation();
                        event.preventDefault();
                    }
                });

                dfnPanel.addEventListener('click', (event) => {
                    if (event.target.nodeName == 'A') {
                        pinDfnPanel(dfnPanel);
                    }
                    event.stopPropagation();
                });

                dfnPanel.addEventListener('keydown', (event) => {
                    if (event.keyCode == 27) { // Escape key
                        hideDfnPanel(dfnPanel, dfn);
                        event.stopPropagation();
                        event.preventDefault();
                    }
                })
            }
        }
    </script>
    <script>/* Boilerplate: script-dfn-panel-json */
        window.dfnpanelData = {};
        window.dfnpanelData['2c5a261b'] = { "dfnID": "2c5a261b", "url": "https://www.w3.org/TR/css-page-3/#at-ruledef-page", "dfnText": "@page", "refSections": [{ "refs": [{ "id": "ref-for-at-ruledef-page" }], "title": "2. \nThe viewport" }], "external": true };
        window.dfnpanelData['f242baf0'] = { "dfnID": "f242baf0", "url": "https://drafts.csswg.org/css-viewport/#initial-viewport", "dfnText": "initial viewport", "refSections": [{ "refs": [{ "id": "ref-for-initial-viewport\u2462" }], "title": "3.4. interactive-widget" }], "external": true };
        window.dfnpanelData['fb688f4f'] = { "dfnID": "fb688f4f", "url": "https://www.w3.org/TR/css-writing-modes-3/#propdef-direction", "dfnText": "direction", "refSections": [{ "refs": [{ "id": "ref-for-propdef-direction" }, { "id": "ref-for-propdef-direction\u2460" }], "title": "2. \nThe viewport" }], "external": true };
        window.dfnpanelData['6c514f92'] = { "dfnID": "6c514f92", "url": "https://drafts.csswg.org/cssom-view-1/#visual-viewport", "dfnText": "visual viewport", "refSections": [{ "refs": [{ "id": "ref-for-visual-viewport" }, { "id": "ref-for-visual-viewport\u2460" }, { "id": "ref-for-visual-viewport\u2461" }], "title": "3.4. interactive-widget" }], "external": true };
        window.dfnpanelData['9e462db5'] = { "dfnID": "9e462db5", "url": "https://www.w3.org/TR/mediaqueries-5/#continuous-media", "dfnText": "continuous media", "refSections": [{ "refs": [{ "id": "ref-for-continuous-media" }], "title": "1. \nIntroduction" }, { "refs": [{ "id": "ref-for-continuous-media\u2460" }, { "id": "ref-for-continuous-media\u2461" }], "title": "2. \nThe viewport" }], "external": true };
        window.dfnpanelData['23af89d0'] = { "dfnID": "23af89d0", "url": "https://www.w3.org/TR/mediaqueries-5/#paged-media", "dfnText": "paged media", "refSections": [{ "refs": [{ "id": "ref-for-paged-media" }], "title": "2. \nThe viewport" }], "external": true };
        window.dfnpanelData['e3fe45c5'] = { "dfnID": "e3fe45c5", "url": "https://w3c.github.io/virtual-keyboard#dom-virtualkeyboard-overlayscontent", "dfnText": "overlaysContent", "refSections": [{ "refs": [{ "id": "ref-for-dom-virtualkeyboard-overlayscontent" }], "title": "3.4. interactive-widget" }, { "refs": [{ "id": "ref-for-dom-virtualkeyboard-overlayscontent\u2460" }, { "id": "ref-for-dom-virtualkeyboard-overlayscontent\u2461" }, { "id": "ref-for-dom-virtualkeyboard-overlayscontent\u2462" }, { "id": "ref-for-dom-virtualkeyboard-overlayscontent\u2463" }], "title": "3.4.1. \n\tInteraction with virtualKeyboard.overlaysContent\n" }], "external": true };
        window.dfnpanelData['initial-viewport'] = { "dfnID": "initial-viewport", "url": "#initial-viewport", "dfnText": "initial viewport", "refSections": [{ "refs": [{ "id": "ref-for-initial-viewport" }, { "id": "ref-for-initial-viewport\u2460" }, { "id": "ref-for-initial-viewport\u2461" }], "title": "3.4. interactive-widget" }], "external": false };
        window.dfnpanelData['interactive-widget'] = { "dfnID": "interactive-widget", "url": "#interactive-widget", "dfnText": "interactive-widget", "refSections": [{ "refs": [{ "id": "ref-for-interactive-widget" }, { "id": "ref-for-interactive-widget\u2460" }], "title": "3.4. interactive-widget" }, { "refs": [{ "id": "ref-for-interactive-widget\u2461" }, { "id": "ref-for-interactive-widget\u2462" }, { "id": "ref-for-interactive-widget\u2463" }], "title": "3.4.1. \n\tInteraction with virtualKeyboard.overlaysContent\n" }], "external": false };
        window.dfnpanelData['overlays-content'] = { "dfnID": "overlays-content", "url": "#overlays-content", "dfnText": "overlays-content", "refSections": [{ "refs": [{ "id": "ref-for-overlays-content" }], "title": "3.4.1. \n\tInteraction with virtualKeyboard.overlaysContent\n" }], "external": false };
        window.dfnpanelData['resizes-content'] = { "dfnID": "resizes-content", "url": "#resizes-content", "dfnText": "resizes-content", "refSections": [{ "refs": [{ "id": "ref-for-resizes-content" }], "title": "3.4. interactive-widget" }], "external": false };
        window.dfnpanelData['resizes-visual'] = { "dfnID": "resizes-visual", "url": "#resizes-visual", "dfnText": "resizes-visual", "refSections": [{ "refs": [{ "id": "ref-for-resizes-visual" }], "title": "3.4. interactive-widget" }], "external": false };
        window.dfnpanelData['resize'] = { "dfnID": "resize", "url": "#resize", "dfnText": "resize a viewport by an interactive widget", "refSections": [{ "refs": [{ "id": "ref-for-resize" }, { "id": "ref-for-resize\u2460" }, { "id": "ref-for-resize\u2461" }, { "id": "ref-for-resize\u2462" }], "title": "3.4. interactive-widget" }], "external": false };
    </script>
    <script>/* Boilerplate: script-dom-helper */
        function query(sel) { return document.querySelector(sel); }

        function queryAll(sel) { return [...document.querySelectorAll(sel)]; }

        function iter(obj) {
            if (!obj) return [];
            var it = obj[Symbol.iterator];
            if (it) return it;
            return Object.entries(obj);
        }

        function mk(tagname, attrs, ...children) {
            const el = document.createElement(tagname);
            for (const [k, v] of iter(attrs)) {
                if (k.slice(0, 3) == "_on") {
                    const eventName = k.slice(3);
                    el.addEventListener(eventName, v);
                } else if (k[0] == "_") {
                    // property, not attribute
                    el[k.slice(1)] = v;
                } else {
                    if (v === false || v == null) {
                        continue;
                    } else if (v === true) {
                        el.setAttribute(k, "");
                        continue;
                    } else {
                        el.setAttribute(k, v);
                    }
                }
            }
            append(el, children);
            return el;
        }

        /* Create shortcuts for every known HTML element */
        [
            "a",
            "abbr",
            "acronym",
            "address",
            "applet",
            "area",
            "article",
            "aside",
            "audio",
            "b",
            "base",
            "basefont",
            "bdo",
            "big",
            "blockquote",
            "body",
            "br",
            "button",
            "canvas",
            "caption",
            "center",
            "cite",
            "code",
            "col",
            "colgroup",
            "datalist",
            "dd",
            "del",
            "details",
            "dfn",
            "dialog",
            "div",
            "dl",
            "dt",
            "em",
            "embed",
            "fieldset",
            "figcaption",
            "figure",
            "font",
            "footer",
            "form",
            "frame",
            "frameset",
            "head",
            "header",
            "h1",
            "h2",
            "h3",
            "h4",
            "h5",
            "h6",
            "hr",
            "html",
            "i",
            "iframe",
            "img",
            "input",
            "ins",
            "kbd",
            "label",
            "legend",
            "li",
            "link",
            "main",
            "map",
            "mark",
            "meta",
            "meter",
            "nav",
            "nobr",
            "noscript",
            "object",
            "ol",
            "optgroup",
            "option",
            "output",
            "p",
            "param",
            "pre",
            "progress",
            "q",
            "s",
            "samp",
            "script",
            "section",
            "select",
            "small",
            "source",
            "span",
            "strike",
            "strong",
            "style",
            "sub",
            "summary",
            "sup",
            "table",
            "tbody",
            "td",
            "template",
            "textarea",
            "tfoot",
            "th",
            "thead",
            "time",
            "title",
            "tr",
            "u",
            "ul",
            "var",
            "video",
            "wbr",
            "xmp",
        ].forEach(tagname => {
            mk[tagname] = (...args) => mk(tagname, ...args);
        });

        function* nodesFromChildList(children) {
            for (const child of children.flat(Infinity)) {
                if (child instanceof Node) {
                    yield child;
                } else {
                    yield new Text(child);
                }
            }
        }
        function append(el, ...children) {
            for (const child of nodesFromChildList(children)) {
                if (el instanceof Node) el.appendChild(child);
                else el.push(child);
            }
            return el;
        }

        function insertAfter(el, ...children) {
            for (const child of nodesFromChildList(children)) {
                el.parentNode.insertBefore(child, el.nextSibling);
            }
            return el;
        }

        function clearContents(el) {
            el.innerHTML = "";
            return el;
        }

        function parseHTML(markup) {
            if (markup.toLowerCase().trim().indexOf('<!doctype') === 0) {
                const doc = document.implementation.createHTMLDocument("");
                doc.documentElement.innerHTML = markup;
                return doc;
            } else {
                const el = mk.template({});
                el.innerHTML = markup;
                return el.content;
            }
        }
    </script>
    <script src="/dropdown.js"></script>