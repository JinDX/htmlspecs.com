<!doctype html>

<html lang="zh-hans">

<head>
    <meta content="text/html;charset=UTF-8" http-equiv=Content-type>
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
    <title>媒体查询 3 级</title>
    <meta content="REC" name="w3c-status">
    <!-- <link href="../default.css" rel=stylesheet> -->
    <link href="https://www.w3.org/TR/default.css" rel=stylesheet>

    <link href="https://www.w3.org/2008/site/images/favicon.ico" rel="icon">
    <link href="https://drafts.csswg.org/csslogo.ico" rel="icon">
    <link rel="canonical" href="https://www.w3.org/TR/mediaqueries-3/">
    <style>
        /* style-counters */

        body {
            counter-reset: example figure issue;
        }

        .issue {
            counter-increment: issue;
        }

        .issue:not(.no-marker)::before {
            content: "Issue " counter(issue);
        }

        .example {
            counter-increment: example;
        }

        .example:not(.no-marker)::before {
            content: "Example " counter(example);
        }

        .invalid.example:not(.no-marker)::before,
        .illegal.example:not(.no-marker)::before {
            content: "Invalid Example" counter(example);
        }

        figcaption {
            counter-increment: figure;
        }

        figcaption:not(.no-marker)::before {
            content: "Figure " counter(figure) " ";
        }
    </style>
    <link href="https://www.w3.org/StyleSheets/TR/2021/W3C-REC" rel=stylesheet>

<body>
    <div class=head>
        <p><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48"
                    src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72"> </a> </p>

        <h1 id=title>媒体查询级别 3</h1>

        <p id="w3c-state"><a href="https://www.w3.org/standards/types#REC">W3C 推荐标准</a>, <time class="dt-updated"
                datetime="2024-05-21">2024年5月21日</time></p>
        <!-- <p id="w3c-state"><a href="https://www.w3.org/standards/types#ED">Editor’s Draft</a>, <time class="dt-updated" datetime="2024-05-01">14 May 2024</time></p> -->

        <details open>
            <summary>关于此文档的更多详细信息</summary>
            <dl>
                <dt>此版本:
                    <!-- <dd><a
     href="https://drafts.csswg.org/css3-mediaqueries/">https://drafts.csswg.org/TR/2024/mediaqueries-3/</a> -->
                <dd><a
                        href="https://www.w3.org/TR/2024/REC-mediaqueries-3-20240521/">https://www.w3.org/TR/2024/REC-mediaqueries-3-20240521/</a>

                <dt>最新版本:

                <dd><a href="https://www.w3.org/TR/mediaqueries-3/">https://www.w3.org/TR/mediaqueries-3/</a>

                <dt>最新编辑版本:

                <dd><a href="https://drafts.csswg.org/mediaqueries-3/">https://drafts.csswg.org/mediaqueries-3/</a>

                <dt>上一个版本:

                <dd><a
                        href="https://www.w3.org/TR/2022/REC-mediaqueries-3-20220405/">https://www.w3.org/TR/2022/REC-mediaqueries-3-20220405/</a>

                <dt>历史:

                <dd><a
                        href="https://www.w3.org/standards/history/mediaqueries-3/">https://www.w3.org/standards/history/mediaqueries-3/</a>

                <dt>评论的处理:

                <dd><a
                        href="https://drafts.csswg.org/mediaqueries-3/issues-2012-and-later">https://drafts.csswg.org/mediaqueries-3/issues-2012-and-later</a>

                <dt>实施报告:

                <dd><a
                        href="https://drafts.csswg.org/mediaqueries-3/impl-report">https://drafts.csswg.org/mediaqueries-3/impl-report</a>
                </dd>

                <dt>编辑:

                <dd class="editor p-author h-card vcard" data-editor-id="43241"><a class="p-name fn u-url url"
                        href="https://florian.rivoal.net">Florian Rivoal</a> (<span class="p-org org">特邀专家</span>)

                <dt>之前的编辑:

                <dd class=vcard><a class="url fn n" href="http://people.opera.com/howcome/" lang=no> <span
                            class=given-name>H&aring;kon</span> <span class=additional-name>Wium</span> <span
                            class=family-name>Lie</span></a>
                    &lt;<span class=email>howcome&nbsp;@opera.com</span>&gt;

                <dd class=vcard><a class="url fn" href="http://tantek.com/" lang=tr>Tantek &Ccedil;elik</a> &lt;<span
                        class=email>tantek&nbsp;@cs.stanford.edu</span>&gt;

                <dd class=vcard><span class=given-name>Daniel</span> <span class=family-name>Glazman</span> &lt;<span
                        class=email>daniel.glazman&nbsp;@disruptive-innovations.com</span>&gt;

                <dd class=vcard><a class="url fn n" href="https://annevankesteren.nl/" hreflang=en lang=nl>Anne van
                        Kesteren</a> &lt;<span class=email>annevk@opera.com</span>&gt;

                <dt>反馈:

                <dd><a href="https://github.com/w3c/csswg-drafts/issues">GitHub
                        问题</a> 是讨论此规范的首选方式。在提交问题时，请在标题中加入文本“mediaqueries-3”，
                    最好像这样: “[mediaqueries-3] <i>…评论摘要…</i>”。所有问题和评论都已被 <a
                        href="https://lists.w3.org/Archives/Public/public-css-archive/">存档</a>，
                    此外还有一个 <a href="https://lists.w3.org/Archives/Public/www-style/">历史档案</a>。

                <dt>勘误表:
                <dd><a
                        href="https://www.w3.org/Style/2022/REC-mediaqueries-3-20220405-errata.html">http://www.w3.org/Style/2022/REC-mediaqueries-3-20220405-errata.html</a>
            </dl>
        </details>

        <!-- <p>Please refer to the <a href="http://www.w3.org/Style/2022/REC-mediaqueries-3-20220405-errata.html"><strong>errata</strong></a> for this document, which may include some normative corrections.</p> -->

        <!-- <p>See also <a href="http://www.w3.org/2003/03/Translations/byTechnology?technology=css3-mediaqueries"> <strong>translations</strong></a>.</p> -->

        <!--begin-copyright-->
        <p class="copyright"><a href="https://www.w3.org/policies/#copyright">版权</a> © 2024 <a
                href="https://www.w3.org/">万维网联盟</a>。<abbr title="World Wide Web Consortium">W3C</abbr><sup>®</sup> <a
                href="https://www.w3.org/policies/#Legal_Disclaimer">责任</a>，<a
                href="https://www.w3.org/policies/#W3C_Trademarks">商标</a> 和 <a
                href="https://www.w3.org/copyright/software-license/">宽松的文档许可</a> 规则适用。</p>
        <!--end-copyright-->
        <hr title="Header的分隔符">
    </div>

    <h2 class="no-num no-toc" id=abstract>摘要</h2>

    <p>HTML 和 CSS 当前支持为不同<em>媒体类型</em>定制的依赖于媒体的样式表。例如，当在屏幕上显示时，文档可能使用无衬线字体，而在打印时则使用衬线字体。‘<code class=css>screen</code>’
        和 ‘<code class=css>print</code>’ 是已经定义的两种媒体类型。<em>媒体查询</em>通过允许对样式表进行更精确的标记，扩展了媒体类型的功能。

    <p>媒体查询由媒体类型和零个或多个用于检查特定<em>媒体特性</em>条件的表达式组成。在媒体查询中可以使用的媒体特性包括 ‘<code class=css>width</code>’、‘<code
            class=css>height</code>’ 和 ‘<code class=css>color</code>’。通过使用媒体查询，可以在不更改内容本身的情况下，根据特定的输出设备范围定制展示效果。

    <h2 class="no-num no-toc" id=status>本文档的状态</h2>
    <!--begin-status-->

    <p><em>本节描述了本文档在发布时的状态。当前 W3C 发布的文档列表和本技术报告的最新修订版本可在 <a href="https://www.w3.org/TR/">W3C 技术报告索引</a>中找到，网址为
            https://www.w3.org/TR/。</em></p>

    <!-- <p>This is a public copy of the editors' draft. It is provided for
   discussion only and may change at any moment. Its publication here does
   not imply endorsement of its contents by W3C. Don't cite this document
   other than as work in progress. -->

    <p>本文档由 <a href="https://www.w3.org/groups/wg/css">CSS 工作组</a> 作为推荐标准发布，使用了 <a
            href="https://www.w3.org/2023/Process-20231103/#recs-and-notes">推荐轨道</a>。本文档包括 <a
            href="https://www.w3.org/2023/Process-20231103/#proposed-corrections">提议的修正</a>。</p>

    <p>W3C 推荐标准是一种规范，在经过广泛的共识构建后，得到了 <abbr title="World Wide Web Consortium">W3C</abbr> 及其成员的认可，并且工作组成员承诺为实现这一规范提供<a
            href="https://www.w3.org/Consortium/Patent-Policy/#sec-Requirements">免版税许可</a>。</p>

    <p>W3C 推荐广泛部署此规范作为 Web 标准。</p>

    <p>请通过 <a href="https://github.com/w3c/csswg-drafts/issues">在 GitHub
            中提交问题</a>（首选方式）提供反馈，在标题中包含规范代码“mediaqueries-3”，例如：“[mediaqueries-3] <i>…评论摘要…</i>”。所有问题和评论都已被 <a
            href="https://lists.w3.org/Archives/Public/public-css-archive/">存档</a>。或者，反馈可以发送到 <a
            href="https://lists.w3.org/Archives/Public/www-style/">存档的</a>公共邮件列表 <a
            href="mailto:www-style@w3.org?Subject=%5Bmediaqueries-3%5D%20PUT%20SUBJECT%20HERE">www-style@w3.org</a>。评论截止日期为
        2024 年 7 月 21 日。</p>

    <p>未来对本推荐标准的更新可能会纳入 <a href="https://www.w3.org/2023/Process-20231103/#allow-new-features">新功能</a>。</p>

    <p>本文档受 <a href="https://www.w3.org/2023/Process-20231103/" id="w3c_process_revision">2023 年 11 月 3 日 W3C 流程文档</a>
        管辖。</p>

    <p>本文档由根据 <a href="https://www.w3.org/Consortium/Patent-Policy/">W3C 专利政策</a> 运作的工作组生成。W3C 维护了一个 <a
            href="https://www.w3.org/groups/wg/css/ipr"
            rel=disclosure>公开的专利披露列表</a>，该列表包含与工作组交付成果相关的任何专利披露；该页面还包括披露专利的说明。了解有专利且相信包含 <a
            href="https://www.w3.org/Consortium/Patent-Policy/#def-essential">必要性声明</a> 的个人必须根据 <a
            href="https://www.w3.org/Consortium/Patent-Policy/#sec-Disclosure">W3C 专利政策第6节</a> 进行披露。</p>

    <p class="copyright"><a href="https://www.w3.org/policies/#copyright">版权</a> © 2024 <a
            href="https://www.w3.org/">万维网联盟</a>。<abbr title="World Wide Web Consortium">W3C</abbr><sup>®</sup> <a
            href="https://www.w3.org/policies/#Legal_Disclaimer">责任</a>，<a
            href="https://www.w3.org/policies/#W3C_Trademarks">商标</a> 和 <a
            href="https://www.w3.org/copyright/software-license/">宽松的文档许可</a> 规则适用。</p>
    <!--end-status-->

    <div class="correction proposed"><a
            href="https://www.w3.org/2021/Process-20211102/#proposed-corrections">提议的修正</a>已在本文档中标注。</div>


    <nav id="toc">
        <h2 class="no-num no-toc" id=contents>目录</h2>
        <!--begin-toc-->

        <ul class=toc>
            <li><a href="#background"><span class=secno>1. </span>背景</a>

            <li><a href="#media0"><span class=secno>2. </span>媒体查询</a>

            <li><a href="#syntax"><span class=secno>3. </span>语法</a>
                <ul class=toc>
                    <li><a href="#error-handling"><span class=secno>3.1. </span>错误处理</a>
                </ul>

            <li><a href="#media1"><span class=secno>4. </span>媒体特性</a>
                <ul class=toc>
                    <li><a href="#width"><span class=secno>4.1. </span>宽度</a>

                    <li><a href="#height"><span class=secno>4.2. </span>高度</a>

                    <li><a href="#device-width"><span class=secno>4.3.
                            </span>设备宽度</a>

                    <li><a href="#device-height"><span class=secno>4.4.
                            </span>设备高度</a>

                    <li><a href="#orientation"><span class=secno>4.5. </span>方向</a>

                    <li><a href="#aspect-ratio"><span class=secno>4.6.
                            </span>宽高比</a>

                    <li><a href="#device-aspect-ratio"><span class=secno>4.7.
                            </span>设备宽高比</a>

                    <li><a href="#color"><span class=secno>4.8. </span>颜色</a>

                    <li><a href="#color-index"><span class=secno>4.9. </span>颜色索引</a>

                    <li><a href="#monochrome"><span class=secno>4.10. </span>单色</a>

                    <li><a href="#resolution"><span class=secno>4.11. </span>分辨率</a>

                    <li><a href="#scan"><span class=secno>4.12. </span>扫描</a>

                    <li><a href="#grid"><span class=secno>4.13. </span>网格</a>
                </ul>

            <li><a href="#values"><span class=secno>5. </span>值</a>

            <li><a href="#units"><span class=secno>6. </span>单位</a>
                <ul class=toc>
                    <li><a href="#resolution0"><span class=secno>6.1. </span>分辨率</a>
                </ul>

            <li><a href="#changes"><span class=secno>7. </span>变更</a>
                <ul class=toc>
                    <li><a href="#changes-2022"><span class=secno>7.1. </span>自 2022年4月5日 推荐版以来的变更</a>
                    <li><a href="#changes-2012"><span class=secno>7.2. </span>自 2012年6月19日 推荐版以来的变更</a>
                    <li><a href="#changes-2010"><span class=secno>7.4. </span>自 2010年7月27日 候选推荐版以来的变更</a>
                </ul>

            <li class=no-num><a href="#acknowledgments">致谢</a>

            <li class=no-num><a href="#references">参考文献</a>
                <ul class=toc>
                    <li class=no-num><a href="#normative-references">规范性参考文献</a>

                    <li class=no-num><a href="#other-references">其他参考文献</a>
                </ul>
        </ul>
        <!--end-toc-->
    </nav>


    <h2 id=background><span class=secno>1. </span>背景</h2>

    <p>（本节为非规范性内容。）

    <p>HTML4 <a href="#HTML401" rel=biblioentry>[HTML401]<!--{{HTML401}}--></a> 和 CSS2 <a href="#CSS21"
            rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a> 目前支持针对不同媒体类型的媒体相关样式表。例如，一个文档可以在屏幕上使用无衬线字体，在打印时使用衬线字体。在 HTML4
        中，这可以写成：

    <div class=example>
        <pre><code>&lt;link rel="stylesheet" type="text/css" media="screen" href="sans-serif.css">
&lt;link rel="stylesheet" type="text/css" media="print" href="serif.css"></code></pre>
    </div>

    <p>在 CSS 样式表中，可以声明某些部分适用于特定的媒体类型：

    <div class=example>
        <pre><code>@media screen {
  * { font-family: sans-serif }
}</code></pre>
    </div>

    <p>&lsquo;<code class=css>print</code>&rsquo; 和 &lsquo;<code class=css>screen</code>&rsquo; 媒体类型在 HTML4 中已定义。HTML4
        中的媒体类型列表为：&lsquo;<code class=css>aural</code>&rsquo;，&lsquo;<code class=css>braille</code>&rsquo;，&lsquo;<code
            class=css>handheld</code>&rsquo;，&lsquo;<code class=css>print</code>&rsquo;，&lsquo;<code
            class=css>projection</code>&rsquo;，&lsquo;<code class=css>screen</code>&rsquo;，&lsquo;<code
            class=css>tty</code>&rsquo;，&lsquo;<code class=css>tv</code>&rsquo;。CSS2 定义了相同的列表，弃用了 &lsquo;<code
            class=css>aural</code>&rsquo; 并增加了 &lsquo;<code class=css>embossed</code>&rsquo; 和 &lsquo;<code
            class=css>speech</code>&rsquo;。此外，&lsquo;<code class=css>all</code>&rsquo; 用于指示样式表适用于所有媒体类型。

    <p>多个用户代理支持媒体特定的样式表。最常用的功能是区分 &lsquo;<code class=css>screen</code>&rsquo; 和 &lsquo;<code
            class=css>print</code>&rsquo;。

    <p>已有请求希望能更详细地描述样式表适用于哪种类型的输出设备。幸运的是，HTML4 预见了这些请求，并为媒体类型定义了一个向前兼容的语法。以下是 HTML4 中的引文 <a
            href="https://www.w3.org/TR/1999/REC-html401-19991224/types.html#h-6.13">HTML4，章节 6.13</a>：

    <blockquote cite="http://www.w3.org/TR/1999/REC-html401-19991224/types.html#h-6.13">
        <p>未来版本的 HTML 可能会引入新值，并允许参数化值。为了便于引入这些扩展，符合规范的用户代理必须能够解析 <a
                href="https://www.w3.org/TR/1999/REC-html401-19991224/present/styles.html#adef-media"><samp>media</samp></a>
            属性值，解析方法如下：

        <ol>
            <li>该值是一个逗号分隔的条目列表。例如：
                <pre><code>media="screen, 3d-glasses, print and resolution > 90dpi"</code></pre>

                <p>映射为：</p>

                <pre><code>"screen"
"3d-glasses"
"print and resolution > 90dpi"</code></pre>

            <li>每个条目在遇到第一个不是 US ASCII 字母 [a-zA-Z]（Unicode 十进制 65-90，97-122）、数字 [0-9]（Unicode 十六进制
                30-39）或连字符（45）字符时截断。在该示例中，得到：
                <pre><code>"screen"
"3d-glasses"
"print"</code></pre>
        </ol>
    </blockquote>

    <p>本规范中描述的媒体查询基于 HTML4 中概述的机制。媒体查询的语法适用于 HTML4 中保留的媒体类型语法。HTML4 的 <code class=html>media</code> 属性在 XHTML 和通用 XML
        中也存在。相同的语法也可以在 CSS 的 &lsquo;<code class=css>@media</code>&rsquo; 和 &lsquo;<code class=css>@import</code>&rsquo;
        规则中使用。

    <p>然而，媒体查询的解析规则与 HTML4 的解析规则不兼容，以便与 CSS 中使用的媒体查询保持一致。

    <p class=note>较新的 HTML 版本 <a href="#biblio-html" rel=biblioentry>[HTML]</a> 直接参考了媒体查询规范，从而更新了 HTML 的规则。</p>


    <h2 id=media0><span class=secno>2. </span>媒体查询</h2>

    <p>媒体查询由一个媒体类型和零个或多个<span class=index id=expressions>表达式</span>组成，这些表达式检查特定<span class=index
            id=media-features>媒体特性</span>的条件。

    <p>本节中的媒体查询声明假设遵循了<a href="#syntax">语法部分</a>。不符合语法的媒体查询在<a href="#error-handling">错误处理部分</a>中讨论。即语法优先于本节中的要求。

    <div class=example>
        <p>以下是一个用 HTML 编写的简单示例：</p>

        <pre><code>&lt;link rel="stylesheet" media="screen and (color)" href="example.css" /></code></pre>

        <p>这个例子表示一个特定的样式表 (<code>example.css</code>) 适用于某种媒体类型 (&lsquo;<code class=css>screen</code>&rsquo;)
            和某种特性（必须是彩色屏幕）。</p>
    </div>

    <div class=example>
        <p>以下是在 CSS 中使用 @import 规则编写的相同媒体查询：</p>

        <pre><code>@import url(color.css) screen and (color);</code></pre>
    </div>

    <p>媒体查询是一个逻辑表达式，它要么为真要么为假。如果媒体查询的媒体类型与用户代理运行的设备的媒体类型匹配（如“适用于”行中定义），并且媒体查询中的所有表达式都为真，那么媒体查询为真。

    <p>对于适用于所有媒体类型的媒体查询，提供了一种简写语法；可以省略关键字 &lsquo;<code class=css>all</code>&rsquo;（以及尾随的 &lsquo;<code
            class=css>and</code>&rsquo;）。即，如果未明确给出媒体类型，则默认是 &lsquo;<code class=css>all</code>&rsquo;。

    <div class=example>
        <p>即这些是相同的：</p>

        <pre><code>@media all and (min-width:500px) { &hellip; }
@media (min-width:500px) { &hellip; }</code></pre>

        <p>这些也是相同的：</p>

        <pre><code>@media (orientation: portrait) { &hellip; }
@media all and (orientation: portrait) { &hellip; }</code></pre>
    </div>

    <p>可以在媒体查询列表中组合多个媒体查询。媒体查询的逗号分隔列表。如果列表中的一个或多个媒体查询为真，则整个列表为真，否则为假。在媒体查询语法中，逗号表示逻辑 OR，而 &lsquo;<code
            class=css>and</code>&rsquo; 关键字表示逻辑 AND。

    <div class=example>
        <p>以下是在 CSS 中使用 @media 规则的逗号分隔列表中多个媒体查询的示例：</p>

        <pre><code>@media <em>screen and (color), projection and (color)</em> { &hellip; }</code></pre>
    </div>

    <p>如果媒体查询列表为空（即声明为空字符串或仅由空白组成），则它的计算结果为真。

    <div class=example>
        <p>即这些是等价的：</p>

        <pre><code>@media all { &hellip; }
@media { &hellip; }</code></pre>
    </div>

    <p>逻辑 NOT 可以通过 &lsquo;<code class=css>not</code>&rsquo; 关键字表示。在媒体查询开头出现 &lsquo;<code class=css>not</code>&rsquo;
        关键字会否定结果。即，如果媒体查询在没有 &lsquo;<code class=css>not</code>&rsquo; 关键字的情况下为真，它将变为假，反之亦然。仅支持媒体类型的用户代理（如 HTML4
        中描述的）将无法识别 &lsquo;<code class=css>not</code>&rsquo; 关键字，因此不会应用相关的样式表。

    <div class=example>
        <pre><code>&lt;link rel="stylesheet" media="<em>not screen and (color)</em>" href="example.css" /&gt;</code></pre>
    </div>

    <p>关键字 &lsquo;<code class=css>only</code>&rsquo; 也可以用于将样式表隐藏在旧版用户代理中。用户代理必须像忽略 &lsquo;<code
            class=css>only</code>&rsquo; 关键字一样处理以 &lsquo;<code class=css>only</code>&rsquo; 开头的媒体查询。

    <div class=example>
        <pre><code>&lt;link rel="stylesheet" media="<em>only screen and (color)</em>" href="example.css" /&gt;</code></pre>
    </div>

    <p>媒体查询语法可用于 HTML、XHTML、XML <a href="#XMLSTYLE" rel=biblioentry>[XMLSTYLE]<!--{{XMLSTYLE}}--></a> 和 CSS 的 @import 和
        @media 规则。

    <div class=example>
        <p>以下是在 HTML、XHTML、XML、@import 和 @media 中编写的相同示例：</p>

        <pre><code>&lt;link media="<em>screen and (color), projection and (color)</em>" rel="stylesheet" href="example.css"></code></pre>

        <pre><code>&lt;link media="<em>screen and (color), projection and (color)</em>" rel="stylesheet" href="example.css" /></code></pre>

        <pre><code>&lt;?xml-stylesheet media="<em>screen and (color), projection and (color)</em>" rel="stylesheet" href="example.css" ?></code></pre>

        <pre><code>@import url(example.css) <em>screen and (color), projection and (color)</em>;</code></pre>

        <pre><code>@media <em>screen and (color), projection and (color)</em> { &hellip; }</code></pre>

        <p class=note><a href="#XMLSTYLE" rel=biblioentry>[XMLSTYLE]<!--{{XMLSTYLE}}--></a> 规范尚未更新以在 <code>media</code>
            伪属性中使用媒体查询。</p>
    </div>

    <p>如果媒体特性不适用于用户代理运行的设备，则涉及该媒体特性的表达式将为假。

    <div class=example>
        <p>媒体特性 &lsquo;<code class=css>device-aspect-ratio</code>&rsquo; 仅适用于视觉设备。在听觉设备上，涉及 &lsquo;<code
                class=css>device-aspect-ratio</code>&rsquo; 的表达式因此始终为假：</p>

        <pre><code>&lt;link rel="stylesheet" media="aural and (device-aspect-ratio: 16/9)" href="example.css" /&gt;</code></pre>
    </div>

    <p>如果度量单位不适用于设备，表达式将始终为假。

    <div class=example>
        <p>&lsquo;<code class=css>px</code>&rsquo; 单位不适用于 &lsquo;<code class=css>speech</code>&rsquo; 设备，因此以下媒体查询始终为假：
        </p>

        <pre><code>&lt;link rel="stylesheet" media="speech and (min-device-width: 800px)" href="example.css" /&gt;</code></pre>

        <p>注意，如果在媒体查询开头添加关键字 &lsquo;<code class=css>not</code>&rsquo;，则本例中的媒体查询将为真。</p>
    </div>

    <p>为了避免循环依赖，除非其他特性明确指定它影响媒体查询的解析，否则在计算表达式时无需应用样式表。例如，打印文档的纵横比可能会受到样式表的影响，但涉及 &lsquo;<code
            class=css>device-aspect-ratio</code>&rsquo; 的表达式将基于用户代理的默认纵横比。

    <p class=note>用户代理应当（但不要求）在用户环境发生变化时重新评估和重新布局页面，例如设备从横向模式切换到纵向模式。</p>


    <h2 id=syntax><span class=secno>3. </span>语法</h2>

    <p>媒体查询语法根据<a href="https://www.w3.org/TR/CSS21/grammar.html">CSS2 语法</a>描述。因此，这里未定义的规则由 CSS2
        定义。下面定义的<code>media_query_list</code>产生式替换了 CSS2 中的<code>media_list</code>产生式。<a href="#CSS21"
            rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a></p>

    <pre>media_query_list
 : S* [media_query [ ',' S* media_query ]* ]?
 ;
media_query
 : [ONLY | NOT]? S* media_type S* [ AND S* expression ]*
 | expression [ AND S* expression ]*
 ;
media_type
 : IDENT
 ;
expression
 : '(' S* media_feature S* [ ':' S* expr ]? ')' S*
 ;
media_feature
 : IDENT
 ;</pre>

    <p>COMMENT 记号，如 CSS2 所定义，不出现在语法中（以保持其可读性），但这些记号可以出现在其他记号之间的任意位置。<a href="#CSS21"
            rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a></p>

    <p>引入以下新定义：</p>

    <pre>L  l|\\0{0,4}(4c|6c)(\r\n|[ \t\r\n\f])?|\\l
Y  y|\\0{0,4}(59|79)(\r\n|[ \t\r\n\f])?|\\y</pre>

    <p>引入以下新记号：</p>

    <pre>{O}{N}{L}{Y}      {return ONLY;}
{N}{O}{T}         {return NOT;}
{A}{N}{D}         {return AND;}
{num}{D}{P}{I}    {return RESOLUTION;}
{num}{D}{P}{C}{M} {return RESOLUTION;}</pre>

    <p><code>RESOLUTION</code> 将添加到 CSS2 的 <code>term</code> 产生式中。</p>

    <p>CSS 样式表通常是<a href="https://infra.spec.whatwg.org/#ascii-case-insensitive">ASCII 大小写不敏感的</a>，这同样适用于媒体查询。</p>

    <p>除了遵循语法外，每个媒体查询还需要根据各自的规范使用媒体类型和媒体特性，以被视为合格。</p>

    <div class=example>
        <p>下面的示例中，只有第一个媒体查询是合格的，因为“example”媒体类型不存在。</p>

        <pre><code>@media all { body { background:lime } }
@media example { body { background:red } }</code></pre>
    </div>


    <h3 id=error-handling><span class=secno>3.1. </span>错误处理</h3>

    <p>对于不符合规范的媒体查询，用户代理需要遵循本节描述的规则。</p>

    <div class="correction proposed" id="c2">
        <span class="marker">提议修正 2：</span>
        要求将‘<code>layer</code>’也视为语法错误，而不是未知的媒体类型，当它被用作媒体类型时。

        <p>此更改是<a href="https://github.com/w3c/csswg-drafts/issues/7225">问题 7225</a>的结果。</p>

        <details>
            <summary>此更改已有测试</summary>
            <a href="https://github.com/web-platform-tests/wpt/pull/33940">已为此更改添加测试</a>到<abbr
                title="Web Platform Tests">WPT</abbr>。
            测试结果可以在<a href="https://wpt.fyi/results/css/mediaqueries?q=mq-invalid-media-type-layer">wpt.fyi</a>查看。
        </details>
    </div>

    <ul>
        <li>
            <p><strong>未知的媒体类型。</strong>未知的媒体类型评估为假。实际上，它们被视为与不匹配设备媒体类型的已知媒体类型相同。然而，对于媒体类型<ins
                    cite=#c2>‘<code>layer</code>’</ins>、‘<code>not</code>’、‘<code>and</code>’、‘<code>only</code>’和‘<code>or</code>’有一个例外。即使它们匹配
                IDENT 产生式，它们也不应被视为未知的媒体类型，而应触发格式错误的查询条款。</p>

            <ins cite=#c2>
                <p class=note>注意：排除‘<code>layer</code>’是因为在<a
                        href="https://www.w3.org/TR/css-cascade-5/#layering">层叠层次</a>的<code>@import url(…) layer;</code>语法中使用它时会引起歧义。参见<a
                        href="#biblio-css-cascade-5">[CSS-CASCADE-5]</a>。</p>
            </ins>

            <div class=example>
                <p>媒体查询"<code>unknown</code>"将评估为假，除非<code>unknown</code>实际上是受支持的媒体类型。同样，"<code>not unknown</code>"将评估为真。
                </p>
            </div>

            <div class="example">
                <p>以下是一个格式错误的媒体查询，因为它使用了‘<code>only</code>’和‘<code>or</code>’作为媒体类型。</p>
                <pre><code>@media only and or { … }</code></pre>
            </div>

            <p class=note>未知的媒体类型与不实际匹配 IDENT 产生式的媒体类型不同。后者属于格式错误的媒体查询条款。</p>
        </li>

        <li>
            <p><strong>未知的媒体特性。</strong>当指定的媒体特性之一未知时，用户代理应将媒体查询表示为"<code>not all</code>"。</p>

            <div class=example>
                <pre><code>&lt;link rel="stylesheet" media="screen and (max-weight: 3kg) and (color), (color)" href="example.css" /&gt;</code></pre>

                <p>在这个例子中，第一个媒体查询将被表示为"<code>not all</code>"并评估为假，而第二个媒体查询将被评估为第一个查询未指定的效果。</p>
            </div>

            <div class=example>
                <pre><code>@media (min-orientation:portrait) { &hellip; }</code></pre>

                <p>因为‘<code class=css>orientation</code>’特性不接受‘<code
                        class=css>min-</code>’前缀，所以被表示为"<code>not all</code>"。</p>
            </div>
        </li>

        <li>
            <p><strong>未知的媒体特性值。</strong>与未知的媒体特性一样，当指定的媒体特性值之一未知时，用户代理应将媒体查询表示为"<code>not all</code>"。</p>

            <div class=example>
                <p>媒体查询<code>(color:20example)</code>为‘<code
                        class=css>color</code>’媒体特性指定了一个未知的值，因此被表示为"<code>not all</code>"。</p>
            </div>

            <div class=example>
                <p>由于负长度不允许用于‘<code class=css>width</code>’媒体特性，所以这个媒体查询被表示为"<code>not all</code>"：</p>

                <pre><code>@media (min-width: -100px) { &hellip; }</code></pre>
            </div>
        </li>

        <li>
            <p><strong>格式错误的媒体查询。</strong>用户代理在解析媒体查询时遇到意外记号时，应继续读取直到媒体查询结束，同时遵守<a
                    href="https://www.w3.org/TR/CSS21/syndata.html#block">配对规则</a>（）、[]、{}、""
                和''，并正确处理转义符。具有意外记号的媒体查询表示为"<code>not all</code>"。<a href="#CSS21"
                    rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a></p>

            <div class=example>
                <pre><code>@media (example, all,), speech { /* 仅适用于语音设备 */ }
@media &amp;test, screen           { /* 仅适用于屏幕设备 */ }</code></pre>
            </div>

            <div class=example>
                <p>以下是一个格式错误的媒体查询，因为在‘<code class=css>and</code>’和表达式之间没有空格是不允许的。（这是保留给函数表示法语法的。）</p>

                <pre><code>@media all and(color) { &hellip; }</code></pre>
            </div>

            <p>媒体查询还应遵循宿主语言的错误处理规则。</p>

            <div class=example>
                <pre><code>@media test;,all { body { background:lime } }</code></pre>

                <p>&hellip;将不会生效，因为分号终止了 CSS 中的<code>@media</code>规则。</p>
            </div>
        </li>
    </ul>


    <h2 id=media1><span class=secno>4. </span>媒体特性</h2>

    <p>从语法上看，媒体特性类似于 CSS 属性：它们有名称并接受特定值。然而，属性和媒体特性之间有几个重要的区别：</p>

    <ul>
        <li>属性用于<em>声明</em>中，提供关于如何呈现文档的信息。媒体特性则用于<em>表达式</em>中，描述输出设备的要求。</li>

        <li>大多数媒体特性接受可选的‘<code class=css>min-</code>’或‘<code class=css>max-</code>’前缀，用于表达“大于或等于”和“小于或等于”的约束。此语法用于避免可能与
            HTML 和 XML 冲突的“&lt;”和“&gt;”字符。那些接受前缀的媒体特性通常会与前缀一起使用，但也可以单独使用。</li>

        <li>属性总是需要一个值来形成声明。另一方面，媒体特性可以在没有值的情况下使用。对于媒体特性<var>feature</var>，<code>(<var>feature</var>)</code>如果<code>(<var>feature</var>:<var>x</var>)</code>对于一个值<var>x</var>（非零或零后跟单位标识符，即非<code>0</code>、<code>0px</code>、<code>0em</code>等）评估为真，那么<code>(<var>feature</var>)</code>将评估为真。带有
            min/max 前缀的媒体特性不能在没有值的情况下使用。当带有 min/max 前缀的媒体特性在没有值的情况下使用时，它将使媒体查询变得格式错误。</li>

        <li>属性可能接受更复杂的值，例如涉及多个其他值的计算。媒体特性只接受单个值：一个关键字、一个数字，或带有单位标识符的数字。（唯一的例外是‘<code
                class=css>aspect-ratio</code>’和‘<code class=css>device-aspect-ratio</code>’媒体特性。）</li>

    </ul>

    <div class=example>
        <p>例如，‘<code class=css>color</code>’媒体特性可以形成没有值的表达式（‘<code class=css>(color)</code>’），或带有值的表达式（‘<code
                class=css>(min-color: 1)</code>’）。</p>
    </div>

    <p class=note>本规范定义了可用于视觉和触觉设备的媒体特性。同样，媒体特性也可以为听觉媒体类型定义。</p>


    <h3 id=width><span class=secno>4.1. </span>宽度</h3>

    <div class=media-feature><span class=label>值:</span> &lt;length&gt;<br>
        <span class=label>适用于:</span> 视觉和触觉媒体类型<br>
        <span class=label>接受 min/max 前缀:</span> 是<br>
    </div>

    <p>‘<code class=css>width</code>’ 媒体特性描述输出设备目标显示区域的宽度。对于连续媒体，这是视口的宽度（如 CSS2，第 9.1.1 节<a href="#CSS21"
            rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>所述），包括渲染的滚动条的大小（如果有）。对于分页媒体，这是页面框的宽度（如 CSS2，第 13.2 节<a
            href="#CSS21" rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>所述）。</p>

    <p>指定的 &lt;length&gt; 不能为负值。</p>

    <div class=example>
        <p>例如，这个媒体查询表达了样式表可用于宽度大于 25cm 的打印输出：</p>

        <pre><code>&lt;link rel="stylesheet" media="print and (min-width: 25cm)" href="http://&hellip;" /></code></pre>
    </div>

    <div class=example>
        <p>这个媒体查询表达了样式表可用于视口（屏幕/纸张上渲染文档的部分）宽度在 400 到 700 像素之间的设备：</p>

        <pre><code>@media screen and (min-width: 400px) and (max-width: 700px) { &hellip; }</code></pre>
    </div>

    <div class=example>
        <p>这个媒体查询表达了如果视口宽度大于 20em，则样式表可用于屏幕和手持设备。</p>

        <pre><code>@media handheld and (min-width: 20em),
  screen and (min-width: 20em) { &hellip; }</code></pre>

        <p>‘<code class=css>em</code>’ 值相对于‘font-size’的初始值。</p>
    </div>


    <h3 id=height><span class=secno>4.2. </span>高度</h3>

    <div class=media-feature><span class=label>值:</span> &lt;length&gt;<br>
        <span class=label>适用于:</span> 视觉和触觉媒体类型<br>
        <span class=label>接受 min/max 前缀:</span> 是<br>
    </div>

    <p>‘<code class=css>height</code>’ 媒体特性描述输出设备目标显示区域的高度。对于连续媒体，这是视口的高度，包括渲染的滚动条的大小（如果有）。对于分页媒体，这是页面框的高度。</p>

    <p>指定的 &lt;length&gt; 不能为负值。</p>

    <h3 id=device-width><span class=secno>4.3. </span>设备宽度</h3>

    <div class=media-feature><span class=label>值:</span> &lt;length&gt;<br>
        <span class=label>适用于:</span> 视觉和触觉媒体类型<br>
        <span class=label>接受 min/max 前缀:</span> 是<br>
    </div>

    <p>‘<code class=css>device-width</code>’ 媒体特性描述输出设备的渲染表面的宽度。对于连续媒体，这是屏幕的宽度。对于分页媒体，这是页面纸张大小的宽度。</p>

    <p>指定的 &lt;length&gt; 不能为负值。</p>

    <div class=example>
        <pre><code>@media screen and (device-width: 800px) { &hellip; }</code></pre>

        <p>在上面的例子中，样式表将仅适用于当前显示正好 800 个水平像素的屏幕。‘<code class=css>px</code>’ 单位是逻辑单位，如 <a href="#units">单位</a> 部分所述。</p>
    </div>

    <h3 id=device-height><span class=secno>4.4. </span>设备高度</h3>

    <div class=media-feature><span class=label>值:</span> &lt;length&gt;<br>
        <span class=label>适用于:</span> 视觉和触觉媒体类型<br>
        <span class=label>接受 min/max 前缀:</span> 是<br>
    </div>

    <p>‘<code class=css>device-height</code>’ 媒体特性描述输出设备的渲染表面的高度。对于连续媒体，这是屏幕的高度。对于分页媒体，这是页面纸张大小的高度。</p>

    <p>指定的 &lt;length&gt; 不能为负值。</p>

    <div class=example>
        <pre><code>&lt;link rel="stylesheet" media="screen and (device-height: 600px)" /&gt;</code></pre>

        <p>在上面的例子中，样式表将仅适用于高度正好 600 像素的屏幕。注意，‘<code class=css>px</code>’ 单位的定义与 CSS 的其他部分相同。</p>
    </div>

    <h3 id=orientation><span class=secno>4.5. </span>方向</h3>

    <div class=media-feature><span class=label>值:</span> portrait | landscape<br>
        <span class=label>适用于:</span> 位图媒体类型<br>
        <span class=label>接受 min/max 前缀:</span> 否<br>
    </div>

    <p>‘<code class=css>orientation</code>’ 媒体特性是‘<code class=css>portrait</code>’（纵向）当‘<code class=css>height</code>’
        媒体特性的值大于或等于‘<code class=css>width</code>’ 媒体特性的值时。否则，‘<code class=css>orientation</code>’ 是‘<code
            class=css>landscape</code>’（横向）。</p>

    <div class=example>
        <pre><code>@media all and (orientation:portrait) { &hellip; }
@media all and (orientation:landscape) { &hellip; }</code></pre>
    </div>

    <h3 id=aspect-ratio><span class=secno>4.6. </span>宽高比</h3>

    <div class=media-feature><span class=label>值:</span> &lt;ratio&gt;<br>
        <span class=label>适用于:</span> 位图媒体类型<br>
        <span class=label>接受 min/max 前缀:</span> 是<br>
    </div>

    <p>‘<code class=css>aspect-ratio</code>’ 媒体特性定义为‘<code class=css>width</code>’ 媒体特性值与‘<code class=css>height</code>’
        媒体特性值的比率。</p>

    <h3 id=device-aspect-ratio><span class=secno>4.7.
        </span>设备宽高比</h3>

    <div class=media-feature><span class=label>值:</span> &lt;ratio&gt;<br>
        <span class=label>适用于:</span> 位图媒体类型<br>
        <span class=label>接受 min/max 前缀:</span> 是<br>
    </div>

    <p>‘<code class=css>device-aspect-ratio</code>’ 媒体特性定义为‘<code class=css>device-width</code>’ 媒体特性值与‘<code
            class=css>device-height</code>’ 媒体特性值的比率。</p>

    <div class=example>
        <p>例如，如果具有方形像素的屏幕设备具有 1280 个水平像素和 720 个垂直像素（通常称为“16:9”），以下媒体查询将全部匹配该设备：</p>

        <pre><code>@media screen and (device-aspect-ratio: 16/9) { &hellip; }
@media screen and (device-aspect-ratio: 32/18) { &hellip; }
@media screen and (device-aspect-ratio: 1280/720) { &hellip; }
@media screen and (device-aspect-ratio: 2560/1440) { &hellip; }</code></pre>
    </div>

    <h3 id=color><span class=secno>4.8. </span>颜色</h3>

    <div class=media-feature><span class=label>值:</span>
        &lt;integer&gt;<br>
        <span class=label>适用于:</span> 视觉媒体类型<br>
        <span class=label>接受 min/max 前缀:</span> 是<br>
    </div>

    <p>‘<code class=css>color</code>’ 媒体特性描述输出设备的每个颜色组件的位数。如果设备不是彩色设备，则该值为零。</p>

    <p>指定的 &lt;integer&gt; 不能为负值。</p>

    <div class=example>
        <p>例如，以下两个媒体查询表示样式表适用于所有彩色设备：</p>

        <pre><code>@media all and (color) { &hellip; }
@media all and (min-color: 1) { &hellip; }</code></pre>
    </div>

    <div class=example>
        <p>这个媒体查询表示样式表适用于每个颜色组件具有 2 位或更多位的彩色设备：</p>

        <pre><code>@media all and (min-color: 2) { &hellip; }</code></pre>
    </div>

    <p>如果不同颜色组件由不同数量的位表示，则使用最小的数量。</p>

    <div class=example>
        <p>例如，如果 8 位颜色系统表示红色组件为 3 位，绿色组件为 3 位，蓝色组件为 2 位，则‘<code class=css>color</code>’ 媒体特性的值为 2。</p>
    </div>

    <p>在具有索引颜色的设备中，使用查找表中每个颜色组件的最小位数。</p>

    <p class=note>所描述的功能只能在表面级别描述颜色能力。如果需要进一步的功能，RFC2531 <a href="#RFC2531"
            rel=biblioentry>[RFC2531]<!--{{RFC2531}}--></a> 提供了更具体的媒体特性，可能在后续阶段得到支持。</p>

    <h3 id=color-index><span class=secno>4.9. </span>颜色索引</h3>

    <div class=media-feature><span class=label>值:</span>
        &lt;integer&gt;<br>
        <span class=label>适用于:</span> 视觉媒体类型<br>
        <span class=label>接受 min/max 前缀:</span> 是<br>
    </div>

    <p>‘<code class=css>color-index</code>’ 媒体特性描述输出设备颜色查找表中的条目数量。如果设备不使用颜色查找表，则该值为零。</p>

    <p>指定的 &lt;integer&gt; 不能为负值。</p>

    <div class=example>
        <p>例如，这里有两种方式表示样式表适用于所有颜色索引设备：</p>

        <pre><code>@media all and (color-index) { &hellip; }
@media all and (min-color-index: 1) { &hellip; }</code></pre>
    </div>

    <div class=example>
        <p>这个媒体查询表示样式表适用于具有 256 个或更多条目的颜色索引设备：</p>

        <pre><code>&lt;?xml-stylesheet media="all and (min-color-index: 256)"
  href="http://www.example.com/&hellip;" ?&gt;</code></pre>
    </div>

    <h3 id=monochrome><span class=secno>4.10. </span>单色</h3>

    <div class=media-feature><span class=label>值:</span>
        &lt;integer&gt;<br>
        <span class=label>适用于:</span> 视觉媒体类型<br>
        <span class=label>接受 min/max 前缀:</span> 是<br>
    </div>

    <p>‘<code class=css>monochrome</code>’ 媒体特性描述单色帧缓冲器中每像素的位数。如果设备不是单色设备，输出设备值为 0。</p>

    <p>指定的 &lt;integer&gt; 不能为负值。</p>

    <div class=example>
        <p>例如，这里有两种方式表示样式表适用于所有单色设备：</p>

        <pre><code>@media all and (monochrome) { &hellip; }
@media all and (min-monochrome: 1) { &hellip; }</code></pre>
    </div>

    <div class=example>
        <p>表示样式表适用于具有每像素多于 2 位的单色设备：</p>

        <pre><code>@media all and (min-monochrome: 2) { &hellip; }</code></pre>
    </div>

    <div class=example>
        <p>表示彩色页面的样式表与单色页面的样式表不同：</p>

        <pre><code>&lt;link rel="stylesheet" media="print and (color)" href="http://&hellip;" /&gt;
&lt;link rel="stylesheet" media="print and (monochrome)" href="http://&hellip;" /&gt;</code></pre>
    </div>

    <h3 id=resolution><span class=secno>4.11. </span>分辨率</h3>

    <div class=media-feature><span class=label>值:</span>
        &lt;resolution&gt;<br>
        <span class=label>适用于:</span> 位图媒体类型<br>
        <span class=label>接受 min/max 前缀:</span> 是<br>
    </div>

    <p>‘<code class=css>resolution</code>’ 媒体特性描述输出设备的分辨率，即像素的密度。在查询具有非方形像素的设备时，在‘<code
            class=css>min-resolution</code>’查询中，最不密集的维度必须与指定值进行比较，而在‘<code
            class=css>max-resolution</code>’查询中，最密集的维度必须进行比较。不带“min-”或“max-”前缀的‘<code
            class=css>resolution</code>’查询从不匹配具有非方形像素的设备。</p>

    <p>对于打印机，这对应于筛网分辨率（用于打印任意颜色点的分辨率）。</p>

    <div class=example>
        <p>例如，这个媒体查询表示样式表适用于分辨率大于 300 点每英寸的设备：</p>

        <pre><code>@media print and (min-resolution: 300dpi) { &hellip; }</code></pre>
    </div>

    <div class=example>
        <p>这个媒体查询表示样式表适用于分辨率大于 118 点每厘米的设备：</p>

        <pre><code>@media print and (min-resolution: 118dpcm) { &hellip; }</code></pre>
    </div>

    <h3 id=scan><span class=secno>4.12. </span>扫描</h3>

    <div class=media-feature><span class=label>值:</span> progressive |
        interlace<br>
        <span class=label>适用于:</span> "tv" 媒体类型<br>
        <span class=label>接受 min/max 前缀:</span> 否<br>
    </div>

    <p>‘<code class=css>scan</code>’ 媒体特性描述 "tv" 输出设备的扫描过程。</p>

    <div class=example>
        <p>例如，这个媒体查询表示样式表适用于具有渐进扫描的电视设备：</p>

        <pre><code>@media tv and (scan: progressive) { &hellip; }</code></pre>
    </div>

    <h3 id=grid><span class=secno>4.13. </span>网格</h3>

    <div class=media-feature><span class=label>值:</span>
        &lt;integer&gt;<br>
        <span class=label>适用于:</span> 视觉和触觉媒体类型<br>
        <span class=label>接受 min/max 前缀:</span> 否<br>
    </div>

    <p>‘<code class=css>grid</code>’ 媒体特性用于查询输出设备是网格还是位图。如果输出设备是基于网格的（例如，"tty" 终端或只有一个固定字体的手机显示屏），则值为 1。否则，值为 0。</p>

    <p>只有 0 和 1 是有效值。（包括 -0。）因此，其他任何值都会创建一个格式错误的媒体查询。</p>

    <div class=example>
        <p>这里有两个例子：</p>

        <pre><code>@media handheld and (grid) and (max-width: 15em) { &hellip; }</code>
<code>@media handheld and (grid) and (max-device-height: 7em) { &hellip; }</code></pre>
    </div>


    <h2 id=values><span class=secno>5. </span>值</h2>

    <p>本规范还引入了两个新值。</p>

    <p>&lt;ratio> 值是一个正的（非零或负）&lt;integer>，后跟可选的空白符，后跟斜线（‘<code class=css>/</code>’），再跟可选的空白符，最后跟一个正的 &lt;integer>。</p>

    <p>&lt;resolution> 值是一个正的 &lt;number>，紧跟一个单位标识符（‘<code class=css>dpi</code>’ 或 ‘<code class=css>dpcm</code>’）。</p>

    <p>空白符、&lt;integer>、&lt;number> 和本规范使用的其他值与 CSS 的其他部分相同，规范由 CSS 2.1 定义。<a href="#CSS21"
            rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a></p>

    <h2 id=units><span class=secno>6. </span>单位</h2>

    <p>媒体查询中使用的单位与 CSS 其他部分中的相同。例如，像素单位表示 CSS 像素而非物理像素。</p>

    <p>媒体查询中的相对单位基于初始值，这意味着单位永远不会基于声明的结果。例如，在 HTML 中，‘<code class=css>em</code>’ 单位相对于‘<code
            class=property>font-size</code>’的初始值。</p>

    <h3 id=resolution0><span class=secno>6.1. </span>分辨率</h3>

    <p>‘<code class=css>dpi</code>’ 和 ‘<code class=css>dpcm</code>’ 单位描述输出设备的分辨率，即设备像素的密度。分辨率单位标识符为：</p>

    <dl>
        <dt>dpi</dt>

        <dd>每 CSS ‘<code class=css>英寸</code>’ 的点数</dd>

        <dt>dpcm</dt>

        <dd>每 CSS ‘<code class=css>厘米</code>’ 的点数</dd>
    </dl>

    <p>在本规范中，这些单位仅用于 ‘<code class=css>resolution</code>’ 媒体特性。</p>

    <h2 id=changes><span class=secno>7. </span>更改</h2>

    <h3 id=changes-2022><span class=secno>7.1. </span>自 2022 年 4 月 5 日推荐以来的更改</h3>

    <p>一个早期的提议修正被规范纳入到推荐中：</p>
    <ul>
        <li id=c1>
            <p>先前在 <a href="#error-handling">第 3.1 节</a> 中的“提议修正 1”：
                澄清关键字 ‘<code>not</code>’、‘<code>and</code>’、‘<code>only</code>’ 和 ‘<code>or</code>’
                不应被视为未知的媒体类型，而应在作为媒体类型使用时作为语法错误处理。</p>

            <blockquote>
                <p>未知媒体类型的计算结果为
                    false。实际上，它们被视为与设备媒体类型不匹配的已知媒体类型相同。
                    <ins>但是，对于媒体类型‘<code>not</code>’、‘<code>and</code>’、‘<code>only</code>’ 和
                        ‘<code>or</code>’的情况做了例外处理。
                        即使它们与 IDENT 生产匹配，它们也不应被视为未知媒体类型，而是触发格式错误的查询条款。</ins>
                </p>
            </blockquote>

            <p>这项更改的理由可以在<a href="https://lists.w3.org/Archives/Public/www-style/2013May/0783.html">2013 年 5 月 30 日 CSS
                    工作组电话会议的会议记录</a>中找到，并在相关邮件中进行引用。</p>

            <p><a
                    href="https://github.com/web-platform-tests/wpt/commit/ea1821d4bd24ed1e859db03571cca8e783dbf957">这项更改的测试</a>已添加到
                <abbr title="Web Platform Tests">WPT</abbr> 中。结果可以在 <a
                    href="https://wpt.fyi/results/css/mediaqueries?q=mq-invalid-media-type-0">wpt.fyi</a> 上查看。
            </p>
    </ul>

    <p>提出了一项提议修正：</p>
    <ul>
        <li><a href="#c2">提议修正 2</a> 在 <a href="#error-handling">第 3.1 节</a> 中：要求‘<code>layer</code>’
            也不能被视为未知媒体类型，而应在作为媒体类型使用时作为语法错误处理。
    </ul>

    <h3 id=changes-2012><span class=secno>7.2. </span>自 2012 年 6 月 19 日推荐以来的更改</h3>

    <p>引入了提议修正：</p>
    <ul>
        <li><a href="#c1">提议修正 1</a> 在 <a href="#error-handling">第 3.1 节</a> 中：澄清关键字
            ‘<code>not</code>’、‘<code>and</code>’、‘<code>only</code>’ 和 ‘<code>or</code>’
            不应被视为未知的媒体类型，而应在作为媒体类型使用时作为语法错误处理。</li>
    </ul>

    <p>还进行了少数编辑和标记修正：</p>

    <ul>
        <li><a href="#media0">第 2 节</a>：在一个示例中删除了一个多余的属性。
            <blockquote>
                <pre><code>&lt;link <del>rel="stylesheet" </del>media="<em>screen and (color), projection and (color)</em>" rel="stylesheet" href="example.css"&gt;</code></pre>
                <pre><code>&lt;link <del>rel="stylesheet" </del>media="<em>screen and (color), projection and (color)</em>" rel="stylesheet" href="example.css" /&gt;</code></pre>
            </blockquote>

        <li><a href="#media0">第 2 节</a>：调整了一个句子，以便其他规范更容易扩展此规范。
            <blockquote>
                为避免循环依赖，<del>它从不</del><ins>除非另一个特性明确规定它影响媒体查询的解析，否则它不</ins>需要应用样式表来评估表达式。
            </blockquote>

        <li><a href="#syntax">第 3 节</a>：在描述性（而非规定性）句子中使用了更精确的术语来描述 css 的语法。
            <blockquote>
                CSS 样式表通常是 <del>不区分大小写的</del> <a href="https://infra.spec.whatwg.org/#ascii-case-insensitive"><ins>ASCII
                        不区分大小写</ins></a> 的，媒体查询也是如此。
            </blockquote>
            这一说法的真实性通过<a href="https://wpt.fyi/results/css/mediaqueries/mq-case-insensitive-001.html">测试</a>得到验证。

        <li><a href="#grid">第 4.13 节</a>：在一个示例中纠正了一个语法错误。
            <blockquote>
                <pre><code>@media handheld and (grid) and (<del>device-max-height</del><ins>max-device-height</ins>: 7em) { … }</code></pre>
            </blockquote>

        <li>更新了文献引用，指向最新版本。

        <li>更新了整个规范中的各种链接，从 http 切换到 https。
    </ul>

    <h3 id=changes-2010><span class=secno>7.3. </span>自 2010 年 7 月 27 日候选推荐以来的更改</h3>

    <p>自 <a href="https://www.w3.org/TR/2010/CR-css3-mediaqueries-20100727/">2010 年 7 月 27 日候选推荐</a> 以来，对本规范进行了以下更改：</p>

    <ul>
        <li><a href="#resolution">第 4.11 节</a>：澄清了打印机的分辨率含义，因为对点数的含义存在歧义。
            <blockquote>
                <p><ins>对于打印机，这对应于网屏分辨率（打印任意颜色的点的分辨率）。</ins>
            </blockquote>

        <li><a href="#units">第 6.1 节</a>：明确指出提到的‘<code class=css>inch</code>’和‘<code class=css>cm</code>’是 CSS
            单位，而不是物理单位。
            <blockquote>
                <dl>
                    <dt>dpi</dt>

                    <dd>每<ins>CSS ‘<code class=css>英寸</code>’</ins><del>英寸</del>的点数</dd>

                    <dt>dpcm</dt>

                    <dd>每<ins>CSS ‘<code class=css>厘米</code>’</ins><del>厘米</del>的点数</dd>
                </dl>
            </blockquote>

        <li><a href="#width">第 4.1 节</a>：调整了错误的非规范性措辞，以匹配 <a href="#units">第 6 节</a>中的正确规范性措辞。
            <blockquote>
                <p>‘<code class=css>em</code>’ 值是相对于<del>根元素的字体大小</del><ins>‘font-size’ 的初始值</ins>。</p>
            </blockquote>

        <li><a href="#units">第 6 节</a>：澄清了单位永远不会基于声明结果。
            <blockquote>
                <p>媒体查询中的相对单位基于初始值<ins>，这意味着单位永远不会基于声明的结果</ins>。例如，在 HTML 中，‘<code class=css>em</code>’ 单位相对于‘<code
                        class=property>font-size</code>’的初始值。</p>
            </blockquote>
    </ul>

    <h2 class=no-num id=acknowledgments>致谢</h2>

    <p>本规范是 W3C 层叠样式表工作组的成果。</p>

    <p>来自 Bj&ouml;rn H&ouml;hrmann、Christoph P&auml;per、Chris Lilley、Simon Pieters、Rijk van Geijtenbeek、Sigurd
        Lerstad、Arve Bersvendsen、Susan Lesch、Philipp Hoschka、Roger Gimson、Steven Pemberton、Simon Kissane、Melinda Grant 和
        L. David Baron 的评论改进了本规范。</p>

    <h2 class="no-num heading settled" id="privacy"><span class="content">隐私考虑</span><a class="self-link"
            href="#privacy"></a></h2>
    <p>在本规范上没有报告新的隐私考虑事项。</p>
    <h2 class="no-num heading settled" id="security"><span class="content">安全考虑</span><a class="self-link"
            href="#security"></a></h2>
    <p>在本规范上没有报告新的安全考虑事项。</p>

    <h2 class=no-num id=references>参考文献</h2>

    <h3 class=no-num id=normative-references>规范性参考文献</h3>
    <!--begin-normative-->
    <!-- Sorted by label -->

    <dl class=bibliography>
        <dt style="display: none"><!-- keeps the doc valid if the DL is empty -->
            <!---->

        <dt id=CSS21>[CSS21]

        <dd>Bert Bos 等人. <a href="https://www.w3.org/TR/2011/REC-CSS2-20110607"><cite>层叠样式表第 2 级修订版
                    1（CSS&#160;2.1）规范。</cite></a> 2011 年 6 月 7 日. W3C 推荐. URL: <a
                href="https://www.w3.org/TR/2011/REC-CSS2-20110607">http://www.w3.org/TR/2011/REC-CSS2-20110607</a>
        </dd>
        <!---->
    </dl>
    <!--end-normative-->

    <h3 class=no-num id=other-references>其他参考文献</h3>
    <!--begin-informative-->
    <!-- Sorted by label -->

    <dl class=bibliography>
        <dt style="display: none"><!-- keeps the doc valid if the DL is empty -->
            <!---->

        <dt id=HTML401>[HTML401]

        <dd>Dave Raggett, Arnaud Le Hors 和 Ian Jacobs. <a
                href="https://www.w3.org/TR/2018/SPSD-html401-20180327/"><cite>HTML 4.01
                    规范。</cite></a> 1999 年 12 月 24 日发布，2018 年 3 月 27 日取代。W3C 推荐. URL: <a
                href="https://www.w3.org/TR/2018/SPSD-html401-20180327/">https://www.w3.org/TR/2018/SPSD-html401-20180327/</a>
        </dd>
        <!---->

        <dt id="biblio-html">[HTML]

        <dd>Anne van Kesteren 等人. <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML 标准</cite></a>. 现行标准. URL:
            <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
        </dd>
        <!---->

        <dt id=RFC2531>[RFC2531]

        <dd>G. Klyne 和 L. McIntyre. <a href="http://www.ietf.org/rfc/rfc2531.txt"><cite>Internet 传真内容特征架构。</cite></a>
            1999 年 3 月. Internet RFC 2531. URL: <a
                href="http://www.ietf.org/rfc/rfc2531.txt">http://www.ietf.org/rfc/rfc2531.txt</a>
        </dd>
        <!---->

        <dt id=XMLSTYLE>[XMLSTYLE]

        <dd>James Clark, Simon Pieters 和 Henry S. Thompson. <a
                href="https://www.w3.org/TR/2010/REC-xml-stylesheet-20101028/"><cite>将样式表与 XML 文档关联 1.0（第二版）</cite></a>
            2010 年 10 月 28 日. W3C 推荐. URL: <a
                href="https://www.w3.org/TR/2010/REC-xml-stylesheet-20101028/">http://www.w3.org/TR/2010/REC-xml-stylesheet-20101028/</a>
        </dd>
        <!---->

        <dt id="biblio-css-cascade-5"><ins cite=#c2>[CSS-CASCADE-5]</ins>
        <dd><ins cite=#c2>
                Elika Etemad, Miriam Suzanne 和 Tab Atkins Jr.。
                <a href="https://www.w3.org/TR/css-cascade-5/"><cite>CSS 层叠和继承第 5 级</cite></a>。
                2022 年 1 月 13 日。候选推荐。
                URL: <a href="https://www.w3.org/TR/css-cascade-5/">https://www.w3.org/TR/css-cascade-5/</a></ins>
        </dd>
    </dl>

    <!--end-informative-->

    <p role="navigation" id="back-to-top"><a href="#title"><abbr title="Back to top">↑</abbr></a></p>

    <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>