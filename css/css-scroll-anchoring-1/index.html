<!doctype html>
<html lang="zh-hans">

<head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <title>CSS 滚动锚定模块 第 1 级</title>
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
    <meta content="revising" name="csswg-work-status">
    <meta content="WD" name="w3c-status">
    <meta
        content="当可见区域上方的 DOM 元素发生变化时，<a>滚动框</a>可能会导致页面在用户正在浏览内容时发生移动。本规范提出了一种机制，通过跟踪锚点节点的位置并相应调整滚动偏移，来缓解这种令人不适的用户体验。本规范还为 Web 开发者提出了一种 API，用于选择不使用此行为。"
        name="abstract">
    <link href="https://www.w3.org/TR/css-scroll-anchoring-1/default.css" rel="stylesheet" type="text/css">
    <meta content="Bikeshed version fbed39c2, updated Wed Nov 11 14:55:37 2020 -0800" name="generator">
    <link href="https://www.w3.org/TR/css-scroll-anchoring-1/" rel="canonical">
    <meta content="18d8f5166269ff804d40a23723861bc27208771d" name="document-revision">
    <style>
        /* style-autolinks */

        .css.css,
        .property.property,
        .descriptor.descriptor {
            color: var(--a-normal-text);
            font-size: inherit;
            font-family: inherit;
        }

        .css::before,
        .property::before,
        .descriptor::before {
            content: "‘";
        }

        .css::after,
        .property::after,
        .descriptor::after {
            content: "’";
        }

        .property,
        .descriptor {
            /* Don't wrap property and descriptor names */
            white-space: nowrap;
        }

        .type {
            /* CSS value <type> */
            font-style: italic;
        }

        pre .property::before,
        pre .property::after {
            content: "";
        }

        [data-link-type="property"]::before,
        [data-link-type="propdesc"]::before,
        [data-link-type="descriptor"]::before,
        [data-link-type="value"]::before,
        [data-link-type="function"]::before,
        [data-link-type="at-rule"]::before,
        [data-link-type="selector"]::before,
        [data-link-type="maybe"]::before {
            content: "‘";
        }

        [data-link-type="property"]::after,
        [data-link-type="propdesc"]::after,
        [data-link-type="descriptor"]::after,
        [data-link-type="value"]::after,
        [data-link-type="function"]::after,
        [data-link-type="at-rule"]::after,
        [data-link-type="selector"]::after,
        [data-link-type="maybe"]::after {
            content: "’";
        }

        [data-link-type].production::before,
        [data-link-type].production::after,
        .prod [data-link-type]::before,
        .prod [data-link-type]::after {
            content: "";
        }

        [data-link-type=element],
        [data-link-type=element-attr] {
            font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
            font-size: .9em;
        }

        [data-link-type=element]::before {
            content: "<"
        }

        [data-link-type=element]::after {
            content: ">"
        }

        [data-link-type=biblio] {
            white-space: pre;
        }
    </style>
    <style>
        /* style-counters */

        body {
            counter-reset: example figure issue;
        }

        .issue {
            counter-increment: issue;
        }

        .issue:not(.no-marker)::before {
            content: "Issue " counter(issue);
        }

        .example {
            counter-increment: example;
        }

        .example:not(.no-marker)::before {
            content: "Example " counter(example);
        }

        .invalid.example:not(.no-marker)::before,
        .illegal.example:not(.no-marker)::before {
            content: "Invalid Example" counter(example);
        }

        figcaption {
            counter-increment: figure;
        }

        figcaption:not(.no-marker)::before {
            content: "Figure " counter(figure) " ";
        }
    </style>
    <style>
        /* style-dfn-panel */

        :root {
            --dfnpanel-bg: #ddd;
            --dfnpanel-text: var(--text);
        }

        .dfn-panel {
            position: absolute;
            z-index: 35;
            height: auto;
            width: -webkit-fit-content;
            width: fit-content;
            max-width: 300px;
            max-height: 500px;
            overflow: auto;
            padding: 0.5em 0.75em;
            font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
            background: var(--dfnpanel-bg);
            color: var(--dfnpanel-text);
            border: outset 0.2em;
        }

        .dfn-panel:not(.on) {
            display: none;
        }

        .dfn-panel * {
            margin: 0;
            padding: 0;
            text-indent: 0;
        }

        .dfn-panel>b {
            display: block;
        }

        .dfn-panel a {
            color: var(--dfnpanel-text);
        }

        .dfn-panel a:not(:hover) {
            text-decoration: none !important;
            border-bottom: none !important;
        }

        .dfn-panel>b+b {
            margin-top: 0.25em;
        }

        .dfn-panel ul {
            padding: 0;
        }

        .dfn-panel li {
            list-style: inside;
        }

        .dfn-panel.activated {
            display: inline-block;
            position: fixed;
            left: .5em;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - 1.5em - .4em - .5em);
            max-height: 30vh;
        }

        .dfn-paneled {
            cursor: pointer;
        }
    </style>
    <style>
        /* style-md-lists */

        /* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
        [data-md]> :first-child {
            margin-top: 0;
        }

        [data-md]> :last-child {
            margin-bottom: 0;
        }
    </style>
    <style>
        /* style-selflinks */

        :root {
            --selflink-text: white;
            --selflink-bg: gray;
            --selflink-hover-text: black;
        }

        .heading,
        .issue,
        .note,
        .example,
        li,
        dt {
            position: relative;
        }

        a.self-link {
            position: absolute;
            top: 0;
            left: calc(-1 * (3.5rem - 26px));
            width: calc(3.5rem - 26px);
            height: 2em;
            text-align: center;
            border: none;
            transition: opacity .2s;
            opacity: .5;
        }

        a.self-link:hover {
            opacity: 1;
        }

        .heading>a.self-link {
            font-size: 83%;
        }

        li>a.self-link {
            left: calc(-1 * (3.5rem - 26px) - 2em);
        }

        dfn>a.self-link {
            top: auto;
            left: auto;
            opacity: 0;
            width: 1.5em;
            height: 1.5em;
            background: var(--selflink-bg);
            color: var(--selflink-text);
            font-style: normal;
            transition: opacity .2s, background-color .2s, color .2s;
        }

        dfn:hover>a.self-link {
            opacity: 1;
        }

        dfn>a.self-link:hover {
            color: var(--selflink-hover-text);
        }

        a.self-link::before {
            content: "¶";
        }

        .heading>a.self-link::before {
            content: "§";
        }

        dfn>a.self-link::before {
            content: "#";
        }
    </style>
    <style>
        /* style-var-click-highlighting */

        var {
            cursor: pointer;
        }

        var.selected0 {
            background-color: #F4D200;
            box-shadow: 0 0 0 2px #F4D200;
        }

        var.selected1 {
            background-color: #FF87A2;
            box-shadow: 0 0 0 2px #FF87A2;
        }

        var.selected2 {
            background-color: #96E885;
            box-shadow: 0 0 0 2px #96E885;
        }

        var.selected3 {
            background-color: #3EEED2;
            box-shadow: 0 0 0 2px #3EEED2;
        }

        var.selected4 {
            background-color: #EACFB6;
            box-shadow: 0 0 0 2px #EACFB6;
        }

        var.selected5 {
            background-color: #82DDFF;
            box-shadow: 0 0 0 2px #82DDFF;
        }

        var.selected6 {
            background-color: #FFBCF2;
            box-shadow: 0 0 0 2px #FFBCF2;
        }
    </style>
    <link href="https://www.w3.org/StyleSheets/TR/2016/W3C-WD" rel="stylesheet" type="text/css">

<body class="h-entry">
    <div class="head">
        <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48"
                    src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" width="72"> </a> </p>
        <h1 class="p-name no-ref" id="title">CSS 滚动锚定模块 第 1 级</h1>
        <h2 class="no-num no-toc no-ref heading settled" id="subtitle"><span class="content">W3C 工作草案，<time
                    class="dt-updated" datetime="2020-11-11">2020 年 11 月 11 日</time></span></h2>
        <div data-fill-with="spec-metadata">
            <dl>
                <dt>此版本:
                <dd><a class="u-url"
                        href="https://www.w3.org/TR/2020/WD-css-scroll-anchoring-1-20201111/">https://www.w3.org/TR/2020/WD-css-scroll-anchoring-1-20201111/</a>
                <dt>最新发布版本:
                <dd><a
                        href="https://www.w3.org/TR/css-scroll-anchoring-1/">https://www.w3.org/TR/css-scroll-anchoring-1/</a>
                <dt>编辑草案:
                <dd><a
                        href="https://drafts.csswg.org/css-scroll-anchoring">https://drafts.csswg.org/css-scroll-anchoring</a>
                <dt>之前版本:
                <dd><a href="https://www.w3.org/TR/2020/WD-css-scroll-anchoring-1-20200211/"
                        rel="prev">https://www.w3.org/TR/2020/WD-css-scroll-anchoring-1-20200211/</a>
                <dt>问题追踪:
                <dd><a href="https://github.com/w3c/csswg-drafts/labels/css-scroll-anchoring-1">CSSWG 问题仓库</a>
                <dt class="editor">编辑:
                <dd class="editor p-author h-card vcard"><span class="p-name fn">Steve Kobes</span> (<span
                        class="p-org org">Google</span>)
                <dd class="editor p-author h-card vcard" data-editor-id="42199"><a class="p-name fn u-url url"
                        href="http://xanthir.com/contact/">Tab Atkins-Bittner</a> (<span
                        class="p-org org">Google</span>)
                <dt>为此规范提出建议:
                <dd><a href="https://github.com/w3c/csswg-drafts/blob/master/css-scroll-anchoring-1/Overview.bs">GitHub
                        编辑</a>
            </dl>
        </div>
        <div data-fill-with="warning"></div>
        <p class="copyright" data-fill-with="copyright"><a
                href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">版权</a> © 2020 <a
                href="https://www.w3.org/"><abbr title="万维网联盟">W3C</abbr></a><sup>®</sup> (<a
                href="https://www.csail.mit.edu/"><abbr title="麻省理工学院">MIT</abbr></a>, <a
                href="https://www.ercim.eu/"><abbr title="欧洲信息与数学研究联盟">ERCIM</abbr></a>, <a
                href="https://www.keio.ac.jp/">庆应义塾大学</a>, <a href="https://ev.buaa.edu.cn/">北京航空航天大学</a>)。W3C <a
                href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">责任</a>、<a
                href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">商标</a>及 <a
                href="https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document"
                rel="license">许可文件</a>的相关规则适用。</p>
        <hr title="标题分隔线">
    </div>
    <div class="p-summary" data-fill-with="abstract">
        <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">摘要</span></h2>
        <p>当可见区域上方的 DOM 元素发生变化时，<a data-link-type="dfn" href="https://drafts.csswg.org/cssom-view-1/#scrolling-box"
                id="ref-for-scrolling-box">滚动框</a>
            可能会导致页面在用户正在浏览内容时发生移动。</p>
        <p>本规范提出了一种机制，通过跟踪锚点节点的位置并相应调整滚动偏移，来缓解这种令人不适的用户体验。</p>
        <p>本规范还为 Web 开发者提出了一种 API，用于选择不使用此行为。</p>
        <a href="https://www.w3.org/TR/CSS/">CSS</a> 是一种用于描述结构化文档（如 HTML 和 XML）在屏幕、纸张等上的渲染语言。
    </div>
    <h2 class="no-num no-toc no-ref heading settled" id="status"><span class="content">本文档的状态</span>
    </h2>
    <div data-fill-with="status">
        <p><em>本节描述了本文档在发布时的状态。
                其他文档可能会取代本文档。
                当前 W3C 发布的文档列表
                以及本技术报告的最新版本
                可在 <a href="https://www.w3.org/TR/">W3C 技术报告索引 https://www.w3.org/TR/ 中找到。</a></em> </p>
        <p> 本文档由 <a href="https://www.w3.org/Style/CSS/">CSS 工作组</a> 作为 <strong>工作草案</strong> 发布。
            作为工作草案发布
            并不意味着 W3C 成员对其的认可。 </p>
        <p> 本文档是草案文档
            可能会随时被更新、替换
            或被其他文档取代。
            将本文档作为工作成果以外的其他用途引用是不合适的。 </p>
        <p>请通过 <a href="https://github.com/w3c/csswg-drafts/issues">在 GitHub 提交问题</a>（首选），
            在标题中包含规范代码 “css-scroll-anchoring”，格式如下：
            “[css-scroll-anchoring] <i>…评论摘要…</i>”。
            所有问题和评论都被 <a href="https://lists.w3.org/Archives/Public/public-css-archive/">归档</a>。
            另外，反馈可以发送到 (<a href="https://lists.w3.org/Archives/Public/public-css-archive/">归档</a>) 公开邮件列表 <a
                href="mailto:www-style@w3.org?Subject=%5Bcss-scroll-anchoring%5D%20PUT%20SUBJECT%20HERE">www-style@w3.org</a>。
        </p>
        <p>本文档受 <a href="https://www.w3.org/2020/Process-20200915/" id="w3c_process_revision">2020 年 9 月 15 日 W3C
                过程文件</a> 约束。</p>
        <p>本文档由依据 <a href="https://www.w3.org/Consortium/Patent-Policy-20170801/">W3C 专利政策</a> 运行的小组制作。
            W3C 维护着与小组交付物相关的 <a href="https://www.w3.org/2004/01/pp-impl/32061/status" rel="disclosure">专利披露的公开列表</a>；
            该页面还包括专利披露的说明。
            个人如果实际知道某项专利，并且认为该专利包含 <a
                href="https://www.w3.org/Consortium/Patent-Policy-20170801/#def-essential">必要的权利要求</a>，则必须按照 <a
                href="https://www.w3.org/Consortium/Patent-Policy-20170801/#sec-Disclosure">W3C 专利政策第 6 节</a> 披露相关信息。
        </p>
        <p></p>
    </div>
    <div data-fill-with="at-risk"></div>
    <nav data-fill-with="table-of-contents" id="toc">
        <h2 class="no-num no-toc no-ref" id="contents">目录</h2>
        <ol class="toc" role="directory">
            <li>
                <a href="#intro"><span class="secno">1</span> <span class="content"> 引言</span></a>
                <ol class="toc">
                    <li><a href="#values"><span class="secno">1.1</span> <span class="content"> 值的定义</span></a>
                </ol>
            <li>
                <a href="#description"><span class="secno">2</span> <span class="content"> 描述</span></a>
                <ol class="toc">
                    <li><a href="#anchor-node-selection"><span class="secno">2.1</span> <span class="content">
                                锚点节点选择</span></a>
                    <li>
                        <a href="#scroll-adjustment"><span class="secno">2.2</span> <span class="content">
                                滚动调整</span></a>
                        <ol class="toc">
                            <li><a href="#suppression-windows"><span class="secno">2.2.1</span> <span class="content">
                                        抑制窗口</span></a>
                            <li><a href="#suppression-triggers"><span class="secno">2.2.2</span> <span class="content">
                                        抑制触发器</span></a>
                        </ol>
                </ol>
            <li><a href="#exclusion-api"><span class="secno">3</span> <span class="content"> 排除 API</span></a>
            <li><a href="#priv-sec"><span class="secno">4</span> <span class="content"> 隐私和安全考虑</span></a>
            <li>
                <a href="#changes"><span class="secno"></span> <span class="content"> 变更</span></a>
                <ol class="toc">
                    <li><a href="#changes-20200211"><span class="secno"></span> <span class="content"> 自 2020 年 2 月 11
                                日工作草案以来的变更</span></a>
                </ol>
            <li>
                <a href="#conformance"><span class="secno"></span> <span class="content"> 一致性</span></a>
                <ol class="toc">
                    <li><a href="#conventions"><span class="secno"></span> <span class="content"> 文档约定</span></a>
                    <li><a href="#conformance-classes"><span class="secno"></span> <span class="content">
                                一致性类别</span></a>
                    <li>
                        <a href="#partial"><span class="secno"></span> <span class="content"> 部分实现</span></a>
                        <ol class="toc">
                            <li><a href="#conform-future-proofing"><span class="secno"></span> <span class="content">
                                        不稳定和专有功能的实现</span></a>
                        </ol>
                    <li><a href="#testing"><span class="secno"></span> <span class="content"> 非实验性实现</span></a>
                </ol>
            <li>
                <a href="#index"><span class="secno"></span> <span class="content">索引</span></a>
                <ol class="toc">
                    <li><a href="#index-defined-here"><span class="secno"></span> <span
                                class="content">本规范定义的术语</span></a>
                    <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span
                                class="content">引用定义的术语</span></a>
                </ol>
            <li>
                <a href="#references"><span class="secno"></span> <span class="content">参考文献</span></a>
                <ol class="toc">
                    <li><a href="#normative"><span class="secno"></span> <span class="content">规范性参考文献</span></a>
                </ol>
            <li><a href="#property-index"><span class="secno"></span> <span class="content">属性索引</span></a>
        </ol>
    </nav>
    <main>
        <h2 class="heading settled" data-level="1" id="intro"><span class="secno">1. </span><span class="content">
                引言</span><a class="self-link" href="#intro"></a></h2>
        <p>如今，网络用户常常因视口外发生的变化而分心，导致内容在页面中移动。
            例如脚本插入包含广告的 iframe，或在慢速网络上加载未指定大小的图片。</p>
        <p>历史上，浏览器的默认行为是在发生此类变化时保留绝对滚动位置。
            这意味着，为了避免内容移动，网页可以尝试在页面上为稍后加载的内容预留空间。
            实际上，极少有网站能一致地做到这一点。</p>
        <p>滚动锚定旨在尽量减少意外的内容移动。
            它通过调整滚动位置来补偿视口外的变化。</p>
        <p><a href="https://github.com/WICG/ScrollAnchoring/blob/master/explainer.md">解释文档</a>非正式地概述了滚动锚定。</p>
        <h3 class="heading settled" data-level="1.1" id="values"><span class="secno">1.1. </span><span class="content">
                值的定义</span><a class="self-link" href="#values"></a></h3>
        <p>本规范遵循 <a href="https://www.w3.org/TR/CSS2/about.html#property-defs">CSS 属性定义约定</a>，使用 <a
                href="https://www.w3.org/TR/css-values-3/#value-defs">值定义语法</a>，这些来自 <a data-link-type="biblio"
                href="#biblio-css-values-3">[CSS-VALUES-3]</a>。
            未在本规范中定义的值类型将在 CSS 值与单位 <span>[CSS-VALUES-3]</span> 中定义。
            与其他 CSS 模块的结合可能会扩展这些值类型的定义。
        </p>
        <p>除了其定义中列出的属性特定值外，
            本规范中定义的所有属性也接受 <a data-link-type="dfn" href="https://www.w3.org/TR/css-values-4/#css-wide-keywords"
                id="ref-for-css-wide-keywords">CSS-wide 关键词</a> 作为其属性值。
            为了可读性，这些关键词未被显式重复列出。</p>
        <h2 class="heading settled" data-level="2" id="description"><span class="secno">2. </span><span class="content">
                描述</span><a class="self-link" href="#description"></a></h2>
        <p>滚动锚定尝试在布局变化时保持用户对文档视图的稳定。
            它通过选择一个 DOM 节点（称为 <dfn class="dfn-paneled" data-dfn-for="scroll-anchoring" data-dfn-type="dfn" data-export
                id="scroll-anchoring-anchor-node">锚点节点</dfn>）
            来决定调整滚动位置。</p>
        <p>但是，如果滚动容器当前 <a data-link-type="dfn">对齐</a> 到某个元素，
            （参见 <a data-link-type="biblio" href="#biblio-css-scroll-snap-1">[CSS-SCROLL-SNAP-1]</a>）
            滚动锚定仅限于允许通过<span>重新对齐</span>的调整。</p>
        <h3 class="heading settled" data-level="2.1" id="anchor-node-selection"><span class="secno">2.1. </span><span
                class="content"> 锚点节点选择</span><a class="self-link" href="#anchor-node-selection"></a>
        </h3>
        <p>每个<a data-link-type="dfn" href="https://drafts.csswg.org/cssom-view-1/#scrolling-box"
                id="ref-for-scrolling-box①">滚动框</a>都旨在选择一个<a data-link-type="dfn" href="#scroll-anchoring-anchor-node"
                id="ref-for-scroll-anchoring-anchor-node">锚点节点</a>，该节点在 DOM 中很深，
            并且应优先作为重要的 DOM 节点，或靠近其<a data-link-type="dfn"
                href="https://www.w3.org/TR/css-scroll-snap-1/#optimal-viewing-region"
                id="ref-for-optimal-viewing-region">最佳视图区域</a>的块起始边缘。</p>
        <p class="note" role="note"><span>注意：</span>如果用户代理不支持<a class="property" data-link-type="propdesc"
                href="https://www.w3.org/TR/css-scroll-snap-1/#propdef-scroll-padding"
                id="ref-for-propdef-scroll-padding">scroll-padding</a>属性，
            则滚动框的最佳视图区域等同于其<a data-link-type="dfn" href="https://www.w3.org/TR/css-box-4/#content-area"
                id="ref-for-content-area">内容区域</a>。</p>
        <p>锚点节点可以是任何<a data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#box"
                id="ref-for-box">盒子</a>，但不能是非<a data-link-type="dfn"
                href="https://www.w3.org/TR/css-display-3/#atomic-inline" id="ref-for-atomic-inline">原子内联</a>的盒子。
            锚点节点始终是<a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-tree-descendant"
                id="ref-for-concept-tree-descendant">滚动框的后代</a>。
            在某些情况下，滚动框可能不会选择任何锚点节点。</p>
        <p>元素<var>C</var>是滚动框<var>S</var>的滚动锚点的<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="anchor-viable-candidate">可行候选</dfn>，如果它满足以下所有条件：
        </p>
        <ul>
            <li data-md>
                <p><var>C</var> 是一个元素，而非非<a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-display-3/#atomic-inline"
                        id="ref-for-atomic-inline①">原子内联</a>元素。</p>
            <li data-md>
                <p><var>C</var> 在<var>S</var>中<a data-link-type="dfn" href="#partially-visible"
                        id="ref-for-partially-visible">部分可见</a>或<a data-link-type="dfn" href="#fully-visible"
                        id="ref-for-fully-visible">完全可见</a>。</p>
            <li data-md>
                <p><var>C</var> 是<var>S</var>的后代。</p>
            <li data-md>
                <p><var>C</var> 不在<a data-link-type="dfn" href="#excluded-subtree"
                        id="ref-for-excluded-subtree">排除的子树</a>中。</p>
            <li data-md>
                <p><var>C</var> 直到<var>S</var>的所有祖先都不在<a data-link-type="dfn" href="#excluded-subtree"
                        id="ref-for-excluded-subtree①">排除的子树</a>中。</p>
        </ul>
        <p>某些元素被认为是锚点选择的<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="anchor-priority-candidates">优先候选</dfn>：</p>
        <ol>
            <li data-md>
                <p>文档的<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/interaction.html#dom-anchor"
                        id="ref-for-dom-anchor">DOM 锚点</a>。</p>
            <li data-md>
                <p>包含当前活动的页面查找用户代理算法匹配结果的元素。如果匹配结果跨多个元素，则只考虑第一个元素。</p>
        </ol>
        <p>请注意，如果<a data-link-type="dfn" href="#anchor-priority-candidates"
                id="ref-for-anchor-priority-candidates">优先候选</a>是非<a data-link-type="dfn"
                href="https://www.w3.org/TR/css-display-3/#atomic-inline" id="ref-for-atomic-inline②">原子内联</a>元素，
            则应考虑其最近的非原子内联元素祖先作为优先候选。</p>
        <div class="algorithm" data-algorithm="anchor node selection algorithm">
            <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="anchoring-algorithm">锚点节点选择算法</dfn>对于滚动框<var>S</var>如下：
            <ol>
                <li data-md>
                    <p>如果<var>S</var>关联的元素的<a class="property" data-link-type="propdesc" href="#propdef-overflow-anchor"
                            id="ref-for-propdef-overflow-anchor">overflow-anchor</a>属性的计算值为<a class="css"
                            data-link-type="maybe" href="#valdef-overflow-anchor-none"
                            id="ref-for-valdef-overflow-anchor-none">none</a>，
                        则不为<var>S</var>选择锚点节点。</p>
                <li data-md>
                    <p>否则，按指定顺序检查每个<a data-link-type="dfn" href="#anchor-priority-candidates"
                            id="ref-for-anchor-priority-candidates①">优先候选</a><var>PC</var>，
                        如果<var>PC</var>在<var>S</var>中是<a data-link-type="dfn" href="#anchor-viable-candidate"
                            id="ref-for-anchor-viable-candidate">可行候选</a>，则选择它作为锚点节点并终止。</p>
                <li data-md>
                    <p>否则，对与<var>S</var>关联的元素或文档的每个 DOM 子节点<var>N</var>，
                        执行<a data-link-type="dfn" href="#candidate-examination"
                            id="ref-for-candidate-examination">候选检查算法</a>，
                        如果选择了锚点节点，则终止。</p>
            </ol>
        </div>
        <div class="algorithm" data-algorithm="candidate examination algorithm">
            <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="candidate-examination">候选检查算法</dfn>
            适用于滚动框<var>S</var>中的候选 DOM 节点<var>N</var>，具体如下：
            <ol>
                <li data-md>
                    <p>如果<var>N</var>是<a data-link-type="dfn" href="#excluded-subtree"
                            id="ref-for-excluded-subtree②">排除的子树</a>，
                        或者<var>N</var>在<var>S</var>中是<a data-link-type="dfn" href="#fully-clipped"
                            id="ref-for-fully-clipped">完全剪裁</a>的，
                        则不执行任何操作（跳过<var>N</var>及其后代）。</p>
                <li data-md>
                    <p>如果<var>N</var>在<var>S</var>中是<a data-link-type="dfn" href="#fully-visible"
                            id="ref-for-fully-visible①">完全可见</a>的，
                        选择<var>N</var>作为锚点节点。</p>
                <li data-md>
                    <p>如果<var>N</var>是<a data-link-type="dfn" href="#partially-visible"
                            id="ref-for-partially-visible①">部分可见</a>的：</p>
                    <ol>
                        <li data-md>
                            <p>对于<var>N</var>的每个 DOM 子节点<var>C</var>，
                                执行<a data-link-type="dfn" href="#candidate-examination"
                                    id="ref-for-candidate-examination①">候选检查算法</a>以检查<var>S</var>中的<var>C</var>，
                                如果选择了锚点节点，则终止。
                            </p>
                        <li data-md>
                            <p>对于<var>N</var>的<a data-link-type="dfn"
                                    href="https://www.w3.org/TR/css-display-3/#containing-block"
                                    id="ref-for-containing-block">包含块</a>是<var>N</var>，
                                但 DOM 父节点不是<var>N</var>的每个绝对定位元素<var>A</var>，
                                执行<a data-link-type="dfn" href="#candidate-examination"
                                    id="ref-for-candidate-examination②">候选检查算法</a>以检查<var>S</var>中的<var>A</var>，
                                如果选择了锚点节点，则终止。
                            </p>
                        <li data-md>
                            <p>选择<var>N</var>作为锚点节点。
                                （如果达到此步骤，则<var>N</var>的后代中没有找到合适的锚点节点。）</p>
                    </ol>
                    <p class="note" role="note"><span>注意：</span> 更深的节点优先，以尽量减少锚点节点内但视口外的内容变化，
                        这些变化会导致可见内容移动而不触发任何滚动锚定调整。</p>
            </ol>
        </div>
        <p>从概念上讲，每当任何滚动框的滚动位置发生变化时，都会为每个滚动框重新计算一个锚点节点。
            （作为性能优化，可能会在需要锚点节点时才进行计算。）</p>
        <div class="algorithm" data-algorithm="excluded subtree">
            DOM 节点<var>N</var>是一个<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="excluded-subtree">排除的子树</dfn>，如果它是一个元素并且满足以下任一条件：
            <ul>
                <li data-md>
                    <p><var>N</var>的<a class="property" data-link-type="propdesc"
                            href="https://www.w3.org/TR/css-display-3/#propdef-display"
                            id="ref-for-propdef-display">display</a>属性的计算值是<a class="css" data-link-type="maybe"
                            href="https://www.w3.org/TR/css-display-3/#valdef-display-none"
                            id="ref-for-valdef-display-none">none</a>。</p>
                <li data-md>
                    <p><var>N</var>的<a class="property" data-link-type="propdesc"
                            href="https://www.w3.org/TR/css-position-3/#propdef-position"
                            id="ref-for-propdef-position">position</a>属性的计算值是<a class="css" data-link-type="maybe"
                            href="https://www.w3.org/TR/css-position-3/#valdef-position-fixed"
                            id="ref-for-valdef-position-fixed">fixed</a>。</p>
                <li data-md>
                    <p><var>N</var>的<a class="property" data-link-type="propdesc"
                            href="https://www.w3.org/TR/css-position-3/#propdef-position"
                            id="ref-for-propdef-position①">position</a>属性的计算值是<a class="css" data-link-type="maybe"
                            href="https://www.w3.org/TR/css-position-3/#valdef-position-absolute"
                            id="ref-for-valdef-position-absolute">absolute</a>，且<var>N</var>的<a data-link-type="dfn"
                            href="https://www.w3.org/TR/css-display-3/#containing-block"
                            id="ref-for-containing-block①">包含块</a>是滚动框的祖先。</p>
                <li data-md>
                    <p><var>N</var>的<a class="property" data-link-type="propdesc" href="#propdef-overflow-anchor"
                            id="ref-for-propdef-overflow-anchor①">overflow-anchor</a>
                        属性的计算值是<a class="css" data-link-type="maybe" href="#valdef-overflow-anchor-none"
                            id="ref-for-valdef-overflow-anchor-none①">none</a>。</p>
            </ul>
        </div>
        <div class="algorithm" data-algorithm="fully visible"> DOM 节点<var>N</var>在滚动框<var>S</var>中是<dfn
                class="dfn-paneled" data-dfn-type="dfn" data-noexport id="fully-visible">完全可见</dfn>的，如果<var>N</var>的<a
                data-link-type="dfn" href="#scroll-anchoring-bounding-rect"
                id="ref-for-scroll-anchoring-bounding-rect">滚动锚定边界矩形</a>完全在<var>S</var>的<a data-link-type="dfn"
                href="https://www.w3.org/TR/css-scroll-snap-1/#optimal-viewing-region"
                id="ref-for-optimal-viewing-region①">最佳视图区域</a>内。 </div>
        <div class="algorithm" data-algorithm="fully clipped"> DOM 节点<var>N</var>在滚动框<var>S</var>中是<dfn
                class="dfn-paneled" data-dfn-type="dfn" data-noexport id="fully-clipped">完全剪裁</dfn>的，如果<var>N</var>的<a
                data-link-type="dfn" href="#scroll-anchoring-bounding-rect"
                id="ref-for-scroll-anchoring-bounding-rect①">滚动锚定边界矩形</a>完全位于<var>S</var>的<a data-link-type="dfn"
                href="https://www.w3.org/TR/css-scroll-snap-1/#optimal-viewing-region"
                id="ref-for-optimal-viewing-region②">最佳视图区域</a>之外。
        </div>
        <div class="algorithm" data-algorithm="partially visible"> DOM 节点<var>N</var>在滚动框<var>S</var>中是<dfn
                class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="partially-visible">部分可见</dfn>的，如果<var>N</var>既不在<var>S</var>中<a data-link-type="dfn"
                href="#fully-visible" id="ref-for-fully-visible②">完全可见</a>，也不在<var>S</var>中<a data-link-type="dfn"
                href="#fully-clipped" id="ref-for-fully-clipped①">完全剪裁</a>。
        </div>
        <div class="algorithm" data-algorithm="scroll anchoring bounding rect"> DOM 节点<var>N</var>的<dfn
                class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="scroll-anchoring-bounding-rect">滚动锚定边界矩形</dfn>是<var>N</var>的<a data-link-type="dfn"
                href="https://www.w3.org/TR/css-overflow-3/#scrollable-overflow-rectangle"
                id="ref-for-scrollable-overflow-rectangle">可滚动溢出矩形</a>。 </div>
        <h3 class="heading settled" data-level="2.2" id="scroll-adjustment"><span class="secno">2.2. </span><span
                class="content"> 滚动调整</span><a class="self-link" href="#scroll-adjustment"></a></h3>
        <p>如果选择了锚点节点，
            当锚点节点移动时，
            浏览器会计算锚点节点的<a data-link-type="dfn" href="#scroll-anchoring-bounding-rect"
                id="ref-for-scroll-anchoring-bounding-rect②">滚动锚定边界矩形</a>的块起始边缘相对于滚动内容块起始边缘的之前偏移量<code>y0</code>和当前偏移量<code>y1</code>，
            方向为滚动器的<a data-link-type="dfn" href="https://www.w3.org/TR/css-writing-modes-4/#block-flow-direction"
                id="ref-for-block-flow-direction">块流方向</a>。</p>
        <p>然后，它会在块流方向上排队一个<code>y1 - y0</code>的滚动位置调整，
            在<a data-link-type="dfn" href="#suppression-window" id="ref-for-suppression-window">抑制窗口</a>结束时执行。</p>
        <p>滚动调整是一种由<a data-link-type="biblio"
                href="#biblio-cssom-view">[CSSOM-VIEW]</a>定义的[[cssom-view-1#scrolling-events#scrolling]]类型，
            并按照那里描述的方式生成<a class="idl-code" data-link-type="event"
                href="https://www.w3.org/TR/cssom-view/#eventdef-document-scroll"
                id="ref-for-eventdef-document-scroll">滚动事件</a>。</p>
        <h4 class="heading settled" data-level="2.2.1" id="suppression-windows"><span class="secno">2.2.1. </span><span
                class="content"> 抑制窗口</span><a class="self-link" href="#suppression-windows"></a></h4>
        <p>每次锚点节点移动都会发生在一个称为<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="suppression-window">抑制窗口</dfn>的时间窗口内，
            定义如下：</p>
        <ul>
            <li data-md>
                <p>抑制窗口从当前迭代的<a href="https://html.spec.whatwg.org/multipage/webappapis.html#processing-model-8">HTML
                        处理模型</a>事件循环的开始时刻开始，
                    或者从最近完成的抑制窗口结束时刻开始，以较近的时间为准。</p>
            <li data-md>
                <p>抑制窗口在当前迭代的<a href="https://html.spec.whatwg.org/multipage/webappapis.html#processing-model-8">HTML
                        处理模型</a>事件循环结束时结束，
                    或者在下一个操作之前，该操作的结果或副作用会因滚动位置的变化而不同
                    （例如调用<code
                        class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/cssom-view/#dom-element-getboundingclientrect" id="ref-for-dom-element-getboundingclientrect">getBoundingClientRect()</a></code>），
                    以先到者为准。</p>
        </ul>
        <p class="note" role="note"><span>注意：</span> 一旦滚动锚定 API 稳定，抑制窗口的边界应并入 HTML 标准。</p>
        <p>在同一个抑制窗口内可能会发生多次锚点节点移动。</p>
        <p>在抑制窗口结束时，
            用户代理会执行所有在窗口期间排队的且未被任何<a data-link-type="dfn" href="#suppression-trigger"
                id="ref-for-suppression-trigger">抑制触发器</a>抑制的滚动调整。</p>
        <h4 class="heading settled" data-level="2.2.2" id="suppression-triggers"><span class="secno">2.2.2. </span><span
                class="content"> 抑制触发器</span><a class="self-link" href="#suppression-triggers"></a></h4>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="suppression-trigger">抑制触发器</dfn>是指在锚点节点移动的抑制窗口内发生的操作，
            如果发生这些操作，则会抑制滚动锚定调整。
            这些触发器包括：</p>
        <ul>
            <li data-md>
                <p>以下任何属性的计算值发生变化，
                    无论是锚点节点还是滚动元素（或文档）路径上的任何元素：</p>
                <ul>
                    <li data-md>
                        <p><a class="property" data-link-type="propdesc"
                                href="https://www.w3.org/TR/css-position-3/#propdef-top"
                                id="ref-for-propdef-top">top</a>，<a class="property" data-link-type="propdesc"
                                href="https://www.w3.org/TR/css-position-3/#propdef-left"
                                id="ref-for-propdef-left">left</a>，<a class="property" data-link-type="propdesc"
                                href="https://www.w3.org/TR/css-position-3/#propdef-right"
                                id="ref-for-propdef-right">right</a>，或<a class="property" data-link-type="propdesc"
                                href="https://www.w3.org/TR/css-position-3/#propdef-bottom"
                                id="ref-for-propdef-bottom">bottom</a></p>
                    <li data-md>
                        <p><a class="property" data-link-type="propdesc"
                                href="https://www.w3.org/TR/css-box-4/#propdef-margin"
                                id="ref-for-propdef-margin">margin</a>或其长格式属性</p>
                    <li data-md>
                        <p><a class="property" data-link-type="propdesc"
                                href="https://www.w3.org/TR/css-box-4/#propdef-padding"
                                id="ref-for-propdef-padding">padding</a>或其长格式属性</p>
                    <li data-md>
                        <p><a class="property" data-link-type="propdesc"
                                href="https://www.w3.org/TR/css-sizing-3/#propdef-width"
                                id="ref-for-propdef-width">width</a>，<a class="property" data-link-type="propdesc"
                                href="https://www.w3.org/TR/css-sizing-3/#propdef-height"
                                id="ref-for-propdef-height">height</a>，<a class="property" data-link-type="propdesc"
                                href="https://www.w3.org/TR/css-sizing-3/#propdef-min-width"
                                id="ref-for-propdef-min-width">min-width</a>，<a class="property"
                                data-link-type="propdesc" href="https://www.w3.org/TR/css-sizing-3/#propdef-max-width"
                                id="ref-for-propdef-max-width">max-width</a>，<a class="property"
                                data-link-type="propdesc" href="https://www.w3.org/TR/css-sizing-3/#propdef-min-height"
                                id="ref-for-propdef-min-height">min-height</a>，或<a class="property"
                                data-link-type="propdesc" href="https://www.w3.org/TR/css-sizing-3/#propdef-max-height"
                                id="ref-for-propdef-max-height">max-height</a></p>
                    <li data-md>
                        <p><a class="property" data-link-type="propdesc"
                                href="https://www.w3.org/TR/css-position-3/#propdef-position"
                                id="ref-for-propdef-position②">position</a></p>
                    <li data-md>
                        <p><a class="property" data-link-type="propdesc"
                                href="https://www.w3.org/TR/css-transforms-1/#propdef-transform"
                                id="ref-for-propdef-transform">transform</a></p>
                </ul>
            <li data-md>
                <p>滚动元素（或文档）中任何元素的<a class="property" data-link-type="propdesc"
                        href="https://www.w3.org/TR/css-position-3/#propdef-position"
                        id="ref-for-propdef-position③">position</a>属性的计算值发生变化，
                    导致该元素成为或停止成为绝对定位元素。
                    请注意，无论修改的元素是否在锚点节点到滚动元素的路径上，此触发器都适用。</p>
            <li data-md>
                <p>滚动元素的滚动偏移为零。</p>
        </ul>
        <p class="note" role="note"><span>注意：</span>抑制触发器是为了与现有的 web 内容兼容，这些内容由于在滚动事件处理程序中导致的内容移动而与滚动锚定发生负面交互。</p>
        <h2 class="heading settled" data-level="3" id="exclusion-api"><span class="secno">3. </span><span
                class="content"> 排除 API</span><a class="self-link" href="#exclusion-api"></a></h2>
        <p>滚动锚定的目标是在启动时成为默认行为，
            以便用户即使在旧内容上也能从中受益。<a class="property" data-link-type="propdesc" href="#propdef-overflow-anchor"
                id="ref-for-propdef-overflow-anchor②">overflow-anchor</a>可以禁用
            整个网页或部分网页中的滚动锚定（选择退出），
            或将部分 DOM 排除在锚点节点选择算法之外。</p>
        <table class="def propdef" data-link-for-hint="overflow-anchor">
            <tbody>
                <tr>
                    <th>名称:
                    <td><dfn class="dfn-paneled css" data-dfn-type="property" data-export
                            id="propdef-overflow-anchor">overflow-anchor</dfn>
                <tr class="value">
                    <th><a href="https://www.w3.org/TR/css-values/#value-defs">值:</a>
                    <td class="prod">auto <a data-link-type="grammar"
                            href="https://www.w3.org/TR/css-values-4/#comb-one" id="ref-for-comb-one">|</a> none
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#initial-values">初始值:</a>
                    <td>auto
                <tr>
                    <th>适用于:
                    <td><a href="https://www.w3.org/TR/css-pseudo/#generated-content"
                            title="包括 ::before 和 ::after 伪元素。">所有元素</a>
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#inherited-property">继承:</a>
                    <td>否
                <tr>
                    <th><a href="https://www.w3.org/TR/css-values/#percentages">百分比:</a>
                    <td>不适用
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#computed">计算值:</a>
                    <td>指定的关键词
                <tr>
                    <th>规范顺序:
                    <td>按语法顺序
                <tr>
                    <th><a href="https://www.w3.org/TR/web-animations/#animation-type">动画类型:</a>
                    <td>离散
        </table>
        <p>值定义如下：</p>
        <dl>
            <dt data-md><dfn class="css" data-dfn-for="overflow-anchor" data-dfn-type="value" data-export
                    id="valdef-overflow-anchor-auto">auto<a class="self-link"
                        href="#valdef-overflow-anchor-auto"></a></dfn>
            <dd data-md>
                <p>声明该元素有资格参与由该元素或其祖先创建的任何滚动框的<a data-link-type="dfn" href="#anchoring-algorithm"
                        id="ref-for-anchoring-algorithm">锚点节点选择算法</a>。</p>
            <dt data-md><dfn class="dfn-paneled css" data-dfn-for="overflow-anchor" data-dfn-type="value" data-export
                    id="valdef-overflow-anchor-none">none</dfn>
            <dd data-md>
                <p>声明该元素及其后代
                    （不包含嵌套在另一个滚动元素内的后代）
                    <em>不</em>有资格参与由该元素或其祖先创建的任何滚动框的<a data-link-type="dfn" href="#anchoring-algorithm"
                        id="ref-for-anchoring-algorithm①">锚点节点选择算法</a>。
                </p>
        </dl>
        <p class="note" role="note"><span>注意：</span> 无法为<a class="css" data-link-type="propdesc"
                href="#propdef-overflow-anchor" id="ref-for-propdef-overflow-anchor③">overflow-anchor:
                none</a>元素的后代重新开启滚动锚定。
            但是，后代<a data-link-type="dfn" href="https://www.w3.org/TR/css-overflow-3/#scroll-container"
                id="ref-for-scroll-container">滚动容器</a>会自动为它们自己的滚动框重新开启该功能，
            除非它们明确设置了<span class="css" id="ref-for-propdef-overflow-anchor④">overflow-anchor:
                none</span>。</p>
        <p class="note" role="note"><span>注意：</span> <code>overflow-anchor</code>属性还曾被提议用于<a
                href="http://tabatkins.github.io/specs/css-sticky-scrollbars/">CSS 粘性滚动条</a>，
            但现在该规范已被<a href="https://tabatkins.github.io/specs/css-sticky-scrollbars/#intro">取代</a>。
        </p>
        <h2 class="heading settled" data-level="4" id="priv-sec"><span class="secno">4. </span><span class="content">
                隐私和安全考虑</span><a class="self-link" href="#priv-sec"></a></h2>
        <p>本规范仅调整我们如何计算滚动位置，
            不引入新的隐私或安全问题。</p>
        <h2 class="no-num heading settled" id="changes"><span class="content"> 变更</span><a class="self-link"
                href="#changes"></a></h2>
        <h3 class="heading settled" id="changes-20200211"><span class="content"> 自 2020 年 2 月 11 日工作草案以来的变更</span><a
                class="self-link" href="#changes-20200211"></a></h3>
        <ul>
            <li data-md>
                <p>添加了<a data-link-type="dfn" href="#anchor-viable-candidate"
                        id="ref-for-anchor-viable-candidate①">可行候选</a>和<a data-link-type="dfn"
                        href="#anchor-priority-candidates" id="ref-for-anchor-priority-candidates②">优先候选</a>的定义。</p>
            <li data-md>
                <p>澄清了滚动锚定与<a data-link-type="dfn">滚动对齐</a>之间的交互。</p>
        </ul>
    </main>
    <h2 class="no-ref no-num heading settled" id="conformance"><span class="content"> 一致性</span><a class="self-link"
            href="#conformance"></a></h2>
    <h3 class="no-ref heading settled" id="conventions"><span class="content"> 文档约定</span><a class="self-link"
            href="#conventions"></a></h3>
    <p>一致性要求通过描述性断言和 RFC 2119 术语的组合来表达。关键字“MUST”、“MUST NOT”、“REQUIRED”、“SHALL”、“SHALL NOT”、“SHOULD”、“SHOULD
        NOT”、“RECOMMENDED”、“MAY”和“OPTIONAL”在本文档的规范部分应按照 RFC 2119 的说明进行解释。
        但是，为了可读性，这些词在本规范中未全部使用大写字母表示。</p>
    <p>除明确标记为非规范性部分、示例和注释的部分外，本规范的所有文本均为规范性文本。<a data-link-type="biblio" href="#biblio-rfc2119">[RFC2119]</a></p>
    <p>本规范中的示例以“例如”引入，或通过<code>class="example"</code>与规范文本区分开来，如下所示：</p>
    <div class="example" id="example-ae2b6bc0">
        <a class="self-link" href="#example-ae2b6bc0"></a>
        <p>这是一个说明性示例。</p>
    </div>
    <p>说明性注释以“Note”开头，并通过<code>class="note"</code>与规范文本区分开来，如下所示：</p>
    <p class="note" role="note">注意，这是一个说明性注释。</p>
    <p>建议是规范性部分，样式设计用于引起特别关注，并通过<code>&lt;strong class="advisement"></code>与其他规范文本区分开来，如下所示：<strong class="advisement">
            用户代理必须提供可访问的替代方案。 </strong></p>
    <h3 class="no-ref heading settled" id="conformance-classes"><span class="content"> 一致性类别</span><a class="self-link"
            href="#conformance-classes"></a></h3>
    <p>本规范的一致性
        定义了三种一致性类别：</p>
    <dl>
        <dt>样式表
        <dd>一个<a href="https://www.w3.org/TR/CSS21/conform.html#style-sheet">CSS 样式表</a>。
        <dt>渲染器
        <dd>一个<a href="https://www.w3.org/TR/CSS21/conform.html#user-agent">用户代理</a>，它解释样式表的语义并渲染
            使用它们的文档。
        <dt>创作工具
        <dd>一个<a href="https://www.w3.org/TR/CSS21/conform.html#user-agent">用户代理</a>，用于编写样式表。
    </dl>
    <p>如果样式表中使用的所有语法符合本模块中定义的通用 CSS 语法和每个功能的个体语法，则该样式表符合本规范。</p>
    <p>渲染器符合本规范的要求，
        如果在解释样式表时，它不仅按照适当的规范进行解释，还正确支持本规范定义的所有功能，
        并相应地渲染文档。然而，用户代理由于设备限制无法正确渲染文档并不意味着用户代理不合规。（例如，用户代理不要求在单色显示器上渲染颜色。）</p>
    <p>创作工具符合本规范的要求，
        如果它编写的样式表在语法上符合通用 CSS 语法和本模块中每个功能的个体语法，并符合本模块中描述的样式表的所有其他一致性要求。</p>
    <h3 class="no-ref heading settled" id="partial"><span class="content"> 部分实现</span><a class="self-link"
            href="#partial"></a></h3>
    <p>为了让作者能够利用向前兼容的解析规则分配回退值，CSS 渲染器<strong>必须</strong>将没有可用支持级别的 at 规则、属性、属性值、关键字和其他语法结构视为无效（并根据情况<a
            href="https://www.w3.org/TR/CSS21/conform.html#ignore">忽略</a>）。特别是，用户代理<strong>不得</strong>选择性忽略不支持的组件值并接受单个多值属性声明中的支持值：如果任何值被视为无效（不支持的值必须如此），CSS
        要求整个声明被忽略。</p>
    <h4 class="heading settled" id="conform-future-proofing"><span class="content"> 不稳定和专有功能的实现</span><a
            class="self-link" href="#conform-future-proofing"></a></h4>
    <p>为了避免与未来稳定的 CSS 功能冲突，
        CSSWG 建议<a href="https://www.w3.org/TR/CSS/#future-proofing">遵循最佳实践</a>，以实现<a
            href="https://www.w3.org/TR/CSS/#unstable">不稳定</a>的功能和 CSS 的<a
            href="https://www.w3.org/TR/CSS/#proprietary-extension">专有扩展</a>。</p>
    <h3 class="no-ref heading settled" id="testing"><span class="content"> 非实验性实现</span><a class="self-link"
            href="#testing"></a></h3>
    <p>一旦规范达到候选推荐阶段，
        就可以进行非实验性实现，实施者应发布任何 CR 级别功能的未加前缀的实现，前提是他们能够证明其已按照规范正确实现。</p>
    <p>为了建立和维护 CSS 在不同实现中的互操作性，CSS 工作组要求非实验性的 CSS 渲染器在发布任何 CSS 功能的未加前缀实现之前，向 W3C 提交实施报告（如果需要，还包括用于该实施报告的测试用例）。提交给 W3C
        的测试用例将由 CSS 工作组审查和修订。</p>
    <p>有关提交测试用例和实施报告的更多信息，请访问 CSS 工作组的网站：<a
            href="https://www.w3.org/Style/CSS/Test/">https://www.w3.org/Style/CSS/Test/</a>。
        相关问题应发送至<a href="https://lists.w3.org/Archives/Public/public-css-testsuite">public-css-testsuite@w3.org</a>
        邮件列表。</p>
    <script src="https://www.w3.org/scripts/TR/2016/fixup.js"></script>
    <h2 class="no-num no-ref heading settled" id="index"><span class="content">索引</span><a class="self-link"
            href="#index"></a></h2>
    <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">本规范定义的术语</span><a
            class="self-link" href="#index-defined-here"></a></h3>
    <ul class="index">
        <li><a href="#scroll-anchoring-anchor-node">锚点节点</a><span>，见 §2</span>
        <li><a href="#anchoring-algorithm">锚点节点选择算法</a><span>，见 §2.1</span>
        <li><a href="#valdef-overflow-anchor-auto">auto</a><span>，见 §3</span>
        <li><a href="#candidate-examination">候选检查算法</a><span>，见 §2.1</span>
        <li><a href="#excluded-subtree">排除的子树</a><span>，见 §2.1</span>
        <li><a href="#fully-clipped">完全剪裁</a><span>，见 §2.1</span>
        <li><a href="#fully-visible">完全可见</a><span>，见 §2.1</span>
        <li><a href="#valdef-overflow-anchor-none">none</a><span>，见 §3</span>
        <li><a href="#propdef-overflow-anchor">overflow-anchor</a><span>，见 §3</span>
        <li><a href="#partially-visible">部分可见</a><span>，见 §2.1</span>
        <li><a href="#anchor-priority-candidates">优先候选</a><span>，见 §2.1</span>
        <li><a href="#scroll-anchoring-bounding-rect">滚动锚定边界矩形</a><span>，见 §2.1</span>
        <li><a href="#suppression-trigger">抑制触发器</a><span>，见 §2.2.2</span>
        <li><a href="#suppression-window">抑制窗口</a><span>，见 §2.2.1</span>
        <li><a href="#anchor-viable-candidate">可行候选</a><span>，见 §2.1</span>
    </ul>
    <aside class="dfn-panel" data-for="term-for-content-area">
        <a href="https://www.w3.org/TR/css-box-4/#content-area">https://www.w3.org/TR/css-box-4/#content-area</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-content-area">2.1.
                    Anchor Node Selection</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-margin">
        <a href="https://www.w3.org/TR/css-box-4/#propdef-margin">https://www.w3.org/TR/css-box-4/#propdef-margin</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-margin">2.2.2.
                    Suppression Triggers</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-padding">
        <a
            href="https://www.w3.org/TR/css-box-4/#propdef-padding">https://www.w3.org/TR/css-box-4/#propdef-padding</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-padding">2.2.2.
                    Suppression Triggers</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-atomic-inline">
        <a
            href="https://www.w3.org/TR/css-display-3/#atomic-inline">https://www.w3.org/TR/css-display-3/#atomic-inline</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-atomic-inline">2.1.
                    Anchor Node Selection</a> <a href="#ref-for-atomic-inline①">(2)</a> <a
                    href="#ref-for-atomic-inline②">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-box">
        <a href="https://www.w3.org/TR/css-display-3/#box">https://www.w3.org/TR/css-display-3/#box</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-box">2.1.
                    Anchor Node Selection</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-containing-block">
        <a
            href="https://www.w3.org/TR/css-display-3/#containing-block">https://www.w3.org/TR/css-display-3/#containing-block</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-containing-block">2.1.
                    Anchor Node Selection</a> <a href="#ref-for-containing-block①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-display">
        <a
            href="https://www.w3.org/TR/css-display-3/#propdef-display">https://www.w3.org/TR/css-display-3/#propdef-display</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-display">2.1.
                    Anchor Node Selection</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-valdef-display-none">
        <a
            href="https://www.w3.org/TR/css-display-3/#valdef-display-none">https://www.w3.org/TR/css-display-3/#valdef-display-none</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-valdef-display-none">2.1.
                    Anchor Node Selection</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-scroll-container">
        <a
            href="https://www.w3.org/TR/css-overflow-3/#scroll-container">https://www.w3.org/TR/css-overflow-3/#scroll-container</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-scroll-container">3.
                    Exclusion API</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-scrollable-overflow-rectangle">
        <a
            href="https://www.w3.org/TR/css-overflow-3/#scrollable-overflow-rectangle">https://www.w3.org/TR/css-overflow-3/#scrollable-overflow-rectangle</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-scrollable-overflow-rectangle">2.1.
                    Anchor Node Selection</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-valdef-position-absolute">
        <a
            href="https://www.w3.org/TR/css-position-3/#valdef-position-absolute">https://www.w3.org/TR/css-position-3/#valdef-position-absolute</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-valdef-position-absolute">2.1.
                    Anchor Node Selection</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-bottom">
        <a
            href="https://www.w3.org/TR/css-position-3/#propdef-bottom">https://www.w3.org/TR/css-position-3/#propdef-bottom</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-bottom">2.2.2.
                    Suppression Triggers</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-valdef-position-fixed">
        <a
            href="https://www.w3.org/TR/css-position-3/#valdef-position-fixed">https://www.w3.org/TR/css-position-3/#valdef-position-fixed</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-valdef-position-fixed">2.1.
                    Anchor Node Selection</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-left">
        <a
            href="https://www.w3.org/TR/css-position-3/#propdef-left">https://www.w3.org/TR/css-position-3/#propdef-left</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-left">2.2.2.
                    Suppression Triggers</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-position">
        <a
            href="https://www.w3.org/TR/css-position-3/#propdef-position">https://www.w3.org/TR/css-position-3/#propdef-position</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-position">2.1.
                    Anchor Node Selection</a> <a href="#ref-for-propdef-position①">(2)</a>
            <li><a href="#ref-for-propdef-position②">2.2.2.
                    Suppression Triggers</a> <a href="#ref-for-propdef-position③">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-right">
        <a
            href="https://www.w3.org/TR/css-position-3/#propdef-right">https://www.w3.org/TR/css-position-3/#propdef-right</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-right">2.2.2.
                    Suppression Triggers</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-top">
        <a
            href="https://www.w3.org/TR/css-position-3/#propdef-top">https://www.w3.org/TR/css-position-3/#propdef-top</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-top">2.2.2.
                    Suppression Triggers</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-optimal-viewing-region">
        <a
            href="https://www.w3.org/TR/css-scroll-snap-1/#optimal-viewing-region">https://www.w3.org/TR/css-scroll-snap-1/#optimal-viewing-region</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-optimal-viewing-region">2.1.
                    Anchor Node Selection</a> <a href="#ref-for-optimal-viewing-region①">(2)</a> <a
                    href="#ref-for-optimal-viewing-region②">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-scroll-padding">
        <a
            href="https://www.w3.org/TR/css-scroll-snap-1/#propdef-scroll-padding">https://www.w3.org/TR/css-scroll-snap-1/#propdef-scroll-padding</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-scroll-padding">2.1.
                    Anchor Node Selection</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-height">
        <a
            href="https://www.w3.org/TR/css-sizing-3/#propdef-height">https://www.w3.org/TR/css-sizing-3/#propdef-height</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-height">2.2.2.
                    Suppression Triggers</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-max-height">
        <a
            href="https://www.w3.org/TR/css-sizing-3/#propdef-max-height">https://www.w3.org/TR/css-sizing-3/#propdef-max-height</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-max-height">2.2.2.
                    Suppression Triggers</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-max-width">
        <a
            href="https://www.w3.org/TR/css-sizing-3/#propdef-max-width">https://www.w3.org/TR/css-sizing-3/#propdef-max-width</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-max-width">2.2.2.
                    Suppression Triggers</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-min-height">
        <a
            href="https://www.w3.org/TR/css-sizing-3/#propdef-min-height">https://www.w3.org/TR/css-sizing-3/#propdef-min-height</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-min-height">2.2.2.
                    Suppression Triggers</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-min-width">
        <a
            href="https://www.w3.org/TR/css-sizing-3/#propdef-min-width">https://www.w3.org/TR/css-sizing-3/#propdef-min-width</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-min-width">2.2.2.
                    Suppression Triggers</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-width">
        <a
            href="https://www.w3.org/TR/css-sizing-3/#propdef-width">https://www.w3.org/TR/css-sizing-3/#propdef-width</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-width">2.2.2.
                    Suppression Triggers</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-transform">
        <a
            href="https://www.w3.org/TR/css-transforms-1/#propdef-transform">https://www.w3.org/TR/css-transforms-1/#propdef-transform</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-transform">2.2.2.
                    Suppression Triggers</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-css-wide-keywords">
        <a
            href="https://www.w3.org/TR/css-values-4/#css-wide-keywords">https://www.w3.org/TR/css-values-4/#css-wide-keywords</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-css-wide-keywords">1.1.
                    Value Definitions</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-comb-one">
        <a href="https://www.w3.org/TR/css-values-4/#comb-one">https://www.w3.org/TR/css-values-4/#comb-one</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-comb-one">3.
                    Exclusion API</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-block-flow-direction">
        <a
            href="https://www.w3.org/TR/css-writing-modes-4/#block-flow-direction">https://www.w3.org/TR/css-writing-modes-4/#block-flow-direction</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-block-flow-direction">2.2.
                    Scroll Adjustment</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-element-getboundingclientrect">
        <a
            href="https://www.w3.org/TR/cssom-view/#dom-element-getboundingclientrect">https://www.w3.org/TR/cssom-view/#dom-element-getboundingclientrect</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-element-getboundingclientrect">2.2.1.
                    Suppression Window</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-eventdef-document-scroll">
        <a
            href="https://www.w3.org/TR/cssom-view/#eventdef-document-scroll">https://www.w3.org/TR/cssom-view/#eventdef-document-scroll</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-eventdef-document-scroll">2.2.
                    Scroll Adjustment</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-scrolling-box">
        <a
            href="https://drafts.csswg.org/cssom-view-1/#scrolling-box">https://drafts.csswg.org/cssom-view-1/#scrolling-box</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-scrolling-box">Unnumbered Section</a>
            <li><a href="#ref-for-scrolling-box①">2.1.
                    Anchor Node Selection</a> <a href="#ref-for-scrolling-box②">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-tree-descendant">
        <a
            href="https://dom.spec.whatwg.org/#concept-tree-descendant">https://dom.spec.whatwg.org/#concept-tree-descendant</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-tree-descendant">2.1.
                    Anchor Node Selection</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-anchor">
        <a
            href="https://html.spec.whatwg.org/multipage/interaction.html#dom-anchor">https://html.spec.whatwg.org/multipage/interaction.html#dom-anchor</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-anchor">2.1.
                    Anchor Node Selection</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-focused-area-of-the-document">
        <a
            href="https://html.spec.whatwg.org/multipage/interaction.html#focused-area-of-the-document">https://html.spec.whatwg.org/multipage/interaction.html#focused-area-of-the-document</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-focused-area-of-the-document">2.1.
                    Anchor Node Selection</a>
        </ul>
    </aside>
    <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">引用定义的术语</span><a
            class="self-link" href="#index-defined-elsewhere"></a></h3>
    <ul class="index">
        <li>
            <a data-link-type="biblio">[css-box-4]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-content-area">内容区域</span>
                <li><span class="dfn-paneled" id="term-for-propdef-margin">外边距</span>
                <li><span class="dfn-paneled" id="term-for-propdef-padding">内边距</span>
            </ul>
        <li>
            <a data-link-type="biblio">[css-display-3]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-atomic-inline">原子内联</span>
                <li><span class="dfn-paneled" id="term-for-box">盒子</span>
                <li><span class="dfn-paneled" id="term-for-containing-block">包含块</span>
                <li><span class="dfn-paneled" id="term-for-propdef-display">display</span>
                <li><span class="dfn-paneled" id="term-for-valdef-display-none">none</span>
            </ul>
        <li>
            <a data-link-type="biblio">[css-overflow-3]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-scroll-container">滚动容器</span>
                <li><span class="dfn-paneled" id="term-for-scrollable-overflow-rectangle">可滚动溢出矩形</span>
            </ul>
        <li>
            <a data-link-type="biblio">[css-position-3]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-valdef-position-absolute">绝对定位</span>
                <li><span class="dfn-paneled" id="term-for-propdef-bottom">底部</span>
                <li><span class="dfn-paneled" id="term-for-valdef-position-fixed">固定定位</span>
                <li><span class="dfn-paneled" id="term-for-propdef-left">左侧</span>
                <li><span class="dfn-paneled" id="term-for-propdef-position">position</span>
                <li><span class="dfn-paneled" id="term-for-propdef-right">右侧</span>
                <li><span class="dfn-paneled" id="term-for-propdef-top">顶部</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-SCROLL-SNAP-1]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-optimal-viewing-region">最佳视图区域</span>
                <li><span class="dfn-paneled" id="term-for-propdef-scroll-padding">scroll-padding</span>
            </ul>
        <li>
            <a data-link-type="biblio">[css-sizing-3]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-propdef-height">高度</span>
                <li><span class="dfn-paneled" id="term-for-propdef-max-height">最大高度</span>
                <li><span class="dfn-paneled" id="term-for-propdef-max-width">最大宽度</span>
                <li><span class="dfn-paneled" id="term-for-propdef-min-height">最小高度</span>
                <li><span class="dfn-paneled" id="term-for-propdef-min-width">最小宽度</span>
                <li><span class="dfn-paneled" id="term-for-propdef-width">宽度</span>
            </ul>
        <li>
            <a data-link-type="biblio">[css-transforms-1]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-propdef-transform">变换</span>
            </ul>
        <li>
            <a data-link-type="biblio">[css-values-4]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-css-wide-keywords">CSS 全局关键词</span>
                <li><span class="dfn-paneled" id="term-for-comb-one">|</span>
            </ul>
        <li>
            <a data-link-type="biblio">[css-writing-modes-4]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-block-flow-direction">块流方向</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSSOM-VIEW]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled"
                        id="term-for-dom-element-getboundingclientrect">getBoundingClientRect()</span>
                <li><span class="dfn-paneled" id="term-for-eventdef-document-scroll">滚动</span>
                <li><span class="dfn-paneled" id="term-for-scrolling-box">滚动框</span>
            </ul>
        <li>
            <a data-link-type="biblio">[DOM]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-concept-tree-descendant">后代</span>
            </ul>
        <li>
            <a data-link-type="biblio">[HTML]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-dom-anchor">DOM 锚点</span>
                <li><span class="dfn-paneled" id="term-for-focused-area-of-the-document">文档的焦点区域</span>
            </ul>
    </ul>
    <h2 class="no-num no-ref heading settled" id="references"><span class="content">参考文献</span><a class="self-link"
            href="#references"></a></h2>
    <h3 class="no-num no-ref heading settled" id="normative"><span class="content">规范性参考文献</span><a class="self-link"
            href="#normative"></a></h3>
    <dl>
        <dt id="biblio-css-box-4">[CSS-BOX-4]
        <dd>Elika Etemad. <a href="https://www.w3.org/TR/css-box-4/">CSS Box Model Module Level 4</a>. 2020年4月21日.
            WD. URL: <a href="https://www.w3.org/TR/css-box-4/">https://www.w3.org/TR/css-box-4/</a>
        <dt id="biblio-css-display-3">[CSS-DISPLAY-3]
        <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://www.w3.org/TR/css-display-3/">CSS Display Module Level 3</a>.
            2020年5月19日. CR. URL: <a href="https://www.w3.org/TR/css-display-3/">https://www.w3.org/TR/css-display-3/</a>
        <dt id="biblio-css-overflow-3">[CSS-OVERFLOW-3]
        <dd>David Baron; Elika Etemad; Florian Rivoal. <a href="https://www.w3.org/TR/css-overflow-3/">CSS Overflow
                Module Level 3</a>. 2020年6月3日. WD. URL: <a
                href="https://www.w3.org/TR/css-overflow-3/">https://www.w3.org/TR/css-overflow-3/</a>
        <dt id="biblio-css-position-3">[CSS-POSITION-3]
        <dd>Elika Etemad; et al. <a href="https://www.w3.org/TR/css-position-3/">CSS Positioned Layout Module Level
                3</a>. 2020年5月19日. WD. URL: <a
                href="https://www.w3.org/TR/css-position-3/">https://www.w3.org/TR/css-position-3/</a>
        <dt id="biblio-css-scroll-snap-1">[CSS-SCROLL-SNAP-1]
        <dd>Matt Rakow; et al. <a href="https://www.w3.org/TR/css-scroll-snap-1/">CSS Scroll Snap Module Level 1</a>.
            2019年3月19日. CR. URL: <a
                href="https://www.w3.org/TR/css-scroll-snap-1/">https://www.w3.org/TR/css-scroll-snap-1/</a>
        <dt id="biblio-css-sizing-3">[CSS-SIZING-3]
        <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://www.w3.org/TR/css-sizing-3/">CSS Box Sizing Module Level
                3</a>. 2020年10月23日. WD. URL: <a
                href="https://www.w3.org/TR/css-sizing-3/">https://www.w3.org/TR/css-sizing-3/</a>
        <dt id="biblio-css-transforms-1">[CSS-TRANSFORMS-1]
        <dd>Simon Fraser; et al. <a href="https://www.w3.org/TR/css-transforms-1/">CSS Transforms Module Level 1</a>.
            2019年2月14日. CR. URL: <a
                href="https://www.w3.org/TR/css-transforms-1/">https://www.w3.org/TR/css-transforms-1/</a>
        <dt id="biblio-css-values-3">[CSS-VALUES-3]
        <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://www.w3.org/TR/css-values-3/">CSS Values and Units Module
                Level 3</a>. 2019年6月6日. CR. URL: <a
                href="https://www.w3.org/TR/css-values-3/">https://www.w3.org/TR/css-values-3/</a>
        <dt id="biblio-css-values-4">[CSS-VALUES-4]
        <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://www.w3.org/TR/css-values-4/">CSS Values and Units Module
                Level 4</a>. 2019年1月31日. WD. URL: <a
                href="https://www.w3.org/TR/css-values-4/">https://www.w3.org/TR/css-values-4/</a>
        <dt id="biblio-css-writing-modes-4">[CSS-WRITING-MODES-4]
        <dd>Elika Etemad; Koji Ishii. <a href="https://www.w3.org/TR/css-writing-modes-4/">CSS Writing Modes Level
                4</a>. 2019年7月30日. CR. URL: <a
                href="https://www.w3.org/TR/css-writing-modes-4/">https://www.w3.org/TR/css-writing-modes-4/</a>
        <dt id="biblio-css2">[CSS2]
        <dd>Bert Bos; et al. <a href="https://www.w3.org/TR/CSS21/">层叠样式表 2 级修订版 (CSS 2.1)
                规范</a>. 2011年6月7日. REC. URL: <a href="https://www.w3.org/TR/CSS21/">https://www.w3.org/TR/CSS21/</a>
        <dt id="biblio-cssom-view">[CSSOM-VIEW]
        <dd>Simon Pieters. <a href="https://www.w3.org/TR/cssom-view-1/">CSSOM View Module</a>. 2016年3月17日. WD. URL:
            <a href="https://www.w3.org/TR/cssom-view-1/">https://www.w3.org/TR/cssom-view-1/</a>
        <dt id="biblio-dom">[DOM]
        <dd>Anne van Kesteren. <a href="https://dom.spec.whatwg.org/">DOM Standard</a>. Living Standard. URL: <a
                href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
        <dt id="biblio-html">[HTML]
        <dd>Anne van Kesteren; et al. <a href="https://html.spec.whatwg.org/multipage/">HTML Standard</a>. 现行标准.
            URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
        <dt id="biblio-rfc2119">[RFC2119]
        <dd>S. Bradner. <a href="https://tools.ietf.org/html/rfc2119">用于在RFC中指示需求级别的关键字</a>. 1997年3月. 最佳当前实践. URL: <a
                href="https://tools.ietf.org/html/rfc2119">https://tools.ietf.org/html/rfc2119</a>
    </dl>
    <h2 class="no-num no-ref heading settled" id="property-index"><span class="content">属性索引</span><a class="self-link"
            href="#property-index"></a></h2>
    <div class="big-element-wrapper">
        <table class="index">
            <thead>
                <tr>
                    <th scope="col">名称
                    <th scope="col">值
                    <th scope="col">初始值
                    <th scope="col">适用于
                    <th scope="col">继承
                    <th scope="col">百分比
                    <th scope="col">动画类型
                    <th scope="col">规范顺序
                    <th scope="col">计算值
            <tbody>
                <tr>
                    <th scope="row"><a class="css" data-link-type="property" href="#propdef-overflow-anchor"
                            id="ref-for-propdef-overflow-anchor⑤">overflow-anchor</a>
                    <td>auto | none
                    <td>auto
                    <td>所有元素
                    <td>否
                    <td>不适用
                    <td>离散
                    <td>按语法
                    <td>指定的关键词
        </table>
    </div>
    <aside class="dfn-panel" data-for="scroll-anchoring-anchor-node">
        <b><a href="#scroll-anchoring-anchor-node">#scroll-anchoring-anchor-node</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-scroll-anchoring-anchor-node">2.1.
                    Anchor Node Selection</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="anchor-viable-candidate">
        <b><a href="#anchor-viable-candidate">#anchor-viable-candidate</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-anchor-viable-candidate">2.1.
                    Anchor Node Selection</a>
            <li><a href="#ref-for-anchor-viable-candidate①"> Changes Since the Feb 11 2020 Working Draft</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="anchor-priority-candidates">
        <b><a href="#anchor-priority-candidates">#anchor-priority-candidates</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-anchor-priority-candidates">2.1.
                    Anchor Node Selection</a> <a href="#ref-for-anchor-priority-candidates①">(2)</a>
            <li><a href="#ref-for-anchor-priority-candidates②"> Changes Since the Feb 11 2020 Working Draft</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="anchoring-algorithm">
        <b><a href="#anchoring-algorithm">#anchoring-algorithm</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-anchoring-algorithm">3.
                    Exclusion API</a> <a href="#ref-for-anchoring-algorithm①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="candidate-examination">
        <b><a href="#candidate-examination">#candidate-examination</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-candidate-examination">2.1.
                    Anchor Node Selection</a> <a href="#ref-for-candidate-examination①">(2)</a> <a
                    href="#ref-for-candidate-examination②">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="excluded-subtree">
        <b><a href="#excluded-subtree">#excluded-subtree</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-excluded-subtree">2.1.
                    Anchor Node Selection</a> <a href="#ref-for-excluded-subtree①">(2)</a> <a
                    href="#ref-for-excluded-subtree②">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="fully-visible">
        <b><a href="#fully-visible">#fully-visible</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-fully-visible">2.1.
                    Anchor Node Selection</a> <a href="#ref-for-fully-visible①">(2)</a> <a
                    href="#ref-for-fully-visible②">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="fully-clipped">
        <b><a href="#fully-clipped">#fully-clipped</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-fully-clipped">2.1.
                    Anchor Node Selection</a> <a href="#ref-for-fully-clipped①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="partially-visible">
        <b><a href="#partially-visible">#partially-visible</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-partially-visible">2.1.
                    Anchor Node Selection</a> <a href="#ref-for-partially-visible①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="scroll-anchoring-bounding-rect">
        <b><a href="#scroll-anchoring-bounding-rect">#scroll-anchoring-bounding-rect</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-scroll-anchoring-bounding-rect">2.1.
                    Anchor Node Selection</a> <a href="#ref-for-scroll-anchoring-bounding-rect①">(2)</a>
            <li><a href="#ref-for-scroll-anchoring-bounding-rect②">2.2.
                    Scroll Adjustment</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="suppression-window">
        <b><a href="#suppression-window">#suppression-window</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-suppression-window">2.2.
                    Scroll Adjustment</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="suppression-trigger">
        <b><a href="#suppression-trigger">#suppression-trigger</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-suppression-trigger">2.2.1.
                    Suppression Window</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="propdef-overflow-anchor">
        <b><a href="#propdef-overflow-anchor">#propdef-overflow-anchor</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-propdef-overflow-anchor">2.1.
                    Anchor Node Selection</a> <a href="#ref-for-propdef-overflow-anchor①">(2)</a>
            <li><a href="#ref-for-propdef-overflow-anchor②">3.
                    Exclusion API</a> <a href="#ref-for-propdef-overflow-anchor③">(2)</a> <a
                    href="#ref-for-propdef-overflow-anchor④">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="valdef-overflow-anchor-none">
        <b><a href="#valdef-overflow-anchor-none">#valdef-overflow-anchor-none</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-valdef-overflow-anchor-none">2.1.
                    Anchor Node Selection</a> <a href="#ref-for-valdef-overflow-anchor-none①">(2)</a>
        </ul>
    </aside>
    <script>/* script-dfn-panel */

        document.body.addEventListener("click", function (e) {
            var queryAll = function (sel) { return [].slice.call(document.querySelectorAll(sel)); }
            // Find the dfn element or panel, if any, that was clicked on.
            var el = e.target;
            var target;
            var hitALink = false;
            while (el.parentElement) {
                if (el.tagName == "A") {
                    // Clicking on a link in a <dfn> shouldn't summon the panel
                    hitALink = true;
                }
                if (el.classList.contains("dfn-paneled")) {
                    target = "dfn";
                    break;
                }
                if (el.classList.contains("dfn-panel")) {
                    target = "dfn-panel";
                    break;
                }
                el = el.parentElement;
            }
            if (target != "dfn-panel") {
                // Turn off any currently "on" or "activated" panels.
                queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(function (el) {
                    el.classList.remove("on");
                    el.classList.remove("activated");
                });
            }
            if (target == "dfn" && !hitALink) {
                // open the panel
                var dfnPanel = document.querySelector(".dfn-panel[data-for='" + el.id + "']");
                if (dfnPanel) {
                    dfnPanel.classList.add("on");
                    var rect = el.getBoundingClientRect();
                    dfnPanel.style.left = window.scrollX + rect.right + 5 + "px";
                    dfnPanel.style.top = window.scrollY + rect.top + "px";
                    var panelRect = dfnPanel.getBoundingClientRect();
                    var panelWidth = panelRect.right - panelRect.left;
                    if (panelRect.right > document.body.scrollWidth && (rect.left - (panelWidth + 5)) > 0) {
                        // Reposition, because the panel is overflowing
                        dfnPanel.style.left = window.scrollX + rect.left - (panelWidth + 5) + "px";
                    }
                } else {
                    console.log("Couldn't find .dfn-panel[data-for='" + el.id + "']");
                }
            } else if (target == "dfn-panel") {
                // Switch it to "activated" state, which pins it.
                el.classList.add("activated");
                el.style.left = null;
                el.style.top = null;
            }

        });
    </script>
    <script>/* script-var-click-highlighting */

        document.addEventListener("click", e => {
            if (e.target.nodeName == "VAR") {
                highlightSameAlgoVars(e.target);
            }
        });
        {
            const indexCounts = new Map();
            const indexNames = new Map();
            function highlightSameAlgoVars(v) {
                // Find the algorithm container.
                let algoContainer = null;
                let searchEl = v;
                while (algoContainer == null && searchEl != document.body) {
                    searchEl = searchEl.parentNode;
                    if (searchEl.hasAttribute("data-algorithm")) {
                        algoContainer = searchEl;
                    }
                }

                // Not highlighting document-global vars,
                // too likely to be unrelated.
                if (algoContainer == null) return;

                const algoName = algoContainer.getAttribute("data-algorithm");
                const varName = getVarName(v);
                const addClass = !v.classList.contains("selected");
                let highlightClass = null;
                if (addClass) {
                    const index = chooseHighlightIndex(algoName, varName);
                    indexCounts.get(algoName)[index] += 1;
                    indexNames.set(algoName + "///" + varName, index);
                    highlightClass = nameFromIndex(index);
                } else {
                    const index = previousHighlightIndex(algoName, varName);
                    indexCounts.get(algoName)[index] -= 1;
                    highlightClass = nameFromIndex(index);
                }

                // Find all same-name vars, and toggle their class appropriately.
                for (const el of algoContainer.querySelectorAll("var")) {
                    if (getVarName(el) == varName) {
                        el.classList.toggle("selected", addClass);
                        el.classList.toggle(highlightClass, addClass);
                    }
                }
            }
            function getVarName(el) {
                return el.textContent.replace(/(\s| )+/, " ").trim();
            }
            function chooseHighlightIndex(algoName, varName) {
                let indexes = null;
                if (indexCounts.has(algoName)) {
                    indexes = indexCounts.get(algoName);
                } else {
                    // 7 classes right now
                    indexes = [0, 0, 0, 0, 0, 0, 0];
                    indexCounts.set(algoName, indexes);
                }

                // If the element was recently unclicked,
                // *and* that color is still unclaimed,
                // give it back the same color.
                const lastIndex = previousHighlightIndex(algoName, varName);
                if (indexes[lastIndex] === 0) return lastIndex;

                // Find the earliest index with the lowest count.
                const minCount = Math.min.apply(null, indexes);
                let index = null;
                for (var i = 0; i < indexes.length; i++) {
                    if (indexes[i] == minCount) {
                        return i;
                    }
                }
            }
            function previousHighlightIndex(algoName, varName) {
                return indexNames.get(algoName + "///" + varName);
            }
            function nameFromIndex(index) {
                return "selected" + index;
            }
        }
    </script>
    <script src="/dropdown.js"></script>
