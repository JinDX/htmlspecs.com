<!DOCTYPE html>
<html lang="zh-hans">

<HEAD>
  <TITLE>一致性：要求和建议</TITLE>
  <link rel="stylesheet" href="https://www.w3.org/TR/CSS22/style/default.css" type="text/css">
  <link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2016/W3C-WD.css" type="text/css">
  <link rel="prev" href="intro.html">
  <link rel="next" href="syndata.html">
  <link rel="contents" href="index.html#minitoc">
  <link rel="CSS-properties" href="propidx.html" title="properties">
  <link rel="index" href="indexlist.html" title="index">
  <link rel="first" href="index.html">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">


</HEAD>

<BODY>
  <div class="navbar">
    <p><a href="intro.html">上一页</a> &nbsp;
      <a href="syndata.html">下一页</a> &nbsp;
      <a href="index.html#minitoc">内容</a> &nbsp;
      <a href="propidx.html">属性</a> &nbsp;
      <a href="indexlist.html">索引</a> &nbsp;
  </div>
  <hr class="navbar">

  <H1><a name="q0">3 一致性：要求和建议</a></H1>
  <div id="toc" class="subtoc">
    <p><strong>内容</strong>
    <ul class="toc">
      <li><a href="conform.html#defs" class="tocxref">3.1 定义</a>
      <li><a href="conform.html#conformance" class="tocxref">3.2 UA 一致性</a>
      <li><a href="conform.html#errors" class="tocxref">3.3 错误情况</a>
      <li><a href="conform.html#text-css" class="tocxref">3.4 <span class="index-def" title="text/css">text/css
            内容类型</span></a>
    </ul>
  </div>


  <H2>3.1 <a name="defs">定义</a></H2>

  <P>关键词 <a name="x0"><span class="index-def" title="MUST">“MUST”</span></a>，
    <a name="x1"><span class="index-def" title="MUST NOT">“MUST NOT”</span></a>，<a name="x2"><span class="index-def"
        title="REQUIRED">“REQUIRED”</span></a>，<a name="x3"><span class="index-def" title="SHALL">“SHALL”</span></a>，
    <a name="x4"><span class="index-def" title="SHALL NOT">“SHALL NOT”</span></a>，<a name="x5"><span class="index-def"
        title="SHOULD">“SHOULD”</span></a>，<a name="x6"><span class="index-def" title="SHOULD NOT">“SHOULD
        NOT”</span></a>，<a name="x7"><span class="index-def" title="RECOMMENDED">“RECOMMENDED”</span></a>，<a
      name="x8"><span class="index-def" title="MAY">“MAY”</span></a> 和 <a name="x9"><span class="index-def"
        title="OPTIONAL">“OPTIONAL”</span></a> 在本文档中的解释方式应按照RFC&nbsp;2119中描述的进行(参见 <a href="refs.html#ref-RFC2119"
      rel="biblioentry" class="noxref"><span class="normref">[RFC2119]</span></a>)。
    但是，为了便于阅读，这些词在本规范中未全部使用大写字母。

  <P>有时，本规范会为作者和用户代理推荐良好的实践。这些建议不是规范性的，遵守本规范不依赖于它们的实现。这些建议包含表达“我们推荐...”、“本规范建议...”或类似的措辞。</P>

  <P>某个特性被标记为弃用（如 <a href="aural.html#aural-media-group">'aural'</a> 关键字）或将在CSS3中被弃用（如 <a
      href="ui.html#system-colors">系统颜色</a>），对一致性没有影响。（例如，'aural' 被标记为非规范性的，因此用户代理不需要支持它；系统颜色是规范性的，因此用户代理必须支持它们。）

  <p>本规范的所有章节，包括附录，都是规范性的，除非另有说明。

  <p><a href="about.html#notes-and-examples">示例和注释</a>不具规范性。

  <div class=example>
    <P style="display:none">示例：</P>
    <p>示例通常在其开头附近带有“示例”一词（“示例：”、“以下示例&hellip;”、“例如”等），并显示在彩色背景上，如本段所示。</p>
  </div>

  <div class=note>
    <p>注释以“注意”一词开头，缩进并以绿色显示，如本段所示。</p>
  </div>

  <p>图示仅供参考。除非明确说明，否则它们不是参考渲染。

  <dl>

    <dt><strong><span class="index-def" title="样式表"><a name="style-sheet">样式表</a></span></strong>

    <dd>指定文档呈现的一组语句。

      <P>样式表可能有三个不同的来源：<a href="#author">作者</a>、<a href="#user">用户</a> 和 <a href="#user-agent">用户代理</a>。这些来源的相互作用在<a
          href="cascade.html">层叠和继承</a>章节中描述。

    <dt><strong><span class="index-def" title="有效样式表|有效性"><a name="valid-style-sheet">有效样式表</a></span></strong>

    <dd>
      样式表的有效性取决于样式表使用的CSS级别。所有有效的CSS1样式表都是有效的CSS&nbsp;2.2样式表，但CSS1中的一些更改意味着某些CSS1样式表在CSS&nbsp;2.2中会有略微不同的语义。CSS2中的某些特性不属于CSS&nbsp;2.2，因此并非所有CSS2样式表都是有效的CSS&nbsp;2.2样式表。

      <P>有效的CSS&nbsp;2.2样式表必须根据<a href="grammar.html">CSS&nbsp;2.2的语法</a>编写。此外，它必须仅包含本规范中定义的at规则、属性名称和属性值。
        <span class="index-def"><strong><a name="illegal">非法</a></strong></span>（无效）的at规则、属性名称或属性值是指不合法的内容。

    <dt><strong><span class="index-def" title="源文档"><a name="source-document">源文档</a></span></strong>

    <dd>应用一个或多个样式表的文档。该文档以某种语言编码，表示为一棵<a href="#element">元素</a>树。每个元素由一个标识元素类型的名称、可选的多个<a
        href="#attribute">属性</a>，以及（可能为空的）<a href="#content">内容</a>组成。例如，源文档可能是XML或SGML实例。</dd>

    <dt><strong><span class="index-def" title="文档语言"><a name="doclanguage">文档语言</a></span></strong>

    <dd>源文档的编码语言（例如，HTML、XHTML或SVG）。CSS用于描述文档语言的呈现，CSS不会改变文档语言的底层语义。

    <dt><strong><span class="index-def" title="元素"><a name="element">元素</a></span></strong>

    <dd>（一个SGML术语，参见<a href="refs.html#ref-ISO8879" rel="biblioentry" class="noxref"><span
          class="normref">[ISO8879]</span></a>。）文档语言的主要语法构造。大多数CSS样式表规则使用这些元素的名称（如HTML中的P、TABLE和OL）来指定元素的呈现方式。

    <dt><strong><span class="index-def" title="替换元素">
          <a name="replaced-element">替换元素</a></span></strong>

    <dd>
      <p>内容超出CSS格式化模型范围的元素，例如图像、嵌入文档或小程序。例如，HTML
        IMG元素的内容通常由其“src”属性指定的图像替换。替换元素通常具有固有尺寸：固有宽度、固有高度和固有比例。例如，位图图像具有以绝对单位指定的固有宽度和固有高度（由此可以显然确定固有比例）。另一方面，其他文档可能没有任何固有尺寸（例如，一个空白的HTML文档）。

      <p>如果用户代理认为这些尺寸可能泄露敏感信息，则可能将替换元素视为没有任何固有尺寸。例如，如果一个HTML文档根据用户的银行余额更改固有尺寸，则UA可能会将该资源视为没有固有尺寸。

      <p>替换元素的内容在CSS呈现模型中不被考虑。

    <dt><strong><span class="index-def" title="固有尺寸"><a name="intrinsic">固有尺寸</a></span></strong>

    <dd>由元素本身定义的宽度和高度，不受周围环境影响。CSS未定义如何确定固有尺寸。在CSS&nbsp;2.2中，只有替换元素可以具有固有尺寸。
      对于没有可靠分辨率信息的光栅图像，必须假定每个图像源像素的大小为1&nbsp;px单位。

    <dt><strong><span class="index-def" title="属性"><a name="attribute">属性</a></span></strong>

    <dd>与元素关联的值，由名称和相关（文本）值组成。

    <dt><strong><span class="index-def" title="内容"><a name="content">内容</a></span></strong>

    <dd>源文档中与元素关联的内容。某些元素没有内容，在这种情况下，它们被称为<strong><span class="index-def" title="空"><a
            name="empty">空</a></span></strong>。元素的内容可能包括文本，也可能包括多个子元素，在这种情况下，该元素被称为这些子元素的<strong><span class="index-def"
          title="父"><a name="parent">父</a></span></strong>元素。

    <dt><strong><span class="index-def" title="忽略"><a name="ignore">忽略</a></span></strong>

    <dd>在本规范中，此术语有两个略有不同的含义。首先，当CSS解析器在样式表中发现未知或非法语法时，必须遵循某些规则。然后解析器必须忽略样式表的某些部分。有关必须忽略哪些部分的确切规则在这些章节中描述（<a
        href="syndata.html#declaration">声明和属性,</a> <a href="syndata.html#parsing-errors">处理解析错误的规则,</a> <a
        href="syndata.html#unsupported-values">不支持的值</a>），或可能在出现“忽略”一词的文本中解释。其次，用户代理可能（并且在某些情况下必须）忽略样式表中的某些属性或值，即使语法是合法的。例如，表列元素不能影响列的字体，因此字体属性必须被忽略。

    <dt><strong><span class="index-def" title="呈现内容|内容::呈现"><a name="rendered-content">呈现内容</a></span></strong>

    <dd>应用了相关样式表后元素的内容。替换元素内容的呈现方式未在本规范中定义。呈现内容也可能是元素的替代文本（例如，XHTML “alt” 属性的值），并且可能包括样式表中隐式或显式插入的项目，如项目符号、编号等。

    <dt><strong><span class="index-def" title="文档树">
          <a name="doctree">文档树</a></span></strong>

    <dd>源文档中编码的元素树。此树中的每个元素都有一个父元素，唯一例外的是<strong><span class="index-def" title="根"><a
            name="root">根</a></span></strong>元素，它没有父元素。

    <dt><strong><span class="index-def" title="子"><a name="child">子</a></span></strong>

    <dd>元素A被称为元素B的子元素，当且仅当B是A的父元素。

    <dt><strong><span class="index-def" title="后代"><a name="descendant">后代</a></span></strong>

    <dd>元素A被称为元素B的后代，如果（1）A是B的子元素，或（2）A是B某个后代元素C的子元素。

    <dt><strong><span class="index-def" title="祖先"><a name="ancestor">祖先</a></span></strong>

    <dd>元素A被称为元素B的祖先，当且仅当B是A的后代。

    <dt><strong><span class="index-def" title="兄弟"><a name="sibling">兄弟</a></span></strong>

    <dd>元素A被称为元素B的兄弟元素，当且仅当B和A共享相同的父元素。元素A是前面的兄弟，如果它在文档树中位于B之前。元素B是后面的兄弟，如果它在文档树中位于A之后。

    <dt><strong><span class="index-def" title="前面的元素|元素::前面"><a name="preceding">前面的元素</a></span></strong>

    <dd>元素A被称为元素B的前面的元素，当且仅当（1）A是B的祖先，或（2）A是B的前面的兄弟。

    <dt><strong><span class="index-def" title="后面的元素|元素::后面"><a name="following">后面的元素</a></span></strong>

    <dd>元素A被称为元素B的后面的元素，当且仅当B是A的前面的元素。

    <dt><strong><span class="index-def"><a name="author">作者</a></span></strong>

    <dd>作者是编写文档及相关样式表的人。
      <strong><span class="index-def"><a name="authoring">创作工具</a></span></strong>是生成样式表的<a href="#user-agent">用户代理</a>。
    </dd>

    <dt><strong><span class="index-def"><a name="user">用户</a></span></strong>

    <dd> 用户是与用户代理交互以查看、收听或以其他方式使用文档及其相关样式表的人。用户可能提供一个编码个人偏好的个人样式表。
    </dd>

    <dt><strong><span class="index-def"><a name="user-agent">用户代理
            (UA)</a></span></strong>

    <dd><span class="index-def" title="用户代理|UA"><a
          name="ua">用户代理</a></span>是任何解释以文档语言编写的文档并根据本规范的条款应用相关样式表的程序。用户代理可以显示文档、朗读文档、打印文档、将文档转换为其他格式等。</dd>

    <DD>HTML用户代理是支持一个或多个HTML规范的用户代理。支持XHTML的用户代理<a href="refs.html#ref-XHTML" rel="biblioentry" class="noxref"><span
          class="informref">[XHTML]</span></a>，但不支持HTML的用户代理在符合本规范方面不被视为HTML用户代理。

    <dt><strong><span class="index-def"><a name="property">属性</a></span></strong>

    <dd>CSS定义了一组有限的参数，称为属性，它们指导文档的呈现。每个属性都有一个名称（例如，'color'、'font'或'border'）和一个值（例如，'red'、'12pt
      Times'或'dotted'）。通过特异性、层叠和继承机制（参见章节<a href="cascade.html">分配属性值、层叠和继承</a>）将属性附加到文档的各个部分以及要显示文档的页面上。

  </dl>

  <div class="html example">
    <p>下面是一个用HTML编写的源文档示例：

    <PRE>
&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"&gt;
&lt;HTML&gt;   
  &lt;TITLE&gt;My home page&lt;/TITLE&gt;
  &lt;BODY&gt;
    &lt;H1&gt;My home page&lt;/H1&gt;
    &lt;P&gt;Welcome to my home page! Let me tell you about my favorite
		composers:
    &lt;UL&gt;
      &lt;LI&gt; Elvis Costello
      &lt;LI&gt; Johannes Brahms
      &lt;LI&gt; Georges Brassens
    &lt;/UL&gt;
  &lt;/BODY&gt;
&lt;/HTML&gt;
</PRE>

    <P>这将产生以下树结构：</P>

    <div class="figure">
      <P><IMG src="https://www.w3.org/TR/CSS22/images/doctree.png" alt="示例文档树"><SPAN class="dlink">&nbsp;&nbsp;&nbsp;<A
            name="img-doctree" href="images/longdesc/doctree-desc.html" title="示例文档树图的详细描述">[D]</A></SPAN></p>
    </div>

    <P>根据HTML
      4的定义，即使文档源代码中没有"head"标签，HEAD元素也会在解析过程中推断出来，并成为文档树的一部分。同样，即使源代码中没有&lt;/p&gt;和&lt;/li&gt;标签，解析器也知道P和LI元素在哪里结束。

    <P>用XHTML（及其他基于XML的语言）编写的文档表现不同：没有推断的元素，所有元素必须有结束标签。

  </div>



  <h2>3.2 <a name="conformance">UA 一致性</a></h2>

  <P>本节仅定义与CSS&nbsp;2.2规范的一致性。未来可能会有其他CSS级别，可能要求用户代理实现一组不同的功能以符合要求。

  <P>通常，声称符合本规范的用户代理必须遵守以下几点：</P>

  <ol>

    <li>它必须识别一个或多个CSS&nbsp;2.2 <a href="media.html">媒体类型</a>。

    <li>对于每个源文档，它必须尝试检索所有与识别的媒体类型相关联的样式表。如果无法检索所有相关样式表（例如，由于网络错误），则必须使用能够检索到的样式表来显示文档。

    <li>它必须按照本规范解析样式表。特别是，它必须识别所有at规则、块、声明和选择器（参见<a
        href="grammar.html">CSS&nbsp;2.2的语法</a>）。如果用户代理遇到适用于受支持媒体类型的属性，则用户代理必须根据属性定义解析该值。这意味着用户代理必须接受所有有效值，并且必须<a
        name="x44"><span class="index-inst" title="ignore">忽略</span></a>无效值的声明。用户代理必须<a name="x45"><span
          class="index-inst" title="ignore">忽略</span></a>适用于不受支持的<a href="media.html">媒体类型</a>的规则。

    <li>对于<a href="#doctree">文档树</a>中的每个元素，它必须根据属性的定义和<a href="cascade.html">层叠和继承</a>规则为每个属性分配一个值。

    <li>如果源文档附带有备用样式表集（例如在HTML 4中使用"alternate"关键字<a href="refs.html#ref-HTML4" rel="biblioentry" class="noxref"><span
          class="informref">[HTML4]</span></a>），则UA必须允许用户选择UA应该应用的样式表集。

    <li>UA必须允许用户关闭作者样式表的影响。

  </ol>

  <P>然而，并非每个用户代理都必须遵守每一点：</p>

  <ul>

    <li>不渲染任何内容的样式表读取应用程序（例如，CSS&nbsp;2.2验证器）必须遵守第1-3点。

    <li>创作工具只需输出<a href="#valid-style-sheet">有效样式表</a>。

    <li>与关联样式表一起<em>渲染</em>文档的用户代理必须遵守第1-6点，并根据本规范中提出的媒体特定要求渲染文档。用户代理在需要时可以近似<a href="cascade.html#actual-value">值</a>。

  </ul>

  <P>由于特定设备的限制（例如，用户代理无法在单色显示器或页面上渲染颜色）而导致用户代理无法实现本规范的一部分，这并不意味着不符合标准。</P>

  <p>用户代理必须允许用户指定包含用户样式表的文件。运行在无法编写或指定文件的设备上的用户代理不受此要求的约束。此外，用户代理可以提供其他方式指定用户偏好，例如通过GUI。</p>

  <p>CSS&nbsp;2.2未定义哪些属性适用于表单控件和框架，或如何使用CSS来设置它们的样式。用户代理可以将CSS属性应用于这些元素。建议作者将此类支持视为实验性的。未来的CSS级别可能会对此进一步规定。</p>


  <h2>3.3 <a name="errors">错误条件</a></h2>

  <p>通常，本文件在整个规范中指定了错误处理行为。例如，参见<a href="syndata.html#parsing-errors">处理解析错误的规则</a>。</p>

  <h2>3.4 <span class="index-def" title="text/css"><a name="text-css">text/css 内容类型</a></span></h2>

  <p>存在于单独文件中的CSS样式表通过互联网作为一系列字节传输，并附有编码信息。传输的结构，称为<span class="index-def" title="消息实体"><a
        name="message-entity"><strong>消息实体</strong></a></span>，由RFC 2045和RFC 2616定义（参见<a href="refs.html#ref-RFC2045"
      rel="biblioentry" class="noxref"><span class="normref">[RFC2045]</span></a>和<a href="refs.html#ref-RFC2616"
      rel="biblioentry" class="noxref"><span
        class="normref">[RFC2616]</span></a>）。内容类型为"text/css"的消息实体代表一个独立的CSS文档。"text/css"内容类型已由RFC 2318注册（<a
      href="refs.html#ref-2318" rel="biblioentry" class="noxref"><span class="normref">[RFC2318]</span></a>）。</p>

  <hr class="navbar">

  <div class="navbar">
    <p><a href="intro.html">上一页</a> &nbsp;
      <a href="syndata.html">下一页</a> &nbsp;
      <a href="index.html#minitoc">内容</a> &nbsp;
      <a href="propidx.html">属性</a> &nbsp;
      <a href="indexlist.html">索引</a> &nbsp;
  </div>
  <script src="https://www.w3.org/scripts/TR/2016/fixup.js"></script>
</body>

</html>