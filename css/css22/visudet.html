<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html lang="zh-hans">

<head>
  <title>视觉格式模型详细信息</title>
  <link rel="stylesheet" href="https://www.w3.org/TR/CSS22/style/default.css" type="text/css">
  <link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2016/W3C-WD.css" type="text/css">
  <link rel="prev" href="visuren.html">
  <link rel="next" href="visufx.html">
  <link rel="contents" href="index.html#minitoc">
  <link rel="CSS-properties" href="propidx.html" title="properties">
  <link rel="index" href="indexlist.html" title="index">
  <link rel="first" href="index.html">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <style type="text/css">
    .current,
    .proposed,
    span.delcurrent,
    div.delcurrent {
      background: #feb
    }

    ins.proposed,
    span.insproposed,
    li.insproposed,
    div.insproposed {
      background: #bfb
    }

    del.proposed,
    span.delproposed {
      background: #fbb
    }

    span.insproposed,
    li.insproposed,
    div.insproposed {
      text-decoration: underline
    }

    span.delproposed,
    span.delcurrent,
    div.delcurrent {
      text-decoration: line-through
    }

    body>del,
    body>ins {
      display: block
    }
  </style>
</head>

<body>
  <div class="navbar">
    <p><a href="visuren.html">上一页</a> &nbsp;
      <a href="visufx.html">下一页</a> &nbsp;
      <a href="index.html#minitoc">目录</a> &nbsp;
      <a href="propidx.html">属性</a> &nbsp;
      <a href="indexlist.html">索引</a> &nbsp;
  </div>
  <hr class="navbar">

  <h1><a name="q0">10 视觉格式模型详细信息</a></h1>
  <div id="toc" class="subtoc">
    <p><strong>内容</strong>
    <ul class="toc">
      <li><a href="visudet.html#containing-block-details" class="tocxref">10.1 "包含块"的定义</a>
      <li><a href="visudet.html#the-width-property" class="tocxref">10.2 内容宽度：<span
            class="propinst-width">'width'</span> 属性</a>
      <li><a href="visudet.html#Computing_widths_and_margins" class="tocxref">10.3 计算宽度和边距</a>
        <ul class="toc">
          <li><a href="visudet.html#inline-width" class="tocxref">10.3.1 内联非替换元素</a>
          <li><a href="visudet.html#inline-replaced-width" class="tocxref">10.3.2 内联替换元素</a>
          <li><a href="visudet.html#blockwidth" class="tocxref">10.3.3 正常流中的块级非替换元素</a>
          <li><a href="visudet.html#block-replaced-width" class="tocxref">10.3.4 正常流中的块级替换元素</a>
          <li><a href="visudet.html#float-width" class="tocxref">10.3.5 浮动的非替换元素</a>
          <li><a href="visudet.html#float-replaced-width" class="tocxref">10.3.6 浮动的替换元素</a>
          <li><a href="visudet.html#abs-non-replaced-width" class="tocxref">10.3.7 绝对定位的非替换元素</a>
          <li><a href="visudet.html#abs-replaced-width" class="tocxref">10.3.8 绝对定位的替换元素</a>
          <li><a href="visudet.html#inlineblock-width" class="tocxref">10.3.9 正常流中的'inline-block'非替换元素</a>
          <li><a href="visudet.html#inlineblock-replaced-width" class="tocxref">10.3.10 正常流中的'inline-block'替换元素</a>
        </ul>
      <li><a href="visudet.html#min-max-widths" class="tocxref">10.4 最小和最大宽度：<span
            class="propinst-min-width">'min-width'</span> 和 <span class="propinst-max-width">'max-width'</span></a>
      <li><a href="visudet.html#the-height-property" class="tocxref">10.5 内容高度：<span
            class="propinst-height">'height'</span> 属性</a>
      <li><a href="visudet.html#Computing_heights_and_margins" class="tocxref">10.6 计算高度和边距</a>
        <ul class="toc">
          <li><a href="visudet.html#inline-non-replaced" class="tocxref">10.6.1 内联非替换元素</a>
          <li><a href="visudet.html#inline-replaced-height" class="tocxref">10.6.2
              内联替换元素、正常流中的块级替换元素、正常流中的'inline-block'替换元素和浮动替换元素</a>
          <li><a href="visudet.html#normal-block" class="tocxref">10.6.3 当'overflow'计算为'visible'时，正常流中的块级非替换元素</a>
          <li><a href="visudet.html#abs-non-replaced-height" class="tocxref">10.6.4 绝对定位的非替换元素</a>
          <li><a href="visudet.html#abs-replaced-height" class="tocxref">10.6.5 绝对定位的替换元素</a>
          <li><a href="visudet.html#block-root-margin" class="tocxref">10.6.6 复杂情况</a>
          <li><a href="visudet.html#root-height" class="tocxref">10.6.7 块级格式化上下文根元素的'auto'高度</a>
        </ul>
      <li><a href="visudet.html#min-max-heights" class="tocxref">10.7 最小和最大高度：<span
            class="propinst-min-height">'min-height'</span> 和 <span class="propinst-max-height">'max-height'</span></a>
      <li><a href="visudet.html#line-height" class="tocxref">10.8 行高计算：<span
            class="propinst-line-height">'line-height'</span> 和 <span
            class="propinst-vertical-align">'vertical-align'</span> 属性</a>
        <ul class="toc">
          <li><a href="visudet.html#leading" class="tocxref">10.8.1 增距和半增距</a>
        </ul>
    </ul>
  </div>


  <h2>10.1 <a name="containing-block-details">“包含块”的定义</a></h2>

  <p>元素框的定位和大小有时是相对于某个矩形计算的，该矩形称为该元素的<dfn><a name="x0"><span class="index-def"
          title="containing block">包含块</span></a></dfn>。元素的包含块定义如下：</p>

  <ol>
    <li><a href="conform.html#root">根元素</a>所处的包含块是一个矩形，称为<dfn><a name="x1"><span class="index-def"
            title="initial containing block|containing block::initial">初始包含块</span></a></dfn>。对于连续媒体，它的尺寸等同于<a
        href="visuren.html#viewport">视口</a>，锚定于画布的原点；对于分页媒体，它的尺寸等同于<a
        href="page.html#page-area">页面区域</a>。初始包含块的'direction'属性与根元素相同。</li>
    <li>对于其他元素，如果元素的定位是'relative'或'static'，则包含块由最近的祖先框的内容边缘形成，该祖先框是<a href="visuren.html#block-boxes">块容器</a>或建立了格式化上下文。
    </li>
    <li>如果元素的'position'属性为'fixed'，则在连续媒体中，包含块由<a href="visuren.html#viewport">视口</a>建立；在分页媒体中，包含块由页面区域建立。</li>
    <li>如果元素的'position'属性为'absolute'，则包含块由最近的具有'absolute'、'relative'或'fixed'定位属性的祖先元素建立，具体如下：
      <ol>
        <li>如果该祖先是一个内联元素，则包含块是该元素生成的第一个和最后一个内联框的填充框的边界框。在CSS 2.2中，如果内联元素跨多行，包含块未定义。</li>
        <li>否则，包含块由祖先元素的<a href="box.html#padding-edge">填充边缘</a>形成。</li>
      </ol>

      <p>如果没有这样的祖先，包含块就是初始包含块。</p>
    </li>
  </ol>

  <p>在分页媒体中，绝对定位元素相对于其包含块进行定位，而忽略任何分页符（就像文档是连续的一样）。该元素随后可能被分布在多个页面上。</p>

  <p>对于解析到非当前页面（即已经为打印呈现的页面）上的位置的绝对定位内容，打印机可能会将内容放置在以下位置：
  <ul>
    <li>当前页面的其他位置，
    <li>后续页面，或
    <li>可能省略它。
  </ul>

  <p class="note">注意：跨多个页面的块级元素在每个页面上可能具有不同的宽度，并且可能存在设备特定的限制。</p>

  <div class="example">
    <P style="display:none">示例：</P>
    <p>在没有定位的情况下，以下文档中的包含块（C.B.）被建立如下：</p>

    <pre class="html example">
&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"&gt;
&lt;HTML&gt;
   &lt;HEAD&gt;
      &lt;TITLE&gt;包含块示例&lt;/TITLE&gt;
   &lt;/HEAD&gt;
   &lt;BODY id="body"&gt;
      &lt;DIV id="div1"&gt;
      &lt;P id="p1"&gt;这是第一段中的文本...&lt;/P&gt;
      &lt;P id="p2"&gt;这是&lt;EM id="em1"&gt;第二段&lt;STRONG id="strong1"&gt;中的&lt;/STRONG&gt;文本。&lt;/EM&gt;&lt;/P&gt;
      &lt;/DIV&gt;
   &lt;/BODY&gt;
&lt;/HTML&gt;
</pre>

    <p>包含块的建立如下：</p>

    <table border="1">
      <tr>
        <th>生成的框 </th>
        <td><strong>包含块由以下元素建立</strong></td>
      </tr>
      <tr>
        <td>html</td>
        <td>初始包含块（UA-依赖）</td>
      </tr>
      <tr>
        <td>body</td>
        <td>html</td>
      </tr>
      <tr>
        <td>div1</td>
        <td>body</td>
      </tr>
      <tr>
        <td>p1</td>
        <td>div1</td>
      </tr>
      <tr>
        <td>p2</td>
        <td>div1</td>
      </tr>
      <tr>
        <td>em1</td>
        <td>p2</td>
      </tr>
      <tr>
        <td>strong1</td>
        <td>p2</td>
      </tr>
    </table>

    <p>如果我们为“div1”设置定位：</p>

    <pre class="example">
   #div1 { position: absolute; left: 50px; top: 50px }
</pre>

    <p>它的包含块不再是“body”；而是初始包含块（因为没有其他已定位的祖先框）。</p>

    <p>如果我们也为“em1”设置定位：</p>

    <pre class="example">
   #div1 { position: absolute; left: 50px; top: 50px }
   #em1  { position: absolute; left: 100px; top: 100px }
</pre>

    <p>包含块表变为：</p>

    <table border="1">
      <tr>
        <th>生成的框</th>
        <td><strong>包含块由以下元素建立</strong></td>
      </tr>
      <tr>
        <td>html</td>
        <td>初始包含块（UA-依赖）</td>
      </tr>
      <tr>
        <td>body</td>
        <td>html</td>
      </tr>
      <tr>
        <td>div1</td>
        <td>初始包含块</td>
      </tr>
      <tr>
        <td>p1</td>
        <td>div1</td>
      </tr>
      <tr>
        <td>p2</td>
        <td>div1</td>
      </tr>
      <tr>
        <td>em1</td>
        <td>div1</td>
      </tr>
      <tr>
        <td>strong1</td>
        <td>em1</td>
      </tr>
    </table>

    <p>通过为“em1”设置定位，它的包含块变为最近的已定位祖先框（即由“div1”生成的框）。</p>
  </div>


  <h2>10.2 <a name="the-width-property">内容宽度</a>：<a href="visudet.html#propdef-width" class="noxref"><span
        class="propinst-width">'width'</span></a>属性</h2>

  <table class="def propdef">
    <tbody>
      <tr>
        <th>名称：</th>
        <td><a name="x3"><span class="index-def" title="'width'"><dfn id="propdef-width">width</dfn></span></a></td>
      </tr>
      <tr>
        <th>值：</th>
        <td><a href="syndata.html#value-def-length" class="noxref"><span class="value-inst-length">&lt;长度&gt;</span></a>
          | <a href="syndata.html#value-def-percentage" class="noxref"><span
              class="value-inst-percentage">&lt;百分比&gt;</span></a> | auto | <a href="cascade.html#value-def-inherit"
            class="noxref"><span class="value-inst-inherit">inherit</span></a></td>
      </tr>
      <tr>
        <th>初始值：</th>
        <td>auto</td>
      </tr>
      <tr>
        <th>适用于：</th>
        <td>所有元素，但不适用于非替换的内联元素、表格行和行组</td>
      </tr>
      <tr>
        <th>继承：</th>
        <td>否</td>
      </tr>
      <tr>
        <th>百分比：</th>
        <td>相对于包含块的宽度</td>
      </tr>
      <tr>
        <th>媒体：</th>
        <td><a href="media.html#visual-media-group" class="noxref">视觉</a></td>
      </tr>
      <tr>
        <th>计算值：</th>
        <td>指定的百分比或'auto'，或绝对长度</td>
      </tr>
    </tbody>
  </table>

  <p>此属性指定框的<a href="box.html#content-width">内容宽度</a>。</p>

  <p>此属性不适用于非替换的<a href="visuren.html#inline-boxes">内联</a>元素。非替换的内联元素框的内容宽度是其内渲染内容的宽度（在任何子元素的相对偏移之前）。请记住，内联框会流入<a
      href="visuren.html#line-box">行框</a>。行框的宽度由其<a href="visuren.html#containing-block">包含块</a>决定，但可能会因存在<a
      href="visuren.html#floats">浮动元素</a>而缩短。</p>

  <p>这些值具有以下含义：</p>

  <dl>
    <dt><span class="index-inst" title="&lt;长度&gt;"><a name="x4" href="syndata.html#value-def-length"
          class="noxref"><span class="value-inst-length"><strong>&lt;长度&gt;</strong></span></a></span></dt>
    <dd>使用长度单位指定内容区域的宽度。</dd>

    <dt><span class="index-inst" title="&lt;百分比&gt;"><a name="x5" href="syndata.html#value-def-percentage"
          class="noxref"><span class="value-inst-percentage"><strong>&lt;百分比&gt;</strong></span></a></span></dt>
    <dd>指定百分比宽度。百分比是相对于生成的框的<a href="visuren.html#containing-block">包含块</a>的宽度计算的。如果包含块的宽度依赖于该元素的宽度，那么在CSS
      2.2中，生成的布局是未定义的。
      <span class="note">
        注意：对于包含块基于块容器元素的绝对定位元素，百分比是相对于该元素的<em>填充框</em>宽度计算的。这是与CSS1的变化，CSS1中百分比宽度总是相对于父元素的<em>内容框</em>计算的。
      </span>
    </dd>

    <dt><strong>auto</strong></dt>
    <dd>宽度取决于其他属性的值。详见下文相关章节。</dd>
  </dl>

  <p><a href="visudet.html#propdef-width" class="noxref"><span class="propinst-width">'width'</span></a>的负值是非法的。</p>

  <div class="example">
    <P style="display:none">示例：</P>
    <p>例如，以下规则将段落的内容宽度固定为100像素：</p>
    <pre>
p { width: 100px }
</pre>
  </div>

  <h2>10.3 <a name="Computing_widths_and_margins">计算宽度和边距</a></h2>

  <p>元素的<a href="visudet.html#propdef-width" class="noxref"><span class="propinst-width">'width'</span></a>、<a
      href="box.html#propdef-margin-left" class="noxref"><span class="propinst-margin-left">'margin-left'</span></a>、<a
      href="box.html#propdef-margin-right" class="noxref"><span
        class="propinst-margin-right">'margin-right'</span></a>、<a href="visuren.html#propdef-left" class="noxref"><span
        class="propinst-left">'left'</span></a>和<a href="visuren.html#propdef-right" class="noxref"><span
        class="propinst-right">'right'</span></a>属性的值在布局中依赖于生成的框的类型和相互之间的关系。（用于布局的值有时被称为<a
      href="cascade.html#usedValue">实际值</a>。）原则上，使用的值与计算值相同，'auto'被替换为一些合适的值，并且根据包含块计算百分比，但也有例外情况。需要区分以下情况：</p>

  <ol>
    <li>内联，非替换元素</li>
    <li>内联，替换元素</li>
    <li>正常流中的块级，非替换元素</li>
    <li>正常流中的块级，替换元素</li>
    <li>浮动，非替换元素</li>
    <li>浮动，替换元素</li>
    <li>绝对定位的，非替换元素</li>
    <li>绝对定位的，替换元素</li>
    <li>正常流中的'inline-block'，非替换元素</li>
    <li>正常流中的'inline-block'，替换元素</li>
  </ol>

  <p>对于第1-6点和第9-10点，相对定位元素中'left'和'right'的值由<a href="visuren.html#relative-positioning">第9.4.3节</a>中的规则确定。</p>

  <p class="note"><em><strong>注意。</strong> 下面计算的'width'的实际值是一个暂定值，可能需要根据<a href="visudet.html#propdef-min-width"
        class="noxref"><span class="propinst-min-width">'min-width'</span></a>和<a href="visudet.html#propdef-max-width"
        class="noxref"><span class="propinst-max-width">'max-width'</span></a>多次计算，详见下面的<a
        href="#min-max-widths">最小和最大宽度</a>章节。</em></p>

  <h3>10.3.1 <a name="inline-width">内联，非替换元素</a></h3>

  <p><a href="visudet.html#propdef-width" class="noxref"><span class="propinst-width">'width'</span></a> 属性不适用。对于 <a
      href="box.html#propdef-margin-left" class="noxref"><span class="propinst-margin-left">'margin-left'</span></a> 或
    <a href="box.html#propdef-margin-right" class="noxref"><span class="propinst-margin-right">'margin-right'</span></a>
    计算值为 'auto' 的情况，实际值为 '0'。
  </p>

  <h3>10.3.2 <a name="inline-replaced-width">内联，替换元素</a></h3>

  <p>对于 <a href="box.html#propdef-margin-left" class="noxref"><span
        class="propinst-margin-left">'margin-left'</span></a> 或 <a href="box.html#propdef-margin-right"
      class="noxref"><span class="propinst-margin-right">'margin-right'</span></a> 计算值为 'auto' 的情况，实际值为 '0'。</p>

  <p>如果 <a href="visudet.html#propdef-height" class="noxref"><span class="propinst-height">'height'</span></a> 和 <a
      href="visudet.html#propdef-width" class="noxref"><span class="propinst-width">'width'</span></a> 的计算值均为 'auto'
    且元素有固有宽度，则该固有宽度即为 <a href="visudet.html#propdef-width" class="noxref"><span
        class="propinst-width">'width'</span></a> 的实际值。</p>

  <p>如果 <a href="visudet.html#propdef-height" class="noxref"><span class="propinst-height">'height'</span></a> 和 <a
      href="visudet.html#propdef-width" class="noxref"><span class="propinst-width">'width'</span></a> 的计算值均为 'auto'
    且元素没有固有宽度，但有固有高度和固有比例；或者如果 <a href="visudet.html#propdef-width" class="noxref"><span
        class="propinst-width">'width'</span></a> 的计算值为 'auto'，<a href="visudet.html#propdef-height"
      class="noxref"><span class="propinst-height">'height'</span></a> 有其他计算值，且元素有固有比例；则 <a
      href="visudet.html#propdef-width" class="noxref"><span class="propinst-width">'width'</span></a> 的实际值为：</p>

  <blockquote>
    <p>(实际高度) * (固有比例)</p>
  </blockquote>

  <p>如果 'height' 和 <a href="visudet.html#propdef-width" class="noxref"><span class="propinst-width">'width'</span></a>
    的计算值均为 'auto' 且元素有固有比例但没有固有高度或宽度，则在 CSS 2.2 中 'width' 的实际值是未定义的。然而，建议如果包含块的宽度不依赖于替换元素的宽度，则 'width'
    的实际值应通过用于正常流中块级非替换元素的约束方程来计算。</p>

  <p>否则，如果 <a href="visudet.html#propdef-width" class="noxref"><span class="propinst-width">'width'</span></a> 的计算值为
    'auto' 且元素有固有宽度，则该固有宽度即为 <a href="visudet.html#propdef-width" class="noxref"><span
        class="propinst-width">'width'</span></a> 的实际值。</p>

  <p>否则，如果 <a href="visudet.html#propdef-width" class="noxref"><span class="propinst-width">'width'</span></a> 的计算值为
    'auto'，但不满足上述条件，则 <a href="visudet.html#propdef-width" class="noxref"><span
        class="propinst-width">'width'</span></a> 的实际值为 300px。如果 300px 太宽而无法适应设备，用户代理应使用宽高比为 2:1 且适合设备的最大矩形的宽度。</p>


  <h3>10.3.3 <a name="blockwidth">块级，非替换元素在正常流中</a></h3>

  <p>以下约束条件必须适用于其他属性的实际值：</p>
  <blockquote>
    <p><a href="box.html#propdef-margin-left" class="noxref"><span class="propinst-margin-left">'margin-left'</span></a>
      + <a href="box.html#propdef-border-left-width" class="noxref"><span
          class="propinst-border-left-width">'border-left-width'</span></a> + <a href="box.html#propdef-padding-left"
        class="noxref"><span class="propinst-padding-left">'padding-left'</span></a> + <a
        href="visudet.html#propdef-width" class="noxref"><span class="propinst-width">'width'</span></a> + <a
        href="box.html#propdef-padding-right" class="noxref"><span
          class="propinst-padding-right">'padding-right'</span></a> + <a href="box.html#propdef-border-right-width"
        class="noxref"><span class="propinst-border-right-width">'border-right-width'</span></a> + <a
        href="box.html#propdef-margin-right" class="noxref"><span
          class="propinst-margin-right">'margin-right'</span></a> = <a href="#containing-block-details">包含块</a>的宽度。
    </p>
  </blockquote>
  <p>如果 'width' 不是 'auto'，且 'border-left-width' + 'padding-left' + 'width' + 'padding-right' +
    'border-right-width'（加上任何非 'auto' 的 'margin-left' 或 'margin-right'）大于包含块的宽度，则以下规则将把任何 'auto' 值的 'margin-left' 或
    'margin-right' 视为零。</p>
  <p>如果上述所有属性的计算值都不是 'auto'，则这些值被称为“过度约束”，其中一个实际值必须与其计算值不同。如果包含块的 <a href="visuren.html#propdef-direction"
      class="noxref"><span class="propinst-direction">'direction'</span></a> 属性值为 'ltr'，则指定的 <a
      href="box.html#propdef-margin-right" class="noxref"><span class="propinst-margin-right">'margin-right'</span></a>
    值将被忽略，并计算该值以使等式成立。如果 <a href="visuren.html#propdef-direction" class="noxref"><span
        class="propinst-direction">'direction'</span></a> 的值为 'rtl'，则这种情况发生在 <a href="box.html#propdef-margin-left"
      class="noxref"><span class="propinst-margin-left">'margin-left'</span></a>。</p>
  <p>如果正好有一个值被指定为 'auto'，则其实际值由等式得出。</p>
  <p>如果 <a href="visudet.html#propdef-width" class="noxref"><span class="propinst-width">'width'</span></a> 被设置为
    'auto'，则任何其他 'auto' 值变为 '0'，<a href="visudet.html#propdef-width" class="noxref"><span
        class="propinst-width">'width'</span></a> 由结果等式得出。</p>
  <p>如果 <a href="box.html#propdef-margin-left" class="noxref"><span
        class="propinst-margin-left">'margin-left'</span></a> 和 <a href="box.html#propdef-margin-right"
      class="noxref"><span class="propinst-margin-right">'margin-right'</span></a> 都是
    'auto'，它们的实际值相等。这会使元素相对于包含块的边缘水平居中。</p>

  <h3>10.3.4 <a name="block-replaced-width">块级、替换元素在正常流中的宽度</a></h3>

  <p>对于替换元素，<a href="visudet.html#propdef-width" class="noxref"><span class="propinst-width">'width'</span></a>
    的使用值的确定方式与 <a href="#inline-replaced-width">行内替换元素</a> 相同。 然后应用 <a href="#blockwidth">块级非替换元素</a> 的规则来确定边距。</p>

  <h3>10.3.5 <a name="float-width">浮动的、非替换元素的宽度</a></h3>

  <p>如果 <a href="box.html#propdef-margin-left" class="noxref"><span
        class="propinst-margin-left">'margin-left'</span></a> 或 <a href="box.html#propdef-margin-right"
      class="noxref"><span class="propinst-margin-right">'margin-right'</span></a> 被计算为 'auto'，它们的使用值为 '0'。</p>

  <p>如果 <a href="visudet.html#propdef-width" class="noxref"><span class="propinst-width">'width'</span></a> 被计算为
    'auto'，使用值为“缩小适应”宽度。</p>

  <p><a name="shrink-to-fit-float"></a>
    缩小适应宽度的计算类似于使用自动表格布局算法计算表格单元格的宽度。大致上：通过格式化内容来计算首选宽度，不在显式换行之外进行换行，同时计算首选的<em>最小</em>宽度，例如，通过尝试所有可能的换行来实现。CSS 2.2
    并未定义确切的算法。第三步，找到<em>可用宽度</em>：在这种情况下，这是包含块的宽度减去
    'margin-left'、'border-left-width'、'padding-left'、'padding-right'、'border-right-width'、'margin-right'
    的使用值，以及任何相关滚动条的宽度。</p>

  <p>然后缩小适应宽度为：min(max(首选最小宽度, 可用宽度), 首选宽度)。</p>

  <h3>10.3.6 <a name="float-replaced-width">浮动的、替换元素</a></h3>

  <p>如果 <a href="box.html#propdef-margin-left" class="noxref"><span
        class="propinst-margin-left">'margin-left'</span></a> 或 <a href="box.html#propdef-margin-right"
      class="noxref"><span class="propinst-margin-right">'margin-right'</span></a> 被计算为 'auto'，它们的使用值为 '0'。<a
      href="visudet.html#propdef-width" class="noxref"><span class="propinst-width">'width'</span></a> 的使用值如 <a
      href="#inline-replaced-width">行内替换元素</a> 的情况一样确定。</p>

  <h3>10.3.7 <a name="abs-non-replaced-width">绝对定位的、非替换元素</a></h3>

  <p>为了本节和下一节的目的，术语 <a name=static-position><span class=index>"static
        position"</span></a>（元素的静态位置）大致指元素在正常流中应有的位置。更准确地说：</p>

  <ul>
    <li><dfn>静态位置的包含块</dfn> 是假设元素的 <a href="visuren.html#propdef-position" class="noxref"><span
          class="propinst-position">'position'</span></a> 值为 'static' 并且 'float' 值为 'none' 时，该元素生成的第一个框的包含块。（注意，由于 <a
        href="visuren.html#dis-pos-flo">第 9.7 节</a> 中的规则，此假设计算可能还需要假定 'display' 的计算值不同。）</li>
    <li>‘left’ 的静态位置是从包含块的左边缘到假设框的左边缘的距离，该框是根据元素的 <a href="visuren.html#propdef-position" class="noxref"><span
          class="propinst-position">'position'</span></a> 属性假设为 'static'，并且 <a href="visuren.html#propdef-float"
        class="noxref"><span class="propinst-float">'float'</span></a> 为 'none' 时生成的。如果假设的框位于包含块的左侧，则该值为负。</li>
    <li>‘right’ 的静态位置是从包含块的右边缘到同一个假设框的右边缘的距离。如果假设的框位于包含块的边缘左侧，则该值为正。</li>
  </ul>

  <p>但用户代理可以自由地猜测其可能的位置，而无需实际计算该假设框的尺寸。</p>

  <p>在计算静态位置时，固定定位元素的包含块是初始包含块，而不是视口，并且应假定所有可滚动的框都滚动到其原点。</p>

  <p>确定这些元素的使用值的约束条件是：</p>

  <blockquote>
    <p>'left' + 'margin-left' + 'border-left-width' + 'padding-left' + 'width' + 'padding-right' + 'border-right-width'
      + 'margin-right' + 'right' = 包含块的宽度</p>
  </blockquote>

  <p>如果 'left'、'width' 和 'right' 都是 'auto'：首先将 'margin-left' 和 'margin-right' 的任何 'auto' 值设置为 0。然后，如果建立静态位置包含块的元素的
    'direction' 属性为 'ltr'，则将 'left' 设置为<a href="#static-position">静态位置</a>并应用下面的第三条规则；否则，将 'right' 设置为<a
      href="#static-position">静态位置</a>并应用下面的第一条规则。</p>

  <p>如果三者都不是 'auto'：如果 'margin-left' 和 'margin-right' 都是 'auto'，则在附加约束下求解该方程，即两个边距获得相等的值，除非这会使它们变为负值，在这种情况下，当包含块的方向为
    'ltr'（'rtl'）时，将 'margin-left'（'margin-right'）设置为零并求解 'margin-right'（'margin-left'）。如果 'margin-left' 或 'margin-right'
    中有一个是 'auto'，则求解该值的方程。如果这些值过度约束，则忽略 'left' 的值（如果包含块的 'direction' 属性为 'rtl'）或 'right'（如果 'direction' 为 'ltr'）的值并求解该值。
  </p>

  <p>否则，将 'margin-left' 和 'margin-right' 的 'auto' 值设置为 0，然后选择以下适用的六条规则之一。</p>

  <ol>
    <li>'left' 和 'width' 是 'auto' 而 'right' 不是 'auto'，则宽度是缩小适应宽度。然后求解 'left'</li>

    <li>'left' 和 'right' 是 'auto' 而 'width' 不是 'auto'，则如果建立静态位置包含块的元素的 'direction' 属性为 'ltr'，则将 'left' 设置为 <a
        href="#static-position">静态位置</a>，否则将 'right' 设置为 <a href="#static-position">静态位置</a>。然后求解 'left'（如果 'direction'
      是 'rtl'）或 'right'（如果 'direction' 是 'ltr'）。</li>

    <li>'width' 和 'right' 是 'auto' 而 'left' 不是 'auto'，则宽度是缩小适应宽度。然后求解 'right'</li>

    <li>'left' 是 'auto'，'width' 和 'right' 不是 'auto'，则求解 'left'</li>

    <li>'width' 是 'auto'，'left' 和 'right' 不是 'auto'，则求解 'width'</li>

    <li>'right' 是 'auto'，'left' 和 'width' 不是 'auto'，则求解 'right'</li>
  </ol>

  <p>缩小适应宽度的计算类似于使用自动表格布局算法计算表格单元格的宽度。大致上：通过格式化内容来计算首选宽度，不在显式换行之外进行换行，并且还计算首选的<em>最小</em>宽度，例如，通过尝试所有可能的换行。CSS 2.2
    未定义确切的算法。第三步，计算<em>可用宽度</em>：通过在设置 'left'（在情况 1 中）或 'right'（在情况 3 中）为 0 之后求解 'width' 来找到它。</p>

  <p>然后缩小适应宽度为：min(max(首选最小宽度, 可用宽度), 首选宽度)。</p>

  <h3>10.3.8 <a name="abs-replaced-width">绝对定位的替换元素</a></h3>

  <p>在这种情况下，<a href="#abs-non-replaced-width">第 10.3.7 节</a>适用于约束方程式的前半部分，但剩余部分由以下规则替代：</p>

  <ol>
    <li>使用值<a href="visudet.html#propdef-width" class="noxref"><span class="propinst-width">'width'</span></a>的确定方式与<a
        href="#inline-replaced-width">行内替换元素</a>相同。如果<a href="box.html#propdef-margin-left" class="noxref"><span
          class="propinst-margin-left">'margin-left'</span></a>或<a href="box.html#propdef-margin-right"
        class="noxref"><span class="propinst-margin-right">'margin-right'</span></a>被指定为'auto'，则其使用值由以下规则确定。</li>
    <li>如果<a href="visuren.html#propdef-left" class="noxref"><span class="propinst-left">'left'</span></a>和<a
        href="visuren.html#propdef-right" class="noxref"><span
          class="propinst-right">'right'</span></a>都为'auto'，那么如果建立静态位置包含块的元素的'direction'属性为'ltr'，将<a
        href="visuren.html#propdef-left" class="noxref"><span
          class="propinst-left">'left'</span></a>设置为静态位置；如果'direction'为'rtl'，则将<a href="visuren.html#propdef-right"
        class="noxref"><span class="propinst-right">'right'</span></a>设置为静态位置。</li>
    <li>如果<a href="visuren.html#propdef-left" class="noxref"><span class="propinst-left">'left'</span></a>或<a
        href="visuren.html#propdef-right" class="noxref"><span class="propinst-right">'right'</span></a>为'auto'，将<a
        href="box.html#propdef-margin-left" class="noxref"><span
          class="propinst-margin-left">'margin-left'</span></a>或<a href="box.html#propdef-margin-right"
        class="noxref"><span class="propinst-margin-right">'margin-right'</span></a>中的任何'auto'替换为'0'。</li>
    <li>如果此时<a href="box.html#propdef-margin-left" class="noxref"><span
          class="propinst-margin-left">'margin-left'</span></a>和<a href="box.html#propdef-margin-right"
        class="noxref"><span
          class="propinst-margin-right">'margin-right'</span></a>仍然为'auto'，则在附加约束条件下求解方程，即两个边距必须获得相等的值，除非这会使它们变为负值。在这种情况下，当包含块的方向为'ltr'（'rtl'）时，将<a
        href="box.html#propdef-margin-left" class="noxref"><span
          class="propinst-margin-left">'margin-left'</span></a>（<a href="box.html#propdef-margin-right"
        class="noxref"><span class="propinst-margin-right">'margin-right'</span></a>）设置为零，并求解<a
        href="box.html#propdef-margin-right" class="noxref"><span
          class="propinst-margin-right">'margin-right'</span></a>（<a href="box.html#propdef-margin-left"
        class="noxref"><span class="propinst-margin-left">'margin-left'</span></a>）。</li>
    <li>如果此时仍有一个'auto'值，则为该值求解方程。</li>
    <li>如果此时这些值过度约束，忽略<a href="visuren.html#propdef-left" class="noxref"><span
          class="propinst-left">'left'</span></a>的值（如果包含块的<a href="visuren.html#propdef-direction" class="noxref"><span
          class="propinst-direction">'direction'</span></a>属性为'rtl'）或<a href="visuren.html#propdef-right"
        class="noxref"><span class="propinst-right">'right'</span></a>的值（如果<a href="visuren.html#propdef-direction"
        class="noxref"><span class="propinst-direction">'direction'</span></a>为'ltr'），并求解该值。</li>
  </ol>


  <h3>10.3.9 <a name="inlineblock-width">“行内块”正常流中的非替换元素</a></h3>

  <p>如果<a href="visudet.html#propdef-width" class="noxref"><span
        class="propinst-width">'width'</span></a>为'auto'，则使用的值为<a href="#shrink-to-fit-float">缩小以适应</a>的宽度，如浮动元素。</p>
  <p>对于<a href="box.html#propdef-margin-left" class="noxref"><span
        class="propinst-margin-left">'margin-left'</span></a>或<a href="box.html#propdef-margin-right"
      class="noxref"><span class="propinst-margin-right">'margin-right'</span></a>的计算值为'auto'，使用的值为'0'。</p>

  <h3>10.3.10 <a name="inlineblock-replaced-width">“行内块”正常流中的替换元素</a></h3>

  <p>与<a href="#inline-replaced-width">行内替换元素</a>完全相同。</p>

  <h2>10.4 <a name="min-max-widths">最小和最大宽度</a>：<a href="visudet.html#propdef-min-width" class="noxref"><span
        class="propinst-min-width">'min-width'</span></a> 和 <a href="visudet.html#propdef-max-width"
      class="noxref"><span class="propinst-max-width">'max-width'</span></a></h2>

  <table class="def propdef">
    <tbody>
      <tr>
        <th>名称：</th>
        <td><a name="x6"><span class="index-def" title="'min-width'"><dfn
                id="propdef-min-width">min-width</dfn></span></a></td>
      </tr>
      <tr>
        <th>值：</th>
        <td><a href="syndata.html#value-def-length" class="noxref"><span
              class="value-inst-length">&lt;length&gt;</span></a> | <a href="syndata.html#value-def-percentage"
            class="noxref"><span class="value-inst-percentage">&lt;percentage&gt;</span></a> | <a
            href="cascade.html#value-def-inherit" class="noxref"><span class="value-inst-inherit">inherit</span></a>
        </td>
      </tr>
      <tr>
        <th>初始值：</th>
        <td>0</td>
      </tr>
      <tr>
        <th>适用于：</th>
        <td>所有元素，但非替换行内元素、表格行和行组除外</td>
      </tr>
      <tr>
        <th>继承：</th>
        <td>否</td>
      </tr>
      <tr>
        <th>百分比：</th>
        <td>参考包含块的宽度</td>
      </tr>
      <tr>
        <th>媒体：</th>
        <td><a href="media.html#visual-media-group" class="noxref">视觉</a></td>
      </tr>
      <tr>
        <th>计算值：</th>
        <td>按指定的百分比或绝对长度计算</td>
      </tr>
    </tbody>
  </table>

  <table class="def propdef">
    <tbody>
      <tr>
        <th>名称：</th>
        <td><a name="x7"><span class="index-def" title="'max-width'"><dfn
                id="propdef-max-width">max-width</dfn></span></a></td>
      </tr>
      <tr>
        <th>值：</th>
        <td><a href="syndata.html#value-def-length" class="noxref"><span
              class="value-inst-length">&lt;length&gt;</span></a> | <a href="syndata.html#value-def-percentage"
            class="noxref"><span class="value-inst-percentage">&lt;percentage&gt;</span></a> | none | <a
            href="cascade.html#value-def-inherit" class="noxref"><span class="value-inst-inherit">inherit</span></a>
        </td>
      </tr>
      <tr>
        <th>初始值：</th>
        <td>none</td>
      </tr>
      <tr>
        <th>适用于：</th>
        <td>所有元素，但非替换行内元素、表格行和行组除外</td>
      </tr>
      <tr>
        <th>继承：</th>
        <td>否</td>
      </tr>
      <tr>
        <th>百分比：</th>
        <td>参考包含块的宽度</td>
      </tr>
      <tr>
        <th>媒体：</th>
        <td><a href="media.html#visual-media-group" class="noxref">视觉</a></td>
      </tr>
      <tr>
        <th>计算值：</th>
        <td>按指定的百分比或绝对长度或“none”计算</td>
      </tr>
    </tbody>
  </table>

  <p>这两个属性允许作者将内容宽度限制在一定范围内。其值有以下含义：</p>

  <dl>
    <dt><span class="index-inst" title="&lt;length&gt;"><a name="x8" href="syndata.html#value-def-length"
          class="noxref"><span class="value-inst-length"><strong>&lt;length&gt;</strong></span></a></span></dt>
    <dd>指定固定的最小或最大使用宽度。</dd>

    <dt><span class="index-inst" title="&lt;percentage&gt;"><a name="x9" href="syndata.html#value-def-percentage"
          class="noxref"><span class="value-inst-percentage"><strong>&lt;percentage&gt;</strong></span></a></span></dt>
    <dd>指定用于确定使用值的百分比。百分比是根据生成的框的<a
        href="visuren.html#containing-block">包含块</a>的宽度计算的。如果包含块的宽度为负，则使用值为零。如果包含块的宽度取决于此元素的宽度，则 CSS 2.2 中的布局结果是未定义的。
    </dd>

    <dt><strong>none</strong></dt>
    <dd>（仅在<a href="visudet.html#propdef-max-width" class="noxref"><span
          class="propinst-max-width">'max-width'</span></a>上使用）没有对框宽度的限制。</dd>
  </dl>

  <p><a href="visudet.html#propdef-min-width" class="noxref"><span class="propinst-min-width">'min-width'</span></a>和<a
      href="visudet.html#propdef-max-width" class="noxref"><span
        class="propinst-max-width">'max-width'</span></a>的负值是非法的。</p>

  <p>在 CSS&nbsp;2.2 中，'min-width'和'max-width'对表格、行内表格、表格单元格、表格列和列组的影响是未定义的。</p>

  <p>以下算法描述了这两个属性如何影响<a href="cascade.html#computed-value">使用值</a>的<a href="visudet.html#propdef-width"
      class="noxref"><span class="propinst-width">'width'</span></a>属性：</p>

  <ol>
    <li>根据上述<a href="#Computing_widths_and_margins">“计算宽度和边距”</a>规则（不考虑<a href="visudet.html#propdef-min-width"
        class="noxref"><span class="propinst-min-width">'min-width'</span></a>和<a href="visudet.html#propdef-max-width"
        class="noxref"><span class="propinst-max-width">'max-width'</span></a>），计算初步使用的宽度。</li>

    <li>如果初步使用的宽度大于<a href="visudet.html#propdef-max-width" class="noxref"><span
          class="propinst-max-width">'max-width'</span></a>，则再次应用上述规则，但这次使用<a href="visudet.html#propdef-max-width"
        class="noxref"><span class="propinst-max-width">'max-width'</span></a>的计算值作为<a href="visudet.html#propdef-width"
        class="noxref"><span class="propinst-width">'width'</span></a>的计算值。</li>

    <li>如果得到的宽度小于<a href="visudet.html#propdef-min-width" class="noxref"><span
          class="propinst-min-width">'min-width'</span></a>，则再次应用上述规则，但这次使用<a href="visudet.html#propdef-min-width"
        class="noxref"><span class="propinst-min-width">'min-width'</span></a>的计算值作为<a href="visudet.html#propdef-width"
        class="noxref"><span class="propinst-width">'width'</span></a>的计算值。</li>
  </ol>

  <p class="note">这些步骤不会影响上述属性的实际计算值。</p>

  <p>然而，对于具有固有比例并且'a'和'b'均指定为'auto'的替换元素，算法如下：</p>

  <p>从表中选择适当约束违反情况下的解决宽度和高度值。将<var>max-width</var>和<var>max-height</var>作为max(min, max)，以便保持<var>min</var> &#8804;
    <var>max</var>。在此表中，<var>w</var>和<var>h</var>表示忽略<a href="visudet.html#propdef-min-width" class="noxref"><span
        class="propinst-min-width">'min-width'</span></a>、<a href="visudet.html#propdef-min-height" class="noxref"><span
        class="propinst-min-height">'min-height'</span></a>、<a href="visudet.html#propdef-max-width"
      class="noxref"><span class="propinst-max-width">'max-width'</span></a>和<a href="visudet.html

#propdef-max-height" class="noxref"><span class="propinst-max-height">'max-height'</span></a>属性的宽度和高度计算结果。
  </p>

  <p class="note">注意：在设置了显式宽度或高度且另一侧为自动的情况下，应用最小或最大限制可能会导致约束过多的情况。规范对此行为有明确规定，但可能与作者的预期不符。在这种情况下，可以使用 CSS3 object-fit
    属性来获得不同的结果。</p>

  <table rules="all">
    <thead>
      <tr>
        <th>约束违反</th>
        <th>解决宽度</th>
        <th>解决高度</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>无</td>
        <td><var>w</var></td>
        <td><var>h</var></td>
      </tr>
      <tr>
        <td><var>w&nbsp;>&nbsp;max-width</var></td>
        <td><var>max-width</var></td>
        <td><var>max(max-width&nbsp;*&nbsp;h/w, min-height)</var></td>
      </tr>
      <tr>
        <td><var>w&nbsp;&lt;&nbsp;min-width</var></td>
        <td><var>min-width</var></td>
        <td><var>min(min-width&nbsp;*&nbsp;h/w, max-height)</var></td>
      </tr>
      <tr>
        <td><var>h&nbsp;>&nbsp;max-height</var></td>
        <td><var>max(max-height&nbsp;*&nbsp;w/h, min-width)</var></td>
        <td><var>max-height</var></td>
      </tr>
      <tr>
        <td><var>h&nbsp;&lt;&nbsp;min-height</var></td>
        <td><var>min(min-height&nbsp;*&nbsp;w/h, max-width)</var></td>
        <td><var>min-height</var></td>
      </tr>
      <tr>
        <td>(<var>w&nbsp;>&nbsp;max-width</var>) 和 (<var>h&nbsp;>&nbsp;max-height</var>),
          其中(<var>max-width/w&nbsp;&#8804;&nbsp;max-height/h</var>)</td>
        <td><var>max-width</var></td>
        <td><var>max(min-height, max-width&nbsp;*&nbsp;h/w)</var></td>
      </tr>
      <tr>
        <td>(<var>w&nbsp;>&nbsp;max-width</var>) 和 (<var>h&nbsp;>&nbsp;max-height</var>),
          其中(<var>max-width/w&nbsp;>&nbsp;max-height/h</var>)</td>
        <td><var>max(min-width, max-height&nbsp;*&nbsp;w/h)</var></td>
        <td><var>max-height</var></td>
      </tr>
      <tr>
        <td>(<var>w&nbsp;&lt;&nbsp;min-width</var>) 和 (<var>h&nbsp;&lt;&nbsp;min-height</var>),
          其中(<var>min-width/w&nbsp;&#8804;&nbsp;min-height/h</var>)</td>
        <td><var>min(max-width, min-height&nbsp;*&nbsp;w/h)</var></td>
        <td><var>min-height</var></td>
      </tr>
      <tr>
        <td>(<var>w&nbsp;&lt;&nbsp;min-width</var>) 和 (<var>h&nbsp;&lt;&nbsp;min-height</var>),
          其中(<var>min-width/w&nbsp;>&nbsp;min-height/h</var>)</td>
        <td><var>min-width</var></td>
        <td><var>min(max-height, min-width&nbsp;*&nbsp;h/w)</var></td>
      </tr>
      <tr>
        <td>(<var>w&nbsp;&lt;&nbsp;min-width</var>) 和 (<var>h&nbsp;>&nbsp;max-height</var>)</td>
        <td><var>min-width</var></td>
        <td><var>max-height</var></td>
      </tr>
      <tr>
        <td>(<var>w&nbsp;>&nbsp;max-width</var>) 和 (<var>h&nbsp;&lt;&nbsp;min-height</var>)</td>
        <td><var>max-width</var></td>
        <td><var>min-height</var></td>
      </tr>
    </tbody>
  </table>

  <p>然后按照上述<a href="#Computing_widths_and_margins">“计算宽度和边距”</a>规则进行操作，就好像<a href="visudet.html#propdef-width"
      class="noxref"><span class="propinst-width">'width'</span></a>是根据该值计算的一样。</p>





  <h2>10.5 <a name="the-height-property">内容高度</a>：<a href="visudet.html#propdef-height" class="noxref"><span
        class="propinst-height">'height'</span></a> 属性</h2>

  <table class="def propdef">
    <tbody>
      <tr>
        <th>名称：</th>
        <td><a name="x10"><span class="index-def" title="'height'"><dfn id="propdef-height">height</dfn></span></a></td>
      </tr>
      <tr>
        <th>值：</th>
        <td><a href="syndata.html#value-def-length" class="noxref"><span
              class="value-inst-length">&lt;length&gt;</span></a> | <a href="syndata.html#value-def-percentage"
            class="noxref"><span class="value-inst-percentage">&lt;percentage&gt;</span></a> | auto | <a
            href="cascade.html#value-def-inherit" class="noxref"><span class="value-inst-inherit">inherit</span></a>
        </td>
      </tr>
      <tr>
        <th>初始值：</th>
        <td>auto</td>
      </tr>
      <tr>
        <th>适用于：</th>
        <td>所有元素，但非替换行内元素、表格列和列组除外</td>
      </tr>
      <tr>
        <th>继承：</th>
        <td>否</td>
      </tr>
      <tr>
        <th>百分比：</th>
        <td>见下文</td>
      </tr>
      <tr>
        <th>媒体：</th>
        <td><a href="media.html#visual-media-group" class="noxref">视觉</a></td>
      </tr>
      <tr>
        <th>计算值：</th>
        <td>按指定的百分比或“auto”或绝对长度计算</td>
      </tr>
    </tbody>
  </table>

  <p>此属性指定盒子的<a href="box.html#content-height">内容高度</a>。</p>

  <p>此属性不适用于非替换的<a href="visuren.html#inline-boxes">行内</a>元素。有关用于此类元素的规则，请参见<a
      href="#inline-non-replaced">计算高度和边距</a>的章节。</p>

  <p>值的含义如下：</p>

  <dl>
    <dt><span class="index-inst" title="&lt;length&gt;"><a name="x11" href="syndata.html#value-def-length"
          class="noxref"><span class="value-inst-length"><strong>&lt;length&gt;</strong></span></a></span></dt>
    <dd>使用长度值指定内容区域的高度。</dd>

    <dt><span class="index-inst" title="&lt;percentage&gt;"><a name="x12" href="syndata.html#value-def-percentage"
          class="noxref"><span class="value-inst-percentage"><strong>&lt;percentage&gt;</strong></span></a></span></dt>
    <dd>指定百分比高度。百分比是相对于生成的盒子的<a
        href="visuren.html#containing-block">包含块</a>的高度计算的。如果包含块的高度没有明确指定（即取决于内容高度），并且此元素不是绝对定位的，则使用高度按“auto”来计算。根元素上的百分比高度是相对于<a
        href="#containing-block-details">初始包含块</a>的。</dd>

    <dt><strong>auto</strong></dt>
    <dd>高度取决于其他属性的值。详见下文。</dd>
  </dl>

  <p class="note">请注意，绝对定位元素的包含块的高度独立于元素本身的大小，因此可以始终解析此类元素上的百分比高度。然而，可能在处理文档中的后续元素之前，高度尚未确定。</p>

  <p>负值的<a href="visudet.html#propdef-height" class="noxref"><span class="propinst-height">'height'</span></a>是非法的。</p>

  <div class="example">
    <P style="display:none">示例：</P>
    <p>例如，以下规则将段落的内容高度设置为100像素：</p>

    <pre>
p { height: 100px }
</pre>

    <p>内容高度超过100像素的段落将根据<a href="visufx.html#overflow">溢出</a>属性按<a href="visufx.html#propdef-overflow"
        class="noxref"><span class="propinst-overflow">'overflow'</span></a>属性处理。</p>
  </div>

  <h2>10.6 <a name="Computing_heights_and_margins">计算高度和边距</a></h2>

  <p>在计算<a href="visuren.html#propdef-top" class="noxref"><span class="propinst-top">'top'</span></a>、<a
      href="box.html#propdef-margin-top" class="noxref"><span class="propinst-margin-top">'margin-top'</span></a>、<a
      href="visudet.html#propdef-height" class="noxref"><span class="propinst-height">'height'</span></a>、<a
      href="box.html#propdef-margin-bottom" class="noxref"><span
        class="propinst-margin-bottom">'margin-bottom'</span></a>和<a href="visuren.html#propdef-bottom"
      class="noxref"><span class="propinst-bottom">'bottom'</span></a>的值时，必须区分不同类型的盒子：</p>

  <ol>
    <li>行内、非替换元素</li>
    <li>行内、替换元素</li>
    <li>常规流中的块级、非替换元素</li>
    <li>常规流中的块级、替换元素</li>
    <li>浮动、非替换元素</li>
    <li>浮动、替换元素</li>
    <li>绝对定位的非替换元素</li>
    <li>绝对定位的替换元素</li>
    <li>常规流中的‘行内块’、非替换元素</li>
    <li>常规流中的‘行内块’、替换元素</li>
  </ol>

  <p>对于第1-6和第9-10项，‘top’和‘bottom’的使用值由第9.4.3节的规则确定。</p>

  <p class="note">注意：这些规则同样适用于根元素，如同其他元素一样。</p>

  <p class="note"><em><strong>注意：</strong>下面计算出的‘height’使用值是一个初步值，可能需要多次计算，具体取决于<a
        href="visudet.html#propdef-min-height" class="noxref"><span
          class="propinst-min-height">'min-height'</span></a>和<a href="visudet.html#propdef-max-height"
        class="noxref"><span class="propinst-max-height">'max-height'</span></a>，详见<a
        href="#min-max-heights">最小和最大高度</a>章节。</em></p>

  <h3>10.6.1 <a name="inline-non-replaced">行内、非替换元素</a></h3>

  <p><a href="visudet.html#propdef-height" class="noxref"><span class="propinst-height">'height'</span></a>
    属性不适用。内容区域的高度应基于字体，但本规范未指定如何计算。用户代理（UA）可以例如使用 em-box 或字体的最大升序线和降序线来确定高度。（后者可以确保字符的部分位于 em-box
    之外时仍在内容区域内，但会导致不同字体的盒子大小不同；前者则可以确保作者可以相对于 'line-height' 控制背景样式，但会导致字符绘制在其内容区域之外。）</p>

  <p class=note>注意：CSS 的第三级可能会包含一个属性，用于选择字体的哪一部分用于内容高度的计算。</p>

  <p>行内非替换盒子的垂直填充、边框和边距从内容区域的顶部和底部开始，与<a href="visudet.html#propdef-line-height" class="noxref"><span
        class="propinst-line-height">'line-height'</span></a>无关。但计算行框高度时，仅使用<a href="visudet.html#propdef-line-height"
      class="noxref"><span class="propinst-line-height">'line-height'</span></a>。</p>

  <p><a
      name="multi-font-inline-height"></a>如果使用了多个字体（例如当字符在不同字体中找到时可能发生），本规范未定义内容区域的高度。然而，我们建议选择的高度应使内容区域刚好足以容纳所有字体的（1）em-box
    或（2）最大升序线和降序线。请注意，根据字体的基线对齐方式，这可能比任何涉及的字体大小都要大。</p>

  <h3>10.6.2 <a name="inline-replaced-height">行内替换元素</a>，常规流中的块级替换元素，常规流中的‘行内块’替换元素以及浮动替换元素</h3>

  <p>如果<a href="box.html#propdef-margin-top" class="noxref"><span class="propinst-margin-top">'margin-top'</span></a>或<a
      href="box.html#propdef-margin-bottom" class="noxref"><span
        class="propinst-margin-bottom">'margin-bottom'</span></a>为 'auto'，则其使用值为 0。</p>

  <p>如果<a href="visudet.html#propdef-height" class="noxref"><span class="propinst-height">'height'</span></a>和<a
      href="visudet.html#propdef-width" class="noxref"><span class="propinst-width">'width'</span></a>的计算值均为
    'auto'，且元素具有内在高度，则该内在高度为<a href="visudet.html#propdef-height" class="noxref"><span
        class="propinst-height">'height'</span></a>的使用值。</p>

  <p>否则，如果<a href="visudet.html#propdef-height" class="noxref"><span class="propinst-height">'height'</span></a>的计算值为
    'auto'，且元素具有内在比例，则<a href="visudet.html#propdef-height" class="noxref"><span
        class="propinst-height">'height'</span></a>的使用值为：</p>

  <blockquote>
    <p>(使用宽度) / (内在比例)</p>
  </blockquote>

  <p>否则，如果<a href="visudet.html#propdef-height" class="noxref"><span class="propinst-height">'height'</span></a>的计算值为
    'auto'，且元素具有内在高度，则该内在高度为<a href="visudet.html#propdef-height" class="noxref"><span
        class="propinst-height">'height'</span></a>的使用值。</p>

  <p>否则，如果<a href="visudet.html#propdef-height" class="noxref"><span class="propinst-height">'height'</span></a>的计算值为
    'auto'，但不满足上述任何条件，则<a href="visudet.html#propdef-height" class="noxref"><span
        class="propinst-height">'height'</span></a>的使用值必须设置为具有2:1比例、高度不超过150px且宽度不超过设备宽度的最大矩形的高度。</p>




  <h3>10.6.3 <a name="normal-block">正常流中 'overflow' 计算为 'visible' 时的块级非替换元素</a></h3>

  <p>本节也适用于在正常流中当 'overflow' 未计算为 'visible' 但已传播到视口的块级非替换元素。</p>

  <p>如果<a href="box.html#propdef-margin-top" class="noxref"><span class="propinst-margin-top">'margin-top'</span></a>或<a
      href="box.html#propdef-margin-bottom" class="noxref"><span
        class="propinst-margin-bottom">'margin-bottom'</span></a>为 'auto'，则它们的使用值为 0。如果<a
      href="visudet.html#propdef-height" class="noxref"><span class="propinst-height">'height'</span></a>为
    'auto'，高度取决于该元素是否有任何块级子元素以及是否具有填充或边框：</p>

  <p>该元素的高度是从其顶部内容边缘到以下第一个适用条件的距离：</p>

  <ol>
    <li>最后一个行框的底边缘，如果该框建立了一个或多个行的内联格式化上下文</li>
    <li>其最后一个流内子元素的底部（可能合并的）边距的底边缘，如果该子元素的底边距未与该元素的底边距合并</li>
    <li>最后一个流内子元素的底部边框边缘，其顶部边距未与该元素的底边距合并</li>
    <li>否则为零</li>
  </ol>

  <p>仅考虑正常流中的子元素（即，忽略浮动框和绝对定位的框，相对定位的框在不考虑其偏移的情况下进行考虑）。请注意，子框可能是<a href="visuren.html#anonymous-block-level">匿名块框。</a>
  </p>

  <h3>10.6.4 <a name="abs-non-replaced-height">绝对定位的非替换元素</a></h3>

  <p>在本节和下一节中，术语“静态位置”（元素的静态位置）大致指的是元素在正常流中本应具有的位置。更确切地说，‘top’ 的静态位置是包含块的顶部边缘到假设框顶部边距边缘的距离，该假设框本应是元素的第一个框，如果它的指定 <a
      href="visuren.html#propdef-position" class="noxref"><span class="propinst-position">'position'</span></a> 值是
    'static'，其指定的 <a href="visuren.html#propdef-float" class="noxref"><span class="propinst-float">'float'</span></a> 是
    'none'，并且其指定的 <a href="visuren.html#propdef-clear" class="noxref"><span class="propinst-clear">'clear'</span></a> 是
    'none'。 (请注意，由于<a href="visuren.html#dis-pos-flo">第9.7节</a>中的规则，这可能还需要假设一个不同的 'display' 计算值。) 如果假设框位于包含块上方，则该值为负。
  </p>

  <p>但用户代理可以自由地猜测其可能的位置，而不是实际计算该假设框的尺寸。</p>

  <p>为了计算静态位置，固定定位元素的包含块是初始包含块，而不是视口。</p>

  <p>对于绝对定位的元素，垂直尺寸的使用值必须满足以下约束：</p>

  <blockquote>
    <p>'top' + 'margin-top' + 'border-top-width' + 'padding-top' + 'height' + 'padding-bottom' + 'border-bottom-width' +
      'margin-bottom' + 'bottom' = 包含块的高度</p>
  </blockquote>

  <p>如果 'top'、'height' 和 'bottom' 都是 auto，请将 'top' 设置为静态位置并应用以下第三条规则。</p>

  <p>如果三者都不是 'auto'：如果 'margin-top' 和 'margin-bottom' 都是 'auto'，则在附加约束下求解方程，使两个边距的值相等。如果 'margin-top' 或 'margin-bottom'
    之一为 'auto'，则求解该值。如果值超出约束范围，请忽略 'bottom' 的值并求解该值。</p>

  <p>否则，选择以下适用的六条规则之一。</p>

  <ol>
    <li>'top' 和 'height' 为 'auto'，'bottom' 不是 'auto'，则高度 <a href="#root-height">根据内容基于 10.6.7</a>，将 'margin-top' 和
      'margin-bottom' 的 'auto' 值设为 0，并求解 'top'</li>

    <li>'top' 和 'bottom' 为 'auto'，'height' 不是 'auto'，则将 'top' 设置为静态位置，将 'margin-top' 和 'margin-bottom' 的 'auto' 值设为
      0，并求解 'bottom'</li>

    <li>'height' 和 'bottom' 为 'auto'，'top' 不是 'auto'，则高度 <a href="#root-height">根据内容基于 10.6.7</a>，将 'margin-top' 和
      'margin-bottom' 的 'auto' 值设为 0，并求解 'bottom'</li>

    <li>'top' 为 'auto'，'height' 和 'bottom' 不是 'auto'，则将 'margin-top' 和 'margin-bottom' 的 'auto' 值设为 0，并求解 'top'</li>

    <li>'height' 为 'auto'，'top' 和 'bottom' 不是 'auto'，则将 'margin-top' 和 'margin-bottom' 的 'auto' 值设为 0，并求解 'height'</li>

    <li>'bottom' 为 'auto'，'top' 和 'height' 不是 'auto'，则将 'margin-top' 和 'margin-bottom' 的 'auto' 值设为 0，并求解 'bottom'</li>
  </ol>

  <h3>10.6.5 <a name="abs-replaced-height">绝对定位的替换元素</a></h3>

  <p>这种情况与前一种情况类似，不同之处在于该元素具有<a href="conform.html#intrinsic">固有</a>高度。替换顺序如下：</p>

  <ol>
    <li><a href="visudet.html#propdef-height" class="noxref"><span class="propinst-height">'height'</span></a> 的使用值按照<a
        href="#inline-replaced-height">内联替换元素</a>的规则确定。如果 'margin-top' 或 'margin-bottom' 指定为 'auto'，其使用值将按照以下规则确定。</li>

    <li>如果 <a href="visuren.html#propdef-top" class="noxref"><span class="propinst-top">'top'</span></a> 和 <a
        href="visuren.html#propdef-bottom" class="noxref"><span class="propinst-bottom">'bottom'</span></a> 都为
      'auto'，则用元素的<a href="#static-position">静态位置</a>替换 <a href="visuren.html#propdef-top" class="noxref"><span
          class="propinst-top">'top'</span></a>。</li>

    <li>如果 <a href="visuren.html#propdef-bottom" class="noxref"><span class="propinst-bottom">'bottom'</span></a> 为
      'auto'，则将 <a href="box.html#propdef-margin-top" class="noxref"><span
          class="propinst-margin-top">'margin-top'</span></a> 或 <a href="box.html#propdef-margin-bottom"
        class="noxref"><span class="propinst-margin-bottom">'margin-bottom'</span></a> 上的任何 'auto' 替换为 '0'。</li>

    <li>如果此时 <a href="box.html#propdef-margin-top" class="noxref"><span
          class="propinst-margin-top">'margin-top'</span></a> 和 <a href="box.html#propdef-margin-bottom"
        class="noxref"><span class="propinst-margin-bottom">'margin-bottom'</span></a> 都仍为
      'auto'，则在附加约束条件下求解方程，使两个边距的值相等。</li>

    <li>如果此时只剩下一个 'auto'，则为该值求解方程。</li>

    <li>如果此时值超出了约束范围，则忽略 <a href="visuren.html#propdef-bottom" class="noxref"><span
          class="propinst-bottom">'bottom'</span></a> 的值并求解该值。</li>
  </ol>





  <h3>10.6.6 <a name="block-root-margin">复杂情况</a></h3>

  <p>本节适用于：</p>

  <ul>
    <li>正常流中的块级非替换元素，当 'overflow' 的计算值不是 'visible'（除非 'overflow' 属性的值已经传播到视口）时。</li>
    <li>'内联块级'非替换元素。</li>
    <li>浮动的非替换元素。</li>
  </ul>

  <p>如果 <a href="box.html#propdef-margin-top" class="noxref"><span class="propinst-margin-top">'margin-top'</span></a> 或
    <a href="box.html#propdef-margin-bottom" class="noxref"><span
        class="propinst-margin-bottom">'margin-bottom'</span></a> 的值为 'auto'，则其使用值为 0。如果 <a
      href="visudet.html#propdef-height" class="noxref"><span class="propinst-height">'height'</span></a> 的值为 'auto'，则
    <a href="#root-height">高度取决于该元素的后代，参见 10.6.7</a>。

  <p>对于 '内联块级'元素，计算行框高度时使用外边距框。</p>

  <h3>10.6.7 <a name="root-height">块级格式化上下文根元素的 'Auto' 高度</a></h3>

  <p>在某些情况下（例如，参见上述的 <a href="#abs-non-replaced-height">10.6.4</a> 和 <a href="#block-root-margin">10.6.6</a>
    部分），建立块级格式化上下文的元素的高度按如下计算：</p>

  <p>如果它只有内联级子元素，高度为最顶行框的顶部与最底行框的底部之间的距离。</p>

  <p>如果它有块级子元素，高度为最顶块级子元素框的上外边距边缘与最底块级子元素框的下外边距边缘之间的距离。</p>

  <p>绝对定位的子元素被忽略，相对定位的框不考虑它们的偏移。注意，子元素框可以是<a href="visuren.html#anonymous-block-level">匿名块级框</a>。</p>

  <p>此外，如果该元素有任何浮动的后代，其下外边距边缘低于元素的下内容边缘，则高度增加以包括这些边缘。仅考虑参与此块级格式化上下文的浮动元素，例如，绝对定位的后代或其他浮动元素内的浮动元素不予考虑。</p>



  <h2>10.7 <a name="min-max-heights">最小高度和最大高度</a>：<a href="visudet.html#propdef-min-height" class="noxref"><span
        class="propinst-min-height">'min-height'</span></a> 和 <a href="visudet.html#propdef-max-height"
      class="noxref"><span class="propinst-max-height">'max-height'</span></a>
  </h2>

  <p>有时需要将元素的高度限制在某个范围内。以下两个属性提供了这种功能：</p>

  <table class="def propdef">
    <tbody>
      <tr>
        <th>Name:
        <td><a name="x13"><span class="index-def" title="'min-height'"><dfn
                id="propdef-min-height">min-height</dfn></span></a>
      <tr>
        <th>Value:
        <td><a href="syndata.html#value-def-length" class="noxref"><span
              class="value-inst-length">&lt;length&gt;</span></a> | <a href="syndata.html#value-def-percentage"
            class="noxref"><span class="value-inst-percentage">&lt;percentage&gt;</span></a> | <a
            href="cascade.html#value-def-inherit" class="noxref"><span class="value-inst-inherit">inherit</span></a>
      <tr>
        <th>Initial:
        <td>0
      <tr>
        <th>Applies to:
        <td>所有元素，但非替换的内联元素、表格列和列组除外
      <tr>
        <th>Inherited:
        <td>否
      <tr>
        <th>Percentages:
        <td>见说明
      <tr>
        <th>Media:
        <td><a href="media.html#visual-media-group" class="noxref">视觉</a>
      <tr>
        <th>Computed&nbsp;value:
        <td>指定的百分比或绝对长度
  </table>

  <table class="def propdef">
    <tbody>
      <tr>
        <th>Name:
        <td><a name="x14"><span class="index-def" title="'max-height'"><dfn
                id="propdef-max-height">max-height</dfn></span></a>
      <tr>
        <th>Value:
        <td><a href="syndata.html#value-def-length" class="noxref"><span
              class="value-inst-length">&lt;length&gt;</span></a> | <a href="syndata.html#value-def-percentage"
            class="noxref"><span class="value-inst-percentage">&lt;percentage&gt;</span></a> | none | <a
            href="cascade.html#value-def-inherit" class="noxref"><span class="value-inst-inherit">inherit</span></a>
      <tr>
        <th>Initial:
        <td>none
      <tr>
        <th>Applies to:
        <td>所有元素，但非替换的内联元素、表格列和列组除外
      <tr>
        <th>Inherited:
        <td>否
      <tr>
        <th>Percentages:
        <td>见说明
      <tr>
        <th>Media:
        <td><a href="media.html#visual-media-group" class="noxref">视觉</a>
      <tr>
        <th>Computed&nbsp;value:
        <td>指定的百分比或绝对长度或'none'
  </table>

  <p>这两个属性允许作者将框的高度限制在某个范围内。其值的含义如下：</p>

  <dl>
    <dt><span class="index-inst" title="&lt;length&gt;"><a name="x15" href="syndata.html#value-def-length"
          class="noxref"><span class="value-inst-length"><strong>&lt;length&gt;</strong></span></a></span></dt>
    <dd>指定固定的最小或最大计算高度。</dd>

    <dt><span class="index-inst" title="&lt;percentage&gt;"><a name="x16" href="syndata.html#value-def-percentage"
          class="noxref"><span class="value-inst-percentage"><strong>&lt;percentage&gt;</strong></span></a></span></dt>
    <dd>指定用于确定使用值的百分比。该百分比是相对于生成的框的<a
        href="visuren.html#containing-block">包含块</a>的高度计算的。如果包含块的高度未明确指定（即，它取决于内容高度），并且此元素未绝对定位，则百分比值被视为 '0'（对于<a
        href="visudet.html#propdef-min-height" class="noxref"><span
          class="propinst-min-height">'min-height'</span></a>）或 'none'（对于<a href="visudet.html#propdef-max-height"
        class="noxref"><span class="propinst-max-height">'max-height'</span></a>）。</dd>

    <dt><strong>none</strong></dt>
    <dd>（仅限于<a href="visudet.html#propdef-max-height" class="noxref"><span
          class="propinst-max-height">'max-height'</span></a>）对框的高度没有限制。</dd>
  </dl>

  <p><a href="visudet.html#propdef-min-height" class="noxref"><span class="propinst-min-height">'min-height'</span></a>
    和<a href="visudet.html#propdef-max-height" class="noxref"><span
        class="propinst-max-height">'max-height'</span></a>的负值是非法的。</p>

  <p>在 CSS&nbsp;2.2 中，'min-height' 和 'max-height' 对表格、内联表格、表格单元格、表格行和行组的影响是未定义的。</p>

  <p>以下算法描述了这两个属性如何影响<a href="cascade.html#computed-value">使用值</a>的计算<a href="visudet.html#propdef-height"
      class="noxref"><span class="propinst-height">'height'</span></a>属性：</p>

  <ol>
    <li>首先计算暂定的使用高度（不考虑<a href="visudet.html#propdef-min-height" class="noxref"><span
          class="propinst-min-height">'min-height'</span></a> 和 <a href="visudet.html#propdef-max-height"
        class="noxref"><span class="propinst-max-height">'max-height'</span></a>），按照上文<a
        href="#Computing_heights_and_margins">“计算高度和边距”</a>中的规则。</li>

    <li>如果此暂定高度大于 <a href="visudet.html#propdef-max-height" class="noxref"><span
          class="propinst-max-height">'max-height'</span></a>，则重新应用上文的规则，但这次使用 <a href="visudet.html#propdef-max-height"
        class="noxref"><span class="propinst-max-height">'max-height'</span></a> 的值作为 <a
        href="visudet.html#propdef-height" class="noxref"><span class="propinst-height">'height'</span></a> 的计算值。</li>

    <li>如果结果高度小于 <a href="visudet.html#propdef-min-height" class="noxref"><span
          class="propinst-min-height">'min-height'</span></a>，则再次应用上述规则，但这次使用 <a href="visudet.html#propdef-min-height"
        class="noxref"><span class="propinst-min-height">'min-height'</span></a> 的值作为 <a
        href="visudet.html#propdef-height" class="noxref"><span class="propinst-height">'height'</span></a> 的计算值。</li>
  </ol>

  <p class="note">这些步骤不会影响 <a href="visudet.html#propdef-height" class="noxref"><span
        class="propinst-height">'height'</span></a> 属性的实际计算值。因此，例如，它们不会影响依赖于计算值的边距折叠。</p>

  <p>但是，对于同时计算 <a href="visudet.html#propdef-width" class="noxref"><span class="propinst-width">'width'</span></a> 和 <a
      href="visudet.html#propdef-height" class="noxref"><span class="propinst-height">'height'</span></a> 为 'auto'
    的替换元素，请使用上述<a href="#min-max-widths">“最小和最大宽度”</a>中的算法来确定使用的宽度和高度。然后应用上文<a
      href="#Computing_heights_and_margins">“计算高度和边距”</a>中的规则，使用结果的宽度和高度作为计算值。</p>


  <h2>10.8 <a name="line-height">行高计算</a>：<a href="visudet.html#propdef-line-height" class="noxref"><span
        class="propinst-line-height">'line-height'</span></a> 和 <a href="visudet.html#propdef-vertical-align"
      class="noxref"><span class="propinst-vertical-align">'vertical-align'</span></a> 属性</h2>

  <p>如<a href="visuren.html#inline-formatting">内联格式化上下文</a>一节中所述，用户代理将内联级别的框流入垂直堆叠的<a
      href="visuren.html#line-box">行框</a>中。行框的高度确定如下：</p>

  <ol>
    <li>计算行框中每个内联级别框的高度。

      对于替换元素、内联块级元素和内联表格元素，这是它们的外边距框的高度；对于内联框，这是它们的 'line-height'。

      （参见<a href="#Computing_heights_and_margins">“计算高度和边距”</a>和<a href="#leading">“行间距与半行间距”</a>中的<a
        href="#inline-box-height">内联框高度</a>。）
    </li>

    <li>根据它们的<a href="visudet.html#propdef-vertical-align" class="noxref"><span
          class="propinst-vertical-align">'vertical-align'</span></a>属性垂直对齐内联级别框。

      如果它们对齐为 'top' 或 'bottom'，则必须对齐以最小化行框高度。如果这些框足够高，则可能存在多种解决方案，而 CSS&nbsp;2.2 并未定义行框基线的位置（即<a
        href="#strut">支柱</a>的位置，见下文）。
    </li>

    <li>行框的高度是从最上面的框顶到最下面的框底的距离。（这包括<a href="#strut">支柱</a>，如<a href="visudet.html#propdef-line-height"
        class="noxref"><span class="propinst-line-height">'line-height'</span></a>一节中所述。）
    </li>
  </ol>

  <p>空的内联元素生成空的内联框，但这些框仍然有外边距、内边距、边框和行高，因此像有内容的元素一样影响这些计算。</p>

  <h3>10.8.1 <a name="leading">行间距与半行间距</a></h3>

  <p>CSS 假定每个字体都有字体度量，它们指定了基线之上的特征高度和基线下的深度。在本节中，我们使用 <var>A</var> 表示该高度（对于给定字体在给定大小下）和 <var>D</var> 表示深度。我们还定义
    <var>AD</var> = <var>A</var> + <var>D</var>，即从顶部到底部的距离。（有关如何找到 <var>A</var> 和 <var>D</var> 的说明，请参阅下面的 <a
      href="#sTypoAscender">注释</a>）。请注意，这些是整个字体的度量，不一定对应于任何单个字形的上升部和下降部。</p>

  <p>用户代理必须将非替换内联框中的字形按照它们的相关基线对齐。然后，对于每个字形，确定 <var>A</var> 和 <var>D</var>。请注意，单个元素中的字形可能来自不同的字体，因此它们不一定都具有相同的
    <var>A</var> 和 <var>D</var>。如果内联框根本不包含字形，则认为它包含一个<a href="#strut">支柱</a>（一个零宽度的不可见字形），其 <var>A</var> 和 <var>D</var>
    取自元素的第一个可用字体。</p>

  <p>仍然针对每个字形，确定要添加的行间距 <var>L</var>，其中 <var>L</var> = <a href="visudet.html#propdef-line-height" class="noxref"><span
        class="propinst-line-height">'line-height'</span></a> - <var>AD</var>。将一半的行间距添加到 <var>A</var> 之上，另一半添加到
    <var>D</var> 之下，从而使字形及其行间距的总高度为 <var>A'</var> = <var>A</var> + <var>L</var>/2，总深度为 <var>D'</var> = <var>D</var> +
    <var>L</var>/2。</p>

  <p class=note><strong>注意：</strong> <var>L</var> 可能为负值。</p>

  <p id="inline-box-height">内联框的高度包含所有字形及其每侧的半行间距，因此恰好为 'line-height'。子元素的框不会影响此高度。</p>

  <p>尽管非替换元素的边距、边框和内边距不会影响行框计算，但它们仍会围绕内联框进行渲染。这意味着如果 <a href="visudet.html#propdef-line-height" class="noxref"><span
        class="propinst-line-height">'line-height'</span></a>
    指定的高度小于所包含框的内容高度，则内边距和边框的背景和颜色可能会“溢出”到相邻的行框中。用户代理应按照文档顺序渲染框。这将导致后续行上的边框覆盖之前行的边框和文本。</p>

  <p class=note><em><strong>注意：</strong> CSS&nbsp;2.2 并未定义内联框的内容区域是什么（参见上面的 <a
        href="#inline-non-replaced">10.6.1</a>），因此不同的用户代理可能会在不同位置绘制背景和边框。</em></p>

  <p id=sTypoAscender class=note><em><strong>注意：</strong> 建议使用 OpenType 或 TrueType 字体的实现使用字体 OS/2 表中的 "sTypoAscender" 和
      "sTypoDescender" 度量作为 A 和 D（缩放到当前元素的字体大小后）。如果没有这些度量，应使用 HHEA 表中的 "Ascent" 和 "Descent" 度量。</em></p>

  <table class="def propdef">
    <tbody>
      <tr>
        <th>名称：
        <td><a name="x17"><span class="index-def" title="'line-height'"><dfn
                id="propdef-line-height">line-height</dfn></span></a>
      <tr>
        <th>值：
        <td>normal | <a href="syndata.html#value-def-number" class="noxref"><span
              class="value-inst-number">&lt;number&gt;</span></a> | <a href="syndata.html#value-def-length"
            class="noxref"><span class="value-inst-length">&lt;length&gt;</span></a> | <a
            href="syndata.html#value-def-percentage" class="noxref"><span
              class="value-inst-percentage">&lt;percentage&gt;</span></a> | <a href="cascade.html#value-def-inherit"
            class="noxref"><span class="value-inst-inherit">inherit</span></a>
      <tr>
        <th>初始值：
        <td>normal
      <tr>
        <th>适用于：
        <td>所有元素
      <tr>
        <th>继承：
        <td>是
      <tr>
        <th>百分比：
        <td>相对于元素本身的字体大小
      <tr>
        <th>媒体：
        <td><a href="media.html#visual-media-group" class="noxref">视觉</a>
      <tr>
        <th>计算值：
        <td>对于 <a href="syndata.html#value-def-length" class="noxref"><span
              class="value-inst-length">&lt;length&gt;</span></a> 和 <a href="syndata.html#value-def-percentage"
            class="noxref"><span class="value-inst-percentage">&lt;percentage&gt;</span></a> 为绝对值；否则按指定计算
  </table>

  <p>在内容由<a href="visuren.html#inline-level">内联级</a>元素组成的<a href="visuren.html#block-boxes">块容器元素</a>上，'line-height'
    指定了元素中行框的 <em>最小</em> 高度。最小高度由基线上方的最小高度和基线下方的最小深度组成，完全如同每个行框都从一个带有元素字体和行高属性的<a
      name="strut">零宽度内联框</a>开始。我们将这个假想的框称为“支柱”。（该名称受到 TeX 的启发）。</p>

  <p>假定字体的高度和基线之下的深度是字体中包含的度量。（更多细节，请参见 CSS level&nbsp;3）。</p>

  <p>在非替换<a href="visuren.html#inline-boxes">内联</a>元素上，'line-height' 指定了用于计算行框高度的高度。</p>
  <p>该属性的值有以下含义：</p>

  <dl>
    <dt><strong>normal</strong></dt>
    <dd>告诉用户代理将使用值设置为基于元素字体的“合理”值。该值的含义与<span class="index-inst" title="&lt;number&gt;"><a name="x18"
          href="syndata.html#value-def-number" class="noxref"><span
            class="value-inst-number">&lt;number&gt;</span></a></span>相同。我们建议 'normal' 的使用值在 1.0 到 1.2 之间。<a
        href="cascade.html#computed-value">计算值</a>为 'normal'。</dd>

    <dt><span class="index-inst" title="&lt;length&gt;"><a name="x19" href="syndata.html#value-def-length"
          class="noxref"><span class="value-inst-length"><strong>&lt;length&gt;</strong></span></a></span></dt>
    <dd>指定的长度用于计算行框的高度。负值是非法的。</dd>

    <dt><span class="index-inst" title="&lt;number&gt;"><a name="x20" href="syndata.html#value-def-number"
          class="noxref"><span class="value-inst-number"><strong>&lt;number&gt;</strong></span></a></span></dt>
    <dd>该属性的使用值是该数值乘以元素的字体大小。负值是非法的。<a href="cascade.html#computed-value">计算值</a>与指定值相同。</dd>

    <dt><span class="index-inst" title="&lt;percentage&gt;"><a name="x21" href="syndata.html#value-def-percentage"
          class="noxref"><span class="value-inst-percentage"><strong>&lt;percentage&gt;</strong></span></a></span></dt>
    <dd>该属性的<a href="cascade.html#computed-value">计算值</a>是该百分比乘以元素的计算字体大小。负值是非法的。</dd>
  </dl>

  <div class="example">
    <P style="display

:none">示例：</P>
    <p>下面示例中的三个规则具有相同的最终行高：</p>

    <pre>
div { line-height: 1.2; font-size: 10pt }     /* 数字 */
div { line-height: 1.2em; font-size: 10pt }   /* 长度 */
div { line-height: 120%; font-size: 10pt }    /* 百分比 */
</pre>
  </div>

  <p>当元素包含以多个字体呈现的文本时，用户代理可以根据最大字体大小确定 'normal' <a href="visudet.html#propdef-line-height" class="noxref"><span
        class="propinst-line-height">'line-height'</span></a> 值。</p>
  <p class=note><em><strong>注意：</strong> 当所有内联框在块容器框中都只有一个 <a href="visudet.html#propdef-line-height"
        class="noxref"><span class="propinst-line-height">'line-height'</span></a>
      值，并且它们都使用相同的字体（且没有替换元素、内联块级元素等），上述规则将确保连续行的基线之间的距离正好是 <a href="visudet.html#propdef-line-height"
        class="noxref"><span class="propinst-line-height">'line-height'</span></a>。当需要对齐不同字体的文本列时，例如在表格中，这一点非常重要。</em>
  </p>

  <table class="def propdef">
    <tbody>
      <tr>
        <th>名称：
        <td><a name="x22"><span class="index-def" title="'vertical-align'"><dfn
                id="propdef-vertical-align">vertical-align</dfn></span></a>
      <tr>
        <th>值：
        <td>baseline | sub | super | top | text-top | middle | bottom | text-bottom | <a
            href="syndata.html#value-def-percentage" class="noxref"><span
              class="value-inst-percentage">&lt;percentage&gt;</span></a> | <a href="syndata.html#value-def-length"
            class="noxref"><span class="value-inst-length">&lt;length&gt;</span></a> | <a
            href="cascade.html#value-def-inherit" class="noxref"><span class="value-inst-inherit">inherit</span></a>
      <tr>
        <th>初始值：
        <td>baseline
      <tr>
        <th>适用于：
        <td>内联级元素和 'table-cell' 元素
      <tr>
        <th>继承：
        <td>否
      <tr>
        <th>百分比：
        <td>相对于元素本身的 'line-height'
      <tr>
        <th>媒体：
        <td><a href="media.html#visual-media-group" class="noxref">视觉</a>
      <tr>
        <th>计算值：
        <td>对于 <a href="syndata.html#value-def-percentage" class="noxref"><span
              class="value-inst-percentage">&lt;percentage&gt;</span></a> 和 <a href="syndata.html#value-def-length"
            class="noxref"><span class="value-inst-length">&lt;length&gt;</span></a> 为绝对值，否则按指定计算
  </table>

  <p>此属性影响内联级元素生成的框在行框内的垂直定位。</p>

  <div class="note">
    <p>
      <em><strong>注意：</strong> 此属性的值在表格的上下文中有不同的含义。有关详细信息，请查阅<a href="tables.html#height-layout">表格高度算法</a>部分。</em>
    </p>
  </div>

  <p>以下值仅在与父内联元素或父块容器元素的<a href="#strut">支柱</a>有关时才有意义。</p>

  <p>在以下定义中，对于非替换内联元素，用于对齐的框是高度为 'line-height' 的框（包含框的字形及其每侧的半行距，参见<a
      href="#inline-box-height">上文</a>）。对于所有其他元素，用于对齐的框是外边距框。</p>

  <dl>
    <dt><strong>baseline</strong></dt>
    <dd>将框的基线与父框的基线对齐。如果框没有基线，则将底部外边距边缘与父框的基线对齐。</dd>

    <dt><strong>middle</strong></dt>
    <dd>将框的垂直中点与父框基线加上父框一半 x-height 的高度对齐。</dd>

    <dt><strong>sub</strong></dt>
    <dd>将框的基线降低到父框的下标位置。（此值不影响元素文本的字体大小。）</dd>

    <dt><strong>super</strong></dt>
    <dd>将框的基线提高到父框的上标位置。（此值不影响元素文本的字体大小。）</dd>

    <dt><strong>text-top</strong></dt>
    <dd>将框的顶部与父框的内容区域顶部对齐（参见<a href="#inline-non-replaced">10.6.1</a>）。</dd>

    <dt><strong>text-bottom</strong></dt>
    <dd>将框的底部与父框的内容区域底部对齐（参见<a href="#inline-non-replaced">10.6.1</a>）。</dd>

    <dt><span class="index-inst" title="&lt;percentage&gt;"><a name="x23" href="syndata.html#value-def-percentage"
          class="noxref"><span class="value-inst-percentage"><strong>&lt;percentage&gt;</strong></span></a></span></dt>
    <dd>根据此距离（为<a href="visudet.html#propdef-line-height" class="noxref"><span
          class="propinst-line-height">'line-height'</span></a>值的百分比）上升（正值）或下降（负值）框。值 '0%' 意味着与 'baseline' 相同。</dd>

    <dt><span class="index-inst" title="&lt;length&gt;"><a name="x24" href="syndata.html#value-def-length"
          class="noxref"><span class="value-inst-length"><strong>&lt;length&gt;</strong></span></a></span></dt>
    <dd>根据此距离上升（正值）或下降（负值）框。值 '0cm' 意味着与 'baseline' 相同。</dd>
  </dl>

  <p>以下值相对于行框对齐元素。由于该元素可能有相对于它对齐的子元素（它们可能有相对于它们对齐的后代），这些值使用对齐子树的边界。内联元素的<dfn>对齐子树</dfn>包含该元素和所有子内联元素的对齐子树，这些子元素的计算
    'vertical-align' 值不是 'top' 或 'bottom'。对齐子树的顶部是子树中框的最高点，底部也是类似的。</p>

  <dl>
    <dt><strong>top</strong></dt>
    <dd>将对齐子树的顶部与行框的顶部对齐。</dd>

    <dt><strong>bottom</strong></dt>
    <dd>将对齐子树的底部与行框的底部对齐。</dd>
  </dl>

  <p>'inline-table' 的基线是表格第一行的基线。</p>
  <p>'inline-block' 的基线是其正常流中最后一个行框的基线，除非它没有流内行框或其 'overflow' 属性的计算值不是 'visible'，在这种情况下，基线是底部外边距边缘。</p>

  <hr class="navbar">

  <div class="navbar">
    <p><a href="visuren.html">上一页</a> &nbsp;
      <a href="visufx.html">下一页</a> &nbsp;
      <a href="index.html#minitoc">目录</a> &nbsp;
      <a href="propidx.html">属性</a> &nbsp;
      <a href="indexlist.html">索引</a> &nbsp;
  </div>
  <script type="text/javascript" src="https://www.w3.org/scripts/TR/2016/fixup.js"></script>
</body>

</html>