<!doctype html>
<html lang="en">

<head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
    <title>CSS View Transitions Module Level 2</title>
    <meta content="WD" name="w3c-status">
    <meta content="Bikeshed version 859efb4bd, updated Fri Jan 27 16:04:01 2023 -0800" name="generator">
    <link href="https://www.w3.org/TR/css-view-transitions-2/" rel="canonical">
    <meta content="59a37d9104bb346aec2ffaa900536d1a2a6666bd" name="document-revision">
    <style>
        spec-scaler {
            display: block;
        }

        spec-scaler:not(:defined)>* {
            display: none;
        }

        .spec-slides {
            width: 100%;
            height: 100%;
            border: none;
            display: block;
        }

        .spec-slide-controls {
            text-align: center;
        }

        .main-example-video {
            display: block;
            width: 100%;
            max-width: 702px;
            height: auto;
            margin: 0 auto;
        }

        /* Put nice boxes around each algorithm. */
        [data-algorithm]:not(.heading) {
            padding: .5em;
            border: thin solid #ddd;
            border-radius: .5em;
            margin: .5em calc(-0.5em - 1px);
        }

        [data-algorithm]:not(.heading)> :first-child {
            margin-top: 0;
        }

        [data-algorithm]:not(.heading)> :last-child {
            margin-bottom: 0;
        }

        [data-algorithm] [data-algorithm] {
            margin: 1em 0;
        }

        pre {
            tab-size: 2;
        }
    </style>
    <style>
        /* style-autolinks */

        .css.css,
        .property.property,
        .descriptor.descriptor {
            color: var(--a-normal-text);
            font-size: inherit;
            font-family: inherit;
        }

        .css::before,
        .property::before,
        .descriptor::before {
            content: "‘";
        }

        .css::after,
        .property::after,
        .descriptor::after {
            content: "’";
        }

        .property,
        .descriptor {
            /* Don't wrap property and descriptor names */
            white-space: nowrap;
        }

        .type {
            /* CSS value <type> */
            font-style: italic;
        }

        pre .property::before,
        pre .property::after {
            content: "";
        }

        [data-link-type="property"]::before,
        [data-link-type="propdesc"]::before,
        [data-link-type="descriptor"]::before,
        [data-link-type="value"]::before,
        [data-link-type="function"]::before,
        [data-link-type="at-rule"]::before,
        [data-link-type="selector"]::before,
        [data-link-type="maybe"]::before {
            content: "‘";
        }

        [data-link-type="property"]::after,
        [data-link-type="propdesc"]::after,
        [data-link-type="descriptor"]::after,
        [data-link-type="value"]::after,
        [data-link-type="function"]::after,
        [data-link-type="at-rule"]::after,
        [data-link-type="selector"]::after,
        [data-link-type="maybe"]::after {
            content: "’";
        }

        [data-link-type].production::before,
        [data-link-type].production::after,
        .prod [data-link-type]::before,
        .prod [data-link-type]::after {
            content: "";
        }

        [data-link-type=element],
        [data-link-type=element-attr] {
            font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
            font-size: .9em;
        }

        [data-link-type=element]::before {
            content: "<"
        }

        [data-link-type=element]::after {
            content: ">"
        }

        [data-link-type=biblio] {
            white-space: pre;
        }
    </style>
    <style>
        /* style-counters */

        body {
            counter-reset: example figure issue;
        }

        .issue {
            counter-increment: issue;
        }

        .issue:not(.no-marker)::before {
            content: "Issue " counter(issue);
        }

        .example {
            counter-increment: example;
        }

        .example:not(.no-marker)::before {
            content: "Example " counter(example);
        }

        .invalid.example:not(.no-marker)::before,
        .illegal.example:not(.no-marker)::before {
            content: "Invalid Example" counter(example);
        }

        figcaption {
            counter-increment: figure;
        }

        figcaption:not(.no-marker)::before {
            content: "Figure " counter(figure) " ";
        }
    </style>
    <style>
        /* style-dfn-panel */

        :root {
            --dfnpanel-bg: #ddd;
            --dfnpanel-text: var(--text);
        }

        .dfn-panel {
            position: absolute;
            z-index: 35;
            height: auto;
            width: -webkit-fit-content;
            width: fit-content;
            max-width: 300px;
            max-height: 500px;
            overflow: auto;
            padding: 0.5em 0.75em;
            font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
            background: var(--dfnpanel-bg);
            color: var(--dfnpanel-text);
            border: outset 0.2em;
        }

        .dfn-panel:not(.on) {
            display: none;
        }

        .dfn-panel * {
            margin: 0;
            padding: 0;
            text-indent: 0;
        }

        .dfn-panel>b {
            display: block;
        }

        .dfn-panel a {
            color: var(--dfnpanel-text);
        }

        .dfn-panel a:not(:hover) {
            text-decoration: none !important;
            border-bottom: none !important;
        }

        .dfn-panel>b+b {
            margin-top: 0.25em;
        }

        .dfn-panel ul {
            padding: 0;
        }

        .dfn-panel li {
            list-style: inside;
        }

        .dfn-panel.activated {
            display: inline-block;
            position: fixed;
            left: .5em;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - 1.5em - .4em - .5em);
            max-height: 30vh;
        }

        .dfn-paneled {
            cursor: pointer;
        }
    </style>
    <style>
        /* style-issues */

        a[href].issue-return {
            float: right;
            float: inline-end;
            color: var(--issueheading-text);
            font-weight: bold;
            text-decoration: none;
        }
    </style>
    <style>
        /* style-md-lists */

        /* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
        [data-md]> :first-child {
            margin-top: 0;
        }

        [data-md]> :last-child {
            margin-bottom: 0;
        }
    </style>
    <style>
        /* style-selflinks */

        :root {
            --selflink-text: white;
            --selflink-bg: gray;
            --selflink-hover-text: black;
        }

        .heading,
        .issue,
        .note,
        .example,
        li,
        dt {
            position: relative;
        }

        a.self-link {
            position: absolute;
            top: 0;
            left: calc(-1 * (3.5rem - 26px));
            width: calc(3.5rem - 26px);
            height: 2em;
            text-align: center;
            border: none;
            transition: opacity .2s;
            opacity: .5;
        }

        a.self-link:hover {
            opacity: 1;
        }

        .heading>a.self-link {
            font-size: 83%;
        }

        .example>a.self-link,
        .note>a.self-link,
        .issue>a.self-link {
            /* These blocks are overflow:auto, so positioning outside
       doesn't work. */
            left: auto;
            right: 0;
        }

        li>a.self-link {
            left: calc(-1 * (3.5rem - 26px) - 2em);
        }

        dfn>a.self-link {
            top: auto;
            left: auto;
            opacity: 0;
            width: 1.5em;
            height: 1.5em;
            background: var(--selflink-bg);
            color: var(--selflink-text);
            font-style: normal;
            transition: opacity .2s, background-color .2s, color .2s;
        }

        dfn:hover>a.self-link {
            opacity: 1;
        }

        dfn>a.self-link:hover {
            color: var(--selflink-hover-text);
        }

        a.self-link::before {
            content: "¶";
        }

        .heading>a.self-link::before {
            content: "§";
        }

        dfn>a.self-link::before {
            content: "#";
        }
    </style>
    <style>
        /* style-syntax-highlighting */

        pre.idl.highlight {
            background: var(--borderedblock-bg, var(--def-bg));
        }

        code.highlight {
            padding: .1em;
            border-radius: .3em;
        }

        pre.highlight,
        pre>code.highlight {
            display: block;
            padding: 1em;
            margin: .5em 0;
            overflow: auto;
            border-radius: 0;
        }

        .highlight:not(.idl) {
            background: rgba(0, 0, 0, .03);
        }

        c-[a] {
            color: #990055
        }

        /* Keyword.Declaration */
        c-[b] {
            color: #990055
        }

        /* Keyword.Type */
        c-[c] {
            color: #708090
        }

        /* Comment */
        c-[d] {
            color: #708090
        }

        /* Comment.Multiline */
        c-[e] {
            color: #0077aa
        }

        /* Name.Attribute */
        c-[f] {
            color: #669900
        }

        /* Name.Tag */
        c-[g] {
            color: #222222
        }

        /* Name.Variable */
        c-[k] {
            color: #990055
        }

        /* Keyword */
        c-[l] {
            color: #000000
        }

        /* Literal */
        c-[m] {
            color: #000000
        }

        /* Literal.Number */
        c-[n] {
            color: #0077aa
        }

        /* Name */
        c-[o] {
            color: #999999
        }

        /* Operator */
        c-[p] {
            color: #999999
        }

        /* Punctuation */
        c-[s] {
            color: #a67f59
        }

        /* Literal.String */
        c-[t] {
            color: #a67f59
        }

        /* Literal.String.Single */
        c-[u] {
            color: #a67f59
        }

        /* Literal.String.Double */
        c-[cp] {
            color: #708090
        }

        /* Comment.Preproc */
        c-[c1] {
            color: #708090
        }

        /* Comment.Single */
        c-[cs] {
            color: #708090
        }

        /* Comment.Special */
        c-[kc] {
            color: #990055
        }

        /* Keyword.Constant */
        c-[kn] {
            color: #990055
        }

        /* Keyword.Namespace */
        c-[kp] {
            color: #990055
        }

        /* Keyword.Pseudo */
        c-[kr] {
            color: #990055
        }

        /* Keyword.Reserved */
        c-[ld] {
            color: #000000
        }

        /* Literal.Date */
        c-[nc] {
            color: #0077aa
        }

        /* Name.Class */
        c-[no] {
            color: #0077aa
        }

        /* Name.Constant */
        c-[nd] {
            color: #0077aa
        }

        /* Name.Decorator */
        c-[ni] {
            color: #0077aa
        }

        /* Name.Entity */
        c-[ne] {
            color: #0077aa
        }

        /* Name.Exception */
        c-[nf] {
            color: #0077aa
        }

        /* Name.Function */
        c-[nl] {
            color: #0077aa
        }

        /* Name.Label */
        c-[nn] {
            color: #0077aa
        }

        /* Name.Namespace */
        c-[py] {
            color: #0077aa
        }

        /* Name.Property */
        c-[ow] {
            color: #999999
        }

        /* Operator.Word */
        c-[mb] {
            color: #000000
        }

        /* Literal.Number.Bin */
        c-[mf] {
            color: #000000
        }

        /* Literal.Number.Float */
        c-[mh] {
            color: #000000
        }

        /* Literal.Number.Hex */
        c-[mi] {
            color: #000000
        }

        /* Literal.Number.Integer */
        c-[mo] {
            color: #000000
        }

        /* Literal.Number.Oct */
        c-[sb] {
            color: #a67f59
        }

        /* Literal.String.Backtick */
        c-[sc] {
            color: #a67f59
        }

        /* Literal.String.Char */
        c-[sd] {
            color: #a67f59
        }

        /* Literal.String.Doc */
        c-[se] {
            color: #a67f59
        }

        /* Literal.String.Escape */
        c-[sh] {
            color: #a67f59
        }

        /* Literal.String.Heredoc */
        c-[si] {
            color: #a67f59
        }

        /* Literal.String.Interpol */
        c-[sx] {
            color: #a67f59
        }

        /* Literal.String.Other */
        c-[sr] {
            color: #a67f59
        }

        /* Literal.String.Regex */
        c-[ss] {
            color: #a67f59
        }

        /* Literal.String.Symbol */
        c-[vc] {
            color: #0077aa
        }

        /* Name.Variable.Class */
        c-[vg] {
            color: #0077aa
        }

        /* Name.Variable.Global */
        c-[vi] {
            color: #0077aa
        }

        /* Name.Variable.Instance */
        c-[il] {
            color: #000000
        }

        /* Literal.Number.Integer.Long */
    </style>
    <style>
        /* style-var-click-highlighting */

        var {
            cursor: pointer;
        }

        var.selected0 {
            background-color: #F4D200;
            box-shadow: 0 0 0 2px #F4D200;
        }

        var.selected1 {
            background-color: #FF87A2;
            box-shadow: 0 0 0 2px #FF87A2;
        }

        var.selected2 {
            background-color: #96E885;
            box-shadow: 0 0 0 2px #96E885;
        }

        var.selected3 {
            background-color: #3EEED2;
            box-shadow: 0 0 0 2px #3EEED2;
        }

        var.selected4 {
            background-color: #EACFB6;
            box-shadow: 0 0 0 2px #EACFB6;
        }

        var.selected5 {
            background-color: #82DDFF;
            box-shadow: 0 0 0 2px #82DDFF;
        }

        var.selected6 {
            background-color: #FFBCF2;
            box-shadow: 0 0 0 2px #FFBCF2;
        }
    </style>
    <link href="https://www.w3.org/StyleSheets/TR/2021/W3C-WD" rel="stylesheet">

<body class="h-entry">
    <div class="head">
        <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48"
                    src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72"> </a> </p>
        <h1 class="p-name no-ref" id="title">CSS View Transitions Module Level 2</h1>
        <p id="w3c-state"><a href="https://www.w3.org/standards/types#WD">W3C Working Draft</a>, <time
                class="dt-updated" datetime="2024-11-13">13 November 2024</time></p>
        <details open>
            <summary>More details about this document</summary>
            <div data-fill-with="spec-metadata">
                <dl>
                    <dt>This version:
                    <dd><a class="u-url"
                            href="https://www.w3.org/TR/2024/WD-css-view-transitions-2-20241113/">https://www.w3.org/TR/2024/WD-css-view-transitions-2-20241113/</a>
                    <dt>Latest published version:
                    <dd><a
                            href="https://www.w3.org/TR/css-view-transitions-2/">https://www.w3.org/TR/css-view-transitions-2/</a>
                    <dt>Editor's Draft:
                    <dd><a
                            href="https://drafts.csswg.org/css-view-transitions-2/">https://drafts.csswg.org/css-view-transitions-2/</a>
                    <dt>History:
                    <dd><a class="u-url"
                            href="https://www.w3.org/standards/history/css-view-transitions-2">https://www.w3.org/standards/history/css-view-transitions-2</a>
                    <dt>Feedback:
                    <dd><a href="https://github.com/w3c/csswg-drafts/labels/css-view-transitions-2">CSSWG Issues
                            Repository</a>
                    <dd><a href="#issues-index">Inline In Spec</a>
                    <dt class="editor">Editors:
                    <dd class="editor p-author h-card vcard" data-editor-id="121539"><span class="p-name fn">Noam
                            Rosenthal</span> (<span class="p-org org">Google</span>)
                    <dd class="editor p-author h-card vcard" data-editor-id="122787"><span class="p-name fn">Khushal
                            Sagar</span> (<span class="p-org org">Google</span>)
                    <dd class="editor p-author h-card vcard" data-editor-id="75295"><span class="p-name fn">Vladimir
                            Levin</span> (<span class="p-org org">Google</span>)
                    <dd class="editor p-author h-card vcard" data-editor-id="42199"><a class="p-name fn u-url url"
                            href="http://xanthir.com/contact/">Tab Atkins-Bittner</a> (<span
                            class="p-org org">Google</span>)
                    <dt>Suggest an Edit for this Spec:
                    <dd><a href="https://github.com/w3c/csswg-drafts/blob/main/css-view-transitions-2/Overview.bs">GitHub
                            Editor</a>
                </dl>
            </div>
        </details>
        <div data-fill-with="warning"></div>
        <p class="copyright" data-fill-with="copyright"><a href="https://www.w3.org/policies/#copyright">Copyright</a> ©
            2024 <a href="https://www.w3.org/">World Wide Web Consortium</a>. <abbr
                title="World Wide Web Consortium">W3C</abbr><sup>®</sup> <a
                href="https://www.w3.org/policies/#Legal_Disclaimer">liability</a>, <a
                href="https://www.w3.org/policies/#W3C_Trademarks">trademark</a> and <a
                href="https://www.w3.org/copyright/software-license/" rel="license"
                title="W3C Software and Document License">permissive document license</a> rules apply. </p>
        <hr title="Separator for header">
    </div>
    <div class="p-summary" data-fill-with="abstract">
        <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
        <p>This module defines how the View Transition API works with cross-document navigations.</p>
        <a href="https://www.w3.org/TR/CSS/">CSS</a> is a language for describing the rendering of structured documents
        (such as HTML and XML)
        on screen, on paper, etc.
    </div>
    <h2 class="no-num no-toc no-ref heading settled" id="sotd"><span class="content">Status of this document</span></h2>
    <div data-fill-with="status">
        <p><em>This section describes the status of this document at the time of its publication.
                A list of current W3C publications
                and the latest revision of this technical report
                can be found in the <a href="https://www.w3.org/TR/">W3C technical reports index at
                    https://www.w3.org/TR/.</a></em> </p>
        <p> This document was published
            by the <a href="https://www.w3.org/groups/wg/css">CSS Working Group</a> as a <strong>Working Draft</strong>
            using the <a href="https://www.w3.org/policies/process/20231103/#recs-and-notes">Recommendation
                track</a>.
            Publication as a Working Draft
            does not imply endorsement by <abbr title="World Wide Web Consortium">W3C</abbr> and its Members. </p>
        <p> This is a draft document
            and may be updated, replaced
            or obsoleted by other documents at any time.
            It is inappropriate to cite this document as other than work in progress. </p>
        <p>Please send feedback
            by <a href="https://github.com/w3c/csswg-drafts/issues">filing issues in GitHub</a> (preferred),
            including the spec code “css-view-transitions” in the title, like this:
            “[css-view-transitions] <i>…summary of comment…</i>”.
            All issues and comments are <a href="https://lists.w3.org/Archives/Public/public-css-archive/">archived</a>.
            Alternately, feedback can be sent to the (<a
                href="https://lists.w3.org/Archives/Public/www-style/">archived</a>) public mailing list <a
                href="mailto:www-style@w3.org?Subject=%5Bcss-view-transitions%5D%20PUT%20SUBJECT%20HERE">www-style@w3.org</a>.
        </p>
        <p>This document is governed by the <a href="https://www.w3.org/policies/process/20231103/"
                id="w3c_process_revision">03 November 2023 W3C Process Document</a>. </p>
        <p>This document was produced by a group operating under the <a
                href="https://www.w3.org/policies/patent-policy/20200915/">W3C Patent Policy</a>.
            W3C maintains a <a href="https://www.w3.org/groups/wg/css/ipr" rel="disclosure">public list of any patent
                disclosures</a> made in connection with the deliverables of the group;
            that page also includes instructions for disclosing a patent.
            An individual who has actual knowledge of a patent which the individual believes
            contains <a href="https://www.w3.org/policies/patent-policy/20200915/#def-essential">Essential Claim(s)</a>
            must disclose the information in accordance with <a
                href="https://www.w3.org/policies/patent-policy/20200915/#sec-Disclosure">section 6 of the W3C Patent
                Policy</a>. </p>
        <p></p>
    </div>
    <div data-fill-with="at-risk"></div>
    <nav data-fill-with="table-of-contents" id="toc">
        <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
        <ol class="toc" role="directory">
            <li><a href="#intro"><span class="secno">1</span> <span class="content">Introduction</span></a>
            <li>
                <a href="#cross-document-view-transitions"><span class="secno">2</span> <span
                        class="content">Cross-document view transitions</span></a>
                <ol class="toc">
                    <li>
                        <a href="#cross-doc-overview"><span class="secno">2.1</span> <span
                                class="content">Overview</span></a>
                        <ol class="toc">
                            <li><a href="#activating-cross-document-view-transition"><span class="secno">2.1.1</span>
                                    <span class="content">Activation</span></a>
                            <li><a href="#waiting-for-stable-state"><span class="secno">2.1.2</span> <span
                                        class="content">Waiting for the new state to stabilize</span></a>
                            <li>
                                <a href="#customizing-cross-document-view-transitions"><span class="secno">2.1.3</span>
                                    <span class="content">Customization</span></a>
                                <ol class="toc">
                                    <li><a href="#old-doc-event"><span class="secno">2.1.3.1</span> <span
                                                class="content">Handling the view transition in the old
                                                document</span></a>
                                    <li><a href="#new-doc-event"><span class="secno">2.1.3.2</span> <span
                                                class="content">Handling the view transition in the new
                                                document</span></a>
                                </ol>
                            <li><a href="#lifecycle"><span class="secno">2.1.4</span> <span
                                        class="content">Lifecycle</span></a>
                        </ol>
                    <li><a href="#cross-doc-examples"><span class="secno">2.2</span> <span
                                class="content">Examples</span></a>
                    <li>
                        <a href="#cross-doc-opt-in"><span class="secno">2.3</span> <span class="content">Opting in to
                                cross-document view transitions</span></a>
                        <ol class="toc">
                            <li><a href="#view-transition-rule"><span class="secno">2.3.1</span> <span
                                        class="content">The <span><span class="css">@view-transition</span></span>
                                        rule</span></a>
                            <li><a href="#view-transition-navigation-descriptor"><span class="secno">2.3.2</span> <span
                                        class="content">The <span>navigation</span> descriptor</span></a>
                            <li><a href="#cssom"><span class="secno">2.3.3</span> <span class="content">Accessing the
                                        <span class="css">@view-transition</span> rule using CSSOM</span></a>
                        </ol>
                </ol>
            <li>
                <a href="#selective-vt"><span class="secno">3</span> <span class="content">Selective view
                        transitions</span></a>
                <ol class="toc">
                    <li><a href="#selective-vt-overview"><span class="secno">3.1</span> <span
                                class="content">Overview</span></a>
                    <li><a href="#active-view-transition-pseudo-examples"><span class="secno">3.2</span> <span
                                class="content">Examples</span></a>
                    <li>
                        <a href="#pseudo-classes-for-selective-vt"><span class="secno">3.3</span> <span
                                class="content">Selecting based on the active view transition</span></a>
                        <ol class="toc">
                            <li><a href="#the-active-view-transition-pseudo"><span class="secno">3.3.1</span> <span
                                        class="content">The <span class="css">:active-view-transition</span>
                                        pseudo-class</span></a>
                            <li><a href="#the-active-view-transition-type-pseudo"><span class="secno">3.3.2</span> <span
                                        class="content">The <span class="css">:active-view-transition-type()</span>
                                        pseudo-class</span></a>
                        </ol>
                    <li><a href="#view-transitions-extension-types"><span class="secno">3.4</span> <span
                                class="content">Changing the types of an ongoing view transition</span></a>
                    <li><a href="#types-cross-doc"><span class="secno">3.5</span> <span class="content">Activating the
                                transition type for cross-document view transitions</span></a>
                </ol>
            <li>
                <a href="#shared-style-with-vt-classes"><span class="secno">4</span> <span class="content">Sharing
                        styles between view transition pseudo-elements</span></a>
                <ol class="toc">
                    <li><a href="#shared-style-overview"><span class="secno">4.1</span> <span
                                class="content">Overview</span></a>
                    <li><a href="#vt-class-example"><span class="secno">4.2</span> <span
                                class="content">Examples</span></a>
                    <li><a href="#view-transition-class-prop"><span class="secno">4.3</span> <span class="content">The
                                <span class="property">view-transition-class</span> property</span></a>
                    <li><a href="#pseudo-element-class-additions"><span class="secno">4.4</span> <span
                                class="content">Additions to named view transition pseudo-elements</span></a>
                </ol>
            <li><a href="#extend-document-types"><span class="secno">5</span> <span class="content">Extending <code
                            class="idl"><span>document.startViewTransition()</span></code></span></a>
            <li>
                <a href="#auto-vt-name"><span class="secno">6</span> <span class="content">Determining <span
                            class="property">view-transition-name</span> automatically</span></a>
                <ol class="toc">
                    <li><a href="#auto-vt-name-overview"><span class="secno">6.1</span> <span
                                class="content">Overview</span></a>
                    <li><a href="#auto-vt-name-example"><span class="secno">6.2</span> <span
                                class="content">Examples</span></a>
                    <li><a href="#additions-to-vt-name"><span class="secno">6.3</span> <span class="content">Additions
                                to <span class="property">view-transition-name</span></span></a>
                </ol>
            <li>
                <a href="#nested-view-transitions"><span class="secno">7</span> <span class="content">Nested
                        view-transitions</span></a>
                <ol class="toc">
                    <li><a href="#nested-overview"><span class="secno">7.1</span> <span
                                class="content">Overview</span></a>
                    <li><a href="#nested-vt-example"><span class="secno">7.2</span> <span
                                class="content">Examples</span></a>
                    <li><a href="#view-transition-group-prop"><span class="secno">7.3</span> <span class="content">The
                                <span class="property">view-transition-group</span> property</span></a>
                </ol>
            <li>
                <a href="#layered-capture"><span class="secno">8</span> <span class="content">Layered capture</span></a>
                <ol class="toc">
                    <li><a href="#layered-capture-overview"><span class="secno">8.1</span> <span
                                class="content">Overview</span></a>
                    <li><a href="#layered-captured-css-properties"><span class="secno">8.2</span> <span
                                class="content">Table of captured CSS properties
                                {#layered-captured-css-properties}</span></a>
                </ol>
            <li>
                <a href="#algorithms"><span class="secno">9</span> <span class="content">Algorithms</span></a>
                <ol class="toc">
                    <li>
                        <a href="#cross-doc-data-structures"><span class="secno">9.1</span> <span class="content">Data
                                structures</span></a>
                        <ol class="toc">
                            <li><a href="#cross-doc-data-structure-document"><span class="secno">9.1.1</span> <span
                                        class="content">Additions to <code
                                            class="idl"><span>Document</span></code></span></a>
                            <li><a href="#cross-doc-data-structure-vt"><span class="secno">9.1.2</span> <span
                                        class="content">Additions to <code
                                            class="idl"><span>ViewTransition</span></code></span></a>
                            <li><a href="#cross-doc-data-structure-serialization"><span class="secno">9.1.3</span> <span
                                        class="content">Serializable <span>view transition params</span></span></a>
                        </ol>
                    <li>
                        <a href="#page-visibility-change-steps-additions"><span class="secno">9.2</span> <span
                                class="content">Additions to the view transition page-visibility change steps</span></a>
                        <ol class="toc">
                            <li><a href="#capture-classes-data-structure"><span class="secno">9.2.1</span> <span
                                        class="content">Captured elements extension</span></a>
                        </ol>
                    <li><a href="#vt-rule-algo"><span class="secno">9.3</span> <span class="content">Resolving the <span
                                    class="css">@view-transition</span> rule</span></a>
                    <li>
                        <a href="#setup-old-document-vt"><span class="secno">9.4</span> <span class="content">Setting up
                                the view transition in the old <code class="idl"><span>Document</span></code></span></a>
                        <ol class="toc">
                            <li><a href="#check-eligibility"><span class="secno">9.4.1</span> <span
                                        class="content">Check eligibility for outbound cross-document view
                                        transition</span></a>
                            <li><a href="#setup-outbound-transition"><span class="secno">9.4.2</span> <span
                                        class="content">Setup the outbound transition when ready to swap
                                        pages</span></a>
                            <li><a href="#update-opt-in"><span class="secno">9.4.3</span> <span class="content">Update
                                        the opt-in flag to reflect the current state</span></a>
                            <li><a href="#proceed-if-skipped"><span class="secno">9.4.4</span> <span
                                        class="content">Proceed with navigation if view transition is skipped</span></a>
                            <li><a href="#cross-doc-after-capture"><span class="secno">9.4.5</span> <span
                                        class="content">Proceed with cross-document view transition after capturing the
                                        old state</span></a>
                        </ol>
                    <li><a href="#access-view-transition-in-new-doc"><span class="secno">9.5</span> <span
                                class="content">Activating the view transition in the new <code
                                    class="idl"><span>Document</span></code></span></a>
                    <li><a href="#vt-class-algorithms"><span class="secno">9.6</span> <span class="content">Capturing
                                the <span class="property">view-transition-class</span></span></a>
                    <li>
                        <a href="#vt-group-algorithm"><span class="secno">9.7</span> <span class="content">Capturing and
                                applying <span class="property">view-transition-group</span></span></a>
                        <ol class="toc">
                            <li><a href="#vt-group-value-resolve"><span class="secno">9.7.1</span> <span
                                        class="content">Resolving the <span
                                            class="property">view-transition-group</span> value</span></a>
                            <li><a href="#vt-containing-group-name-resolve"><span class="secno">9.7.2</span> <span
                                        class="content">Resolving the containing group name</span></a>
                            <li><a href="#vt-group-name-resolve"><span class="secno">9.7.3</span> <span
                                        class="content">Resolving the group name</span></a>
                            <li><a href="#vt-group-capture-old"><span class="secno">9.7.4</span> <span
                                        class="content">Compute the old <span
                                            class="property">view-transition-group</span></span></a>
                            <li><a href="#vt-group-capture-new"><span class="secno">9.7.5</span> <span
                                        class="content">Compute the new <span
                                            class="property">view-transition-group</span></span></a>
                            <li><a href="#vt-group-reparent"><span class="secno">9.7.6</span> <span
                                        class="content">Reparent a <span class="css">::view-transition-group()</span> to
                                        its specified containing group</span></a>
                            <li><a href="#vt-group-transform-adjust"><span class="secno">9.7.7</span> <span
                                        class="content">Adjust the group’s <span class="property">transform</span> to be
                                        relative to its containing <span
                                            class="css">::view-transition-group()</span></span></a>
                        </ol>
                    <li>
                        <a href="#layered-capture-algorithms"><span class="secno">9.8</span> <span
                                class="content">Capturing layered CSS properties</span></a>
                        <ol class="toc">
                            <li><a href="#layered-capture-compute-style"><span class="secno">9.8.1</span> <span
                                        class="content">Compute the layered-capture style</span></a>
                            <li><a href="#capture-new-layered-props-algorithm"><span class="secno">9.8.2</span> <span
                                        class="content">Capture the old layered properties</span></a>
                            <li><a href="#capture-image-size-algorithm"><span class="secno">9.8.3</span> <span
                                        class="content">Adjustment to image capture size</span></a>
                            <li><a href="#layered-capture-rendering"><span class="secno">9.8.4</span> <span
                                        class="content">Render the snapshot with layered capture</span></a>
                            <li><a href="#vt-adjust-nested-group-transform"><span class="secno">9.8.5</span> <span
                                        class="content">Adjust the nested group transform</span></a>
                            <li><a href="#vt-layered-capture-apply-keyframes"><span class="secno">9.8.6</span> <span
                                        class="content">Apply the old layered-capture properties to <span
                                            class="css">::view-transition-group()</span> keyframes</span></a>
                            <li><a href="#vt-layered-capture-apply-new-state"><span class="secno">9.8.7</span> <span
                                        class="content">Apply the new layered-capture properties to <span
                                            class="css">::view-transition-group()</span></span></a>
                        </ol>
                </ol>
            <li><a href="#priv"><span class="secno"></span> <span class="content">Privacy Considerations</span></a>
            <li><a href="#sec"><span class="secno"></span> <span class="content">Security Considerations</span></a>
            <li>
                <a href="#changes"><span class="secno"></span> <span class="content">Appendix A. Changes</span></a>
                <ol class="toc">
                    <li><a href="#changes-since-2024-05-16"><span class="secno"></span> <span class="content"> Changes
                                from <span>2024-05-16 Working Draft</span> </span></a>
                </ol>
            <li>
                <a href="#w3c-conformance"><span class="secno"></span> <span class="content"> Conformance</span></a>
                <ol class="toc">
                    <li><a href="#w3c-conventions"><span class="secno"></span> <span class="content"> Document
                                conventions</span></a>
                    <li><a href="#w3c-conformance-classes"><span class="secno"></span> <span class="content">
                                Conformance classes</span></a>
                    <li>
                        <a href="#w3c-partial"><span class="secno"></span> <span class="content"> Partial
                                implementations</span></a>
                        <ol class="toc">
                            <li><a href="#w3c-conform-future-proofing"><span class="secno"></span> <span
                                        class="content"> Implementations of Unstable and Proprietary Features</span></a>
                        </ol>
                    <li><a href="#w3c-testing"><span class="secno"></span> <span class="content"> Non-experimental
                                implementations</span></a>
                </ol>
            <li>
                <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
                <ol class="toc">
                    <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by
                                this specification</span></a>
                    <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms
                                defined by reference</span></a>
                </ol>
            <li>
                <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
                <ol class="toc">
                    <li><a href="#normative"><span class="secno"></span> <span class="content">Normative
                                References</span></a>
                    <li><a href="#informative"><span class="secno"></span> <span class="content">Informative
                                References</span></a>
                </ol>
            <li>
                <a href="#property-index"><span class="secno"></span> <span class="content">Property Index</span></a>
                <ol class="toc">
                    <li><a href="#view-transition-descriptor-table"><span class="secno"></span> <span
                                class="content"><span>@view-transition</span> Descriptors</span></a>
                </ol>
            <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL Index</span></a>
            <li><a href="#issues-index"><span class="secno"></span> <span class="content">Issues Index</span></a>
        </ol>
    </nav>
    <main>
        <script async src="diagrams/resources/scaler.js" type="module"></script>
        <h2 class="heading settled" data-level="1" id="intro"><span class="secno">1. </span><span
                class="content">Introduction</span><a class="self-link" href="#intro"></a></h2>
        <p><em>This section is non-normative.</em></p>
        <p>View Transitions, as specified in <a data-link-type="biblio" href="#biblio-css-view-transitions-1"
                title="CSS View Transitions Module Level 1">[css-view-transitions-1]</a>, is a feature that allows
            developers
            to create animated transitions between visual states of the <a data-link-type="dfn"
                href="https://dom.spec.whatwg.org/#concept-document" id="ref-for-concept-document">document</a>.</p>
        <p>Level 2 extends that specification, by adding the necessary API and lifecycle to enable
            transitions across a same-origin cross-document navigation, as well as a few additions that
            make it easier to author pages with richer view transitions.</p>
        <p>Level 2 defines the following:</p>
        <ul>
            <li data-md>
                <p><a href="#cross-document-view-transitions">Cross-document view transitions</a>, including the <a
                        class="css" data-link-type="maybe" href="#at-view-transition-rule"
                        id="ref-for-at-view-transition-rule">@view-transition</a> rule and the algorithms
                    that enable the cross-document view transition lifecycle.</p>
            <li data-md>
                <p><a href="#selective-vt">Selective view transitions</a>, a way to match styles based on the existence
                    of an <a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-view-transitions-1/#document-active-view-transition"
                        id="ref-for-document-active-view-transition">active view transition</a>,
                    and more specifically based on the active view transition being of a certain type.</p>
            <li data-md>
                <p><a href="#shared-style-with-vt-classes">Sharing styles between view transition pseudo-elements</a>, a
                    way to declare a style once,
                    and use it for multiple view transition pseudo-elements. This includes the <a class="property css"
                        data-link-type="property" href="#propdef-view-transition-class"
                        id="ref-for-propdef-view-transition-class">view-transition-class</a> property, and <a
                        href="#pseudo-element-class-additions">additions to named pseudo-elements</a></p>
        </ul>
        <h2 class="heading settled" data-level="2" id="cross-document-view-transitions"><span class="secno">2.
            </span><span class="content">Cross-document view transitions</span><a class="self-link"
                href="#cross-document-view-transitions"></a></h2>
        <h3 class="heading settled" data-level="2.1" id="cross-doc-overview"><span class="secno">2.1. </span><span
                class="content">Overview</span><a class="self-link" href="#cross-doc-overview"></a></h3>
        <p><em>This section is non-normative.</em></p>
        <h4 class="heading settled" data-level="2.1.1" id="activating-cross-document-view-transition"><span
                class="secno">2.1.1. </span><span class="content">Activation</span><a class="self-link"
                href="#activating-cross-document-view-transition"></a></h4>
        With same-document view transitions, the author starts a view transition using JavaScript, by calling <code
            class="idl"><a data-link-type="idl" href="#dom-document-startviewtransition" id="ref-for-dom-document-startviewtransition">startViewTransition</a></code>.
        In cross-document view transition, what triggers a view transition is a navigation between two documents, as
        long as the following conditions are met:
        <ul>
            <li data-md>
                <p>Both documents are of the <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsers.html#same-origin"
                        id="ref-for-same-origin">same origin</a>;</p>
            <li data-md>
                <p>The page is visible throughout the entire course of the navigation;</p>
            <li data-md>
                <p>The user initiates the navigation by interacting with the page, e.g. by clicking a link or submitting
                    a form; or by interacting with the browser UI to do a <code
                        class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-navigationtype-traverse" id="ref-for-dom-navigationtype-traverse">traverse</a></code>
                    navigation (back/forward). This excludes, for example, navigations initiated by the URL bar;</p>
            <li data-md>
                <p>the navigation didn’t include cross-origin redirects; and</p>
            <li data-md>
                <p>both documents opted in to cross-document view transitions, using the <a class="css"
                        data-link-type="maybe" href="#at-view-transition-rule"
                        id="ref-for-at-view-transition-rule①">@view-transition</a> rule.</p>
        </ul>
        <p>See the <a href="#lifecycle">lifecycle</a> section for more details.</p>
        <h4 class="heading settled" data-level="2.1.2" id="waiting-for-stable-state"><span class="secno">2.1.2.
            </span><span class="content">Waiting for the new state to stabilize</span><a class="self-link"
                href="#waiting-for-stable-state"></a></h4>
        In same-document view transitions, the author can indicate when the new state of the transition is in a stable
        state by using the callback passed to <code
            class="idl"><a data-link-type="idl" href="#dom-document-startviewtransition" id="ref-for-dom-document-startviewtransition①">startViewTransition</a></code>.
        Since cross-document view transitions are declarative, there is no such explicit promise. Instead, the user
        agent relies on the <a data-link-type="dfn"
            href="https://html.spec.whatwg.org/multipage/dom.html#render-blocking-mechanism"
            id="ref-for-render-blocking-mechanism">render-blocking mechanism</a> to decide when the document has reached
        a stable state.
        In this way, the author can use the <code data-x>blocking</code> attribute, to delay the transition until:
        <ul>
            <li data-md>
                <p>All expected scripts are executed, by using the script’s <code
                        class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/scripting.html#dom-script-blocking" id="ref-for-dom-script-blocking">blocking</a></code>
                    attribute on required scripts.</p>
            <li data-md>
                <p>All expected styles are executed, by using the style or link’s <code
                        class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/semantics.html#dom-style-blocking" id="ref-for-dom-style-blocking">blocking</a></code>
                    attribute on required styles.</p>
            <li data-md>
                <p>All expected HTML elements are seen by the parser, using an
                    <code><a data-link-type="attr-value" href="https://html.spec.whatwg.org/multipage/links.html#link-type-expect" id="ref-for-link-type-expect">expect</a></code>
                    <code
                        class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/semantics.html#htmllinkelement" id="ref-for-htmllinkelement">HTMLLinkElement</a></code>
                    element.
                </p>
        </ul>
        <p class="note" role="note"><span class="marker">Note:</span> overusing the render-blocking mechanism could make
            it so that the old state remains frozen for a long time, resulting in a jarring user experience.
            To avoid this, it’s advised to ensure that the render-blocking elements are available in a timely manner.
        </p>
        <div class="example" id="example-ece69f12">
            <a class="self-link" href="#example-ece69f12"></a>
            <p>In this example, the last frame of the old document will be shown, and the animation will be delayed,
                until all the following conditions are met:</p>
            <ul>
                <li data-md>
                    <p><code>style.css</code> is applied, to ensure the new state has the correct styles</p>
                <li data-md>
                    <p><code>fixup.js</code> is run, to ensure the presentation is up to date with script-based fixups.
                    </p>
                <li data-md>
                    <p>The <code>main-article</code> section is seen and parsed, to ensure enough of the content is
                        loaded before allowing the transition to proceed.</p>
            </ul>
            <pre class="language-html highlight"><c- cp>&lt;!DOCTYPE html></c->
<c- p>&lt;</c-><c- f>html</c-><c- p>></c->
	<c- p>&lt;</c-><c- f>head</c-><c- p>></c->
		&lt; !-- This will be render-blocking by default -->
		<c- p>&lt;</c-><c- f>link</c-> <c- e>rel</c-><c- o>=</c-><c- s>"stylesheet"</c-> <c- e>href</c-><c- o>=</c-><c- s>"style.css"</c-><c- p>></c->

		&lt; !-- Since this script fixes up the layout, marking it as render blocking will
			  ensure it’s run before the view transition is activated -->
		<c- p>&lt;</c-><c- f>script</c-> <c- e>async</c-> <c- e>href</c-><c- o>=</c-><c- s>"fixup.js"</c-> <c- e>blocking</c-><c- o>=</c-><c- s>"render"</c-><c- p>>&lt;/</c-><c- f>script</c-><c- p>></c->

		&lt; !-- Wait until the main-article element is seen and fully parsed before
			  activating the transition -->
		<c- p>&lt;</c-><c- f>link</c-> <c- e>rel</c-><c- o>=</c-><c- s>"expect"</c-> <c- e>href</c-><c- o>=</c-><c- s>"#main-article"</c-> <c- e>blocking</c-><c- o>=</c-><c- s>"render"</c-><c- p>></c->
	<c- p>&lt;/</c-><c- f>head</c-><c- p>></c->
	<c- p>&lt;</c-><c- f>body</c-><c- p>></c->
		<c- p>&lt;</c-><c- f>header</c-><c- p>></c->...<c- p>&lt;/</c-><c- f>header</c-><c- p>></c->
		<c- p>&lt;</c-><c- f>main</c-><c- p>></c->
			<c- p>&lt;</c-><c- f>article</c-> <c- e>id</c-><c- o>=</c-><c- s>"main-article"</c-><c- p>></c->...<c- p>&lt;/</c-><c- f>article</c-><c- p>></c->
		<c- p>&lt;/</c-><c- f>main</c-><c- p>></c->
		<c- p>&lt;</c-><c- f>article</c-> <c- e>id</c-><c- o>=</c-><c- s>"secondary-article"</c-><c- p>></c->...<c- p>&lt;/</c-><c- f>article</c-><c- p>></c->
	<c- p>&lt;/</c-><c- f>body</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>html</c-><c- p>></c->
</pre>
        </div>
        <h4 class="heading settled" data-level="2.1.3" id="customizing-cross-document-view-transitions"><span
                class="secno">2.1.3. </span><span class="content">Customization</span><a class="self-link"
                href="#customizing-cross-document-view-transitions"></a></h4>
        The <code
            class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition" id="ref-for-viewtransition">ViewTransition</a></code>
        object enables customizing the transition in script.
        Same-document view transitions use a single <code
            class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition" id="ref-for-viewtransition①">ViewTransition</a></code>
        object returned from the <code
            class="idl"><a data-link-type="idl" href="#dom-document-startviewtransition" id="ref-for-dom-document-startviewtransition②">startViewTransition</a></code>
        call for the entire lifecycle.
        Cross-document view transitions have two <code
            class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition" id="ref-for-viewtransition②">ViewTransition</a></code>
        objects, one in the old document and one in the new document.
        <h5 class="heading settled" data-level="2.1.3.1" id="old-doc-event"><span class="secno">2.1.3.1. </span><span
                class="content">Handling the view transition in the old document</span><a class="self-link"
                href="#old-doc-event"></a></h5>
        <p>The <code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/indices.html#event-pageswap" id="ref-for-event-pageswap">pageswap</a></code>
            event is fired at the last moment before a document is about to be unloaded and swapped by another document.
            It can be used to find out whether a view transition is about to take place, customize it using <code
                class="idl"><a data-link-type="idl" href="#dom-viewtransition-types" id="ref-for-dom-viewtransition-types">types</a></code>,
            make last minute changes to the captured elements, or skip it if necessary.
            The <code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#pageswapevent" id="ref-for-pageswapevent">PageSwapEvent</a></code>
            interface has a <code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-pageswapevent-viewtransition" id="ref-for-dom-pageswapevent-viewtransition">viewTransition</a></code>
            object, which would be non-null when the navigation is eligible to a view transition,
            and a <code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-pageswapevent-activation" id="ref-for-dom-pageswapevent-activation">activation</a></code>
            object, providing handy information about the navigation, like the URL after redirects.
            The transition’s <code
                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-view-transitions-1/#dom-viewtransition-finished" id="ref-for-dom-viewtransition-finished">finished</a></code>
            promise can be used for cleaning up after the transition, in case the document is later restored from
            BFCache.</p>
        <h5 class="heading settled" data-level="2.1.3.2" id="new-doc-event"><span class="secno">2.1.3.2. </span><span
                class="content">Handling the view transition in the new document</span><a class="self-link"
                href="#new-doc-event"></a></h5>
        <p>The <code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/indices.html#event-pagereveal" id="ref-for-event-pagereveal">pagereveal</a></code>
            event is fired right before presenting the first frame of the new document.
            It can be used to find out if the view transition is still valid, by querying the <code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-pagerevealevent-viewtransition" id="ref-for-dom-pagerevealevent-viewtransition">viewTransition</a></code>
            attribute.
            Similar to a same-document view transition, the author can now select different <code
                class="idl"><a data-link-type="idl" href="#dom-viewtransition-types" id="ref-for-dom-viewtransition-types①">types</a></code>,
            make last minute changes to the captured elements, wait for the transition to be <code
                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-view-transitions-1/#dom-viewtransition-ready" id="ref-for-dom-viewtransition-ready">ready</a></code>
            in order to animate it, or skip it altogether.</p>
        <h4 class="heading settled" data-level="2.1.4" id="lifecycle"><span class="secno">2.1.4. </span><span
                class="content">Lifecycle</span><a class="self-link" href="#lifecycle"></a></h4>
        <p><em>This section is non-normative.</em></p>
        <p>A successful cross-document view transition goes through the following phases:</p>
        <ol>
            <li data-md>
                <p>In the old <code
                        class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document">Document</a></code>:
                </p>
                <ol>
                    <li data-md>
                        <p>The user initiates a navigation, by clicking a link, submitting a form, pressing the
                            browser’s back button, etc.</p>
                        <p class="note" role="note"><span class="marker">Note:</span> some navigations do not trigger a
                            view-transition, e.g. typing a new address in the URL bar.</p>
                    <li data-md>
                        <p>When the new <code
                                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document①">Document</a></code>
                            is ready to be activated, the <code
                                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/indices.html#event-pageswap" id="ref-for-event-pageswap①">pageswap</a></code>
                            event is fired.</p>
                    <li data-md>
                        <p>If the navigation is <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/browsers.html#same-origin"
                                id="ref-for-same-origin①">same origin</a>, has no cross-origin redirects,
                            and the old <code
                                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document②">Document</a></code>
                            has <a href="#cross-doc-opt-in">opted in to cross-document view transitions</a>, the event’s
                            <code
                                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-pageswapevent-viewtransition" id="ref-for-dom-pageswapevent-viewtransition①">viewTransition</a></code>
                            attribute would be
                            a <code
                                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition" id="ref-for-viewtransition③">ViewTransition</a></code>
                            object.
                        </p>
                    <li data-md>
                        <p>The author can now customize the transition, e.g. by mutating its <code
                                class="idl"><a data-link-type="idl" href="#dom-viewtransition-types" id="ref-for-dom-viewtransition-types②">types</a></code>,
                            or <code
                                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-view-transitions-1/#dom-viewtransition-skiptransition" id="ref-for-dom-viewtransition-skiptransition">skip</a></code>
                            it altogether.</p>
                    <li data-md>
                        <p>If the <code
                                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition" id="ref-for-viewtransition④">ViewTransition</a></code>
                            is not skipped, the state of the old document is <a data-link-type="dfn"
                                href="https://www.w3.org/TR/css-view-transitions-1/#capture-the-old-state"
                                id="ref-for-capture-the-old-state">captured</a>.</p>
                    <li data-md>
                        <p>The navigation proceeds: the old <code
                                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document③">Document</a></code>
                            is unloaded, and the new <code
                                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document④">Document</a></code>
                            is now active.</p>
                </ol>
            <li data-md>
                <p>Then, in the new <code
                        class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document⑤">Document</a></code>:
                </p>
                <ol>
                    <li data-md>
                        <p>When the new <code
                                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document⑥">Document</a></code>
                            is ready for its first <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/webappapis.html#rendering-opportunity"
                                id="ref-for-rendering-opportunity">rendering opportunity</a>, an event named <code
                                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/indices.html#event-pagereveal" id="ref-for-event-pagereveal①">pagereveal</a></code>
                            is fired on the new <code
                                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document⑦">Document</a></code>,
                            with a <code
                                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-pagerevealevent-viewtransition" id="ref-for-dom-pagerevealevent-viewtransition①">viewTransition</a></code>
                            attribute.</p>
                    <li data-md>
                        <p>This <code
                                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition" id="ref-for-viewtransition⑤">ViewTransition</a></code>'s
                            <code><code class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-view-transitions-1/#dom-viewtransition-updatecallbackdone" id="ref-for-dom-viewtransition-updatecallbackdone">updateCallbackDone</a></code></code>
                            promise is already resolved,
                            and its <a data-link-type="dfn"
                                href="https://www.w3.org/TR/css-view-transitions-1/#captured-element"
                                id="ref-for-captured-element">captured elements</a> are populated from the old <code
                                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document⑧">Document</a></code>.
                        </p>
                    <li data-md>
                        <p>This is another opportunity for the author to customize the transition, e.g. by mutating its
                            <code
                                class="idl"><a data-link-type="idl" href="#dom-viewtransition-types" id="ref-for-dom-viewtransition-types③">types</a></code>,
                            or <code
                                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-view-transitions-1/#dom-viewtransition-skiptransition" id="ref-for-dom-viewtransition-skiptransition①">skip</a></code>
                            it altogether.
                        </p>
                    <li data-md>
                        <p>The state of the new document is <a data-link-type="dfn"
                                href="https://www.w3.org/TR/css-view-transitions-1/#capture-the-new-state"
                                id="ref-for-capture-the-new-state">captured</a> as the "new" state of the transition.
                        </p>
                    <li data-md>
                        <p>From this point forward, the transition continues in a similar fashion to a same-document
                            transition, as per <a data-link-type="dfn"
                                href="https://www.w3.org/TR/css-view-transitions-1/#activate-view-transition"
                                id="ref-for-activate-view-transition">activate view transition</a>.</p>
                </ol>
        </ol>
        <h3 class="heading settled" data-level="2.2" id="cross-doc-examples"><span class="secno">2.2. </span><span
                class="content">Examples</span><a class="self-link" href="#cross-doc-examples"></a></h3>
        <div class="example" id="example-5cf7b384">
            <a class="self-link" href="#example-5cf7b384"></a> To generate the same cross-fade as in the first example
            <a href="https://www.w3.org/TR/css-view-transitions-1/#examples"><cite>CSS View Transitions 1</cite> § 1.6
                Examples</a>,
            but across documents, we don’t need JavaScript.
            <p>Instead, we opt in to triggering view-transitions on navigation in both page 1 and page 2:</p>
            <pre class="language-css highlight">// in both documents:
<c- n>@view-transition</c-> <c- p>{</c->
	<c- k>navigation</c-><c- p>:</c-> auto<c- p>;</c->
<c- p>}</c->
</pre>
            <p>A link from page 1 to or from page 2 would generate a crossfade transition for example 1.
                To achieve the effect examples 2, 3 &amp; 4, simply put the CSS for the pseudo-elements in both
                documents.</p>
        </div>
        <div class="example" id="example-e5e29ee3">
            <a class="self-link" href="#example-e5e29ee3"></a> Note that the <a class="css" data-link-type="maybe"
                href="#at-view-transition-rule" id="ref-for-at-view-transition-rule②">@view-transition</a> rule can be
            used together with media queries.
            For example, this would only perform the transition when the screen width is greater than:
            <pre class="language-css highlight"><c- n>@view-transition</c-> <c- p>{</c->
	<c- k>navigation</c-><c- p>:</c-> auto<c- p>;</c->
<c- p>}</c->

<c- n>@media</c-> <c- p>(</c->max-width: <c- m>600</c-><c- k>px</c-><c- p>)</c-> <c- p>{</c->
	<c- k>navigation</c-><c- p>:</c-> none<c- p>;</c->
<c- p>}</c->
</pre>
        </div>
        <div class="example" id="example-201df5f9">
            <a class="self-link" href="#example-201df5f9"></a> To achieve the effect in <a
                href="https://www.w3.org/TR/css-view-transitions-1/#examples">example 5</a>, we have to do several
            things:
            <ul>
                <li data-md>
                    <p>Opt-in to navigation-triggered view-transitions in both pages.</p>
                <li data-md>
                    <p>Pass the click location to the new document, e.g. via <code
                            class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/webstorage.html#dom-sessionstorage" id="ref-for-dom-sessionstorage">sessionStorage</a></code>.
                    </p>
                <li data-md>
                    <p>Intercept the <code
                            class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition" id="ref-for-viewtransition⑥">ViewTransition</a></code>
                        object in the new document, using the <code
                            class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/indices.html#event-pagereveal" id="ref-for-event-pagereveal②">pagereveal</a></code>
                        event.</p>
            </ul>
            <p>In both pages:</p>
            <pre class="language-css highlight"><c- n>@view-transition</c-> <c- p>{</c->
	<c- k>navigation</c-><c- p>:</c-> auto<c- p>;</c->
<c- p>}</c->
</pre>
            In the old page:
            <pre class="language-js highlight">addEventListener<c- p>(</c-><c- t>'click'</c-><c- p>,</c-> event <c- p>=></c-> <c- p>{</c->
	sessionStorage<c- p>.</c->setItem<c- p>(</c-><c- u>"lastClickX"</c-><c- p>,</c-> event<c- p>.</c->clientX<c- p>);</c->
	sessionStorage<c- p>.</c->setItem<c- p>(</c-><c- u>"lastClickY"</c-><c- p>,</c-> event<c- p>.</c->clientY<c- p>);</c->
<c- p>});</c->
</pre>
            <p>In the new page:</p>
            <pre class="language-js highlight"><c- c1>// This would run both on initial load and on reactivation from BFCache.</c->
addEventListener<c- p>(</c-><c- u>"pagereveal"</c-><c- p>,</c-> <c- k>async</c-> event <c- p>=></c-> <c- p>{</c->
	<c- k>if</c-> <c- p>(</c-><c- o>!</c->event<c- p>.</c->viewTransition<c- p>)</c->
		<c- k>return</c-><c- p>;</c->

	<c- a>const</c-> x <c- o>=</c-> sessionStorage<c- p>.</c->getItem<c- p>(</c-><c- u>"lastClickX"</c-><c- p>)</c-> <c- o>??</c-> innerWidth <c- o>/</c-> <c- mf>2</c-><c- p>;</c->
	<c- a>const</c-> y <c- o>=</c-> sessionStorage<c- p>.</c->getItem<c- p>(</c-><c- u>"lastClickY"</c-><c- p>)</c-> <c- o>??</c-> innerHeight <c- o>/</c-> <c- mf>2</c-><c- p>;</c->

	<c- a>const</c-> endRadius <c- o>=</c-> Math<c- p>.</c->hypot<c- p>(</c->
		Math<c- p>.</c->max<c- p>(</c->x<c- p>,</c-> innerWidth <c- o>-</c-> x<c- p>),</c->
		Math<c- p>.</c->max<c- p>(</c->y<c- p>,</c-> innerHeight <c- o>-</c-> y<c- p>)</c->
	<c- p>);</c->

	<c- k>await</c-> event<c- p>.</c->viewTransition<c- p>.</c->ready<c- p>;</c->

	<c- c1>// Animate the new document’s view</c->
	document<c- p>.</c->documentElement<c- p>.</c->animate<c- p>(</c->
		<c- p>{</c->
			clipPath<c- o>:</c-> <c- p>[</c->
				<c- o>&lt;</c->code data<c- o>-</c->opaque bs<c- o>-</c->autolink<c- o>-</c->syntax<c- o>=</c-><c- t>'`circle(0 at ${x}px ${y}px)`'</c-><c- o>></c->circle<c- p>(</c-><c- mf>0</c-> at $<c- p>{</c->x<c- p>}</c->px $<c- p>{</c->y<c- p>}</c->px<c- p>)</c-><c- o>&lt;</c->/code>,
				<c- o>&lt;</c->code data<c- o>-</c->opaque bs<c- o>-</c->autolink<c- o>-</c->syntax<c- o>=</c-><c- t>'`circle(${endRadius}px at ${x}px ${y}px)`'</c-><c- o>></c->circle<c- p>(</c->$<c- p>{</c->endRadius<c- p>}</c->px at $<c- p>{</c->x<c- p>}</c->px $<c- p>{</c->y<c- p>}</c->px<c- p>)</c-><c- o>&lt;</c->/code>,
			<c- p>],</c->
		<c- p>},</c->
		<c- p>{</c->
			duration<c- o>:</c-> <c- mf>500</c-><c- p>,</c->
			easing<c- o>:</c-> <c- t>'ease-in'</c-><c- p>,</c->
			pseudoElement<c- o>:</c-> <c- t>'::view-transition-new(root)'</c->
		<c- p>}</c->
	<c- p>);</c->
<c- p>})</c->
</pre>
        </div>
        <div class="example" id="example-a7331208">
            <a class="self-link" href="#example-a7331208"></a> To choose which elements are captured based on properties
            of the navigation, and whether certain images are loaded:
            <p>In the old page:</p>
            <pre class="language-js highlight">window<c- p>.</c->addEventListener<c- p>(</c-><c- u>"pageswap"</c-><c- p>,</c-> event <c- p>=></c-> <c- p>{</c->
	<c- c1>// For example, the page was hidden, or the navigation is cross-document.</c->
	<c- k>if</c-> <c- p>(</c-><c- o>!</c->event<c- p>.</c->viewTransition<c- p>)</c->
		<c- k>return</c-><c- p>;</c->

	<c- c1>// If you don’t want view transition for back/forward navigations...</c->
	<c- k>if</c-> <c- p>(</c->event<c- p>.</c->activation<c- p>.</c->navigationType <c- o>===</c-> <c- u>"traverse"</c-><c- p>)</c-> <c- p>{</c->
		event<c- p>.</c->viewTransition<c- p>.</c->skipTransition<c- p>();</c->
	<c- p>}</c->

	<c- a>const</c-> newURL <c- o>=</c-> <c- ow>new</c-> URL<c- p>(</c->event<c- p>.</c->activation<c- p>.</c->entry<c- p>.</c->url<c- p>);</c->
	<c- k>if</c-> <c- p>(</c->newURL<c- p>.</c->pathname <c- o>===</c-> <c- u>"/details"</c-> <c- o>&amp;&amp;</c-> thumbnail<c- p>.</c->complete<c- p>)</c-> <c- p>{</c->
		thumbnail<c- p>.</c->classList<c- p>.</c->add<c- p>(</c-><c- u>"transition-to-hero"</c-><c- p>);</c->

		<c- c1>// This will cleanup the state if the page is restored from BFCache.</c->
		event<c- p>.</c->viewTransition<c- p>.</c->finished<c- p>.</c->then<c- p>(()</c-> <c- p>=></c-> <c- p>{</c->
			thumbnail<c- p>.</c->classList<c- p>.</c->remove<c- p>(</c-><c- u>"transition-to-hero"</c-><c- p>);</c->
		<c- p>});</c->
	<c- p>}</c->

<c- p>});</c->
</pre>
            <p>In the new page:</p>
            <pre class="language-js highlight">window<c- p>.</c->addEventListener<c- p>(</c-><c- u>"pagereveal"</c-><c- p>,</c-> event <c- p>=></c-> <c- p>{</c->
	<c- c1>// For example, the page was hidden, the navigation is cross-document, or the transition was skipped in the old document.</c->
	<c- k>if</c-> <c- p>(</c-><c- o>!</c->event<c- p>.</c->viewTransition<c- p>)</c->
		<c- k>return</c-><c- p>;</c->

	<c- a>const</c-> oldURL <c- o>=</c-> <c- ow>new</c-> URL<c- p>(</c->navigation<c- p>.</c->activation<c- p>.</c-><c- kr>from</c-><c- p>.</c->url<c- p>);</c->
	<c- k>if</c-> <c- p>(</c->newURL<c- p>.</c->pathname <c- o>===</c-> <c- u>"/list"</c-><c- p>)</c-> <c- p>{</c->
		event<c- p>.</c->viewTransition<c- p>.</c->types<c- p>.</c->add<c- p>(</c-><c- u>"coming-from-list"</c-><c- p>);</c->

		<c- c1>// This will show the thumbnail until the view transition is finished.</c->
		<c- k>if</c-> <c- p>(</c-><c- o>!</c->hero<c- p>.</c->complete<c- p>)</c-> <c- p>{</c->
			setToThumbnail<c- p>(</c->hero<c- p>);</c->
			event<c- p>.</c->viewTransition<c- p>.</c->finished<c- p>.</c->then<c- p>(()</c-> <c- p>=></c-> <c- p>{</c->
				setToFullResolution<c- p>(</c->hero<c- p>);</c->
			<c- p>})</c->
		<c- p>}</c->
	<c- p>}</c->
<c- p>});</c->
</pre>
        </div>
        <h3 class="heading settled" data-level="2.3" id="cross-doc-opt-in"><span class="secno">2.3. </span><span
                class="content">Opting in to cross-document view transitions</span><a class="self-link"
                href="#cross-doc-opt-in"></a></h3>
        <h4 class="heading settled" data-level="2.3.1" id="view-transition-rule"><span class="secno">2.3.1. </span><span
                class="content">The <dfn class="dfn-paneled css" data-dfn-type="at-rule" data-export
                    id="at-view-transition-rule"><a class="css" data-link-type="maybe" href="#at-view-transition-rule"
                        id="ref-for-at-view-transition-rule③">@view-transition</a></dfn> rule</span><a class="self-link"
                href="#view-transition-rule"></a></h4>
        <p>The <a class="css" data-link-type="maybe" href="#at-view-transition-rule"
                id="ref-for-at-view-transition-rule④">@view-transition</a> rule is used by a document to indicate that
            cross-document navigations
            should setup and activate a <code
                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition" id="ref-for-viewtransition⑦">ViewTransition</a></code>.
        </p>
        <p>The <a class="css" data-link-type="maybe" href="#at-view-transition-rule"
                id="ref-for-at-view-transition-rule⑤">@view-transition</a> rule has the following syntax:</p>
        <pre class="prod">@view-transition {
  <a class="production" data-link-type="type" href="https://www.w3.org/TR/css-syntax-3/#typedef-declaration-list" id="ref-for-typedef-declaration-list">&lt;declaration-list></a>
}
</pre>
        <p>The <a class="css" data-link-type="maybe" href="#at-view-transition-rule"
                id="ref-for-at-view-transition-rule⑥">@view-transition</a> rule accepts the <a data-link-type="dfn"
                href="#view-transition-navigation" id="ref-for-view-transition-navigation">navigation</a> and <a
                data-link-type="dfn" href="#view-transition-types" id="ref-for-view-transition-types">types</a>
            descriptors.</p>
        <p class="note" role="note"><span class="marker">Note:</span> as per default behavior, the <a class="css"
                data-link-type="maybe" href="#at-view-transition-rule"
                id="ref-for-at-view-transition-rule⑦">@view-transition</a> rule can be nested inside a <a
                data-link-type="dfn" href="https://www.w3.org/TR/css-conditional-3/#conditional-group-rule"
                id="ref-for-conditional-group-rule">conditional group rule</a> such as <a class="css"
                data-link-type="maybe" href="https://www.w3.org/TR/css-conditional-3/#at-ruledef-media"
                id="ref-for-at-ruledef-media">@media</a> or <a class="css" data-link-type="maybe"
                href="https://www.w3.org/TR/css-conditional-3/#at-ruledef-supports"
                id="ref-for-at-ruledef-supports">@supports</a>.</p>
        <p>When the <a class="css" data-link-type="maybe" href="#at-view-transition-rule"
                id="ref-for-at-view-transition-rule⑧">@view-transition</a> rule changes for <code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document⑨">Document</a></code>
            <var>document</var>, the user agent must <a data-link-type="dfn"
                href="#update-the-opt-in-state-for-outbound-transitions"
                id="ref-for-update-the-opt-in-state-for-outbound-transitions">update the opt-in state for outbound
                transitions</a> given <var>document</var>.
        </p>
        <p class="note" role="note"><span class="marker">Note:</span> this needs to be cached in the boolean because the
            result needs to be read <a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel"
                id="ref-for-in-parallel">in parallel</a>, when navigating.</p>
        <h4 class="heading settled" data-level="2.3.2" id="view-transition-navigation-descriptor"><span
                class="secno">2.3.2. </span><span class="content">The <a data-link-type="dfn"
                    href="#view-transition-navigation" id="ref-for-view-transition-navigation①">navigation</a>
                descriptor</span><a class="self-link" href="#view-transition-navigation-descriptor"></a></h4>
        <table class="def descdef">
            <tbody>
                <tr>
                    <th>Name:
                    <td><dfn class="css" data-dfn-for="@view-transition" data-dfn-type="descriptor" data-export
                            id="descdef-view-transition-navigation">navigation<a class="self-link"
                                href="#descdef-view-transition-navigation"></a></dfn>
                <tr>
                    <th>For:
                    <td><a class="css" data-link-type="at-rule" href="#at-view-transition-rule"
                            id="ref-for-at-view-transition-rule⑨">@view-transition</a>
                <tr>
                    <th>Value:
                    <td class="prod">auto <a data-link-type="grammar"
                            href="https://www.w3.org/TR/css-values-4/#comb-one" id="ref-for-comb-one">|</a> none
                <tr>
                    <th>Initial:
                    <td>none
        </table>
        <p>The '<dfn class="dfn-paneled" data-dfn-for="@view-transition" data-dfn-type="dfn" data-noexport
                id="view-transition-navigation">navigation</dfn>' descriptor opts in to automatically starting a view
            transition when performing a navigation of a certain type.
            Must be present on both the old and new document.</p>
        <dl>
            <dt data-md><dfn class="dfn-paneled css" data-dfn-for="@view-transition/navigation" data-dfn-type="value"
                    data-export id="valdef-view-transition-navigation-none">none</dfn>
            <dd data-md>
                <p>There will be no transition.</p>
            <dt data-md><dfn class="dfn-paneled css" data-dfn-for="@view-transition/navigation" data-dfn-type="value"
                    data-export id="valdef-view-transition-navigation-auto">auto</dfn>
            <dd data-md>
                <p>The transition will be enabled if the navigation is same-origin, without cross-origin
                    redirects, and whose <code
                        class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#navigationtype" id="ref-for-navigationtype">NavigationType</a></code>
                    is</p>
                <ul>
                    <li data-md>
                        <p><code
                                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-navigationtype-traverse" id="ref-for-dom-navigationtype-traverse①">traverse</a></code>,
                            or</p>
                    <li data-md>
                        <p><code
                                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-navigationtype-push" id="ref-for-dom-navigationtype-push">push</a></code>
                            or <code
                                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-navigationtype-replace" id="ref-for-dom-navigationtype-replace">replace</a></code>,
                            with <a
                                href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#user-navigation-involvement">user
                                navigation involvement</a> not equal to <code>"browser UI"</code>.</p>
                </ul>
                <p class="note" role="note"><span class="marker">Note:</span> Navigations excluded from <a class="css"
                        data-link-type="maybe" href="#valdef-view-transition-navigation-auto"
                        id="ref-for-valdef-view-transition-navigation-auto">auto</a> are for example, navigating
                    via the URL address bar or clicking a bookmark, as well as any form of user or script initiated
                    <code
                        class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-navigationtype-reload" id="ref-for-dom-navigationtype-reload">reload</a></code>.
                </p>
        </dl>
        <p>This at-rule conforms with the forward-compatible parsing requirement of CSS;
            conformant parsers that don’t understand these rules will ignore them without error.
            Any descriptors that are not recognized or implemented by a given user agent,
            or whose value does not match the grammars given here or in a future version of this specification,
            must be ignored in their entirety;
            they do not make the <a class="css" data-link-type="maybe" href="#at-view-transition-rule"
                id="ref-for-at-view-transition-rule①⓪">@view-transition</a> rule invalid.</p>
        <h4 class="heading settled" data-level="2.3.3" id="cssom"><span class="secno">2.3.3. </span><span
                class="content">Accessing the <a class="css" data-link-type="maybe" href="#at-view-transition-rule"
                    id="ref-for-at-view-transition-rule①①">@view-transition</a> rule using CSSOM</span><a
                class="self-link" href="#cssom"></a></h4>
        <p>The <code
                class="idl"><a data-link-type="idl" href="#cssviewtransitionrule" id="ref-for-cssviewtransitionrule">CSSViewTransitionRule</a></code>
            represents a <a class="css" data-link-type="maybe" href="#at-view-transition-rule"
                id="ref-for-at-view-transition-rule①②">@view-transition</a> rule.</p>
        <pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="cssviewtransitionrule"><code><c- g>CSSViewTransitionRule</c-></code></dfn> : <a data-link-type="idl-name" href="https://www.w3.org/TR/cssom-1/#cssrule" id="ref-for-cssrule"><c- n>CSSRule</c-></a> {
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://www.w3.org/TR/cssom-1/#cssomstring" id="ref-for-cssomstring"><c- n>CSSOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="CSSViewTransitionRule" data-dfn-type="attribute" data-export data-readonly data-type="CSSOMString" id="dom-cssviewtransitionrule-navigation"><code><c- g>navigation</c-></code></dfn>;
  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject" id="ref-for-SameObject"><c- g>SameObject</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-frozen-array" id="ref-for-idl-frozen-array"><c- b>FrozenArray</c-></a>&lt;<a data-link-type="idl-name" href="https://www.w3.org/TR/cssom-1/#cssomstring" id="ref-for-cssomstring①"><c- n>CSSOMString</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="CSSViewTransitionRule" data-dfn-type="attribute" data-export data-readonly data-type="FrozenArray<CSSOMString>" id="dom-cssviewtransitionrule-types"><code><c- g>types</c-></code></dfn>;
};
</pre>
        <p>The <code
                class="idl"><a data-link-type="idl" href="#dom-cssviewtransitionrule-navigation" id="ref-for-dom-cssviewtransitionrule-navigation">navigation</a></code>
            getter step is to return the value of the corresponding <span class="css">navigation</span> descriptor if
            one exists, otherwise the empty string.</p>
        <p>The <code
                class="idl"><a data-link-type="idl" href="#dom-cssviewtransitionrule-types" id="ref-for-dom-cssviewtransitionrule-types">types</a></code>
            getter steps is to return the value of the corresponding <span class="css">types</span> descriptor if one
            exists, otherwise an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list"
                id="ref-for-list">list</a>.</p>
        <h2 class="heading settled" data-level="3" id="selective-vt"><span class="secno">3. </span><span
                class="content">Selective view transitions</span><a class="self-link" href="#selective-vt"></a></h2>
        <h3 class="heading settled" data-level="3.1" id="selective-vt-overview"><span class="secno">3.1. </span><span
                class="content">Overview</span><a class="self-link" href="#selective-vt-overview"></a></h3>
        <p><em>This section is non-normative.</em></p>
        <p>For simple pages, with a single view transition, setting the <span class="css">view-transition-name</span>
            property on participating elements should be sufficient.
            However, in more complex scenarios, the author might want to declare various view transitions, and only run
            one of them simultaneously.
            For example, sliding the whole page when clicking on the navigation bar, and sorting a list when one of its
            items is dragged.</p>
        <p>To make sure each view transition only captures what it needs to, and different transitions don’t interfere
            with each other,
            this spec introduces the concept of <a data-link-type="dfn" href="#viewtransition-active-types"
                id="ref-for-viewtransition-active-types">active types</a>, alongside the <a class="css"
                data-link-type="maybe" href="#active-view-transition-pseudo"
                id="ref-for-active-view-transition-pseudo">:active-view-transition</a> and <a class="css"
                data-link-type="maybe" href="#active-view-transition-type-pseudo"
                id="ref-for-active-view-transition-type-pseudo">:active-view-transition-type()</a> pseudo-classes.</p>
        <p><a class="css" data-link-type="maybe" href="#active-view-transition-pseudo"
                id="ref-for-active-view-transition-pseudo①">:active-view-transition</a> matches the <a
                data-link-type="dfn" href="https://dom.spec.whatwg.org/#document-element"
                id="ref-for-document-element">document element</a> when it has an <a data-link-type="dfn"
                href="https://www.w3.org/TR/css-view-transitions-1/#document-active-view-transition"
                id="ref-for-document-active-view-transition①">active view transition</a>, and <a class="css"
                data-link-type="maybe" href="#active-view-transition-type-pseudo"
                id="ref-for-active-view-transition-type-pseudo①">:active-view-transition-type()</a> matches the <span
                id="ref-for-document-element①">document element</span> if the types in the selectors match the <span
                id="ref-for-document-active-view-transition②">active view transition</span>'s <a data-link-type="dfn"
                href="#viewtransition-active-types" id="ref-for-viewtransition-active-types①">active types</a>.</p>
        <p>The <code
                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition" id="ref-for-viewtransition⑧">ViewTransition</a></code>'s
            <a data-link-type="dfn" href="#viewtransition-active-types" id="ref-for-viewtransition-active-types②">active
                types</a> are populated in one of the following ways:
        </p>
        <ol>
            <li data-md>
                <p>Passed as part of the arguments to <code
                        class="idl"><a data-link-type="idl" href="#dom-document-startviewtransition" id="ref-for-dom-document-startviewtransition③">startViewTransition(callbackOptions)</a></code>
                </p>
            <li data-md>
                <p>Mutated at any time, using the transition’s <code
                        class="idl"><a data-link-type="idl" href="#dom-viewtransition-types" id="ref-for-dom-viewtransition-types④">types</a></code>
                </p>
            <li data-md>
                <p>Declared for a cross-document view transition, using the <a data-link-type="dfn"
                        href="#view-transition-types" id="ref-for-view-transition-types①">types</a> descriptor.</p>
        </ol>
        <h3 class="heading settled" data-level="3.2" id="active-view-transition-pseudo-examples"><span
                class="secno">3.2. </span><span class="content">Examples</span><a class="self-link"
                href="#active-view-transition-pseudo-examples"></a></h3>
        <div class="example" id="example-fcb7f482">
            <a class="self-link" href="#example-fcb7f482"></a> For example, the developer might start a transition in
            the following manner:
            <pre class="language-js highlight">document<c- p>.</c->startViewTransition<c- p>({</c->update<c- o>:</c-> updateTheDOMSomehow<c- p>,</c-> types<c- o>:</c-> <c- p>[</c-><c- u>"slide-in"</c-><c- p>,</c-> <c- u>"reverse"</c-><c- p>]});</c->
</pre>
            <p>This will activate any of the following selectors:</p>
            <pre class="language-css highlight">:root<c- nf>:active-view-transition-type</c-><c- p>(</c->slide-in<c- p>)</c-> <c- p>{}</c->
:root<c- nf>:active-view-transition-type</c-><c- p>(</c->reverse<c- p>)</c-> <c- p>{}</c->
:root<c- nf>:active-view-transition-type</c-><c- p>(</c->slide-in<c- p>,</c-> reverse<c- p>)</c-> <c- p>{}</c->
:root<c- nf>:active-view-transition-type</c-><c- p>(</c->slide-in<c- p>,</c-> something-else<c- p>)</c-> <c- p>{}</c->
:root:active-view-transition <c- p>{}</c->
</pre>
            <p>While starting a transition without providing transition types, would only activate
                ':active-view-transition'':</p>
            <pre class="language-js highlight">document<c- p>.</c->startViewTransition<c- p>(</c->updateTheDOMSomehow<c- p>);</c->
<c- c1>// or</c->
document<c- p>.</c->startViewTransition<c- p>({</c->update<c- o>:</c-> updateTheDOMSomehow<c- p>});</c->
</pre>
            <pre class="language-css highlight"><c- c>/* This would be active */</c->
:root <c- p>{</c-> <c- p>}</c->
:root:active-view-transition <c- p>{}</c->

<c- c>/* This would not be active */</c->
:root<c- nf>:active-view-transition-type</c-><c- p>(</c->slide-in<c- p>)</c-> <c- p>{}</c->
:root<c- nf>:active-view-transition-type</c-><c- p>(</c->any-type-at-all-except-star<c- p>)</c-> <c- p>{}</c->
</pre>
        </div>
        <h3 class="heading settled" data-level="3.3" id="pseudo-classes-for-selective-vt"><span class="secno">3.3.
            </span><span class="content">Selecting based on the active view transition</span><a class="self-link"
                href="#pseudo-classes-for-selective-vt"></a></h3>
        <h4 class="heading settled" data-level="3.3.1" id="the-active-view-transition-pseudo"><span class="secno">3.3.1.
            </span><span class="content">The <a class="css" data-link-type="maybe" href="#active-view-transition-pseudo"
                    id="ref-for-active-view-transition-pseudo②">:active-view-transition</a> pseudo-class</span><a
                class="self-link" href="#the-active-view-transition-pseudo"></a></h4>
        <p>The <dfn class="dfn-paneled css" data-dfn-type="selector" data-export
                id="active-view-transition-pseudo">:active-view-transition</dfn> pseudo-class applies to the root
            element of the document, if it has an <a data-link-type="dfn"
                href="https://www.w3.org/TR/css-view-transitions-1/#document-active-view-transition"
                id="ref-for-document-active-view-transition③">active view transition</a>.</p>
        <p>The <a data-link-type="dfn" href="https://www.w3.org/TR/selectors-4/#specificity"
                id="ref-for-specificity">specificity</a> of an <a class="css" data-link-type="maybe"
                href="#active-view-transition-pseudo"
                id="ref-for-active-view-transition-pseudo③">:active-view-transition</a> is one pseudo-class selector.
        </p>
        <p>An <a class="css" data-link-type="maybe" href="#active-view-transition-pseudo"
                id="ref-for-active-view-transition-pseudo④">:active-view-transition</a> pseudo-class matches the <a
                data-link-type="dfn" href="https://dom.spec.whatwg.org/#document-element"
                id="ref-for-document-element②">document element</a> when its <a data-link-type="dfn"
                href="https://dom.spec.whatwg.org/#concept-node-document" id="ref-for-concept-node-document">node
                document</a> has an non-null <a data-link-type="dfn"
                href="https://www.w3.org/TR/css-view-transitions-1/#document-active-view-transition"
                id="ref-for-document-active-view-transition④">active view transition</a>.</p>
        <h4 class="heading settled" data-level="3.3.2" id="the-active-view-transition-type-pseudo"><span
                class="secno">3.3.2. </span><span class="content">The <a class="css" data-link-type="maybe"
                    href="#active-view-transition-type-pseudo"
                    id="ref-for-active-view-transition-type-pseudo②">:active-view-transition-type()</a>
                pseudo-class</span><a class="self-link" href="#the-active-view-transition-type-pseudo"></a></h4>
        <p>The <dfn class="dfn-paneled css" data-dfn-type="selector" data-export
                id="active-view-transition-type-pseudo">:active-view-transition-type()</dfn> pseudo-class applies to the
            root element of the document, if it has a matching <a data-link-type="dfn"
                href="https://www.w3.org/TR/css-view-transitions-1/#document-active-view-transition"
                id="ref-for-document-active-view-transition⑤">active view transition</a>.
            It has the following syntax definition:</p>
        <pre class="prod">:active-view-transition-type(<a class="production" data-link-type="type" href="https://www.w3.org/TR/css-values-4/#identifier-value" id="ref-for-identifier-value">&lt;custom-ident></a><a data-link-type="grammar" href="https://www.w3.org/TR/css-values-4/#mult-comma" id="ref-for-mult-comma">#</a>)
</pre>
        <p>The <a data-link-type="dfn" href="https://www.w3.org/TR/selectors-4/#specificity"
                id="ref-for-specificity①">specificity</a> of an <a class="css" data-link-type="maybe"
                href="#active-view-transition-type-pseudo"
                id="ref-for-active-view-transition-type-pseudo③">:active-view-transition-type()</a> is one pseudo-class
            selector.</p>
        <p>An <a class="css" data-link-type="maybe" href="#active-view-transition-type-pseudo"
                id="ref-for-active-view-transition-type-pseudo④">:active-view-transition-type()</a> pseudo-class matches
            the <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#document-element"
                id="ref-for-document-element③">document element</a> when its <a data-link-type="dfn"
                href="https://dom.spec.whatwg.org/#concept-node-document" id="ref-for-concept-node-document①">node
                document</a> has an non-null <a data-link-type="dfn"
                href="https://www.w3.org/TR/css-view-transitions-1/#document-active-view-transition"
                id="ref-for-document-active-view-transition⑥">active view transition</a>,
            whose <a data-link-type="dfn" href="#viewtransition-active-types"
                id="ref-for-viewtransition-active-types③">active types</a> <a data-link-type="dfn"
                href="https://infra.spec.whatwg.org/#list-contain" id="ref-for-list-contain">contains</a> at least one
            of the <a class="production css" data-link-type="type"
                href="https://www.w3.org/TR/css-values-4/#identifier-value"
                id="ref-for-identifier-value①">&lt;custom-ident></a> arguments.</p>
        <h3 class="heading settled" data-level="3.4" id="view-transitions-extension-types"><span class="secno">3.4.
            </span><span class="content">Changing the types of an ongoing view transition</span><a class="self-link"
                href="#view-transitions-extension-types"></a></h3>
        <p>The <code
                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition" id="ref-for-viewtransition⑨">ViewTransition</a></code>
            interface is extended as follows:</p>
        <pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed①"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="viewtransitiontypeset"><code><c- g>ViewTransitionTypeSet</c-></code></dfn> {
  <c- b>setlike</c->&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString"><c- b>DOMString</c-></a>>;
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed②"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition" id="ref-for-viewtransition①⓪"><c- g>ViewTransition</c-></a> {
  <c- b>attribute</c-> <a data-link-type="idl-name" href="#viewtransitiontypeset" id="ref-for-viewtransitiontypeset"><c- n>ViewTransitionTypeSet</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ViewTransition" data-dfn-type="attribute" data-export data-type="ViewTransitionTypeSet" id="dom-viewtransition-types"><code><c- g>types</c-></code></dfn>;
};
</pre>
        <p>The <code
                class="idl"><a data-link-type="idl" href="#viewtransitiontypeset" id="ref-for-viewtransitiontypeset①">ViewTransitionTypeSet</a></code>
            object represents a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set"
                id="ref-for-ordered-set">set</a> of strings, without special semantics.</p>
        <p class="note" role="note"><span class="marker">Note:</span> a <code
                class="idl"><a data-link-type="idl" href="#viewtransitiontypeset" id="ref-for-viewtransitiontypeset②">ViewTransitionTypeSet</a></code>
            can contain strings that are invalid for <span class="css">:active-view-transition-type</span>, e.g.
            strings that are not a <a class="production css" data-link-type="type"
                href="https://www.w3.org/TR/css-values-4/#identifier-value"
                id="ref-for-identifier-value②">&lt;custom-ident></a>.</p>
        <p>The <code
                class="idl"><a data-link-type="idl" href="#dom-viewtransition-types" id="ref-for-dom-viewtransition-types⑤">types</a></code>
            <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#getter-steps" id="ref-for-getter-steps">getter
                steps</a> are to return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this"
                id="ref-for-this">this</a>'s <a data-link-type="dfn" href="#viewtransition-active-types"
                id="ref-for-viewtransition-active-types④">active types</a>.
        </p>
        <h3 class="heading settled" data-level="3.5" id="types-cross-doc"><span class="secno">3.5. </span><span
                class="content">Activating the transition type for cross-document view transitions</span><a
                class="self-link" href="#types-cross-doc"></a></h3>
        <p>The <a data-link-type="dfn" href="#view-transition-types" id="ref-for-view-transition-types②">types</a>
            descriptor</p>
        <table class="def descdef">
            <tbody>
                <tr>
                    <th>Name:
                    <td><dfn class="css" data-dfn-for="@view-transition" data-dfn-type="descriptor" data-export
                            id="descdef-view-transition-types">types<a class="self-link"
                                href="#descdef-view-transition-types"></a></dfn>
                <tr>
                    <th>For:
                    <td><a class="css" data-link-type="at-rule" href="#at-view-transition-rule"
                            id="ref-for-at-view-transition-rule①③">@view-transition</a>
                <tr>
                    <th>Value:
                    <td class="prod">none <a data-link-type="grammar"
                            href="https://www.w3.org/TR/css-values-4/#comb-one" id="ref-for-comb-one①">|</a> <a
                            class="production css" data-link-type="type"
                            href="https://www.w3.org/TR/css-values-4/#identifier-value"
                            id="ref-for-identifier-value③">&lt;custom-ident></a><a data-link-type="grammar"
                            href="https://www.w3.org/TR/css-values-4/#mult-one-plus" id="ref-for-mult-one-plus">+</a>
                <tr>
                    <th>Initial:
                    <td>none
        </table>
        <p>The '<dfn class="dfn-paneled" data-dfn-for="@view-transition" data-dfn-type="dfn" data-noexport
                id="view-transition-types">types</dfn>' descriptor sets the <a data-link-type="dfn"
                href="#viewtransition-active-types" id="ref-for-viewtransition-active-types⑤">active types</a> for the
            transition
            when capturing or performing the transition, equivalent to calling <code
                class="idl"><a data-link-type="idl" href="#dom-document-startviewtransition" id="ref-for-dom-document-startviewtransition④">startViewTransition(callbackOptions)</a></code>
            with that <code
                class="idl"><a data-link-type="idl" href="#dom-startviewtransitionoptions-types" id="ref-for-dom-startviewtransitionoptions-types">types</a></code>.
        </p>
        <p class="note" role="note"><span class="marker">Note:</span> the <a data-link-type="dfn"
                href="#view-transition-types" id="ref-for-view-transition-types③">types</a> descriptor only applies to
            the <code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document①⓪">Document</a></code>
            in which it is defined.
            The author is responsible for using their chosen set of types in both documents.</p>
        <h2 class="heading settled" data-level="4" id="shared-style-with-vt-classes"><span class="secno">4. </span><span
                class="content">Sharing styles between view transition pseudo-elements</span><a class="self-link"
                href="#shared-style-with-vt-classes"></a></h2>
        <h3 class="heading settled" data-level="4.1" id="shared-style-overview"><span class="secno">4.1. </span><span
                class="content">Overview</span><a class="self-link" href="#shared-style-overview"></a></h3>
        <p><em>This section is non-normative.</em></p>
        <p>When styling multiple elements in the DOM in a similar way, it is common to use the <a data-link-type="dfn"
                href="https://dom.spec.whatwg.org/#concept-class" id="ref-for-concept-class">class</a> attribute:
            setting a name that’s shared across multiple elements, and then using the <a data-link-type="dfn"
                href="https://www.w3.org/TR/selectors-4/#class-selector" id="ref-for-class-selector">class selector</a>
            to declare the shared style.</p>
        <p><a data-link-type="dfn"
                href="https://www.w3.org/TR/css-view-transitions-1/#named-view-transition-pseudo-elements"
                id="ref-for-named-view-transition-pseudo-elements">The view transition pseudo-elements</a> (e.g. <span
                class="css">view-transition-group()</span>) are not defined in the DOM, but rather by using the <span
                class="css">view-transition-name</span> property.
            For that purpose, the <span class="css">view-transition-class</span>' CSS property provides view transitions
            with the equivalent of HTML <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-class"
                id="ref-for-concept-class①">classes</a>.
            When an element with a <span class="css">view-transition-name</span> also has a <span
                class="css">view-transition-class</span> value, that class would be selectable by the pseudo-elements,
            as per the <a href="#vt-class-example">examples</a>.</p>
        <h3 class="heading settled" data-level="4.2" id="vt-class-example"><span class="secno">4.2. </span><span
                class="content">Examples</span><a class="self-link" href="#vt-class-example"></a></h3>
        <div class="example" id="example-f2466484">
            <a class="self-link" href="#example-f2466484"></a> This example creates a transition with each box
            participating under its own name, while applying
            a 1-second duration to the animation of all the boxes:
            <pre class="language-html highlight"><c- p>&lt;</c-><c- f>div</c-> <c- e>class</c-><c- o>=</c-><c- s>"box"</c-> <c- e>id</c-><c- o>=</c-><c- s>"red-box"</c-><c- p>>&lt;/</c-><c- f>div</c-><c- p>></c->
<c- p>&lt;</c-><c- f>div</c-> <c- e>class</c-><c- o>=</c-><c- s>"box"</c-> <c- e>id</c-><c- o>=</c-><c- s>"green-box"</c-><c- p>>&lt;/</c-><c- f>div</c-><c- p>></c->
<c- p>&lt;</c-><c- f>div</c-> <c- e>class</c-><c- o>=</c-><c- s>"box"</c-> <c- e>id</c-><c- o>=</c-><c- s>"yellow-box"</c-><c- p>>&lt;/</c-><c- f>div</c-><c- p>></c->
</pre>
            <pre class="language-css highlight">div.box <c- p>{</c->
	<c- k>view-transition-class</c-><c- p>:</c-> any-box<c- p>;</c->
	<c- k>width</c-><c- p>:</c-> <c- m>100</c-><c- k>px</c-><c- p>;</c->
	<c- k>height</c-><c- p>:</c-> <c- m>100</c-><c- k>px</c-><c- p>;</c->
<c- p>}</c->
#red-box <c- p>{</c->
	<c- k>view-transition-name</c-><c- p>:</c-> red-box<c- p>;</c->
	<c- k>background</c-><c- p>:</c-> red<c- p>;</c->
<c- p>}</c->
#green-box <c- p>{</c->
	<c- k>view-transition-name</c-><c- p>:</c-> green-box<c- p>;</c->
	<c- k>background</c-><c- p>:</c-> green<c- p>;</c->
<c- p>}</c->
#yellow-box <c- p>{</c->
	<c- k>view-transition-name</c-><c- p>:</c-> yellow-box<c- p>;</c->
	<c- k>background</c-><c- p>:</c-> yellow<c- p>;</c->
<c- p>}</c->

<c- c>/* The following style would apply to all the boxes, thanks to 'view-transition-class' */</c->
:<c- nf>:view-transition-group</c-><c- p>(</c->*.any-box<c- p>)</c-> <c- p>{</c->
	<c- k>animation-duration</c-><c- p>:</c-> <c- m>1</c-><c- k>s</c-><c- p>;</c->
<c- p>}</c->
</pre>
        </div>
        <h3 class="heading settled" data-level="4.3" id="view-transition-class-prop"><span class="secno">4.3.
            </span><span class="content">The <a class="property css" data-link-type="property"
                    href="#propdef-view-transition-class"
                    id="ref-for-propdef-view-transition-class①">view-transition-class</a> property</span><a
                class="self-link" href="#view-transition-class-prop"></a></h3>
        <table class="def propdef" data-link-for-hint="view-transition-class">
            <tbody>
                <tr>
                    <th>Name:
                    <td><dfn class="dfn-paneled css" data-dfn-type="property" data-export
                            id="propdef-view-transition-class">view-transition-class</dfn>
                <tr class="value">
                    <th><a href="https://www.w3.org/TR/css-values/#value-defs">Value:</a>
                    <td class="prod">none <a data-link-type="grammar"
                            href="https://www.w3.org/TR/css-values-4/#comb-one" id="ref-for-comb-one②">|</a> <a
                            class="production css" data-link-type="type"
                            href="https://www.w3.org/TR/css-values-4/#identifier-value"
                            id="ref-for-identifier-value④">&lt;custom-ident></a><a data-link-type="grammar"
                            href="https://www.w3.org/TR/css-values-4/#mult-one-plus" id="ref-for-mult-one-plus①">+</a>
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#initial-values">Initial:</a>
                    <td>none
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#applies-to">Applies to:</a>
                    <td><a href="https://www.w3.org/TR/css-pseudo/#generated-content"
                            title="Includes ::before and ::after pseudo-elements.">all elements</a>
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#inherited-property">Inherited:</a>
                    <td>no
                <tr>
                    <th><a href="https://www.w3.org/TR/css-values/#percentages">Percentages:</a>
                    <td>n/a
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#computed">Computed value:</a>
                    <td>as specified
                <tr>
                    <th><a href="https://www.w3.org/TR/cssom/#serializing-css-values">Canonical order:</a>
                    <td>per grammar
                <tr>
                    <th><a href="https://www.w3.org/TR/web-animations/#animation-type">Animation type:</a>
                    <td>discrete
        </table>
        <p>The <a class="property css" data-link-type="property" href="#propdef-view-transition-class"
                id="ref-for-propdef-view-transition-class②">view-transition-class</a> can be used to apply the same
            style rule to multiple <a data-link-type="dfn"
                href="https://www.w3.org/TR/css-view-transitions-1/#named-view-transition-pseudo-elements"
                id="ref-for-named-view-transition-pseudo-elements①">named view transition pseudo-elements</a> which may
            have a different <a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-view-transitions-1/#propdef-view-transition-name"
                id="ref-for-propdef-view-transition-name">view-transition-name</a>.
            While <span class="property" id="ref-for-propdef-view-transition-name①">view-transition-name</span> is used
            to match between the element in the old state with its corresponding element in the new state, <span
                class="property" id="ref-for-propdef-view-transition-class③">view-transition-class</span> is used
            only to apply styles using the view transitionpseudo-elements
            (<a class="css" data-link-type="maybe"
                href="https://www.w3.org/TR/css-view-transitions-1/#selectordef-view-transition-group"
                id="ref-for-selectordef-view-transition-group">::view-transition-group()</a>, <a class="css"
                data-link-type="maybe"
                href="https://www.w3.org/TR/css-view-transitions-1/#selectordef-view-transition-image-pair"
                id="ref-for-selectordef-view-transition-image-pair">::view-transition-image-pair()</a>, <a class="css"
                data-link-type="maybe"
                href="https://www.w3.org/TR/css-view-transitions-1/#selectordef-view-transition-old"
                id="ref-for-selectordef-view-transition-old">::view-transition-old()</a>, <a class="css"
                data-link-type="maybe"
                href="https://www.w3.org/TR/css-view-transitions-1/#selectordef-view-transition-new"
                id="ref-for-selectordef-view-transition-new">::view-transition-new()</a>).</p>
        <p>Note that <a class="property css" data-link-type="property" href="#propdef-view-transition-class"
                id="ref-for-propdef-view-transition-class④">view-transition-class</a> by itself doesn’t mark an element
            for capturing, it is only used as an additional
            way to style an element that already has a <a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-view-transitions-1/#propdef-view-transition-name"
                id="ref-for-propdef-view-transition-name②">view-transition-name</a>.</p>
        <dl>
            <dt data-md><dfn class="css" data-dfn-for="view-transition-class" data-dfn-type="value" data-export
                    id="valdef-view-transition-class-none">none<a class="self-link"
                        href="#valdef-view-transition-class-none"></a></dfn>
            <dd data-md>
                <p>No class would apply to the <a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-view-transitions-1/#named-view-transition-pseudo-elements"
                        id="ref-for-named-view-transition-pseudo-elements②">named view transition pseudo-elements</a>
                    generated for this element.</p>
            <dt data-md><dfn class="css" data-dfn-for="view-transition-class" data-dfn-type="value" data-export
                    id="valdef-view-transition-class-custom-ident"><a class="production css" data-link-type="type"
                        href="https://www.w3.org/TR/css-values-4/#identifier-value"
                        id="ref-for-identifier-value⑤">&lt;custom-ident></a>+<a class="self-link"
                        href="#valdef-view-transition-class-custom-ident"></a></dfn>
            <dd data-md>
                <p>All of the specified <a class="production css" data-link-type="type"
                        href="https://www.w3.org/TR/css-values-4/#identifier-value"
                        id="ref-for-identifier-value⑥">&lt;custom-ident></a> values (apart from <span
                        class="css">none</span>) are applied when used in <a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-view-transitions-1/#named-view-transition-pseudo-elements"
                        id="ref-for-named-view-transition-pseudo-elements③">named view transition pseudo-element</a>
                    selectors. <span class="css">none</span> is an invalid <span class="production"
                        id="ref-for-identifier-value⑦">&lt;custom-ident></span> for <a class="property css"
                        data-link-type="property" href="#propdef-view-transition-class"
                        id="ref-for-propdef-view-transition-class⑤">view-transition-class</a>, even when combined with
                    another <span class="production" id="ref-for-identifier-value⑧">&lt;custom-ident></span>.</p>
                <p>Each 'view transition class' is a <a data-link-type="dfn"
                        href="https://drafts.csswg.org/css-scoping-1/#css-tree-scoped-name"
                        id="ref-for-css-tree-scoped-name">tree-scoped name</a>.</p>
                <p class="note" role="note"><span class="marker">Note:</span> If the same <a class="property css"
                        data-link-type="property"
                        href="https://www.w3.org/TR/css-view-transitions-1/#propdef-view-transition-name"
                        id="ref-for-propdef-view-transition-name③">view-transition-name</a> is specified for an element
                    both in the old and new states of the transition,
                    only the <a class="property css" data-link-type="property" href="#propdef-view-transition-class"
                        id="ref-for-propdef-view-transition-class⑥">view-transition-class</a> values from the new state
                    apply. This also applies for cross-document view transitions:
                    classes from the old document would only apply if their corresponding <span class="property"
                        id="ref-for-propdef-view-transition-name④">view-transition-name</span> was not specified in the
                    new document.</p>
        </dl>
        <h3 class="heading settled" data-level="4.4" id="pseudo-element-class-additions"><span class="secno">4.4.
            </span><span class="content">Additions to named view transition pseudo-elements</span><a class="self-link"
                href="#pseudo-element-class-additions"></a></h3>
        <p>The <a data-link-type="dfn"
                href="https://www.w3.org/TR/css-view-transitions-1/#named-view-transition-pseudo-elements"
                id="ref-for-named-view-transition-pseudo-elements④">named view transition pseudo-elements</a> (<span
                class="css">view-transition-group()</span>, <span class="css">view-transition-image-pair()</span>, <span
                class="css">view-transition-old()</span>, <span class="css">view-transition-new()</span>)
            are extended to support the following syntax:</p>
        <pre class="prod">::view-transition-group(<a class="production" data-link-type="type" href="#typedef-pt-name-and-class-selector" id="ref-for-typedef-pt-name-and-class-selector">&lt;pt-name-and-class-selector></a>)
::view-transition-image-pair(<a class="production" data-link-type="type" href="#typedef-pt-name-and-class-selector" id="ref-for-typedef-pt-name-and-class-selector①">&lt;pt-name-and-class-selector></a>)
::view-transition-old(<a class="production" data-link-type="type" href="#typedef-pt-name-and-class-selector" id="ref-for-typedef-pt-name-and-class-selector②">&lt;pt-name-and-class-selector></a>)
::view-transition-new(<a class="production" data-link-type="type" href="#typedef-pt-name-and-class-selector" id="ref-for-typedef-pt-name-and-class-selector③">&lt;pt-name-and-class-selector></a>)
</pre>
        <p>where <a class="production css" data-link-type="type"
                href="https://www.w3.org/TR/css-view-transitions-1/#typedef-pt-name-selector"
                id="ref-for-typedef-pt-name-selector">&lt;pt-name-selector></a> works as previously defined, and <a
                class="production css" data-link-type="type" href="#typedef-pt-name-and-class-selector"
                id="ref-for-typedef-pt-name-and-class-selector④">&lt;pt-name-and-class-selector></a> has the following
            syntax definition:</p>
        <pre class="prod"><dfn class="dfn-paneled" data-dfn-type="type" data-export id="typedef-pt-name-and-class-selector">&lt;pt-name-and-class-selector></dfn> = <a class="production" data-link-type="type" href="https://www.w3.org/TR/css-view-transitions-1/#typedef-pt-name-selector" id="ref-for-typedef-pt-name-selector①">&lt;pt-name-selector></a> <a class="production" data-link-type="type" href="#typedef-pt-class-selector" id="ref-for-typedef-pt-class-selector">&lt;pt-class-selector></a><a data-link-type="grammar" href="https://www.w3.org/TR/css-values-4/#mult-opt" id="ref-for-mult-opt">?</a> <a data-link-type="grammar" href="https://www.w3.org/TR/css-values-4/#comb-one" id="ref-for-comb-one③">|</a> <a class="production" data-link-type="type" href="#typedef-pt-class-selector" id="ref-for-typedef-pt-class-selector①">&lt;pt-class-selector></a>
<dfn class="dfn-paneled" data-dfn-type="type" data-export id="typedef-pt-class-selector">&lt;pt-class-selector></dfn> = ['.' <a class="production" data-link-type="type" href="https://www.w3.org/TR/css-values-4/#identifier-value" id="ref-for-identifier-value⑨">&lt;custom-ident></a>]<a data-link-type="grammar" href="https://www.w3.org/TR/css-values-4/#mult-one-plus" id="ref-for-mult-one-plus②">+</a>
</pre>
        <p>When interpreting the above grammar, white space is forbidden:</p>
        <ul>
            <li data-md>
                <p>Between <a class="production css" data-link-type="type"
                        href="https://www.w3.org/TR/css-view-transitions-1/#typedef-pt-name-selector"
                        id="ref-for-typedef-pt-name-selector②">&lt;pt-name-selector></a> and <a class="production css"
                        data-link-type="type" href="#typedef-pt-class-selector"
                        id="ref-for-typedef-pt-class-selector②">&lt;pt-class-selector></a></p>
            <li data-md>
                <p>Between any of the components of <a class="production css" data-link-type="type"
                        href="#typedef-pt-class-selector"
                        id="ref-for-typedef-pt-class-selector③">&lt;pt-class-selector></a>.</p>
        </ul>
        <p>A <a data-link-type="dfn"
                href="https://www.w3.org/TR/css-view-transitions-1/#named-view-transition-pseudo-elements"
                id="ref-for-named-view-transition-pseudo-elements⑤">named view transition pseudo-element</a> <a
                data-link-type="dfn" href="https://www.w3.org/TR/selectors-4/#selector"
                id="ref-for-selector">selector</a> which has one or more <a class="production css" data-link-type="type"
                href="https://www.w3.org/TR/css-values-4/#identifier-value"
                id="ref-for-identifier-value①⓪">&lt;custom-ident></a> values
            in its <a class="production css" data-link-type="type" href="#typedef-pt-class-selector"
                id="ref-for-typedef-pt-class-selector④">&lt;pt-class-selector></a> would only match an element if the <a
                data-link-type="dfn" href="#captured-element-class-list" id="ref-for-captured-element-class-list">class
                list</a> value in <a data-link-type="dfn"
                href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition-named-elements"
                id="ref-for-viewtransition-named-elements">named elements</a> for the pseudo-element’s <a
                class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-view-transitions-1/#propdef-view-transition-name"
                id="ref-for-propdef-view-transition-name⑤">view-transition-name</a> <a data-link-type="dfn"
                href="https://infra.spec.whatwg.org/#list-contain" id="ref-for-list-contain①">contains</a> all of those
            values.</p>
        <p>The <a data-link-type="dfn" href="https://www.w3.org/TR/selectors-4/#specificity"
                id="ref-for-specificity②">specificity</a> of a <a data-link-type="dfn"
                href="https://www.w3.org/TR/css-view-transitions-1/#named-view-transition-pseudo-elements"
                id="ref-for-named-view-transition-pseudo-elements⑥">named view transition pseudo-element</a> <a
                data-link-type="dfn" href="https://www.w3.org/TR/selectors-4/#selector"
                id="ref-for-selector①">selector</a> with either:</p>
        <ul>
            <li data-md>
                <p>a <a class="production css" data-link-type="type"
                        href="https://www.w3.org/TR/css-view-transitions-1/#typedef-pt-name-selector"
                        id="ref-for-typedef-pt-name-selector③">&lt;pt-name-selector></a> with a <a
                        class="production css" data-link-type="type"
                        href="https://www.w3.org/TR/css-values-4/#identifier-value"
                        id="ref-for-identifier-value①①">&lt;custom-ident></a>; or</p>
            <li data-md>
                <p>a <a class="production css" data-link-type="type" href="#typedef-pt-class-selector"
                        id="ref-for-typedef-pt-class-selector⑤">&lt;pt-class-selector></a> with at least one <a
                        class="production css" data-link-type="type"
                        href="https://www.w3.org/TR/css-values-4/#identifier-value"
                        id="ref-for-identifier-value①②">&lt;custom-ident></a>,</p>
        </ul>
        <p>is equivalent to a <a data-link-type="dfn" href="https://www.w3.org/TR/selectors-4/#type-selector"
                id="ref-for-type-selector">type selector</a>.</p>
        <p>The <a data-link-type="dfn" href="https://www.w3.org/TR/selectors-4/#specificity"
                id="ref-for-specificity③">specificity</a> of a <a data-link-type="dfn"
                href="https://www.w3.org/TR/css-view-transitions-1/#named-view-transition-pseudo-elements"
                id="ref-for-named-view-transition-pseudo-elements⑦">named view transition pseudo-element</a> <a
                data-link-type="dfn" href="https://www.w3.org/TR/selectors-4/#selector"
                id="ref-for-selector②">selector</a> with a <a class="css" data-link-type="maybe"
                href="https://www.w3.org/TR/selectors-3/#x" id="ref-for-x">*</a> argument and with an empty <a
                class="production css" data-link-type="type" href="#typedef-pt-class-selector"
                id="ref-for-typedef-pt-class-selector⑥">&lt;pt-class-selector></a> is zero.</p>
        <h2 class="heading settled" data-level="5" id="extend-document-types"><span class="secno">5. </span><span
                class="content">Extending <code
                    class="idl"><a data-link-type="idl" href="#dom-document-startviewtransition" id="ref-for-dom-document-startviewtransition⑤">document.startViewTransition()</a></code></span><a
                class="self-link" href="#extend-document-types"></a></h2>
        <pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-startviewtransitionoptions"><code><c- g>StartViewTransitionOptions</c-></code></dfn> {
  <a data-link-type="idl-name" href="https://drafts.csswg.org/css-view-transitions-1/#callbackdef-viewtransitionupdatecallback" id="ref-for-callbackdef-viewtransitionupdatecallback"><c- n>ViewTransitionUpdateCallback</c-></a>? <dfn class="dfn-paneled idl-code" data-default="null" data-dfn-for="StartViewTransitionOptions" data-dfn-type="dict-member" data-export data-type="ViewTransitionUpdateCallback? " id="dom-startviewtransitionoptions-update"><code><c- g>update</c-></code></dfn> = <c- b>null</c->;
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①"><c- b>DOMString</c-></a>>? <dfn class="dfn-paneled idl-code" data-default="null" data-dfn-for="StartViewTransitionOptions" data-dfn-type="dict-member" data-export data-type="sequence<DOMString>? " id="dom-startviewtransitionoptions-types"><code><c- g>types</c-></code></dfn> = <c- b>null</c->;
};

<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://dom.spec.whatwg.org/#document" id="ref-for-document①①"><c- g>Document</c-></a> {
  <a data-link-type="idl-name" href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition" id="ref-for-viewtransition①①"><c- n>ViewTransition</c-></a> <a class="idl-code" data-link-type="method" href="#dom-document-startviewtransition" id="ref-for-dom-document-startviewtransition⑥"><c- g>startViewTransition</c-></a>(<c- b>optional</c-> (<a data-link-type="idl-name" href="https://drafts.csswg.org/css-view-transitions-1/#callbackdef-viewtransitionupdatecallback" id="ref-for-callbackdef-viewtransitionupdatecallback①"><c- n>ViewTransitionUpdateCallback</c-></a> <c- b>or</c-> <a data-link-type="idl-name" href="#dictdef-startviewtransitionoptions" id="ref-for-dictdef-startviewtransitionoptions"><c- n>StartViewTransitionOptions</c-></a>) <dfn class="idl-code" data-dfn-for="Document/startViewTransition(callbackOptions), Document/startViewTransition()" data-dfn-type="argument" data-export id="dom-document-startviewtransition-callbackoptions-callbackoptions"><code><c- g>callbackOptions</c-></code><a class="self-link" href="#dom-document-startviewtransition-callbackoptions-callbackoptions"></a></dfn> = {});
};
</pre>
        <div class="algorithm" data-algorithm="start-vt-with-options">
            The <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#method-steps"
                id="ref-for-method-steps">method steps</a> for <dfn class="dfn-paneled idl-code" data-dfn-for="Document"
                data-dfn-type="method" data-export data-lt="startViewTransition(callbackOptions)|startViewTransition()"
                id="dom-document-startviewtransition"><code>startViewTransition(<var>callbackOptions</var>)</code></dfn>
            are as follows:
            <ol>
                <li data-md>
                    <p>Let <var>updateCallback</var> be null.</p>
                <li data-md>
                    <p>If <var>callbackOptions</var> is a <code
                            class="idl"><a data-link-type="idl" href="https://drafts.csswg.org/css-view-transitions-1/#callbackdef-viewtransitionupdatecallback" id="ref-for-callbackdef-viewtransitionupdatecallback②">ViewTransitionUpdateCallback</a></code>,
                        set <var>updateCallback</var> to <var>callbackOptions</var>.</p>
                <li data-md>
                    <p>Otherwise, if <var>callbackOptions</var> is a <code
                            class="idl"><a data-link-type="idl" href="#dictdef-startviewtransitionoptions" id="ref-for-dictdef-startviewtransitionoptions①">StartViewTransitionOptions</a></code>,
                        then set <var>updateCallback</var> to <var>callbackOptions</var>’s <code
                            class="idl"><a data-link-type="idl" href="#dom-startviewtransitionoptions-update" id="ref-for-dom-startviewtransitionoptions-update">update</a></code>.
                    </p>
                <li data-md>
                    <p>If <var>this</var>’s <a data-link-type="dfn"
                            href="https://www.w3.org/TR/css-view-transitions-1/#document-active-view-transition"
                            id="ref-for-document-active-view-transition⑦">active view transition</a> is not null and its
                        <a data-link-type="dfn" href="#viewtransition-outbound-post-capture-steps"
                            id="ref-for-viewtransition-outbound-post-capture-steps">outbound post-capture steps</a> is
                        not null,
                        then:
                    </p>
                    <ol>
                        <li data-md>
                            <p>Let <var>preSkippedTransition</var> be a new <code
                                    class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition" id="ref-for-viewtransition①②">ViewTransition</a></code>
                                in <var>this</var>’s <a data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm"
                                    id="ref-for-concept-relevant-realm">relevant realm</a> whose <a data-link-type="dfn"
                                    href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition-update-callback"
                                    id="ref-for-viewtransition-update-callback">update callback</a> is
                                <var>updateCallback</var>.
                            </p>
                            <p class="note" role="note"><span class="marker">Note:</span> The
                                <var>preSkippedTransition</var>’s <code
                                    class="idl"><a data-link-type="idl" href="#dom-viewtransition-types" id="ref-for-dom-viewtransition-types⑥">types</a></code>
                                are ignored here because the transition is never activated.
                            </p>
                        <li data-md>
                            <p><a data-link-type="dfn"
                                    href="https://www.w3.org/TR/css-view-transitions-1/#skip-the-view-transition"
                                    id="ref-for-skip-the-view-transition">Skip</a> <var>preSkippedTransition</var> with
                                an "<code
                                    class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidstateerror" id="ref-for-invalidstateerror">InvalidStateError</a></code>"
                                <code
                                    class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException">DOMException</a></code>.
                            </p>
                        <li data-md>
                            <p>Return <var>preSkippedTransition</var>.</p>
                    </ol>
                    <p class="note" role="note"><span class="marker">Note:</span> This ensures that a same-document
                        transition that started after firing <code
                            class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/indices.html#event-pageswap" id="ref-for-event-pageswap②">pageswap</a></code>
                        is skipped.</p>
                <li data-md>
                    <p>Let <var>viewTransition</var> be the result of running the <a data-link-type="dfn"
                            href="https://webidl.spec.whatwg.org/#method-steps" id="ref-for-method-steps①">method
                            steps</a> for <code
                            class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-view-transitions-1/#dom-document-startviewtransition" id="ref-for-dom-document-startviewtransition⑦">startViewTransition(updateCallback)</a></code>
                        given <var>updateCallback</var>.</p>
                <li data-md>
                    <p>If <var>callbackOptions</var> is a <code
                            class="idl"><a data-link-type="idl" href="#dictdef-startviewtransitionoptions" id="ref-for-dictdef-startviewtransitionoptions②">StartViewTransitionOptions</a></code>,
                        set <var>viewTransition</var>’s <a data-link-type="dfn" href="#viewtransition-active-types"
                            id="ref-for-viewtransition-active-types⑥">active types</a> to a <a data-link-type="dfn"
                            href="https://infra.spec.whatwg.org/#list-clone" id="ref-for-list-clone">clone</a> of <code
                            class="idl"><a data-link-type="idl" href="#dom-startviewtransitionoptions-types" id="ref-for-dom-startviewtransitionoptions-types①">types</a></code>
                        as a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set"
                            id="ref-for-ordered-set①">set</a>.</p>
                <li data-md>
                    <p>Return <var>viewTransition</var>.</p>
            </ol>
        </div>
        <h2 class="heading settled" data-level="6" id="auto-vt-name"><span class="secno">6. </span><span
                class="content">Determining <a class="property css" data-link-type="property"
                    href="https://www.w3.org/TR/css-view-transitions-1/#propdef-view-transition-name"
                    id="ref-for-propdef-view-transition-name⑥">view-transition-name</a> automatically</span><a
                class="self-link" href="#auto-vt-name"></a></h2>
        <h3 class="heading settled" data-level="6.1" id="auto-vt-name-overview"><span class="secno">6.1. </span><span
                class="content">Overview</span><a class="self-link" href="#auto-vt-name-overview"></a></h3>
        <p><em>This section is non-normative.</em></p>
        <p>For an element to participate in a view transition, it needs to receive a unique <a class="property css"
                data-link-type="property"
                href="https://www.w3.org/TR/css-view-transitions-1/#propdef-view-transition-name"
                id="ref-for-propdef-view-transition-name⑦">view-transition-name</a>.
            This can be tedious and verbose when multiple elements are involved in the same view transition, especially
            in cases where many of those are same-element transitions,
            as in, the element has the same <span class="property"
                id="ref-for-propdef-view-transition-name⑧">view-transition-name</span> in the old and new state.</p>
        <p>To make this easier, setting the <a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-view-transitions-1/#propdef-view-transition-name"
                id="ref-for-propdef-view-transition-name⑨">view-transition-name</a> to <span class="css">auto</span>
            would generate a <span class="property"
                id="ref-for-propdef-view-transition-name①⓪">view-transition-name</span> for the element, or take it from
            the element’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-id"
                id="ref-for-concept-id">id</a> if present.</p>
        <h3 class="heading settled" data-level="6.2" id="auto-vt-name-example"><span class="secno">6.2. </span><span
                class="content">Examples</span><a class="self-link" href="#auto-vt-name-example"></a></h3>
        <div class="example" id="example-0256bb72">
            <a class="self-link" href="#example-0256bb72"></a> In this example, view transition is used to sort a list
            in an animated way:
            <pre class="language-html highlight"><c- p>&lt;</c-><c- f>ul</c-><c- p>></c->
	<c- p>&lt;</c-><c- f>li</c-><c- p>></c->Item 1<c- p>&lt;/</c-><c- f>li</c-><c- p>></c->
	<c- p>&lt;</c-><c- f>li</c-><c- p>></c->Item 2<c- p>&lt;/</c-><c- f>li</c-><c- p>></c->
	<c- p>&lt;</c-><c- f>li</c-><c- p>></c->Item 3<c- p>&lt;/</c-><c- f>li</c-><c- p>></c->
	<c- p>&lt;</c-><c- f>li</c-><c- p>></c->Item 4<c- p>&lt;/</c-><c- f>li</c-><c- p>></c->
	...
<c- p>&lt;/</c-><c- f>ul</c-><c- p>></c->
</pre>
            <p>Ordinarily, each of these items would have to receive a unique <a class="property css"
                    data-link-type="property"
                    href="https://www.w3.org/TR/css-view-transitions-1/#propdef-view-transition-name"
                    id="ref-for-propdef-view-transition-name①①">view-transition-name</a>:</p>
            <pre class="language-css highlight"><c- k>li</c-><c- p>:</c-><c- nf>nth-child</c-><c- p>(</c-><c- m>1</c-><c- p>)</c-> <c- p>{</c-> <c- k>view-transition-name</c-><c- p>:</c-> item1<c- p>;</c-> <c- p>}</c->
li<c- nf>:nth-child</c-><c- p>(</c-><c- m>2</c-><c- p>)</c-> <c- p>{</c-> <c- k>view-transition-name</c-><c- p>:</c-> item1<c- p>;</c-> <c- p>}</c->
li<c- nf>:nth-child</c-><c- p>(</c-><c- m>3</c-><c- p>)</c-> <c- p>{</c-> <c- k>view-transition-name</c-><c- p>:</c-> item1<c- p>;</c-> <c- p>}</c->
li<c- nf>:nth-child</c-><c- p>(</c-><c- m>4</c-><c- p>)</c-> <c- p>{</c-> <c- k>view-transition-name</c-><c- p>:</c-> item1<c- p>;</c-> <c- p>}</c->
...
</pre>
            <p>With <span class="css">auto</span>, this CSS would work:</p>
            <pre class="language-css highlight">li <c- p>{</c->
	<c- k>view-transition-name</c-><c- p>:</c-> auto<c- p>;</c->
<c- p>}</c->
</pre>
        </div>
        <h3 class="heading settled" data-level="6.3" id="additions-to-vt-name"><span class="secno">6.3. </span><span
                class="content">Additions to <a class="property css" data-link-type="property"
                    href="https://www.w3.org/TR/css-view-transitions-1/#propdef-view-transition-name"
                    id="ref-for-propdef-view-transition-name①②">view-transition-name</a></span><a class="self-link"
                href="#additions-to-vt-name"></a></h3>
        <p>In addition to the existing values, the <a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-view-transitions-1/#propdef-view-transition-name"
                id="ref-for-propdef-view-transition-name①③">view-transition-name</a> also accepts an <dfn
                data-dfn-for="view-transition-name" data-dfn-type="dfn" data-export
                id="view-transition-name-auto">auto<a class="self-link" href="#view-transition-name-auto"></a></dfn>
            keyword.
            To resolve the <a data-link-type="dfn" href="https://www.w3.org/TR/css-cascade-5/#used-value"
                id="ref-for-used-value">used value</a> of <span class="property"
                id="ref-for-propdef-view-transition-name①④">view-transition-name</span> for <var>element</var>:</p>
        <ol>
            <li data-md>
                <p>Let <var>computed</var> be the <a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-cascade-5/#computed-value" id="ref-for-computed-value">computed
                        value</a> of <a class="property css" data-link-type="property"
                        href="https://www.w3.org/TR/css-view-transitions-1/#propdef-view-transition-name"
                        id="ref-for-propdef-view-transition-name①⑤">view-transition-name</a>.</p>
            <li data-md>
                <p>If <var>computed</var> is <span class="css">none</span>, return null.</p>
            <li data-md>
                <p>If <var>computed</var> is a <a class="production css" data-link-type="type"
                        href="https://www.w3.org/TR/css-values-4/#identifier-value"
                        id="ref-for-identifier-value①③">&lt;custom-ident></a>, return <var>computed</var>.</p>
            <li data-md>
                <p class="assertion">Assert: <var>computed</var> is <span class="css">auto</span>.</p>
            <li data-md>
                <p>If <var>element</var> has an associated <a data-link-type="dfn"
                        href="https://dom.spec.whatwg.org/#concept-id" id="ref-for-concept-id①">id</a>, and
                    <var>computed</var> is associated with the same <a data-link-type="dfn"
                        href="https://dom.spec.whatwg.org/#concept-tree-root" id="ref-for-concept-tree-root">root</a> as
                    <var>element</var>’s <span id="ref-for-concept-tree-root①">root</span>, then return the value of
                    <var>element</var>’s <span id="ref-for-concept-id②">id</span>.
                </p>
                <p class="note" role="note"><span class="marker">Note:</span> this means that a <a class="css"
                        data-link-type="maybe" href="https://www.w3.org/TR/css-shadow-parts-1/#selectordef-part"
                        id="ref-for-selectordef-part">::part()</a> pseudo-element wouldn’t resolve to its matching
                    element’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-id"
                        id="ref-for-concept-id③">id</a>.</p>
            <li data-md>
                <p>Return a unique string. The string should remain consistent and unique for this element and <code
                        class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document①②">Document</a></code>,
                    at least for the lifetime of <var>element</var>’s <a data-link-type="dfn"
                        href="https://dom.spec.whatwg.org/#concept-node-document"
                        id="ref-for-concept-node-document②">node document</a>'s <a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-view-transitions-1/#document-active-view-transition"
                        id="ref-for-document-active-view-transition⑧">active view transition</a>.</p>
                <p class="note" role="note"><span class="marker">Note:</span> this string is not web-observable, and is
                    used for addressing the element in internal algorithms.</p>
                <p class="note" role="note"><span class="marker">Note:</span> When used in a cross-document view
                    transition, generated <span class="css">auto</span> values never match, resulting in separate <a
                        class="css" data-link-type="maybe"
                        href="https://www.w3.org/TR/css-view-transitions-1/#selectordef-view-transition-group"
                        id="ref-for-selectordef-view-transition-group①">::view-transition-group()</a> pseudo-elements,
                    one exiting and one entering.</p>
        </ol>
        <p>A <a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-view-transitions-1/#propdef-view-transition-name"
                id="ref-for-propdef-view-transition-name①⑥">view-transition-name</a> generated by <span
                class="css">auto</span> is a <a data-link-type="dfn"
                href="https://drafts.csswg.org/css-scoping-1/#css-tree-scoped-name"
                id="ref-for-css-tree-scoped-name①">tree-scoped name</a>.</p>
        <h2 class="heading settled" data-level="7" id="nested-view-transitions"><span class="secno">7. </span><span
                class="content">Nested view-transitions</span><a class="self-link" href="#nested-view-transitions"></a>
        </h2>
        <h3 class="heading settled" data-level="7.1" id="nested-overview"><span class="secno">7.1. </span><span
                class="content">Overview</span><a class="self-link" href="#nested-overview"></a></h3>
        <p><em>This section is non-normative.</em></p>
        <p>By default, setting <code>view-transition-name</code> on multiple elements generates a flat <a
                data-link-type="dfn" href="https://www.w3.org/TR/css-view-transitions-1/#view-transition-tree"
                id="ref-for-view-transition-tree">view transition tree</a>, where all the <a class="css"
                data-link-type="maybe"
                href="https://www.w3.org/TR/css-view-transitions-1/#selectordef-view-transition-group"
                id="ref-for-selectordef-view-transition-group②">::view-transition-group()</a> pseudo-elements are
            children of the <a class="css" data-link-type="maybe"
                href="https://www.w3.org/TR/css-view-transitions-1/#selectordef-view-transition"
                id="ref-for-selectordef-view-transition">::view-transition</a> pseudo-element.
            This is sufficient for many simple use-cases, but there are some styling use-cases that cannot be achieved
            with a flat tree.
            The most prominent use-case is clipping: with a flat tree, all pseudo-elements are clipped to the <a
                data-link-type="dfn" href="https://www.w3.org/TR/css-view-transitions-1/#snapshot-containing-block"
                id="ref-for-snapshot-containing-block">snapshot containing block</a>, so clipping elements in the normal
            tree would lose their clipping during the view-transition, resulting in a broken visual effect.
            The effects that have can have an unexpected visual effect in a flat tree:</p>
        <ul>
            <li data-md>
                <p>Clipping (<a class="property css" data-link-type="property"
                        href="https://www.w3.org/TR/css-overflow-3/#propdef-overflow"
                        id="ref-for-propdef-overflow">overflow</a>, <a class="property css" data-link-type="property"
                        href="https://www.w3.org/TR/css-masking-1/#propdef-clip-path"
                        id="ref-for-propdef-clip-path">clip-path</a>, <a class="property css" data-link-type="property"
                        href="https://drafts.csswg.org/css-borders-4/#propdef-border-radius"
                        id="ref-for-propdef-border-radius">border-radius</a>): clipping affects the children of the
                    element.</p>
            <li data-md>
                <p><a class="property css" data-link-type="property"
                        href="https://www.w3.org/TR/css-color-4/#propdef-opacity"
                        id="ref-for-propdef-opacity">opacity</a>, <a class="property css" data-link-type="property"
                        href="https://www.w3.org/TR/css-masking-1/#propdef-mask-image"
                        id="ref-for-propdef-mask-image">mask-image</a> and <a class="property css"
                        data-link-type="property" href="https://www.w3.org/TR/filter-effects-1/#propdef-filter"
                        id="ref-for-propdef-filter">filter</a>: These effects that are designed to work on a fully
                    rasterized image of a tree, rather than on each item individually.</p>
            <li data-md>
                <p>3D transforms (<a class="property css" data-link-type="property"
                        href="https://www.w3.org/TR/css-transforms-2/#propdef-transform-style"
                        id="ref-for-propdef-transform-style">transform-style</a>, <a class="property css"
                        data-link-type="property" href="https://www.w3.org/TR/css-transforms-1/#propdef-transform"
                        id="ref-for-propdef-transform">transform</a>, <a class="property css" data-link-type="property"
                        href="https://www.w3.org/TR/css-transforms-2/#propdef-perspective"
                        id="ref-for-propdef-perspective">perspective</a>): to display the full range of 3D transform
                    animations, some hierarchy needs to be kept.</p>
        </ul>
        <p>To enable these use cases, this specification introduces the concept of nesting view-transition
            pseudo-elements. By using the <a class="property css" data-link-type="property"
                href="#propdef-view-transition-group"
                id="ref-for-propdef-view-transition-group">view-transition-group</a> CSS property,
            the author can assign a "parent group" for a generated <a class="css" data-link-type="maybe"
                href="https://www.w3.org/TR/css-view-transitions-1/#selectordef-view-transition-group"
                id="ref-for-selectordef-view-transition-group③">::view-transition-group()</a> pseudo-element, creating a
            hierarchy in the <a data-link-type="dfn"
                href="https://www.w3.org/TR/css-view-transitions-1/#view-transition-tree"
                id="ref-for-view-transition-tree①">view transition tree</a>.</p>
        <h3 class="heading settled" data-level="7.2" id="nested-vt-example"><span class="secno">7.2. </span><span
                class="content">Examples</span><a class="self-link" href="#nested-vt-example"></a></h3>
        <div class="example" id="example-5cc76d5d">
            <a class="self-link" href="#example-5cc76d5d"></a> This example creates a transition where the <a
                data-link-type="dfn" href="https://www.w3.org/TR/css-view-transitions-1/#view-transition-tree"
                id="ref-for-view-transition-tree②">view transition tree</a> is nested instead of flat:
            <pre class="language-html highlight"><c- p>&lt;</c-><c- f>section</c-> <c- e>class</c-><c- o>=</c-><c- s>"container"</c-><c- p>></c->
	<c- p>&lt;</c-><c- f>article</c-><c- p>></c->Content<c- p>&lt;/</c-><c- f>article</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>section</c-><c- p>></c->
</pre>
            <pre class="language-css highlight">.container <c- p>{</c->
	<c- k>view-transition-name</c-><c- p>:</c-> container<c- p>;</c->
<c- p>}</c->

.container<c- p>,</c->
:<c- nf>:view-transition-group</c-><c- p>(</c->container<c- p>)</c-> <c- p>{</c->
	<c- k>clip-path</c-><c- p>:</c-> <c- nf>circle</c-><c- p>();</c->
<c- p>}</c->

article <c- p>{</c->
	<c- k>view-transition-name</c-><c- p>:</c-> article<c- p>;</c->
	<c- k>view-transition-group</c-><c- p>:</c-> container<c- p>;</c->
<c- p>}</c->
</pre>
            <p>By applying the <span class="css">clip-path</span> to both the containing element and its generated
                pseudo-element, we preserve the clip during the transition,
                and by applying <span class="css">view-transition-group</span> to the internal element referencing the
                container, we make the tree "nested" in a way that would apply this clipping.</p>
        </div>
    </main>
    <h3 class="heading settled" data-level="7.3" id="view-transition-group-prop"><span class="secno">7.3. </span><span
            class="content">The <a class="property css" data-link-type="property" href="#propdef-view-transition-group"
                id="ref-for-propdef-view-transition-group①">view-transition-group</a> property</span><a
            class="self-link" href="#view-transition-group-prop"></a></h3>
    <table class="def propdef" data-link-for-hint="view-transition-group">
        <tbody>
            <tr>
                <th>Name:
                <td><dfn class="dfn-paneled css" data-dfn-type="property" data-export
                        id="propdef-view-transition-group">view-transition-group</dfn>
            <tr class="value">
                <th><a href="https://www.w3.org/TR/css-values/#value-defs">Value:</a>
                <td class="prod">normal <a data-link-type="grammar" href="https://www.w3.org/TR/css-values-4/#comb-one"
                        id="ref-for-comb-one④">|</a> contain <span id="ref-for-comb-one⑤">|</span> nearest <span
                        id="ref-for-comb-one⑥">|</span> <a class="production css" data-link-type="type"
                        href="https://www.w3.org/TR/css-values-4/#identifier-value"
                        id="ref-for-identifier-value①④">&lt;custom-ident></a>
            <tr>
                <th><a href="https://www.w3.org/TR/css-cascade/#initial-values">Initial:</a>
                <td>normal
            <tr>
                <th><a href="https://www.w3.org/TR/css-cascade/#applies-to">Applies to:</a>
                <td><a href="https://www.w3.org/TR/css-pseudo/#generated-content"
                        title="Includes ::before and ::after pseudo-elements.">all elements</a>
            <tr>
                <th><a href="https://www.w3.org/TR/css-cascade/#inherited-property">Inherited:</a>
                <td>no
            <tr>
                <th><a href="https://www.w3.org/TR/css-values/#percentages">Percentages:</a>
                <td>n/a
            <tr>
                <th><a href="https://www.w3.org/TR/css-cascade/#computed">Computed value:</a>
                <td>as specified
            <tr>
                <th><a href="https://www.w3.org/TR/cssom/#serializing-css-values">Canonical order:</a>
                <td>per grammar
            <tr>
                <th><a href="https://www.w3.org/TR/web-animations/#animation-type">Animation type:</a>
                <td>discrete
    </table>
    <p>The <a class="property css" data-link-type="property" href="#propdef-view-transition-group"
            id="ref-for-propdef-view-transition-group②">view-transition-group</a> property can be used in conjuction
        with <a class="property css" data-link-type="property"
            href="https://www.w3.org/TR/css-view-transitions-1/#propdef-view-transition-name"
            id="ref-for-propdef-view-transition-name①⑦">view-transition-name</a> to generate a hierarchy of <a
            data-link-type="dfn"
            href="https://www.w3.org/TR/css-view-transitions-1/#named-view-transition-pseudo-elements"
            id="ref-for-named-view-transition-pseudo-elements⑧">named view transition pseudo-element</a>.</p>
    <p>The <a data-link-type="dfn" href="https://www.w3.org/TR/css-cascade-5/#used-value" id="ref-for-used-value①">used
            value</a> for <a class="property css" data-link-type="property" href="#propdef-view-transition-group"
            id="ref-for-propdef-view-transition-group③">view-transition-group</a> resolves to a <a class="property css"
            data-link-type="property" href="https://www.w3.org/TR/css-view-transitions-1/#propdef-view-transition-name"
            id="ref-for-propdef-view-transition-name①⑧">view-transition-name</a> in its ancestor chain, or to <a
            class="css" data-link-type="maybe"
            href="https://www.w3.org/TR/css-view-transitions-1/#valdef-view-transition-name-none"
            id="ref-for-valdef-view-transition-name-none">none</a>. When generating the <a data-link-type="dfn"
            href="https://www.w3.org/TR/css-view-transitions-1/#named-view-transition-pseudo-elements"
            id="ref-for-named-view-transition-pseudo-elements⑨">named view transition pseudo-element</a>, the <a
            class="css" data-link-type="maybe"
            href="https://www.w3.org/TR/css-view-transitions-1/#selectordef-view-transition-group"
            id="ref-for-selectordef-view-transition-group④">::view-transition-group()</a> with that name
        would be the parent of the <span class="css"
            id="ref-for-selectordef-view-transition-group⑤">::view-transition-group()</span> generated for this
        element’s <span class="property" id="ref-for-propdef-view-transition-name①⑨">view-transition-name</span>.</p>
    <h2 class="heading settled" data-level="8" id="layered-capture"><span class="secno">8. </span><span
            class="content">Layered capture</span><a class="self-link" href="#layered-capture"></a></h2>
    <h3 class="heading settled" data-level="8.1" id="layered-capture-overview"><span class="secno">8.1. </span><span
            class="content">Overview</span><a class="self-link" href="#layered-capture-overview"></a></h3>
    <p><em>This section is non-normative.</em></p>
    <p>In <a data-link-type="biblio" href="#biblio-css-view-transitions-1"
            title="CSS View Transitions Module Level 1">[css-view-transitions-1]</a>, the old and new states are
        captured as snapshots, and the initial and final geometry are captured,
        creating a crossfade animation by default. This is a simple model and mostly creates the desired outcome.</p>
    <p>However, crossfading two flattened snapshots is not always the most expressive animation. CSS allows animating
        borders, gradient backgrounds, <a class="property css" data-link-type="property"
            href="https://www.w3.org/TR/filter-effects-1/#propdef-filter" id="ref-for-propdef-filter①">filter</a>, <a
            class="property css" data-link-type="property"
            href="https://drafts.csswg.org/css-borders-4/#propdef-box-shadow"
            id="ref-for-propdef-box-shadow">box-shadow</a> etc.
        which can feel more expressive and natural than crossfade depending on the desired UX.</p>
    <p>In addition, when using <a href="#nested-view-transitions">nested view transitions</a>, some of the animations
        could look "wrong" when the CSS properties are flattened to a snapshot.
        This includes tree effects, such as <a class="property css" data-link-type="property"
            href="https://www.w3.org/TR/css-color-4/#propdef-opacity" id="ref-for-propdef-opacity①">opacity</a>, <a
            class="property css" data-link-type="property" href="https://www.w3.org/TR/css-masking-1/#propdef-mask"
            id="ref-for-propdef-mask">mask</a>, <a class="property css" data-link-type="property"
            href="https://www.w3.org/TR/css-masking-1/#propdef-clip-path" id="ref-for-propdef-clip-path①">clip-path</a>
        and <a class="property css" data-link-type="property"
            href="https://www.w3.org/TR/filter-effects-1/#propdef-filter" id="ref-for-propdef-filter②">filter</a>, and
        also clipping using <a class="property css" data-link-type="property"
            href="https://www.w3.org/TR/css-overflow-3/#propdef-overflow" id="ref-for-propdef-overflow①">overflow</a>.
        These effects are designed to apply to the whole tree of elements, not just to one element and its content.</p>
    <p>With layered capture, all the CSS properties that affect the entire tree, as well as box decorations, are
        captured as style and animate as part of the group.</p>
    <p class="issue" id="issue-93264331"><a class="self-link" href="#issue-93264331"></a> should this behavior be an
        opt-in/opt-out with a CSS property? See <a href="https://github.com/w3c/csswg-drafts/issues/11078">issue
            11078</a>.</p>
    <h3 class="heading settled" data-level="8.2" id="layered-captured-css-properties"><span class="secno">8.2.
        </span><span class="content">Table of captured CSS properties {#layered-captured-css-properties}</span><a
            class="self-link" href="#layered-captured-css-properties"></a></h3>
    <p>The following list of <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
            id="layered-capture-properties">layered capture properties</dfn> defines the CSS properties that participate
        in layered capture.
        When the old or new state of the element are captured, these properties are captured as style, and the user
        agent must render the snapshot
        with disregard to that property:</p>
    <ul>
        <li data-md>
            <p><a class="property css" data-link-type="property"
                    href="https://www.w3.org/TR/css-backgrounds-3/#propdef-background"
                    id="ref-for-propdef-background">background</a></p>
        <li data-md>
            <p><a class="property css" data-link-type="property"
                    href="https://drafts.csswg.org/css-borders-4/#propdef-border-left"
                    id="ref-for-propdef-border-left">border-left</a></p>
        <li data-md>
            <p><a class="property css" data-link-type="property"
                    href="https://drafts.csswg.org/css-borders-4/#propdef-border-top"
                    id="ref-for-propdef-border-top">border-top</a></p>
        <li data-md>
            <p><a class="property css" data-link-type="property"
                    href="https://drafts.csswg.org/css-borders-4/#propdef-border-bottom"
                    id="ref-for-propdef-border-bottom">border-bottom</a></p>
        <li data-md>
            <p><a class="property css" data-link-type="property"
                    href="https://drafts.csswg.org/css-borders-4/#propdef-border-right"
                    id="ref-for-propdef-border-right">border-right</a></p>
        <li data-md>
            <p><a class="property css" data-link-type="property"
                    href="https://drafts.csswg.org/css-borders-4/#propdef-border-radius"
                    id="ref-for-propdef-border-radius①">border-radius</a></p>
        <li data-md>
            <p><a class="property css" data-link-type="property"
                    href="https://www.w3.org/TR/css-backgrounds-3/#propdef-border-image"
                    id="ref-for-propdef-border-image">border-image</a></p>
        <li data-md>
            <p><a class="property css" data-link-type="property"
                    href="https://drafts.csswg.org/css-borders-4/#propdef-box-shadow"
                    id="ref-for-propdef-box-shadow①">box-shadow</a></p>
        <li data-md>
            <p><a class="property css" data-link-type="property"
                    href="https://www.w3.org/TR/css-sizing-3/#propdef-box-sizing"
                    id="ref-for-propdef-box-sizing">box-sizing</a></p>
        <li data-md>
            <p><a class="property css" data-link-type="property"
                    href="https://www.w3.org/TR/css-masking-1/#propdef-clip-path"
                    id="ref-for-propdef-clip-path②">clip-path</a></p>
        <li data-md>
            <p><a class="property css" data-link-type="property"
                    href="https://www.w3.org/TR/filter-effects-1/#propdef-filter"
                    id="ref-for-propdef-filter③">filter</a></p>
        <li data-md>
            <p><a class="property css" data-link-type="property"
                    href="https://www.w3.org/TR/css-masking-1/#propdef-mask" id="ref-for-propdef-mask①">mask</a></p>
        <li data-md>
            <p><a class="property css" data-link-type="property"
                    href="https://www.w3.org/TR/css-color-4/#propdef-opacity" id="ref-for-propdef-opacity②">opacity</a>
            </p>
        <li data-md>
            <p><a class="property css" data-link-type="property" href="https://www.w3.org/TR/css-ui-4/#propdef-outline"
                    id="ref-for-propdef-outline">outline</a></p>
        <li data-md>
            <p><a class="property css" data-link-type="property" href="https://www.w3.org/TR/css-box-4/#propdef-padding"
                    id="ref-for-propdef-padding">padding</a></p>
    </ul>
    <h2 class="heading settled" data-level="9" id="algorithms"><span class="secno">9. </span><span
            class="content">Algorithms</span><a class="self-link" href="#algorithms"></a></h2>
    <h3 class="heading settled" data-level="9.1" id="cross-doc-data-structures"><span class="secno">9.1. </span><span
            class="content">Data structures</span><a class="self-link" href="#cross-doc-data-structures"></a></h3>
    <h4 class="heading settled" data-level="9.1.1" id="cross-doc-data-structure-document"><span class="secno">9.1.1.
        </span><span class="content">Additions to <code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document①③">Document</a></code></span><a
            class="self-link" href="#cross-doc-data-structure-document"></a></h4>
    A <code
        class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document①④">Document</a></code>
    additionaly has:
    <dl>
        <dt data-md><dfn class="dfn-paneled" data-dfn-for="document" data-dfn-type="dfn" data-noexport
                id="document-inbound-view-transition-params">inbound view transition params</dfn>
        <dd data-md>
            <p>a <a data-link-type="dfn" href="#view-transition-params" id="ref-for-view-transition-params">view
                    transition params</a>, or null.
                Initially null.</p>
        <dt data-md><dfn class="dfn-paneled" data-dfn-for="document" data-dfn-type="dfn" data-noexport
                id="document-can-initiate-outbound-view-transition">can initiate outbound view transition</dfn>
        <dd data-md>
            <p>a boolean.
                Initially false.</p>
            <p class="note" role="note"><span class="marker">Note:</span> this value can be read <a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel"
                    id="ref-for-in-parallel①">in parallel</a> while navigating.</p>
    </dl>
    <h4 class="heading settled" data-level="9.1.2" id="cross-doc-data-structure-vt"><span class="secno">9.1.2.
        </span><span class="content">Additions to <code
                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition" id="ref-for-viewtransition①③">ViewTransition</a></code></span><a
            class="self-link" href="#cross-doc-data-structure-vt"></a></h4>
    A <code
        class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition" id="ref-for-viewtransition①④">ViewTransition</a></code>
    additionally has:
    <dl>
        <dt data-md><dfn class="dfn-paneled" data-dfn-for="ViewTransition" data-dfn-type="dfn" data-noexport
                id="viewtransition-active-types">active types</dfn>
        <dd data-md>
            <p>A <code
                    class="idl"><a data-link-type="idl" href="#viewtransitiontypeset" id="ref-for-viewtransitiontypeset③">ViewTransitionTypeSet</a></code>,
                initially empty.</p>
        <dt data-md><dfn class="dfn-paneled" data-dfn-for="ViewTransition" data-dfn-type="dfn" data-noexport
                id="viewtransition-outbound-post-capture-steps">outbound post-capture steps</dfn>
        <dd data-md>
            <p>Null or a set of steps, initially null.</p>
    </dl>
    <h4 class="heading settled" data-level="9.1.3" id="cross-doc-data-structure-serialization"><span
            class="secno">9.1.3. </span><span class="content">Serializable <a data-link-type="dfn"
                href="#view-transition-params" id="ref-for-view-transition-params①">view transition params</a></span><a
            class="self-link" href="#cross-doc-data-structure-serialization"></a></h4>
    A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="view-transition-params">view transition
        params</dfn> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#struct"
        id="ref-for-struct">struct</a> whose purpose is to serialize view transition information across documents.
    It has the following <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#struct-item"
        id="ref-for-struct-item">items</a>:
    <dl>
        <dt data-md><dfn class="dfn-paneled" data-dfn-for="view transition params" data-dfn-type="dfn" data-noexport
                id="view-transition-params-named-elements">named elements</dfn>
        <dd data-md>
            <p>a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map"
                    id="ref-for-ordered-map">map</a>, whose keys are strings and whose values are <a
                    data-link-type="dfn" href="https://www.w3.org/TR/css-view-transitions-1/#captured-element"
                    id="ref-for-captured-element①">captured elements</a>.</p>
        <dt data-md><dfn class="dfn-paneled" data-dfn-for="view transition params" data-dfn-type="dfn" data-noexport
                id="view-transition-params-initial-snapshot-containing-block-size">initial snapshot containing block
                size</dfn>
        <dd data-md>
            <p>a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#tuple" id="ref-for-tuple">tuple</a> of two
                numbers (width and height).</p>
    </dl>
    <h3 class="heading settled" data-level="9.2" id="page-visibility-change-steps-additions"><span class="secno">9.2.
        </span><span class="content">Additions to the view transition page-visibility change steps</span><a
            class="self-link" href="#page-visibility-change-steps-additions"></a></h3>
    <div class="algorithm" data-algorithm="visibility change step additions">
        The next steps are appended to the tasks <a data-link-type="dfn"
            href="https://drafts.csswg.org/css-view-transitions-1/#view-transition-page-visibility-change-steps"
            id="ref-for-view-transition-page-visibility-change-steps">view transition page-visibility change steps</a>
        given <var>document</var>, after the current steps in the queued task:
        <ol>
            <li data-md>
                <p>Set <var>document</var>’s <a data-link-type="dfn" href="#document-inbound-view-transition-params"
                        id="ref-for-document-inbound-view-transition-params">inbound view transition params</a> to null.
                </p>
        </ol>
        <p class="note" role="note"><span class="marker">Note:</span> this is called from the HTML spec.</p>
    </div>
    <h4 class="heading settled" data-level="9.2.1" id="capture-classes-data-structure"><span class="secno">9.2.1.
        </span><span class="content">Captured elements extension</span><a class="self-link"
            href="#capture-classes-data-structure"></a></h4>
    The <a data-link-type="dfn" href="https://www.w3.org/TR/css-view-transitions-1/#captured-element"
        id="ref-for-captured-element②">captured element</a> struct should contain these fields, in addition to the
    existing ones:
    <dl>
        <dt data-md><dfn class="dfn-paneled" data-dfn-for="captured element" data-dfn-type="dfn" data-noexport
                id="captured-element-class-list">class list</dfn>
        <dd data-md>
            <p>a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list①">list</a> of
                strings, initially empty.</p>
        <dt data-md><dfn class="dfn-paneled" data-dfn-for="captured element" data-dfn-type="dfn" data-noexport
                id="captured-element-containing-group-name">containing group name</dfn>
        <dd data-md>
            <p>Null or a string, initially null.</p>
        <dt data-md><dfn class="dfn-paneled" data-dfn-for="captured element" data-dfn-type="dfn" data-noexport
                id="captured-element-old-layered-capture-style">old layered-capture style</dfn>
        <dd data-md>
            <p>A string.</p>
        <dt data-md><dfn class="dfn-paneled" data-dfn-for="captured element" data-dfn-type="dfn" data-noexport
                id="captured-element-transform-from-snapshot-containing-block">transform from snapshot containing
                block</dfn>
        <dd data-md>
            <p>A <a data-link-type="dfn" href="https://www.w3.org/TR/geometry-1/#matrix" id="ref-for-matrix">matrix</a>,
                initially the <a data-link-type="dfn"
                    href="https://www.w3.org/TR/css-transforms-1/#identity-transform-function"
                    id="ref-for-identity-transform-function">identity transform function</a>.</p>
        <dt data-md><dfn class="dfn-paneled" data-dfn-for="captured element" data-dfn-type="dfn" data-noexport
                id="captured-element-old-box-properties">old box properties</dfn>
        <dt data-md><dfn class="dfn-paneled" data-dfn-for="captured element" data-dfn-type="dfn" data-noexport
                id="captured-element-new-box-properties">new box properties</dfn>
        <dd data-md>
            <p>A <a data-link-type="dfn" href="#layered-box-properties" id="ref-for-layered-box-properties">layered box
                    properties</a> or null, initially null.</p>
    </dl>
    <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="layered-box-properties">layered box
            properties</dfn> is a struct, containing the following fields:</p>
    <dl>
        <dt data-md><dfn class="dfn-paneled" data-dfn-for="layered box properties" data-dfn-type="dfn" data-noexport
                id="layered-box-properties-box-sizing">box sizing</dfn>
        <dd data-md>
            <p><a class="css" data-link-type="maybe"
                    href="https://www.w3.org/TR/css-sizing-3/#valdef-box-sizing-border-box"
                    id="ref-for-valdef-box-sizing-border-box">border-box</a> or <a class="css" data-link-type="maybe"
                    href="https://www.w3.org/TR/css-sizing-3/#valdef-box-sizing-content-box"
                    id="ref-for-valdef-box-sizing-content-box">content-box</a>.</p>
        <dt data-md><dfn class="dfn-paneled" data-dfn-for="layered box properties" data-dfn-type="dfn" data-noexport
                id="layered-box-properties-content-box">content box</dfn>
        <dt data-md><dfn class="dfn-paneled" data-dfn-for="layered box properties" data-dfn-type="dfn" data-noexport
                id="layered-box-properties-padding-box">padding box</dfn>
        <dd data-md>
            <p>A rectangle, in CSS pixel units, relative to the border box.</p>
    </dl>
    <h3 class="heading settled" data-level="9.3" id="vt-rule-algo"><span class="secno">9.3. </span><span
            class="content">Resolving the <a class="css" data-link-type="maybe" href="#at-view-transition-rule"
                id="ref-for-at-view-transition-rule①④">@view-transition</a> rule</span><a class="self-link"
            href="#vt-rule-algo"></a></h3>
    <div class="algorithm" data-algorithm="resolve @view-transition rule">
        To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="resolve-view-transition-rule">resolve
            @view-transition rule</dfn> for a <code
            class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document①⑤">Document</a></code>
        <var>document</var>:
        <p class="note" role="note"><span class="marker">Note:</span> this is called in both the old and new document.
        </p>
        <ol>
            <li data-md>
                <p>If <var>document</var>’s <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/interaction.html#visibility-state"
                        id="ref-for-visibility-state">visibility state</a> is "<code>hidden</code>",
                    then return "<code>skip transition</code>".</p>
            <li data-md>
                <p>Let <var>matchingRule</var> be the last <a class="css" data-link-type="maybe"
                        href="#at-view-transition-rule" id="ref-for-at-view-transition-rule①⑤">@view-transition</a> rule
                    in <var>document</var>.</p>
            <li data-md>
                <p>If <var>matchingRule</var> is not found, then return "<code>skip transition</code>".</p>
            <li data-md>
                <p>If <var>matchingRule</var>’s <a data-link-type="dfn" href="#view-transition-navigation"
                        id="ref-for-view-transition-navigation②">navigation</a> descriptor’s <a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-cascade-5/#computed-value" id="ref-for-computed-value①">computed
                        value</a> is <a class="css" data-link-type="maybe"
                        href="#valdef-view-transition-navigation-none"
                        id="ref-for-valdef-view-transition-navigation-none">none</a>, then return
                    "<code>skip transition</code>".</p>
            <li data-md>
                <p class="assertion">Assert: <var>matchingRule</var>’s <a data-link-type="dfn"
                        href="#view-transition-navigation" id="ref-for-view-transition-navigation③">navigation</a>
                    descriptor’s <a data-link-type="dfn" href="https://www.w3.org/TR/css-cascade-5/#computed-value"
                        id="ref-for-computed-value②">computed value</a> is <a class="css" data-link-type="maybe"
                        href="#valdef-view-transition-navigation-auto"
                        id="ref-for-valdef-view-transition-navigation-auto①">auto</a>.</p>
            <li data-md>
                <p>Let <var>typesDescriptor</var> be <var>matchingRule</var>’s <a data-link-type="dfn"
                        href="#view-transition-types" id="ref-for-view-transition-types④">types</a> descriptor.</p>
            <li data-md>
                <p>If <var>typesDescriptor</var>’s <a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-cascade-5/#computed-value" id="ref-for-computed-value③">computed
                        value</a> is <span class="css">none</span>, then return a <a data-link-type="dfn"
                        href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set②">set</a> « ».</p>
            <li data-md>
                <p>Return a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set"
                        id="ref-for-ordered-set③">set</a> of strings corresponding to <var>typesDescriptor</var>’s <a
                        data-link-type="dfn" href="https://www.w3.org/TR/css-cascade-5/#computed-value"
                        id="ref-for-computed-value④">computed value</a>.</p>
        </ol>
    </div>
    <h3 class="heading settled" data-level="9.4" id="setup-old-document-vt"><span class="secno">9.4. </span><span
            class="content">Setting up the view transition in the old <code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document①⑥">Document</a></code></span><a
            class="self-link" href="#setup-old-document-vt"></a></h3>
    <h4 class="heading settled" data-level="9.4.1" id="check-eligibility"><span class="secno">9.4.1. </span><span
            class="content">Check eligibility for outbound cross-document view transition</span><a class="self-link"
            href="#check-eligibility"></a></h4>
    <div class="algorithm" data-algorithm="navigation can trigger a cross-document view-transition?">
        To check if a <dfn data-dfn-type="dfn" data-export
            id="navigation-can-trigger-a-cross-document-view-transition">navigation can trigger a cross-document
            view-transition?<a class="self-link"
                href="#navigation-can-trigger-a-cross-document-view-transition"></a></dfn> given
        a <code
            class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document①⑦">Document</a></code>
        <var>oldDocument</var>, a <code
            class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document①⑧">Document</a></code>
        <var>newDocument</var>, a <code
            class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#navigationtype" id="ref-for-navigationtype①">NavigationType</a></code>
        <var>navigationType</var>, and a boolean <var>isBrowserUINavigation</var>:
        <p class="note" role="note"><span class="marker">Note:</span> this is called during navigation, potentially <a
                data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel"
                id="ref-for-in-parallel②">in parallel</a>.</p>
        <ol>
            <li data-md>
                <p>If the user agent decides to display an <a data-link-type="dfn"
                        href="https://infra.spec.whatwg.org/#implementation-defined"
                        id="ref-for-implementation-defined">implementation-defined</a> navigation experience, e.g. a
                    gesture-based transition for a back navigation,
                    the user agent may ignore the author-defined view transition. If that is the case, return false.</p>
            <li data-md>
                <p>If <var>oldDocument</var>’s <a data-link-type="dfn"
                        href="#document-can-initiate-outbound-view-transition"
                        id="ref-for-document-can-initiate-outbound-view-transition">can initiate outbound view
                        transition</a> is false, then return false.</p>
            <li data-md>
                <p>If <var>navigationType</var> is <code
                        class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-navigationtype-reload" id="ref-for-dom-navigationtype-reload①">reload</a></code>,
                    then return false.</p>
            <li data-md>
                <p>If <var>oldDocument</var>’s <a data-link-type="dfn"
                        href="https://dom.spec.whatwg.org/#concept-document-origin"
                        id="ref-for-concept-document-origin">origin</a> is not <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsers.html#same-origin"
                        id="ref-for-same-origin②">same origin</a> as <var>newDocument</var>’s <span
                        id="ref-for-concept-document-origin①">origin</span>, then return false.</p>
            <li data-md>
                <p>If <var>newDocument</var> <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/dom.html#was-created-via-cross-origin-redirects"
                        id="ref-for-was-created-via-cross-origin-redirects">was created via cross-origin redirects</a>
                    and <var>newDocument</var>’s <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#latest-entry"
                        id="ref-for-latest-entry">latest entry</a> is null, then return false.</p>
                <p class="note" role="note"><span class="marker">Note:</span> A <a data-link-type="dfn"
                        href="https://dom.spec.whatwg.org/#concept-document"
                        id="ref-for-concept-document①">Document</a>'s <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#latest-entry"
                        id="ref-for-latest-entry①">latest entry</a> would be null if this is a new navigation, rather
                    than a restore from BFCache.</p>
            <li data-md>
                <p>If <var>navigationType</var> is <code
                        class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-navigationtype-traverse" id="ref-for-dom-navigationtype-traverse②">traverse</a></code>,
                    then return true.</p>
            <li data-md>
                <p>If <var>isBrowserUINavigation</var> is true, then return false.</p>
            <li data-md>
                <p>Return true.</p>
        </ol>
    </div>
    <h4 class="heading settled" data-level="9.4.2" id="setup-outbound-transition"><span class="secno">9.4.2.
        </span><span class="content">Setup the outbound transition when ready to swap pages</span><a class="self-link"
            href="#setup-outbound-transition"></a></h4>
    <div class="algorithm" data-algorithm="setup cross-document view-transition">
        To <dfn data-dfn-type="dfn" data-export id="setup-cross-document-view-transition">setup cross-document
            view-transition<a class="self-link" href="#setup-cross-document-view-transition"></a></dfn> given a <code
            class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document①⑨">Document</a></code>
        <var>oldDocument</var>,
        a <code
            class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document②⓪">Document</a></code>
        <var>newDocument</var>, and <var>proceedWithNavigation</var>, which is an algorithm accepting nothing:
        <p class="note" role="note"><span class="marker">Note:</span> This is called from the HTML spec.</p>
        <ol>
            <li data-md>
                <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert">Assert</a>:
                    These steps are running as part of a <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-task"
                        id="ref-for-concept-task">task</a> queued on <var>oldDocument</var>.</p>
            <li data-md>
                <p>If <var>oldDocument</var>’s <a data-link-type="dfn"
                        href="#document-can-initiate-outbound-view-transition"
                        id="ref-for-document-can-initiate-outbound-view-transition①">can initiate outbound view
                        transition</a> is false, then return null.</p>
            <li data-md>
                <p>Let <var>transitionTypesFromRule</var> be the result of <a data-link-type="dfn"
                        href="#resolve-view-transition-rule" id="ref-for-resolve-view-transition-rule">resolving the
                        @view-transition rule</a> for <var>oldDocument</var>.</p>
            <li data-md>
                <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert①">Assert</a>:
                    <var>transitionTypesFromRule</var> is not "<code>skip transition</code>".
                </p>
                <p class="note" role="note"><span class="marker">Note:</span> We don’t know yet if
                    <var>newDocument</var> has opted in, as it might not be parsed yet.
                    We check the opt-in for <var>newDocument</var> when we fire the <code
                        class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/indices.html#event-pagereveal" id="ref-for-event-pagereveal③">pagereveal</a></code>
                    event.
                </p>
            <li data-md>
                <p>If <var>oldDocument</var>’s <a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-view-transitions-1/#document-active-view-transition"
                        id="ref-for-document-active-view-transition⑨">active view transition</a> is not null,
                    then <a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-view-transitions-1/#skip-the-view-transition"
                        id="ref-for-skip-the-view-transition①">skip</a> <var>oldDocument</var>’s <span
                        id="ref-for-document-active-view-transition①⓪">active view transition</span> with an "<code
                        class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#aborterror" id="ref-for-aborterror">AbortError</a></code>"
                    <code
                        class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException①">DOMException</a></code>
                    in <var>oldDocument</var>’s <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm"
                        id="ref-for-concept-relevant-realm①">relevant Realm</a>.
                </p>
                <p class="note" role="note"><span class="marker">Note:</span> this means that any running transition
                    would be skipped when the document is ready
                    to unload.</p>
            <li data-md>
                <p>Let <var>outboundTransition</var> be a new <code
                        class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition" id="ref-for-viewtransition①⑤">ViewTransition</a></code>
                    object in <var>oldDocument</var>’s <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm"
                        id="ref-for-concept-relevant-realm②">relevant Realm</a>.</p>
            <li data-md>
                <p>Set <var>outboundTransition</var>’s <a data-link-type="dfn" href="#viewtransition-active-types"
                        id="ref-for-viewtransition-active-types⑦">active types</a> to
                    <var>transitionTypesFromRule</var>.
                </p>
                <p class="note" role="note"><span class="marker">Note:</span> the <a data-link-type="dfn"
                        href="#viewtransition-active-types" id="ref-for-viewtransition-active-types⑧">active types</a>
                    are not shared between documents.
                    Manipulating the <code
                        class="idl"><a data-link-type="idl" href="#dom-viewtransition-types" id="ref-for-dom-viewtransition-types⑦">types</a></code>
                    in the new document does not affect the types in <var>newDocument</var>,
                    which would be read from the <a data-link-type="dfn" href="#view-transition-types"
                        id="ref-for-view-transition-types⑤">types</a> descriptor once <var>newDocument</var> is
                    revealed.</p>
                <p class="note" role="note"><span class="marker">Note:</span> the <code
                        class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition" id="ref-for-viewtransition①⑥">ViewTransition</a></code>
                    is skipped once the old document is hidden.</p>
            <li data-md>
                <p>Set <var>outboundTransition</var>’s <a data-link-type="dfn"
                        href="#viewtransition-outbound-post-capture-steps"
                        id="ref-for-viewtransition-outbound-post-capture-steps①">outbound post-capture steps</a> to the
                    following steps given a <a data-link-type="dfn" href="#view-transition-params"
                        id="ref-for-view-transition-params②">view transition params</a>-or-null <var>params</var>:</p>
                <ol>
                    <li data-md>
                        <p>Set <var>newDocument</var>’s <a data-link-type="dfn"
                                href="#document-inbound-view-transition-params"
                                id="ref-for-document-inbound-view-transition-params①">inbound view transition params</a>
                            to <var>params</var>.</p>
                        <p class="note" role="note"><span class="marker">Note:</span> The inbound transition is
                            activated after the dispatch of <code
                                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/indices.html#event-pagereveal" id="ref-for-event-pagereveal④">pagereveal</a></code>
                            to ensure mutations made in this event apply to the captured new state.</p>
                    <li data-md>
                        <p>To skip the transition after a timeout, the user agent may perform the following steps <a
                                data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel"
                                id="ref-for-in-parallel③">in parallel</a>:</p>
                        <ol>
                            <li data-md>
                                <p>Wait for an <a data-link-type="dfn"
                                        href="https://infra.spec.whatwg.org/#implementation-defined"
                                        id="ref-for-implementation-defined①">implementation-defined</a> <a
                                        data-link-type="dfn" href="https://www.w3.org/TR/hr-time-3/#dfn-duration"
                                        id="ref-for-dfn-duration">duration</a>.</p>
                            <li data-md>
                                <p><a data-link-type="dfn"
                                        href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task"
                                        id="ref-for-queue-a-global-task">Queue a global task</a> on the <a
                                        data-link-type="dfn"
                                        href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source"
                                        id="ref-for-dom-manipulation-task-source">DOM manipulation task source</a> given
                                    <var>newDocument</var>’s <a data-link-type="dfn"
                                        href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global"
                                        id="ref-for-concept-relevant-global">relevant global object</a> to perform the
                                    following step:
                                </p>
                                <ol>
                                    <li data-md>
                                        <p>If <var>newDocument</var>’s <a data-link-type="dfn"
                                                href="#document-inbound-view-transition-params"
                                                id="ref-for-document-inbound-view-transition-params②">inbound view
                                                transition params</a> is <var>params</var>, then set
                                            <var>newDocument</var>’s <span
                                                id="ref-for-document-inbound-view-transition-params③">inbound view
                                                transition params</span> to null.
                                        </p>
                                </ol>
                        </ol>
                    <li data-md>
                        <p>Call <var>proceedWithNavigation</var>.</p>
                </ol>
            <li data-md>
                <p>Set <var>oldDocument</var>’s <a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-view-transitions-1/#document-active-view-transition"
                        id="ref-for-document-active-view-transition①①">active view transition</a> to
                    <var>outboundTransition</var>.
                </p>
                <p class="note" role="note"><span class="marker">Note:</span> The process continues in <a
                        data-link-type="dfn"
                        href="https://www.w3.org/TR/css-view-transitions-1/#perform-pending-transition-operations"
                        id="ref-for-perform-pending-transition-operations">perform pending transition operations</a>.
                </p>
            <li data-md>
                <p>The user agent should display the currently displayed frame until either:</p>
                <ul>
                    <li data-md>
                        <p>The <code
                                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/indices.html#event-pagereveal" id="ref-for-event-pagereveal⑤">pagereveal</a></code>
                            event is fired.</p>
                    <li data-md>
                        <p>its <a data-link-type="dfn"
                                href="https://www.w3.org/TR/css-view-transitions-1/#document-active-view-transition"
                                id="ref-for-document-active-view-transition①②">active view transition</a>'s <a
                                data-link-type="dfn"
                                href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition-phase"
                                id="ref-for-viewtransition-phase">phase</a> is "<code>done</code>".</p>
                </ul>
                <p class="note" role="note"><span class="marker">Note:</span> this is to ensure that there are no
                    unintended flashes between displaying the old and new state, to keep the transition smooth.</p>
            <li data-md>
                <p>Return <var>outboundTransition</var>.</p>
        </ol>
    </div>
    <h4 class="heading settled" data-level="9.4.3" id="update-opt-in"><span class="secno">9.4.3. </span><span
            class="content">Update the opt-in flag to reflect the current state</span><a class="self-link"
            href="#update-opt-in"></a></h4>
    <div class="algorithm" data-algorithm="update-opt-in-for-outbound">
        To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
            id="update-the-opt-in-state-for-outbound-transitions">update the opt-in state for outbound transitions</dfn>
        for a <code
            class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document②①">Document</a></code>
        <var>document</var>:
        <ol>
            <li data-md>
                <p>If <var>document</var> <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#has-been-revealed"
                        id="ref-for-has-been-revealed">has been revealed</a>, and the result of <a data-link-type="dfn"
                        href="#resolve-view-transition-rule" id="ref-for-resolve-view-transition-rule①">resolving the
                        @view-transition rule</a> is not "<code>skip transition</code>",
                    then set <var>document</var>’s <a data-link-type="dfn"
                        href="#document-can-initiate-outbound-view-transition"
                        id="ref-for-document-can-initiate-outbound-view-transition②">can initiate outbound view
                        transition</a> to true.</p>
            <li data-md>
                <p>Otherwise, set <var>document</var>’s <a data-link-type="dfn"
                        href="#document-can-initiate-outbound-view-transition"
                        id="ref-for-document-can-initiate-outbound-view-transition③">can initiate outbound view
                        transition</a> to false.</p>
        </ol>
    </div>
    <h4 class="heading settled" data-level="9.4.4" id="proceed-if-skipped"><span class="secno">9.4.4. </span><span
            class="content">Proceed with navigation if view transition is skipped</span><a class="self-link"
            href="#proceed-if-skipped"></a></h4>
    <div class="algorithm" data-algorithm="additional skip steps">
        Append the following steps to <a data-link-type="dfn"
            href="https://www.w3.org/TR/css-view-transitions-1/#skip-the-view-transition"
            id="ref-for-skip-the-view-transition②">skip the view transition</a> given a <code
            class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition" id="ref-for-viewtransition①⑦">ViewTransition</a></code>
        <var>transition</var>:
        <ol>
            <li data-md>
                <p>If <var>transition</var>’s <a data-link-type="dfn" href="#viewtransition-outbound-post-capture-steps"
                        id="ref-for-viewtransition-outbound-post-capture-steps②">outbound post-capture steps</a> is not
                    null, then run <var>transition</var>’s <span
                        id="ref-for-viewtransition-outbound-post-capture-steps③">outbound post-capture steps</span> with
                    null.</p>
        </ol>
        <p class="note" role="note"><span class="marker">Note:</span> This is written in a monkey-patch manner, and will
            be merged into the algorithm once the L1 spec graduates.</p>
    </div>
    <h4 class="heading settled" data-level="9.4.5" id="cross-doc-after-capture"><span class="secno">9.4.5. </span><span
            class="content">Proceed with cross-document view transition after capturing the old state</span><a
            class="self-link" href="#cross-doc-after-capture"></a></h4>
    <div class="algorithm" data-algorithm="additional transition operation">
        Prepend the following step to the <a data-link-type="dfn"
            href="https://www.w3.org/TR/css-view-transitions-1/#perform-pending-transition-operations"
            id="ref-for-perform-pending-transition-operations①">Perform pending transition operations</a> algorithm
        given a <code
            class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document②②">Document</a></code>
        <var>document</var>:
        <ol>
            <li data-md>
                <p>If <var>document</var>’s <a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-view-transitions-1/#document-active-view-transition"
                        id="ref-for-document-active-view-transition①③">active view transition</a> is not null and its <a
                        data-link-type="dfn" href="#viewtransition-outbound-post-capture-steps"
                        id="ref-for-viewtransition-outbound-post-capture-steps④">outbound post-capture steps</a> is not
                    null, then:</p>
                <ol>
                    <li data-md>
                        <p class="assertion">Assert: <var>document</var>’s <a data-link-type="dfn"
                                href="https://www.w3.org/TR/css-view-transitions-1/#document-active-view-transition"
                                id="ref-for-document-active-view-transition①④">active view transition</a>'s <a
                                data-link-type="dfn"
                                href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition-phase"
                                id="ref-for-viewtransition-phase①">phase</a> is "<code>pending-capture</code>".</p>
                    <li data-md>
                        <p>Let <var>viewTransitionParams</var> be null;</p>
                    <li data-md>
                        <p>Set <var>document</var>’s <a data-link-type="dfn"
                                href="https://www.w3.org/TR/css-view-transitions-1/#document-rendering-suppression-for-view-transitions"
                                id="ref-for-document-rendering-suppression-for-view-transitions">rendering suppression
                                for view transitions</a> to true.</p>
                        <p class="issue" id="issue-ca114a78"><a class="self-link" href="#issue-ca114a78"></a> Though <a
                                data-link-type="dfn"
                                href="https://www.w3.org/TR/css-view-transitions-1/#capture-the-old-state"
                                id="ref-for-capture-the-old-state①">capture the old state</a> appears here as a
                            synchronous step, it is in fact an asynchronous step
                            as rendering an element into an image cannot be done synchronously. This should be more
                            explicit in the L1 spec.</p>
                    <li data-md>
                        <p><a data-link-type="dfn"
                                href="https://www.w3.org/TR/css-view-transitions-1/#capture-the-old-state"
                                id="ref-for-capture-the-old-state②">Capture the old state</a> for <var>transition</var>.
                        </p>
                    <li data-md>
                        <p>If this succeeded, then set <var>viewTransitionParams</var> to a new <a data-link-type="dfn"
                                href="#view-transition-params" id="ref-for-view-transition-params③">view transition
                                params</a> whose <a data-link-type="dfn" href="#view-transition-params-named-elements"
                                id="ref-for-view-transition-params-named-elements">named elements</a> is a <a
                                data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-clone"
                                id="ref-for-map-clone">clone</a> of <var>transition</var>’s <a data-link-type="dfn"
                                href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition-named-elements"
                                id="ref-for-viewtransition-named-elements①">named elements</a>,
                            and whose <a data-link-type="dfn"
                                href="#view-transition-params-initial-snapshot-containing-block-size"
                                id="ref-for-view-transition-params-initial-snapshot-containing-block-size">initial
                                snapshot containing block size</a> is <var>transition</var>’s <a data-link-type="dfn"
                                href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition-initial-snapshot-containing-block-size"
                                id="ref-for-viewtransition-initial-snapshot-containing-block-size">initial snapshot
                                containing block size</a>.</p>
                    <li data-md>
                        <p>Set <var>document</var>’s <a data-link-type="dfn"
                                href="https://www.w3.org/TR/css-view-transitions-1/#document-rendering-suppression-for-view-transitions"
                                id="ref-for-document-rendering-suppression-for-view-transitions①">rendering suppression
                                for view transitions</a> to false.</p>
                    <li data-md>
                        <p>Call <var>transition</var>’s <a data-link-type="dfn"
                                href="#viewtransition-outbound-post-capture-steps"
                                id="ref-for-viewtransition-outbound-post-capture-steps⑤">outbound post-capture steps</a>
                            given <var>viewTransitionParams</var>.</p>
                </ol>
        </ol>
        <p class="note" role="note"><span class="marker">Note:</span> This is written in a monkey-patch manner, and will
            be merged into the algorithm once the L1 spec graduates.</p>
    </div>
    <h3 class="heading settled" data-level="9.5" id="access-view-transition-in-new-doc"><span class="secno">9.5.
        </span><span class="content">Activating the view transition in the new <code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document②③">Document</a></code></span><a
            class="self-link" href="#access-view-transition-in-new-doc"></a></h3>
    <div class="algorithm" data-algorithm="resolve inbound cross-document view-transition">
        To <dfn data-dfn-type="dfn" data-export id="resolve-inbound-cross-document-view-transition">resolve inbound
            cross-document view-transition<a class="self-link"
                href="#resolve-inbound-cross-document-view-transition"></a></dfn> for <code
            class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document②④">Document</a></code>
        <var>document</var>:
        <ol>
            <li data-md>
                <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert②">Assert</a>:
                    <var>document</var> is <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active"
                        id="ref-for-fully-active">fully active</a>.
                </p>
            <li data-md>
                <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert③">Assert</a>:
                    <var>document</var> <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#has-been-revealed"
                        id="ref-for-has-been-revealed①">has been revealed</a> is true.
                </p>
            <li data-md>
                <p><a data-link-type="dfn" href="#update-the-opt-in-state-for-outbound-transitions"
                        id="ref-for-update-the-opt-in-state-for-outbound-transitions①">Update the opt-in state for
                        outbound transitions</a> for <var>document</var>.</p>
            <li data-md>
                <p>Let <var>inboundViewTransitionParams</var> be <var>document</var>’s <a data-link-type="dfn"
                        href="#document-inbound-view-transition-params"
                        id="ref-for-document-inbound-view-transition-params④">inbound view transition params</a>.</p>
            <li data-md>
                <p>If <var>inboundViewTransitionParams</var> is null, then return null.</p>
            <li data-md>
                <p>Set <var>document</var>’s <a data-link-type="dfn" href="#document-inbound-view-transition-params"
                        id="ref-for-document-inbound-view-transition-params⑤">inbound view transition params</a> to
                    null.</p>
            <li data-md>
                <p>If <var>document</var>’s <a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-view-transitions-1/#document-active-view-transition"
                        id="ref-for-document-active-view-transition①⑤">active view transition</a> is not null, then
                    return null.</p>
                <p class="note" role="note"><span class="marker">Note:</span> this means that starting a same-document
                    transition before revealing the document would cancel a pending cross-document transition.</p>
            <li data-md>
                <p><a data-link-type="dfn" href="#resolve-view-transition-rule"
                        id="ref-for-resolve-view-transition-rule②">Resolve @view-transition rule</a> for
                    <var>document</var> and let <var>resolvedRule</var> be the result.
                </p>
            <li data-md>
                <p>If <var>resolvedRule</var> is "<code>skip transition</code>", then return null.</p>
            <li data-md>
                <p>Let <var>transition</var> be a new <code
                        class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition" id="ref-for-viewtransition①⑧">ViewTransition</a></code>
                    in <var>document</var>’s <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm"
                        id="ref-for-concept-relevant-realm③">relevant Realm</a>,
                    whose <a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition-named-elements"
                        id="ref-for-viewtransition-named-elements②">named elements</a> is
                    <var>inboundViewTransitionParams</var>’s <a data-link-type="dfn"
                        href="#view-transition-params-named-elements"
                        id="ref-for-view-transition-params-named-elements①">named elements</a>,
                    and <a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition-initial-snapshot-containing-block-size"
                        id="ref-for-viewtransition-initial-snapshot-containing-block-size①">initial snapshot containing
                        block size</a> is <var>inboundViewTransitionParams</var>’s <a data-link-type="dfn"
                        href="#view-transition-params-initial-snapshot-containing-block-size"
                        id="ref-for-view-transition-params-initial-snapshot-containing-block-size①">initial snapshot
                        containing block size</a>.
                </p>
            <li data-md>
                <p>Set <var>document</var>’s <a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-view-transitions-1/#document-active-view-transition"
                        id="ref-for-document-active-view-transition①⑥">active view transition</a> to
                    <var>transition</var>.
                </p>
            <li data-md>
                <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve"
                        id="ref-for-resolve">Resolve</a> <var>transition</var>’s <a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition-update-callback-done-promise"
                        id="ref-for-viewtransition-update-callback-done-promise">update callback done promise</a> with
                    undefined.</p>
            <li data-md>
                <p>Set <var>transition</var>’s <a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition-phase"
                        id="ref-for-viewtransition-phase②">phase</a> to "<code>update-callback-called</code>".</p>
            <li data-md>
                <p>Set <var>transition</var>’s <a data-link-type="dfn" href="#viewtransition-active-types"
                        id="ref-for-viewtransition-active-types⑨">active types</a> to <var>resolvedRule</var>.</p>
            <li data-md>
                <p>Return <var>transition</var>.</p>
        </ol>
    </div>
    <h3 class="heading settled" data-level="9.6" id="vt-class-algorithms"><span class="secno">9.6. </span><span
            class="content">Capturing the <a class="property css" data-link-type="property"
                href="#propdef-view-transition-class"
                id="ref-for-propdef-view-transition-class⑦">view-transition-class</a></span><a class="self-link"
            href="#vt-class-algorithms"></a></h3>
    <div class="algorithm" data-algorithm="additional capture steps">
        When capturing the old or new state for an element, perform the following steps given a <a data-link-type="dfn"
            href="https://www.w3.org/TR/css-view-transitions-1/#captured-element"
            id="ref-for-captured-element③">captured element</a> <var>capture</var> and an <a data-link-type="dfn"
            href="https://drafts.csswg.org/css2/#element" id="ref-for-element">element</a> <var>element</var>:
        <ol>
            <li data-md>
                <p>Set <var>capture</var>’s <a data-link-type="dfn" href="#captured-element-class-list"
                        id="ref-for-captured-element-class-list①">class list</a> to the <a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-cascade-5/#computed-value" id="ref-for-computed-value⑤">computed
                        value</a> of <var>element</var>’s <a class="property css" data-link-type="property"
                        href="#propdef-view-transition-class"
                        id="ref-for-propdef-view-transition-class⑧">view-transition-class</a>, if it is associated with
                    <var>element</var>’s <a data-link-type="dfn"
                        href="https://dom.spec.whatwg.org/#concept-node-document"
                        id="ref-for-concept-node-document③">node document</a>.
                </p>
        </ol>
        <p class="note" role="note"><span class="marker">Note:</span> This is written in a monkey-patch manner, and will
            be merged into the algorithm once the L1 spec graduates.</p>
    </div>
    <h3 class="heading settled" data-level="9.7" id="vt-group-algorithm"><span class="secno">9.7. </span><span
            class="content">Capturing and applying <a class="property css" data-link-type="property"
                href="#propdef-view-transition-group"
                id="ref-for-propdef-view-transition-group④">view-transition-group</a></span><a class="self-link"
            href="#vt-group-algorithm"></a></h3>
    <h4 class="heading settled" data-level="9.7.1" id="vt-group-value-resolve"><span class="secno">9.7.1. </span><span
            class="content">Resolving the <a class="property css" data-link-type="property"
                href="#propdef-view-transition-group"
                id="ref-for-propdef-view-transition-group⑤">view-transition-group</a> value</span><a class="self-link"
            href="#vt-group-value-resolve"></a></h4>
    <div class="algorithm" data-algorithm="resolve the document-scoped view-transition-group">
        To get the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
            id="document-scoped-view-transition-group">document-scoped view transition group</dfn> of an <code
            class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element①">Element</a></code>
        <var>element</var>, perform the following steps:
        <ol>
            <li data-md>
                <p>Let <var>computedGroup</var> be the <a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-cascade-5/#computed-value" id="ref-for-computed-value⑥">computed
                        value</a> of element’s <a class="property css" data-link-type="property"
                        href="#propdef-view-transition-group"
                        id="ref-for-propdef-view-transition-group⑥">view-transition-group</a> property.</p>
            <li data-md>
                <p>If <var>computedGroup</var> is associated with <var>element</var>’s <a data-link-type="dfn"
                        href="https://dom.spec.whatwg.org/#concept-node-document"
                        id="ref-for-concept-node-document④">node document</a>, return <var>computedGroup</var>.</p>
            <li data-md>
                <p>Return <a class="css" data-link-type="maybe" href="#valdef-view-transition-group-normal"
                        id="ref-for-valdef-view-transition-group-normal">normal</a>.</p>
        </ol>
    </div>
    <h4 class="heading settled" data-level="9.7.2" id="vt-containing-group-name-resolve"><span class="secno">9.7.2.
        </span><span class="content">Resolving the containing group name</span><a class="self-link"
            href="#vt-containing-group-name-resolve"></a></h4>
    <div class="algorithm" data-algorithm="resolve nearest containing group name">
        <p>To resolve the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="nearest-containing-group-name">nearest containing group name</dfn> of an <code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element②">Element</a></code>
            <var>element</var>, perform the following steps given a <code
                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition" id="ref-for-viewtransition①⑨">ViewTransition</a></code>
            <var>viewTransition</var>:
        </p>
        <ol>
            <li data-md>
                <p class="assertion">Assert: <var>element</var> participates in <var>viewTransition</var>.</p>
            <li data-md>
                <p>Let <var>ancestorGroup</var> be <var>element</var>’s nearest <a data-link-type="dfn"
                        href="https://drafts.csswg.org/css-scoping-1/#flat-tree" id="ref-for-flat-tree">flat tree</a> <a
                        data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-tree-ancestor"
                        id="ref-for-concept-tree-ancestor">ancestor</a> who participates in <var>viewTransition</var>
                    and whose <a data-link-type="dfn" href="#document-scoped-view-transition-group"
                        id="ref-for-document-scoped-view-transition-group">document-scoped view transition group</a> is
                    not <a class="css" data-link-type="maybe" href="#valdef-view-transition-group-normal"
                        id="ref-for-valdef-view-transition-group-normal①">normal</a>.</p>
            <li data-md>
                <p>If <var>ancestorGroup</var> exists, return <var>ancestorGroup</var>’s <a data-link-type="dfn"
                        href="https://drafts.csswg.org/css-view-transitions-1/#document-scoped-view-transition-name"
                        id="ref-for-document-scoped-view-transition-name">document-scoped view transition name</a>.</p>
            <li data-md>
                <p>Return <a class="css" data-link-type="maybe"
                        href="https://www.w3.org/TR/css-view-transitions-1/#valdef-view-transition-name-none"
                        id="ref-for-valdef-view-transition-name-none①">none</a>.</p>
        </ol>
    </div>
    <h4 class="heading settled" data-level="9.7.3" id="vt-group-name-resolve"><span class="secno">9.7.3. </span><span
            class="content">Resolving the group name</span><a class="self-link" href="#vt-group-name-resolve"></a></h4>
    <div class="algorithm" data-algorithm="resolve used group name">
        To resolve the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="used-group-name">used group
            name</dfn> of an <code
            class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element③">Element</a></code>
        <var>element</var>, perform the following steps given a <code
            class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition" id="ref-for-viewtransition②⓪">ViewTransition</a></code>
        <var>transition</var>:
        <ol>
            <li data-md>
                <p class="assertion">Assert: <var>element</var> participates in <var>transition</var>.</p>
            <li data-md>
                <p>Let <var>group</var> be <var>element</var>’s <a data-link-type="dfn"
                        href="#document-scoped-view-transition-group"
                        id="ref-for-document-scoped-view-transition-group①">document-scoped view transition group</a>.
                </p>
            <li data-md>
                <p>Let <var>containingGroupName</var> be <var>element</var>’s <a data-link-type="dfn"
                        href="#nearest-containing-group-name" id="ref-for-nearest-containing-group-name">nearest
                        containing group name</a> given <var>transition</var>.</p>
            <li data-md>
                <p>Return the first matching statement, switching on <var>group</var>:</p>
        </ol>
        <dl>
            <dt data-md><dfn class="dfn-paneled css" data-dfn-for="view-transition-group" data-dfn-type="value"
                    data-export id="valdef-view-transition-group-normal">normal</dfn>
            <dt data-md><dfn class="dfn-paneled css" data-dfn-for="view-transition-group" data-dfn-type="value"
                    data-export id="valdef-view-transition-group-contain">contain</dfn>
            <dd data-md>
                <p><var>containingGroupName</var>.</p>
                <p class="note" role="note"><span class="marker">Note:</span> an element with <a class="css"
                        data-link-type="maybe" href="#valdef-view-transition-group-contain"
                        id="ref-for-valdef-view-transition-group-contain">contain</a> becomes the <a
                        data-link-type="dfn" href="#nearest-containing-group-name"
                        id="ref-for-nearest-containing-group-name①">nearest containing group name</a> for its
                    descendants.</p>
            <dt data-md><dfn class="css" data-dfn-for="view-transition-group" data-dfn-type="value" data-export
                    id="valdef-view-transition-group-nearest">nearest<a class="self-link"
                        href="#valdef-view-transition-group-nearest"></a></dfn>
            <dd data-md>
                <p>The <a data-link-type="dfn"
                        href="https://drafts.csswg.org/css-view-transitions-1/#document-scoped-view-transition-name"
                        id="ref-for-document-scoped-view-transition-name①">document-scoped view transition name</a> of
                    the element’s nearest <a data-link-type="dfn"
                        href="https://drafts.csswg.org/css-scoping-1/#flat-tree" id="ref-for-flat-tree①">flat tree</a>
                    ancestor which participates in the <var>transition</var>.</p>
            <dt data-md><dfn class="css" data-dfn-for="view-transition-group" data-dfn-type="value" data-export
                    id="valdef-view-transition-group-custom-ident"><a class="production css" data-link-type="type"
                        href="https://www.w3.org/TR/css-values-4/#identifier-value"
                        id="ref-for-identifier-value①⑤">&lt;custom-ident></a><a class="self-link"
                        href="#valdef-view-transition-group-custom-ident"></a></dfn>
            <dd data-md>
                <p><var>group</var> if the element has a <a data-link-type="dfn"
                        href="https://drafts.csswg.org/css-scoping-1/#flat-tree" id="ref-for-flat-tree②">flat tree</a>
                    <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-tree-ancestor"
                        id="ref-for-concept-tree-ancestor①">ancestor</a> whose <a data-link-type="dfn"
                        href="https://drafts.csswg.org/css-view-transitions-1/#document-scoped-view-transition-name"
                        id="ref-for-document-scoped-view-transition-name②">document-scoped view transition name</a> is
                    <var>group</var> and participates in <var>transition</var>; Otherwise
                    <var>containingGroupName</var>.
                </p>
        </dl>
    </div>
    <h4 class="heading settled" data-level="9.7.4" id="vt-group-capture-old"><span class="secno">9.7.4. </span><span
            class="content">Compute the old <a class="property css" data-link-type="property"
                href="#propdef-view-transition-group"
                id="ref-for-propdef-view-transition-group⑦">view-transition-group</a></span><a class="self-link"
            href="#vt-group-capture-old"></a></h4>
    <div class="algorithm" data-algorithm="additional old capture steps (group)">
        When <a href="https://www.w3.org/TR/css-view-transitions-1/#capture-old-state-algorithm">capturing the old state
            for an element</a>, perform the following steps given a <a data-link-type="dfn"
            href="https://www.w3.org/TR/css-view-transitions-1/#captured-element"
            id="ref-for-captured-element④">captured element</a> <var>capturedElement</var>, a <code
            class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition" id="ref-for-viewtransition②①">ViewTransition</a></code>
        <var>transition</var>, and an <a data-link-type="dfn" href="https://drafts.csswg.org/css2/#element"
            id="ref-for-element④">element</a> <var>element</var>:
        <ol>
            <li data-md>
                <p>Set <var>capturedElement</var>’s <a data-link-type="dfn"
                        href="#captured-element-containing-group-name"
                        id="ref-for-captured-element-containing-group-name">containing group name</a> to
                    <var>element</var>’s <a data-link-type="dfn" href="#used-group-name"
                        id="ref-for-used-group-name">used group name</a> given <var>transition</var>.
                </p>
        </ol>
    </div>
    <h4 class="heading settled" data-level="9.7.5" id="vt-group-capture-new"><span class="secno">9.7.5. </span><span
            class="content">Compute the new <a class="property css" data-link-type="property"
                href="#propdef-view-transition-group"
                id="ref-for-propdef-view-transition-group⑧">view-transition-group</a></span><a class="self-link"
            href="#vt-group-capture-new"></a></h4>
    <div class="algorithm" data-algorithm="additional new capture steps (group)">
        When <a href="https://www.w3.org/TR/css-view-transitions-1/#capture-new-state-algorithm">capturing the new state
            for an element</a>, perform the following steps given a <a data-link-type="dfn"
            href="https://www.w3.org/TR/css-view-transitions-1/#captured-element"
            id="ref-for-captured-element⑤">captured element</a> <var>capturedElement</var> a <code
            class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition" id="ref-for-viewtransition②②">ViewTransition</a></code>
        <var>transition</var>, and an <a data-link-type="dfn" href="https://drafts.csswg.org/css2/#element"
            id="ref-for-element⑤">element</a> <var>element</var>:
        <ol>
            <li data-md>
                <p>Set <var>capturedElement</var>’s <a data-link-type="dfn"
                        href="#captured-element-containing-group-name"
                        id="ref-for-captured-element-containing-group-name①">containing group name</a> to
                    <var>element</var>’s <a data-link-type="dfn" href="#used-group-name"
                        id="ref-for-used-group-name①">used group name</a> given <var>transition</var>.
                </p>
        </ol>
    </div>
    <h4 class="heading settled" data-level="9.7.6" id="vt-group-reparent"><span class="secno">9.7.6. </span><span
            class="content">Reparent a <a class="css" data-link-type="maybe"
                href="https://www.w3.org/TR/css-view-transitions-1/#selectordef-view-transition-group"
                id="ref-for-selectordef-view-transition-group⑥">::view-transition-group()</a> to its specified
            containing group</span><a class="self-link" href="#vt-group-reparent"></a></h4>
    <div class="algorithm" data-algorithm="additional pseudo-element setup steps (group)">
        When <a href="https://www.w3.org/TR/css-view-transitions-1/#setup-transition-pseudo-elements-algorithm">setting
            up the transition pseudo-element</a> for a <a data-link-type="dfn"
            href="https://www.w3.org/TR/css-view-transitions-1/#captured-element"
            id="ref-for-captured-element⑥">captured element</a> <var>capturedElement</var>, given a
        <var>transitionName</var> and a <var>transition</var>:
        <ol>
            <li data-md>
                <p>Let <var>containingGroupName</var> be <var>capturedElement</var>’s <a data-link-type="dfn"
                        href="#captured-element-containing-group-name"
                        id="ref-for-captured-element-containing-group-name②">containing group name</a>.</p>
            <li data-md>
                <p>If <var>containingGroupName</var> is not null, then:</p>
                <ol>
                    <li data-md>
                        <p>Let <var>groupContainerElement</var> be <var>transition</var>’s <a data-link-type="dfn"
                                href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition-named-elements"
                                id="ref-for-viewtransition-named-elements③">named
                                elements</a>[<var>containingGroupName</var>].</p>
                    <li data-md>
                        <p>Let <var>group</var> be the <a class="css" data-link-type="maybe"
                                href="https://www.w3.org/TR/css-view-transitions-1/#selectordef-view-transition-group"
                                id="ref-for-selectordef-view-transition-group⑦">::view-transition-group()</a>,
                            whose <a data-link-type="dfn"
                                href="https://www.w3.org/TR/css-view-transitions-1/#view-transition-name"
                                id="ref-for-view-transition-name">view transition name</a> is set to
                            <var>transitionName</var>.
                        </p>
                    <li data-md>
                        <p>Let <var>parentGroup</var> be the <a class="css" data-link-type="maybe"
                                href="https://www.w3.org/TR/css-view-transitions-1/#selectordef-view-transition-group"
                                id="ref-for-selectordef-view-transition-group⑧">::view-transition-group()</a>,
                            whose <a data-link-type="dfn"
                                href="https://www.w3.org/TR/css-view-transitions-1/#view-transition-name"
                                id="ref-for-view-transition-name①">view transition name</a> is set to
                            <var>containingGroupName</var>.
                        </p>
                    <li data-md>
                        <p>Append <var>group</var> to <var>parentGroup</var>.</p>
                    <li data-md>
                        <p>When setting the animation keyframes given <var>transform</var>, <a data-link-type="dfn"
                                href="#adjust-the-nested-group-transform"
                                id="ref-for-adjust-the-nested-group-transform">adjust the nested group transform</a> to
                            <var>transform</var>, given <var>groupContainerElement</var>’s <a data-link-type="dfn"
                                href="https://www.w3.org/TR/css-view-transitions-1/#captured-element-old-transform"
                                id="ref-for-captured-element-old-transform">old transform</a>,
                            <var>groupContainerElement</var>’s <a data-link-type="dfn"
                                href="https://www.w3.org/TR/css-view-transitions-1/#captured-element-old-width"
                                id="ref-for-captured-element-old-width">old width</a>,
                            <var>groupContainerElement</var>’s <a data-link-type="dfn"
                                href="https://www.w3.org/TR/css-view-transitions-1/#captured-element-old-height"
                                id="ref-for-captured-element-old-height">old height</a>, and
                            <var>groupContainerElement</var>’s <a data-link-type="dfn"
                                href="#captured-element-old-box-properties"
                                id="ref-for-captured-element-old-box-properties">old box properties</a>.
                        </p>
                </ol>
        </ol>
        <p class="note" role="note"><span class="marker">Note:</span> It is TBD how this is resolved when the old and
            new groups mismatch. See <a href="https://github.com/w3c/csswg-drafts/issues/10631">Issue 10631</a>.</p>
    </div>
    <h4 class="heading settled" data-level="9.7.7" id="vt-group-transform-adjust"><span class="secno">9.7.7.
        </span><span class="content">Adjust the group’s <a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-transforms-1/#propdef-transform"
                id="ref-for-propdef-transform①">transform</a> to be relative to its containing <a class="css"
                data-link-type="maybe"
                href="https://www.w3.org/TR/css-view-transitions-1/#selectordef-view-transition-group"
                id="ref-for-selectordef-view-transition-group⑨">::view-transition-group()</a></span><a class="self-link"
            href="#vt-group-transform-adjust"></a></h4>
    <div class="algorithm" data-algorithm="additional pseudo-element style update steps (group)">
        When <a href="https://www.w3.org/TR/css-view-transitions-1/#style-transition-pseudo-elements-algorithm">updating
            the style of the transition pseudo-element</a>, perform the following steps before setting the <a
            data-link-type="dfn" href="https://www.w3.org/TR/css-view-transitions-1/#captured-element-group-styles-rule"
            id="ref-for-captured-element-group-styles-rule">group styles rule</a>, given a <a data-link-type="dfn"
            href="https://www.w3.org/TR/css-view-transitions-1/#captured-element"
            id="ref-for-captured-element⑦">captured element</a> <var>capturedElement</var>, a <var>transform</var>, and
        a <code
            class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition" id="ref-for-viewtransition②③">ViewTransition</a></code>
        <var>transition</var>:
        <ol>
            <li data-md>
                <p>Set <var>capturedElement</var>’s <a data-link-type="dfn"
                        href="#captured-element-transform-from-snapshot-containing-block"
                        id="ref-for-captured-element-transform-from-snapshot-containing-block">transform from snapshot
                        containing block</a> to <var>transform</var>.</p>
            <li data-md>
                <p>If <var>capturedElement</var>’s <a data-link-type="dfn"
                        href="#captured-element-containing-group-name"
                        id="ref-for-captured-element-containing-group-name③">containing group name</a> is not null,
                    then:</p>
                <ol>
                    <li data-md>
                        <p>Let <var>groupContainerElement</var> be <var>transition</var>’s <a data-link-type="dfn"
                                href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition-named-elements"
                                id="ref-for-viewtransition-named-elements④">named
                                elements</a>[<var>capturedElement</var>’s <a data-link-type="dfn"
                                href="#captured-element-containing-group-name"
                                id="ref-for-captured-element-containing-group-name④">containing group name</a>.</p>
                    <li data-md>
                        <p>Let <var>containerRect</var> be <a data-link-type="dfn"
                                href="https://www.w3.org/TR/css-view-transitions-1/#snapshot-containing-block"
                                id="ref-for-snapshot-containing-block①">snapshot containing block</a> if
                            <var>capturedElement</var> is the <a data-link-type="dfn"
                                href="https://dom.spec.whatwg.org/#document-element"
                                id="ref-for-document-element④">document element</a>,
                            otherwise, <var>capturedElement</var>’s <a data-link-type="dfn"
                                href="https://www.w3.org/TR/css-box-4/#border-box" id="ref-for-border-box">border
                                box</a>.
                        </p>
                    <li data-md>
                        <p><a data-link-type="dfn" href="#adjust-the-nested-group-transform"
                                id="ref-for-adjust-the-nested-group-transform①">Adjust the nested group transform</a> to
                            <var>transform</var>, given <var>groupContainerElement</var>’s <a data-link-type="dfn"
                                href="#captured-element-transform-from-snapshot-containing-block"
                                id="ref-for-captured-element-transform-from-snapshot-containing-block①">transform from
                                snapshot containing block</a>, <var>containerRect</var>’s width,
                            <var>containerRect</var>’s height, and <var>groupContainerElement</var>’s <a
                                data-link-type="dfn" href="#captured-element-new-box-properties"
                                id="ref-for-captured-element-new-box-properties">new box properties</a>.
                        </p>
                </ol>
        </ol>
    </div>
    <p></p>
    <h3 class="heading settled" data-level="9.8" id="layered-capture-algorithms"><span class="secno">9.8. </span><span
            class="content">Capturing layered CSS properties</span><a class="self-link"
            href="#layered-capture-algorithms"></a></h3>
    <h4 class="heading settled" data-level="9.8.1" id="layered-capture-compute-style"><span class="secno">9.8.1.
        </span><span class="content">Compute the layered-capture style</span><a class="self-link"
            href="#layered-capture-compute-style"></a></h4>
    <div class="algorithm" data-algorithm="compute layered capture style">
        To compute the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="layered-capture-style">layered
            capture style</dfn> of an <code
            class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element⑥">Element</a></code>
        <var>element</var>:
        <ol>
            <li data-md>
                <p>Let <var>propertiesToCapture</var> be a new <a data-link-type="dfn"
                        href="https://infra.spec.whatwg.org/#list" id="ref-for-list②">list</a> corresponding to the <a
                        data-link-type="dfn" href="#layered-capture-properties"
                        id="ref-for-layered-capture-properties">layered capture properties</a>,</p>
            <li data-md>
                <p class="issue" id="issue-d24249d6"><a class="self-link" href="#issue-d24249d6"></a> Specify the
                    behavior of <a class="property css" data-link-type="property"
                        href="https://www.w3.org/TR/css-overflow-3/#propdef-overflow"
                        id="ref-for-propdef-overflow②">overflow</a> and containment. See <a
                        href="https://github.com/w3c/csswg-drafts/issues/11079">issue 11079</a>.</p>
            <li data-md>
                <p>Let <var>styles</var> be a « ».</p>
            <li data-md>
                <p>For each <var>property</var> in <var>propertiesToCapture</var>, <a data-link-type="dfn"
                        href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append">append</a> the <a
                        data-link-type="dfn" href="https://infra.spec.whatwg.org/#string-concatenate"
                        id="ref-for-string-concatenate">concatentation</a> of « <var>property</var>, <code>":"</code>,
                    <var>element</var>’s <a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-cascade-5/#computed-value" id="ref-for-computed-value⑦">computed
                        value</a> of <var>property</var>, <code>";"</code> » to <var>styles</var>.
                </p>
            <li data-md>
                <p>Return the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string-concatenate"
                        id="ref-for-string-concatenate①">concatentation</a> of <var>styles</var>.</p>
        </ol>
    </div>
    <div class="algorithm" data-algorithm="compute layered capture geometry"> To compute the <dfn class="dfn-paneled"
            data-dfn-type="dfn" data-noexport id="layered-capture-geometry">layered capture geometry</dfn> of an <code
            class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element⑦">Element</a></code>
        <var>element</var>, return a new <a data-link-type="dfn" href="#layered-box-properties"
            id="ref-for-layered-box-properties①">layered box properties</a>,
        whose <a data-link-type="dfn" href="#layered-box-properties-box-sizing"
            id="ref-for-layered-box-properties-box-sizing">box sizing</a> is <var>element</var>’s <a
            data-link-type="dfn" href="https://www.w3.org/TR/css-cascade-5/#computed-value"
            id="ref-for-computed-value⑧">computed</a> <a class="property css" data-link-type="property"
            href="https://www.w3.org/TR/css-sizing-3/#propdef-box-sizing"
            id="ref-for-propdef-box-sizing①">box-sizing</a>, <a data-link-type="dfn"
            href="#layered-box-properties-padding-box" id="ref-for-layered-box-properties-padding-box">padding box</a>
        is <var>element</var>’s <a data-link-type="dfn" href="https://www.w3.org/TR/css-box-4/#padding-box"
            id="ref-for-padding-box">padding box</a>,
        and whose <a data-link-type="dfn" href="#layered-box-properties-content-box"
            id="ref-for-layered-box-properties-content-box">content box</a> is <var>element</var>’s <a
            data-link-type="dfn" href="https://www.w3.org/TR/css-box-4/#content-box" id="ref-for-content-box">content
            box</a>.
    </div>
    <p>To compute the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="default-group-size">default group
            size</dfn> given <var>element</var> return <var>element</var>’s <a data-link-type="dfn"
            href="https://www.w3.org/TR/css-box-4/#content-box" id="ref-for-content-box①">content box</a>'s size if
        <var>element</var>’s <a data-link-type="dfn" href="https://www.w3.org/TR/css-cascade-5/#computed-value"
            id="ref-for-computed-value⑨">computed</a> <a class="property css" data-link-type="property"
            href="https://www.w3.org/TR/css-sizing-3/#propdef-box-sizing"
            id="ref-for-propdef-box-sizing②">box-sizing</a> is <a class="css" data-link-type="maybe"
            href="https://www.w3.org/TR/css-sizing-3/#valdef-box-sizing-content-box"
            id="ref-for-valdef-box-sizing-content-box①">content-box</a>, otherwise <var>element</var>’s <a
            data-link-type="dfn" href="https://www.w3.org/TR/css-box-4/#border-box" id="ref-for-border-box①">border
            box</a>'s size.
    </p>
    <h4 class="heading settled" data-level="9.8.2" id="capture-new-layered-props-algorithm"><span class="secno">9.8.2.
        </span><span class="content">Capture the old layered properties</span><a class="self-link"
            href="#capture-new-layered-props-algorithm"></a></h4>
    <div class="algorithm" data-algorithm="additional old capture steps (layered)">
        When <a href="https://www.w3.org/TR/css-view-transitions-1/#capture-new-state-algorithm">capturing the old state
            for an element</a>, perform the following steps given a <a data-link-type="dfn"
            href="https://www.w3.org/TR/css-view-transitions-1/#captured-element"
            id="ref-for-captured-element⑧">captured element</a> <var>capturedElement</var> and an <a
            data-link-type="dfn" href="https://drafts.csswg.org/css2/#element" id="ref-for-element⑧">element</a>
        <var>element</var>:
        <ol>
            <li data-md>
                <p>Set <var>capturedElement</var>’s <a data-link-type="dfn"
                        href="#captured-element-old-layered-capture-style"
                        id="ref-for-captured-element-old-layered-capture-style">old layered-capture style</a> to
                    <var>element</var>’s <a data-link-type="dfn" href="#layered-capture-style"
                        id="ref-for-layered-capture-style">layered capture style</a>.
                </p>
            <li data-md>
                <p>Set <var>capturedElement</var>’s <a data-link-type="dfn" href="#captured-element-old-box-properties"
                        id="ref-for-captured-element-old-box-properties①">old box properties</a> to <var>element</var>’s
                    <a data-link-type="dfn" href="#layered-capture-geometry"
                        id="ref-for-layered-capture-geometry">layered capture geometry</a>.
                </p>
            <li data-md>
                <p>Set <var>capturedElement</var>’s (<a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-view-transitions-1/#captured-element-old-width"
                        id="ref-for-captured-element-old-width①">old width</a>, <a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-view-transitions-1/#captured-element-old-height"
                        id="ref-for-captured-element-old-height①">old height</a> to <var>element</var>’s <a
                        data-link-type="dfn" href="#default-group-size" id="ref-for-default-group-size">default group
                        size</a>.</p>
        </ol>
    </div>
    <h4 class="heading settled" data-level="9.8.3" id="capture-image-size-algorithm"><span class="secno">9.8.3.
        </span><span class="content">Adjustment to image capture size</span><a class="self-link"
            href="#capture-image-size-algorithm"></a></h4>
    <div class="algorithm" data-algorithm="adjust image capture size (layered)"> When <a data-link-type="dfn"
            href="https://www.w3.org/TR/css-view-transitions-1/#capture-the-image"
            id="ref-for-capture-the-image">capturing the image</a>, the <a data-link-type="dfn"
            href="https://www.w3.org/TR/css-images-3/#natural-dimensions" id="ref-for-natural-dimensions">natural
            dimensions</a> of the image will be based on the element’s <a data-link-type="dfn"
            href="https://www.w3.org/TR/css-box-4/#content-box" id="ref-for-content-box②">content box</a>'s size rather
        than on the <a data-link-type="dfn" href="https://www.w3.org/TR/css-box-4/#border-box"
            id="ref-for-border-box②">border box</a>. </div>
    <h4 class="heading settled" data-level="9.8.4" id="layered-capture-rendering"><span class="secno">9.8.4.
        </span><span class="content">Render the snapshot with layered capture</span><a class="self-link"
            href="#layered-capture-rendering"></a></h4>
    <p>When capturing an element into a snapshot, only the <a data-link-type="dfn"
            href="https://drafts.csswg.org/css-contain-2/#element-contents" id="ref-for-element-contents">element
            contents</a> are painted, without the element’s effects and box decorations.
        Specifically, the element’s <a class="property css" data-link-type="property"
            href="https://www.w3.org/TR/css-backgrounds-3/#propdef-background"
            id="ref-for-propdef-background①">background</a>, <a class="property css" data-link-type="property"
            href="https://www.w3.org/TR/css-backgrounds-3/#propdef-border" id="ref-for-propdef-border">border</a>, <a
            class="property css" data-link-type="property"
            href="https://www.w3.org/TR/css-backgrounds-3/#propdef-border-image"
            id="ref-for-propdef-border-image①">border-image</a>, <a class="property css" data-link-type="property"
            href="https://drafts.csswg.org/css-borders-4/#propdef-box-shadow"
            id="ref-for-propdef-box-shadow②">box-shadow</a>, and <a class="property css" data-link-type="property"
            href="https://www.w3.org/TR/css-ui-4/#propdef-outline" id="ref-for-propdef-outline①">outline</a> are not
        painted, and its <a class="property css" data-link-type="property"
            href="https://drafts.csswg.org/css-borders-4/#propdef-border-radius"
            id="ref-for-propdef-border-radius②">border-radius</a>, <a class="property css" data-link-type="property"
            href="https://www.w3.org/TR/css-masking-1/#propdef-clip-path" id="ref-for-propdef-clip-path③">clip-path</a>,
        <a class="property css" data-link-type="property" href="https://www.w3.org/TR/filter-effects-1/#propdef-filter"
            id="ref-for-propdef-filter④">filter</a>, <a class="property css" data-link-type="property"
            href="https://www.w3.org/TR/css-masking-1/#propdef-mask" id="ref-for-propdef-mask②">mask</a>, and <a
            class="property css" data-link-type="property" href="https://www.w3.org/TR/css-color-4/#propdef-opacity"
            id="ref-for-propdef-opacity③">opacity</a> are not applied.
    </p>
    <h4 class="heading settled" data-level="9.8.5" id="vt-adjust-nested-group-transform"><span class="secno">9.8.5.
        </span><span class="content">Adjust the nested group transform</span><a class="self-link"
            href="#vt-adjust-nested-group-transform"></a></h4>
    To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="adjust-the-nested-group-transform">adjust the
        nested group transform</dfn> given a <a data-link-type="dfn" href="https://www.w3.org/TR/geometry-1/#matrix"
        id="ref-for-matrix①">matrix</a> <var>transform</var>, a <span id="ref-for-matrix②">matrix</span>
    <var>parentTransform</var>, <var>borderBoxWidth</var>, <var>borderBoxHeight</var>, and a <a data-link-type="dfn"
        href="#layered-box-properties" id="ref-for-layered-box-properties②">layered box properties</a>
    <var>boxProperties</var>, perform the following steps:
    <ol>
        <li data-md>
            <p><a data-link-type="dfn" href="https://www.w3.org/TR/geometry-1/#multiply"
                    id="ref-for-multiply">Multiply</a> <var>transform</var> with the inverse matrix of
                <var>parentTransform</var>.
            </p>
        <li data-md>
            <p>Let (left, top) be the border edge based on <var>boxProperties</var>’s <a data-link-type="dfn"
                    href="#layered-box-properties-padding-box" id="ref-for-layered-box-properties-padding-box①">padding
                    box</a> inside (<var>borderBoxWidth</var>, <var>borderBoxHeight</var>).</p>
        <li data-md>
            <p>Translate <var>transform</var> by (-left, -top).</p>
            <p class="note" role="note"><span class="marker">Note:</span> These operations ensure that the default
                position of this nested group would be equivalent to the original element’s position, given that by
                default a nested ':view-transition-group' would be positioned relative to the parent’s <a
                    data-link-type="dfn" href="https://www.w3.org/TR/css-box-4/#padding-edge"
                    id="ref-for-padding-edge">padding edge</a>.</p>
    </ol>
    <h4 class="heading settled" data-level="9.8.6" id="vt-layered-capture-apply-keyframes"><span class="secno">9.8.6.
        </span><span class="content">Apply the old layered-capture properties to <a class="css" data-link-type="maybe"
                href="https://www.w3.org/TR/css-view-transitions-1/#selectordef-view-transition-group"
                id="ref-for-selectordef-view-transition-group①⓪">::view-transition-group()</a> keyframes</span><a
            class="self-link" href="#vt-layered-capture-apply-keyframes"></a></h4>
    <div class="algorithm" data-algorithm="additional pseudo-element setup steps (layered capture keyframes)">
        When <a href="https://www.w3.org/TR/css-view-transitions-1/#setup-transition-pseudo-elements-algorithm">setting
            up the transition pseudo-element</a> for a <a data-link-type="dfn"
            href="https://www.w3.org/TR/css-view-transitions-1/#captured-element"
            id="ref-for-captured-element⑨">captured element</a> <var>capturedElement</var>, given a
        <var>transitionName</var>:
        <ol>
            <li data-md>
                <p>Let <var>keyframesName</var> be the <a data-link-type="dfn"
                        href="https://infra.spec.whatwg.org/#string-concatenate"
                        id="ref-for-string-concatenate②">concatentation</a> of «
                    <code>-ua-view-transition-group-anim-</code>, <var>transitionName</var> »
                </p>
            <li data-md>
                <p>Append <var>capturedElement</var>’s <a data-link-type="dfn"
                        href="#captured-element-old-layered-capture-style"
                        id="ref-for-captured-element-old-layered-capture-style①">old layered-capture style</a> to the
                    constructed rule for <var>keyframesName</var>.</p>
        </ol>
    </div>
    <h4 class="heading settled" data-level="9.8.7" id="vt-layered-capture-apply-new-state"><span class="secno">9.8.7.
        </span><span class="content">Apply the new layered-capture properties to <a class="css" data-link-type="maybe"
                href="https://www.w3.org/TR/css-view-transitions-1/#selectordef-view-transition-group"
                id="ref-for-selectordef-view-transition-group①①">::view-transition-group()</a></span><a
            class="self-link" href="#vt-layered-capture-apply-new-state"></a></h4>
    <div class="algorithm" data-algorithm="additional pseudo-element style update steps (layered capture new state)">
        When <a href="https://www.w3.org/TR/css-view-transitions-1/#style-transition-pseudo-elements-algorithm">updating
            the style of the transition pseudo-element</a>, perform the following steps before setting the <a
            data-link-type="dfn" href="https://www.w3.org/TR/css-view-transitions-1/#captured-element-group-styles-rule"
            id="ref-for-captured-element-group-styles-rule①">group styles rule</a>, given a <var>transitionName</var>, a
        <var>capturedElement</var>, <var>width</var>, <var>height</var>, and an <code
            class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element⑨">Element</a></code>
        <var>element</var>:
        <p class="note" role="note"><span class="marker">Note:</span> this might change and <var>width</var>,
            <var>height</var>.
        </p>
        <ol>
            <li data-md>
                <p>Let <var>style</var> be <var>element</var>’s <a data-link-type="dfn" href="#layered-capture-style"
                        id="ref-for-layered-capture-style①">layered capture style</a>.</p>
            <li data-md>
                <p>Set <var>capturedElement</var>’s <a data-link-type="dfn" href="#captured-element-new-box-properties"
                        id="ref-for-captured-element-new-box-properties①">new box properties</a> to <var>element</var>’s
                    <a data-link-type="dfn" href="#layered-capture-properties"
                        id="ref-for-layered-capture-properties①">layered capture properties</a>.
                </p>
            <li data-md>
                <p>Set (<var>width</var>, <var>height</var>) to the <var>element</var>’s <a data-link-type="dfn"
                        href="#default-group-size" id="ref-for-default-group-size①">default group size</a>.</p>
            <li data-md>
                <p>Append the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string-concatenate"
                        id="ref-for-string-concatenate③">concatentation</a> of «
                    <code>"::view-transition-group("</code>, <var>transitionName</var>, <code>") {"</code>,
                    <var>style</var> , <code>"}"</code> » to the constructed user-agent stylesheet.
                </p>
            <li data-md>
                <p>Let (<var>oldContentWidth</var>, <var>oldContentHeight</var>) be (<var>capturedElement</var>’s <a
                        data-link-type="dfn"
                        href="https://www.w3.org/TR/css-view-transitions-1/#captured-element-old-width"
                        id="ref-for-captured-element-old-width②">old width</a>, <var>capturedElement</var>’s <a
                        data-link-type="dfn"
                        href="https://www.w3.org/TR/css-view-transitions-1/#captured-element-old-height"
                        id="ref-for-captured-element-old-height②">old height</a>) if <var>capturedElement</var>’s <a
                        data-link-type="dfn" href="#captured-element-old-box-properties"
                        id="ref-for-captured-element-old-box-properties②">old box properties</a> is null, otherwise
                    <var>capturedElement</var>’s <span id="ref-for-captured-element-old-box-properties③">old box
                        properties</span>'s <a data-link-type="dfn" href="#layered-box-properties-content-box"
                        id="ref-for-layered-box-properties-content-box①">content box</a>'s size.
                </p>
            <li data-md>
                <p>Let (<var>newContentWidth</var>, <var>newContentHeight</var>) be (<var>width</var>,
                    <var>height</var>) if <a data-link-type="dfn" href="#captured-element-new-box-properties"
                        id="ref-for-captured-element-new-box-properties②">new box properties</a> is null, otherwise
                    <var>capturedElement</var>’s <span id="ref-for-captured-element-new-box-properties③">new box
                        properties</span>'s <a data-link-type="dfn" href="#layered-box-properties-content-box"
                        id="ref-for-layered-box-properties-content-box②">content box</a>'s size.
                </p>
            <li data-md>
                <p>Append the next string (with replaced variables) to the user agent stylesheet:</p>
                <pre class="highlight"><c- n>@keyframes</c-> -ua-view-transition-content-geometry-<var>transitionName</var> <c- p>{</c->
  from <c- p>{</c->
    <c- k>width</c-><c- p>:</c-> <var>oldContentWidth</var><c- p>;</c->
    <c- k>height</c-><c- p>:</c-> <var>oldContentHeight</var><c- p>;</c->
  <c- p>}</c->
<c- p>}</c->

:root:<c- nf>:view-transition-image-pair</c-><c- p>(</c-><var>transitionName</var><c- p>)</c-> <c- p>{</c->
  <c- k>position</c-><c- p>:</c-> relative<c- p>;</c->
  <c- k>inset</c-><c- p>:</c-> unset<c- p>;</c->
  <c- k>width</c-><c- p>:</c-> <var>newContentWidth</var><c- p>;</c->
  <c- k>height</c-><c- p>:</c-> <var>newContentHeight</var><c- p>;</c->
  <c- k>animation-name</c-><c- p>:</c-> -ua-view-transition-<var>transitionName</var><c- p>;</c->
  <c- k>animation-direction</c-><c- p>:</c-> inherit<c- p>;</c->
  <c- k>animation-timing-function</c-><c- p>:</c-> inherit<c- p>;</c->
  <c- k>animation-iteration-count</c-><c- p>:</c-> inherit<c- p>;</c->
  <c- k>animation-duration</c-><c- p>:</c-> inherit<c- p>;</c->
<c- p>}</c->
</pre>
        </ol>
        <p class="note" role="note"><span class="marker">Note:</span> the ':view-transition-image-pair' pseudo-element
            is using <a class="css" data-link-type="maybe"
                href="https://www.w3.org/TR/css-position-3/#valdef-position-relative"
                id="ref-for-valdef-position-relative">relative</a> positioning so that the group’s <a
                class="property css" data-link-type="property" href="https://www.w3.org/TR/css-box-4/#propdef-padding"
                id="ref-for-propdef-padding①">padding</a> will take effect.</p>
    </div>
    <h2 class="no-num heading settled" id="priv"><span class="content">Privacy Considerations</span><a class="self-link"
            href="#priv"></a></h2>
    <p>This specification introduces no new privacy considerations.</p>
    <h2 class="no-num heading settled" id="sec"><span class="content">Security Considerations</span><a class="self-link"
            href="#sec"></a></h2>
    <p>To prevent cross-origin issues, at this point cross-document view transitions can only be enabled for
        same-origin navigations. As discussed in <a
            href="https://github.com/WICG/view-transitions/issues/200">WICG/view-transitions#200</a>,
        this still presents two potential threats:</p>
    <ol>
        <li data-md>
            <p>The <a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-cross-origin-isolated-capability"
                    id="ref-for-concept-settings-object-cross-origin-isolated-capability">cross-origin isolated
                    capability</a> in both documents might be different.
                This can cause a situation where a <code
                    class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document②⑤">Document</a></code>
                that is <span id="ref-for-concept-settings-object-cross-origin-isolated-capability①">cross-origin
                    isolated</span> can read image data from a document that is not cross-origin isolated. This is
                already mitigated in [[css-view-transitions-1#sec],
                as the same restriction applies for captured cross-origin iframes.</p>
        <li data-md>
            <p>A same-origin navigation might still occur via a cross-origin redirect, e.g.
                <code>https://example.com</code> links to <code>https://auth-provider.com/</code> which redirects back
                to <code>https://example.com/loggedin</code>.
            </p>
            <p>This can cause a (minor) situation where the cross-origin party would redirect the user to an
                unexpected first-party URL, causing an unexpected transition and obfuscating that fact that there was a
                redirect.
                To mitigate this, currently view transitions are disabled for navigations if the <code
                    class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document②⑥">Document</a></code>
                <a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/dom.html#was-created-via-cross-origin-redirects"
                    id="ref-for-was-created-via-cross-origin-redirects①">was created via cross-origin redirects</a>.
                Note that this check doesn’t apply when the <code
                    class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document②⑦">Document</a></code>
                is being <a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#reactivate-a-document"
                    id="ref-for-reactivate-a-document">reactivated</a>, as in that case
                the cross-origin redirect has already taken place.
            </p>
            <p class="note" role="note"><span class="marker">Note:</span> this only applies to server-side redirects. A
                client-side redirect, e.g. using
                [^meta/http-equiv/refresh^], is equivalent to a new navigation.</p>
        <li data-md>
            <p>This feature exposes more information to CSS, as so far CSS was not aware of anything navigation-related.
                This can raise concerns around safety 3rd-party CSS. However, as a general rule, 3rd-party stylesheets
                should come
                from trusted sources to begin with, as CSS can learn about the document or change it in many ways.</p>
    </ol>
    <p>See <a href="https://github.com/w3c/csswg-drafts/issues/8684">Issue #8684</a> and <a
            href="https://github.com/WICG/view-transitions/issues/200">WICG/view-transitions#200</a> for
        detailed discussion.</p>
    <h2 class="no-num non-normative heading settled" id="changes"><span class="content">Appendix A. Changes</span><a
            class="self-link" href="#changes"></a></h2>
    <p>This appendix is <em>informative</em>.</p>
    <h3 class="heading settled" id="changes-since-2024-05-16"><span class="content"> Changes from <a
                href="https://www.w3.org/TR/2024/WD-css-view-transitions-2-20240516/">2024-05-16 Working Draft</a>
        </span><a class="self-link" href="#changes-since-2024-05-16"></a></h3>
    <ul>
        <li data-md>
            <p>First pass at layered capture (<a href="https://github.com/w3c/csswg-drafts/issues/10585">#10585</a>)</p>
        <li data-md>
            <p>Allow transitions when traversing into a document that was created using cross-origin redirects (<a
                    href="https://github.com/w3c/csswg-drafts/issues/11063">#11063</a>#11063)</p>
        <li data-md>
            <p>Clarify a few nesting details (<a href="https://github.com/w3c/csswg-drafts/issues/10780">#10780</a> and
                <a href="https://github.com/w3c/csswg-drafts/issues/10633">#10633</a>)
            </p>
        <li data-md>
            <p>Allow <code>auto</code> as a keyword for <a class="property css" data-link-type="property"
                    href="https://www.w3.org/TR/css-view-transitions-1/#propdef-view-transition-name"
                    id="ref-for-propdef-view-transition-name②⓪">view-transition-name</a> (<a
                    href="https://github.com/w3c/csswg-drafts/issues/8320">#8320</a>)</p>
        <li data-md>
            <p>Clarify timeout behavior for inbound view transition (<a
                    href="https://github.com/w3c/csswg-drafts/issues/10800">#10800</a>)</p>
        <li data-md>
            <p>When hiding the document, and inbound cross-document view transition should be skipped. (<a
                    href="https://github.com/w3c/csswg-drafts/issues/9822">#9822</a>)</p>
        <li data-md>
            <p>Rename UpdateCallback to something more specific.</p>
        <li data-md>
            <p>Clarify that CSSViewTransitionRule returns an empty string for invalid/missing navigation descriptor (<a
                    href="https://github.com/w3c/csswg-drafts/issues/10654">#10654</a>)</p>
        <li data-md>
            <p>Initial spec for nested view transitions (<a
                    href="https://github.com/w3c/csswg-drafts/issues/10334">#10334</a>)</p>
        <li data-md>
            <p><code>view-transition-class</code> is a tree-scoped name (<a
                    href="https://github.com/w3c/csswg-drafts/issues/10529">#10529</a>)</p>
        <li data-md>
            <p>Stop extending CSSRule with obsolete pattern (See <a
                    href="https://github.com/w3c/csswg-drafts/issues/10606">#10606</a>)</p>
    </ul>
    <h2 class="no-ref no-num heading settled" id="w3c-conformance"><span class="content"> Conformance</span><a
            class="self-link" href="#w3c-conformance"></a></h2>
    <h3 class="no-ref heading settled" id="w3c-conventions"><span class="content"> Document conventions</span><a
            class="self-link" href="#w3c-conventions"></a></h3>
    <p>Conformance requirements are expressed with a combination of
        descriptive assertions and RFC 2119 terminology. The key words “MUST”,
        “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”,
        “RECOMMENDED”, “MAY”, and “OPTIONAL” in the normative parts of this
        document are to be interpreted as described in RFC 2119.
        However, for readability, these words do not appear in all uppercase
        letters in this specification. </p>
    <p>All of the text of this specification is normative except sections
        explicitly marked as non-normative, examples, and notes. <a data-link-type="biblio" href="#biblio-rfc2119"
            title="Key words for use in RFCs to Indicate Requirement Levels">[RFC2119]</a></p>
    <p>Examples in this specification are introduced with the words “for example”
        or are set apart from the normative text with <code>class="example"</code>,
        like this: </p>
    <div class="example" id="w3c-example">
        <a class="self-link" href="#w3c-example"></a>
        <p>This is an example of an informative example.</p>
    </div>
    <p>Informative notes begin with the word “Note” and are set apart from the
        normative text with <code>class="note"</code>, like this: </p>
    <p class="note" role="note">Note, this is an informative note.</p>
    <p>Advisements are normative sections styled to evoke special attention and are
        set apart from other normative text with <code>&lt;strong class="advisement"></code>, like
        this: <strong class="advisement"> UAs MUST provide an accessible alternative. </strong></p>
    <h3 class="no-ref heading settled" id="w3c-conformance-classes"><span class="content"> Conformance classes</span><a
            class="self-link" href="#w3c-conformance-classes"></a></h3>
    <p>Conformance to this specification
        is defined for three conformance classes: </p>
    <dl>
        <dt>style sheet
        <dd>A <a href="https://www.w3.org/TR/CSS21/conform.html#style-sheet">CSS
                style sheet</a>.
        <dt>renderer
        <dd>A <a href="https://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a> that interprets the semantics of a
            style sheet and renders
            documents that use them.
        <dt>authoring tool
        <dd>A <a href="https://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a> that writes a style sheet.
    </dl>
    <p>A style sheet is conformant to this specification
        if all of its statements that use syntax defined in this module are valid
        according to the generic CSS grammar and the individual grammars of each
        feature defined in this module. </p>
    <p>A renderer is conformant to this specification
        if, in addition to interpreting the style sheet as defined by the
        appropriate specifications, it supports all the features defined
        by this specification by parsing them correctly
        and rendering the document accordingly. However, the inability of a
        UA to correctly render a document due to limitations of the device
        does not make the UA non-conformant. (For example, a UA is not
        required to render color on a monochrome monitor.) </p>
    <p>An authoring tool is conformant to this specification
        if it writes style sheets that are syntactically correct according to the
        generic CSS grammar and the individual grammars of each feature in
        this module, and meet all other conformance requirements of style sheets
        as described in this module. </p>
    <h3 class="no-ref heading settled" id="w3c-partial"><span class="content"> Partial implementations</span><a
            class="self-link" href="#w3c-partial"></a></h3>
    <p>So that authors can exploit the forward-compatible parsing rules to
        assign fallback values, CSS renderers <strong>must</strong> treat as invalid (and <a
            href="https://www.w3.org/TR/CSS21/conform.html#ignore">ignore
            as appropriate</a>) any at-rules, properties, property values, keywords,
        and other syntactic constructs for which they have no usable level of
        support. In particular, user agents <strong>must not</strong> selectively
        ignore unsupported component values and honor supported values in a single
        multi-value property declaration: if any value is considered invalid
        (as unsupported values must be), CSS requires that the entire declaration
        be ignored.</p>
    <h4 class="heading settled" id="w3c-conform-future-proofing"><span class="content"> Implementations of Unstable and
            Proprietary Features</span><a class="self-link" href="#w3c-conform-future-proofing"></a></h4>
    <p>To avoid clashes with future stable CSS features,
        the CSSWG recommends <a href="https://www.w3.org/TR/CSS/#future-proofing">following best practices</a> for the
        implementation of <a href="https://www.w3.org/TR/CSS/#unstable">unstable</a> features and <a
            href="https://www.w3.org/TR/CSS/#proprietary-extension">proprietary extensions</a> to CSS. </p>
    <h3 class="no-ref heading settled" id="w3c-testing"><span class="content"> Non-experimental implementations</span><a
            class="self-link" href="#w3c-testing"></a></h3>
    <p>Once a specification reaches the Candidate Recommendation stage,
        non-experimental implementations are possible, and implementors should
        release an unprefixed implementation of any CR-level feature they
        can demonstrate to be correctly implemented according to spec. </p>
    <p>To establish and maintain the interoperability of CSS across
        implementations, the CSS Working Group requests that non-experimental
        CSS renderers submit an implementation report (and, if necessary, the
        testcases used for that implementation report) to the W3C before
        releasing an unprefixed implementation of any CSS features. Testcases
        submitted to W3C are subject to review and correction by the CSS
        Working Group. </p>
    <p>Further information on submitting testcases and implementation reports
        can be found from on the CSS Working Group’s website at <a
            href="https://www.w3.org/Style/CSS/Test/">https://www.w3.org/Style/CSS/Test/</a>.
        Questions should be directed to the <a
            href="https://lists.w3.org/Archives/Public/public-css-testsuite">public-css-testsuite@w3.org</a> mailing
        list.</p>
    <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
    <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link"
            href="#index"></a></h2>
    <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this
            specification</span><a class="self-link" href="#index-defined-here"></a></h3>
    <ul class="index">
        <li><a href="#viewtransition-active-types">active types</a><span>, in § 9.1.2</span>
        <li><a href="#active-view-transition-pseudo">:active-view-transition</a><span>, in § 3.3.1</span>
        <li><a href="#active-view-transition-type-pseudo">:active-view-transition-type()</a><span>, in § 3.3.2</span>
        <li><a href="#adjust-the-nested-group-transform">adjust the nested group transform</a><span>, in § 9.8.5</span>
        <li>
            auto
            <ul>
                <li><a href="#view-transition-name-auto">dfn for view-transition-name</a><span>, in § 6.3</span>
                <li><a href="#valdef-view-transition-navigation-auto">value for @view-transition/navigation</a><span>,
                        in § 2.3.2</span>
            </ul>
        <li><a href="#layered-box-properties-box-sizing">box sizing</a><span>, in § 9.2.1</span>
        <li><a href="#document-can-initiate-outbound-view-transition">can initiate outbound view transition</a><span>,
                in § 9.1.1</span>
        <li><a href="#captured-element-class-list">class list</a><span>, in § 9.2.1</span>
        <li><a href="#valdef-view-transition-group-contain">contain</a><span>, in § 9.7.3</span>
        <li><a href="#captured-element-containing-group-name">containing group name</a><span>, in § 9.2.1</span>
        <li><a href="#layered-box-properties-content-box">content box</a><span>, in § 9.2.1</span>
        <li><a href="#cssviewtransitionrule">CSSViewTransitionRule</a><span>, in § 2.3.3</span>
        <li><a href="#valdef-view-transition-group-custom-ident">&lt;custom-ident></a><span>, in § 9.7.3</span>
        <li><a href="#valdef-view-transition-class-custom-ident">&lt;custom-ident>+</a><span>, in § 4.3</span>
        <li><a href="#default-group-size">default group size</a><span>, in § 9.8.1</span>
        <li><a href="#document-scoped-view-transition-group">document-scoped view transition group</a><span>, in
                § 9.7.1</span>
        <li><a href="#document-inbound-view-transition-params">inbound view transition params</a><span>, in
                § 9.1.1</span>
        <li><a href="#view-transition-params-initial-snapshot-containing-block-size">initial snapshot containing block
                size</a><span>, in § 9.1.3</span>
        <li><a href="#layered-box-properties">layered box properties</a><span>, in § 9.2.1</span>
        <li><a href="#layered-capture-geometry">layered capture geometry</a><span>, in § 9.8.1</span>
        <li><a href="#layered-capture-properties">layered capture properties</a><span>, in § 8.2</span>
        <li><a href="#layered-capture-style">layered capture style</a><span>, in § 9.8.1</span>
        <li><a href="#view-transition-params-named-elements">named elements</a><span>, in § 9.1.3</span>
        <li>
            navigation
            <ul>
                <li><a href="#dom-cssviewtransitionrule-navigation">attribute for CSSViewTransitionRule</a><span>, in
                        § 2.3.3</span>
                <li><a href="#descdef-view-transition-navigation">descriptor for @view-transition</a><span>, in
                        § 2.3.2</span>
                <li><a href="#view-transition-navigation">dfn for @view-transition</a><span>, in § 2.3.2</span>
            </ul>
        <li><a href="#navigation-can-trigger-a-cross-document-view-transition">navigation can trigger a cross-document
                view-transition?</a><span>, in § 9.4.1</span>
        <li><a href="#valdef-view-transition-group-nearest">nearest</a><span>, in § 9.7.3</span>
        <li><a href="#nearest-containing-group-name">nearest containing group name</a><span>, in § 9.7.2</span>
        <li><a href="#captured-element-new-box-properties">new box properties</a><span>, in § 9.2.1</span>
        <li>
            none
            <ul>
                <li><a href="#valdef-view-transition-navigation-none">value for @view-transition/navigation</a><span>,
                        in § 2.3.2</span>
                <li><a href="#valdef-view-transition-class-none">value for view-transition-class</a><span>, in
                        § 4.3</span>
            </ul>
        <li><a href="#valdef-view-transition-group-normal">normal</a><span>, in § 9.7.3</span>
        <li><a href="#captured-element-old-box-properties">old box properties</a><span>, in § 9.2.1</span>
        <li><a href="#captured-element-old-layered-capture-style">old layered-capture style</a><span>, in § 9.2.1</span>
        <li><a href="#viewtransition-outbound-post-capture-steps">outbound post-capture steps</a><span>, in
                § 9.1.2</span>
        <li><a href="#layered-box-properties-padding-box">padding box</a><span>, in § 9.2.1</span>
        <li><a href="#typedef-pt-class-selector">&lt;pt-class-selector></a><span>, in § 4.4</span>
        <li><a href="#typedef-pt-name-and-class-selector">&lt;pt-name-and-class-selector></a><span>, in § 4.4</span>
        <li><a href="#resolve-inbound-cross-document-view-transition">resolve inbound cross-document
                view-transition</a><span>, in § 9.5</span>
        <li><a href="#resolve-view-transition-rule">resolve @view-transition rule</a><span>, in § 9.3</span>
        <li><a href="#setup-cross-document-view-transition">setup cross-document view-transition</a><span>, in
                § 9.4.2</span>
        <li><a href="#dom-document-startviewtransition">startViewTransition()</a><span>, in § 5</span>
        <li><a href="#dom-document-startviewtransition">startViewTransition(callbackOptions)</a><span>, in § 5</span>
        <li><a href="#dictdef-startviewtransitionoptions">StartViewTransitionOptions</a><span>, in § 5</span>
        <li><a href="#captured-element-transform-from-snapshot-containing-block">transform from snapshot containing
                block</a><span>, in § 9.2.1</span>
        <li>
            types
            <ul>
                <li><a href="#dom-cssviewtransitionrule-types">attribute for CSSViewTransitionRule</a><span>, in
                        § 2.3.3</span>
                <li><a href="#dom-viewtransition-types">attribute for ViewTransition</a><span>, in § 3.4</span>
                <li><a href="#descdef-view-transition-types">descriptor for @view-transition</a><span>, in § 3.5</span>
                <li><a href="#view-transition-types">dfn for @view-transition</a><span>, in § 3.5</span>
                <li><a href="#dom-startviewtransitionoptions-types">dict-member for
                        StartViewTransitionOptions</a><span>, in § 5</span>
            </ul>
        <li><a href="#dom-startviewtransitionoptions-update">update</a><span>, in § 5</span>
        <li><a href="#update-the-opt-in-state-for-outbound-transitions">update the opt-in state for outbound
                transitions</a><span>, in § 9.4.3</span>
        <li><a href="#used-group-name">used group name</a><span>, in § 9.7.3</span>
        <li><a href="#at-view-transition-rule">@view-transition</a><span>, in § 2.3.1</span>
        <li><a href="#propdef-view-transition-class">view-transition-class</a><span>, in § 4.3</span>
        <li><a href="#propdef-view-transition-group">view-transition-group</a><span>, in § 7.3</span>
        <li><a href="#view-transition-params">view transition params</a><span>, in § 9.1.3</span>
        <li><a href="#viewtransitiontypeset">ViewTransitionTypeSet</a><span>, in § 3.4</span>
    </ul>
    <aside class="dfn-panel" data-for="term-for-propdef-background">
        <a
            href="https://www.w3.org/TR/css-backgrounds-3/#propdef-background">https://www.w3.org/TR/css-backgrounds-3/#propdef-background</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-background">8.2. Table of captured CSS properties
                    {#layered-captured-css-properties}</a>
            <li><a href="#ref-for-propdef-background①">9.8.4. Render the snapshot with layered capture</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-border">
        <a
            href="https://www.w3.org/TR/css-backgrounds-3/#propdef-border">https://www.w3.org/TR/css-backgrounds-3/#propdef-border</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-border">9.8.4. Render the snapshot with layered capture</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-border-image">
        <a
            href="https://www.w3.org/TR/css-backgrounds-3/#propdef-border-image">https://www.w3.org/TR/css-backgrounds-3/#propdef-border-image</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-border-image">8.2. Table of captured CSS properties
                    {#layered-captured-css-properties}</a>
            <li><a href="#ref-for-propdef-border-image①">9.8.4. Render the snapshot with layered capture</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-border-bottom">
        <a
            href="https://drafts.csswg.org/css-borders-4/#propdef-border-bottom">https://drafts.csswg.org/css-borders-4/#propdef-border-bottom</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-border-bottom">8.2. Table of captured CSS properties
                    {#layered-captured-css-properties}</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-border-left">
        <a
            href="https://drafts.csswg.org/css-borders-4/#propdef-border-left">https://drafts.csswg.org/css-borders-4/#propdef-border-left</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-border-left">8.2. Table of captured CSS properties
                    {#layered-captured-css-properties}</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-border-radius">
        <a
            href="https://drafts.csswg.org/css-borders-4/#propdef-border-radius">https://drafts.csswg.org/css-borders-4/#propdef-border-radius</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-border-radius">7.1. Overview</a>
            <li><a href="#ref-for-propdef-border-radius①">8.2. Table of captured CSS properties
                    {#layered-captured-css-properties}</a>
            <li><a href="#ref-for-propdef-border-radius②">9.8.4. Render the snapshot with layered capture</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-border-right">
        <a
            href="https://drafts.csswg.org/css-borders-4/#propdef-border-right">https://drafts.csswg.org/css-borders-4/#propdef-border-right</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-border-right">8.2. Table of captured CSS properties
                    {#layered-captured-css-properties}</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-border-top">
        <a
            href="https://drafts.csswg.org/css-borders-4/#propdef-border-top">https://drafts.csswg.org/css-borders-4/#propdef-border-top</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-border-top">8.2. Table of captured CSS properties
                    {#layered-captured-css-properties}</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-box-shadow">
        <a
            href="https://drafts.csswg.org/css-borders-4/#propdef-box-shadow">https://drafts.csswg.org/css-borders-4/#propdef-box-shadow</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-box-shadow">8.1. Overview</a>
            <li><a href="#ref-for-propdef-box-shadow①">8.2. Table of captured CSS properties
                    {#layered-captured-css-properties}</a>
            <li><a href="#ref-for-propdef-box-shadow②">9.8.4. Render the snapshot with layered capture</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-border-box">
        <a href="https://www.w3.org/TR/css-box-4/#border-box">https://www.w3.org/TR/css-box-4/#border-box</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-border-box">9.7.7. Adjust the group’s transform to be relative to its containing
                    ::view-transition-group()</a>
            <li><a href="#ref-for-border-box①">9.8.1. Compute the layered-capture style</a>
            <li><a href="#ref-for-border-box②">9.8.3. Adjustment to image capture size</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-content-box">
        <a href="https://www.w3.org/TR/css-box-4/#content-box">https://www.w3.org/TR/css-box-4/#content-box</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-content-box">9.8.1. Compute the layered-capture style</a> <a
                    href="#ref-for-content-box①">(2)</a>
            <li><a href="#ref-for-content-box②">9.8.3. Adjustment to image capture size</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-padding">
        <a
            href="https://www.w3.org/TR/css-box-4/#propdef-padding">https://www.w3.org/TR/css-box-4/#propdef-padding</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-padding">8.2. Table of captured CSS properties
                    {#layered-captured-css-properties}</a>
            <li><a href="#ref-for-propdef-padding①">9.8.7. Apply the new layered-capture properties to
                    ::view-transition-group()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-padding-box">
        <a href="https://www.w3.org/TR/css-box-4/#padding-box">https://www.w3.org/TR/css-box-4/#padding-box</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-padding-box">9.8.1. Compute the layered-capture style</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-padding-edge">
        <a href="https://www.w3.org/TR/css-box-4/#padding-edge">https://www.w3.org/TR/css-box-4/#padding-edge</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-padding-edge">9.8.5. Adjust the nested group transform</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-computed-value">
        <a
            href="https://www.w3.org/TR/css-cascade-5/#computed-value">https://www.w3.org/TR/css-cascade-5/#computed-value</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-computed-value">6.3. Additions to view-transition-name</a>
            <li><a href="#ref-for-computed-value①">9.3. Resolving the @view-transition rule</a> <a
                    href="#ref-for-computed-value②">(2)</a> <a href="#ref-for-computed-value③">(3)</a> <a
                    href="#ref-for-computed-value④">(4)</a>
            <li><a href="#ref-for-computed-value⑤">9.6. Capturing the view-transition-class</a>
            <li><a href="#ref-for-computed-value⑥">9.7.1. Resolving the view-transition-group value</a>
            <li><a href="#ref-for-computed-value⑦">9.8.1. Compute the layered-capture style</a> <a
                    href="#ref-for-computed-value⑧">(2)</a> <a href="#ref-for-computed-value⑨">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-used-value">
        <a href="https://www.w3.org/TR/css-cascade-5/#used-value">https://www.w3.org/TR/css-cascade-5/#used-value</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-used-value">6.3. Additions to view-transition-name</a>
            <li><a href="#ref-for-used-value①">7.3. The view-transition-group property</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-opacity">
        <a
            href="https://www.w3.org/TR/css-color-4/#propdef-opacity">https://www.w3.org/TR/css-color-4/#propdef-opacity</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-opacity">7.1. Overview</a>
            <li><a href="#ref-for-propdef-opacity①">8.1. Overview</a>
            <li><a href="#ref-for-propdef-opacity②">8.2. Table of captured CSS properties
                    {#layered-captured-css-properties}</a>
            <li><a href="#ref-for-propdef-opacity③">9.8.4. Render the snapshot with layered capture</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-at-ruledef-media">
        <a
            href="https://www.w3.org/TR/css-conditional-3/#at-ruledef-media">https://www.w3.org/TR/css-conditional-3/#at-ruledef-media</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-at-ruledef-media">2.3.1. The @view-transition rule</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-at-ruledef-supports">
        <a
            href="https://www.w3.org/TR/css-conditional-3/#at-ruledef-supports">https://www.w3.org/TR/css-conditional-3/#at-ruledef-supports</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-at-ruledef-supports">2.3.1. The @view-transition rule</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-conditional-group-rule">
        <a
            href="https://www.w3.org/TR/css-conditional-3/#conditional-group-rule">https://www.w3.org/TR/css-conditional-3/#conditional-group-rule</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-conditional-group-rule">2.3.1. The @view-transition rule</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-element-contents">
        <a
            href="https://drafts.csswg.org/css-contain-2/#element-contents">https://drafts.csswg.org/css-contain-2/#element-contents</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-element-contents">9.8.4. Render the snapshot with layered capture</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-natural-dimensions">
        <a
            href="https://www.w3.org/TR/css-images-3/#natural-dimensions">https://www.w3.org/TR/css-images-3/#natural-dimensions</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-natural-dimensions">9.8.3. Adjustment to image capture size</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-clip-path">
        <a
            href="https://www.w3.org/TR/css-masking-1/#propdef-clip-path">https://www.w3.org/TR/css-masking-1/#propdef-clip-path</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-clip-path">7.1. Overview</a>
            <li><a href="#ref-for-propdef-clip-path①">8.1. Overview</a>
            <li><a href="#ref-for-propdef-clip-path②">8.2. Table of captured CSS properties
                    {#layered-captured-css-properties}</a>
            <li><a href="#ref-for-propdef-clip-path③">9.8.4. Render the snapshot with layered capture</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-mask">
        <a
            href="https://www.w3.org/TR/css-masking-1/#propdef-mask">https://www.w3.org/TR/css-masking-1/#propdef-mask</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-mask">8.1. Overview</a>
            <li><a href="#ref-for-propdef-mask①">8.2. Table of captured CSS properties
                    {#layered-captured-css-properties}</a>
            <li><a href="#ref-for-propdef-mask②">9.8.4. Render the snapshot with layered capture</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-mask-image">
        <a
            href="https://www.w3.org/TR/css-masking-1/#propdef-mask-image">https://www.w3.org/TR/css-masking-1/#propdef-mask-image</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-mask-image">7.1. Overview</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-overflow">
        <a
            href="https://www.w3.org/TR/css-overflow-3/#propdef-overflow">https://www.w3.org/TR/css-overflow-3/#propdef-overflow</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-overflow">7.1. Overview</a>
            <li><a href="#ref-for-propdef-overflow①">8.1. Overview</a>
            <li><a href="#ref-for-propdef-overflow②">9.8.1. Compute the layered-capture style</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-valdef-position-relative">
        <a
            href="https://www.w3.org/TR/css-position-3/#valdef-position-relative">https://www.w3.org/TR/css-position-3/#valdef-position-relative</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-valdef-position-relative">9.8.7. Apply the new layered-capture properties to
                    ::view-transition-group()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-flat-tree">
        <a
            href="https://drafts.csswg.org/css-scoping-1/#flat-tree">https://drafts.csswg.org/css-scoping-1/#flat-tree</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-flat-tree">9.7.2. Resolving the containing group name</a>
            <li><a href="#ref-for-flat-tree①">9.7.3. Resolving the group name</a> <a href="#ref-for-flat-tree②">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-css-tree-scoped-name">
        <a
            href="https://drafts.csswg.org/css-scoping-1/#css-tree-scoped-name">https://drafts.csswg.org/css-scoping-1/#css-tree-scoped-name</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-css-tree-scoped-name">4.3. The view-transition-class property</a>
            <li><a href="#ref-for-css-tree-scoped-name①">6.3. Additions to view-transition-name</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-selectordef-part">
        <a
            href="https://www.w3.org/TR/css-shadow-parts-1/#selectordef-part">https://www.w3.org/TR/css-shadow-parts-1/#selectordef-part</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-selectordef-part">6.3. Additions to view-transition-name</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-valdef-box-sizing-border-box">
        <a
            href="https://www.w3.org/TR/css-sizing-3/#valdef-box-sizing-border-box">https://www.w3.org/TR/css-sizing-3/#valdef-box-sizing-border-box</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-valdef-box-sizing-border-box">9.2.1. Captured elements extension</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-box-sizing">
        <a
            href="https://www.w3.org/TR/css-sizing-3/#propdef-box-sizing">https://www.w3.org/TR/css-sizing-3/#propdef-box-sizing</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-box-sizing">8.2. Table of captured CSS properties
                    {#layered-captured-css-properties}</a>
            <li><a href="#ref-for-propdef-box-sizing①">9.8.1. Compute the layered-capture style</a> <a
                    href="#ref-for-propdef-box-sizing②">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-valdef-box-sizing-content-box">
        <a
            href="https://www.w3.org/TR/css-sizing-3/#valdef-box-sizing-content-box">https://www.w3.org/TR/css-sizing-3/#valdef-box-sizing-content-box</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-valdef-box-sizing-content-box">9.2.1. Captured elements extension</a>
            <li><a href="#ref-for-valdef-box-sizing-content-box①">9.8.1. Compute the layered-capture style</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-typedef-declaration-list">
        <a
            href="https://www.w3.org/TR/css-syntax-3/#typedef-declaration-list">https://www.w3.org/TR/css-syntax-3/#typedef-declaration-list</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-typedef-declaration-list">2.3.1. The @view-transition rule</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-identity-transform-function">
        <a
            href="https://www.w3.org/TR/css-transforms-1/#identity-transform-function">https://www.w3.org/TR/css-transforms-1/#identity-transform-function</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-identity-transform-function">9.2.1. Captured elements extension</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-transform">
        <a
            href="https://www.w3.org/TR/css-transforms-1/#propdef-transform">https://www.w3.org/TR/css-transforms-1/#propdef-transform</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-transform">7.1. Overview</a>
            <li><a href="#ref-for-propdef-transform①">9.7.7. Adjust the group’s transform to be relative to its
                    containing ::view-transition-group()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-perspective">
        <a
            href="https://www.w3.org/TR/css-transforms-2/#propdef-perspective">https://www.w3.org/TR/css-transforms-2/#propdef-perspective</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-perspective">7.1. Overview</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-transform-style">
        <a
            href="https://www.w3.org/TR/css-transforms-2/#propdef-transform-style">https://www.w3.org/TR/css-transforms-2/#propdef-transform-style</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-transform-style">7.1. Overview</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-outline">
        <a href="https://www.w3.org/TR/css-ui-4/#propdef-outline">https://www.w3.org/TR/css-ui-4/#propdef-outline</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-outline">8.2. Table of captured CSS properties
                    {#layered-captured-css-properties}</a>
            <li><a href="#ref-for-propdef-outline①">9.8.4. Render the snapshot with layered capture</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-mult-comma">
        <a href="https://www.w3.org/TR/css-values-4/#mult-comma">https://www.w3.org/TR/css-values-4/#mult-comma</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-mult-comma">3.3.2. The :active-view-transition-type() pseudo-class</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-mult-one-plus">
        <a
            href="https://www.w3.org/TR/css-values-4/#mult-one-plus">https://www.w3.org/TR/css-values-4/#mult-one-plus</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-mult-one-plus">3.5. Activating the transition type for cross-document view
                    transitions</a>
            <li><a href="#ref-for-mult-one-plus①">4.3. The view-transition-class property</a>
            <li><a href="#ref-for-mult-one-plus②">4.4. Additions to named view transition pseudo-elements</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-identifier-value">
        <a
            href="https://www.w3.org/TR/css-values-4/#identifier-value">https://www.w3.org/TR/css-values-4/#identifier-value</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-identifier-value">3.3.2. The :active-view-transition-type() pseudo-class</a> <a
                    href="#ref-for-identifier-value①">(2)</a>
            <li><a href="#ref-for-identifier-value②">3.4. Changing the types of an ongoing view transition</a>
            <li><a href="#ref-for-identifier-value③">3.5. Activating the transition type for cross-document view
                    transitions</a>
            <li><a href="#ref-for-identifier-value④">4.3. The view-transition-class property</a> <a
                    href="#ref-for-identifier-value⑤">(2)</a> <a href="#ref-for-identifier-value⑥">(3)</a> <a
                    href="#ref-for-identifier-value⑦">(4)</a> <a href="#ref-for-identifier-value⑧">(5)</a>
            <li><a href="#ref-for-identifier-value⑨">4.4. Additions to named view transition pseudo-elements</a> <a
                    href="#ref-for-identifier-value①⓪">(2)</a> <a href="#ref-for-identifier-value①①">(3)</a> <a
                    href="#ref-for-identifier-value①②">(4)</a>
            <li><a href="#ref-for-identifier-value①③">6.3. Additions to view-transition-name</a>
            <li><a href="#ref-for-identifier-value①④">7.3. The view-transition-group property</a>
            <li><a href="#ref-for-identifier-value①⑤">9.7.3. Resolving the group name</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-mult-opt">
        <a href="https://www.w3.org/TR/css-values-4/#mult-opt">https://www.w3.org/TR/css-values-4/#mult-opt</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-mult-opt">4.4. Additions to named view transition pseudo-elements</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-comb-one">
        <a href="https://www.w3.org/TR/css-values-4/#comb-one">https://www.w3.org/TR/css-values-4/#comb-one</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-comb-one">2.3.2. The navigation descriptor</a>
            <li><a href="#ref-for-comb-one①">3.5. Activating the transition type for cross-document view transitions</a>
            <li><a href="#ref-for-comb-one②">4.3. The view-transition-class property</a>
            <li><a href="#ref-for-comb-one③">4.4. Additions to named view transition pseudo-elements</a>
            <li><a href="#ref-for-comb-one④">7.3. The view-transition-group property</a> <a
                    href="#ref-for-comb-one⑤">(2)</a> <a href="#ref-for-comb-one⑥">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-selectordef-view-transition">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#selectordef-view-transition">https://www.w3.org/TR/css-view-transitions-1/#selectordef-view-transition</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-selectordef-view-transition">7.1. Overview</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-selectordef-view-transition-group">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#selectordef-view-transition-group">https://www.w3.org/TR/css-view-transitions-1/#selectordef-view-transition-group</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-selectordef-view-transition-group">4.3. The view-transition-class property</a>
            <li><a href="#ref-for-selectordef-view-transition-group①">6.3. Additions to view-transition-name</a>
            <li><a href="#ref-for-selectordef-view-transition-group②">7.1. Overview</a> <a
                    href="#ref-for-selectordef-view-transition-group③">(2)</a>
            <li><a href="#ref-for-selectordef-view-transition-group④">7.3. The view-transition-group property</a> <a
                    href="#ref-for-selectordef-view-transition-group⑤">(2)</a>
            <li><a href="#ref-for-selectordef-view-transition-group⑥">9.7.6. Reparent a ::view-transition-group() to its
                    specified containing group</a> <a href="#ref-for-selectordef-view-transition-group⑦">(2)</a> <a
                    href="#ref-for-selectordef-view-transition-group⑧">(3)</a>
            <li><a href="#ref-for-selectordef-view-transition-group⑨">9.7.7. Adjust the group’s transform to be relative
                    to its containing ::view-transition-group()</a>
            <li><a href="#ref-for-selectordef-view-transition-group①⓪">9.8.6. Apply the old layered-capture properties
                    to ::view-transition-group() keyframes</a>
            <li><a href="#ref-for-selectordef-view-transition-group①①">9.8.7. Apply the new layered-capture properties
                    to ::view-transition-group()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-selectordef-view-transition-image-pair">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#selectordef-view-transition-image-pair">https://www.w3.org/TR/css-view-transitions-1/#selectordef-view-transition-image-pair</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-selectordef-view-transition-image-pair">4.3. The view-transition-class property</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-selectordef-view-transition-new">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#selectordef-view-transition-new">https://www.w3.org/TR/css-view-transitions-1/#selectordef-view-transition-new</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-selectordef-view-transition-new">4.3. The view-transition-class property</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-selectordef-view-transition-old">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#selectordef-view-transition-old">https://www.w3.org/TR/css-view-transitions-1/#selectordef-view-transition-old</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-selectordef-view-transition-old">4.3. The view-transition-class property</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-typedef-pt-name-selector">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#typedef-pt-name-selector">https://www.w3.org/TR/css-view-transitions-1/#typedef-pt-name-selector</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-typedef-pt-name-selector">4.4. Additions to named view transition pseudo-elements</a>
                <a href="#ref-for-typedef-pt-name-selector①">(2)</a> <a
                    href="#ref-for-typedef-pt-name-selector②">(3)</a> <a
                    href="#ref-for-typedef-pt-name-selector③">(4)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-viewtransition">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition">https://www.w3.org/TR/css-view-transitions-1/#viewtransition</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-viewtransition">2.1.3. Customization</a> <a href="#ref-for-viewtransition①">(2)</a> <a
                    href="#ref-for-viewtransition②">(3)</a>
            <li><a href="#ref-for-viewtransition③">2.1.4. Lifecycle</a> <a href="#ref-for-viewtransition④">(2)</a> <a
                    href="#ref-for-viewtransition⑤">(3)</a>
            <li><a href="#ref-for-viewtransition⑥">2.2. Examples</a>
            <li><a href="#ref-for-viewtransition⑦">2.3.1. The @view-transition rule</a>
            <li><a href="#ref-for-viewtransition⑧">3.1. Overview</a>
            <li><a href="#ref-for-viewtransition⑨">3.4. Changing the types of an ongoing view transition</a> <a
                    href="#ref-for-viewtransition①⓪">(2)</a>
            <li><a href="#ref-for-viewtransition①①">5. Extending document.startViewTransition()</a> <a
                    href="#ref-for-viewtransition①②">(2)</a>
            <li><a href="#ref-for-viewtransition①③">9.1.2. Additions to ViewTransition</a> <a
                    href="#ref-for-viewtransition①④">(2)</a>
            <li><a href="#ref-for-viewtransition①⑤">9.4.2. Setup the outbound transition when ready to swap pages</a> <a
                    href="#ref-for-viewtransition①⑥">(2)</a>
            <li><a href="#ref-for-viewtransition①⑦">9.4.4. Proceed with navigation if view transition is skipped</a>
            <li><a href="#ref-for-viewtransition①⑧">9.5. Activating the view transition in the new Document</a>
            <li><a href="#ref-for-viewtransition①⑨">9.7.2. Resolving the containing group name</a>
            <li><a href="#ref-for-viewtransition②⓪">9.7.3. Resolving the group name</a>
            <li><a href="#ref-for-viewtransition②①">9.7.4. Compute the old view-transition-group</a>
            <li><a href="#ref-for-viewtransition②②">9.7.5. Compute the new view-transition-group</a>
            <li><a href="#ref-for-viewtransition②③">9.7.7. Adjust the group’s transform to be relative to its containing
                    ::view-transition-group()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-callbackdef-viewtransitionupdatecallback">
        <a
            href="https://drafts.csswg.org/css-view-transitions-1/#callbackdef-viewtransitionupdatecallback">https://drafts.csswg.org/css-view-transitions-1/#callbackdef-viewtransitionupdatecallback</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-callbackdef-viewtransitionupdatecallback">5. Extending
                    document.startViewTransition()</a> <a
                    href="#ref-for-callbackdef-viewtransitionupdatecallback①">(2)</a> <a
                    href="#ref-for-callbackdef-viewtransitionupdatecallback②">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-activate-view-transition">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#activate-view-transition">https://www.w3.org/TR/css-view-transitions-1/#activate-view-transition</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-activate-view-transition">2.1.4. Lifecycle</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-document-active-view-transition">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#document-active-view-transition">https://www.w3.org/TR/css-view-transitions-1/#document-active-view-transition</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-document-active-view-transition">1. Introduction</a>
            <li><a href="#ref-for-document-active-view-transition①">3.1. Overview</a> <a
                    href="#ref-for-document-active-view-transition②">(2)</a>
            <li><a href="#ref-for-document-active-view-transition③">3.3.1. The :active-view-transition pseudo-class</a>
                <a href="#ref-for-document-active-view-transition④">(2)</a>
            <li><a href="#ref-for-document-active-view-transition⑤">3.3.2. The :active-view-transition-type()
                    pseudo-class</a> <a href="#ref-for-document-active-view-transition⑥">(2)</a>
            <li><a href="#ref-for-document-active-view-transition⑦">5. Extending document.startViewTransition()</a>
            <li><a href="#ref-for-document-active-view-transition⑧">6.3. Additions to view-transition-name</a>
            <li><a href="#ref-for-document-active-view-transition⑨">9.4.2. Setup the outbound transition when ready to
                    swap pages</a> <a href="#ref-for-document-active-view-transition①⓪">(2)</a> <a
                    href="#ref-for-document-active-view-transition①①">(3)</a> <a
                    href="#ref-for-document-active-view-transition①②">(4)</a>
            <li><a href="#ref-for-document-active-view-transition①③">9.4.5. Proceed with cross-document view transition
                    after capturing the old state</a> <a href="#ref-for-document-active-view-transition①④">(2)</a>
            <li><a href="#ref-for-document-active-view-transition①⑤">9.5. Activating the view transition in the new
                    Document</a> <a href="#ref-for-document-active-view-transition①⑥">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-capture-the-new-state">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#capture-the-new-state">https://www.w3.org/TR/css-view-transitions-1/#capture-the-new-state</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-capture-the-new-state">2.1.4. Lifecycle</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-capture-the-old-state">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#capture-the-old-state">https://www.w3.org/TR/css-view-transitions-1/#capture-the-old-state</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-capture-the-old-state">2.1.4. Lifecycle</a>
            <li><a href="#ref-for-capture-the-old-state①">9.4.5. Proceed with cross-document view transition after
                    capturing the old state</a> <a href="#ref-for-capture-the-old-state②">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-captured-element">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#captured-element">https://www.w3.org/TR/css-view-transitions-1/#captured-element</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-captured-element">2.1.4. Lifecycle</a>
            <li><a href="#ref-for-captured-element①">9.1.3. Serializable view transition params</a>
            <li><a href="#ref-for-captured-element②">9.2.1. Captured elements extension</a>
            <li><a href="#ref-for-captured-element③">9.6. Capturing the view-transition-class</a>
            <li><a href="#ref-for-captured-element④">9.7.4. Compute the old view-transition-group</a>
            <li><a href="#ref-for-captured-element⑤">9.7.5. Compute the new view-transition-group</a>
            <li><a href="#ref-for-captured-element⑥">9.7.6. Reparent a ::view-transition-group() to its specified
                    containing group</a>
            <li><a href="#ref-for-captured-element⑦">9.7.7. Adjust the group’s transform to be relative to its
                    containing ::view-transition-group()</a>
            <li><a href="#ref-for-captured-element⑧">9.8.2. Capture the old layered properties</a>
            <li><a href="#ref-for-captured-element⑨">9.8.6. Apply the old layered-capture properties to
                    ::view-transition-group() keyframes</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-capture-the-image">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#capture-the-image">https://www.w3.org/TR/css-view-transitions-1/#capture-the-image</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-capture-the-image">9.8.3. Adjustment to image capture size</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-document-scoped-view-transition-name">
        <a
            href="https://drafts.csswg.org/css-view-transitions-1/#document-scoped-view-transition-name">https://drafts.csswg.org/css-view-transitions-1/#document-scoped-view-transition-name</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-document-scoped-view-transition-name">9.7.2. Resolving the containing group name</a>
            <li><a href="#ref-for-document-scoped-view-transition-name①">9.7.3. Resolving the group name</a> <a
                    href="#ref-for-document-scoped-view-transition-name②">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-viewtransition-finished">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#dom-viewtransition-finished">https://www.w3.org/TR/css-view-transitions-1/#dom-viewtransition-finished</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-viewtransition-finished">2.1.3.1. Handling the view transition in the old
                    document</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-captured-element-group-styles-rule">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#captured-element-group-styles-rule">https://www.w3.org/TR/css-view-transitions-1/#captured-element-group-styles-rule</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-captured-element-group-styles-rule">9.7.7. Adjust the group’s transform to be relative
                    to its containing ::view-transition-group()</a>
            <li><a href="#ref-for-captured-element-group-styles-rule①">9.8.7. Apply the new layered-capture properties
                    to ::view-transition-group()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-viewtransition-initial-snapshot-containing-block-size">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition-initial-snapshot-containing-block-size">https://www.w3.org/TR/css-view-transitions-1/#viewtransition-initial-snapshot-containing-block-size</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-viewtransition-initial-snapshot-containing-block-size">9.4.5. Proceed with
                    cross-document view transition after capturing the old state</a>
            <li><a href="#ref-for-viewtransition-initial-snapshot-containing-block-size①">9.5. Activating the view
                    transition in the new Document</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-viewtransition-named-elements">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition-named-elements">https://www.w3.org/TR/css-view-transitions-1/#viewtransition-named-elements</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-viewtransition-named-elements">4.4. Additions to named view transition
                    pseudo-elements</a>
            <li><a href="#ref-for-viewtransition-named-elements①">9.4.5. Proceed with cross-document view transition
                    after capturing the old state</a>
            <li><a href="#ref-for-viewtransition-named-elements②">9.5. Activating the view transition in the new
                    Document</a>
            <li><a href="#ref-for-viewtransition-named-elements③">9.7.6. Reparent a ::view-transition-group() to its
                    specified containing group</a>
            <li><a href="#ref-for-viewtransition-named-elements④">9.7.7. Adjust the group’s transform to be relative to
                    its containing ::view-transition-group()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-named-view-transition-pseudo-elements">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#named-view-transition-pseudo-elements">https://www.w3.org/TR/css-view-transitions-1/#named-view-transition-pseudo-elements</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-named-view-transition-pseudo-elements">4.1. Overview</a>
            <li><a href="#ref-for-named-view-transition-pseudo-elements①">4.3. The view-transition-class property</a> <a
                    href="#ref-for-named-view-transition-pseudo-elements②">(2)</a> <a
                    href="#ref-for-named-view-transition-pseudo-elements③">(3)</a>
            <li><a href="#ref-for-named-view-transition-pseudo-elements④">4.4. Additions to named view transition
                    pseudo-elements</a> <a href="#ref-for-named-view-transition-pseudo-elements⑤">(2)</a> <a
                    href="#ref-for-named-view-transition-pseudo-elements⑥">(3)</a> <a
                    href="#ref-for-named-view-transition-pseudo-elements⑦">(4)</a>
            <li><a href="#ref-for-named-view-transition-pseudo-elements⑧">7.3. The view-transition-group property</a> <a
                    href="#ref-for-named-view-transition-pseudo-elements⑨">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-valdef-view-transition-name-none">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#valdef-view-transition-name-none">https://www.w3.org/TR/css-view-transitions-1/#valdef-view-transition-name-none</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-valdef-view-transition-name-none">7.3. The view-transition-group property</a>
            <li><a href="#ref-for-valdef-view-transition-name-none①">9.7.2. Resolving the containing group name</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-captured-element-old-height">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#captured-element-old-height">https://www.w3.org/TR/css-view-transitions-1/#captured-element-old-height</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-captured-element-old-height">9.7.6. Reparent a ::view-transition-group() to its
                    specified containing group</a>
            <li><a href="#ref-for-captured-element-old-height①">9.8.2. Capture the old layered properties</a>
            <li><a href="#ref-for-captured-element-old-height②">9.8.7. Apply the new layered-capture properties to
                    ::view-transition-group()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-captured-element-old-transform">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#captured-element-old-transform">https://www.w3.org/TR/css-view-transitions-1/#captured-element-old-transform</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-captured-element-old-transform">9.7.6. Reparent a ::view-transition-group() to its
                    specified containing group</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-captured-element-old-width">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#captured-element-old-width">https://www.w3.org/TR/css-view-transitions-1/#captured-element-old-width</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-captured-element-old-width">9.7.6. Reparent a ::view-transition-group() to its
                    specified containing group</a>
            <li><a href="#ref-for-captured-element-old-width①">9.8.2. Capture the old layered properties</a>
            <li><a href="#ref-for-captured-element-old-width②">9.8.7. Apply the new layered-capture properties to
                    ::view-transition-group()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-perform-pending-transition-operations">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#perform-pending-transition-operations">https://www.w3.org/TR/css-view-transitions-1/#perform-pending-transition-operations</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-perform-pending-transition-operations">9.4.2. Setup the outbound transition when ready
                    to swap pages</a>
            <li><a href="#ref-for-perform-pending-transition-operations①">9.4.5. Proceed with cross-document view
                    transition after capturing the old state</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-viewtransition-phase">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition-phase">https://www.w3.org/TR/css-view-transitions-1/#viewtransition-phase</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-viewtransition-phase">9.4.2. Setup the outbound transition when ready to swap
                    pages</a>
            <li><a href="#ref-for-viewtransition-phase①">9.4.5. Proceed with cross-document view transition after
                    capturing the old state</a>
            <li><a href="#ref-for-viewtransition-phase②">9.5. Activating the view transition in the new Document</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-viewtransition-ready">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#dom-viewtransition-ready">https://www.w3.org/TR/css-view-transitions-1/#dom-viewtransition-ready</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-viewtransition-ready">2.1.3.2. Handling the view transition in the new
                    document</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-document-rendering-suppression-for-view-transitions">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#document-rendering-suppression-for-view-transitions">https://www.w3.org/TR/css-view-transitions-1/#document-rendering-suppression-for-view-transitions</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-document-rendering-suppression-for-view-transitions">9.4.5. Proceed with
                    cross-document view transition after capturing the old state</a> <a
                    href="#ref-for-document-rendering-suppression-for-view-transitions①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-skip-the-view-transition">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#skip-the-view-transition">https://www.w3.org/TR/css-view-transitions-1/#skip-the-view-transition</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-skip-the-view-transition">5. Extending document.startViewTransition()</a>
            <li><a href="#ref-for-skip-the-view-transition①">9.4.2. Setup the outbound transition when ready to swap
                    pages</a>
            <li><a href="#ref-for-skip-the-view-transition②">9.4.4. Proceed with navigation if view transition is
                    skipped</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-viewtransition-skiptransition">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#dom-viewtransition-skiptransition">https://www.w3.org/TR/css-view-transitions-1/#dom-viewtransition-skiptransition</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-viewtransition-skiptransition">2.1.4. Lifecycle</a> <a
                    href="#ref-for-dom-viewtransition-skiptransition①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-snapshot-containing-block">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#snapshot-containing-block">https://www.w3.org/TR/css-view-transitions-1/#snapshot-containing-block</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-snapshot-containing-block">7.1. Overview</a>
            <li><a href="#ref-for-snapshot-containing-block①">9.7.7. Adjust the group’s transform to be relative to its
                    containing ::view-transition-group()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-document-startviewtransition">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#dom-document-startviewtransition">https://www.w3.org/TR/css-view-transitions-1/#dom-document-startviewtransition</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-document-startviewtransition⑦">5. Extending document.startViewTransition()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-viewtransition-update-callback">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition-update-callback">https://www.w3.org/TR/css-view-transitions-1/#viewtransition-update-callback</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-viewtransition-update-callback">5. Extending document.startViewTransition()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-viewtransition-update-callback-done-promise">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition-update-callback-done-promise">https://www.w3.org/TR/css-view-transitions-1/#viewtransition-update-callback-done-promise</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-viewtransition-update-callback-done-promise">9.5. Activating the view transition in
                    the new Document</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-viewtransition-updatecallbackdone">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#dom-viewtransition-updatecallbackdone">https://www.w3.org/TR/css-view-transitions-1/#dom-viewtransition-updatecallbackdone</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-viewtransition-updatecallbackdone">2.1.4. Lifecycle</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-view-transition-name">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#view-transition-name">https://www.w3.org/TR/css-view-transitions-1/#view-transition-name</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-view-transition-name">9.7.6. Reparent a ::view-transition-group() to its specified
                    containing group</a> <a href="#ref-for-view-transition-name①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-view-transition-page-visibility-change-steps">
        <a
            href="https://drafts.csswg.org/css-view-transitions-1/#view-transition-page-visibility-change-steps">https://drafts.csswg.org/css-view-transitions-1/#view-transition-page-visibility-change-steps</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-view-transition-page-visibility-change-steps">9.2. Additions to the view transition
                    page-visibility change steps</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-view-transition-tree">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#view-transition-tree">https://www.w3.org/TR/css-view-transitions-1/#view-transition-tree</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-view-transition-tree">7.1. Overview</a> <a
                    href="#ref-for-view-transition-tree①">(2)</a>
            <li><a href="#ref-for-view-transition-tree②">7.2. Examples</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-view-transition-name">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#propdef-view-transition-name">https://www.w3.org/TR/css-view-transitions-1/#propdef-view-transition-name</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-view-transition-name">4.3. The view-transition-class property</a> <a
                    href="#ref-for-propdef-view-transition-name①">(2)</a> <a
                    href="#ref-for-propdef-view-transition-name②">(3)</a> <a
                    href="#ref-for-propdef-view-transition-name③">(4)</a> <a
                    href="#ref-for-propdef-view-transition-name④">(5)</a>
            <li><a href="#ref-for-propdef-view-transition-name⑤">4.4. Additions to named view transition
                    pseudo-elements</a>
            <li><a href="#ref-for-propdef-view-transition-name⑥">6. Determining view-transition-name automatically</a>
            <li><a href="#ref-for-propdef-view-transition-name⑦">6.1. Overview</a> <a
                    href="#ref-for-propdef-view-transition-name⑧">(2)</a> <a
                    href="#ref-for-propdef-view-transition-name⑨">(3)</a> <a
                    href="#ref-for-propdef-view-transition-name①⓪">(4)</a>
            <li><a href="#ref-for-propdef-view-transition-name①①">6.2. Examples</a>
            <li><a href="#ref-for-propdef-view-transition-name①②">6.3. Additions to view-transition-name</a> <a
                    href="#ref-for-propdef-view-transition-name①③">(2)</a> <a
                    href="#ref-for-propdef-view-transition-name①④">(3)</a> <a
                    href="#ref-for-propdef-view-transition-name①⑤">(4)</a> <a
                    href="#ref-for-propdef-view-transition-name①⑥">(5)</a>
            <li><a href="#ref-for-propdef-view-transition-name①⑦">7.3. The view-transition-group property</a> <a
                    href="#ref-for-propdef-view-transition-name①⑧">(2)</a> <a
                    href="#ref-for-propdef-view-transition-name①⑨">(3)</a>
            <li><a href="#ref-for-propdef-view-transition-name②⓪"> Changes from 2024-05-16 Working Draft </a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-element">
        <a href="https://drafts.csswg.org/css2/#element">https://drafts.csswg.org/css2/#element</a><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-element">9.6. Capturing the view-transition-class</a>
            <li><a href="#ref-for-element④">9.7.4. Compute the old view-transition-group</a>
            <li><a href="#ref-for-element⑤">9.7.5. Compute the new view-transition-group</a>
            <li><a href="#ref-for-element⑧">9.8.2. Capture the old layered properties</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-cssomstring">
        <a href="https://www.w3.org/TR/cssom-1/#cssomstring">https://www.w3.org/TR/cssom-1/#cssomstring</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-cssomstring">2.3.3. Accessing the @view-transition rule using CSSOM</a> <a
                    href="#ref-for-cssomstring①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-cssrule">
        <a href="https://www.w3.org/TR/cssom-1/#cssrule">https://www.w3.org/TR/cssom-1/#cssrule</a><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-cssrule">2.3.3. Accessing the @view-transition rule using CSSOM</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-document">
        <a href="https://dom.spec.whatwg.org/#document">https://dom.spec.whatwg.org/#document</a><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-document">2.1.4. Lifecycle</a> <a href="#ref-for-document①">(2)</a> <a
                    href="#ref-for-document②">(3)</a> <a href="#ref-for-document③">(4)</a> <a
                    href="#ref-for-document④">(5)</a> <a href="#ref-for-document⑤">(6)</a> <a
                    href="#ref-for-document⑥">(7)</a> <a href="#ref-for-document⑦">(8)</a> <a
                    href="#ref-for-document⑧">(9)</a>
            <li><a href="#ref-for-document⑨">2.3.1. The @view-transition rule</a>
            <li><a href="#ref-for-document①⓪">3.5. Activating the transition type for cross-document view
                    transitions</a>
            <li><a href="#ref-for-document①①">5. Extending document.startViewTransition()</a>
            <li><a href="#ref-for-document①②">6.3. Additions to view-transition-name</a>
            <li><a href="#ref-for-document①③">9.1.1. Additions to Document</a> <a href="#ref-for-document①④">(2)</a>
            <li><a href="#ref-for-document①⑤">9.3. Resolving the @view-transition rule</a>
            <li><a href="#ref-for-document①⑥">9.4. Setting up the view transition in the old Document</a>
            <li><a href="#ref-for-document①⑦">9.4.1. Check eligibility for outbound cross-document view transition</a>
                <a href="#ref-for-document①⑧">(2)</a>
            <li><a href="#ref-for-document①⑨">9.4.2. Setup the outbound transition when ready to swap pages</a> <a
                    href="#ref-for-document②⓪">(2)</a>
            <li><a href="#ref-for-document②①">9.4.3. Update the opt-in flag to reflect the current state</a>
            <li><a href="#ref-for-document②②">9.4.5. Proceed with cross-document view transition after capturing the old
                    state</a>
            <li><a href="#ref-for-document②③">9.5. Activating the view transition in the new Document</a> <a
                    href="#ref-for-document②④">(2)</a>
            <li><a href="#ref-for-document②⑤">Security Considerations</a> <a href="#ref-for-document②⑥">(2)</a> <a
                    href="#ref-for-document②⑦">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-element">
        <a href="https://dom.spec.whatwg.org/#element">https://dom.spec.whatwg.org/#element</a><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-element①">9.7.1. Resolving the view-transition-group value</a>
            <li><a href="#ref-for-element②">9.7.2. Resolving the containing group name</a>
            <li><a href="#ref-for-element③">9.7.3. Resolving the group name</a>
            <li><a href="#ref-for-element⑥">9.8.1. Compute the layered-capture style</a> <a
                    href="#ref-for-element⑦">(2)</a>
            <li><a href="#ref-for-element⑨">9.8.7. Apply the new layered-capture properties to
                    ::view-transition-group()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-tree-ancestor">
        <a
            href="https://dom.spec.whatwg.org/#concept-tree-ancestor">https://dom.spec.whatwg.org/#concept-tree-ancestor</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-tree-ancestor">9.7.2. Resolving the containing group name</a>
            <li><a href="#ref-for-concept-tree-ancestor①">9.7.3. Resolving the group name</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-class">
        <a href="https://dom.spec.whatwg.org/#concept-class">https://dom.spec.whatwg.org/#concept-class</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-class">4.1. Overview</a> <a href="#ref-for-concept-class①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-document">
        <a href="https://dom.spec.whatwg.org/#concept-document">https://dom.spec.whatwg.org/#concept-document</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-document">1. Introduction</a>
            <li><a href="#ref-for-concept-document①">9.4.1. Check eligibility for outbound cross-document view
                    transition</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-document-element">
        <a href="https://dom.spec.whatwg.org/#document-element">https://dom.spec.whatwg.org/#document-element</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-document-element">3.1. Overview</a> <a href="#ref-for-document-element①">(2)</a>
            <li><a href="#ref-for-document-element②">3.3.1. The :active-view-transition pseudo-class</a>
            <li><a href="#ref-for-document-element③">3.3.2. The :active-view-transition-type() pseudo-class</a>
            <li><a href="#ref-for-document-element④">9.7.7. Adjust the group’s transform to be relative to its
                    containing ::view-transition-group()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-id">
        <a href="https://dom.spec.whatwg.org/#concept-id">https://dom.spec.whatwg.org/#concept-id</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-id">6.1. Overview</a>
            <li><a href="#ref-for-concept-id①">6.3. Additions to view-transition-name</a> <a
                    href="#ref-for-concept-id②">(2)</a> <a href="#ref-for-concept-id③">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-node-document">
        <a
            href="https://dom.spec.whatwg.org/#concept-node-document">https://dom.spec.whatwg.org/#concept-node-document</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-node-document">3.3.1. The :active-view-transition pseudo-class</a>
            <li><a href="#ref-for-concept-node-document①">3.3.2. The :active-view-transition-type() pseudo-class</a>
            <li><a href="#ref-for-concept-node-document②">6.3. Additions to view-transition-name</a>
            <li><a href="#ref-for-concept-node-document③">9.6. Capturing the view-transition-class</a>
            <li><a href="#ref-for-concept-node-document④">9.7.1. Resolving the view-transition-group value</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-document-origin">
        <a
            href="https://dom.spec.whatwg.org/#concept-document-origin">https://dom.spec.whatwg.org/#concept-document-origin</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-document-origin">9.4.1. Check eligibility for outbound cross-document view
                    transition</a> <a href="#ref-for-concept-document-origin①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-tree-root">
        <a href="https://dom.spec.whatwg.org/#concept-tree-root">https://dom.spec.whatwg.org/#concept-tree-root</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-tree-root">6.3. Additions to view-transition-name</a> <a
                    href="#ref-for-concept-tree-root①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-filter">
        <a
            href="https://www.w3.org/TR/filter-effects-1/#propdef-filter">https://www.w3.org/TR/filter-effects-1/#propdef-filter</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-filter">7.1. Overview</a>
            <li><a href="#ref-for-propdef-filter①">8.1. Overview</a> <a href="#ref-for-propdef-filter②">(2)</a>
            <li><a href="#ref-for-propdef-filter③">8.2. Table of captured CSS properties
                    {#layered-captured-css-properties}</a>
            <li><a href="#ref-for-propdef-filter④">9.8.4. Render the snapshot with layered capture</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-matrix">
        <a href="https://www.w3.org/TR/geometry-1/#matrix">https://www.w3.org/TR/geometry-1/#matrix</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-matrix">9.2.1. Captured elements extension</a>
            <li><a href="#ref-for-matrix①">9.8.5. Adjust the nested group transform</a> <a
                    href="#ref-for-matrix②">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-multiply">
        <a href="https://www.w3.org/TR/geometry-1/#multiply">https://www.w3.org/TR/geometry-1/#multiply</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-multiply">9.8.5. Adjust the nested group transform</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dfn-duration">
        <a href="https://www.w3.org/TR/hr-time-3/#dfn-duration">https://www.w3.org/TR/hr-time-3/#dfn-duration</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dfn-duration">9.4.2. Setup the outbound transition when ready to swap pages</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-htmllinkelement">
        <a
            href="https://html.spec.whatwg.org/multipage/semantics.html#htmllinkelement">https://html.spec.whatwg.org/multipage/semantics.html#htmllinkelement</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-htmllinkelement">2.1.2. Waiting for the new state to stabilize</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-navigationtype">
        <a
            href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#navigationtype">https://html.spec.whatwg.org/multipage/nav-history-apis.html#navigationtype</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-navigationtype">2.3.2. The navigation descriptor</a>
            <li><a href="#ref-for-navigationtype①">9.4.1. Check eligibility for outbound cross-document view
                    transition</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-pageswapevent">
        <a
            href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#pageswapevent">https://html.spec.whatwg.org/multipage/nav-history-apis.html#pageswapevent</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-pageswapevent">2.1.3.1. Handling the view transition in the old document</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-pageswapevent-activation">
        <a
            href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-pageswapevent-activation">https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-pageswapevent-activation</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-pageswapevent-activation">2.1.3.1. Handling the view transition in the old
                    document</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-script-blocking">
        <a
            href="https://html.spec.whatwg.org/multipage/scripting.html#dom-script-blocking">https://html.spec.whatwg.org/multipage/scripting.html#dom-script-blocking</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-script-blocking">2.1.2. Waiting for the new state to stabilize</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-style-blocking">
        <a
            href="https://html.spec.whatwg.org/multipage/semantics.html#dom-style-blocking">https://html.spec.whatwg.org/multipage/semantics.html#dom-style-blocking</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-style-blocking">2.1.2. Waiting for the new state to stabilize</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-settings-object-cross-origin-isolated-capability">
        <a
            href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-cross-origin-isolated-capability">https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-cross-origin-isolated-capability</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-settings-object-cross-origin-isolated-capability">Security Considerations</a>
                <a href="#ref-for-concept-settings-object-cross-origin-isolated-capability①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-manipulation-task-source">
        <a
            href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source">https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-manipulation-task-source">9.4.2. Setup the outbound transition when ready to swap
                    pages</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-link-type-expect">
        <a
            href="https://html.spec.whatwg.org/multipage/links.html#link-type-expect">https://html.spec.whatwg.org/multipage/links.html#link-type-expect</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-link-type-expect">2.1.2. Waiting for the new state to stabilize</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-fully-active">
        <a
            href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active">https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-fully-active">9.5. Activating the view transition in the new Document</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-has-been-revealed">
        <a
            href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#has-been-revealed">https://html.spec.whatwg.org/multipage/browsing-the-web.html#has-been-revealed</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-has-been-revealed">9.4.3. Update the opt-in flag to reflect the current state</a>
            <li><a href="#ref-for-has-been-revealed①">9.5. Activating the view transition in the new Document</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-in-parallel">
        <a
            href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-in-parallel">2.3.1. The @view-transition rule</a>
            <li><a href="#ref-for-in-parallel①">9.1.1. Additions to Document</a>
            <li><a href="#ref-for-in-parallel②">9.4.1. Check eligibility for outbound cross-document view transition</a>
            <li><a href="#ref-for-in-parallel③">9.4.2. Setup the outbound transition when ready to swap pages</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-latest-entry">
        <a
            href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#latest-entry">https://html.spec.whatwg.org/multipage/browsing-the-web.html#latest-entry</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-latest-entry">9.4.1. Check eligibility for outbound cross-document view transition</a>
                <a href="#ref-for-latest-entry①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-event-pagereveal">
        <a
            href="https://html.spec.whatwg.org/multipage/indices.html#event-pagereveal">https://html.spec.whatwg.org/multipage/indices.html#event-pagereveal</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-event-pagereveal">2.1.3.2. Handling the view transition in the new document</a>
            <li><a href="#ref-for-event-pagereveal①">2.1.4. Lifecycle</a>
            <li><a href="#ref-for-event-pagereveal②">2.2. Examples</a>
            <li><a href="#ref-for-event-pagereveal③">9.4.2. Setup the outbound transition when ready to swap pages</a>
                <a href="#ref-for-event-pagereveal④">(2)</a> <a href="#ref-for-event-pagereveal⑤">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-event-pageswap">
        <a
            href="https://html.spec.whatwg.org/multipage/indices.html#event-pageswap">https://html.spec.whatwg.org/multipage/indices.html#event-pageswap</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-event-pageswap">2.1.3.1. Handling the view transition in the old document</a>
            <li><a href="#ref-for-event-pageswap①">2.1.4. Lifecycle</a>
            <li><a href="#ref-for-event-pageswap②">5. Extending document.startViewTransition()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-navigationtype-push">
        <a
            href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-navigationtype-push">https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-navigationtype-push</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-navigationtype-push">2.3.2. The navigation descriptor</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-queue-a-global-task">
        <a
            href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task">https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-queue-a-global-task">9.4.2. Setup the outbound transition when ready to swap pages</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-reactivate-a-document">
        <a
            href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#reactivate-a-document">https://html.spec.whatwg.org/multipage/browsing-the-web.html#reactivate-a-document</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-reactivate-a-document">Security Considerations</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-relevant-global">
        <a
            href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global">https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-relevant-global">9.4.2. Setup the outbound transition when ready to swap
                    pages</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-relevant-realm">
        <a
            href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm">https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-relevant-realm">5. Extending document.startViewTransition()</a>
            <li><a href="#ref-for-concept-relevant-realm①">9.4.2. Setup the outbound transition when ready to swap
                    pages</a> <a href="#ref-for-concept-relevant-realm②">(2)</a>
            <li><a href="#ref-for-concept-relevant-realm③">9.5. Activating the view transition in the new Document</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-navigationtype-reload">
        <a
            href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-navigationtype-reload">https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-navigationtype-reload</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-navigationtype-reload">2.3.2. The navigation descriptor</a>
            <li><a href="#ref-for-dom-navigationtype-reload①">9.4.1. Check eligibility for outbound cross-document view
                    transition</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-render-blocking-mechanism">
        <a
            href="https://html.spec.whatwg.org/multipage/dom.html#render-blocking-mechanism">https://html.spec.whatwg.org/multipage/dom.html#render-blocking-mechanism</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-render-blocking-mechanism">2.1.2. Waiting for the new state to stabilize</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-rendering-opportunity">
        <a
            href="https://html.spec.whatwg.org/multipage/webappapis.html#rendering-opportunity">https://html.spec.whatwg.org/multipage/webappapis.html#rendering-opportunity</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-rendering-opportunity">2.1.4. Lifecycle</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-navigationtype-replace">
        <a
            href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-navigationtype-replace">https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-navigationtype-replace</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-navigationtype-replace">2.3.2. The navigation descriptor</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-same-origin">
        <a
            href="https://html.spec.whatwg.org/multipage/browsers.html#same-origin">https://html.spec.whatwg.org/multipage/browsers.html#same-origin</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-same-origin">2.1.1. Activation</a>
            <li><a href="#ref-for-same-origin①">2.1.4. Lifecycle</a>
            <li><a href="#ref-for-same-origin②">9.4.1. Check eligibility for outbound cross-document view transition</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-sessionstorage">
        <a
            href="https://html.spec.whatwg.org/multipage/webstorage.html#dom-sessionstorage">https://html.spec.whatwg.org/multipage/webstorage.html#dom-sessionstorage</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-sessionstorage">2.2. Examples</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-task">
        <a
            href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-task">https://html.spec.whatwg.org/multipage/webappapis.html#concept-task</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-task">9.4.2. Setup the outbound transition when ready to swap pages</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-navigationtype-traverse">
        <a
            href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-navigationtype-traverse">https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-navigationtype-traverse</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-navigationtype-traverse">2.1.1. Activation</a>
            <li><a href="#ref-for-dom-navigationtype-traverse①">2.3.2. The navigation descriptor</a>
            <li><a href="#ref-for-dom-navigationtype-traverse②">9.4.1. Check eligibility for outbound cross-document
                    view transition</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-pagerevealevent-viewtransition">
        <a
            href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-pagerevealevent-viewtransition">https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-pagerevealevent-viewtransition</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-pagerevealevent-viewtransition">2.1.3.2. Handling the view transition in the new
                    document</a>
            <li><a href="#ref-for-dom-pagerevealevent-viewtransition①">2.1.4. Lifecycle</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-pageswapevent-viewtransition">
        <a
            href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-pageswapevent-viewtransition">https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-pageswapevent-viewtransition</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-pageswapevent-viewtransition">2.1.3.1. Handling the view transition in the old
                    document</a>
            <li><a href="#ref-for-dom-pageswapevent-viewtransition①">2.1.4. Lifecycle</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-visibility-state">
        <a
            href="https://html.spec.whatwg.org/multipage/interaction.html#visibility-state">https://html.spec.whatwg.org/multipage/interaction.html#visibility-state</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-visibility-state">9.3. Resolving the @view-transition rule</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-was-created-via-cross-origin-redirects">
        <a
            href="https://html.spec.whatwg.org/multipage/dom.html#was-created-via-cross-origin-redirects">https://html.spec.whatwg.org/multipage/dom.html#was-created-via-cross-origin-redirects</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-was-created-via-cross-origin-redirects">9.4.1. Check eligibility for outbound
                    cross-document view transition</a>
            <li><a href="#ref-for-was-created-via-cross-origin-redirects①">Security Considerations</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-list-append">
        <a href="https://infra.spec.whatwg.org/#list-append">https://infra.spec.whatwg.org/#list-append</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-list-append">9.8.1. Compute the layered-capture style</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-assert">
        <a href="https://infra.spec.whatwg.org/#assert">https://infra.spec.whatwg.org/#assert</a><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-assert">9.4.2. Setup the outbound transition when ready to swap pages</a> <a
                    href="#ref-for-assert①">(2)</a>
            <li><a href="#ref-for-assert②">9.5. Activating the view transition in the new Document</a> <a
                    href="#ref-for-assert③">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-list-clone">
        <a href="https://infra.spec.whatwg.org/#list-clone">https://infra.spec.whatwg.org/#list-clone</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-list-clone">5. Extending document.startViewTransition()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-map-clone">
        <a href="https://infra.spec.whatwg.org/#map-clone">https://infra.spec.whatwg.org/#map-clone</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-map-clone">9.4.5. Proceed with cross-document view transition after capturing the old
                    state</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-string-concatenate">
        <a
            href="https://infra.spec.whatwg.org/#string-concatenate">https://infra.spec.whatwg.org/#string-concatenate</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-string-concatenate">9.8.1. Compute the layered-capture style</a> <a
                    href="#ref-for-string-concatenate①">(2)</a>
            <li><a href="#ref-for-string-concatenate②">9.8.6. Apply the old layered-capture properties to
                    ::view-transition-group() keyframes</a>
            <li><a href="#ref-for-string-concatenate③">9.8.7. Apply the new layered-capture properties to
                    ::view-transition-group()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-list-contain">
        <a href="https://infra.spec.whatwg.org/#list-contain">https://infra.spec.whatwg.org/#list-contain</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-list-contain">3.3.2. The :active-view-transition-type() pseudo-class</a>
            <li><a href="#ref-for-list-contain①">4.4. Additions to named view transition pseudo-elements</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-implementation-defined">
        <a
            href="https://infra.spec.whatwg.org/#implementation-defined">https://infra.spec.whatwg.org/#implementation-defined</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-implementation-defined">9.4.1. Check eligibility for outbound cross-document view
                    transition</a>
            <li><a href="#ref-for-implementation-defined①">9.4.2. Setup the outbound transition when ready to swap
                    pages</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-struct-item">
        <a href="https://infra.spec.whatwg.org/#struct-item">https://infra.spec.whatwg.org/#struct-item</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-struct-item">9.1.3. Serializable view transition params</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-list">
        <a href="https://infra.spec.whatwg.org/#list">https://infra.spec.whatwg.org/#list</a><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-list">2.3.3. Accessing the @view-transition rule using CSSOM</a>
            <li><a href="#ref-for-list①">9.2.1. Captured elements extension</a>
            <li><a href="#ref-for-list②">9.8.1. Compute the layered-capture style</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-ordered-map">
        <a href="https://infra.spec.whatwg.org/#ordered-map">https://infra.spec.whatwg.org/#ordered-map</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-ordered-map">9.1.3. Serializable view transition params</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-ordered-set">
        <a href="https://infra.spec.whatwg.org/#ordered-set">https://infra.spec.whatwg.org/#ordered-set</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-ordered-set">3.4. Changing the types of an ongoing view transition</a>
            <li><a href="#ref-for-ordered-set①">5. Extending document.startViewTransition()</a>
            <li><a href="#ref-for-ordered-set②">9.3. Resolving the @view-transition rule</a> <a
                    href="#ref-for-ordered-set③">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-struct">
        <a href="https://infra.spec.whatwg.org/#struct">https://infra.spec.whatwg.org/#struct</a><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-struct">9.1.3. Serializable view transition params</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-tuple">
        <a href="https://infra.spec.whatwg.org/#tuple">https://infra.spec.whatwg.org/#tuple</a><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-tuple">9.1.3. Serializable view transition params</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-x">
        <a href="https://www.w3.org/TR/selectors-3/#x">https://www.w3.org/TR/selectors-3/#x</a><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-x">4.4. Additions to named view transition pseudo-elements</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-class-selector">
        <a
            href="https://www.w3.org/TR/selectors-4/#class-selector">https://www.w3.org/TR/selectors-4/#class-selector</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-class-selector">4.1. Overview</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-selector">
        <a href="https://www.w3.org/TR/selectors-4/#selector">https://www.w3.org/TR/selectors-4/#selector</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-selector">4.4. Additions to named view transition pseudo-elements</a> <a
                    href="#ref-for-selector①">(2)</a> <a href="#ref-for-selector②">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-specificity">
        <a href="https://www.w3.org/TR/selectors-4/#specificity">https://www.w3.org/TR/selectors-4/#specificity</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-specificity">3.3.1. The :active-view-transition pseudo-class</a>
            <li><a href="#ref-for-specificity①">3.3.2. The :active-view-transition-type() pseudo-class</a>
            <li><a href="#ref-for-specificity②">4.4. Additions to named view transition pseudo-elements</a> <a
                    href="#ref-for-specificity③">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-type-selector">
        <a
            href="https://www.w3.org/TR/selectors-4/#type-selector">https://www.w3.org/TR/selectors-4/#type-selector</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-type-selector">4.4. Additions to named view transition pseudo-elements</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-aborterror">
        <a href="https://webidl.spec.whatwg.org/#aborterror">https://webidl.spec.whatwg.org/#aborterror</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-aborterror">9.4.2. Setup the outbound transition when ready to swap pages</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-idl-DOMException">
        <a
            href="https://webidl.spec.whatwg.org/#idl-DOMException">https://webidl.spec.whatwg.org/#idl-DOMException</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-idl-DOMException">5. Extending document.startViewTransition()</a>
            <li><a href="#ref-for-idl-DOMException①">9.4.2. Setup the outbound transition when ready to swap pages</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-idl-DOMString">
        <a href="https://webidl.spec.whatwg.org/#idl-DOMString">https://webidl.spec.whatwg.org/#idl-DOMString</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-idl-DOMString">3.4. Changing the types of an ongoing view transition</a>
            <li><a href="#ref-for-idl-DOMString①">5. Extending document.startViewTransition()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-Exposed">
        <a href="https://webidl.spec.whatwg.org/#Exposed">https://webidl.spec.whatwg.org/#Exposed</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-Exposed">2.3.3. Accessing the @view-transition rule using CSSOM</a>
            <li><a href="#ref-for-Exposed①">3.4. Changing the types of an ongoing view transition</a> <a
                    href="#ref-for-Exposed②">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-idl-frozen-array">
        <a
            href="https://webidl.spec.whatwg.org/#idl-frozen-array">https://webidl.spec.whatwg.org/#idl-frozen-array</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-idl-frozen-array">2.3.3. Accessing the @view-transition rule using CSSOM</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-invalidstateerror">
        <a
            href="https://webidl.spec.whatwg.org/#invalidstateerror">https://webidl.spec.whatwg.org/#invalidstateerror</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-invalidstateerror">5. Extending document.startViewTransition()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-SameObject">
        <a href="https://webidl.spec.whatwg.org/#SameObject">https://webidl.spec.whatwg.org/#SameObject</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-SameObject">2.3.3. Accessing the @view-transition rule using CSSOM</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-getter-steps">
        <a href="https://webidl.spec.whatwg.org/#getter-steps">https://webidl.spec.whatwg.org/#getter-steps</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-getter-steps">3.4. Changing the types of an ongoing view transition</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-method-steps">
        <a href="https://webidl.spec.whatwg.org/#method-steps">https://webidl.spec.whatwg.org/#method-steps</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-method-steps">5. Extending document.startViewTransition()</a> <a
                    href="#ref-for-method-steps①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-resolve">
        <a href="https://webidl.spec.whatwg.org/#resolve">https://webidl.spec.whatwg.org/#resolve</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-resolve">9.5. Activating the view transition in the new Document</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-idl-sequence">
        <a href="https://webidl.spec.whatwg.org/#idl-sequence">https://webidl.spec.whatwg.org/#idl-sequence</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-idl-sequence">5. Extending document.startViewTransition()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-this">
        <a href="https://webidl.spec.whatwg.org/#this">https://webidl.spec.whatwg.org/#this</a><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-this">3.4. Changing the types of an ongoing view transition</a>
        </ul>
    </aside>
    <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by
            reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
    <ul class="index">
        <li>
            <a data-link-type="biblio">[CSS-BACKGROUNDS-3]</a> defines the following terms:
            <ul>
                <li><span class="dfn-paneled" id="term-for-propdef-background">background</span>
                <li><span class="dfn-paneled" id="term-for-propdef-border">border</span>
                <li><span class="dfn-paneled" id="term-for-propdef-border-image">border-image</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-BORDERS-4]</a> defines the following terms:
            <ul>
                <li><span class="dfn-paneled" id="term-for-propdef-border-bottom">border-bottom</span>
                <li><span class="dfn-paneled" id="term-for-propdef-border-left">border-left</span>
                <li><span class="dfn-paneled" id="term-for-propdef-border-radius">border-radius</span>
                <li><span class="dfn-paneled" id="term-for-propdef-border-right">border-right</span>
                <li><span class="dfn-paneled" id="term-for-propdef-border-top">border-top</span>
                <li><span class="dfn-paneled" id="term-for-propdef-box-shadow">box-shadow</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-BOX-4]</a> defines the following terms:
            <ul>
                <li><span class="dfn-paneled" id="term-for-border-box">border box</span>
                <li><span class="dfn-paneled" id="term-for-content-box">content box</span>
                <li><span class="dfn-paneled" id="term-for-propdef-padding">padding</span>
                <li><span class="dfn-paneled" id="term-for-padding-box">padding box</span>
                <li><span class="dfn-paneled" id="term-for-padding-edge">padding edge</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-CASCADE-5]</a> defines the following terms:
            <ul>
                <li><span class="dfn-paneled" id="term-for-computed-value">computed value</span>
                <li><span class="dfn-paneled" id="term-for-used-value">used value</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-COLOR-4]</a> defines the following terms:
            <ul>
                <li><span class="dfn-paneled" id="term-for-propdef-opacity">opacity</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-CONDITIONAL-3]</a> defines the following terms:
            <ul>
                <li><span class="dfn-paneled" id="term-for-at-ruledef-media">@media</span>
                <li><span class="dfn-paneled" id="term-for-at-ruledef-supports">@supports</span>
                <li><span class="dfn-paneled" id="term-for-conditional-group-rule">conditional group rule</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-CONTAIN-2]</a> defines the following terms:
            <ul>
                <li><span class="dfn-paneled" id="term-for-element-contents">element contents</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-IMAGES-3]</a> defines the following terms:
            <ul>
                <li><span class="dfn-paneled" id="term-for-natural-dimensions">natural dimension</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-MASKING-1]</a> defines the following terms:
            <ul>
                <li><span class="dfn-paneled" id="term-for-propdef-clip-path">clip-path</span>
                <li><span class="dfn-paneled" id="term-for-propdef-mask">mask</span>
                <li><span class="dfn-paneled" id="term-for-propdef-mask-image">mask-image</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-OVERFLOW-3]</a> defines the following terms:
            <ul>
                <li><span class="dfn-paneled" id="term-for-propdef-overflow">overflow</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-POSITION-3]</a> defines the following terms:
            <ul>
                <li><span class="dfn-paneled" id="term-for-valdef-position-relative">relative</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-SCOPING-1]</a> defines the following terms:
            <ul>
                <li><span class="dfn-paneled" id="term-for-flat-tree">flat tree</span>
                <li><span class="dfn-paneled" id="term-for-css-tree-scoped-name">tree-scoped name</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-SHADOW-PARTS-1]</a> defines the following terms:
            <ul>
                <li><span class="dfn-paneled" id="term-for-selectordef-part">::part()</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-SIZING-3]</a> defines the following terms:
            <ul>
                <li><span class="dfn-paneled" id="term-for-valdef-box-sizing-border-box">border-box</span>
                <li><span class="dfn-paneled" id="term-for-propdef-box-sizing">box-sizing</span>
                <li><span class="dfn-paneled" id="term-for-valdef-box-sizing-content-box">content-box</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-SYNTAX-3]</a> defines the following terms:
            <ul>
                <li><span class="dfn-paneled" id="term-for-typedef-declaration-list">&lt;declaration-list></span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-TRANSFORMS-1]</a> defines the following terms:
            <ul>
                <li><span class="dfn-paneled" id="term-for-identity-transform-function">identity transform
                        function</span>
                <li><span class="dfn-paneled" id="term-for-propdef-transform">transform</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-TRANSFORMS-2]</a> defines the following terms:
            <ul>
                <li><span class="dfn-paneled" id="term-for-propdef-perspective">perspective</span>
                <li><span class="dfn-paneled" id="term-for-propdef-transform-style">transform-style</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-UI-4]</a> defines the following terms:
            <ul>
                <li><span class="dfn-paneled" id="term-for-propdef-outline">outline</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-VALUES-4]</a> defines the following terms:
            <ul>
                <li><span class="dfn-paneled" id="term-for-mult-comma">#</span>
                <li><span class="dfn-paneled" id="term-for-mult-one-plus">+</span>
                <li><span class="dfn-paneled" id="term-for-identifier-value">&lt;custom-ident></span>
                <li><span class="dfn-paneled" id="term-for-mult-opt">?</span>
                <li><span class="dfn-paneled" id="term-for-comb-one">|</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-VIEW-TRANSITIONS-1]</a> defines the following terms:
            <ul>
                <li><span class="dfn-paneled" id="term-for-selectordef-view-transition">::view-transition</span>
                <li><span class="dfn-paneled"
                        id="term-for-selectordef-view-transition-group">::view-transition-group()</span>
                <li><span class="dfn-paneled"
                        id="term-for-selectordef-view-transition-image-pair">::view-transition-image-pair()</span>
                <li><span class="dfn-paneled"
                        id="term-for-selectordef-view-transition-new">::view-transition-new()</span>
                <li><span class="dfn-paneled"
                        id="term-for-selectordef-view-transition-old">::view-transition-old()</span>
                <li><span class="dfn-paneled" id="term-for-typedef-pt-name-selector">&lt;pt-name-selector></span>
                <li><span class="dfn-paneled" id="term-for-viewtransition">ViewTransition</span>
                <li><span class="dfn-paneled"
                        id="term-for-callbackdef-viewtransitionupdatecallback">ViewTransitionUpdateCallback</span>
                <li><span class="dfn-paneled" id="term-for-activate-view-transition">activate view transition</span>
                <li><span class="dfn-paneled" id="term-for-document-active-view-transition">active view
                        transition</span>
                <li><span class="dfn-paneled" id="term-for-capture-the-new-state">capture the new state</span>
                <li><span class="dfn-paneled" id="term-for-capture-the-old-state">capture the old state</span>
                <li><span class="dfn-paneled" id="term-for-captured-element">captured element</span>
                <li><span class="dfn-paneled" id="term-for-capture-the-image">capturing the image</span>
                <li><span class="dfn-paneled" id="term-for-document-scoped-view-transition-name">document-scoped view
                        transition name</span>
                <li><span class="dfn-paneled" id="term-for-dom-viewtransition-finished">finished</span>
                <li><span class="dfn-paneled" id="term-for-captured-element-group-styles-rule">group styles rule</span>
                <li><span class="dfn-paneled"
                        id="term-for-viewtransition-initial-snapshot-containing-block-size">initial snapshot containing
                        block size</span>
                <li><span class="dfn-paneled" id="term-for-viewtransition-named-elements">named elements</span>
                <li><span class="dfn-paneled" id="term-for-named-view-transition-pseudo-elements">named view transition
                        pseudo-elements</span>
                <li><span class="dfn-paneled" id="term-for-valdef-view-transition-name-none">none</span>
                <li><span class="dfn-paneled" id="term-for-captured-element-old-height">old height</span>
                <li><span class="dfn-paneled" id="term-for-captured-element-old-transform">old transform</span>
                <li><span class="dfn-paneled" id="term-for-captured-element-old-width">old width</span>
                <li><span class="dfn-paneled" id="term-for-perform-pending-transition-operations">perform pending
                        transition operations</span>
                <li><span class="dfn-paneled" id="term-for-viewtransition-phase">phase</span>
                <li><span class="dfn-paneled" id="term-for-dom-viewtransition-ready">ready</span>
                <li><span class="dfn-paneled"
                        id="term-for-document-rendering-suppression-for-view-transitions">rendering suppression for view
                        transitions</span>
                <li><span class="dfn-paneled" id="term-for-skip-the-view-transition">skip the view transition</span>
                <li><span class="dfn-paneled" id="term-for-dom-viewtransition-skiptransition">skipTransition()</span>
                <li><span class="dfn-paneled" id="term-for-snapshot-containing-block">snapshot containing block</span>
                <li><span class="dfn-paneled"
                        id="term-for-dom-document-startviewtransition">startViewTransition(updateCallback)</span>
                <li><span class="dfn-paneled" id="term-for-viewtransition-update-callback">update callback</span>
                <li><span class="dfn-paneled" id="term-for-viewtransition-update-callback-done-promise">update callback
                        done promise</span>
                <li><span class="dfn-paneled"
                        id="term-for-dom-viewtransition-updatecallbackdone">updateCallbackDone</span>
                <li><span class="dfn-paneled" id="term-for-view-transition-name">view transition name</span>
                <li><span class="dfn-paneled" id="term-for-view-transition-page-visibility-change-steps">view transition
                        page-visibility change steps</span>
                <li><span class="dfn-paneled" id="term-for-view-transition-tree">view transition tree</span>
                <li><span class="dfn-paneled" id="term-for-propdef-view-transition-name">view-transition-name</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS22]</a> defines the following terms:
            <ul>
                <li><span class="dfn-paneled" id="term-for-element">element</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSSOM-1]</a> defines the following terms:
            <ul>
                <li><span class="dfn-paneled" id="term-for-cssomstring">CSSOMString</span>
                <li><span class="dfn-paneled" id="term-for-cssrule">CSSRule</span>
            </ul>
        <li>
            <a data-link-type="biblio">[DOM]</a> defines the following terms:
            <ul>
                <li><span class="dfn-paneled" id="term-for-document">Document</span>
                <li><span class="dfn-paneled" id="term-for-element①">Element</span>
                <li><span class="dfn-paneled" id="term-for-concept-tree-ancestor">ancestor</span>
                <li><span class="dfn-paneled" id="term-for-concept-class">class</span>
                <li><span class="dfn-paneled" id="term-for-concept-document">document</span>
                <li><span class="dfn-paneled" id="term-for-document-element">document element</span>
                <li><span class="dfn-paneled" id="term-for-concept-id">id</span>
                <li><span class="dfn-paneled" id="term-for-concept-node-document">node document</span>
                <li><span class="dfn-paneled" id="term-for-concept-document-origin">origin</span>
                <li><span class="dfn-paneled" id="term-for-concept-tree-root">root</span>
            </ul>
        <li>
            <a data-link-type="biblio">[FILTER-EFFECTS-1]</a> defines the following terms:
            <ul>
                <li><span class="dfn-paneled" id="term-for-propdef-filter">filter</span>
            </ul>
        <li>
            <a data-link-type="biblio">[GEOMETRY-1]</a> defines the following terms:
            <ul>
                <li><span class="dfn-paneled" id="term-for-matrix">matrix</span>
                <li><span class="dfn-paneled" id="term-for-multiply">multiply</span>
            </ul>
        <li>
            <a data-link-type="biblio">[HR-TIME-3]</a> defines the following terms:
            <ul>
                <li><span class="dfn-paneled" id="term-for-dfn-duration">duration</span>
            </ul>
        <li>
            <a data-link-type="biblio">[HTML]</a> defines the following terms:
            <ul>
                <li><span class="dfn-paneled" id="term-for-htmllinkelement">HTMLLinkElement</span>
                <li><span class="dfn-paneled" id="term-for-navigationtype">NavigationType</span>
                <li><span class="dfn-paneled" id="term-for-pageswapevent">PageSwapEvent</span>
                <li><span class="dfn-paneled" id="term-for-dom-pageswapevent-activation">activation</span>
                <li><span class="dfn-paneled" id="term-for-dom-script-blocking">blocking <small>(for
                            HTMLScriptElement)</small></span>
                <li><span class="dfn-paneled" id="term-for-dom-style-blocking">blocking <small>(for
                            HTMLStyleElement)</small></span>
                <li><span class="dfn-paneled"
                        id="term-for-concept-settings-object-cross-origin-isolated-capability">cross-origin isolated
                        capability</span>
                <li><span class="dfn-paneled" id="term-for-dom-manipulation-task-source">dom manipulation task
                        source</span>
                <li><span class="dfn-paneled" id="term-for-link-type-expect">expect</span>
                <li><span class="dfn-paneled" id="term-for-fully-active">fully active</span>
                <li><span class="dfn-paneled" id="term-for-has-been-revealed">has been revealed</span>
                <li><span class="dfn-paneled" id="term-for-in-parallel">in parallel</span>
                <li><span class="dfn-paneled" id="term-for-latest-entry">latest entry</span>
                <li><span class="dfn-paneled" id="term-for-event-pagereveal">pagereveal</span>
                <li><span class="dfn-paneled" id="term-for-event-pageswap">pageswap</span>
                <li><span class="dfn-paneled" id="term-for-dom-navigationtype-push">push</span>
                <li><span class="dfn-paneled" id="term-for-queue-a-global-task">queue a global task</span>
                <li><span class="dfn-paneled" id="term-for-reactivate-a-document">reactivate</span>
                <li><span class="dfn-paneled" id="term-for-concept-relevant-global">relevant global object</span>
                <li><span class="dfn-paneled" id="term-for-concept-relevant-realm">relevant realm</span>
                <li><span class="dfn-paneled" id="term-for-dom-navigationtype-reload">reload</span>
                <li><span class="dfn-paneled" id="term-for-render-blocking-mechanism">render-blocking mechanism</span>
                <li><span class="dfn-paneled" id="term-for-rendering-opportunity">rendering opportunity</span>
                <li><span class="dfn-paneled" id="term-for-dom-navigationtype-replace">replace</span>
                <li><span class="dfn-paneled" id="term-for-same-origin">same origin</span>
                <li><span class="dfn-paneled" id="term-for-dom-sessionstorage">sessionStorage</span>
                <li><span class="dfn-paneled" id="term-for-concept-task">task</span>
                <li><span class="dfn-paneled" id="term-for-dom-navigationtype-traverse">traverse</span>
                <li><span class="dfn-paneled" id="term-for-dom-pagerevealevent-viewtransition">viewTransition
                        <small>(for PageRevealEvent)</small></span>
                <li><span class="dfn-paneled" id="term-for-dom-pageswapevent-viewtransition">viewTransition <small>(for
                            PageSwapEvent)</small></span>
                <li><span class="dfn-paneled" id="term-for-visibility-state">visibility state</span>
                <li><span class="dfn-paneled" id="term-for-was-created-via-cross-origin-redirects">was created via
                        cross-origin redirects</span>
            </ul>
        <li>
            <a data-link-type="biblio">[INFRA]</a> defines the following terms:
            <ul>
                <li><span class="dfn-paneled" id="term-for-list-append">append</span>
                <li><span class="dfn-paneled" id="term-for-assert">assert</span>
                <li><span class="dfn-paneled" id="term-for-list-clone">clone <small>(for list)</small></span>
                <li><span class="dfn-paneled" id="term-for-map-clone">clone <small>(for map)</small></span>
                <li><span class="dfn-paneled" id="term-for-string-concatenate">concatenate</span>
                <li><span class="dfn-paneled" id="term-for-list-contain">contain</span>
                <li><span class="dfn-paneled" id="term-for-implementation-defined">implementation-defined</span>
                <li><span class="dfn-paneled" id="term-for-struct-item">item</span>
                <li><span class="dfn-paneled" id="term-for-list">list</span>
                <li><span class="dfn-paneled" id="term-for-ordered-map">map</span>
                <li><span class="dfn-paneled" id="term-for-ordered-set">set</span>
                <li><span class="dfn-paneled" id="term-for-struct">struct</span>
                <li><span class="dfn-paneled" id="term-for-tuple">tuple</span>
            </ul>
        <li>
            <a data-link-type="biblio">[SELECTORS-3]</a> defines the following terms:
            <ul>
                <li><span class="dfn-paneled" id="term-for-x">*</span>
            </ul>
        <li>
            <a data-link-type="biblio">[SELECTORS-4]</a> defines the following terms:
            <ul>
                <li><span class="dfn-paneled" id="term-for-class-selector">class selector</span>
                <li><span class="dfn-paneled" id="term-for-selector">selector</span>
                <li><span class="dfn-paneled" id="term-for-specificity">specificity</span>
                <li><span class="dfn-paneled" id="term-for-type-selector">type selector</span>
            </ul>
        <li>
            <a data-link-type="biblio">[WEBIDL]</a> defines the following terms:
            <ul>
                <li><span class="dfn-paneled" id="term-for-aborterror">AbortError</span>
                <li><span class="dfn-paneled" id="term-for-idl-DOMException">DOMException</span>
                <li><span class="dfn-paneled" id="term-for-idl-DOMString">DOMString</span>
                <li><span class="dfn-paneled" id="term-for-Exposed">Exposed</span>
                <li><span class="dfn-paneled" id="term-for-idl-frozen-array">FrozenArray</span>
                <li><span class="dfn-paneled" id="term-for-invalidstateerror">InvalidStateError</span>
                <li><span class="dfn-paneled" id="term-for-SameObject">SameObject</span>
                <li><span class="dfn-paneled" id="term-for-getter-steps">getter steps</span>
                <li><span class="dfn-paneled" id="term-for-method-steps">method steps</span>
                <li><span class="dfn-paneled" id="term-for-resolve">resolve</span>
                <li><span class="dfn-paneled" id="term-for-idl-sequence">sequence</span>
                <li><span class="dfn-paneled" id="term-for-this">this</span>
            </ul>
    </ul>
    <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a
            class="self-link" href="#references"></a></h2>
    <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a
            class="self-link" href="#normative"></a></h3>
    <dl>
        <dt id="biblio-css-backgrounds-3">[CSS-BACKGROUNDS-3]
        <dd>Elika Etemad; Brad Kemper. <a href="https://www.w3.org/TR/css-backgrounds-3/"><cite>CSS Backgrounds and
                    Borders Module Level 3</cite></a>. 11 March 2024. CR. URL: <a
                href="https://www.w3.org/TR/css-backgrounds-3/">https://www.w3.org/TR/css-backgrounds-3/</a>
        <dt id="biblio-css-borders-4">[CSS-BORDERS-4]
        <dd><a href="https://drafts.csswg.org/css-borders-4/"><cite>CSS Borders and Box Decorations Module Level
                    4</cite></a>. Editor's Draft. URL: <a
                href="https://drafts.csswg.org/css-borders-4/">https://drafts.csswg.org/css-borders-4/</a>
        <dt id="biblio-css-box-4">[CSS-BOX-4]
        <dd>Elika Etemad. <a href="https://www.w3.org/TR/css-box-4/"><cite>CSS Box Model Module Level 4</cite></a>. 4
            August 2024. WD. URL: <a href="https://www.w3.org/TR/css-box-4/">https://www.w3.org/TR/css-box-4/</a>
        <dt id="biblio-css-cascade-5">[CSS-CASCADE-5]
        <dd>Elika Etemad; Miriam Suzanne; Tab Atkins Jr.. <a href="https://www.w3.org/TR/css-cascade-5/"><cite>CSS
                    Cascading and Inheritance Level 5</cite></a>. 13 January 2022. CR. URL: <a
                href="https://www.w3.org/TR/css-cascade-5/">https://www.w3.org/TR/css-cascade-5/</a>
        <dt id="biblio-css-color-4">[CSS-COLOR-4]
        <dd>Chris Lilley; Tab Atkins Jr.; Lea Verou. <a href="https://www.w3.org/TR/css-color-4/"><cite>CSS Color Module
                    Level 4</cite></a>. 13 February 2024. CR. URL: <a
                href="https://www.w3.org/TR/css-color-4/">https://www.w3.org/TR/css-color-4/</a>
        <dt id="biblio-css-contain-2">[CSS-CONTAIN-2]
        <dd>Tab Atkins Jr.; Florian Rivoal; Vladimir Levin. <a href="https://www.w3.org/TR/css-contain-2/"><cite>CSS
                    Containment Module Level 2</cite></a>. 17 September 2022. WD. URL: <a
                href="https://www.w3.org/TR/css-contain-2/">https://www.w3.org/TR/css-contain-2/</a>
        <dt id="biblio-css-images-3">[CSS-IMAGES-3]
        <dd>Tab Atkins Jr.; Elika Etemad; Lea Verou. <a href="https://www.w3.org/TR/css-images-3/"><cite>CSS Images
                    Module Level 3</cite></a>. 18 December 2023. CR. URL: <a
                href="https://www.w3.org/TR/css-images-3/">https://www.w3.org/TR/css-images-3/</a>
        <dt id="biblio-css-masking-1">[CSS-MASKING-1]
        <dd>Dirk Schulze; Brian Birtles; Tab Atkins Jr.. <a href="https://www.w3.org/TR/css-masking-1/"><cite>CSS
                    Masking Module Level 1</cite></a>. 5 August 2021. CR. URL: <a
                href="https://www.w3.org/TR/css-masking-1/">https://www.w3.org/TR/css-masking-1/</a>
        <dt id="biblio-css-overflow-3">[CSS-OVERFLOW-3]
        <dd>Elika Etemad; Florian Rivoal. <a href="https://www.w3.org/TR/css-overflow-3/"><cite>CSS Overflow Module
                    Level 3</cite></a>. 29 March 2023. WD. URL: <a
                href="https://www.w3.org/TR/css-overflow-3/">https://www.w3.org/TR/css-overflow-3/</a>
        <dt id="biblio-css-scoping-1">[CSS-SCOPING-1]
        <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://www.w3.org/TR/css-scoping-1/"><cite>CSS Scoping Module Level
                    1</cite></a>. 3 April 2014. WD. URL: <a
                href="https://www.w3.org/TR/css-scoping-1/">https://www.w3.org/TR/css-scoping-1/</a>
        <dt id="biblio-css-sizing-3">[CSS-SIZING-3]
        <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://www.w3.org/TR/css-sizing-3/"><cite>CSS Box Sizing Module
                    Level 3</cite></a>. 17 December 2021. WD. URL: <a
                href="https://www.w3.org/TR/css-sizing-3/">https://www.w3.org/TR/css-sizing-3/</a>
        <dt id="biblio-css-syntax-3">[CSS-SYNTAX-3]
        <dd>Tab Atkins Jr.; Simon Sapin. <a href="https://www.w3.org/TR/css-syntax-3/"><cite>CSS Syntax Module Level
                    3</cite></a>. 24 December 2021. CR. URL: <a
                href="https://www.w3.org/TR/css-syntax-3/">https://www.w3.org/TR/css-syntax-3/</a>
        <dt id="biblio-css-transforms-1">[CSS-TRANSFORMS-1]
        <dd>Simon Fraser; et al. <a href="https://www.w3.org/TR/css-transforms-1/"><cite>CSS Transforms Module Level
                    1</cite></a>. 14 February 2019. CR. URL: <a
                href="https://www.w3.org/TR/css-transforms-1/">https://www.w3.org/TR/css-transforms-1/</a>
        <dt id="biblio-css-transforms-2">[CSS-TRANSFORMS-2]
        <dd>Tab Atkins Jr.; et al. <a href="https://www.w3.org/TR/css-transforms-2/"><cite>CSS Transforms Module Level
                    2</cite></a>. 9 November 2021. WD. URL: <a
                href="https://www.w3.org/TR/css-transforms-2/">https://www.w3.org/TR/css-transforms-2/</a>
        <dt id="biblio-css-ui-4">[CSS-UI-4]
        <dd>Florian Rivoal. <a href="https://www.w3.org/TR/css-ui-4/"><cite>CSS Basic User Interface Module Level
                    4</cite></a>. 16 March 2021. WD. URL: <a
                href="https://www.w3.org/TR/css-ui-4/">https://www.w3.org/TR/css-ui-4/</a>
        <dt id="biblio-css-values-4">[CSS-VALUES-4]
        <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://www.w3.org/TR/css-values-4/"><cite>CSS Values and Units
                    Module Level 4</cite></a>. 12 March 2024. WD. URL: <a
                href="https://www.w3.org/TR/css-values-4/">https://www.w3.org/TR/css-values-4/</a>
        <dt id="biblio-css-view-transitions-1">[CSS-VIEW-TRANSITIONS-1]
        <dd>Tab Atkins Jr.; Jake Archibald; Khushal Sagar. <a
                href="https://www.w3.org/TR/css-view-transitions-1/"><cite>CSS View Transitions Module Level
                    1</cite></a>. 28 March 2024. CR. URL: <a
                href="https://www.w3.org/TR/css-view-transitions-1/">https://www.w3.org/TR/css-view-transitions-1/</a>
        <dt id="biblio-css22">[CSS22]
        <dd>Bert Bos. <a href="https://www.w3.org/TR/CSS22/"><cite>Cascading Style Sheets Level 2 Revision 2 (CSS 2.2)
                    Specification</cite></a>. 12 April 2016. WD. URL: <a
                href="https://www.w3.org/TR/CSS22/">https://www.w3.org/TR/CSS22/</a>
        <dt id="biblio-cssom-1">[CSSOM-1]
        <dd>Daniel Glazman; Emilio Cobos Álvarez. <a href="https://www.w3.org/TR/cssom-1/"><cite>CSS Object Model
                    (CSSOM)</cite></a>. 26 August 2021. WD. URL: <a
                href="https://www.w3.org/TR/cssom-1/">https://www.w3.org/TR/cssom-1/</a>
        <dt id="biblio-dom">[DOM]
        <dd>Anne van Kesteren. <a href="https://dom.spec.whatwg.org/"><cite>DOM Standard</cite></a>. Living Standard.
            URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
        <dt id="biblio-filter-effects-1">[FILTER-EFFECTS-1]
        <dd>Dirk Schulze; Dean Jackson. <a href="https://www.w3.org/TR/filter-effects-1/"><cite>Filter Effects Module
                    Level 1</cite></a>. 18 December 2018. WD. URL: <a
                href="https://www.w3.org/TR/filter-effects-1/">https://www.w3.org/TR/filter-effects-1/</a>
        <dt id="biblio-geometry-1">[GEOMETRY-1]
        <dd>Simon Pieters; Chris Harrelson. <a href="https://www.w3.org/TR/geometry-1/"><cite>Geometry Interfaces Module
                    Level 1</cite></a>. 4 December 2018. CR. URL: <a
                href="https://www.w3.org/TR/geometry-1/">https://www.w3.org/TR/geometry-1/</a>
        <dt id="biblio-hr-time-3">[HR-TIME-3]
        <dd>Yoav Weiss. <a href="https://www.w3.org/TR/hr-time-3/"><cite>High Resolution Time</cite></a>. 19 July 2023.
            WD. URL: <a href="https://www.w3.org/TR/hr-time-3/">https://www.w3.org/TR/hr-time-3/</a>
        <dt id="biblio-html">[HTML]
        <dd>Anne van Kesteren; et al. <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML Standard</cite></a>.
            Living Standard. URL: <a
                href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
        <dt id="biblio-infra">[INFRA]
        <dd>Anne van Kesteren; Domenic Denicola. <a href="https://infra.spec.whatwg.org/"><cite>Infra
                    Standard</cite></a>. Living Standard. URL: <a
                href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
        <dt id="biblio-rfc2119">[RFC2119]
        <dd>S. Bradner. <a href="https://datatracker.ietf.org/doc/html/rfc2119"><cite>Key words for use in RFCs to
                    Indicate Requirement Levels</cite></a>. March 1997. Best Current Practice. URL: <a
                href="https://datatracker.ietf.org/doc/html/rfc2119">https://datatracker.ietf.org/doc/html/rfc2119</a>
        <dt id="biblio-selectors-3">[SELECTORS-3]
        <dd>Tantek Çelik; et al. <a href="https://www.w3.org/TR/selectors-3/"><cite>Selectors Level 3</cite></a>. 6
            November 2018. REC. URL: <a href="https://www.w3.org/TR/selectors-3/">https://www.w3.org/TR/selectors-3/</a>
        <dt id="biblio-selectors-4">[SELECTORS-4]
        <dd>Elika Etemad; Tab Atkins Jr.. <a href="https://www.w3.org/TR/selectors-4/"><cite>Selectors Level
                    4</cite></a>. 11 November 2022. WD. URL: <a
                href="https://www.w3.org/TR/selectors-4/">https://www.w3.org/TR/selectors-4/</a>
        <dt id="biblio-webidl">[WEBIDL]
        <dd>Edgar Chen; Timothy Gu. <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL Standard</cite></a>. Living
            Standard. URL: <a href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
    </dl>
    <h3 class="no-num no-ref heading settled" id="informative"><span class="content">Informative References</span><a
            class="self-link" href="#informative"></a></h3>
    <dl>
        <dt id="biblio-css-conditional-3">[CSS-CONDITIONAL-3]
        <dd>Chris Lilley; David Baron; Elika Etemad. <a href="https://www.w3.org/TR/css-conditional-3/"><cite>CSS
                    Conditional Rules Module Level 3</cite></a>. 15 August 2024. CR. URL: <a
                href="https://www.w3.org/TR/css-conditional-3/">https://www.w3.org/TR/css-conditional-3/</a>
        <dt id="biblio-css-position-3">[CSS-POSITION-3]
        <dd>Elika Etemad; Tab Atkins Jr.. <a href="https://www.w3.org/TR/css-position-3/"><cite>CSS Positioned Layout
                    Module Level 3</cite></a>. 10 August 2024. WD. URL: <a
                href="https://www.w3.org/TR/css-position-3/">https://www.w3.org/TR/css-position-3/</a>
        <dt id="biblio-css-shadow-parts-1">[CSS-SHADOW-PARTS-1]
        <dd>Tab Atkins Jr.; Fergal Daly. <a href="https://www.w3.org/TR/css-shadow-parts-1/"><cite>CSS Shadow
                    Parts</cite></a>. 15 November 2018. WD. URL: <a
                href="https://www.w3.org/TR/css-shadow-parts-1/">https://www.w3.org/TR/css-shadow-parts-1/</a>
    </dl>
    <h2 class="no-num no-ref heading settled" id="property-index"><span class="content">Property Index</span><a
            class="self-link" href="#property-index"></a></h2>
    <div class="big-element-wrapper">
        <table class="index">
            <thead>
                <tr>
                    <th scope="col">Name
                    <th scope="col">Value
                    <th scope="col">Initial
                    <th scope="col">Applies to
                    <th scope="col">Inh.
                    <th scope="col">%ages
                    <th scope="col">Anim­ation type
                    <th scope="col">Canonical order
                    <th scope="col">Com­puted value
            <tbody>
                <tr>
                    <th scope="row"><a class="css" data-link-type="property" href="#propdef-view-transition-class"
                            id="ref-for-propdef-view-transition-class⑨">view-transition-class</a>
                    <td>none | &lt;custom-ident>+
                    <td>none
                    <td>all elements
                    <td>no
                    <td>n/a
                    <td>discrete
                    <td>per grammar
                    <td>as specified
                <tr>
                    <th scope="row"><a class="css" data-link-type="property" href="#propdef-view-transition-group"
                            id="ref-for-propdef-view-transition-group⑨">view-transition-group</a>
                    <td>normal | contain | nearest | &lt;custom-ident>
                    <td>normal
                    <td>all elements
                    <td>no
                    <td>n/a
                    <td>discrete
                    <td>per grammar
                    <td>as specified
        </table>
    </div>
    <h3 class="no-num no-ref heading settled" id="view-transition-descriptor-table"><span class="content"><a class="css"
                data-link-type="at-rule" href="#at-view-transition-rule"
                id="ref-for-at-view-transition-rule①⑥">@view-transition</a> Descriptors</span><a class="self-link"
            href="#view-transition-descriptor-table"></a></h3>
    <div class="big-element-wrapper">
        <table class="index">
            <thead>
                <tr>
                    <th scope="col">Name
                    <th scope="col">Value
                    <th scope="col">Initial
            <tbody>
                <tr>
                    <th scope="row"><a class="css" data-link-type="descriptor"
                            href="#descdef-view-transition-navigation"
                            id="ref-for-descdef-view-transition-navigation">navigation</a>
                    <td>auto | none
                    <td>none
                <tr>
                    <th scope="row"><a class="css" data-link-type="descriptor" href="#descdef-view-transition-types"
                            id="ref-for-descdef-view-transition-types">types</a>
                    <td>none | &lt;custom-ident>+
                    <td>none
        </table>
    </div>
    <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL Index</span><a class="self-link"
            href="#idl-index"></a></h2>
    <pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <a href="#cssviewtransitionrule"><code><c- g>CSSViewTransitionRule</c-></code></a> : <a data-link-type="idl-name" href="https://www.w3.org/TR/cssom-1/#cssrule"><c- n>CSSRule</c-></a> {
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://www.w3.org/TR/cssom-1/#cssomstring"><c- n>CSSOMString</c-></a> <a data-readonly data-type="CSSOMString" href="#dom-cssviewtransitionrule-navigation"><code><c- g>navigation</c-></code></a>;
  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject"><c- g>SameObject</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-frozen-array"><c- b>FrozenArray</c-></a>&lt;<a data-link-type="idl-name" href="https://www.w3.org/TR/cssom-1/#cssomstring"><c- n>CSSOMString</c-></a>> <a data-readonly data-type="FrozenArray<CSSOMString>" href="#dom-cssviewtransitionrule-types"><code><c- g>types</c-></code></a>;
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <a href="#viewtransitiontypeset"><code><c- g>ViewTransitionTypeSet</c-></code></a> {
  <c- b>setlike</c->&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a>>;
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition"><c- g>ViewTransition</c-></a> {
  <c- b>attribute</c-> <a data-link-type="idl-name" href="#viewtransitiontypeset"><c- n>ViewTransitionTypeSet</c-></a> <a data-type="ViewTransitionTypeSet" href="#dom-viewtransition-types"><code><c- g>types</c-></code></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-startviewtransitionoptions"><code><c- g>StartViewTransitionOptions</c-></code></a> {
  <a data-link-type="idl-name" href="https://drafts.csswg.org/css-view-transitions-1/#callbackdef-viewtransitionupdatecallback"><c- n>ViewTransitionUpdateCallback</c-></a>? <a data-default="null" data-type="ViewTransitionUpdateCallback? " href="#dom-startviewtransitionoptions-update"><code><c- g>update</c-></code></a> = <c- b>null</c->;
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a>>? <a data-default="null" data-type="sequence<DOMString>? " href="#dom-startviewtransitionoptions-types"><code><c- g>types</c-></code></a> = <c- b>null</c->;
};

<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://dom.spec.whatwg.org/#document"><c- g>Document</c-></a> {
  <a data-link-type="idl-name" href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition"><c- n>ViewTransition</c-></a> <a class="idl-code" data-link-type="method" href="#dom-document-startviewtransition"><c- g>startViewTransition</c-></a>(<c- b>optional</c-> (<a data-link-type="idl-name" href="https://drafts.csswg.org/css-view-transitions-1/#callbackdef-viewtransitionupdatecallback"><c- n>ViewTransitionUpdateCallback</c-></a> <c- b>or</c-> <a data-link-type="idl-name" href="#dictdef-startviewtransitionoptions"><c- n>StartViewTransitionOptions</c-></a>) <a href="#dom-document-startviewtransition-callbackoptions-callbackoptions"><code><c- g>callbackOptions</c-></code></a> = {});
};

</pre>
    <h2 class="no-num no-ref heading settled" id="issues-index"><span class="content">Issues Index</span><a
            class="self-link" href="#issues-index"></a></h2>
    <div style="counter-reset:issue">
        <div class="issue"> should this behavior be an opt-in/opt-out with a CSS property? See <a
                href="https://github.com/w3c/csswg-drafts/issues/11078">issue 11078</a>. <a class="issue-return"
                href="#issue-93264331" title="Jump to section">↵</a></div>
        <div class="issue"> Though <a data-link-type="dfn"
                href="https://www.w3.org/TR/css-view-transitions-1/#capture-the-old-state">capture the old state</a>
            appears here as a synchronous step, it is in fact an asynchronous step
            as rendering an element into an image cannot be done synchronously. This should be more explicit in the L1
            spec. <a class="issue-return" href="#issue-ca114a78" title="Jump to section">↵</a></div>
        <div class="issue"> Specify the behavior of <a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-overflow-3/#propdef-overflow">overflow</a> and containment. See <a
                href="https://github.com/w3c/csswg-drafts/issues/11079">issue 11079</a>. <a class="issue-return"
                href="#issue-d24249d6" title="Jump to section">↵</a></div>
    </div>
    <aside class="dfn-panel" data-for="at-view-transition-rule">
        <b><a href="#at-view-transition-rule">#at-view-transition-rule</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-at-view-transition-rule">1. Introduction</a>
            <li><a href="#ref-for-at-view-transition-rule①">2.1.1. Activation</a>
            <li><a href="#ref-for-at-view-transition-rule②">2.2. Examples</a>
            <li><a href="#ref-for-at-view-transition-rule③">2.3.1. The @view-transition rule</a> <a
                    href="#ref-for-at-view-transition-rule④">(2)</a> <a href="#ref-for-at-view-transition-rule⑤">(3)</a>
                <a href="#ref-for-at-view-transition-rule⑥">(4)</a> <a href="#ref-for-at-view-transition-rule⑦">(5)</a>
                <a href="#ref-for-at-view-transition-rule⑧">(6)</a>
            <li><a href="#ref-for-at-view-transition-rule⑨">2.3.2. The navigation descriptor</a> <a
                    href="#ref-for-at-view-transition-rule①⓪">(2)</a>
            <li><a href="#ref-for-at-view-transition-rule①①">2.3.3. Accessing the @view-transition rule using CSSOM</a>
                <a href="#ref-for-at-view-transition-rule①②">(2)</a>
            <li><a href="#ref-for-at-view-transition-rule①③">3.5. Activating the transition type for cross-document view
                    transitions</a>
            <li><a href="#ref-for-at-view-transition-rule①④">9.3. Resolving the @view-transition rule</a> <a
                    href="#ref-for-at-view-transition-rule①⑤">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="view-transition-navigation">
        <b><a href="#view-transition-navigation">#view-transition-navigation</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-view-transition-navigation">2.3.1. The @view-transition rule</a>
            <li><a href="#ref-for-view-transition-navigation①">2.3.2. The navigation descriptor</a>
            <li><a href="#ref-for-view-transition-navigation②">9.3. Resolving the @view-transition rule</a> <a
                    href="#ref-for-view-transition-navigation③">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="valdef-view-transition-navigation-none">
        <b><a
                href="#valdef-view-transition-navigation-none">#valdef-view-transition-navigation-none</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-valdef-view-transition-navigation-none">9.3. Resolving the @view-transition rule</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="valdef-view-transition-navigation-auto">
        <b><a
                href="#valdef-view-transition-navigation-auto">#valdef-view-transition-navigation-auto</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-valdef-view-transition-navigation-auto">2.3.2. The navigation descriptor</a>
            <li><a href="#ref-for-valdef-view-transition-navigation-auto①">9.3. Resolving the @view-transition rule</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="cssviewtransitionrule">
        <b><a href="#cssviewtransitionrule">#cssviewtransitionrule</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-cssviewtransitionrule">2.3.3. Accessing the @view-transition rule using CSSOM</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-cssviewtransitionrule-navigation">
        <b><a href="#dom-cssviewtransitionrule-navigation">#dom-cssviewtransitionrule-navigation</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-cssviewtransitionrule-navigation">2.3.3. Accessing the @view-transition rule using
                    CSSOM</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-cssviewtransitionrule-types">
        <b><a href="#dom-cssviewtransitionrule-types">#dom-cssviewtransitionrule-types</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-cssviewtransitionrule-types">2.3.3. Accessing the @view-transition rule using
                    CSSOM</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="active-view-transition-pseudo">
        <b><a href="#active-view-transition-pseudo">#active-view-transition-pseudo</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-active-view-transition-pseudo">3.1. Overview</a> <a
                    href="#ref-for-active-view-transition-pseudo①">(2)</a>
            <li><a href="#ref-for-active-view-transition-pseudo②">3.3.1. The :active-view-transition pseudo-class</a> <a
                    href="#ref-for-active-view-transition-pseudo③">(2)</a> <a
                    href="#ref-for-active-view-transition-pseudo④">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="active-view-transition-type-pseudo">
        <b><a href="#active-view-transition-type-pseudo">#active-view-transition-type-pseudo</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-active-view-transition-type-pseudo">3.1. Overview</a> <a
                    href="#ref-for-active-view-transition-type-pseudo①">(2)</a>
            <li><a href="#ref-for-active-view-transition-type-pseudo②">3.3.2. The :active-view-transition-type()
                    pseudo-class</a> <a href="#ref-for-active-view-transition-type-pseudo③">(2)</a> <a
                    href="#ref-for-active-view-transition-type-pseudo④">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="viewtransitiontypeset">
        <b><a href="#viewtransitiontypeset">#viewtransitiontypeset</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-viewtransitiontypeset">3.4. Changing the types of an ongoing view transition</a> <a
                    href="#ref-for-viewtransitiontypeset①">(2)</a> <a href="#ref-for-viewtransitiontypeset②">(3)</a>
            <li><a href="#ref-for-viewtransitiontypeset③">9.1.2. Additions to ViewTransition</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-viewtransition-types">
        <b><a href="#dom-viewtransition-types">#dom-viewtransition-types</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-viewtransition-types">2.1.3.1. Handling the view transition in the old
                    document</a>
            <li><a href="#ref-for-dom-viewtransition-types①">2.1.3.2. Handling the view transition in the new
                    document</a>
            <li><a href="#ref-for-dom-viewtransition-types②">2.1.4. Lifecycle</a> <a
                    href="#ref-for-dom-viewtransition-types③">(2)</a>
            <li><a href="#ref-for-dom-viewtransition-types④">3.1. Overview</a>
            <li><a href="#ref-for-dom-viewtransition-types⑤">3.4. Changing the types of an ongoing view transition</a>
            <li><a href="#ref-for-dom-viewtransition-types⑥">5. Extending document.startViewTransition()</a>
            <li><a href="#ref-for-dom-viewtransition-types⑦">9.4.2. Setup the outbound transition when ready to swap
                    pages</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="view-transition-types">
        <b><a href="#view-transition-types">#view-transition-types</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-view-transition-types">2.3.1. The @view-transition rule</a>
            <li><a href="#ref-for-view-transition-types①">3.1. Overview</a>
            <li><a href="#ref-for-view-transition-types②">3.5. Activating the transition type for cross-document view
                    transitions</a> <a href="#ref-for-view-transition-types③">(2)</a>
            <li><a href="#ref-for-view-transition-types④">9.3. Resolving the @view-transition rule</a>
            <li><a href="#ref-for-view-transition-types⑤">9.4.2. Setup the outbound transition when ready to swap
                    pages</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="propdef-view-transition-class">
        <b><a href="#propdef-view-transition-class">#propdef-view-transition-class</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-propdef-view-transition-class">1. Introduction</a>
            <li><a href="#ref-for-propdef-view-transition-class①">4.3. The view-transition-class property</a> <a
                    href="#ref-for-propdef-view-transition-class②">(2)</a> <a
                    href="#ref-for-propdef-view-transition-class③">(3)</a> <a
                    href="#ref-for-propdef-view-transition-class④">(4)</a> <a
                    href="#ref-for-propdef-view-transition-class⑤">(5)</a> <a
                    href="#ref-for-propdef-view-transition-class⑥">(6)</a>
            <li><a href="#ref-for-propdef-view-transition-class⑦">9.6. Capturing the view-transition-class</a> <a
                    href="#ref-for-propdef-view-transition-class⑧">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="typedef-pt-name-and-class-selector">
        <b><a href="#typedef-pt-name-and-class-selector">#typedef-pt-name-and-class-selector</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-typedef-pt-name-and-class-selector">4.4. Additions to named view transition
                    pseudo-elements</a> <a href="#ref-for-typedef-pt-name-and-class-selector①">(2)</a> <a
                    href="#ref-for-typedef-pt-name-and-class-selector②">(3)</a> <a
                    href="#ref-for-typedef-pt-name-and-class-selector③">(4)</a> <a
                    href="#ref-for-typedef-pt-name-and-class-selector④">(5)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="typedef-pt-class-selector">
        <b><a href="#typedef-pt-class-selector">#typedef-pt-class-selector</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-typedef-pt-class-selector">4.4. Additions to named view transition pseudo-elements</a>
                <a href="#ref-for-typedef-pt-class-selector①">(2)</a> <a
                    href="#ref-for-typedef-pt-class-selector②">(3)</a> <a
                    href="#ref-for-typedef-pt-class-selector③">(4)</a> <a
                    href="#ref-for-typedef-pt-class-selector④">(5)</a> <a
                    href="#ref-for-typedef-pt-class-selector⑤">(6)</a> <a
                    href="#ref-for-typedef-pt-class-selector⑥">(7)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dictdef-startviewtransitionoptions">
        <b><a href="#dictdef-startviewtransitionoptions">#dictdef-startviewtransitionoptions</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dictdef-startviewtransitionoptions">5. Extending document.startViewTransition()</a> <a
                    href="#ref-for-dictdef-startviewtransitionoptions①">(2)</a> <a
                    href="#ref-for-dictdef-startviewtransitionoptions②">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-startviewtransitionoptions-update">
        <b><a href="#dom-startviewtransitionoptions-update">#dom-startviewtransitionoptions-update</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-startviewtransitionoptions-update">5. Extending document.startViewTransition()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-startviewtransitionoptions-types">
        <b><a href="#dom-startviewtransitionoptions-types">#dom-startviewtransitionoptions-types</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-startviewtransitionoptions-types">3.5. Activating the transition type for
                    cross-document view transitions</a>
            <li><a href="#ref-for-dom-startviewtransitionoptions-types①">5. Extending document.startViewTransition()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-document-startviewtransition">
        <b><a href="#dom-document-startviewtransition">#dom-document-startviewtransition</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-document-startviewtransition">2.1.1. Activation</a>
            <li><a href="#ref-for-dom-document-startviewtransition①">2.1.2. Waiting for the new state to stabilize</a>
            <li><a href="#ref-for-dom-document-startviewtransition②">2.1.3. Customization</a>
            <li><a href="#ref-for-dom-document-startviewtransition③">3.1. Overview</a>
            <li><a href="#ref-for-dom-document-startviewtransition④">3.5. Activating the transition type for
                    cross-document view transitions</a>
            <li><a href="#ref-for-dom-document-startviewtransition⑤">5. Extending document.startViewTransition()</a> <a
                    href="#ref-for-dom-document-startviewtransition⑥">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="propdef-view-transition-group">
        <b><a href="#propdef-view-transition-group">#propdef-view-transition-group</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-propdef-view-transition-group">7.1. Overview</a>
            <li><a href="#ref-for-propdef-view-transition-group①">7.3. The view-transition-group property</a> <a
                    href="#ref-for-propdef-view-transition-group②">(2)</a> <a
                    href="#ref-for-propdef-view-transition-group③">(3)</a>
            <li><a href="#ref-for-propdef-view-transition-group④">9.7. Capturing and applying view-transition-group</a>
            <li><a href="#ref-for-propdef-view-transition-group⑤">9.7.1. Resolving the view-transition-group value</a>
                <a href="#ref-for-propdef-view-transition-group⑥">(2)</a>
            <li><a href="#ref-for-propdef-view-transition-group⑦">9.7.4. Compute the old view-transition-group</a>
            <li><a href="#ref-for-propdef-view-transition-group⑧">9.7.5. Compute the new view-transition-group</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="layered-capture-properties">
        <b><a href="#layered-capture-properties">#layered-capture-properties</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-layered-capture-properties">9.8.1. Compute the layered-capture style</a>
            <li><a href="#ref-for-layered-capture-properties①">9.8.7. Apply the new layered-capture properties to
                    ::view-transition-group()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="document-inbound-view-transition-params">
        <b><a
                href="#document-inbound-view-transition-params">#document-inbound-view-transition-params</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-document-inbound-view-transition-params">9.2. Additions to the view transition
                    page-visibility change steps</a>
            <li><a href="#ref-for-document-inbound-view-transition-params①">9.4.2. Setup the outbound transition when
                    ready to swap pages</a> <a href="#ref-for-document-inbound-view-transition-params②">(2)</a> <a
                    href="#ref-for-document-inbound-view-transition-params③">(3)</a>
            <li><a href="#ref-for-document-inbound-view-transition-params④">9.5. Activating the view transition in the
                    new Document</a> <a href="#ref-for-document-inbound-view-transition-params⑤">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="document-can-initiate-outbound-view-transition">
        <b><a
                href="#document-can-initiate-outbound-view-transition">#document-can-initiate-outbound-view-transition</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-document-can-initiate-outbound-view-transition">9.4.1. Check eligibility for outbound
                    cross-document view transition</a>
            <li><a href="#ref-for-document-can-initiate-outbound-view-transition①">9.4.2. Setup the outbound transition
                    when ready to swap pages</a>
            <li><a href="#ref-for-document-can-initiate-outbound-view-transition②">9.4.3. Update the opt-in flag to
                    reflect the current state</a> <a
                    href="#ref-for-document-can-initiate-outbound-view-transition③">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="viewtransition-active-types">
        <b><a href="#viewtransition-active-types">#viewtransition-active-types</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-viewtransition-active-types">3.1. Overview</a> <a
                    href="#ref-for-viewtransition-active-types①">(2)</a> <a
                    href="#ref-for-viewtransition-active-types②">(3)</a>
            <li><a href="#ref-for-viewtransition-active-types③">3.3.2. The :active-view-transition-type()
                    pseudo-class</a>
            <li><a href="#ref-for-viewtransition-active-types④">3.4. Changing the types of an ongoing view
                    transition</a>
            <li><a href="#ref-for-viewtransition-active-types⑤">3.5. Activating the transition type for cross-document
                    view transitions</a>
            <li><a href="#ref-for-viewtransition-active-types⑥">5. Extending document.startViewTransition()</a>
            <li><a href="#ref-for-viewtransition-active-types⑦">9.4.2. Setup the outbound transition when ready to swap
                    pages</a> <a href="#ref-for-viewtransition-active-types⑧">(2)</a>
            <li><a href="#ref-for-viewtransition-active-types⑨">9.5. Activating the view transition in the new
                    Document</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="viewtransition-outbound-post-capture-steps">
        <b><a
                href="#viewtransition-outbound-post-capture-steps">#viewtransition-outbound-post-capture-steps</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-viewtransition-outbound-post-capture-steps">5. Extending
                    document.startViewTransition()</a>
            <li><a href="#ref-for-viewtransition-outbound-post-capture-steps①">9.4.2. Setup the outbound transition when
                    ready to swap pages</a>
            <li><a href="#ref-for-viewtransition-outbound-post-capture-steps②">9.4.4. Proceed with navigation if view
                    transition is skipped</a> <a href="#ref-for-viewtransition-outbound-post-capture-steps③">(2)</a>
            <li><a href="#ref-for-viewtransition-outbound-post-capture-steps④">9.4.5. Proceed with cross-document view
                    transition after capturing the old state</a> <a
                    href="#ref-for-viewtransition-outbound-post-capture-steps⑤">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="view-transition-params">
        <b><a href="#view-transition-params">#view-transition-params</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-view-transition-params">9.1.1. Additions to Document</a>
            <li><a href="#ref-for-view-transition-params①">9.1.3. Serializable view transition params</a>
            <li><a href="#ref-for-view-transition-params②">9.4.2. Setup the outbound transition when ready to swap
                    pages</a>
            <li><a href="#ref-for-view-transition-params③">9.4.5. Proceed with cross-document view transition after
                    capturing the old state</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="view-transition-params-named-elements">
        <b><a href="#view-transition-params-named-elements">#view-transition-params-named-elements</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-view-transition-params-named-elements">9.4.5. Proceed with cross-document view
                    transition after capturing the old state</a>
            <li><a href="#ref-for-view-transition-params-named-elements①">9.5. Activating the view transition in the new
                    Document</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="view-transition-params-initial-snapshot-containing-block-size">
        <b><a
                href="#view-transition-params-initial-snapshot-containing-block-size">#view-transition-params-initial-snapshot-containing-block-size</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-view-transition-params-initial-snapshot-containing-block-size">9.4.5. Proceed with
                    cross-document view transition after capturing the old state</a>
            <li><a href="#ref-for-view-transition-params-initial-snapshot-containing-block-size①">9.5. Activating the
                    view transition in the new Document</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="captured-element-class-list">
        <b><a href="#captured-element-class-list">#captured-element-class-list</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-captured-element-class-list">4.4. Additions to named view transition
                    pseudo-elements</a>
            <li><a href="#ref-for-captured-element-class-list①">9.6. Capturing the view-transition-class</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="captured-element-containing-group-name">
        <b><a
                href="#captured-element-containing-group-name">#captured-element-containing-group-name</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-captured-element-containing-group-name">9.7.4. Compute the old
                    view-transition-group</a>
            <li><a href="#ref-for-captured-element-containing-group-name①">9.7.5. Compute the new
                    view-transition-group</a>
            <li><a href="#ref-for-captured-element-containing-group-name②">9.7.6. Reparent a ::view-transition-group()
                    to its specified containing group</a>
            <li><a href="#ref-for-captured-element-containing-group-name③">9.7.7. Adjust the group’s transform to be
                    relative to its containing ::view-transition-group()</a> <a
                    href="#ref-for-captured-element-containing-group-name④">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="captured-element-old-layered-capture-style">
        <b><a
                href="#captured-element-old-layered-capture-style">#captured-element-old-layered-capture-style</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-captured-element-old-layered-capture-style">9.8.2. Capture the old layered
                    properties</a>
            <li><a href="#ref-for-captured-element-old-layered-capture-style①">9.8.6. Apply the old layered-capture
                    properties to ::view-transition-group() keyframes</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="captured-element-transform-from-snapshot-containing-block">
        <b><a
                href="#captured-element-transform-from-snapshot-containing-block">#captured-element-transform-from-snapshot-containing-block</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-captured-element-transform-from-snapshot-containing-block">9.7.7. Adjust the group’s
                    transform to be relative to its containing ::view-transition-group()</a> <a
                    href="#ref-for-captured-element-transform-from-snapshot-containing-block①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="captured-element-old-box-properties">
        <b><a href="#captured-element-old-box-properties">#captured-element-old-box-properties</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-captured-element-old-box-properties">9.7.6. Reparent a ::view-transition-group() to
                    its specified containing group</a>
            <li><a href="#ref-for-captured-element-old-box-properties①">9.8.2. Capture the old layered properties</a>
            <li><a href="#ref-for-captured-element-old-box-properties②">9.8.7. Apply the new layered-capture properties
                    to ::view-transition-group()</a> <a href="#ref-for-captured-element-old-box-properties③">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="captured-element-new-box-properties">
        <b><a href="#captured-element-new-box-properties">#captured-element-new-box-properties</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-captured-element-new-box-properties">9.7.7. Adjust the group’s transform to be
                    relative to its containing ::view-transition-group()</a>
            <li><a href="#ref-for-captured-element-new-box-properties①">9.8.7. Apply the new layered-capture properties
                    to ::view-transition-group()</a> <a href="#ref-for-captured-element-new-box-properties②">(2)</a> <a
                    href="#ref-for-captured-element-new-box-properties③">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="layered-box-properties">
        <b><a href="#layered-box-properties">#layered-box-properties</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-layered-box-properties">9.2.1. Captured elements extension</a>
            <li><a href="#ref-for-layered-box-properties①">9.8.1. Compute the layered-capture style</a>
            <li><a href="#ref-for-layered-box-properties②">9.8.5. Adjust the nested group transform</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="layered-box-properties-box-sizing">
        <b><a href="#layered-box-properties-box-sizing">#layered-box-properties-box-sizing</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-layered-box-properties-box-sizing">9.8.1. Compute the layered-capture style</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="layered-box-properties-content-box">
        <b><a href="#layered-box-properties-content-box">#layered-box-properties-content-box</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-layered-box-properties-content-box">9.8.1. Compute the layered-capture style</a>
            <li><a href="#ref-for-layered-box-properties-content-box①">9.8.7. Apply the new layered-capture properties
                    to ::view-transition-group()</a> <a href="#ref-for-layered-box-properties-content-box②">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="layered-box-properties-padding-box">
        <b><a href="#layered-box-properties-padding-box">#layered-box-properties-padding-box</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-layered-box-properties-padding-box">9.8.1. Compute the layered-capture style</a>
            <li><a href="#ref-for-layered-box-properties-padding-box①">9.8.5. Adjust the nested group transform</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="resolve-view-transition-rule">
        <b><a href="#resolve-view-transition-rule">#resolve-view-transition-rule</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-resolve-view-transition-rule">9.4.2. Setup the outbound transition when ready to swap
                    pages</a>
            <li><a href="#ref-for-resolve-view-transition-rule①">9.4.3. Update the opt-in flag to reflect the current
                    state</a>
            <li><a href="#ref-for-resolve-view-transition-rule②">9.5. Activating the view transition in the new
                    Document</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="update-the-opt-in-state-for-outbound-transitions">
        <b><a
                href="#update-the-opt-in-state-for-outbound-transitions">#update-the-opt-in-state-for-outbound-transitions</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-update-the-opt-in-state-for-outbound-transitions">2.3.1. The @view-transition rule</a>
            <li><a href="#ref-for-update-the-opt-in-state-for-outbound-transitions①">9.5. Activating the view transition
                    in the new Document</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="document-scoped-view-transition-group">
        <b><a href="#document-scoped-view-transition-group">#document-scoped-view-transition-group</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-document-scoped-view-transition-group">9.7.2. Resolving the containing group name</a>
            <li><a href="#ref-for-document-scoped-view-transition-group①">9.7.3. Resolving the group name</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="nearest-containing-group-name">
        <b><a href="#nearest-containing-group-name">#nearest-containing-group-name</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-nearest-containing-group-name">9.7.3. Resolving the group name</a> <a
                    href="#ref-for-nearest-containing-group-name①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="used-group-name">
        <b><a href="#used-group-name">#used-group-name</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-used-group-name">9.7.4. Compute the old view-transition-group</a>
            <li><a href="#ref-for-used-group-name①">9.7.5. Compute the new view-transition-group</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="valdef-view-transition-group-normal">
        <b><a href="#valdef-view-transition-group-normal">#valdef-view-transition-group-normal</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-valdef-view-transition-group-normal">9.7.1. Resolving the view-transition-group
                    value</a>
            <li><a href="#ref-for-valdef-view-transition-group-normal①">9.7.2. Resolving the containing group name</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="valdef-view-transition-group-contain">
        <b><a href="#valdef-view-transition-group-contain">#valdef-view-transition-group-contain</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-valdef-view-transition-group-contain">9.7.3. Resolving the group name</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="layered-capture-style">
        <b><a href="#layered-capture-style">#layered-capture-style</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-layered-capture-style">9.8.2. Capture the old layered properties</a>
            <li><a href="#ref-for-layered-capture-style①">9.8.7. Apply the new layered-capture properties to
                    ::view-transition-group()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="layered-capture-geometry">
        <b><a href="#layered-capture-geometry">#layered-capture-geometry</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-layered-capture-geometry">9.8.2. Capture the old layered properties</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="default-group-size">
        <b><a href="#default-group-size">#default-group-size</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-default-group-size">9.8.2. Capture the old layered properties</a>
            <li><a href="#ref-for-default-group-size①">9.8.7. Apply the new layered-capture properties to
                    ::view-transition-group()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="adjust-the-nested-group-transform">
        <b><a href="#adjust-the-nested-group-transform">#adjust-the-nested-group-transform</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-adjust-the-nested-group-transform">9.7.6. Reparent a ::view-transition-group() to its
                    specified containing group</a>
            <li><a href="#ref-for-adjust-the-nested-group-transform①">9.7.7. Adjust the group’s transform to be relative
                    to its containing ::view-transition-group()</a>
        </ul>
    </aside>
    <script>/* script-dfn-panel */

        document.body.addEventListener("click", function (e) {
            var queryAll = function (sel) { return [].slice.call(document.querySelectorAll(sel)); }
            // Find the dfn element or panel, if any, that was clicked on.
            var el = e.target;
            var target;
            var hitALink = false;
            while (el.parentElement) {
                if (el.tagName == "A") {
                    // Clicking on a link in a <dfn> shouldn't summon the panel
                    hitALink = true;
                }
                if (el.classList.contains("dfn-paneled")) {
                    target = "dfn";
                    break;
                }
                if (el.classList.contains("dfn-panel")) {
                    target = "dfn-panel";
                    break;
                }
                el = el.parentElement;
            }
            if (target != "dfn-panel") {
                // Turn off any currently "on" or "activated" panels.
                queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(function (el) {
                    el.classList.remove("on");
                    el.classList.remove("activated");
                });
            }
            if (target == "dfn" && !hitALink) {
                // open the panel
                var dfnPanel = document.querySelector(".dfn-panel[data-for='" + el.id + "']");
                if (dfnPanel) {
                    dfnPanel.classList.add("on");
                    var rect = el.getBoundingClientRect();
                    dfnPanel.style.left = window.scrollX + rect.right + 5 + "px";
                    dfnPanel.style.top = window.scrollY + rect.top + "px";
                    var panelRect = dfnPanel.getBoundingClientRect();
                    var panelWidth = panelRect.right - panelRect.left;
                    if (panelRect.right > document.body.scrollWidth && (rect.left - (panelWidth + 5)) > 0) {
                        // Reposition, because the panel is overflowing
                        dfnPanel.style.left = window.scrollX + rect.left - (panelWidth + 5) + "px";
                    }
                } else {
                    console.log("Couldn't find .dfn-panel[data-for='" + el.id + "']");
                }
            } else if (target == "dfn-panel") {
                // Switch it to "activated" state, which pins it.
                el.classList.add("activated");
                el.style.left = null;
                el.style.top = null;
            }

        });
    </script>
    <script>/* script-var-click-highlighting */

        "use strict";
        {
            document.addEventListener("click", e => {
                if (e.target.nodeName == "VAR") {
                    highlightSameAlgoVars(e.target);
                }
            });
            const indexCounts = new Map();
            const indexNames = new Map();
            function highlightSameAlgoVars(v) {
                // Find the algorithm container.
                let algoContainer = null;
                let searchEl = v;
                while (algoContainer == null && searchEl != document.body) {
                    searchEl = searchEl.parentNode;
                    if (searchEl.hasAttribute("data-algorithm")) {
                        algoContainer = searchEl;
                    }
                }

                // Not highlighting document-global vars,
                // too likely to be unrelated.
                if (algoContainer == null) return;

                const algoName = algoContainer.getAttribute("data-algorithm");
                const varName = getVarName(v);
                const addClass = !v.classList.contains("selected");
                let highlightClass = null;
                if (addClass) {
                    const index = chooseHighlightIndex(algoName, varName);
                    indexCounts.get(algoName)[index] += 1;
                    indexNames.set(algoName + "///" + varName, index);
                    highlightClass = nameFromIndex(index);
                } else {
                    const index = previousHighlightIndex(algoName, varName);
                    indexCounts.get(algoName)[index] -= 1;
                    highlightClass = nameFromIndex(index);
                }

                // Find all same-name vars, and toggle their class appropriately.
                for (const el of algoContainer.querySelectorAll("var")) {
                    if (getVarName(el) == varName) {
                        el.classList.toggle("selected", addClass);
                        el.classList.toggle(highlightClass, addClass);
                    }
                }
            }
            function getVarName(el) {
                return el.textContent.replace(/(\s|\xa0)+/, " ").trim();
            }
            function chooseHighlightIndex(algoName, varName) {
                let indexes = null;
                if (indexCounts.has(algoName)) {
                    indexes = indexCounts.get(algoName);
                } else {
                    // 7 classes right now
                    indexes = [0, 0, 0, 0, 0, 0, 0];
                    indexCounts.set(algoName, indexes);
                }

                // If the element was recently unclicked,
                // *and* that color is still unclaimed,
                // give it back the same color.
                const lastIndex = previousHighlightIndex(algoName, varName);
                if (indexes[lastIndex] === 0) return lastIndex;

                // Find the earliest index with the lowest count.
                const minCount = Math.min.apply(null, indexes);
                let index = null;
                for (var i = 0; i < indexes.length; i++) {
                    if (indexes[i] == minCount) {
                        return i;
                    }
                }
            }
            function previousHighlightIndex(algoName, varName) {
                return indexNames.get(algoName + "///" + varName);
            }
            function nameFromIndex(index) {
                return "selected" + index;
            }
        }
    </script>