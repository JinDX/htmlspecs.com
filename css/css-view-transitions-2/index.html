<!doctype html>
<html lang="zh-hans">

<head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
    <title>CSS 视图转换模块 第2级</title>
    <meta content="WD" name="w3c-status">
    <meta content="Bikeshed version 859efb4bd, updated Fri Jan 27 16:04:01 2023 -0800" name="generator">
    <link href="https://www.w3.org/TR/css-view-transitions-2/" rel="canonical">
    <meta content="59a37d9104bb346aec2ffaa900536d1a2a6666bd" name="document-revision">
    <style>
        spec-scaler {
            display: block;
        }

        spec-scaler:not(:defined)>* {
            display: none;
        }

        .spec-slides {
            width: 100%;
            height: 100%;
            border: none;
            display: block;
        }

        .spec-slide-controls {
            text-align: center;
        }

        .main-example-video {
            display: block;
            width: 100%;
            max-width: 702px;
            height: auto;
            margin: 0 auto;
        }

        /* Put nice boxes around each algorithm. */
        [data-algorithm]:not(.heading) {
            padding: .5em;
            border: thin solid #ddd;
            border-radius: .5em;
            margin: .5em calc(-0.5em - 1px);
        }

        [data-algorithm]:not(.heading)> :first-child {
            margin-top: 0;
        }

        [data-algorithm]:not(.heading)> :last-child {
            margin-bottom: 0;
        }

        [data-algorithm] [data-algorithm] {
            margin: 1em 0;
        }

        pre {
            tab-size: 2;
        }
    </style>
    <style>
        /* style-autolinks */

        .css.css,
        .property.property,
        .descriptor.descriptor {
            color: var(--a-normal-text);
            font-size: inherit;
            font-family: inherit;
        }

        .css::before,
        .property::before,
        .descriptor::before {
            content: "‘";
        }

        .css::after,
        .property::after,
        .descriptor::after {
            content: "’";
        }

        .property,
        .descriptor {
            /* Don't wrap property and descriptor names */
            white-space: nowrap;
        }

        .type {
            /* CSS value <type> */
            font-style: italic;
        }

        pre .property::before,
        pre .property::after {
            content: "";
        }

        [data-link-type="property"]::before,
        [data-link-type="propdesc"]::before,
        [data-link-type="descriptor"]::before,
        [data-link-type="value"]::before,
        [data-link-type="function"]::before,
        [data-link-type="at-rule"]::before,
        [data-link-type="selector"]::before,
        [data-link-type="maybe"]::before {
            content: "‘";
        }

        [data-link-type="property"]::after,
        [data-link-type="propdesc"]::after,
        [data-link-type="descriptor"]::after,
        [data-link-type="value"]::after,
        [data-link-type="function"]::after,
        [data-link-type="at-rule"]::after,
        [data-link-type="selector"]::after,
        [data-link-type="maybe"]::after {
            content: "’";
        }

        [data-link-type].production::before,
        [data-link-type].production::after,
        .prod [data-link-type]::before,
        .prod [data-link-type]::after {
            content: "";
        }

        [data-link-type=element],
        [data-link-type=element-attr] {
            font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
            font-size: .9em;
        }

        [data-link-type=element]::before {
            content: "<"
        }

        [data-link-type=element]::after {
            content: ">"
        }

        [data-link-type=biblio] {
            white-space: pre;
        }
    </style>
    <style>
        /* style-counters */

        body {
            counter-reset: example figure issue;
        }

        .issue {
            counter-increment: issue;
        }

        .issue:not(.no-marker)::before {
            content: "Issue " counter(issue);
        }

        .example {
            counter-increment: example;
        }

        .example:not(.no-marker)::before {
            content: "Example " counter(example);
        }

        .invalid.example:not(.no-marker)::before,
        .illegal.example:not(.no-marker)::before {
            content: "Invalid Example" counter(example);
        }

        figcaption {
            counter-increment: figure;
        }

        figcaption:not(.no-marker)::before {
            content: "Figure " counter(figure) " ";
        }
    </style>
    <style>
        /* style-dfn-panel */

        :root {
            --dfnpanel-bg: #ddd;
            --dfnpanel-text: var(--text);
        }

        .dfn-panel {
            position: absolute;
            z-index: 35;
            height: auto;
            width: -webkit-fit-content;
            width: fit-content;
            max-width: 300px;
            max-height: 500px;
            overflow: auto;
            padding: 0.5em 0.75em;
            font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
            background: var(--dfnpanel-bg);
            color: var(--dfnpanel-text);
            border: outset 0.2em;
        }

        .dfn-panel:not(.on) {
            display: none;
        }

        .dfn-panel * {
            margin: 0;
            padding: 0;
            text-indent: 0;
        }

        .dfn-panel>b {
            display: block;
        }

        .dfn-panel a {
            color: var(--dfnpanel-text);
        }

        .dfn-panel a:not(:hover) {
            text-decoration: none !important;
            border-bottom: none !important;
        }

        .dfn-panel>b+b {
            margin-top: 0.25em;
        }

        .dfn-panel ul {
            padding: 0;
        }

        .dfn-panel li {
            list-style: inside;
        }

        .dfn-panel.activated {
            display: inline-block;
            position: fixed;
            left: .5em;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - 1.5em - .4em - .5em);
            max-height: 30vh;
        }

        .dfn-paneled {
            cursor: pointer;
        }
    </style>
    <style>
        /* style-issues */

        a[href].issue-return {
            float: right;
            float: inline-end;
            color: var(--issueheading-text);
            font-weight: bold;
            text-decoration: none;
        }
    </style>
    <style>
        /* style-md-lists */

        /* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
        [data-md]> :first-child {
            margin-top: 0;
        }

        [data-md]> :last-child {
            margin-bottom: 0;
        }
    </style>
    <style>
        /* style-selflinks */

        :root {
            --selflink-text: white;
            --selflink-bg: gray;
            --selflink-hover-text: black;
        }

        .heading,
        .issue,
        .note,
        .example,
        li,
        dt {
            position: relative;
        }

        a.self-link {
            position: absolute;
            top: 0;
            left: calc(-1 * (3.5rem - 26px));
            width: calc(3.5rem - 26px);
            height: 2em;
            text-align: center;
            border: none;
            transition: opacity .2s;
            opacity: .5;
        }

        a.self-link:hover {
            opacity: 1;
        }

        .heading>a.self-link {
            font-size: 83%;
        }

        .example>a.self-link,
        .note>a.self-link,
        .issue>a.self-link {
            /* These blocks are overflow:auto, so positioning outside
       doesn't work. */
            left: auto;
            right: 0;
        }

        li>a.self-link {
            left: calc(-1 * (3.5rem - 26px) - 2em);
        }

        dfn>a.self-link {
            top: auto;
            left: auto;
            opacity: 0;
            width: 1.5em;
            height: 1.5em;
            background: var(--selflink-bg);
            color: var(--selflink-text);
            font-style: normal;
            transition: opacity .2s, background-color .2s, color .2s;
        }

        dfn:hover>a.self-link {
            opacity: 1;
        }

        dfn>a.self-link:hover {
            color: var(--selflink-hover-text);
        }

        a.self-link::before {
            content: "¶";
        }

        .heading>a.self-link::before {
            content: "§";
        }

        dfn>a.self-link::before {
            content: "#";
        }
    </style>
    <style>
        /* style-syntax-highlighting */

        pre.idl.highlight {
            background: var(--borderedblock-bg, var(--def-bg));
        }

        code.highlight {
            padding: .1em;
            border-radius: .3em;
        }

        pre.highlight,
        pre>code.highlight {
            display: block;
            padding: 1em;
            margin: .5em 0;
            overflow: auto;
            border-radius: 0;
        }

        .highlight:not(.idl) {
            background: rgba(0, 0, 0, .03);
        }

        c-[a] {
            color: #990055
        }

        /* Keyword.Declaration */
        c-[b] {
            color: #990055
        }

        /* Keyword.Type */
        c-[c] {
            color: #708090
        }

        /* Comment */
        c-[d] {
            color: #708090
        }

        /* Comment.Multiline */
        c-[e] {
            color: #0077aa
        }

        /* Name.Attribute */
        c-[f] {
            color: #669900
        }

        /* Name.Tag */
        c-[g] {
            color: #222222
        }

        /* Name.Variable */
        c-[k] {
            color: #990055
        }

        /* Keyword */
        c-[l] {
            color: #000000
        }

        /* Literal */
        c-[m] {
            color: #000000
        }

        /* Literal.Number */
        c-[n] {
            color: #0077aa
        }

        /* Name */
        c-[o] {
            color: #999999
        }

        /* Operator */
        c-[p] {
            color: #999999
        }

        /* Punctuation */
        c-[s] {
            color: #a67f59
        }

        /* Literal.String */
        c-[t] {
            color: #a67f59
        }

        /* Literal.String.Single */
        c-[u] {
            color: #a67f59
        }

        /* Literal.String.Double */
        c-[cp] {
            color: #708090
        }

        /* Comment.Preproc */
        c-[c1] {
            color: #708090
        }

        /* Comment.Single */
        c-[cs] {
            color: #708090
        }

        /* Comment.Special */
        c-[kc] {
            color: #990055
        }

        /* Keyword.Constant */
        c-[kn] {
            color: #990055
        }

        /* Keyword.Namespace */
        c-[kp] {
            color: #990055
        }

        /* Keyword.Pseudo */
        c-[kr] {
            color: #990055
        }

        /* Keyword.Reserved */
        c-[ld] {
            color: #000000
        }

        /* Literal.Date */
        c-[nc] {
            color: #0077aa
        }

        /* Name.Class */
        c-[no] {
            color: #0077aa
        }

        /* Name.Constant */
        c-[nd] {
            color: #0077aa
        }

        /* Name.Decorator */
        c-[ni] {
            color: #0077aa
        }

        /* Name.Entity */
        c-[ne] {
            color: #0077aa
        }

        /* Name.Exception */
        c-[nf] {
            color: #0077aa
        }

        /* Name.Function */
        c-[nl] {
            color: #0077aa
        }

        /* Name.Label */
        c-[nn] {
            color: #0077aa
        }

        /* Name.Namespace */
        c-[py] {
            color: #0077aa
        }

        /* Name.Property */
        c-[ow] {
            color: #999999
        }

        /* Operator.Word */
        c-[mb] {
            color: #000000
        }

        /* Literal.Number.Bin */
        c-[mf] {
            color: #000000
        }

        /* Literal.Number.Float */
        c-[mh] {
            color: #000000
        }

        /* Literal.Number.Hex */
        c-[mi] {
            color: #000000
        }

        /* Literal.Number.Integer */
        c-[mo] {
            color: #000000
        }

        /* Literal.Number.Oct */
        c-[sb] {
            color: #a67f59
        }

        /* Literal.String.Backtick */
        c-[sc] {
            color: #a67f59
        }

        /* Literal.String.Char */
        c-[sd] {
            color: #a67f59
        }

        /* Literal.String.Doc */
        c-[se] {
            color: #a67f59
        }

        /* Literal.String.Escape */
        c-[sh] {
            color: #a67f59
        }

        /* Literal.String.Heredoc */
        c-[si] {
            color: #a67f59
        }

        /* Literal.String.Interpol */
        c-[sx] {
            color: #a67f59
        }

        /* Literal.String.Other */
        c-[sr] {
            color: #a67f59
        }

        /* Literal.String.Regex */
        c-[ss] {
            color: #a67f59
        }

        /* Literal.String.Symbol */
        c-[vc] {
            color: #0077aa
        }

        /* Name.Variable.Class */
        c-[vg] {
            color: #0077aa
        }

        /* Name.Variable.Global */
        c-[vi] {
            color: #0077aa
        }

        /* Name.Variable.Instance */
        c-[il] {
            color: #000000
        }

        /* Literal.Number.Integer.Long */
    </style>
    <style>
        /* style-var-click-highlighting */

        var {
            cursor: pointer;
        }

        var.selected0 {
            background-color: #F4D200;
            box-shadow: 0 0 0 2px #F4D200;
        }

        var.selected1 {
            background-color: #FF87A2;
            box-shadow: 0 0 0 2px #FF87A2;
        }

        var.selected2 {
            background-color: #96E885;
            box-shadow: 0 0 0 2px #96E885;
        }

        var.selected3 {
            background-color: #3EEED2;
            box-shadow: 0 0 0 2px #3EEED2;
        }

        var.selected4 {
            background-color: #EACFB6;
            box-shadow: 0 0 0 2px #EACFB6;
        }

        var.selected5 {
            background-color: #82DDFF;
            box-shadow: 0 0 0 2px #82DDFF;
        }

        var.selected6 {
            background-color: #FFBCF2;
            box-shadow: 0 0 0 2px #FFBCF2;
        }
    </style>
    <link href="https://www.w3.org/StyleSheets/TR/2021/W3C-WD" rel="stylesheet">

<body class="h-entry">
    <div class="head">
        <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48"
                    src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72"> </a> </p>
        <h1 class="p-name no-ref" id="title">CSS 视图转换模块 第2级</h1>
        <p id="w3c-state"><a href="https://www.w3.org/standards/types#WD">W3C 工作草案</a>, <time class="dt-updated"
                datetime="2024-11-13">2024年11月13日</time></p>
        <details open>
            <summary>关于本文档的更多详情</summary>
            <div data-fill-with="spec-metadata">
                <dl>
                    <dt>本版本:
                    <dd><a class="u-url"
                            href="https://www.w3.org/TR/2024/WD-css-view-transitions-2-20241113/">https://www.w3.org/TR/2024/WD-css-view-transitions-2-20241113/</a>
                    <dt>最新发布版本:
                    <dd><a
                            href="https://www.w3.org/TR/css-view-transitions-2/">https://www.w3.org/TR/css-view-transitions-2/</a>
                    <dt>编辑草案:
                    <dd><a
                            href="https://drafts.csswg.org/css-view-transitions-2/">https://drafts.csswg.org/css-view-transitions-2/</a>
                    <dt>历史记录:
                    <dd><a class="u-url"
                            href="https://www.w3.org/standards/history/css-view-transitions-2">https://www.w3.org/standards/history/css-view-transitions-2</a>
                    <dt>反馈:
                    <dd><a href="https://github.com/w3c/csswg-drafts/labels/css-view-transitions-2">CSSWG 问题仓库</a>
                    <dd><a href="#issues-index">规范内联</a>
                    <dt class="editor">编辑:
                    <dd class="editor p-author h-card vcard" data-editor-id="121539"><span class="p-name fn">Noam
                            Rosenthal</span> (<span class="p-org org">Google</span>)
                    <dd class="editor p-author h-card vcard" data-editor-id="122787"><span class="p-name fn">Khushal
                            Sagar</span> (<span class="p-org org">Google</span>)
                    <dd class="editor p-author h-card vcard" data-editor-id="75295"><span class="p-name fn">Vladimir
                            Levin</span> (<span class="p-org org">Google</span>)
                    <dd class="editor p-author h-card vcard" data-editor-id="42199"><a class="p-name fn u-url url"
                            href="http://xanthir.com/contact/">Tab Atkins-Bittner</a> (<span
                            class="p-org org">Google</span>)
                    <dt>为此规范建议修改:
                    <dd><a href="https://github.com/w3c/csswg-drafts/blob/main/css-view-transitions-2/Overview.bs">GitHub
                            编辑器</a>
                </dl>
            </div>
        </details>
        <div data-fill-with="warning"></div>
        <p class="copyright" data-fill-with="copyright"><a href="https://www.w3.org/policies/#copyright">Copyright</a> ©
            2024 <a href="https://www.w3.org/">World Wide Web Consortium</a>. <abbr
                title="World Wide Web Consortium">W3C</abbr><sup>®</sup> <a
                href="https://www.w3.org/policies/#Legal_Disclaimer">liability</a>, <a
                href="https://www.w3.org/policies/#W3C_Trademarks">trademark</a> and <a
                href="https://www.w3.org/copyright/software-license/" rel="license"
                title="W3C Software and Document License">permissive document license</a> rules apply. </p>
        <hr title="Separator for header">
    </div>
    <div class="p-summary" data-fill-with="abstract">
        <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">摘要</span></h2>
        <p>本模块定义了视图转换 API 如何与跨文档导航配合工作。</p>
        <a href="https://www.w3.org/TR/CSS/">CSS</a> 是一种用于描述结构化文档（如 HTML 和 XML）在屏幕、纸张等媒介上渲染的语言。
    </div>
    <h2 class="no-num no-toc no-ref heading settled" id="sotd"><span class="content">本文档状态</span></h2>
    <div data-fill-with="status">
        <p><em>本节描述了本文档在发布时的状态。
                当前 W3C 出版物列表
                以及本技术报告的最新修订版
                可在 <a href="https://www.w3.org/TR/">W3C 技术报告索引 https://www.w3.org/TR/ 中找到。</a></em> </p>
        <p> 本文档由 <a href="https://www.w3.org/groups/wg/css">CSS 工作组</a> 作为<strong>工作草案</strong>
            使用 <a href="https://www.w3.org/policies/process/20231103/#recs-and-notes">推荐标准
                流程</a> 发布。
            作为工作草案发布
            并不意味着获得 <abbr title="World Wide Web Consortium">W3C</abbr> 及其成员的认可。 </p>
        <p> 这是一份草案文档，
            随时可能被其他文档更新、替换
            或废弃。
            将本文档引用为进行中的工作以外的内容是不合适的。 </p>
        <p>请通过 <a href="https://github.com/w3c/csswg-drafts/issues">在 GitHub 提交问题</a>（首选）发送反馈，
            在标题中包含规范代码 "css-view-transitions"，如下所示：
            "[css-view-transitions] <i>…评论摘要…</i>"。
            所有问题和评论都已 <a href="https://lists.w3.org/Archives/Public/public-css-archive/">存档</a>。
            或者，反馈可以发送到（<a href="https://lists.w3.org/Archives/Public/www-style/">已存档</a>）公共邮件列表 <a
                href="mailto:www-style@w3.org?Subject=%5Bcss-view-transitions%5D%20PUT%20SUBJECT%20HERE">www-style@w3.org</a>。
        </p>
        <p>本文档受 <a href="https://www.w3.org/policies/process/20231103/" id="w3c_process_revision">2023年11月3日 W3C
                流程文档</a> 管辖。 </p>
        <p>本文档由在 <a href="https://www.w3.org/policies/patent-policy/20200915/">W3C 专利政策</a> 下运作的工作组制作。
            W3C 维护一个 <a href="https://www.w3.org/groups/wg/css/ipr" rel="disclosure">与该工作组交付成果相关的专利披露公开列表</a>；
            该页面还包含披露专利的说明。
            实际了解包含 <a href="https://www.w3.org/policies/patent-policy/20200915/#def-essential">基本权利要求</a>
            专利的个人必须根据 <a href="https://www.w3.org/policies/patent-policy/20200915/#sec-Disclosure">W3C 专利政策第6节</a> 披露信息。
        </p>
        <p></p>
    </div>
    <div data-fill-with="at-risk"></div>
    <nav data-fill-with="table-of-contents" id="toc">
        <h2 class="no-num no-toc no-ref" id="contents">目录</h2>
        <ol class="toc" role="directory">
            <li><a href="#intro"><span class="secno">1</span> <span class="content">介绍</span></a>
            <li>
                <a href="#cross-document-view-transitions"><span class="secno">2</span> <span
                        class="content">跨文档视图转换</span></a>
                <ol class="toc">
                    <li>
                        <a href="#cross-doc-overview"><span class="secno">2.1</span> <span class="content">概述</span></a>
                        <ol class="toc">
                            <li><a href="#activating-cross-document-view-transition"><span class="secno">2.1.1</span>
                                    <span class="content">激活</span></a>
                            <li><a href="#waiting-for-stable-state"><span class="secno">2.1.2</span> <span
                                        class="content">等待新状态稳定</span></a>
                            <li>
                                <a href="#customizing-cross-document-view-transitions"><span class="secno">2.1.3</span>
                                    <span class="content">自定义</span></a>
                                <ol class="toc">
                                    <li><a href="#old-doc-event"><span class="secno">2.1.3.1</span> <span
                                                class="content">在旧文档中处理视图转换</span></a>
                                    <li><a href="#new-doc-event"><span class="secno">2.1.3.2</span> <span
                                                class="content">在新文档中处理视图转换</span></a>
                                </ol>
                            <li><a href="#lifecycle"><span class="secno">2.1.4</span> <span
                                        class="content">生命周期</span></a>
                        </ol>
                    <li><a href="#cross-doc-examples"><span class="secno">2.2</span> <span class="content">示例</span></a>
                    <li>
                        <a href="#cross-doc-opt-in"><span class="secno">2.3</span> <span
                                class="content">选择加入跨文档视图转换</span></a>
                        <ol class="toc">
                            <li><a href="#view-transition-rule"><span class="secno">2.3.1</span> <span
                                        class="content"><span><span class="css">@view-transition</span></span>
                                        规则</span></a>
                            <li><a href="#view-transition-navigation-descriptor"><span class="secno">2.3.2</span> <span
                                        class="content"><span>navigation</span> 描述符</span></a>
                            <li><a href="#cssom"><span class="secno">2.3.3</span> <span class="content">使用 CSSOM 访问
                                        <span class="css">@view-transition</span> 规则</span></a>
                        </ol>
                </ol>
            <li>
                <a href="#selective-vt"><span class="secno">3</span> <span class="content">选择性视图转换</span></a>
                <ol class="toc">
                    <li><a href="#selective-vt-overview"><span class="secno">3.1</span> <span
                                class="content">概述</span></a>
                    <li><a href="#active-view-transition-pseudo-examples"><span class="secno">3.2</span> <span
                                class="content">示例</span></a>
                    <li>
                        <a href="#pseudo-classes-for-selective-vt"><span class="secno">3.3</span> <span
                                class="content">基于活动视图转换的选择</span></a>
                        <ol class="toc">
                            <li><a href="#the-active-view-transition-pseudo"><span class="secno">3.3.1</span> <span
                                        class="content"><span class="css">:active-view-transition</span>
                                        伪类</span></a>
                            <li><a href="#the-active-view-transition-type-pseudo"><span class="secno">3.3.2</span> <span
                                        class="content"><span class="css">:active-view-transition-type()</span>
                                        伪类</span></a>
                        </ol>
                    <li><a href="#view-transitions-extension-types"><span class="secno">3.4</span> <span
                                class="content">更改正在进行的视图转换的类型</span></a>
                    <li><a href="#types-cross-doc"><span class="secno">3.5</span> <span
                                class="content">为跨文档视图转换激活转换类型</span></a>
                </ol>
            <li>
                <a href="#shared-style-with-vt-classes"><span class="secno">4</span> <span
                        class="content">在视图转换伪元素间共享样式</span></a>
                <ol class="toc">
                    <li><a href="#shared-style-overview"><span class="secno">4.1</span> <span
                                class="content">概述</span></a>
                    <li><a href="#vt-class-example"><span class="secno">4.2</span> <span class="content">示例</span></a>
                    <li><a href="#view-transition-class-prop"><span class="secno">4.3</span> <span class="content">
                                <span class="property">view-transition-class</span> 属性</span></a>
                    <li><a href="#pseudo-element-class-additions"><span class="secno">4.4</span> <span
                                class="content">对命名视图转换伪元素的补充</span></a>
                </ol>
            <li><a href="#extend-document-types"><span class="secno">5</span> <span class="content">扩展 <code
                            class="idl"><span>document.startViewTransition()</span></code></span></a>
            <li>
                <a href="#auto-vt-name"><span class="secno">6</span> <span class="content">自动确定 <span
                            class="property">view-transition-name</span></span></a>
                <ol class="toc">
                    <li><a href="#auto-vt-name-overview"><span class="secno">6.1</span> <span
                                class="content">概述</span></a>
                    <li><a href="#auto-vt-name-example"><span class="secno">6.2</span> <span
                                class="content">示例</span></a>
                    <li><a href="#additions-to-vt-name"><span class="secno">6.3</span> <span class="content">对
                                <span class="property">view-transition-name</span> 的补充</span></a>
                </ol>
            <li>
                <a href="#nested-view-transitions"><span class="secno">7</span> <span class="content">嵌套视图转换</span></a>
                <ol class="toc">
                    <li><a href="#nested-overview"><span class="secno">7.1</span> <span class="content">概述</span></a>
                    <li><a href="#nested-vt-example"><span class="secno">7.2</span> <span class="content">示例</span></a>
                    <li><a href="#view-transition-group-prop"><span class="secno">7.3</span> <span class="content">
                                <span class="property">view-transition-group</span> 属性</span></a>
                </ol>
            <li>
                <a href="#layered-capture"><span class="secno">8</span> <span class="content">分层捕获</span></a>
                <ol class="toc">
                    <li><a href="#layered-capture-overview"><span class="secno">8.1</span> <span
                                class="content">概述</span></a>
                    <li><a href="#layered-captured-css-properties"><span class="secno">8.2</span> <span
                                class="content">已捕获 CSS 属性表
                                {#layered-captured-css-properties}</span></a>
                </ol>
            <li>
                <a href="#algorithms"><span class="secno">9</span> <span class="content">算法</span></a>
                <ol class="toc">
                    <li>
                        <a href="#cross-doc-data-structures"><span class="secno">9.1</span> <span
                                class="content">数据结构</span></a>
                        <ol class="toc">
                            <li><a href="#cross-doc-data-structure-document"><span class="secno">9.1.1</span> <span
                                        class="content">对 <code class="idl"><span>Document</span></code> 的补充</span></a>
                            <li><a href="#cross-doc-data-structure-vt"><span class="secno">9.1.2</span> <span
                                        class="content">对 <code class="idl"><span>ViewTransition</span></code>
                                        的补充</span></a>
                            <li><a href="#cross-doc-data-structure-serialization"><span class="secno">9.1.3</span> <span
                                        class="content">可序列化的 <span>视图转换参数</span></span></a>
                        </ol>
                    <li>
                        <a href="#page-visibility-change-steps-additions"><span class="secno">9.2</span> <span
                                class="content">对视图转换页面可见性更改步骤的补充</span></a>
                        <ol class="toc">
                            <li><a href="#capture-classes-data-structure"><span class="secno">9.2.1</span> <span
                                        class="content">已捕获元素扩展</span></a>
                        </ol>
                    <li><a href="#vt-rule-algo"><span class="secno">9.3</span> <span class="content">解析 <span
                                    class="css">@view-transition</span> 规则</span></a>
                    <li>
                        <a href="#setup-old-document-vt"><span class="secno">9.4</span> <span class="content">在旧 <code
                                    class="idl"><span>Document</span></code> 中设置视图转换</span></a>
                        <ol class="toc">
                            <li><a href="#check-eligibility"><span class="secno">9.4.1</span> <span
                                        class="content">检查出站跨文档视图转换的资格</span></a>
                            <li><a href="#setup-outbound-transition"><span class="secno">9.4.2</span> <span
                                        class="content">准备交换页面时设置出站转换</span></a>
                            <li><a href="#update-opt-in"><span class="secno">9.4.3</span> <span
                                        class="content">更新选择加入标志以反映当前状态</span></a>
                            <li><a href="#proceed-if-skipped"><span class="secno">9.4.4</span> <span
                                        class="content">如果跳过视图转换则继续导航</span></a>
                            <li><a href="#cross-doc-after-capture"><span class="secno">9.4.5</span> <span
                                        class="content">捕获旧状态后进行跨文档视图转换</span></a>
                        </ol>
                    <li><a href="#access-view-transition-in-new-doc"><span class="secno">9.5</span> <span
                                class="content">在新 <code class="idl"><span>Document</span></code> 中激活视图转换</span></a>
                    <li><a href="#vt-class-algorithms"><span class="secno">9.6</span> <span class="content">捕获
                                <span class="property">view-transition-class</span></span></a>
                    <li>
                        <a href="#vt-group-algorithm"><span class="secno">9.7</span> <span class="content">捕获和应用
                                <span class="property">view-transition-group</span></span></a>
                        <ol class="toc">
                            <li><a href="#vt-group-value-resolve"><span class="secno">9.7.1</span> <span
                                        class="content">解析 <span class="property">view-transition-group</span>
                                        值</span></a>
                            <li><a href="#vt-containing-group-name-resolve"><span class="secno">9.7.2</span> <span
                                        class="content">解析包含组名称</span></a>
                            <li><a href="#vt-group-name-resolve"><span class="secno">9.7.3</span> <span
                                        class="content">解析组名称</span></a>
                            <li><a href="#vt-group-capture-old"><span class="secno">9.7.4</span> <span
                                        class="content">计算旧 <span
                                            class="property">view-transition-group</span></span></a>
                            <li><a href="#vt-group-capture-new"><span class="secno">9.7.5</span> <span
                                        class="content">计算新 <span
                                            class="property">view-transition-group</span></span></a>
                            <li><a href="#vt-group-reparent"><span class="secno">9.7.6</span> <span class="content">将
                                        <span class="css">::view-transition-group()</span> 重新指定到其指定的包含组</span></a>
                            <li><a href="#vt-group-transform-adjust"><span class="secno">9.7.7</span> <span
                                        class="content">调整组的 <span class="property">transform</span> 使其相对于其包含的 <span
                                            class="css">::view-transition-group()</span></span></a>
                        </ol>
                    <li>
                        <a href="#layered-capture-algorithms"><span class="secno">9.8</span> <span class="content">捕获分层
                                CSS 属性</span></a>
                        <ol class="toc">
                            <li><a href="#layered-capture-compute-style"><span class="secno">9.8.1</span> <span
                                        class="content">计算分层捕获样式</span></a>
                            <li><a href="#capture-new-layered-props-algorithm"><span class="secno">9.8.2</span> <span
                                        class="content">捕获旧分层属性</span></a>
                            <li><a href="#capture-image-size-algorithm"><span class="secno">9.8.3</span> <span
                                        class="content">图像捕获大小调整</span></a>
                            <li><a href="#layered-capture-rendering"><span class="secno">9.8.4</span> <span
                                        class="content">使用分层捕获渲染快照</span></a>
                            <li><a href="#vt-adjust-nested-group-transform"><span class="secno">9.8.5</span> <span
                                        class="content">调整嵌套组变换</span></a>
                            <li><a href="#vt-layered-capture-apply-keyframes"><span class="secno">9.8.6</span> <span
                                        class="content">将旧分层捕获属性应用到 <span class="css">::view-transition-group()</span>
                                        关键帧</span></a>
                            <li><a href="#vt-layered-capture-apply-new-state"><span class="secno">9.8.7</span> <span
                                        class="content">将新分层捕获属性应用到 <span
                                            class="css">::view-transition-group()</span></span></a>
                        </ol>
                </ol>
            <li><a href="#priv"><span class="secno"></span> <span class="content">隐私考虑</span></a>
            <li><a href="#sec"><span class="secno"></span> <span class="content">安全考虑</span></a>
            <li>
                <a href="#changes"><span class="secno"></span> <span class="content">附录 A. 更改</span></a>
                <ol class="toc">
                    <li><a href="#changes-since-2024-05-16"><span class="secno"></span> <span class="content">自
                                <span>2024-05-16 工作草案</span> 以来的更改</span></a>
                </ol>
            <li>
                <a href="#w3c-conformance"><span class="secno"></span> <span class="content">一致性</span></a>
                <ol class="toc">
                    <li><a href="#w3c-conventions"><span class="secno"></span> <span class="content">文档约定</span></a>
                    <li><a href="#w3c-conformance-classes"><span class="secno"></span> <span
                                class="content">一致性类别</span></a>
                    <li>
                        <a href="#w3c-partial"><span class="secno"></span> <span class="content">部分实现</span></a>
                        <ol class="toc">
                            <li><a href="#w3c-conform-future-proofing"><span class="secno"></span> <span
                                        class="content">不稳定和专有功能的实现</span></a>
                        </ol>
                    <li><a href="#w3c-testing"><span class="secno"></span> <span class="content">非实验性实现</span></a>
                </ol>
            <li>
                <a href="#index"><span class="secno"></span> <span class="content">索引</span></a>
                <ol class="toc">
                    <li><a href="#index-defined-here"><span class="secno"></span> <span
                                class="content">本规范定义的术语</span></a>
                    <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span
                                class="content">通过引用定义的术语</span></a>
                </ol>
            <li>
                <a href="#references"><span class="secno"></span> <span class="content">参考文献</span></a>
                <ol class="toc">
                    <li><a href="#normative"><span class="secno"></span> <span class="content">规范性参考文献</span></a>
                    <li><a href="#informative"><span class="secno"></span> <span class="content">信息性参考文献</span></a>
                </ol>
            <li>
                <a href="#property-index"><span class="secno"></span> <span class="content">属性索引</span></a>
                <ol class="toc">
                    <li><a href="#view-transition-descriptor-table"><span class="secno"></span> <span
                                class="content"><span>@view-transition</span> 描述符</span></a>
                </ol>
            <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL 索引</span></a>
            <li><a href="#issues-index"><span class="secno"></span> <span class="content">问题索引</span></a>
        </ol>
    </nav>
    <main>
        <script async src="diagrams/resources/scaler.js" type="module"></script>
        <h2 class="heading settled" data-level="1" id="intro"><span class="secno">1. </span><span
                class="content">介绍</span><a class="self-link" href="#intro"></a></h2>
        <p><em>本节为非规范性内容。</em></p>
        <p>视图转换，如 <a data-link-type="biblio" href="#biblio-css-view-transitions-1"
                title="CSS View Transitions Module Level 1">[css-view-transitions-1]</a> 中所规定的，是一个允许开发者
            在<a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document"
                id="ref-for-concept-document">文档</a>的视觉状态之间创建动画转换的功能。</p>
        <p>第2级扩展了该规范，通过添加必要的 API 和生命周期来启用
            跨同源跨文档导航的转换，以及一些让编写具有更丰富视图转换的页面变得更容易的附加功能。</p>
        <p>第2级定义了以下内容：</p>
        <ul>
            <li data-md>
                <p><a href="#cross-document-view-transitions">跨文档视图转换</a>，包括 <a class="css" data-link-type="maybe"
                        href="#at-view-transition-rule" id="ref-for-at-view-transition-rule">@view-transition</a> 规则和
                    启用跨文档视图转换生命周期的算法。</p>
            <li data-md>
                <p><a href="#selective-vt">选择性视图转换</a>，一种基于是否存在<a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-view-transitions-1/#document-active-view-transition"
                        id="ref-for-document-active-view-transition">活动视图转换</a>来匹配样式的方法，
                    更具体地说，是基于活动视图转换是否为某个特定类型。</p>
            <li data-md>
                <p><a href="#shared-style-with-vt-classes">在视图转换伪元素之间共享样式</a>，一种声明一次样式，
                    并将其用于多个视图转换伪元素的方法。这包括 <a class="property css" data-link-type="property"
                        href="#propdef-view-transition-class"
                        id="ref-for-propdef-view-transition-class">view-transition-class</a> 属性，以及<a
                        href="#pseudo-element-class-additions">对命名伪元素的添加</a></p>
        </ul>
        <h2 class="heading settled" data-level="2" id="cross-document-view-transitions"><span class="secno">2.
            </span><span class="content">跨文档视图转换</span><a class="self-link" href="#cross-document-view-transitions"></a>
        </h2>
        <h3 class="heading settled" data-level="2.1" id="cross-doc-overview"><span class="secno">2.1. </span><span
                class="content">概述</span><a class="self-link" href="#cross-doc-overview"></a></h3>
        <p><em>本节为非规范性内容。</em></p>
        <h4 class="heading settled" data-level="2.1.1" id="activating-cross-document-view-transition"><span
                class="secno">2.1.1. </span><span class="content">激活</span><a class="self-link"
                href="#activating-cross-document-view-transition"></a></h4>
        对于同文档视图转换，作者通过调用 <code
            class="idl"><a data-link-type="idl" href="#dom-document-startviewtransition" id="ref-for-dom-document-startviewtransition">startViewTransition</a></code>
        使用 JavaScript 来启动视图转换。
        在跨文档视图转换中，触发视图转换的是两个文档之间的导航，只要满足以下条件：
        <ul>
            <li data-md>
                <p>两个文档都是<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#same-origin"
                        id="ref-for-same-origin">同源</a>的；</p>
            <li data-md>
                <p>页面在整个导航过程中保持可见；</p>
            <li data-md>
                <p>用户通过与页面交互来发起导航，例如点击链接或提交表单；或者通过与浏览器 UI 交互来进行 <code
                        class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-navigationtype-traverse" id="ref-for-dom-navigationtype-traverse">traverse</a></code>
                    导航（前进/后退）。这排除了例如通过 URL 栏发起的导航；</p>
            <li data-md>
                <p>导航没有包含跨源重定向；并且</p>
            <li data-md>
                <p>两个文档都使用 <a class="css" data-link-type="maybe" href="#at-view-transition-rule"
                        id="ref-for-at-view-transition-rule①">@view-transition</a> 规则选择了跨文档视图转换。</p>
        </ul>
        <p>详细信息请参见<a href="#lifecycle">生命周期</a>部分。</p>
        <h4 class="heading settled" data-level="2.1.2" id="waiting-for-stable-state"><span class="secno">2.1.2.
            </span><span class="content">等待新状态稳定</span><a class="self-link" href="#waiting-for-stable-state"></a></h4>
        在同文档视图转换中，作者可以使用传递给 <code
            class="idl"><a data-link-type="idl" href="#dom-document-startviewtransition" id="ref-for-dom-document-startviewtransition①">startViewTransition</a></code>
        的回调来指示转换的新状态何时处于稳定状态。
        由于跨文档视图转换是声明性的，因此没有这样的显式承诺。相反，用户代理依赖<a data-link-type="dfn"
            href="https://html.spec.whatwg.org/multipage/dom.html#render-blocking-mechanism"
            id="ref-for-render-blocking-mechanism">渲染阻塞机制</a>来决定文档何时达到稳定状态。
        通过这种方式，作者可以使用 <code data-x>blocking</code> 属性来延迟转换，直到：
        <ul>
            <li data-md>
                <p>所有预期的脚本都执行完毕，通过在必需的脚本上使用脚本的 <code
                        class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/scripting.html#dom-script-blocking" id="ref-for-dom-script-blocking">blocking</a></code>
                    属性。</p>
            <li data-md>
                <p>所有预期的样式都应用完毕，通过在必需的样式上使用样式或链接的 <code
                        class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/semantics.html#dom-style-blocking" id="ref-for-dom-style-blocking">blocking</a></code>
                    属性。</p>
            <li data-md>
                <p>所有预期的 HTML 元素都被解析器看到，使用
                    <code><a data-link-type="attr-value" href="https://html.spec.whatwg.org/multipage/links.html#link-type-expect" id="ref-for-link-type-expect">expect</a></code>
                    <code
                        class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/semantics.html#htmllinkelement" id="ref-for-htmllinkelement">HTMLLinkElement</a></code>
                    元素。
                </p>
        </ul>
        <p class="note" role="note"><span class="marker">注意：</span>过度使用渲染阻塞机制可能会使
            旧状态长时间保持冻结，导致用户体验不佳。
            为了避免这种情况，建议确保渲染阻塞元素能及时可用。
        </p>
        <div class="example" id="example-ece69f12">
            <a class="self-link" href="#example-ece69f12"></a>
            <p>在这个例子中，旧文档的最后一帧将会显示，动画将被延迟，
                直到满足以下所有条件：</p>
            <ul>
                <li data-md>
                    <p><code>style.css</code> 被应用，以确保新状态具有正确的样式</p>
                <li data-md>
                    <p><code>fixup.js</code> 被运行，以确保演示已通过基于脚本的修复更新到最新状态。
                    </p>
                <li data-md>
                    <p><code>main-article</code> 部分被看到和解析，以确保在允许转换继续之前加载了足够的内容。</p>
            </ul>
            <pre class="language-html highlight"><c- cp>&lt;!DOCTYPE html></c->
<c- p>&lt;</c-><c- f>html</c-><c- p>></c->
    <c- p>&lt;</c-><c- f>head</c-><c- p>></c->
        &lt; !-- 这将默认阻塞渲染 -->
        <c- p>&lt;</c-><c- f>link</c-> <c- e>rel</c-><c- o>=</c-><c- s>"stylesheet"</c-> <c- e>href</c-><c- o>=</c-><c- s>"style.css"</c-><c- p>></c->

        &lt; !-- 由于这个脚本修复了布局，将其标记为渲染阻塞将
                确保在视图转换激活之前运行它 -->
        <c- p>&lt;</c-><c- f>script</c-> <c- e>async</c-> <c- e>href</c-><c- o>=</c-><c- s>"fixup.js"</c-> <c- e>blocking</c-><c- o>=</c-><c- s>"render"</c-><c- p>>&lt;/</c-><c- f>script</c-><c- p>></c->

        &lt; !-- 等待 main-article 元素被看到并完全解析后
                再激活转换 -->
        <c- p>&lt;</c-><c- f>link</c-> <c- e>rel</c-><c- o>=</c-><c- s>"expect"</c-> <c- e>href</c-><c- o>=</c-><c- s>"#main-article"</c-> <c- e>blocking</c-><c- o>=</c-><c- s>"render"</c-><c- p>></c->
    <c- p>&lt;/</c-><c- f>head</c-><c- p>></c->
    <c- p>&lt;</c-><c- f>body</c-><c- p>></c->
        <c- p>&lt;</c-><c- f>header</c-><c- p>></c->...<c- p>&lt;/</c-><c- f>header</c-><c- p>></c->
        <c- p>&lt;</c-><c- f>main</c-><c- p>></c->
            <c- p>&lt;</c-><c- f>article</c-> <c- e>id</c-><c- o>=</c-><c- s>"main-article"</c-><c- p>></c->...<c- p>&lt;/</c-><c- f>article</c-><c- p>></c->
        <c- p>&lt;/</c-><c- f>main</c-><c- p>></c->
        <c- p>&lt;</c-><c- f>article</c-> <c- e>id</c-><c- o>=</c-><c- s>"secondary-article"</c-><c- p>></c->...<c- p>&lt;/</c-><c- f>article</c-><c- p>></c->
    <c- p>&lt;/</c-><c- f>body</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>html</c-><c- p>></c->
</pre>
        </div>
        <h4 class="heading settled" data-level="2.1.3" id="customizing-cross-document-view-transitions"><span
                class="secno">2.1.3. </span><span class="content">自定义</span><a class="self-link"
                href="#customizing-cross-document-view-transitions"></a></h4>
        <code
            class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition" id="ref-for-viewtransition">ViewTransition</a></code>
        对象允许在脚本中自定义转换。
        同文档视图转换使用从 <code
            class="idl"><a data-link-type="idl" href="#dom-document-startviewtransition" id="ref-for-dom-document-startviewtransition②">startViewTransition</a></code>
        调用返回的单个 <code
            class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition" id="ref-for-viewtransition①">ViewTransition</a></code>
        对象来处理整个生命周期。
        跨文档视图转换有两个 <code
            class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition" id="ref-for-viewtransition②">ViewTransition</a></code>
        对象，一个在旧文档中，一个在新文档中。
        <h5 class="heading settled" data-level="2.1.3.1" id="old-doc-event"><span class="secno">2.1.3.1. </span><span
                class="content">在旧文档中处理视图转换</span><a class="self-link" href="#old-doc-event"></a></h5>
        <p><code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/indices.html#event-pageswap" id="ref-for-event-pageswap">pageswap</a></code>
            事件在文档即将被卸载并被另一个文档替换之前的最后时刻触发。
            它可以用来了解视图转换是否即将发生，使用 <code
                class="idl"><a data-link-type="idl" href="#dom-viewtransition-types" id="ref-for-dom-viewtransition-types">types</a></code>
            自定义它，
            对捕获的元素做最后的更改，或在必要时跳过它。
            <code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#pageswapevent" id="ref-for-pageswapevent">PageSwapEvent</a></code>
            接口有一个 <code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-pageswapevent-viewtransition" id="ref-for-dom-pageswapevent-viewtransition">viewTransition</a></code>
            对象，当导航符合视图转换条件时，该对象将为非 null，
            以及一个 <code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-pageswapevent-activation" id="ref-for-dom-pageswapevent-activation">activation</a></code>
            对象，提供有关导航的便用信息，如重定向后的 URL。
            转换的 <code
                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-view-transitions-1/#dom-viewtransition-finished" id="ref-for-dom-viewtransition-finished">finished</a></code>
            承诺可以用于在转换后进行清理，以防文档稍后从 BFCache 中恢复。
        </p>
        <h5 class="heading settled" data-level="2.1.3.2" id="new-doc-event"><span class="secno">2.1.3.2. </span><span
                class="content">在新文档中处理视图转换</span><a class="self-link" href="#new-doc-event"></a></h5>
        <p><code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/indices.html#event-pagereveal" id="ref-for-event-pagereveal">pagereveal</a></code>
            事件在呈现新文档的第一帧之前触发。
            它可以用来通过查询 <code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-pagerevealevent-viewtransition" id="ref-for-dom-pagerevealevent-viewtransition">viewTransition</a></code>
            属性来了解视图转换是否仍然有效。
            类似于同文档视图转换，作者现在可以选择不同的 <code
                class="idl"><a data-link-type="idl" href="#dom-viewtransition-types" id="ref-for-dom-viewtransition-types①">types</a></code>，
            对捕获的元素做最后的更改，等待转换<code
                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-view-transitions-1/#dom-viewtransition-ready" id="ref-for-dom-viewtransition-ready">ready</a></code>
            以便为其添加动画，或完全跳过它。</p>
        <h4 class="heading settled" data-level="2.1.4" id="lifecycle"><span class="secno">2.1.4. </span><span
                class="content">生命周期</span><a class="self-link" href="#lifecycle"></a></h4>
        <p><em>本节为非规范性内容。</em></p>
        <p>成功的跨文档视图转换会经过以下阶段：</p>
        <ol>
            <li data-md>
                <p>在旧的 <code
                        class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document">Document</a></code>
                    中：
                </p>
                <ol>
                    <li data-md>
                        <p>用户发起导航，例如点击链接、提交表单、按浏览器的后退按钮等。</p>
                        <p class="note" role="note"><span class="marker">注意：</span>某些导航不会触发视图转换，例如在 URL 栏中输入新地址。</p>
                    <li data-md>
                        <p>当新的 <code
                                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document①">Document</a></code>
                            准备好被激活时，<code
                                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/indices.html#event-pageswap" id="ref-for-event-pageswap①">pageswap</a></code>
                            事件被触发。</p>
                    <li data-md>
                        <p>如果导航是<a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/browsers.html#same-origin"
                                id="ref-for-same-origin①">同源</a>的，没有跨源重定向，
                            并且旧的 <code
                                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document②">Document</a></code>
                            已<a href="#cross-doc-opt-in">选择了跨文档视图转换</a>，事件的
                            <code
                                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-pageswapevent-viewtransition" id="ref-for-dom-pageswapevent-viewtransition①">viewTransition</a></code>
                            属性将是
                            一个 <code
                                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition" id="ref-for-viewtransition③">ViewTransition</a></code>
                            对象。
                        </p>
                    <li data-md>
                        <p>作者现在可以自定义转换，例如通过改变其 <code
                                class="idl"><a data-link-type="idl" href="#dom-viewtransition-types" id="ref-for-dom-viewtransition-types②">types</a></code>，
                            或完全<code
                                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-view-transitions-1/#dom-viewtransition-skiptransition" id="ref-for-dom-viewtransition-skiptransition">skip</a></code>
                            它。</p>
                    <li data-md>
                        <p>如果 <code
                                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition" id="ref-for-viewtransition④">ViewTransition</a></code>
                            没有被跳过，旧文档的状态将被<a data-link-type="dfn"
                                href="https://www.w3.org/TR/css-view-transitions-1/#capture-the-old-state"
                                id="ref-for-capture-the-old-state">捕获</a>。</p>
                    <li data-md>
                        <p>导航继续：旧的 <code
                                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document③">Document</a></code>
                            被卸载，新的 <code
                                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document④">Document</a></code>
                            现在处于活动状态。</p>
                </ol>
            <li data-md>
                <p>然后，在新的 <code
                        class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document⑤">Document</a></code>
                    中：
                </p>
                <ol>
                    <li data-md>
                        <p>当新的 <code
                                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document⑥">Document</a></code>
                            准备好进行第一次<a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/webappapis.html#rendering-opportunity"
                                id="ref-for-rendering-opportunity">渲染机会</a>时，一个名为 <code
                                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/indices.html#event-pagereveal" id="ref-for-event-pagereveal①">pagereveal</a></code>
                            的事件在新的 <code
                                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document⑦">Document</a></code>
                            上触发，
                            带有一个 <code
                                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-pagerevealevent-viewtransition" id="ref-for-dom-pagerevealevent-viewtransition①">viewTransition</a></code>
                            属性。</p>
                    <li data-md>
                        <p>这个 <code
                                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition" id="ref-for-viewtransition⑤">ViewTransition</a></code>
                            的
                            <code><code class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-view-transitions-1/#dom-viewtransition-updatecallbackdone" id="ref-for-dom-viewtransition-updatecallbackdone">updateCallbackDone</a></code></code>
                            承诺已经解决，
                            其<a data-link-type="dfn"
                                href="https://www.w3.org/TR/css-view-transitions-1/#captured-element"
                                id="ref-for-captured-element">捕获的元素</a>从旧的 <code
                                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document⑧">Document</a></code>
                            中填充。
                        </p>
                    <li data-md>
                        <p>这是作者自定义转换的另一个机会，例如通过改变其
                            <code
                                class="idl"><a data-link-type="idl" href="#dom-viewtransition-types" id="ref-for-dom-viewtransition-types③">types</a></code>，
                            或完全<code
                                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-view-transitions-1/#dom-viewtransition-skiptransition" id="ref-for-dom-viewtransition-skiptransition①">skip</a></code>
                            它。
                        </p>
                    <li data-md>
                        <p>新文档的状态被<a data-link-type="dfn"
                                href="https://www.w3.org/TR/css-view-transitions-1/#capture-the-new-state"
                                id="ref-for-capture-the-new-state">捕获</a>作为转换的"新"状态。
                        </p>
                    <li data-md>
                        <p>从这一点开始，转换以类似于同文档转换的方式继续，按照<a data-link-type="dfn"
                                href="https://www.w3.org/TR/css-view-transitions-1/#activate-view-transition"
                                id="ref-for-activate-view-transition">激活视图转换</a>。</p>
                </ol>
        </ol>
        <h3 class="heading settled" data-level="2.2" id="cross-doc-examples"><span class="secno">2.2. </span><span
                class="content">示例</span><a class="self-link" href="#cross-doc-examples"></a></h3>
        <div class="example" id="example-5cf7b384">
            <a class="self-link" href="#example-5cf7b384"></a> 要生成与第一个示例中相同的交叉淡入淡出
            <a href="https://www.w3.org/TR/css-view-transitions-1/#examples"><cite>CSS View Transitions 1</cite> § 1.6
                示例</a>，
            但跨文档进行，我们不需要 JavaScript。
            <p>相反，我们在页面1和页面2中都选择在导航时触发视图转换：</p>
            <pre class="language-css highlight">// 在两个文档中：
<c- n>@view-transition</c-> <c- p>{</c->
    <c- k>navigation</c-><c- p>:</c-> auto<c- p>;</c->
<c- p>}</c->
</pre>
            <p>从页面1到页面2或从页面2的链接将生成示例1的交叉淡入淡出转换。
                要实现示例2、3和4的效果，只需将伪元素的 CSS 放在两个文档中。</p>
        </div>
        <div class="example" id="example-e5e29ee3">
            <a class="self-link" href="#example-e5e29ee3"></a> 注意 <a class="css" data-link-type="maybe"
                href="#at-view-transition-rule" id="ref-for-at-view-transition-rule②">@view-transition</a> 规则可以
            与媒体查询一起使用。
            例如，这将只在屏幕宽度大于以下值时执行转换：
            <pre class="language-css highlight"><c- n>@view-transition</c-> <c- p>{</c->
    <c- k>navigation</c-><c- p>:</c-> auto<c- p>;</c->
<c- p>}</c->

<c- n>@media</c-> <c- p>(</c->max-width: <c- m>600</c-><c- k>px</c-><c- p>)</c-> <c- p>{</c->
    <c- k>navigation</c-><c- p>:</c-> none<c- p>;</c->
<c- p>}</c->
</pre>
        </div>
        <div class="example" id="example-201df5f9">
            <a class="self-link" href="#example-201df5f9"></a> 要实现<a
                href="https://www.w3.org/TR/css-view-transitions-1/#examples">示例5</a>中的效果，我们必须做几件事：
            <ul>
                <li data-md>
                    <p>在两个页面中都选择导航触发的视图转换。</p>
                <li data-md>
                    <p>将点击位置传递给新文档，例如通过 <code
                            class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/webstorage.html#dom-sessionstorage" id="ref-for-dom-sessionstorage">sessionStorage</a></code>。
                    </p>
                <li data-md>
                    <p>使用 <code
                            class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/indices.html#event-pagereveal" id="ref-for-event-pagereveal②">pagereveal</a></code>
                        事件拦截新文档中的 <code
                            class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition" id="ref-for-viewtransition⑥">ViewTransition</a></code>
                        对象。</p>
            </ul>
            <p>在两个页面中：</p>
            <pre class="language-css highlight"><c- n>@view-transition</c-> <c- p>{</c->
    <c- k>navigation</c-><c- p>:</c-> auto<c- p>;</c->
<c- p>}</c->
</pre>
            在旧页面中：
            <pre class="language-js highlight">addEventListener<c- p>(</c-><c- t>'click'</c-><c- p>,</c-> event <c- p>=></c-> <c- p>{</c->
    sessionStorage<c- p>.</c->setItem<c- p>(</c-><c- u>"lastClickX"</c-><c- p>,</c-> event<c- p>.</c->clientX<c- p>);</c->
    sessionStorage<c- p>.</c->setItem<c- p>(</c-><c- u>"lastClickY"</c-><c- p>,</c-> event<c- p>.</c->clientY<c- p>);</c->
<c- p>});</c->
</pre>
            <p>在新页面中：</p>
            <pre class="language-js highlight"><c- c1>// 这将在初始加载和从 BFCache 重新激活时运行。</c->
addEventListener<c- p>(</c-><c- u>"pagereveal"</c-><c- p>,</c-> <c- k>async</c-> event <c- p>=></c-> <c- p>{</c->
    <c- k>if</c-> <c- p>(</c-><c- o>!</c->event<c- p>.</c->viewTransition<c- p>)</c->
        <c- k>return</c-><c- p>;</c->

    <c- a>const</c-> x <c- o>=</c-> sessionStorage<c- p>.</c->getItem<c- p>(</c-><c- u>"lastClickX"</c-><c- p>)</c-> <c- o>??</c-> innerWidth <c- o>/</c-> <c- mf>2</c-><c- p>;</c->
    <c- a>const</c-> y <c- o>=</c-> sessionStorage<c- p>.</c->getItem<c- p>(</c-><c- u>"lastClickY"</c-><c- p>)</c-> <c- o>??</c-> innerHeight <c- o>/</c-> <c- mf>2</c-><c- p>;</c->

    <c- a>const</c-> endRadius <c- o>=</c-> Math<c- p>.</c->hypot<c- p>(</c->
        Math<c- p>.</c->max<c- p>(</c->x<c- p>,</c-> innerWidth <c- o>-</c-> x<c- p>),</c->
        Math<c- p>.</c->max<c- p>(</c->y<c- p>,</c-> innerHeight <c- o>-</c-> y<c- p>)</c->
    <c- p>);</c->

    <c- k>await</c-> event<c- p>.</c->viewTransition<c- p>.</c->ready<c- p>;</c->

    <c- c1>// 为新文档的视图添加动画</c->
    document<c- p>.</c->documentElement<c- p>.</c->animate<c- p>(</c->
        <c- p>{</c->
            clipPath<c- o>:</c-> <c- p>[</c->
                <c- o>&lt;</c->code data<c- o>-</c->opaque bs<c- o>-</c->autolink<c- o>-</c->syntax<c- o>=</c-><c- t>'`circle(0 at ${x}px ${y}px)`'</c-><c- o>></c->circle<c- p>(</c-><c- mf>0</c-> at $<c- p>{</c->x<c- p>}</c->px $<c- p>{</c->y<c- p>}</c->px<c- p>)</c-><c- o>&lt;</c->/code>,
                <c- o>&lt;</c->code data<c- o>-</c->opaque bs<c- o>-</c->autolink<c- o>-</c->syntax<c- o>=</c-><c- t>'`circle(${endRadius}px at ${x}px ${y}px)`'</c-><c- o>></c->circle<c- p>(</c->$<c- p>{</c->endRadius<c- p>}</c->px at $<c- p>{</c->x<c- p>}</c->px $<c- p>{</c->y<c- p>}</c->px<c- p>)</c-><c- o>&lt;</c->/code>,
            <c- p>],</c->
        <c- p>},</c->
        <c- p>{</c->
            duration<c- o>:</c-> <c- mf>500</c-><c- p>,</c->
            easing<c- o>:</c-> <c- t>'ease-in'</c-><c- p>,</c->
            pseudoElement<c- o>:</c-> <c- t>'::view-transition-new(root)'</c->
        <c- p>}</c->
    <c- p>);</c->
<c- p>})</c->
</pre>
        </div>
        <div class="example" id="example-a7331208">
            <a class="self-link" href="#example-a7331208"></a> 要根据导航的属性以及某些图像是否已加载来选择要捕获哪些元素：
            <p>在旧页面中：</p>
            <pre class="language-js highlight">window<c- p>.</c->addEventListener<c- p>(</c-><c- u>"pageswap"</c-><c- p>,</c-> event <c- p>=></c-> <c- p>{</c->
    <c- c1>// 例如，页面被隐藏，或导航是跨文档的。</c->
    <c- k>if</c-> <c- p>(</c-><c- o>!</c->event<c- p>.</c->viewTransition<c- p>)</c->
        <c- k>return</c-><c- p>;</c->

    <c- c1>// 如果您不希望前进/后退导航使用视图转换...</c->
    <c- k>if</c-> <c- p>(</c->event<c- p>.</c->activation<c- p>.</c->navigationType <c- o>===</c-> <c- u>"traverse"</c-><c- p>)</c-> <c- p>{</c->
        event<c- p>.</c->viewTransition<c- p>.</c->skipTransition<c- p>();</c->
    <c- p>}</c->

    <c- a>const</c-> newURL <c- o>=</c-> <c- ow>new</c-> URL<c- p>(</c->event<c- p>.</c->activation<c- p>.</c->entry<c- p>.</c->url<c- p>);</c->
    <c- k>if</c-> <c- p>(</c->newURL<c- p>.</c->pathname <c- o>===</c-> <c- u>"/details"</c-> <c- o>&amp;&amp;</c-> thumbnail<c- p>.</c->complete<c- p>)</c-> <c- p>{</c->
        thumbnail<c- p>.</c->classList<c- p>.</c->add<c- p>(</c-><c- u>"transition-to-hero"</c-><c- p>);</c->

        <c- c1>// 如果页面从 BFCache 恢复，这将清理状态。</c->
        event<c- p>.</c->viewTransition<c- p>.</c->finished<c- p>.</c->then<c- p>(()</c-> <c- p>=></c-> <c- p>{</c->
            thumbnail<c- p>.</c->classList<c- p>.</c->remove<c- p>(</c-><c- u>"transition-to-hero"</c-><c- p>);</c->
        <c- p>});</c->
    <c- p>}</c->

<c- p>});</c->
</pre>
            <p>在新页面中：</p>
            <pre class="language-js highlight">window<c- p>.</c->addEventListener<c- p>(</c-><c- u>"pagereveal"</c-><c- p>,</c-> event <c- p>=></c-> <c- p>{</c->
    <c- c1>// 例如，页面被隐藏，导航是跨文档的，或转换在旧文档中被跳过。</c->
    <c- k>if</c-> <c- p>(</c-><c- o>!</c->event<c- p>.</c->viewTransition<c- p>)</c->
        <c- k>return</c-><c- p>;</c->

    <c- a>const</c-> oldURL <c- o>=</c-> <c- ow>new</c-> URL<c- p>(</c->navigation<c- p>.</c->activation<c- p>.</c-><c- kr>from</c-><c- p>.</c->url<c- p>);</c->
    <c- k>if</c-> <c- p>(</c->newURL<c- p>.</c->pathname <c- o>===</c-> <c- u>"/list"</c-><c- p>)</c-> <c- p>{</c->
        event<c- p>.</c->viewTransition<c- p>.</c->types<c- p>.</c->add<c- p>(</c-><c- u>"coming-from-list"</c-><c- p>);</c->

        <c- c1>// 这将显示缩略图直到视图转换完成。</c->
        <c- k>if</c-> <c- p>(</c-><c- o>!</c->hero<c- p>.</c->complete<c- p>)</c-> <c- p>{</c->
            setToThumbnail<c- p>(</c->hero<c- p>);</c->
            event<c- p>.</c->viewTransition<c- p>.</c->finished<c- p>.</c->then<c- p>(()</c-> <c- p>=></c-> <c- p>{</c->
                setToFullResolution<c- p>(</c->hero<c- p>);</c->
            <c- p>})</c->
        <c- p>}</c->
    <c- p>}</c->
<c- p>});</c->
</pre>
        </div>
        <h3 class="heading settled" data-level="2.3" id="cross-doc-opt-in"><span class="secno">2.3. </span><span
                class="content">选择跨文档视图转换</span><a class="self-link" href="#cross-doc-opt-in"></a></h3>
        <h4 class="heading settled" data-level="2.3.1" id="view-transition-rule"><span class="secno">2.3.1. </span><span
                class="content"><dfn class="dfn-paneled css" data-dfn-type="at-rule" data-export
                    id="at-view-transition-rule"><a class="css" data-link-type="maybe" href="#at-view-transition-rule"
                        id="ref-for-at-view-transition-rule③">@view-transition</a></dfn> 规则</span><a class="self-link"
                href="#view-transition-rule"></a></h4>
        <p><a class="css" data-link-type="maybe" href="#at-view-transition-rule"
                id="ref-for-at-view-transition-rule④">@view-transition</a> 规则被文档用来指示跨文档导航
            应该设置并激活一个 <code
                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition" id="ref-for-viewtransition⑦">ViewTransition</a></code>。
        </p>
        <p><a class="css" data-link-type="maybe" href="#at-view-transition-rule"
                id="ref-for-at-view-transition-rule⑤">@view-transition</a> 规则具有以下语法：</p>
        <pre class="prod">@view-transition {
    <a class="production" data-link-type="type" href="https://www.w3.org/TR/css-syntax-3/#typedef-declaration-list" id="ref-for-typedef-declaration-list">&lt;declaration-list></a>
}
</pre>
        <p><a class="css" data-link-type="maybe" href="#at-view-transition-rule"
                id="ref-for-at-view-transition-rule⑥">@view-transition</a> 规则接受 <a data-link-type="dfn"
                href="#view-transition-navigation" id="ref-for-view-transition-navigation">navigation</a> 和 <a
                data-link-type="dfn" href="#view-transition-types" id="ref-for-view-transition-types">types</a>
            描述符。</p>
        <p class="note" role="note"><span class="marker">注意：</span>按照默认行为，<a class="css" data-link-type="maybe"
                href="#at-view-transition-rule" id="ref-for-at-view-transition-rule⑦">@view-transition</a> 规则可以嵌套在<a
                data-link-type="dfn" href="https://www.w3.org/TR/css-conditional-3/#conditional-group-rule"
                id="ref-for-conditional-group-rule">条件组规则</a>内，如 <a class="css" data-link-type="maybe"
                href="https://www.w3.org/TR/css-conditional-3/#at-ruledef-media"
                id="ref-for-at-ruledef-media">@media</a> 或 <a class="css" data-link-type="maybe"
                href="https://www.w3.org/TR/css-conditional-3/#at-ruledef-supports"
                id="ref-for-at-ruledef-supports">@supports</a>。</p>
        <p>当 <code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document⑨">Document</a></code>
            <var>document</var> 的 <a class="css" data-link-type="maybe" href="#at-view-transition-rule"
                id="ref-for-at-view-transition-rule⑧">@view-transition</a> 规则发生变化时，用户代理必须<a data-link-type="dfn"
                href="#update-the-opt-in-state-for-outbound-transitions"
                id="ref-for-update-the-opt-in-state-for-outbound-transitions">更新出站转换的选择状态</a>给定 <var>document</var>。
        </p>
        <p class="note" role="note"><span class="marker">注意：</span>这需要在布尔值中缓存，因为在导航时需要<a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel"
                id="ref-for-in-parallel">并行</a>读取结果。</p>
        <h4 class="heading settled" data-level="2.3.2" id="view-transition-navigation-descriptor"><span
                class="secno">2.3.2. </span><span class="content"><a data-link-type="dfn"
                    href="#view-transition-navigation" id="ref-for-view-transition-navigation①">navigation</a>
                描述符</span><a class="self-link" href="#view-transition-navigation-descriptor"></a></h4>
        <table class="def descdef">
            <tbody>
                <tr>
                    <th>名称：
                    <td><dfn class="css" data-dfn-for="@view-transition" data-dfn-type="descriptor" data-export
                            id="descdef-view-transition-navigation">navigation<a class="self-link"
                                href="#descdef-view-transition-navigation"></a></dfn>
                <tr>
                    <th>适用于：
                    <td><a class="css" data-link-type="at-rule" href="#at-view-transition-rule"
                            id="ref-for-at-view-transition-rule⑨">@view-transition</a>
                <tr>
                    <th>值：
                    <td class="prod">auto <a data-link-type="grammar"
                            href="https://www.w3.org/TR/css-values-4/#comb-one" id="ref-for-comb-one">|</a> none
                <tr>
                    <th>初始值：
                    <td>none
        </table>
        <p>'<dfn class="dfn-paneled" data-dfn-for="@view-transition" data-dfn-type="dfn" data-noexport
                id="view-transition-navigation">navigation</dfn>' 描述符选择在执行某种类型的导航时自动启动视图转换。
            必须在新旧文档中都存在。</p>
        <dl>
            <dt data-md><dfn class="dfn-paneled css" data-dfn-for="@view-transition/navigation" data-dfn-type="value"
                    data-export id="valdef-view-transition-navigation-none">none</dfn>
            <dd data-md>
                <p>不会有转换。</p>
            <dt data-md><dfn class="dfn-paneled css" data-dfn-for="@view-transition/navigation" data-dfn-type="value"
                    data-export id="valdef-view-transition-navigation-auto">auto</dfn>
            <dd data-md>
                <p>如果导航是同源的，没有跨源重定向，并且其 <code
                        class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#navigationtype" id="ref-for-navigationtype">NavigationType</a></code>
                    是以下之一，转换将被启用</p>
                <ul>
                    <li data-md>
                        <p><code
                                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-navigationtype-traverse" id="ref-for-dom-navigationtype-traverse①">traverse</a></code>，或
                        </p>
                    <li data-md>
                        <p><code
                                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-navigationtype-push" id="ref-for-dom-navigationtype-push">push</a></code>
                            或 <code
                                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-navigationtype-replace" id="ref-for-dom-navigationtype-replace">replace</a></code>，
                            其<a
                                href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#user-navigation-involvement">用户导航参与</a>不等于
                            <code>"browser UI"</code>。
                        </p>
                </ul>
                <p class="note" role="note"><span class="marker">注意：</span>被 <a class="css" data-link-type="maybe"
                        href="#valdef-view-transition-navigation-auto"
                        id="ref-for-valdef-view-transition-navigation-auto">auto</a> 排除的导航例如，通过
                    URL 地址栏导航或点击书签，以及任何形式的用户或脚本发起的
                    <code
                        class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-navigationtype-reload" id="ref-for-dom-navigationtype-reload">reload</a></code>。
                </p>
        </dl>
        <p>此 at-rule 符合 CSS 的向前兼容解析要求；
            不理解这些规则的符合标准的解析器将忽略它们而不出错。
            任何给定用户代理不识别或未实现的描述符，
            或其值不匹配此处或本规范未来版本中给出的语法的描述符，
            必须完全忽略；
            它们不会使 <a class="css" data-link-type="maybe" href="#at-view-transition-rule"
                id="ref-for-at-view-transition-rule①⓪">@view-transition</a> 规则无效。</p>
        <h4 class="heading settled" data-level="2.3.3" id="cssom"><span class="secno">2.3.3. </span><span
                class="content">使用 CSSOM 访问 <a class="css" data-link-type="maybe" href="#at-view-transition-rule"
                    id="ref-for-at-view-transition-rule①①">@view-transition</a> 规则</span><a class="self-link"
                href="#cssom"></a></h4>
        <p><code
                class="idl"><a data-link-type="idl" href="#cssviewtransitionrule" id="ref-for-cssviewtransitionrule">CSSViewTransitionRule</a></code>
            表示一个 <a class="css" data-link-type="maybe" href="#at-view-transition-rule"
                id="ref-for-at-view-transition-rule①②">@view-transition</a> 规则。</p>
        <pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="cssviewtransitionrule"><code><c- g>CSSViewTransitionRule</c-></code></dfn> : <a data-link-type="idl-name" href="https://www.w3.org/TR/cssom-1/#cssrule" id="ref-for-cssrule"><c- n>CSSRule</c-></a> {
    <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://www.w3.org/TR/cssom-1/#cssomstring" id="ref-for-cssomstring"><c- n>CSSOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="CSSViewTransitionRule" data-dfn-type="attribute" data-export data-readonly data-type="CSSOMString" id="dom-cssviewtransitionrule-navigation"><code><c- g>navigation</c-></code></dfn>;
    [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject" id="ref-for-SameObject"><c- g>SameObject</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-frozen-array" id="ref-for-idl-frozen-array"><c- b>FrozenArray</c-></a>&lt;<a data-link-type="idl-name" href="https://www.w3.org/TR/cssom-1/#cssomstring" id="ref-for-cssomstring①"><c- n>CSSOMString</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="CSSViewTransitionRule" data-dfn-type="attribute" data-export data-readonly data-type="FrozenArray<CSSOMString>" id="dom-cssviewtransitionrule-types"><code><c- g>types</c-></code></dfn>;
};
</pre>
        <p><code
                class="idl"><a data-link-type="idl" href="#dom-cssviewtransitionrule-navigation" id="ref-for-dom-cssviewtransitionrule-navigation">navigation</a></code>
            getter 步骤是如果存在相应的 <span class="css">navigation</span> 描述符则返回其值，否则返回空字符串。</p>
        <p><code
                class="idl"><a data-link-type="idl" href="#dom-cssviewtransitionrule-types" id="ref-for-dom-cssviewtransitionrule-types">types</a></code>
            getter 步骤是如果存在相应的 <span class="css">types</span> 描述符则返回其值，否则返回空<a data-link-type="dfn"
                href="https://infra.spec.whatwg.org/#list" id="ref-for-list">列表</a>。</p>
        <h2 class="heading settled" data-level="3" id="selective-vt"><span class="secno">3. </span><span
                class="content">选择性视图转换</span><a class="self-link" href="#selective-vt"></a></h2>
        <h3 class="heading settled" data-level="3.1" id="selective-vt-overview"><span class="secno">3.1. </span><span
                class="content">概述</span><a class="self-link" href="#selective-vt-overview"></a></h3>
        <p><em>本节为非规范性内容。</em></p>
        <p>对于简单页面和单一视图转换，在参与元素上设置 <span class="css">view-transition-name</span>
            属性应该就足够了。
            然而，在更复杂的场景中，作者可能希望声明各种视图转换，并只同时运行其中一个。
            例如，在点击导航栏时滑动整个页面，在拖拽列表项时对列表进行排序。</p>
        <p>为了确保每个视图转换只捕获其所需的内容，并且不同的转换不会相互干扰，
            本规范引入了<a data-link-type="dfn" href="#viewtransition-active-types"
                id="ref-for-viewtransition-active-types">活动类型</a>的概念，以及 <a class="css" data-link-type="maybe"
                href="#active-view-transition-pseudo"
                id="ref-for-active-view-transition-pseudo">:active-view-transition</a> 和 <a class="css"
                data-link-type="maybe" href="#active-view-transition-type-pseudo"
                id="ref-for-active-view-transition-type-pseudo">:active-view-transition-type()</a> 伪类。</p>
        <p><a class="css" data-link-type="maybe" href="#active-view-transition-pseudo"
                id="ref-for-active-view-transition-pseudo①">:active-view-transition</a> 在<a data-link-type="dfn"
                href="https://dom.spec.whatwg.org/#document-element" id="ref-for-document-element">文档元素</a>具有<a
                data-link-type="dfn"
                href="https://www.w3.org/TR/css-view-transitions-1/#document-active-view-transition"
                id="ref-for-document-active-view-transition①">活动视图转换</a>时匹配，而 <a class="css" data-link-type="maybe"
                href="#active-view-transition-type-pseudo"
                id="ref-for-active-view-transition-type-pseudo①">:active-view-transition-type()</a> 在选择器中的类型与<span
                id="ref-for-document-element①">文档元素</span>的<span
                id="ref-for-document-active-view-transition②">活动视图转换</span>的<a data-link-type="dfn"
                href="#viewtransition-active-types" id="ref-for-viewtransition-active-types①">活动类型</a>匹配时匹配。</p>
        <p><code
                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition" id="ref-for-viewtransition⑧">ViewTransition</a></code>的
            <a data-link-type="dfn" href="#viewtransition-active-types" id="ref-for-viewtransition-active-types②">活动
                类型</a>通过以下方式之一填充：
        </p>
        <ol>
            <li data-md>
                <p>作为 <code
                        class="idl"><a data-link-type="idl" href="#dom-document-startviewtransition" id="ref-for-dom-document-startviewtransition③">startViewTransition(callbackOptions)</a></code>
                    的参数传递</p>
            <li data-md>
                <p>随时使用转换的 <code
                        class="idl"><a data-link-type="idl" href="#dom-viewtransition-types" id="ref-for-dom-viewtransition-types④">types</a></code>
                    进行修改</p>
            <li data-md>
                <p>使用 <a data-link-type="dfn" href="#view-transition-types"
                        id="ref-for-view-transition-types①">types</a> 描述符为跨文档视图转换声明。</p>
        </ol>
        <h3 class="heading settled" data-level="3.2" id="active-view-transition-pseudo-examples"><span
                class="secno">3.2. </span><span class="content">示例</span><a class="self-link"
                href="#active-view-transition-pseudo-examples"></a></h3>
        <div class="example" id="example-fcb7f482">
            <a class="self-link" href="#example-fcb7f482"></a> 例如，开发者可以通过以下方式启动转换：
            <pre class="language-js highlight">document<c- p>.</c->startViewTransition<c- p>({</c->update<c- o>:</c-> updateTheDOMSomehow<c- p>,</c-> types<c- o>:</c-> <c- p>[</c-><c- u>"slide-in"</c-><c- p>,</c-> <c- u>"reverse"</c-><c- p>]});</c->
</pre>
            <p>这将激活以下任何选择器：</p>
            <pre class="language-css highlight">:root<c- nf>:active-view-transition-type</c-><c- p>(</c->slide-in<c- p>)</c-> <c- p>{}</c->
:root<c- nf>:active-view-transition-type</c-><c- p>(</c->reverse<c- p>)</c-> <c- p>{}</c->
:root<c- nf>:active-view-transition-type</c-><c- p>(</c->slide-in<c- p>,</c-> reverse<c- p>)</c-> <c- p>{}</c->
:root<c- nf>:active-view-transition-type</c-><c- p>(</c->slide-in<c- p>,</c-> something-else<c- p>)</c-> <c- p>{}</c->
:root:active-view-transition <c- p>{}</c->
</pre>
            <p>而不提供转换类型启动转换时，只会激活
                ':active-view-transition'：</p>
            <pre class="language-js highlight">document<c- p>.</c->startViewTransition<c- p>(</c->updateTheDOMSomehow<c- p>);</c->
<c- c1>// 或</c->
document<c- p>.</c->startViewTransition<c- p>({</c->update<c- o>:</c-> updateTheDOMSomehow<c- p>});</c->
</pre>
            <pre class="language-css highlight"><c- c>/* 这将被激活 */</c->
:root <c- p>{</c-> <c- p>}</c->
:root:active-view-transition <c- p>{}</c->

<c- c>/* 这将不会被激活 */</c->
:root<c- nf>:active-view-transition-type</c-><c- p>(</c->slide-in<c- p>)</c-> <c- p>{}</c->
:root<c- nf>:active-view-transition-type</c-><c- p>(</c->any-type-at-all-except-star<c- p>)</c-> <c- p>{}</c->
</pre>
        </div>
        <h3 class="heading settled" data-level="3.3" id="pseudo-classes-for-selective-vt"><span class="secno">3.3.
            </span><span class="content">基于活动视图转换的选择</span><a class="self-link"
                href="#pseudo-classes-for-selective-vt"></a></h3>
        <h4 class="heading settled" data-level="3.3.1" id="the-active-view-transition-pseudo"><span class="secno">3.3.1.
            </span><span class="content"><a class="css" data-link-type="maybe" href="#active-view-transition-pseudo"
                    id="ref-for-active-view-transition-pseudo②">:active-view-transition</a> 伪类</span><a
                class="self-link" href="#the-active-view-transition-pseudo"></a></h4>
        <p><dfn class="dfn-paneled css" data-dfn-type="selector" data-export
                id="active-view-transition-pseudo">:active-view-transition</dfn> 伪类应用于文档的根元素，如果它具有<a
                data-link-type="dfn"
                href="https://www.w3.org/TR/css-view-transitions-1/#document-active-view-transition"
                id="ref-for-document-active-view-transition③">活动视图转换</a>。</p>
        <p><a class="css" data-link-type="maybe" href="#active-view-transition-pseudo"
                id="ref-for-active-view-transition-pseudo③">:active-view-transition</a> 的<a data-link-type="dfn"
                href="https://www.w3.org/TR/selectors-4/#specificity" id="ref-for-specificity">特异性</a>是一个伪类选择器。
        </p>
        <p><a class="css" data-link-type="maybe" href="#active-view-transition-pseudo"
                id="ref-for-active-view-transition-pseudo④">:active-view-transition</a> 伪类在其<a data-link-type="dfn"
                href="https://dom.spec.whatwg.org/#concept-node-document" id="ref-for-concept-node-document">节点
                文档</a>具有非空<a data-link-type="dfn"
                href="https://www.w3.org/TR/css-view-transitions-1/#document-active-view-transition"
                id="ref-for-document-active-view-transition④">活动视图转换</a>时匹配<a data-link-type="dfn"
                href="https://dom.spec.whatwg.org/#document-element" id="ref-for-document-element②">文档元素</a>。</p>
        <h4 class="heading settled" data-level="3.3.2" id="the-active-view-transition-type-pseudo"><span
                class="secno">3.3.2. </span><span class="content"><a class="css" data-link-type="maybe"
                    href="#active-view-transition-type-pseudo"
                    id="ref-for-active-view-transition-type-pseudo②">:active-view-transition-type()</a>
                伪类</span><a class="self-link" href="#the-active-view-transition-type-pseudo"></a></h4>
        <p><dfn class="dfn-paneled css" data-dfn-type="selector" data-export
                id="active-view-transition-type-pseudo">:active-view-transition-type()</dfn> 伪类应用于文档的根元素，如果它具有匹配的<a
                data-link-type="dfn"
                href="https://www.w3.org/TR/css-view-transitions-1/#document-active-view-transition"
                id="ref-for-document-active-view-transition⑤">活动视图转换</a>。
            它具有以下语法定义：</p>
        <pre class="prod">:active-view-transition-type(<a class="production" data-link-type="type" href="https://www.w3.org/TR/css-values-4/#identifier-value" id="ref-for-identifier-value">&lt;custom-ident></a><a data-link-type="grammar" href="https://www.w3.org/TR/css-values-4/#mult-comma" id="ref-for-mult-comma">#</a>)
</pre>
        <p><a class="css" data-link-type="maybe" href="#active-view-transition-type-pseudo"
                id="ref-for-active-view-transition-type-pseudo③">:active-view-transition-type()</a> 的<a
                data-link-type="dfn" href="https://www.w3.org/TR/selectors-4/#specificity"
                id="ref-for-specificity①">特异性</a>是一个伪类选择器。</p>
        <p><a class="css" data-link-type="maybe" href="#active-view-transition-type-pseudo"
                id="ref-for-active-view-transition-type-pseudo④">:active-view-transition-type()</a> 伪类在其<a
                data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document"
                id="ref-for-concept-node-document①">节点
                文档</a>具有非空<a data-link-type="dfn"
                href="https://www.w3.org/TR/css-view-transitions-1/#document-active-view-transition"
                id="ref-for-document-active-view-transition⑥">活动视图转换</a>，
            且其<a data-link-type="dfn" href="#viewtransition-active-types"
                id="ref-for-viewtransition-active-types③">活动类型</a> <a data-link-type="dfn"
                href="https://infra.spec.whatwg.org/#list-contain" id="ref-for-list-contain">包含</a>至少一个
            <a class="production css" data-link-type="type" href="https://www.w3.org/TR/css-values-4/#identifier-value"
                id="ref-for-identifier-value①">&lt;custom-ident></a> 参数时匹配<a data-link-type="dfn"
                href="https://dom.spec.whatwg.org/#document-element" id="ref-for-document-element③">文档元素</a>。
        </p>
        <h3 class="heading settled" data-level="3.4" id="view-transitions-extension-types"><span class="secno">3.4.
            </span><span class="content">更改正在进行的视图转换的类型</span><a class="self-link"
                href="#view-transitions-extension-types"></a></h3>
        <p><code
                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition" id="ref-for-viewtransition⑨">ViewTransition</a></code>
            接口扩展如下：</p>
        <pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed①"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="viewtransitiontypeset"><code><c- g>ViewTransitionTypeSet</c-></code></dfn> {
    <c- b>setlike</c->&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString"><c- b>DOMString</c-></a>>;
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed②"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition" id="ref-for-viewtransition①⓪"><c- g>ViewTransition</c-></a> {
    <c- b>attribute</c-> <a data-link-type="idl-name" href="#viewtransitiontypeset" id="ref-for-viewtransitiontypeset"><c- n>ViewTransitionTypeSet</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ViewTransition" data-dfn-type="attribute" data-export data-type="ViewTransitionTypeSet" id="dom-viewtransition-types"><code><c- g>types</c-></code></dfn>;
};
</pre>
        <p><code
                class="idl"><a data-link-type="idl" href="#viewtransitiontypeset" id="ref-for-viewtransitiontypeset①">ViewTransitionTypeSet</a></code>
            对象表示一个字符串<a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set"
                id="ref-for-ordered-set">集合</a>，没有特殊语义。</p>
        <p class="note" role="note"><span class="marker">注意：</span><code
                class="idl"><a data-link-type="idl" href="#viewtransitiontypeset" id="ref-for-viewtransitiontypeset②">ViewTransitionTypeSet</a></code>
            可以包含对 <span class="css">:active-view-transition-type</span> 无效的字符串，例如
            不是 <a class="production css" data-link-type="type"
                href="https://www.w3.org/TR/css-values-4/#identifier-value"
                id="ref-for-identifier-value②">&lt;custom-ident></a> 的字符串。</p>
        <p><code
                class="idl"><a data-link-type="idl" href="#dom-viewtransition-types" id="ref-for-dom-viewtransition-types⑤">types</a></code>
            <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#getter-steps" id="ref-for-getter-steps">getter
                步骤</a>是返回 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this">this</a>
            的 <a data-link-type="dfn" href="#viewtransition-active-types"
                id="ref-for-viewtransition-active-types④">活动类型</a>。
        </p>
        <h3 class="heading settled" data-level="3.5" id="types-cross-doc"><span class="secno">3.5. </span><span
                class="content">为跨文档视图转换激活转换类型</span><a class="self-link" href="#types-cross-doc"></a></h3>
        <p><a data-link-type="dfn" href="#view-transition-types" id="ref-for-view-transition-types②">types</a>
            描述符</p>
        <table class="def descdef">
            <tbody>
                <tr>
                    <th>名称：
                    <td><dfn class="css" data-dfn-for="@view-transition" data-dfn-type="descriptor" data-export
                            id="descdef-view-transition-types">types<a class="self-link"
                                href="#descdef-view-transition-types"></a></dfn>
                <tr>
                    <th>适用于：
                    <td><a class="css" data-link-type="at-rule" href="#at-view-transition-rule"
                            id="ref-for-at-view-transition-rule①③">@view-transition</a>
                <tr>
                    <th>值：
                    <td class="prod">none <a data-link-type="grammar"
                            href="https://www.w3.org/TR/css-values-4/#comb-one" id="ref-for-comb-one①">|</a> <a
                            class="production css" data-link-type="type"
                            href="https://www.w3.org/TR/css-values-4/#identifier-value"
                            id="ref-for-identifier-value③">&lt;custom-ident></a><a data-link-type="grammar"
                            href="https://www.w3.org/TR/css-values-4/#mult-one-plus" id="ref-for-mult-one-plus">+</a>
                <tr>
                    <th>初始值：
                    <td>none
        </table>
        <p>'<dfn class="dfn-paneled" data-dfn-for="@view-transition" data-dfn-type="dfn" data-noexport
                id="view-transition-types">types</dfn>' 描述符为转换设置<a data-link-type="dfn"
                href="#viewtransition-active-types" id="ref-for-viewtransition-active-types⑤">活动类型</a>，
            在捕获或执行转换时，等同于使用该 <code
                class="idl"><a data-link-type="idl" href="#dom-startviewtransitionoptions-types" id="ref-for-dom-startviewtransitionoptions-types">types</a></code>
            调用 <code
                class="idl"><a data-link-type="idl" href="#dom-document-startviewtransition" id="ref-for-dom-document-startviewtransition④">startViewTransition(callbackOptions)</a></code>。
        </p>
        <p class="note" role="note"><span class="marker">注意：</span><a data-link-type="dfn" href="#view-transition-types"
                id="ref-for-view-transition-types③">types</a> 描述符仅应用于
            定义它的 <code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document①⓪">Document</a></code>。
            作者有责任在两个文档中使用其选择的类型集。</p>
        <h2 class="heading settled" data-level="4" id="shared-style-with-vt-classes"><span class="secno">4. </span><span
                class="content">在视图转换伪元素之间共享样式</span><a class="self-link" href="#shared-style-with-vt-classes"></a></h2>
        <h3 class="heading settled" data-level="4.1" id="shared-style-overview"><span class="secno">4.1. </span><span
                class="content">概述</span><a class="self-link" href="#shared-style-overview"></a></h3>
        <p><em>本节为非规范性内容。</em></p>
        <p>在以类似方式设置 DOM 中多个元素的样式时，通常使用 <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-class"
                id="ref-for-concept-class">类</a> 属性：
            设置一个在多个元素之间共享的名称，然后使用 <a data-link-type="dfn" href="https://www.w3.org/TR/selectors-4/#class-selector"
                id="ref-for-class-selector">类选择器</a>
            来声明共享样式。</p>
        <p><a data-link-type="dfn"
                href="https://www.w3.org/TR/css-view-transitions-1/#named-view-transition-pseudo-elements"
                id="ref-for-named-view-transition-pseudo-elements">视图转换伪元素</a>（例如 <span
                class="css">view-transition-group()</span>）不是在 DOM 中定义的，而是通过使用 <span
                class="css">view-transition-name</span> 属性定义的。
            为此，<span class="css">view-transition-class</span> CSS 属性为视图转换提供了等同于 HTML <a data-link-type="dfn"
                href="https://dom.spec.whatwg.org/#concept-class" id="ref-for-concept-class①">类</a> 的功能。
            当具有 <span class="css">view-transition-name</span> 的元素也具有 <span class="css">view-transition-class</span>
            值时，该类可以通过伪元素选择，
            如 <a href="#vt-class-example">示例</a> 所示。</p>
        <h3 class="heading settled" data-level="4.2" id="vt-class-example"><span class="secno">4.2. </span><span
                class="content">示例</span><a class="self-link" href="#vt-class-example"></a></h3>
        <div class="example" id="example-f2466484">
            <a class="self-link" href="#example-f2466484"></a> 此示例创建一个转换，其中每个框都以其自己的名称参与，同时对所有框的动画应用 1 秒的持续时间：
            <pre class="language-html highlight"><c- p>&lt;</c-><c- f>div</c-> <c- e>class</c-><c- o>=</c-><c- s>"box"</c-> <c- e>id</c-><c- o>=</c-><c- s>"red-box"</c-><c- p>>&lt;/</c-><c- f>div</c-><c- p>></c->
<c- p>&lt;</c-><c- f>div</c-> <c- e>class</c-><c- o>=</c-><c- s>"box"</c-> <c- e>id</c-><c- o>=</c-><c- s>"green-box"</c-><c- p>>&lt;/</c-><c- f>div</c-><c- p>></c->
<c- p>&lt;</c-><c- f>div</c-> <c- e>class</c-><c- o>=</c-><c- s>"box"</c-> <c- e>id</c-><c- o>=</c-><c- s>"yellow-box"</c-><c- p>>&lt;/</c-><c- f>div</c-><c- p>></c->
</pre>
            <pre class="language-css highlight">div.box <c- p>{</c->
    <c- k>view-transition-class</c-><c- p>:</c-> any-box<c- p>;</c->
    <c- k>width</c-><c- p>:</c-> <c- m>100</c-><c- k>px</c-><c- p>;</c->
    <c- k>height</c-><c- p>:</c-> <c- m>100</c-><c- k>px</c-><c- p>;</c->
<c- p>}</c->
#red-box <c- p>{</c->
    <c- k>view-transition-name</c-><c- p>:</c-> red-box<c- p>;</c->
    <c- k>background</c-><c- p>:</c-> red<c- p>;</c->
<c- p>}</c->
#green-box <c- p>{</c->
    <c- k>view-transition-name</c-><c- p>:</c-> green-box<c- p>;</c->
    <c- k>background</c-><c- p>:</c-> green<c- p>;</c->
<c- p>}</c->
#yellow-box <c- p>{</c->
    <c- k>view-transition-name</c-><c- p>:</c-> yellow-box<c- p>;</c->
    <c- k>background</c-><c- p>:</c-> yellow<c- p>;</c->
<c- p>}</c->

<c- c>/* 以下样式将应用于所有框，感谢 'view-transition-class' */</c->
:<c- nf>:view-transition-group</c-><c- p>(</c->*.any-box<c- p>)</c-> <c- p>{</c->
    <c- k>animation-duration</c-><c- p>:</c-> <c- m>1</c-><c- k>s</c-><c- p>;</c->
<c- p>}</c->
</pre>
        </div>
        <h3 class="heading settled" data-level="4.3" id="view-transition-class-prop"><span class="secno">4.3.
            </span><span class="content"><a class="property css" data-link-type="property"
                    href="#propdef-view-transition-class"
                    id="ref-for-propdef-view-transition-class①">view-transition-class</a> 属性</span><a class="self-link"
                href="#view-transition-class-prop"></a></h3>
        <table class="def propdef" data-link-for-hint="view-transition-class">
            <tbody>
                <tr>
                    <th>名称：
                    <td><dfn class="dfn-paneled css" data-dfn-type="property" data-export
                            id="propdef-view-transition-class">view-transition-class</dfn>
                <tr class="value">
                    <th><a href="https://www.w3.org/TR/css-values/#value-defs">值：</a>
                    <td class="prod">none <a data-link-type="grammar"
                            href="https://www.w3.org/TR/css-values-4/#comb-one" id="ref-for-comb-one②">|</a> <a
                            class="production css" data-link-type="type"
                            href="https://www.w3.org/TR/css-values-4/#identifier-value"
                            id="ref-for-identifier-value④">&lt;custom-ident></a><a data-link-type="grammar"
                            href="https://www.w3.org/TR/css-values-4/#mult-one-plus" id="ref-for-mult-one-plus①">+</a>
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#initial-values">初始值：</a>
                    <td>none
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#applies-to">适用于：</a>
                    <td><a href="https://www.w3.org/TR/css-pseudo/#generated-content"
                            title="包括 ::before 和 ::after 伪元素。">所有元素</a>
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#inherited-property">继承性：</a>
                    <td>否
                <tr>
                    <th><a href="https://www.w3.org/TR/css-values/#percentages">百分比：</a>
                    <td>不适用
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#computed">计算值：</a>
                    <td>按指定值
                <tr>
                    <th><a href="https://www.w3.org/TR/cssom/#serializing-css-values">规范顺序：</a>
                    <td>按语法
                <tr>
                    <th><a href="https://www.w3.org/TR/web-animations/#animation-type">动画类型：</a>
                    <td>离散
        </table>
        <p><a class="property css" data-link-type="property" href="#propdef-view-transition-class"
                id="ref-for-propdef-view-transition-class②">view-transition-class</a> 可用于将相同的样式规则应用于多个
            <a data-link-type="dfn"
                href="https://www.w3.org/TR/css-view-transitions-1/#named-view-transition-pseudo-elements"
                id="ref-for-named-view-transition-pseudo-elements①">命名视图转换伪元素</a>，这些元素可能具有不同的
            <a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-view-transitions-1/#propdef-view-transition-name"
                id="ref-for-propdef-view-transition-name">view-transition-name</a>。
            虽然 <span class="property" id="ref-for-propdef-view-transition-name①">view-transition-name</span>
            用于匹配旧状态中的元素与其在新状态中对应的元素，
            <span class="property" id="ref-for-propdef-view-transition-class③">view-transition-class</span>
            仅用于使用视图转换伪元素应用样式
            （<a class="css" data-link-type="maybe"
                href="https://www.w3.org/TR/css-view-transitions-1/#selectordef-view-transition-group"
                id="ref-for-selectordef-view-transition-group">::view-transition-group()</a>、<a class="css"
                data-link-type="maybe"
                href="https://www.w3.org/TR/css-view-transitions-1/#selectordef-view-transition-image-pair"
                id="ref-for-selectordef-view-transition-image-pair">::view-transition-image-pair()</a>、<a class="css"
                data-link-type="maybe"
                href="https://www.w3.org/TR/css-view-transitions-1/#selectordef-view-transition-old"
                id="ref-for-selectordef-view-transition-old">::view-transition-old()</a>、<a class="css"
                data-link-type="maybe"
                href="https://www.w3.org/TR/css-view-transitions-1/#selectordef-view-transition-new"
                id="ref-for-selectordef-view-transition-new">::view-transition-new()</a>）。
        </p>
        <p>请注意，<a class="property css" data-link-type="property" href="#propdef-view-transition-class"
                id="ref-for-propdef-view-transition-class④">view-transition-class</a> 本身不会将元素标记为捕获，它仅用作
            为已经具有 <a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-view-transitions-1/#propdef-view-transition-name"
                id="ref-for-propdef-view-transition-name②">view-transition-name</a> 的元素设置样式的附加方式。</p>
        <dl>
            <dt data-md><dfn class="css" data-dfn-for="view-transition-class" data-dfn-type="value" data-export
                    id="valdef-view-transition-class-none">none<a class="self-link"
                        href="#valdef-view-transition-class-none"></a></dfn>
            <dd data-md>
                <p>不会有类应用于为此元素生成的 <a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-view-transitions-1/#named-view-transition-pseudo-elements"
                        id="ref-for-named-view-transition-pseudo-elements②">命名视图转换伪元素</a>。</p>
            <dt data-md><dfn class="css" data-dfn-for="view-transition-class" data-dfn-type="value" data-export
                    id="valdef-view-transition-class-custom-ident"><a class="production css" data-link-type="type"
                        href="https://www.w3.org/TR/css-values-4/#identifier-value"
                        id="ref-for-identifier-value⑤">&lt;custom-ident></a>+<a class="self-link"
                        href="#valdef-view-transition-class-custom-ident"></a></dfn>
            <dd data-md>
                <p>所有指定的 <a class="production css" data-link-type="type"
                        href="https://www.w3.org/TR/css-values-4/#identifier-value"
                        id="ref-for-identifier-value⑥">&lt;custom-ident></a> 值（除了 <span class="css">none</span>）在用于 <a
                        data-link-type="dfn"
                        href="https://www.w3.org/TR/css-view-transitions-1/#named-view-transition-pseudo-elements"
                        id="ref-for-named-view-transition-pseudo-elements③">命名视图转换伪元素</a>选择器时会被应用。
                    <span class="css">none</span> 对于 <a class="property css" data-link-type="property"
                        href="#propdef-view-transition-class"
                        id="ref-for-propdef-view-transition-class⑤">view-transition-class</a> 是无效的 <span
                        class="production" id="ref-for-identifier-value⑦">&lt;custom-ident></span>，即使与另一个 <span
                        class="production" id="ref-for-identifier-value⑧">&lt;custom-ident></span> 组合使用也是如此。
                </p>
                <p>每个"视图转换类"都是一个 <a data-link-type="dfn"
                        href="https://drafts.csswg.org/css-scoping-1/#css-tree-scoped-name"
                        id="ref-for-css-tree-scoped-name">树作用域名称</a>。</p>
                <p class="note" role="note"><span class="marker">注意：</span>如果在转换的旧状态和新状态中都为元素指定了相同的 <a
                        class="property css" data-link-type="property"
                        href="https://www.w3.org/TR/css-view-transitions-1/#propdef-view-transition-name"
                        id="ref-for-propdef-view-transition-name③">view-transition-name</a>，
                    则仅应用来自新状态的 <a class="property css" data-link-type="property" href="#propdef-view-transition-class"
                        id="ref-for-propdef-view-transition-class⑥">view-transition-class</a> 值。这也适用于跨文档视图转换：
                    来自旧文档的类仅在其对应的 <span class="property"
                        id="ref-for-propdef-view-transition-name④">view-transition-name</span> 未在新文档中指定时才会应用。</p>
        </dl>
        <h3 class="heading settled" data-level="4.4" id="pseudo-element-class-additions"><span class="secno">4.4.
            </span><span class="content">命名视图转换伪元素的扩展</span><a class="self-link"
                href="#pseudo-element-class-additions"></a></h3>
        <p><a data-link-type="dfn"
                href="https://www.w3.org/TR/css-view-transitions-1/#named-view-transition-pseudo-elements"
                id="ref-for-named-view-transition-pseudo-elements④">命名视图转换伪元素</a>（<span
                class="css">view-transition-group()</span>、<span class="css">view-transition-image-pair()</span>、<span
                class="css">view-transition-old()</span>、<span class="css">view-transition-new()</span>）
            被扩展以支持以下语法：</p>
        <pre class="prod">::view-transition-group(<a class="production" data-link-type="type" href="#typedef-pt-name-and-class-selector" id="ref-for-typedef-pt-name-and-class-selector">&lt;pt-name-and-class-selector></a>)
::view-transition-image-pair(<a class="production" data-link-type="type" href="#typedef-pt-name-and-class-selector" id="ref-for-typedef-pt-name-and-class-selector①">&lt;pt-name-and-class-selector></a>)
::view-transition-old(<a class="production" data-link-type="type" href="#typedef-pt-name-and-class-selector" id="ref-for-typedef-pt-name-and-class-selector②">&lt;pt-name-and-class-selector></a>)
::view-transition-new(<a class="production" data-link-type="type" href="#typedef-pt-name-and-class-selector" id="ref-for-typedef-pt-name-and-class-selector③">&lt;pt-name-and-class-selector></a>)
</pre>
        <p>其中 <a class="production css" data-link-type="type"
                href="https://www.w3.org/TR/css-view-transitions-1/#typedef-pt-name-selector"
                id="ref-for-typedef-pt-name-selector">&lt;pt-name-selector></a> 的工作方式如之前定义的，而 <a class="production css"
                data-link-type="type" href="#typedef-pt-name-and-class-selector"
                id="ref-for-typedef-pt-name-and-class-selector④">&lt;pt-name-and-class-selector></a> 具有以下语法定义：</p>
        <pre class="prod"><dfn class="dfn-paneled" data-dfn-type="type" data-export id="typedef-pt-name-and-class-selector">&lt;pt-name-and-class-selector></dfn> = <a class="production" data-link-type="type" href="https://www.w3.org/TR/css-view-transitions-1/#typedef-pt-name-selector" id="ref-for-typedef-pt-name-selector①">&lt;pt-name-selector></a> <a class="production" data-link-type="type" href="#typedef-pt-class-selector" id="ref-for-typedef-pt-class-selector">&lt;pt-class-selector></a><a data-link-type="grammar" href="https://www.w3.org/TR/css-values-4/#mult-opt" id="ref-for-mult-opt">?</a> <a data-link-type="grammar" href="https://www.w3.org/TR/css-values-4/#comb-one" id="ref-for-comb-one③">|</a> <a class="production" data-link-type="type" href="#typedef-pt-class-selector" id="ref-for-typedef-pt-class-selector①">&lt;pt-class-selector></a>
<dfn class="dfn-paneled" data-dfn-type="type" data-export id="typedef-pt-class-selector">&lt;pt-class-selector></dfn> = ['.' <a class="production" data-link-type="type" href="https://www.w3.org/TR/css-values-4/#identifier-value" id="ref-for-identifier-value⑨">&lt;custom-ident></a>]<a data-link-type="grammar" href="https://www.w3.org/TR/css-values-4/#mult-one-plus" id="ref-for-mult-one-plus②">+</a>
</pre>
        <p>在解释上述语法时，禁止使用空白：</p>
        <ul>
            <li data-md>
                <p>在 <a class="production css" data-link-type="type"
                        href="https://www.w3.org/TR/css-view-transitions-1/#typedef-pt-name-selector"
                        id="ref-for-typedef-pt-name-selector②">&lt;pt-name-selector></a> 和 <a class="production css"
                        data-link-type="type" href="#typedef-pt-class-selector"
                        id="ref-for-typedef-pt-class-selector②">&lt;pt-class-selector></a> 之间</p>
            <li data-md>
                <p>在 <a class="production css" data-link-type="type" href="#typedef-pt-class-selector"
                        id="ref-for-typedef-pt-class-selector③">&lt;pt-class-selector></a> 的任何组件之间。</p>
        </ul>
        <p>在其 <a class="production css" data-link-type="type" href="#typedef-pt-class-selector"
                id="ref-for-typedef-pt-class-selector④">&lt;pt-class-selector></a> 中具有一个或多个 <a class="production css"
                data-link-type="type" href="https://www.w3.org/TR/css-values-4/#identifier-value"
                id="ref-for-identifier-value①⓪">&lt;custom-ident></a> 值的
            <a data-link-type="dfn"
                href="https://www.w3.org/TR/css-view-transitions-1/#named-view-transition-pseudo-elements"
                id="ref-for-named-view-transition-pseudo-elements⑤">命名视图转换伪元素</a> <a data-link-type="dfn"
                href="https://www.w3.org/TR/selectors-4/#selector" id="ref-for-selector">选择器</a> 仅在伪元素的 <a
                class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-view-transitions-1/#propdef-view-transition-name"
                id="ref-for-propdef-view-transition-name⑤">view-transition-name</a> 在 <a data-link-type="dfn"
                href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition-named-elements"
                id="ref-for-viewtransition-named-elements">命名元素</a> 中的 <a data-link-type="dfn"
                href="#captured-element-class-list" id="ref-for-captured-element-class-list">类列表</a> 值 <a
                data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-contain"
                id="ref-for-list-contain①">包含</a> 所有这些值时才匹配元素。
        </p>
        <p>具有以下任一情况的 <a data-link-type="dfn"
                href="https://www.w3.org/TR/css-view-transitions-1/#named-view-transition-pseudo-elements"
                id="ref-for-named-view-transition-pseudo-elements⑥">命名视图转换伪元素</a> <a data-link-type="dfn"
                href="https://www.w3.org/TR/selectors-4/#selector" id="ref-for-selector①">选择器</a> 的 <a
                data-link-type="dfn" href="https://www.w3.org/TR/selectors-4/#specificity"
                id="ref-for-specificity②">特异性</a>：</p>
        <ul>
            <li data-md>
                <p>具有 <a class="production css" data-link-type="type"
                        href="https://www.w3.org/TR/css-values-4/#identifier-value"
                        id="ref-for-identifier-value①①">&lt;custom-ident></a> 的 <a class="production css"
                        data-link-type="type"
                        href="https://www.w3.org/TR/css-view-transitions-1/#typedef-pt-name-selector"
                        id="ref-for-typedef-pt-name-selector③">&lt;pt-name-selector></a>；或</p>
            <li data-md>
                <p>具有至少一个 <a class="production css" data-link-type="type"
                        href="https://www.w3.org/TR/css-values-4/#identifier-value"
                        id="ref-for-identifier-value①②">&lt;custom-ident></a> 的 <a class="production css"
                        data-link-type="type" href="#typedef-pt-class-selector"
                        id="ref-for-typedef-pt-class-selector⑤">&lt;pt-class-selector></a>，</p>
        </ul>
        <p>等同于 <a data-link-type="dfn" href="https://www.w3.org/TR/selectors-4/#type-selector"
                id="ref-for-type-selector">类型选择器</a>。</p>
        <p>具有 <a class="css" data-link-type="maybe" href="https://www.w3.org/TR/selectors-3/#x" id="ref-for-x">*</a>
            参数且具有空 <a class="production css" data-link-type="type" href="#typedef-pt-class-selector"
                id="ref-for-typedef-pt-class-selector⑥">&lt;pt-class-selector></a> 的 <a data-link-type="dfn"
                href="https://www.w3.org/TR/css-view-transitions-1/#named-view-transition-pseudo-elements"
                id="ref-for-named-view-transition-pseudo-elements⑦">命名视图转换伪元素</a> <a data-link-type="dfn"
                href="https://www.w3.org/TR/selectors-4/#selector" id="ref-for-selector②">选择器</a> 的 <a
                data-link-type="dfn" href="https://www.w3.org/TR/selectors-4/#specificity"
                id="ref-for-specificity③">特异性</a> 为零。</p>
        <h2 class="heading settled" data-level="5" id="extend-document-types"><span class="secno">5. </span><span
                class="content">扩展 <code
                    class="idl"><a data-link-type="idl" href="#dom-document-startviewtransition" id="ref-for-dom-document-startviewtransition⑤">document.startViewTransition()</a></code></span><a
                class="self-link" href="#extend-document-types"></a></h2>
        <pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-startviewtransitionoptions"><code><c- g>StartViewTransitionOptions</c-></code></dfn> {
    <a data-link-type="idl-name" href="https://drafts.csswg.org/css-view-transitions-1/#callbackdef-viewtransitionupdatecallback" id="ref-for-callbackdef-viewtransitionupdatecallback"><c- n>ViewTransitionUpdateCallback</c-></a>? <dfn class="dfn-paneled idl-code" data-default="null" data-dfn-for="StartViewTransitionOptions" data-dfn-type="dict-member" data-export data-type="ViewTransitionUpdateCallback? " id="dom-startviewtransitionoptions-update"><code><c- g>update</c-></code></dfn> = <c- b>null</c->;
    <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①"><c- b>DOMString</c-></a>>? <dfn class="dfn-paneled idl-code" data-default="null" data-dfn-for="StartViewTransitionOptions" data-dfn-type="dict-member" data-export data-type="sequence<DOMString>? " id="dom-startviewtransitionoptions-types"><code><c- g>types</c-></code></dfn> = <c- b>null</c->;
};

<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://dom.spec.whatwg.org/#document" id="ref-for-document①①"><c- g>Document</c-></a> {
    <a data-link-type="idl-name" href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition" id="ref-for-viewtransition①①"><c- n>ViewTransition</c-></a> <a class="idl-code" data-link-type="method" href="#dom-document-startviewtransition" id="ref-for-dom-document-startviewtransition⑥"><c- g>startViewTransition</c-></a>(<c- b>optional</c-> (<a data-link-type="idl-name" href="https://drafts.csswg.org/css-view-transitions-1/#callbackdef-viewtransitionupdatecallback" id="ref-for-callbackdef-viewtransitionupdatecallback①"><c- n>ViewTransitionUpdateCallback</c-></a> <c- b>or</c-> <a data-link-type="idl-name" href="#dictdef-startviewtransitionoptions" id="ref-for-dictdef-startviewtransitionoptions"><c- n>StartViewTransitionOptions</c-></a>) <dfn class="idl-code" data-dfn-for="Document/startViewTransition(callbackOptions), Document/startViewTransition()" data-dfn-type="argument" data-export id="dom-document-startviewtransition-callbackoptions-callbackoptions"><code><c- g>callbackOptions</c-></code><a class="self-link" href="#dom-document-startviewtransition-callbackoptions-callbackoptions"></a></dfn> = {});
};
</pre>
        <div class="algorithm" data-algorithm="start-vt-with-options">
            <dfn class="dfn-paneled idl-code" data-dfn-for="Document" data-dfn-type="method" data-export
                data-lt="startViewTransition(callbackOptions)|startViewTransition()"
                id="dom-document-startviewtransition"><code>startViewTransition(<var>callbackOptions</var>)</code></dfn>
            的<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#method-steps"
                id="ref-for-method-steps">方法步骤</a>如下：
            <ol>
                <li data-md>
                    <p>让 <var>updateCallback</var> 为 null。</p>
                <li data-md>
                    <p>如果 <var>callbackOptions</var> 是一个 <code
                            class="idl"><a data-link-type="idl" href="https://drafts.csswg.org/css-view-transitions-1/#callbackdef-viewtransitionupdatecallback" id="ref-for-callbackdef-viewtransitionupdatecallback②">ViewTransitionUpdateCallback</a></code>，
                        将 <var>updateCallback</var> 设置为 <var>callbackOptions</var>。</p>
                <li data-md>
                    <p>否则，如果 <var>callbackOptions</var> 是一个 <code
                            class="idl"><a data-link-type="idl" href="#dictdef-startviewtransitionoptions" id="ref-for-dictdef-startviewtransitionoptions①">StartViewTransitionOptions</a></code>，
                        则将 <var>updateCallback</var> 设置为 <var>callbackOptions</var> 的 <code
                            class="idl"><a data-link-type="idl" href="#dom-startviewtransitionoptions-update" id="ref-for-dom-startviewtransitionoptions-update">update</a></code>。
                    </p>
                <li data-md>
                    <p>如果 <var>this</var> 的 <a data-link-type="dfn"
                            href="https://www.w3.org/TR/css-view-transitions-1/#document-active-view-transition"
                            id="ref-for-document-active-view-transition⑦">活动视图转换</a> 不为 null 且其
                        <a data-link-type="dfn" href="#viewtransition-outbound-post-capture-steps"
                            id="ref-for-viewtransition-outbound-post-capture-steps">出站后捕获步骤</a> 不为 null，
                        则：
                    </p>
                    <ol>
                        <li data-md>
                            <p>让 <var>preSkippedTransition</var> 为 <var>this</var> 的 <a data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm"
                                    id="ref-for-concept-relevant-realm">相关域</a> 中的一个新 <code
                                    class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition" id="ref-for-viewtransition①②">ViewTransition</a></code>，
                                其 <a data-link-type="dfn"
                                    href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition-update-callback"
                                    id="ref-for-viewtransition-update-callback">更新回调</a> 为
                                <var>updateCallback</var>。
                            </p>
                            <p class="note" role="note"><span class="marker">注意：</span>此处忽略
                                <var>preSkippedTransition</var> 的 <code
                                    class="idl"><a data-link-type="idl" href="#dom-viewtransition-types" id="ref-for-dom-viewtransition-types⑥">types</a></code>，
                                因为转换从未被激活。
                            </p>
                        <li data-md>
                            <p>使用 "<code
                                    class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidstateerror" id="ref-for-invalidstateerror">InvalidStateError</a></code>"
                                <code
                                    class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException">DOMException</a></code>
                                <a data-link-type="dfn"
                                    href="https://www.w3.org/TR/css-view-transitions-1/#skip-the-view-transition"
                                    id="ref-for-skip-the-view-transition">跳过</a> <var>preSkippedTransition</var>。
                            </p>
                        <li data-md>
                            <p>返回 <var>preSkippedTransition</var>。</p>
                    </ol>
                    <p class="note" role="note"><span class="marker">注意：</span>这确保在触发 <code
                            class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/indices.html#event-pageswap" id="ref-for-event-pageswap②">pageswap</a></code>
                        后启动的同文档转换被跳过。</p>
                <li data-md>
                    <p>让 <var>viewTransition</var> 为运行 <code
                            class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-view-transitions-1/#dom-document-startviewtransition" id="ref-for-dom-document-startviewtransition⑦">startViewTransition(updateCallback)</a></code>
                        的<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#method-steps"
                            id="ref-for-method-steps①">方法
                            步骤</a>，传入 <var>updateCallback</var> 的结果。</p>
                <li data-md>
                    <p>如果 <var>callbackOptions</var> 是一个 <code
                            class="idl"><a data-link-type="idl" href="#dictdef-startviewtransitionoptions" id="ref-for-dictdef-startviewtransitionoptions②">StartViewTransitionOptions</a></code>，
                        将 <var>viewTransition</var> 的 <a data-link-type="dfn" href="#viewtransition-active-types"
                            id="ref-for-viewtransition-active-types⑥">活动类型</a> 设置为 <code
                            class="idl"><a data-link-type="idl" href="#dom-startviewtransitionoptions-types" id="ref-for-dom-startviewtransitionoptions-types①">types</a></code>
                        作为<a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set"
                            id="ref-for-ordered-set①">集合</a>的<a data-link-type="dfn"
                            href="https://infra.spec.whatwg.org/#list-clone" id="ref-for-list-clone">克隆</a>。</p>
                <li data-md>
                    <p>返回 <var>viewTransition</var>。</p>
            </ol>
        </div>
        <h2 class="heading settled" data-level="6" id="auto-vt-name"><span class="secno">6. </span><span
                class="content">自动确定 <a class="property css" data-link-type="property"
                    href="https://www.w3.org/TR/css-view-transitions-1/#propdef-view-transition-name"
                    id="ref-for-propdef-view-transition-name⑥">view-transition-name</a></span><a class="self-link"
                href="#auto-vt-name"></a></h2>
        <h3 class="heading settled" data-level="6.1" id="auto-vt-name-overview"><span class="secno">6.1. </span><span
                class="content">概述</span><a class="self-link" href="#auto-vt-name-overview"></a></h3>
        <p><em>本节为非规范性内容。</em></p>
        <p>要让元素参与视图转换，需要为其分配一个唯一的 <a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-view-transitions-1/#propdef-view-transition-name"
                id="ref-for-propdef-view-transition-name⑦">view-transition-name</a>。
            当多个元素涉及同一个视图转换时，这可能变得繁琐和冗长，特别是在许多元素都是相同元素转换的情况下，
            即元素在旧状态和新状态中具有相同的 <span class="property"
                id="ref-for-propdef-view-transition-name⑧">view-transition-name</span>。</p>
        <p>为了简化这一过程，将 <a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-view-transitions-1/#propdef-view-transition-name"
                id="ref-for-propdef-view-transition-name⑨">view-transition-name</a> 设置为 <span class="css">auto</span>
            将为元素生成一个 <span class="property"
                id="ref-for-propdef-view-transition-name①⓪">view-transition-name</span>，或者如果元素存在 <a data-link-type="dfn"
                href="https://dom.spec.whatwg.org/#concept-id" id="ref-for-concept-id">id</a> 属性则使用该值。</p>
        <h3 class="heading settled" data-level="6.2" id="auto-vt-name-example"><span class="secno">6.2. </span><span
                class="content">示例</span><a class="self-link" href="#auto-vt-name-example"></a></h3>
        <div class="example" id="example-0256bb72">
            <a class="self-link" href="#example-0256bb72"></a> 在此示例中，视图转换用于以动画方式对列表进行排序：
            <pre class="language-html highlight"><c- p>&lt;</c-><c- f>ul</c-><c- p>></c->
    <c- p>&lt;</c-><c- f>li</c-><c- p>></c->项目 1<c- p>&lt;/</c-><c- f>li</c-><c- p>></c->
    <c- p>&lt;</c-><c- f>li</c-><c- p>></c->项目 2<c- p>&lt;/</c-><c- f>li</c-><c- p>></c->
    <c- p>&lt;</c-><c- f>li</c-><c- p>></c->项目 3<c- p>&lt;/</c-><c- f>li</c-><c- p>></c->
    <c- p>&lt;</c-><c- f>li</c-><c- p>></c->项目 4<c- p>&lt;/</c-><c- f>li</c-><c- p>></c->
    ...
<c- p>&lt;/</c-><c- f>ul</c-><c- p>></c->
</pre>
            <p>通常情况下，每个项目都必须接收一个唯一的 <a class="property css" data-link-type="property"
                    href="https://www.w3.org/TR/css-view-transitions-1/#propdef-view-transition-name"
                    id="ref-for-propdef-view-transition-name①①">view-transition-name</a>：</p>
            <pre class="language-css highlight"><c- k>li</c-><c- p>:</c-><c- nf>nth-child</c-><c- p>(</c-><c- m>1</c-><c- p>)</c-> <c- p>{</c-> <c- k>view-transition-name</c-><c- p>:</c-> item1<c- p>;</c-> <c- p>}</c->
li<c- nf>:nth-child</c-><c- p>(</c-><c- m>2</c-><c- p>)</c-> <c- p>{</c-> <c- k>view-transition-name</c-><c- p>:</c-> item2<c- p>;</c-> <c- p>}</c->
li<c- nf>:nth-child</c-><c- p>(</c-><c- m>3</c-><c- p>)</c-> <c- p>{</c-> <c- k>view-transition-name</c-><c- p>:</c-> item3<c- p>;</c-> <c- p>}</c->
li<c- nf>:nth-child</c-><c- p>(</c-><c- m>4</c-><c- p>)</c-> <c- p>{</c-> <c- k>view-transition-name</c-><c- p>:</c-> item4<c- p>;</c-> <c- p>}</c->
...
</pre>
            <p>使用 <span class="css">auto</span>，这段 CSS 就能够工作：</p>
            <pre class="language-css highlight">li <c- p>{</c->
    <c- k>view-transition-name</c-><c- p>:</c-> auto<c- p>;</c->
<c- p>}</c->
</pre>
        </div>
        <h3 class="heading settled" data-level="6.3" id="additions-to-vt-name"><span class="secno">6.3. </span><span
                class="content"><a class="property css" data-link-type="property"
                    href="https://www.w3.org/TR/css-view-transitions-1/#propdef-view-transition-name"
                    id="ref-for-propdef-view-transition-name①②">view-transition-name</a> 的扩展</span><a class="self-link"
                href="#additions-to-vt-name"></a></h3>
        <p>除了现有值之外，<a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-view-transitions-1/#propdef-view-transition-name"
                id="ref-for-propdef-view-transition-name①③">view-transition-name</a> 还接受一个 <dfn
                data-dfn-for="view-transition-name" data-dfn-type="dfn" data-export
                id="view-transition-name-auto">auto<a class="self-link" href="#view-transition-name-auto"></a></dfn>
            关键字。
            要解析 <var>element</var> 的 <span class="property"
                id="ref-for-propdef-view-transition-name①④">view-transition-name</span> 的 <a data-link-type="dfn"
                href="https://www.w3.org/TR/css-cascade-5/#used-value" id="ref-for-used-value">已用值</a>：</p>
        <ol>
            <li data-md>
                <p>让 <var>computed</var> 为 <a class="property css" data-link-type="property"
                        href="https://www.w3.org/TR/css-view-transitions-1/#propdef-view-transition-name"
                        id="ref-for-propdef-view-transition-name①⑤">view-transition-name</a> 的 <a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-cascade-5/#computed-value" id="ref-for-computed-value">计算值</a>。
                </p>
            <li data-md>
                <p>如果 <var>computed</var> 是 <span class="css">none</span>，返回 null。</p>
            <li data-md>
                <p>如果 <var>computed</var> 是一个 <a class="production css" data-link-type="type"
                        href="https://www.w3.org/TR/css-values-4/#identifier-value"
                        id="ref-for-identifier-value①③">&lt;custom-ident></a>，返回 <var>computed</var>。</p>
            <li data-md>
                <p class="assertion">断言：<var>computed</var> 是 <span class="css">auto</span>。</p>
            <li data-md>
                <p>如果 <var>element</var> 具有关联的 <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-id"
                        id="ref-for-concept-id①">id</a>，且
                    <var>computed</var> 与 <var>element</var> 的 <a data-link-type="dfn"
                        href="https://dom.spec.whatwg.org/#concept-tree-root" id="ref-for-concept-tree-root">根</a>
                    关联的根相同，则返回
                    <var>element</var> 的 <span id="ref-for-concept-id②">id</span> 值。
                </p>
                <p class="note" role="note"><span class="marker">注意：</span>这意味着 <a class="css" data-link-type="maybe"
                        href="https://www.w3.org/TR/css-shadow-parts-1/#selectordef-part"
                        id="ref-for-selectordef-part">::part()</a> 伪元素不会解析为其匹配元素的 <a data-link-type="dfn"
                        href="https://dom.spec.whatwg.org/#concept-id" id="ref-for-concept-id③">id</a>。</p>
            <li data-md>
                <p>返回一个唯一字符串。该字符串应该对此元素和 <code
                        class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document①②">Document</a></code>
                    保持一致且唯一，至少在 <var>element</var> 的 <a data-link-type="dfn"
                        href="https://dom.spec.whatwg.org/#concept-node-document"
                        id="ref-for-concept-node-document②">节点文档</a> 的 <a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-view-transitions-1/#document-active-view-transition"
                        id="ref-for-document-active-view-transition⑧">活动视图转换</a> 的生命周期内。</p>
                <p class="note" role="note"><span class="marker">注意：</span>此字符串不是 Web 可观察的，用于在内部算法中寻址元素。</p>
                <p class="note" role="note"><span class="marker">注意：</span>当在跨文档视图转换中使用时，生成的 <span
                        class="css">auto</span>
                    值永远不会匹配，从而产生独立的 <a class="css" data-link-type="maybe"
                        href="https://www.w3.org/TR/css-view-transitions-1/#selectordef-view-transition-group"
                        id="ref-for-selectordef-view-transition-group①">::view-transition-group()</a> 伪元素，
                    一个退出，一个进入。</p>
        </ol>
        <p>由 <span class="css">auto</span> 生成的 <a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-view-transitions-1/#propdef-view-transition-name"
                id="ref-for-propdef-view-transition-name①⑥">view-transition-name</a> 是一个 <a data-link-type="dfn"
                href="https://drafts.csswg.org/css-scoping-1/#css-tree-scoped-name"
                id="ref-for-css-tree-scoped-name①">树作用域名称</a>。</p>
        <h2 class="heading settled" data-level="7" id="nested-view-transitions"><span class="secno">7. </span><span
                class="content">嵌套视图转换</span><a class="self-link" href="#nested-view-transitions"></a>
        </h2>
        <h3 class="heading settled" data-level="7.1" id="nested-overview"><span class="secno">7.1. </span><span
                class="content">概述</span><a class="self-link" href="#nested-overview"></a></h3>
        <p><em>本节为非规范性内容。</em></p>
        <p>默认情况下，在多个元素上设置 <code>view-transition-name</code> 会生成一个扁平的 <a data-link-type="dfn"
                href="https://www.w3.org/TR/css-view-transitions-1/#view-transition-tree"
                id="ref-for-view-transition-tree">视图转换树</a>，其中所有的 <a class="css" data-link-type="maybe"
                href="https://www.w3.org/TR/css-view-transitions-1/#selectordef-view-transition-group"
                id="ref-for-selectordef-view-transition-group②">::view-transition-group()</a> 伪元素都是 <a class="css"
                data-link-type="maybe" href="https://www.w3.org/TR/css-view-transitions-1/#selectordef-view-transition"
                id="ref-for-selectordef-view-transition">::view-transition</a> 伪元素的子元素。
            这对许多简单的用例来说是足够的，但有一些样式用例无法通过扁平树实现。
            最突出的用例是裁剪：在扁平树中，所有伪元素都被裁剪到 <a data-link-type="dfn"
                href="https://www.w3.org/TR/css-view-transitions-1/#snapshot-containing-block"
                id="ref-for-snapshot-containing-block">快照包含块</a>，因此在正常树中裁剪元素会在视图转换期间失去裁剪效果，导致视觉效果错误。
            在扁平树中可能产生意外视觉效果的效果有：</p>
        <ul>
            <li data-md>
                <p>裁剪（<a class="property css" data-link-type="property"
                        href="https://www.w3.org/TR/css-overflow-3/#propdef-overflow"
                        id="ref-for-propdef-overflow">overflow</a>、<a class="property css" data-link-type="property"
                        href="https://www.w3.org/TR/css-masking-1/#propdef-clip-path"
                        id="ref-for-propdef-clip-path">clip-path</a>、<a class="property css" data-link-type="property"
                        href="https://drafts.csswg.org/css-borders-4/#propdef-border-radius"
                        id="ref-for-propdef-border-radius">border-radius</a>）：裁剪会影响元素的子元素。</p>
            <li data-md>
                <p><a class="property css" data-link-type="property"
                        href="https://www.w3.org/TR/css-color-4/#propdef-opacity"
                        id="ref-for-propdef-opacity">opacity</a>、<a class="property css" data-link-type="property"
                        href="https://www.w3.org/TR/css-masking-1/#propdef-mask-image"
                        id="ref-for-propdef-mask-image">mask-image</a> 和 <a class="property css"
                        data-link-type="property" href="https://www.w3.org/TR/filter-effects-1/#propdef-filter"
                        id="ref-for-propdef-filter">filter</a>：这些效果被设计为作用于完全栅格化的树图像，而不是单独作用于每个项目。</p>
            <li data-md>
                <p>3D 变换（<a class="property css" data-link-type="property"
                        href="https://www.w3.org/TR/css-transforms-2/#propdef-transform-style"
                        id="ref-for-propdef-transform-style">transform-style</a>、<a class="property css"
                        data-link-type="property" href="https://www.w3.org/TR/css-transforms-1/#propdef-transform"
                        id="ref-for-propdef-transform">transform</a>、<a class="property css" data-link-type="property"
                        href="https://www.w3.org/TR/css-transforms-2/#propdef-perspective"
                        id="ref-for-propdef-perspective">perspective</a>）：要显示完整的 3D 变换动画范围，需要保持某些层次结构。</p>
        </ul>
        <p>为了启用这些用例，本规范引入了嵌套视图转换伪元素的概念。通过使用 <a class="property css" data-link-type="property"
                href="#propdef-view-transition-group"
                id="ref-for-propdef-view-transition-group">view-transition-group</a> CSS 属性，
            作者可以为生成的 <a class="css" data-link-type="maybe"
                href="https://www.w3.org/TR/css-view-transitions-1/#selectordef-view-transition-group"
                id="ref-for-selectordef-view-transition-group③">::view-transition-group()</a> 伪元素分配一个"父组"，在 <a
                data-link-type="dfn" href="https://www.w3.org/TR/css-view-transitions-1/#view-transition-tree"
                id="ref-for-view-transition-tree①">视图转换树</a>中创建层次结构。</p>
        <h3 class="heading settled" data-level="7.2" id="nested-vt-example"><span class="secno">7.2. </span><span
                class="content">示例</span><a class="self-link" href="#nested-vt-example"></a></h3>
        <div class="example" id="example-5cc76d5d">
            <a class="self-link" href="#example-5cc76d5d"></a> 此示例创建一个转换，其中 <a data-link-type="dfn"
                href="https://www.w3.org/TR/css-view-transitions-1/#view-transition-tree"
                id="ref-for-view-transition-tree②">视图转换树</a>是嵌套的而不是扁平的：
            <pre class="language-html highlight"><c- p>&lt;</c-><c- f>section</c-> <c- e>class</c-><c- o>=</c-><c- s>"container"</c-><c- p>></c->
    <c- p>&lt;</c-><c- f>article</c-><c- p>></c->内容<c- p>&lt;/</c-><c- f>article</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>section</c-><c- p>></c->
</pre>
            <pre class="language-css highlight">.container <c- p>{</c->
    <c- k>view-transition-name</c-><c- p>:</c-> container<c- p>;</c->
<c- p>}</c->

.container<c- p>,</c->
:<c- nf>:view-transition-group</c-><c- p>(</c->container<c- p>)</c-> <c- p>{</c->
    <c- k>clip-path</c-><c- p>:</c-> <c- nf>circle</c-><c- p>();</c->
<c- p>}</c->

article <c- p>{</c->
    <c- k>view-transition-name</c-><c- p>:</c-> article<c- p>;</c->
    <c- k>view-transition-group</c-><c- p>:</c-> container<c- p>;</c->
<c- p>}</c->
</pre>
            <p>通过将 <span class="css">clip-path</span> 同时应用于包含元素及其生成的伪元素，我们在转换期间保持了裁剪效果，
                通过将 <span class="css">view-transition-group</span> 应用于引用容器的内部元素，我们使树以能够应用此裁剪的方式"嵌套"。</p>
        </div>
    </main>
    <h3 class="heading settled" data-level="7.3" id="view-transition-group-prop"><span class="secno">7.3. </span><span
            class="content"><a class="property css" data-link-type="property" href="#propdef-view-transition-group"
                id="ref-for-propdef-view-transition-group①">view-transition-group</a> 属性</span><a class="self-link"
            href="#view-transition-group-prop"></a></h3>
    <table class="def propdef" data-link-for-hint="view-transition-group">
        <tbody>
            <tr>
                <th>名称：
                <td><dfn class="dfn-paneled css" data-dfn-type="property" data-export
                        id="propdef-view-transition-group">view-transition-group</dfn>
            <tr class="value">
                <th><a href="https://www.w3.org/TR/css-values/#value-defs">值：</a>
                <td class="prod">normal <a data-link-type="grammar" href="https://www.w3.org/TR/css-values-4/#comb-one"
                        id="ref-for-comb-one④">|</a> contain <span id="ref-for-comb-one⑤">|</span> nearest <span
                        id="ref-for-comb-one⑥">|</span> <a class="production css" data-link-type="type"
                        href="https://www.w3.org/TR/css-values-4/#identifier-value"
                        id="ref-for-identifier-value①④">&lt;custom-ident></a>
            <tr>
                <th><a href="https://www.w3.org/TR/css-cascade/#initial-values">初始值：</a>
                <td>normal
            <tr>
                <th><a href="https://www.w3.org/TR/css-cascade/#applies-to">适用于：</a>
                <td><a href="https://www.w3.org/TR/css-pseudo/#generated-content"
                        title="包括 ::before 和 ::after 伪元素。">所有元素</a>
            <tr>
                <th><a href="https://www.w3.org/TR/css-cascade/#inherited-property">是否继承：</a>
                <td>否
            <tr>
                <th><a href="https://www.w3.org/TR/css-values/#percentages">百分比：</a>
                <td>不适用
            <tr>
                <th><a href="https://www.w3.org/TR/css-cascade/#computed">计算值：</a>
                <td>按指定值
            <tr>
                <th><a href="https://www.w3.org/TR/cssom/#serializing-css-values">规范顺序：</a>
                <td>按语法
            <tr>
                <th><a href="https://www.w3.org/TR/web-animations/#animation-type">动画类型：</a>
                <td>离散
    </table>
    <p><a class="property css" data-link-type="property" href="#propdef-view-transition-group"
            id="ref-for-propdef-view-transition-group②">view-transition-group</a> 属性可以与 <a class="property css"
            data-link-type="property" href="https://www.w3.org/TR/css-view-transitions-1/#propdef-view-transition-name"
            id="ref-for-propdef-view-transition-name①⑦">view-transition-name</a> 结合使用，生成 <a data-link-type="dfn"
            href="https://www.w3.org/TR/css-view-transitions-1/#named-view-transition-pseudo-elements"
            id="ref-for-named-view-transition-pseudo-elements⑧">命名视图转换伪元素</a>的层次结构。</p>
    <p><a class="property css" data-link-type="property" href="#propdef-view-transition-group"
            id="ref-for-propdef-view-transition-group③">view-transition-group</a> 的 <a data-link-type="dfn"
            href="https://www.w3.org/TR/css-cascade-5/#used-value" id="ref-for-used-value①">已用值</a>解析为其祖先链中的 <a
            class="property css" data-link-type="property"
            href="https://www.w3.org/TR/css-view-transitions-1/#propdef-view-transition-name"
            id="ref-for-propdef-view-transition-name①⑧">view-transition-name</a>，或者解析为 <a class="css"
            data-link-type="maybe" href="https://www.w3.org/TR/css-view-transitions-1/#valdef-view-transition-name-none"
            id="ref-for-valdef-view-transition-name-none">none</a>。当生成 <a data-link-type="dfn"
            href="https://www.w3.org/TR/css-view-transitions-1/#named-view-transition-pseudo-elements"
            id="ref-for-named-view-transition-pseudo-elements⑨">命名视图转换伪元素</a>时，具有该名称的 <a class="css"
            data-link-type="maybe"
            href="https://www.w3.org/TR/css-view-transitions-1/#selectordef-view-transition-group"
            id="ref-for-selectordef-view-transition-group④">::view-transition-group()</a> 将是为此元素的 <span class="css"
            id="ref-for-selectordef-view-transition-group⑤">::view-transition-group()</span> 生成的父元素，该元素为此元素的 <span
            class="property" id="ref-for-propdef-view-transition-name①⑨">view-transition-name</span> 生成。</p>
    <h2 class="heading settled" data-level="8" id="layered-capture"><span class="secno">8. </span><span
            class="content">分层捕获</span><a class="self-link" href="#layered-capture"></a></h2>
    <h3 class="heading settled" data-level="8.1" id="layered-capture-overview"><span class="secno">8.1. </span><span
            class="content">概述</span><a class="self-link" href="#layered-capture-overview"></a></h3>
    <p><em>本节是非规范性的。</em></p>
    <p>在 <a data-link-type="biblio" href="#biblio-css-view-transitions-1"
            title="CSS View Transitions Module Level 1">[css-view-transitions-1]</a> 中，新旧状态被捕获为快照，并捕获初始和最终几何图形，
        默认情况下创建交叉淡入淡出动画。这是一个简单的模型，通常能够创建所需的结果。</p>
    <p>然而，交叉淡入淡出两个扁平化的快照并不总是最具表现力的动画。CSS 允许为边框、渐变背景、<a class="property css" data-link-type="property"
            href="https://www.w3.org/TR/filter-effects-1/#propdef-filter" id="ref-for-propdef-filter①">filter</a>、<a
            class="property css" data-link-type="property"
            href="https://drafts.csswg.org/css-borders-4/#propdef-box-shadow"
            id="ref-for-propdef-box-shadow">box-shadow</a> 等添加动画，
        根据所需的用户体验，这可能比交叉淡入淡出感觉更具表现力和自然性。</p>
    <p>此外，当使用 <a href="#nested-view-transitions">嵌套视图转换</a> 时，当 CSS 属性被扁平化为快照时，一些动画可能看起来"错误"。
        这包括树状效果，例如 <a class="property css" data-link-type="property"
            href="https://www.w3.org/TR/css-color-4/#propdef-opacity" id="ref-for-propdef-opacity①">opacity</a>、<a
            class="property css" data-link-type="property" href="https://www.w3.org/TR/css-masking-1/#propdef-mask"
            id="ref-for-propdef-mask">mask</a>、<a class="property css" data-link-type="property"
            href="https://www.w3.org/TR/css-masking-1/#propdef-clip-path" id="ref-for-propdef-clip-path①">clip-path</a>
        和 <a class="property css" data-link-type="property"
            href="https://www.w3.org/TR/filter-effects-1/#propdef-filter" id="ref-for-propdef-filter②">filter</a>，以及
        使用 <a class="property css" data-link-type="property"
            href="https://www.w3.org/TR/css-overflow-3/#propdef-overflow" id="ref-for-propdef-overflow①">overflow</a>
        的剪切。
        这些效果被设计为应用于整个元素树，而不仅仅是一个元素及其内容。</p>
    <p>通过分层捕获，所有影响整个树的 CSS 属性以及盒装饰都被捕获为样式，并作为组的一部分进行动画。</p>
    <p class="issue" id="issue-93264331"><a class="self-link" href="#issue-93264331"></a> 这种行为应该通过 CSS 属性选择加入/退出吗？参见 <a
            href="https://github.com/w3c/csswg-drafts/issues/11078">issue
            11078</a>。</p>
    <h3 class="heading settled" data-level="8.2" id="layered-captured-css-properties"><span class="secno">8.2.
        </span><span class="content">捕获的 CSS 属性表 {#layered-captured-css-properties}</span><a class="self-link"
            href="#layered-captured-css-properties"></a></h3>
    <p>以下 <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="layered-capture-properties">分层捕获属性</dfn>
        列表定义了参与分层捕获的 CSS 属性。
        当捕获元素的新旧状态时，这些属性被捕获为样式，用户代理必须在忽略该属性的情况下渲染快照：</p>
    <ul>
        <li data-md>
            <p><a class="property css" data-link-type="property"
                    href="https://www.w3.org/TR/css-backgrounds-3/#propdef-background"
                    id="ref-for-propdef-background">background</a></p>
        <li data-md>
            <p><a class="property css" data-link-type="property"
                    href="https://drafts.csswg.org/css-borders-4/#propdef-border-left"
                    id="ref-for-propdef-border-left">border-left</a></p>
        <li data-md>
            <p><a class="property css" data-link-type="property"
                    href="https://drafts.csswg.org/css-borders-4/#propdef-border-top"
                    id="ref-for-propdef-border-top">border-top</a></p>
        <li data-md>
            <p><a class="property css" data-link-type="property"
                    href="https://drafts.csswg.org/css-borders-4/#propdef-border-bottom"
                    id="ref-for-propdef-border-bottom">border-bottom</a></p>
        <li data-md>
            <p><a class="property css" data-link-type="property"
                    href="https://drafts.csswg.org/css-borders-4/#propdef-border-right"
                    id="ref-for-propdef-border-right">border-right</a></p>
        <li data-md>
            <p><a class="property css" data-link-type="property"
                    href="https://drafts.csswg.org/css-borders-4/#propdef-border-radius"
                    id="ref-for-propdef-border-radius①">border-radius</a></p>
        <li data-md>
            <p><a class="property css" data-link-type="property"
                    href="https://www.w3.org/TR/css-backgrounds-3/#propdef-border-image"
                    id="ref-for-propdef-border-image">border-image</a></p>
        <li data-md>
            <p><a class="property css" data-link-type="property"
                    href="https://drafts.csswg.org/css-borders-4/#propdef-box-shadow"
                    id="ref-for-propdef-box-shadow①">box-shadow</a></p>
        <li data-md>
            <p><a class="property css" data-link-type="property"
                    href="https://www.w3.org/TR/css-sizing-3/#propdef-box-sizing"
                    id="ref-for-propdef-box-sizing">box-sizing</a></p>
        <li data-md>
            <p><a class="property css" data-link-type="property"
                    href="https://www.w3.org/TR/css-masking-1/#propdef-clip-path"
                    id="ref-for-propdef-clip-path②">clip-path</a></p>
        <li data-md>
            <p><a class="property css" data-link-type="property"
                    href="https://www.w3.org/TR/filter-effects-1/#propdef-filter"
                    id="ref-for-propdef-filter③">filter</a></p>
        <li data-md>
            <p><a class="property css" data-link-type="property"
                    href="https://www.w3.org/TR/css-masking-1/#propdef-mask" id="ref-for-propdef-mask①">mask</a></p>
        <li data-md>
            <p><a class="property css" data-link-type="property"
                    href="https://www.w3.org/TR/css-color-4/#propdef-opacity" id="ref-for-propdef-opacity②">opacity</a>
            </p>
        <li data-md>
            <p><a class="property css" data-link-type="property" href="https://www.w3.org/TR/css-ui-4/#propdef-outline"
                    id="ref-for-propdef-outline">outline</a></p>
        <li data-md>
            <p><a class="property css" data-link-type="property" href="https://www.w3.org/TR/css-box-4/#propdef-padding"
                    id="ref-for-propdef-padding">padding</a></p>
    </ul>
    <h2 class="heading settled" data-level="9" id="algorithms"><span class="secno">9. </span><span
            class="content">算法</span><a class="self-link" href="#algorithms"></a></h2>
    <h3 class="heading settled" data-level="9.1" id="cross-doc-data-structures"><span class="secno">9.1. </span><span
            class="content">数据结构</span><a class="self-link" href="#cross-doc-data-structures"></a></h3>
    <h4 class="heading settled" data-level="9.1.1" id="cross-doc-data-structure-document"><span class="secno">9.1.1.
        </span><span class="content"><code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document①③">Document</a></code>
            的扩展</span><a class="self-link" href="#cross-doc-data-structure-document"></a></h4>
    <code
        class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document①④">Document</a></code>
    另外具有：
    <dl>
        <dt data-md><dfn class="dfn-paneled" data-dfn-for="document" data-dfn-type="dfn" data-noexport
                id="document-inbound-view-transition-params">入站视图转换参数</dfn>
        <dd data-md>
            <p>一个 <a data-link-type="dfn" href="#view-transition-params"
                    id="ref-for-view-transition-params">视图转换参数</a>，或 null。
                初始值为 null。</p>
        <dt data-md><dfn class="dfn-paneled" data-dfn-for="document" data-dfn-type="dfn" data-noexport
                id="document-can-initiate-outbound-view-transition">可以启动出站视图转换</dfn>
        <dd data-md>
            <p>一个布尔值。
                初始值为 false。</p>
            <p class="note" role="note"><span class="marker">注：</span>此值可以在导航时<a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel"
                    id="ref-for-in-parallel①">并行</a>读取。</p>
    </dl>
    <h4 class="heading settled" data-level="9.1.2" id="cross-doc-data-structure-vt"><span class="secno">9.1.2.
        </span><span class="content"><code
                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition" id="ref-for-viewtransition①③">ViewTransition</a></code>
            的扩展</span><a class="self-link" href="#cross-doc-data-structure-vt"></a></h4>
    <code
        class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition" id="ref-for-viewtransition①④">ViewTransition</a></code>
    另外具有：
    <dl>
        <dt data-md><dfn class="dfn-paneled" data-dfn-for="ViewTransition" data-dfn-type="dfn" data-noexport
                id="viewtransition-active-types">活动类型</dfn>
        <dd data-md>
            <p>一个 <code
                    class="idl"><a data-link-type="idl" href="#viewtransitiontypeset" id="ref-for-viewtransitiontypeset③">ViewTransitionTypeSet</a></code>，
                初始为空。</p>
        <dt data-md><dfn class="dfn-paneled" data-dfn-for="ViewTransition" data-dfn-type="dfn" data-noexport
                id="viewtransition-outbound-post-capture-steps">出站后捕获步骤</dfn>
        <dd data-md>
            <p>null 或一组步骤，初始为 null。</p>
    </dl>
    <h4 class="heading settled" data-level="9.1.3" id="cross-doc-data-structure-serialization"><span
            class="secno">9.1.3. </span><span class="content">可序列化的 <a data-link-type="dfn"
                href="#view-transition-params" id="ref-for-view-transition-params①">视图转换参数</a></span><a
            class="self-link" href="#cross-doc-data-structure-serialization"></a></h4>
    <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="view-transition-params">视图转换参数</dfn> 是一个 <a
        data-link-type="dfn" href="https://infra.spec.whatwg.org/#struct" id="ref-for-struct">结构体</a>，其目的是在文档间序列化视图转换信息。
    它有以下 <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#struct-item" id="ref-for-struct-item">项目</a>：
    <dl>
        <dt data-md><dfn class="dfn-paneled" data-dfn-for="view transition params" data-dfn-type="dfn" data-noexport
                id="view-transition-params-named-elements">命名元素</dfn>
        <dd data-md>
            <p>一个 <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map"
                    id="ref-for-ordered-map">映射</a>，其键为字符串，值为 <a data-link-type="dfn"
                    href="https://www.w3.org/TR/css-view-transitions-1/#captured-element"
                    id="ref-for-captured-element①">捕获的元素</a>。</p>
        <dt data-md><dfn class="dfn-paneled" data-dfn-for="view transition params" data-dfn-type="dfn" data-noexport
                id="view-transition-params-initial-snapshot-containing-block-size">初始快照包含块大小</dfn>
        <dd data-md>
            <p>一个包含两个数字（宽度和高度）的 <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#tuple"
                    id="ref-for-tuple">元组</a>。</p>
    </dl>
    <h3 class="heading settled" data-level="9.2" id="page-visibility-change-steps-additions"><span class="secno">9.2.
        </span><span class="content">视图转换页面可见性变化步骤的扩展</span><a class="self-link"
            href="#page-visibility-change-steps-additions"></a></h3>
    <div class="algorithm" data-algorithm="visibility change step additions">
        以下步骤被附加到任务 <a data-link-type="dfn"
            href="https://drafts.csswg.org/css-view-transitions-1/#view-transition-page-visibility-change-steps"
            id="ref-for-view-transition-page-visibility-change-steps">视图转换页面可见性变化步骤</a>给定
        <var>document</var>，在队列任务中的当前步骤之后：
        <ol>
            <li data-md>
                <p>将 <var>document</var> 的 <a data-link-type="dfn" href="#document-inbound-view-transition-params"
                        id="ref-for-document-inbound-view-transition-params">入站视图转换参数</a>设置为 null。
                </p>
        </ol>
        <p class="note" role="note"><span class="marker">注：</span>这是从 HTML 规范中调用的。</p>
    </div>
    <h4 class="heading settled" data-level="9.2.1" id="capture-classes-data-structure"><span class="secno">9.2.1.
        </span><span class="content">捕获元素扩展</span><a class="self-link" href="#capture-classes-data-structure"></a></h4>
    <a data-link-type="dfn" href="https://www.w3.org/TR/css-view-transitions-1/#captured-element"
        id="ref-for-captured-element②">捕获的元素</a>结构体应该包含这些字段，除了现有的字段之外：
    <dl>
        <dt data-md><dfn class="dfn-paneled" data-dfn-for="captured element" data-dfn-type="dfn" data-noexport
                id="captured-element-class-list">类列表</dfn>
        <dd data-md>
            <p>一个字符串 <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list①">列表</a>，初始为空。
            </p>
        <dt data-md><dfn class="dfn-paneled" data-dfn-for="captured element" data-dfn-type="dfn" data-noexport
                id="captured-element-containing-group-name">包含组名称</dfn>
        <dd data-md>
            <p>null 或一个字符串，初始为 null。</p>
        <dt data-md><dfn class="dfn-paneled" data-dfn-for="captured element" data-dfn-type="dfn" data-noexport
                id="captured-element-old-layered-capture-style">旧分层捕获样式</dfn>
        <dd data-md>
            <p>一个字符串。</p>
        <dt data-md><dfn class="dfn-paneled" data-dfn-for="captured element" data-dfn-type="dfn" data-noexport
                id="captured-element-transform-from-snapshot-containing-block">从快照包含块的变换</dfn>
        <dd data-md>
            <p>一个 <a data-link-type="dfn" href="https://www.w3.org/TR/geometry-1/#matrix" id="ref-for-matrix">矩阵</a>，
                初始为 <a data-link-type="dfn" href="https://www.w3.org/TR/css-transforms-1/#identity-transform-function"
                    id="ref-for-identity-transform-function">恒等变换函数</a>。</p>
        <dt data-md><dfn class="dfn-paneled" data-dfn-for="captured element" data-dfn-type="dfn" data-noexport
                id="captured-element-old-box-properties">旧盒属性</dfn>
        <dt data-md><dfn class="dfn-paneled" data-dfn-for="captured element" data-dfn-type="dfn" data-noexport
                id="captured-element-new-box-properties">新盒属性</dfn>
        <dd data-md>
            <p>一个 <a data-link-type="dfn" href="#layered-box-properties" id="ref-for-layered-box-properties">分层盒属性</a>或
                null，初始为 null。</p>
    </dl>
    <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="layered-box-properties">分层盒属性</dfn>是一个结构体，包含以下字段：
    </p>
    <dl>
        <dt data-md><dfn class="dfn-paneled" data-dfn-for="layered box properties" data-dfn-type="dfn" data-noexport
                id="layered-box-properties-box-sizing">盒模型</dfn>
        <dd data-md>
            <p><a class="css" data-link-type="maybe"
                    href="https://www.w3.org/TR/css-sizing-3/#valdef-box-sizing-border-box"
                    id="ref-for-valdef-box-sizing-border-box">border-box</a> 或 <a class="css" data-link-type="maybe"
                    href="https://www.w3.org/TR/css-sizing-3/#valdef-box-sizing-content-box"
                    id="ref-for-valdef-box-sizing-content-box">content-box</a>。</p>
        <dt data-md><dfn class="dfn-paneled" data-dfn-for="layered box properties" data-dfn-type="dfn" data-noexport
                id="layered-box-properties-content-box">内容盒</dfn>
        <dt data-md><dfn class="dfn-paneled" data-dfn-for="layered box properties" data-dfn-type="dfn" data-noexport
                id="layered-box-properties-padding-box">内边距盒</dfn>
        <dd data-md>
            <p>一个矩形，以 CSS 像素单位，相对于边框盒。</p>
    </dl>
    <h3 class="heading settled" data-level="9.3" id="vt-rule-algo"><span class="secno">9.3. </span><span
            class="content">解析 <a class="css" data-link-type="maybe" href="#at-view-transition-rule"
                id="ref-for-at-view-transition-rule①④">@view-transition</a> 规则</span><a class="self-link"
            href="#vt-rule-algo"></a></h3>
    <div class="algorithm" data-algorithm="resolve @view-transition rule">
        要为 <code
            class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document①⑤">Document</a></code>
        <var>document</var> <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
            id="resolve-view-transition-rule">解析 @view-transition 规则</dfn>：
        <p class="note" role="note"><span class="marker">注：</span>这在新旧文档中都会调用。
        </p>
        <ol>
            <li data-md>
                <p>如果 <var>document</var> 的 <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/interaction.html#visibility-state"
                        id="ref-for-visibility-state">可见性状态</a>为"<code>hidden</code>"，
                    则返回"<code>跳过转换</code>"。</p>
            <li data-md>
                <p>设 <var>matchingRule</var> 为 <var>document</var> 中最后一个 <a class="css" data-link-type="maybe"
                        href="#at-view-transition-rule" id="ref-for-at-view-transition-rule①⑤">@view-transition</a> 规则。
                </p>
            <li data-md>
                <p>如果没有找到 <var>matchingRule</var>，则返回"<code>跳过转换</code>"。</p>
            <li data-md>
                <p>如果 <var>matchingRule</var> 的 <a data-link-type="dfn" href="#view-transition-navigation"
                        id="ref-for-view-transition-navigation②">navigation</a> 描述符的 <a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-cascade-5/#computed-value" id="ref-for-computed-value①">计算值</a>为
                    <a class="css" data-link-type="maybe" href="#valdef-view-transition-navigation-none"
                        id="ref-for-valdef-view-transition-navigation-none">none</a>，则返回
                    "<code>跳过转换</code>"。
                </p>
            <li data-md>
                <p class="assertion">断言：<var>matchingRule</var> 的 <a data-link-type="dfn"
                        href="#view-transition-navigation" id="ref-for-view-transition-navigation③">navigation</a>
                    描述符的 <a data-link-type="dfn" href="https://www.w3.org/TR/css-cascade-5/#computed-value"
                        id="ref-for-computed-value②">计算值</a>为 <a class="css" data-link-type="maybe"
                        href="#valdef-view-transition-navigation-auto"
                        id="ref-for-valdef-view-transition-navigation-auto①">auto</a>。</p>
            <li data-md>
                <p>设 <var>typesDescriptor</var> 为 <var>matchingRule</var> 的 <a data-link-type="dfn"
                        href="#view-transition-types" id="ref-for-view-transition-types④">types</a> 描述符。</p>
            <li data-md>
                <p>如果 <var>typesDescriptor</var> 的 <a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-cascade-5/#computed-value" id="ref-for-computed-value③">计算值</a>为
                    <span class="css">none</span>，则返回一个 <a data-link-type="dfn"
                        href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set②">集合</a>「 」。
                </p>
            <li data-md>
                <p>返回一个对应于 <var>typesDescriptor</var> 的 <a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-cascade-5/#computed-value"
                        id="ref-for-computed-value④">计算值</a>的字符串 <a data-link-type="dfn"
                        href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set③">集合</a>。</p>
        </ol>
    </div>
    <h3 class="heading settled" data-level="9.4" id="setup-old-document-vt"><span class="secno">9.4. </span><span
            class="content">在旧 <code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document①⑥">Document</a></code>
            中设置视图转换</span><a class="self-link" href="#setup-old-document-vt"></a></h3>
    <h4 class="heading settled" data-level="9.4.1" id="check-eligibility"><span class="secno">9.4.1. </span><span
            class="content">检查出站跨文档视图转换的资格</span><a class="self-link" href="#check-eligibility"></a></h4>
    <div class="algorithm" data-algorithm="navigation can trigger a cross-document view-transition?">
        要检查给定 <code
            class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document①⑦">Document</a></code>
        <var>oldDocument</var>、<code
            class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document①⑧">Document</a></code>
        <var>newDocument</var>、<code
            class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#navigationtype" id="ref-for-navigationtype①">NavigationType</a></code>
        <var>navigationType</var> 和布尔值 <var>isBrowserUINavigation</var> 的 <dfn data-dfn-type="dfn" data-export
            id="navigation-can-trigger-a-cross-document-view-transition">导航是否可以触发跨文档视图转换？<a class="self-link"
                href="#navigation-can-trigger-a-cross-document-view-transition"></a></dfn>：
        <p class="note" role="note"><span class="marker">注：</span>这在导航期间调用，可能是<a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel"
                id="ref-for-in-parallel②">并行</a>的。</p>
        <ol>
            <li data-md>
                <p>如果用户代理决定显示<a data-link-type="dfn" href="https://infra.spec.whatwg.org/#implementation-defined"
                        id="ref-for-implementation-defined">实现定义</a>的导航体验，例如后退导航的基于手势的转换，
                    用户代理可以忽略作者定义的视图转换。如果是这种情况，返回 false。</p>
            <li data-md>
                <p>如果 <var>oldDocument</var> 的 <a data-link-type="dfn"
                        href="#document-can-initiate-outbound-view-transition"
                        id="ref-for-document-can-initiate-outbound-view-transition">可以启动出站视图转换</a>为 false，则返回 false。</p>
            <li data-md>
                <p>如果 <var>navigationType</var> 为 <code
                        class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-navigationtype-reload" id="ref-for-dom-navigationtype-reload①">reload</a></code>，
                    则返回 false。</p>
            <li data-md>
                <p>如果 <var>oldDocument</var> 的 <a data-link-type="dfn"
                        href="https://dom.spec.whatwg.org/#concept-document-origin"
                        id="ref-for-concept-document-origin">源</a>与 <var>newDocument</var> 的 <span
                        id="ref-for-concept-document-origin①">源</span>不是<a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsers.html#same-origin"
                        id="ref-for-same-origin②">同源</a>，则返回 false。</p>
            <li data-md>
                <p>如果 <var>newDocument</var> <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/dom.html#was-created-via-cross-origin-redirects"
                        id="ref-for-was-created-via-cross-origin-redirects">是通过跨源重定向创建的</a>
                    且 <var>newDocument</var> 的 <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#latest-entry"
                        id="ref-for-latest-entry">最新条目</a>为 null，则返回 false。</p>
                <p class="note" role="note"><span class="marker">注：</span>如果这是一个新的导航，而不是从 BFCache 恢复，<a
                        data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document"
                        id="ref-for-concept-document①">Document</a> 的 <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#latest-entry"
                        id="ref-for-latest-entry①">最新条目</a>将为 null。</p>
            <li data-md>
                <p>如果 <var>navigationType</var> 为 <code
                        class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-navigationtype-traverse" id="ref-for-dom-navigationtype-traverse②">traverse</a></code>，
                    则返回 true。</p>
            <li data-md>
                <p>如果 <var>isBrowserUINavigation</var> 为 true，则返回 false。</p>
            <li data-md>
                <p>返回 true。</p>
        </ol>
    </div>
    <h4 class="heading settled" data-level="9.4.2" id="setup-outbound-transition"><span class="secno">9.4.2.
        </span><span class="content">准备交换页面时设置出站转换</span><a class="self-link" href="#setup-outbound-transition"></a>
    </h4>
    <div class="algorithm" data-algorithm="setup cross-document view-transition">
        要给定 <code
            class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document①⑨">Document</a></code>
        <var>oldDocument</var>、
        <code
            class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document②⓪">Document</a></code>
        <var>newDocument</var> 和 <var>proceedWithNavigation</var>（一个不接受任何参数的算法）<dfn data-dfn-type="dfn" data-export
            id="setup-cross-document-view-transition">设置跨文档视图转换<a class="self-link"
                href="#setup-cross-document-view-transition"></a></dfn>：
        <p class="note" role="note"><span class="marker">注：</span>这是从 HTML 规范中调用的。</p>
        <ol>
            <li data-md>
                <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert">断言</a>：
                    这些步骤作为在 <var>oldDocument</var> 上排队的<a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-task"
                        id="ref-for-concept-task">任务</a>的一部分运行。</p>
            <li data-md>
                <p>如果 <var>oldDocument</var> 的 <a data-link-type="dfn"
                        href="#document-can-initiate-outbound-view-transition"
                        id="ref-for-document-can-initiate-outbound-view-transition①">可以启动出站视图转换</a>为 false，则返回 null。</p>
            <li data-md>
                <p>设 <var>transitionTypesFromRule</var> 为为 <var>oldDocument</var> <a data-link-type="dfn"
                        href="#resolve-view-transition-rule" id="ref-for-resolve-view-transition-rule">解析
                        @view-transition 规则</a>的结果。</p>
            <li data-md>
                <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert①">断言</a>：
                    <var>transitionTypesFromRule</var> 不是"<code>跳过转换</code>"。
                </p>
                <p class="note" role="note"><span class="marker">注：</span>我们还不知道 <var>newDocument</var>
                    是否已选择加入，因为它可能还没有解析。
                    我们在触发 <code
                        class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/indices.html#event-pagereveal" id="ref-for-event-pagereveal③">pagereveal</a></code>
                    事件时检查 <var>newDocument</var> 的选择加入。
                </p>
            <li data-md>
                <p>如果 <var>oldDocument</var> 的 <a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-view-transitions-1/#document-active-view-transition"
                        id="ref-for-document-active-view-transition⑨">活动视图转换</a>不为 null，
                    则使用 "<code
                        class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#aborterror" id="ref-for-aborterror">AbortError</a></code>"
                    <code
                        class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException①">DOMException</a></code>
                    在 <var>oldDocument</var> 的 <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm"
                        id="ref-for-concept-relevant-realm①">相关领域</a>中<a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-view-transitions-1/#skip-the-view-transition"
                        id="ref-for-skip-the-view-transition①">跳过</a> <var>oldDocument</var> 的 <span
                        id="ref-for-document-active-view-transition①⓪">活动视图转换</span>。
                </p>
                <p class="note" role="note"><span class="marker">注：</span>这意味着当文档准备卸载时，任何正在运行的转换都会被跳过。</p>
            <li data-md>
                <p>设 <var>outboundTransition</var> 为 <var>oldDocument</var> 的 <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm"
                        id="ref-for-concept-relevant-realm②">相关领域</a>中的新 <code
                        class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition" id="ref-for-viewtransition①⑤">ViewTransition</a></code>
                    对象。</p>
            <li data-md>
                <p>将 <var>outboundTransition</var> 的 <a data-link-type="dfn" href="#viewtransition-active-types"
                        id="ref-for-viewtransition-active-types⑦">活动类型</a>设置为
                    <var>transitionTypesFromRule</var>。
                </p>
                <p class="note" role="note"><span class="marker">注：</span><a data-link-type="dfn"
                        href="#viewtransition-active-types" id="ref-for-viewtransition-active-types⑧">活动类型</a>
                    不在文档间共享。
                    在新文档中操作 <code
                        class="idl"><a data-link-type="idl" href="#dom-viewtransition-types" id="ref-for-dom-viewtransition-types⑦">types</a></code>
                    不会影响 <var>newDocument</var> 中的类型，
                    后者将在 <var>newDocument</var> 显示后从 <a data-link-type="dfn" href="#view-transition-types"
                        id="ref-for-view-transition-types⑤">types</a> 描述符中读取。</p>
                <p class="note" role="note"><span class="marker">注：</span>一旦旧文档被隐藏，<code
                        class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition" id="ref-for-viewtransition①⑥">ViewTransition</a></code>
                    就会被跳过。</p>
            <li data-md>
                <p>将 <var>outboundTransition</var> 的 <a data-link-type="dfn"
                        href="#viewtransition-outbound-post-capture-steps"
                        id="ref-for-viewtransition-outbound-post-capture-steps①">出站后捕获步骤</a>设置为给定 <a
                        data-link-type="dfn" href="#view-transition-params"
                        id="ref-for-view-transition-params②">视图转换参数</a>或 null <var>params</var> 的以下步骤：</p>
                <ol>
                    <li data-md>
                        <p>将 <var>newDocument</var> 的 <a data-link-type="dfn"
                                href="#document-inbound-view-transition-params"
                                id="ref-for-document-inbound-view-transition-params①">入站视图转换参数</a>
                            设置为 <var>params</var>。</p>
                        <p class="note" role="note"><span class="marker">注：</span>入站转换在分发 <code
                                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/indices.html#event-pagereveal" id="ref-for-event-pagereveal④">pagereveal</a></code>
                            之后激活，以确保在此事件中进行的突变应用于捕获的新状态。</p>
                    <li data-md>
                        <p>为了在超时后跳过转换，用户代理可以<a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel"
                                id="ref-for-in-parallel③">并行</a>执行以下步骤：</p>
                        <ol>
                            <li data-md>
                                <p>等待<a data-link-type="dfn"
                                        href="https://infra.spec.whatwg.org/#implementation-defined"
                                        id="ref-for-implementation-defined①">实现定义</a>的<a data-link-type="dfn"
                                        href="https://www.w3.org/TR/hr-time-3/#dfn-duration"
                                        id="ref-for-dfn-duration">持续时间</a>。</p>
                            <li data-md>
                                <p>在给定 <var>newDocument</var> 的 <a data-link-type="dfn"
                                        href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global"
                                        id="ref-for-concept-relevant-global">相关全局对象</a>的 <a data-link-type="dfn"
                                        href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source"
                                        id="ref-for-dom-manipulation-task-source">DOM 操作任务源</a>上<a data-link-type="dfn"
                                        href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task"
                                        id="ref-for-queue-a-global-task">排队全局任务</a>以执行以下步骤：
                                </p>
                                <ol>
                                    <li data-md>
                                        <p>如果 <var>newDocument</var> 的 <a data-link-type="dfn"
                                                href="#document-inbound-view-transition-params"
                                                id="ref-for-document-inbound-view-transition-params②">入站视图转换参数</a>是
                                            <var>params</var>，则将
                                            <var>newDocument</var> 的 <span
                                                id="ref-for-document-inbound-view-transition-params③">入站视图转换参数</span>设置为
                                            null。
                                        </p>
                                </ol>
                        </ol>
                    <li data-md>
                        <p>调用 <var>proceedWithNavigation</var>。</p>
                </ol>
            <li data-md>
                <p>将 <var>oldDocument</var> 的 <a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-view-transitions-1/#document-active-view-transition"
                        id="ref-for-document-active-view-transition①①">活动视图转换</a>设置为
                    <var>outboundTransition</var>。
                </p>
                <p class="note" role="note"><span class="marker">注：</span>流程在 <a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-view-transitions-1/#perform-pending-transition-operations"
                        id="ref-for-perform-pending-transition-operations">执行待处理转换操作</a>中继续。
                </p>
            <li data-md>
                <p>用户代理应该显示当前显示的帧，直到以下任一情况发生：</p>
                <ul>
                    <li data-md>
                        <p>触发 <code
                                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/indices.html#event-pagereveal" id="ref-for-event-pagereveal⑤">pagereveal</a></code>
                            事件。</p>
                    <li data-md>
                        <p>其 <a data-link-type="dfn"
                                href="https://www.w3.org/TR/css-view-transitions-1/#document-active-view-transition"
                                id="ref-for-document-active-view-transition①②">活动视图转换</a>的 <a data-link-type="dfn"
                                href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition-phase"
                                id="ref-for-viewtransition-phase">阶段</a>为 "<code>done</code>"。</p>
                </ul>
                <p class="note" role="note"><span class="marker">注：</span>这是为了确保在显示新旧状态之间没有意外的闪烁，以保持转换的平滑性。</p>
            <li data-md>
                <p>返回 <var>outboundTransition</var>。</p>
        </ol>
    </div>
    <h4 class="heading settled" data-level="9.4.3" id="update-opt-in"><span class="secno">9.4.3. </span><span
            class="content">更新选择加入标志以反映当前状态</span><a class="self-link" href="#update-opt-in"></a></h4>
    <div class="algorithm" data-algorithm="update-opt-in-for-outbound">
        要为 <code
            class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document②①">Document</a></code>
        <var>document</var> <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
            id="update-the-opt-in-state-for-outbound-transitions">更新出站转换的选择加入状态</dfn>：
        <ol>
            <li data-md>
                <p>如果 <var>document</var> <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#has-been-revealed"
                        id="ref-for-has-been-revealed">已被显示</a>，且<a data-link-type="dfn"
                        href="#resolve-view-transition-rule" id="ref-for-resolve-view-transition-rule①">解析
                        @view-transition 规则</a>的结果不是"<code>跳过转换</code>"，
                    则将 <var>document</var> 的 <a data-link-type="dfn"
                        href="#document-can-initiate-outbound-view-transition"
                        id="ref-for-document-can-initiate-outbound-view-transition②">可以启动出站视图转换</a>设置为 true。</p>
            <li data-md>
                <p>否则，将 <var>document</var> 的 <a data-link-type="dfn"
                        href="#document-can-initiate-outbound-view-transition"
                        id="ref-for-document-can-initiate-outbound-view-transition③">可以启动出站视图转换</a>设置为 false。</p>
        </ol>
    </div>
    <h4 class="heading settled" data-level="9.4.4" id="proceed-if-skipped"><span class="secno">9.4.4. </span><span
            class="content">如果视图转换被跳过则继续导航</span><a class="self-link" href="#proceed-if-skipped"></a></h4>
    <div class="algorithm" data-algorithm="additional skip steps">
        将以下步骤附加到给定 <code
            class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition" id="ref-for-viewtransition①⑦">ViewTransition</a></code>
        <var>transition</var> 的<a data-link-type="dfn"
            href="https://www.w3.org/TR/css-view-transitions-1/#skip-the-view-transition"
            id="ref-for-skip-the-view-transition②">跳过视图转换</a>：
        <ol>
            <li data-md>
                <p>如果 <var>transition</var> 的 <a data-link-type="dfn" href="#viewtransition-outbound-post-capture-steps"
                        id="ref-for-viewtransition-outbound-post-capture-steps②">出站后捕获步骤</a>不为 null，则使用 null 运行
                    <var>transition</var> 的 <span
                        id="ref-for-viewtransition-outbound-post-capture-steps③">出站后捕获步骤</span>。
                </p>
        </ol>
        <p class="note" role="note"><span class="marker">注：</span>这是以猴子补丁的方式编写的，一旦 L1 规范毕业，将被合并到算法中。</p>
    </div>
    <h4 class="heading settled" data-level="9.4.5" id="cross-doc-after-capture"><span class="secno">9.4.5. </span><span
            class="content">捕获旧状态后继续跨文档视图转换</span><a class="self-link" href="#cross-doc-after-capture"></a></h4>
    <div class="algorithm" data-algorithm="additional transition operation">
        将以下步骤前置到给定 <code
            class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document②②">Document</a></code>
        <var>document</var> 的<a data-link-type="dfn"
            href="https://www.w3.org/TR/css-view-transitions-1/#perform-pending-transition-operations"
            id="ref-for-perform-pending-transition-operations①">执行待处理转换操作</a>算法：
        <ol>
            <li data-md>
                <p>如果 <var>document</var> 的 <a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-view-transitions-1/#document-active-view-transition"
                        id="ref-for-document-active-view-transition①③">活动视图转换</a>不为 null 且其 <a data-link-type="dfn"
                        href="#viewtransition-outbound-post-capture-steps"
                        id="ref-for-viewtransition-outbound-post-capture-steps④">出站后捕获步骤</a>不为 null，则：</p>
                <ol>
                    <li data-md>
                        <p class="assertion">断言：<var>document</var> 的 <a data-link-type="dfn"
                                href="https://www.w3.org/TR/css-view-transitions-1/#document-active-view-transition"
                                id="ref-for-document-active-view-transition①④">活动视图转换</a>的 <a data-link-type="dfn"
                                href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition-phase"
                                id="ref-for-viewtransition-phase①">阶段</a>为 "<code>pending-capture</code>"。</p>
                    <li data-md>
                        <p>设 <var>viewTransitionParams</var> 为 null；</p>
                    <li data-md>
                        <p>将 <var>document</var> 的 <a data-link-type="dfn"
                                href="https://www.w3.org/TR/css-view-transitions-1/#document-rendering-suppression-for-view-transitions"
                                id="ref-for-document-rendering-suppression-for-view-transitions">视图转换的渲染抑制</a>设置为 true。
                        </p>
                        <p class="issue" id="issue-ca114a78"><a class="self-link" href="#issue-ca114a78"></a>虽然 <a
                                data-link-type="dfn"
                                href="https://www.w3.org/TR/css-view-transitions-1/#capture-the-old-state"
                                id="ref-for-capture-the-old-state①">捕获旧状态</a>在这里显示为同步步骤，但实际上它是异步步骤，
                            因为将元素渲染到图像中无法同步完成。这在 L1 规范中应该更明确。</p>
                    <li data-md>
                        <p>为 <var>transition</var> <a data-link-type="dfn"
                                href="https://www.w3.org/TR/css-view-transitions-1/#capture-the-old-state"
                                id="ref-for-capture-the-old-state②">捕获旧状态</a>。
                        </p>
                    <li data-md>
                        <p>如果成功，则将 <var>viewTransitionParams</var> 设置为新的 <a data-link-type="dfn"
                                href="#view-transition-params" id="ref-for-view-transition-params③">视图转换参数</a>，其 <a
                                data-link-type="dfn" href="#view-transition-params-named-elements"
                                id="ref-for-view-transition-params-named-elements">命名元素</a>是 <var>transition</var> 的 <a
                                data-link-type="dfn"
                                href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition-named-elements"
                                id="ref-for-viewtransition-named-elements①">命名元素</a>的<a data-link-type="dfn"
                                href="https://infra.spec.whatwg.org/#map-clone" id="ref-for-map-clone">克隆</a>，
                            其 <a data-link-type="dfn"
                                href="#view-transition-params-initial-snapshot-containing-block-size"
                                id="ref-for-view-transition-params-initial-snapshot-containing-block-size">初始快照包含块大小</a>是
                            <var>transition</var> 的 <a data-link-type="dfn"
                                href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition-initial-snapshot-containing-block-size"
                                id="ref-for-viewtransition-initial-snapshot-containing-block-size">初始快照包含块大小</a>。
                        </p>
                    <li data-md>
                        <p>将 <var>document</var> 的 <a data-link-type="dfn"
                                href="https://www.w3.org/TR/css-view-transitions-1/#document-rendering-suppression-for-view-transitions"
                                id="ref-for-document-rendering-suppression-for-view-transitions①">视图转换的渲染抑制</a>设置为
                            false。</p>
                    <li data-md>
                        <p>使用 <var>viewTransitionParams</var> 调用 <var>transition</var> 的 <a data-link-type="dfn"
                                href="#viewtransition-outbound-post-capture-steps"
                                id="ref-for-viewtransition-outbound-post-capture-steps⑤">出站后捕获步骤</a>。</p>
                </ol>
        </ol>
        <p class="note" role="note"><span class="marker">注：</span>这是以猴子补丁的方式编写的，一旦 L1 规范毕业，将被合并到算法中。</p>
    </div>
    <h3 class="heading settled" data-level="9.5" id="access-view-transition-in-new-doc"><span class="secno">9.5.
        </span><span class="content">在新 <code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document②③">Document</a></code>
            中激活视图转换</span><a class="self-link" href="#access-view-transition-in-new-doc"></a></h3>
    <div class="algorithm" data-algorithm="resolve inbound cross-document view-transition">
        要为 <code
            class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document②④">Document</a></code>
        <var>document</var> <dfn data-dfn-type="dfn" data-export
            id="resolve-inbound-cross-document-view-transition">解析入站跨文档视图转换<a class="self-link"
                href="#resolve-inbound-cross-document-view-transition"></a></dfn>：
        <ol>
            <li data-md>
                <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert②">断言</a>：
                    <var>document</var> 是<a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active"
                        id="ref-for-fully-active">完全活动的</a>。
                </p>
            <li data-md>
                <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert③">断言</a>：
                    <var>document</var> <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#has-been-revealed"
                        id="ref-for-has-been-revealed①">已被显示</a>为 true。
                </p>
            <li data-md>
                <p>为 <var>document</var> <a data-link-type="dfn"
                        href="#update-the-opt-in-state-for-outbound-transitions"
                        id="ref-for-update-the-opt-in-state-for-outbound-transitions①">更新出站转换的选择加入状态</a>。</p>
            <li data-md>
                <p>设 <var>inboundViewTransitionParams</var> 为 <var>document</var> 的 <a data-link-type="dfn"
                        href="#document-inbound-view-transition-params"
                        id="ref-for-document-inbound-view-transition-params④">入站视图转换参数</a>。</p>
            <li data-md>
                <p>如果 <var>inboundViewTransitionParams</var> 为 null，则返回 null。</p>
            <li data-md>
                <p>将 <var>document</var> 的 <a data-link-type="dfn" href="#document-inbound-view-transition-params"
                        id="ref-for-document-inbound-view-transition-params⑤">入站视图转换参数</a>设置为 null。</p>
            <li data-md>
                <p>如果 <var>document</var> 的 <a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-view-transitions-1/#document-active-view-transition"
                        id="ref-for-document-active-view-transition①⑤">活动视图转换</a>不为 null，则返回 null。</p>
                <p class="note" role="note"><span class="marker">注：</span>这意味着在显示文档之前启动同文档转换将取消待处理的跨文档转换。</p>
            <li data-md>
                <p>为 <var>document</var> <a data-link-type="dfn" href="#resolve-view-transition-rule"
                        id="ref-for-resolve-view-transition-rule②">解析 @view-transition 规则</a>，设
                    <var>resolvedRule</var> 为结果。
                </p>
            <li data-md>
                <p>如果 <var>resolvedRule</var> 为"<code>跳过转换</code>"，则返回 null。</p>
            <li data-md>
                <p>设 <var>transition</var> 为 <var>document</var> 的 <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm"
                        id="ref-for-concept-relevant-realm③">相关领域</a>中的新 <code
                        class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition" id="ref-for-viewtransition①⑧">ViewTransition</a></code>，
                    其 <a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition-named-elements"
                        id="ref-for-viewtransition-named-elements②">命名元素</a>是
                    <var>inboundViewTransitionParams</var> 的 <a data-link-type="dfn"
                        href="#view-transition-params-named-elements"
                        id="ref-for-view-transition-params-named-elements①">命名元素</a>，
                    <a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition-initial-snapshot-containing-block-size"
                        id="ref-for-viewtransition-initial-snapshot-containing-block-size①">初始快照包含块大小</a>是
                    <var>inboundViewTransitionParams</var> 的 <a data-link-type="dfn"
                        href="#view-transition-params-initial-snapshot-containing-block-size"
                        id="ref-for-view-transition-params-initial-snapshot-containing-block-size①">初始快照包含块大小</a>。
                </p>
            <li data-md>
                <p>将 <var>document</var> 的 <a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-view-transitions-1/#document-active-view-transition"
                        id="ref-for-document-active-view-transition①⑥">活动视图转换</a>设置为 <var>transition</var>。
                </p>
            <li data-md>
                <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve">解析</a>
                    <var>transition</var> 的 <a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition-update-callback-done-promise"
                        id="ref-for-viewtransition-update-callback-done-promise">更新回调完成承诺</a>为 undefined。
                </p>
            <li data-md>
                <p>将 <var>transition</var> 的 <a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition-phase"
                        id="ref-for-viewtransition-phase②">阶段</a>设置为"<code>update-callback-called</code>"。</p>
            <li data-md>
                <p>将 <var>transition</var> 的 <a data-link-type="dfn" href="#viewtransition-active-types"
                        id="ref-for-viewtransition-active-types⑨">活动类型</a>设置为 <var>resolvedRule</var>。</p>
            <li data-md>
                <p>返回 <var>transition</var>。</p>
        </ol>
    </div>
    <h3 class="heading settled" data-level="9.6" id="vt-class-algorithms"><span class="secno">9.6. </span><span
            class="content">捕获 <a class="property css" data-link-type="property" href="#propdef-view-transition-class"
                id="ref-for-propdef-view-transition-class⑦">view-transition-class</a></span><a class="self-link"
            href="#vt-class-algorithms"></a></h3>
    <div class="algorithm" data-algorithm="additional capture steps">
        当为元素捕获新旧状态时，给定 <a data-link-type="dfn" href="https://www.w3.org/TR/css-view-transitions-1/#captured-element"
            id="ref-for-captured-element③">捕获的元素</a> <var>capture</var> 和 <a data-link-type="dfn"
            href="https://drafts.csswg.org/css2/#element" id="ref-for-element">元素</a> <var>element</var>，执行以下步骤：
        <ol>
            <li data-md>
                <p>如果 <var>element</var> 的 <a class="property css" data-link-type="property"
                        href="#propdef-view-transition-class"
                        id="ref-for-propdef-view-transition-class⑧">view-transition-class</a> 的 <a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-cascade-5/#computed-value" id="ref-for-computed-value⑤">计算值</a>与
                    <var>element</var> 的 <a data-link-type="dfn"
                        href="https://dom.spec.whatwg.org/#concept-node-document"
                        id="ref-for-concept-node-document③">节点文档</a>关联，则将 <var>capture</var> 的 <a data-link-type="dfn"
                        href="#captured-element-class-list" id="ref-for-captured-element-class-list①">类列表</a>设置为该计算值。
                </p>
        </ol>
        <p class="note" role="note"><span class="marker">注：</span>这是以猴子补丁的方式编写的，一旦 L1 规范毕业，将被合并到算法中。</p>
    </div>
    <h3 class="heading settled" data-level="9.7" id="vt-group-algorithm"><span class="secno">9.7. </span><span
            class="content">捕获和应用 <a class="property css" data-link-type="property"
                href="#propdef-view-transition-group"
                id="ref-for-propdef-view-transition-group④">view-transition-group</a></span><a class="self-link"
            href="#vt-group-algorithm"></a></h3>
    <h4 class="heading settled" data-level="9.7.1" id="vt-group-value-resolve"><span class="secno">9.7.1. </span><span
            class="content">解析 <a class="property css" data-link-type="property" href="#propdef-view-transition-group"
                id="ref-for-propdef-view-transition-group⑤">view-transition-group</a> 值</span><a class="self-link"
            href="#vt-group-value-resolve"></a></h4>
    <div class="algorithm" data-algorithm="resolve the document-scoped view-transition-group">
        要获取 <code
            class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element①">Element</a></code>
        <var>element</var> 的 <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
            id="document-scoped-view-transition-group">文档范围的视图转换组</dfn>，执行以下步骤：
        <ol>
            <li data-md>
                <p>设 <var>computedGroup</var> 为元素的 <a class="property css" data-link-type="property"
                        href="#propdef-view-transition-group"
                        id="ref-for-propdef-view-transition-group⑥">view-transition-group</a> 属性的 <a
                        data-link-type="dfn" href="https://www.w3.org/TR/css-cascade-5/#computed-value"
                        id="ref-for-computed-value⑥">计算值</a>。</p>
            <li data-md>
                <p>如果 <var>computedGroup</var> 与 <var>element</var> 的 <a data-link-type="dfn"
                        href="https://dom.spec.whatwg.org/#concept-node-document"
                        id="ref-for-concept-node-document④">节点文档</a>关联，则返回 <var>computedGroup</var>。</p>
            <li data-md>
                <p>返回 <a class="css" data-link-type="maybe" href="#valdef-view-transition-group-normal"
                        id="ref-for-valdef-view-transition-group-normal">normal</a>。</p>
        </ol>
    </div>
    <h4 class="heading settled" data-level="9.7.2" id="vt-containing-group-name-resolve"><span class="secno">9.7.2.
        </span><span class="content">解析包含组名称</span><a class="self-link" href="#vt-containing-group-name-resolve"></a>
    </h4>
    <div class="algorithm" data-algorithm="resolve nearest containing group name">
        <p>要解析 <code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element②">Element</a></code>
            <var>element</var> 的 <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="nearest-containing-group-name">最近包含组名称</dfn>，给定 <code
                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition" id="ref-for-viewtransition①⑨">ViewTransition</a></code>
            <var>viewTransition</var>，执行以下步骤：
        </p>
        <ol>
            <li data-md>
                <p class="assertion">断言：<var>element</var> 参与 <var>viewTransition</var>。</p>
            <li data-md>
                <p>设 <var>ancestorGroup</var> 为 <var>element</var> 的最近的 <a data-link-type="dfn"
                        href="https://drafts.csswg.org/css-scoping-1/#flat-tree" id="ref-for-flat-tree">扁平树</a> <a
                        data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-tree-ancestor"
                        id="ref-for-concept-tree-ancestor">祖先</a>，它参与 <var>viewTransition</var>
                    并且其 <a data-link-type="dfn" href="#document-scoped-view-transition-group"
                        id="ref-for-document-scoped-view-transition-group">文档范围的视图转换组</a>不是
                    <a class="css" data-link-type="maybe" href="#valdef-view-transition-group-normal"
                        id="ref-for-valdef-view-transition-group-normal①">normal</a>。
                </p>
            <li data-md>
                <p>如果 <var>ancestorGroup</var> 存在，则返回 <var>ancestorGroup</var> 的 <a data-link-type="dfn"
                        href="https://drafts.csswg.org/css-view-transitions-1/#document-scoped-view-transition-name"
                        id="ref-for-document-scoped-view-transition-name">文档范围的视图转换名称</a>。</p>
            <li data-md>
                <p>返回 <a class="css" data-link-type="maybe"
                        href="https://www.w3.org/TR/css-view-transitions-1/#valdef-view-transition-name-none"
                        id="ref-for-valdef-view-transition-name-none①">none</a>。</p>
        </ol>
    </div>
    <h4 class="heading settled" data-level="9.7.3" id="vt-group-name-resolve"><span class="secno">9.7.3. </span><span
            class="content">解析组名称</span><a class="self-link" href="#vt-group-name-resolve"></a></h4>
    <div class="algorithm" data-algorithm="resolve used group name">
        要解析 <code
            class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element③">Element</a></code>
        <var>element</var> 的 <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
            id="used-group-name">已用组名称</dfn>，给定 <code
            class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition" id="ref-for-viewtransition②⓪">ViewTransition</a></code>
        <var>transition</var>，执行以下步骤：
        <ol>
            <li data-md>
                <p class="assertion">断言：<var>element</var> 参与 <var>transition</var>。</p>
            <li data-md>
                <p>设 <var>group</var> 为 <var>element</var> 的 <a data-link-type="dfn"
                        href="#document-scoped-view-transition-group"
                        id="ref-for-document-scoped-view-transition-group①">文档范围的视图转换组</a>。
                </p>
            <li data-md>
                <p>设 <var>containingGroupName</var> 为 <var>element</var> 的 <a data-link-type="dfn"
                        href="#nearest-containing-group-name" id="ref-for-nearest-containing-group-name">最近包含组名称</a>，给定
                    <var>transition</var>。
                </p>
            <li data-md>
                <p>根据 <var>group</var> 返回第一个匹配的语句：</p>
        </ol>
        <dl>
            <dt data-md><dfn class="dfn-paneled css" data-dfn-for="view-transition-group" data-dfn-type="value"
                    data-export id="valdef-view-transition-group-normal">normal</dfn>
            <dt data-md><dfn class="dfn-paneled css" data-dfn-for="view-transition-group" data-dfn-type="value"
                    data-export id="valdef-view-transition-group-contain">contain</dfn>
            <dd data-md>
                <p><var>containingGroupName</var>。</p>
                <p class="note" role="note"><span class="marker">注：</span>具有 <a class="css" data-link-type="maybe"
                        href="#valdef-view-transition-group-contain"
                        id="ref-for-valdef-view-transition-group-contain">contain</a> 的元素成为其后代的 <a data-link-type="dfn"
                        href="#nearest-containing-group-name" id="ref-for-nearest-containing-group-name①">最近包含组名称</a>。
                </p>
            <dt data-md><dfn class="css" data-dfn-for="view-transition-group" data-dfn-type="value" data-export
                    id="valdef-view-transition-group-nearest">nearest<a class="self-link"
                        href="#valdef-view-transition-group-nearest"></a></dfn>
            <dd data-md>
                <p>参与 <var>transition</var> 的元素最近的 <a data-link-type="dfn"
                        href="https://drafts.csswg.org/css-scoping-1/#flat-tree" id="ref-for-flat-tree①">扁平树</a>
                    祖先的 <a data-link-type="dfn"
                        href="https://drafts.csswg.org/css-view-transitions-1/#document-scoped-view-transition-name"
                        id="ref-for-document-scoped-view-transition-name①">文档范围的视图转换名称</a>。</p>
            <dt data-md><dfn class="css" data-dfn-for="view-transition-group" data-dfn-type="value" data-export
                    id="valdef-view-transition-group-custom-ident"><a class="production css" data-link-type="type"
                        href="https://www.w3.org/TR/css-values-4/#identifier-value"
                        id="ref-for-identifier-value①⑤">&lt;custom-ident></a><a class="self-link"
                        href="#valdef-view-transition-group-custom-ident"></a></dfn>
            <dd data-md>
                <p>如果元素有一个 <a data-link-type="dfn" href="https://drafts.csswg.org/css-scoping-1/#flat-tree"
                        id="ref-for-flat-tree②">扁平树</a>
                    <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-tree-ancestor"
                        id="ref-for-concept-tree-ancestor①">祖先</a>，其 <a data-link-type="dfn"
                        href="https://drafts.csswg.org/css-view-transitions-1/#document-scoped-view-transition-name"
                        id="ref-for-document-scoped-view-transition-name②">文档范围的视图转换名称</a>是
                    <var>group</var> 并参与 <var>transition</var>，则返回 <var>group</var>；否则返回
                    <var>containingGroupName</var>。
                </p>
        </dl>
    </div>
    <h4 class="heading settled" data-level="9.7.4" id="vt-group-capture-old"><span class="secno">9.7.4. </span><span
            class="content">计算旧的 <a class="property css" data-link-type="property" href="#propdef-view-transition-group"
                id="ref-for-propdef-view-transition-group⑦">view-transition-group</a></span><a class="self-link"
            href="#vt-group-capture-old"></a></h4>
    <div class="algorithm" data-algorithm="additional old capture steps (group)">
        当<a href="https://www.w3.org/TR/css-view-transitions-1/#capture-old-state-algorithm">为元素捕获旧状态</a>时，给定 <a
            data-link-type="dfn" href="https://www.w3.org/TR/css-view-transitions-1/#captured-element"
            id="ref-for-captured-element④">捕获的元素</a> <var>capturedElement</var>、<code
            class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition" id="ref-for-viewtransition②①">ViewTransition</a></code>
        <var>transition</var> 和 <a data-link-type="dfn" href="https://drafts.csswg.org/css2/#element"
            id="ref-for-element④">元素</a> <var>element</var>，执行以下步骤：
        <ol>
            <li data-md>
                <p>将 <var>capturedElement</var> 的 <a data-link-type="dfn" href="#captured-element-containing-group-name"
                        id="ref-for-captured-element-containing-group-name">包含组名称</a>设置为
                    <var>element</var> 的 <a data-link-type="dfn" href="#used-group-name"
                        id="ref-for-used-group-name">已用组名称</a>，给定 <var>transition</var>。
                </p>
        </ol>
    </div>
    <h4 class="heading settled" data-level="9.7.5" id="vt-group-capture-new"><span class="secno">9.7.5. </span><span
            class="content">计算新的 <a class="property css" data-link-type="property" href="#propdef-view-transition-group"
                id="ref-for-propdef-view-transition-group⑧">view-transition-group</a></span><a class="self-link"
            href="#vt-group-capture-new"></a></h4>
    <div class="algorithm" data-algorithm="additional new capture steps (group)">
        当<a href="https://www.w3.org/TR/css-view-transitions-1/#capture-new-state-algorithm">为元素捕获新状态</a>时，给定 <a
            data-link-type="dfn" href="https://www.w3.org/TR/css-view-transitions-1/#captured-element"
            id="ref-for-captured-element⑤">捕获的元素</a> <var>capturedElement</var>、<code
            class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition" id="ref-for-viewtransition②②">ViewTransition</a></code>
        <var>transition</var> 和 <a data-link-type="dfn" href="https://drafts.csswg.org/css2/#element"
            id="ref-for-element⑤">元素</a> <var>element</var>，执行以下步骤：
        <ol>
            <li data-md>
                <p>将 <var>capturedElement</var> 的 <a data-link-type="dfn" href="#captured-element-containing-group-name"
                        id="ref-for-captured-element-containing-group-name①">包含组名称</a>设置为
                    <var>element</var> 的 <a data-link-type="dfn" href="#used-group-name"
                        id="ref-for-used-group-name①">已用组名称</a>，给定 <var>transition</var>。
                </p>
        </ol>
    </div>
    <h4 class="heading settled" data-level="9.7.6" id="vt-group-reparent"><span class="secno">9.7.6. </span><span
            class="content">将 <a class="css" data-link-type="maybe"
                href="https://www.w3.org/TR/css-view-transitions-1/#selectordef-view-transition-group"
                id="ref-for-selectordef-view-transition-group⑥">::view-transition-group()</a> 重新父级化到其指定的包含组</span><a
            class="self-link" href="#vt-group-reparent"></a></h4>
    <div class="algorithm" data-algorithm="additional pseudo-element setup steps (group)">
        当为 <a data-link-type="dfn" href="https://www.w3.org/TR/css-view-transitions-1/#captured-element"
            id="ref-for-captured-element⑥">捕获的元素</a> <var>capturedElement</var> <a
            href="https://www.w3.org/TR/css-view-transitions-1/#setup-transition-pseudo-elements-algorithm">设置转换伪元素</a>时，给定
        <var>transitionName</var> 和 <var>transition</var>：
        <ol>
            <li data-md>
                <p>设 <var>containingGroupName</var> 为 <var>capturedElement</var> 的 <a data-link-type="dfn"
                        href="#captured-element-containing-group-name"
                        id="ref-for-captured-element-containing-group-name②">包含组名称</a>。</p>
            <li data-md>
                <p>如果 <var>containingGroupName</var> 不为 null，则：</p>
                <ol>
                    <li data-md>
                        <p>设 <var>groupContainerElement</var> 为 <var>transition</var> 的 <a data-link-type="dfn"
                                href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition-named-elements"
                                id="ref-for-viewtransition-named-elements③">命名元素</a>[<var>containingGroupName</var>]。
                        </p>
                    <li data-md>
                        <p>设 <var>group</var> 为 <a class="css" data-link-type="maybe"
                                href="https://www.w3.org/TR/css-view-transitions-1/#selectordef-view-transition-group"
                                id="ref-for-selectordef-view-transition-group⑦">::view-transition-group()</a>，
                            其 <a data-link-type="dfn"
                                href="https://www.w3.org/TR/css-view-transitions-1/#view-transition-name"
                                id="ref-for-view-transition-name">视图转换名称</a>设置为
                            <var>transitionName</var>。
                        </p>
                    <li data-md>
                        <p>设 <var>parentGroup</var> 为 <a class="css" data-link-type="maybe"
                                href="https://www.w3.org/TR/css-view-transitions-1/#selectordef-view-transition-group"
                                id="ref-for-selectordef-view-transition-group⑧">::view-transition-group()</a>，
                            其 <a data-link-type="dfn"
                                href="https://www.w3.org/TR/css-view-transitions-1/#view-transition-name"
                                id="ref-for-view-transition-name①">视图转换名称</a>设置为
                            <var>containingGroupName</var>。
                        </p>
                    <li data-md>
                        <p>将 <var>group</var> 附加到 <var>parentGroup</var>。</p>
                    <li data-md>
                        <p>当设置动画关键帧时，给定 <var>transform</var>，<a data-link-type="dfn"
                                href="#adjust-the-nested-group-transform"
                                id="ref-for-adjust-the-nested-group-transform">调整嵌套组变换</a>为
                            <var>transform</var>，给定 <var>groupContainerElement</var> 的 <a data-link-type="dfn"
                                href="https://www.w3.org/TR/css-view-transitions-1/#captured-element-old-transform"
                                id="ref-for-captured-element-old-transform">旧变换</a>、
                            <var>groupContainerElement</var> 的 <a data-link-type="dfn"
                                href="https://www.w3.org/TR/css-view-transitions-1/#captured-element-old-width"
                                id="ref-for-captured-element-old-width">旧宽度</a>、
                            <var>groupContainerElement</var> 的 <a data-link-type="dfn"
                                href="https://www.w3.org/TR/css-view-transitions-1/#captured-element-old-height"
                                id="ref-for-captured-element-old-height">旧高度</a>，以及
                            <var>groupContainerElement</var> 的 <a data-link-type="dfn"
                                href="#captured-element-old-box-properties"
                                id="ref-for-captured-element-old-box-properties">旧盒属性</a>。
                        </p>
                </ol>
        </ol>
        <p class="note" role="note"><span class="marker">注：</span>当新旧组不匹配时如何解决这个问题有待确定。参见<a
                href="https://github.com/w3c/csswg-drafts/issues/10631">问题 10631</a>。</p>
    </div>
    <h4 class="heading settled" data-level="9.7.7" id="vt-group-transform-adjust"><span class="secno">9.7.7.
        </span><span class="content">调整组的 <a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-transforms-1/#propdef-transform"
                id="ref-for-propdef-transform①">transform</a> 相对于其包含的 <a class="css" data-link-type="maybe"
                href="https://www.w3.org/TR/css-view-transitions-1/#selectordef-view-transition-group"
                id="ref-for-selectordef-view-transition-group⑨">::view-transition-group()</a></span><a class="self-link"
            href="#vt-group-transform-adjust"></a></h4>
    <div class="algorithm" data-algorithm="additional pseudo-element style update steps (group)">
        当<a
            href="https://www.w3.org/TR/css-view-transitions-1/#style-transition-pseudo-elements-algorithm">更新转换伪元素的样式</a>时，在设置
        <a data-link-type="dfn" href="https://www.w3.org/TR/css-view-transitions-1/#captured-element-group-styles-rule"
            id="ref-for-captured-element-group-styles-rule">组样式规则</a>之前，给定 <a data-link-type="dfn"
            href="https://www.w3.org/TR/css-view-transitions-1/#captured-element"
            id="ref-for-captured-element⑦">捕获的元素</a> <var>capturedElement</var>、<var>transform</var> 和
        <code
            class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition" id="ref-for-viewtransition②③">ViewTransition</a></code>
        <var>transition</var>，执行以下步骤：
        <ol>
            <li data-md>
                <p>将 <var>capturedElement</var> 的 <a data-link-type="dfn"
                        href="#captured-element-transform-from-snapshot-containing-block"
                        id="ref-for-captured-element-transform-from-snapshot-containing-block">从快照包含块的变换</a>设置为
                    <var>transform</var>。
                </p>
            <li data-md>
                <p>如果 <var>capturedElement</var> 的 <a data-link-type="dfn"
                        href="#captured-element-containing-group-name"
                        id="ref-for-captured-element-containing-group-name③">包含组名称</a>不为 null，则：</p>
                <ol>
                    <li data-md>
                        <p>设 <var>groupContainerElement</var> 为 <var>transition</var> 的 <a data-link-type="dfn"
                                href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition-named-elements"
                                id="ref-for-viewtransition-named-elements④">命名
                                元素</a>[<var>capturedElement</var> 的 <a data-link-type="dfn"
                                href="#captured-element-containing-group-name"
                                id="ref-for-captured-element-containing-group-name④">包含组名称</a>]。</p>
                    <li data-md>
                        <p>如果 <var>capturedElement</var> 是 <a data-link-type="dfn"
                                href="https://dom.spec.whatwg.org/#document-element"
                                id="ref-for-document-element④">文档元素</a>，设 <var>containerRect</var> 为 <a
                                data-link-type="dfn"
                                href="https://www.w3.org/TR/css-view-transitions-1/#snapshot-containing-block"
                                id="ref-for-snapshot-containing-block①">快照包含块</a>；
                            否则，设为 <var>capturedElement</var> 的 <a data-link-type="dfn"
                                href="https://www.w3.org/TR/css-box-4/#border-box" id="ref-for-border-box">边框盒</a>。
                        </p>
                    <li data-md>
                        <p><a data-link-type="dfn" href="#adjust-the-nested-group-transform"
                                id="ref-for-adjust-the-nested-group-transform①">调整嵌套组变换</a>为
                            <var>transform</var>，给定 <var>groupContainerElement</var> 的 <a data-link-type="dfn"
                                href="#captured-element-transform-from-snapshot-containing-block"
                                id="ref-for-captured-element-transform-from-snapshot-containing-block①">从快照包含块的变换</a>、<var>containerRect</var>
                            的宽度、
                            <var>containerRect</var> 的高度，以及 <var>groupContainerElement</var> 的 <a data-link-type="dfn"
                                href="#captured-element-new-box-properties"
                                id="ref-for-captured-element-new-box-properties">新盒属性</a>。
                        </p>
                </ol>
        </ol>
    </div>
    <p></p>
    <h3 class="heading settled" data-level="9.8" id="layered-capture-algorithms"><span class="secno">9.8. </span><span
            class="content">捕获分层 CSS 属性</span><a class="self-link" href="#layered-capture-algorithms"></a></h3>
    <h4 class="heading settled" data-level="9.8.1" id="layered-capture-compute-style"><span class="secno">9.8.1.
        </span><span class="content">计算分层捕获样式</span><a class="self-link" href="#layered-capture-compute-style"></a></h4>
    <div class="algorithm" data-algorithm="compute layered capture style">
        要计算 <code
            class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element⑥">Element</a></code>
        <var>element</var> 的 <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
            id="layered-capture-style">分层捕获样式</dfn>：
        <ol>
            <li data-md>
                <p>设 <var>propertiesToCapture</var> 为与 <a data-link-type="dfn" href="#layered-capture-properties"
                        id="ref-for-layered-capture-properties">分层捕获属性</a>对应的新 <a data-link-type="dfn"
                        href="https://infra.spec.whatwg.org/#list" id="ref-for-list②">列表</a>。</p>
            <li data-md>
                <p class="issue" id="issue-d24249d6"><a class="self-link" href="#issue-d24249d6"></a>规定 <a
                        class="property css" data-link-type="property"
                        href="https://www.w3.org/TR/css-overflow-3/#propdef-overflow"
                        id="ref-for-propdef-overflow②">overflow</a> 和包含的行为。参见<a
                        href="https://github.com/w3c/csswg-drafts/issues/11079">问题 11079</a>。</p>
            <li data-md>
                <p>设 <var>styles</var> 为 « »。</p>
            <li data-md>
                <p>对于 <var>propertiesToCapture</var> 中的每个 <var>property</var>，<a data-link-type="dfn"
                        href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append">附加</a>以下各项的 <a
                        data-link-type="dfn" href="https://infra.spec.whatwg.org/#string-concatenate"
                        id="ref-for-string-concatenate">连接</a>：« <var>property</var>、<code>":"</code>、
                    <var>element</var> 的 <var>property</var> 的 <a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-cascade-5/#computed-value"
                        id="ref-for-computed-value⑦">计算值</a>、<code>";"</code> » 到 <var>styles</var>。
                </p>
            <li data-md>
                <p>返回 <var>styles</var> 的 <a data-link-type="dfn"
                        href="https://infra.spec.whatwg.org/#string-concatenate"
                        id="ref-for-string-concatenate①">连接</a>。</p>
        </ol>
    </div>
    <div class="algorithm" data-algorithm="compute layered capture geometry">要计算 <code
            class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element⑦">Element</a></code>
        <var>element</var> 的 <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
            id="layered-capture-geometry">分层捕获几何</dfn>，返回一个新的 <a data-link-type="dfn" href="#layered-box-properties"
            id="ref-for-layered-box-properties①">分层盒属性</a>，
        其 <a data-link-type="dfn" href="#layered-box-properties-box-sizing"
            id="ref-for-layered-box-properties-box-sizing">盒模型</a>是 <var>element</var> 的 <a data-link-type="dfn"
            href="https://www.w3.org/TR/css-cascade-5/#computed-value" id="ref-for-computed-value⑧">计算的</a> <a
            class="property css" data-link-type="property" href="https://www.w3.org/TR/css-sizing-3/#propdef-box-sizing"
            id="ref-for-propdef-box-sizing①">box-sizing</a>，<a data-link-type="dfn"
            href="#layered-box-properties-padding-box" id="ref-for-layered-box-properties-padding-box">内边距盒</a>
        是 <var>element</var> 的 <a data-link-type="dfn" href="https://www.w3.org/TR/css-box-4/#padding-box"
            id="ref-for-padding-box">内边距盒</a>，
        其 <a data-link-type="dfn" href="#layered-box-properties-content-box"
            id="ref-for-layered-box-properties-content-box">内容盒</a>是 <var>element</var> 的 <a data-link-type="dfn"
            href="https://www.w3.org/TR/css-box-4/#content-box" id="ref-for-content-box">内容盒</a>。
    </div>
    <p>要计算给定 <var>element</var> 的 <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
            id="default-group-size">默认组大小</dfn>，如果
        <var>element</var> 的 <a data-link-type="dfn" href="https://www.w3.org/TR/css-cascade-5/#computed-value"
            id="ref-for-computed-value⑨">计算的</a> <a class="property css" data-link-type="property"
            href="https://www.w3.org/TR/css-sizing-3/#propdef-box-sizing"
            id="ref-for-propdef-box-sizing②">box-sizing</a> 是 <a class="css" data-link-type="maybe"
            href="https://www.w3.org/TR/css-sizing-3/#valdef-box-sizing-content-box"
            id="ref-for-valdef-box-sizing-content-box①">content-box</a>，则返回 <var>element</var> 的 <a data-link-type="dfn"
            href="https://www.w3.org/TR/css-box-4/#content-box" id="ref-for-content-box①">内容盒</a>的大小；否则返回
        <var>element</var> 的 <a data-link-type="dfn" href="https://www.w3.org/TR/css-box-4/#border-box"
            id="ref-for-border-box①">边框盒</a>的大小。
    </p>
    <h4 class="heading settled" data-level="9.8.2" id="capture-new-layered-props-algorithm"><span class="secno">9.8.2.
        </span><span class="content">捕获旧的分层属性</span><a class="self-link"
            href="#capture-new-layered-props-algorithm"></a></h4>
    <div class="algorithm" data-algorithm="additional old capture steps (layered)">
        当<a href="https://www.w3.org/TR/css-view-transitions-1/#capture-new-state-algorithm">为元素捕获旧状态</a>时，给定 <a
            data-link-type="dfn" href="https://www.w3.org/TR/css-view-transitions-1/#captured-element"
            id="ref-for-captured-element⑧">捕获的元素</a> <var>capturedElement</var> 和 <a data-link-type="dfn"
            href="https://drafts.csswg.org/css2/#element" id="ref-for-element⑧">元素</a>
        <var>element</var>，执行以下步骤：
        <ol>
            <li data-md>
                <p>将 <var>capturedElement</var> 的 <a data-link-type="dfn"
                        href="#captured-element-old-layered-capture-style"
                        id="ref-for-captured-element-old-layered-capture-style">旧分层捕获样式</a>设置为
                    <var>element</var> 的 <a data-link-type="dfn" href="#layered-capture-style"
                        id="ref-for-layered-capture-style">分层捕获样式</a>。
                </p>
            <li data-md>
                <p>将 <var>capturedElement</var> 的 <a data-link-type="dfn" href="#captured-element-old-box-properties"
                        id="ref-for-captured-element-old-box-properties①">旧盒属性</a>设置为 <var>element</var> 的
                    <a data-link-type="dfn" href="#layered-capture-geometry"
                        id="ref-for-layered-capture-geometry">分层捕获几何</a>。
                </p>
            <li data-md>
                <p>将 <var>capturedElement</var> 的（<a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-view-transitions-1/#captured-element-old-width"
                        id="ref-for-captured-element-old-width①">旧宽度</a>、<a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-view-transitions-1/#captured-element-old-height"
                        id="ref-for-captured-element-old-height①">旧高度</a>）设置为 <var>element</var> 的 <a
                        data-link-type="dfn" href="#default-group-size" id="ref-for-default-group-size">默认组大小</a>。</p>
        </ol>
    </div>
    <h4 class="heading settled" data-level="9.8.3" id="capture-image-size-algorithm"><span class="secno">9.8.3.
        </span><span class="content">图像捕获大小的调整</span><a class="self-link" href="#capture-image-size-algorithm"></a></h4>
    <div class="algorithm" data-algorithm="adjust image capture size (layered)">当 <a data-link-type="dfn"
            href="https://www.w3.org/TR/css-view-transitions-1/#capture-the-image"
            id="ref-for-capture-the-image">捕获图像</a>时，图像的 <a data-link-type="dfn"
            href="https://www.w3.org/TR/css-images-3/#natural-dimensions" id="ref-for-natural-dimensions">自然尺寸</a>将基于元素的
        <a data-link-type="dfn" href="https://www.w3.org/TR/css-box-4/#content-box"
            id="ref-for-content-box②">内容盒</a>的大小，而不是基于 <a data-link-type="dfn"
            href="https://www.w3.org/TR/css-box-4/#border-box" id="ref-for-border-box②">边框盒</a>。
    </div>
    <h4 class="heading settled" data-level="9.8.4" id="layered-capture-rendering"><span class="secno">9.8.4.
        </span><span class="content">使用分层捕获渲染快照</span><a class="self-link" href="#layered-capture-rendering"></a></h4>
    <p>当将元素捕获到快照中时，只绘制 <a data-link-type="dfn" href="https://drafts.csswg.org/css-contain-2/#element-contents"
            id="ref-for-element-contents">元素内容</a>，而不包括元素的效果和盒装饰。
        具体而言，元素的 <a class="property css" data-link-type="property"
            href="https://www.w3.org/TR/css-backgrounds-3/#propdef-background"
            id="ref-for-propdef-background①">background</a>、<a class="property css" data-link-type="property"
            href="https://www.w3.org/TR/css-backgrounds-3/#propdef-border" id="ref-for-propdef-border">border</a>、<a
            class="property css" data-link-type="property"
            href="https://www.w3.org/TR/css-backgrounds-3/#propdef-border-image"
            id="ref-for-propdef-border-image①">border-image</a>、<a class="property css" data-link-type="property"
            href="https://drafts.csswg.org/css-borders-4/#propdef-box-shadow"
            id="ref-for-propdef-box-shadow②">box-shadow</a> 和 <a class="property css" data-link-type="property"
            href="https://www.w3.org/TR/css-ui-4/#propdef-outline" id="ref-for-propdef-outline①">outline</a> 不被绘制，其 <a
            class="property css" data-link-type="property"
            href="https://drafts.csswg.org/css-borders-4/#propdef-border-radius"
            id="ref-for-propdef-border-radius②">border-radius</a>、<a class="property css" data-link-type="property"
            href="https://www.w3.org/TR/css-masking-1/#propdef-clip-path" id="ref-for-propdef-clip-path③">clip-path</a>、
        <a class="property css" data-link-type="property" href="https://www.w3.org/TR/filter-effects-1/#propdef-filter"
            id="ref-for-propdef-filter④">filter</a>、<a class="property css" data-link-type="property"
            href="https://www.w3.org/TR/css-masking-1/#propdef-mask" id="ref-for-propdef-mask②">mask</a> 和 <a
            class="property css" data-link-type="property" href="https://www.w3.org/TR/css-color-4/#propdef-opacity"
            id="ref-for-propdef-opacity③">opacity</a> 不被应用。
    </p>
    <h4 class="heading settled" data-level="9.8.5" id="vt-adjust-nested-group-transform"><span class="secno">9.8.5.
        </span><span class="content">调整嵌套组变换</span><a class="self-link" href="#vt-adjust-nested-group-transform"></a>
    </h4>
    要 <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="adjust-the-nested-group-transform">调整嵌套组变换</dfn>，给定
    <a data-link-type="dfn" href="https://www.w3.org/TR/geometry-1/#matrix" id="ref-for-matrix①">矩阵</a>
    <var>transform</var>、<span id="ref-for-matrix②">矩阵</span>
    <var>parentTransform</var>、<var>borderBoxWidth</var>、<var>borderBoxHeight</var> 和 <a data-link-type="dfn"
        href="#layered-box-properties" id="ref-for-layered-box-properties②">分层盒属性</a>
    <var>boxProperties</var>，执行以下步骤：
    <ol>
        <li data-md>
            <p>将 <var>transform</var> <a data-link-type="dfn" href="https://www.w3.org/TR/geometry-1/#multiply"
                    id="ref-for-multiply">乘以</a> <var>parentTransform</var> 的逆矩阵。
            </p>
        <li data-md>
            <p>设 (left, top) 为基于 <var>boxProperties</var> 的 <a data-link-type="dfn"
                    href="#layered-box-properties-padding-box"
                    id="ref-for-layered-box-properties-padding-box①">内边距盒</a>在 (<var>borderBoxWidth</var>,
                <var>borderBoxHeight</var>) 内的边框边缘。
            </p>
        <li data-md>
            <p>将 <var>transform</var> 平移 (-left, -top)。</p>
            <p class="note" role="note"><span class="marker">注：</span>这些操作确保此嵌套组的默认位置相当于原始元素的位置，因为默认情况下嵌套的
                ':view-transition-group' 将相对于父元素的 <a data-link-type="dfn"
                    href="https://www.w3.org/TR/css-box-4/#padding-edge" id="ref-for-padding-edge">内边距边缘</a>定位。</p>
    </ol>
    <h4 class="heading settled" data-level="9.8.6" id="vt-layered-capture-apply-keyframes"><span class="secno">9.8.6.
        </span><span class="content">将旧的分层捕获属性应用到 <a class="css" data-link-type="maybe"
                href="https://www.w3.org/TR/css-view-transitions-1/#selectordef-view-transition-group"
                id="ref-for-selectordef-view-transition-group①⓪">::view-transition-group()</a> 关键帧</span><a
            class="self-link" href="#vt-layered-capture-apply-keyframes"></a></h4>
    <div class="algorithm" data-algorithm="additional pseudo-element setup steps (layered capture keyframes)">
        当为 <a data-link-type="dfn" href="https://www.w3.org/TR/css-view-transitions-1/#captured-element"
            id="ref-for-captured-element⑨">捕获的元素</a> <var>capturedElement</var> <a
            href="https://www.w3.org/TR/css-view-transitions-1/#setup-transition-pseudo-elements-algorithm">设置转换伪元素</a>时，给定
        <var>transitionName</var>：
        <ol>
            <li data-md>
                <p>设 <var>keyframesName</var> 为 «
                    <code>-ua-view-transition-group-anim-</code>、<var>transitionName</var> » 的 <a data-link-type="dfn"
                        href="https://infra.spec.whatwg.org/#string-concatenate"
                        id="ref-for-string-concatenate②">连接</a>。
                </p>
            <li data-md>
                <p>将 <var>capturedElement</var> 的 <a data-link-type="dfn"
                        href="#captured-element-old-layered-capture-style"
                        id="ref-for-captured-element-old-layered-capture-style①">旧分层捕获样式</a>附加到 <var>keyframesName</var>
                    的构造规则中。</p>
        </ol>
    </div>
    <h4 class="heading settled" data-level="9.8.7" id="vt-layered-capture-apply-new-state"><span class="secno">9.8.7.
        </span><span class="content">将新的分层捕获属性应用到 <a class="css" data-link-type="maybe"
                href="https://www.w3.org/TR/css-view-transitions-1/#selectordef-view-transition-group"
                id="ref-for-selectordef-view-transition-group①①">::view-transition-group()</a></span><a
            class="self-link" href="#vt-layered-capture-apply-new-state"></a></h4>
    <div class="algorithm" data-algorithm="additional pseudo-element style update steps (layered capture new state)">
        当<a
            href="https://www.w3.org/TR/css-view-transitions-1/#style-transition-pseudo-elements-algorithm">更新转换伪元素的样式</a>时，在设置<a
            data-link-type="dfn" href="https://www.w3.org/TR/css-view-transitions-1/#captured-element-group-styles-rule"
            id="ref-for-captured-element-group-styles-rule①">组样式规则</a>之前执行以下步骤，给定 <var>transitionName</var>、
        <var>capturedElement</var>、<var>width</var>、<var>height</var> 和 <code
            class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element⑨">Element</a></code>
        <var>element</var>：
        <p class="note" role="note"><span class="marker">注：</span>这可能会改变 <var>width</var> 和
            <var>height</var>。
        </p>
        <ol>
            <li data-md>
                <p>设 <var>style</var> 为 <var>element</var> 的<a data-link-type="dfn" href="#layered-capture-style"
                        id="ref-for-layered-capture-style①">分层捕获样式</a>。</p>
            <li data-md>
                <p>将 <var>capturedElement</var> 的<a data-link-type="dfn" href="#captured-element-new-box-properties"
                        id="ref-for-captured-element-new-box-properties①">新盒属性</a>设置为 <var>element</var> 的
                    <a data-link-type="dfn" href="#layered-capture-properties"
                        id="ref-for-layered-capture-properties①">分层捕获属性</a>。
                </p>
            <li data-md>
                <p>将 (<var>width</var>, <var>height</var>) 设置为 <var>element</var> 的<a data-link-type="dfn"
                        href="#default-group-size" id="ref-for-default-group-size①">默认组大小</a>。</p>
            <li data-md>
                <p>将<a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string-concatenate"
                        id="ref-for-string-concatenate③">连接</a>的以下字符串追加到构造的用户代理样式表中：
                    <code>"::view-transition-group("</code>、<var>transitionName</var>、<code>") {"</code>、
                    <var>style</var>、<code>"}"</code>。
                </p>
            <li data-md>
                <p>设 (<var>oldContentWidth</var>, <var>oldContentHeight</var>) 为：如果 <var>capturedElement</var> 的<a
                        data-link-type="dfn" href="#captured-element-old-box-properties"
                        id="ref-for-captured-element-old-box-properties②">旧盒属性</a>为 null，则为 (<var>capturedElement</var>
                    的<a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-view-transitions-1/#captured-element-old-width"
                        id="ref-for-captured-element-old-width②">旧宽度</a>，<var>capturedElement</var> 的<a
                        data-link-type="dfn"
                        href="https://www.w3.org/TR/css-view-transitions-1/#captured-element-old-height"
                        id="ref-for-captured-element-old-height②">旧高度</a>)；否则为
                    <var>capturedElement</var> 的<span id="ref-for-captured-element-old-box-properties③">旧盒属性</span>的<a
                        data-link-type="dfn" href="#layered-box-properties-content-box"
                        id="ref-for-layered-box-properties-content-box①">内容盒</a>的大小。
                </p>
            <li data-md>
                <p>设 (<var>newContentWidth</var>, <var>newContentHeight</var>) 为：如果<a data-link-type="dfn"
                        href="#captured-element-new-box-properties"
                        id="ref-for-captured-element-new-box-properties②">新盒属性</a>为 null，则为 (<var>width</var>,
                    <var>height</var>)；否则为
                    <var>capturedElement</var> 的<span id="ref-for-captured-element-new-box-properties③">新盒属性</span>的<a
                        data-link-type="dfn" href="#layered-box-properties-content-box"
                        id="ref-for-layered-box-properties-content-box②">内容盒</a>的大小。
                </p>
            <li data-md>
                <p>将下一个字符串（替换变量后）追加到用户代理样式表中：</p>
                <pre class="highlight"><c- n>@keyframes</c-> -ua-view-transition-content-geometry-<var>transitionName</var> <c- p>{</c->
  from <c- p>{</c->
    <c- k>width</c-><c- p>:</c-> <var>oldContentWidth</var><c- p>;</c->
    <c- k>height</c-><c- p>:</c-> <var>oldContentHeight</var><c- p>;</c->
  <c- p>}</c->
<c- p>}</c->

:root:<c- nf>:view-transition-image-pair</c-><c- p>(</c-><var>transitionName</var><c- p>)</c-> <c- p>{</c->
  <c- k>position</c-><c- p>:</c-> relative<c- p>;</c->
  <c- k>inset</c-><c- p>:</c-> unset<c- p>;</c->
  <c- k>width</c-><c- p>:</c-> <var>newContentWidth</var><c- p>;</c->
  <c- k>height</c-><c- p>:</c-> <var>newContentHeight</var><c- p>;</c->
  <c- k>animation-name</c-><c- p>:</c-> -ua-view-transition-<var>transitionName</var><c- p>;</c->
  <c- k>animation-direction</c-><c- p>:</c-> inherit<c- p>;</c->
  <c- k>animation-timing-function</c-><c- p>:</c-> inherit<c- p>;</c->
  <c- k>animation-iteration-count</c-><c- p>:</c-> inherit<c- p>;</c->
  <c- k>animation-duration</c-><c- p>:</c-> inherit<c- p>;</c->
<c- p>}</c->
</pre>
        </ol>
        <p class="note" role="note"><span class="marker">注：</span>':view-transition-image-pair' 伪元素使用<a class="css"
                data-link-type="maybe" href="https://www.w3.org/TR/css-position-3/#valdef-position-relative"
                id="ref-for-valdef-position-relative">relative</a>定位，以便组的<a class="property css"
                data-link-type="property" href="https://www.w3.org/TR/css-box-4/#propdef-padding"
                id="ref-for-propdef-padding①">padding</a>能够生效。</p>
    </div>
    <h2 class="no-num heading settled" id="priv"><span class="content">隐私注意事项</span><a class="self-link"
            href="#priv"></a></h2>
    <p>本规范不引入新的隐私注意事项。</p>
    <h2 class="no-num heading settled" id="sec"><span class="content">安全注意事项</span><a class="self-link" href="#sec"></a>
    </h2>
    <p>为了防止跨源问题，目前跨文档视图转换只能在同源导航中启用。如<a
            href="https://github.com/WICG/view-transitions/issues/200">WICG/view-transitions#200</a>中讨论的，这仍然存在两个潜在威胁：
    </p>
    <ol>
        <li data-md>
            <p>两个文档中的<a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-cross-origin-isolated-capability"
                    id="ref-for-concept-settings-object-cross-origin-isolated-capability">跨源隔离能力</a>可能不同。
                这可能导致<span id="ref-for-concept-settings-object-cross-origin-isolated-capability①">跨源隔离</span>的<code
                    class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document②⑤">Document</a></code>
                能够读取非跨源隔离文档的图像数据。这在[[css-view-transitions-1#sec]中已经得到缓解，因为对于捕获的跨源iframe也适用相同的限制。</p>
        <li data-md>
            <p>同源导航仍可能通过跨源重定向发生，例如
                <code>https://example.com</code>链接到<code>https://auth-provider.com/</code>，然后重定向回
                <code>https://example.com/loggedin</code>。
            </p>
            <p>这可能导致（轻微的）情况，即跨源方将用户重定向到意外的第一方URL，导致意外的转换并模糊存在重定向的事实。
                为了缓解这种情况，如果<code
                    class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document②⑥">Document</a></code>
                <a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/dom.html#was-created-via-cross-origin-redirects"
                    id="ref-for-was-created-via-cross-origin-redirects①">是通过跨源重定向创建的</a>，目前视图转换会在导航时被禁用。
                请注意，当<code
                    class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document②⑦">Document</a></code>
                正在被<a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#reactivate-a-document"
                    id="ref-for-reactivate-a-document">重新激活</a>时，此检查不适用，因为在这种情况下跨源重定向已经发生。
            </p>
            <p class="note" role="note"><span class="marker">注：</span>这仅适用于服务器端重定向。客户端重定向，例如使用
                [^meta/http-equiv/refresh^]，等同于新的导航。</p>
        <li data-md>
            <p>此功能向CSS暴露了更多信息，因为到目前为止CSS不知道任何与导航相关的内容。
                这可能引起对第三方CSS安全性的担忧。然而，作为一般规则，第三方样式表首先应该来自可信来源，因为CSS可以通过多种方式了解文档或更改文档。</p>
    </ol>
    <p>详细讨论请参见<a href="https://github.com/w3c/csswg-drafts/issues/8684">Issue #8684</a>和<a
            href="https://github.com/WICG/view-transitions/issues/200">WICG/view-transitions#200</a>。</p>
    <h2 class="no-num non-normative heading settled" id="changes"><span class="content">附录 A. 变更</span><a
            class="self-link" href="#changes"></a></h2>
    <p>本附录为<em>信息性内容</em>。</p>
    <h3 class="heading settled" id="changes-since-2024-05-16"><span class="content">自<a
                href="https://www.w3.org/TR/2024/WD-css-view-transitions-2-20240516/">2024-05-16 工作草案</a>以来的变更
        </span><a class="self-link" href="#changes-since-2024-05-16"></a></h3>
    <ul>
        <li data-md>
            <p>分层捕获的第一步实现（<a href="https://github.com/w3c/csswg-drafts/issues/10585">#10585</a>）</p>
        <li data-md>
            <p>允许在通过跨源重定向创建的文档中进行转换（<a href="https://github.com/w3c/csswg-drafts/issues/11063">#11063</a>#11063）</p>
        <li data-md>
            <p>澄清一些嵌套细节（<a href="https://github.com/w3c/csswg-drafts/issues/10780">#10780</a>和
                <a href="https://github.com/w3c/csswg-drafts/issues/10633">#10633</a>）
            </p>
        <li data-md>
            <p>允许<code>auto</code>作为<a class="property css" data-link-type="property"
                    href="https://www.w3.org/TR/css-view-transitions-1/#propdef-view-transition-name"
                    id="ref-for-propdef-view-transition-name②⓪">view-transition-name</a>的关键字（<a
                    href="https://github.com/w3c/csswg-drafts/issues/8320">#8320</a>）</p>
        <li data-md>
            <p>澄清入站视图转换的超时行为（<a href="https://github.com/w3c/csswg-drafts/issues/10800">#10800</a>）</p>
        <li data-md>
            <p>当隐藏文档时，入站跨文档视图转换应该被跳过。（<a href="https://github.com/w3c/csswg-drafts/issues/9822">#9822</a>）</p>
        <li data-md>
            <p>将 UpdateCallback 重命名为更具体的名称。</p>
        <li data-md>
            <p>澄清 CSSViewTransitionRule 对无效/缺失导航描述符返回空字符串（<a
                    href="https://github.com/w3c/csswg-drafts/issues/10654">#10654</a>）</p>
        <li data-md>
            <p>嵌套视图转换的初始规范（<a href="https://github.com/w3c/csswg-drafts/issues/10334">#10334</a>）</p>
        <li data-md>
            <p><code>view-transition-class</code>是树范围名称（<a
                    href="https://github.com/w3c/csswg-drafts/issues/10529">#10529</a>）</p>
        <li data-md>
            <p>停止使用过时模式扩展 CSSRule（参见<a href="https://github.com/w3c/csswg-drafts/issues/10606">#10606</a>）</p>
    </ul>
    <h2 class="no-ref no-num heading settled" id="w3c-conformance"><span class="content">一致性</span><a class="self-link"
            href="#w3c-conformance"></a></h2>
    <h3 class="no-ref heading settled" id="w3c-conventions"><span class="content">文档约定</span><a class="self-link"
            href="#w3c-conventions"></a></h3>
    <p>一致性要求通过描述性断言和RFC 2119术语的组合来表达。在本文档的规范性部分中，关键词"MUST"、
        "MUST NOT"、"REQUIRED"、"SHALL"、"SHALL NOT"、"SHOULD"、"SHOULD NOT"、
        "RECOMMENDED"、"MAY"和"OPTIONAL"应按照RFC 2119中的描述进行解释。
        但是，为了可读性，这些词在本规范中不会全部以大写字母出现。</p>
    <p>本规范的所有文本都是规范性的，除了明确标记为非规范性的部分、示例和注释。<a data-link-type="biblio" href="#biblio-rfc2119"
            title="Key words for use in RFCs to Indicate Requirement Levels">[RFC2119]</a></p>
    <p>本规范中的示例用"例如"一词引入，或者用<code>class="example"</code>从规范性文本中分离出来，
        如下所示：</p>
    <div class="example" id="w3c-example">
        <a class="self-link" href="#w3c-example"></a>
        <p>这是一个信息性示例的例子。</p>
    </div>
    <p>信息性注释以"注"一词开始，并用<code>class="note"</code>从规范性文本中分离出来，如下所示：</p>
    <p class="note" role="note">注，这是一个信息性注释。</p>
    <p>建议是规范性部分，样式用于引起特别注意，并用<code>&lt;strong class="advisement"></code>从其他规范性文本中分离出来，如下所示：<strong
            class="advisement">用户代理必须提供可访问的替代方案。</strong></p>
    <h3 class="no-ref heading settled" id="w3c-conformance-classes"><span class="content">一致性类别</span><a
            class="self-link" href="#w3c-conformance-classes"></a></h3>
    <p>本规范的一致性定义了三个一致性类别：</p>
    <dl>
        <dt>样式表
        <dd>一个<a href="https://www.w3.org/TR/CSS21/conform.html#style-sheet">CSS样式表</a>。
        <dt>渲染器
        <dd>解释样式表语义并渲染使用它们的文档的<a href="https://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a>。
        <dt>创作工具
        <dd>编写样式表的<a href="https://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a>。
    </dl>
    <p>如果样式表中使用本模块中定义的语法的所有语句都根据通用CSS语法和本模块中定义的每个特性的单独语法有效，则该样式表符合本规范。</p>
    <p>如果渲染器除了按照适当规范定义的方式解释样式表外，还通过正确解析本规范定义的所有特性并相应地渲染文档来支持这些特性，则该渲染器符合本规范。但是，由于设备限制而无法正确渲染文档的UA并不会使该UA不符合要求。（例如，UA不需要在单色显示器上渲染颜色。）
    </p>
    <p>如果创作工具编写的样式表在语法上根据通用CSS语法和本模块中每个特性的单独语法都是正确的，并且满足本模块中描述的样式表的所有其他一致性要求，则该创作工具符合本规范。</p>
    <h3 class="no-ref heading settled" id="w3c-partial"><span class="content">部分实现</span><a class="self-link"
            href="#w3c-partial"></a></h3>
    <p>为了让作者能够利用向前兼容的解析规则来分配回退值，CSS渲染器<strong>必须</strong>将任何它们没有可用支持级别的@规则、属性、属性值、关键字和其他语法结构视为无效（并<a
            href="https://www.w3.org/TR/CSS21/conform.html#ignore">适当地忽略</a>）。特别是，用户代理<strong>不得</strong>选择性地忽略不支持的组件值并在单个多值属性声明中支持受支持的值：如果任何值被认为是无效的（不支持的值必须如此），CSS要求忽略整个声明。
    </p>
    <h4 class="heading settled" id="w3c-conform-future-proofing"><span class="content">不稳定和专有特性的实现</span><a
            class="self-link" href="#w3c-conform-future-proofing"></a></h4>
    <p>为了避免与未来稳定的CSS特性冲突，CSSWG建议<a href="https://www.w3.org/TR/CSS/#future-proofing">遵循最佳实践</a>来实现<a
            href="https://www.w3.org/TR/CSS/#unstable">不稳定</a>特性和CSS的<a
            href="https://www.w3.org/TR/CSS/#proprietary-extension">专有扩展</a>。</p>
    <h3 class="no-ref heading settled" id="w3c-testing"><span class="content">非实验性实现</span><a class="self-link"
            href="#w3c-testing"></a></h3>
    <p>一旦规范达到候选推荐标准阶段，非实验性实现就成为可能，实现者应该发布任何他们可以证明根据规范正确实现的CR级特性的无前缀实现。</p>
    <p>为了建立和维护CSS在各实现中的互操作性，CSS工作组要求非实验性CSS渲染器在发布任何CSS特性的无前缀实现之前，向W3C提交实现报告（如有必要，还要提交用于该实现报告的测试用例）。提交给W3C的测试用例需要接受CSS工作组的审查和修正。
    </p>
    <p>有关提交测试用例和实现报告的更多信息，可以从CSS工作组网站<a
            href="https://www.w3.org/Style/CSS/Test/">https://www.w3.org/Style/CSS/Test/</a>找到。
        问题应直接发送到<a href="https://lists.w3.org/Archives/Public/public-css-testsuite">public-css-testsuite@w3.org</a>邮件列表。
    </p>
    <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
    <h2 class="no-num no-ref heading settled" id="index"><span class="content">索引</span><a class="self-link"
            href="#index"></a></h2>
    <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">本规范定义的术语</span><a
            class="self-link" href="#index-defined-here"></a></h3>
    <ul class="index">
        <li><a href="#viewtransition-active-types">活动类型</a><span>，在§ 9.1.2中</span>
        <li><a href="#active-view-transition-pseudo">:active-view-transition</a><span>，在§ 3.3.1中</span>
        <li><a href="#active-view-transition-type-pseudo">:active-view-transition-type()</a><span>，在§ 3.3.2中</span>
        <li><a href="#adjust-the-nested-group-transform">调整嵌套组变换</a><span>，在§ 9.8.5中</span>
        <li>
            auto
            <ul>
                <li><a href="#view-transition-name-auto">view-transition-name的定义</a><span>，在§ 6.3中</span>
                <li><a href="#valdef-view-transition-navigation-auto">@view-transition/navigation的值</a><span>，
                        在§ 2.3.2中</span>
            </ul>
        <li><a href="#layered-box-properties-box-sizing">盒模型</a><span>，在§ 9.2.1中</span>
        <li><a href="#document-can-initiate-outbound-view-transition">可以启动出站视图转换</a><span>，
                在§ 9.1.1中</span>
        <li><a href="#captured-element-class-list">类列表</a><span>，在§ 9.2.1中</span>
        <li><a href="#valdef-view-transition-group-contain">contain</a><span>，在§ 9.7.3中</span>
        <li><a href="#captured-element-containing-group-name">包含组名称</a><span>，在§ 9.2.1中</span>
        <li><a href="#layered-box-properties-content-box">内容盒</a><span>，在§ 9.2.1中</span>
        <li><a href="#cssviewtransitionrule">CSSViewTransitionRule</a><span>，在§ 2.3.3中</span>
        <li><a href="#valdef-view-transition-group-custom-ident">&lt;custom-ident></a><span>，在§ 9.7.3中</span>
        <li><a href="#valdef-view-transition-class-custom-ident">&lt;custom-ident>+</a><span>，在§ 4.3中</span>
        <li><a href="#default-group-size">默认组大小</a><span>，在§ 9.8.1中</span>
        <li><a href="#document-scoped-view-transition-group">文档范围的视图转换组</a><span>，在
                § 9.7.1中</span>
        <li><a href="#document-inbound-view-transition-params">入站视图转换参数</a><span>，在
                § 9.1.1中</span>
        <li><a href="#view-transition-params-initial-snapshot-containing-block-size">初始快照包含块大小</a><span>，在§
                9.1.3中</span>
        <li><a href="#layered-box-properties">分层盒属性</a><span>，在§ 9.2.1中</span>
        <li><a href="#layered-capture-geometry">分层捕获几何</a><span>，在§ 9.8.1中</span>
        <li><a href="#layered-capture-properties">分层捕获属性</a><span>，在§ 8.2中</span>
        <li><a href="#layered-capture-style">分层捕获样式</a><span>，在§ 9.8.1中</span>
        <li><a href="#view-transition-params-named-elements">命名元素</a><span>，在§ 9.1.3中</span>
        <li>
            navigation
            <ul>
                <li><a href="#dom-cssviewtransitionrule-navigation">CSSViewTransitionRule的属性</a><span>，在
                        § 2.3.3中</span>
                <li><a href="#descdef-view-transition-navigation">@view-transition的描述符</a><span>，在
                        § 2.3.2中</span>
                <li><a href="#view-transition-navigation">@view-transition的定义</a><span>，在§ 2.3.2中</span>
            </ul>
        <li><a href="#navigation-can-trigger-a-cross-document-view-transition">导航可以触发跨文档视图转换吗？</a><span>，在§
                9.4.1中</span>
        <li><a href="#valdef-view-transition-group-nearest">nearest</a><span>，在§ 9.7.3中</span>
        <li><a href="#nearest-containing-group-name">最近的包含组名称</a><span>，在§ 9.7.2中</span>
        <li><a href="#captured-element-new-box-properties">新盒属性</a><span>，在§ 9.2.1中</span>
        <li>
            none
            <ul>
                <li><a href="#valdef-view-transition-navigation-none">@view-transition/navigation的值</a><span>，
                        在§ 2.3.2中</span>
                <li><a href="#valdef-view-transition-class-none">view-transition-class的值</a><span>，在
                        § 4.3中</span>
            </ul>
        <li><a href="#valdef-view-transition-group-normal">normal</a><span>，在§ 9.7.3中</span>
        <li><a href="#captured-element-old-box-properties">旧盒属性</a><span>，在§ 9.2.1中</span>
        <li><a href="#captured-element-old-layered-capture-style">旧分层捕获样式</a><span>，在§ 9.2.1中</span>
        <li><a href="#viewtransition-outbound-post-capture-steps">出站后捕获步骤</a><span>，在
                § 9.1.2中</span>
        <li><a href="#layered-box-properties-padding-box">内边距盒</a><span>，在§ 9.2.1中</span>
        <li><a href="#typedef-pt-class-selector">&lt;pt-class-selector></a><span>，在§ 4.4中</span>
        <li><a href="#typedef-pt-name-and-class-selector">&lt;pt-name-and-class-selector></a><span>，在§ 4.4中</span>
        <li><a href="#resolve-inbound-cross-document-view-transition">解析入站跨文档视图转换</a><span>，在§ 9.5中</span>
        <li><a href="#resolve-view-transition-rule">解析@view-transition规则</a><span>，在§ 9.3中</span>
        <li><a href="#setup-cross-document-view-transition">设置跨文档视图转换</a><span>，在
                § 9.4.2中</span>
        <li><a href="#dom-document-startviewtransition">startViewTransition()</a><span>，在§ 5中</span>
        <li><a href="#dom-document-startviewtransition">startViewTransition(callbackOptions)</a><span>，在§ 5中</span>
        <li><a href="#dictdef-startviewtransitionoptions">StartViewTransitionOptions</a><span>，在§ 5中</span>
        <li><a href="#captured-element-transform-from-snapshot-containing-block">从快照包含块的变换</a><span>，在§ 9.2.1中</span>
        <li>
            types
            <ul>
                <li><a href="#dom-cssviewtransitionrule-types">CSSViewTransitionRule的属性</a><span>，在
                        § 2.3.3中</span>
                <li><a href="#dom-viewtransition-types">ViewTransition的属性</a><span>，在§ 3.4中</span>
                <li><a href="#descdef-view-transition-types">@view-transition的描述符</a><span>，在§ 3.5中</span>
                <li><a href="#view-transition-types">@view-transition的定义</a><span>，在§ 3.5中</span>
                <li><a href="#dom-startviewtransitionoptions-types">StartViewTransitionOptions的字典成员</a><span>，在§
                        5中</span>
            </ul>
        <li><a href="#dom-startviewtransitionoptions-update">update</a><span>，在§ 5中</span>
        <li><a href="#update-the-opt-in-state-for-outbound-transitions">更新出站转换的选择加入状态</a><span>，在§ 9.4.3中</span>
        <li><a href="#used-group-name">已用组名称</a><span>，在§ 9.7.3中</span>
        <li><a href="#at-view-transition-rule">@view-transition</a><span>，在§ 2.3.1中</span>
        <li><a href="#propdef-view-transition-class">view-transition-class</a><span>，在§ 4.3中</span>
        <li><a href="#propdef-view-transition-group">view-transition-group</a><span>，在§ 7.3中</span>
        <li><a href="#view-transition-params">视图转换参数</a><span>，在§ 9.1.3中</span>
        <li><a href="#viewtransitiontypeset">ViewTransitionTypeSet</a><span>，在§ 3.4中</span>
    </ul>
    <aside class="dfn-panel" data-for="term-for-propdef-background">
        <a
            href="https://www.w3.org/TR/css-backgrounds-3/#propdef-background">https://www.w3.org/TR/css-backgrounds-3/#propdef-background</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-background">8.2. Table of captured CSS properties
                    {#layered-captured-css-properties}</a>
            <li><a href="#ref-for-propdef-background①">9.8.4. Render the snapshot with layered capture</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-border">
        <a
            href="https://www.w3.org/TR/css-backgrounds-3/#propdef-border">https://www.w3.org/TR/css-backgrounds-3/#propdef-border</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-border">9.8.4. Render the snapshot with layered capture</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-border-image">
        <a
            href="https://www.w3.org/TR/css-backgrounds-3/#propdef-border-image">https://www.w3.org/TR/css-backgrounds-3/#propdef-border-image</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-border-image">8.2. Table of captured CSS properties
                    {#layered-captured-css-properties}</a>
            <li><a href="#ref-for-propdef-border-image①">9.8.4. Render the snapshot with layered capture</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-border-bottom">
        <a
            href="https://drafts.csswg.org/css-borders-4/#propdef-border-bottom">https://drafts.csswg.org/css-borders-4/#propdef-border-bottom</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-border-bottom">8.2. Table of captured CSS properties
                    {#layered-captured-css-properties}</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-border-left">
        <a
            href="https://drafts.csswg.org/css-borders-4/#propdef-border-left">https://drafts.csswg.org/css-borders-4/#propdef-border-left</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-border-left">8.2. Table of captured CSS properties
                    {#layered-captured-css-properties}</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-border-radius">
        <a
            href="https://drafts.csswg.org/css-borders-4/#propdef-border-radius">https://drafts.csswg.org/css-borders-4/#propdef-border-radius</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-border-radius">7.1. Overview</a>
            <li><a href="#ref-for-propdef-border-radius①">8.2. Table of captured CSS properties
                    {#layered-captured-css-properties}</a>
            <li><a href="#ref-for-propdef-border-radius②">9.8.4. Render the snapshot with layered capture</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-border-right">
        <a
            href="https://drafts.csswg.org/css-borders-4/#propdef-border-right">https://drafts.csswg.org/css-borders-4/#propdef-border-right</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-border-right">8.2. Table of captured CSS properties
                    {#layered-captured-css-properties}</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-border-top">
        <a
            href="https://drafts.csswg.org/css-borders-4/#propdef-border-top">https://drafts.csswg.org/css-borders-4/#propdef-border-top</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-border-top">8.2. Table of captured CSS properties
                    {#layered-captured-css-properties}</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-box-shadow">
        <a
            href="https://drafts.csswg.org/css-borders-4/#propdef-box-shadow">https://drafts.csswg.org/css-borders-4/#propdef-box-shadow</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-box-shadow">8.1. Overview</a>
            <li><a href="#ref-for-propdef-box-shadow①">8.2. Table of captured CSS properties
                    {#layered-captured-css-properties}</a>
            <li><a href="#ref-for-propdef-box-shadow②">9.8.4. Render the snapshot with layered capture</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-border-box">
        <a href="https://www.w3.org/TR/css-box-4/#border-box">https://www.w3.org/TR/css-box-4/#border-box</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-border-box">9.7.7. Adjust the group’s transform to be relative to its containing
                    ::view-transition-group()</a>
            <li><a href="#ref-for-border-box①">9.8.1. Compute the layered-capture style</a>
            <li><a href="#ref-for-border-box②">9.8.3. Adjustment to image capture size</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-content-box">
        <a href="https://www.w3.org/TR/css-box-4/#content-box">https://www.w3.org/TR/css-box-4/#content-box</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-content-box">9.8.1. Compute the layered-capture style</a> <a
                    href="#ref-for-content-box①">(2)</a>
            <li><a href="#ref-for-content-box②">9.8.3. Adjustment to image capture size</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-padding">
        <a
            href="https://www.w3.org/TR/css-box-4/#propdef-padding">https://www.w3.org/TR/css-box-4/#propdef-padding</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-padding">8.2. Table of captured CSS properties
                    {#layered-captured-css-properties}</a>
            <li><a href="#ref-for-propdef-padding①">9.8.7. Apply the new layered-capture properties to
                    ::view-transition-group()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-padding-box">
        <a href="https://www.w3.org/TR/css-box-4/#padding-box">https://www.w3.org/TR/css-box-4/#padding-box</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-padding-box">9.8.1. Compute the layered-capture style</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-padding-edge">
        <a href="https://www.w3.org/TR/css-box-4/#padding-edge">https://www.w3.org/TR/css-box-4/#padding-edge</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-padding-edge">9.8.5. Adjust the nested group transform</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-computed-value">
        <a
            href="https://www.w3.org/TR/css-cascade-5/#computed-value">https://www.w3.org/TR/css-cascade-5/#computed-value</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-computed-value">6.3. Additions to view-transition-name</a>
            <li><a href="#ref-for-computed-value①">9.3. Resolving the @view-transition rule</a> <a
                    href="#ref-for-computed-value②">(2)</a> <a href="#ref-for-computed-value③">(3)</a> <a
                    href="#ref-for-computed-value④">(4)</a>
            <li><a href="#ref-for-computed-value⑤">9.6. Capturing the view-transition-class</a>
            <li><a href="#ref-for-computed-value⑥">9.7.1. Resolving the view-transition-group value</a>
            <li><a href="#ref-for-computed-value⑦">9.8.1. Compute the layered-capture style</a> <a
                    href="#ref-for-computed-value⑧">(2)</a> <a href="#ref-for-computed-value⑨">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-used-value">
        <a href="https://www.w3.org/TR/css-cascade-5/#used-value">https://www.w3.org/TR/css-cascade-5/#used-value</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-used-value">6.3. Additions to view-transition-name</a>
            <li><a href="#ref-for-used-value①">7.3. The view-transition-group property</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-opacity">
        <a
            href="https://www.w3.org/TR/css-color-4/#propdef-opacity">https://www.w3.org/TR/css-color-4/#propdef-opacity</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-opacity">7.1. Overview</a>
            <li><a href="#ref-for-propdef-opacity①">8.1. Overview</a>
            <li><a href="#ref-for-propdef-opacity②">8.2. Table of captured CSS properties
                    {#layered-captured-css-properties}</a>
            <li><a href="#ref-for-propdef-opacity③">9.8.4. Render the snapshot with layered capture</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-at-ruledef-media">
        <a
            href="https://www.w3.org/TR/css-conditional-3/#at-ruledef-media">https://www.w3.org/TR/css-conditional-3/#at-ruledef-media</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-at-ruledef-media">2.3.1. The @view-transition rule</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-at-ruledef-supports">
        <a
            href="https://www.w3.org/TR/css-conditional-3/#at-ruledef-supports">https://www.w3.org/TR/css-conditional-3/#at-ruledef-supports</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-at-ruledef-supports">2.3.1. The @view-transition rule</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-conditional-group-rule">
        <a
            href="https://www.w3.org/TR/css-conditional-3/#conditional-group-rule">https://www.w3.org/TR/css-conditional-3/#conditional-group-rule</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-conditional-group-rule">2.3.1. The @view-transition rule</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-element-contents">
        <a
            href="https://drafts.csswg.org/css-contain-2/#element-contents">https://drafts.csswg.org/css-contain-2/#element-contents</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-element-contents">9.8.4. Render the snapshot with layered capture</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-natural-dimensions">
        <a
            href="https://www.w3.org/TR/css-images-3/#natural-dimensions">https://www.w3.org/TR/css-images-3/#natural-dimensions</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-natural-dimensions">9.8.3. Adjustment to image capture size</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-clip-path">
        <a
            href="https://www.w3.org/TR/css-masking-1/#propdef-clip-path">https://www.w3.org/TR/css-masking-1/#propdef-clip-path</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-clip-path">7.1. Overview</a>
            <li><a href="#ref-for-propdef-clip-path①">8.1. Overview</a>
            <li><a href="#ref-for-propdef-clip-path②">8.2. Table of captured CSS properties
                    {#layered-captured-css-properties}</a>
            <li><a href="#ref-for-propdef-clip-path③">9.8.4. Render the snapshot with layered capture</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-mask">
        <a
            href="https://www.w3.org/TR/css-masking-1/#propdef-mask">https://www.w3.org/TR/css-masking-1/#propdef-mask</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-mask">8.1. Overview</a>
            <li><a href="#ref-for-propdef-mask①">8.2. Table of captured CSS properties
                    {#layered-captured-css-properties}</a>
            <li><a href="#ref-for-propdef-mask②">9.8.4. Render the snapshot with layered capture</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-mask-image">
        <a
            href="https://www.w3.org/TR/css-masking-1/#propdef-mask-image">https://www.w3.org/TR/css-masking-1/#propdef-mask-image</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-mask-image">7.1. Overview</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-overflow">
        <a
            href="https://www.w3.org/TR/css-overflow-3/#propdef-overflow">https://www.w3.org/TR/css-overflow-3/#propdef-overflow</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-overflow">7.1. Overview</a>
            <li><a href="#ref-for-propdef-overflow①">8.1. Overview</a>
            <li><a href="#ref-for-propdef-overflow②">9.8.1. Compute the layered-capture style</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-valdef-position-relative">
        <a
            href="https://www.w3.org/TR/css-position-3/#valdef-position-relative">https://www.w3.org/TR/css-position-3/#valdef-position-relative</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-valdef-position-relative">9.8.7. Apply the new layered-capture properties to
                    ::view-transition-group()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-flat-tree">
        <a
            href="https://drafts.csswg.org/css-scoping-1/#flat-tree">https://drafts.csswg.org/css-scoping-1/#flat-tree</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-flat-tree">9.7.2. Resolving the containing group name</a>
            <li><a href="#ref-for-flat-tree①">9.7.3. Resolving the group name</a> <a href="#ref-for-flat-tree②">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-css-tree-scoped-name">
        <a
            href="https://drafts.csswg.org/css-scoping-1/#css-tree-scoped-name">https://drafts.csswg.org/css-scoping-1/#css-tree-scoped-name</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-css-tree-scoped-name">4.3. The view-transition-class property</a>
            <li><a href="#ref-for-css-tree-scoped-name①">6.3. Additions to view-transition-name</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-selectordef-part">
        <a
            href="https://www.w3.org/TR/css-shadow-parts-1/#selectordef-part">https://www.w3.org/TR/css-shadow-parts-1/#selectordef-part</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-selectordef-part">6.3. Additions to view-transition-name</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-valdef-box-sizing-border-box">
        <a
            href="https://www.w3.org/TR/css-sizing-3/#valdef-box-sizing-border-box">https://www.w3.org/TR/css-sizing-3/#valdef-box-sizing-border-box</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-valdef-box-sizing-border-box">9.2.1. Captured elements extension</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-box-sizing">
        <a
            href="https://www.w3.org/TR/css-sizing-3/#propdef-box-sizing">https://www.w3.org/TR/css-sizing-3/#propdef-box-sizing</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-box-sizing">8.2. Table of captured CSS properties
                    {#layered-captured-css-properties}</a>
            <li><a href="#ref-for-propdef-box-sizing①">9.8.1. Compute the layered-capture style</a> <a
                    href="#ref-for-propdef-box-sizing②">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-valdef-box-sizing-content-box">
        <a
            href="https://www.w3.org/TR/css-sizing-3/#valdef-box-sizing-content-box">https://www.w3.org/TR/css-sizing-3/#valdef-box-sizing-content-box</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-valdef-box-sizing-content-box">9.2.1. Captured elements extension</a>
            <li><a href="#ref-for-valdef-box-sizing-content-box①">9.8.1. Compute the layered-capture style</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-typedef-declaration-list">
        <a
            href="https://www.w3.org/TR/css-syntax-3/#typedef-declaration-list">https://www.w3.org/TR/css-syntax-3/#typedef-declaration-list</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-typedef-declaration-list">2.3.1. The @view-transition rule</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-identity-transform-function">
        <a
            href="https://www.w3.org/TR/css-transforms-1/#identity-transform-function">https://www.w3.org/TR/css-transforms-1/#identity-transform-function</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-identity-transform-function">9.2.1. Captured elements extension</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-transform">
        <a
            href="https://www.w3.org/TR/css-transforms-1/#propdef-transform">https://www.w3.org/TR/css-transforms-1/#propdef-transform</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-transform">7.1. Overview</a>
            <li><a href="#ref-for-propdef-transform①">9.7.7. Adjust the group’s transform to be relative to its
                    containing ::view-transition-group()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-perspective">
        <a
            href="https://www.w3.org/TR/css-transforms-2/#propdef-perspective">https://www.w3.org/TR/css-transforms-2/#propdef-perspective</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-perspective">7.1. Overview</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-transform-style">
        <a
            href="https://www.w3.org/TR/css-transforms-2/#propdef-transform-style">https://www.w3.org/TR/css-transforms-2/#propdef-transform-style</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-transform-style">7.1. Overview</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-outline">
        <a href="https://www.w3.org/TR/css-ui-4/#propdef-outline">https://www.w3.org/TR/css-ui-4/#propdef-outline</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-outline">8.2. Table of captured CSS properties
                    {#layered-captured-css-properties}</a>
            <li><a href="#ref-for-propdef-outline①">9.8.4. Render the snapshot with layered capture</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-mult-comma">
        <a href="https://www.w3.org/TR/css-values-4/#mult-comma">https://www.w3.org/TR/css-values-4/#mult-comma</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-mult-comma">3.3.2. The :active-view-transition-type() pseudo-class</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-mult-one-plus">
        <a
            href="https://www.w3.org/TR/css-values-4/#mult-one-plus">https://www.w3.org/TR/css-values-4/#mult-one-plus</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-mult-one-plus">3.5. Activating the transition type for cross-document view
                    transitions</a>
            <li><a href="#ref-for-mult-one-plus①">4.3. The view-transition-class property</a>
            <li><a href="#ref-for-mult-one-plus②">4.4. Additions to named view transition pseudo-elements</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-identifier-value">
        <a
            href="https://www.w3.org/TR/css-values-4/#identifier-value">https://www.w3.org/TR/css-values-4/#identifier-value</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-identifier-value">3.3.2. The :active-view-transition-type() pseudo-class</a> <a
                    href="#ref-for-identifier-value①">(2)</a>
            <li><a href="#ref-for-identifier-value②">3.4. Changing the types of an ongoing view transition</a>
            <li><a href="#ref-for-identifier-value③">3.5. Activating the transition type for cross-document view
                    transitions</a>
            <li><a href="#ref-for-identifier-value④">4.3. The view-transition-class property</a> <a
                    href="#ref-for-identifier-value⑤">(2)</a> <a href="#ref-for-identifier-value⑥">(3)</a> <a
                    href="#ref-for-identifier-value⑦">(4)</a> <a href="#ref-for-identifier-value⑧">(5)</a>
            <li><a href="#ref-for-identifier-value⑨">4.4. Additions to named view transition pseudo-elements</a> <a
                    href="#ref-for-identifier-value①⓪">(2)</a> <a href="#ref-for-identifier-value①①">(3)</a> <a
                    href="#ref-for-identifier-value①②">(4)</a>
            <li><a href="#ref-for-identifier-value①③">6.3. Additions to view-transition-name</a>
            <li><a href="#ref-for-identifier-value①④">7.3. The view-transition-group property</a>
            <li><a href="#ref-for-identifier-value①⑤">9.7.3. Resolving the group name</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-mult-opt">
        <a href="https://www.w3.org/TR/css-values-4/#mult-opt">https://www.w3.org/TR/css-values-4/#mult-opt</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-mult-opt">4.4. Additions to named view transition pseudo-elements</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-comb-one">
        <a href="https://www.w3.org/TR/css-values-4/#comb-one">https://www.w3.org/TR/css-values-4/#comb-one</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-comb-one">2.3.2. The navigation descriptor</a>
            <li><a href="#ref-for-comb-one①">3.5. Activating the transition type for cross-document view
                    transitions</a>
            <li><a href="#ref-for-comb-one②">4.3. The view-transition-class property</a>
            <li><a href="#ref-for-comb-one③">4.4. Additions to named view transition pseudo-elements</a>
            <li><a href="#ref-for-comb-one④">7.3. The view-transition-group property</a> <a
                    href="#ref-for-comb-one⑤">(2)</a> <a href="#ref-for-comb-one⑥">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-selectordef-view-transition">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#selectordef-view-transition">https://www.w3.org/TR/css-view-transitions-1/#selectordef-view-transition</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-selectordef-view-transition">7.1. Overview</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-selectordef-view-transition-group">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#selectordef-view-transition-group">https://www.w3.org/TR/css-view-transitions-1/#selectordef-view-transition-group</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-selectordef-view-transition-group">4.3. The view-transition-class property</a>
            <li><a href="#ref-for-selectordef-view-transition-group①">6.3. Additions to view-transition-name</a>
            <li><a href="#ref-for-selectordef-view-transition-group②">7.1. Overview</a> <a
                    href="#ref-for-selectordef-view-transition-group③">(2)</a>
            <li><a href="#ref-for-selectordef-view-transition-group④">7.3. The view-transition-group property</a> <a
                    href="#ref-for-selectordef-view-transition-group⑤">(2)</a>
            <li><a href="#ref-for-selectordef-view-transition-group⑥">9.7.6. Reparent a ::view-transition-group() to
                    its
                    specified containing group</a> <a href="#ref-for-selectordef-view-transition-group⑦">(2)</a> <a
                    href="#ref-for-selectordef-view-transition-group⑧">(3)</a>
            <li><a href="#ref-for-selectordef-view-transition-group⑨">9.7.7. Adjust the group’s transform to be
                    relative
                    to its containing ::view-transition-group()</a>
            <li><a href="#ref-for-selectordef-view-transition-group①⓪">9.8.6. Apply the old layered-capture
                    properties
                    to ::view-transition-group() keyframes</a>
            <li><a href="#ref-for-selectordef-view-transition-group①①">9.8.7. Apply the new layered-capture
                    properties
                    to ::view-transition-group()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-selectordef-view-transition-image-pair">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#selectordef-view-transition-image-pair">https://www.w3.org/TR/css-view-transitions-1/#selectordef-view-transition-image-pair</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-selectordef-view-transition-image-pair">4.3. The view-transition-class
                    property</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-selectordef-view-transition-new">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#selectordef-view-transition-new">https://www.w3.org/TR/css-view-transitions-1/#selectordef-view-transition-new</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-selectordef-view-transition-new">4.3. The view-transition-class property</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-selectordef-view-transition-old">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#selectordef-view-transition-old">https://www.w3.org/TR/css-view-transitions-1/#selectordef-view-transition-old</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-selectordef-view-transition-old">4.3. The view-transition-class property</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-typedef-pt-name-selector">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#typedef-pt-name-selector">https://www.w3.org/TR/css-view-transitions-1/#typedef-pt-name-selector</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-typedef-pt-name-selector">4.4. Additions to named view transition
                    pseudo-elements</a>
                <a href="#ref-for-typedef-pt-name-selector①">(2)</a> <a
                    href="#ref-for-typedef-pt-name-selector②">(3)</a> <a
                    href="#ref-for-typedef-pt-name-selector③">(4)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-viewtransition">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition">https://www.w3.org/TR/css-view-transitions-1/#viewtransition</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-viewtransition">2.1.3. Customization</a> <a href="#ref-for-viewtransition①">(2)</a> <a
                    href="#ref-for-viewtransition②">(3)</a>
            <li><a href="#ref-for-viewtransition③">2.1.4. Lifecycle</a> <a href="#ref-for-viewtransition④">(2)</a>
                <a href="#ref-for-viewtransition⑤">(3)</a>
            <li><a href="#ref-for-viewtransition⑥">2.2. Examples</a>
            <li><a href="#ref-for-viewtransition⑦">2.3.1. The @view-transition rule</a>
            <li><a href="#ref-for-viewtransition⑧">3.1. Overview</a>
            <li><a href="#ref-for-viewtransition⑨">3.4. Changing the types of an ongoing view transition</a> <a
                    href="#ref-for-viewtransition①⓪">(2)</a>
            <li><a href="#ref-for-viewtransition①①">5. Extending document.startViewTransition()</a> <a
                    href="#ref-for-viewtransition①②">(2)</a>
            <li><a href="#ref-for-viewtransition①③">9.1.2. Additions to ViewTransition</a> <a
                    href="#ref-for-viewtransition①④">(2)</a>
            <li><a href="#ref-for-viewtransition①⑤">9.4.2. Setup the outbound transition when ready to swap
                    pages</a> <a href="#ref-for-viewtransition①⑥">(2)</a>
            <li><a href="#ref-for-viewtransition①⑦">9.4.4. Proceed with navigation if view transition is skipped</a>
            <li><a href="#ref-for-viewtransition①⑧">9.5. Activating the view transition in the new Document</a>
            <li><a href="#ref-for-viewtransition①⑨">9.7.2. Resolving the containing group name</a>
            <li><a href="#ref-for-viewtransition②⓪">9.7.3. Resolving the group name</a>
            <li><a href="#ref-for-viewtransition②①">9.7.4. Compute the old view-transition-group</a>
            <li><a href="#ref-for-viewtransition②②">9.7.5. Compute the new view-transition-group</a>
            <li><a href="#ref-for-viewtransition②③">9.7.7. Adjust the group’s transform to be relative to its
                    containing
                    ::view-transition-group()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-callbackdef-viewtransitionupdatecallback">
        <a
            href="https://drafts.csswg.org/css-view-transitions-1/#callbackdef-viewtransitionupdatecallback">https://drafts.csswg.org/css-view-transitions-1/#callbackdef-viewtransitionupdatecallback</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-callbackdef-viewtransitionupdatecallback">5. Extending
                    document.startViewTransition()</a> <a
                    href="#ref-for-callbackdef-viewtransitionupdatecallback①">(2)</a> <a
                    href="#ref-for-callbackdef-viewtransitionupdatecallback②">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-activate-view-transition">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#activate-view-transition">https://www.w3.org/TR/css-view-transitions-1/#activate-view-transition</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-activate-view-transition">2.1.4. Lifecycle</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-document-active-view-transition">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#document-active-view-transition">https://www.w3.org/TR/css-view-transitions-1/#document-active-view-transition</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-document-active-view-transition">1. Introduction</a>
            <li><a href="#ref-for-document-active-view-transition①">3.1. Overview</a> <a
                    href="#ref-for-document-active-view-transition②">(2)</a>
            <li><a href="#ref-for-document-active-view-transition③">3.3.1. The :active-view-transition
                    pseudo-class</a>
                <a href="#ref-for-document-active-view-transition④">(2)</a>
            <li><a href="#ref-for-document-active-view-transition⑤">3.3.2. The :active-view-transition-type()
                    pseudo-class</a> <a href="#ref-for-document-active-view-transition⑥">(2)</a>
            <li><a href="#ref-for-document-active-view-transition⑦">5. Extending document.startViewTransition()</a>
            <li><a href="#ref-for-document-active-view-transition⑧">6.3. Additions to view-transition-name</a>
            <li><a href="#ref-for-document-active-view-transition⑨">9.4.2. Setup the outbound transition when ready
                    to
                    swap pages</a> <a href="#ref-for-document-active-view-transition①⓪">(2)</a> <a
                    href="#ref-for-document-active-view-transition①①">(3)</a> <a
                    href="#ref-for-document-active-view-transition①②">(4)</a>
            <li><a href="#ref-for-document-active-view-transition①③">9.4.5. Proceed with cross-document view
                    transition
                    after capturing the old state</a> <a href="#ref-for-document-active-view-transition①④">(2)</a>
            <li><a href="#ref-for-document-active-view-transition①⑤">9.5. Activating the view transition in the new
                    Document</a> <a href="#ref-for-document-active-view-transition①⑥">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-capture-the-new-state">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#capture-the-new-state">https://www.w3.org/TR/css-view-transitions-1/#capture-the-new-state</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-capture-the-new-state">2.1.4. Lifecycle</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-capture-the-old-state">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#capture-the-old-state">https://www.w3.org/TR/css-view-transitions-1/#capture-the-old-state</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-capture-the-old-state">2.1.4. Lifecycle</a>
            <li><a href="#ref-for-capture-the-old-state①">9.4.5. Proceed with cross-document view transition after
                    capturing the old state</a> <a href="#ref-for-capture-the-old-state②">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-captured-element">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#captured-element">https://www.w3.org/TR/css-view-transitions-1/#captured-element</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-captured-element">2.1.4. Lifecycle</a>
            <li><a href="#ref-for-captured-element①">9.1.3. Serializable view transition params</a>
            <li><a href="#ref-for-captured-element②">9.2.1. Captured elements extension</a>
            <li><a href="#ref-for-captured-element③">9.6. Capturing the view-transition-class</a>
            <li><a href="#ref-for-captured-element④">9.7.4. Compute the old view-transition-group</a>
            <li><a href="#ref-for-captured-element⑤">9.7.5. Compute the new view-transition-group</a>
            <li><a href="#ref-for-captured-element⑥">9.7.6. Reparent a ::view-transition-group() to its specified
                    containing group</a>
            <li><a href="#ref-for-captured-element⑦">9.7.7. Adjust the group’s transform to be relative to its
                    containing ::view-transition-group()</a>
            <li><a href="#ref-for-captured-element⑧">9.8.2. Capture the old layered properties</a>
            <li><a href="#ref-for-captured-element⑨">9.8.6. Apply the old layered-capture properties to
                    ::view-transition-group() keyframes</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-capture-the-image">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#capture-the-image">https://www.w3.org/TR/css-view-transitions-1/#capture-the-image</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-capture-the-image">9.8.3. Adjustment to image capture size</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-document-scoped-view-transition-name">
        <a
            href="https://drafts.csswg.org/css-view-transitions-1/#document-scoped-view-transition-name">https://drafts.csswg.org/css-view-transitions-1/#document-scoped-view-transition-name</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-document-scoped-view-transition-name">9.7.2. Resolving the containing group
                    name</a>
            <li><a href="#ref-for-document-scoped-view-transition-name①">9.7.3. Resolving the group name</a> <a
                    href="#ref-for-document-scoped-view-transition-name②">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-viewtransition-finished">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#dom-viewtransition-finished">https://www.w3.org/TR/css-view-transitions-1/#dom-viewtransition-finished</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-viewtransition-finished">2.1.3.1. Handling the view transition in the old
                    document</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-captured-element-group-styles-rule">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#captured-element-group-styles-rule">https://www.w3.org/TR/css-view-transitions-1/#captured-element-group-styles-rule</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-captured-element-group-styles-rule">9.7.7. Adjust the group’s transform to be
                    relative
                    to its containing ::view-transition-group()</a>
            <li><a href="#ref-for-captured-element-group-styles-rule①">9.8.7. Apply the new layered-capture
                    properties
                    to ::view-transition-group()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-viewtransition-initial-snapshot-containing-block-size">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition-initial-snapshot-containing-block-size">https://www.w3.org/TR/css-view-transitions-1/#viewtransition-initial-snapshot-containing-block-size</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-viewtransition-initial-snapshot-containing-block-size">9.4.5. Proceed with
                    cross-document view transition after capturing the old state</a>
            <li><a href="#ref-for-viewtransition-initial-snapshot-containing-block-size①">9.5. Activating the view
                    transition in the new Document</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-viewtransition-named-elements">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition-named-elements">https://www.w3.org/TR/css-view-transitions-1/#viewtransition-named-elements</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-viewtransition-named-elements">4.4. Additions to named view transition
                    pseudo-elements</a>
            <li><a href="#ref-for-viewtransition-named-elements①">9.4.5. Proceed with cross-document view transition
                    after capturing the old state</a>
            <li><a href="#ref-for-viewtransition-named-elements②">9.5. Activating the view transition in the new
                    Document</a>
            <li><a href="#ref-for-viewtransition-named-elements③">9.7.6. Reparent a ::view-transition-group() to its
                    specified containing group</a>
            <li><a href="#ref-for-viewtransition-named-elements④">9.7.7. Adjust the group’s transform to be relative
                    to
                    its containing ::view-transition-group()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-named-view-transition-pseudo-elements">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#named-view-transition-pseudo-elements">https://www.w3.org/TR/css-view-transitions-1/#named-view-transition-pseudo-elements</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-named-view-transition-pseudo-elements">4.1. Overview</a>
            <li><a href="#ref-for-named-view-transition-pseudo-elements①">4.3. The view-transition-class
                    property</a> <a href="#ref-for-named-view-transition-pseudo-elements②">(2)</a> <a
                    href="#ref-for-named-view-transition-pseudo-elements③">(3)</a>
            <li><a href="#ref-for-named-view-transition-pseudo-elements④">4.4. Additions to named view transition
                    pseudo-elements</a> <a href="#ref-for-named-view-transition-pseudo-elements⑤">(2)</a> <a
                    href="#ref-for-named-view-transition-pseudo-elements⑥">(3)</a> <a
                    href="#ref-for-named-view-transition-pseudo-elements⑦">(4)</a>
            <li><a href="#ref-for-named-view-transition-pseudo-elements⑧">7.3. The view-transition-group
                    property</a> <a href="#ref-for-named-view-transition-pseudo-elements⑨">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-valdef-view-transition-name-none">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#valdef-view-transition-name-none">https://www.w3.org/TR/css-view-transitions-1/#valdef-view-transition-name-none</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-valdef-view-transition-name-none">7.3. The view-transition-group property</a>
            <li><a href="#ref-for-valdef-view-transition-name-none①">9.7.2. Resolving the containing group name</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-captured-element-old-height">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#captured-element-old-height">https://www.w3.org/TR/css-view-transitions-1/#captured-element-old-height</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-captured-element-old-height">9.7.6. Reparent a ::view-transition-group() to its
                    specified containing group</a>
            <li><a href="#ref-for-captured-element-old-height①">9.8.2. Capture the old layered properties</a>
            <li><a href="#ref-for-captured-element-old-height②">9.8.7. Apply the new layered-capture properties to
                    ::view-transition-group()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-captured-element-old-transform">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#captured-element-old-transform">https://www.w3.org/TR/css-view-transitions-1/#captured-element-old-transform</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-captured-element-old-transform">9.7.6. Reparent a ::view-transition-group() to its
                    specified containing group</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-captured-element-old-width">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#captured-element-old-width">https://www.w3.org/TR/css-view-transitions-1/#captured-element-old-width</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-captured-element-old-width">9.7.6. Reparent a ::view-transition-group() to its
                    specified containing group</a>
            <li><a href="#ref-for-captured-element-old-width①">9.8.2. Capture the old layered properties</a>
            <li><a href="#ref-for-captured-element-old-width②">9.8.7. Apply the new layered-capture properties to
                    ::view-transition-group()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-perform-pending-transition-operations">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#perform-pending-transition-operations">https://www.w3.org/TR/css-view-transitions-1/#perform-pending-transition-operations</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-perform-pending-transition-operations">9.4.2. Setup the outbound transition when
                    ready
                    to swap pages</a>
            <li><a href="#ref-for-perform-pending-transition-operations①">9.4.5. Proceed with cross-document view
                    transition after capturing the old state</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-viewtransition-phase">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition-phase">https://www.w3.org/TR/css-view-transitions-1/#viewtransition-phase</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-viewtransition-phase">9.4.2. Setup the outbound transition when ready to swap
                    pages</a>
            <li><a href="#ref-for-viewtransition-phase①">9.4.5. Proceed with cross-document view transition after
                    capturing the old state</a>
            <li><a href="#ref-for-viewtransition-phase②">9.5. Activating the view transition in the new Document</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-viewtransition-ready">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#dom-viewtransition-ready">https://www.w3.org/TR/css-view-transitions-1/#dom-viewtransition-ready</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-viewtransition-ready">2.1.3.2. Handling the view transition in the new
                    document</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-document-rendering-suppression-for-view-transitions">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#document-rendering-suppression-for-view-transitions">https://www.w3.org/TR/css-view-transitions-1/#document-rendering-suppression-for-view-transitions</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-document-rendering-suppression-for-view-transitions">9.4.5. Proceed with
                    cross-document view transition after capturing the old state</a> <a
                    href="#ref-for-document-rendering-suppression-for-view-transitions①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-skip-the-view-transition">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#skip-the-view-transition">https://www.w3.org/TR/css-view-transitions-1/#skip-the-view-transition</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-skip-the-view-transition">5. Extending document.startViewTransition()</a>
            <li><a href="#ref-for-skip-the-view-transition①">9.4.2. Setup the outbound transition when ready to swap
                    pages</a>
            <li><a href="#ref-for-skip-the-view-transition②">9.4.4. Proceed with navigation if view transition is
                    skipped</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-viewtransition-skiptransition">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#dom-viewtransition-skiptransition">https://www.w3.org/TR/css-view-transitions-1/#dom-viewtransition-skiptransition</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-viewtransition-skiptransition">2.1.4. Lifecycle</a> <a
                    href="#ref-for-dom-viewtransition-skiptransition①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-snapshot-containing-block">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#snapshot-containing-block">https://www.w3.org/TR/css-view-transitions-1/#snapshot-containing-block</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-snapshot-containing-block">7.1. Overview</a>
            <li><a href="#ref-for-snapshot-containing-block①">9.7.7. Adjust the group’s transform to be relative to
                    its
                    containing ::view-transition-group()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-document-startviewtransition">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#dom-document-startviewtransition">https://www.w3.org/TR/css-view-transitions-1/#dom-document-startviewtransition</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-document-startviewtransition⑦">5. Extending document.startViewTransition()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-viewtransition-update-callback">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition-update-callback">https://www.w3.org/TR/css-view-transitions-1/#viewtransition-update-callback</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-viewtransition-update-callback">5. Extending document.startViewTransition()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-viewtransition-update-callback-done-promise">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition-update-callback-done-promise">https://www.w3.org/TR/css-view-transitions-1/#viewtransition-update-callback-done-promise</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-viewtransition-update-callback-done-promise">9.5. Activating the view transition
                    in
                    the new Document</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-viewtransition-updatecallbackdone">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#dom-viewtransition-updatecallbackdone">https://www.w3.org/TR/css-view-transitions-1/#dom-viewtransition-updatecallbackdone</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-viewtransition-updatecallbackdone">2.1.4. Lifecycle</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-view-transition-name">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#view-transition-name">https://www.w3.org/TR/css-view-transitions-1/#view-transition-name</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-view-transition-name">9.7.6. Reparent a ::view-transition-group() to its specified
                    containing group</a> <a href="#ref-for-view-transition-name①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-view-transition-page-visibility-change-steps">
        <a
            href="https://drafts.csswg.org/css-view-transitions-1/#view-transition-page-visibility-change-steps">https://drafts.csswg.org/css-view-transitions-1/#view-transition-page-visibility-change-steps</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-view-transition-page-visibility-change-steps">9.2. Additions to the view
                    transition
                    page-visibility change steps</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-view-transition-tree">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#view-transition-tree">https://www.w3.org/TR/css-view-transitions-1/#view-transition-tree</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-view-transition-tree">7.1. Overview</a> <a
                    href="#ref-for-view-transition-tree①">(2)</a>
            <li><a href="#ref-for-view-transition-tree②">7.2. Examples</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-view-transition-name">
        <a
            href="https://www.w3.org/TR/css-view-transitions-1/#propdef-view-transition-name">https://www.w3.org/TR/css-view-transitions-1/#propdef-view-transition-name</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-view-transition-name">4.3. The view-transition-class property</a> <a
                    href="#ref-for-propdef-view-transition-name①">(2)</a> <a
                    href="#ref-for-propdef-view-transition-name②">(3)</a> <a
                    href="#ref-for-propdef-view-transition-name③">(4)</a> <a
                    href="#ref-for-propdef-view-transition-name④">(5)</a>
            <li><a href="#ref-for-propdef-view-transition-name⑤">4.4. Additions to named view transition
                    pseudo-elements</a>
            <li><a href="#ref-for-propdef-view-transition-name⑥">6. Determining view-transition-name
                    automatically</a>
            <li><a href="#ref-for-propdef-view-transition-name⑦">6.1. Overview</a> <a
                    href="#ref-for-propdef-view-transition-name⑧">(2)</a> <a
                    href="#ref-for-propdef-view-transition-name⑨">(3)</a> <a
                    href="#ref-for-propdef-view-transition-name①⓪">(4)</a>
            <li><a href="#ref-for-propdef-view-transition-name①①">6.2. Examples</a>
            <li><a href="#ref-for-propdef-view-transition-name①②">6.3. Additions to view-transition-name</a> <a
                    href="#ref-for-propdef-view-transition-name①③">(2)</a> <a
                    href="#ref-for-propdef-view-transition-name①④">(3)</a> <a
                    href="#ref-for-propdef-view-transition-name①⑤">(4)</a> <a
                    href="#ref-for-propdef-view-transition-name①⑥">(5)</a>
            <li><a href="#ref-for-propdef-view-transition-name①⑦">7.3. The view-transition-group property</a> <a
                    href="#ref-for-propdef-view-transition-name①⑧">(2)</a> <a
                    href="#ref-for-propdef-view-transition-name①⑨">(3)</a>
            <li><a href="#ref-for-propdef-view-transition-name②⓪"> Changes from 2024-05-16 Working Draft </a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-element">
        <a href="https://drafts.csswg.org/css2/#element">https://drafts.csswg.org/css2/#element</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-element">9.6. Capturing the view-transition-class</a>
            <li><a href="#ref-for-element④">9.7.4. Compute the old view-transition-group</a>
            <li><a href="#ref-for-element⑤">9.7.5. Compute the new view-transition-group</a>
            <li><a href="#ref-for-element⑧">9.8.2. Capture the old layered properties</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-cssomstring">
        <a href="https://www.w3.org/TR/cssom-1/#cssomstring">https://www.w3.org/TR/cssom-1/#cssomstring</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-cssomstring">2.3.3. Accessing the @view-transition rule using CSSOM</a> <a
                    href="#ref-for-cssomstring①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-cssrule">
        <a href="https://www.w3.org/TR/cssom-1/#cssrule">https://www.w3.org/TR/cssom-1/#cssrule</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-cssrule">2.3.3. Accessing the @view-transition rule using CSSOM</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-document">
        <a href="https://dom.spec.whatwg.org/#document">https://dom.spec.whatwg.org/#document</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-document">2.1.4. Lifecycle</a> <a href="#ref-for-document①">(2)</a> <a
                    href="#ref-for-document②">(3)</a> <a href="#ref-for-document③">(4)</a> <a
                    href="#ref-for-document④">(5)</a> <a href="#ref-for-document⑤">(6)</a> <a
                    href="#ref-for-document⑥">(7)</a> <a href="#ref-for-document⑦">(8)</a> <a
                    href="#ref-for-document⑧">(9)</a>
            <li><a href="#ref-for-document⑨">2.3.1. The @view-transition rule</a>
            <li><a href="#ref-for-document①⓪">3.5. Activating the transition type for cross-document view
                    transitions</a>
            <li><a href="#ref-for-document①①">5. Extending document.startViewTransition()</a>
            <li><a href="#ref-for-document①②">6.3. Additions to view-transition-name</a>
            <li><a href="#ref-for-document①③">9.1.1. Additions to Document</a> <a href="#ref-for-document①④">(2)</a>
            <li><a href="#ref-for-document①⑤">9.3. Resolving the @view-transition rule</a>
            <li><a href="#ref-for-document①⑥">9.4. Setting up the view transition in the old Document</a>
            <li><a href="#ref-for-document①⑦">9.4.1. Check eligibility for outbound cross-document view
                    transition</a>
                <a href="#ref-for-document①⑧">(2)</a>
            <li><a href="#ref-for-document①⑨">9.4.2. Setup the outbound transition when ready to swap pages</a> <a
                    href="#ref-for-document②⓪">(2)</a>
            <li><a href="#ref-for-document②①">9.4.3. Update the opt-in flag to reflect the current state</a>
            <li><a href="#ref-for-document②②">9.4.5. Proceed with cross-document view transition after capturing the
                    old
                    state</a>
            <li><a href="#ref-for-document②③">9.5. Activating the view transition in the new Document</a> <a
                    href="#ref-for-document②④">(2)</a>
            <li><a href="#ref-for-document②⑤">Security Considerations</a> <a href="#ref-for-document②⑥">(2)</a> <a
                    href="#ref-for-document②⑦">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-element">
        <a href="https://dom.spec.whatwg.org/#element">https://dom.spec.whatwg.org/#element</a><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-element①">9.7.1. Resolving the view-transition-group value</a>
            <li><a href="#ref-for-element②">9.7.2. Resolving the containing group name</a>
            <li><a href="#ref-for-element③">9.7.3. Resolving the group name</a>
            <li><a href="#ref-for-element⑥">9.8.1. Compute the layered-capture style</a> <a
                    href="#ref-for-element⑦">(2)</a>
            <li><a href="#ref-for-element⑨">9.8.7. Apply the new layered-capture properties to
                    ::view-transition-group()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-tree-ancestor">
        <a
            href="https://dom.spec.whatwg.org/#concept-tree-ancestor">https://dom.spec.whatwg.org/#concept-tree-ancestor</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-tree-ancestor">9.7.2. Resolving the containing group name</a>
            <li><a href="#ref-for-concept-tree-ancestor①">9.7.3. Resolving the group name</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-class">
        <a href="https://dom.spec.whatwg.org/#concept-class">https://dom.spec.whatwg.org/#concept-class</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-class">4.1. Overview</a> <a href="#ref-for-concept-class①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-document">
        <a href="https://dom.spec.whatwg.org/#concept-document">https://dom.spec.whatwg.org/#concept-document</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-document">1. Introduction</a>
            <li><a href="#ref-for-concept-document①">9.4.1. Check eligibility for outbound cross-document view
                    transition</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-document-element">
        <a href="https://dom.spec.whatwg.org/#document-element">https://dom.spec.whatwg.org/#document-element</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-document-element">3.1. Overview</a> <a href="#ref-for-document-element①">(2)</a>
            <li><a href="#ref-for-document-element②">3.3.1. The :active-view-transition pseudo-class</a>
            <li><a href="#ref-for-document-element③">3.3.2. The :active-view-transition-type() pseudo-class</a>
            <li><a href="#ref-for-document-element④">9.7.7. Adjust the group’s transform to be relative to its
                    containing ::view-transition-group()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-id">
        <a href="https://dom.spec.whatwg.org/#concept-id">https://dom.spec.whatwg.org/#concept-id</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-id">6.1. Overview</a>
            <li><a href="#ref-for-concept-id①">6.3. Additions to view-transition-name</a> <a
                    href="#ref-for-concept-id②">(2)</a> <a href="#ref-for-concept-id③">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-node-document">
        <a
            href="https://dom.spec.whatwg.org/#concept-node-document">https://dom.spec.whatwg.org/#concept-node-document</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-node-document">3.3.1. The :active-view-transition pseudo-class</a>
            <li><a href="#ref-for-concept-node-document①">3.3.2. The :active-view-transition-type() pseudo-class</a>
            <li><a href="#ref-for-concept-node-document②">6.3. Additions to view-transition-name</a>
            <li><a href="#ref-for-concept-node-document③">9.6. Capturing the view-transition-class</a>
            <li><a href="#ref-for-concept-node-document④">9.7.1. Resolving the view-transition-group value</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-document-origin">
        <a
            href="https://dom.spec.whatwg.org/#concept-document-origin">https://dom.spec.whatwg.org/#concept-document-origin</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-document-origin">9.4.1. Check eligibility for outbound cross-document view
                    transition</a> <a href="#ref-for-concept-document-origin①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-tree-root">
        <a href="https://dom.spec.whatwg.org/#concept-tree-root">https://dom.spec.whatwg.org/#concept-tree-root</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-tree-root">6.3. Additions to view-transition-name</a> <a
                    href="#ref-for-concept-tree-root①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-filter">
        <a
            href="https://www.w3.org/TR/filter-effects-1/#propdef-filter">https://www.w3.org/TR/filter-effects-1/#propdef-filter</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-filter">7.1. Overview</a>
            <li><a href="#ref-for-propdef-filter①">8.1. Overview</a> <a href="#ref-for-propdef-filter②">(2)</a>
            <li><a href="#ref-for-propdef-filter③">8.2. Table of captured CSS properties
                    {#layered-captured-css-properties}</a>
            <li><a href="#ref-for-propdef-filter④">9.8.4. Render the snapshot with layered capture</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-matrix">
        <a href="https://www.w3.org/TR/geometry-1/#matrix">https://www.w3.org/TR/geometry-1/#matrix</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-matrix">9.2.1. Captured elements extension</a>
            <li><a href="#ref-for-matrix①">9.8.5. Adjust the nested group transform</a> <a
                    href="#ref-for-matrix②">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-multiply">
        <a href="https://www.w3.org/TR/geometry-1/#multiply">https://www.w3.org/TR/geometry-1/#multiply</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-multiply">9.8.5. Adjust the nested group transform</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dfn-duration">
        <a href="https://www.w3.org/TR/hr-time-3/#dfn-duration">https://www.w3.org/TR/hr-time-3/#dfn-duration</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dfn-duration">9.4.2. Setup the outbound transition when ready to swap pages</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-htmllinkelement">
        <a
            href="https://html.spec.whatwg.org/multipage/semantics.html#htmllinkelement">https://html.spec.whatwg.org/multipage/semantics.html#htmllinkelement</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-htmllinkelement">2.1.2. Waiting for the new state to stabilize</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-navigationtype">
        <a
            href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#navigationtype">https://html.spec.whatwg.org/multipage/nav-history-apis.html#navigationtype</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-navigationtype">2.3.2. The navigation descriptor</a>
            <li><a href="#ref-for-navigationtype①">9.4.1. Check eligibility for outbound cross-document view
                    transition</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-pageswapevent">
        <a
            href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#pageswapevent">https://html.spec.whatwg.org/multipage/nav-history-apis.html#pageswapevent</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-pageswapevent">2.1.3.1. Handling the view transition in the old document</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-pageswapevent-activation">
        <a
            href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-pageswapevent-activation">https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-pageswapevent-activation</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-pageswapevent-activation">2.1.3.1. Handling the view transition in the old
                    document</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-script-blocking">
        <a
            href="https://html.spec.whatwg.org/multipage/scripting.html#dom-script-blocking">https://html.spec.whatwg.org/multipage/scripting.html#dom-script-blocking</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-script-blocking">2.1.2. Waiting for the new state to stabilize</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-style-blocking">
        <a
            href="https://html.spec.whatwg.org/multipage/semantics.html#dom-style-blocking">https://html.spec.whatwg.org/multipage/semantics.html#dom-style-blocking</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-style-blocking">2.1.2. Waiting for the new state to stabilize</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-settings-object-cross-origin-isolated-capability">
        <a
            href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-cross-origin-isolated-capability">https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-cross-origin-isolated-capability</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-settings-object-cross-origin-isolated-capability">Security
                    Considerations</a>
                <a href="#ref-for-concept-settings-object-cross-origin-isolated-capability①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-manipulation-task-source">
        <a
            href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source">https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-manipulation-task-source">9.4.2. Setup the outbound transition when ready to
                    swap
                    pages</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-link-type-expect">
        <a
            href="https://html.spec.whatwg.org/multipage/links.html#link-type-expect">https://html.spec.whatwg.org/multipage/links.html#link-type-expect</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-link-type-expect">2.1.2. Waiting for the new state to stabilize</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-fully-active">
        <a
            href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active">https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-fully-active">9.5. Activating the view transition in the new Document</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-has-been-revealed">
        <a
            href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#has-been-revealed">https://html.spec.whatwg.org/multipage/browsing-the-web.html#has-been-revealed</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-has-been-revealed">9.4.3. Update the opt-in flag to reflect the current state</a>
            <li><a href="#ref-for-has-been-revealed①">9.5. Activating the view transition in the new Document</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-in-parallel">
        <a
            href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-in-parallel">2.3.1. The @view-transition rule</a>
            <li><a href="#ref-for-in-parallel①">9.1.1. Additions to Document</a>
            <li><a href="#ref-for-in-parallel②">9.4.1. Check eligibility for outbound cross-document view
                    transition</a>
            <li><a href="#ref-for-in-parallel③">9.4.2. Setup the outbound transition when ready to swap pages</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-latest-entry">
        <a
            href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#latest-entry">https://html.spec.whatwg.org/multipage/browsing-the-web.html#latest-entry</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-latest-entry">9.4.1. Check eligibility for outbound cross-document view
                    transition</a>
                <a href="#ref-for-latest-entry①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-event-pagereveal">
        <a
            href="https://html.spec.whatwg.org/multipage/indices.html#event-pagereveal">https://html.spec.whatwg.org/multipage/indices.html#event-pagereveal</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-event-pagereveal">2.1.3.2. Handling the view transition in the new document</a>
            <li><a href="#ref-for-event-pagereveal①">2.1.4. Lifecycle</a>
            <li><a href="#ref-for-event-pagereveal②">2.2. Examples</a>
            <li><a href="#ref-for-event-pagereveal③">9.4.2. Setup the outbound transition when ready to swap
                    pages</a>
                <a href="#ref-for-event-pagereveal④">(2)</a> <a href="#ref-for-event-pagereveal⑤">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-event-pageswap">
        <a
            href="https://html.spec.whatwg.org/multipage/indices.html#event-pageswap">https://html.spec.whatwg.org/multipage/indices.html#event-pageswap</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-event-pageswap">2.1.3.1. Handling the view transition in the old document</a>
            <li><a href="#ref-for-event-pageswap①">2.1.4. Lifecycle</a>
            <li><a href="#ref-for-event-pageswap②">5. Extending document.startViewTransition()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-navigationtype-push">
        <a
            href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-navigationtype-push">https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-navigationtype-push</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-navigationtype-push">2.3.2. The navigation descriptor</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-queue-a-global-task">
        <a
            href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task">https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-queue-a-global-task">9.4.2. Setup the outbound transition when ready to swap
                    pages</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-reactivate-a-document">
        <a
            href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#reactivate-a-document">https://html.spec.whatwg.org/multipage/browsing-the-web.html#reactivate-a-document</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-reactivate-a-document">Security Considerations</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-relevant-global">
        <a
            href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global">https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-relevant-global">9.4.2. Setup the outbound transition when ready to swap
                    pages</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-relevant-realm">
        <a
            href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm">https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-relevant-realm">5. Extending document.startViewTransition()</a>
            <li><a href="#ref-for-concept-relevant-realm①">9.4.2. Setup the outbound transition when ready to swap
                    pages</a> <a href="#ref-for-concept-relevant-realm②">(2)</a>
            <li><a href="#ref-for-concept-relevant-realm③">9.5. Activating the view transition in the new
                    Document</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-navigationtype-reload">
        <a
            href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-navigationtype-reload">https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-navigationtype-reload</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-navigationtype-reload">2.3.2. The navigation descriptor</a>
            <li><a href="#ref-for-dom-navigationtype-reload①">9.4.1. Check eligibility for outbound cross-document
                    view
                    transition</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-render-blocking-mechanism">
        <a
            href="https://html.spec.whatwg.org/multipage/dom.html#render-blocking-mechanism">https://html.spec.whatwg.org/multipage/dom.html#render-blocking-mechanism</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-render-blocking-mechanism">2.1.2. Waiting for the new state to stabilize</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-rendering-opportunity">
        <a
            href="https://html.spec.whatwg.org/multipage/webappapis.html#rendering-opportunity">https://html.spec.whatwg.org/multipage/webappapis.html#rendering-opportunity</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-rendering-opportunity">2.1.4. Lifecycle</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-navigationtype-replace">
        <a
            href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-navigationtype-replace">https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-navigationtype-replace</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-navigationtype-replace">2.3.2. The navigation descriptor</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-same-origin">
        <a
            href="https://html.spec.whatwg.org/multipage/browsers.html#same-origin">https://html.spec.whatwg.org/multipage/browsers.html#same-origin</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-same-origin">2.1.1. Activation</a>
            <li><a href="#ref-for-same-origin①">2.1.4. Lifecycle</a>
            <li><a href="#ref-for-same-origin②">9.4.1. Check eligibility for outbound cross-document view
                    transition</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-sessionstorage">
        <a
            href="https://html.spec.whatwg.org/multipage/webstorage.html#dom-sessionstorage">https://html.spec.whatwg.org/multipage/webstorage.html#dom-sessionstorage</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-sessionstorage">2.2. Examples</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-task">
        <a
            href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-task">https://html.spec.whatwg.org/multipage/webappapis.html#concept-task</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-task">9.4.2. Setup the outbound transition when ready to swap pages</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-navigationtype-traverse">
        <a
            href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-navigationtype-traverse">https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-navigationtype-traverse</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-navigationtype-traverse">2.1.1. Activation</a>
            <li><a href="#ref-for-dom-navigationtype-traverse①">2.3.2. The navigation descriptor</a>
            <li><a href="#ref-for-dom-navigationtype-traverse②">9.4.1. Check eligibility for outbound cross-document
                    view transition</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-pagerevealevent-viewtransition">
        <a
            href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-pagerevealevent-viewtransition">https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-pagerevealevent-viewtransition</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-pagerevealevent-viewtransition">2.1.3.2. Handling the view transition in the
                    new
                    document</a>
            <li><a href="#ref-for-dom-pagerevealevent-viewtransition①">2.1.4. Lifecycle</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-pageswapevent-viewtransition">
        <a
            href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-pageswapevent-viewtransition">https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-pageswapevent-viewtransition</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-pageswapevent-viewtransition">2.1.3.1. Handling the view transition in the old
                    document</a>
            <li><a href="#ref-for-dom-pageswapevent-viewtransition①">2.1.4. Lifecycle</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-visibility-state">
        <a
            href="https://html.spec.whatwg.org/multipage/interaction.html#visibility-state">https://html.spec.whatwg.org/multipage/interaction.html#visibility-state</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-visibility-state">9.3. Resolving the @view-transition rule</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-was-created-via-cross-origin-redirects">
        <a
            href="https://html.spec.whatwg.org/multipage/dom.html#was-created-via-cross-origin-redirects">https://html.spec.whatwg.org/multipage/dom.html#was-created-via-cross-origin-redirects</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-was-created-via-cross-origin-redirects">9.4.1. Check eligibility for outbound
                    cross-document view transition</a>
            <li><a href="#ref-for-was-created-via-cross-origin-redirects①">Security Considerations</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-list-append">
        <a href="https://infra.spec.whatwg.org/#list-append">https://infra.spec.whatwg.org/#list-append</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-list-append">9.8.1. Compute the layered-capture style</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-assert">
        <a href="https://infra.spec.whatwg.org/#assert">https://infra.spec.whatwg.org/#assert</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-assert">9.4.2. Setup the outbound transition when ready to swap pages</a> <a
                    href="#ref-for-assert①">(2)</a>
            <li><a href="#ref-for-assert②">9.5. Activating the view transition in the new Document</a> <a
                    href="#ref-for-assert③">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-list-clone">
        <a href="https://infra.spec.whatwg.org/#list-clone">https://infra.spec.whatwg.org/#list-clone</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-list-clone">5. Extending document.startViewTransition()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-map-clone">
        <a href="https://infra.spec.whatwg.org/#map-clone">https://infra.spec.whatwg.org/#map-clone</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-map-clone">9.4.5. Proceed with cross-document view transition after capturing the
                    old
                    state</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-string-concatenate">
        <a
            href="https://infra.spec.whatwg.org/#string-concatenate">https://infra.spec.whatwg.org/#string-concatenate</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-string-concatenate">9.8.1. Compute the layered-capture style</a> <a
                    href="#ref-for-string-concatenate①">(2)</a>
            <li><a href="#ref-for-string-concatenate②">9.8.6. Apply the old layered-capture properties to
                    ::view-transition-group() keyframes</a>
            <li><a href="#ref-for-string-concatenate③">9.8.7. Apply the new layered-capture properties to
                    ::view-transition-group()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-list-contain">
        <a href="https://infra.spec.whatwg.org/#list-contain">https://infra.spec.whatwg.org/#list-contain</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-list-contain">3.3.2. The :active-view-transition-type() pseudo-class</a>
            <li><a href="#ref-for-list-contain①">4.4. Additions to named view transition pseudo-elements</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-implementation-defined">
        <a
            href="https://infra.spec.whatwg.org/#implementation-defined">https://infra.spec.whatwg.org/#implementation-defined</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-implementation-defined">9.4.1. Check eligibility for outbound cross-document view
                    transition</a>
            <li><a href="#ref-for-implementation-defined①">9.4.2. Setup the outbound transition when ready to swap
                    pages</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-struct-item">
        <a href="https://infra.spec.whatwg.org/#struct-item">https://infra.spec.whatwg.org/#struct-item</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-struct-item">9.1.3. Serializable view transition params</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-list">
        <a href="https://infra.spec.whatwg.org/#list">https://infra.spec.whatwg.org/#list</a><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-list">2.3.3. Accessing the @view-transition rule using CSSOM</a>
            <li><a href="#ref-for-list①">9.2.1. Captured elements extension</a>
            <li><a href="#ref-for-list②">9.8.1. Compute the layered-capture style</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-ordered-map">
        <a href="https://infra.spec.whatwg.org/#ordered-map">https://infra.spec.whatwg.org/#ordered-map</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-ordered-map">9.1.3. Serializable view transition params</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-ordered-set">
        <a href="https://infra.spec.whatwg.org/#ordered-set">https://infra.spec.whatwg.org/#ordered-set</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-ordered-set">3.4. Changing the types of an ongoing view transition</a>
            <li><a href="#ref-for-ordered-set①">5. Extending document.startViewTransition()</a>
            <li><a href="#ref-for-ordered-set②">9.3. Resolving the @view-transition rule</a> <a
                    href="#ref-for-ordered-set③">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-struct">
        <a href="https://infra.spec.whatwg.org/#struct">https://infra.spec.whatwg.org/#struct</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-struct">9.1.3. Serializable view transition params</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-tuple">
        <a href="https://infra.spec.whatwg.org/#tuple">https://infra.spec.whatwg.org/#tuple</a><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-tuple">9.1.3. Serializable view transition params</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-x">
        <a href="https://www.w3.org/TR/selectors-3/#x">https://www.w3.org/TR/selectors-3/#x</a><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-x">4.4. Additions to named view transition pseudo-elements</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-class-selector">
        <a
            href="https://www.w3.org/TR/selectors-4/#class-selector">https://www.w3.org/TR/selectors-4/#class-selector</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-class-selector">4.1. Overview</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-selector">
        <a href="https://www.w3.org/TR/selectors-4/#selector">https://www.w3.org/TR/selectors-4/#selector</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-selector">4.4. Additions to named view transition pseudo-elements</a> <a
                    href="#ref-for-selector①">(2)</a> <a href="#ref-for-selector②">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-specificity">
        <a href="https://www.w3.org/TR/selectors-4/#specificity">https://www.w3.org/TR/selectors-4/#specificity</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-specificity">3.3.1. The :active-view-transition pseudo-class</a>
            <li><a href="#ref-for-specificity①">3.3.2. The :active-view-transition-type() pseudo-class</a>
            <li><a href="#ref-for-specificity②">4.4. Additions to named view transition pseudo-elements</a> <a
                    href="#ref-for-specificity③">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-type-selector">
        <a
            href="https://www.w3.org/TR/selectors-4/#type-selector">https://www.w3.org/TR/selectors-4/#type-selector</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-type-selector">4.4. Additions to named view transition pseudo-elements</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-aborterror">
        <a href="https://webidl.spec.whatwg.org/#aborterror">https://webidl.spec.whatwg.org/#aborterror</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-aborterror">9.4.2. Setup the outbound transition when ready to swap pages</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-idl-DOMException">
        <a
            href="https://webidl.spec.whatwg.org/#idl-DOMException">https://webidl.spec.whatwg.org/#idl-DOMException</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-idl-DOMException">5. Extending document.startViewTransition()</a>
            <li><a href="#ref-for-idl-DOMException①">9.4.2. Setup the outbound transition when ready to swap
                    pages</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-idl-DOMString">
        <a href="https://webidl.spec.whatwg.org/#idl-DOMString">https://webidl.spec.whatwg.org/#idl-DOMString</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-idl-DOMString">3.4. Changing the types of an ongoing view transition</a>
            <li><a href="#ref-for-idl-DOMString①">5. Extending document.startViewTransition()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-Exposed">
        <a href="https://webidl.spec.whatwg.org/#Exposed">https://webidl.spec.whatwg.org/#Exposed</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-Exposed">2.3.3. Accessing the @view-transition rule using CSSOM</a>
            <li><a href="#ref-for-Exposed①">3.4. Changing the types of an ongoing view transition</a> <a
                    href="#ref-for-Exposed②">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-idl-frozen-array">
        <a
            href="https://webidl.spec.whatwg.org/#idl-frozen-array">https://webidl.spec.whatwg.org/#idl-frozen-array</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-idl-frozen-array">2.3.3. Accessing the @view-transition rule using CSSOM</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-invalidstateerror">
        <a
            href="https://webidl.spec.whatwg.org/#invalidstateerror">https://webidl.spec.whatwg.org/#invalidstateerror</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-invalidstateerror">5. Extending document.startViewTransition()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-SameObject">
        <a href="https://webidl.spec.whatwg.org/#SameObject">https://webidl.spec.whatwg.org/#SameObject</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-SameObject">2.3.3. Accessing the @view-transition rule using CSSOM</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-getter-steps">
        <a href="https://webidl.spec.whatwg.org/#getter-steps">https://webidl.spec.whatwg.org/#getter-steps</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-getter-steps">3.4. Changing the types of an ongoing view transition</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-method-steps">
        <a href="https://webidl.spec.whatwg.org/#method-steps">https://webidl.spec.whatwg.org/#method-steps</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-method-steps">5. Extending document.startViewTransition()</a> <a
                    href="#ref-for-method-steps①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-resolve">
        <a href="https://webidl.spec.whatwg.org/#resolve">https://webidl.spec.whatwg.org/#resolve</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-resolve">9.5. Activating the view transition in the new Document</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-idl-sequence">
        <a href="https://webidl.spec.whatwg.org/#idl-sequence">https://webidl.spec.whatwg.org/#idl-sequence</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-idl-sequence">5. Extending document.startViewTransition()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-this">
        <a href="https://webidl.spec.whatwg.org/#this">https://webidl.spec.whatwg.org/#this</a><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-this">3.4. Changing the types of an ongoing view transition</a>
        </ul>
    </aside>
    <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">引用定义的术语</span><a
            class="self-link" href="#index-defined-elsewhere"></a></h3>
    <ul class="index">
        <li>
            <a data-link-type="biblio">[CSS-BACKGROUNDS-3]</a> 定义以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-propdef-background">background</span>
                <li><span class="dfn-paneled" id="term-for-propdef-border">border</span>
                <li><span class="dfn-paneled" id="term-for-propdef-border-image">border-image</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-BORDERS-4]</a> 定义以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-propdef-border-bottom">border-bottom</span>
                <li><span class="dfn-paneled" id="term-for-propdef-border-left">border-left</span>
                <li><span class="dfn-paneled" id="term-for-propdef-border-radius">border-radius</span>
                <li><span class="dfn-paneled" id="term-for-propdef-border-right">border-right</span>
                <li><span class="dfn-paneled" id="term-for-propdef-border-top">border-top</span>
                <li><span class="dfn-paneled" id="term-for-propdef-box-shadow">box-shadow</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-BOX-4]</a> 定义以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-border-box">边框盒</span>
                <li><span class="dfn-paneled" id="term-for-content-box">内容盒</span>
                <li><span class="dfn-paneled" id="term-for-propdef-padding">padding</span>
                <li><span class="dfn-paneled" id="term-for-padding-box">内边距盒</span>
                <li><span class="dfn-paneled" id="term-for-padding-edge">内边距边缘</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-CASCADE-5]</a> 定义以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-computed-value">计算值</span>
                <li><span class="dfn-paneled" id="term-for-used-value">使用值</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-COLOR-4]</a> 定义以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-propdef-opacity">opacity</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-CONDITIONAL-3]</a> 定义以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-at-ruledef-media">@media</span>
                <li><span class="dfn-paneled" id="term-for-at-ruledef-supports">@supports</span>
                <li><span class="dfn-paneled" id="term-for-conditional-group-rule">条件组规则</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-CONTAIN-2]</a> 定义以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-element-contents">元素内容</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-IMAGES-3]</a> 定义以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-natural-dimensions">固有尺寸</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-MASKING-1]</a> 定义以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-propdef-clip-path">clip-path</span>
                <li><span class="dfn-paneled" id="term-for-propdef-mask">mask</span>
                <li><span class="dfn-paneled" id="term-for-propdef-mask-image">mask-image</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-OVERFLOW-3]</a> 定义以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-propdef-overflow">overflow</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-POSITION-3]</a> 定义以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-valdef-position-relative">relative</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-SCOPING-1]</a> 定义以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-flat-tree">扁平树</span>
                <li><span class="dfn-paneled" id="term-for-css-tree-scoped-name">树范围名称</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-SHADOW-PARTS-1]</a> 定义以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-selectordef-part">::part()</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-SIZING-3]</a> 定义以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-valdef-box-sizing-border-box">border-box</span>
                <li><span class="dfn-paneled" id="term-for-propdef-box-sizing">box-sizing</span>
                <li><span class="dfn-paneled" id="term-for-valdef-box-sizing-content-box">content-box</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-SYNTAX-3]</a> 定义以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-typedef-declaration-list">&lt;declaration-list></span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-TRANSFORMS-1]</a> 定义以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-identity-transform-function">恒等变换函数</span>
                <li><span class="dfn-paneled" id="term-for-propdef-transform">transform</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-TRANSFORMS-2]</a> 定义以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-propdef-perspective">perspective</span>
                <li><span class="dfn-paneled" id="term-for-propdef-transform-style">transform-style</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-UI-4]</a> 定义以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-propdef-outline">outline</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-VALUES-4]</a> 定义以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-mult-comma">#</span>
                <li><span class="dfn-paneled" id="term-for-mult-one-plus">+</span>
                <li><span class="dfn-paneled" id="term-for-identifier-value">&lt;custom-ident></span>
                <li><span class="dfn-paneled" id="term-for-mult-opt">?</span>
                <li><span class="dfn-paneled" id="term-for-comb-one">|</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-VIEW-TRANSITIONS-1]</a> 定义以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-selectordef-view-transition">::view-transition</span>
                <li><span class="dfn-paneled"
                        id="term-for-selectordef-view-transition-group">::view-transition-group()</span>
                <li><span class="dfn-paneled"
                        id="term-for-selectordef-view-transition-image-pair">::view-transition-image-pair()</span>
                <li><span class="dfn-paneled"
                        id="term-for-selectordef-view-transition-new">::view-transition-new()</span>
                <li><span class="dfn-paneled"
                        id="term-for-selectordef-view-transition-old">::view-transition-old()</span>
                <li><span class="dfn-paneled" id="term-for-typedef-pt-name-selector">&lt;pt-name-selector></span>
                <li><span class="dfn-paneled" id="term-for-viewtransition">ViewTransition</span>
                <li><span class="dfn-paneled"
                        id="term-for-callbackdef-viewtransitionupdatecallback">ViewTransitionUpdateCallback</span>
                <li><span class="dfn-paneled" id="term-for-activate-view-transition">激活视图过渡</span>
                <li><span class="dfn-paneled" id="term-for-document-active-view-transition">活动视图过渡</span>
                <li><span class="dfn-paneled" id="term-for-capture-the-new-state">捕获新状态</span>
                <li><span class="dfn-paneled" id="term-for-capture-the-old-state">捕获旧状态</span>
                <li><span class="dfn-paneled" id="term-for-captured-element">捕获元素</span>
                <li><span class="dfn-paneled" id="term-for-capture-the-image">捕获图像</span>
                <li><span class="dfn-paneled" id="term-for-document-scoped-view-transition-name">文档范围视图过渡名称</span>
                <li><span class="dfn-paneled" id="term-for-dom-viewtransition-finished">finished</span>
                <li><span class="dfn-paneled" id="term-for-captured-element-group-styles-rule">组样式规则</span>
                <li><span class="dfn-paneled"
                        id="term-for-viewtransition-initial-snapshot-containing-block-size">初始快照包含块大小</span>
                <li><span class="dfn-paneled" id="term-for-viewtransition-named-elements">命名元素</span>
                <li><span class="dfn-paneled" id="term-for-named-view-transition-pseudo-elements">命名视图过渡伪元素</span>
                <li><span class="dfn-paneled" id="term-for-valdef-view-transition-name-none">none</span>
                <li><span class="dfn-paneled" id="term-for-captured-element-old-height">旧高度</span>
                <li><span class="dfn-paneled" id="term-for-captured-element-old-transform">旧变换</span>
                <li><span class="dfn-paneled" id="term-for-captured-element-old-width">旧宽度</span>
                <li><span class="dfn-paneled" id="term-for-perform-pending-transition-operations">执行待处理过渡操作</span>
                <li><span class="dfn-paneled" id="term-for-viewtransition-phase">阶段</span>
                <li><span class="dfn-paneled" id="term-for-dom-viewtransition-ready">ready</span>
                <li><span class="dfn-paneled"
                        id="term-for-document-rendering-suppression-for-view-transitions">视图过渡的渲染抑制</span>
                <li><span class="dfn-paneled" id="term-for-skip-the-view-transition">跳过视图过渡</span>
                <li><span class="dfn-paneled" id="term-for-dom-viewtransition-skiptransition">skipTransition()</span>
                <li><span class="dfn-paneled" id="term-for-snapshot-containing-block">快照包含块</span>
                <li><span class="dfn-paneled"
                        id="term-for-dom-document-startviewtransition">startViewTransition(updateCallback)</span>
                <li><span class="dfn-paneled" id="term-for-viewtransition-update-callback">更新回调</span>
                <li><span class="dfn-paneled" id="term-for-viewtransition-update-callback-done-promise">更新回调完成承诺</span>
                <li><span class="dfn-paneled"
                        id="term-for-dom-viewtransition-updatecallbackdone">updateCallbackDone</span>
                <li><span class="dfn-paneled" id="term-for-view-transition-name">视图过渡名称</span>
                <li><span class="dfn-paneled"
                        id="term-for-view-transition-page-visibility-change-steps">视图过渡页面可见性变更步骤</span>
                <li><span class="dfn-paneled" id="term-for-view-transition-tree">视图过渡树</span>
                <li><span class="dfn-paneled" id="term-for-propdef-view-transition-name">view-transition-name</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS22]</a> 定义以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-element">元素</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSSOM-1]</a> 定义以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-cssomstring">CSSOMString</span>
                <li><span class="dfn-paneled" id="term-for-cssrule">CSSRule</span>
            </ul>
        <li>
            <a data-link-type="biblio">[DOM]</a> 定义以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-document">Document</span>
                <li><span class="dfn-paneled" id="term-for-element①">Element</span>
                <li><span class="dfn-paneled" id="term-for-concept-tree-ancestor">祖先</span>
                <li><span class="dfn-paneled" id="term-for-concept-class">类</span>
                <li><span class="dfn-paneled" id="term-for-concept-document">文档</span>
                <li><span class="dfn-paneled" id="term-for-document-element">文档元素</span>
                <li><span class="dfn-paneled" id="term-for-concept-id">id</span>
                <li><span class="dfn-paneled" id="term-for-concept-node-document">节点文档</span>
                <li><span class="dfn-paneled" id="term-for-concept-document-origin">源</span>
                <li><span class="dfn-paneled" id="term-for-concept-tree-root">根</span>
            </ul>
        <li>
            <a data-link-type="biblio">[FILTER-EFFECTS-1]</a> 定义以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-propdef-filter">filter</span>
            </ul>
        <li>
            <a data-link-type="biblio">[GEOMETRY-1]</a> 定义以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-matrix">矩阵</span>
                <li><span class="dfn-paneled" id="term-for-multiply">乘法</span>
            </ul>
        <li>
            <a data-link-type="biblio">[HR-TIME-3]</a> 定义以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-dfn-duration">持续时间</span>
            </ul>
        <li>
            <a data-link-type="biblio">[HTML]</a> 定义以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-htmllinkelement">HTMLLinkElement</span>
                <li><span class="dfn-paneled" id="term-for-navigationtype">NavigationType</span>
                <li><span class="dfn-paneled" id="term-for-pageswapevent">PageSwapEvent</span>
                <li><span class="dfn-paneled" id="term-for-dom-pageswapevent-activation">activation</span>
                <li><span class="dfn-paneled" id="term-for-dom-script-blocking">blocking <small>(用于
                            HTMLScriptElement)</small></span>
                <li><span class="dfn-paneled" id="term-for-dom-style-blocking">blocking <small>(用于
                            HTMLStyleElement)</small></span>
                <li><span class="dfn-paneled"
                        id="term-for-concept-settings-object-cross-origin-isolated-capability">跨源隔离能力</span>
                <li><span class="dfn-paneled" id="term-for-dom-manipulation-task-source">DOM 操作任务源</span>
                <li><span class="dfn-paneled" id="term-for-link-type-expect">expect</span>
                <li><span class="dfn-paneled" id="term-for-fully-active">完全活动</span>
                <li><span class="dfn-paneled" id="term-for-has-been-revealed">已被揭示</span>
                <li><span class="dfn-paneled" id="term-for-in-parallel">并行</span>
                <li><span class="dfn-paneled" id="term-for-latest-entry">最新条目</span>
                <li><span class="dfn-paneled" id="term-for-event-pagereveal">pagereveal</span>
                <li><span class="dfn-paneled" id="term-for-event-pageswap">pageswap</span>
                <li><span class="dfn-paneled" id="term-for-dom-navigationtype-push">push</span>
                <li><span class="dfn-paneled" id="term-for-queue-a-global-task">排队全局任务</span>
                <li><span class="dfn-paneled" id="term-for-reactivate-a-document">重新激活</span>
                <li><span class="dfn-paneled" id="term-for-concept-relevant-global">相关全局对象</span>
                <li><span class="dfn-paneled" id="term-for-concept-relevant-realm">相关域</span>
                <li><span class="dfn-paneled" id="term-for-dom-navigationtype-reload">reload</span>
                <li><span class="dfn-paneled" id="term-for-render-blocking-mechanism">渲染阻塞机制</span>
                <li><span class="dfn-paneled" id="term-for-rendering-opportunity">渲染机会</span>
                <li><span class="dfn-paneled" id="term-for-dom-navigationtype-replace">replace</span>
                <li><span class="dfn-paneled" id="term-for-same-origin">同源</span>
                <li><span class="dfn-paneled" id="term-for-dom-sessionstorage">sessionStorage</span>
                <li><span class="dfn-paneled" id="term-for-concept-task">任务</span>
                <li><span class="dfn-paneled" id="term-for-dom-navigationtype-traverse">traverse</span>
                <li><span class="dfn-paneled" id="term-for-dom-pagerevealevent-viewtransition">viewTransition
                        <small>(用于 PageRevealEvent)</small></span>
                <li><span class="dfn-paneled" id="term-for-dom-pageswapevent-viewtransition">viewTransition
                        <small>(用于 PageSwapEvent)</small></span>
                <li><span class="dfn-paneled" id="term-for-visibility-state">可见性状态</span>
                <li><span class="dfn-paneled" id="term-for-was-created-via-cross-origin-redirects">通过跨源重定向创建</span>
            </ul>
        <li>
            <a data-link-type="biblio">[INFRA]</a> 定义以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-list-append">追加</span>
                <li><span class="dfn-paneled" id="term-for-assert">断言</span>
                <li><span class="dfn-paneled" id="term-for-list-clone">克隆 <small>(用于列表)</small></span>
                <li><span class="dfn-paneled" id="term-for-map-clone">克隆 <small>(用于映射)</small></span>
                <li><span class="dfn-paneled" id="term-for-string-concatenate">连接</span>
                <li><span class="dfn-paneled" id="term-for-list-contain">包含</span>
                <li><span class="dfn-paneled" id="term-for-implementation-defined">实现定义</span>
                <li><span class="dfn-paneled" id="term-for-struct-item">项目</span>
                <li><span class="dfn-paneled" id="term-for-list">列表</span>
                <li><span class="dfn-paneled" id="term-for-ordered-map">映射</span>
                <li><span class="dfn-paneled" id="term-for-ordered-set">集合</span>
                <li><span class="dfn-paneled" id="term-for-struct">结构</span>
                <li><span class="dfn-paneled" id="term-for-tuple">元组</span>
            </ul>
        <li>
            <a data-link-type="biblio">[SELECTORS-3]</a> 定义以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-x">*</span>
            </ul>
        <li>
            <a data-link-type="biblio">[SELECTORS-4]</a> 定义以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-class-selector">类选择器</span>
                <li><span class="dfn-paneled" id="term-for-selector">选择器</span>
                <li><span class="dfn-paneled" id="term-for-specificity">特异性</span>
                <li><span class="dfn-paneled" id="term-for-type-selector">类型选择器</span>
            </ul>
        <li>
            <a data-link-type="biblio">[WEBIDL]</a> 定义以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-aborterror">AbortError</span>
                <li><span class="dfn-paneled" id="term-for-idl-DOMException">DOMException</span>
                <li><span class="dfn-paneled" id="term-for-idl-DOMString">DOMString</span>
                <li><span class="dfn-paneled" id="term-for-Exposed">Exposed</span>
                <li><span class="dfn-paneled" id="term-for-idl-frozen-array">FrozenArray</span>
                <li><span class="dfn-paneled" id="term-for-invalidstateerror">InvalidStateError</span>
                <li><span class="dfn-paneled" id="term-for-SameObject">SameObject</span>
                <li><span class="dfn-paneled" id="term-for-getter-steps">获取器步骤</span>
                <li><span class="dfn-paneled" id="term-for-method-steps">方法步骤</span>
                <li><span class="dfn-paneled" id="term-for-resolve">解析</span>
                <li><span class="dfn-paneled" id="term-for-idl-sequence">序列</span>
                <li><span class="dfn-paneled" id="term-for-this">this</span>
            </ul>
    </ul>
    <h2 class="no-num no-ref heading settled" id="references"><span class="content">参考文献</span><a class="self-link"
            href="#references"></a></h2>
    <h3 class="no-num no-ref heading settled" id="normative"><span class="content">规范性参考文献</span><a class="self-link"
            href="#normative"></a></h3>
    <dl>
        <dt id="biblio-css-backgrounds-3">[CSS-BACKGROUNDS-3]
        <dd>Elika Etemad; Brad Kemper. <a href="https://www.w3.org/TR/css-backgrounds-3/"><cite>CSS 背景和边框模块 3
                    级</cite></a>. 2024年3月11日. CR. URL: <a
                href="https://www.w3.org/TR/css-backgrounds-3/">https://www.w3.org/TR/css-backgrounds-3/</a>
        <dt id="biblio-css-borders-4">[CSS-BORDERS-4]
        <dd><a href="https://drafts.csswg.org/css-borders-4/"><cite>CSS 边框和盒装饰模块 4 级</cite></a>. 编辑草案. URL: <a
                href="https://drafts.csswg.org/css-borders-4/">https://drafts.csswg.org/css-borders-4/</a>
        <dt id="biblio-css-box-4">[CSS-BOX-4]
        <dd>Elika Etemad. <a href="https://www.w3.org/TR/css-box-4/"><cite>CSS 盒模型模块 4 级</cite></a>. 2024年8月4日. WD.
            URL: <a href="https://www.w3.org/TR/css-box-4/">https://www.w3.org/TR/css-box-4/</a>
        <dt id="biblio-css-cascade-5">[CSS-CASCADE-5]
        <dd>Elika Etemad; Miriam Suzanne; Tab Atkins Jr.. <a href="https://www.w3.org/TR/css-cascade-5/"><cite>CSS
                    层叠和继承 5 级</cite></a>. 2022年1月13日. CR. URL: <a
                href="https://www.w3.org/TR/css-cascade-5/">https://www.w3.org/TR/css-cascade-5/</a>
        <dt id="biblio-css-color-4">[CSS-COLOR-4]
        <dd>Chris Lilley; Tab Atkins Jr.; Lea Verou. <a href="https://www.w3.org/TR/css-color-4/"><cite>CSS 颜色模块 4
                    级</cite></a>. 2024年2月13日. CR. URL: <a
                href="https://www.w3.org/TR/css-color-4/">https://www.w3.org/TR/css-color-4/</a>
        <dt id="biblio-css-contain-2">[CSS-CONTAIN-2]
        <dd>Tab Atkins Jr.; Florian Rivoal; Vladimir Levin. <a href="https://www.w3.org/TR/css-contain-2/"><cite>CSS
                    包含模块 2 级</cite></a>. 2022年9月17日. WD. URL: <a
                href="https://www.w3.org/TR/css-contain-2/">https://www.w3.org/TR/css-contain-2/</a>
        <dt id="biblio-css-images-3">[CSS-IMAGES-3]
        <dd>Tab Atkins Jr.; Elika Etemad; Lea Verou. <a href="https://www.w3.org/TR/css-images-3/"><cite>CSS 图像模块 3
                    级</cite></a>. 2023年12月18日. CR. URL: <a
                href="https://www.w3.org/TR/css-images-3/">https://www.w3.org/TR/css-images-3/</a>
        <dt id="biblio-css-masking-1">[CSS-MASKING-1]
        <dd>Dirk Schulze; Brian Birtles; Tab Atkins Jr.. <a href="https://www.w3.org/TR/css-masking-1/"><cite>CSS
                    遮罩模块 1 级</cite></a>. 2021年8月5日. CR. URL: <a
                href="https://www.w3.org/TR/css-masking-1/">https://www.w3.org/TR/css-masking-1/</a>
        <dt id="biblio-css-overflow-3">[CSS-OVERFLOW-3]
        <dd>Elika Etemad; Florian Rivoal. <a href="https://www.w3.org/TR/css-overflow-3/"><cite>CSS 溢出模块 3
                    级</cite></a>. 2023年3月29日. WD. URL: <a
                href="https://www.w3.org/TR/css-overflow-3/">https://www.w3.org/TR/css-overflow-3/</a>
        <dt id="biblio-css-scoping-1">[CSS-SCOPING-1]
        <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://www.w3.org/TR/css-scoping-1/"><cite>CSS 作用域模块 1
                    级</cite></a>. 2014年4月3日. WD. URL: <a
                href="https://www.w3.org/TR/css-scoping-1/">https://www.w3.org/TR/css-scoping-1/</a>
        <dt id="biblio-css-sizing-3">[CSS-SIZING-3]
        <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://www.w3.org/TR/css-sizing-3/"><cite>CSS 盒尺寸模块 3
                    级</cite></a>. 2021年12月17日. WD. URL: <a
                href="https://www.w3.org/TR/css-sizing-3/">https://www.w3.org/TR/css-sizing-3/</a>
        <dt id="biblio-css-syntax-3">[CSS-SYNTAX-3]
        <dd>Tab Atkins Jr.; Simon Sapin. <a href="https://www.w3.org/TR/css-syntax-3/"><cite>CSS 语法模块 3
                    级</cite></a>. 2021年12月24日. CR. URL: <a
                href="https://www.w3.org/TR/css-syntax-3/">https://www.w3.org/TR/css-syntax-3/</a>
        <dt id="biblio-css-transforms-1">[CSS-TRANSFORMS-1]
        <dd>Simon Fraser; et al. <a href="https://www.w3.org/TR/css-transforms-1/"><cite>CSS 变换模块 1 级</cite></a>.
            2019年2月14日. CR. URL: <a
                href="https://www.w3.org/TR/css-transforms-1/">https://www.w3.org/TR/css-transforms-1/</a>
        <dt id="biblio-css-transforms-2">[CSS-TRANSFORMS-2]
        <dd>Tab Atkins Jr.; et al. <a href="https://www.w3.org/TR/css-transforms-2/"><cite>CSS 变换模块 2 级</cite></a>.
            2021年11月9日. WD. URL: <a
                href="https://www.w3.org/TR/css-transforms-2/">https://www.w3.org/TR/css-transforms-2/</a>
        <dt id="biblio-css-ui-4">[CSS-UI-4]
        <dd>Florian Rivoal. <a href="https://www.w3.org/TR/css-ui-4/"><cite>CSS 基本用户界面模块 4 级</cite></a>. 2021年3月16日.
            WD. URL: <a href="https://www.w3.org/TR/css-ui-4/">https://www.w3.org/TR/css-ui-4/</a>
        <dt id="biblio-css-values-4">[CSS-VALUES-4]
        <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://www.w3.org/TR/css-values-4/"><cite>CSS 值和单位模块 4
                    级</cite></a>. 2024年3月12日. WD. URL: <a
                href="https://www.w3.org/TR/css-values-4/">https://www.w3.org/TR/css-values-4/</a>
        <dt id="biblio-css-view-transitions-1">[CSS-VIEW-TRANSITIONS-1]
        <dd>Tab Atkins Jr.; Jake Archibald; Khushal Sagar. <a
                href="https://www.w3.org/TR/css-view-transitions-1/"><cite>CSS 视图过渡模块 1 级</cite></a>. 2024年3月28日.
            CR. URL: <a
                href="https://www.w3.org/TR/css-view-transitions-1/">https://www.w3.org/TR/css-view-transitions-1/</a>
        <dt id="biblio-css22">[CSS22]
        <dd>Bert Bos. <a href="https://www.w3.org/TR/CSS22/"><cite>层叠样式表 2 级修订版 2 (CSS 2.2) 规范</cite></a>.
            2016年4月12日. WD. URL: <a href="https://www.w3.org/TR/CSS22/">https://www.w3.org/TR/CSS22/</a>
        <dt id="biblio-cssom-1">[CSSOM-1]
        <dd>Daniel Glazman; Emilio Cobos Álvarez. <a href="https://www.w3.org/TR/cssom-1/"><cite>CSS 对象模型
                    (CSSOM)</cite></a>. 2021年8月26日. WD. URL: <a
                href="https://www.w3.org/TR/cssom-1/">https://www.w3.org/TR/cssom-1/</a>
        <dt id="biblio-dom">[DOM]
        <dd>Anne van Kesteren. <a href="https://dom.spec.whatwg.org/"><cite>DOM 标准</cite></a>. 现行标准. URL: <a
                href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
        <dt id="biblio-filter-effects-1">[FILTER-EFFECTS-1]
        <dd>Dirk Schulze; Dean Jackson. <a href="https://www.w3.org/TR/filter-effects-1/"><cite>滤镜效果模块 1
                    级</cite></a>. 2018年12月18日. WD. URL: <a
                href="https://www.w3.org/TR/filter-effects-1/">https://www.w3.org/TR/filter-effects-1/</a>
        <dt id="biblio-geometry-1">[GEOMETRY-1]
        <dd>Simon Pieters; Chris Harrelson. <a href="https://www.w3.org/TR/geometry-1/"><cite>几何接口模块 1 级</cite></a>.
            2018年12月4日. CR. URL: <a href="https://www.w3.org/TR/geometry-1/">https://www.w3.org/TR/geometry-1/</a>
        <dt id="biblio-hr-time-3">[HR-TIME-3]
        <dd>Yoav Weiss. <a href="https://www.w3.org/TR/hr-time-3/"><cite>高分辨率时间</cite></a>. 2023年7月19日. WD. URL: <a
                href="https://www.w3.org/TR/hr-time-3/">https://www.w3.org/TR/hr-time-3/</a>
        <dt id="biblio-html">[HTML]
        <dd>Anne van Kesteren; et al. <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML 标准</cite></a>.
            现行标准. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
        <dt id="biblio-infra">[INFRA]
        <dd>Anne van Kesteren; Domenic Denicola. <a href="https://infra.spec.whatwg.org/"><cite>基础架构标准</cite></a>.
            现行标准. URL: <a href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
        <dt id="biblio-rfc2119">[RFC2119]
        <dd>S. Bradner. <a href="https://datatracker.ietf.org/doc/html/rfc2119"><cite>RFC 中用于表示需求级别的关键词</cite></a>.
            1997年3月. 最佳当前实践. URL: <a
                href="https://datatracker.ietf.org/doc/html/rfc2119">https://datatracker.ietf.org/doc/html/rfc2119</a>
        <dt id="biblio-selectors-3">[SELECTORS-3]
        <dd>Tantek Çelik; et al. <a href="https://www.w3.org/TR/selectors-3/"><cite>选择器 3 级</cite></a>. 2018年11月6日.
            REC. URL: <a href="https://www.w3.org/TR/selectors-3/">https://www.w3.org/TR/selectors-3/</a>
        <dt id="biblio-selectors-4">[SELECTORS-4]
        <dd>Elika Etemad; Tab Atkins Jr.. <a href="https://www.w3.org/TR/selectors-4/"><cite>选择器 4 级</cite></a>.
            2022年11月11日. WD. URL: <a href="https://www.w3.org/TR/selectors-4/">https://www.w3.org/TR/selectors-4/</a>
        <dt id="biblio-webidl">[WEBIDL]
        <dd>Edgar Chen; Timothy Gu. <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL 标准</cite></a>. 现行标准.
            URL: <a href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
    </dl>
    <h3 class="no-num no-ref heading settled" id="informative"><span class="content">参考性参考文献</span><a class="self-link"
            href="#informative"></a></h3>
    <dl>
        <dt id="biblio-css-conditional-3">[CSS-CONDITIONAL-3]
        <dd>Chris Lilley; David Baron; Elika Etemad. <a href="https://www.w3.org/TR/css-conditional-3/"><cite>CSS
                    条件规则模块 3 级</cite></a>. 2024年8月15日. CR. URL: <a
                href="https://www.w3.org/TR/css-conditional-3/">https://www.w3.org/TR/css-conditional-3/</a>
        <dt id="biblio-css-position-3">[CSS-POSITION-3]
        <dd>Elika Etemad; Tab Atkins Jr.. <a href="https://www.w3.org/TR/css-position-3/"><cite>CSS 定位布局模块 3
                    级</cite></a>. 2024年8月10日. WD. URL: <a
                href="https://www.w3.org/TR/css-position-3/">https://www.w3.org/TR/css-position-3/</a>
        <dt id="biblio-css-shadow-parts-1">[CSS-SHADOW-PARTS-1]
        <dd>Tab Atkins Jr.; Fergal Daly. <a href="https://www.w3.org/TR/css-shadow-parts-1/"><cite>CSS
                    阴影部件</cite></a>. 2018年11月15日. WD. URL: <a
                href="https://www.w3.org/TR/css-shadow-parts-1/">https://www.w3.org/TR/css-shadow-parts-1/</a>
    </dl>
    <h2 class="no-num no-ref heading settled" id="property-index"><span class="content">属性索引</span><a class="self-link"
            href="#property-index"></a></h2>
    <div class="big-element-wrapper">
        <table class="index">
            <thead>
                <tr>
                    <th scope="col">名称
                    <th scope="col">值
                    <th scope="col">初始值
                    <th scope="col">适用于
                    <th scope="col">继承
                    <th scope="col">百分比
                    <th scope="col">动画类型
                    <th scope="col">标准顺序
                    <th scope="col">计算值
            <tbody>
                <tr>
                    <th scope="row"><a class="css" data-link-type="property" href="#propdef-view-transition-class"
                            id="ref-for-propdef-view-transition-class⑨">view-transition-class</a>
                    <td>none | &lt;custom-ident>+
                    <td>none
                    <td>所有元素
                    <td>否
                    <td>不适用
                    <td>离散
                    <td>按语法
                    <td>按指定
                <tr>
                    <th scope="row"><a class="css" data-link-type="property" href="#propdef-view-transition-group"
                            id="ref-for-propdef-view-transition-group⑨">view-transition-group</a>
                    <td>normal | contain | nearest | &lt;custom-ident>
                    <td>normal
                    <td>所有元素
                    <td>否
                    <td>不适用
                    <td>离散
                    <td>按语法
                    <td>按指定
        </table>
    </div>
    <h3 class="no-num no-ref heading settled" id="view-transition-descriptor-table"><span class="content"><a class="css"
                data-link-type="at-rule" href="#at-view-transition-rule"
                id="ref-for-at-view-transition-rule①⑥">@view-transition</a> 描述符</span><a class="self-link"
            href="#view-transition-descriptor-table"></a></h3>
    <div class="big-element-wrapper">
        <table class="index">
            <thead>
                <tr>
                    <th scope="col">名称
                    <th scope="col">值
                    <th scope="col">初始值
            <tbody>
                <tr>
                    <th scope="row"><a class="css" data-link-type="descriptor"
                            href="#descdef-view-transition-navigation"
                            id="ref-for-descdef-view-transition-navigation">navigation</a>
                    <td>auto | none
                    <td>none
                <tr>
                    <th scope="row"><a class="css" data-link-type="descriptor" href="#descdef-view-transition-types"
                            id="ref-for-descdef-view-transition-types">types</a>
                    <td>none | &lt;custom-ident>+
                    <td>none
        </table>
    </div>
    <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL 索引</span><a class="self-link"
            href="#idl-index"></a></h2>
    <pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <a href="#cssviewtransitionrule"><code><c- g>CSSViewTransitionRule</c-></code></a> : <a data-link-type="idl-name" href="https://www.w3.org/TR/cssom-1/#cssrule"><c- n>CSSRule</c-></a> {
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://www.w3.org/TR/cssom-1/#cssomstring"><c- n>CSSOMString</c-></a> <a data-readonly data-type="CSSOMString" href="#dom-cssviewtransitionrule-navigation"><code><c- g>navigation</c-></code></a>;
  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject"><c- g>SameObject</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-frozen-array"><c- b>FrozenArray</c-></a>&lt;<a data-link-type="idl-name" href="https://www.w3.org/TR/cssom-1/#cssomstring"><c- n>CSSOMString</c-></a>> <a data-readonly data-type="FrozenArray<CSSOMString>" href="#dom-cssviewtransitionrule-types"><code><c- g>types</c-></code></a>;
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <a href="#viewtransitiontypeset"><code><c- g>ViewTransitionTypeSet</c-></code></a> {
  <c- b>setlike</c->&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a>>;
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition"><c- g>ViewTransition</c-></a> {
  <c- b>attribute</c-> <a data-link-type="idl-name" href="#viewtransitiontypeset"><c- n>ViewTransitionTypeSet</c-></a> <a data-type="ViewTransitionTypeSet" href="#dom-viewtransition-types"><code><c- g>types</c-></code></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-startviewtransitionoptions"><code><c- g>StartViewTransitionOptions</c-></code></a> {
  <a data-link-type="idl-name" href="https://drafts.csswg.org/css-view-transitions-1/#callbackdef-viewtransitionupdatecallback"><c- n>ViewTransitionUpdateCallback</c-></a>? <a data-default="null" data-type="ViewTransitionUpdateCallback? " href="#dom-startviewtransitionoptions-update"><code><c- g>update</c-></code></a> = <c- b>null</c->;
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a>>? <a data-default="null" data-type="sequence<DOMString>? " href="#dom-startviewtransitionoptions-types"><code><c- g>types</c-></code></a> = <c- b>null</c->;
};

<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://dom.spec.whatwg.org/#document"><c- g>Document</c-></a> {
  <a data-link-type="idl-name" href="https://www.w3.org/TR/css-view-transitions-1/#viewtransition"><c- n>ViewTransition</c-></a> <a class="idl-code" data-link-type="method" href="#dom-document-startviewtransition"><c- g>startViewTransition</c-></a>(<c- b>optional</c-> (<a data-link-type="idl-name" href="https://drafts.csswg.org/css-view-transitions-1/#callbackdef-viewtransitionupdatecallback"><c- n>ViewTransitionUpdateCallback</c-></a> <c- b>or</c-> <a data-link-type="idl-name" href="#dictdef-startviewtransitionoptions"><c- n>StartViewTransitionOptions</c-></a>) <a href="#dom-document-startviewtransition-callbackoptions-callbackoptions"><code><c- g>callbackOptions</c-></code></a> = {});
};

</pre>
    <h2 class="no-num no-ref heading settled" id="issues-index"><span class="content">问题索引</span><a class="self-link"
            href="#issues-index"></a></h2>
    <div style="counter-reset:issue">
        <div class="issue">这个行为是否应该通过CSS属性进行选择加入/退出？参见<a
                href="https://github.com/w3c/csswg-drafts/issues/11078">问题11078</a>。<a class="issue-return"
                href="#issue-93264331" title="跳转到章节">↵</a></div>
        <div class="issue">虽然<a data-link-type="dfn"
                href="https://www.w3.org/TR/css-view-transitions-1/#capture-the-old-state">捕获旧状态</a>
            在这里显示为同步步骤，但实际上是异步步骤，
            因为将元素渲染为图像无法同步完成。这在L1规范中应该更明确。<a class="issue-return" href="#issue-ca114a78" title="跳转到章节">↵</a></div>
        <div class="issue">指定<a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-overflow-3/#propdef-overflow">overflow</a>和包含的行为。参见<a
                href="https://github.com/w3c/csswg-drafts/issues/11079">问题11079</a>。<a class="issue-return"
                href="#issue-d24249d6" title="跳转到章节">↵</a></div>
    </div>
    <aside class="dfn-panel" data-for="at-view-transition-rule">
        <b><a href="#at-view-transition-rule">#at-view-transition-rule</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-at-view-transition-rule">1. Introduction</a>
            <li><a href="#ref-for-at-view-transition-rule①">2.1.1. Activation</a>
            <li><a href="#ref-for-at-view-transition-rule②">2.2. Examples</a>
            <li><a href="#ref-for-at-view-transition-rule③">2.3.1. The @view-transition rule</a> <a
                    href="#ref-for-at-view-transition-rule④">(2)</a> <a href="#ref-for-at-view-transition-rule⑤">(3)</a>
                <a href="#ref-for-at-view-transition-rule⑥">(4)</a> <a href="#ref-for-at-view-transition-rule⑦">(5)</a>
                <a href="#ref-for-at-view-transition-rule⑧">(6)</a>
            <li><a href="#ref-for-at-view-transition-rule⑨">2.3.2. The navigation descriptor</a> <a
                    href="#ref-for-at-view-transition-rule①⓪">(2)</a>
            <li><a href="#ref-for-at-view-transition-rule①①">2.3.3. Accessing the @view-transition rule using
                    CSSOM</a>
                <a href="#ref-for-at-view-transition-rule①②">(2)</a>
            <li><a href="#ref-for-at-view-transition-rule①③">3.5. Activating the transition type for cross-document
                    view
                    transitions</a>
            <li><a href="#ref-for-at-view-transition-rule①④">9.3. Resolving the @view-transition rule</a> <a
                    href="#ref-for-at-view-transition-rule①⑤">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="view-transition-navigation">
        <b><a href="#view-transition-navigation">#view-transition-navigation</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-view-transition-navigation">2.3.1. The @view-transition rule</a>
            <li><a href="#ref-for-view-transition-navigation①">2.3.2. The navigation descriptor</a>
            <li><a href="#ref-for-view-transition-navigation②">9.3. Resolving the @view-transition rule</a> <a
                    href="#ref-for-view-transition-navigation③">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="valdef-view-transition-navigation-none">
        <b><a
                href="#valdef-view-transition-navigation-none">#valdef-view-transition-navigation-none</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-valdef-view-transition-navigation-none">9.3. Resolving the @view-transition
                    rule</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="valdef-view-transition-navigation-auto">
        <b><a
                href="#valdef-view-transition-navigation-auto">#valdef-view-transition-navigation-auto</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-valdef-view-transition-navigation-auto">2.3.2. The navigation descriptor</a>
            <li><a href="#ref-for-valdef-view-transition-navigation-auto①">9.3. Resolving the @view-transition
                    rule</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="cssviewtransitionrule">
        <b><a href="#cssviewtransitionrule">#cssviewtransitionrule</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-cssviewtransitionrule">2.3.3. Accessing the @view-transition rule using CSSOM</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-cssviewtransitionrule-navigation">
        <b><a href="#dom-cssviewtransitionrule-navigation">#dom-cssviewtransitionrule-navigation</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-cssviewtransitionrule-navigation">2.3.3. Accessing the @view-transition rule
                    using
                    CSSOM</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-cssviewtransitionrule-types">
        <b><a href="#dom-cssviewtransitionrule-types">#dom-cssviewtransitionrule-types</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-cssviewtransitionrule-types">2.3.3. Accessing the @view-transition rule using
                    CSSOM</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="active-view-transition-pseudo">
        <b><a href="#active-view-transition-pseudo">#active-view-transition-pseudo</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-active-view-transition-pseudo">3.1. Overview</a> <a
                    href="#ref-for-active-view-transition-pseudo①">(2)</a>
            <li><a href="#ref-for-active-view-transition-pseudo②">3.3.1. The :active-view-transition
                    pseudo-class</a> <a href="#ref-for-active-view-transition-pseudo③">(2)</a> <a
                    href="#ref-for-active-view-transition-pseudo④">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="active-view-transition-type-pseudo">
        <b><a href="#active-view-transition-type-pseudo">#active-view-transition-type-pseudo</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-active-view-transition-type-pseudo">3.1. Overview</a> <a
                    href="#ref-for-active-view-transition-type-pseudo①">(2)</a>
            <li><a href="#ref-for-active-view-transition-type-pseudo②">3.3.2. The :active-view-transition-type()
                    pseudo-class</a> <a href="#ref-for-active-view-transition-type-pseudo③">(2)</a> <a
                    href="#ref-for-active-view-transition-type-pseudo④">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="viewtransitiontypeset">
        <b><a href="#viewtransitiontypeset">#viewtransitiontypeset</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-viewtransitiontypeset">3.4. Changing the types of an ongoing view transition</a>
                <a href="#ref-for-viewtransitiontypeset①">(2)</a> <a href="#ref-for-viewtransitiontypeset②">(3)</a>
            <li><a href="#ref-for-viewtransitiontypeset③">9.1.2. Additions to ViewTransition</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-viewtransition-types">
        <b><a href="#dom-viewtransition-types">#dom-viewtransition-types</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-viewtransition-types">2.1.3.1. Handling the view transition in the old
                    document</a>
            <li><a href="#ref-for-dom-viewtransition-types①">2.1.3.2. Handling the view transition in the new
                    document</a>
            <li><a href="#ref-for-dom-viewtransition-types②">2.1.4. Lifecycle</a> <a
                    href="#ref-for-dom-viewtransition-types③">(2)</a>
            <li><a href="#ref-for-dom-viewtransition-types④">3.1. Overview</a>
            <li><a href="#ref-for-dom-viewtransition-types⑤">3.4. Changing the types of an ongoing view
                    transition</a>
            <li><a href="#ref-for-dom-viewtransition-types⑥">5. Extending document.startViewTransition()</a>
            <li><a href="#ref-for-dom-viewtransition-types⑦">9.4.2. Setup the outbound transition when ready to swap
                    pages</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="view-transition-types">
        <b><a href="#view-transition-types">#view-transition-types</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-view-transition-types">2.3.1. The @view-transition rule</a>
            <li><a href="#ref-for-view-transition-types①">3.1. Overview</a>
            <li><a href="#ref-for-view-transition-types②">3.5. Activating the transition type for cross-document
                    view
                    transitions</a> <a href="#ref-for-view-transition-types③">(2)</a>
            <li><a href="#ref-for-view-transition-types④">9.3. Resolving the @view-transition rule</a>
            <li><a href="#ref-for-view-transition-types⑤">9.4.2. Setup the outbound transition when ready to swap
                    pages</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="propdef-view-transition-class">
        <b><a href="#propdef-view-transition-class">#propdef-view-transition-class</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-propdef-view-transition-class">1. Introduction</a>
            <li><a href="#ref-for-propdef-view-transition-class①">4.3. The view-transition-class property</a> <a
                    href="#ref-for-propdef-view-transition-class②">(2)</a> <a
                    href="#ref-for-propdef-view-transition-class③">(3)</a> <a
                    href="#ref-for-propdef-view-transition-class④">(4)</a> <a
                    href="#ref-for-propdef-view-transition-class⑤">(5)</a> <a
                    href="#ref-for-propdef-view-transition-class⑥">(6)</a>
            <li><a href="#ref-for-propdef-view-transition-class⑦">9.6. Capturing the view-transition-class</a> <a
                    href="#ref-for-propdef-view-transition-class⑧">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="typedef-pt-name-and-class-selector">
        <b><a href="#typedef-pt-name-and-class-selector">#typedef-pt-name-and-class-selector</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-typedef-pt-name-and-class-selector">4.4. Additions to named view transition
                    pseudo-elements</a> <a href="#ref-for-typedef-pt-name-and-class-selector①">(2)</a> <a
                    href="#ref-for-typedef-pt-name-and-class-selector②">(3)</a> <a
                    href="#ref-for-typedef-pt-name-and-class-selector③">(4)</a> <a
                    href="#ref-for-typedef-pt-name-and-class-selector④">(5)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="typedef-pt-class-selector">
        <b><a href="#typedef-pt-class-selector">#typedef-pt-class-selector</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-typedef-pt-class-selector">4.4. Additions to named view transition
                    pseudo-elements</a>
                <a href="#ref-for-typedef-pt-class-selector①">(2)</a> <a
                    href="#ref-for-typedef-pt-class-selector②">(3)</a> <a
                    href="#ref-for-typedef-pt-class-selector③">(4)</a> <a
                    href="#ref-for-typedef-pt-class-selector④">(5)</a> <a
                    href="#ref-for-typedef-pt-class-selector⑤">(6)</a> <a
                    href="#ref-for-typedef-pt-class-selector⑥">(7)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dictdef-startviewtransitionoptions">
        <b><a href="#dictdef-startviewtransitionoptions">#dictdef-startviewtransitionoptions</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dictdef-startviewtransitionoptions">5. Extending
                    document.startViewTransition()</a> <a href="#ref-for-dictdef-startviewtransitionoptions①">(2)</a> <a
                    href="#ref-for-dictdef-startviewtransitionoptions②">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-startviewtransitionoptions-update">
        <b><a href="#dom-startviewtransitionoptions-update">#dom-startviewtransitionoptions-update</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-startviewtransitionoptions-update">5. Extending
                    document.startViewTransition()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-startviewtransitionoptions-types">
        <b><a href="#dom-startviewtransitionoptions-types">#dom-startviewtransitionoptions-types</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-startviewtransitionoptions-types">3.5. Activating the transition type for
                    cross-document view transitions</a>
            <li><a href="#ref-for-dom-startviewtransitionoptions-types①">5. Extending
                    document.startViewTransition()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-document-startviewtransition">
        <b><a href="#dom-document-startviewtransition">#dom-document-startviewtransition</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-document-startviewtransition">2.1.1. Activation</a>
            <li><a href="#ref-for-dom-document-startviewtransition①">2.1.2. Waiting for the new state to
                    stabilize</a>
            <li><a href="#ref-for-dom-document-startviewtransition②">2.1.3. Customization</a>
            <li><a href="#ref-for-dom-document-startviewtransition③">3.1. Overview</a>
            <li><a href="#ref-for-dom-document-startviewtransition④">3.5. Activating the transition type for
                    cross-document view transitions</a>
            <li><a href="#ref-for-dom-document-startviewtransition⑤">5. Extending document.startViewTransition()</a>
                <a href="#ref-for-dom-document-startviewtransition⑥">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="propdef-view-transition-group">
        <b><a href="#propdef-view-transition-group">#propdef-view-transition-group</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-propdef-view-transition-group">7.1. Overview</a>
            <li><a href="#ref-for-propdef-view-transition-group①">7.3. The view-transition-group property</a> <a
                    href="#ref-for-propdef-view-transition-group②">(2)</a> <a
                    href="#ref-for-propdef-view-transition-group③">(3)</a>
            <li><a href="#ref-for-propdef-view-transition-group④">9.7. Capturing and applying
                    view-transition-group</a>
            <li><a href="#ref-for-propdef-view-transition-group⑤">9.7.1. Resolving the view-transition-group
                    value</a>
                <a href="#ref-for-propdef-view-transition-group⑥">(2)</a>
            <li><a href="#ref-for-propdef-view-transition-group⑦">9.7.4. Compute the old view-transition-group</a>
            <li><a href="#ref-for-propdef-view-transition-group⑧">9.7.5. Compute the new view-transition-group</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="layered-capture-properties">
        <b><a href="#layered-capture-properties">#layered-capture-properties</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-layered-capture-properties">9.8.1. Compute the layered-capture style</a>
            <li><a href="#ref-for-layered-capture-properties①">9.8.7. Apply the new layered-capture properties to
                    ::view-transition-group()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="document-inbound-view-transition-params">
        <b><a
                href="#document-inbound-view-transition-params">#document-inbound-view-transition-params</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-document-inbound-view-transition-params">9.2. Additions to the view transition
                    page-visibility change steps</a>
            <li><a href="#ref-for-document-inbound-view-transition-params①">9.4.2. Setup the outbound transition
                    when
                    ready to swap pages</a> <a href="#ref-for-document-inbound-view-transition-params②">(2)</a> <a
                    href="#ref-for-document-inbound-view-transition-params③">(3)</a>
            <li><a href="#ref-for-document-inbound-view-transition-params④">9.5. Activating the view transition in
                    the
                    new Document</a> <a href="#ref-for-document-inbound-view-transition-params⑤">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="document-can-initiate-outbound-view-transition">
        <b><a
                href="#document-can-initiate-outbound-view-transition">#document-can-initiate-outbound-view-transition</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-document-can-initiate-outbound-view-transition">9.4.1. Check eligibility for
                    outbound
                    cross-document view transition</a>
            <li><a href="#ref-for-document-can-initiate-outbound-view-transition①">9.4.2. Setup the outbound
                    transition
                    when ready to swap pages</a>
            <li><a href="#ref-for-document-can-initiate-outbound-view-transition②">9.4.3. Update the opt-in flag to
                    reflect the current state</a> <a
                    href="#ref-for-document-can-initiate-outbound-view-transition③">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="viewtransition-active-types">
        <b><a href="#viewtransition-active-types">#viewtransition-active-types</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-viewtransition-active-types">3.1. Overview</a> <a
                    href="#ref-for-viewtransition-active-types①">(2)</a> <a
                    href="#ref-for-viewtransition-active-types②">(3)</a>
            <li><a href="#ref-for-viewtransition-active-types③">3.3.2. The :active-view-transition-type()
                    pseudo-class</a>
            <li><a href="#ref-for-viewtransition-active-types④">3.4. Changing the types of an ongoing view
                    transition</a>
            <li><a href="#ref-for-viewtransition-active-types⑤">3.5. Activating the transition type for
                    cross-document
                    view transitions</a>
            <li><a href="#ref-for-viewtransition-active-types⑥">5. Extending document.startViewTransition()</a>
            <li><a href="#ref-for-viewtransition-active-types⑦">9.4.2. Setup the outbound transition when ready to
                    swap
                    pages</a> <a href="#ref-for-viewtransition-active-types⑧">(2)</a>
            <li><a href="#ref-for-viewtransition-active-types⑨">9.5. Activating the view transition in the new
                    Document</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="viewtransition-outbound-post-capture-steps">
        <b><a
                href="#viewtransition-outbound-post-capture-steps">#viewtransition-outbound-post-capture-steps</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-viewtransition-outbound-post-capture-steps">5. Extending
                    document.startViewTransition()</a>
            <li><a href="#ref-for-viewtransition-outbound-post-capture-steps①">9.4.2. Setup the outbound transition
                    when
                    ready to swap pages</a>
            <li><a href="#ref-for-viewtransition-outbound-post-capture-steps②">9.4.4. Proceed with navigation if
                    view
                    transition is skipped</a> <a href="#ref-for-viewtransition-outbound-post-capture-steps③">(2)</a>
            <li><a href="#ref-for-viewtransition-outbound-post-capture-steps④">9.4.5. Proceed with cross-document
                    view
                    transition after capturing the old state</a> <a
                    href="#ref-for-viewtransition-outbound-post-capture-steps⑤">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="view-transition-params">
        <b><a href="#view-transition-params">#view-transition-params</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-view-transition-params">9.1.1. Additions to Document</a>
            <li><a href="#ref-for-view-transition-params①">9.1.3. Serializable view transition params</a>
            <li><a href="#ref-for-view-transition-params②">9.4.2. Setup the outbound transition when ready to swap
                    pages</a>
            <li><a href="#ref-for-view-transition-params③">9.4.5. Proceed with cross-document view transition after
                    capturing the old state</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="view-transition-params-named-elements">
        <b><a href="#view-transition-params-named-elements">#view-transition-params-named-elements</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-view-transition-params-named-elements">9.4.5. Proceed with cross-document view
                    transition after capturing the old state</a>
            <li><a href="#ref-for-view-transition-params-named-elements①">9.5. Activating the view transition in the
                    new
                    Document</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="view-transition-params-initial-snapshot-containing-block-size">
        <b><a
                href="#view-transition-params-initial-snapshot-containing-block-size">#view-transition-params-initial-snapshot-containing-block-size</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-view-transition-params-initial-snapshot-containing-block-size">9.4.5. Proceed with
                    cross-document view transition after capturing the old state</a>
            <li><a href="#ref-for-view-transition-params-initial-snapshot-containing-block-size①">9.5. Activating
                    the
                    view transition in the new Document</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="captured-element-class-list">
        <b><a href="#captured-element-class-list">#captured-element-class-list</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-captured-element-class-list">4.4. Additions to named view transition
                    pseudo-elements</a>
            <li><a href="#ref-for-captured-element-class-list①">9.6. Capturing the view-transition-class</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="captured-element-containing-group-name">
        <b><a
                href="#captured-element-containing-group-name">#captured-element-containing-group-name</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-captured-element-containing-group-name">9.7.4. Compute the old
                    view-transition-group</a>
            <li><a href="#ref-for-captured-element-containing-group-name①">9.7.5. Compute the new
                    view-transition-group</a>
            <li><a href="#ref-for-captured-element-containing-group-name②">9.7.6. Reparent a
                    ::view-transition-group()
                    to its specified containing group</a>
            <li><a href="#ref-for-captured-element-containing-group-name③">9.7.7. Adjust the group’s transform to be
                    relative to its containing ::view-transition-group()</a> <a
                    href="#ref-for-captured-element-containing-group-name④">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="captured-element-old-layered-capture-style">
        <b><a
                href="#captured-element-old-layered-capture-style">#captured-element-old-layered-capture-style</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-captured-element-old-layered-capture-style">9.8.2. Capture the old layered
                    properties</a>
            <li><a href="#ref-for-captured-element-old-layered-capture-style①">9.8.6. Apply the old layered-capture
                    properties to ::view-transition-group() keyframes</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="captured-element-transform-from-snapshot-containing-block">
        <b><a
                href="#captured-element-transform-from-snapshot-containing-block">#captured-element-transform-from-snapshot-containing-block</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-captured-element-transform-from-snapshot-containing-block">9.7.7. Adjust the
                    group’s
                    transform to be relative to its containing ::view-transition-group()</a> <a
                    href="#ref-for-captured-element-transform-from-snapshot-containing-block①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="captured-element-old-box-properties">
        <b><a href="#captured-element-old-box-properties">#captured-element-old-box-properties</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-captured-element-old-box-properties">9.7.6. Reparent a ::view-transition-group()
                    to
                    its specified containing group</a>
            <li><a href="#ref-for-captured-element-old-box-properties①">9.8.2. Capture the old layered
                    properties</a>
            <li><a href="#ref-for-captured-element-old-box-properties②">9.8.7. Apply the new layered-capture
                    properties
                    to ::view-transition-group()</a> <a href="#ref-for-captured-element-old-box-properties③">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="captured-element-new-box-properties">
        <b><a href="#captured-element-new-box-properties">#captured-element-new-box-properties</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-captured-element-new-box-properties">9.7.7. Adjust the group’s transform to be
                    relative to its containing ::view-transition-group()</a>
            <li><a href="#ref-for-captured-element-new-box-properties①">9.8.7. Apply the new layered-capture
                    properties
                    to ::view-transition-group()</a> <a href="#ref-for-captured-element-new-box-properties②">(2)</a>
                <a href="#ref-for-captured-element-new-box-properties③">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="layered-box-properties">
        <b><a href="#layered-box-properties">#layered-box-properties</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-layered-box-properties">9.2.1. Captured elements extension</a>
            <li><a href="#ref-for-layered-box-properties①">9.8.1. Compute the layered-capture style</a>
            <li><a href="#ref-for-layered-box-properties②">9.8.5. Adjust the nested group transform</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="layered-box-properties-box-sizing">
        <b><a href="#layered-box-properties-box-sizing">#layered-box-properties-box-sizing</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-layered-box-properties-box-sizing">9.8.1. Compute the layered-capture style</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="layered-box-properties-content-box">
        <b><a href="#layered-box-properties-content-box">#layered-box-properties-content-box</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-layered-box-properties-content-box">9.8.1. Compute the layered-capture style</a>
            <li><a href="#ref-for-layered-box-properties-content-box①">9.8.7. Apply the new layered-capture
                    properties
                    to ::view-transition-group()</a> <a href="#ref-for-layered-box-properties-content-box②">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="layered-box-properties-padding-box">
        <b><a href="#layered-box-properties-padding-box">#layered-box-properties-padding-box</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-layered-box-properties-padding-box">9.8.1. Compute the layered-capture style</a>
            <li><a href="#ref-for-layered-box-properties-padding-box①">9.8.5. Adjust the nested group transform</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="resolve-view-transition-rule">
        <b><a href="#resolve-view-transition-rule">#resolve-view-transition-rule</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-resolve-view-transition-rule">9.4.2. Setup the outbound transition when ready to
                    swap
                    pages</a>
            <li><a href="#ref-for-resolve-view-transition-rule①">9.4.3. Update the opt-in flag to reflect the
                    current
                    state</a>
            <li><a href="#ref-for-resolve-view-transition-rule②">9.5. Activating the view transition in the new
                    Document</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="update-the-opt-in-state-for-outbound-transitions">
        <b><a
                href="#update-the-opt-in-state-for-outbound-transitions">#update-the-opt-in-state-for-outbound-transitions</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-update-the-opt-in-state-for-outbound-transitions">2.3.1. The @view-transition
                    rule</a>
            <li><a href="#ref-for-update-the-opt-in-state-for-outbound-transitions①">9.5. Activating the view
                    transition
                    in the new Document</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="document-scoped-view-transition-group">
        <b><a href="#document-scoped-view-transition-group">#document-scoped-view-transition-group</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-document-scoped-view-transition-group">9.7.2. Resolving the containing group
                    name</a>
            <li><a href="#ref-for-document-scoped-view-transition-group①">9.7.3. Resolving the group name</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="nearest-containing-group-name">
        <b><a href="#nearest-containing-group-name">#nearest-containing-group-name</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-nearest-containing-group-name">9.7.3. Resolving the group name</a> <a
                    href="#ref-for-nearest-containing-group-name①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="used-group-name">
        <b><a href="#used-group-name">#used-group-name</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-used-group-name">9.7.4. Compute the old view-transition-group</a>
            <li><a href="#ref-for-used-group-name①">9.7.5. Compute the new view-transition-group</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="valdef-view-transition-group-normal">
        <b><a href="#valdef-view-transition-group-normal">#valdef-view-transition-group-normal</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-valdef-view-transition-group-normal">9.7.1. Resolving the view-transition-group
                    value</a>
            <li><a href="#ref-for-valdef-view-transition-group-normal①">9.7.2. Resolving the containing group
                    name</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="valdef-view-transition-group-contain">
        <b><a href="#valdef-view-transition-group-contain">#valdef-view-transition-group-contain</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-valdef-view-transition-group-contain">9.7.3. Resolving the group name</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="layered-capture-style">
        <b><a href="#layered-capture-style">#layered-capture-style</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-layered-capture-style">9.8.2. Capture the old layered properties</a>
            <li><a href="#ref-for-layered-capture-style①">9.8.7. Apply the new layered-capture properties to
                    ::view-transition-group()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="layered-capture-geometry">
        <b><a href="#layered-capture-geometry">#layered-capture-geometry</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-layered-capture-geometry">9.8.2. Capture the old layered properties</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="default-group-size">
        <b><a href="#default-group-size">#default-group-size</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-default-group-size">9.8.2. Capture the old layered properties</a>
            <li><a href="#ref-for-default-group-size①">9.8.7. Apply the new layered-capture properties to
                    ::view-transition-group()</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="adjust-the-nested-group-transform">
        <b><a href="#adjust-the-nested-group-transform">#adjust-the-nested-group-transform</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-adjust-the-nested-group-transform">9.7.6. Reparent a ::view-transition-group() to
                    its
                    specified containing group</a>
            <li><a href="#ref-for-adjust-the-nested-group-transform①">9.7.7. Adjust the group’s transform to be
                    relative
                    to its containing ::view-transition-group()</a>
        </ul>
    </aside>
    <script>/* script-dfn-panel */

        document.body.addEventListener("click", function (e) {
            var queryAll = function (sel) { return [].slice.call(document.querySelectorAll(sel)); }
            // Find the dfn element or panel, if any, that was clicked on.
            var el = e.target;
            var target;
            var hitALink = false;
            while (el.parentElement) {
                if (el.tagName == "A") {
                    // Clicking on a link in a <dfn> shouldn't summon the panel
                    hitALink = true;
                }
                if (el.classList.contains("dfn-paneled")) {
                    target = "dfn";
                    break;
                }
                if (el.classList.contains("dfn-panel")) {
                    target = "dfn-panel";
                    break;
                }
                el = el.parentElement;
            }
            if (target != "dfn-panel") {
                // Turn off any currently "on" or "activated" panels.
                queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(function (el) {
                    el.classList.remove("on");
                    el.classList.remove("activated");
                });
            }
            if (target == "dfn" && !hitALink) {
                // open the panel
                var dfnPanel = document.querySelector(".dfn-panel[data-for='" + el.id + "']");
                if (dfnPanel) {
                    dfnPanel.classList.add("on");
                    var rect = el.getBoundingClientRect();
                    dfnPanel.style.left = window.scrollX + rect.right + 5 + "px";
                    dfnPanel.style.top = window.scrollY + rect.top + "px";
                    var panelRect = dfnPanel.getBoundingClientRect();
                    var panelWidth = panelRect.right - panelRect.left;
                    if (panelRect.right > document.body.scrollWidth && (rect.left - (panelWidth + 5)) > 0) {
                        // Reposition, because the panel is overflowing
                        dfnPanel.style.left = window.scrollX + rect.left - (panelWidth + 5) + "px";
                    }
                } else {
                    console.log("Couldn't find .dfn-panel[data-for='" + el.id + "']");
                }
            } else if (target == "dfn-panel") {
                // Switch it to "activated" state, which pins it.
                el.classList.add("activated");
                el.style.left = null;
                el.style.top = null;
            }

        });
    </script>
    <script>/* script-var-click-highlighting */

        "use strict";
        {
            document.addEventListener("click", e => {
                if (e.target.nodeName == "VAR") {
                    highlightSameAlgoVars(e.target);
                }
            });
            const indexCounts = new Map();
            const indexNames = new Map();
            function highlightSameAlgoVars(v) {
                // Find the algorithm container.
                let algoContainer = null;
                let searchEl = v;
                while (algoContainer == null && searchEl != document.body) {
                    searchEl = searchEl.parentNode;
                    if (searchEl.hasAttribute("data-algorithm")) {
                        algoContainer = searchEl;
                    }
                }

                // Not highlighting document-global vars,
                // too likely to be unrelated.
                if (algoContainer == null) return;

                const algoName = algoContainer.getAttribute("data-algorithm");
                const varName = getVarName(v);
                const addClass = !v.classList.contains("selected");
                let highlightClass = null;
                if (addClass) {
                    const index = chooseHighlightIndex(algoName, varName);
                    indexCounts.get(algoName)[index] += 1;
                    indexNames.set(algoName + "///" + varName, index);
                    highlightClass = nameFromIndex(index);
                } else {
                    const index = previousHighlightIndex(algoName, varName);
                    indexCounts.get(algoName)[index] -= 1;
                    highlightClass = nameFromIndex(index);
                }

                // Find all same-name vars, and toggle their class appropriately.
                for (const el of algoContainer.querySelectorAll("var")) {
                    if (getVarName(el) == varName) {
                        el.classList.toggle("selected", addClass);
                        el.classList.toggle(highlightClass, addClass);
                    }
                }
            }
            function getVarName(el) {
                return el.textContent.replace(/(\s|\xa0)+/, " ").trim();
            }
            function chooseHighlightIndex(algoName, varName) {
                let indexes = null;
                if (indexCounts.has(algoName)) {
                    indexes = indexCounts.get(algoName);
                } else {
                    // 7 classes right now
                    indexes = [0, 0, 0, 0, 0, 0, 0];
                    indexCounts.set(algoName, indexes);
                }

                // If the element was recently unclicked,
                // *and* that color is still unclaimed,
                // give it back the same color.
                const lastIndex = previousHighlightIndex(algoName, varName);
                if (indexes[lastIndex] === 0) return lastIndex;

                // Find the earliest index with the lowest count.
                const minCount = Math.min.apply(null, indexes);
                let index = null;
                for (var i = 0; i < indexes.length; i++) {
                    if (indexes[i] == minCount) {
                        return i;
                    }
                }
            }
            function previousHighlightIndex(algoName, varName) {
                return indexNames.get(algoName + "///" + varName);
            }
            function nameFromIndex(index) {
                return "selected" + index;
            }
        }
    </script>
    <script src="/dropdown.js"></script>