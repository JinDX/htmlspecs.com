<!doctype html>
<html lang="zh-hans">

<head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
    <title>CSS 节奏尺寸模块 第 1 级</title>
    <meta content="WD" name="w3c-status">
    <!-- <meta content="Bikeshed version b25686b9f, updated Fri Mar 14 14:15:20 2025 -0700" name="generator"> -->
    <link href="https://www.w3.org/TR/css-rhythm-1/" rel="canonical">
    <!-- <meta content="ef19863a4f3b22c2d853fa589d544878bddf44ad" name="revision"> -->
    <meta content="dark light" name="color-scheme">
    <style>
        .example .figure img {
            background-color: white;
            padding: 20px;
            margin: 20px;
        }
    </style>
    <style>
        /* Boilerplate: style-autolinks */
        .css.css,
        .property.property,
        .descriptor.descriptor {
            color: var(--a-normal-text);
            font-size: inherit;
            font-family: inherit;
        }

        .css::before,
        .property::before,
        .descriptor::before {
            content: "‘";
        }

        .css::after,
        .property::after,
        .descriptor::after {
            content: "’";
        }

        .property,
        .descriptor {
            /* Don't wrap property and descriptor names */
            white-space: nowrap;
        }

        .type {
            /* CSS value <type> */
            font-style: italic;
        }

        pre .property::before,
        pre .property::after {
            content: "";
        }

        [data-link-type="property"]::before,
        [data-link-type="propdesc"]::before,
        [data-link-type="descriptor"]::before,
        [data-link-type="value"]::before,
        [data-link-type="function"]::before,
        [data-link-type="at-rule"]::before,
        [data-link-type="selector"]::before,
        [data-link-type="maybe"]::before {
            content: "‘";
        }

        [data-link-type="property"]::after,
        [data-link-type="propdesc"]::after,
        [data-link-type="descriptor"]::after,
        [data-link-type="value"]::after,
        [data-link-type="function"]::after,
        [data-link-type="at-rule"]::after,
        [data-link-type="selector"]::after,
        [data-link-type="maybe"]::after {
            content: "’";
        }

        [data-link-type].production::before,
        [data-link-type].production::after,
        .prod [data-link-type]::before,
        .prod [data-link-type]::after {
            content: "";
        }

        [data-link-type=element],
        [data-link-type=element-attr] {
            font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
            font-size: .9em;
        }

        [data-link-type=element]::before {
            content: "<"
        }

        [data-link-type=element]::after {
            content: ">"
        }

        [data-link-type=biblio] {
            white-space: pre;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --selflink-text: black;
                --selflink-bg: silver;
                --selflink-hover-text: white;
            }
        }
    </style>
    <style>
        /* Boilerplate: style-colors */
        /* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
        :root {
            color-scheme: light dark;

            --text: black;
            --bg: white;

            --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

            --logo-bg: #1a5e9a;
            --logo-active-bg: #c00;
            --logo-text: white;

            --tocnav-normal-text: #707070;
            --tocnav-normal-bg: var(--bg);
            --tocnav-hover-text: var(--tocnav-normal-text);
            --tocnav-hover-bg: #f8f8f8;
            --tocnav-active-text: #c00;
            --tocnav-active-bg: var(--tocnav-normal-bg);

            --tocsidebar-text: var(--text);
            --tocsidebar-bg: #f7f8f9;
            --tocsidebar-shadow: rgba(0, 0, 0, .1);
            --tocsidebar-heading-text: hsla(203, 20%, 40%, .7);

            --toclink-text: var(--text);
            --toclink-underline: #3980b5;
            --toclink-visited-text: var(--toclink-text);
            --toclink-visited-underline: #054572;

            --heading-text: #005a9c;

            --hr-text: var(--text);

            --algo-border: #def;

            --del-text: red;
            --del-bg: transparent;
            --ins-text: #080;
            --ins-bg: transparent;

            --a-normal-text: #034575;
            --a-normal-underline: #bbb;
            --a-visited-text: var(--a-normal-text);
            --a-visited-underline: #707070;
            --a-hover-bg: rgba(75%, 75%, 75%, .25);
            --a-active-text: #c00;
            --a-active-underline: #c00;

            --blockquote-border: silver;
            --blockquote-bg: transparent;
            --blockquote-text: currentcolor;

            --issue-border: #e05252;
            --issue-bg: #fbe9e9;
            --issue-text: var(--text);
            --issueheading-text: #831616;

            --example-border: #e0cb52;
            --example-bg: #fcfaee;
            --example-text: var(--text);
            --exampleheading-text: #574b0f;

            --note-border: #52e052;
            --note-bg: #e9fbe9;
            --note-text: var(--text);
            --noteheading-text: hsl(120, 70%, 30%);
            --notesummary-underline: silver;

            --assertion-border: #aaa;
            --assertion-bg: #eee;
            --assertion-text: black;

            --advisement-border: orange;
            --advisement-bg: #fec;
            --advisement-text: var(--text);
            --advisementheading-text: #b35f00;

            --warning-border: red;
            --warning-bg: hsla(40, 100%, 50%, 0.95);
            --warning-text: var(--text);

            --amendment-border: #330099;
            --amendment-bg: #F5F0FF;
            --amendment-text: var(--text);
            --amendmentheading-text: #220066;

            --def-border: #8ccbf2;
            --def-bg: #def;
            --def-text: var(--text);
            --defrow-border: #bbd7e9;

            --datacell-border: silver;

            --indexinfo-text: #707070;

            --indextable-hover-text: black;
            --indextable-hover-bg: #f7f8f9;

            --outdatedspec-bg: rgba(0, 0, 0, .5);
            --outdatedspec-text: black;
            --outdated-bg: maroon;
            --outdated-text: white;
            --outdated-shadow: red;

            --editedrec-bg: darkorange;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --text: #ddd;
                --bg: black;

                --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

                --logo-bg: #1a5e9a;
                --logo-active-bg: #c00;
                --logo-text: white;

                --tocnav-normal-text: #999;
                --tocnav-normal-bg: var(--bg);
                --tocnav-hover-text: var(--tocnav-normal-text);
                --tocnav-hover-bg: #080808;
                --tocnav-active-text: #f44;
                --tocnav-active-bg: var(--tocnav-normal-bg);

                --tocsidebar-text: var(--text);
                --tocsidebar-bg: #080808;
                --tocsidebar-shadow: rgba(255, 255, 255, .1);
                --tocsidebar-heading-text: hsla(203, 20%, 40%, .7);

                --toclink-text: var(--text);
                --toclink-underline: #6af;
                --toclink-visited-text: var(--toclink-text);
                --toclink-visited-underline: #054572;

                --heading-text: #8af;

                --hr-text: var(--text);

                --algo-border: #456;

                --del-text: #f44;
                --del-bg: transparent;
                --ins-text: #4a4;
                --ins-bg: transparent;

                --a-normal-text: #6af;
                --a-normal-underline: #555;
                --a-visited-text: var(--a-normal-text);
                --a-visited-underline: var(--a-normal-underline);
                --a-hover-bg: rgba(25%, 25%, 25%, .2);
                --a-active-text: #f44;
                --a-active-underline: var(--a-active-text);

                --borderedblock-bg: rgba(255, 255, 255, .05);

                --blockquote-border: silver;
                --blockquote-bg: var(--borderedblock-bg);
                --blockquote-text: currentcolor;

                --issue-border: #e05252;
                --issue-bg: var(--borderedblock-bg);
                --issue-text: var(--text);
                --issueheading-text: hsl(0deg, 70%, 70%);

                --example-border: hsl(50deg, 90%, 60%);
                --example-bg: var(--borderedblock-bg);
                --example-text: var(--text);
                --exampleheading-text: hsl(50deg, 70%, 70%);

                --note-border: hsl(120deg, 100%, 35%);
                --note-bg: var(--borderedblock-bg);
                --note-text: var(--text);
                --noteheading-text: hsl(120, 70%, 70%);
                --notesummary-underline: silver;

                --assertion-border: #444;
                --assertion-bg: var(--borderedblock-bg);
                --assertion-text: var(--text);

                --advisement-border: orange;
                --advisement-bg: #222218;
                --advisement-text: var(--text);
                --advisementheading-text: #f84;

                --warning-border: red;
                --warning-bg: hsla(40, 100%, 20%, 0.95);
                --warning-text: var(--text);

                --amendment-border: #330099;
                --amendment-bg: #080010;
                --amendment-text: var(--text);
                --amendmentheading-text: #cc00ff;

                --def-border: #8ccbf2;
                --def-bg: #080818;
                --def-text: var(--text);
                --defrow-border: #136;

                --datacell-border: silver;

                --indexinfo-text: #aaa;

                --indextable-hover-text: var(--text);
                --indextable-hover-bg: #181818;

                --outdatedspec-bg: rgba(255, 255, 255, .5);
                --outdatedspec-text: black;
                --outdated-bg: maroon;
                --outdated-text: white;
                --outdated-shadow: red;

                --editedrec-bg: darkorange;
            }

            /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
            img {
                background: white;
            }
        }
    </style>
    <style>
        /* Boilerplate: style-counters */
        body {
            counter-reset: example figure issue;
        }

        .issue {
            counter-increment: issue;
        }

        .issue:not(.no-marker)::before {
            content: "Issue " counter(issue);
        }

        .example {
            counter-increment: example;
        }

        .example:not(.no-marker)::before {
            content: "Example " counter(example);
        }

        .invalid.example:not(.no-marker)::before,
        .illegal.example:not(.no-marker)::before {
            content: "Invalid Example" counter(example);
        }

        figcaption {
            counter-increment: figure;
        }

        figcaption:not(.no-marker)::before {
            content: "Figure " counter(figure) " ";
        }
    </style>
    <style>
        /* Boilerplate: style-dfn-panel */
        :root {
            --dfnpanel-bg: #ddd;
            --dfnpanel-text: var(--text);
            --dfnpanel-target-bg: #ffc;
            --dfnpanel-target-outline: orange;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --dfnpanel-bg: #222;
                --dfnpanel-text: var(--text);
                --dfnpanel-target-bg: #333;
                --dfnpanel-target-outline: silver;
            }
        }

        .dfn-panel {
            position: absolute;
            z-index: 35;
            width: 20em;
            width: 300px;
            height: auto;
            max-height: 500px;
            overflow: auto;
            padding: 0.5em 0.75em;
            font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
            background: var(--dfnpanel-bg);
            color: var(--dfnpanel-text);
            border: outset 0.2em;
            white-space: normal;
            /* in case it's moved into a pre */
        }

        .dfn-panel:not(.on) {
            display: none;
        }

        .dfn-panel * {
            margin: 0;
            padding: 0;
            text-indent: 0;
        }

        .dfn-panel>b {
            display: block;
        }

        .dfn-panel a {
            color: var(--dfnpanel-text);
        }

        .dfn-panel a:not(:hover) {
            text-decoration: none !important;
            border-bottom: none !important;
        }

        .dfn-panel a:focus {
            outline: 5px auto Highlight;
            outline: 5px auto -webkit-focus-ring-color;
        }

        .dfn-panel>b+b {
            margin-top: 0.25em;
        }

        .dfn-panel ul {
            padding: 0 0 0 1em;
            list-style: none;
        }

        .dfn-panel li a {
            max-width: calc(300px - 1.5em - 1em);
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .dfn-panel.activated {
            display: inline-block;
            position: fixed;
            left: 8px;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - 1.5em - .4em - .5em);
            max-height: 30vh;
            transition: left 1s ease-out, bottom 1s ease-out;
        }

        .dfn-panel .link-item:hover {
            text-decoration: underline;
        }

        .dfn-panel .link-item .copy-icon {
            opacity: 0;
        }

        .dfn-panel .link-item:hover .copy-icon,
        .dfn-panel .link-item .copy-icon:focus {
            opacity: 1;
        }

        .dfn-panel .copy-icon {
            display: inline-block;
            margin-right: 0.5em;
            width: 0.85em;
            height: 1em;
            border-radius: 3px;
            background-color: #ccc;
            cursor: pointer;
        }

        .dfn-panel .copy-icon .icon {
            width: 100%;
            height: 100%;
            background-color: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        .dfn-panel .copy-icon .icon::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: 1px solid black;
            background-color: #ccc;
            opacity: 0.25;
            transform: translate(3px, -3px);
        }

        .dfn-panel .copy-icon:active .icon::before {
            opacity: 1;
        }

        .dfn-paneled[role="button"] {
            cursor: help;
        }

        .highlighted {
            animation: target-fade 3s;
        }

        @keyframes target-fade {
            from {
                background-color: var(--dfnpanel-target-bg);
                outline: 5px solid var(--dfnpanel-target-outline);
            }

            to {
                color: var(--a-normal-text);
                background-color: transparent;
                outline: transparent;
            }
        }
    </style>
    <style>
        /* Boilerplate: style-issues */
        a[href].issue-return {
            float: right;
            float: inline-end;
            color: var(--issueheading-text);
            font-weight: bold;
            text-decoration: none;
        }
    </style>
    <style>
        /* Boilerplate: style-md-lists */
        /* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
        [data-md]> :first-child {
            margin-top: 0;
        }

        [data-md]> :last-child {
            margin-bottom: 0;
        }
    </style>
    <style>
        /* Boilerplate: style-ref-hints */
        :root {
            --ref-hint-bg: #ddd;
            --ref-hint-text: var(--text);
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --ref-hint-bg: #222;
                --ref-hint-text: var(--text);
            }
        }

        .ref-hint {
            display: inline-block;
            position: absolute;
            z-index: 35;
            width: 20em;
            width: 300px;
            height: auto;
            max-height: 500px;
            overflow: auto;
            padding: 0.5em 0.5em;
            font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
            background: var(--ref-hint-bg);
            color: var(--ref-hint-text);
            border: outset 0.2em;
            white-space: normal;
            /* in case it's moved into a pre */
        }

        .ref-hint * {
            margin: 0;
            padding: 0;
            text-indent: 0;
        }

        .ref-hint ul {
            padding: 0 0 0 1em;
            list-style: none;
        }
    </style>
    <style>
        /* Boilerplate: style-selflinks */
        :root {
            --selflink-text: white;
            --selflink-bg: gray;
            --selflink-hover-text: black;
        }

        .heading,
        .issue,
        .note,
        .example,
        li,
        dt {
            position: relative;
        }

        a.self-link {
            position: absolute;
            top: 0;
            left: calc(-1 * (3.5rem - 26px));
            width: calc(3.5rem - 26px);
            height: 2em;
            text-align: center;
            border: none;
            transition: opacity .2s;
            opacity: .5;
        }

        a.self-link:hover {
            opacity: 1;
        }

        .heading>a.self-link {
            font-size: 83%;
        }

        .example>a.self-link,
        .note>a.self-link,
        .issue>a.self-link {
            /* These blocks are overflow:auto, so positioning outside
       doesn't work. */
            left: auto;
            right: 0;
        }

        li>a.self-link {
            left: calc(-1 * (3.5rem - 26px) - 2em);
        }

        dfn>a.self-link {
            top: auto;
            left: auto;
            opacity: 0;
            width: 1.5em;
            height: 1.5em;
            background: var(--selflink-bg);
            color: var(--selflink-text);
            font-style: normal;
            transition: opacity .2s, background-color .2s, color .2s;
        }

        dfn:hover>a.self-link {
            opacity: 1;
        }

        dfn>a.self-link:hover {
            color: var(--selflink-hover-text);
        }

        a.self-link::before {
            content: "¶";
        }

        .heading>a.self-link::before {
            content: "§";
        }

        dfn>a.self-link::before {
            content: "#";
        }
    </style>
    <style>
        /* Boilerplate: style-syntax-highlighting */
        code.highlight {
            padding: .1em;
            border-radius: .3em;
        }

        pre.highlight,
        pre>code.highlight {
            display: block;
            padding: 1em;
            margin: .5em 0;
            overflow: auto;
            border-radius: 0;
        }

        .highlight:not(.idl) {
            background: rgba(0, 0, 0, .03);
        }

        c-[a] {
            color: #990055
        }

        /* Keyword.Declaration */
        c-[b] {
            color: #990055
        }

        /* Keyword.Type */
        c-[c] {
            color: #708090
        }

        /* Comment */
        c-[d] {
            color: #708090
        }

        /* Comment.Multiline */
        c-[e] {
            color: #0077aa
        }

        /* Name.Attribute */
        c-[f] {
            color: #669900
        }

        /* Name.Tag */
        c-[g] {
            color: #222222
        }

        /* Name.Variable */
        c-[k] {
            color: #990055
        }

        /* Keyword */
        c-[l] {
            color: #000000
        }

        /* Literal */
        c-[m] {
            color: #000000
        }

        /* Literal.Number */
        c-[n] {
            color: #0077aa
        }

        /* Name */
        c-[o] {
            color: #999999
        }

        /* Operator */
        c-[p] {
            color: #999999
        }

        /* Punctuation */
        c-[s] {
            color: #a67f59
        }

        /* Literal.String */
        c-[t] {
            color: #a67f59
        }

        /* Literal.String.Single */
        c-[u] {
            color: #a67f59
        }

        /* Literal.String.Double */
        c-[cp] {
            color: #708090
        }

        /* Comment.Preproc */
        c-[c1] {
            color: #708090
        }

        /* Comment.Single */
        c-[cs] {
            color: #708090
        }

        /* Comment.Special */
        c-[kc] {
            color: #990055
        }

        /* Keyword.Constant */
        c-[kn] {
            color: #990055
        }

        /* Keyword.Namespace */
        c-[kp] {
            color: #990055
        }

        /* Keyword.Pseudo */
        c-[kr] {
            color: #990055
        }

        /* Keyword.Reserved */
        c-[ld] {
            color: #000000
        }

        /* Literal.Date */
        c-[nc] {
            color: #0077aa
        }

        /* Name.Class */
        c-[no] {
            color: #0077aa
        }

        /* Name.Constant */
        c-[nd] {
            color: #0077aa
        }

        /* Name.Decorator */
        c-[ni] {
            color: #0077aa
        }

        /* Name.Entity */
        c-[ne] {
            color: #0077aa
        }

        /* Name.Exception */
        c-[nf] {
            color: #0077aa
        }

        /* Name.Function */
        c-[nl] {
            color: #0077aa
        }

        /* Name.Label */
        c-[nn] {
            color: #0077aa
        }

        /* Name.Namespace */
        c-[py] {
            color: #0077aa
        }

        /* Name.Property */
        c-[ow] {
            color: #999999
        }

        /* Operator.Word */
        c-[mb] {
            color: #000000
        }

        /* Literal.Number.Bin */
        c-[mf] {
            color: #000000
        }

        /* Literal.Number.Float */
        c-[mh] {
            color: #000000
        }

        /* Literal.Number.Hex */
        c-[mi] {
            color: #000000
        }

        /* Literal.Number.Integer */
        c-[mo] {
            color: #000000
        }

        /* Literal.Number.Oct */
        c-[sb] {
            color: #a67f59
        }

        /* Literal.String.Backtick */
        c-[sc] {
            color: #a67f59
        }

        /* Literal.String.Char */
        c-[sd] {
            color: #a67f59
        }

        /* Literal.String.Doc */
        c-[se] {
            color: #a67f59
        }

        /* Literal.String.Escape */
        c-[sh] {
            color: #a67f59
        }

        /* Literal.String.Heredoc */
        c-[si] {
            color: #a67f59
        }

        /* Literal.String.Interpol */
        c-[sx] {
            color: #a67f59
        }

        /* Literal.String.Other */
        c-[sr] {
            color: #a67f59
        }

        /* Literal.String.Regex */
        c-[ss] {
            color: #a67f59
        }

        /* Literal.String.Symbol */
        c-[vc] {
            color: #0077aa
        }

        /* Name.Variable.Class */
        c-[vg] {
            color: #0077aa
        }

        /* Name.Variable.Global */
        c-[vi] {
            color: #0077aa
        }

        /* Name.Variable.Instance */
        c-[il] {
            color: #000000
        }

        /* Literal.Number.Integer.Long */

        @media (prefers-color-scheme: dark) {
            .highlight:not(.idl) {
                background: rgba(255, 255, 255, .05);
            }

            c-[a] {
                color: #d33682
            }

            /* Keyword.Declaration */
            c-[b] {
                color: #d33682
            }

            /* Keyword.Type */
            c-[c] {
                color: #2aa198
            }

            /* Comment */
            c-[d] {
                color: #2aa198
            }

            /* Comment.Multiline */
            c-[e] {
                color: #268bd2
            }

            /* Name.Attribute */
            c-[f] {
                color: #b58900
            }

            /* Name.Tag */
            c-[g] {
                color: #cb4b16
            }

            /* Name.Variable */
            c-[k] {
                color: #d33682
            }

            /* Keyword */
            c-[l] {
                color: #657b83
            }

            /* Literal */
            c-[m] {
                color: #657b83
            }

            /* Literal.Number */
            c-[n] {
                color: #268bd2
            }

            /* Name */
            c-[o] {
                color: #657b83
            }

            /* Operator */
            c-[p] {
                color: #657b83
            }

            /* Punctuation */
            c-[s] {
                color: #6c71c4
            }

            /* Literal.String */
            c-[t] {
                color: #6c71c4
            }

            /* Literal.String.Single */
            c-[u] {
                color: #6c71c4
            }

            /* Literal.String.Double */
            c-[ch] {
                color: #2aa198
            }

            /* Comment.Hashbang */
            c-[cp] {
                color: #2aa198
            }

            /* Comment.Preproc */
            c-[cpf] {
                color: #2aa198
            }

            /* Comment.PreprocFile */
            c-[c1] {
                color: #2aa198
            }

            /* Comment.Single */
            c-[cs] {
                color: #2aa198
            }

            /* Comment.Special */
            c-[kc] {
                color: #d33682
            }

            /* Keyword.Constant */
            c-[kn] {
                color: #d33682
            }

            /* Keyword.Namespace */
            c-[kp] {
                color: #d33682
            }

            /* Keyword.Pseudo */
            c-[kr] {
                color: #d33682
            }

            /* Keyword.Reserved */
            c-[ld] {
                color: #657b83
            }

            /* Literal.Date */
            c-[nc] {
                color: #268bd2
            }

            /* Name.Class */
            c-[no] {
                color: #268bd2
            }

            /* Name.Constant */
            c-[nd] {
                color: #268bd2
            }

            /* Name.Decorator */
            c-[ni] {
                color: #268bd2
            }

            /* Name.Entity */
            c-[ne] {
                color: #268bd2
            }

            /* Name.Exception */
            c-[nf] {
                color: #268bd2
            }

            /* Name.Function */
            c-[nl] {
                color: #268bd2
            }

            /* Name.Label */
            c-[nn] {
                color: #268bd2
            }

            /* Name.Namespace */
            c-[py] {
                color: #268bd2
            }

            /* Name.Property */
            c-[ow] {
                color: #657b83
            }

            /* Operator.Word */
            c-[mb] {
                color: #657b83
            }

            /* Literal.Number.Bin */
            c-[mf] {
                color: #657b83
            }

            /* Literal.Number.Float */
            c-[mh] {
                color: #657b83
            }

            /* Literal.Number.Hex */
            c-[mi] {
                color: #657b83
            }

            /* Literal.Number.Integer */
            c-[mo] {
                color: #657b83
            }

            /* Literal.Number.Oct */
            c-[sa] {
                color: #6c71c4
            }

            /* Literal.String.Affix */
            c-[sb] {
                color: #6c71c4
            }

            /* Literal.String.Backtick */
            c-[sc] {
                color: #6c71c4
            }

            /* Literal.String.Char */
            c-[dl] {
                color: #6c71c4
            }

            /* Literal.String.Delimiter */
            c-[sd] {
                color: #6c71c4
            }

            /* Literal.String.Doc */
            c-[se] {
                color: #6c71c4
            }

            /* Literal.String.Escape */
            c-[sh] {
                color: #6c71c4
            }

            /* Literal.String.Heredoc */
            c-[si] {
                color: #6c71c4
            }

            /* Literal.String.Interpol */
            c-[sx] {
                color: #6c71c4
            }

            /* Literal.String.Other */
            c-[sr] {
                color: #6c71c4
            }

            /* Literal.String.Regex */
            c-[ss] {
                color: #6c71c4
            }

            /* Literal.String.Symbol */
            c-[fm] {
                color: #268bd2
            }

            /* Name.Function.Magic */
            c-[vc] {
                color: #cb4b16
            }

            /* Name.Variable.Class */
            c-[vg] {
                color: #cb4b16
            }

            /* Name.Variable.Global */
            c-[vi] {
                color: #cb4b16
            }

            /* Name.Variable.Instance */
            c-[vm] {
                color: #cb4b16
            }

            /* Name.Variable.Magic */
            c-[il] {
                color: #657b83
            }

            /* Literal.Number.Integer.Long */
        }
    </style>
    <style>
        /* Boilerplate: style-wpt */
        :root {
            --wpt-border: hsl(0, 0%, 60%);
            --wpt-bg: hsl(0, 0%, 95%);
            --wpt-text: var(--text);
            --wptheading-text: hsl(0, 0%, 30%);
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --wpt-border: hsl(0, 0%, 30%);
                --wpt-bg: var(--borderedblock-bg);
                --wpt-text: var(--text);
                --wptheading-text: hsl(0, 0%, 60%);
            }
        }

        .wpt-tests-block {
            list-style: none;
            border-left: .5em solid var(--wpt-border);
            background: var(--wpt-bg);
            color: var(--wpt-text);
            margin: 1em auto;
            padding: .5em;
        }

        .wpt-tests-block summary {
            color: var(--wptheading-text);
            font-weight: normal;
            text-transform: uppercase;
        }

        .wpt-tests-block summary::marker {
            color: var(--wpt-border);
        }

        .wpt-tests-block summary:hover::marker {
            color: var(--wpt-text);
        }

        /*
   The only content  of a wpt test block in its closed state is the <summary>,
   which contains the word TESTS,
   and that is absolutely positioned.
   In that closed state, wpt test blocks are styled
   to have a top margin whose height is exactly equal
   to the height of the absolutely positioned <summary>,
   and no other background/padding/margin/border.
   The wpt test block elements will therefore allow the maring
   of the previous/next block elements
   to collapse through them;
   if this combined margin would be larger than its own top margin,
   it stays as is,
   and therefore the pre-existing vertical rhythm of the document is undisturbed.
   If that combined margin would be smaller, it is grown to that size.
   This means that the wpt test block ensures
   that there's always enough vertical space to insert the summary,
   without adding more than is needed.
*/
        .wpt-tests-block:not([open]) {
            padding: 0;
            border: none;
            background: none;
            font-size: 0.75em;
            line-height: 1;
            position: relative;
            margin: 1em 0 0;
        }

        .wpt-tests-block:not([open]) summary {
            position: absolute;
            right: 0;
            bottom: 0;
        }

        /*
   It is possible that both the last child of a block element
   and the block element itself
   would be annotated with a <wpt> block each.
   If the block element has a padding or a border,
   that's fine, but otherwise
   the bottom margin of the block and of its last child would collapse
   and both <wpt> elements would overlap, being both placed there.
   To avoid that, add 1px of padding to the <wpt> element annotating the last child
   to prevent the bottom margin of the block and of its last child from collapsing
   (and as much negative margin,
   as wel only want to prevent margin collapsing,
   but are not trying to actually take more space).
*/
        .wpt-tests-block:not([open]):last-child {
            padding-bottom: 1px;
            margin-bottom: -1px;
        }

        /*
   Exception to the previous rule:
   don't do that in non-last list items,
   because it's not necessary,
   and would therefore consume more space than strictly needed.
   Lists must have list items as children, not <wpt> elements,
   so a <wpt> element cannot be a sibling of a list item,
   and the collision that the previous rule avoids cannot happen.
*/
        li:not(:last-child)>.wpt-tests-block:not([open]):last-child,
        dd:not(:last-child)>.wpt-tests-block:not([open]):last-child {
            padding-bottom: 0;
            margin-bottom: 0;
        }

        .wpt-tests-block:not([open]):not(:hover) {
            opacity: 0.5;
        }

        .wpt-tests-list {
            list-style: none;
            display: grid;
            margin: 0;
            padding: 0;
            grid-template-columns: 1fr max-content auto auto;
            grid-column-gap: .5em;
        }

        .wpt-tests-block hr:last-child {
            display: none;
        }

        .wpt-test {
            display: contents;
        }

        .wpt-test>a {
            text-decoration: underline;
            border: none;
        }

        .wpt-test>.wpt-name {
            grid-column: 1;
        }

        .wpt-test>.wpt-results {
            grid-column: 2;
        }

        .wpt-test>.wpt-live {
            grid-column: 3;
        }

        .wpt-test>.wpt-source {
            grid-column: 4;
        }

        .wpt-test>.wpt-results {
            display: flex;
            gap: .1em;
        }

        .wpt-test .wpt-result {
            display: inline-block;
            height: 1em;
            width: 1em;
            border-radius: 50%;
            position: relative;
        }
    </style>
    <link href="https://www.w3.org/StyleSheets/TR/2021/W3C-WD" rel="stylesheet">
    <link href="https://www.w3.org/StyleSheets/TR/2021/dark.css" media="(prefers-color-scheme: dark)" rel="stylesheet"
        type="text/css">

<body class="h-entry">
    <div class="head">
        <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48"
                    src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72"> </a> </p>
        <h1 class="p-name no-ref" id="title">CSS 节奏尺寸模块 第 1 级</h1>
        <p id="w3c-state"><a href="https://www.w3.org/standards/types/#WD">W3C 工作草案</a>, <time class="dt-updated"
                datetime="2026-02-17">2026 年 2 月 17 日</time></p>
        <details open>
            <summary>关于本文件的更多细节</summary>
            <div data-fill-with="spec-metadata">
                <dl>
                    <dt>本版本：
                    <dd><a class="u-url"
                            href="https://www.w3.org/TR/2026/WD-css-rhythm-1-20260217/">https://www.w3.org/TR/2026/WD-css-rhythm-1-20260217/</a>
                    <dt>最新发布版本：
                    <dd><a href="https://www.w3.org/TR/css-rhythm-1/">https://www.w3.org/TR/css-rhythm-1/</a>
                    <dt>编辑草案：
                    <dd><a href="https://drafts.csswg.org/css-rhythm/">https://drafts.csswg.org/css-rhythm/</a>
                    <dt>历史：
                    <dd><a class="u-url"
                            href="https://www.w3.org/standards/history/css-rhythm-1/">https://www.w3.org/standards/history/css-rhythm-1/</a>
                    <dt>反馈：
                    <dd><a href="https://github.com/w3c/csswg-drafts/labels/css-rhythm-1">CSSWG 问题仓库</a>
                    <dd><a href="#issues-index">规范内联</a>
                    <dt class="editor">编辑：
                    <dd class="editor p-author h-card vcard" data-editor-id="45369"><a class="p-name fn u-email email"
                            href="mailto:kojiishi@gmail.com">Koji Ishii</a>（<span class="p-org org">Google</span>）
                    <dd class="editor p-author h-card vcard" data-editor-id="35400"><a class="p-name fn u-url url"
                            href="http://fantasai.inkedblade.net/contact">Elika J. Etemad / fantasai</a>（<span
                            class="p-org org">Apple</span>）
                    <dt>为本规范建议编辑：
                    <dd><a href="https://github.com/w3c/csswg-drafts/blob/main/css-rhythm-1/Overview.bs">GitHub
                            编辑器</a>
                    <dt>测试套件：
                    <dd class="wpt-overview"><a
                            href="https://wpt.fyi/results/css/css-rhythm/">https://wpt.fyi/results/css/css-rhythm/</a>
                </dl>
            </div>
        </details>
        <div data-fill-with="warning"></div>
        <p class="copyright" data-fill-with="copyright"><a href="https://www.w3.org/policies/#copyright">Copyright</a> ©
            2026 <a href="https://www.w3.org/">World Wide Web Consortium</a>. <abbr
                title="World Wide Web Consortium">W3C</abbr><sup>®</sup> <a
                href="https://www.w3.org/policies/#Legal_Disclaimer">liability</a>, <a
                href="https://www.w3.org/policies/#W3C_Trademarks">trademark</a> and <a
                href="https://www.w3.org/copyright/software-license/" rel="license"
                title="W3C Software and Document License">permissive document license</a> rules apply. </p>
        <hr title="Separator for header">
    </div>
    <div class="p-summary" data-fill-with="abstract">
        <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">摘要</span></h2>
        <p>本模块包含用于将内容尺寸
            对齐到单位尺寸的整数倍的 CSS 功能。</p>
        <a href="https://www.w3.org/TR/CSS/">CSS</a> 是一种用于描述结构化文档
        （如 HTML 和 XML）
        在屏幕、纸张等介质上的呈现方式的语言。
    </div>
    <h2 class="no-num no-toc no-ref heading settled" id="sotd"><span class="content">本文档状态</span></h2>
    <div data-fill-with="status">
        <p><em>本节描述本文档在发布时的状态。
                当前 W3C 出版物列表
                以及本技术报告的最新修订版
                可在 <a href="https://www.w3.org/TR/">W3C 标准与草案索引</a> 中找到。</em> </p>
        <p> 本文档由 <a href="https://www.w3.org/groups/wg/css">CSS 工作组</a>
            按照 <a href="https://www.w3.org/policies/process/20250818/#recs-and-notes">推荐标准
                轨道</a>
            发布为 <strong>工作草案</strong>。
            作为工作草案发布
            并不意味着 <abbr title="World Wide Web Consortium">W3C</abbr> 及其成员的认可。</p>
        <p> 这是一份草案文档，
            并且可能随时被更新、替换
            或被其他文档废止。
            不应将本文档作为除“进行中的工作”之外的内容来引用。</p>
        <p>请通过 <a href="https://github.com/w3c/csswg-drafts/issues">在 GitHub 中提交 issue</a>（推荐）
            发送反馈，
            并在标题中包含规范代码“css-rhythm”，例如：
            “[css-rhythm] <i>…评论摘要…</i>”。
            所有 issue 与评论都会被<a href="https://lists.w3.org/Archives/Public/public-css-archive/">归档</a>。
            或者，也可以将反馈发送到（<a href="https://lists.w3.org/Archives/Public/www-style/">已归档</a>的）公开邮件列表 <a
                href="mailto:www-style@w3.org?Subject=%5Bcss-rhythm%5D%20PUT%20SUBJECT%20HERE">www-style@w3.org</a>。
        </p>
        <p>本文档受 <a href="https://www.w3.org/policies/process/20250818/" id="w3c_process_revision">2025 年 8 月 18 日《W3C
                流程文档》</a> 的约束。</p>
        <p>本文档由一个在 <a href="https://www.w3.org/policies/patent-policy/20200915/">W3C 专利政策</a> 下运作的工作组编制。
            W3C 维护一份与该工作组交付成果相关的<a href="https://www.w3.org/groups/wg/css/ipr" rel="disclosure">任何专利披露的公开列表</a>；
            该页面也包含披露专利的说明。
            任何个人若实际知悉其认为包含<a href="https://www.w3.org/policies/patent-policy/20200915/#def-essential">必要权利要求</a>的专利，
            必须依照 <a href="https://www.w3.org/policies/patent-policy/20200915/#sec-Disclosure">W3C 专利政策第 6 节</a>
            披露相关信息。</p>
    </div>
    <div data-fill-with="at-risk"></div>
    <nav data-fill-with="table-of-contents" id="toc">
        <h2 class="no-num no-toc no-ref" id="contents">目录</h2>
        <ol class="toc" role="directory">
            <li>
                <a href="#intro"><span class="secno">1</span> <span class="content">引言</span></a>
                <ol class="toc">
                    <li><a href="#eastasia"><span class="secno">1.1</span> <span class="content">东亚的随意纵向节奏</span></a>
                    <li><a href="#values"><span class="secno">1.2</span> <span class="content">值定义</span></a>
                </ol>
            <li>
                <a href="#block-height"><span class="secno">2</span> <span class="content">调整块级框高度</span></a>
                <ol class="toc">
                    <li><a href="#block-step-size"><span class="secno">2.1</span> <span class="content">指定步长：<span
                                    class="property">block-step-size</span> 属性</span></a>
                    <li><a href="#block-step-insert"><span class="secno">2.2</span> <span class="content">指定间距类型：<span
                                    class="property">block-step-insert</span> 属性</span></a>
                    <li><a href="#block-step-align"><span class="secno">2.3</span> <span class="content">指定对齐：<span
                                    class="property">block-step-align</span> 属性</span></a>
                    <li><a href="#block-step-round"><span class="secno">2.4</span> <span class="content">舍入方法：<span
                                    class="property">block-step-round</span> 属性</span></a>
                    <li><a href="#block-step"><span class="secno">2.5</span> <span class="content">块步调整简写：<span
                                    class="property">block-step</span> 简写</span></a>
                </ol>
            <li><a href="#line-height-step"><span class="secno">3</span> <span class="content">调整行框高度：<span
                            class="property">line-height-step</span> 属性</span></a>
            <li><a href="#privacy"><span class="secno">4</span> <span class="content">隐私注意事项</span></a>
            <li><a href="#security"><span class="secno">5</span> <span class="content">安全注意事项</span></a>
            <li><a href="#acks"><span class="secno">6</span> <span class="content">致谢</span></a>
            <li><a href="#changes"><span class="secno">7</span> <span class="content">变更</span></a>
            <li>
                <a href="#w3c-conformance"><span class="secno"></span> <span class="content">一致性</span></a>
                <ol class="toc">
                    <li><a href="#w3c-conventions"><span class="secno"></span> <span class="content">文档约定</span></a>
                    <li><a href="#w3c-conformance-classes"><span class="secno"></span> <span class="content">
                                一致性类别</span></a>
                    <li>
                        <a href="#w3c-partial"><span class="secno"></span> <span class="content">部分实现</span></a>
                        <ol class="toc">
                            <li><a href="#w3c-conform-future-proofing"><span class="secno"></span> <span
                                        class="content">不稳定与专有特性的实现</span></a>
                        </ol>
                    <li><a href="#w3c-testing"><span class="secno"></span> <span class="content">非试验性实现</span></a>
                </ol>
            <li>
                <a href="#index"><span class="secno"></span> <span class="content">索引</span></a>
                <ol class="toc">
                    <li><a href="#index-defined-here"><span class="secno"></span> <span
                                class="content">本规范定义的术语</span></a>
                    <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span
                                class="content">通过引用定义的术语</span></a>
                </ol>
            <li>
                <a href="#references"><span class="secno"></span> <span class="content">参考文献</span></a>
                <ol class="toc">
                    <li><a href="#normative"><span class="secno"></span> <span class="content">规范性参考文献</span></a>
                    <li><a href="#informative"><span class="secno"></span> <span class="content">资料性参考文献</span></a>
                </ol>
            <li><a href="#property-index"><span class="secno"></span> <span class="content">属性索引</span></a>
            <li><a href="#issues-index"><span class="secno"></span> <span class="content">问题索引</span></a>
        </ol>
    </nav>
    <main>
        <h2 class="heading settled" data-level="1" id="intro"><span class="secno">1. </span><span
                class="content">引言</span><a class="self-link" href="#intro"></a></h2>
        <p>本规范提供了一些特性，用于按照用例所期望的规则来控制 CSS 对象的尺寸。</p>
        <p>在很多情况下，希望将 CSS 对象的尺寸控制为某个<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="step-unit">步进单位</dfn>的整数倍。
            本级规范聚焦于以下情况。</p>
        <ul>
            <li data-md>
                <p>将块级框的高度调整为指定长度的整数倍。</p>
            <li data-md>
                <p>将行框的高度调整为指定长度的整数倍。</p>
        </ul>
        <p>通过以整数倍的方式堆叠块，
            作者可以在多列、分页、滚动吸附的块
            或多个绝对定位放置的块之间对齐内容，
            以保持纵向节奏。</p>
        <p>此外，通过控制行框的高度，
            不同字体的文本行也能形成一致的视觉效果，
            从而提升可读性。</p>
        <figure>
            <a href="https://www.w3.org/TR/css-rhythm-1/examples/snap-height.html"> <img alt height="164"
                    src="https://www.w3.org/TR/css-rhythm-1/images/snap-height-sample.png" width="432"></a>
            <figcaption>在多列文档中，通过图片与不同大小的文字保持纵向节奏。
            </figcaption>
        </figure>
        <h3 class="heading settled" data-level="1.1" id="eastasia"><span class="secno">1.1. </span><span
                class="content">东亚随意纵向节奏</span><a class="self-link" href="#eastasia"></a></h3>
        <p>在东亚，一种较为随意的纵向节奏变体被广泛使用。</p>
        <p>纵向节奏通常用于专业排版。
            虽然它能提升可读性，
            但其间距约束要求对空间进行谨慎且周密的设计。</p>
        <p>东亚的随意变体
            最初源于 80 年代传统文字处理器的技术限制。
            但当这些技术限制在更现代的技术中被解除后，
            在表意文字近似方块的视觉效果帮助下，
            东亚作者更倾向于保留其中一部分特性。</p>
        <p>在这种纵向节奏变体中，
            为了便于非专业作者使用，其要求被放宽。
            文本仍然遵循节奏，
            因而大多数表意文字大体上仍落在网格上；
            但当作者指定边框、外边距或其他可能打破节奏的对象时，
            节奏会发生偏移，而不是被强行维持。
            严格的纵向节奏在这类情况下常因被强制跳变而让非专业作者感到意外；
            而这种变体把文本上的节奏与非专业作者的易用性结合在一起。</p>
        <p>自 90 年代中期以来，这种变体在东亚被非常广泛地接受，
            以至于东亚使用的大多数主流文字处理器
            默认都���供了类似功能。</p>
        <p>在东亚出版排版中，
            纵向节奏是重要属性之一，
            但它相对于其他属性的优先级
            会因文档类型而异。
            在单栏文档中，
            其优先级弱于多栏文档。
            文本应当处在纵向节奏上，
            但人们往往更倾向于让边框、外边距
            或其他属性优先于节奏。
            在这种情况下，节奏会被偏移，类似于随意变体。</p>
        <p>在本规范中，
            当 <a class="property css" data-link-type="property" href="#propdef-line-height-step"
                id="ref-for-propdef-line-height-step">line-height-step</a> 属性在不与
            <a class="property css" data-link-type="property" href="#propdef-block-step"
                id="ref-for-propdef-block-step">block-step</a> 属性
            或 <a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-line-grid-1/#propdef-line-grid"
                id="ref-for-propdef-line-grid">line-grid</a> 属性组合使用时，
            会产生与东亚随意纵向节奏类似的效果。
        </p>
        <p>它对东亚出版排版也可能很有帮助，
            这取决于所期望的纵向节奏强度。</p>
        <p>对于纵向节奏的其他情况，
            预期会使用
            <a class="property css" data-link-type="property" href="#propdef-block-step"
                id="ref-for-propdef-block-step①">block-step</a> 属性或 <a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-line-grid-1/#propdef-line-grid"
                id="ref-for-propdef-line-grid①">line-grid</a> 属性，
            或者将 <a class="property css" data-link-type="property" href="#propdef-line-height-step"
                id="ref-for-propdef-line-height-step①">line-height-step</a> 属性与它们一��使用。
        </p>
        <h3 class="heading settled" data-level="1.2" id="values"><span class="secno">1.2. </span><span
                class="content">值定义</span><a class="self-link" href="#values"></a></h3>
        <p>本规范遵循 <a href="https://www.w3.org/TR/CSS2/about.html#property-defs">CSS 属性定义约定</a>（来自 <a
                data-link-type="biblio" href="#biblio-css2"
                title="Cascading Style Sheets Level 2 Revision 1 (CSS 2.1) Specification">[CSS2]</a>），并使用 <a
                href="https://www.w3.org/TR/css-values-3/#value-defs">值定义语法</a>（来自 <a data-link-type="biblio"
                href="#biblio-css-values-3" title="CSS Values and Units Module Level 3">[CSS-VALUES-3]</a>）。
            本规范未定义的值类型在 CSS Values &amp; Units <span title="CSS Values and Units Module Level 3">[CSS-VALUES-3]</span>
            中定义。
            与其他 CSS 模块的组合可能会扩展这些值类型的定义。</p>
        <p>除各自定义中列出的属性特定值之外，
            本规范中定义的所有属性
            也都接受 <a data-link-type="dfn" href="https://www.w3.org/TR/css-values-4/#css-wide-keywords"
                id="ref-for-css-wide-keywords">CSS 全局关键字</a> 作为其属性值。
            为了便于阅读，这些关键字未在文中重复显式列出。</p>
        <h2 class="heading settled" data-level="2" id="block-height"><span class="secno">2. </span><span
                class="content">调整块级框高度</span><a class="self-link" href="#block-height"></a>
        </h2>
        <p>最常见的排版节奏问题是块级侵入：
            当连续的段落级文本
            被插图、标题等不同尺寸的内容打断时，
            行与行之间的节奏就可能被打乱。
            块步进属性允许通过将这些元素的高度限制为指定步长的整数倍，
            使其适配节奏间隔。
            这使得打断前后的内容
            能保持连续的节奏。</p>
        <figure>
            <img alt height="349" src="https://www.w3.org/TR/css-rhythm-1/images/block-step-size-before.png"
                width="500">
            <figcaption>标题与块引用具有不同的字体大小和行高，
                导致各列中文本不齐。</figcaption>
        </figure>
        <figure>
            <img alt height="348" src="https://www.w3.org/TR/css-rhythm-1/images/block-step-size-after.png" width="500">
            <figcaption>在块前后插入空间（以彩色边框显示）
                恢复了纵向节奏。</figcaption>
        </figure>
        <p>一致地使用块步进属性
            可以产生并行内容流所需的严格网格化布局；
            而按元素指定步长
            也允许某些打断在流中采用其自然尺寸，
            并在之后重新开始纵向节奏。
            这在单栏布局中可能很有用：
            纵向节奏对于保持视觉连续性很重要，
            但旁边没有需要对齐的内容。
            在这些情况下，
            对于在视觉上使打断前后内容脱节的大型打断项，
            可以让该项周围的最优间距
            优先于对连续网格的严格遵循
            （通过指定 <a class="css" data-link-type="propdesc" href="#propdef-block-step"
                id="ref-for-propdef-block-step②">block-step: none</a>，即初始值）。</p>
        <p class="issue" id="issue-d3f7ebdb"><a class="self-link" href="#issue-d3f7ebdb"></a> 该提案可以简化为仅使用 <a
                class="property css" data-link-type="property" href="#propdef-block-step-size"
                id="ref-for-propdef-block-step-size">block-step-size</a> 属性，
            并且只通过其缩写形式 <a class="property css" data-link-type="property" href="#propdef-block-step"
                id="ref-for-propdef-block-step③">block-step</a> 来表示。
            本级规范很可能最多只包含 <span class="property" id="ref-for-propdef-block-step-size①">block-step-size</span> 和 <a
                class="property css" data-link-type="property" href="#propdef-block-step-insert"
                id="ref-for-propdef-block-step-insert">block-step-insert</a>，
            而将 <a class="property css" data-link-type="property" href="#propdef-block-step-align"
                id="ref-for-propdef-block-step-align">block-step-align</a> 与 <a class="property css"
                data-link-type="property" href="#propdef-block-step-round"
                id="ref-for-propdef-block-step-round">block-step-round</a> 留待未来如有需求再加入。
            完整设计在此给出，用于当前讨论及未来参考。</p>
        <p class="issue" id="issue-906f23b3"><a class="self-link" href="#issue-906f23b3"></a>
            该提案目前被定义为仅适用于块级框。此限制仅为简化第一次迭代；
            它最终应扩展到所有尊重指定高度的布局模式。</p>
        <h3 class="heading settled" data-level="2.1" id="block-step-size"><span class="secno">2.1. </span><span
                class="content">指定步长：<a class="property css" data-link-type="property" href="#propdef-block-step-size"
                    id="ref-for-propdef-block-step-size②">block-step-size</a>
                属性</span><a class="self-link" href="#block-step-size"></a></h3>
        <table class="def propdef" data-link-for-hint="block-step-size">
            <tbody>
                <tr>
                    <th>名称：
                    <td><dfn class="dfn-paneled css" data-dfn-type="property" data-export
                            id="propdef-block-step-size">block-step-size</dfn>
                <tr class="value">
                    <th><a href="https://www.w3.org/TR/css-values/#value-defs">值：</a>
                    <td class="prod">none <a data-link-type="grammar"
                            href="https://www.w3.org/TR/css-values-4/#comb-one" id="ref-for-comb-one">|</a> <a
                            class="production css" data-link-type="type"
                            href="https://www.w3.org/TR/css-values-4/#length-value" id="ref-for-length-value">&lt;length
                            [0,∞]></a>
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#initial-values">初始值：</a>
                    <td>none
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#applies-to">适用对象：</a>
                    <td>块级框
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#inherited-property">是否继承：</a>
                    <td>否
                <tr>
                    <th><a href="https://www.w3.org/TR/css-values/#percentages">百分比：</a>
                    <td>不适用
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#computed">计算值：</a>
                    <td>指定关键字或绝对长度
                <tr>
                    <th><a href="https://www.w3.org/TR/cssom/#serializing-css-values">规范顺序：</a>
                    <td>按语法
                <tr>
                    <th><a href="https://www.w3.org/TR/web-animations/#animation-type">动画类型：</a>
                    <td>按计算值类型
        </table>
        <details class="wpt-tests-block" dir="ltr" lang="en" open>
            <summary>Tests</summary>
            <ul class="wpt-tests-list">
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/css-rhythm/block-step-size-establishes-block-formatting-context-list-item.html"
                        title="css/css-rhythm/block-step-size-establishes-block-formatting-context-list-item.html">block-step-size-establishes-block-formatting-context-list-item.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/css-rhythm/block-step-size-establishes-block-formatting-context-list-item.html"><small>(live
                            test)</small></a> <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/css-rhythm/block-step-size-establishes-block-formatting-context-list-item.html"><small>(source)</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/css-rhythm/block-step-size-establishes-block-formatting-context.html"
                        title="css/css-rhythm/block-step-size-establishes-block-formatting-context.html">block-step-size-establishes-block-formatting-context.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/css-rhythm/block-step-size-establishes-block-formatting-context.html"><small>(live
                            test)</small></a> <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/css-rhythm/block-step-size-establishes-block-formatting-context.html"><small>(source)</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/css-rhythm/block-step-size-establishes-independent-formatting-context-list-item.html"
                        title="css/css-rhythm/block-step-size-establishes-independent-formatting-context-list-item.html">block-step-size-establishes-independent-formatting-context-list-item.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/css-rhythm/block-step-size-establishes-independent-formatting-context-list-item.html"><small>(live
                            test)</small></a> <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/css-rhythm/block-step-size-establishes-independent-formatting-context-list-item.html"><small>(source)</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/css-rhythm/block-step-size-establishes-independent-formatting-context.html"
                        title="css/css-rhythm/block-step-size-establishes-independent-formatting-context.html">block-step-size-establishes-independent-formatting-context.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/css-rhythm/block-step-size-establishes-independent-formatting-context.html"><small>(live
                            test)</small></a> <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/css-rhythm/block-step-size-establishes-independent-formatting-context.html"><small>(source)</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/css-rhythm/block-step-size-none-does-not-establish-block-formatting-context.html"
                        title="css/css-rhythm/block-step-size-none-does-not-establish-block-formatting-context.html">block-step-size-none-does-not-establish-block-formatting-context.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/css-rhythm/block-step-size-none-does-not-establish-block-formatting-context.html"><small>(live
                            test)</small></a> <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/css-rhythm/block-step-size-none-does-not-establish-block-formatting-context.html"><small>(source)</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/css-rhythm/block-step-size-none-does-not-establish-indepdendent-formatting-context.html"
                        title="css/css-rhythm/block-step-size-none-does-not-establish-indepdendent-formatting-context.html">block-step-size-none-does-not-establish-indepdendent-formatting-context.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/css-rhythm/block-step-size-none-does-not-establish-indepdendent-formatting-context.html"><small>(live
                            test)</small></a> <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/css-rhythm/block-step-size-none-does-not-establish-indepdendent-formatting-context.html"><small>(source)</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/css-rhythm/computedstyle/block-level-replaced-elements-affected-by-block-step-size.html"
                        title="css/css-rhythm/computedstyle/block-level-replaced-elements-affected-by-block-step-size.html">block-level-replaced-elements-affected-by-block-step-size.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/css-rhythm/computedstyle/block-level-replaced-elements-affected-by-block-step-size.html"><small>(live
                            test)</small></a> <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/css-rhythm/computedstyle/block-level-replaced-elements-affected-by-block-step-size.html"><small>(source)</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/css-rhythm/computedstyle/inline-level-replaced-elements-not-affected-by-block-step-size.html"
                        title="css/css-rhythm/computedstyle/inline-level-replaced-elements-not-affected-by-block-step-size.html">inline-level-replaced-elements-not-affected-by-block-step-size.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/css-rhythm/computedstyle/inline-level-replaced-elements-not-affected-by-block-step-size.html"><small>(live
                            test)</small></a> <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/css-rhythm/computedstyle/inline-level-replaced-elements-not-affected-by-block-step-size.html"><small>(source)</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/css-rhythm/content-based-height-rounds-up-to-step-unit.html"
                        title="css/css-rhythm/content-based-height-rounds-up-to-step-unit.html">content-based-height-rounds-up-to-step-unit.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/css-rhythm/content-based-height-rounds-up-to-step-unit.html"><small>(live
                            test)</small></a> <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/css-rhythm/content-based-height-rounds-up-to-step-unit.html"><small>(source)</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/css-rhythm/definite-height-rounds-up-to-next-multiple-of-step-unit.html"
                        title="css/css-rhythm/definite-height-rounds-up-to-next-multiple-of-step-unit.html">definite-height-rounds-up-to-next-multiple-of-step-unit.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/css-rhythm/definite-height-rounds-up-to-next-multiple-of-step-unit.html"><small>(live
                            test)</small></a> <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/css-rhythm/definite-height-rounds-up-to-next-multiple-of-step-unit.html"><small>(source)</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/css-rhythm/definite-height-rounds-up-to-step-unit.html"
                        title="css/css-rhythm/definite-height-rounds-up-to-step-unit.html">definite-height-rounds-up-to-step-unit.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/css-rhythm/definite-height-rounds-up-to-step-unit.html"><small>(live
                            test)</small></a> <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/css-rhythm/definite-height-rounds-up-to-step-unit.html"><small>(source)</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/css-rhythm/definite-height-same-as-step-unit.html"
                        title="css/css-rhythm/definite-height-same-as-step-unit.html">definite-height-same-as-step-unit.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/css-rhythm/definite-height-same-as-step-unit.html"><small>(live
                            test)</small></a> <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/css-rhythm/definite-height-same-as-step-unit.html"><small>(source)</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/css-rhythm/parsing/block-step-size-computed.html"
                        title="css/css-rhythm/parsing/block-step-size-computed.html">block-step-size-computed.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/css-rhythm/parsing/block-step-size-computed.html"><small>(live
                            test)</small></a> <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/css-rhythm/parsing/block-step-size-computed.html"><small>(source)</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/css-rhythm/parsing/block-step-size-invalid.html"
                        title="css/css-rhythm/parsing/block-step-size-invalid.html">block-step-size-invalid.html</a> <a
                        class="wpt-live"
                        href="http://wpt.live/css/css-rhythm/parsing/block-step-size-invalid.html"><small>(live
                            test)</small></a> <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/css-rhythm/parsing/block-step-size-invalid.html"><small>(source)</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/css-rhythm/parsing/block-step-size-valid.html"
                        title="css/css-rhythm/parsing/block-step-size-valid.html">block-step-size-valid.html</a> <a
                        class="wpt-live"
                        href="http://wpt.live/css/css-rhythm/parsing/block-step-size-valid.html"><small>(live
                            test)</small></a> <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/css-rhythm/parsing/block-step-size-valid.html"><small>(source)</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/css-rhythm/replaced-elements/block-level-canvas-margins-affected-by-block-step-size.html"
                        title="css/css-rhythm/replaced-elements/block-level-canvas-margins-affected-by-block-step-size.html">block-level-canvas-margins-affected-by-block-step-size.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/css-rhythm/replaced-elements/block-level-canvas-margins-affected-by-block-step-size.html"><small>(live
                            test)</small></a> <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/css-rhythm/replaced-elements/block-level-canvas-margins-affected-by-block-step-size.html"><small>(source)</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/css-rhythm/replaced-elements/block-level-canvas-margins-affected-by-block-step-size.html"
                        title="css/css-rhythm/replaced-elements/block-level-canvas-margins-affected-by-block-step-size.html">block-level-canvas-margins-affected-by-block-step-size.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/css-rhythm/replaced-elements/block-level-canvas-margins-affected-by-block-step-size.html"><small>(live
                            test)</small></a> <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/css-rhythm/replaced-elements/block-level-canvas-margins-affected-by-block-step-size.html"><small>(source)</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/css-rhythm/replaced-elements/block-level-embed-margins-affected-by-block-step-size.html"
                        title="css/css-rhythm/replaced-elements/block-level-embed-margins-affected-by-block-step-size.html">block-level-embed-margins-affected-by-block-step-size.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/css-rhythm/replaced-elements/block-level-embed-margins-affected-by-block-step-size.html"><small>(live
                            test)</small></a> <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/css-rhythm/replaced-elements/block-level-embed-margins-affected-by-block-step-size.html"><small>(source)</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/css-rhythm/replaced-elements/block-level-iframe-margins-affected-by-block-step-size.html"
                        title="css/css-rhythm/replaced-elements/block-level-iframe-margins-affected-by-block-step-size.html">block-level-iframe-margins-affected-by-block-step-size.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/css-rhythm/replaced-elements/block-level-iframe-margins-affected-by-block-step-size.html"><small>(live
                            test)</small></a> <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/css-rhythm/replaced-elements/block-level-iframe-margins-affected-by-block-step-size.html"><small>(source)</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/css-rhythm/replaced-elements/block-level-img-margins-affected-by-block-step-size.html"
                        title="css/css-rhythm/replaced-elements/block-level-img-margins-affected-by-block-step-size.html">block-level-img-margins-affected-by-block-step-size.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/css-rhythm/replaced-elements/block-level-img-margins-affected-by-block-step-size.html"><small>(live
                            test)</small></a> <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/css-rhythm/replaced-elements/block-level-img-margins-affected-by-block-step-size.html"><small>(source)</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/css-rhythm/replaced-elements/block-level-object-margins-affected-by-block-step-size.html"
                        title="css/css-rhythm/replaced-elements/block-level-object-margins-affected-by-block-step-size.html">block-level-object-margins-affected-by-block-step-size.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/css-rhythm/replaced-elements/block-level-object-margins-affected-by-block-step-size.html"><small>(live
                            test)</small></a> <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/css-rhythm/replaced-elements/block-level-object-margins-affected-by-block-step-size.html"><small>(source)</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/css-rhythm/replaced-elements/block-level-svg-margins-affected-by-block-step-size.html"
                        title="css/css-rhythm/replaced-elements/block-level-svg-margins-affected-by-block-step-size.html">block-level-svg-margins-affected-by-block-step-size.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/css-rhythm/replaced-elements/block-level-svg-margins-affected-by-block-step-size.html"><small>(live
                            test)</small></a> <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/css-rhythm/replaced-elements/block-level-svg-margins-affected-by-block-step-size.html"><small>(source)</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/css-rhythm/replaced-elements/block-level-video-margins-affected-by-block-step-size.html"
                        title="css/css-rhythm/replaced-elements/block-level-video-margins-affected-by-block-step-size.html">block-level-video-margins-affected-by-block-step-size.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/css-rhythm/replaced-elements/block-level-video-margins-affected-by-block-step-size.html"><small>(live
                            test)</small></a> <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/css-rhythm/replaced-elements/block-level-video-margins-affected-by-block-step-size.html"><small>(source)</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/css-rhythm/zero-outer-size-rounded-up-to-block-step-size.html"
                        title="css/css-rhythm/zero-outer-size-rounded-up-to-block-step-size.html">zero-outer-size-rounded-up-to-block-step-size.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/css-rhythm/zero-outer-size-rounded-up-to-block-step-size.html"><small>(live
                            test)</small></a> <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/css-rhythm/zero-outer-size-rounded-up-to-block-step-size.html"><small>(source)</small></a>
            </ul>
        </details>
        <p>此属性为块级框的 <a data-link-type="dfn" href="https://www.w3.org/TR/css-writing-modes-4/#block-size"
                id="ref-for-block-size">块尺寸</a> 定义 <a data-link-type="dfn" href="#step-unit"
                id="ref-for-step-unit">步进单位</a>。
            当 <span id="ref-for-step-unit①">步进单位</span> 被设置为正的 <a class="production css" data-link-type="type"
                href="https://www.w3.org/TR/css-values-4/#length-value" id="ref-for-length-value①">&lt;length></a> 时，
            该框的外部高度会被舍入
            （见 <a class="property css" data-link-type="property" href="#propdef-block-step-round"
                id="ref-for-propdef-block-step-round①">block-step-round</a>）
            到该单位的最接近整数倍。
            负的 <span class="production" id="ref-for-length-value②">&lt;length></span> 值无效。</p>
        <p>除 <span class="css">none</span> 之外的值会使该框<a data-link-type="dfn"
                href="https://www.w3.org/TR/css-display-4/#establish-an-independent-formatting-context"
                id="ref-for-establish-an-independent-formatting-context">建立一个独立的格式化上下文</a>。</p>
        <p class="note" role="note"><span class="marker">注：</span>这是为了避免祖先的浮动
            突出进入该框所带来的复杂性：
            改变其有效的上外边距或内边距可能会改变
            哪些内容会被浮动影响以及影响程度，
            从而需要重新布局
            （并且在该框的高度依赖其内容时，可能产生循环）。</p>
        <p class="issue" id="issue-3ea86257"><a class="self-link" href="#issue-3ea86257"></a> 这是打破此类循环的最佳方式吗？ <a
                href="https://github.com/w3c/csswg-drafts/issues/1901">[Issue #1901]</a></p>
        <p>在外边距发生 <a href="https://www.w3.org/TR/CSS2/box.html#collapsing-margins">折叠</a> 的情况下，
            计算其外部尺寸时只考虑该框自身的外边距。</p>
        <p>当一个框发生 <a data-link-type="dfn" href="https://www.w3.org/TR/css-break-3/#fragment"
                id="ref-for-fragment">分片</a> 时，
            步进尺寸按每个分片分别应用。</p>
        <p class="issue" id="issue-e9c2c0a4"><a class="self-link" href="#issue-e9c2c0a4"></a> 我们是否应将其与
            <a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-inline-3/#propdef-text-box-edge"
                id="ref-for-propdef-text-box-edge">text-box-edge</a>/<a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-inline-3/#propdef-text-box-trim"
                id="ref-for-propdef-text-box-trim">text-box-trim</a> 的继承与应用模型对齐？ <a
                href="https://github.com/w3c/csswg-drafts/issues/1902">[Issue #1902]</a>
        </p>
        <h3 class="heading settled" data-level="2.2" id="block-step-insert"><span class="secno">2.2. </span><span
                class="content">指定间距类型：<a class="property css" data-link-type="property"
                    href="#propdef-block-step-insert" id="ref-for-propdef-block-step-insert①">block-step-insert</a>
                属性</span><a class="self-link" href="#block-step-insert"></a></h3>
        <table class="def propdef" data-link-for-hint="block-step-insert">
            <tbody>
                <tr>
                    <th>名称：
                    <td><dfn class="dfn-paneled css" data-dfn-type="property" data-export
                            id="propdef-block-step-insert">block-step-insert</dfn>
                <tr class="value">
                    <th><a href="https://www.w3.org/TR/css-values/#value-defs">值：</a>
                    <td class="prod">margin-box <a data-link-type="grammar"
                            href="https://www.w3.org/TR/css-values-4/#comb-one" id="ref-for-comb-one①">|</a> padding-box
                        <span id="ref-for-comb-one②">|</span> content-box
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#initial-values">初始值：</a>
                    <td>margin-box
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#applies-to">适用对象：</a>
                    <td>块级框
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#inherited-property">是否继承：</a>
                    <td>否
                <tr>
                    <th><a href="https://www.w3.org/TR/css-values/#percentages">百分比：</a>
                    <td>不适用
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#computed">计算值：</a>
                    <td>指定关键字
                <tr>
                    <th><a href="https://www.w3.org/TR/cssom/#serializing-css-values">规范顺序：</a>
                    <td>按语法
                <tr>
                    <th><a href="https://www.w3.org/TR/web-animations/#animation-type">动画类型：</a>
                    <td>离散
        </table>
        <details class="wpt-tests-block" dir="ltr" lang="en" open>
            <summary>Tests</summary>
            <ul class="wpt-tests-list">
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/css-rhythm/parsing/block-step-insert-computed.html"
                        title="css/css-rhythm/parsing/block-step-insert-computed.html">block-step-insert-computed.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/css-rhythm/parsing/block-step-insert-computed.html"><small>(live
                            test)</small></a> <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/css-rhythm/parsing/block-step-insert-computed.html"><small>(source)</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/css-rhythm/parsing/block-step-insert-invalid.html"
                        title="css/css-rhythm/parsing/block-step-insert-invalid.html">block-step-insert-invalid.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/css-rhythm/parsing/block-step-insert-invalid.html"><small>(live
                            test)</small></a> <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/css-rhythm/parsing/block-step-insert-invalid.html"><small>(source)</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/css-rhythm/parsing/block-step-insert-valid.html"
                        title="css/css-rhythm/parsing/block-step-insert-valid.html">block-step-insert-valid.html</a> <a
                        class="wpt-live"
                        href="http://wpt.live/css/css-rhythm/parsing/block-step-insert-valid.html"><small>(live
                            test)</small></a> <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/css-rhythm/parsing/block-step-insert-valid.html"><small>(source)</small></a>
            </ul>
        </details>
        <p>此属性指定由应用 <a class="property css" data-link-type="property" href="#propdef-block-step-size"
                id="ref-for-propdef-block-step-size③">block-step-size</a> 派生出的额外间距
            是作为框边框之内的额外空间（类似 <a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-box-4/#propdef-padding" id="ref-for-propdef-padding">padding</a>）
            插入，还是作为框边框之外的额外空间（类似 <a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-box-4/#propdef-margin" id="ref-for-propdef-margin">margin</a>）
            插入，
            或者改变内容可用高度
            （类似 <a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-sizing-3/#propdef-min-height"
                id="ref-for-propdef-min-height">min-height</a> 或 <a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/CSS2/visudet.html#propdef-max-height"
                id="ref-for-propdef-max-height">max-height</a>）。</p>
        <p>各值含义如下：</p>
        <dl>
            <dt><dfn class="dfn-paneled css" data-dfn-for="block-step-insert" data-dfn-type="value" data-export
                    id="valdef-block-step-insert-margin-box">margin-box</dfn>
            <dd> 由 <a class="property css" data-link-type="property" href="#propdef-block-step-size"
                    id="ref-for-propdef-block-step-size④">block-step-size</a> 导致的调整所产生的任何额外空间
                会作为额外外边距插入到框边框之外。
            <dt><dfn class="dfn-paneled css" data-dfn-for="block-step-insert" data-dfn-type="value" data-export
                    id="valdef-block-step-insert-padding-box">padding-box</dfn>
            <dd> 由 <a class="property css" data-link-type="property" href="#propdef-block-step-size"
                    id="ref-for-propdef-block-step-size⑤">block-step-size</a> 导致的调整所产生的任何额外空间
                会作为额外内边距插入到框边框之内。
            <dt><dfn class="dfn-paneled css" data-dfn-for="block-step-insert" data-dfn-type="value" data-export
                    id="valdef-block-step-insert-content-box">content-box</dfn>
            <dd> 由 <a class="property css" data-link-type="property" href="#propdef-block-step-size"
                    id="ref-for-propdef-block-step-size⑥">block-step-size</a> 导致的调整所产生的任何额外空间
                会通过增加 <a data-link-type="dfn" href="https://www.w3.org/TR/css-box-4/#content-area"
                    id="ref-for-content-area">内容区域</a> 的高度
                插入到框边框之内。
        </dl>
        <h3 class="heading settled" data-level="2.3" id="block-step-align"><span class="secno">2.3. </span><span
                class="content">指定对齐：<a class="property css" data-link-type="property" href="#propdef-block-step-align"
                    id="ref-for-propdef-block-step-align①">block-step-align</a>
                属性</span><a class="self-link" href="#block-step-align"></a></h3>
        <table class="def propdef" data-link-for-hint="block-step-align">
            <tbody>
                <tr>
                    <th>名称：
                    <td><dfn class="dfn-paneled css" data-dfn-type="property" data-export
                            id="propdef-block-step-align">block-step-align</dfn>
                <tr class="value">
                    <th><a href="https://www.w3.org/TR/css-values/#value-defs">值：</a>
                    <td class="prod">auto <a data-link-type="grammar"
                            href="https://www.w3.org/TR/css-values-4/#comb-one" id="ref-for-comb-one③">|</a> center
                        <span id="ref-for-comb-one④">|</span> start <span id="ref-for-comb-one⑤">|</span> end
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#initial-values">初始值：</a>
                    <td>auto
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#applies-to">适用对象：</a>
                    <td>块级框
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#inherited-property">是否继承：</a>
                    <td>否
                <tr>
                    <th><a href="https://www.w3.org/TR/css-values/#percentages">百分比：</a>
                    <td>不适用
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#computed">计算值：</a>
                    <td>指定关键字
                <tr>
                    <th><a href="https://www.w3.org/TR/cssom/#serializing-css-values">规范顺序：</a>
                    <td>按语法
                <tr>
                    <th><a href="https://www.w3.org/TR/web-animations/#animation-type">动画类型：</a>
                    <td>离散
        </table>
        <details class="wpt-tests-block" dir="ltr" lang="en" open>
            <summary>Tests</summary>
            <ul class="wpt-tests-list">
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/css-rhythm/parsing/block-step-align-computed.html"
                        title="css/css-rhythm/parsing/block-step-align-computed.html">block-step-align-computed.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/css-rhythm/parsing/block-step-align-computed.html"><small>(live
                            test)</small></a> <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/css-rhythm/parsing/block-step-align-computed.html"><small>(source)</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/css-rhythm/parsing/block-step-align-invalid.html"
                        title="css/css-rhythm/parsing/block-step-align-invalid.html">block-step-align-invalid.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/css-rhythm/parsing/block-step-align-invalid.html"><small>(live
                            test)</small></a> <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/css-rhythm/parsing/block-step-align-invalid.html"><small>(source)</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/css-rhythm/parsing/block-step-align-valid.html"
                        title="css/css-rhythm/parsing/block-step-align-valid.html">block-step-align-valid.html</a> <a
                        class="wpt-live"
                        href="http://wpt.live/css/css-rhythm/parsing/block-step-align-valid.html"><small>(live
                            test)</small></a> <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/css-rhythm/parsing/block-step-align-valid.html"><small>(source)</small></a>
            </ul>
        </details>
        <p>此属性指定由应用 <a class="property css" data-link-type="property" href="#propdef-block-step-size"
                id="ref-for-propdef-block-step-size⑦">block-step-size</a> 派生出的额外间距
            是插入到该框之前、插入到该框之后，还是分摊到该框两侧。</p>
        <p>各值含义如下：</p>
        <dl>
            <dt><dfn class="dfn-paneled css" data-dfn-for="block-step-align" data-dfn-type="value" data-export
                    id="valdef-block-step-align-auto">auto</dfn>
            <dd> 如果 <a class="property css" data-link-type="property" href="#propdef-block-step-insert"
                    id="ref-for-propdef-block-step-insert②">block-step-insert</a> 为 <a class="css"
                    data-link-type="maybe" href="#valdef-block-step-insert-margin-box"
                    id="ref-for-valdef-block-step-insert-margin-box">margin-box</a>：
                若 <a class="property css" data-link-type="property"
                    href="https://www.w3.org/TR/css-align-3/#propdef-align-self"
                    id="ref-for-propdef-align-self">align-self</a> 为 <a class="css" data-link-type="maybe"
                    href="#valdef-block-step-align-start" id="ref-for-valdef-block-step-align-start">start</a>、<a
                    class="css" data-link-type="maybe" href="#valdef-block-step-align-end"
                    id="ref-for-valdef-block-step-align-end">end</a> 或 <a class="css" data-link-type="maybe"
                    href="#valdef-block-step-align-center"
                    id="ref-for-valdef-block-step-align-center">center</a>，则按该值处理；
                否则按 <span class="css" id="ref-for-valdef-block-step-align-center①">center</span> 处理。
            <dt><dfn class="dfn-paneled css" data-dfn-for="block-step-align" data-dfn-type="value" data-export
                    id="valdef-block-step-align-center">center</dfn>
            <dd> 由 <a class="property css" data-link-type="property" href="#propdef-block-step-size"
                    id="ref-for-propdef-block-step-size⑧">block-step-size</a> 导致的调整所产生的任何额外空间
                会被分割，并各有一半应用于该框的两侧。
            <dt><dfn class="dfn-paneled css" data-dfn-for="block-step-align" data-dfn-type="value" data-export
                    id="valdef-block-step-align-start">start</dfn>
            <dd> 由 <a class="property css" data-link-type="property" href="#propdef-block-step-size"
                    id="ref-for-propdef-block-step-size⑨">block-step-size</a> 导致的调整所产生的任何额外空间
                会插入到该框的 <a data-link-type="dfn" href="https://www.w3.org/TR/css-writing-modes-4/#end"
                    id="ref-for-end">end</a> 侧。
            <dt><dfn class="dfn-paneled css" data-dfn-for="block-step-align" data-dfn-type="value" data-export
                    id="valdef-block-step-align-end">end</dfn>
            <dd> 由 <a class="property css" data-link-type="property" href="#propdef-block-step-size"
                    id="ref-for-propdef-block-step-size①⓪">block-step-size</a> 导致的调整所产生的任何额外空间
                会插入到该框的 <a data-link-type="dfn" href="https://www.w3.org/TR/css-writing-modes-4/#start"
                    id="ref-for-start">start</a> 侧。
        </dl>
        <p class="issue" id="issue-c7a8218d"><a class="self-link" href="#issue-c7a8218d"></a> 定义与 <a
                class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-align-3/#propdef-align-content"
                id="ref-for-propdef-align-content">align-content</a> 的交互。 <a
                href="https://github.com/w3c/csswg-drafts/issues/11206">[Issue #11206]</a></p>
        <p>在所有情况下，
            由于未强制的分片断点导致被截断或省略的外边距
            不能添加额外间距
            （见 <a data-link-type="biblio" href="#biblio-css3-page"
                title="CSS Paged Media Module Level 3">[CSS3-PAGE]</a> 与 <a data-link-type="biblio"
                href="#biblio-css-break-3" title="CSS Fragmentation Module Level 3">[CSS-BREAK-3]</a>）；
            因此若 <a class="property css" data-link-type="property" href="#propdef-block-step-insert"
                id="ref-for-propdef-block-step-insert③">block-step-insert</a> 为 <a class="css" data-link-type="maybe"
                href="#valdef-block-step-insert-margin-box"
                id="ref-for-valdef-block-step-insert-margin-box①">margin-box</a>，
            则由应用 <a class="property css" data-link-type="property" href="#propdef-block-step-size"
                id="ref-for-propdef-block-step-size①①">block-step-size</a> 派生出的所有额外空间
            必须插入到该分片的相反一侧
            （无论 <a class="property css" data-link-type="property" href="#propdef-block-step-align"
                id="ref-for-propdef-block-step-align②">block-step-align</a> 为何）。</p>
        <p class="issue" id="issue-d240fea2"><a class="self-link" href="#issue-d240fea2"></a> 该规则正确吗？还是说
            即便在分片边界处也应遵循 <a class="property css" data-link-type="property" href="#propdef-block-step-align"
                id="ref-for-propdef-block-step-align③">block-step-align</a>？ <a
                href="https://github.com/w3c/csswg-drafts/issues/1260">[Issue #1260]</a></p>
        <h3 class="heading settled" data-level="2.4" id="block-step-round"><span class="secno">2.4. </span><span
                class="content">舍入方法：<a class="property css" data-link-type="property" href="#propdef-block-step-round"
                    id="ref-for-propdef-block-step-round②">block-step-round</a>
                属性</span><a class="self-link" href="#block-step-round"></a></h3>
        <table class="def propdef" data-link-for-hint="block-step-round">
            <tbody>
                <tr>
                    <th>名称：
                    <td><dfn class="dfn-paneled css" data-dfn-type="property" data-export
                            id="propdef-block-step-round">block-step-round</dfn>
                <tr class="value">
                    <th><a href="https://www.w3.org/TR/css-values/#value-defs">值：</a>
                    <td class="prod">up <a data-link-type="grammar" href="https://www.w3.org/TR/css-values-4/#comb-one"
                            id="ref-for-comb-one⑥">|</a> down <span id="ref-for-comb-one⑦">|</span> nearest
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#initial-values">初始值：</a>
                    <td>up
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#applies-to">适用对象：</a>
                    <td>块级框
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#inherited-property">是否继承：</a>
                    <td>否
                <tr>
                    <th><a href="https://www.w3.org/TR/css-values/#percentages">百分比：</a>
                    <td>不适用
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#computed">计算值：</a>
                    <td>指定关键字
                <tr>
                    <th><a href="https://www.w3.org/TR/cssom/#serializing-css-values">规范顺序：</a>
                    <td>按语法
                <tr>
                    <th><a href="https://www.w3.org/TR/web-animations/#animation-type">动画类型：</a>
                    <td>离散
        </table>
        <details class="wpt-tests-block" dir="ltr" lang="en" open>
            <summary>Tests</summary>
            <ul class="wpt-tests-list">
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/css-rhythm/parsing/block-step-round-computed.html"
                        title="css/css-rhythm/parsing/block-step-round-computed.html">block-step-round-computed.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/css-rhythm/parsing/block-step-round-computed.html"><small>(live
                            test)</small></a> <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/css-rhythm/parsing/block-step-round-computed.html"><small>(source)</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/css-rhythm/parsing/block-step-round-invalid.html"
                        title="css/css-rhythm/parsing/block-step-round-invalid.html">block-step-round-invalid.html</a>
                    <a class="wpt-live"
                        href="http://wpt.live/css/css-rhythm/parsing/block-step-round-invalid.html"><small>(live
                            test)</small></a> <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/css-rhythm/parsing/block-step-round-invalid.html"><small>(source)</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/css-rhythm/parsing/block-step-round-valid.html"
                        title="css/css-rhythm/parsing/block-step-round-valid.html">block-step-round-valid.html</a> <a
                        class="wpt-live"
                        href="http://wpt.live/css/css-rhythm/parsing/block-step-round-valid.html"><small>(live
                            test)</small></a> <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/css-rhythm/parsing/block-step-round-valid.html"><small>(source)</small></a>
            </ul>
        </details>
        <p>此属性指定由 <a class="property css" data-link-type="property" href="#propdef-block-step-size"
                id="ref-for-propdef-block-step-size①②">block-step-size</a> 引起的调整
            是插入正空间还是负空间。</p>
        <p>各值含义如下：</p>
        <dl>
            <dt><dfn class="dfn-paneled css" data-dfn-for="block-step-align" data-dfn-type="value" data-export
                    id="valdef-block-step-align-up">up</dfn>
            <dd> 该框的外部尺寸会被<em>增大</em>（插入正空间）
                以满足 <a class="property css" data-link-type="property" href="#propdef-block-step-size"
                    id="ref-for-propdef-block-step-size①③">block-step-size</a> 约束。
            <dt><dfn class="dfn-paneled css" data-dfn-for="block-step-align" data-dfn-type="value" data-export
                    id="valdef-block-step-align-down">down</dfn>
            <dd> 该框的外部尺寸会被<em>减小</em>（插入负空间）
                以满足 <a class="property css" data-link-type="property" href="#propdef-block-step-size"
                    id="ref-for-propdef-block-step-size①④">block-step-size</a> 约束。
            <dt><dfn class="dfn-paneled css" data-dfn-for="block-step-align" data-dfn-type="value" data-export
                    id="valdef-block-step-align-nearest">nearest</dfn>
            <dd> 该框的外部尺寸要么<em>增大</em>（同 <a class="css" data-link-type="maybe" href="#valdef-block-step-align-up"
                    id="ref-for-valdef-block-step-align-up">up</a>），要么
                <em>减小</em>（同 <a class="css" data-link-type="maybe" href="#valdef-block-step-align-down"
                    id="ref-for-valdef-block-step-align-down">down</a>）——以绝对变化量最小者为准——从而满足 <a class="property css"
                    data-link-type="property" href="#propdef-block-step-size"
                    id="ref-for-propdef-block-step-size①⑤">block-step-size</a> 约束。
                若两种选择的变化量相同，
                则增大尺寸。
        </dl>
        <h3 class="heading settled" data-level="2.5" id="block-step"><span class="secno">2.5. </span><span
                class="content">块步调整简写：<a class="property css" data-link-type="property" href="#propdef-block-step"
                    id="ref-for-propdef-block-step④">block-step</a> 简写</span><a class="self-link"
                href="#block-step"></a></h3>
        <table class="def propdef" data-link-for-hint="block-step">
            <tbody>
                <tr>
                    <th>名称：
                    <td><dfn class="dfn-paneled css" data-dfn-type="property" data-export
                            id="propdef-block-step">block-step</dfn>
                <tr class="value">
                    <th><a href="https://www.w3.org/TR/css-values/#value-defs">值：</a>
                    <td class="prod"><a class="production css" data-link-type="property" href="#propdef-block-step-size"
                            id="ref-for-propdef-block-step-size①⑥">&lt;'block-step-size'></a> <a
                            data-link-type="grammar" href="https://www.w3.org/TR/css-values-4/#comb-any"
                            id="ref-for-comb-any">||</a> <a class="production css" data-link-type="property"
                            href="#propdef-block-step-insert"
                            id="ref-for-propdef-block-step-insert④">&lt;'block-step-insert'></a> <span
                            id="ref-for-comb-any①">||</span> <a class="production css" data-link-type="property"
                            href="#propdef-block-step-align"
                            id="ref-for-propdef-block-step-align④">&lt;'block-step-align'></a> <span
                            id="ref-for-comb-any②">||</span> <a class="production css" data-link-type="property"
                            href="#propdef-block-step-round"
                            id="ref-for-propdef-block-step-round③">&lt;'block-step-round'></a>
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#initial-values">初始值：</a>
                    <td>见各个属性
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#applies-to">适用对象：</a>
                    <td>块级框
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#inherited-property">是否继承：</a>
                    <td>否
                <tr>
                    <th><a href="https://www.w3.org/TR/css-values/#percentages">百分比：</a>
                    <td>不适用
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#computed">计算值：</a>
                    <td>见各个属性
                <tr>
                    <th><a href="https://www.w3.org/TR/web-animations/#animation-type">动画类型：</a>
                    <td>见各个属性
                <tr>
                    <th><a href="https://www.w3.org/TR/cssom/#serializing-css-values">规范顺序：</a>
                    <td>按语法
        </table>
        <details class="wpt-tests-block" dir="ltr" lang="en" open>
            <summary>Tests</summary>
            <ul class="wpt-tests-list">
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/css-rhythm/parsing/block-step-computed.html"
                        title="css/css-rhythm/parsing/block-step-computed.html">block-step-computed.html</a> <a
                        class="wpt-live"
                        href="http://wpt.live/css/css-rhythm/parsing/block-step-computed.html"><small>(live
                            test)</small></a> <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/css-rhythm/parsing/block-step-computed.html"><small>(source)</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/css-rhythm/parsing/block-step-invalid.html"
                        title="css/css-rhythm/parsing/block-step-invalid.html">block-step-invalid.html</a> <a
                        class="wpt-live"
                        href="http://wpt.live/css/css-rhythm/parsing/block-step-invalid.html"><small>(live
                            test)</small></a> <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/css-rhythm/parsing/block-step-invalid.html"><small>(source)</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/css-rhythm/parsing/block-step-valid.html"
                        title="css/css-rhythm/parsing/block-step-valid.html">block-step-valid.html</a> <a
                        class="wpt-live"
                        href="http://wpt.live/css/css-rhythm/parsing/block-step-valid.html"><small>(live
                            test)</small></a> <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/css-rhythm/parsing/block-step-valid.html"><small>(source)</small></a>
            </ul>
        </details>
        <p>该<a data-link-type="dfn" href="https://www.w3.org/TR/css-cascade-5/#shorthand-property"
                id="ref-for-shorthand-property">简写属性</a>允许在一条声明中设置 <a class="property css" data-link-type="property"
                href="#propdef-block-step-size" id="ref-for-propdef-block-step-size①⑦">block-step-size</a>、<a
                class="property css" data-link-type="property" href="#propdef-block-step-insert"
                id="ref-for-propdef-block-step-insert⑤">block-step-insert</a>、<a class="property css"
                data-link-type="property" href="#propdef-block-step-align"
                id="ref-for-propdef-block-step-align⑤">block-step-align</a>
            以及 <a class="property css" data-link-type="property" href="#propdef-block-step-round"
                id="ref-for-propdef-block-step-round④">block-step-round</a>。
            省略的值会被设置为该属性的初始值。</p>
        <p><strong class="advisement">建议作者使用此简写，而不是分别使用各长写属性，
                除非确有需要让各长写属性独立层叠。</strong></p>
        <h2 class="heading settled" data-level="3" id="line-height-step"><span class="secno">3. </span><span
                class="content">调整行框高度：<a class="property css" data-link-type="property"
                    href="#propdef-line-height-step" id="ref-for-propdef-line-height-step②">line-height-step</a>
                属性</span><a class="self-link" href="#line-height-step"></a></h2>
        <table class="def propdef" data-link-for-hint="line-height-step">
            <tbody>
                <tr>
                    <th>名称：
                    <td><dfn class="dfn-paneled css" data-dfn-type="property" data-export
                            id="propdef-line-height-step">line-height-step</dfn>
                <tr class="value">
                    <th><a href="https://www.w3.org/TR/css-values/#value-defs">值：</a>
                    <td class="prod"><a class="production css" data-link-type="type"
                            href="https://www.w3.org/TR/css-values-4/#length-value"
                            id="ref-for-length-value③">&lt;length [0,∞]></a>
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#initial-values">初始值：</a>
                    <td>0
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#applies-to">适用对象：</a>
                    <td>块容器
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#inherited-property">是否继承：</a>
                    <td>是
                <tr>
                    <th><a href="https://www.w3.org/TR/css-values/#percentages">百分比：</a>
                    <td>��适用
                <tr>
                    <th><a href="https://www.w3.org/TR/css-cascade/#computed">计算值：</a>
                    <td>绝对长度
                <tr>
                    <th><a href="https://www.w3.org/TR/cssom/#serializing-css-values">规范顺序：</a>
                    <td>按语法
                <tr>
                    <th><a href="https://www.w3.org/TR/web-animations/#animation-type">动画类型：</a>
                    <td>按计算值类型
        </table>
        <p>此属性为行框高度定义 <a data-link-type="dfn" href="#step-unit" id="ref-for-step-unit②">步进单位</a>。
            <span id="ref-for-step-unit③">步进单位</span>是纵向节奏的长度，
            通常是正文相邻两条基线之间的距离。
            正文应能容纳在一个 <span id="ref-for-step-unit④">步进单位</span> 之内，
            而诸如标题等更高的行
            应具有两个或更多 <span id="ref-for-step-unit⑤">步进单位</span> 的高度。
            纵向节奏通过使所有行的高度成为 <span id="ref-for-step-unit⑥">步进单位</span> 的整数倍来创建。
        </p>
        <p>当 <a data-link-type="dfn" href="#step-unit" id="ref-for-step-unit⑦">步进单位</a> 被设置为正的
            <a class="production css" data-link-type="type" href="https://www.w3.org/TR/css-values-4/#length-value"
                id="ref-for-length-value④">&lt;length></a> 时，
            行框高度会<i>向上</i>舍入到
            最接近的该单位的整数倍。
            负的 <span class="production" id="ref-for-length-value⑤">&lt;length></span> 值无效。
        </p>
        <p><a data-link-type="biblio" href="#biblio-css2"
                title="Cascading Style Sheets Level 2 Revision 1 (CSS 2.1) Specification">[CSS2]</a> <a
                href="https://drafts.csswg.org/css2/visudet.html#line-height">§10.8 行高计算</a> 定义了
            如何从其行内级内容计算行框的高度。
            舍入应用于行框的最终高度，
            额外空间会平均分配到行框的 <a data-link-type="dfn" href="https://www.w3.org/TR/css-writing-modes-4/#over"
                id="ref-for-over">over</a> 侧与 <a data-link-type="dfn"
                href="https://www.w3.org/TR/css-writing-modes-4/#under" id="ref-for-under">under</a> 侧，
            从而使原始行框在该 <a data-link-type="dfn" href="#step-unit" id="ref-for-step-unit⑧">步进单位</a> 的整数倍高度中居中显示。
            此调整通过假定行框中存在一个行内级框（其 A' 与 D' 已被调整）来完成。
            该行内级框不影响 <a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-inline-3/#propdef-vertical-align"
                id="ref-for-propdef-vertical-align">vertical-align</a> 属性的对齐点，
            但相对于行框对齐的取值除外。</p>
        <figure>
            <img alt height="145" src="https://www.w3.org/TR/css-rhythm-1/images/adjust-line-height.svg" width="376">
            <figcaption>将计算得到的行框高度向上舍入。</figcaption>
        </figure>
        <div class="issue" id="issue-27b8d19f"><a class="self-link" href="#issue-27b8d19f"></a>是否应当可动画化？
            似乎没有用例，但为了一致性是否需要？</div>
        <div class="example" id="example-1ffcd486">
            <a class="self-link" href="#example-1ffcd486"></a>
            <figure style="float:right"> <img alt height="176"
                    src="https://www.w3.org/TR/css-rhythm-1/images/line-grid-center.svg" width="61"> </figure>
            <p>在下面的例子中，
                每个段落中的行框高度都会向上舍入到 <a data-link-type="dfn" href="#step-unit" id="ref-for-step-unit⑨">步进单位</a>。</p>
            <pre class="lang-css highlight">:root <c- p>{</c->
  <c- k>font-size</c-><c- p>:</c-> <c- m>12</c-><c- k>pt</c-><c- p>;</c->
  <c- k>--my-grid</c-><c- p>:</c-> <c- m>18</c-><c- k>pt</c-><c- p>;</c->
  <c- k>line-height-step</c-><c- p>:</c-> <c- nf>var</c-><c- p>(</c->--my-grid<c- p>);</c->
<c- p>}</c->
h1 <c- p>{</c->
  <c- k>font-size</c-><c- p>:</c-> <c- m>20</c-><c- k>pt</c-><c- p>;</c->
  <c- k>margin-top</c-><c- p>:</c-> <c- nf>calc</c-><c- p>(</c-><c- m>2</c-> * <c- nf>var</c-><c- p>(</c->--my-grid<c- p>));</c->
<c- p>}</c->
p <c- p>{</c->
  <c- k>margin</c-><c- p>:</c-> <c- m>0</c-><c- p>;</c->
<c- p>}</c->
</pre>
            <p><code>&lt;h1></code> 中的行框无法容纳在一个 <a data-link-type="dfn" href="#step-unit"
                    id="ref-for-step-unit①⓪">步进单位</a> 中，因此占用两个；
                但它仍会在这两个 <span id="ref-for-step-unit①①">步进单位</span> 内居中。</p>
        </div>
        <div class="example" id="example-819d7b57">
            <a class="self-link" href="#example-819d7b57"></a> 作者可以像上面的例子那样，使用 <a class="css" data-link-type="maybe"
                href="https://www.w3.org/TR/css-variables-1/#funcdef-var" id="ref-for-funcdef-var">var()</a> 和 <a
                class="css" data-link-type="maybe" href="https://www.w3.org/TR/css-values-4/#funcdef-calc"
                id="ref-for-funcdef-calc">calc()</a> 来保持外边距或其他属性为 <a data-link-type="dfn" href="#step-unit"
                id="ref-for-step-unit①②">步进单位</a> 的整数倍。
            <p>如果作者愿意，
                Sass 之类的工具可以使这类声明更简短。</p>
            <pre class="lang-css highlight">$gu: <c- m>18</c-><c- k>px</c-><c- p>;</c->

<c- n>@function</c-> <c- nf>gu</c-><c- p>(</c->$n<c- p>)</c-> <c- p>{</c->
  <c- n>@return</c-> $n * $gu<c- p>;</c->
<c- p>}</c->

h1 <c- p>{</c->
  <c- k>font-size</c-><c- p>:</c-> <c- m>20</c-><c- k>pt</c-><c- p>;</c->
  <c- k>margin</c-><c- p>:</c-> <c- nf>gu</c-><c- p>(</c-><c- m>1.2</c-><c- p>)</c-> auto <c- nf>gu</c-><c- p>(</c-><c- m>1.8</c-><c- p>);</c->
<c- p>}</c->
</pre>
        </div>
        <div class="note" role="note"> 通常建议将 <a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/CSS2/visudet.html#propdef-line-height"
                id="ref-for-propdef-line-height">line-height</a> 设置得低于
            <a data-link-type="dfn" href="#step-unit" id="ref-for-step-unit①③">步进单位</a>。
            由于 <a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-inline-3/#propdef-vertical-align"
                id="ref-for-propdef-vertical-align①">vertical-align</a> 或字体回退等若干因素，
            使用的行高可能会增大。
        </div>
        <h2 class="heading settled" data-level="4" id="privacy"><span class="secno">4. </span><span
                class="content">隐私注意事项</span><a class="self-link" href="#privacy"></a></h2>
        <p>本规范未引入除“正确实现它”之外的任何新的隐私泄露。</p>
        <h2 class="heading settled" data-level="5" id="security"><span class="secno">5. </span><span
                class="content">安全注意事项</span><a class="self-link" href="#security"></a></h2>
        <p>本规范未引入除“正确实现它”之外的任何新的安全注意事项。</p>
        <h2 class="heading settled" data-level="6" id="acks"><span class="secno">6. </span><span
                class="content">致谢</span><a class="self-link" href="#acks"></a></h2>
        <p>若没有以下人士的帮助，本规范不可能完成：
            Masaharu Akutsu，
            Yoko Aoki，
            Takao Baba，
            Chris Eppstein，
            Ichiro Inaba，
            Jxck，
            Noriko Kase，
            Motoya Kinoshita，
            Shinyu Murakami，
            Tsutomu Nanjo，
            Kiyoshi Narishima，
            Charlie Neely，
            Takuya Nishimura，
            Katsuhiro Osumi，
            Florian Rivoal，
            Hiroshi Sakakibara，
            Alan Stearns，
            Masataka Yakura，
            KADOKAWA Corporation，
            PixelGrid Inc.，
            以及 CSS 工作组成员。</p>
        <h2 class="heading settled" data-level="7" id="changes"><span class="secno">7. </span><span
                class="content">变更</span><a class="self-link" href="#changes"></a></h2>
        <p>自 <a href="https://www.w3.org/TR/2017/WD-css-rhythm-1-20170302/">首份公开工作草案</a> 以来的变更包括：</p>
        <ul>
            <li data-md>
                <p>在引言中加入了与东亚随意纵向节奏的交互。</p>
            <li data-md>
                <p>定义了对被截断外边距的处理。
                    （<a href="https://github.com/w3c/csswg-drafts/issues/1260">Issue 1260</a>）</p>
            <li data-md>
                <p>将 <a class="css" data-link-type="maybe" href="#valdef-block-step-insert-margin-box"
                        id="ref-for-valdef-block-step-insert-margin-box②">margin-box</a> 添加到 <a class="property css"
                        data-link-type="property" href="#propdef-block-step-insert"
                        id="ref-for-propdef-block-step-insert⑥">block-step-insert</a>，并将其他值重命名以匹配
                    <span class="css">*-box</span> 模式。
                    （<a href="https://github.com/w3c/csswg-drafts/issues/10486">Issue 10486</a>）
                </p>
            <li data-md>
                <p>从 <a class="property css" data-link-type="property" href="#propdef-line-height-step"
                        id="ref-for-propdef-line-height-step③">line-height-step</a> 中移除了 <span class="css">none</span>
                    值。
                    （<a href="https://github.com/w3c/csswg-drafts/issues/1151">Issue 1151</a>）</p>
            <li data-md>
                <p>定义了 <a class="property css" data-link-type="property" href="#propdef-block-step"
                        id="ref-for-propdef-block-step⑤">block-step</a> 与分片的交互。</p>
            <li data-md>
                <p>使属性元数据与最新实践对齐。</p>
            <li data-md>
                <p>添加了 Web Platform Tests 覆盖。</p>
            <li data-md>
                <p>编辑改进与 bug 修复。</p>
        </ul>
    </main>
    <h2 class="no-ref no-num heading settled" id="w3c-conformance"><span class="content"> 一致性</span><a class="self-link"
            href="#w3c-conformance"></a></h2>
    <h3 class="no-ref heading settled" id="w3c-conventions"><span class="content"> 文档约定</span><a class="self-link"
            href="#w3c-conventions"></a></h3>
    <p>一致性要求通过描述性断言与 RFC 2119 术语的组合来表达。规范性部分中的关键词 “MUST”，
        “MUST NOT”， “REQUIRED”， “SHALL”， “SHALL NOT”， “SHOULD”， “SHOULD NOT”，
        “RECOMMENDED”， “MAY”，以及 “OPTIONAL” 应按 RFC 2119 中所述进行解释。
        然而，为了便于阅读，这些词在本规范中并未全部以全大写字母出现。</p>
    <p>除非某些章节被明确标记为非规范性内容、示例和注释之外，本规范的全部文本均为规范性内容。 <a data-link-type="biblio" href="#biblio-rfc2119"
            title="Key words for use in RFCs to Indicate Requirement Levels">[RFC2119]</a></p>
    <p>本规范中的示例以 “例如” 等词引入，
        或者使用 <code>class="example"</code> 将其与规范性文本区分开来，
        如下所示：</p>
    <div class="example" id="w3c-example">
        <a class="self-link" href="#w3c-example"></a>
        <p>这是一个资料性示例���示例。</p>
    </div>
    <p>资料性注释以 “注” 一词开头，并使用 <code>class="note"</code> 将其与规范性文本区分开来，
        如下所示：</p>
    <p class="note" role="note">注，这是一条资料性注释。</p>
    <p>提示（Advisements）是以特殊样式呈现、用于引起特别注意的规范性章节，并使用
        <code>&lt;strong class="advisement"></code> 将其与其他规范性文本区分开来，例如：
        <strong class="advisement"> 用户代理必须提供一种无障碍替代方案。</strong>
    </p>
    <details class="wpt-tests-block" dir="ltr" lang="en" open>
        <summary>测试</summary>
        <p>与本规范内容相关的测试
            可以像本块这样记录在 “测试” 区块中。
            任何此类区块均为非规范性内容。</p>
        <ul class="wpt-tests-list"></ul>
        <hr>
    </details>
    <h3 class="no-ref heading settled" id="w3c-conformance-classes"><span class="content"> 一致性类别</span><a
            class="self-link" href="#w3c-conformance-classes"></a></h3>
    <p>对本规范的一致性
        为以下三类一致性类别定义：</p>
    <dl>
        <dt>样式表
        <dd><a href="https://www.w3.org/TR/CSS21/conform.html#style-sheet">CSS
                样式表</a>。
        <dt>渲染器
        <dd>解释样式表语义并渲染使用这些语义的文档的 <a href="https://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a>。
        <dt>创作工具
        <dd>编写样式表的 <a href="https://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a>。
    </dl>
    <p>若某样式表中所有使用本模块定义语法的声明
        都符合通用 CSS 语法以及本模块中每个特性各自的语法，
        则该样式表符合本规范。</p>
    <p>若某渲染器除了按相应规范解释样式表之外，
        还能通过正确解析并相应渲染文档来支持本规范定义的所有特性，
        则该渲染器符合本规范。然而，UA 因设备限制而无法正确渲染文档
        并不会使该 UA 不符合规范。（例如，UA 不要求在单色显示器上渲染颜色。）</p>
    <p>若某创作工具编写的样式表在语法上符合通用 CSS 语法以及本模块中各特性的各自语法，
        并满足本模块所述的样式表的所有其他一致性要求，
        则该创作工具符合本规范。</p>
    <h3 class="no-ref heading settled" id="w3c-partial"><span class="content"> 部分实现</span><a class="self-link"
            href="#w3c-partial"></a></h3>
    <p>为了使作者能够利用前向兼容的解析规则来指定回退值，
        CSS 渲染器 <strong>必须</strong> 将其不具备可用支持级别的任何 at 规则、属性、属性值、关键字
        以及其他语法结构视为无效（并 <a href="https://www.w3.org/TR/CSS21/conform.html#ignore">按需忽略</a>）。
        尤其是，用户代理 <strong>不得</strong> 在单个多值属性声明中选择性忽略不支持的组件值而对支持的值予以认可：
        若任一值被视为无效（不支持的值必须如此），CSS 要求忽略整条声明。</p>
    <h4 class="heading settled" id="w3c-conform-future-proofing"><span class="content">不稳定与专有特性的实现</span><a
            class="self-link" href="#w3c-conform-future-proofing"></a></h4>
    <p>为避免与未来稳定的 CSS 特性发生冲突，
        CSSWG 建议在实现 <a href="https://www.w3.org/TR/CSS/#unstable">不稳定</a> 特性以及 CSS 的 <a
            href="https://www.w3.org/TR/CSS/#proprietary-extension">专有扩展</a> 时 <a
            href="https://www.w3.org/TR/CSS/#future-proofing">遵循最佳实践</a>。</p>
    <h3 class="no-ref heading settled" id="w3c-testing"><span class="content"> 非试验性实现</span><a class="self-link"
            href="#w3c-testing"></a></h3>
    <p>当某规范达到候选推荐（Candidate Recommendation）阶段后，
        就可能出现非试验性实现，且实现者应发布其能够证明已按规范正确实现的任何 CR 级特性的无前缀实现。</p>
    <p>为建立并维持 CSS 在不同实现之间的互操作性，
        CSS 工作组请求非试验性的 CSS 渲染器在发布任何 CSS 特性的无前缀实现之前，
        向 W3C 提交实现报告（以及在必要时，用于该实现报告的测试用例）。
        提交给 W3C 的测试用例将由 CSS 工作组进行审查与修正。</p>
    <p>关于提交测试用例与实现报告的更多信息
        可在 CSS 工作组网站 <a href="https://www.w3.org/Style/CSS/Test/">https://www.w3.org/Style/CSS/Test/</a> 上找到。
        问题应发送至 <a href="https://lists.w3.org/Archives/Public/public-css-testsuite">public-css-testsuite@w3.org</a> 邮件列表。
    </p>
    <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
    <h2 class="no-num no-ref heading settled" id="index"><span class="content">索引</span><a class="self-link"
            href="#index"></a></h2>
    <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">本规范定义的术语</span><a
            class="self-link" href="#index-defined-here"></a></h3>
    <ul class="index">
        <li><a href="#valdef-block-step-align-auto">auto</a><span>，在 § 2.3</span>
        <li><a href="#propdef-block-step">block-step</a><span>，在 § 2.5</span>
        <li><a href="#propdef-block-step-align">block-step-align</a><span>，在 § 2.3</span>
        <li><a href="#propdef-block-step-insert">block-step-insert</a><span>，在 § 2.2</span>
        <li><a href="#propdef-block-step-round">block-step-round</a><span>，在 § 2.4</span>
        <li><a href="#propdef-block-step-size">block-step-size</a><span>，在 § 2.1</span>
        <li><a href="#valdef-block-step-align-center">center</a><span>，在 § 2.3</span>
        <li><a href="#valdef-block-step-insert-content-box">content-box</a><span>，在 § 2.2</span>
        <li><a href="#valdef-block-step-align-down">down</a><span>，在 § 2.4</span>
        <li><a href="#valdef-block-step-align-end">end</a><span>，在 § 2.3</span>
        <li><a href="#propdef-line-height-step">line-height-step</a><span>，在 § 3</span>
        <li><a href="#valdef-block-step-insert-margin-box">margin-box</a><span>，在 § 2.2</span>
        <li><a href="#valdef-block-step-align-nearest">nearest</a><span>，在 § 2.4</span>
        <li><a href="#valdef-block-step-insert-padding-box">padding-box</a><span>，在 § 2.2</span>
        <li><a href="#valdef-block-step-align-start">start</a><span>，在 § 2.3</span>
        <li><a href="#step-unit">step unit</a><span>，在 § 1</span>
        <li><a href="#valdef-block-step-align-up">up</a><span>，在 § 2.4</span>
    </ul>
    <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">通过引用定义的术语</span><a
            class="self-link" href="#index-defined-elsewhere"></a></h3>
    <ul class="index">
        <li>
            <a data-link-type="biblio">[CSS-ALIGN-3]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="fde954ee">align-content</span>
                <li><span class="dfn-paneled" id="9d95c839">align-self</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-BOX-4]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="df86efcb">content area</span>
                <li><span class="dfn-paneled" id="253362bb">margin</span>
                <li><span class="dfn-paneled" id="a3a070bd">padding</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-BREAK-3]</a> ���义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="62c772f5">fragment</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-CASCADE-5]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="980ac56a">shorthand property</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-DISPLAY-4]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="8be4ac1c">establish an independent formatting context</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-INLINE-3]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="13bc5d37">text-box-edge</span>
                <li><span class="dfn-paneled" id="34a43677">text-box-trim</span>
                <li><span class="dfn-paneled" id="2d8be2d9">vertical-align</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-LINE-GRID-1]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="a234626f">line-grid</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-SIZING-3]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="f12a84ab">min-height</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-VALUES-4]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="98ddb9b0">&lt;length></span>
                <li><span class="dfn-paneled" id="14d3255d">calc()</span>
                <li><span class="dfn-paneled" id="8a110a7b">CSS-wide keywords</span>
                <li><span class="dfn-paneled" id="4eb9d37e">|</span>
                <li><span class="dfn-paneled" id="a0336d84">||</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-VARIABLES-1]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="3beec8c9">var()</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-WRITING-MODES-4]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="ecef1eb5">block size</span>
                <li><span class="dfn-paneled" id="e112902f">end</span>
                <li><span class="dfn-paneled" id="9d51c0ac">over</span>
                <li><span class="dfn-paneled" id="90c7548c">start</span>
                <li><span class="dfn-paneled" id="99d814d1">under</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS2]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="fb01f680">line-height</span>
                <li><span class="dfn-paneled" id="0f0ab49f">max-height</span>
            </ul>
    </ul>
    <h2 class="no-num no-ref heading settled" id="references"><span class="content">参考文献</span><a class="self-link"
            href="#references"></a></h2>
    <h3 class="no-num no-ref heading settled" id="normative"><span class="content">规范性参考文献</span><a class="self-link"
            href="#normative"></a></h3>
    <dl>
        <dt id="biblio-css-align-3">[CSS-ALIGN-3]
        <dd>Elika Etemad; Tab Atkins Jr.. <a href="https://www.w3.org/TR/css-align-3/"><cite>CSS Box Alignment Module
                    Level 3</cite></a>. 30 January 2026. WD. URL: <a
                href="https://www.w3.org/TR/css-align-3/">https://www.w3.org/TR/css-align-3/</a>
        <dt id="biblio-css-box-4">[CSS-BOX-4]
        <dd>Elika Etemad. <a href="https://www.w3.org/TR/css-box-4/"><cite>CSS Box Model Module Level 4</cite></a>. 4
            August 2024. WD. URL: <a href="https://www.w3.org/TR/css-box-4/">https://www.w3.org/TR/css-box-4/</a>
        <dt id="biblio-css-break-3">[CSS-BREAK-3]
        <dd>Rossen Atanassov; Elika Etemad. <a href="https://www.w3.org/TR/css-break-3/"><cite>CSS Fragmentation Module
                    Level 3</cite></a>. 4 December 2018. CR. URL: <a
                href="https://www.w3.org/TR/css-break-3/">https://www.w3.org/TR/css-break-3/</a>
        <dt id="biblio-css-cascade-5">[CSS-CASCADE-5]
        <dd>Elika Etemad; Miriam Suzanne; Tab Atkins Jr.. <a href="https://www.w3.org/TR/css-cascade-5/"><cite>CSS
                    Cascading and Inheritance Level 5</cite></a>. 13 January 2022. CR. URL: <a
                href="https://www.w3.org/TR/css-cascade-5/">https://www.w3.org/TR/css-cascade-5/</a>
        <dt id="biblio-css-display-4">[CSS-DISPLAY-4]
        <dd>Elika Etemad; Tab Atkins Jr.. <a href="https://www.w3.org/TR/css-display-4/"><cite>CSS Display Module Level
                    4</cite></a>. 6 November 2025. WD. URL: <a
                href="https://www.w3.org/TR/css-display-4/">https://www.w3.org/TR/css-display-4/</a>
        <dt id="biblio-css-inline-3">[CSS-INLINE-3]
        <dd>Elika Etemad. <a href="https://www.w3.org/TR/css-inline-3/"><cite>CSS Inline Layout Module Level
                    3</cite></a>. 18 December 2024. WD. URL: <a
                href="https://www.w3.org/TR/css-inline-3/">https://www.w3.org/TR/css-inline-3/</a>
        <dt id="biblio-css-line-grid-1">[CSS-LINE-GRID-1]
        <dd>Elika Etemad; Koji Ishii; Alan Stearns. <a href="https://www.w3.org/TR/css-line-grid-1/"><cite>CSS Line Grid
                    Module Level 1</cite></a>. 16 September 2014. WD. URL: <a
                href="https://www.w3.org/TR/css-line-grid-1/">https://www.w3.org/TR/css-line-grid-1/</a>
        <dt id="biblio-css-sizing-3">[CSS-SIZING-3]
        <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://www.w3.org/TR/css-sizing-3/"><cite>CSS Box Sizing Module
                    Level 3</cite></a>. 17 December 2021. WD. URL: <a
                href="https://www.w3.org/TR/css-sizing-3/">https://www.w3.org/TR/css-sizing-3/</a>
        <dt id="biblio-css-values-3">[CSS-VALUES-3]
        <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://www.w3.org/TR/css-values-3/"><cite>CSS Values and Units
                    Module Level 3</cite></a>. 22 March 2024. CRD. URL: <a
                href="https://www.w3.org/TR/css-values-3/">https://www.w3.org/TR/css-values-3/</a>
        <dt id="biblio-css-values-4">[CSS-VALUES-4]
        <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://www.w3.org/TR/css-values-4/"><cite>CSS Values and Units
                    Module Level 4</cite></a>. 12 March 2024. WD. URL: <a
                href="https://www.w3.org/TR/css-values-4/">https://www.w3.org/TR/css-values-4/</a>
        <dt id="biblio-css-writing-modes-4">[CSS-WRITING-MODES-4]
        <dd>Elika Etemad; Koji Ishii. <a href="https://www.w3.org/TR/css-writing-modes-4/"><cite>CSS Writing Modes Level
                    4</cite></a>. 30 July 2019. CR. URL: <a
                href="https://www.w3.org/TR/css-writing-modes-4/">https://www.w3.org/TR/css-writing-modes-4/</a>
        <dt id="biblio-css2">[CSS2]
        <dd>Bert Bos; et al. <a href="https://www.w3.org/TR/CSS2/"><cite>Cascading Style Sheets Level 2 Revision 1 (CSS
                    2.1) Specification</cite></a>. 7 June 2011. REC. URL: <a
                href="https://www.w3.org/TR/CSS2/">https://www.w3.org/TR/CSS2/</a>
        <dt id="biblio-rfc2119">[RFC2119]
        <dd>S. Bradner. <a href="https://datatracker.ietf.org/doc/html/rfc2119"><cite>Key words for use in RFCs to
                    Indicate Requirement Levels</cite></a>. March 1997. Best Current Practice. URL: <a
                href="https://datatracker.ietf.org/doc/html/rfc2119">https://datatracker.ietf.org/doc/html/rfc2119</a>
    </dl>
    <h3 class="no-num no-ref heading settled" id="informative"><span class="content">资料性参考文献</span><a class="self-link"
            href="#informative"></a></h3>
    <dl>
        <dt id="biblio-css-variables-1">[CSS-VARIABLES-1]
        <dd>Tab Atkins Jr.. <a href="https://www.w3.org/TR/css-variables-1/"><cite>CSS Custom Properties for Cascading
                    Variables Module Level 1</cite></a>. 16 June 2022. CR. URL: <a
                href="https://www.w3.org/TR/css-variables-1/">https://www.w3.org/TR/css-variables-1/</a>
        <dt id="biblio-css3-page">[CSS3-PAGE]
        <dd>Elika Etemad. <a href="https://www.w3.org/TR/css-page-3/"><cite>CSS Paged Media Module Level 3</cite></a>.
            14 September 2023. WD. URL: <a
                href="https://www.w3.org/TR/css-page-3/">https://www.w3.org/TR/css-page-3/</a>
    </dl>
    <h2 class="no-num no-ref heading settled" id="property-index"><span class="content">属性索引</span><a class="self-link"
            href="#property-index"></a></h2>
    <div class="big-element-wrapper">
        <table class="index">
            <thead>
                <tr>
                    <th scope="col">名称
                    <th scope="col">值
                    <th scope="col">初始值
                    <th scope="col">适用对象
                    <th scope="col">继承
                    <th scope="col">百分比
                    <th scope="col">动画类型
                    <th scope="col">规范顺序
                    <th scope="col">计算值
            <tbody>
                <tr>
                    <th scope="row"><a class="css" data-link-type="property" href="#propdef-block-step"
                            id="ref-for-propdef-block-step⑥">block-step</a>
                    <td>&lt;'block-step-size'> || &lt;'block-step-insert'> || &lt;'block-step-align'> ||
                        &lt;'block-step-round'>
                    <td>见各个属性
                    <td>块级框
                    <td>否
                    <td>不适用
                    <td>见各个属性
                    <td>按语法
                    <td>见各个属性
                <tr>
                    <th scope="row"><a class="css" data-link-type="property" href="#propdef-block-step-align"
                            id="ref-for-propdef-block-step-align⑥">block-step-align</a>
                    <td>auto | center | start | end
                    <td>auto
                    <td>块级框
                    <td>否
                    <td>不适用
                    <td>离散
                    <td>按语法
                    <td>指定关键字
                <tr>
                    <th scope="row"><a class="css" data-link-type="property" href="#propdef-block-step-insert"
                            id="ref-for-propdef-block-step-insert⑦">block-step-insert</a>
                    <td>margin-box | padding-box | content-box
                    <td>margin-box
                    <td>块级框
                    <td>否
                    <td>不适用
                    <td>离散
                    <td>按语法
                    <td>指定关键字
                <tr>
                    <th scope="row"><a class="css" data-link-type="property" href="#propdef-block-step-round"
                            id="ref-for-propdef-block-step-round⑤">block-step-round</a>
                    <td>up | down | nearest
                    <td>up
                    <td>块级框
                    <td>否
                    <td>不适用
                    <td>离散
                    <td>按语法
                    <td>指定关键字
                <tr>
                    <th scope="row"><a class="css" data-link-type="property" href="#propdef-block-step-size"
                            id="ref-for-propdef-block-step-size①⑧">block-step-size</a>
                    <td>none | &lt;length [0,∞]>
                    <td>none
                    <td>块级框
                    <td>否
                    <td>不适用
                    <td>按计算值类型
                    <td>按语法
                    <td>指定关键字或绝对长度
                <tr>
                    <th scope="row"><a class="css" data-link-type="property" href="#propdef-line-height-step"
                            id="ref-for-propdef-line-height-step④">line-height-step</a>
                    <td>&lt;length [0,∞]>
                    <td>0
                    <td>块容器
                    <td>是
                    <td>不适用
                    <td>按计算值类型
                    <td>按语法
                    <td>绝对长度
        </table>
    </div>
    <h2 class="no-num no-ref heading settled" id="issues-index"><span class="content">问题索引</span><a class="self-link"
            href="#issues-index"></a></h2>
    <div style="counter-reset:issue">
        <div class="issue"> 该提案可以简化为仅使用 <a class="property css" data-link-type="property"
                href="#propdef-block-step-size">block-step-size</a> 属性，并且只通过其缩写形式 <a class="property css"
                data-link-type="property" href="#propdef-block-step">block-step</a> 来表示。
            本级规范很可能最多只包含 <span class="property">block-step-size</span> 和 <a class="property css"
                data-link-type="property" href="#propdef-block-step-insert">block-step-insert</a>，
            而将 <a class="property css" data-link-type="property" href="#propdef-block-step-align">block-step-align</a> 与
            <a class="property css" data-link-type="property" href="#propdef-block-step-round">block-step-round</a>
            留待未来如有需求再加入。
            完整设计在此给出，用于当前讨论及未来参考�� <a class="issue-return" href="#issue-d3f7ebdb" title="Jump to section">↵</a>
        </div>
        <div class="issue"> 该提案目前被定义为仅适用于块级框。此限制仅为简化第一次迭代；
            它最终应扩展到所有尊重指定高度的布局模式。 <a class="issue-return" href="#issue-906f23b3" title="Jump to section">↵</a></div>
        <div class="issue"> 这是打破此类循环的最佳方式吗？ <a href="https://github.com/w3c/csswg-drafts/issues/1901">[Issue #1901]</a>
            <a class="issue-return" href="#issue-3ea86257" title="Jump to section">↵</a>
        </div>
        <div class="issue"> 我们是否应将其与 <a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-inline-3/#propdef-text-box-edge">text-box-edge</a>/<a
                class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-inline-3/#propdef-text-box-trim">text-box-trim</a> 的继承与应用模型对齐？ <a
                href="https://github.com/w3c/csswg-drafts/issues/1902">[Issue #1902]</a> <a class="issue-return"
                href="#issue-e9c2c0a4" title="Jump to section">↵</a></div>
        <div class="issue"> 定义与 <a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-align-3/#propdef-align-content">align-content</a> 的交互。 <a
                href="https://github.com/w3c/csswg-drafts/issues/11206">[Issue #11206]</a> <a class="issue-return"
                href="#issue-c7a8218d" title="Jump to section">↵</a></div>
        <div class="issue"> 该规则正确吗？还是说即便在分片边界处也应遵循 <a class="property css" data-link-type="property"
                href="#propdef-block-step-align">block-step-align</a>？ <a
                href="https://github.com/w3c/csswg-drafts/issues/1260">[Issue #1260]</a> <a class="issue-return"
                href="#issue-d240fea2" title="Jump to section">↵</a></div>
        <div class="issue">是否应当可动画化？
            似乎没有用例，但为了一致性是否需要？ <a class="issue-return" href="#issue-27b8d19f" title="Jump to section">↵</a></div>
    </div>
    <script>/* Boilerplate: script-dom-helper */
        "use strict";
        function query(sel) { return document.querySelector(sel); }

        function queryAll(sel) { return [...document.querySelectorAll(sel)]; }

        function iter(obj) {
            if (!obj) return [];
            var it = obj[Symbol.iterator];
            if (it) return it;
            return Object.entries(obj);
        }

        function mk(tagname, attrs, ...children) {
            const el = document.createElement(tagname);
            for (const [k, v] of iter(attrs)) {
                if (k.slice(0, 3) == "_on") {
                    const eventName = k.slice(3);
                    el.addEventListener(eventName, v);
                } else if (k[0] == "_") {
                    // property, not attribute
                    el[k.slice(1)] = v;
                } else {
                    if (v === false || v == null) {
                        continue;
                    } else if (v === true) {
                        el.setAttribute(k, "");
                        continue;
                    } else {
                        el.setAttribute(k, v);
                    }
                }
            }
            append(el, children);
            return el;
        }

        /* Create shortcuts for every known HTML element */
        [
            "a",
            "abbr",
            "acronym",
            "address",
            "applet",
            "area",
            "article",
            "aside",
            "audio",
            "b",
            "base",
            "basefont",
            "bdo",
            "big",
            "blockquote",
            "body",
            "br",
            "button",
            "canvas",
            "caption",
            "center",
            "cite",
            "code",
            "col",
            "colgroup",
            "datalist",
            "dd",
            "del",
            "details",
            "dfn",
            "dialog",
            "div",
            "dl",
            "dt",
            "em",
            "embed",
            "fieldset",
            "figcaption",
            "figure",
            "font",
            "footer",
            "form",
            "frame",
            "frameset",
            "head",
            "header",
            "h1",
            "h2",
            "h3",
            "h4",
            "h5",
            "h6",
            "hr",
            "html",
            "i",
            "iframe",
            "img",
            "input",
            "ins",
            "kbd",
            "label",
            "legend",
            "li",
            "link",
            "main",
            "map",
            "mark",
            "meta",
            "meter",
            "nav",
            "nobr",
            "noscript",
            "object",
            "ol",
            "optgroup",
            "option",
            "output",
            "p",
            "param",
            "pre",
            "progress",
            "q",
            "s",
            "samp",
            "script",
            "section",
            "select",
            "small",
            "source",
            "span",
            "strike",
            "strong",
            "style",
            "sub",
            "summary",
            "sup",
            "table",
            "tbody",
            "td",
            "template",
            "textarea",
            "tfoot",
            "th",
            "thead",
            "time",
            "title",
            "tr",
            "u",
            "ul",
            "var",
            "video",
            "wbr",
            "xmp",
        ].forEach(tagname => {
            mk[tagname] = (...args) => mk(tagname, ...args);
        });

        function* nodesFromChildList(children) {
            for (const child of children.flat(Infinity)) {
                if (child instanceof Node) {
                    yield child;
                } else {
                    yield new Text(child);
                }
            }
        }
        function append(el, ...children) {
            for (const child of nodesFromChildList(children)) {
                if (el instanceof Node) el.appendChild(child);
                else el.push(child);
            }
            return el;
        }

        function insertAfter(el, ...children) {
            for (const child of nodesFromChildList(children)) {
                el.parentNode.insertBefore(child, el.nextSibling);
            }
            return el;
        }

        function clearContents(el) {
            el.innerHTML = "";
            return el;
        }

        function parseHTML(markup) {
            if (markup.toLowerCase().trim().indexOf('<!doctype') === 0) {
                const doc = document.implementation.createHTMLDocument("");
                doc.documentElement.innerHTML = markup;
                return doc;
            } else {
                const el = mk.template({});
                el.innerHTML = markup;
                return el.content;
            }
        }</script>
    <script>/* Boilerplate: script-dfn-panel */
        "use strict";
        {
            let dfnPanelData = {
                "0f0ab49f": { "dfnID": "0f0ab49f", "dfnText": "max-height", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-max-height" }], "title": "2.2. Specifying the Spacing Type: the block-step-insert property" }], "url": "https://www.w3.org/TR/CSS2/visudet.html#propdef-max-height" },
                "13bc5d37": { "dfnID": "13bc5d37", "dfnText": "text-box-edge", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-text-box-edge" }], "title": "2.1. Specifying the Step Size: the block-step-size property" }], "url": "https://www.w3.org/TR/css-inline-3/#propdef-text-box-edge" },
                "14d3255d": { "dfnID": "14d3255d", "dfnText": "calc()", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-funcdef-calc" }], "title": "3. Adjusting Line Box Heights: the line-height-step property" }], "url": "https://www.w3.org/TR/css-values-4/#funcdef-calc" },
                "253362bb": { "dfnID": "253362bb", "dfnText": "margin", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-margin" }], "title": "2.2. Specifying the Spacing Type: the block-step-insert property" }], "url": "https://www.w3.org/TR/css-box-4/#propdef-margin" },
                "2d8be2d9": { "dfnID": "2d8be2d9", "dfnText": "vertical-align", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-vertical-align" }, { "id": "ref-for-propdef-vertical-align\u2460" }], "title": "3. Adjusting Line Box Heights: the line-height-step property" }], "url": "https://www.w3.org/TR/css-inline-3/#propdef-vertical-align" },
                "34a43677": { "dfnID": "34a43677", "dfnText": "text-box-trim", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-text-box-trim" }], "title": "2.1. Specifying the Step Size: the block-step-size property" }], "url": "https://www.w3.org/TR/css-inline-3/#propdef-text-box-trim" },
                "3beec8c9": { "dfnID": "3beec8c9", "dfnText": "var()", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-funcdef-var" }], "title": "3. Adjusting Line Box Heights: the line-height-step property" }], "url": "https://www.w3.org/TR/css-variables-1/#funcdef-var" },
                "4eb9d37e": { "dfnID": "4eb9d37e", "dfnText": "|", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-comb-one" }], "title": "2.1. Specifying the Step Size: the block-step-size property" }, { "refs": [{ "id": "ref-for-comb-one\u2460" }, { "id": "ref-for-comb-one\u2461" }], "title": "2.2. Specifying the Spacing Type: the block-step-insert property" }, { "refs": [{ "id": "ref-for-comb-one\u2462" }, { "id": "ref-for-comb-one\u2463" }, { "id": "ref-for-comb-one\u2464" }], "title": "2.3. Specifying Alignment: the block-step-align property" }, { "refs": [{ "id": "ref-for-comb-one\u2465" }, { "id": "ref-for-comb-one\u2466" }], "title": "2.4. Rounding Method: the block-step-round property" }], "url": "https://www.w3.org/TR/css-values-4/#comb-one" },
                "62c772f5": { "dfnID": "62c772f5", "dfnText": "fragment", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-fragment" }], "title": "2.1. Specifying the Step Size: the block-step-size property" }], "url": "https://www.w3.org/TR/css-break-3/#fragment" },
                "8a110a7b": { "dfnID": "8a110a7b", "dfnText": "CSS-wide keywords", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-css-wide-keywords" }], "title": "1.2. Value Definitions" }], "url": "https://www.w3.org/TR/css-values-4/#css-wide-keywords" },
                "8be4ac1c": { "dfnID": "8be4ac1c", "dfnText": "establish an independent formatting context", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-establish-an-independent-formatting-context" }], "title": "2.1. Specifying the Step Size: the block-step-size property" }], "url": "https://www.w3.org/TR/css-display-4/#establish-an-independent-formatting-context" },
                "90c7548c": { "dfnID": "90c7548c", "dfnText": "start", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-start" }], "title": "2.3. Specifying Alignment: the block-step-align property" }], "url": "https://www.w3.org/TR/css-writing-modes-4/#start" },
                "980ac56a": { "dfnID": "980ac56a", "dfnText": "shorthand property", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-shorthand-property" }], "title": "2.5. Block Step Adjustment Shorthand: the block-step shorthand" }], "url": "https://www.w3.org/TR/css-cascade-5/#shorthand-property" },
                "98ddb9b0": { "dfnID": "98ddb9b0", "dfnText": "<length>", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-length-value" }, { "id": "ref-for-length-value\u2460" }, { "id": "ref-for-length-value\u2461" }], "title": "2.1. Specifying the Step Size: the block-step-size property" }, { "refs": [{ "id": "ref-for-length-value\u2462" }, { "id": "ref-for-length-value\u2463" }, { "id": "ref-for-length-value\u2464" }], "title": "3. Adjusting Line Box Heights: the line-height-step property" }], "url": "https://www.w3.org/TR/css-values-4/#length-value" },
                "99d814d1": { "dfnID": "99d814d1", "dfnText": "under", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-under" }], "title": "3. Adjusting Line Box Heights: the line-height-step property" }], "url": "https://www.w3.org/TR/css-writing-modes-4/#under" },
                "9d51c0ac": { "dfnID": "9d51c0ac", "dfnText": "over", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-over" }], "title": "3. Adjusting Line Box Heights: the line-height-step property" }], "url": "https://www.w3.org/TR/css-writing-modes-4/#over" },
                "9d95c839": { "dfnID": "9d95c839", "dfnText": "align-self", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-align-self" }], "title": "2.3. Specifying Alignment: the block-step-align property" }], "url": "https://www.w3.org/TR/css-align-3/#propdef-align-self" },
                "a0336d84": { "dfnID": "a0336d84", "dfnText": "||", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-comb-any" }, { "id": "ref-for-comb-any\u2460" }, { "id": "ref-for-comb-any\u2461" }], "title": "2.5. Block Step Adjustment Shorthand: the block-step shorthand" }], "url": "https://www.w3.org/TR/css-values-4/#comb-any" },
                "a234626f": { "dfnID": "a234626f", "dfnText": "line-grid", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-line-grid" }, { "id": "ref-for-propdef-line-grid\u2460" }], "title": "1.1. East Asian Casual Vertical Rhythms" }], "url": "https://www.w3.org/TR/css-line-grid-1/#propdef-line-grid" },
                "a3a070bd": { "dfnID": "a3a070bd", "dfnText": "padding", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-padding" }], "title": "2.2. Specifying the Spacing Type: the block-step-insert property" }], "url": "https://www.w3.org/TR/css-box-4/#propdef-padding" },
                "df86efcb": { "dfnID": "df86efcb", "dfnText": "content area", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-content-area" }], "title": "2.2. Specifying the Spacing Type: the block-step-insert property" }], "url": "https://www.w3.org/TR/css-box-4/#content-area" },
                "e112902f": { "dfnID": "e112902f", "dfnText": "end", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-end" }], "title": "2.3. Specifying Alignment: the block-step-align property" }], "url": "https://www.w3.org/TR/css-writing-modes-4/#end" },
                "ecef1eb5": { "dfnID": "ecef1eb5", "dfnText": "block size", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-block-size" }], "title": "2.1. Specifying the Step Size: the block-step-size property" }], "url": "https://www.w3.org/TR/css-writing-modes-4/#block-size" },
                "f12a84ab": { "dfnID": "f12a84ab", "dfnText": "min-height", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-min-height" }], "title": "2.2. Specifying the Spacing Type: the block-step-insert property" }], "url": "https://www.w3.org/TR/css-sizing-3/#propdef-min-height" },
                "fb01f680": { "dfnID": "fb01f680", "dfnText": "line-height", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-line-height" }], "title": "3. Adjusting Line Box Heights: the line-height-step property" }], "url": "https://www.w3.org/TR/CSS2/visudet.html#propdef-line-height" },
                "fde954ee": { "dfnID": "fde954ee", "dfnText": "align-content", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-align-content" }], "title": "2.3. Specifying Alignment: the block-step-align property" }], "url": "https://www.w3.org/TR/css-align-3/#propdef-align-content" },
                "propdef-block-step": { "dfnID": "propdef-block-step", "dfnText": "block-step", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-propdef-block-step" }, { "id": "ref-for-propdef-block-step\u2460" }], "title": "1.1. East Asian Casual Vertical Rhythms" }, { "refs": [{ "id": "ref-for-propdef-block-step\u2461" }, { "id": "ref-for-propdef-block-step\u2462" }], "title": "2. Adjusting Block-level Box Heights" }, { "refs": [{ "id": "ref-for-propdef-block-step\u2463" }], "title": "2.5. Block Step Adjustment Shorthand: the block-step shorthand" }, { "refs": [{ "id": "ref-for-propdef-block-step\u2464" }], "title": "7. Changes" }], "url": "#propdef-block-step" },
                "propdef-block-step-align": { "dfnID": "propdef-block-step-align", "dfnText": "block-step-align", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-propdef-block-step-align" }], "title": "2. Adjusting Block-level Box Heights" }, { "refs": [{ "id": "ref-for-propdef-block-step-align\u2460" }, { "id": "ref-for-propdef-block-step-align\u2461" }, { "id": "ref-for-propdef-block-step-align\u2462" }], "title": "2.3. Specifying Alignment: the block-step-align property" }, { "refs": [{ "id": "ref-for-propdef-block-step-align\u2463" }, { "id": "ref-for-propdef-block-step-align\u2464" }], "title": "2.5. Block Step Adjustment Shorthand: the block-step shorthand" }], "url": "#propdef-block-step-align" },
                "propdef-block-step-insert": { "dfnID": "propdef-block-step-insert", "dfnText": "block-step-insert", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-propdef-block-step-insert" }], "title": "2. Adjusting Block-level Box Heights" }, { "refs": [{ "id": "ref-for-propdef-block-step-insert\u2460" }], "title": "2.2. Specifying the Spacing Type: the block-step-insert property" }, { "refs": [{ "id": "ref-for-propdef-block-step-insert\u2461" }, { "id": "ref-for-propdef-block-step-insert\u2462" }], "title": "2.3. Specifying Alignment: the block-step-align property" }, { "refs": [{ "id": "ref-for-propdef-block-step-insert\u2463" }, { "id": "ref-for-propdef-block-step-insert\u2464" }], "title": "2.5. Block Step Adjustment Shorthand: the block-step shorthand" }, { "refs": [{ "id": "ref-for-propdef-block-step-insert\u2465" }], "title": "7. Changes" }], "url": "#propdef-block-step-insert" },
                "propdef-block-step-round": { "dfnID": "propdef-block-step-round", "dfnText": "block-step-round", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-propdef-block-step-round" }], "title": "2. Adjusting Block-level Box Heights" }, { "refs": [{ "id": "ref-for-propdef-block-step-round\u2460" }], "title": "2.1. Specifying the Step Size: the block-step-size property" }, { "refs": [{ "id": "ref-for-propdef-block-step-round\u2461" }], "title": "2.4. Rounding Method: the block-step-round property" }, { "refs": [{ "id": "ref-for-propdef-block-step-round\u2462" }, { "id": "ref-for-propdef-block-step-round\u2463" }], "title": "2.5. Block Step Adjustment Shorthand: the block-step shorthand" }], "url": "#propdef-block-step-round" },
                "propdef-block-step-size": { "dfnID": "propdef-block-step-size", "dfnText": "block-step-size", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-propdef-block-step-size" }, { "id": "ref-for-propdef-block-step-size\u2460" }], "title": "2. Adjusting Block-level Box Heights" }, { "refs": [{ "id": "ref-for-propdef-block-step-size\u2461" }], "title": "2.1. Specifying the Step Size: the block-step-size property" }, { "refs": [{ "id": "ref-for-propdef-block-step-size\u2462" }, { "id": "ref-for-propdef-block-step-size\u2463" }, { "id": "ref-for-propdef-block-step-size\u2464" }, { "id": "ref-for-propdef-block-step-size\u2465" }], "title": "2.2. Specifying the Spacing Type: the block-step-insert property" }, { "refs": [{ "id": "ref-for-propdef-block-step-size\u2466" }, { "id": "ref-for-propdef-block-step-size\u2467" }, { "id": "ref-for-propdef-block-step-size\u2468" }, { "id": "ref-for-propdef-block-step-size\u2460\u24ea" }, { "id": "ref-for-propdef-block-step-size\u2460\u2460" }], "title": "2.3. Specifying Alignment: the block-step-align property" }, { "refs": [{ "id": "ref-for-propdef-block-step-size\u2460\u2461" }, { "id": "ref-for-propdef-block-step-size\u2460\u2462" }, { "id": "ref-for-propdef-block-step-size\u2460\u2463" }, { "id": "ref-for-propdef-block-step-size\u2460\u2464" }], "title": "2.4. Rounding Method: the block-step-round property" }, { "refs": [{ "id": "ref-for-propdef-block-step-size\u2460\u2465" }, { "id": "ref-for-propdef-block-step-size\u2460\u2466" }], "title": "2.5. Block Step Adjustment Shorthand: the block-step shorthand" }], "url": "#propdef-block-step-size" },
                "propdef-line-height-step": { "dfnID": "propdef-line-height-step", "dfnText": "line-height-step", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-propdef-line-height-step" }, { "id": "ref-for-propdef-line-height-step\u2460" }], "title": "1.1. East Asian Casual Vertical Rhythms" }, { "refs": [{ "id": "ref-for-propdef-line-height-step\u2461" }], "title": "3. Adjusting Line Box Heights: the line-height-step property" }, { "refs": [{ "id": "ref-for-propdef-line-height-step\u2462" }], "title": "7. Changes" }], "url": "#propdef-line-height-step" },
                "step-unit": { "dfnID": "step-unit", "dfnText": "step unit", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-step-unit" }, { "id": "ref-for-step-unit\u2460" }], "title": "2.1. Specifying the Step Size: the block-step-size property" }, { "refs": [{ "id": "ref-for-step-unit\u2461" }, { "id": "ref-for-step-unit\u2462" }, { "id": "ref-for-step-unit\u2463" }, { "id": "ref-for-step-unit\u2464" }, { "id": "ref-for-step-unit\u2465" }, { "id": "ref-for-step-unit\u2466" }, { "id": "ref-for-step-unit\u2467" }, { "id": "ref-for-step-unit\u2468" }, { "id": "ref-for-step-unit\u2460\u24ea" }, { "id": "ref-for-step-unit\u2460\u2460" }, { "id": "ref-for-step-unit\u2460\u2461" }, { "id": "ref-for-step-unit\u2460\u2462" }], "title": "3. Adjusting Line Box Heights: the line-height-step property" }], "url": "#step-unit" },
                "valdef-block-step-align-auto": { "dfnID": "valdef-block-step-align-auto", "dfnText": "auto", "external": false, "refSections": [], "url": "#valdef-block-step-align-auto" },
                "valdef-block-step-align-center": { "dfnID": "valdef-block-step-align-center", "dfnText": "center", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-valdef-block-step-align-center" }, { "id": "ref-for-valdef-block-step-align-center\u2460" }], "title": "2.3. Specifying Alignment: the block-step-align property" }], "url": "#valdef-block-step-align-center" },
                "valdef-block-step-align-down": { "dfnID": "valdef-block-step-align-down", "dfnText": "down", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-valdef-block-step-align-down" }], "title": "2.4. Rounding Method: the block-step-round property" }], "url": "#valdef-block-step-align-down" },
                "valdef-block-step-align-end": { "dfnID": "valdef-block-step-align-end", "dfnText": "end", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-valdef-block-step-align-end" }], "title": "2.3. Specifying Alignment: the block-step-align property" }], "url": "#valdef-block-step-align-end" },
                "valdef-block-step-align-nearest": { "dfnID": "valdef-block-step-align-nearest", "dfnText": "nearest", "external": false, "refSections": [], "url": "#valdef-block-step-align-nearest" },
                "valdef-block-step-align-start": { "dfnID": "valdef-block-step-align-start", "dfnText": "start", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-valdef-block-step-align-start" }], "title": "2.3. Specifying Alignment: the block-step-align property" }], "url": "#valdef-block-step-align-start" },
                "valdef-block-step-align-up": { "dfnID": "valdef-block-step-align-up", "dfnText": "up", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-valdef-block-step-align-up" }], "title": "2.4. Rounding Method: the block-step-round property" }], "url": "#valdef-block-step-align-up" },
                "valdef-block-step-insert-content-box": { "dfnID": "valdef-block-step-insert-content-box", "dfnText": "content-box", "external": false, "refSections": [], "url": "#valdef-block-step-insert-content-box" },
                "valdef-block-step-insert-margin-box": { "dfnID": "valdef-block-step-insert-margin-box", "dfnText": "margin-box", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-valdef-block-step-insert-margin-box" }, { "id": "ref-for-valdef-block-step-insert-margin-box\u2460" }], "title": "2.3. Specifying Alignment: the block-step-align property" }, { "refs": [{ "id": "ref-for-valdef-block-step-insert-margin-box\u2461" }], "title": "7. Changes" }], "url": "#valdef-block-step-insert-margin-box" },
                "valdef-block-step-insert-padding-box": { "dfnID": "valdef-block-step-insert-padding-box", "dfnText": "padding-box", "external": false, "refSections": [], "url": "#valdef-block-step-insert-padding-box" },
            };

            document.addEventListener("DOMContentLoaded", () => {
                genAllDfnPanels();

                document.body.addEventListener("click", (e) => {
                    // If not handled already, just hide all dfn panels.
                    hideAllDfnPanels();
                });
            });

            window.addEventListener("resize", () => {
                // Pin any visible dfn panel
                queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(el => positionDfnPanel(el));
            });

            function genAllDfnPanels() {
                for (const panelData of Object.values(dfnPanelData)) {
                    const dfnID = panelData.dfnID;
                    const dfn = document.getElementById(dfnID);
                    if (!dfn) {
                        console.log(`Can't find dfn#${dfnID}.`, panelData);
                        continue;
                    }
                    dfn.panelData = panelData;
                    insertDfnPopupAction(dfn);
                }
            }

            function genDfnPanel(dfn, { dfnID, url, dfnText, refSections, external }) {
                const dfnPanel = mk.aside({
                    class: "dfn-panel on",
                    id: `infopanel-for-${dfnID}`,
                    "data-for": dfnID,
                    "aria-labelled-by": `infopaneltitle-for-${dfnID}`,
                },
                    mk.span({ id: `infopaneltitle-for-${dfnID}`, style: "display:none" },
                        `Info about the '${dfnText}' ${external ? "external" : ""} reference.`),
                    mk.a({ href: url, class: "dfn-link" }, url),
                    refSections.length == 0 ? [] :
                        mk.b({}, "Referenced in:"),
                    mk.ul({},
                        ...refSections.map(section =>
                            mk.li({},
                                ...section.refs.map((ref, refI) =>
                                    [
                                        mk.a({ href: `#${ref.id}` },
                                            (refI == 0) ? section.title : `(${refI + 1})`
                                        ),
                                        " ",
                                    ]
                                ),
                            ),
                        ),
                    ),
                    genLinkingSyntaxes(dfn),
                );

                dfnPanel.addEventListener('click', (event) => {
                    if (event.target.nodeName == 'A') {
                        scrollToTargetAndHighlight(event);
                        pinDfnPanel(dfnPanel);
                    }
                    event.stopPropagation();
                    refocusOnTarget(event);
                });
                dfnPanel.addEventListener('keydown', (event) => {
                    if (event.keyCode == 27) { // Escape key
                        hideDfnPanel({ dfnPanel });
                        event.stopPropagation();
                        event.preventDefault();
                    }
                });

                dfnPanel.dfn = dfn;
                dfn.dfnPanel = dfnPanel;
                return dfnPanel;
            }



            function hideAllDfnPanels() {
                // Delete the currently-active dfn panel.
                queryAll(".dfn-panel").forEach(dfnPanel => hideDfnPanel({ dfnPanel }));
            }

            function showDfnPanel(dfn) {
                hideAllDfnPanels(); // Only display one at a time.

                dfn.setAttribute("aria-expanded", "true");

                const dfnPanel = genDfnPanel(dfn, dfn.panelData);

                // Give the dfn a unique tabindex, and then
                // give all the tabbable panel bits successive indexes.
                let tabIndex = 100;
                dfn.tabIndex = tabIndex++;
                const tabbable = dfnPanel.querySelectorAll(":is(a, button)");
                for (const el of tabbable) {
                    el.tabIndex = tabIndex++;
                }

                append(document.body, dfnPanel);
                positionDfnPanel(dfnPanel);
            }

            function positionDfnPanel(dfnPanel) {
                const dfn = dfnPanel.dfn;
                const dfnPos = getBounds(dfn);
                dfnPanel.style.top = dfnPos.bottom + "px";
                dfnPanel.style.left = dfnPos.left + "px";

                const panelPos = dfnPanel.getBoundingClientRect();
                const panelMargin = 8;
                const maxRight = document.body.parentNode.clientWidth - panelMargin;
                if (panelPos.right > maxRight) {
                    const overflowAmount = panelPos.right - maxRight;
                    const newLeft = Math.max(panelMargin, dfnPos.left - overflowAmount);
                    dfnPanel.style.left = newLeft + "px";
                }
            }

            function pinDfnPanel(dfnPanel) {
                // Switch it to "activated" state, which pins it.
                dfnPanel.classList.add("activated");
                dfnPanel.style.position = "fixed";
                dfnPanel.style.left = null;
                dfnPanel.style.top = null;
            }

            function hideDfnPanel({ dfn, dfnPanel }) {
                if (!dfnPanel) dfnPanel = dfn.dfnPanel;
                if (!dfn) dfn = dfnPanel.dfn;
                dfn.dfnPanel = undefined;
                dfnPanel.dfn = undefined;
                dfn.setAttribute("aria-expanded", "false");
                dfn.tabIndex = undefined;
                dfnPanel.remove()
            }

            function toggleDfnPanel(dfn) {
                if (dfn.dfnPanel) {
                    hideDfnPanel(dfn);
                } else {
                    showDfnPanel(dfn);
                }
            }

            function insertDfnPopupAction(dfn) {
                dfn.setAttribute('role', 'button');
                dfn.setAttribute('aria-expanded', 'false')
                dfn.tabIndex = 0;
                dfn.classList.add('has-dfn-panel');
                dfn.addEventListener('click', (event) => {
                    toggleDfnPanel(dfn);
                    event.stopPropagation();
                });
                dfn.addEventListener('keypress', (event) => {
                    const kc = event.keyCode;
                    // 32->Space, 13->Enter
                    if (kc == 32 || kc == 13) {
                        toggleDfnPanel(dfn);
                        event.stopPropagation();
                        event.preventDefault();
                    }
                });
            }

            function refocusOnTarget(event) {
                const target = event.target;
                setTimeout(() => {
                    // Refocus on the event.target element.
                    // This is needed after browser scrolls to the destination.
                    target.focus();
                });
            }

            // TODO: shared util
            // Returns the root-level absolute position {left and top} of element.
            function getBounds(el, relativeTo = document.body) {
                const relativeRect = relativeTo.getBoundingClientRect();
                const elRect = el.getBoundingClientRect();
                const top = elRect.top - relativeRect.top;
                const left = elRect.left - relativeRect.left;
                return {
                    top,
                    left,
                    bottom: top + elRect.height,
                    right: left + elRect.width,
                }
            }

            function scrollToTargetAndHighlight(event) {
                let hash = event.target.hash;
                if (hash) {
                    hash = decodeURIComponent(hash.substring(1));
                    const dest = document.getElementById(hash);
                    if (dest) {
                        dest.classList.add('highlighted');
                        setTimeout(() => dest.classList.remove('highlighted'), 1000);
                    }
                }
            }

            // Functions, divided by link type, that wrap an autolink's
            // contents with the appropriate outer syntax.
            // Alternately, a string naming another type they format
            // the same as.
            function needsFor(type) {
                switch (type) {
                    case "descriptor":
                    case "value":
                    case "element-attr":
                    case "attr-value":
                    case "element-state":
                    case "method":
                    case "constructor":
                    case "argument":
                    case "attribute":
                    case "const":
                    case "dict-member":
                    case "event":
                    case "enum-value":
                    case "stringifier":
                    case "serializer":
                    case "iterator":
                    case "maplike":
                    case "setlike":
                    case "state":
                    case "mode":
                    case "context":
                    case "facet": return true;

                    default: return false;
                }
            }
            function refusesFor(type) {
                switch (type) {
                    case "property":
                    case "element":
                    case "interface":
                    case "namespace":
                    case "callback":
                    case "dictionary":
                    case "enum":
                    case "exception":
                    case "typedef":
                    case "http-header":
                    case "permission": return true;

                    default: return false;
                }
            }
            function linkFormatterFromType(type) {
                switch (type) {
                    case 'scheme':
                    case 'permission':
                    case 'dfn': return (text) => `[=${text}=]`;

                    case 'abstract-op': return (text) => `[\$${text}\$]`;

                    case 'function':
                    case 'at-rule':
                    case 'selector':
                    case 'value': return (text) => `''${text}''`;

                    case 'http-header': return (text) => `[:${text}:]`;

                    case 'interface':
                    case 'constructor':
                    case 'method':
                    case 'argument':
                    case 'attribute':
                    case 'callback':
                    case 'dictionary':
                    case 'dict-member':
                    case 'enum':
                    case 'enum-value':
                    case 'exception':
                    case 'const':
                    case 'typedef':
                    case 'stringifier':
                    case 'serializer':
                    case 'iterator':
                    case 'maplike':
                    case 'setlike':
                    case 'extended-attribute':
                    case 'event':
                    case 'idl': return (text) => `{{${text}}}`;

                    case 'element-state':
                    case 'element-attr':
                    case 'attr-value':
                    case 'element': return (element) => `<{${element}}>`;

                    case 'grammar': return (text) => `${text} (within a <pre class=prod>)`;

                    case 'type': return (text) => `<<${text}>>`;

                    case 'descriptor':
                    case 'property': return (text) => `'${text}'`;

                    default: return;
                };
            };

            function genLinkingSyntaxes(dfn) {
                if (dfn.tagName != "DFN") return;

                const type = dfn.getAttribute('data-dfn-type');
                if (!type) {
                    console.log(`<dfn> doesn't have a data-dfn-type:`, dfn);
                    return [];
                }

                // Return a function that wraps link text based on the type
                const linkFormatter = linkFormatterFromType(type);
                if (!linkFormatter) {
                    console.log(`<dfn> has an unknown data-dfn-type:`, dfn);
                    return [];
                }

                let ltAlts;
                if (dfn.hasAttribute('data-lt')) {
                    ltAlts = dfn.getAttribute('data-lt')
                        .split("|")
                        .map(x => x.trim());
                } else {
                    ltAlts = [dfn.textContent.trim()];
                }
                if (type == "type") {
                    // lt of "<foo>", but "foo" is the interior;
                    // <<foo/bar>> is how you write it with a for,
                    // not <foo/<bar>> or whatever.
                    for (var i = 0; i < ltAlts.length; i++) {
                        const lt = ltAlts[i];
                        const match = /<(.*)>/.exec(lt);
                        if (match) { ltAlts[i] = match[1]; }
                    }
                }

                let forAlts;
                if (dfn.hasAttribute('data-dfn-for')) {
                    forAlts = dfn.getAttribute('data-dfn-for')
                        .split(",")
                        .map(x => x.trim());
                } else {
                    forAlts = [''];
                }

                let linkingSyntaxes = [];
                if (!needsFor(type)) {
                    for (const lt of ltAlts) {
                        linkingSyntaxes.push(linkFormatter(lt));
                    }
                }
                if (!refusesFor(type)) {
                    for (const f of forAlts) {
                        linkingSyntaxes.push(linkFormatter(`${f}/${ltAlts[0]}`))
                    }
                }
                return [
                    mk.b({}, 'Possible linking syntaxes:'),
                    mk.ul({},
                        ...linkingSyntaxes.map(link => {
                            const copyLink = async () =>
                                await navigator.clipboard.writeText(link);
                            return mk.li({},
                                mk.div({ class: 'link-item' },
                                    mk.button({
                                        class: 'copy-icon', title: 'Copy',
                                        type: 'button',
                                        _onclick: copyLink,
                                        tabindex: 0,
                                    }, mk.span({ class: 'icon' })),
                                    mk.span({}, link)
                                )
                            );
                        })
                    )
                ];
            }
        }
    </script>
    <script>/* Boilerplate: script-link-titles */
        "use strict";
        {
            let linkTitleData = {
                "https://www.w3.org/TR/css-values-4/#length-value": "Expands to: advance measure | cap | ch | cm | dvb | dvh | dvi | dvmax | dvmin | dvw | em | ex | ic | in | lh | lvb | lvh | lvi | lvmax | lvmin | lvw | mm | pc | pt | px | rcap | rch | rem | rex | ric | rlh | svb | svh | svi | svmax | svmin | svw | vb | vh | vi | vmax | vmin | vw",
            };

            function setTypeTitles() {
                for (let el of document.querySelectorAll("a[href]")) {
                    if (el.href in linkTitleData && !el.hasAttribute("title")) {
                        el.setAttribute("title", linkTitleData[el.href]);
                    }
                }
            }

            document.addEventListener("DOMContentLoaded", setTypeTitles);
        }
    </script>
    <script>/* Boilerplate: script-ref-hints */
        "use strict";
        {
            let refsData = {
                "#propdef-block-step": { "displayText": "block-step", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-rhythm", "spec": "css-rhythm-1", "status": "local", "text": "block-step", "type": "property", "url": "#propdef-block-step" },
                "#propdef-block-step-align": { "displayText": "block-step-align", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-rhythm", "spec": "css-rhythm-1", "status": "local", "text": "block-step-align", "type": "property", "url": "#propdef-block-step-align" },
                "#propdef-block-step-insert": { "displayText": "block-step-insert", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-rhythm", "spec": "css-rhythm-1", "status": "local", "text": "block-step-insert", "type": "property", "url": "#propdef-block-step-insert" },
                "#propdef-block-step-round": { "displayText": "block-step-round", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-rhythm", "spec": "css-rhythm-1", "status": "local", "text": "block-step-round", "type": "property", "url": "#propdef-block-step-round" },
                "#propdef-block-step-size": { "displayText": "block-step-size", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-rhythm", "spec": "css-rhythm-1", "status": "local", "text": "block-step-size", "type": "property", "url": "#propdef-block-step-size" },
                "#propdef-line-height-step": { "displayText": "line-height-step", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-rhythm", "spec": "css-rhythm-1", "status": "local", "text": "line-height-step", "type": "property", "url": "#propdef-line-height-step" },
                "#step-unit": { "displayText": "step unit", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-rhythm", "spec": "css-rhythm-1", "status": "local", "text": "step unit", "type": "dfn", "url": "#step-unit" },
                "#valdef-block-step-align-center": { "displayText": "center", "export": true, "for_": ["block-step-align"], "level": "1", "normative": true, "shortname": "css-rhythm", "spec": "css-rhythm-1", "status": "local", "text": "center", "type": "value", "url": "#valdef-block-step-align-center" },
                "#valdef-block-step-align-down": { "displayText": "down", "export": true, "for_": ["block-step-align"], "level": "1", "normative": true, "shortname": "css-rhythm", "spec": "css-rhythm-1", "status": "local", "text": "down", "type": "value", "url": "#valdef-block-step-align-down" },
                "#valdef-block-step-align-end": { "displayText": "end", "export": true, "for_": ["block-step-align"], "level": "1", "normative": true, "shortname": "css-rhythm", "spec": "css-rhythm-1", "status": "local", "text": "end", "type": "value", "url": "#valdef-block-step-align-end" },
                "#valdef-block-step-align-start": { "displayText": "start", "export": true, "for_": ["block-step-align"], "level": "1", "normative": true, "shortname": "css-rhythm", "spec": "css-rhythm-1", "status": "local", "text": "start", "type": "value", "url": "#valdef-block-step-align-start" },
                "#valdef-block-step-align-up": { "displayText": "up", "export": true, "for_": ["block-step-align"], "level": "1", "normative": true, "shortname": "css-rhythm", "spec": "css-rhythm-1", "status": "local", "text": "up", "type": "value", "url": "#valdef-block-step-align-up" },
                "#valdef-block-step-insert-margin-box": { "displayText": "margin-box", "export": true, "for_": ["block-step-insert"], "level": "1", "normative": true, "shortname": "css-rhythm", "spec": "css-rhythm-1", "status": "local", "text": "margin-box", "type": "value", "url": "#valdef-block-step-insert-margin-box" },
                "https://www.w3.org/TR/CSS2/visudet.html#propdef-line-height": { "displayText": "line-height", "export": true, "for_": [], "level": "2", "normative": true, "shortname": "css", "spec": "css2", "status": "snapshot", "text": "line-height", "type": "property", "url": "https://www.w3.org/TR/CSS2/visudet.html#propdef-line-height" },
                "https://www.w3.org/TR/CSS2/visudet.html#propdef-max-height": { "displayText": "max-height", "export": true, "for_": [], "level": "2", "normative": true, "shortname": "css", "spec": "css2", "status": "snapshot", "text": "max-height", "type": "property", "url": "https://www.w3.org/TR/CSS2/visudet.html#propdef-max-height" },
                "https://www.w3.org/TR/css-align-3/#propdef-align-content": { "displayText": "align-content", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-align", "spec": "css-align-3", "status": "snapshot", "text": "align-content", "type": "property", "url": "https://www.w3.org/TR/css-align-3/#propdef-align-content" },
                "https://www.w3.org/TR/css-align-3/#propdef-align-self": { "displayText": "align-self", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-align", "spec": "css-align-3", "status": "snapshot", "text": "align-self", "type": "property", "url": "https://www.w3.org/TR/css-align-3/#propdef-align-self" },
                "https://www.w3.org/TR/css-box-4/#content-area": { "displayText": "content area", "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-box", "spec": "css-box-4", "status": "snapshot", "text": "content area", "type": "dfn", "url": "https://www.w3.org/TR/css-box-4/#content-area" },
                "https://www.w3.org/TR/css-box-4/#propdef-margin": { "displayText": "margin", "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-box", "spec": "css-box-4", "status": "snapshot", "text": "margin", "type": "property", "url": "https://www.w3.org/TR/css-box-4/#propdef-margin" },
                "https://www.w3.org/TR/css-box-4/#propdef-padding": { "displayText": "padding", "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-box", "spec": "css-box-4", "status": "snapshot", "text": "padding", "type": "property", "url": "https://www.w3.org/TR/css-box-4/#propdef-padding" },
                "https://www.w3.org/TR/css-break-3/#fragment": { "displayText": "fragment", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-break", "spec": "css-break-3", "status": "snapshot", "text": "fragment", "type": "dfn", "url": "https://www.w3.org/TR/css-break-3/#fragment" },
                "https://www.w3.org/TR/css-cascade-5/#shorthand-property": { "displayText": "shorthand property", "export": true, "for_": [], "level": "5", "normative": true, "shortname": "css-cascade", "spec": "css-cascade-5", "status": "snapshot", "text": "shorthand property", "type": "dfn", "url": "https://www.w3.org/TR/css-cascade-5/#shorthand-property" },
                "https://www.w3.org/TR/css-display-4/#establish-an-independent-formatting-context": { "displayText": "establish an independent formatting context", "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-display", "spec": "css-display-4", "status": "snapshot", "text": "establish an independent formatting context", "type": "dfn", "url": "https://www.w3.org/TR/css-display-4/#establish-an-independent-formatting-context" },
                "https://www.w3.org/TR/css-inline-3/#propdef-text-box-edge": { "displayText": "text-box-edge", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-inline", "spec": "css-inline-3", "status": "snapshot", "text": "text-box-edge", "type": "property", "url": "https://www.w3.org/TR/css-inline-3/#propdef-text-box-edge" },
                "https://www.w3.org/TR/css-inline-3/#propdef-text-box-trim": { "displayText": "text-box-trim", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-inline", "spec": "css-inline-3", "status": "snapshot", "text": "text-box-trim", "type": "property", "url": "https://www.w3.org/TR/css-inline-3/#propdef-text-box-trim" },
                "https://www.w3.org/TR/css-inline-3/#propdef-vertical-align": { "displayText": "vertical-align", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-inline", "spec": "css-inline-3", "status": "snapshot", "text": "vertical-align", "type": "property", "url": "https://www.w3.org/TR/css-inline-3/#propdef-vertical-align" },
                "https://www.w3.org/TR/css-line-grid-1/#propdef-line-grid": { "displayText": "line-grid", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-line-grid", "spec": "css-line-grid-1", "status": "snapshot", "text": "line-grid", "type": "property", "url": "https://www.w3.org/TR/css-line-grid-1/#propdef-line-grid" },
                "https://www.w3.org/TR/css-sizing-3/#propdef-min-height": { "displayText": "min-height", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-sizing", "spec": "css-sizing-3", "status": "snapshot", "text": "min-height", "type": "property", "url": "https://www.w3.org/TR/css-sizing-3/#propdef-min-height" },
                "https://www.w3.org/TR/css-values-4/#comb-any": { "displayText": "||", "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-values", "spec": "css-values-4", "status": "snapshot", "text": "||", "type": "grammar", "url": "https://www.w3.org/TR/css-values-4/#comb-any" },
                "https://www.w3.org/TR/css-values-4/#comb-one": { "displayText": "|", "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-values", "spec": "css-values-4", "status": "snapshot", "text": "|", "type": "grammar", "url": "https://www.w3.org/TR/css-values-4/#comb-one" },
                "https://www.w3.org/TR/css-values-4/#css-wide-keywords": { "displayText": "CSS-wide keywords", "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-values", "spec": "css-values-4", "status": "snapshot", "text": "css-wide keywords", "type": "dfn", "url": "https://www.w3.org/TR/css-values-4/#css-wide-keywords" },
                "https://www.w3.org/TR/css-values-4/#funcdef-calc": { "displayText": "calc()", "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-values", "spec": "css-values-4", "status": "snapshot", "text": "calc()", "type": "function", "url": "https://www.w3.org/TR/css-values-4/#funcdef-calc" },
                "https://www.w3.org/TR/css-values-4/#length-value": { "displayText": "<length>", "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-values", "spec": "css-values-4", "status": "snapshot", "text": "<length>", "type": "type", "url": "https://www.w3.org/TR/css-values-4/#length-value" },
                "https://www.w3.org/TR/css-variables-1/#funcdef-var": { "displayText": "var()", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "css-variables", "spec": "css-variables-1", "status": "snapshot", "text": "var()", "type": "function", "url": "https://www.w3.org/TR/css-variables-1/#funcdef-var" },
                "https://www.w3.org/TR/css-writing-modes-4/#block-size": { "displayText": "block size", "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-writing-modes", "spec": "css-writing-modes-4", "status": "snapshot", "text": "block size", "type": "dfn", "url": "https://www.w3.org/TR/css-writing-modes-4/#block-size" },
                "https://www.w3.org/TR/css-writing-modes-4/#end": { "displayText": "end", "export": true, "for_": ["CSS"], "level": "4", "normative": true, "shortname": "css-writing-modes", "spec": "css-writing-modes-4", "status": "snapshot", "text": "end", "type": "dfn", "url": "https://www.w3.org/TR/css-writing-modes-4/#end" },
                "https://www.w3.org/TR/css-writing-modes-4/#over": { "displayText": "over", "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-writing-modes", "spec": "css-writing-modes-4", "status": "snapshot", "text": "over", "type": "dfn", "url": "https://www.w3.org/TR/css-writing-modes-4/#over" },
                "https://www.w3.org/TR/css-writing-modes-4/#start": { "displayText": "start", "export": true, "for_": ["CSS"], "level": "4", "normative": true, "shortname": "css-writing-modes", "spec": "css-writing-modes-4", "status": "snapshot", "text": "start", "type": "dfn", "url": "https://www.w3.org/TR/css-writing-modes-4/#start" },
                "https://www.w3.org/TR/css-writing-modes-4/#under": { "displayText": "under", "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-writing-modes", "spec": "css-writing-modes-4", "status": "snapshot", "text": "under", "type": "dfn", "url": "https://www.w3.org/TR/css-writing-modes-4/#under" },
            };

            function mkRefHint(link, ref) {
                const linkText = link.textContent;
                let dfnTextElements = '';
                if (ref.displayText.toLowerCase() != linkText.toLowerCase()) {
                    // Give the original term if it's being displayed in a different way.
                    // But allow casing differences, they're insignificant.
                    dfnTextElements =
                        mk.li({},
                            mk.b({}, "Term: "),
                            mk.span({}, ref.displayText)
                        );
                }
                const forList = ref.for_;
                let forListElements;
                if (forList.length == 0) {
                    forListElements = [];
                } else if (forList.length == 1) {
                    forListElements = mk.li({},
                        mk.b({}, "For: "),
                        mk.span({}, forList[0]),
                    );
                } else {
                    forListElements = mk.li({},
                        mk.b({}, "For: "),
                        mk.ul({},
                            ...forList.map(forItem =>
                                mk.li({},
                                    mk.span({}, forItem)
                                ),
                            ),
                        ),
                    );
                }
                const url = ref.url;
                const safeUrl = encodeURIComponent(url);
                const hintPanel = mk.aside({
                    class: "ref-hint",
                    id: `ref-hint-for-${safeUrl}`,
                    "data-for": url,
                    "aria-labelled-by": `ref-hint-for-${safeUrl}`,
                },
                    mk.ul({},
                        dfnTextElements,
                        mk.li({},
                            mk.b({}, "URL: "),
                            mk.a({ href: url, class: "ref" }, url),
                        ),
                        mk.li({},
                            mk.b({}, "Type: "),
                            mk.span({}, `${ref.type}`),
                        ),
                        mk.li({},
                            mk.b({}, "Spec: "),
                            mk.span({}, `${ref.spec ? ref.spec : ''}`),
                        ),
                        forListElements
                    ),
                );
                hintPanel.forLink = link;
                setupRefHintEventListeners(link, hintPanel);
                return hintPanel;
            }

            function hideAllRefHints() {
                queryAll(".ref-hint").forEach(el => hideRefHint(el));
            }

            function hideRefHint(refHint) {
                const link = refHint.forLink;
                link.setAttribute("aria-expanded", "false");
                if (refHint.teardownEventListeners) {
                    refHint.teardownEventListeners();
                }
                refHint.remove();
            }

            function showRefHint(link) {
                if (link.classList.contains("dfn-link")) return;
                const url = link.getAttribute("href");
                const refHintKey = link.getAttribute("data-refhint-key");
                let key = url;
                if (refHintKey) {
                    key = refHintKey + "_" + url;
                }
                const ref = refsData[key];
                if (!ref) return;

                hideAllRefHints(); // Only display one at this time.

                const refHint = mkRefHint(link, ref);
                append(document.body, refHint);
                link.setAttribute("aria-expanded", "true");
                positionRefHint(refHint);
            }

            function setupRefHintEventListeners(link, refHint) {
                if (refHint.teardownEventListeners) return;
                // Add event handlers to hide the refHint after the user moves away
                // from both the link and refHint, if not hovering either within one second.
                let timeout = null;
                const startHidingRefHint = (event) => {
                    if (timeout) {
                        clearTimeout(timeout);
                    }
                    timeout = setTimeout(() => {
                        hideRefHint(refHint);
                    }, 1000);
                }
                const resetHidingRefHint = (event) => {
                    if (timeout) clearTimeout(timeout);
                    timeout = null;
                };
                link.addEventListener("mouseleave", startHidingRefHint);
                link.addEventListener("mouseenter", resetHidingRefHint);
                link.addEventListener("blur", startHidingRefHint);
                link.addEventListener("focus", resetHidingRefHint);
                refHint.addEventListener("mouseleave", startHidingRefHint);
                refHint.addEventListener("mouseenter", resetHidingRefHint);
                refHint.addEventListener("blur", startHidingRefHint);
                refHint.addEventListener("focus", resetHidingRefHint);

                refHint.teardownEventListeners = () => {
                    // remove event listeners
                    resetHidingRefHint();
                    link.removeEventListener("mouseleave", startHidingRefHint);
                    link.removeEventListener("mouseenter", resetHidingRefHint);
                    link.removeEventListener("blur", startHidingRefHint);
                    link.removeEventListener("focus", resetHidingRefHint);
                    refHint.removeEventListener("mouseleave", startHidingRefHint);
                    refHint.removeEventListener("mouseenter", resetHidingRefHint);
                    refHint.removeEventListener("blur", startHidingRefHint);
                    refHint.removeEventListener("focus", resetHidingRefHint);
                };
            }

            function positionRefHint(refHint) {
                const link = refHint.forLink;
                const linkPos = getBounds(link);
                refHint.style.top = linkPos.bottom + "px";
                refHint.style.left = linkPos.left + "px";

                const panelPos = refHint.getBoundingClientRect();
                const panelMargin = 8;
                const maxRight = document.body.parentNode.clientWidth - panelMargin;
                if (panelPos.right > maxRight) {
                    const overflowAmount = panelPos.right - maxRight;
                    const newLeft = Math.max(panelMargin, linkPos.left - overflowAmount);
                    refHint.style.left = newLeft + "px";
                }
            }

            // TODO: shared util
            // Returns the root-level absolute position {left and top} of element.
            function getBounds(el, relativeTo = document.body) {
                const relativeRect = relativeTo.getBoundingClientRect();
                const elRect = el.getBoundingClientRect();
                const top = elRect.top - relativeRect.top;
                const left = elRect.left - relativeRect.left;
                return {
                    top,
                    left,
                    bottom: top + elRect.height,
                    right: left + elRect.width,
                }
            }

            function showRefHintListener(e) {
                // If the target isn't in a link (or is a link),
                // just ignore it.
                let link = e.target.closest("a");
                if (!link) return;

                // If the target is in a ref-hint panel
                // (aka a link in the already-open one),
                // also just ignore it.
                if (link.closest(".ref-hint")) return;

                // Otherwise, show the panel for the link.
                showRefHint(link);
            }

            function hideAllHintsListener(e) {
                // If the click is inside a ref-hint panel, ignore it.
                if (e.target.closest(".ref-hint")) return;
                // Otherwise, close all the current panels.
                hideAllRefHints();
            }

            document.addEventListener("DOMContentLoaded", () => {
                document.body.addEventListener("mousedown", showRefHintListener);
                document.body.addEventListener("focus", showRefHintListener);

                document.body.addEventListener("click", hideAllHintsListener);
            });

            window.addEventListener("resize", () => {
                // Hide any open ref hint.
                hideAllRefHints();
            });
        }
    </script>
    <script>/* Boilerplate: script-wpt */
        "use strict";
        {
            let wptData = {
                "paths": ["/css/css-rhythm/"],
            };

            document.addEventListener("DOMContentLoaded", async () => {
                if (wptData.paths.length == 0) return;

                const runsUrl = "https://wpt.fyi/api/runs?label=master&label=stable&max-count=1&product=chrome&product=firefox&product=safari&product=edge";
                const runs = await (await fetch(runsUrl)).json();

                let testResults = [];
                for (const pathPrefix of wptData.paths) {
                    const pathResults = await (await fetch("https://wpt.fyi/api/search", {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json",
                        },
                        body: JSON.stringify({
                            "run_ids": runs.map(x => x.id),
                            "query": { "path": pathPrefix },
                        })
                    })).json();
                    testResults = testResults.concat(pathResults.results);
                }

                const browsers = runs.map(x => ({ name: x.browser_name, version: x.browser_version, passes: 0, total: 0 }));
                const resultsFromPath = new Map(testResults.map(result => {
                    const testPath = result.test;
                    const passes = result.legacy_status.map(x => [x.passes, x.total]);
                    return [testPath, passes];
                }));
                const seenTests = new Set();
                document.querySelectorAll(".wpt-name").forEach(nameEl => {
                    const passData = resultsFromPath.get("/" + nameEl.getAttribute("title"));
                    if (!passData) {
                        console.log("Couldn't find test in results:", nameEl);
                        return
                    }
                    const numTests = passData[0][1];
                    if (numTests > 1) {
                        nameEl.insertAdjacentElement("beforeend",
                            mk.small({}, ` (${numTests} tests)`));
                    }
                    if (passData == undefined) return;
                    const resultsEl = mk.span({ "class": "wpt-results" },
                        ...passData.map((p, i) => mk.span(
                            {
                                "title": `${browsers[i].name} ${p[0]}/${p[1]}`,
                                "class": "wpt-result",
                                "style": `background: conic-gradient(forestgreen ${p[0] / p[1] * 360}deg, darkred 0deg);`,
                            })),
                    );
                    nameEl.insertAdjacentElement("afterend", resultsEl);

                    // Only update the summary pass/total count if we haven't seen this
                    // test before, to support authors listing the same test multiple times
                    // in a spec.
                    if (!seenTests.has(nameEl.getAttribute("title"))) {
                        seenTests.add(nameEl.getAttribute("title"));
                        passData.forEach((p, i) => {
                            browsers[i].passes += p[0];
                            browsers[i].total += p[1];
                        });
                    }
                });
                const overview = document.querySelector(".wpt-overview");
                if (overview) {
                    overview.appendChild(mk.ul({}, ...browsers.map(formatWptResult)));
                    document.head.appendChild(mk.style({},
                        `.wpt-overview ul { display: flex; flex-flow: row wrap; gap: .2em; justify-content: start; list-style: none; padding: 0; margin: 0;}
             .wpt-overview li { padding: .25em 1em; color: black; text-align: center; }
             .wpt-overview img { height: 1.5em; height: max(1.5em, 32px); background: transparent; }
             .wpt-overview .browser { font-weight: bold; }
             .wpt-overview .passes-none { background: #e57373; }
             .wpt-overview .passes-hardly { background: #ffb74d; }
             .wpt-overview .passes-a-few { background: #ffd54f; }
             .wpt-overview .passes-half { background: #fff176; }
             .wpt-overview .passes-lots { background: #dce775; }
             .wpt-overview .passes-most { background: #aed581; }
             .wpt-overview .passes-all { background: #81c784; }`));
                }
            });

            function formatWptResult({ name, version, passes, total }) {
                const passRate = passes / total;
                let passClass = "";
                if (passRate == 0) passClass = "passes-none";
                else if (passRate < .2) passClass = "passes-hardly";
                else if (passRate < .4) passClass = "passes-a-few";
                else if (passRate < .6) passClass = "passes-half";
                else if (passRate < .8) passClass = "passes-lots";
                else if (passRate < 1) passClass = "passes-most";
                else passClass = "passes-all";

                name = name[0].toUpperCase() + name.slice(1);
                const shortVersion = /^\d+/.exec(version);
                const icon = []

                if (name == "Chrome") icon.push(mk.img({ alt: "", src: "https://wpt.fyi/static/chrome_64x64.png" }));
                if (name == "Edge") icon.push(mk.img({ alt: "", src: "https://wpt.fyi/static/edge_64x64.png" }));
                if (name == "Safari") icon.push(mk.img({ alt: "", src: "https://wpt.fyi/static/safari_64x64.png" }));
                if (name == "Firefox") icon.push(mk.img({ alt: "", src: "https://wpt.fyi/static/firefox_64x64.png" }));

                return mk.li({ "class": passClass },
                    mk.nobr({ 'class': 'browser' }, ...icon, ` ${name} ${shortVersion}`),
                    mk.br(),
                    mk.nobr({ 'class': 'pass-rate' }, `${passes}/${total}`)
                );
            }
        }
    </script>
    <script src="/dropdown.js"></script>