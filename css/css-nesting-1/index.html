<!doctype html>
<html lang="zh-hans">

<head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
    <title>CSS 嵌套模块</title>
    <meta content="WD" name="w3c-status">
    <meta content="Bikeshed version 2b7cf6020, updated Fri Feb 10 17:54:11 2023 -0800" name="generator">
    <link href="https://www.w3.org/TR/css-nesting-1/" rel="canonical">
    <meta content="3f8bb03fa2c86a9c1e114fb9ddc67e3137ea4c80" name="document-revision">
    <style>
        /* style-autolinks */

        .css.css,
        .property.property,
        .descriptor.descriptor {
            color: var(--a-normal-text);
            font-size: inherit;
            font-family: inherit;
        }

        .css::before,
        .property::before,
        .descriptor::before {
            content: "‘";
        }

        .css::after,
        .property::after,
        .descriptor::after {
            content: "’";
        }

        .property,
        .descriptor {
            /* Don't wrap property and descriptor names */
            white-space: nowrap;
        }

        .type {
            /* CSS value <type> */
            font-style: italic;
        }

        pre .property::before,
        pre .property::after {
            content: "";
        }

        [data-link-type="property"]::before,
        [data-link-type="propdesc"]::before,
        [data-link-type="descriptor"]::before,
        [data-link-type="value"]::before,
        [data-link-type="function"]::before,
        [data-link-type="at-rule"]::before,
        [data-link-type="selector"]::before,
        [data-link-type="maybe"]::before {
            content: "‘";
        }

        [data-link-type="property"]::after,
        [data-link-type="propdesc"]::after,
        [data-link-type="descriptor"]::after,
        [data-link-type="value"]::after,
        [data-link-type="function"]::after,
        [data-link-type="at-rule"]::after,
        [data-link-type="selector"]::after,
        [data-link-type="maybe"]::after {
            content: "’";
        }

        [data-link-type].production::before,
        [data-link-type].production::after,
        .prod [data-link-type]::before,
        .prod [data-link-type]::after {
            content: "";
        }

        [data-link-type=element],
        [data-link-type=element-attr] {
            font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
            font-size: .9em;
        }

        [data-link-type=element]::before {
            content: "<"
        }

        [data-link-type=element]::after {
            content: ">"
        }

        [data-link-type=biblio] {
            white-space: pre;
        }
    </style>
    <style>
        /* style-counters */

        body {
            counter-reset: example figure issue;
        }

        .issue {
            counter-increment: issue;
        }

        .issue:not(.no-marker)::before {
            content: "Issue " counter(issue);
        }

        .example {
            counter-increment: example;
        }

        .example:not(.no-marker)::before {
            content: "Example " counter(example);
        }

        .invalid.example:not(.no-marker)::before,
        .illegal.example:not(.no-marker)::before {
            content: "Invalid Example" counter(example);
        }

        figcaption {
            counter-increment: figure;
        }

        figcaption:not(.no-marker)::before {
            content: "Figure " counter(figure) " ";
        }
    </style>
    <style>
        /* style-dfn-panel */

        :root {
            --dfnpanel-bg: #ddd;
            --dfnpanel-text: var(--text);
        }

        .dfn-panel {
            position: absolute;
            z-index: 35;
            height: auto;
            width: -webkit-fit-content;
            width: fit-content;
            max-width: 300px;
            max-height: 500px;
            overflow: auto;
            padding: 0.5em 0.75em;
            font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
            background: var(--dfnpanel-bg);
            color: var(--dfnpanel-text);
            border: outset 0.2em;
        }

        .dfn-panel:not(.on) {
            display: none;
        }

        .dfn-panel * {
            margin: 0;
            padding: 0;
            text-indent: 0;
        }

        .dfn-panel>b {
            display: block;
        }

        .dfn-panel a {
            color: var(--dfnpanel-text);
        }

        .dfn-panel a:not(:hover) {
            text-decoration: none !important;
            border-bottom: none !important;
        }

        .dfn-panel>b+b {
            margin-top: 0.25em;
        }

        .dfn-panel ul {
            padding: 0;
        }

        .dfn-panel li {
            list-style: inside;
        }

        .dfn-panel.activated {
            display: inline-block;
            position: fixed;
            left: .5em;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - 1.5em - .4em - .5em);
            max-height: 30vh;
        }

        .dfn-paneled {
            cursor: pointer;
        }
    </style>
    <style>
        /* style-issues */

        a[href].issue-return {
            float: right;
            float: inline-end;
            color: var(--issueheading-text);
            font-weight: bold;
            text-decoration: none;
        }
    </style>
    <style>
        /* style-md-lists */

        /* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
        [data-md]> :first-child {
            margin-top: 0;
        }

        [data-md]> :last-child {
            margin-bottom: 0;
        }
    </style>
    <style>
        /* style-selflinks */

        :root {
            --selflink-text: white;
            --selflink-bg: gray;
            --selflink-hover-text: black;
        }

        .heading,
        .issue,
        .note,
        .example,
        li,
        dt {
            position: relative;
        }

        a.self-link {
            position: absolute;
            top: 0;
            left: calc(-1 * (3.5rem - 26px));
            width: calc(3.5rem - 26px);
            height: 2em;
            text-align: center;
            border: none;
            transition: opacity .2s;
            opacity: .5;
        }

        a.self-link:hover {
            opacity: 1;
        }

        .heading>a.self-link {
            font-size: 83%;
        }

        .example>a.self-link,
        .note>a.self-link,
        .issue>a.self-link {
            /* These blocks are overflow:auto, so positioning outside
       doesn't work. */
            left: auto;
            right: 0;
        }

        li>a.self-link {
            left: calc(-1 * (3.5rem - 26px) - 2em);
        }

        dfn>a.self-link {
            top: auto;
            left: auto;
            opacity: 0;
            width: 1.5em;
            height: 1.5em;
            background: var(--selflink-bg);
            color: var(--selflink-text);
            font-style: normal;
            transition: opacity .2s, background-color .2s, color .2s;
        }

        dfn:hover>a.self-link {
            opacity: 1;
        }

        dfn>a.self-link:hover {
            color: var(--selflink-hover-text);
        }

        a.self-link::before {
            content: "¶";
        }

        .heading>a.self-link::before {
            content: "§";
        }

        dfn>a.self-link::before {
            content: "#";
        }
    </style>
    <style>
        /* style-syntax-highlighting */

        pre.idl.highlight {
            background: var(--borderedblock-bg, var(--def-bg));
        }

        code.highlight {
            padding: .1em;
            border-radius: .3em;
        }

        pre.highlight,
        pre>code.highlight {
            display: block;
            padding: 1em;
            margin: .5em 0;
            overflow: auto;
            border-radius: 0;
        }

        .highlight:not(.idl) {
            background: rgba(0, 0, 0, .03);
        }

        c-[a] {
            color: #990055
        }

        /* Keyword.Declaration */
        c-[b] {
            color: #990055
        }

        /* Keyword.Type */
        c-[c] {
            color: #708090
        }

        /* Comment */
        c-[d] {
            color: #708090
        }

        /* Comment.Multiline */
        c-[e] {
            color: #0077aa
        }

        /* Name.Attribute */
        c-[f] {
            color: #669900
        }

        /* Name.Tag */
        c-[g] {
            color: #222222
        }

        /* Name.Variable */
        c-[k] {
            color: #990055
        }

        /* Keyword */
        c-[l] {
            color: #000000
        }

        /* Literal */
        c-[m] {
            color: #000000
        }

        /* Literal.Number */
        c-[n] {
            color: #0077aa
        }

        /* Name */
        c-[o] {
            color: #999999
        }

        /* Operator */
        c-[p] {
            color: #999999
        }

        /* Punctuation */
        c-[s] {
            color: #a67f59
        }

        /* Literal.String */
        c-[t] {
            color: #a67f59
        }

        /* Literal.String.Single */
        c-[u] {
            color: #a67f59
        }

        /* Literal.String.Double */
        c-[cp] {
            color: #708090
        }

        /* Comment.Preproc */
        c-[c1] {
            color: #708090
        }

        /* Comment.Single */
        c-[cs] {
            color: #708090
        }

        /* Comment.Special */
        c-[kc] {
            color: #990055
        }

        /* Keyword.Constant */
        c-[kn] {
            color: #990055
        }

        /* Keyword.Namespace */
        c-[kp] {
            color: #990055
        }

        /* Keyword.Pseudo */
        c-[kr] {
            color: #990055
        }

        /* Keyword.Reserved */
        c-[ld] {
            color: #000000
        }

        /* Literal.Date */
        c-[nc] {
            color: #0077aa
        }

        /* Name.Class */
        c-[no] {
            color: #0077aa
        }

        /* Name.Constant */
        c-[nd] {
            color: #0077aa
        }

        /* Name.Decorator */
        c-[ni] {
            color: #0077aa
        }

        /* Name.Entity */
        c-[ne] {
            color: #0077aa
        }

        /* Name.Exception */
        c-[nf] {
            color: #0077aa
        }

        /* Name.Function */
        c-[nl] {
            color: #0077aa
        }

        /* Name.Label */
        c-[nn] {
            color: #0077aa
        }

        /* Name.Namespace */
        c-[py] {
            color: #0077aa
        }

        /* Name.Property */
        c-[ow] {
            color: #999999
        }

        /* Operator.Word */
        c-[mb] {
            color: #000000
        }

        /* Literal.Number.Bin */
        c-[mf] {
            color: #000000
        }

        /* Literal.Number.Float */
        c-[mh] {
            color: #000000
        }

        /* Literal.Number.Hex */
        c-[mi] {
            color: #000000
        }

        /* Literal.Number.Integer */
        c-[mo] {
            color: #000000
        }

        /* Literal.Number.Oct */
        c-[sb] {
            color: #a67f59
        }

        /* Literal.String.Backtick */
        c-[sc] {
            color: #a67f59
        }

        /* Literal.String.Char */
        c-[sd] {
            color: #a67f59
        }

        /* Literal.String.Doc */
        c-[se] {
            color: #a67f59
        }

        /* Literal.String.Escape */
        c-[sh] {
            color: #a67f59
        }

        /* Literal.String.Heredoc */
        c-[si] {
            color: #a67f59
        }

        /* Literal.String.Interpol */
        c-[sx] {
            color: #a67f59
        }

        /* Literal.String.Other */
        c-[sr] {
            color: #a67f59
        }

        /* Literal.String.Regex */
        c-[ss] {
            color: #a67f59
        }

        /* Literal.String.Symbol */
        c-[vc] {
            color: #0077aa
        }

        /* Name.Variable.Class */
        c-[vg] {
            color: #0077aa
        }

        /* Name.Variable.Global */
        c-[vi] {
            color: #0077aa
        }

        /* Name.Variable.Instance */
        c-[il] {
            color: #000000
        }

        /* Literal.Number.Integer.Long */
    </style>
    <link href="https://www.w3.org/StyleSheets/TR/2021/W3C-WD" rel="stylesheet">

<body class="h-entry">
    <div class="head">
        <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48"
                    src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72"> </a> </p>
        <h1 class="p-name no-ref" id="title">CSS 嵌套模块</h1>
        <p id="w3c-state"><a href="https://www.w3.org/standards/types#WD">W3C 工作草案</a>, <time class="dt-updated"
                datetime="2023-02-14">2023年2月14日</time></p>
        <details open>
            <summary>关于此文档的更多详细信息</summary>
            <div data-fill-with="spec-metadata">
                <dl>
                    <dt>此版本：
                    <dd><a class="u-url"
                            href="https://www.w3.org/TR/2023/WD-css-nesting-1-20230214/">https://www.w3.org/TR/2023/WD-css-nesting-1-20230214/</a>
                    <dt>最新发布版本：
                    <dd><a href="https://www.w3.org/TR/css-nesting-1/">https://www.w3.org/TR/css-nesting-1/</a>
                    <dt>编辑草案：
                    <dd><a href="https://drafts.csswg.org/css-nesting/">https://drafts.csswg.org/css-nesting/</a>
                    <dt>历史记录：
                    <dd><a class="u-url"
                            href="https://www.w3.org/standards/history/css-nesting-1">https://www.w3.org/standards/history/css-nesting-1</a>
                    <dt>反馈：
                    <dd><a href="https://github.com/w3c/csswg-drafts/labels/css-nesting-1">CSSWG 问题存储库</a>
                    <dd><a href="#issues-index">规范内联</a>
                    <dt class="editor">编辑：
                    <dd class="editor p-author h-card vcard" data-editor-id="42199"><a class="p-name fn u-url url"
                            href="http://xanthir.com/contact/">Tab Atkins-Bittner</a> (<span
                            class="p-org org">谷歌</span>)
                    <dd class="editor p-author h-card vcard" data-editor-id="112669"><a class="p-name fn u-url url"
                            href="https://nerdy.dev">Adam Argyle</a> (<span class="p-org org">谷歌</span>)
                    <dt>建议修改此规范：
                    <dd><a href="https://github.com/w3c/csswg-drafts/blob/main/css-nesting-1/Overview.bs">GitHub 编辑器</a>
                </dl>
            </div>
        </details>
        <div data-fill-with="warning"></div>
        <p class="copyright" data-fill-with="copyright"><a
                href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">版权</a> © 2023 <a
                href="https://www.w3.org/">万维网联盟</a>. <abbr title="万维网联盟">W3C</abbr><sup>®</sup> <a
                href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">法律免责声明</a>, <a
                href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">商标</a>及<a
                href="https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document"
                rel="license">许可文档</a>规则适用。</p>
        <hr title="头部分隔符">
    </div>
    <div class="p-summary" data-fill-with="abstract">
        <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">摘要</span></h2>
        <p>此模块引入了在一个样式规则中嵌套另一个样式规则的功能，子规则的选择器相对于父规则的选择器。这增加了 CSS 样式表的模块化和可维护性。</p>
        <a href="https://www.w3.org/TR/CSS/">CSS</a> 是一种用于描述结构化文档（如 HTML 和 XML）在屏幕、纸张等上的呈现语言。
    </div>
    <h2 class="no-num no-toc no-ref heading settled" id="sotd"><span class="content">本文件状态</span></h2>
    <div data-fill-with="status">
        <p><em>此部分描述了本文件在发布时的状态。当前 W3C 出版物列表及此技术报告的最新修订版可在 <a href="https://www.w3.org/TR/">https://www.w3.org/TR/</a>
                上找到。</em></p>
        <p> 此文件由 <a href="https://www.w3.org/groups/wg/css">CSS 工作组</a> 作为 <strong>工作草案</strong> 发布，使用了 <a
                href="https://www.w3.org/2021/Process-20211102/#recs-and-notes">推荐轨道</a>。作为工作草案发布不意味着 W3C 及其成员的认可。</p>
        <p> 这是一个草案文件，可能会随时更新、替换或被其他文件废弃。引用此文件不适合作为最终成果。</p>
        <p>请通过 <a href="https://github.com/w3c/csswg-drafts/issues">在 GitHub
                提交问题</a>（优先推荐）来反馈意见，包含规范代码“css-nesting”在标题中，例如：“[css-nesting] <i>…评论摘要…</i>”。所有问题和评论均已 <a
                href="https://lists.w3.org/Archives/Public/public-css-archive/">存档</a>。或者，也可以发送反馈到公共邮件列表 (<a
                href="https://lists.w3.org/Archives/Public/www-style/">存档</a>) <a
                href="mailto:www-style@w3.org?Subject=%5Bcss-nesting%5D%20PUT%20SUBJECT%20HERE">www-style@w3.org</a>。
        </p>
        <p>此文件受 <a href="https://www.w3.org/2021/Process-20211102/" id="w3c_process_revision">2021年11月2日 W3C 进程文档</a>管辖。
        </p>
        <p>此文件由依据 <a href="https://www.w3.org/Consortium/Patent-Policy-20200915/">W3C 专利政策</a> 运营的工作组制作。W3C 保持一份 <a
                href="https://www.w3.org/groups/wg/css/ipr"
                rel="disclosure">与本工作组交付物相关的专利披露的公共列表</a>；该页面还包含披露专利的说明。了解专利内容的个人必须根据 <a
                href="https://www.w3.org/Consortium/Patent-Policy-20200915/#sec-Disclosure">W3C 专利政策第 6 节</a>披露信息。</p>
        <p></p>
    </div>

    <div data-fill-with="at-risk"></div>
    <nav data-fill-with="table-of-contents" id="toc">
        <h2 class="no-num no-toc no-ref" id="contents">目录</h2>
        <ol class="toc" role="directory">
            <li>
                <a href="#intro"><span class="secno">1</span> <span class="content"> 简介</span></a>
                <ol class="toc">
                    <li><a href="#placement"><span class="secno">1.1</span> <span class="content"> 模块交互</span></a>
                    <li><a href="#values"><span class="secno">1.2</span> <span class="content"> 值</span></a>
                    <li><a href="#motivation"><span class="secno">1.3</span> <span class="content">
                                动机</span></a>
                </ol>
            <li>
                <a href="#nesting"><span class="secno">2</span> <span class="content">嵌套样式规则</span></a>
                <ol class="toc">
                    <li><a href="#syntax"><span class="secno">2.1</span> <span class="content">语法</span></a>
                    <li>
                        <a href="#conditionals"><span class="secno">2.2</span> <span class="content">嵌套其他
                                At-规则</span></a>
                        <ol class="toc">
                            <li><a href="#nesting-at-scope"><span class="secno">2.2.1</span> <span class="content">
                                        嵌套 <span class="css">@scope</span> 规则</span></a>
                        </ol>
                    <li><a href="#mixing"><span class="secno">2.3</span> <span class="content">混合嵌套规则与声明</span></a>
                </ol>
            <li><a href="#nest-selector"><span class="secno">3</span> <span class="content">嵌套选择器：<span
                            class="css">&amp;</span> 选择器</span></a>
            <li>
                <a href="#cssom"><span class="secno">4</span> <span class="content">CSSOM</span></a>
                <ol class="toc">
                    <li><a href="#cssom-style"><span class="secno">4.1</span> <span class="content">对
                                <code class="idl"><span>CSSStyleRule</span></code> 的修改</span></a>
                </ol>
            <li>
                <a href="#w3c-conformance"><span class="secno"></span> <span class="content"> 符合性</span></a>
                <ol class="toc">
                    <li><a href="#w3c-conventions"><span class="secno"></span> <span class="content"> 文档约定</span></a>
                    <li><a href="#w3c-conformance-classes"><span class="secno"></span> <span class="content">
                                符合性类别</span></a>
                    <li>
                        <a href="#w3c-partial"><span class="secno"></span> <span class="content"> 部分
                                实现</span></a>
                        <ol class="toc">
                            <li><a href="#w3c-conform-future-proofing"><span class="secno"></span> <span
                                        class="content"> 不稳定和专有功能的实现</span></a>
                        </ol>
                    <li><a href="#w3c-testing"><span class="secno"></span> <span class="content"> 非实验性
                                实现</span></a>
                </ol>
            <li>
                <a href="#index"><span class="secno"></span> <span class="content">索引</span></a>
                <ol class="toc">
                    <li><a href="#index-defined-here"><span class="secno"></span> <span
                                class="content">本规范定义的术语</span></a>
                    <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span
                                class="content">引用定义的术语</span></a>
                </ol>
            <li>
                <a href="#references"><span class="secno"></span> <span class="content">参考文献</span></a>
                <ol class="toc">
                    <li><a href="#normative"><span class="secno"></span> <span class="content">规范性
                                参考文献</span></a>
                    <li><a href="#informative"><span class="secno"></span> <span class="content">参考性
                                参考文献</span></a>
                </ol>
            <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL 索引</span></a>
            <li><a href="#issues-index"><span class="secno"></span> <span class="content">问题索引</span></a>
        </ol>
    </nav>

    <main>
        <h2 class="heading settled" data-level="1" id="intro"><span class="secno">1. </span><span class="content">
                简介</span><a class="self-link" href="#intro"></a></h2>
        <p><em>本节不是规范性的。</em></p>
        <p>此模块描述了在一个样式规则中嵌套另一个样式规则的支持，允许内部规则的选择器引用由外部规则匹配的元素。
            此功能允许将相关样式聚合到 CSS 文档中的单一结构中，提高可读性和可维护性。</p>
        <h3 class="heading settled" data-level="1.1" id="placement"><span class="secno">1.1. </span><span
                class="content"> 模块交互</span><a class="self-link" href="#placement"></a></h3>
        <p>此模块引入了扩展 <a data-link-type="biblio" href="#biblio-css21"
                title="Cascading Style Sheets Level 2 Revision 1 (CSS 2.1) Specification">[CSS21]</a> 解析器模型的新解析规则。
            此模块引入了扩展 <a data-link-type="biblio" href="#biblio-selectors4" title="Selectors Level 4">[SELECTORS4]</a>
            模块的选择器。</p>
        <h3 class="heading settled" data-level="1.2" id="values"><span class="secno">1.2. </span><span class="content">
                值</span><a class="self-link" href="#values"></a></h3>
        <p>本规范未定义任何新属性或值。</p>
        <h3 class="heading settled" data-level="1.3" id="motivation"><span class="secno">1.3. </span><span
                class="content"> 动机</span><a class="self-link" href="#motivation"></a></h3>
        <p>即使是中等复杂的网页 CSS 通常也包含大量重复的内容，用于为相关内容进行样式设置。
            例如，以下是 <a data-link-type="biblio" href="#biblio-css-color-3"
                title="CSS Color Module Level 3">[CSS-COLOR-3]</a> 模块的一部分 CSS 标记：</p>
        <div class="example" id="example-df188c81">
            <a class="self-link" href="#example-df188c81"></a>
            <pre class="lang-css highlight">table.colortable td <c- p>{</c->
  <c- k>text-align</c-><c- p>:</c->center<c- p>;</c->
<c- p>}</c->
table.colortable td.c <c- p>{</c->
  <c- k>text-transform</c-><c- p>:</c->uppercase<c- p>;</c->
<c- p>}</c->
table.colortable td:first-child<c- p>,</c-> table.colortable td:first-child+td <c- p>{</c->
  <c- k>border</c-><c- p>:</c-><c- m>1</c-><c- k>px</c-> solid black<c- p>;</c->
<c- p>}</c->
table.colortable th <c- p>{</c->
  <c- k>text-align</c-><c- p>:</c->center<c- p>;</c->
  <c- k>background</c-><c- p>:</c->black<c- p>;</c->
  <c- k>color</c-><c- p>:</c->white<c- p>;</c->
<c- p>}</c->
</pre>
        </div>
        <p>嵌套允许将相关的样式规则分组，如下所示：</p>
        <div class="example" id="example-aecb8796">
            <a class="self-link" href="#example-aecb8796"></a>
            <pre class="lang-css highlight">table.colortable <c- p>{</c->
  &amp; td <c- p>{</c->
    <c- k>text-align</c-><c- p>:</c->center<c- p>;</c->
    &amp;.c <c- p>{</c-> <c- k>text-transform</c-><c- p>:</c->uppercase <c- p>}</c->
    &amp;:first-child<c- p>,</c-> &amp;:first-child + td <c- p>{</c-> <c- k>border</c-><c- p>:</c-><c- m>1</c-><c- k>px</c-> solid black <c- p>}</c->
  <c- p>}</c->
  &amp; th <c- p>{</c->
    <c- k>text-align</c-><c- p>:</c->center<c- p>;</c->
    <c- k>background</c-><c- p>:</c->black<c- p>;</c->
    <c- k>color</c-><c- p>:</c->white<c- p>;</c->
  <c- p>}</c->
<c- p>}</c->
</pre>
        </div>
        <p>除了消除重复，相关规则的分组还提高了生成的 CSS 的可读性和可维护性。</p>
        <h2 class="heading settled" data-level="2" id="nesting"><span class="secno">2. </span><span
                class="content">嵌套样式规则</span><a class="self-link" href="#nesting"></a></h2>
        <p>样式规则可以嵌套在其他样式规则中。
            这些<dfn class="dfn-paneled" data-dfn-type="dfn" data-export data-lt="nested style rule|nesting style rule"
                id="nested-style-rule">嵌套样式规则</dfn>的作用与普通样式规则相同——<wbr>通过选择器将属性与元素关联——<wbr>但它们“继承”其父规则的选择器上下文，
	允许它们在不重复父选择器的情况下进一步扩展父选择器，
	可能会多次使用。</p>
        <p><a data-link-type="dfn" href="#nested-style-rule" id="ref-for-nested-style-rule">嵌套样式规则</a>与普通样式规则完全相同，
            唯一的例外是其<a data-link-type="dfn" href="https://www.w3.org/TR/selectors-4/#selector"
                id="ref-for-selector">选择器</a>不能以<a data-link-type="dfn"
                href="https://www.w3.org/TR/css-values-4/#css-css-identifier" id="ref-for-css-css-identifier">标识符</a>或<a
                data-link-type="dfn" href="https://www.w3.org/TR/css-values-4/#functional-notation"
                id="ref-for-functional-notation">功能符号</a>开头。
            此外，<span id="ref-for-nested-style-rule①">嵌套样式规则</span>可以使用<a data-link-type="dfn"
                href="https://www.w3.org/TR/selectors-4/#relative-selector" id="ref-for-relative-selector">相对选择器</a>。
        </p>
        <div class="example" id="example-20186287">
            <a class="self-link" href="#example-20186287"></a> 例如，嵌套样式规则如下：
            <pre class="lang-css highlight">.foo <c- p>{</c->
  <c- k>color</c-><c- p>:</c-> red<c- p>;</c->

  .bar <c- p>{</c->
    <c- k>color</c-><c- p>:</c-> blue<c- p>;</c->
  <c- p>}</c->
<c- p>}</c->
</pre>
            <p>是有效的，并且等同于：</p>
            <pre class="lang-css highlight">.foo <c- p>{</c->
  <c- k>color</c-><c- p>:</c-> red<c- p>;</c->
<c- p>}</c->
.foo .bar <c- p>{</c->
  <c- k>color</c-><c- p>:</c-> blue<c- p>;</c->
<c- p>}</c->
</pre>
            <p>嵌套规则还可以使用<a data-link-type="dfn" href="#nesting-selector"
                    id="ref-for-nesting-selector">嵌套选择器</a>直接引用父规则匹配的元素，
                或使用<a data-link-type="dfn" href="https://www.w3.org/TR/selectors-4/#relative-selector"
                    id="ref-for-relative-selector①">相对选择器</a>语法
                指定除“后代”之外的关系。</p>
            <pre class="lang-css highlight">.foo <c- p>{</c->
  <c- k>color</c-><c- p>:</c-> red<c- p>;</c->

  &amp;:hover <c- p>{</c->
    <c- k>color</c-><c- p>:</c-> blue<c- p>;</c->
  <c- p>}</c->
<c- p>}</c->

<c- c>/* 等效于： */</c->

.foo <c- p>{</c-> <c- k>color</c-><c- p>:</c-> red<c- p>;</c-> <c- p>}</c->
.foo:hover <c- p>{</c-> <c- k>color</c-><c- p>:</c-> blue<c- p>;</c-> <c- p>}</c->
</pre>
            <pre class="lang-css highlight">.foo <c- p>{</c->
  <c- k>color</c-><c- p>:</c-> red<c- p>;</c->

  + .bar <c- p>{</c->
    <c- k>color</c-><c- p>:</c-> blue<c- p>;</c->
  <c- p>}</c->
<c- p>}</c->

<c- c>/* 等效于： */</c->

.foo <c- p>{</c-> <c- k>color</c-><c- p>:</c-> red<c- p>;</c-> <c- p>}</c->
.foo + .bar <c- p>{</c-> <c- k>color</c-><c- p>:</c-> blue<c- p>;</c-> <c- p>}</c->
</pre>
        </div>
        <div class="example" id="example-34e8e94f">
            <a class="self-link" href="#example-34e8e94f"></a> 然而，以标识符（换句话说，是<a data-link-type="dfn"
                href="https://www.w3.org/TR/selectors-4/#type-selector"
                id="ref-for-type-selector">类型选择器</a>）开头的嵌套选择器是无效的：
            <pre class="lang-css highlight">div <c- p>{</c->
  <c- k>color</c-><c- p>:</c-> red<c- p>;</c->

  input <c- p>{</c->
    <c- k>margin</c-><c- p>:</c-> <c- m>1</c-><c- k>em</c-><c- p>;</c->
  <c- p>}</c->
<c- p>}</c-> 
<c- c>/* 无效，因为 "input" 是一个标识符。 */</c->
</pre>
            <p>此类选择器仍然可以编写，只需要稍作修改：</p>
            <pre class="lang-css highlight">div <c- p>{</c->
  <c- k>color</c-><c- p>:</c-> red<c- p>;</c->

  &amp; input <c- p>{</c-> <c- k>margin</c-><c- p>:</c-> <c- m>1</c-><c- k>em</c-><c- p>;</c-> <c- p>}</c->
  <c- c>/* 有效，不再以标识符开头 */</c->

  <c- nf>:is</c-><c- p>(</c->input<c- p>)</c-> <c- p>{</c-> <c- k>margin</c-><c- p>:</c-> <c- m>1</c-><c- k>em</c-><c- p>;</c-> <c- p>}</c->
  <c- c>/* 有效，以冒号开头，</c->
<c- c>     与前面的规则等效。 */</c->
<c- p>}</c-> 
</pre>
        </div>
        <details class="note">
            <summary>为什么嵌套规则选择器有一些限制？</summary>
            <p>简单地将样式规则嵌套在其他样式规则中是不明确的——<wbr>选择器的语法与声明的语法重叠，
		因此实现需要无限回溯来判断给定的文本是声明还是样式规则的开头。</p>
            <p>例如，如果解析器首先看到 <span class="css">color:hover ...</span>，
                它无法判断这是否是<a class="property css" data-link-type="property"
                    href="https://www.w3.org/TR/css-color-4/#propdef-color" id="ref-for-propdef-color">color</a>
                属性
                （被设置为无效值...）
                或是 <code>&lt;color></code> 元素的选择器。
                它甚至无法依赖查找有效属性来判断它们之间的区别；
                这会导致解析依赖于实现支持的属性，
                并可能随时间变化。</p>
            <p>禁止嵌套样式规则以<a data-link-type="dfn" href="https://www.w3.org/TR/css-values-4/#css-css-identifier"
                    id="ref-for-css-css-identifier①">标识符</a>开头解决了这个问题——<wbr>所有<a data-link-type="dfn"
                    href="https://www.w3.org/TR/cssom-1/#cssstyledeclaration-declarations"
                    id="ref-for-cssstyledeclaration-declarations">声明</a>都以标识符开头，
                提供属性名称，
                因此解析器可以立即判断它是在解析<a data-link-type="dfn" href="https://www.w3.org/TR/css-syntax-3/#declaration"
                    id="ref-for-declaration">声明</a>还是
                <a data-link-type="dfn" href="https://www.w3.org/TR/css-syntax-3/#style-rule"
                    id="ref-for-style-rule">样式规则</a>。
            </p>
            <p>某些非浏览器实现的嵌套规则并不强制此要求。
                在大多数情况下，<em>最终</em>可以区分属性和选择器，
                但这样做需要解析器具有无限的回溯能力；
                也就是说，解析器可能需要保留未知数量的内容，
                然后才能判断应该如何解释它。
                迄今为止，CSS 只需要少量、已知的回溯能力，
                这使得更高效的解析算法成为可能，
                因此无限回溯在浏览器实现中通常被认为是不可接受的。</p>
        </details>
        <h3 class="heading settled" data-level="2.1" id="syntax"><span class="secno">2.1. </span><span
                class="content">语法</span><a class="self-link" href="#syntax"></a></h3>
        <p><a data-link-type="dfn" href="https://www.w3.org/TR/css-syntax-3/#style-rule"
                id="ref-for-style-rule①">样式规则</a>的内容现在接受<a data-link-type="dfn" href="#nested-style-rule"
                id="ref-for-nested-style-rule②">嵌套样式规则</a>和<a data-link-type="dfn"
                href="https://www.w3.org/TR/css-syntax-3/#at-rule" id="ref-for-at-rule">at 规则</a>，
            以及现有的<a data-link-type="dfn" href="https://www.w3.org/TR/cssom-1/#cssstyledeclaration-declarations"
                id="ref-for-cssstyledeclaration-declarations①">声明</a>。</p>
        <p><a data-link-type="dfn" href="#nested-style-rule" id="ref-for-nested-style-rule③">嵌套样式规则</a>
            与非嵌套规则的不同之处在于：</p>
        <ul>
            <li data-md>
                <p><a data-link-type="dfn" href="#nested-style-rule" id="ref-for-nested-style-rule④">嵌套样式规则</a>的选择器不能以<a
                        data-link-type="dfn" href="https://www.w3.org/TR/css-values-4/#css-css-identifier"
                        id="ref-for-css-css-identifier②">标识符</a>或<a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-values-4/#functional-notation"
                        id="ref-for-functional-notation①">功能符号</a>开头。</p>
            <li data-md>
                <p><a data-link-type="dfn" href="#nested-style-rule" id="ref-for-nested-style-rule⑤">嵌套样式
                        规则</a>接受<a class="production css" data-link-type="type"
                        href="https://www.w3.org/TR/selectors-4/#typedef-relative-selector-list"
                        id="ref-for-typedef-relative-selector-list">&lt;相对选择器列表></a>作为前置选择器
                    （而不仅仅是<a class="production css" data-link-type="type"
                        href="https://www.w3.org/TR/selectors-4/#typedef-selector-list"
                        id="ref-for-typedef-selector-list">&lt;选择器列表></a>）。
                    任何<a data-link-type="dfn" href="https://www.w3.org/TR/selectors-4/#relative-selector"
                        id="ref-for-relative-selector②">相对选择器</a>都是相对于<a data-link-type="dfn" href="#nesting-selector"
                        id="ref-for-nesting-selector①">嵌套选择器</a>表示的元素的。</p>
            <li data-md>
                <p>如果<a class="production css" data-link-type="type"
                        href="https://www.w3.org/TR/selectors-4/#typedef-relative-selector-list"
                        id="ref-for-typedef-relative-selector-list①">&lt;相对选择器列表></a>中的选择器没有以<a data-link-type="dfn"
                        href="https://www.w3.org/TR/selectors-4/#selector-combinator"
                        id="ref-for-selector-combinator">组合器</a>开头，但包含<a data-link-type="dfn" href="#nesting-selector"
                        id="ref-for-nesting-selector②">嵌套选择器</a>，
                    则它被解释为非<a data-link-type="dfn" href="https://www.w3.org/TR/selectors-4/#relative-selector"
                        id="ref-for-relative-selector③">相对选择器</a>。</p>
        </ul>
        <p>嵌套样式规则的解析的具体细节定义在<a data-link-type="biblio" href="#biblio-css-syntax-3"
                title="CSS 语法模块第 3 级">[CSS-SYNTAX-3]</a>中。</p>
        <p class="issue" id="issue-8ec431e9"><a class="self-link" href="#issue-8ec431e9"></a> CSS 工作组目前正在探索解析前瞻的后果，
            并可能因此调整允许的语法。<a href="https://github.com/w3c/csswg-drafts/issues/7961">[Issue #7961]</a></p>
        <p>无效的<a data-link-type="dfn" href="#nested-style-rule" id="ref-for-nested-style-rule⑥">嵌套样式
                规则</a>将被忽略及其内容被忽略，
            但不会使其父规则无效。</p>
        <div class="example" id="example-31845edf">
            <a class="self-link" href="#example-31845edf"></a> 例如，以下嵌套是有效的：
            <pre class="lang-css highlight"><b><c- c>/* &amp; 可以单独使用 */</c-></b>
.foo <c- p>{</c->
  <c- k>color</c-><c- p>:</c-> blue<c- p>;</c->
  &amp; > .bar <c- p>{</c-> <c- k>color</c-><c- p>:</c-> red<c- p>;</c-> <c- p>}</c->
  > .baz <c- p>{</c-> <c- k>color</c-><c- p>:</c-> green<c- p>;</c-> <c- p>}</c->
<c- p>}</c->
<c- c>/* 等同于</c->
<c- c>  .foo { color: blue; }</c->
<c- c>  .foo > .bar { color: red; }</c->
<c- c>  .foo > .baz { color: green; }</c->
<c- c>*/</c->


<b><c- c>/* 或在组合选择器中使用，</c->
<c- c>   细化父选择器 */</c-></b>
.foo <c- p>{</c->
  <c- k>color</c-><c- p>:</c-> blue<c- p>;</c->
  &amp;.bar <c- p>{</c-> <c- k>color</c-><c- p>:</c-> red<c- p>;</c-> <c- p>}</c->
<c- p>}</c->
<c- c>/* 等同于</c->
<c- c>  .foo { color: blue; }</c->
<c- c>  .foo.bar { color: red; }</c->
<c- c>*/</c->

<b><c- c>/* 列表中的多个选择器都相对于父级 */</c-></b>
.foo<c- p>,</c-> .bar <c- p>{</c->
  <c- k>color</c-><c- p>:</c-> blue<c- p>;</c->
  + .baz<c- p>,</c-> &amp;.qux <c- p>{</c-> <c- k>color</c-><c- p>:</c-> red<c- p>;</c-> <c- p>}</c->
<c- p>}</c->
<c- c>/* 等同于</c->
<c- c>  .foo, .bar { color: blue; }</c->
<c- c>  :is(.foo, .bar) + .baz,</c->
<c- c>  :is(.foo, .bar).qux { color: red; }</c->
<c- c>*/</c->

<b><c- c>/* &amp; 可以在单个选择器中使用多次 */</c-></b>
.foo <c- p>{</c->
  <c- k>color</c-><c- p>:</c-> blue<c- p>;</c->
  &amp; .bar &amp; .baz &amp; .qux <c- p>{</c-> <c- k>color</c-><c- p>:</c-> red<c- p>;</c-> <c- p>}</c->
<c- p>}</c->
<c- c>/* 等同于</c->
<c- c>  .foo { color: blue; }</c->
<c- c>  .foo .bar .foo .baz .foo .qux { color: red; }</c->
<c- c>*/</c->

<b><c- c>/* &amp; 不必在选择器的开头 */</c-></b>

.foo <c- p>{</c->
  <c- k>color</c-><c- p>:</c-> red<c- p>;</c->
  .parent &amp; <c- p>{</c->
    <c- k>color</c-><c- p>:</c-> blue<c- p>;</c->
  <c- p>}</c->
<c- p>}</c->
<c- c>/* 等同于</c->
<c- c>  .foo { color: red; }</c->
<c- c>  .parent .foo { color: blue; }</c->
<c- c>*/</c->

.foo <c- p>{</c->
  <c- k>color</c-><c- p>:</c-> red<c- p>;</c->
  <c- nf>:not</c-><c- p>(</c->&amp;<c- p>)</c-> <c- p>{</c->
    <c- k>color</c-><c- p>:</c-> blue<c- p>;</c->
  <c- p>}</c->
<c- p>}</c->
<c- c>/* 等同于</c->
<c- c>  .foo { color: red; }</c->
<c- c>  :not(.foo) { color: blue; }</c->
<c- c>*/</c->

<b><c- c>/* 但如果你使用</c-><a data-link-type="dfn" href="https://www.w3.org/TR/selectors-4/#relative-selector" id="ref-for-relative-selector④"><c- c>相对选择器</c-></a><c- c>，</c->
<c- c>  则会自动隐式包含初始 &amp; */</c-></b>

.foo <c- p>{</c->
  <c- k>color</c-><c- p>:</c-> red<c- p>;</c->
  + .bar + &amp; <c- p>{</c-> <c- k>color</c-><c- p>:</c-> blue<c- p>;</c-> <c- p>}</c->
<c- p>}</c->

<c- c>/* 等同于</c->
<c- c>  .foo { color: red; }</c->
<c- c>  .foo + .bar + .foo { color: blue; }</c->
<c- c>*/</c->

<b><c- c>/* 有点多余，但 &amp; 也可以单独使用 */</c-></b>
.foo <c- p>{</c->
  <c- k>color</c-><c- p>:</c-> blue<c- p>;</c->
  &amp; <c- p>{</c-> <c- k>padding</c-><c- p>:</c-> <c- m>2</c-><c- k>ch</c-><c- p>;</c-> <c- p>}</c->
<c- p>}</c->
<c- c>/* 等同于</c->
<c- c>  .foo { color: blue; }</c->
<c- c>  .foo { padding: 2ch; }</c->

<c- c>  // 或</c->

<c- c>  .foo {</c->
<c- c>    color: blue;</c->
<c- c>    padding: 2ch;</c->
<c- c>  }</c->
<c- c>*/</c->

<b><c- c>/* 再次，有点多余，但可以叠加使用 &amp;。 */</c-></b>
.foo <c- p>{</c->
  <c- k>color</c-><c- p>:</c-> blue<c- p>;</c->
  &amp;&amp; <c- p>{</c-> <c- k>padding</c-><c- p>:</c-> <c- m>2</c-><c- k>ch</c-><c- p>;</c-> <c- p>}</c->
<c- p>}</c->
<c- c>/* 等同于</c->
<c- c>  .foo { color: blue; }</c->
<c- c>  .foo.foo { padding: 2ch; }</c->
<c- c>*/</c->

<b><c- c>/* 父选择器可以任意复杂 */</c-></b>
.error<c- p>,</c-> #404 <c- p>{</c->
  &amp;:hover > .baz <c- p>{</c-> <c- k>color</c-><c- p>:</c-> red<c- p>;</c-> <c- p>}</c->
<c- p>}</c->
<c- c>/* 等同于</c->
<c- c>  :is(.error, #404):hover > .baz { color: red; }</c->
<c- c>*/</c->

.ancestor .el <c- p>{</c->
  .other-ancestor &amp; <c- p>{</c-> <c- k>color</c-><c- p>:</c-> red<c- p>;</c-> <c- p>}</c->
<c- p>}</c->
<c- c>/* 等同于</c->
<c- c>  .other-ancestor :is(.ancestor .el) { color: red; }</c->

<b><c- c>/* 嵌套选择器也可以非常复杂 */</c-></b>
.foo <c- p>{</c->
  &amp; <c- nf>:is</c-><c- p>(</c->.bar<c- p>,</c-> &amp;.baz<c- p>)</c-> <c- p>{</c-> <c- k>color</c-><c- p>:</c-> red<c- p>;</c-> <c- p>}</c->
<c- p>}</c->
<c- c>/* 等同于</c->
<c- c>  .foo :is(.bar, .foo.baz) { color: red; }</c->
<c- c>*/</c->

<b><c- c>/* 多层嵌套会“累加”选择器 */</c-></b>
figure <c- p>{</c->
  <c- k>margin</c-><c- p>:</c-> <c- m>0</c-><c- p>;</c->

  > figcaption <c- p>{</c->
    <c- k>background</c-><c- p>:</c-> <c- nf>hsl</c-><c- p>(</c-><c- m>0</c-> <c- m>0</c-><c- k>%</c-> <c- m>0</c-><c- k>%</c-> / <c- m>50</c-><c- k>%</c-><c- p>);</c->

    > p <c- p>{</c->
      <c- k>font-size</c-><c- p>:</c-> <c- m>.9</c-><c- k>rem</c-><c- p>;</c->
    <c- p>}</c->
  <c- p>}</c->
<c- p>}</c->
<c- c>/* 等同于</c->
<c- c>  figure { margin: 0; }</c->
<c- c>  figure > figcaption { background: hsl(0 0% 0% / 50%); }</c->
<c- c>  figure > figcaption > p { font-size: .9rem; }</c->
<c- c>*/</c->

<b><c- c>/* 层叠层的示例用法 */</c-></b>
<c- n>@layer</c-> base <c- p>{</c->
  html <c- p>{</c->
    <c- k>block-size</c-><c- p>:</c-> <c- m>100</c-><c- k>%</c-><c- p>;</c->

    &amp; body <c- p>{</c->
      <c- k>min-block-size</c-><c- p>:</c-> <c- m>100</c-><c- k>%</c-><c- p>;</c->
    <c- p>}</c->
  <c- p>}</c->
<c- p>}</c->
<c- c>/* 等同于</c->
<c- c>  @layer base {</c->
<c- c>    html { block-size: 100%; }</c->
<c- c>    html body { min-block-size: 100%; }</c->
<c- c>  }</c->
<c- c>*/</c->

<b><c- c>/* 层叠层的嵌套示例 */</c-></b>
<c- n>@layer</c-> base <c- p>{</c->
  html <c- p>{</c->
    <c- k>block-size</c-><c- p>:</c-> <c- m>100</c-><c- k>%</c-><c- p>;</c->

    <c- n>@layer</c-> support <c- p>{</c->
      &amp; body <c- p>{</c-> <c- k>min-block-size</c-><c- p>:</c-> <c- m>100</c-><c- k>%</c-><c- p>;</c-> 
      <c- p>}</c-> 
    <c- p>}</c-> 
  <c- p>}</c-> 
<c- p>}</c-> 
<c- c>/* 等同于</c->
<c- c>  @layer base {</c-> 
<c- c>    html { block-size: 100%; }</c-> 
<c- c>  }</c-> 
<c- c>  @layer base.support {</c-> 
<c- c>    html body { min-block-size: 100%; }</c-> 
<c- c>  }</c-> 
<c- c>*/</c-> 
		
<b><c- c>/* Scoping 的示例用法 */</c-></b>
<c- n>@scope</c-> <c- p>(</c->.card<c- p>)</c-> to <c- p>(</c->> header<c- p>)</c-> <c- p>{</c-> 
  :scope <c- p>{</c-> 
    <c- k>inline-size</c-><c- p>:</c-> <c- m>40</c-><c- k>ch</c-><c- p>;</c-> 
    <c- k>aspect-ratio</c-><c- p>:</c-> <c- m>3</c->/<c- m>4</c-><c- p>;</c-> 
				
    > header <c- p>{</c-> 
      <c- k>border-block-end</c-><c- p>:</c-> <c- m>1</c-><c- k>px</c-> solid white<c- p>;</c-> 
    <c- p>}</c-> 
  <c- p>}</c-> 
<c- p>}</c-> 
<c- c>/* 等同于</c->
<c- c>  @scope (.card) to (> header) {</c-> 
<c- c>    :scope { inline-size: 40ch; aspect-ratio: 3/4; }</c-> 
<c- c>    :scope > header { border-block-end: 1px solid white; }</c-> 
<c- c>  }</c-> 
<c- c>*/</c-> 
		
<b><c- c>/* Scoping 的嵌套示例 */</c-></b> 
.card <c- p>{</c-> 
  <c- k>inline-size</c-><c- p>:</c-> <c- m>40</c-><c- k>ch</c-><c- p>;</c-> 
  <c- k>aspect-ratio</c-><c- p>:</c-> <c- m>3</c->/<c- m>4</c-><c- p>;</c-> 

  <c- n>@scope</c-> <c- p>(</c->&amp;<c- p>)</c-> to <c- p>(</c->> header > *<c- p>)</c-> <c- p>{</c-> 
    :scope > header <c- p>{</c-> 
      <c- k>border-block-end</c-><c- p>:</c-> <c- m>1</c-><c- k>px</c-> solid white<c- p>;</c-> 
    <c- p>}</c-> 
  <c- p>}</c-> 
<c- p>}</c-> 

<c- c>/* 等同于</c->
<c- c>  .card { inline-size: 40ch; aspect-ratio: 3/4; }</c-> 
<c- c>  @scope (.card) to (> header > *) {</c-> 
<c- c>    :scope > header { border-block-end: 1px solid white; }</c-> 
<c- c>  }</c-> 
<c- c>*/</c-> 
</pre>
            <p>但以下情况无效：</p>
            <pre class="lang-css highlight"><b><c- c>/* 选择器以标识符开头 */</c-></b> 
.foo <c- p>{</c-> 
  <c- k>color</c-><c- p>:</c-> blue<c- p>;</c-> 
  div <c- p>{</c-> 
    <c- k>color</c-><c- p>:</c-> red<c- p>;</c-> 
  <c- p>}</c-> 
<c- p>}</c-> 
</pre>
        </div>
        <div class="note" role="note">
            某些生成 CSS 的工具在预处理嵌套时
            会将选择器作为字符串连接，
            允许作者在嵌套级别中构建一个<em>单一</em>的<a data-link-type="dfn" href="https://www.w3.org/TR/selectors-4/#simple"
                id="ref-for-simple">简单选择器</a>。
            这有时与层级命名模式一起使用，
            如<a
                href="https://en.wikipedia.org/wiki/CSS#:~:text=bem%20(block%2C%20element%2C%20modifier)">BEM</a>，以减少文件中的重复，
            当选择器本身具有显著的内部重复时。
            <p>例如，如果一个组件使用类 <span class="css">.foo</span>，
                而嵌套组件使用 <span class="css">.fooBar</span>，
                你可以在<a href="https://sass-lang.com/">Sass</a>中写成：</p>
            <pre class="lang-css highlight">.foo <c- p>{</c-> 
        <c- k>color</c-><c- p>:</c-> blue<c- p>;</c-> 
        &amp;Bar <c- p>{</c-> <c- k>color</c-><c- p>:</c-> red<c- p>;</c-> <c- p>}</c-> 
<c- p>}</c-> 
<c- c>/* 在 Sass 中，这等同于 */</c-> 
<c- c>   .foo { color: blue; }</c-> 
<c- c>   .fooBar { color: red; }</c-> 
<c- c>*/</c-> 
</pre>
            <p>不幸的是，这种基于字符串的解释与
                尝试在嵌套规则中添加类型选择器的作者相冲突。例如，<a class="css" data-link-type="maybe"
                    href="https://www.w3.org/TR/css-ui-4/#valdef-caret-shape-bar"
                    id="ref-for-valdef-caret-shape-bar">Bar</a><em>是</em> HTML 中的一个有效<a
                    href="https://html.spec.whatwg.org/multipage/custom-elements.html">自定义元素名称</a>。
            </p>
            <p>CSS 不会这样做：
                嵌套的选择器组件是原子解释的，
                而不是字符串连接的：</p>
            <pre class="lang-css highlight">.foo <c- p>{</c-> 
        <c- k>color</c-><c- p>:</c-> blue<c- p>;</c-> 
        &amp;Bar <c- p>{</c-> <c- k>color</c-><c- p>:</c-> red<c- p>;</c-> <c- p>}</c-> 
<c- p>}</c-> 
<c- c>/* 在 CSS 中，这等同于 */</c-> 
<c- c>   .foo { color: blue; }</c-> 
<c- c>   Bar.foo { color: red; }</c-> 
<c- c>*/</c-> 
</pre>
        </div>

        <h3 class="heading settled" data-level="2.2" id="conditionals"><span class="secno">2.2. </span><span
                class="content">嵌套其他 At 规则</span><a class="self-link" href="#conditionals"></a></h3>
        <p>除了<a data-link-type="dfn" href="#nested-style-rule" id="ref-for-nested-style-rule⑦">嵌套样式规则</a>，
            本规范还允许在<a data-link-type="dfn" href="https://www.w3.org/TR/css-syntax-3/#style-rule"
                id="ref-for-style-rule②">样式规则</a>中嵌套<dfn class="dfn-paneled" data-dfn-type="dfn" data-export
                id="nested-group-rules">嵌套组规则</dfn>：
            任何其主体包含<span id="ref-for-style-rule③">样式规则</span>的 at 规则都可以嵌套在
            <span id="ref-for-style-rule④">样式规则</span>中。
        </p>
        <p>以这种方式嵌套时，
            <a data-link-type="dfn" href="#nested-group-rules" id="ref-for-nested-group-rules">嵌套组规则</a>的内容会被解析为<a
                class="production css" data-link-type="type"
                href="https://www.w3.org/TR/css-syntax-3/#typedef-style-block"
                id="ref-for-typedef-style-block">&lt;样式块></a>而不是<a class="production css" data-link-type="type"
                href="https://www.w3.org/TR/css-syntax-3/#typedef-stylesheet"
                id="ref-for-typedef-stylesheet">&lt;样式表></a>：
        </p>
        <ul>
            <li data-md>
                <p><a data-link-type="dfn" href="https://www.w3.org/TR/css-syntax-3/#style-rule"
                        id="ref-for-style-rule⑤">样式规则</a>是<a data-link-type="dfn" href="#nested-style-rule"
                        id="ref-for-nested-style-rule⑧">嵌套样式规则</a>，
                    它们的<a data-link-type="dfn" href="#nesting-selector" id="ref-for-nesting-selector③">嵌套选择器</a>
                    的定义来自最近的父<span id="ref-for-style-rule⑥">样式规则</span>。</p>
            <li data-md>
                <p>属性可以直接使用，
                    就像它们嵌套在<code>&amp; {...}</code>块中一样。</p>
        </ul>
        <div class="note" role="note">
            具体来说，以下规则可以作为<a data-link-type="dfn" href="#nested-group-rules" id="ref-for-nested-group-rules①">嵌套组规则</a>：
            <ul>
                <li data-md>
                    <p>所有<a data-link-type="dfn" href="https://www.w3.org/TR/css-conditional-3/#conditional-group-rule"
                            id="ref-for-conditional-group-rule">条件组规则</a>（<a class="css" data-link-type="maybe"
                            href="https://www.w3.org/TR/css-conditional-3/#at-ruledef-media"
                            id="ref-for-at-ruledef-media">@media</a>，<a class="css" data-link-type="maybe"
                            href="https://www.w3.org/TR/css-conditional-3/#at-ruledef-supports"
                            id="ref-for-at-ruledef-supports">@supports</a>）</p>
                <li data-md>
                    <p><a class="css" data-link-type="maybe"
                            href="https://www.w3.org/TR/css-cascade-5/#at-ruledef-layer"
                            id="ref-for-at-ruledef-layer">@layer</a></p>
                <li data-md>
                    <p><a class="css" data-link-type="maybe"
                            href="https://www.w3.org/TR/css-cascade-6/#at-ruledef-scope"
                            id="ref-for-at-ruledef-scope">@scope</a></p>
                <li data-md>
                    <p><a class="css" data-link-type="maybe"
                            href="https://www.w3.org/TR/css-contain-3/#at-ruledef-container"
                            id="ref-for-at-ruledef-container">@container</a></p>
            </ul>
        </div>
        <p>这些<a data-link-type="dfn" href="#nested-group-rules" id="ref-for-nested-group-rules②">嵌套组规则</a>的含义和行为与非嵌套时相同，
            除非另有规定。</p>
        <div class="example" id="example-f2b8b339">
            <a class="self-link" href="#example-f2b8b339"></a> 例如，以下条件嵌套是有效的：
            <pre class="lang-css highlight"><b><c- c>/* 属性可以直接使用 */</c-></b>
.foo <c- p>{</c->
  <c- k>display</c-><c- p>:</c-> grid<c- p>;</c->

  <c- n>@media</c-> <c- p>(</c->orientation: landscape<c- p>)</c-> <c- p>{</c->
    <c- k>grid-auto-flow</c-><c- p>:</c-> column<c- p>;</c->
  <c- p>}</c->
<c- p>}</c-> 
<c- c>/* 等同于 */</c->
<c- c>  .foo {</c->
<c- c>    display: grid;</c->
<c- c>				</c->
<c- c>    @media (orientation: landscape) {</c->
<c- c>      &amp; {</c->
<c- c>        grid-auto-flow: column;</c->
<c- c>      }</c->
<c- c>    }</c->
<c- c>  }</c->
<c- c>*/</c->

<c- c>/* 最终等同于 */</c->
<c- c>  .foo { display: grid; }</c->

<c- c>  @media (orientation: landscape) {</c->
<c- c>    .foo {</c->
<c- c>      grid-auto-flow: column;</c->
<c- c>    }</c->
<c- c>  }</c->
<c- c>*/</c->

<b><c- c>/* 条件可以进一步嵌套 */</c-></b>
.foo <c- p>{</c->
  <c- k>display</c-><c- p>:</c-> grid<c- p>;</c->

  <c- n>@media</c-> <c- p>(</c->orientation: landscape<c- p>)</c-> <c- p>{</c->
    <c- k>grid-auto-flow</c-><c- p>:</c-> column<c- p>;</c->

    <c- n>@media</c-> <c- p>(</c->min-width > <c- m>1024</c-><c- k>px</c-><c- p>)</c-> <c- p>{</c->
      <c- k>max-inline-size</c-><c- p>:</c-> <c- m>1024</c-><c- k>px</c-><c- p>;</c-> 
    <c- p>}</c-> 
  <c- p>}</c-> 
<c- p>}</c-> 

<c- c>/* 等同于 */</c-> 
<c- c>  .foo { display: grid; }</c-> 

<c- c>  @media (orientation: landscape) {</c-> 
<c- c>    .foo {</c-> 
<c- c>      grid-auto-flow: column;</c-> 
<c- c>    }</c-> 
<c- c>  }</c-> 

<c- c>  @media (orientation: landscape) and (min-width > 1024px) {</c-> 
<c- c>    .foo {</c-> 
<c- c>      max-inline-size: 1024px;</c-> 
<c- c>    }</c-> 
<c- c>  }</c-> 
<c- c>*/</c-> 

<b><c- c>/* 层叠层嵌套示例 */</c-></b> 
html <c- p>{</c-> 
  <c- n>@layer</c-> base <c- p>{</c-> 
    <c- k>block-size</c-><c- p>:</c-> <c- m>100</c-><c- k>%</c-><c- p>;</c-> 

    <c- n>@layer</c-> support <c- p>{</c-> 
      &amp; body <c- p>{</c-> 
        <c- k>min-block-size</c-><c- p>:</c-> <c- m>100</c-><c- k>%</c-><c- p>;</c-> 
      <c- p>}</c-> 
    <c- p>}</c-> 
  <c- p>}</c-> 
<c- p>}</c-> 
<c- c>/* 等同于 */</c-> 
<c- c>  @layer base {</c-> 
<c- c>    html { block-size: 100%; }</c-> 
<c- c>  }</c-> 
<c- c>  @layer base.support {</c-> 
<c- c>    html body { min-block-size: 100%; }</c-> 
<c- c>  }</c-> 
<c- c>*/</c-> 

<b><c- c>/* Scoping 嵌套示例 */</c-></b> 
.card <c- p>{</c-> 
  <c- k>inline-size</c-><c- p>:</c-> <c- m>40</c-><c- k>ch</c-><c- p>;</c-> 
  <c- k>aspect-ratio</c-><c- p>:</c-> <c- m>3</c->/<c- m>4</c-><c- p>;</c-> 

  <c- n>@scope</c-> <c- p>(</c->&amp;<c- p>)</c-> <c- p>{</c-> 
    :scope <c- p>{</c-> 
      <c- k>border</c-><c- p>:</c-> <c- m>1</c-><c- k>px</c-> solid white<c- p>;</c-> 
    <c- p>}</c-> 
  <c- p>}</c-> 
<c- p>}</c-> 

<c- c>/* 等同于 */</c-> 
<c- c>  .card { inline-size: 40ch; aspect-ratio: 3/4; }</c-> 
<c- c>  @scope (.card) {</c-> 
<c- c>    :scope { border-block-end: 1px solid white; }</c-> 
<c- c>  }</c-> 
<c- c>*/</c-> 
</pre>
        </div>
        <p>所有直接嵌套的属性都被视为
            仿佛它们是一起收集的，并按顺序嵌套在一个具有选择器<a class="css" data-link-type="maybe" href="#selectordef-"
                id="ref-for-selectordef-">&amp;</a>的<a data-link-type="dfn" href="#nested-style-rule"
                id="ref-for-nested-style-rule⑨">嵌套样式规则</a>中，
            并放在所有其他子规则之前。
            这在 OM 中也是如此。
            （也就是说，
            <code class="idl"><a data-link-type="idl">childRules</a></code>属性实际上是从这个
            <span id="ref-for-nested-style-rule①⓪">嵌套样式规则</span>开始的，
            它包含所有直接嵌套的属性。）
        </p>
        <div class="example" id="example-6f271ab7">
            <a class="self-link" href="#example-6f271ab7"></a>
            <p>例如，前面的例子：</p>
            <pre class="highlight">.foo <c- p>{</c-> 
  <c- k>display</c-><c- p>:</c-> grid<c- p>;</c-> 

  <c- n>@media</c-> <c- p>(</c->orientation: landscape<c- p>)</c-> <c- p>{</c-> 
    <c- k>grid-auto-flow</c-><c- p>:</c-> column<c- p>;</c-> 
  <c- p>}</c-> 
<c- p>}</c-> 
<c- c>/* 等同于 */</c-> 
<c- c>  .foo {</c-> 
<c- c>    display: grid;</c-> 

<c- c>    @media (orientation: landscape) {</c-> 
<c- c>      &amp; {</c-> 
<c- c>        grid-auto-flow: column;</c-> 
<c- c>      }</c-> 
<c- c>    }</c-> 
<c- c>  }</c-> 
<c- c>*/</c-> 
</pre>
            <p>实际上是<em>完全</em>等价的，
                产生了完全相同的 CSSOM 结构。
                <code
                    class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-conditional-3/#cssmediarule" id="ref-for-cssmediarule">CSSMediaRule</a></code>
                对象
                的<code
                    class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/cssom-1/#cssstylerule" id="ref-for-cssstylerule">CSSStyleRule</a></code>
                对象
                将在其<code class="highlight"><c- p>.</c->childRules</code>属性中包含一个对象，
                其中包含<a class="property css" data-link-type="property"
                    href="https://www.w3.org/TR/css-grid-2/#propdef-grid-auto-flow"
                    id="ref-for-propdef-grid-auto-flow">grid-auto-flow</a>属性。
            </p>
        </div>
        <p class="note" role="note"><span class="marker">注意：</span>这确实意味着此类规则的序列化将与原始编写方式不同，
            序列化时<em>没有</em>直接嵌套的属性。</p>
        <h4 class="heading settled" data-level="2.2.1" id="nesting-at-scope"><span class="secno">2.2.1. </span><span
                class="content">嵌套 <a class="css" data-link-type="maybe"
                    href="https://www.w3.org/TR/css-cascade-6/#at-ruledef-scope"
                    id="ref-for-at-ruledef-scope①">@scope</a> 规则</span><a class="self-link"
                href="#nesting-at-scope"></a></h4>
        <p>当<a class="css" data-link-type="maybe" href="https://www.w3.org/TR/css-cascade-6/#at-ruledef-scope"
                id="ref-for-at-ruledef-scope②">@scope</a>规则是<a data-link-type="dfn" href="#nested-group-rules"
                id="ref-for-nested-group-rules③">嵌套组规则</a>时，
            <a class="css" data-link-type="maybe" href="#selectordef-" id="ref-for-selectordef-①">&amp;</a> 在<a
                class="production css" data-link-type="type"
                href="https://www.w3.org/TR/css-cascade-6/#typedef-scope-start"
                id="ref-for-typedef-scope-start">&lt;scope-start></a>选择器中
            指代由最近的父样式规则匹配的元素。
        </p>
        <p>在其主体中的样式规则以及它自己的<a class="production css" data-link-type="type"
                href="https://www.w3.org/TR/css-cascade-6/#typedef-scope-end"
                id="ref-for-typedef-scope-end">&lt;scope-end></a>选择器的目的上，
            <a class="css" data-link-type="maybe" href="https://www.w3.org/TR/css-cascade-6/#at-ruledef-scope"
                id="ref-for-at-ruledef-scope③">@scope</a>规则被视为父样式规则，
            匹配由其<a class="production css" data-link-type="type"
                href="https://www.w3.org/TR/css-cascade-6/#typedef-scope-start"
                id="ref-for-typedef-scope-start①">&lt;scope-start></a>选择器匹配的元素。
        </p>
        <div class="example" id="example-792b81d1">
            <a class="self-link" href="#example-792b81d1"></a> 即，以下代码：
            <pre class="highlight">.parent <c- p>{</c->
  <c- k>color</c-><c- p>:</c-> blue<c- p>;</c->

  <c- n>@scope</c-> <c- p>(</c->&amp; > .scope<c- p>)</c-> to <c- p>(</c->&amp; .limit<c- p>)</c-> <c- p>{</c->
    &amp; .content <c- p>{</c->
      <c- k>color</c-><c- p>:</c-> red<c- p>;</c->
    <c- p>}</c->
  <c- p>}</c->
<c- p>}</c->
</pre>
            <p>等同于：</p>
            <pre class="highlight">.parent <c- p>{</c-> <c- k>color</c-><c- p>:</c-> blue<c- p>;</c-> <c- p>}</c->
<c- n>@scope</c-> <c- p>(</c->.parent > .scope<c- p>)</c-> to <c- p>(</c->.parent > .scope .limit<c- p>)</c-> <c- p>{</c->
  .parent > .scope .content <c- p>{</c->
    <c- k>color</c-><c- p>:</c-> red<c- p>;</c->
  <c- p>}</c->
<c- p>}</c->
</pre>
        </div>
        <h3 class="heading settled" data-level="2.3" id="mixing"><span class="secno">2.3. </span><span
                class="content">混合嵌套规则与声明</span><a class="self-link" href="#mixing"></a>
        </h3>
        <p>当样式规则同时包含声明
            和<a data-link-type="dfn" href="#nested-style-rule" id="ref-for-nested-style-rule①①">嵌套样式规则</a>或<a
                data-link-type="dfn" href="https://www.w3.org/TR/css-nesting-1/#nested-conditional-group-rules"
                id="ref-for-nested-conditional-group-rules">嵌套条件组规则</a>时，
            这三者可以任意混合。
            然而，声明和其他规则的相对顺序不会以任何方式保留。</p>
        <div class="example" id="example-ee2b228d">
            <a class="self-link" href="#example-ee2b228d"></a> 例如，
            在以下代码中：
            <pre class="lang-css highlight">article <c- p>{</c->
  <c- k>color</c-><c- p>:</c-> green<c- p>;</c->
  &amp; <c- p>{</c-> <c- k>color</c-><c- p>:</c-> blue<c- p>;</c-> <c- p>}</c->
  color: red<c- p>;</c-> 
<c- p>}</c->

<c- c>/* 等同于 */</c-> 
article <c- p>{</c-> 
  <c- k>color</c-><c- p>:</c-> green<c- p>;</c-> 
  <c- k>color</c-><c- p>:</c-> red<c- p>;</c-> 
  &amp; <c- p>{</c-> <c- k>color</c-><c- p>:</c-> blue<c- p>;</c-> <c- p>}</c-> 
<c- p>}</c-> 
</pre>
        </div>
        <p>为了确定<a href="https://www.w3.org/TR/css-cascade-4/#cascade-sort">外观顺序</a>，
            <a data-link-type="dfn" href="#nested-style-rule" id="ref-for-nested-style-rule①②">嵌套样式规则</a>和<a
                data-link-type="dfn" href="https://www.w3.org/TR/css-nesting-1/#nested-conditional-group-rules"
                id="ref-for-nested-conditional-group-rules①">嵌套条件组规则</a>被认为
            <em>在</em>其父规则之后出现。
        </p>
        <div>
            例如：
            <pre class="lang-css highlight">article <c- p>{</c->
  <c- k>color</c-><c- p>:</c-> blue<c- p>;</c-> 
  &amp; <c- p>{</c-> <c- k>color</c-><c- p>:</c-> red<c- p>;</c-> <c- p>}</c-> 
<c- p>}</c-> 
</pre>
            <p>两个声明具有相同的特异性（0,0,1），
                但嵌套规则被认为<em>在</em>其父规则之后出现，
                因此<a class="css" data-link-type="propdesc" href="https://www.w3.org/TR/css-color-4/#propdef-color"
                    id="ref-for-propdef-color①">color: red</a>声明赢得了层叠。</p>
            <p>另一方面，在此示例中：</p>
            <pre class="lang-css highlight">article <c- p>{</c-> 
  <c- k>color</c-><c- p>:</c-> blue<c- p>;</c-> 
  <c- nf>:where</c-><c- p>(</c->&amp;<c- p>)</c-> <c- p>{</c-> <c- k>color</c-><c- p>:</c-> red<c- p>;</c-> <c- p>}</c-> 
<c- p>}</c-> 
</pre>
            <p><a class="css" data-link-type="maybe" href="https://www.w3.org/TR/selectors-4/#where-pseudo"
                    id="ref-for-where-pseudo">:where()</a>伪类将嵌套选择器的特异性降低为 0，
                因此<a class="css" data-link-type="propdesc" href="https://www.w3.org/TR/css-color-4/#propdef-color"
                    id="ref-for-propdef-color②">color: red</a>声明的特异性变为（0,0,0），
                并在“外观顺序”被考虑之前输给了<span class="css" id="ref-for-propdef-color③">color: blue</span>声明。</p>
        </div>
        <p class="note" role="note"><span class="marker">注意：</span>虽然可以自由地混合声明和嵌套规则，
            但这样做的可读性较差且有些混乱，
            因为所有属性<em>表现得像</em>它们出现在所有规则之前。
            为了可读性，
            建议作者在样式规则中先放置所有属性，
            再放嵌套规则。
            （这在旧版用户代理中表现稍好一点；
            由于解析和错误恢复工作的具体细节，
            出现在嵌套规则之后的属性可能会被跳过。）</p>
        <p class="note" role="note"><span class="marker">注意：</span>与其他类型的规则一样，
            在存在嵌套的情况下，样式规则的序列化
            可能与它们最初的编写方式不同。
            值得注意的是，所有直接嵌套的属性
            都会在任何嵌套规则之前被序列化，
            这是另一个将属性写在规则之前的原因。</p>
        <h2 class="heading settled" data-level="3" id="nest-selector"><span class="secno">3. </span><span
                class="content">嵌套选择器：<a class="css" data-link-type="maybe" href="#selectordef-"
                    id="ref-for-selectordef-②">&amp;</a> 选择器</span><a class="self-link" href="#nest-selector"></a>
        </h2>
        <p>使用<a data-link-type="dfn" href="#nested-style-rule" id="ref-for-nested-style-rule①③">嵌套样式规则</a>时，
            必须能够引用父规则匹配的元素；
            毕竟，这正是<em>嵌套的全部意义</em>。
            为了实现这一点，
            本规范定义了一个新的选择器，
            即<dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="nesting-selector">嵌套选择器</dfn>，
            书写为<dfn class="dfn-paneled css" data-dfn-type="selector" data-export id="selectordef-">&amp;</dfn>
            （U+0026 AMPERSAND）。</p>
        <p>在<a data-link-type="dfn" href="#nested-style-rule" id="ref-for-nested-style-rule①④">嵌套样式规则</a>的选择器中使用时，
            <a data-link-type="dfn" href="#nesting-selector" id="ref-for-nesting-selector⑤">嵌套选择器</a>
            表示父规则匹配的元素。
            在其他任何上下文中使用时，
            它表示与该上下文中的<a class="css" data-link-type="maybe" href="https://www.w3.org/TR/selectors-4/#scope-pseudo"
                id="ref-for-scope-pseudo">:scope</a>相同的元素
            （除非另有定义）。
        </p>
        <div class="note" role="note">
            <a data-link-type="dfn" href="#nesting-selector"
                id="ref-for-nesting-selector⑥">嵌套选择器</a>可以通过将其替换为父样式规则的选择器来简化，
            并包裹在<a class="css" data-link-type="maybe" href="https://www.w3.org/TR/selectors-4/#matches-pseudo"
                id="ref-for-matches-pseudo">:is()</a>选择器中。
            例如，
            <pre class="lang-css highlight">a<c- p>,</c-> b <c- p>{</c-> 
  &amp; c <c- p>{</c-> <c- k>color</c-><c- p>:</c-> blue<c- p>;</c-> <c- p>}</c-> 
<c- p>}</c-> 
</pre>
            <p>等同于</p>
            <pre class="lang-css highlight"><c- nf>:is</c-><c- p>(</c->a<c- p>,</c-> b<c- p>)</c-> c <c- p>{</c-> <c- k>color</c-><c- p>:</c-> blue<c- p>;</c-> <c- p>}</c-> 
</pre>
        </div>
        <p><a data-link-type="dfn" href="#nesting-selector" id="ref-for-nesting-selector⑦">嵌套选择器</a>
            不能表示伪元素
            （与<a class="css" data-link-type="maybe" href="https://www.w3.org/TR/selectors-4/#matches-pseudo"
                id="ref-for-matches-pseudo①">:is()</a>伪类的行为相同）。</p>
        <div class="example" id="example-7145ff1e">
            <a class="self-link" href="#example-7145ff1e"></a> 例如，在以下样式规则中：
            <pre class="lang-css highlight">.foo<c- p>,</c-> .foo::before<c- p>,</c-> .foo::after <c- p>{</c-> 
  <c- k>color</c-><c- p>:</c-> red<c- p>;</c-> 

  &amp;:hover <c- p>{</c-> <c- k>color</c-><c- p>:</c-> blue<c- p>;</c-> <c- p>}</c-> 
<c- p>}</c-> 
</pre>
            <p><a class="css" data-link-type="maybe" href="#selectordef-" id="ref-for-selectordef-③">&amp;</a> 仅代表<span
                    class="css">.foo</span>匹配的元素；
                换句话说，它相当于：</p>
            <pre class="lang-css highlight">.foo<c- p>,</c-> .foo::before<c- p>,</c-> .foo::after <c- p>{</c-> 
  <c- k>color</c-><c- p>:</c-> red<c- p>;</c-> 
<c- p>}</c-> 
.foo:hover <c- p>{</c-> 
  <c- k>color</c-><c- p>:</c-> blue<c- p>;</c-> 
<c- p>}</c-> 
</pre>
        </div>
        <p class="issue" id="issue-62c479a8"><a class="self-link" href="#issue-62c479a8"></a> 我们希望放宽此限制，
            但需要同时为<a class="css" data-link-type="maybe" href="https://www.w3.org/TR/selectors-4/#matches-pseudo"
                id="ref-for-matches-pseudo②">:is()</a>和<a class="css" data-link-type="maybe" href="#selectordef-"
                id="ref-for-selectordef-④">&amp;</a>放宽，
            因为它们是基于相同的基础机制构建的。
            （<a href="https://github.com/w3c/csswg-drafts/issues/7433">Issue 7433</a>）</p>
        <p><a data-link-type="dfn" href="https://www.w3.org/TR/selectors-4/#specificity"
                id="ref-for-specificity">特异性</a>对于<a data-link-type="dfn" href="#nesting-selector"
                id="ref-for-nesting-selector⑧">嵌套选择器</a>等于父样式规则选择器列表中复合选择器的最大特异性
            （与<a class="css" data-link-type="maybe" href="https://www.w3.org/TR/selectors-4/#matches-pseudo"
                id="ref-for-matches-pseudo③">:is()</a>的行为相同）。</p>
        <div class="example" id="example-a71fa710">
            <a class="self-link" href="#example-a71fa710"></a> 例如，给定以下样式规则：
            <pre class="lang-css highlight">#a<c- p>,</c-> b <c- p>{</c-> 
  &amp; c <c- p>{</c-> <c- k>color</c-><c- p>:</c-> blue<c- p>;</c-> <c- p>}</c-> 
<c- p>}</c-> 
.foo c <c- p>{</c-> <c- k>color</c-><c- p>:</c-> red<c- p>;</c-> <c- p>}</c-> 
</pre>
            <p>然后在如下的 DOM 结构中</p>
            <pre class="lang-html highlight"><c- p>&lt;</c-><c- f>b</c-> <c- e>class</c-><c- o>=</c-><c- s>foo</c-><c- p>></c-> 
  <c- p>&lt;</c-><c- f>c</c-><c- p>></c->蓝色文本<c- p>&lt;/</c-><c- f>c</c-><c- p>></c-> 
<c- p>&lt;/</c-><c- f>b</c-><c- p>></c-> 
</pre>
            <p>文本将是蓝色，而不是红色。
                <a class="css" data-link-type="maybe" href="#selectordef-"
                    id="ref-for-selectordef-⑤">&amp;</a>的特异性是<span class="css">#a</span>的特异性（[1,0,0]）
                和<span class="css">b</span>的特异性（[0,0,1]）中较大的一个，
                因此是[1,0,0]，
                整个<span class="css">&amp; c</span>选择器的特异性为[1,0,1]，
                这大于<span class="css">.foo c</span>的特异性（[0,1,1]）。
            </p>
            <p>值得注意的是，这与手动展开嵌套为非嵌套规则时得到的结果<em>不同</em>，
                因为<a class="css" data-link-type="propdesc" href="https://www.w3.org/TR/css-color-4/#propdef-color"
                    id="ref-for-propdef-color④">color: blue</a>
                声明将因<span class="css">b c</span>选择器（[0,0,2]）
                而匹配，而不是<span class="css">#a c</span>（[1,0,1]）。</p>
        </div>
        <details class="note">
            <summary>为什么特异性与非嵌套规则不同？</summary>
            <p><a data-link-type="dfn" href="#nesting-selector" id="ref-for-nesting-selector⑨">嵌套选择器</a>
                有意使用与<a class="css" data-link-type="maybe" href="https://www.w3.org/TR/selectors-4/#matches-pseudo"
                    id="ref-for-matches-pseudo④">:is()</a>伪类相同的特异性规则，
                它只使用其参数中的最大特异性，
                而不是跟踪<em>实际匹配</em>的选择器。</p>
            <p>这对于性能来说是必要的；
                如果一个选择器有多个可能的特异性，
                取决于它是如何精确匹配的，
                这会使选择器匹配变得更加复杂和缓慢。</p>
            <p>不过，这回避了问题：
                为什么我们要以<a class="css" data-link-type="maybe" href="#selectordef-"
                    id="ref-for-selectordef-⑥">&amp;</a>的方式定义<a class="css" data-link-type="maybe"
                    href="https://www.w3.org/TR/selectors-4/#matches-pseudo" id="ref-for-matches-pseudo⑤">:is()</a>？
                一些非浏览器的类似嵌套功能的实现
                并没有简化为<span class="css" id="ref-for-matches-pseudo⑥">:is()</span>，
                主要是因为它们在<span class="css" id="ref-for-matches-pseudo⑦">:is()</span>引入之前。
                相反，它们直接简化；
                然而，这带来了自己的<em>重大</em>问题，
                因为一些（相当常见的）情况会意外地产生<em>巨大的</em>选择器，
                由于可能性的指数级爆炸。</p>
            <pre class="lang-css highlight">.a1<c- p>,</c-> .a2<c- p>,</c-> .a3 <c- p>{</c-> 
  .b1<c- p>,</c-> .b3<c- p>,</c-> .b3 <c- p>{</c-> 
    .c1<c- p>,</c-> .c2<c- p>,</c-> .c3 <c- p>{</c-> 
      ...<c- p>;</c-> 
    <c- p>}</c-> 
  <c- p>}</c-> 
<c- p>}</c-> 

<c- c>/* 直接简化为 */</c-> 
.a1 .b1 .c1<c- p>,</c-> 
.a1 .b1 .c2<c- p>,</c-> 
.a1 .b1 .c3<c- p>,</c-> 
.a1 .b2 .c1<c- p>,</c-> 
.a1 .b2 .c2<c- p>,</c-> 
.a1 .b2 .c3<c- p>,</c-> 
.a1 .b3 .c1<c- p>,</c-> 
.a1 .b3 .c2<c- p>,</c-> 
.a1 .b3 .c3<c- p>,</c-> 
.a2 .b1 .c1<c- p>,</c-> 
.a2 .b1 .c2<c- p>,</c-> 
.a2 .b1 .c3<c- p>,</c-> 
.a2 .b2 .c1<c- p>,</c-> 
.a2 .b2 .c2<c- p>,</c-> 
.a2 .b2 .c3<c- p>,</c-> 
.a2 .b3 .c1<c- p>,</c-> 
.a2 .b3 .c2<c- p>,</c-> 
.a2 .b3 .c3<c- p>,</c-> 
.a3 .b1 .c1<c- p>,</c-> 
.a3 .b1 .c2<c- p>,</c-> 
.a3 .b1 .c3<c- p>,</c-> 
.a3 .b2 .c1<c- p>,</c-> 
.a3 .b2 .c2<c- p>,</c-> 
.a3 .b2 .c3<c- p>,</c-> 
.a3 .b3 .c1<c- p>,</c-> 
.a3 .b3 .c2<c- p>,</c-> 
.a3 .b3 .c3 <c- p>{</c->...<c- p>}</c-> 
</pre>
            <p>在这里，三个级别的嵌套，
                每个列表中有三个选择器，
                产生了27个简化后的选择器。
                向列表中添加更多选择器，
                增加更多的嵌套层次，
                或使嵌套规则更复杂
                可能会使相对较小的规则
                扩展为多兆字节的选择器
                （或更多！）。</p>
            <p>一些 CSS 工具通过启发式丢弃某些变体
                来避免这种问题，
                这样它们就不必输出那么多，
                但仍然<em>可能</em>是正确的，
                但这不是用户代理可用的选项。</p>
            <p>通过使用<a class="css" data-link-type="maybe" href="https://www.w3.org/TR/selectors-4/#matches-pseudo"
                    id="ref-for-matches-pseudo⑧">:is()</a>
                进行简化完全消除了这个问题，
                代价是使特异性稍微有些没用，
                这被认为是一个合理的权衡。</p>
        </details>
        <p><a data-link-type="dfn" href="#nesting-selector" id="ref-for-nesting-selector①⓪">嵌套选择器</a>
            允许出现在<a data-link-type="dfn" href="https://www.w3.org/TR/selectors-4/#compound"
                id="ref-for-compound">复合选择器</a>中的任何位置，
            甚至可以在<a data-link-type="dfn" href="https://www.w3.org/TR/selectors-4/#type-selector"
                id="ref-for-type-selector①">类型选择器</a>之前，
            这违反了复合选择器中的正常排序限制。</p>
        <div class="example" id="example-3d40c7b0">
            <a class="self-link" href="#example-3d40c7b0"></a> 例如，<span class="css">&amp;div</span>是一个有效的嵌套选择器，
            意思是“无论父规则匹配什么，
            但只有它也是一个
            <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/grouping-content.html#the-div-element" id="ref-for-the-div-element">div</a></code>
            元素”。
            <p>它也可以写为<span class="css">div&amp;</span>，含义相同，
                但这不能作为<a data-link-type="dfn" href="#nested-style-rule"
                    id="ref-for-nested-style-rule①⑤">嵌套样式规则</a>的开头（但可以用于选择器中的其他地方）。</p>
        </div>
        <h2 class="heading settled" data-level="4" id="cssom"><span class="secno">4. </span><span
                class="content">CSSOM</span><a class="self-link" href="#cssom"></a></h2>
        <h3 class="heading settled" data-level="4.1" id="cssom-style"><span class="secno">4.1. </span><span
                class="content">对<code
                    class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/cssom-1/#cssstylerule" id="ref-for-cssstylerule①">CSSStyleRule</a></code>的修改</span><a
                class="self-link" href="#cssom-style"></a></h3>
        <p>CSS 样式规则现在可以包含嵌套规则：</p>
        <pre class="idl highlight def"><c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://www.w3.org/TR/cssom-1/#cssstylerule" id="ref-for-cssstylerule②"><c- g>CSSStyleRule</c-></a> {
  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject" id="ref-for-SameObject"><c- g>SameObject</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://www.w3.org/TR/cssom-1/#cssrulelist" id="ref-for-cssrulelist"><c- n>CSSRuleList</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="CSSRuleList" href="#dom-cssstylerule-cssrules" id="ref-for-dom-cssstylerule-cssrules"><c- g>cssRules</c-></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long" id="ref-for-idl-unsigned-long"><c- b>unsigned</c-> <c- b>long</c-></a> <a class="idl-code" data-link-type="method" href="#dom-cssstylerule-insertrule" id="ref-for-dom-cssstylerule-insertrule"><c- g>insertRule</c-></a>(<a data-link-type="idl-name" href="https://www.w3.org/TR/cssom-1/#cssomstring" id="ref-for-cssomstring"><c- n>CSSOMString</c-></a> <dfn class="idl-code" data-dfn-for="CSSStyleRule/insertRule(rule, index), CSSStyleRule/insertRule(rule)" data-dfn-type="argument" data-export id="dom-cssstylerule-insertrule-rule-index-rule"><code><c- g>rule</c-></code><a class="self-link" href="#dom-cssstylerule-insertrule-rule-index-rule"></a></dfn>, <c- b>optional</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long" id="ref-for-idl-unsigned-long①"><c- b>unsigned</c-> <c- b>long</c-></a> <dfn class="idl-code" data-dfn-for="CSSStyleRule/insertRule(rule, index), CSSStyleRule/insertRule(rule)" data-dfn-type="argument" data-export id="dom-cssstylerule-insertrule-rule-index-index"><code><c- g>index</c-></code><a class="self-link" href="#dom-cssstylerule-insertrule-rule-index-index"></a></dfn> = 0);
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-cssstylerule-deleterule" id="ref-for-dom-cssstylerule-deleterule"><c- g>deleteRule</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long" id="ref-for-idl-unsigned-long②"><c- b>unsigned</c-> <c- b>long</c-></a> <dfn class="idl-code" data-dfn-for="CSSStyleRule/deleteRule(index)" data-dfn-type="argument" data-export id="dom-cssstylerule-deleterule-index-index"><code><c- g>index</c-></code><a class="self-link" href="#dom-cssstylerule-deleterule-index-index"></a></dfn>);
};
</pre>
        <p><dfn class="dfn-paneled idl-code" data-dfn-for="CSSStyleRule" data-dfn-type="attribute" data-export
                id="dom-cssstylerule-cssrules"><code>cssRules</code></dfn>属性
            必须返回一个 <code
                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/cssom-1/#cssrulelist" id="ref-for-cssrulelist①">CSSRuleList</a></code>
            对象用于<a data-link-type="dfn" href="https://www.w3.org/TR/cssom-1/#concept-css-rule-child-css-rules"
                id="ref-for-concept-css-rule-child-css-rules">子 CSS 规则</a>。</p>
        <p><dfn class="dfn-paneled idl-code" data-dfn-for="CSSStyleRule" data-dfn-type="method" data-export
                data-lt="insertRule(rule, index)|insertRule(rule)"
                id="dom-cssstylerule-insertrule"><code>insertRule(<var>rule</var>, <var>index</var>)</code></dfn>方法
            必须返回调用<a data-link-type="dfn" href="https://www.w3.org/TR/cssom-1/#insert-a-css-rule"
                id="ref-for-insert-a-css-rule">插入 CSS 规则</a>的结果，将<var>rule</var>插入到<a data-link-type="dfn"
                href="https://www.w3.org/TR/cssom-1/#concept-css-rule-child-css-rules"
                id="ref-for-concept-css-rule-child-css-rules①">子 CSS 规则</a>中的<var>index</var>位置。</p>
        <p><dfn class="dfn-paneled idl-code" data-dfn-for="CSSStyleRule" data-dfn-type="method" data-export
                id="dom-cssstylerule-deleterule"><code>deleteRule(<var>index</var>)</code></dfn>方法
            必须从<a data-link-type="dfn" href="https://www.w3.org/TR/cssom-1/#concept-css-rule-child-css-rules"
                id="ref-for-concept-css-rule-child-css-rules②">子 CSS 规则</a>中移除<var>index</var>位置的 CSS 规则，<a
                data-link-type="dfn" href="https://www.w3.org/TR/cssom-1/#remove-a-css-rule"
                id="ref-for-remove-a-css-rule">移除 CSS 规则</a>。</p>
        <p class="note" role="note"><span class="marker">注意：</span> 带有嵌套规则的<code
                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/cssom-1/#cssstylerule" id="ref-for-cssstylerule③">CSSStyleRule</a></code>
            的序列化
            已由<a data-link-type="biblio" href="#biblio-cssom" title="CSS 对象模型（CSSOM）">[CSSOM]</a>很好地定义，
            通过<a data-link-type="dfn" href="https://www.w3.org/TR/cssom-1/#serialize-a-css-rule"
                id="ref-for-serialize-a-css-rule">序列化 CSS 规则</a>。</p>
        <p class="note" role="note"><span class="marker">注意：</span> 在<a data-link-type="dfn" href="#nested-style-rule"
                id="ref-for-nested-style-rule①⑥">嵌套样式规则</a>选择器可以以什么开头的限制
            在插入 CSS 规则步骤 5 中被视为“CSS 施加的约束”
            （当调用<a data-link-type="dfn" href="https://www.w3.org/TR/cssom-1/#insert-a-css-rule"
                id="ref-for-insert-a-css-rule①">插入 CSS 规则</a>时适用，不仅仅是<code
                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/cssom-1/#cssstylerule" id="ref-for-cssstylerule④">CSSStyleRule</a></code>
            本身）。</p>
        <p>当设置<code
                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/cssom-1/#dom-cssstylerule-selectortext" id="ref-for-dom-cssstylerule-selectortext">selectorText</a></code>时，
            如果<code
                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/cssom-1/#cssstylerule" id="ref-for-cssstylerule⑤">CSSStyleRule</a></code>
            是<a data-link-type="dfn" href="#nested-style-rule" id="ref-for-nested-style-rule①⑧">嵌套样式规则</a>，
            且返回的选择器组
            以选择器开头，该选择器以标识符或函数 token 开头，
            则不执行任何操作并返回。</p>
        <p class="issue" id="issue-bc4d708a"><a class="self-link" href="#issue-bc4d708a"></a> 上述段落将内联到 CSSOM 算法中，
            而不是被猴子补丁。</p>
    </main>
    <h2 class="no-ref no-num heading settled" id="w3c-conformance"><span class="content">符合性</span><a class="self-link"
            href="#w3c-conformance"></a></h2>
    <h3 class="no-ref heading settled" id="w3c-conventions"><span class="content">文档约定</span><a class="self-link"
            href="#w3c-conventions"></a></h3>
    <p>符合性要求使用描述性断言和 RFC 2119 术语的组合表达。“必须（MUST）”、“不得（MUST NOT）”、“要求（REQUIRED）”、“应当（SHALL）”、“不应当（SHALL
        NOT）”、“应该（SHOULD）”、“不应该（SHOULD NOT）”、“建议（RECOMMENDED）”、“可以（MAY）”和“可选（OPTIONAL）”这些关键字在本文件的规范部分应按照 RFC 2119
        中的解释进行理解。为了易读性，这些词在本规范中不全部大写。</p>
    <p>除明确标记为非规范性的部分、示例和注释外，本规范的所有文本都是规范性的。<a data-link-type="biblio" href="#biblio-rfc2119"
            title="Key words for use in RFCs to Indicate Requirement Levels">[RFC2119]</a></p>
    <p>本规范中的示例以“例如”一词引入，或通过 <code>class="example"</code> 与规范文本分开，如下所示：</p>
    <div class="example" id="w3c-example">
        <a class="self-link" href="#w3c-example"></a>
        <p>这是一个信息性示例。</p>
    </div>
    <p>信息性注释以“注释”一词开头，并通过 <code>class="note"</code> 与规范文本分开，如下所示：</p>
    <p class="note" role="note">注释：这是一个信息性注释。</p>
    <p>建议部分是规范性部分，以引起特别注意为目的，并通过 <code>&lt;strong class="advisement"></code> 与其他规范性文本分开，如下所示：<strong class="advisement">
            UA 必须提供可访问的替代方案。</strong></p>
    <h3 class="no-ref heading settled" id="w3c-conformance-classes"><span class="content">符合性类别</span><a
            class="self-link" href="#w3c-conformance-classes"></a></h3>
    <p>对本规范的符合性
        定义为三个符合性类别：</p>
    <dl>
        <dt>样式表
        <dd><a href="https://www.w3.org/TR/CSS21/conform.html#style-sheet">CSS
                样式表</a>。
        <dt>渲染器
        <dd><a href="https://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a>，解释样式表的语义并渲染使用它们的文档。
        <dt>创作工具
        <dd><a href="https://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a>，用于编写样式表的工具。
    </dl>
    <p>如果样式表中使用的所有语法语句都根据本模块定义的通用 CSS 语法和每个功能定义的单个语法有效，则该样式表符合本规范。</p>
    <p>如果渲染器除了按照适当的规范解释样式表外，还能通过正确解析它们并相应地渲染文档来支持本规范定义的所有功能，则该渲染器符合本规范。然而，因设备限制导致 UA 无法正确渲染文档并不会使 UA 不符合规范。（例如，UA
        不要求在单色显示器上渲染颜色。）</p>
    <p>如果创作工具编写的样式表在语法上符合通用 CSS 语法和本模块中每个功能的单个语法，并且满足本模块中描述的样式表的所有其他符合性要求，则该创作工具符合本规范。</p>
    <h3 class="no-ref heading settled" id="w3c-partial"><span class="content">部分实现</span><a class="self-link"
            href="#w3c-partial"></a></h3>
    <p>为了让作者利用前向兼容的解析规则来分配回退值，CSS 渲染器<strong>必须</strong>将任何不支持的 at 规则、属性、属性值、关键字和其他语法结构视为无效，并根据需要<a
            href="https://www.w3.org/TR/CSS21/conform.html#ignore">忽略</a>。特别是，用户代理<strong>不得</strong>在一个多值属性声明中选择性忽略不支持的值并保留支持的值：如果任何值被视为无效（因为不支持的值必须被视为无效），CSS
        要求忽略整个声明。</p>
    <h4 class="heading settled" id="w3c-conform-future-proofing"><span class="content">不稳定和专有功能的实现</span><a
            class="self-link" href="#w3c-conform-future-proofing"></a></h4>
    <p>为了避免与未来稳定的 CSS 功能发生冲突，CSSWG 建议<a href="https://www.w3.org/TR/CSS/#future-proofing">遵循最佳实践</a>，以实现<a
            href="https://www.w3.org/TR/CSS/#unstable">不稳定</a>的功能和 CSS 的<a
            href="https://www.w3.org/TR/CSS/#proprietary-extension">专有扩展</a>。</p>
    <h3 class="no-ref heading settled" id="w3c-testing"><span class="content">非实验性实现</span><a class="self-link"
            href="#w3c-testing"></a></h3>
    <p>一旦规范达到候选推荐阶段，非实验性实现是可能的，实施者应发布任何 CR 级别功能的未加前缀的实现，只要他们能够证明根据规范正确实现。</p>
    <p>为了建立和维护 CSS 在不同实现之间的互操作性，CSS 工作组要求非实验性 CSS 渲染器在发布任何 CSS 功能的未加前缀实现之前，向 W3C 提交实现报告（如果必要，还应提交用于该实现报告的测试用例）。提交给 W3C
        的测试用例将由 CSS 工作组进行审核和修正。</p>
    <p>有关提交测试用例和实现报告的更多信息，可以在 CSS 工作组网站上找到，地址为 <a
            href="https://www.w3.org/Style/CSS/Test/">https://www.w3.org/Style/CSS/Test/</a>。问题应发送到 <a
            href="https://lists.w3.org/Archives/Public/public-css-testsuite">public-css-testsuite@w3.org</a> 邮件列表。</p>
    <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
    <h2 class="no-num no-ref heading settled" id="index"><span class="content">索引</span><a class="self-link"
            href="#index"></a></h2>
    <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">本规范定义的术语</span><a
            class="self-link" href="#index-defined-here"></a></h3>
    <ul class="index">
        <li><a href="#selectordef-">&amp;</a><span>，见 § 3</span>
        <li><a href="#dom-cssstylerule-cssrules">cssRules</a><span>，见 § 4.1</span>
        <li><a href="#dom-cssstylerule-deleterule">deleteRule(index)</a><span>，见 § 4.1</span>
        <li><a href="#dom-cssstylerule-insertrule">insertRule(rule)</a><span>，见 § 4.1</span>
        <li><a href="#dom-cssstylerule-insertrule">insertRule(rule, index)</a><span>，见 § 4.1</span>
        <li><a href="#nested-group-rules">嵌套组规则</a><span>，见 § 2.2</span>
        <li><a href="#nested-style-rule">嵌套样式规则</a><span>，见 § 2</span>
        <li><a href="#nesting-selector">嵌套选择器</a><span>，见 § 3</span>
        <li><a href="#nested-style-rule">嵌套样式规则</a><span>，见 § 2</span>
    </ul>
    <aside class="dfn-panel" data-for="term-for-at-ruledef-layer">
        <a
            href="https://www.w3.org/TR/css-cascade-5/#at-ruledef-layer">https://www.w3.org/TR/css-cascade-5/#at-ruledef-layer</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-at-ruledef-layer">2.2. Nesting Other At-Rules</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-typedef-scope-end">
        <a
            href="https://www.w3.org/TR/css-cascade-6/#typedef-scope-end">https://www.w3.org/TR/css-cascade-6/#typedef-scope-end</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-typedef-scope-end">2.2.1.
                    Nested @scope Rules</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-typedef-scope-start">
        <a
            href="https://www.w3.org/TR/css-cascade-6/#typedef-scope-start">https://www.w3.org/TR/css-cascade-6/#typedef-scope-start</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-typedef-scope-start">2.2.1.
                    Nested @scope Rules</a> <a href="#ref-for-typedef-scope-start①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-at-ruledef-scope">
        <a
            href="https://www.w3.org/TR/css-cascade-6/#at-ruledef-scope">https://www.w3.org/TR/css-cascade-6/#at-ruledef-scope</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-at-ruledef-scope">2.2. Nesting Other At-Rules</a>
            <li><a href="#ref-for-at-ruledef-scope①">2.2.1.
                    Nested @scope Rules</a> <a href="#ref-for-at-ruledef-scope②">(2)</a> <a
                    href="#ref-for-at-ruledef-scope③">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-color">
        <a
            href="https://www.w3.org/TR/css-color-4/#propdef-color">https://www.w3.org/TR/css-color-4/#propdef-color</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-color">2. Nesting Style Rules</a>
            <li><a href="#ref-for-propdef-color①">2.3. Mixing Nesting Rules and Declarations</a> <a
                    href="#ref-for-propdef-color②">(2)</a> <a href="#ref-for-propdef-color③">(3)</a>
            <li><a href="#ref-for-propdef-color④">3. Nesting Selector: the &amp; selector</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-at-ruledef-media">
        <a
            href="https://www.w3.org/TR/css-conditional-3/#at-ruledef-media">https://www.w3.org/TR/css-conditional-3/#at-ruledef-media</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-at-ruledef-media">2.2. Nesting Other At-Rules</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-at-ruledef-supports">
        <a
            href="https://www.w3.org/TR/css-conditional-3/#at-ruledef-supports">https://www.w3.org/TR/css-conditional-3/#at-ruledef-supports</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-at-ruledef-supports">2.2. Nesting Other At-Rules</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-cssmediarule">
        <a
            href="https://www.w3.org/TR/css-conditional-3/#cssmediarule">https://www.w3.org/TR/css-conditional-3/#cssmediarule</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-cssmediarule">2.2. Nesting Other At-Rules</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-conditional-group-rule">
        <a
            href="https://www.w3.org/TR/css-conditional-3/#conditional-group-rule">https://www.w3.org/TR/css-conditional-3/#conditional-group-rule</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-conditional-group-rule">2.2. Nesting Other At-Rules</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-at-ruledef-container">
        <a
            href="https://www.w3.org/TR/css-contain-3/#at-ruledef-container">https://www.w3.org/TR/css-contain-3/#at-ruledef-container</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-at-ruledef-container">2.2. Nesting Other At-Rules</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-grid-auto-flow">
        <a
            href="https://www.w3.org/TR/css-grid-2/#propdef-grid-auto-flow">https://www.w3.org/TR/css-grid-2/#propdef-grid-auto-flow</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-grid-auto-flow">2.2. Nesting Other At-Rules</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-nested-conditional-group-rules">
        <a
            href="https://www.w3.org/TR/css-nesting-1/#nested-conditional-group-rules">https://www.w3.org/TR/css-nesting-1/#nested-conditional-group-rules</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-nested-conditional-group-rules">2.3. Mixing Nesting Rules and Declarations</a> <a
                    href="#ref-for-nested-conditional-group-rules①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-typedef-style-block">
        <a
            href="https://www.w3.org/TR/css-syntax-3/#typedef-style-block">https://www.w3.org/TR/css-syntax-3/#typedef-style-block</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-typedef-style-block">2.2. Nesting Other At-Rules</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-typedef-stylesheet">
        <a
            href="https://www.w3.org/TR/css-syntax-3/#typedef-stylesheet">https://www.w3.org/TR/css-syntax-3/#typedef-stylesheet</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-typedef-stylesheet">2.2. Nesting Other At-Rules</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-at-rule">
        <a href="https://www.w3.org/TR/css-syntax-3/#at-rule">https://www.w3.org/TR/css-syntax-3/#at-rule</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-at-rule">2.1. Syntax</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-declaration">
        <a href="https://www.w3.org/TR/css-syntax-3/#declaration">https://www.w3.org/TR/css-syntax-3/#declaration</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-declaration">2. Nesting Style Rules</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-style-rule">
        <a href="https://www.w3.org/TR/css-syntax-3/#style-rule">https://www.w3.org/TR/css-syntax-3/#style-rule</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-style-rule">2. Nesting Style Rules</a>
            <li><a href="#ref-for-style-rule①">2.1. Syntax</a>
            <li><a href="#ref-for-style-rule②">2.2. Nesting Other At-Rules</a> <a href="#ref-for-style-rule③">(2)</a> <a
                    href="#ref-for-style-rule④">(3)</a> <a href="#ref-for-style-rule⑤">(4)</a> <a
                    href="#ref-for-style-rule⑥">(5)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-valdef-caret-shape-bar">
        <a
            href="https://www.w3.org/TR/css-ui-4/#valdef-caret-shape-bar">https://www.w3.org/TR/css-ui-4/#valdef-caret-shape-bar</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-valdef-caret-shape-bar">2.1. Syntax</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-functional-notation">
        <a
            href="https://www.w3.org/TR/css-values-4/#functional-notation">https://www.w3.org/TR/css-values-4/#functional-notation</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-functional-notation">2. Nesting Style Rules</a>
            <li><a href="#ref-for-functional-notation①">2.1. Syntax</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-css-css-identifier">
        <a
            href="https://www.w3.org/TR/css-values-4/#css-css-identifier">https://www.w3.org/TR/css-values-4/#css-css-identifier</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-css-css-identifier">2. Nesting Style Rules</a> <a
                    href="#ref-for-css-css-identifier①">(2)</a>
            <li><a href="#ref-for-css-css-identifier②">2.1. Syntax</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-cssomstring">
        <a href="https://www.w3.org/TR/cssom-1/#cssomstring">https://www.w3.org/TR/cssom-1/#cssomstring</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-cssomstring">4.1. Modifications to CSSStyleRule</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-cssrulelist">
        <a href="https://www.w3.org/TR/cssom-1/#cssrulelist">https://www.w3.org/TR/cssom-1/#cssrulelist</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-cssrulelist">4.1. Modifications to CSSStyleRule</a> <a
                    href="#ref-for-cssrulelist①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-cssstylerule">
        <a href="https://www.w3.org/TR/cssom-1/#cssstylerule">https://www.w3.org/TR/cssom-1/#cssstylerule</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-cssstylerule">2.2. Nesting Other At-Rules</a>
            <li><a href="#ref-for-cssstylerule①">4.1. Modifications to CSSStyleRule</a> <a
                    href="#ref-for-cssstylerule②">(2)</a> <a href="#ref-for-cssstylerule③">(3)</a> <a
                    href="#ref-for-cssstylerule④">(4)</a> <a href="#ref-for-cssstylerule⑤">(5)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-css-rule-child-css-rules">
        <a
            href="https://www.w3.org/TR/cssom-1/#concept-css-rule-child-css-rules">https://www.w3.org/TR/cssom-1/#concept-css-rule-child-css-rules</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-css-rule-child-css-rules">4.1. Modifications to CSSStyleRule</a> <a
                    href="#ref-for-concept-css-rule-child-css-rules①">(2)</a> <a
                    href="#ref-for-concept-css-rule-child-css-rules②">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-cssstyledeclaration-declarations">
        <a
            href="https://www.w3.org/TR/cssom-1/#cssstyledeclaration-declarations">https://www.w3.org/TR/cssom-1/#cssstyledeclaration-declarations</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-cssstyledeclaration-declarations">2. Nesting Style Rules</a>
            <li><a href="#ref-for-cssstyledeclaration-declarations①">2.1. Syntax</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-insert-a-css-rule">
        <a
            href="https://www.w3.org/TR/cssom-1/#insert-a-css-rule">https://www.w3.org/TR/cssom-1/#insert-a-css-rule</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-insert-a-css-rule">4.1. Modifications to CSSStyleRule</a> <a
                    href="#ref-for-insert-a-css-rule①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-remove-a-css-rule">
        <a
            href="https://www.w3.org/TR/cssom-1/#remove-a-css-rule">https://www.w3.org/TR/cssom-1/#remove-a-css-rule</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-remove-a-css-rule">4.1. Modifications to CSSStyleRule</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-cssstylerule-selectortext">
        <a
            href="https://www.w3.org/TR/cssom-1/#dom-cssstylerule-selectortext">https://www.w3.org/TR/cssom-1/#dom-cssstylerule-selectortext</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-cssstylerule-selectortext">4.1. Modifications to CSSStyleRule</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-serialize-a-css-rule">
        <a
            href="https://www.w3.org/TR/cssom-1/#serialize-a-css-rule">https://www.w3.org/TR/cssom-1/#serialize-a-css-rule</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-serialize-a-css-rule">4.1. Modifications to CSSStyleRule</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-the-div-element">
        <a
            href="https://html.spec.whatwg.org/multipage/grouping-content.html#the-div-element">https://html.spec.whatwg.org/multipage/grouping-content.html#the-div-element</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-the-div-element">3. Nesting Selector: the &amp; selector</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-matches-pseudo">
        <a
            href="https://www.w3.org/TR/selectors-4/#matches-pseudo">https://www.w3.org/TR/selectors-4/#matches-pseudo</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-matches-pseudo">3. Nesting Selector: the &amp; selector</a> <a
                    href="#ref-for-matches-pseudo①">(2)</a> <a href="#ref-for-matches-pseudo②">(3)</a> <a
                    href="#ref-for-matches-pseudo③">(4)</a> <a href="#ref-for-matches-pseudo④">(5)</a> <a
                    href="#ref-for-matches-pseudo⑤">(6)</a> <a href="#ref-for-matches-pseudo⑥">(7)</a> <a
                    href="#ref-for-matches-pseudo⑦">(8)</a> <a href="#ref-for-matches-pseudo⑧">(9)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-scope-pseudo">
        <a href="https://www.w3.org/TR/selectors-4/#scope-pseudo">https://www.w3.org/TR/selectors-4/#scope-pseudo</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-scope-pseudo">3. Nesting Selector: the &amp; selector</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-where-pseudo">
        <a href="https://www.w3.org/TR/selectors-4/#where-pseudo">https://www.w3.org/TR/selectors-4/#where-pseudo</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-where-pseudo">2.3. Mixing Nesting Rules and Declarations</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-typedef-relative-selector-list">
        <a
            href="https://www.w3.org/TR/selectors-4/#typedef-relative-selector-list">https://www.w3.org/TR/selectors-4/#typedef-relative-selector-list</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-typedef-relative-selector-list">2.1. Syntax</a> <a
                    href="#ref-for-typedef-relative-selector-list①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-typedef-selector-list">
        <a
            href="https://www.w3.org/TR/selectors-4/#typedef-selector-list">https://www.w3.org/TR/selectors-4/#typedef-selector-list</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-typedef-selector-list">2.1. Syntax</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-selector-combinator">
        <a
            href="https://www.w3.org/TR/selectors-4/#selector-combinator">https://www.w3.org/TR/selectors-4/#selector-combinator</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-selector-combinator">2.1. Syntax</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-compound">
        <a href="https://www.w3.org/TR/selectors-4/#compound">https://www.w3.org/TR/selectors-4/#compound</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-compound">3. Nesting Selector: the &amp; selector</a> <a
                    href="#ref-for-compound①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-relative-selector">
        <a
            href="https://www.w3.org/TR/selectors-4/#relative-selector">https://www.w3.org/TR/selectors-4/#relative-selector</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-relative-selector">2. Nesting Style Rules</a> <a
                    href="#ref-for-relative-selector①">(2)</a>
            <li><a href="#ref-for-relative-selector②">2.1. Syntax</a> <a href="#ref-for-relative-selector③">(2)</a> <a
                    href="#ref-for-relative-selector④">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-selector">
        <a href="https://www.w3.org/TR/selectors-4/#selector">https://www.w3.org/TR/selectors-4/#selector</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-selector">2. Nesting Style Rules</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-simple">
        <a href="https://www.w3.org/TR/selectors-4/#simple">https://www.w3.org/TR/selectors-4/#simple</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-simple">2.1. Syntax</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-specificity">
        <a href="https://www.w3.org/TR/selectors-4/#specificity">https://www.w3.org/TR/selectors-4/#specificity</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-specificity">3. Nesting Selector: the &amp; selector</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-type-selector">
        <a
            href="https://www.w3.org/TR/selectors-4/#type-selector">https://www.w3.org/TR/selectors-4/#type-selector</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-type-selector">2. Nesting Style Rules</a>
            <li><a href="#ref-for-type-selector①">3. Nesting Selector: the &amp; selector</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-SameObject">
        <a href="https://webidl.spec.whatwg.org/#SameObject">https://webidl.spec.whatwg.org/#SameObject</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-SameObject">4.1. Modifications to CSSStyleRule</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-idl-undefined">
        <a href="https://webidl.spec.whatwg.org/#idl-undefined">https://webidl.spec.whatwg.org/#idl-undefined</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-idl-undefined">4.1. Modifications to CSSStyleRule</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-idl-unsigned-long">
        <a
            href="https://webidl.spec.whatwg.org/#idl-unsigned-long">https://webidl.spec.whatwg.org/#idl-unsigned-long</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-idl-unsigned-long">4.1. Modifications to CSSStyleRule</a> <a
                    href="#ref-for-idl-unsigned-long①">(2)</a> <a href="#ref-for-idl-unsigned-long②">(3)</a>
        </ul>
    </aside>
    <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">引用定义的术语</span><a
            class="self-link" href="#index-defined-elsewhere"></a></h3>
    <ul class="index">
        <li>
            <a data-link-type="biblio">[CSS-CASCADE-5]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-at-ruledef-layer">@layer</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-CASCADE-6]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-typedef-scope-end">&lt;scope-end></span>
                <li><span class="dfn-paneled" id="term-for-typedef-scope-start">&lt;scope-start></span>
                <li><span class="dfn-paneled" id="term-for-at-ruledef-scope">@scope</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-COLOR-4]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-propdef-color">color</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-CONDITIONAL-3]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-at-ruledef-media">@media</span>
                <li><span class="dfn-paneled" id="term-for-at-ruledef-supports">@supports</span>
                <li><span class="dfn-paneled" id="term-for-cssmediarule">CSSMediaRule</span>
                <li><span class="dfn-paneled" id="term-for-conditional-group-rule">conditional group rule</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-CONTAIN-3]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-at-ruledef-container">@container</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-GRID-2]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-propdef-grid-auto-flow">grid-auto-flow</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-NESTING-1]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-nested-conditional-group-rules">嵌套条件组规则</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-SYNTAX-3]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-typedef-style-block">&lt;style-block></span>
                <li><span class="dfn-paneled" id="term-for-typedef-stylesheet">&lt;stylesheet></span>
                <li><span class="dfn-paneled" id="term-for-at-rule">at-rule</span>
                <li><span class="dfn-paneled" id="term-for-declaration">declaration</span>
                <li><span class="dfn-paneled" id="term-for-style-rule">style rule</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-UI-4]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-valdef-caret-shape-bar">bar</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-VALUES-4]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-functional-notation">函数符号</span>
                <li><span class="dfn-paneled" id="term-for-css-css-identifier">标识符</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSSOM]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-cssomstring">CSSOMString</span>
                <li><span class="dfn-paneled" id="term-for-cssrulelist">CSSRuleList</span>
                <li><span class="dfn-paneled" id="term-for-cssstylerule">CSSStyleRule</span>
                <li><span class="dfn-paneled" id="term-for-concept-css-rule-child-css-rules">子 CSS 规则</span>
                <li><span class="dfn-paneled" id="term-for-cssstyledeclaration-declarations">声明</span>
                <li><span class="dfn-paneled" id="term-for-insert-a-css-rule">插入 CSS 规则</span>
                <li><span class="dfn-paneled" id="term-for-remove-a-css-rule">删除 CSS 规则</span>
                <li><span class="dfn-paneled" id="term-for-dom-cssstylerule-selectortext">selectorText</span>
                <li><span class="dfn-paneled" id="term-for-serialize-a-css-rule">序列化 CSS 规则</span>
            </ul>
        <li>
            <a data-link-type="biblio">[HTML]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-the-div-element">div</span>
            </ul>
        <li>
            <a data-link-type="biblio">[SELECTORS4]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-matches-pseudo">:is()</span>
                <li><span class="dfn-paneled" id="term-for-scope-pseudo">:scope</span>
                <li><span class="dfn-paneled" id="term-for-where-pseudo">:where()</span>
                <li><span class="dfn-paneled"
                        id="term-for-typedef-relative-selector-list">&lt;relative-selector-list></span>
                <li><span class="dfn-paneled" id="term-for-typedef-selector-list">&lt;selector-list></span>
                <li><span class="dfn-paneled" id="term-for-selector-combinator">组合器</span>
                <li><span class="dfn-paneled" id="term-for-compound">复合选择器</span>
                <li><span class="dfn-paneled" id="term-for-relative-selector">相对选择器</span>
                <li><span class="dfn-paneled" id="term-for-selector">选择器</span>
                <li><span class="dfn-paneled" id="term-for-simple">简单选择器</span>
                <li><span class="dfn-paneled" id="term-for-specificity">特异性</span>
                <li><span class="dfn-paneled" id="term-for-type-selector">类型选择器</span>
            </ul>
        <li>
            <a data-link-type="biblio">[WEBIDL]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-SameObject">SameObject</span>
                <li><span class="dfn-paneled" id="term-for-idl-undefined">undefined</span>
                <li><span class="dfn-paneled" id="term-for-idl-unsigned-long">unsigned long</span>
            </ul>
    </ul>
    <h2 class="no-num no-ref heading settled" id="references"><span class="content">参考文献</span><a class="self-link"
            href="#references"></a></h2>
    <h3 class="no-num no-ref heading settled" id="normative"><span class="content">规范性参考文献</span><a class="self-link"
            href="#normative"></a></h3>
    <dl>
        <dt id="biblio-css-cascade-4">[CSS-CASCADE-4]
        <dd>Elika Etemad; Tab Atkins Jr.. <a href="https://www.w3.org/TR/css-cascade-4/"><cite>CSS Cascading and
                    Inheritance Level 4</cite></a>. 13 January 2022. CR. URL: <a
                href="https://www.w3.org/TR/css-cascade-4/">https://www.w3.org/TR/css-cascade-4/</a>
        <dt id="biblio-css-cascade-6">[CSS-CASCADE-6]
        <dd>Elika Etemad; Miriam Suzanne; Tab Atkins Jr.. <a href="https://www.w3.org/TR/css-cascade-6/"><cite>CSS
                    Cascading and Inheritance Level 6</cite></a>. 21 December 2021. WD. URL: <a
                href="https://www.w3.org/TR/css-cascade-6/">https://www.w3.org/TR/css-cascade-6/</a>
        <dt id="biblio-css-color-4">[CSS-COLOR-4]
        <dd>Tab Atkins Jr.; Chris Lilley; Lea Verou. <a href="https://www.w3.org/TR/css-color-4/"><cite>CSS Color Module
                    Level 4</cite></a>. 1 November 2022. CR. URL: <a
                href="https://www.w3.org/TR/css-color-4/">https://www.w3.org/TR/css-color-4/</a>
        <dt id="biblio-css-nesting-1">[CSS-NESTING-1]
        <dd>Tab Atkins Jr.; Adam Argyle. <a href="https://www.w3.org/TR/css-nesting-1/"><cite>CSS Nesting
                    Module</cite></a>. 31 August 2021. WD. URL: <a
                href="https://www.w3.org/TR/css-nesting-1/">https://www.w3.org/TR/css-nesting-1/</a>
        <dt id="biblio-css-syntax-3">[CSS-SYNTAX-3]
        <dd>Tab Atkins Jr.; Simon Sapin. <a href="https://www.w3.org/TR/css-syntax-3/"><cite>CSS Syntax Module Level
                    3</cite></a>. 24 December 2021. CR. URL: <a
                href="https://www.w3.org/TR/css-syntax-3/">https://www.w3.org/TR/css-syntax-3/</a>
        <dt id="biblio-css-values-4">[CSS-VALUES-4]
        <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://www.w3.org/TR/css-values-4/"><cite>CSS Values and Units
                    Module Level 4</cite></a>. 19 October 2022. WD. URL: <a
                href="https://www.w3.org/TR/css-values-4/">https://www.w3.org/TR/css-values-4/</a>
        <dt id="biblio-css21">[CSS21]
        <dd>Bert Bos; et al. <a href="https://www.w3.org/TR/CSS21/"><cite>Cascading Style Sheets Level 2 Revision 1 (CSS
                    2.1) Specification</cite></a>. 7 June 2011. REC. URL: <a
                href="https://www.w3.org/TR/CSS21/">https://www.w3.org/TR/CSS21/</a>
        <dt id="biblio-cssom">[CSSOM]
        <dd>Daniel Glazman; Emilio Cobos Álvarez. <a href="https://www.w3.org/TR/cssom-1/"><cite>CSS Object Model
                    (CSSOM)</cite></a>. 26 August 2021. WD. URL: <a
                href="https://www.w3.org/TR/cssom-1/">https://www.w3.org/TR/cssom-1/</a>
        <dt id="biblio-rfc2119">[RFC2119]
        <dd>S. Bradner. <a href="https://datatracker.ietf.org/doc/html/rfc2119"><cite>Key words for use in RFCs to
                    Indicate Requirement Levels</cite></a>. March 1997. Best Current Practice. URL: <a
                href="https://datatracker.ietf.org/doc/html/rfc2119">https://datatracker.ietf.org/doc/html/rfc2119</a>
        <dt id="biblio-selectors4">[SELECTORS4]
        <dd>Elika Etemad; Tab Atkins Jr.. <a href="https://www.w3.org/TR/selectors-4/"><cite>Selectors Level
                    4</cite></a>. 11 November 2022. WD. URL: <a
                href="https://www.w3.org/TR/selectors-4/">https://www.w3.org/TR/selectors-4/</a>
        <dt id="biblio-webidl">[WEBIDL]
        <dd>Edgar Chen; Timothy Gu. <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL Standard</cite></a>. Living
            Standard. URL: <a href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
    </dl>
    <h3 class="no-num no-ref heading settled" id="informative"><span class="content">参考性参考文献</span><a class="self-link"
            href="#informative"></a></h3>
    <dl>
        <dt id="biblio-css-cascade-5">[CSS-CASCADE-5]
        <dd>Elika Etemad; Miriam Suzanne; Tab Atkins Jr.. <a href="https://www.w3.org/TR/css-cascade-5/"><cite>CSS
                    Cascading and Inheritance Level 5</cite></a>. 13 January 2022. CR. URL: <a
                href="https://www.w3.org/TR/css-cascade-5/">https://www.w3.org/TR/css-cascade-5/</a>
        <dt id="biblio-css-color-3">[CSS-COLOR-3]
        <dd>Tantek Çelik; Chris Lilley; David Baron. <a href="https://www.w3.org/TR/css-color-3/"><cite>CSS Color Module
                    Level 3</cite></a>. 18 January 2022. REC. URL: <a
                href="https://www.w3.org/TR/css-color-3/">https://www.w3.org/TR/css-color-3/</a>
        <dt id="biblio-css-conditional-3">[CSS-CONDITIONAL-3]
        <dd>David Baron; Elika Etemad; Chris Lilley. <a href="https://www.w3.org/TR/css-conditional-3/"><cite>CSS
                    Conditional Rules Module Level 3</cite></a>. 13 January 2022. CR. URL: <a
                href="https://www.w3.org/TR/css-conditional-3/">https://www.w3.org/TR/css-conditional-3/</a>
        <dt id="biblio-css-contain-3">[CSS-CONTAIN-3]
        <dd>Tab Atkins Jr.; Florian Rivoal; Miriam Suzanne. <a href="https://www.w3.org/TR/css-contain-3/"><cite>CSS
                    Containment Module Level 3</cite></a>. 18 August 2022. WD. URL: <a
                href="https://www.w3.org/TR/css-contain-3/">https://www.w3.org/TR/css-contain-3/</a>
        <dt id="biblio-css-grid-2">[CSS-GRID-2]
        <dd>Tab Atkins Jr.; Elika Etemad; Rossen Atanassov. <a href="https://www.w3.org/TR/css-grid-2/"><cite>CSS Grid
                    Layout Module Level 2</cite></a>. 18 December 2020. CR. URL: <a
                href="https://www.w3.org/TR/css-grid-2/">https://www.w3.org/TR/css-grid-2/</a>
        <dt id="biblio-css-ui-4">[CSS-UI-4]
        <dd>Florian Rivoal. <a href="https://www.w3.org/TR/css-ui-4/"><cite>CSS Basic User Interface Module Level
                    4</cite></a>. 16 March 2021. WD. URL: <a
                href="https://www.w3.org/TR/css-ui-4/">https://www.w3.org/TR/css-ui-4/</a>
        <dt id="biblio-html">[HTML]
        <dd>Anne van Kesteren; et al. <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML Standard</cite></a>.
            Living Standard. URL: <a
                href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
    </dl>
    <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL 索引</span><a class="self-link"
            href="#idl-index"></a></h2>
    <pre class="idl highlight def"><c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://www.w3.org/TR/cssom-1/#cssstylerule"><c- g>CSSStyleRule</c-></a> {
  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject"><c- g>SameObject</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://www.w3.org/TR/cssom-1/#cssrulelist"><c- n>CSSRuleList</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="CSSRuleList" href="#dom-cssstylerule-cssrules"><c- g>cssRules</c-></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long"><c- b>unsigned</c-> <c- b>long</c-></a> <a class="idl-code" data-link-type="method" href="#dom-cssstylerule-insertrule"><c- g>insertRule</c-></a>(<a data-link-type="idl-name" href="https://www.w3.org/TR/cssom-1/#cssomstring"><c- n>CSSOMString</c-></a> <a href="#dom-cssstylerule-insertrule-rule-index-rule"><code><c- g>rule</c-></code></a>, <c- b>optional</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long"><c- b>unsigned</c-> <c- b>long</c-></a> <a href="#dom-cssstylerule-insertrule-rule-index-index"><code><c- g>index</c-></code></a> = 0);
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-cssstylerule-deleterule"><c- g>deleteRule</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long"><c- b>unsigned</c-> <c- b>long</c-></a> <a href="#dom-cssstylerule-deleterule-index-index"><code><c- g>index</c-></code></a>);
};

</pre>
    <h2 class="no-num no-ref heading settled" id="issues-index"><span class="content">问题索引</span><a class="self-link"
            href="#issues-index"></a></h2>
    <div style="counter-reset:issue">
        <div class="issue"> CSSWG目前正在探索解析前瞻的影响，
            可能因此调整允许的语法。 <a href="https://github.com/w3c/csswg-drafts/issues/7961">[问题 #7961]</a> <a
                class="issue-return" href="#issue-8ec431e9" title="跳转到部分">↵</a></div>
        <div class="issue"> 我们希望放宽此限制，
            但需要同时对<a class="css" data-link-type="maybe"
                href="https://www.w3.org/TR/selectors-4/#matches-pseudo">:is()</a>和<a class="css" data-link-type="maybe"
                href="#selectordef-">&amp;</a>进行调整，
            因为它们基于相同的底层机制。
            (<a href="https://github.com/w3c/csswg-drafts/issues/7433">问题 7433</a>) <a class="issue-return"
                href="#issue-62c479a8" title="跳转到部分">↵</a></div>
        <div class="issue"> 上述段落将被内联到CSSOM算法中，
            而不是通过补丁处理。 <a class="issue-return" href="#issue-bc4d708a" title="跳转到部分">↵</a>
        </div>
    </div>
    <aside class="dfn-panel" data-for="nested-style-rule">
        <b><a href="#nested-style-rule">#nested-style-rule</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-nested-style-rule">2. Nesting Style Rules</a> <a
                    href="#ref-for-nested-style-rule①">(2)</a>
            <li><a href="#ref-for-nested-style-rule②">2.1. Syntax</a> <a href="#ref-for-nested-style-rule③">(2)</a> <a
                    href="#ref-for-nested-style-rule④">(3)</a> <a href="#ref-for-nested-style-rule⑤">(4)</a> <a
                    href="#ref-for-nested-style-rule⑥">(5)</a>
            <li><a href="#ref-for-nested-style-rule⑦">2.2. Nesting Other At-Rules</a> <a
                    href="#ref-for-nested-style-rule⑧">(2)</a> <a href="#ref-for-nested-style-rule⑨">(3)</a> <a
                    href="#ref-for-nested-style-rule①⓪">(4)</a>
            <li><a href="#ref-for-nested-style-rule①①">2.3. Mixing Nesting Rules and Declarations</a> <a
                    href="#ref-for-nested-style-rule①②">(2)</a>
            <li><a href="#ref-for-nested-style-rule①③">3. Nesting Selector: the &amp; selector</a> <a
                    href="#ref-for-nested-style-rule①④">(2)</a> <a href="#ref-for-nested-style-rule①⑤">(3)</a>
            <li><a href="#ref-for-nested-style-rule①⑥">4.1. Modifications to CSSStyleRule</a> <a
                    href="#ref-for-nested-style-rule①⑦">(2)</a> <a href="#ref-for-nested-style-rule①⑧">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="nested-group-rules">
        <b><a href="#nested-group-rules">#nested-group-rules</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-nested-group-rules">2.2. Nesting Other At-Rules</a> <a
                    href="#ref-for-nested-group-rules①">(2)</a> <a href="#ref-for-nested-group-rules②">(3)</a>
            <li><a href="#ref-for-nested-group-rules③">2.2.1.
                    Nested @scope Rules</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="nesting-selector">
        <b><a href="#nesting-selector">#nesting-selector</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-nesting-selector">2. Nesting Style Rules</a>
            <li><a href="#ref-for-nesting-selector①">2.1. Syntax</a> <a href="#ref-for-nesting-selector②">(2)</a>
            <li><a href="#ref-for-nesting-selector③">2.2. Nesting Other At-Rules</a>
            <li><a href="#ref-for-nesting-selector④">2.3. Mixing Nesting Rules and Declarations</a>
            <li><a href="#ref-for-nesting-selector⑤">3. Nesting Selector: the &amp; selector</a> <a
                    href="#ref-for-nesting-selector⑥">(2)</a> <a href="#ref-for-nesting-selector⑦">(3)</a> <a
                    href="#ref-for-nesting-selector⑧">(4)</a> <a href="#ref-for-nesting-selector⑨">(5)</a> <a
                    href="#ref-for-nesting-selector①⓪">(6)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="selectordef-">
        <b><a href="#selectordef-">#selectordef-</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-selectordef-">2.2. Nesting Other At-Rules</a>
            <li><a href="#ref-for-selectordef-①">2.2.1.
                    Nested @scope Rules</a>
            <li><a href="#ref-for-selectordef-②">3. Nesting Selector: the &amp; selector</a> <a
                    href="#ref-for-selectordef-③">(2)</a> <a href="#ref-for-selectordef-④">(3)</a> <a
                    href="#ref-for-selectordef-⑤">(4)</a> <a href="#ref-for-selectordef-⑥">(5)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-cssstylerule-cssrules">
        <b><a href="#dom-cssstylerule-cssrules">#dom-cssstylerule-cssrules</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-cssstylerule-cssrules">4.1. Modifications to CSSStyleRule</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-cssstylerule-insertrule">
        <b><a href="#dom-cssstylerule-insertrule">#dom-cssstylerule-insertrule</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-cssstylerule-insertrule">4.1. Modifications to CSSStyleRule</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-cssstylerule-deleterule">
        <b><a href="#dom-cssstylerule-deleterule">#dom-cssstylerule-deleterule</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-cssstylerule-deleterule">4.1. Modifications to CSSStyleRule</a>
        </ul>
    </aside>
    <script>/* script-dfn-panel */

        document.body.addEventListener("click", function (e) {
            var queryAll = function (sel) { return [].slice.call(document.querySelectorAll(sel)); }
            // Find the dfn element or panel, if any, that was clicked on.
            var el = e.target;
            var target;
            var hitALink = false;
            while (el.parentElement) {
                if (el.tagName == "A") {
                    // Clicking on a link in a <dfn> shouldn't summon the panel
                    hitALink = true;
                }
                if (el.classList.contains("dfn-paneled")) {
                    target = "dfn";
                    break;
                }
                if (el.classList.contains("dfn-panel")) {
                    target = "dfn-panel";
                    break;
                }
                el = el.parentElement;
            }
            if (target != "dfn-panel") {
                // Turn off any currently "on" or "activated" panels.
                queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(function (el) {
                    el.classList.remove("on");
                    el.classList.remove("activated");
                });
            }
            if (target == "dfn" && !hitALink) {
                // open the panel
                var dfnPanel = document.querySelector(".dfn-panel[data-for='" + el.id + "']");
                if (dfnPanel) {
                    dfnPanel.classList.add("on");
                    var rect = el.getBoundingClientRect();
                    dfnPanel.style.left = window.scrollX + rect.right + 5 + "px";
                    dfnPanel.style.top = window.scrollY + rect.top + "px";
                    var panelRect = dfnPanel.getBoundingClientRect();
                    var panelWidth = panelRect.right - panelRect.left;
                    if (panelRect.right > document.body.scrollWidth && (rect.left - (panelWidth + 5)) > 0) {
                        // Reposition, because the panel is overflowing
                        dfnPanel.style.left = window.scrollX + rect.left - (panelWidth + 5) + "px";
                    }
                } else {
                    console.log("Couldn't find .dfn-panel[data-for='" + el.id + "']");
                }
            } else if (target == "dfn-panel") {
                // Switch it to "activated" state, which pins it.
                el.classList.add("activated");
                el.style.left = null;
                el.style.top = null;
            }

        });
    </script>
    <script src="/dropdown.js"></script>
