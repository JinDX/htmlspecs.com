<!doctype html>
<html lang="zh-hans">

<head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <title>CSS 条件规则模块第 4 级</title>
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
    <meta content="exploring" name="csswg-work-status">
    <meta content="CR" name="w3c-status">
    <meta
        content="本模块包含 CSS 中用于根据处理器或样式表应用环境的能力，对样式表的部分进行条件处理的功能。它包括并扩展了 CSS 条件规则 3 [[!css-conditional-3]] 的功能，新增了通过 &apos;&apos;selector()&apos;&apos; 符号对 [=支持查询=] 进行特定选择器支持查询的能力。"
        name="abstract">
    <link href="https://www.w3.org/TR/css-conditional-4/default.css" rel="stylesheet" type="text/css">
    <meta content="Bikeshed version cace53f8c, updated Tue Dec 7 12:12:54 2021 -0800" name="generator">
    <link href="https://www.w3.org/TR/css-conditional-4/" rel="canonical">
    <meta content="7d62867f3ebbe2edb45f85f06902ab6e4d6acd76" name="document-revision">
    <style>
        /* style-autolinks */

        .css.css,
        .property.property,
        .descriptor.descriptor {
            color: var(--a-normal-text);
            font-size: inherit;
            font-family: inherit;
        }

        .css::before,
        .property::before,
        .descriptor::before {
            content: "‘";
        }

        .css::after,
        .property::after,
        .descriptor::after {
            content: "’";
        }

        .property,
        .descriptor {
            /* Don't wrap property and descriptor names */
            white-space: nowrap;
        }

        .type {
            /* CSS value <type> */
            font-style: italic;
        }

        pre .property::before,
        pre .property::after {
            content: "";
        }

        [data-link-type="property"]::before,
        [data-link-type="propdesc"]::before,
        [data-link-type="descriptor"]::before,
        [data-link-type="value"]::before,
        [data-link-type="function"]::before,
        [data-link-type="at-rule"]::before,
        [data-link-type="selector"]::before,
        [data-link-type="maybe"]::before {
            content: "‘";
        }

        [data-link-type="property"]::after,
        [data-link-type="propdesc"]::after,
        [data-link-type="descriptor"]::after,
        [data-link-type="value"]::after,
        [data-link-type="function"]::after,
        [data-link-type="at-rule"]::after,
        [data-link-type="selector"]::after,
        [data-link-type="maybe"]::after {
            content: "’";
        }

        [data-link-type].production::before,
        [data-link-type].production::after,
        .prod [data-link-type]::before,
        .prod [data-link-type]::after {
            content: "";
        }

        [data-link-type=element],
        [data-link-type=element-attr] {
            font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
            font-size: .9em;
        }

        [data-link-type=element]::before {
            content: "<"
        }

        [data-link-type=element]::after {
            content: ">"
        }

        [data-link-type=biblio] {
            white-space: pre;
        }
    </style>
    <style>
        /* style-counters */

        body {
            counter-reset: example figure issue;
        }

        .issue {
            counter-increment: issue;
        }

        .issue:not(.no-marker)::before {
            content: "Issue " counter(issue);
        }

        .example {
            counter-increment: example;
        }

        .example:not(.no-marker)::before {
            content: "Example " counter(example);
        }

        .invalid.example:not(.no-marker)::before,
        .illegal.example:not(.no-marker)::before {
            content: "Invalid Example" counter(example);
        }

        figcaption {
            counter-increment: figure;
        }

        figcaption:not(.no-marker)::before {
            content: "Figure " counter(figure) " ";
        }
    </style>
    <style>
        /* style-dfn-panel */

        :root {
            --dfnpanel-bg: #ddd;
            --dfnpanel-text: var(--text);
        }

        .dfn-panel {
            position: absolute;
            z-index: 35;
            height: auto;
            width: -webkit-fit-content;
            width: fit-content;
            max-width: 300px;
            max-height: 500px;
            overflow: auto;
            padding: 0.5em 0.75em;
            font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
            background: var(--dfnpanel-bg);
            color: var(--dfnpanel-text);
            border: outset 0.2em;
        }

        .dfn-panel:not(.on) {
            display: none;
        }

        .dfn-panel * {
            margin: 0;
            padding: 0;
            text-indent: 0;
        }

        .dfn-panel>b {
            display: block;
        }

        .dfn-panel a {
            color: var(--dfnpanel-text);
        }

        .dfn-panel a:not(:hover) {
            text-decoration: none !important;
            border-bottom: none !important;
        }

        .dfn-panel>b+b {
            margin-top: 0.25em;
        }

        .dfn-panel ul {
            padding: 0;
        }

        .dfn-panel li {
            list-style: inside;
        }

        .dfn-panel.activated {
            display: inline-block;
            position: fixed;
            left: .5em;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - 1.5em - .4em - .5em);
            max-height: 30vh;
        }

        .dfn-paneled {
            cursor: pointer;
        }
    </style>
    <style>
        /* style-issues */

        a[href].issue-return {
            float: right;
            float: inline-end;
            color: var(--issueheading-text);
            font-weight: bold;
            text-decoration: none;
        }
    </style>
    <style>
        /* style-md-lists */

        /* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
        [data-md]> :first-child {
            margin-top: 0;
        }

        [data-md]> :last-child {
            margin-bottom: 0;
        }
    </style>
    <style>
        /* style-selflinks */

        :root {
            --selflink-text: white;
            --selflink-bg: gray;
            --selflink-hover-text: black;
        }

        .heading,
        .issue,
        .note,
        .example,
        li,
        dt {
            position: relative;
        }

        a.self-link {
            position: absolute;
            top: 0;
            left: calc(-1 * (3.5rem - 26px));
            width: calc(3.5rem - 26px);
            height: 2em;
            text-align: center;
            border: none;
            transition: opacity .2s;
            opacity: .5;
        }

        a.self-link:hover {
            opacity: 1;
        }

        .heading>a.self-link {
            font-size: 83%;
        }

        li>a.self-link {
            left: calc(-1 * (3.5rem - 26px) - 2em);
        }

        dfn>a.self-link {
            top: auto;
            left: auto;
            opacity: 0;
            width: 1.5em;
            height: 1.5em;
            background: var(--selflink-bg);
            color: var(--selflink-text);
            font-style: normal;
            transition: opacity .2s, background-color .2s, color .2s;
        }

        dfn:hover>a.self-link {
            opacity: 1;
        }

        dfn>a.self-link:hover {
            color: var(--selflink-hover-text);
        }

        a.self-link::before {
            content: "¶";
        }

        .heading>a.self-link::before {
            content: "§";
        }

        dfn>a.self-link::before {
            content: "#";
        }
    </style>
    <style>
        /* style-syntax-highlighting */

        code.highlight {
            padding: .1em;
            border-radius: .3em;
        }

        pre.highlight,
        pre>code.highlight {
            display: block;
            padding: 1em;
            margin: .5em 0;
            overflow: auto;
            border-radius: 0;
        }

        .highlight:not(.idl) {
            background: rgba(0, 0, 0, .03);
        }

        c-[a] {
            color: #990055
        }

        /* Keyword.Declaration */
        c-[b] {
            color: #990055
        }

        /* Keyword.Type */
        c-[c] {
            color: #708090
        }

        /* Comment */
        c-[d] {
            color: #708090
        }

        /* Comment.Multiline */
        c-[e] {
            color: #0077aa
        }

        /* Name.Attribute */
        c-[f] {
            color: #669900
        }

        /* Name.Tag */
        c-[g] {
            color: #222222
        }

        /* Name.Variable */
        c-[k] {
            color: #990055
        }

        /* Keyword */
        c-[l] {
            color: #000000
        }

        /* Literal */
        c-[m] {
            color: #000000
        }

        /* Literal.Number */
        c-[n] {
            color: #0077aa
        }

        /* Name */
        c-[o] {
            color: #999999
        }

        /* Operator */
        c-[p] {
            color: #999999
        }

        /* Punctuation */
        c-[s] {
            color: #a67f59
        }

        /* Literal.String */
        c-[t] {
            color: #a67f59
        }

        /* Literal.String.Single */
        c-[u] {
            color: #a67f59
        }

        /* Literal.String.Double */
        c-[cp] {
            color: #708090
        }

        /* Comment.Preproc */
        c-[c1] {
            color: #708090
        }

        /* Comment.Single */
        c-[cs] {
            color: #708090
        }

        /* Comment.Special */
        c-[kc] {
            color: #990055
        }

        /* Keyword.Constant */
        c-[kn] {
            color: #990055
        }

        /* Keyword.Namespace */
        c-[kp] {
            color: #990055
        }

        /* Keyword.Pseudo */
        c-[kr] {
            color: #990055
        }

        /* Keyword.Reserved */
        c-[ld] {
            color: #000000
        }

        /* Literal.Date */
        c-[nc] {
            color: #0077aa
        }

        /* Name.Class */
        c-[no] {
            color: #0077aa
        }

        /* Name.Constant */
        c-[nd] {
            color: #0077aa
        }

        /* Name.Decorator */
        c-[ni] {
            color: #0077aa
        }

        /* Name.Entity */
        c-[ne] {
            color: #0077aa
        }

        /* Name.Exception */
        c-[nf] {
            color: #0077aa
        }

        /* Name.Function */
        c-[nl] {
            color: #0077aa
        }

        /* Name.Label */
        c-[nn] {
            color: #0077aa
        }

        /* Name.Namespace */
        c-[py] {
            color: #0077aa
        }

        /* Name.Property */
        c-[ow] {
            color: #999999
        }

        /* Operator.Word */
        c-[mb] {
            color: #000000
        }

        /* Literal.Number.Bin */
        c-[mf] {
            color: #000000
        }

        /* Literal.Number.Float */
        c-[mh] {
            color: #000000
        }

        /* Literal.Number.Hex */
        c-[mi] {
            color: #000000
        }

        /* Literal.Number.Integer */
        c-[mo] {
            color: #000000
        }

        /* Literal.Number.Oct */
        c-[sb] {
            color: #a67f59
        }

        /* Literal.String.Backtick */
        c-[sc] {
            color: #a67f59
        }

        /* Literal.String.Char */
        c-[sd] {
            color: #a67f59
        }

        /* Literal.String.Doc */
        c-[se] {
            color: #a67f59
        }

        /* Literal.String.Escape */
        c-[sh] {
            color: #a67f59
        }

        /* Literal.String.Heredoc */
        c-[si] {
            color: #a67f59
        }

        /* Literal.String.Interpol */
        c-[sx] {
            color: #a67f59
        }

        /* Literal.String.Other */
        c-[sr] {
            color: #a67f59
        }

        /* Literal.String.Regex */
        c-[ss] {
            color: #a67f59
        }

        /* Literal.String.Symbol */
        c-[vc] {
            color: #0077aa
        }

        /* Name.Variable.Class */
        c-[vg] {
            color: #0077aa
        }

        /* Name.Variable.Global */
        c-[vi] {
            color: #0077aa
        }

        /* Name.Variable.Instance */
        c-[il] {
            color: #000000
        }

        /* Literal.Number.Integer.Long */
    </style>
    <style>
        /* style-wpt */

        :root {
            --wpt-border: hsl(0, 0%, 60%);
            --wpt-bg: hsl(0, 0%, 95%);
            --wpt-text: var(--text);
            --wptheading-text: hsl(0, 0%, 30%);
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --wpt-border: hsl(0, 0%, 30%);
                --wpt-bg: var(--borderedblock-bg);
                --wpt-text: var(--text);
                --wptheading-text: hsl(0, 0%, 60%);
            }
        }

        .wpt-tests-block {
            list-style: none;
            border-left: .5em solid var(--wpt-border);
            background: var(--wpt-bg);
            color: var(--wpt-text);
            margin: 1em auto;
            padding: .5em;
        }

        .wpt-tests-block summary {
            color: var(--wptheading-text);
            font-weight: normal;
            text-transform: uppercase;
        }

        .wpt-tests-block summary::marker {
            color: var(--wpt-border);
        }

        .wpt-tests-block summary:hover::marker {
            color: var(--wpt-text);
        }

        /*
   The only content  of a wpt test block in its closed state is the <summary>,
   which contains the word TESTS,
   and that is absolutely positioned.
   In that closed state, wpt test blocks are styled
   to have a top margin whose height is exactly equal
   to the height of the absolutely positioned <summary>,
   and no other background/padding/margin/border.
   The wpt test block elements will therefore allow the maring
   of the previous/next block elements
   to collapse through them;
   if this combined margin would be larger than its own top margin,
   it stays as is,
   and therefore the pre-existing vertical rhythm of the document is undisturbed.
   If that combined margin would be smaller, it is grown to that size.
   This means that the wpt test block ensures
   that there's always enough vertical space to insert the summary,
   without adding more than is needed.
*/
        .wpt-tests-block:not([open]) {
            padding: 0;
            border: none;
            background: none;
            font-size: 0.75em;
            line-height: 1;
            position: relative;
            margin: 1em 0 0;
        }

        .wpt-tests-block:not([open]) summary {
            position: absolute;
            right: 0;
            bottom: 0;
        }

        /*
   It is possible that both the last child of a block element
   and the block element itself
   would be annotated with a <wpt> block each.
   If the block element has a padding or a border,
   that's fine, but otherwise
   the bottom margin of the block and of its last child would collapse
   and both <wpt> elements would overlap, being both placed there.
   To avoid that, add 1px of padding to the <wpt> element annotating the last child
   to prevent the bottom margin of the block and of its last child from collapsing
   (and as much negative margin,
   as wel only want to prevent margin collapsing,
   but are not trying to actually take more space).
*/
        .wpt-tests-block:not([open]):last-child {
            padding-bottom: 1px;
            margin-bottom: -1px;
        }

        /*
   Exception to the previous rule:
   don't do that in non-last list items,
   because it's not necessary,
   and would therefore consume more space than strictly needed.
   Lists must have list items as children, not <wpt> elements,
   so a <wpt> element cannot be a sibling of a list item,
   and the collision that the previous rule avoids cannot happen.
*/
        li:not(:last-child)>.wpt-tests-block:not([open]):last-child,
        dd:not(:last-child)>.wpt-tests-block:not([open]):last-child {
            padding-bottom: 0;
            margin-bottom: 0;
        }

        .wpt-tests-block:not([open]):not(:hover) {
            opacity: 0.5;
        }

        .wpt-tests-list {
            list-style: none;
            display: grid;
            margin: 0;
            padding: 0;
            grid-template-columns: 1fr max-content auto auto;
            grid-column-gap: .5em;
        }

        .wpt-tests-block hr:last-child {
            display: none;
        }

        .wpt-test {
            display: contents;
        }

        .wpt-test>a {
            text-decoration: underline;
            border: none;
        }

        .wpt-test>.wpt-name {
            grid-column: 1;
        }

        .wpt-test>.wpt-results {
            grid-column: 2;
        }

        .wpt-test>.wpt-live {
            grid-column: 3;
        }

        .wpt-test>.wpt-source {
            grid-column: 4;
        }

        .wpt-test>.wpt-results {
            display: flex;
            gap: .1em;
        }

        .wpt-test .wpt-result {
            display: inline-block;
            height: 1em;
            width: 1em;
            border-radius: 50%;
            position: relative;
        }
    </style>
    <link href="https://www.w3.org/StyleSheets/TR/2021/W3C-CR" rel="stylesheet" type="text/css">

<body class="h-entry">
    <div class="head">
        <p data-fill-with="logo">
            <a class="logo" href="https://www.w3.org/">
                <img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72">
            </a>
        </p>
        <h1 class="p-name no-ref" id="title">CSS 条件规则模块第 4 级</h1>
        <p id="w3c-state">
            <a href="https://www.w3.org/standards/types#CR">W3C 候选推荐标准快照</a>,
            <time class="dt-updated" datetime="2022-02-17">2022 年 2 月 17 日</time>
        </p>
        <details open>
            <summary>更多关于本文档的详细信息</summary>
            <div data-fill-with="spec-metadata">
                <dl>
                    <dt>本版本：
                    <dd><a class="u-url"
                            href="https://www.w3.org/TR/2022/CR-css-conditional-4-20220217/">https://www.w3.org/TR/2022/CR-css-conditional-4-20220217/</a>
                    <dt>最新发布版本：
                    <dd><a href="https://www.w3.org/TR/css-conditional-4/">https://www.w3.org/TR/css-conditional-4/</a>
                    <dt>编辑草案：
                    <dd><a
                            href="https://drafts.csswg.org/css-conditional-4/">https://drafts.csswg.org/css-conditional-4/</a>
                    <dt>以前的版本：
                    <dd><a href="https://www.w3.org/TR/2021/WD-css-conditional-4-20211225/"
                            rel="prev">https://www.w3.org/TR/2021/WD-css-conditional-4-20211225/</a>
                    <dt>历史：
                    <dd><a class="u-url"
                            href="https://www.w3.org/standards/history/css-conditional-4">https://www.w3.org/standards/history/css-conditional-4</a>
                    <dt>实现报告：
                    <dd><a
                            href="https://wpt.fyi/results/css/css-conditional">https://wpt.fyi/results/css/css-conditional</a>
                    <dt>测试套件：
                    <dd><a
                            href="https://wpt.fyi/results/css/css-conditional">https://wpt.fyi/results/css/css-conditional</a>
                    <dd class="wpt-overview"><a
                            href="https://wpt.fyi/results/css/css-conditional/">https://wpt.fyi/results/css/css-conditional/</a>
                    <dt>反馈：
                    <dd><a href="https://github.com/w3c/csswg-drafts/labels/css-conditional-4">CSSWG 问题库</a>
                    <dd><a href="#issues-index">规范中的内联问题</a>
                    <dt class="editor">编辑：
                    <dd class="editor p-author h-card vcard" data-editor-id="15393">
                        <a class="p-name fn u-url url" href="https://dbaron.org/">L. David Baron</a> (<a
                            class="p-org org" href="https://www.mozilla.org/">Mozilla</a>)
                    <dd class="editor p-author h-card vcard" data-editor-id="35400">
                        <a class="p-name fn u-url url" href="http://fantasai.inkedblade.net/contact">Elika J. Etemad /
                            fantasai</a> (<span class="p-org org">受邀专家</span>)
                    <dd class="editor p-author h-card vcard" data-editor-id="1438">
                        <a class="p-name fn u-url url" href="https://svgees.us/">Chris Lilley</a> (<span
                            class="p-org org">W3C</span>)
                    <dt>建议对此规范进行编辑：
                    <dd><a href="https://github.com/w3c/csswg-drafts/blob/main/css-conditional-4/Overview.bs">GitHub
                            编辑</a>
                    <dt>增量规范：
                    <dd>是
                </dl>
            </div>
        </details>
        <div data-fill-with="warning"></div>
        <p class="copyright" data-fill-with="copyright"><a
                href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 2022 <a
                href="https://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a
                href="https://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>, <a
                href="https://www.ercim.eu/"><abbr
                    title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a
                href="https://www.keio.ac.jp/">Keio</a>, <a href="https://ev.buaa.edu.cn/">Beihang</a>). W3C <a
                href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, <a
                href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a
                href="https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document" rel="license">permissive
                document license</a> rules apply. </p>
        <hr title="分隔头部">
    </div>
    <div class="p-summary" data-fill-with="abstract">
        <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">摘要</span></h2>
        <p>本模块包含 CSS 中用于根据处理器或样式表应用环境的能力，对样式表的部分进行条件处理的功能。它包括并扩展了 CSS 条件规则 3 <a data-link-type="biblio"
                href="#biblio-css-conditional-3">[css-conditional-3]</a> 的功能，新增了通过 <a data-link-type="biblio"
                href="#biblio-selectors-4">[SELECTORS-4]</a> 的新 <a class="css" data-link-type="maybe"
                href="https://drafts.csswg.org/scroll-animations-1/#valdef-scroll-timeline-source-selector"
                id="ref-for-valdef-scroll-timeline-source-selector">selector()</a> 符号对 <a data-link-type="dfn"
                href="https://www.w3.org/TR/css3-conditional/#supports-queries" id="ref-for-supports-queries">支持查询</a>
            进行特定选择器支持查询的能力。</p>
        <a href="https://www.w3.org/TR/CSS/">CSS</a> 是一种描述结构化文档（如 HTML 和 XML）在屏幕上、纸上等渲染方式的语言。
    </div>
    <h2 class="no-num no-toc no-ref heading settled" id="status">
        <span class="content">本文档的状态</span>
    </h2>
    <div data-fill-with="status">
        <p><em>本节描述了本文档在发布时的状态。有关当前 W3C 出版物的列表以及本技术报告的最新版本，请参见 <a href="https://www.w3.org/TR/">W3C 技术报告索引
                    https://www.w3.org/TR/</a>。</em></p>
        <p>本文档由 <a href="https://www.w3.org/groups/wg/css">CSS 工作组</a> 作为<strong>候选推荐标准快照</strong>发布，使用了 <a
                href="https://www.w3.org/2021/Process-20211102/#recs-and-notes">推荐轨道</a>。发布为候选推荐标准并不意味着 <abbr
                title="万维网联盟">W3C</abbr> 及其成员的认可。候选推荐标准快照已经接受了<a
                href="https://www.w3.org/2021/Process-20211102/#dfn-wide-review">广泛的审查</a>，旨在收集实现经验，并且工作组成员承诺对实现进行<a
                href="https://www.w3.org/Consortium/Patent-Policy/#sec-Requirements">免版税许可</a>。本文档旨在成为 W3C
            推荐标准；为收集更多反馈，它将至少保持候选推荐标准状态到 <time class="status-deadline" datetime="2022-04-17">2022 年 4 月 17 日</time>。</p>
        <p>请通过<a href="https://github.com/w3c/csswg-drafts/issues">在 GitHub
                上提交问题</a>（推荐）来提供反馈，并在标题中包含规范代码“css-conditional”，例如：“[css-conditional] <i>…评论摘要…</i>”。所有问题和评论都被<a
                href="https://lists.w3.org/Archives/Public/public-css-archive/">存档</a>。或者，可以将反馈发送到（<a
                href="https://lists.w3.org/Archives/Public/www-style/">存档</a>）公共邮件列表 <a
                href="mailto:www-style@w3.org?Subject=%5Bcss-conditional%5D%20PUT%20SUBJECT%20HERE">www-style@w3.org</a>。
        </p>
        <p>本文档受 <a href="https://www.w3.org/2021/Process-20211102/" id="w3c_process_revision">2021 年 11 月 2 日 W3C
                流程文档</a> 管辖。</p>
        <p>本文档由遵循 <a href="https://www.w3.org/Consortium/Patent-Policy-20200915/">W3C 专利政策</a> 的工作组制作。W3C
            维护了与该工作组交付物有关的任何专利声明的<a href="https://www.w3.org/groups/wg/css/ipr"
                rel="disclosure">公开列表</a>；该页面还包括披露专利的说明。知晓某项专利并相信其包含<a
                href="https://www.w3.org/Consortium/Patent-Policy-20200915/#def-essential">必要声明</a>的个人，必须按照 <a
                href="https://www.w3.org/Consortium/Patent-Policy-20200915/#sec-Disclosure">W3C 专利政策第 6 节</a> 的要求披露信息。
        </p>
        <p></p>
    </div>
    <div data-fill-with="at-risk"></div>
    <nav data-fill-with="table-of-contents" id="toc">
        <h2 class="no-num no-toc no-ref" id="contents">目录</h2>
        <ol class="toc" role="directory">
            <li><a href="#introduction"><span class="secno">1</span> <span class="content">介绍</span></a>
            <li>
                <a href="#at-supports-ext"><span class="secno">2</span> <span class="content"> <span
                            class="css">@supports</span> 规则的扩展</span></a>
                <ol class="toc">
                    <li><a href="#support-definition-ext"><span class="secno">2.1</span> <span class="content">
                                对支持定义的扩展</span></a>
                </ol>
            <li><a href="#security"><span class="secno"></span> <span class="content">安全考虑</span></a>
            <li><a href="#privacy"><span class="secno"></span> <span class="content">隐私考虑</span></a>
            <li><a href="#acknowledgments"><span class="secno"></span> <span class="content">致谢</span></a>
            <li>
                <a href="#changes"><span class="secno"></span> <span class="content"> 变更</span></a>
                <ol class="toc">
                    <li><a href="#changes-from-20200303"><span class="secno"></span> <span class="content"> 自
                                <span>2020年3月3日首次公开工作草案</span>以来的变更</span></a>
                    <li><a href="#changes-from-L4"><span class="secno"></span> <span class="content">
                                自第3级以来的新增内容</span></a>
                </ol>
            <li>
                <a href="#w3c-conformance"><span class="secno"></span> <span class="content">一致性</span></a>
                <ol class="toc">
                    <li><a href="#w3c-conventions"><span class="secno"></span> <span class="content">文档约定</span></a>
                    <li><a href="#w3c-conformance-classes"><span class="secno"></span> <span
                                class="content">一致性类别</span></a>
                    <li>
                        <a href="#w3c-partial"><span class="secno"></span> <span class="content">部分实现</span></a>
                        <ol class="toc">
                            <li><a href="#w3c-conform-future-proofing"><span class="secno"></span> <span
                                        class="content">不稳定和专有功能的实现</span></a>
                        </ol>
                    <li><a href="#w3c-testing"><span class="secno"></span> <span class="content">非实验性实现</span></a>
                    <li><a href="#w3c-cr-exit-criteria"><span class="secno"></span> <span
                                class="content">CR退出标准</span></a>
                </ol>
            <li>
                <a href="#index"><span class="secno"></span> <span class="content">索引</span></a>
                <ol class="toc">
                    <li><a href="#index-defined-here"><span class="secno"></span> <span
                                class="content">本规范定义的术语</span></a>
                    <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span
                                class="content">通过引用定义的术语</span></a>
                </ol>
            <li>
                <a href="#references"><span class="secno"></span> <span class="content">参考文献</span></a>
                <ol class="toc">
                    <li><a href="#normative"><span class="secno"></span> <span class="content">规范性参考文献</span></a>
                    <li><a href="#informative"><span class="secno"></span> <span class="content">说明性参考文献</span></a>
                </ol>
            <li><a href="#issues-index"><span class="secno"></span> <span class="content">问题索引</span></a>
        </ol>
    </nav>
    <main>
        <h2 class="heading settled" data-level="1" id="introduction"><span class="secno">1. </span><span
                class="content">介绍</span><a class="self-link" href="#introduction"></a></h2>
        <p class="issue" id="issue-283f0a3c"><a class="self-link" href="#issue-283f0a3c"></a> 第三级中的特性仍定义在<a
                data-link-type="biblio" href="#biblio-css-conditional-3">[css-conditional-3]</a>中，尚未复制到此处。</p>
        <p>本级别对<a class="css" data-link-type="maybe" href="https://www.w3.org/TR/css3-conditional/#at-ruledef-supports"
                id="ref-for-at-ruledef-supports">@supports</a>规则进行了扩展，以允许测试支持的选择器。</p>

        <h2 class="heading settled" data-level="2" id="at-supports-ext"><span class="secno">2. </span><span
                class="content"> <a class="css" data-link-type="maybe"
                    href="https://www.w3.org/TR/css3-conditional/#at-ruledef-supports"
                    id="ref-for-at-ruledef-supports①">@supports</a> 规则的扩展</span><a class="self-link"
                href="#at-supports-ext"></a></h2>
        <p>本级别的规范扩展了<a class="production css" data-link-type="type" href="#typedef-supports-feature"
                id="ref-for-typedef-supports-feature">&lt;supports-feature></a>语法，具体如下：</p>

        <pre class="prod def"><dfn class="dfn-paneled" data-dfn-type="type" data-export id="typedef-supports-feature">&lt;supports-feature></dfn> = <a class="production" data-link-type="type" href="#typedef-supports-selector-fn" id="ref-for-typedef-supports-selector-fn">&lt;supports-selector-fn></a> <a data-link-type="grammar" href="https://www.w3.org/TR/css-values-4/#comb-one" id="ref-for-comb-one">|</a> <a class="production" data-link-type="type" href="https://www.w3.org/TR/css3-conditional/#typedef-supports-decl" id="ref-for-typedef-supports-decl">&lt;supports-decl></a>
<dfn class="dfn-paneled" data-dfn-type="type" data-export id="typedef-supports-selector-fn">&lt;supports-selector-fn></dfn> = selector( <a class="production" data-link-type="type" href="https://www.w3.org/TR/selectors-4/#typedef-complex-selector" id="ref-for-typedef-complex-selector">&lt;complex-selector></a> )
</pre>

        <dl>
            <dt data-md><a class="production css" data-link-type="type" href="#typedef-supports-selector-fn"
                    id="ref-for-typedef-supports-selector-fn①">&lt;supports-selector-fn></a>
            <dd data-md>
                <p>如果用户代理 <a href="#dfn-support-selector" id="ref-for-dfn-support-selector">支持提供给函数的选择器</a>，则结果为 true。
                </p>
        </dl>

        <details class="wpt-tests-block" dir="ltr" lang="en" open>
            <summary>测试</summary>
            <ul class="wpt-tests-list">
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/css-conditional/at-supports-selector-001.html"
                        title="css/css-conditional/at-supports-selector-001.html">at-supports-selector-001.html</a> <a
                        class="wpt-live"
                        href="http://wpt.live/css/css-conditional/at-supports-selector-001.html"><small>(在线测试)</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/css-conditional/at-supports-selector-001.html"><small>(源代码)</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/css-conditional/at-supports-selector-002.html"
                        title="css/css-conditional/at-supports-selector-002.html">at-supports-selector-002.html</a> <a
                        class="wpt-live"
                        href="http://wpt.live/css/css-conditional/at-supports-selector-002.html"><small>(在线测试)</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/css-conditional/at-supports-selector-002.html"><small>(源代码)</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/css-conditional/at-supports-selector-003.html"
                        title="css/css-conditional/at-supports-selector-003.html">at-supports-selector-003.html</a> <a
                        class="wpt-live"
                        href="http://wpt.live/css/css-conditional/at-supports-selector-003.html"><small>(在线测试)</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/css-conditional/at-supports-selector-003.html"><small>(源代码)</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/css-conditional/at-supports-selector-004.html"
                        title="css/css-conditional/at-supports-selector-004.html">at-supports-selector-004.html</a> <a
                        class="wpt-live"
                        href="http://wpt.live/css/css-conditional/at-supports-selector-004.html"><small>(在线测试)</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/css-conditional/at-supports-selector-004.html"><small>(源代码)</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/css-conditional/js/CSS-supports-L4.html"
                        title="css/css-conditional/js/CSS-supports-L4.html">CSS-supports-L4.html</a> <a class="wpt-live"
                        href="http://wpt.live/css/css-conditional/js/CSS-supports-L4.html"><small>(在线测试)</small></a> <a
                        class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/css-conditional/js/CSS-supports-L4.html"><small>(源代码)</small></a>
            </ul>
        </details>

        <div class="example" id="ex-selector">
            <a class="self-link" href="#ex-selector"></a> 这个例子测试了<a data-link-type="dfn"
                href="https://www.w3.org/TR/selectors-4/#column-combinator" id="ref-for-column-combinator">列组合器</a> (||)
            是否在选择器中受支持，如果支持，就使用它来样式化表中的特定单元格。
            <pre class="lang-css highlight"><c- n>@supports</c-> <c- nf>selector</c-><c- p>(</c->col || td<c- p>)</c-> <c- p>{</c->
  col.selected || td <c- p>{</c->
    <c- k>background</c-><c- p>:</c-> tan<c- p>;</c->
  <c- p>}</c->
<c- p>}</c->
</pre>
        </div>

        <p>在 <a data-link-type="dfn" href="https://www.w3.org/TR/css3-conditional/#conditional-group-rule"
                id="ref-for-conditional-group-rule">条件分组规则</a>中使用的任何命名空间前缀都必须已经声明，否则它们是无效的<a data-link-type="biblio"
                href="#biblio-css-conditional-3">[css-conditional-3]</a>。这包括选择器函数中的命名空间前缀。</p>

        <details class="wpt-tests-block" dir="ltr" lang="en" open>
            <summary>测试</summary>
            <ul class="wpt-tests-list">
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/css/css-conditional/at-supports-namespace-002.html"
                        title="css/css-conditional/at-supports-namespace-002.html">at-supports-namespace-002.html</a> <a
                        class="wpt-live"
                        href="http://wpt.live/css/css-conditional/at-supports-namespace-002.html"><small>(在线测试)</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/css/css-conditional/at-supports-namespace-002.html"><small>(源代码)</small></a>
            </ul>
        </details>

        <div class="invalid example" id="ex-ns-selector-invalid">
            <a class="self-link" href="#ex-ns-selector-invalid"></a> 这个例子尝试检查带有 <a data-link-type="dfn"
                href="https://www.w3.org/TR/css-namespaces-3/#css-qualified-name" id="ref-for-css-qualified-name">CSS
                限定名称</a> 的属性选择器是否受支持，但无效，因为命名空间前缀没有声明。
            <pre class="lang-css highlight"><c- n>@supports</c-> <c- nf>selector</c-><c- p>(</c->a<c- p>[</c->xlink|href<c- p>])</c-> <c- p>{</c->
  // do something<c- p>,</c-> but fail
  <c- p>}</c->
<c- p>}</c->
</pre>
        </div>

        <div class="example" id="ex-ns-selector">
            <a class="self-link" href="#ex-ns-selector"></a> 这个例子检查带有 <a data-link-type="dfn"
                href="https://www.w3.org/TR/css-namespaces-3/#css-qualified-name" id="ref-for-css-qualified-name①">CSS
                限定名称</a> 的属性选择器是否受支持。
            <pre class="lang-css highlight"><c- n>@namespace</c-> x <c- nf>url</c-><c- p>(</c-><c- s>http://www.w3.org/1999/xlink</c-><c- p>);</c->
<c- n>@supports</c-> <c- nf>selector</c-><c- p>(</c->a<c- p>[</c->x|href<c- p>])</c-> <c- p>{</c->
  // do something
  <c- p>}</c->
<c- p>}</c->
</pre>
        </div>
        <h3 class="heading settled" data-level="2.1" id="support-definition-ext"><span class="secno">2.1. </span><span
                class="content">对支持定义的扩展</span><a class="self-link" href="#support-definition-ext"></a></h3>
        <p>如果 CSS 处理器接受某个选择器（而不是将其作为解析错误丢弃），并且该选择器不包含<a data-link-type="dfn"
                href="https://drafts.csswg.org/selectors-4/#unknown--webkit--pseudo-elements"
                id="ref-for-unknown--webkit--pseudo-elements">未知的 -webkit- 伪元素</a>，则认为该 CSS 处理器<dfn class="dfn-paneled"
                data-dfn-for="CSS" data-dfn-type="dfn" data-export id="dfn-support-selector">支持 CSS 选择器</dfn>。</p>

        <h2 class="no-num heading settled" id="security"><span class="content">安全考虑</span><a class="self-link"
                href="#security"></a></h2>
        <p>本文件未提出任何安全问题。</p>

        <h2 class="no-num heading settled" id="privacy"><span class="content">隐私考虑</span><a class="self-link"
                href="#privacy"></a></h2>
        <p><a class="css" data-link-type="maybe"
                href="https://drafts.csswg.org/scroll-animations-1/#valdef-scroll-timeline-source-selector"
                id="ref-for-valdef-scroll-timeline-source-selector①">selector()</a>函数可能会提供有关用户软件的信息，例如其版本以及是否运行具有启用或禁用某些功能的非默认设置。
        </p>
        <p>此信息也可以通过其他 API 确定。然而，本规范中的功能是这些信息在 Web 上公开的方式之一。</p>
        <p>此信息也可以聚合用于提高用户<a href="https://www.w3.org/2001/tag/doc/unsanctioned-tracking/">指纹识别</a>的准确性。</p>

        <h2 class="no-num heading settled" id="acknowledgments"><span class="content">致谢</span><a class="self-link"
                href="#acknowledgments"></a></h2>
        <p>编辑们要感谢本模块<a href="https://www.w3.org/TR/css-conditional-3/#acknowledgements">上一版本</a>的所有贡献者。</p>

        <h2 class="no-num heading settled" id="changes"><span class="content">变更</span><a class="self-link"
                href="#changes"></a></h2>
        <h3 class="no-num heading settled" id="changes-from-20200303"><span class="content">自<a
                    href="https://www.w3.org/TR/2020/WD-css-conditional-4-20200303/">2020年3月3日首次公开工作草案</a>以来的变更</span><a
                class="self-link" href="#changes-from-20200303"></a></h3>
        <ul>
            <li>添加了<a href="#privacy">隐私</a>和<a href="#security">安全</a>章节。</li>
            <li>添加了一些示例。</li>
            <li>澄清了命名空间前缀声明的要求适用于 selector() 内的选择器（<a href="https://github.com/w3c/csswg-drafts/issues/3220">Issue
                    3220</a>）。</li>
        </ul>

        <h3 class="no-num heading settled" id="changes-from-L4"><span class="content">自第3级以来的新增内容</span><a
                class="self-link" href="#changes-from-L4"></a></h3>
        <ul>
            <li>将<a class="css" data-link-type="maybe"
                    href="https://drafts.csswg.org/scroll-animations-1/#valdef-scroll-timeline-source-selector"
                    id="ref-for-valdef-scroll-timeline-source-selector②">selector()</a>表示法添加到<a data-link-type="dfn"
                    href="https://www.w3.org/TR/css3-conditional/#supports-queries"
                    id="ref-for-supports-queries①">supports 查询</a>中。</li>
        </ul>
    </main>
    <h2 class="no-ref no-num heading settled" id="w3c-conformance"><span class="content">一致性</span><a class="self-link"
            href="#w3c-conformance"></a></h2>
    <h3 class="no-ref heading settled" id="w3c-conventions"><span class="content">文档约定</span><a class="self-link"
            href="#w3c-conventions"></a></h3>
    <p>一致性要求通过描述性声明和 RFC 2119 术语的组合来表达。关键字“必须（MUST）”、“不可（MUST NOT）”、“必需（REQUIRED）”、“应（SHALL）”、“不应（SHALL
        NOT）”、“应当（SHOULD）”、“不应当（SHOULD NOT）”、“推荐（RECOMMENDED）”、“可以（MAY）”和“可选（OPTIONAL）”在本规范的规范性部分中应按照 RFC 2119
        的描述来解释。然而，为了便于阅读，这些词在本规范中不会全部以大写字母出现。</p>
    <p>除明确标注为非规范性、示例和注释的章节外，本规范的所有文本都是规范性的。<a data-link-type="biblio" href="#biblio-rfc2119">[RFC2119]</a></p>
    <p>本规范中的示例以“例如”引入，或与规范性文本分开显示，使用<code class="highlight">class=<c- s>"example"</c-></code>，例如：</p>
    <div class="example" id="w3c-example">
        <a class="self-link" href="#w3c-example"></a>
        <p>这是一个说明性示例。</p>
    </div>
    <p>说明性注释以“注”开头，并与规范性文本分开，使用<code class="highlight">class=<c- s>"note"</c-></code>，例如：</p>
    <p class="note" role="note">注意，这是一个说明性注释。</p>
    <p>建议性内容是为了引起特别注意的规范性部分，并与其他规范性文本分开，使用<code
            class="highlight">&lt;strong class=<c- s>"advisement"</c->></code>，例如：<strong
            class="advisement">用户代理必须（MUST）提供一个可访问的替代方案。</strong></p>
    <details class="wpt-tests-block" dir="ltr" lang="en" open>
        <summary>测试</summary>
        <p>与本规范内容相关的测试可能会在像这样的“测试”块中进行记录。任何这样的块都是非规范性的。</p>
        <ul class="wpt-tests-list"></ul>
        <hr>
    </details>

    <h3 class="no-ref heading settled" id="w3c-conformance-classes"><span class="content">一致性类别</span><a
            class="self-link" href="#w3c-conformance-classes"></a></h3>
    <p>本规范的一致性定义了三个一致性类别：</p>
    <dl>
        <dt>样式表</dt>
        <dd><a href="https://www.w3.org/TR/CSS21/conform.html#style-sheet">CSS 样式表</a>。</dd>
        <dt>渲染器</dt>
        <dd><a href="https://www.w3.org/TR/CSS21/conform.html#user-agent">用户代理（UA）</a>，解释样式表的语义并渲染使用它们的文档。</dd>
        <dt>编写工具</dt>
        <dd><a href="https://www.w3.org/TR/CSS21/conform.html#user-agent">用户代理（UA）</a>，编写样式表。</dd>
    </dl>

    <p>如果样式表中使用了本模块中定义的语法的所有语句都是有效的，根据通用 CSS 语法和本模块中定义的每个功能的单独语法，则该样式表符合本规范。</p>
    <p>如果渲染器除了按照适当的规范解释样式表外，还能通过正确解析支持本规范中定义的所有功能并相应地渲染文档，则该渲染器符合本规范。然而，由于设备的限制而导致用户代理无法正确渲染文档，并不使其不符合规范。（例如，用户代理不要求在单色显示器上呈现颜色。）
    </p>
    <p>如果编写工具编写的样式表在语法上是根据通用 CSS 语法和本模块中定义的每个功能的单独语法正确的，并且符合本模块中描述的样式表的所有其他一致性要求，则该编写工具符合本规范。</p>

    <h3 class="no-ref heading settled" id="w3c-partial"><span class="content">部分实现</span><a class="self-link"
            href="#w3c-partial"></a></h3>
    <p>为了让作者能够利用向前兼容的解析规则来分配后备值，CSS 渲染器<strong>必须</strong>将所有不具备可用支持级别的 at 规则、属性、属性值、关键字和其他语法结构视为无效（并<a
            href="https://www.w3.org/TR/CSS21/conform.html#ignore">适当忽略</a>）。特别是，用户代理<strong>不得</strong>选择性地忽略不支持的组件值并在单个多值属性声明中保留支持的值：如果任何值被认为是无效的（如同不支持的值必须是的那样），CSS
        要求整个声明被忽略。</p>
    <h4 class="heading settled" id="w3c-conform-future-proofing"><span class="content">不稳定和专有功能的实现</span><a
            class="self-link" href="#w3c-conform-future-proofing"></a></h4>
    <p>为了避免与未来的稳定 CSS 功能发生冲突，CSS 工作组建议<a href="https://www.w3.org/TR/CSS/#future-proofing">遵循最佳实践</a>来实现<a
            href="https://www.w3.org/TR/CSS/#unstable">不稳定的</a>功能和<a
            href="https://www.w3.org/TR/CSS/#proprietary-extension">专有扩展</a>。</p>

    <h3 class="no-ref heading settled" id="w3c-testing"><span class="content">非实验性实现</span><a class="self-link"
            href="#w3c-testing"></a></h3>
    <p>一旦规范达到候选推荐（CR）阶段，就可以进行非实验性实现，且实现者应发布不加前缀的实现版本，对于任何符合 CR 级别且能够证明正确实现的功能。</p>
    <p>为了建立和保持 CSS 在实现之间的互操作性，CSS 工作组要求非实验性 CSS 渲染器在发布不加前缀的 CSS 功能实现之前向 W3C 提交实现报告（如有必要，还需提交实现报告所用的测试用例）。提交给 W3C 的测试用例须由
        CSS 工作组进行审查和修正。</p>
    <p>有关提交测试用例和实现报告的更多信息，请参见 CSS 工作组网站上的<a
            href="https://www.w3.org/Style/CSS/Test/">https://www.w3.org/Style/CSS/Test/</a>。如有疑问，请联系<a
            href="https://lists.w3.org/Archives/Public/public-css-testsuite">public-css-testsuite@w3.org</a>邮件列表。</p>

    <h3 class="no-ref heading settled" id="w3c-cr-exit-criteria"><span class="content">CR 退出标准</span><a
            class="self-link" href="#w3c-cr-exit-criteria"></a></h3>
    <p>为了将本规范推进到提议推荐（PR），每个功能必须至少有两个独立且互操作的实现。每个功能可以由不同的产品实现，不要求所有功能都由同一产品实现。为满足此标准，我们定义以下术语：</p>
    <dl>
        <dt>独立</dt>
        <dd>每个实现必须由不同的开发方开发，且不能共享、重用或派生于另一符合条件的实现所使用的代码。对本规范的实现没有影响的代码部分不在此要求范围之内。</dd>

        <dt>互操作</dt>
        <dd>通过官方 CSS 测试套件中的相应测试用例，或如果实现不是 Web
            浏览器，则通过等效测试。如果使用这样的用户代理（UA）来声明互操作性，则每个相关的测试套件应有一个等效的测试被创建。此外，如果使用这样的用户代理（UA）来声明互操作性，则必须有一个或多个其他的用户代理也能通过这些等效测试，目的是证明互操作性。这些等效测试必须公开以供同行审查。
        </dd>

        <dt>实现</dt>
        <dd>
            用户代理，需符合以下条件：
            <ol class="inline">
                <li>实现规范。</li>
                <li>对公众可用。该实现可以是正式发布的产品或其他公开可用的版本（例如，测试版本、预览版或“每夜构建版”）。非正式发布的产品版本必须在至少一个月内实现该功能以证明其稳定性。</li>
                <li>不是实验性（例如，专门为了通过测试套件而设计的版本且不是为了正常使用的）。</li>
            </ol>
        </dd>
    </dl>
    <p>规范将在候选推荐阶段保留至少六个月。</p>
    <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
    <h2 class="no-num no-ref heading settled" id="index"><span class="content">索引</span><a class="self-link"
            href="#index"></a></h2>
    <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">本规范定义的术语</span><a
            class="self-link" href="#index-defined-here"></a></h3>
    <ul class="index">
        <li><a href="#dfn-support-selector">支持 CSS 选择器</a><span>，在 § 2.1 中</span></li>
        <li><a href="#typedef-supports-feature">&lt;supports-feature></a><span>，在 § 2 中</span></li>
        <li><a href="#typedef-supports-selector-fn">&lt;supports-selector-fn></a><span>，在 § 2 中</span></li>
    </ul>
    <aside class="dfn-panel" data-for="term-for-typedef-supports-decl">
        <a
            href="https://www.w3.org/TR/css3-conditional/#typedef-supports-decl">https://www.w3.org/TR/css3-conditional/#typedef-supports-decl</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-typedef-supports-decl">2.
                    Extensions to the @supports rule</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-at-ruledef-supports">
        <a
            href="https://www.w3.org/TR/css3-conditional/#at-ruledef-supports">https://www.w3.org/TR/css3-conditional/#at-ruledef-supports</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-at-ruledef-supports">1. Introduction</a>
            <li><a href="#ref-for-at-ruledef-supports①">2.
                    Extensions to the @supports rule</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-conditional-group-rule">
        <a
            href="https://www.w3.org/TR/css3-conditional/#conditional-group-rule">https://www.w3.org/TR/css3-conditional/#conditional-group-rule</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-conditional-group-rule">2.
                    Extensions to the @supports rule</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-supports-queries">
        <a
            href="https://www.w3.org/TR/css3-conditional/#supports-queries">https://www.w3.org/TR/css3-conditional/#supports-queries</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-supports-queries">Unnumbered Section</a>
            <li><a href="#ref-for-supports-queries①"> Additions since Level 3</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-css-qualified-name">
        <a
            href="https://www.w3.org/TR/css-namespaces-3/#css-qualified-name">https://www.w3.org/TR/css-namespaces-3/#css-qualified-name</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-css-qualified-name">2.
                    Extensions to the @supports rule</a> <a href="#ref-for-css-qualified-name①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-comb-one">
        <a href="https://www.w3.org/TR/css-values-4/#comb-one">https://www.w3.org/TR/css-values-4/#comb-one</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-comb-one">2.
                    Extensions to the @supports rule</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-valdef-scroll-timeline-source-selector">
        <a
            href="https://drafts.csswg.org/scroll-animations-1/#valdef-scroll-timeline-source-selector">https://drafts.csswg.org/scroll-animations-1/#valdef-scroll-timeline-source-selector</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-valdef-scroll-timeline-source-selector">Unnumbered Section</a>
            <li><a href="#ref-for-valdef-scroll-timeline-source-selector①">Privacy Considerations</a>
            <li><a href="#ref-for-valdef-scroll-timeline-source-selector②"> Additions since Level 3</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-typedef-complex-selector">
        <a
            href="https://www.w3.org/TR/selectors-4/#typedef-complex-selector">https://www.w3.org/TR/selectors-4/#typedef-complex-selector</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-typedef-complex-selector">2.
                    Extensions to the @supports rule</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-column-combinator">
        <a
            href="https://www.w3.org/TR/selectors-4/#column-combinator">https://www.w3.org/TR/selectors-4/#column-combinator</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-column-combinator">2.
                    Extensions to the @supports rule</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-unknown--webkit--pseudo-elements">
        <a
            href="https://drafts.csswg.org/selectors-4/#unknown--webkit--pseudo-elements">https://drafts.csswg.org/selectors-4/#unknown--webkit--pseudo-elements</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-unknown--webkit--pseudo-elements">2.1.
                    Extensions to the definition of support</a>
        </ul>
    </aside>
    <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">通过引用定义的术语</span><a
            class="self-link" href="#index-defined-elsewhere"></a></h3>
    <ul class="index">
        <li>
            <a data-link-type="biblio">[css-conditional-3]</a> 定义以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-typedef-supports-decl">&lt;supports-decl></span></li>
                <li><span class="dfn-paneled" id="term-for-at-ruledef-supports">@supports</span></li>
                <li><span class="dfn-paneled" id="term-for-conditional-group-rule">条件组规则</span></li>
                <li><span class="dfn-paneled" id="term-for-supports-queries">支持查询</span></li>
            </ul>
        </li>
        <li>
            <a data-link-type="biblio">[css-namespaces-3]</a> 定义以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-css-qualified-name">CSS 合格名称</span></li>
            </ul>
        </li>
        <li>
            <a data-link-type="biblio">[css-values-4]</a> 定义以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-comb-one">|</span></li>
            </ul>
        </li>
        <li>
            <a data-link-type="biblio">[SCROLL-ANIMATIONS]</a> 定义以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-valdef-scroll-timeline-source-selector">selector()</span>
                </li>
            </ul>
        </li>
        <li>
            <a data-link-type="biblio">[SELECTORS-4]</a> 定义以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-typedef-complex-selector">&lt;complex-selector></span></li>
                <li><span class="dfn-paneled" id="term-for-column-combinator">列组合器</span></li>
                <li><span class="dfn-paneled" id="term-for-unknown--webkit--pseudo-elements">未知的 -webkit- 伪元素</span>
                </li>
            </ul>
        </li>
    </ul>
    <h2 class="no-num no-ref heading settled" id="references"><span class="content">参考文献</span><a class="self-link"
            href="#references"></a></h2>
    <h3 class="no-num no-ref heading settled" id="normative"><span class="content">规范性参考文献</span><a class="self-link"
            href="#normative"></a></h3>
    <dl>
        <dt id="biblio-css-conditional-3">[CSS-CONDITIONAL-3]</dt>
        <dd>David Baron; Elika Etemad; Chris Lilley. <a href="https://www.w3.org/TR/css-conditional-3/"><cite>CSS
                    条件规则模块第 3 级</cite></a>. 2022 年 1 月 13 日. CR. URL: <a
                href="https://www.w3.org/TR/css-conditional-3/">https://www.w3.org/TR/css-conditional-3/</a></dd>

        <dt id="biblio-css-values-4">[CSS-VALUES-4]</dt>
        <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://www.w3.org/TR/css-values-4/"><cite>CSS 值与单位模块第 4
                    级</cite></a>. 2021 年 12 月 16 日. WD. URL: <a
                href="https://www.w3.org/TR/css-values-4/">https://www.w3.org/TR/css-values-4/</a></dd>

        <dt id="biblio-rfc2119">[RFC2119]</dt>
        <dd>S. Bradner. <a href="https://datatracker.ietf.org/doc/html/rfc2119"><cite>在 RFC 中用于表示要求级别的关键词</cite></a>.
            1997 年 3 月. 最佳当前实践. URL: <a
                href="https://datatracker.ietf.org/doc/html/rfc2119">https://datatracker.ietf.org/doc/html/rfc2119</a>
        </dd>

        <dt id="biblio-scroll-animations">[SCROLL-ANIMATIONS]</dt>
        <dd><a href="https://wicg.github.io/scroll-animations/"><cite>滚动链接动画</cite></a>. cg-draft. URL: <a
                href="https://wicg.github.io/scroll-animations/">https://wicg.github.io/scroll-animations/</a></dd>

        <dt id="biblio-selectors-4">[SELECTORS-4]</dt>
        <dd>Elika Etemad; Tab Atkins Jr.. <a href="https://www.w3.org/TR/selectors-4/"><cite>选择器第 4 级</cite></a>. 2018 年
            11 月 21 日. WD. URL: <a href="https://www.w3.org/TR/selectors-4/">https://www.w3.org/TR/selectors-4/</a></dd>
    </dl>
    <h3 class="no-num no-ref heading settled" id="informative"><span class="content">说明性参考文献</span><a class="self-link"
            href="#informative"></a></h3>
    <dl>
        <dt id="biblio-css-namespaces-3">[CSS-NAMESPACES-3]</dt>
        <dd>Elika Etemad. <a href="https://www.w3.org/TR/css-namespaces-3/"><cite>CSS 命名空间模块第 3 级</cite></a>. 2014 年 3 月
            20 日. REC. URL: <a
                href="https://www.w3.org/TR/css-namespaces-3/">https://www.w3.org/TR/css-namespaces-3/</a></dd>
    </dl>
    <h2 class="no-num no-ref heading settled" id="issues-index"><span class="content">问题索引</span><a class="self-link"
            href="#issues-index"></a></h2>
    <div style="counter-reset:issue">
        <div class="issue"> 第 3 级中的功能仍在 <a data-link-type="biblio"
                href="#biblio-css-conditional-3">[css-conditional-3]</a> 中定义，尚未复制到此处。<a class="issue-return"
                href="#issue-283f0a3c" title="跳转到章节">↵</a></div>
    </div>
    <aside class="dfn-panel" data-for="typedef-supports-feature">
        <b><a href="#typedef-supports-feature">#typedef-supports-feature</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-typedef-supports-feature">2.
                    Extensions to the @supports rule</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="typedef-supports-selector-fn">
        <b><a href="#typedef-supports-selector-fn">#typedef-supports-selector-fn</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-typedef-supports-selector-fn">2.
                    Extensions to the @supports rule</a> <a href="#ref-for-typedef-supports-selector-fn①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dfn-support-selector">
        <b><a href="#dfn-support-selector">#dfn-support-selector</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dfn-support-selector">2.
                    Extensions to the @supports rule</a>
        </ul>
    </aside>
    <script>/* script-dfn-panel */

        document.body.addEventListener("click", function (e) {
            var queryAll = function (sel) { return [].slice.call(document.querySelectorAll(sel)); }
            // Find the dfn element or panel, if any, that was clicked on.
            var el = e.target;
            var target;
            var hitALink = false;
            while (el.parentElement) {
                if (el.tagName == "A") {
                    // Clicking on a link in a <dfn> shouldn't summon the panel
                    hitALink = true;
                }
                if (el.classList.contains("dfn-paneled")) {
                    target = "dfn";
                    break;
                }
                if (el.classList.contains("dfn-panel")) {
                    target = "dfn-panel";
                    break;
                }
                el = el.parentElement;
            }
            if (target != "dfn-panel") {
                // Turn off any currently "on" or "activated" panels.
                queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(function (el) {
                    el.classList.remove("on");
                    el.classList.remove("activated");
                });
            }
            if (target == "dfn" && !hitALink) {
                // open the panel
                var dfnPanel = document.querySelector(".dfn-panel[data-for='" + el.id + "']");
                if (dfnPanel) {
                    dfnPanel.classList.add("on");
                    var rect = el.getBoundingClientRect();
                    dfnPanel.style.left = window.scrollX + rect.right + 5 + "px";
                    dfnPanel.style.top = window.scrollY + rect.top + "px";
                    var panelRect = dfnPanel.getBoundingClientRect();
                    var panelWidth = panelRect.right - panelRect.left;
                    if (panelRect.right > document.body.scrollWidth && (rect.left - (panelWidth + 5)) > 0) {
                        // Reposition, because the panel is overflowing
                        dfnPanel.style.left = window.scrollX + rect.left - (panelWidth + 5) + "px";
                    }
                } else {
                    console.log("Couldn't find .dfn-panel[data-for='" + el.id + "']");
                }
            } else if (target == "dfn-panel") {
                // Switch it to "activated" state, which pins it.
                el.classList.add("activated");
                el.style.left = null;
                el.style.top = null;
            }

        });
    </script>
    <script>/* script-wpt */
        let wptPath = "/css/css-conditional/";
        "use strict";

        document.addEventListener("DOMContentLoaded", async () => {
            if (wptPath == "/") return;

            const runsUrl = "https://wpt.fyi/api/runs?label=master&label=stable&max-count=1&product=chrome&product=firefox&product=safari&product=edge";
            const runs = await (await fetch(runsUrl)).json();

            const testResults = await (await fetch("https://wpt.fyi/api/search", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify({
                    "run_ids": runs.map(x => x.id),
                    "query": { "path": wptPath },
                })
            })).json();

            const browsers = runs.map(x => ({ name: x.browser_name, version: x.browser_version, passes: 0, total: 0 }));
            const resultsFromPath = new Map(testResults.results.map(result => {
                const testPath = result.test;
                const passes = result.legacy_status.map(x => [x.passes, x.total]);
                return [testPath, passes];
            }));
            document.querySelectorAll(".wpt-name").forEach(nameEl => {
                const passData = resultsFromPath.get("/" + nameEl.getAttribute("title"));
                const numTests = passData[0][1];
                if (numTests > 1) {
                    nameEl.insertAdjacentElement("beforeend",
                        el("small", {}, ` (${numTests} tests)`));
                }
                if (passData == undefined) return;
                passData.forEach((p, i) => {
                    browsers[i].passes += p[0];
                    browsers[i].total += p[1];
                })
                const resultsEl = el("span", { "class": "wpt-results" },
                    ...passData.map((p, i) => el("span",
                        {
                            "title": `${browsers[i].name} ${p[0]}/${p[1]}`,
                            "class": "wpt-result",
                            "style": `background: conic-gradient(forestgreen ${p[0] / p[1] * 360}deg, darkred 0deg);`,
                        })),
                );
                nameEl.insertAdjacentElement("afterend", resultsEl);
            });
            const overview = document.querySelector(".wpt-overview");
            if (overview) {
                overview.appendChild(el('ul', {}, ...browsers.map(formatWptResult)));
                document.head.appendChild(el('style', {},
                    `.wpt-overview ul { display: flex; flex-flow: row wrap; gap: .2em; justify-content: start; list-style: none; padding: 0; margin: 0;}
             .wpt-overview li { padding: .25em 1em; color: black; text-align: center; }
             .wpt-overview img { height: 1.5em; height: max(1.5em, 32px); background: transparent; }
             .wpt-overview .browser { font-weight: bold; }
             .wpt-overview .passes-none { background: #e57373; }
             .wpt-overview .passes-hardly { background: #ffb74d; }
             .wpt-overview .passes-a-few { background: #ffd54f; }
             .wpt-overview .passes-half { background: #fff176; }
             .wpt-overview .passes-lots { background: #dce775; }
             .wpt-overview .passes-most { background: #aed581; }
             .wpt-overview .passes-all { background: #81c784; }`));
            }
        });
        function el(name, attrs, ...content) {
            const x = document.createElement(name);
            for (const [k, v] of Object.entries(attrs)) {
                x.setAttribute(k, v);
            }
            for (let child of content) {
                if (typeof child == "string") child = document.createTextNode(child);
                try {
                    x.appendChild(child);
                } catch (e) { console.log({ x, child }); }
            }
            return x;
        }
        function formatWptResult({ name, version, passes, total }) {
            const passRate = passes / total;
            let passClass = "";
            if (passRate == 0) passClass = "passes-none";
            else if (passRate < .2) passClass = "passes-hardly";
            else if (passRate < .4) passClass = "passes-a-few";
            else if (passRate < .6) passClass = "passes-half";
            else if (passRate < .8) passClass = "passes-lots";
            else if (passRate < 1) passClass = "passes-most";
            else passClass = "passes-all";

            name = name[0].toUpperCase() + name.slice(1);
            const shortVersion = /^\d+/.exec(version);
            const icon = []

            if (name == "Chrome") icon.push(el('img', { alt: "", src: "https://wpt.fyi/static/chrome-dev_64x64.png" }));
            if (name == "Edge") icon.push(el('img', { alt: "", src: "https://wpt.fyi/static/edge-dev_64x64.png" }));
            if (name == "Safari") icon.push(el('img', { alt: "", src: "https://wpt.fyi/static/safari-preview_64x64.png" }));
            if (name == "Firefox") icon.push(el('img', { alt: "", src: "https://wpt.fyi/static/firefox-nightly_64x64.png" }));

            return el('li', { "class": passClass },
                el('nobr', { 'class': 'browser' }, ...icon, ` ${name} ${shortVersion}`),
                el('br', {}),
                el('nobr', { 'class': 'pass-rate' }, `${passes}/${total}`)
            );
        }</script>
    <script src="/dropdown.js"></script>