<!doctype html>
<html lang="zh-hans">

<head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <title>CSS 空间导航 第 1 级</title>
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
    <meta content="exploring" name="csswg-work-status">
    <meta content="WD" name="w3c-status">
    <meta content="本规范定义了使用方向键导航焦点的通用模型，以及相关的 CSS、JavaScript 特性和事件。" name="abstract">
    <link href="https://www.w3.org/TR/css-nav-1/default.css" rel="stylesheet" type="text/css">
    <meta content="Bikeshed version 83d3ceadc5400c8422976bbcbe49615aace9cf1e" name="generator">
    <link href="https://www.w3.org/TR/css-nav-1/" rel="canonical">
    <style>
        code.key {
            border: solid 1px;
            border-radius: 0.5ch;
            padding: 1px 5px;
        }

        .output {
            background: white;
            padding: 1em;
        }
    </style>
    <style>
        #api-check:checked~.api,
        #api-check:checked~* .api {
            display: none;
        }

        #cssapi-check:checked~.cssapi,
        #cssapi-check:checked~* .cssapi {
            display: none;
        }

        #verbose-check:checked~.verbose,
        #verbose-check:checked~* .verbose {
            display: none;
        }
    </style>
    <style>
        #example-cal table,
        #example-cal td,
        #example-cal th {
            border-collapse: collapse;
            border: solid 1px;
        }

        #example-cal th {
            text-align: center;
        }

        #example-cal td {
            width: 12.5%;
        }

        #example-cal {
            display: grid;
            grid-template-columns: auto 1fr auto;
        }

        #example-cal button {
            align-self: center;
        }

        /* For browsers that don’t support grid */
        #example-cal table {
            display: inline-table;
            vertical-align: middle;
        }
    </style>
    <style>
        /* style-md-lists */

        /* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
        [data-md]> :first-child {
            margin-top: 0;
        }

        [data-md]> :last-child {
            margin-bottom: 0;
        }
    </style>
    <style>
        /* style-selflinks */

        .heading,
        .issue,
        .note,
        .example,
        li,
        dt {
            position: relative;
        }

        a.self-link {
            position: absolute;
            top: 0;
            left: calc(-1 * (3.5rem - 26px));
            width: calc(3.5rem - 26px);
            height: 2em;
            text-align: center;
            border: none;
            transition: opacity .2s;
            opacity: .5;
        }

        a.self-link:hover {
            opacity: 1;
        }

        .heading>a.self-link {
            font-size: 83%;
        }

        li>a.self-link {
            left: calc(-1 * (3.5rem - 26px) - 2em);
        }

        dfn>a.self-link {
            top: auto;
            left: auto;
            opacity: 0;
            width: 1.5em;
            height: 1.5em;
            background: gray;
            color: white;
            font-style: normal;
            transition: opacity .2s, background-color .2s, color .2s;
        }

        dfn:hover>a.self-link {
            opacity: 1;
        }

        dfn>a.self-link:hover {
            color: black;
        }

        a.self-link::before {
            content: "¶";
        }

        .heading>a.self-link::before {
            content: "§";
        }

        dfn>a.self-link::before {
            content: "#";
        }
    </style>
    <style>
        /* style-counters */

        body {
            counter-reset: example figure issue;
        }

        .issue {
            counter-increment: issue;
        }

        .issue:not(.no-marker)::before {
            content: "Issue " counter(issue);
        }

        .example {
            counter-increment: example;
        }

        .example:not(.no-marker)::before {
            content: "Example " counter(example);
        }

        .invalid.example:not(.no-marker)::before,
        .illegal.example:not(.no-marker)::before {
            content: "Invalid Example" counter(example);
        }

        figcaption {
            counter-increment: figure;
        }

        figcaption:not(.no-marker)::before {
            content: "Figure " counter(figure) " ";
        }
    </style>
    <style>
        /* style-var-click-highlighting */

        var {
            cursor: pointer;
        }

        var.selected0 {
            background-color: #F4D200;
            box-shadow: 0 0 0 2px #F4D200;
        }

        var.selected1 {
            background-color: #FF87A2;
            box-shadow: 0 0 0 2px #FF87A2;
        }

        var.selected2 {
            background-color: #96E885;
            box-shadow: 0 0 0 2px #96E885;
        }

        var.selected3 {
            background-color: #3EEED2;
            box-shadow: 0 0 0 2px #3EEED2;
        }

        var.selected4 {
            background-color: #EACFB6;
            box-shadow: 0 0 0 2px #EACFB6;
        }

        var.selected5 {
            background-color: #82DDFF;
            box-shadow: 0 0 0 2px #82DDFF;
        }

        var.selected6 {
            background-color: #FFBCF2;
            box-shadow: 0 0 0 2px #FFBCF2;
        }
    </style>
    <style>
        /* style-autolinks */

        .css.css,
        .property.property,
        .descriptor.descriptor {
            color: #005a9c;
            font-size: inherit;
            font-family: inherit;
        }

        .css::before,
        .property::before,
        .descriptor::before {
            content: "‘";
        }

        .css::after,
        .property::after,
        .descriptor::after {
            content: "’";
        }

        .property,
        .descriptor {
            /* Don't wrap property and descriptor names */
            white-space: nowrap;
        }

        .type {
            /* CSS value <type> */
            font-style: italic;
        }

        pre .property::before,
        pre .property::after {
            content: "";
        }

        [data-link-type="property"]::before,
        [data-link-type="propdesc"]::before,
        [data-link-type="descriptor"]::before,
        [data-link-type="value"]::before,
        [data-link-type="function"]::before,
        [data-link-type="at-rule"]::before,
        [data-link-type="selector"]::before,
        [data-link-type="maybe"]::before {
            content: "‘";
        }

        [data-link-type="property"]::after,
        [data-link-type="propdesc"]::after,
        [data-link-type="descriptor"]::after,
        [data-link-type="value"]::after,
        [data-link-type="function"]::after,
        [data-link-type="at-rule"]::after,
        [data-link-type="selector"]::after,
        [data-link-type="maybe"]::after {
            content: "’";
        }

        [data-link-type].production::before,
        [data-link-type].production::after,
        .prod [data-link-type]::before,
        .prod [data-link-type]::after {
            content: "";
        }

        [data-link-type=element],
        [data-link-type=element-attr] {
            font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
            font-size: .9em;
        }

        [data-link-type=element]::before {
            content: "<"
        }

        [data-link-type=element]::after {
            content: ">"
        }

        [data-link-type=biblio] {
            white-space: pre;
        }
    </style>
    <style>
        /* style-dfn-panel */

        .dfn-panel {
            position: absolute;
            z-index: 35;
            height: auto;
            width: -webkit-fit-content;
            width: fit-content;
            max-width: 300px;
            max-height: 500px;
            overflow: auto;
            padding: 0.5em 0.75em;
            font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
            background: #DDDDDD;
            color: black;
            border: outset 0.2em;
        }

        .dfn-panel:not(.on) {
            display: none;
        }

        .dfn-panel * {
            margin: 0;
            padding: 0;
            text-indent: 0;
        }

        .dfn-panel>b {
            display: block;
        }

        .dfn-panel a {
            color: black;
        }

        .dfn-panel a:not(:hover) {
            text-decoration: none !important;
            border-bottom: none !important;
        }

        .dfn-panel>b+b {
            margin-top: 0.25em;
        }

        .dfn-panel ul {
            padding: 0;
        }

        .dfn-panel li {
            list-style: inside;
        }

        .dfn-panel.activated {
            display: inline-block;
            position: fixed;
            left: .5em;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - 1.5em - .4em - .5em);
            max-height: 30vh;
        }

        .dfn-paneled {
            cursor: pointer;
        }
    </style>
    <style>
        /* style-syntax-highlighting */
        pre.idl.highlight {
            color: #708090;
        }

        .highlight:not(.idl) {
            background: hsl(24, 20%, 95%);
        }

        code.highlight {
            padding: .1em;
            border-radius: .3em;
        }

        pre.highlight,
        pre>code.highlight {
            display: block;
            padding: 1em;
            margin: .5em 0;
            overflow: auto;
            border-radius: 0;
        }

        c-[a] {
            color: #990055
        }

        /* Keyword.Declaration */
        c-[b] {
            color: #990055
        }

        /* Keyword.Type */
        c-[c] {
            color: #708090
        }

        /* Comment */
        c-[d] {
            color: #708090
        }

        /* Comment.Multiline */
        c-[e] {
            color: #0077aa
        }

        /* Name.Attribute */
        c-[f] {
            color: #669900
        }

        /* Name.Tag */
        c-[g] {
            color: #222222
        }

        /* Name.Variable */
        c-[k] {
            color: #990055
        }

        /* Keyword */
        c-[l] {
            color: #000000
        }

        /* Literal */
        c-[m] {
            color: #000000
        }

        /* Literal.Number */
        c-[n] {
            color: #0077aa
        }

        /* Name */
        c-[o] {
            color: #999999
        }

        /* Operator */
        c-[p] {
            color: #999999
        }

        /* Punctuation */
        c-[s] {
            color: #a67f59
        }

        /* Literal.String */
        c-[t] {
            color: #a67f59
        }

        /* Literal.String.Single */
        c-[u] {
            color: #a67f59
        }

        /* Literal.String.Double */
        c-[cp] {
            color: #708090
        }

        /* Comment.Preproc */
        c-[c1] {
            color: #708090
        }

        /* Comment.Single */
        c-[cs] {
            color: #708090
        }

        /* Comment.Special */
        c-[kc] {
            color: #990055
        }

        /* Keyword.Constant */
        c-[kn] {
            color: #990055
        }

        /* Keyword.Namespace */
        c-[kp] {
            color: #990055
        }

        /* Keyword.Pseudo */
        c-[kr] {
            color: #990055
        }

        /* Keyword.Reserved */
        c-[ld] {
            color: #000000
        }

        /* Literal.Date */
        c-[nc] {
            color: #0077aa
        }

        /* Name.Class */
        c-[no] {
            color: #0077aa
        }

        /* Name.Constant */
        c-[nd] {
            color: #0077aa
        }

        /* Name.Decorator */
        c-[ni] {
            color: #0077aa
        }

        /* Name.Entity */
        c-[ne] {
            color: #0077aa
        }

        /* Name.Exception */
        c-[nf] {
            color: #0077aa
        }

        /* Name.Function */
        c-[nl] {
            color: #0077aa
        }

        /* Name.Label */
        c-[nn] {
            color: #0077aa
        }

        /* Name.Namespace */
        c-[py] {
            color: #0077aa
        }

        /* Name.Property */
        c-[ow] {
            color: #999999
        }

        /* Operator.Word */
        c-[mb] {
            color: #000000
        }

        /* Literal.Number.Bin */
        c-[mf] {
            color: #000000
        }

        /* Literal.Number.Float */
        c-[mh] {
            color: #000000
        }

        /* Literal.Number.Hex */
        c-[mi] {
            color: #000000
        }

        /* Literal.Number.Integer */
        c-[mo] {
            color: #000000
        }

        /* Literal.Number.Oct */
        c-[sb] {
            color: #a67f59
        }

        /* Literal.String.Backtick */
        c-[sc] {
            color: #a67f59
        }

        /* Literal.String.Char */
        c-[sd] {
            color: #a67f59
        }

        /* Literal.String.Doc */
        c-[se] {
            color: #a67f59
        }

        /* Literal.String.Escape */
        c-[sh] {
            color: #a67f59
        }

        /* Literal.String.Heredoc */
        c-[si] {
            color: #a67f59
        }

        /* Literal.String.Interpol */
        c-[sx] {
            color: #a67f59
        }

        /* Literal.String.Other */
        c-[sr] {
            color: #a67f59
        }

        /* Literal.String.Regex */
        c-[ss] {
            color: #a67f59
        }

        /* Literal.String.Symbol */
        c-[vc] {
            color: #0077aa
        }

        /* Name.Variable.Class */
        c-[vg] {
            color: #0077aa
        }

        /* Name.Variable.Global */
        c-[vi] {
            color: #0077aa
        }

        /* Name.Variable.Instance */
        c-[il] {
            color: #000000
        }

        /* Literal.Number.Integer.Long */
    </style>
    <link href="https://www.w3.org/StyleSheets/TR/2016/W3C-WD" rel="stylesheet" type="text/css">

<body class="h-entry">
    <div class="head">
        <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48"
                    src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" width="72"> </a> </p>
        <h1 class="p-name no-ref" id="title">CSS 空间导航 第 1 级</h1>
        <h2 class="no-num no-toc no-ref heading settled" id="subtitle">W3C 工作草案 2019 年 11 月 26 日</h2>
        <div data-fill-with="spec-metadata">
            <dl>
                <dt>此版本：
                <dd><a class="u-url"
                        href="https://www.w3.org/TR/2019/WD-css-nav-1-20191126/">https://www.w3.org/TR/2019/WD-css-nav-1-20191126/</a>
                <dt>最新发布的版本：
                <dd><a href="https://www.w3.org/TR/css-nav-1/">https://www.w3.org/TR/css-nav-1/</a>
                <dt>编辑草案：
                <dd><a href="https://drafts.csswg.org/css-nav-1/">https://drafts.csswg.org/css-nav-1/</a>
                <dt>以前的版本：
                <dd><a href="https://www.w3.org/TR/2019/WD-css-nav-1-20190423/"
                        rel="prev">https://www.w3.org/TR/2019/WD-css-nav-1-20190423/</a>
                <dt>问题跟踪：
                <dd><a href="#issues-index">规范中的内联问题</a>
                <dd><a href="https://github.com/w3c/csswg-drafts/labels/css-nav-1">GitHub 问题</a>
                <dt class="editor">编辑：
                <dd class="editor p-author h-card vcard" data-editor-id="79168"><a class="p-name fn u-email email"
                        href="mailto:jh.hong@lge.com">Jihye Hong</a> (<span class="p-org org">LG 电子</span>)
                <dd class="editor p-author h-card vcard" data-editor-id="43241"><a class="p-name fn u-url url"
                        href="https://florian.rivoal.net">Florian Rivoal</a> (<span class="p-org org">受邀专家</span>)
                <dt>建议对本规范进行编辑：
                <dd><a href="https://github.com/w3c/csswg-drafts/blob/master/css-nav-1/Overview.bs">GitHub 编辑器</a>
            </dl>
        </div>
        <div data-fill-with="warning"></div>
        <p class="copyright" data-fill-with="copyright"><a
                href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 2019 <a
                href="https://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a
                href="https://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>, <a
                href="https://www.ercim.eu/"><abbr
                    title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a
                href="https://www.keio.ac.jp/">Keio</a>, <a href="https://ev.buaa.edu.cn/">Beihang</a>). W3C <a
                href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, <a
                href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a
                href="https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document">permissive document
                license</a> rules apply. </p>
        <hr title="标题分隔线">
    </div>
    <div class="p-summary" data-fill-with="abstract">
        <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">摘要</span></h2>
        <p>本规范定义了使用方向键导航焦点的通用模型，以及相关的 CSS、JavaScript 特性和事件。</p>
        <a href="https://www.w3.org/TR/CSS/">CSS</a> 是一种用于描述结构化文档（如 HTML 和 XML）在屏幕、纸张等上的渲染的语言。
    </div>
    <h2 class="no-num no-toc no-ref heading settled" id="status"><span class="content">本文档状态</span></h2>
    <div data-fill-with="status">
        <p><em>本节描述了本文档在发布时的状态。其他文档可能会取代本文档。W3C 当前发布的文档列表及本技术报告的最新版本可在 <a href="https://www.w3.org/TR/">W3C 技术报告索引
                    https://www.w3.org/TR/</a> 找到。</em> </p>
        <p>作为工作草案的发布不意味着 W3C 成员对其的认可。此文档为草案，可能会随时更新、替换或被其他文档废止。在引用时，本文档只能作为正在进行的工作引用。 </p>
        <p><a href="https://github.com/w3c/csswg-drafts/issues">GitHub 问题</a>是讨论本规范的首选方式。
            提交问题时，请在标题中注明“css-nav”，
            最好像这样：“[css-nav] <i data-lt>…评论摘要…</i>”。
            所有问题和评论都已 <a href="https://lists.w3.org/Archives/Public/public-css-archive/">归档</a>，
            并且还有一个<a href="https://lists.w3.org/Archives/Public/www-style/">历史归档</a>。 </p>
        <p>本规范由 <a href="https://www.w3.org/Style/CSS/">CSS 工作组</a> 制定。</p>
        <p>本文件由按照 <a href="https://www.w3.org/Consortium/Patent-Policy/">W3C 专利政策</a> 运作的小组编制。
            W3C 维护一份 <a href="https://www.w3.org/2004/01/pp-impl/32061/status" rel="disclosure">任何专利披露的公开列表</a>，
            该页面还包括披露专利的说明。任何有实际专利信息并认为包含 <a href="https://www.w3.org/Consortium/Patent-Policy/#def-essential">基本声明</a>
            的个人，
            必须按照 <a href="https://www.w3.org/Consortium/Patent-Policy/#sec-Disclosure">W3C 专利政策第 6 条</a> 披露该信息。</p>
        <p>本文件受 <a href="https://www.w3.org/2019/Process-20190301/" id="w3c_process_revision">2019 年 3 月 1 日 W3C
                流程文档</a> 管辖。</p>
        <p></p>
    </div>
    <div data-fill-with="at-risk">
        <p>以下功能存在风险，可能会在 CR 期间被删除：</p>
        <ul>
            <li><code
                    class="idl"><a data-link-type="idl" href="#dom-element-getspatialnavigationcontainer" id="ref-for-dom-element-getspatialnavigationcontainer">getSpatialNavigationContainer()</a></code>
            <li><code
                    class="idl"><a data-link-type="idl" href="#dom-element-focusableareas" id="ref-for-dom-element-focusableareas">focusableAreas()</a></code>
            <li><a class="property" data-link-type="propdesc" href="#propdef-spatial-navigation-contain"
                    id="ref-for-propdef-spatial-navigation-contain">spatial-navigation-contain</a>
            <li><a class="css" data-link-type="propdesc" href="#propdef-spatial-navigation-action"
                    id="ref-for-propdef-spatial-navigation-action">spatial-navigation-action: scroll</a>
            <li><a class="property" data-link-type="propdesc" href="#propdef-spatial-navigation-function"
                    id="ref-for-propdef-spatial-navigation-function">spatial-navigation-function</a>
        </ul>
        <p>“存在风险”是 W3C
            流程的一个术语，并不一定意味着该功能有被删除或延迟的危险。这意味着工作组认为该功能可能在可互操作性实施上遇到困难，标记为此类允许工作组在过渡到提议推荐阶段时，如果必要，可以删除该功能，而无需先发布一个不包含该功能的新的候选推荐文档。
        </p>
    </div>
    <nav data-fill-with="table-of-contents" id="toc">
        <h2 class="no-num no-toc no-ref" id="contents">目录</h2>
        <ol class="toc" role="directory">
            <li><a href="#intro"><span class="secno">1</span> <span class="content">介绍</span></a>
            <li><a href="#interaction"><span class="secno">2</span> <span class="content">模块交互</span></a>
            <li><a href="#overview"><span class="secno">3</span> <span class="content">概述</span></a>
            <li><a href="#triggering"><span class="secno">4</span> <span class="content">触发空间导航</span></a>
            <li>
                <a href="#js-api"><span class="secno">5</span> <span class="content">JavaScript API</span></a>
                <ol class="toc">
                    <li><a href="#high-level-api"><span class="secno">5.1</span> <span
                                class="content">以编程方式触发导航</span></a>
                    <li><a href="#low-level-api"><span class="secno">5.2</span> <span class="content">低级 API</span></a>
                </ol>
            <li>
                <a href="#events-navigationevent"><span class="secno">6</span> <span class="content">导航事件</span></a>
                <ol class="toc">
                    <li><a href="#interface-focusevent"><span class="secno">6.1</span> <span class="content">接口
                                NavigationEvent</span></a>
                    <li>
                        <a href="#events-nav-type"><span class="secno">6.2</span> <span
                                class="content">导航事件类型</span></a>
                        <ol class="toc">
                            <li><a href="#event-type-navbeforefocus"><span class="secno">6.2.1</span> <span
                                        class="content"><code>navbeforefocus</code></span></a>
                            <li><a href="#event-type-navnotarget"><span class="secno">6.2.2</span> <span
                                        class="content"><code>navnotarget</code></span></a>
                        </ol>
                </ol>
            <li><a href="#policy-feature"><span class="secno">7</span> <span class="content">
                        <span>navigation-override</span> <span>受政策控制的特性</span></span></a>
            <li>
                <a href="#processing-model"><span class="secno">8</span> <span class="content">处理模型</span></a>
                <ol class="toc">
                    <li><a href="#glossary"><span class="secno">8.1</span> <span class="content">术语表</span></a>
                    <li><a href="#grouping"><span class="secno">8.2</span> <span class="content">元素的分组</span></a>
                    <li><a href="#nav"><span class="secno">8.3</span> <span class="content">导航</span></a>
                    <li><a href="#heuristics"><span class="secno">8.4</span> <span class="content">焦点导航启发式算法</span></a>
                </ol>
            <li>
                <a href="#declarative"><span class="secno">9</span> <span class="content">通过声明方式控制空间导航</span></a>
                <ol class="toc">
                    <li><a href="#container"><span class="secno">9.1</span> <span class="content">创建额外的空间导航容器：<span
                                    class="property">spatial-navigation-contain</span> 属性</span></a>
                    <li><a href="#css-property-spatialnavigationaction"><span class="secno">9.2</span> <span
                                class="content">控制与滚动的交互：<span class="property">spatial-navigation-action</span>
                                属性</span></a>
                    <li><a href="#css-property-spatialnavigationfunction"><span class="secno">9.3</span> <span
                                class="content">选择导航算法：<span class="property">spatial-navigation-function</span>
                                属性</span></a>
                </ol>
            <li><a href="#scrolling"><span class="secno"></span> <span class="content">附录 A. 滚动扩展</span></a>
            <li><a href="#privsec"><span class="secno"></span> <span class="content">附录 B. 隐私与安全注意事项</span></a>
            <li><a href="#ack"><span class="secno"></span> <span class="content">致谢</span></a>
            <li><a href="#changes"><span class="secno"></span> <span class="content">更改记录</span></a>
            <li>
                <a href="#conformance"><span class="secno"></span> <span class="content">符合性</span></a>
                <ol class="toc">
                    <li><a href="#document-conventions"><span class="secno"></span> <span
                                class="content">文档约定</span></a>
                    <li><a href="#conform-classes"><span class="secno"></span> <span class="content">符合性类别</span></a>
                    <li>
                        <a href="#conform-responsible"><span class="secno"></span> <span class="content">CSS
                                负责任实现要求</span></a>
                        <ol class="toc">
                            <li><a href="#conform-partial"><span class="secno"></span> <span
                                        class="content">部分实现</span></a>
                            <li><a href="#conform-future-proofing"><span class="secno"></span> <span
                                        class="content">不稳定和专有特性的实现</span></a>
                            <li><a href="#conform-testing"><span class="secno"></span> <span
                                        class="content">候选推荐阶段特性的实现</span></a>
                        </ol>
                </ol>
            <li>
                <a href="#index"><span class="secno"></span> <span class="content">索引</span></a>
                <ol class="toc">
                    <li><a href="#index-defined-here"><span class="secno"></span> <span
                                class="content">本规范定义的术语</span></a>
                    <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span
                                class="content">引用定义的术语</span></a>
                </ol>
            <li>
                <a href="#references"><span class="secno"></span> <span class="content">参考文献</span></a>
                <ol class="toc">
                    <li><a href="#normative"><span class="secno"></span> <span class="content">规范性参考文献</span></a>
                    <li><a href="#informative"><span class="secno"></span> <span class="content">说明性参考文献</span></a>
                </ol>
            <li><a href="#property-index"><span class="secno"></span> <span class="content">属性索引</span></a>
            <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL 索引</span></a>
            <li><a href="#issues-index"><span class="secno"></span> <span class="content">问题索引</span></a>
        </ol>
    </nav>
    <main>
        <p>本规范相当长。为了便于阅读和专注于特定区域，以下提供了一些复选框。选中它们可以隐藏部分规范。这仅作为阅读辅助工具，规范仍然是完整的文档。</p>
        <input id="api-check" type="checkbox">
        <label for="api-check">隐藏 JavaScript API，包括事件</label>
        <br>
        <input id="cssapi-check" type="checkbox">
        <label for="cssapi-check">隐藏启用行为变体选择的 CSS 属性及相关信息</label>
        <br>
        <input id="verbose-check" type="checkbox">
        <label for="verbose-check">隐藏解释和总结规范部分但不增加更多信息的说明性部分</label>
        <br>
        <h2 class="non-normative heading settled" data-level="1" id="intro"><span class="secno">1. </span><span
                class="content">介绍</span><a class="self-link" href="#intro"></a></h2>
        <p><em>本节非规范性。</em></p>
        <p>历史上，大多数浏览器没有提供功能让用户方向性地移动焦点。一些浏览器，如电视浏览器，出于必要让用户使用方向键移动焦点，因为典型的电视遥控器上没有其他输入机制。</p>
        <p>其他一些浏览器支持不同的组合键来控制空间导航，例如按住 <code class="key">Shift</code> 键与方向键一起使用。</p>
        <p>这种在页面上方向性移动的能力被称为 <dfn class="dfn-paneled" data-dfn-type="dfn" data-export
                data-lt="spatial navigation | spatialNavigation" id="spatial-navigation">空间导航</dfn>。</p>
        <p><a data-link-type="dfn" href="#spatial-navigation" id="ref-for-spatial-navigation">空间导航</a>
            对于使用网格布局或其他以非线性为主的布局构建的网页很有用。下图显示了一个以网格布局排列的相册。如果用户按 <code class="key">Tab</code>
            键在图片间移动焦点，他们需要多次按键才能到达目标图片元素。</p>
        <figure>
            <img alt="当元素按网格模式排列时，空间导航使得预测和控制焦点的移动更加容易。" src="https://www.w3.org/TR/css-nav-1/images/gallery-app.png"
                style="width: 500px;">
            <figcaption>使用网格布局的相册应用示例</figcaption>
        </figure>
        <p>此外，<a data-link-type="dfn" href="#spatial-navigation" id="ref-for-spatial-navigation①">空间导航</a>
            可以根据可聚焦元素的位置在它们之间移动，使焦点移动对用户来说是可预测的。有时页面上的元素并不是独立于它们的源顺序排列的。因此，与 <span
                id="ref-for-spatial-navigation②">空间导航</span> 不同，使用 <code class="key">Tab</code> 键的顺序导航使焦点导航变得不可预测。</p>
        <p>虽然方向键自然适合控制空间导航，但之前没有规范描述这种方式如何工作，或如何控制它。<span class="api">本规范引入了空间导航的处理模型，以及允许作者控制和覆盖空间导航工作方式的 API。</span>
        </p>
        <p class="note" role="note"><span>注意：</span> 本规范的某些方面，例如 JavaScript 事件和 API，也可以扩展到顺序导航，以确保键盘导航具有一致且定义明确的模型。</p>
        <p class="note" role="note"><span>注意：</span> 作为一般原则，键盘导航，尤其是空间导航，应该在没有 JavaScript 的情况下也可以使用和控制<span
                class="cssapi">，因此声明式解决方案是首选。由于空间导航依赖于布局，CSS 通常是定义空间导航相关控制的正确机制</span>。<span class="api">然而，本着<a
                    href="https://github.com/extensibleweb/manifesto">可扩展 Web 宣言</a> <a data-link-type="biblio"
                    href="#biblio-extensible">[EXTENSIBLE]</a> 的精神，我们认为提供合适的 JavaScript 原语让作者进行实验和探索问题空间是很重要的。基于通过这些
                JavaScript 使用获得的反馈和经验，可能会添加更多的声明式特性。</span></p>
        <p class="note" role="note"><span>注意：</span> 一些特性被标记为 <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="at-risk">风险</dfn>。本规范的编辑认为这些特性代表了用户或作者体验的重要部分。同时，本规范的核心功能可以在没有实现这些特性的情况下实现，因此似乎可能实现者会选择降低它们的优先级，以减少首次实现的范围。虽然希望这些特性也能被实现，但它们被标记为风险，以承认它们可能不会在初期被实现。
        </p>
        <h2 class="heading settled" data-level="2" id="interaction"><span class="secno">2. </span><span class="content">
                模块交互</span><a class="self-link" href="#interaction"></a></h2>
        <p>本文档依赖于 Infra 标准 <a data-link-type="biblio" href="#biblio-infra">[infra]</a>。</p>
        <p>关键字 "MUST"、"MUST NOT"、"REQUIRED"、"SHALL"、"SHALL NOT"、"SHOULD"、"SHOULD NOT"、"RECOMMENDED"、"NOT
            RECOMMENDED"、"MAY" 和 "OPTIONAL" 的解释方式如 RFC 2119 中所述。<a data-link-type="biblio"
                href="#biblio-rfc2119">[RFC2119]</a></p>
        <div class="verbose">
            <h2 class="non-normative heading settled" data-level="3" id="overview"><span class="secno">3. </span><span
                    class="content">概述</span><a class="self-link" href="#overview"></a></h2>
            <p><em>本节非规范性。</em></p>
            <p>使用 UA 定义的机制（通常是方向键，可能与修饰键如 <code class="key">Shift</code> 或 <code class="key">Control</code>
                组合使用），用户可以请求用户代理向特定方向导航。这将会使焦点从当前位置移动到请求方向上的一个新的可聚焦项，或者在没有适当项时进行滚动。</p>
            <p>更具体地说，用户代理将首先在当前 <a data-link-type="dfn" href="#spatial-navigation-containers"
                    id="ref-for-spatial-navigation-containers">空间导航容器</a>（<span class="cssapi">默认情况下</span>为根元素、可滚动元素和
                iframe <span class="cssapi">，但其他元素也可以通过使用 <a class="property" data-link-type="propdesc"
                        href="#propdef-spatial-navigation-contain"
                        id="ref-for-propdef-spatial-navigation-contain①">spatial-navigation-contain</a> 属性将其设为 <a
                        data-link-type="dfn" href="#spatial-navigation-containers"
                        id="ref-for-spatial-navigation-containers①">空间导航容器</a></span>）中搜索可见且可聚焦的元素。</p>
            <p>如果找到任何元素，它将选择该方向上最合适的元素并移动焦点到那里。</p>
            <p>如果未找到任何元素，它将滚动请求方向上的 <a data-link-type="dfn" href="#spatial-navigation-containers"
                    id="ref-for-spatial-navigation-containers②">空间导航容器</a>，而不是移动焦点。这样做可能会显示出可聚焦的元素，这些元素在下一次请求同一方向的空间导航时将成为合格目标。
            </p>
            <p>如果 <a data-link-type="dfn" href="#spatial-navigation-containers"
                    id="ref-for-spatial-navigation-containers③">空间导航容器</a>
                不能滚动，无论是因为它不是可滚动的元素还是因为它在该方向上已经滚动到最大，用户代理将选择祖先链中的下一个 <span
                    id="ref-for-spatial-navigation-containers④">空间导航容器</span>，并递归地重复上述过程，直到找到焦点元素或可滚动的元素，或者到达根元素。</p>
            <p class="note" role="note"><span>注意：</span>
                由于这种处理模型，通过顺序导航和空间导航可达的元素几乎相同。在可滚动元素视口之外的元素只有在被滚动到视图中后才能通过空间导航到达。因此，默认情况下无法滚动到视图中的元素。</p>
            <div class="api">
                在寻找空间导航请求的适当响应的关键点期间，用户代理将触发事件。这使作者能够阻止即将发生的动作（通过调用 <code
                    class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-preventdefault" id="ref-for-dom-event-preventdefault">preventDefault()</a></code>），并在需要时提供替代动作，例如使用
                <code
                    class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/interaction.html#dom-focus" id="ref-for-dom-focus">focus()</a></code>
                方法将焦点移动到作者选择的其他元素。
                <p>为了帮助作者编写这些替代动作，作为根据 <a href="https://github.com/extensibleweb/manifesto">Extensible Web</a>
                    原则公开底层平台原语的一部分，本规范还定义了 JavaScript API，公开底层模型的关键构造。</p>
                <p>有关 JavaScript API 的详细信息，请参阅 <a href="#js-api">§ 5 JavaScript API</a>；有关各种事件的详细信息，请参阅 <a
                        href="#events-nav-type">§ 6.2 导航事件类型</a>；有关 CSS 属性的详细信息，请参阅 <a href="#declarative">§ 9
                        通过声明方式控制空间导航</a>。</p>
            </div>
            <div class="example" id="example-8205e5a4">
                <a class="self-link" href="#example-8205e5a4"></a>
                本示例展示了一系列在可滚动元素中排列的可聚焦元素在使用空间导航时如何被导航。为了简单起见，此示例假设用户代理通过方向键触发空间导航。
                <figure>
                    <img alt src="https://www.w3.org/TR/css-nav-1/images/spatnav-scroll-visible-1.png"
                        style="width: 200px;">
                    <img alt src="https://www.w3.org/TR/css-nav-1/images/spatnav-scroll-visible-2.png"
                        style="width: 200px;">
                    <figcaption>在 <a data-link-type="dfn" href="#spatial-navigation-containers"
                            id="ref-for-spatial-navigation-containers⑤">空间导航容器</a> 中移动到可见元素。</figcaption>
                </figure>
                <p>在图 2 的左侧，"Box 2" 处于焦点。按下 <code class="key">ArrowDown</code> 键将焦点移动到 "Box 3"，因为 "Box 3" 位于 <a
                        data-link-type="dfn" href="https://www.w3.org/TR/css-overflow-3/#scrollport"
                        id="ref-for-scrollport">scrollport</a> 的可见区域中，所以没有进行滚动。</p>
                <figure>
                    <img alt src="https://www.w3.org/TR/css-nav-1/images/spatnav-scroll-invisible-1.png"
                        style="width: 160px;">
                    <img alt src="https://www.w3.org/TR/css-nav-1/images/spatnav-scroll-invisible-2.png"
                        style="width: 160px;">
                    <img alt src="https://www.w3.org/TR/css-nav-1/images/spatnav-scroll-invisible-3.png"
                        style="width: 160px;">
                    <img alt src="https://www.w3.org/TR/css-nav-1/images/spatnav-scroll-invisible-4.png"
                        style="width: 160px;">
                    <figcaption>在 <a data-link-type="dfn" href="#spatial-navigation-containers"
                            id="ref-for-spatial-navigation-containers⑥">空间导航容器</a> 中移动到隐藏的元素。</figcaption>
                </figure>
                <p>在图 3 的第一个图中，在 "Box 3" 下面，<a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-overflow-3/#scrollport" id="ref-for-scrollport①">scrollport</a>
                    中没有任何可见的元素。因此，按下 <code class="key">ArrowDown</code> 键的效果是向下滚动，如第二张图所示。再按 <code
                        class="key">ArrowDown</code> 键，将 "Box 4" 滚动到 <span
                        id="ref-for-scrollport②">scrollport</span>，当再一次按下 <code class="key">ArrowDown</code> 键时，焦点将移动到
                    "Box 4"。</p>
                <p>本示例使用的标记如下：</p>
                <pre class="lang-css highlight"><c- f>#scroller </c-><c- p>{</c->
    <c- k>width</c-><c- p>:</c-> <c- m>700</c-><c- l>px</c-><c- p>;</c->
    <c- k>height</c-><c- p>:</c-> <c- m>700</c-><c- l>px</c-><c- p>;</c->
    <c- k>overflow-x</c-><c- p>:</c-> hidden<c- p>;</c->
    <c- k>overflow-y</c-><c- p>:</c-> auto<c- p>;</c->
<c- p>}</c->

<c- f>.box </c-><c- p>{</c->
    <c- k>width</c-><c- p>:</c-> <c- m>150</c-><c- l>px</c-><c- p>;</c->
    <c- k>height</c-><c- p>:</c-> <c- m>110</c-><c- l>px</c-><c- p>;</c->
    <c- k>background-color</c-><c- p>:</c-> blue<c- p>;</c->
<c- p>}</c->

<c- f>.box:focus </c-><c- p>{</c->
    <c- k>background-color</c-><c- p>:</c-> red<c- p>;</c->
<c- p>}</c->
</pre>
                <pre class="lang-html highlight"><c- p>&lt;</c-><c- f>div</c-> <c- e>id</c-><c- o>=</c-><c- s>"scroller"</c-><c- p>></c->
    <c- p>&lt;</c-><c- f>div</c-> <c- e>class</c-><c- o>=</c-><c- s>"box"</c-> <c- e>tabindex</c-><c- o>=</c-><c- s>"0"</c-><c- p>></c->Box 1<c- p>&lt;/</c-><c- f>div</c-><c- p>></c->
    <c- p>&lt;</c-><c- f>div</c-> <c- e>class</c-><c- o>=</c-><c- s>"box"</c-> <c- e>tabindex</c-><c- o>=</c-><c- s>"0"</c-><c- p>></c->Box 2<c- p>&lt;/</c-><c- f>div</c-><c- p>></c->
    <c- p>&lt;</c-><c- f>div</c-> <c- e>class</c-><c- o>=</c-><c- s>"box"</c-> <c- e>tabindex</c-><c- o>=</c-><c- s>"0"</c-><c- p>></c->Box 3<c- p>&lt;/</c-><c- f>div</c-><c- p>></c->
    <c- p>&lt;</c-><c- f>div</c-> <c- e>class</c-><c- o>=</c-><c- s>"box"</c-> <c- e>tabindex</c-><c- o>=</c-><c- s>"0"</c-><c- p>></c->Box 4<c- p>&lt;/</c-><c- f>div</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>div</c-><c- p>></c->
</pre>
            </div>
        </div>
        <h2 class="heading settled" data-level="4" id="triggering"><span class="secno">4. </span><span class="content">
                触发空间导航</span><a class="self-link" href="#triggering"></a></h2>
        <p>当用户在某个方向上触发空间导航时，用户代理必须在该方向上运行 <a data-link-type="dfn" href="#spatial-navigation-steps"
                id="ref-for-spatial-navigation-steps">空间导航步骤</a>。</p>
        <p>本规范未定义用户代理应向用户提供何种 UI 机制来触发空间导航。这特意留给用户代理决定。</p>
        <div class="note" role="note">注意：预期在具有有限输入能力的设备（如通过遥控器操作的电视、功能手机或使用游戏控制器操作的设备）上，用户代理会将空间导航作为其主要或唯一的导航机制。</div>
        <p>虽然用户代理可以实现本规范定义的处理模型和 API，但本规范建议用户代理应为用户提供一种直接触发空间导航的方式，而无需使用 API。</p>
        <p class="note" role="note"><span>注意：</span>相反，作者应假定即使未调用任何 API，用户代理也可能会因用户操作而触发空间导航。</p>
        <p>无论实际选择了何种机制来触发空间导航，以下要求适用：</p>
        <ul>
            <li data-md>
                <p>如果用户用于触发空间导航的机制通常会触发 <code
                        class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/uievents/#uievent" id="ref-for-uievent">UIEvent</a></code>，则必须在运行
                    <a data-link-type="dfn" href="#spatial-navigation-steps"
                        id="ref-for-spatial-navigation-steps①">空间导航步骤</a> 之前触发该事件，并且如果该事件的 <a data-link-type="dfn"
                        href="https://dom.spec.whatwg.org/#canceled-flag" id="ref-for-canceled-flag">取消标志</a>
                    被设置，则不得运行这些步骤。
                </p>
                <div class="example" id="example-71b5d5f5">
                    <a class="self-link" href="#example-71b5d5f5"></a> 游戏设备可能基于按下方向键触发空间导航，这将导致触发 <a class="idl-code"
                        data-link-type="event" href="https://w3c.github.io/uievents/#keydown"
                        id="ref-for-keydown">keydown</a> 事件，键设置为 <code class="key">ArrowDown</code>、<code
                        class="key">ArrowLeft</code>、<code class="key">ArrowRight</code> 或 <code
                        class="key">ArrowUp</code> 之一，随后（如果未取消）运行 <a data-link-type="dfn"
                        href="#spatial-navigation-steps" id="ref-for-spatial-navigation-steps②">空间导航步骤</a><span
                        class="api">，包括触发相关的 <code
                            class="idl"><a data-link-type="idl" href="#navigationevent" id="ref-for-navigationevent">NavigationEvent</a></code>
                        事件</span>。
                    <p>在桌面计算机上的用户代理使用键盘的方向键触发空间导航时，也会遵循相同的顺序。</p>
                </div>
            <li data-md>
                <p>如果用户用于触发空间导航的机制在某些上下文中还会执行其他操作，则用户代理应优先执行这些其他操作，而不是空间导航，不得同时触发两者。</p>
                <div class="example" id="example-2ce7f9b0"><a class="self-link" href="#example-2ce7f9b0"></a>
                    在使用方向键（不带修饰键）触发空间导航的用户代理中，如果这些方向键还用于移动可编辑元素上的文本插入光标，则方向键默认应用于移动光标。仅当焦点元素不可编辑或可编辑但光标无法在请求方向上进一步移动时，才会由方向键触发空间导航。
                </div>
                <p>滚动是一个例外：由于空间导航本身处理滚动（除了移动焦点之外），用户代理不应提供相同的机制来同时触发空间导航和与空间导航分开的滚动行为。但是，用户代理可以提供一种方式，让用户在不同模式之间切换，或基于不同的
                    UI 机制提供两者。</p>
                <div class="example" id="example-812cd513"><a class="self-link" href="#example-812cd513"></a>
                    用户代理可以有一个设置，允许用户选择使用方向键（不带修饰键）进行空间导航或滚动。另一个用户代理可以在不带修饰符的方向键上提供滚动功能，并在与 <code
                        class="key">Shift</code> 键一起按下时提供空间导航，或者使用 <code class="key">W</code> <code class="key">A</code>
                    <code class="key">S</code> <code class="key">D</code> 键。也有可能仅提供空间导航或仅提供滚动作为按下方向键的响应。
                </div>
        </ul>
        <div class="api">
            <h2 class="heading settled" data-level="5" id="js-api"><span class="secno">5. </span><span class="content">
                    JavaScript API</span><a class="self-link" href="#js-api"></a></h2>
            <h3 class="heading settled" data-level="5.1" id="high-level-api"><span class="secno">5.1. </span><span
                    class="content"> 以编程方式触发导航</span><a class="self-link" href="#high-level-api"></a></h3>
            <p><code
                    class="idl"><a data-link-type="idl" href="#dom-window-navigate" id="ref-for-dom-window-navigate">navigate()</a></code>
                方法允许作者以编程方式触发空间导航，就像用户手动触发一样（例如在浏览器中按下方向键来触发空间导航）。</p>
            <p class="note" role="note"><span>注意：</span> 由于它触发与手动导航相同的处理模型，因此应预期相同的结果：会触发相同的事件链，并且相同的元素将被滚动或聚焦。</p>
            <p class="note" role="note"><span>注意：</span> 作者可以使用此方法基于与用户代理分配的不同 UI
                机制来触发空间导航，例如映射到不同的键，或从可点击的屏幕方向键触发空间导航，或响应其他非 UI
                的事件。它也可用于当作者想要中断导航以执行一些异步操作（例如在无限滚动器中加载更多内容）然后恢复到取消时的导航位置。</p>
            <p class="note" role="note"><span>注意：</span> 此 API 也非常适用于测试目的，因为很难触发不依赖于供应商特定 UI 约定的空间导航。</p>
            <pre class="idl highlight def"><c- b>enum</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="enum" data-export id="enumdef-spatialnavigationdirection"><code><c- g>SpatialNavigationDirection</c-></code></dfn> {
    <dfn class="dfn-paneled idl-code" data-dfn-for="SpatialNavigationDirection" data-dfn-type="enum-value" data-export id="dom-spatialnavigationdirection-up"><code><c- s>"up"</c-></code></dfn>,
    <dfn class="dfn-paneled idl-code" data-dfn-for="SpatialNavigationDirection" data-dfn-type="enum-value" data-export id="dom-spatialnavigationdirection-down"><code><c- s>"down"</c-></code></dfn>,
    <dfn class="dfn-paneled idl-code" data-dfn-for="SpatialNavigationDirection" data-dfn-type="enum-value" data-export id="dom-spatialnavigationdirection-left"><code><c- s>"left"</c-></code></dfn>,
    <dfn class="dfn-paneled idl-code" data-dfn-for="SpatialNavigationDirection" data-dfn-type="enum-value" data-export id="dom-spatialnavigationdirection-right"><code><c- s>"right"</c-></code></dfn>,
};

<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/window-object.html#window" id="ref-for-window"><c- g>Window</c-></a> {
    <c- b>void</c-> <a class="idl-code" data-link-type="method" href="#dom-window-navigate" id="ref-for-dom-window-navigate①"><c- g>navigate</c-></a>(<a class="n" data-link-type="idl-name" href="#enumdef-spatialnavigationdirection" id="ref-for-enumdef-spatialnavigationdirection"><c- n>SpatialNavigationDirection</c-></a> <dfn class="idl-code" data-dfn-for="Window/navigate(dir)" data-dfn-type="argument" data-export id="dom-window-navigate-dir-dir"><code><c- g>dir</c-></code><a class="self-link" href="#dom-window-navigate-dir-dir"></a></dfn>);
};
</pre>
            <div class="algorithm" data-algorithm="windowNavigate steps">
                当调用 <dfn class="dfn-paneled idl-code" data-dfn-for="Window" data-dfn-type="method" data-export
                    id="dom-window-navigate"><code>navigate(dir)</code></dfn> 方法时，用户代理必须运行以下步骤：
                <ul>
                    <li data-md>
                        <p>如果方向 <var>dir</var> 是 <code>"up"</code>、<code>"down"</code>、<code>"left"</code> 或
                            <code>"right"</code>，则在 <var>dir</var> 方向上运行 <a data-link-type="dfn"
                                href="#spatial-navigation-steps" id="ref-for-spatial-navigation-steps③">空间导航步骤</a>。
                        </p>
                </ul>
                <p class="issue" id="issue-a5a227c8"><a class="self-link" href="#issue-a5a227c8"></a> 此 API 的名称正在讨论中 <a
                        href="https://github.com/w3c/csswg-drafts/issues/3387">&lt;https://github.com/w3c/csswg-drafts/issues/3387></a>
                </p>
            </div>
            <h3 class="heading settled" data-level="5.2" id="low-level-api"><span class="secno">5.2. </span><span
                    class="content"> 低级 API</span><a class="self-link" href="#low-level-api"></a></h3>
            <p>这些 API 旨在成为紧密遵循处理模型的低级构造。因此，它们应易于供作者使用来扩展或覆盖空间导航的工作方式。</p>
            <pre class="idl highlight def"><c- b>enum</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="enum" data-export id="enumdef-focusableareasearchmode"><code><c- g>FocusableAreaSearchMode</c-></code></dfn> {
    <dfn class="idl-code" data-dfn-for="FocusableAreaSearchMode" data-dfn-type="enum-value" data-export id="dom-focusableareasearchmode-visible"><code><c- s>"visible"</c-></code><a class="self-link" href="#dom-focusableareasearchmode-visible"></a></dfn>,
    <dfn class="idl-code" data-dfn-for="FocusableAreaSearchMode" data-dfn-type="enum-value" data-export id="dom-focusableareasearchmode-all"><code><c- s>"all"</c-></code><a class="self-link" href="#dom-focusableareasearchmode-all"></a></dfn>
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-focusableareasoption"><code><c- g>FocusableAreasOption</c-></code></dfn> {
    <a class="n" data-link-type="idl-name" href="#enumdef-focusableareasearchmode" id="ref-for-enumdef-focusableareasearchmode"><c- n>FocusableAreaSearchMode</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FocusableAreasOption" data-dfn-type="dict-member" data-export data-type="FocusableAreaSearchMode " id="dom-focusableareasoption-mode"><code><c- g>mode</c-></code></dfn>;
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-spatialnavigationsearchoptions"><code><c- g>SpatialNavigationSearchOptions</c-></code></dfn> {
    <c- b>sequence</c->&lt;<a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#node" id="ref-for-node"><c- n>Node</c-></a>>? <dfn class="dfn-paneled idl-code" data-dfn-for="SpatialNavigationSearchOptions" data-dfn-type="dict-member" data-export data-type="sequence<Node>? " id="dom-spatialnavigationsearchoptions-candidates"><code><c- g>candidates</c-></code></dfn>;
    <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#node" id="ref-for-node①"><c- n>Node</c-></a>? <dfn class="dfn-paneled idl-code" data-dfn-for="SpatialNavigationSearchOptions" data-dfn-type="dict-member" data-export data-type="Node? " id="dom-spatialnavigationsearchoptions-container"><code><c- g>container</c-></code></dfn>;
};

<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://dom.spec.whatwg.org/#element" id="ref-for-element"><c- g>Element</c-></a> {
    <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#node" id="ref-for-node②"><c- n>Node</c-></a> <a class="idl-code" data-link-type="method" href="#dom-element-getspatialnavigationcontainer" id="ref-for-dom-element-getspatialnavigationcontainer①"><c- g>getSpatialNavigationContainer</c-></a>();
    <c- b>sequence</c->&lt;<a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#node" id="ref-for-node③"><c- n>Node</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-element-focusableareas" id="ref-for-dom-element-focusableareas①"><c- g>focusableAreas</c-></a>(<c- b>optional</c-> <a class="n" data-link-type="idl-name" href="#dictdef-focusableareasoption" id="ref-for-dictdef-focusableareasoption"><c- n>FocusableAreasOption</c-></a> <dfn class="idl-code" data-dfn-for="Element/focusableAreas(option), Element/focusableAreas()" data-dfn-type="argument" data-export id="dom-element-focusableareas-option-option"><code><c- g>option</c-></code><a class="self-link" href="#dom-element-focusableareas-option-option"></a></dfn>);
    <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#node" id="ref-for-node④"><c- n>Node</c-></a>? <dfn class="dfn-paneled idl-code" data-dfn-for="Element" data-dfn-type="method" data-export data-lt="spatialNavigationSearch(dir, options)|spatialNavigationSearch(dir)" id="dom-element-spatialnavigationsearch"><code><c- g>spatialNavigationSearch</c-></code></dfn>(<a class="n" data-link-type="idl-name" href="#enumdef-spatialnavigationdirection" id="ref-for-enumdef-spatialnavigationdirection①"><c- n>SpatialNavigationDirection</c-></a> <dfn class="idl-code" data-dfn-for="Element/spatialNavigationSearch(dir, options), Element/spatialNavigationSearch(dir)" data-dfn-type="argument" data-export id="dom-element-spatialnavigationsearch-dir-options-dir"><code><c- g>dir</c-></code><a class="self-link" href="#dom-element-spatialnavigationsearch-dir-options-dir"></a></dfn>, <c- b>optional</c-> <a class="n" data-link-type="idl-name" href="#dictdef-spatialnavigationsearchoptions" id="ref-for-dictdef-spatialnavigationsearchoptions"><c- n>SpatialNavigationSearchOptions</c-></a> <dfn class="idl-code" data-dfn-for="Element/spatialNavigationSearch(dir, options), Element/spatialNavigationSearch(dir)" data-dfn-type="argument" data-export id="dom-element-spatialnavigationsearch-dir-options-options"><code><c- g>options</c-></code><a class="self-link" href="#dom-element-spatialnavigationsearch-dir-options-options"></a></dfn>);
};
</pre>
            <p class="note" role="note"><span>注意：</span> 表达方向的方式使我们可以在必要时扩展到超过4个方向的导航，可以添加更多方向关键字或数值角度。</p>
            <p class="note" role="note"><span>注意：</span> <code
                    class="idl"><a data-link-type="idl" href="#dom-element-focusableareas" id="ref-for-dom-element-focusableareas②">focusableAreas()</a></code>
                和 <code
                    class="idl"><a data-link-type="idl" href="#dom-element-getspatialnavigationcontainer" id="ref-for-dom-element-getspatialnavigationcontainer②">getSpatialNavigationContainer()</a></code>
                方法是<a data-link-type="dfn" href="#at-risk" id="ref-for-at-risk">风险</a>。</p>
            <p>当调用这些方法时，用户代理必须运行以下步骤：</p>
            <div class="algorithm" data-algorithm="getSpatialNavigationContainer steps">
                <dl>
                    <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="Element" data-dfn-type="method"
                            data-export
                            id="dom-element-getspatialnavigationcontainer"><code>getSpatialNavigationContainer()</code></dfn>
                    <dd data-md>
                        <ol>
                            <li data-md>
                                <p>返回元素的最近祖先，如果它是 <a data-link-type="dfn" href="#spatial-navigation-containers"
                                        id="ref-for-spatial-navigation-containers⑧">空间导航容器</a>，或者返回 <a
                                        data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document"
                                        id="ref-for-concept-document">文档</a>，如果最近的 <span
                                        id="ref-for-spatial-navigation-containers⑨">空间导航容器</span> 是视口。</p>
                        </ol>
                        <p class="note" role="note"><span>注意：</span> 如果该元素本身是 <a data-link-type="dfn"
                                href="#spatial-navigation-containers"
                                id="ref-for-spatial-navigation-containers①⓪">空间导航容器</a>，<code
                                class="idl"><a data-link-type="idl" href="#dom-element-getspatialnavigationcontainer" id="ref-for-dom-element-getspatialnavigationcontainer③">getSpatialNavigationContainer()</a></code>
                            也会返回其最近的 <span id="ref-for-spatial-navigation-containers①①">空间导航容器</span>，而不是元素本身。</p>
                </dl>
            </div>
            <div class="algorithm" data-algorithm="focusableAreas steps">
                <dl>
                    <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="Element" data-dfn-type="method"
                            data-export data-lt="focusableAreas(option)|focusableAreas()"
                            id="dom-element-focusableareas"><code>focusableAreas(<var>option</var>)</code></dfn>
                    <dd data-md>
                        <ol>
                            <li data-md>
                                <p>如果存在 <var>option</var> 且其值等于
                                    <code><a class="property" data-link-type="propdesc" href="https://www.w3.org/TR/css-cascade-4/#propdef-all" id="ref-for-propdef-all">all</a></code>，则令
                                    <var>visibleOnly</var> 为 <code>false</code>，否则为 <code>true</code>。
                                </p>
                            <li data-md>
                                <p>令 <var>areas</var> 为使用 <var>visibleOnly</var> 作为参数在元素中 <a data-link-type="dfn"
                                        href="#find-focusable-areas" id="ref-for-find-focusable-areas">找到的可聚焦区域</a> 的结果。
                                </p>
                            <li data-md>
                                <p>返回 <var>areas</var></p>
                        </ol>
                </dl>
            </div>
            <div class="example" id="focusAreas-visible">
                <a class="self-link" href="#focusAreas-visible"></a> 以下代码显示了如何使用 <code
                    class="idl"><a data-link-type="idl" href="#dom-element-focusableareas" id="ref-for-dom-element-focusableareas③">focusableAreas()</a></code>
                获取当前页面中所有可见的可聚焦元素。如果该方法找到了 <a data-link-type="dfn" href="#spatial-navigation-containers"
                    id="ref-for-spatial-navigation-containers①②">空间导航容器</a>，它会递归地查找其中的可聚焦区域。由于此方法中 <code
                    class="idl"><a data-link-type="idl" href="#dom-focusableareasoption-mode" id="ref-for-dom-focusableareasoption-mode">mode</a></code>
                属性的值为 <code>visible</code>，因此结果中排除了那些不在 <a data-link-type="dfn"
                    href="https://www.w3.org/TR/css-overflow-3/#scrollport" id="ref-for-scrollport③">滚动视口</a> 内的可聚焦元素。
                <pre><code class="highlight"><c- p>&lt;</c-><c- f>body</c-><c- p>></c->
    <c- p>&lt;</c-><c- f>button</c-><c- p>>&lt;/</c-><c- f>button</c-><c- p>></c->
    <c- p>&lt;</c-><c- f>div</c-> <c- e>style</c-><c- o>=</c-><c- s>"width:300px; height:200px; overflow-x: scroll;"</c-><c- p>></c->
        <c- p>&lt;</c-><c- f>button</c-> <c- e>style</c-><c- o>=</c-><c- s>"left:25px;"</c-><c- p>>&lt;/</c-><c- f>button</c-><c- p>></c->
        <c- p>&lt;</c-><c- f>button</c-> <c- e>style</c-><c- o>=</c-><c- s>"left:150px;"</c-><c- p>>&lt;/</c-><c- f>button</c-><c- p>></c->
        <c- p>&lt;</c-><c- f>button</c-> <c- e>style</c-><c- o>=</c-><c- s>"left:350px;"</c-><c- p>>&lt;/</c-><c- f>button</c-><c- p>></c->
    <c- p>&lt;/</c-><c- f>div</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>body</c-><c- p>></c->
</code></pre>
                <pre><code class="highlight"><c- kr>const</c-> focusableAreas <c- o>=</c-> document<c- p>.</c->body<c- p>.</c->focusableAreas<c- p>({</c->mode<c- o>:</c-> <c- t>'visible'</c-><c- p>});</c->
focusableAreas <c- o>&amp;&amp;</c-> focusableAreas<c- p>.</c->forEach<c- p>(</c->focusable <c- p>=></c-> <c- p>{</c->
  focusable<c- p>.</c->style<c- p>.</c->outline <c- o>=</c-> <c- t>'5px solid red'</c-><c- p>;</c->
<c- p>});</c->
</code></pre>
                <p>下图是该代码的执行结果。</p>
                <figure>
                    <img alt="关于 focusableAreas() 的图片"
                        src="https://www.w3.org/TR/css-nav-1/images/focusableareas-visible-example.png"
                        style="width: 450px;">
                    <figcaption>查找文档内所有可见的可聚焦区域。</figcaption>
                </figure>
            </div>
            <div class="algorithm" data-algorithm="spatialNavigationSearch steps">
                <dl>
                    <dt data-md><dfn class="idl-code" data-dfn-for="Element" data-dfn-type="method" data-export
                            data-lt="spatialNavigationSearch(options)"
                            id="dom-element-spatialnavigationsearch-options"><code>spatialNavigationSearch(<var>dir</var>, <var>options</var>)</code><a
                                class="self-link" href="#dom-element-spatialnavigationsearch-options"></a></dfn>
                    <dd data-md>
                        <ol>
                            <li data-md>
                                <p>令 <var>direction</var> 为 <var>dir</var> 的值。</p>
                            <li data-md>
                                <p>令 <var>container</var> 为：</p>
                                <ul>
                                    <li data-md>
                                        <p>如果 <var>options</var> 的 <code
                                                class="idl"><a data-link-type="idl" href="#dom-spatialnavigationsearchoptions-container" id="ref-for-dom-spatialnavigationsearchoptions-container">container</a></code>
                                            属性的值不为 null，</p>
                                        <ul>
                                            <li data-md>
                                                <p>如果它是 <a data-link-type="dfn" href="#spatial-navigation-containers"
                                                        id="ref-for-spatial-navigation-containers①③">空间导航容器</a>，则为其本身。
                                                </p>
                                            <li data-md>
                                                <p>否则为其最近的 <a data-link-type="dfn" href="#spatial-navigation-containers"
                                                        id="ref-for-spatial-navigation-containers①④">空间导航容器</a> 祖先。</p>
                                        </ul>
                                    <li data-md>
                                        <p>否则为该元素最近的 <a data-link-type="dfn" href="#spatial-navigation-containers"
                                                id="ref-for-spatial-navigation-containers①⑤">空间导航容器</a> 祖先。</p>
                                </ul>
                            <li data-md>
                                <p>令 <var>areas</var> 为：</p>
                                <ul>
                                    <li data-md>
                                        <p>如果 <var>options</var> 的 <code
                                                class="idl"><a data-link-type="idl" href="#dom-spatialnavigationsearchoptions-candidates" id="ref-for-dom-spatialnavigationsearchoptions-candidates">candidates</a></code>
                                            属性的值不为 <code>null</code>，则为该值。</p>
                                    <li data-md>
                                        <p>否则为在 <var>container</var> 中 <a data-link-type="dfn"
                                                href="#find-focusable-areas"
                                                id="ref-for-find-focusable-areas①">找到的可聚焦区域</a> 的结果。</p>
                                </ul>
                            <li data-md>
                                <p>返回在 <var>container</var> 中从该元素起 <var>direction</var> 方向内 <a data-link-type="dfn"
                                        href="#select-the-best-candidate"
                                        id="ref-for-select-the-best-candidate">选择最佳候选项</a> 的结果。</p>
                        </ol>
                </dl>
                <p class="note" role="note"><span>注意：</span> 当既未提供容器也未提供候选列表时，只会在最近的 <a data-link-type="dfn"
                        href="#spatial-navigation-containers" id="ref-for-spatial-navigation-containers①⑥">空间导航容器</a>
                    祖先的可见可聚焦区域内进行搜索。<em>如果没有找到，则不会继续向上查找祖先链，结果将为 <code>null</code>。</em></p>
            </div>
        </div>
        <div class="api">
            <h2 class="heading settled" data-level="6" id="events-navigationevent"><span class="secno">6. </span><span
                    class="content">导航事件</span><a class="self-link" href="#events-navigationevent"></a></h2>
            <h3 class="heading settled" data-level="6.1" id="interface-focusevent"><span class="secno">6.1. </span><span
                    class="content">接口 NavigationEvent</span><a class="self-link" href="#interface-focusevent"></a></h3>
            <p><code
                    class="idl"><a data-link-type="idl" href="#navigationevent" id="ref-for-navigationevent①">NavigationEvent</a></code>
                接口提供与空间导航相关的特定上下文信息。</p>
            <p>要创建 <code
                    class="idl"><a data-link-type="idl" href="#navigationevent" id="ref-for-navigationevent②">NavigationEvent</a></code>
                接口的实例，使用 <code
                    class="idl"><a data-link-type="idl" href="#navigationevent" id="ref-for-navigationevent③">NavigationEvent</a></code>
                构造函数，并传递一个可选的 <code
                    class="idl"><a data-link-type="idl" href="#dictdef-navigationeventinit" id="ref-for-dictdef-navigationeventinit">NavigationEventInit</a></code>
                字典。</p>
            <pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="navigationevent"><code><c- g>NavigationEvent</c-></code></dfn> : <a class="n" data-link-type="idl-name" href="https://www.w3.org/TR/uievents/#uievent" id="ref-for-uievent①"><c- n>UIEvent</c-></a> {
    <dfn class="idl-code" data-dfn-for="NavigationEvent" data-dfn-type="constructor" data-export data-lt="NavigationEvent(type, eventInitDict)|constructor(type, eventInitDict)|NavigationEvent(type)|constructor(type)" id="dom-navigationevent-navigationevent"><code><c- g>constructor</c-></code><a class="self-link" href="#dom-navigationevent-navigationevent"></a></dfn>(<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString" id="ref-for-idl-DOMString"><c- b>DOMString</c-></a> <dfn class="idl-code" data-dfn-for="NavigationEvent/constructor(type, eventInitDict), NavigationEvent/constructor(type)" data-dfn-type="argument" data-export id="dom-navigationevent-constructor-type-eventinitdict-type"><code><c- g>type</c-></code><a class="self-link" href="#dom-navigationevent-constructor-type-eventinitdict-type"></a></dfn>,
                <c- b>optional</c-> <a class="n" data-link-type="idl-name" href="#dictdef-navigationeventinit" id="ref-for-dictdef-navigationeventinit①"><c- n>NavigationEventInit</c-></a> <dfn class="idl-code" data-dfn-for="NavigationEvent/constructor(type, eventInitDict), NavigationEvent/constructor(type)" data-dfn-type="argument" data-export id="dom-navigationevent-constructor-type-eventinitdict-eventinitdict"><code><c- g>eventInitDict</c-></code><a class="self-link" href="#dom-navigationevent-constructor-type-eventinitdict-eventinitdict"></a></dfn>);
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="n" data-link-type="idl-name" href="#enumdef-spatialnavigationdirection" id="ref-for-enumdef-spatialnavigationdirection②"><c- n>SpatialNavigationDirection</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="NavigationEvent" data-dfn-type="attribute" data-export data-readonly data-type="SpatialNavigationDirection" id="dom-navigationevent-dir"><code><c- g>dir</c-></code></dfn>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#eventtarget" id="ref-for-eventtarget"><c- n>EventTarget</c-></a>? <dfn class="dfn-paneled idl-code" data-dfn-for="NavigationEvent" data-dfn-type="attribute" data-export data-readonly data-type="EventTarget?" id="dom-navigationevent-relatedtarget"><code><c- g>relatedTarget</c-></code></dfn>;
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-navigationeventinit"><code><c- g>NavigationEventInit</c-></code></dfn> : <a class="n" data-link-type="idl-name" href="https://www.w3.org/TR/uievents/#dictdef-uieventinit" id="ref-for-dictdef-uieventinit"><c- n>UIEventInit</c-></a> {
    <a class="n" data-link-type="idl-name" href="#enumdef-spatialnavigationdirection" id="ref-for-enumdef-spatialnavigationdirection③"><c- n>SpatialNavigationDirection</c-></a> <dfn class="idl-code" data-dfn-for="NavigationEventInit" data-dfn-type="dict-member" data-export data-type="SpatialNavigationDirection " id="dom-navigationeventinit-dir"><code><c- g>dir</c-></code><a class="self-link" href="#dom-navigationeventinit-dir"></a></dfn>;
    <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#eventtarget" id="ref-for-eventtarget①"><c- n>EventTarget</c-></a>? <dfn class="idl-code" data-default="null" data-dfn-for="NavigationEventInit" data-dfn-type="dict-member" data-export data-type="EventTarget? " id="dom-navigationeventinit-relatedtarget"><code><c- g>relatedTarget</c-></code><a class="self-link" href="#dom-navigationeventinit-relatedtarget"></a></dfn> = <c- b>null</c->;
};
</pre>
            <div class="verbose">
                <h3 class="non-normative heading settled" data-level="6.2" id="events-nav-type"><span class="secno">6.2.
                    </span><span class="content">导航事件类型</span><a class="self-link" href="#events-nav-type"></a></h3>
                <p><em>本节及其子章节不是规范性的。</em></p>
                <p>导航事件类型概述如下。有关完整的规范细节，请参阅<a href="#processing-model">第 8 节 处理模型</a>。</p>
                <h4 class="non-normative heading settled" data-level="6.2.1" id="event-type-navbeforefocus"><span
                        class="secno">6.2.1. </span><span class="content"><dfn class="dfn-paneled idl-code"
                            data-dfn-for="NavigationEvent" data-dfn-type="event" data-export
                            id="eventdef-navigationevent-navbeforefocus"><code>navbeforefocus</code></dfn></span><a
                        class="self-link" href="#event-type-navbeforefocus"></a></h4>
                <p>当有有效的<a data-link-type="dfn" href="#select-the-best-candidate"
                        id="ref-for-select-the-best-candidate①">选择最佳候选项</a>结果时，会发生此事件。</p>
                <table class="def">
                    <tbody>
                        <tr>
                            <th>类型
                            <td><strong><code>navbeforefocus</code></strong>
                        <tr>
                            <th>接口
                            <td><code
                                    class="idl"><a data-link-type="idl" href="#navigationevent" id="ref-for-navigationevent④">NavigationEvent</a></code>
                        <tr>
                            <th>冒泡
                            <td>是
                        <tr>
                            <th>可取消
                            <td>是
                        <tr>
                            <th>事件的属性
                            <td>
                                <dl>
                                    <dt><code
                                            class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#event" id="ref-for-event">Event</a></code>.<code
                                            class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-target" id="ref-for-dom-event-target">target</a></code>
                                    <dd>被聚焦的元素，或如果没有聚焦元素，则为<a data-link-type="dfn"
                                            href="https://html.spec.whatwg.org/multipage/dom.html#the-body-element-2"
                                            id="ref-for-the-body-element-2">body 元素</a>（如果可用），否则为根元素
                                    <dt><code
                                            class="idl"><a data-link-type="idl" href="#navigationevent" id="ref-for-navigationevent⑤">NavigationEvent</a></code>.<code
                                            class="idl"><a data-link-type="idl" href="#dom-navigationevent-relatedtarget" id="ref-for-dom-navigationevent-relatedtarget">relatedTarget</a></code>
                                    <dd>将要获得焦点的可聚焦区域的 DOM 锚点
                                    <dt><code
                                            class="idl"><a data-link-type="idl" href="#navigationevent" id="ref-for-navigationevent⑥">NavigationEvent</a></code>.<code
                                            class="idl"><a data-link-type="idl" href="#dom-navigationevent-dir" id="ref-for-dom-navigationevent-dir">dir</a></code>
                                    <dd>用户请求的导航方向
                                </dl>
                </table>
                <p>在空间导航移动焦点之前，用户代理会<dfn class="dfn-paneled" data-dfn-type="dfn"
                        data-lt="dispatches navbeforefocus event | dispatching navbeforefocus event" data-noexport
                        id="dispatches-navbeforefocus-event">分派 <a class="idl-code" data-link-type="event"
                            href="#eventdef-navigationevent-navbeforefocus"
                            id="ref-for-eventdef-navigationevent-navbeforefocus">navbeforefocus</a> 事件</dfn>。<a
                        data-link-type="dfn" href="https://w3c.github.io/uievents/#event-target"
                        id="ref-for-event-target">事件目标</a>是具有焦点的元素，而<code
                        class="idl"><a data-link-type="idl" href="#dom-navigationevent-relatedtarget" id="ref-for-dom-navigationevent-relatedtarget①">relatedTarget</a></code>是即将获得焦点的元素。
                </p>
                <p>如果 <a data-link-type="dfn" href="#navigation-override"
                        id="ref-for-navigation-override">navigation-override</a> 在 <a data-link-type="dfn"
                        href="https://dom.spec.whatwg.org/#concept-node-document"
                        id="ref-for-concept-node-document">节点文档</a>中对于<a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/origin.html#concept-origin"
                        id="ref-for-concept-origin">来源</a>的<a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsers.html#active-document"
                        id="ref-for-active-document">活动文档</a>被禁用，则此事件不会被分派。</p>
                <div class="example" id="example-feaa7715">
                    <a class="self-link" href="#example-feaa7715"></a> 此示例展示了按下 <code class="key">ArrowRight</code>
                    键时的<a href="https://www.w3.org/TR/uievents/#event-order">UI 事件
                        §事件顺序</a>。为了简化描述，假设此示例中的用户代理通过箭头键触发空间导航。
                    <table class="complex data">
                        <thead>
                            <tr>
                                <th></th>
                                <th>事件类型</th>
                                <th><code
                                        class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/uievents/#keyboardevent" id="ref-for-keyboardevent">KeyboardEvent</a></code>.<code
                                        class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/uievents/#dom-keyboardevent-key" id="ref-for-dom-keyboardevent-key">key</a></code>
                                </th>
                                <th>备注</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>1</td>
                                <td>keydown</td>
                                <td><code class="key">ArrowRight</code></td>
                                <td>必须是可以激活空间导航的键，例如箭头键，否则不会激活空间导航。</td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>navbeforefocus</td>
                                <td></td>
                                <td>如果空间导航候选项不是 <code>null</code>，则发送此事件，否则不会生成。</td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td>focusin</td>
                                <td></td>
                                <td>在目标元素获得焦点之前发送。</td>
                            </tr>
                            <tr>
                                <td>4</td>
                                <td>focus</td>
                                <td></td>
                                <td>在目标元素获得焦点后发送。</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="example" id="delegation">
                    <a class="self-link" href="#delegation"></a>
                    以下代码更改了空间导航的行为，因此当一个滚动容器获得焦点时，如果它至少有一个可见的可聚焦子元素，焦点会自动转移到它上面，递归地进行。
                    <pre><code class="highlight">document<c- p>.</c->addEventListener<c- p>(</c-><c- t>'navbeforefocus'</c-><c- p>,</c-> e <c- p>=></c-> <c- p>{</c->
    e<c- p>.</c->preventDefault<c- p>();</c->

    <c- a>let</c-> nextTarget <c- o>=</c-> e<c- p>.</c->relatedTarget<c- p>;</c->
    <c- k>if</c-> <c- p>(</c->isSpatialNavigationContainer<c- p>(</c->nextTarget<c- p>))</c-> <c- p>{</c->
        <c- kr>const</c-> areas <c- o>=</c-> nextTarget<c- p>.</c->focusableAreas<c- p>();</c->

        <c- k>if</c-> <c- p>(</c->areas<c- p>.</c->length <c- o>></c-> <c- mi>0</c-><c- p>)</c-> <c- p>{</c->
            nextTarget <c- o>=</c-> nextTarget<c- p>.</c->spatialNavigationSearch<c- p>(</c->e<c- p>.</c->dir<c- p>,</c-> <c- p>{</c-> candidates<c- o>:</c-> areas <c- p>});</c->
        <c- p>}</c->
    <c- p>}</c->
    nextTarget<c- p>.</c->focus<c- p>();</c->
<c- p>});</c->

<c- a>function</c-> isSpatialNavigationContainer<c- p>(</c->element<c- p>)</c-> <c- p>{</c->
    <c- k>return</c-> <c- p>(</c-><c- o>!</c->element<c- p>.</c->parentElement<c- p>)</c-> <c- o>||</c->
        <c- p>(</c->element<c- p>.</c->nodeName <c- o>===</c-> <c- t>'IFRAME'</c-><c- p>)</c-> <c- o>||</c->
        <c- p>(</c->isScrollContainer<c- p>(</c->element<c- p>))</c-> <c- o>||</c->
        <c- p>(</c->isCSSSpatNavContain<c- p>(</c->element<c- p>));</c->
<c- p>}</c->
</code></pre>
                </div>
                <h4 class="non-normative heading settled" data-level="6.2.2" id="event-type-navnotarget"><span
                        class="secno">6.2.2. </span><span class="content"><dfn class="dfn-paneled idl-code"
                            data-dfn-for="NavigationEvent" data-dfn-type="event" data-export
                            id="eventdef-navigationevent-navnotarget"><code>navnotarget</code></dfn></span><a
                        class="self-link" href="#event-type-navnotarget"></a></h4>
                <p>当空间导航在当前<span id="ref-for-spatial-navigation-containers①⑧">空间导航容器</span>内未能找到任何候选项时，
                    在向上树结构搜索最近的祖先<span id="ref-for-spatial-navigation-containers①⑦">空间导航容器</span>的候选项之前，或者在<span
                        id="ref-for-spatial-navigation-containers①⑨">空间导航容器</span>可滚动且无法进一步滚动的情况下，会触发此事件。</p>
                <table class="def">
                    <tbody>
                        <tr>
                            <th>类型
                            <td><strong><code>navnotarget</code></strong>
                        <tr>
                            <th>接口
                            <td><code
                                    class="idl"><a data-link-type="idl" href="#navigationevent" id="ref-for-navigationevent⑦">NavigationEvent</a></code>
                        <tr>
                            <th>冒泡
                            <td>是
                        <tr>
                            <th>可取消
                            <td>是
                        <tr>
                            <th>事件的属性
                            <td>
                                <dl>
                                    <dt><code
                                            class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#event" id="ref-for-event①">Event</a></code>.<code
                                            class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-target" id="ref-for-dom-event-target①">target</a></code>
                                    <dd>聚焦的元素，如果没有聚焦元素，则为<a data-link-type="dfn"
                                            href="https://html.spec.whatwg.org/multipage/dom.html#the-body-element-2"
                                            id="ref-for-the-body-element-2①">body 元素</a>（如果可用），否则为根元素
                                    <dt><code
                                            class="idl"><a data-link-type="idl" href="#navigationevent" id="ref-for-navigationevent⑧">NavigationEvent</a></code>.<code
                                            class="idl"><a data-link-type="idl" href="#dom-navigationevent-relatedtarget" id="ref-for-dom-navigationevent-relatedtarget②">relatedTarget</a></code>
                                    <dd>搜索的<a data-link-type="dfn" href="#spatial-navigation-containers"
                                            id="ref-for-spatial-navigation-containers②⓪">空间导航容器</a>
                                    <dt><code
                                            class="idl"><a data-link-type="idl" href="#navigationevent" id="ref-for-navigationevent⑨">NavigationEvent</a></code>.<code
                                            class="idl"><a data-link-type="idl" href="#dom-navigationevent-dir" id="ref-for-dom-navigationevent-dir①">dir</a></code>
                                    <dd>用户请求的导航方向
                                </dl>
                </table>
                <p>用户代理会<dfn class="dfn-paneled" data-dfn-type="dfn"
                        data-lt="dispatches navnotarget event | dispatching navnotarget event" data-noexport
                        id="dispatches-navnotarget-event">分派 <a class="idl-code" data-link-type="event"
                            href="#eventdef-navigationevent-navnotarget"
                            id="ref-for-eventdef-navigationevent-navnotarget">navnotarget</a> 事件</dfn>，初始化 <a
                        data-link-type="dfn" href="https://w3c.github.io/uievents/#event-target"
                        id="ref-for-event-target①">事件目标</a>为具有焦点的元素，而<code
                        class="idl"><a data-link-type="idl" href="#dom-navigationevent-relatedtarget" id="ref-for-dom-navigationevent-relatedtarget③">relatedTarget</a></code>为<span
                        id="ref-for-event-target②">事件目标</span>的<a data-link-type="dfn"
                        href="#spatial-navigation-containers" id="ref-for-spatial-navigation-containers②①">空间导航容器</a>。
                </p>
                <p>如果<a data-link-type="dfn" href="#navigation-override"
                        id="ref-for-navigation-override①">navigation-override</a>在<var>eventTarget</var>的<a
                        data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document"
                        id="ref-for-concept-node-document①">节点文档</a>中对于<a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/origin.html#concept-origin"
                        id="ref-for-concept-origin①">来源</a>的<a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsers.html#active-document"
                        id="ref-for-active-document①">活动文档</a>被禁用，则此事件不会被分派。</p>
                <div class="example" id="example-e7e46248">
                    <a class="self-link" href="#example-e7e46248"></a> 这个示例展示了当按下 <code class="key">ArrowDown</code> 键时的
                    <a href="https://www.w3.org/TR/uievents/#event-order">UI 事件 §事件顺序</a>，如下图所示。
                    为了简化描述，本示例假设用户代理使用箭头键来触发空间导航。
                    <figure>
                        <img alt="关于 navnotarget 的图片"
                            src="https://www.w3.org/TR/css-nav-1/images/navnotarget-example-1.png"
                            style="width: 200px;">
                        <figcaption>当 <a data-link-type="dfn"
                                href="https://www.w3.org/TR/css-overflow-3/#scroll-container"
                                id="ref-for-scroll-container">滚动容器</a>中没有任何候选项时移动焦点。</figcaption>
                    </figure>
                    <table class="complex data">
                        <thead>
                            <tr>
                                <th></th>
                                <th>事件类型</th>
                                <th>事件目标</th>
                                <th><code>relatedTarget</code></th>
                                <th>备注</th>
                        </thead>
                        <tbody>
                            <tr>
                                <td>1</td>
                                <td>keydown</td>
                                <td><code>#box2</code></td>
                                <td>N/A</td>
                                <td>必须是可以激活空间导航的按键，例如箭头键，否则不会触发空间导航。</td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>navnotarget</td>
                                <td><code>#box2</code></td>
                                <td><code>#scrollContainer</code></td>
                                <td>如果 <code>#scrollContainer</code> 中没有候选项且无法滚动，则会发送此事件，否则不会生成。</td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td>navbeforefocus</td>
                                <td><code>#box2</code></td>
                                <td><code>#box3</code></td>
                                <td>如果 <code>#container</code> 中的候选项不为 <code>null</code>，则会发送此事件，否则不会触发。</td>
                            </tr>
                            <tr>
                                <td>4</td>
                                <td>focusin</td>
                                <td><code>#box3</code></td>
                                <td><code>#box2</code></td>
                                <td>在目标元素获得焦点之前发送。</td>
                            </tr>
                            <tr>
                                <td>5</td>
                                <td>focus</td>
                                <td><code>#box3</code></td>
                                <td><code>#box2</code></td>
                                <td>在目标元素获得焦点之后发送。</td>
                            </tr>
                        </tbody>
                    </table>
                    <p>该示例的结果如下图所示：</p>
                    <figure>
                        <img alt="navnotarget 的结果图片"
                            src="https://www.w3.org/TR/css-nav-1/images/navnotarget-example-2.png"
                            style="width: 200px;">
                        <figcaption>在 <a data-link-type="dfn" href="https://www.w3.org/TR/css-overflow-3/#scrollport"
                                id="ref-for-scrollport④">滚动视口</a>和 <a data-link-type="dfn"
                                href="https://www.w3.org/TR/css-overflow-3/#scroll-container"
                                id="ref-for-scroll-container①">滚动容器</a>无法滚动时，移动焦点的结果。</figcaption>
                    </figure>
                    <p>此示例使用的标记如下：</p>
                    <pre class="lang-css highlight"><c- f>#container </c-><c- p>{</c->
    <c- k>width</c-><c- p>:</c-> <c- m>900</c-><c- l>px</c-><c- p>;</c->
    <c- k>height</c-><c- p>:</c-> <c- m>1400</c-><c- l>px</c-><c- p>;</c->
<c- p>}</c->

<c- f>#scrollContainer </c-><c- p>{</c->
    <c- k>width</c-><c- p>:</c-> <c- m>700</c-><c- l>px</c-><c- p>;</c->
    <c- k>height</c-><c- p>:</c-> <c- m>700</c-><c- l>px</c-><c- p>;</c->
    <c- k>overflow-x</c-><c- p>:</c-> hidden<c- p>;</c->
    <c- k>overflow-y</c-><c- p>:</c-> auto<c- p>;</c->
<c- p>}</c->

<c- f>.item </c-><c- p>{</c->
    <c- k>width</c-><c- p>:</c-> <c- m>150</c-><c- l>px</c-><c- p>;</c->
    <c- k>height</c-><c- p>:</c-> <c- m>110</c-><c- l>px</c-><c- p>;</c->
    <c- k>background-color</c-><c- p>:</c-> blue<c- p>;</c->
<c- p>}</c->

<c- f>.item:focus </c-><c- p>{</c->
    <c- k>background-color</c-><c- p>:</c-> red<c- p>;</c->
<c- p>}</c->
</pre>
                    <pre class="lang-html highlight"><c- p>&lt;</c-><c- f>div</c-> <c- e>id</c-><c- o>=</c-><c- s>"container"</c-><c- p>></c->
    <c- p>&lt;</c-><c- f>div</c-> <c- e>id</c-><c- o>=</c-><c- s>"scrollContainer"</c-><c- p>></c->
        <c- p>&lt;</c-><c- f>div</c-> <c- e>id</c-><c- o>=</c-><c- s>"box1"</c-> <c- e>class</c-><c- o>=</c-><c- s>"item"</c-> <c- e>tabindex</c-><c- o>=</c-><c- s>"0"</c-><c- p>></c->Box 1<c- p>&lt;/</c-><c- f>div</c-><c- p>></c->
        <c- p>&lt;</c-><c- f>div</c-> <c- e>id</c-><c- o>=</c-><c- s>"box2"</c-> <c- e>class</c-><c- o>=</c-><c- s>"item"</c-> <c- e>tabindex</c-><c- o>=</c-><c- s>"0"</c-><c- p>></c->Box 2<c- p>&lt;/</c-><c- f>div</c-><c- p>></c->
    <c- p>&lt;/</c-><c- f>div</c-><c- p>></c->
    <c- p>&lt;</c-><c- f>div</c-> <c- e>id</c-><c- o>=</c-><c- s>"box3"</c-> <c- e>class</c-><c- o>=</c-><c- s>"item"</c-> <c- e>tabindex</c-><c- o>=</c-><c- s>"0"</c-><c- p>></c->Box 3<c- p>&lt;/</c-><c- f>div</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>div</c-><c- p>></c->
</pre>
                </div>
                <div class="example" id="loop">
                    <a class="self-link" href="#loop"></a> 以下代码更改了空间导航的行为，使焦点被困在一个垂直可滚动的 <a data-link-type="dfn"
                        href="#spatial-navigation-containers" id="ref-for-spatial-navigation-containers②②">空间导航容器</a> 中。
                    当在请求的方向上找不到更多的可聚焦元素，并且<span
                        id="ref-for-spatial-navigation-containers②③">空间导航容器</span>无法再滚动时，焦点会循环回到另一侧，而不是移出容器。
                    <p>不过，焦点仍可以通过顺序导航、鼠标交互或通过调用 <code
                            class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/interaction.html#dom-focus" id="ref-for-dom-focus①">focus()</a></code>
                        方法以编程方式移出容器。</p>
                    <pre><code class="highlight">scrollContainer<c- p>.</c->addEventListener<c- p>(</c-><c- t>'navnotarget'</c-><c- p>,</c-> e <c- p>=></c-> <c- p>{</c->
    <c- a>let</c-> nextTarget <c- o>=</c-> <c- kc>null</c-><c- p>;</c->
    <c- kr>const</c-> verticalDir <c- o>=</c-> <c- p>[</c-><c- t>'up'</c-><c- p>,</c-> <c- t>'down'</c-><c- p>];</c->
    <c- kr>const</c-> candidates <c- o>=</c-> e<c- p>.</c->relatedTarget<c- p>.</c->focusableAreas<c- p>({</c-><c- t>'mode'</c-><c- o>:</c-> <c- t>'all'</c-><c- p>});</c->

    <c- c1>// 仅在导航方向为 y 轴时阻止默认行为</c->
    <c- k>if</c-> <c- p>(</c->verticalDir<c- p>.</c->includes<c- p>(</c->e<c- p>.</c->dir<c- p>)</c-> <c- o>&amp;&amp;</c-> <c- p>(</c->candidates<c- p>.</c->length <c- o>></c-> <c- mi>0</c-><c- p>))</c-> <c- p>{</c->
        e<c- p>.</c->preventDefault<c- p>();</c->

        <c- k>if</c-> <c- p>(</c->e<c- p>.</c->dir <c- o>===</c-> <c- t>'down'</c-><c- p>)</c-> <c- p>{</c->
            nextTarget <c- o>=</c-> candidates<c- p>[</c-><c- mi>0</c-><c- p>];</c->
        <c- p>}</c-> <c- k>else</c-> <c- k>if</c-> <c- p>(</c->e<c- p>.</c->dir <c- o>===</c-> <c- t>'up'</c-><c- p>)</c-> <c- p>{</c->
            nextTarget <c- o>=</c-> candidates<c- p>[</c->candidates<c- p>.</c->length<c- o>-</c-><c- mi>1</c-><c- p>];</c->
        <c- p>}</c->
        nextTarget<c- p>.</c->focus<c- p>();</c->
    <c- p>}</c->
<c- p>});</c->
</code></pre>
                </div>
            </div>
        </div>
        <h2 class="heading settled" data-level="7" id="policy-feature"><span class="secno">7. </span><span
                class="content">
                <a data-link-type="dfn" href="#navigation-override"
                    id="ref-for-navigation-override②">navigation-override</a> <a data-link-type="dfn"
                    href="https://w3c.github.io/webappsec-feature-policy/#policy-controlled-feature"
                    id="ref-for-policy-controlled-feature">受政策控制的特性</a></span><a class="self-link"
                href="#policy-feature"></a></h2>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="navigation-override">navigation-override</dfn>
            是一种 <a data-link-type="dfn" href="https://w3c.github.io/webappsec-feature-policy/#policy-controlled-feature"
                id="ref-for-policy-controlled-feature①">受政策控制的特性</a>，它控制页面作者是否可以启用相关机制，以控制空间导航的行为或完全取消它。</p>
        <ul>
            <li data-md>
                <p>该特性的名称为 "<code>navigation-override</code>"</p>
            <li data-md>
                <p><a data-link-type="dfn" href="https://w3c.github.io/webappsec-feature-policy/#default-allowlist"
                        id="ref-for-default-allowlist">默认允许列表</a> 对于 <a data-link-type="dfn" href="#navigation-override"
                        id="ref-for-navigation-override③">navigation-override</a> 是 "<code>self</code>"</p>
        </ul>
        <p>如 <a href="#nav">§ 8.3 Navigation</a> 中进一步详细定义的那样，如果 <a data-link-type="dfn" href="#navigation-override"
                id="ref-for-navigation-override④">navigation-override</a> 在文档中被禁用，则不会触发导航事件（参见 <a
                href="#events-navigationevent">§ 6 Navigation Events</a>）。</p>
        <p class="note" role="note"><span>注意：</span>这样做是为了防止恶意 iframe
            使用这些事件来劫持焦点。我们认识到在空间导航之前已经存在一些机制，恶意作者可以使用这些机制来干扰用户控制焦点去向的能力。尽管如此，尽力不增加这种攻击面还是有意义的，尽管这可能已经是一个很容易执行的攻击点，以至于这样做已经是徒劳。欢迎基于实现经验或减轻此类攻击的经验，进一步对此主题提供反馈。
        </p>
        <h2 class="heading settled" data-level="8" id="processing-model"><span class="secno">8. </span><span
                class="content"> 处理模型</span><a class="self-link" href="#processing-model"></a></h2>
        <div class="verbose">
            <a href="#overview">§ 3 概述</a> 章节大致介绍了空间导航如何工作，以帮助本规范的读者建立一般的心智模型。它使用了直观但不精确的术语，并为了可读性略过了许多细节。
            <p>本章节定义了相应的规范行为，目标是在必要的情况下提供尽可能多的细节，以完全定义这种行为。</p>
        </div>
        <h3 class="heading settled" data-level="8.1" id="glossary"><span class="secno">8.1. </span><span
                class="content"> 术语表</span><a class="self-link" href="#glossary"></a></h3>
        <p>以下术语定义用于解释空间导航的处理模型。有关详细信息，请参见定义中的链接。</p>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="boundary-box">边界框</dfn> 的定义如下：</p>
        <ul>
            <li data-md>
                <p>如果对象是一个点，那么边界框就是该点</p>
            <li data-md>
                <p>如果对象是一个 <a data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#box"
                        id="ref-for-box">盒子</a> 或 <a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-break-4/#box-fragment"
                        id="ref-for-box-fragment">盒子片段</a>，边界框就是该盒子或片段的 <a data-link-type="dfn"
                        href="https://drafts.csswg.org/css2/box.html#x14" id="ref-for-x14">边框盒</a></p>
            <li data-md>
                <p>如果对象是一个 <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/interaction.html#focusable-area"
                        id="ref-for-focusable-area">可聚焦区域</a>，但不是元素，该区域的边界框为其轴对齐的边界框</p>
        </ul>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="inside-area">内部区域</dfn> 的定义如下：</p>
        <ul>
            <li data-md>
                <p>如果对象是一个 <a data-link-type="dfn" href="https://www.w3.org/TR/css-overflow-3/#scroll-container"
                        id="ref-for-scroll-container②">滚动容器</a>，其内部区域是其 <a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-scroll-snap-1/#optimal-viewing-region"
                        id="ref-for-optimal-viewing-region">最佳查看区域</a></p>
            <li data-md>
                <p>如果对象是一个 <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document"
                        id="ref-for-concept-document①">文档</a>，其内部区域是其 <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context"
                        id="ref-for-browsing-context">浏览上下文</a> 的视口</p>
            <li data-md>
                <p>如果对象是一个 <a data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#box"
                        id="ref-for-box①">盒子</a> 或 <a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-break-4/#box-fragment"
                        id="ref-for-box-fragment①">盒子片段</a>，其内部区域是其 <a data-link-type="dfn" href="#boundary-box"
                        id="ref-for-boundary-box">边界框</a></p>
            <li data-md>
                <p>否则，其内部区域为最近的祖先 <a data-link-type="dfn" href="https://www.w3.org/TR/css-overflow-3/#scroll-container"
                        id="ref-for-scroll-container③">滚动容器</a> 的 <a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-scroll-snap-1/#optimal-viewing-region"
                        id="ref-for-optimal-viewing-region①">最佳查看区域</a></p>
        </ul>
        <p class="note" role="note"><span>注意：</span>如果对象不在屏幕上，<a data-link-type="dfn" href="#inside-area"
                id="ref-for-inside-area">内部区域</a>应为最近的可见祖先容器。</p>
        <p class="issue" id="issue-c7f6d991"><a class="self-link" href="#issue-c7f6d991"></a> CSS 应该有一个术语来表示“考虑边角形状属性（如
            border-radius）的边框盒”。<a
                href="https://github.com/w3c/csswg-drafts/issues/2324">&lt;https://github.com/w3c/csswg-drafts/issues/2324></a>
        </p>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="search-origin">搜索起点</dfn> 是搜索下一个目标的起点。</p>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="spatial-navigation-starting-point">空间导航起点</dfn> 是由用户代理设置的搜索下一个目标的起点。最初未设置，可能是元素或点。</p>
        <p class="note" role="note"><span>注意：</span>例如，当用户点击文档内容时，用户代理可以将其设置为用户点击的位置，当焦点被移动（通过空间导航或其他方式）时未设置。</p>
        <p>如果用户代理同时设置了 <a data-link-type="dfn" href="#spatial-navigation-starting-point"
                id="ref-for-spatial-navigation-starting-point">空间导航起点</a> 和 <a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/interaction.html#sequential-focus-navigation-starting-point"
                id="ref-for-sequential-focus-navigation-starting-point">顺序聚焦导航起点</a>，它们的设置必须一致。</p>
        <h3 class="heading settled" data-level="8.2" id="grouping"><span class="secno">8.2. </span><span
                class="content"> 元素的分组</span><a class="self-link" href="#grouping"></a></h3>
        <p>空间导航的处理模型是基于文档的布局和可聚焦元素的相对位置，用户代理必须优先在局部逻辑分组中查找元素，只有在未找到合适的元素时才查找分组外的可聚焦元素（详情参见 <a href="#nav">§ 8.3
                Navigation</a>）。</p>
        <p>此类分组称为 <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="spatial-navigation-containers">空间导航容器</dfn>。</p>
        <p><span class="cssapi">默认情况下，</span> <a data-link-type="dfn" href="#spatial-navigation-containers"
                id="ref-for-spatial-navigation-containers②④">空间导航容器</a> 由以下元素建立：</p>
        <ul>
            <li data-md>
                <p>一个 <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context"
                        id="ref-for-browsing-context①">浏览上下文</a> 的视口（不限于 <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsers.html#top-level-browsing-context"
                        id="ref-for-top-level-browsing-context②">顶级浏览上下文</a>）</p>
            <li data-md>
                <p><a data-link-type="dfn" href="https://www.w3.org/TR/css-overflow-3/#scroll-container"
                        id="ref-for-scroll-container④">滚动容器</a></p>
        </ul>
        <div class="cssapi"> 可以使用 <a data-link-type="dfn" href="#spatial-navigation-containers"
                id="ref-for-spatial-navigation-containers②⑤">空间导航容器</a> 的 <a class="property" data-link-type="propdesc"
                href="#propdef-spatial-navigation-contain"
                id="ref-for-propdef-spatial-navigation-contain②">spatial-navigation-contain</a> 属性来创建额外的空间导航容器（见 <a
                href="#container">§ 9.1 使用 spatial-navigation-contain 属性创建额外的空间导航容器</a>）。</div>
        <h3 class="heading settled" data-level="8.3" id="nav"><span class="secno">8.3. </span><span
                class="content">导航</span><a class="self-link" href="#nav"></a></h3>
        <p>空间导航的处理模型描述了空间导航的整体工作方式。</p>
        <figure class="verbose non-normative">
            <img src="https://www.w3.org/TR/css-nav-1/images/spatnav_processing_model_diagram.svg" alt="空间导航处理模型图">
            <figcaption>空间导航处理模型概述 <br> 此图并非规范性内容。它概述了在本节进一步定义的处理模型，假设 <a class="property" data-link-type="propdesc"
                    href="#propdef-spatial-navigation-action"
                    id="ref-for-propdef-spatial-navigation-action①">spatial-navigation-action</a> 属性的初始值为 <a class="css"
                    data-link-type="maybe" href="#valdef-spatial-navigation-action-auto"
                    id="ref-for-valdef-spatial-navigation-action-auto">auto</a>。</figcaption>
        </figure>
        <div class="algorithm" data-algorithm="运行空间导航步骤">
            要在 <var>方向</var> 中运行 <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="spatial-navigation-steps">空间导航步骤</dfn>，请执行以下操作：
            <ol>
                <li data-md>
                    <p>设 <var>searchOrigin</var> 为<a data-link-type="dfn" href="#set-the-search-origin"
                            id="ref-for-set-the-search-origin">设置搜索起点</a>的结果。</p>
                <li data-md>
                    <ul>
                        <li data-md>
                            <p>如果 <var>searchOrigin</var> 是一个<a data-link-type="dfn"
                                    href="https://dom.spec.whatwg.org/#boundary-point-node"
                                    id="ref-for-boundary-point-node">节点</a>，则设 <var>eventTarget</var> 为
                                <var>searchOrigin</var>
                            </p>
                        <li data-md>
                            <p>否则（<a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert"
                                    id="ref-for-assert">断言</a>：<var>searchOrigin</var> 是一个位置），设 <var>eventTarget</var>
                                为包含 <var>searchOrigin</var> 的<a data-link-type="dfn"
                                    href="https://dom.spec.whatwg.org/#boundary-point-node"
                                    id="ref-for-boundary-point-node①">节点</a></p>
                    </ul>
                <li data-md>
                    <p>如果 <var>eventTarget</var> 是<a data-link-type="dfn"
                            href="https://dom.spec.whatwg.org/#concept-document"
                            id="ref-for-concept-document②">文档</a>或<a data-link-type="dfn"
                            href="https://dom.spec.whatwg.org/#document-element"
                            id="ref-for-document-element">文档元素</a>，则设 <var>eventTarget</var> 为<a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/dom.html#the-body-element-2"
                            id="ref-for-the-body-element-2②">主体元素</a>，如果其不为 <code>null</code>，否则设为<span
                            id="ref-for-document-element①">文档元素</span>。</p>
                <li data-md>
                    <ul>
                        <li class="cssapi">如果 <var>eventTarget</var> 是<a data-link-type="dfn"
                                href="https://www.w3.org/TR/css-overflow-3/#scroll-container"
                                id="ref-for-scroll-container⑤">滚动容器</a>，且在 <var>eventTarget</var> 上的 <a class="property"
                                data-link-type="propdesc" href="#propdef-spatial-navigation-action"
                                id="ref-for-propdef-spatial-navigation-action②">spatial-navigation-action</a> 属性的计算值为 <a
                                class="css" data-link-type="maybe" href="#valdef-spatial-navigation-action-scroll"
                                id="ref-for-valdef-spatial-navigation-action-scroll">scroll</a>，并且
                            <var>eventTarget</var> <a data-link-type="dfn" href="#can-be-manually-scrolled"
                                id="ref-for-can-be-manually-scrolled">可以手动滚动</a>，则<a data-link-type="dfn"
                                href="#directionally-scroll-an-element"
                                id="ref-for-directionally-scroll-an-element">按方向滚动该元素</a> <var>eventTarget</var> 并返回。
                        <li>
                            <span class="cssapi">否则，</span>如果 <var>eventTarget</var> 是 <a data-link-type="dfn"
                                href="https://www.w3.org/TR/css-overflow-3/#scroll-container"
                                id="ref-for-scroll-container⑥">滚动容器</a> 或 <a data-link-type="dfn"
                                href="https://dom.spec.whatwg.org/#concept-document"
                                id="ref-for-concept-document③">文档</a>
                            <ol>
                                <li data-md>
                                    <p>设 <var>candidates</var> 为在 <var>eventTarget</var> 中<a data-link-type="dfn"
                                            href="#find-focusable-areas"
                                            id="ref-for-find-focusable-areas②">寻找可聚焦区域</a>的结果，参数 <var>visibleOnly</var>
                                        设置为 <code>false</code> <span class="cssapi">，如果在 <var>eventTarget</var> 上 <a
                                                class="property" data-link-type="propdesc"
                                                href="#propdef-spatial-navigation-action"
                                                id="ref-for-propdef-spatial-navigation-action③">spatial-navigation-action</a>
                                            属性的计算值为 <a class="css" data-link-type="maybe"
                                                href="#valdef-spatial-navigation-action-focus"
                                                id="ref-for-valdef-spatial-navigation-action-focus">focus</a>，否则为
                                            <code>true</code>。</span></p>
                                <li data-md>
                                    <ul>
                                        <li class="cssapi">如果 <var>eventTarget</var> 上的 <a class="property"
                                                data-link-type="propdesc" href="#propdef-spatial-navigation-action"
                                                id="ref-for-propdef-spatial-navigation-action④">spatial-navigation-action</a>
                                            属性的计算值不是 <a class="css" data-link-type="maybe"
                                                href="#valdef-spatial-navigation-action-focus"
                                                id="ref-for-valdef-spatial-navigation-action-focus①">focus</a> 且
                                            <var>eventTarget</var> <a data-link-type="dfn"
                                                href="#can-be-manually-scrolled"
                                                id="ref-for-can-be-manually-scrolled①">可以手动滚动</a>，则<a
                                                data-link-type="dfn" href="#directionally-scroll-an-element"
                                                id="ref-for-directionally-scroll-an-element①">按方向滚动该元素</a>
                                            <var>eventTarget</var> 并返回。
                                        <li>
                                            <span class="cssapi">否则，</span>如果 <var>candidates</var> 至少包含 1 项：
                                            <ol>
                                                <li data-md>
                                                    <p>设 <var>bestCandidate</var> 为在 <var>candidates</var> 中从
                                                        <var>searchOrigin</var> 开始，沿 <var>方向</var> <a
                                                            data-link-type="dfn" href="#select-the-best-candidate"
                                                            id="ref-for-select-the-best-candidate②">选择最佳候选项</a> 的结果。
                                                    </p>
                                                <li data-md>
                                                    <p><a data-link-type="dfn" href="#dispatches-navbeforefocus-event"
                                                            id="ref-for-dispatches-navbeforefocus-event">在
                                                            <var>eventTarget</var> 上分发 navbeforefocus 事件</a>，包括
                                                        <var>方向</var> 和 <var>bestCandidate</var>。
                                                    </p>
                                                <li data-md>
                                                    <p>运行 <a data-link-type="dfn"
                                                            href="https://html.spec.whatwg.org/multipage/interaction.html#focusing-steps"
                                                            id="ref-for-focusing-steps">聚焦步骤</a>以聚焦
                                                        <var>bestCandidate</var> 并返回。
                                                    </p>
                                            </ol>
                                        <li>否则，回退到下一步。
                                    </ul>
                            </ol>
                        <li>否则，回退到下一步。
                    </ul>
                <li data-md>
                    <p>设 <var>container</var> 为 <var>eventTarget</var> 最近的祖先，它是一个<a data-link-type="dfn"
                            href="#spatial-navigation-containers"
                            id="ref-for-spatial-navigation-containers②⑥">空间导航容器</a>。</p>
                <li data-md>
                    <p><i>循环</i>：设 <var>candidates</var> 为在 <var>container</var> 中<a data-link-type="dfn"
                            href="#find-focusable-areas" id="ref-for-find-focusable-areas③">寻找可聚焦区域</a>的结果，参数
                        <var>visibleOnly</var> 设置为 <code>false</code> <span class="cssapi">，如果在 <var>container</var> 上
                            <a class="property" data-link-type="propdesc" href="#propdef-spatial-navigation-action"
                                id="ref-for-propdef-spatial-navigation-action⑤">spatial-navigation-action</a> 属性的计算值为 <a
                                class="css" data-link-type="maybe" href="#valdef-spatial-navigation-action-focus"
                                id="ref-for-valdef-spatial-navigation-action-focus②">focus</a>，否则为 <code>true</code>，排除
                            <var>eventTarget</var>。</span>
                    </p>
                <li data-md>
                    <p>如果 <var>candidates</var> 为空：</p>
                <li class="cssapi">如果在 <var>container</var> 上 <a class="property" data-link-type="propdesc"
                        href="#propdef-spatial-navigation-action"
                        id="ref-for-propdef-spatial-navigation-action⑥">spatial-navigation-action</a> 属性的计算值不是 <a
                        class="css" data-link-type="maybe" href="#valdef-spatial-navigation-action-focus"
                        id="ref-for-valdef-spatial-navigation-action-focus③">focus</a>，且 <var>container</var> 是一个<a
                        data-link-type="dfn" href="https://www.w3.org/TR/css-overflow-3/#scroll-container"
                        id="ref-for-scroll-container⑦">滚动容器</a>，且<a data-link-type="dfn"
                        href="#can-be-manually-scrolled" id="ref-for-can-be-manually-scrolled②">可以手动滚动</a>，则<a
                        data-link-type="dfn" href="#directionally-scroll-an-element"
                        id="ref-for-directionally-scroll-an-element②">按方向滚动该元素</a> <var>container</var> 并返回。
                <li class="cssapi">否则，
                    <ol>
                        <li data-md>
                            <p><a data-link-type="dfn" href="#dispatches-navnotarget-event"
                                    id="ref-for-dispatches-navnotarget-event">在 <var>eventTarget</var> 上分发 navnotarget
                                    事件</a>，包括 <var>方向</var> 和 <var>container</var>。</p>
                        <li data-md>
                            <ul>
                                <li data-md>
                                    <p>如果 <var>container</var> 是<a data-link-type="dfn"
                                            href="https://dom.spec.whatwg.org/#document-element"
                                            id="ref-for-document-element②">顶级浏览上下文</a>的文档元素，则返回。用户代理可根据 <var>方向</var>
                                        将焦点转移到其自身控件（如果有）。</p>
                                <li data-md>
                                    <p>否则，如果 <var>container</var> 是<a data-link-type="dfn"
                                            href="https://dom.spec.whatwg.org/#document-element"
                                            id="ref-for-document-element③">嵌套浏览上下文</a>的文档元素，则：</p>
                                    <ol>
                                        <li data-md>
                                            <p>设 <var>searchOrigin</var> 为 <var>container</var> 的<a data-link-type="dfn"
                                                    href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context-container"
                                                    id="ref-for-browsing-context-container">浏览上下文容器</a></p>
                                        <li data-md>
                                            <p>设 <var>eventTarget</var> 为 <var>searchOrigin</var></p>
                                        <li data-md>
                                            <p>设 <var>container</var> 为 <var>eventTarget</var> 最近的祖先，它是一个<a
                                                    data-link-type="dfn" href="#spatial-navigation-containers"
                                                    id="ref-for-spatial-navigation-containers②⑦">空间导航容器</a>。</p>
                                        <li data-md>
                                            <p>返回到标为<i>循环</i>的步骤。</p>
                                    </ol>
                                <li data-md>
                                    <p>否则，设 <var>container</var> 为其最接近的祖先，它本身是一个<a data-link-type="dfn"
                                            href="#spatial-navigation-containers"
                                            id="ref-for-spatial-navigation-containers②⑧">空间导航容器</a>，并返回到标为 <i>循环</i>
                                        的步骤。</p>
                            </ul>
                    </ol>
                <li data-md>
                    <p>设 <var>bestCandidate</var> 为在 <var>candidates</var> 中从 <var>eventTarget</var> 开始，沿 <var>方向</var>
                        <a data-link-type="dfn" href="#select-the-best-candidate"
                            id="ref-for-select-the-best-candidate③">选择最佳候选项</a> 的结果。
                    </p>
                <li data-md>
                    <p><a data-link-type="dfn" href="#dispatches-navbeforefocus-event"
                            id="ref-for-dispatches-navbeforefocus-event①">在 <var>eventTarget</var> 上分发 navbeforefocus
                            事件</a>，包括 <var>方向</var> 和 <var>bestCandidate</var>。</p>
                <li data-md>
                    <p>运行 <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/interaction.html#focusing-steps"
                            id="ref-for-focusing-steps①">聚焦步骤</a>以聚焦 <var>bestCandidate</var> 并返回。</p>
            </ol>
        </div>
        <h3 class="heading settled" data-level="8.4" id="heuristics"><span class="secno">8.4. </span><span
                class="content"> 焦点导航启发式算法</span><a class="self-link" href="#heuristics"></a></h3>
        <p class="note" role="note"><span>注意：</span>以下算法受到 Chrome 的实现以及 <a
                href="https://www.w3.org/TR/WICD/#focus-handling">旧 WICD
                规范</a>的启发。我们强烈鼓励实现者提供更好的方法或改进这些方法的建议，以帮助改进此规范，以最大程度地实现互操作性。特别是用户代理在<a data-link-type="dfn"
                href="#find-focusable-areas"
                id="ref-for-find-focusable-areas④">寻找可聚焦区域</a>时的差异可能会导致某些元素在某些用户代理中可聚焦，而在其他用户代理中不可聚焦，这对用户不利。</p>
        <p>本节中定义的所有几何操作都适用于 CSS 布局的结果，包括所有图形变换，例如<a data-link-type="dfn"
                href="https://www.w3.org/TR/css3-positioning/#relative-position"
                id="ref-for-relative-position">相对定位</a>或<a data-link-type="biblio"
                href="#biblio-css-transforms-1">[CSS-TRANSFORMS-1]</a>。</p>
        <div class="algorithm" data-algorithm="设置搜索起点">
            <p>要 <dfn class="dfn-paneled" data-dfn-type="dfn"
                    data-lt="set the search origin | setting the search origin" data-noexport
                    id="set-the-search-origin">设置 <a data-link-type="dfn" href="#search-origin"
                        id="ref-for-search-origin">搜索起点</a></dfn>，请执行以下步骤：</p>
            <ol>
                <li data-md>
                    <p>设 <var>searchOrigin</var> 为<a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/interaction.html#dom-anchor"
                            id="ref-for-dom-anchor">当前顶级浏览上下文的聚焦区域</a>的 <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/interaction.html#currently-focused-area-of-a-top-level-browsing-context"
                            id="ref-for-currently-focused-area-of-a-top-level-browsing-context">DOM 锚点</a>。</p>
                <li data-md>
                    <p>如果<a data-link-type="dfn" href="#spatial-navigation-starting-point"
                            id="ref-for-spatial-navigation-starting-point①">空间导航起点</a>不为 <code>null</code> 且在
                        <var>searchOrigin</var> 内，则返回该起点。
                    </p>
                <li data-md>
                    <p>否则，返回 <var>searchOrigin</var>。</p>
            </ol>
            <p>如果 <var>焦点目标</var>的状态没有通过移动焦点而改变，<dfn class="dfn-paneled" data-dfn-type="dfn"
                    data-lt="update the search origin | updating the search origin" data-noexport
                    id="update-the-search-origin">按如下方式更新 <a data-link-type="dfn" href="#search-origin"
                        id="ref-for-search-origin①">搜索起点</a></dfn>：</p>
            <ol>
                <li data-md>
                    <p>如果 <var>焦点目标</var>变得<a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/semantics-other.html#concept-element-disabled"
                            id="ref-for-concept-element-disabled">实际禁用</a>或<a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/interaction.html#expressly-inert"
                            id="ref-for-expressly-inert">明确惰性</a>或未<a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/rendering.html#being-rendered"
                            id="ref-for-being-rendered">被渲染</a>，则设 <var>searchOrigin</var> 为 <var>焦点目标</var>的<a
                            data-link-type="dfn" href="#boundary-box" id="ref-for-boundary-box①">边界框</a>。</p>
                <li data-md>
                    <p>如果 <var>焦点目标</var><a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/infrastructure.html#nodes-are-removed"
                            id="ref-for-nodes-are-removed">被移除</a>，则设 <var>searchOrigin</var> 为 <var>焦点目标</var>的<a
                            data-link-type="dfn" href="#boundary-box" id="ref-for-boundary-box②">边界框</a>，并保持其存在时的位置。</p>
                <li data-md>
                    <p>如果 <var>焦点目标</var>完全离屏，则设 <var>searchOrigin</var> 为 <var>焦点目标</var>最近可见的<a data-link-type="dfn"
                            href="#spatial-navigation-containers"
                            id="ref-for-spatial-navigation-containers②⑨">空间导航容器</a>的视口。</p>
            </ol>
            <p class="note" role="note"><span>注意：</span>用户代理应该<a data-link-type="dfn" href="#update-the-search-origin"
                    id="ref-for-update-the-search-origin">更新搜索起点</a>，例如当聚焦的元素被鼠标滚动移出或从视口中消失时。</p>
        </div>
        <div class="algorithm" data-algorithm="寻找可聚焦区域">
            <p>要在包含元素 <var>C</var> 内<dfn class="dfn-paneled" data-dfn-type="dfn"
                    data-lt="find focusable areas | finding focusable areas" data-noexport
                    id="find-focusable-areas">寻找可聚焦区域</dfn>，可选参数 <var>visibleOnly</var> 默认为 <code>true</code>，请执行以下步骤：
            </p>
            <ol>
                <li data-md>
                    <p>设 <var>focusables</var> 为所有<a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/interaction.html#focusable-area"
                            id="ref-for-focusable-area②">可聚焦区域</a>的<a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/interaction.html#dom-anchor"
                            id="ref-for-dom-anchor①">DOM 锚点</a>是 <var>C</var> 的后代元素的<a data-link-type="dfn"
                            href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set">集合</a>。对于具有多个<a
                            data-link-type="dfn" href="https://www.w3.org/TR/css-break-4/#box-fragment"
                            id="ref-for-box-fragment②">框片段</a>的<a data-link-type="dfn"
                            href="https://www.w3.org/TR/css-display-3/#box" id="ref-for-box②">框</a>，每个<span
                            id="ref-for-box-fragment③">框片段</span>分别考虑。</p>
                <li data-md>
                    <p>用户代理应从 <var>focusables</var> 中<a data-link-type="dfn"
                            href="https://infra.spec.whatwg.org/#list-remove" id="ref-for-list-remove">移除</a>其 <a
                            data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/interaction.html#dom-anchor"
                            id="ref-for-dom-anchor②">DOM 锚点</a>的 <a data-link-type="element-attr"
                            href="https://html.spec.whatwg.org/multipage/interaction.html#attr-tabindex"
                            id="ref-for-attr-tabindex"><code>tabindex</code></a> 属性设置为负值的项目。</p>
                    <p class="note" role="note"><span>注意：</span>这在一定程度上是为了反映那些带负值 tabindex 的元素的排除，避免它们出现在<a
                            data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/interaction.html#sequential-focus-navigation-order"
                            id="ref-for-sequential-focus-navigation-order">顺序焦点导航顺序</a>中，正如 <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/interaction.html#attr-tabindex"
                            id="ref-for-attr-tabindex①">tabindex</a> 中定义的。</p>
                <li data-md>
                    <p>如果 <var>visibleOnly</var> 为 <code>false</code>，返回 <var>focusables</var>。</p>
                    <p class="note" role="note"><span>注意：</span><var>focusables</var> 可能为空</p>
                <li data-md>
                    <p>设 <var>visibles</var> 为 <var>focusables</var> 中其<a data-link-type="dfn" href="#boundary-box"
                            id="ref-for-boundary-box③">边界框</a>至少部分位于 <var>C</var> 的<a data-link-type="dfn"
                            href="#inside-area" id="ref-for-inside-area①">内部区域</a>的子集。</p>
                    <div class="advisement non-normative">
                        除了那些位于滚动条不可见部分的元素，空间导航不会自动排除因某些其他元素覆盖而无法被点击的元素。为了避免用户实际聚焦并激活这些元素时破坏应用逻辑中的假设，并避免通过聚焦不可见或表面上无法到达的元素而混淆用户，作者应使用与使元素无法通过顺序导航到达的最佳实践相同的方法使这些元素在空间导航中也不可到达，例如使用
                        <code>tab-index="-1"</code> 或 <a href="https://github.com/WICG/inert"><code>inert</code></a> 属性。
                    </div>
                <li data-md>
                    <p>返回 <var>visibles</var>。</p>
                    <p class="note" role="note"><span>注意：</span><var>visibles</var> 可能为空</p>
            </ol>
        </div>
        <div class="algorithm" data-algorithm="选择最佳候选项">
            <p>要在一个<a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set"
                    id="ref-for-ordered-set①">集合</a>中的 <var>candidates</var> 内、按方向 <var>dir</var> 以
                <var>searchOrigin</var> 为起点<dfn class="dfn-paneled" data-dfn-type="dfn"
                    data-lt="select the best candidate | selecting the best candidate" data-noexport
                    id="select-the-best-candidate">选择最佳候选项</dfn>，请执行以下步骤：
            </p>
            <ol>
                <li data-md>
                    <p>如果 <var>candidates</var> 是<a data-link-type="dfn"
                            href="https://infra.spec.whatwg.org/#list-empty" id="ref-for-list-empty">空的</a>，返回
                        <code>null</code>
                    </p>
                <li data-md>
                    <p>如果 <var>candidates</var> 只有一个项目，返回该项目</p>
                <li data-md>
                    <p>设 <var>insiders</var> 为 <var>candidates</var> 的子集</p>
                    <ul>
                        <li data-md>
                            <p>其边界框完全与 <a data-link-type="dfn" href="#inside-area" id="ref-for-inside-area②">内部区域</a>的
                                <var>searchOrigin</var> 重叠
                            </p>
                        <li data-md>
                            <p>其边界框部分与 <a data-link-type="dfn" href="#inside-area" id="ref-for-inside-area③">内部区域</a>的
                                <var>searchOrigin</var> 重叠，具体为
                            </p>
                            <ul>
                                <li data-md>
                                    <p>如果 <var>dir</var> 为 <code
                                            class="idl"><a data-link-type="idl" href="#dom-spatialnavigationdirection-down" id="ref-for-dom-spatialnavigationdirection-down">down</a></code>，上边缘在
                                        <var>searchOrigin</var> 的 <a data-link-type="dfn" href="#boundary-box"
                                            id="ref-for-boundary-box④">边界框</a>的上边缘之下
                                    </p>
                                <li data-md>
                                    <p>如果 <var>dir</var> 为 <code
                                            class="idl"><a data-link-type="idl" href="#dom-spatialnavigationdirection-up" id="ref-for-dom-spatialnavigationdirection-up">up</a></code>，下边缘在
                                        <var>searchOrigin</var> 的 <a data-link-type="dfn" href="#boundary-box"
                                            id="ref-for-boundary-box⑤">边界框</a>的下边缘之上
                                    </p>
                                <li data-md>
                                    <p>如果 <var>dir</var> 为 <code
                                            class="idl"><a data-link-type="idl" href="#dom-spatialnavigationdirection-left" id="ref-for-dom-spatialnavigationdirection-left">left</a></code>，右边缘在
                                        <var>searchOrigin</var> 的 <a data-link-type="dfn" href="#boundary-box"
                                            id="ref-for-boundary-box⑥">边界框</a>的右边缘之左
                                    </p>
                                <li data-md>
                                    <p>如果 <var>dir</var> 为 <code
                                            class="idl"><a data-link-type="idl" href="#dom-spatialnavigationdirection-right" id="ref-for-dom-spatialnavigationdirection-right">right</a></code>，左边缘在
                                        <var>searchOrigin</var> 的 <a data-link-type="dfn" href="#boundary-box"
                                            id="ref-for-boundary-box⑦">边界框</a>的左边缘之右
                                    </p>
                            </ul>
                            <p class="note" role="note">
                                <span>注意：</span>有关元素与搜索起点重叠的更多详细条件会影响焦点移动的顺序。焦点移动的顺序与用户体验有关，因此取决于用户代理定义的机制。
                            </p>
                    </ul>
                    <p class="note" role="note"><span>注意：</span>此子集设置是为了避免沿相反方向移动。</p>
                <li data-md>
                    <ul>
                        <li data-md>
                            <p>如果 <var>insiders</var> 非空，</p>
                            <ol>
                                <li data-md>
                                    <p>设 <var>closest subset</var> 为 <var>insiders</var> 的子集，其 <a data-link-type="dfn"
                                            href="#boundary-box" id="ref-for-boundary-box⑧">边界框</a></p>
                                    <ul>
                                        <li data-md>
                                            <p>如果 <var>dir</var> 为 <code
                                                    class="idl"><a data-link-type="idl" href="#dom-spatialnavigationdirection-down" id="ref-for-dom-spatialnavigationdirection-down①">down</a></code>，则上边缘距离
                                                <a data-link-type="dfn" href="#inside-area"
                                                    id="ref-for-inside-area④">内部区域</a>的 <var>searchOrigin</var> 上边缘最近
                                            </p>
                                        <li data-md>
                                            <p>如果 <var>dir</var> 为 <code
                                                    class="idl"><a data-link-type="idl" href="#dom-spatialnavigationdirection-up" id="ref-for-dom-spatialnavigationdirection-up①">up</a></code>，则下边缘距离
                                                <a data-link-type="dfn" href="#inside-area"
                                                    id="ref-for-inside-area⑤">内部区域</a>的 <var>searchOrigin</var> 下边缘最近
                                            </p>
                                        <li data-md>
                                            <p>如果 <var>dir</var> 为 <code
                                                    class="idl"><a data-link-type="idl" href="#dom-spatialnavigationdirection-left" id="ref-for-dom-spatialnavigationdirection-left①">left</a></code>，则右边缘距离
                                                <a data-link-type="dfn" href="#inside-area"
                                                    id="ref-for-inside-area⑥">内部区域</a>的 <var>searchOrigin</var> 右边缘最近
                                            </p>
                                        <li data-md>
                                            <p>如果 <var>dir</var> 为 <code
                                                    class="idl"><a data-link-type="idl" href="#dom-spatialnavigationdirection-right" id="ref-for-dom-spatialnavigationdirection-right①">right</a></code>，则左边缘距离
                                                <a data-link-type="dfn" href="#inside-area"
                                                    id="ref-for-inside-area⑦">内部区域</a>的 <var>searchOrigin</var> 左边缘最近
                                            </p>
                                    </ul>
                                <li data-md>
                                    <p>如果 <var>closest subset</var> 只有一个项目，返回该项目，否则返回 <var>closest subset</var>
                                        中的第一个项目，除非其 <a data-link-type="dfn" href="#boundary-box"
                                            id="ref-for-boundary-box⑨">边界框</a>与另一个项目重叠，且该项目在 CSS 的 <a
                                            data-link-type="dfn"
                                            href="https://drafts.csswg.org/css2/zindex.html#painting-order"
                                            id="ref-for-painting-order">绘制顺序</a>中更高。在这种情况下，返回该项目，除非它也被另一个更高的项目重叠，递归处理。
                                    </p>
                            </ol>
                        <li data-md>
                            <p>否则</p>
                            <ol>
                                <li data-md>
                                    <p>设 <var>candidates</var> 为其项目符合以下条件之一的子集：</p>
                                    <ul>
                                        <li data-md>
                                            <p>该项目不与 <var>searchOrigin</var> 重叠，且其 <a data-link-type="dfn"
                                                    href="#boundary-box" id="ref-for-boundary-box①①">边界框</a></p>
                                            <ul>
                                                <li data-md>
                                                    <p>如果 <var>dir</var> 为 <code
                                                            class="idl"><a data-link-type="idl" href="#dom-spatialnavigationdirection-down" id="ref-for-dom-spatialnavigationdirection-down②">down</a></code>，则上边缘在
                                                        <var>searchOrigin</var> 的 <a data-link-type="dfn"
                                                            href="#boundary-box"
                                                            id="ref-for-boundary-box①②">边界框</a>的下边缘之下
                                                    </p>
                                                <li data-md>
                                                    <p>如果 <var>dir</var> 为 <code
                                                            class="idl"><a data-link-type="idl" href="#dom-spatialnavigationdirection-up" id="ref-for-dom-spatialnavigationdirection-up②">up</a></code>，则下边缘在
                                                        <var>searchOrigin</var> 的 <a data-link-type="dfn"
                                                            href="#boundary-box"
                                                            id="ref-for-boundary-box①③">边界框</a>的上边缘之上
                                                    </p>
                                                <li data-md>
                                                    <p>如果 <var>dir</var> 为 <code
                                                            class="idl"><a data-link-type="idl" href="#dom-spatialnavigationdirection-left" id="ref-for-dom-spatialnavigationdirection-left②">left</a></code>，则右边缘在
                                                        <var>searchOrigin</var> 的 <a data-link-type="dfn"
                                                            href="#boundary-box"
                                                            id="ref-for-boundary-box①④">边界框</a>的左边缘之左
                                                    </p>
                                                <li data-md>
                                                    <p>如果 <var>dir</var> 为 <code
                                                            class="idl"><a data-link-type="idl" href="#dom-spatialnavigationdirection-right" id="ref-for-dom-spatialnavigationdirection-right②">right</a></code>，则左边缘在
                                                        <var>searchOrigin</var> 的 <a data-link-type="dfn"
                                                            href="#boundary-box"
                                                            id="ref-for-boundary-box①⑤">边界框</a>的右边缘之右
                                                    </p>
                                            </ul>
                                    </ul>
                                <li data-md>
                                    <p>对于 <var>candidates</var> 中的每个 <var>candidate</var>，<a data-link-type="dfn"
                                            href="#find-the-shortest-distance"
                                            id="ref-for-find-the-shortest-distance">找到最短距离</a>与 <var>searchOrigin</var>。
                                    </p>
                                <li data-md>
                                    <p>返回 <var>candidates</var> 集合中距离最小的项目。如果有多个具有相同距离，返回文档顺序中的第一个项目，除非其 <a
                                            data-link-type="dfn" href="#boundary-box"
                                            id="ref-for-boundary-box①⑥">边界框</a>与另一个项目的 <span
                                            id="ref-for-boundary-box①⑦">边界框</span>重叠，且该项目在 CSS <a data-link-type="dfn"
                                            href="https://drafts.csswg.org/css2/zindex.html#painting-order"
                                            id="ref-for-painting-order①">绘制顺序</a>中更高。在这种情况下，返回该项目，除非它也被另一个更高的项目重叠，递归处理。
                                    </p>
                            </ol>
                    </ul>
            </ol>
        </div>
        <div class="algorithm" data-algorithm="查找最短距离">
            要在方向 <var>dir</var> 上查找 <var>reference</var> 和 <var>candidate</var> 之间的最短距离，找到 <var>P1</var> 和 <var>P2</var>
            点，分别位于 <var>reference</var> 和 <var>candidate</var> 的边界框内，使 <var>distance</var> 最小化，定义如下：
            <pre class="prod"><var>distance</var> = <var>euclidean</var> <a data-link-type="grammar" href="https://www.w3.org/TR/css-values-4/#mult-one-plus" id="ref-for-mult-one-plus">+</a> <var>displacement</var> - <var>alignment</var> - <var>sqrt(Overlap)</var>
        </pre>
            <p>每个术语的含义如下：</p>
            <dl>
                <dt><var>euclidean</var>
                <dd> <var>P1</var> 和 <var>P2</var> 之间的欧几里得距离
                <dt><var>displacement</var>
                <dd>
                    在 <var>dir</var> 方向上 <var>reference</var> 和 <var>candidate</var> 之间的位移度量，定义为
                    <pre><code><var>displacement</var> = (<var>P1</var> 和 <var>P2</var> 在与 <var>dir</var> 正交的轴上的绝对距离 + <var>orthogonalBias</var>) * <var>orthogonalWeight</var>
        </code></pre>
                <dt><var>orthogonalBias</var>：
                <dd>
                    <ul>
                        <li data-md>
                            <p>如果 <var>dir</var> 为 <code
                                    class="idl"><a data-link-type="idl" href="#dom-spatialnavigationdirection-left" id="ref-for-dom-spatialnavigationdirection-left③">left</a></code>
                                或 <code
                                    class="idl"><a data-link-type="idl" href="#dom-spatialnavigationdirection-right" id="ref-for-dom-spatialnavigationdirection-right③">right</a></code>，则为
                                <var>reference</var> 的轴对齐边界框的高度 / 2
                            </p>
                        <li data-md>
                            <p>如果 <var>dir</var> 为 <code
                                    class="idl"><a data-link-type="idl" href="#dom-spatialnavigationdirection-up" id="ref-for-dom-spatialnavigationdirection-up③">up</a></code>
                                或 <code
                                    class="idl"><a data-link-type="idl" href="#dom-spatialnavigationdirection-down" id="ref-for-dom-spatialnavigationdirection-down③">down</a></code>，则为
                                <var>reference</var> 的轴对齐边界框的宽度 / 2
                            </p>
                    </ul>
                <dt><var>orthogonalWeight</var>：
                <dd>
                    <ul>
                        <li data-md>
                            <p>如果 <var>dir</var> 为 <code
                                    class="idl"><a data-link-type="idl" href="#dom-spatialnavigationdirection-left" id="ref-for-dom-spatialnavigationdirection-left④">left</a></code>
                                或 <code
                                    class="idl"><a data-link-type="idl" href="#dom-spatialnavigationdirection-right" id="ref-for-dom-spatialnavigationdirection-right④">right</a></code>，值为
                                30</p>
                        <li data-md>
                            <p>如果 <var>dir</var> 为 <code
                                    class="idl"><a data-link-type="idl" href="#dom-spatialnavigationdirection-up" id="ref-for-dom-spatialnavigationdirection-up④">up</a></code>
                                或 <code
                                    class="idl"><a data-link-type="idl" href="#dom-spatialnavigationdirection-down" id="ref-for-dom-spatialnavigationdirection-down④">down</a></code>，值为
                                2</p>
                    </ul>
                <dt><var>alignment</var>
                <dd>
                    在 <var>dir</var> 方向上 <var>reference</var> 和 <var>candidate</var> 之间的对齐度量，定义为：
                    <pre><code><var>alignment</var> = <var>alignBias</var> * <var>alignWeight</var>
        </code></pre>
                <dt><var>alignBias</var>：
                <dd>
                    <ul>
                        <li data-md>
                            <p>如果 <var>dir</var> 为 <code
                                    class="idl"><a data-link-type="idl" href="#dom-spatialnavigationdirection-left" id="ref-for-dom-spatialnavigationdirection-left⑤">left</a></code>
                                或 <code
                                    class="idl"><a data-link-type="idl" href="#dom-spatialnavigationdirection-right" id="ref-for-dom-spatialnavigationdirection-right⑤">right</a></code>，则为
                                <var>projectedOverlap</var> / <var>reference</var> 的轴对齐边界框的高度
                            </p>
                        <li data-md>
                            <p>如果 <var>dir</var> 为 <code
                                    class="idl"><a data-link-type="idl" href="#dom-spatialnavigationdirection-up" id="ref-for-dom-spatialnavigationdirection-up⑤">up</a></code>
                                或 <code
                                    class="idl"><a data-link-type="idl" href="#dom-spatialnavigationdirection-down" id="ref-for-dom-spatialnavigationdirection-down⑤">down</a></code>，则为
                                <var>projectedOverlap</var> / <var>reference</var> 的轴对齐边界框的宽度
                            </p>
                    </ul>
                <dt><var>projectedOverlap</var>：
                <dd>
                    <ul>
                        <li data-md>
                            <p>如果 <var>dir</var> 为 <code
                                    class="idl"><a data-link-type="idl" href="#dom-spatialnavigationdirection-left" id="ref-for-dom-spatialnavigationdirection-left⑥">left</a></code>
                                或 <code
                                    class="idl"><a data-link-type="idl" href="#dom-spatialnavigationdirection-right" id="ref-for-dom-spatialnavigationdirection-right⑥">right</a></code>，则为
                                <var>reference</var> 和 <var>candidate</var> 的水平投影在垂直轴上的重叠长度
                            </p>
                        <li data-md>
                            <p>如果 <var>dir</var> 为 <code
                                    class="idl"><a data-link-type="idl" href="#dom-spatialnavigationdirection-up" id="ref-for-dom-spatialnavigationdirection-up⑥">up</a></code>
                                或 <code
                                    class="idl"><a data-link-type="idl" href="#dom-spatialnavigationdirection-down" id="ref-for-dom-spatialnavigationdirection-down⑥">down</a></code>，则为
                                <var>reference</var> 和 <var>candidate</var> 的垂直投影在水平轴上的重叠长度
                            </p>
                    </ul>
                    <figure>
                        <img alt src="https://www.w3.org/TR/css-nav-1/images/projected_overlap.png"
                            style="width: 500px;">
                        <figcaption>projectedOverlap</figcaption>
                    </figure>
                <dt><var>alignWeight</var>：
                <dd>5
                <dt><var>sqrt(Overlap)</var>
                <dd> <var>reference</var> 和 <var>candidate</var> 之间的重叠区域面积的平方根，如果它们没有重叠则为 0。
            </dl>
            <p class="note" role="note"><span>注意：</span> 该通用公式是从几种合理的替代方案中挑选出来的，基于其在选择最佳候选项时最符合直觉的次数（参见<a
                    href="https://wicg.github.io/spatial-navigation/tests/ux/list.html">用户体验测试用例</a>）。类似地，<var>alignWeight</var>
                和 <var>orthogonalWeight</var> 的值也是通过相同的测试用例实验确定的。结果公式可能有点复杂，但似乎能给出良好的结果。欢迎提供改进或简化的建议。</p>
        </div>
        <div class="cssapi">
            <h2 class="heading settled" data-level="9" id="declarative"><span class="secno">9. </span><span
                    class="content">通过声明方式控制空间导航</span><a class="self-link" href="#declarative"></a></h2>
            <h3 class="heading settled" data-level="9.1" id="container"><span class="secno">9.1. </span><span
                    class="content">创建额外的空间导航容器：<a class="property" data-link-type="propdesc"
                        href="#propdef-spatial-navigation-contain"
                        id="ref-for-propdef-spatial-navigation-contain③">spatial-navigation-contain</a>属性</span><a
                    class="self-link" href="#container"></a></h3>
            <table class="def propdef" data-link-for-hint="spatial-navigation-contain">
                <tbody>
                    <tr>
                        <th>名称:
                        <td><dfn class="dfn-paneled css" data-dfn-type="property" data-export
                                id="propdef-spatial-navigation-contain">spatial-navigation-contain</dfn>
                    <tr class="value">
                        <th><a href="https://drafts.csswg.org/css-values/#value-defs">值:</a>
                        <td class="prod">auto <a data-link-type="grammar"
                                href="https://www.w3.org/TR/css-values-4/#comb-one" id="ref-for-comb-one">|</a> contain
                    <tr>
                        <th><a href="https://drafts.csswg.org/css-cascade/#initial-values">初始值:</a>
                        <td>auto
                    <tr>
                        <th>适用于:
                        <td><a href="https://drafts.csswg.org/css-pseudo/#generated-content"
                                title="包含::before和::after伪元素。">所有元素</a>
                    <tr>
                        <th><a href="https://drafts.csswg.org/css-cascade/#inherited-property">继承:</a>
                        <td>否
                    <tr>
                        <th><a href="https://drafts.csswg.org/css-values/#percentages">百分比:</a>
                        <td>不适用
                    <tr>
                        <th><a href="https://drafts.csswg.org/css-cascade/#computed">计算值:</a>
                        <td>按指定
                    <tr>
                        <th>规范顺序:
                        <td>按语法
                    <tr>
                        <th><a href="https://drafts.csswg.org/web-animations/#animation-type">动画类型:</a>
                        <td>离散的
                </tbody>
            </table>
            <dl>
                <dt><dfn class="css" data-dfn-for="spatial-navigation-contain" data-dfn-type="value" data-export
                        id="valdef-spatial-navigation-contain-auto">auto<a class="self-link"
                            href="#valdef-spatial-navigation-contain-auto"></a></dfn>
                <dd>如果该元素是一个<a data-link-type="dfn" href="https://www.w3.org/TR/css-overflow-3/#scroll-container"
                        id="ref-for-scroll-container⑧">滚动容器</a>，则它会建立一个<a data-link-type="dfn"
                        href="#spatial-navigation-containers"
                        id="ref-for-spatial-navigation-containers③⓪">空间导航容器</a>，否则不会。
                <dt><dfn class="css" data-dfn-for="spatial-navigation-contain" data-dfn-type="value" data-export
                        id="valdef-spatial-navigation-contain-contain">contain<a class="self-link"
                            href="#valdef-spatial-navigation-contain-contain"></a></dfn>
                <dd>该元素会建立一个<a data-link-type="dfn" href="#spatial-navigation-containers"
                        id="ref-for-spatial-navigation-containers③①">空间导航容器</a>
            </dl>
            <p class="note" role="note"><span>注意:</span>此外，根据<a href="#grouping">§ 8.2 元素的分组</a>，<a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context"
                    id="ref-for-browsing-context②">浏览上下文</a>的视口（不限于<a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/browsers.html#top-level-browsing-context"
                    id="ref-for-top-level-browsing-context④">顶级浏览上下文</a>）也会建立一个<a data-link-type="dfn"
                    href="#spatial-navigation-containers" id="ref-for-spatial-navigation-containers③②">空间导航容器</a>。</p>
            <div class="example" id="example-6752923a">
                <a class="self-link" href="#example-6752923a"></a> 以下示例展示了一个简化的电视节目表或日历。
                它有一个代表电视节目或日历条目的元素网格及其周围的一些UI按钮。
                <p>在这种情况下，网格相当稀疏，因此如果用户试图从“Foo”向下移动，焦点将移动到“下一周”，因为它在向下方向上更接近。同样地，从“Bar”向下移动，焦点将移动到“上一周”。</p>
                <div class="output">
                    <div id="example-cal">
                        <button>上一周</button>
                        <table>
                            <tbody>
                                <tr>
                                    <td>
                                    <th>一
                                    <th>二
                                    <th>三
                                    <th>四
                                    <th>五
                                    <th>六
                                    <th>日
                                <tr>
                                    <td>0-6
                                    <td>
                                    <td>
                                    <td>
                                    <td>
                                    <td>
                                    <td>
                                    <td><a href="#">Foo</a>
                                <tr>
                                    <td>6-9
                                    <td><a href="#">Bar</a>
                                    <td>
                                    <td>
                                    <td>
                                    <td>
                                    <td>
                                    <td>
                                <tr>
                                    <td>9-12
                                    <td>
                                    <td><a href="#">Bat</a>
                                    <td>
                                    <td>
                                    <td>
                                    <td>
                                    <td>
                                <tr>
                                    <td>12-18
                                    <td>
                                    <td>
                                    <td>
                                    <td>
                                    <td>
                                    <td>
                                    <td>
                                <tr>
                                    <td>18-21
                                    <td>
                                    <td>
                                    <td>
                                    <td>
                                    <td>
                                    <td>
                                    <td><a href="#">Woo</a>
                                <tr>
                                    <td>21-24
                                    <td>
                                    <td>
                                    <td>
                                    <td>
                                    <td>
                                    <td><a href="#">Baz</a>
                                    <td>
                            </tbody>
                        </table>
                        <button>下一周</button>
                    </div>
                </div>
                <pre><code class="highlight"><c- p>&lt;</c-><c- f>div</c-><c- p>></c->
    <c- p>&lt;</c-><c- f>button</c-><c- p>></c->上一周<c- p>&lt;/</c-><c- f>button</c-><c- p>></c->
    <c- p>&lt;</c-><c- f>table</c-><c- p>></c->
        <c- p>&lt;</c-><c- f>tr</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>th</c-><c- p>></c->一<c- p>&lt;</c-><c- f>th</c-><c- p>></c->二<c- p>&lt;</c-><c- f>th</c-><c- p>></c->三<c- p>&lt;</c-><c- f>th</c-><c- p>></c->四<c- p>&lt;</c-><c- f>th</c-><c- p>></c->五<c- p>&lt;</c-><c- f>th</c-><c- p>></c->六<c- p>&lt;</c-><c- f>th</c-><c- p>></c->日
        <c- p>&lt;</c-><c- f>tr</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>></c->0-6<c- p>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>a</c-> <c- e>href</c-><c- o>=</c-><c- s>"#"</c-><c- p>></c->Foo<c- p>&lt;/</c-><c- f>a</c-><c- p>></c->
        <c- p>&lt;</c-><c- f>tr</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>></c->6-9<c- p>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>a</c-> <c- e>href</c-><c- o>=</c-><c- s>"#"</c-><c- p>></c->Bar<c- p>&lt;/</c-><c- f>a</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>></c->
        <c- p>&lt;</c-><c- f>tr</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>></c->9-12<c- p>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>a</c-> <c- e>href</c-><c- o>=</c-><c- s>"#"</c-><c- p>></c->Bat<c- p>&lt;/</c-><c- f>a</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>></c->
        <c- p>&lt;</c-><c- f>tr</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>></c->12-18<c- p>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>></c->
        <c- p>&lt;</c-><c- f>tr</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>></c->18-21<c- p>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>a</c-> <c- e>href</c-><c- o>=</c-><c- s>"#"</c-><c- p>></c->Woo<c- p>&lt;/</c-><c- f>a</c-><c- p>></c->
        <c- p>&lt;</c-><c- f>tr</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>></c->21-24<c- p>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>a</c-> <c- e>href</c-><c- o>=</c-><c- s>"#"</c-><c- p>></c->Baz<c- p>&lt;/</c-><c- f>a</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>></c->
    <c- p>&lt;/</c-><c- f>table</c-><c- p>></c->
    <c- p>&lt;</c-><c- f>button</c-><c- p>></c->下一周<c- p>&lt;/</c-><c- f>button</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>div</c-><c- p>></c->
</code></pre>
                <p>然而，作者可能希望提供不同的导航体验，优先考虑在网格内移动的情况，因为表中的元素在语义上是相关的。</p>
                <p>在样式表中添加<code
                        class="highlight"><c- f>table </c-><c- p>{</c-> <c- k>spatial-navigation-contain</c-><c- p>:</c-> contain<c- p>;</c-> <c- p>}</c-></code>会实现这种行为。
                </p>
                <p>之后，焦点会从“Foo”向下移动到“Woo”而不是“下一周”，从“Bar”移动到“Bat”而不是“上一周”。</p>
                <p>仍然可以将焦点移出表格。例如，焦点会从“Foo”向右移动到“下一周”，因为在网格中没有东西在右侧。</p>
            </div>
            <p class="note" role="note"><span>注意:</span> <a class="property" data-link-type="propdesc"
                    href="#propdef-spatial-navigation-contain"
                    id="ref-for-propdef-spatial-navigation-contain④">spatial-navigation-contain</a> 属性处于<a
                    data-link-type="dfn" href="#at-risk" id="ref-for-at-risk①">风险</a>中。</p>
        </div>
        <h3 class="heading settled" data-level="9.2" id="css-property-spatialnavigationaction"><span class="secno">9.2.
            </span><span class="content">控制与滚动的交互：<a class="property" data-link-type="propdesc"
                    href="#propdef-spatial-navigation-action"
                    id="ref-for-propdef-spatial-navigation-action⑦">spatial-navigation-action</a> 属性</span><a
                class="self-link" href="#css-property-spatialnavigationaction"></a></h3>
        <table class="def propdef" data-link-for-hint="spatial-navigation-action">
            <tbody>
                <tr>
                    <th>名称:
                    <td><dfn class="dfn-paneled css" data-dfn-type="property" data-export
                            id="propdef-spatial-navigation-action">spatial-navigation-action</dfn>
                <tr class="value">
                    <th><a href="https://drafts.csswg.org/css-values/#value-defs">值:</a>
                    <td class="prod">auto <a data-link-type="grammar"
                            href="https://www.w3.org/TR/css-values-4/#comb-one" id="ref-for-comb-one①">|</a> focus <span
                            id="ref-for-comb-one②">|</span> scroll
                <tr>
                    <th><a href="https://drafts.csswg.org/css-cascade/#initial-values">初始值:</a>
                    <td>auto
                <tr>
                    <th>适用于:
                    <td><a data-link-type="dfn" href="https://www.w3.org/TR/css-overflow-3/#scroll-container"
                            id="ref-for-scroll-container⑨">滚动容器</a>
                <tr>
                    <th><a href="https://drafts.csswg.org/css-cascade/#inherited-property">继承:</a>
                    <td>否
                <tr>
                    <th><a href="https://drafts.csswg.org/css-values/#percentages">百分比:</a>
                    <td>不适用
                <tr>
                    <th><a href="https://drafts.csswg.org/css-cascade/#computed">计算值:</a>
                    <td>按指定
                <tr>
                    <th>规范顺序:
                    <td>按语法
                <tr>
                    <th><a href="https://drafts.csswg.org/web-animations/#animation-type">动画类型:</a>
                    <td>离散的
            </tbody>
        </table>
        <p>当焦点位于滚动容器内部并且用户触发空间导航时，有点模棱两可他们是否在请求将焦点移动到该方向，或是要求文档在该方向上滚动。默认情况下，系统会自动决定，但此属性允许作者在聚焦或滚动之间进行选择。</p>
        <p>具体行为定义在<a href="#nav">§ 8.3 导航</a>中，但下面提供了每个值的效果的高层次描述。</p>
        <p>当触发空间导航时，行为取决于当前聚焦元素上的<a class="property" data-link-type="propdesc" href="#propdef-spatial-navigation-action"
                id="ref-for-propdef-spatial-navigation-action⑧">spatial-navigation-action</a>的值（如果该元素是<a
                data-link-type="dfn" href="https://www.w3.org/TR/css-overflow-3/#scroll-container"
                id="ref-for-scroll-container①⓪">滚动容器</a>），或者是其最近的<span
                id="ref-for-scroll-container①①">滚动容器</span>祖先（如果不是）。</p>
        <dl>
            <dt><dfn class="dfn-paneled css" data-dfn-for="spatial-navigation-action" data-dfn-type="value" data-export
                    id="valdef-spatial-navigation-action-auto">auto</dfn>
            <dd> 如果在请求的方向上滚动容器内有可见的可聚焦元素，则最近的那个会获得焦点。否则，<span id="ref-for-scroll-container①③">滚动容器</span>会在请求的方向上滚动。
            <dt><dfn class="dfn-paneled css" data-dfn-for="spatial-navigation-action" data-dfn-type="value" data-export
                    id="valdef-spatial-navigation-action-focus">focus</dfn>
            <dd>
                焦点移动到滚动容器内最近的可聚焦元素，不论它是否可见。如果没有可聚焦元素，滚动容器不会滚动，搜索会继续沿祖先链进行。
                <p class="note" role="note"><span>注意:</span> 滚动容器可能因聚焦到之前不可见的元素而产生滚动的副作用，但它不会<a data-link-type="dfn"
                        href="#directionally-scroll-an-element"
                        id="ref-for-directionally-scroll-an-element③">进行方向性的滚动</a>。</p>
                <p class="note" role="note"><span>注意:</span> 如果将<a class="css" data-link-type="maybe"
                        href="#valdef-spatial-navigation-action-focus"
                        id="ref-for-valdef-spatial-navigation-action-focus④">focus</a>值赋予<a class="property"
                        data-link-type="propdesc" href="#propdef-spatial-navigation-action"
                        id="ref-for-propdef-spatial-navigation-action⑨">spatial-navigation-action</a>，当在视口内的方向上没有任何可见候选元素时，即使容器可以继续滚动，也会触发<a
                        class="idl-code" data-link-type="event" href="#eventdef-navigationevent-navnotarget"
                        id="ref-for-eventdef-navigationevent-navnotarget①">navnotarget</a>事件。</p>
            <dt><dfn class="dfn-paneled css" data-dfn-for="spatial-navigation-action" data-dfn-type="value" data-export
                    id="valdef-spatial-navigation-action-scroll">scroll</dfn>
            <dd>
                如果当前聚焦的元素本身不是一个<a data-link-type="dfn" href="https://www.w3.org/TR/css-overflow-3/#scroll-container"
                    id="ref-for-scroll-container①⑥">滚动容器</a>，该值对其祖先滚动容器的效果与<a class="css" data-link-type="maybe"
                    href="#valdef-spatial-navigation-action-auto"
                    id="ref-for-valdef-spatial-navigation-action-auto①">auto</a>相同。
                <p>如果当前聚焦元素是一个<a data-link-type="dfn" href="https://www.w3.org/TR/css-overflow-3/#scroll-container"
                        id="ref-for-scroll-container①⑧">滚动容器</a>，它会在请求的方向上滚动而不改变聚焦的元素，无论是否存在可聚焦的子元素。</p>
                <p class="note" role="note"><span>注意:</span>
                    这意味着空间导航可以用于将焦点移动到滚动容器并对其进行滚动，但不能将焦点移动到其子元素。然而，如果通过其他方式（例如按下<span class="key">Tab</span>键或使用<code
                        class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/interaction.html#dom-focus" id="ref-for-dom-focus②">focus()</a></code>方法）将焦点移至子元素，则可以使用空间导航将焦点移至其他可聚焦的子元素。
                </p>
                <p class="note" role="note"><span>注意:</span> <span class="css">scroll</span>值处于<a data-link-type="dfn"
                        href="#at-risk" id="ref-for-at-risk②">风险</a>中。</p>
        </dl>
        <p class="note" role="note"><span>注意:</span> 本规范的早期版本未提供声明方式选择进入<a class="css" data-link-type="maybe"
                href="#valdef-spatial-navigation-action-focus"
                id="ref-for-valdef-spatial-navigation-action-focus⑤">focus</a>值所定义的行为，而是提供了在滚动之前触发的可取消事件，以便作者自行实现该行为。然而，与滚动相关的可取消事件可能会导致性能问题，因此该事件被移除，取而代之的是引入<a
                class="property" data-link-type="propdesc" href="#propdef-spatial-navigation-action"
                id="ref-for-propdef-spatial-navigation-action①⓪">spatial-navigation-action</a>属性。</p>
        <div class="example" id="example-59a246d8">
            <a class="self-link" href="#example-59a246d8"></a> 在这个示例中，指定了具有<code
                class="highlight">spatial-navigation-action: focus</code>的可滚动容器。在该容器内，有一个元素在滚动视口中不可见。按下下箭头键直接将焦点移动到该元素，而无需手动滚动。
            <figure>
                <img alt src="https://www.w3.org/TR/css-nav-1/images/spatnav-action.png" style="width: 500px;">
                <figcaption>从“Box 2”移动焦点到“Box 3”而无需手动滚动</figcaption>
            </figure>
            <pre><code class="highlight"><c- p>&lt;</c-><c- f>div</c-> <c- e>class</c-><c- o>=</c-><c- s>'scroller'</c-><c- p>></c->
    <c- p>&lt;</c-><c- f>button</c-> <c- e>class</c-><c- o>=</c-><c- s>'item'</c-><c- p>></c->Box 1<c- p>&lt;/</c-><c- f>button</c-><c- p>></c->
    <c- p>&lt;</c-><c- f>button</c-> <c- e>class</c-><c- o>=</c-><c- s>'item'</c-><c- p>></c->Box 2<c- p>&lt;/</c-><c- f>button</c-><c- p>></c->
    <c- p>&lt;</c-><c- f>button</c-> <c- e>class</c-><c- o>=</c-><c- s>'item'</c-><c- p>></c->Box 3<c- p>&lt;/</c-><c- f>button</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>div</c-><c- p>></c->
</code></pre>
            <pre><code class="highlight"><c- f>.scroller </c-><c- p>{</c->
    <c- k>display</c-><c- p>:</c-> grid<c- p>;</c->
    <c- k>grid-template-columns</c-><c- p>:</c-> <c- nf>repeat</c-><c- p>(</c-><c- m>1</c-><c- p>,</c-> <c- m>1</c-><c- l>fr</c-><c- p>);</c->
    <c- k>height</c-><c- p>:</c-> <c- m>300</c-><c- l>px</c-><c- p>;</c->
    <c- k>width</c-><c- p>:</c-> <c- m>200</c-><c- l>px</c-><c- p>;</c->
    <c- k>overflow-y</c-><c- p>:</c-> scroll<c- p>;</c->
    <c- k>spatial-navigation-action</c-><c- p>:</c-> focus<c- p>;</c->
<c- p>}</c->
<c- f>.item </c-><c- p>{</c->
    <c- k>height</c-><c- p>:</c-> <c- m>100</c-><c- l>px</c-><c- p>;</c->
    <c- k>width</c-><c- p>:</c-> <c- m>100</c-><c- l>px</c-><c- p>;</c->
    <c- k>margin</c-><c- p>:</c-> <c- m>50</c-><c- l>px</c-> auto<c- p>;</c->
    <c- k>background-color</c-><c- p>:</c-> blue<c- p>;</c->
<c- p>}</c->
<c- f>:focus </c-><c- p>{</c->
    <c- k>background-color</c-><c- p>:</c-> red<c- p>;</c->
<c- p>}</c->
</code></pre>
        </div>
        <h3 class="heading settled" data-level="9.3" id="css-property-spatialnavigationfunction"><span
                class="secno">9.3. </span><span class="content">选择导航算法：<a class="property" data-link-type="propdesc"
                    href="#propdef-spatial-navigation-function"
                    id="ref-for-propdef-spatial-navigation-function①">spatial-navigation-function</a> 属性</span><a
                class="self-link" href="#css-property-spatialnavigationfunction"></a></h3>
        <table class="def propdef" data-link-for-hint="spatial-navigation-function">
            <tbody>
                <tr>
                    <th>名称:
                    <td><dfn class="dfn-paneled css" data-dfn-type="property" data-export
                            id="propdef-spatial-navigation-function">spatial-navigation-function</dfn>
                <tr class="value">
                    <th><a href="https://drafts.csswg.org/css-values/#value-defs">值:</a>
                    <td class="prod">normal <a data-link-type="grammar"
                            href="https://www.w3.org/TR/css-values-4/#comb-one" id="ref-for-comb-one③">|</a> grid
                <tr>
                    <th><a href="https://drafts.csswg.org/css-cascade/#initial-values">初始值:</a>
                    <td>normal
                <tr>
                    <th>适用于:
                    <td><a data-link-type="dfn" href="#spatial-navigation-containers"
                            id="ref-for-spatial-navigation-containers③④">空间导航容器</a>
                <tr>
                    <th><a href="https://drafts.csswg.org/css-cascade/#inherited-property">继承:</a>
                    <td>否
                <tr>
                    <th><a href="https://drafts.csswg.org/css-values/#percentages">百分比:</a>
                    <td>不适用
                <tr>
                    <th><a href="https://drafts.csswg.org/css-cascade/#computed">计算值:</a>
                    <td>按指定
                <tr>
                    <th>规范顺序:
                    <td>按语法
                <tr>
                    <th><a href="https://drafts.csswg.org/web-animations/#animation-type">动画类型:</a>
                    <td>离散的
            </tbody>
        </table>
        <p>在<a href="#processing-model">§ 8 处理模型</a>中指定的默认空间导航算法可能需要根据布局类型进行微调。此属性允许作者指示哪种导航算法适合空间导航行为。</p>
        <p>其值定义如下：</p>
        <dl>
            <dt><dfn class="css" data-dfn-for="spatial-navigation-function" data-dfn-type="value" data-export
                    id="valdef-spatial-navigation-function-normal">normal<a class="self-link"
                        href="#valdef-spatial-navigation-function-normal"></a></dfn>
            <dd>
                使用用户代理定义的默认焦点导航算法移动焦点。
                <p>通常情况下，焦点移动到通过<a data-link-type="dfn" href="#find-the-shortest-distance"
                        id="ref-for-find-the-shortest-distance①">找到最短距离</a>计算出的最近的元素。</p>
            <dt><dfn class="css" data-dfn-for="spatial-navigation-function" data-dfn-type="value" data-export
                    id="valdef-spatial-navigation-function-grid">grid<a class="self-link"
                        href="#valdef-spatial-navigation-function-grid"></a></dfn>
            <dd>
                将焦点移动到与导航方向最对齐的元素。
                <ul>
                    <li data-md>
                        <p>如果在导航方向上有多个对齐的候选元素，则选择沿与导航方向对应的轴距离最近的元素。在多个元素具有相同距离的情况下，选择对齐度最小的元素。</p>
                    <li data-md>
                        <p>如果在给定方向上没有对齐的候选元素，则选择沿与导航方向对应的轴距离最近的元素。在多个元素具有相同距离的情况下，选择沿与导航方向正交的轴距离最小的元素。</p>
                </ul>
        </dl>
        <p class="note" role="note"><span>注意:</span> 这些值会与用户的偏好进行协商，以便提供看起来自然的空间导航行为。</p>
        <div class="example" id="example-c86d0d36">
            <a class="self-link" href="#example-c86d0d36"></a> 此示例展示了焦点如何根据<code
                class="highlight">spatial-navigation-function</code>的值不同而移动不同。
            <figure>
                <img alt src="https://www.w3.org/TR/css-nav-1/images/spatnav-function.png" style="width: 500px;">
                <figcaption>从“A”移动焦点到候选元素之一</figcaption>
            </figure>
            <p>设包含“A”、“B”和“C”的元素是一个<a data-link-type="dfn" href="#spatial-navigation-containers"
                    id="ref-for-spatial-navigation-containers③⑤">空间导航容器</a>。</p>
            <p>当用户按下下箭头键时，如果给该元素的<code class="highlight">spatial-navigation-function</code>赋值为<code
                    class="highlight">normal</code>，焦点将移动到“B”。否则，如果给该元素指定了<code
                    class="highlight">grid</code>值，焦点将移动到“C”。</p>
        </div>
        <h2 class="no-num heading settled" id="scrolling"><span class="content">附录 A. 滚动扩展</span><a class="self-link"
                href="#scrolling"></a></h2>
        <p>本节提出了一些 CSS 扩展，这些扩展应当整合到上游规范中，但在整合之前会暂时托管于此。</p>
        <div class="algorithm" data-algorithm="can be manually scrolled">
            <p class="issue" id="issue-942e7041"><a class="self-link" href="#issue-942e7041"></a> 这种术语应包含在 <a
                    data-link-type="biblio" href="#biblio-cssom-view-1">[CSSOM-VIEW-1]</a>、<a data-link-type="biblio"
                    href="#biblio-css-overflow-3">[CSS-OVERFLOW-3]</a>、<a data-link-type="biblio"
                    href="#biblio-css-scroll-snap-1">[CSS-SCROLL-SNAP-1]</a> 中。<a
                    href="https://github.com/w3c/csswg-drafts/issues/2322">&lt;https://github.com/w3c/csswg-drafts/issues/2322></a>
            </p>
            <p>当满足以下条件时，元素<var>e</var>可以在给定方向<var>d</var>上<dfn class="dfn-paneled" data-dfn-type="dfn"
                    data-lt="can be manually scrolled | can be scrolled manually | cannot be scrolled manually | cannot be manually scrolled"
                    data-noexport id="can-be-manually-scrolled">手动滚动</dfn>：</p>
            <ul>
                <li data-md>
                    <p><var>e</var>建立的<a data-link-type="dfn" href="https://www.w3.org/TR/css-display-3/#principal-box"
                            id="ref-for-principal-box">主框</a>是一个<a data-link-type="dfn"
                            href="https://www.w3.org/TR/css-overflow-3/#scroll-container"
                            id="ref-for-scroll-container②⓪">滚动容器</a>，并且</p>
                <li data-md>
                    <p>如果<var>d</var>是<code>up</code>或<code>down</code>，则<a class="property" data-link-type="propdesc"
                            href="https://www.w3.org/TR/css-overflow-3/#propdef-overflow-y"
                            id="ref-for-propdef-overflow-y">overflow-y</a>属性的计算值不为<a class="css" data-link-type="maybe"
                            href="https://www.w3.org/TR/css-overflow-3/#valdef-overflow-hidden"
                            id="ref-for-valdef-overflow-hidden">hidden</a>，并且</p>
                <li data-md>
                    <p>如果<var>d</var>是<code>left</code>或<code>right</code>，则<a class="property"
                            data-link-type="propdesc" href="https://www.w3.org/TR/css-overflow-3/#propdef-overflow-x"
                            id="ref-for-propdef-overflow-x">overflow-x</a>属性的计算值不为<a class="css" data-link-type="maybe"
                            href="https://www.w3.org/TR/css-overflow-3/#valdef-overflow-hidden"
                            id="ref-for-valdef-overflow-hidden①">hidden</a>，并且</p>
                <li data-md>
                    <p><var>e</var>在方向<var>d</var>上没有达到<a data-link-type="dfn"
                            href="https://drafts.csswg.org/css-overscroll-behavior-1/#scroll-boundary"
                            id="ref-for-scroll-boundary">滚动边界</a>，并且</p>
                <li data-md>
                    <p><var>e</var>在方向<var>d</var>上未与最后一个<a class="css" data-link-type="maybe"
                            href="https://www.w3.org/TR/css-scroll-snap-1/#valdef-scroll-snap-type-mandatory"
                            id="ref-for-valdef-scroll-snap-type-mandatory">强制</a>对齐点对齐</p>
            </ul>
        </div>
        <div class="algorithm" data-algorithm="to directionally scroll an element">
            <p class="issue" id="issue-00706fa4"><a class="self-link" href="#issue-00706fa4"></a> <a
                    data-link-type="biblio" href="#biblio-cssom-view-1">[CSSOM-VIEW-1]</a>
                应该定义如何在没有明确位置的情况下进行方向滚动。在此之前，我们将自行定义。<a
                    href="https://github.com/w3c/csswg-drafts/issues/2323">&lt;https://github.com/w3c/csswg-drafts/issues/2323></a>
            </p>
            <p>为了<var>dir</var>方向上<dfn class="dfn-paneled" data-dfn-type="dfn"
                    data-lt="directionally scroll an element | directionally scroll the element | be directionally scrolled"
                    data-noexport id="directionally-scroll-an-element">方向性地滚动</dfn>元素<var>e</var>：</p>
            <ol>
                <li data-md>
                    <p>令<var>d</var>为用户代理定义的距离。</p>
                <li data-md>
                    <p>令<var>x</var>为<var>e</var>在x轴上的当前滚动位置。</p>
                <li data-md>
                    <p>令<var>y</var>为<var>e</var>在y轴上的当前滚动位置。</p>
                <li data-md>
                    <p>使用<a data-link-type="dfn" href="https://www.w3.org/TR/cssom-view/#scroll-an-element"
                            id="ref-for-scroll-an-element">滚动元素</a>算法从<a data-link-type="biblio"
                            href="#biblio-cssom-view-1">[CSSOM-VIEW-1]</a>对<var>e</var>进行滚动到：</p>
                    <ul>
                        <li data-md>
                            <p>如果<var>dir</var>是<code>up</code>，则(<var>x</var>, <var>y</var> - <var>d</var>)</p>
                        <li data-md>
                            <p>如果<var>dir</var>是<code>down</code>，则(<var>x</var>, <var>y</var> + <var>d</var>)</p>
                        <li data-md>
                            <p>如果<var>dir</var>是<code>left</code>，则(<var>x</var> - <var>d</var>, <var>y</var>)</p>
                        <li data-md>
                            <p>如果<var>dir</var>是<code>right</code>，则(<var>x</var> + <var>d</var>, <var>y</var>)</p>
                    </ul>
            </ol>
        </div>
        <h2 class="no-num heading settled" id="privsec"><span class="content">附录 B. 隐私与安全注意事项</span><a class="self-link"
                href="#privsec"></a></h2>
        <p>规范的贡献者们认为与本规范相关的所有已知潜在安全风险都已得到充分解决。以下提供了更多详细信息。</p>
        <p>TAG 开发了一个自我评审问卷，以帮助编辑和工作组评估其规范引入的风险。以下提供了答案。</p>
        <dl>
            <dt>本规范是否处理个人可识别信息？
            <dd>否。
            <dt>本规范是否涉及高价值数据？
            <dd>否。
            <dt>本规范是否引入了会跨浏览会话持久存在的状态？
            <dd>否。
            <dt>本规范是否向网络公开持久的跨域状态？
            <dd>否。
            <dt>本规范是否公开了其他当前无法访问的数据？
            <dd>基本上没有。
                <p>唯一确定的例外情况是：如果作者在跨域 iframe 中聚焦时使用 `window.navigate`，如果他们根本没有收到事件，这意味着要么 iframe
                    中有可滚动或可聚焦的内容，因为唯一能接收到事件的情况是搜索完全失败时会向上遍历。</p>
                <p>这种信息非常有限，看起来不会引发实际的安全风险，但就编辑们所知，这确实是作者无法通过其他方式获得的信息。</p>
            <dt>本规范是否启用新的脚本执行/加载机制？
            <dd>否。
            <dt>本规范是否允许一个源访问用户的位置？
            <dd>否。
            <dt>本规范是否允许一个源访问用户设备上的传感器？
            <dd>否。
            <dt>本规范是否允许一个源访问用户本地计算环境的某些方面？
            <dd>否。
            <dt>本规范是否允许一个源访问其他设备？
            <dd>否。
            <dt>本规范是否允许一个源对用户代理的原生 UI 进行某种程度的控制？
            <dd>不允许对用户代理 UI
                的外观进行控制。只允许对用户代理的空间导航行为进行一些控制，这可能被视为其用户界面的一部分。这样做是为了让作者根据页面定制空间导航的行为。为了防止恶意作者干涉用户对焦点和文档导航的控制，默认情况下在跨域
                iframe 中禁用这种覆盖机制。详见 <a href="#policy-feature">§ 7 导航覆盖策略控制的特性</a>。
            <dt>本规范是否向网络暴露临时标识符？
            <dd>否。
            <dt>本规范是否区分一方和第三方上下文的行为？
            <dd>否。
            <dt>本规范在用户代理的“隐身”模式下应如何工作？
            <dd>无差异。
            <dt>本规范是否将数据持久保存到用户的本地设备？
            <dd>否。
            <dt>本规范是否有“安全注意事项”和“隐私注意事项”章节？
            <dd>是，这正是您现在阅读的章节。
            <dt>本规范是否允许降低默认的安全特性？
            <dd>不允许降低任何无关的安全机制。
                <p>它 **确实** 允许作者选择加入允许在他们信任的跨域 iframe 中覆盖空间导航的默认行为所需的事件，使用 <a data-link-type="biblio"
                        href="#biblio-feature-policy">[feature-policy]</a>。详见 <a href="#policy-feature">§ 7
                        导航覆盖策略控制的特性</a>。</p>
        </dl>
        <h2 class="no-num heading settled" id="ack"><span class="content">致谢</span><a class="self-link" href="#ack"></a>
        </h2>
        <p>本规范的编辑想感谢以下个人（按字母顺序排列）对规范的反馈和贡献：</p>
        <ul>
            <li data-md>
                <p>Alice Boxhall</p>
            <li data-md>
                <p>Brian Kardell</p>
            <li data-md>
                <p>Elika Etemad</p>
            <li data-md>
                <p>Eric Seong</p>
            <li data-md>
                <p>Hugo Holgersson</p>
            <li data-md>
                <p>Hyojin Song</p>
            <li data-md>
                <p>Jeonghee Ahn</p>
            <li data-md>
                <p>Junho Seo</p>
            <li data-md>
                <p>Rob Dodson</p>
            <li data-md>
                <p>Seungcheon Baek</p>
        </ul>
        <h2 class="no-num heading settled" id="changes"><span class="content">更改记录</span><a class="self-link"
                href="#changes"></a></h2>
        <p><em>本节是非规范性的。</em></p>
        <p>自 <a href="https://www.w3.org/TR/2019/WD-css-nav-1-20190423/">2019 年 4 月 23 日首次公开工作草案</a>以来，进行了以下更改：</p>
        <ul>
            <li data-md>
                <p>将 <code
                        class="idl"><a data-link-type="idl" href="#dom-element-getspatialnavigationcontainer" id="ref-for-dom-element-getspatialnavigationcontainer④">getSpatialNavigationContainer()</a></code>
                    的结果更改为返回最近的 <a data-link-type="dfn" href="#spatial-navigation-containers"
                        id="ref-for-spatial-navigation-containers③⑥">空间导航容器</a> 祖先</p>
            <li data-md>
                <p>新增了 <a class="property" data-link-type="propdesc" href="#propdef-spatial-navigation-function"
                        id="ref-for-propdef-spatial-navigation-function②">spatial-navigation-function</a></p>
            <li data-md>
                <p>新增了 <a data-link-type="dfn" href="#update-the-search-origin"
                        id="ref-for-update-the-search-origin①">更新搜索起点</a> 的步骤</p>
            <li data-md>
                <p>更改了 <code
                        class="idl"><a data-link-type="idl" href="#dom-element-spatialnavigationsearch" id="ref-for-dom-element-spatialnavigationsearch">spatialNavigationSearch()</a></code>
                    的 IDL，分离了 dir 属性和 <code
                        class="idl"><a data-link-type="idl" href="#dictdef-spatialnavigationsearchoptions" id="ref-for-dictdef-spatialnavigationsearchoptions①">SpatialNavigationSearchOptions</a></code>
                </p>
            <li data-md>
                <p>将完全重叠的非 <a data-link-type="dfn" href="#spatial-navigation-containers"
                        id="ref-for-spatial-navigation-containers③⑦">空间导航容器</a> 的焦点元素作为候选项，以解决不可达问题</p>
        </ul>
    </main>
    <h2 class="no-ref no-num heading settled" id="conformance"><span class="content">符合性</span><a class="self-link"
            href="#conformance"></a></h2>
    <h3 class="heading settled" id="document-conventions"><span class="content">文档约定</span><a class="self-link"
            href="#document-conventions"></a></h3>
    <p>符合性要求是通过描述性声明和 RFC 2119 术语的组合来表达的。本规范的规范性部分中的关键字“MUST”、“MUST NOT”、“REQUIRED”、“SHALL”、“SHALL NOT”、“SHOULD”、“SHOULD
        NOT”、“RECOMMENDED”、“MAY”和“OPTIONAL”应按照 RFC 2119 的描述进行解释。然而，为了便于阅读，本规范中这些词不会全部大写。<a data-link-type="biblio"
            href="#biblio-rfc2119">[RFC2119]</a></p>
    <p>本规范的所有文本都是规范性的，除非明确标记为非规范性部分、示例和注释。</p>
    <p>本规范中的示例以“例如”引入，或者与规范性文本分开，用 <code>class="example"</code> 标记，如下所示：</p>
    <div class="example" id="example-ae2b6bc0">
        <a class="self-link" href="#example-ae2b6bc0"></a>
        <p>这是一个信息性示例。</p>
    </div>
    <p>信息性注释以“注意”一词开头，并用 <code>class="note"</code> 与规范性文本分开，如下所示：</p>
    <p class="note" role="note">注意，这是一个信息性注释。</p>
    <p>劝告性部分是规范性章节，旨在引起特别关注，并用 <code>&lt;strong class="advisement"></code> 与其他规范性文本分开，如下所示：<strong
            class="advisement">用户代理必须提供可访问的替代方案。</strong></p>
    <h3 class="heading settled" id="conform-classes"><span class="content">符合性类别</span><a class="self-link"
            href="#conform-classes"></a></h3>
    <p>本规范的符合性定义适用于三个符合性类别：</p>
    <dl>
        <dt>样式表
        <dd><a href="https://www.w3.org/TR/CSS2/conform.html#style-sheet">CSS 样式表</a>。
        <dt>渲染器
        <dd>解释样式表语义并渲染使用它们的文档的 <a href="https://www.w3.org/TR/CSS2/conform.html#user-agent">用户代理（UA）</a>。
        <dt>作者工具
        <dd>用于编写样式表的 <a href="https://www.w3.org/TR/CSS2/conform.html#user-agent">用户代理（UA）</a>。
    </dl>
    <p>如果样式表中使用本模块定义的语法的所有语句都符合通用 CSS 语法和本模块中定义的各个特性的语法，则该样式表符合本规范。</p>
    <p>如果渲染器不仅按适当的规范解释样式表，还支持本规范定义的所有特性，正确解析并相应地渲染文档，则该渲染器符合本规范。然而，由于设备的限制，用户代理无法正确渲染文档，这并不意味着用户代理不符合规范。（例如，用户代理不需要在单色显示器上渲染颜色。）
    </p>
    <p>如果作者工具编写的样式表在语法上符合通用 CSS 语法和本模块中各个特性的语法，并且满足本模块中描述的样式表的所有其他符合性要求，则该作者工具符合本规范。</p>
    <h3 class="heading settled" id="conform-responsible"><span class="content">CSS 负责任实现要求</span><a class="self-link"
            href="#conform-responsible"></a></h3>
    <p>以下章节定义了若干符合性要求，以负责任地实现 CSS，促进现在和未来的互操作性。</p>
    <h4 class="heading settled" id="conform-partial"><span class="content">部分实现</span><a class="self-link"
            href="#conform-partial"></a></h4>
    <p>为了让作者可以利用向前兼容的解析规则来分配后备值，<strong>CSS 渲染器<em>必须</em>将所有不支持的 at-rules、属性、属性值、关键字和其他语法结构视为无效（并<em>根据需要</em> <a
                href="https://www.w3.org/TR/CSS2/conform.html#ignore">忽略</a>）。</strong>特别地，用户代理<em>不得</em>在单个多值属性声明中有选择地忽略不支持的属性值而保留支持的值：如果任何值被认为无效（因为不支持的值必须如此），CSS
        规定整个声明必须被忽略。</p>
    <h4 class="heading settled" id="conform-future-proofing"><span class="content">不稳定和专有特性的实现</span><a
            class="self-link" href="#conform-future-proofing"></a></h4>
    <p>为了避免与未来稳定的 CSS 特性发生冲突，CSS 工作组建议<a href="https://www.w3.org/TR/CSS/#future-proofing">遵循最佳实践</a>来实现<a
            href="https://www.w3.org/TR/CSS/#unstable">不稳定</a>特性和<a
            href="https://www.w3.org/TR/CSS/#proprietary-extension">专有扩展</a>。</p>
    <h4 class="heading settled" id="conform-testing"><span class="content">候选推荐阶段特性的实现</span><a class="self-link"
            href="#conform-testing"></a></h4>
    <p>一旦规范进入候选推荐（CR）阶段，实现者应发布符合规范的任何 CR 级特性的<a data-link-type="dfn"
            href="https://www.w3.org/TR/CSS/#vendor-prefix">非前缀实现</a>，并应避免公开该特性的前缀变体。</p>
    <p>为了建立和维护 CSS 在各个实现之间的互操作性，CSS 工作组请求非实验性 CSS 渲染器在发布任何 CSS 特性的非前缀实现之前，向 W3C 提交一个实现报告（如果需要，还包括用于该实现报告的测试用例）。提交给 W3C
        的测试用例会由 CSS 工作组进行审查和修正。</p>
    <p>关于提交测试用例和实现报告的更多信息，请访问 CSS 工作组网站 <a
            href="https://www.w3.org/Style/CSS/Test/">http://www.w3.org/Style/CSS/Test/</a>。如有疑问，请发送邮件至 <a
            href="http://lists.w3.org/Archives/Public/public-css-testsuite">public-css-testsuite@w3.org</a> 邮件列表。
        <script src="https://www.w3.org/scripts/TR/2016/fixup.js"></script>
    </p>
    <h2 class="no-num no-ref heading settled" id="index"><span class="content">索引</span><a class="self-link"
            href="#index"></a></h2>
    <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">本规范定义的术语</span><a
            class="self-link" href="#index-defined-here"></a></h3>
    <ul class="index">
        <li><a href="#dom-focusableareasearchmode-all">"all"</a><span>，在 §5.2 中</span>
        <li><a href="#at-risk">at-risk</a><span>，在 §1 中</span>
        <li>
            auto
            <ul>
                <li><a href="#valdef-spatial-navigation-action-auto">spatial-navigation-action 的值</a><span>，在 §9.2
                        中</span>
                <li><a href="#valdef-spatial-navigation-contain-auto">spatial-navigation-contain 的值</a><span>，在 §9.1
                        中</span>
            </ul>
        <li><a href="#directionally-scroll-an-element">方向滚动元素</a><span>，在未编号部分</span>
        <li><a href="#boundary-box">边界框</a><span>，在 §8.1 中</span>
        <li><a href="#can-be-manually-scrolled">可以手动滚动</a><span>，在未编号部分</span>
        <li><a href="#can-be-manually-scrolled">可以手动滚动元素</a><span>，在未编号部分</span>
        <li><a href="#dom-spatialnavigationsearchoptions-candidates">候选项</a><span>，在 §5.2 中</span>
        <li><a href="#can-be-manually-scrolled">无法手动滚动</a><span>，在未编号部分</span>
        <li><a href="#can-be-manually-scrolled">无法手动滚动元素</a><span>，在未编号部分</span>
        <li><a href="#dom-navigationevent-navigationevent">constructor(type)</a><span>，在 §6.1 中</span>
        <li><a href="#dom-navigationevent-navigationevent">constructor(type, eventInitDict)</a><span>，在 §6.1 中</span>
        <li><a href="#valdef-spatial-navigation-contain-contain">contain</a><span>，在 §9.1 中</span>
        <li><a href="#dom-spatialnavigationsearchoptions-container">容器</a><span>，在 §5.2 中</span>
        <li>
            dir
            <ul>
                <li><a href="#dom-navigationevent-dir">NavigationEvent 的属性</a><span>，在 §6.1 中</span>
                <li><a href="#dom-navigationeventinit-dir">NavigationEventInit 的字典成员</a><span>，在 §6.1 中</span>
            </ul>
        <li><a href="#directionally-scroll-an-element">方向滚动元素</a><span>，在未编号部分</span>
        <li><a href="#directionally-scroll-an-element">方向滚动该元素</a><span>，在未编号部分</span>
        <li><a href="#dispatches-navbeforefocus-event">触发 navbeforefocus 事件</a><span>，在 §6.2.1 中</span>
        <li><a href="#dispatches-navnotarget-event">触发 navnotarget 事件</a><span>，在 §6.2.2 中</span>
        <li><a href="#dispatches-navbeforefocus-event">分发 navbeforefocus 事件</a><span>，在 §6.2.1 中</span>
        <li><a href="#dispatches-navnotarget-event">分发 navnotarget 事件</a><span>，在 §6.2.2 中</span>
        <li><a href="#dom-spatialnavigationdirection-down">"down"</a><span>，在 §5.1 中</span>
        <li><a href="#find-focusable-areas">查找可聚焦区域</a><span>，在 §8.4 中</span>
        <li><a href="#find-focusable-areas">查找可聚焦区域</a><span>，在 §8.4 中</span>
        <li><a href="#find-the-shortest-distance">查找最短距离</a><span>，在 §8.4 中</span>
        <li><a href="#find-the-shortest-distance">查找最短距离</a><span>，在 §8.4 中</span>
        <li><a href="#valdef-spatial-navigation-action-focus">focus</a><span>，在 §9.2 中</span>
        <li><a href="#dom-element-focusableareas">focusableAreas()</a><span>，在 §5.2 中</span>
        <li><a href="#enumdef-focusableareasearchmode">FocusableAreaSearchMode</a><span>，在 §5.2 中</span>
        <li><a href="#dictdef-focusableareasoption">FocusableAreasOption</a><span>，在 §5.2 中</span>
        <li><a href="#dom-element-focusableareas">focusableAreas(option)</a><span>，在 §5.2 中</span>
        <li><a href="#dom-element-getspatialnavigationcontainer">getSpatialNavigationContainer()</a><span>，在 §5.2
                中</span>
        <li><a href="#valdef-spatial-navigation-function-grid">grid</a><span>，在 §9.3 中</span>
        <li><a href="#inside-area">内部区域</a><span>，在 §8.1 中</span>
        <li><a href="#dom-spatialnavigationdirection-left">"left"</a><span>，在 §5.1 中</span>
        <li><a href="#dom-focusableareasoption-mode">模式</a><span>，在 §5.2 中</span>
        <li><a href="#eventdef-navigationevent-navbeforefocus">navbeforefocus</a><span>，在 §6.2.1 中</span>
        <li><a href="#dom-window-navigate">navigate(dir)</a><span>，在 §5.1 中</span>
        <li><a href="#navigationevent">NavigationEvent</a><span>，在 §6.1 中</span>
        <li><a href="#dictdef-navigationeventinit">NavigationEventInit</a><span>，在 §6.1 中</span>
        <li><a href="#dom-navigationevent-navigationevent">NavigationEvent(type)</a><span>，在 §6.1 中</span>
        <li><a href="#dom-navigationevent-navigationevent">NavigationEvent(type, eventInitDict)</a><span>，在 §6.1
                中</span>
        <li><a href="#navigation-override">navigation-override</a><span>，在 §7 中</span>
        <li><a href="#eventdef-navigationevent-navnotarget">navnotarget</a><span>，在 §6.2.2 中</span>
        <li><a href="#valdef-spatial-navigation-function-normal">normal</a><span>，在 §9.3 中</span>
        <li>
            relatedTarget
            <ul>
                <li><a href="#dom-navigationevent-relatedtarget">NavigationEvent 的属性</a><span>，在 §6.1 中</span>
                <li><a href="#dom-navigationeventinit-relatedtarget">NavigationEventInit 的字典成员</a><span>，在 §6.1 中</span>
            </ul>
        <li><a href="#dom-spatialnavigationdirection-right">"right"</a><span>，在 §5.1 中</span>
        <li><a href="#valdef-spatial-navigation-action-scroll">scroll</a><span>，在 §9.2 中</span>
        <li><a href="#search-origin">搜索起点</a><span>，在 §8.1 中</span>
        <li><a href="#select-the-best-candidate">选择最佳候选项</a><span>，在 §8.4 中</span>
        <li><a href="#select-the-best-candidate">选择最佳候选项</a><span>，在 §8.4 中</span>
        <li><a href="#set-the-search-origin">设置搜索起点</a><span>，在 §8.4 中</span>
        <li><a href="#set-the-search-origin">设置搜索起点</a><span>，在 §8.4 中</span>
        <li><a href="#spatial-navigation">spatialNavigation</a><span>，在 §1 中</span>
        <li><a href="#spatial-navigation">空间导航</a><span>，在 §1 中</span>
        <li><a href="#propdef-spatial-navigation-action">spatial-navigation-action</a><span>，在 §9.2 中</span>
        <li><a href="#propdef-spatial-navigation-contain">spatial-navigation-contain</a><span>，在 §9.1 中</span>
        <li><a href="#spatial-navigation-containers">空间导航容器</a><span>，在 §8.2 中</span>
        <li><a href="#enumdef-spatialnavigationdirection">SpatialNavigationDirection</a><span>，在 §5.1 中</span>
        <li><a href="#propdef-spatial-navigation-function">spatial-navigation-function</a><span>，在 §9.3 中</span>
        <li><a href="#dom-element-spatialnavigationsearch">spatialNavigationSearch(dir)</a><span>，在 §5.2 中</span>
        <li><a href="#dom-element-spatialnavigationsearch">spatialNavigationSearch(dir, options)</a><span>，在 §5.2
                中</span>
        <li><a href="#dictdef-spatialnavigationsearchoptions">SpatialNavigationSearchOptions</a><span>，在 §5.2 中</span>
        <li><a href="#dom-element-spatialnavigationsearch-options">spatialNavigationSearch(options)</a><span>，在 §5.2
                中</span>
        <li><a href="#spatial-navigation-starting-point">空间导航起点</a><span>，在 §8.1 中</span>
        <li><a href="#spatial-navigation-steps">空间导航步骤</a><span>，在 §8.3 中</span>
        <li><a href="#dom-spatialnavigationdirection-up">"up"</a><span>，在 §5.1 中</span>
        <li><a href="#update-the-search-origin">更新搜索起点</a><span>，在 §8.4 中</span>
        <li><a href="#update-the-search-origin">更新搜索起点</a><span>，在 §8.4 中</span>
        <li><a href="#dom-focusableareasearchmode-visible">"visible"</a><span>，在 §5.2 中</span>
    </ul>
    <aside class="dfn-panel" data-for="term-for-box-fragment">
        <a href="https://www.w3.org/TR/css-break-4/#box-fragment">https://www.w3.org/TR/css-break-4/#box-fragment</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-box-fragment">8.1.
                    Glossary</a> <a href="#ref-for-box-fragment①">(2)</a>
            <li><a href="#ref-for-box-fragment②">8.4.
                    Focus Navigation Heuristics</a> <a href="#ref-for-box-fragment③">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-all">
        <a
            href="https://www.w3.org/TR/css-cascade-4/#propdef-all">https://www.w3.org/TR/css-cascade-4/#propdef-all</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-all">5.2.
                    Low level APIs</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-box">
        <a href="https://www.w3.org/TR/css-display-3/#box">https://www.w3.org/TR/css-display-3/#box</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-box">8.1.
                    Glossary</a> <a href="#ref-for-box①">(2)</a>
            <li><a href="#ref-for-box②">8.4.
                    Focus Navigation Heuristics</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-principal-box">
        <a
            href="https://www.w3.org/TR/css-display-3/#principal-box">https://www.w3.org/TR/css-display-3/#principal-box</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-principal-box">Appendix A. Scroll extensions</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-valdef-overflow-hidden">
        <a
            href="https://www.w3.org/TR/css-overflow-3/#valdef-overflow-hidden">https://www.w3.org/TR/css-overflow-3/#valdef-overflow-hidden</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-valdef-overflow-hidden">Appendix A. Scroll extensions</a> <a
                    href="#ref-for-valdef-overflow-hidden①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-overflow-x">
        <a
            href="https://www.w3.org/TR/css-overflow-3/#propdef-overflow-x">https://www.w3.org/TR/css-overflow-3/#propdef-overflow-x</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-overflow-x">Appendix A. Scroll extensions</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-overflow-y">
        <a
            href="https://www.w3.org/TR/css-overflow-3/#propdef-overflow-y">https://www.w3.org/TR/css-overflow-3/#propdef-overflow-y</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-overflow-y">Appendix A. Scroll extensions</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-scroll-container">
        <a
            href="https://www.w3.org/TR/css-overflow-3/#scroll-container">https://www.w3.org/TR/css-overflow-3/#scroll-container</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-scroll-container">6.2.2.
                    navnotarget</a> <a href="#ref-for-scroll-container①">(2)</a>
            <li><a href="#ref-for-scroll-container②">8.1.
                    Glossary</a> <a href="#ref-for-scroll-container③">(2)</a>
            <li><a href="#ref-for-scroll-container④">8.2.
                    Groupings of elements</a>
            <li><a href="#ref-for-scroll-container⑤">8.3.
                    Navigation</a> <a href="#ref-for-scroll-container⑥">(2)</a> <a
                    href="#ref-for-scroll-container⑦">(3)</a>
            <li><a href="#ref-for-scroll-container⑧">9.1.
                    Creating additional spatial navigation containers: the spatial-navigation-contain property</a>
            <li><a href="#ref-for-scroll-container⑨">9.2.
                    Controlling the interaction with scrolling: the spatial-navigation-action property</a> <a
                    href="#ref-for-scroll-container①⓪">(2)</a> <a href="#ref-for-scroll-container①①">(3)</a> <a
                    href="#ref-for-scroll-container①②">(4)</a> <a href="#ref-for-scroll-container①③">(5)</a> <a
                    href="#ref-for-scroll-container①④">(6)</a> <a href="#ref-for-scroll-container①⑤">(7)</a> <a
                    href="#ref-for-scroll-container①⑥">(8)</a> <a href="#ref-for-scroll-container①⑦">(9)</a> <a
                    href="#ref-for-scroll-container①⑧">(10)</a> <a href="#ref-for-scroll-container①⑨">(11)</a>
            <li><a href="#ref-for-scroll-container②⓪">Appendix A. Scroll extensions</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-scrollport">
        <a
            href="https://www.w3.org/TR/css-overflow-3/#scrollport">https://www.w3.org/TR/css-overflow-3/#scrollport</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-scrollport">3.
                    Overview</a> <a href="#ref-for-scrollport①">(2)</a> <a href="#ref-for-scrollport②">(3)</a>
            <li><a href="#ref-for-scrollport③">5.2.
                    Low level APIs</a>
            <li><a href="#ref-for-scrollport④">6.2.2.
                    navnotarget</a>
            <li><a href="#ref-for-scrollport⑤">9.2.
                    Controlling the interaction with scrolling: the spatial-navigation-action property</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-relative-position">
        <a
            href="https://www.w3.org/TR/css3-positioning/#relative-position">https://www.w3.org/TR/css3-positioning/#relative-position</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-relative-position">8.4.
                    Focus Navigation Heuristics</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-valdef-scroll-snap-type-mandatory">
        <a
            href="https://www.w3.org/TR/css-scroll-snap-1/#valdef-scroll-snap-type-mandatory">https://www.w3.org/TR/css-scroll-snap-1/#valdef-scroll-snap-type-mandatory</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-valdef-scroll-snap-type-mandatory">Appendix A. Scroll extensions</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-optimal-viewing-region">
        <a
            href="https://www.w3.org/TR/css-scroll-snap-1/#optimal-viewing-region">https://www.w3.org/TR/css-scroll-snap-1/#optimal-viewing-region</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-optimal-viewing-region">8.1.
                    Glossary</a> <a href="#ref-for-optimal-viewing-region①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-mult-one-plus">
        <a
            href="https://www.w3.org/TR/css-values-4/#mult-one-plus">https://www.w3.org/TR/css-values-4/#mult-one-plus</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-mult-one-plus">8.4.
                    Focus Navigation Heuristics</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-comb-one">
        <a href="https://www.w3.org/TR/css-values-4/#comb-one">https://www.w3.org/TR/css-values-4/#comb-one</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-comb-one">9.1.
                    Creating additional spatial navigation containers: the spatial-navigation-contain property</a>
            <li><a href="#ref-for-comb-one①">9.2.
                    Controlling the interaction with scrolling: the spatial-navigation-action property</a> <a
                    href="#ref-for-comb-one②">(2)</a>
            <li><a href="#ref-for-comb-one③">9.3.
                    Selecting the navigation algorithm: the spatial-navigation-function property</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-x14">
        <a href="https://drafts.csswg.org/css2/box.html#x14">https://drafts.csswg.org/css2/box.html#x14</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-x14">8.1.
                    Glossary</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-painting-order">
        <a
            href="https://drafts.csswg.org/css2/zindex.html#painting-order">https://drafts.csswg.org/css2/zindex.html#painting-order</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-painting-order">8.4.
                    Focus Navigation Heuristics</a> <a href="#ref-for-painting-order①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-scroll-an-element">
        <a
            href="https://www.w3.org/TR/cssom-view/#scroll-an-element">https://www.w3.org/TR/cssom-view/#scroll-an-element</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-scroll-an-element">Appendix A. Scroll extensions</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-element">
        <a href="https://dom.spec.whatwg.org/#element">https://dom.spec.whatwg.org/#element</a><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-element">5.2.
                    Low level APIs</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-event">
        <a href="https://dom.spec.whatwg.org/#event">https://dom.spec.whatwg.org/#event</a><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-event">6.2.1.
                    navbeforefocus</a>
            <li><a href="#ref-for-event①">6.2.2.
                    navnotarget</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-eventtarget">
        <a href="https://dom.spec.whatwg.org/#eventtarget">https://dom.spec.whatwg.org/#eventtarget</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-eventtarget">6.1.
                    Interface NavigationEvent</a> <a href="#ref-for-eventtarget①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-node">
        <a href="https://dom.spec.whatwg.org/#node">https://dom.spec.whatwg.org/#node</a><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-node">5.2.
                    Low level APIs</a> <a href="#ref-for-node①">(2)</a> <a href="#ref-for-node②">(3)</a> <a
                    href="#ref-for-node③">(4)</a> <a href="#ref-for-node④">(5)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-canceled-flag">
        <a href="https://dom.spec.whatwg.org/#canceled-flag">https://dom.spec.whatwg.org/#canceled-flag</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-canceled-flag">4.
                    Triggering Spatial Navigation</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-document">
        <a href="https://dom.spec.whatwg.org/#concept-document">https://dom.spec.whatwg.org/#concept-document</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-document">5.2.
                    Low level APIs</a>
            <li><a href="#ref-for-concept-document①">8.1.
                    Glossary</a>
            <li><a href="#ref-for-concept-document②">8.3.
                    Navigation</a> <a href="#ref-for-concept-document③">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-document-element">
        <a href="https://dom.spec.whatwg.org/#document-element">https://dom.spec.whatwg.org/#document-element</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-document-element">8.3.
                    Navigation</a> <a href="#ref-for-document-element①">(2)</a> <a
                    href="#ref-for-document-element②">(3)</a> <a href="#ref-for-document-element③">(4)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-boundary-point-node">
        <a
            href="https://dom.spec.whatwg.org/#boundary-point-node">https://dom.spec.whatwg.org/#boundary-point-node</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-boundary-point-node">8.3.
                    Navigation</a> <a href="#ref-for-boundary-point-node①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-node-document">
        <a
            href="https://dom.spec.whatwg.org/#concept-node-document">https://dom.spec.whatwg.org/#concept-node-document</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-node-document">6.2.1.
                    navbeforefocus</a>
            <li><a href="#ref-for-concept-node-document①">6.2.2.
                    navnotarget</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-event-preventdefault">
        <a
            href="https://dom.spec.whatwg.org/#dom-event-preventdefault">https://dom.spec.whatwg.org/#dom-event-preventdefault</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-event-preventdefault">3.
                    Overview</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-event-target">
        <a href="https://dom.spec.whatwg.org/#dom-event-target">https://dom.spec.whatwg.org/#dom-event-target</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-event-target">6.2.1.
                    navbeforefocus</a>
            <li><a href="#ref-for-dom-event-target①">6.2.2.
                    navnotarget</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-default-allowlist">
        <a
            href="https://w3c.github.io/webappsec-feature-policy/#default-allowlist">https://w3c.github.io/webappsec-feature-policy/#default-allowlist</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-default-allowlist">7.
                    The navigation-override policy-controlled feature</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-policy-controlled-feature">
        <a
            href="https://w3c.github.io/webappsec-feature-policy/#policy-controlled-feature">https://w3c.github.io/webappsec-feature-policy/#policy-controlled-feature</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-policy-controlled-feature">7.
                    The navigation-override policy-controlled feature</a> <a
                    href="#ref-for-policy-controlled-feature①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-window">
        <a
            href="https://html.spec.whatwg.org/multipage/window-object.html#window">https://html.spec.whatwg.org/multipage/window-object.html#window</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-window">5.1.
                    Triggering Navigation Programmatically</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-active-document">
        <a
            href="https://html.spec.whatwg.org/multipage/browsers.html#active-document">https://html.spec.whatwg.org/multipage/browsers.html#active-document</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-active-document">6.2.1.
                    navbeforefocus</a>
            <li><a href="#ref-for-active-document①">6.2.2.
                    navnotarget</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-element-disabled">
        <a
            href="https://html.spec.whatwg.org/multipage/semantics-other.html#concept-element-disabled">https://html.spec.whatwg.org/multipage/semantics-other.html#concept-element-disabled</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-element-disabled">8.4.
                    Focus Navigation Heuristics</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-being-rendered">
        <a
            href="https://html.spec.whatwg.org/multipage/rendering.html#being-rendered">https://html.spec.whatwg.org/multipage/rendering.html#being-rendered</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-being-rendered">8.4.
                    Focus Navigation Heuristics</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-browsing-context">
        <a
            href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context">https://html.spec.whatwg.org/multipage/browsers.html#browsing-context</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-browsing-context">8.1.
                    Glossary</a>
            <li><a href="#ref-for-browsing-context①">8.2.
                    Groupings of elements</a>
            <li><a href="#ref-for-browsing-context②">9.1.
                    Creating additional spatial navigation containers: the spatial-navigation-contain property</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-browsing-context-container">
        <a
            href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context-container">https://html.spec.whatwg.org/multipage/browsers.html#browsing-context-container</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-browsing-context-container">8.3.
                    Navigation</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-currently-focused-area-of-a-top-level-browsing-context">
        <a
            href="https://html.spec.whatwg.org/multipage/interaction.html#currently-focused-area-of-a-top-level-browsing-context">https://html.spec.whatwg.org/multipage/interaction.html#currently-focused-area-of-a-top-level-browsing-context</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-currently-focused-area-of-a-top-level-browsing-context">8.4.
                    Focus Navigation Heuristics</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-anchor">
        <a
            href="https://html.spec.whatwg.org/multipage/interaction.html#dom-anchor">https://html.spec.whatwg.org/multipage/interaction.html#dom-anchor</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-anchor">8.4.
                    Focus Navigation Heuristics</a> <a href="#ref-for-dom-anchor①">(2)</a> <a
                    href="#ref-for-dom-anchor②">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-expressly-inert">
        <a
            href="https://html.spec.whatwg.org/multipage/interaction.html#expressly-inert">https://html.spec.whatwg.org/multipage/interaction.html#expressly-inert</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-expressly-inert">8.4.
                    Focus Navigation Heuristics</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-focus">
        <a
            href="https://html.spec.whatwg.org/multipage/interaction.html#dom-focus">https://html.spec.whatwg.org/multipage/interaction.html#dom-focus</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-focus">3.
                    Overview</a>
            <li><a href="#ref-for-dom-focus①">6.2.2.
                    navnotarget</a>
            <li><a href="#ref-for-dom-focus②">9.2.
                    Controlling the interaction with scrolling: the spatial-navigation-action property</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-focusable-area">
        <a
            href="https://html.spec.whatwg.org/multipage/interaction.html#focusable-area">https://html.spec.whatwg.org/multipage/interaction.html#focusable-area</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-focusable-area">8.1.
                    Glossary</a> <a href="#ref-for-focusable-area①">(2)</a>
            <li><a href="#ref-for-focusable-area②">8.4.
                    Focus Navigation Heuristics</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-focusing-steps">
        <a
            href="https://html.spec.whatwg.org/multipage/interaction.html#focusing-steps">https://html.spec.whatwg.org/multipage/interaction.html#focusing-steps</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-focusing-steps">8.3.
                    Navigation</a> <a href="#ref-for-focusing-steps①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-nested-browsing-context">
        <a
            href="https://html.spec.whatwg.org/multipage/browsers.html#nested-browsing-context">https://html.spec.whatwg.org/multipage/browsers.html#nested-browsing-context</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-nested-browsing-context">8.3.
                    Navigation</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-origin">
        <a
            href="https://html.spec.whatwg.org/multipage/origin.html#concept-origin">https://html.spec.whatwg.org/multipage/origin.html#concept-origin</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-origin">6.2.1.
                    navbeforefocus</a>
            <li><a href="#ref-for-concept-origin①">6.2.2.
                    navnotarget</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-nodes-are-removed">
        <a
            href="https://html.spec.whatwg.org/multipage/infrastructure.html#nodes-are-removed">https://html.spec.whatwg.org/multipage/infrastructure.html#nodes-are-removed</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-nodes-are-removed">8.4.
                    Focus Navigation Heuristics</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-sequential-focus-navigation-order">
        <a
            href="https://html.spec.whatwg.org/multipage/interaction.html#sequential-focus-navigation-order">https://html.spec.whatwg.org/multipage/interaction.html#sequential-focus-navigation-order</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-sequential-focus-navigation-order">8.4.
                    Focus Navigation Heuristics</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-sequential-focus-navigation-starting-point">
        <a
            href="https://html.spec.whatwg.org/multipage/interaction.html#sequential-focus-navigation-starting-point">https://html.spec.whatwg.org/multipage/interaction.html#sequential-focus-navigation-starting-point</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-sequential-focus-navigation-starting-point">8.1.
                    Glossary</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-attr-tabindex">
        <a
            href="https://html.spec.whatwg.org/multipage/interaction.html#attr-tabindex">https://html.spec.whatwg.org/multipage/interaction.html#attr-tabindex</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-attr-tabindex">8.4.
                    Focus Navigation Heuristics</a> <a href="#ref-for-attr-tabindex①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-the-body-element-2">
        <a
            href="https://html.spec.whatwg.org/multipage/dom.html#the-body-element-2">https://html.spec.whatwg.org/multipage/dom.html#the-body-element-2</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-the-body-element-2">6.2.1.
                    navbeforefocus</a>
            <li><a href="#ref-for-the-body-element-2①">6.2.2.
                    navnotarget</a>
            <li><a href="#ref-for-the-body-element-2②">8.3.
                    Navigation</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-top-level-browsing-context">
        <a
            href="https://html.spec.whatwg.org/multipage/browsers.html#top-level-browsing-context">https://html.spec.whatwg.org/multipage/browsers.html#top-level-browsing-context</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-top-level-browsing-context">6.2.1.
                    navbeforefocus</a>
            <li><a href="#ref-for-top-level-browsing-context①">6.2.2.
                    navnotarget</a>
            <li><a href="#ref-for-top-level-browsing-context②">8.2.
                    Groupings of elements</a>
            <li><a href="#ref-for-top-level-browsing-context③">8.3.
                    Navigation</a>
            <li><a href="#ref-for-top-level-browsing-context④">9.1.
                    Creating additional spatial navigation containers: the spatial-navigation-contain property</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-assert">
        <a href="https://infra.spec.whatwg.org/#assert">https://infra.spec.whatwg.org/#assert</a><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-assert">8.3.
                    Navigation</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-list-empty">
        <a href="https://infra.spec.whatwg.org/#list-empty">https://infra.spec.whatwg.org/#list-empty</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-list-empty">8.4.
                    Focus Navigation Heuristics</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-list-remove">
        <a href="https://infra.spec.whatwg.org/#list-remove">https://infra.spec.whatwg.org/#list-remove</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-list-remove">8.4.
                    Focus Navigation Heuristics</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-ordered-set">
        <a href="https://infra.spec.whatwg.org/#ordered-set">https://infra.spec.whatwg.org/#ordered-set</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-ordered-set">8.4.
                    Focus Navigation Heuristics</a> <a href="#ref-for-ordered-set①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-scroll-boundary">
        <a
            href="https://drafts.csswg.org/css-overscroll-behavior-1/#scroll-boundary">https://drafts.csswg.org/css-overscroll-behavior-1/#scroll-boundary</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-scroll-boundary">Appendix A. Scroll extensions</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-keyboardevent">
        <a href="https://www.w3.org/TR/uievents/#keyboardevent">https://www.w3.org/TR/uievents/#keyboardevent</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-keyboardevent">6.2.1.
                    navbeforefocus</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-uievent">
        <a href="https://www.w3.org/TR/uievents/#uievent">https://www.w3.org/TR/uievents/#uievent</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-uievent">4.
                    Triggering Spatial Navigation</a>
            <li><a href="#ref-for-uievent①">6.1.
                    Interface NavigationEvent</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dictdef-uieventinit">
        <a
            href="https://www.w3.org/TR/uievents/#dictdef-uieventinit">https://www.w3.org/TR/uievents/#dictdef-uieventinit</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dictdef-uieventinit">6.1.
                    Interface NavigationEvent</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-event-target">
        <a href="https://w3c.github.io/uievents/#event-target">https://w3c.github.io/uievents/#event-target</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-event-target">6.2.1.
                    navbeforefocus</a>
            <li><a href="#ref-for-event-target①">6.2.2.
                    navnotarget</a> <a href="#ref-for-event-target②">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-keyboardevent-key">
        <a
            href="https://www.w3.org/TR/uievents/#dom-keyboardevent-key">https://www.w3.org/TR/uievents/#dom-keyboardevent-key</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-keyboardevent-key">6.2.1.
                    navbeforefocus</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-keydown">
        <a href="https://w3c.github.io/uievents/#keydown">https://w3c.github.io/uievents/#keydown</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-keydown">4.
                    Triggering Spatial Navigation</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-idl-DOMString">
        <a href="https://heycam.github.io/webidl/#idl-DOMString">https://heycam.github.io/webidl/#idl-DOMString</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-idl-DOMString">6.1.
                    Interface NavigationEvent</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-Exposed">
        <a href="https://heycam.github.io/webidl/#Exposed">https://heycam.github.io/webidl/#Exposed</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-Exposed">6.1.
                    Interface NavigationEvent</a>
        </ul>
    </aside>
    <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">引用定义的术语</span><a
            class="self-link" href="#index-defined-elsewhere"></a></h3>
    <ul class="index">
        <li>
            <a data-link-type="biblio">[css-break-4]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-box-fragment" style="color:initial">框片段</span>
            </ul>
        <li>
            <a data-link-type="biblio">[css-cascade-4]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-propdef-all" style="color:initial">all</span>
            </ul>
        <li>
            <a data-link-type="biblio">[css-display-3]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-box" style="color:initial">框</span>
                <li><span class="dfn-paneled" id="term-for-principal-box" style="color:initial">主框</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-OVERFLOW-3]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-valdef-overflow-hidden" style="color:initial">隐藏</span>
                <li><span class="dfn-paneled" id="term-for-propdef-overflow-x" style="color:initial">overflow-x</span>
                <li><span class="dfn-paneled" id="term-for-propdef-overflow-y" style="color:initial">overflow-y</span>
                <li><span class="dfn-paneled" id="term-for-scroll-container" style="color:initial">滚动容器</span>
                <li><span class="dfn-paneled" id="term-for-scrollport" style="color:initial">滚动视口</span>
            </ul>
        <li>
            <a data-link-type="biblio">[css-position-3]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-relative-position" style="color:initial">相对位置</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-SCROLL-SNAP-1]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-valdef-scroll-snap-type-mandatory"
                        style="color:initial">强制</span>
                <li><span class="dfn-paneled" id="term-for-optimal-viewing-region" style="color:initial">最佳观看区域</span>
            </ul>
        <li>
            <a data-link-type="biblio">[css-values-4]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-mult-one-plus" style="color:initial">+</span>
                <li><span class="dfn-paneled" id="term-for-comb-one" style="color:initial">|</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS2]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-x14" style="color:initial">边框盒</span>
                <li><span class="dfn-paneled" id="term-for-painting-order" style="color:initial">绘制顺序</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSSOM-VIEW-1]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-scroll-an-element" style="color:initial">滚动元素</span>
            </ul>
        <li>
            <a data-link-type="biblio">[DOM]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-element" style="color:initial">元素</span>
                <li><span class="dfn-paneled" id="term-for-event" style="color:initial">事件</span>
                <li><span class="dfn-paneled" id="term-for-eventtarget" style="color:initial">事件目标</span>
                <li><span class="dfn-paneled" id="term-for-node" style="color:initial">节点</span>
                <li><span class="dfn-paneled" id="term-for-canceled-flag" style="color:initial">取消标志</span>
                <li><span class="dfn-paneled" id="term-for-concept-document" style="color:initial">文档</span>
                <li><span class="dfn-paneled" id="term-for-document-element" style="color:initial">文档元素</span>
                <li><span class="dfn-paneled" id="term-for-boundary-point-node" style="color:initial">边界点节点</span>
                <li><span class="dfn-paneled" id="term-for-concept-node-document" style="color:initial">节点文档</span>
                <li><span class="dfn-paneled" id="term-for-dom-event-preventdefault"
                        style="color:initial">preventDefault()</span>
                <li><span class="dfn-paneled" id="term-for-dom-event-target" style="color:initial">目标</span>
            </ul>
        <li>
            <a data-link-type="biblio">[feature-policy]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-default-allowlist" style="color:initial">默认允许列表</span>
                <li><span class="dfn-paneled" id="term-for-policy-controlled-feature"
                        style="color:initial">策略控制的特性</span>
            </ul>
        <li>
            <a data-link-type="biblio">[HTML]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-window" style="color:initial">窗口</span>
                <li><span class="dfn-paneled" id="term-for-active-document" style="color:initial">活动文档</span>
                <li><span class="dfn-paneled" id="term-for-concept-element-disabled" style="color:initial">实际禁用</span>
                <li><span class="dfn-paneled" id="term-for-being-rendered" style="color:initial">正在渲染</span>
                <li><span class="dfn-paneled" id="term-for-browsing-context" style="color:initial">浏览上下文</span>
                <li><span class="dfn-paneled" id="term-for-browsing-context-container"
                        style="color:initial">浏览上下文容器</span>
                <li><span class="dfn-paneled" id="term-for-currently-focused-area-of-a-top-level-browsing-context"
                        style="color:initial">顶级浏览上下文的当前聚焦区域</span>
                <li><span class="dfn-paneled" id="term-for-dom-anchor" style="color:initial">DOM 锚点</span>
                <li><span class="dfn-paneled" id="term-for-expressly-inert" style="color:initial">显式无效</span>
                <li><span class="dfn-paneled" id="term-for-dom-focus" style="color:initial">focus()</span>
                <li><span class="dfn-paneled" id="term-for-focusable-area" style="color:initial">可聚焦区域</span>
                <li><span class="dfn-paneled" id="term-for-focusing-steps" style="color:initial">聚焦步骤</span>
                <li><span class="dfn-paneled" id="term-for-nested-browsing-context" style="color:initial">嵌套浏览上下文</span>
                <li><span class="dfn-paneled" id="term-for-concept-origin" style="color:initial">来源</span>
                <li><span class="dfn-paneled" id="term-for-nodes-are-removed" style="color:initial">已删除节点</span>
                <li><span class="dfn-paneled" id="term-for-sequential-focus-navigation-order"
                        style="color:initial">顺序聚焦导航顺序</span>
                <li><span class="dfn-paneled" id="term-for-sequential-focus-navigation-starting-point"
                        style="color:initial">顺序聚焦导航起点</span>
                <li><span class="dfn-paneled" id="term-for-attr-tabindex" style="color:initial">tabindex</span>
                <li><span class="dfn-paneled" id="term-for-the-body-element-2" style="color:initial">body 元素</span>
                <li><span class="dfn-paneled" id="term-for-top-level-browsing-context"
                        style="color:initial">顶级浏览上下文</span>
            </ul>
        <li>
            <a data-link-type="biblio">[infra]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-assert" style="color:initial">断言</span>
                <li><span class="dfn-paneled" id="term-for-list-empty" style="color:initial">空列表</span>
                <li><span class="dfn-paneled" id="term-for-list-remove" style="color:initial">移除</span>
                <li><span class="dfn-paneled" id="term-for-ordered-set" style="color:initial">有序集合</span>
            </ul>
        <li>
            <a data-link-type="biblio">[overscroll-behavior]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-scroll-boundary" style="color:initial">滚动边界</span>
            </ul>
        <li>
            <a data-link-type="biblio">[uievents]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-keyboardevent" style="color:initial">KeyboardEvent</span>
                <li><span class="dfn-paneled" id="term-for-uievent" style="color:initial">UIEvent</span>
                <li><span class="dfn-paneled" id="term-for-dictdef-uieventinit" style="color:initial">UIEventInit</span>
                <li><span class="dfn-paneled" id="term-for-event-target" style="color:initial">事件目标</span>
                <li><span class="dfn-paneled" id="term-for-dom-keyboardevent-key" style="color:initial">key</span>
                <li><span class="dfn-paneled" id="term-for-keydown" style="color:initial">keydown</span>
            </ul>
        <li>
            <a data-link-type="biblio">[WebIDL]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-idl-DOMString" style="color:initial">DOMString</span>
                <li><span class="dfn-paneled" id="term-for-Exposed" style="color:initial">Exposed</span>
            </ul>
    </ul>
    <h2 class="no-num no-ref heading settled" id="references"><span class="content">参考文献</span><a class="self-link"
            href="#references"></a></h2>
    <h3 class="no-num no-ref heading settled" id="normative"><span class="content">规范性参考文献</span><a class="self-link"
            href="#normative"></a></h3>
    <dl>
        <dt id="biblio-css-break-4">[CSS-BREAK-4]
        <dd>Rossen Atanassov; Elika Etemad. <a href="https://www.w3.org/TR/css-break-4/">CSS Fragmentation Module Level
                4</a>. 2018年12月18日. WD. URL: <a
                href="https://www.w3.org/TR/css-break-4/">https://www.w3.org/TR/css-break-4/</a>
        <dt id="biblio-css-cascade-4">[CSS-CASCADE-4]
        <dd>Elika Etemad; Tab Atkins Jr.. <a href="https://www.w3.org/TR/css-cascade-4/">CSS Cascading and Inheritance
                Level 4</a>. 2018年8月28日. CR. URL: <a
                href="https://www.w3.org/TR/css-cascade-4/">https://www.w3.org/TR/css-cascade-4/</a>
        <dt id="biblio-css-display-3">[CSS-DISPLAY-3]
        <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://www.w3.org/TR/css-display-3/">CSS Display Module Level 3</a>.
            2019年7月11日. CR. URL: <a href="https://www.w3.org/TR/css-display-3/">https://www.w3.org/TR/css-display-3/</a>
        <dt id="biblio-css-overflow-3">[CSS-OVERFLOW-3]
        <dd>David Baron; Elika Etemad; Florian Rivoal. <a href="https://www.w3.org/TR/css-overflow-3/">CSS Overflow
                Module Level 3</a>. 2018年7月31日. WD. URL: <a
                href="https://www.w3.org/TR/css-overflow-3/">https://www.w3.org/TR/css-overflow-3/</a>
        <dt id="biblio-css-position-3">[CSS-POSITION-3]
        <dd>Rossen Atanassov; Arron Eicholz. <a href="https://www.w3.org/TR/css-position-3/">CSS Positioned Layout
                Module Level 3</a>. 2016年5月17日. WD. URL: <a
                href="https://www.w3.org/TR/css-position-3/">https://www.w3.org/TR/css-position-3/</a>
        <dt id="biblio-css-scroll-snap-1">[CSS-SCROLL-SNAP-1]
        <dd>Matt Rakow; 等. <a href="https://www.w3.org/TR/css-scroll-snap-1/">CSS Scroll Snap Module Level 1</a>.
            2019年3月19日. CR. URL: <a
                href="https://www.w3.org/TR/css-scroll-snap-1/">https://www.w3.org/TR/css-scroll-snap-1/</a>
        <dt id="biblio-css-values-4">[CSS-VALUES-4]
        <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://www.w3.org/TR/css-values-4/">CSS Values and Units Module
                Level 4</a>. 2019年1月31日. WD. URL: <a
                href="https://www.w3.org/TR/css-values-4/">https://www.w3.org/TR/css-values-4/</a>
        <dt id="biblio-css2">[CSS2]
        <dd>Bert Bos; 等. <a href="https://www.w3.org/TR/CSS2/">Cascading Style Sheets Level 2 Revision 1 (CSS 2.1)
                Specification</a>. 2011年6月7日. REC. URL: <a
                href="https://www.w3.org/TR/CSS2/">https://www.w3.org/TR/CSS2/</a>
        <dt id="biblio-cssom-view-1">[CSSOM-VIEW-1]
        <dd>Simon Pieters. <a href="https://www.w3.org/TR/cssom-view-1/">CSSOM View Module</a>. 2016年3月17日. WD. URL: <a
                href="https://www.w3.org/TR/cssom-view-1/">https://www.w3.org/TR/cssom-view-1/</a>
        <dt id="biblio-dom">[DOM]
        <dd>Anne van Kesteren. <a href="https://dom.spec.whatwg.org/">DOM标准</a>. 现行标准. URL: <a
                href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
        <dt id="biblio-feature-policy">[FEATURE-POLICY]
        <dd>Ian Clelland. <a href="https://www.w3.org/TR/feature-policy-1/">功能策略</a>. 2019年4月16日. WD. URL: <a
                href="https://www.w3.org/TR/feature-policy-1/">https://www.w3.org/TR/feature-policy-1/</a>
        <dt id="biblio-html">[HTML]
        <dd>Anne van Kesteren; 等. <a href="https://html.spec.whatwg.org/multipage/">HTML标准</a>. 现行标准. URL: <a
                href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
        <dt id="biblio-infra">[INFRA]
        <dd>Anne van Kesteren; Domenic Denicola. <a href="https://infra.spec.whatwg.org/">基础设施标准</a>. 现行标准. URL: <a
                href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
        <dt id="biblio-rfc2119">[RFC2119]
        <dd>S. Bradner. <a href="https://tools.ietf.org/html/rfc2119">在RFC中使用的关键字来指示需求级别</a>. 1997年3月. 最佳现行实践. URL: <a
                href="https://tools.ietf.org/html/rfc2119">https://tools.ietf.org/html/rfc2119</a>
        <dt id="biblio-uievents">[UIEVENTS]
        <dd>Gary Kacmarcik; Travis Leithead; Doug Schepers. <a href="https://www.w3.org/TR/uievents/">UI事件</a>.
            2019年5月30日. WD. URL: <a href="https://www.w3.org/TR/uievents/">https://www.w3.org/TR/uievents/</a>
        <dt id="biblio-webidl">[WebIDL]
        <dd>Boris Zbarsky. <a href="https://heycam.github.io/webidl/">Web IDL</a>. 2016年12月15日. ED. URL: <a
                href="https://heycam.github.io/webidl/">https://heycam.github.io/webidl/</a>
    </dl>
    <h3 class="no-num no-ref heading settled" id="informative"><span class="content">说明性参考文献</span><a class="self-link"
            href="#informative"></a></h3>
    <dl>
        <dt id="biblio-css-transforms-1">[CSS-TRANSFORMS-1]
        <dd>Simon Fraser; 等. <a href="https://www.w3.org/TR/css-transforms-1/">CSS Transforms Module Level 1</a>.
            2019年2月14日. CR. URL: <a
                href="https://www.w3.org/TR/css-transforms-1/">https://www.w3.org/TR/css-transforms-1/</a>
        <dt id="biblio-extensible">[EXTENSIBLE]
        <dd><a href="https://extensiblewebmanifesto.org/">The Extensible Web Manifesto</a>. 2013年6月10日. URL: <a
                href="https://extensiblewebmanifesto.org/">https://extensiblewebmanifesto.org/</a>
    </dl>
    <h2 class="no-num no-ref heading settled" id="property-index"><span class="content">属性索引</span><a class="self-link"
            href="#property-index"></a></h2>
    <div class="big-element-wrapper">
        <table class="index">
            <thead>
                <tr>
                    <th scope="col">名称
                    <th scope="col">值
                    <th scope="col">初始值
                    <th scope="col">适用于
                    <th scope="col">继承
                    <th scope="col">百分比
                    <th scope="col">动画类型
                    <th scope="col">规范顺序
                    <th scope="col">计算值
            <tbody>
                <tr>
                    <th scope="row"><a class="css" data-link-type="property" href="#propdef-spatial-navigation-action"
                            id="ref-for-propdef-spatial-navigation-action①①">spatial-navigation-action</a>
                    <td>auto | focus | scroll
                    <td>auto
                    <td>滚动容器
                    <td>否
                    <td>不适用
                    <td>离散
                    <td>按语法
                    <td>按指定
                <tr>
                    <th scope="row"><a class="css" data-link-type="property" href="#propdef-spatial-navigation-contain"
                            id="ref-for-propdef-spatial-navigation-contain⑤">spatial-navigation-contain</a>
                    <td>auto | contain
                    <td>auto
                    <td>所有元素
                    <td>否
                    <td>不适用
                    <td>离散
                    <td>按语法
                    <td>按指定
                <tr>
                    <th scope="row"><a class="css" data-link-type="property" href="#propdef-spatial-navigation-function"
                            id="ref-for-propdef-spatial-navigation-function③">spatial-navigation-function</a>
                    <td>normal | grid
                    <td>normal
                    <td>空间导航容器
                    <td>否
                    <td>不适用
                    <td>离散
                    <td>按语法
                    <td>按指定
        </table>
    </div>
    <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL 索引</span><a class="self-link"
            href="#idl-index"></a></h2>
    <pre class="idl highlight def"><c- b>enum</c-> <a href="#enumdef-spatialnavigationdirection"><code><c- g>SpatialNavigationDirection</c-></code></a> {
    <a href="#dom-spatialnavigationdirection-up"><code><c- s>"up"</c-></code></a>,
    <a href="#dom-spatialnavigationdirection-down"><code><c- s>"down"</c-></code></a>,
    <a href="#dom-spatialnavigationdirection-left"><code><c- s>"left"</c-></code></a>,
    <a href="#dom-spatialnavigationdirection-right"><code><c- s>"right"</c-></code></a>,
};

<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/window-object.html#window" id="ref-for-window①"><c- g>Window</c-></a> {
    <c- b>void</c-> <a class="idl-code" data-link-type="method" href="#dom-window-navigate" id="ref-for-dom-window-navigate①①"><c- g>navigate</c-></a>(<a class="n" data-link-type="idl-name" href="#enumdef-spatialnavigationdirection" id="ref-for-enumdef-spatialnavigationdirection④"><c- n>SpatialNavigationDirection</c-></a> <a href="#dom-window-navigate-dir-dir"><code><c- g>dir</c-></code></a>);
};

<c- b>enum</c-> <a href="#enumdef-focusableareasearchmode"><code><c- g>FocusableAreaSearchMode</c-></code></a> {
    <a href="#dom-focusableareasearchmode-visible"><code><c- s>"visible"</c-></code></a>,
    <a href="#dom-focusableareasearchmode-all"><code><c- s>"all"</c-></code></a>
};

<c- b>dictionary</c-> <a href="#dictdef-focusableareasoption"><code><c- g>FocusableAreasOption</c-></code></a> {
    <a class="n" data-link-type="idl-name" href="#enumdef-focusableareasearchmode" id="ref-for-enumdef-focusableareasearchmode①"><c- n>FocusableAreaSearchMode</c-></a> <a data-type="FocusableAreaSearchMode " href="#dom-focusableareasoption-mode"><code><c- g>mode</c-></code></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-spatialnavigationsearchoptions"><code><c- g>SpatialNavigationSearchOptions</c-></code></a> {
    <c- b>sequence</c->&lt;<a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#node" id="ref-for-node⑤"><c- n>Node</c-></a>>? <a data-type="sequence<Node>? " href="#dom-spatialnavigationsearchoptions-candidates"><code><c- g>candidates</c-></code></a>;
    <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#node" id="ref-for-node①①"><c- n>Node</c-></a>? <a data-type="Node? " href="#dom-spatialnavigationsearchoptions-container"><code><c- g>container</c-></code></a>;
};

<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://dom.spec.whatwg.org/#element" id="ref-for-element①"><c- g>Element</c-></a> {
    <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#node" id="ref-for-node②①"><c- n>Node</c-></a> <a class="idl-code" data-link-type="method" href="#dom-element-getspatialnavigationcontainer" id="ref-for-dom-element-getspatialnavigationcontainer①①"><c- g>getSpatialNavigationContainer</c-></a>();
    <c- b>sequence</c->&lt;<a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#node" id="ref-for-node③①"><c- n>Node</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-element-focusableareas" id="ref-for-dom-element-focusableareas①①"><c- g>focusableAreas</c-></a>(<c- b>optional</c-> <a class="n" data-link-type="idl-name" href="#dictdef-focusableareasoption" id="ref-for-dictdef-focusableareasoption①"><c- n>FocusableAreasOption</c-></a> <a href="#dom-element-focusableareas-option-option"><code><c- g>option</c-></code></a>);
    <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#node" id="ref-for-node④①"><c- n>Node</c-></a>? <a href="#dom-element-spatialnavigationsearch"><code><c- g>spatialNavigationSearch</c-></code></a>(<a class="n" data-link-type="idl-name" href="#enumdef-spatialnavigationdirection" id="ref-for-enumdef-spatialnavigationdirection①①"><c- n>SpatialNavigationDirection</c-></a> <a href="#dom-element-spatialnavigationsearch-dir-options-dir"><code><c- g>dir</c-></code></a>, <c- b>optional</c-> <a class="n" data-link-type="idl-name" href="#dictdef-spatialnavigationsearchoptions" id="ref-for-dictdef-spatialnavigationsearchoptions②"><c- n>SpatialNavigationSearchOptions</c-></a> <a href="#dom-element-spatialnavigationsearch-dir-options-options"><code><c- g>options</c-></code></a>);
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed①"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <a href="#navigationevent"><code><c- g>NavigationEvent</c-></code></a> : <a class="n" data-link-type="idl-name" href="https://www.w3.org/TR/uievents/#uievent" id="ref-for-uievent①①"><c- n>UIEvent</c-></a> {
    <a href="#dom-navigationevent-navigationevent"><code><c- g>constructor</c-></code></a>(<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString" id="ref-for-idl-DOMString①"><c- b>DOMString</c-></a> <a href="#dom-navigationevent-constructor-type-eventinitdict-type"><code><c- g>type</c-></code></a>,
                <c- b>optional</c-> <a class="n" data-link-type="idl-name" href="#dictdef-navigationeventinit" id="ref-for-dictdef-navigationeventinit①①"><c- n>NavigationEventInit</c-></a> <a href="#dom-navigationevent-constructor-type-eventinitdict-eventinitdict"><code><c- g>eventInitDict</c-></code></a>);
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="n" data-link-type="idl-name" href="#enumdef-spatialnavigationdirection" id="ref-for-enumdef-spatialnavigationdirection②①"><c- n>SpatialNavigationDirection</c-></a> <a data-readonly data-type="SpatialNavigationDirection" href="#dom-navigationevent-dir"><code><c- g>dir</c-></code></a>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#eventtarget" id="ref-for-eventtarget②"><c- n>EventTarget</c-></a>? <a data-readonly data-type="EventTarget?" href="#dom-navigationevent-relatedtarget"><code><c- g>relatedTarget</c-></code></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-navigationeventinit"><code><c- g>NavigationEventInit</c-></code></a> : <a class="n" data-link-type="idl-name" href="https://www.w3.org/TR/uievents/#dictdef-uieventinit" id="ref-for-dictdef-uieventinit①"><c- n>UIEventInit</c-></a> {
    <a class="n" data-link-type="idl-name" href="#enumdef-spatialnavigationdirection" id="ref-for-enumdef-spatialnavigationdirection③①"><c- n>SpatialNavigationDirection</c-></a> <a data-type="SpatialNavigationDirection " href="#dom-navigationeventinit-dir"><code><c- g>dir</c-></code></a>;
    <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#eventtarget" id="ref-for-eventtarget①①"><c- n>EventTarget</c-></a>? <a data-default="null" data-type="EventTarget? " href="#dom-navigationeventinit-relatedtarget"><code><c- g>relatedTarget</c-></code></a> = <c- b>null</c->;
};

</pre>
    <h2 class="no-num no-ref heading settled" id="issues-index"><span class="content">问题索引</span><a class="self-link"
            href="#issues-index"></a></h2>
    <div style="counter-reset:issue">
        <div class="issue"> 该 API 的名称正在讨论中 <a
                href="https://github.com/w3c/csswg-drafts/issues/3387">&lt;https://github.com/w3c/csswg-drafts/issues/3387></a><a
                href="#issue-a5a227c8"> ↵ </a></div>
        <div class="issue"> CSS 应该有一个术语来表示“考虑边角形状属性（如 border-radius）的边框盒”。 <a
                href="https://github.com/w3c/csswg-drafts/issues/2324">&lt;https://github.com/w3c/csswg-drafts/issues/2324></a><a
                href="#issue-c7f6d991"> ↵ </a></div>
        <div class="issue"> 此类术语应在 <a data-link-type="biblio" href="#biblio-cssom-view-1">[CSSOM-VIEW-1]</a>、<a
                data-link-type="biblio" href="#biblio-css-overflow-3">[CSS-OVERFLOW-3]</a>、<a data-link-type="biblio"
                href="#biblio-css-scroll-snap-1">[CSS-SCROLL-SNAP-1]</a> 中定义。 <a
                href="https://github.com/w3c/csswg-drafts/issues/2322">&lt;https://github.com/w3c/csswg-drafts/issues/2322></a><a
                href="#issue-942e7041"> ↵ </a></div>
        <div class="issue"> <a data-link-type="biblio" href="#biblio-cssom-view-1">[CSSOM-VIEW-1]</a>
            可能应定义如何在没有明确位置的情况下按给定方向执行滚动操作。在此之前，我们自行定义。 <a
                href="https://github.com/w3c/csswg-drafts/issues/2323">&lt;https://github.com/w3c/csswg-drafts/issues/2323></a><a
                href="#issue-00706fa4"> ↵ </a></div>
    </div>
    <aside class="dfn-panel" data-for="spatial-navigation">
        <b><a href="#spatial-navigation">#spatial-navigation</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-spatial-navigation">1.
                    Introduction</a> <a href="#ref-for-spatial-navigation①">(2)</a> <a
                    href="#ref-for-spatial-navigation②">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="at-risk">
        <b><a href="#at-risk">#at-risk</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-at-risk">5.2.
                    Low level APIs</a>
            <li><a href="#ref-for-at-risk①">9.1.
                    Creating additional spatial navigation containers: the spatial-navigation-contain property</a>
            <li><a href="#ref-for-at-risk②">9.2.
                    Controlling the interaction with scrolling: the spatial-navigation-action property</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="enumdef-spatialnavigationdirection">
        <b><a href="#enumdef-spatialnavigationdirection">#enumdef-spatialnavigationdirection</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-enumdef-spatialnavigationdirection">5.1.
                    Triggering Navigation Programmatically</a>
            <li><a href="#ref-for-enumdef-spatialnavigationdirection①">5.2.
                    Low level APIs</a>
            <li><a href="#ref-for-enumdef-spatialnavigationdirection②">6.1.
                    Interface NavigationEvent</a> <a href="#ref-for-enumdef-spatialnavigationdirection③">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-spatialnavigationdirection-up">
        <b><a href="#dom-spatialnavigationdirection-up">#dom-spatialnavigationdirection-up</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-spatialnavigationdirection-up">8.4.
                    Focus Navigation Heuristics</a> <a href="#ref-for-dom-spatialnavigationdirection-up①">(2)</a> <a
                    href="#ref-for-dom-spatialnavigationdirection-up②">(3)</a> <a
                    href="#ref-for-dom-spatialnavigationdirection-up③">(4)</a> <a
                    href="#ref-for-dom-spatialnavigationdirection-up④">(5)</a> <a
                    href="#ref-for-dom-spatialnavigationdirection-up⑤">(6)</a> <a
                    href="#ref-for-dom-spatialnavigationdirection-up⑥">(7)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-spatialnavigationdirection-down">
        <b><a href="#dom-spatialnavigationdirection-down">#dom-spatialnavigationdirection-down</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-spatialnavigationdirection-down">8.4.
                    Focus Navigation Heuristics</a> <a href="#ref-for-dom-spatialnavigationdirection-down①">(2)</a> <a
                    href="#ref-for-dom-spatialnavigationdirection-down②">(3)</a> <a
                    href="#ref-for-dom-spatialnavigationdirection-down③">(4)</a> <a
                    href="#ref-for-dom-spatialnavigationdirection-down④">(5)</a> <a
                    href="#ref-for-dom-spatialnavigationdirection-down⑤">(6)</a> <a
                    href="#ref-for-dom-spatialnavigationdirection-down⑥">(7)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-spatialnavigationdirection-left">
        <b><a href="#dom-spatialnavigationdirection-left">#dom-spatialnavigationdirection-left</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-spatialnavigationdirection-left">8.4.
                    Focus Navigation Heuristics</a> <a href="#ref-for-dom-spatialnavigationdirection-left①">(2)</a> <a
                    href="#ref-for-dom-spatialnavigationdirection-left②">(3)</a> <a
                    href="#ref-for-dom-spatialnavigationdirection-left③">(4)</a> <a
                    href="#ref-for-dom-spatialnavigationdirection-left④">(5)</a> <a
                    href="#ref-for-dom-spatialnavigationdirection-left⑤">(6)</a> <a
                    href="#ref-for-dom-spatialnavigationdirection-left⑥">(7)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-spatialnavigationdirection-right">
        <b><a href="#dom-spatialnavigationdirection-right">#dom-spatialnavigationdirection-right</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-spatialnavigationdirection-right">8.4.
                    Focus Navigation Heuristics</a> <a href="#ref-for-dom-spatialnavigationdirection-right①">(2)</a> <a
                    href="#ref-for-dom-spatialnavigationdirection-right②">(3)</a> <a
                    href="#ref-for-dom-spatialnavigationdirection-right③">(4)</a> <a
                    href="#ref-for-dom-spatialnavigationdirection-right④">(5)</a> <a
                    href="#ref-for-dom-spatialnavigationdirection-right⑤">(6)</a> <a
                    href="#ref-for-dom-spatialnavigationdirection-right⑥">(7)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-window-navigate">
        <b><a href="#dom-window-navigate">#dom-window-navigate</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-window-navigate">5.1.
                    Triggering Navigation Programmatically</a> <a href="#ref-for-dom-window-navigate①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="enumdef-focusableareasearchmode">
        <b><a href="#enumdef-focusableareasearchmode">#enumdef-focusableareasearchmode</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-enumdef-focusableareasearchmode">5.2.
                    Low level APIs</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dictdef-focusableareasoption">
        <b><a href="#dictdef-focusableareasoption">#dictdef-focusableareasoption</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dictdef-focusableareasoption">5.2.
                    Low level APIs</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-focusableareasoption-mode">
        <b><a href="#dom-focusableareasoption-mode">#dom-focusableareasoption-mode</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-focusableareasoption-mode">5.2.
                    Low level APIs</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dictdef-spatialnavigationsearchoptions">
        <b><a
                href="#dictdef-spatialnavigationsearchoptions">#dictdef-spatialnavigationsearchoptions</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dictdef-spatialnavigationsearchoptions">5.2.
                    Low level APIs</a>
            <li><a href="#ref-for-dictdef-spatialnavigationsearchoptions①">Changes</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-spatialnavigationsearchoptions-candidates">
        <b><a
                href="#dom-spatialnavigationsearchoptions-candidates">#dom-spatialnavigationsearchoptions-candidates</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-spatialnavigationsearchoptions-candidates">5.2.
                    Low level APIs</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-spatialnavigationsearchoptions-container">
        <b><a
                href="#dom-spatialnavigationsearchoptions-container">#dom-spatialnavigationsearchoptions-container</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-spatialnavigationsearchoptions-container">5.2.
                    Low level APIs</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-element-spatialnavigationsearch">
        <b><a href="#dom-element-spatialnavigationsearch">#dom-element-spatialnavigationsearch</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-element-spatialnavigationsearch">Changes</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-element-getspatialnavigationcontainer">
        <b><a
                href="#dom-element-getspatialnavigationcontainer">#dom-element-getspatialnavigationcontainer</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-element-getspatialnavigationcontainer①">5.2.
                    Low level APIs</a> <a href="#ref-for-dom-element-getspatialnavigationcontainer②">(2)</a> <a
                    href="#ref-for-dom-element-getspatialnavigationcontainer③">(3)</a>
            <li><a href="#ref-for-dom-element-getspatialnavigationcontainer④">Changes</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-element-focusableareas">
        <b><a href="#dom-element-focusableareas">#dom-element-focusableareas</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-element-focusableareas①">5.2.
                    Low level APIs</a> <a href="#ref-for-dom-element-focusableareas②">(2)</a> <a
                    href="#ref-for-dom-element-focusableareas③">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="navigationevent">
        <b><a href="#navigationevent">#navigationevent</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-navigationevent">4.
                    Triggering Spatial Navigation</a>
            <li><a href="#ref-for-navigationevent①">6.1.
                    Interface NavigationEvent</a> <a href="#ref-for-navigationevent②">(2)</a> <a
                    href="#ref-for-navigationevent③">(3)</a>
            <li><a href="#ref-for-navigationevent④">6.2.1.
                    navbeforefocus</a> <a href="#ref-for-navigationevent⑤">(2)</a> <a
                    href="#ref-for-navigationevent⑥">(3)</a>
            <li><a href="#ref-for-navigationevent⑦">6.2.2.
                    navnotarget</a> <a href="#ref-for-navigationevent⑧">(2)</a> <a
                    href="#ref-for-navigationevent⑨">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-navigationevent-dir">
        <b><a href="#dom-navigationevent-dir">#dom-navigationevent-dir</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-navigationevent-dir">6.2.1.
                    navbeforefocus</a>
            <li><a href="#ref-for-dom-navigationevent-dir①">6.2.2.
                    navnotarget</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-navigationevent-relatedtarget">
        <b><a href="#dom-navigationevent-relatedtarget">#dom-navigationevent-relatedtarget</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-navigationevent-relatedtarget">6.2.1.
                    navbeforefocus</a> <a href="#ref-for-dom-navigationevent-relatedtarget①">(2)</a>
            <li><a href="#ref-for-dom-navigationevent-relatedtarget②">6.2.2.
                    navnotarget</a> <a href="#ref-for-dom-navigationevent-relatedtarget③">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dictdef-navigationeventinit">
        <b><a href="#dictdef-navigationeventinit">#dictdef-navigationeventinit</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dictdef-navigationeventinit">6.1.
                    Interface NavigationEvent</a> <a href="#ref-for-dictdef-navigationeventinit①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="eventdef-navigationevent-navbeforefocus">
        <b><a
                href="#eventdef-navigationevent-navbeforefocus">#eventdef-navigationevent-navbeforefocus</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-eventdef-navigationevent-navbeforefocus">6.2.1.
                    navbeforefocus</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dispatches-navbeforefocus-event">
        <b><a href="#dispatches-navbeforefocus-event">#dispatches-navbeforefocus-event</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dispatches-navbeforefocus-event">8.3.
                    Navigation</a> <a href="#ref-for-dispatches-navbeforefocus-event①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="eventdef-navigationevent-navnotarget">
        <b><a href="#eventdef-navigationevent-navnotarget">#eventdef-navigationevent-navnotarget</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-eventdef-navigationevent-navnotarget">6.2.2.
                    navnotarget</a>
            <li><a href="#ref-for-eventdef-navigationevent-navnotarget①">9.2.
                    Controlling the interaction with scrolling: the spatial-navigation-action property</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dispatches-navnotarget-event">
        <b><a href="#dispatches-navnotarget-event">#dispatches-navnotarget-event</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dispatches-navnotarget-event">8.3.
                    Navigation</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="navigation-override">
        <b><a href="#navigation-override">#navigation-override</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-navigation-override">6.2.1.
                    navbeforefocus</a>
            <li><a href="#ref-for-navigation-override①">6.2.2.
                    navnotarget</a>
            <li><a href="#ref-for-navigation-override②">7.
                    The navigation-override policy-controlled feature</a> <a
                    href="#ref-for-navigation-override③">(2)</a> <a href="#ref-for-navigation-override④">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="boundary-box">
        <b><a href="#boundary-box">#boundary-box</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-boundary-box">8.1.
                    Glossary</a>
            <li><a href="#ref-for-boundary-box①">8.4.
                    Focus Navigation Heuristics</a> <a href="#ref-for-boundary-box②">(2)</a> <a
                    href="#ref-for-boundary-box③">(3)</a> <a href="#ref-for-boundary-box④">(4)</a> <a
                    href="#ref-for-boundary-box⑤">(5)</a> <a href="#ref-for-boundary-box⑥">(6)</a> <a
                    href="#ref-for-boundary-box⑦">(7)</a> <a href="#ref-for-boundary-box⑧">(8)</a> <a
                    href="#ref-for-boundary-box⑨">(9)</a> <a href="#ref-for-boundary-box①⓪">(10)</a> <a
                    href="#ref-for-boundary-box①①">(11)</a> <a href="#ref-for-boundary-box①②">(12)</a> <a
                    href="#ref-for-boundary-box①③">(13)</a> <a href="#ref-for-boundary-box①④">(14)</a> <a
                    href="#ref-for-boundary-box①⑤">(15)</a> <a href="#ref-for-boundary-box①⑥">(16)</a> <a
                    href="#ref-for-boundary-box①⑦">(17)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="inside-area">
        <b><a href="#inside-area">#inside-area</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-inside-area">8.1.
                    Glossary</a>
            <li><a href="#ref-for-inside-area①">8.4.
                    Focus Navigation Heuristics</a> <a href="#ref-for-inside-area②">(2)</a> <a
                    href="#ref-for-inside-area③">(3)</a> <a href="#ref-for-inside-area④">(4)</a> <a
                    href="#ref-for-inside-area⑤">(5)</a> <a href="#ref-for-inside-area⑥">(6)</a> <a
                    href="#ref-for-inside-area⑦">(7)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="search-origin">
        <b><a href="#search-origin">#search-origin</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-search-origin">8.4.
                    Focus Navigation Heuristics</a> <a href="#ref-for-search-origin①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="spatial-navigation-starting-point">
        <b><a href="#spatial-navigation-starting-point">#spatial-navigation-starting-point</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-spatial-navigation-starting-point">8.1.
                    Glossary</a>
            <li><a href="#ref-for-spatial-navigation-starting-point①">8.4.
                    Focus Navigation Heuristics</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="spatial-navigation-containers">
        <b><a href="#spatial-navigation-containers">#spatial-navigation-containers</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-spatial-navigation-containers">3.
                    Overview</a> <a href="#ref-for-spatial-navigation-containers①">(2)</a> <a
                    href="#ref-for-spatial-navigation-containers②">(3)</a> <a
                    href="#ref-for-spatial-navigation-containers③">(4)</a> <a
                    href="#ref-for-spatial-navigation-containers④">(5)</a> <a
                    href="#ref-for-spatial-navigation-containers⑤">(6)</a> <a
                    href="#ref-for-spatial-navigation-containers⑥">(7)</a> <a
                    href="#ref-for-spatial-navigation-containers⑦">(8)</a>
            <li><a href="#ref-for-spatial-navigation-containers⑧">5.2.
                    Low level APIs</a> <a href="#ref-for-spatial-navigation-containers⑨">(2)</a> <a
                    href="#ref-for-spatial-navigation-containers①⓪">(3)</a> <a
                    href="#ref-for-spatial-navigation-containers①①">(4)</a> <a
                    href="#ref-for-spatial-navigation-containers①②">(5)</a> <a
                    href="#ref-for-spatial-navigation-containers①③">(6)</a> <a
                    href="#ref-for-spatial-navigation-containers①④">(7)</a> <a
                    href="#ref-for-spatial-navigation-containers①⑤">(8)</a> <a
                    href="#ref-for-spatial-navigation-containers①⑥">(9)</a>
            <li><a href="#ref-for-spatial-navigation-containers①⑦">6.2.2.
                    navnotarget</a> <a href="#ref-for-spatial-navigation-containers①⑧">(2)</a> <a
                    href="#ref-for-spatial-navigation-containers①⑨">(3)</a> <a
                    href="#ref-for-spatial-navigation-containers②⓪">(4)</a> <a
                    href="#ref-for-spatial-navigation-containers②①">(5)</a> <a
                    href="#ref-for-spatial-navigation-containers②②">(6)</a> <a
                    href="#ref-for-spatial-navigation-containers②③">(7)</a>
            <li><a href="#ref-for-spatial-navigation-containers②④">8.2.
                    Groupings of elements</a> <a href="#ref-for-spatial-navigation-containers②⑤">(2)</a>
            <li><a href="#ref-for-spatial-navigation-containers②⑥">8.3.
                    Navigation</a> <a href="#ref-for-spatial-navigation-containers②⑦">(2)</a> <a
                    href="#ref-for-spatial-navigation-containers②⑧">(3)</a>
            <li><a href="#ref-for-spatial-navigation-containers②⑨">8.4.
                    Focus Navigation Heuristics</a>
            <li><a href="#ref-for-spatial-navigation-containers③⓪">9.1.
                    Creating additional spatial navigation containers: the spatial-navigation-contain property</a> <a
                    href="#ref-for-spatial-navigation-containers③①">(2)</a> <a
                    href="#ref-for-spatial-navigation-containers③②">(3)</a>
            <li><a href="#ref-for-spatial-navigation-containers③③">9.2.
                    Controlling the interaction with scrolling: the spatial-navigation-action property</a>
            <li><a href="#ref-for-spatial-navigation-containers③④">9.3.
                    Selecting the navigation algorithm: the spatial-navigation-function property</a> <a
                    href="#ref-for-spatial-navigation-containers③⑤">(2)</a>
            <li><a href="#ref-for-spatial-navigation-containers③⑥">Changes</a> <a
                    href="#ref-for-spatial-navigation-containers③⑦">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="spatial-navigation-steps">
        <b><a href="#spatial-navigation-steps">#spatial-navigation-steps</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-spatial-navigation-steps">4.
                    Triggering Spatial Navigation</a> <a href="#ref-for-spatial-navigation-steps①">(2)</a> <a
                    href="#ref-for-spatial-navigation-steps②">(3)</a>
            <li><a href="#ref-for-spatial-navigation-steps③">5.1.
                    Triggering Navigation Programmatically</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="set-the-search-origin">
        <b><a href="#set-the-search-origin">#set-the-search-origin</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-set-the-search-origin">8.3.
                    Navigation</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="update-the-search-origin">
        <b><a href="#update-the-search-origin">#update-the-search-origin</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-update-the-search-origin">8.4.
                    Focus Navigation Heuristics</a>
            <li><a href="#ref-for-update-the-search-origin①">Changes</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="find-focusable-areas">
        <b><a href="#find-focusable-areas">#find-focusable-areas</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-find-focusable-areas">5.2.
                    Low level APIs</a> <a href="#ref-for-find-focusable-areas①">(2)</a>
            <li><a href="#ref-for-find-focusable-areas②">8.3.
                    Navigation</a> <a href="#ref-for-find-focusable-areas③">(2)</a>
            <li><a href="#ref-for-find-focusable-areas④">8.4.
                    Focus Navigation Heuristics</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="select-the-best-candidate">
        <b><a href="#select-the-best-candidate">#select-the-best-candidate</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-select-the-best-candidate">5.2.
                    Low level APIs</a>
            <li><a href="#ref-for-select-the-best-candidate①">6.2.1.
                    navbeforefocus</a>
            <li><a href="#ref-for-select-the-best-candidate②">8.3.
                    Navigation</a> <a href="#ref-for-select-the-best-candidate③">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="find-the-shortest-distance">
        <b><a href="#find-the-shortest-distance">#find-the-shortest-distance</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-find-the-shortest-distance">8.4.
                    Focus Navigation Heuristics</a>
            <li><a href="#ref-for-find-the-shortest-distance①">9.3.
                    Selecting the navigation algorithm: the spatial-navigation-function property</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="propdef-spatial-navigation-contain">
        <b><a href="#propdef-spatial-navigation-contain">#propdef-spatial-navigation-contain</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-spatial-navigation-contain①">3.
                    Overview</a>
            <li><a href="#ref-for-propdef-spatial-navigation-contain②">8.2.
                    Groupings of elements</a>
            <li><a href="#ref-for-propdef-spatial-navigation-contain③">9.1.
                    Creating additional spatial navigation containers: the spatial-navigation-contain property</a> <a
                    href="#ref-for-propdef-spatial-navigation-contain④">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="propdef-spatial-navigation-action">
        <b><a href="#propdef-spatial-navigation-action">#propdef-spatial-navigation-action</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-propdef-spatial-navigation-action①">8.3.
                    Navigation</a> <a href="#ref-for-propdef-spatial-navigation-action②">(2)</a> <a
                    href="#ref-for-propdef-spatial-navigation-action③">(3)</a> <a
                    href="#ref-for-propdef-spatial-navigation-action④">(4)</a> <a
                    href="#ref-for-propdef-spatial-navigation-action⑤">(5)</a> <a
                    href="#ref-for-propdef-spatial-navigation-action⑥">(6)</a>
            <li><a href="#ref-for-propdef-spatial-navigation-action⑦">9.2.
                    Controlling the interaction with scrolling: the spatial-navigation-action property</a> <a
                    href="#ref-for-propdef-spatial-navigation-action⑧">(2)</a> <a
                    href="#ref-for-propdef-spatial-navigation-action⑨">(3)</a> <a
                    href="#ref-for-propdef-spatial-navigation-action①⓪">(4)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="valdef-spatial-navigation-action-auto">
        <b><a href="#valdef-spatial-navigation-action-auto">#valdef-spatial-navigation-action-auto</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-valdef-spatial-navigation-action-auto">8.3.
                    Navigation</a>
            <li><a href="#ref-for-valdef-spatial-navigation-action-auto①">9.2.
                    Controlling the interaction with scrolling: the spatial-navigation-action property</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="valdef-spatial-navigation-action-focus">
        <b><a
                href="#valdef-spatial-navigation-action-focus">#valdef-spatial-navigation-action-focus</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-valdef-spatial-navigation-action-focus">8.3.
                    Navigation</a> <a href="#ref-for-valdef-spatial-navigation-action-focus①">(2)</a> <a
                    href="#ref-for-valdef-spatial-navigation-action-focus②">(3)</a> <a
                    href="#ref-for-valdef-spatial-navigation-action-focus③">(4)</a>
            <li><a href="#ref-for-valdef-spatial-navigation-action-focus④">9.2.
                    Controlling the interaction with scrolling: the spatial-navigation-action property</a> <a
                    href="#ref-for-valdef-spatial-navigation-action-focus⑤">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="valdef-spatial-navigation-action-scroll">
        <b><a
                href="#valdef-spatial-navigation-action-scroll">#valdef-spatial-navigation-action-scroll</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-valdef-spatial-navigation-action-scroll">8.3.
                    Navigation</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="propdef-spatial-navigation-function">
        <b><a href="#propdef-spatial-navigation-function">#propdef-spatial-navigation-function</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-spatial-navigation-function①">9.3.
                    Selecting the navigation algorithm: the spatial-navigation-function property</a>
            <li><a href="#ref-for-propdef-spatial-navigation-function②">Changes</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="can-be-manually-scrolled">
        <b><a href="#can-be-manually-scrolled">#can-be-manually-scrolled</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-can-be-manually-scrolled">8.3.
                    Navigation</a> <a href="#ref-for-can-be-manually-scrolled①">(2)</a> <a
                    href="#ref-for-can-be-manually-scrolled②">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="directionally-scroll-an-element">
        <b><a href="#directionally-scroll-an-element">#directionally-scroll-an-element</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-directionally-scroll-an-element">8.3.
                    Navigation</a> <a href="#ref-for-directionally-scroll-an-element①">(2)</a> <a
                    href="#ref-for-directionally-scroll-an-element②">(3)</a>
            <li><a href="#ref-for-directionally-scroll-an-element③">9.2.
                    Controlling the interaction with scrolling: the spatial-navigation-action property</a>
        </ul>
    </aside>
    <script>/* script-var-click-highlighting */

        document.addEventListener("click", e => {
            if (e.target.nodeName == "VAR") {
                highlightSameAlgoVars(e.target);
            }
        });
        {
            const indexCounts = new Map();
            const indexNames = new Map();
            function highlightSameAlgoVars(v) {
                // Find the algorithm container.
                let algoContainer = null;
                let searchEl = v;
                while (algoContainer == null && searchEl != document.body) {
                    searchEl = searchEl.parentNode;
                    if (searchEl.hasAttribute("data-algorithm")) {
                        algoContainer = searchEl;
                    }
                }

                // Not highlighting document-global vars,
                // too likely to be unrelated.
                if (algoContainer == null) return;

                const algoName = algoContainer.getAttribute("data-algorithm");
                const varName = getVarName(v);
                const addClass = !v.classList.contains("selected");
                let highlightClass = null;
                if (addClass) {
                    const index = chooseHighlightIndex(algoName, varName);
                    indexCounts.get(algoName)[index] += 1;
                    indexNames.set(algoName + "///" + varName, index);
                    highlightClass = nameFromIndex(index);
                } else {
                    const index = previousHighlightIndex(algoName, varName);
                    indexCounts.get(algoName)[index] -= 1;
                    highlightClass = nameFromIndex(index);
                }

                // Find all same-name vars, and toggle their class appropriately.
                for (const el of algoContainer.querySelectorAll("var")) {
                    if (getVarName(el) == varName) {
                        el.classList.toggle("selected", addClass);
                        el.classList.toggle(highlightClass, addClass);
                    }
                }
            }
            function getVarName(el) {
                return el.textContent.replace(/(\s| )+/, " ").trim();
            }
            function chooseHighlightIndex(algoName, varName) {
                let indexes = null;
                if (indexCounts.has(algoName)) {
                    indexes = indexCounts.get(algoName);
                } else {
                    // 7 classes right now
                    indexes = [0, 0, 0, 0, 0, 0, 0];
                    indexCounts.set(algoName, indexes);
                }

                // If the element was recently unclicked,
                // *and* that color is still unclaimed,
                // give it back the same color.
                const lastIndex = previousHighlightIndex(algoName, varName);
                if (indexes[lastIndex] === 0) return lastIndex;

                // Find the earliest index with the lowest count.
                const minCount = Math.min.apply(null, indexes);
                let index = null;
                for (var i = 0; i < indexes.length; i++) {
                    if (indexes[i] == minCount) {
                        return i;
                    }
                }
            }
            function previousHighlightIndex(algoName, varName) {
                return indexNames.get(algoName + "///" + varName);
            }
            function nameFromIndex(index) {
                return "selected" + index;
            }
        }
    </script>
    <script>/* script-dfn-panel */

        document.body.addEventListener("click", function (e) {
            var queryAll = function (sel) { return [].slice.call(document.querySelectorAll(sel)); }
            // Find the dfn element or panel, if any, that was clicked on.
            var el = e.target;
            var target;
            var hitALink = false;
            while (el.parentElement) {
                if (el.tagName == "A") {
                    // Clicking on a link in a <dfn> shouldn't summon the panel
                    hitALink = true;
                }
                if (el.classList.contains("dfn-paneled")) {
                    target = "dfn";
                    break;
                }
                if (el.classList.contains("dfn-panel")) {
                    target = "dfn-panel";
                    break;
                }
                el = el.parentElement;
            }
            if (target != "dfn-panel") {
                // Turn off any currently "on" or "activated" panels.
                queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(function (el) {
                    el.classList.remove("on");
                    el.classList.remove("activated");
                });
            }
            if (target == "dfn" && !hitALink) {
                // open the panel
                var dfnPanel = document.querySelector(".dfn-panel[data-for='" + el.id + "']");
                if (dfnPanel) {
                    dfnPanel.classList.add("on");
                    var rect = el.getBoundingClientRect();
                    dfnPanel.style.left = window.scrollX + rect.right + 5 + "px";
                    dfnPanel.style.top = window.scrollY + rect.top + "px";
                    var panelRect = dfnPanel.getBoundingClientRect();
                    var panelWidth = panelRect.right - panelRect.left;
                    if (panelRect.right > document.body.scrollWidth && (rect.left - (panelWidth + 5)) > 0) {
                        // Reposition, because the panel is overflowing
                        dfnPanel.style.left = window.scrollX + rect.left - (panelWidth + 5) + "px";
                    }
                } else {
                    console.log("Couldn't find .dfn-panel[data-for='" + el.id + "']");
                }
            } else if (target == "dfn-panel") {
                // Switch it to "activated" state, which pins it.
                el.classList.add("activated");
                el.style.left = null;
                el.style.top = null;
            }

        });
    </script>
    <script src="/dropdown.js"></script>