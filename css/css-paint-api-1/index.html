<!doctype html>
<html lang="zh-hans">

<head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
    <title>CSS 绘画 API 第一级</title>
    <meta content="CRD" name="w3c-status">
    <meta content="Bikeshed version a79b33ea8, updated Tue Dec 14 10:19:29 2021 -0800" name="generator">
    <link href="https://www.w3.org/TR/css-paint-api-1/" rel="canonical">
    <meta content="32fccc11cf21835e6cc18487bd099cef8234215d" name="document-revision">
    <style>
        /* Put nice boxes around each algorithm. */
        [data-algorithm]:not(.heading) {
            padding: .5em;
            border: thin solid #ddd;
            border-radius: .5em;
            margin: .5em calc(-0.5em - 1px);
        }

        [data-algorithm]:not(.heading)> :first-child {
            margin-top: 0;
        }

        [data-algorithm]:not(.heading)> :last-child {
            margin-bottom: 0;
        }
    </style>
    <style>
        /* style-autolinks */

        .css.css,
        .property.property,
        .descriptor.descriptor {
            color: var(--a-normal-text);
            font-size: inherit;
            font-family: inherit;
        }

        .css::before,
        .property::before,
        .descriptor::before {
            content: "‘";
        }

        .css::after,
        .property::after,
        .descriptor::after {
            content: "’";
        }

        .property,
        .descriptor {
            /* Don't wrap property and descriptor names */
            white-space: nowrap;
        }

        .type {
            /* CSS value <type> */
            font-style: italic;
        }

        pre .property::before,
        pre .property::after {
            content: "";
        }

        [data-link-type="property"]::before,
        [data-link-type="propdesc"]::before,
        [data-link-type="descriptor"]::before,
        [data-link-type="value"]::before,
        [data-link-type="function"]::before,
        [data-link-type="at-rule"]::before,
        [data-link-type="selector"]::before,
        [data-link-type="maybe"]::before {
            content: "‘";
        }

        [data-link-type="property"]::after,
        [data-link-type="propdesc"]::after,
        [data-link-type="descriptor"]::after,
        [data-link-type="value"]::after,
        [data-link-type="function"]::after,
        [data-link-type="at-rule"]::after,
        [data-link-type="selector"]::after,
        [data-link-type="maybe"]::after {
            content: "’";
        }

        [data-link-type].production::before,
        [data-link-type].production::after,
        .prod [data-link-type]::before,
        .prod [data-link-type]::after {
            content: "";
        }

        [data-link-type=element],
        [data-link-type=element-attr] {
            font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
            font-size: .9em;
        }

        [data-link-type=element]::before {
            content: "<"
        }

        [data-link-type=element]::after {
            content: ">"
        }

        [data-link-type=biblio] {
            white-space: pre;
        }
    </style>
    <style>
        /* style-counters */

        body {
            counter-reset: example figure issue;
        }

        .issue {
            counter-increment: issue;
        }

        .issue:not(.no-marker)::before {
            content: "Issue " counter(issue);
        }

        .example {
            counter-increment: example;
        }

        .example:not(.no-marker)::before {
            content: "Example " counter(example);
        }

        .invalid.example:not(.no-marker)::before,
        .illegal.example:not(.no-marker)::before {
            content: "Invalid Example" counter(example);
        }

        figcaption {
            counter-increment: figure;
        }

        figcaption:not(.no-marker)::before {
            content: "Figure " counter(figure) " ";
        }
    </style>
    <style>
        /* style-dfn-panel */

        :root {
            --dfnpanel-bg: #ddd;
            --dfnpanel-text: var(--text);
        }

        .dfn-panel {
            position: absolute;
            z-index: 35;
            height: auto;
            width: -webkit-fit-content;
            width: fit-content;
            max-width: 300px;
            max-height: 500px;
            overflow: auto;
            padding: 0.5em 0.75em;
            font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
            background: var(--dfnpanel-bg);
            color: var(--dfnpanel-text);
            border: outset 0.2em;
        }

        .dfn-panel:not(.on) {
            display: none;
        }

        .dfn-panel * {
            margin: 0;
            padding: 0;
            text-indent: 0;
        }

        .dfn-panel>b {
            display: block;
        }

        .dfn-panel a {
            color: var(--dfnpanel-text);
        }

        .dfn-panel a:not(:hover) {
            text-decoration: none !important;
            border-bottom: none !important;
        }

        .dfn-panel>b+b {
            margin-top: 0.25em;
        }

        .dfn-panel ul {
            padding: 0;
        }

        .dfn-panel li {
            list-style: inside;
        }

        .dfn-panel.activated {
            display: inline-block;
            position: fixed;
            left: .5em;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - 1.5em - .4em - .5em);
            max-height: 30vh;
        }

        .dfn-paneled {
            cursor: pointer;
        }
    </style>
    <style>
        /* style-issues */

        a[href].issue-return {
            float: right;
            float: inline-end;
            color: var(--issueheading-text);
            font-weight: bold;
            text-decoration: none;
        }
    </style>
    <style>
        /* style-md-lists */

        /* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
        [data-md]> :first-child {
            margin-top: 0;
        }

        [data-md]> :last-child {
            margin-bottom: 0;
        }
    </style>
    <style>
        /* style-mdn-anno */

        @media (max-width: 767px) {
            .mdn-anno {
                opacity: .1
            }
        }

        .mdn-anno {
            font: 1em sans-serif;
            padding: 0.3em;
            position: absolute;
            z-index: 8;
            right: 0.3em;
            background: #EEE;
            color: black;
            box-shadow: 0 0 3px #999;
            overflow: hidden;
            border-collapse: initial;
            border-spacing: initial;
            min-width: 9em;
            max-width: min-content;
            white-space: nowrap;
            word-wrap: normal;
            hyphens: none
        }

        .mdn-anno:not(.wrapped) {
            opacity: 1
        }

        .mdn-anno:hover {
            z-index: 9
        }

        .mdn-anno.wrapped {
            min-width: 0
        }

        .mdn-anno.wrapped> :not(button) {
            display: none;
        }

        .mdn-anno>.mdn-anno-btn {
            cursor: pointer;
            border: none;
            color: #000;
            background: transparent;
            margin: -8px;
            float: right;
            padding: 10px 8px 8px 8px;
            outline: none;
        }

        .mdn-anno>.mdn-anno-btn>.less-than-two-engines-flag {
            color: red;
            padding-right: 2px;
        }

        .mdn-anno>.mdn-anno-btn>.all-engines-flag {
            color: green;
            padding-right: 2px;
        }

        .mdn-anno>.mdn-anno-btn>span {
            color: #fff;
            background-color: #000;
            font-weight: normal;
            font-family: zillaslab, Palatino, "Palatino Linotype", serif;
            padding: 2px 3px 0px 3px;
            line-height: 1.3em;
            vertical-align: top;
        }

        .mdn-anno>.feature {
            margin-top: 20px;
        }

        .mdn-anno>.feature:not(:first-of-type) {
            border-top: 1px solid #999;
            margin-top: 6px;
            padding-top: 2px;
        }

        .mdn-anno>.feature>.less-than-two-engines-text {
            color: red
        }

        .mdn-anno>.feature>.all-engines-text {
            color: green
        }

        .mdn-anno>.feature>p {
            font-size: .75em;
            margin-top: 6px;
            margin-bottom: 0;
        }

        .mdn-anno>.feature>p+p {
            margin-top: 3px;
        }

        .mdn-anno>.feature>.support {
            display: block;
            font-size: 0.6em;
            margin: 0;
            padding: 0;
            margin-top: 2px
        }

        .mdn-anno>.feature>.support+div {
            padding-top: 0.5em;
        }

        .mdn-anno>.feature>.support>hr {
            display: block;
            border: none;
            border-top: 1px dotted #999;
            padding: 3px 0px 0px 0px;
            margin: 2px 3px 0px 3px;
        }

        .mdn-anno>.feature>.support>hr::before {
            content: "";
        }

        .mdn-anno>.feature>.support>span {
            padding: 0.2em 0;
            display: block;
            display: table;
        }

        .mdn-anno>.feature>.support>span.no {
            color: #CCCCCC;
            filter: grayscale(100%);
        }

        .mdn-anno>.feature>.support>span.no::before {
            opacity: 0.5;
        }

        .mdn-anno>.feature>.support>span:first-of-type {
            padding-top: 0.5em;
        }

        .mdn-anno>.feature>.support>span>span {
            padding: 0 0.5em;
            display: table-cell;
        }

        .mdn-anno>.feature>.support>span>span:first-child {
            width: 100%;
        }

        .mdn-anno>.feature>.support>span>span:last-child {
            width: 100%;
            white-space: pre;
            padding: 0;
        }

        .mdn-anno>.feature>.support>span::before {
            content: ' ';
            display: table-cell;
            min-width: 1.5em;
            height: 1.5em;
            background: no-repeat center center;
            background-size: contain;
            text-align: right;
            font-size: 0.75em;
            font-weight: bold;
        }

        .mdn-anno>.feature>.support>.chrome_android::before {
            background-image: url(https://resources.whatwg.org/browser-logos/chrome.svg);
        }

        .mdn-anno>.feature>.support>.firefox_android::before {
            background-image: url(https://resources.whatwg.org/browser-logos/firefox.png);
        }

        .mdn-anno>.feature>.support>.chrome::before {
            background-image: url(https://resources.whatwg.org/browser-logos/chrome.svg);
        }

        .mdn-anno>.feature>.support>.edge_blink::before {
            background-image: url(https://resources.whatwg.org/browser-logos/edge.svg);
        }

        .mdn-anno>.feature>.support>.edge::before {
            background-image: url(https://resources.whatwg.org/browser-logos/edge_legacy.svg);
        }

        .mdn-anno>.feature>.support>.firefox::before {
            background-image: url(https://resources.whatwg.org/browser-logos/firefox.png);
        }

        .mdn-anno>.feature>.support>.ie::before {
            background-image: url(https://resources.whatwg.org/browser-logos/ie.png);
        }

        .mdn-anno>.feature>.support>.safari_ios::before {
            background-image: url(https://resources.whatwg.org/browser-logos/safari-ios.svg);
        }

        .mdn-anno>.feature>.support>.nodejs::before {
            background-image: url(https://nodejs.org/static/images/favicons/favicon.ico);
        }

        .mdn-anno>.feature>.support>.opera_android::before {
            background-image: url(https://resources.whatwg.org/browser-logos/opera.svg);
        }

        .mdn-anno>.feature>.support>.opera::before {
            background-image: url(https://resources.whatwg.org/browser-logos/opera.svg);
        }

        .mdn-anno>.feature>.support>.safari::before {
            background-image: url(https://resources.whatwg.org/browser-logos/safari.png);
        }

        .mdn-anno>.feature>.support>.samsunginternet_android::before {
            background-image: url(https://resources.whatwg.org/browser-logos/samsung.svg);
        }

        .mdn-anno>.feature>.support>.webview_android::before {
            background-image: url(https://resources.whatwg.org/browser-logos/android-webview.png);
        }

        .name-slug-mismatch {
            color: red
        }

        .caniuse-status:hover {
            z-index: 9;
        }

        /* dt, li, .issue, .note, and .example are "position: relative", so to put annotation at right margin, must move to right of containing block */
        .h-entry:not(.status-LS) dt>.mdn-anno,
        .h-entry:not(.status-LS) li>.mdn-anno,
        .h-entry:not(.status-LS) .issue>.mdn-anno,
        .h-entry:not(.status-LS) .note>.mdn-anno,
        .h-entry:not(.status-LS) .example>.mdn-anno {
            right: -6.7em;
        }

        .h-entry p+.mdn-anno {
            margin-top: 0;
        }

        h2+.mdn-anno.after {
            margin: -48px 0 0 0;
        }

        h3+.mdn-anno.after {
            margin: -46px 0 0 0;
        }

        h4+.mdn-anno.after {
            margin: -42px 0 0 0;
        }

        h5+.mdn-anno.after {
            margin: -40px 0 0 0;
        }

        h6+.mdn-anno.after {
            margin: -40px 0 0 0;
        }
    </style>
    <style>
        /* style-selflinks */

        :root {
            --selflink-text: white;
            --selflink-bg: gray;
            --selflink-hover-text: black;
        }

        .heading,
        .issue,
        .note,
        .example,
        li,
        dt {
            position: relative;
        }

        a.self-link {
            position: absolute;
            top: 0;
            left: calc(-1 * (3.5rem - 26px));
            width: calc(3.5rem - 26px);
            height: 2em;
            text-align: center;
            border: none;
            transition: opacity .2s;
            opacity: .5;
        }

        a.self-link:hover {
            opacity: 1;
        }

        .heading>a.self-link {
            font-size: 83%;
        }

        li>a.self-link {
            left: calc(-1 * (3.5rem - 26px) - 2em);
        }

        dfn>a.self-link {
            top: auto;
            left: auto;
            opacity: 0;
            width: 1.5em;
            height: 1.5em;
            background: var(--selflink-bg);
            color: var(--selflink-text);
            font-style: normal;
            transition: opacity .2s, background-color .2s, color .2s;
        }

        dfn:hover>a.self-link {
            opacity: 1;
        }

        dfn>a.self-link:hover {
            color: var(--selflink-hover-text);
        }

        a.self-link::before {
            content: "¶";
        }

        .heading>a.self-link::before {
            content: "§";
        }

        dfn>a.self-link::before {
            content: "#";
        }
    </style>
    <style>
        /* style-syntax-highlighting */

        pre.idl.highlight {
            background: var(--borderedblock-bg, var(--def-bg));
        }

        code.highlight {
            padding: .1em;
            border-radius: .3em;
        }

        pre.highlight,
        pre>code.highlight {
            display: block;
            padding: 1em;
            margin: .5em 0;
            overflow: auto;
            border-radius: 0;
        }

        .highlight:not(.idl) {
            background: rgba(0, 0, 0, .03);
        }

        c-[a] {
            color: #990055
        }

        /* Keyword.Declaration */
        c-[b] {
            color: #990055
        }

        /* Keyword.Type */
        c-[c] {
            color: #708090
        }

        /* Comment */
        c-[d] {
            color: #708090
        }

        /* Comment.Multiline */
        c-[e] {
            color: #0077aa
        }

        /* Name.Attribute */
        c-[f] {
            color: #669900
        }

        /* Name.Tag */
        c-[g] {
            color: #222222
        }

        /* Name.Variable */
        c-[k] {
            color: #990055
        }

        /* Keyword */
        c-[l] {
            color: #000000
        }

        /* Literal */
        c-[m] {
            color: #000000
        }

        /* Literal.Number */
        c-[n] {
            color: #0077aa
        }

        /* Name */
        c-[o] {
            color: #999999
        }

        /* Operator */
        c-[p] {
            color: #999999
        }

        /* Punctuation */
        c-[s] {
            color: #a67f59
        }

        /* Literal.String */
        c-[t] {
            color: #a67f59
        }

        /* Literal.String.Single */
        c-[u] {
            color: #a67f59
        }

        /* Literal.String.Double */
        c-[cp] {
            color: #708090
        }

        /* Comment.Preproc */
        c-[c1] {
            color: #708090
        }

        /* Comment.Single */
        c-[cs] {
            color: #708090
        }

        /* Comment.Special */
        c-[kc] {
            color: #990055
        }

        /* Keyword.Constant */
        c-[kn] {
            color: #990055
        }

        /* Keyword.Namespace */
        c-[kp] {
            color: #990055
        }

        /* Keyword.Pseudo */
        c-[kr] {
            color: #990055
        }

        /* Keyword.Reserved */
        c-[ld] {
            color: #000000
        }

        /* Literal.Date */
        c-[nc] {
            color: #0077aa
        }

        /* Name.Class */
        c-[no] {
            color: #0077aa
        }

        /* Name.Constant */
        c-[nd] {
            color: #0077aa
        }

        /* Name.Decorator */
        c-[ni] {
            color: #0077aa
        }

        /* Name.Entity */
        c-[ne] {
            color: #0077aa
        }

        /* Name.Exception */
        c-[nf] {
            color: #0077aa
        }

        /* Name.Function */
        c-[nl] {
            color: #0077aa
        }

        /* Name.Label */
        c-[nn] {
            color: #0077aa
        }

        /* Name.Namespace */
        c-[py] {
            color: #0077aa
        }

        /* Name.Property */
        c-[ow] {
            color: #999999
        }

        /* Operator.Word */
        c-[mb] {
            color: #000000
        }

        /* Literal.Number.Bin */
        c-[mf] {
            color: #000000
        }

        /* Literal.Number.Float */
        c-[mh] {
            color: #000000
        }

        /* Literal.Number.Hex */
        c-[mi] {
            color: #000000
        }

        /* Literal.Number.Integer */
        c-[mo] {
            color: #000000
        }

        /* Literal.Number.Oct */
        c-[sb] {
            color: #a67f59
        }

        /* Literal.String.Backtick */
        c-[sc] {
            color: #a67f59
        }

        /* Literal.String.Char */
        c-[sd] {
            color: #a67f59
        }

        /* Literal.String.Doc */
        c-[se] {
            color: #a67f59
        }

        /* Literal.String.Escape */
        c-[sh] {
            color: #a67f59
        }

        /* Literal.String.Heredoc */
        c-[si] {
            color: #a67f59
        }

        /* Literal.String.Interpol */
        c-[sx] {
            color: #a67f59
        }

        /* Literal.String.Other */
        c-[sr] {
            color: #a67f59
        }

        /* Literal.String.Regex */
        c-[ss] {
            color: #a67f59
        }

        /* Literal.String.Symbol */
        c-[vc] {
            color: #0077aa
        }

        /* Name.Variable.Class */
        c-[vg] {
            color: #0077aa
        }

        /* Name.Variable.Global */
        c-[vi] {
            color: #0077aa
        }

        /* Name.Variable.Instance */
        c-[il] {
            color: #000000
        }

        /* Literal.Number.Integer.Long */
    </style>
    <style>
        /* style-var-click-highlighting */

        var {
            cursor: pointer;
        }

        var.selected0 {
            background-color: #F4D200;
            box-shadow: 0 0 0 2px #F4D200;
        }

        var.selected1 {
            background-color: #FF87A2;
            box-shadow: 0 0 0 2px #FF87A2;
        }

        var.selected2 {
            background-color: #96E885;
            box-shadow: 0 0 0 2px #96E885;
        }

        var.selected3 {
            background-color: #3EEED2;
            box-shadow: 0 0 0 2px #3EEED2;
        }

        var.selected4 {
            background-color: #EACFB6;
            box-shadow: 0 0 0 2px #EACFB6;
        }

        var.selected5 {
            background-color: #82DDFF;
            box-shadow: 0 0 0 2px #82DDFF;
        }

        var.selected6 {
            background-color: #FFBCF2;
            box-shadow: 0 0 0 2px #FFBCF2;
        }
    </style>
    <link href="https://www.w3.org/StyleSheets/TR/2021/W3C-CRD" rel="stylesheet">

<body class="h-entry">
    <div class="head">
        <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48"
                    src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72"> </a> </p>
        <h1 class="p-name no-ref" id="title">CSS 绘画 API 第一级</h1>
        <p id="w3c-state"><a href="https://www.w3.org/standards/types#CRD">W3C 候选推荐草案</a>, <time class="dt-updated"
                datetime="2021-12-16">2021年12月16日</time></p>
        <details open>
            <summary>更多关于此文档的信息</summary>
            <div data-fill-with="spec-metadata">
                <dl>
                    <dt>此版本:
                    <dd><a class="u-url"
                            href="https://www.w3.org/TR/2021/CRD-css-paint-api-1-20211216/">https://www.w3.org/TR/2021/CRD-css-paint-api-1-20211216/</a>
                    <dt>最新发布版本:
                    <dd><a href="https://www.w3.org/TR/css-paint-api-1/">https://www.w3.org/TR/css-paint-api-1/</a>
                    <dt>编辑草案:
                    <dd><a
                            href="https://drafts.css-houdini.org/css-paint-api-1/">https://drafts.css-houdini.org/css-paint-api-1/</a>
                    <dt>之前的版本:
                    <dd><a href="https://www.w3.org/TR/2018/WD-css-paint-api-1-20180410/"
                            rel="prev">https://www.w3.org/TR/2018/WD-css-paint-api-1-20180410/</a>
                    <dd><a href="https://www.w3.org/TR/2016/WD-css-paint-api-1-20160607/"
                            rel="prev">https://www.w3.org/TR/2016/WD-css-paint-api-1-20160607/</a>
                    <dt>历史记录:
                    <dd><a class="u-url"
                            href="https://www.w3.org/standards/history/css-paint-api-1">https://www.w3.org/standards/history/css-paint-api-1</a>
                    <dt>反馈:
                    <dd><span><a
                                href="mailto:public-houdini@w3.org?subject=%5Bcss-paint-api%5D%20YOUR%20TOPIC%20HERE">public-houdini@w3.org</a>
                            主题行使用 “<kbd>[css-paint-api] <i data-lt>… 消息主题 …</i></kbd>” (<a
                                href="https://lists.w3.org/Archives/Public/public-houdini/"
                                rel="discussion">存档</a>)</span>
                    <dd><a href="https://github.com/w3c/css-houdini-drafts/issues/">GitHub</a>
                    <dt>实现报告:
                    <dd><a
                            href="https://wpt.fyi/results/css/css-paint-api">https://wpt.fyi/results/css/css-paint-api</a>
                    <dt class="editor">编辑:
                    <dd class="editor p-author h-card vcard" data-editor-id="73001"><a class="p-name fn u-email email"
                            href="mailto:ikilpatrick@chromium.org">Ian Kilpatrick</a>
                    <dd class="editor p-author h-card vcard" data-editor-id="42080"><a class="p-name fn u-email email"
                            href="mailto:dino@apple.com">Dean Jackson</a>
                    <dt class="editor">前编辑:
                    <dd class="editor p-author h-card vcard" data-editor-id="47691"><a class="p-name fn u-email email"
                            href="mailto:shanestephens@google.com">Shane Stephens</a>
                </dl>
            </div>
        </details>
        <div data-fill-with="warning"></div>
        <p class="copyright" data-fill-with="copyright"><a
                href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">版权</a> © 2021 <a
                href="https://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a
                href="https://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">麻省理工学院</abbr></a>,
            <a href="https://www.ercim.eu/"><abbr
                    title="European Research Consortium for Informatics and Mathematics">欧洲信息与数学研究联盟</abbr></a>, <a
                href="https://www.keio.ac.jp/">庆应大学</a>, <a href="https://ev.buaa.edu.cn/">北京航空航天大学</a>). W3C <a
                href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">责任</a>, <a
                href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">商标</a> 和 <a
                href="https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document"
                rel="license">宽松的文档许可</a> 规则适用。
        </p>
        <hr title="头部的分隔符">
    </div>
    <div class="p-summary" data-fill-with="abstract">
        <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">摘要</span></h2>
        <p>一个允许Web开发人员使用JavaScript定义自定义CSS <a class="production css" data-link-type="type"
                href="https://www.w3.org/TR/css-images-3/#typedef-image" id="ref-for-typedef-image">&lt;image></a>的API，
            该API能够响应样式和尺寸的变化。
            参见 <a href="https://github.com/w3c/css-houdini-drafts/blob/master/css-paint-api/EXPLAINER.md">解释文档</a>。
        </p>
    </div>
    <h2 class="no-num no-toc no-ref heading settled" id="sotd"><span class="content">本文档的状态</span></h2>
    <div data-fill-with="status">
        <p><em>本节描述了本文档在发布时的状态。
                当前W3C出版物列表及本技术报告的最新修订版
                可以在 <a href="https://www.w3.org/TR/">W3C技术报告索引 https://www.w3.org/TR/.</a>中找到。</em> </p>
        <p> 本文档由<a href="https://www.w3.org/groups/wg/css">CSS工作组</a>作为<strong>候选推荐草案</strong>发布，使用<a
                href="https://www.w3.org/2021/Process-20211102/#recs-and-notes">推荐规范路径</a>。
            作为候选推荐草案发布并不意味着 <abbr title="World Wide Web Consortium">W3C</abbr>及其成员的认可。
            候选推荐草案集成了工作组打算包含在后续候选推荐快照中的上一版候选推荐的更改。 </p>
        <p> 这是一个草案文档，
            可能会随时更新、替换或被其他文档取代。
            除了作为正在进行的工作外，引用本文档是不合适的。</p>
        <p>请通过<a href="https://github.com/w3c/css-houdini-drafts/issues">在GitHub中提交问题</a>（首选）反馈，
            包含规范代码“css-paint-api”在标题中，如下所示：
            “[css-paint-api] <i>…评论摘要…</i>”。
            所有问题和评论均被<a href="https://lists.w3.org/Archives/Public/public-houdini-archive/">存档</a>。
            或者，反馈可以发送至<a href="https://lists.w3.org/Archives/Public/www-style/">存档</a>的公共邮件列表 <a
                href="mailto:www-style@w3.org?Subject=%5Bcss-paint-api%5D%20PUT%20SUBJECT%20HERE">www-style@w3.org</a>。
        </p>
        <p>本文档受<a href="https://www.w3.org/2021/Process-20211102/" id="w3c_process_revision">2021年11月2日W3C流程文档</a>的管理。
        </p>
        <p>本文档由遵循<a href="https://www.w3.org/Consortium/Patent-Policy-20200915/">W3C专利政策</a>的工作组制作。
            W3C维护了<a href="https://www.w3.org/2004/01/pp-impl/32061/status" rel="disclosure">任何与工作组交付物相关的公开专利列表</a>；
            该页面还包含披露专利的说明。
            如果个人掌握任何专利，并且该专利中包含<a href="https://www.w3.org/Consortium/Patent-Policy-20200915/#def-essential">必要声明</a>，
            则必须根据<a href="https://www.w3.org/Consortium/Patent-Policy-20200915/#sec-Disclosure">W3C专利政策第6节</a>披露相关信息。
        </p>
        <p></p>
    </div>
    <div data-fill-with="at-risk"></div>
    <nav data-fill-with="table-of-contents" id="toc">
        <h2 class="no-num no-toc no-ref" id="contents">目录</h2>
        <ol class="toc" role="directory">
            <li><a href="#intro"><span class="secno">1</span> <span class="content">介绍</span></a>
            <li><a href="#paint-worklet"><span class="secno">2</span> <span class="content">绘画 Worklet</span></a>
            <li><a href="#concepts"><span class="secno">3</span> <span class="content">概念</span></a>
            <li><a href="#registering-custom-paint"><span class="secno">4</span> <span
                        class="content">注册自定义绘画</span></a>
            <li><a href="#paint-notation"><span class="secno">5</span> <span class="content">绘画符号</span></a>
            <li>
                <a href="#2d-rendering-context"><span class="secno">6</span> <span class="content">2D 渲染上下文</span></a>
                <ol class="toc">
                    <li><a href="#drawing-a-cssimagevalue"><span class="secno">6.1</span> <span class="content">绘制
                                CSSImageValue</span></a>
                </ol>
            <li>
                <a href="#drawing-an-image"><span class="secno">7</span> <span class="content">绘制图像</span></a>
                <ol class="toc">
                    <li><a href="#global-scope-selection"><span class="secno">7.1</span> <span
                                class="content">全局范围选择</span></a>
                </ol>
            <li>
                <a href="#examples"><span class="secno">8</span> <span class="content">示例</span></a>
                <ol class="toc">
                    <li><a href="#example-1"><span class="secno">8.1</span> <span class="content">示例 1：彩色圆圈</span></a>
                    <li><a href="#example-2"><span class="secno">8.2</span> <span class="content">示例 2：图像占位符</span></a>
                    <li><a href="#example-3"><span class="secno">8.3</span> <span class="content">示例 3：弧形</span></a>
                    <li><a href="#example-4"><span class="secno">8.4</span> <span class="content">示例
                                4：不同颜色（基于尺寸）</span></a>
                    <li><a href="#example-5"><span class="secno">8.5</span> <span class="content">示例
                                5：绘制元素区域外部</span></a>
                </ol>
            <li><a href="#security-considerations"><span class="secno">9</span> <span class="content">安全注意事项</span></a>
            <li><a href="#privacy-considerations"><span class="secno">10</span> <span class="content">隐私注意事项</span></a>
            <li><a href="#changes"><span class="secno">11</span> <span class="content">变更</span></a>
            <li>
                <a href="#w3c-conformance"><span class="secno"></span> <span class="content"> 合规性</span></a>
                <ol class="toc">
                    <li><a href="#w3c-conventions"><span class="secno"></span> <span class="content"> 文档约定</span></a>
                    <li><a href="#w3c-conformance-classes"><span class="secno"></span> <span class="content">
                                合规性类别</span></a>
                    <li>
                        <a href="#w3c-partial"><span class="secno"></span> <span class="content"> 部分实现</span></a>
                        <ol class="toc">
                            <li><a href="#w3c-conform-future-proofing"><span class="secno"></span> <span
                                        class="content"> 不稳定和专有功能的实现</span></a>
                        </ol>
                    <li><a href="#w3c-testing"><span class="secno"></span> <span class="content"> 非实验性实现</span></a>
                    <li><a href="#w3c-cr-exit-criteria"><span class="secno"></span> <span class="content"> CR
                                退出标准</span></a>
                </ol>
            <li>
                <a href="#index"><span class="secno"></span> <span class="content">索引</span></a>
                <ol class="toc">
                    <li><a href="#index-defined-here"><span class="secno"></span> <span
                                class="content">本规范定义的术语</span></a>
                    <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span
                                class="content">引用定义的术语</span></a>
                </ol>
            <li>
                <a href="#references"><span class="secno"></span> <span class="content">参考资料</span></a>
                <ol class="toc">
                    <li><a href="#normative"><span class="secno"></span> <span class="content">规范性参考资料</span></a>
                </ol>
            <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL 索引</span></a>
        </ol>
    </nav>
    <main>
        <h2 class="heading settled" data-level="1" id="intro"><span class="secno">1. </span><span
                class="content">介绍</span><a class="self-link" href="#intro"></a></h2>
        <p>CSS的绘画阶段负责根据盒子的大小（由布局阶段生成）和计算样式绘制盒子的背景、内容和高亮部分。</p>
        <p>本规范描述了一个API，允许开发人员通过额外的<a class="production css" data-link-type="type"
                href="https://www.w3.org/TR/css-images-3/#typedef-image" id="ref-for-typedef-image①">&lt;image></a>函数
            来响应大小/计算样式的变化以绘制盒子的部分内容。</p>
        <p class="note" role="note"><span>注意：</span>在未来的规范版本中，可能会增加支持定义盒子部分（例如背景层）的裁剪、全局透明度和滤镜功能。</p>
        <h2 class="heading settled" data-level="2" id="paint-worklet"><span class="secno">2. </span><span
                class="content">绘画 Worklet</span><a class="self-link" href="#paint-worklet"></a></h2>
        <div class="mdn-anno wrapped">
            <button class="mdn-anno-btn"><b class="less-than-two-engines-flag"
                    title="该功能仅在少于两个现有引擎中可用。">⚠</b><span>MDN</span></button>
            <div class="feature">
                <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/CSS/paintWorklet"
                        title="paintWorklet 是 CSS 接口的一个静态只读属性，它提供对 PaintWorklet 的访问，程序化生成一个在CSS属性需要文件的地方生成图像。">CSS/paintWorklet</a>
                </p>
                <p class="less-than-two-engines-text">仅在一个现有引擎中可用。</p>
                <div class="support">
                    <span class="firefox no"><span>Firefox</span><span>无</span></span><span
                        class="safari no"><span>Safari</span><span>无</span></span><span
                        class="chrome yes"><span>Chrome</span><span>65+</span></span>
                    <hr>
                    <span class="opera yes"><span>Opera</span><span>52+</span></span><span
                        class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                    <hr>
                    <span class="edge no"><span>Edge (旧版)</span><span>无</span></span><span
                        class="ie no"><span>IE</span><span>无</span></span>
                    <hr>
                    <span class="firefox_android no"><span>Firefox for Android</span><span>无</span></span><span
                        class="safari_ios no"><span>iOS Safari</span><span>无</span></span><span
                        class="chrome_android yes"><span>Chrome for Android</span><span>65+</span></span><span
                        class="webview_android yes"><span>Android WebView</span><span>65+</span></span><span
                        class="samsunginternet_android yes"><span>Samsung Internet</span><span>9.0+</span></span><span
                        class="opera_android yes"><span>Opera Mobile</span><span>47+</span></span>
                </div>
            </div>
        </div>
        <p><code
                class="idl"><a data-link-type="idl" href="#dom-css-paintworklet" id="ref-for-dom-css-paintworklet">paintWorklet</a></code>
            属性允许访问负责所有与绘画相关类的<code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/worklets.html#worklet" id="ref-for-worklet">Worklet</a></code>。
        </p>
        <p><code
                class="idl"><a data-link-type="idl" href="#dom-css-paintworklet" id="ref-for-dom-css-paintworklet①">paintWorklet</a></code>
            的<a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/worklets.html#worklet-global-scope-type"
                id="ref-for-worklet-global-scope-type">Worklet全局作用域类型</a>是<code
                class="idl"><a data-link-type="idl" href="#paintworkletglobalscope" id="ref-for-paintworkletglobalscope">PaintWorkletGlobalScope</a></code>。
        </p>
        <p><code
                class="idl"><a data-link-type="idl" href="#dom-css-paintworklet" id="ref-for-dom-css-paintworklet②">paintWorklet</a></code>
            的<a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/worklets.html#worklet-destination-type"
                id="ref-for-worklet-destination-type">Worklet目标类型</a>是<code>"paintworklet"</code>。
        </p>
        <pre class="idl highlight def"><c- b>partial</c-> <c- b>namespace</c-> <a class="idl-code" data-link-type="namespace" href="https://www.w3.org/TR/cssom-1/#namespacedef-css" id="ref-for-namespacedef-css"><c- g>CSS</c-></a> {
    [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject" id="ref-for-SameObject"><c- g>SameObject</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/worklets.html#worklet" id="ref-for-worklet①"><c- n>Worklet</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="CSS" data-dfn-type="attribute" data-export data-readonly data-type="Worklet" id="dom-css-paintworklet"><code><c- g>paintWorklet</c-></code></dfn>;
};
</pre>
        <p><code
                class="idl"><a data-link-type="idl" href="#paintworkletglobalscope" id="ref-for-paintworkletglobalscope①">PaintWorkletGlobalScope</a></code>
            是<code
                class="idl"><a data-link-type="idl" href="#dom-css-paintworklet" id="ref-for-dom-css-paintworklet③">paintWorklet</a></code>
            的全局执行上下文。
        </p>
        <div class="mdn-anno wrapped">
            <button class="mdn-anno-btn"><b class="less-than-two-engines-flag"
                    title="该功能仅在少于两个现有引擎中可用。">⚠</b><span>MDN</span></button>
            <div class="feature">
                <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/PaintWorklet/devicePixelRatio"
                        title="PaintWorkletGlobalScope.devicePixelRatio 是 PaintWorklet 接口的只读属性，返回当前设备的物理像素与逻辑像素的比率。">PaintWorklet/devicePixelRatio</a>
                </p>
                <p class="less-than-two-engines-text">仅在一个现有引擎中可用。</p>
                <div class="support">
                    <span class="firefox no"><span>Firefox</span><span>无</span></span><span
                        class="safari no"><span>Safari</span><span>无</span></span><span
                        class="chrome yes"><span>Chrome</span><span>65+</span></span>
                    <hr>
                    <span class="opera no"><span>Opera</span><span>？</span></span><span
                        class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                    <hr>
                    <span class="edge no"><span>Edge (旧版)</span><span>无</span></span><span
                        class="ie no"><span>IE</span><span>无</span></span>
                    <hr>
                    <span class="firefox_android no"><span>Firefox for Android</span><span>无</span></span><span
                        class="safari_ios no"><span>iOS Safari</span><span>无</span></span><span
                        class="chrome_android yes"><span>Chrome for Android</span><span>65+</span></span><span
                        class="webview_android yes"><span>Android WebView</span><span>65+</span></span><span
                        class="samsunginternet_android yes"><span>Samsung Internet</span><span>9.0+</span></span><span
                        class="opera_android no"><span>Opera Mobile</span><span>？</span></span>
                </div>
            </div>
        </div>
        <p><code
                class="idl"><a data-link-type="idl" href="#paintworkletglobalscope" id="ref-for-paintworkletglobalscope②">PaintWorkletGlobalScope</a></code>
            有一个与 Window.<code
                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/cssom-view/#dom-window-devicepixelratio" id="ref-for-dom-window-devicepixelratio">devicePixelRatio</a></code>
            属性相同的<code
                class="idl"><a data-link-type="idl" href="#dom-paintworkletglobalscope-devicepixelratio" id="ref-for-dom-paintworkletglobalscope-devicepixelratio">devicePixelRatio</a></code>属性。
        </p>
        <div class="mdn-anno wrapped">
            <button class="mdn-anno-btn"><b class="less-than-two-engines-flag"
                    title="该功能仅在少于两个现有引擎中可用。">⚠</b><span>MDN</span></button>
            <div class="feature">
                <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/PaintWorklet"
                        title="CSS 绘画 API 的 PaintWorklet 接口在 CSS 属性需要文件的地方程序化生成图像。通过 CSS.paintWorklet 访问该接口。">PaintWorklet</a>
                </p>
                <p class="less-than-two-engines-text">仅在一个现有引擎中可用。</p>
                <div class="support">
                    <span class="firefox no"><span>Firefox</span><span>无</span></span><span
                        class="safari no"><span>Safari</span><span>无</span></span><span
                        class="chrome yes"><span>Chrome</span><span>65+</span></span>
                    <hr>
                    <span class="opera no"><span>Opera</span><span>？</span></span><span
                        class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                    <hr>
                    <span class="edge no"><span>Edge (旧版)</span><span>无</span></span><span
                        class="ie no"><span>IE</span><span>无</span></span>
                    <hr>
                    <span class="firefox_android no"><span>Firefox for Android</span><span>无</span></span><span
                        class="safari_ios no"><span>iOS Safari</span><span>无</span></span><span
                        class="chrome_android yes"><span>Chrome for Android</span><span>65+</span></span><span
                        class="webview_android yes"><span>Android WebView</span><span>65+</span></span><span
                        class="samsunginternet_android yes"><span>Samsung Internet</span><span>9.0+</span></span><span
                        class="opera_android no"><span>Opera Mobile</span><span>？</span></span>
                </div>
            </div>
        </div>
        <pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Global" id="ref-for-Global"><c- g>Global</c-></a>=(<a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/worklets.html#worklet" id="ref-for-worklet②"><c- n>Worklet</c-></a>,<a data-link-type="idl-name"><c- n>PaintWorklet</c-></a>),<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed"><c- g>Exposed</c-></a>=<c- n>PaintWorklet</c->]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="paintworkletglobalscope"><code><c- g>PaintWorkletGlobalScope</c-></code></dfn> : <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/worklets.html#workletglobalscope" id="ref-for-workletglobalscope"><c- n>WorkletGlobalScope</c-></a> {
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-paintworkletglobalscope-registerpaint" id="ref-for-dom-paintworkletglobalscope-registerpaint"><c- g>registerPaint</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString"><c- b>DOMString</c-></a> <dfn class="idl-code" data-dfn-for="PaintWorkletGlobalScope/registerPaint(name, paintCtor)" data-dfn-type="argument" data-export id="dom-paintworkletglobalscope-registerpaint-name-paintctor-name"><code><c- g>name</c-></code><a class="self-link" href="#dom-paintworkletglobalscope-registerpaint-name-paintctor-name"></a></dfn>, <a data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#VoidFunction" id="ref-for-VoidFunction"><c- n>VoidFunction</c-></a> <dfn class="idl-code" data-dfn-for="PaintWorkletGlobalScope/registerPaint(name, paintCtor)" data-dfn-type="argument" data-export id="dom-paintworkletglobalscope-registerpaint-name-paintctor-paintctor"><code><c- g>paintCtor</c-></code><a class="self-link" href="#dom-paintworkletglobalscope-registerpaint-name-paintctor-paintctor"></a></dfn>);
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unrestricted-double" id="ref-for-idl-unrestricted-double"><c- b>unrestricted</c-> <c- b>double</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="PaintWorkletGlobalScope" data-dfn-type="attribute" data-export data-readonly data-type="unrestricted double" id="dom-paintworkletglobalscope-devicepixelratio"><code><c- g>devicePixelRatio</c-></code></dfn>;
};
</pre>
        <p><code
                class="idl"><a data-link-type="idl" href="#dictdef-paintrenderingcontext2dsettings" id="ref-for-dictdef-paintrenderingcontext2dsettings">PaintRenderingContext2DSettings</a></code>
            包含与绘画画布相关的渲染上下文的设置。<code
                class="idl"><a data-link-type="idl" href="#dictdef-paintrenderingcontext2dsettings" id="ref-for-dictdef-paintrenderingcontext2dsettings①">PaintRenderingContext2DSettings</a></code>
            提供了画布渲染上下文2D设置的支持子集。将来，它可能会扩展以支持绘画画布中的颜色管理。</p>
        <pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-paintrenderingcontext2dsettings"><code><c- g>PaintRenderingContext2DSettings</c-></code></dfn> {
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-default="true" data-dfn-for="PaintRenderingContext2DSettings" data-dfn-type="dict-member" data-export data-type="boolean " id="dom-paintrenderingcontext2dsettings-alpha"><code><c- g>alpha</c-></code></dfn> = <c- b>true</c->;
};
</pre>
        <div class="note" role="note">
            注意：类的结构应如下所示：
            <pre class="lang-javascript highlight"><c- a>class</c-> MyPaint <c- p>{</c->
    <c- k>static</c-> get inputProperties<c- p>()</c-> <c- p>{</c-> <c- k>return</c-> <c- p>[</c-><c- t>'--foo'</c-><c- p>];</c-> <c- p>}</c->
    <c- k>static</c-> get inputArguments<c- p>()</c-> <c- p>{</c-> <c- k>return</c-> <c- p>[</c-><c- t>'&lt;color>'</c-><c- p>];</c-> <c- p>}</c->
    <c- k>static</c-> get contextOptions<c- p>()</c-> <c- p>{</c-> <c- k>return</c-> <c- p>{</c->alpha<c- o>:</c-> <c- kc>true</c-><c- p>};</c-> <c- p>}</c->

    paint<c- p>(</c->ctx<c- p>,</c-> size<c- p>,</c-> styleMap<c- p>)</c-> <c- p>{</c->
        <c- c1>// 在此编写绘画代码。</c->
    <c- p>}</c->
<c- p>}</c-></pre>
        </div>
        <h2 class="heading settled" data-level="3" id="concepts"><span class="secno">3. </span><span
                class="content">概念</span><a class="self-link" href="#concepts"></a></h2>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="paint-definition">绘画定义</dfn>是一个
            <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#struct" id="ref-for-struct">结构体</a>，用于描述
            <code
                class="idl"><a data-link-type="idl" href="#paintworkletglobalscope" id="ref-for-paintworkletglobalscope③">PaintWorkletGlobalScope</a></code>
            所需的有关作者定义的<a class="production css" data-link-type="type"
                href="https://www.w3.org/TR/css-images-3/#typedef-image" id="ref-for-typedef-image②">&lt;image></a>的
            信息（可以通过<a class="production css" data-link-type="function" href="#funcdef-paint"
                id="ref-for-funcdef-paint">&lt;paint()></a>函数引用）。它包括以下内容：
        </p>
        <ul>
            <li data-md>
                <p><dfn class="dfn-paneled" data-dfn-for="paint definition" data-dfn-type="dfn" data-noexport
                        id="paint-definition-class-constructor">类构造函数</dfn>，即类的<a data-link-type="dfn"
                        href="https://tc39.github.io/ecma262/#sec-constructor" id="ref-for-sec-constructor">构造函数</a>。
                </p>
            <li data-md>
                <p><dfn class="dfn-paneled" data-dfn-for="paint definition" data-dfn-type="dfn" data-noexport
                        id="paint-definition-paint-function">绘画函数</dfn>，即绘画<a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-syntax-3/#function" id="ref-for-function">函数</a>类型的<a
                        data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-callback-function"
                        id="ref-for-dfn-callback-function">回调函数</a>。</p>
            <li data-md>
                <p><dfn class="dfn-paneled" data-dfn-for="paint definition" data-dfn-type="dfn" data-noexport
                        id="paint-definition-constructor-valid-flag">构造函数有效标志</dfn>。</p>
            <li data-md>
                <p><dfn class="dfn-paneled" data-dfn-for="paint definition" data-dfn-type="dfn" data-noexport
                        id="paint-definition-input-properties">输入属性</dfn>，即一个<code>DOMStrings</code>的<a
                        data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list">列表</a>。
                </p>
            <li data-md>
                <p>一个<dfn class="dfn-paneled" data-dfn-for="paint definition" data-dfn-type="dfn" data-noexport
                        id="paint-definition-paintrenderingcontext2dsettings-object">PaintRenderingContext2DSettings
                        对象</dfn>。</p>
        </ul>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="document-paint-definition">文档绘画定义</dfn>是一个
            <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#struct" id="ref-for-struct①">结构体</a>，用于描述
            <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document"
                id="ref-for-concept-document">文档</a>所需的有关作者定义的<a class="production css" data-link-type="type"
                href="https://www.w3.org/TR/css-images-3/#typedef-image"
                id="ref-for-typedef-image③">&lt;image></a>函数的信息（可以通过绘画函数引用）。它包括以下内容：
        </p>
        <ul>
            <li data-md>
                <p>一个<dfn class="dfn-paneled" data-dfn-for="document paint definition" data-dfn-type="dfn" data-noexport
                        id="document-paint-definition-input-properties">输入属性</dfn>，即一个<code>DOMStrings</code>的<a
                        data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list①">列表</a>。
                </p>
            <li data-md>
                <p>一个<dfn class="dfn-paneled" data-dfn-for="document paint definition" data-dfn-type="dfn" data-noexport
                        id="document-paint-definition-input-argument-syntaxes">输入参数语法</dfn>，即一个<a data-link-type="dfn"
                        href="https://infra.spec.whatwg.org/#list" id="ref-for-list②">列表</a>，包含
                    <a data-link-type="dfn" href="https://www.w3.org/TR/css-properties-values-api-1/#syntax-definition"
                        id="ref-for-syntax-definition">语法定义</a>。
                </p>
            <li data-md>
                <p>一个<dfn class="dfn-paneled" data-dfn-for="document paint definition" data-dfn-type="dfn" data-noexport
                        id="document-paint-definition-paintrenderingcontext2dsettings-object">PaintRenderingContext2DSettings
                        对象</dfn>。</p>
        </ul>
        <h2 class="heading settled" data-level="4" id="registering-custom-paint"><span class="secno">4. </span><span
                class="content">注册自定义绘画</span><a class="self-link" href="#registering-custom-paint"></a></h2>
        <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document"
                id="ref-for-concept-document①">文档</a>包含一个<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="document-paint-definitions">文档绘画定义</dfn>的<a data-link-type="dfn"
                href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map">映射</a>。最初
            该映射为空；当调用<code
                class="idl"><a data-link-type="idl" href="#dom-paintworkletglobalscope-registerpaint" id="ref-for-dom-paintworkletglobalscope-registerpaint①">registerPaint(name, paintCtor)</a></code>
            时会填充该映射。</p>
        <p><code
                class="idl"><a data-link-type="idl" href="#paintworkletglobalscope" id="ref-for-paintworkletglobalscope④">PaintWorkletGlobalScope</a></code>
            包含一个<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="paint-definitions">绘画定义</dfn>的<a
                data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map"
                id="ref-for-ordered-map①">映射</a>。最初该映射为空；当调用<code
                class="idl"><a data-link-type="idl" href="#dom-paintworkletglobalscope-registerpaint" id="ref-for-dom-paintworkletglobalscope-registerpaint②">registerPaint(name, paintCtor)</a></code>
            时会填充该映射。</p>
        <p><code
                class="idl"><a data-link-type="idl" href="#paintworkletglobalscope" id="ref-for-paintworkletglobalscope⑤">PaintWorkletGlobalScope</a></code>
            包含一个<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="paint-class-instances">绘画类实例</dfn>的<a
                data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map"
                id="ref-for-ordered-map②">映射</a>。最初该映射为空；当用户代理调用<a data-link-type="dfn" href="#draw-a-paint-image"
                id="ref-for-draw-a-paint-image">绘制绘画图像</a>时会填充该映射。</p>
        <p>用户代理可以随时处置并从映射中删除<a data-link-type="dfn" href="#paint-class-instances"
                id="ref-for-paint-class-instances">绘画类实例</a>映射中的实例。当某个<a class="production css"
                data-link-type="function" href="#funcdef-paint" id="ref-for-funcdef-paint①">&lt;paint()></a>函数不再被使用时，
            或者用户代理需要回收内存时，可以执行此操作。</p>
        <div class="mdn-anno wrapped">
            <button class="mdn-anno-btn"><b class="less-than-two-engines-flag"
                    title="该功能仅在少于两个现有引擎中可用。">⚠</b><span>MDN</span></button>
            <div class="feature">
                <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/PaintWorklet/registerPaint"
                        title="PaintWorkletGlobalScope.registerPaint() 是 PaintWorklet 接口的方法，允许在需要文件的CSS属性中程序化生成图像。">PaintWorklet/registerPaint</a>
                </p>
                <p class="less-than-two-engines-text">仅在一个现有引擎中可用。</p>
                <div class="support">
                    <span class="firefox no"><span>Firefox</span><span>无</span></span><span
                        class="safari no"><span>Safari</span><span>无</span></span><span
                        class="chrome yes"><span>Chrome</span><span>65+</span></span>
                    <hr>
                    <span class="opera no"><span>Opera</span><span>？</span></span><span
                        class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                    <hr>
                    <span class="edge no"><span>Edge (旧版)</span><span>无</span></span><span
                        class="ie no"><span>IE</span><span>无</span></span>
                    <hr>
                    <span class="firefox_android no"><span>Firefox for Android</span><span>无</span></span><span
                        class="safari_ios no"><span>iOS Safari</span><span>无</span></span><span
                        class="chrome_android yes"><span>Chrome for Android</span><span>65+</span></span><span
                        class="webview_android yes"><span>Android WebView</span><span>65+</span></span><span
                        class="samsunginternet_android yes"><span>Samsung Internet</span><span>9.0+</span></span><span
                        class="opera_android no"><span>Opera Mobile</span><span>？</span></span>
                </div>
            </div>
        </div>
        <div class="algorithm" data-algorithm="registerPaint(name, paintCtor)"
            data-algorithm-for="PaintWorkletGlobalScope">
            当调用<dfn class="dfn-paneled idl-code" data-dfn-for="PaintWorkletGlobalScope" data-dfn-type="method"
                data-export
                id="dom-paintworkletglobalscope-registerpaint"><code>registerPaint(<var>name</var>, <var>paintCtor</var>)</code></dfn>
            方法时，用户代理<em>必须</em>运行以下步骤：
            <ol>
                <li data-md>
                    <p>如果<var>name</var>是空字符串，<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw"
                            id="ref-for-dfn-throw">抛出</a><a data-link-type="dfn"
                            href="https://tc39.github.io/ecma262/#sec-native-error-types-used-in-this-standard-typeerror"
                            id="ref-for-sec-native-error-types-used-in-this-standard-typeerror">TypeError</a>并中止所有这些步骤。
                    </p>
                <li data-md>
                    <p>令<var>paintDefinitionMap</var>为<code
                            class="idl"><a data-link-type="idl" href="#paintworkletglobalscope" id="ref-for-paintworkletglobalscope⑥">PaintWorkletGlobalScope</a></code>的
                        <a data-link-type="dfn" href="#paint-definitions" id="ref-for-paint-definitions">绘画定义</a>映射。
                    </p>
                <li data-md>
                    <p>如果<var>paintDefinitionMap</var>[<var>name</var>] <a data-link-type="dfn"
                            href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists">存在</a>，<a
                            data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw"
                            id="ref-for-dfn-throw①">抛出</a>一个"<code
                            class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidmodificationerror" id="ref-for-invalidmodificationerror">InvalidModificationError</a></code>"
                        <code
                            class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException">DOMException</a></code>并中止所有这些步骤。
                    </p>
                <li data-md>
                    <p>令<var>inputProperties</var>为空的<code>sequence&lt;DOMString></code>。</p>
                <li data-md>
                    <p>令<var>inputPropertiesIterable</var>为<var>paintCtor</var>的<a data-link-type="dfn"
                            href="https://tc39.github.io/ecma262/#sec-get-o-p"
                            id="ref-for-sec-get-o-p">Get</a>(<var>paintCtor</var>, "inputProperties")的结果。</p>
                <li data-md>
                    <p>如果<var>inputPropertiesIterable</var>不是undefined，则将<var>inputProperties</var>设置为将
                        <var>inputPropertiesIterable</var>转换为<code>sequence&lt;DOMString></code>的结果。
                        如果抛出异常，重新抛出异常并中止所有这些步骤。
                    </p>
                <li data-md>
                    <p>过滤<var>inputProperties</var>，使其只包含<a data-link-type="dfn"
                            href="https://www.w3.org/TR/cssom-1/#supported-css-property"
                            id="ref-for-supported-css-property">支持的CSS属性</a>和<a data-link-type="dfn"
                            href="https://www.w3.org/TR/css-variables-1/#custom-property"
                            id="ref-for-custom-property">自定义属性</a>。</p>
            </ol>
            <p class="note" role="note"><span>注意：</span>输入属性getter提供的CSS属性列表可以是自定义属性或原生CSS属性。</p>
            <p class="note" role="note"><span>注意：</span>CSS属性列表可能包含简写形式。</p>
            <p class="note" role="note"><span>注意：</span>为了使绘画图像类具有向前兼容性，CSS属性列表还可以包含当前对用户代理无效的属性。例如
                <code>margin-bikeshed-property</code>。
            </p>
            <ol start="8">
                <li data-md>
                    <p>令<var>inputArguments</var>为空的<code>sequence&lt;DOMString></code>。</p>
                <li data-md>
                    <p>令<var>inputArgumentsIterable</var>为<var>paintCtor</var>的<a data-link-type="dfn"
                            href="https://tc39.github.io/ecma262/#sec-get-o-p"
                            id="ref-for-sec-get-o-p①">Get</a>(<var>paintCtor</var>, "inputArguments")的结果。</p>
                <li data-md>
                    <p>如果<var>inputArgumentsIterable</var>不是undefined，则将<var>inputArguments</var>设置为
                        将<var>inputArgumentsIterable</var>转换为<code>sequence&lt;DOMString></code>的结果。
                        如果抛出异常，重新抛出异常并中止所有这些步骤。</p>
                <li data-md>
                    <p>令<var>inputArgumentSyntaxes</var>为<a data-link-type="dfn"
                            href="https://infra.spec.whatwg.org/#list-empty" id="ref-for-list-empty">空的</a><a
                            data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list③">列表</a>。
                    </p>
                <li data-md>
                    <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate"
                            id="ref-for-list-iterate">对于</a><var>inputArguments</var>中的每个<var>item</var>，执行以下子步骤：</p>
                    <ol>
                        <li data-md>
                            <p>尝试从<var>item</var><a data-link-type="dfn"
                                    href="https://www.w3.org/TR/css-properties-values-api-1/#consume-a-syntax-definition"
                                    id="ref-for-consume-a-syntax-definition">获取语法定义</a>。
                                如果返回失败，<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw"
                                    id="ref-for-dfn-throw③">抛出</a>
                                <a data-link-type="dfn"
                                    href="https://tc39.github.io/ecma262/#sec-native-error-types-used-in-this-standard-typeerror"
                                    id="ref-for-sec-native-error-types-used-in-this-standard-typeerror①">TypeError</a>
                                并中止所有这些步骤。
                                否则，将<var>parsedSyntax</var>设置为返回的<a data-link-type="dfn"
                                    href="https://www.w3.org/TR/css-properties-values-api-1/#syntax-definition"
                                    id="ref-for-syntax-definition①">语法定义</a>。
                            </p>
                        <li data-md>
                            <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append"
                                    id="ref-for-list-append">将</a><var>parsedSyntax</var>附加到
                                <var>inputArgumentSyntaxes</var>。
                            </p>
                    </ol>
                <li data-md>
                    <p>令<var>contextOptionsValue</var>为<var>paintCtor</var>的<a data-link-type="dfn"
                            href="https://tc39.github.io/ecma262/#sec-get-o-p"
                            id="ref-for-sec-get-o-p②">Get</a>("contextOptions")的结果。</p>
                <li data-md>
                    <p>将<var>contextOptionsValue</var>转换为<code
                            class="idl"><a data-link-type="idl" href="#dictdef-paintrenderingcontext2dsettings" id="ref-for-dictdef-paintrenderingcontext2dsettings②">PaintRenderingContext2DSettings</a></code>的结果。
                        如果抛出异常，重新抛出异常并中止所有这些步骤。</p>
                    <p class="note" role="note"><span>注意：</span>将
                        <code>paintRenderingContext2DSettings.alpha</code>设置为<code>false</code>允许用户代理
                        除了进行"可见性"优化外，还可以对文本进行抗锯齿处理，例如，当绘画图像不透明时，不会在绘画图像后面绘制图像。
                    </p>
                <li data-md>
                    <p>如果<a data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-isconstructor"
                            id="ref-for-sec-isconstructor">IsConstructor</a>(<var>paintCtor</var>)的结果为false，<a
                            data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw"
                            id="ref-for-dfn-throw⑤">抛出</a><a data-link-type="dfn"
                            href="https://tc39.github.io/ecma262/#sec-native-error-types-used-in-this-standard-typeerror"
                            id="ref-for-sec-native-error-types-used-in-this-standard-typeerror②">TypeError</a>并中止
                        所有这些步骤。</p>
                <li data-md>
                    <p>令<var>prototype</var>为<var>paintCtor</var>的<a data-link-type="dfn"
                            href="https://tc39.github.io/ecma262/#sec-get-o-p"
                            id="ref-for-sec-get-o-p③">Get</a>("prototype")的结果。</p>
                <li data-md>
                    <p>如果<a data-link-type="dfn"
                            href="https://tc39.github.io/ecma262/#sec-ecmascript-data-types-and-values"
                            id="ref-for-sec-ecmascript-data-types-and-values">Type</a>(<var>prototype</var>)的结果不是
                        Object，<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw"
                            id="ref-for-dfn-throw⑥">抛出</a><a data-link-type="dfn"
                            href="https://tc39.github.io/ecma262/#sec-native-error-types-used-in-this-standard-typeerror"
                            id="ref-for-sec-native-error-types-used-in-this-standard-typeerror③">TypeError</a>并中止所有这些步骤。
                    </p>
                <li data-md>
                    <p>令<var>paintValue</var>为<var>prototype</var>的<a data-link-type="dfn"
                            href="https://tc39.github.io/ecma262/#sec-get-o-p"
                            id="ref-for-sec-get-o-p④">Get</a>("paint")的结果。</p>
                <li data-md>
                    <p>将<var>paintValue</var>转换为<a data-link-type="dfn"
                            href="https://www.w3.org/TR/css-syntax-3/#function" id="ref-for-function①">函数</a>的<a
                            data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-callback-function"
                            id="ref-for-dfn-callback-function①">回调函数</a>类型。重新抛出转换中的任何异常。</p>
                <li data-md>
                    <p>令<var>definition</var>为一个新的<a data-link-type="dfn" href="#paint-definition"
                            id="ref-for-paint-definition">绘画定义</a>，包括以下内容：</p>
                    <ul>
                        <li data-md>
                            <p><a data-link-type="dfn" href="#paint-definition-class-constructor"
                                    id="ref-for-paint-definition-class-constructor">类构造函数</a>为
                                <var>paintCtor</var>。
                            </p>
                        <li data-md>
                            <p><a data-link-type="dfn" href="#paint-definition-paint-function"
                                    id="ref-for-paint-definition-paint-function">绘画函数</a>为
                                <var>paint</var>。
                            </p>
                        <li data-md>
                            <p><a data-link-type="dfn" href="#paint-definition-constructor-valid-flag"
                                    id="ref-for-paint-definition-constructor-valid-flag">构造函数有效标志</a>
                                为<b>true</b>。</p>
                        <li data-md>
                            <p><a data-link-type="dfn" href="#paint-definition-input-properties"
                                    id="ref-for-paint-definition-input-properties">输入属性</a>为
                                <var>inputProperties</var>。
                            </p>
                        <li data-md>
                            <p><a data-link-type="dfn" href="#paint-definition-paintrenderingcontext2dsettings-object"
                                    id="ref-for-paint-definition-paintrenderingcontext2dsettings-object">PaintRenderingContext2DSettings
                                    对象</a>为<var>paintRenderingContext2DSettings</var>。</p>
                    </ul>
                <li data-md>
                    <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-set"
                            id="ref-for-map-set">将</a><var>paintDefinitionMap</var>[<var>name</var>]设置为
                        <var>definition</var>。
                    </p>
                <li data-md>
                    <p><a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task"
                            id="ref-for-queue-a-task">排队任务</a>以运行以下步骤：</p>
                    <ol>
                        <li data-md>
                            <p>令<var>documentPaintDefinitionMap</var>为关联的<a data-link-type="dfn"
                                    href="https://dom.spec.whatwg.org/#concept-document"
                                    id="ref-for-concept-document②">文档</a>的<a data-link-type="dfn"
                                    href="#document-paint-definitions" id="ref-for-document-paint-definitions">文档
                                    绘画定义</a>的<a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map"
                                    id="ref-for-ordered-map③">映射</a>。</p>
                        <li data-md>
                            <p>令<var>documentDefinition</var>为一个新的<a data-link-type="dfn"
                                    href="#document-paint-definition" id="ref-for-document-paint-definition">文档
                                    绘画定义</a>，包括以下内容：</p>
                            <ul>
                                <li data-md>
                                    <p><a data-link-type="dfn" href="#document-paint-definition-input-properties"
                                            id="ref-for-document-paint-definition-input-properties">输入属性</a>
                                        为<var>inputProperties</var>。</p>
                                <li data-md>
                                    <p><a data-link-type="dfn" href="#document-paint-definition-input-argument-syntaxes"
                                            id="ref-for-document-paint-definition-input-argument-syntaxes">输入参数语法</a>
                                        为<var>inputArgumentSyntaxes</var>。</p>
                                <li data-md>
                                    <p><a data-link-type="dfn"
                                            href="#document-paint-definition-paintrenderingcontext2dsettings-object"
                                            id="ref-for-document-paint-definition-paintrenderingcontext2dsettings-object">PaintRenderingContext2DSettings
                                            对象</a>为<var>paintRenderingContext2DSettings</var>。</p>
                            </ul>
                        <li data-md>
                            <p>如果<var>documentPaintDefinitionMap</var>[<var>name</var>] <a data-link-type="dfn"
                                    href="https://infra.spec.whatwg.org/#map-exists"
                                    id="ref-for-map-exists①">存在</a>，执行以下步骤：</p>
                            <ol>
                                <li data-md>
                                    <p>令<var>existingDocumentDefinition</var>为
                                        <var>documentPaintDefinitionMap</var>[<var>name</var>]的<a data-link-type="dfn"
                                            href="https://infra.spec.whatwg.org/#map-get"
                                            id="ref-for-map-get">get</a>结果。
                                    </p>
                                <li data-md>
                                    <p>如果<var>existingDocumentDefinition</var>为<code>"invalid"</code>，中止所有这些步骤。</p>
                                <li data-md>
                                    <p>如果<var>existingDocumentDefinition</var>和<var>documentDefinition</var>不相等
                                        （即<a data-link-type="dfn" href="#document-paint-definition-input-properties"
                                            id="ref-for-document-paint-definition-input-properties①">输入属性</a>、
                                        <a data-link-type="dfn"
                                            href="#document-paint-definition-input-argument-syntaxes"
                                            id="ref-for-document-paint-definition-input-argument-syntaxes①">输入参数语法</a>和
                                        <a data-link-type="dfn"
                                            href="#document-paint-definition-paintrenderingcontext2dsettings-object"
                                            id="ref-for-document-paint-definition-paintrenderingcontext2dsettings-object①">PaintRenderingContext2DSettings
                                            对象</a>不同），则：
                                    </p>
                                    <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-set"
                                            id="ref-for-map-set①">将</a>
                                        <var>documentPaintDefinitionMap</var>[<var>name</var>]设置为
                                        <code>"invalid"</code>。
                                    </p>
                                    <p>向调试控制台记录错误，指出相同类已使用不同的<code>inputProperties</code>、
                                        <code>inputArguments</code>或<code>paintRenderingContext2DSettings</code>注册。
                                    </p>
                            </ol>
                        <li data-md>
                            <p>否则，<a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-set"
                                    id="ref-for-map-set②">将</a><var>documentPaintDefinitionMap</var>[<var>name</var>]
                                设置为<var>documentDefinition</var>。</p>
                    </ol>
            </ol>
            <p class="note" role="note"><span>注意：</span>输入属性列表应该只查找一次，类没有机会动态更改其输入属性。</p>
            <p class="note" role="note"><span>注意：</span>在未来的规范版本中，作者可以有机会接收不同类型的RenderingContext。
                特别是作者可能希望使用WebGL渲染上下文来渲染3D效果。
                设置WebGL渲染上下文以将<code
                    class="idl"><a data-link-type="idl" href="#paintsize" id="ref-for-paintsize">PaintSize</a></code>
                和<code
                    class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-typed-om-1/#stylepropertymap" id="ref-for-stylepropertymap">StylePropertyMap</a></code>
                作为输入是很复杂的。</p>
        </div>
        <h2 class="heading settled" data-level="5" id="paint-notation"><span class="secno">5. </span><span
                class="content">绘画符号</span><a class="self-link" href="#paint-notation"></a></h2>
        <div class="mdn-anno wrapped after">
            <button class="mdn-anno-btn"><b class="less-than-two-engines-flag"
                    title="该功能仅在少于两个现有引擎中可用。">⚠</b><span>MDN</span></button>
            <div class="feature">
                <p><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/image/paint()"
                        title="paint() CSS 函数使用 PaintWorklet 生成一个 <image> 值。">image/paint()</a>
                </p>
                <p class="less-than-two-engines-text">仅在一个现有引擎中可用。</p>
                <div class="support">
                    <span class="firefox no"><span>Firefox</span><span>无</span></span><span
                        class="safari no"><span>Safari</span><span>无</span></span><span
                        class="chrome yes"><span>Chrome</span><span>65+</span></span>
                    <hr>
                    <span class="opera yes"><span>Opera</span><span>52+</span></span><span
                        class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                    <hr>
                    <span class="edge no"><span>Edge (旧版)</span><span>无</span></span><span
                        class="ie no"><span>IE</span><span>无</span></span>
                    <hr>
                    <span class="firefox_android no"><span>Firefox for Android</span><span>无</span></span><span
                        class="safari_ios no"><span>iOS Safari</span><span>无</span></span><span
                        class="chrome_android yes"><span>Chrome for Android</span><span>65+</span></span><span
                        class="webview_android yes"><span>Android WebView</span><span>65+</span></span><span
                        class="samsunginternet_android yes"><span>Samsung Internet</span><span>9.2+</span></span><span
                        class="opera_android yes"><span>Opera Mobile</span><span>47+</span></span>
                </div>
            </div>
        </div>
        <pre class="prod"><dfn class="dfn-paneled" data-dfn-type="function" data-export id="funcdef-paint">paint()</dfn> = paint( <a class="production" data-link-type="type" href="https://www.w3.org/TR/css-values-4/#typedef-ident" id="ref-for-typedef-ident">&lt;ident></a><a data-link-type="grammar" href="https://www.w3.org/TR/css-values-4/#comb-comma" id="ref-for-comb-comma">,</a> <a class="production" data-link-type="type" href="https://www.w3.org/TR/css-syntax-3/#typedef-declaration-value" id="ref-for-typedef-declaration-value">&lt;declaration-value></a><a data-link-type="grammar" href="https://www.w3.org/TR/css-values-4/#mult-opt" id="ref-for-mult-opt">?</a> )
</pre>
        <p><a class="production css" data-link-type="function" href="#funcdef-paint"
                id="ref-for-funcdef-paint②">&lt;paint()></a>函数是对<a class="production css" data-link-type="type"
                href="https://www.w3.org/TR/css-images-3/#typedef-image"
                id="ref-for-typedef-image④">&lt;image></a>类型的额外支持符号。
        </p>
        <div class="example" id="example-b92885ef">
            <a class="self-link" href="#example-b92885ef"></a>
            <pre class="lang-markup highlight"><c- p>&lt;</c-><c- f>style</c-><c- p>></c->
    <c- p>.</c-><c- nc>logo</c-> <c- p>{</c-> <c- k>background-image</c-><c- p>:</c-> <c- nf>paint</c-><c- p>(</c-><c- n>company</c-><c- g>-logo</c-><c- p>);</c-> <c- p>}</c->
    <c- p>.</c-><c- nc>chat-bubble</c-> <c- p>{</c-> <c- k>background-image</c-><c- p>:</c-> <c- nf>paint</c-><c- p>(</c-><c- n>chat</c-><c- g>-bubble</c-><c- p>,</c-> <c- kc>blue</c-><c- p>);</c-> <c- p>}</c->
<c- p>&lt;/</c-><c- f>style</c-><c- p>></c->
</pre>
        </div>
        <p>对于<a class="property" data-link-type="propdesc" href="https://www.w3.org/TR/css-ui-3/#propdef-cursor"
                id="ref-for-propdef-cursor">光标</a>属性，<a class="production css" data-link-type="function"
                href="#funcdef-paint" id="ref-for-funcdef-paint③">&lt;paint()></a>函数应被视为<a data-link-type="dfn"
                href="https://www.w3.org/TR/css-images-4/#invalid-image"
                id="ref-for-invalid-image">无效图像</a>，并回退到下一个支持的<a class="production css" data-link-type="type"
                href="https://www.w3.org/TR/css-images-3/#typedef-image" id="ref-for-typedef-image⑤">&lt;image></a>。</p>
        <p>在<a data-link-type="dfn" href="https://www.w3.org/TR/css-cascade-5/#computed-value"
                id="ref-for-computed-value">计算值</a>时间，<a class="production css" data-link-type="function"
                href="#funcdef-paint" id="ref-for-funcdef-paint④">&lt;paint()></a>函数
            <em>不需要</em>匹配由<code
                class="idl"><a data-link-type="idl" href="#dom-paintworkletglobalscope-registerpaint" id="ref-for-dom-paintworkletglobalscope-registerpaint③">registerPaint()</a></code>
            注册的语法。
            相反，当在<a data-link-type="dfn" href="#draw-a-paint-image"
                id="ref-for-draw-a-paint-image①">绘制绘画图像</a>时进行解析时，这将导致一个<a data-link-type="dfn"
                href="https://www.w3.org/TR/css-images-4/#invalid-image" id="ref-for-invalid-image①">无效图像</a>。
        </p>
        <h2 class="heading settled" data-level="6" id="2d-rendering-context"><span class="secno">6. </span><span
                class="content">2D 渲染上下文</span><a class="self-link" href="#2d-rendering-context"></a>
        </h2>
        <pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed①"><c- g>Exposed</c-></a>=<c- n>PaintWorklet</c->]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="paintrenderingcontext2d"><code><c- g>PaintRenderingContext2D</c-></code></dfn> {
};
<a data-link-type="idl-name" href="#paintrenderingcontext2d" id="ref-for-paintrenderingcontext2d"><c- n>PaintRenderingContext2D</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/canvas.html#canvasstate" id="ref-for-canvasstate"><c- n>CanvasState</c-></a>;
<a data-link-type="idl-name" href="#paintrenderingcontext2d" id="ref-for-paintrenderingcontext2d①"><c- n>PaintRenderingContext2D</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/canvas.html#canvastransform" id="ref-for-canvastransform"><c- n>CanvasTransform</c-></a>;
<a data-link-type="idl-name" href="#paintrenderingcontext2d" id="ref-for-paintrenderingcontext2d②"><c- n>PaintRenderingContext2D</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/canvas.html#canvascompositing" id="ref-for-canvascompositing"><c- n>CanvasCompositing</c-></a>;
<a data-link-type="idl-name" href="#paintrenderingcontext2d" id="ref-for-paintrenderingcontext2d③"><c- n>PaintRenderingContext2D</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/canvas.html#canvasimagesmoothing" id="ref-for-canvasimagesmoothing"><c- n>CanvasImageSmoothing</c-></a>;
<a data-link-type="idl-name" href="#paintrenderingcontext2d" id="ref-for-paintrenderingcontext2d④"><c- n>PaintRenderingContext2D</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/canvas.html#canvasfillstrokestyles" id="ref-for-canvasfillstrokestyles"><c- n>CanvasFillStrokeStyles</c-></a>;
<a data-link-type="idl-name" href="#paintrenderingcontext2d" id="ref-for-paintrenderingcontext2d⑤"><c- n>PaintRenderingContext2D</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/canvas.html#canvasshadowstyles" id="ref-for-canvasshadowstyles"><c- n>CanvasShadowStyles</c-></a>;
<a data-link-type="idl-name" href="#paintrenderingcontext2d" id="ref-for-paintrenderingcontext2d⑥"><c- n>PaintRenderingContext2D</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/canvas.html#canvasrect" id="ref-for-canvasrect"><c- n>CanvasRect</c-></a>;
<a data-link-type="idl-name" href="#paintrenderingcontext2d" id="ref-for-paintrenderingcontext2d⑦"><c- n>PaintRenderingContext2D</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/canvas.html#canvasdrawpath" id="ref-for-canvasdrawpath"><c- n>CanvasDrawPath</c-></a>;
<a data-link-type="idl-name" href="#paintrenderingcontext2d" id="ref-for-paintrenderingcontext2d⑧"><c- n>PaintRenderingContext2D</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/canvas.html#canvasdrawimage" id="ref-for-canvasdrawimage"><c- n>CanvasDrawImage</c-></a>;
<a data-link-type="idl-name" href="#paintrenderingcontext2d" id="ref-for-paintrenderingcontext2d⑨"><c- n>PaintRenderingContext2D</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/canvas.html#canvaspathdrawingstyles" id="ref-for-canvaspathdrawingstyles"><c- n>CanvasPathDrawingStyles</c-></a>;
<a data-link-type="idl-name" href="#paintrenderingcontext2d" id="ref-for-paintrenderingcontext2d①⓪"><c- n>PaintRenderingContext2D</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/canvas.html#canvaspath" id="ref-for-canvaspath"><c- n>CanvasPath</c-></a>;
</pre>
        <p class="note" role="note"><span>注意：</span><code
                class="idl"><a data-link-type="idl" href="#paintrenderingcontext2d" id="ref-for-paintrenderingcontext2d①①">PaintRenderingContext2D</a></code>
            实现了 <code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/canvas.html#canvasrenderingcontext2d" id="ref-for-canvasrenderingcontext2d">CanvasRenderingContext2D</a></code>
            API 的一个子集。
            它特别没有实现 <code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/canvas.html#canvasimagedata" id="ref-for-canvasimagedata">CanvasImageData</a></code>、
            <code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/canvas.html#canvasuserinterface" id="ref-for-canvasuserinterface">CanvasUserInterface</a></code>、
            <code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/canvas.html#canvastext" id="ref-for-canvastext">CanvasText</a></code>，
            或者<code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/canvas.html#canvastextdrawingstyles" id="ref-for-canvastextdrawingstyles">CanvasTextDrawingStyles</a></code>
            API。
        </p>
        <p><code
                class="idl"><a data-link-type="idl" href="#paintrenderingcontext2d" id="ref-for-paintrenderingcontext2d①②">PaintRenderingContext2D</a></code>
            对象有一个<dfn class="dfn-paneled" data-dfn-for="PaintRenderingContext2D" data-dfn-type="dfn" data-noexport
                id="paintrenderingcontext2d-output-bitmap">输出位图</dfn>。
            它在对象创建时被初始化。
            <a data-link-type="dfn" href="#paintrenderingcontext2d-output-bitmap"
                id="ref-for-paintrenderingcontext2d-output-bitmap">输出位图</a>的大小是它所渲染对象的<a data-link-type="dfn"
                href="https://www.w3.org/TR/css-images-3/#concrete-object-size"
                id="ref-for-concrete-object-size">具体对象大小</a>。
        </p>
        <p><code
                class="idl"><a data-link-type="idl" href="#paintrenderingcontext2d" id="ref-for-paintrenderingcontext2d①③">PaintRenderingContext2D</a></code>
            对象还具有一个<dfn class="dfn-paneled" data-dfn-for="PaintRenderingContext2D" data-dfn-type="dfn" data-noexport
                id="paintrenderingcontext2d-alpha">alpha</dfn>标志，
            该标志可以设置为 true 或 false。
            在创建上下文时，最初必须将其 alpha 标志设置为 true。
            当 <code
                class="idl"><a data-link-type="idl" href="#paintrenderingcontext2d" id="ref-for-paintrenderingcontext2d①④">PaintRenderingContext2D</a></code>
            对象的 alpha 标志设置为 false 时，
            它的 alpha 通道必须对所有像素固定为 1.0（完全不透明），并且尝试更改任何像素的 alpha 分量的操作必须被静默忽略。</p>
        <p><a data-link-type="dfn" href="#paintrenderingcontext2d-output-bitmap"
                id="ref-for-paintrenderingcontext2d-output-bitmap①">输出位图</a>的大小不一定代表用户代理在内部或渲染过程中使用的实际位图大小。
            例如，如果视觉视口被缩放，用户代理可能会在内部使用与坐标空间中的设备像素数量相对应的位图，以便生成高质量的渲染。</p>
        <p>此外，用户代理可能会记录已应用于
            <a data-link-type="dfn" href="#paintrenderingcontext2d-output-bitmap"
                id="ref-for-paintrenderingcontext2d-output-bitmap②">输出位图</a>的绘制操作顺序，
            以便用户代理随后可以在设备位图上以正确的分辨率进行绘制。
            这也允许用户代理在视觉视口缩放时重复使用相同的
            <a data-link-type="dfn" href="#paintrenderingcontext2d-output-bitmap"
                id="ref-for-paintrenderingcontext2d-output-bitmap③">输出位图</a>。
        </p>
        <p>在<code>"currentColor"</code>用作<code
                class="idl"><a data-link-type="idl" href="#paintrenderingcontext2d" id="ref-for-paintrenderingcontext2d①⑤">PaintRenderingContext2D</a></code>
            API 中的颜色时，它被视为不透明的黑色。</p>
        <div class="example" id="example-191bbc01">
            <a class="self-link" href="#example-191bbc01"></a> 以下代码将生成一个纯黑色的矩形。
            <pre class="lang-javascript highlight">registerPaint<c- p>(</c-><c- t>'currentcolor'</c-><c- p>,</c-> <c- a>class</c-> <c- p>{</c->
    paint<c- p>(</c->ctx<c- p>,</c-> size<c- p>)</c-> <c- p>{</c->
        ctx<c- p>.</c->fillStyle <c- o>=</c-> <c- t>'currentColor'</c-><c- p>;</c->
        ctx<c- p>.</c->fillRect<c- p>(</c-><c- mf>0</c-><c- p>,</c-> <c- mf>0</c-><c- p>,</c-> size<c- p>.</c->width<c- p>,</c-> size<c- p>.</c->height<c- p>);</c->
    <c- p>}</c->
<c- p>});</c->
</pre>
        </div>
        <div class="algorithm" data-algorithm="create a PaintRenderingContext2D object">
            当用户代理要为给定的 <var>width</var>、<var>height</var> 和 <var>paintRenderingContext2DSettings</var> <dfn
                class="dfn-paneled" data-dfn-type="dfn" data-noexport id="create-a-paintrenderingcontext2d-object">创建一个
                PaintRenderingContext2D 对象</dfn> 时，它<em>必须</em>运行以下步骤：
            <ol>
                <li data-md>
                    <p>创建一个新的 <code
                            class="idl"><a data-link-type="idl" href="#paintrenderingcontext2d" id="ref-for-paintrenderingcontext2d①⑥">PaintRenderingContext2D</a></code>。
                    </p>
                <li data-md>
                    <p><a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/canvas.html#concept-canvas-set-bitmap-dimensions"
                            id="ref-for-concept-canvas-set-bitmap-dimensions">设置位图尺寸</a>为上下文的 <a data-link-type="dfn"
                            href="#paintrenderingcontext2d-output-bitmap"
                            id="ref-for-paintrenderingcontext2d-output-bitmap④">输出位图</a>，将 <var>width</var> 和
                        <var>height</var> 四舍五入后的值设置为该位图的尺寸。
                    </p>
                <li data-md>
                    <p>将 <code
                            class="idl"><a data-link-type="idl" href="#paintrenderingcontext2d" id="ref-for-paintrenderingcontext2d①⑦">PaintRenderingContext2D</a></code>
                        的
                        <a data-link-type="dfn" href="#paintrenderingcontext2d-alpha"
                            id="ref-for-paintrenderingcontext2d-alpha">alpha</a> 标志设置为
                        <var>paintRenderingContext2DSettings</var> 的 <code
                            class="idl"><a data-link-type="idl" href="#dom-paintrenderingcontext2dsettings-alpha" id="ref-for-dom-paintrenderingcontext2dsettings-alpha">alpha</a></code>。
                    </p>
                <li data-md>
                    <p>返回新的 <code
                            class="idl"><a data-link-type="idl" href="#paintrenderingcontext2d" id="ref-for-paintrenderingcontext2d①⑧">PaintRenderingContext2D</a></code>。
                    </p>
            </ol>
            <p class="note" role="note"><span>注意：</span> 渲染上下文的初始状态在
                <a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/canvas.html#concept-canvas-set-bitmap-dimensions"
                    id="ref-for-concept-canvas-set-bitmap-dimensions①">设置位图尺寸</a>算法中设置，
                因为它调用了 <a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/canvas.html#reset-the-rendering-context-to-its-default-state"
                    id="ref-for-reset-the-rendering-context-to-its-default-state">重置渲染上下文为默认状态</a>，并清除了 <a
                    data-link-type="dfn" href="#paintrenderingcontext2d-output-bitmap"
                    id="ref-for-paintrenderingcontext2d-output-bitmap⑤">输出位图</a>。
            </p>
        </div>
        <h3 class="heading settled" data-level="6.1" id="drawing-a-cssimagevalue"><span class="secno">6.1. </span><span
                class="content">绘制 CSSImageValue</span><a class="self-link" href="#drawing-a-cssimagevalue"></a>
        </h3>
        <p><code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/canvas.html#canvasimagesource" id="ref-for-canvasimagesource">CanvasImageSource</a></code>
            typedef 被扩展以包括 <code
                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-typed-om-1/#cssimagevalue" id="ref-for-cssimagevalue">CSSImageValue</a></code>
            类型，用作图像源。</p>
        <p>对于使用 <code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/canvas.html#canvasdrawimage" id="ref-for-canvasdrawimage①">CanvasDrawImage</a></code>
            混入的接口：</p>
        <ul>
            <li data-md>
                <p>当 <code
                        class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/canvas.html#canvasimagesource" id="ref-for-canvasimagesource①">CanvasImageSource</a></code>
                    对象表示一个 <code
                        class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-typed-om-1/#cssimagevalue" id="ref-for-cssimagevalue①">CSSImageValue</a></code>，
                    应该将调用该值的底层图像算法的结果用作 <code
                        class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/canvas.html#dom-context-2d-drawimage" id="ref-for-dom-context-2d-drawimage">drawImage</a></code>
                    的源图像。
                </p>
        </ul>
        <p class="note" role="note"><span>注意：</span> 这部分内容应最终移动到 HTML 规范的 canvas 部分。
            请参阅 <a href="https://github.com/w3c/css-houdini-drafts/issues/819">问题 819</a>。</p>
        <h2 class="heading settled" data-level="7" id="drawing-an-image"><span class="secno">7. </span><span
                class="content">绘制图像</span><a class="self-link" href="#drawing-an-image"></a></h2>
        <p>如果 <a class="production css" data-link-type="function" href="#funcdef-paint"
                id="ref-for-funcdef-paint⑤">&lt;paint()></a> 函数生成的图像处于视觉视口内，用户代理<em>必须</em>显示由调用<a data-link-type="dfn"
                href="#draw-a-paint-image" id="ref-for-draw-a-paint-image②">绘制绘画图像</a>算法生成的图像输出。</p>
        <p class="note" role="note"><span>注意：</span> 用户代理不必每帧都为处于视觉视口内的 <a class="production css"
                data-link-type="function" href="#funcdef-paint" id="ref-for-funcdef-paint⑥">&lt;paint()></a> 函数运行 <a
                data-link-type="dfn" href="#draw-a-paint-image"
                id="ref-for-draw-a-paint-image③">绘制绘画图像</a>。它可以缓存结果（可能使用额外的失效步骤）来显示正确的图像输出。</p>
        <p class="note" role="note"><span>注意：</span> 用户代理可以选择延迟绘制视觉视口外的图像。</p>
        <div class="example" id="example-b382d1f5">
            <a class="self-link" href="#example-b382d1f5"></a> 如果作者在 <code>requestAnimationFrame</code> 内更新了样式，例如：
            <pre class="lang-javascript highlight">requestAnimationFrame<c- p>(</c-><c- a>function</c-><c- p>()</c-> <c- p>{</c->
    element<c- p>.</c->styleMap<c- p>.</c->set<c- p>(</c-><c- t>'--custom-prop-invalidates-paint'</c-><c- p>,</c-> <c- mf>42</c-><c- p>);</c->
<c- p>});</c->
</pre>
            <p>如果 <code>element</code> 处于视觉视口内，用户代理必须<a data-link-type="dfn" href="#draw-a-paint-image"
                    id="ref-for-draw-a-paint-image④">绘制绘画图像</a>并显示当前帧的结果。</p>
        </div>
        <p><a data-link-type="dfn" href="#draw-a-paint-image" id="ref-for-draw-a-paint-image⑤">绘制绘画图像</a>函数由用户代理在<a
                data-link-type="dfn" href="https://www.w3.org/TR/css-images-3/#object-size-negotiation"
                id="ref-for-object-size-negotiation">对象尺寸协商</a>算法期间调用，该算法负责渲染<a class="production css"
                data-link-type="type" href="https://www.w3.org/TR/css-images-3/#typedef-image"
                id="ref-for-typedef-image⑥">&lt;image></a>，<var>snappedConcreteObjectSize</var> 定义如下。令
            <var>concreteObjectSize</var> 为<a data-link-type="dfn"
                href="https://www.w3.org/TR/css-images-3/#concrete-object-size"
                id="ref-for-concrete-object-size①">具体对象大小</a>。<var>snappedConcreteObjectSize</var> 通常与
            <var>concreteObjectSize</var> 相同。但是，用户代理可以调整大小以便在像素边界上绘制。如果调整，用户代理应通过比例变化调整
            <var>snappedConcreteObjectSize</var>，以便 <a class="production css" data-link-type="function"
                href="#funcdef-paint" id="ref-for-funcdef-paint⑦">&lt;paint()></a> 函数可以相应地调整绘图。
        </p>
        <p>对于 <a data-link-type="dfn" href="https://www.w3.org/TR/css-images-3/#object-size-negotiation"
                id="ref-for-object-size-negotiation①">对象尺寸协商</a>算法，绘画图像没有<a data-link-type="dfn"
                href="https://www.w3.org/TR/css-images-3/#natural-dimensions" id="ref-for-natural-dimensions">自然尺寸</a>。
        </p>
        <p class="note" role="note"><span>注意：</span> 在未来的规范版本中，作者可以指定绘画图像的<a data-link-type="dfn"
                href="https://www.w3.org/TR/css-images-3/#natural-dimensions"
                id="ref-for-natural-dimensions①">自然尺寸</a>。这可能作为回调来暴露，允许作者定义静态<a data-link-type="dfn"
                href="https://www.w3.org/TR/css-images-3/#natural-dimensions"
                id="ref-for-natural-dimensions②">自然尺寸</a>，或者根据计算样式和大小变化动态更新<a data-link-type="dfn"
                href="https://www.w3.org/TR/css-images-3/#natural-dimensions" id="ref-for-natural-dimensions③">自然尺寸</a>。
        </p>
        <p><code class="idl"><a data-link-type="idl" href="#paintsize" id="ref-for-paintsize①">PaintSize</a></code>
            对象表示作者应该绘制的图像的大小。这个大小是用户代理给出的 <var>snappedConcreteObjectSize</var>。</p>
        <p class="note" role="note"><span>注意：</span> 请参阅<a
                href="https://www.w3.org/TR/css-images-3/#object-sizing-examples"><cite>CSS Images 3</cite> § 4.4
                CSS 对象大小的示例</a>，了解如何计算<a data-link-type="dfn"
                href="https://www.w3.org/TR/css-images-3/#concrete-object-size"
                id="ref-for-concrete-object-size②">具体对象大小</a>。</p>
        <p><a data-link-type="dfn" href="#draw-a-paint-image"
                id="ref-for-draw-a-paint-image⑥">绘制绘画图像</a>函数可以在任何时候由用户代理推测调用，使用任何<var>snappedConcreteObjectSize</var>。生成的图像不会显示。
        </p>
        <p class="note" role="note"><span>注意：</span> 用户代理可以使用任何启发式方法来推测 <var>snappedConcreteObjectSize</var>
            的可能未来值，例如推测大小保持不变。</p>
        <p class="note" role="note"><span>注意：</span> 虽然图像不会显示，但它仍然可以被缓存，后续的<a class="production css"
                data-link-type="function" href="#funcdef-paint"
                id="ref-for-funcdef-paint⑧">&lt;paint()></a>的调用可以使用缓存的图像。</p>
        <pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed②"><c- g>Exposed</c-></a>=<c- n>PaintWorklet</c->]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="paintsize"><code><c- g>PaintSize</c-></code></dfn> {
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double" id="ref-for-idl-double"><c- b>double</c-></a> <dfn class="idl-code" data-dfn-for="PaintSize" data-dfn-type="attribute" data-export data-readonly data-type="double" id="dom-paintsize-width"><code><c- g>width</c-></code><a class="self-link" href="#dom-paintsize-width"></a></dfn>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double" id="ref-for-idl-double①"><c- b>double</c-></a> <dfn class="idl-code" data-dfn-for="PaintSize" data-dfn-type="attribute" data-export data-readonly data-type="double" id="dom-paintsize-height"><code><c- g>height</c-></code><a class="self-link" href="#dom-paintsize-height"></a></dfn>;
};
</pre>
        <div class="algorithm" data-algorithm="draw a paint image">
            当用户代理希望为 <a class="production css" data-link-type="function" href="#funcdef-paint"
                id="ref-for-funcdef-paint⑨">&lt;paint()></a> 函数绘制图像时，将图像绘制到其适当的层级（由相关 CSS 属性定义），给定
            <var>snappedConcreteObjectSize</var>，它<em>必须</em>运行以下步骤：
            <ol>
                <li data-md>
                    <p>让 <var>paintFunction</var> 成为用户代理想要绘制的 <var>box</var> 上的 <a class="production css"
                            data-link-type="function" href="#funcdef-paint"
                            id="ref-for-funcdef-paint①⓪">&lt;paint()></a> 函数。</p>
                </li>
                <li data-md>
                    <p>让 <var>name</var> 成为 <var>paintFunction</var> 的第一个参数。</p>
                </li>
                <li data-md>
                    <p>让 <var>documentPaintDefinitionMap</var> 成为相关文档的 <a data-link-type="dfn"
                            href="#document-paint-definitions" id="ref-for-document-paint-definitions①">文档绘制定义</a> 映射。
                    </p>
                </li>
                <li data-md>
                    <p>如果 <var>documentPaintDefinitionMap</var>[<var>name</var>] 不存在，则图像输出为 <a data-link-type="dfn"
                            href="https://www.w3.org/TR/css-images-4/#invalid-image"
                            id="ref-for-invalid-image②">无效图像</a>，并中止所有步骤。</p>
                </li>
                <li data-md>
                    <p>让 <var>documentDefinition</var> 成为从 <var>documentPaintDefinitionMap</var>[<var>name</var>] 获取的结果。
                    </p>
                </li>
                <li data-md>
                    <p>如果 <var>documentDefinition</var> 是 <code>"invalid"</code>，则图像输出为 <a data-link-type="dfn"
                            href="https://www.w3.org/TR/css-images-4/#invalid-image"
                            id="ref-for-invalid-image③">无效图像</a>，并中止所有步骤。</p>
                </li>
                <li data-md>
                    <p>让 <var>inputArgumentSyntaxes</var> 成为 <var>documentDefinition</var> 的<a data-link-type="dfn"
                            href="#document-paint-definition-input-argument-syntaxes"
                            id="ref-for-document-paint-definition-input-argument-syntaxes②">输入参数语法</a>。</p>
                </li>
                <li data-md>
                    <p>让 <var>inputArguments</var> 成为 <var>paintFunction</var> 的所有参数的列表，<em>排除</em>“绘制名称”参数。</p>
                </li>
                <li data-md>
                    <p>如果 <var>inputArguments</var> 不符合 <var>inputArgumentSyntaxes</var> 提供的已注册语法，则图像输出为 <a
                            data-link-type="dfn" href="https://www.w3.org/TR/css-images-4/#invalid-image"
                            id="ref-for-invalid-image④">无效图像</a>，并中止所有步骤。</p>
                    <div class="example" id="example-a43f39b7">
                        <a class="self-link" href="#example-a43f39b7"></a> 该步骤可能在以下情况下失败：
                        <pre class="lang-javascript highlight"><c- c1>// paint.js</c->
registerPaint<c- p>(</c-><c- t>'failing-argument-syntax'</c-><c- p>,</c-> <c- a>class</c-> <c- p>{</c->
    <c- k>static</c-> get inputArguments<c- p>()</c-> <c- p>{</c-> <c- k>return</c-> <c- p>[</c-><c- t>'&lt;length>'</c-><c- p>];</c-> <c- p>}</c->
    paint<c- p>(</c->ctx<c- p>,</c-> size<c- p>,</c-> styleMap<c- p>,</c-> args<c- p>)</c-> <c- p>{</c-> <c- d>/* paint code here. */</c-> <c- p>}</c->
<c- p>});</c->
</pre>
                        <pre class="lang-markup highlight"><c- p>&lt;</c-><c- f>style</c-><c- p>></c->
    <c- p>.</c-><c- nc>example-1</c-> <c- p>{</c->
        <c- k>background-image</c-><c- p>:</c-> <c- nf>paint</c-><c- p>(</c-><c- n>failing</c-><c- g>-argument-syntax</c-><c- p>,</c-> <c- kc>red</c-><c- p>);</c->
    <c- p>}</c->
    <c- p>.</c-><c- nc>example-2</c-> <c- p>{</c->
        <c- k>background-image</c-><c- p>:</c-> <c- nf>paint</c-><c- p>(</c-><c- n>failing</c-><c- g>-argument-syntax</c-><c- p>,</c-> <c- mi>1</c-><c- b>px</c-><c- p>,</c-> <c- mi>2</c-><c- b>px</c-><c- p>);</c->
    <c- p>}</c->
<c- p>&lt;/</c-><c- f>style</c-><c- p>></c->
<c- p>&lt;</c-><c- f>div</c-> <c- e>class</c-><c- o>=</c-><c- s>example-1</c-><c- p>>&lt;/</c-><c- f>div</c-><c- p>></c->
<c- p>&lt;</c-><c- f>div</c-> <c- e>class</c-><c- o>=</c-><c- s>example-2</c-><c- p>>&lt;/</c-><c- f>div</c-><c- p>></c->
<c- p>&lt;</c-><c- f>script</c-><c- p>></c->
    CSS<c- p>.</c->paintWorklet<c- p>.</c->addModule<c- p>(</c-><c- t>'paint.js'</c-><c- p>);</c->
<c- p>&lt;/</c-><c- f>script</c-><c- p>></c->
</pre>
                        <p><code>example-1</code> 会产生一个 <a data-link-type="dfn"
                                href="https://www.w3.org/TR/css-images-4/#invalid-image"
                                id="ref-for-invalid-image⑤">无效图像</a>，因为 <code>"red"</code> 不符合注册的语法。</p>
                        <p><code>example-2</code> 会产生一个 <a data-link-type="dfn"
                                href="https://www.w3.org/TR/css-images-4/#invalid-image"
                                id="ref-for-invalid-image⑥">无效图像</a>，因为函数参数太多。</p>
                    </div>
                </li>
                <li data-md>
                    <p>让 <var>workletGlobalScope</var> 成为来自绘画 <code
                            class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/worklets.html#worklet" id="ref-for-worklet③">Worklet</a></code>
                        的 <code
                            class="idl"><a data-link-type="idl" href="#paintworkletglobalscope" id="ref-for-paintworkletglobalscope⑦">PaintWorkletGlobalScope</a></code>，遵循
                        <a href="#global-scope-selection">§ 7.1 全局范围选择</a>中的规则。
                    </p>
                    <p>用户代理<em>可以</em>在此时根据需要 <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/worklets.html#create-a-worklet-global-scope"
                            id="ref-for-create-a-worklet-global-scope">创建一个工作全局范围</a>。</p>
                </li>
                <li data-md>
                    <p>运行 <a data-link-type="dfn" href="#invoke-a-paint-callback"
                            id="ref-for-invoke-a-paint-callback">调用绘画回调</a> 给定
                        <var>name</var>、<var>inputArguments</var>、<var>snappedConcreteObjectSize</var>、<var>workletGlobalScope</var>，可选地<a
                            data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel"
                            id="ref-for-in-parallel">并行</a>运行。
                    </p>
                    <p class="note" role="note"><span>注意：</span>如果用户代理在 <a data-link-type="dfn"
                            href="#invoke-a-paint-callback" id="ref-for-invoke-a-paint-callback①">调用绘画回调</a> 时在<a
                            data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel"
                            id="ref-for-in-parallel①">并行</a>线程上运行，它应选择可用于该线程的绘画工作全局范围。</p>
                </li>
            </ol>
        </div>
        <div class="algorithm" data-algorithm="invoke a paint callback">
            当用户代理希望根据 <var>name</var>、<var>inputArguments</var>、<var>snappedConcreteObjectSize</var> 和
            <var>workletGlobalScope</var> 来<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="invoke-a-paint-callback">调用绘画回调</dfn>时，它<em>必须</em>运行以下步骤：
            <ol>
                <li data-md>
                    <p>让 <var>paintDefinitionMap</var> 成为 <var>workletGlobalScope</var> 的 <a data-link-type="dfn"
                            href="#paint-definitions" id="ref-for-paint-definitions①">绘画定义</a> 映射。</p>
                </li>
                <li data-md>
                    <p>如果 <var>paintDefinitionMap</var>[<var>name</var>] 不存在，运行以下步骤：</p>
                    <ol>
                        <li data-md>
                            <p><a data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task"
                                    id="ref-for-queue-a-task①">队列任务</a>运行以下步骤：</p>
                            <ol>
                                <li data-md>
                                    <p>让 <var>documentPaintDefinitionMap</var> 成为相关文档的 <a data-link-type="dfn"
                                            href="#document-paint-definitions"
                                            id="ref-for-document-paint-definitions②">文档绘画定义</a> 映射。</p>
                                </li>
                                <li data-md>
                                    <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-set"
                                            id="ref-for-map-set③">设置</a>
                                        <var>documentPaintDefinitionMap</var>[<var>name</var>] 为 <code>"invalid"</code>。
                                    </p>
                                </li>
                                <li data-md>
                                    <p>用户代理<em>应该</em>在调试控制台中记录一个错误，指出在所有 <code
                                            class="idl"><a data-link-type="idl" href="#paintworkletglobalscope" id="ref-for-paintworkletglobalscope⑧">PaintWorkletGlobalScope</a></code>
                                        中没有注册类。</p>
                                </li>
                            </ol>
                        </li>
                        <li data-md>
                            <p>让图像输出成为 <a data-link-type="dfn" href="https://www.w3.org/TR/css-images-4/#invalid-image"
                                    id="ref-for-invalid-image⑦">无效图像</a>，并中止所有这些步骤。</p>
                        </li>
                    </ol>
                    <p class="note" role="note"><span>注意：</span> 这处理了可能有一个绘画工作全局范围没有收到 <code
                            class="idl"><a data-link-type="idl" href="#dom-paintworkletglobalscope-registerpaint" id="ref-for-dom-paintworkletglobalscope-registerpaint④">registerPaint(name, paintCtor)</a></code>
                        的情况（然而另一个全局范围收到了）。在另一个全局范围上调用的绘画回调可能成功，但当调用 <a data-link-type="dfn" href="#draw-a-paint-image"
                            id="ref-for-draw-a-paint-image⑦">绘制一个绘画图像</a> 时，在后续帧上不会成功。</p>
                </li>
                <li data-md>
                    <p>让 <var>definition</var> 成为获取 <var>paintDefinitionMap</var>[<var>name</var>] 的结果。</p>
                </li>
                <li data-md>
                    <p>让 <var>paintClassInstanceMap</var> 成为 <var>workletGlobalScope</var> 的 <a data-link-type="dfn"
                            href="#paint-class-instances" id="ref-for-paint-class-instances①">绘画类实例</a> 映射。</p>
                </li>
                <li data-md>
                    <p>让 <var>paintInstance</var> 成为获取 <var>paintClassInstanceMap</var>[<var>name</var>] 的结果。如果
                        <var>paintInstance</var> 为 null，运行以下步骤：
                    </p>
                    <ol>
                        <li data-md>
                            <p>如果 <var>definition</var> 的 <a data-link-type="dfn"
                                    href="#paint-definition-constructor-valid-flag"
                                    id="ref-for-paint-definition-constructor-valid-flag①">构造函数有效标志</a> 为 false，图像输出为 <a
                                    data-link-type="dfn" href="https://www.w3.org/TR/css-images-4/#invalid-image"
                                    id="ref-for-invalid-image⑧">无效图像</a>，并中止所有这些步骤。</p>
                        </li>
                        <li data-md>
                            <p>让 <var>paintCtor</var> 成为 <var>definition</var> 的 <a data-link-type="dfn"
                                    href="#paint-definition-class-constructor"
                                    id="ref-for-paint-definition-class-constructor①">类构造函数</a>。</p>
                        </li>
                        <li data-md>
                            <p>让 <var>paintInstance</var> 成为通过 <a data-link-type="dfn"
                                    href="https://tc39.github.io/ecma262/#sec-construct"
                                    id="ref-for-sec-construct">构造</a>(<var>paintCtor</var>) 的结果。如果 <a
                                    data-link-type="dfn" href="https://tc39.github.io/ecma262/#sec-construct"
                                    id="ref-for-sec-construct①">构造</a>抛出异常，设置 <var>definition</var> 的 <a
                                    data-link-type="dfn" href="#paint-definition-constructor-valid-flag"
                                    id="ref-for-paint-definition-constructor-valid-flag②">构造函数有效标志</a> 为 false，图像输出为 <a
                                    data-link-type="dfn" href="https://www.w3.org/TR/css-images-4/#invalid-image"
                                    id="ref-for-invalid-image⑨">无效图像</a>，并中止所有这些步骤。</p>
                        </li>
                        <li data-md>
                            <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-set"
                                    id="ref-for-map-set④">设置</a> <var>paintClassInstanceMap</var>[<var>name</var>] 为
                                <var>paintInstance</var>。
                            </p>
                        </li>
                    </ol>
                </li>
                <li data-md>
                    <p>让 <var>inputProperties</var> 成为 <var>definition</var> 的 <a data-link-type="dfn"
                            href="#paint-definition-input-properties"
                            id="ref-for-paint-definition-input-properties①">输入属性</a>。</p>
                </li>
                <li data-md>
                    <p>让 <var>styleMap</var> 成为一个新的 <code
                            class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-typed-om-1/#stylepropertymapreadonly" id="ref-for-stylepropertymapreadonly">StylePropertyMapReadOnly</a></code>，只填充
                        <var>inputProperties</var> 中列出的属性的<a data-link-type="dfn"
                            href="https://www.w3.org/TR/css-cascade-5/#computed-value"
                            id="ref-for-computed-value①">计算值</a>。
                    </p>
                </li>
                <li data-md>
                    <p>让 <var>renderingContext</var> 成为通过 <a data-link-type="dfn"
                            href="#create-a-paintrenderingcontext2d-object"
                            id="ref-for-create-a-paintrenderingcontext2d-object">创建 PaintRenderingContext2D 对象</a> 给定：
                    </p>
                    <ul>
                        <li data-md>
                            <p>“width” - 由 <var>snappedConcreteObjectSize</var> 给定的宽度。</p>
                        </li>
                        <li data-md>
                            <p>“height” - 由 <var>snappedConcreteObjectSize</var> 给定的高度。</p>
                        </li>
                        <li data-md>
                            <p>“paintRenderingContext2DSettings” - 由 <var>definition</var> 给定的 <a data-link-type="dfn"
                                    href="#paint-definition-paintrenderingcontext2dsettings-object"
                                    id="ref-for-paint-definition-paintrenderingcontext2dsettings-object①">PaintRenderingContext2DSettings
                                    对象</a>。</p>
                        </li>
                    </ul>
                    <p class="note" role="note"><span>注意：</span> 在调用绘画函数之间不应重用 <var>renderingContext</var>。这意味着在
                        <var>renderingContext</var> 上没有存储数据或状态。
                    </p>
                    <p class="note" role="note"><span>注意：</span> 这也意味着在绘画方法完成后，<var>renderingContext</var> 实际上被“隔离”。</p>
                </li>
                <li data-md>
                    <p>让 <var>paintSize</var> 成为一个新的 <code
                            class="idl"><a data-link-type="idl" href="#paintsize" id="ref-for-paintsize②">PaintSize</a></code>，初始化为
                        <var>snappedConcreteObjectSize</var> 定义的宽度和高度。
                    </p>
                </li>
                <li data-md>
                    <p>在此阶段，用户代理可以重用先前调用的图像（如果 <var>paintSize</var>、<var>styleMap</var> 和 <var>inputArguments</var>
                        与先前调用的内容相同）。如果是这样，则让图像输出为该缓存图像并中止所有这些步骤。</p>
                    <div class="note" role="note">
                        在下面的示例中，<code>div-1</code> 和 <code>div-2</code> 都具有相同的 JavaScript
                        参数的绘制函数。用户代理可以缓存一次调用的结果，并将其用于两个元素。
                        <pre class="lang-javascript highlight"><c- c1>// paint.js</c->
registerPaint<c- p>(</c-><c- t>'simple'</c-><c- p>,</c-> <c- a>class</c-> <c- p>{</c->
    paint<c- p>(</c->ctx<c- p>,</c-> size<c- p>)</c-> <c- p>{</c->
        ctx<c- p>.</c->fillStyle <c- o>=</c-> <c- t>'green'</c-><c- p>;</c->
        ctx<c- p>.</c->fillRect<c- p>(</c-><c- mf>0</c-><c- p>,</c-> <c- mf>0</c-><c- p>,</c-> size<c- p>.</c->width<c- p>,</c-> size<c- p>.</c->height<c- p>);</c->
    <c- p>}</c->
<c- p>});</c->
</pre>
                        <pre class="lang-markup highlight"><c- p>&lt;</c-><c- f>style</c-><c- p>></c->
    <c- p>.</c-><c- nc>div-1</c-> <c- p>{</c->
        <c- k>width</c-><c- p>:</c-> <c- mi>50</c-><c- b>px</c-><c- p>;</c->
        <c- k>height</c-><c- p>:</c-> <c- mi>50</c-><c- b>px</c-><c- p>;</c->
        <c- k>background-image</c-><c- p>:</c-> <c- nf>paint</c-><c- p>(</c-><c- n>simple</c-><c- p>);</c->
    <c- p>}</c->
    <c- p>.</c-><c- nc>div-2</c-> <c- p>{</c->
        <c- k>width</c-><c- p>:</c-> <c- mi>100</c-><c- b>px</c-><c- p>;</c->
        <c- k>height</c-><c- p>:</c-> <c- mi>100</c-><c- b>px</c-><c- p>;</c->

        <c- k>background-size</c-><c- p>:</c-> <c- mi>50</c-><c- b>%</c-> <c- mi>50</c-><c- b>%</c-><c- p>;</c->
        <c- k>background-image</c-><c- p>:</c-> <c- nf>paint</c-><c- p>(</c-><c- n>simple</c-><c- p>);</c->
    <c- p>}</c->
<c- p>&lt;/</c-><c- f>style</c-><c- p>></c->
<c- p>&lt;</c-><c- f>div</c-> <c- e>class</c-><c- o>=</c-><c- s>div-1</c-><c- p>>&lt;/</c-><c- f>div</c-><c- p>></c->
<c- p>&lt;</c-><c- f>div</c-> <c- e>class</c-><c- o>=</c-><c- s>div-2</c-><c- p>>&lt;/</c-><c- f>div</c-><c- p>></c->
<c- p>&lt;</c-><c- f>script</c-><c- p>></c->
    CSS<c- p>.</c->paintWorklet<c- p>.</c->addModule<c- p>(</c-><c- t>'paint.js'</c-><c- p>);</c->
<c- p>&lt;/</c-><c- f>script</c-><c- p>></c->
</pre>
                    </div>
                <li data-md>
                    <p>让 <var>paintFunctionCallback</var> 成为 <var>definition</var> 的 <a data-link-type="dfn"
                            href="#paint-definition-paint-function" id="ref-for-paint-definition-paint-function①">paint
                            function</a>。</p>
                <li data-md>
                    <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#invoke-a-callback-function"
                            id="ref-for-invoke-a-callback-function">调用</a> <var>paintFunctionCallback</var>，参数包括
                        «<var>renderingContext</var>, <var>paintSize</var>, <var>styleMap</var>,
                        <var>inputArguments</var>»，并使用 <var>paintInstance</var> 作为 <a data-link-type="dfn"
                            href="https://webidl.spec.whatwg.org/#dfn-callback-this-value"
                            id="ref-for-dfn-callback-this-value">回调的 this 值</a>。
                    </p>
                    <p>如果 <var>paintFunctionCallback</var> 在可接受的时间内（由用户代理决定，即 "长时间运行的脚本"）未完成，用户代理<em>可以</em>终止脚本，将图像输出设为
                        <a data-link-type="dfn" href="https://www.w3.org/TR/css-images-4/#invalid-image"
                            id="ref-for-invalid-image①⓪">无效图像</a>，并中止所有这些步骤。
                    </p>
                    <p class="note" role="note"><span>注意：</span>用户代理可以在其调试工具中为开发者提供工具，显示绘制类的开销。用户代理在适当情况下也可以显示 "无响应的脚本"
                        对话框。</p>
                <li data-md>
                    <p>图像输出应从传递给方法的 <var>renderingContext</var> 中生成。</p>
                    <p>如果抛出 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw"
                            id="ref-for-dfn-throw⑦">异常</a>，则将图像输出设为 <a data-link-type="dfn"
                            href="https://www.w3.org/TR/css-images-4/#invalid-image"
                            id="ref-for-invalid-image①①">无效图像</a>。</p>
                </li>
            </ol>
            <p class="note" role="note"><span>注意：</span>生成的图像内容并非设计为可访问。作者可以通过标准的可访问性 API 传递任何有用的信息。</p>
        </div>
        <h3 class="heading settled" data-level="7.1" id="global-scope-selection"><span class="secno">7.1. </span><span
                class="content">全局作用域选择</span><a class="self-link" href="#global-scope-selection"></a>
        </h3>
        <p>当用户代理需要从 paint <code
                class="idl"><a data-link-type="idl" href="#paintworkletglobalscope" id="ref-for-paintworkletglobalscope⑨">PaintWorkletGlobalScope</a></code>
            的 <code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/worklets.html#worklet" id="ref-for-worklet⑤">Worklet</a></code>
            的
            <a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/worklets.html#concept-worklet-global-scopes"
                id="ref-for-concept-worklet-global-scopes①">全局作用域</a> <a data-link-type="dfn"
                href="https://infra.spec.whatwg.org/#list" id="ref-for-list⑤">列表</a>中选择一个 <em>时</em>，它<em>必须</em>：
        </p>
        <ul>
            <li data-md>
                <p>至少从两个 <code
                        class="idl"><a data-link-type="idl" href="#paintworkletglobalscope" id="ref-for-paintworkletglobalscope①⓪">PaintWorkletGlobalScope</a></code>
                    中选择，除非用户代理面临内存限制。</p>
            <li data-md>
                <p><em>不可</em>连续 1000 次重复使用同一个 <code
                        class="idl"><a data-link-type="idl" href="#paintworkletglobalscope" id="ref-for-paintworkletglobalscope①①">PaintWorkletGlobalScope</a></code>。
                </p>
                <p class="note" role="note"><span>注意：</span> 1000 次限制是一个较高的上限，随着时间的推移，这一限制可能会（向下）优化。</p>
        </ul>
        <p class="note" role="note"><span>注意：</span> 这些规则确保作者不会依赖于在全局对象或类上存储状态，参见 <a
                href="https://html.spec.whatwg.org/multipage/worklets.html#worklets-idempotent">关于工作线程规范中关于代码幂等性的讨论</a>。
        </p>
        <h2 class="heading settled" data-level="8" id="examples"><span class="secno">8. </span><span
                class="content">示例</span><a class="self-link" href="#examples"></a></h2>
        <h3 class="heading settled" data-level="8.1" id="example-1"><span class="secno">8.1. </span><span
                class="content">示例 1：彩色圆形</span><a class="self-link" href="#example-1"></a></h3>
        <p>下面的示例利用了 <a class="production css" data-link-type="function" href="#funcdef-paint"
                id="ref-for-funcdef-paint①①">&lt;paint()></a> 函数可以被动画化的特性。 例如，当下面的文本框获得焦点时，<code>--circle-color</code>
            属性将从 <code>deepskyblue</code> 过渡到 <code>purple</code>。</p>
        <p>这种功能不仅限于过渡，还适用于 CSS 动画和 Web Animations API。</p>
        <pre class="lang-markup highlight"><c- cp>&lt;!DOCTYPE html></c->
<c- p>&lt;</c-><c- f>style</c-><c- p>></c-> 
  <c- p>#</c-><c- nn>example</c-> <c- p>{</c-> 
    <c- g>--circle-color</c-><c- p>:</c-> <c- kc>deepskyblue</c-><c- p>;</c-> 

    <c- k>background-image</c-><c- p>:</c-> <c- nf>paint</c-><c- p>(</c-><c- kc>circle</c-><c- p>);</c-> 
    <c- k>font-family</c-><c- p>:</c-> <c- kc>sans-serif</c-><c- p>;</c-> 
    <c- k>font-size</c-><c- p>:</c-> <c- mi>36</c-><c- b>px</c-><c- p>;</c-> 
    <c- k>transition</c-><c- p>:</c-> <c- o>--</c-><c- kc>circle</c-><c- o>-</c-><c- kc>color</c-> <c- mi>1</c-><c- b>s</c-><c- p>;</c-> 
  <c- p>}</c-> 

  <c- p>#</c-><c- nn>example</c-><c- p>:</c-><c- nd>focus</c-> <c- p>{</c-> 
    <c- g>--circle-color</c-><c- p>:</c-> <c- kc>purple</c-><c- p>;</c-> 
  <c- p>}</c-> 
<c- p>&lt;/</c-><c- f>style</c-><c- p>></c-> 

<c- p>&lt;</c-><c- f>textarea</c-> <c- e>id</c-><c- o>=</c-><c- s>"example"</c-><c- p>></c-> 
  CSS is awesome. 
<c- p>&lt;/</c-><c- f>textarea</c-><c- p>></c-> 

<c- p>&lt;</c-><c- f>script</c-><c- p>></c-> 
    CSS<c- p>.</c->registerProperty<c- p>({</c-> 
      name<c- o>:</c-> <c- t>'--circle-color'</c-><c- p>,</c-> 
      syntax<c- o>:</c-> <c- t>'&lt;color>'</c-><c- p>,</c-> 
      initialValue<c- o>:</c-> <c- t>'black'</c-><c- p>,</c-> 
      inherits<c- o>:</c-> <c- kc>false</c-> 
    <c- p>});</c-> 
    CSS<c- p>.</c->paintWorklet<c- p>.</c->addModule<c- p>(</c-><c- t>'circle.js'</c-><c- p>);</c-> 
<c- p>&lt;/</c-><c- f>script</c-><c- p>></c-> 
</pre>
        <pre class="lang-javascript highlight"><c- c1>// circle.js</c-> 
registerPaint<c- p>(</c-><c- t>'circle'</c-><c- p>,</c-> <c- a>class</c-> <c- p>{</c-> 
  <c- k>static</c-> get inputProperties<c- p>()</c-> <c- p>{</c-> <c- k>return</c-> <c- p>[</c-><c- t>'--circle-color'</c-><c- p>];</c-> <c- p>}</c-> 
  paint<c- p>(</c->ctx<c- p>,</c-> geom<c- p>,</c-> properties<c- p>)</c-> <c- p>{</c-> 
    <c- c1>// 改变填充颜色。</c-> 
    <c- a>const</c-> color <c- o>=</c-> properties<c- p>.</c->get<c- p>(</c-><c- t>'--circle-color'</c-><c- p>);</c-> 
    ctx<c- p>.</c->fillStyle <c- o>=</c-> color<c- p>.</c->cssText<c- p>;</c-> 

    <c- c1>// 确定中心点和半径。</c-> 
    <c- a>const</c-> x <c- o>=</c-> geom<c- p>.</c->width <c- o>/</c-> <c- mf>2</c-><c- p>;</c-> 
    <c- a>const</c-> y <c- o>=</c-> geom<c- p>.</c->height <c- o>/</c-> <c- mf>2</c-><c- p>;</c-> 
    <c- a>const</c-> radius <c- o>=</c-> Math<c- p>.</c->min<c- p>(</c->x<c- p>,</c-> y<c- p>);</c-> 

    <c- c1>// 绘制圆形 \o/</c-> 
    ctx<c- p>.</c->beginPath<c- p>();</c->
    ctx<c- p>.</c->arc<c- p>(</c->x<c- p>,</c-> y<c- p>,</c-> radius<c- p>,</c-> <c- mf>0</c-><c- p>,</c-> <c- mf>2</c-> <c- o>*</c-> Math<c- p>.</c->PI<c- p>,</c-> <c- kc>false</c-><c- p>);</c-> 
    ctx<c- p>.</c->fill<c- p>();</c-> 
  <c- p>}</c-> 
<c- p>});</c-> 
</pre>
        <h3 class="heading settled" data-level="8.2" id="example-2"><span class="secno">8.2. </span><span
                class="content">示例 2：图片占位符</span><a class="self-link" href="#example-2"></a></h3>
        <p>作者可以使用 paint 在图片加载时绘制一个占位符图片。</p>
        <pre class="lang-markup highlight"><c- cp>&lt;!DOCTYPE html></c->
<c- p>&lt;</c-><c- f>style</c-><c- p>></c->
<c- p>#</c-><c- nn>example</c-> <c- p>{</c->
    <c- g>--image</c-><c- p>:</c-> url<c- p>(</c-><c- t>'#someUrlWhichIsLoading'</c-><c- p>);</c->
    <c- k>background-image</c-><c- p>:</c-> <c- nf>paint</c-><c- p>(</c-><c- n>image</c-><c- g>-with-placeholder</c-><c- p>);</c->
<c- p>}</c->
<c- p>&lt;/</c-><c- f>style</c-><c- p>></c->

<c- p>&lt;</c-><c- f>div</c-> <c- e>id</c-><c- o>=</c-><c- s>"example"</c-><c- p>>&lt;/</c-><c- f>div</c-><c- p>></c->

<c- p>&lt;</c-><c- f>script</c-><c- p>></c->
    CSS<c- p>.</c->registerProperty<c- p>({</c->
        name<c- o>:</c-> <c- t>'--image'</c-><c- p>,</c->
        syntax<c- o>:</c-> <c- t>'&lt;image> | none'</c-><c- p>,</c->
        initialValue<c- o>:</c-> <c- t>'none'</c-><c- p>,</c->
    <c- p>});</c->
    CSS<c- p>.</c->paintWorklet<c- p>.</c->addModule<c- p>(</c-><c- t>'image-placeholder.js'</c-><c- p>);</c->
<c- p>&lt;/</c-><c- f>script</c-><c- p>></c->
</pre>
        <pre class="lang-javascript highlight"><c- c1>// image-placeholder.js</c->
registerPaint<c- p>(</c-><c- t>'image-with-placeholder'</c-><c- p>,</c-> <c- a>class</c-> <c- p>{</c->
    <c- k>static</c-> get inputProperties<c- p>()</c-> <c- p>{</c-> <c- k>return</c-> <c- p>[</c-><c- t>'--image'</c-><c- p>];</c-> <c- p>}</c->
    paint<c- p>(</c->ctx<c- p>,</c-> geom<c- p>,</c-> properties<c- p>)</c-> <c- p>{</c->
        <c- a>const</c-> img <c- o>=</c-> properties<c- p>.</c->get<c- p>(</c-><c- t>'--image'</c-><c- p>);</c->

        <c- k>switch</c-> <c- p>(</c->img<c- p>.</c->state<c- p>)</c-> <c- p>{</c->
            <c- k>case</c-> <c- t>'ready'</c-><c- o>:</c->
                <c- c1>// The image is loaded! Draw the image.</c->
                ctx<c- p>.</c->drawImage<c- p>(</c->img<c- p>,</c-> <c- mf>0</c-><c- p>,</c-> <c- mf>0</c-><c- p>,</c-> geom<c- p>.</c->width<c- p>,</c-> geom<c- p>.</c->height<c- p>);</c->
                <c- k>break</c-><c- p>;</c->
            <c- k>case</c-> <c- t>'pending'</c-><c- o>:</c->
                <c- c1>// The image is loading, draw some mountains.</c->
                drawMountains<c- p>(</c->ctx<c- p>);</c->
                <c- k>break</c-><c- p>;</c->
            <c- k>case</c-> <c- t>'invalid'</c-><c- o>:</c->
            <c- k>default</c-><c- o>:</c->
                <c- c1>// The image is invalid (e.g. it didn’t load), draw a sad face.</c->
                drawSadFace<c- p>(</c->ctx<c- p>);</c->
                <c- k>break</c-><c- p>;</c->
        <c- p>}</c->
    <c- p>}</c->
<c- p>});</c->
</pre>
        <h3 class="heading settled" data-level="8.3" id="example-3"><span class="secno">8.3. </span><span
                class="content">示例 3：弧形</span><a class="self-link" href="#example-3"></a></h3>
        <pre class="lang-markup highlight"><c- cp>&lt;!DOCTYPE html></c->
<c- p>&lt;</c-><c- f>style</c-><c- p>></c->
<c- p>#</c-><c- nn>example</c-> <c- p>{</c->
  <c- k>width</c-><c- p>:</c-> <c- mi>200</c-><c- b>px</c-><c- p>;</c->
  <c- k>height</c-><c- p>:</c-> <c- mi>200</c-><c- b>px</c-><c- p>;</c->

  <c- k>background-image</c-><c- p>:</c->
    <c- nf>paint</c-><c- p>(</c-><c- n>arc</c-><c- p>,</c-> <c- kc>purple</c-><c- p>,</c-> <c- mf>0.4</c-><c- b>turn</c-><c- p>,</c-> <c- mf>0.8</c-><c- b>turn</c-><c- p>,</c-> <c- mi>40</c-><c- b>px</c-><c- p>,</c-> <c- mi>15</c-><c- b>px</c-><c- p>),</c->
    <c- nf>paint</c-><c- p>(</c-><c- n>arc</c-><c- p>,</c-> <c- kc>blue</c-><c- p>,</c-> <c- g>-20deg</c-><c- p>,</c-> <c- mi>170</c-><c- b>deg</c-><c- p>,</c-> <c- mi>30</c-><c- b>px</c-><c- p>,</c-> <c- mi>20</c-><c- b>px</c-><c- p>),</c->
    <c- nf>paint</c-><c- p>(</c-><c- n>arc</c-><c- p>,</c-> <c- kc>red</c-><c- p>,</c-> <c- mi>45</c-><c- b>deg</c-><c- p>,</c-> <c- mi>220</c-><c- b>deg</c-><c- p>,</c-> <c- mi>50</c-><c- b>px</c-><c- p>,</c-> <c- mi>10</c-><c- b>px</c-><c- p>);</c->
<c- p>}</c->
<c- p>&lt;/</c-><c- f>style</c-><c- p>></c->

<c- p>&lt;</c-><c- f>div</c-> <c- e>id</c-><c- o>=</c-><c- s>"example"</c-><c- p>>&lt;/</c-><c- f>div</c-><c- p>></c->

<c- p>&lt;</c-><c- f>script</c-><c- p>></c->
    CSS<c- p>.</c->paintWorklet<c- p>.</c->addModule<c- p>(</c-><c- t>'arc.js'</c-><c- p>);</c->
<c- p>&lt;/</c-><c- f>script</c-><c- p>></c->
</pre>
        <pre class="lang-javascript highlight"><c- c1>// arc.js</c->
registerPaint<c- p>(</c-><c- t>'arc'</c-><c- p>,</c-> <c- a>class</c-> <c- p>{</c->
  <c- k>static</c-> get inputArguments<c- p>()</c-> <c- p>{</c->
    <c- k>return</c-> <c- p>[</c->
      <c- t>'&lt;color>'</c-><c- p>,</c->
      <c- t>'&lt;angle>'</c-><c- p>,</c->  <c- c1>// startAngle</c->
      <c- t>'&lt;angle>'</c-><c- p>,</c->  <c- c1>// endAngle</c->
      <c- t>'&lt;length>'</c-><c- p>,</c-> <c- c1>// radius</c->
      <c- t>'&lt;length>'</c-><c- p>,</c-> <c- c1>// lineWidth</c->
    <c- p>];</c->
  <c- p>}</c->

  paint<c- p>(</c->ctx<c- p>,</c-> geom<c- p>,</c-> _<c- p>,</c-> args<c- p>)</c-> <c- p>{</c->
    ctx<c- p>.</c->strokeStyle <c- o>=</c-> args<c- p>[</c-><c- mf>0</c-><c- p>].</c->cssText<c- p>;</c->

    <c- c1>// 确定中心点。</c->
    <c- a>const</c-> x <c- o>=</c-> geom<c- p>.</c->width <c- o>/</c-> <c- mf>2</c-><c- p>;</c->
    <c- a>const</c-> y <c- o>=</c-> geom<c- p>.</c->height <c- o>/</c-> <c- mf>2</c-><c- p>;</c->

    <c- c1>// 将起始角度和结束角度转换为弧度。</c->
    <c- a>const</c-> startAngle <c- o>=</c-> <c- k>this</c-><c- p>.</c->convertAngle<c- p>(</c->args<c- p>[</c-><c- mf>1</c-><c- p>])</c-> <c- o>-</c-> Math<c- p>.</c->PI <c- o>/</c-> <c- mf>2</c-><c- p>;</c->
    <c- a>const</c-> endAngle <c- o>=</c-> <c- k>this</c-><c- p>.</c->convertAngle<c- p>(</c->args<c- p>[</c-><c- mf>2</c-><c- p>])</c-> <c- o>-</c-> Math<c- p>.</c->PI <c- o>/</c-> <c- mf>2</c-><c- p>;</c->

    <c- c1>// 将半径和线宽转换为像素。</c->
    <c- a>const</c-> radius <c- o>=</c-> <c- k>this</c-><c- p>.</c->convertLength<c- p>(</c->args<c- p>[</c-><c- mf>3</c-><c- p>]);</c->
    <c- a>const</c-> lineWidth <c- o>=</c-> <c- k>this</c-><c- p>.</c->convertLength<c- p>(</c->args<c- p>[</c-><c- mf>4</c-><c- p>]);</c->

    ctx<c- p>.</c->lineWidth <c- o>=</c-> lineWidth<c- p>;</c->

    ctx<c- p>.</c->beginPath<c- p>();</c->
    ctx<c- p>.</c->arc<c- p>(</c->x<c- p>,</c-> y<c- p>,</c-> radius<c- p>,</c-> startAngle<c- p>,</c-> endAngle<c- p>,</c-> <c- kc>false</c-><c- p>);</c->
    ctx<c- p>.</c->stroke<c- p>();</c->
  <c- p>}</c->

  convertAngle<c- p>(</c->angle<c- p>)</c-> <c- p>{</c->
    <c- k>switch</c-> <c- p>(</c->angle<c- p>.</c->unit<c- p>)</c-> <c- p>{</c->
      <c- k>case</c-> <c- t>'deg'</c-><c- o>:</c->
        <c- k>return</c-> angle<c- p>.</c->value <c- o>*</c-> Math<c- p>.</c->PI <c- o>/</c-> <c- mf>180</c-><c- p>;</c->
      <c- k>case</c-> <c- t>'rad'</c-><c- o>:</c->
        <c- k>return</c-> angle<c- p>.</c->value<c- p>;</c->
      <c- k>case</c-> <c- t>'grad'</c-><c- o>:</c->
        <c- k>return</c-> angle<c- p>.</c->value <c- o>*</c-> Math<c- p>.</c->PI <c- o>/</c-> <c- mf>200</c-><c- p>;</c->
      <c- k>case</c-> <c- t>'turn'</c-><c- o>:</c->
        <c- k>return</c-> angle<c- p>.</c->value <c- o>*</c-> Math<c- p>.</c->PI <c- o>/</c-> <c- mf>0.5</c-><c- p>;</c->
      <c- k>default</c-><c- o>:</c->
        <c- k>throw</c-> Error<c- p>(</c-><c- sb>`Unknown angle unit: </c-><c- si>${</c->angle<c- p>.</c->unit<c- si>}</c-><c- sb>`</c-><c- p>);</c->
    <c- p>}</c->
  <c- p>}</c->

  convertLength<c- p>(</c->length<c- p>)</c-> <c- p>{</c->
    <c- k>switch</c-> <c- p>(</c->length<c- p>.</c->type<c- p>)</c-> <c- p>{</c->
      <c- k>case</c-> <c- t>'px'</c-><c- o>:</c->
        <c- k>return</c-> length<c- p>.</c->value<c- p>;</c->
      <c- k>default</c-><c- o>:</c->
        <c- k>throw</c-> Error<c- p>(</c-><c- sb>`Unkown length type: </c-><c- si>${</c->length<c- p>.</c->type<c- si>}</c-><c- sb>`</c-><c- p>);</c->
    <c- p>}</c->
  <c- p>}</c->
<c- p>});</c->
</pre>
        <h3 class="heading settled" data-level="8.4" id="example-4"><span class="secno">8.4. </span><span
                class="content">示例 4：不同的颜色（基于大小）</span><a class="self-link" href="#example-4"></a></h3>
        <pre class="lang-markup highlight"><c- p>&lt;</c-><c- f>h1</c-><c- p>></c->
    Heading 1
<c- p>&lt;/</c-><c- f>h1</c-><c- p>></c->
<c- p>&lt;</c-><c- f>h1</c-><c- p>></c->
    Another heading
<c- p>&lt;/</c-><c- f>h1</c-><c- p>></c->

<c- p>&lt;</c-><c- f>style</c-><c- p>></c->
<c- f>h1</c-> <c- p>{</c->
    <c- k>background-image</c-><c- p>:</c-> <c- nf>paint</c-><c- p>(</c-><c- n>heading</c-><c- g>-color</c-><c- p>);</c->
<c- p>}</c->
<c- p>&lt;/</c-><c- f>style</c-><c- p>></c->

<c- p>&lt;</c-><c- f>script</c-><c- p>></c->
    CSS<c- p>.</c->paintWorklet<c- p>.</c->addModule<c- p>(</c-><c- t>'heading-color.js'</c-><c- p>);</c->
<c- p>&lt;/</c-><c- f>script</c-><c- p>></c->
</pre>
        <pre class="lang-javascript highlight"><c- c1>// heading-color.js</c->
registerPaint<c- p>(</c-><c- t>'heading-color'</c-><c- p>,</c-> <c- a>class</c-> <c- p>{</c->
    <c- k>static</c-> get inputProperties<c- p>()</c-> <c- p>{</c-> <c- k>return</c-> <c- p>[];</c-> <c- p>}</c->
    paint<c- p>(</c->ctx<c- p>,</c-> geom<c- p>,</c-> properties<c- p>)</c-> <c- p>{</c->
        <c- c1>// 根据图像的宽度和高度选择颜色。</c-> 
        <c- a>const</c-> width <c- o>=</c-> geom<c- p>.</c->width<c- p>;</c->
        <c- a>const</c-> height <c- o>=</c-> geom<c- p>.</c->height<c- p>;</c->
        <c- a>const</c-> color <c- o>=</c-> colorArray<c- p>[(</c->width <c- o>*</c-> height<c- p>)</c-> <c- o>%</c-> colorArray<c- p>.</c->length<c- p>];</c->

        <c- c1>// 仅绘制一个实心图像。</c-> 
        ctx<c- p>.</c->fillStyle <c- o>=</c-> color<c- p>;</c->
        ctx<c- p>.</c->fillRect<c- p>(</c-><c- mf>0</c-><c- p>,</c-> <c- mf>0</c-><c- p>,</c-> width<c- p>,</c-> height<c- p>);</c->
    <c- p>}</c->
<c- p>});</c->
</pre>
        <h3 class="heading settled" data-level="8.5" id="example-5"><span class="secno">8.5. </span><span
                class="content">示例 5：在元素区域外绘制</span><a class="self-link" href="#example-5"></a></h3>
        <p>可以通过使用 <a class="property" data-link-type="propdesc"
                href="https://www.w3.org/TR/css-backgrounds-3/#propdef-border-image"
                id="ref-for-propdef-border-image">border-image</a> 属性在元素的区域外进行绘制。</p>
        <pre class="lang-markup highlight"><c- p>&lt;</c-><c- f>style</c-><c- p>></c->
<c- p>#</c-><c- nn>overdraw</c-> <c- p>{</c->
    <c- g>--border-width</c-><c- p>:</c-> <c- mi>10</c-><c- p>;</c->

    <c- k>border-style</c-><c- p>:</c-> <c- kc>solid</c-><c- p>;</c->
    <c- k>border-width</c-><c- p>:</c-> calc<c- p>(</c-><c- nf>var</c-><c- p>(</c-><c- g>--border-width</c-><c- p>)</c-> <c- o>*</c-> <c- mi>1</c-><c- b>px</c-><c- p>);</c->

    <c- k>border-image-source</c-><c- p>:</c-> <c- nf>paint</c-><c- p>(</c-><c- n>overdraw</c-><c- p>);</c->
    <c- k>border-image-slice</c-><c- p>:</c-> <c- mi>0</c-> <c- kc>fill</c-><c- p>;</c->
    <c- k>border-image-outset</c-><c- p>:</c-> calc<c- p>(</c-><c- nf>var</c-><c- p>(</c-><c- g>--border-width</c-><c- p>)</c-> <c- o>*</c-> <c- mi>1</c-><c- b>px</c-><c- p>);</c->

    <c- k>width</c-><c- p>:</c-> <c- mi>200</c-><c- b>px</c-><c- p>;</c->
    <c- k>height</c-><c- p>:</c-> <c- mi>200</c-><c- b>px</c-><c- p>;</c->
<c- p>}</c->
<c- p>&lt;/</c-><c- f>style</c-><c- p>></c->
<c- p>&lt;</c-><c- f>div</c-> <c- e>id</c-><c- o>=</c-><c- s>"overdraw"</c-><c- p>>&lt;/</c-><c- f>div</c-><c- p>></c->
<c- p>&lt;</c-><c- f>script</c-><c- p>></c->
    CSS<c- p>.</c->paintWorklet<c- p>.</c->addModule<c- p>(</c-><c- t>'overdraw.js'</c-><c- p>);</c->
<c- p>&lt;/</c-><c- f>script</c-><c- p>></c->
</pre>
        <pre class="lang-javascript highlight"><c- c1>// overdraw.js</c->
registerPaint<c- p>(</c-><c- t>'overdraw'</c-><c- p>,</c-> <c- a>class</c-> <c- p>{</c->
    <c- k>static</c-> get inputProperties<c- p>()</c-> <c- p>{</c-> <c- k>return</c-> <c- p>[</c-><c- t>'--border-width'</c-><c- p>];</c-> <c- p>}</c->
    paint<c- p>(</c->ctx<c- p>,</c-> geom<c- p>,</c-> properties<c- p>)</c-> <c- p>{</c->
        <c- a>const</c-> borderWidth <c- o>=</c-> parseInt<c- p>(</c->properties<c- p>.</c->get<c- p>(</c-><c- t>'--border-width'</c-><c- p>));</c->
        ctx<c- p>.</c->shadowColor <c- o>=</c-> <c- t>'rgba(0,0,0,0.25)'</c-><c- p>;</c->
        ctx<c- p>.</c->shadowBlur <c- o>=</c-> borderWidth<c- p>;</c->

        ctx<c- p>.</c->fillStyle <c- o>=</c-> <c- t>'rgba(255, 255, 255, 1)'</c-><c- p>;</c->
        ctx<c- p>.</c->fillRect<c- p>(</c->borderWidth<c- p>,</c->
                     borderWidth<c- p>,</c->
                     geom<c- p>.</c->width <c- o>-</c-> <c- mf>2</c-> <c- o>*</c-> borderWidth<c- p>,</c->
                     geom<c- p>.</c->height <c- o>-</c-> <c- mf>2</c-> <c- o>*</c-> borderWidth<c- p>);</c->
    <c- p>}</c->
<c- p>});</c->
</pre>
        <h2 class="heading settled" data-level="9" id="security-considerations"><span class="secno">9. </span><span
                class="content">安全性考虑</span><a class="self-link" href="#security-considerations"></a>
        </h2>
        <p>这些功能没有引入已知的安全问题。</p>
        <h2 class="heading settled" data-level="10" id="privacy-considerations"><span class="secno">10. </span><span
                class="content">隐私考虑</span><a class="self-link" href="#privacy-considerations"></a>
        </h2>
        <ul>
            <li data-md>
                <p>绘制回调的时机可以被用作高带宽通道，用于检测链接的 "已访问" 状态。
                    (<a href="https://github.com/w3c/css-houdini-drafts/issues/791">详情</a>)
                    这并不是一个全新的隐私泄漏问题，
                    因为许多交互都会泄漏已访问状态，
                    但如果没有进一步的缓解措施，
                    这将是该信息的一个特别高带宽通道。</p>
                <p>目前没有计划采取官方的缓解措施，
                    因为这个隐私泄漏问题需要更直接的解决方案
                    来修复所有此类通道。</p>
        </ul>
        <h2 class="heading settled" data-level="11" id="changes"><span class="secno">11. </span><span
                class="content">更改记录</span><a class="self-link" href="#changes"></a></h2>
        <p>自 <a href="https://www.w3.org/TR/2018/CR-css-paint-api-1-20180809/">2018 年 8 月 9 日 CR 版本发布</a>以来的更改：</p>
        <ul>
            <li data-md>
                <p>将传递给绘制工作器的输入属性列表筛选为仅包含已知或自定义属性。</p>
            <li data-md>
                <p>为 <code
                        class="idl"><a data-link-type="idl" href="#paintrenderingcontext2d" id="ref-for-paintrenderingcontext2d①⑨">PaintRenderingContext2D</a></code>
                    添加了 alpha 标志，
                    以控制渲染表面是强制不透明还是允许透明度。</p>
            <li data-md>
                <p>修正了输出位图大小的定义：</p>
                <blockquote>
                    <p>
                        输出位图的大小是
                        <ins>它所渲染对象的具体对象大小</ins>
                        <del>它所渲染片段的大小</del>
                        。
                    </p>
                </blockquote>
        </ul>
    </main>
    <h2 class="no-ref no-num heading settled" id="w3c-conformance"><span class="content"> 规范一致性</span><a
            class="self-link" href="#w3c-conformance"></a></h2>
    <h3 class="no-ref heading settled" id="w3c-conventions"><span class="content"> 文档约定</span><a class="self-link"
            href="#w3c-conventions"></a></h3>
    <p>一致性要求通过描述性断言和 RFC 2119 术语的组合来表达。关键字 “MUST（必须）”,
        “MUST NOT（禁止）”, “REQUIRED（要求）”, “SHALL（应）”, “SHALL NOT（禁止）”, “SHOULD（应该）”, “SHOULD NOT（不应该）”,
        “RECOMMENDED（推荐）”, “MAY（可以）”, 和 “OPTIONAL（可选）” 在本规范的规范部分中应按照 RFC 2119 的定义进行解释。
        然而，为了可读性，这些词语在本规范中并未全部使用大写字母。</p>
    <p>本规范的所有文本都是规范性的，除非明确标记为非规范性的部分、示例和注释。 <a data-link-type="biblio" href="#biblio-rfc2119">[RFC2119]</a></p>
    <p>本规范中的示例以“例如”引入，或者与规范文本分开显示，并带有 <code>class="example"</code>，
        例如：</p>
    <div class="example" id="example-ae2b6bc0">
        <a class="self-link" href="#example-ae2b6bc0"></a>
        <p>这是一个信息性示例。</p>
    </div>
    <p>信息性注释以“注”开头，并与规范文本分开显示，带有 <code>class="note"</code>，例如：</p>
    <p class="note" role="note">注：这是一个信息性注释。</p>
    <p>建议是规范性部分，样式用于引起特别注意，并与其他规范性文本分开，使用 <code>&lt;strong class="advisement"></code>，
        例如： <strong class="advisement"> 用户代理必须提供一个可访问的替代方案。 </strong> </p>
    <h3 class="no-ref heading settled" id="w3c-conformance-classes"><span class="content"> 规范一致性类别</span><a
            class="self-link" href="#w3c-conformance-classes"></a></h3>
    <p>本规范的一致性定义为三种一致性类别：</p>
    <dl>
        <dt>样式表
        <dd>一个 <a href="https://www.w3.org/TR/CSS21/conform.html#style-sheet">CSS
                样式表</a>。
        <dt>渲染器
        <dd>一个 <a href="https://www.w3.org/TR/CSS21/conform.html#user-agent">用户代理</a>，用于解释样式表的语义并渲染
            使用这些样式表的文档。
        <dt>作者工具
        <dd>一个 <a href="https://www.w3.org/TR/CSS21/conform.html#user-agent">用户代理</a>，用于编写样式表。
    </dl>
    <p>样式表符合本规范，
        如果它的所有语法使用符合本模块定义的通用 CSS 语法和每个特性定义的单独语法是有效的。</p>
    <p>渲染器符合本规范，
        如果除了按照适当的规范定义解释样式表外，它还支持本规范定义的所有特性，正确解析它们，
        并相应地渲染文档。然而，由于设备的限制，用户代理无法正确渲染文档并不会导致该用户代理不符合规范。（例如，用户代理不需要在单色显示器上渲染颜色。）</p>
    <p>作者工具符合本规范，
        如果它编写的样式表在语法上符合通用 CSS 语法和本模块中每个特性定义的单独语法，并符合本模块中描述的样式表的一致性要求。</p>
    <h3 class="no-ref heading settled" id="w3c-partial"><span class="content"> 部分实现</span><a class="self-link"
            href="#w3c-partial"></a></h3>
    <p>为了使作者能够利用向前兼容的解析规则来指定回退值，
        CSS 渲染器<strong>必须</strong>将任何无法使用的 at-rules、属性、属性值、关键字
        和其他语法构造视为无效，并<a
            href="https://www.w3.org/TR/CSS21/conform.html#ignore">适当忽略</a>。特别是，用户代理<strong>不得</strong>在多值属性声明中有选择地忽略不支持的组件值并保留支持的值：如果任何值被认为无效
        （因为不支持的值必须无效），则 CSS 要求整个声明被忽略。</p>
    <h4 class="heading settled" id="w3c-conform-future-proofing"><span class="content"> 实现不稳定和专有特性</span><a
            class="self-link" href="#w3c-conform-future-proofing"></a></h4>
    <p>为了避免与未来稳定的 CSS 特性冲突，
        CSS 工作组建议遵循 <a href="https://www.w3.org/TR/CSS/#future-proofing">最佳实践</a>，
        以实现 <a href="https://www.w3.org/TR/CSS/#unstable">不稳定</a> 特性和 CSS 的 <a
            href="https://www.w3.org/TR/CSS/#proprietary-extension">专有扩展</a>。</p>
    <h3 class="no-ref heading settled" id="w3c-testing"><span class="content"> 非实验性实现</span><a class="self-link"
            href="#w3c-testing"></a></h3>
    <p>当规范达到候选推荐标准阶段后，
        可以进行非实验性的实现，且实施者应当
        发布任何 CR 级别特性的未加前缀的实现，
        并展示其根据规范正确实现。</p>
    <p>为了建立并保持 CSS 在不同实现间的互操作性，
        CSS 工作组请求非实验性的
        CSS 渲染器在发布任何 CSS 特性的未加前缀实现之前，
        向 W3C 提交一个实现报告（如果有必要，还包括用于该实现报告的测试用例）。
        提交给 W3C 的测试用例将由 CSS 工作组审查和修正。</p>
    <p>关于提交测试用例和实现报告的更多信息，
        可以在 CSS 工作组的网站 <a href="https://www.w3.org/Style/CSS/Test/">https://www.w3.org/Style/CSS/Test/</a> 上找到。
        如有疑问，请发送至 <a href="https://lists.w3.org/Archives/Public/public-css-testsuite">public-css-testsuite@w3.org</a>
        邮件列表。</p>
    <h3 class="no-ref heading settled" id="w3c-cr-exit-criteria"><span class="content"> CR 退出标准</span><a
            class="self-link" href="#w3c-cr-exit-criteria"></a></h3>
    <p>为了将本规范推进到拟推荐标准阶段，
        每个特性必须至少有两个独立的、可互操作的实现。
        每个特性可以由不同的产品集实现，
        没有要求所有特性必须由单一产品实现。为此标准的目的，我们定义以下术语：</p>
    <dl>
        <dt>独立
        <dd>每个实现必须由不同的组织开发，不能共享、重用或派生自另一个符合条件的实现的代码。
            与本规范实现无关的代码部分不受此要求限制。
        <dt>互操作性
        <dd>通过官方 CSS 测试套件中的相关测试用例，或（如果实现不是 Web 浏览器）等效的测试。
            每个相关测试都应有一个等效测试创建，如果该用户代理（UA）要用于声称互操作性，
            那么必须有一个或多个其他 UA 也能以相同的方式通过这些等效测试以确保互操作性。
            这些等效测试必须公开供同行评审使用。
        <dt>实现
        <dd>一个用户代理，它：
            <ol class="inline">
                <li>实现了该规范。
                <li>向公众开放。实现可以是已发布的产品或其他公开版本
                    （如测试版、预览版或“夜间构建”）。非发布产品必须在至少一个月的时间内实现该功能，
                    以证明其稳定性。
                <li>不是实验性的（即专为通过测试套件设计，并且不打算继续正常使用的版本）。
            </ol>
    </dl>
    <p>该规范将至少保持候选推荐标准 6 个月。</p>
    <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
    <h2 class="no-num no-ref heading settled" id="index"><span class="content">索引</span><a class="self-link"
            href="#index"></a></h2>
    <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">本规范定义的术语</span><a
            class="self-link" href="#index-defined-here"></a></h3>
    <ul class="index">
        <li>
            alpha
            <ul>
                <li><a href="#paintrenderingcontext2d-alpha">PaintRenderingContext2D 的 dfn</a><span>, 在 § 6</span>
                <li><a href="#dom-paintrenderingcontext2dsettings-alpha">PaintRenderingContext2DSettings 的
                        dict-member</a><span>, 在 § 2</span>
            </ul>
        <li><a href="#paint-definition-class-constructor">类构造函数</a><span>, 在 § 3</span>
        <li><a href="#paint-definition-constructor-valid-flag">构造函数有效标志</a><span>, 在 § 3</span>
        <li><a href="#create-a-paintrenderingcontext2d-object">创建 PaintRenderingContext2D 对象</a><span>, 在 § 6</span>
        <li><a href="#dom-paintworkletglobalscope-devicepixelratio">devicePixelRatio</a><span>, 在 § 2</span>
        <li><a href="#document-paint-definition">文档绘制定义</a><span>, 在 § 3</span>
        <li><a href="#document-paint-definitions">文档绘制定义集</a><span>, 在 § 4</span>
        <li><a href="#draw-a-paint-image">绘制绘制图像</a><span>, 在 § 7</span>
        <li><a href="#dom-paintsize-height">高度</a><span>, 在 § 7</span>
        <li><a href="#document-paint-definition-input-argument-syntaxes">输入参数语法</a><span>, 在 § 3</span>
        <li>
            输入属性
            <ul>
                <li><a href="#document-paint-definition-input-properties">文档绘制定义的 dfn</a><span>, 在 § 3</span>
                <li><a href="#paint-definition-input-properties">绘制定义的 dfn</a><span>, 在 § 3</span>
            </ul>
        <li><a href="#invoke-a-paint-callback">调用绘制回调</a><span>, 在 § 7</span>
        <li><a href="#paintrenderingcontext2d-output-bitmap">输出位图</a><span>, 在 § 6</span>
        <li><a href="#funcdef-paint">paint()</a><span>, 在 § 5</span>
        <li><a href="#paint-class-instances">绘制类实例</a><span>, 在 § 4</span>
        <li><a href="#paint-definition">绘制定义</a><span>, 在 § 3</span>
        <li><a href="#paint-definitions">绘制定义集</a><span>, 在 § 4</span>
        <li><a href="#paint-definition-paint-function">绘制函数</a><span>, 在 § 3</span>
        <li><a href="#paintrenderingcontext2d">PaintRenderingContext2D</a><span>, 在 § 6</span>
        <li><a href="#dictdef-paintrenderingcontext2dsettings">PaintRenderingContext2DSettings</a><span>, 在 § 2</span>
        <li>
            PaintRenderingContext2DSettings 对象
            <ul>
                <li><a href="#document-paint-definition-paintrenderingcontext2dsettings-object">文档绘制定义的 dfn</a><span>, 在
                        § 3</span>
                <li><a href="#paint-definition-paintrenderingcontext2dsettings-object">绘制定义的 dfn</a><span>, 在 § 3</span>
            </ul>
        <li><a href="#paintsize">PaintSize</a><span>, 在 § 7</span>
        <li><a href="#dom-css-paintworklet">paintWorklet</a><span>, 在 § 2</span>
        <li><a href="#paintworkletglobalscope">PaintWorkletGlobalScope</a><span>, 在 § 2</span>
        <li><a href="#dom-paintworkletglobalscope-registerpaint">registerPaint(name, paintCtor)</a><span>, 在 § 4</span>
        <li><a href="#dom-paintsize-width">宽度</a><span>, 在 § 7</span>
    </ul>
    <aside class="dfn-panel" data-for="term-for-propdef-border-image">
        <a
            href="https://www.w3.org/TR/css-backgrounds-3/#propdef-border-image">https://www.w3.org/TR/css-backgrounds-3/#propdef-border-image</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-border-image">8.5. Example 5: Drawing outside an element’s area</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-computed-value">
        <a
            href="https://www.w3.org/TR/css-cascade-5/#computed-value">https://www.w3.org/TR/css-cascade-5/#computed-value</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-computed-value">5. Paint Notation</a>
            <li><a href="#ref-for-computed-value①">7. Drawing an image</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-box">
        <a href="https://www.w3.org/TR/css-display-3/#box">https://www.w3.org/TR/css-display-3/#box</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-box">7. Drawing an image</a> <a href="#ref-for-box①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-typedef-image">
        <a
            href="https://www.w3.org/TR/css-images-3/#typedef-image">https://www.w3.org/TR/css-images-3/#typedef-image</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-typedef-image">Unnumbered Section</a>
            <li><a href="#ref-for-typedef-image①">1. Introduction</a>
            <li><a href="#ref-for-typedef-image②">3. Concepts</a> <a href="#ref-for-typedef-image③">(2)</a>
            <li><a href="#ref-for-typedef-image④">5. Paint Notation</a> <a href="#ref-for-typedef-image⑤">(2)</a>
            <li><a href="#ref-for-typedef-image⑥">7. Drawing an image</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concrete-object-size">
        <a
            href="https://www.w3.org/TR/css-images-3/#concrete-object-size">https://www.w3.org/TR/css-images-3/#concrete-object-size</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concrete-object-size">6. The 2D rendering context</a>
            <li><a href="#ref-for-concrete-object-size①">7. Drawing an image</a> <a
                    href="#ref-for-concrete-object-size②">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-natural-dimensions">
        <a
            href="https://www.w3.org/TR/css-images-3/#natural-dimensions">https://www.w3.org/TR/css-images-3/#natural-dimensions</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-natural-dimensions">7. Drawing an image</a> <a
                    href="#ref-for-natural-dimensions①">(2)</a> <a href="#ref-for-natural-dimensions②">(3)</a> <a
                    href="#ref-for-natural-dimensions③">(4)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-object-size-negotiation">
        <a
            href="https://www.w3.org/TR/css-images-3/#object-size-negotiation">https://www.w3.org/TR/css-images-3/#object-size-negotiation</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-object-size-negotiation">7. Drawing an image</a> <a
                    href="#ref-for-object-size-negotiation①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-invalid-image">
        <a
            href="https://www.w3.org/TR/css-images-4/#invalid-image">https://www.w3.org/TR/css-images-4/#invalid-image</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-invalid-image">5. Paint Notation</a> <a href="#ref-for-invalid-image①">(2)</a>
            <li><a href="#ref-for-invalid-image②">7. Drawing an image</a> <a href="#ref-for-invalid-image③">(2)</a> <a
                    href="#ref-for-invalid-image④">(3)</a> <a href="#ref-for-invalid-image⑤">(4)</a> <a
                    href="#ref-for-invalid-image⑥">(5)</a> <a href="#ref-for-invalid-image⑦">(6)</a> <a
                    href="#ref-for-invalid-image⑧">(7)</a> <a href="#ref-for-invalid-image⑨">(8)</a> <a
                    href="#ref-for-invalid-image①⓪">(9)</a> <a href="#ref-for-invalid-image①①">(10)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-consume-a-syntax-definition">
        <a
            href="https://www.w3.org/TR/css-properties-values-api-1/#consume-a-syntax-definition">https://www.w3.org/TR/css-properties-values-api-1/#consume-a-syntax-definition</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-consume-a-syntax-definition">4. Registering Custom Paint</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-syntax-definition">
        <a
            href="https://www.w3.org/TR/css-properties-values-api-1/#syntax-definition">https://www.w3.org/TR/css-properties-values-api-1/#syntax-definition</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-syntax-definition">3. Concepts</a>
            <li><a href="#ref-for-syntax-definition①">4. Registering Custom Paint</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-typedef-declaration-value">
        <a
            href="https://www.w3.org/TR/css-syntax-3/#typedef-declaration-value">https://www.w3.org/TR/css-syntax-3/#typedef-declaration-value</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-typedef-declaration-value">5. Paint Notation</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-function">
        <a href="https://www.w3.org/TR/css-syntax-3/#function">https://www.w3.org/TR/css-syntax-3/#function</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-function">3. Concepts</a>
            <li><a href="#ref-for-function①">4. Registering Custom Paint</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-cssimagevalue">
        <a
            href="https://www.w3.org/TR/css-typed-om-1/#cssimagevalue">https://www.w3.org/TR/css-typed-om-1/#cssimagevalue</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-cssimagevalue">6.1. Drawing a CSSImageValue</a> <a
                    href="#ref-for-cssimagevalue①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-stylepropertymap">
        <a
            href="https://www.w3.org/TR/css-typed-om-1/#stylepropertymap">https://www.w3.org/TR/css-typed-om-1/#stylepropertymap</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-stylepropertymap">4. Registering Custom Paint</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-stylepropertymapreadonly">
        <a
            href="https://www.w3.org/TR/css-typed-om-1/#stylepropertymapreadonly">https://www.w3.org/TR/css-typed-om-1/#stylepropertymapreadonly</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-stylepropertymapreadonly">7. Drawing an image</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-cursor">
        <a href="https://www.w3.org/TR/css-ui-3/#propdef-cursor">https://www.w3.org/TR/css-ui-3/#propdef-cursor</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-cursor">5. Paint Notation</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-comb-comma">
        <a href="https://www.w3.org/TR/css-values-4/#comb-comma">https://www.w3.org/TR/css-values-4/#comb-comma</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-comb-comma">5. Paint Notation</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-typedef-ident">
        <a
            href="https://www.w3.org/TR/css-values-4/#typedef-ident">https://www.w3.org/TR/css-values-4/#typedef-ident</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-typedef-ident">5. Paint Notation</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-mult-opt">
        <a href="https://www.w3.org/TR/css-values-4/#mult-opt">https://www.w3.org/TR/css-values-4/#mult-opt</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-mult-opt">5. Paint Notation</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-custom-property">
        <a
            href="https://www.w3.org/TR/css-variables-1/#custom-property">https://www.w3.org/TR/css-variables-1/#custom-property</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-custom-property">4. Registering Custom Paint</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-namespacedef-css">
        <a href="https://www.w3.org/TR/cssom-1/#namespacedef-css">https://www.w3.org/TR/cssom-1/#namespacedef-css</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-namespacedef-css">2. Paint Worklet</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-supported-css-property">
        <a
            href="https://www.w3.org/TR/cssom-1/#supported-css-property">https://www.w3.org/TR/cssom-1/#supported-css-property</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-supported-css-property">4. Registering Custom Paint</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-window-devicepixelratio">
        <a
            href="https://www.w3.org/TR/cssom-view/#dom-window-devicepixelratio">https://www.w3.org/TR/cssom-view/#dom-window-devicepixelratio</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-window-devicepixelratio">2. Paint Worklet</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-document">
        <a href="https://dom.spec.whatwg.org/#concept-document">https://dom.spec.whatwg.org/#concept-document</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-document">3. Concepts</a>
            <li><a href="#ref-for-concept-document①">4. Registering Custom Paint</a> <a
                    href="#ref-for-concept-document②">(2)</a>
            <li><a href="#ref-for-concept-document③">7. Drawing an image</a> <a
                    href="#ref-for-concept-document④">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-canvascompositing">
        <a
            href="https://html.spec.whatwg.org/multipage/canvas.html#canvascompositing">https://html.spec.whatwg.org/multipage/canvas.html#canvascompositing</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-canvascompositing">6. The 2D rendering context</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-canvasdrawimage">
        <a
            href="https://html.spec.whatwg.org/multipage/canvas.html#canvasdrawimage">https://html.spec.whatwg.org/multipage/canvas.html#canvasdrawimage</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-canvasdrawimage">6. The 2D rendering context</a>
            <li><a href="#ref-for-canvasdrawimage①">6.1. Drawing a CSSImageValue</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-canvasdrawpath">
        <a
            href="https://html.spec.whatwg.org/multipage/canvas.html#canvasdrawpath">https://html.spec.whatwg.org/multipage/canvas.html#canvasdrawpath</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-canvasdrawpath">6. The 2D rendering context</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-canvasfillstrokestyles">
        <a
            href="https://html.spec.whatwg.org/multipage/canvas.html#canvasfillstrokestyles">https://html.spec.whatwg.org/multipage/canvas.html#canvasfillstrokestyles</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-canvasfillstrokestyles">6. The 2D rendering context</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-canvasimagedata">
        <a
            href="https://html.spec.whatwg.org/multipage/canvas.html#canvasimagedata">https://html.spec.whatwg.org/multipage/canvas.html#canvasimagedata</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-canvasimagedata">6. The 2D rendering context</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-canvasimagesmoothing">
        <a
            href="https://html.spec.whatwg.org/multipage/canvas.html#canvasimagesmoothing">https://html.spec.whatwg.org/multipage/canvas.html#canvasimagesmoothing</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-canvasimagesmoothing">6. The 2D rendering context</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-canvasimagesource">
        <a
            href="https://html.spec.whatwg.org/multipage/canvas.html#canvasimagesource">https://html.spec.whatwg.org/multipage/canvas.html#canvasimagesource</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-canvasimagesource">6.1. Drawing a CSSImageValue</a> <a
                    href="#ref-for-canvasimagesource①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-canvaspath">
        <a
            href="https://html.spec.whatwg.org/multipage/canvas.html#canvaspath">https://html.spec.whatwg.org/multipage/canvas.html#canvaspath</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-canvaspath">6. The 2D rendering context</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-canvaspathdrawingstyles">
        <a
            href="https://html.spec.whatwg.org/multipage/canvas.html#canvaspathdrawingstyles">https://html.spec.whatwg.org/multipage/canvas.html#canvaspathdrawingstyles</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-canvaspathdrawingstyles">6. The 2D rendering context</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-canvasrect">
        <a
            href="https://html.spec.whatwg.org/multipage/canvas.html#canvasrect">https://html.spec.whatwg.org/multipage/canvas.html#canvasrect</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-canvasrect">6. The 2D rendering context</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-canvasrenderingcontext2d">
        <a
            href="https://html.spec.whatwg.org/multipage/canvas.html#canvasrenderingcontext2d">https://html.spec.whatwg.org/multipage/canvas.html#canvasrenderingcontext2d</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-canvasrenderingcontext2d">6. The 2D rendering context</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-canvasshadowstyles">
        <a
            href="https://html.spec.whatwg.org/multipage/canvas.html#canvasshadowstyles">https://html.spec.whatwg.org/multipage/canvas.html#canvasshadowstyles</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-canvasshadowstyles">6. The 2D rendering context</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-canvasstate">
        <a
            href="https://html.spec.whatwg.org/multipage/canvas.html#canvasstate">https://html.spec.whatwg.org/multipage/canvas.html#canvasstate</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-canvasstate">6. The 2D rendering context</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-canvastext">
        <a
            href="https://html.spec.whatwg.org/multipage/canvas.html#canvastext">https://html.spec.whatwg.org/multipage/canvas.html#canvastext</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-canvastext">6. The 2D rendering context</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-canvastextdrawingstyles">
        <a
            href="https://html.spec.whatwg.org/multipage/canvas.html#canvastextdrawingstyles">https://html.spec.whatwg.org/multipage/canvas.html#canvastextdrawingstyles</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-canvastextdrawingstyles">6. The 2D rendering context</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-canvastransform">
        <a
            href="https://html.spec.whatwg.org/multipage/canvas.html#canvastransform">https://html.spec.whatwg.org/multipage/canvas.html#canvastransform</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-canvastransform">6. The 2D rendering context</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-canvasuserinterface">
        <a
            href="https://html.spec.whatwg.org/multipage/canvas.html#canvasuserinterface">https://html.spec.whatwg.org/multipage/canvas.html#canvasuserinterface</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-canvasuserinterface">6. The 2D rendering context</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-worklet">
        <a
            href="https://html.spec.whatwg.org/multipage/worklets.html#worklet">https://html.spec.whatwg.org/multipage/worklets.html#worklet</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-worklet">2. Paint Worklet</a> <a href="#ref-for-worklet①">(2)</a> <a
                    href="#ref-for-worklet②">(3)</a>
            <li><a href="#ref-for-worklet③">7. Drawing an image</a> <a href="#ref-for-worklet④">(2)</a>
            <li><a href="#ref-for-worklet⑤">7.1. Global Scope Selection</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-workletglobalscope">
        <a
            href="https://html.spec.whatwg.org/multipage/worklets.html#workletglobalscope">https://html.spec.whatwg.org/multipage/worklets.html#workletglobalscope</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-workletglobalscope">2. Paint Worklet</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-create-a-worklet-global-scope">
        <a
            href="https://html.spec.whatwg.org/multipage/worklets.html#create-a-worklet-global-scope">https://html.spec.whatwg.org/multipage/worklets.html#create-a-worklet-global-scope</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-create-a-worklet-global-scope">7. Drawing an image</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-context-2d-drawimage">
        <a
            href="https://html.spec.whatwg.org/multipage/canvas.html#dom-context-2d-drawimage">https://html.spec.whatwg.org/multipage/canvas.html#dom-context-2d-drawimage</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-context-2d-drawimage">6.1. Drawing a CSSImageValue</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-worklet-global-scopes">
        <a
            href="https://html.spec.whatwg.org/multipage/worklets.html#concept-worklet-global-scopes">https://html.spec.whatwg.org/multipage/worklets.html#concept-worklet-global-scopes</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-worklet-global-scopes">7. Drawing an image</a>
            <li><a href="#ref-for-concept-worklet-global-scopes①">7.1. Global Scope Selection</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-in-parallel">
        <a
            href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-in-parallel">7. Drawing an image</a> <a href="#ref-for-in-parallel①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-queue-a-task">
        <a
            href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-queue-a-task">4. Registering Custom Paint</a>
            <li><a href="#ref-for-queue-a-task①">7. Drawing an image</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-reset-the-rendering-context-to-its-default-state">
        <a
            href="https://html.spec.whatwg.org/multipage/canvas.html#reset-the-rendering-context-to-its-default-state">https://html.spec.whatwg.org/multipage/canvas.html#reset-the-rendering-context-to-its-default-state</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-reset-the-rendering-context-to-its-default-state">6. The 2D rendering context</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-canvas-set-bitmap-dimensions">
        <a
            href="https://html.spec.whatwg.org/multipage/canvas.html#concept-canvas-set-bitmap-dimensions">https://html.spec.whatwg.org/multipage/canvas.html#concept-canvas-set-bitmap-dimensions</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-canvas-set-bitmap-dimensions">6. The 2D rendering context</a> <a
                    href="#ref-for-concept-canvas-set-bitmap-dimensions①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-worklet-destination-type">
        <a
            href="https://html.spec.whatwg.org/multipage/worklets.html#worklet-destination-type">https://html.spec.whatwg.org/multipage/worklets.html#worklet-destination-type</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-worklet-destination-type">2. Paint Worklet</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-worklet-global-scope-type">
        <a
            href="https://html.spec.whatwg.org/multipage/worklets.html#worklet-global-scope-type">https://html.spec.whatwg.org/multipage/worklets.html#worklet-global-scope-type</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-worklet-global-scope-type">2. Paint Worklet</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-list-append">
        <a href="https://infra.spec.whatwg.org/#list-append">https://infra.spec.whatwg.org/#list-append</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-list-append">4. Registering Custom Paint</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-list-empty">
        <a href="https://infra.spec.whatwg.org/#list-empty">https://infra.spec.whatwg.org/#list-empty</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-list-empty">4. Registering Custom Paint</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-map-exists">
        <a href="https://infra.spec.whatwg.org/#map-exists">https://infra.spec.whatwg.org/#map-exists</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-map-exists">4. Registering Custom Paint</a> <a href="#ref-for-map-exists①">(2)</a>
            <li><a href="#ref-for-map-exists②">7. Drawing an image</a> <a href="#ref-for-map-exists③">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-list-iterate">
        <a href="https://infra.spec.whatwg.org/#list-iterate">https://infra.spec.whatwg.org/#list-iterate</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-list-iterate">4. Registering Custom Paint</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-map-get">
        <a href="https://infra.spec.whatwg.org/#map-get">https://infra.spec.whatwg.org/#map-get</a><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-map-get">4. Registering Custom Paint</a>
            <li><a href="#ref-for-map-get①">7. Drawing an image</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-list">
        <a href="https://infra.spec.whatwg.org/#list">https://infra.spec.whatwg.org/#list</a><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-list">3. Concepts</a> <a href="#ref-for-list①">(2)</a> <a
                    href="#ref-for-list②">(3)</a>
            <li><a href="#ref-for-list③">4. Registering Custom Paint</a>
            <li><a href="#ref-for-list④">7. Drawing an image</a>
            <li><a href="#ref-for-list⑤">7.1. Global Scope Selection</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-ordered-map">
        <a href="https://infra.spec.whatwg.org/#ordered-map">https://infra.spec.whatwg.org/#ordered-map</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-ordered-map">4. Registering Custom Paint</a> <a href="#ref-for-ordered-map①">(2)</a>
                <a href="#ref-for-ordered-map②">(3)</a> <a href="#ref-for-ordered-map③">(4)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-map-set">
        <a href="https://infra.spec.whatwg.org/#map-set">https://infra.spec.whatwg.org/#map-set</a><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-map-set">4. Registering Custom Paint</a> <a href="#ref-for-map-set①">(2)</a> <a
                    href="#ref-for-map-set②">(3)</a>
            <li><a href="#ref-for-map-set③">7. Drawing an image</a> <a href="#ref-for-map-set④">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-struct">
        <a href="https://infra.spec.whatwg.org/#struct">https://infra.spec.whatwg.org/#struct</a><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-struct">3. Concepts</a> <a href="#ref-for-struct①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-idl-DOMException">
        <a
            href="https://webidl.spec.whatwg.org/#idl-DOMException">https://webidl.spec.whatwg.org/#idl-DOMException</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-idl-DOMException">4. Registering Custom Paint</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-idl-DOMString">
        <a href="https://webidl.spec.whatwg.org/#idl-DOMString">https://webidl.spec.whatwg.org/#idl-DOMString</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-idl-DOMString">2. Paint Worklet</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-Exposed">
        <a href="https://webidl.spec.whatwg.org/#Exposed">https://webidl.spec.whatwg.org/#Exposed</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-Exposed">2. Paint Worklet</a>
            <li><a href="#ref-for-Exposed①">6. The 2D rendering context</a>
            <li><a href="#ref-for-Exposed②">7. Drawing an image</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-Global">
        <a href="https://webidl.spec.whatwg.org/#Global">https://webidl.spec.whatwg.org/#Global</a><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-Global">2. Paint Worklet</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-invalidmodificationerror">
        <a
            href="https://webidl.spec.whatwg.org/#invalidmodificationerror">https://webidl.spec.whatwg.org/#invalidmodificationerror</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-invalidmodificationerror">4. Registering Custom Paint</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-SameObject">
        <a href="https://webidl.spec.whatwg.org/#SameObject">https://webidl.spec.whatwg.org/#SameObject</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-SameObject">2. Paint Worklet</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-VoidFunction">
        <a href="https://webidl.spec.whatwg.org/#VoidFunction">https://webidl.spec.whatwg.org/#VoidFunction</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-VoidFunction">2. Paint Worklet</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-idl-boolean">
        <a href="https://webidl.spec.whatwg.org/#idl-boolean">https://webidl.spec.whatwg.org/#idl-boolean</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-idl-boolean">2. Paint Worklet</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dfn-callback-function">
        <a
            href="https://webidl.spec.whatwg.org/#dfn-callback-function">https://webidl.spec.whatwg.org/#dfn-callback-function</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dfn-callback-function">3. Concepts</a>
            <li><a href="#ref-for-dfn-callback-function①">4. Registering Custom Paint</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dfn-callback-this-value">
        <a
            href="https://webidl.spec.whatwg.org/#dfn-callback-this-value">https://webidl.spec.whatwg.org/#dfn-callback-this-value</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dfn-callback-this-value">7. Drawing an image</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-web-idl-arguments-list-converting">
        <a
            href="https://webidl.spec.whatwg.org/#web-idl-arguments-list-converting">https://webidl.spec.whatwg.org/#web-idl-arguments-list-converting</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-web-idl-arguments-list-converting">4. Registering Custom Paint</a> <a
                    href="#ref-for-web-idl-arguments-list-converting①">(2)</a> <a
                    href="#ref-for-web-idl-arguments-list-converting②">(3)</a> <a
                    href="#ref-for-web-idl-arguments-list-converting③">(4)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-idl-double">
        <a href="https://webidl.spec.whatwg.org/#idl-double">https://webidl.spec.whatwg.org/#idl-double</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-idl-double">7. Drawing an image</a> <a href="#ref-for-idl-double①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-invoke-a-callback-function">
        <a
            href="https://webidl.spec.whatwg.org/#invoke-a-callback-function">https://webidl.spec.whatwg.org/#invoke-a-callback-function</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-invoke-a-callback-function">7. Drawing an image</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dfn-throw">
        <a href="https://webidl.spec.whatwg.org/#dfn-throw">https://webidl.spec.whatwg.org/#dfn-throw</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dfn-throw">4. Registering Custom Paint</a> <a href="#ref-for-dfn-throw①">(2)</a> <a
                    href="#ref-for-dfn-throw②">(3)</a> <a href="#ref-for-dfn-throw③">(4)</a> <a
                    href="#ref-for-dfn-throw④">(5)</a> <a href="#ref-for-dfn-throw⑤">(6)</a> <a
                    href="#ref-for-dfn-throw⑥">(7)</a>
            <li><a href="#ref-for-dfn-throw⑦">7. Drawing an image</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-idl-undefined">
        <a href="https://webidl.spec.whatwg.org/#idl-undefined">https://webidl.spec.whatwg.org/#idl-undefined</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-idl-undefined">2. Paint Worklet</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-idl-unrestricted-double">
        <a
            href="https://webidl.spec.whatwg.org/#idl-unrestricted-double">https://webidl.spec.whatwg.org/#idl-unrestricted-double</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-idl-unrestricted-double">2. Paint Worklet</a>
        </ul>
    </aside>
    <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">通过引用定义的术语</span><a
            class="self-link" href="#index-defined-elsewhere"></a></h3>
    <ul class="index">
        <li>
            <a data-link-type="biblio">[css-backgrounds-3]</a>定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-propdef-border-image">border-image</span>
            </ul>
        <li>
            <a data-link-type="biblio">[css-cascade-5]</a>定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-computed-value">计算值（computed value）</span>
            </ul>
        <li>
            <a data-link-type="biblio">[css-display-3]</a>定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-box">盒子（box）</span>
            </ul>
        <li>
            <a data-link-type="biblio">[css-images-3]</a>定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-typedef-image">&lt;image></span>
                <li><span class="dfn-paneled" id="term-for-concrete-object-size">具体对象大小（concrete object size）</span>
                <li><span class="dfn-paneled" id="term-for-natural-dimensions">自然尺寸（natural dimension）</span>
                <li><span class="dfn-paneled" id="term-for-object-size-negotiation">对象尺寸协商（object size
                        negotiation）</span>
            </ul>
        <li>
            <a data-link-type="biblio">[css-images-4]</a>定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-invalid-image">无效图像（invalid image）</span>
            </ul>
        <li>
            <a data-link-type="biblio">[css-properties-values-api-1]</a>定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-consume-a-syntax-definition">解析语法定义（consume a syntax
                        definition）</span>
                <li><span class="dfn-paneled" id="term-for-syntax-definition">语法定义（syntax definition）</span>
            </ul>
        <li>
            <a data-link-type="biblio">[css-syntax-3]</a>定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-typedef-declaration-value">&lt;declaration-value></span>
                <li><span class="dfn-paneled" id="term-for-function">函数（function）</span>
            </ul>
        <li>
            <a data-link-type="biblio">[css-typed-om-1]</a>定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-cssimagevalue">CSSImageValue</span>
                <li><span class="dfn-paneled" id="term-for-stylepropertymap">StylePropertyMap</span>
                <li><span class="dfn-paneled" id="term-for-stylepropertymapreadonly">StylePropertyMapReadOnly</span>
            </ul>
        <li>
            <a data-link-type="biblio">[css-ui-3]</a>定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-propdef-cursor">光标（cursor）</span>
            </ul>
        <li>
            <a data-link-type="biblio">[css-values-4]</a>定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-comb-comma">,</span>
                <li><span class="dfn-paneled" id="term-for-typedef-ident">&lt;ident></span>
                <li><span class="dfn-paneled" id="term-for-mult-opt">?</span>
            </ul>
        <li>
            <a data-link-type="biblio">[css-variables-1]</a>定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-custom-property">自定义属性（custom property）</span>
            </ul>
        <li>
            <a data-link-type="biblio">[cssom-1]</a>定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-namespacedef-css">CSS</span>
                <li><span class="dfn-paneled" id="term-for-supported-css-property">支持的CSS属性（supported css
                        property）</span>
            </ul>
        <li>
            <a data-link-type="biblio">[cssom-view-1]</a>定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-dom-window-devicepixelratio">devicePixelRatio</span>
            </ul>
        <li>
            <a data-link-type="biblio">[DOM]</a>定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-concept-document">文档（document）</span>
            </ul>
        <li>
            <a data-link-type="biblio">[HTML]</a>定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-canvascompositing">CanvasCompositing</span>
                <li><span class="dfn-paneled" id="term-for-canvasdrawimage">CanvasDrawImage</span>
                <li><span class="dfn-paneled" id="term-for-canvasdrawpath">CanvasDrawPath</span>
                <li><span class="dfn-paneled" id="term-for-canvasfillstrokestyles">CanvasFillStrokeStyles</span>
                <li><span class="dfn-paneled" id="term-for-canvasimagedata">CanvasImageData</span>
                <li><span class="dfn-paneled" id="term-for-canvasimagesmoothing">CanvasImageSmoothing</span>
                <li><span class="dfn-paneled" id="term-for-canvasimagesource">CanvasImageSource</span>
                <li><span class="dfn-paneled" id="term-for-canvaspath">CanvasPath</span>
                <li><span class="dfn-paneled" id="term-for-canvaspathdrawingstyles">CanvasPathDrawingStyles</span>
                <li><span class="dfn-paneled" id="term-for-canvasrect">CanvasRect</span>
                <li><span class="dfn-paneled" id="term-for-canvasrenderingcontext2d">CanvasRenderingContext2D</span>
                <li><span class="dfn-paneled" id="term-for-canvasshadowstyles">CanvasShadowStyles</span>
                <li><span class="dfn-paneled" id="term-for-canvasstate">CanvasState</span>
                <li><span class="dfn-paneled" id="term-for-canvastext">CanvasText</span>
                <li><span class="dfn-paneled" id="term-for-canvastextdrawingstyles">CanvasTextDrawingStyles</span>
                <li><span class="dfn-paneled" id="term-for-canvastransform">CanvasTransform</span>
                <li><span class="dfn-paneled" id="term-for-canvasuserinterface">CanvasUserInterface</span>
                <li><span class="dfn-paneled" id="term-for-worklet">Worklet</span>
                <li><span class="dfn-paneled" id="term-for-workletglobalscope">WorkletGlobalScope</span>
                <li><span class="dfn-paneled" id="term-for-create-a-worklet-global-scope">创建worklet全局范围（create a worklet
                        global scope）</span>
                <li><span class="dfn-paneled" id="term-for-dom-context-2d-drawimage">drawImage</span>
                <li><span class="dfn-paneled" id="term-for-concept-worklet-global-scopes">全局范围（global scopes）</span>
                <li><span class="dfn-paneled" id="term-for-in-parallel">并行（in parallel）</span>
                <li><span class="dfn-paneled" id="term-for-queue-a-task">队列任务（queue a task）</span>
                <li><span class="dfn-paneled"
                        id="term-for-reset-the-rendering-context-to-its-default-state">重置渲染上下文为默认状态（reset the rendering
                        context to its default state）</span>
                <li><span class="dfn-paneled" id="term-for-concept-canvas-set-bitmap-dimensions">设置位图尺寸（set bitmap
                        dimensions）</span>
                <li><span class="dfn-paneled" id="term-for-worklet-destination-type">worklet目标类型（worklet destination
                        type）</span>
                <li><span class="dfn-paneled" id="term-for-worklet-global-scope-type">worklet全局范围类型（worklet global scope
                        type）</span>
            </ul>
        <li>
            <a data-link-type="biblio">[INFRA]</a>定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-list-append">追加（append）</span>
                <li><span class="dfn-paneled" id="term-for-list-empty">清空（empty）</span>
                <li><span class="dfn-paneled" id="term-for-map-exists">存在（exist）</span>
                <li><span class="dfn-paneled" id="term-for-list-iterate">遍历（for each）</span>
                <li><span class="dfn-paneled" id="term-for-map-get">获取（get）</span>
                <li><span class="dfn-paneled" id="term-for-list">列表（list）</span>
                <li><span class="dfn-paneled" id="term-for-ordered-map">映射（map）</span>
                <li><span class="dfn-paneled" id="term-for-map-set">设置（set）</span>
                <li><span class="dfn-paneled" id="term-for-struct">结构（struct）</span>
            </ul>
        <li>
            <a data-link-type="biblio">[WEBIDL]</a>定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-idl-DOMException">DOMException</span>
                <li><span class="dfn-paneled" id="term-for-idl-DOMString">DOMString</span>
                <li><span class="dfn-paneled" id="term-for-Exposed">Exposed</span>
                <li><span class="dfn-paneled" id="term-for-Global">Global</span>
                <li><span class="dfn-paneled" id="term-for-invalidmodificationerror">InvalidModificationError</span>
                <li><span class="dfn-paneled" id="term-for-SameObject">SameObject</span>
                <li><span class="dfn-paneled" id="term-for-VoidFunction">VoidFunction</span>
                <li><span class="dfn-paneled" id="term-for-idl-boolean">boolean</span>
                <li><span class="dfn-paneled" id="term-for-dfn-callback-function">回调函数（callback function）</span>
                <li><span class="dfn-paneled" id="term-for-dfn-callback-this-value">回调的this值（callback this value）</span>
                <li><span class="dfn-paneled" id="term-for-web-idl-arguments-list-converting">参数转换（converting）</span>
                <li><span class="dfn-paneled" id="term-for-idl-double">double</span>
                <li><span class="dfn-paneled" id="term-for-invoke-a-callback-function">调用（invoke）</span>
                <li><span class="dfn-paneled" id="term-for-dfn-throw">抛出（throw）</span>
                <li><span class="dfn-paneled" id="term-for-idl-undefined">undefined</span>
                <li><span class="dfn-paneled" id="term-for-idl-unrestricted-double">unrestricted double</span>
            </ul>
    </ul>
    <h2 class="no-num no-ref heading settled" id="references"><span class="content">参考文献</span><a class="self-link"
            href="#references"></a></h2>
    <h3 class="no-num no-ref heading settled" id="normative"><span class="content">规范性引用</span><a class="self-link"
            href="#normative"></a></h3>
    <dl>
        <dt id="biblio-css-backgrounds-3">[CSS-BACKGROUNDS-3]
        <dd>Bert Bos; Elika Etemad; Brad Kemper. <a
                href="https://www.w3.org/TR/css-backgrounds-3/"><cite>CSS背景和边框模块第3级</cite></a>。2021年7月26日。CR。网址：<a
                href="https://www.w3.org/TR/css-backgrounds-3/">https://www.w3.org/TR/css-backgrounds-3/</a>
        <dt id="biblio-css-cascade-5">[CSS-CASCADE-5]
        <dd>Elika Etemad; Miriam Suzanne; Tab Atkins Jr.。<a
                href="https://www.w3.org/TR/css-cascade-5/"><cite>CSS层叠和继承第5级</cite></a>。2021年12月3日。WD。网址：<a
                href="https://www.w3.org/TR/css-cascade-5/">https://www.w3.org/TR/css-cascade-5/</a>
        <dt id="biblio-css-display-3">[CSS-DISPLAY-3]
        <dd>Tab Atkins Jr.; Elika Etemad. <a
                href="https://www.w3.org/TR/css-display-3/"><cite>CSS显示模块第3级</cite></a>。2021年9月3日。CR。网址：<a
                href="https://www.w3.org/TR/css-display-3/">https://www.w3.org/TR/css-display-3/</a>
        <dt id="biblio-css-images-3">[CSS-IMAGES-3]
        <dd>Tab Atkins Jr.; Elika Etemad; Lea Verou. <a
                href="https://www.w3.org/TR/css-images-3/"><cite>CSS图像模块第3级</cite></a>。2020年12月17日。CR。网址：<a
                href="https://www.w3.org/TR/css-images-3/">https://www.w3.org/TR/css-images-3/</a>
        <dt id="biblio-css-images-4">[CSS-IMAGES-4]
        <dd>Tab Atkins Jr.; Elika Etemad; Lea Verou. <a
                href="https://www.w3.org/TR/css-images-4/"><cite>CSS图像值和替换内容模块第4级</cite></a>。2017年4月13日。WD。网址：<a
                href="https://www.w3.org/TR/css-images-4/">https://www.w3.org/TR/css-images-4/</a>
        <dt id="biblio-css-properties-values-api-1">[CSS-PROPERTIES-VALUES-API-1]
        <dd>Tab Atkins Jr.; et al. <a
                href="https://www.w3.org/TR/css-properties-values-api-1/"><cite>CSS属性和值API第1级</cite></a>。2020年10月13日。WD。网址：<a
                href="https://www.w3.org/TR/css-properties-values-api-1/">https://www.w3.org/TR/css-properties-values-api-1/</a>
        <dt id="biblio-css-syntax-3">[CSS-SYNTAX-3]
        <dd>Tab Atkins Jr.; Simon Sapin. <a
                href="https://www.w3.org/TR/css-syntax-3/"><cite>CSS语法模块第3级</cite></a>。2019年7月16日。CR。网址：<a
                href="https://www.w3.org/TR/css-syntax-3/">https://www.w3.org/TR/css-syntax-3/</a>
        <dt id="biblio-css-typed-om-1">[CSS-TYPED-OM-1]
        <dd>Shane Stephens; Tab Atkins Jr.; Naina Raisinghani. <a
                href="https://www.w3.org/TR/css-typed-om-1/"><cite>CSS类型化对象模型第1级</cite></a>。2018年4月10日。WD。网址：<a
                href="https://www.w3.org/TR/css-typed-om-1/">https://www.w3.org/TR/css-typed-om-1/</a>
        <dt id="biblio-css-ui-3">[CSS-UI-3]
        <dd>Tantek Çelik; Florian Rivoal. <a href="https://www.w3.org/TR/css-ui-3/"><cite>CSS基本用户界面模块第3级（CSS3
                    UI）</cite></a>。2018年6月21日。REC。网址：<a
                href="https://www.w3.org/TR/css-ui-3/">https://www.w3.org/TR/css-ui-3/</a>
        <dt id="biblio-css-values-4">[CSS-VALUES-4]
        <dd>Tab Atkins Jr.; Elika Etemad. <a
                href="https://www.w3.org/TR/css-values-4/"><cite>CSS值和单位模块第4级</cite></a>。2021年10月16日。WD。网址：<a
                href="https://www.w3.org/TR/css-values-4/">https://www.w3.org/TR/css-values-4/</a>
        <dt id="biblio-css-variables-1">[CSS-VARIABLES-1]
        <dd>Tab Atkins Jr.. <a
                href="https://www.w3.org/TR/css-variables-1/"><cite>CSS自定义属性级联变量模块第1级</cite></a>。2021年11月11日。CR。网址：<a
                href="https://www.w3.org/TR/css-variables-1/">https://www.w3.org/TR/css-variables-1/</a>
        <dt id="biblio-cssom-1">[CSSOM-1]
        <dd>Daniel Glazman; Emilio Cobos Álvarez. <a
                href="https://www.w3.org/TR/cssom-1/"><cite>CSS对象模型（CSSOM）</cite></a>。2021年8月26日。WD。网址：<a
                href="https://www.w3.org/TR/cssom-1/">https://www.w3.org/TR/cssom-1/</a>
        <dt id="biblio-cssom-view-1">[CSSOM-VIEW-1]
        <dd>Simon Pieters. <a href="https://www.w3.org/TR/cssom-view-1/"><cite>CSSOM视图模块</cite></a>。2016年3月17日。WD。网址：<a
                href="https://www.w3.org/TR/cssom-view-1/">https://www.w3.org/TR/cssom-view-1/</a>
        <dt id="biblio-dom">[DOM]
        <dd>Anne van Kesteren. <a href="https://dom.spec.whatwg.org/"><cite>DOM标准</cite></a>。现行标准。网址：<a
                href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
        <dt id="biblio-html">[HTML]
        <dd>Anne van Kesteren; et al. <a
                href="https://html.spec.whatwg.org/multipage/"><cite>HTML标准</cite></a>。现行标准。网址：<a
                href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
        <dt id="biblio-infra">[INFRA]
        <dd>Anne van Kesteren; Domenic Denicola. <a
                href="https://infra.spec.whatwg.org/"><cite>基础标准</cite></a>。现行标准。网址：<a
                href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
        <dt id="biblio-rfc2119">[RFC2119]
        <dd>S. Bradner. <a
                href="https://datatracker.ietf.org/doc/html/rfc2119"><cite>在RFC中用于指示要求级别的关键字</cite></a>。1997年3月。最佳当前实践。网址：<a
                href="https://datatracker.ietf.org/doc/html/rfc2119">https://datatracker.ietf.org/doc/html/rfc2119</a>
        <dt id="biblio-webidl">[WEBIDL]
        <dd>Edgar Chen; Timothy Gu. <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL标准</cite></a>。现行标准。网址：<a
                href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
    </dl>
    <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL 索引</span><a class="self-link"
            href="#idl-index"></a></h2>
    <pre class="idl highlight def"><c- b>partial</c-> <c- b>namespace</c-> <a class="idl-code" data-link-type="namespace" href="https://www.w3.org/TR/cssom-1/#namespacedef-css"><c- g>CSS</c-></a> {
    [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject"><c- g>SameObject</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/worklets.html#worklet"><c- n>Worklet</c-></a> <a data-readonly data-type="Worklet" href="#dom-css-paintworklet"><code><c- g>paintWorklet</c-></code></a>;
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Global"><c- g>Global</c-></a>=(<a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/worklets.html#worklet"><c- n>Worklet</c-></a>,<a data-link-type="idl-name"><c- n>PaintWorklet</c-></a>),<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>PaintWorklet</c->]
<c- b>interface</c-> <a href="#paintworkletglobalscope"><code><c- g>PaintWorkletGlobalScope</c-></code></a> : <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/worklets.html#workletglobalscope"><c- n>WorkletGlobalScope</c-></a> {
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-paintworkletglobalscope-registerpaint"><c- g>registerPaint</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a href="#dom-paintworkletglobalscope-registerpaint-name-paintctor-name"><code><c- g>name</c-></code></a>, <a data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#VoidFunction"><c- n>VoidFunction</c-></a> <a href="#dom-paintworkletglobalscope-registerpaint-name-paintctor-paintctor"><code><c- g>paintCtor</c-></code></a>);
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unrestricted-double"><c- b>unrestricted</c-> <c- b>double</c-></a> <a data-readonly data-type="unrestricted double" href="#dom-paintworkletglobalscope-devicepixelratio"><code><c- g>devicePixelRatio</c-></code></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-paintrenderingcontext2dsettings"><code><c- g>PaintRenderingContext2DSettings</c-></code></a> {
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-default="true" data-type="boolean " href="#dom-paintrenderingcontext2dsettings-alpha"><code><c- g>alpha</c-></code></a> = <c- b>true</c->;
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>PaintWorklet</c->]
<c- b>interface</c-> <a href="#paintrenderingcontext2d"><code><c- g>PaintRenderingContext2D</c-></code></a> {
};
<a data-link-type="idl-name" href="#paintrenderingcontext2d"><c- n>PaintRenderingContext2D</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/canvas.html#canvasstate"><c- n>CanvasState</c-></a>;
<a data-link-type="idl-name" href="#paintrenderingcontext2d"><c- n>PaintRenderingContext2D</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/canvas.html#canvastransform"><c- n>CanvasTransform</c-></a>;
<a data-link-type="idl-name" href="#paintrenderingcontext2d"><c- n>PaintRenderingContext2D</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/canvas.html#canvascompositing"><c- n>CanvasCompositing</c-></a>;
<a data-link-type="idl-name" href="#paintrenderingcontext2d"><c- n>PaintRenderingContext2D</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/canvas.html#canvasimagesmoothing"><c- n>CanvasImageSmoothing</c-></a>;
<a data-link-type="idl-name" href="#paintrenderingcontext2d"><c- n>PaintRenderingContext2D</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/canvas.html#canvasfillstrokestyles"><c- n>CanvasFillStrokeStyles</c-></a>;
<a data-link-type="idl-name" href="#paintrenderingcontext2d"><c- n>PaintRenderingContext2D</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/canvas.html#canvasshadowstyles"><c- n>CanvasShadowStyles</c-></a>;
<a data-link-type="idl-name" href="#paintrenderingcontext2d"><c- n>PaintRenderingContext2D</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/canvas.html#canvasrect"><c- n>CanvasRect</c-></a>;
<a data-link-type="idl-name" href="#paintrenderingcontext2d"><c- n>PaintRenderingContext2D</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/canvas.html#canvasdrawpath"><c- n>CanvasDrawPath</c-></a>;
<a data-link-type="idl-name" href="#paintrenderingcontext2d"><c- n>PaintRenderingContext2D</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/canvas.html#canvasdrawimage"><c- n>CanvasDrawImage</c-></a>;
<a data-link-type="idl-name" href="#paintrenderingcontext2d"><c- n>PaintRenderingContext2D</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/canvas.html#canvaspathdrawingstyles"><c- n>CanvasPathDrawingStyles</c-></a>;
<a data-link-type="idl-name" href="#paintrenderingcontext2d"><c- n>PaintRenderingContext2D</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/canvas.html#canvaspath"><c- n>CanvasPath</c-></a>;

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>PaintWorklet</c->]
<c- b>interface</c-> <a href="#paintsize"><code><c- g>PaintSize</c-></code></a> {
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double"><c- b>double</c-></a> <a data-readonly data-type="double" href="#dom-paintsize-width"><code><c- g>width</c-></code></a>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double"><c- b>double</c-></a> <a data-readonly data-type="double" href="#dom-paintsize-height"><code><c- g>height</c-></code></a>;
};

</pre>
    <aside class="dfn-panel" data-for="dom-css-paintworklet">
        <b><a href="#dom-css-paintworklet">#dom-css-paintworklet</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-css-paintworklet">2. Paint Worklet</a> <a
                    href="#ref-for-dom-css-paintworklet①">(2)</a> <a href="#ref-for-dom-css-paintworklet②">(3)</a> <a
                    href="#ref-for-dom-css-paintworklet③">(4)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="paintworkletglobalscope">
        <b><a href="#paintworkletglobalscope">#paintworkletglobalscope</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-paintworkletglobalscope">2. Paint Worklet</a> <a
                    href="#ref-for-paintworkletglobalscope①">(2)</a> <a href="#ref-for-paintworkletglobalscope②">(3)</a>
            <li><a href="#ref-for-paintworkletglobalscope③">3. Concepts</a>
            <li><a href="#ref-for-paintworkletglobalscope④">4. Registering Custom Paint</a> <a
                    href="#ref-for-paintworkletglobalscope⑤">(2)</a> <a href="#ref-for-paintworkletglobalscope⑥">(3)</a>
            <li><a href="#ref-for-paintworkletglobalscope⑦">7. Drawing an image</a> <a
                    href="#ref-for-paintworkletglobalscope⑧">(2)</a>
            <li><a href="#ref-for-paintworkletglobalscope⑨">7.1. Global Scope Selection</a> <a
                    href="#ref-for-paintworkletglobalscope①⓪">(2)</a> <a
                    href="#ref-for-paintworkletglobalscope①①">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-paintworkletglobalscope-devicepixelratio">
        <b><a
                href="#dom-paintworkletglobalscope-devicepixelratio">#dom-paintworkletglobalscope-devicepixelratio</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-paintworkletglobalscope-devicepixelratio">2. Paint Worklet</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dictdef-paintrenderingcontext2dsettings">
        <b><a
                href="#dictdef-paintrenderingcontext2dsettings">#dictdef-paintrenderingcontext2dsettings</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dictdef-paintrenderingcontext2dsettings">2. Paint Worklet</a> <a
                    href="#ref-for-dictdef-paintrenderingcontext2dsettings①">(2)</a>
            <li><a href="#ref-for-dictdef-paintrenderingcontext2dsettings②">4. Registering Custom Paint</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-paintrenderingcontext2dsettings-alpha">
        <b><a
                href="#dom-paintrenderingcontext2dsettings-alpha">#dom-paintrenderingcontext2dsettings-alpha</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-paintrenderingcontext2dsettings-alpha">6. The 2D rendering context</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="paint-definition">
        <b><a href="#paint-definition">#paint-definition</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-paint-definition">4. Registering Custom Paint</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="paint-definition-class-constructor">
        <b><a href="#paint-definition-class-constructor">#paint-definition-class-constructor</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-paint-definition-class-constructor">4. Registering Custom Paint</a>
            <li><a href="#ref-for-paint-definition-class-constructor①">7. Drawing an image</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="paint-definition-paint-function">
        <b><a href="#paint-definition-paint-function">#paint-definition-paint-function</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-paint-definition-paint-function">4. Registering Custom Paint</a>
            <li><a href="#ref-for-paint-definition-paint-function①">7. Drawing an image</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="paint-definition-constructor-valid-flag">
        <b><a
                href="#paint-definition-constructor-valid-flag">#paint-definition-constructor-valid-flag</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-paint-definition-constructor-valid-flag">4. Registering Custom Paint</a>
            <li><a href="#ref-for-paint-definition-constructor-valid-flag①">7. Drawing an image</a> <a
                    href="#ref-for-paint-definition-constructor-valid-flag②">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="paint-definition-input-properties">
        <b><a href="#paint-definition-input-properties">#paint-definition-input-properties</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-paint-definition-input-properties">4. Registering Custom Paint</a>
            <li><a href="#ref-for-paint-definition-input-properties①">7. Drawing an image</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="paint-definition-paintrenderingcontext2dsettings-object">
        <b><a
                href="#paint-definition-paintrenderingcontext2dsettings-object">#paint-definition-paintrenderingcontext2dsettings-object</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-paint-definition-paintrenderingcontext2dsettings-object">4. Registering Custom
                    Paint</a>
            <li><a href="#ref-for-paint-definition-paintrenderingcontext2dsettings-object①">7. Drawing an image</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="document-paint-definition">
        <b><a href="#document-paint-definition">#document-paint-definition</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-document-paint-definition">4. Registering Custom Paint</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="document-paint-definition-input-properties">
        <b><a
                href="#document-paint-definition-input-properties">#document-paint-definition-input-properties</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-document-paint-definition-input-properties">4. Registering Custom Paint</a> <a
                    href="#ref-for-document-paint-definition-input-properties①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="document-paint-definition-input-argument-syntaxes">
        <b><a
                href="#document-paint-definition-input-argument-syntaxes">#document-paint-definition-input-argument-syntaxes</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-document-paint-definition-input-argument-syntaxes">4. Registering Custom Paint</a> <a
                    href="#ref-for-document-paint-definition-input-argument-syntaxes①">(2)</a>
            <li><a href="#ref-for-document-paint-definition-input-argument-syntaxes②">7. Drawing an image</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="document-paint-definition-paintrenderingcontext2dsettings-object">
        <b><a
                href="#document-paint-definition-paintrenderingcontext2dsettings-object">#document-paint-definition-paintrenderingcontext2dsettings-object</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-document-paint-definition-paintrenderingcontext2dsettings-object">4. Registering
                    Custom Paint</a> <a
                    href="#ref-for-document-paint-definition-paintrenderingcontext2dsettings-object①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="document-paint-definitions">
        <b><a href="#document-paint-definitions">#document-paint-definitions</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-document-paint-definitions">4. Registering Custom Paint</a>
            <li><a href="#ref-for-document-paint-definitions①">7. Drawing an image</a> <a
                    href="#ref-for-document-paint-definitions②">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="paint-definitions">
        <b><a href="#paint-definitions">#paint-definitions</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-paint-definitions">4. Registering Custom Paint</a>
            <li><a href="#ref-for-paint-definitions①">7. Drawing an image</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="paint-class-instances">
        <b><a href="#paint-class-instances">#paint-class-instances</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-paint-class-instances">4. Registering Custom Paint</a>
            <li><a href="#ref-for-paint-class-instances①">7. Drawing an image</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-paintworkletglobalscope-registerpaint">
        <b><a
                href="#dom-paintworkletglobalscope-registerpaint">#dom-paintworkletglobalscope-registerpaint</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-paintworkletglobalscope-registerpaint">2. Paint Worklet</a>
            <li><a href="#ref-for-dom-paintworkletglobalscope-registerpaint①">4. Registering Custom Paint</a> <a
                    href="#ref-for-dom-paintworkletglobalscope-registerpaint②">(2)</a>
            <li><a href="#ref-for-dom-paintworkletglobalscope-registerpaint③">5. Paint Notation</a>
            <li><a href="#ref-for-dom-paintworkletglobalscope-registerpaint④">7. Drawing an image</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="funcdef-paint">
        <b><a href="#funcdef-paint">#funcdef-paint</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-funcdef-paint">3. Concepts</a>
            <li><a href="#ref-for-funcdef-paint①">4. Registering Custom Paint</a>
            <li><a href="#ref-for-funcdef-paint②">5. Paint Notation</a> <a href="#ref-for-funcdef-paint③">(2)</a> <a
                    href="#ref-for-funcdef-paint④">(3)</a>
            <li><a href="#ref-for-funcdef-paint⑤">7. Drawing an image</a> <a href="#ref-for-funcdef-paint⑥">(2)</a> <a
                    href="#ref-for-funcdef-paint⑦">(3)</a> <a href="#ref-for-funcdef-paint⑧">(4)</a> <a
                    href="#ref-for-funcdef-paint⑨">(5)</a> <a href="#ref-for-funcdef-paint①⓪">(6)</a>
            <li><a href="#ref-for-funcdef-paint①①">8.1. Example 1: Colored Circle</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="paintrenderingcontext2d">
        <b><a href="#paintrenderingcontext2d">#paintrenderingcontext2d</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-paintrenderingcontext2d">6. The 2D rendering context</a> <a
                    href="#ref-for-paintrenderingcontext2d①">(2)</a> <a href="#ref-for-paintrenderingcontext2d②">(3)</a>
                <a href="#ref-for-paintrenderingcontext2d③">(4)</a> <a href="#ref-for-paintrenderingcontext2d④">(5)</a>
                <a href="#ref-for-paintrenderingcontext2d⑤">(6)</a> <a href="#ref-for-paintrenderingcontext2d⑥">(7)</a>
                <a href="#ref-for-paintrenderingcontext2d⑦">(8)</a> <a href="#ref-for-paintrenderingcontext2d⑧">(9)</a>
                <a href="#ref-for-paintrenderingcontext2d⑨">(10)</a> <a
                    href="#ref-for-paintrenderingcontext2d①⓪">(11)</a> <a
                    href="#ref-for-paintrenderingcontext2d①①">(12)</a> <a
                    href="#ref-for-paintrenderingcontext2d①②">(13)</a> <a
                    href="#ref-for-paintrenderingcontext2d①③">(14)</a> <a
                    href="#ref-for-paintrenderingcontext2d①④">(15)</a> <a
                    href="#ref-for-paintrenderingcontext2d①⑤">(16)</a> <a
                    href="#ref-for-paintrenderingcontext2d①⑥">(17)</a> <a
                    href="#ref-for-paintrenderingcontext2d①⑦">(18)</a> <a
                    href="#ref-for-paintrenderingcontext2d①⑧">(19)</a>
            <li><a href="#ref-for-paintrenderingcontext2d①⑨">11. Changes</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="paintrenderingcontext2d-output-bitmap">
        <b><a href="#paintrenderingcontext2d-output-bitmap">#paintrenderingcontext2d-output-bitmap</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-paintrenderingcontext2d-output-bitmap">6. The 2D rendering context</a> <a
                    href="#ref-for-paintrenderingcontext2d-output-bitmap①">(2)</a> <a
                    href="#ref-for-paintrenderingcontext2d-output-bitmap②">(3)</a> <a
                    href="#ref-for-paintrenderingcontext2d-output-bitmap③">(4)</a> <a
                    href="#ref-for-paintrenderingcontext2d-output-bitmap④">(5)</a> <a
                    href="#ref-for-paintrenderingcontext2d-output-bitmap⑤">(6)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="paintrenderingcontext2d-alpha">
        <b><a href="#paintrenderingcontext2d-alpha">#paintrenderingcontext2d-alpha</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-paintrenderingcontext2d-alpha">6. The 2D rendering context</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="create-a-paintrenderingcontext2d-object">
        <b><a
                href="#create-a-paintrenderingcontext2d-object">#create-a-paintrenderingcontext2d-object</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-create-a-paintrenderingcontext2d-object">7. Drawing an image</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="paintsize">
        <b><a href="#paintsize">#paintsize</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-paintsize">4. Registering Custom Paint</a>
            <li><a href="#ref-for-paintsize①">7. Drawing an image</a> <a href="#ref-for-paintsize②">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="draw-a-paint-image">
        <b><a href="#draw-a-paint-image">#draw-a-paint-image</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-draw-a-paint-image">4. Registering Custom Paint</a>
            <li><a href="#ref-for-draw-a-paint-image①">5. Paint Notation</a>
            <li><a href="#ref-for-draw-a-paint-image②">7. Drawing an image</a> <a
                    href="#ref-for-draw-a-paint-image③">(2)</a> <a href="#ref-for-draw-a-paint-image④">(3)</a> <a
                    href="#ref-for-draw-a-paint-image⑤">(4)</a> <a href="#ref-for-draw-a-paint-image⑥">(5)</a> <a
                    href="#ref-for-draw-a-paint-image⑦">(6)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="invoke-a-paint-callback">
        <b><a href="#invoke-a-paint-callback">#invoke-a-paint-callback</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-invoke-a-paint-callback">7. Drawing an image</a> <a
                    href="#ref-for-invoke-a-paint-callback①">(2)</a>
        </ul>
    </aside>
    <script>/* script-dfn-panel */

        document.body.addEventListener("click", function (e) {
            var queryAll = function (sel) { return [].slice.call(document.querySelectorAll(sel)); }
            // Find the dfn element or panel, if any, that was clicked on.
            var el = e.target;
            var target;
            var hitALink = false;
            while (el.parentElement) {
                if (el.tagName == "A") {
                    // Clicking on a link in a <dfn> shouldn't summon the panel
                    hitALink = true;
                }
                if (el.classList.contains("dfn-paneled")) {
                    target = "dfn";
                    break;
                }
                if (el.classList.contains("dfn-panel")) {
                    target = "dfn-panel";
                    break;
                }
                el = el.parentElement;
            }
            if (target != "dfn-panel") {
                // Turn off any currently "on" or "activated" panels.
                queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(function (el) {
                    el.classList.remove("on");
                    el.classList.remove("activated");
                });
            }
            if (target == "dfn" && !hitALink) {
                // open the panel
                var dfnPanel = document.querySelector(".dfn-panel[data-for='" + el.id + "']");
                if (dfnPanel) {
                    dfnPanel.classList.add("on");
                    var rect = el.getBoundingClientRect();
                    dfnPanel.style.left = window.scrollX + rect.right + 5 + "px";
                    dfnPanel.style.top = window.scrollY + rect.top + "px";
                    var panelRect = dfnPanel.getBoundingClientRect();
                    var panelWidth = panelRect.right - panelRect.left;
                    if (panelRect.right > document.body.scrollWidth && (rect.left - (panelWidth + 5)) > 0) {
                        // Reposition, because the panel is overflowing
                        dfnPanel.style.left = window.scrollX + rect.left - (panelWidth + 5) + "px";
                    }
                } else {
                    console.log("Couldn't find .dfn-panel[data-for='" + el.id + "']");
                }
            } else if (target == "dfn-panel") {
                // Switch it to "activated" state, which pins it.
                el.classList.add("activated");
                el.style.left = null;
                el.style.top = null;
            }

        });
    </script>
    <script>/* script-mdn-anno */

        document.body.addEventListener("click", (e) => {
            if (e.target.closest(".mdn-anno-btn")) {
                e.target.closest(".mdn-anno").classList.toggle("wrapped");
            }
        });
    </script>
    <script>/* script-var-click-highlighting */

        document.addEventListener("click", e => {
            if (e.target.nodeName == "VAR") {
                highlightSameAlgoVars(e.target);
            }
        });
        {
            const indexCounts = new Map();
            const indexNames = new Map();
            function highlightSameAlgoVars(v) {
                // Find the algorithm container.
                let algoContainer = null;
                let searchEl = v;
                while (algoContainer == null && searchEl != document.body) {
                    searchEl = searchEl.parentNode;
                    if (searchEl.hasAttribute("data-algorithm")) {
                        algoContainer = searchEl;
                    }
                }

                // Not highlighting document-global vars,
                // too likely to be unrelated.
                if (algoContainer == null) return;

                const algoName = algoContainer.getAttribute("data-algorithm");
                const varName = getVarName(v);
                const addClass = !v.classList.contains("selected");
                let highlightClass = null;
                if (addClass) {
                    const index = chooseHighlightIndex(algoName, varName);
                    indexCounts.get(algoName)[index] += 1;
                    indexNames.set(algoName + "///" + varName, index);
                    highlightClass = nameFromIndex(index);
                } else {
                    const index = previousHighlightIndex(algoName, varName);
                    indexCounts.get(algoName)[index] -= 1;
                    highlightClass = nameFromIndex(index);
                }

                // Find all same-name vars, and toggle their class appropriately.
                for (const el of algoContainer.querySelectorAll("var")) {
                    if (getVarName(el) == varName) {
                        el.classList.toggle("selected", addClass);
                        el.classList.toggle(highlightClass, addClass);
                    }
                }
            }
            function getVarName(el) {
                return el.textContent.replace(/(\s|\xa0)+/, " ").trim();
            }
            function chooseHighlightIndex(algoName, varName) {
                let indexes = null;
                if (indexCounts.has(algoName)) {
                    indexes = indexCounts.get(algoName);
                } else {
                    // 7 classes right now
                    indexes = [0, 0, 0, 0, 0, 0, 0];
                    indexCounts.set(algoName, indexes);
                }

                // If the element was recently unclicked,
                // *and* that color is still unclaimed,
                // give it back the same color.
                const lastIndex = previousHighlightIndex(algoName, varName);
                if (indexes[lastIndex] === 0) return lastIndex;

                // Find the earliest index with the lowest count.
                const minCount = Math.min.apply(null, indexes);
                let index = null;
                for (var i = 0; i < indexes.length; i++) {
                    if (indexes[i] == minCount) {
                        return i;
                    }
                }
            }
            function previousHighlightIndex(algoName, varName) {
                return indexNames.get(algoName + "///" + varName);
            }
            function nameFromIndex(index) {
                return "selected" + index;
            }
        }
    </script>
    <script src="/dropdown.js"></script>