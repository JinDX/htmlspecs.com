<!DOCTYPE html>
<html lang="zh-hans">

<head>
    <meta charset="UTF-8">
    <!-- <meta name="generator" content="ReSpec 35.6.0"> -->
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <style>
        span.example-title {
            text-transform: none
        }

        :is(aside, div).example,
        div.illegal-example {
            padding: .5em;
            margin: 1em 0;
            position: relative;
            clear: both
        }

        div.illegal-example {
            color: red
        }

        div.illegal-example p {
            color: #000
        }

        aside.example div.example {
            border-left-width: .1em;
            border-color: #999;
            background: #fff
        }
    </style>
    <style>
        .issue-label {
            text-transform: initial
        }

        .warning>p:first-child {
            margin-top: 0
        }

        .warning {
            padding: .5em;
            border-left-width: .5em;
            border-left-style: solid
        }

        span.warning {
            padding: .1em .5em .15em
        }

        .issue.closed span.issue-number {
            text-decoration: line-through
        }

        .issue.closed span.issue-number::after {
            content: " (Closed)";
            font-size: smaller
        }

        .warning {
            border-color: #f11;
            border-color: var(--warning-border, #f11);
            border-width: .2em;
            border-style: solid;
            background: #fbe9e9;
            background: var(--warning-bg, #fbe9e9);
            color: #000;
            color: var(--text, #000)
        }

        .warning-title:before {
            content: "⚠";
            font-size: 1.3em;
            float: left;
            padding-right: .3em;
            margin-top: -.3em
        }

        li.task-list-item {
            list-style: none
        }

        input.task-list-item-checkbox {
            margin: 0 .35em .25em -1.6em;
            vertical-align: middle
        }

        .issue a.respec-gh-label {
            padding: 5px;
            margin: 0 2px 0 2px;
            font-size: 10px;
            text-transform: none;
            text-decoration: none;
            font-weight: 700;
            border-radius: 4px;
            position: relative;
            bottom: 2px;
            border: none;
            display: inline-block
        }
    </style>
    <style>
        dfn {
            cursor: pointer
        }

        .dfn-panel {
            position: absolute;
            z-index: 35;
            min-width: 300px;
            max-width: 500px;
            padding: .5em .75em;
            margin-top: .6em;
            font-family: "Helvetica Neue", sans-serif;
            font-size: small;
            background: #fff;
            background: var(--indextable-hover-bg, #fff);
            color: #000;
            color: var(--text, #000);
            box-shadow: 0 1em 3em -.4em rgba(0, 0, 0, .3), 0 0 1px 1px rgba(0, 0, 0, .05);
            box-shadow: 0 1em 3em -.4em var(--tocsidebar-shadow, rgba(0, 0, 0, .3)), 0 0 1px 1px var(--tocsidebar-shadow, rgba(0, 0, 0, .05));
            border-radius: 2px
        }

        .dfn-panel:not(.docked)>.caret {
            position: absolute;
            top: -9px
        }

        .dfn-panel:not(.docked)>.caret::after,
        .dfn-panel:not(.docked)>.caret::before {
            content: "";
            position: absolute;
            border: 10px solid transparent;
            border-top: 0;
            border-bottom: 10px solid #fff;
            border-bottom-color: var(--indextable-hover-bg, #fff);
            top: 0
        }

        .dfn-panel:not(.docked)>.caret::before {
            border-bottom: 9px solid #a2a9b1;
            border-bottom-color: var(--indextable-hover-bg, #a2a9b1)
        }

        .dfn-panel * {
            margin: 0
        }

        .dfn-panel b {
            display: block;
            color: #000;
            color: var(--text, #000);
            margin-top: .25em
        }

        .dfn-panel ul a[href] {
            color: #333;
            color: var(--text, #333)
        }

        .dfn-panel>div {
            display: flex
        }

        .dfn-panel a.self-link {
            font-weight: 700;
            margin-right: auto
        }

        .dfn-panel .marker {
            padding: .1em;
            margin-left: .5em;
            border-radius: .2em;
            text-align: center;
            white-space: nowrap;
            font-size: 90%;
            color: #040b1c
        }

        .dfn-panel .marker.dfn-exported {
            background: #d1edfd;
            box-shadow: 0 0 0 .125em #1ca5f940
        }

        .dfn-panel .marker.idl-block {
            background: #8ccbf2;
            box-shadow: 0 0 0 .125em #0670b161
        }

        .dfn-panel a:not(:hover) {
            text-decoration: none !important;
            border-bottom: none !important
        }

        .dfn-panel a[href]:hover {
            border-bottom-width: 1px
        }

        .dfn-panel ul {
            padding: 0
        }

        .dfn-panel li {
            margin-left: 1em
        }

        .dfn-panel.docked {
            position: fixed;
            left: .5em;
            top: unset;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - .75em * 2 - .5em - .2em * 2);
            max-height: 30vh;
            overflow: auto
        }
    </style>


    <meta name="color-scheme" content="light dark">

    <title>设计令牌解析器模块 2025.10</title>



    <style id="respec-mainstyle">
        @keyframes pop {
            0% {
                transform: scale(1, 1)
            }

            25% {
                transform: scale(1.25, 1.25);
                opacity: .75
            }

            100% {
                transform: scale(1, 1)
            }
        }

        a.internalDFN {
            color: inherit;
            border-bottom: 1px solid #99c;
            text-decoration: none
        }

        a.externalDFN {
            color: inherit;
            border-bottom: 1px dotted #ccc;
            text-decoration: none
        }

        a.bibref {
            text-decoration: none
        }

        .respec-offending-element:target {
            animation: pop .25s ease-in-out 0s 1
        }

        .respec-offending-element,
        a[href].respec-offending-element {
            text-decoration: red wavy underline
        }

        @supports not (text-decoration:red wavy underline) {
            .respec-offending-element:not(pre) {
                display: inline-block
            }

            .respec-offending-element {
                background: url(data:image/gif;base64,R0lGODdhBAADAPEAANv///8AAP///wAAACwAAAAABAADAEACBZQjmIAFADs=) bottom repeat-x
            }
        }

        #references :target {
            background: #eaf3ff;
            animation: pop .4s ease-in-out 0s 1
        }

        cite .bibref {
            font-style: italic
        }

        a[href].orcid {
            padding-left: 4px;
            padding-right: 4px
        }

        a[href].orcid>svg {
            margin-bottom: -2px
        }

        ol.tof,
        ul.tof {
            list-style: none outside none
        }

        .caption {
            margin-top: .5em;
            font-style: italic
        }

        #issue-summary>ul {
            column-count: 2
        }

        #issue-summary li {
            list-style: none;
            display: inline-block
        }

        details.respec-tests-details {
            margin-left: 1em;
            display: inline-block;
            vertical-align: top
        }

        details.respec-tests-details>* {
            padding-right: 2em
        }

        details.respec-tests-details[open] {
            z-index: 999999;
            position: absolute;
            border: thin solid #cad3e2;
            border-radius: .3em;
            background-color: #fff;
            padding-bottom: .5em
        }

        details.respec-tests-details[open]>summary {
            border-bottom: thin solid #cad3e2;
            padding-left: 1em;
            margin-bottom: 1em;
            line-height: 2em
        }

        details.respec-tests-details>ul {
            width: 100%;
            margin-top: -.3em
        }

        details.respec-tests-details>li {
            padding-left: 1em
        }

        .self-link:hover {
            opacity: 1;
            text-decoration: none;
            background-color: transparent
        }

        aside.example .marker>a.self-link {
            color: inherit
        }

        .header-wrapper {
            display: flex;
            align-items: baseline
        }

        :is(h2, h3, h4, h5, h6):not(#toc>h2, #abstract>h2, #sotd>h2, .head>h2) {
            position: relative;
            left: -.5em
        }

        :is(h2, h3, h4, h5, h6):not(#toch2)+a.self-link {
            color: inherit;
            order: -1;
            position: relative;
            left: -1.1em;
            font-size: 1rem;
            opacity: .5
        }

        :is(h2, h3, h4, h5, h6)+a.self-link::before {
            content: "§";
            text-decoration: none;
            color: var(--heading-text)
        }

        :is(h2, h3)+a.self-link {
            top: -.2em
        }

        :is(h4, h5, h6)+a.self-link::before {
            color: #000
        }

        @media (max-width:767px) {
            dd {
                margin-left: 0
            }
        }

        @media print {
            .removeOnSave {
                display: none
            }
        }
    </style>
    <meta name="description" content="本规范扩展了该格式，并描述了一种在多种情境（如“明亮模式”和“暗黑模式”配色主题）下使用设计令牌的方法。">
    <link rel="canonical" href="https://www.designtokens.org/TR/2025.10/resolver/">
    <style>
        .hljs {
            --base: #fafafa;
            --mono-1: #383a42;
            --mono-2: #686b77;
            --mono-3: #717277;
            --hue-1: #0b76c5;
            --hue-2: #336ae3;
            --hue-3: #a626a4;
            --hue-4: #42803c;
            --hue-5: #ca4706;
            --hue-5-2: #c91243;
            --hue-6: #986801;
            --hue-6-2: #9a6a01
        }

        @media (prefers-color-scheme:dark) {
            .hljs {
                --base: #282c34;
                --mono-1: #abb2bf;
                --mono-2: #818896;
                --mono-3: #5c6370;
                --hue-1: #56b6c2;
                --hue-2: #61aeee;
                --hue-3: #c678dd;
                --hue-4: #98c379;
                --hue-5: #e06c75;
                --hue-5-2: #be5046;
                --hue-6: #d19a66;
                --hue-6-2: #e6c07b
            }
        }

        .hljs {
            display: block;
            overflow-x: auto;
            padding: .5em;
            color: #383a42;
            color: var(--mono-1, #383a42);
            background: #fafafa;
            background: var(--base, #fafafa)
        }

        .hljs-comment,
        .hljs-quote {
            color: #717277;
            color: var(--mono-3, #717277);
            font-style: italic
        }

        .hljs-doctag,
        .hljs-formula,
        .hljs-keyword {
            color: #a626a4;
            color: var(--hue-3, #a626a4)
        }

        .hljs-deletion,
        .hljs-name,
        .hljs-section,
        .hljs-selector-tag,
        .hljs-subst {
            color: #ca4706;
            color: var(--hue-5, #ca4706);
            font-weight: 700
        }

        .hljs-literal {
            color: #0b76c5;
            color: var(--hue-1, #0b76c5)
        }

        .hljs-addition,
        .hljs-attribute,
        .hljs-meta-string,
        .hljs-regexp,
        .hljs-string {
            color: #42803c;
            color: var(--hue-4, #42803c)
        }

        .hljs-built_in,
        .hljs-class .hljs-title {
            color: #9a6a01;
            color: var(--hue-6-2, #9a6a01)
        }

        .hljs-attr,
        .hljs-number,
        .hljs-selector-attr,
        .hljs-selector-class,
        .hljs-selector-pseudo,
        .hljs-template-variable,
        .hljs-type,
        .hljs-variable {
            color: #986801;
            color: var(--hue-6, #986801)
        }

        .hljs-bullet,
        .hljs-link,
        .hljs-meta,
        .hljs-selector-id,
        .hljs-symbol,
        .hljs-title {
            color: #336ae3;
            color: var(--hue-2, #336ae3)
        }

        .hljs-emphasis {
            font-style: italic
        }

        .hljs-strong {
            font-weight: 700
        }

        .hljs-link {
            text-decoration: underline
        }
    </style>
    <style>
        var:hover {
            text-decoration: underline;
            cursor: pointer
        }

        var.respec-hl {
            color: var(--color, #000);
            background-color: var(--bg-color);
            box-shadow: 0 0 0 2px var(--bg-color)
        }

        @media (prefers-color-scheme:dark) {
            var.respec-hl {
                filter: saturate(.9) brightness(.9)
            }
        }

        var.respec-hl-c1 {
            --bg-color: #f4d200
        }

        var.respec-hl-c2 {
            --bg-color: #ff87a2
        }

        var.respec-hl-c3 {
            --bg-color: #96e885
        }

        var.respec-hl-c4 {
            --bg-color: #3eeed2
        }

        var.respec-hl-c5 {
            --bg-color: #eacfb6
        }

        var.respec-hl-c6 {
            --bg-color: #82ddff
        }

        var.respec-hl-c7 {
            --bg-color: #ffbcf2
        }

        @media print {
            var.respec-hl {
                background: 0 0;
                color: #000;
                box-shadow: unset
            }
        }
    </style>
    <style>
        var {
            position: relative;
            cursor: pointer
        }

        var[data-type]::after,
        var[data-type]::before {
            position: absolute;
            left: 50%;
            top: -6px;
            opacity: 0;
            transition: opacity .4s;
            pointer-events: none
        }

        var[data-type]::before {
            content: "";
            transform: translateX(-50%);
            border-width: 4px 6px 0 6px;
            border-style: solid;
            border-color: transparent;
            border-top-color: #222
        }

        var[data-type]::after {
            content: attr(data-type);
            transform: translateX(-50%) translateY(-100%);
            background: #222;
            text-align: center;
            font-family: "Dank Mono", "Fira Code", monospace;
            font-style: normal;
            padding: 6px;
            border-radius: 3px;
            color: #daca88;
            text-indent: 0;
            font-weight: 400
        }

        var[data-type]:hover::after,
        var[data-type]:hover::before {
            opacity: 1
        }
    </style>
    <script id="initialUserConfig" type="application/json">{
  "specStatus": "CG-FINAL",
  "group": "design-tokens",
  "thisVersion": "https://www.w3.org/community/reports/design-tokens/2025.10/resolver/",
  "latestVersion": "https://www.designtokens.org/TR/2025.10/resolver/",
  "prevVersion": null,
  "edDraftURI": null,
  "editors": [
    {
      "name": "Joren Broekema",
      "url": "https://code-workshop-kit.com/"
    },
    {
      "name": "Esther Cheran",
      "url": "https://github.com/esthercheran"
    },
    {
      "name": "Mike Kamminga",
      "url": "https://hyma.io"
    },
    {
      "name": "Andrew L’Homme"
    },
    {
      "name": "Drew Powers",
      "url": "https://pow.rs"
    },
    {
      "name": "Matthew Ström-Awn",
      "url": "https://matthewstrom.com"
    },
    {
      "name": "Lilith Wittmann",
      "url": "https://github.com/LilithWittmann"
    }
  ],
  "authors": [
    {
      "name": "Louis Chenais",
      "url": "https://bsky.app/profile/lucho.cool"
    },
    {
      "name": "James Nash",
      "url": "https://cirrus.twiddles.com"
    }
  ],
  "github": {
    "repoURL": "https://github.com/design-tokens/community-group",
    "branch": "main"
  },
  "tocIntroductory": true,
  "logos": [
    {
      "src": "/assets/dtcg-logo-on-color.svg",
      "url": "https://www.designtokens.org",
      "alt": "Design Tokens Community Group",
      "width": 128,
      "height": 128,
      "id": "dtcg-logo"
    }
  ],
  "publishISODate": "2025-10-28T00:00:00.000Z",
  "generatedSubtitle": "Final Community Group Report 28 October 2025"
}</script>
    <link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2021/cg-final">
    <link rel="stylesheet" media="(prefers-color-scheme: dark)" href="https://www.w3.org/StyleSheets/TR/2021/dark.css">
</head>

<body class="h-entry">
    <div class="head">
        <p class="logos"><a class="logo" href="https://www.designtokens.org"><img alt="Design Tokens Community Group"
                    height="128" id="dtcg-logo" src="https://www.designtokens.org/assets/dtcg-logo-on-color.svg"
                    width="128">
            </a></p>
        <h1 id="title" class="title">设计令牌解析器模块 2025.10</h1>
        <p id="w3c-state">
            <a href="https://www.w3.org/standards/types#reports">最终社区组报告</a>
            <time class="dt-published" datetime="2025-10-28">2025年10月28日</time>
        </p>
        <dl>
            <dt>本版本：</dt>
            <dd>
                <a class="u-url"
                    href="https://www.w3.org/community/reports/design-tokens/2025.10/">https://www.w3.org/community/reports/design-tokens/2025.10/</a>
            </dd>
            <dt>最新发布版本：</dt>
            <dd>
                <a
                    href="https://www.designtokens.org/TR/2025.10/resolver/">https://www.designtokens.org/TR/2025.10/resolver/</a>
            </dd>

            <dt>编辑：</dt>
            <dd class="editor p-author h-card vcard">
                <a class="u-url url p-name fn" href="https://code-workshop-kit.com/">Joren Broekema</a>
            </dd>
            <dd class="editor p-author h-card vcard">
                <a class="u-url url p-name fn" href="https://github.com/esthercheran">Esther Cheran</a>
            </dd>
            <dd class="editor p-author h-card vcard">
                <a class="u-url url p-name fn" href="https://hyma.io">Mike Kamminga</a>
            </dd>
            <dd class="editor p-author h-card vcard">
                <span class="p-name fn">Andrew L’Homme</span>
            </dd>
            <dd class="editor p-author h-card vcard">
                <a class="u-url url p-name fn" href="https://pow.rs">Drew Powers</a>
            </dd>
            <dd class="editor p-author h-card vcard">
                <a class="u-url url p-name fn" href="https://matthewstrom.com">Matthew Ström-Awn</a>
            </dd>
            <dd class="editor p-author h-card vcard">
                <a class="u-url url p-name fn" href="https://github.com/LilithWittmann">Lilith Wittmann</a>
            </dd>

            <dt>作者：</dt>
            <dd class="editor p-author h-card vcard">
                <a class="u-url url p-name fn" href="https://bsky.app/profile/lucho.cool">Louis Chenais</a>
            </dd>
            <dd class="editor p-author h-card vcard">
                <a class="u-url url p-name fn" href="https://cirrus.twiddles.com">James Nash</a>
            </dd>
            <dt>反馈：</dt>
            <dd>
                <a href="https://github.com/design-tokens/community-group/">GitHub design-tokens/community-group</a>
                (<a href="https://github.com/design-tokens/community-group/pulls/">拉取请求</a>,
                <a href="https://github.com/design-tokens/community-group/issues/new/choose">新建议</a>,
                <a href="https://github.com/design-tokens/community-group/issues/">未解决问题</a>)
            </dd>
        </dl>

        <p class="copyright">
            <a href="https://www.w3.org/policies/#copyright">Copyright</a>
            ©
            2025

            the Contributors to the Design Tokens Resolver Module 2025.10
            Specification, published by the
            <a href="https://www.w3.org/groups/cg/design-tokens">Design Tokens Community Group</a> under the
            <a href="https://www.w3.org/community/about/agreements/fsa/">W3C Community Final Specification Agreement
                (FSA)</a>. A human-readable
            <a href="https://www.w3.org/community/about/agreements/fsa-deed/">summary</a>
            is available.

        </p>
        <hr title="Separator for header">
    </div>
    <section id="abstract" class="introductory">
        <h2>摘要</h2>
        <p>
            本规范扩展了<a href="../format/">格式</a>，并描述了一种在多种情境（如“明亮模式”和“暗黑模式”配色主题）下使用<a href="../">设计令牌</a>的方法。
        </p>
    </section>

    <section id="sotd" class="introductory">
        <h2>本文档状态</h2>
        <p>
            本规范由<a href="https://www.w3.org/groups/cg/design-tokens">Design Tokens 社区组</a>发布。它不是 W3C 标准，也不在 W3C 标准制定轨道上。

            请注意，根据
            <a href="https://www.w3.org/community/about/agreements/final/">W3C 社区最终规范协议(FSA)</a>
            还适用其他条件。

            了解更多关于
            <a href="https://www.w3.org/community/">W3C 社区与业务组</a>的信息。
        </p>
        <p>
            本节描述了本文档在发布时的状态。其他文档可能会取代本文件。当前 W3C 社区组报告列表和本报告的最新修订版可在 W3C 社区组报告索引中找到，
            <a href="https://www.w3.org/community/reports/">https://www.w3.org/community/reports/</a>。
        </p>
        <p>
            本文档由 DTCG 作为
            <a href="https://www.w3.org/policies/process/#RecsCR">候选推荐</a>
            发布，遵循 W3C 流程所给定义。对本草案的贡献受
            <a href="https://www.w3.org/community/about/process/cla">
                社区贡献者许可协议（CLA）</a>的约束，具体见
            <a href="https://www.w3.org/community/about/process/#cgroups">W3C 社区组流程</a>。
        </p>
        <p>
            尽管不是 W3C 推荐标准，此分类旨在澄清：经过广泛共识建立后，本规范旨在被实现。
        </p>
        <p>
            <strong>本规范被认为是稳定的</strong>。后续更新将在后续规范中发布。
        </p>
        <p>
            建议优先通过<a href="https://github.com/design-tokens/community-group/issues/">GitHub Issues</a>讨论本规范。

        </p>
    </section>
    <nav id="toc">
        <h2 class="introductory" id="table-of-contents">目录</h2>
        <ol class="toc">
            <li class="tocline"><a class="tocxref" href="#abstract">摘要</a></li>
            <li class="tocline"><a class="tocxref" href="#sotd">本文档状态</a></li>
            <li class="tocline"><a class="tocxref" href="#introduction"><bdi class="secno">1. </bdi>简介</a>
            </li>
            <li class="tocline"><a class="tocxref" href="#terminology"><bdi class="secno">2. </bdi>术语</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#orthogonality"><bdi class="secno">2.1
                            </bdi>正交性</a></li>
                    <li class="tocline"><a class="tocxref" href="#permutation"><bdi class="secno">2.2
                            </bdi>排列</a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#filetype"><bdi class="secno">3. </bdi>文件类型</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#format"><bdi class="secno">3.1 </bdi>格式</a></li>
                    <li class="tocline"><a class="tocxref" href="#file-extension"><bdi class="secno">3.2 </bdi>文件扩展名</a>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#mime-type"><bdi class="secno">3.3 </bdi>MIME 类型</a>
                    </li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#syntax"><bdi class="secno">4. </bdi>语法</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#root-level-properties"><bdi class="secno">4.1
                            </bdi>根级属性</a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#name"><bdi class="secno">4.1.1 </bdi>名称</a>
                            </li>
                            <li class="tocline"><a class="tocxref" href="#version"><bdi class="secno">4.1.2
                                    </bdi>版本</a></li>
                            <li class="tocline"><a class="tocxref" href="#description"><bdi class="secno">4.1.3
                                    </bdi>描述</a></li>
                            <li class="tocline"><a class="tocxref" href="#sets"><bdi class="secno">4.1.4 </bdi>集合</a>
                            </li>
                            <li class="tocline"><a class="tocxref" href="#modifiers"><bdi class="secno">4.1.5
                                    </bdi>修饰符</a>
                                <ol class="toc">
                                    <li class="tocline"><a class="tocxref" href="#contexts"><bdi class="secno">4.1.5.1
                                            </bdi>上下文</a></li>
                                    <li class="tocline"><a class="tocxref" href="#description-0"><bdi
                                                class="secno">4.1.5.2 </bdi>描述</a></li>
                                    <li class="tocline"><a class="tocxref" href="#default"><bdi class="secno">4.1.5.3
                                            </bdi>默认值</a></li>
                                    <li class="tocline"><a class="tocxref" href="#resolution-count"><bdi
                                                class="secno">4.1.5.4 </bdi>解析数量</a></li>
                                </ol>
                            </li>
                            <li class="tocline"><a class="tocxref" href="#resolution-order"><bdi class="secno">4.1.6
                                    </bdi>解析顺序</a>
                                <ol class="toc">
                                    <li class="tocline"><a class="tocxref" href="#inline-sets-and-modifiers"><bdi
                                                class="secno">4.1.6.1 </bdi>内联集合与修饰符</a></li>
                                    <li class="tocline"><a class="tocxref" href="#ordering-of-sets-and-modifiers"><bdi
                                                class="secno">4.1.6.2 </bdi>集合与修饰符的排序</a></li>
                                </ol>
                            </li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#reference-objects"><bdi class="secno">4.2
                            </bdi>引用对象</a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#invalid-pointers"><bdi class="secno">4.2.1
                                    </bdi>无效指针</a></li>
                            <li class="tocline"><a class="tocxref" href="#extending"><bdi class="secno">4.2.2
                                    </bdi>扩展</a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#extensions"><bdi class="secno">4.3
                            </bdi>$extensions</a></li>
                    <li class="tocline"><a class="tocxref" href="#defs"><bdi class="secno">4.4 </bdi>$defs</a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#inputs"><bdi class="secno">5. </bdi>输入</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#case-sensitivity"><bdi class="secno">5.1
                            </bdi>大小写敏感性</a></li>
                    <li class="tocline"><a class="tocxref" href="#enforcing-strings"><bdi class="secno">5.2
                            </bdi>强制使用字符串</a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#resolution-logic"><bdi class="secno">6. </bdi>解析逻辑</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#input-validation"><bdi class="secno">6.1
                            </bdi>输入验证</a></li>
                    <li class="tocline"><a class="tocxref" href="#ordering"><bdi class="secno">6.2 </bdi>排序</a>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#aliases"><bdi class="secno">6.3 </bdi>别名</a></li>
                    <li class="tocline"><a class="tocxref" href="#resolution"><bdi class="secno">6.4
                            </bdi>解析</a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#bundling"><bdi class="secno">7. </bdi>打包</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#inlining-files"><bdi class="secno">7.1 </bdi>内联文件</a>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#using-defs-for-files"><bdi class="secno">7.2
                            </bdi>为文件使用 $defs</a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#conformance"><bdi class="secno">8. </bdi>一致性</a></li>
            <li class="tocline"><a class="tocxref" href="#acknowledgements"><bdi class="secno">A.
                    </bdi>致谢</a></li>
            <li class="tocline"><a class="tocxref" href="#references"><bdi class="secno">B. </bdi>参考文献</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#normative-references"><bdi class="secno">B.1
                            </bdi>规范性参考</a></li>
                </ol>
            </li>
        </ol>
    </nav>

    <section id="introduction" class="informative">
        <div class="header-wrapper">
            <h2 id="x1-introduction"><bdi class="secno">1. </bdi>简介</h2><a class="self-link" href="#introduction"
                aria-label="第1节的永久链接。"></a>
        </div>
        <p><em>本节为非规范性内容。</em></p>
        <p>设计令牌的使用者常需要在不同上下文中表达可替换的值。例如（但不限于）：</p>
        <ul>
            <li><strong>主题化</strong>，如浅色模式、深色模式以及高对比度配色模式</li>
            <li><strong>尺寸</strong>，如手机（小）、平板（中）、桌面（大）</li>
            <li><strong>无障碍模式</strong>，如减少动画、色盲辅助等</li>
        </ul>
        <p>然而，这些可替换的上下文容易遭遇<a href="https://en.wikipedia.org/wiki/Combinatorial_explosion">组合爆炸</a>，使得存储与管理变得笨重。</p>
        <p>本格式描述了一种机制，用于在所有上下文中对令牌的重复值进行去重，并且枚举所有上下文的排列组合。</p>
    </section>

    <section id="terminology">
        <div class="header-wrapper">
            <h2 id="x2-terminology"><bdi class="secno">2. </bdi>术语</h2><a class="self-link" href="#terminology"
                aria-label="第2节的永久链接。"></a>
        </div>
        <section class="informative" id="orthogonality">
            <div class="header-wrapper">
                <h3 id="x2-1-orthogonality"><bdi class="secno">2.1 </bdi>正交性</h3><a class="self-link"
                    href="#orthogonality" aria-label="第2.1节的永久链接。"></a>
            </div>
            <p><em>本节为非规范性内容。</em></p>


            <p>一种特征，描述两个或多个上下文分别仅作用于互斥的令牌，即不发生重叠。修饰符<em class="rfc2119">可以（MAY）</em>是正交的，但并非必须。</p>
            <p>尽可能使修饰符正交化可降低认知负担并减少用户错误。</p>
            <aside class="example" id="example-non-orthogonal-modifiers">
                <div class="marker">
                    <a class="self-link" href="#example-non-orthogonal-modifiers">示例<bdi> 1</bdi></a><span
                        class="example-title">：非正交修饰符</span>
                </div>

                <p>给定以下修饰符：</p>
                <ol>
                    <li><strong>theme</strong>修饰符具有<strong>light</strong>与<strong>dark</strong>值。在其值中，它为<code>color.button</code>
                        令牌提供一个值。
                    </li>
                    <li><strong>brand</strong>修饰符具有<strong>brandA</strong>与<strong>brandB</strong>值。在其值中，它为<code>color.button</code>
                        令牌提供一个值。
                    </li>
                </ol>
                <p>由于两个修饰符都为<code>color.button</code>令牌提供值，这意味着数组顺序决定最终值，即<strong>非正交。</strong></p>
            </aside>

        </section>

        <section id="permutation">
            <div class="header-wrapper">
                <h3 id="x2-2-permutation"><bdi class="secno">2.2 </bdi>排列</h3><a class="self-link" href="#permutation"
                    aria-label="第2.2节的永久链接。"></a>
            </div>
            <p>排列是解析器文档的某一个可能的最终排列。一个排列与一个<a href="#inputs">输入</a>一一对应，但“输入”强调所使用的<a href="#modifiers">修饰符</a>
                上下文，而“排列”强调最终的令牌集合。</p>
        </section>
    </section>

    <section id="filetype">
        <div class="header-wrapper">
            <h2 id="x3-filetype"><bdi class="secno">3. </bdi>文件类型</h2><a class="self-link" href="#filetype"
                aria-label="第3节的永久链接。"></a>
        </div>
        <section id="format">
            <div class="header-wrapper">
                <h3 id="x3-1-format"><bdi class="secno">3.1 </bdi>格式</h3><a class="self-link" href="#format"
                    aria-label="第3.1节的永久链接。"></a>
            </div>
            <p>解析器文档<em class="rfc2119">必须（MUST）</em>使用标准 JSON 语法（[<cite><a class="bibref" data-link-type="biblio"
                        href="#bib-rfc8259"
                        title="The JavaScript Object Notation (JSON) Data Interchange Format">RFC8259</a></cite>]）。</p>
            <p>工具<em class="rfc2119">可以（MAY）</em>支持诸如<a href="https://jsonc.org/">JSONC</a>或
                <a href="https://json5.org/">JSON5</a>等扩展，只要文档能够转换为正常 JSON 且不影响令牌值。
            </p>
        </section>
        <section id="file-extension">
            <div class="header-wrapper">
                <h3 id="x3-2-file-extension"><bdi class="secno">3.2 </bdi>文件扩展名</h3><a class="self-link"
                    href="#file-extension" aria-label="第3.2节的永久链接。"></a>
            </div>
            <p>用户<em class="rfc2119">应该（SHOULD）</em>使用<code>.resolver.json</code>作为解析器文档的文件扩展名。</p>
        </section>
        <section id="mime-type">
            <div class="header-wrapper">
                <h3 id="x3-3-mime-type"><bdi class="secno">3.3 </bdi>MIME 类型</h3><a class="self-link" href="#mime-type"
                    aria-label="第3.3节的永久链接。"></a>
            </div>
            <p>当通过 HTTP 传输解析器文档时，用户<em class="rfc2119">应该（SHOULD）</em>在
                <code>Content-Type</code> 头（[<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc1341"
                        title="MIME (Multipurpose Internet Mail Extensions): Mechanisms for Specifying and Describing the Format of Internet Message Bodies">RFC1341</a></cite>]）
                中使用预期的<code>application/json</code> MIME 类型（[<cite><a class="bibref" data-link-type="biblio"
                        href="#bib-rfc6838"
                        title="Media Type Specifications and Registration Procedures">RFC6838</a></cite>]）。
                用户<em class="rfc2119">不应该（SHOULD NOT）</em>使用自定义或非预期的 MIME 类型。
            </p>
        </section>
    </section>

    <section id="syntax">
        <div class="header-wrapper">
            <h2 id="x4-syntax"><bdi class="secno">4. </bdi>语法</h2><a class="self-link" href="#syntax"
                aria-label="第4节的永久链接。"></a>
        </div>
        <section id="root-level-properties">
            <div class="header-wrapper">
                <h3 id="x4-1-root-level-properties"><bdi class="secno">4.1 </bdi>根级属性</h3><a class="self-link"
                    href="#root-level-properties" aria-label="第4.1节的永久链接。"></a>
            </div>
            <p>一个解析器文档在根级包含以下属性：</p>
            <table>
                <thead>
                    <tr>
                        <th align="left">名称</th>
                        <th align="left">类型</th>
                        <th align="center">必需</th>
                        <th align="left">描述</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td align="left"><a href="#name"><strong>name</strong></a></td>
                        <td align="left"><code>string</code></td>
                        <td align="center"></td>
                        <td align="left">文档的简短、可读名称。</td>
                    </tr>
                    <tr>
                        <td align="left"><a href="#version"><strong>version</strong></a></td>
                        <td align="left"><code>YYYY.MM</code></td>
                        <td align="center">Y</td>
                        <td align="left">版本。必须为<code>2025.10</code>。</td>
                    </tr>
                    <tr>
                        <td align="left"><a href="#description"><strong>description</strong></a></td>
                        <td align="left"><code>string</code></td>
                        <td align="center"></td>
                        <td align="left">本文件的人类可读描述。</td>
                    </tr>
                    <tr>
                        <td align="left"><a href="#sets"><strong>sets</strong></a></td>
                        <td align="left">Map[<code>string</code>, Set]</td>
                        <td align="center"></td>
                        <td align="left">集合的定义。</td>
                    </tr>
                    <tr>
                        <td align="left"><a href="#modifiers"><strong>modifiers</strong></a></td>
                        <td align="left">Map[`string, Modifier]</td>
                        <td align="center"></td>
                        <td align="left">修饰符的定义。</td>
                    </tr>
                    <tr>
                        <td align="left"><a href="#resolution-order"><strong>resolutionOrder</strong></a></td>
                        <td align="left"><code>(ReferenceObject | Set | Modifier)[]</code></td>
                        <td align="center">Y</td>
                        <td align="left">集合与修饰符的解析顺序。</td>
                    </tr>
                </tbody>
            </table>
            <section id="name">
                <div class="header-wrapper">
                    <h4 id="x4-1-1-name"><bdi class="secno">4.1.1 </bdi>名称</h4><a class="self-link" href="#name"
                        aria-label="第4.1.1节的永久链接。"></a>
                </div>
                <p>文档<em class="rfc2119">可以（MAY）</em>在根级提供一个可读的<code>name</code>。这有助于在文件名不足以区分时区分不同的解析器文档。</p>
            </section>
            <section id="version">
                <div class="header-wrapper">
                    <h4 id="x4-1-2-version"><bdi class="secno">4.1.2 </bdi>版本</h4><a class="self-link" href="#version"
                        aria-label="第4.1.2节的永久链接。"></a>
                </div>
                <p>文档<em class="rfc2119">必须（MUST）</em>在根级提供版本，并且<em
                        class="rfc2119">必须（MUST）</em>为<code>2025.10</code>。这为未来可能引入的破坏性变更保留空间。</p>
            </section>
            <section id="description">
                <div class="header-wrapper">
                    <h4 id="x4-1-3-description"><bdi class="secno">4.1.3 </bdi>描述</h4><a class="self-link"
                        href="#description" aria-label="第4.1.3节的永久链接。"></a>
                </div>
                <p>文档<em class="rfc2119">可以（MAY）</em>在根级提供<code>description</code>。它可用于补充<a
                        href="#name">name</a>中未包含的说明或上下文。</p>
            </section>
            <section id="sets">
                <div class="header-wrapper">
                    <h4 id="x4-1-4-sets"><bdi class="secno">4.1.4 </bdi>集合（Sets）</h4><a class="self-link" href="#sets"
                        aria-label="第4.1.4节的永久链接。"></a>
                </div>
                <p>集合是以<a href="../format/">DTCG 格式</a>组织的一组设计令牌。集合<em
                        class="rfc2119">必须（MUST）</em>包含一个<code>sources</code>数组，其中直接声明令牌，或一个指向包含设计令牌的 JSON 文件的<a
                        href="#reference-objects">引用对象</a>，或两者的任意组合。</p>
                <p>集合<em class="rfc2119">可以（MAY）</em>包含<code>description</code>，用于描述集合的目的。</p>
                <p>如果数组声明了多个来源，它们将按照数组顺序合并，这意味着如果一个令牌被多次声明，则数组中的最后一次出现将成为最终值。工具<em class="rfc2119">必须（MUST）</em>遵循数组顺序。
                </p>
                <aside class="example" id="example-sets-comprising-remote-files-and-inline-tokens">
                    <div class="marker">
                        <a class="self-link" href="#example-sets-comprising-remote-files-and-inline-tokens">示例<bdi>
                                2</bdi></a><span class="example-title">：由远程文件与内联令牌构成的集合</span>
                    </div>

                    <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"sets"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"color"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Color tokens"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"sources"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"base/legacy.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"base/foundation.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"base/color-ramps.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"base/semantic.json"</span> <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"size"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Dimension, margin, and spacing tokens"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"sources"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"space"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"base"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
              <span class="hljs-attr">"100"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">"$type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"dimension"</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"$value"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"unit"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"rem"</span> <span class="hljs-punctuation">}</span>
              <span class="hljs-punctuation">}</span>
            <span class="hljs-punctuation">}</span>
          <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
                </aside>

            </section>
            <section id="modifiers">
                <div class="header-wrapper">
                    <h4 id="x4-1-5-modifiers"><bdi class="secno">4.1.5 </bdi>修饰符（Modifiers）</h4><a class="self-link"
                        href="#modifiers" aria-label="第4.1.5节的永久链接。"></a>
                </div>
                <p>修饰符与<a href="#sets">集合</a>相似，但允许通过<a href="#contexts">contexts</a>映射进行条件包含。</p>
                <section id="contexts">
                    <div class="header-wrapper">
                        <h5 id="x4-1-5-1-contexts"><bdi class="secno">4.1.5.1 </bdi>上下文（Contexts）</h5><a
                            class="self-link" href="#contexts" aria-label="第4.1.5.1节的永久链接。"></a>
                    </div>
                    <p>修饰符<em
                            class="rfc2119">必须（MUST）</em>声明一个<code>contexts</code>映射，将<code>string</code>值映射到一个令牌来源数组。令牌来源的数组<em
                            class="rfc2119">必须（MUST）</em>是<a
                            href="#reference-objects">ReferenceObject</a>，内联令牌，或两者的任意组合。
                    </p>
                    <p>修饰符<em class="rfc2119">应该（SHOULD）</em>至少有两个<code>contexts</code>，因为只有一个时等效于一个<a
                            href="#sets">集合</a>。修饰符<em class="rfc2119">不得（MUST NOT）</em>有空的<code>contexts</code>映射。工具<em
                            class="rfc2119">应该（SHOULD）</em>对仅有1个上下文的修饰符抛出错误。工具<em
                            class="rfc2119">必须（MUST）</em>对0个上下文的修饰符抛出错误。</p>
                    <p>与<a href="#sets">集合</a>一致，数组顺序<em class="rfc2119">必须（MUST）</em>得到遵循，以便在冲突情况下，数组中令牌的最后一次出现产生最终值。
                    </p>
                    <p>修饰符<em class="rfc2119">可以（MAY）</em>在某个上下文值中引用一个<a href="#sets">集合</a>。但修饰符<em
                            class="rfc2119">不得（MUST NOT）</em>引用任何其他修饰符，即使是同一修饰符中的另一个上下文也不行。</p>
                    <aside class="example" id="example-color-theme-modifier">
                        <div class="marker">
                            <a class="self-link" href="#example-color-theme-modifier">示例<bdi> 3</bdi></a><span
                                class="example-title">：配色主题修饰符</span>
                        </div>

                        <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"modifiers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"theme"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Color theme"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"contexts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"light"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"theme/light.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"lightHighContrast"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"theme/light.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"theme/dark-high-contrast.json"</span> <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"dark"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"theme/dark.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"darkHighContrast"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"theme/dark.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"theme/dark-high-contrast.json"</span> <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"default"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"light"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
                    </aside>

                    <aside class="example" id="example-modifier-referencing-a-set">
                        <div class="marker">
                            <a class="self-link" href="#example-modifier-referencing-a-set">示例<bdi>
                                    4</bdi></a><span class="example-title">：在修饰符中引用集合</span>
                        </div>

                        <p>修饰符<em class="rfc2119">可以（MAY）</em>在上下文值中引用一个<a
                                href="#sets">集合</a>。这等效于将该集合的<code>sources</code>内联至同一数组。例如，以下内容：</p>
                        <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"sets"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"baseSize"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"sources"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"size/base.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"modifiers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"size"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Application size"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"contexts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"small"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/sets/baseSize"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"device/mobile.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"typography/mobile.json"</span> <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"medium"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/sets/baseSize"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"device/tablet.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"typography/base.json"</span> <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"large"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/sets/baseSize"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"device/desktop.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"typography/base.json"</span> <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
                        <p>等效于：</p>
                        <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"sets"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"baseSize"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-comment">// …</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"modifiers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"size"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Application size"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"contexts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"small"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"size/base.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"device/mobile.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"typography/mobile.json"</span> <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"medium"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"size/base.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"device/tablet.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"typography/base.json"</span> <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"large"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"size/base.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"device/desktop.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"typography/base.json"</span> <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
                    </aside>

                </section>
                <section id="description-0">
                    <div class="header-wrapper">
                        <h5 id="x4-1-5-2-description"><bdi class="secno">4.1.5.2 </bdi>描述</h5><a class="self-link"
                            href="#description-0" aria-label="第4.1.5.2节的永久链接。"></a>
                    </div>
                    <p>修饰符<em class="rfc2119">可以（MAY）</em>声明一个可读的<code>description</code>。</p>
                </section>
                <section id="default">
                    <div class="header-wrapper">
                        <h5 id="x4-1-5-3-default"><bdi class="secno">4.1.5.3 </bdi>默认值</h5><a class="self-link"
                            href="#default" aria-label="第4.1.5.3节的永久链接。"></a>
                    </div>
                    <p>修饰符<em class="rfc2119">可以（MAY）</em>声明一个<code>default</code>值，该值<em
                            class="rfc2119">必须（MUST）</em>与<code>contexts</code>中的某个键匹配。若该值不在<code>contexts</code>中，工具<em
                            class="rfc2119">必须（MUST）</em>抛出错误。
                    </p>
                </section>
                <section id="resolution-count">
                    <div class="header-wrapper">
                        <h5 id="x4-1-5-4-resolution-count"><bdi class="secno">4.1.5.4 </bdi>解析数量</h5><a
                            class="self-link" href="#resolution-count" aria-label="第4.1.5.4节的永久链接。"></a>
                    </div>
                    <p>文档可能生成的<a data-link-type="dfn"
                            href="https://www.w3.org/policies/process/#group-decision">解析</a>数量可通过所有修饰符的<code>contexts</code>数量的乘积来预测。
                    </p>
                    <aside class="example" id="example-calculating-resolutions">
                        <div class="marker">
                            <a class="self-link" href="#example-calculating-resolutions">示例<bdi> 5</bdi></a><span
                                class="example-title">：计算解析数量</span>
                        </div>

                        <ul>
                            <li>如果一个文档有2个修饰符且每个都有2个<code>contexts</code>，该解析器可产生4个解析，即2 × 2。</li>
                            <li>如果一个文档有3个修饰符，分别有4、3、2个<code>contexts</code>，该解析器可产生24个解析，即4 × 3 × 2。</li>
                        </ul>
                    </aside>

                </section>
            </section>
            <section id="resolution-order">
                <div class="header-wrapper">
                    <h4 id="x4-1-6-resolution-order"><bdi class="secno">4.1.6 </bdi>解析顺序（Resolution Order）</h4><a
                        class="self-link" href="#resolution-order" aria-label="第4.1.6节的永久链接。"></a>
                </div>
                <p><code>resolutionOrder</code>键是一个<a href="#sets">集合</a>与<a
                        href="#modifiers">修饰符</a>的数组，按顺序生成令牌的最终结果。顺序具有重要意义，若产生冲突，数组中靠后的令牌会覆盖之前的令牌。</p>
                <aside class="example" id="example-composing-sets-and-modifiers-together">
                    <div class="marker">
                        <a class="self-link" href="#example-composing-sets-and-modifiers-together">示例<bdi>
                                6</bdi></a><span class="example-title">：组合集合与修饰符</span>
                    </div>

                    <p>给定一个包括多个集合与修饰符的<code>resolutionOrder</code>：</p>
                    <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"sets"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"size"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"sources"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"foundation/size.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"typography"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"sources"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"foundation/typography.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"animation"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"sources"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"foundation/animation.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"modifiers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"theme"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Color theme"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"contexts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"light"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"theme/light.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"lightHighContrast"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"theme/light.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"theme/dark-high-contrast.json"</span> <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"dark"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"theme/dark.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"darkHighContrast"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"theme/dark.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"theme/dark-high-contrast.json"</span> <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"default"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"light"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"resolutionOrder"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/sets/size"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/sets/typography"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/sets/animation"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/modifiers/theme"</span> <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
                    <p>这仅仅描述了多个令牌的最终结果。我们需要一个<a href="#inputs">输入</a>来生成最终集合。</p>
                    <p>给定以下输入，我们将得到如下解析顺序：</p>
                    <table>
                        <thead>
                            <tr>
                                <th>输入</th>
                                <th>结果</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <th>

                                    <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span> <span class="hljs-attr">"theme"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"light"</span> <span class="hljs-punctuation">}</span>
</code></pre>
                                </th>
                                <td>

                                    <ol>
                                        <li><code>foundation/size.json</code></li>
                                        <li><code>foundation/typography.json</code></li>
                                        <li><code>foundation/animation.json</code></li>
                                        <li><code>theme/light.json</code></li>
                                    </ol>
                                </td>
                            </tr>
                            <tr>
                                <th>

                                    <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span> <span class="hljs-attr">"theme"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"lightHighContrast"</span> <span class="hljs-punctuation">}</span>
</code></pre>
                                </th>
                                <td>

                                    <ol>
                                        <li><code>foundation/size.json</code></li>
                                        <li><code>foundation/typography.json</code></li>
                                        <li><code>foundation/animation.json</code></li>
                                        <li><code>theme/light.json</code></li>
                                        <li><code>theme/light-high-contrast.json</code></li>
                                    </ol>
                                </td>
                            </tr>
                            <tr>
                                <th>

                                    <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span> <span class="hljs-attr">"theme"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"dark"</span> <span class="hljs-punctuation">}</span>
</code></pre>
                                </th>
                                <td>

                                    <ol>
                                        <li><code>foundation/size.json</code></li>
                                        <li><code>foundation/typography.json</code></li>
                                        <li><code>foundation/animation.json</code></li>
                                        <li><code>theme/dark.json</code></li>
                                    </ol>
                                </td>
                            </tr>
                            <tr>
                                <th>

                                    <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span> <span class="hljs-attr">"theme"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"darkHighContrast"</span> <span class="hljs-punctuation">}</span>
</code></pre>
                                </th>
                                <td>

                                    <ol>
                                        <li><code>foundation/size.json</code></li>
                                        <li><code>foundation/typography.json</code></li>
                                        <li><code>foundation/animation.json</code></li>
                                        <li><code>theme/dark.json</code></li>
                                        <li><code>theme/dark-high-contrast.json</code></li>
                                    </ol>
                                </td>
                            </tr>
                        </tbody>
                    </table>

                    <p>若出现任何冲突，设计令牌的最后一次出现将产生最终值。</p>
                </aside>

                <aside class="example" id="example-empty-array-in-modifiers">
                    <div class="marker">
                        <a class="self-link" href="#example-empty-array-in-modifiers">示例<bdi> 7</bdi></a><span
                            class="example-title">：修饰符中的空数组</span>
                    </div>

                    <p>修饰符<em class="rfc2119">可以（MAY）</em>包含空的上下文数组：</p>
                    <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"modifiers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-comment">// …</span>
    <span class="hljs-attr">"debug"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Enable debug mode"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"contexts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"false"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"true"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"debug.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"resolutionOrder"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-comment">// …</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/modifiers/debug"</span> <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
                    <p>如果收到<code>{ "debug": "true" }</code><a href="#inputs">输入</a>，则会加载额外的<code>debug.json</code>文件。
                    </p>
                </aside>

                <section id="inline-sets-and-modifiers">
                    <div class="header-wrapper">
                        <h5 id="x4-1-6-1-inline-sets-and-modifiers"><bdi class="secno">4.1.6.1 </bdi>内联集合与修饰符</h5><a
                            class="self-link" href="#inline-sets-and-modifiers" aria-label="第4.1.6.1节的永久链接。"></a>
                    </div>
                    <p>在<code>resolutionOrder</code>中，<a href="#sets">集合</a>或<a href="#modifiers">修饰符</a><em
                            class="rfc2119">可以（MAY）</em>以内联方式声明，只要对象中添加<code>name</code>与<code>type</code>键：
                    </p>
                    <table>
                        <thead>
                            <tr>
                                <th align="left">属性</th>
                                <th align="left">类型</th>
                                <th align="center">必需</th>
                                <th align="left">描述</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td align="left"><strong>name</strong></td>
                                <td align="left"><code>string</code></td>
                                <td align="center">Y</td>
                                <td align="left">一个唯一名称，<em class="rfc2119">不得（MUST
                                        NOT）</em>与<code>resolutionOrder</code>中的其他<code>name</code>冲突。</td>
                            </tr>
                            <tr>
                                <td align="left"><strong>type</strong></td>
                                <td align="left"><code>"set" | "modifier"</code></td>
                                <td align="center">Y</td>
                                <td align="left"><em
                                        class="rfc2119">必须（MUST）</em>根据类型为<code>"set"</code>或<code>"modifier"</code>。
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <p>若内联对象缺少<code>name</code>或<code>type</code>，或<code>name</code>在任意对象中重复，工具<em
                            class="rfc2119">必须（MUST）</em>抛出错误。
                    </p>
                    <div class="note" id="issue-container-generatedID">
                        <div role="heading" class="ednote-title marker" id="h-ednote" aria-level="6">
                            <span>编者注</span><span class="issue-label">：Name</span>
                        </div>
                        <aside class="">

                            <p>当集合与修饰符分别出现在根级<code>sets</code>与<code>modifiers</code>键中时，集合与修饰符可以共享同一名称。仅在<code>resolutionOrder</code>数组中重复<code>name</code>是不合法的。
                            </p>
                        </aside>
                    </div>

                    <aside class="example" id="example-resolution-order-with-inline-sets-and-modifiers">
                        <div class="marker">
                            <a class="self-link" href="#example-resolution-order-with-inline-sets-and-modifiers">示例<bdi>
                                    8</bdi></a><span class="example-title">：带有内联集合与修饰符的解析顺序</span>
                        </div>

                        <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"resolutionOrder"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"set"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Size"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"sources"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"foundation/size.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"set"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Typography"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"sources"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"foundation/typography.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"set"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Animation"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"sources"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/sets/Animation"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"modifier"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Theme"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Color theme"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"contexts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"light"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"theme/light.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"lightHighContrast"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"theme/light.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"theme/dark-high-contrast.json"</span> <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"dark"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"theme/dark.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"darkHighContrast"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"theme/dark.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"theme/dark-high-contrast.json"</span> <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"default"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"light"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
                    </aside>

                    <p>内联集合与修饰符<em class="rfc2119">不得（MUST NOT）</em>以任何方式被引用。工具<em class="rfc2119">应该（SHOULD）</em>在<a
                            href="#reference-objects">引用对象</a>指向解析顺序项时抛出错误。</p>
                    <aside class="example" id="example-invalid-inline-set-reference">
                        <div class="marker">
                            <a class="self-link" href="#example-invalid-inline-set-reference">示例<bdi>
                                    9</bdi></a><span class="example-title">：无效的内联集合引用</span>
                        </div>

                        <p>以下<a href="#reference-objects">引用对象</a>指针无论出现在何处都无效：</p>
                        <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/resolutionOrder/4"</span> <span class="hljs-punctuation">}</span>
</code></pre>
                        <p>这极有可能产生无效引用，无论它出现在<a href="#sets">集合</a>（循环依赖）、<a href="#modifiers">修饰符</a>
                            （循环依赖）、或者<code>resolutionOrder</code>数组中的另一个位置（无限递归）。即使在少数情况下不导致无效引用，轻微的变更也可能将其变为循环引用。</p>
                    </aside>

                </section>
                <section class="informative" id="ordering-of-sets-and-modifiers">
                    <div class="header-wrapper">
                        <h5 id="x4-1-6-2-ordering-of-sets-and-modifiers"><bdi class="secno">4.1.6.2 </bdi>集合与修饰符的排序</h5>
                        <a class="self-link" href="#ordering-of-sets-and-modifiers" aria-label="第4.1.6.2节的永久链接。"></a>
                    </div>
                    <p><em>本节为非规范性内容。</em></p>


                    <p><code>resolutionOrder</code>数组允许用户按任意顺序排列集合与修饰符。然而，如果存在许多集合必须出现在修饰符之后以解决冲突，这很可能是一种<a
                            href="https://en.wikipedia.org/wiki/Code_smell">代码异味</a>，表明令牌组织的不可预测与脆弱。理想情况下，修饰符对条件值的处理足够完善，以至于需要很少或不需要覆盖（参见<a
                            href="#orthogonality">正交性</a>）。在实践中，这意味着</p>
                </section>

            </section>
        </section>
        <section id="reference-objects">
            <div class="header-wrapper">
                <h3 id="x4-2-reference-objects"><bdi class="secno">4.2 </bdi>引用对象</h3><a class="self-link"
                    href="#reference-objects" aria-label="第4.2节的永久链接。"></a>
            </div>
            <p>当引用另一个 JSON 文档或同一文档中的结构时，<em class="rfc2119">必须（MUST）</em>使用引用对象。JSON Schema 2020-12
                中对此的描述为一个以<code>$ref</code>为键的对象，其字符串为符合 [<cite><a class="bibref" data-link-type="biblio"
                        href="#bib-rfc6901" title="JavaScript Object Notation (JSON) Pointer">RFC6901</a></cite>] 的 JSON
                指针。</p>
            <p>工具<em class="rfc2119">必须（MUST）</em>解析解析器文档中的所有引用对象。</p>
            <p>引用对象<em class="rfc2119">不得（MUST NOT）</em>是循环的，既不能引用自身的指针，也不能引用该引用对象的任何父节点。</p>
            <p>工具<em class="rfc2119">必须（MUST）</em>支持同文档引用对象，这是支持此解析器模块的最低要求。除此之外，工具可以做个别决定不支持某些 URI 类型，如本地文件系统导入或通过
                TCP/IP 的远程 URI。</p>
            <aside class="example" id="example-valid-reference-objects">
                <div class="marker">
                    <a class="self-link" href="#example-valid-reference-objects">示例<bdi> 10</bdi></a><span
                        class="example-title">：有效的引用对象</span>
                </div>

                <p>常见的引用对象示例包括：</p>
                <table>
                    <thead>
                        <tr>
                            <th>代码</th>
                            <th>结果</th>
                            <th>所需支持</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <th>

                                <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/sets/MySet"</span> <span class="hljs-punctuation">}</span>
</code></pre>
                            </th>
                            <td>

                                <p>引用同一文档内的<code>sets/MySet</code>。</p>
                            </td>
                            <td>Y</td>
                        </tr>
                        <tr>
                            <th>

                                <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"path/to/example.json"</span> <span class="hljs-punctuation">}</span>
</code></pre>
                            </th>
                            <td>

                                <p>引用相对于本文件的<code>./path/to/example.json</code>的全部内容。</p>
                            </td>
                            <td></td>
                        </tr>
                        <tr>
                            <th>

                                <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"example.json#sets/MySet"</span> <span class="hljs-punctuation">}</span>
</code></pre>
                            </th>
                            <td>

                                <p>仅引用<code>example.json</code>的一部分：<code>sets/MySet</code>。</p>
                            </td>
                            <td></td>
                        </tr>
                        <tr>
                            <th>

                                <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://my-server.com/tokens.json"</span> <span class="hljs-punctuation">}</span>
</code></pre>
                            </th>
                            <td>

                                <p>引用托管在公共可访问 URL 上的远程文件。</p>
                            </td>
                            <td></td>
                        </tr>
                    </tbody>
                </table>

            </aside>

            <aside class="example" id="example-invalid-reference-objects">
                <div class="marker">
                    <a class="self-link" href="#example-invalid-reference-objects">示例<bdi> 11</bdi></a><span
                        class="example-title">：无效的引用对象</span>
                </div>

                <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"foo"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"bar"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/baz/bat"</span> <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"baz"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"bat"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/foo/bar"</span> <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
                <p>该示例无效，因为<code>foo/bar</code>与<code>baz/bat</code>互相引用，因此没有最终值。</p>
                <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"foo"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"bar"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"baz"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/foo/bar"</span> <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
                <p>一个引用对象引用其父级是无效的，因为它将包含自身并导致无限递归。</p>
            </aside>

            <section id="invalid-pointers">
                <div class="header-wrapper">
                    <h4 id="x4-2-1-invalid-pointers"><bdi class="secno">4.2.1 </bdi>无效指针</h4><a class="self-link"
                        href="#invalid-pointers" aria-label="第4.2.1节的永久链接。"></a>
                </div>
                <p>指针<em class="rfc2119">可以（MAY）</em>指向同一文档中的任意位置，但以下情况除外：</p>
                <ol>
                    <li>只有<a href="#resolution-order">resolutionOrder</a>可以引用修饰符（<code>#/modifiers/…</code>）。集合与修饰符<em
                            class="rfc2119">不得（MUST NOT）</em>引用另一个修饰符。<ul>
                            <li>从集合引用修饰符可能导致<a href="#inputs">输入</a>将条件逻辑应用到一个不支持该逻辑的结构，因此不允许。</li>
                            <li>从修饰符引用另一个修饰符意味着单个输入会应用到意料之外的修饰符，因此不允许。</li>
                        </ul>
                    </li>
                    <li>引用对象<em class="rfc2119">不得（MUST NOT）</em>指向<a
                            href="#resolution-order">resolutionOrder</a>数组中的任何内容（<code>#/resolutionOrder/…</code>）。解析顺序的本质是引用文档的许多其他部分。复制其中任何部分都会产生复杂、难以预测的链条。
                    </li>
                </ol>
                <p>工具<em class="rfc2119">必须（MUST）</em>在遇到任何无效指针时抛出错误。</p>
            </section>
            <section id="extending">
                <div class="header-wrapper">
                    <h4 id="x4-2-2-extending"><bdi class="secno">4.2.2 </bdi>扩展</h4><a class="self-link"
                        href="#extending" aria-label="第4.2.2节的永久链接。"></a>
                </div>
                <p>如<a href="https://json-schema.org/draft/2020-12/json-schema-core#ref">JSON Schema
                        2020-12</a>所允许，引用对象可在<code>$ref</code>旁边存在其他键。在这些场景中，与<code>$ref</code>并列的本地键<em
                        class="rfc2119">必须（MUST）</em>被视为覆盖。
                </p>
                <aside class="example" id="example-extending-with-ref">
                    <div class="marker">
                        <a class="self-link" href="#example-extending-with-ref">示例<bdi> 12</bdi></a><span
                            class="example-title">：使用 $ref 进行扩展</span>
                    </div>

                    <p>一个通用示例：</p>
                    <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"animal"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"color"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"brown"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"legs"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">4</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"lizard"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"color"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"green"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/animal"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"size"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"small"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
                    <p><code>#/lizard</code>的最终值等同于：</p>
                    <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"color"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"green"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"legs"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">4</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"size"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"small"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
                    <p>键的先后顺序无关紧要。由于<code>color</code>在本地声明，它将替换<code>#/animal</code>中的值。同时新增的<code>size</code>也会被追加至最终值。
                    </p>
                </aside>

                <p>如果与<code>$ref</code>并列的键声明了对象或数组，工具<em class="rfc2119">必须（MUST）</em>进行浅层扁平化，即对象与数组不合并。</p>
            </section>
        </section>
        <section id="extensions">
            <div class="header-wrapper">
                <h3 id="x4-3-extensions"><bdi class="secno">4.3 </bdi>$extensions</h3><a class="self-link"
                    href="#extensions" aria-label="第4.3节的永久链接。"></a>
            </div>
            <p>可以在任意<a href="#sets">集合</a>、<a href="#modifiers">修饰符</a>或<a
                    href="#inline-sets-and-modifiers">内联集合/修饰符</a>上添加<code>$extensions</code>对象，以声明任意的元数据，由各工具自行决定使用或忽略。
            </p>
            <p>若提供，<code>$extensions</code><em class="rfc2119">必须（MUST）</em>为一个对象，其键为供应商特定的命名空间。这允许多个工具无冲突地使用这些元数据。</p>
            <aside class="example" id="example-set-with-extensions">
                <div class="marker">
                    <a class="self-link" href="#example-set-with-extensions">示例<bdi> 13</bdi></a><span
                        class="example-title">：包含 $extensions 的集合</span>
                </div>

                <p>下面示例中，一个集合包含了<code>figma.com</code>供应商的任意元数据：</p>
                <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"sets"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"color"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"sources"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"colors/ramps.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"colors/semantic.json"</span> <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"$extensions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"figma.com"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"sourceFile"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://figma.com/file/xxxxxx"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"updatedAt"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2025-11-01"</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
            </aside>

        </section>
        <section id="defs">
            <div class="header-wrapper">
                <h3 id="x4-4-defs"><bdi class="secno">4.4 </bdi>$defs</h3><a class="self-link" href="#defs"
                    aria-label="第4.4节的永久链接。"></a>
            </div>
            <p>工具<em class="rfc2119">可以（MAY）</em>允许在 JSON Schema 的<a
                    href="https://json-schema.org/understanding-json-schema/structuring#defs">$defs</a>中定义结构，但这不是必需的。然而，工具<em
                    class="rfc2119">不得（MUST NOT）</em>在遇到<code>$defs</code>时抛出错误，且<em
                    class="rfc2119">必须（MUST）</em>在不支持时忽略该键。
            </p>
            <div class="note" id="issue-container-generatedID-0">
                <div role="heading" class="ednote-title marker" id="h-ednote-0" aria-level="4"><span>编者注</span><span
                        class="issue-label">：$defs</span></div>
                <aside class="">

                    <p>就本规范而言，使用<code>$defs</code>的行为未定义，因此由用户与工具作者自行决定是定义用法还是完全避免。规范刻意避免使用<code>$defs</code>以确保未来不会发生冲突。
                    </p>
                </aside>
            </div>
        </section>
    </section>

    <section id="inputs">
        <div class="header-wrapper">
            <h2 id="x5-inputs"><bdi class="secno">5. </bdi>输入</h2><a class="self-link" href="#inputs"
                aria-label="第5节的永久链接。"></a>
        </div>
        <p>解析器文档仅描述条件令牌值<em class="rfc2119">可以（MAY）</em>如何生成。但这些条件仍需在某处提供。“输入”一词指传递给工具的任意上下文值选择。</p>
        <p>工具<em class="rfc2119">必须（MUST）</em>接受可序列化为 JSON 的对象，例如<a
                href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">JavaScript
                中的对象</a>或<a href="https://docs.python.org/3/tutorial/datastructures.html#dictionaries">Python 中的字典</a>。
        </p>
        <p>加载声明了修饰符的解析器的工具，若未提供相应输入，<em class="rfc2119">应该（SHOULD）</em>抛出错误。</p>
        <aside class="example" id="example-inputs">
            <div class="marker">
                <a class="self-link" href="#example-inputs">示例<bdi> 14</bdi></a><span class="example-title">：输入</span>
            </div>

            <p>给定以下修饰符：</p>
            <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"resolutionOrder"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"modifier"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"theme"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"contexts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"light"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"light.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"dark"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"dark.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"modifier"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"size"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"context"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"default"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"size/default.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"large"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"size/large.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"modifier"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"beta"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"context"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"false"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"true"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"beta.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"default"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"false"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
            <p><strong>有效</strong>的输入将遵循该模式：所有键对应各修饰符的<code>name</code>。其值为该修饰符指定的有效选项。</p>
            <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"theme"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"light"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"size"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"large"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"beta"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"true"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
            <p>然而，<strong>无效</strong>的输入会添加未知键、无效上下文，和/或缺失必需的修饰符：</p>
            <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"theme"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"blue"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"foo"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"bar"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
            <p>在此场景中，工具<em class="rfc2119">应该（SHOULD）</em>抛出如下多条错误：</p>
            <ol>
                <li><code>Error: invalid context "blue" for modifier "theme".</code></li>
                <li><code>Error: missing modifier "size".</code></li>
                <li><code>Error: unknown modifier "foo".</code></li>
                <li>（对于修饰符<code>beta</code>无需错误，因为它提供了<code>default</code>）</li>
            </ol>
        </aside>

        <aside class="example" id="example-tool-consuming-input">
            <div class="marker">
                <a class="self-link" href="#example-tool-consuming-input">示例<bdi> 15</bdi></a><span
                    class="example-title">：工具消费输入</span>
            </div>

            <p>使用一个假想的用 JavaScript 编写的工具，我们可以如下消费<a href="#example-inputs">前一个示例</a>：</p>
            <pre><code class="js hljs" aria-busy="false"><span class="hljs-keyword">import</span> tokenTool <span class="hljs-keyword">from</span> <span class="hljs-string">'./token-tool.js'</span>;

tokenTool.<span class="hljs-title function_">loadResolver</span>(
  <span class="hljs-comment">/* Path to resolver */</span>
  <span class="hljs-string">'./resolver.json'</span>,

  <span class="hljs-comment">/* Input */</span>
  {
    <span class="hljs-attr">theme</span>: <span class="hljs-string">'dark'</span>,
    <span class="hljs-attr">size</span>: <span class="hljs-string">'default'</span>,
  },
);
</code></pre>
            <p>该假想工具具有<code>loadResolver()</code>方法，其参数为：</p>
            <ol>
                <li>第一个位置为解析器的文件路径，</li>
                <li>第二个位置为输入对象。</li>
            </ol>
            <p>工具随后将解析器与输入组合，以产生其最终的<a data-link-type="dfn"
                    href="https://www.w3.org/policies/process/#group-decision">解析</a>。</p>
        </aside>

        <section id="case-sensitivity">
            <div class="header-wrapper">
                <h3 id="x5-1-case-sensitivity"><bdi class="secno">5.1 </bdi>大小写敏感性</h3><a class="self-link"
                    href="#case-sensitivity" aria-label="第5.1节的永久链接。"></a>
            </div>
            <p>输入<em
                    class="rfc2119">应该（SHOULD）</em>不区分大小写。例如，<code>{ "theme": "dark" }</code>、<code>{ "Theme": "Dark" }</code>与<code>{ "THEME": "DARK" }</code><em
                    class="rfc2119">应该（SHOULD）</em>等价。然而，工具<em class="rfc2119">可以（MAY）</em>对大小写敏感性做出个别决定。
            </p>
        </section>
        <section id="enforcing-strings">
            <div class="header-wrapper">
                <h3 id="x5-2-enforcing-strings"><bdi class="secno">5.2 </bdi>强制使用字符串</h3><a class="self-link"
                    href="#enforcing-strings" aria-label="第5.2节的永久链接。"></a>
            </div>
            <p>输入的值<em class="rfc2119">必须（MUST）</em>为字符串。若输入包含非字符串值（如<code>{ "beta": true }</code>或
                <code>{ "size": 100 }</code>），工具<em class="rfc2119">必须（MUST）</em>抛出错误。
            </p>
        </section>
    </section>

    <section id="resolution-logic">
        <div class="header-wrapper">
            <h2 id="x6-resolution-logic"><bdi class="secno">6. </bdi>解析逻辑</h2><a class="self-link"
                href="#resolution-logic" aria-label="第6节的永久链接。"></a>
        </div>
        <p>工具<em class="rfc2119">必须（MUST）</em>处理解析阶段以产生正确的输出。</p>
        <ol>
            <li><a href="#input-validation">输入验证</a>：验证给定解析器文档的<a href="#inputs">输入</a>是否有效。</li>
            <li><a href="#ordering">排序</a>：遍历<code>resolutionOrder</code>数组以生成最终令牌结构。</li>
            <li><a href="#aliases">别名</a>：解析最终令牌结构中的令牌别名。</li>
            <li><a href="#resolution">解析</a>：最终的结果。</li>
        </ol>
        <section id="input-validation">
            <div class="header-wrapper">
                <h3 id="x6-1-input-validation"><bdi class="secno">6.1 </bdi>输入验证</h3><a class="self-link"
                    href="#input-validation" aria-label="第6.1节的永久链接。"></a>
            </div>
            <p>工具<em class="rfc2119">必须（MUST）</em>要求所有<a data-link-type="element"
                    href="https://html.spec.whatwg.org/multipage/input.html#the-input-element">输入</a>与所提供的<a
                    href="#modifiers">修饰符</a>上下文匹配。</p>
            <p>如果解析器未声明任何修饰符，跳过此步骤并继续<a href="#ordering">排序</a>。</p>
            <ol>
                <li>对于输入对象中的每个键：<ol>
                        <li>验证其对应一个有效修饰符。若不对应，抛出错误。</li>
                        <li>验证该键的值与该修饰符的允许值相匹配。若不匹配，抛出错误。</li>
                    </ol>
                </li>
                <li>对于解析器中的每个修饰符：<ol>
                        <li>若该解析器未声明默认值，验证输入中提供了该键。若未提供，抛出错误。</li>
                    </ol>
                </li>
            </ol>
        </section>
        <section id="ordering">
            <div class="header-wrapper">
                <h3 id="x6-2-ordering"><bdi class="secno">6.2 </bdi>排序</h3><a class="self-link" href="#ordering"
                    aria-label="第6.2节的永久链接。"></a>
            </div>
            <p>工具<em class="rfc2119">必须（MUST）</em>按顺序迭代<a href="#resolution-order">resolutionOrder</a>数组。</p>
            <ol>
                <li>
                    <p>对于数组中的每一项，确定其是<a href="#sets">集合</a>还是<a href="#modifiers">修饰符</a>，并按数组顺序扁平化为单一令牌结构。
                    </p>
                    <ol>
                        <li>如果该项是集合，按数组顺序组合<code>sources</code>以生成单一令牌结构。</li>
                        <li>否则，如果该项是修饰符，仅选择与<a href="#inputs">输入</a>匹配的<code>context</code>，并按数组顺序组合以生成单一令牌结构。
                        </li>
                        <li>若发生冲突，取数组中最近一次出现的值。</li>
                    </ol>
                </li>
                <li>
                    <p>重复，直到到达<code>resolutionOrder</code>数组末尾。</p>
                </li>
            </ol>
            <p>最终结果将是一个令牌结构，其行为与最初来自一个来源相同。</p>
            <aside class="example" id="example-conflict-resolution">
                <div class="marker">
                    <a class="self-link" href="#example-conflict-resolution">示例<bdi> 16</bdi></a><span
                        class="example-title">：冲突解析</span>
                </div>

                <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"sets"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"foundation"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"sources"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"color"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
              <span class="hljs-attr">"default"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">"$value"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"colorSpace"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"srgb"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"components"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">0</span><span class="hljs-punctuation">,</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span> <span class="hljs-number">0</span><span class="hljs-punctuation">]</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"$type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"color"</span>
              <span class="hljs-punctuation">}</span>
            <span class="hljs-punctuation">}</span>
          <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"color"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
              <span class="hljs-attr">"default"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">"$value"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                  <span class="hljs-attr">"colorSpace"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"srgb"</span><span class="hljs-punctuation">,</span>
                  <span class="hljs-attr">"components"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">0.1</span><span class="hljs-punctuation">,</span> <span class="hljs-number">0.1</span><span class="hljs-punctuation">,</span> <span class="hljs-number">0.1</span><span class="hljs-punctuation">]</span>
                <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"$type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"color"</span>
              <span class="hljs-punctuation">}</span>
            <span class="hljs-punctuation">}</span>
          <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"resolutionOrder"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/sets/foundation"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
                <p>这里遇到了两个<code>color.text.default</code>令牌。由于顺序重要，最后的声明“胜出”，最终结果将是：</p>
                <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"color"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"default"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"$value"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"colorSpace"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"srgb"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"components"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">0.1</span><span class="hljs-punctuation">,</span> <span class="hljs-number">0.1</span><span class="hljs-punctuation">,</span> <span class="hljs-number">0.1</span><span class="hljs-punctuation">]</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"$type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"color"</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
            </aside>

        </section>
        <section id="aliases">
            <div class="header-wrapper">
                <h3 id="x6-3-aliases"><bdi class="secno">6.3 </bdi>别名</h3><a class="self-link" href="#aliases"
                    aria-label="第6.3节的永久链接。"></a>
            </div>
            <p>在此步骤之前<em class="rfc2119">不得（MUST NOT）</em>解析别名。</p>
            <p>在将<a href="#ordering">排序</a>扁平化为单一令牌结构之后，唯一剩余的步骤是解析别名。别名的解析与<a
                    href="../format/#aliases-references">format</a>中概述的方法完全相同：</p>
            <ul>
                <li>允许深层别名，只要它们不是循环的；</li>
                <li>别名必须指向正确的<code>$type</code>。</li>
            </ul>
        </section>
        <section id="resolution">
            <div class="header-wrapper">
                <h3 id="x6-4-resolution"><bdi class="secno">6.4 </bdi>解析</h3><a class="self-link" href="#resolution"
                    aria-label="第6.4节的永久链接。"></a>
            </div>
            <aside class="example" id="example-theme-resolution">
                <div class="marker">
                    <a class="self-link" href="#example-theme-resolution">示例<bdi> 17</bdi></a><span
                        class="example-title">：主题解析</span>
                </div>

                <p>我们将从以下文件结构开始，随后逐步走过解析阶段。</p>
                <table>
                    <thead>
                        <tr>
                            <th>名称</th>
                            <th>内容</th>
                        </tr>
                    </thead>

                    <tbody>
                        <tr>
                            <th>

                                <p>解析器</p>
                            </th>
                            <td>

                                <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"sets"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"foundation"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"sources"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"foundation.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"components"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"sources"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"components/button.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"modifiers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"theme"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"context"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"light"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"themes/light.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"dark"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"themes/dark.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"resolutionOrder"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/sets/foundation"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/sets/components"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/modifiers/theme"</span> <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
                            </td>
                        </tr>
                        <tr>
                            <th>

                                <p>输入</p>
                            </th>
                            <td>

                                <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span> <span class="hljs-attr">"theme"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"dark"</span> <span class="hljs-punctuation">}</span>
</code></pre>
                            </td>
                        </tr>
                        <tr>
                            <th>

                                <p>foundation.json</p>
                            </th>
                            <td>

                                <ul>
                                    <li><code>color.brand.primary</code>（color）</li>
                                </ul>
                            </td>
                        </tr>
                        <tr>
                            <th>

                                <p>components/button.json</p>
                            </th>
                            <td>

                                <ul>
                                    <li><code>button.background</code>（color）</li>
                                    <li><code>button.padding</code>（dimension）</li>
                                </ul>
                            </td>
                        </tr>
                        <tr>
                            <th>

                                <p>themes/light.json</p>
                            </th>
                            <td>

                                <ul>
                                    <li><code>theme.accent</code></li>
                                </ul>
                            </td>
                        </tr>
                        <tr>
                            <th>

                                <p>themes/dark.json</p>
                            </th>
                            <td>

                                <ul>
                                    <li><code>theme.accent</code>（备用值）</li>
                                </ul>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <ol>
                    <li>输入验证<ol>
                            <li>验证<code>theme</code>是已定义的修饰符（通过）。</li>
                            <li>验证<code>dark</code>是<code>theme</code>修饰符的有效值（通过）。</li>
                        </ol>
                    </li>
                    <li>排序<ol>
                            <li>第一项是<code>foundation</code>集合，提供<code>color.brand.primary</code>。</li>
                            <li>第二项是<code>components</code>集合，提供<code>button.background</code>与<code>button.padding</code>。
                            </li>
                            <li>第三个也是最后一项是<code>theme</code>修饰符，提供<code>theme.accent</code>。</li>
                            <li>因此，最终解析包含4个令牌。</li>
                        </ol>
                    </li>
                    <li>别名<ol>
                            <li>若任何令牌包含别名，仅在此时可以解析它们。</li>
                        </ol>
                    </li>
                    <li>解析<ol>
                            <li>最终令牌展开如下：<ol>
                                    <li><code>color.brand.primary</code>（来自<code>foundation.json</code>）</li>
                                    <li><code>button.background</code>（来自<code>components/button.json</code>）</li>
                                    <li><code>button.padding</code>（来自<code>components/button.json</code>）</li>
                                    <li><code>theme.accent</code>（来自<code>themes/dark.json</code>）</li>
                                </ol>
                            </li>
                        </ol>
                    </li>
                </ol>
                <p>关键要点：</p>
                <ul>
                    <li>由于输入是<code>{ "theme": "dark" }</code>，<code>themes/light.json</code>从未被使用。</li>
                </ul>
            </aside>
        </section>
    </section>

    <section class="informative" id="bundling">
        <div class="header-wrapper">
            <h2 id="x7-bundling"><bdi class="secno">7. </bdi>打包</h2><a class="self-link" href="#bundling"
                aria-label="第7节的永久链接。"></a>
        </div>
        <p><em>本节为非规范性内容。</em></p>
        <p>解析器文档允许为组织目的在多个 JSON 文件中使用令牌。但出于可移植性的考虑，只处理单个 JSON 文档可能更有利。</p>
        <p>“打包”指将解析器文档简化为单个文件的过程。实现这一点有多种策略，超过本文档的范围。但为便于说明，这里概述众多可能方法中的两种：</p>
        <section id="inlining-files">
            <div class="header-wrapper">
                <h3 id="x7-1-inlining-files"><bdi class="secno">7.1 </bdi>内联文件</h3><a class="self-link"
                    href="#inlining-files" aria-label="第7.1节的永久链接。"></a>
            </div>
            <p>内联涉及获取所有指向远程文件的<a
                    href="#reference-objects">引用对象</a>，并将其替换为其内容。这是一种简单的策略，能实现最终目标，但在同一文件被多次引用时会产生重复。工具可能不会因令牌重复而有任何问题，但阅读本文件的人很可能会因产生的代码行数过多而难以阅读。
            </p>
            <aside class="example" id="example-bundling-by-inlining">
                <div class="marker">
                    <a class="self-link" href="#example-bundling-by-inlining">示例<bdi> 18</bdi></a><span
                        class="example-title">：通过内联进行打包</span>
                </div>

                <p>给定一个引用了5个文件的解析器：</p>
                <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"sets"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"foundation"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"sources"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"foundation/colors.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"foundation/size.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"foundation/typography.json"</span> <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"modifiers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"theme"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"contexts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"light"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"foundation/colors.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"theme/light.json"</span> <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"dark"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"foundation/colors.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"theme/dark.json"</span> <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"resolutionOrder"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/sets/foundation"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/modifiers/theme"</span> <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
                <p>可以将内容内联，结果如下：</p>
                <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"sets"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"foundation"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"sources"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-punctuation">{</span>
          <span class="hljs-comment">// (contents of foundation/colors.json)</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">{</span>
          <span class="hljs-comment">// (contents of foundation/size.json)</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">{</span>
          <span class="hljs-comment">// (contents of foundation/typography.json)</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"modifiers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"theme"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"contexts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"light"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span>
            <span class="hljs-comment">// (contents of foundation/colors.json)</span>
          <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">{</span>
            <span class="hljs-comment">// (contents of theme/light.json)</span>
          <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"dark"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span>
            <span class="hljs-comment">// (contents of foundation/colors.json)</span>
          <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">{</span>
            <span class="hljs-comment">// (contents of theme/dark.json)</span>
          <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"resolutionOrder"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/sets/foundation"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/modifiers/theme"</span> <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
                <p>文件内容已为可读性而进行省略。它们的内容可以是任何东西，并不影响打包主题。</p>
                <p>请注意，<code>foundation/colors.json</code>在文档中被引用了3次，因此内联产生了该内容的3个副本。</p>
            </aside>

        </section>
        <section id="using-defs-for-files">
            <div class="header-wrapper">
                <h3 id="x7-2-using-defs-for-files"><bdi class="secno">7.2 </bdi>为文件使用 $defs</h3><a class="self-link"
                    href="#using-defs-for-files" aria-label="第7.2节的永久链接。"></a>
            </div>
            <p>如<a href="#defs">$defs</a>所述，<code>$defs</code>在解析器文档中未定义行为。仅当某工具决定支持 JSON Schema 的此特性时才可使用。</p>
            <p>该策略涉及创建一个顶层<code>$defs</code>键，每个顶层键包含对应文件的内容。</p>
            <p>使用<code>$defs</code>的唯一缺点是某些工具可能选择忽略它，因为它不是解析器文档的最低要求。</p>
            <aside class="example" id="example-bundling-by-using-defs">
                <div class="marker">
                    <a class="self-link" href="#example-bundling-by-using-defs">示例<bdi> 19</bdi></a><span
                        class="example-title">：通过 $defs 进行打包</span>
                </div>

                <p>给定与<a href="#inlining-files">内联部分</a>相同的解析器，我们可以创建一个新的顶层<code>$defs</code>键，并添加与文件名及其内容分别对应的键和值：</p>
                <pre><code class="json hljs" aria-busy="false"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"sets"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"foundation"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"sources"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/$defs/foundation~1colors.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/$defs/foundation~1size.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/$defs/foundation~1typography.json"</span> <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"modifiers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"theme"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"contexts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"light"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/$defs/foundation~1colors.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/$defs/theme~1light.json"</span> <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"dark"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/$defs/foundation~1colors.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/$defs/theme~1dark.json"</span> <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"resolutionOrder"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/sets/foundation"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#/modifiers/theme"</span> <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"$defs"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"foundation/colors.json"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-comment">// (contents of foundation/colors.json)</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"foundation/size.json"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-comment">// (contents of foundation/size.json)</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"foundation/typography.json"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-comment">// (contents of foundation/typography.json)</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"theme/light.json"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-comment">// (contents of theme/light.json)</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"theme/dark.json"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-comment">// (contents of theme/dark.json)</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
                <p>使用该方法，我们不仅减少了重复，还保留了原解析器文档的格式与结构，而未增加任何长度。</p>
                <p>值得注意的是，当名称中使用“<code>/</code>”字符时，必须根据 [<cite><a class="bibref" data-link-type="biblio"
                            href="#bib-rfc6901" title="JavaScript Object Notation (JSON) Pointer">RFC6901</a></cite>]
                    用<code>~1</code>进行转义，以免被视为子路径。还值得注意的是，由于文件名出现在<code>#</code>片段字符之后，“<code>[filename].json</code>”指向的是同一文档中的一个位置而非实际文件（否则应出现在“<code>#</code>”之前）。
                </p>
            </aside>
        </section>
    </section>

    <section id="conformance">
        <div class="header-wrapper">
            <h2 id="x8-conformance"><bdi class="secno">8. </bdi>一致性</h2><a class="self-link" href="#conformance"
                aria-label="第8节的永久链接。"></a>
        </div>
        <p>除了标注为非规范性的章节外，本规范中的所有编写指南、图示、示例与注释均为非规范性内容。除此以外的所有内容均为规范性内容。</p>
        <p>
            本文件中的关键词<em class="rfc2119">MAY</em>、<em class="rfc2119">MUST</em>、<em class="rfc2119">MUST
                NOT</em>、<em class="rfc2119">SHOULD</em>与<em class="rfc2119">SHOULD NOT</em>应按
            <a href="https://www.rfc-editor.org/info/bcp14">BCP 14</a>
            [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc2119"
                    title="Key words for use in RFCs to Indicate Requirement Levels">RFC2119</a></cite>] [<cite><a
                    class="bibref" data-link-type="biblio" href="#bib-rfc8174"
                    title="Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words">RFC8174</a></cite>]
            的描述进行解读，且仅当它们以本文所示的全大写形式出现时才适用。
        </p>
        <p>实现解析器规范的工具<em class="rfc2119">必须（MUST）</em>：</p>
        <ul>
            <li><strong>支持解析流程</strong>：按定义实现<a href="#resolution-logic">解析逻辑</a>，包括输入验证、基础集合扁平化、修饰符应用、别名处理与冲突解析。</li>
            <li><strong>验证输入</strong>：确保提供的修饰符输入与已定义的修饰符及可接受值相匹配。</li>
            <li><strong>正确解析别名</strong>：准确处理<a href="../format/#aliases-references">令牌引用</a>，包括递归引用与循环依赖检测。</li>
            <li><strong>保留令牌属性</strong>：在解析过程中保持附加令牌属性（例如<a href="#extensions">$extensions</a>）。</li>
            <li><strong>优雅处理错误</strong>：为无效输入或循环引用等问题提供有意义的错误信息。</li>
        </ul>
    </section>

    <section id="acknowledgements" class="appendix informative">
        <div class="header-wrapper">
            <h2 id="a-acknowledgments"><bdi class="secno">A. </bdi>致谢</h2><a class="self-link" href="#acknowledgements"
                aria-label="附录 A 的永久链接。"></a>
        </div>
        <p><em>本节为非规范性内容。</em></p>

        <p>
            若无 Hyma 团队的支持，本解析器规范将无法完成，
            包括但不限于 Mike Kamminga、Andrew L’Homme 与 Lilith。
            Joren Broekema、Louis Chenais 亦作出了重要贡献。
            我们感谢设计令牌社区工作组成员的贡献与反馈。
        </p>
    </section>


    <section id="references" class="appendix">
        <div class="header-wrapper">
            <h2 id="b-references"><bdi class="secno">B. </bdi>参考文献</h2><a class="self-link" href="#references"
                aria-label="附录 B 的永久链接。"></a>
        </div>
        <section id="normative-references">
            <div class="header-wrapper">
                <h3 id="b-1-normative-references"><bdi class="secno">B.1 </bdi>规范性参考</h3><a class="self-link"
                    href="#normative-references" aria-label="附录 B.1 的永久链接。"></a>
            </div>

            <dl class="bibliography">
                <dt id="bib-html">[html]</dt>
                <dd>
                    <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML 标准</cite></a>。 Anne van Kesteren;
                    Domenic Denicola；Dominic Farolino；Ian Hickson；Philip Jägenstedt；Simon Pieters。WHATWG。活标准。
                    URL：<a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
                </dd>
                <dt id="bib-rfc1341">[RFC1341]</dt>
                <dd>
                    <a
                        href="https://www.rfc-editor.org/rfc/rfc1341"><cite>MIME（多用途互联网邮件扩展）：指定与描述互联网邮件正文格式的机制</cite></a>。
                    N. Borenstein；N. Freed。IETF。1992 年 6 月。建议标准。URL：<a
                        href="https://www.rfc-editor.org/rfc/rfc1341">https://www.rfc-editor.org/rfc/rfc1341</a>
                </dd>
                <dt id="bib-rfc2119">[RFC2119]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc2119"><cite>在 RFC 中用于指示需求级别的关键词</cite></a>。S.
                    Bradner。IETF。1997 年 3 月。当前最佳实践。URL：<a
                        href="https://www.rfc-editor.org/rfc/rfc2119">https://www.rfc-editor.org/rfc/rfc2119</a>
                </dd>
                <dt id="bib-rfc6838">[RFC6838]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc6838"><cite>媒体类型规范与注册流程</cite></a>。N. Freed；J. Klensin；T.
                    Hansen。IETF。2013 年 1 月。当前最佳实践。URL：<a
                        href="https://www.rfc-editor.org/rfc/rfc6838">https://www.rfc-editor.org/rfc/rfc6838</a>
                </dd>
                <dt id="bib-rfc6901">[RFC6901]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc6901"><cite>JavaScript 对象表示法（JSON）指针</cite></a>。P. Bryan,
                    Ed.；K. Zyp；M. Nottingham, Ed. IETF。2013 年 4 月。建议标准。URL：<a
                        href="https://www.rfc-editor.org/rfc/rfc6901">https://www.rfc-editor.org/rfc/rfc6901</a>
                </dd>
                <dt id="bib-rfc8174">[RFC8174]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc8174"><cite>RFC 2119 关键词大小写歧义</cite></a>。B.
                    Leiba。IETF。2017 年 5 月。当前最佳实践。URL：<a
                        href="https://www.rfc-editor.org/rfc/rfc8174">https://www.rfc-editor.org/rfc/rfc8174</a>
                </dd>
                <dt id="bib-rfc8259">[RFC8259]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc8259"><cite>JavaScript 对象表示法（JSON）数据交换格式</cite></a>。T.
                    Bray, Ed. IETF。2017 年 12 月。互联网标准。URL：<a
                        href="https://www.rfc-editor.org/rfc/rfc8259">https://www.rfc-editor.org/rfc/rfc8259</a>
                </dd>
                <dt id="bib-w3c-process">[w3c-process]</dt>
                <dd>
                    <a href="https://www.w3.org/policies/process/"><cite>W3C 流程文档</cite></a>。Elika J.
                    Etemad（fantasai）；Florian Rivoal。W3C。2025 年 8 月 18 日。URL：<a
                        href="https://www.w3.org/policies/process/">https://www.w3.org/policies/process/</a>
                </dd>
            </dl>
        </section>
    </section>
    <p role="navigation" id="back-to-top">
        <a href="#title"><abbr title="返回顶部">↑</abbr></a>
    </p>
    <script id="respec-highlight-vars">(() => {
            // @ts-check

            if (document.respec) {
                document.respec.ready.then(setupVarHighlighter);
            } else {
                setupVarHighlighter();
            }

            function setupVarHighlighter() {
                document
                    .querySelectorAll("var")
                    .forEach(varElem => varElem.addEventListener("click", highlightListener));
            }

            function highlightListener(ev) {
                ev.stopPropagation();
                const { target: varElem } = ev;
                const hightligtedElems = highlightVars(varElem);
                const resetListener = () => {
                    const hlColor = getHighlightColor(varElem);
                    hightligtedElems.forEach(el => removeHighlight(el, hlColor));
                    [...HL_COLORS.keys()].forEach(key => HL_COLORS.set(key, true));
                };
                if (hightligtedElems.length) {
                    document.body.addEventListener("click", resetListener, { once: true });
                }
            }

            // availability of highlight colors. colors from var.css
            const HL_COLORS = new Map([
                ["respec-hl-c1", true],
                ["respec-hl-c2", true],
                ["respec-hl-c3", true],
                ["respec-hl-c4", true],
                ["respec-hl-c5", true],
                ["respec-hl-c6", true],
                ["respec-hl-c7", true],
            ]);

            function getHighlightColor(target) {
                // return current colors if applicable
                const { value } = target.classList;
                const re = /respec-hl-\w+/;
                const activeClass = re.test(value) && value.match(re);
                if (activeClass) return activeClass[0];

                // first color preference
                if (HL_COLORS.get("respec-hl-c1") === true) return "respec-hl-c1";

                // otherwise get some other available color
                return [...HL_COLORS.keys()].find(c => HL_COLORS.get(c)) || "respec-hl-c1";
            }

            function highlightVars(varElem) {
                const textContent = norm(varElem.textContent);
                const parent = varElem.closest(".algorithm, section");
                const highlightColor = getHighlightColor(varElem);

                const varsToHighlight = [...parent.querySelectorAll("var")].filter(
                    el =>
                        norm(el.textContent) === textContent &&
                        el.closest(".algorithm, section") === parent
                );

                // update availability of highlight color
                const colorStatus = varsToHighlight[0].classList.contains("respec-hl");
                HL_COLORS.set(highlightColor, colorStatus);

                // highlight vars
                if (colorStatus) {
                    varsToHighlight.forEach(el => removeHighlight(el, highlightColor));
                    return [];
                } else {
                    varsToHighlight.forEach(el => addHighlight(el, highlightColor));
                }
                return varsToHighlight;
            }

            function removeHighlight(el, highlightColor) {
                el.classList.remove("respec-hl", highlightColor);
                // clean up empty class attributes so they don't come in export
                if (!el.classList.length) el.removeAttribute("class");
            }

            function addHighlight(elem, highlightColor) {
                elem.classList.add("respec-hl", highlightColor);
            }

            /**
             * Same as `norm` from src/core/utils, but our build process doesn't allow
             * imports in runtime scripts, so duplicated here.
             * @param {string} str
             */
            function norm(str) {
                return str.trim().replace(/\s+/g, " ");
            }
        })()</script>
    <script id="respec-dfn-panel">(() => {
                                               // @ts-check
                                               if (document.respec) {
                                                   document.respec.ready.then(setupPanel);
                                               } else {
                                                   setupPanel();
                                               }

                                               function setupPanel() {
                                                   const listener = panelListener();
                                                   document.body.addEventListener("keydown", listener);
                                                   document.body.addEventListener("click", listener);
                                               }

                                               function panelListener() {
                                                   /** @type {HTMLElement} */
                                                   let panel = null;
                                                   return event => {
                                                       const { target, type } = event;

                                                       if (!(target instanceof HTMLElement)) return;

                                                       // For keys, we only care about Enter key to activate the panel
                                                       // otherwise it's activated via a click.
                                                       if (type === "keydown" && event.key !== "Enter") return;

                                                       const action = deriveAction(event);

                                                       switch (action) {
                                                           case "show": {
                                                               hidePanel(panel);
                                                               /** @type {HTMLElement} */
                                                               const dfn = target.closest("dfn, .index-term");
                                                               panel = document.getElementById(`dfn-panel-for-${dfn.id}`);
                                                               const coords = deriveCoordinates(event);
                                                               displayPanel(dfn, panel, coords);
                                                               break;
                                                           }
                                                           case "dock": {
                                                               panel.style.left = null;
                                                               panel.style.top = null;
                                                               panel.classList.add("docked");
                                                               break;
                                                           }
                                                           case "hide": {
                                                               hidePanel(panel);
                                                               panel = null;
                                                               break;
                                                           }
                                                       }
                                                   };
                                               }

                                               /**
                                                * @param {MouseEvent|KeyboardEvent} event
                                                */
                                               function deriveCoordinates(event) {
                                                   const target = /** @type HTMLElement */ (event.target);

                                                   // We prevent synthetic AT clicks from putting
                                                   // the dialog in a weird place. The AT events sometimes
                                                   // lack coordinates, so they have clientX/Y = 0
                                                   const rect = target.getBoundingClientRect();
                                                   if (
                                                       event instanceof MouseEvent &&
                                                       event.clientX >= rect.left &&
                                                       event.clientY >= rect.top
                                                   ) {
                                                       // The event probably happened inside the bounding rect...
                                                       return { x: event.clientX, y: event.clientY };
                                                   }

                                                   // Offset to the middle of the element
                                                   const x = rect.x + rect.width / 2;
                                                   // Placed at the bottom of the element
                                                   const y = rect.y + rect.height;
                                                   return { x, y };
                                               }

                                               /**
                                                * @param {Event} event
                                                */
                                               function deriveAction(event) {
                                                   const target = /** @type {HTMLElement} */ (event.target);
                                                   const hitALink = !!target.closest("a");
                                                   if (target.closest("dfn:not([data-cite]), .index-term")) {
                                                       return hitALink ? "none" : "show";
                                                   }
                                                   if (target.closest(".dfn-panel")) {
                                                       if (hitALink) {
                                                           return target.classList.contains("self-link") ? "hide" : "dock";
                                                       }
                                                       const panel = target.closest(".dfn-panel");
                                                       return panel.classList.contains("docked") ? "hide" : "none";
                                                   }
                                                   if (document.querySelector(".dfn-panel:not([hidden])")) {
                                                       return "hide";
                                                   }
                                                   return "none";
                                               }

                                               /**
                                                * @param {HTMLElement} dfn
                                                * @param {HTMLElement} panel
                                                * @param {{ x: number, y: number }} clickPosition
                                                */
                                               function displayPanel(dfn, panel, { x, y }) {
                                                   panel.hidden = false;
                                                   // distance (px) between edge of panel and the pointing triangle (caret)
                                                   const MARGIN = 20;

                                                   const dfnRects = dfn.getClientRects();
                                                   // Find the `top` offset when the `dfn` can be spread across multiple lines
                                                   let closestTop = 0;
                                                   let minDiff = Infinity;
                                                   for (const rect of dfnRects) {
                                                       const { top, bottom } = rect;
                                                       const diffFromClickY = Math.abs((top + bottom) / 2 - y);
                                                       if (diffFromClickY < minDiff) {
                                                           minDiff = diffFromClickY;
                                                           closestTop = top;
                                                       }
                                                   }

                                                   const top = window.scrollY + closestTop + dfnRects[0].height;
                                                   const left = x - MARGIN;
                                                   panel.style.left = `${left}px`;
                                                   panel.style.top = `${top}px`;

                                                   // Find if the panel is flowing out of the window
                                                   const panelRect = panel.getBoundingClientRect();
                                                   const SCREEN_WIDTH = Math.min(window.innerWidth, window.screen.width);
                                                   if (panelRect.right > SCREEN_WIDTH) {
                                                       const newLeft = Math.max(MARGIN, x + MARGIN - panelRect.width);
                                                       const newCaretOffset = left - newLeft;
                                                       panel.style.left = `${newLeft}px`;
                                                       /** @type {HTMLElement} */
                                                       const caret = panel.querySelector(".caret");
                                                       caret.style.left = `${newCaretOffset}px`;
                                                   }

                                                   // As it's a dialog, we trap focus.
                                                   // TODO: when <dialog> becomes a implemented, we should really
                                                   // use that.
                                                   trapFocus(panel, dfn);
                                               }

                                               /**
                                                * @param {HTMLElement} panel
                                                * @param {HTMLElement} dfn
                                                * @returns
                                                */
                                               function trapFocus(panel, dfn) {
                                                   /** @type NodeListOf<HTMLAnchorElement> elements */
                                                   const anchors = panel.querySelectorAll("a[href]");
                                                   // No need to trap focus
                                                   if (!anchors.length) return;

                                                   // Move focus to first anchor element
                                                   const first = anchors.item(0);
                                                   first.focus();

                                                   const trapListener = createTrapListener(anchors, panel, dfn);
                                                   panel.addEventListener("keydown", trapListener);

                                                   // Hiding the panel releases the trap
                                                   const mo = new MutationObserver(records => {
                                                       const [record] = records;
                                                       const target = /** @type HTMLElement */ (record.target);
                                                       if (target.hidden) {
                                                           panel.removeEventListener("keydown", trapListener);
                                                           mo.disconnect();
                                                       }
                                                   });
                                                   mo.observe(panel, { attributes: true, attributeFilter: ["hidden"] });
                                               }

                                               /**
                                                *
                                                * @param {NodeListOf<HTMLAnchorElement>} anchors
                                                * @param {HTMLElement} panel
                                                * @param {HTMLElement} dfn
                                                * @returns
                                                */
                                               function createTrapListener(anchors, panel, dfn) {
                                                   const lastIndex = anchors.length - 1;
                                                   let currentIndex = 0;
                                                   return event => {
                                                       switch (event.key) {
                                                           // Hitting "Tab" traps us in a nice loop around elements.
                                                           case "Tab": {
                                                               event.preventDefault();
                                                               currentIndex += event.shiftKey ? -1 : +1;
                                                               if (currentIndex < 0) {
                                                                   currentIndex = lastIndex;
                                                               } else if (currentIndex > lastIndex) {
                                                                   currentIndex = 0;
                                                               }
                                                               anchors.item(currentIndex).focus();
                                                               break;
                                                           }

                                                           // Hitting "Enter" on an anchor releases the trap.
                                                           case "Enter":
                                                               hidePanel(panel);
                                                               break;

                                                           // Hitting "Escape" returns focus to dfn.
                                                           case "Escape":
                                                               hidePanel(panel);
                                                               dfn.focus();
                                                               return;
                                                       }
                                                   };
                                               }

                                               /** @param {HTMLElement} panel */
                                               function hidePanel(panel) {
                                                   if (!panel) return;
                                                   panel.hidden = true;
                                                   panel.classList.remove("docked");
                                               }
                                           })()</script>
    <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
    <script async id="netlify-rum-container" src="https://www.designtokens.org/.netlify/scripts/rum"
        data-netlify-rum-site-id="665fa8be-0ec2-447d-837a-3a7f6e3f986c" data-netlify-deploy-branch="main"
        data-netlify-deploy-context="production"
        data-netlify-cwv-token="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzaXRlX2lkIjoiNjY1ZmE4YmUtMGVjMi00NDdkLTgzN2EtM2E3ZjZlM2Y5ODZjIiwiYWNjb3VudF9pZCI6IjU5MDkzNjc0YTcwMGM0NWE4YjM2MTM5MSIsImRlcGxveV9pZCI6IjY5MmEyMzE1NGU1YjRjMDAwODkxZDU2NSIsImlzc3VlciI6Im5mc2VydmVyIn0.E7_FJh2KeDBbAIbX3NW_96ncLYcJuQg0XYBjfaETDbU"></script>
    <script src="https://htmlspecs.com/dropdown.js"></script>
</body>

</html>