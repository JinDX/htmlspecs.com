<!doctype html>
<html lang="zh-hans">

<head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <title>可观察对象</title>
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
    <link href="https://www.w3.org/StyleSheets/TR/2021/cg-draft" rel="stylesheet">
    <meta content="Bikeshed version 3f621ba99, updated Mon Jul 28 15:38:36 2025 -0700" name="generator">
    <link href="https://wicg.github.io/observable/" rel="canonical">
    <meta content="fdfc3b358fe865bbe601c0b765b6d763bec7e82e" name="revision">
    <meta content="dark light" name="color-scheme">
    <link href="https://www.w3.org/StyleSheets/TR/2021/dark.css" media="(prefers-color-scheme: dark)" rel="stylesheet"
        type="text/css">
    <style>
        /* Put nice boxes around each algorithm. */
        [data-algorithm]:not(.heading) {
            padding: .5em;
            border: thin solid #ddd;
            border-radius: .5em;
            margin: .5em calc(-0.5em - 1px);
        }

        [data-algorithm]:not(.heading)> :first-child {
            margin-top: 0;
        }

        [data-algorithm]:not(.heading)> :last-child {
            margin-bottom: 0;
        }

        [data-algorithm] [data-algorithm] {
            margin: 1em 0;
        }

        .selected-text-file-an-issue {
            position: fixed;
            bottom: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.8);
            font-size: smaller;
            padding: 4px 10px;
            z-index: 4;
        }

        dfn var {
            font-style: italic;
        }

        table {
            margin: 1em 0;
        }

        /* WHATWG-style <hr>s, instead of WICG-style. Specific selector is necessary to override WICG styles. */
        :not(.head)> :not(.head)+hr {
            display: block;
            background: none;
            border: none;
            padding: 0;
            margin: 3em 0;
            height: auto;
        }

        :not(.head)> :not(.head)+hr::before {
            content: none;
        }

        /* WHATWG-style element definition class */
        .element {
            background: #EEFFEE;
        }

        dt {
            margin-top: 12px;
        }

        dl,
        dd {
            padding-left: .5em;
        }

        /* domintro from https://resources.whatwg.org/standard.css */
        .domintro {
            position: relative;
            color: green;
            background: #DDFFDD;
            margin: 2.5em 0 2em 0;
            padding: 1.5em 1em 0.5em 2em;
        }

        .domintro dt,
        .domintro dt * {
            color: black;
            font-size: inherit;
        }

        .domintro dd {
            margin: 0.5em 0 1em 2em;
            padding: 0;
        }

        .domintro dd p {
            margin: 0.5em 0;
        }

        .domintro::before {
            content: 'For web developers (non-normative)';
            background: green;
            color: white;
            padding: 0.15em 0.25em;
            font-style: normal;
            position: absolute;
            top: -0.8em;
            left: -0.8em;
        }

        /* .XXX from https://resources.whatwg.org/standard.css */
        .XXX {
            color: #D50606;
            background: white;
            border: solid #D50606;
        }
    </style>
    <style>
        /* Boilerplate: style-autolinks */
        .css.css,
        .property.property,
        .descriptor.descriptor {
            color: var(--a-normal-text);
            font-size: inherit;
            font-family: inherit;
        }

        .css::before,
        .property::before,
        .descriptor::before {
            content: "‘";
        }

        .css::after,
        .property::after,
        .descriptor::after {
            content: "’";
        }

        .property,
        .descriptor {
            /* Don't wrap property and descriptor names */
            white-space: nowrap;
        }

        .type {
            /* CSS value <type> */
            font-style: italic;
        }

        pre .property::before,
        pre .property::after {
            content: "";
        }

        [data-link-type="property"]::before,
        [data-link-type="propdesc"]::before,
        [data-link-type="descriptor"]::before,
        [data-link-type="value"]::before,
        [data-link-type="function"]::before,
        [data-link-type="at-rule"]::before,
        [data-link-type="selector"]::before,
        [data-link-type="maybe"]::before {
            content: "‘";
        }

        [data-link-type="property"]::after,
        [data-link-type="propdesc"]::after,
        [data-link-type="descriptor"]::after,
        [data-link-type="value"]::after,
        [data-link-type="function"]::after,
        [data-link-type="at-rule"]::after,
        [data-link-type="selector"]::after,
        [data-link-type="maybe"]::after {
            content: "’";
        }

        [data-link-type].production::before,
        [data-link-type].production::after,
        .prod [data-link-type]::before,
        .prod [data-link-type]::after {
            content: "";
        }

        [data-link-type=element],
        [data-link-type=element-attr] {
            font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
            font-size: .9em;
        }

        [data-link-type=element]::before {
            content: "<"
        }

        [data-link-type=element]::after {
            content: ">"
        }

        [data-link-type=biblio] {
            white-space: pre;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --selflink-text: black;
                --selflink-bg: silver;
                --selflink-hover-text: white;
            }
        }
    </style>
    <style>
        /* Boilerplate: style-colors */
        /* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
        :root {
            color-scheme: light dark;

            --text: black;
            --bg: white;

            --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

            --logo-bg: #1a5e9a;
            --logo-active-bg: #c00;
            --logo-text: white;

            --tocnav-normal-text: #707070;
            --tocnav-normal-bg: var(--bg);
            --tocnav-hover-text: var(--tocnav-normal-text);
            --tocnav-hover-bg: #f8f8f8;
            --tocnav-active-text: #c00;
            --tocnav-active-bg: var(--tocnav-normal-bg);

            --tocsidebar-text: var(--text);
            --tocsidebar-bg: #f7f8f9;
            --tocsidebar-shadow: rgba(0, 0, 0, .1);
            --tocsidebar-heading-text: hsla(203, 20%, 40%, .7);

            --toclink-text: var(--text);
            --toclink-underline: #3980b5;
            --toclink-visited-text: var(--toclink-text);
            --toclink-visited-underline: #054572;

            --heading-text: #005a9c;

            --hr-text: var(--text);

            --algo-border: #def;

            --del-text: red;
            --del-bg: transparent;
            --ins-text: #080;
            --ins-bg: transparent;

            --a-normal-text: #034575;
            --a-normal-underline: #bbb;
            --a-visited-text: var(--a-normal-text);
            --a-visited-underline: #707070;
            --a-hover-bg: rgba(75%, 75%, 75%, .25);
            --a-active-text: #c00;
            --a-active-underline: #c00;

            --blockquote-border: silver;
            --blockquote-bg: transparent;
            --blockquote-text: currentcolor;

            --issue-border: #e05252;
            --issue-bg: #fbe9e9;
            --issue-text: var(--text);
            --issueheading-text: #831616;

            --example-border: #e0cb52;
            --example-bg: #fcfaee;
            --example-text: var(--text);
            --exampleheading-text: #574b0f;

            --note-border: #52e052;
            --note-bg: #e9fbe9;
            --note-text: var(--text);
            --noteheading-text: hsl(120, 70%, 30%);
            --notesummary-underline: silver;

            --assertion-border: #aaa;
            --assertion-bg: #eee;
            --assertion-text: black;

            --advisement-border: orange;
            --advisement-bg: #fec;
            --advisement-text: var(--text);
            --advisementheading-text: #b35f00;

            --warning-border: red;
            --warning-bg: hsla(40, 100%, 50%, 0.95);
            --warning-text: var(--text);

            --amendment-border: #330099;
            --amendment-bg: #F5F0FF;
            --amendment-text: var(--text);
            --amendmentheading-text: #220066;

            --def-border: #8ccbf2;
            --def-bg: #def;
            --def-text: var(--text);
            --defrow-border: #bbd7e9;

            --datacell-border: silver;

            --indexinfo-text: #707070;

            --indextable-hover-text: black;
            --indextable-hover-bg: #f7f8f9;

            --outdatedspec-bg: rgba(0, 0, 0, .5);
            --outdatedspec-text: black;
            --outdated-bg: maroon;
            --outdated-text: white;
            --outdated-shadow: red;

            --editedrec-bg: darkorange;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --text: #ddd;
                --bg: black;

                --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

                --logo-bg: #1a5e9a;
                --logo-active-bg: #c00;
                --logo-text: white;

                --tocnav-normal-text: #999;
                --tocnav-normal-bg: var(--bg);
                --tocnav-hover-text: var(--tocnav-normal-text);
                --tocnav-hover-bg: #080808;
                --tocnav-active-text: #f44;
                --tocnav-active-bg: var(--tocnav-normal-bg);

                --tocsidebar-text: var(--text);
                --tocsidebar-bg: #080808;
                --tocsidebar-shadow: rgba(255, 255, 255, .1);
                --tocsidebar-heading-text: hsla(203, 20%, 40%, .7);

                --toclink-text: var(--text);
                --toclink-underline: #6af;
                --toclink-visited-text: var(--toclink-text);
                --toclink-visited-underline: #054572;

                --heading-text: #8af;

                --hr-text: var(--text);

                --algo-border: #456;

                --del-text: #f44;
                --del-bg: transparent;
                --ins-text: #4a4;
                --ins-bg: transparent;

                --a-normal-text: #6af;
                --a-normal-underline: #555;
                --a-visited-text: var(--a-normal-text);
                --a-visited-underline: var(--a-normal-underline);
                --a-hover-bg: rgba(25%, 25%, 25%, .2);
                --a-active-text: #f44;
                --a-active-underline: var(--a-active-text);

                --borderedblock-bg: rgba(255, 255, 255, .05);

                --blockquote-border: silver;
                --blockquote-bg: var(--borderedblock-bg);
                --blockquote-text: currentcolor;

                --issue-border: #e05252;
                --issue-bg: var(--borderedblock-bg);
                --issue-text: var(--text);
                --issueheading-text: hsl(0deg, 70%, 70%);

                --example-border: hsl(50deg, 90%, 60%);
                --example-bg: var(--borderedblock-bg);
                --example-text: var(--text);
                --exampleheading-text: hsl(50deg, 70%, 70%);

                --note-border: hsl(120deg, 100%, 35%);
                --note-bg: var(--borderedblock-bg);
                --note-text: var(--text);
                --noteheading-text: hsl(120, 70%, 70%);
                --notesummary-underline: silver;

                --assertion-border: #444;
                --assertion-bg: var(--borderedblock-bg);
                --assertion-text: var(--text);

                --advisement-border: orange;
                --advisement-bg: #222218;
                --advisement-text: var(--text);
                --advisementheading-text: #f84;

                --warning-border: red;
                --warning-bg: hsla(40, 100%, 20%, 0.95);
                --warning-text: var(--text);

                --amendment-border: #330099;
                --amendment-bg: #080010;
                --amendment-text: var(--text);
                --amendmentheading-text: #cc00ff;

                --def-border: #8ccbf2;
                --def-bg: #080818;
                --def-text: var(--text);
                --defrow-border: #136;

                --datacell-border: silver;

                --indexinfo-text: #aaa;

                --indextable-hover-text: var(--text);
                --indextable-hover-bg: #181818;

                --outdatedspec-bg: rgba(255, 255, 255, .5);
                --outdatedspec-text: black;
                --outdated-bg: maroon;
                --outdated-text: white;
                --outdated-shadow: red;

                --editedrec-bg: darkorange;
            }

            /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
            img {
                background: white;
            }
        }
    </style>
    <style>
        /* Boilerplate: style-counters */
        body {
            counter-reset: example figure issue;
        }

        .issue {
            counter-increment: issue;
        }

        .issue:not(.no-marker)::before {
            content: "Issue " counter(issue);
        }

        .example {
            counter-increment: example;
        }

        .example:not(.no-marker)::before {
            content: "Example " counter(example);
        }

        .invalid.example:not(.no-marker)::before,
        .illegal.example:not(.no-marker)::before {
            content: "Invalid Example" counter(example);
        }

        figcaption {
            counter-increment: figure;
        }

        figcaption:not(.no-marker)::before {
            content: "Figure " counter(figure) " ";
        }
    </style>
    <style>
        /* Boilerplate: style-dfn-panel */
        :root {
            --dfnpanel-bg: #ddd;
            --dfnpanel-text: var(--text);
            --dfnpanel-target-bg: #ffc;
            --dfnpanel-target-outline: orange;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --dfnpanel-bg: #222;
                --dfnpanel-text: var(--text);
                --dfnpanel-target-bg: #333;
                --dfnpanel-target-outline: silver;
            }
        }

        .dfn-panel {
            position: absolute;
            z-index: 35;
            width: 20em;
            width: 300px;
            height: auto;
            max-height: 500px;
            overflow: auto;
            padding: 0.5em 0.75em;
            font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
            background: var(--dfnpanel-bg);
            color: var(--dfnpanel-text);
            border: outset 0.2em;
            white-space: normal;
            /* in case it's moved into a pre */
        }

        .dfn-panel:not(.on) {
            display: none;
        }

        .dfn-panel * {
            margin: 0;
            padding: 0;
            text-indent: 0;
        }

        .dfn-panel>b {
            display: block;
        }

        .dfn-panel a {
            color: var(--dfnpanel-text);
        }

        .dfn-panel a:not(:hover) {
            text-decoration: none !important;
            border-bottom: none !important;
        }

        .dfn-panel a:focus {
            outline: 5px auto Highlight;
            outline: 5px auto -webkit-focus-ring-color;
        }

        .dfn-panel>b+b {
            margin-top: 0.25em;
        }

        .dfn-panel ul {
            padding: 0 0 0 1em;
            list-style: none;
        }

        .dfn-panel li a {
            max-width: calc(300px - 1.5em - 1em);
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .dfn-panel.activated {
            display: inline-block;
            position: fixed;
            left: 8px;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - 1.5em - .4em - .5em);
            max-height: 30vh;
            transition: left 1s ease-out, bottom 1s ease-out;
        }

        .dfn-panel .link-item:hover {
            text-decoration: underline;
        }

        .dfn-panel .link-item .copy-icon {
            opacity: 0;
        }

        .dfn-panel .link-item:hover .copy-icon,
        .dfn-panel .link-item .copy-icon:focus {
            opacity: 1;
        }

        .dfn-panel .copy-icon {
            display: inline-block;
            margin-right: 0.5em;
            width: 0.85em;
            height: 1em;
            border-radius: 3px;
            background-color: #ccc;
            cursor: pointer;
        }

        .dfn-panel .copy-icon .icon {
            width: 100%;
            height: 100%;
            background-color: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        .dfn-panel .copy-icon .icon::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: 1px solid black;
            background-color: #ccc;
            opacity: 0.25;
            transform: translate(3px, -3px);
        }

        .dfn-panel .copy-icon:active .icon::before {
            opacity: 1;
        }

        .dfn-paneled[role="button"] {
            cursor: help;
        }

        .highlighted {
            animation: target-fade 3s;
        }

        @keyframes target-fade {
            from {
                background-color: var(--dfnpanel-target-bg);
                outline: 5px solid var(--dfnpanel-target-outline);
            }

            to {
                color: var(--a-normal-text);
                background-color: transparent;
                outline: transparent;
            }
        }
    </style>
    <style>
        /* Boilerplate: style-idl-highlighting */
        pre.idl.highlight {
            background: var(--borderedblock-bg, var(--def-bg));
        }
    </style>
    <style>
        /* Boilerplate: style-issues */
        a[href].issue-return {
            float: right;
            float: inline-end;
            color: var(--issueheading-text);
            font-weight: bold;
            text-decoration: none;
        }
    </style>
    <style>
        /* Boilerplate: style-md-lists */
        /* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
        [data-md]> :first-child {
            margin-top: 0;
        }

        [data-md]> :last-child {
            margin-bottom: 0;
        }
    </style>
    <style>
        /* Boilerplate: style-ref-hints */
        :root {
            --ref-hint-bg: #ddd;
            --ref-hint-text: var(--text);
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --ref-hint-bg: #222;
                --ref-hint-text: var(--text);
            }
        }

        .ref-hint {
            display: inline-block;
            position: absolute;
            z-index: 35;
            width: 20em;
            width: 300px;
            height: auto;
            max-height: 500px;
            overflow: auto;
            padding: 0.5em 0.5em;
            font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
            background: var(--ref-hint-bg);
            color: var(--ref-hint-text);
            border: outset 0.2em;
            white-space: normal;
            /* in case it's moved into a pre */
        }

        .ref-hint * {
            margin: 0;
            padding: 0;
            text-indent: 0;
        }

        .ref-hint ul {
            padding: 0 0 0 1em;
            list-style: none;
        }
    </style>
    <style>
        /* Boilerplate: style-selflinks */
        :root {
            --selflink-text: white;
            --selflink-bg: gray;
            --selflink-hover-text: black;
        }

        .heading,
        .issue,
        .note,
        .example,
        li,
        dt {
            position: relative;
        }

        a.self-link {
            position: absolute;
            top: 0;
            left: calc(-1 * (3.5rem - 26px));
            width: calc(3.5rem - 26px);
            height: 2em;
            text-align: center;
            border: none;
            transition: opacity .2s;
            opacity: .5;
        }

        a.self-link:hover {
            opacity: 1;
        }

        .heading>a.self-link {
            font-size: 83%;
        }

        .example>a.self-link,
        .note>a.self-link,
        .issue>a.self-link {
            /* These blocks are overflow:auto, so positioning outside
       doesn't work. */
            left: auto;
            right: 0;
        }

        li>a.self-link {
            left: calc(-1 * (3.5rem - 26px) - 2em);
        }

        dfn>a.self-link {
            top: auto;
            left: auto;
            opacity: 0;
            width: 1.5em;
            height: 1.5em;
            background: var(--selflink-bg);
            color: var(--selflink-text);
            font-style: normal;
            transition: opacity .2s, background-color .2s, color .2s;
        }

        dfn:hover>a.self-link {
            opacity: 1;
        }

        dfn>a.self-link:hover {
            color: var(--selflink-hover-text);
        }

        a.self-link::before {
            content: "¶";
        }

        .heading>a.self-link::before {
            content: "§";
        }

        dfn>a.self-link::before {
            content: "#";
        }
    </style>
    <style>
        /* Boilerplate: style-syntax-highlighting */
        code.highlight {
            padding: .1em;
            border-radius: .3em;
        }

        pre.highlight,
        pre>code.highlight {
            display: block;
            padding: 1em;
            margin: .5em 0;
            overflow: auto;
            border-radius: 0;
        }

        .highlight:not(.idl) {
            background: rgba(0, 0, 0, .03);
        }

        c-[a] {
            color: #990055
        }

        /* Keyword.Declaration */
        c-[b] {
            color: #990055
        }

        /* Keyword.Type */
        c-[c] {
            color: #708090
        }

        /* Comment */
        c-[d] {
            color: #708090
        }

        /* Comment.Multiline */
        c-[e] {
            color: #0077aa
        }

        /* Name.Attribute */
        c-[f] {
            color: #669900
        }

        /* Name.Tag */
        c-[g] {
            color: #222222
        }

        /* Name.Variable */
        c-[k] {
            color: #990055
        }

        /* Keyword */
        c-[l] {
            color: #000000
        }

        /* Literal */
        c-[m] {
            color: #000000
        }

        /* Literal.Number */
        c-[n] {
            color: #0077aa
        }

        /* Name */
        c-[o] {
            color: #999999
        }

        /* Operator */
        c-[p] {
            color: #999999
        }

        /* Punctuation */
        c-[s] {
            color: #a67f59
        }

        /* Literal.String */
        c-[t] {
            color: #a67f59
        }

        /* Literal.String.Single */
        c-[u] {
            color: #a67f59
        }

        /* Literal.String.Double */
        c-[cp] {
            color: #708090
        }

        /* Comment.Preproc */
        c-[c1] {
            color: #708090
        }

        /* Comment.Single */
        c-[cs] {
            color: #708090
        }

        /* Comment.Special */
        c-[kc] {
            color: #990055
        }

        /* Keyword.Constant */
        c-[kn] {
            color: #990055
        }

        /* Keyword.Namespace */
        c-[kp] {
            color: #990055
        }

        /* Keyword.Pseudo */
        c-[kr] {
            color: #990055
        }

        /* Keyword.Reserved */
        c-[ld] {
            color: #000000
        }

        /* Literal.Date */
        c-[nc] {
            color: #0077aa
        }

        /* Name.Class */
        c-[no] {
            color: #0077aa
        }

        /* Name.Constant */
        c-[nd] {
            color: #0077aa
        }

        /* Name.Decorator */
        c-[ni] {
            color: #0077aa
        }

        /* Name.Entity */
        c-[ne] {
            color: #0077aa
        }

        /* Name.Exception */
        c-[nf] {
            color: #0077aa
        }

        /* Name.Function */
        c-[nl] {
            color: #0077aa
        }

        /* Name.Label */
        c-[nn] {
            color: #0077aa
        }

        /* Name.Namespace */
        c-[py] {
            color: #0077aa
        }

        /* Name.Property */
        c-[ow] {
            color: #999999
        }

        /* Operator.Word */
        c-[mb] {
            color: #000000
        }

        /* Literal.Number.Bin */
        c-[mf] {
            color: #000000
        }

        /* Literal.Number.Float */
        c-[mh] {
            color: #000000
        }

        /* Literal.Number.Hex */
        c-[mi] {
            color: #000000
        }

        /* Literal.Number.Integer */
        c-[mo] {
            color: #000000
        }

        /* Literal.Number.Oct */
        c-[sb] {
            color: #a67f59
        }

        /* Literal.String.Backtick */
        c-[sc] {
            color: #a67f59
        }

        /* Literal.String.Char */
        c-[sd] {
            color: #a67f59
        }

        /* Literal.String.Doc */
        c-[se] {
            color: #a67f59
        }

        /* Literal.String.Escape */
        c-[sh] {
            color: #a67f59
        }

        /* Literal.String.Heredoc */
        c-[si] {
            color: #a67f59
        }

        /* Literal.String.Interpol */
        c-[sx] {
            color: #a67f59
        }

        /* Literal.String.Other */
        c-[sr] {
            color: #a67f59
        }

        /* Literal.String.Regex */
        c-[ss] {
            color: #a67f59
        }

        /* Literal.String.Symbol */
        c-[vc] {
            color: #0077aa
        }

        /* Name.Variable.Class */
        c-[vg] {
            color: #0077aa
        }

        /* Name.Variable.Global */
        c-[vi] {
            color: #0077aa
        }

        /* Name.Variable.Instance */
        c-[il] {
            color: #000000
        }

        /* Literal.Number.Integer.Long */

        @media (prefers-color-scheme: dark) {
            .highlight:not(.idl) {
                background: rgba(255, 255, 255, .05);
            }

            c-[a] {
                color: #d33682
            }

            /* Keyword.Declaration */
            c-[b] {
                color: #d33682
            }

            /* Keyword.Type */
            c-[c] {
                color: #2aa198
            }

            /* Comment */
            c-[d] {
                color: #2aa198
            }

            /* Comment.Multiline */
            c-[e] {
                color: #268bd2
            }

            /* Name.Attribute */
            c-[f] {
                color: #b58900
            }

            /* Name.Tag */
            c-[g] {
                color: #cb4b16
            }

            /* Name.Variable */
            c-[k] {
                color: #d33682
            }

            /* Keyword */
            c-[l] {
                color: #657b83
            }

            /* Literal */
            c-[m] {
                color: #657b83
            }

            /* Literal.Number */
            c-[n] {
                color: #268bd2
            }

            /* Name */
            c-[o] {
                color: #657b83
            }

            /* Operator */
            c-[p] {
                color: #657b83
            }

            /* Punctuation */
            c-[s] {
                color: #6c71c4
            }

            /* Literal.String */
            c-[t] {
                color: #6c71c4
            }

            /* Literal.String.Single */
            c-[u] {
                color: #6c71c4
            }

            /* Literal.String.Double */
            c-[ch] {
                color: #2aa198
            }

            /* Comment.Hashbang */
            c-[cp] {
                color: #2aa198
            }

            /* Comment.Preproc */
            c-[cpf] {
                color: #2aa198
            }

            /* Comment.PreprocFile */
            c-[c1] {
                color: #2aa198
            }

            /* Comment.Single */
            c-[cs] {
                color: #2aa198
            }

            /* Comment.Special */
            c-[kc] {
                color: #d33682
            }

            /* Keyword.Constant */
            c-[kn] {
                color: #d33682
            }

            /* Keyword.Namespace */
            c-[kp] {
                color: #d33682
            }

            /* Keyword.Pseudo */
            c-[kr] {
                color: #d33682
            }

            /* Keyword.Reserved */
            c-[ld] {
                color: #657b83
            }

            /* Literal.Date */
            c-[nc] {
                color: #268bd2
            }

            /* Name.Class */
            c-[no] {
                color: #268bd2
            }

            /* Name.Constant */
            c-[nd] {
                color: #268bd2
            }

            /* Name.Decorator */
            c-[ni] {
                color: #268bd2
            }

            /* Name.Entity */
            c-[ne] {
                color: #268bd2
            }

            /* Name.Exception */
            c-[nf] {
                color: #268bd2
            }

            /* Name.Function */
            c-[nl] {
                color: #268bd2
            }

            /* Name.Label */
            c-[nn] {
                color: #268bd2
            }

            /* Name.Namespace */
            c-[py] {
                color: #268bd2
            }

            /* Name.Property */
            c-[ow] {
                color: #657b83
            }

            /* Operator.Word */
            c-[mb] {
                color: #657b83
            }

            /* Literal.Number.Bin */
            c-[mf] {
                color: #657b83
            }

            /* Literal.Number.Float */
            c-[mh] {
                color: #657b83
            }

            /* Literal.Number.Hex */
            c-[mi] {
                color: #657b83
            }

            /* Literal.Number.Integer */
            c-[mo] {
                color: #657b83
            }

            /* Literal.Number.Oct */
            c-[sa] {
                color: #6c71c4
            }

            /* Literal.String.Affix */
            c-[sb] {
                color: #6c71c4
            }

            /* Literal.String.Backtick */
            c-[sc] {
                color: #6c71c4
            }

            /* Literal.String.Char */
            c-[dl] {
                color: #6c71c4
            }

            /* Literal.String.Delimiter */
            c-[sd] {
                color: #6c71c4
            }

            /* Literal.String.Doc */
            c-[se] {
                color: #6c71c4
            }

            /* Literal.String.Escape */
            c-[sh] {
                color: #6c71c4
            }

            /* Literal.String.Heredoc */
            c-[si] {
                color: #6c71c4
            }

            /* Literal.String.Interpol */
            c-[sx] {
                color: #6c71c4
            }

            /* Literal.String.Other */
            c-[sr] {
                color: #6c71c4
            }

            /* Literal.String.Regex */
            c-[ss] {
                color: #6c71c4
            }

            /* Literal.String.Symbol */
            c-[fm] {
                color: #268bd2
            }

            /* Name.Function.Magic */
            c-[vc] {
                color: #cb4b16
            }

            /* Name.Variable.Class */
            c-[vg] {
                color: #cb4b16
            }

            /* Name.Variable.Global */
            c-[vi] {
                color: #cb4b16
            }

            /* Name.Variable.Instance */
            c-[vm] {
                color: #cb4b16
            }

            /* Name.Variable.Magic */
            c-[il] {
                color: #657b83
            }

            /* Literal.Number.Integer.Long */
        }
    </style>
    <style>
        /* Boilerplate: style-var-click-highlighting */
        /*
Colors were chosen in Lab using https://nixsensor.com/free-color-converter/
D50 2deg illuminant, L in [0,100], a and b in [-128, 128]
0 = lab(85,0,85)
1 = lab(85,80,30)
2 = lab(85,-40,40)
3 = lab(85,-50,0)
4 = lab(85,5,15)
5 = lab(85,-10,-50)
6 = lab(85,35,-15)

For darkmode:
0 = oklab(50%   0%  108%)
1 = oklab(50% -51%   51%)
2 = oklab(50% -64%  -20%)
3 = oklab(50%   6%   19%)
4 = oklab(50% -12%  -64%)
5 = oklab(50%  44%  -19%)  
6 = oklab(50% 102%   38%)
*/

        [data-algorithm] var {
            cursor: pointer;
        }

        var[data-var-color] {
            background-color: var(--var-bg);
            box-shadow: 0 0 0 2px var(--var-bg);
        }

        var[data-var-color] {
            --var-bg: #F4D200;
        }

        var[data-var-color="1"] {
            --var-bg: #FF87A2;
        }

        var[data-var-color="2"] {
            --var-bg: #96E885;
        }

        var[data-var-color="3"] {
            --var-bg: #3EEED2;
        }

        var[data-var-color="4"] {
            --var-bg: #EACFB6;
        }

        var[data-var-color="5"] {
            --var-bg: #82DDFF;
        }

        var[data-var-color="6"] {
            --var-vg: #FFBCF2;
        }

        @media (prefers-color-scheme: dark) {
            var[data-var-color] {
                --var-bg: #bc1a00;
            }

            var[data-var-color="1"] {
                --var-bg: #007f00;
            }

            var[data-var-color="2"] {
                --var-bg: #008698;
            }

            var[data-var-color="3"] {
                --var-bg: #7f5b2b;
            }

            var[data-var-color="4"] {
                --var-bg: #004df3;
            }

            var[data-var-color="5"] {
                --var-bg: #a1248a;
            }

            var[data-var-color="6"] {
                --var-vg: #ff0000;
            }
        }
    </style>
    <style>
        /* Boilerplate: style-wpt */
        :root {
            --wpt-border: hsl(0, 0%, 60%);
            --wpt-bg: hsl(0, 0%, 95%);
            --wpt-text: var(--text);
            --wptheading-text: hsl(0, 0%, 30%);
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --wpt-border: hsl(0, 0%, 30%);
                --wpt-bg: var(--borderedblock-bg);
                --wpt-text: var(--text);
                --wptheading-text: hsl(0, 0%, 60%);
            }
        }

        .wpt-tests-block {
            list-style: none;
            border-left: .5em solid var(--wpt-border);
            background: var(--wpt-bg);
            color: var(--wpt-text);
            margin: 1em auto;
            padding: .5em;
        }

        .wpt-tests-block summary {
            color: var(--wptheading-text);
            font-weight: normal;
            text-transform: uppercase;
        }

        .wpt-tests-block summary::marker {
            color: var(--wpt-border);
        }

        .wpt-tests-block summary:hover::marker {
            color: var(--wpt-text);
        }

        /*
   The only content  of a wpt test block in its closed state is the <summary>,
   which contains the word TESTS,
   and that is absolutely positioned.
   In that closed state, wpt test blocks are styled
   to have a top margin whose height is exactly equal
   to the height of the absolutely positioned <summary>,
   and no other background/padding/margin/border.
   The wpt test block elements will therefore allow the maring
   of the previous/next block elements
   to collapse through them;
   if this combined margin would be larger than its own top margin,
   it stays as is,
   and therefore the pre-existing vertical rhythm of the document is undisturbed.
   If that combined margin would be smaller, it is grown to that size.
   This means that the wpt test block ensures
   that there's always enough vertical space to insert the summary,
   without adding more than is needed.
*/
        .wpt-tests-block:not([open]) {
            padding: 0;
            border: none;
            background: none;
            font-size: 0.75em;
            line-height: 1;
            position: relative;
            margin: 1em 0 0;
        }

        .wpt-tests-block:not([open]) summary {
            position: absolute;
            right: 0;
            bottom: 0;
        }

        /*
   It is possible that both the last child of a block element
   and the block element itself
   would be annotated with a <wpt> block each.
   If the block element has a padding or a border,
   that's fine, but otherwise
   the bottom margin of the block and of its last child would collapse
   and both <wpt> elements would overlap, being both placed there.
   To avoid that, add 1px of padding to the <wpt> element annotating the last child
   to prevent the bottom margin of the block and of its last child from collapsing
   (and as much negative margin,
   as wel only want to prevent margin collapsing,
   but are not trying to actually take more space).
*/
        .wpt-tests-block:not([open]):last-child {
            padding-bottom: 1px;
            margin-bottom: -1px;
        }

        /*
   Exception to the previous rule:
   don't do that in non-last list items,
   because it's not necessary,
   and would therefore consume more space than strictly needed.
   Lists must have list items as children, not <wpt> elements,
   so a <wpt> element cannot be a sibling of a list item,
   and the collision that the previous rule avoids cannot happen.
*/
        li:not(:last-child)>.wpt-tests-block:not([open]):last-child,
        dd:not(:last-child)>.wpt-tests-block:not([open]):last-child {
            padding-bottom: 0;
            margin-bottom: 0;
        }

        .wpt-tests-block:not([open]):not(:hover) {
            opacity: 0.5;
        }

        .wpt-tests-list {
            list-style: none;
            display: grid;
            margin: 0;
            padding: 0;
            grid-template-columns: 1fr max-content auto auto;
            grid-column-gap: .5em;
        }

        .wpt-tests-block hr:last-child {
            display: none;
        }

        .wpt-test {
            display: contents;
        }

        .wpt-test>a {
            text-decoration: underline;
            border: none;
        }

        .wpt-test>.wpt-name {
            grid-column: 1;
        }

        .wpt-test>.wpt-results {
            grid-column: 2;
        }

        .wpt-test>.wpt-live {
            grid-column: 3;
        }

        .wpt-test>.wpt-source {
            grid-column: 4;
        }

        .wpt-test>.wpt-results {
            display: flex;
            gap: .1em;
        }

        .wpt-test .wpt-result {
            display: inline-block;
            height: 1em;
            width: 1em;
            border-radius: 50%;
            position: relative;
        }
    </style>

<body class="h-entry">
    <div class="head">
        <h1 class="p-name no-ref" id="title">可观察对象</h1>
        <p id="w3c-state"><a href="https://www.w3.org/standards/types/#CG-DRAFT">社区组报告草案</a>,
            <time class="dt-updated" datetime="2025-09-05">2025年9月5日</time>
        </p>
        <div data-fill-with="spec-metadata">
            <dl>
                <dt>此版本：
                <dd><a class="u-url" href="https://wicg.github.io/observable/">https://wicg.github.io/observable/</a>
                <dt class="editor">编辑：
                <dd class="editor p-author h-card vcard"><a class="p-name fn u-url url"
                        href="https://domfarolino.com">Dominic Farolino</a> (<a class="p-org org"
                        href="https://www.google.com/">Google</a>) <a class="u-email email"
                        href="mailto:domfarolino@gmail.com">domfarolino@gmail.com</a>
                <dt>参与：
                <dd><a href="https://github.com/WICG/observable">GitHub WICG/observable</a> (<a
                        href="https://github.com/WICG/observable/issues/new">新建议题</a>, <a
                        href="https://github.com/WICG/observable/issues?state=open">开放议题</a>)
                <dt>提交记录：
                <dd><a href="https://github.com/WICG/observable/commits/master/spec.bs">GitHub spec.bs 提交</a>
                <dt>测试套件：
                <dd class="wpt-overview"><a
                        href="https://wpt.fyi/results/dom/observable/">https://wpt.fyi/results/dom/observable/</a>
            </dl>
        </div>
        <div data-fill-with="warning"></div>
        <p class="copyright" data-fill-with="copyright"><a href="https://www.w3.org/policies/#copyright">Copyright</a> ©
            2025 the Contributors to the Observable Specification, published by the <a
                href="https://www.w3.org/community/wicg/">Web Platform Incubator Community Group</a> under the <a
                href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement
                (CLA)</a>.
            A human-readable <a href="http://www.w3.org/community/about/agreements/cla-deed/">summary</a> is available.
        </p>
        <hr title="Separator for header">
    </div>
    <div class="p-summary" data-fill-with="abstract">
        <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">摘要</span></h2>
        <p>Observable API 提供了一种可组合、易用的方式来处理异步事件流。</p>
    </div>
    <div data-fill-with="at-risk"></div>
    <h2 class="no-num no-toc no-ref heading settled" id="status"><span class="content">本文档状态</span>
    </h2>
    <div data-fill-with="status">
        <p>
            本规范由 <a href="https://www.w3.org/community/wicg/">Web 平台孵化社区组</a> 发布。
            它不是 W3C 标准，也不在 W3C 标准进程中。

            请注意，根据
            <a href="https://www.w3.org/community/about/agreements/cla/">W3C 社区贡献者许可协议 (CLA)</a>
            有有限的选择退出权，且适用其他条件。

            了解更多关于
            <a href="http://www.w3.org/community/">W3C 社区和业务组</a> 的信息。
        </p>
        <p></p>
    </div>
    <div data-fill-with="at-risk"></div>
    <nav data-fill-with="table-of-contents" id="toc">
        <h2 class="no-num no-toc no-ref" id="contents">目录</h2>
        <ol class="toc" role="directory">
            <li><a href="#introduction"><span class="secno">1</span> <span class="content">介绍</span></a>
            <li>
                <a href="#core-infrastructure"><span class="secno">2</span> <span class="content">核心架构</span></a>
                <ol class="toc">
                    <li><a href="#subscriber-api"><span class="secno">2.1</span> <span class="content"><code
                                    class="idl"><span>Subscriber</span></code> 接口</span></a>
                    <li>
                        <a href="#observable-api"><span class="secno">2.2</span> <span class="content"><code
                                    class="idl"><span>Observable</span></code> 接口</span></a>
                        <ol class="toc">
                            <li><a href="#observable-supporting-concepts"><span class="secno">2.2.1</span> <span
                                        class="content">支持性概念</span></a>
                        </ol>
                    <li>
                        <a href="#operators"><span class="secno">2.3</span> <span class="content">操作符</span></a>
                        <ol class="toc">
                            <li><a href="#observable-from"><span class="secno">2.3.1</span> <span class="content"><code
                                            class="idl"><span>from()</span></code></span></a>
                            <li><a href="#observable-returning-operators"><span class="secno">2.3.2</span> <span
                                        class="content"><code class="idl"><span>Observable</span></code>
                                        返回型操作符</span></a>
                            <li><a href="#promise-returning-operators"><span class="secno">2.3.3</span> <span
                                        class="content"><code class="idl"><span>Promise</span></code> 返回型操作符</span></a>
                        </ol>
                </ol>
            <li><a href="#event-target-integration"><span class="secno">3</span> <span class="content"><code
                            class="idl"><span>EventTarget</span></code> 集成</span></a>
            <li><a href="#security-and-privacy"><span class="secno">4</span> <span class="content">安全与隐私注意事项</span></a>
            <li><a href="#acks"><span class="secno">5</span> <span class="content">致谢</span></a>
            <li>
                <a href="#index"><span class="secno"></span> <span class="content">索引</span></a>
                <ol class="toc">
                    <li><a href="#index-defined-here"><span class="secno"></span> <span
                                class="content">本规范定义的术语</span></a>
                    <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span
                                class="content">引用规范中定义的术语</span></a>
                </ol>
            <li>
                <a href="#references"><span class="secno"></span> <span class="content">参考文献</span></a>
                <ol class="toc">
                    <li><a href="#normative"><span class="secno"></span> <span class="content">规范性引用</span></a>
                </ol>
            <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL 索引</span></a>
            <li><a href="#issues-index"><span class="secno"></span> <span class="content">问题索引</span></a>
        </ol>
    </nav>
    <main>
        <script async src="https://resources.whatwg.org/file-issue.js"></script>
        <h2 class="heading settled" data-level="1" id="introduction"><span class="secno">1. </span><span
                class="content">介绍</span><a class="self-link" href="#introduction"></a></h2>
        <p><em>本节为非规范性内容。</em></p>
        <h2 class="heading settled" data-level="2" id="core-infrastructure"><span class="secno">2. </span><span
                class="content">核心架构</span><a class="self-link" href="#core-infrastructure"></a></h2>
        <h3 class="heading settled" data-level="2.1" id="subscriber-api"><span class="secno">2.1. </span><span
                class="content"><code
                    class="idl"><a data-link-type="idl" href="#subscriber" id="ref-for-subscriber">Subscriber</a></code>
                接口</span><a class="self-link" href="#subscriber-api"></a></h3>
        <pre class="idl highlight def">[Exposed=*]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="subscriber"><code><c- g>Subscriber</c-></code></dfn> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-subscriber-next" id="ref-for-dom-subscriber-next"><c- g>next</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any"><c- b>any</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Subscriber/next(value)" data-dfn-type="argument" data-export id="dom-subscriber-next-value-value"><code><c- g>value</c-></code></dfn>);
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined①"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error"><c- g>error</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any①"><c- b>any</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Subscriber/error(error)" data-dfn-type="argument" data-export id="dom-subscriber-error-error-error"><code><c- g>error</c-></code></dfn>);
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined②"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-subscriber-complete" id="ref-for-dom-subscriber-complete"><c- g>complete</c-></a>();
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined③"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-subscriber-addteardown" id="ref-for-dom-subscriber-addteardown"><c- g>addTeardown</c-></a>(<a data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#VoidFunction" id="ref-for-VoidFunction"><c- n>VoidFunction</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Subscriber/addTeardown(teardown)" data-dfn-type="argument" data-export id="dom-subscriber-addteardown-teardown-teardown"><code><c- g>teardown</c-></code></dfn>);

  // 创建后为 true，直到 complete()/error() 被调用，或订阅者取消订阅。在 complete()/error() 内该属性为 true。
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-subscriber-active" id="ref-for-dom-subscriber-active"><c- g>active</c-></a>;

  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#abortsignal" id="ref-for-abortsignal"><c- n>AbortSignal</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="AbortSignal" href="#dom-subscriber-signal" id="ref-for-dom-subscriber-signal"><c- g>signal</c-></a>;
};
</pre>
        <p>每个 <code
                class="idl"><a data-link-type="idl" href="#subscriber" id="ref-for-subscriber①">Subscriber</a></code>
            都有一个 <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set"
                id="ref-for-ordered-set">有序集合</a>的 <dfn class="dfn-paneled" data-dfn-for="Subscriber"
                data-dfn-type="dfn" data-noexport id="subscriber-internal-observers">内部观察者</dfn>，初始为空。</p>
        <p>每个 <code
                class="idl"><a data-link-type="idl" href="#subscriber" id="ref-for-subscriber②">Subscriber</a></code>
            都有一个 <dfn class="dfn-paneled" data-dfn-for="Subscriber" data-dfn-type="dfn" data-noexport
                id="subscriber-teardown-callbacks">清理回调</dfn>，它是一个 <a data-link-type="dfn"
                href="https://infra.spec.whatwg.org/#list" id="ref-for-list">列表</a>，列表元素为
            <code
                class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#VoidFunction" id="ref-for-VoidFunction①">VoidFunction</a></code>，
            初始为空。
        </p>
        <p>每个 <code
                class="idl"><a data-link-type="idl" href="#subscriber" id="ref-for-subscriber③">Subscriber</a></code>
            都有一个 <dfn class="dfn-paneled" data-dfn-for="Subscriber" data-dfn-type="dfn" data-noexport
                id="subscriber-subscription-controller">订阅控制器</dfn>，它是一个
            <code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortcontroller" id="ref-for-abortcontroller">AbortController</a></code>。
        </p>
        <p>每个 <code
                class="idl"><a data-link-type="idl" href="#subscriber" id="ref-for-subscriber④">Subscriber</a></code>
            都有一个 <dfn class="dfn-paneled" data-dfn-for="Subscriber" data-dfn-type="dfn" data-noexport
                id="subscriber-active">active</dfn> 布尔值，初始为 true。</p>
        <p class="note" role="note"><span class="marker">注意：</span>这是一个用于记录的变量，用于确保
            <code class="idl"><a data-link-type="idl" href="#subscriber" id="ref-for-subscriber⑤">Subscriber</a></code>
            在关闭后不再调用其拥有的任意回调。
        </p>
        <p><dfn class="dfn-paneled idl-code" data-dfn-for="Subscriber" data-dfn-type="attribute" data-export
                id="dom-subscriber-active"><code>active</code></dfn> 的 getter 步骤为返回 <a data-link-type="dfn"
                href="https://webidl.spec.whatwg.org/#this" id="ref-for-this">this</a> 的
            <a data-link-type="dfn" href="#subscriber-active" id="ref-for-subscriber-active">active</a> 布尔值。
        </p>
        <p><dfn class="dfn-paneled idl-code" data-dfn-for="Subscriber" data-dfn-type="attribute" data-export
                id="dom-subscriber-signal"><code>signal</code></dfn> 的 getter 步骤为返回 <a data-link-type="dfn"
                href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①">this</a> 的
            <a data-link-type="dfn" href="#subscriber-subscription-controller"
                id="ref-for-subscriber-subscription-controller">订阅控制器</a> 的 <a data-link-type="dfn"
                href="https://dom.spec.whatwg.org/#abortcontroller-signal"
                id="ref-for-abortcontroller-signal">signal</a>。
        </p>
        <div class="algorithm" data-algorithm="next(value)" data-algorithm-for="Subscriber">

            <dfn class="dfn-paneled idl-code" data-dfn-for="Subscriber" data-dfn-type="method" data-export
                id="dom-subscriber-next"><code>next(<var>value</var>)</code></dfn> 方法的步骤如下：

            <ol>
                <li data-md>
                    <p>如果 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this"
                            id="ref-for-this②">this</a> 的 <a data-link-type="dfn" href="#subscriber-active"
                            id="ref-for-subscriber-active①">active</a> 为 false，则返回。</p>
                <li data-md>
                    <p>如果 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this"
                            id="ref-for-this③">this</a> 的 <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global"
                            id="ref-for-concept-relevant-global">相关全局对象</a> 是 <code
                            class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window">Window</a></code>
                        对象，且其 <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window"
                            id="ref-for-concept-document-window">关联的 Document</a> 非 <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active"
                            id="ref-for-fully-active">完全激活</a>，则返回。</p>
                <li data-md>
                    <p>令 <var>internal observers copy</var> 为 <a data-link-type="dfn"
                            href="https://webidl.spec.whatwg.org/#this" id="ref-for-this④">this</a> 的 <a
                            data-link-type="dfn" href="#subscriber-internal-observers"
                            id="ref-for-subscriber-internal-observers">内部观察者</a> 的副本。</p>
                    <p class="note" role="note"><span class="marker">注意：</span>我们对 <a data-link-type="dfn"
                            href="#subscriber-internal-observers" id="ref-for-subscriber-internal-observers①">内部观察者</a>
                        列表进行复制并遍历，
                        这样如果其中某个 <a data-link-type="dfn" href="#internal-observer"
                            id="ref-for-internal-observer">内部观察者</a>的 <a data-link-type="dfn"
                            href="#internal-observer-next-steps" id="ref-for-internal-observer-next-steps">next
                            步骤</a>导致新的订阅，
                        则观察者列表在遍历过程中不会被改变。</p>
                <li data-md>
                    <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate"
                            id="ref-for-list-iterate">对每个</a> <var>observer</var> 属于 <var>internal observers copy</var>：
                    </p>
                    <ol>
                        <li data-md>
                            <p>以 <var>value</var> 运行 <var>observer</var> 的 <a data-link-type="dfn"
                                    href="#internal-observer-next-steps" id="ref-for-internal-observer-next-steps①">next
                                    步骤</a>。</p>
                            <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert"
                                    id="ref-for-assert">断言</a>：没有 <a data-link-type="dfn"
                                    href="https://webidl.spec.whatwg.org/#an-exception-was-thrown"
                                    id="ref-for-an-exception-was-thrown">异常抛出</a>。</p>
                            <div class="note" role="note">
                                <p>注意：这里不会抛出异常，因为当
                                    <a data-link-type="dfn" href="#subscriber-internal-observers"
                                        id="ref-for-subscriber-internal-observers②">内部观察者</a>的 <a data-link-type="dfn"
                                        href="#internal-observer-next-steps"
                                        id="ref-for-internal-observer-next-steps②">next 步骤</a>是包装脚本提供的回调时，
                                    <a href="#process-observer">处理观察者</a> 步骤会在调用这些回调时使用逻辑包装，捕获所有异常并报告给全局。
                                </p>
                                <p>当 <a data-link-type="dfn" href="#internal-observer-next-steps"
                                        id="ref-for-internal-observer-next-steps③">next 步骤</a>是规范算法时，
                                    这些步骤会确保不会向外抛出异常，以满足此断言。</p>
                            </div>
                    </ol>
            </ol>
        </div>
        <div class="algorithm" data-algorithm="error(error)" data-algorithm-for="Subscriber">

            <dfn class="dfn-paneled idl-code" data-dfn-for="Subscriber" data-dfn-type="method" data-export
                id="dom-subscriber-error"><code>error(<var>error</var>)</code></dfn> 方法的步骤如下：

            <ol>
                <li data-md>
                    <p>如果 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this"
                            id="ref-for-this⑤">this</a> 的 <a data-link-type="dfn" href="#subscriber-active"
                            id="ref-for-subscriber-active②">active</a> 为 false，<a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#report-an-exception"
                            id="ref-for-report-an-exception">报告异常</a>，携带 <var>error</var> 及
                        <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑥">this</a>
                        的 <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global"
                            id="ref-for-concept-relevant-global①">相关全局对象</a>，然后返回。
                    </p>
                <li data-md>
                    <p>如果 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this"
                            id="ref-for-this⑦">this</a> 的 <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global"
                            id="ref-for-concept-relevant-global②">相关全局对象</a> 是 <code
                            class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window①">Window</a></code>
                        对象，且其 <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window"
                            id="ref-for-concept-document-window①">关联的 Document</a> 非 <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active"
                            id="ref-for-fully-active①">完全激活</a>，则返回。</p>
                <li data-md>
                    <p><a data-link-type="dfn" href="#close-a-subscription" id="ref-for-close-a-subscription①">关闭</a>
                        <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑧">this</a>。
                    </p>
                <li data-md>
                    <p>令 <var>internal observers copy</var> 为 <a data-link-type="dfn"
                            href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑨">this</a> 的 <a
                            data-link-type="dfn" href="#subscriber-internal-observers"
                            id="ref-for-subscriber-internal-observers③">内部观察者</a> 的副本。</p>
                <li data-md>
                    <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate"
                            id="ref-for-list-iterate①">对每个</a> <var>observer</var> 属于 <var>internal observers
                            copy</var>：</p>
                    <ol>
                        <li data-md>
                            <p>以 <var>error</var> 运行 <var>observer</var> 的 <a data-link-type="dfn"
                                    href="#internal-observer-error-steps"
                                    id="ref-for-internal-observer-error-steps">error 步骤</a>。</p>
                            <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert"
                                    id="ref-for-assert①">断言</a>：没有 <a data-link-type="dfn"
                                    href="https://webidl.spec.whatwg.org/#an-exception-was-thrown"
                                    id="ref-for-an-exception-was-thrown①">异常抛出</a>。</p>
                            <p class="note" role="note"><span class="marker">注意：</span>详细原因可见 <code
                                    class="idl"><a data-link-type="idl" href="#dom-subscriber-next" id="ref-for-dom-subscriber-next①">next()</a></code>
                                文档。</p>
                    </ol>
            </ol>
        </div>
        <div class="algorithm" data-algorithm="complete()" data-algorithm-for="Subscriber">

            <dfn class="dfn-paneled idl-code" data-dfn-for="Subscriber" data-dfn-type="method" data-export
                id="dom-subscriber-complete"><code>complete()</code></dfn> 方法的步骤如下：

            <ol>
                <li data-md>
                    <p>如果 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this"
                            id="ref-for-this①⓪">this</a> 的 <a data-link-type="dfn" href="#subscriber-active"
                            id="ref-for-subscriber-active③">active</a> 为 false，则返回。</p>
                <li data-md>
                    <p>如果 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this"
                            id="ref-for-this①①">this</a> 的 <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global"
                            id="ref-for-concept-relevant-global③">相关全局对象</a> 是 <code
                            class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window②">Window</a></code>
                        对象，且其 <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window"
                            id="ref-for-concept-document-window②">关联的 Document</a> 非 <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active"
                            id="ref-for-fully-active②">完全激活</a>，则返回。</p>
                <li data-md>
                    <p><a data-link-type="dfn" href="#close-a-subscription" id="ref-for-close-a-subscription②">关闭</a>
                        <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this"
                            id="ref-for-this①②">this</a>。
                    </p>
                <li data-md>
                    <p>令 <var>internal observers copy</var> 为 <a data-link-type="dfn"
                            href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①③">this</a> 的 <a
                            data-link-type="dfn" href="#subscriber-internal-observers"
                            id="ref-for-subscriber-internal-observers④">内部观察者</a> 的副本。</p>
                <li data-md>
                    <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate"
                            id="ref-for-list-iterate②">对每个</a> <var>observer</var> 属于 <var>internal observers
                            copy</var>：</p>
                    <ol>
                        <li data-md>
                            <p>运行 <var>observer</var> 的 <a data-link-type="dfn" href="#internal-observer-complete-steps"
                                    id="ref-for-internal-observer-complete-steps">complete 步骤</a>。</p>
                            <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert"
                                    id="ref-for-assert②">断言</a>：没有 <a data-link-type="dfn"
                                    href="https://webidl.spec.whatwg.org/#an-exception-was-thrown"
                                    id="ref-for-an-exception-was-thrown②">异常抛出</a>。</p>
                            <p class="note" role="note"><span class="marker">注意：</span>详细原因可见 <code
                                    class="idl"><a data-link-type="idl" href="#dom-subscriber-next" id="ref-for-dom-subscriber-next②">next()</a></code>
                                文档。</p>
                    </ol>
            </ol>
        </div>
        <div class="algorithm" data-algorithm="addTeardown(teardown)" data-algorithm-for="Subscriber">

            <dfn class="dfn-paneled idl-code" data-dfn-for="Subscriber" data-dfn-type="method" data-export
                id="dom-subscriber-addteardown"><code>addTeardown(<var>teardown</var>)</code></dfn> 方法的步骤如下：

            <ol>
                <li data-md>
                    <p>如果 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this"
                            id="ref-for-this①④">this</a> 的 <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global"
                            id="ref-for-concept-relevant-global④">相关全局对象</a> 是 <code
                            class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window③">Window</a></code>
                        对象，且其 <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window"
                            id="ref-for-concept-document-window③">关联的 Document</a> 非 <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active"
                            id="ref-for-fully-active③">完全激活</a>，则返回。</p>
                <li data-md>
                    <p>如果 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this"
                            id="ref-for-this①⑤">this</a> 的 <a data-link-type="dfn" href="#subscriber-active"
                            id="ref-for-subscriber-active④">active</a> 为 true，则 <a data-link-type="dfn"
                            href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append">追加</a>
                        <var>teardown</var> 到 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this"
                            id="ref-for-this①⑥">this</a> 的
                        <a data-link-type="dfn" href="#subscriber-teardown-callbacks"
                            id="ref-for-subscriber-teardown-callbacks">清理回调</a> 列表。
                    </p>
                <li data-md>
                    <p>否则，<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#invoke-a-callback-function"
                            id="ref-for-invoke-a-callback-function">调用</a> <var>teardown</var>，参数为 «» 和
                        "<code>report</code>"。</p>
            </ol>
        </div>
        <div class="algorithm" data-algorithm="close a subscription">

            要 <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="close-a-subscription">关闭订阅</dfn>，给定 <code
                class="idl"><a data-link-type="idl" href="#subscriber" id="ref-for-subscriber⑥">Subscriber</a></code>
            <var>subscriber</var>，以及可选的 <code
                class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any②">any</a></code>
            <var>reason</var>，执行以下步骤：

            <ol>
                <li data-md>
                    <p>如果 <var>subscriber</var> 的 <a data-link-type="dfn" href="#subscriber-active"
                            id="ref-for-subscriber-active⑤">active</a> 为 false，则返回。</p>
                    <div class="note" role="note">
                        <p>此操作用于防止可重入调用，可能出现在“生产者主动取消订阅”场景。如下例：</p>
                        <div class="example" id="re-entrant-close">
                            <a class="self-link" href="#re-entrant-close"></a>

                            <pre class="highlight"><c- a>const</c-> outerController <c- o>=</c-> <c- ow>new</c-> AbortController<c- p>();</c->
<c- a>const</c-> observable <c- o>=</c-> <c- ow>new</c-> Observable<c- p>(</c->subscriber <c- p>=></c-> <c- p>{</c->
  subscriber<c- p>.</c->addTeardown<c- p>(()</c-> <c- p>=></c-> <c- p>{</c->
    <c- c1>// 2.) 此清理操作在“关闭”算法执行期间运行。中止下游 signal 会运行其 abort 算法。其中之一就是当前正在运行的“关闭”算法。</c->
    outerController<c- p>.</c->abort<c- p>();</c->
  <c- p>});</c->

  <c- c1>// 1.) 这会立即调用“关闭”算法，将 subscriber.active 设为 false。</c->
  subscriber<c- p>.</c->complete<c- p>();</c->
<c- p>});</c->

observable<c- p>.</c->subscribe<c- p>({},</c-> <c- p>{</c->signal<c- o>:</c-> outerController<c- p>.</c->signal<c- p>});</c->
</pre>
                        </div>
                    </div>
                <li data-md>
                    <p>将 <var>subscriber</var> 的 <a data-link-type="dfn" href="#subscriber-active"
                            id="ref-for-subscriber-active⑥">active</a> 设为 false。</p>
                <li data-md>
                    <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org#abortsignal-signal-abort"
                            id="ref-for-abortsignal-signal-abort">中止信号</a> <var>subscriber</var> 的 <a
                            data-link-type="dfn" href="#subscriber-subscription-controller"
                            id="ref-for-subscriber-subscription-controller①">订阅控制器</a>，如有 <var>reason</var> 则携带。</p>
                <li data-md>
                    <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate"
                            id="ref-for-list-iterate③">对每个</a> <var>teardown</var> 属于 <var>subscriber</var> 的 <a
                            data-link-type="dfn" href="#subscriber-teardown-callbacks"
                            id="ref-for-subscriber-teardown-callbacks①">清理回调</a>，按逆序插入遍历：</p>
                    <ol>
                        <li data-md>
                            <p>如果 <var>subscriber</var> 的 <a data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global"
                                    id="ref-for-concept-relevant-global⑤">相关全局对象</a> 是 <code
                                    class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window④">Window</a></code>
                                对象，且其 <a data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window"
                                    id="ref-for-concept-document-window④">关联的 Document</a> 非 <a data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active"
                                    id="ref-for-fully-active④">完全激活</a>，则中止这些步骤。</p>
                            <p class="note" role="note"><span class="marker">注意：</span>此步骤会反复运行，因为每个 <var>teardown</var>
                                都可能导致上述 <code
                                    class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document">Document</a></code>
                                变为非激活状态。
                            </p>
                        <li data-md>
                            <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#invoke-a-callback-function"
                                    id="ref-for-invoke-a-callback-function①">调用</a> <var>teardown</var>，参数为 «» 和
                                "<code>report</code>"。</p>
                    </ol>
            </ol>
        </div>
        <h3 class="heading settled" data-level="2.2" id="observable-api"><span class="secno">2.2. </span><span
                class="content"><code
                    class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable">Observable</a></code>
                接口</span><a class="self-link" href="#observable-api"></a></h3>
        <pre class="idl highlight def">// SubscribeCallback 是 Observable "创建者" 的代码所在。它在调用 subscribe() 时执行，用于建立新订阅。
<c- b>callback</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="callback" data-export id="callbackdef-subscribecallback"><code><c- g>SubscribeCallback</c-></code></dfn> = <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined④"><c- b>undefined</c-></a> (<a data-link-type="idl-name" href="#subscriber" id="ref-for-subscriber⑦"><c- n>Subscriber</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SubscribeCallback" data-dfn-type="argument" data-export id="dom-subscribecallback-subscriber"><code><c- g>subscriber</c-></code></dfn>);
<c- b>callback</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="callback" data-export id="callbackdef-observablesubscriptioncallback"><code><c- g>ObservableSubscriptionCallback</c-></code></dfn> = <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined⑤"><c- b>undefined</c-></a> (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any③"><c- b>any</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ObservableSubscriptionCallback" data-dfn-type="argument" data-export id="dom-observablesubscriptioncallback-value"><code><c- g>value</c-></code></dfn>);

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-subscriptionobserver"><code><c- g>SubscriptionObserver</c-></code></dfn> {
  <a data-link-type="idl-name" href="#callbackdef-observablesubscriptioncallback" id="ref-for-callbackdef-observablesubscriptioncallback"><c- n>ObservableSubscriptionCallback</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SubscriptionObserver" data-dfn-type="dict-member" data-export data-type="ObservableSubscriptionCallback" id="dom-subscriptionobserver-next"><code><c- g>next</c-></code></dfn>;
  <a data-link-type="idl-name" href="#callbackdef-observablesubscriptioncallback" id="ref-for-callbackdef-observablesubscriptioncallback①"><c- n>ObservableSubscriptionCallback</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SubscriptionObserver" data-dfn-type="dict-member" data-export data-type="ObservableSubscriptionCallback" id="dom-subscriptionobserver-error"><code><c- g>error</c-></code></dfn>;
  <a data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#VoidFunction" id="ref-for-VoidFunction②"><c- n>VoidFunction</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SubscriptionObserver" data-dfn-type="dict-member" data-export data-type="VoidFunction" id="dom-subscriptionobserver-complete"><code><c- g>complete</c-></code></dfn>;
};

<c- b>callback</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="callback" data-export id="callbackdef-observableinspectoraborthandler"><code><c- g>ObservableInspectorAbortHandler</c-></code></dfn> = <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined⑥"><c- b>undefined</c-></a> (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any④"><c- b>any</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ObservableInspectorAbortHandler" data-dfn-type="argument" data-export id="dom-observableinspectoraborthandler-value"><code><c- g>value</c-></code></dfn>);

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-observableinspector"><code><c- g>ObservableInspector</c-></code></dfn> {
  <a data-link-type="idl-name" href="#callbackdef-observablesubscriptioncallback" id="ref-for-callbackdef-observablesubscriptioncallback②"><c- n>ObservableSubscriptionCallback</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ObservableInspector" data-dfn-type="dict-member" data-export data-type="ObservableSubscriptionCallback" id="dom-observableinspector-next"><code><c- g>next</c-></code></dfn>;
  <a data-link-type="idl-name" href="#callbackdef-observablesubscriptioncallback" id="ref-for-callbackdef-observablesubscriptioncallback③"><c- n>ObservableSubscriptionCallback</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ObservableInspector" data-dfn-type="dict-member" data-export data-type="ObservableSubscriptionCallback" id="dom-observableinspector-error"><code><c- g>error</c-></code></dfn>;
  <a data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#VoidFunction" id="ref-for-VoidFunction③"><c- n>VoidFunction</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ObservableInspector" data-dfn-type="dict-member" data-export data-type="VoidFunction" id="dom-observableinspector-complete"><code><c- g>complete</c-></code></dfn>;

  <a data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#VoidFunction" id="ref-for-VoidFunction④"><c- n>VoidFunction</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ObservableInspector" data-dfn-type="dict-member" data-export data-type="VoidFunction" id="dom-observableinspector-subscribe"><code><c- g>subscribe</c-></code></dfn>;
  <a data-link-type="idl-name" href="#callbackdef-observableinspectoraborthandler" id="ref-for-callbackdef-observableinspectoraborthandler"><c- n>ObservableInspectorAbortHandler</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ObservableInspector" data-dfn-type="dict-member" data-export data-type="ObservableInspectorAbortHandler" id="dom-observableinspector-abort"><code><c- g>abort</c-></code></dfn>;
};

<c- b>typedef</c-> (<a data-link-type="idl-name" href="#callbackdef-observablesubscriptioncallback" id="ref-for-callbackdef-observablesubscriptioncallback④"><c- n>ObservableSubscriptionCallback</c-></a> <c- b>or</c-> <a data-link-type="idl-name" href="#dictdef-subscriptionobserver" id="ref-for-dictdef-subscriptionobserver"><c- n>SubscriptionObserver</c-></a>) <dfn class="dfn-paneled idl-code" data-dfn-type="typedef" data-export id="typedefdef-observerunion"><code><c- g>ObserverUnion</c-></code></dfn>;
<c- b>typedef</c-> (<a data-link-type="idl-name" href="#callbackdef-observablesubscriptioncallback" id="ref-for-callbackdef-observablesubscriptioncallback⑤"><c- n>ObservableSubscriptionCallback</c-></a> <c- b>or</c-> <a data-link-type="idl-name" href="#dictdef-observableinspector" id="ref-for-dictdef-observableinspector"><c- n>ObservableInspector</c-></a>) <dfn class="dfn-paneled idl-code" data-dfn-type="typedef" data-export id="typedefdef-observableinspectorunion"><code><c- g>ObservableInspectorUnion</c-></code></dfn>;

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-subscribeoptions"><code><c- g>SubscribeOptions</c-></code></dfn> {
  <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#abortsignal" id="ref-for-abortsignal①"><c- n>AbortSignal</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SubscribeOptions" data-dfn-type="dict-member" data-export data-type="AbortSignal" id="dom-subscribeoptions-signal"><code><c- g>signal</c-></code></dfn>;
};

<c- b>callback</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="callback" data-export id="callbackdef-predicate"><code><c- g>Predicate</c-></code></dfn> = <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean①"><c- b>boolean</c-></a> (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any⑤"><c- b>any</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Predicate" data-dfn-type="argument" data-export id="dom-predicate-value"><code><c- g>value</c-></code></dfn>, <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long" id="ref-for-idl-unsigned-long-long"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Predicate" data-dfn-type="argument" data-export id="dom-predicate-index"><code><c- g>index</c-></code></dfn>);
<c- b>callback</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="callback" data-export id="callbackdef-reducer"><code><c- g>Reducer</c-></code></dfn> = <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any⑥"><c- b>any</c-></a> (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any⑦"><c- b>any</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Reducer" data-dfn-type="argument" data-export id="dom-reducer-accumulator"><code><c- g>accumulator</c-></code></dfn>, <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any⑧"><c- b>any</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Reducer" data-dfn-type="argument" data-export id="dom-reducer-currentvalue"><code><c- g>currentValue</c-></code></dfn>, <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long" id="ref-for-idl-unsigned-long-long①"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Reducer" data-dfn-type="argument" data-export id="dom-reducer-index"><code><c- g>index</c-></code></dfn>);
<c- b>callback</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="callback" data-export id="callbackdef-mapper"><code><c- g>Mapper</c-></code></dfn> = <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any⑨"><c- b>any</c-></a> (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any①⓪"><c- b>any</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Mapper" data-dfn-type="argument" data-export id="dom-mapper-value"><code><c- g>value</c-></code></dfn>, <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long" id="ref-for-idl-unsigned-long-long②"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Mapper" data-dfn-type="argument" data-export id="dom-mapper-index"><code><c- g>index</c-></code></dfn>);
// 与 Mapper 的区别仅在于返回类型，此回调仅用于访问序列中的每个元素，不进行变换。
<c- b>callback</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="callback" data-export id="callbackdef-visitor"><code><c- g>Visitor</c-></code></dfn> = <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined⑦"><c- b>undefined</c-></a> (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any①①"><c- b>any</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Visitor" data-dfn-type="argument" data-export id="dom-visitor-value"><code><c- g>value</c-></code></dfn>, <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long" id="ref-for-idl-unsigned-long-long③"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Visitor" data-dfn-type="argument" data-export id="dom-visitor-index"><code><c- g>index</c-></code></dfn>);

// 此回调返回一个 `any`，必须通过 `Observable` 的转换语义转为 `Observable`。
<c- b>callback</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="callback" data-export id="callbackdef-catchcallback"><code><c- g>CatchCallback</c-></code></dfn> = <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any①②"><c- b>any</c-></a> (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any①③"><c- b>any</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="CatchCallback" data-dfn-type="argument" data-export id="dom-catchcallback-value"><code><c- g>value</c-></code></dfn>);

[Exposed=*]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="observable"><code><c- g>Observable</c-></code></dfn> {
  <a class="idl-code" data-link-type="constructor" href="#dom-observable-observable" id="ref-for-dom-observable-observable"><c- g>constructor</c-></a>(<a data-link-type="idl-name" href="#callbackdef-subscribecallback" id="ref-for-callbackdef-subscribecallback"><c- n>SubscribeCallback</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Observable/Observable(callback), Observable/constructor(callback)" data-dfn-type="argument" data-export id="dom-observable-observable-callback-callback"><code><c- g>callback</c-></code></dfn>);
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined⑧"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-observable-subscribe" id="ref-for-dom-observable-subscribe"><c- g>subscribe</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#typedefdef-observerunion" id="ref-for-typedefdef-observerunion"><c- n>ObserverUnion</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Observable/subscribe(observer, options), Observable/subscribe(observer), Observable/subscribe()" data-dfn-type="argument" data-export id="dom-observable-subscribe-observer-options-observer"><code><c- g>observer</c-></code></dfn> = {}, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions"><c- n>SubscribeOptions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Observable/subscribe(observer, options), Observable/subscribe(observer), Observable/subscribe()" data-dfn-type="argument" data-export id="dom-observable-subscribe-observer-options-options"><code><c- g>options</c-></code></dfn> = {});

  // 如果 value 是以下任意类型，则构造一个原生 Observable：
  //   - Observable
  //   - AsyncIterable
  //   - Iterable
  //   - Promise
  <c- b>static</c-> <a data-link-type="idl-name" href="#observable" id="ref-for-observable①"><c- n>Observable</c-></a> <a class="idl-code" data-link-type="method" href="#dom-observable-from" id="ref-for-dom-observable-from"><c- g>from</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any①④"><c- b>any</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Observable/from(value)" data-dfn-type="argument" data-export id="dom-observable-from-value-value"><code><c- g>value</c-></code></dfn>);

  // 返回 Observable 的操作符。详见规范的 Operators 部分。
  //
  // takeUntil() 可消费 promise、iterable、async iterable 以及其他 observable。
  <a data-link-type="idl-name" href="#observable" id="ref-for-observable②"><c- n>Observable</c-></a> <a class="idl-code" data-link-type="method" href="#dom-observable-takeuntil" id="ref-for-dom-observable-takeuntil"><c- g>takeUntil</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any①⑤"><c- b>any</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Observable/takeUntil(value)" data-dfn-type="argument" data-export id="dom-observable-takeuntil-value-value"><code><c- g>value</c-></code></dfn>);
  <a data-link-type="idl-name" href="#observable" id="ref-for-observable③"><c- n>Observable</c-></a> <a class="idl-code" data-link-type="method" href="#dom-observable-map" id="ref-for-dom-observable-map"><c- g>map</c-></a>(<a data-link-type="idl-name" href="#callbackdef-mapper" id="ref-for-callbackdef-mapper"><c- n>Mapper</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Observable/map(mapper)" data-dfn-type="argument" data-export id="dom-observable-map-mapper-mapper"><code><c- g>mapper</c-></code></dfn>);
  <a data-link-type="idl-name" href="#observable" id="ref-for-observable④"><c- n>Observable</c-></a> <a class="idl-code" data-link-type="method" href="#dom-observable-filter" id="ref-for-dom-observable-filter"><c- g>filter</c-></a>(<a data-link-type="idl-name" href="#callbackdef-predicate" id="ref-for-callbackdef-predicate"><c- n>Predicate</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Observable/filter(predicate)" data-dfn-type="argument" data-export id="dom-observable-filter-predicate-predicate"><code><c- g>predicate</c-></code></dfn>);
  <a data-link-type="idl-name" href="#observable" id="ref-for-observable⑤"><c- n>Observable</c-></a> <a class="idl-code" data-link-type="method" href="#dom-observable-take" id="ref-for-dom-observable-take"><c- g>take</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long" id="ref-for-idl-unsigned-long-long④"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Observable/take(amount)" data-dfn-type="argument" data-export id="dom-observable-take-amount-amount"><code><c- g>amount</c-></code></dfn>);
  <a data-link-type="idl-name" href="#observable" id="ref-for-observable⑥"><c- n>Observable</c-></a> <a class="idl-code" data-link-type="method" href="#dom-observable-drop" id="ref-for-dom-observable-drop"><c- g>drop</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long" id="ref-for-idl-unsigned-long-long⑤"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Observable/drop(amount)" data-dfn-type="argument" data-export id="dom-observable-drop-amount-amount"><code><c- g>amount</c-></code></dfn>);
  <a data-link-type="idl-name" href="#observable" id="ref-for-observable⑦"><c- n>Observable</c-></a> <a class="idl-code" data-link-type="method" href="#dom-observable-flatmap" id="ref-for-dom-observable-flatmap"><c- g>flatMap</c-></a>(<a data-link-type="idl-name" href="#callbackdef-mapper" id="ref-for-callbackdef-mapper①"><c- n>Mapper</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Observable/flatMap(mapper)" data-dfn-type="argument" data-export id="dom-observable-flatmap-mapper-mapper"><code><c- g>mapper</c-></code></dfn>);
  <a data-link-type="idl-name" href="#observable" id="ref-for-observable⑧"><c- n>Observable</c-></a> <a class="idl-code" data-link-type="method" href="#dom-observable-switchmap" id="ref-for-dom-observable-switchmap"><c- g>switchMap</c-></a>(<a data-link-type="idl-name" href="#callbackdef-mapper" id="ref-for-callbackdef-mapper②"><c- n>Mapper</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Observable/switchMap(mapper)" data-dfn-type="argument" data-export id="dom-observable-switchmap-mapper-mapper"><code><c- g>mapper</c-></code></dfn>);
  <a data-link-type="idl-name" href="#observable" id="ref-for-observable⑨"><c- n>Observable</c-></a> <a class="idl-code" data-link-type="method" href="#dom-observable-inspect" id="ref-for-dom-observable-inspect"><c- g>inspect</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#typedefdef-observableinspectorunion" id="ref-for-typedefdef-observableinspectorunion"><c- n>ObservableInspectorUnion</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Observable/inspect(inspectorUnion), Observable/inspect()" data-dfn-type="argument" data-export id="dom-observable-inspect-inspectorunion-inspectorunion"><code><c- g>inspectorUnion</c-></code></dfn> = {});
  <a data-link-type="idl-name" href="#observable" id="ref-for-observable①⓪"><c- n>Observable</c-></a> <a class="idl-code" data-link-type="method" href="#dom-observable-catch" id="ref-for-dom-observable-catch"><c- g>catch</c-></a>(<a data-link-type="idl-name" href="#callbackdef-catchcallback" id="ref-for-callbackdef-catchcallback"><c- n>CatchCallback</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Observable/catch(callback)" data-dfn-type="argument" data-export id="dom-observable-catch-callback-callback"><code><c- g>callback</c-></code></dfn>);
  <a data-link-type="idl-name" href="#observable" id="ref-for-observable①①"><c- n>Observable</c-></a> <a class="idl-code" data-link-type="method" href="#dom-observable-finally" id="ref-for-dom-observable-finally"><c- g>finally</c-></a>(<a data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#VoidFunction" id="ref-for-VoidFunction⑤"><c- n>VoidFunction</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Observable/finally(callback)" data-dfn-type="argument" data-export id="dom-observable-finally-callback-callback"><code><c- g>callback</c-></code></dfn>);

  // 返回 Promise 的操作符。
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any①⑥"><c- b>any</c-></a>>> <a class="idl-code" data-link-type="method" href="#dom-observable-toarray" id="ref-for-dom-observable-toarray"><c- g>toArray</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions①"><c- n>SubscribeOptions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Observable/toArray(options), Observable/toArray()" data-dfn-type="argument" data-export id="dom-observable-toarray-options-options"><code><c- g>options</c-></code></dfn> = {});
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise①"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined⑨"><c- b>undefined</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-observable-foreach" id="ref-for-dom-observable-foreach"><c- g>forEach</c-></a>(<a data-link-type="idl-name" href="#callbackdef-visitor" id="ref-for-callbackdef-visitor"><c- n>Visitor</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Observable/forEach(callback, options), Observable/forEach(callback)" data-dfn-type="argument" data-export id="dom-observable-foreach-callback-options-callback"><code><c- g>callback</c-></code></dfn>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions②"><c- n>SubscribeOptions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Observable/forEach(callback, options), Observable/forEach(callback)" data-dfn-type="argument" data-export id="dom-observable-foreach-callback-options-options"><code><c- g>options</c-></code></dfn> = {});
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise②"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean②"><c- b>boolean</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-observable-every" id="ref-for-dom-observable-every"><c- g>every</c-></a>(<a data-link-type="idl-name" href="#callbackdef-predicate" id="ref-for-callbackdef-predicate①"><c- n>Predicate</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Observable/every(predicate, options), Observable/every(predicate)" data-dfn-type="argument" data-export id="dom-observable-every-predicate-options-predicate"><code><c- g>predicate</c-></code></dfn>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions③"><c- n>SubscribeOptions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Observable/every(predicate, options), Observable/every(predicate)" data-dfn-type="argument" data-export id="dom-observable-every-predicate-options-options"><code><c- g>options</c-></code></dfn> = {});
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise③"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any①⑦"><c- b>any</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-observable-first" id="ref-for-dom-observable-first"><c- g>first</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions④"><c- n>SubscribeOptions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Observable/first(options), Observable/first()" data-dfn-type="argument" data-export id="dom-observable-first-options-options"><code><c- g>options</c-></code></dfn> = {});
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise④"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any①⑧"><c- b>any</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-observable-last" id="ref-for-dom-observable-last"><c- g>last</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions⑤"><c- n>SubscribeOptions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Observable/last(options), Observable/last()" data-dfn-type="argument" data-export id="dom-observable-last-options-options"><code><c- g>options</c-></code></dfn> = {});
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise⑤"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any①⑨"><c- b>any</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-observable-find" id="ref-for-dom-observable-find"><c- g>find</c-></a>(<a data-link-type="idl-name" href="#callbackdef-predicate" id="ref-for-callbackdef-predicate②"><c- n>Predicate</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Observable/find(predicate, options), Observable/find(predicate)" data-dfn-type="argument" data-export id="dom-observable-find-predicate-options-predicate"><code><c- g>predicate</c-></code></dfn>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions⑥"><c- n>SubscribeOptions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Observable/find(predicate, options), Observable/find(predicate)" data-dfn-type="argument" data-export id="dom-observable-find-predicate-options-options"><code><c- g>options</c-></code></dfn> = {});
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise⑥"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean③"><c- b>boolean</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-observable-some" id="ref-for-dom-observable-some"><c- g>some</c-></a>(<a data-link-type="idl-name" href="#callbackdef-predicate" id="ref-for-callbackdef-predicate③"><c- n>Predicate</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Observable/some(predicate, options), Observable/some(predicate)" data-dfn-type="argument" data-export id="dom-observable-some-predicate-options-predicate"><code><c- g>predicate</c-></code></dfn>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions⑦"><c- n>SubscribeOptions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Observable/some(predicate, options), Observable/some(predicate)" data-dfn-type="argument" data-export id="dom-observable-some-predicate-options-options"><code><c- g>options</c-></code></dfn> = {});
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise⑦"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any②⓪"><c- b>any</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-observable-reduce" id="ref-for-dom-observable-reduce"><c- g>reduce</c-></a>(<a data-link-type="idl-name" href="#callbackdef-reducer" id="ref-for-callbackdef-reducer"><c- n>Reducer</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Observable/reduce(reducer, initialValue, options), Observable/reduce(reducer, initialValue), Observable/reduce(reducer)" data-dfn-type="argument" data-export id="dom-observable-reduce-reducer-initialvalue-options-reducer"><code><c- g>reducer</c-></code></dfn>, <c- b>optional</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any②①"><c- b>any</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Observable/reduce(reducer, initialValue, options), Observable/reduce(reducer, initialValue), Observable/reduce(reducer)" data-dfn-type="argument" data-export id="dom-observable-reduce-reducer-initialvalue-options-initialvalue"><code><c- g>initialValue</c-></code></dfn>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions⑧"><c- n>SubscribeOptions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Observable/reduce(reducer, initialValue, options), Observable/reduce(reducer, initialValue), Observable/reduce(reducer)" data-dfn-type="argument" data-export id="dom-observable-reduce-reducer-initialvalue-options-options"><code><c- g>options</c-></code></dfn> = {});
};
</pre>
        <p>每个 <code
                class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable①②">Observable</a></code>
            都有一个 <dfn class="dfn-paneled" data-dfn-for="Observable" data-dfn-type="dfn" data-noexport
                id="observable-subscribe-callback">subscribe callback</dfn>，它是一个
            <code
                class="idl"><a data-link-type="idl" href="#callbackdef-subscribecallback" id="ref-for-callbackdef-subscribecallback①">SubscribeCallback</a></code>
            或一组接收 <code
                class="idl"><a data-link-type="idl" href="#subscriber" id="ref-for-subscriber⑧">Subscriber</a></code>
            的步骤。
        </p>
        <p>每个 <code
                class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable①③">Observable</a></code>
            都有一个 <dfn class="dfn-paneled" data-dfn-for="Observable" data-dfn-type="dfn" data-noexport
                id="observable-weak-subscriber">weak subscriber</dfn>，它是指向
            <code class="idl"><a data-link-type="idl" href="#subscriber" id="ref-for-subscriber⑨">Subscriber</a></code>
            的弱引用或 null，初始为 null。
        </p>
        <p class="note" role="note"><span class="marker">注意：</span>这些类型的“联合”用于支持两种
            <code class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable①④">Observable</a></code>
            的构造方式：由 JavaScript 创建的
            （总是用 <code
                class="idl"><a data-link-type="idl" href="#callbackdef-subscribecallback" id="ref-for-callbackdef-subscribecallback②">SubscribeCallback</a></code>
            构造），
            以及原生构造的 <code
                class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable①⑤">Observable</a></code>
            对象（其 <a data-link-type="dfn" href="#observable-subscribe-callback"
                id="ref-for-observable-subscribe-callback">subscribe callback</a> 可以是任意原生步骤而不是 JS 回调）。
            <code
                class="idl"><a data-link-type="idl" href="#dom-eventtarget-when" id="ref-for-dom-eventtarget-when">when()</a></code>
            的返回值就是后者的一个例子。
        </p>
        <div class="algorithm" data-algorithm="Observable(callback)" data-algorithm-for="Observable">

            <dfn class="dfn-paneled idl-code" data-dfn-for="Observable" data-dfn-type="constructor" data-export
                data-lt="Observable(callback)|constructor(callback)" id="dom-observable-observable"><code>new
  Observable(<var>callback</var>)</code></dfn> 构造函数步骤如下：

            <ol>
                <li data-md>
                    <p>将 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this"
                            id="ref-for-this①⑦">this</a> 的 <a data-link-type="dfn" href="#observable-subscribe-callback"
                            id="ref-for-observable-subscribe-callback①">subscribe callback</a> 设为 <var>callback</var>。
                    </p>
                    <p class="note" role="note"><span class="marker">注意：</span>此回调将在后续调用 <code
                            class="idl"><a data-link-type="idl" href="#dom-observable-subscribe" id="ref-for-dom-observable-subscribe①">subscribe()</a></code>
                        时被调用。</p>
            </ol>
        </div>
        <div class="algorithm" data-algorithm="subscribe(observer, options)" data-algorithm-for="Observable">

            <dfn class="dfn-paneled idl-code" data-dfn-for="Observable" data-dfn-type="method" data-export
                data-lt="subscribe(observer, options)|subscribe(observer)|subscribe()"
                id="dom-observable-subscribe"><code>subscribe(<var>observer</var>, <var>options</var>)</code></dfn>
            方法步骤如下：

            <ol>
                <li data-md>
                    <p><a data-link-type="dfn" href="#observable-subscribe-to-an-observable"
                            id="ref-for-observable-subscribe-to-an-observable">订阅</a> <a data-link-type="dfn"
                            href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⑧">this</a>，给定
                        <var>observer</var>
                        和 <var>options</var>。
                    </p>
            </ol>
        </div>
        <h4 class="heading settled" data-level="2.2.1" id="observable-supporting-concepts"><span class="secno">2.2.1.
            </span><span class="content">支持性概念</span><a class="self-link" href="#observable-supporting-concepts"></a>
        </h4>
        <div class="algorithm" data-algorithm="default error algorithm">

            <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="default-error-algorithm">默认错误算法</dfn>是一个算法，接收一个 <code
                class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any②②">any</a></code>
            <var>error</var>，执行以下步骤：

            <ol>
                <li data-md>
                    <p><a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#report-an-exception"
                            id="ref-for-report-an-exception①">报告异常</a>，携带 <var>error</var> 及 <a data-link-type="dfn"
                            href="https://tc39.es/ecma262/#current-realm" id="ref-for-current-realm">当前 realm</a> 的 <a
                            data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global"
                            id="ref-for-concept-realm-global">全局对象</a>。</p>
            </ol>
            <p class="note" role="note"><span class="marker">注意：</span>单独抽出此默认算法，便于规范中所有原生订阅
                <a data-link-type="dfn" href="#observable-subscribe-to-an-observable"
                    id="ref-for-observable-subscribe-to-an-observable①">Observable</a>（即规范语句订阅，不经过 <code
                    class="idl"><a data-link-type="idl" href="#dom-observable-subscribe" id="ref-for-dom-observable-subscribe②">subscribe()</a></code>
                方法）时不必重复定义这些步骤。
            </p>
        </div>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="internal-observer">内部观察者</dfn>
            是具有如下 <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#struct" id="ref-for-struct">结构</a>的对象：
        </p>
        <dl>
            <dt data-md><dfn class="dfn-paneled" data-dfn-for="internal observer" data-dfn-type="dfn" data-noexport
                    id="internal-observer-next-steps">next 步骤</dfn>
            <dd data-md>
                <p>接收一个 <code
                        class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any②③">any</a></code>
                    参数的算法。初始时，这些步骤不执行任何操作。</p>
            <dt data-md><dfn class="dfn-paneled" data-dfn-for="internal observer" data-dfn-type="dfn" data-noexport
                    id="internal-observer-error-steps">error 步骤</dfn>
            <dd data-md>
                <p>接收一个 <code
                        class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any②④">any</a></code>
                    参数的算法。初始为 <a data-link-type="dfn" href="#default-error-algorithm"
                        id="ref-for-default-error-algorithm">默认错误算法</a>。</p>
            <dt data-md><dfn class="dfn-paneled" data-dfn-for="internal observer" data-dfn-type="dfn" data-noexport
                    id="internal-observer-complete-steps">complete 步骤</dfn>
            <dd data-md>
                <p>无参数的算法。初始时，这些步骤不执行任何操作。</p>
        </dl>
        <div class="note" role="note">
            <p><a data-link-type="dfn" href="#internal-observer" id="ref-for-internal-observer①">内部观察者</a>结构用于映射 <code
                    class="idl"><a data-link-type="idl" href="#dom-subscriptionobserver-next" id="ref-for-dom-subscriptionobserver-next">next</a></code>、
                <code
                    class="idl"><a data-link-type="idl" href="#dom-subscriptionobserver-error" id="ref-for-dom-subscriptionobserver-error">error</a></code>
                和 <code
                    class="idl"><a data-link-type="idl" href="#dom-subscriptionobserver-complete" id="ref-for-dom-subscriptionobserver-complete">complete</a></code>
                <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-callback-function"
                    id="ref-for-dfn-callback-function">回调函数</a>。对于通过 <code
                    class="idl"><a data-link-type="idl" href="#dom-observable-subscribe" id="ref-for-dom-observable-subscribe③">subscribe()</a></code>
                方法
                由 JavaScript 订阅的 <code
                    class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable①⑦">Observable</a></code>，
                这些算法步骤其实就是对脚本提供的
                <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#invoke-a-callback-function"
                    id="ref-for-invoke-a-callback-function②">回调函数</a>做包装，
                分别对应 <code
                    class="idl"><a data-link-type="idl" href="#dom-subscriptionobserver-next" id="ref-for-dom-subscriptionobserver-next①">next</a></code>、
                <code
                    class="idl"><a data-link-type="idl" href="#dom-subscriptionobserver-error" id="ref-for-dom-subscriptionobserver-error①">error</a></code>
                和 <code
                    class="idl"><a data-link-type="idl" href="#dom-subscriptionobserver-complete" id="ref-for-dom-subscriptionobserver-complete①">complete</a></code>
                <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-callback-function"
                    id="ref-for-dfn-callback-function①">回调函数</a>。
            </p>
            <p>但当规范内部（非脚本）<a data-link-type="dfn" href="#observable-subscribe-to-an-observable"
                    id="ref-for-observable-subscribe-to-an-observable②">订阅</a> <code
                    class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable①⑧">Observable</a></code>
                时，
                这些“步骤”是任意规范算法，不是包含 Web IDL <a data-link-type="dfn"
                    href="https://webidl.spec.whatwg.org/#dfn-callback-function"
                    id="ref-for-dfn-callback-function②">回调函数</a>的 <code
                    class="idl"><a data-link-type="idl" href="#typedefdef-observerunion" id="ref-for-typedefdef-observerunion①">ObserverUnion</a></code>。如
                <a href="#promise-returning-operators">§ 2.3.3 返回 Promise 的操作符</a> 就用到了这种方式。
            </p>
        </div>
        <div class="algorithm" data-algorithm="convert to an Observable" data-algorithm-for="Observable">

            要 <dfn class="dfn-paneled" data-dfn-for="Observable" data-dfn-type="dfn" data-noexport
                id="observable-convert-to-an-observable">转换为 Observable</dfn>，给定 <code
                class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any②⑤">any</a></code>
            <var>value</var>，执行以下步骤：

            <p class="note" role="note"><span class="marker">注意：</span>将此算法从 Web IDL 的 <code
                    class="idl"><a data-link-type="idl" href="#dom-observable-from" id="ref-for-dom-observable-from①">from()</a></code>
                方法中拆分出来，
                以便规范正文可以直接 <a data-link-type="dfn" href="#observable-convert-to-an-observable"
                    id="ref-for-observable-convert-to-an-observable">转换</a>值，不经过 Web IDL 绑定。
            </p>
            <ol>
                <li data-md>
                    <p>如果 <a data-link-type="abstract-op"
                            href="https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values"
                            id="ref-for-sec-ecmascript-data-types-and-values">Type</a>(<var>value</var>) 不是 <a
                            data-link-type="dfn" href="https://tc39.es/ecma262/#sec-object-type"
                            id="ref-for-sec-object-type">Object</a>，<a data-link-type="dfn"
                            href="https://webidl.spec.whatwg.org/#dfn-throw" id="ref-for-dfn-throw">抛出</a> <code
                            class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror">TypeError</a></code>。
                    </p>
                    <p class="note" role="note"><span class="marker">注意：</span>此步骤防止原始类型被强制转换为 iterable（如 String）。讨论见 <a
                            href="https://github.com/WICG/observable/issues/125">WICG/observable#125</a>。
                    </p>
                <li data-md>
                    <p><i id="from-observable-conversion"><b>Observable 转换</b></i>：如果 <var>value</var> 的 <a
                            data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-specific-type"
                            id="ref-for-dfn-specific-type">具体类型</a>
                        是 <code
                            class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable①⑨">Observable</a></code>，则直接返回
                        <var>value</var>。
                    </p>
                <li data-md>
                    <p><i id="from-async-iterable-conversion"><b>异步 iterable 转换</b></i>：令
                        <var>asyncIteratorMethod</var> 为 <a data-link-type="dfn"
                            href="https://tc39.es/ecma262/#sec-returnifabrupt-shorthands"
                            id="ref-for-sec-returnifabrupt-shorthands">?</a> <a data-link-type="abstract-op"
                            href="https://tc39.es/ecma262/multipage/abstract-operations.html#sec-getmethod"
                            id="ref-for-sec-getmethod">GetMethod</a>(<var>value</var>, <code
                            class="idl"><a data-link-type="idl" href="https://tc39.es/ecma262/multipage/ecmascript-data-types-and-values.html#sec-well-known-symbols" id="ref-for-sec-well-known-symbols">%Symbol.asyncIterator%</a></code>)。
                    </p>
                    <p class="note" role="note"><span class="marker">注意：</span>我们使用 <a data-link-type="abstract-op"
                            href="https://tc39.es/ecma262/multipage/abstract-operations.html#sec-getmethod"
                            id="ref-for-sec-getmethod①">GetMethod</a> 而不是 <a data-link-type="abstract-op"
                            href="https://tc39.es/ecma262/multipage/abstract-operations.html#sec-getiterator"
                            id="ref-for-sec-getiterator">GetIterator</a>，因为我们仅检测异步迭代协议支持，不希望因未实现而抛错。
                        <a data-link-type="abstract-op"
                            href="https://tc39.es/ecma262/multipage/abstract-operations.html#sec-getiterator"
                            id="ref-for-sec-getiterator①">GetIterator</a> 在以下两种情况都会抛错：(a) 没有实现迭代协议，(b) 实现了但不可调用或 getter
                        抛错。
                        <a data-link-type="abstract-op"
                            href="https://tc39.es/ecma262/multipage/abstract-operations.html#sec-getmethod"
                            id="ref-for-sec-getmethod②">GetMethod</a> 只在后者情况下抛错。
                    </p>
                <li data-md>
                    <p>如果 <var>asyncIteratorMethod</var> 是 undefined 或 null，则跳到 <a
                            href="#from-iterable-conversion">Iterable 转换</a> 步骤。</p>
                <li data-md>
                    <p>令 <var>nextAlgorithm</var> 为如下步骤，给定 <code
                            class="idl"><a data-link-type="idl" href="#subscriber" id="ref-for-subscriber①⓪">Subscriber</a></code>
                        <var>subscriber</var> 和
                        <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-iterator-records"
                            id="ref-for-sec-iterator-records">Iterator Record</a> <var>iteratorRecord</var>：
                    </p>
                    <ol>
                        <li data-md>
                            <p>如果 <var>subscriber</var> 的 <a data-link-type="dfn"
                                    href="#subscriber-subscription-controller"
                                    id="ref-for-subscriber-subscription-controller②">订阅控制器</a> 的 <a data-link-type="dfn"
                                    href="https://dom.spec.whatwg.org/#abortcontroller-signal"
                                    id="ref-for-abortcontroller-signal①">signal</a> 已 <a data-link-type="dfn"
                                    href="https://dom.spec.whatwg.org/#abortsignal-aborted"
                                    id="ref-for-abortsignal-aborted">中止</a>，则返回。
                            </p>
                        <li data-md>
                            <p>令 <var>nextPromise</var> 为 <code
                                    class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise⑧">Promise</a></code>
                                或 undefined，初始为 undefined。</p>
                        <li data-md>
                            <p>令 <var>nextCompletion</var> 为 <a data-link-type="abstract-op"
                                    href="https://tc39.es/ecma262/multipage/abstract-operations.html#sec-iteratornext"
                                    id="ref-for-sec-iteratornext">IteratorNext</a>(<var>iteratorRecord</var>)。</p>
                            <p class="note" role="note"><span class="marker">注意：</span>此处用 <a
                                    data-link-type="abstract-op"
                                    href="https://tc39.es/ecma262/multipage/abstract-operations.html#sec-iteratornext"
                                    id="ref-for-sec-iteratornext①">IteratorNext</a>，而不是 <a data-link-type="abstract-op"
                                    href="https://tc39.es/ecma262/multipage/abstract-operations.html#sec-iteratorstepvalue"
                                    id="ref-for-sec-iteratorstepvalue">IteratorStepValue</a>，
                                因为 <a data-link-type="abstract-op"
                                    href="https://tc39.es/ecma262/multipage/abstract-operations.html#sec-iteratorstepvalue"
                                    id="ref-for-sec-iteratorstepvalue①">IteratorStepValue</a> 要求迭代器的 <code>next()</code>
                                方法返回可立即检查的对象，
                                而异步迭代时 <code>next()</code> 返回 Promise/thenable（需包装为 Promise 再获取值）。
                            </p>
                        <li data-md>
                            <p>如果 <var>nextCompletion</var> 是 <a data-link-type="dfn"
                                    href="https://tc39.es/ecma262/#sec-completion-record-specification-type"
                                    id="ref-for-sec-completion-record-specification-type">throw completion</a>，则：</p>
                            <ol>
                                <li data-md>
                                    <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert"
                                            id="ref-for-assert③">断言</a>：<var>iteratorRecord</var> 的 [[Done]] 为 true。</p>
                                <li data-md>
                                    <p>令 <var>nextPromise</var> 为 <a data-link-type="dfn"
                                            href="https://webidl.spec.whatwg.org#a-promise-rejected-with"
                                            id="ref-for-a-promise-rejected-with">被拒绝的 promise</a>，
                                        值为 <var>nextRecord</var> 的 [[Value]]。
                                    </p>
                            </ol>
                        <li data-md>
                            <p>否则，如果 <var>nextRecord</var> 是 <a data-link-type="dfn" data-refhint-key="ac8707c1"
                                    href="https://tc39.es/ecma262/#sec-completion-record-specification-type"
                                    id="ref-for-sec-completion-record-specification-type①">normal completion</a>，
                                令 <var>nextPromise</var> 为 <a data-link-type="dfn"
                                    href="https://webidl.spec.whatwg.org/#a-promise-resolved-with"
                                    id="ref-for-a-promise-resolved-with">已解决的 promise</a>，
                                值为 <var>nextRecord</var> 的 [[Value]]。
                            </p>
                            <p class="note" role="note"><span class="marker">注意：</span>这样做是确保 <var>nextRecord</var> 的
                                [[Value]] 即使不是 Promise，也会被包装为 Promise。</p>
                        <li data-md>
                            <p><a data-link-type="dfn"
                                    href="https://webidl.spec.whatwg.org/#dfn-perform-steps-once-promise-is-settled"
                                    id="ref-for-dfn-perform-steps-once-promise-is-settled">响应</a>
                                <var>nextPromise</var>：
                            </p>
                            <ul>
                                <li data-md>
                                    <p>如果 <var>nextPromise</var> 被 fulfilled，值为 <var>iteratorResult</var>，则：</p>
                                    <ol>
                                        <li data-md>
                                            <p>如果 <a data-link-type="abstract-op"
                                                    href="https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values"
                                                    id="ref-for-sec-ecmascript-data-types-and-values①">Type</a>(<var>iteratorResult</var>)
                                                不是 Object，则以 <code
                                                    class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error①">error()</a></code>
                                                和 <code
                                                    class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①">TypeError</a></code>
                                                调用 <var>subscriber</var>，并终止步骤。
                                            </p>
                                        <li data-md>
                                            <p>令 <var>done</var> 为 <a data-link-type="abstract-op"
                                                    href="https://tc39.es/ecma262/multipage/abstract-operations.html#sec-iteratorcomplete"
                                                    id="ref-for-sec-iteratorcomplete">IteratorComplete</a>(<var>iteratorResult</var>)。
                                            </p>
                                        <li data-md>
                                            <p>如果 <var>done</var> 是 <a data-link-type="dfn"
                                                    href="https://tc39.es/ecma262/#sec-completion-record-specification-type"
                                                    id="ref-for-sec-completion-record-specification-type②">throw
                                                    completion</a>，
                                                则以 <var>done</var> 的 [[Value]] 调用 <var>subscriber</var> 的 <code
                                                    class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error②">error()</a></code>，并终止步骤。
                                            </p>
                                        <li data-md>
                                            <p>如果 <var>done</var> 的 [[Value]] 为 true，则以 <var>subscriber</var> 的 <code
                                                    class="idl"><a data-link-type="idl" href="#dom-subscriber-complete" id="ref-for-dom-subscriber-complete①">complete()</a></code>
                                                调用，并终止步骤。
                                            </p>
                                        <li data-md>
                                            <p>令 <var>value</var> 为 <a data-link-type="abstract-op"
                                                    href="https://tc39.es/ecma262/multipage/abstract-operations.html#sec-iteratorvalue"
                                                    id="ref-for-sec-iteratorvalue">IteratorValue</a>(<var>iteratorResult</var>)。
                                            </p>
                                        <li data-md>
                                            <p>如果 <var>value</var> 是 <a data-link-type="dfn"
                                                    href="https://tc39.es/ecma262/#sec-completion-record-specification-type"
                                                    id="ref-for-sec-completion-record-specification-type③">throw
                                                    completion</a>，
                                                则以 <var>value</var> 的 [[Value]] 调用 <var>subscriber</var> 的 <code
                                                    class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error③">error()</a></code>，并终止步骤。
                                            </p>
                                        <li data-md>
                                            <p>以 <var>value</var> 的 [[Value]] 调用 <var>subscriber</var> 的 <code
                                                    class="idl"><a data-link-type="idl" href="#dom-subscriber-next" id="ref-for-dom-subscriber-next③">next()</a></code>。
                                            </p>
                                        <li data-md>
                                            <p>再次以 <var>subscriber</var> 和 <var>iteratorRecord</var> 运行
                                                <var>nextAlgorithm</var>。
                                            </p>
                                    </ol>
                                <li data-md>
                                    <p>如果 <var>nextPromise</var> 被 rejected，原因为 <var>r</var>，则以 <var>r</var> 调用
                                        <var>subscriber</var> 的 <code
                                            class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error④">error()</a></code>。
                                    </p>
                            </ul>
                    </ol>
                <li data-md>
                    <p>返回一个 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new" id="ref-for-new">新的</a>
                        <code
                            class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable②⓪">Observable</a></code>，
                        其 <a data-link-type="dfn" href="#observable-subscribe-callback"
                            id="ref-for-observable-subscribe-callback②">subscribe callback</a> 是一个接收 <code
                            class="idl"><a data-link-type="idl" href="#subscriber" id="ref-for-subscriber①①">Subscriber</a></code>
                        <var>subscriber</var> 并执行如下操作的算法：
                    </p>
                    <ol>
                        <li data-md>
                            <p>如果 <var>subscriber</var> 的 <a data-link-type="dfn"
                                    href="#subscriber-subscription-controller"
                                    id="ref-for-subscriber-subscription-controller③">订阅控制器</a> 的 <a data-link-type="dfn"
                                    href="https://dom.spec.whatwg.org/#abortcontroller-signal"
                                    id="ref-for-abortcontroller-signal②">signal</a> 已 <a data-link-type="dfn"
                                    href="https://dom.spec.whatwg.org/#abortsignal-aborted"
                                    id="ref-for-abortsignal-aborted①">中止</a>，则返回。
                            </p>
                        <li data-md>
                            <p>令 <var>iteratorRecordCompletion</var> 为 <a data-link-type="abstract-op"
                                    href="https://tc39.es/ecma262/multipage/abstract-operations.html#sec-getiterator"
                                    id="ref-for-sec-getiterator②">GetIterator</a>(<var>value</var>, async)。</p>
                            <p class="note" role="note"><span class="marker">注意：</span>此步骤会重新调用 <code
                                    class="idl"><a data-link-type="idl" href="https://tc39.es/ecma262/multipage/ecmascript-data-types-and-values.html#sec-well-known-symbols" id="ref-for-sec-well-known-symbols①">%Symbol.asyncIterator%</a></code>
                                的 getter，
                                并触发协议本身以获取 <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-iterator-records"
                                    id="ref-for-sec-iterator-records①">Iterator Record</a>。极端情况见 <a
                                    href="https://github.com/WICG/observable/issues/127">issue#127</a>。</p>
                        <li data-md>
                            <p>如果 <var>iteratorRecordCompletion</var> 是 <a data-link-type="dfn"
                                    href="https://tc39.es/ecma262/#sec-completion-record-specification-type"
                                    id="ref-for-sec-completion-record-specification-type④">throw completion</a>，
                                则以 <var>iteratorRecordCompletion</var> 的 [[Value]] 同步调用 <var>subscriber</var> 的 <code
                                    class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error⑤">error()</a></code>，并终止步骤。
                            </p>
                            <p class="note" role="note"><span class="marker">注意：</span>此处同步传播错误，仅在异步 iterable 转
                                Observable 时可能发生；
                                其它情况错误会异步经 microtask 传播，因为被包装为 rejected <code
                                    class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise①⓪">Promise</a></code>。
                                此同步传播行为与语言结构一致，如 <strong>for-await of</strong> 循环会同步抛出异常到外部 catch 块，且未发生 <a
                                    data-link-type="abstract-op"
                                    href="https://tc39.es/ecma262/multipage/control-abstraction-objects.html#await"
                                    id="ref-for-await">Await</a> 前即抛出。
                            </p>
                        <li data-md>
                            <p>令 <var>iteratorRecord</var> 为 <a data-link-type="dfn" data-refhint-key="548dbb6b"
                                    href="https://tc39.es/ecma262/#sec-returnifabrupt-shorthands"
                                    id="ref-for-sec-returnifabrupt-shorthands①">!</a>
                                <var>iteratorRecordCompletion</var>。
                            </p>
                        <li data-md>
                            <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert"
                                    id="ref-for-assert④">断言</a>：<var>iteratorRecord</var> 是 <a data-link-type="dfn"
                                    href="https://tc39.es/ecma262/#sec-iterator-records"
                                    id="ref-for-sec-iterator-records②">Iterator Record</a>。</p>
                        <li data-md>
                            <p>如果 <var>subscriber</var> 的 <a data-link-type="dfn"
                                    href="#subscriber-subscription-controller"
                                    id="ref-for-subscriber-subscription-controller④">订阅控制器</a> 的 <a data-link-type="dfn"
                                    href="https://dom.spec.whatwg.org/#abortcontroller-signal"
                                    id="ref-for-abortcontroller-signal③">signal</a> 已 <a data-link-type="dfn"
                                    href="https://dom.spec.whatwg.org/#abortsignal-aborted"
                                    id="ref-for-abortsignal-aborted②">中止</a>，则返回。
                            </p>
                        <li data-md>
                            <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-add"
                                    id="ref-for-abortsignal-add">添加如下中止算法</a>到 <var>subscriber</var> 的
                                <a data-link-type="dfn" href="#subscriber-subscription-controller"
                                    id="ref-for-subscriber-subscription-controller⑤">订阅控制器</a>的 <a data-link-type="dfn"
                                    href="https://dom.spec.whatwg.org/#abortcontroller-signal"
                                    id="ref-for-abortcontroller-signal④">signal</a>：
                            </p>
                            <ol>
                                <li data-md>
                                    <p>运行 <a data-link-type="abstract-op"
                                            href="https://tc39.es/ecma262/multipage/abstract-operations.html#sec-asynciteratorclose"
                                            id="ref-for-sec-asynciteratorclose">AsyncIteratorClose</a>(<var>iteratorRecord</var>,
                                        <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-normalcompletion"
                                            id="ref-for-sec-normalcompletion">NormalCompletion</a>(<var>subscriber</var>
                                        的
                                        <a data-link-type="dfn" href="#subscriber-subscription-controller"
                                            id="ref-for-subscriber-subscription-controller⑥">订阅控制器</a> 的 <a
                                            data-link-type="dfn"
                                            href="https://dom.spec.whatwg.org#abortsignal-abort-reason"
                                            id="ref-for-abortsignal-abort-reason">abort reason</a>))。
                                    </p>
                            </ol>
                        <li data-md>
                            <p>以 <var>subscriber</var> 和 <var>iteratorRecord</var> 运行 <var>nextAlgorithm</var>。</p>
                    </ol>
                <li data-md>
                    <p><i id="from-iterable-conversion"><b>Iterable 转换</b></i>：令 <var>iteratorMethod</var> 为 <a
                            data-link-type="dfn" href="https://tc39.es/ecma262/#sec-returnifabrupt-shorthands"
                            id="ref-for-sec-returnifabrupt-shorthands②">?</a>
                        <a data-link-type="abstract-op"
                            href="https://tc39.es/ecma262/multipage/abstract-operations.html#sec-getmethod"
                            id="ref-for-getmethod③">GetMethod</a>(<var>value</var>, <code
                            class="idl"><a data-link-type="idl" href="https://tc39.es/ecma262/multipage/ecmascript-data-types-and-values.html#sec-well-known-symbols" id="ref-for-sec-well-known-symbols③">%Symbol.iterator%</a></code>)。
                    </p>
                <li data-md>
                    <p>如果 <var>iteratorMethod</var> 为 undefined，则跳到 <a href="#from-promise-conversion">Promise 转换</a>
                        步骤。</p>
                    <p>否则，返回一个 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new"
                            id="ref-for-new①">新的</a> <code
                            class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable②②">Observable</a></code>，
                        其 <a data-link-type="dfn" href="#observable-subscribe-callback"
                            id="ref-for-observable-subscribe-callback③">subscribe callback</a> 是一个接收 <code
                            class="idl"><a data-link-type="idl" href="#subscriber" id="ref-for-subscriber①②">Subscriber</a></code>
                        <var>subscriber</var> 并执行如下操作的算法：
                    </p>
                    <ol>
                        <li data-md>
                            <p>如果 <var>subscriber</var> 的 <a data-link-type="dfn"
                                    href="#subscriber-subscription-controller"
                                    id="ref-for-subscriber-subscription-controller⑦">订阅控制器</a> 的 <a data-link-type="dfn"
                                    href="https://dom.spec.whatwg.org/#abortcontroller-signal"
                                    id="ref-for-abortcontroller-signal⑤">signal</a> 已 <a data-link-type="dfn"
                                    href="https://dom.spec.whatwg.org/#abortsignal-aborted"
                                    id="ref-for-abortsignal-aborted③">中止</a>，则返回。
                            </p>
                        <li data-md>
                            <p>令 <var>iteratorRecordCompletion</var> 为 <a data-link-type="abstract-op"
                                    href="https://tc39.es/ecma262/multipage/abstract-operations.html#sec-getiterator"
                                    id="ref-for-sec-getiterator③">GetIterator</a>(<var>value</var>, sync)。</p>
                        <li data-md>
                            <p>如果 <var>iteratorRecordCompletion</var> 是 <a data-link-type="dfn"
                                    href="https://tc39.es/ecma262/#sec-completion-record-specification-type"
                                    id="ref-for-sec-completion-record-specification-type⑤">throw completion</a>，
                                则以 <var>iteratorRecordCompletion</var> 的 [[Value]] 调用 <var>subscriber</var> 的 <code
                                    class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error⑦">error()</a></code>，并终止步骤。
                            </p>
                        <li data-md>
                            <p>令 <var>iteratorRecord</var> 为 <a data-link-type="dfn" data-refhint-key="548dbb6b"
                                    href="https://tc39.es/ecma262/#sec-returnifabrupt-shorthands"
                                    id="ref-for-sec-returnifabrupt-shorthands③">!</a>
                                <var>iteratorRecordCompletion</var>。
                            </p>
                        <li data-md>
                            <p>如果 <var>subscriber</var> 的 <a data-link-type="dfn"
                                    href="#subscriber-subscription-controller"
                                    id="ref-for-subscriber-subscription-controller⑧">订阅控制器</a> 的 <a data-link-type="dfn"
                                    href="https://dom.spec.whatwg.org/#abortcontroller-signal"
                                    id="ref-for-abortcontroller-signal⑥">signal</a> 已 <a data-link-type="dfn"
                                    href="https://dom.spec.whatwg.org/#abortsignal-aborted"
                                    id="ref-for-abortsignal-aborted④">中止</a>，则返回。
                            </p>
                        <li data-md>
                            <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-add"
                                    id="ref-for-abortsignal-add①">添加如下中止算法</a>到 <var>subscriber</var> 的
                                <a data-link-type="dfn" href="#subscriber-subscription-controller"
                                    id="ref-for-subscriber-subscription-controller⑨">订阅控制器</a>的 <a data-link-type="dfn"
                                    href="https://dom.spec.whatwg.org/#abortcontroller-signal"
                                    id="ref-for-abortcontroller-signal⑦">signal</a>：
                            </p>
                            <ol>
                                <li data-md>
                                    <p>运行 <a data-link-type="abstract-op"
                                            href="https://tc39.es/ecma262/multipage/abstract-operations.html#sec-iteratorclose"
                                            id="ref-for-sec-iteratorclose">IteratorClose</a>(<var>iteratorRecord</var>,
                                        <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-normalcompletion"
                                            id="ref-for-sec-normalcompletion①">NormalCompletion</a>(UNUSED))。
                                    </p>
                            </ol>
                        <li data-md>
                            <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-while"
                                    id="ref-for-iteration-while">当</a> true 时：</p>
                            <ol>
                                <li data-md>
                                    <p>令 <var>next</var> 为 <a data-link-type="abstract-op"
                                            href="https://tc39.es/ecma262/multipage/abstract-operations.html#sec-iteratorstepvalue"
                                            id="ref-for-sec-iteratorstepvalue②">IteratorStepValue</a>(<var>iteratorRecord</var>)。
                                    </p>
                                <li data-md>
                                    <p>如果 <var>next</var> 是 <a data-link-type="dfn"
                                            href="https://tc39.es/ecma262/#sec-completion-record-specification-type"
                                            id="ref-for-sec-completion-record-specification-type⑥">throw completion</a>，
                                        则以 <var>next</var> 的 [[Value]] 调用 <var>subscriber</var> 的 <code
                                            class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error⑧">error()</a></code>，并
                                        <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-break"
                                            id="ref-for-iteration-break">跳出</a>。
                                    </p>
                                <li data-md>
                                    <p>令 <var>next</var> 为 <a data-link-type="dfn" data-refhint-key="548dbb6b"
                                            href="https://tc39.es/ecma262/#sec-returnifabrupt-shorthands"
                                            id="ref-for-sec-returnifabrupt-shorthands④">!</a> <var>next</var>。</p>
                                <li data-md>
                                    <p>如果 <var>next</var> 已结束，则：</p>
                                    <ol>
                                        <li data-md>
                                            <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert"
                                                    id="ref-for-assert⑤">断言</a>：<var>iteratorRecord</var> 的 [[Done]] 为
                                                true。</p>
                                        <li data-md>
                                            <p>调用 <var>subscriber</var> 的 <code
                                                    class="idl"><a data-link-type="idl" href="#dom-subscriber-complete" id="ref-for-dom-subscriber-complete②">complete()</a></code>。
                                            </p>
                                        <li data-md>
                                            <p>返回。</p>
                                    </ol>
                                <li data-md>
                                    <p>以 <var>next</var> 调用 <var>subscriber</var> 的 <code
                                            class="idl"><a data-link-type="idl" href="#dom-subscriber-next" id="ref-for-dom-subscriber-next④">next()</a></code>。
                                    </p>
                                <li data-md>
                                    <p>如果 <var>subscriber</var> 的 <a data-link-type="dfn"
                                            href="#subscriber-subscription-controller"
                                            id="ref-for-subscriber-subscription-controller①⓪">订阅控制器</a> 的 <a
                                            data-link-type="dfn"
                                            href="https://dom.spec.whatwg.org/#abortcontroller-signal"
                                            id="ref-for-abortcontroller-signal⑧">signal</a>
                                        已 <a data-link-type="dfn"
                                            href="https://dom.spec.whatwg.org/#abortsignal-aborted"
                                            id="ref-for-abortsignal-aborted⑤">中止</a>，则 <a data-link-type="dfn"
                                            href="https://infra.spec.whatwg.org/#iteration-break"
                                            id="ref-for-iteration-break①">跳出</a>。</p>
                            </ol>
                    </ol>
                <li data-md>
                    <p><i id="from-promise-conversion"><b>Promise 转换</b></i>：如果 <a data-link-type="abstract-op"
                            href="https://tc39.es/ecma262/multipage/control-abstraction-objects.html#sec-ispromise"
                            id="ref-for-sec-ispromise">IsPromise</a>(<var>value</var>) 为 true，
                        则：</p>
                    <ol>
                        <li data-md>
                            <p>返回一个 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new"
                                    id="ref-for-new②">新的</a> <code
                                    class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable②③">Observable</a></code>，
                                其 <a data-link-type="dfn" href="#observable-subscribe-callback"
                                    id="ref-for-observable-subscribe-callback④">subscribe callback</a> 是一个接收 <code
                                    class="idl"><a data-link-type="idl" href="#subscriber" id="ref-for-subscriber①③">Subscriber</a></code>
                                <var>subscriber</var> 并执行如下操作的算法：
                            </p>
                            <ol>
                                <li data-md>
                                    <p><a data-link-type="dfn"
                                            href="https://webidl.spec.whatwg.org/#dfn-perform-steps-once-promise-is-settled"
                                            id="ref-for-dfn-perform-steps-once-promise-is-settled②">对 <var>value</var>
                                            做出响应：</a>
                                    </p>
                                    <ol>
                                        <li data-md>
                                            <p>如果 <var>value</var> 被 fulfilled，值为 <var>v</var>，则：</p>
                                            <ol>
                                                <li data-md>
                                                    <p>以 <var>v</var> 运行 <var>subscriber</var> 的 <code
                                                            class="idl"><a data-link-type="idl" href="#dom-subscriber-next" id="ref-for-dom-subscriber-next⑤">next()</a></code>
                                                        方法。</p>
                                                <li data-md>
                                                    <p>运行 <var>subscriber</var> 的 <code
                                                            class="idl"><a data-link-type="idl" href="#dom-subscriber-complete" id="ref-for-dom-subscriber-complete③">complete()</a></code>
                                                        方法。</p>
                                            </ol>
                                        <li data-md>
                                            <p>如果 <var>value</var> 被 rejected，原因为 <var>r</var>，则以 <var>r</var> 运行
                                                <var>subscriber</var> 的
                                                <code
                                                    class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error⑨">error()</a></code>
                                                方法。
                                            </p>
                                    </ol>
                            </ol>
                    </ol>
                <li data-md>
                    <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw"
                            id="ref-for-dfn-throw①">抛出</a>一个 <code
                            class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror②">TypeError</a></code>。
                    </p>
            </ol>
            <details class="wpt-tests-block" dir="ltr" lang="zh" open>
                <summary>测试</summary>
                <ul class="wpt-tests-list">
                    <li class="wpt-test"><a class="wpt-name"
                            href="https://wpt.fyi/results/dom/observable/tentative/observable-from.any.js"
                            title="dom/observable/tentative/observable-from.any.js">observable-from.any.js</a>
                        <a class="wpt-live"
                            href="http://wpt.live/dom/observable/tentative/observable-from.any.js"><small>（在线测试）</small></a>
                        <a class="wpt-source"
                            href="https://github.com/web-platform-tests/wpt/blob/master/dom/observable/tentative/observable-from.any.js"><small>（源码）</small></a>
                </ul>
            </details>
        </div>
        <div class="algorithm" data-algorithm="subscribe to an Observable" data-algorithm-for="Observable">

            要 <dfn class="dfn-paneled" data-dfn-for="Observable" data-dfn-type="dfn" data-noexport
                id="observable-subscribe-to-an-observable">订阅一个 <code
                    class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable②④">Observable</a></code></dfn>
            ，给定一个
            <code
                class="idl"><a data-link-type="idl" href="#typedefdef-observerunion" id="ref-for-typedefdef-observerunion②">ObserverUnion</a></code>
            或 <a data-link-type="dfn" href="#internal-observer" id="ref-for-internal-observer②">内部观察者</a>
            <var>observer</var>，以及 <code
                class="idl"><a data-link-type="idl" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions⑨">SubscribeOptions</a></code>
            <var>options</var>，执行以下步骤：

            <p class="note" role="note"><span class="marker">注意：</span>我们将此算法与 Web IDL 的 <code
                    class="idl"><a data-link-type="idl" href="#dom-observable-subscribe" id="ref-for-dom-observable-subscribe④">subscribe()</a></code>
                方法分离开，使规范正文可以 <a data-link-type="dfn" href="#observable-subscribe-to-an-observable"
                    id="ref-for-observable-subscribe-to-an-observable③">订阅</a>一个 <code
                    class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable②⑤">Observable</a></code>
                而无需经过 Web IDL 绑定。参见 <a
                    href="https://github.com/w3c/IntersectionObserver/issues/464">w3c/IntersectionObserver#464</a>
                相关背景，其中“内部”正文 <span class="allow-2119">必须</span> 不经过 Web IDL 绑定处理属性可能被 JavaScript 修改的对象。用法参见 <a
                    href="#promise-returning-operators">§ 2.3.3 返回 Promise 的操作符</a>。
            </p>
            <ol>
                <li data-md>
                    <p>如果 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this"
                            id="ref-for-this①⑨">this</a> 的 <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global"
                            id="ref-for-concept-relevant-global⑥">相关全局对象</a> 是 <code
                            class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window⑤">Window</a></code>
                        对象，且其 <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window"
                            id="ref-for-concept-document-window⑤">关联的 Document</a> 非 <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active"
                            id="ref-for-fully-active⑤">完全激活</a>，则返回。</p>
                <li data-md>
                    <p>令 <var>internal observer</var> 为新的 <a data-link-type="dfn" href="#internal-observer"
                            id="ref-for-internal-observer③">内部观察者</a>。</p>
                <li data-md>
                    <p>按如下处理 <var>observer</var>：</p>
                    <ol id="process-observer">
                        <li>
                            <dl class="switch">
                                <dt>如果 <var>observer</var> 是 <code
                                        class="idl"><a data-link-type="idl" href="#callbackdef-observablesubscriptioncallback" id="ref-for-callbackdef-observablesubscriptioncallback⑥">ObservableSubscriptionCallback</a></code>
                                <dd>
                                    设置 <var>internal observer</var> 的 <a data-link-type="dfn"
                                        href="#internal-observer-next-steps"
                                        id="ref-for-internal-observer-next-steps④">next 步骤</a>如下，接收 <code
                                        class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any②⑥">any</a></code>
                                    <var>value</var>：

                                    <ol>
                                        <li data-md>
                                            <p><a data-link-type="dfn"
                                                    href="https://webidl.spec.whatwg.org/#invoke-a-callback-function"
                                                    id="ref-for-invoke-a-callback-function③">调用</a>
                                                <var>observer</var>，参数为 «<var>value</var>» 和 "<code>report</code>"。
                                            </p>
                                    </ol>
                                <dt>如果 <var>observer</var> 是 <code
                                        class="idl"><a data-link-type="idl" href="#dictdef-subscriptionobserver" id="ref-for-dictdef-subscriptionobserver①">SubscriptionObserver</a></code>
                                <dd>
                                    <ol>
                                        <li data-md>
                                            <p>如果 <var>observer</var> 的 <code
                                                    class="idl"><a data-link-type="idl" href="#dom-subscriptionobserver-next" id="ref-for-dom-subscriptionobserver-next②">next</a></code>
                                                <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists"
                                                    id="ref-for-map-exists">存在</a>，则设置 <var>internal
                                                    observer</var> 的 <a data-link-type="dfn"
                                                    href="#internal-observer-next-steps"
                                                    id="ref-for-internal-observer-next-steps⑤">next 步骤</a>如下，接收 <code
                                                    class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any②⑦">any</a></code>
                                                <var>value</var>：
                                            </p>
                                            <ol>
                                                <li data-md>
                                                    <p><a data-link-type="dfn"
                                                            href="https://webidl.spec.whatwg.org/#invoke-a-callback-function"
                                                            id="ref-for-invoke-a-callback-function④">调用</a>
                                                        <var>observer</var> 的 <code
                                                            class="idl"><a data-link-type="idl" href="#dom-subscriptionobserver-next" id="ref-for-dom-subscriptionobserver-next③">next</a></code>
                                                        ，参数为 «<var>value</var>» 和 "<code>report</code>"。
                                                    </p>
                                            </ol>
                                        <li data-md>
                                            <p>如果 <var>observer</var> 的 <code
                                                    class="idl"><a data-link-type="idl" href="#dom-subscriptionobserver-error" id="ref-for-dom-subscriptionobserver-error②">error</a></code>
                                                <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists"
                                                    id="ref-for-map-exists①">存在</a>，则设置 <var>internal
                                                    observer</var> 的 <a data-link-type="dfn"
                                                    href="#internal-observer-error-steps"
                                                    id="ref-for-internal-observer-error-steps①">error 步骤</a>如下，接收 <code
                                                    class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any②⑧">any</a></code>
                                                <var>error</var>：
                                            </p>
                                            <ol>
                                                <li data-md>
                                                    <p><a data-link-type="dfn"
                                                            href="https://webidl.spec.whatwg.org/#invoke-a-callback-function"
                                                            id="ref-for-invoke-a-callback-function⑤">调用</a>
                                                        <var>observer</var> 的 <code
                                                            class="idl"><a data-link-type="idl" href="#dom-subscriptionobserver-error" id="ref-for-dom-subscriptionobserver-error③">error</a></code>
                                                        ，参数为 «<var>error</var>» 和 "<code>report</code>"。
                                                    </p>
                                            </ol>
                                        <li data-md>
                                            <p>如果 <var>observer</var> 的 <code
                                                    class="idl"><a data-link-type="idl" href="#dom-subscriptionobserver-complete" id="ref-for-dom-subscriptionobserver-complete②">complete</a></code>
                                                <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists"
                                                    id="ref-for-map-exists②">存在</a>，则设置
                                                <var>internal observer</var> 的 <a data-link-type="dfn"
                                                    href="#internal-observer-complete-steps"
                                                    id="ref-for-internal-observer-complete-steps①">complete 步骤</a>如下：
                                            </p>
                                            <ol>
                                                <li data-md>
                                                    <p><a data-link-type="dfn"
                                                            href="https://webidl.spec.whatwg.org/#invoke-a-callback-function"
                                                            id="ref-for-invoke-a-callback-function⑥">调用</a>
                                                        <var>observer</var> 的 <code
                                                            class="idl"><a data-link-type="idl" href="#dom-subscriptionobserver-complete" id="ref-for-dom-subscriptionobserver-complete③">complete</a></code>
                                                        ，参数为 «» 和 "<code>report</code>"。
                                                    </p>
                                            </ol>
                                    </ol>
                                <dt>如果 <var>observer</var> 是 <a data-link-type="dfn" href="#internal-observer"
                                        id="ref-for-internal-observer④">内部观察者</a>
                                <dd>将 <var>internal observer</var> 设为 <var>observer</var>。
                            </dl>
                    </ol>
                <li data-md>
                    <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert"
                            id="ref-for-assert⑥">断言</a>：<var>internal observer</var> 的 <a data-link-type="dfn"
                            href="#internal-observer-error-steps" id="ref-for-internal-observer-error-steps②">error
                            步骤</a>要么是 <a data-link-type="dfn" href="#default-error-algorithm"
                            id="ref-for-default-error-algorithm①">默认错误算法</a>，要么是 <a data-link-type="dfn"
                            href="https://webidl.spec.whatwg.org/#invoke-a-callback-function"
                            id="ref-for-invoke-a-callback-function⑦">调用</a>提供的
                        <code
                            class="idl"><a data-link-type="idl" href="#dom-subscriptionobserver-error" id="ref-for-dom-subscriptionobserver-error④">error</a></code>
                        <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-callback-function"
                            id="ref-for-dfn-callback-function③">回调函数</a>的算法。
                    </p>
                <li data-md>
                    <p>如果 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this"
                            id="ref-for-this②⓪">this</a> 的 <a data-link-type="dfn" href="#observable-weak-subscriber"
                            id="ref-for-observable-weak-subscriber">weak subscriber</a> 非 null 且 <a data-link-type="dfn"
                            href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②①">this</a> 的 <a
                            data-link-type="dfn" href="#observable-weak-subscriber"
                            id="ref-for-observable-weak-subscriber①">weak subscriber</a> 的 <a data-link-type="dfn"
                            href="#subscriber-active" id="ref-for-subscriber-active⑦">active</a> 为 true：</p>
                    <ol>
                        <li data-md>
                            <p>令 <var>subscriber</var> 为 <a data-link-type="dfn"
                                    href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②②">this</a> 的 <a
                                    data-link-type="dfn" href="#observable-weak-subscriber"
                                    id="ref-for-observable-weak-subscriber②">weak subscriber</a>。</p>
                        <li data-md>
                            <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-append"
                                    id="ref-for-set-append">追加</a> <var>internal observer</var> 到
                                <var>subscriber</var> 的 <a data-link-type="dfn" href="#subscriber-internal-observers"
                                    id="ref-for-subscriber-internal-observers⑤">内部观察者</a>。
                            </p>
                        <li data-md>
                            <p>如果 <var>options</var> 的 <code
                                    class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal">signal</a></code>
                                <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists"
                                    id="ref-for-map-exists③">存在</a>，则：
                            </p>
                            <ol>
                                <li data-md>
                                    <p>如果 <var>options</var> 的 <code
                                            class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal①">signal</a></code>
                                        已 <a data-link-type="dfn"
                                            href="https://dom.spec.whatwg.org/#abortsignal-aborted"
                                            id="ref-for-abortsignal-aborted⑥">中止</a>，则
                                        <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-remove"
                                            id="ref-for-list-remove">移除</a> <var>internal observer</var> 从
                                        <var>subscriber</var> 的 <a data-link-type="dfn"
                                            href="#subscriber-internal-observers"
                                            id="ref-for-subscriber-internal-observers⑥">内部观察者</a>。
                                    </p>
                                <li data-md>
                                    <p>否则，<a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-add"
                                            id="ref-for-abortsignal-add②">添加以下中止算法</a>到 <var>options</var> 的
                                        <code
                                            class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal②">signal</a></code>：
                                    </p>
                                    <ol>
                                        <li data-md>
                                            <p>如果 <var>subscriber</var> 的 <a data-link-type="dfn"
                                                    href="#subscriber-active" id="ref-for-subscriber-active⑧">active</a>
                                                为 false，则中止这些步骤。</p>
                                        <li data-md>
                                            <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-remove"
                                                    id="ref-for-list-remove①">移除</a> <var>internal observer</var>
                                                从 <var>subscriber</var> 的 <a data-link-type="dfn"
                                                    href="#subscriber-internal-observers"
                                                    id="ref-for-subscriber-internal-observers⑦">内部观察者</a>。
                                            </p>
                                        <li data-md>
                                            <p>如果 <var>subscriber</var> 的 <a data-link-type="dfn"
                                                    href="#subscriber-internal-observers"
                                                    id="ref-for-subscriber-internal-observers⑧">内部观察者</a>
                                                <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-empty"
                                                    id="ref-for-list-empty">为空</a>，则以 <var>options</var> 的 <code
                                                    class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal③">signal</a></code>
                                                的
                                                <a data-link-type="dfn"
                                                    href="https://dom.spec.whatwg.org#abortsignal-abort-reason"
                                                    id="ref-for-abortsignal-abort-reason①">中止原因</a> <a
                                                    data-link-type="dfn" href="#close-a-subscription"
                                                    id="ref-for-close-a-subscription③">关闭</a> <var>subscriber</var>。
                                            </p>
                                    </ol>
                            </ol>
                        <li data-md>
                            <p>返回。</p>
                    </ol>
                <li data-md>
                    <p>令 <var>subscriber</var> 为 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new"
                            id="ref-for-new③">新建</a>的 <code
                            class="idl"><a data-link-type="idl" href="#subscriber" id="ref-for-subscriber①④">Subscriber</a></code>。
                    </p>
                <li data-md>
                    <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-append"
                            id="ref-for-set-append①">追加</a> <var>internal observer</var> 到 <var>subscriber</var> 的
                        <a data-link-type="dfn" href="#subscriber-internal-observers"
                            id="ref-for-subscriber-internal-observers⑨">内部观察者</a>。
                    </p>
                <li data-md>
                    <p>设置 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this"
                            id="ref-for-this②③">this</a> 的 <a data-link-type="dfn" href="#observable-weak-subscriber"
                            id="ref-for-observable-weak-subscriber③">weak subscriber</a> 为 <var>subscriber</var>。</p>
                <li data-md>
                    <p>如果 <var>options</var> 的 <code
                            class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal④">signal</a></code>
                        <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists"
                            id="ref-for-map-exists④">存在</a>，则：
                    </p>
                    <ol>
                        <li data-md>
                            <p>如果 <var>options</var> 的 <code
                                    class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal⑤">signal</a></code>
                                已 <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-aborted"
                                    id="ref-for-abortsignal-aborted⑦">中止</a>，则以 <var>options</var> 的 <code
                                    class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal⑥">signal</a></code>
                                的 <a data-link-type="dfn" href="https://dom.spec.whatwg.org#abortsignal-abort-reason"
                                    id="ref-for-abortsignal-abort-reason②">中止原因</a> <a data-link-type="dfn"
                                    href="#close-a-subscription" id="ref-for-close-a-subscription④">关闭</a>
                                <var>subscriber</var>。
                            </p>
                        <li data-md>
                            <p>否则，<a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-add"
                                    id="ref-for-abortsignal-add③">添加以下中止算法</a>到
                                <var>options</var> 的
                                <code
                                    class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal⑦">signal</a></code>：
                            </p>
                            <ol>
                                <li data-md>
                                    <p>如果 <var>subscriber</var> 的 <a data-link-type="dfn" href="#subscriber-active"
                                            id="ref-for-subscriber-active⑨">active</a> 为 false，则中止这些步骤。</p>
                                <li data-md>
                                    <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-remove"
                                            id="ref-for-list-remove②">移除</a> <var>internal observer</var> 从
                                        <var>subscriber</var> 的 <a data-link-type="dfn"
                                            href="#subscriber-internal-observers"
                                            id="ref-for-subscriber-internal-observers①⓪">内部观察者</a>。
                                    </p>
                                <li data-md>
                                    <p>如果 <var>subscriber</var> 的 <a data-link-type="dfn"
                                            href="#subscriber-internal-observers"
                                            id="ref-for-subscriber-internal-observers①①">内部观察者</a> <a
                                            data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-empty"
                                            id="ref-for-list-empty①">为空</a>，则以 <var>options</var> 的 <code
                                            class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal⑧">signal</a></code>
                                        的
                                        <a data-link-type="dfn"
                                            href="https://dom.spec.whatwg.org#abortsignal-abort-reason"
                                            id="ref-for-abortsignal-abort-reason③">中止原因</a> <a data-link-type="dfn"
                                            href="#close-a-subscription" id="ref-for-close-a-subscription⑤">关闭</a>
                                        <var>subscriber</var>。
                                    </p>
                            </ol>
                    </ol>
                <li data-md>
                    <p>如果 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this"
                            id="ref-for-this②④">this</a> 的 <a data-link-type="dfn" href="#observable-subscribe-callback"
                            id="ref-for-observable-subscribe-callback⑤">subscribe callback</a> 是 <code
                            class="idl"><a data-link-type="idl" href="#callbackdef-subscribecallback" id="ref-for-callbackdef-subscribecallback③">SubscribeCallback</a></code>，
                        则以「<var>subscriber</var>」和 "<code>rethrow</code>" <a data-link-type="dfn"
                            href="https://webidl.spec.whatwg.org/#invoke-a-callback-function"
                            id="ref-for-invoke-a-callback-function⑧">调用</a>它。
                    </p>
                    <p>如果 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#an-exception-was-thrown"
                            id="ref-for-an-exception-was-thrown③">抛出了异常 <var>E</var></a>，则以 <var>E</var> 调用
                        <var>subscriber</var> 的 <code
                            class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error①⓪">error()</a></code>
                        方法。
                    </p>
                <li data-md>
                    <p>否则，以 <var>subscriber</var> 运行 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this"
                            id="ref-for-this②⑤">this</a> 的 <a data-link-type="dfn" href="#observable-subscribe-callback"
                            id="ref-for-observable-subscribe-callback⑥">subscribe callback</a> 给出的步骤。
                    </p>
            </ol>
        </div>
        <details class="wpt-tests-block" dir="ltr" lang="zh" open>
            <summary>测试</summary>
            <ul class="wpt-tests-list">
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/dom/observable/tentative/observable-constructor.any.js"
                        title="dom/observable/tentative/observable-constructor.any.js">observable-constructor.any.js</a>
                    <a class="wpt-live"
                        href="http://wpt.live/dom/observable/tentative/observable-constructor.any.js"><small>（在线测试）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/dom/observable/tentative/observable-constructor.any.js"><small>（源码）</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/dom/observable/tentative/observable-constructor.window.js"
                        title="dom/observable/tentative/observable-constructor.window.js">observable-constructor.window.js</a>
                    <a class="wpt-live"
                        href="http://wpt.live/dom/observable/tentative/observable-constructor.window.js"><small>（在线测试）</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/dom/observable/tentative/observable-constructor.window.js"><small>（源码）</small></a>
            </ul>
        </details>
        <h3 class="heading settled" data-level="2.3" id="operators"><span class="secno">2.3. </span><span
                class="content">操作符</span><a class="self-link" href="#operators"></a></h3>
        <p>目前请参见
            <a href="https://github.com/wicg/observable#operators">https://github.com/wicg/observable#operators</a>。
        </p>
        <h4 class="heading settled" data-level="2.3.1" id="observable-from"><span class="secno">2.3.1. </span><span
                class="content"><code
                    class="idl"><a data-link-type="idl" href="#dom-observable-from" id="ref-for-dom-observable-from②">from()</a></code></span><a
                class="self-link" href="#observable-from"></a></h4>
        <div class="algorithm" data-algorithm="from(value)" data-algorithm-for="Observable">

            <dfn class="dfn-paneled idl-code" data-dfn-for="Observable" data-dfn-type="method" data-export
                id="dom-observable-from"><code>from(<var>value</var>)</code></dfn> 方法步骤如下：

            <ol>
                <li data-md>
                    <p>返回 <a data-link-type="dfn" href="#observable-convert-to-an-observable"
                            id="ref-for-observable-convert-to-an-observable①">转换</a> <var>value</var>
                        为 <code
                            class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable②⑥">Observable</a></code>
                        的结果。
                        如有异常则抛出。</p>
            </ol>
        </div>
        <h4 class="heading settled" data-level="2.3.2" id="observable-returning-operators"><span class="secno">2.3.2.
            </span><span class="content"><code
                    class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable②⑦">Observable</a></code>
                返回型操作符</span><a class="self-link" href="#observable-returning-operators"></a></h4>
        <div class="algorithm" data-algorithm="takeUntil(value)" data-algorithm-for="Observable">

            <dfn class="dfn-paneled idl-code" data-dfn-for="Observable" data-dfn-type="method" data-export
                id="dom-observable-takeuntil"><code>takeUntil(<var>value</var>)</code></dfn> 方法步骤如下：

            <ol>
                <li data-md>
                    <p>令 <var>sourceObservable</var> 为 <a data-link-type="dfn"
                            href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②⑥">this</a>。</p>
                <li data-md>
                    <p>令 <var>notifier</var> 为 <a data-link-type="dfn" href="#observable-convert-to-an-observable"
                            id="ref-for-observable-convert-to-an-observable②">
                            转换</a> <var>value</var> 为 <code
                            class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable②⑧">Observable</a></code>
                        的结果。
                    </p>
                <li data-md>
                    <p>令 <var>observable</var> 为 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new"
                            id="ref-for-new④">新建</a>的 <code
                            class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable②⑨">Observable</a></code>，
                        其 <a data-link-type="dfn" href="#observable-subscribe-callback"
                            id="ref-for-observable-subscribe-callback⑦">subscribe callback</a> 是一个接受 <code
                            class="idl"><a data-link-type="idl" href="#subscriber" id="ref-for-subscriber①⑤">Subscriber</a></code>
                        <var>subscriber</var> 的算法，具体如下：
                    </p>
                    <div class="note" role="note">
                        注意：此方法涉及对两个 <code
                            class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable③⓪">Observable</a></code>
                        进行 <a data-link-type="dfn" href="#observable-subscribe-to-an-observable"
                            id="ref-for-observable-subscribe-to-an-observable④">订阅</a>： (1) <var>notifier</var>，(2)
                        <var>sourceObservable</var>。在以下情况我们会从<strong>两者</strong>取消订阅：

                        <ol>
                            <li data-md>
                                <p>当 <var>notifier</var> 开始发出值（无论是 "next" 还是 "error"）。此时，
                                    我们会从 <var>notifier</var> 取消订阅，因为我们已获得所需，不再需要其继续产生值。同时也会从 <var>sourceObservable</var>
                                    取消订阅，
                                    因为它不再需要继续产生用于本方法返回的 <var>observable</var> 的值，因为我们已经手动结束了 <var>observable</var> 的订阅，
                                    因为 <var>notifier</var> 最终产生了值。
                                </p>
                            <li data-md>
                                <p>当 <var>sourceObservable</var> 调用 <code
                                        class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error①①">error()</a></code>
                                    或 <code
                                        class="idl"><a data-link-type="idl" href="#dom-subscriber-complete" id="ref-for-dom-subscriber-complete④">complete()</a></code>。此时，从
                                    <var>notifier</var> 取消订阅，
                                    因为我们不再需要监听其产生的值以决定 <var>observable</var> 何时停止镜像 <var>sourceObservable</var> 的值
                                    （因为 <var>sourceObservable</var> 已自行完成）。无需从 <var>sourceObservable</var> 取消订阅，
                                    因为其订阅已自动结束。
                                </p>
                        </ol>
                    </div>
                    <ol>
                        <li data-md>
                            <p>令 <var>notifierObserver</var> 为新的 <a data-link-type="dfn" href="#internal-observer"
                                    id="ref-for-internal-observer⑤">内部观察者</a>，初始化如下：</p>
                            <dl>
                                <dt data-md><a data-link-type="dfn" href="#internal-observer-next-steps"
                                        id="ref-for-internal-observer-next-steps⑥">next 步骤</a>
                                <dd data-md>
                                    <p>运行 <var>subscriber</var> 的 <code
                                            class="idl"><a data-link-type="idl" href="#dom-subscriber-complete" id="ref-for-dom-subscriber-complete⑤">complete()</a></code>
                                        方法。</p>
                                    <p class="note" role="note"><span class="marker">注意：</span>这会从
                                        <var>sourceObservable</var> 取消订阅，
                                        如果此时已订阅。原因是 <var>sourceObservable</var> 使用 "外部" <var>subscriber</var> 的
                                        <a data-link-type="dfn" href="#subscriber-subscription-controller"
                                            id="ref-for-subscriber-subscription-controller①①">subscription
                                            controller</a> 的
                                        <a data-link-type="dfn"
                                            href="https://dom.spec.whatwg.org/#abortcontroller-signal"
                                            id="ref-for-abortcontroller-signal⑨">signal</a> 作为输入信号，
                                        当上述（或下述）调用 <code
                                            class="idl"><a data-link-type="idl" href="#dom-subscriber-complete" id="ref-for-dom-subscriber-complete⑥">complete()</a></code>
                                        时，
                                        该信号会被 <a data-link-type="dfn"
                                            href="https://dom.spec.whatwg.org#abortsignal-signal-abort"
                                            id="ref-for-abortsignal-signal-abort①">中止</a>。
                                    </p>
                                <dt data-md><a data-link-type="dfn" href="#internal-observer-error-steps"
                                        id="ref-for-internal-observer-error-steps③">error 步骤</a>
                                <dd data-md>
                                    <p>运行 <var>subscriber</var> 的 <code
                                            class="idl"><a data-link-type="idl" href="#dom-subscriber-complete" id="ref-for-dom-subscriber-complete⑦">complete()</a></code>
                                        方法。</p>
                            </dl>
                            <p class="note" role="note"><span class="marker">注意：</span>没有指定 <a data-link-type="dfn"
                                    href="#internal-observer-complete-steps"
                                    id="ref-for-internal-observer-complete-steps②">complete 步骤</a>，
                                因为如果 <var>notifier</var> <code
                                    class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable③①">Observable</a></code>
                                自行完成，
                                我们无需对与该方法返回的 <var>observable</var> 相关的 <var>subscriber</var> 调用 complete。
                                此时 <var>observable</var> 会继续无中断地镜像 <var>sourceObservable</var>。
                            </p>
                        <li data-md>
                            <p>令 <var>options</var> 为新建的 <code
                                    class="idl"><a data-link-type="idl" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions①⓪">SubscribeOptions</a></code>，
                                其 <code
                                    class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal⑨">signal</a></code>
                                是 <var>subscriber</var> 的 <a data-link-type="dfn"
                                    href="#subscriber-subscription-controller"
                                    id="ref-for-subscriber-subscription-controller①②">subscription controller</a> 的
                                <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal"
                                    id="ref-for-abortcontroller-signal①⓪">signal</a>。
                            </p>
                        <li data-md>
                            <p><a data-link-type="dfn" href="#observable-subscribe-to-an-observable"
                                    id="ref-for-observable-subscribe-to-an-observable⑤">订阅</a> <var>notifier</var>，
                                传入 <var>notifierObserver</var> 和 <var>options</var>。
                            </p>
                        <li data-md>
                            <p>如果 <var>subscriber</var> 的 <a data-link-type="dfn" href="#subscriber-active"
                                    id="ref-for-subscriber-active①⓪">active</a> 为 false，则返回。</p>
                            <p class="note" role="note"><span class="marker">注意：</span>这意味着如果 <var>notifier</var> 同步发出值，
                                <var>sourceObservable</var> 的 <a data-link-type="dfn"
                                    href="#observable-subscribe-callback"
                                    id="ref-for-observable-subscribe-callback⑧">subscribe callback</a> 不会被调用。
                                但如果 <var>notifier</var> 仅同步 "complete"（没有发出 "next" 或 "error"），则 <var>subscriber</var> 的
                                <a data-link-type="dfn" href="#subscriber-active"
                                    id="ref-for-subscriber-active①①">active</a> 仍为 true，我们会继续订阅
                                <var>sourceObservable</var>，
                                <var>observable</var> 会无中断地镜像它。
                            </p>
                        <li data-md>
                            <p>令 <var>sourceObserver</var> 为新的 <a data-link-type="dfn" href="#internal-observer"
                                    id="ref-for-internal-observer⑥">内部观察者</a>，初始化如下：</p>
                            <dl>
                                <dt data-md><a data-link-type="dfn" href="#internal-observer-next-steps"
                                        id="ref-for-internal-observer-next-steps⑦">next 步骤</a>
                                <dd data-md>
                                    <p>以传入的 <var>value</var> 调用 <var>subscriber</var> 的 <code
                                            class="idl"><a data-link-type="idl" href="#dom-subscriber-next" id="ref-for-dom-subscriber-next⑥">next()</a></code>
                                        方法。</p>
                                <dt data-md><a data-link-type="dfn" href="#internal-observer-error-steps"
                                        id="ref-for-internal-observer-error-steps④">error 步骤</a>
                                <dd data-md>
                                    <p>以传入的 <var>error</var> 调用 <var>subscriber</var> 的 <code
                                            class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error①②">error()</a></code>
                                        方法。</p>
                                <dt data-md><a data-link-type="dfn" href="#internal-observer-complete-steps"
                                        id="ref-for-internal-observer-complete-steps③">complete 步骤</a>
                                <dd data-md>
                                    <p>运行 <var>subscriber</var> 的 <code
                                            class="idl"><a data-link-type="idl" href="#dom-subscriber-complete" id="ref-for-dom-subscriber-complete⑧">complete()</a></code>
                                        方法。</p>
                            </dl>
                            <p class="note" role="note"><span class="marker">注意：</span> <var>sourceObserver</var> 主要是透传，
                                镜像 <var>sourceObservable</var> 发出的所有内容，唯一例外是当 <var>sourceObservable</var> 被耗尽，
                                在 <var>notifier</var> 尚未产生任何内容时，可以取消订阅 <var>notifier</var> <code
                                    class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable③②">Observable</a></code>。
                            </p>
                        <li data-md>
                            <p><a data-link-type="dfn" href="#observable-subscribe-to-an-observable"
                                    id="ref-for-observable-subscribe-to-an-observable⑥">订阅</a>
                                <var>sourceObservable</var>，
                                传入 <var>sourceObserver</var> 和 <var>options</var>。
                            </p>
                    </ol>
                <li data-md>
                    <p>返回 <var>observable</var>。</p>
            </ol>
            <details class="wpt-tests-block" dir="ltr" lang="zh" open>
                <summary>测试</summary>
                <ul class="wpt-tests-list">
                    <li class="wpt-test"><a class="wpt-name"
                            href="https://wpt.fyi/results/dom/observable/tentative/observable-takeUntil.any.js"
                            title="dom/observable/tentative/observable-takeUntil.any.js">observable-takeUntil.any.js</a>
                        <a class="wpt-live"
                            href="http://wpt.live/dom/observable/tentative/observable-takeUntil.any.js"><small>（在线测试）</small></a>
                        <a class="wpt-source"
                            href="https://github.com/web-platform-tests/wpt/blob/master/dom/observable/tentative/observable-takeUntil.any.js"><small>（源码）</small></a>
                    <li class="wpt-test"><a class="wpt-name"
                            href="https://wpt.fyi/results/dom/observable/tentative/observable-takeUntil.window.js"
                            title="dom/observable/tentative/observable-takeUntil.window.js">observable-takeUntil.window.js</a>
                        <a class="wpt-live"
                            href="http://wpt.live/dom/observable/tentative/observable-takeUntil.window.js"><small>（在线测试）</small></a>
                        <a class="wpt-source"
                            href="https://github.com/web-platform-tests/wpt/blob/master/dom/observable/tentative/observable-takeUntil.window.js"><small>（源码）</small></a>
                </ul>
            </details>
        </div>
        <div class="algorithm" data-algorithm="map(mapper)" data-algorithm-for="Observable">

            <dfn class="dfn-paneled idl-code" data-dfn-for="Observable" data-dfn-type="method" data-export
                id="dom-observable-map"><code>map(<var>mapper</var>)</code></dfn> 方法步骤如下：

            <ol>
                <li data-md>
                    <p>令 <var>sourceObservable</var> 为 <a data-link-type="dfn"
                            href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②⑦">this</a>。</p>
                <li data-md>
                    <p>令 <var>observable</var> 为 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new"
                            id="ref-for-new⑤">新建</a>的 <code
                            class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable③③">Observable</a></code>，
                        其 <a data-link-type="dfn" href="#observable-subscribe-callback"
                            id="ref-for-observable-subscribe-callback⑨">subscribe callback</a> 是一个接受 <code
                            class="idl"><a data-link-type="idl" href="#subscriber" id="ref-for-subscriber①⑥">Subscriber</a></code>
                        <var>subscriber</var> 的算法，具体如下：
                    </p>
                    <ol>
                        <li data-md>
                            <p>令 <var>idx</var> 为 <code
                                    class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long" id="ref-for-idl-unsigned-long-long⑥">unsigned long long</a></code>，初始为
                                0。</p>
                        <li data-md>
                            <p>令 <var>sourceObserver</var> 为新的 <a data-link-type="dfn" href="#internal-observer"
                                    id="ref-for-internal-observer⑦">内部观察者</a>，初始化如下：</p>
                            <dl>
                                <dt data-md><a data-link-type="dfn" href="#internal-observer-next-steps"
                                        id="ref-for-internal-observer-next-steps⑧">next 步骤</a>
                                <dd data-md>
                                    <ol>
                                        <li data-md>
                                            <p><a data-link-type="dfn"
                                                    href="https://webidl.spec.whatwg.org/#invoke-a-callback-function"
                                                    id="ref-for-invoke-a-callback-function⑨">调用</a>
                                                <var>mapper</var>，参数为「传入的 <var>value</var>，<var>idx</var>」和
                                                "<code>rethrow</code>"；令 <var>mappedValue</var> 为返回值。
                                            </p>
                                            <p>如果 <a data-link-type="dfn"
                                                    href="https://webidl.spec.whatwg.org/#an-exception-was-thrown"
                                                    id="ref-for-an-exception-was-thrown④">抛出异常 <var>E</var></a>，
                                                则以 <var>E</var> 调用 <var>subscriber</var> 的 <code
                                                    class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error①③">error()</a></code>
                                                方法，并终止这些步骤。</p>
                                        <li data-md>
                                            <p>递增 <var>idx</var>。</p>
                                        <li data-md>
                                            <p>以 <var>mappedValue</var> 调用 <var>subscriber</var> 的 <code
                                                    class="idl"><a data-link-type="idl" href="#dom-subscriber-next" id="ref-for-dom-subscriber-next⑦">next()</a></code>
                                                方法。</p>
                                    </ol>
                                <dt data-md><a data-link-type="dfn" href="#internal-observer-error-steps"
                                        id="ref-for-internal-observer-error-steps⑤">error 步骤</a>
                                <dd data-md>
                                    <p>以传入的 <var>error</var> 调用 <var>subscriber</var> 的 <code
                                            class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error①④">error()</a></code>
                                        方法。</p>
                                <dt data-md><a data-link-type="dfn" href="#internal-observer-complete-steps"
                                        id="ref-for-internal-observer-complete-steps④">complete 步骤</a>
                                <dd data-md>
                                    <p>调用 <var>subscriber</var> 的 <code
                                            class="idl"><a data-link-type="idl" href="#dom-subscriber-complete" id="ref-for-dom-subscriber-complete⑨">complete()</a></code>
                                        方法。</p>
                            </dl>
                        <li data-md>
                            <p>令 <var>options</var> 为新建的 <code
                                    class="idl"><a data-link-type="idl" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions①①">SubscribeOptions</a></code>，
                                其 <code
                                    class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal①⓪">signal</a></code>
                                为 <var>subscriber</var> 的 <a data-link-type="dfn"
                                    href="#subscriber-subscription-controller"
                                    id="ref-for-subscriber-subscription-controller①③">subscription controller</a> 的 <a
                                    data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal"
                                    id="ref-for-abortcontroller-signal①①">signal</a>。
                            </p>
                        <li data-md>
                            <p><a data-link-type="dfn" href="#observable-subscribe-to-an-observable"
                                    id="ref-for-observable-subscribe-to-an-observable⑦">订阅</a>
                                <var>sourceObservable</var>，
                                传入 <var>sourceObserver</var> 和 <var>options</var>。
                            </p>
                    </ol>
                <li data-md>
                    <p>返回 <var>observable</var>。</p>
            </ol>
            <details class="wpt-tests-block" dir="ltr" lang="en" open>
                <summary>测试</summary>
                <ul class="wpt-tests-list">
                    <li class="wpt-test"><a class="wpt-name"
                            href="https://wpt.fyi/results/dom/observable/tentative/observable-map.any.js"
                            title="dom/observable/tentative/observable-map.any.js">observable-map.any.js</a> <a
                            class="wpt-live"
                            href="http://wpt.live/dom/observable/tentative/observable-map.any.js"><small>(在线测试)</small></a>
                        <a class="wpt-source"
                            href="https://github.com/web-platform-tests/wpt/blob/master/dom/observable/tentative/observable-map.any.js"><small>(源码)</small></a>
                    <li class="wpt-test"><a class="wpt-name"
                            href="https://wpt.fyi/results/dom/observable/tentative/observable-map.window.js"
                            title="dom/observable/tentative/observable-map.window.js">observable-map.window.js</a> <a
                            class="wpt-live"
                            href="http://wpt.live/dom/observable/tentative/observable-map.window.js"><small>(在线测试)</small></a>
                        <a class="wpt-source"
                            href="https://github.com/web-platform-tests/wpt/blob/master/dom/observable/tentative/observable-map.window.js"><small>(源码)</small></a>
                </ul>
            </details>
        </div>
        <div class="algorithm" data-algorithm="filter(predicate)" data-algorithm-for="Observable">

            <dfn class="dfn-paneled idl-code" data-dfn-for="Observable" data-dfn-type="method" data-export
                id="dom-observable-filter"><code>filter(<var>predicate</var>)</code></dfn> 方法步骤如下：

            <ol>
                <li data-md>
                    <p>令 <var>sourceObservable</var> 为 <a data-link-type="dfn"
                            href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②⑧">this</a>。</p>
                <li data-md>
                    <p>令 <var>observable</var> 为 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new"
                            id="ref-for-new⑥">新建</a>的 <code
                            class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable③④">Observable</a></code>，
                        其 <a data-link-type="dfn" href="#observable-subscribe-callback"
                            id="ref-for-observable-subscribe-callback①⓪">subscribe callback</a> 是一个接受 <code
                            class="idl"><a data-link-type="idl" href="#subscriber" id="ref-for-subscriber①⑦">Subscriber</a></code>
                        <var>subscriber</var> 的算法，具体如下：
                    </p>
                    <ol>
                        <li data-md>
                            <p>令 <var>idx</var> 为 <code
                                    class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long" id="ref-for-idl-unsigned-long-long⑦">unsigned long long</a></code>，初始为
                                0。</p>
                        <li data-md>
                            <p>令 <var>sourceObserver</var> 为新的 <a data-link-type="dfn" href="#internal-observer"
                                    id="ref-for-internal-observer⑧">内部观察者</a>，初始化如下：</p>
                            <dl>
                                <dt data-md><a data-link-type="dfn" href="#internal-observer-next-steps"
                                        id="ref-for-internal-observer-next-steps⑨">next 步骤</a>
                                <dd data-md>
                                    <ol>
                                        <li data-md>
                                            <p><a data-link-type="dfn"
                                                    href="https://webidl.spec.whatwg.org/#invoke-a-callback-function"
                                                    id="ref-for-invoke-a-callback-function①⓪">调用</a>
                                                <var>predicate</var>，参数为「传入的 <var>value</var>，<var>idx</var>」和
                                                "<code>rethrow</code>"；令 <var>matches</var> 为返回值。
                                            </p>
                                            <p>如果 <a data-link-type="dfn"
                                                    href="https://webidl.spec.whatwg.org/#an-exception-was-thrown"
                                                    id="ref-for-an-exception-was-thrown⑤">抛出异常 <var>E</var></a>，
                                                则以 <var>E</var> 调用 <var>subscriber</var> 的 <code
                                                    class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error①⑤">error()</a></code>
                                                方法，并终止这些步骤。</p>
                                        <li data-md>
                                            <p>将 <var>idx</var> 设为 <var>idx</var> + 1。</p>
                                        <li data-md>
                                            <p>如果 <var>matches</var> 为 true，则以 <var>value</var> 调用 <var>subscriber</var>
                                                的 <code
                                                    class="idl"><a data-link-type="idl" href="#dom-subscriber-next" id="ref-for-dom-subscriber-next⑧">next()</a></code>
                                                方法。</p>
                                    </ol>
                                <dt data-md><a data-link-type="dfn" href="#internal-observer-error-steps"
                                        id="ref-for-internal-observer-error-steps⑥">error 步骤</a>
                                <dd data-md>
                                    <p>以传入的 <var>error</var> 调用 <var>subscriber</var> 的 <code
                                            class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error①⑥">error()</a></code>
                                        方法。</p>
                                <dt data-md><a data-link-type="dfn" href="#internal-observer-complete-steps"
                                        id="ref-for-internal-observer-complete-steps⑤">complete 步骤</a>
                                <dd data-md>
                                    <p>调用 <var>subscriber</var> 的 <code
                                            class="idl"><a data-link-type="idl" href="#dom-subscriber-complete" id="ref-for-dom-subscriber-complete①⓪">complete()</a></code>
                                        方法。</p>
                            </dl>
                        <li data-md>
                            <p>令 <var>options</var> 为新建的 <code
                                    class="idl"><a data-link-type="idl" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions①②">SubscribeOptions</a></code>，
                                其 <code
                                    class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal①①">signal</a></code>
                                为 <var>subscriber</var> 的 <a data-link-type="dfn"
                                    href="#subscriber-subscription-controller"
                                    id="ref-for-subscriber-subscription-controller①④">subscription controller</a> 的 <a
                                    data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal"
                                    id="ref-for-abortcontroller-signal①②">signal</a>。
                            </p>
                        <li data-md>
                            <p><a data-link-type="dfn" href="#observable-subscribe-to-an-observable"
                                    id="ref-for-observable-subscribe-to-an-observable⑧">订阅</a>
                                <var>sourceObservable</var>，
                                传入 <var>sourceObserver</var> 和 <var>options</var>。
                            </p>
                    </ol>
                <li data-md>
                    <p>返回 <var>observable</var>。</p>
            </ol>
            <details class="wpt-tests-block" dir="ltr" lang="en" open>
                <summary>测试</summary>
                <ul class="wpt-tests-list">
                    <li class="wpt-test"><a class="wpt-name"
                            href="https://wpt.fyi/results/dom/observable/tentative/observable-filter.any.js"
                            title="dom/observable/tentative/observable-filter.any.js">observable-filter.any.js</a> <a
                            class="wpt-live"
                            href="http://wpt.live/dom/observable/tentative/observable-filter.any.js"><small>(在线测试)</small></a>
                        <a class="wpt-source"
                            href="https://github.com/web-platform-tests/wpt/blob/master/dom/observable/tentative/observable-filter.any.js"><small>(源码)</small></a>
                </ul>
            </details>
        </div>
        <div class="algorithm" data-algorithm="take(amount)" data-algorithm-for="Observable">

            <dfn class="dfn-paneled idl-code" data-dfn-for="Observable" data-dfn-type="method" data-export
                id="dom-observable-take"><code>take(<var>amount</var>)</code></dfn> 方法步骤如下：

            <ol>
                <li data-md>
                    <p>令 <var>sourceObservable</var> 为 <a data-link-type="dfn"
                            href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②⑨">this</a>。</p>
                <li data-md>
                    <p>令 <var>observable</var> 为 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new"
                            id="ref-for-new⑦">新建</a>的 <code
                            class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable③⑤">Observable</a></code>，
                        其 <a data-link-type="dfn" href="#observable-subscribe-callback"
                            id="ref-for-observable-subscribe-callback①①">subscribe callback</a> 是一个接受 <code
                            class="idl"><a data-link-type="idl" href="#subscriber" id="ref-for-subscriber①⑧">Subscriber</a></code>
                        <var>subscriber</var> 的算法，具体如下：
                    </p>
                    <ol>
                        <li data-md>
                            <p>令 <var>remaining</var> 为 <var>amount</var>。</p>
                        <li data-md>
                            <p>如果 <var>remaining</var> 为 0，则运行 <var>subscriber</var> 的 <code
                                    class="idl"><a data-link-type="idl" href="#dom-subscriber-complete" id="ref-for-dom-subscriber-complete①①">complete()</a></code>
                                方法并终止这些步骤。</p>
                        <li data-md>
                            <p>令 <var>sourceObserver</var> 为新的 <a data-link-type="dfn" href="#internal-observer"
                                    id="ref-for-internal-observer⑨">内部观察者</a>，初始化如下：</p>
                            <dl>
                                <dt data-md><a data-link-type="dfn" href="#internal-observer-next-steps"
                                        id="ref-for-internal-observer-next-steps①⓪">next 步骤</a>
                                <dd data-md>
                                    <ol>
                                        <li data-md>
                                            <p>以传入的 <var>value</var> 调用 <var>subscriber</var> 的 <code
                                                    class="idl"><a data-link-type="idl" href="#dom-subscriber-next" id="ref-for-dom-subscriber-next⑨">next()</a></code>
                                                方法。</p>
                                        <li data-md>
                                            <p>递减 <var>remaining</var>。</p>
                                        <li data-md>
                                            <p>如果 <var>remaining</var> 为 0，则运行 <var>subscriber</var> 的 <code
                                                    class="idl"><a data-link-type="idl" href="#dom-subscriber-complete" id="ref-for-dom-subscriber-complete①②">complete()</a></code>
                                                方法。</p>
                                    </ol>
                                <dt data-md><a data-link-type="dfn" href="#internal-observer-error-steps"
                                        id="ref-for-internal-observer-error-steps⑦">error 步骤</a>
                                <dd data-md>
                                    <p>以传入的 <var>error</var> 调用 <var>subscriber</var> 的 <code
                                            class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error①⑦">error()</a></code>
                                        方法。</p>
                                <dt data-md><a data-link-type="dfn" href="#internal-observer-complete-steps"
                                        id="ref-for-internal-observer-complete-steps⑥">complete 步骤</a>
                                <dd data-md>
                                    <p>调用 <var>subscriber</var> 的 <code
                                            class="idl"><a data-link-type="idl" href="#dom-subscriber-complete" id="ref-for-dom-subscriber-complete①③">complete()</a></code>
                                        方法。</p>
                            </dl>
                        <li data-md>
                            <p>令 <var>options</var> 为新建的 <code
                                    class="idl"><a data-link-type="idl" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions①③">SubscribeOptions</a></code>，
                                其 <code
                                    class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal①②">signal</a></code>
                                为 <var>subscriber</var> 的 <a data-link-type="dfn"
                                    href="#subscriber-subscription-controller"
                                    id="ref-for-subscriber-subscription-controller①⑤">subscription controller</a> 的 <a
                                    data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal"
                                    id="ref-for-abortcontroller-signal①③">signal</a>。
                            </p>
                        <li data-md>
                            <p><a data-link-type="dfn" href="#observable-subscribe-to-an-observable"
                                    id="ref-for-observable-subscribe-to-an-observable⑨">订阅</a>
                                <var>sourceObservable</var>，
                                传入 <var>sourceObserver</var> 和 <var>options</var>。
                            </p>
                    </ol>
                <li data-md>
                    <p>返回 <var>observable</var>。</p>
            </ol>
            <details class="wpt-tests-block" dir="ltr" lang="en" open>
                <summary>测试</summary>
                <ul class="wpt-tests-list">
                    <li class="wpt-test"><a class="wpt-name"
                            href="https://wpt.fyi/results/dom/observable/tentative/observable-take.any.js"
                            title="dom/observable/tentative/observable-take.any.js">observable-take.any.js</a> <a
                            class="wpt-live"
                            href="http://wpt.live/dom/observable/tentative/observable-take.any.js"><small>(在线测试)</small></a>
                        <a class="wpt-source"
                            href="https://github.com/web-platform-tests/wpt/blob/master/dom/observable/tentative/observable-take.any.js"><small>(源码)</small></a>
                </ul>
            </details>
        </div>
        <div class="algorithm" data-algorithm="drop(amount)" data-algorithm-for="Observable">

            <dfn class="dfn-paneled idl-code" data-dfn-for="Observable" data-dfn-type="method" data-export
                id="dom-observable-drop"><code>drop(<var>amount</var>)</code></dfn> 方法步骤如下：

            <ol>
                <li data-md>
                    <p>令 <var>sourceObservable</var> 为 <a data-link-type="dfn"
                            href="https://webidl.spec.whatwg.org/#this" id="ref-for-this③⓪">this</a>。</p>
                <li data-md>
                    <p>令 <var>observable</var> 为 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new"
                            id="ref-for-new⑧">新建</a>的 <code
                            class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable③⑥">Observable</a></code>，
                        其 <a data-link-type="dfn" href="#observable-subscribe-callback"
                            id="ref-for-observable-subscribe-callback①②">subscribe callback</a> 是一个接受 <code
                            class="idl"><a data-link-type="idl" href="#subscriber" id="ref-for-subscriber①⑨">Subscriber</a></code>
                        <var>subscriber</var> 的算法，具体如下：
                    </p>
                    <ol>
                        <li data-md>
                            <p>令 <var>remaining</var> 为 <var>amount</var>。</p>
                        <li data-md>
                            <p>令 <var>sourceObserver</var> 为新的 <a data-link-type="dfn" href="#internal-observer"
                                    id="ref-for-internal-observer①⓪">内部观察者</a>，初始化如下：</p>
                            <dl>
                                <dt data-md><a data-link-type="dfn" href="#internal-observer-next-steps"
                                        id="ref-for-internal-observer-next-steps①①">next 步骤</a>
                                <dd data-md>
                                    <ol>
                                        <li data-md>
                                            <p>如果 <var>remaining</var> > 0，则递减 <var>remaining</var> 并终止这些步骤。</p>
                                        <li data-md>
                                            <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert"
                                                    id="ref-for-assert⑦">断言</a>：<var>remaining</var> 为 0。</p>
                                        <li data-md>
                                            <p>以传入的 <var>value</var> 调用 <var>subscriber</var> 的 <code
                                                    class="idl"><a data-link-type="idl" href="#dom-subscriber-next" id="ref-for-dom-subscriber-next①⓪">next()</a></code>
                                                方法。</p>
                                    </ol>
                                <dt data-md><a data-link-type="dfn" href="#internal-observer-error-steps"
                                        id="ref-for-internal-observer-error-steps⑧">error 步骤</a>
                                <dd data-md>
                                    <p>以传入的 <var>error</var> 调用 <var>subscriber</var> 的 <code
                                            class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error①⑧">error()</a></code>
                                        方法。</p>
                                <dt data-md><a data-link-type="dfn" href="#internal-observer-complete-steps"
                                        id="ref-for-internal-observer-complete-steps⑦">complete 步骤</a>
                                <dd data-md>
                                    <p>调用 <var>subscriber</var> 的 <code
                                            class="idl"><a data-link-type="idl" href="#dom-subscriber-complete" id="ref-for-dom-subscriber-complete①④">complete()</a></code>
                                        方法。</p>
                            </dl>
                        <li data-md>
                            <p>令 <var>options</var> 为新建的 <code
                                    class="idl"><a data-link-type="idl" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions①④">SubscribeOptions</a></code>，
                                其 <code
                                    class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal①③">signal</a></code>
                                为 <var>subscriber</var> 的 <a data-link-type="dfn"
                                    href="#subscriber-subscription-controller"
                                    id="ref-for-subscriber-subscription-controller①⑥">subscription controller</a> 的 <a
                                    data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal"
                                    id="ref-for-abortcontroller-signal①④">signal</a>。
                            </p>
                        <li data-md>
                            <p><a data-link-type="dfn" href="#observable-subscribe-to-an-observable"
                                    id="ref-for-observable-subscribe-to-an-observable①⓪">订阅</a>
                                <var>sourceObservable</var>，
                                传入 <var>sourceObserver</var> 和 <var>options</var>。
                            </p>
                    </ol>
                <li data-md>
                    <p>返回 <var>observable</var>。</p>
            </ol>
            <details class="wpt-tests-block" dir="ltr" lang="en" open>
                <summary>测试</summary>
                <ul class="wpt-tests-list">
                    <li class="wpt-test"><a class="wpt-name"
                            href="https://wpt.fyi/results/dom/observable/tentative/observable-drop.any.js"
                            title="dom/observable/tentative/observable-drop.any.js">observable-drop.any.js</a> <a
                            class="wpt-live"
                            href="http://wpt.live/dom/observable/tentative/observable-drop.any.js"><small>(在线测试)</small></a>
                        <a class="wpt-source"
                            href="https://github.com/web-platform-tests/wpt/blob/master/dom/observable/tentative/observable-drop.any.js"><small>(源码)</small></a>
                </ul>
            </details>
        </div>
        <div class="algorithm" data-algorithm="flatMap(mapper)" data-algorithm-for="Observable">

            <dfn class="dfn-paneled idl-code" data-dfn-for="Observable" data-dfn-type="method" data-export
                id="dom-observable-flatmap"><code>flatMap(<var>mapper</var>)</code></dfn> 方法步骤如下：

            <ol>
                <li data-md>
                    <p>令 <var>sourceObservable</var> 为 <a data-link-type="dfn"
                            href="https://webidl.spec.whatwg.org/#this" id="ref-for-this③①">this</a>。</p>
                <li data-md>
                    <p>令 <var>observable</var> 为 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new"
                            id="ref-for-new⑨">新建</a>的 <code
                            class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable③⑦">Observable</a></code>，
                        其 <a data-link-type="dfn" href="#observable-subscribe-callback"
                            id="ref-for-observable-subscribe-callback①③">subscribe callback</a> 是一个接受 <code
                            class="idl"><a data-link-type="idl" href="#subscriber" id="ref-for-subscriber②⓪">Subscriber</a></code>
                        <var>subscriber</var> 的算法，具体如下：
                    </p>
                    <ol>
                        <li data-md>
                            <p>令 <var>idx</var> 为 <code
                                    class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long" id="ref-for-idl-unsigned-long-long⑧">unsigned long long</a></code>，初始为
                                0。</p>
                        <li data-md>
                            <p>令 <var>outerSubscriptionHasCompleted</var> 为 <a data-link-type="dfn"
                                    href="https://infra.spec.whatwg.org/#boolean" id="ref-for-boolean">boolean</a>，初始为
                                false。</p>
                        <li data-md>
                            <p>令 <var>queue</var> 为新的 <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list"
                                    id="ref-for-list①">列表</a>，元素类型为 <code
                                    class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any②⑨">any</a></code>，初始为空。
                            </p>
                            <p class="note" role="note"><span class="marker">注意：</span>该 <var>queue</var> 用于存储
                                <var>sourceObservable</var> 发出的所有 <code
                                    class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable③⑧">Observable</a></code>，
                                当 <var>observable</var> 当前正在订阅某个较早由 <var>sourceObservable</var> 发出的且尚未耗尽的 <code
                                    class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable③⑨">Observable</a></code>
                                时。
                            </p>
                        <li data-md>
                            <p>令 <var>activeInnerSubscription</var> 为 <a data-link-type="dfn"
                                    href="https://infra.spec.whatwg.org/#boolean" id="ref-for-boolean①">boolean</a>，初始为
                                false。</p>
                        <li data-md>
                            <p>令 <var>sourceObserver</var> 为新的 <a data-link-type="dfn" href="#internal-observer"
                                    id="ref-for-internal-observer①①">内部观察者</a>，初始化如下：</p>
                            <dl>
                                <dt data-md><a data-link-type="dfn" href="#internal-observer-next-steps"
                                        id="ref-for-internal-observer-next-steps①②">next 步骤</a>
                                <dd data-md>
                                    <ol>
                                        <li data-md>
                                            <p>如果 <var>activeInnerSubscription</var> 为 true：</p>
                                            <ol>
                                                <li data-md>
                                                    <p><a data-link-type="dfn"
                                                            href="https://infra.spec.whatwg.org/#list-append"
                                                            id="ref-for-list-append①">追加</a> <var>value</var> 到
                                                        <var>queue</var>。
                                                    </p>
                                                    <p class="note" role="note"><span class="marker">注意：</span>该
                                                        <var>value</var> 会在当前 <code
                                                            class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable④⓪">Observable</a></code>
                                                        订阅结束后处理。
                                                    </p>
                                            </ol>
                                        <li data-md>
                                            <p>否则：</p>
                                            <ol>
                                                <li data-md>
                                                    <p>将 <var>activeInnerSubscription</var> 设为 true。</p>
                                                <li data-md>
                                                    <p>以 <var>value</var>、<var>subscriber</var>、<var>mapper</var>，
                                                        以及对以下变量的引用：<var>queue</var>、<var>activeInnerSubscription</var>、<var>outerSubscriptionHasCompleted</var>、<var>idx</var>
                                                        运行 <a data-link-type="dfn"
                                                            href="#flatmap-process-next-value-steps"
                                                            id="ref-for-flatmap-process-next-value-steps">flatmap
                                                            处理下一个值步骤</a>。</p>
                                                    <div class="note" role="note">
                                                        <p>注意：该 <a data-link-type="dfn"
                                                                href="#flatmap-process-next-value-steps"
                                                                id="ref-for-flatmap-process-next-value-steps①">flatmap
                                                                处理下一个值步骤</a> 会订阅由 <var>value</var> 派生的 <code
                                                                class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable④①">Observable</a></code>（如果能派生）并持续处理其值，直到订阅失效（错误或完成）。如果该“内部”
                                                            <code
                                                                class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable④②">Observable</a></code>
                                                            完成，则处理步骤会递归调用自身，处理 <var>queue</var> 下一个值。
                                                        </p>
                                                        <p>如果不存在下一个值，则处理步骤终止，<b>取消设置</b>
                                                            <var>activeInnerSubscription</var>，以便后续
                                                            <var>sourceObservable</var> 产生的值能正确处理。
                                                        </p>
                                                    </div>
                                            </ol>
                                    </ol>
                                <dt data-md><a data-link-type="dfn" href="#internal-observer-error-steps"
                                        id="ref-for-internal-observer-error-steps⑨">error 步骤</a>
                                <dd data-md>
                                    <p>以传入的 <var>error</var> 调用 <var>subscriber</var> 的 <code
                                            class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error①⑨">error()</a></code>
                                        方法。</p>
                                <dt data-md><a data-link-type="dfn" href="#internal-observer-complete-steps"
                                        id="ref-for-internal-observer-complete-steps⑧">complete 步骤</a>
                                <dd data-md>
                                    <ol>
                                        <li data-md>
                                            <p>将 <var>outerSubscriptionHasCompleted</var> 设为 true。</p>
                                            <p class="note" role="note"><span class="marker">注意：</span>如果
                                                <var>activeInnerSubscription</var> 为 true，下面的步骤不会完成
                                                <var>subscriber</var>。此时，<a data-link-type="dfn"
                                                    href="#flatmap-process-next-value-steps"
                                                    id="ref-for-flatmap-process-next-value-steps②">flatmap 处理下一个值步骤</a>
                                                会在 <var>queue</var> 为空且“内部”订阅失效后负责完成 <var>subscriber</var>。
                                            </p>
                                        <li data-md>
                                            <p>如果 <var>activeInnerSubscription</var> 为 false 且 <var>queue</var> 为空，则运行
                                                <var>subscriber</var> 的 <code
                                                    class="idl"><a data-link-type="idl" href="#dom-subscriber-complete" id="ref-for-dom-subscriber-complete①⑤">complete()</a></code>
                                                方法。
                                            </p>
                                    </ol>
                            </dl>
                        <li data-md>
                            <p>令 <var>options</var> 为新建的 <code
                                    class="idl"><a data-link-type="idl" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions①⑤">SubscribeOptions</a></code>，
                                其 <code
                                    class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal①④">signal</a></code>
                                为 <var>subscriber</var> 的 <a data-link-type="dfn"
                                    href="#subscriber-subscription-controller"
                                    id="ref-for-subscriber-subscription-controller①⑦">subscription controller</a> 的 <a
                                    data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal"
                                    id="ref-for-abortcontroller-signal①⑤">signal</a>。
                            </p>
                        <li data-md>
                            <p><a data-link-type="dfn" href="#observable-subscribe-to-an-observable"
                                    id="ref-for-observable-subscribe-to-an-observable①①">订阅</a>
                                <var>sourceObservable</var>，
                                传入 <var>sourceObserver</var> 和 <var>options</var>。
                            </p>
                    </ol>
                <li data-md>
                    <p>返回 <var>observable</var>。</p>
            </ol>
        </div>
        <div class="algorithm" data-algorithm="flatmap process next value steps">

            <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="flatmap-process-next-value-steps">flatmap
                处理下一个值步骤</dfn>，给定 <code
                class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any③①">any</a></code>
            <var>value</var>、<code
                class="idl"><a data-link-type="idl" href="#subscriber" id="ref-for-subscriber②①">Subscriber</a></code>
            <var>subscriber</var>、<code
                class="idl"><a data-link-type="idl" href="#callbackdef-mapper" id="ref-for-callbackdef-mapper③">Mapper</a></code>
            <var>mapper</var>，以及对以下所有变量的引用：<a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list"
                id="ref-for-list②">列表</a>类型的
            <code
                class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any③②">any</a></code>
            值 <var>queue</var>、<a data-link-type="dfn" href="https://infra.spec.whatwg.org/#boolean"
                id="ref-for-boolean②">boolean</a> <var>activeInnerSubscription</var>、<a data-link-type="dfn"
                href="https://infra.spec.whatwg.org/#boolean" id="ref-for-boolean③">boolean</a>
            <var>outerSubscriptionHasCompleted</var>，以及 <code
                class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long" id="ref-for-idl-unsigned-long-long⑨">unsigned long long</a></code>
            <var>idx</var>：

            <ol>
                <li data-md>
                    <p>令 <var>mappedResult</var> 为 <a data-link-type="dfn"
                            href="https://webidl.spec.whatwg.org/#invoke-a-callback-function"
                            id="ref-for-invoke-a-callback-function①①">调用</a> <var>mapper</var>，参数为 «<var>value</var>,
                        <var>idx</var>» 和 "<code>rethrow</code>" 的结果。
                    </p>
                    <p>如果 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#an-exception-was-thrown"
                            id="ref-for-an-exception-was-thrown⑥">抛出异常 <var>E</var></a>，则以 <var>E</var> 运行
                        <var>subscriber</var> 的 <code
                            class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error②⓪">error()</a></code>
                        方法，并终止这些步骤。
                    </p>
                <li data-md>
                    <p>将 <var>idx</var> 设为 <var>idx</var> + 1。</p>
                <li data-md>
                    <p>令 <var>innerObservable</var> 为调用 <code
                            class="idl"><a data-link-type="idl" href="#dom-observable-from" id="ref-for-dom-observable-from③">from()</a></code>，参数为
                        <var>mappedResult</var> 的结果。
                    </p>
                    <p>如果 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#an-exception-was-thrown"
                            id="ref-for-an-exception-was-thrown⑦">抛出异常 <var>E</var></a>，则以 <var>E</var> 运行
                        <var>subscriber</var> 的 <code
                            class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error②①">error()</a></code>
                        方法，并终止这些步骤。
                    </p>
                    <p class="issue" id="issue-4eb2abb1"><a class="self-link" href="#issue-4eb2abb1"></a> 不应该直接调用 <code
                            class="idl"><a data-link-type="idl" href="#dom-observable-from" id="ref-for-dom-observable-from④">from()</a></code>，应调用某个内部算法以便异常能正确传递到
                        <var>subscriber</var>。
                    </p>
                <li data-md>
                    <p>令 <var>innerObserver</var> 为新建的 <a data-link-type="dfn" href="#internal-observer"
                            id="ref-for-internal-observer①②">内部观察者</a>，初始化如下：</p>
                    <dl>
                        <dt data-md><a data-link-type="dfn" href="#internal-observer-next-steps"
                                id="ref-for-internal-observer-next-steps①③">next 步骤</a>
                        <dd data-md>
                            <p>以传入的 <var>value</var> 调用 <var>subscriber</var> 的 <code
                                    class="idl"><a data-link-type="idl" href="#dom-subscriber-next" id="ref-for-dom-subscriber-next①①">next()</a></code>
                                方法。</p>
                        <dt data-md><a data-link-type="dfn" href="#internal-observer-error-steps"
                                id="ref-for-internal-observer-error-steps①⓪">error 步骤</a>
                        <dd data-md>
                            <p>以传入的 <var>error</var> 调用 <var>subscriber</var> 的 <code
                                    class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error②②">error()</a></code>
                                方法。</p>
                        <dt data-md><a data-link-type="dfn" href="#internal-observer-complete-steps"
                                id="ref-for-internal-observer-complete-steps⑨">complete 步骤</a>
                        <dd data-md>
                            <ol>
                                <li data-md>
                                    <p>如果 <var>queue</var> 非空：</p>
                                    <ol>
                                        <li data-md>
                                            <p>令 <var>nextValue</var> 为 <var>queue</var> 的第一个元素；<a data-link-type="dfn"
                                                    href="https://infra.spec.whatwg.org/#list-remove"
                                                    id="ref-for-list-remove③">移除</a>该元素。</p>
                                        <li data-md>
                                            <p>以 <var>nextValue</var>、<var>subscriber</var>、<var>mapper</var>、以及对
                                                <var>queue</var> 和 <var>activeInnerSubscription</var> 的引用，
                                                运行 <a data-link-type="dfn" href="#flatmap-process-next-value-steps"
                                                    id="ref-for-flatmap-process-next-value-steps③">flatmap 处理下一个值步骤</a>。
                                            </p>
                                    </ol>
                                <li data-md>
                                    <p>否则：</p>
                                    <ol>
                                        <li data-md>
                                            <p>将 <var>activeInnerSubscription</var> 设为 false。</p>
                                            <p class="note" role="note"><span class="marker">注意：</span> 由于
                                                <var>activeInnerSubscription</var> 是引用类型，这能确保后续“外部” <code
                                                    class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable④③">Observable</a></code>
                                                （即 <var>sourceObservable</var>）产生的所有值都能被正确处理。
                                            </p>
                                        <li data-md>
                                            <p>如果 <var>outerSubscriptionHasCompleted</var> 为 true，则运行
                                                <var>subscriber</var> 的 <code
                                                    class="idl"><a data-link-type="idl" href="#dom-subscriber-complete" id="ref-for-dom-subscriber-complete①⑥">complete()</a></code>
                                                方法。
                                            </p>
                                            <p class="note" role="note"><span class="marker">注意：</span> 这表示“外部” <code
                                                    class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable④④">Observable</a></code>
                                                已经完成，但因为还有至少一个待处理的“内部” <code
                                                    class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable④⑤">Observable</a></code>（即
                                                <var>innerObservable</var>）尚未完成，所以直到现在才真正完成 <var>subscriber</var>。
                                            </p>
                                    </ol>
                            </ol>
                    </dl>
                <li data-md>
                    <p>令 <var>innerOptions</var> 为新建的 <code
                            class="idl"><a data-link-type="idl" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions①⑥">SubscribeOptions</a></code>，
                        其 <code
                            class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal①⑤">signal</a></code>
                        为 <var>subscriber</var> 的 <a data-link-type="dfn" href="#subscriber-subscription-controller"
                            id="ref-for-subscriber-subscription-controller①⑧">subscription controller</a> 的 <a
                            data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal"
                            id="ref-for-abortcontroller-signal①⑥">signal</a>。
                    </p>
                <li data-md>
                    <p><a data-link-type="dfn" href="#observable-subscribe-to-an-observable"
                            id="ref-for-observable-subscribe-to-an-observable①②">订阅</a> <var>innerObservable</var>，
                        传入 <var>innerObserver</var> 和 <var>innerOptions</var>。
                    </p>
            </ol>
        </div>
        <div class="algorithm" data-algorithm="switchMap(mapper)" data-algorithm-for="Observable">

            <dfn class="dfn-paneled idl-code" data-dfn-for="Observable" data-dfn-type="method" data-export
                id="dom-observable-switchmap"><code>switchMap(<var>mapper</var>)</code></dfn> 方法步骤如下：

            <ol>
                <li data-md>
                    <p>令 <var>sourceObservable</var> 为 <a data-link-type="dfn"
                            href="https://webidl.spec.whatwg.org/#this" id="ref-for-this③②">this</a>。</p>
                <li data-md>
                    <p>令 <var>observable</var> 为 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new"
                            id="ref-for-new①⓪">新建</a>的 <code
                            class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable④⑥">Observable</a></code>，
                        其 <a data-link-type="dfn" href="#observable-subscribe-callback"
                            id="ref-for-observable-subscribe-callback①④">subscribe callback</a> 是一个接受 <code
                            class="idl"><a data-link-type="idl" href="#subscriber" id="ref-for-subscriber②②">Subscriber</a></code>
                        <var>subscriber</var> 的算法，具体如下：
                    </p>
                    <ol>
                        <li data-md>
                            <p>令 <var>idx</var> 为 <code
                                    class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long" id="ref-for-idl-unsigned-long-long①⓪">unsigned long long</a></code>，初始为
                                0。</p>
                        <li data-md>
                            <p>令 <var>outerSubscriptionHasCompleted</var> 为 <a data-link-type="dfn"
                                    href="https://infra.spec.whatwg.org/#boolean" id="ref-for-boolean④">boolean</a>，初始为
                                false。</p>
                        <li data-md>
                            <p>令 <var>activeInnerAbortController</var> 为 <code
                                    class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortcontroller" id="ref-for-abortcontroller①">AbortController</a></code>
                                或 null，初始为 null。</p>
                            <p class="note" role="note"><span class="marker">注意：</span> <code
                                    class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortcontroller" id="ref-for-abortcontroller②">AbortController</a></code>
                                只会在本算法的 <a href="#switchmap-next-steps">next 步骤</a>（见下方）被赋值为新实例，并只会在 <a
                                    data-link-type="dfn" href="#switchmap-process-next-value-steps"
                                    id="ref-for-switchmap-process-next-value-steps">switchmap 处理下一个值步骤</a> 被赋值为
                                null（当“内部” <code
                                    class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable④⑦">Observable</a></code>
                                完成或错误时）。
                                此变量用作当前是否有活跃“内部”订阅的标志。下方 <a href="#switchmap-complete-steps">complete 步骤</a> 判断此变量，
                                如果 <var>sourceObservable</var> 完成但有活跃“内部”订阅，则不会立即完成
                                <var>subscriber</var>，而是等待“内部”订阅完成后再完成。
                            </p>
                        <li data-md>
                            <p>令 <var>sourceObserver</var> 为新建的 <a data-link-type="dfn" href="#internal-observer"
                                    id="ref-for-internal-observer①③">内部观察者</a>，初始化如下：</p>
                            <dl>
                                <dt data-md>
                                <dt id="switchmap-next-steps"><a class="self-link" href="#switchmap-next-steps"></a><a
                                        data-link-type="dfn" href="#internal-observer-next-steps"
                                        id="ref-for-internal-observer-next-steps①④">next 步骤</a>
                                <dd data-md>
                                    <ol>
                                        <li data-md>
                                            <p>如果 <var>activeInnerAbortController</var> 不为 null，则 <a
                                                    data-link-type="dfn"
                                                    href="https://dom.spec.whatwg.org/#abortcontroller-signal-abort"
                                                    id="ref-for-abortcontroller-signal-abort">中止信号</a>
                                                <var>activeInnerAbortController</var>。
                                            </p>
                                            <p class="note" role="note"><span class="marker">注意：</span> 这会“取消订阅”上一次由
                                                <var>sourceObservable</var> 推送的值派生出的“内部” <code
                                                    class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable④⑧">Observable</a></code>，
                                                然后我们会立即订阅即将由当前 <var>value</var> 推送产生的“新的” <code
                                                    class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable④⑨">Observable</a></code>。
                                            </p>
                                        <li data-md>
                                            <p>将 <var>activeInnerAbortController</var> 设为新建 <code
                                                    class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortcontroller" id="ref-for-abortcontroller④">AbortController</a></code>。
                                            </p>
                                        <li data-md>
                                            <p>以 <var>value</var>、<var>subscriber</var>、<var>mapper</var>，
                                                以及对
                                                <var>activeInnerAbortController</var>、<var>outerSubscriptionHasCompleted</var>、<var>idx</var>
                                                的引用，
                                                运行 <a data-link-type="dfn" href="#switchmap-process-next-value-steps"
                                                    id="ref-for-switchmap-process-next-value-steps①">switchmap
                                                    处理下一个值步骤</a>。
                                            </p>
                                            <p class="note" role="note"><span class="marker">注意：</span> <a
                                                    data-link-type="dfn" href="#switchmap-process-next-value-steps"
                                                    id="ref-for-switchmap-process-next-value-steps②">switchmap
                                                    处理下一个值步骤</a> 会订阅由 <var>value</var> 派生的 <code
                                                    class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable⑤⓪">Observable</a></code>，
                                                持续处理其值，直到 (1) 订阅失效（错误或完成）；或 (2) <var>activeInnerAbortController</var> 被
                                                <a href="#switchmap-next-steps">中止</a>（因为 <var>sourceObservable</var>
                                                推送了更新的值，替换了当前“内部”订阅）。
                                            </p>
                                    </ol>
                                <dt data-md><a data-link-type="dfn" href="#internal-observer-error-steps"
                                        id="ref-for-internal-observer-error-steps①①">error 步骤</a>
                                <dd data-md>
                                    <p>以传入的 <var>error</var> 调用 <var>subscriber</var> 的 <code
                                            class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error②③">error()</a></code>
                                        方法。</p>
                                <dt data-md>
                                <dt id="switchmap-complete-steps"><a class="self-link"
                                        href="#switchmap-complete-steps"></a><a data-link-type="dfn"
                                        href="#internal-observer-complete-steps"
                                        id="ref-for-internal-observer-complete-steps①⓪">complete 步骤</a>
                                <dd data-md>
                                    <ol>
                                        <li data-md>
                                            <p>将 <var>outerSubscriptionHasCompleted</var> 设为 true。</p>
                                            <p class="note" role="note"><span class="marker">注意：</span> 如果
                                                <var>activeInnerAbortController</var> 不为 null，则不会立即完成
                                                <var>subscriber</var>。
                                                此时 <a data-link-type="dfn" href="#switchmap-process-next-value-steps"
                                                    id="ref-for-switchmap-process-next-value-steps③">switchmap
                                                    处理下一个值步骤</a> 会在“内部”订阅完成时完成 <var>subscriber</var>。
                                            </p>
                                        <li data-md>
                                            <p>如果 <var>activeInnerAbortController</var> 为 null，则运行 <var>subscriber</var>
                                                的 <code
                                                    class="idl"><a data-link-type="idl" href="#dom-subscriber-complete" id="ref-for-dom-subscriber-complete①⑦">complete()</a></code>
                                                方法。</p>
                                    </ol>
                            </dl>
                        <li data-md>
                            <p>令 <var>options</var> 为新建的 <code
                                    class="idl"><a data-link-type="idl" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions①⑦">SubscribeOptions</a></code>，
                                其 <code
                                    class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal①⑥">signal</a></code>
                                为 <var>subscriber</var> 的 <a data-link-type="dfn"
                                    href="#subscriber-subscription-controller"
                                    id="ref-for-subscriber-subscription-controller①⑨">subscription controller</a> 的 <a
                                    data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal"
                                    id="ref-for-abortcontroller-signal①⑦">signal</a>。
                            </p>
                        <li data-md>
                            <p><a data-link-type="dfn" href="#observable-subscribe-to-an-observable"
                                    id="ref-for-observable-subscribe-to-an-observable①③">订阅</a>
                                <var>sourceObservable</var>，
                                传入 <var>sourceObserver</var> 和 <var>options</var>。
                            </p>
                    </ol>
                <li data-md>
                    <p>返回 <var>observable</var>。</p>
            </ol>
        </div>
        <div class="algorithm" data-algorithm="switchmap process next value steps">

            <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="switchmap-process-next-value-steps">switchmap
                处理下一个值步骤</dfn>，给定 <code
                class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any③③">any</a></code>
            <var>value</var>、<code
                class="idl"><a data-link-type="idl" href="#subscriber" id="ref-for-subscriber②③">Subscriber</a></code>
            <var>subscriber</var>、<code
                class="idl"><a data-link-type="idl" href="#callbackdef-mapper" id="ref-for-callbackdef-mapper④">Mapper</a></code>
            <var>mapper</var>，以及对以下所有变量的引用：<code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortcontroller" id="ref-for-abortcontroller⑤">AbortController</a></code>
            <var>activeInnerAbortController</var>、<a data-link-type="dfn" href="https://infra.spec.whatwg.org/#boolean"
                id="ref-for-boolean⑤">boolean</a>
            <var>outerSubscriptionHasCompleted</var>，
            以及 <code
                class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long" id="ref-for-idl-unsigned-long-long①①">unsigned long long</a></code>
            <var>idx</var>：

            <ol>
                <li data-md>
                    <p>令 <var>mappedResult</var> 为 <a data-link-type="dfn"
                            href="https://webidl.spec.whatwg.org/#invoke-a-callback-function"
                            id="ref-for-invoke-a-callback-function①②">调用</a> <var>mapper</var>，参数为 «<var>value</var>,
                        <var>idx</var>» 和 "<code>rethrow</code>" 的结果。
                    </p>
                    <p>如果 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#an-exception-was-thrown"
                            id="ref-for-an-exception-was-thrown⑧">抛出异常 <var>E</var></a>，则以 <var>E</var> 运行
                        <var>subscriber</var> 的 <code
                            class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error②④">error()</a></code>
                        方法，并终止这些步骤。
                    </p>
                <li data-md>
                    <p>将 <var>idx</var> 设为 <var>idx</var> + 1。</p>
                <li data-md>
                    <p>令 <var>innerObservable</var> 为调用 <code
                            class="idl"><a data-link-type="idl" href="#dom-observable-from" id="ref-for-dom-observable-from⑤">from()</a></code>，参数为
                        <var>mappedResult</var> 的结果。
                    </p>
                    <p>如果 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#an-exception-was-thrown"
                            id="ref-for-an-exception-was-thrown⑨">抛出异常 <var>E</var></a>，则以 <var>E</var> 运行
                        <var>subscriber</var> 的 <code
                            class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error②⑤">error()</a></code>
                        方法，并终止这些步骤。
                    </p>
                <li data-md>
                    <p>令 <var>innerObserver</var> 为新建的 <a data-link-type="dfn" href="#internal-observer"
                            id="ref-for-internal-observer①④">内部观察者</a>，初始化如下：</p>
                    <dl>
                        <dt data-md><a data-link-type="dfn" href="#internal-observer-next-steps"
                                id="ref-for-internal-observer-next-steps①⑤">next 步骤</a>
                        <dd data-md>
                            <p>以传入的 <var>value</var> 调用 <var>subscriber</var> 的 <code
                                    class="idl"><a data-link-type="idl" href="#dom-subscriber-next" id="ref-for-dom-subscriber-next①②">next()</a></code>
                                方法。</p>
                        <dt data-md><a data-link-type="dfn" href="#internal-observer-error-steps"
                                id="ref-for-internal-observer-error-steps①②">error 步骤</a>
                        <dd data-md>
                            <p>以传入的 <var>error</var> 调用 <var>subscriber</var> 的 <code
                                    class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error②⑥">error()</a></code>
                                方法。</p>
                            <p class="note" role="note"><span class="marker">注意：</span> 此处无需将
                                <var>activeInnerAbortController</var> 设为 null，
                                因为调用 <var>subscriber</var> 的 <code
                                    class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error②⑦">error()</a></code>
                                方法会自动从“外部”源 Observable 取消订阅，
                                不会再收到更多值。
                            </p>
                        <dt data-md><a data-link-type="dfn" href="#internal-observer-complete-steps"
                                id="ref-for-internal-observer-complete-steps①①">complete 步骤</a>
                        <dd data-md>
                            <ol>
                                <li data-md>
                                    <p>如果 <var>outerSubscriptionHasCompleted</var> 为 true，则运行 <var>subscriber</var> 的
                                        <code
                                            class="idl"><a data-link-type="idl" href="#dom-subscriber-complete" id="ref-for-dom-subscriber-complete①⑧">complete()</a></code>
                                        方法。
                                    </p>
                                <li data-md>
                                    <p>否则，将 <var>activeInnerAbortController</var> 设为 null。</p>
                                    <p class="note" role="note"><span class="marker">注意：</span> 由于该变量是引用类型，能向 <a
                                            href="#switchmap-complete-steps">switchMap 完成步骤</a>传递没有活跃内部订阅的信号。</p>
                            </ol>
                    </dl>
                <li data-md>
                    <p>令 <var>innerOptions</var> 为新建的 <code
                            class="idl"><a data-link-type="idl" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions①⑧">SubscribeOptions</a></code>，
                        其 <code
                            class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal①⑦">signal</a></code>
                        为 <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#create-a-dependent-abort-signal"
                            id="ref-for-create-a-dependent-abort-signal">创建依赖中止信号</a>的结果，信号列表为「<var>activeInnerAbortController</var>
                        的 <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal"
                            id="ref-for-abortcontroller-signal①⑧">signal</a>，<var>subscriber</var> 的
                        <a data-link-type="dfn" href="#subscriber-subscription-controller"
                            id="ref-for-subscriber-subscription-controller②⓪">subscription controller</a> 的 <a
                            data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal"
                            id="ref-for-abortcontroller-signal①⑨">signal</a>」，使用 <code
                            class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortsignal" id="ref-for-abortsignal②">AbortSignal</a></code>，
                        以及 <a data-link-type="dfn" href="https://tc39.es/ecma262/#current-realm"
                            id="ref-for-current-realm①">当前 realm</a>。
                    </p>
                <li data-md>
                    <p><a data-link-type="dfn" href="#observable-subscribe-to-an-observable"
                            id="ref-for-observable-subscribe-to-an-observable①④">订阅</a> <var>innerObservable</var>，
                        传入 <var>innerObserver</var> 和 <var>innerOptions</var>。
                    </p>
            </ol>
        </div>
        <div class="algorithm" data-algorithm="inspect(inspectorUnion)" data-algorithm-for="Observable">

            <dfn class="dfn-paneled idl-code" data-dfn-for="Observable" data-dfn-type="method" data-export
                data-lt="inspect(inspectorUnion)|inspect()"
                id="dom-observable-inspect"><code>inspect(<var>inspectorUnion</var>)</code></dfn> 方法步骤如下：

            <ol>
                <li data-md>
                    <p>令 <var>subscribe callback</var> 为 <code
                            class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#VoidFunction" id="ref-for-VoidFunction⑥">VoidFunction</a></code>
                        或 null，初始为 null。</p>
                <li data-md>
                    <p>令 <var>next callback</var> 为 <code
                            class="idl"><a data-link-type="idl" href="#callbackdef-observablesubscriptioncallback" id="ref-for-callbackdef-observablesubscriptioncallback⑦">ObservableSubscriptionCallback</a></code>
                        或 null，初始为 null。</p>
                <li data-md>
                    <p>令 <var>error callback</var> 为 <code
                            class="idl"><a data-link-type="idl" href="#callbackdef-observablesubscriptioncallback" id="ref-for-callbackdef-observablesubscriptioncallback⑧">ObservableSubscriptionCallback</a></code>
                        或 null，初始为 null。</p>
                <li data-md>
                    <p>令 <var>complete callback</var> 为 <code
                            class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#VoidFunction" id="ref-for-VoidFunction⑦">VoidFunction</a></code>
                        或 null，初始为 null。</p>
                <li data-md>
                    <p>令 <var>abort callback</var> 为 <code
                            class="idl"><a data-link-type="idl" href="#callbackdef-observableinspectoraborthandler" id="ref-for-callbackdef-observableinspectoraborthandler①">ObservableInspectorAbortHandler</a></code>
                        或 null，初始为 null。</p>
                <li data-md>
                    <p>处理 <var>inspectorUnion</var>，如下：</p>
                    <dl class="switch">
                        <dt>如果 <var>inspectorUnion</var> 是 <code
                                class="idl"><a data-link-type="idl" href="#callbackdef-observablesubscriptioncallback" id="ref-for-callbackdef-observablesubscriptioncallback⑨">ObservableSubscriptionCallback</a></code>
                        <dd>
                            <ol>
                                <li data-md>
                                    <p>将 <var>next callback</var> 设为 <var>inspectorUnion</var>。</p>
                            </ol>
                        <dt>如果 <var>inspectorUnion</var> 是 <code
                                class="idl"><a data-link-type="idl" href="#dictdef-observableinspector" id="ref-for-dictdef-observableinspector①">ObservableInspector</a></code>
                        <dd>
                            <ol>
                                <li data-md>
                                    <p>如果 <code
                                            class="idl"><a data-link-type="idl" href="#dom-observableinspector-subscribe" id="ref-for-dom-observableinspector-subscribe">subscribe</a></code>
                                        <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists"
                                            id="ref-for-map-exists⑤">存在</a>于 <var>inspectorUnion</var>，则将 <var>subscribe
                                            callback</var> 设为它。
                                    </p>
                                <li data-md>
                                    <p>如果 <code
                                            class="idl"><a data-link-type="idl" href="#dom-observableinspector-next" id="ref-for-dom-observableinspector-next">next</a></code>
                                        <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists"
                                            id="ref-for-map-exists⑥">存在</a>于 <var>inspectorUnion</var>，则将 <var>next
                                            callback</var> 设为它。
                                    </p>
                                <li data-md>
                                    <p>如果 <code
                                            class="idl"><a data-link-type="idl" href="#dom-observableinspector-error" id="ref-for-dom-observableinspector-error">error</a></code>
                                        <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists"
                                            id="ref-for-map-exists⑦">存在</a>于 <var>inspectorUnion</var>，则将 <var>error
                                            callback</var> 设为它。
                                    </p>
                                <li data-md>
                                    <p>如果 <code
                                            class="idl"><a data-link-type="idl" href="#dom-observableinspector-complete" id="ref-for-dom-observableinspector-complete">complete</a></code>
                                        <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists"
                                            id="ref-for-map-exists⑧">存在</a>于 <var>inspectorUnion</var>，则将 <var>complete
                                            callback</var> 设为它。
                                    </p>
                                <li data-md>
                                    <p>如果 <code
                                            class="idl"><a data-link-type="idl" href="#dom-observableinspector-abort" id="ref-for-dom-observableinspector-abort">abort</a></code>
                                        <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists"
                                            id="ref-for-map-exists⑨">存在</a>于 <var>inspectorUnion</var>，则将 <var>abort
                                            callback</var> 设为它。
                                    </p>
                            </ol>
                    </dl>
                <li data-md>
                    <p>令 <var>sourceObservable</var> 为 <a data-link-type="dfn"
                            href="https://webidl.spec.whatwg.org/#this" id="ref-for-this③③">this</a>。</p>
                <li data-md>
                    <p>令 <var>observable</var> 为 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new"
                            id="ref-for-new①②">新建</a>的 <code
                            class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable⑤①">Observable</a></code>，
                        其 <a data-link-type="dfn" href="#observable-subscribe-callback"
                            id="ref-for-observable-subscribe-callback①⑤">subscribe callback</a> 是一个接受 <code
                            class="idl"><a data-link-type="idl" href="#subscriber" id="ref-for-subscriber②④">Subscriber</a></code>
                        <var>subscriber</var> 的算法，具体如下：
                    </p>
                    <ol>
                        <li data-md>
                            <p>如果 <var>subscribe callback</var> 非 null，则 <a data-link-type="dfn"
                                    href="https://webidl.spec.whatwg.org/#invoke-a-callback-function"
                                    id="ref-for-invoke-a-callback-function①③">调用</a>它，参数为 «» 和 "<code>rethrow</code>"。
                            </p>
                            <p>如果 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#an-exception-was-thrown"
                                    id="ref-for-an-exception-was-thrown①⓪">抛出异常 <var>E</var></a>，则以 <var>E</var> 运行
                                <var>subscriber</var> 的 <code
                                    class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error②⑧">error()</a></code>
                                方法，并终止这些步骤。
                            </p>
                            <p class="note" role="note"><span class="marker">注意：</span> 这样会导致
                                <var>sourceObservable</var> 永不被订阅。
                            </p>
                        <li data-md>
                            <p>如果 <var>abort callback</var> 不为 null，则 <a data-link-type="dfn"
                                    href="https://dom.spec.whatwg.org/#abortsignal-add"
                                    id="ref-for-abortsignal-add④">向下添加的中止算法</a> 到 <var>subscriber</var> 的 <a
                                    data-link-type="dfn" href="#subscriber-subscription-controller"
                                    id="ref-for-subscriber-subscription-controller②①">subscription controller</a> 的
                                <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal"
                                    id="ref-for-abortcontroller-signal②⓪">signal</a>：
                            </p>
                            <ol>
                                <li data-md>
                                    <p><a data-link-type="dfn"
                                            href="https://webidl.spec.whatwg.org/#invoke-a-callback-function"
                                            id="ref-for-invoke-a-callback-function①④">调用</a> <var>abort
                                            callback</var>，参数为 «<var>subscriber</var> 的 <a data-link-type="dfn"
                                            href="#subscriber-subscription-controller"
                                            id="ref-for-subscriber-subscription-controller②②">subscription
                                            controller</a> 的 <a data-link-type="dfn"
                                            href="https://dom.spec.whatwg.org/#abortcontroller-signal"
                                            id="ref-for-abortcontroller-signal②①">signal</a> 的 <a data-link-type="dfn"
                                            href="https://dom.spec.whatwg.org#abortsignal-abort-reason"
                                            id="ref-for-abortsignal-abort-reason④">abort reason</a>» 和
                                        "<code>report</code>"。</p>
                            </ol>
                        <li data-md>
                            <p>令 <var>sourceObserver</var> 为新建的 <a data-link-type="dfn" href="#internal-observer"
                                    id="ref-for-internal-observer①⑤">内部观察者</a>，初始化如下：</p>
                            <dl>
                                <dt data-md><a data-link-type="dfn" href="#internal-observer-next-steps"
                                        id="ref-for-internal-observer-next-steps①⑥">next 步骤</a>
                                <dd data-md>
                                    <ol>
                                        <li data-md>
                                            <p>如果 <var>next callback</var> 非 null，则 <a data-link-type="dfn"
                                                    href="https://webidl.spec.whatwg.org/#invoke-a-callback-function"
                                                    id="ref-for-invoke-a-callback-function①⑤">调用</a> <var>next
                                                    callback</var>，参数为 «传入的 <var>value</var>» 和 "<code>rethrow</code>"。
                                            </p>
                                            <p>如果 <a data-link-type="dfn"
                                                    href="https://webidl.spec.whatwg.org/#an-exception-was-thrown"
                                                    id="ref-for-an-exception-was-thrown①①">抛出异常 <var>E</var></a>：</p>
                                            <ol>
                                                <li data-md>
                                                    <p><a data-link-type="dfn"
                                                            href="https://dom.spec.whatwg.org/#abortsignal-remove"
                                                            id="ref-for-abortsignal-remove">移除</a> <var>abort
                                                            callback</var>，从 <var>subscriber</var> 的 <a
                                                            data-link-type="dfn"
                                                            href="#subscriber-subscription-controller"
                                                            id="ref-for-subscriber-subscription-controller②③">subscription
                                                            controller</a> 的 <a data-link-type="dfn"
                                                            href="https://dom.spec.whatwg.org/#abortcontroller-signal"
                                                            id="ref-for-abortcontroller-signal②②">signal</a>。
                                                    </p>
                                                    <p class="note" role="note"><span class="marker">注意：</span>
                                                        此步骤很重要，因为 <var>abort callback</var> 仅用于“消费者主动”取消订阅。当生产者终止订阅（通过
                                                        <var>subscriber</var> 的 <code
                                                            class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error②⑨">error()</a></code>
                                                        或 <code
                                                            class="idl"><a data-link-type="idl" href="#dom-subscriber-complete" id="ref-for-dom-subscriber-complete①⑨">complete()</a></code>）时，需确保不会运行
                                                        <var>abort callback</var>。
                                                    </p>
                                                    <p class="issue" id="issue-bfe2caf4"><a class="self-link"
                                                            href="#issue-bfe2caf4"></a> 这与 Chromium 实现一致，但建议持有最初传入的
                                                        <code
                                                            class="idl"><a data-link-type="idl" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions①⑨">SubscribeOptions</a></code>
                                                        的 <code
                                                            class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal①⑧">signal</a></code>
                                                        的引用，仅在其 abort 时调用 <var>abort callback</var>。结果应该一样，但需进一步验证。
                                                    </p>
                                                <li data-md>
                                                    <p>以 <var>E</var> 运行 <var>subscriber</var> 的 <code
                                                            class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error③⓪">error()</a></code>
                                                        方法，并终止这些步骤。</p>
                                            </ol>
                                        <li data-md>
                                            <p>以传入的 <var>value</var> 运行 <var>subscriber</var> 的 <code
                                                    class="idl"><a data-link-type="idl" href="#dom-subscriber-next" id="ref-for-dom-subscriber-next①③">next()</a></code>
                                                方法。</p>
                                    </ol>
                                <dt data-md><a data-link-type="dfn" href="#internal-observer-error-steps"
                                        id="ref-for-internal-observer-error-steps①③">error 步骤</a>
                                <dd data-md>
                                    <ol>
                                        <li data-md>
                                            <p><a data-link-type="dfn"
                                                    href="https://dom.spec.whatwg.org/#abortsignal-remove"
                                                    id="ref-for-abortsignal-remove①">移除</a> <var>abort callback</var>，从
                                                <var>subscriber</var> 的 <a data-link-type="dfn"
                                                    href="#subscriber-subscription-controller"
                                                    id="ref-for-subscriber-subscription-controller②④">subscription
                                                    controller</a> 的 <a data-link-type="dfn"
                                                    href="https://dom.spec.whatwg.org/#abortcontroller-signal"
                                                    id="ref-for-abortcontroller-signal②③">signal</a>。
                                            </p>
                                        <li data-md>
                                            <p>如果 <var>error callback</var> 非 null，则 <a data-link-type="dfn"
                                                    href="https://webidl.spec.whatwg.org/#invoke-a-callback-function"
                                                    id="ref-for-invoke-a-callback-function①⑥">调用</a> <var>error
                                                    callback</var>，参数为 «传入的 <var>error</var>» 和 "<code>rethrow</code>"。
                                            </p>
                                            <p>如果 <a data-link-type="dfn"
                                                    href="https://webidl.spec.whatwg.org/#an-exception-was-thrown"
                                                    id="ref-for-an-exception-was-thrown①②">抛出异常 <var>E</var></a>，则以
                                                <var>E</var> 运行 <var>subscriber</var> 的 <code
                                                    class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error③①">error()</a></code>
                                                方法，并终止这些步骤。
                                            </p>
                                        <li data-md>
                                            <p>以传入的 <var>error</var> 运行 <var>subscriber</var> 的 <code
                                                    class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error③②">error()</a></code>
                                                方法。</p>
                                    </ol>
                                <dt data-md><a data-link-type="dfn" href="#internal-observer-complete-steps"
                                        id="ref-for-internal-observer-complete-steps①②">complete 步骤</a>
                                <dd data-md>
                                    <ol>
                                        <li data-md>
                                            <p><a data-link-type="dfn"
                                                    href="https://dom.spec.whatwg.org/#abortsignal-remove"
                                                    id="ref-for-abortsignal-remove②">移除</a> <var>abort callback</var>，从
                                                <var>subscriber</var> 的 <a data-link-type="dfn"
                                                    href="#subscriber-subscription-controller"
                                                    id="ref-for-subscriber-subscription-controller②⑤">subscription
                                                    controller</a> 的 <a data-link-type="dfn"
                                                    href="https://dom.spec.whatwg.org/#abortcontroller-signal"
                                                    id="ref-for-abortcontroller-signal②④">signal</a>。
                                            </p>
                                        <li data-md>
                                            <p>如果 <var>complete callback</var> 非 null，则 <a data-link-type="dfn"
                                                    href="https://webidl.spec.whatwg.org/#invoke-a-callback-function"
                                                    id="ref-for-invoke-a-callback-function①⑦">调用</a> <var>complete
                                                    callback</var>，参数为 «» 和 "<code>rethrow</code>"。</p>
                                            <p>如果 <a data-link-type="dfn"
                                                    href="https://webidl.spec.whatwg.org/#an-exception-was-thrown"
                                                    id="ref-for-an-exception-was-thrown①③">抛出异常 <var>E</var></a>，则以
                                                <var>E</var> 运行 <var>subscriber</var> 的 <code
                                                    class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error③③">error()</a></code>
                                                方法，并终止这些步骤。
                                            </p>
                                        <li data-md>
                                            <p>运行 <var>subscriber</var> 的 <code
                                                    class="idl"><a data-link-type="idl" href="#dom-subscriber-complete" id="ref-for-dom-subscriber-complete②⓪">complete()</a></code>
                                                方法。</p>
                                    </ol>
                            </dl>
                        <li data-md>
                            <p>令 <var>options</var> 为新建的 <code
                                    class="idl"><a data-link-type="idl" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions②⓪">SubscribeOptions</a></code>，
                                其 <code
                                    class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal①⑨">signal</a></code>
                                为 <var>subscriber</var> 的 <a data-link-type="dfn"
                                    href="#subscriber-subscription-controller"
                                    id="ref-for-subscriber-subscription-controller②⑥">subscription controller</a> 的 <a
                                    data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal"
                                    id="ref-for-abortcontroller-signal②⑤">signal</a>。</p>
                        <li data-md>
                            <p><a data-link-type="dfn" href="#observable-subscribe-to-an-observable"
                                    id="ref-for-observable-subscribe-to-an-observable①⑤">订阅</a>
                                <var>sourceObservable</var>，传入 <var>sourceObserver</var> 和 <var>options</var>。
                            </p>
                    </ol>
                <li data-md>
                    <p>返回 <var>observable</var>。</p>
            </ol>
            <details class="wpt-tests-block" dir="ltr" lang="en" open>
                <summary>测试</summary>
                <ul class="wpt-tests-list">
                    <li class="wpt-test"><a class="wpt-name"
                            href="https://wpt.fyi/results/dom/observable/tentative/observable-inspect.any.js"
                            title="dom/observable/tentative/observable-inspect.any.js">observable-inspect.any.js</a> <a
                            class="wpt-live"
                            href="http://wpt.live/dom/observable/tentative/observable-inspect.any.js"><small>(在线测试)</small></a>
                        <a class="wpt-source"
                            href="https://github.com/web-platform-tests/wpt/blob/master/dom/observable/tentative/observable-inspect.any.js"><small>(源码)</small></a>
                </ul>
            </details>
        </div>
        <div class="algorithm" data-algorithm="catch(callback)" data-algorithm-for="Observable">

            <dfn class="dfn-paneled idl-code" data-dfn-for="Observable" data-dfn-type="method" data-export
                id="dom-observable-catch"><code>catch(<var>callback</var>)</code></dfn> 方法步骤如下：

            <ol>
                <li data-md>
                    <p>令 <var>sourceObservable</var> 为 <a data-link-type="dfn"
                            href="https://webidl.spec.whatwg.org/#this" id="ref-for-this③④">this</a>。</p>
                <li data-md>
                    <p>令 <var>observable</var> 为 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new"
                            id="ref-for-new①③">新建</a>的 <code
                            class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable⑤②">Observable</a></code>，
                        其 <a data-link-type="dfn" href="#observable-subscribe-callback"
                            id="ref-for-observable-subscribe-callback①⑥">subscribe callback</a> 是一个接受 <code
                            class="idl"><a data-link-type="idl" href="#subscriber" id="ref-for-subscriber②⑤">Subscriber</a></code>
                        <var>subscriber</var> 的算法，具体如下：
                    </p>
                    <ol>
                        <li data-md>
                            <p>令 <var>sourceObserver</var> 为新建的 <a data-link-type="dfn" href="#internal-observer"
                                    id="ref-for-internal-observer①⑥">内部观察者</a>，初始化如下：</p>
                            <dl>
                                <dt data-md><a data-link-type="dfn" href="#internal-observer-next-steps"
                                        id="ref-for-internal-observer-next-steps①⑦">next 步骤</a>
                                <dd data-md>
                                    <p>以传入的 <var>value</var> 调用 <var>subscriber</var> 的 <code
                                            class="idl"><a data-link-type="idl" href="#dom-subscriber-next" id="ref-for-dom-subscriber-next①④">next()</a></code>
                                        方法。</p>
                                <dt data-md><a data-link-type="dfn" href="#internal-observer-error-steps"
                                        id="ref-for-internal-observer-error-steps①④">error 步骤</a>
                                <dd data-md>
                                    <ol>
                                        <li data-md>
                                            <p><a data-link-type="dfn"
                                                    href="https://webidl.spec.whatwg.org/#invoke-a-callback-function"
                                                    id="ref-for-invoke-a-callback-function①⑧">调用</a>
                                                <var>callback</var>，参数为 «传入的 <var>error</var>» 和
                                                "<code>rethrow</code>"。令 <var>result</var> 为返回值。
                                            </p>
                                            <p>如果 <a data-link-type="dfn"
                                                    href="https://webidl.spec.whatwg.org/#an-exception-was-thrown"
                                                    id="ref-for-an-exception-was-thrown①④">抛出异常 <var>E</var></a>，则以
                                                <var>E</var> 运行 <var>subscriber</var> 的 <code
                                                    class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error③④">error()</a></code>
                                                方法，并终止这些步骤。
                                            </p>
                                        <li data-md>
                                            <p>令 <var>innerObservable</var> 为调用 <code
                                                    class="idl"><a data-link-type="idl" href="#dom-observable-from" id="ref-for-dom-observable-from⑥">from()</a></code>，参数为
                                                <var>result</var> 的结果。
                                            </p>
                                            <p>如果 <a data-link-type="dfn"
                                                    href="https://webidl.spec.whatwg.org/#an-exception-was-thrown"
                                                    id="ref-for-an-exception-was-thrown①⑤">抛出异常 <var>E</var></a>，则以
                                                <var>E</var> 运行 <var>subscriber</var> 的 <code
                                                    class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error③⑤">error()</a></code>
                                                方法，并终止这些步骤。
                                            </p>
                                            <p class="issue" id="issue-4eb2abb1①"><a class="self-link"
                                                    href="#issue-4eb2abb1①"></a> 不应直接调用 <code
                                                    class="idl"><a data-link-type="idl" href="#dom-observable-from" id="ref-for-dom-observable-from⑦">from()</a></code>，应调用内部算法以便异常能正确传递到
                                                <var>subscriber</var>。
                                            </p>
                                        <li data-md>
                                            <p>令 <var>innerObserver</var> 为新建的 <a data-link-type="dfn"
                                                    href="#internal-observer"
                                                    id="ref-for-internal-observer①⑦">内部观察者</a>，初始化如下：</p>
                                            <dl>
                                                <dt data-md><a data-link-type="dfn" href="#internal-observer-next-steps"
                                                        id="ref-for-internal-observer-next-steps①⑧">next 步骤</a>
                                                <dd data-md>
                                                    <p>以传入的 <var>value</var> 调用 <var>subscriber</var> 的 <code
                                                            class="idl"><a data-link-type="idl" href="#dom-subscriber-next" id="ref-for-dom-subscriber-next①⑤">next()</a></code>
                                                        方法。</p>
                                                <dt data-md><a data-link-type="dfn"
                                                        href="#internal-observer-error-steps"
                                                        id="ref-for-internal-observer-error-steps①⑤">error 步骤</a>
                                                <dd data-md>
                                                    <p>以传入的 <var>error</var> 调用 <var>subscriber</var> 的 <code
                                                            class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error③⑥">error()</a></code>
                                                        方法。</p>
                                                <dt data-md><a data-link-type="dfn"
                                                        href="#internal-observer-complete-steps"
                                                        id="ref-for-internal-observer-complete-steps①③">complete 步骤</a>
                                                <dd data-md>
                                                    <p>运行 <var>subscriber</var> 的 <code
                                                            class="idl"><a data-link-type="idl" href="#dom-subscriber-complete" id="ref-for-dom-subscriber-complete②①">complete()</a></code>
                                                        方法。</p>
                                            </dl>
                                        <li data-md>
                                            <p>令 <var>innerOptions</var> 为新建的 <code
                                                    class="idl"><a data-link-type="idl" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions②①">SubscribeOptions</a></code>，
                                                其 <code
                                                    class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal②⓪">signal</a></code>
                                                为 <var>subscriber</var> 的 <a data-link-type="dfn"
                                                    href="#subscriber-subscription-controller"
                                                    id="ref-for-subscriber-subscription-controller②⑦">subscription
                                                    controller</a> 的 <a data-link-type="dfn"
                                                    href="https://dom.spec.whatwg.org/#abortcontroller-signal"
                                                    id="ref-for-abortcontroller-signal②⑥">signal</a>。</p>
                                        <li data-md>
                                            <p><a data-link-type="dfn" href="#observable-subscribe-to-an-observable"
                                                    id="ref-for-observable-subscribe-to-an-observable①⑥">订阅</a>
                                                <var>innerObservable</var>，传入 <var>innerObserver</var> 和
                                                <var>innerOptions</var>。
                                            </p>
                                            <p class="note" role="note"><span class="marker">注意：</span> 此处可直接订阅
                                                <var>innerObservable</var>，不需先取消订阅 <var>sourceObservable</var>，也不用担心
                                                <var>sourceObservable</var> 继续发出值，因为这些都发生在 <a data-link-type="dfn"
                                                    href="#internal-observer-error-steps"
                                                    id="ref-for-internal-observer-error-steps①⑥">error 步骤</a>内，说明
                                                <var>sourceObservable</var> 已结束，不会再产生值，可以安全切换到
                                                <var>innerObservable</var>。
                                            </p>
                                    </ol>
                                <dt data-md><a data-link-type="dfn" href="#internal-observer-complete-steps"
                                        id="ref-for-internal-observer-complete-steps①④">complete 步骤</a>
                                <dd data-md>
                                    <p>运行 <var>subscriber</var> 的 <code
                                            class="idl"><a data-link-type="idl" href="#dom-subscriber-complete" id="ref-for-dom-subscriber-complete②②">complete()</a></code>
                                        方法。</p>
                            </dl>
                        <li data-md>
                            <p>令 <var>options</var> 为新建的 <code
                                    class="idl"><a data-link-type="idl" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions②②">SubscribeOptions</a></code>，
                                其 <code
                                    class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal②①">signal</a></code>
                                为 <var>subscriber</var> 的 <a data-link-type="dfn"
                                    href="#subscriber-subscription-controller"
                                    id="ref-for-subscriber-subscription-controller②⑧">subscription controller</a> 的 <a
                                    data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal"
                                    id="ref-for-abortcontroller-signal②⑦">signal</a>。</p>
                        <li data-md>
                            <p><a data-link-type="dfn" href="#observable-subscribe-to-an-observable"
                                    id="ref-for-observable-subscribe-to-an-observable①⑦">订阅</a>
                                <var>sourceObservable</var>，传入 <var>sourceObserver</var> 和 <var>options</var>。
                            </p>
                    </ol>
                <li data-md>
                    <p>返回 <var>observable</var>。</p>
            </ol>
        </div>
        <div class="algorithm" data-algorithm="finally(callback)" data-algorithm-for="Observable">

            <dfn class="dfn-paneled idl-code" data-dfn-for="Observable" data-dfn-type="method" data-export
                id="dom-observable-finally"><code>finally(<var>callback</var>)</code></dfn> 方法步骤如下：

            <ol>
                <li data-md>
                    <p>令 <var>sourceObservable</var> 为 <a data-link-type="dfn"
                            href="https://webidl.spec.whatwg.org/#this" id="ref-for-this③⑤">this</a>。</p>
                <li data-md>
                    <p>令 <var>observable</var> 为 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new"
                            id="ref-for-new①④">新建</a>的 <code
                            class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable⑤③">Observable</a></code>，
                        其 <a data-link-type="dfn" href="#observable-subscribe-callback"
                            id="ref-for-observable-subscribe-callback①⑦">subscribe callback</a> 是一个接受 <code
                            class="idl"><a data-link-type="idl" href="#subscriber" id="ref-for-subscriber②⑥">Subscriber</a></code>
                        <var>subscriber</var> 的算法，具体如下：
                    </p>
                    <ol>
                        <li data-md>
                            <p>以 <var>callback</var> 调用 <var>subscriber</var> 的 <code
                                    class="idl"><a data-link-type="idl" href="#dom-subscriber-addteardown" id="ref-for-dom-subscriber-addteardown①">addTeardown()</a></code>
                                方法。</p>
                        <li data-md>
                            <p>令 <var>sourceObserver</var> 为新建的 <a data-link-type="dfn" href="#internal-observer"
                                    id="ref-for-internal-observer①⑧">内部观察者</a>，初始化如下：</p>
                            <dl>
                                <dt data-md><a data-link-type="dfn" href="#internal-observer-next-steps"
                                        id="ref-for-internal-observer-next-steps①⑨">next 步骤</a>
                                <dd data-md>
                                    <p>以传入的 <var>value</var> 调用 <var>subscriber</var> 的 <code
                                            class="idl"><a data-link-type="idl" href="#dom-subscriber-next" id="ref-for-dom-subscriber-next①⑥">next()</a></code>
                                        方法。</p>
                                <dt data-md><a data-link-type="dfn" href="#internal-observer-error-steps"
                                        id="ref-for-internal-observer-error-steps①⑦">error 步骤</a>
                                <dd data-md>
                                    <ol>
                                        <li data-md>
                                            <p>以传入的 <var>error</var> 调用 <var>subscriber</var> 的 <code
                                                    class="idl"><a data-link-type="idl" href="#dom-subscriber-error" id="ref-for-dom-subscriber-error③⑦">error()</a></code>
                                                方法。</p>
                                    </ol>
                                <dt data-md><a data-link-type="dfn" href="#internal-observer-complete-steps"
                                        id="ref-for-internal-observer-complete-steps①⑤">complete 步骤</a>
                                <dd data-md>
                                    <ol>
                                        <li data-md>
                                            <p>运行 <var>subscriber</var> 的 <code
                                                    class="idl"><a data-link-type="idl" href="#dom-subscriber-complete" id="ref-for-dom-subscriber-complete②③">complete()</a></code>
                                                方法。</p>
                                    </ol>
                            </dl>
                        <li data-md>
                            <p>令 <var>options</var> 为新建的 <code
                                    class="idl"><a data-link-type="idl" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions②③">SubscribeOptions</a></code>，
                                其 <code
                                    class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal②②">signal</a></code>
                                为 <var>subscriber</var> 的 <a data-link-type="dfn"
                                    href="#subscriber-subscription-controller"
                                    id="ref-for-subscriber-subscription-controller②⑨">subscription controller</a> 的 <a
                                    data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal"
                                    id="ref-for-abortcontroller-signal②⑧">signal</a>。</p>
                        <li data-md>
                            <p><a data-link-type="dfn" href="#observable-subscribe-to-an-observable"
                                    id="ref-for-observable-subscribe-to-an-observable①⑧">订阅</a>
                                <var>sourceObservable</var>，传入 <var>sourceObserver</var> 和 <var>options</var>。
                            </p>
                    </ol>
                <li data-md>
                    <p>返回 <var>observable</var>。</p>
            </ol>
        </div>
        <h4 class="heading settled" data-level="2.3.3" id="promise-returning-operators"><span class="secno">2.3.3.
            </span><span class="content"><code
                    class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise①①">Promise</a></code>
                返回型操作符</span><a class="self-link" href="#promise-returning-operators"></a></h4>
        <div class="algorithm" data-algorithm="toArray(options)" data-algorithm-for="Observable">

            <dfn class="dfn-paneled idl-code" data-dfn-for="Observable" data-dfn-type="method" data-export
                data-lt="toArray(options)|toArray()"
                id="dom-observable-toarray"><code>toArray(<var>options</var>)</code></dfn> 方法步骤如下：

            <ol>
                <li data-md>
                    <p>令 <var>p</var> 为<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-new-promise"
                            id="ref-for-a-new-promise">新建的 promise</a>。</p>
                <li data-md>
                    <p>如果 <var>options</var> 的 <code
                            class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal②③">signal</a></code>
                        不为 null：</p>
                    <ol>
                        <li data-md>
                            <p>如果 <var>options</var> 的 <code
                                    class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal②④">signal</a></code>
                                已<a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-aborted"
                                    id="ref-for-abortsignal-aborted⑧">中止</a>，则：</p>
                            <ol>
                                <li data-md>
                                    <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject"
                                            id="ref-for-reject">拒绝</a> <var>p</var>，原因为 <var>options</var> 的 <code
                                            class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal②⑤">signal</a></code>
                                        的 <a data-link-type="dfn"
                                            href="https://dom.spec.whatwg.org#abortsignal-abort-reason"
                                            id="ref-for-abortsignal-abort-reason⑤">中止原因</a>。</p>
                                <li data-md>
                                    <p>返回 <var>p</var>。</p>
                            </ol>
                        <li data-md>
                            <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-add"
                                    id="ref-for-abortsignal-add⑤">将以下中止算法添加</a>到
                                <var>options</var>的
                                <code
                                    class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal②⑥">signal</a></code>:
                            </p>
                            <ol>
                                <li data-md>
                                    <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject"
                                            id="ref-for-reject①">拒绝</a> <var>p</var>，原因为 <var>options</var> 的 <code
                                            class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal②⑦">signal</a></code>
                                        的 <a data-link-type="dfn"
                                            href="https://dom.spec.whatwg.org#abortsignal-abort-reason"
                                            id="ref-for-abortsignal-abort-reason⑥">中止原因</a>。</p>
                            </ol>
                            <p class="note" role="note"><span class="marker">注意：</span> 这里只需要拒绝 <var>p</var>。订阅 <a
                                    data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this"
                                    id="ref-for-this③⑥">this</a>
                                <code
                                    class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable⑤④">Observable</a></code>
                                也会自动关闭，因为“内部” Subscriber 会在 <var>options</var> 的 <code
                                    class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal②⑧">signal</a></code>
                                被 <a data-link-type="dfn" href="https://dom.spec.whatwg.org#abortsignal-signal-abort"
                                    id="ref-for-abortsignal-signal-abort②">中止</a>时被 <a data-link-type="dfn"
                                    href="#close-a-subscription" id="ref-for-close-a-subscription⑥">关闭</a>。
                            </p>
                    </ol>
                <li data-md>
                    <p>令 <var>values</var> 为新建的 <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list"
                            id="ref-for-list③">列表</a>。</p>
                <li data-md>
                    <p>令 <var>observer</var> 为新建的 <a data-link-type="dfn" href="#internal-observer"
                            id="ref-for-internal-observer①⑨">内部观察者</a>，初始化如下：</p>
                    <dl>
                        <dt data-md><a data-link-type="dfn" href="#internal-observer-next-steps"
                                id="ref-for-internal-observer-next-steps②⓪">next 步骤</a>
                        <dd data-md>
                            <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append"
                                    id="ref-for-list-append②">追加</a>传入的 <var>value</var> 到 <var>values</var>。</p>
                        <dt data-md><a data-link-type="dfn" href="#internal-observer-error-steps"
                                id="ref-for-internal-observer-error-steps①⑧">error 步骤</a>
                        <dd data-md>
                            <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject"
                                    id="ref-for-reject③">拒绝</a> <var>p</var>，原因为传入的 <var>error</var>。</p>
                        <dt data-md><a data-link-type="dfn" href="#internal-observer-complete-steps"
                                id="ref-for-internal-observer-complete-steps①⑥">complete 步骤</a>
                        <dd data-md>
                            <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve"
                                    id="ref-for-resolve">解析</a> <var>p</var>，值为 <var>values</var>。</p>
                    </dl>
                <li data-md>
                    <p><a data-link-type="dfn" href="#observable-subscribe-to-an-observable"
                            id="ref-for-observable-subscribe-to-an-observable①⑨">订阅</a> <a data-link-type="dfn"
                            href="https://webidl.spec.whatwg.org/#this" id="ref-for-this③⑦">this</a>，传入
                        <var>observer</var> 和 <var>options</var>。
                    </p>
                <li data-md>
                    <p>返回 <var>p</var>。</p>
            </ol>
            <details class="wpt-tests-block" dir="ltr" lang="en" open>
                <summary>测试</summary>
                <ul class="wpt-tests-list">
                    <li class="wpt-test"><a class="wpt-name"
                            href="https://wpt.fyi/results/dom/observable/tentative/observable-toArray.any.js"
                            title="dom/observable/tentative/observable-toArray.any.js">observable-toArray.any.js</a> <a
                            class="wpt-live"
                            href="http://wpt.live/dom/observable/tentative/observable-toArray.any.js"><small>(在线测试)</small></a>
                        <a class="wpt-source"
                            href="https://github.com/web-platform-tests/wpt/blob/master/dom/observable/tentative/observable-toArray.any.js"><small>(源码)</small></a>
                </ul>
            </details>
        </div>
        <div class="algorithm" data-algorithm="forEach(callback, options)" data-algorithm-for="Observable">

            <dfn class="dfn-paneled idl-code" data-dfn-for="Observable" data-dfn-type="method" data-export
                data-lt="forEach(callback, options)|forEach(callback)"
                id="dom-observable-foreach"><code>forEach(<var>callback</var>, <var>options</var>)</code></dfn> 方法步骤如下：

            <ol>
                <li data-md>
                    <p>令 <var>p</var> 为<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-new-promise"
                            id="ref-for-a-new-promise①">新建的 promise</a>。</p>
                <li data-md>
                    <p>令 <var>visitor callback controller</var> 为 <a data-link-type="dfn"
                            href="https://webidl.spec.whatwg.org/#new" id="ref-for-new①⑤">新建</a>的 <code
                            class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortcontroller" id="ref-for-abortcontroller⑥">AbortController</a></code>。
                    </p>
                <li data-md>
                    <p>令 <var>internal options</var> 为新建的 <code
                            class="idl"><a data-link-type="idl" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions②④">SubscribeOptions</a></code>，
                        其 <code
                            class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal②⑨">signal</a></code>
                        是
                        <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#create-a-dependent-abort-signal"
                            id="ref-for-create-a-dependent-abort-signal①">创建依赖中止信号</a>的结果，信号列表为「<var>visitor callback
                            controller</var> 的 <a data-link-type="dfn"
                            href="https://dom.spec.whatwg.org/#abortcontroller-signal"
                            id="ref-for-abortcontroller-signal②⑨">signal</a>，<var>options</var> 的 <code
                            class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal③⓪">signal</a></code>（如不为
                        null）」，
                        使用 <code
                            class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortsignal" id="ref-for-abortsignal③">AbortSignal</a></code>，
                        以及 <a data-link-type="dfn" href="https://tc39.es/ecma262/#current-realm"
                            id="ref-for-current-realm②">当前 realm</a>。
                    </p>
                    <div class="note" role="note">
                        <p>许多琐碎的 <a data-link-type="dfn" href="#internal-observer"
                                id="ref-for-internal-observer②⓪">内部观察者</a> 起到传递的作用，并不控制它们所代表的 <code
                                class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable⑤⑤">Observable</a></code>
                            的订阅；也就是说，当订阅被终止时，会调用它们的 <a data-link-type="dfn" href="#internal-observer-error-steps"
                                id="ref-for-internal-observer-error-steps①⑨">error steps</a> 和 <a data-link-type="dfn"
                                href="#internal-observer-complete-steps"
                                id="ref-for-internal-observer-complete-steps①⑦">complete steps</a>，而它们的 <a
                                data-link-type="dfn" href="#internal-observer-next-steps"
                                id="ref-for-internal-observer-next-steps②①">next steps</a> 只是沿链传递给定值的某种形式。</p>
                        <p>但是，对于这个运算符，下方 <var>observer</var> 的 <a data-link-type="dfn"
                                href="#internal-observer-next-steps" id="ref-for-internal-observer-next-steps②②">next
                                steps</a>
                            在 <var>callback</var> 抛出异常的情况下，实际上负责中止对 <a data-link-type="dfn"
                                href="https://webidl.spec.whatwg.org/#this" id="ref-for-this③⑧">this</a>
                            的底层订阅。在这种情况下，我们传递给“<a data-link-type="dfn" href="#observable-subscribe-to-an-observable"
                                id="ref-for-observable-subscribe-to-an-observable②⓪">Subscribe to an
                                <code>Observable</code></a>” 的 <code
                                class="idl"><a data-link-type="idl" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions②⑤">SubscribeOptions</a></code>
                            的 <code
                                class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal③①">signal</a></code>
                            需要是从 <var>options</var> 的 <code
                                class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal③②">signal</a></code>
                            派生的 <a data-link-type="dfn"
                                href="https://dom.spec.whatwg.org/#create-a-dependent-abort-signal"
                                id="ref-for-create-a-dependent-abort-signal②">dependent signal</a>，并且下方 <a
                                data-link-type="dfn" href="#internal-observer-next-steps"
                                id="ref-for-internal-observer-next-steps②③">next steps</a> 可访问且在需要时可用来 <a
                                data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal-abort"
                                id="ref-for-abortcontroller-signal-abort①">signal abort</a> 的 <code
                                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortcontroller" id="ref-for-abortcontroller⑦">AbortController</a></code>
                            的 <code
                                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortsignal" id="ref-for-abortsignal④">AbortSignal</a></code>。
                        </p>
                    </div>
                <li data-md>
                    <p>如果 <var>internal options</var> 的 <code
                            class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal③③">signal</a></code>
                        已<a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-aborted"
                            id="ref-for-abortsignal-aborted⑨">中止</a>，则：</p>
                    <ol>
                        <li data-md>
                            <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject"
                                    id="ref-for-reject④">拒绝</a> <var>p</var>，原因为 <var>internal options</var> 的 <code
                                    class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal③④">signal</a></code>
                                的 <a data-link-type="dfn" href="https://dom.spec.whatwg.org#abortsignal-abort-reason"
                                    id="ref-for-abortsignal-abort-reason⑦">中止原因</a>。</p>
                        <li data-md>
                            <p>返回 <var>p</var>。</p>
                    </ol>
                <li data-md>
                    <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-add"
                            id="ref-for-abortsignal-add⑥">将以下中止算法添加</a>到 <var>internal
                            options</var> 的
                        <code
                            class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal③⑤">signal</a></code>:
                    </p>
                    <ol>
                        <li data-md>
                            <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject"
                                    id="ref-for-reject⑤">拒绝</a> <var>p</var>，原因为 <var>internal options</var> 的 <code
                                    class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal③⑥">signal</a></code>
                                的 <a data-link-type="dfn" href="https://dom.spec.whatwg.org#abortsignal-abort-reason"
                                    id="ref-for-abortsignal-abort-reason⑧">中止原因</a>。</p>
                            <p class="note" role="note"><span class="marker">注意：</span> <var>p</var> 的拒绝与 <var>internal
                                    options</var> 的
                                <code
                                    class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal③⑦">signal</a></code>
                                相关，而不是与 <var>options</var> 的 <code
                                    class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal③⑧">signal</a></code>
                                相关。
                                所以在 <var>options</var> 的 <code
                                    class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal③⑨">signal</a></code>
                                的 <code
                                    class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#eventdef-abortsignal-abort" id="ref-for-eventdef-abortsignal-abort">abort</a></code>
                                事件触发时，
                                期间排队的 <a data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/webappapis.html#microtask"
                                    id="ref-for-microtask">微任务</a>会在 <var>p</var> 的拒绝处理前运行。
                            </p>
                    </ol>
                <li data-md>
                    <p>令 <var>idx</var> 为 <code
                            class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long" id="ref-for-idl-unsigned-long-long①②">unsigned long long</a></code>，初始为
                        0。</p>
                <li data-md>
                    <p>令 <var>observer</var> 为新建的 <a data-link-type="dfn" href="#internal-observer"
                            id="ref-for-internal-observer②①">内部观察者</a>，初始化如下：</p>
                    <dl>
                        <dt data-md><a data-link-type="dfn" href="#internal-observer-next-steps"
                                id="ref-for-internal-observer-next-steps②④">next 步骤</a>
                        <dd data-md>
                            <ol>
                                <li data-md>
                                    <p><a data-link-type="dfn"
                                            href="https://webidl.spec.whatwg.org/#invoke-a-callback-function"
                                            id="ref-for-invoke-a-callback-function①⑨">调用</a> <var>callback</var>
                                        ，参数为「传入的 <var>value</var>，<var>idx</var>」和 "<code>rethrow</code>"。</p>
                                    <p>如果 <a data-link-type="dfn"
                                            href="https://webidl.spec.whatwg.org/#an-exception-was-thrown"
                                            id="ref-for-an-exception-was-thrown①⑥">抛出异常 <var>E</var></a>，则
                                        <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject"
                                            id="ref-for-reject⑥">拒绝</a> <var>p</var>，原因为 <var>E</var>，并 <a
                                            data-link-type="dfn"
                                            href="https://dom.spec.whatwg.org/#abortcontroller-signal-abort"
                                            id="ref-for-abortcontroller-signal-abort②">中止信号</a> <var>visitor callback
                                            controller</var>，原因为 <var>E</var>。
                                    </p>
                                <li data-md>
                                    <p>递增 <var>idx</var>。</p>
                            </ol>
                        <dt data-md><a data-link-type="dfn" href="#internal-observer-error-steps"
                                id="ref-for-internal-observer-error-steps②⓪">error 步骤</a>
                        <dd data-md>
                            <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject"
                                    id="ref-for-reject⑦">拒绝</a> <var>p</var>，原因为传入的 <var>error</var>。</p>
                        <dt data-md><a data-link-type="dfn" href="#internal-observer-complete-steps"
                                id="ref-for-internal-observer-complete-steps①⑧">complete 步骤</a>
                        <dd data-md>
                            <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve"
                                    id="ref-for-resolve①">解析</a> <var>p</var>，值为 <code
                                    class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined①⓪">undefined</a></code>。
                            </p>
                    </dl>
                <li data-md>
                    <p><a data-link-type="dfn" href="#observable-subscribe-to-an-observable"
                            id="ref-for-observable-subscribe-to-an-observable②①">订阅</a> <a data-link-type="dfn"
                            href="https://webidl.spec.whatwg.org/#this" id="ref-for-this③⑨">this</a>，传入
                        <var>observer</var> 和 <var>internal options</var>。
                    </p>
                <li data-md>
                    <p>返回 <var>p</var>。</p>
            </ol>
            <details class="wpt-tests-block" dir="ltr" lang="en" open>
                <summary>测试</summary>
                <ul class="wpt-tests-list">
                    <li class="wpt-test"><a class="wpt-name"
                            href="https://wpt.fyi/results/dom/observable/tentative/observable-forEach.any.js"
                            title="dom/observable/tentative/observable-forEach.any.js">observable-forEach.any.js</a> <a
                            class="wpt-live"
                            href="http://wpt.live/dom/observable/tentative/observable-forEach.any.js"><small>(在线测试)</small></a>
                        <a class="wpt-source"
                            href="https://github.com/web-platform-tests/wpt/blob/master/dom/observable/tentative/observable-forEach.any.js"><small>(源码)</small></a>
                </ul>
            </details>
        </div>
        <div class="algorithm" data-algorithm="every(predicate, options)" data-algorithm-for="Observable">

            <dfn class="dfn-paneled idl-code" data-dfn-for="Observable" data-dfn-type="method" data-export
                data-lt="every(predicate, options)|every(predicate)"
                id="dom-observable-every"><code>every(<var>predicate</var>, <var>options</var>)</code></dfn> 方法步骤如下：

            <ol>
                <li data-md>
                    <p>令 <var>p</var> 为<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-new-promise"
                            id="ref-for-a-new-promise②">新建的 promise</a>。</p>
                <li data-md>
                    <p>令 <var>controller</var> 为 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new"
                            id="ref-for-new①⑥">新建</a>的 <code
                            class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortcontroller" id="ref-for-abortcontroller⑧">AbortController</a></code>。
                    </p>
                <li data-md>
                    <p>令 <var>internal options</var> 为新建的 <code
                            class="idl"><a data-link-type="idl" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions②⑥">SubscribeOptions</a></code>，
                        其 <code
                            class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal④⓪">signal</a></code>
                        是
                        <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#create-a-dependent-abort-signal"
                            id="ref-for-create-a-dependent-abort-signal③">创建依赖中止信号</a>的结果，信号列表为「<var>controller</var> 的
                        <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal"
                            id="ref-for-abortcontroller-signal③⓪">signal</a>，<var>options</var> 的 <code
                            class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal④①">signal</a></code>（如不为
                        null）」，
                        使用 <code
                            class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortsignal" id="ref-for-abortsignal⑤">AbortSignal</a></code>，
                        以及 <a data-link-type="dfn" href="https://tc39.es/ecma262/#current-realm"
                            id="ref-for-current-realm③">当前 realm</a>。
                    </p>
                <li data-md>
                    <p>如果 <var>internal options</var> 的 <code
                            class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal④②">signal</a></code>
                        已<a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-aborted"
                            id="ref-for-abortsignal-aborted①⓪">中止</a>，则：</p>
                    <ol>
                        <li data-md>
                            <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject"
                                    id="ref-for-reject⑧">拒绝</a> <var>p</var>，原因为 <var>internal options</var> 的 <code
                                    class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal④③">signal</a></code>
                                的 <a data-link-type="dfn" href="https://dom.spec.whatwg.org#abortsignal-abort-reason"
                                    id="ref-for-abortsignal-abort-reason⑨">中止原因</a>。</p>
                        <li data-md>
                            <p>返回 <var>p</var>。</p>
                    </ol>
                <li data-md>
                    <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-add"
                            id="ref-for-abortsignal-add⑦">将以下中止算法添加</a>到 <var>internal
                            options</var> 的
                        <code
                            class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal④④">signal</a></code>：
                    </p>
                    <ol>
                        <li data-md>
                            <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject"
                                    id="ref-for-reject⑨">拒绝</a> <var>p</var>，原因为 <var>internal options</var> 的 <code
                                    class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal④⑤">signal</a></code>
                                的 <a data-link-type="dfn" href="https://dom.spec.whatwg.org#abortsignal-abort-reason"
                                    id="ref-for-abortsignal-abort-reason①⓪">中止原因</a>。</p>
                    </ol>
                <li data-md>
                    <p>令 <var>idx</var> 为 <code
                            class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long" id="ref-for-idl-unsigned-long-long①③">unsigned long long</a></code>，初始为
                        0。</p>
                <li data-md>
                    <p>令 <var>observer</var> 为新建的 <a data-link-type="dfn" href="#internal-observer"
                            id="ref-for-internal-observer②②">内部观察者</a>，初始化如下：</p>
                    <dl>
                        <dt data-md><a data-link-type="dfn" href="#internal-observer-next-steps"
                                id="ref-for-internal-observer-next-steps②⑤">next 步骤</a>
                        <dd data-md>
                            <ol>
                                <li data-md>
                                    <p><a data-link-type="dfn"
                                            href="https://webidl.spec.whatwg.org/#invoke-a-callback-function"
                                            id="ref-for-invoke-a-callback-function②⓪">调用</a> <var>predicate</var>，
                                        参数为「传入的 <var>value</var>，<var>idx</var>」和 "<code>rethrow</code>"；令
                                        <var>passed</var> 为返回值。
                                    </p>
                                    <p>如果 <a data-link-type="dfn"
                                            href="https://webidl.spec.whatwg.org/#an-exception-was-thrown"
                                            id="ref-for-an-exception-was-thrown①⑦">抛出异常 <var>E</var></a>，则
                                        <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject"
                                            id="ref-for-reject①⓪">拒绝</a> <var>p</var>，原因为 <var>E</var>，并 <a
                                            data-link-type="dfn"
                                            href="https://dom.spec.whatwg.org/#abortcontroller-signal-abort"
                                            id="ref-for-abortcontroller-signal-abort③">中止信号</a>
                                        <var>controller</var>，原因为 <var>E</var>。
                                    </p>
                                <li data-md>
                                    <p>将 <var>idx</var> 设为 <var>idx</var> + 1。</p>
                                <li data-md>
                                    <p>如果 <var>passed</var> 为 false，则<a data-link-type="dfn"
                                            href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve②">解析</a>
                                        <var>p</var>，值为 false，并 <a data-link-type="dfn"
                                            href="https://dom.spec.whatwg.org/#abortcontroller-signal-abort"
                                            id="ref-for-abortcontroller-signal-abort④">中止信号</a> <var>controller</var>。
                                    </p>
                            </ol>
                        <dt data-md><a data-link-type="dfn" href="#internal-observer-error-steps"
                                id="ref-for-internal-observer-error-steps②①">error 步骤</a>
                        <dd data-md>
                            <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject"
                                    id="ref-for-reject①①">拒绝</a> <var>p</var>，原因为传入的 <var>error</var>。</p>
                        <dt data-md><a data-link-type="dfn" href="#internal-observer-complete-steps"
                                id="ref-for-internal-observer-complete-steps①⑨">complete 步骤</a>
                        <dd data-md>
                            <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve"
                                    id="ref-for-resolve③">解析</a> <var>p</var>，值为 true。</p>
                    </dl>
                <li data-md>
                    <p><a data-link-type="dfn" href="#observable-subscribe-to-an-observable"
                            id="ref-for-observable-subscribe-to-an-observable②②">订阅</a> <a data-link-type="dfn"
                            href="https://webidl.spec.whatwg.org/#this" id="ref-for-this④⓪">this</a>，传入
                        <var>observer</var> 和 <var>internal options</var>。
                    </p>
                <li data-md>
                    <p>返回 <var>p</var>。</p>
            </ol>
        </div>
        <div class="algorithm" data-algorithm="first(options)" data-algorithm-for="Observable">

            <dfn class="dfn-paneled idl-code" data-dfn-for="Observable" data-dfn-type="method" data-export
                data-lt="first(options)|first()" id="dom-observable-first"><code>first(<var>options</var>)</code></dfn>
            方法步骤如下：

            <ol>
                <li data-md>
                    <p>令 <var>p</var> 为<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-new-promise"
                            id="ref-for-a-new-promise③">新建的 promise</a>。</p>
                <li data-md>
                    <p>令 <var>controller</var> 为<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new"
                            id="ref-for-new①⑦">新建</a>的 <code
                            class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortcontroller" id="ref-for-abortcontroller⑨">AbortController</a></code>。
                    </p>
                <li data-md>
                    <p>令 <var>internal options</var> 为新建的 <code
                            class="idl"><a data-link-type="idl" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions②⑦">SubscribeOptions</a></code>，
                        其 <code
                            class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal④⑥">signal</a></code>
                        是
                        <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#create-a-dependent-abort-signal"
                            id="ref-for-create-a-dependent-abort-signal④">创建依赖中止信号</a>的结果，信号列表为「<var>controller</var> 的
                        <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal"
                            id="ref-for-abortcontroller-signal③①">signal</a>，<var>options</var> 的 <code
                            class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal④⑦">signal</a></code>（如不为
                        null）」，
                        使用 <code
                            class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortsignal" id="ref-for-abortsignal⑥">AbortSignal</a></code>，
                        以及 <a data-link-type="dfn" href="https://tc39.es/ecma262/#current-realm"
                            id="ref-for-current-realm④">当前 realm</a>。
                    </p>
                <li data-md>
                    <p>如果 <var>internal options</var> 的 <code
                            class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal④⑧">signal</a></code>
                        已<a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-aborted"
                            id="ref-for-abortsignal-aborted①①">中止</a>，则：</p>
                    <ol>
                        <li data-md>
                            <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject"
                                    id="ref-for-reject①②">拒绝</a> <var>p</var>，原因为 <var>internal options</var> 的 <code
                                    class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal④⑨">signal</a></code>
                                的 <a data-link-type="dfn" href="https://dom.spec.whatwg.org#abortsignal-abort-reason"
                                    id="ref-for-abortsignal-abort-reason①①">中止原因</a>。</p>
                        <li data-md>
                            <p>返回 <var>p</var>。</p>
                    </ol>
                <li data-md>
                    <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-add"
                            id="ref-for-abortsignal-add⑧">将以下中止算法添加</a>到 <var>internal
                            options</var> 的
                        <code
                            class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal⑤⓪">signal</a></code>：
                    </p>
                    <ol>
                        <li data-md>
                            <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject"
                                    id="ref-for-reject①③">拒绝</a> <var>p</var>，原因为 <var>internal options</var> 的 <code
                                    class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal⑤①">signal</a></code>
                                的 <a data-link-type="dfn" href="https://dom.spec.whatwg.org#abortsignal-abort-reason"
                                    id="ref-for-abortsignal-abort-reason①②">中止原因</a>。</p>
                    </ol>
                <li data-md>
                    <p>令 <var>internal observer</var> 为新建的 <a data-link-type="dfn" href="#internal-observer"
                            id="ref-for-internal-observer②③">内部观察者</a>，初始化如下：</p>
                    <dl>
                        <dt data-md><a data-link-type="dfn" href="#internal-observer-next-steps"
                                id="ref-for-internal-observer-next-steps②⑥">next 步骤</a>
                        <dd data-md>
                            <ol>
                                <li data-md>
                                    <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve"
                                            id="ref-for-resolve④">解析</a> <var>p</var>，值为传入的 <var>value</var>。</p>
                                <li data-md>
                                    <p><a data-link-type="dfn"
                                            href="https://dom.spec.whatwg.org/#abortcontroller-signal-abort"
                                            id="ref-for-abortcontroller-signal-abort⑤">中止信号</a> <var>controller</var>。
                                    </p>
                            </ol>
                        <dt data-md><a data-link-type="dfn" href="#internal-observer-error-steps"
                                id="ref-for-internal-observer-error-steps②②">error 步骤</a>
                        <dd data-md>
                            <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject"
                                    id="ref-for-reject①④">拒绝</a> <var>p</var>，原因为传入的 <var>error</var>。</p>
                        <dt data-md><a data-link-type="dfn" href="#internal-observer-complete-steps"
                                id="ref-for-internal-observer-complete-steps②⓪">complete 步骤</a>
                        <dd data-md>
                            <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject"
                                    id="ref-for-reject①⑤">拒绝</a> <var>p</var>，原因为新建 <code
                                    class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-rangeerror" id="ref-for-exceptiondef-rangeerror">RangeError</a></code>。
                            </p>
                            <p class="note" role="note"><span class="marker">注意：</span> 只有当源 <code
                                    class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable⑤⑥">Observable</a></code>
                                在发出第一个值之前就完成时才会到达这里。</p>
                    </dl>
                <li data-md>
                    <p><a data-link-type="dfn" href="#observable-subscribe-to-an-observable"
                            id="ref-for-observable-subscribe-to-an-observable②③">订阅</a> <a data-link-type="dfn"
                            href="https://webidl.spec.whatwg.org/#this" id="ref-for-this④①">this</a>，传入 <var>internal
                            observer</var> 和 <var>internal options</var>。</p>
                <li data-md>
                    <p>返回 <var>p</var>。</p>
            </ol>
        </div>
        <div class="algorithm" data-algorithm="last(options)" data-algorithm-for="Observable">

            <dfn class="dfn-paneled idl-code" data-dfn-for="Observable" data-dfn-type="method" data-export
                data-lt="last(options)|last()" id="dom-observable-last"><code>last(<var>options</var>)</code></dfn>
            方法步骤如下：

            <ol>
                <li data-md>
                    <p>令 <var>p</var> 为<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-new-promise"
                            id="ref-for-a-new-promise④">新建的 promise</a>。</p>
                <li data-md>
                    <p>如果 <var>options</var> 的 <code
                            class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal⑤②">signal</a></code>
                        不为 null：</p>
                    <ol>
                        <li data-md>
                            <p>如果 <var>options</var> 的 <code
                                    class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal⑤③">signal</a></code>
                                已<a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-aborted"
                                    id="ref-for-abortsignal-aborted①②">中止</a>，则：</p>
                            <ol>
                                <li data-md>
                                    <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject"
                                            id="ref-for-reject①⑥">拒绝</a> <var>p</var>，原因为 <var>options</var> 的 <code
                                            class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal⑤④">signal</a></code>
                                        的 <a data-link-type="dfn"
                                            href="https://dom.spec.whatwg.org#abortsignal-abort-reason"
                                            id="ref-for-abortsignal-abort-reason①③">中止原因</a>。</p>
                                <li data-md>
                                    <p>返回 <var>p</var>。</p>
                            </ol>
                        <li data-md>
                            <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-add"
                                    id="ref-for-abortsignal-add⑨">将以下中止算法添加</a>到
                                <var>options</var>的
                                <code
                                    class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal⑤⑤">signal</a></code>：
                            </p>
                            <ol>
                                <li data-md>
                                    <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject"
                                            id="ref-for-reject①⑦">拒绝</a> <var>p</var>，原因为 <var>options</var> 的 <code
                                            class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal⑤⑥">signal</a></code>
                                        的 <a data-link-type="dfn"
                                            href="https://dom.spec.whatwg.org#abortsignal-abort-reason"
                                            id="ref-for-abortsignal-abort-reason①④">中止原因</a>。</p>
                            </ol>
                    </ol>
                <li data-md>
                    <p>令 <var>lastValue</var> 为 <code
                            class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any③④">any</a></code>
                        或 null，初始为 null。</p>
                <li data-md>
                    <p>令 <var>hasLastValue</var> 为 <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#boolean"
                            id="ref-for-boolean⑥">boolean</a>，初始为 false。</p>
                <li data-md>
                    <p>令 <var>observer</var> 为新建的 <a data-link-type="dfn" href="#internal-observer"
                            id="ref-for-internal-observer②④">内部观察者</a>，初始化如下：</p>
                    <dl>
                        <dt data-md><a data-link-type="dfn" href="#internal-observer-next-steps"
                                id="ref-for-internal-observer-next-steps②⑦">next 步骤</a>
                        <dd data-md>
                            <ol>
                                <li data-md>
                                    <p>将 <var>hasLastValue</var> 设为 true。</p>
                                <li data-md>
                                    <p>将 <var>lastValue</var> 设为传入的 <var>value</var>。</p>
                            </ol>
                        <dt data-md><a data-link-type="dfn" href="#internal-observer-error-steps"
                                id="ref-for-internal-observer-error-steps②③">error 步骤</a>
                        <dd data-md>
                            <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject"
                                    id="ref-for-reject①⑧">拒绝</a> <var>p</var>，原因为传入的 <var>error</var>。</p>
                        <dt data-md><a data-link-type="dfn" href="#internal-observer-complete-steps"
                                id="ref-for-internal-observer-complete-steps②①">complete 步骤</a>
                        <dd data-md>
                            <ol>
                                <li data-md>
                                    <p>如果 <var>hasLastValue</var> 为 true，<a data-link-type="dfn"
                                            href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve⑤">解析</a>
                                        <var>p</var>，值为 <var>lastValue</var>。
                                    </p>
                                    <ol>
                                        <li data-md>
                                            <p>否则，<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject"
                                                    id="ref-for-reject①⑨">拒绝</a> <var>p</var>，原因为新建 <code
                                                    class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-rangeerror" id="ref-for-exceptiondef-rangeerror①">RangeError</a></code>。
                                            </p>
                                            <p class="note" role="note"><span class="marker">注意：</span> 参见 <code
                                                    class="idl"><a data-link-type="idl" href="#dom-observable-first" id="ref-for-dom-observable-first①">first()</a></code>
                                                的说明。</p>
                                    </ol>
                            </ol>
                    </dl>
                <li data-md>
                    <p><a data-link-type="dfn" href="#observable-subscribe-to-an-observable"
                            id="ref-for-observable-subscribe-to-an-observable②④">订阅</a> <a data-link-type="dfn"
                            href="https://webidl.spec.whatwg.org/#this" id="ref-for-this④②">this</a>，传入
                        <var>observer</var> 和 <var>options</var>。
                    </p>
                <li data-md>
                    <p>返回 <var>p</var>。</p>
            </ol>
        </div>
        <div class="algorithm" data-algorithm="find(predicate, options)" data-algorithm-for="Observable">

            <dfn class="dfn-paneled idl-code" data-dfn-for="Observable" data-dfn-type="method" data-export
                data-lt="find(predicate, options)|find(predicate)"
                id="dom-observable-find"><code>find(<var>predicate</var>, <var>options</var>)</code></dfn> 方法步骤如下：

            <ol>
                <li data-md>
                    <p>令 <var>p</var> 为<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-new-promise"
                            id="ref-for-a-new-promise⑤">新建的 promise</a>。</p>
                <li data-md>
                    <p>令 <var>controller</var> 为<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new"
                            id="ref-for-new①⑧">新建</a>的 <code
                            class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortcontroller" id="ref-for-abortcontroller①⓪">AbortController</a></code>。
                    </p>
                <li data-md>
                    <p>令 <var>internal options</var> 为新建的 <code
                            class="idl"><a data-link-type="idl" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions②⑧">SubscribeOptions</a></code>，
                        其 <code
                            class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal⑤⑦">signal</a></code>
                        是
                        <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#create-a-dependent-abort-signal"
                            id="ref-for-create-a-dependent-abort-signal⑤">创建依赖中止信号</a>的结果，信号列表为「<var>controller</var> 的
                        <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal"
                            id="ref-for-abortcontroller-signal③②">signal</a>，<var>options</var> 的 <code
                            class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal⑤⑧">signal</a></code>（如不为
                        null）」，
                        使用 <code
                            class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortsignal" id="ref-for-abortsignal⑦">AbortSignal</a></code>，
                        以及 <a data-link-type="dfn" href="https://tc39.es/ecma262/#current-realm"
                            id="ref-for-current-realm⑤">当前 realm</a>。
                    </p>
                <li data-md>
                    <p>如果 <var>internal options</var> 的 <code
                            class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal⑤⑨">signal</a></code>
                        已<a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-aborted"
                            id="ref-for-abortsignal-aborted①③">中止</a>，则：</p>
                    <ol>
                        <li data-md>
                            <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject"
                                    id="ref-for-reject②⓪">拒绝</a> <var>p</var>，原因为 <var>internal options</var> 的 <code
                                    class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal⑥⓪">signal</a></code>
                                的 <a data-link-type="dfn" href="https://dom.spec.whatwg.org#abortsignal-abort-reason"
                                    id="ref-for-abortsignal-abort-reason①⑤">中止原因</a>。</p>
                        <li data-md>
                            <p>返回 <var>p</var>。</p>
                    </ol>
                <li data-md>
                    <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-add"
                            id="ref-for-abortsignal-add①⓪">将以下中止算法添加</a>到 <var>internal
                            options</var> 的
                        <code
                            class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal⑥①">signal</a></code>：
                    </p>
                    <ol>
                        <li data-md>
                            <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject"
                                    id="ref-for-reject②①">拒绝</a> <var>p</var>，原因为 <var>internal options</var> 的 <code
                                    class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal⑥②">signal</a></code>
                                的 <a data-link-type="dfn" href="https://dom.spec.whatwg.org#abortsignal-abort-reason"
                                    id="ref-for-abortsignal-abort-reason①⑥">中止原因</a>。</p>
                    </ol>
                <li data-md>
                    <p>令 <var>idx</var> 为 <code
                            class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long" id="ref-for-idl-unsigned-long-long①④">unsigned long long</a></code>，初始为
                        0。</p>
                <li data-md>
                    <p>令 <var>observer</var> 为新建的 <a data-link-type="dfn" href="#internal-observer"
                            id="ref-for-internal-observer②⑤">内部观察者</a>，初始化如下：</p>
                    <dl>
                        <dt data-md><a data-link-type="dfn" href="#internal-observer-next-steps"
                                id="ref-for-internal-observer-next-steps②⑧">next 步骤</a>
                        <dd data-md>
                            <ol>
                                <li data-md>
                                    <p><a data-link-type="dfn"
                                            href="https://webidl.spec.whatwg.org/#invoke-a-callback-function"
                                            id="ref-for-invoke-a-callback-function②①">调用</a>
                                        <var>predicate</var>，参数为「传入的 <var>value</var>，<var>idx</var>」和
                                        "<code>rethrow</code>"；令 <var>passed</var> 为返回值。
                                    </p>
                                    <p>如果 <a data-link-type="dfn"
                                            href="https://webidl.spec.whatwg.org/#an-exception-was-thrown"
                                            id="ref-for-an-exception-was-thrown①⑧">抛出异常 <var>E</var></a>，则
                                        <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject"
                                            id="ref-for-reject②②">拒绝</a> <var>p</var>，原因为 <var>E</var>，并 <a
                                            data-link-type="dfn"
                                            href="https://dom.spec.whatwg.org/#abortcontroller-signal-abort"
                                            id="ref-for-abortcontroller-signal-abort⑥">中止信号</a>
                                        <var>controller</var>，原因为 <var>E</var>。
                                    </p>
                                <li data-md>
                                    <p>将 <var>idx</var> 设为 <var>idx</var> + 1。</p>
                                <li data-md>
                                    <p>如果 <var>passed</var> 为 true，则<a data-link-type="dfn"
                                            href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve⑥">解析</a>
                                        <var>p</var>，值为 <var>value</var>，并 <a data-link-type="dfn"
                                            href="https://dom.spec.whatwg.org/#abortcontroller-signal-abort"
                                            id="ref-for-abortcontroller-signal-abort⑦">中止信号</a> <var>controller</var>。
                                    </p>
                            </ol>
                        <dt data-md><a data-link-type="dfn" href="#internal-observer-error-steps"
                                id="ref-for-internal-observer-error-steps②④">error 步骤</a>
                        <dd data-md>
                            <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject"
                                    id="ref-for-reject②③">拒绝</a> <var>p</var>，原因为传入的 <var>error</var>。</p>
                        <dt data-md><a data-link-type="dfn" href="#internal-observer-complete-steps"
                                id="ref-for-internal-observer-complete-steps②②">complete 步骤</a>
                        <dd data-md>
                            <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve"
                                    id="ref-for-resolve⑦">解析</a> <var>p</var>，值为 <code
                                    class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined①①">undefined</a></code>。
                            </p>
                    </dl>
                <li data-md>
                    <p><a data-link-type="dfn" href="#observable-subscribe-to-an-observable"
                            id="ref-for-observable-subscribe-to-an-observable②⑤">订阅</a> <a data-link-type="dfn"
                            href="https://webidl.spec.whatwg.org/#this" id="ref-for-this④③">this</a>，传入
                        <var>observer</var> 和 <var>internal options</var>。
                    </p>
                <li data-md>
                    <p>返回 <var>p</var>。</p>
            </ol>
        </div>
        <div class="algorithm" data-algorithm="some(predicate, options)" data-algorithm-for="Observable">

            <dfn class="dfn-paneled idl-code" data-dfn-for="Observable" data-dfn-type="method" data-export
                data-lt="some(predicate, options)|some(predicate)"
                id="dom-observable-some"><code>some(<var>predicate</var>, <var>options</var>)</code></dfn> 方法步骤如下：

            <ol>
                <li data-md>
                    <p>令 <var>p</var> 为<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-new-promise"
                            id="ref-for-a-new-promise⑥">新建的 promise</a>。</p>
                <li data-md>
                    <p>令 <var>controller</var> 为<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new"
                            id="ref-for-new①⑨">新建</a>的 <code
                            class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortcontroller" id="ref-for-abortcontroller①①">AbortController</a></code>。
                    </p>
                <li data-md>
                    <p>令 <var>internal options</var> 为新建的 <code
                            class="idl"><a data-link-type="idl" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions②⑨">SubscribeOptions</a></code>，
                        其 <code
                            class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal⑥③">signal</a></code>
                        是
                        <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#create-a-dependent-abort-signal"
                            id="ref-for-create-a-dependent-abort-signal⑥">创建依赖中止信号</a>的结果，信号列表为「<var>controller</var> 的
                        <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal"
                            id="ref-for-abortcontroller-signal③③">signal</a>，<var>options</var> 的 <code
                            class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal⑥④">signal</a></code>（如不为
                        null）」，
                        使用 <code
                            class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortsignal" id="ref-for-abortsignal⑧">AbortSignal</a></code>，
                        以及 <a data-link-type="dfn" href="https://tc39.es/ecma262/#current-realm"
                            id="ref-for-current-realm⑥">当前 realm</a>。
                    </p>
                <li data-md>
                    <p>如果 <var>internal options</var> 的 <code
                            class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal⑥⑤">signal</a></code>
                        已<a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-aborted"
                            id="ref-for-abortsignal-aborted①④">中止</a>，则：</p>
                    <ol>
                        <li data-md>
                            <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject"
                                    id="ref-for-reject②④">拒绝</a> <var>p</var>，原因为 <var>internal options</var> 的 <code
                                    class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal⑥⑥">signal</a></code>
                                的 <a data-link-type="dfn" href="https://dom.spec.whatwg.org#abortsignal-abort-reason"
                                    id="ref-for-abortsignal-abort-reason①⑦">中止原因</a>。</p>
                        <li data-md>
                            <p>返回 <var>p</var>。</p>
                    </ol>
                <li data-md>
                    <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-add"
                            id="ref-for-abortsignal-add①①">将以下中止算法添加</a>到 <var>internal
                            options</var> 的
                        <code
                            class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal⑥⑦">signal</a></code>:
                    </p>
                    <ol>
                        <li data-md>
                            <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject"
                                    id="ref-for-reject②⑤">拒绝</a> <var>p</var>，原因为 <var>internal options</var> 的 <code
                                    class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal⑥⑧">signal</a></code>
                                的 <a data-link-type="dfn" href="https://dom.spec.whatwg.org#abortsignal-abort-reason"
                                    id="ref-for-abortsignal-abort-reason①⑧">中止原因</a>。</p>
                    </ol>
                <li data-md>
                    <p>令 <var>idx</var> 为 <code
                            class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long" id="ref-for-idl-unsigned-long-long①⑤">unsigned long long</a></code>，初始为
                        0。</p>
                <li data-md>
                    <p>令 <var>observer</var> 为新建的 <a data-link-type="dfn" href="#internal-observer"
                            id="ref-for-internal-observer②⑥">内部观察者</a>，初始化如下：</p>
                    <dl>
                        <dt data-md><a data-link-type="dfn" href="#internal-observer-next-steps"
                                id="ref-for-internal-observer-next-steps②⑨">next 步骤</a>
                        <dd data-md>
                            <ol>
                                <li data-md>
                                    <p><a data-link-type="dfn"
                                            href="https://webidl.spec.whatwg.org/#invoke-a-callback-function"
                                            id="ref-for-invoke-a-callback-function②②">调用</a>
                                        <var>predicate</var>，参数为「传入的 <var>value</var>，<var>idx</var>」和
                                        "<code>rethrow</code>"；令 <var>passed</var> 为返回值。
                                    </p>
                                    <p>如果 <a data-link-type="dfn"
                                            href="https://webidl.spec.whatwg.org/#an-exception-was-thrown"
                                            id="ref-for-an-exception-was-thrown①⑨">抛出异常 <var>E</var></a>，则
                                        <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject"
                                            id="ref-for-reject②⑥">拒绝</a> <var>p</var>，原因为 <var>E</var>，并 <a
                                            data-link-type="dfn"
                                            href="https://dom.spec.whatwg.org/#abortcontroller-signal-abort"
                                            id="ref-for-abortcontroller-signal-abort⑧">中止信号</a>
                                        <var>controller</var>，原因为 <var>E</var>。
                                    </p>
                                <li data-md>
                                    <p>将 <var>idx</var> 设为 <var>idx</var> + 1。</p>
                                <li data-md>
                                    <p>如果 <var>passed</var> 为 true，则<a data-link-type="dfn"
                                            href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve⑧">解析</a>
                                        <var>p</var>，值为 true，并 <a data-link-type="dfn"
                                            href="https://dom.spec.whatwg.org/#abortcontroller-signal-abort"
                                            id="ref-for-abortcontroller-signal-abort⑨">中止信号</a> <var>controller</var>。
                                    </p>
                            </ol>
                        <dt data-md><a data-link-type="dfn" href="#internal-observer-error-steps"
                                id="ref-for-internal-observer-error-steps②⑤">error 步骤</a>
                        <dd data-md>
                            <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject"
                                    id="ref-for-reject②⑦">拒绝</a> <var>p</var>，原因为传入的 <var>error</var>。</p>
                        <dt data-md><a data-link-type="dfn" href="#internal-observer-complete-steps"
                                id="ref-for-internal-observer-complete-steps②③">complete 步骤</a>
                        <dd data-md>
                            <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve"
                                    id="ref-for-resolve⑨">解析</a> <var>p</var>，值为 false。</p>
                    </dl>
                <li data-md>
                    <p><a data-link-type="dfn" href="#observable-subscribe-to-an-observable"
                            id="ref-for-observable-subscribe-to-an-observable②⑥">订阅</a> <a data-link-type="dfn"
                            href="https://webidl.spec.whatwg.org/#this" id="ref-for-this④④">this</a>，传入
                        <var>observer</var> 和 <var>internal options</var>。
                    </p>
                <li data-md>
                    <p>返回 <var>p</var>。</p>
            </ol>
        </div>
        <div class="algorithm" data-algorithm="reduce(reducer, initialValue, options)" data-algorithm-for="Observable">

            <dfn class="dfn-paneled idl-code" data-dfn-for="Observable" data-dfn-type="method" data-export
                data-lt="reduce(reducer, initialValue, options)|reduce(reducer, initialValue)|reduce(reducer)"
                id="dom-observable-reduce"><code>reduce(<var>reducer</var>, <var>initialValue</var>, <var>options</var>)</code></dfn>
            方法步骤如下：

            <ol>
                <li data-md>
                    <p>令 <var>p</var> 为<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-new-promise"
                            id="ref-for-a-new-promise⑦">新建的 promise</a>。</p>
                <li data-md>
                    <p>令 <var>controller</var> 为<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new"
                            id="ref-for-new②⓪">新建</a>的 <code
                            class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortcontroller" id="ref-for-abortcontroller①②">AbortController</a></code>。
                    </p>
                <li data-md>
                    <p>令 <var>internal options</var> 为新建的 <code
                            class="idl"><a data-link-type="idl" href="#dictdef-subscribeoptions" id="ref-for-dictdef-subscribeoptions③⓪">SubscribeOptions</a></code>，
                        其 <code
                            class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal⑥⑨">signal</a></code>
                        是
                        <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#create-a-dependent-abort-signal"
                            id="ref-for-create-a-dependent-abort-signal⑦">创建依赖中止信号</a>的结果，信号列表为「<var>controller</var> 的
                        <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal"
                            id="ref-for-abortcontroller-signal③④">signal</a>，<var>options</var> 的 <code
                            class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal⑦⓪">signal</a></code>（如不为
                        null）」，
                        使用 <code
                            class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortsignal" id="ref-for-abortsignal⑨">AbortSignal</a></code>，
                        以及 <a data-link-type="dfn" href="https://tc39.es/ecma262/#current-realm"
                            id="ref-for-current-realm⑦">当前 realm</a>。
                    </p>
                <li data-md>
                    <p>如果 <var>internal options</var> 的 <code
                            class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal⑦①">signal</a></code>
                        已<a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-aborted"
                            id="ref-for-abortsignal-aborted①⑤">中止</a>，则：</p>
                    <ol>
                        <li data-md>
                            <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject"
                                    id="ref-for-reject②⑧">拒绝</a> <var>p</var>，原因为 <var>internal options</var> 的 <code
                                    class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal⑦②">signal</a></code>
                                的 <a data-link-type="dfn" href="https://dom.spec.whatwg.org#abortsignal-abort-reason"
                                    id="ref-for-abortsignal-abort-reason①⑨">中止原因</a>。</p>
                        <li data-md>
                            <p>返回 <var>p</var>。</p>
                    </ol>
                <li data-md>
                    <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-add"
                            id="ref-for-abortsignal-add①②">将以下中止算法添加</a>到 <var>internal
                            options</var> 的
                        <code
                            class="idl"><span data-link-type="idl" id="ref-for-dom-subscribeoptions-signal⑦③">signal</span></code>:
                    </p>
                    <ol>
                        <li data-md>
                            <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject"
                                    id="ref-for-reject②⑨">拒绝</a> <var>p</var>，原因为 <var>internal options</var> 的 <code
                                    class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal" id="ref-for-dom-subscribeoptions-signal⑦④">signal</a></code>
                                的 <a data-link-type="dfn" href="https://dom.spec.whatwg.org#abortsignal-abort-reason"
                                    id="ref-for-abortsignal-abort-reason②⓪">中止原因</a>。</p>
                    </ol>
                <li data-md>
                    <p>令 <var>idx</var> 为 <code
                            class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long" id="ref-for-idl-unsigned-long-long①⑥">unsigned long long</a></code>，初始为
                        0。</p>
                <li data-md>
                    <p>令 <var>accumulator</var> 为 <var>initialValue</var>（如果已给定），否则未初始化。</p>
                <li data-md>
                    <p>令 <var>observer</var> 为新建的 <a data-link-type="dfn" href="#internal-observer"
                            id="ref-for-internal-observer②⑦">内部观察者</a>，初始化如下：</p>
                    <dl>
                        <dt data-md><a data-link-type="dfn" href="#internal-observer-next-steps"
                                id="ref-for-internal-observer-next-steps③⓪">next steps</a>
                        <dd data-md>
                            <ol>
                                <li data-md>
                                    <p>如果 <var>accumulator</var> 未初始化（即没有传入 <var>initialValue</var>），则将
                                        <var>accumulator</var> 设为传入的 <var>value</var>，将 <var>idx</var> 设为 <var>idx</var>
                                        + 1，并终止这些步骤。
                                    </p>
                                    <p class="note" role="note"><span class="marker">注意：</span> 这意味着 <var>reducer</var>
                                        不会用 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this"
                                            id="ref-for-this④⑤">this</a> 产生的第一个 <var>value</var> 作为 <code
                                            class="idl"><a data-link-type="idl" href="#dom-reducer-currentvalue" id="ref-for-dom-reducer-currentvalue">currentValue</a></code>
                                        调用。实际在第二个值发出时才会用它作为 <code
                                            class="idl"><a data-link-type="idl" href="#dom-reducer-currentvalue" id="ref-for-dom-reducer-currentvalue①">currentValue</a></code>，第一个值（此处保存的）作为
                                        <code
                                            class="idl"><a data-link-type="idl" href="#dom-reducer-accumulator" id="ref-for-dom-reducer-accumulator">accumulator</a></code>。
                                    </p>
                                <li data-md>
                                    <p><a data-link-type="dfn"
                                            href="https://webidl.spec.whatwg.org/#invoke-a-callback-function"
                                            id="ref-for-invoke-a-callback-function②③">调用</a> <var>reducer</var>，参数为
                                        «<var>accumulator</var> 作为 <code
                                            class="idl"><a data-link-type="idl" href="#dom-reducer-accumulator" id="ref-for-dom-reducer-accumulator①">accumulator</a></code>，传入的
                                        <var>value</var> 作为 <code
                                            class="idl"><a data-link-type="idl" href="#dom-reducer-currentvalue" id="ref-for-dom-reducer-currentvalue②">currentValue</a></code>，<var>idx</var>
                                        作为 <code
                                            class="idl"><a data-link-type="idl" href="#dom-reducer-index" id="ref-for-dom-reducer-index">index</a></code>»
                                        和 "<code>rethrow</code>"。令 <var>result</var> 为返回值。
                                    </p>
                                    <p>如果 <a data-link-type="dfn"
                                            href="https://webidl.spec.whatwg.org/#an-exception-was-thrown"
                                            id="ref-for-an-exception-was-thrown②⓪">抛出异常 <var>E</var></a>，则 <a
                                            data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject"
                                            id="ref-for-reject③⓪">拒绝</a> <var>p</var>，原因为 <var>E</var>，并 <a
                                            data-link-type="dfn"
                                            href="https://dom.spec.whatwg.org/#abortcontroller-signal-abort"
                                            id="ref-for-abortcontroller-signal-abort①⓪">中止信号</a>
                                        <var>controller</var>，原因为 <var>E</var>。
                                    </p>
                                <li data-md>
                                    <p>将 <var>idx</var> 设为 <var>idx</var> + 1。</p>
                                <li data-md>
                                    <p>将 <var>accumulator</var> 设为 <var>result</var>。</p>
                            </ol>
                        <dt data-md><a data-link-type="dfn" href="#internal-observer-error-steps"
                                id="ref-for-internal-observer-error-steps②⑥">error steps</a>
                        <dd data-md>
                            <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject"
                                    id="ref-for-reject③①">拒绝</a> <var>p</var>，原因为传入的 <var>error</var>。</p>
                        <dt data-md><a data-link-type="dfn" href="#internal-observer-complete-steps"
                                id="ref-for-internal-observer-complete-steps②④">complete steps</a>
                        <dd data-md>
                            <ol>
                                <li data-md>
                                    <p>如果 <var>accumulator</var> 不为 "<code>unset</code>"，则 <a data-link-type="dfn"
                                            href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve①⓪">解析</a>
                                        <var>p</var>，值为 <var>accumulator</var>。
                                    </p>
                                    <p>否则，<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject"
                                            id="ref-for-reject③②">拒绝</a> <var>p</var>，原因为 <code
                                            class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror③">TypeError</a></code>。
                                    </p>
                            </ol>
                    </dl>
                <li data-md>
                    <p><a data-link-type="dfn" href="#observable-subscribe-to-an-observable"
                            id="ref-for-observable-subscribe-to-an-observable②⑦">订阅</a> <a data-link-type="dfn"
                            href="https://webidl.spec.whatwg.org/#this" id="ref-for-this④⑥">this</a>，传入
                        <var>observer</var> 和 <var>internal options</var>。
                    </p>
                <li data-md>
                    <p>返回 <var>p</var>。</p>
            </ol>
        </div>
        <h2 class="heading settled" data-level="3" id="event-target-integration"><span class="secno">3. </span><span
                class="content"><code
                    class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#eventtarget" id="ref-for-eventtarget">EventTarget</a></code>
                集成</span><a class="self-link" href="#event-target-integration"></a></h2>
        <pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-observableeventlisteneroptions"><code><c- g>ObservableEventListenerOptions</c-></code></dfn> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean④"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-default="false" data-dfn-for="ObservableEventListenerOptions" data-dfn-type="dict-member" data-export data-type="boolean" id="dom-observableeventlisteneroptions-capture"><code><c- g>capture</c-></code></dfn> = <c- b>false</c->;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean⑤"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ObservableEventListenerOptions" data-dfn-type="dict-member" data-export data-type="boolean" id="dom-observableeventlisteneroptions-passive"><code><c- g>passive</c-></code></dfn>;
};

<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://dom.spec.whatwg.org/#eventtarget" id="ref-for-eventtarget①"><c- g>EventTarget</c-></a> {
  <a data-link-type="idl-name" href="#observable" id="ref-for-observable⑤⑦"><c- n>Observable</c-></a> <a class="idl-code" data-link-type="method" href="#dom-eventtarget-when" id="ref-for-dom-eventtarget-when①"><c- g>when</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="EventTarget/when(type, options), EventTarget/when(type)" data-dfn-type="argument" data-export id="dom-eventtarget-when-type-options-type"><code><c- g>type</c-></code></dfn>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-observableeventlisteneroptions" id="ref-for-dictdef-observableeventlisteneroptions"><c- n>ObservableEventListenerOptions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="EventTarget/when(type, options), EventTarget/when(type)" data-dfn-type="argument" data-export id="dom-eventtarget-when-type-options-options"><code><c- g>options</c-></code></dfn> = {});
};
</pre>
        <div class="algorithm" data-algorithm="when(type, options)" data-algorithm-for="EventTarget">

            <dfn class="dfn-paneled idl-code" data-dfn-for="EventTarget" data-dfn-type="method" data-export
                data-lt="when(type, options)|when(type)"
                id="dom-eventtarget-when"><code>when(<var>type</var>, <var>options</var>)</code></dfn> 方法步骤如下：

            <ol>
                <li data-md>
                    <p>如果 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this"
                            id="ref-for-this④⑦">this</a> 的 <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global"
                            id="ref-for-concept-relevant-global⑦">相关全局对象</a> 是 <code
                            class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window⑥">Window</a></code>
                        对象，且其 <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window"
                            id="ref-for-concept-document-window⑥">关联的 Document</a> 非 <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active"
                            id="ref-for-fully-active⑥">完全激活</a>，则返回。</p>
                <li data-md>
                    <p>令 <var>event target</var> 为 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this"
                            id="ref-for-this④⑧">this</a>。</p>
                <li data-md>
                    <p>令 <var>observable</var> 为 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#new"
                            id="ref-for-new②①">新建</a>的 <code
                            class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable⑤⑧">Observable</a></code>，
                        初始化如下：</p>
                    <dl>
                        <dt data-md><a data-link-type="dfn" href="#observable-subscribe-callback"
                                id="ref-for-observable-subscribe-callback①⑧">subscribe callback</a>
                        <dd data-md>
                            <p>一个算法，接受 <code
                                    class="idl"><a data-link-type="idl" href="#subscriber" id="ref-for-subscriber②⑦">Subscriber</a></code>
                                <var>subscriber</var>，按以下步骤运行：
                            </p>
                            <ol>
                                <li data-md>
                                    <p>如果 <var>event target</var> 为 null，则终止这些步骤。</p>
                                    <p class="note" role="note"><span class="marker">注意：</span> 用于捕捉 <var>event
                                            target</var> 可能在订阅时已被垃圾回收的情况。</p>
                                <li data-md>
                                    <p>如果 <var>subscriber</var> 的 <a data-link-type="dfn"
                                            href="#subscriber-subscription-controller"
                                            id="ref-for-subscriber-subscription-controller③⓪">subscription
                                            controller</a> 的 <a data-link-type="dfn"
                                            href="https://dom.spec.whatwg.org/#abortcontroller-signal"
                                            id="ref-for-abortcontroller-signal③⑤">signal</a>
                                        已 <a data-link-type="dfn"
                                            href="https://dom.spec.whatwg.org/#abortsignal-aborted"
                                            id="ref-for-abortsignal-aborted①⑥">中止</a>，则终止这些步骤。</p>
                                <li data-md>
                                    <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#add-an-event-listener"
                                            id="ref-for-add-an-event-listener">添加事件监听器</a>，参数为 <var>event target</var>
                                        及如下 <a data-link-type="dfn"
                                            href="https://dom.spec.whatwg.org/#concept-event-listener"
                                            id="ref-for-concept-event-listener">事件监听器</a>：</p>
                                    <dl>
                                        <dt data-md><a data-link-type="dfn"
                                                href="https://dom.spec.whatwg.org#event-listener-type"
                                                id="ref-for-event-listener-type">type</a>
                                        <dd data-md>
                                            <p><var>type</var></p>
                                        <dt data-md><a data-link-type="dfn"
                                                href="https://dom.spec.whatwg.org/#event-listener-callback"
                                                id="ref-for-event-listener-callback">callback</a>
                                        <dd data-md>
                                            <p>创建一个新的 Web IDL <code
                                                    class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#callbackdef-eventlistener" id="ref-for-callbackdef-eventlistener">EventListener</a></code>
                                                实例，引用一个参数为 <code
                                                    class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#event" id="ref-for-event">Event</a></code>
                                                <var>event</var> 的函数。该函数会执行 <a data-link-type="dfn"
                                                    href="#observable-event-listener-invoke-algorithm"
                                                    id="ref-for-observable-event-listener-invoke-algorithm">observable
                                                    事件监听器调用算法</a>，参数为 <var>subscriber</var> 和 <var>event</var>。
                                            </p>
                                        <dt data-md><a data-link-type="dfn"
                                                href="https://dom.spec.whatwg.org#event-listener-capture"
                                                id="ref-for-event-listener-capture">capture</a>
                                        <dd data-md>
                                            <p><var>options</var> 的 <code
                                                    class="idl"><a data-link-type="idl" href="#dom-observableeventlisteneroptions-capture" id="ref-for-dom-observableeventlisteneroptions-capture">capture</a></code>
                                            </p>
                                        <dt data-md><a data-link-type="dfn"
                                                href="https://dom.spec.whatwg.org#event-listener-passive"
                                                id="ref-for-event-listener-passive">passive</a>
                                        <dd data-md>
                                            <p>如果 <var>options</var> 的 <code
                                                    class="idl"><a data-link-type="idl" href="#dom-observableeventlisteneroptions-passive" id="ref-for-dom-observableeventlisteneroptions-passive">passive</a></code>
                                                属性<a data-link-type="dfn"
                                                    href="https://infra.spec.whatwg.org/#map-exists"
                                                    id="ref-for-map-exists①⓪">存在</a>，则使用其值；否则为 null。</p>
                                        <dt data-md><a data-link-type="dfn"
                                                href="https://dom.spec.whatwg.org#event-listener-once"
                                                id="ref-for-event-listener-once">once</a>
                                        <dd data-md>
                                            <p>false</p>
                                        <dt data-md><a data-link-type="dfn"
                                                href="https://dom.spec.whatwg.org#event-listener-signal"
                                                id="ref-for-event-listener-signal">signal</a>
                                        <dd data-md>
                                            <p><var>subscriber</var> 的 <a data-link-type="dfn"
                                                    href="#subscriber-subscription-controller"
                                                    id="ref-for-subscriber-subscription-controller③①">subscription
                                                    controller</a> 的 <a data-link-type="dfn"
                                                    href="https://dom.spec.whatwg.org/#abortcontroller-signal"
                                                    id="ref-for-abortcontroller-signal③⑥">signal</a></p>
                                            <p class="note" role="note"><span class="marker">注意：</span> 这样可以保证当 <a
                                                    data-link-type="dfn"
                                                    href="https://dom.spec.whatwg.org/#abortsignal-aborted"
                                                    id="ref-for-abortsignal-aborted①⑦">signal</a>
                                                被中止时，无论引擎的对象所有权模型如何，都能清理 <a data-link-type="dfn"
                                                    href="https://dom.spec.whatwg.org/#concept-event-listener"
                                                    id="ref-for-concept-event-listener①">事件监听器</a>。</p>
                                    </dl>
                            </ol>
                    </dl>
                <li data-md>
                    <p>返回 <var>observable</var>。</p>
            </ol>
        </div>
        <div class="algorithm" data-algorithm="observable event listener invoke algorithm">

            <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="observable-event-listener-invoke-algorithm">observable 事件监听器调用算法</dfn> 接收一个 <code
                class="idl"><a data-link-type="idl" href="#subscriber" id="ref-for-subscriber②⑧">Subscriber</a></code>
            <var>subscriber</var> 和一个 <code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#event" id="ref-for-event①">Event</a></code>
            <var>event</var>，按以下步骤运行：

            <ol>
                <li data-md>
                    <p>以 <var>event</var> 调用 <var>subscriber</var> 的 <code
                            class="idl"><a data-link-type="idl" href="#dom-subscriber-next" id="ref-for-dom-subscriber-next①⑦">next()</a></code>
                        方法。</p>
            </ol>
        </div>
        <details class="wpt-tests-block" dir="ltr" lang="en" open>
            <summary>测试</summary>
            <ul class="wpt-tests-list">
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/dom/observable/tentative/observable-event-target.any.js"
                        title="dom/observable/tentative/observable-event-target.any.js">observable-event-target.any.js</a>
                    <a class="wpt-live"
                        href="http://wpt.live/dom/observable/tentative/observable-event-target.any.js"><small>(在线测试)</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/dom/observable/tentative/observable-event-target.any.js"><small>(源码)</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/dom/observable/tentative/observable-event-target.window.js"
                        title="dom/observable/tentative/observable-event-target.window.js">observable-event-target.window.js</a>
                    <a class="wpt-live"
                        href="http://wpt.live/dom/observable/tentative/observable-event-target.window.js"><small>(在线测试)</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/dom/observable/tentative/observable-event-target.window.js"><small>(源码)</small></a>
            </ul>
        </details>
        <h2 class="heading settled" data-level="4" id="security-and-privacy"><span class="secno">4. </span><span
                class="content">安全与隐私注意事项</span><a class="self-link" href="#security-and-privacy"></a></h2>
        <p>本内容正从我们的 explainer 上游到本规范，期间可以参阅以下资源：</p>
        <ul>
            <li data-md>
                <p><a href="https://github.com/WICG/observable/blob/master/security-privacy-questionnaire.md">TAG
                        安全/隐私调查问卷</a></p>
        </ul>
        <h2 class="heading settled" data-level="5" id="acks"><span class="secno">5. </span><span
                class="content">致谢</span><a class="self-link" href="#acks"></a></h2>
        <p>特别感谢 <a href="https://benlesh.com/">Ben Lesh</a> 对 <code
                class="idl"><a data-link-type="idl" href="#observable" id="ref-for-observable⑤⑨">Observable</a></code>
            API 的大量设计输入，以及多年维护用户态 Observable 代码的工作，使这一贡献得以进入 Web 平台。</p>
    </main>
    <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
    <h2 class="no-num no-ref heading settled" id="index"><span class="content">索引</span><a class="self-link"
            href="#index"></a></h2>
    <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">本规范定义的术语</span><a
            class="self-link" href="#index-defined-here"></a></h3>
    <ul class="index">
        <li><a href="#dom-observableinspector-abort">abort</a><span>, 在 § 2.2</span>
        <li>
            active
            <ul>
                <li><a href="#dom-subscriber-active">Subscriber 的属性</a><span>, 在 § 2.1</span>
                <li><a href="#subscriber-active">Subscriber 的定义</a><span>, 在 § 2.1</span>
            </ul>
        <li><a href="#dom-subscriber-addteardown">addTeardown(teardown)</a><span>, 在 § 2.1</span>
        <li><a href="#dom-observableeventlisteneroptions-capture">capture</a><span>, 在 § 3</span>
        <li><a href="#dom-observable-catch">catch(callback)</a><span>, 在 § 2.3.2</span>
        <li><a href="#callbackdef-catchcallback">CatchCallback</a><span>, 在 § 2.2</span>
        <li><a href="#close-a-subscription">关闭订阅</a><span>, 在 § 2.1</span>
        <li>
            complete
            <ul>
                <li><a href="#dom-observableinspector-complete">ObservableInspector 的成员</a><span>, 在 § 2.2</span>
                <li><a href="#dom-subscriptionobserver-complete">SubscriptionObserver 的成员</a><span>, 在 § 2.2</span>
            </ul>
        <li><a href="#dom-subscriber-complete">complete()</a><span>, 在 § 2.1</span>
        <li><a href="#internal-observer-complete-steps">complete 步骤</a><span>, 在 § 2.2.1</span>
        <li><a href="#dom-observable-observable">constructor(callback)</a><span>, 在 § 2.2</span>
        <li><a href="#observable-convert-to-an-observable">转换为 Observable</a><span>, 在 § 2.2.1</span>
        <li><a href="#default-error-algorithm">默认错误算法</a><span>, 在 § 2.2.1</span>
        <li><a href="#dom-observable-drop">drop(amount)</a><span>, 在 § 2.3.2</span>
        <li>
            error
            <ul>
                <li><a href="#dom-observableinspector-error">ObservableInspector 的成员</a><span>, 在 § 2.2</span>
                <li><a href="#dom-subscriptionobserver-error">SubscriptionObserver 的成员</a><span>, 在 § 2.2</span>
            </ul>
        <li><a href="#dom-subscriber-error">error(error)</a><span>, 在 § 2.1</span>
        <li><a href="#internal-observer-error-steps">error 步骤</a><span>, 在 § 2.2.1</span>
        <li><a href="#dom-observable-every">every(predicate)</a><span>, 在 § 2.3.3</span>
        <li><a href="#dom-observable-every">every(predicate, options)</a><span>, 在 § 2.3.3</span>
        <li><a href="#dom-observable-filter">filter(predicate)</a><span>, 在 § 2.3.2</span>
        <li><a href="#dom-observable-finally">finally(callback)</a><span>, 在 § 2.3.2</span>
        <li><a href="#dom-observable-find">find(predicate)</a><span>, 在 § 2.3.3</span>
        <li><a href="#dom-observable-find">find(predicate, options)</a><span>, 在 § 2.3.3</span>
        <li><a href="#dom-observable-first">first()</a><span>, 在 § 2.3.3</span>
        <li><a href="#dom-observable-first">first(options)</a><span>, 在 § 2.3.3</span>
        <li><a href="#dom-observable-flatmap">flatMap(mapper)</a><span>, 在 § 2.3.2</span>
        <li><a href="#flatmap-process-next-value-steps">flatmap 处理下一个值步骤</a><span>, 在 § 2.3.2</span>
        <li><a href="#dom-observable-foreach">forEach(callback)</a><span>, 在 § 2.3.3</span>
        <li><a href="#dom-observable-foreach">forEach(callback, options)</a><span>, 在 § 2.3.3</span>
        <li><a href="#dom-observable-from">from(value)</a><span>, 在 § 2.3.1</span>
        <li><a href="#dom-observable-inspect">inspect()</a><span>, 在 § 2.3.2</span>
        <li><a href="#dom-observable-inspect">inspect(inspectorUnion)</a><span>, 在 § 2.3.2</span>
        <li><a href="#internal-observer">内部观察者</a><span>, 在 § 2.2.1</span>
        <li><a href="#subscriber-internal-observers">内部观察者</a><span>, 在 § 2.1</span>
        <li><a href="#dom-observable-last">last()</a><span>, 在 § 2.3.3</span>
        <li><a href="#dom-observable-last">last(options)</a><span>, 在 § 2.3.3</span>
        <li><a href="#dom-observable-map">map(mapper)</a><span>, 在 § 2.3.2</span>
        <li><a href="#callbackdef-mapper">Mapper</a><span>, 在 § 2.2</span>
        <li>
            next
            <ul>
                <li><a href="#dom-observableinspector-next">ObservableInspector 的成员</a><span>, 在 § 2.2</span>
                <li><a href="#dom-subscriptionobserver-next">SubscriptionObserver 的成员</a><span>, 在 § 2.2</span>
            </ul>
        <li><a href="#internal-observer-next-steps">next 步骤</a><span>, 在 § 2.2.1</span>
        <li><a href="#dom-subscriber-next">next(value)</a><span>, 在 § 2.1</span>
        <li><a href="#observable">Observable</a><span>, 在 § 2.2</span>
        <li><a href="#dom-observable-observable">Observable(callback)</a><span>, 在 § 2.2</span>
        <li><a href="#observable-event-listener-invoke-algorithm">observable 事件监听器调用算法</a><span>, 在 § 3</span>
        <li><a href="#dictdef-observableeventlisteneroptions">ObservableEventListenerOptions</a><span>, 在 § 3</span>
        <li><a href="#dictdef-observableinspector">ObservableInspector</a><span>, 在 § 2.2</span>
        <li><a href="#callbackdef-observableinspectoraborthandler">ObservableInspectorAbortHandler</a><span>, 在
                § 2.2</span>
        <li><a href="#typedefdef-observableinspectorunion">ObservableInspectorUnion</a><span>, 在 § 2.2</span>
        <li><a href="#callbackdef-observablesubscriptioncallback">ObservableSubscriptionCallback</a><span>, 在
                § 2.2</span>
        <li><a href="#typedefdef-observerunion">ObserverUnion</a><span>, 在 § 2.2</span>
        <li><a href="#dom-observableeventlisteneroptions-passive">passive</a><span>, 在 § 3</span>
        <li><a href="#callbackdef-predicate">Predicate</a><span>, 在 § 2.2</span>
        <li><a href="#callbackdef-reducer">Reducer</a><span>, 在 § 2.2</span>
        <li><a href="#dom-observable-reduce">reduce(reducer)</a><span>, 在 § 2.3.3</span>
        <li><a href="#dom-observable-reduce">reduce(reducer, initialValue)</a><span>, 在 § 2.3.3</span>
        <li><a href="#dom-observable-reduce">reduce(reducer, initialValue, options)</a><span>, 在 § 2.3.3</span>
        <li>
            signal
            <ul>
                <li><a href="#dom-subscriber-signal">Subscriber 的属性</a><span>, 在 § 2.1</span>
                <li><a href="#dom-subscribeoptions-signal">SubscribeOptions 的成员</a><span>, 在 § 2.2</span>
            </ul>
        <li><a href="#dom-observable-some">some(predicate)</a><span>, 在 § 2.3.3</span>
        <li><a href="#dom-observable-some">some(predicate, options)</a><span>, 在 § 2.3.3</span>
        <li><a href="#dom-observableinspector-subscribe">subscribe</a><span>, 在 § 2.2</span>
        <li><a href="#dom-observable-subscribe">subscribe()</a><span>, 在 § 2.2</span>
        <li><a href="#observable-subscribe-callback">subscribe callback</a><span>, 在 § 2.2</span>
        <li><a href="#callbackdef-subscribecallback">SubscribeCallback</a><span>, 在 § 2.2</span>
        <li><a href="#dom-observable-subscribe">subscribe(observer)</a><span>, 在 § 2.2</span>
        <li><a href="#dom-observable-subscribe">subscribe(observer, options)</a><span>, 在 § 2.2</span>
        <li><a href="#dictdef-subscribeoptions">SubscribeOptions</a><span>, 在 § 2.2</span>
        <li><a href="#subscriber">Subscriber</a><span>, 在 § 2.1</span>
        <li><a href="#observable-subscribe-to-an-observable">订阅 Observable</a><span>, 在 § 2.2.1</span>
        <li><a href="#subscriber-subscription-controller">subscription controller</a><span>, 在 § 2.1</span>
        <li><a href="#dictdef-subscriptionobserver">SubscriptionObserver</a><span>, 在 § 2.2</span>
        <li><a href="#dom-observable-switchmap">switchMap(mapper)</a><span>, 在 § 2.3.2</span>
        <li><a href="#switchmap-process-next-value-steps">switchmap 处理下一个值步骤</a><span>, 在 § 2.3.2</span>
        <li><a href="#dom-observable-take">take(amount)</a><span>, 在 § 2.3.2</span>
        <li><a href="#dom-observable-takeuntil">takeUntil(value)</a><span>, 在 § 2.3.2</span>
        <li><a href="#subscriber-teardown-callbacks">teardown callbacks</a><span>, 在 § 2.1</span>
        <li><a href="#dom-observable-toarray">toArray()</a><span>, 在 § 2.3.3</span>
        <li><a href="#dom-observable-toarray">toArray(options)</a><span>, 在 § 2.3.3</span>
        <li><a href="#callbackdef-visitor">Visitor</a><span>, 在 § 2.2</span>
        <li><a href="#observable-weak-subscriber">weak subscriber</a><span>, 在 § 2.2</span>
        <li><a href="#dom-eventtarget-when">when(type)</a><span>, 在 § 3</span>
        <li><a href="#dom-eventtarget-when">when(type, options)</a><span>, 在 § 3</span>
    </ul>
    <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">引用规范中定义的术语</span><a
            class="self-link" href="#index-defined-elsewhere"></a></h3>
    <ul class="index">
        <li>
            <a data-link-type="biblio">[DOM]</a> 定义如下术语:
            <ul>
                <li><span class="dfn-paneled" id="2e66eaf1">AbortController</span>
                <li><span class="dfn-paneled" id="cca3cdb2">AbortSignal</span>
                <li><span class="dfn-paneled" id="85394472">Document</span>
                <li><span class="dfn-paneled" id="129bdae8">Event</span>
                <li><span class="dfn-paneled" id="d30f4c38">EventListener</span>
                <li><span class="dfn-paneled" id="2bc0cdf4">EventTarget</span>
                <li><span class="dfn-paneled" id="711357e0">abort</span>
                <li><span class="dfn-paneled" id="670f0339">abort reason</span>
                <li><span class="dfn-paneled" id="535dd335">aborted</span>
                <li><span class="dfn-paneled" id="87bc23a5">add</span>
                <li><span class="dfn-paneled" id="f99bafb9">add an event listener</span>
                <li><span class="dfn-paneled" id="622d9f0e">callback</span>
                <li><span class="dfn-paneled" id="2e75f88e">capture</span>
                <li><span class="dfn-paneled" id="c9db6cec">create a dependent abort signal</span>
                <li><span class="dfn-paneled" id="06950d36">event listener</span>
                <li><span class="dfn-paneled" id="8fc9882c">once</span>
                <li><span class="dfn-paneled" id="75264195">passive</span>
                <li><span class="dfn-paneled" id="ff87eaf9">remove</span>
                <li><span class="dfn-paneled" id="0fe84b59">signal <small>(for AbortController)</small></span>
                <li><span class="dfn-paneled" id="3f076bc8">signal <small>(for event listener)</small></span>
                <li><span class="dfn-paneled" id="2296404c">signal abort <small>(for AbortController)</small></span>
                <li><span class="dfn-paneled" id="89aef5a4">signal abort <small>(for AbortSignal)</small></span>
                <li><span class="dfn-paneled" id="3c3a94af">type</span>
            </ul>
        <li>
            <a data-link-type="biblio">[ECMASCRIPT]</a> 定义如下术语:
            <ul>
                <li><span class="dfn-paneled" id="570979f1">!</span>
                <li><span class="dfn-paneled" id="ff81eaa7">%Symbol.asyncIterator%</span>
                <li><span class="dfn-paneled" id="971914e6">%Symbol.iterator%</span>
                <li><span class="dfn-paneled" id="8c6dc739">?</span>
                <li><span class="dfn-paneled" id="d2e597b8">AsyncIteratorClose</span>
                <li><span class="dfn-paneled" id="72f4451c">Await</span>
                <li><span class="dfn-paneled" id="1f8de32a">GetIterator</span>
                <li><span class="dfn-paneled" id="5b7339ce">GetMethod</span>
                <li><span class="dfn-paneled" id="45da773f">IsPromise</span>
                <li><span class="dfn-paneled" id="c872f9f3">IteratorClose</span>
                <li><span class="dfn-paneled" id="03487a52">IteratorComplete</span>
                <li><span class="dfn-paneled" id="069eabcc">IteratorNext</span>
                <li><span class="dfn-paneled" id="5d0f228f">IteratorStepValue</span>
                <li><span class="dfn-paneled" id="68d0559e">IteratorValue</span>
                <li><span class="dfn-paneled" id="3ea09d18">Type</span>
                <li><span class="dfn-paneled" id="3aec4bbc">current realm</span>
                <li><span class="dfn-paneled" id="19e79880">Iterator Record</span>
                <li><span class="dfn-paneled" id="4351f192">normal completion</span>
                <li><span class="dfn-paneled" id="b8963c66">NormalCompletion</span>
                <li><span class="dfn-paneled" id="fd82ae84">Object</span>
                <li><span class="dfn-paneled" id="8a0f541d">throw completion</span>
            </ul>
        <li>
            <a data-link-type="biblio">[HTML]</a> 定义如下术语:
            <ul>
                <li><span class="dfn-paneled" id="5d7209e9">Window</span>
                <li><span class="dfn-paneled" id="3349d69f">关联的 Document</span>
                <li><span class="dfn-paneled" id="0e3ba9f8">完全激活</span>
                <li><span class="dfn-paneled" id="168f1b6e">global object</span>
                <li><span class="dfn-paneled" id="6a288f2a">微任务</span>
                <li><span class="dfn-paneled" id="53079ce3">队列微任务</span>
                <li><span class="dfn-paneled" id="e99bd18e">相关全局对象</span>
                <li><span class="dfn-paneled" id="560275c7">报告异常</span>
            </ul>
        <li>
            <a data-link-type="biblio">[INFRA]</a> 定义如下术语:
            <ul>
                <li><span class="dfn-paneled" id="53275e46">追加 <small>(list)</small></span>
                <li><span class="dfn-paneled" id="a3b18719">追加 <small>(set)</small></span>
                <li><span class="dfn-paneled" id="77b4c09a">断言</span>
                <li><span class="dfn-paneled" id="36858240">boolean</span>
                <li><span class="dfn-paneled" id="7b0d918d">break</span>
                <li><span class="dfn-paneled" id="03afaf9c">empty</span>
                <li><span class="dfn-paneled" id="75393c04">exist <small>(list)</small></span>
                <li><span class="dfn-paneled" id="1243a891">exist <small>(map)</small></span>
                <li><span class="dfn-paneled" id="16d07e10">for each</span>
                <li><span class="dfn-paneled" id="c88f3887">item</span>
                <li><span class="dfn-paneled" id="649608b9">list</span>
                <li><span class="dfn-paneled" id="692595fe">ordered set</span>
                <li><span class="dfn-paneled" id="99c988d6">remove</span>
                <li><span class="dfn-paneled" id="984221ca">struct</span>
                <li><span class="dfn-paneled" id="cbdc89b4">while</span>
            </ul>
        <li>
            <a data-link-type="biblio">[WEBIDL]</a> 定义如下术语:
            <ul>
                <li><span class="dfn-paneled" id="8855a9aa">DOMString</span>
                <li><span class="dfn-paneled" id="bdbd19d1">Promise</span>
                <li><span class="dfn-paneled" id="ec878a66">RangeError</span>
                <li><span class="dfn-paneled" id="82ca3efc">TypeError</span>
                <li><span class="dfn-paneled" id="7004c2a7">VoidFunction</span>
                <li><span class="dfn-paneled" id="dacde8b5">新建的 promise</span>
                <li><span class="dfn-paneled" id="51276d86">拒绝的 promise</span>
                <li><span class="dfn-paneled" id="8f5c2179">解析的 promise</span>
                <li><span class="dfn-paneled" id="cc61f510">抛出异常</span>
                <li><span class="dfn-paneled" id="6c6b1005">any</span>
                <li><span class="dfn-paneled" id="5372cca8">boolean</span>
                <li><span class="dfn-paneled" id="3ab7bf79">callback function</span>
                <li><span class="dfn-paneled" id="10ce5f6f">invoke</span>
                <li><span class="dfn-paneled" id="56f81a8e">new</span>
                <li><span class="dfn-paneled" id="750a2f08">react</span>
                <li><span class="dfn-paneled" id="b262501e">reject</span>
                <li><span class="dfn-paneled" id="3b90bdcd">resolve</span>
                <li><span class="dfn-paneled" id="9cce47fd">sequence</span>
                <li><span class="dfn-paneled" id="19ea467c">specific type</span>
                <li><span class="dfn-paneled" id="4013a022">this</span>
                <li><span class="dfn-paneled" id="b4cfa5ce">throw</span>
                <li><span class="dfn-paneled" id="5f90bbfb">undefined</span>
                <li><span class="dfn-paneled" id="f14b47b8">unsigned long long</span>
            </ul>
    </ul>
    <h2 class="no-num no-ref heading settled" id="references"><span class="content">参考文献</span><a class="self-link"
            href="#references"></a></h2>
    <h3 class="no-num no-ref heading settled" id="normative"><span class="content">规范性引用</span><a class="self-link"
            href="#normative"></a></h3>
    <dl>
        <dt id="biblio-dom">[DOM]
        <dd>Anne van Kesteren。<a href="https://dom.spec.whatwg.org/"><cite>DOM 标准</cite></a>。Living Standard。
            URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
        <dt id="biblio-ecmascript">[ECMASCRIPT]
        <dd><a href="https://tc39.es/ecma262/multipage/"><cite>ECMAScript 语言规范</cite></a>。URL: <a
                href="https://tc39.es/ecma262/multipage/">https://tc39.es/ecma262/multipage/</a>
        <dt id="biblio-html">[HTML]
        <dd>Anne van Kesteren 等。<a href="https://html.spec.whatwg.org/multipage/"><cite>HTML 标准</cite></a>。
            Living Standard。URL: <a
                href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
        <dt id="biblio-infra">[INFRA]
        <dd>Anne van Kesteren；Domenic Denicola。<a href="https://infra.spec.whatwg.org/"><cite>Infra
                    标准</cite></a>。Living Standard。URL: <a
                href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
        <dt id="biblio-webidl">[WEBIDL]
        <dd>Edgar Chen；Timothy Gu。<a href="https://webidl.spec.whatwg.org/"><cite>Web IDL 标准</cite></a>。Living
            Standard。URL: <a href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
    </dl>
    <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL 索引</span><a class="self-link"
            href="#idl-index"></a></h2>
    <pre class="idl highlight def">[Exposed=*]
<c- b>interface</c-> <a href="#subscriber"><code><c- g>Subscriber</c-></code></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-subscriber-next"><c- g>next</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any"><c- b>any</c-></a> <a href="#dom-subscriber-next-value-value"><code><c- g>value</c-></code></a>);
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-subscriber-error"><c- g>error</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any"><c- b>any</c-></a> <a href="#dom-subscriber-error-error-error"><code><c- g>error</c-></code></a>);
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-subscriber-complete"><c- g>complete</c-></a>();
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-subscriber-addteardown"><c- g>addTeardown</c-></a>(<a data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#VoidFunction"><c- n>VoidFunction</c-></a> <a href="#dom-subscriber-addteardown-teardown-teardown"><code><c- g>teardown</c-></code></a>);

  // True after the Subscriber is created, up until either
  // complete()/error() are invoked, or the subscriber unsubscribes. Inside
  // complete()/error(), this attribute is true.
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-subscriber-active"><c- g>active</c-></a>;

  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#abortsignal"><c- n>AbortSignal</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="AbortSignal" href="#dom-subscriber-signal"><c- g>signal</c-></a>;
};

// SubscribeCallback is where the Observable "creator's" code lives. It's
// called when subscribe() is called, to set up a new subscription.
<c- b>callback</c-> <a href="#callbackdef-subscribecallback"><code><c- g>SubscribeCallback</c-></code></a> = <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> (<a data-link-type="idl-name" href="#subscriber"><c- n>Subscriber</c-></a> <a href="#dom-subscribecallback-subscriber"><code><c- g>subscriber</c-></code></a>);
<c- b>callback</c-> <a href="#callbackdef-observablesubscriptioncallback"><code><c- g>ObservableSubscriptionCallback</c-></code></a> = <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any"><c- b>any</c-></a> <a href="#dom-observablesubscriptioncallback-value"><code><c- g>value</c-></code></a>);

<c- b>dictionary</c-> <a href="#dictdef-subscriptionobserver"><code><c- g>SubscriptionObserver</c-></code></a> {
  <a data-link-type="idl-name" href="#callbackdef-observablesubscriptioncallback"><c- n>ObservableSubscriptionCallback</c-></a> <a data-type="ObservableSubscriptionCallback" href="#dom-subscriptionobserver-next"><code><c- g>next</c-></code></a>;
  <a data-link-type="idl-name" href="#callbackdef-observablesubscriptioncallback"><c- n>ObservableSubscriptionCallback</c-></a> <a data-type="ObservableSubscriptionCallback" href="#dom-subscriptionobserver-error"><code><c- g>error</c-></code></a>;
  <a data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#VoidFunction"><c- n>VoidFunction</c-></a> <a data-type="VoidFunction" href="#dom-subscriptionobserver-complete"><code><c- g>complete</c-></code></a>;
};

<c- b>callback</c-> <a href="#callbackdef-observableinspectoraborthandler"><code><c- g>ObservableInspectorAbortHandler</c-></code></a> = <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any"><c- b>any</c-></a> <a href="#dom-observableinspectoraborthandler-value"><code><c- g>value</c-></code></a>);

<c- b>dictionary</c-> <a href="#dictdef-observableinspector"><code><c- g>ObservableInspector</c-></code></a> {
  <a data-link-type="idl-name" href="#callbackdef-observablesubscriptioncallback"><c- n>ObservableSubscriptionCallback</c-></a> <a data-type="ObservableSubscriptionCallback" href="#dom-observableinspector-next"><code><c- g>next</c-></code></a>;
  <a data-link-type="idl-name" href="#callbackdef-observablesubscriptioncallback"><c- n>ObservableSubscriptionCallback</c-></a> <a data-type="ObservableSubscriptionCallback" href="#dom-observableinspector-error"><code><c- g>error</c-></code></a>;
  <a data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#VoidFunction"><c- n>VoidFunction</c-></a> <a data-type="VoidFunction" href="#dom-observableinspector-complete"><code><c- g>complete</c-></code></a>;

  <a data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#VoidFunction"><c- n>VoidFunction</c-></a> <a data-type="VoidFunction" href="#dom-observableinspector-subscribe"><code><c- g>subscribe</c-></code></a>;
  <a data-link-type="idl-name" href="#callbackdef-observableinspectoraborthandler"><c- n>ObservableInspectorAbortHandler</c-></a> <a data-type="ObservableInspectorAbortHandler" href="#dom-observableinspector-abort"><code><c- g>abort</c-></code></a>;
};

<c- b>typedef</c-> (<a data-link-type="idl-name" href="#callbackdef-observablesubscriptioncallback"><c- n>ObservableSubscriptionCallback</c-></a> <c- b>or</c-> <a data-link-type="idl-name" href="#dictdef-subscriptionobserver"><c- n>SubscriptionObserver</c-></a>) <a href="#typedefdef-observerunion"><code><c- g>ObserverUnion</c-></code></a>;
<c- b>typedef</c-> (<a data-link-type="idl-name" href="#callbackdef-observablesubscriptioncallback"><c- n>ObservableSubscriptionCallback</c-></a> <c- b>or</c-> <a data-link-type="idl-name" href="#dictdef-observableinspector"><c- n>ObservableInspector</c-></a>) <a href="#typedefdef-observableinspectorunion"><code><c- g>ObservableInspectorUnion</c-></code></a>;

<c- b>dictionary</c-> <a href="#dictdef-subscribeoptions"><code><c- g>SubscribeOptions</c-></code></a> {
  <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#abortsignal"><c- n>AbortSignal</c-></a> <a data-type="AbortSignal" href="#dom-subscribeoptions-signal"><code><c- g>signal</c-></code></a>;
};

<c- b>callback</c-> <a href="#callbackdef-predicate"><code><c- g>Predicate</c-></code></a> = <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any"><c- b>any</c-></a> <a href="#dom-predicate-value"><code><c- g>value</c-></code></a>, <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a> <a href="#dom-predicate-index"><code><c- g>index</c-></code></a>);
<c- b>callback</c-> <a href="#callbackdef-reducer"><code><c- g>Reducer</c-></code></a> = <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any"><c- b>any</c-></a> (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any"><c- b>any</c-></a> <a href="#dom-reducer-accumulator"><code><c- g>accumulator</c-></code></a>, <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any"><c- b>any</c-></a> <a href="#dom-reducer-currentvalue"><code><c- g>currentValue</c-></code></a>, <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a> <a href="#dom-reducer-index"><code><c- g>index</c-></code></a>);
<c- b>callback</c-> <a href="#callbackdef-mapper"><code><c- g>Mapper</c-></code></a> = <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any"><c- b>any</c-></a> (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any"><c- b>any</c-></a> <a href="#dom-mapper-value"><code><c- g>value</c-></code></a>, <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a> <a href="#dom-mapper-index"><code><c- g>index</c-></code></a>);
// Differs from Mapper only in return type, since this callback is exclusively
// used to visit each element in a sequence, not transform it.
<c- b>callback</c-> <a href="#callbackdef-visitor"><code><c- g>Visitor</c-></code></a> = <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any"><c- b>any</c-></a> <a href="#dom-visitor-value"><code><c- g>value</c-></code></a>, <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a> <a href="#dom-visitor-index"><code><c- g>index</c-></code></a>);

// This callback returns an `any` that must convert into an `Observable`, via
// the `Observable` conversion semantics.
<c- b>callback</c-> <a href="#callbackdef-catchcallback"><code><c- g>CatchCallback</c-></code></a> = <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any"><c- b>any</c-></a> (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any"><c- b>any</c-></a> <a href="#dom-catchcallback-value"><code><c- g>value</c-></code></a>);

[Exposed=*]
<c- b>interface</c-> <a href="#observable"><code><c- g>Observable</c-></code></a> {
  <a class="idl-code" data-link-type="constructor" href="#dom-observable-observable"><c- g>constructor</c-></a>(<a data-link-type="idl-name" href="#callbackdef-subscribecallback"><c- n>SubscribeCallback</c-></a> <a href="#dom-observable-observable-callback-callback"><code><c- g>callback</c-></code></a>);
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-observable-subscribe"><c- g>subscribe</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#typedefdef-observerunion"><c- n>ObserverUnion</c-></a> <a href="#dom-observable-subscribe-observer-options-observer"><code><c- g>observer</c-></code></a> = {}, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-subscribeoptions"><c- n>SubscribeOptions</c-></a> <a href="#dom-observable-subscribe-observer-options-options"><code><c- g>options</c-></code></a> = {});

  // Constructs a native Observable from value if it's any of the following:
  //   - Observable
  //   - AsyncIterable
  //   - Iterable
  //   - Promise
  <c- b>static</c-> <a data-link-type="idl-name" href="#observable"><c- n>Observable</c-></a> <a class="idl-code" data-link-type="method" href="#dom-observable-from"><c- g>from</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any"><c- b>any</c-></a> <a href="#dom-observable-from-value-value"><code><c- g>value</c-></code></a>);

  // Observable-returning operators. See "Operators" section in the spec.
  //
  // takeUntil() can consume promises, iterables, async iterables, and other
  // observables.
  <a data-link-type="idl-name" href="#observable"><c- n>Observable</c-></a> <a class="idl-code" data-link-type="method" href="#dom-observable-takeuntil"><c- g>takeUntil</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any"><c- b>any</c-></a> <a href="#dom-observable-takeuntil-value-value"><code><c- g>value</c-></code></a>);
  <a data-link-type="idl-name" href="#observable"><c- n>Observable</c-></a> <a class="idl-code" data-link-type="method" href="#dom-observable-map"><c- g>map</c-></a>(<a data-link-type="idl-name" href="#callbackdef-mapper"><c- n>Mapper</c-></a> <a href="#dom-observable-map-mapper-mapper"><code><c- g>mapper</c-></code></a>);
  <a data-link-type="idl-name" href="#observable"><c- n>Observable</c-></a> <a class="idl-code" data-link-type="method" href="#dom-observable-filter"><c- g>filter</c-></a>(<a data-link-type="idl-name" href="#callbackdef-predicate"><c- n>Predicate</c-></a> <a href="#dom-observable-filter-predicate-predicate"><code><c- g>predicate</c-></code></a>);
  <a data-link-type="idl-name" href="#observable"><c- n>Observable</c-></a> <a class="idl-code" data-link-type="method" href="#dom-observable-take"><c- g>take</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a> <a href="#dom-observable-take-amount-amount"><code><c- g>amount</c-></code></a>);
  <a data-link-type="idl-name" href="#observable"><c- n>Observable</c-></a> <a class="idl-code" data-link-type="method" href="#dom-observable-drop"><c- g>drop</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a> <a href="#dom-observable-drop-amount-amount"><code><c- g>amount</c-></code></a>);
  <a data-link-type="idl-name" href="#observable"><c- n>Observable</c-></a> <a class="idl-code" data-link-type="method" href="#dom-observable-flatmap"><c- g>flatMap</c-></a>(<a data-link-type="idl-name" href="#callbackdef-mapper"><c- n>Mapper</c-></a> <a href="#dom-observable-flatmap-mapper-mapper"><code><c- g>mapper</c-></code></a>);
  <a data-link-type="idl-name" href="#observable"><c- n>Observable</c-></a> <a class="idl-code" data-link-type="method" href="#dom-observable-switchmap"><c- g>switchMap</c-></a>(<a data-link-type="idl-name" href="#callbackdef-mapper"><c- n>Mapper</c-></a> <a href="#dom-observable-switchmap-mapper-mapper"><code><c- g>mapper</c-></code></a>);
  <a data-link-type="idl-name" href="#observable"><c- n>Observable</c-></a> <a class="idl-code" data-link-type="method" href="#dom-observable-inspect"><c- g>inspect</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#typedefdef-observableinspectorunion"><c- n>ObservableInspectorUnion</c-></a> <a href="#dom-observable-inspect-inspectorunion-inspectorunion"><code><c- g>inspectorUnion</c-></code></a> = {});
  <a data-link-type="idl-name" href="#observable"><c- n>Observable</c-></a> <a class="idl-code" data-link-type="method" href="#dom-observable-catch"><c- g>catch</c-></a>(<a data-link-type="idl-name" href="#callbackdef-catchcallback"><c- n>CatchCallback</c-></a> <a href="#dom-observable-catch-callback-callback"><code><c- g>callback</c-></code></a>);
  <a data-link-type="idl-name" href="#observable"><c- n>Observable</c-></a> <a class="idl-code" data-link-type="method" href="#dom-observable-finally"><c- g>finally</c-></a>(<a data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#VoidFunction"><c- n>VoidFunction</c-></a> <a href="#dom-observable-finally-callback-callback"><code><c- g>callback</c-></code></a>);

  // Promise-returning operators.
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any"><c- b>any</c-></a>>> <a class="idl-code" data-link-type="method" href="#dom-observable-toarray"><c- g>toArray</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-subscribeoptions"><c- n>SubscribeOptions</c-></a> <a href="#dom-observable-toarray-options-options"><code><c- g>options</c-></code></a> = {});
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-observable-foreach"><c- g>forEach</c-></a>(<a data-link-type="idl-name" href="#callbackdef-visitor"><c- n>Visitor</c-></a> <a href="#dom-observable-foreach-callback-options-callback"><code><c- g>callback</c-></code></a>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-subscribeoptions"><c- n>SubscribeOptions</c-></a> <a href="#dom-observable-foreach-callback-options-options"><code><c- g>options</c-></code></a> = {});
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-observable-every"><c- g>every</c-></a>(<a data-link-type="idl-name" href="#callbackdef-predicate"><c- n>Predicate</c-></a> <a href="#dom-observable-every-predicate-options-predicate"><code><c- g>predicate</c-></code></a>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-subscribeoptions"><c- n>SubscribeOptions</c-></a> <a href="#dom-observable-every-predicate-options-options"><code><c- g>options</c-></code></a> = {});
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any"><c- b>any</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-observable-first"><c- g>first</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-subscribeoptions"><c- n>SubscribeOptions</c-></a> <a href="#dom-observable-first-options-options"><code><c- g>options</c-></code></a> = {});
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any"><c- b>any</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-observable-last"><c- g>last</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-subscribeoptions"><c- n>SubscribeOptions</c-></a> <a href="#dom-observable-last-options-options"><code><c- g>options</c-></code></a> = {});
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any"><c- b>any</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-observable-find"><c- g>find</c-></a>(<a data-link-type="idl-name" href="#callbackdef-predicate"><c- n>Predicate</c-></a> <a href="#dom-observable-find-predicate-options-predicate"><code><c- g>predicate</c-></code></a>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-subscribeoptions"><c- n>SubscribeOptions</c-></a> <a href="#dom-observable-find-predicate-options-options"><code><c- g>options</c-></code></a> = {});
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-observable-some"><c- g>some</c-></a>(<a data-link-type="idl-name" href="#callbackdef-predicate"><c- n>Predicate</c-></a> <a href="#dom-observable-some-predicate-options-predicate"><code><c- g>predicate</c-></code></a>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-subscribeoptions"><c- n>SubscribeOptions</c-></a> <a href="#dom-observable-some-predicate-options-options"><code><c- g>options</c-></code></a> = {});
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any"><c- b>any</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-observable-reduce"><c- g>reduce</c-></a>(<a data-link-type="idl-name" href="#callbackdef-reducer"><c- n>Reducer</c-></a> <a href="#dom-observable-reduce-reducer-initialvalue-options-reducer"><code><c- g>reducer</c-></code></a>, <c- b>optional</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any"><c- b>any</c-></a> <a href="#dom-observable-reduce-reducer-initialvalue-options-initialvalue"><code><c- g>initialValue</c-></code></a>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-subscribeoptions"><c- n>SubscribeOptions</c-></a> <a href="#dom-observable-reduce-reducer-initialvalue-options-options"><code><c- g>options</c-></code></a> = {});
};

<c- b>dictionary</c-> <a href="#dictdef-observableeventlisteneroptions"><code><c- g>ObservableEventListenerOptions</c-></code></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-default="false" data-type="boolean" href="#dom-observableeventlisteneroptions-capture"><code><c- g>capture</c-></code></a> = <c- b>false</c->;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-type="boolean" href="#dom-observableeventlisteneroptions-passive"><code><c- g>passive</c-></code></a>;
};

<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://dom.spec.whatwg.org/#eventtarget"><c- g>EventTarget</c-></a> {
  <a data-link-type="idl-name" href="#observable"><c- n>Observable</c-></a> <a class="idl-code" data-link-type="method" href="#dom-eventtarget-when"><c- g>when</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a href="#dom-eventtarget-when-type-options-type"><code><c- g>type</c-></code></a>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-observableeventlisteneroptions"><c- n>ObservableEventListenerOptions</c-></a> <a href="#dom-eventtarget-when-type-options-options"><code><c- g>options</c-></code></a> = {});
};

</pre>
    <h2 class="no-num no-ref heading settled" id="issues-index"><span class="content">问题索引</span><a class="self-link"
            href="#issues-index"></a></h2>
    <div style="counter-reset:issue">
        <div class="issue"> 不应该直接调用 <code
                class="idl"><a data-link-type="idl" href="#dom-observable-from">from()</a></code>，而是应调用某个内部算法，使异常能被正确地传递出来，以便我们能传递给
            <var>subscriber</var>。<a class="issue-return" href="#issue-4eb2abb1" title="跳转到章节">↵</a>
        </div>
        <div class="issue"> 这与 Chromium 的实现一致，但建议持有最初传入的 <code
                class="idl"><a data-link-type="idl" href="#dictdef-subscribeoptions">SubscribeOptions</a></code> 的 <code
                class="idl"><a data-link-type="idl" href="#dom-subscribeoptions-signal">signal</a></code> 的引用，只在它 abort
            时调用 <var>abort callback</var>。结果可能相同，但需要进一步验证。<a class="issue-return" href="#issue-bfe2caf4"
                title="跳转到章节">↵</a>
        </div>
        <div class="issue"> 不应该直接调用 <code
                class="idl"><a data-link-type="idl" href="#dom-observable-from">from()</a></code>，而是应调用某个内部算法，使异常能被正确地传递出来，以便我们能传递给
            <var>subscriber</var>。<a class="issue-return" href="#issue-4eb2abb1①" title="跳转到章节">↵</a>
        </div>
    </div>
    <script>/* Boilerplate: script-dom-helper */
        "use strict";
        function query(sel) { return document.querySelector(sel); }

        function queryAll(sel) { return [...document.querySelectorAll(sel)]; }

        function iter(obj) {
            if (!obj) return [];
            var it = obj[Symbol.iterator];
            if (it) return it;
            return Object.entries(obj);
        }

        function mk(tagname, attrs, ...children) {
            const el = document.createElement(tagname);
            for (const [k, v] of iter(attrs)) {
                if (k.slice(0, 3) == "_on") {
                    const eventName = k.slice(3);
                    el.addEventListener(eventName, v);
                } else if (k[0] == "_") {
                    // property, not attribute
                    el[k.slice(1)] = v;
                } else {
                    if (v === false || v == null) {
                        continue;
                    } else if (v === true) {
                        el.setAttribute(k, "");
                        continue;
                    } else {
                        el.setAttribute(k, v);
                    }
                }
            }
            append(el, children);
            return el;
        }

        /* Create shortcuts for every known HTML element */
        [
            "a",
            "abbr",
            "acronym",
            "address",
            "applet",
            "area",
            "article",
            "aside",
            "audio",
            "b",
            "base",
            "basefont",
            "bdo",
            "big",
            "blockquote",
            "body",
            "br",
            "button",
            "canvas",
            "caption",
            "center",
            "cite",
            "code",
            "col",
            "colgroup",
            "datalist",
            "dd",
            "del",
            "details",
            "dfn",
            "dialog",
            "div",
            "dl",
            "dt",
            "em",
            "embed",
            "fieldset",
            "figcaption",
            "figure",
            "font",
            "footer",
            "form",
            "frame",
            "frameset",
            "head",
            "header",
            "h1",
            "h2",
            "h3",
            "h4",
            "h5",
            "h6",
            "hr",
            "html",
            "i",
            "iframe",
            "img",
            "input",
            "ins",
            "kbd",
            "label",
            "legend",
            "li",
            "link",
            "main",
            "map",
            "mark",
            "meta",
            "meter",
            "nav",
            "nobr",
            "noscript",
            "object",
            "ol",
            "optgroup",
            "option",
            "output",
            "p",
            "param",
            "pre",
            "progress",
            "q",
            "s",
            "samp",
            "script",
            "section",
            "select",
            "small",
            "source",
            "span",
            "strike",
            "strong",
            "style",
            "sub",
            "summary",
            "sup",
            "table",
            "tbody",
            "td",
            "template",
            "textarea",
            "tfoot",
            "th",
            "thead",
            "time",
            "title",
            "tr",
            "u",
            "ul",
            "var",
            "video",
            "wbr",
            "xmp",
        ].forEach(tagname => {
            mk[tagname] = (...args) => mk(tagname, ...args);
        });

        function* nodesFromChildList(children) {
            for (const child of children.flat(Infinity)) {
                if (child instanceof Node) {
                    yield child;
                } else {
                    yield new Text(child);
                }
            }
        }
        function append(el, ...children) {
            for (const child of nodesFromChildList(children)) {
                if (el instanceof Node) el.appendChild(child);
                else el.push(child);
            }
            return el;
        }

        function insertAfter(el, ...children) {
            for (const child of nodesFromChildList(children)) {
                el.parentNode.insertBefore(child, el.nextSibling);
            }
            return el;
        }

        function clearContents(el) {
            el.innerHTML = "";
            return el;
        }

        function parseHTML(markup) {
            if (markup.toLowerCase().trim().indexOf('<!doctype') === 0) {
                const doc = document.implementation.createHTMLDocument("");
                doc.documentElement.innerHTML = markup;
                return doc;
            } else {
                const el = mk.template({});
                el.innerHTML = markup;
                return el.content;
            }
        }</script>
    <script>/* Boilerplate: script-dfn-panel */
        "use strict";
        {
            let dfnPanelData = {
                "03487a52": { "dfnID": "03487a52", "dfnText": "IteratorComplete", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-sec-iteratorcomplete" }], "title": "2.2.1. Supporting concepts" }], "url": "https://tc39.es/ecma262/multipage/abstract-operations.html#sec-iteratorcomplete" },
                "03afaf9c": { "dfnID": "03afaf9c", "dfnText": "empty", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-list-empty" }, { "id": "ref-for-list-empty\u2460" }], "title": "2.2.1. Supporting concepts" }, { "refs": [{ "id": "ref-for-list-empty\u2461" }, { "id": "ref-for-list-empty\u2462" }], "title": "2.3.2. Observable-returning operators" }], "url": "https://infra.spec.whatwg.org/#list-empty" },
                "06950d36": { "dfnID": "06950d36", "dfnText": "event listener", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-event-listener" }, { "id": "ref-for-concept-event-listener\u2460" }], "title": "3. EventTarget integration" }], "url": "https://dom.spec.whatwg.org/#concept-event-listener" },
                "069eabcc": { "dfnID": "069eabcc", "dfnText": "IteratorNext", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-sec-iteratornext" }, { "id": "ref-for-sec-iteratornext\u2460" }], "title": "2.2.1. Supporting concepts" }], "url": "https://tc39.es/ecma262/multipage/abstract-operations.html#sec-iteratornext" },
                "0e3ba9f8": { "dfnID": "0e3ba9f8", "dfnText": "fully active", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-fully-active" }, { "id": "ref-for-fully-active\u2460" }, { "id": "ref-for-fully-active\u2461" }, { "id": "ref-for-fully-active\u2462" }, { "id": "ref-for-fully-active\u2463" }], "title": "2.1. The Subscriber interface" }, { "refs": [{ "id": "ref-for-fully-active\u2464" }], "title": "2.2.1. Supporting concepts" }, { "refs": [{ "id": "ref-for-fully-active\u2465" }], "title": "3. EventTarget integration" }], "url": "https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active" },
                "0fe84b59": { "dfnID": "0fe84b59", "dfnText": "signal (for AbortController)", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-abortcontroller-signal" }], "title": "2.1. The Subscriber interface" }, { "refs": [{ "id": "ref-for-abortcontroller-signal\u2460" }, { "id": "ref-for-abortcontroller-signal\u2461" }, { "id": "ref-for-abortcontroller-signal\u2462" }, { "id": "ref-for-abortcontroller-signal\u2463" }, { "id": "ref-for-abortcontroller-signal\u2464" }, { "id": "ref-for-abortcontroller-signal\u2465" }, { "id": "ref-for-abortcontroller-signal\u2466" }, { "id": "ref-for-abortcontroller-signal\u2467" }], "title": "2.2.1. Supporting concepts" }, { "refs": [{ "id": "ref-for-abortcontroller-signal\u2468" }, { "id": "ref-for-abortcontroller-signal\u2460\u24ea" }, { "id": "ref-for-abortcontroller-signal\u2460\u2460" }, { "id": "ref-for-abortcontroller-signal\u2460\u2461" }, { "id": "ref-for-abortcontroller-signal\u2460\u2462" }, { "id": "ref-for-abortcontroller-signal\u2460\u2463" }, { "id": "ref-for-abortcontroller-signal\u2460\u2464" }, { "id": "ref-for-abortcontroller-signal\u2460\u2465" }, { "id": "ref-for-abortcontroller-signal\u2460\u2466" }, { "id": "ref-for-abortcontroller-signal\u2460\u2467" }, { "id": "ref-for-abortcontroller-signal\u2460\u2468" }, { "id": "ref-for-abortcontroller-signal\u2461\u24ea" }, { "id": "ref-for-abortcontroller-signal\u2461\u2460" }, { "id": "ref-for-abortcontroller-signal\u2461\u2461" }, { "id": "ref-for-abortcontroller-signal\u2461\u2462" }, { "id": "ref-for-abortcontroller-signal\u2461\u2463" }, { "id": "ref-for-abortcontroller-signal\u2461\u2464" }, { "id": "ref-for-abortcontroller-signal\u2461\u2465" }, { "id": "ref-for-abortcontroller-signal\u2461\u2466" }, { "id": "ref-for-abortcontroller-signal\u2461\u2467" }], "title": "2.3.2. Observable-returning operators" }, { "refs": [{ "id": "ref-for-abortcontroller-signal\u2461\u2468" }, { "id": "ref-for-abortcontroller-signal\u2462\u24ea" }, { "id": "ref-for-abortcontroller-signal\u2462\u2460" }, { "id": "ref-for-abortcontroller-signal\u2462\u2461" }, { "id": "ref-for-abortcontroller-signal\u2462\u2462" }, { "id": "ref-for-abortcontroller-signal\u2462\u2463" }], "title": "2.3.3. Promise-returning operators" }, { "refs": [{ "id": "ref-for-abortcontroller-signal\u2462\u2464" }, { "id": "ref-for-abortcontroller-signal\u2462\u2465" }, { "id": "ref-for-abortcontroller-signal\u2462\u2466" }], "title": "3. EventTarget integration" }], "url": "https://dom.spec.whatwg.org/#abortcontroller-signal" },
                "10ce5f6f": { "dfnID": "10ce5f6f", "dfnText": "invoke", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-invoke-a-callback-function" }, { "id": "ref-for-invoke-a-callback-function\u2460" }], "title": "2.1. The Subscriber interface" }, { "refs": [{ "id": "ref-for-invoke-a-callback-function\u2461" }, { "id": "ref-for-invoke-a-callback-function\u2462" }, { "id": "ref-for-invoke-a-callback-function\u2463" }, { "id": "ref-for-invoke-a-callback-function\u2464" }, { "id": "ref-for-invoke-a-callback-function\u2465" }, { "id": "ref-for-invoke-a-callback-function\u2466" }, { "id": "ref-for-invoke-a-callback-function\u2467" }], "title": "2.2.1. Supporting concepts" }, { "refs": [{ "id": "ref-for-invoke-a-callback-function\u2468" }, { "id": "ref-for-invoke-a-callback-function\u2460\u24ea" }, { "id": "ref-for-invoke-a-callback-function\u2460\u2460" }, { "id": "ref-for-invoke-a-callback-function\u2460\u2461" }, { "id": "ref-for-invoke-a-callback-function\u2460\u2462" }, { "id": "ref-for-invoke-a-callback-function\u2460\u2463" }, { "id": "ref-for-invoke-a-callback-function\u2460\u2464" }, { "id": "ref-for-invoke-a-callback-function\u2460\u2465" }, { "id": "ref-for-invoke-a-callback-function\u2460\u2466" }, { "id": "ref-for-invoke-a-callback-function\u2460\u2467" }], "title": "2.3.2. Observable-returning operators" }, { "refs": [{ "id": "ref-for-invoke-a-callback-function\u2460\u2468" }, { "id": "ref-for-invoke-a-callback-function\u2461\u24ea" }, { "id": "ref-for-invoke-a-callback-function\u2461\u2460" }, { "id": "ref-for-invoke-a-callback-function\u2461\u2461" }, { "id": "ref-for-invoke-a-callback-function\u2461\u2462" }], "title": "2.3.3. Promise-returning operators" }], "url": "https://webidl.spec.whatwg.org/#invoke-a-callback-function" },
                "1243a891": { "dfnID": "1243a891", "dfnText": "exist (for map)", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-map-exists" }, { "id": "ref-for-map-exists\u2460" }, { "id": "ref-for-map-exists\u2461" }, { "id": "ref-for-map-exists\u2462" }, { "id": "ref-for-map-exists\u2463" }], "title": "2.2.1. Supporting concepts" }, { "refs": [{ "id": "ref-for-map-exists\u2464" }, { "id": "ref-for-map-exists\u2465" }, { "id": "ref-for-map-exists\u2466" }, { "id": "ref-for-map-exists\u2467" }, { "id": "ref-for-map-exists\u2468" }], "title": "2.3.2. Observable-returning operators" }, { "refs": [{ "id": "ref-for-map-exists\u2460\u24ea" }], "title": "3. EventTarget integration" }], "url": "https://infra.spec.whatwg.org/#map-exists" },
                "129bdae8": { "dfnID": "129bdae8", "dfnText": "Event", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-event" }, { "id": "ref-for-event\u2460" }], "title": "3. EventTarget integration" }], "url": "https://dom.spec.whatwg.org/#event" },
                "168f1b6e": { "dfnID": "168f1b6e", "dfnText": "global object", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-realm-global" }], "title": "2.2.1. Supporting concepts" }], "url": "https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global" },
                "16d07e10": { "dfnID": "16d07e10", "dfnText": "for each", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-list-iterate" }, { "id": "ref-for-list-iterate\u2460" }, { "id": "ref-for-list-iterate\u2461" }, { "id": "ref-for-list-iterate\u2462" }], "title": "2.1. The Subscriber interface" }], "url": "https://infra.spec.whatwg.org/#list-iterate" },
                "19e79880": { "dfnID": "19e79880", "dfnText": "Iterator Record", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-sec-iterator-records" }, { "id": "ref-for-sec-iterator-records\u2460" }, { "id": "ref-for-sec-iterator-records\u2461" }], "title": "2.2.1. Supporting concepts" }], "url": "https://tc39.es/ecma262/#sec-iterator-records" },
                "19ea467c": { "dfnID": "19ea467c", "dfnText": "specific type", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dfn-specific-type" }], "title": "2.2.1. Supporting concepts" }], "url": "https://webidl.spec.whatwg.org/#dfn-specific-type" },
                "1f8de32a": { "dfnID": "1f8de32a", "dfnText": "GetIterator", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-sec-getiterator" }, { "id": "ref-for-sec-getiterator\u2460" }, { "id": "ref-for-sec-getiterator\u2461" }, { "id": "ref-for-sec-getiterator\u2462" }], "title": "2.2.1. Supporting concepts" }], "url": "https://tc39.es/ecma262/multipage/abstract-operations.html#sec-getiterator" },
                "2296404c": { "dfnID": "2296404c", "dfnText": "signal abort (for AbortController)", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-abortcontroller-signal-abort" }], "title": "2.3.2. Observable-returning operators" }, { "refs": [{ "id": "ref-for-abortcontroller-signal-abort\u2460" }, { "id": "ref-for-abortcontroller-signal-abort\u2461" }, { "id": "ref-for-abortcontroller-signal-abort\u2462" }, { "id": "ref-for-abortcontroller-signal-abort\u2463" }, { "id": "ref-for-abortcontroller-signal-abort\u2464" }, { "id": "ref-for-abortcontroller-signal-abort\u2465" }, { "id": "ref-for-abortcontroller-signal-abort\u2466" }, { "id": "ref-for-abortcontroller-signal-abort\u2467" }, { "id": "ref-for-abortcontroller-signal-abort\u2468" }, { "id": "ref-for-abortcontroller-signal-abort\u2460\u24ea" }], "title": "2.3.3. Promise-returning operators" }], "url": "https://dom.spec.whatwg.org/#abortcontroller-signal-abort" },
                "2bc0cdf4": { "dfnID": "2bc0cdf4", "dfnText": "EventTarget", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-eventtarget" }, { "id": "ref-for-eventtarget\u2460" }], "title": "3. EventTarget integration" }], "url": "https://dom.spec.whatwg.org/#eventtarget" },
                "2e66eaf1": { "dfnID": "2e66eaf1", "dfnText": "AbortController", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-abortcontroller" }], "title": "2.1. The Subscriber interface" }, { "refs": [{ "id": "ref-for-abortcontroller\u2460" }, { "id": "ref-for-abortcontroller\u2461" }, { "id": "ref-for-abortcontroller\u2462" }, { "id": "ref-for-abortcontroller\u2463" }, { "id": "ref-for-abortcontroller\u2464" }], "title": "2.3.2. Observable-returning operators" }, { "refs": [{ "id": "ref-for-abortcontroller\u2465" }, { "id": "ref-for-abortcontroller\u2466" }, { "id": "ref-for-abortcontroller\u2467" }, { "id": "ref-for-abortcontroller\u2468" }, { "id": "ref-for-abortcontroller\u2460\u24ea" }, { "id": "ref-for-abortcontroller\u2460\u2460" }, { "id": "ref-for-abortcontroller\u2460\u2461" }], "title": "2.3.3. Promise-returning operators" }], "url": "https://dom.spec.whatwg.org/#abortcontroller" },
                "2e75f88e": { "dfnID": "2e75f88e", "dfnText": "capture", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-event-listener-capture" }], "title": "3. EventTarget integration" }], "url": "https://dom.spec.whatwg.org#event-listener-capture" },
                "3349d69f": { "dfnID": "3349d69f", "dfnText": "associated Document", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-document-window" }, { "id": "ref-for-concept-document-window\u2460" }, { "id": "ref-for-concept-document-window\u2461" }, { "id": "ref-for-concept-document-window\u2462" }, { "id": "ref-for-concept-document-window\u2463" }], "title": "2.1. The Subscriber interface" }, { "refs": [{ "id": "ref-for-concept-document-window\u2464" }], "title": "2.2.1. Supporting concepts" }, { "refs": [{ "id": "ref-for-concept-document-window\u2465" }], "title": "3. EventTarget integration" }], "url": "https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window" },
                "36858240": { "dfnID": "36858240", "dfnText": "boolean", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-boolean" }, { "id": "ref-for-boolean\u2460" }, { "id": "ref-for-boolean\u2461" }, { "id": "ref-for-boolean\u2462" }, { "id": "ref-for-boolean\u2463" }, { "id": "ref-for-boolean\u2464" }], "title": "2.3.2. Observable-returning operators" }, { "refs": [{ "id": "ref-for-boolean\u2465" }], "title": "2.3.3. Promise-returning operators" }], "url": "https://infra.spec.whatwg.org/#boolean" },
                "3ab7bf79": { "dfnID": "3ab7bf79", "dfnText": "callback function", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dfn-callback-function" }, { "id": "ref-for-dfn-callback-function\u2460" }, { "id": "ref-for-dfn-callback-function\u2461" }, { "id": "ref-for-dfn-callback-function\u2462" }], "title": "2.2.1. Supporting concepts" }], "url": "https://webidl.spec.whatwg.org/#dfn-callback-function" },
                "3aec4bbc": { "dfnID": "3aec4bbc", "dfnText": "current realm", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-current-realm" }], "title": "2.2.1. Supporting concepts" }, { "refs": [{ "id": "ref-for-current-realm\u2460" }], "title": "2.3.2. Observable-returning operators" }, { "refs": [{ "id": "ref-for-current-realm\u2461" }, { "id": "ref-for-current-realm\u2462" }, { "id": "ref-for-current-realm\u2463" }, { "id": "ref-for-current-realm\u2464" }, { "id": "ref-for-current-realm\u2465" }, { "id": "ref-for-current-realm\u2466" }], "title": "2.3.3. Promise-returning operators" }], "url": "https://tc39.es/ecma262/#current-realm" },
                "3b90bdcd": { "dfnID": "3b90bdcd", "dfnText": "resolve", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-resolve" }, { "id": "ref-for-resolve\u2460" }, { "id": "ref-for-resolve\u2461" }, { "id": "ref-for-resolve\u2462" }, { "id": "ref-for-resolve\u2463" }, { "id": "ref-for-resolve\u2464" }, { "id": "ref-for-resolve\u2465" }, { "id": "ref-for-resolve\u2466" }, { "id": "ref-for-resolve\u2467" }, { "id": "ref-for-resolve\u2468" }, { "id": "ref-for-resolve\u2460\u24ea" }], "title": "2.3.3. Promise-returning operators" }], "url": "https://webidl.spec.whatwg.org/#resolve" },
                "3c3a94af": { "dfnID": "3c3a94af", "dfnText": "type", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-event-listener-type" }], "title": "3. EventTarget integration" }], "url": "https://dom.spec.whatwg.org#event-listener-type" },
                "3ea09d18": { "dfnID": "3ea09d18", "dfnText": "Type", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-sec-ecmascript-data-types-and-values" }, { "id": "ref-for-sec-ecmascript-data-types-and-values\u2460" }], "title": "2.2.1. Supporting concepts" }], "url": "https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values" },
                "3f076bc8": { "dfnID": "3f076bc8", "dfnText": "signal (for event listener)", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-event-listener-signal" }], "title": "3. EventTarget integration" }], "url": "https://dom.spec.whatwg.org#event-listener-signal" },
                "4013a022": { "dfnID": "4013a022", "dfnText": "this", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-this" }, { "id": "ref-for-this\u2460" }, { "id": "ref-for-this\u2461" }, { "id": "ref-for-this\u2462" }, { "id": "ref-for-this\u2463" }, { "id": "ref-for-this\u2464" }, { "id": "ref-for-this\u2465" }, { "id": "ref-for-this\u2466" }, { "id": "ref-for-this\u2467" }, { "id": "ref-for-this\u2468" }, { "id": "ref-for-this\u2460\u24ea" }, { "id": "ref-for-this\u2460\u2460" }, { "id": "ref-for-this\u2460\u2461" }, { "id": "ref-for-this\u2460\u2462" }, { "id": "ref-for-this\u2460\u2463" }, { "id": "ref-for-this\u2460\u2464" }, { "id": "ref-for-this\u2460\u2465" }], "title": "2.1. The Subscriber interface" }, { "refs": [{ "id": "ref-for-this\u2460\u2466" }, { "id": "ref-for-this\u2460\u2467" }], "title": "2.2. The Observable interface" }, { "refs": [{ "id": "ref-for-this\u2460\u2468" }, { "id": "ref-for-this\u2461\u24ea" }, { "id": "ref-for-this\u2461\u2460" }, { "id": "ref-for-this\u2461\u2461" }, { "id": "ref-for-this\u2461\u2462" }, { "id": "ref-for-this\u2461\u2463" }, { "id": "ref-for-this\u2461\u2464" }], "title": "2.2.1. Supporting concepts" }, { "refs": [{ "id": "ref-for-this\u2461\u2465" }, { "id": "ref-for-this\u2461\u2466" }, { "id": "ref-for-this\u2461\u2467" }, { "id": "ref-for-this\u2461\u2468" }, { "id": "ref-for-this\u2462\u24ea" }, { "id": "ref-for-this\u2462\u2460" }, { "id": "ref-for-this\u2462\u2461" }, { "id": "ref-for-this\u2462\u2462" }, { "id": "ref-for-this\u2462\u2463" }, { "id": "ref-for-this\u2462\u2464" }], "title": "2.3.2. Observable-returning operators" }, { "refs": [{ "id": "ref-for-this\u2462\u2465" }, { "id": "ref-for-this\u2462\u2466" }, { "id": "ref-for-this\u2462\u2467" }, { "id": "ref-for-this\u2462\u2468" }, { "id": "ref-for-this\u2463\u24ea" }, { "id": "ref-for-this\u2463\u2460" }, { "id": "ref-for-this\u2463\u2461" }, { "id": "ref-for-this\u2463\u2462" }, { "id": "ref-for-this\u2463\u2463" }, { "id": "ref-for-this\u2463\u2464" }, { "id": "ref-for-this\u2463\u2465" }], "title": "2.3.3. Promise-returning operators" }, { "refs": [{ "id": "ref-for-this\u2463\u2466" }, { "id": "ref-for-this\u2463\u2467" }], "title": "3. EventTarget integration" }], "url": "https://webidl.spec.whatwg.org/#this" },
                "4351f192": { "dfnID": "4351f192", "dfnText": "normal completion", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-sec-completion-record-specification-type" }, { "id": "ref-for-sec-completion-record-specification-type\u2460" }, { "id": "ref-for-sec-completion-record-specification-type\u2461" }, { "id": "ref-for-sec-completion-record-specification-type\u2462" }, { "id": "ref-for-sec-completion-record-specification-type\u2463" }, { "id": "ref-for-sec-completion-record-specification-type\u2464" }, { "id": "ref-for-sec-completion-record-specification-type\u2465" }], "title": "2.2.1. Supporting concepts" }], "url": "https://tc39.es/ecma262/#sec-completion-record-specification-type" },
                "45da773f": { "dfnID": "45da773f", "dfnText": "IsPromise", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-sec-ispromise" }], "title": "2.2.1. Supporting concepts" }], "url": "https://tc39.es/ecma262/multipage/control-abstraction-objects.html#sec-ispromise" },
                "51276d86": { "dfnID": "51276d86", "dfnText": "a promise rejected with", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-a-promise-rejected-with" }], "title": "2.2.1. Supporting concepts" }], "url": "https://webidl.spec.whatwg.org#a-promise-rejected-with" },
                "53079ce3": { "dfnID": "53079ce3", "dfnText": "queue a microtask", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-queue-a-microtask" }], "title": "2.3.3. Promise-returning operators" }], "url": "https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-microtask" },
                "53275e46": { "dfnID": "53275e46", "dfnText": "append (for list)", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-list-append" }], "title": "2.1. The Subscriber interface" }, { "refs": [{ "id": "ref-for-list-append\u2460" }], "title": "2.3.2. Observable-returning operators" }, { "refs": [{ "id": "ref-for-list-append\u2461" }], "title": "2.3.3. Promise-returning operators" }], "url": "https://infra.spec.whatwg.org/#list-append" },
                "535dd335": { "dfnID": "535dd335", "dfnText": "aborted", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-abortsignal-aborted" }, { "id": "ref-for-abortsignal-aborted\u2460" }, { "id": "ref-for-abortsignal-aborted\u2461" }, { "id": "ref-for-abortsignal-aborted\u2462" }, { "id": "ref-for-abortsignal-aborted\u2463" }, { "id": "ref-for-abortsignal-aborted\u2464" }, { "id": "ref-for-abortsignal-aborted\u2465" }, { "id": "ref-for-abortsignal-aborted\u2466" }], "title": "2.2.1. Supporting concepts" }, { "refs": [{ "id": "ref-for-abortsignal-aborted\u2467" }, { "id": "ref-for-abortsignal-aborted\u2468" }, { "id": "ref-for-abortsignal-aborted\u2460\u24ea" }, { "id": "ref-for-abortsignal-aborted\u2460\u2460" }, { "id": "ref-for-abortsignal-aborted\u2460\u2461" }, { "id": "ref-for-abortsignal-aborted\u2460\u2462" }, { "id": "ref-for-abortsignal-aborted\u2460\u2463" }, { "id": "ref-for-abortsignal-aborted\u2460\u2464" }], "title": "2.3.3. Promise-returning operators" }, { "refs": [{ "id": "ref-for-abortsignal-aborted\u2460\u2465" }, { "id": "ref-for-abortsignal-aborted\u2460\u2466" }], "title": "3. EventTarget integration" }], "url": "https://dom.spec.whatwg.org/#abortsignal-aborted" },
                "5372cca8": { "dfnID": "5372cca8", "dfnText": "boolean", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-idl-boolean" }], "title": "2.1. The Subscriber interface" }, { "refs": [{ "id": "ref-for-idl-boolean\u2460" }, { "id": "ref-for-idl-boolean\u2461" }, { "id": "ref-for-idl-boolean\u2462" }], "title": "2.2. The Observable interface" }, { "refs": [{ "id": "ref-for-idl-boolean\u2463" }, { "id": "ref-for-idl-boolean\u2464" }], "title": "3. EventTarget integration" }], "url": "https://webidl.spec.whatwg.org/#idl-boolean" },
                "560275c7": { "dfnID": "560275c7", "dfnText": "report an exception", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-report-an-exception" }], "title": "2.1. The Subscriber interface" }, { "refs": [{ "id": "ref-for-report-an-exception\u2460" }], "title": "2.2.1. Supporting concepts" }], "url": "https://html.spec.whatwg.org/multipage/webappapis.html#report-an-exception" },
                "56f81a8e": { "dfnID": "56f81a8e", "dfnText": "new", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-new" }, { "id": "ref-for-new\u2460" }, { "id": "ref-for-new\u2461" }, { "id": "ref-for-new\u2462" }], "title": "2.2.1. Supporting concepts" }, { "refs": [{ "id": "ref-for-new\u2463" }, { "id": "ref-for-new\u2464" }, { "id": "ref-for-new\u2465" }, { "id": "ref-for-new\u2466" }, { "id": "ref-for-new\u2467" }, { "id": "ref-for-new\u2468" }, { "id": "ref-for-new\u2460\u24ea" }, { "id": "ref-for-new\u2460\u2460" }, { "id": "ref-for-new\u2460\u2461" }, { "id": "ref-for-new\u2460\u2462" }, { "id": "ref-for-new\u2460\u2463" }], "title": "2.3.2. Observable-returning operators" }, { "refs": [{ "id": "ref-for-new\u2460\u2464" }, { "id": "ref-for-new\u2460\u2465" }, { "id": "ref-for-new\u2460\u2466" }, { "id": "ref-for-new\u2460\u2467" }, { "id": "ref-for-new\u2460\u2468" }, { "id": "ref-for-new\u2461\u24ea" }], "title": "2.3.3. Promise-returning operators" }, { "refs": [{ "id": "ref-for-new\u2461\u2460" }], "title": "3. EventTarget integration" }], "url": "https://webidl.spec.whatwg.org/#new" },
                "570979f1": { "dfnID": "570979f1", "dfnText": "!", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-sec-returnifabrupt-shorthands" }, { "id": "ref-for-sec-returnifabrupt-shorthands\u2460" }, { "id": "ref-for-sec-returnifabrupt-shorthands\u2461" }, { "id": "ref-for-sec-returnifabrupt-shorthands\u2462" }, { "id": "ref-for-sec-returnifabrupt-shorthands\u2463" }], "title": "2.2.1. Supporting concepts" }], "url": "https://tc39.es/ecma262/#sec-returnifabrupt-shorthands" },
                "5b7339ce": { "dfnID": "5b7339ce", "dfnText": "GetMethod", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-sec-getmethod" }, { "id": "ref-for-sec-getmethod\u2460" }, { "id": "ref-for-sec-getmethod\u2461" }, { "id": "ref-for-sec-getmethod\u2462" }], "title": "2.2.1. Supporting concepts" }], "url": "https://tc39.es/ecma262/multipage/abstract-operations.html#sec-getmethod" },
                "5d0f228f": { "dfnID": "5d0f228f", "dfnText": "IteratorStepValue", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-sec-iteratorstepvalue" }, { "id": "ref-for-sec-iteratorstepvalue\u2460" }, { "id": "ref-for-sec-iteratorstepvalue\u2461" }], "title": "2.2.1. Supporting concepts" }], "url": "https://tc39.es/ecma262/multipage/abstract-operations.html#sec-iteratorstepvalue" },
                "5d7209e9": { "dfnID": "5d7209e9", "dfnText": "Window", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-window" }, { "id": "ref-for-window\u2460" }, { "id": "ref-for-window\u2461" }, { "id": "ref-for-window\u2462" }, { "id": "ref-for-window\u2463" }], "title": "2.1. The Subscriber interface" }, { "refs": [{ "id": "ref-for-window\u2464" }], "title": "2.2.1. Supporting concepts" }, { "refs": [{ "id": "ref-for-window\u2465" }], "title": "3. EventTarget integration" }], "url": "https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" },
                "5f90bbfb": { "dfnID": "5f90bbfb", "dfnText": "undefined", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-idl-undefined" }, { "id": "ref-for-idl-undefined\u2460" }, { "id": "ref-for-idl-undefined\u2461" }, { "id": "ref-for-idl-undefined\u2462" }], "title": "2.1. The Subscriber interface" }, { "refs": [{ "id": "ref-for-idl-undefined\u2463" }, { "id": "ref-for-idl-undefined\u2464" }, { "id": "ref-for-idl-undefined\u2465" }, { "id": "ref-for-idl-undefined\u2466" }, { "id": "ref-for-idl-undefined\u2467" }, { "id": "ref-for-idl-undefined\u2468" }], "title": "2.2. The Observable interface" }, { "refs": [{ "id": "ref-for-idl-undefined\u2460\u24ea" }, { "id": "ref-for-idl-undefined\u2460\u2460" }], "title": "2.3.3. Promise-returning operators" }], "url": "https://webidl.spec.whatwg.org/#idl-undefined" },
                "622d9f0e": { "dfnID": "622d9f0e", "dfnText": "callback", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-event-listener-callback" }], "title": "3. EventTarget integration" }], "url": "https://dom.spec.whatwg.org/#event-listener-callback" },
                "649608b9": { "dfnID": "649608b9", "dfnText": "list", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-list" }], "title": "2.1. The Subscriber interface" }, { "refs": [{ "id": "ref-for-list\u2460" }, { "id": "ref-for-list\u2461" }], "title": "2.3.2. Observable-returning operators" }, { "refs": [{ "id": "ref-for-list\u2462" }], "title": "2.3.3. Promise-returning operators" }], "url": "https://infra.spec.whatwg.org/#list" },
                "670f0339": { "dfnID": "670f0339", "dfnText": "abort reason", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-abortsignal-abort-reason" }, { "id": "ref-for-abortsignal-abort-reason\u2460" }, { "id": "ref-for-abortsignal-abort-reason\u2461" }, { "id": "ref-for-abortsignal-abort-reason\u2462" }], "title": "2.2.1. Supporting concepts" }, { "refs": [{ "id": "ref-for-abortsignal-abort-reason\u2463" }], "title": "2.3.2. Observable-returning operators" }, { "refs": [{ "id": "ref-for-abortsignal-abort-reason\u2464" }, { "id": "ref-for-abortsignal-abort-reason\u2465" }, { "id": "ref-for-abortsignal-abort-reason\u2466" }, { "id": "ref-for-abortsignal-abort-reason\u2467" }, { "id": "ref-for-abortsignal-abort-reason\u2468" }, { "id": "ref-for-abortsignal-abort-reason\u2460\u24ea" }, { "id": "ref-for-abortsignal-abort-reason\u2460\u2460" }, { "id": "ref-for-abortsignal-abort-reason\u2460\u2461" }, { "id": "ref-for-abortsignal-abort-reason\u2460\u2462" }, { "id": "ref-for-abortsignal-abort-reason\u2460\u2463" }, { "id": "ref-for-abortsignal-abort-reason\u2460\u2464" }, { "id": "ref-for-abortsignal-abort-reason\u2460\u2465" }, { "id": "ref-for-abortsignal-abort-reason\u2460\u2466" }, { "id": "ref-for-abortsignal-abort-reason\u2460\u2467" }, { "id": "ref-for-abortsignal-abort-reason\u2460\u2468" }, { "id": "ref-for-abortsignal-abort-reason\u2461\u24ea" }], "title": "2.3.3. Promise-returning operators" }], "url": "https://dom.spec.whatwg.org#abortsignal-abort-reason" },
                "68d0559e": { "dfnID": "68d0559e", "dfnText": "IteratorValue", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-sec-iteratorvalue" }], "title": "2.2.1. Supporting concepts" }], "url": "https://tc39.es/ecma262/multipage/abstract-operations.html#sec-iteratorvalue" },
                "692595fe": { "dfnID": "692595fe", "dfnText": "ordered set", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-ordered-set" }], "title": "2.1. The Subscriber interface" }], "url": "https://infra.spec.whatwg.org/#ordered-set" },
                "6a288f2a": { "dfnID": "6a288f2a", "dfnText": "microtask", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-microtask" }], "title": "2.3.3. Promise-returning operators" }], "url": "https://html.spec.whatwg.org/multipage/webappapis.html#microtask" },
                "6c6b1005": { "dfnID": "6c6b1005", "dfnText": "any", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-idl-any" }, { "id": "ref-for-idl-any\u2460" }, { "id": "ref-for-idl-any\u2461" }], "title": "2.1. The Subscriber interface" }, { "refs": [{ "id": "ref-for-idl-any\u2462" }, { "id": "ref-for-idl-any\u2463" }, { "id": "ref-for-idl-any\u2464" }, { "id": "ref-for-idl-any\u2465" }, { "id": "ref-for-idl-any\u2466" }, { "id": "ref-for-idl-any\u2467" }, { "id": "ref-for-idl-any\u2468" }, { "id": "ref-for-idl-any\u2460\u24ea" }, { "id": "ref-for-idl-any\u2460\u2460" }, { "id": "ref-for-idl-any\u2460\u2461" }, { "id": "ref-for-idl-any\u2460\u2462" }, { "id": "ref-for-idl-any\u2460\u2463" }, { "id": "ref-for-idl-any\u2460\u2464" }, { "id": "ref-for-idl-any\u2460\u2465" }, { "id": "ref-for-idl-any\u2460\u2466" }, { "id": "ref-for-idl-any\u2460\u2467" }, { "id": "ref-for-idl-any\u2460\u2468" }, { "id": "ref-for-idl-any\u2461\u24ea" }, { "id": "ref-for-idl-any\u2461\u2460" }], "title": "2.2. The Observable interface" }, { "refs": [{ "id": "ref-for-idl-any\u2461\u2461" }, { "id": "ref-for-idl-any\u2461\u2462" }, { "id": "ref-for-idl-any\u2461\u2463" }, { "id": "ref-for-idl-any\u2461\u2464" }, { "id": "ref-for-idl-any\u2461\u2465" }, { "id": "ref-for-idl-any\u2461\u2466" }, { "id": "ref-for-idl-any\u2461\u2467" }], "title": "2.2.1. Supporting concepts" }, { "refs": [{ "id": "ref-for-idl-any\u2461\u2468" }, { "id": "ref-for-idl-any\u2462\u24ea" }, { "id": "ref-for-idl-any\u2462\u2460" }, { "id": "ref-for-idl-any\u2462\u2461" }, { "id": "ref-for-idl-any\u2462\u2462" }], "title": "2.3.2. Observable-returning operators" }, { "refs": [{ "id": "ref-for-idl-any\u2462\u2463" }], "title": "2.3.3. Promise-returning operators" }], "url": "https://webidl.spec.whatwg.org/#idl-any" },
                "7004c2a7": { "dfnID": "7004c2a7", "dfnText": "VoidFunction", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-VoidFunction" }, { "id": "ref-for-VoidFunction\u2460" }], "title": "2.1. The Subscriber interface" }, { "refs": [{ "id": "ref-for-VoidFunction\u2461" }, { "id": "ref-for-VoidFunction\u2462" }, { "id": "ref-for-VoidFunction\u2463" }, { "id": "ref-for-VoidFunction\u2464" }], "title": "2.2. The Observable interface" }, { "refs": [{ "id": "ref-for-VoidFunction\u2465" }, { "id": "ref-for-VoidFunction\u2466" }], "title": "2.3.2. Observable-returning operators" }], "url": "https://webidl.spec.whatwg.org/#VoidFunction" },
                "711357e0": { "dfnID": "711357e0", "dfnText": "abort", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-eventdef-abortsignal-abort" }], "title": "2.3.3. Promise-returning operators" }], "url": "https://dom.spec.whatwg.org/#eventdef-abortsignal-abort" },
                "72f4451c": { "dfnID": "72f4451c", "dfnText": "Await", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-await" }], "title": "2.2.1. Supporting concepts" }], "url": "https://tc39.es/ecma262/multipage/control-abstraction-objects.html#await" },
                "750a2f08": { "dfnID": "750a2f08", "dfnText": "react", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dfn-perform-steps-once-promise-is-settled" }, { "id": "ref-for-dfn-perform-steps-once-promise-is-settled\u2460" }, { "id": "ref-for-dfn-perform-steps-once-promise-is-settled\u2461" }], "title": "2.2.1. Supporting concepts" }], "url": "https://webidl.spec.whatwg.org/#dfn-perform-steps-once-promise-is-settled" },
                "75264195": { "dfnID": "75264195", "dfnText": "passive", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-event-listener-passive" }], "title": "3. EventTarget integration" }], "url": "https://dom.spec.whatwg.org#event-listener-passive" },
                "75393c04": { "dfnID": "75393c04", "dfnText": "exist (for list)", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-list-contain" }], "title": "2.3.2. Observable-returning operators" }], "url": "https://infra.spec.whatwg.org/#list-contain" },
                "77b4c09a": { "dfnID": "77b4c09a", "dfnText": "assert", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-assert" }, { "id": "ref-for-assert\u2460" }, { "id": "ref-for-assert\u2461" }], "title": "2.1. The Subscriber interface" }, { "refs": [{ "id": "ref-for-assert\u2462" }, { "id": "ref-for-assert\u2463" }, { "id": "ref-for-assert\u2464" }, { "id": "ref-for-assert\u2465" }], "title": "2.2.1. Supporting concepts" }, { "refs": [{ "id": "ref-for-assert\u2466" }], "title": "2.3.2. Observable-returning operators" }], "url": "https://infra.spec.whatwg.org/#assert" },
                "7b0d918d": { "dfnID": "7b0d918d", "dfnText": "break", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-iteration-break" }, { "id": "ref-for-iteration-break\u2460" }], "title": "2.2.1. Supporting concepts" }], "url": "https://infra.spec.whatwg.org/#iteration-break" },
                "82ca3efc": { "dfnID": "82ca3efc", "dfnText": "TypeError", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-exceptiondef-typeerror" }, { "id": "ref-for-exceptiondef-typeerror\u2460" }, { "id": "ref-for-exceptiondef-typeerror\u2461" }], "title": "2.2.1. Supporting concepts" }, { "refs": [{ "id": "ref-for-exceptiondef-typeerror\u2462" }], "title": "2.3.3. Promise-returning operators" }], "url": "https://webidl.spec.whatwg.org/#exceptiondef-typeerror" },
                "85394472": { "dfnID": "85394472", "dfnText": "Document", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-document" }], "title": "2.1. The Subscriber interface" }], "url": "https://dom.spec.whatwg.org/#document" },
                "87bc23a5": { "dfnID": "87bc23a5", "dfnText": "add", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-abortsignal-add" }, { "id": "ref-for-abortsignal-add\u2460" }, { "id": "ref-for-abortsignal-add\u2461" }, { "id": "ref-for-abortsignal-add\u2462" }], "title": "2.2.1. Supporting concepts" }, { "refs": [{ "id": "ref-for-abortsignal-add\u2463" }], "title": "2.3.2. Observable-returning operators" }, { "refs": [{ "id": "ref-for-abortsignal-add\u2464" }, { "id": "ref-for-abortsignal-add\u2465" }, { "id": "ref-for-abortsignal-add\u2466" }, { "id": "ref-for-abortsignal-add\u2467" }, { "id": "ref-for-abortsignal-add\u2468" }, { "id": "ref-for-abortsignal-add\u2460\u24ea" }, { "id": "ref-for-abortsignal-add\u2460\u2460" }, { "id": "ref-for-abortsignal-add\u2460\u2461" }], "title": "2.3.3. Promise-returning operators" }], "url": "https://dom.spec.whatwg.org/#abortsignal-add" },
                "8855a9aa": { "dfnID": "8855a9aa", "dfnText": "DOMString", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-idl-DOMString" }], "title": "3. EventTarget integration" }], "url": "https://webidl.spec.whatwg.org/#idl-DOMString" },
                "89aef5a4": { "dfnID": "89aef5a4", "dfnText": "signal abort (for AbortSignal)", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-abortsignal-signal-abort" }], "title": "2.1. The Subscriber interface" }, { "refs": [{ "id": "ref-for-abortsignal-signal-abort\u2460" }], "title": "2.3.2. Observable-returning operators" }, { "refs": [{ "id": "ref-for-abortsignal-signal-abort\u2461" }], "title": "2.3.3. Promise-returning operators" }], "url": "https://dom.spec.whatwg.org#abortsignal-signal-abort" },
                "8a0f541d": { "dfnID": "8a0f541d", "dfnText": "throw completion", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-sec-completion-record-specification-type" }, { "id": "ref-for-sec-completion-record-specification-type\u2460" }, { "id": "ref-for-sec-completion-record-specification-type\u2461" }, { "id": "ref-for-sec-completion-record-specification-type\u2462" }, { "id": "ref-for-sec-completion-record-specification-type\u2463" }, { "id": "ref-for-sec-completion-record-specification-type\u2464" }, { "id": "ref-for-sec-completion-record-specification-type\u2465" }], "title": "2.2.1. Supporting concepts" }], "url": "https://tc39.es/ecma262/#sec-completion-record-specification-type" },
                "8c6dc739": { "dfnID": "8c6dc739", "dfnText": "?", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-sec-returnifabrupt-shorthands" }, { "id": "ref-for-sec-returnifabrupt-shorthands\u2460" }, { "id": "ref-for-sec-returnifabrupt-shorthands\u2461" }, { "id": "ref-for-sec-returnifabrupt-shorthands\u2462" }, { "id": "ref-for-sec-returnifabrupt-shorthands\u2463" }], "title": "2.2.1. Supporting concepts" }], "url": "https://tc39.es/ecma262/#sec-returnifabrupt-shorthands" },
                "8f5c2179": { "dfnID": "8f5c2179", "dfnText": "a promise resolved with", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-a-promise-resolved-with" }], "title": "2.2.1. Supporting concepts" }], "url": "https://webidl.spec.whatwg.org/#a-promise-resolved-with" },
                "8fc9882c": { "dfnID": "8fc9882c", "dfnText": "once", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-event-listener-once" }], "title": "3. EventTarget integration" }], "url": "https://dom.spec.whatwg.org#event-listener-once" },
                "971914e6": { "dfnID": "971914e6", "dfnText": "%Symbol.iterator%", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-sec-well-known-symbols" }, { "id": "ref-for-sec-well-known-symbols\u2460" }, { "id": "ref-for-sec-well-known-symbols\u2461" }, { "id": "ref-for-sec-well-known-symbols\u2462" }], "title": "2.2.1. Supporting concepts" }], "url": "https://tc39.es/ecma262/multipage/ecmascript-data-types-and-values.html#sec-well-known-symbols" },
                "984221ca": { "dfnID": "984221ca", "dfnText": "struct", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-struct" }, { "id": "ref-for-struct\u2460" }], "title": "2.2.1. Supporting concepts" }], "url": "https://infra.spec.whatwg.org/#struct" },
                "99c988d6": { "dfnID": "99c988d6", "dfnText": "remove", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-list-remove" }, { "id": "ref-for-list-remove\u2460" }, { "id": "ref-for-list-remove\u2461" }], "title": "2.2.1. Supporting concepts" }, { "refs": [{ "id": "ref-for-list-remove\u2462" }], "title": "2.3.2. Observable-returning operators" }], "url": "https://infra.spec.whatwg.org/#list-remove" },
                "9cce47fd": { "dfnID": "9cce47fd", "dfnText": "sequence", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-idl-sequence" }], "title": "2.2. The Observable interface" }], "url": "https://webidl.spec.whatwg.org/#idl-sequence" },
                "a3b18719": { "dfnID": "a3b18719", "dfnText": "append (for set)", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-set-append" }, { "id": "ref-for-set-append\u2460" }], "title": "2.2.1. Supporting concepts" }], "url": "https://infra.spec.whatwg.org/#set-append" },
                "b262501e": { "dfnID": "b262501e", "dfnText": "reject", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-reject" }, { "id": "ref-for-reject\u2460" }, { "id": "ref-for-reject\u2461" }, { "id": "ref-for-reject\u2462" }, { "id": "ref-for-reject\u2463" }, { "id": "ref-for-reject\u2464" }, { "id": "ref-for-reject\u2465" }, { "id": "ref-for-reject\u2466" }, { "id": "ref-for-reject\u2467" }, { "id": "ref-for-reject\u2468" }, { "id": "ref-for-reject\u2460\u24ea" }, { "id": "ref-for-reject\u2460\u2460" }, { "id": "ref-for-reject\u2460\u2461" }, { "id": "ref-for-reject\u2460\u2462" }, { "id": "ref-for-reject\u2460\u2463" }, { "id": "ref-for-reject\u2460\u2464" }, { "id": "ref-for-reject\u2460\u2465" }, { "id": "ref-for-reject\u2460\u2466" }, { "id": "ref-for-reject\u2460\u2467" }, { "id": "ref-for-reject\u2460\u2468" }, { "id": "ref-for-reject\u2461\u24ea" }, { "id": "ref-for-reject\u2461\u2460" }, { "id": "ref-for-reject\u2461\u2461" }, { "id": "ref-for-reject\u2461\u2462" }, { "id": "ref-for-reject\u2461\u2463" }, { "id": "ref-for-reject\u2461\u2464" }, { "id": "ref-for-reject\u2461\u2465" }, { "id": "ref-for-reject\u2461\u2466" }, { "id": "ref-for-reject\u2461\u2467" }, { "id": "ref-for-reject\u2461\u2468" }, { "id": "ref-for-reject\u2462\u24ea" }, { "id": "ref-for-reject\u2462\u2460" }, { "id": "ref-for-reject\u2462\u2461" }], "title": "2.3.3. Promise-returning operators" }], "url": "https://webidl.spec.whatwg.org/#reject" },
                "b4cfa5ce": { "dfnID": "b4cfa5ce", "dfnText": "throw", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dfn-throw" }, { "id": "ref-for-dfn-throw\u2460" }], "title": "2.2.1. Supporting concepts" }], "url": "https://webidl.spec.whatwg.org/#dfn-throw" },
                "b8963c66": { "dfnID": "b8963c66", "dfnText": "NormalCompletion", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-sec-normalcompletion" }, { "id": "ref-for-sec-normalcompletion\u2460" }], "title": "2.2.1. Supporting concepts" }], "url": "https://tc39.es/ecma262/#sec-normalcompletion" },
                "bdbd19d1": { "dfnID": "bdbd19d1", "dfnText": "Promise", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-idl-promise" }, { "id": "ref-for-idl-promise\u2460" }, { "id": "ref-for-idl-promise\u2461" }, { "id": "ref-for-idl-promise\u2462" }, { "id": "ref-for-idl-promise\u2463" }, { "id": "ref-for-idl-promise\u2464" }, { "id": "ref-for-idl-promise\u2465" }, { "id": "ref-for-idl-promise\u2466" }], "title": "2.2. The Observable interface" }, { "refs": [{ "id": "ref-for-idl-promise\u2467" }, { "id": "ref-for-idl-promise\u2468" }, { "id": "ref-for-idl-promise\u2460\u24ea" }], "title": "2.2.1. Supporting concepts" }, { "refs": [{ "id": "ref-for-idl-promise\u2460\u2460" }], "title": "2.3.3. Promise-returning operators" }], "url": "https://webidl.spec.whatwg.org/#idl-promise" },
                "c872f9f3": { "dfnID": "c872f9f3", "dfnText": "IteratorClose", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-sec-iteratorclose" }], "title": "2.2.1. Supporting concepts" }], "url": "https://tc39.es/ecma262/multipage/abstract-operations.html#sec-iteratorclose" },
                "c88f3887": { "dfnID": "c88f3887", "dfnText": "item", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-struct-item" }], "title": "2.2.1. Supporting concepts" }], "url": "https://infra.spec.whatwg.org/#struct-item" },
                "c9db6cec": { "dfnID": "c9db6cec", "dfnText": "create a dependent abort signal", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-create-a-dependent-abort-signal" }], "title": "2.3.2. Observable-returning operators" }, { "refs": [{ "id": "ref-for-create-a-dependent-abort-signal\u2460" }, { "id": "ref-for-create-a-dependent-abort-signal\u2461" }, { "id": "ref-for-create-a-dependent-abort-signal\u2462" }, { "id": "ref-for-create-a-dependent-abort-signal\u2463" }, { "id": "ref-for-create-a-dependent-abort-signal\u2464" }, { "id": "ref-for-create-a-dependent-abort-signal\u2465" }, { "id": "ref-for-create-a-dependent-abort-signal\u2466" }], "title": "2.3.3. Promise-returning operators" }], "url": "https://dom.spec.whatwg.org/#create-a-dependent-abort-signal" },
                "callbackdef-catchcallback": { "dfnID": "callbackdef-catchcallback", "dfnText": "CatchCallback", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-callbackdef-catchcallback" }], "title": "2.2. The Observable interface" }], "url": "#callbackdef-catchcallback" },
                "callbackdef-mapper": { "dfnID": "callbackdef-mapper", "dfnText": "Mapper", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-callbackdef-mapper" }, { "id": "ref-for-callbackdef-mapper\u2460" }, { "id": "ref-for-callbackdef-mapper\u2461" }], "title": "2.2. The Observable interface" }, { "refs": [{ "id": "ref-for-callbackdef-mapper\u2462" }, { "id": "ref-for-callbackdef-mapper\u2463" }], "title": "2.3.2. Observable-returning operators" }], "url": "#callbackdef-mapper" },
                "callbackdef-observableinspectoraborthandler": { "dfnID": "callbackdef-observableinspectoraborthandler", "dfnText": "ObservableInspectorAbortHandler", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-callbackdef-observableinspectoraborthandler" }], "title": "2.2. The Observable interface" }, { "refs": [{ "id": "ref-for-callbackdef-observableinspectoraborthandler\u2460" }], "title": "2.3.2. Observable-returning operators" }], "url": "#callbackdef-observableinspectoraborthandler" },
                "callbackdef-observablesubscriptioncallback": { "dfnID": "callbackdef-observablesubscriptioncallback", "dfnText": "ObservableSubscriptionCallback", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-callbackdef-observablesubscriptioncallback" }, { "id": "ref-for-callbackdef-observablesubscriptioncallback\u2460" }, { "id": "ref-for-callbackdef-observablesubscriptioncallback\u2461" }, { "id": "ref-for-callbackdef-observablesubscriptioncallback\u2462" }, { "id": "ref-for-callbackdef-observablesubscriptioncallback\u2463" }, { "id": "ref-for-callbackdef-observablesubscriptioncallback\u2464" }], "title": "2.2. The Observable interface" }, { "refs": [{ "id": "ref-for-callbackdef-observablesubscriptioncallback\u2465" }], "title": "2.2.1. Supporting concepts" }, { "refs": [{ "id": "ref-for-callbackdef-observablesubscriptioncallback\u2466" }, { "id": "ref-for-callbackdef-observablesubscriptioncallback\u2467" }, { "id": "ref-for-callbackdef-observablesubscriptioncallback\u2468" }], "title": "2.3.2. Observable-returning operators" }], "url": "#callbackdef-observablesubscriptioncallback" },
                "callbackdef-predicate": { "dfnID": "callbackdef-predicate", "dfnText": "Predicate", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-callbackdef-predicate" }, { "id": "ref-for-callbackdef-predicate\u2460" }, { "id": "ref-for-callbackdef-predicate\u2461" }, { "id": "ref-for-callbackdef-predicate\u2462" }], "title": "2.2. The Observable interface" }], "url": "#callbackdef-predicate" },
                "callbackdef-reducer": { "dfnID": "callbackdef-reducer", "dfnText": "Reducer", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-callbackdef-reducer" }], "title": "2.2. The Observable interface" }], "url": "#callbackdef-reducer" },
                "callbackdef-subscribecallback": { "dfnID": "callbackdef-subscribecallback", "dfnText": "SubscribeCallback", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-callbackdef-subscribecallback" }, { "id": "ref-for-callbackdef-subscribecallback\u2460" }, { "id": "ref-for-callbackdef-subscribecallback\u2461" }], "title": "2.2. The Observable interface" }, { "refs": [{ "id": "ref-for-callbackdef-subscribecallback\u2462" }], "title": "2.2.1. Supporting concepts" }], "url": "#callbackdef-subscribecallback" },
                "callbackdef-visitor": { "dfnID": "callbackdef-visitor", "dfnText": "Visitor", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-callbackdef-visitor" }], "title": "2.2. The Observable interface" }], "url": "#callbackdef-visitor" },
                "cbdc89b4": { "dfnID": "cbdc89b4", "dfnText": "while", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-iteration-while" }], "title": "2.2.1. Supporting concepts" }], "url": "https://infra.spec.whatwg.org/#iteration-while" },
                "cc61f510": { "dfnID": "cc61f510", "dfnText": "an exception was thrown", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-an-exception-was-thrown" }, { "id": "ref-for-an-exception-was-thrown\u2460" }, { "id": "ref-for-an-exception-was-thrown\u2461" }], "title": "2.1. The Subscriber interface" }, { "refs": [{ "id": "ref-for-an-exception-was-thrown\u2462" }], "title": "2.2.1. Supporting concepts" }, { "refs": [{ "id": "ref-for-an-exception-was-thrown\u2463" }, { "id": "ref-for-an-exception-was-thrown\u2464" }, { "id": "ref-for-an-exception-was-thrown\u2465" }, { "id": "ref-for-an-exception-was-thrown\u2466" }, { "id": "ref-for-an-exception-was-thrown\u2467" }, { "id": "ref-for-an-exception-was-thrown\u2468" }, { "id": "ref-for-an-exception-was-thrown\u2460\u24ea" }, { "id": "ref-for-an-exception-was-thrown\u2460\u2460" }, { "id": "ref-for-an-exception-was-thrown\u2460\u2461" }, { "id": "ref-for-an-exception-was-thrown\u2460\u2462" }, { "id": "ref-for-an-exception-was-thrown\u2460\u2463" }, { "id": "ref-for-an-exception-was-thrown\u2460\u2464" }], "title": "2.3.2. Observable-returning operators" }, { "refs": [{ "id": "ref-for-an-exception-was-thrown\u2460\u2465" }, { "id": "ref-for-an-exception-was-thrown\u2460\u2466" }, { "id": "ref-for-an-exception-was-thrown\u2460\u2467" }, { "id": "ref-for-an-exception-was-thrown\u2460\u2468" }, { "id": "ref-for-an-exception-was-thrown\u2461\u24ea" }], "title": "2.3.3. Promise-returning operators" }], "url": "https://webidl.spec.whatwg.org/#an-exception-was-thrown" },
                "cca3cdb2": { "dfnID": "cca3cdb2", "dfnText": "AbortSignal", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-abortsignal" }], "title": "2.1. The Subscriber interface" }, { "refs": [{ "id": "ref-for-abortsignal\u2460" }], "title": "2.2. The Observable interface" }, { "refs": [{ "id": "ref-for-abortsignal\u2461" }], "title": "2.3.2. Observable-returning operators" }, { "refs": [{ "id": "ref-for-abortsignal\u2462" }, { "id": "ref-for-abortsignal\u2463" }, { "id": "ref-for-abortsignal\u2464" }, { "id": "ref-for-abortsignal\u2465" }, { "id": "ref-for-abortsignal\u2466" }, { "id": "ref-for-abortsignal\u2467" }, { "id": "ref-for-abortsignal\u2468" }], "title": "2.3.3. Promise-returning operators" }], "url": "https://dom.spec.whatwg.org/#abortsignal" },
                "close-a-subscription": { "dfnID": "close-a-subscription", "dfnText": "close a subscription", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-close-a-subscription" }, { "id": "ref-for-close-a-subscription\u2460" }, { "id": "ref-for-close-a-subscription\u2461" }], "title": "2.1. The Subscriber interface" }, { "refs": [{ "id": "ref-for-close-a-subscription\u2462" }, { "id": "ref-for-close-a-subscription\u2463" }, { "id": "ref-for-close-a-subscription\u2464" }], "title": "2.2.1. Supporting concepts" }, { "refs": [{ "id": "ref-for-close-a-subscription\u2465" }], "title": "2.3.3. Promise-returning operators" }], "url": "#close-a-subscription" },
                "d2e597b8": { "dfnID": "d2e597b8", "dfnText": "AsyncIteratorClose", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-sec-asynciteratorclose" }], "title": "2.2.1. Supporting concepts" }], "url": "https://tc39.es/ecma262/multipage/abstract-operations.html#sec-asynciteratorclose" },
                "d30f4c38": { "dfnID": "d30f4c38", "dfnText": "EventListener", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-callbackdef-eventlistener" }], "title": "3. EventTarget integration" }], "url": "https://dom.spec.whatwg.org/#callbackdef-eventlistener" },
                "dacde8b5": { "dfnID": "dacde8b5", "dfnText": "a new promise", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-a-new-promise" }, { "id": "ref-for-a-new-promise\u2460" }, { "id": "ref-for-a-new-promise\u2461" }, { "id": "ref-for-a-new-promise\u2462" }, { "id": "ref-for-a-new-promise\u2463" }, { "id": "ref-for-a-new-promise\u2464" }, { "id": "ref-for-a-new-promise\u2465" }, { "id": "ref-for-a-new-promise\u2466" }], "title": "2.3.3. Promise-returning operators" }], "url": "https://webidl.spec.whatwg.org/#a-new-promise" },
                "default-error-algorithm": { "dfnID": "default-error-algorithm", "dfnText": "default error algorithm", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-default-error-algorithm" }, { "id": "ref-for-default-error-algorithm\u2460" }], "title": "2.2.1. Supporting concepts" }], "url": "#default-error-algorithm" },
                "dictdef-observableeventlisteneroptions": { "dfnID": "dictdef-observableeventlisteneroptions", "dfnText": "ObservableEventListenerOptions", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dictdef-observableeventlisteneroptions" }], "title": "3. EventTarget integration" }], "url": "#dictdef-observableeventlisteneroptions" },
                "dictdef-observableinspector": { "dfnID": "dictdef-observableinspector", "dfnText": "ObservableInspector", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dictdef-observableinspector" }], "title": "2.2. The Observable interface" }, { "refs": [{ "id": "ref-for-dictdef-observableinspector\u2460" }], "title": "2.3.2. Observable-returning operators" }], "url": "#dictdef-observableinspector" },
                "dictdef-subscribeoptions": { "dfnID": "dictdef-subscribeoptions", "dfnText": "SubscribeOptions", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dictdef-subscribeoptions" }, { "id": "ref-for-dictdef-subscribeoptions\u2460" }, { "id": "ref-for-dictdef-subscribeoptions\u2461" }, { "id": "ref-for-dictdef-subscribeoptions\u2462" }, { "id": "ref-for-dictdef-subscribeoptions\u2463" }, { "id": "ref-for-dictdef-subscribeoptions\u2464" }, { "id": "ref-for-dictdef-subscribeoptions\u2465" }, { "id": "ref-for-dictdef-subscribeoptions\u2466" }, { "id": "ref-for-dictdef-subscribeoptions\u2467" }], "title": "2.2. The Observable interface" }, { "refs": [{ "id": "ref-for-dictdef-subscribeoptions\u2468" }], "title": "2.2.1. Supporting concepts" }, { "refs": [{ "id": "ref-for-dictdef-subscribeoptions\u2460\u24ea" }, { "id": "ref-for-dictdef-subscribeoptions\u2460\u2460" }, { "id": "ref-for-dictdef-subscribeoptions\u2460\u2461" }, { "id": "ref-for-dictdef-subscribeoptions\u2460\u2462" }, { "id": "ref-for-dictdef-subscribeoptions\u2460\u2463" }, { "id": "ref-for-dictdef-subscribeoptions\u2460\u2464" }, { "id": "ref-for-dictdef-subscribeoptions\u2460\u2465" }, { "id": "ref-for-dictdef-subscribeoptions\u2460\u2466" }, { "id": "ref-for-dictdef-subscribeoptions\u2460\u2467" }, { "id": "ref-for-dictdef-subscribeoptions\u2460\u2468" }, { "id": "ref-for-dictdef-subscribeoptions\u2461\u24ea" }, { "id": "ref-for-dictdef-subscribeoptions\u2461\u2460" }, { "id": "ref-for-dictdef-subscribeoptions\u2461\u2461" }, { "id": "ref-for-dictdef-subscribeoptions\u2461\u2462" }], "title": "2.3.2. Observable-returning operators" }, { "refs": [{ "id": "ref-for-dictdef-subscribeoptions\u2461\u2463" }, { "id": "ref-for-dictdef-subscribeoptions\u2461\u2464" }, { "id": "ref-for-dictdef-subscribeoptions\u2461\u2465" }, { "id": "ref-for-dictdef-subscribeoptions\u2461\u2466" }, { "id": "ref-for-dictdef-subscribeoptions\u2461\u2467" }, { "id": "ref-for-dictdef-subscribeoptions\u2461\u2468" }, { "id": "ref-for-dictdef-subscribeoptions\u2462\u24ea" }], "title": "2.3.3. Promise-returning operators" }], "url": "#dictdef-subscribeoptions" },
                "dictdef-subscriptionobserver": { "dfnID": "dictdef-subscriptionobserver", "dfnText": "SubscriptionObserver", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dictdef-subscriptionobserver" }], "title": "2.2. The Observable interface" }, { "refs": [{ "id": "ref-for-dictdef-subscriptionobserver\u2460" }], "title": "2.2.1. Supporting concepts" }], "url": "#dictdef-subscriptionobserver" },
                "dom-catchcallback-value": { "dfnID": "dom-catchcallback-value", "dfnText": "value", "external": false, "refSections": [], "url": "#dom-catchcallback-value" },
                "dom-eventtarget-when": { "dfnID": "dom-eventtarget-when", "dfnText": "when(type, options)", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-eventtarget-when" }], "title": "2.2. The Observable interface" }, { "refs": [{ "id": "ref-for-dom-eventtarget-when\u2460" }], "title": "3. EventTarget integration" }], "url": "#dom-eventtarget-when" },
                "dom-eventtarget-when-type-options-options": { "dfnID": "dom-eventtarget-when-type-options-options", "dfnText": "options", "external": false, "refSections": [], "url": "#dom-eventtarget-when-type-options-options" },
                "dom-eventtarget-when-type-options-type": { "dfnID": "dom-eventtarget-when-type-options-type", "dfnText": "type", "external": false, "refSections": [], "url": "#dom-eventtarget-when-type-options-type" },
                "dom-mapper-index": { "dfnID": "dom-mapper-index", "dfnText": "index", "external": false, "refSections": [], "url": "#dom-mapper-index" },
                "dom-mapper-value": { "dfnID": "dom-mapper-value", "dfnText": "value", "external": false, "refSections": [], "url": "#dom-mapper-value" },
                "dom-observable-catch": { "dfnID": "dom-observable-catch", "dfnText": "catch(callback)", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-observable-catch" }], "title": "2.2. The Observable interface" }], "url": "#dom-observable-catch" },
                "dom-observable-catch-callback-callback": { "dfnID": "dom-observable-catch-callback-callback", "dfnText": "callback", "external": false, "refSections": [], "url": "#dom-observable-catch-callback-callback" },
                "dom-observable-drop": { "dfnID": "dom-observable-drop", "dfnText": "drop(amount)", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-observable-drop" }], "title": "2.2. The Observable interface" }], "url": "#dom-observable-drop" },
                "dom-observable-drop-amount-amount": { "dfnID": "dom-observable-drop-amount-amount", "dfnText": "amount", "external": false, "refSections": [], "url": "#dom-observable-drop-amount-amount" },
                "dom-observable-every": { "dfnID": "dom-observable-every", "dfnText": "every(predicate, options)", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-observable-every" }], "title": "2.2. The Observable interface" }], "url": "#dom-observable-every" },
                "dom-observable-every-predicate-options-options": { "dfnID": "dom-observable-every-predicate-options-options", "dfnText": "options", "external": false, "refSections": [], "url": "#dom-observable-every-predicate-options-options" },
                "dom-observable-every-predicate-options-predicate": { "dfnID": "dom-observable-every-predicate-options-predicate", "dfnText": "predicate", "external": false, "refSections": [], "url": "#dom-observable-every-predicate-options-predicate" },
                "dom-observable-filter": { "dfnID": "dom-observable-filter", "dfnText": "filter(predicate)", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-observable-filter" }], "title": "2.2. The Observable interface" }], "url": "#dom-observable-filter" },
                "dom-observable-filter-predicate-predicate": { "dfnID": "dom-observable-filter-predicate-predicate", "dfnText": "predicate", "external": false, "refSections": [], "url": "#dom-observable-filter-predicate-predicate" },
                "dom-observable-finally": { "dfnID": "dom-observable-finally", "dfnText": "finally(callback)", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-observable-finally" }], "title": "2.2. The Observable interface" }], "url": "#dom-observable-finally" },
                "dom-observable-finally-callback-callback": { "dfnID": "dom-observable-finally-callback-callback", "dfnText": "callback", "external": false, "refSections": [], "url": "#dom-observable-finally-callback-callback" },
                "dom-observable-find": { "dfnID": "dom-observable-find", "dfnText": "find(predicate, options)", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-observable-find" }], "title": "2.2. The Observable interface" }], "url": "#dom-observable-find" },
                "dom-observable-find-predicate-options-options": { "dfnID": "dom-observable-find-predicate-options-options", "dfnText": "options", "external": false, "refSections": [], "url": "#dom-observable-find-predicate-options-options" },
                "dom-observable-find-predicate-options-predicate": { "dfnID": "dom-observable-find-predicate-options-predicate", "dfnText": "predicate", "external": false, "refSections": [], "url": "#dom-observable-find-predicate-options-predicate" },
                "dom-observable-first": { "dfnID": "dom-observable-first", "dfnText": "first(options)", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-observable-first" }], "title": "2.2. The Observable interface" }, { "refs": [{ "id": "ref-for-dom-observable-first\u2460" }], "title": "2.3.3. Promise-returning operators" }], "url": "#dom-observable-first" },
                "dom-observable-first-options-options": { "dfnID": "dom-observable-first-options-options", "dfnText": "options", "external": false, "refSections": [], "url": "#dom-observable-first-options-options" },
                "dom-observable-flatmap": { "dfnID": "dom-observable-flatmap", "dfnText": "flatMap(mapper)", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-observable-flatmap" }], "title": "2.2. The Observable interface" }], "url": "#dom-observable-flatmap" },
                "dom-observable-flatmap-mapper-mapper": { "dfnID": "dom-observable-flatmap-mapper-mapper", "dfnText": "mapper", "external": false, "refSections": [], "url": "#dom-observable-flatmap-mapper-mapper" },
                "dom-observable-foreach": { "dfnID": "dom-observable-foreach", "dfnText": "forEach(callback, options)", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-observable-foreach" }], "title": "2.2. The Observable interface" }], "url": "#dom-observable-foreach" },
                "dom-observable-foreach-callback-options-callback": { "dfnID": "dom-observable-foreach-callback-options-callback", "dfnText": "callback", "external": false, "refSections": [], "url": "#dom-observable-foreach-callback-options-callback" },
                "dom-observable-foreach-callback-options-options": { "dfnID": "dom-observable-foreach-callback-options-options", "dfnText": "options", "external": false, "refSections": [], "url": "#dom-observable-foreach-callback-options-options" },
                "dom-observable-from": { "dfnID": "dom-observable-from", "dfnText": "from(value)", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-observable-from" }], "title": "2.2. The Observable interface" }, { "refs": [{ "id": "ref-for-dom-observable-from\u2460" }], "title": "2.2.1. Supporting concepts" }, { "refs": [{ "id": "ref-for-dom-observable-from\u2461" }], "title": "2.3.1. from()" }, { "refs": [{ "id": "ref-for-dom-observable-from\u2462" }, { "id": "ref-for-dom-observable-from\u2463" }, { "id": "ref-for-dom-observable-from\u2464" }, { "id": "ref-for-dom-observable-from\u2465" }, { "id": "ref-for-dom-observable-from\u2466" }], "title": "2.3.2. Observable-returning operators" }], "url": "#dom-observable-from" },
                "dom-observable-from-value-value": { "dfnID": "dom-observable-from-value-value", "dfnText": "value", "external": false, "refSections": [], "url": "#dom-observable-from-value-value" },
                "dom-observable-inspect": { "dfnID": "dom-observable-inspect", "dfnText": "inspect(inspectorUnion)", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-observable-inspect" }], "title": "2.2. The Observable interface" }], "url": "#dom-observable-inspect" },
                "dom-observable-inspect-inspectorunion-inspectorunion": { "dfnID": "dom-observable-inspect-inspectorunion-inspectorunion", "dfnText": "inspectorUnion", "external": false, "refSections": [], "url": "#dom-observable-inspect-inspectorunion-inspectorunion" },
                "dom-observable-last": { "dfnID": "dom-observable-last", "dfnText": "last(options)", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-observable-last" }], "title": "2.2. The Observable interface" }], "url": "#dom-observable-last" },
                "dom-observable-last-options-options": { "dfnID": "dom-observable-last-options-options", "dfnText": "options", "external": false, "refSections": [], "url": "#dom-observable-last-options-options" },
                "dom-observable-map": { "dfnID": "dom-observable-map", "dfnText": "map(mapper)", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-observable-map" }], "title": "2.2. The Observable interface" }], "url": "#dom-observable-map" },
                "dom-observable-map-mapper-mapper": { "dfnID": "dom-observable-map-mapper-mapper", "dfnText": "mapper", "external": false, "refSections": [], "url": "#dom-observable-map-mapper-mapper" },
                "dom-observable-observable": { "dfnID": "dom-observable-observable", "dfnText": "new\n  Observable(callback)", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-observable-observable" }], "title": "2.2. The Observable interface" }], "url": "#dom-observable-observable" },
                "dom-observable-observable-callback-callback": { "dfnID": "dom-observable-observable-callback-callback", "dfnText": "callback", "external": false, "refSections": [], "url": "#dom-observable-observable-callback-callback" },
                "dom-observable-reduce": { "dfnID": "dom-observable-reduce", "dfnText": "reduce(reducer, initialValue, options)", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-observable-reduce" }], "title": "2.2. The Observable interface" }], "url": "#dom-observable-reduce" },
                "dom-observable-reduce-reducer-initialvalue-options-initialvalue": { "dfnID": "dom-observable-reduce-reducer-initialvalue-options-initialvalue", "dfnText": "initialValue", "external": false, "refSections": [], "url": "#dom-observable-reduce-reducer-initialvalue-options-initialvalue" },
                "dom-observable-reduce-reducer-initialvalue-options-options": { "dfnID": "dom-observable-reduce-reducer-initialvalue-options-options", "dfnText": "options", "external": false, "refSections": [], "url": "#dom-observable-reduce-reducer-initialvalue-options-options" },
                "dom-observable-reduce-reducer-initialvalue-options-reducer": { "dfnID": "dom-observable-reduce-reducer-initialvalue-options-reducer", "dfnText": "reducer", "external": false, "refSections": [], "url": "#dom-observable-reduce-reducer-initialvalue-options-reducer" },
                "dom-observable-some": { "dfnID": "dom-observable-some", "dfnText": "some(predicate, options)", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-observable-some" }], "title": "2.2. The Observable interface" }], "url": "#dom-observable-some" },
                "dom-observable-some-predicate-options-options": { "dfnID": "dom-observable-some-predicate-options-options", "dfnText": "options", "external": false, "refSections": [], "url": "#dom-observable-some-predicate-options-options" },
                "dom-observable-some-predicate-options-predicate": { "dfnID": "dom-observable-some-predicate-options-predicate", "dfnText": "predicate", "external": false, "refSections": [], "url": "#dom-observable-some-predicate-options-predicate" },
                "dom-observable-subscribe": { "dfnID": "dom-observable-subscribe", "dfnText": "subscribe(observer, options)", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-observable-subscribe" }, { "id": "ref-for-dom-observable-subscribe\u2460" }], "title": "2.2. The Observable interface" }, { "refs": [{ "id": "ref-for-dom-observable-subscribe\u2461" }, { "id": "ref-for-dom-observable-subscribe\u2462" }, { "id": "ref-for-dom-observable-subscribe\u2463" }], "title": "2.2.1. Supporting concepts" }], "url": "#dom-observable-subscribe" },
                "dom-observable-subscribe-observer-options-observer": { "dfnID": "dom-observable-subscribe-observer-options-observer", "dfnText": "observer", "external": false, "refSections": [], "url": "#dom-observable-subscribe-observer-options-observer" },
                "dom-observable-subscribe-observer-options-options": { "dfnID": "dom-observable-subscribe-observer-options-options", "dfnText": "options", "external": false, "refSections": [], "url": "#dom-observable-subscribe-observer-options-options" },
                "dom-observable-switchmap": { "dfnID": "dom-observable-switchmap", "dfnText": "switchMap(mapper)", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-observable-switchmap" }], "title": "2.2. The Observable interface" }, { "refs": [{ "id": "ref-for-dom-observable-switchmap\u2460" }, { "id": "ref-for-dom-observable-switchmap\u2461" }], "title": "2.3.2. Observable-returning operators" }], "url": "#dom-observable-switchmap" },
                "dom-observable-switchmap-mapper-mapper": { "dfnID": "dom-observable-switchmap-mapper-mapper", "dfnText": "mapper", "external": false, "refSections": [], "url": "#dom-observable-switchmap-mapper-mapper" },
                "dom-observable-take": { "dfnID": "dom-observable-take", "dfnText": "take(amount)", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-observable-take" }], "title": "2.2. The Observable interface" }], "url": "#dom-observable-take" },
                "dom-observable-take-amount-amount": { "dfnID": "dom-observable-take-amount-amount", "dfnText": "amount", "external": false, "refSections": [], "url": "#dom-observable-take-amount-amount" },
                "dom-observable-takeuntil": { "dfnID": "dom-observable-takeuntil", "dfnText": "takeUntil(value)", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-observable-takeuntil" }], "title": "2.2. The Observable interface" }], "url": "#dom-observable-takeuntil" },
                "dom-observable-takeuntil-value-value": { "dfnID": "dom-observable-takeuntil-value-value", "dfnText": "value", "external": false, "refSections": [], "url": "#dom-observable-takeuntil-value-value" },
                "dom-observable-toarray": { "dfnID": "dom-observable-toarray", "dfnText": "toArray(options)", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-observable-toarray" }], "title": "2.2. The Observable interface" }], "url": "#dom-observable-toarray" },
                "dom-observable-toarray-options-options": { "dfnID": "dom-observable-toarray-options-options", "dfnText": "options", "external": false, "refSections": [], "url": "#dom-observable-toarray-options-options" },
                "dom-observableeventlisteneroptions-capture": { "dfnID": "dom-observableeventlisteneroptions-capture", "dfnText": "capture", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-observableeventlisteneroptions-capture" }], "title": "3. EventTarget integration" }], "url": "#dom-observableeventlisteneroptions-capture" },
                "dom-observableeventlisteneroptions-passive": { "dfnID": "dom-observableeventlisteneroptions-passive", "dfnText": "passive", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-observableeventlisteneroptions-passive" }], "title": "3. EventTarget integration" }], "url": "#dom-observableeventlisteneroptions-passive" },
                "dom-observableinspector-abort": { "dfnID": "dom-observableinspector-abort", "dfnText": "abort", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-observableinspector-abort" }], "title": "2.3.2. Observable-returning operators" }], "url": "#dom-observableinspector-abort" },
                "dom-observableinspector-complete": { "dfnID": "dom-observableinspector-complete", "dfnText": "complete", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-observableinspector-complete" }], "title": "2.3.2. Observable-returning operators" }], "url": "#dom-observableinspector-complete" },
                "dom-observableinspector-error": { "dfnID": "dom-observableinspector-error", "dfnText": "error", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-observableinspector-error" }], "title": "2.3.2. Observable-returning operators" }], "url": "#dom-observableinspector-error" },
                "dom-observableinspector-next": { "dfnID": "dom-observableinspector-next", "dfnText": "next", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-observableinspector-next" }], "title": "2.3.2. Observable-returning operators" }], "url": "#dom-observableinspector-next" },
                "dom-observableinspector-subscribe": { "dfnID": "dom-observableinspector-subscribe", "dfnText": "subscribe", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-observableinspector-subscribe" }], "title": "2.3.2. Observable-returning operators" }], "url": "#dom-observableinspector-subscribe" },
                "dom-observableinspectoraborthandler-value": { "dfnID": "dom-observableinspectoraborthandler-value", "dfnText": "value", "external": false, "refSections": [], "url": "#dom-observableinspectoraborthandler-value" },
                "dom-observablesubscriptioncallback-value": { "dfnID": "dom-observablesubscriptioncallback-value", "dfnText": "value", "external": false, "refSections": [], "url": "#dom-observablesubscriptioncallback-value" },
                "dom-predicate-index": { "dfnID": "dom-predicate-index", "dfnText": "index", "external": false, "refSections": [], "url": "#dom-predicate-index" },
                "dom-predicate-value": { "dfnID": "dom-predicate-value", "dfnText": "value", "external": false, "refSections": [], "url": "#dom-predicate-value" },
                "dom-reducer-accumulator": { "dfnID": "dom-reducer-accumulator", "dfnText": "accumulator", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-reducer-accumulator" }, { "id": "ref-for-dom-reducer-accumulator\u2460" }], "title": "2.3.3. Promise-returning operators" }], "url": "#dom-reducer-accumulator" },
                "dom-reducer-currentvalue": { "dfnID": "dom-reducer-currentvalue", "dfnText": "currentValue", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-reducer-currentvalue" }, { "id": "ref-for-dom-reducer-currentvalue\u2460" }, { "id": "ref-for-dom-reducer-currentvalue\u2461" }], "title": "2.3.3. Promise-returning operators" }], "url": "#dom-reducer-currentvalue" },
                "dom-reducer-index": { "dfnID": "dom-reducer-index", "dfnText": "index", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-reducer-index" }], "title": "2.3.3. Promise-returning operators" }], "url": "#dom-reducer-index" },
                "dom-subscribecallback-subscriber": { "dfnID": "dom-subscribecallback-subscriber", "dfnText": "subscriber", "external": false, "refSections": [], "url": "#dom-subscribecallback-subscriber" },
                "dom-subscribeoptions-signal": { "dfnID": "dom-subscribeoptions-signal", "dfnText": "signal", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-subscribeoptions-signal" }, { "id": "ref-for-dom-subscribeoptions-signal\u2460" }, { "id": "ref-for-dom-subscribeoptions-signal\u2461" }, { "id": "ref-for-dom-subscribeoptions-signal\u2462" }, { "id": "ref-for-dom-subscribeoptions-signal\u2463" }, { "id": "ref-for-dom-subscribeoptions-signal\u2464" }, { "id": "ref-for-dom-subscribeoptions-signal\u2465" }, { "id": "ref-for-dom-subscribeoptions-signal\u2466" }, { "id": "ref-for-dom-subscribeoptions-signal\u2467" }], "title": "2.2.1. Supporting concepts" }, { "refs": [{ "id": "ref-for-dom-subscribeoptions-signal\u2468" }, { "id": "ref-for-dom-subscribeoptions-signal\u2460\u24ea" }, { "id": "ref-for-dom-subscribeoptions-signal\u2460\u2460" }, { "id": "ref-for-dom-subscribeoptions-signal\u2460\u2461" }, { "id": "ref-for-dom-subscribeoptions-signal\u2460\u2462" }, { "id": "ref-for-dom-subscribeoptions-signal\u2460\u2463" }, { "id": "ref-for-dom-subscribeoptions-signal\u2460\u2464" }, { "id": "ref-for-dom-subscribeoptions-signal\u2460\u2465" }, { "id": "ref-for-dom-subscribeoptions-signal\u2460\u2466" }, { "id": "ref-for-dom-subscribeoptions-signal\u2460\u2467" }, { "id": "ref-for-dom-subscribeoptions-signal\u2460\u2468" }, { "id": "ref-for-dom-subscribeoptions-signal\u2461\u24ea" }, { "id": "ref-for-dom-subscribeoptions-signal\u2461\u2460" }, { "id": "ref-for-dom-subscribeoptions-signal\u2461\u2461" }], "title": "2.3.2. Observable-returning operators" }, { "refs": [{ "id": "ref-for-dom-subscribeoptions-signal\u2461\u2462" }, { "id": "ref-for-dom-subscribeoptions-signal\u2461\u2463" }, { "id": "ref-for-dom-subscribeoptions-signal\u2461\u2464" }, { "id": "ref-for-dom-subscribeoptions-signal\u2461\u2465" }, { "id": "ref-for-dom-subscribeoptions-signal\u2461\u2466" }, { "id": "ref-for-dom-subscribeoptions-signal\u2461\u2467" }, { "id": "ref-for-dom-subscribeoptions-signal\u2461\u2468" }, { "id": "ref-for-dom-subscribeoptions-signal\u2462\u24ea" }, { "id": "ref-for-dom-subscribeoptions-signal\u2462\u2460" }, { "id": "ref-for-dom-subscribeoptions-signal\u2462\u2461" }, { "id": "ref-for-dom-subscribeoptions-signal\u2462\u2462" }, { "id": "ref-for-dom-subscribeoptions-signal\u2462\u2463" }, { "id": "ref-for-dom-subscribeoptions-signal\u2462\u2464" }, { "id": "ref-for-dom-subscribeoptions-signal\u2462\u2465" }, { "id": "ref-for-dom-subscribeoptions-signal\u2462\u2466" }, { "id": "ref-for-dom-subscribeoptions-signal\u2462\u2467" }, { "id": "ref-for-dom-subscribeoptions-signal\u2462\u2468" }, { "id": "ref-for-dom-subscribeoptions-signal\u2463\u24ea" }, { "id": "ref-for-dom-subscribeoptions-signal\u2463\u2460" }, { "id": "ref-for-dom-subscribeoptions-signal\u2463\u2461" }, { "id": "ref-for-dom-subscribeoptions-signal\u2463\u2462" }, { "id": "ref-for-dom-subscribeoptions-signal\u2463\u2463" }, { "id": "ref-for-dom-subscribeoptions-signal\u2463\u2464" }, { "id": "ref-for-dom-subscribeoptions-signal\u2463\u2465" }, { "id": "ref-for-dom-subscribeoptions-signal\u2463\u2466" }, { "id": "ref-for-dom-subscribeoptions-signal\u2463\u2467" }, { "id": "ref-for-dom-subscribeoptions-signal\u2463\u2468" }, { "id": "ref-for-dom-subscribeoptions-signal\u2464\u24ea" }, { "id": "ref-for-dom-subscribeoptions-signal\u2464\u2460" }, { "id": "ref-for-dom-subscribeoptions-signal\u2464\u2461" }, { "id": "ref-for-dom-subscribeoptions-signal\u2464\u2462" }, { "id": "ref-for-dom-subscribeoptions-signal\u2464\u2463" }, { "id": "ref-for-dom-subscribeoptions-signal\u2464\u2464" }, { "id": "ref-for-dom-subscribeoptions-signal\u2464\u2465" }, { "id": "ref-for-dom-subscribeoptions-signal\u2464\u2466" }, { "id": "ref-for-dom-subscribeoptions-signal\u2464\u2467" }, { "id": "ref-for-dom-subscribeoptions-signal\u2464\u2468" }, { "id": "ref-for-dom-subscribeoptions-signal\u2465\u24ea" }, { "id": "ref-for-dom-subscribeoptions-signal\u2465\u2460" }, { "id": "ref-for-dom-subscribeoptions-signal\u2465\u2461" }, { "id": "ref-for-dom-subscribeoptions-signal\u2465\u2462" }, { "id": "ref-for-dom-subscribeoptions-signal\u2465\u2463" }, { "id": "ref-for-dom-subscribeoptions-signal\u2465\u2464" }, { "id": "ref-for-dom-subscribeoptions-signal\u2465\u2465" }, { "id": "ref-for-dom-subscribeoptions-signal\u2465\u2466" }, { "id": "ref-for-dom-subscribeoptions-signal\u2465\u2467" }, { "id": "ref-for-dom-subscribeoptions-signal\u2465\u2468" }, { "id": "ref-for-dom-subscribeoptions-signal\u2466\u24ea" }, { "id": "ref-for-dom-subscribeoptions-signal\u2466\u2460" }, { "id": "ref-for-dom-subscribeoptions-signal\u2466\u2461" }, { "id": "ref-for-dom-subscribeoptions-signal\u2466\u2462" }, { "id": "ref-for-dom-subscribeoptions-signal\u2466\u2463" }], "title": "2.3.3. Promise-returning operators" }], "url": "#dom-subscribeoptions-signal" },
                "dom-subscriber-active": { "dfnID": "dom-subscriber-active", "dfnText": "active", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-subscriber-active" }], "title": "2.1. The Subscriber interface" }], "url": "#dom-subscriber-active" },
                "dom-subscriber-addteardown": { "dfnID": "dom-subscriber-addteardown", "dfnText": "addTeardown(teardown)", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-subscriber-addteardown" }], "title": "2.1. The Subscriber interface" }, { "refs": [{ "id": "ref-for-dom-subscriber-addteardown\u2460" }], "title": "2.3.2. Observable-returning operators" }], "url": "#dom-subscriber-addteardown" },
                "dom-subscriber-addteardown-teardown-teardown": { "dfnID": "dom-subscriber-addteardown-teardown-teardown", "dfnText": "teardown", "external": false, "refSections": [], "url": "#dom-subscriber-addteardown-teardown-teardown" },
                "dom-subscriber-complete": { "dfnID": "dom-subscriber-complete", "dfnText": "complete()", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-subscriber-complete" }], "title": "2.1. The Subscriber interface" }, { "refs": [{ "id": "ref-for-dom-subscriber-complete\u2460" }, { "id": "ref-for-dom-subscriber-complete\u2461" }, { "id": "ref-for-dom-subscriber-complete\u2462" }], "title": "2.2.1. Supporting concepts" }, { "refs": [{ "id": "ref-for-dom-subscriber-complete\u2463" }, { "id": "ref-for-dom-subscriber-complete\u2464" }, { "id": "ref-for-dom-subscriber-complete\u2465" }, { "id": "ref-for-dom-subscriber-complete\u2466" }, { "id": "ref-for-dom-subscriber-complete\u2467" }, { "id": "ref-for-dom-subscriber-complete\u2468" }, { "id": "ref-for-dom-subscriber-complete\u2460\u24ea" }, { "id": "ref-for-dom-subscriber-complete\u2460\u2460" }, { "id": "ref-for-dom-subscriber-complete\u2460\u2461" }, { "id": "ref-for-dom-subscriber-complete\u2460\u2462" }, { "id": "ref-for-dom-subscriber-complete\u2460\u2463" }, { "id": "ref-for-dom-subscriber-complete\u2460\u2464" }, { "id": "ref-for-dom-subscriber-complete\u2460\u2465" }, { "id": "ref-for-dom-subscriber-complete\u2460\u2466" }, { "id": "ref-for-dom-subscriber-complete\u2460\u2467" }, { "id": "ref-for-dom-subscriber-complete\u2460\u2468" }, { "id": "ref-for-dom-subscriber-complete\u2461\u24ea" }, { "id": "ref-for-dom-subscriber-complete\u2461\u2460" }, { "id": "ref-for-dom-subscriber-complete\u2461\u2461" }, { "id": "ref-for-dom-subscriber-complete\u2461\u2462" }], "title": "2.3.2. Observable-returning operators" }], "url": "#dom-subscriber-complete" },
                "dom-subscriber-error": { "dfnID": "dom-subscriber-error", "dfnText": "error(error)", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-subscriber-error" }], "title": "2.1. The Subscriber interface" }, { "refs": [{ "id": "ref-for-dom-subscriber-error\u2460" }, { "id": "ref-for-dom-subscriber-error\u2461" }, { "id": "ref-for-dom-subscriber-error\u2462" }, { "id": "ref-for-dom-subscriber-error\u2463" }, { "id": "ref-for-dom-subscriber-error\u2464" }, { "id": "ref-for-dom-subscriber-error\u2465" }, { "id": "ref-for-dom-subscriber-error\u2466" }, { "id": "ref-for-dom-subscriber-error\u2467" }, { "id": "ref-for-dom-subscriber-error\u2468" }, { "id": "ref-for-dom-subscriber-error\u2460\u24ea" }], "title": "2.2.1. Supporting concepts" }, { "refs": [{ "id": "ref-for-dom-subscriber-error\u2460\u2460" }, { "id": "ref-for-dom-subscriber-error\u2460\u2461" }, { "id": "ref-for-dom-subscriber-error\u2460\u2462" }, { "id": "ref-for-dom-subscriber-error\u2460\u2463" }, { "id": "ref-for-dom-subscriber-error\u2460\u2464" }, { "id": "ref-for-dom-subscriber-error\u2460\u2465" }, { "id": "ref-for-dom-subscriber-error\u2460\u2466" }, { "id": "ref-for-dom-subscriber-error\u2460\u2467" }, { "id": "ref-for-dom-subscriber-error\u2460\u2468" }, { "id": "ref-for-dom-subscriber-error\u2461\u24ea" }, { "id": "ref-for-dom-subscriber-error\u2461\u2460" }, { "id": "ref-for-dom-subscriber-error\u2461\u2461" }, { "id": "ref-for-dom-subscriber-error\u2461\u2462" }, { "id": "ref-for-dom-subscriber-error\u2461\u2463" }, { "id": "ref-for-dom-subscriber-error\u2461\u2464" }, { "id": "ref-for-dom-subscriber-error\u2461\u2465" }, { "id": "ref-for-dom-subscriber-error\u2461\u2466" }, { "id": "ref-for-dom-subscriber-error\u2461\u2467" }, { "id": "ref-for-dom-subscriber-error\u2461\u2468" }, { "id": "ref-for-dom-subscriber-error\u2462\u24ea" }, { "id": "ref-for-dom-subscriber-error\u2462\u2460" }, { "id": "ref-for-dom-subscriber-error\u2462\u2461" }, { "id": "ref-for-dom-subscriber-error\u2462\u2462" }, { "id": "ref-for-dom-subscriber-error\u2462\u2463" }, { "id": "ref-for-dom-subscriber-error\u2462\u2464" }, { "id": "ref-for-dom-subscriber-error\u2462\u2465" }, { "id": "ref-for-dom-subscriber-error\u2462\u2466" }], "title": "2.3.2. Observable-returning operators" }], "url": "#dom-subscriber-error" },
                "dom-subscriber-error-error-error": { "dfnID": "dom-subscriber-error-error-error", "dfnText": "error", "external": false, "refSections": [], "url": "#dom-subscriber-error-error-error" },
                "dom-subscriber-next": { "dfnID": "dom-subscriber-next", "dfnText": "next(value)", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-subscriber-next" }, { "id": "ref-for-dom-subscriber-next\u2460" }, { "id": "ref-for-dom-subscriber-next\u2461" }], "title": "2.1. The Subscriber interface" }, { "refs": [{ "id": "ref-for-dom-subscriber-next\u2462" }, { "id": "ref-for-dom-subscriber-next\u2463" }, { "id": "ref-for-dom-subscriber-next\u2464" }], "title": "2.2.1. Supporting concepts" }, { "refs": [{ "id": "ref-for-dom-subscriber-next\u2465" }, { "id": "ref-for-dom-subscriber-next\u2466" }, { "id": "ref-for-dom-subscriber-next\u2467" }, { "id": "ref-for-dom-subscriber-next\u2468" }, { "id": "ref-for-dom-subscriber-next\u2460\u24ea" }, { "id": "ref-for-dom-subscriber-next\u2460\u2460" }, { "id": "ref-for-dom-subscriber-next\u2460\u2461" }, { "id": "ref-for-dom-subscriber-next\u2460\u2462" }, { "id": "ref-for-dom-subscriber-next\u2460\u2463" }, { "id": "ref-for-dom-subscriber-next\u2460\u2464" }, { "id": "ref-for-dom-subscriber-next\u2460\u2465" }], "title": "2.3.2. Observable-returning operators" }, { "refs": [{ "id": "ref-for-dom-subscriber-next\u2460\u2466" }], "title": "3. EventTarget integration" }], "url": "#dom-subscriber-next" },
                "dom-subscriber-next-value-value": { "dfnID": "dom-subscriber-next-value-value", "dfnText": "value", "external": false, "refSections": [], "url": "#dom-subscriber-next-value-value" },
                "dom-subscriber-signal": { "dfnID": "dom-subscriber-signal", "dfnText": "signal", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-subscriber-signal" }], "title": "2.1. The Subscriber interface" }], "url": "#dom-subscriber-signal" },
                "dom-subscriptionobserver-complete": { "dfnID": "dom-subscriptionobserver-complete", "dfnText": "complete", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-subscriptionobserver-complete" }, { "id": "ref-for-dom-subscriptionobserver-complete\u2460" }, { "id": "ref-for-dom-subscriptionobserver-complete\u2461" }, { "id": "ref-for-dom-subscriptionobserver-complete\u2462" }], "title": "2.2.1. Supporting concepts" }], "url": "#dom-subscriptionobserver-complete" },
                "dom-subscriptionobserver-error": { "dfnID": "dom-subscriptionobserver-error", "dfnText": "error", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-subscriptionobserver-error" }, { "id": "ref-for-dom-subscriptionobserver-error\u2460" }, { "id": "ref-for-dom-subscriptionobserver-error\u2461" }, { "id": "ref-for-dom-subscriptionobserver-error\u2462" }, { "id": "ref-for-dom-subscriptionobserver-error\u2463" }], "title": "2.2.1. Supporting concepts" }], "url": "#dom-subscriptionobserver-error" },
                "dom-subscriptionobserver-next": { "dfnID": "dom-subscriptionobserver-next", "dfnText": "next", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-subscriptionobserver-next" }, { "id": "ref-for-dom-subscriptionobserver-next\u2460" }, { "id": "ref-for-dom-subscriptionobserver-next\u2461" }, { "id": "ref-for-dom-subscriptionobserver-next\u2462" }], "title": "2.2.1. Supporting concepts" }], "url": "#dom-subscriptionobserver-next" },
                "dom-visitor-index": { "dfnID": "dom-visitor-index", "dfnText": "index", "external": false, "refSections": [], "url": "#dom-visitor-index" },
                "dom-visitor-value": { "dfnID": "dom-visitor-value", "dfnText": "value", "external": false, "refSections": [], "url": "#dom-visitor-value" },
                "e99bd18e": { "dfnID": "e99bd18e", "dfnText": "relevant global object", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-relevant-global" }, { "id": "ref-for-concept-relevant-global\u2460" }, { "id": "ref-for-concept-relevant-global\u2461" }, { "id": "ref-for-concept-relevant-global\u2462" }, { "id": "ref-for-concept-relevant-global\u2463" }, { "id": "ref-for-concept-relevant-global\u2464" }], "title": "2.1. The Subscriber interface" }, { "refs": [{ "id": "ref-for-concept-relevant-global\u2465" }], "title": "2.2.1. Supporting concepts" }, { "refs": [{ "id": "ref-for-concept-relevant-global\u2466" }], "title": "3. EventTarget integration" }], "url": "https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" },
                "ec878a66": { "dfnID": "ec878a66", "dfnText": "RangeError", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-exceptiondef-rangeerror" }, { "id": "ref-for-exceptiondef-rangeerror\u2460" }], "title": "2.3.3. Promise-returning operators" }], "url": "https://webidl.spec.whatwg.org/#exceptiondef-rangeerror" },
                "f14b47b8": { "dfnID": "f14b47b8", "dfnText": "unsigned long long", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-idl-unsigned-long-long" }, { "id": "ref-for-idl-unsigned-long-long\u2460" }, { "id": "ref-for-idl-unsigned-long-long\u2461" }, { "id": "ref-for-idl-unsigned-long-long\u2462" }, { "id": "ref-for-idl-unsigned-long-long\u2463" }, { "id": "ref-for-idl-unsigned-long-long\u2464" }], "title": "2.2. The Observable interface" }, { "refs": [{ "id": "ref-for-idl-unsigned-long-long\u2465" }, { "id": "ref-for-idl-unsigned-long-long\u2466" }, { "id": "ref-for-idl-unsigned-long-long\u2467" }, { "id": "ref-for-idl-unsigned-long-long\u2468" }, { "id": "ref-for-idl-unsigned-long-long\u2460\u24ea" }, { "id": "ref-for-idl-unsigned-long-long\u2460\u2460" }], "title": "2.3.2. Observable-returning operators" }, { "refs": [{ "id": "ref-for-idl-unsigned-long-long\u2460\u2461" }, { "id": "ref-for-idl-unsigned-long-long\u2460\u2462" }, { "id": "ref-for-idl-unsigned-long-long\u2460\u2463" }, { "id": "ref-for-idl-unsigned-long-long\u2460\u2464" }, { "id": "ref-for-idl-unsigned-long-long\u2460\u2465" }], "title": "2.3.3. Promise-returning operators" }], "url": "https://webidl.spec.whatwg.org/#idl-unsigned-long-long" },
                "f99bafb9": { "dfnID": "f99bafb9", "dfnText": "add an event listener", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-add-an-event-listener" }], "title": "3. EventTarget integration" }], "url": "https://dom.spec.whatwg.org/#add-an-event-listener" },
                "fd82ae84": { "dfnID": "fd82ae84", "dfnText": "Object", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-sec-object-type" }], "title": "2.2.1. Supporting concepts" }], "url": "https://tc39.es/ecma262/#sec-object-type" },
                "ff81eaa7": { "dfnID": "ff81eaa7", "dfnText": "%Symbol.asyncIterator%", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-sec-well-known-symbols" }, { "id": "ref-for-sec-well-known-symbols\u2460" }, { "id": "ref-for-sec-well-known-symbols\u2461" }, { "id": "ref-for-sec-well-known-symbols\u2462" }], "title": "2.2.1. Supporting concepts" }], "url": "https://tc39.es/ecma262/multipage/ecmascript-data-types-and-values.html#sec-well-known-symbols" },
                "ff87eaf9": { "dfnID": "ff87eaf9", "dfnText": "remove", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-abortsignal-remove" }, { "id": "ref-for-abortsignal-remove\u2460" }, { "id": "ref-for-abortsignal-remove\u2461" }], "title": "2.3.2. Observable-returning operators" }], "url": "https://dom.spec.whatwg.org/#abortsignal-remove" },
                "flatmap-process-next-value-steps": { "dfnID": "flatmap-process-next-value-steps", "dfnText": "flatmap process next value steps", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-flatmap-process-next-value-steps" }, { "id": "ref-for-flatmap-process-next-value-steps\u2460" }, { "id": "ref-for-flatmap-process-next-value-steps\u2461" }, { "id": "ref-for-flatmap-process-next-value-steps\u2462" }], "title": "2.3.2. Observable-returning operators" }], "url": "#flatmap-process-next-value-steps" },
                "internal-observer": { "dfnID": "internal-observer", "dfnText": "internal observer", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-internal-observer" }], "title": "2.1. The Subscriber interface" }, { "refs": [{ "id": "ref-for-internal-observer\u2460" }, { "id": "ref-for-internal-observer\u2461" }, { "id": "ref-for-internal-observer\u2462" }, { "id": "ref-for-internal-observer\u2463" }], "title": "2.2.1. Supporting concepts" }, { "refs": [{ "id": "ref-for-internal-observer\u2464" }, { "id": "ref-for-internal-observer\u2465" }, { "id": "ref-for-internal-observer\u2466" }, { "id": "ref-for-internal-observer\u2467" }, { "id": "ref-for-internal-observer\u2468" }, { "id": "ref-for-internal-observer\u2460\u24ea" }, { "id": "ref-for-internal-observer\u2460\u2460" }, { "id": "ref-for-internal-observer\u2460\u2461" }, { "id": "ref-for-internal-observer\u2460\u2462" }, { "id": "ref-for-internal-observer\u2460\u2463" }, { "id": "ref-for-internal-observer\u2460\u2464" }, { "id": "ref-for-internal-observer\u2460\u2465" }, { "id": "ref-for-internal-observer\u2460\u2466" }, { "id": "ref-for-internal-observer\u2460\u2467" }], "title": "2.3.2. Observable-returning operators" }, { "refs": [{ "id": "ref-for-internal-observer\u2460\u2468" }, { "id": "ref-for-internal-observer\u2461\u24ea" }, { "id": "ref-for-internal-observer\u2461\u2460" }, { "id": "ref-for-internal-observer\u2461\u2461" }, { "id": "ref-for-internal-observer\u2461\u2462" }, { "id": "ref-for-internal-observer\u2461\u2463" }, { "id": "ref-for-internal-observer\u2461\u2464" }, { "id": "ref-for-internal-observer\u2461\u2465" }, { "id": "ref-for-internal-observer\u2461\u2466" }], "title": "2.3.3. Promise-returning operators" }], "url": "#internal-observer" },
                "internal-observer-complete-steps": { "dfnID": "internal-observer-complete-steps", "dfnText": "complete steps", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-internal-observer-complete-steps" }], "title": "2.1. The Subscriber interface" }, { "refs": [{ "id": "ref-for-internal-observer-complete-steps\u2460" }], "title": "2.2.1. Supporting concepts" }, { "refs": [{ "id": "ref-for-internal-observer-complete-steps\u2461" }, { "id": "ref-for-internal-observer-complete-steps\u2462" }, { "id": "ref-for-internal-observer-complete-steps\u2463" }, { "id": "ref-for-internal-observer-complete-steps\u2464" }, { "id": "ref-for-internal-observer-complete-steps\u2465" }, { "id": "ref-for-internal-observer-complete-steps\u2466" }, { "id": "ref-for-internal-observer-complete-steps\u2467" }, { "id": "ref-for-internal-observer-complete-steps\u2468" }, { "id": "ref-for-internal-observer-complete-steps\u2460\u24ea" }, { "id": "ref-for-internal-observer-complete-steps\u2460\u2460" }, { "id": "ref-for-internal-observer-complete-steps\u2460\u2461" }, { "id": "ref-for-internal-observer-complete-steps\u2460\u2462" }, { "id": "ref-for-internal-observer-complete-steps\u2460\u2463" }, { "id": "ref-for-internal-observer-complete-steps\u2460\u2464" }], "title": "2.3.2. Observable-returning operators" }, { "refs": [{ "id": "ref-for-internal-observer-complete-steps\u2460\u2465" }, { "id": "ref-for-internal-observer-complete-steps\u2460\u2466" }, { "id": "ref-for-internal-observer-complete-steps\u2460\u2467" }, { "id": "ref-for-internal-observer-complete-steps\u2460\u2468" }, { "id": "ref-for-internal-observer-complete-steps\u2461\u24ea" }, { "id": "ref-for-internal-observer-complete-steps\u2461\u2460" }, { "id": "ref-for-internal-observer-complete-steps\u2461\u2461" }, { "id": "ref-for-internal-observer-complete-steps\u2461\u2462" }, { "id": "ref-for-internal-observer-complete-steps\u2461\u2463" }], "title": "2.3.3. Promise-returning operators" }], "url": "#internal-observer-complete-steps" },
                "internal-observer-error-steps": { "dfnID": "internal-observer-error-steps", "dfnText": "error steps", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-internal-observer-error-steps" }], "title": "2.1. The Subscriber interface" }, { "refs": [{ "id": "ref-for-internal-observer-error-steps\u2460" }, { "id": "ref-for-internal-observer-error-steps\u2461" }], "title": "2.2.1. Supporting concepts" }, { "refs": [{ "id": "ref-for-internal-observer-error-steps\u2462" }, { "id": "ref-for-internal-observer-error-steps\u2463" }, { "id": "ref-for-internal-observer-error-steps\u2464" }, { "id": "ref-for-internal-observer-error-steps\u2465" }, { "id": "ref-for-internal-observer-error-steps\u2466" }, { "id": "ref-for-internal-observer-error-steps\u2467" }, { "id": "ref-for-internal-observer-error-steps\u2468" }, { "id": "ref-for-internal-observer-error-steps\u2460\u24ea" }, { "id": "ref-for-internal-observer-error-steps\u2460\u2460" }, { "id": "ref-for-internal-observer-error-steps\u2460\u2461" }, { "id": "ref-for-internal-observer-error-steps\u2460\u2462" }, { "id": "ref-for-internal-observer-error-steps\u2460\u2463" }, { "id": "ref-for-internal-observer-error-steps\u2460\u2464" }, { "id": "ref-for-internal-observer-error-steps\u2460\u2465" }, { "id": "ref-for-internal-observer-error-steps\u2460\u2466" }], "title": "2.3.2. Observable-returning operators" }, { "refs": [{ "id": "ref-for-internal-observer-error-steps\u2460\u2467" }, { "id": "ref-for-internal-observer-error-steps\u2460\u2468" }, { "id": "ref-for-internal-observer-error-steps\u2461\u24ea" }, { "id": "ref-for-internal-observer-error-steps\u2461\u2460" }, { "id": "ref-for-internal-observer-error-steps\u2461\u2461" }, { "id": "ref-for-internal-observer-error-steps\u2461\u2462" }, { "id": "ref-for-internal-observer-error-steps\u2461\u2463" }, { "id": "ref-for-internal-observer-error-steps\u2461\u2464" }, { "id": "ref-for-internal-observer-error-steps\u2461\u2465" }], "title": "2.3.3. Promise-returning operators" }], "url": "#internal-observer-error-steps" },
                "internal-observer-next-steps": { "dfnID": "internal-observer-next-steps", "dfnText": "next steps", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-internal-observer-next-steps" }, { "id": "ref-for-internal-observer-next-steps\u2460" }, { "id": "ref-for-internal-observer-next-steps\u2461" }, { "id": "ref-for-internal-observer-next-steps\u2462" }], "title": "2.1. The Subscriber interface" }, { "refs": [{ "id": "ref-for-internal-observer-next-steps\u2463" }, { "id": "ref-for-internal-observer-next-steps\u2464" }], "title": "2.2.1. Supporting concepts" }, { "refs": [{ "id": "ref-for-internal-observer-next-steps\u2465" }, { "id": "ref-for-internal-observer-next-steps\u2466" }, { "id": "ref-for-internal-observer-next-steps\u2467" }, { "id": "ref-for-internal-observer-next-steps\u2468" }, { "id": "ref-for-internal-observer-next-steps\u2460\u24ea" }, { "id": "ref-for-internal-observer-next-steps\u2460\u2460" }, { "id": "ref-for-internal-observer-next-steps\u2460\u2461" }, { "id": "ref-for-internal-observer-next-steps\u2460\u2462" }, { "id": "ref-for-internal-observer-next-steps\u2460\u2463" }, { "id": "ref-for-internal-observer-next-steps\u2460\u2464" }, { "id": "ref-for-internal-observer-next-steps\u2460\u2465" }, { "id": "ref-for-internal-observer-next-steps\u2460\u2466" }, { "id": "ref-for-internal-observer-next-steps\u2460\u2467" }, { "id": "ref-for-internal-observer-next-steps\u2460\u2468" }], "title": "2.3.2. Observable-returning operators" }, { "refs": [{ "id": "ref-for-internal-observer-next-steps\u2461\u24ea" }, { "id": "ref-for-internal-observer-next-steps\u2461\u2460" }, { "id": "ref-for-internal-observer-next-steps\u2461\u2461" }, { "id": "ref-for-internal-observer-next-steps\u2461\u2462" }, { "id": "ref-for-internal-observer-next-steps\u2461\u2463" }, { "id": "ref-for-internal-observer-next-steps\u2461\u2464" }, { "id": "ref-for-internal-observer-next-steps\u2461\u2465" }, { "id": "ref-for-internal-observer-next-steps\u2461\u2466" }, { "id": "ref-for-internal-observer-next-steps\u2461\u2467" }, { "id": "ref-for-internal-observer-next-steps\u2461\u2468" }, { "id": "ref-for-internal-observer-next-steps\u2462\u24ea" }], "title": "2.3.3. Promise-returning operators" }], "url": "#internal-observer-next-steps" },
                "observable": { "dfnID": "observable", "dfnText": "Observable", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-observable" }, { "id": "ref-for-observable\u2460" }, { "id": "ref-for-observable\u2461" }, { "id": "ref-for-observable\u2462" }, { "id": "ref-for-observable\u2463" }, { "id": "ref-for-observable\u2464" }, { "id": "ref-for-observable\u2465" }, { "id": "ref-for-observable\u2466" }, { "id": "ref-for-observable\u2467" }, { "id": "ref-for-observable\u2468" }, { "id": "ref-for-observable\u2460\u24ea" }, { "id": "ref-for-observable\u2460\u2460" }, { "id": "ref-for-observable\u2460\u2461" }, { "id": "ref-for-observable\u2460\u2462" }, { "id": "ref-for-observable\u2460\u2463" }, { "id": "ref-for-observable\u2460\u2464" }], "title": "2.2. The Observable interface" }, { "refs": [{ "id": "ref-for-observable\u2460\u2465" }, { "id": "ref-for-observable\u2460\u2466" }, { "id": "ref-for-observable\u2460\u2467" }, { "id": "ref-for-observable\u2460\u2468" }, { "id": "ref-for-observable\u2461\u24ea" }, { "id": "ref-for-observable\u2461\u2460" }, { "id": "ref-for-observable\u2461\u2461" }, { "id": "ref-for-observable\u2461\u2462" }, { "id": "ref-for-observable\u2461\u2463" }, { "id": "ref-for-observable\u2461\u2464" }], "title": "2.2.1. Supporting concepts" }, { "refs": [{ "id": "ref-for-observable\u2461\u2465" }], "title": "2.3.1. from()" }, { "refs": [{ "id": "ref-for-observable\u2461\u2466" }, { "id": "ref-for-observable\u2461\u2467" }, { "id": "ref-for-observable\u2461\u2468" }, { "id": "ref-for-observable\u2462\u24ea" }, { "id": "ref-for-observable\u2462\u2460" }, { "id": "ref-for-observable\u2462\u2461" }, { "id": "ref-for-observable\u2462\u2462" }, { "id": "ref-for-observable\u2462\u2463" }, { "id": "ref-for-observable\u2462\u2464" }, { "id": "ref-for-observable\u2462\u2465" }, { "id": "ref-for-observable\u2462\u2466" }, { "id": "ref-for-observable\u2462\u2467" }, { "id": "ref-for-observable\u2462\u2468" }, { "id": "ref-for-observable\u2463\u24ea" }, { "id": "ref-for-observable\u2463\u2460" }, { "id": "ref-for-observable\u2463\u2461" }, { "id": "ref-for-observable\u2463\u2462" }, { "id": "ref-for-observable\u2463\u2463" }, { "id": "ref-for-observable\u2463\u2464" }, { "id": "ref-for-observable\u2463\u2465" }, { "id": "ref-for-observable\u2463\u2466" }, { "id": "ref-for-observable\u2463\u2467" }, { "id": "ref-for-observable\u2463\u2468" }, { "id": "ref-for-observable\u2464\u24ea" }, { "id": "ref-for-observable\u2464\u2460" }, { "id": "ref-for-observable\u2464\u2461" }, { "id": "ref-for-observable\u2464\u2462" }], "title": "2.3.2. Observable-returning operators" }, { "refs": [{ "id": "ref-for-observable\u2464\u2463" }, { "id": "ref-for-observable\u2464\u2464" }, { "id": "ref-for-observable\u2464\u2465" }], "title": "2.3.3. Promise-returning operators" }, { "refs": [{ "id": "ref-for-observable\u2464\u2466" }, { "id": "ref-for-observable\u2464\u2467" }], "title": "3. EventTarget integration" }, { "refs": [{ "id": "ref-for-observable\u2464\u2468" }], "title": "5. Acknowledgements" }], "url": "#observable" },
                "observable-convert-to-an-observable": { "dfnID": "observable-convert-to-an-observable", "dfnText": "convert to an Observable", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-observable-convert-to-an-observable" }], "title": "2.2.1. Supporting concepts" }, { "refs": [{ "id": "ref-for-observable-convert-to-an-observable\u2460" }], "title": "2.3.1. from()" }, { "refs": [{ "id": "ref-for-observable-convert-to-an-observable\u2461" }], "title": "2.3.2. Observable-returning operators" }], "url": "#observable-convert-to-an-observable" },
                "observable-event-listener-invoke-algorithm": { "dfnID": "observable-event-listener-invoke-algorithm", "dfnText": "observable event listener invoke algorithm", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-observable-event-listener-invoke-algorithm" }], "title": "3. EventTarget integration" }], "url": "#observable-event-listener-invoke-algorithm" },
                "observable-subscribe-callback": { "dfnID": "observable-subscribe-callback", "dfnText": "subscribe callback", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-observable-subscribe-callback" }, { "id": "ref-for-observable-subscribe-callback\u2460" }], "title": "2.2. The Observable interface" }, { "refs": [{ "id": "ref-for-observable-subscribe-callback\u2461" }, { "id": "ref-for-observable-subscribe-callback\u2462" }, { "id": "ref-for-observable-subscribe-callback\u2463" }, { "id": "ref-for-observable-subscribe-callback\u2464" }, { "id": "ref-for-observable-subscribe-callback\u2465" }], "title": "2.2.1. Supporting concepts" }, { "refs": [{ "id": "ref-for-observable-subscribe-callback\u2466" }, { "id": "ref-for-observable-subscribe-callback\u2467" }, { "id": "ref-for-observable-subscribe-callback\u2468" }, { "id": "ref-for-observable-subscribe-callback\u2460\u24ea" }, { "id": "ref-for-observable-subscribe-callback\u2460\u2460" }, { "id": "ref-for-observable-subscribe-callback\u2460\u2461" }, { "id": "ref-for-observable-subscribe-callback\u2460\u2462" }, { "id": "ref-for-observable-subscribe-callback\u2460\u2463" }, { "id": "ref-for-observable-subscribe-callback\u2460\u2464" }, { "id": "ref-for-observable-subscribe-callback\u2460\u2465" }, { "id": "ref-for-observable-subscribe-callback\u2460\u2466" }], "title": "2.3.2. Observable-returning operators" }, { "refs": [{ "id": "ref-for-observable-subscribe-callback\u2460\u2467" }], "title": "3. EventTarget integration" }], "url": "#observable-subscribe-callback" },
                "observable-subscribe-to-an-observable": { "dfnID": "observable-subscribe-to-an-observable", "dfnText": "subscribe to an Observable", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-observable-subscribe-to-an-observable" }], "title": "2.2. The Observable interface" }, { "refs": [{ "id": "ref-for-observable-subscribe-to-an-observable\u2460" }, { "id": "ref-for-observable-subscribe-to-an-observable\u2461" }, { "id": "ref-for-observable-subscribe-to-an-observable\u2462" }], "title": "2.2.1. Supporting concepts" }, { "refs": [{ "id": "ref-for-observable-subscribe-to-an-observable\u2463" }, { "id": "ref-for-observable-subscribe-to-an-observable\u2464" }, { "id": "ref-for-observable-subscribe-to-an-observable\u2465" }, { "id": "ref-for-observable-subscribe-to-an-observable\u2466" }, { "id": "ref-for-observable-subscribe-to-an-observable\u2467" }, { "id": "ref-for-observable-subscribe-to-an-observable\u2468" }, { "id": "ref-for-observable-subscribe-to-an-observable\u2460\u24ea" }, { "id": "ref-for-observable-subscribe-to-an-observable\u2460\u2460" }, { "id": "ref-for-observable-subscribe-to-an-observable\u2460\u2461" }, { "id": "ref-for-observable-subscribe-to-an-observable\u2460\u2462" }, { "id": "ref-for-observable-subscribe-to-an-observable\u2460\u2463" }, { "id": "ref-for-observable-subscribe-to-an-observable\u2460\u2464" }, { "id": "ref-for-observable-subscribe-to-an-observable\u2460\u2465" }, { "id": "ref-for-observable-subscribe-to-an-observable\u2460\u2466" }, { "id": "ref-for-observable-subscribe-to-an-observable\u2460\u2467" }], "title": "2.3.2. Observable-returning operators" }, { "refs": [{ "id": "ref-for-observable-subscribe-to-an-observable\u2460\u2468" }, { "id": "ref-for-observable-subscribe-to-an-observable\u2461\u24ea" }, { "id": "ref-for-observable-subscribe-to-an-observable\u2461\u2460" }, { "id": "ref-for-observable-subscribe-to-an-observable\u2461\u2461" }, { "id": "ref-for-observable-subscribe-to-an-observable\u2461\u2462" }, { "id": "ref-for-observable-subscribe-to-an-observable\u2461\u2463" }, { "id": "ref-for-observable-subscribe-to-an-observable\u2461\u2464" }, { "id": "ref-for-observable-subscribe-to-an-observable\u2461\u2465" }, { "id": "ref-for-observable-subscribe-to-an-observable\u2461\u2466" }], "title": "2.3.3. Promise-returning operators" }], "url": "#observable-subscribe-to-an-observable" },
                "observable-weak-subscriber": { "dfnID": "observable-weak-subscriber", "dfnText": "weak subscriber", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-observable-weak-subscriber" }, { "id": "ref-for-observable-weak-subscriber\u2460" }, { "id": "ref-for-observable-weak-subscriber\u2461" }, { "id": "ref-for-observable-weak-subscriber\u2462" }], "title": "2.2.1. Supporting concepts" }], "url": "#observable-weak-subscriber" },
                "subscriber": { "dfnID": "subscriber", "dfnText": "Subscriber", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-subscriber" }, { "id": "ref-for-subscriber\u2460" }, { "id": "ref-for-subscriber\u2461" }, { "id": "ref-for-subscriber\u2462" }, { "id": "ref-for-subscriber\u2463" }, { "id": "ref-for-subscriber\u2464" }, { "id": "ref-for-subscriber\u2465" }], "title": "2.1. The Subscriber interface" }, { "refs": [{ "id": "ref-for-subscriber\u2466" }, { "id": "ref-for-subscriber\u2467" }, { "id": "ref-for-subscriber\u2468" }], "title": "2.2. The Observable interface" }, { "refs": [{ "id": "ref-for-subscriber\u2460\u24ea" }, { "id": "ref-for-subscriber\u2460\u2460" }, { "id": "ref-for-subscriber\u2460\u2461" }, { "id": "ref-for-subscriber\u2460\u2462" }, { "id": "ref-for-subscriber\u2460\u2463" }], "title": "2.2.1. Supporting concepts" }, { "refs": [{ "id": "ref-for-subscriber\u2460\u2464" }, { "id": "ref-for-subscriber\u2460\u2465" }, { "id": "ref-for-subscriber\u2460\u2466" }, { "id": "ref-for-subscriber\u2460\u2467" }, { "id": "ref-for-subscriber\u2460\u2468" }, { "id": "ref-for-subscriber\u2461\u24ea" }, { "id": "ref-for-subscriber\u2461\u2460" }, { "id": "ref-for-subscriber\u2461\u2461" }, { "id": "ref-for-subscriber\u2461\u2462" }, { "id": "ref-for-subscriber\u2461\u2463" }, { "id": "ref-for-subscriber\u2461\u2464" }, { "id": "ref-for-subscriber\u2461\u2465" }], "title": "2.3.2. Observable-returning operators" }, { "refs": [{ "id": "ref-for-subscriber\u2461\u2466" }, { "id": "ref-for-subscriber\u2461\u2467" }], "title": "3. EventTarget integration" }], "url": "#subscriber" },
                "subscriber-active": { "dfnID": "subscriber-active", "dfnText": "active", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-subscriber-active" }, { "id": "ref-for-subscriber-active\u2460" }, { "id": "ref-for-subscriber-active\u2461" }, { "id": "ref-for-subscriber-active\u2462" }, { "id": "ref-for-subscriber-active\u2463" }, { "id": "ref-for-subscriber-active\u2464" }, { "id": "ref-for-subscriber-active\u2465" }], "title": "2.1. The Subscriber interface" }, { "refs": [{ "id": "ref-for-subscriber-active\u2466" }, { "id": "ref-for-subscriber-active\u2467" }, { "id": "ref-for-subscriber-active\u2468" }], "title": "2.2.1. Supporting concepts" }, { "refs": [{ "id": "ref-for-subscriber-active\u2460\u24ea" }, { "id": "ref-for-subscriber-active\u2460\u2460" }], "title": "2.3.2. Observable-returning operators" }], "url": "#subscriber-active" },
                "subscriber-internal-observers": { "dfnID": "subscriber-internal-observers", "dfnText": "internal observers", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-subscriber-internal-observers" }, { "id": "ref-for-subscriber-internal-observers\u2460" }, { "id": "ref-for-subscriber-internal-observers\u2461" }, { "id": "ref-for-subscriber-internal-observers\u2462" }, { "id": "ref-for-subscriber-internal-observers\u2463" }], "title": "2.1. The Subscriber interface" }, { "refs": [{ "id": "ref-for-subscriber-internal-observers\u2464" }, { "id": "ref-for-subscriber-internal-observers\u2465" }, { "id": "ref-for-subscriber-internal-observers\u2466" }, { "id": "ref-for-subscriber-internal-observers\u2467" }, { "id": "ref-for-subscriber-internal-observers\u2468" }, { "id": "ref-for-subscriber-internal-observers\u2460\u24ea" }, { "id": "ref-for-subscriber-internal-observers\u2460\u2460" }], "title": "2.2.1. Supporting concepts" }], "url": "#subscriber-internal-observers" },
                "subscriber-subscription-controller": { "dfnID": "subscriber-subscription-controller", "dfnText": "subscription controller", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-subscriber-subscription-controller" }, { "id": "ref-for-subscriber-subscription-controller\u2460" }], "title": "2.1. The Subscriber interface" }, { "refs": [{ "id": "ref-for-subscriber-subscription-controller\u2461" }, { "id": "ref-for-subscriber-subscription-controller\u2462" }, { "id": "ref-for-subscriber-subscription-controller\u2463" }, { "id": "ref-for-subscriber-subscription-controller\u2464" }, { "id": "ref-for-subscriber-subscription-controller\u2465" }, { "id": "ref-for-subscriber-subscription-controller\u2466" }, { "id": "ref-for-subscriber-subscription-controller\u2467" }, { "id": "ref-for-subscriber-subscription-controller\u2468" }, { "id": "ref-for-subscriber-subscription-controller\u2460\u24ea" }], "title": "2.2.1. Supporting concepts" }, { "refs": [{ "id": "ref-for-subscriber-subscription-controller\u2460\u2460" }, { "id": "ref-for-subscriber-subscription-controller\u2460\u2461" }, { "id": "ref-for-subscriber-subscription-controller\u2460\u2462" }, { "id": "ref-for-subscriber-subscription-controller\u2460\u2463" }, { "id": "ref-for-subscriber-subscription-controller\u2460\u2464" }, { "id": "ref-for-subscriber-subscription-controller\u2460\u2465" }, { "id": "ref-for-subscriber-subscription-controller\u2460\u2466" }, { "id": "ref-for-subscriber-subscription-controller\u2460\u2467" }, { "id": "ref-for-subscriber-subscription-controller\u2460\u2468" }, { "id": "ref-for-subscriber-subscription-controller\u2461\u24ea" }, { "id": "ref-for-subscriber-subscription-controller\u2461\u2460" }, { "id": "ref-for-subscriber-subscription-controller\u2461\u2461" }, { "id": "ref-for-subscriber-subscription-controller\u2461\u2462" }, { "id": "ref-for-subscriber-subscription-controller\u2461\u2463" }, { "id": "ref-for-subscriber-subscription-controller\u2461\u2464" }, { "id": "ref-for-subscriber-subscription-controller\u2461\u2465" }, { "id": "ref-for-subscriber-subscription-controller\u2461\u2466" }, { "id": "ref-for-subscriber-subscription-controller\u2461\u2467" }, { "id": "ref-for-subscriber-subscription-controller\u2461\u2468" }], "title": "2.3.2. Observable-returning operators" }, { "refs": [{ "id": "ref-for-subscriber-subscription-controller\u2462\u24ea" }, { "id": "ref-for-subscriber-subscription-controller\u2462\u2460" }, { "id": "ref-for-subscriber-subscription-controller\u2462\u2461" }], "title": "3. EventTarget integration" }], "url": "#subscriber-subscription-controller" },
                "subscriber-teardown-callbacks": { "dfnID": "subscriber-teardown-callbacks", "dfnText": "teardown callbacks", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-subscriber-teardown-callbacks" }, { "id": "ref-for-subscriber-teardown-callbacks\u2460" }], "title": "2.1. The Subscriber interface" }], "url": "#subscriber-teardown-callbacks" },
                "switchmap-process-next-value-steps": { "dfnID": "switchmap-process-next-value-steps", "dfnText": "switchmap process next value steps", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-switchmap-process-next-value-steps" }, { "id": "ref-for-switchmap-process-next-value-steps\u2460" }, { "id": "ref-for-switchmap-process-next-value-steps\u2461" }, { "id": "ref-for-switchmap-process-next-value-steps\u2462" }], "title": "2.3.2. Observable-returning operators" }], "url": "#switchmap-process-next-value-steps" },
                "typedefdef-observableinspectorunion": { "dfnID": "typedefdef-observableinspectorunion", "dfnText": "ObservableInspectorUnion", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-typedefdef-observableinspectorunion" }], "title": "2.2. The Observable interface" }], "url": "#typedefdef-observableinspectorunion" },
                "typedefdef-observerunion": { "dfnID": "typedefdef-observerunion", "dfnText": "ObserverUnion", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-typedefdef-observerunion" }], "title": "2.2. The Observable interface" }, { "refs": [{ "id": "ref-for-typedefdef-observerunion\u2460" }, { "id": "ref-for-typedefdef-observerunion\u2461" }], "title": "2.2.1. Supporting concepts" }], "url": "#typedefdef-observerunion" },
            };

            document.addEventListener("DOMContentLoaded", () => {
                genAllDfnPanels();

                document.body.addEventListener("click", (e) => {
                    // If not handled already, just hide all dfn panels.
                    hideAllDfnPanels();
                });
            });

            window.addEventListener("resize", () => {
                // Pin any visible dfn panel
                queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(el => positionDfnPanel(el));
            });

            function genAllDfnPanels() {
                for (const panelData of Object.values(dfnPanelData)) {
                    const dfnID = panelData.dfnID;
                    const dfn = document.getElementById(dfnID);
                    if (!dfn) {
                        console.log(`Can't find dfn#${dfnID}.`, panelData);
                        continue;
                    }
                    dfn.panelData = panelData;
                    insertDfnPopupAction(dfn);
                }
            }

            function genDfnPanel(dfn, { dfnID, url, dfnText, refSections, external }) {
                const dfnPanel = mk.aside({
                    class: "dfn-panel on",
                    id: `infopanel-for-${dfnID}`,
                    "data-for": dfnID,
                    "aria-labelled-by": `infopaneltitle-for-${dfnID}`,
                },
                    mk.span({ id: `infopaneltitle-for-${dfnID}`, style: "display:none" },
                        `Info about the '${dfnText}' ${external ? "external" : ""} reference.`),
                    mk.a({ href: url, class: "dfn-link" }, url),
                    refSections.length == 0 ? [] :
                        mk.b({}, "Referenced in:"),
                    mk.ul({},
                        ...refSections.map(section =>
                            mk.li({},
                                ...section.refs.map((ref, refI) =>
                                    [
                                        mk.a({ href: `#${ref.id}` },
                                            (refI == 0) ? section.title : `(${refI + 1})`
                                        ),
                                        " ",
                                    ]
                                ),
                            ),
                        ),
                    ),
                    genLinkingSyntaxes(dfn),
                );

                dfnPanel.addEventListener('click', (event) => {
                    if (event.target.nodeName == 'A') {
                        scrollToTargetAndHighlight(event);
                        pinDfnPanel(dfnPanel);
                    }
                    event.stopPropagation();
                    refocusOnTarget(event);
                });
                dfnPanel.addEventListener('keydown', (event) => {
                    if (event.keyCode == 27) { // Escape key
                        hideDfnPanel({ dfnPanel });
                        event.stopPropagation();
                        event.preventDefault();
                    }
                });

                dfnPanel.dfn = dfn;
                dfn.dfnPanel = dfnPanel;
                return dfnPanel;
            }



            function hideAllDfnPanels() {
                // Delete the currently-active dfn panel.
                queryAll(".dfn-panel").forEach(dfnPanel => hideDfnPanel({ dfnPanel }));
            }

            function showDfnPanel(dfn) {
                hideAllDfnPanels(); // Only display one at a time.

                dfn.setAttribute("aria-expanded", "true");

                const dfnPanel = genDfnPanel(dfn, dfn.panelData);

                // Give the dfn a unique tabindex, and then
                // give all the tabbable panel bits successive indexes.
                let tabIndex = 100;
                dfn.tabIndex = tabIndex++;
                const tabbable = dfnPanel.querySelectorAll(":is(a, button)");
                for (const el of tabbable) {
                    el.tabIndex = tabIndex++;
                }

                append(document.body, dfnPanel);
                positionDfnPanel(dfnPanel);
            }

            function positionDfnPanel(dfnPanel) {
                const dfn = dfnPanel.dfn;
                const dfnPos = getBounds(dfn);
                dfnPanel.style.top = dfnPos.bottom + "px";
                dfnPanel.style.left = dfnPos.left + "px";

                const panelPos = dfnPanel.getBoundingClientRect();
                const panelMargin = 8;
                const maxRight = document.body.parentNode.clientWidth - panelMargin;
                if (panelPos.right > maxRight) {
                    const overflowAmount = panelPos.right - maxRight;
                    const newLeft = Math.max(panelMargin, dfnPos.left - overflowAmount);
                    dfnPanel.style.left = newLeft + "px";
                }
            }

            function pinDfnPanel(dfnPanel) {
                // Switch it to "activated" state, which pins it.
                dfnPanel.classList.add("activated");
                dfnPanel.style.position = "fixed";
                dfnPanel.style.left = null;
                dfnPanel.style.top = null;
            }

            function hideDfnPanel({ dfn, dfnPanel }) {
                if (!dfnPanel) dfnPanel = dfn.dfnPanel;
                if (!dfn) dfn = dfnPanel.dfn;
                dfn.dfnPanel = undefined;
                dfnPanel.dfn = undefined;
                dfn.setAttribute("aria-expanded", "false");
                dfn.tabIndex = undefined;
                dfnPanel.remove()
            }

            function toggleDfnPanel(dfn) {
                if (dfn.dfnPanel) {
                    hideDfnPanel(dfn);
                } else {
                    showDfnPanel(dfn);
                }
            }

            function insertDfnPopupAction(dfn) {
                dfn.setAttribute('role', 'button');
                dfn.setAttribute('aria-expanded', 'false')
                dfn.tabIndex = 0;
                dfn.classList.add('has-dfn-panel');
                dfn.addEventListener('click', (event) => {
                    toggleDfnPanel(dfn);
                    event.stopPropagation();
                });
                dfn.addEventListener('keypress', (event) => {
                    const kc = event.keyCode;
                    // 32->Space, 13->Enter
                    if (kc == 32 || kc == 13) {
                        toggleDfnPanel(dfn);
                        event.stopPropagation();
                        event.preventDefault();
                    }
                });
            }

            function refocusOnTarget(event) {
                const target = event.target;
                setTimeout(() => {
                    // Refocus on the event.target element.
                    // This is needed after browser scrolls to the destination.
                    target.focus();
                });
            }

            // TODO: shared util
            // Returns the root-level absolute position {left and top} of element.
            function getBounds(el, relativeTo = document.body) {
                const relativeRect = relativeTo.getBoundingClientRect();
                const elRect = el.getBoundingClientRect();
                const top = elRect.top - relativeRect.top;
                const left = elRect.left - relativeRect.left;
                return {
                    top,
                    left,
                    bottom: top + elRect.height,
                    right: left + elRect.width,
                }
            }

            function scrollToTargetAndHighlight(event) {
                let hash = event.target.hash;
                if (hash) {
                    hash = decodeURIComponent(hash.substring(1));
                    const dest = document.getElementById(hash);
                    if (dest) {
                        dest.classList.add('highlighted');
                        setTimeout(() => dest.classList.remove('highlighted'), 1000);
                    }
                }
            }

            // Functions, divided by link type, that wrap an autolink's
            // contents with the appropriate outer syntax.
            // Alternately, a string naming another type they format
            // the same as.
            function needsFor(type) {
                switch (type) {
                    case "descriptor":
                    case "value":
                    case "element-attr":
                    case "attr-value":
                    case "element-state":
                    case "method":
                    case "constructor":
                    case "argument":
                    case "attribute":
                    case "const":
                    case "dict-member":
                    case "event":
                    case "enum-value":
                    case "stringifier":
                    case "serializer":
                    case "iterator":
                    case "maplike":
                    case "setlike":
                    case "state":
                    case "mode":
                    case "context":
                    case "facet": return true;

                    default: return false;
                }
            }
            function refusesFor(type) {
                switch (type) {
                    case "property":
                    case "element":
                    case "interface":
                    case "namespace":
                    case "callback":
                    case "dictionary":
                    case "enum":
                    case "exception":
                    case "typedef":
                    case "http-header":
                    case "permission": return true;

                    default: return false;
                }
            }
            function linkFormatterFromType(type) {
                switch (type) {
                    case 'scheme':
                    case 'permission':
                    case 'dfn': return (text) => `[=${text}=]`;

                    case 'abstract-op': return (text) => `[\$${text}\$]`;

                    case 'function':
                    case 'at-rule':
                    case 'selector':
                    case 'value': return (text) => `''${text}''`;

                    case 'http-header': return (text) => `[:${text}:]`;

                    case 'interface':
                    case 'constructor':
                    case 'method':
                    case 'argument':
                    case 'attribute':
                    case 'callback':
                    case 'dictionary':
                    case 'dict-member':
                    case 'enum':
                    case 'enum-value':
                    case 'exception':
                    case 'const':
                    case 'typedef':
                    case 'stringifier':
                    case 'serializer':
                    case 'iterator':
                    case 'maplike':
                    case 'setlike':
                    case 'extended-attribute':
                    case 'event':
                    case 'idl': return (text) => `{{${text}}}`;

                    case 'element-state':
                    case 'element-attr':
                    case 'attr-value':
                    case 'element': return (element) => `<{${element}}>`;

                    case 'grammar': return (text) => `${text} (within a <pre class=prod>)`;

                    case 'type': return (text) => `<<${text}>>`;

                    case 'descriptor':
                    case 'property': return (text) => `'${text}'`;

                    default: return;
                };
            };

            function genLinkingSyntaxes(dfn) {
                if (dfn.tagName != "DFN") return;

                const type = dfn.getAttribute('data-dfn-type');
                if (!type) {
                    console.log(`<dfn> doesn't have a data-dfn-type:`, dfn);
                    return [];
                }

                // Return a function that wraps link text based on the type
                const linkFormatter = linkFormatterFromType(type);
                if (!linkFormatter) {
                    console.log(`<dfn> has an unknown data-dfn-type:`, dfn);
                    return [];
                }

                let ltAlts;
                if (dfn.hasAttribute('data-lt')) {
                    ltAlts = dfn.getAttribute('data-lt')
                        .split("|")
                        .map(x => x.trim());
                } else {
                    ltAlts = [dfn.textContent.trim()];
                }
                if (type == "type") {
                    // lt of "<foo>", but "foo" is the interior;
                    // <<foo/bar>> is how you write it with a for,
                    // not <foo/<bar>> or whatever.
                    for (var i = 0; i < ltAlts.length; i++) {
                        const lt = ltAlts[i];
                        const match = /<(.*)>/.exec(lt);
                        if (match) { ltAlts[i] = match[1]; }
                    }
                }

                let forAlts;
                if (dfn.hasAttribute('data-dfn-for')) {
                    forAlts = dfn.getAttribute('data-dfn-for')
                        .split(",")
                        .map(x => x.trim());
                } else {
                    forAlts = [''];
                }

                let linkingSyntaxes = [];
                if (!needsFor(type)) {
                    for (const lt of ltAlts) {
                        linkingSyntaxes.push(linkFormatter(lt));
                    }
                }
                if (!refusesFor(type)) {
                    for (const f of forAlts) {
                        linkingSyntaxes.push(linkFormatter(`${f}/${ltAlts[0]}`))
                    }
                }
                return [
                    mk.b({}, 'Possible linking syntaxes:'),
                    mk.ul({},
                        ...linkingSyntaxes.map(link => {
                            const copyLink = async () =>
                                await navigator.clipboard.writeText(link);
                            return mk.li({},
                                mk.div({ class: 'link-item' },
                                    mk.button({
                                        class: 'copy-icon', title: 'Copy',
                                        type: 'button',
                                        _onclick: copyLink,
                                        tabindex: 0,
                                    }, mk.span({ class: 'icon' })),
                                    mk.span({}, link)
                                )
                            );
                        })
                    )
                ];
            }
        }
    </script>
    <script>/* Boilerplate: script-ref-hints */
        "use strict";
        {
            let refsData = {
                "#callbackdef-catchcallback": { "displayText": "CatchCallback", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "CatchCallback", "type": "callback", "url": "#callbackdef-catchcallback" },
                "#callbackdef-mapper": { "displayText": "Mapper", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "Mapper", "type": "callback", "url": "#callbackdef-mapper" },
                "#callbackdef-observableinspectoraborthandler": { "displayText": "ObservableInspectorAbortHandler", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "ObservableInspectorAbortHandler", "type": "callback", "url": "#callbackdef-observableinspectoraborthandler" },
                "#callbackdef-observablesubscriptioncallback": { "displayText": "ObservableSubscriptionCallback", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "ObservableSubscriptionCallback", "type": "callback", "url": "#callbackdef-observablesubscriptioncallback" },
                "#callbackdef-predicate": { "displayText": "Predicate", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "Predicate", "type": "callback", "url": "#callbackdef-predicate" },
                "#callbackdef-reducer": { "displayText": "Reducer", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "Reducer", "type": "callback", "url": "#callbackdef-reducer" },
                "#callbackdef-subscribecallback": { "displayText": "SubscribeCallback", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "SubscribeCallback", "type": "callback", "url": "#callbackdef-subscribecallback" },
                "#callbackdef-visitor": { "displayText": "Visitor", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "Visitor", "type": "callback", "url": "#callbackdef-visitor" },
                "#close-a-subscription": { "displayText": "close a subscription", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "close a subscription", "type": "dfn", "url": "#close-a-subscription" },
                "#default-error-algorithm": { "displayText": "default error algorithm", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "default error algorithm", "type": "dfn", "url": "#default-error-algorithm" },
                "#dictdef-observableeventlisteneroptions": { "displayText": "ObservableEventListenerOptions", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "ObservableEventListenerOptions", "type": "dictionary", "url": "#dictdef-observableeventlisteneroptions" },
                "#dictdef-observableinspector": { "displayText": "ObservableInspector", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "ObservableInspector", "type": "dictionary", "url": "#dictdef-observableinspector" },
                "#dictdef-subscribeoptions": { "displayText": "SubscribeOptions", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "SubscribeOptions", "type": "dictionary", "url": "#dictdef-subscribeoptions" },
                "#dictdef-subscriptionobserver": { "displayText": "SubscriptionObserver", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "SubscriptionObserver", "type": "dictionary", "url": "#dictdef-subscriptionobserver" },
                "#dom-eventtarget-when": { "displayText": "when(type)", "export": true, "for_": ["EventTarget"], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "when(type)", "type": "method", "url": "#dom-eventtarget-when" },
                "#dom-observable-catch": { "displayText": "catch(callback)", "export": true, "for_": ["Observable"], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "catch(callback)", "type": "method", "url": "#dom-observable-catch" },
                "#dom-observable-drop": { "displayText": "drop(amount)", "export": true, "for_": ["Observable"], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "drop(amount)", "type": "method", "url": "#dom-observable-drop" },
                "#dom-observable-every": { "displayText": "every(predicate, options)", "export": true, "for_": ["Observable"], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "every(predicate, options)", "type": "method", "url": "#dom-observable-every" },
                "#dom-observable-filter": { "displayText": "filter(predicate)", "export": true, "for_": ["Observable"], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "filter(predicate)", "type": "method", "url": "#dom-observable-filter" },
                "#dom-observable-finally": { "displayText": "finally(callback)", "export": true, "for_": ["Observable"], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "finally(callback)", "type": "method", "url": "#dom-observable-finally" },
                "#dom-observable-find": { "displayText": "find(predicate, options)", "export": true, "for_": ["Observable"], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "find(predicate, options)", "type": "method", "url": "#dom-observable-find" },
                "#dom-observable-first": { "displayText": "first(options)", "export": true, "for_": ["Observable"], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "first(options)", "type": "method", "url": "#dom-observable-first" },
                "#dom-observable-flatmap": { "displayText": "flatMap(mapper)", "export": true, "for_": ["Observable"], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "flatMap(mapper)", "type": "method", "url": "#dom-observable-flatmap" },
                "#dom-observable-foreach": { "displayText": "forEach(callback, options)", "export": true, "for_": ["Observable"], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "forEach(callback, options)", "type": "method", "url": "#dom-observable-foreach" },
                "#dom-observable-from": { "displayText": "from(value)", "export": true, "for_": ["Observable"], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "from(value)", "type": "method", "url": "#dom-observable-from" },
                "#dom-observable-inspect": { "displayText": "inspect(inspectorUnion)", "export": true, "for_": ["Observable"], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "inspect(inspectorUnion)", "type": "method", "url": "#dom-observable-inspect" },
                "#dom-observable-last": { "displayText": "last(options)", "export": true, "for_": ["Observable"], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "last(options)", "type": "method", "url": "#dom-observable-last" },
                "#dom-observable-map": { "displayText": "map(mapper)", "export": true, "for_": ["Observable"], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "map(mapper)", "type": "method", "url": "#dom-observable-map" },
                "#dom-observable-observable": { "displayText": "Observable(callback)", "export": true, "for_": ["Observable"], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "Observable(callback)", "type": "constructor", "url": "#dom-observable-observable" },
                "#dom-observable-reduce": { "displayText": "reduce(reducer, initialValue, options)", "export": true, "for_": ["Observable"], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "reduce(reducer, initialValue, options)", "type": "method", "url": "#dom-observable-reduce" },
                "#dom-observable-some": { "displayText": "some(predicate, options)", "export": true, "for_": ["Observable"], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "some(predicate, options)", "type": "method", "url": "#dom-observable-some" },
                "#dom-observable-subscribe": { "displayText": "subscribe(observer, options)", "export": true, "for_": ["Observable"], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "subscribe(observer, options)", "type": "method", "url": "#dom-observable-subscribe" },
                "#dom-observable-switchmap": { "displayText": "switchMap(mapper)", "export": true, "for_": ["Observable"], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "switchMap(mapper)", "type": "method", "url": "#dom-observable-switchmap" },
                "#dom-observable-take": { "displayText": "take(amount)", "export": true, "for_": ["Observable"], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "take(amount)", "type": "method", "url": "#dom-observable-take" },
                "#dom-observable-takeuntil": { "displayText": "takeUntil(value)", "export": true, "for_": ["Observable"], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "takeUntil(value)", "type": "method", "url": "#dom-observable-takeuntil" },
                "#dom-observable-toarray": { "displayText": "toArray(options)", "export": true, "for_": ["Observable"], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "toArray(options)", "type": "method", "url": "#dom-observable-toarray" },
                "#dom-observableeventlisteneroptions-capture": { "displayText": "capture", "export": true, "for_": ["ObservableEventListenerOptions"], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "capture", "type": "dict-member", "url": "#dom-observableeventlisteneroptions-capture" },
                "#dom-observableeventlisteneroptions-passive": { "displayText": "passive", "export": true, "for_": ["ObservableEventListenerOptions"], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "passive", "type": "dict-member", "url": "#dom-observableeventlisteneroptions-passive" },
                "#dom-observableinspector-abort": { "displayText": "abort", "export": true, "for_": ["ObservableInspector"], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "abort", "type": "dict-member", "url": "#dom-observableinspector-abort" },
                "#dom-observableinspector-complete": { "displayText": "complete", "export": true, "for_": ["ObservableInspector"], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "complete", "type": "dict-member", "url": "#dom-observableinspector-complete" },
                "#dom-observableinspector-error": { "displayText": "error", "export": true, "for_": ["ObservableInspector"], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "error", "type": "dict-member", "url": "#dom-observableinspector-error" },
                "#dom-observableinspector-next": { "displayText": "next", "export": true, "for_": ["ObservableInspector"], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "next", "type": "dict-member", "url": "#dom-observableinspector-next" },
                "#dom-observableinspector-subscribe": { "displayText": "subscribe", "export": true, "for_": ["ObservableInspector"], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "subscribe", "type": "dict-member", "url": "#dom-observableinspector-subscribe" },
                "#dom-reducer-accumulator": { "displayText": "accumulator", "export": true, "for_": ["Reducer"], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "accumulator", "type": "argument", "url": "#dom-reducer-accumulator" },
                "#dom-reducer-currentvalue": { "displayText": "currentValue", "export": true, "for_": ["Reducer"], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "currentValue", "type": "argument", "url": "#dom-reducer-currentvalue" },
                "#dom-reducer-index": { "displayText": "index", "export": true, "for_": ["Reducer"], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "index", "type": "argument", "url": "#dom-reducer-index" },
                "#dom-subscribeoptions-signal": { "displayText": "signal", "export": true, "for_": ["SubscribeOptions"], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "signal", "type": "dict-member", "url": "#dom-subscribeoptions-signal" },
                "#dom-subscriber-active": { "displayText": "active", "export": true, "for_": ["Subscriber"], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "active", "type": "attribute", "url": "#dom-subscriber-active" },
                "#dom-subscriber-addteardown": { "displayText": "addTeardown(teardown)", "export": true, "for_": ["Subscriber"], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "addTeardown(teardown)", "type": "method", "url": "#dom-subscriber-addteardown" },
                "#dom-subscriber-complete": { "displayText": "complete()", "export": true, "for_": ["Subscriber"], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "complete()", "type": "method", "url": "#dom-subscriber-complete" },
                "#dom-subscriber-error": { "displayText": "error(error)", "export": true, "for_": ["Subscriber"], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "error(error)", "type": "method", "url": "#dom-subscriber-error" },
                "#dom-subscriber-next": { "displayText": "next(value)", "export": true, "for_": ["Subscriber"], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "next(value)", "type": "method", "url": "#dom-subscriber-next" },
                "#dom-subscriber-signal": { "displayText": "signal", "export": true, "for_": ["Subscriber"], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "signal", "type": "attribute", "url": "#dom-subscriber-signal" },
                "#dom-subscriptionobserver-complete": { "displayText": "complete", "export": true, "for_": ["SubscriptionObserver"], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "complete", "type": "dict-member", "url": "#dom-subscriptionobserver-complete" },
                "#dom-subscriptionobserver-error": { "displayText": "error", "export": true, "for_": ["SubscriptionObserver"], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "error", "type": "dict-member", "url": "#dom-subscriptionobserver-error" },
                "#dom-subscriptionobserver-next": { "displayText": "next", "export": true, "for_": ["SubscriptionObserver"], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "next", "type": "dict-member", "url": "#dom-subscriptionobserver-next" },
                "#flatmap-process-next-value-steps": { "displayText": "flatmap process next value steps", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "flatmap process next value steps", "type": "dfn", "url": "#flatmap-process-next-value-steps" },
                "#internal-observer": { "displayText": "internal observer", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "internal observer", "type": "dfn", "url": "#internal-observer" },
                "#internal-observer-complete-steps": { "displayText": "complete steps", "export": true, "for_": ["internal observer"], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "complete steps", "type": "dfn", "url": "#internal-observer-complete-steps" },
                "#internal-observer-error-steps": { "displayText": "error steps", "export": true, "for_": ["internal observer"], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "error steps", "type": "dfn", "url": "#internal-observer-error-steps" },
                "#internal-observer-next-steps": { "displayText": "next steps", "export": true, "for_": ["internal observer"], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "next steps", "type": "dfn", "url": "#internal-observer-next-steps" },
                "#observable": { "displayText": "Observable", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "Observable", "type": "interface", "url": "#observable" },
                "#observable-convert-to-an-observable": { "displayText": "convert to an observable", "export": true, "for_": ["Observable"], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "convert to an observable", "type": "dfn", "url": "#observable-convert-to-an-observable" },
                "#observable-event-listener-invoke-algorithm": { "displayText": "observable event listener invoke algorithm", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "observable event listener invoke algorithm", "type": "dfn", "url": "#observable-event-listener-invoke-algorithm" },
                "#observable-subscribe-callback": { "displayText": "subscribe callback", "export": true, "for_": ["Observable"], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "subscribe callback", "type": "dfn", "url": "#observable-subscribe-callback" },
                "#observable-subscribe-to-an-observable": { "displayText": "subscribe to an observable", "export": true, "for_": ["Observable"], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "subscribe to an observable", "type": "dfn", "url": "#observable-subscribe-to-an-observable" },
                "#observable-weak-subscriber": { "displayText": "weak subscriber", "export": true, "for_": ["Observable"], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "weak subscriber", "type": "dfn", "url": "#observable-weak-subscriber" },
                "#subscriber": { "displayText": "Subscriber", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "Subscriber", "type": "interface", "url": "#subscriber" },
                "#subscriber-active": { "displayText": "active", "export": true, "for_": ["Subscriber"], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "active", "type": "dfn", "url": "#subscriber-active" },
                "#subscriber-internal-observers": { "displayText": "internal observers", "export": true, "for_": ["Subscriber"], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "internal observers", "type": "dfn", "url": "#subscriber-internal-observers" },
                "#subscriber-subscription-controller": { "displayText": "subscription controller", "export": true, "for_": ["Subscriber"], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "subscription controller", "type": "dfn", "url": "#subscriber-subscription-controller" },
                "#subscriber-teardown-callbacks": { "displayText": "teardown callbacks", "export": true, "for_": ["Subscriber"], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "teardown callbacks", "type": "dfn", "url": "#subscriber-teardown-callbacks" },
                "#switchmap-process-next-value-steps": { "displayText": "switchmap process next value steps", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "switchmap process next value steps", "type": "dfn", "url": "#switchmap-process-next-value-steps" },
                "#typedefdef-observableinspectorunion": { "displayText": "ObservableInspectorUnion", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "ObservableInspectorUnion", "type": "typedef", "url": "#typedefdef-observableinspectorunion" },
                "#typedefdef-observerunion": { "displayText": "ObserverUnion", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "observable", "spec": "observable-1", "status": "local", "text": "ObserverUnion", "type": "typedef", "url": "#typedefdef-observerunion" },
                "548dbb6b_https://tc39.es/ecma262/#sec-returnifabrupt-shorthands": { "displayText": "!", "export": true, "for_": [], "level": "", "normative": true, "shortname": "ecmascript", "spec": "ecmascript", "status": "anchor-block", "text": "!", "type": "dfn", "url": "https://tc39.es/ecma262/#sec-returnifabrupt-shorthands" },
                "ac8707c1_https://tc39.es/ecma262/#sec-completion-record-specification-type": { "displayText": "normal completion", "export": true, "for_": [], "level": "", "normative": true, "shortname": "ecmascript", "spec": "ecmascript", "status": "anchor-block", "text": "normal completion", "type": "dfn", "url": "https://tc39.es/ecma262/#sec-completion-record-specification-type" },
                "https://dom.spec.whatwg.org#abortsignal-abort-reason": { "displayText": "abort reason", "export": true, "for_": ["AbortSignal"], "level": "", "normative": true, "shortname": "dom", "spec": "dom", "status": "anchor-block", "text": "abort reason", "type": "dfn", "url": "https://dom.spec.whatwg.org#abortsignal-abort-reason" },
                "https://dom.spec.whatwg.org#abortsignal-signal-abort": { "displayText": "signal abort", "export": true, "for_": ["AbortSignal"], "level": "", "normative": true, "shortname": "dom", "spec": "dom", "status": "anchor-block", "text": "signal abort", "type": "dfn", "url": "https://dom.spec.whatwg.org#abortsignal-signal-abort" },
                "https://dom.spec.whatwg.org#event-listener-capture": { "displayText": "capture", "export": true, "for_": ["event listener"], "level": "", "normative": true, "shortname": "dom", "spec": "dom", "status": "anchor-block", "text": "capture", "type": "dfn", "url": "https://dom.spec.whatwg.org#event-listener-capture" },
                "https://dom.spec.whatwg.org#event-listener-once": { "displayText": "once", "export": true, "for_": ["event listener"], "level": "", "normative": true, "shortname": "dom", "spec": "dom", "status": "anchor-block", "text": "once", "type": "dfn", "url": "https://dom.spec.whatwg.org#event-listener-once" },
                "https://dom.spec.whatwg.org#event-listener-passive": { "displayText": "passive", "export": true, "for_": ["event listener"], "level": "", "normative": true, "shortname": "dom", "spec": "dom", "status": "anchor-block", "text": "passive", "type": "dfn", "url": "https://dom.spec.whatwg.org#event-listener-passive" },
                "https://dom.spec.whatwg.org#event-listener-signal": { "displayText": "signal", "export": true, "for_": ["event listener"], "level": "", "normative": true, "shortname": "dom", "spec": "dom", "status": "anchor-block", "text": "signal", "type": "dfn", "url": "https://dom.spec.whatwg.org#event-listener-signal" },
                "https://dom.spec.whatwg.org#event-listener-type": { "displayText": "type", "export": true, "for_": ["event listener"], "level": "", "normative": true, "shortname": "dom", "spec": "dom", "status": "anchor-block", "text": "type", "type": "dfn", "url": "https://dom.spec.whatwg.org#event-listener-type" },
                "https://dom.spec.whatwg.org/#abortcontroller": { "displayText": "AbortController", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "AbortController", "type": "interface", "url": "https://dom.spec.whatwg.org/#abortcontroller" },
                "https://dom.spec.whatwg.org/#abortcontroller-signal": { "displayText": "signal", "export": true, "for_": ["AbortController"], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "signal", "type": "dfn", "url": "https://dom.spec.whatwg.org/#abortcontroller-signal" },
                "https://dom.spec.whatwg.org/#abortcontroller-signal-abort": { "displayText": "signal abort", "export": true, "for_": ["AbortController"], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "signal abort", "type": "dfn", "url": "https://dom.spec.whatwg.org/#abortcontroller-signal-abort" },
                "https://dom.spec.whatwg.org/#abortsignal": { "displayText": "AbortSignal", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "AbortSignal", "type": "interface", "url": "https://dom.spec.whatwg.org/#abortsignal" },
                "https://dom.spec.whatwg.org/#abortsignal-aborted": { "displayText": "aborted", "export": true, "for_": ["AbortSignal"], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "aborted", "type": "dfn", "url": "https://dom.spec.whatwg.org/#abortsignal-aborted" },
                "https://dom.spec.whatwg.org/#abortsignal-add": { "displayText": "add", "export": true, "for_": ["AbortSignal"], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "add", "type": "dfn", "url": "https://dom.spec.whatwg.org/#abortsignal-add" },
                "https://dom.spec.whatwg.org/#abortsignal-remove": { "displayText": "remove", "export": true, "for_": ["AbortSignal"], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "remove", "type": "dfn", "url": "https://dom.spec.whatwg.org/#abortsignal-remove" },
                "https://dom.spec.whatwg.org/#add-an-event-listener": { "displayText": "add an event listener", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "add an event listener", "type": "dfn", "url": "https://dom.spec.whatwg.org/#add-an-event-listener" },
                "https://dom.spec.whatwg.org/#callbackdef-eventlistener": { "displayText": "EventListener", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "EventListener", "type": "callback", "url": "https://dom.spec.whatwg.org/#callbackdef-eventlistener" },
                "https://dom.spec.whatwg.org/#concept-event-listener": { "displayText": "event listener", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "event listener", "type": "dfn", "url": "https://dom.spec.whatwg.org/#concept-event-listener" },
                "https://dom.spec.whatwg.org/#create-a-dependent-abort-signal": { "displayText": "create a dependent abort signal", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "create a dependent abort signal", "type": "dfn", "url": "https://dom.spec.whatwg.org/#create-a-dependent-abort-signal" },
                "https://dom.spec.whatwg.org/#document": { "displayText": "Document", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "Document", "type": "interface", "url": "https://dom.spec.whatwg.org/#document" },
                "https://dom.spec.whatwg.org/#event": { "displayText": "Event", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "Event", "type": "interface", "url": "https://dom.spec.whatwg.org/#event" },
                "https://dom.spec.whatwg.org/#event-listener-callback": { "displayText": "callback", "export": true, "for_": ["event listener"], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "callback", "type": "dfn", "url": "https://dom.spec.whatwg.org/#event-listener-callback" },
                "https://dom.spec.whatwg.org/#eventdef-abortsignal-abort": { "displayText": "abort", "export": true, "for_": ["AbortSignal"], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "abort", "type": "event", "url": "https://dom.spec.whatwg.org/#eventdef-abortsignal-abort" },
                "https://dom.spec.whatwg.org/#eventtarget": { "displayText": "EventTarget", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "EventTarget", "type": "interface", "url": "https://dom.spec.whatwg.org/#eventtarget" },
                "https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active": { "displayText": "fully active", "export": true, "for_": ["Document"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "fully active", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active" },
                "https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window": { "displayText": "associated Document", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "associated document", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window" },
                "https://html.spec.whatwg.org/multipage/nav-history-apis.html#window": { "displayText": "Window", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "Window", "type": "interface", "url": "https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" },
                "https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global": { "displayText": "global object", "export": true, "for_": ["realm"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "global object", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global" },
                "https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global": { "displayText": "relevant global object", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "relevant global object", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" },
                "https://html.spec.whatwg.org/multipage/webappapis.html#microtask": { "displayText": "microtask", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "microtask", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#microtask" },
                "https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-microtask": { "displayText": "queue a microtask", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "queue a microtask", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-microtask" },
                "https://html.spec.whatwg.org/multipage/webappapis.html#report-an-exception": { "displayText": "report an exception", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "report an exception", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#report-an-exception" },
                "https://infra.spec.whatwg.org/#assert": { "displayText": "assert", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "assert", "type": "dfn", "url": "https://infra.spec.whatwg.org/#assert" },
                "https://infra.spec.whatwg.org/#boolean": { "displayText": "boolean", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "boolean", "type": "dfn", "url": "https://infra.spec.whatwg.org/#boolean" },
                "https://infra.spec.whatwg.org/#iteration-break": { "displayText": "break", "export": true, "for_": ["iteration"], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "break", "type": "dfn", "url": "https://infra.spec.whatwg.org/#iteration-break" },
                "https://infra.spec.whatwg.org/#iteration-while": { "displayText": "while", "export": true, "for_": ["iteration"], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "while", "type": "dfn", "url": "https://infra.spec.whatwg.org/#iteration-while" },
                "https://infra.spec.whatwg.org/#list": { "displayText": "list", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "list", "type": "dfn", "url": "https://infra.spec.whatwg.org/#list" },
                "https://infra.spec.whatwg.org/#list-append": { "displayText": "append", "export": true, "for_": ["list"], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "append", "type": "dfn", "url": "https://infra.spec.whatwg.org/#list-append" },
                "https://infra.spec.whatwg.org/#list-contain": { "displayText": "exist", "export": true, "for_": ["list", "stack", "queue", "set"], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "exist", "type": "dfn", "url": "https://infra.spec.whatwg.org/#list-contain" },
                "https://infra.spec.whatwg.org/#list-empty": { "displayText": "empty", "export": true, "for_": ["list", "stack", "queue", "set"], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "empty", "type": "dfn", "url": "https://infra.spec.whatwg.org/#list-empty" },
                "https://infra.spec.whatwg.org/#list-iterate": { "displayText": "for each", "export": true, "for_": ["list", "set"], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "for each", "type": "dfn", "url": "https://infra.spec.whatwg.org/#list-iterate" },
                "https://infra.spec.whatwg.org/#list-remove": { "displayText": "remove", "export": true, "for_": ["list", "set"], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "remove", "type": "dfn", "url": "https://infra.spec.whatwg.org/#list-remove" },
                "https://infra.spec.whatwg.org/#map-exists": { "displayText": "exist", "export": true, "for_": ["map"], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "exist", "type": "dfn", "url": "https://infra.spec.whatwg.org/#map-exists" },
                "https://infra.spec.whatwg.org/#ordered-set": { "displayText": "ordered set", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "ordered set", "type": "dfn", "url": "https://infra.spec.whatwg.org/#ordered-set" },
                "https://infra.spec.whatwg.org/#set-append": { "displayText": "append", "export": true, "for_": ["set"], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "append", "type": "dfn", "url": "https://infra.spec.whatwg.org/#set-append" },
                "https://infra.spec.whatwg.org/#struct": { "displayText": "struct", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "struct", "type": "dfn", "url": "https://infra.spec.whatwg.org/#struct" },
                "https://infra.spec.whatwg.org/#struct-item": { "displayText": "item", "export": true, "for_": ["struct", "tuple"], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "item", "type": "dfn", "url": "https://infra.spec.whatwg.org/#struct-item" },
                "https://tc39.es/ecma262/#current-realm": { "displayText": "current realm", "export": true, "for_": [], "level": "", "normative": true, "shortname": "ecmascript", "spec": "ecmascript", "status": "anchor-block", "text": "current realm", "type": "dfn", "url": "https://tc39.es/ecma262/#current-realm" },
                "https://tc39.es/ecma262/#sec-completion-record-specification-type": { "displayText": "throw completion", "export": true, "for_": [], "level": "", "normative": true, "shortname": "ecmascript", "spec": "ecmascript", "status": "anchor-block", "text": "throw completion", "type": "dfn", "url": "https://tc39.es/ecma262/#sec-completion-record-specification-type" },
                "https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values": { "displayText": "Type", "export": true, "for_": [], "level": "", "normative": true, "shortname": "ecmascript", "spec": "ecmascript", "status": "anchor-block", "text": "Type", "type": "abstract-op", "url": "https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values" },
                "https://tc39.es/ecma262/#sec-iterator-records": { "displayText": "Iterator Record", "export": true, "for_": [], "level": "", "normative": true, "shortname": "ecmascript", "spec": "ecmascript", "status": "anchor-block", "text": "iterator record", "type": "dfn", "url": "https://tc39.es/ecma262/#sec-iterator-records" },
                "https://tc39.es/ecma262/#sec-normalcompletion": { "displayText": "NormalCompletion", "export": true, "for_": [], "level": "", "normative": true, "shortname": "ecmascript", "spec": "ecmascript", "status": "anchor-block", "text": "normalcompletion", "type": "dfn", "url": "https://tc39.es/ecma262/#sec-normalcompletion" },
                "https://tc39.es/ecma262/#sec-object-type": { "displayText": "Object", "export": true, "for_": [], "level": "", "normative": true, "shortname": "ecmascript", "spec": "ecmascript", "status": "anchor-block", "text": "object", "type": "dfn", "url": "https://tc39.es/ecma262/#sec-object-type" },
                "https://tc39.es/ecma262/#sec-returnifabrupt-shorthands": { "displayText": "?", "export": true, "for_": [], "level": "", "normative": true, "shortname": "ecmascript", "spec": "ecmascript", "status": "anchor-block", "text": "?", "type": "dfn", "url": "https://tc39.es/ecma262/#sec-returnifabrupt-shorthands" },
                "https://tc39.es/ecma262/multipage/abstract-operations.html#sec-asynciteratorclose": { "displayText": "AsyncIteratorClose", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "ecmascript", "spec": "ecmascript", "status": "current", "text": "AsyncIteratorClose", "type": "abstract-op", "url": "https://tc39.es/ecma262/multipage/abstract-operations.html#sec-asynciteratorclose" },
                "https://tc39.es/ecma262/multipage/abstract-operations.html#sec-getiterator": { "displayText": "GetIterator", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "ecmascript", "spec": "ecmascript", "status": "current", "text": "GetIterator", "type": "abstract-op", "url": "https://tc39.es/ecma262/multipage/abstract-operations.html#sec-getiterator" },
                "https://tc39.es/ecma262/multipage/abstract-operations.html#sec-getmethod": { "displayText": "GetMethod", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "ecmascript", "spec": "ecmascript", "status": "current", "text": "GetMethod", "type": "abstract-op", "url": "https://tc39.es/ecma262/multipage/abstract-operations.html#sec-getmethod" },
                "https://tc39.es/ecma262/multipage/abstract-operations.html#sec-iteratorclose": { "displayText": "IteratorClose", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "ecmascript", "spec": "ecmascript", "status": "current", "text": "IteratorClose", "type": "abstract-op", "url": "https://tc39.es/ecma262/multipage/abstract-operations.html#sec-iteratorclose" },
                "https://tc39.es/ecma262/multipage/abstract-operations.html#sec-iteratorcomplete": { "displayText": "IteratorComplete", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "ecmascript", "spec": "ecmascript", "status": "current", "text": "IteratorComplete", "type": "abstract-op", "url": "https://tc39.es/ecma262/multipage/abstract-operations.html#sec-iteratorcomplete" },
                "https://tc39.es/ecma262/multipage/abstract-operations.html#sec-iteratornext": { "displayText": "IteratorNext", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "ecmascript", "spec": "ecmascript", "status": "current", "text": "IteratorNext", "type": "abstract-op", "url": "https://tc39.es/ecma262/multipage/abstract-operations.html#sec-iteratornext" },
                "https://tc39.es/ecma262/multipage/abstract-operations.html#sec-iteratorstepvalue": { "displayText": "IteratorStepValue", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "ecmascript", "spec": "ecmascript", "status": "current", "text": "IteratorStepValue", "type": "abstract-op", "url": "https://tc39.es/ecma262/multipage/abstract-operations.html#sec-iteratorstepvalue" },
                "https://tc39.es/ecma262/multipage/abstract-operations.html#sec-iteratorvalue": { "displayText": "IteratorValue", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "ecmascript", "spec": "ecmascript", "status": "current", "text": "IteratorValue", "type": "abstract-op", "url": "https://tc39.es/ecma262/multipage/abstract-operations.html#sec-iteratorvalue" },
                "https://tc39.es/ecma262/multipage/control-abstraction-objects.html#await": { "displayText": "Await", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "ecmascript", "spec": "ecmascript", "status": "current", "text": "Await", "type": "abstract-op", "url": "https://tc39.es/ecma262/multipage/control-abstraction-objects.html#await" },
                "https://tc39.es/ecma262/multipage/control-abstraction-objects.html#sec-ispromise": { "displayText": "IsPromise", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "ecmascript", "spec": "ecmascript", "status": "current", "text": "IsPromise", "type": "abstract-op", "url": "https://tc39.es/ecma262/multipage/control-abstraction-objects.html#sec-ispromise" },
                "https://tc39.es/ecma262/multipage/ecmascript-data-types-and-values.html#sec-well-known-symbols": { "displayText": "%Symbol.asyncIterator%", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "ecmascript", "spec": "ecmascript", "status": "current", "text": "%Symbol.asyncIterator%", "type": "interface", "url": "https://tc39.es/ecma262/multipage/ecmascript-data-types-and-values.html#sec-well-known-symbols" },
                "https://webidl.spec.whatwg.org#a-promise-rejected-with": { "displayText": "a promise rejected with", "export": true, "for_": [], "level": "", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "anchor-block", "text": "a promise rejected with", "type": "dfn", "url": "https://webidl.spec.whatwg.org#a-promise-rejected-with" },
                "https://webidl.spec.whatwg.org/#VoidFunction": { "displayText": "VoidFunction", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "VoidFunction", "type": "callback", "url": "https://webidl.spec.whatwg.org/#VoidFunction" },
                "https://webidl.spec.whatwg.org/#a-new-promise": { "displayText": "a new promise", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "a new promise", "type": "dfn", "url": "https://webidl.spec.whatwg.org/#a-new-promise" },
                "https://webidl.spec.whatwg.org/#a-promise-resolved-with": { "displayText": "a promise resolved with", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "a promise resolved with", "type": "dfn", "url": "https://webidl.spec.whatwg.org/#a-promise-resolved-with" },
                "https://webidl.spec.whatwg.org/#an-exception-was-thrown": { "displayText": "an exception was thrown", "export": false, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "an exception was thrown", "type": "dfn", "url": "https://webidl.spec.whatwg.org/#an-exception-was-thrown" },
                "https://webidl.spec.whatwg.org/#dfn-callback-function": { "displayText": "callback function", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "callback function", "type": "dfn", "url": "https://webidl.spec.whatwg.org/#dfn-callback-function" },
                "https://webidl.spec.whatwg.org/#dfn-perform-steps-once-promise-is-settled": { "displayText": "react", "export": true, "for_": ["promise"], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "react", "type": "dfn", "url": "https://webidl.spec.whatwg.org/#dfn-perform-steps-once-promise-is-settled" },
                "https://webidl.spec.whatwg.org/#dfn-specific-type": { "displayText": "specific type", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "specific type", "type": "dfn", "url": "https://webidl.spec.whatwg.org/#dfn-specific-type" },
                "https://webidl.spec.whatwg.org/#dfn-throw": { "displayText": "throw", "export": true, "for_": ["exception"], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "throw", "type": "dfn", "url": "https://webidl.spec.whatwg.org/#dfn-throw" },
                "https://webidl.spec.whatwg.org/#exceptiondef-rangeerror": { "displayText": "RangeError", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "RangeError", "type": "exception", "url": "https://webidl.spec.whatwg.org/#exceptiondef-rangeerror" },
                "https://webidl.spec.whatwg.org/#exceptiondef-typeerror": { "displayText": "TypeError", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "TypeError", "type": "exception", "url": "https://webidl.spec.whatwg.org/#exceptiondef-typeerror" },
                "https://webidl.spec.whatwg.org/#idl-DOMString": { "displayText": "DOMString", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "DOMString", "type": "interface", "url": "https://webidl.spec.whatwg.org/#idl-DOMString" },
                "https://webidl.spec.whatwg.org/#idl-any": { "displayText": "any", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "any", "type": "interface", "url": "https://webidl.spec.whatwg.org/#idl-any" },
                "https://webidl.spec.whatwg.org/#idl-boolean": { "displayText": "boolean", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "boolean", "type": "interface", "url": "https://webidl.spec.whatwg.org/#idl-boolean" },
                "https://webidl.spec.whatwg.org/#idl-promise": { "displayText": "Promise", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "Promise", "type": "interface", "url": "https://webidl.spec.whatwg.org/#idl-promise" },
                "https://webidl.spec.whatwg.org/#idl-sequence": { "displayText": "sequence", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "sequence", "type": "dfn", "url": "https://webidl.spec.whatwg.org/#idl-sequence" },
                "https://webidl.spec.whatwg.org/#idl-undefined": { "displayText": "undefined", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "undefined", "type": "interface", "url": "https://webidl.spec.whatwg.org/#idl-undefined" },
                "https://webidl.spec.whatwg.org/#idl-unsigned-long-long": { "displayText": "unsigned long long", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "unsigned long long", "type": "interface", "url": "https://webidl.spec.whatwg.org/#idl-unsigned-long-long" },
                "https://webidl.spec.whatwg.org/#invoke-a-callback-function": { "displayText": "invoke", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "invoke", "type": "dfn", "url": "https://webidl.spec.whatwg.org/#invoke-a-callback-function" },
                "https://webidl.spec.whatwg.org/#new": { "displayText": "new", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "new", "type": "dfn", "url": "https://webidl.spec.whatwg.org/#new" },
                "https://webidl.spec.whatwg.org/#reject": { "displayText": "reject", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "reject", "type": "dfn", "url": "https://webidl.spec.whatwg.org/#reject" },
                "https://webidl.spec.whatwg.org/#resolve": { "displayText": "resolve", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "resolve", "type": "dfn", "url": "https://webidl.spec.whatwg.org/#resolve" },
                "https://webidl.spec.whatwg.org/#this": { "displayText": "this", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "this", "type": "dfn", "url": "https://webidl.spec.whatwg.org/#this" },
            };

            function mkRefHint(link, ref) {
                const linkText = link.textContent;
                let dfnTextElements = '';
                if (ref.displayText.toLowerCase() != linkText.toLowerCase()) {
                    // Give the original term if it's being displayed in a different way.
                    // But allow casing differences, they're insignificant.
                    dfnTextElements =
                        mk.li({},
                            mk.b({}, "Term: "),
                            mk.span({}, ref.displayText)
                        );
                }
                const forList = ref.for_;
                let forListElements;
                if (forList.length == 0) {
                    forListElements = [];
                } else if (forList.length == 1) {
                    forListElements = mk.li({},
                        mk.b({}, "For: "),
                        mk.span({}, forList[0]),
                    );
                } else {
                    forListElements = mk.li({},
                        mk.b({}, "For: "),
                        mk.ul({},
                            ...forList.map(forItem =>
                                mk.li({},
                                    mk.span({}, forItem)
                                ),
                            ),
                        ),
                    );
                }
                const url = ref.url;
                const safeUrl = encodeURIComponent(url);
                const hintPanel = mk.aside({
                    class: "ref-hint",
                    id: `ref-hint-for-${safeUrl}`,
                    "data-for": url,
                    "aria-labelled-by": `ref-hint-for-${safeUrl}`,
                },
                    mk.ul({},
                        dfnTextElements,
                        mk.li({},
                            mk.b({}, "URL: "),
                            mk.a({ href: url, class: "ref" }, url),
                        ),
                        mk.li({},
                            mk.b({}, "Type: "),
                            mk.span({}, `${ref.type}`),
                        ),
                        mk.li({},
                            mk.b({}, "Spec: "),
                            mk.span({}, `${ref.spec ? ref.spec : ''}`),
                        ),
                        forListElements
                    ),
                );
                hintPanel.forLink = link;
                setupRefHintEventListeners(link, hintPanel);
                return hintPanel;
            }

            function hideAllRefHints() {
                queryAll(".ref-hint").forEach(el => hideRefHint(el));
            }

            function hideRefHint(refHint) {
                const link = refHint.forLink;
                link.setAttribute("aria-expanded", "false");
                if (refHint.teardownEventListeners) {
                    refHint.teardownEventListeners();
                }
                refHint.remove();
            }

            function showRefHint(link) {
                if (link.classList.contains("dfn-link")) return;
                const url = link.getAttribute("href");
                const refHintKey = link.getAttribute("data-refhint-key");
                let key = url;
                if (refHintKey) {
                    key = refHintKey + "_" + url;
                }
                const ref = refsData[key];
                if (!ref) return;

                hideAllRefHints(); // Only display one at this time.

                const refHint = mkRefHint(link, ref);
                append(document.body, refHint);
                link.setAttribute("aria-expanded", "true");
                positionRefHint(refHint);
            }

            function setupRefHintEventListeners(link, refHint) {
                if (refHint.teardownEventListeners) return;
                // Add event handlers to hide the refHint after the user moves away
                // from both the link and refHint, if not hovering either within one second.
                let timeout = null;
                const startHidingRefHint = (event) => {
                    if (timeout) {
                        clearTimeout(timeout);
                    }
                    timeout = setTimeout(() => {
                        hideRefHint(refHint);
                    }, 1000);
                }
                const resetHidingRefHint = (event) => {
                    if (timeout) clearTimeout(timeout);
                    timeout = null;
                };
                link.addEventListener("mouseleave", startHidingRefHint);
                link.addEventListener("mouseenter", resetHidingRefHint);
                link.addEventListener("blur", startHidingRefHint);
                link.addEventListener("focus", resetHidingRefHint);
                refHint.addEventListener("mouseleave", startHidingRefHint);
                refHint.addEventListener("mouseenter", resetHidingRefHint);
                refHint.addEventListener("blur", startHidingRefHint);
                refHint.addEventListener("focus", resetHidingRefHint);

                refHint.teardownEventListeners = () => {
                    // remove event listeners
                    resetHidingRefHint();
                    link.removeEventListener("mouseleave", startHidingRefHint);
                    link.removeEventListener("mouseenter", resetHidingRefHint);
                    link.removeEventListener("blur", startHidingRefHint);
                    link.removeEventListener("focus", resetHidingRefHint);
                    refHint.removeEventListener("mouseleave", startHidingRefHint);
                    refHint.removeEventListener("mouseenter", resetHidingRefHint);
                    refHint.removeEventListener("blur", startHidingRefHint);
                    refHint.removeEventListener("focus", resetHidingRefHint);
                };
            }

            function positionRefHint(refHint) {
                const link = refHint.forLink;
                const linkPos = getBounds(link);
                refHint.style.top = linkPos.bottom + "px";
                refHint.style.left = linkPos.left + "px";

                const panelPos = refHint.getBoundingClientRect();
                const panelMargin = 8;
                const maxRight = document.body.parentNode.clientWidth - panelMargin;
                if (panelPos.right > maxRight) {
                    const overflowAmount = panelPos.right - maxRight;
                    const newLeft = Math.max(panelMargin, linkPos.left - overflowAmount);
                    refHint.style.left = newLeft + "px";
                }
            }

            // TODO: shared util
            // Returns the root-level absolute position {left and top} of element.
            function getBounds(el, relativeTo = document.body) {
                const relativeRect = relativeTo.getBoundingClientRect();
                const elRect = el.getBoundingClientRect();
                const top = elRect.top - relativeRect.top;
                const left = elRect.left - relativeRect.left;
                return {
                    top,
                    left,
                    bottom: top + elRect.height,
                    right: left + elRect.width,
                }
            }

            function showRefHintListener(e) {
                // If the target isn't in a link (or is a link),
                // just ignore it.
                let link = e.target.closest("a");
                if (!link) return;

                // If the target is in a ref-hint panel
                // (aka a link in the already-open one),
                // also just ignore it.
                if (link.closest(".ref-hint")) return;

                // Otherwise, show the panel for the link.
                showRefHint(link);
            }

            function hideAllHintsListener(e) {
                // If the click is inside a ref-hint panel, ignore it.
                if (e.target.closest(".ref-hint")) return;
                // Otherwise, close all the current panels.
                hideAllRefHints();
            }

            document.addEventListener("DOMContentLoaded", () => {
                document.body.addEventListener("mousedown", showRefHintListener);
                document.body.addEventListener("focus", showRefHintListener);

                document.body.addEventListener("click", hideAllHintsListener);
            });

            window.addEventListener("resize", () => {
                // Hide any open ref hint.
                hideAllRefHints();
            });
        }
    </script>
    <script>/* Boilerplate: script-var-click-highlighting */
        "use strict";
        {
            /*
            Color-choosing design:
            
            * Colors are ordered by goodness.
            * On clicking a var, give it the earliest color
                with the lowest usage in the algorithm.
            * On re-clicking, re-use the var's most recent color
                if that's not currently being used elsewhere.
            */

            const COLOR_COUNT = 7;

            document.addEventListener("click", e => {
                if (e.target.nodeName == "VAR") {
                    highlightSameAlgoVars(e.target);
                }
            });

            function highlightSameAlgoVars(v) {
                // Find the algorithm container.
                let algoContainer = findAlgoContainer(v);

                // Not highlighting document-global vars,
                // too likely to be unrelated.
                if (algoContainer == null) return;

                const varName = nameFromVar(v);
                if (!v.hasAttribute("data-var-color")) {
                    const newColor = chooseHighlightColor(algoContainer, v);
                    for (const el of algoContainer.querySelectorAll("var")) {
                        if (nameFromVar(el) == varName) {
                            el.setAttribute("data-var-color", newColor);
                            el.setAttribute("data-var-last-color", newColor);
                        }
                    }
                } else {
                    for (const el of algoContainer.querySelectorAll("var")) {
                        if (nameFromVar(el) == varName) {
                            el.removeAttribute("data-var-color");
                        }
                    }
                }
            }
            function findAlgoContainer(el) {
                while (el != document.body) {
                    if (el.hasAttribute("data-algorithm")) return el;
                    el = el.parentNode;
                }
                return null;
            }
            function nameFromVar(el) {
                return el.textContent.replace(/(\s|\xa0)+/g, " ").trim();
            }
            function colorCountsFromContainer(container) {
                const namesFromColor = Array.from({ length: COLOR_COUNT }, x => new Set());
                for (let v of container.querySelectorAll("var[data-var-color]")) {
                    let color = +v.getAttribute("data-var-color");
                    namesFromColor[color].add(nameFromVar(v));
                }

                return namesFromColor.map(x => x.size);
            }
            function leastUsedColor(colors) {
                // Find the earliest color with the lowest count.
                let minCount = Infinity;
                let minColor = null;
                for (var i = 0; i < colors.length; i++) {
                    if (colors[i] < minCount) {
                        minColor = i;
                        minCount = colors[i];
                    }
                }
                return minColor;
            }
            function chooseHighlightColor(container, v) {
                const colorCounts = colorCountsFromContainer(container);
                if (v.hasAttribute("data-var-last-color")) {
                    let color = +v.getAttribute("data-var-last-color");
                    if (colorCounts[color] == 0) return color;
                }
                return leastUsedColor(colorCounts);
            }
        }
    </script>
    <script>/* Boilerplate: script-wpt */
        "use strict";
        {
            let wptData = {
                "paths": ["/dom/observable/"],
            };

            document.addEventListener("DOMContentLoaded", async () => {
                if (wptData.paths.length == 0) return;

                const runsUrl = "https://wpt.fyi/api/runs?label=master&label=stable&max-count=1&product=chrome&product=firefox&product=safari&product=edge";
                const runs = await (await fetch(runsUrl)).json();

                let testResults = [];
                for (const pathPrefix of wptData.paths) {
                    const pathResults = await (await fetch("https://wpt.fyi/api/search", {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json",
                        },
                        body: JSON.stringify({
                            "run_ids": runs.map(x => x.id),
                            "query": { "path": pathPrefix },
                        })
                    })).json();
                    testResults = testResults.concat(pathResults.results);
                }

                const browsers = runs.map(x => ({ name: x.browser_name, version: x.browser_version, passes: 0, total: 0 }));
                const resultsFromPath = new Map(testResults.map(result => {
                    const testPath = result.test;
                    const passes = result.legacy_status.map(x => [x.passes, x.total]);
                    return [testPath, passes];
                }));
                const seenTests = new Set();
                document.querySelectorAll(".wpt-name").forEach(nameEl => {
                    const passData = resultsFromPath.get("/" + nameEl.getAttribute("title"));
                    if (!passData) {
                        console.log("Couldn't find test in results:", nameEl);
                        return
                    }
                    const numTests = passData[0][1];
                    if (numTests > 1) {
                        nameEl.insertAdjacentElement("beforeend",
                            mk.small({}, ` (${numTests} tests)`));
                    }
                    if (passData == undefined) return;
                    const resultsEl = mk.span({ "class": "wpt-results" },
                        ...passData.map((p, i) => mk.span(
                            {
                                "title": `${browsers[i].name} ${p[0]}/${p[1]}`,
                                "class": "wpt-result",
                                "style": `background: conic-gradient(forestgreen ${p[0] / p[1] * 360}deg, darkred 0deg);`,
                            })),
                    );
                    nameEl.insertAdjacentElement("afterend", resultsEl);

                    // Only update the summary pass/total count if we haven't seen this
                    // test before, to support authors listing the same test multiple times
                    // in a spec.
                    if (!seenTests.has(nameEl.getAttribute("title"))) {
                        seenTests.add(nameEl.getAttribute("title"));
                        passData.forEach((p, i) => {
                            browsers[i].passes += p[0];
                            browsers[i].total += p[1];
                        });
                    }
                });
                const overview = document.querySelector(".wpt-overview");
                if (overview) {
                    overview.appendChild(mk.ul({}, ...browsers.map(formatWptResult)));
                    document.head.appendChild(mk.style({},
                        `.wpt-overview ul { display: flex; flex-flow: row wrap; gap: .2em; justify-content: start; list-style: none; padding: 0; margin: 0;}
             .wpt-overview li { padding: .25em 1em; color: black; text-align: center; }
             .wpt-overview img { height: 1.5em; height: max(1.5em, 32px); background: transparent; }
             .wpt-overview .browser { font-weight: bold; }
             .wpt-overview .passes-none { background: #e57373; }
             .wpt-overview .passes-hardly { background: #ffb74d; }
             .wpt-overview .passes-a-few { background: #ffd54f; }
             .wpt-overview .passes-half { background: #fff176; }
             .wpt-overview .passes-lots { background: #dce775; }
             .wpt-overview .passes-most { background: #aed581; }
             .wpt-overview .passes-all { background: #81c784; }`));
                }
            });

            function formatWptResult({ name, version, passes, total }) {
                const passRate = passes / total;
                let passClass = "";
                if (passRate == 0) passClass = "passes-none";
                else if (passRate < .2) passClass = "passes-hardly";
                else if (passRate < .4) passClass = "passes-a-few";
                else if (passRate < .6) passClass = "passes-half";
                else if (passRate < .8) passClass = "passes-lots";
                else if (passRate < 1) passClass = "passes-most";
                else passClass = "passes-all";

                name = name[0].toUpperCase() + name.slice(1);
                const shortVersion = /^\d+/.exec(version);
                const icon = []

                if (name == "Chrome") icon.push(mk.img({ alt: "", src: "https://wpt.fyi/static/chrome_64x64.png" }));
                if (name == "Edge") icon.push(mk.img({ alt: "", src: "https://wpt.fyi/static/edge_64x64.png" }));
                if (name == "Safari") icon.push(mk.img({ alt: "", src: "https://wpt.fyi/static/safari_64x64.png" }));
                if (name == "Firefox") icon.push(mk.img({ alt: "", src: "https://wpt.fyi/static/firefox_64x64.png" }));

                return mk.li({ "class": passClass },
                    mk.nobr({ 'class': 'browser' }, ...icon, ` ${name} ${shortVersion}`),
                    mk.br(),
                    mk.nobr({ 'class': 'pass-rate' }, `${passes}/${total}`)
                );
            }
        }
    </script>
    <script src="/dropdown.js"></script>