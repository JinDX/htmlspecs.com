<!doctype html>
<html lang="zh-hans">

<head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
    <title>安全付款确认</title>
    <meta content="CRD" name="w3c-status">
    <!-- <meta content="Bikeshed version fd9c5ce66, updated Mon Dec 8 22:43:21 2025 +0000" name="generator"> -->
    <link href="https://www.w3.org/TR/secure-payment-confirmation/" rel="canonical">
    <!-- <meta content="a68fe7cdedbc3089d0ab9938474717e33eeffbf1" name="revision"> -->
    <meta content="dark light" name="color-scheme">
    <style>
        /* The heading colors reference https://www.w3.org/StyleSheets/TR/2021/base.css */
        :root {
            --note-heading-text: var(--bg);
            --note-heading-bg: var(--note-text);
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --note-heading-text: var(--bg);
                --note-heading-bg: var(--note-text);
            }
        }

        /* The .domintro style is reused from https://resources.whatwg.org/standard.css
   and https://resources.whatwg.org/spec.css */
        .domintro {
            margin: 1.5em 0;
            padding: 0.5em 1em;
        }

        li>.domintro {
            margin: 1em 0;
        }

        .domintro> :first-child,
        .domintro>.self-link:first-child+* {
            margin-top: 0;
        }

        .domintro> :last-child {
            margin-bottom: 0;
        }

        /* These ones have decorations */
        .domintro {
            position: relative;

            /* top gets extra 0.5em (both above and below) for the decoration;
     then we add the padding to the bottom as well for symmetry */
            margin-top: 2em;
            padding-top: 1em;
            padding-bottom: 1em;
        }

        li>.domintro {
            margin-top: 1.5em;
        }

        .domintro::before {
            padding: 0.15em 0.25em;
            position: absolute;
            top: -0.8em;
            left: -0.8em;
        }

        .domintro {
            color: var(--note-text);
            background: var(--note-bg);
        }

        .domintro::before {
            color: var(--note-heading-text);
            background: var(--note-heading-bg);
        }

        .domintro dt,
        .domintro dt * {
            color: var(--text);
        }

        .domintro dd p {
            margin: 0.5em 0;
        }

        .domintro dd p:first-child {
            margin-top: 0;
        }

        .domintro dd p:last-child {
            margin-bottom: 0;
        }

        .domintro dd p+p.note,
        .domintro dd p+p.warning {
            /* Fix the gap above */
            margin-top: 1.3em;
            /* 1.3em = 0.5em + 0.8em */
            /* 0.5em = margin-bottom of .domintro dd p */
            /* 0.8em = top of .note::before */
        }

        .domintro dd span.note {
            /* Differentiate inline notes from the background */
            border: thin solid;
            border-left: none;
            padding-top: 0.15em;
            /* 0.15em = padding-top of .note::before */
            padding-bottom: 0.15em;
        }

        dl.domintro::before {
            content: 'For web developers (non-normative)';
        }
    </style>
    <style>
        /* Boilerplate: style-autolinks */
        .css.css,
        .property.property,
        .descriptor.descriptor {
            color: var(--a-normal-text);
            font-size: inherit;
            font-family: inherit;
        }

        .css::before,
        .property::before,
        .descriptor::before {
            content: "‘";
        }

        .css::after,
        .property::after,
        .descriptor::after {
            content: "’";
        }

        .property,
        .descriptor {
            /* Don't wrap property and descriptor names */
            white-space: nowrap;
        }

        .type {
            /* CSS value <type> */
            font-style: italic;
        }

        pre .property::before,
        pre .property::after {
            content: "";
        }

        [data-link-type="property"]::before,
        [data-link-type="propdesc"]::before,
        [data-link-type="descriptor"]::before,
        [data-link-type="value"]::before,
        [data-link-type="function"]::before,
        [data-link-type="at-rule"]::before,
        [data-link-type="selector"]::before,
        [data-link-type="maybe"]::before {
            content: "‘";
        }

        [data-link-type="property"]::after,
        [data-link-type="propdesc"]::after,
        [data-link-type="descriptor"]::after,
        [data-link-type="value"]::after,
        [data-link-type="function"]::after,
        [data-link-type="at-rule"]::after,
        [data-link-type="selector"]::after,
        [data-link-type="maybe"]::after {
            content: "’";
        }

        [data-link-type].production::before,
        [data-link-type].production::after,
        .prod [data-link-type]::before,
        .prod [data-link-type]::after {
            content: "";
        }

        [data-link-type=element],
        [data-link-type=element-attr] {
            font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
            font-size: .9em;
        }

        [data-link-type=element]::before {
            content: "<"
        }

        [data-link-type=element]::after {
            content: ">"
        }

        [data-link-type=biblio] {
            white-space: pre;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --selflink-text: black;
                --selflink-bg: silver;
                --selflink-hover-text: white;
            }
        }
    </style>
    <style>
        /* Boilerplate: style-colors */
        /* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
        :root {
            color-scheme: light dark;

            --text: black;
            --bg: white;

            --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

            --logo-bg: #1a5e9a;
            --logo-active-bg: #c00;
            --logo-text: white;

            --tocnav-normal-text: #707070;
            --tocnav-normal-bg: var(--bg);
            --tocnav-hover-text: var(--tocnav-normal-text);
            --tocnav-hover-bg: #f8f8f8;
            --tocnav-active-text: #c00;
            --tocnav-active-bg: var(--tocnav-normal-bg);

            --tocsidebar-text: var(--text);
            --tocsidebar-bg: #f7f8f9;
            --tocsidebar-shadow: rgba(0, 0, 0, .1);
            --tocsidebar-heading-text: hsla(203, 20%, 40%, .7);

            --toclink-text: var(--text);
            --toclink-underline: #3980b5;
            --toclink-visited-text: var(--toclink-text);
            --toclink-visited-underline: #054572;

            --heading-text: #005a9c;

            --hr-text: var(--text);

            --algo-border: #def;

            --del-text: red;
            --del-bg: transparent;
            --ins-text: #080;
            --ins-bg: transparent;

            --a-normal-text: #034575;
            --a-normal-underline: #bbb;
            --a-visited-text: var(--a-normal-text);
            --a-visited-underline: #707070;
            --a-hover-bg: rgba(75%, 75%, 75%, .25);
            --a-active-text: #c00;
            --a-active-underline: #c00;

            --blockquote-border: silver;
            --blockquote-bg: transparent;
            --blockquote-text: currentcolor;

            --issue-border: #e05252;
            --issue-bg: #fbe9e9;
            --issue-text: var(--text);
            --issueheading-text: #831616;

            --example-border: #e0cb52;
            --example-bg: #fcfaee;
            --example-text: var(--text);
            --exampleheading-text: #574b0f;

            --note-border: #52e052;
            --note-bg: #e9fbe9;
            --note-text: var(--text);
            --noteheading-text: hsl(120, 70%, 30%);
            --notesummary-underline: silver;

            --assertion-border: #aaa;
            --assertion-bg: #eee;
            --assertion-text: black;

            --advisement-border: orange;
            --advisement-bg: #fec;
            --advisement-text: var(--text);
            --advisementheading-text: #b35f00;

            --warning-border: red;
            --warning-bg: hsla(40, 100%, 50%, 0.95);
            --warning-text: var(--text);

            --amendment-border: #330099;
            --amendment-bg: #F5F0FF;
            --amendment-text: var(--text);
            --amendmentheading-text: #220066;

            --def-border: #8ccbf2;
            --def-bg: #def;
            --def-text: var(--text);
            --defrow-border: #bbd7e9;

            --datacell-border: silver;

            --indexinfo-text: #707070;

            --indextable-hover-text: black;
            --indextable-hover-bg: #f7f8f9;

            --outdatedspec-bg: rgba(0, 0, 0, .5);
            --outdatedspec-text: black;
            --outdated-bg: maroon;
            --outdated-text: white;
            --outdated-shadow: red;

            --editedrec-bg: darkorange;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --text: #ddd;
                --bg: black;

                --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

                --logo-bg: #1a5e9a;
                --logo-active-bg: #c00;
                --logo-text: white;

                --tocnav-normal-text: #999;
                --tocnav-normal-bg: var(--bg);
                --tocnav-hover-text: var(--tocnav-normal-text);
                --tocnav-hover-bg: #080808;
                --tocnav-active-text: #f44;
                --tocnav-active-bg: var(--tocnav-normal-bg);

                --tocsidebar-text: var(--text);
                --tocsidebar-bg: #080808;
                --tocsidebar-shadow: rgba(255, 255, 255, .1);
                --tocsidebar-heading-text: hsla(203, 20%, 40%, .7);

                --toclink-text: var(--text);
                --toclink-underline: #6af;
                --toclink-visited-text: var(--toclink-text);
                --toclink-visited-underline: #054572;

                --heading-text: #8af;

                --hr-text: var(--text);

                --algo-border: #456;

                --del-text: #f44;
                --del-bg: transparent;
                --ins-text: #4a4;
                --ins-bg: transparent;

                --a-normal-text: #6af;
                --a-normal-underline: #555;
                --a-visited-text: var(--a-normal-text);
                --a-visited-underline: var(--a-normal-underline);
                --a-hover-bg: rgba(25%, 25%, 25%, .2);
                --a-active-text: #f44;
                --a-active-underline: var(--a-active-text);

                --borderedblock-bg: rgba(255, 255, 255, .05);

                --blockquote-border: silver;
                --blockquote-bg: var(--borderedblock-bg);
                --blockquote-text: currentcolor;

                --issue-border: #e05252;
                --issue-bg: var(--borderedblock-bg);
                --issue-text: var(--text);
                --issueheading-text: hsl(0deg, 70%, 70%);

                --example-border: hsl(50deg, 90%, 60%);
                --example-bg: var(--borderedblock-bg);
                --example-text: var(--text);
                --exampleheading-text: hsl(50deg, 70%, 70%);

                --note-border: hsl(120deg, 100%, 35%);
                --note-bg: var(--borderedblock-bg);
                --note-text: var(--text);
                --noteheading-text: hsl(120, 70%, 70%);
                --notesummary-underline: silver;

                --assertion-border: #444;
                --assertion-bg: var(--borderedblock-bg);
                --assertion-text: var(--text);

                --advisement-border: orange;
                --advisement-bg: #222218;
                --advisement-text: var(--text);
                --advisementheading-text: #f84;

                --warning-border: red;
                --warning-bg: hsla(40, 100%, 20%, 0.95);
                --warning-text: var(--text);

                --amendment-border: #330099;
                --amendment-bg: #080010;
                --amendment-text: var(--text);
                --amendmentheading-text: #cc00ff;

                --def-border: #8ccbf2;
                --def-bg: #080818;
                --def-text: var(--text);
                --defrow-border: #136;

                --datacell-border: silver;

                --indexinfo-text: #aaa;

                --indextable-hover-text: var(--text);
                --indextable-hover-bg: #181818;

                --outdatedspec-bg: rgba(255, 255, 255, .5);
                --outdatedspec-text: black;
                --outdated-bg: maroon;
                --outdated-text: white;
                --outdated-shadow: red;

                --editedrec-bg: darkorange;
            }

            /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
            img {
                background: white;
            }
        }
    </style>
    <style>
        /* Boilerplate: style-counters */
        body {
            counter-reset: example figure issue;
        }

        .issue {
            counter-increment: issue;
        }

        .issue:not(.no-marker)::before {
            content: "Issue " counter(issue);
        }

        .example {
            counter-increment: example;
        }

        .example:not(.no-marker)::before {
            content: "Example " counter(example);
        }

        .invalid.example:not(.no-marker)::before,
        .illegal.example:not(.no-marker)::before {
            content: "Invalid Example " counter(example);
        }

        figcaption {
            counter-increment: figure;
        }

        figcaption:not(.no-marker)::before {
            content: "Figure " counter(figure) " ";
        }
    </style>
    <style>
        /* Boilerplate: style-dfn-panel */
        :root {
            --dfnpanel-bg: #ddd;
            --dfnpanel-text: var(--text);
            --dfnpanel-target-bg: #ffc;
            --dfnpanel-target-outline: orange;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --dfnpanel-bg: #222;
                --dfnpanel-text: var(--text);
                --dfnpanel-target-bg: #333;
                --dfnpanel-target-outline: silver;
            }
        }

        .dfn-panel {
            position: absolute;
            z-index: 35;
            width: 20em;
            width: 300px;
            height: auto;
            max-height: 500px;
            overflow: auto;
            padding: 0.5em 0.75em;
            font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
            background: var(--dfnpanel-bg);
            color: var(--dfnpanel-text);
            border: outset 0.2em;
            white-space: normal;
            /* in case it's moved into a pre */
        }

        .dfn-panel:not(.on) {
            display: none;
        }

        .dfn-panel * {
            margin: 0;
            padding: 0;
            text-indent: 0;
        }

        .dfn-panel>b {
            display: block;
        }

        .dfn-panel a {
            color: var(--dfnpanel-text);
        }

        .dfn-panel a:not(:hover) {
            text-decoration: none !important;
            border-bottom: none !important;
        }

        .dfn-panel a:focus {
            outline: 5px auto Highlight;
            outline: 5px auto -webkit-focus-ring-color;
        }

        .dfn-panel>b+b {
            margin-top: 0.25em;
        }

        .dfn-panel ul {
            padding: 0 0 0 1em;
            list-style: none;
        }

        .dfn-panel li a {
            max-width: calc(300px - 1.5em - 1em);
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .dfn-panel.activated {
            display: inline-block;
            position: fixed;
            left: 8px;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - 1.5em - .4em - .5em);
            max-height: 30vh;
            transition: left 1s ease-out, bottom 1s ease-out;
        }

        .dfn-panel .link-item:hover {
            text-decoration: underline;
        }

        .dfn-panel .link-item .copy-icon {
            opacity: 0;
        }

        .dfn-panel .link-item:hover .copy-icon,
        .dfn-panel .link-item .copy-icon:focus {
            opacity: 1;
        }

        .dfn-panel .copy-icon {
            display: inline-block;
            margin-right: 0.5em;
            width: 0.85em;
            height: 1em;
            border-radius: 3px;
            background-color: #ccc;
            cursor: pointer;
        }

        .dfn-panel .copy-icon .icon {
            width: 100%;
            height: 100%;
            background-color: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        .dfn-panel .copy-icon .icon::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: 1px solid black;
            background-color: #ccc;
            opacity: 0.25;
            transform: translate(3px, -3px);
        }

        .dfn-panel .copy-icon:active .icon::before {
            opacity: 1;
        }

        .dfn-paneled[role="button"] {
            cursor: help;
        }

        .highlighted {
            animation: target-fade 3s;
        }

        @keyframes target-fade {
            from {
                background-color: var(--dfnpanel-target-bg);
                outline: 5px solid var(--dfnpanel-target-outline);
            }

            to {
                color: var(--a-normal-text);
                background-color: transparent;
                outline: transparent;
            }
        }
    </style>
    <style>
        /* Boilerplate: style-idl-highlighting */
        pre.idl.highlight {
            background: var(--borderedblock-bg, var(--def-bg));
        }
    </style>
    <style>
        /* Boilerplate: style-issues */
        a[href].issue-return {
            float: right;
            float: inline-end;
            color: var(--issueheading-text);
            font-weight: bold;
            text-decoration: none;
        }
    </style>
    <style>
        /* Boilerplate: style-md-lists */
        /* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
        [data-md]> :first-child {
            margin-top: 0;
        }

        [data-md]> :last-child {
            margin-bottom: 0;
        }
    </style>
    <style>
        /* Boilerplate: style-ref-hints */
        :root {
            --ref-hint-bg: #ddd;
            --ref-hint-text: var(--text);
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --ref-hint-bg: #222;
                --ref-hint-text: var(--text);
            }
        }

        .ref-hint {
            display: inline-block;
            position: absolute;
            z-index: 35;
            width: 20em;
            width: 300px;
            height: auto;
            max-height: 500px;
            overflow: auto;
            padding: 0.5em 0.5em;
            font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
            background: var(--ref-hint-bg);
            color: var(--ref-hint-text);
            border: outset 0.2em;
            white-space: normal;
            /* in case it's moved into a pre */
        }

        .ref-hint * {
            margin: 0;
            padding: 0;
            text-indent: 0;
        }

        .ref-hint ul {
            padding: 0 0 0 1em;
            list-style: none;
        }
    </style>
    <style>
        /* Boilerplate: style-selflinks */
        :root {
            --selflink-text: white;
            --selflink-bg: gray;
            --selflink-hover-text: black;
        }

        .heading,
        .issue,
        .note,
        .example,
        li,
        dt {
            position: relative;
        }

        a.self-link {
            position: absolute;
            top: 0;
            left: calc(-1 * (3.5rem - 26px));
            width: calc(3.5rem - 26px);
            height: 2em;
            text-align: center;
            border: none;
            transition: opacity .2s;
            opacity: .5;
        }

        a.self-link:hover {
            opacity: 1;
        }

        .heading>a.self-link {
            font-size: 83%;
        }

        .example>a.self-link,
        .note>a.self-link,
        .issue>a.self-link {
            /* These blocks are overflow:auto, so positioning outside
       doesn't work. */
            left: auto;
            right: 0;
        }

        li>a.self-link {
            left: calc(-1 * (3.5rem - 26px) - 2em);
        }

        dfn>a.self-link {
            top: auto;
            left: auto;
            opacity: 0;
            width: 1.5em;
            height: 1.5em;
            background: var(--selflink-bg);
            color: var(--selflink-text);
            font-style: normal;
            transition: opacity .2s, background-color .2s, color .2s;
        }

        dfn:hover>a.self-link {
            opacity: 1;
        }

        dfn>a.self-link:hover {
            color: var(--selflink-hover-text);
        }

        a.self-link::before {
            content: "¶";
        }

        .heading>a.self-link::before {
            content: "§";
        }

        dfn>a.self-link::before {
            content: "#";
        }
    </style>
    <style>
        /* Boilerplate: style-syntax-highlighting */
        code.highlight {
            padding: .1em;
            border-radius: .3em;
        }

        pre.highlight,
        pre>code.highlight {
            display: block;
            padding: 1em;
            margin: .5em 0;
            overflow: auto;
            border-radius: 0;
        }

        .highlight:not(.idl) {
            background: rgba(0, 0, 0, .03);
        }

        c-[a] {
            color: #990055
        }

        /* Keyword.Declaration */
        c-[b] {
            color: #990055
        }

        /* Keyword.Type */
        c-[c] {
            color: #708090
        }

        /* Comment */
        c-[d] {
            color: #708090
        }

        /* Comment.Multiline */
        c-[e] {
            color: #0077aa
        }

        /* Name.Attribute */
        c-[f] {
            color: #669900
        }

        /* Name.Tag */
        c-[g] {
            color: #222222
        }

        /* Name.Variable */
        c-[k] {
            color: #990055
        }

        /* Keyword */
        c-[l] {
            color: #000000
        }

        /* Literal */
        c-[m] {
            color: #000000
        }

        /* Literal.Number */
        c-[n] {
            color: #0077aa
        }

        /* Name */
        c-[o] {
            color: #999999
        }

        /* Operator */
        c-[p] {
            color: #999999
        }

        /* Punctuation */
        c-[s] {
            color: #a67f59
        }

        /* Literal.String */
        c-[t] {
            color: #a67f59
        }

        /* Literal.String.Single */
        c-[u] {
            color: #a67f59
        }

        /* Literal.String.Double */
        c-[cp] {
            color: #708090
        }

        /* Comment.Preproc */
        c-[c1] {
            color: #708090
        }

        /* Comment.Single */
        c-[cs] {
            color: #708090
        }

        /* Comment.Special */
        c-[kc] {
            color: #990055
        }

        /* Keyword.Constant */
        c-[kn] {
            color: #990055
        }

        /* Keyword.Namespace */
        c-[kp] {
            color: #990055
        }

        /* Keyword.Pseudo */
        c-[kr] {
            color: #990055
        }

        /* Keyword.Reserved */
        c-[ld] {
            color: #000000
        }

        /* Literal.Date */
        c-[nc] {
            color: #0077aa
        }

        /* Name.Class */
        c-[no] {
            color: #0077aa
        }

        /* Name.Constant */
        c-[nd] {
            color: #0077aa
        }

        /* Name.Decorator */
        c-[ni] {
            color: #0077aa
        }

        /* Name.Entity */
        c-[ne] {
            color: #0077aa
        }

        /* Name.Exception */
        c-[nf] {
            color: #0077aa
        }

        /* Name.Function */
        c-[nl] {
            color: #0077aa
        }

        /* Name.Label */
        c-[nn] {
            color: #0077aa
        }

        /* Name.Namespace */
        c-[py] {
            color: #0077aa
        }

        /* Name.Property */
        c-[ow] {
            color: #999999
        }

        /* Operator.Word */
        c-[mb] {
            color: #000000
        }

        /* Literal.Number.Bin */
        c-[mf] {
            color: #000000
        }

        /* Literal.Number.Float */
        c-[mh] {
            color: #000000
        }

        /* Literal.Number.Hex */
        c-[mi] {
            color: #000000
        }

        /* Literal.Number.Integer */
        c-[mo] {
            color: #000000
        }

        /* Literal.Number.Oct */
        c-[sb] {
            color: #a67f59
        }

        /* Literal.String.Backtick */
        c-[sc] {
            color: #a67f59
        }

        /* Literal.String.Char */
        c-[sd] {
            color: #a67f59
        }

        /* Literal.String.Doc */
        c-[se] {
            color: #a67f59
        }

        /* Literal.String.Escape */
        c-[sh] {
            color: #a67f59
        }

        /* Literal.String.Heredoc */
        c-[si] {
            color: #a67f59
        }

        /* Literal.String.Interpol */
        c-[sx] {
            color: #a67f59
        }

        /* Literal.String.Other */
        c-[sr] {
            color: #a67f59
        }

        /* Literal.String.Regex */
        c-[ss] {
            color: #a67f59
        }

        /* Literal.String.Symbol */
        c-[vc] {
            color: #0077aa
        }

        /* Name.Variable.Class */
        c-[vg] {
            color: #0077aa
        }

        /* Name.Variable.Global */
        c-[vi] {
            color: #0077aa
        }

        /* Name.Variable.Instance */
        c-[il] {
            color: #000000
        }

        /* Literal.Number.Integer.Long */

        @media (prefers-color-scheme: dark) {
            .highlight:not(.idl) {
                background: rgba(255, 255, 255, .05);
            }

            c-[a] {
                color: #d33682
            }

            /* Keyword.Declaration */
            c-[b] {
                color: #d33682
            }

            /* Keyword.Type */
            c-[c] {
                color: #2aa198
            }

            /* Comment */
            c-[d] {
                color: #2aa198
            }

            /* Comment.Multiline */
            c-[e] {
                color: #268bd2
            }

            /* Name.Attribute */
            c-[f] {
                color: #b58900
            }

            /* Name.Tag */
            c-[g] {
                color: #cb4b16
            }

            /* Name.Variable */
            c-[k] {
                color: #d33682
            }

            /* Keyword */
            c-[l] {
                color: #657b83
            }

            /* Literal */
            c-[m] {
                color: #657b83
            }

            /* Literal.Number */
            c-[n] {
                color: #268bd2
            }

            /* Name */
            c-[o] {
                color: #657b83
            }

            /* Operator */
            c-[p] {
                color: #657b83
            }

            /* Punctuation */
            c-[s] {
                color: #6c71c4
            }

            /* Literal.String */
            c-[t] {
                color: #6c71c4
            }

            /* Literal.String.Single */
            c-[u] {
                color: #6c71c4
            }

            /* Literal.String.Double */
            c-[ch] {
                color: #2aa198
            }

            /* Comment.Hashbang */
            c-[cp] {
                color: #2aa198
            }

            /* Comment.Preproc */
            c-[cpf] {
                color: #2aa198
            }

            /* Comment.PreprocFile */
            c-[c1] {
                color: #2aa198
            }

            /* Comment.Single */
            c-[cs] {
                color: #2aa198
            }

            /* Comment.Special */
            c-[kc] {
                color: #d33682
            }

            /* Keyword.Constant */
            c-[kn] {
                color: #d33682
            }

            /* Keyword.Namespace */
            c-[kp] {
                color: #d33682
            }

            /* Keyword.Pseudo */
            c-[kr] {
                color: #d33682
            }

            /* Keyword.Reserved */
            c-[ld] {
                color: #657b83
            }

            /* Literal.Date */
            c-[nc] {
                color: #268bd2
            }

            /* Name.Class */
            c-[no] {
                color: #268bd2
            }

            /* Name.Constant */
            c-[nd] {
                color: #268bd2
            }

            /* Name.Decorator */
            c-[ni] {
                color: #268bd2
            }

            /* Name.Entity */
            c-[ne] {
                color: #268bd2
            }

            /* Name.Exception */
            c-[nf] {
                color: #268bd2
            }

            /* Name.Function */
            c-[nl] {
                color: #268bd2
            }

            /* Name.Label */
            c-[nn] {
                color: #268bd2
            }

            /* Name.Namespace */
            c-[py] {
                color: #268bd2
            }

            /* Name.Property */
            c-[ow] {
                color: #657b83
            }

            /* Operator.Word */
            c-[mb] {
                color: #657b83
            }

            /* Literal.Number.Bin */
            c-[mf] {
                color: #657b83
            }

            /* Literal.Number.Float */
            c-[mh] {
                color: #657b83
            }

            /* Literal.Number.Hex */
            c-[mi] {
                color: #657b83
            }

            /* Literal.Number.Integer */
            c-[mo] {
                color: #657b83
            }

            /* Literal.Number.Oct */
            c-[sa] {
                color: #6c71c4
            }

            /* Literal.String.Affix */
            c-[sb] {
                color: #6c71c4
            }

            /* Literal.String.Backtick */
            c-[sc] {
                color: #6c71c4
            }

            /* Literal.String.Char */
            c-[dl] {
                color: #6c71c4
            }

            /* Literal.String.Delimiter */
            c-[sd] {
                color: #6c71c4
            }

            /* Literal.String.Doc */
            c-[se] {
                color: #6c71c4
            }

            /* Literal.String.Escape */
            c-[sh] {
                color: #6c71c4
            }

            /* Literal.String.Heredoc */
            c-[si] {
                color: #6c71c4
            }

            /* Literal.String.Interpol */
            c-[sx] {
                color: #6c71c4
            }

            /* Literal.String.Other */
            c-[sr] {
                color: #6c71c4
            }

            /* Literal.String.Regex */
            c-[ss] {
                color: #6c71c4
            }

            /* Literal.String.Symbol */
            c-[fm] {
                color: #268bd2
            }

            /* Name.Function.Magic */
            c-[vc] {
                color: #cb4b16
            }

            /* Name.Variable.Class */
            c-[vg] {
                color: #cb4b16
            }

            /* Name.Variable.Global */
            c-[vi] {
                color: #cb4b16
            }

            /* Name.Variable.Instance */
            c-[vm] {
                color: #cb4b16
            }

            /* Name.Variable.Magic */
            c-[il] {
                color: #657b83
            }

            /* Literal.Number.Integer.Long */
        }
    </style>
    <style>
        /* Boilerplate: style-wpt */
        :root {
            --wpt-border: hsl(0, 0%, 60%);
            --wpt-bg: hsl(0, 0%, 95%);
            --wpt-text: var(--text);
            --wptheading-text: hsl(0, 0%, 30%);
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --wpt-border: hsl(0, 0%, 30%);
                --wpt-bg: var(--borderedblock-bg);
                --wpt-text: var(--text);
                --wptheading-text: hsl(0, 0%, 60%);
            }
        }

        .wpt-tests-block {
            list-style: none;
            border-left: .5em solid var(--wpt-border);
            background: var(--wpt-bg);
            color: var(--wpt-text);
            margin: 1em auto;
            padding: .5em;
        }

        .wpt-tests-block summary {
            color: var(--wptheading-text);
            font-weight: normal;
            text-transform: uppercase;
        }

        .wpt-tests-block summary::marker {
            color: var(--wpt-border);
        }

        .wpt-tests-block summary:hover::marker {
            color: var(--wpt-text);
        }

        /*
   The only content  of a wpt test block in its closed state is the <summary>,
   which contains the word TESTS,
   and that is absolutely positioned.
   In that closed state, wpt test blocks are styled
   to have a top margin whose height is exactly equal
   to the height of the absolutely positioned <summary>,
   and no other background/padding/margin/border.
   The wpt test block elements will therefore allow the maring
   of the previous/next block elements
   to collapse through them;
   if this combined margin would be larger than its own top margin,
   it stays as is,
   and therefore the pre-existing vertical rhythm of the document is undisturbed.
   If that combined margin would be smaller, it is grown to that size.
   This means that the wpt test block ensures
   that there's always enough vertical space to insert the summary,
   without adding more than is needed.
*/
        .wpt-tests-block:not([open]) {
            padding: 0;
            border: none;
            background: none;
            font-size: 0.75em;
            line-height: 1;
            position: relative;
            margin: 1em 0 0;
        }

        .wpt-tests-block:not([open]) summary {
            position: absolute;
            right: 0;
            bottom: 0;
        }

        /*
   It is possible that both the last child of a block element
   and the block element itself
   would be annotated with a <wpt> block each.
   If the block element has a padding or a border,
   that's fine, but otherwise
   the bottom margin of the block and of its last child would collapse
   and both <wpt> elements would overlap, being both placed there.
   To avoid that, add 1px of padding to the <wpt> element annotating the last child
   to prevent the bottom margin of the block and of its last child from collapsing
   (and as much negative margin,
   as wel only want to prevent margin collapsing,
   but are not trying to actually take more space).
*/
        .wpt-tests-block:not([open]):last-child {
            padding-bottom: 1px;
            margin-bottom: -1px;
        }

        /*
   Exception to the previous rule:
   don't do that in non-last list items,
   because it's not necessary,
   and would therefore consume more space than strictly needed.
   Lists must have list items as children, not <wpt> elements,
   so a <wpt> element cannot be a sibling of a list item,
   and the collision that the previous rule avoids cannot happen.
*/
        li:not(:last-child)>.wpt-tests-block:not([open]):last-child,
        dd:not(:last-child)>.wpt-tests-block:not([open]):last-child {
            padding-bottom: 0;
            margin-bottom: 0;
        }

        .wpt-tests-block:not([open]):not(:hover) {
            opacity: 0.5;
        }

        .wpt-tests-list {
            list-style: none;
            display: grid;
            margin: 0;
            padding: 0;
            grid-template-columns: 1fr max-content auto auto;
            grid-column-gap: .5em;
        }

        .wpt-tests-block hr:last-child {
            display: none;
        }

        .wpt-test {
            display: contents;
        }

        .wpt-test>a {
            text-decoration: underline;
            border: none;
        }

        .wpt-test>.wpt-name {
            grid-column: 1;
        }

        .wpt-test>.wpt-results {
            grid-column: 2;
        }

        .wpt-test>.wpt-live {
            grid-column: 3;
        }

        .wpt-test>.wpt-source {
            grid-column: 4;
        }

        .wpt-test>.wpt-results {
            display: flex;
            gap: .1em;
        }

        .wpt-test .wpt-result {
            display: inline-block;
            height: 1em;
            width: 1em;
            border-radius: 50%;
            position: relative;
        }
    </style>
    <link href="https://www.w3.org/StyleSheets/TR/2021/W3C-CRD" rel="stylesheet">
    <link href="https://www.w3.org/StyleSheets/TR/2021/dark.css" media="(prefers-color-scheme: dark)" rel="stylesheet"
        type="text/css">

<body class="h-entry">
    <div class="head">
        <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/">
                <img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72">
            </a>
        </p>
        <h1 class="no-ref p-name" id="title">安全付款确认</h1>
        <p id="w3c-state"><a href="https://www.w3.org/standards/types/#CRD">W3C 候选推荐草案</a>,
            <time class="dt-updated" datetime="2025-12-09">2025年12月9日</time>
        </p>
        <details open>
            <summary>关于本文档的更多详情</summary>
            <div data-fill-with="spec-metadata">
                <dl>
                    <dt>本版本：
                    <dd><a class="u-url"
                            href="https://www.w3.org/TR/2025/CRD-secure-payment-confirmation-20251209/">https://www.w3.org/TR/2025/CRD-secure-payment-confirmation-20251209/</a>
                    <dt>最新发布版本：
                    <dd><a
                            href="https://www.w3.org/TR/secure-payment-confirmation/">https://www.w3.org/TR/secure-payment-confirmation/</a>
                    <dt>编辑草稿：
                    <dd><a
                            href="https://w3c.github.io/secure-payment-confirmation/">https://w3c.github.io/secure-payment-confirmation/</a>
                    <dt>历史版本：
                    <dd><a href="https://www.w3.org/TR/2025/CRD-secure-payment-confirmation-20250814/"
                            rel="prev">https://www.w3.org/TR/2025/CRD-secure-payment-confirmation-20250814/</a>
                    <dt>历史记录：
                    <dd><a class="u-url"
                            href="https://www.w3.org/standards/history/secure-payment-confirmation/">https://www.w3.org/standards/history/secure-payment-confirmation/</a>
                    <dt>实现报告：
                    <dd><a
                            href="https://wpt.fyi/results/secure-payment-confirmation">https://wpt.fyi/results/secure-payment-confirmation</a>
                    <dt>反馈：
                    <dd><a href="https://github.com/w3c/secure-payment-confirmation/issues/">GitHub</a>
                    <dd><a href="#issues-index">规范内反馈</a>
                    <dt class="editor">编辑：
                    <dd class="editor h-card p-author vcard" data-editor-id="96463"><a class="email fn p-name u-email"
                            href="mailto:smcgruer@chromium.org">Stephen McGruer</a> (<a class="org p-org"
                            href="https://www.google.com/">谷歌</a>)
                    <dt class="editor">前编辑：
                    <dd class="editor h-card p-author vcard" data-editor-id="83784"><a class="email fn p-name u-email"
                            href="mailto:rouslan@chromium.org">Rouslan Solomakhin</a> (<a class="org p-org"
                            href="https://www.google.com/">谷歌</a>)
                    <dt>贡献者：
                    <dd><a href="mailto:ij@w3.org">Ian Jacobs</a> (<a href="https://w3.org">W3C</a>)
                    <dd><a href="mailto:nburris@chromium.org">Nick Burris</a> (<a href="https://www.google.com">谷歌</a>)
                    <dt>测试套件：
                    <dd class="wpt-overview"><a
                            href="https://wpt.fyi/results/secure-payment-confirmation/">https://wpt.fyi/results/secure-payment-confirmation/</a>
                </dl>
            </div>
        </details>
        <div data-fill-with="warning"></div>
        <p class="copyright" data-fill-with="copyright"><a href="https://www.w3.org/policies/#copyright">Copyright</a> ©
            2025 <a href="https://www.w3.org/">World Wide Web Consortium</a>. <abbr
                title="World Wide Web Consortium">W3C</abbr><sup>®</sup> <a
                href="https://www.w3.org/policies/#Legal_Disclaimer">liability</a>, <a
                href="https://www.w3.org/policies/#W3C_Trademarks">trademark</a> and <a
                href="https://www.w3.org/copyright/software-license/" rel="license"
                title="W3C Software and Document License">permissive document license</a> rules apply.
        </p>
        <hr title="Separator for header">
    </div>
    <div class="p-summary" data-fill-with="abstract">
        <h2 class="heading no-num no-ref no-toc settled" id="abstract"><span class="content">摘要</span></h2>
        <p>安全付款确认 (SPC) 是一种网页 API，旨在支持在支付交易中简化认证流程。它设计用于跨商家扩展认证，适用于多种认证协议，并能生成用户已确认交易详情的加密凭证。</p>
    </div>
    <h2 class="heading no-num no-ref no-toc settled" id="sotd"><span class="content">本文档状态</span></h2>
    <div data-fill-with="status">
        <p><em>本节描述了本文档在发布时的状态。当前 W3C 出版物和本技术报告最新版本请参见 <a href="https://www.w3.org/TR/">W3C 标准与草案索引</a>。</em></p>
        <p>
            本文档由 <a href="https://www.w3.org/groups/wg/payments">Web 支付工作组</a> 按照 <a
                href="https://www.w3.org/policies/process/20250818/#recs-and-notes">推荐流程</a> 发布为候选推荐草案。
        </p>
        <p>自上一个候选推荐快照以来的变更，请参阅 <a href="https://github.com/w3c/secure-payment-confirmation/compare/CR...main">GitHub
                变更日志</a>。</p>
        <p>
            作为候选推荐发布并不意味着 W3C 及其成员的认可。候选推荐草案整合了工作组计划在后续候选推荐快照中包含的前一版本变更。
        </p>
        <p>
            这是草稿文档，可能随时被更新、替换或废止。引用本文档为正式资料不适宜，仅作为正在进行的工作。
        </p>
        <p>要使本规范晋升为提案推荐，我们必须展示在用户代理中有两个独立、可互操作的实现；详见相关 <a
                href="https://wpt.fyi/results/secure-payment-confirmation/">实现报告</a>。</p>
        <p>该候选推荐预计不早于2023年8月1日晋升为提案推荐。</p>
        <p>
            Web 支付工作组维护一个 <a href="https://github.com/w3c/secure-payment-confirmation/issues">问题列表</a>。
        </p>
        <p>作为候选推荐发布并不意味着 W3C 及其成员的认可。候选推荐草案整合了工作组计划在后续候选推荐快照中包含的前一版本变更。</p>
        <p>本文档由依照 <a href="https://www.w3.org/policies/patent-policy/">W3C 专利政策</a> 运作的团体制作。W3C 公布了该团体相关的 <a
                href="https://www.w3.org/groups/wg/payments/ipr"
                rel="disclosure">专利披露公开列表</a>；该页面还包含专利披露说明。任何个人实际知晓某专利且认为其包含<a
                href="https://www.w3.org/policies/patent-policy/#def-essential">必要权利要求</a>，须按<a
                href="https://www.w3.org/policies/patent-policy/#sec-Disclosure">W3C 专利政策第6条</a>披露相关信息。
        </p>
        <p>本文档受 <a href="https://www.w3.org/policies/process/20250818/" id="w3c_process_revision">2025年8月18日 W3C
                流程文件</a> 管辖。</p>
        <p></p>
    </div>
    <div data-fill-with="at-risk"></div>
    <nav data-fill-with="table-of-contents" id="toc">
        <h2 class="no-num no-ref no-toc" id="contents">目录</h2>
        <ol class="toc">
            <li>
                <a href="#sctn-intro"><span class="secno">1</span> <span class="content">简介</span></a>
                <ol class="toc">
                    <li>
                        <a href="#sctn-use-cases"><span class="secno">1.1</span> <span class="content">使用场景</span></a>
                        <ol class="toc">
                            <li><a href="#sctn-use-case-verifying-payment"><span class="secno">1.1.1</span> <span
                                        class="content">交易确认的密码学证据</span></a>
                            <li><a href="#sctn-use-case-merchant-authentication"><span class="secno">1.1.2</span> <span
                                        class="content">商户对认证的控制</span></a>
                            <li><a href="#sctn-use-case-device-binding"><span class="secno">1.1.3</span> <span
                                        class="content">设备绑定的密码学证据</span></a>
                        </ol>
                    <li>
                        <a href="#sctn-sample-scenarios"><span class="secno">1.2</span> <span class="content">API
                                示例使用场景</span></a>
                        <ol class="toc">
                            <li><a href="#sctn-sample-registration"><span class="secno">1.2.1</span> <span
                                        class="content">结账过程中的注册</span></a>
                            <li><a href="#sctn-sample-authentication"><span class="secno">1.2.2</span> <span
                                        class="content">商家网站认证</span></a>
                        </ol>
                </ol>
            <li><a href="#sctn-terminology"><span class="secno">2</span> <span class="content">术语</span></a>
            <li><a href="#sctn-registration"><span class="secno">3</span> <span class="content">注册</span></a>
            <li>
                <a href="#sctn-authentication"><span class="secno">4</span> <span class="content">认证 -
                        安全支付确认支付方式</span></a>
                <ol class="toc">
                    <li><a href="#sctn-registration-in-payment-method-id"><span class="secno">4.1</span> <span
                                class="content">在 <span title="Payment Method Identifiers">[payment-method-id]</span>
                                注册</span></a>
                    <li><a href="#sctn-modify-payment-request-constructor"><span class="secno">4.2</span> <span
                                class="content">修改 Payment Request 构造函数</span></a>
                    <li><a href="#sctn-modify-user-activation-requirement"><span class="secno">4.3</span> <span
                                class="content">修改用户激活要求</span></a>
                    <li><a href="#sctn-securepaymentconfirmationrequest-dictionary"><span class="secno">4.4</span> <span
                                class="content"><span><code>SecurePaymentConfirmationRequest</code></span>
                                字典</span></a>
                    <li><a href="#sctn-payment-method-additional-data-type"><span class="secno">4.5</span> <span
                                class="content">支付方式附加数据类型</span></a>
                    <li><a href="#sctn-secure-payment-confirmation-available-api"><span class="secno">4.6</span> <span
                                class="content">检查安全支付确认是否可用</span></a>
                    <li><a href="#sctn-steps-to-validate-payment-method-data"><span class="secno">4.7</span> <span
                                class="content">验证支付方式数据的步骤</span></a>
                    <li><a href="#sctn-steps-to-check-if-a-payment-can-be-made"><span class="secno">4.8</span> <span
                                class="content">检查能否进行支付的步骤</span></a>
                    <li>
                        <a href="#sctn-transaction-confirmation-ux"><span class="secno">4.9</span> <span
                                class="content">显示交易确认界面</span></a>
                        <ol class="toc">
                            <li><a href="#sctn-information-presented"><span class="secno">4.9.1</span> <span
                                        class="content">向用户展示的信息</span></a>
                            <li><a href="#sctn-transaction-confirmation-outcome"><span class="secno">4.9.2</span> <span
                                        class="content">交易确认界面结果</span></a>
                            <li><a href="#sctn-transaction-ux-test-automation"><span class="secno">4.9.3</span> <span
                                        class="content">测试自动化支持</span></a>
                        </ol>
                    <li><a href="#sctn-steps-to-respond-to-a-payment-request"><span class="secno">4.10</span> <span
                                class="content">响应支付请求的步骤</span></a>
                </ol>
            <li>
                <a href="#sctn-payment-extension-registration"><span class="secno">5</span> <span
                        class="content">WebAuthn 扩展——"<code>payment</code>"</span></a>
                <ol class="toc">
                    <li><a href="#sctn-collectedclientpaymentdata-dictionary"><span class="secno">5.1</span> <span
                                class="content"><span><code>CollectedClientPaymentData</code></span>
                                字典</span></a>
                    <li><a href="#sctn-collectedclientadditionalpaymentdata-dictionary"><span class="secno">5.2</span>
                            <span class="content"><span><code>CollectedClientAdditionalPaymentData</code></span>
                                字典</span></a>
                    <li><a href="#sctn-collectedclientadditionalpaymentregistrationdata-dictionary"><span
                                class="secno">5.3</span> <span
                                class="content"><span><code>CollectedClientAdditionalPaymentRegistrationData</code></span>
                                字典</span></a>
                </ol>
            <li>
                <a href="#sctn-browser-bound-key-store"><span class="secno">6</span> <span
                        class="content">浏览器绑定密钥存储</span></a>
                <ol class="toc">
                    <li><a href="#sctn-creating-a-keypair"><span class="secno">6.1</span> <span
                                class="content">创建密钥对</span></a>
                    <li><a href="#sctn-binding-a-keypair"><span class="secno">6.2</span> <span
                                class="content">绑定密钥对</span></a>
                    <li><a href="#sctn-retrieving-a-browser-bound-key"><span class="secno">6.3</span> <span
                                class="content">检索密钥对</span></a>
                    <li><a href="#sctn-getting-the-bbk-public-key"><span class="secno">6.4</span> <span
                                class="content">获取浏览器绑定公钥</span></a>
                    <li><a href="#sctn-signing-client-data"><span class="secno">6.5</span> <span
                                class="content">客户端数据签名</span></a>
                </ol>
            <li>
                <a href="#sctn-common-data-structures"><span class="secno">7</span> <span
                        class="content">公共数据结构</span></a>
                <ol class="toc">
                    <li><a href="#sctn-paymentcredentialinstrument-dictionary"><span class="secno">7.1</span> <span
                                class="content"><span><code>PaymentCredentialInstrument</code></span>
                                字典</span></a>
                    <li><a href="#sctn-paymententitylogo-dictionary"><span class="secno">7.2</span> <span
                                class="content"><span><code>PaymentEntityLogo</code></span> 字典</span></a>
                </ol>
            <li><a href="#sctn-permissions-policy"><span class="secno">8</span> <span class="content">权限策略集成</span></a>
            <li>
                <a href="#sctn-relying-party-operations"><span class="secno">9</span> <span class="content">SPC
                        依赖方操作</span></a>
                <ol class="toc">
                    <li><a href="#sctn-verifying-assertion"><span class="secno">9.1</span> <span
                                class="content">验证认证断言</span></a>
                </ol>
            <li>
                <a href="#sctn-automation"><span class="secno">10</span> <span class="content">用户代理自动化</span></a>
                <ol class="toc">
                    <li><a href="#sctn-automation-set-spc-transaction-mode"><span class="secno">10.1</span> <span
                                class="content"><span>设置 SPC 交易模式</span></span></a>
                </ol>
            <li>
                <a href="#sctn-security-considerations"><span class="secno">11</span> <span
                        class="content">安全注意事项</span></a>
                <ol class="toc">
                    <li>
                        <a href="#sctn-security-cross-origin-auth"><span class="secno">11.1</span> <span
                                class="content">跨源认证流程</span></a>
                        <ol class="toc">
                            <li><a href="#sctn-security-login-attack"><span class="secno">11.1.1</span> <span
                                        class="content">登录攻击</span></a>
                            <li><a href="#sctn-security-payment-attack"><span class="secno">11.1.2</span> <span
                                        class="content">支付攻击</span></a>
                        </ol>
                    <li><a href="#sctn-security-merchant-data"><span class="secno">11.2</span> <span
                                class="content">商家提供的认证数据</span></a>
                    <li><a href="#sctn-security-attacker-generated-bbk"><span class="secno">11.3</span> <span
                                class="content">攻击者生成的<span>浏览器绑定密钥</span></span></a>
                    <li><a href="#sctn-security-user-activation-requirement"><span class="secno">11.4</span> <span
                                class="content">缺少用户激活要求</span></a>
                </ol>
            <li>
                <a href="#sctn-privacy-considerations"><span class="secno">12</span> <span
                        class="content">隐私考虑</span></a>
                <ol class="toc">
                    <li><a href="#sctn-privacy-probing-credential-ids"><span class="secno">12.1</span> <span
                                class="content">探测凭证id</span></a>
                    <li><a href="#sctn-privacy-joining-payment-instruments"><span class="secno">12.2</span> <span
                                class="content">关联不同的支付工具</span></a>
                    <li><a href="#sctn-privacy-credential-id-tracking-vector"><span class="secno">12.3</span> <span
                                class="content">凭证 ID 作为追踪向量</span></a>
                    <li><a href="#sctn-privacy-browser-bound-key-tracking-vector"><span class="secno">12.4</span> <span
                                class="content">浏览器绑定密钥作为追踪向量</span></a>
                    <li><a href="#sctn-fingerprinting-via-is-secure-payment-confirmation-available"><span
                                class="secno">12.5</span> <span class="content">通过 securePaymentConfirmationAvailability
                                导致的指纹识别</span></a>
                    <li><a href="#sctn-user-opt-out"><span class="secno">12.6</span> <span
                                class="content">用户选择退出</span></a>
                </ol>
            <li><a href="#sctn-accessibility-considerations"><span class="secno">13</span> <span
                        class="content">无障碍考虑</span></a>
            <li><a href="#sctn-i18n-considerations"><span class="secno">14</span> <span class="content">国际化考虑</span></a>
            <li><a href="#sctn-iana-considerations"><span class="secno">15</span> <span class="content">IANA
                        考量</span></a>
            <li>
                <a href="#w3c-conformance"><span class="secno"></span> <span class="content">一致性</span></a>
                <ol class="toc">
                    <li><a href="#w3c-conventions"><span class="secno"></span> <span class="content">文档约定</span></a>
                    <li><a href="#w3c-conformant-algorithms"><span class="secno"></span> <span
                                class="content">一致性算法</span></a>
                </ol>
            <li>
                <a href="#index"><span class="secno"></span> <span class="content">索引</span></a>
                <ol class="toc">
                    <li><a href="#index-defined-here"><span class="secno"></span> <span
                                class="content">本规范定义的术语</span></a>
                    <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span
                                class="content">引用中定义的术语</span></a>
                </ol>
            <li>
                <a href="#references"><span class="secno"></span> <span class="content">参考文献</span></a>
                <ol class="toc">
                    <li><a href="#normative"><span class="secno"></span> <span class="content">规范性引用</span></a>
                    <li><a href="#informative"><span class="secno"></span> <span class="content">非规范性引用</span></a>
                </ol>
            <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL 索引</span></a>
            <li><a href="#issues-index"><span class="secno"></span> <span class="content">问题索引</span></a>
        </ol>
    </nav>
    <main>
        <div class="non-normative">
            <h2 class="heading settled" data-level="1" id="sctn-intro"><span class="secno">1. </span><span
                    class="content">简介</span><a class="self-link" href="#sctn-intro"></a></h2>
            <p><em>本章节及其子章节为非规范性内容。</em></p>
            <p>本规范定义了一个 API，使得在网页支付流程中能够使用强认证方法，并致力于提供与 <a data-link-type="biblio" href="#biblio-webauthn-3"
                    title="Web Authentication: An API for accessing Public Key Credentials - Level 3">[webauthn-3]</a>
                相同的认证优势和用户隐私保护，同时增强以满足支付处理的需求。</p>
            <p>与 <a data-link-type="biblio" href="#biblio-webauthn-3"
                    title="Web Authentication: An API for accessing Public Key Credentials - Level 3">[webauthn-3]</a>
                类似，本规范定义了两个涉及用户的相关流程。第一个流程是 <a href="#sctn-registration">§ 3 注册</a>（原称“注册登记”），用于在用户与 <a
                    data-link-type="dfn" href="https://w3c.github.io/webauthn/#relying-party"
                    id="ref-for-relying-party">依赖方</a>之间建立关系。第二个流程是 <a href="#sctn-authentication">§ 4 认证 -
                    安全支付确认支付方式</a>，当用户响应来自 <a data-link-type="dfn" href="https://w3c.github.io/webauthn/#relying-party"
                    id="ref-for-relying-party①">依赖方</a>（可能通过中介支付服务商）的挑战时，同意完成指定支付。</p>
            <p>本规范的目标之一是在结账过程中减少认证阻力，其中一方面是为指定注册尽可能多地提升用户可认证次数。即获得 <a data-link-type="dfn"
                    href="https://w3c.github.io/webauthn/#relying-party"
                    id="ref-for-relying-party②">依赖方</a>同意后，理想情况下用户可以“一次注册”，便可在任意商户来源（及支付服务商）完成认证，而不仅限于首次注册的商户来源。</p>
            <p>因此，安全支付确认（SPC）的重要特性之一在于商户（或其他实体）可代表 <a data-link-type="dfn"
                    href="https://w3c.github.io/webauthn/#relying-party" id="ref-for-relying-party③">依赖方</a>发起认证流程。<a
                    data-link-type="dfn" href="https://w3c.github.io/webauthn/#relying-party"
                    id="ref-for-relying-party④">依赖方</a>需在凭证创建期间主动选择允许此行为。</p>
            <p>功能上，本规范为 <code
                    class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#dom-paymentrequest" id="ref-for-dom-paymentrequest">PaymentRequest</a></code>
                API 定义了新的 <a data-link-type="dfn" href="https://w3c.github.io/payment-request/#dfn-payment-method"
                    id="ref-for-dfn-payment-method">支付方式</a>，并新增 <a data-link-type="dfn"
                    href="https://w3c.github.io/webauthn/#webauthn-extensions" id="ref-for-webauthn-extensions">WebAuthn
                    扩展</a>，以扩展 <a data-link-type="biblio" href="#biblio-webauthn-3"
                    title="Web Authentication: An API for accessing Public Key Credentials - Level 3">[webauthn-3]</a>，支持针对支付的数据结构、设备绑定，并放宽调用
                API 的场景假设，便于在支付环境下使用。
            </p>
            <h3 class="heading settled" data-level="1.1" id="sctn-use-cases"><span class="secno">1.1. </span><span
                    class="content">应用场景</span><a class="self-link" href="#sctn-use-cases"></a></h3>
            <p>虽然 <a data-link-type="biblio" href="#biblio-webauthn-3"
                    title="Web Authentication: An API for accessing Public Key Credentials - Level 3">[webauthn-3]</a> 为
                Web 提供了通用认证功能，但以下用例展示了本规范定义的针对支付扩展的作用。</p>
            <p>我们假定利用密码学认证进行在线交易等一般性场景已广泛应用。</p>
            <h4 class="heading settled" data-level="1.1.1" id="sctn-use-case-verifying-payment"><span
                    class="secno">1.1.1. </span><span class="content">交易确认的密码学证据</span><a class="self-link"
                    href="#sctn-use-case-verifying-payment"></a></h4>
            <p>在许多线上支付系统，发行支付工具的主体（例如银行）会通过认证来降低欺诈。<a data-link-type="biblio" href="#biblio-webauthn-3"
                    title="Web Authentication: An API for accessing Public Key Credentials - Level 3">[webauthn-3]</a>
                及本规范使得使用认证器对重要的支付信息进行密码学签名变为可能，比如商户来源、交易金额和币种。作为 <a data-link-type="dfn"
                    href="https://w3c.github.io/webauthn/#relying-party"
                    id="ref-for-relying-party⑤">依赖方</a>的银行可在授权时验证签名的支付信息。</p>
            <p>如果银行仅使用 <a data-link-type="biblio" href="#biblio-webauthn-3"
                    title="Web Authentication: An API for accessing Public Key Credentials - Level 3">[webauthn-3]</a>，则需在
                WebAuthn 的 <code
                    class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialrequestoptions-challenge" id="ref-for-dom-publickeycredentialrequestoptions-challenge">challenge</a></code>
                字段中存储待验证的支付信息。这会带来以下问题：</p>
            <ol>
                <li data-md>
                    <p>这是对 <code>challenge</code> 字段的误用（其原本用于防止重放攻击）。</p>
                <li data-md>
                    <p>没有相关的规范，每家银行都需自行设计支付信息在 challenge 中的格式及编码方式，增加部署难度并加剧割裂。</p>
                <li data-md>
                    <p>某些监管要求必须证明用户确实已看见并同意该支付信息。单用 <a data-link-type="biblio" href="#biblio-webauthn-3"
                            title="Web Authentication: An API for accessing Public Key Credentials - Level 3">[webauthn-3]</a>
                        不提供此类展示：challenge 字段内信息无任何规范的用户体验指引。</p>
            </ol>
            <p>上述局限促成了以下安全支付确认（SPC）行为：</p>
            <ol>
                <li data-md>
                    <p>challenge 字段仅用于防止重放攻击，与普通 <a data-link-type="biblio" href="#biblio-webauthn-3"
                            title="Web Authentication: An API for accessing Public Key Credentials - Level 3">[webauthn-3]</a>
                        相同。</p>
                <li data-md>
                    <p>SPC 对支付信息指定了统一格式，有助于通用验证代码和测试套件开发。</p>
                <li data-md>
                    <p>SPC 保证用户代理以网站（或恶意注入 JS 代码）无法绕过的方式向用户展示支付信息。</p>
                    <ul>
                        <li data-md>
                            <p>支付信息会包含在 <code
                                    class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dictdef-collectedclientdata" id="ref-for-dictdef-collectedclientdata">CollectedClientData</a></code>
                                字典中，无法被 JavaScript 篡改。
                            </p>
                    </ul>
                    <p class="note" role="note"><span class="marker">注意：</span>当下支付生态中的银行等主体通过 TLS、iframe 等 Web
                        功能足以信任浏览器环境下的支付。目前规范旨在进一步提升 Web 支付的安全性与易用性。</p>
            </ol>
            <h4 class="heading settled" data-level="1.1.2" id="sctn-use-case-merchant-authentication"><span
                    class="secno">1.1.2. </span><span class="content">商户对认证的控制</span><a class="self-link"
                    href="#sctn-use-case-merchant-authentication"></a></h4>
            <p>商户希望减少结账过程中的用户流失，尤其是降低认证阻力。<a data-link-type="dfn" href="https://w3c.github.io/webauthn/#relying-party"
                    id="ref-for-relying-party⑥">依赖方</a>（如银行）一般使用 <a data-link-type="biblio" href="#biblio-webauthn-3"
                    title="Web Authentication: An API for accessing Public Key Credentials - Level 3">[webauthn-3]</a>
                进行用户认证时，通常是在 iframe 内完成。但商户更希望主导用户认证过程体验，同时也能让 <a data-link-type="dfn"
                    href="https://w3c.github.io/webauthn/#relying-party" id="ref-for-relying-party⑦">依赖方</a>验证认证结果。</p>
            <p>此类局限推动了安全支付确认（SPC）下的新行为：</p>
            <ul>
                <li data-md>
                    <p>通过 SPC，除 <a data-link-type="dfn" href="https://w3c.github.io/webauthn/#relying-party"
                            id="ref-for-relying-party⑧">依赖方</a> 外的其他方也可以代表依赖方使用认证凭证进行认证，依赖方随后可验证认证结果。</p>
            </ul>
            <p>上述特性带来的额外好处是依赖方自身不必再开发认证前端体验，支付服务商可能会为商户开发此类体验。</p>
            <p class="note" role="note"><span class="marker">注意：</span>希望自定义认证体验的依赖方仍可在 iframe 中用 SPC 完成。</p>
            <h4 class="heading settled" data-level="1.1.3" id="sctn-use-case-device-binding"><span class="secno">1.1.3.
                </span><span class="content">设备绑定的密码学证据</span><a class="self-link"
                    href="#sctn-use-case-device-binding"></a></h4>
            <p>在支付行业，设备持有信号是重要的二要素。WebAuthn 支持同步密钥，单一凭证可跨多设备使用（参见 <a
                    href="https://www.w3.org/TR/webauthn-3/#sctn-usecase-consumer-mdc"><cite>Web Authentication</cite>
                    § 1.2.1 消费者多设备凭证</a>）。虽然同步提升了登录体验，有声音担忧仅靠同步密钥不能满足某些监管环境下“设备持有”要求。</p>
            <p>上述担忧推动本规范引入用户代理生成的辅助 <a data-link-type="dfn" href="#key-pair"
                    id="ref-for-key-pair">公私钥对</a>，私钥仅保存在一个设备内且仅由该设备使用。此类密钥及其在 SPC 中的应用称为 <a data-link-type="dfn"
                    href="#browser-bound-key" id="ref-for-browser-bound-key">浏览器绑定密钥</a>。</p>
            <h3 class="heading settled" data-level="1.2" id="sctn-sample-scenarios"><span class="secno">1.2.
                </span><span class="content">API 示例使用场景</span><a class="self-link" href="#sctn-sample-scenarios"></a>
            </h3>
            <p>本节举例介绍安全支付确认常见场景及 API 使用代码，实际应用不限于以下流程。</p>
            <h4 class="heading settled" data-level="1.2.1" id="sctn-sample-registration"><span class="secno">1.2.1.
                </span><span class="content">结账过程中的注册</span><a class="self-link" href="#sctn-sample-registration"></a>
            </h4>
            <p>这是首次流程，用户在某商户结账时，发卡银行会新建并存储一个凭证。</p>
            <ol>
                <li data-md>
                    <p>用户访问 <code>merchant.example</code>，选购商品后进入结账流程，录入支付工具信息，并确认付款（例如点击“支付”按钮）。</p>
                <li data-md>
                    <p>商户与发卡银行进行带外通信（例如使用其他协议）。发卡银行请求用户验证，并提供银行控制的 URL 供商户在 iframe 内打开。</p>
                <li data-md>
                    <p>商户在 <code>bank.example</code> 打开一个带 <code>allow</code> 属性值为 "<a data-link-type="dfn"
                            href="https://www.w3.org/TR/webauthn-3/#publickey-credentials-create-feature"
                            id="ref-for-publickey-credentials-create-feature">publickey-credentials-create</a>" 的
                        iframe。</p>
                <li data-md>
                    <p>iframe 内，发卡银行通过传统方式（如短信验证码）确认用户身份，随后邀请用户注册 SPC 认证以便未来支付。</p>
                <li data-md>
                    <p>用户同意（例如点击银行界面的“注册”按钮），银行在 iframe 内运行如下代码。</p>
                <li data-md>
                    <p>用户进行 WebAuthn 注册流程，新凭证创建后返回给银行，银行服务端与用户和支付工具关联存储。</p>
                <li data-md>
                    <p>验证流程完成后银行 iframe 关闭，商户继续完成用户结账流程。</p>
            </ol>
            <p>如下为用户注册代码样例：</p>
            <pre class="example highlight" id="registration-example"><a class="self-link" href="#registration-example"></a><c- k>if</c-> <c- p>(</c-><c- o>!</c->window<c- p>.</c->PublicKeyCredential<c- p>)</c-> <c- p>{</c-> <c- d>/* 客户端不支持。请处理错误。 */</c-> <c- p>}</c->

<c- a>const</c-> publicKey <c- o>=</c-> <c- p>{</c->
  <c- c1>// challenge 由银行服务端创建并发送到 iframe。</c->
  challenge<c- o>:</c-> <c- ow>new</c-> Uint8Array<c- p>([</c-><c- mf>21</c-><c- p>,</c-><c- mf>31</c-><c- p>,</c-><c- mf>105</c-> <c- d>/* 服务器生成的另外 29 个随机字节 */</c-><c- p>]),</c->

  <c- c1>// 依赖方：</c->
  rp<c- o>:</c-> <c- p>{</c->
    name<c- o>:</c-> <c- u>"Fancy Bank"</c-><c- p>,</c->
  <c- p>},</c->

  <c- c1>// 用户：</c->
  user<c- o>:</c-> <c- p>{</c->
    <c- c1>// WebAuthn要求。本信息非SPC必须，但银行服务端可用于识别用户。</c->
    <c- c1>// 同一用户如信息不一致则可能创建多个凭证，影响凭证选择体验。</c->
    id<c- o>:</c-> Uint8Array<c- p>.</c-><c- kr>from</c-><c- p>(</c->window<c- p>.</c->atob<c- p>(</c-><c- u>"MIIBkzCCATigAwIBAjCCAZMwggE4oAMCAQIwggGTMII="</c-><c- p>),</c-> c<c- p>=></c->c<c- p>.</c->charCodeAt<c- p>(</c-><c- mf>0</c-><c- p>)),</c->
    name<c- o>:</c-> <c- u>"jane.doe@email.example"</c-><c- p>,</c->
    displayName<c- o>:</c-> <c- u>"Jane Doe"</c-><c- p>,</c->
  <c- p>},</c->

  <c- c1>// 本例依赖方接受 ES256 或 RS256 凭证，但更偏好 ES256。</c->
  pubKeyCredParams<c- o>:</c-> <c- p>[</c->
    <c- p>{</c->
      type<c- o>:</c-> <c- u>"public-key"</c-><c- p>,</c->
      alg<c- o>:</c-> <c- o>-</c-><c- mf>7</c-> <c- c1>// "ES256"</c->
    <c- p>},</c->
    <c- p>{</c->
      type<c- o>:</c-> <c- u>"public-key"</c-><c- p>,</c->
      alg<c- o>:</c-> <c- o>-</c-><c- mf>257</c-> <c- c1>// "RS256"</c->
    <c- p>}</c->
  <c- p>],</c->

  authenticatorSelection<c- o>:</c-> <c- p>{</c->
    userVerification<c- o>:</c-> <c- u>"required"</c-><c- p>,</c->
    residentKey<c- o>:</c-> <c- u>"required"</c-><c- p>,</c->
    authenticatorAttachment<c- o>:</c-> <c- u>"platform"</c-><c- p>,</c->
  <c- p>},</c->

  timeout<c- o>:</c-> <c- mf>360000</c-><c- p>,</c->  <c- c1>// 6分钟</c->

  <c- c1>// 表明这是SPC凭证。当前必须，浏览器据此关联SPC，也支持跨源iframe创建。</c->
  <c- c1>// </c->
  <c- c1>// 后续规范可能取消该扩展的必需性。</c->
  extensions<c- o>:</c-> <c- p>{</c->
    <c- u>"payment"</c-><c- o>:</c-> <c- p>{</c->
      isPayment<c- o>:</c-> <c- kc>true</c-><c- p>,</c->
      <c- c1>// 可选的算法允许列表。未指定时使用 pubKeyCredparams，默认 ES256与RS256。</c->
      <c- c1>// 本例允许ES256和RS256，偏好RS256。</c->
      browserBoundPubKeyCredParams<c- o>:</c-> <c- p>[</c->
        <c- p>{</c->
          type<c- o>:</c-> <c- u>"public-key"</c-><c- p>,</c->
          alg<c- o>:</c-> <c- o>-</c-><c- mf>257</c-> <c- c1>// "RS256"</c->
        <c- p>},</c->
        <c- p>{</c->
          type<c- o>:</c-> <c- u>"public-key"</c-><c- p>,</c->
          alg<c- o>:</c-> <c- o>-</c-><c- mf>7</c-> <c- c1>// "ES256"</c->
        <c- p>}</c->
      <c- p>]</c->
    <c- p>}</c->
  <c- p>}</c->
<c- p>};</c->

<c- c1>// 注意：以下调用会促使认证器显示界面。</c->
navigator<c- p>.</c->credentials<c- p>.</c->create<c- p>({</c-> publicKey <c- p>})</c->
  <c- p>.</c->then<c- p>(</c-><c- a>function</c-> <c- p>(</c->newCredentialInfo<c- p>)</c-> <c- p>{</c->
    <c- c1>// 将新凭证信息发送到服务器进行校验和注册。</c->
  <c- p>}).</c-><c- k>catch</c-><c- p>(</c-><c- a>function</c-> <c- p>(</c->err<c- p>)</c-> <c- p>{</c->
    <c- c1>// 未找到可用认证器或用户拒绝授权，需妥善处理。</c->
  <c- p>});</c->
</pre>
        </div>
        <h4 class="heading settled" data-level="1.2.2" id="sctn-sample-authentication"><span class="secno">1.2.2.
            </span><span class="content">商户网站认证</span><a class="self-link" href="#sctn-sample-authentication"></a></h4>
        <p>当用户已注册凭证，在进行交易且发卡银行和商户希望使用安全支付确认时，流程如下。</p>
        <ol>
            <li data-md>
                <p>用户访问 <code>merchant.example</code>，选购商品后进入结账流程，输入支付工具信息，确认付款（如点击“支付”按钮）。</p>
            <li data-md>
                <p>商户与支付工具发卡银行进行带外通信（如使用其他协议）。发卡银行请求用户验证，同时告知商户已支持 SPC，并提供调用 API 所需信息。包括挑战值和与该用户及支付工具绑定的所有凭证ID。</p>
            <li data-md>
                <p>商户运行下方示例代码。</p>
            <li data-md>
                <p>用户在 SPC 界面同意支付信息，并完成后续 WebAuthn 认证流程。签名密文返回给商户（包含 <code
                        class="idl"><a data-link-type="idl" href="#dictdef-authenticationextensionspaymentoutputs" id="ref-for-dictdef-authenticationextensionspaymentoutputs">AuthenticationExtensionsPaymentOutputs</a></code>
                    的浏览器绑定密钥输出）。
                </p>
            <li data-md>
                <p>商户将签名密文带外发送给发卡银行。银行验证密文，并确认用户有效、所显示的支付信息，以及用户已经同意本次交易。银行授权交易，商户完成结账流程。银行保存 <a data-link-type="dfn"
                        href="#browser-bound-key" id="ref-for-browser-bound-key①">浏览器绑定密钥</a>的公钥，
                    <code
                        class="idl"><a data-link-type="idl" href="#dom-collectedclientadditionalpaymentdata-browserboundpublickey" id="ref-for-dom-collectedclientadditionalpaymentdata-browserboundpublickey">browserBoundPublicKey</a></code>。
                </p>
        </ol>
        <p>如下为用户身份认证代码示例。示例代码假定支持 await/async，以便简化 promise 处理流程。</p>
        <pre class="example highlight" id="authentication-example"><a class="self-link" href="#authentication-example"></a><c- d>/* securePaymentConfirmationAvailability 表示浏览器是否支持SPC */</c->
<c- d>/* 不表示用户当前设备上是否有可用凭证。 */</c->
<c- a>const</c-> spcAvailable <c- o>=</c->
  PaymentRequest <c- o>&amp;&amp;</c->
  PaymentRequest<c- p>.</c->securePaymentConfirmationAvailability <c- o>&amp;&amp;</c->
  <c- p>(</c-><c- k>await</c-> PaymentRequest<c- p>.</c->securePaymentConfirmationAvailability<c- p>())</c-> <c- o>===</c-> <c- t>'available'</c-><c- p>;</c->
<c- k>if</c-> <c- p>(</c-><c- o>!</c->spcAvailable<c- p>)</c-> <c- p>{</c->
  <c- d>/* 浏览器不支持SPC，商户应回退到传统流程。 */</c->
<c- p>}</c->

<c- a>const</c-> request <c- o>=</c-> <c- ow>new</c-> PaymentRequest<c- p>([{</c->
  supportedMethods<c- o>:</c-> <c- u>"secure-payment-confirmation"</c-><c- p>,</c->
  data<c- o>:</c-> <c- p>{</c->
    <c- c1>// 从银行获取的凭证ID列表</c->
    credentialIds<c- p>,</c->

    rpId<c- o>:</c-> <c- u>"fancybank.example"</c-><c- p>,</c->

    <c- c1>// 挑战值也是由银行获取</c->
    challenge<c- o>:</c-> <c- ow>new</c-> Uint8Array<c- p>([</c-><c- mf>21</c-><c- p>,</c-><c- mf>31</c-><c- p>,</c-><c- mf>105</c-> <c- d>/* 银行生成的其他29个随机字节 */</c-><c- p>]),</c->

    instrument<c- o>:</c-> <c- p>{</c->
      displayName<c- o>:</c-> <c- u>"FancyBank Platinum Card"</c-><c- p>,</c->
      details<c- o>:</c-> <c- u>"****1234 | 01/29"</c-><c- p>,</c->
      icon<c- o>:</c-> <c- u>"https://fancybank.example/card-art.png"</c-><c- p>,</c->
    <c- p>},</c->

    payeeName<c- o>:</c-> <c- u>"Merchant Shop"</c-><c- p>,</c->
    payeeOrigin<c- o>:</c-> <c- u>"https://merchant.example"</c-><c- p>,</c->

    paymentEntitiesLogos<c- o>:</c-> <c- p>[</c->
      <c- p>{</c->
        url<c- o>:</c-> <c- u>"https://fancybank.example/logo.png"</c-><c- p>,</c->
        label<c- o>:</c-> <c- u>"Fancy Bank"</c-><c- p>,</c->
      <c- p>},</c->
      <c- p>{</c->
        url<c- o>:</c-> <c- u>"https://securenetwork.example/logo.png"</c-><c- p>,</c->
        label<c- o>:</c-> <c- u>"Secure Network"</c-><c- p>,</c->
      <c- p>},</c->
    <c- p>],</c->

    <c- c1>// 调用方请求本地化体验</c->
    locale<c- o>:</c-> <c- p>[</c-><c- u>"en"</c-><c- p>],</c->

    timeout<c- o>:</c-> <c- mf>360000</c-><c- p>,</c->  <c- c1>// 6分钟</c->

    <c- c1>// 可选的算法列表，默认ES256和RS256，本例允许ES256和RS256，偏好ES256。</c->
    <c- c1>// 浏览器绑定密钥已存在时不会创建，仅当需要新建时使用此列表。</c->
    browserBoundPubKeyCredParams<c- o>:</c-> <c- p>[</c->
      <c- p>{</c->
        type<c- o>:</c-> <c- u>"public-key"</c-><c- p>,</c->
        alg<c- o>:</c-> <c- o>-</c-><c- mf>7</c-> <c- c1>// "ES256"</c->
      <c- p>},</c->
      <c- p>{</c->
        type<c- o>:</c-> <c- u>"public-key"</c-><c- p>,</c->
        alg<c- o>:</c-> <c- o>-</c-><c- mf>257</c-> <c- c1>// "RS256"</c->
      <c- p>}</c->
    <c- p>]</c->
  <c- p>}],</c-> <c- p>{</c->
    total<c- o>:</c-> <c- p>{</c->
      label<c- o>:</c-> <c- u>"Total"</c-><c- p>,</c->
      amount<c- o>:</c-> <c- p>{</c->
        currency<c- o>:</c-> <c- u>"USD"</c-><c- p>,</c->
        value<c- o>:</c-> <c- u>"5.00"</c-><c- p>,</c->
      <c- p>},</c->
    <c- p>},</c->
  <c- p>});</c->

<c- k>try</c-> <c- p>{</c->
  <c- a>const</c-> response <c- o>=</c-> <c- k>await</c-> request<c- p>.</c->show<c- p>();</c->
  <c- k>await</c-> response<c- p>.</c->complete<c- p>(</c-><c- t>'success'</c-><c- p>);</c->

  <c- c1>// response.data 为 PublicKeyCredential，clientDataJSON 包含由发卡银行验证的交易数据。</c->

  <c- d>/* 将 response.data 发送给发卡银行进行验证 */</c->
<c- p>}</c-> <c- k>catch</c-> <c- p>(</c->err<c- p>)</c-> <c- p>{</c->
  <c- d>/* SPC无法使用，商户应回退到传统流程 */</c->
<c- p>}</c->
</pre>
        <h2 class="heading settled" data-level="2" id="sctn-terminology"><span class="secno">2. </span><span
                class="content">术语</span><a class="self-link" href="#sctn-terminology"></a></h2>
        <dl>
            <dt data-md><dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="spc-credential">SPC
                    凭证</dfn>
            <dd data-md>
                <p>一种可用于本规范行为的 <a data-link-type="dfn" href="https://w3c.github.io/webauthn/#public-key-credential"
                        id="ref-for-public-key-credential">WebAuthn 凭证</a>。</p>
                <p>本规范不限制依赖方（<a data-link-type="dfn" href="https://w3c.github.io/webauthn/#relying-party"
                        id="ref-for-relying-party⑨">Relying Party</a>）将 SPC 凭证用于其它认证流程（如登录）。</p>
                <p class="note" role="note"><span class="marker">注意：</span> 当前版本规范要求 <a data-link-type="dfn"
                        href="https://w3c.github.io/webauthn/#relying-party"
                        id="ref-for-relying-party①⓪">依赖方</a>主动选择凭证是否可用于第一方或第三方场景。后续长远目标是所有 <a data-link-type="dfn"
                        href="https://w3c.github.io/webauthn/#public-key-credential"
                        id="ref-for-public-key-credential①">WebAuthn 凭证</a>
                    在第一方场景（即在 <a data-link-type="dfn" href="https://w3c.github.io/webauthn/#relying-party"
                        id="ref-for-relying-party①①">依赖方</a>域名下）均可支持SPC，仅需对第三方场景时才需选择允许。
                </p>
            <dt data-md><dfn class="dfn-paneled" data-dfn-type="dfn" data-export
                    id="third-party-enabled-spc-credential">第三方启用SPC凭证</dfn>
            <dd data-md>
                <p>一种 <a data-link-type="dfn" href="#spc-credential" id="ref-for-spc-credential">SPC 凭证</a>，依赖方(<a
                        data-link-type="dfn" href="https://w3c.github.io/webauthn/#relying-party"
                        id="ref-for-relying-party①②">Relying Party</a>)
                    在凭证创建时主动选择允许其被除依赖方外的其他方用于安全支付确认认证场景。</p>
            <dt data-md><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                    id="steps-to-silently-determine-if-an-spc-credential-is-third-party-enabled">静默判断SPC凭证是否已启用第三方使用步骤</dfn>
            <dd data-md>
                <p>一种尚未定义的流程，用户代理可据 <a data-link-type="dfn"
                        href="https://w3c.github.io/webauthn/#relying-party-identifier"
                        id="ref-for-relying-party-identifier">依赖方标识符</a> 和 <a data-link-type="dfn"
                        href="https://w3c.github.io/webauthn/#credential-id"
                        id="ref-for-credential-id">凭证ID</a>，静默（无用户交互）判断凭证ID对应的凭证是否为 <a data-link-type="dfn"
                        href="#third-party-enabled-spc-credential"
                        id="ref-for-third-party-enabled-spc-credential">第三方启用SPC凭证</a>。
                </p>
                <p class="note" role="note"><span class="marker">注意：</span> 参见 <a
                        href="https://github.com/w3c/webauthn/issues/1667">WebAuthn
                        issue 1667</a>。</p>
            <dt data-md><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                    id="steps-to-silently-determine-if-a-credential-is-available-for-the-current-device">静默判断凭证是否可用于当前设备的步骤</dfn>
            <dd data-md>
                <p>一种尚未定义的流程，用户代理可据 <a data-link-type="dfn"
                        href="https://w3c.github.io/webauthn/#relying-party-identifier"
                        id="ref-for-relying-party-identifier①">依赖方标识符</a> 和 <a data-link-type="dfn"
                        href="https://w3c.github.io/webauthn/#credential-id"
                        id="ref-for-credential-id①">凭证ID</a>，静默（无用户交互）判断该凭证ID对应的凭证是否可在当前设备被使用（即能被 WebAuthn <a
                        href="https://www.w3.org/TR/webauthn-3/#sctn-getAssertion">Get</a>
                    调用成功）。
                </p>
                <p>用户代理可据此只在有可能成功完成交易时条件性展示<a href="#sctn-transaction-confirmation-ux">交易确认界面</a>。</p>
                <p class="note" role="note"><span class="marker">注意：</span> 此属性通常要求 <a data-link-type="dfn"
                        href="#spc-credential" id="ref-for-spc-credential①">SPC 凭证</a>为 <a data-link-type="dfn"
                        href="https://w3c.github.io/webauthn/#discoverable-credential"
                        id="ref-for-discoverable-credential">可发现凭证</a>，因此规范中当前要求此特性。
                </p>
                <p class="note" role="note"><span class="marker">注意：</span> 此属性与<a data-biblio-display="inline"
                        data-link-type="biblio" href="https://github.com/w3c/webauthn/issues/1545"><cite>WebAuthn
                            条件UI提案</cite></a>非常相似，SPC与之可共享底层API实现。
                </p>
            <dt data-md><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="browser-bound-key">浏览器绑定密钥</dfn>
            <dd data-md>
                <p>一个由用户代理绑定到单一设备的公私<a data-link-type="dfn" href="#key-pair" id="ref-for-key-pair①">密钥对</a>，除 WebAuthn
                    凭证外还能对交易详情进行签名。</p>
            <dt data-md><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="key-pair">密钥对</dfn>
            <dd data-md>
                <p>密钥对是由<a data-link-type="dfn" href="https://infra.spec.whatwg.org/#struct"
                        id="ref-for-struct">结构体</a>组成，包括 <dfn class="dfn-paneled" data-dfn-for="key pair"
                        data-dfn-type="dfn" data-lt="public key" data-noexport id="key-pair-public-key">公钥</dfn>和 <dfn
                        class="dfn-paneled" data-dfn-for="key pair" data-dfn-type="dfn" data-noexport
                        id="key-pair-private-key">私钥</dfn>，由<a data-link-type="dfn"
                        href="https://infra.spec.whatwg.org/#implementation-defined"
                        id="ref-for-implementation-defined">实现定义</a>类型。
                </p>
                <p class="note" role="note"><span class="marker">注意：</span> <a data-link-type="dfn"
                        href="#key-pair-public-key" id="ref-for-key-pair-public-key">公钥</a>和<a data-link-type="dfn"
                        href="#key-pair-private-key" id="ref-for-key-pair-private-key">私钥</a>为 IANA COSE 算法注册表 <a
                        data-link-type="biblio" href="#biblio-iana-cose-algs-reg"
                        title="IANA CBOR Object Signing and Encryption (COSE) Algorithms Registry">[IANA-COSE-ALGS-REG]</a>引用的密码算法相关参数。
                </p>
                <p class="note" role="note"><span class="marker">注意：</span> 注册时公钥部分会返回：
                    <code
                        class="idl"><a data-link-type="idl" href="#dictdef-collectedclientadditionalpaymentregistrationdata" id="ref-for-dictdef-collectedclientadditionalpaymentregistrationdata">CollectedClientAdditionalPaymentRegistrationData</a></code>.<code
                        class="idl"><a data-link-type="idl" href="#dom-collectedclientadditionalpaymentregistrationdata-browserboundpublickey" id="ref-for-dom-collectedclientadditionalpaymentregistrationdata-browserboundpublickey">browserBoundPublicKey</a></code>
                    支付断言时会返回
                    <code
                        class="idl"><a data-link-type="idl" href="#dictdef-collectedclientadditionalpaymentdata" id="ref-for-dictdef-collectedclientadditionalpaymentdata">CollectedClientAdditionalPaymentData</a></code>.<code
                        class="idl"><a data-link-type="idl" href="#dom-collectedclientadditionalpaymentdata-browserboundpublickey" id="ref-for-dom-collectedclientadditionalpaymentdata-browserboundpublickey①">browserBoundPublicKey</a></code>。
                </p>
                <p class="note" role="note"><span class="marker">注意：</span> 私钥用于生成密码签名（包含于 <code
                        class="idl"><a data-link-type="idl" href="#dictdef-browserboundsignature" id="ref-for-dictdef-browserboundsignature">BrowserBoundSignature</a></code>.<code
                        class="idl"><a data-link-type="idl" href="#dom-browserboundsignature-signature" id="ref-for-dom-browserboundsignature-signature">signature</a></code>），用户代理不导出私钥，并可将其存储于设备安全元件。
                </p>
        </dl>
        <h2 class="heading settled" data-level="3" id="sctn-registration"><span class="secno">3. </span><span
                class="content">注册</span><a class="self-link" href="#sctn-registration"></a></h2>
        <p>为用户注册安全支付确认时，依赖方应调用
            <code
                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/credential-management-1/#dom-credentialscontainer-create" id="ref-for-dom-credentialscontainer-create">navigator.credentials.create()</a></code>，
            并指定
            <code
                class="idl"><a data-link-type="idl" href="#dom-authenticationextensionsclientinputs-payment" id="ref-for-dom-authenticationextensionsclientinputs-payment">payment</a></code>
            <a data-link-type="dfn" href="https://w3c.github.io/webauthn/#webauthn-extensions"
                id="ref-for-webauthn-extensions①">WebAuthn 扩展</a>参数。
        </p>
        <details class="wpt-tests-block" dir="ltr" lang="en">
            <summary>测试</summary>
            <ul class="wpt-tests-list">
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/secure-payment-confirmation/enrollment.https.html"
                        title="secure-payment-confirmation/enrollment.https.html">enrollment.https.html</a> <a
                        class="wpt-live"
                        href="https://wpt.live/secure-payment-confirmation/enrollment.https.html"><small>(在线测试)</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/secure-payment-confirmation/enrollment.https.html"><small>(源码)</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/secure-payment-confirmation/enrollment-in-iframe.sub.https.html"
                        title="secure-payment-confirmation/enrollment-in-iframe.sub.https.html">enrollment-in-iframe.sub.https.html</a>
                    <a class="wpt-live"
                        href="https://wpt.live/secure-payment-confirmation/enrollment-in-iframe.sub.https.html"><small>(在线测试)</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/secure-payment-confirmation/enrollment-in-iframe.sub.https.html"><small>(源码)</small></a>
            </ul>
        </details>
        <p class="note" role="note"><span class="marker">注意：</span> 本规范定义扩展，以支持浏览器在缺乏 <a data-link-type="biblio"
                href="#biblio-webauthn-conditional-ui"
                title="WebAuthn Conditional UI Proposal">条件UI</a>时缓存SPC凭证ID。后续WebAuthn版本如具备相关能力，SPC可取消此扩展要求。注意扩展下的SPC凭证本质仍为完整WebAuthn凭证。
        </p>
        <p class="note" role="note"><span class="marker">注意：</span> 注册时 Web Authentication 需提供
            <code
                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialentity-name" id="ref-for-dom-publickeycredentialentity-name">name</a></code>
            和
            <code
                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialuserentity-displayname" id="ref-for-dom-publickeycredentialuserentity-displayname">displayName</a></code>，
            但根据<a data-link-type="dfn"
                href="https://w3c.github.io/webauthn/#dom-publickeycredentialcreationoptions-user"
                id="ref-for-dom-publickeycredentialcreationoptions-user">user成员</a>定义，实现不要求后续认证流程展示。截止2023年10月，<code
                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialentity-name" id="ref-for-dom-publickeycredentialentity-name①">name</a></code>展示更一致。开发者需关注实现动态。
        </p>
        <h2 class="heading settled" data-level="4" id="sctn-authentication"><span class="secno">4. </span><span
                class="content">认证 - 安全支付确认支付方式</span><a class="self-link" href="#sctn-authentication"></a></h2>
        <p>要通过安全支付确认进行付款认证，本规范定义了：</p>
        <ol>
            <li data-md>
                <p>一个 <a data-link-type="dfn" href="https://www.w3.org/TR/payment-request/#dfn-payment-handler"
                        id="ref-for-dfn-payment-handler">支付处理器</a>，即 <dfn class="dfn-paneled" data-dfn-type="dfn"
                        data-lt="Secure Payment Confirmation payment handler" data-noexport
                        id="secure-payment-confirmation-payment-handler">安全支付确认支付处理器</dfn>，用来处理认证指定支付的请求。</p>
            <li data-md>
                <p>该支付处理器的<a data-link-type="dfn"
                        href="https://www.w3.org/TR/payment-method-id/#dfn-standardized-payment-method-identifier"
                        id="ref-for-dfn-standardized-payment-method-identifier">标准化支付方式标识符</a>为
                    "<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                        id="secure-payment-confirmation">secure-payment-confirmation</dfn>"。</p>
        </ol>
        <p><a data-link-type="dfn" href="#secure-payment-confirmation-payment-handler"
                id="ref-for-secure-payment-confirmation-payment-handler">安全支付确认支付处理器</a>确认用户交易后，
            会执行<a data-link-type="dfn" href="https://w3c.github.io/webauthn/#authentication-ceremony"
                id="ref-for-authentication-ceremony">认证流程</a>，验证用户并创建代表本认证流程的签名数据片段。</p>
        <p>总的来说，安全支付确认的认证同
            <a data-link-type="biblio" href="#biblio-webauthn-3"
                title="Web Authentication: An API for accessing Public Key Credentials - Level 3">[webauthn-3]</a>
            类似，唯一重要概念变化是安全支付确认允许第三方（如商户）代表<a data-link-type="dfn" href="https://w3c.github.io/webauthn/#relying-party"
                id="ref-for-relying-party①④">依赖方</a>发起认证流程，传入从依赖方其他渠道获得的凭证。详见
            <a href="#sctn-use-case-merchant-authentication">§ 1.1.2 商户对认证的控制</a>。
        </p>
        <p class="note" role="note"><span class="marker">注意：</span> 为快速支持初期SPC实验，该API设计基于
            Payment Request 和 Payment Handler APIs 的现有实现。现已普遍认为应探索独立于 Payment Request 的 SPC 设计。因此预计（暂无具体时间表）SPC将脱离原有
            Payment Request 实现。对于开发者，这将提升特性检测、调用及API其他使用体验。</p>
        <h3 class="heading settled" data-level="4.1" id="sctn-registration-in-payment-method-id"><span
                class="secno">4.1. </span><span class="content">在 <a data-link-type="biblio"
                    href="#biblio-payment-method-id" title="Payment Method Identifiers">[payment-method-id]</a>
                注册</span><a class="self-link" href="#sctn-registration-in-payment-method-id"></a></h3>
        <p>向 <a data-link-type="dfn" href="https://w3c.github.io/payment-method-id/#registry"
                id="ref-for-registry">标准支付方式注册表</a>
            及 <a data-link-type="biblio" href="#biblio-payment-method-id"
                title="Payment Method Identifiers">[payment-method-id]</a> 增加如下内容：
        </p>
        <dl>
            <dt data-md>"<a data-link-type="dfn" href="#secure-payment-confirmation"
                    id="ref-for-secure-payment-confirmation">secure-payment-confirmation</a>"
            <dd data-md>
                <p><a href="https://w3c.github.io/secure-payment-confirmation/">安全支付确认</a>规范。</p>
        </dl>
        <h3 class="heading settled" data-level="4.2" id="sctn-modify-payment-request-constructor"><span
                class="secno">4.2. </span><span class="content">修改 Payment Request 构造函数</span><a class="self-link"
                href="#sctn-modify-payment-request-constructor"></a></h3>
        <p>在 <code
                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#dom-paymentrequest-constructor" id="ref-for-dom-paymentrequest-constructor">PaymentRequest 对象构造函数</a></code>
            的步骤中，步骤4.3后新增：
        </p>
        <ol start="4">
            <li data-md>
                <p>处理支付方式：<em>[子步骤1-3 遗略]</em></p>
                <ol start="4">
                    <li data-md>
                        <p>若<var>seenPMIs</var>包含 "<a data-link-type="dfn" href="#secure-payment-confirmation"
                                id="ref-for-secure-payment-confirmation①">secure-payment-confirmation</a>" 且
                            <var>seenPMIs</var> 长度大于1，则抛出<code
                                class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-rangeerror" id="ref-for-exceptiondef-rangeerror">RangeError</a></code>异常。
                        </p>
                </ol>
        </ol>
        <h3 class="heading settled" data-level="4.3" id="sctn-modify-user-activation-requirement"><span
                class="secno">4.3. </span><span class="content">修改用户激活要求</span><a class="self-link"
                href="#sctn-modify-user-activation-requirement"></a></h3>
        <p>在 <code
                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#dom-paymentrequest-show" id="ref-for-dom-paymentrequest-show">PaymentRequest.show()</a></code>
            方法步骤中，修改步骤2和3：
        </p>
        <ol start="2">
            <li data-md>
                <p>若<a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global"
                        id="ref-for-concept-relevant-global">相关全局对象</a>的<a data-link-type="dfn"
                        href="https://fetch.spec.whatwg.org/#concept-request" id="ref-for-concept-request">request</a>
                    不具有
                    <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/interaction.html#transient-activation"
                        id="ref-for-transient-activation">瞬时激活</a>，用户代理可选择：
                </p>
                <ol>
                    <li data-md>
                        <p>返回<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-promise-rejected-with"
                                id="ref-for-a-promise-rejected-with">一个被拒绝的 promise</a>，异常类型为<code
                                class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#securityerror" id="ref-for-securityerror">"SecurityError"</a></code>
                            <code
                                class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException">DOMException</a></code>。
                        </p>
                </ol>
            <li data-md>
                <p>否则，<a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/interaction.html#consume-user-activation"
                        id="ref-for-consume-user-activation">消耗用户激活</a>（即消费关联全局对象的激活状态）。</p>
        </ol>
        <p class="note" role="note"><span class="marker">注意：</span> 允许用户代理无需用户激活，可支持重定向认证流程（如重定向后无用户激活）。安全相关见
            <a href="#sctn-security-user-activation-requirement">§ 11.4 用户激活要求的缺失</a>。
        </p>
        <h3 class="heading settled" data-level="4.4" id="sctn-securepaymentconfirmationrequest-dictionary"><span
                class="secno">4.4. </span><span class="content"><dfn class="dfn-paneled idl-code"
                    data-dfn-type="dictionary" data-export
                    id="dictdef-securepaymentconfirmationrequest"><code>SecurePaymentConfirmationRequest</code></dfn>
                字典</span><a class="self-link" href="#sctn-securepaymentconfirmationrequest-dictionary"></a></h3>
        <pre class="def highlight idl"><c- b>dictionary</c-> <a class="idl-code" data-link-type="dictionary" href="#dictdef-securepaymentconfirmationrequest" id="ref-for-dictdef-securepaymentconfirmationrequest"><c- g>SecurePaymentConfirmationRequest</c-></a> {
    <c- b>required</c-> <a data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#BufferSource" id="ref-for-BufferSource"><c- n>BufferSource</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SecurePaymentConfirmationRequest" data-dfn-type="dict-member" data-export data-type="BufferSource" id="dom-securepaymentconfirmationrequest-challenge"><code><c- g>challenge</c-></code></dfn>;
    <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString"><c- b>USVString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SecurePaymentConfirmationRequest" data-dfn-type="dict-member" data-export data-type="USVString" id="dom-securepaymentconfirmationrequest-rpid"><code><c- g>rpId</c-></code></dfn>;
    <c- b>required</c-> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#BufferSource" id="ref-for-BufferSource①"><c- n>BufferSource</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="SecurePaymentConfirmationRequest" data-dfn-type="dict-member" data-export data-type="sequence<BufferSource>" id="dom-securepaymentconfirmationrequest-credentialids"><code><c- g>credentialIds</c-></code></dfn>;
    <c- b>required</c-> <a data-link-type="idl-name" href="#dictdef-paymentcredentialinstrument" id="ref-for-dictdef-paymentcredentialinstrument"><c- n>PaymentCredentialInstrument</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SecurePaymentConfirmationRequest" data-dfn-type="dict-member" data-export data-type="PaymentCredentialInstrument" id="dom-securepaymentconfirmationrequest-instrument"><code><c- g>instrument</c-></code></dfn>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long" id="ref-for-idl-unsigned-long"><c- b>unsigned</c-> <c- b>long</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SecurePaymentConfirmationRequest" data-dfn-type="dict-member" data-export data-type="unsigned long" id="dom-securepaymentconfirmationrequest-timeout"><code><c- g>timeout</c-></code></dfn>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString①"><c- b>USVString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SecurePaymentConfirmationRequest" data-dfn-type="dict-member" data-export data-type="USVString" id="dom-securepaymentconfirmationrequest-payeename"><code><c- g>payeeName</c-></code></dfn>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString②"><c- b>USVString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SecurePaymentConfirmationRequest" data-dfn-type="dict-member" data-export data-type="USVString" id="dom-securepaymentconfirmationrequest-payeeorigin"><code><c- g>payeeOrigin</c-></code></dfn>;
    <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence①"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#dictdef-paymententitylogo" id="ref-for-dictdef-paymententitylogo"><c- n>PaymentEntityLogo</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="SecurePaymentConfirmationRequest" data-dfn-type="dict-member" data-export data-type="sequence<PaymentEntityLogo>" id="dom-securepaymentconfirmationrequest-paymententitieslogos"><code><c- g>paymentEntitiesLogos</c-></code></dfn>;
    <a data-link-type="idl-name" href="https://www.w3.org/TR/webauthn-3/#dictdef-authenticationextensionsclientinputs" id="ref-for-dictdef-authenticationextensionsclientinputs"><c- n>AuthenticationExtensionsClientInputs</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SecurePaymentConfirmationRequest" data-dfn-type="dict-member" data-export data-type="AuthenticationExtensionsClientInputs" id="dom-securepaymentconfirmationrequest-extensions"><code><c- g>extensions</c-></code></dfn>;
    <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence②"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="https://www.w3.org/TR/webauthn-3/#dictdef-publickeycredentialparameters" id="ref-for-dictdef-publickeycredentialparameters"><c- n>PublicKeyCredentialParameters</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="SecurePaymentConfirmationRequest" data-dfn-type="dict-member" data-export data-type="sequence<PublicKeyCredentialParameters>" id="dom-securepaymentconfirmationrequest-browserboundpubkeycredparams"><code><c- g>browserBoundPubKeyCredParams</c-></code></dfn>;
    <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence③"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString③"><c- b>USVString</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="SecurePaymentConfirmationRequest" data-dfn-type="dict-member" data-export data-type="sequence<USVString>" id="dom-securepaymentconfirmationrequest-locale"><code><c- g>locale</c-></code></dfn>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SecurePaymentConfirmationRequest" data-dfn-type="dict-member" data-export data-type="boolean" id="dom-securepaymentconfirmationrequest-showoptout"><code><c- g>showOptOut</c-></code></dfn>;
};
</pre>
        <p><code
                class="idl"><a data-link-type="idl" href="#dictdef-securepaymentconfirmationrequest" id="ref-for-dictdef-securepaymentconfirmationrequest①">SecurePaymentConfirmationRequest</a></code>
            字典包含如下成员：</p>
        <dl class="domintro">
            <dt data-md><code
                    class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-challenge" id="ref-for-dom-securepaymentconfirmationrequest-challenge">challenge</a></code>
            <dd data-md>
                <p>由依赖方服务端生成的随机 challenge，用于防止重放攻击。</p>
            <dt data-md><code
                    class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-rpid" id="ref-for-dom-securepaymentconfirmationrequest-rpid">rpId</a></code>
            <dd data-md>
                <p>凭证的<a data-link-type="dfn" href="https://w3c.github.io/webauthn/#relying-party-identifier"
                        id="ref-for-relying-party-identifier②">依赖方标识符</a>。</p>
            <dt data-md><code
                    class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-credentialids" id="ref-for-dom-securepaymentconfirmationrequest-credentialids">credentialIds</a></code>
            <dd data-md>
                <p>指定支付工具相关凭证ID列表。</p>
            <dt data-md><code
                    class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-instrument" id="ref-for-dom-securepaymentconfirmationrequest-instrument">instrument</a></code>
            <dd data-md>
                <p>注册和签名时用于展示的支付工具名称及图标描述。</p>
            <dt data-md><code
                    class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-timeout" id="ref-for-dom-securepaymentconfirmationrequest-timeout">timeout</a></code>
            <dd data-md>
                <p>签名支付详情请求最大等待毫秒数，不超过1小时。默认值和范围由用户代理定义。Web Authentication 可参见<a
                        href="https://www.w3.org/TR/webauthn-3/#sctn-createCredential">超时相关指导</a>。</p>
            <dt data-md><code
                    class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-payeename" id="ref-for-dom-securepaymentconfirmationrequest-payeename">payeeName</a></code>
            <dd data-md>
                <p>本次SPC调用收款人显示名（如商户名）。可选，或与 <code
                        class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-payeeorigin" id="ref-for-dom-securepaymentconfirmationrequest-payeeorigin">payeeOrigin</a></code>
                    一同或单独提供。
                </p>
            <dt data-md><code
                    class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-payeeorigin" id="ref-for-dom-securepaymentconfirmationrequest-payeeorigin①">payeeOrigin</a></code>
            <dd data-md>
                <p>本次SPC调用收款人<a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin"
                        id="ref-for-concept-origin">来源</a>（如商户）。可选，或与 <code
                        class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-payeename" id="ref-for-dom-securepaymentconfirmationrequest-payeename①">payeeName</a></code>
                    一同或单独提供。
                </p>
            <dt data-md><code
                    class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-paymententitieslogos" id="ref-for-dom-securepaymentconfirmationrequest-paymententitieslogos">paymentEntitiesLogos</a></code>
            <dd data-md>
                <p>代表本次SPC调用所涉及支付实体的可选logo列表，按展示优先级递减排序。用户代理不要求全部都展示，详见 <a
                        href="#sctn-steps-to-check-if-a-payment-can-be-made">§ 4.8 检查可否支付步骤</a>。</p>
                <p class="note" role="note"><span
                        class="marker">注意：</span>本规范未规定logo呈现方式，旨在保留用户代理渲染控制权，并允许最佳展示信息。logo顺序很重要，开发者可通过调整顺序获得期望结果。</p>
            <dt data-md><code
                    class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-extensions" id="ref-for-dom-securepaymentconfirmationrequest-extensions">extensions</a></code>
            <dd data-md>
                <p>用于传递凭证的任何<a data-link-type="dfn" href="https://w3c.github.io/webauthn/#webauthn-extensions"
                        id="ref-for-webauthn-extensions②">WebAuthn扩展</a>。调用者无需指定<a
                        href="#sctn-payment-extension-registration">支付扩展</a>，会自动添加。
                </p>
            <dt data-md><code
                    class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-browserboundpubkeycredparams" id="ref-for-dom-securepaymentconfirmationrequest-browserboundpubkeycredparams">browserBoundPubKeyCredParams</a></code>
            <dd data-md>
                <p>浏览器绑定密钥使用的加密算法类型限制列表。</p>
                <p class="note" role="note"><span class="marker">注意：</span> 仅当需创建浏览器绑定密钥时此成员才生效。</p>
            <dt data-md><code
                    class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-locale" id="ref-for-dom-securepaymentconfirmationrequest-locale">locale</a></code>
            <dd data-md>
                <p>可选语言标签列表（见 <a data-link-type="biblio" href="#biblio-bcp47"
                        title="Tags for Identifying Languages">[BCP47]</a>），按优先级排序，标识网站<a data-link-type="dfn"
                        href="https://www.w3.org/TR/i18n-glossary/#dfn-locale" id="ref-for-dfn-locale">区域</a>偏好，
                    即<a data-link-type="dfn" href="https://www.w3.org/TR/i18n-glossary/#dfn-language-priority-list"
                        id="ref-for-dfn-language-priority-list">语言优先列表</a> <a data-link-type="biblio"
                        href="#biblio-rfc4647" title="Matching of Language Tags">[RFC4647]</a>。用户代理可据此与调用方进行<a
                        data-link-type="dfn" href="https://www.w3.org/TR/i18n-glossary/#dfn-language-negotiation"
                        id="ref-for-dfn-language-negotiation">语言协商</a>和区域相关格式化。</p>
            <dt data-md><code
                    class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-showoptout" id="ref-for-dom-securepaymentconfirmationrequest-showoptout">showOptOut</a></code>
            <dd data-md>
                <p>是否在<a href="#sctn-transaction-confirmation-ux">交易确认界面</a>给用户提供选择退出机会。可选，默认false。</p>
        </dl>
        <h3 class="heading settled" data-level="4.5" id="sctn-payment-method-additional-data-type"><span
                class="secno">4.5. </span><span class="content">支付方式附加数据类型</span><a class="self-link"
                href="#sctn-payment-method-additional-data-type"></a></h3>
        <p>本支付方式的<a data-link-type="dfn" href="https://w3c.github.io/payment-request/#dfn-additional-data-type"
                id="ref-for-dfn-additional-data-type">附加数据类型</a>为
            <code
                class="idl"><a data-link-type="idl" href="#dictdef-securepaymentconfirmationrequest" id="ref-for-dictdef-securepaymentconfirmationrequest②">SecurePaymentConfirmationRequest</a></code>。
        </p>
        <h3 class="heading settled" data-level="4.6" id="sctn-secure-payment-confirmation-available-api"><span
                class="secno">4.6. </span><span class="content">检查安全支付确认是否可用</span><a class="self-link"
                href="#sctn-secure-payment-confirmation-available-api"></a></h3>
        <p>在<code
                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#dom-paymentrequest" id="ref-for-dom-paymentrequest①">PaymentRequest</a></code>
            上添加了静态API，让开发者能简便地检查安全支付确认是否可用。该方法<code
                class="idl"><a data-link-type="idl" href="#dom-paymentrequest-securepaymentconfirmationavailability" id="ref-for-dom-paymentrequest-securepaymentconfirmationavailability">securePaymentConfirmationAvailability()</a></code>
            返回枚举类型成员，指明安全支付确认是否可用或不可用，并说明底层原因。枚举输出旨在帮助开发者为用户提供身份认证选项指引和提示。</p>
        <pre class="def highlight idl"><c- b>enum</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="enum" data-export id="enumdef-securepaymentconfirmationavailability"><code><c- g>SecurePaymentConfirmationAvailability</c-></code></dfn> {
  <a class="idl-code" data-link-type="enum-value" href="#dom-securepaymentconfirmationavailability-available" id="ref-for-dom-securepaymentconfirmationavailability-available"><c- s>"available"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-securepaymentconfirmationavailability-unavailable-unknown-reason" id="ref-for-dom-securepaymentconfirmationavailability-unavailable-unknown-reason"><c- s>"unavailable-unknown-reason"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-securepaymentconfirmationavailability-unavailable-feature-not-enabled" id="ref-for-dom-securepaymentconfirmationavailability-unavailable-feature-not-enabled"><c- s>"unavailable-feature-not-enabled"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-securepaymentconfirmationavailability-unavailable-no-permission-policy" id="ref-for-dom-securepaymentconfirmationavailability-unavailable-no-permission-policy"><c- s>"unavailable-no-permission-policy"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-securepaymentconfirmationavailability-unavailable-no-user-verifying-platform-authenticator" id="ref-for-dom-securepaymentconfirmationavailability-unavailable-no-user-verifying-platform-authenticator"><c- s>"unavailable-no-user-verifying-platform-authenticator"</c-></a>,
};

<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://www.w3.org/TR/payment-request/#dom-paymentrequest" id="ref-for-dom-paymentrequest②"><c- g>PaymentRequest</c-></a> {
    <c- b>static</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#enumdef-securepaymentconfirmationavailability" id="ref-for-enumdef-securepaymentconfirmationavailability"><c- n>SecurePaymentConfirmationAvailability</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="PaymentRequest" data-dfn-type="method" data-export data-lt="securePaymentConfirmationAvailability()" id="dom-paymentrequest-securepaymentconfirmationavailability"><code><c- g>securePaymentConfirmationAvailability</c-></code></dfn>();
};
</pre>
        <p><code
                class="idl"><a data-link-type="idl" href="#enumdef-securepaymentconfirmationavailability" id="ref-for-enumdef-securepaymentconfirmationavailability①">SecurePaymentConfirmationAvailability</a></code>
            枚举包含如下成员：</p>
        <dl>
            <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="SecurePaymentConfirmationAvailability"
                    data-dfn-type="enum-value" data-export data-lt="&quot;available&quot;|available"
                    id="dom-securepaymentconfirmationavailability-available"><code>available</code></dfn>
            <dd data-md>
                <p>指示用户代理认为安全支付确认API在当前帧可用。</p>
                <p class="note" role="note"><span class="marker">注意：</span> 此结果不代表某个具体<a data-link-type="dfn"
                        href="#spc-credential" id="ref-for-spc-credential②">SPC凭证</a>是否可用。</p>
            <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="SecurePaymentConfirmationAvailability"
                    data-dfn-type="enum-value" data-export
                    data-lt="&quot;unavailable-unknown-reason&quot;|unavailable-unknown-reason"
                    id="dom-securepaymentconfirmationavailability-unavailable-unknown-reason"><code>unavailable-unknown-reason</code></dfn>
            <dd data-md>
                <p>指示安全支付确认API在当前帧不可用，原因未知。用户代理可随时选择返回此结果而非更具体原因，以保护用户隐私。</p>
            <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="SecurePaymentConfirmationAvailability"
                    data-dfn-type="enum-value" data-export
                    data-lt="&quot;unavailable-feature-not-enabled&quot;|unavailable-feature-not-enabled"
                    id="dom-securepaymentconfirmationavailability-unavailable-feature-not-enabled"><code>unavailable-feature-not-enabled</code></dfn>
            <dd data-md>
                <p>指示安全支付确认API在当前帧不可用，因为未启用相关功能。</p>
            <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="SecurePaymentConfirmationAvailability"
                    data-dfn-type="enum-value" data-export
                    data-lt="&quot;unavailable-no-permission-policy&quot;|unavailable-no-permission-policy"
                    id="dom-securepaymentconfirmationavailability-unavailable-no-permission-policy"><code>unavailable-no-permission-policy</code></dfn>
            <dd data-md>
                <p>指示安全支付确认API在当前帧不可用，因为缺少 "<a data-link-type="dfn"
                        href="https://w3c.github.io/payment-request/#dfn-payment" id="ref-for-dfn-payment">payment</a>"
                    权限策略。</p>
            <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="SecurePaymentConfirmationAvailability"
                    data-dfn-type="enum-value" data-export
                    data-lt="&quot;unavailable-no-user-verifying-platform-authenticator&quot;|unavailable-no-user-verifying-platform-authenticator"
                    id="dom-securepaymentconfirmationavailability-unavailable-no-user-verifying-platform-authenticator"><code>unavailable-no-user-verifying-platform-authenticator</code></dfn>
            <dd data-md>
                <p>指示安全支付确认API在当前帧不可用，因为没有可用的<a data-link-type="dfn"
                        href="https://w3c.github.io/webauthn/#user-verifying-platform-authenticator"
                        id="ref-for-user-verifying-platform-authenticator">用户验证平台认证器</a>。</p>
                <p class="note" role="note"><span class="marker">注意：</span> 此信息可通过调用
                    <code
                        class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dom-publickeycredential-isuserverifyingplatformauthenticatoravailable" id="ref-for-dom-publickeycredential-isuserverifyingplatformauthenticatoravailable">isUserVerifyingPlatformAuthenticatorAvailable</a></code>
                    获取，这一API中为开发便利性而包含。
                </p>
        </dl>
        <p>在特定<code
                class="idl"><a data-link-type="idl" href="#dom-paymentrequest-securepaymentconfirmationavailability" id="ref-for-dom-paymentrequest-securepaymentconfirmationavailability①">securePaymentConfirmationAvailability()</a></code>
            调用时，用户代理须执行如下步骤。用户代理可随时选择返回
            "<code
                class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationavailability-unavailable-unknown-reason" id="ref-for-dom-securepaymentconfirmationavailability-unavailable-unknown-reason①">unavailable-unknown-reason</a></code>"，
            以保护用户隐私或无法完成某步骤时。
        </p>
        <ol>
            <li data-md>
                <p>如用户代理不支持安全支付确认，或支持但通过某种机制被禁用，则返回
                    "<code
                        class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationavailability-unavailable-feature-not-enabled" id="ref-for-dom-securepaymentconfirmationavailability-unavailable-feature-not-enabled①">unavailable-feature-not-enabled</a></code>"。
                </p>
            <li data-md>
                <p>如 <var>document</var> 未启用 "<a data-link-type="dfn"
                        href="https://w3c.github.io/payment-request/#dfn-payment" id="ref-for-dfn-payment①">payment</a>"
                    权限策略，则返回
                    "<code
                        class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationavailability-unavailable-no-permission-policy" id="ref-for-dom-securepaymentconfirmationavailability-unavailable-no-permission-policy①">unavailable-no-permission-policy</a></code>"。
                </p>
            <li data-md>
                <p>如无<a data-link-type="dfn"
                        href="https://w3c.github.io/webauthn/#user-verifying-platform-authenticator"
                        id="ref-for-user-verifying-platform-authenticator①">用户验证平台认证器</a>
                    可用，则返回
                    "<code
                        class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationavailability-unavailable-no-user-verifying-platform-authenticator" id="ref-for-dom-securepaymentconfirmationavailability-unavailable-no-user-verifying-platform-authenticator①">unavailable-no-user-verifying-platform-authenticator</a></code>"。
                </p>
            <li data-md>
                <p>如有任何其他原因致使安全支付确认在 <var>document</var> 下无法工作，则返回
                    "<code
                        class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationavailability-unavailable-unknown-reason" id="ref-for-dom-securepaymentconfirmationavailability-unavailable-unknown-reason②">unavailable-unknown-reason</a></code>"。
                </p>
            <li data-md>
                <p>返回 "<code
                        class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationavailability-available" id="ref-for-dom-securepaymentconfirmationavailability-available①">available</a></code>"。
                </p>
        </ol>
        <p>此 API 允许开发者如下检查是否需要发起SPC流程：</p>
        <pre class="example highlight" id="available-example"><a class="self-link" href="#available-example"></a><c- a>const</c-> spcAvailable <c- o>=</c->
    PaymentRequest <c- o>&amp;&amp;</c->
    PaymentRequest<c- p>.</c->securePaymentConfirmationAvailability <c- o>&amp;&amp;</c->
    <c- k>await</c-> PaymentRequest<c- p>.</c->securePaymentConfirmationAvailability<c- p>()</c-> <c- o>===</c-> <c- t>'available'</c-><c- p>;</c->
</pre>
        <p class="note" role="note"><span class="marker">注意：</span> 建议使用静态<code
                class="idl"><a data-link-type="idl" href="#dom-paymentrequest-securepaymentconfirmationavailability" id="ref-for-dom-paymentrequest-securepaymentconfirmationavailability②">securePaymentConfirmationAvailability</a></code>
            方法做SPC特性检测，而不是在已构建的 PaymentRequest 实例上调用<code
                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#dom-paymentrequest-canmakepayment" id="ref-for-dom-paymentrequest-canmakepayment">canMakePayment</a></code>。
        </p>
        <p class="note" role="note"><span class="marker">注意：</span> 本API涉及隐私问题，详见
            <a href="#sctn-fingerprinting-via-is-secure-payment-confirmation-available">§ 12.5
                通过securePaymentConfirmationAvailability指纹识别</a>。
        </p>
        <h3 class="heading settled" data-level="4.7" id="sctn-steps-to-validate-payment-method-data"><span
                class="secno">4.7. </span><span class="content">验证支付方式数据的步骤</span><a class="self-link"
                href="#sctn-steps-to-validate-payment-method-data"></a></h3>
        <p>对于本支付方式，输入 <code
                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#dom-paymentrequest" id="ref-for-dom-paymentrequest③">PaymentRequest</a></code>
            <var>request</var> 和 <code
                class="idl"><a data-link-type="idl" href="#dictdef-securepaymentconfirmationrequest" id="ref-for-dictdef-securepaymentconfirmationrequest③">SecurePaymentConfirmationRequest</a></code>
            <var>data</var> 所需的 <a data-link-type="dfn"
                href="https://w3c.github.io/payment-request/#dfn-steps-to-validate-payment-method-data"
                id="ref-for-dfn-steps-to-validate-payment-method-data">验证支付方式数据的步骤</a>如下：
        </p>
        <details class="wpt-tests-block" dir="ltr" lang="en">
            <summary>测试</summary>
            <ul class="wpt-tests-list">
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/secure-payment-confirmation/constructor.https.html"
                        title="secure-payment-confirmation/constructor.https.html">constructor.https.html</a> <a
                        class="wpt-live"
                        href="https://wpt.live/secure-payment-confirmation/constructor.https.html"><small>(在线测试)</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/secure-payment-confirmation/constructor.https.html"><small>(源码)</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/secure-payment-confirmation/constructor-validate-payment-method-data.https.html"
                        title="secure-payment-confirmation/constructor-validate-payment-method-data.https.html">constructor-validate-payment-method-data.https.html</a>
                    <a class="wpt-live"
                        href="https://wpt.live/secure-payment-confirmation/constructor-validate-payment-method-data.https.html"><small>(在线测试)</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/secure-payment-confirmation/constructor-validate-payment-method-data.https.html"><small>(源码)</small></a>
            </ul>
        </details>
        <ol>
            <li data-md>
                <p>如果 <var>data</var>["<code
                        class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-credentialids" id="ref-for-dom-securepaymentconfirmationrequest-credentialids①">credentialIds</a></code>"]
                    为空，
                    抛出 <code
                        class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-rangeerror" id="ref-for-exceptiondef-rangeerror①">RangeError</a></code>。
                </p>
            <li data-md>
                <p>针对 <var>data</var>["<code
                        class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-credentialids" id="ref-for-dom-securepaymentconfirmationrequest-credentialids②">credentialIds</a></code>"]
                    中每个 <var>id</var>：</p>
                <ol>
                    <li data-md>
                        <p>如果 <var>id</var> 为空，则抛出 <code
                                class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-rangeerror" id="ref-for-exceptiondef-rangeerror②">RangeError</a></code>。
                        </p>
                </ol>
            <li data-md>
                <p>若 <var>data</var>["<code
                        class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-challenge" id="ref-for-dom-securepaymentconfirmationrequest-challenge①">challenge</a></code>"]
                    为 null 或
                    为空，则抛出 <code
                        class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror">TypeError</a></code>。
                </p>
            <li data-md>
                <p>若 <var>data</var>["<code
                        class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-instrument" id="ref-for-dom-securepaymentconfirmationrequest-instrument①">instrument</a></code>"]["<code
                        class="idl"><a data-link-type="idl" href="#dom-paymentcredentialinstrument-displayname" id="ref-for-dom-paymentcredentialinstrument-displayname">displayName</a></code>"]
                    为空，则抛出 <code
                        class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①">TypeError</a></code>。
                </p>
            <li data-md>
                <p>若 <var>data</var>["<code
                        class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-instrument" id="ref-for-dom-securepaymentconfirmationrequest-instrument②">instrument</a></code>"]["<code
                        class="idl"><a data-link-type="idl" href="#dom-paymentcredentialinstrument-icon" id="ref-for-dom-paymentcredentialinstrument-icon">icon</a></code>"]
                    为空，则抛出 <code
                        class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror②">TypeError</a></code>。
                </p>
            <li data-md>
                <p>对 data["<code
                        class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-instrument" id="ref-for-dom-securepaymentconfirmationrequest-instrument③">instrument</a></code>"]
                    ["<code
                        class="idl"><a data-link-type="idl" href="#dom-paymentcredentialinstrument-icon" id="ref-for-dom-paymentcredentialinstrument-icon①">icon</a></code>"]
                    运行网址解析器。
                    若解析失败，抛出
                    <code
                        class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror③">TypeError</a></code>。
                </p>
            <li data-md>
                <p>若 <var>data</var>["<code
                        class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-instrument" id="ref-for-dom-securepaymentconfirmationrequest-instrument④">instrument</a></code>"]["<code
                        class="idl"><a data-link-type="idl" href="#dom-paymentcredentialinstrument-details" id="ref-for-dom-paymentcredentialinstrument-details">details</a></code>"]
                    有值但为空，则抛出 <code
                        class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror④">TypeError</a></code>。
                </p>
            <li data-md>
                <p>若 <var>data</var>["<code
                        class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-rpid" id="ref-for-dom-securepaymentconfirmationrequest-rpid①">rpId</a></code>"]
                    不是<a data-link-type="dfn" href="https://url.spec.whatwg.org/#valid-domain"
                        id="ref-for-valid-domain">有效域名</a>，则抛出 <code
                        class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑤">TypeError</a></code>。
                </p>
            <li data-md>
                <p>若 <var>data</var>["<code
                        class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-payeename" id="ref-for-dom-securepaymentconfirmationrequest-payeename②">payeeName</a></code>"]
                    和
                    <var>data</var>["<code
                        class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-payeeorigin" id="ref-for-dom-securepaymentconfirmationrequest-payeeorigin②">payeeOrigin</a></code>"]
                    均未提供，
                    则抛出 <code
                        class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑥">TypeError</a></code>。
                </p>
            <li data-md>
                <p>如果 <var>data</var>["<code
                        class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-payeename" id="ref-for-dom-securepaymentconfirmationrequest-payeename③">payeeName</a></code>"]
                    和
                    <var>data</var>["<code
                        class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-payeeorigin" id="ref-for-dom-securepaymentconfirmationrequest-payeeorigin③">payeeOrigin</a></code>"]
                    有值但为空，则抛出 <code
                        class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑦">TypeError</a></code>。
                </p>
            <li data-md>
                <p>如 <var>data</var>["<code
                        class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-payeeorigin" id="ref-for-dom-securepaymentconfirmationrequest-payeeorigin④">payeeOrigin</a></code>"]
                    有值：</p>
                <ol>
                    <li data-md>
                        <p>让 <var>parsedURL</var> 为对
                            <var>data</var>["<code
                                class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-payeeorigin" id="ref-for-dom-securepaymentconfirmationrequest-payeeorigin⑤">payeeOrigin</a></code>"]
                            运行<a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-parser"
                                id="ref-for-concept-url-parser">网址解析器</a>的结果。
                        </p>
                    <li data-md>
                        <p>如 <var>parsedURL</var> 解析失败，则抛出 <code
                                class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑧">TypeError</a></code>。
                        </p>
                    <li data-md>
                        <p>如 <var>parsedURL</var> 的 <a data-link-type="dfn"
                                href="https://url.spec.whatwg.org/#concept-url-scheme"
                                id="ref-for-concept-url-scheme">scheme</a> 不为 "<code>https</code>"，则抛出
                            <code
                                class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑨">TypeError</a></code>。
                        </p>
                </ol>
            <li data-md>
                <p>如 <var>data</var>["<code
                        class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-paymententitieslogos" id="ref-for-dom-securepaymentconfirmationrequest-paymententitieslogos①">paymentEntitiesLogos</a></code>"]
                    有值且非空：</p>
                <ol>
                    <li data-md>
                        <p>对每个 <var>logo</var> 取
                            <var>data</var>["<code
                                class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-paymententitieslogos" id="ref-for-dom-securepaymentconfirmationrequest-paymententitieslogos②">paymentEntitiesLogos</a></code>"]
                            数组中：
                        </p>
                        <ol>
                            <li data-md>
                                <p>如 <var>logo</var>["<code
                                        class="idl"><a data-link-type="idl" href="#dom-paymententitylogo-url" id="ref-for-dom-paymententitylogo-url">url</a></code>"]
                                    为空，则抛出
                                    <code
                                        class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①⓪">TypeError</a></code>。
                                </p>
                            <li data-md>
                                <p>对 <var>logo</var>["<code
                                        class="idl"><a data-link-type="idl" href="#dom-paymententitylogo-url" id="ref-for-dom-paymententitylogo-url①">url</a></code>"]
                                    运行网址解析器。
                                    若解析失败，则抛出 <code
                                        class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①①">TypeError</a></code>。
                                </p>
                            <li data-md>
                                <p>如 <var>logo</var>["<code
                                        class="idl"><a data-link-type="idl" href="#dom-paymententitylogo-label" id="ref-for-dom-paymententitylogo-label">label</a></code>"]
                                    为空，则抛出
                                    <code
                                        class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①②">TypeError</a></code>。
                                </p>
                        </ol>
                </ol>
            <li data-md>
                <p>如 <var>data</var>["<code
                        class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-locale" id="ref-for-dom-securepaymentconfirmationrequest-locale①">locale</a></code>"]
                    <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists"
                        id="ref-for-map-exists">存在</a>且
                    <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-is-empty"
                        id="ref-for-list-is-empty">非空</a>
                </p>
                <ol>
                    <li data-md>
                        <p>对 <var>data</var>["<code
                                class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-locale" id="ref-for-dom-securepaymentconfirmationrequest-locale②">locale</a></code>"]
                            中每个 <var>tag</var>：
                        </p>
                        <ol>
                            <li data-md>
                                <p>如 <var>tag</var> 不是格式良好的 <a data-link-type="biblio" href="#biblio-bcp47"
                                        title="Tags for Identifying Languages">[BCP47]</a> 语言标签，则抛出
                                    <code
                                        class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①③">TypeError</a></code>。
                                </p>
                        </ol>
                </ol>
                <p class="note" role="note"><span class="marker">注意：</span><code
                        class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-locale" id="ref-for-dom-securepaymentconfirmationrequest-locale③">locale</a></code>
                    与特定输入项绑定的语言或方向元数据不同，代表调用方请求的本地化体验而非对某个字符串值的断言。更多讨论见 <a href="#sctn-i18n-considerations">§ 14
                        国际化考虑</a>。</p>
        </ol>
        <h3 class="heading settled" data-level="4.8" id="sctn-steps-to-check-if-a-payment-can-be-made"><span
                class="secno">4.8. </span><span class="content">检查能否进行支付的步骤</span><a class="self-link"
                href="#sctn-steps-to-check-if-a-payment-can-be-made"></a></h3>
        <p>对于本支付方式，输入 <code
                class="idl"><a data-link-type="idl" href="#dictdef-securepaymentconfirmationrequest" id="ref-for-dictdef-securepaymentconfirmationrequest④">SecurePaymentConfirmationRequest</a></code>
            <var>data</var> 所需的 <a data-link-type="dfn"
                href="https://w3c.github.io/payment-request/#dfn-steps-to-check-if-a-payment-can-be-made"
                id="ref-for-dfn-steps-to-check-if-a-payment-can-be-made">检查能否进行支付的步骤</a>如下：
        </p>
        <details class="wpt-tests-block" dir="ltr" lang="en">
            <summary>测试</summary>
            <ul class="wpt-tests-list">
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/secure-payment-confirmation/constructor.https.html"
                        title="secure-payment-confirmation/constructor.https.html">constructor.https.html</a> <a
                        class="wpt-live"
                        href="https://wpt.live/secure-payment-confirmation/constructor.https.html"><small>(在线测试)</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/secure-payment-confirmation/constructor.https.html"><small>(源码)</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/secure-payment-confirmation/authentication-invalid-icon.https.html"
                        title="secure-payment-confirmation/authentication-invalid-icon.https.html">authentication-invalid-icon.https.html</a>
                    <a class="wpt-live"
                        href="https://wpt.live/secure-payment-confirmation/authentication-invalid-icon.https.html"><small>(在线测试)</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/secure-payment-confirmation/authentication-invalid-icon.https.html"><small>(源码)</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/secure-payment-confirmation/authentication-invalid-payment-entity-logo.https.html"
                        title="secure-payment-confirmation/authentication-invalid-payment-entity-logo.https.html">authentication-invalid-payment-entity-logo.https.html</a>
                    <a class="wpt-live"
                        href="https://wpt.live/secure-payment-confirmation/authentication-invalid-payment-entity-logo.https.html"><small>(在线测试)</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/secure-payment-confirmation/authentication-invalid-payment-entity-logo.https.html"><small>(源码)</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/secure-payment-confirmation/authentication-icon-data-url.https.html"
                        title="secure-payment-confirmation/authentication-icon-data-url.https.html">authentication-icon-data-url.https.html</a>
                    <a class="wpt-live"
                        href="https://wpt.live/secure-payment-confirmation/authentication-icon-data-url.https.html"><small>(在线测试)</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/secure-payment-confirmation/authentication-icon-data-url.https.html"><small>(源码)</small></a>
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/secure-payment-confirmation/authentication-rejected.https.html"
                        title="secure-payment-confirmation/authentication-rejected.https.html">authentication-rejected.https.html</a>
                    <a class="wpt-live"
                        href="https://wpt.live/secure-payment-confirmation/authentication-rejected.https.html"><small>(在线测试)</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/secure-payment-confirmation/authentication-rejected.https.html"><small>(源码)</small></a>
            </ul>
        </details>
        <ol>
            <li data-md>
                <p>如 <var>data</var>["<code
                        class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-payeeorigin" id="ref-for-dom-securepaymentconfirmationrequest-payeeorigin⑥">payeeOrigin</a></code>"]
                    有值：</p>
                <ol>
                    <li data-md>
                        <p>让 <var>parsedURL</var> 为对
                            <var>data</var>["<code
                                class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-payeeorigin" id="ref-for-dom-securepaymentconfirmationrequest-payeeorigin⑦">payeeOrigin</a></code>"]
                            运行<a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-parser"
                                id="ref-for-concept-url-parser①">网址解析器</a>的结果。
                        </p>
                    <li data-md>
                        <p>断言 <var>parsedURL</var> 不是失败。</p>
                    <li data-md>
                        <p>断言 <var>parsedURL</var> 的 <a data-link-type="dfn"
                                href="https://url.spec.whatwg.org/#concept-url-scheme"
                                id="ref-for-concept-url-scheme①">scheme</a> 为 "<code>https</code>"。</p>
                </ol>
                <p class="note" role="note"><span class="marker">注意：</span>这些前置条件已在 <a
                        href="#sctn-steps-to-validate-payment-method-data">验证支付方式数据的步骤</a>进行过检查。
                </p>
                <ol>
                    <li data-md>
                        <p>将 <var>data</var>["<code
                                class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-payeeorigin" id="ref-for-dom-securepaymentconfirmationrequest-payeeorigin⑧">payeeOrigin</a></code>"]
                            设置为
                            <var>parsedURL</var> 的 <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/browsers.html#ascii-serialisation-of-an-origin"
                                id="ref-for-ascii-serialisation-of-an-origin">origin序列化</a>值。
                        </p>
                </ol>
            <li data-md>
                <p><a data-link-type="dfn" href="https://www.w3.org/TR/image-resource/#dfn-fetching-an-image-resource"
                        id="ref-for-dfn-fetching-an-image-resource">拉取icon对应的图片资源</a>，传递 «["<code
                        class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/image-resource/#dom-imageresource-src" id="ref-for-dom-imageresource-src">src</a></code>"
                    →
                    <var>data</var>["<code
                        class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-instrument" id="ref-for-dom-securepaymentconfirmationrequest-instrument⑤">instrument</a></code>"]["<code
                        class="idl"><a data-link-type="idl" href="#dom-paymentcredentialinstrument-icon" id="ref-for-dom-paymentcredentialinstrument-icon②">icon</a></code>"]]»
                    作为 <em>image</em>；若拉取失败：
                </p>
                <ol>
                    <li data-md>
                        <p>如 <var>data</var>["<code
                                class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-instrument" id="ref-for-dom-securepaymentconfirmationrequest-instrument⑥">instrument</a></code>"]["<code
                                class="idl"><a data-link-type="idl" href="#dom-paymentcredentialinstrument-iconmustbeshown" id="ref-for-dom-paymentcredentialinstrument-iconmustbeshown">iconMustBeShown</a></code>"]
                            为 <code>true</code>，则返回 <code>false</code>。</p>
                    <li data-md>
                        <p>否则，将 <var>data</var>["<code
                                class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-instrument" id="ref-for-dom-securepaymentconfirmationrequest-instrument⑦">instrument</a></code>"]["<code
                                class="idl"><a data-link-type="idl" href="#dom-paymentcredentialinstrument-icon" id="ref-for-dom-paymentcredentialinstrument-icon③">icon</a></code>"]
                            设为空字符串。</p>
                        <p class="note" role="note"><span class="marker">注意：</span>这样可让RP知晓指定icon未能展示，因输出<code
                                class="idl"><a data-link-type="idl" href="#dom-collectedclientadditionalpaymentdata-instrument" id="ref-for-dom-collectedclientadditionalpaymentdata-instrument">instrument</a></code>
                            的 icon 字段为空。</p>
                </ol>
                <p class="note" role="note"><span class="marker">注意：</span>图片资源必须无论凭证是否匹配均要拉取，以防推测凭证是否存在。</p>
            <li data-md>
                <p>用户代理可选地从
                    <var>data</var>["<code
                        class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-paymententitieslogos" id="ref-for-dom-securepaymentconfirmationrequest-paymententitieslogos③">paymentEntitiesLogos</a></code>"]
                    从后往前移除条目。
                </p>
                <p class="note" role="note"><span class="marker">注意：</span>这样允许用户代理控制展示logo数量，并保持logo优先级排序的语义。</p>
            <li data-md>
                <p>对 <var>data</var>["<code
                        class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-paymententitieslogos" id="ref-for-dom-securepaymentconfirmationrequest-paymententitieslogos④">paymentEntitiesLogos</a></code>"]
                    中每个 <var>logo</var>：</p>
                <ol>
                    <li data-md>
                        <p><a data-link-type="dfn"
                                href="https://www.w3.org/TR/image-resource/#dfn-fetching-an-image-resource"
                                id="ref-for-dfn-fetching-an-image-resource①">拉取<var>logo</var>的图片资源</a>，传递 «["<code
                                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/image-resource/#dom-imageresource-src" id="ref-for-dom-imageresource-src①">src</a></code>"
                            → <var>logo</var>["<code
                                class="idl"><a data-link-type="idl" href="#dom-paymententitylogo-url" id="ref-for-dom-paymententitylogo-url②">url</a></code>"]]»
                            作为 <em>image</em>，并解码结果。
                        </p>
                    <li data-md>
                        <p>如拉取或解码失败，将 <var>logo</var>["<code
                                class="idl"><a data-link-type="idl" href="#dom-paymententitylogo-url" id="ref-for-dom-paymententitylogo-url③">url</a></code>"]
                            设为空字符串。</p>
                        <p class="note" role="note"><span class="marker">注意：</span>这样让RP知晓指定logo未能展示，因输出<code
                                class="idl"><a data-link-type="idl" href="#dom-collectedclientadditionalpaymentdata-paymententitieslogos" id="ref-for-dom-collectedclientadditionalpaymentdata-paymententitieslogos">paymentEntitiesLogos</a></code>
                            的对应logo条目的 url 字段为空。</p>
                </ol>
                <p class="note" role="note"><span class="marker">注意：</span>Logo图片必须无论凭证是否匹配均要拉取，以防推测凭证是否存在。</p>
            <li data-md>
                <p>对 <var>data</var>["<code
                        class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-credentialids" id="ref-for-dom-securepaymentconfirmationrequest-credentialids③">credentialIds</a></code>"]
                    中每个 <var>id</var>：</p>
                <ol>
                    <li data-md>
                        <p>运行<a data-link-type="dfn"
                                href="#steps-to-silently-determine-if-a-credential-is-available-for-the-current-device"
                                id="ref-for-steps-to-silently-determine-if-a-credential-is-available-for-the-current-device">静默判断凭证是否可用于当前设备的步骤</a>，传递
                            <var>data</var>["<code
                                class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-rpid" id="ref-for-dom-securepaymentconfirmationrequest-rpid②">rpId</a></code>"]
                            和 <var>id</var>。
                            如结果为 <code>false</code>，则从
                            <var>data</var>["<code
                                class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-credentialids" id="ref-for-dom-securepaymentconfirmationrequest-credentialids④">credentialIds</a></code>"]
                            移除 <var>id</var>。
                        </p>
                    <li data-md>
                        <p>如 <var>data</var>["<code
                                class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-rpid" id="ref-for-dom-securepaymentconfirmationrequest-rpid③">rpId</a></code>"]
                            不等于 <var>request</var> 的<a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin"
                                id="ref-for-concept-settings-object-origin">origin</a>，
                            则运行<a data-link-type="dfn"
                                href="#steps-to-silently-determine-if-an-spc-credential-is-third-party-enabled"
                                id="ref-for-steps-to-silently-determine-if-an-spc-credential-is-third-party-enabled">静默判断SPC凭证是否已启用第三方使用步骤</a>，传递
                            <var>data</var>["<code
                                class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-rpid" id="ref-for-dom-securepaymentconfirmationrequest-rpid④">rpId</a></code>"]
                            和 <var>id</var>。如结果为 <code>false</code>，则从
                            <var>data</var>["<code
                                class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-credentialids" id="ref-for-dom-securepaymentconfirmationrequest-credentialids⑤">credentialIds</a></code>"]
                            移除 <var>id</var>。
                        </p>
                </ol>
            <li data-md>
                <p>返回 <code>true</code>。</p>
        </ol>
        <h3 class="heading settled" data-level="4.9" id="sctn-transaction-confirmation-ux"><span class="secno">4.9.
            </span><span class="content">显示交易确认界面</span><a class="self-link"
                href="#sctn-transaction-confirmation-ux"></a></h3>
        <p>当调用 <code
                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#dom-paymentrequest-show" id="ref-for-dom-paymentrequest-show①">PaymentRequest.show()</a></code>
            并选中 <a data-link-type="dfn" href="#secure-payment-confirmation-payment-handler"
                id="ref-for-secure-payment-confirmation-payment-handler①">安全支付确认支付处理器</a>（该算法第19-24步），用户代理必须向用户展示界面，允许用户选择是否及如何继续。
        </p>
        <h4 class="heading settled" data-level="4.9.1" id="sctn-information-presented"><span class="secno">4.9.1.
            </span><span class="content">向用户展示的信息</span><a class="self-link" href="#sctn-information-presented"></a>
        </h4>
        <p>为避免限制用户代理实现选择，本规范不强制要求特定界面。但为使 <a data-link-type="dfn" href="https://w3c.github.io/webauthn/#relying-party"
                id="ref-for-relying-party①⑤">依赖方</a>能信任 <code
                class="idl"><a data-link-type="idl" href="#dictdef-collectedclientpaymentdata" id="ref-for-dictdef-collectedclientpaymentdata">CollectedClientPaymentData</a></code>
            所含信息，
            用户代理必须确保下列信息被传递给用户，并收集到用户对认证的同意：</p>
        <ul>
            <li data-md>
                <p>若有，则展示 <code
                        class="idl"><a data-link-type="idl" href="#dom-collectedclientadditionalpaymentdata-payeename" id="ref-for-dom-collectedclientadditionalpaymentdata-payeename">payeeName</a></code>。
                </p>
            <li data-md>
                <p>若有，则展示 <code
                        class="idl"><a data-link-type="idl" href="#dom-collectedclientadditionalpaymentdata-payeeorigin" id="ref-for-dom-collectedclientadditionalpaymentdata-payeeorigin">payeeOrigin</a></code>。
                </p>
            <li data-md>
                <p>展示 <code
                        class="idl"><a data-link-type="idl" href="#dom-collectedclientadditionalpaymentdata-total" id="ref-for-dom-collectedclientadditionalpaymentdata-total">total</a></code>，
                    即该交易的 <code
                        class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#dom-paymentcurrencyamount-currency" id="ref-for-dom-paymentcurrencyamount-currency">currency</a></code>
                    和 <code
                        class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#dom-paymentcurrencyamount-value" id="ref-for-dom-paymentcurrencyamount-value">value</a></code>。
                </p>
            <li data-md>
                <p>展示支付工具 <code
                        class="idl"><a data-link-type="idl" href="#dom-collectedclientadditionalpaymentdata-instrument" id="ref-for-dom-collectedclientadditionalpaymentdata-instrument①">instrument</a></code>
                    详情，包括 displayName、details 及 icon。
                    如资源无法获取或解码，则用户代理可以不显示icon或显示通用支付工具图标。</p>
                <p class="note" role="note"><span class="marker">注意：</span>如指定icon无法获取或解码，则此处 <code
                        class="idl"><a data-link-type="idl" href="#dom-paymentcredentialinstrument-iconmustbeshown" id="ref-for-dom-paymentcredentialinstrument-iconmustbeshown①">iconMustBeShown</a></code>
                    必须为 <code>false</code>，
                    否则 <a href="#sctn-steps-to-check-if-a-payment-can-be-made">检查能否进行支付的步骤</a>此前就会失败。</p>
            <li data-md>
                <p>若非空，展示 <code
                        class="idl"><a data-link-type="idl" href="#dom-paymententitylogo-url" id="ref-for-dom-paymententitylogo-url④">url</a></code>
                    对应的 logo，
                    来自 <code
                        class="idl"><a data-link-type="idl" href="#dom-collectedclientadditionalpaymentdata-paymententitieslogos" id="ref-for-dom-collectedclientadditionalpaymentdata-paymententitieslogos①">paymentEntitiesLogos</a></code>。
                </p>
                <ul>
                    <li data-md>
                        <p>用户代理不必显示每个 <code
                                class="idl"><a data-link-type="idl" href="#dom-paymententitylogo-label" id="ref-for-dom-paymententitylogo-label①">label</a></code>，但应在无障碍功能用到。所有
                            <code
                                class="idl"><a data-link-type="idl" href="#dom-paymententitylogo-label" id="ref-for-dom-paymententitylogo-label②">label</a></code>
                            仍会被包括且加入签名用于 <code
                                class="idl"><a data-link-type="idl" href="#dictdef-collectedclientadditionalpaymentdata" id="ref-for-dictdef-collectedclientadditionalpaymentdata①">CollectedClientAdditionalPaymentData</a></code>。
                        </p>
                </ul>
        </ul>
        <p>用户代理可利用 <code
                class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-locale" id="ref-for-dom-securepaymentconfirmationrequest-locale④">locale</a></code>
            信息（如有）来展示与网站一致的本地化语言和格式界面。</p>
        <p>如 <code
                class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-showoptout" id="ref-for-dom-securepaymentconfirmationrequest-showoptout①">showOptOut</a></code>
            为 <code>true</code>，用户代理必须让用户能选择对该 <code
                class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-rpid" id="ref-for-dom-securepaymentconfirmationrequest-rpid⑤">依赖方</a></code>
            退出流程。</p>
        <details class="wpt-tests-block" dir="ltr" lang="en">
            <summary>测试</summary>
            <ul class="wpt-tests-list">
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/secure-payment-confirmation/authentication-optout.https.html"
                        title="secure-payment-confirmation/authentication-optout.https.html">authentication-optout.https.html</a>
                    <a class="wpt-live"
                        href="https://wpt.live/secure-payment-confirmation/authentication-optout.https.html"><small>(在线测试)</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/secure-payment-confirmation/authentication-optout.https.html"><small>(源码)</small></a>
            </ul>
        </details>
        <h4 class="heading settled" data-level="4.9.2" id="sctn-transaction-confirmation-outcome"><span
                class="secno">4.9.2. </span><span class="content">交易确认界面结果</span><a class="self-link"
                href="#sctn-transaction-confirmation-outcome"></a></h4>
        <p>用户代理必须允许用户指明是否及如何继续的选项：</p>
        <dl class="switch">
            <dt data-md>用户希望继续付款，并用 <a data-link-type="dfn" href="#spc-credential"
                    id="ref-for-spc-credential③">SPC凭证</a> 认证
            <dd data-md>
                <p>对交互中的 <code
                        class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#dom-paymentrequest" id="ref-for-dom-paymentrequest④">PaymentRequest</a></code>
                    执行 <a data-link-type="dfn"
                        href="https://w3c.github.io/payment-request/#dfn-user-accepts-the-payment-request-algorithm"
                        id="ref-for-dfn-user-accepts-the-payment-request-algorithm">用户接受支付请求算法</a>。</p>
            <dt data-md>用户希望继续付款，但因 <var>data</var>["<code
                    class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-credentialids" id="ref-for-dom-securepaymentconfirmationrequest-credentialids⑥">credentialIds</a></code>"]
                为空无法使用 SPC凭证，或者主动选择不用 SPC凭证
            <dd data-md>
                <p>运行下列步骤：</p>
                <ol>
                    <li data-md>
                        <p>设 <var>data</var>["<code
                                class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-credentialids" id="ref-for-dom-securepaymentconfirmationrequest-credentialids⑦">credentialIds</a></code>"]
                            为空列表。</p>
                        <p class="note" role="note"><span class="marker">注意：</span>此举将使 <code
                                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#dom-paymentrequest-show" id="ref-for-dom-paymentrequest-show②">PaymentRequest.show()</a></code>
                            被拒绝（NotAllowedError DOMException），参考 <a
                                href="#sctn-steps-to-respond-to-a-payment-request">响应支付请求的步骤</a>。</p>
                    <li data-md>
                        <p>对交互中的 <code
                                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#dom-paymentrequest" id="ref-for-dom-paymentrequest⑤">PaymentRequest</a></code>
                            执行 <a data-link-type="dfn"
                                href="https://w3c.github.io/payment-request/#dfn-user-accepts-the-payment-request-algorithm"
                                id="ref-for-dfn-user-accepts-the-payment-request-algorithm①">用户接受支付请求算法</a>。</p>
                </ol>
                <details class="wpt-tests-block" dir="ltr" lang="en">
                    <summary>测试</summary>
                    <ul class="wpt-tests-list">
                        <li class="wpt-test"><a class="wpt-name"
                                href="https://wpt.fyi/results/secure-payment-confirmation/authentication-auth-another-way.https.html"
                                title="secure-payment-confirmation/authentication-auth-another-way.https.html">authentication-auth-another-way.https.html</a>
                            <a class="wpt-live"
                                href="https://wpt.live/secure-payment-confirmation/authentication-auth-another-way.https.html"><small>(在线测试)</small></a>
                            <a class="wpt-source"
                                href="https://github.com/web-platform-tests/wpt/blob/master/secure-payment-confirmation/authentication-auth-another-way.https.html"><small>(源码)</small></a>
                    </ul>
                </details>
            <dt data-md>用户不希望继续付款
            <dd data-md>
                <p>对交互中的 <code
                        class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#dom-paymentrequest" id="ref-for-dom-paymentrequest⑥">PaymentRequest</a></code>
                    执行 <a data-link-type="dfn"
                        href="https://w3c.github.io/payment-request/#dfn-user-aborts-the-payment-request"
                        id="ref-for-dfn-user-aborts-the-payment-request">用户终止支付请求算法</a>。</p>
                <p class="note" role="note"><span class="marker">注意：</span>此举会使 <code
                        class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#dom-paymentrequest-show" id="ref-for-dom-paymentrequest-show③">PaymentRequest.show()</a></code>
                    被拒绝（AbortError DOMException）。</p>
            <dt data-md>用户希望对该 <code
                    class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-rpid" id="ref-for-dom-securepaymentconfirmationrequest-rpid⑥">依赖方</a></code>
                选择退出
            <dd data-md>
                <p>用 "<code
                        class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#optouterror" id="ref-for-optouterror">OptOutError</a></code>"
                    DOMException 拒绝 <code
                        class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#dom-paymentrequest-show" id="ref-for-dom-paymentrequest-show④">PaymentRequest.show()</a></code>，参见
                    <a href="#sctn-user-opt-out">§ 12.6 用户选择退出</a>。
                </p>
                <p class="note" role="note"><span class="marker">注意：</span>只有当 <code
                        class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-showoptout" id="ref-for-dom-securepaymentconfirmationrequest-showoptout②">showOptOut</a></code>
                    设为 <code>true</code> 时用户才能看到该选项。</p>
        </dl>
        <h4 class="heading settled" data-level="4.9.3" id="sctn-transaction-ux-test-automation"><span
                class="secno">4.9.3. </span><span class="content">测试自动化支持</span><a class="self-link"
                href="#sctn-transaction-ux-test-automation"></a></h4>
        <p>如 <a data-link-type="dfn" href="#current-transaction-automation-mode"
                id="ref-for-current-transaction-automation-mode">当前交易自动化模式</a>不是
            "<code>none</code>"，用户代理应首先验证自身处于自动化上下文（见 <a
                href="https://www.w3.org/TR/webdriver2/#security">WebDriver安全注意事项</a>）。随后，用户代理应跳过上述信息传递及用户同意收集，根据 <a
                data-link-type="dfn" href="#current-transaction-automation-mode"
                id="ref-for-current-transaction-automation-mode①">当前交易自动化模式</a>值执行如下：</p>
        <dl>
            <dt data-md>"<code>autoAccept</code>"
            <dd data-md>
                <p>视为用户已看见交易详情并接受。</p>
            <dt data-md>"<code>autoChooseToAuthAnotherWay</code>"
            <dd data-md>
                <p>视为用户已看见交易详情并接受，但明确表示不希望用 SPC凭证认证。如 <var>data</var>["<code
                        class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-credentialids" id="ref-for-dom-securepaymentconfirmationrequest-credentialids⑧">credentialIds</a></code>"]
                    为空，则等同于 "autoAccept"。</p>
            <dt data-md>"<code>autoReject</code>"
            <dd data-md>
                <p>视为用户已看见交易详情并拒绝（即不继续交易）。</p>
            <dt data-md>"<code>autoOptOut</code>"
            <dd data-md>
                <p>视为用户已看见交易详情并选择退出。</p>
        </dl>
        <h3 class="heading settled" data-level="4.10" id="sctn-steps-to-respond-to-a-payment-request"><span
                class="secno">4.10. </span><span class="content">响应支付请求的步骤</span><a class="self-link"
                href="#sctn-steps-to-respond-to-a-payment-request"></a></h3>
        <p>对于本支付方式，给定 <code
                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#dom-paymentrequest" id="ref-for-dom-paymentrequest⑦">PaymentRequest</a></code>
            <var>request</var> 和 <code
                class="idl"><a data-link-type="idl" href="#dictdef-securepaymentconfirmationrequest" id="ref-for-dictdef-securepaymentconfirmationrequest⑤">SecurePaymentConfirmationRequest</a></code>
            <var>data</var>，其 <a data-link-type="dfn"
                href="https://w3c.github.io/payment-request/#dfn-steps-to-respond-to-a-payment-request"
                id="ref-for-dfn-steps-to-respond-to-a-payment-request">响应支付请求的步骤</a>为：
        </p>
        <p class="note" role="note"><span class="marker">注意：</span>仅当用户接受<a
                href="#sctn-transaction-confirmation-ux">交易确认界面</a>时才会执行本步骤，由 <a data-link-type="dfn"
                href="https://w3c.github.io/payment-request/#dfn-user-accepts-the-payment-request-algorithm"
                id="ref-for-dfn-user-accepts-the-payment-request-algorithm②">用户接受支付请求算法</a>调用。</p>
        <ol>
            <li data-md>
                <p>如 <var>data</var>["<code
                        class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-credentialids" id="ref-for-dom-securepaymentconfirmationrequest-credentialids⑨">credentialIds</a></code>"]
                    为空，
                    抛出 "<code
                        class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#notallowederror" id="ref-for-notallowederror①">NotAllowedError</a></code>"
                    DOMException。
                    这在用户无法或不愿用SPC认证时保护认证流程隐私。</p>
                <p class="note" role="note"><span class="marker">注意：</span>此处抛出异常，会导致 <code
                        class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#dom-paymentrequest-show" id="ref-for-dom-paymentrequest-show⑤">PaymentRequest.show()</a></code>
                    被拒绝（NotAllowedError DOMException）。</p>
            <li data-md>
                <p>令 <var>topOrigin</var> 为 <var>request</var> 的<a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-top-level-origin"
                        id="ref-for-concept-environment-top-level-origin">顶级origin</a>。</p>
            <li data-md>
                <p>令 <var>payment</var> 为新 <code
                        class="idl"><a data-link-type="idl" href="#dictdef-authenticationextensionspaymentinputs" id="ref-for-dictdef-authenticationextensionspaymentinputs">AuthenticationExtensionsPaymentInputs</a></code>
                    字典，字段为：</p>
                <dl>
                    <dt data-md><code
                            class="idl"><a data-link-type="idl" href="#dom-authenticationextensionspaymentinputs-ispayment" id="ref-for-dom-authenticationextensionspaymentinputs-ispayment">isPayment</a></code>
                    <dd data-md>
                        <p>值为 <code>true</code>。</p>
                    <dt data-md><code
                            class="idl"><a data-link-type="idl" href="#dom-authenticationextensionspaymentinputs-rpid" id="ref-for-dom-authenticationextensionspaymentinputs-rpid">rpId</a></code>
                    <dd data-md>
                        <p><var>data</var>["<code
                                class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-rpid" id="ref-for-dom-securepaymentconfirmationrequest-rpid⑦">rpId</a></code>"]
                        </p>
                    <dt data-md><code
                            class="idl"><a data-link-type="idl" href="#dom-authenticationextensionspaymentinputs-toporigin" id="ref-for-dom-authenticationextensionspaymentinputs-toporigin">topOrigin</a></code>
                    <dd data-md>
                        <p><var>topOrigin</var></p>
                    <dt data-md><code
                            class="idl"><a data-link-type="idl" href="#dom-authenticationextensionspaymentinputs-payeename" id="ref-for-dom-authenticationextensionspaymentinputs-payeename">payeeName</a></code>
                    <dd data-md>
                        <p><var>data</var>["<code
                                class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-payeename" id="ref-for-dom-securepaymentconfirmationrequest-payeename④">payeeName</a></code>"]
                            如有则用，否则省略。</p>
                    <dt data-md><code
                            class="idl"><a data-link-type="idl" href="#dom-authenticationextensionspaymentinputs-payeeorigin" id="ref-for-dom-authenticationextensionspaymentinputs-payeeorigin">payeeOrigin</a></code>
                    <dd data-md>
                        <p><var>data</var>["<code
                                class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-payeeorigin" id="ref-for-dom-securepaymentconfirmationrequest-payeeorigin⑨">payeeOrigin</a></code>"]
                            如有则用，否则省略。</p>
                    <dt data-md><code
                            class="idl"><a data-link-type="idl" href="#dom-authenticationextensionspaymentinputs-paymententitieslogos" id="ref-for-dom-authenticationextensionspaymentinputs-paymententitieslogos">paymentEntitiesLogos</a></code>
                    <dd data-md>
                        <p><var>data</var>["<code
                                class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-paymententitieslogos" id="ref-for-dom-securepaymentconfirmationrequest-paymententitieslogos⑤">paymentEntitiesLogos</a></code>"]
                            如非空则用，否则省略。</p>
                        <p class="issue" id="issue-69f26477"><a class="self-link" href="#issue-69f26477"></a> 当前规范仅支持每个
                            PaymentEntityLogo 一个URL，直接复制并签名数据结构足以显示所展示内容。未来规范或对每个 PaymentEntityLogo
                            支持多个URL（例如暗黑模式）。如有，将需指明实际向用户展示的URL。</p>
                    <dt data-md><code
                            class="idl"><a data-link-type="idl" href="#dom-authenticationextensionspaymentinputs-total" id="ref-for-dom-authenticationextensionspaymentinputs-total">total</a></code>
                    <dd data-md>
                        <p><var>request</var>.<a data-link-type="dfn"
                                href="https://w3c.github.io/payment-request/#dfn-details"
                                id="ref-for-dfn-details">[[details]]</a>["<code
                                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#dom-paymentdetailsinit-total" id="ref-for-dom-paymentdetailsinit-total">total</a></code>"]
                        </p>
                    <dt data-md><code
                            class="idl"><a data-link-type="idl" href="#dom-authenticationextensionspaymentinputs-instrument" id="ref-for-dom-authenticationextensionspaymentinputs-instrument">instrument</a></code>
                    <dd data-md>
                        <p><var>data</var>["<code
                                class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-instrument" id="ref-for-dom-securepaymentconfirmationrequest-instrument⑧">instrument</a></code>"]
                        </p>
                    <dt data-md><code
                            class="idl"><a data-link-type="idl" href="#dom-authenticationextensionspaymentinputs-browserboundpubkeycredparams" id="ref-for-dom-authenticationextensionspaymentinputs-browserboundpubkeycredparams">browserBoundPubKeyCredParams</a></code>
                    <dd data-md>
                        <p><var>data</var>["<code
                                class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-browserboundpubkeycredparams" id="ref-for-dom-securepaymentconfirmationrequest-browserboundpubkeycredparams①">browserBoundPubKeyCredParams</a></code>"]
                        </p>
                </dl>
            <li data-md>
                <p>令 <var>extensions</var> 为新 <code
                        class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dictdef-authenticationextensionsclientinputs" id="ref-for-dictdef-authenticationextensionsclientinputs①">AuthenticationExtensionsClientInputs</a></code>
                    字典，<code
                        class="idl"><a data-link-type="idl" href="#dom-authenticationextensionsclientinputs-payment" id="ref-for-dom-authenticationextensionsclientinputs-payment①">payment</a></code>
                    成员为 <var>payment</var>，其它成员从 <var>data</var>["<code
                        class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-extensions" id="ref-for-dom-securepaymentconfirmationrequest-extensions①">extensions</a></code>"]
                    设置。</p>
            <li data-md>
                <p>令 <var>publicKeyOpts</var> 为新 <code
                        class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dictdef-publickeycredentialrequestoptions" id="ref-for-dictdef-publickeycredentialrequestoptions">PublicKeyCredentialRequestOptions</a></code>
                    字典，其字段为：</p>
                <dl>
                    <dt data-md><code
                            class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialrequestoptions-challenge" id="ref-for-dom-publickeycredentialrequestoptions-challenge①">challenge</a></code>
                    <dd data-md>
                        <p><var>data</var>["<code
                                class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-challenge" id="ref-for-dom-securepaymentconfirmationrequest-challenge②">challenge</a></code>"]
                        </p>
                    <dt data-md><code
                            class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialrequestoptions-timeout" id="ref-for-dom-publickeycredentialrequestoptions-timeout">timeout</a></code>
                    <dd data-md>
                        <p><var>data</var>["<code
                                class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-timeout" id="ref-for-dom-securepaymentconfirmationrequest-timeout①">timeout</a></code>"]
                        </p>
                    <dt data-md><code
                            class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialrequestoptions-rpid" id="ref-for-dom-publickeycredentialrequestoptions-rpid">rpId</a></code>
                    <dd data-md>
                        <p><var>data</var>["<code
                                class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-rpid" id="ref-for-dom-securepaymentconfirmationrequest-rpid⑧">rpId</a></code>"]
                        </p>
                    <dt data-md><code
                            class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialrequestoptions-userverification" id="ref-for-dom-publickeycredentialrequestoptions-userverification">userVerification</a></code>
                    <dd data-md>
                        <p><code
                                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dom-userverificationrequirement-required" id="ref-for-dom-userverificationrequirement-required">required</a></code>
                        </p>
                    <dt data-md><code
                            class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialrequestoptions-extensions" id="ref-for-dom-publickeycredentialrequestoptions-extensions">extensions</a></code>
                    <dd data-md>
                        <p><var>extensions</var></p>
                </dl>
                <p class="note" role="note"><span
                        class="marker">注意：</span>本算法将"userVerification"设为"required"，是因Chrome初始实现仅支持该值。后续限制可能变化。工作组欢迎提出支持其它值（如"preferred"或"discouraged"）的使用场景。
                </p>
            <li data-md>
                <p>对 <var>data</var>["<code
                        class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-credentialids" id="ref-for-dom-securepaymentconfirmationrequest-credentialids①⓪">credentialIds</a></code>"]
                    中每个 <var>id</var>：</p>
                <ol>
                    <li data-md>
                        <p>令 <var>descriptor</var> 为新 <code
                                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dictdef-publickeycredentialdescriptor" id="ref-for-dictdef-publickeycredentialdescriptor">PublicKeyCredentialDescriptor</a></code>
                            字典，其字段为：</p>
                        <dl>
                            <dt data-md><code
                                    class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialdescriptor-type" id="ref-for-dom-publickeycredentialdescriptor-type">type</a></code>
                            <dd data-md>
                                <p><code
                                        class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialtype-public-key" id="ref-for-dom-publickeycredentialtype-public-key">public-key</a></code>
                                </p>
                            <dt data-md><code
                                    class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialdescriptor-id" id="ref-for-dom-publickeycredentialdescriptor-id">id</a></code>
                            <dd data-md>
                                <p><var>id</var></p>
                            <dt data-md><code
                                    class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialdescriptor-transports" id="ref-for-dom-publickeycredentialdescriptor-transports">transports</a></code>
                            <dd data-md>
                                <p>长度为1的序列，唯一成员为 <code
                                        class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dom-authenticatortransport-internal" id="ref-for-dom-authenticatortransport-internal">internal</a></code>。
                                </p>
                        </dl>
                    <li data-md>
                        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append"
                                id="ref-for-list-append">将</a> <var>descriptor</var> 添加到 <var>publicKeyOpts</var>["<code
                                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialrequestoptions-allowcredentials" id="ref-for-dom-publickeycredentialrequestoptions-allowcredentials">allowCredentials</a></code>"]。
                        </p>
                </ol>
            <li data-md>
                <p>令 <var>outputCredential</var> 为执行 <a data-link-type="dfn"
                        href="https://w3c.github.io/webappsec-credential-management/#abstract-opdef-request-a-credential"
                        id="ref-for-abstract-opdef-request-a-credential">请求凭证</a>算法（传递«["<code
                        class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dom-credentialrequestoptions-publickey" id="ref-for-dom-credentialrequestoptions-publickey">publicKey</a></code>"
                    → <var>publicKeyOpts</var>]»）的结果。</p>
                <p class="note" role="note"><span class="marker">注意：</span>Chrome最初实现不会将 data.credentialIds
                    全部传入请求凭证算法，仅传入已匹配当前设备的一个。</p>
                <p class="note" role="note"><span class="marker">注意：</span>此操作会触发 <a data-link-type="biblio"
                        href="#biblio-webauthn-3"
                        title="Web Authentication: An API for accessing Public Key Credentials - Level 3">[webauthn-3]</a>
                    的 <a href="https://www.w3.org/TR/webauthn-3/#sctn-getAssertion">Get</a> 行为。</p>
            <li data-md>
                <p>返回 <var>outputCredential</var>。</p>
        </ol>
        <h2 class="heading settled" data-level="5" id="sctn-payment-extension-registration"><span class="secno">5.
            </span><span class="content">WebAuthn 扩展 - "<code>payment</code>"</span><a class="self-link"
                href="#sctn-payment-extension-registration"></a></h2>
        <p>此<a data-link-type="dfn" href="https://w3c.github.io/webauthn/#client-extension"
                id="ref-for-client-extension">客户端</a> <a data-link-type="dfn"
                href="https://w3c.github.io/webauthn/#registration-extension"
                id="ref-for-registration-extension">注册扩展</a> 与
            <a data-link-type="dfn" href="https://w3c.github.io/webauthn/#authentication-extension"
                id="ref-for-authentication-extension">认证扩展</a>分别表示凭证是用于创建或用于安全支付确认。
        </p>
        <p>对于注册，此扩展允许浏览器识别和缓存安全支付确认凭证ID。对于认证，此扩展允许第三方代表
            <a data-link-type="dfn" href="https://w3c.github.io/webauthn/#relying-party"
                id="ref-for-relying-party①⑦">依赖方</a>执行认证流程，并将交易信息加入签名密文中。
        </p>
        <p>注意，网站不应直接用此扩展调用
            <code
                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/credential-management-1/#dom-credentialscontainer-get" id="ref-for-dom-credentialscontainer-get">navigator.credentials.get()</a></code>；
            认证时扩展仅能通过
            <code
                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#dom-paymentrequest" id="ref-for-dom-paymentrequest⑧">PaymentRequest</a></code>
            并指定 "<a data-link-type="dfn" href="#secure-payment-confirmation"
                id="ref-for-secure-payment-confirmation②">secure-payment-confirmation</a>" 支付方式访问。
        </p>
        <p class="note" role="note"><span class="marker">注意：</span> 过去，<code>payment</code> 扩展允许跨域iframe创建凭证。而现在从 <a
                href="https://github.com/w3c/webauthn/pull/1801">WebAuthn PR
                #1801</a> 开始，WebAuthn 默认允许该行为。</p>
        <details class="wpt-tests-block" dir="ltr" lang="en">
            <summary>测试</summary>
            <p>此测试并不直接对应规范某一行，而是检验是否可以在跨域 iframe 内触发认证。规范未明确禁止即可实现此行为。</p>
            <ul class="wpt-tests-list">
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/secure-payment-confirmation/authentication-in-iframe.sub.https.html"
                        title="secure-payment-confirmation/authentication-in-iframe.sub.https.html">authentication-in-iframe.sub.https.html</a>
                    <a class="wpt-live"
                        href="https://wpt.live/secure-payment-confirmation/authentication-in-iframe.sub.https.html"><small>(在线测试)</small></a>
                    <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/secure-payment-confirmation/authentication-in-iframe.sub.https.html"><small>(源码)</small></a>
            </ul>
            <hr>
        </details>
        <dl>
            <dt data-md>扩展标识符
            <dd data-md>
                <p><code>payment</code></p>
            <dt data-md>操作适用范围
            <dd data-md>
                <p><a data-link-type="dfn" href="https://w3c.github.io/webauthn/#registration-extension"
                        id="ref-for-registration-extension①">注册</a> 和 <a data-link-type="dfn"
                        href="https://w3c.github.io/webauthn/#authentication-extension"
                        id="ref-for-authentication-extension①">认证</a></p>
            <dt data-md>客户端扩展输入
            <dd data-md>
                <pre class="def highlight idl"><c- b>partial</c-> <c- b>dictionary</c-> <a class="idl-code" data-link-type="dictionary" href="https://www.w3.org/TR/webauthn-3/#dictdef-authenticationextensionsclientinputs" id="ref-for-dictdef-authenticationextensionsclientinputs②"><c- g>AuthenticationExtensionsClientInputs</c-></a> {
  <a data-link-type="idl-name" href="#dictdef-authenticationextensionspaymentinputs" id="ref-for-dictdef-authenticationextensionspaymentinputs①"><c- n>AuthenticationExtensionsPaymentInputs</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="AuthenticationExtensionsClientInputs" data-dfn-type="dict-member" data-export data-type="AuthenticationExtensionsPaymentInputs" id="dom-authenticationextensionsclientinputs-payment"><code><c- g>payment</c-></code></dfn>;
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-authenticationextensionspaymentinputs"><code><c- g>AuthenticationExtensionsPaymentInputs</c-></code></dfn> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean①"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="AuthenticationExtensionsPaymentInputs" data-dfn-type="dict-member" data-export data-type="boolean" id="dom-authenticationextensionspaymentinputs-ispayment"><code><c- g>isPayment</c-></code></dfn>;
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence④"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="https://www.w3.org/TR/webauthn-3/#dictdef-publickeycredentialparameters" id="ref-for-dictdef-publickeycredentialparameters①"><c- n>PublicKeyCredentialParameters</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="AuthenticationExtensionsPaymentInputs" data-dfn-type="dict-member" data-export data-type="sequence<PublicKeyCredentialParameters>" id="dom-authenticationextensionspaymentinputs-browserboundpubkeycredparams"><code><c- g>browserBoundPubKeyCredParams</c-></code></dfn>;

  // 仅用于认证。
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString④"><c- b>USVString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="AuthenticationExtensionsPaymentInputs" data-dfn-type="dict-member" data-export data-type="USVString" id="dom-authenticationextensionspaymentinputs-rpid"><code><c- g>rpId</c-></code></dfn>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString⑤"><c- b>USVString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="AuthenticationExtensionsPaymentInputs" data-dfn-type="dict-member" data-export data-type="USVString" id="dom-authenticationextensionspaymentinputs-toporigin"><code><c- g>topOrigin</c-></code></dfn>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString⑥"><c- b>USVString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="AuthenticationExtensionsPaymentInputs" data-dfn-type="dict-member" data-export data-type="USVString" id="dom-authenticationextensionspaymentinputs-payeename"><code><c- g>payeeName</c-></code></dfn>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString⑦"><c- b>USVString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="AuthenticationExtensionsPaymentInputs" data-dfn-type="dict-member" data-export data-type="USVString" id="dom-authenticationextensionspaymentinputs-payeeorigin"><code><c- g>payeeOrigin</c-></code></dfn>;
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence⑤"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#dictdef-paymententitylogo" id="ref-for-dictdef-paymententitylogo⑤"><c- n>PaymentEntityLogo</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="AuthenticationExtensionsPaymentInputs" data-dfn-type="dict-member" data-export data-type="sequence<PaymentEntityLogo>" id="dom-authenticationextensionspaymentinputs-paymententitieslogos"><code><c- g>paymentEntitiesLogos</c-></code></dfn>;
  <a data-link-type="idl-name" href="https://www.w3.org/TR/payment-request/#dom-paymentcurrencyamount" id="ref-for-dom-paymentcurrencyamount"><c- n>PaymentCurrencyAmount</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="AuthenticationExtensionsPaymentInputs" data-dfn-type="dict-member" data-export data-type="PaymentCurrencyAmount" id="dom-authenticationextensionspaymentinputs-total"><code><c- g>total</c-></code></dfn>;
  <a data-link-type="idl-name" href="#dictdef-paymentcredentialinstrument" id="ref-for-dictdef-paymentcredentialinstrument①"><c- n>PaymentCredentialInstrument</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="AuthenticationExtensionsPaymentInputs" data-dfn-type="dict-member" data-export data-type="PaymentCredentialInstrument" id="dom-authenticationextensionspaymentinputs-instrument"><code><c- g>instrument</c-></code></dfn>;
};
</pre>
                <dl class="domintro">
                    <dt data-md><code
                            class="idl"><a data-link-type="idl" href="#dom-authenticationextensionspaymentinputs-ispayment" id="ref-for-dom-authenticationextensionspaymentinputs-ispayment①">isPayment</a></code>
                    <dd data-md>
                        <p>表示扩展已激活。</p>
                    <dt data-md><code
                            class="idl"><a data-link-type="idl" href="#dom-authenticationextensionspaymentinputs-rpid" id="ref-for-dom-authenticationextensionspaymentinputs-rpid①">rpId</a></code>
                    <dd data-md>
                        <p>仅在认证时使用，注册时不使用，且不应由网页开发者直接设置。</p>
                    <dt data-md><code
                            class="idl"><a data-link-type="idl" href="#dom-authenticationextensionspaymentinputs-toporigin" id="ref-for-dom-authenticationextensionspaymentinputs-toporigin①">topOrigin</a></code>
                    <dd data-md>
                        <p>仅在认证时使用，注册时不使用，且不应由网页开发者直接设置。</p>
                    <dt data-md><code
                            class="idl"><a data-link-type="idl" href="#dom-authenticationextensionspaymentinputs-payeename" id="ref-for-dom-authenticationextensionspaymentinputs-payeename①">payeeName</a></code>
                    <dd data-md>
                        <p>仅在认证时使用，注册时不使用，且不应由网页开发者直接设置。</p>
                    <dt data-md><code
                            class="idl"><a data-link-type="idl" href="#dom-authenticationextensionspaymentinputs-payeeorigin" id="ref-for-dom-authenticationextensionspaymentinputs-payeeorigin①">payeeOrigin</a></code>
                    <dd data-md>
                        <p>仅在认证时使用，注册时不使用，且不应由网页开发者直接设置。</p>
                    <dt data-md><code
                            class="idl"><a data-link-type="idl" href="#dom-authenticationextensionspaymentinputs-paymententitieslogos" id="ref-for-dom-authenticationextensionspaymentinputs-paymententitieslogos①">paymentEntitiesLogos</a></code>
                    <dd data-md>
                        <p>仅在认证时使用，注册时不使用，且不应由网页开发者直接设置。</p>
                    <dt data-md><code
                            class="idl"><a data-link-type="idl" href="#dom-authenticationextensionspaymentinputs-total" id="ref-for-dom-authenticationextensionspaymentinputs-total①">total</a></code>
                    <dd data-md>
                        <p>仅在认证时使用，注册时不使用，且不应由网页开发者直接设置。</p>
                    <dt data-md><code
                            class="idl"><a data-link-type="idl" href="#dom-authenticationextensionspaymentinputs-instrument" id="ref-for-dom-authenticationextensionspaymentinputs-instrument①">instrument</a></code>
                    <dd data-md>
                        <p>仅在认证时使用，注册时不使用，且不应由网页开发者直接设置。</p>
                    <dt data-md><code
                            class="idl"><a data-link-type="idl" href="#dom-authenticationextensionspaymentinputs-browserboundpubkeycredparams" id="ref-for-dom-authenticationextensionspaymentinputs-browserboundpubkeycredparams①">browserBoundPubKeyCredParams</a></code>
                    <dd data-md>
                        <p>用于限制浏览器绑定密钥加密算法类型的允许列表。认证时网页开发者应设置
                            <code
                                class="idl"><a data-link-type="idl" href="#dictdef-securepaymentconfirmationrequest" id="ref-for-dictdef-securepaymentconfirmationrequest⑥">SecurePaymentConfirmationRequest</a></code>.<code
                                class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-browserboundpubkeycredparams" id="ref-for-dom-securepaymentconfirmationrequest-browserboundpubkeycredparams②">browserBoundPubKeyCredParams</a></code>
                            。
                        </p>
                        <p class="note" role="note"><span class="marker">注意：</span> 当本成员未设置时，默认值为
                            <code
                                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dictdef-publickeycredentialcreationoptions" id="ref-for-dictdef-publickeycredentialcreationoptions">PublicKeyCredentialCreationOptions</a></code>.<code
                                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialcreationoptions-pubkeycredparams" id="ref-for-dom-publickeycredentialcreationoptions-pubkeycredparams">pubKeyCredParams</a></code>。
                        </p>
                </dl>
            <dt data-md><dfn class="dfn-paneled" data-dfn-type="dfn" data-export
                    id="client-extension-processing-registration">客户端扩展处理（<a data-link-type="dfn"
                        href="https://w3c.github.io/webauthn/#registration-extension"
                        id="ref-for-registration-extension②">注册</a>）</dfn>
            <dd data-md>
                <p>创建新凭证时（<a href="https://www.w3.org/TR/webauthn-3/#sctn-createCredential">createCredential</a>）：</p>
                <ol>
                    <li data-md>
                        <p>第3步后插入以下步骤：</p>
                        <ul>
                            <li data-md>
                                <p>如果下列任一条件成立：</p>
                                <ul>
                                    <li data-md>
                                        <p><em>pkOptions</em>["<code
                                                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialcreationoptions-authenticatorselection" id="ref-for-dom-publickeycredentialcreationoptions-authenticatorselection">authenticatorSelection</a></code>"]["<code
                                                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dom-authenticatorselectioncriteria-authenticatorattachment" id="ref-for-dom-authenticatorselectioncriteria-authenticatorattachment">authenticatorAttachment</a></code>"]
                                            不为 "<code
                                                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dom-authenticatorattachment-platform" id="ref-for-dom-authenticatorattachment-platform">platform</a></code>"。
                                        </p>
                                    <li data-md>
                                        <p><em>pkOptions</em>["<code
                                                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialcreationoptions-authenticatorselection" id="ref-for-dom-publickeycredentialcreationoptions-authenticatorselection①">authenticatorSelection</a></code>"]["<code
                                                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dom-authenticatorselectioncriteria-residentkey" id="ref-for-dom-authenticatorselectioncriteria-residentkey">residentKey</a></code>"]
                                            不为 "<code
                                                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dom-residentkeyrequirement-required" id="ref-for-dom-residentkeyrequirement-required">required</a></code>"
                                            或 "<code
                                                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dom-residentkeyrequirement-preferred" id="ref-for-dom-residentkeyrequirement-preferred">preferred</a></code>"。
                                        </p>
                                    <li data-md>
                                        <p><em>pkOptions</em>["<code
                                                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialcreationoptions-authenticatorselection" id="ref-for-dom-publickeycredentialcreationoptions-authenticatorselection②">authenticatorSelection</a></code>"]["<code
                                                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dom-authenticatorselectioncriteria-userverification" id="ref-for-dom-authenticatorselectioncriteria-userverification">userVerification</a></code>"]
                                            不为 "<code
                                                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dom-userverificationrequirement-required" id="ref-for-dom-userverificationrequirement-required①">required</a></code>"。
                                        </p>
                                </ul>
                                <p>则抛出 <code
                                        class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①④">TypeError</a></code>。
                                </p>
                                <p class="note" role="note"><span
                                        class="marker">注意：</span>这些值目前为硬编码，源自Chrome初始实现。当前限制可能变化，欢迎提出支持其他值的场景。</p>
                                <details class="wpt-tests-block" dir="ltr" lang="en">
                                    <summary>测试</summary>
                                    <ul class="wpt-tests-list">
                                        <li class="wpt-test"><a class="wpt-name"
                                                href="https://wpt.fyi/results/secure-payment-confirmation/enrollment.https.html"
                                                title="secure-payment-confirmation/enrollment.https.html">enrollment.https.html</a>
                                            <a class="wpt-live"
                                                href="https://wpt.live/secure-payment-confirmation/enrollment.https.html"><small>(在线测试)</small></a>
                                            <a class="wpt-source"
                                                href="https://github.com/web-platform-tests/wpt/blob/master/secure-payment-confirmation/enrollment.https.html"><small>(源码)</small></a>
                                    </ul>
                                </details>
                        </ul>
                    <li data-md>
                        <p>第13步前（创建 <code
                                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dictdef-collectedclientdata" id="ref-for-dictdef-collectedclientdata①">CollectedClientData</a></code>
                            前）。
                        </p>
                        <details class="wpt-tests-block" dir="ltr" lang="en">
                            <summary>测试</summary>
                            <ul class="wpt-tests-list">
                                <li class="wpt-test"><a class="wpt-name"
                                        href="https://wpt.fyi/results/secure-payment-confirmation/authentication-accepted-bbk-created.https.html"
                                        title="secure-payment-confirmation/authentication-accepted-bbk-created.https.html">authentication-accepted-bbk-created.https.html</a>
                                    <a class="wpt-live"
                                        href="https://wpt.live/secure-payment-confirmation/authentication-accepted-bbk-created.https.html"><small>(在线测试)</small></a>
                                    <a class="wpt-source"
                                        href="https://github.com/web-platform-tests/wpt/blob/master/secure-payment-confirmation/authentication-accepted-bbk-created.https.html"><small>(源码)</small></a>
                                <li class="wpt-test"><a class="wpt-name"
                                        href="https://wpt.fyi/results/secure-payment-confirmation/authentication-accepted-bbk-per-passkey.https.html"
                                        title="secure-payment-confirmation/authentication-accepted-bbk-per-passkey.https.html">authentication-accepted-bbk-per-passkey.https.html</a>
                                    <a class="wpt-live"
                                        href="https://wpt.live/secure-payment-confirmation/authentication-accepted-bbk-per-passkey.https.html"><small>(在线测试)</small></a>
                                    <a class="wpt-source"
                                        href="https://github.com/web-platform-tests/wpt/blob/master/secure-payment-confirmation/authentication-accepted-bbk-per-passkey.https.html"><small>(源码)</small></a>
                                <li class="wpt-test"><a class="wpt-name"
                                        href="https://wpt.fyi/results/secure-payment-confirmation/authentication-accepted-bbk-reused.https.html"
                                        title="secure-payment-confirmation/authentication-accepted-bbk-reused.https.html">authentication-accepted-bbk-reused.https.html</a>
                                    <a class="wpt-live"
                                        href="https://wpt.live/secure-payment-confirmation/authentication-accepted-bbk-reused.https.html"><small>(在线测试)</small></a>
                                    <a class="wpt-source"
                                        href="https://github.com/web-platform-tests/wpt/blob/master/secure-payment-confirmation/authentication-accepted-bbk-reused.https.html"><small>(源码)</small></a>
                            </ul>
                        </details>
                        <ol>
                            <li data-md>
                                <p>令 <var>bbk_allowed_algorithms</var> 为 <code
                                        class="idl"><a data-link-type="idl" href="#dom-authenticationextensionspaymentinputs-browserboundpubkeycredparams" id="ref-for-dom-authenticationextensionspaymentinputs-browserboundpubkeycredparams②">browserBoundPubKeyCredParams</a></code>。
                                </p>
                            <li data-md>
                                <p>如
                                    <code
                                        class="idl"><a data-link-type="idl" href="#dom-authenticationextensionspaymentinputs-browserboundpubkeycredparams" id="ref-for-dom-authenticationextensionspaymentinputs-browserboundpubkeycredparams③">browserBoundPubKeyCredParams</a></code>
                                    <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-empty"
                                        id="ref-for-list-empty">为空</a>，令 <var>bbk_allowed_algorithms</var> 为
                                    <code
                                        class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dictdef-publickeycredentialcreationoptions" id="ref-for-dictdef-publickeycredentialcreationoptions①">PublicKeyCredentialCreationOptions</a></code>.<code
                                        class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialcreationoptions-pubkeycredparams" id="ref-for-dom-publickeycredentialcreationoptions-pubkeycredparams①">pubKeyCredParams</a></code>。
                                </p>
                            <li data-md>
                                <p>令 (<var>bbk_and_algorithm</var>, <var>bbk_id</var>) 为用
                                    <var>bbk_allowed_algorithms</var> <a data-link-type="dfn" href="#create-a-key-pair"
                                        id="ref-for-create-a-key-pair">创建密钥对</a>的结果。
                                </p>
                            <li data-md>
                                <p>如 (<var>bbk_and_algorithm</var>, <var>bbk_id</var>) 为 null，跳过与
                                    <var>bbk_and_algorithm</var> 和 <var>bbk_public_key</var> 有关的步骤。
                                </p>
                            <li data-md>
                                <p>令 <var>bbk_public_key</var> 为用 <var>bbk_and_algorithm</var> <a data-link-type="dfn"
                                        href="#get-a-browser-bound-public-key"
                                        id="ref-for-get-a-browser-bound-public-key">获取浏览器绑定公钥</a>的结果。</p>
                        </ol>
                    <li data-md>
                        <p>第13步，将创建 <code
                                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dictdef-collectedclientdata" id="ref-for-dictdef-collectedclientdata②">CollectedClientData</a></code>
                            换成
                            <code
                                class="idl"><a data-link-type="idl" href="#dictdef-collectedclientpaymentdata" id="ref-for-dictdef-collectedclientpaymentdata①">CollectedClientPaymentData</a></code>，包含以下字段：
                        </p>
                        <dl>
                            <dt data-md><code
                                    class="idl"><a data-link-type="idl" href="#dom-collectedclientpaymentdata-payment" id="ref-for-dom-collectedclientpaymentdata-payment">payment</a></code>
                            <dd data-md>
                                <p>初始化为 <code
                                        class="idl"><a data-link-type="idl" href="#dictdef-collectedclientadditionalpaymentregistrationdata" id="ref-for-dictdef-collectedclientadditionalpaymentregistrationdata①">CollectedClientAdditionalPaymentRegistrationData</a></code>，字段有：
                                </p>
                                <dl>
                                    <dt data-md><code
                                            class="idl"><a data-link-type="idl" href="#dom-collectedclientadditionalpaymentregistrationdata-browserboundpublickey" id="ref-for-dom-collectedclientadditionalpaymentregistrationdata-browserboundpublickey①">browserBoundPublicKey</a></code>
                                    <dd data-md>
                                        <p><var>bbk_public_key</var>，COSE_Key 编码的 <a data-link-type="dfn"
                                                href="#key-pair-public-key" id="ref-for-key-pair-public-key②">公钥</a>。
                                        </p>
                                </dl>
                            <dt data-md>其它字段
                            <dd data-md>
                                <p>其余字段按原13步操作。</p>
                        </dl>
                    <li data-md>
                        <p>在 <a data-link-type="dfn" href="https://w3c.github.io/webauthn/#CreateCred-async-loop"
                                id="ref-for-CreateCred-async-loop">第22步</a>，判断“有认证器指示成功”时返回 <var>pubKeyCred</var> 前：</p>
                        <ol>
                            <li data-md>
                                <p>用 <var>bbk_id</var> 与 <var>pubKeyCred</var>.<code
                                        class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dom-publickeycredential-identifier-slot" id="ref-for-dom-publickeycredential-identifier-slot">[[identifier]]</a></code>
                                    <a data-link-type="dfn" href="#bind-a-key-pair"
                                        id="ref-for-bind-a-key-pair">绑定密钥对</a>。如失败，返回 <code
                                        class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#unknownerror" id="ref-for-unknownerror">UnknownError</a></code>。
                                </p>
                            <li data-md>
                                <p>令 <var>payment_outputs</var> 为 <code
                                        class="idl"><a data-link-type="idl" href="#dictdef-authenticationextensionspaymentoutputs" id="ref-for-dictdef-authenticationextensionspaymentoutputs①">AuthenticationExtensionsPaymentOutputs</a></code>，包含：
                                </p>
                                <dl>
                                    <dt data-md><code
                                            class="idl"><a data-link-type="idl" href="#dom-authenticationextensionspaymentoutputs-browserboundsignature" id="ref-for-dom-authenticationextensionspaymentoutputs-browserboundsignature">browserBoundSignature</a></code>
                                    <dd data-md>
                                        <p>初始化为 <code
                                                class="idl"><a data-link-type="idl" href="#dictdef-browserboundsignature" id="ref-for-dictdef-browserboundsignature①">BrowserBoundSignature</a></code>，字段有：
                                        </p>
                                        <dl>
                                            <dt data-md><code
                                                    class="idl"><a data-link-type="idl" href="#dom-browserboundsignature-signature" id="ref-for-dom-browserboundsignature-signature①">signature</a></code>
                                            <dd data-md>
                                                <p>用 <var>bbk_and_algorithm</var> 与 create credential 第14步的
                                                    <var>clientDataJson</var> <a data-link-type="dfn"
                                                        href="#generate-a-browser-bound-signature"
                                                        id="ref-for-generate-a-browser-bound-signature">生成浏览器绑定签名</a>
                                                    的结果。
                                                </p>
                                        </dl>
                                </dl>
                            <li data-md>
                                <p>
                                    <code
                                        class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dom-publickeycredential-clientextensionsresults-slot" id="ref-for-dom-publickeycredential-clientextensionsresults-slot">[[clientExtensionsResults]]</a></code>[<a
                                        href="#sctn-payment-extension-registration">"payment"</a>] 设为
                                    <var>payment_outputs</var>。
                                </p>
                        </ol>
                </ol>
            <dt data-md><dfn class="dfn-paneled" data-dfn-type="dfn" data-export
                    id="client-extension-processing-authentication">客户端扩展处理（<a data-link-type="dfn"
                        href="https://w3c.github.io/webauthn/#authentication-extension"
                        id="ref-for-authentication-extension②">认证</a>）</dfn>
            <dd data-md>
                <p>当用 <code
                        class="idl"><a data-link-type="idl" href="#dictdef-authenticationextensionspaymentinputs" id="ref-for-dictdef-authenticationextensionspaymentinputs②">AuthenticationExtensionsPaymentInputs</a></code>
                    <var>extension_inputs</var> <a href="https://www.w3.org/TR/webauthn-3/#sctn-getAssertion">断言</a>时：
                </p>
                <ol>
                    <li data-md>
                        <p>如不在 "<a data-link-type="dfn" href="#secure-payment-confirmation"
                                id="ref-for-secure-payment-confirmation③">secure-payment-confirmation</a>" 支付处理器内，返回
                            "<code
                                class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#notallowederror" id="ref-for-notallowederror③">NotAllowedError</a></code>"
                            DOMException。
                        </p>
                        <details class="wpt-tests-block" dir="ltr" lang="en">
                            <summary>测试</summary>
                            <ul class="wpt-tests-list">
                                <li class="wpt-test"><a class="wpt-name"
                                        href="https://wpt.fyi/results/secure-payment-confirmation/authentication-cannot-bypass-spc.https.html"
                                        title="secure-payment-confirmation/authentication-cannot-bypass-spc.https.html">authentication-cannot-bypass-spc.https.html</a>
                                    <a class="wpt-live"
                                        href="https://wpt.live/secure-payment-confirmation/authentication-cannot-bypass-spc.https.html"><small>(在线测试)</small></a>
                                    <a class="wpt-source"
                                        href="https://github.com/web-platform-tests/wpt/blob/master/secure-payment-confirmation/authentication-cannot-bypass-spc.https.html"><small>(源码)</small></a>
                            </ul>
                        </details>
                        <p class="note" role="note"><span class="marker">注意：</span>防止网站不通过交易界面绕过SPC能力。</p>
                    <li data-md>
                        <p>在 <code
                                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dom-publickeycredential-discoverfromexternalsource-slot" id="ref-for-dom-publickeycredential-discoverfromexternalsource-slot">[[DiscoverFromExternalSource]](origin, options, sameOriginWithAncestors)</a></code>
                            期间：</p>
                        <ol>
                            <li data-md>
                                <p>跳过6.1步（比较 options.rpId 与 effectiveDomain）。</p>
                        </ol>
                        <details class="wpt-tests-block" dir="ltr" lang="en">
                            <summary>测试</summary>
                            <ul class="wpt-tests-list">
                                <li class="wpt-test"><a class="wpt-name"
                                        href="https://wpt.fyi/results/secure-payment-confirmation/authentication-cross-origin.sub.https.html"
                                        title="secure-payment-confirmation/authentication-cross-origin.sub.https.html">authentication-cross-origin.sub.https.html</a>
                                    <a class="wpt-live"
                                        href="https://wpt.live/secure-payment-confirmation/authentication-cross-origin.sub.https.html"><small>(在线测试)</small></a>
                                    <a class="wpt-source"
                                        href="https://github.com/web-platform-tests/wpt/blob/master/secure-payment-confirmation/authentication-cross-origin.sub.https.html"><small>(源码)</small></a>
                            </ul>
                        </details>
                        <p class="note" role="note"><span class="marker">注意：</span>由此可支持跨域认证流程，详见
                            <a href="#sctn-use-case-merchant-authentication">§ 1.1.2 商户对认证的控制</a>。
                        </p>
                        <ol>
                            <li data-md>
                                <p>第10步前（创建 <code
                                        class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dictdef-collectedclientdata" id="ref-for-dictdef-collectedclientdata③">CollectedClientData</a></code>
                                    前）。</p>
                                <ol>
                                    <li data-md>
                                        <p>令 <var>allowed_algorithms</var> 为
                                            <code
                                                class="idl"><a data-link-type="idl" href="#dictdef-securepaymentconfirmationrequest" id="ref-for-dictdef-securepaymentconfirmationrequest⑦">SecurePaymentConfirmationRequest</a></code>.<code
                                                class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-browserboundpubkeycredparams" id="ref-for-dom-securepaymentconfirmationrequest-browserboundpubkeycredparams③">browserBoundPubKeyCredParams</a></code>。
                                        </p>
                                    <li data-md>
                                        <p>令 <var>bbk_and_algorithm</var> 为用 <var>credential_id</var> 与
                                            <var>allowed_algorithms</var> <a data-link-type="dfn"
                                                href="#get-or-create-a-browser-bound-key"
                                                id="ref-for-get-or-create-a-browser-bound-key">获取或创建浏览器绑定密钥</a>的结果。
                                        </p>
                                </ol>
                            <li data-md>
                                <p>第10步，将创建 <code
                                        class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dictdef-collectedclientdata" id="ref-for-dictdef-collectedclientdata④">CollectedClientData</a></code>
                                    换成 <code
                                        class="idl"><a data-link-type="idl" href="#dictdef-collectedclientpaymentdata" id="ref-for-dictdef-collectedclientpaymentdata②">CollectedClientPaymentData</a></code>，包含：
                                </p>
                                <ol>
                                    <li data-md>
                                        <p><code
                                                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dom-collectedclientdata-type" id="ref-for-dom-collectedclientdata-type">type</a></code>
                                            设为 "<code>payment.get</code>"</p>
                                    <li data-md>
                                        <p><code
                                                class="idl"><a data-link-type="idl" href="#dom-collectedclientpaymentdata-payment" id="ref-for-dom-collectedclientpaymentdata-payment①">payment</a></code>
                                            设为新 <code
                                                class="idl"><a data-link-type="idl" href="#dictdef-collectedclientadditionalpaymentdata" id="ref-for-dictdef-collectedclientadditionalpaymentdata②">CollectedClientAdditionalPaymentData</a></code>，字段有：
                                        </p>
                                        <dl>
                                            <dt data-md><code
                                                    class="idl"><a data-link-type="idl" href="#dom-collectedclientadditionalpaymentdata-rpid" id="ref-for-dom-collectedclientadditionalpaymentdata-rpid">rpId</a></code>
                                            <dd data-md>
                                                <p><var>extension_inputs</var>["<code
                                                        class="idl"><a data-link-type="idl" href="#dom-authenticationextensionspaymentinputs-rpid" id="ref-for-dom-authenticationextensionspaymentinputs-rpid②">rpId</a></code>"]
                                                </p>
                                            <dt data-md><code
                                                    class="idl"><a data-link-type="idl" href="#dom-collectedclientadditionalpaymentdata-toporigin" id="ref-for-dom-collectedclientadditionalpaymentdata-toporigin">topOrigin</a></code>
                                            <dd data-md>
                                                <p><var>extension_inputs</var>["<code
                                                        class="idl"><a data-link-type="idl" href="#dom-authenticationextensionspaymentinputs-toporigin" id="ref-for-dom-authenticationextensionspaymentinputs-toporigin②">topOrigin</a></code>"]
                                                </p>
                                            <dt data-md><code
                                                    class="idl"><a data-link-type="idl" href="#dom-collectedclientadditionalpaymentdata-payeename" id="ref-for-dom-collectedclientadditionalpaymentdata-payeename①">payeeName</a></code>
                                            <dd data-md>
                                                <p><var>extension_inputs</var>["<code
                                                        class="idl"><a data-link-type="idl" href="#dom-authenticationextensionspaymentinputs-payeename" id="ref-for-dom-authenticationextensionspaymentinputs-payeename②">payeeName</a></code>"]，有则用，否则省略。
                                                </p>
                                            <dt data-md><code
                                                    class="idl"><a data-link-type="idl" href="#dom-collectedclientadditionalpaymentdata-payeeorigin" id="ref-for-dom-collectedclientadditionalpaymentdata-payeeorigin①">payeeOrigin</a></code>
                                            <dd data-md>
                                                <p><var>extension_inputs</var>["<code
                                                        class="idl"><a data-link-type="idl" href="#dom-authenticationextensionspaymentinputs-payeeorigin" id="ref-for-dom-authenticationextensionspaymentinputs-payeeorigin②">payeeOrigin</a></code>"]，有则用，否则省略。
                                                </p>
                                            <dt data-md><code
                                                    class="idl"><a data-link-type="idl" href="#dom-collectedclientadditionalpaymentdata-paymententitieslogos" id="ref-for-dom-collectedclientadditionalpaymentdata-paymententitieslogos②">paymentEntitiesLogos</a></code>
                                            <dd data-md>
                                                <p><var>extension_inputs</var>["<code
                                                        class="idl"><a data-link-type="idl" href="#dom-authenticationextensionspaymentinputs-paymententitieslogos" id="ref-for-dom-authenticationextensionspaymentinputs-paymententitieslogos②">paymentEntitiesLogos</a></code>"]，有则用，否则省略。
                                                </p>
                                            <dt data-md><code
                                                    class="idl"><a data-link-type="idl" href="#dom-collectedclientadditionalpaymentdata-total" id="ref-for-dom-collectedclientadditionalpaymentdata-total①">total</a></code>
                                            <dd data-md>
                                                <p><var>extension_inputs</var>["<code
                                                        class="idl"><a data-link-type="idl" href="#dom-authenticationextensionspaymentinputs-total" id="ref-for-dom-authenticationextensionspaymentinputs-total②">total</a></code>"]
                                                </p>
                                            <dt data-md><code
                                                    class="idl"><a data-link-type="idl" href="#dom-collectedclientadditionalpaymentdata-instrument" id="ref-for-dom-collectedclientadditionalpaymentdata-instrument②">instrument</a></code>
                                            <dd data-md>
                                                <p><var>extension_inputs</var>["<code
                                                        class="idl"><a data-link-type="idl" href="#dom-authenticationextensionspaymentinputs-instrument" id="ref-for-dom-authenticationextensionspaymentinputs-instrument②">instrument</a></code>"]
                                                </p>
                                            <dt data-md><code
                                                    class="idl"><a data-link-type="idl" href="#dom-collectedclientadditionalpaymentdata-browserboundpublickey" id="ref-for-dom-collectedclientadditionalpaymentdata-browserboundpublickey②">browserBoundPublicKey</a></code>
                                            <dd data-md>
                                                <p>如 <var>bbk_and_algorithm</var> 非 null，则用 <var>bbk_and_algorithm</var>
                                                    <a data-link-type="dfn" href="#get-a-browser-bound-public-key"
                                                        id="ref-for-get-a-browser-bound-public-key①">获取浏览器绑定公钥</a>结果。否则不设置。
                                                </p>
                                        </dl>
                                    <li data-md>
                                        <p>其余字段按原10步设置。</p>
                                </ol>
                                <details class="wpt-tests-block" dir="ltr" lang="en">
                                    <summary>测试</summary>
                                    <ul class="wpt-tests-list">
                                        <li class="wpt-test"><a class="wpt-name"
                                                href="https://wpt.fyi/results/secure-payment-confirmation/authentication-accepted.https.html"
                                                title="secure-payment-confirmation/authentication-accepted.https.html">authentication-accepted.https.html</a>
                                            <a class="wpt-live"
                                                href="https://wpt.live/secure-payment-confirmation/authentication-accepted.https.html"><small>(在线测试)</small></a>
                                            <a class="wpt-source"
                                                href="https://github.com/web-platform-tests/wpt/blob/master/secure-payment-confirmation/authentication-accepted.https.html"><small>(源码)</small></a>
                                    </ul>
                                </details>
                            <li data-md>
                                <p>“有认证器指示成功”时，在第2步设置 <code
                                        class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dom-publickeycredential-clientextensionsresults-slot" id="ref-for-dom-publickeycredential-clientextensionsresults-slot①">[[clientExtensionsResults]]</a></code>：
                                </p>
                                <ol>
                                    <li data-md>
                                        <p>令 <var>payment_outputs</var> 为 <code
                                                class="idl"><a data-link-type="idl" href="#dictdef-authenticationextensionspaymentoutputs" id="ref-for-dictdef-authenticationextensionspaymentoutputs②">AuthenticationExtensionsPaymentOutputs</a></code>，字段有：
                                        </p>
                                        <dl>
                                            <dt data-md><code
                                                    class="idl"><a data-link-type="idl" href="#dom-authenticationextensionspaymentoutputs-browserboundsignature" id="ref-for-dom-authenticationextensionspaymentoutputs-browserboundsignature①">browserBoundSignature</a></code>
                                            <dd data-md>
                                                <p>如 <var>bbk_and_algorithm</var> 非 null，则初始化 <code
                                                        class="idl"><a data-link-type="idl" href="#dictdef-browserboundsignature" id="ref-for-dictdef-browserboundsignature②">BrowserBoundSignature</a></code>，字段有：
                                                </p>
                                                <dl>
                                                    <dt data-md><code
                                                            class="idl"><a data-link-type="idl" href="#dom-browserboundsignature-signature" id="ref-for-dom-browserboundsignature-signature②">signature</a></code>
                                                    <dd data-md>
                                                        <p>用 <var>bbk_and_algorithm</var> 与 create credential 第14步的
                                                            <var>clientDataJson</var> <a data-link-type="dfn"
                                                                href="#generate-a-browser-bound-signature"
                                                                id="ref-for-generate-a-browser-bound-signature①">生成浏览器绑定签名</a>
                                                            的结果。
                                                        </p>
                                                </dl>
                                        </dl>
                                    <li data-md>
                                        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-set"
                                                id="ref-for-map-set">设置</a>
                                            <code
                                                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dom-publickeycredential-clientextensionsresults-slot" id="ref-for-dom-publickeycredential-clientextensionsresults-slot②">[[clientExtensionsResults]]</a></code>[<a
                                                href="#sctn-payment-extension-registration">"payment"</a>] 为
                                            <var>payment_outputs</var>。
                                        </p>
                                </ol>
                                <details class="wpt-tests-block" dir="ltr" lang="en">
                                    <summary>测试</summary>
                                    <ul class="wpt-tests-list">
                                        <li class="wpt-test"><a class="wpt-name"
                                                href="https://wpt.fyi/results/secure-payment-confirmation/enrollment-bbk-per-passkey.https.html"
                                                title="secure-payment-confirmation/enrollment-bbk-per-passkey.https.html">enrollment-bbk-per-passkey.https.html</a>
                                            <a class="wpt-live"
                                                href="https://wpt.live/secure-payment-confirmation/enrollment-bbk-per-passkey.https.html"><small>(在线测试)</small></a>
                                            <a class="wpt-source"
                                                href="https://github.com/web-platform-tests/wpt/blob/master/secure-payment-confirmation/enrollment-bbk-per-passkey.https.html"><small>(源码)</small></a>
                                        <li class="wpt-test"><a class="wpt-name"
                                                href="https://wpt.fyi/results/secure-payment-confirmation/enrollment-bbk.https.html"
                                                title="secure-payment-confirmation/enrollment-bbk.https.html">enrollment-bbk.https.html</a>
                                            <a class="wpt-live"
                                                href="https://wpt.live/secure-payment-confirmation/enrollment-bbk.https.html"><small>(在线测试)</small></a>
                                            <a class="wpt-source"
                                                href="https://github.com/web-platform-tests/wpt/blob/master/secure-payment-confirmation/enrollment-bbk.https.html"><small>(源码)</small></a>
                                    </ul>
                                </details>
                        </ol>
                </ol>
            <dt data-md>客户端扩展输出
            <dd data-md>
                <pre class="def highlight idl"><c- b>partial</c-> <c- b>dictionary</c-> <a class="idl-code" data-link-type="dictionary" href="https://www.w3.org/TR/webauthn-3/#dictdef-authenticationextensionsclientoutputs" id="ref-for-dictdef-authenticationextensionsclientoutputs"><c- g>AuthenticationExtensionsClientOutputs</c-></a> {
  <a data-link-type="idl-name" href="#dictdef-authenticationextensionspaymentoutputs" id="ref-for-dictdef-authenticationextensionspaymentoutputs③"><c- n>AuthenticationExtensionsPaymentOutputs</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="AuthenticationExtensionsClientOutputs" data-dfn-type="dict-member" data-export data-type="AuthenticationExtensionsPaymentOutputs" id="dom-authenticationextensionsclientoutputs-payment"><code><c- g>payment</c-></code></dfn>;
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-authenticationextensionspaymentoutputs"><code><c- g>AuthenticationExtensionsPaymentOutputs</c-></code></dfn> {
  <a data-link-type="idl-name" href="#dictdef-browserboundsignature" id="ref-for-dictdef-browserboundsignature③"><c- n>BrowserBoundSignature</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="AuthenticationExtensionsPaymentOutputs" data-dfn-type="dict-member" data-export data-type="BrowserBoundSignature" id="dom-authenticationextensionspaymentoutputs-browserboundsignature"><code><c- g>browserBoundSignature</c-></code></dfn>;
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-browserboundsignature"><code><c- g>BrowserBoundSignature</c-></code></dfn> {
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-ArrayBuffer" id="ref-for-idl-ArrayBuffer"><c- b>ArrayBuffer</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="BrowserBoundSignature" data-dfn-type="dict-member" data-export data-type="ArrayBuffer" id="dom-browserboundsignature-signature"><code><c- g>signature</c-></code></dfn>;
};
</pre>
                <dl class="domintro">
                    <dt data-md><code
                            class="idl"><a data-link-type="idl" href="#dom-authenticationextensionspaymentoutputs-browserboundsignature" id="ref-for-dom-authenticationextensionspaymentoutputs-browserboundsignature②">browserBoundSignature</a></code>
                    <dd data-md>
                        <p>浏览器绑定签名过程的输出。</p>
                    <dt data-md><code
                            class="idl"><a data-link-type="idl" href="#dom-browserboundsignature-signature" id="ref-for-dom-browserboundsignature-signature③">signature</a></code>
                    <dd data-md>
                        <p>浏览器绑定签名流程输出。</p>
                </dl>
            <dt data-md>认证器扩展处理
            <dd data-md>
                <p>无</p>
        </dl>
        <h3 class="heading settled" data-level="5.1" id="sctn-collectedclientpaymentdata-dictionary"><span
                class="secno">5.1. </span><span class="content"><dfn class="dfn-paneled idl-code"
                    data-dfn-type="dictionary" data-export
                    id="dictdef-collectedclientpaymentdata"><code>CollectedClientPaymentData</code></dfn>
                字典</span><a class="self-link" href="#sctn-collectedclientpaymentdata-dictionary"></a></h3>
        <pre class="def highlight idl"><c- b>dictionary</c-> <a class="idl-code" data-link-type="dictionary" href="#dictdef-collectedclientpaymentdata" id="ref-for-dictdef-collectedclientpaymentdata③"><c- g>CollectedClientPaymentData</c-></a> : <a data-link-type="idl-name" href="https://www.w3.org/TR/webauthn-3/#dictdef-collectedclientdata" id="ref-for-dictdef-collectedclientdata⑤"><c- n>CollectedClientData</c-></a> {
    <c- b>required</c-> (<a data-link-type="idl-name" href="#dictdef-collectedclientadditionalpaymentdata" id="ref-for-dictdef-collectedclientadditionalpaymentdata③"><c- n>CollectedClientAdditionalPaymentData</c-></a> <c- b>or</c-> <a data-link-type="idl-name" href="#dictdef-collectedclientadditionalpaymentregistrationdata" id="ref-for-dictdef-collectedclientadditionalpaymentregistrationdata②"><c- n>CollectedClientAdditionalPaymentRegistrationData</c-></a>) <dfn class="dfn-paneled idl-code" data-dfn-for="CollectedClientPaymentData" data-dfn-type="dict-member" data-export data-type="(CollectedClientAdditionalPaymentData or CollectedClientAdditionalPaymentRegistrationData)" id="dom-collectedclientpaymentdata-payment"><code><c- g>payment</c-></code></dfn>;
};
</pre>
        <p><code
                class="idl"><a data-link-type="idl" href="#dictdef-collectedclientpaymentdata" id="ref-for-dictdef-collectedclientpaymentdata④">CollectedClientPaymentData</a></code>
            字典继承自
            <code
                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dictdef-collectedclientdata" id="ref-for-dictdef-collectedclientdata⑥">CollectedClientData</a></code>。
            包含如下额外字段：
        </p>
        <dl class="domintro">
            <dt data-md><code
                    class="idl"><a data-link-type="idl" href="#dom-collectedclientpaymentdata-payment" id="ref-for-dom-collectedclientpaymentdata-payment②">payment</a></code>
            <dd data-md>
                <p>待签名的附加支付信息。</p>
        </dl>
        <h3 class="heading settled" data-level="5.2" id="sctn-collectedclientadditionalpaymentdata-dictionary"><span
                class="secno">5.2. </span><span class="content"><dfn class="dfn-paneled idl-code"
                    data-dfn-type="dictionary" data-export
                    id="dictdef-collectedclientadditionalpaymentdata"><code>CollectedClientAdditionalPaymentData</code></dfn>
                字典</span><a class="self-link" href="#sctn-collectedclientadditionalpaymentdata-dictionary"></a>
        </h3>
        <pre class="def highlight idl"><c- b>dictionary</c-> <a class="idl-code" data-link-type="dictionary" href="#dictdef-collectedclientadditionalpaymentdata" id="ref-for-dictdef-collectedclientadditionalpaymentdata④"><c- g>CollectedClientAdditionalPaymentData</c-></a> {
    <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString⑧"><c- b>USVString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="CollectedClientAdditionalPaymentData" data-dfn-type="dict-member" data-export data-type="USVString" id="dom-collectedclientadditionalpaymentdata-rpid"><code><c- g>rpId</c-></code></dfn>;
    <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString⑨"><c- b>USVString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="CollectedClientAdditionalPaymentData" data-dfn-type="dict-member" data-export data-type="USVString" id="dom-collectedclientadditionalpaymentdata-toporigin"><code><c- g>topOrigin</c-></code></dfn>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString①⓪"><c- b>USVString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="CollectedClientAdditionalPaymentData" data-dfn-type="dict-member" data-export data-type="USVString" id="dom-collectedclientadditionalpaymentdata-payeename"><code><c- g>payeeName</c-></code></dfn>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString①①"><c- b>USVString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="CollectedClientAdditionalPaymentData" data-dfn-type="dict-member" data-export data-type="USVString" id="dom-collectedclientadditionalpaymentdata-payeeorigin"><code><c- g>payeeOrigin</c-></code></dfn>;
    <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence⑥"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#dictdef-paymententitylogo" id="ref-for-dictdef-paymententitylogo⑥"><c- n>PaymentEntityLogo</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="CollectedClientAdditionalPaymentData" data-dfn-type="dict-member" data-export data-type="sequence<PaymentEntityLogo>" id="dom-collectedclientadditionalpaymentdata-paymententitieslogos"><code><c- g>paymentEntitiesLogos</c-></code></dfn>;
    <c- b>required</c-> <a data-link-type="idl-name" href="https://www.w3.org/TR/payment-request/#dom-paymentcurrencyamount" id="ref-for-dom-paymentcurrencyamount①"><c- n>PaymentCurrencyAmount</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="CollectedClientAdditionalPaymentData" data-dfn-type="dict-member" data-export data-type="PaymentCurrencyAmount" id="dom-collectedclientadditionalpaymentdata-total"><code><c- g>total</c-></code></dfn>;
    <c- b>required</c-> <a data-link-type="idl-name" href="#dictdef-paymentcredentialinstrument" id="ref-for-dictdef-paymentcredentialinstrument②"><c- n>PaymentCredentialInstrument</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="CollectedClientAdditionalPaymentData" data-dfn-type="dict-member" data-export data-type="PaymentCredentialInstrument" id="dom-collectedclientadditionalpaymentdata-instrument"><code><c- g>instrument</c-></code></dfn>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString①②"><c- b>USVString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="CollectedClientAdditionalPaymentData" data-dfn-type="dict-member" data-export data-type="USVString" id="dom-collectedclientadditionalpaymentdata-browserboundpublickey"><code><c- g>browserBoundPublicKey</c-></code></dfn>;
};
</pre>
        <p><code
                class="idl"><a data-link-type="idl" href="#dictdef-collectedclientadditionalpaymentdata" id="ref-for-dictdef-collectedclientadditionalpaymentdata⑤">CollectedClientAdditionalPaymentData</a></code>
            字典包含如下字段：</p>
        <dl class="domintro">
            <dt data-md><code
                    class="idl"><a data-link-type="idl" href="#dom-collectedclientadditionalpaymentdata-rpid" id="ref-for-dom-collectedclientadditionalpaymentdata-rpid①">rpId</a></code>
            <dd data-md>
                <p>创建凭证的 <a data-link-type="dfn" href="https://w3c.github.io/webauthn/#relying-party"
                        id="ref-for-relying-party①⑧">依赖方</a>标识。</p>
                <p class="note" role="note"><span class="marker">注意：</span>由于历史原因，有的实现还会包含
                    <code>rp</code>。如同时存在，<code>rp</code> 和 <code>rpId</code> 必须相同。
                </p>
            <dt data-md><code
                    class="idl"><a data-link-type="idl" href="#dom-collectedclientadditionalpaymentdata-toporigin" id="ref-for-dom-collectedclientadditionalpaymentdata-toporigin①">topOrigin</a></code>
            <dd data-md>
                <p>请求签名交易详情的顶层上下文来源。</p>
            <dt data-md><code
                    class="idl"><a data-link-type="idl" href="#dom-collectedclientadditionalpaymentdata-payeename" id="ref-for-dom-collectedclientadditionalpaymentdata-payeename②">payeeName</a></code>
            <dd data-md>
                <p>展示给用户的收款方名称（如有）。</p>
            <dt data-md><code
                    class="idl"><a data-link-type="idl" href="#dom-collectedclientadditionalpaymentdata-payeeorigin" id="ref-for-dom-collectedclientadditionalpaymentdata-payeeorigin②">payeeOrigin</a></code>
            <dd data-md>
                <p>展示给用户的收款方来源（如有）。</p>
            <dt data-md><code
                    class="idl"><a data-link-type="idl" href="#dom-collectedclientadditionalpaymentdata-paymententitieslogos" id="ref-for-dom-collectedclientadditionalpaymentdata-paymententitieslogos③">paymentEntitiesLogos</a></code>
            <dd data-md>
                <p>交易对话框中展示给用户的logo（如有）。代表促成本次交易的实体。</p>
            <dt data-md><code
                    class="idl"><a data-link-type="idl" href="#dom-collectedclientadditionalpaymentdata-total" id="ref-for-dom-collectedclientadditionalpaymentdata-total②">total</a></code>
            <dd data-md>
                <p><a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#dom-paymentcurrencyamount"
                        id="ref-for-dom-paymentcurrencyamount②">PaymentCurrencyAmount</a>，对应 <a data-link-type="biblio"
                        href="#biblio-payment-request" title="Payment Request API">[payment-request]</a> 中
                    <code>total</code> 字段。
                </p>
            <dt data-md><code
                    class="idl"><a data-link-type="idl" href="#dom-collectedclientadditionalpaymentdata-instrument" id="ref-for-dom-collectedclientadditionalpaymentdata-instrument③">instrument</a></code>
            <dd data-md>
                <p>展示给用户的支付工具信息。</p>
            <dt data-md><code
                    class="idl"><a data-link-type="idl" href="#dom-collectedclientadditionalpaymentdata-browserboundpublickey" id="ref-for-dom-collectedclientadditionalpaymentdata-browserboundpublickey③">browserBoundPublicKey</a></code>
            <dd data-md>
                <p><a data-link-type="dfn" href="#browser-bound-key" id="ref-for-browser-bound-key②">浏览器绑定密钥</a>公钥的
                    base64url 编码。详见 WebAuthn 的 <a data-link-type="dfn"
                        href="https://w3c.github.io/webauthn/#base64url-encoding"
                        id="ref-for-base64url-encoding">Base64url 编码</a>。</p>
        </dl>
        <p>注意 <code>paymentRequestOrigin</code> 字段未出现在
            <code
                class="idl"><a data-link-type="idl" href="#dictdef-collectedclientadditionalpaymentdata" id="ref-for-dictdef-collectedclientadditionalpaymentdata⑥">CollectedClientAdditionalPaymentData</a></code>
            内，因为调用帧的origin已包含在 <a data-link-type="idl"
                href="https://www.w3.org/TR/webauthn-3/#dictdef-collectedclientdata"
                id="ref-for-dictdef-collectedclientdata⑦">CollectedClientData</a>
            里（参见 <a data-link-type="biblio" href="#biblio-webauthn-3"
                title="Web Authentication: An API for accessing Public Key Credentials - Level 3">[webauthn-3]</a>）。
        </p>
        <h3 class="heading settled" data-level="5.3"
            id="sctn-collectedclientadditionalpaymentregistrationdata-dictionary"><span class="secno">5.3. </span><span
                class="content"><dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export
                    id="dictdef-collectedclientadditionalpaymentregistrationdata"><code>CollectedClientAdditionalPaymentRegistrationData</code></dfn>
                字典</span><a class="self-link"
                href="#sctn-collectedclientadditionalpaymentregistrationdata-dictionary"></a></h3>
        <pre class="def highlight idl"><c- b>dictionary</c-> <a class="idl-code" data-link-type="dictionary" href="#dictdef-collectedclientadditionalpaymentregistrationdata" id="ref-for-dictdef-collectedclientadditionalpaymentregistrationdata③"><c- g>CollectedClientAdditionalPaymentRegistrationData</c-></a> {
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString①③"><c- b>USVString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="CollectedClientAdditionalPaymentRegistrationData" data-dfn-type="dict-member" data-export data-type="USVString" id="dom-collectedclientadditionalpaymentregistrationdata-browserboundpublickey"><code><c- g>browserBoundPublicKey</c-></code></dfn>;
};
</pre>
        <p><code
                class="idl"><a data-link-type="idl" href="#dictdef-collectedclientadditionalpaymentregistrationdata" id="ref-for-dictdef-collectedclientadditionalpaymentregistrationdata④">CollectedClientAdditionalPaymentRegistrationData</a></code>
            字典包含如下字段：</p>
        <dl class="domintro">
            <dt data-md><code
                    class="idl"><a data-link-type="idl" href="#dom-collectedclientadditionalpaymentregistrationdata-browserboundpublickey" id="ref-for-dom-collectedclientadditionalpaymentregistrationdata-browserboundpublickey②">browserBoundPublicKey</a></code>
            <dd data-md>
                <p><a data-link-type="dfn" href="#browser-bound-key" id="ref-for-browser-bound-key③">浏览器绑定密钥</a>公钥的
                    base64url 编码。详见 WebAuthn 的 <a data-link-type="dfn"
                        href="https://w3c.github.io/webauthn/#base64url-encoding"
                        id="ref-for-base64url-encoding①">Base64url 编码</a>。</p>
        </dl>
        <h2 class="heading settled" data-level="6" id="sctn-browser-bound-key-store"><span class="secno">6. </span><span
                class="content">浏览器绑定密钥存储</span><a class="self-link" href="#sctn-browser-bound-key-store"></a></h2>
        <p>这是由 <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#user-agent"
                id="ref-for-user-agent">用户代理</a>持有的内部组件，管理依赖平台的加密密钥对，包括它们与 <a data-link-type="dfn"
                href="#spc-credential" id="ref-for-spc-credential⑥">SPC凭证</a>（即passkey）的关联。 本节说明 <dfn
                class="dfn-paneled" data-dfn-type="dfn" data-lt="browser bound key store" data-noexport
                id="browser-bound-key-store">浏览器绑定密钥存储</dfn>及其密钥对创建、绑定、检索和签名过程。</p>
        <p class="note" role="note"><span class="marker">注意：</span>
            <a data-link-type="dfn" href="#browser-bound-key-store"
                id="ref-for-browser-bound-key-store">浏览器绑定密钥存储</a>需要生成密钥对、检索密钥对、导出公钥、生成签名。许多操作系统都提供相关API，并将私钥存储于设备安全元件（如有）。如
            <a href="https://source.android.com/docs/security/features/keystore">Android
                KeyStore</a>、
            <a href="https://developer.apple.com/documentation/cryptokit/">Apple CryptoKit</a> 或
            <a href="https://learn.microsoft.com/en-us/windows/win32/seccng/cng-portal">Windows Cryptography API: Next
                Generation</a>。
        </p>
        <p>浏览器绑定密钥存储包含如下内容：</p>
        <dl>
            <dt data-md><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                    id="browser_bound_map">browser_bound_map</dfn>
            <dd data-md>
                <p>从 <a data-link-type="dfn" href="https://w3c.github.io/webauthn/#credential-id"
                        id="ref-for-credential-id②">Credential ID</a> 到密钥对标识符的映射。</p>
            <dt data-md><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="keypair_map">keypair_map</dfn>
            <dd data-md>
                <p>从字节数组（密钥对标识符）到由公私<a data-link-type="dfn" href="#key-pair" id="ref-for-key-pair②">密钥对</a>和算法标识符
                    <code
                        class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#typedefdef-cosealgorithmidentifier" id="ref-for-typedefdef-cosealgorithmidentifier">COSEAlgorithmIdentifier</a></code>
                    组成的<a data-link-type="dfn" href="https://infra.spec.whatwg.org/#tuple" id="ref-for-tuple">二元组</a>映射。
                </p>
                <p class="note" role="note"><span class="marker">注意：</span>
                    用户代理可调用加密API以实现类似 <a data-link-type="dfn" href="#keypair_map"
                        id="ref-for-keypair_map">keypair_map</a> 功能，则该部分工作可委托给加密API。
                </p>
        </dl>
        <h3 class="heading settled" data-level="6.1" id="sctn-creating-a-keypair"><span class="secno">6.1. </span><span
                class="content">创建密钥对</span><a class="self-link" href="#sctn-creating-a-keypair"></a></h3>
        <p>要在给定 <code
                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dictdef-publickeycredentialparameters" id="ref-for-dictdef-publickeycredentialparameters②">PublicKeyCredentialParameters</a></code>,
            <var>allowed_algorithms</var> 时 <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="create-a-key-pair">创建密钥对</dfn>，返回包含<a data-link-type="dfn" href="#key-pair"
                id="ref-for-key-pair③">密钥对</a>和其 <code
                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#typedefdef-cosealgorithmidentifier" id="ref-for-typedefdef-cosealgorithmidentifier①">COSEAlgorithmIdentifier</a></code>
            及密钥对标识字节数组的<a data-link-type="dfn" href="https://infra.spec.whatwg.org/#tuple"
                id="ref-for-tuple①">二元组</a>，请按如下步骤执行：
        </p>
        <p class="note" role="note"><span class="marker">注意：</span>根据允许算法或默认列表生成<a data-link-type="dfn" href="#key-pair"
                id="ref-for-key-pair④">密钥对</a>。</p>
        <ol>
            <li data-md>
                <p>如果 <var>allowed_algorithms</var> <a data-link-type="dfn"
                        href="https://infra.spec.whatwg.org/#list-is-empty" id="ref-for-list-is-empty①">为空</a>，
                    则使用如下默认列表：</p>
                <ul>
                    <li data-md>
                        <p><code
                                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialparameters-type" id="ref-for-dom-publickeycredentialparameters-type">type</a></code>
                            =
                            <code
                                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#enumdef-publickeycredentialtype" id="ref-for-enumdef-publickeycredentialtype">PublicKeyCredentialType</a></code>
                            且 <code
                                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialparameters-alg" id="ref-for-dom-publickeycredentialparameters-alg">alg</a></code>
                            =
                            -7 ("ES256")
                        </p>
                    <li data-md>
                        <p><code
                                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialparameters-type" id="ref-for-dom-publickeycredentialparameters-type①">type</a></code>
                            =
                            <code
                                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#enumdef-publickeycredentialtype" id="ref-for-enumdef-publickeycredentialtype①">PublicKeyCredentialType</a></code>
                            且 <code
                                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialparameters-alg" id="ref-for-dom-publickeycredentialparameters-alg①">alg</a></code>
                            =
                            -257 ("RS256")
                        </p>
                </ul>
            <li data-md>
                <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-remove"
                        id="ref-for-list-remove">移除</a> <var>allowed_algorithms</var> 中类型不是
                    <code
                        class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#publickeycredential" id="ref-for-publickeycredential">PublicKeyCredential</a></code>
                    的条目。
                </p>
            <li data-md>
                <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-remove"
                        id="ref-for-list-remove①">移除</a>用户代理不支持的 <var>allowed_algorithms</var> 条目。</p>
                <p class="note" role="note"><span class="marker">注意：</span>
                    不同平台用户代理支持的加密算法不同。</p>
            <li data-md>
                <p>如 <var>allowed_algorithms</var>的<a data-link-type="dfn"
                        href="https://infra.spec.whatwg.org/#list-size" id="ref-for-list-size">长度</a>为零则返回null。</p>
                <p class="note" role="note"><span class="marker">注意：</span>此时用户代理不会输出任何浏览器绑定内容。</p>
            <li data-md>
                <p>如 <var>allowed_algorithms</var>的<a data-link-type="dfn"
                        href="https://infra.spec.whatwg.org/#list-size" id="ref-for-list-size①">长度</a>大于零：</p>
                <ol>
                    <li data-md>
                        <p>令 <var>chosen_algorithm</var> 为 <var>allowed_algorithms</var>[0]。</p>
                    <li data-md>
                        <p>用 <var>chosen_algorithm</var> 用既定过程生成公私<a data-link-type="dfn" href="#key-pair"
                                id="ref-for-key-pair⑤">密钥对</a>，
                            参考 IANA COSE Algorithms registry <a data-link-type="biblio"
                                href="#biblio-iana-cose-algs-reg"
                                title="IANA CBOR Object Signing and Encryption (COSE) Algorithms Registry">[IANA-COSE-ALGS-REG]</a>
                            的算法。如生成失败则返回null。</p>
                    <li data-md>
                        <p>令 <var>bbk_and_algorithm</var> 为二元组 (<var>bbk</var>, <var>chosen_algorithm</var>)。</p>
                    <li data-md>
                        <p>令 <var>bbk_id</var> 为：</p>
                        <ol>
                            <li data-md>
                                <p>字节数组初始化：</p>
                                <ol>
                                    <li data-md>
                                        <p>令 <var>bbk_id</var> 长度为32。</p>
                                    <li data-md>
                                        <p>调用 <code
                                                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webcrypto-2/#dfn-Crypto-method-getRandomValues" id="ref-for-dfn-Crypto-method-getRandomValues">getRandomValues</a></code>(<var>bbk_id</var>)。
                                        </p>
                                </ol>
                            <li data-md>
                                <p>从实现定义key生成过程的密钥对句柄序列化得到的字节数组。后续要用该字节数组从加密API检索对应的密钥。</p>
                        </ol>
                        <p class="note" role="note"><span class="marker">注意：</span>
                            许多加密API返回标识符、句柄或密钥包装（而非直接返回私钥及公钥），如私钥在安全元件中时只能用标识符/句柄/包装密钥调用API。</p>
                    <li data-md>
                        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-set"
                                id="ref-for-map-set①">写入</a> <a data-link-type="dfn" href="#keypair_map"
                                id="ref-for-keypair_map①">keypair_map</a>[<var>bbk_id</var>] =
                            <var>bbk_and_algorithm</var>。
                        </p>
                    <li data-md>
                        <p>返回 (<var>bbk_and_algorithm</var>, <var>bbk_id</var>)。</p>
                </ol>
        </ol>
        <p class="issue" id="issue-9a870553"><a class="self-link" href="#issue-9a870553"></a>
            规范可说明优先选用硬件存储算法（按顺序），其次软件存储算法。暂时Chrome每个平台只支持一种硬件算法。详细讨论见 <a
                href="https://github.com/w3c/secure-payment-confirmation/issues/288">Secure Payment Confirmation issue
                #288</a>（涉及BBK存储类型、允许范围及是否暴露给依赖方）。</p>
        <h3 class="heading settled" data-level="6.2" id="sctn-binding-a-keypair"><span class="secno">6.2. </span><span
                class="content">绑定密钥对</span><a class="self-link" href="#sctn-binding-a-keypair"></a></h3>
        <p>要在给定含密钥对标识字节数组 <var>bbk_id</var> 和 <var>credential_id</var> 时 <dfn class="dfn-paneled" data-dfn-type="dfn"
                data-noexport id="bind-a-key-pair">绑定密钥对</dfn>，可能返回失败：</p>
        <p class="note" role="note"><span class="marker">注意：</span>将浏览器绑定密钥标识存储到 <a data-link-type="dfn"
                href="#browser_bound_map" id="ref-for-browser_bound_map">browser_bound_map</a> 中，对应具体的 <a
                data-link-type="dfn" href="https://w3c.github.io/webauthn/#credential-id"
                id="ref-for-credential-id③">Credential ID</a>（即passkey标识）。</p>
        <ol>
            <li data-md>
                <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-set" id="ref-for-map-set②">写入</a>
                    <a data-link-type="dfn" href="#browser_bound_map"
                        id="ref-for-browser_bound_map①">browser_bound_map</a>[<var>credential_id</var>] =
                    <var>bbk_id</var>。如遇
                    <code
                        class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidstateerror" id="ref-for-invalidstateerror">InvalidStateError</a></code>、
                    <code
                        class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①⑤">TypeError</a></code>
                    或 <code
                        class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#quotaexceedederror" id="ref-for-quotaexceedederror">QuotaExceededError</a></code>
                    则返回失败。
                </p>
                <p class="note" role="note"><span class="marker">注意：</span>底层文件系统操作可能抛错（如 <code
                        class="idl"><a data-link-type="idl" href="https://fs.spec.whatwg.org/#dom-filesystemsyncaccesshandle-write" id="ref-for-dom-filesystemsyncaccesshandle-write">write(buffer, options)</a></code>）。
                    返回false则本次交易不会包含BBK，依赖方也无法拿到BBK。后续断言会尝试新建密钥对。</p>
        </ol>
        <h3 class="heading settled" data-level="6.3" id="sctn-retrieving-a-browser-bound-key"><span class="secno">6.3.
            </span><span class="content">检索密钥对</span><a class="self-link"
                href="#sctn-retrieving-a-browser-bound-key"></a></h3>
        <p>在给定 <var>credential_id</var> 字节数组和
            <code
                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dictdef-publickeycredentialparameters" id="ref-for-dictdef-publickeycredentialparameters③">PublicKeyCredentialParameters</a></code>
            组成的 <var>allowed_algorithms</var> 列表时，
            <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="get-or-create-a-browser-bound-key">获取或创建浏览器绑定密钥</dfn>，返回包含 <a data-link-type="dfn" href="#key-pair"
                id="ref-for-key-pair⑥">密钥对</a>及 <code
                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#typedefdef-cosealgorithmidentifier" id="ref-for-typedefdef-cosealgorithmidentifier②">COSEAlgorithmIdentifier</a></code>
            的二元组，方法如下：
        </p>
        <p class="note" role="note"><span class="marker">注意：</span>找出已有对应 <a data-link-type="dfn"
                href="https://w3c.github.io/webauthn/#credential-id" id="ref-for-credential-id④">Credential ID</a>
            的密钥对或新建并返回。</p>
        <ol>
            <li data-md>
                <p>如 <a data-link-type="dfn" href="#browser_bound_map"
                        id="ref-for-browser_bound_map②">browser_bound_map</a>[<var>credential_id</var>] <a
                        data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists"
                        id="ref-for-map-exists①">存在</a></p>
                <ol>
                    <li data-md>
                        <p>令 <var>bbk_id</var> = <a data-link-type="dfn" href="#browser_bound_map"
                                id="ref-for-browser_bound_map③">browser_bound_map</a>[<var>credential_id</var>]。</p>
                    <li data-md>
                        <p>令 <var>bbk_and_algorithm</var> = <a data-link-type="dfn" href="#keypair_map"
                                id="ref-for-keypair_map②">keypair_map</a>[<var>bbk_id</var>]。</p>
                </ol>
            <li data-md>
                <p>如 <a data-link-type="dfn" href="#browser_bound_map"
                        id="ref-for-browser_bound_map④">browser_bound_map</a>[<var>credential_id</var>] 不 <a
                        data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists"
                        id="ref-for-map-exists②">存在</a></p>
                <ol>
                    <li data-md>
                        <p>令 (<var>new_bbk_and_algorithm</var>, <var>bbk_id</var>) = <a data-link-type="dfn"
                                href="#create-a-key-pair"
                                id="ref-for-create-a-key-pair①">创建密钥对</a>(<var>allowed_algorithms</var>)。</p>
                    <li data-md>
                        <p>令 <var>binding_result</var> = <a data-link-type="dfn" href="#bind-a-key-pair"
                                id="ref-for-bind-a-key-pair①">绑定密钥对</a>(<var>bbk_id</var>,
                            <var>credential_id</var>)。如返回失败，<var>bbk_and_algorithm</var> = null。
                        </p>
                    <li data-md>
                        <p>如 <var>binding_result</var> 非失败，<var>bbk_and_algorithm</var> =
                            <var>new_bbk_and_algorithm</var>。
                        </p>
                </ol>
            <li data-md>
                <p>返回 <var>bbk_and_algorithm</var>。</p>
        </ol>
        <h3 class="heading settled" data-level="6.4" id="sctn-getting-the-bbk-public-key"><span class="secno">6.4.
            </span><span class="content">获取浏览器绑定公钥</span><a class="self-link"
                href="#sctn-getting-the-bbk-public-key"></a></h3>
        <p>在给定密钥对和 <code
                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#typedefdef-cosealgorithmidentifier" id="ref-for-typedefdef-cosealgorithmidentifier③">COSEAlgorithmIdentifier</a></code>
            组成的二元组
            <var>bbk_and_algorithm</var>时 <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="get-a-browser-bound-public-key">获取浏览器绑定公钥</dfn>，返回字节数组：
        </p>
        <p class="note" role="note"><span class="marker">注意：</span>获取 <a data-link-type="dfn" href="#browser-bound-key"
                id="ref-for-browser-bound-key④">浏览器绑定密钥</a>的编码<a data-link-type="dfn" href="#key-pair-public-key"
                id="ref-for-key-pair-public-key③">公钥</a>。</p>
        <ol>
            <li data-md>
                <p>令 <var>bbk</var> = <var>bbk_and_algorithm</var>[0]。</p>
            <li data-md>
                <p>令 <var>algorithm</var> = <var>bbk_and_algorithm</var>[1]。</p>
            <li data-md>
                <p>根据 <var>algorithm</var> 的既定操作获取 <var>bbk</var> 的<a data-link-type="dfn" href="#key-pair-public-key"
                        id="ref-for-key-pair-public-key④">公钥</a>为 <var>public_key</var>。</p>
            <li data-md>
                <p>令 <var>encoded_public_key</var> 为 <var>public_key</var> 的 COSE_Key 编码。参见 WebAuthn <a
                        data-link-type="dfn"
                        href="https://w3c.github.io/webauthn/#authdata-attestedcredentialdata-credentialpublickey"
                        id="ref-for-authdata-attestedcredentialdata-credentialpublickey">credentialPublicKey</a>。</p>
            <li data-md>
                <p>返回 <var>encoded_public_key</var>。</p>
        </ol>
        <h3 class="heading settled" data-level="6.5" id="sctn-signing-client-data"><span class="secno">6.5. </span><span
                class="content">客户端数据签名</span><a class="self-link" href="#sctn-signing-client-data"></a>
        </h3>
        <p>在给定密钥对和 <code
                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#typedefdef-cosealgorithmidentifier" id="ref-for-typedefdef-cosealgorithmidentifier④">COSEAlgorithmIdentifier</a></code>
            的二元组 <var>bbk_and_algorithm</var>，以及字节数组
            <var>client_data_json</var> 时，<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="generate-a-browser-bound-signature">生成浏览器绑定签名</dfn>，返回字节数组：
        </p>
        <p class="note" role="note"><span class="marker">注意：</span>用 <a data-link-type="dfn" href="#browser-bound-key"
                id="ref-for-browser-bound-key⑤">浏览器绑定密钥</a>的<a data-link-type="dfn" href="#key-pair-private-key"
                id="ref-for-key-pair-private-key②">私钥</a>对 <code
                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dictdef-collectedclientdata" id="ref-for-dictdef-collectedclientdata⑧">CollectedClientData</a></code>
            （含 <code
                class="idl"><a data-link-type="idl" href="#dictdef-collectedclientadditionalpaymentdata" id="ref-for-dictdef-collectedclientadditionalpaymentdata⑦">CollectedClientAdditionalPaymentData</a></code>
            或 <code
                class="idl"><a data-link-type="idl" href="#dictdef-collectedclientadditionalpaymentregistrationdata" id="ref-for-dictdef-collectedclientadditionalpaymentregistrationdata⑤">CollectedClientAdditionalPaymentRegistrationData</a></code>）进行签名。
        </p>
        <ol>
            <li data-md>
                <p>令 <var>bbk</var> = <var>bbk_and_algorithm</var>[0]。</p>
            <li data-md>
                <p>令 <var>algorithm</var> = <var>bbk_and_algorithm</var>[1]。</p>
            <li data-md>
                <p>用 <var>algorithm</var> 与 <var>bbk</var> 的<a data-link-type="dfn" href="#key-pair-private-key"
                        id="ref-for-key-pair-private-key③">私钥</a>对 <var>client_data_json</var> 执行签名操作，得
                    <var>signature</var>。参见
                    IANA COSE Algorithms registry <a data-link-type="biblio" href="#biblio-iana-cose-algs-reg"
                        title="IANA CBOR Object Signing and Encryption (COSE) Algorithms Registry">[IANA-COSE-ALGS-REG]</a>。
                </p>
                <p class="note" role="note"><span class="marker">注意：</span>返回的是用 <var>bbk</var> 的<a data-link-type="dfn"
                        href="#key-pair-private-key" id="ref-for-key-pair-private-key④">私钥</a>对
                    <var>client_data_json</var> 进行的密码学签名。
                </p>
            <li data-md>
                <p>返回 <var>signature</var>。</p>
        </ol>
        <h2 class="heading settled" data-level="7" id="sctn-common-data-structures"><span class="secno">7. </span><span
                class="content">公共数据结构</span><a class="self-link" href="#sctn-common-data-structures"></a></h2>
        <p>以下数据结构在注册与认证之间共享。</p>
        <h3 class="heading settled" data-level="7.1" id="sctn-paymentcredentialinstrument-dictionary"><span
                class="secno">7.1. </span><span class="content"><dfn class="dfn-paneled idl-code"
                    data-dfn-type="dictionary" data-export
                    id="dictdef-paymentcredentialinstrument"><code>PaymentCredentialInstrument</code></dfn>
                字典</span><a class="self-link" href="#sctn-paymentcredentialinstrument-dictionary"></a></h3>
        <pre class="def highlight idl"><c- b>dictionary</c-> <a class="idl-code" data-link-type="dictionary" href="#dictdef-paymentcredentialinstrument" id="ref-for-dictdef-paymentcredentialinstrument③"><c- g>PaymentCredentialInstrument</c-></a> {
    <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString①④"><c- b>USVString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="PaymentCredentialInstrument" data-dfn-type="dict-member" data-export data-type="USVString" id="dom-paymentcredentialinstrument-displayname"><code><c- g>displayName</c-></code></dfn>;
    <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString①⑤"><c- b>USVString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="PaymentCredentialInstrument" data-dfn-type="dict-member" data-export data-type="USVString" id="dom-paymentcredentialinstrument-icon"><code><c- g>icon</c-></code></dfn>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean②"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-default="true" data-dfn-for="PaymentCredentialInstrument" data-dfn-type="dict-member" data-export data-type="boolean" id="dom-paymentcredentialinstrument-iconmustbeshown"><code><c- g>iconMustBeShown</c-></code></dfn> = <c- b>true</c->;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString①⑥"><c- b>USVString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="PaymentCredentialInstrument" data-dfn-type="dict-member" data-export data-type="USVString" id="dom-paymentcredentialinstrument-details"><code><c- g>details</c-></code></dfn>;
};
</pre>
        <p>The <code
                class="idl"><a data-link-type="idl" href="#dictdef-paymentcredentialinstrument" id="ref-for-dictdef-paymentcredentialinstrument④">PaymentCredentialInstrument</a></code>
            字典包含要向用户展示并与交易详情一并签名的信息。它包含下列成员：</p>
        <dl class="domintro">
            <dt data-md><code
                    class="idl"><a data-link-type="idl" href="#dom-paymentcredentialinstrument-displayname" id="ref-for-dom-paymentcredentialinstrument-displayname②">displayName</a></code>
            <dd data-md>
                <p>展示给用户的支付工具名称。</p>
                <p class="note" role="note"><span class="marker">注意：</span>关于 <code
                        class="idl"><a data-link-type="idl" href="#dom-paymentcredentialinstrument-displayname" id="ref-for-dom-paymentcredentialinstrument-displayname③">displayName</a></code>
                    的国际化讨论，请参见 <a href="#sctn-i18n-considerations">§ 14 国际化考虑</a>。</p>
            <dt data-md><code
                    class="idl"><a data-link-type="idl" href="#dom-paymentcredentialinstrument-icon" id="ref-for-dom-paymentcredentialinstrument-icon⑥">icon</a></code>
            <dd data-md>
                <p>支付工具图标的 URL。</p>
                <p class="note" role="note"><span class="marker">注意：</span>该 <code
                        class="idl"><a data-link-type="idl" href="#dom-paymentcredentialinstrument-icon" id="ref-for-dom-paymentcredentialinstrument-icon⑦">icon</a></code>
                    URL 可以是互联网上可访问服务器上的图片（例如 <code>https://bank.example/card.png</code>），也可以通过 Data URL <a
                        data-link-type="biblio" href="#biblio-rfc2397"
                        title="The &quot;data&quot; URL scheme">[RFC2397]</a> 直接编码图标数据。在这两种类型中，Data URL 对于 <a
                        data-link-type="dfn" href="https://w3c.github.io/webauthn/#relying-party"
                        id="ref-for-relying-party①⑨">Relying Party</a> 有若干好处：它们可以提升可靠性（例如图标托管服务器不可用时），也能增强验证，因为 <a
                        data-link-type="dfn" href="https://w3c.github.io/webauthn/#relying-party"
                        id="ref-for-relying-party②⓪">Relying Party</a> 在被签名的 <code
                        class="idl"><a data-link-type="idl" href="#dictdef-collectedclientadditionalpaymentdata" id="ref-for-dictdef-collectedclientadditionalpaymentdata⑧">CollectedClientAdditionalPaymentData</a></code>
                    结构中具有对浏览器展示内容的密码学证据（即图标 URL 被签名）。
                </p>
                <p class="note" role="note"><span class="marker">注意：</span>参见相关的 <a
                        href="#sctn-accessibility-considerations">无障碍考虑</a>。</p>
            <dt data-md><code
                    class="idl"><a data-link-type="idl" href="#dom-paymentcredentialinstrument-iconmustbeshown" id="ref-for-dom-paymentcredentialinstrument-iconmustbeshown②">iconMustBeShown</a></code>
            <dd data-md>
                <p>指示指定图标是否必须被成功获取并展示以使请求成功。</p>
            <dt data-md><code
                    class="idl"><a data-link-type="idl" href="#dom-paymentcredentialinstrument-details" id="ref-for-dom-paymentcredentialinstrument-details②">details</a></code>
            <dd data-md>
                <p>可选的额外细节字符串，用于向用户展示支付工具的补充信息。</p>
                <p class="note" role="note"><span class="marker">注意：</span>关于 <code
                        class="idl"><a data-link-type="idl" href="#dom-paymentcredentialinstrument-details" id="ref-for-dom-paymentcredentialinstrument-details③">details</a></code>
                    的国际化讨论，请参见 <a href="#sctn-i18n-considerations">§ 14 国际化考虑</a>。</p>
        </dl>
        <h3 class="heading settled" data-level="7.2" id="sctn-paymententitylogo-dictionary"><span class="secno">7.2.
            </span><span class="content"><dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export
                    id="dictdef-paymententitylogo"><code>PaymentEntityLogo</code></dfn> 字典</span><a class="self-link"
                href="#sctn-paymententitylogo-dictionary"></a></h3>
        <pre class="def highlight idl"><c- b>dictionary</c-> <a class="idl-code" data-link-type="dictionary" href="#dictdef-paymententitylogo" id="ref-for-dictdef-paymententitylogo⑦"><c- g>PaymentEntityLogo</c-></a> {
    <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString①⑦"><c- b>USVString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="PaymentEntityLogo" data-dfn-type="dict-member" data-export data-type="USVString" id="dom-paymententitylogo-url"><code><c- g>url</c-></code></dfn>;
    <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString①⑧"><c- b>USVString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="PaymentEntityLogo" data-dfn-type="dict-member" data-export data-type="USVString" id="dom-paymententitylogo-label"><code><c- g>label</c-></code></dfn>;
};
</pre>
        <p>The <code
                class="idl"><a data-link-type="idl" href="#dictdef-paymententitylogo" id="ref-for-dictdef-paymententitylogo⑧">PaymentEntityLogo</a></code>
            字典包含描述为本次交易提供便利的支付实体的 logo 的信息。它包含下列成员：</p>
        <dl class="domintro">
            <dt data-md><code
                    class="idl"><a data-link-type="idl" href="#dom-paymententitylogo-url" id="ref-for-dom-paymententitylogo-url⑤">url</a></code>
            <dd data-md>
                <p>logo 的 URL。</p>
                <p class="note" role="note"><span class="marker">注意：</span>该 <code
                        class="idl"><a data-link-type="idl" href="#dom-paymententitylogo-url" id="ref-for-dom-paymententitylogo-url⑥">url</a></code>
                    可以是互联网上的图片（例如 <code>https://bank.com/logo.png</code>），也可以通过 Data URL <a data-link-type="biblio"
                        href="#biblio-rfc2397" title="The &quot;data&quot; URL scheme">[RFC2397]</a> 直接编码图像数据。相较之下，Data
                    URL 对 <a data-link-type="dfn" href="https://w3c.github.io/webauthn/#relying-party"
                        id="ref-for-relying-party②①">Relying Party</a> 有若干好处：可提升可靠性（例如 logo 托管服务器不可用时），并能增强验证，因为 <a
                        data-link-type="dfn" href="https://w3c.github.io/webauthn/#relying-party"
                        id="ref-for-relying-party②②">Relying Party</a> 在被签名的 <code
                        class="idl"><a data-link-type="idl" href="#dictdef-collectedclientadditionalpaymentdata" id="ref-for-dictdef-collectedclientadditionalpaymentdata⑨">CollectedClientAdditionalPaymentData</a></code>
                    结构中具有对浏览器展示内容的密码学证据（即 logo URL 被签名）。
                </p>
            <dt data-md><code
                    class="idl"><a data-link-type="idl" href="#dom-paymententitylogo-label" id="ref-for-dom-paymententitylogo-label③">label</a></code>
            <dd data-md>
                <p>logo 的描述性标签。用户代理可以（但不必）向用户显示此标签（见 <a href="#sctn-transaction-confirmation-ux">§ 4.9
                        显示交易确认界面</a>），并应将其用于无障碍用途（例如在描述该 logo 的界面时由屏幕阅读器朗读）。</p>
        </dl>
        <h2 class="heading settled" data-level="8" id="sctn-permissions-policy"><span class="secno">8. </span><span
                class="content">权限策略集成</span><a class="self-link" href="#sctn-permissions-policy"></a></h2>
        <p>本规范使用来自 <a data-link-type="biblio" href="#biblio-payment-request"
                title="Payment Request API">[payment-request]</a> 的 "<a data-link-type="dfn"
                href="https://w3c.github.io/payment-request/#dfn-payment" id="ref-for-dfn-payment②">payment</a>"
            policy-identifier 字符串，
            用于根据 <code
                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#dom-paymentrequest" id="ref-for-dom-paymentrequest⑨">PaymentRequest</a></code>
            构造函数控制对 SPC 认证的访问。</p>
        <p>为与该规范的早期版本向后兼容，<a href="https://www.w3.org/TR/credential-management-1/#sctn-cred-type-registry">Credential
                Management
                Credential Type Registry</a> 已扩展，添加 "<a data-link-type="dfn"
                href="https://w3c.github.io/payment-request/#dfn-payment" id="ref-for-dfn-payment③">payment</a>"
            policy-identifier 字符串，
            作为 type <code>public-key</code> 的另一种 <a data-link-type="dfn"
                href="https://w3c.github.io/webappsec-credential-management/#credential-type-registry-create-permissions-policy"
                id="ref-for-credential-type-registry-create-permissions-policy">Create Permissions
                Policy</a>。未来版本的规范可能会弃用该行为。</p>
        <details class="wpt-tests-block" dir="ltr" lang="en">
            <summary>测试</summary>
            <ul class="wpt-tests-list">
                <li class="wpt-test"><a class="wpt-name"
                        href="https://wpt.fyi/results/secure-payment-confirmation/enrollment-in-iframe.sub.https.html"
                        title="secure-payment-confirmation/enrollment-in-iframe.sub.https.html">enrollment-in-iframe.sub.https.html</a>
                    <a class="wpt-live"
                        href="https://wpt.live/secure-payment-confirmation/enrollment-in-iframe.sub.https.html"><small>(live
                            test)</small></a> <a class="wpt-source"
                        href="https://github.com/web-platform-tests/wpt/blob/master/secure-payment-confirmation/enrollment-in-iframe.sub.https.html"><small>(source)</small></a>
            </ul>
        </details>
        <p class="note" role="note"><span class="marker">注意：</span>实际进行权限策略评估的算法由 <a data-link-type="biblio"
                href="#biblio-credential-management-1"
                title="Credential Management Level 1">[CREDENTIAL-MANAGEMENT-1]</a> 指定。原因是这类策略评估需要在能访问 <a
                data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/webappapis.html#current-settings-object"
                id="ref-for-current-settings-object">当前设置对象</a> 时进行。<code
                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dom-publickeycredential-create-slot" id="ref-for-dom-publickeycredential-create-slot">[[Create]](origin, options, sameOriginWithAncestors)</a></code>
            和 <code
                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dom-publickeycredential-discoverfromexternalsource-slot" id="ref-for-dom-publickeycredential-discoverfromexternalsource-slot①">[[DiscoverFromExternalSource]](origin, options, sameOriginWithAncestors)</a></code>
            这些 <a data-link-type="dfn"
                href="https://tc39.github.io/ecma262/#sec-object-internal-methods-and-internal-slots"
                id="ref-for-sec-object-internal-methods-and-internal-slots">内部方法</a> 并不具备该访问权限，
            因为它们被（由 <a data-link-type="biblio" href="#biblio-credential-management-1"
                title="Credential Management Level 1">[CREDENTIAL-MANAGEMENT-1]</a> 中指定的算法）并行调用（参见 <a
                data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel"
                id="ref-for-in-parallel">并行</a>）。</p>
        <h2 class="heading settled" data-level="9" id="sctn-relying-party-operations"><span class="secno">9.
            </span><span class="content">SPC 依赖方操作</span><a class="self-link" href="#sctn-relying-party-operations"></a>
        </h2>
        <h3 class="heading settled" data-level="9.1" id="sctn-verifying-assertion"><span class="secno">9.1. </span><span
                class="content">验证认证断言</span><a class="self-link" href="#sctn-verifying-assertion"></a></h3>
        <p>为对 Secure Payment Confirmation 执行一次 <a data-link-type="dfn"
                href="https://w3c.github.io/webauthn/#authentication-ceremony"
                id="ref-for-authentication-ceremony①">认证流程</a>，<a data-link-type="dfn"
                href="https://w3c.github.io/webauthn/#relying-party" id="ref-for-relying-party②③">依赖方</a> 必须按下列步骤进行：</p>
        <ol>
            <li data-md>
                <p>令 <var>credential</var> 为从 <a data-link-type="dfn"
                        href="#secure-payment-confirmation-payment-handler"
                        id="ref-for-secure-payment-confirmation-payment-handler②">Secure Payment Confirmation 支付处理器</a>
                    成功调用中由 <var>SPC 调用者</var> 返回的 <code
                        class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#publickeycredential" id="ref-for-publickeycredential①">PublicKeyCredential</a></code>。
                </p>
                <p class="note" role="note"><span class="marker">注意：</span>由于 SPC 的设计支持 <a
                        href="#sctn-use-case-merchant-authentication">商户对认证的控制</a>，发起 SPC 的实体可能并非依赖方。此第一步假定 SPC 调用者已将通过
                    SPC 获得的凭证返回给 <a data-link-type="dfn" href="https://w3c.github.io/webauthn/#relying-party"
                        id="ref-for-relying-party②⑤">依赖方</a>。</p>
            <li data-md>
                <p>按照 <a href="https://www.w3.org/TR/webauthn-3/#sctn-verifying-assertion">WebAuthn</a> 中第 3–21
                    步执行验证，但作如下更改：</p>
                <ol>
                    <li data-md>
                        <p>在第 5 步中，验证 <var>credential</var>.<code
                                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/credential-management-1/#dom-credential-id" id="ref-for-dom-credential-id">id</a></code>
                            是否标识了 <var>SPC 调用者</var> 从 <a data-link-type="dfn"
                                href="https://w3c.github.io/webauthn/#relying-party"
                                id="ref-for-relying-party②⑥">依赖方</a> 那里获取的某个公钥凭证。
                        </p>
                    <li data-md>
                        <p>在第 11 步，验证 <var>C</var>["<code
                                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dom-collectedclientdata-type" id="ref-for-dom-collectedclientdata-type①">type</a></code>"]
                            的值为字符串 <code>payment.get</code>。</p>
                    <li data-md>
                        <p>在第 12 步，验证 <var>C</var>["<code
                                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dom-collectedclientdata-challenge" id="ref-for-dom-collectedclientdata-challenge">challenge</a></code>"]
                            的值等于依赖方提供给 <var>SPC 调用者</var> 的 challenge 的 base64url 编码。</p>
                    <li data-md>
                        <p>在第 13 步，验证 <var>C</var>["<code
                                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dom-collectedclientdata-origin" id="ref-for-dom-collectedclientdata-origin">origin</a></code>"]
                            的值与依赖方期望 SPC 被调用的来源匹配。</p>
                    <li data-md>
                        <p>在第 13 步之后，插入下列步骤：</p>
                        <ul>
                            <li data-md>
                                <p>验证 <var>C</var>["<code
                                        class="idl"><a data-link-type="idl" href="#dom-collectedclientpaymentdata-payment" id="ref-for-dom-collectedclientpaymentdata-payment③">payment</a></code>"]["<code
                                        class="idl"><a data-link-type="idl" href="#dom-collectedclientadditionalpaymentdata-rpid" id="ref-for-dom-collectedclientadditionalpaymentdata-rpid②">rpId</a></code>"]
                                    的值与依赖方的 origin 匹配。</p>
                            <li data-md>
                                <p>验证 <var>C</var>["<code
                                        class="idl"><a data-link-type="idl" href="#dom-collectedclientpaymentdata-payment" id="ref-for-dom-collectedclientpaymentdata-payment④">payment</a></code>"]["<code
                                        class="idl"><a data-link-type="idl" href="#dom-collectedclientadditionalpaymentdata-toporigin" id="ref-for-dom-collectedclientadditionalpaymentdata-toporigin②">topOrigin</a></code>"]
                                    的值与依赖方期望的顶层 origin 匹配。</p>
                            <li data-md>
                                <p>验证 <var>C</var>["<code
                                        class="idl"><a data-link-type="idl" href="#dom-collectedclientpaymentdata-payment" id="ref-for-dom-collectedclientpaymentdata-payment⑤">payment</a></code>"]["<code
                                        class="idl"><a data-link-type="idl" href="#dom-collectedclientadditionalpaymentdata-payeename" id="ref-for-dom-collectedclientadditionalpaymentdata-payeename③">payeeName</a></code>"]
                                    的值（若有）与应当显示给用户的收款方名称匹配。</p>
                            <li data-md>
                                <p>验证 <var>C</var>["<code
                                        class="idl"><a data-link-type="idl" href="#dom-collectedclientpaymentdata-payment" id="ref-for-dom-collectedclientpaymentdata-payment⑥">payment</a></code>"]["<code
                                        class="idl"><a data-link-type="idl" href="#dom-collectedclientadditionalpaymentdata-payeeorigin" id="ref-for-dom-collectedclientadditionalpaymentdata-payeeorigin③">payeeOrigin</a></code>"]
                                    的值（若有）与应当显示给用户的收款方来源匹配。</p>
                            <li data-md>
                                <p>验证 <var>C</var>["<code
                                        class="idl"><a data-link-type="idl" href="#dom-collectedclientpaymentdata-payment" id="ref-for-dom-collectedclientpaymentdata-payment⑦">payment</a></code>"]["<code
                                        class="idl"><a data-link-type="idl" href="#dom-collectedclientadditionalpaymentdata-paymententitieslogos" id="ref-for-dom-collectedclientadditionalpaymentdata-paymententitieslogos④">paymentEntitiesLogos</a></code>"]
                                    是应当展示给用户的 logo 列表的严格有序子集（若有）。</p>
                                <p class="note" role="note"><span class="marker">注意：</span>用户代理可以不展示所有 logo，但在 <code
                                        class="idl"><a data-link-type="idl" href="#dictdef-collectedclientadditionalpaymentdata" id="ref-for-dictdef-collectedclientadditionalpaymentdata①⓪">CollectedClientAdditionalPaymentData</a></code>
                                    中不得包含未向用户展示的 logo。</p>
                            <li data-md>
                                <p>验证 <var>C</var>["<code
                                        class="idl"><a data-link-type="idl" href="#dom-collectedclientpaymentdata-payment" id="ref-for-dom-collectedclientpaymentdata-payment⑧">payment</a></code>"]["<code
                                        class="idl"><a data-link-type="idl" href="#dom-collectedclientadditionalpaymentdata-total" id="ref-for-dom-collectedclientadditionalpaymentdata-total③">total</a></code>"]
                                    的值与应当展示给用户的交易金额匹配。</p>
                            <li data-md>
                                <p>验证 <var>C</var>["<code
                                        class="idl"><a data-link-type="idl" href="#dom-collectedclientpaymentdata-payment" id="ref-for-dom-collectedclientpaymentdata-payment⑨">payment</a></code>"]["<code
                                        class="idl"><a data-link-type="idl" href="#dom-collectedclientadditionalpaymentdata-instrument" id="ref-for-dom-collectedclientadditionalpaymentdata-instrument④">instrument</a></code>"]
                                    的值与应当展示给用户的支付工具详情匹配。
                                </p>
                        </ul>
                </ol>
        </ol>
        <h2 class="heading settled" data-level="10" id="sctn-automation"><span class="secno">10. </span><span
                class="content">用户代理自动化</span><a class="self-link" href="#sctn-automation"></a></h2>
        <p>为支持用户代理自动化和网站测试，本文档定义了下列 <a data-link-type="biblio" href="#biblio-webdriver2"
                title="WebDriver">[WebDriver2]</a> <a data-link-type="dfn"
                href="https://w3c.github.io/webdriver/#dfn-extension-commands"
                id="ref-for-dfn-extension-commands">扩展命令</a>。感兴趣的方还应参考 <a
                href="https://www.w3.org/TR/webauthn-3/#sctn-automation">WebAuthn 中的等价自动化章节</a>。</p>
        <h3 class="heading settled" data-level="10.1" id="sctn-automation-set-spc-transaction-mode"><span
                class="secno">10.1. </span><span class="content"><dfn class="dfn-paneled" data-dfn-type="dfn"
                    data-noexport id="set-spc-transaction-mode">设置 SPC 交易模式</dfn></span><a class="self-link"
                href="#sctn-automation-set-spc-transaction-mode"></a></h3>
        <p><a data-link-type="dfn" href="#set-spc-transaction-mode" id="ref-for-set-spc-transaction-mode">设置 SPC
                交易模式</a> WebDriver <a data-link-type="dfn"
                href="https://w3c.github.io/webdriver/#dfn-extension-commands"
                id="ref-for-dfn-extension-commands①">扩展命令</a> 指示用户代理将 Secure Payment Confirmation 置于一种模式，
            在该模式下会自动模拟用户接受或拒绝 <a href="#sctn-transaction-confirmation-ux">交易确认界面</a>。</p>
        <p>当前活动的 <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="current-transaction-automation-mode">交易自动化模式</dfn> 跟踪 SPC 当前启用的自动化模式。默认值为 "<code>none</code>"。</p>
        <figure class="table" id="table-setSPCTransactionMode">
            <table class="data">
                <thead>
                    <tr>
                        <th>HTTP 方法
                        <th>URI 模板
                <tbody>
                    <tr>
                        <td>POST
                        <td><code>/session/{session id}/secure-payment-confirmation/set-mode</code>
            </table>
        </figure>
        <p>远端步骤（remote end steps）如下：</p>
        <ol>
            <li data-md>
                <p>如果 <var>parameters</var> 不是 JSON <a
                        href="https://tc39.es/ecma262/multipage/structured-data.html#sec-json-object">对象</a>，返回一个带有
                    WebDriver 错误代码 <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-invalid-argument"
                        id="ref-for-dfn-invalid-argument">invalid argument</a> 的 <a data-link-type="dfn"
                        href="https://w3c.github.io/webdriver/#dfn-error" id="ref-for-dfn-error">WebDriver 错误</a>。
                </p>
            <li data-md>
                <p>令 <var>mode</var> 为从 <var>parameters</var> 获取名为 <code>"mode"</code> 的属性的结果（参见 <a data-link-type="dfn"
                        href="https://w3c.github.io/webdriver/#dfn-getting-properties"
                        id="ref-for-dfn-getting-properties">getting a property</a>）。</p>
            <li data-md>
                <p>如果 <var>mode</var> 为 <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-undefined"
                        id="ref-for-dfn-undefined">undefined</a> 或不是
                    "<code>autoAccept</code>"、"<code>autoChooseToAuthAnotherWay</code>"、"<code>autoReject</code>" 或
                    "<code>autoOptOut</code>" 之一，返回带有 WebDriver 错误代码 <a data-link-type="dfn"
                        href="https://w3c.github.io/webdriver/#dfn-invalid-argument"
                        id="ref-for-dfn-invalid-argument①">invalid argument</a> 的 <a data-link-type="dfn"
                        href="https://w3c.github.io/webdriver/#dfn-error" id="ref-for-dfn-error①">WebDriver 错误</a>。</p>
            <li data-md>
                <p>将 <a data-link-type="dfn" href="#current-transaction-automation-mode"
                        id="ref-for-current-transaction-automation-mode②">当前交易自动化模式</a> 设置为 <var>mode</var>。</p>
            <li data-md>
                <p>以 <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success"
                        id="ref-for-dfn-success">success</a> 返回，数据为 <code>null</code>。</p>
        </ol>
        <h2 class="heading settled" data-level="11" id="sctn-security-considerations"><span class="secno">11.
            </span><span class="content">安全注意事项</span><a class="self-link" href="#sctn-security-considerations"></a>
        </h2>
        <p>由于本规范建立在 WebAuthn 之上，<a href="https://www.w3.org/TR/webauthn-3/#sctn-security-considerations">WebAuthn
                的安全注意事项</a> 适用。本小节列出 Secure Payment Confirmation 特有的安全注意事项，即本规范相对 WebAuthn 的区别之处。</p>
        <h3 class="heading settled" data-level="11.1" id="sctn-security-cross-origin-auth"><span class="secno">11.1.
            </span><span class="content">跨源认证流程</span><a class="self-link" href="#sctn-security-cross-origin-auth"></a>
        </h3>
        <p>Secure Payment Confirmation 与 WebAuthn 的一个重大不同点是允许第三方使用为另一 <a data-link-type="dfn"
                href="https://w3c.github.io/webauthn/#relying-party"
                id="ref-for-relying-party③①">依赖方</a>创建的凭证来发起认证流程，并将断言返回给第三方。此特性可能使 <a data-link-type="dfn"
                href="https://w3c.github.io/webauthn/#relying-party" id="ref-for-relying-party③②">依赖方</a>
            面临登录和支付类攻击，下文讨论了这些风险。</p>
        <h4 class="heading settled" data-level="11.1.1" id="sctn-security-login-attack"><span class="secno">11.1.1.
            </span><span class="content">登录攻击</span><a class="self-link" href="#sctn-security-login-attack"></a>
        </h4>
        <p>由于为 Secure Payment Confirmation 创建的凭证同时也是有效的 WebAuthn
            凭证，依赖方可能会希望对同一用户将同一凭证用于登录和支付。这会带来一种潜在攻击，如果依赖方未谨慎验证它所接收的断言，攻击者或可利用该途径。</p>
        <p>攻击流程如下：</p>
        <ol>
            <li data-md>
                <p>用户访问 <code>attacker.example</code>，该站点为或冒充为商户网站。</p>
            <li data-md>
                <p><code>attacker.example</code> 从 <code>relyingparty.example</code> 获得了该用户的凭证，可能是合法获得或从
                    <code>relyingparty.example</code> 或其他共享凭证的实体处窃取而来。
                </p>
            <li data-md>
                <p><code>attacker.example</code> 发起 SPC 认证，且用户同意该交易（该交易可能合法也可能不合法）。</p>
            <li data-md>
                <p><code>attacker.example</code> 将从 API 调用中获得的支付断言发送到 <code>relyingparty.example</code> 的登录端点，例如向
                    <code>https://relyingparty.example/login</code> 发送 POST。
                </p>
            <li data-md>
                <p><code>relyingparty.example</code> 使用有缺陷的断言验证代码，仅校验签名但未验证必要字段（见下文），于是认为登录尝试合法。</p>
            <li data-md>
                <p><code>relyingparty.example</code> 向 <code>attacker.example</code> 返回登录 cookie
                    等。<code>relyingparty.example</code> 上的用户账户因此被攻破。</p>
        </ol>
        <p><a data-link-type="dfn" href="https://w3c.github.io/webauthn/#relying-party"
                id="ref-for-relying-party③⑤">依赖方</a> 可以用两种方式防范此类攻击。</p>
        <p>其一，依赖方必须始终按照正确的断言验证步骤来校验断言——针对登录使用 WebAuthn 登录验证步骤，针对 SPC 使用 SPC 支付验证步骤。尤其下列字段可用于检测凭证的不当使用：</p>
        <ul>
            <li data-md>
                <p><code
                        class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dictdef-collectedclientdata" id="ref-for-dictdef-collectedclientdata⑨">CollectedClientData</a></code>["<code
                        class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dom-collectedclientdata-type" id="ref-for-dom-collectedclientdata-type②">type</a></code>"]
                    — 登录为 "webauthn.get"，SPC 为 "payment.get"。</p>
            <li data-md>
                <p><code
                        class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dictdef-collectedclientdata" id="ref-for-dictdef-collectedclientdata①⓪">CollectedClientData</a></code>["<code
                        class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dom-collectedclientdata-challenge" id="ref-for-dom-collectedclientdata-challenge①">challenge</a></code>"]
                    — 该值应由依赖方服务器在发起 WebAuthn 或 SPC 前向站点提供，且在验证时应核对为先前提供的、适当的期望值。</p>
            <li data-md>
                <p><code
                        class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dictdef-collectedclientdata" id="ref-for-dictdef-collectedclientdata①①">CollectedClientData</a></code>["<code
                        class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dom-collectedclientdata-origin" id="ref-for-dom-collectedclientdata-origin①">origin</a></code>"]
                    — 如为跨源 SPC，该值将包含调用者的 origin（例如上例中的 <code>attacker.example</code>）。</p>
        </ul>
        <p>其二，依赖方可以考虑将其支付凭证与登录凭证分开管理。如果采用此策略，依赖方应仅在子域（例如 <code>https//payment.relyingparty.example</code>）上为 Secure
            Payment Confirmation 注册凭证，并在数据库中将支付凭证与登录凭证分开保存。</p>
        <div class="note" role="note">
            <p>注意：按目前文本，Secure Payment Confirmation 规范允许任何 WebAuthn 凭证参与 SPC 认证。然而现实实现中并非如此，当前实现仅允许带有 <code
                    class="idl"><a data-link-type="idl" href="#dom-authenticationextensionsclientinputs-payment" id="ref-for-dom-authenticationextensionsclientinputs-payment②">payment</a></code>
                扩展的凭证参与 SPC 认证；未来规范可能会更新以反映这一点。</p>
            <p>在当前实现与规范中，带有 <code
                    class="idl"><a data-link-type="idl" href="#dom-authenticationextensionsclientinputs-payment" id="ref-for-dom-authenticationextensionsclientinputs-payment③">payment</a></code>
                扩展创建的凭证，若依赖方愿意，可用于登录。这一行为预计不会改变。</p>
        </div>
        <h4 class="heading settled" data-level="11.1.2" id="sctn-security-payment-attack"><span class="secno">11.1.2.
            </span><span class="content">支付攻击</span><a class="self-link" href="#sctn-security-payment-attack"></a></h4>
        <p>除非 Secure Payment Confirmation 断言是正在进行的线上交易的一部分，否则其实用性极低。</p>
        <p>有多种机制可以防止一种攻击：恶意第三方不是试图劫持用户账户，而是使用（合法或非法获得的）Secure Payment Confirmation 凭证发起未授权付款：</p>
        <ul>
            <li data-md>
                <p>当攻击者发起 SPC 时，用户代理会向用户展示清楚列明交易详情（包括收款方和金额）的界面。在这种情形下，用户很可能会“取消”。</p>
            <li data-md>
                <p>如果用户确实同意了交易并完成随后 WebAuthn 的认证流程，攻击者将获得一个针对该 <a data-link-type="dfn"
                        href="https://w3c.github.io/webauthn/#relying-party" id="ref-for-relying-party④⓪">Relying
                        Party</a> 的已签名 SPC 断言。</p>
            <li data-md>
                <p>如果该 <a data-link-type="dfn" href="https://w3c.github.io/webauthn/#relying-party"
                        id="ref-for-relying-party④①">Relying Party</a> 并未预期此交易，它将拒绝该断言。</p>
            <li data-md>
                <p>如果该 <a data-link-type="dfn" href="https://w3c.github.io/webauthn/#relying-party"
                        id="ref-for-relying-party④②">Relying Party</a> 的确在等待交易，它将检测到至少下列之一并拒绝断言：</p>
                <ul>
                    <li data-md>
                        <p>错误的 <code
                                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dictdef-collectedclientdata" id="ref-for-dictdef-collectedclientdata①②">CollectedClientData</a></code>["<code
                                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dom-collectedclientdata-challenge" id="ref-for-dom-collectedclientdata-challenge②">challenge</a></code>"]，若攻击者试图与有效正在进行的付款争用（race）时会出现。
                        </p>
                    <li data-md>
                        <p>错误的 <code
                                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dictdef-collectedclientdata" id="ref-for-dictdef-collectedclientdata①③">CollectedClientData</a></code>["<code
                                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dom-collectedclientdata-origin" id="ref-for-dom-collectedclientdata-origin②">origin</a></code>"]，若攻击者试图处于用户与有效商户站点之间并转发断言时会出现。
                        </p>
                </ul>
        </ul>
        <h3 class="heading settled" data-level="11.2" id="sctn-security-merchant-data"><span class="secno">11.2.
            </span><span class="content">商户提供的认证数据</span><a class="self-link" href="#sctn-security-merchant-data"></a>
        </h3>
        <p>银行可以且应该通过<a href="#sctn-verifying-assertion">验证其收到的认证断言</a>来防止欺骗，以确保证断言与商户提供的交易详情一致。
        </p>
        <p>这是因为本规范的第三方认证流程的一个后果是：即便在有效交易中（即 <a data-link-type="dfn" href="https://w3c.github.io/webauthn/#relying-party"
                id="ref-for-relying-party④③">Relying Party</a> 所期望的交易），第三方也会提供展示给用户的交易详情：</p>
        <ul>
            <li data-md>
                <p>交易金额与货币</p>
            <li data-md>
                <p>支付工具名称与图标</p>
            <li data-md>
                <p>收款方名称与来源</p>
        </ul>
        <p>这可能导致欺骗攻击，即商户向用户展示不正确的数据。例如，商户可能在后端告诉银行它正在发起一笔 100 美元的购买，但传给 SPC API 的却是 1 美元（因此向用户展示的是 1
            美元的交易以供核验）。或者商户可能提供正确的交易详情，但传递的 Secure Payment Confirmation 凭证并不符合 <a data-link-type="dfn"
                href="https://w3c.github.io/webauthn/#relying-party" id="ref-for-relying-party④④">Relying Party</a> 的期望。
        </p>
        <p>实际上，Secure Payment Confirmation
            使击败此类攻击比当前网络上的情况更容易做到。如今在线支付中，银行不得不信任商户在结账流程中向用户展示了正确金额（任何欺诈发现通常发生在支付之后，当用户查看对账单时）。</p>
        <h3 class="heading settled" data-level="11.3" id="sctn-security-attacker-generated-bbk"><span
                class="secno">11.3. </span><span class="content">攻击者生成的 <a data-link-type="dfn"
                    href="#browser-bound-key" id="ref-for-browser-bound-key⑥">浏览器绑定密钥</a></span><a class="self-link"
                href="#sctn-security-attacker-generated-bbk"></a></h3>
        <p><a data-link-type="dfn" href="https://w3c.github.io/webauthn/#relying-party"
                id="ref-for-relying-party④⑤">Relying Party</a>（例如银行）可以且应该通过<a href="#sctn-verifying-assertion">验证包含 BBK
                公钥的认证断言</a>来防范攻击者生成的 BBK，并在遇到签名无效的密码文本时忽略该 BBK 公钥。虽然会存在两个签名：一个来自 <a data-link-type="dfn"
                href="#spc-credential" id="ref-for-spc-credential⑦">SPC Credential</a>，另一个来自 BBK，但断言应使用 passkey（以及
            BBK）一并验证。BBK 提供的是额外签名，而不是替代 passkey 签名的机制。</p>
        <p>攻击者冒充商户可能尝试用其控制对应私钥的另一个 BBK 公钥替换原有公钥。随后，该攻击者再冒充用户访问商户站点，并在商户调用 SPC 时使用攻击者的私钥签署 SPC 密文。攻击者由此击败了 BBK 的设备绑定。</p>
        <p>然而，此攻击不可行：</p>
        <ol>
            <li data-md>
                <p>当攻击者替换 BBK 时：<a data-link-type="dfn" href="https://w3c.github.io/webauthn/#relying-party"
                        id="ref-for-relying-party④⑥">Relying Party</a> 在使用 passkey 公钥验证包含 BBK 公钥的 <code
                        class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dictdef-collectedclientdata" id="ref-for-dictdef-collectedclientdata①④">CollectedClientData</a></code>
                    时会检测到签名错误。<a data-link-type="dfn" href="https://w3c.github.io/webauthn/#relying-party"
                        id="ref-for-relying-party④⑦">Relying Party</a> 应拒绝该交易并将该 BBK 公钥视为不可信。</p>
            <li data-md>
                <p>当攻击者试图冒充用户时：<a data-link-type="dfn" href="https://w3c.github.io/webauthn/#relying-party"
                        id="ref-for-relying-party④⑧">Relying Party</a> 在使用 passkey 公钥验证时会检测到签名错误。<a data-link-type="dfn"
                        href="https://w3c.github.io/webauthn/#relying-party" id="ref-for-relying-party④⑨">Relying
                        Party</a> 应继续将该 BBK 公钥视为不可信。</p>
        </ol>
        <h3 class="heading settled" data-level="11.4" id="sctn-security-user-activation-requirement"><span
                class="secno">11.4. </span><span class="content">缺乏用户激活要求</span><a class="self-link"
                href="#sctn-security-user-activation-requirement"></a></h3>
        <p>如果用户代理如<a href="#sctn-modify-user-activation-requirement">§ 4.3
                修改用户激活要求</a>所述不要求用户激活，则应考虑一些额外的安全缓解措施。不要求用户激活会增加垃圾信息和点击劫持攻击的风险，因为这允许在用户并未立即与页面交互的情况下发起 Secure Payment
            Confirmation 流程。</p>
        <p>为减轻垃圾信息问题，用户代理可以在达到某个阈值后决定强制要求用户激活，例如当用户在当前页面已被展示过一次未启用用户激活的 Secure Payment Confirmation
            流程后。为缓解点击劫持攻击，用户代理可以在对话框刚显示后的一段时间内忽略点击。</p>
        <p>另一个相关的缓解存在于 <code
                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#dom-paymentrequest-show" id="ref-for-dom-paymentrequest-show⑥">PaymentRequest.show()</a></code>：Payment
            Request API 要求文档可见，因此 SPC 不能从后台标签页、最小化窗口或其他类似隐藏情形触发。</p>
        <h2 class="heading settled" data-level="12" id="sctn-privacy-considerations"><span class="secno">12.
            </span><span class="content">隐私考虑</span><a class="self-link" href="#sctn-privacy-considerations"></a></h2>
        <p>由于本规范基于 WebAuthn，适用<a href="https://www.w3.org/TR/webauthn-3/#sctn-privacy-considerations">WebAuthn
                的隐私考虑</a>。下列小节列出 Secure Payment Confirmation 相对于 WebAuthn 的特有隐私考虑。</p>
        <h3 class="heading settled" data-level="12.1" id="sctn-privacy-probing-credential-ids"><span class="secno">12.1.
            </span><span class="content">探测凭证 ID</span><a class="self-link"
                href="#sctn-privacy-probing-credential-ids"></a></h3>
        <p>根据 WebAuthn 关于<a href="https://www.w3.org/TR/webauthn-3/#sctn-assertion-privacy">认证流程隐私</a>的部分，Secure Payment
            Confirmation 的实现者必须确保恶意调用者（现在可能甚至不是 <a data-link-type="dfn"
                href="https://w3c.github.io/webauthn/#relying-party" id="ref-for-relying-party⑤⓪">Relying
                Party</a>）无法区分以下两种情况：</p>
        <ul>
            <li data-md>
                <p>凭证不可用。</p>
            <li data-md>
                <p>凭证可用，但用户不同意使用它。</p>
        </ul>
        <p>如果上述情形可被区分，则会泄露信息，恶意 <a data-link-type="dfn" href="https://w3c.github.io/webauthn/#relying-party"
                id="ref-for-relying-party⑤①">Relying Party</a> 可以通过探测哪些<a data-link-type="dfn"
                href="https://w3c.github.io/webauthn/#public-key-credential"
                id="ref-for-public-key-credential②">凭证</a>可用来识别用户。</p>
        <p>在 Secure Payment Confirmation 中，这一风险通过始终展示<a
                href="#sctn-transaction-confirmation-ux">交易确认界面</a>并在以下两种情况下都返回相同错误（即 "<code
                class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#notallowederror" id="ref-for-notallowederror④">NotAllowedError</a></code>"
            DOMException）来缓解：既无 <a data-link-type="dfn" href="#spc-credential" id="ref-for-spc-credential⑧">SPC
                Credential</a> 可用，或有 SPC Credential 可用但用户选择不使用它。</p>
        <h3 class="heading settled" data-level="12.2" id="sctn-privacy-joining-payment-instruments"><span
                class="secno">12.2. </span><span class="content">关联不同的支付工具</span><a class="self-link"
                href="#sctn-privacy-joining-payment-instruments"></a></h3>
        <p>如果 <a data-link-type="dfn" href="https://w3c.github.io/webauthn/#relying-party"
                id="ref-for-relying-party⑤②">Relying Party</a> 在多个支付工具间为同一用户使用相同凭证，商户可能因此将本来无法关联的支付工具信息进行关联。也就是说，在用户 U
            使用支付工具 P1 与 P2 进行的两笔不同交易中（无论是在同一商户 M，还是在两个串通的商户 M1 与 M2），商户现在可能能判断 P1 与 P2 属于同一用户。</p>
        <p>对于许多当前的在线支付流程，这可能不是重要风险，因为用户通常会提供足以用于关联的信息（例如姓名、电子邮件、送货地址）。</p>
        <p>然而，如果未来广泛采用包含更少识别信息的支付方法（例如令牌化），生态系统相关方应采取措施保护用户隐私。例如：</p>
        <ul>
            <li data-md>
                <p>支付系统可能制定规则，限制第三方存储凭证 ID 或 BBK 公钥的行为。</p>
            <li data-md>
                <p>当 <a data-link-type="dfn" href="https://w3c.github.io/webauthn/#relying-party"
                        id="ref-for-relying-party⑤③">Relying Party</a> 将多个支付工具关联到单个 SPC 凭证时，可能选择不将该凭证 ID
                    共享给其他方。在这种情况下，<a data-link-type="dfn" href="https://w3c.github.io/webauthn/#relying-party"
                        id="ref-for-relying-party⑤④">Relying Party</a> 仍可在第一方或第三方上下文中使用该 SPC 凭证本身来认证用户。</p>
            <li data-md>
                <p><a data-link-type="dfn" href="https://w3c.github.io/webauthn/#relying-party"
                        id="ref-for-relying-party⑤⑤">Relying Party</a>（例如银行）可以允许用户为每个支付工具注册独立的 SPC 凭证。这样做不会阻止该 <a
                        data-link-type="dfn" href="https://w3c.github.io/webauthn/#relying-party"
                        id="ref-for-relying-party⑤⑥">Relying Party</a> 在内部将这些账户进行关联。</p>
        </ul>
        <h3 class="heading settled" data-level="12.3" id="sctn-privacy-credential-id-tracking-vector"><span
                class="secno">12.3. </span><span class="content">凭证 ID 作为追踪向量</span><a class="self-link"
                href="#sctn-privacy-credential-id-tracking-vector"></a></h3>
        <p>即便针对单一支付工具，由 <a data-link-type="dfn" href="https://w3c.github.io/webauthn/#relying-party"
                id="ref-for-relying-party⑤⑦">Relying Party</a> 返回的凭证 ID 也可能被恶意实体作为强跨站标识用于追踪。然而，商户要从 <a
                data-link-type="dfn" href="https://w3c.github.io/webauthn/#relying-party"
                id="ref-for-relying-party⑤⑧">Relying Party</a> 获取这些凭证 ID，已经需要商户向 <a data-link-type="dfn"
                href="https://w3c.github.io/webauthn/#relying-party" id="ref-for-relying-party⑤⑨">Relying Party</a>
            提供一个同样强的标识（例如信用卡号）。</p>
        <h3 class="heading settled" data-level="12.4" id="sctn-privacy-browser-bound-key-tracking-vector"><span
                class="secno">12.4. </span><span class="content">浏览器绑定密钥作为追踪向量</span><a class="self-link"
                href="#sctn-privacy-browser-bound-key-tracking-vector"></a></h3>
        <p>BBK 公钥仅在每次 SPC 支付断言中返回（以及在初次第一方创建 <a data-link-type="dfn" href="#spc-credential"
                id="ref-for-spc-credential①⓪">SPC Credential</a> 时返回一次）。但要获取 BBK，商户必须先从 <a data-link-type="dfn"
                href="https://w3c.github.io/webauthn/#relying-party" id="ref-for-relying-party⑥⓪">Relying Party</a> 获取凭证
            ID 才能发起 SPC，且用户必须使用其 passkey 对交易进行认证。由于访问 BBK 公钥需要先访问凭证 ID，BBK 公钥并未增加额外的追踪能力。</p>
        <h3 class="heading settled" data-level="12.5"
            id="sctn-fingerprinting-via-is-secure-payment-confirmation-available"><span class="secno">12.5. </span><span
                class="content">通过 securePaymentConfirmationAvailability 导致的指纹识别</span><a class="self-link"
                href="#sctn-fingerprinting-via-is-secure-payment-confirmation-available"></a></h3>
        <p><code
                class="idl"><a data-link-type="idl" href="#dom-paymentrequest-securepaymentconfirmationavailability" id="ref-for-dom-paymentrequest-securepaymentconfirmationavailability③">securePaymentConfirmationAvailability</a></code>
            API 可能带来指纹识别风险，因为它可以静默返回导致 SPC 在特定帧不可用的具体原因。这些原因不会被认为泄露重大信息，但仍应予以考虑：</p>
        <ul>
            <li data-md>
                <p><code
                        class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationavailability-unavailable-feature-not-enabled" id="ref-for-dom-securepaymentconfirmationavailability-unavailable-feature-not-enabled②">unavailable-feature-not-enabled</a></code>：
                    存在一定的指纹识别风险，取决于用户代理在何种情形下决定提供或不提供 Secure Payment Confirmation。鼓励用户代理对所有用户（若实现此规范）或至少对足够大的用户群体提供
                    Secure Payment Confirmation，以避免（额外的）指纹识别风险。例如，用户代理可在特定操作系统上对所有用户启用
                    SPC，而在其他操作系统上不启用——这将把指纹识别风险限制到不超过用户代理字符串已暴露的信息量。</p>
            <li data-md>
                <p><code
                        class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationavailability-unavailable-no-permission-policy" id="ref-for-dom-securepaymentconfirmationavailability-unavailable-no-permission-policy②">unavailable-no-permission-policy</a></code>：
                    无（额外）指纹识别风险，因为 "<a data-link-type="dfn" href="https://w3c.github.io/payment-request/#dfn-payment"
                        id="ref-for-dfn-payment④">payment</a>" 权限策略已经可以通过尝试构造 <code
                        class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#dom-paymentrequest" id="ref-for-dom-paymentrequest①⓪">PaymentRequest</a></code>
                    对象静默检测到（若权限策略未启用，构造将抛出错误）。</p>
            <li data-md>
                <p><code
                        class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationavailability-unavailable-no-user-verifying-platform-authenticator" id="ref-for-dom-securepaymentconfirmationavailability-unavailable-no-user-verifying-platform-authenticator②">unavailable-no-user-verifying-platform-authenticator</a></code>：
                    相较于已有的 <code
                        class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/webauthn-3/#dom-publickeycredential-isuserverifyingplatformauthenticatoravailable" id="ref-for-dom-publickeycredential-isuserverifyingplatformauthenticatoravailable①">isUserVerifyingPlatformAuthenticatorAvailable</a></code>
                    API 无（额外）指纹识别风险。
                </p>
        </ul>
        <p>除上述考虑外，本规范允许用户代理在知悉具体原因时选择返回 <code
                class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationavailability-unavailable-unknown-reason" id="ref-for-dom-securepaymentconfirmationavailability-unavailable-unknown-reason③">unavailable-unknown-reason</a></code>，
            以保护用户隐私。例如当用户代理检测到当前帧已访问其他存在指纹识别风险的 API 时，可能会采取此举。</p>
        <h3 class="heading settled" data-level="12.6" id="sctn-user-opt-out"><span class="secno">12.6. </span><span
                class="content">用户选择退出</span><a class="self-link" href="#sctn-user-opt-out"></a></h3>
        <p>API 选项 <code
                class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-showoptout" id="ref-for-dom-securepaymentconfirmationrequest-showoptout③">showOptOut</a></code>
            告知用户代理为用户提供一种方式，让用户表明其希望退出依赖方存储信息。当用户触发此退出时，会向调用方返回 <code
                class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#optouterror" id="ref-for-optouterror①">OptOutError</a></code>，以指示用户的退出意图。随后由调用方决定如何响应该退出，例如清除为用户存储的支付信息。
        </p>
        <p>实现者必须确保返回 <code
                class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#optouterror" id="ref-for-optouterror②">OptOutError</a></code>
            不会泄露用户存在凭证但未完成认证的信息。可用与<a href="#sctn-privacy-probing-credential-ids">§ 12.1 探测凭证 ID</a>
            相似的办法缓解，例如在找不到凭证匹配时，仍在过渡性 UX 中为用户提供选择退出的机会。</p>
        <p>这并非用于删除浏览器数据或凭证的机制——其目的是由开发者通过用户代理提示用户选择退出。用户代理应向用户明确说明，例如给出说明文字：“该提供者可能已存储有关您支付方式的信息，您可以请求删除这些信息。”</p>
        <h2 class="heading settled" data-level="13" id="sctn-accessibility-considerations"><span class="secno">13.
            </span><span class="content">无障碍考虑</span><a class="self-link" href="#sctn-accessibility-considerations"></a>
        </h2>
        <p>用户代理将 <code
                class="idl"><a data-link-type="idl" href="#dom-paymentcredentialinstrument-icon" id="ref-for-dom-paymentcredentialinstrument-icon⑧">icon</a></code>
            与 <code
                class="idl"><a data-link-type="idl" href="#dom-paymentcredentialinstrument-displayname" id="ref-for-dom-paymentcredentialinstrument-displayname④">displayName</a></code>
            一并渲染。依赖方应通过提供足够的信息在 <code
                class="idl"><a data-link-type="idl" href="#dom-paymentcredentialinstrument-displayname" id="ref-for-dom-paymentcredentialinstrument-displayname⑤">displayName</a></code>
            （例如若图标代表银行，则在 <code
                class="idl"><a data-link-type="idl" href="#dom-paymentcredentialinstrument-displayname" id="ref-for-dom-paymentcredentialinstrument-displayname⑥">displayName</a></code>
            中包含银行名称）来确保图标呈现的可访问性。</p>
        <p>实现本规范的用户代理应同时遵循 <a href="https://www.w3.org/TR/webauthn-3/#sctn-accessiblility-considerations">WebAuthn
                的无障碍考虑</a> 与 <a data-link-type="dfn"
                href="https://w3c.github.io/payment-request/#accessibility-considerations"
                id="ref-for-accessibility-considerations">PaymentRequest 的无障碍考虑</a>。</p>
        <h2 class="heading settled" data-level="14" id="sctn-i18n-considerations"><span class="secno">14. </span><span
                class="content">国际化考虑</span><a class="self-link" href="#sctn-i18n-considerations"></a></h2>
        <p>API 的调用方应通过 <code
                class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-locale" id="ref-for-dom-securepaymentconfirmationrequest-locale⑤">locale</a></code>
            成员表达交易对话框所期望的区域设置以及任何可显示字符串的本地化。一般而言，该成员应与请求发起页面的本地化一致（例如通过查询触发请求的按钮的 <code>lang</code> 属性）。</p>
        <p>本规范目前尚未包含机制让调用方将语言或方向元数据与它们传入 API 的可显示字符串（例如 <code
                class="idl"><a data-link-type="idl" href="#dom-paymentcredentialinstrument-displayname" id="ref-for-dom-paymentcredentialinstrument-displayname⑦">displayName</a></code>）关联起来。
        </p>
        <p>在此期间，API 的调用方应当：</p>
        <ul>
            <li data-md>
                <p>在提供时，确保 <code
                        class="idl"><a data-link-type="idl" href="#dom-securepaymentconfirmationrequest-locale" id="ref-for-dom-securepaymentconfirmationrequest-locale⑥">locale</a></code>
                    的值与可显示字符串的语言保持一致。</p>
            <li data-md>
                <p>确保字符串内的方向变化在显示时能被正确渲染（参见“How to use Unicode controls for bidi text”以及“Inline changes to base
                    direction”以获取更多信息）。</p>
        </ul>
        <p>实现（及其他尝试显示这些值的进程）应在将可显示字符串插入用户界面时应用 <a data-link-type="dfn"
                href="https://www.w3.org/TR/i18n-glossary/#dfn-bidi-isolation" id="ref-for-dfn-bidi-isolation">双向隔离（bidi
                isolation）</a>。当已知方向时应设置方向，否则默认采用 first-strong（“auto”）。</p>
        <h2 class="heading settled" data-level="15" id="sctn-iana-considerations"><span class="secno">15. </span><span
                class="content">IANA 考量</span><a class="self-link" href="#sctn-iana-considerations"></a>
        </h2>
        <p>本节将以下列出的<a data-link-type="dfn" href="https://w3c.github.io/webauthn/#extension-identifier"
                id="ref-for-extension-identifier">扩展标识符</a>添加到由 <a data-link-type="biblio"
                href="#biblio-iana-webauthn-registries"
                title="Registries for Web Authentication (WebAuthn)">[IANA-WebAuthn-Registries]</a> 管理的 IANA“WebAuthn
            Extension Identifiers”登记表中（该登记表由 <a data-link-type="biblio" href="#biblio-rfc8809"
                title="Registries for Web Authentication (WebAuthn)">[RFC8809]</a> 建立）。</p>
        <ul>
            <li data-md>
                <p>WebAuthn 扩展标识符：payment</p>
            <li data-md>
                <p>描述：此扩展支持 Secure Payment Confirmation API 所定义的下列功能： (1) 允许在跨域 iframe 中创建凭证；(2) 允许除 Relying Party
                    之外的方代表 Relying Party 使用该凭证执行认证流程；(3) 允许浏览器识别并缓存 Secure Payment Confirmation 凭证。关于 SPC 与 Web
                    Authentication 在重要方面的差异，请参见特别是 <a href="#sctn-security-considerations">§ 11 安全注意事项</a> 与 <a
                        href="#sctn-privacy-considerations">§ 12 隐私考虑</a></p>
            <li data-md>
                <p>规范文档：本规范的 <a href="#sctn-payment-extension-registration">§ 5 WebAuthn Extension - "payment"</a></p>
            <li data-md>
                <p>变更控制者：<a href="https://www.w3.org/groups/wg/payments">W3C Web Payments Working Group</a></p>
            <li data-md>
                <p>注释：登记遵循与 Web Authentication Working Group 在 <a
                        href="https://www.w3.org/2023/05/03-webauthn-minutes#t01">2023-05-03 讨论</a> 的一致意见。</p>
        </ul>
    </main>
    <div data-fill-with="conformance">
        <h2 class="heading no-num no-ref settled" id="w3c-conformance"><span class="content">一致性</span><a
                class="self-link" href="#w3c-conformance"></a></h2>
        <h3 class="heading no-num no-ref settled" id="w3c-conventions"><span class="content">文档约定</span><a
                class="self-link" href="#w3c-conventions"></a></h3>
        <p>一致性要求通过描述性断言和 RFC 2119 术语相结合来表达。
            本文档规范性部分中的关键词 “MUST”、“MUST NOT”、“REQUIRED”、“SHALL”、“SHALL NOT”、“SHOULD”、“SHOULD NOT”、“RECOMMENDED”、“MAY” 和
            “OPTIONAL”
            应按照 RFC 2119 的说明进行解释。
            但为了便于阅读，本规范未将这些词全部大写。

        </p>
        <p>本规范的全部文本均为规范性内容，
            除明确标记为非规范性、示例和注释的部分。<a data-link-type="biblio" href="#biblio-rfc2119"
                title="Key words for use in RFCs to Indicate Requirement Levels">[RFC2119]</a>

        </p>
        <p>本规范中的示例以 “for example” 等词引入，
            或用 <code>class="example"</code> 与规范性文本分开，
            如下所示：

        </p>
        <div class="example" id="w3c-example">
            <a class="self-link" href="#w3c-example"></a>

            <p>这是一个信息性示例。
            </p>
        </div>
        <p>信息性注释以 “Note” 开头，
            并用 <code>class="note"</code> 与规范性文本区分，
            如下所示：

        </p>
        <p class="note" role="note">注意，这是一个信息性注释。</p>
        <details class="wpt-tests-block" dir="ltr" lang="en" open>
            <summary>测试</summary>
            <p>与本规范内容相关的测试
                可能记录在类似这样的“Tests”块中。
                所有此类块都是非规范性的。</p>
            <ul class="wpt-tests-list"></ul>
            <hr>
        </details>
        <section>
            <h3 class="heading no-num no-ref settled" id="w3c-conformant-algorithms"><span
                    class="content">一致性算法</span><a class="self-link" href="#w3c-conformant-algorithms"></a></h3>
            <p>以命令式表述并作为算法一部分的要求（如 “strip any leading space characters” 或“return false and abort these steps”）
                应结合引入该算法时所用关键词（“must”、“should”、“may”等）来解释其含义。

            </p>
            <p>以算法或具体步骤表述的一致性要求可以用任何实现方式实现，
                只要最终结果是等效的。
                特别地，本规范中定义的算法旨在易于理解，
                并不强调性能。
                鼓励实现者进行优化。
            </p>
        </section>
    </div>
    <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
    <h2 class="heading no-num no-ref settled" id="index"><span class="content">索引</span><a class="self-link"
            href="#index"></a></h2>
    <h3 class="heading no-num no-ref settled" id="index-defined-here"><span class="content">本规范定义的术语</span><a
            class="self-link" href="#index-defined-here"></a></h3>
    <ul class="index">
        <li><a
                href="#dictdef-authenticationextensionspaymentinputs">AuthenticationExtensionsPaymentInputs</a><span>，见第§ 5节</span>
        <li><a
                href="#dictdef-authenticationextensionspaymentoutputs">AuthenticationExtensionsPaymentOutputs</a><span>，见第§ 5节</span>
        <li><a href="#dom-securepaymentconfirmationavailability-available">"available"</a><span>，见第§ 4.6节</span>
        <li><a href="#dom-securepaymentconfirmationavailability-available">available</a><span>，见第§ 4.6节</span>
        <li><a href="#bind-a-key-pair">绑定密钥对(bind a key pair)</a><span>，见第§ 6.2节</span>
        <li><a href="#browser-bound-key">浏览器绑定密钥(Browser bound key)</a><span>，见第§ 2节</span>
        <li><a href="#browser-bound-key-store">浏览器绑定密钥存储(browser bound key store)</a><span>，见第§ 6节</span>
        <li><a href="#browser_bound_map">browser_bound_map</a><span>，见第§ 6节</span>
        <li>
            browserBoundPubKeyCredParams
            <ul>
                <li><a href="#dom-authenticationextensionspaymentinputs-browserboundpubkeycredparams">AuthenticationExtensionsPaymentInputs
                        的成员</a><span>，见第§ 5节</span>
                <li><a href="#dom-securepaymentconfirmationrequest-browserboundpubkeycredparams">SecurePaymentConfirmationRequest
                        的成员</a><span>，见第§ 4.4节</span>
            </ul>
        <li>
            browserBoundPublicKey
            <ul>
                <li><a href="#dom-collectedclientadditionalpaymentdata-browserboundpublickey">CollectedClientAdditionalPaymentData
                        的成员</a><span>，见第§ 5.2节</span>
                <li><a href="#dom-collectedclientadditionalpaymentregistrationdata-browserboundpublickey">CollectedClientAdditionalPaymentRegistrationData
                        的成员</a><span>，见第§ 5.3节</span>
            </ul>
        <li><a href="#dictdef-browserboundsignature">BrowserBoundSignature</a><span>，见第§ 5节</span>
        <li><a
                href="#dom-authenticationextensionspaymentoutputs-browserboundsignature">browserBoundSignature</a><span>，见第§ 5节</span>
        <li><a href="#dom-securepaymentconfirmationrequest-challenge">challenge</a><span>，见第§ 4.4节</span>
        <li><a href="#client-extension-processing-authentication">客户端扩展处理（认证）</a><span>，见第§ 5节</span>
        <li><a href="#client-extension-processing-registration">客户端扩展处理（注册）</a><span>，见第§ 5节</span>
        <li><a
                href="#dictdef-collectedclientadditionalpaymentdata">CollectedClientAdditionalPaymentData</a><span>，见第§ 5.2节</span>
        <li><a
                href="#dictdef-collectedclientadditionalpaymentregistrationdata">CollectedClientAdditionalPaymentRegistrationData</a><span>，见第§ 5.3节</span>
        <li><a href="#dictdef-collectedclientpaymentdata">CollectedClientPaymentData</a><span>，见第§ 5.1节</span>
        <li><a href="#create-a-key-pair">创建密钥对(create a key pair)</a><span>，见第§ 6.1节</span>
        <li><a href="#dom-securepaymentconfirmationrequest-credentialids">credentialIds</a><span>，见第§ 4.4节</span>
        <li><a href="#current-transaction-automation-mode">current transaction automation
                mode</a><span>，见第§ 10.1节</span>
        <li><a href="#dom-paymentcredentialinstrument-details">details</a><span>，见第§ 7.1节</span>
        <li><a href="#dom-paymentcredentialinstrument-displayname">displayName</a><span>，见第§ 7.1节</span>
        <li><a href="#dom-securepaymentconfirmationrequest-extensions">extensions</a><span>，见第§ 4.4节</span>
        <li><a href="#generate-a-browser-bound-signature">生成浏览器绑定签名(generate a browser bound
                signature)</a><span>，见第§ 6.5节</span>
        <li><a href="#get-a-browser-bound-public-key">获取浏览器绑定公钥(get a browser bound public
                key)</a><span>，见第§ 6.4节</span>
        <li><a href="#get-or-create-a-browser-bound-key">获取或创建浏览器绑定密钥(get or create a browser bound
                key)</a><span>，见第§ 6.3节</span>
        <li><a href="#dom-paymentcredentialinstrument-icon">icon</a><span>，见第§ 7.1节</span>
        <li><a href="#dom-paymentcredentialinstrument-iconmustbeshown">iconMustBeShown</a><span>，见第§ 7.1节</span>
        <li>
            instrument
            <ul>
                <li><a href="#dom-authenticationextensionspaymentinputs-instrument">AuthenticationExtensionsPaymentInputs
                        的成员</a><span>，见第§ 5节</span>
                <li><a href="#dom-collectedclientadditionalpaymentdata-instrument">CollectedClientAdditionalPaymentData
                        的成员</a><span>，见第§ 5.2节</span>
                <li><a href="#dom-securepaymentconfirmationrequest-instrument">SecurePaymentConfirmationRequest
                        的成员</a><span>，见第§ 4.4节</span>
            </ul>
        <li><a href="#dom-authenticationextensionspaymentinputs-ispayment">isPayment</a><span>，见第§ 5节</span>
        <li><a href="#key-pair">密钥对(Key Pair)</a><span>，见第§ 2节</span>
        <li><a href="#keypair_map">keypair_map</a><span>，见第§ 6节</span>
        <li><a href="#dom-paymententitylogo-label">label</a><span>，见第§ 7.2节</span>
        <li><a href="#dom-securepaymentconfirmationrequest-locale">locale</a><span>，见第§ 4.4节</span>
        <li>
            payeeName
            <ul>
                <li><a href="#dom-authenticationextensionspaymentinputs-payeename">AuthenticationExtensionsPaymentInputs
                        的成员</a><span>，见第§ 5节</span>
                <li><a href="#dom-collectedclientadditionalpaymentdata-payeename">CollectedClientAdditionalPaymentData
                        的成员</a><span>，见第§ 5.2节</span>
                <li><a href="#dom-securepaymentconfirmationrequest-payeename">SecurePaymentConfirmationRequest
                        的成员</a><span>，见第§ 4.4节</span>
            </ul>
        <li>
            payeeOrigin
            <ul>
                <li><a href="#dom-authenticationextensionspaymentinputs-payeeorigin">AuthenticationExtensionsPaymentInputs
                        的成员</a><span>，见第§ 5节</span>
                <li><a href="#dom-collectedclientadditionalpaymentdata-payeeorigin">CollectedClientAdditionalPaymentData
                        的成员</a><span>，见第§ 5.2节</span>
                <li><a href="#dom-securepaymentconfirmationrequest-payeeorigin">SecurePaymentConfirmationRequest
                        的成员</a><span>，见第§ 4.4节</span>
            </ul>
        <li>
            payment
            <ul>
                <li><a href="#dom-authenticationextensionsclientinputs-payment">AuthenticationExtensionsClientInputs
                        的成员</a><span>，见第§ 5节</span>
                <li><a href="#dom-authenticationextensionsclientoutputs-payment">AuthenticationExtensionsClientOutputs
                        的成员</a><span>，见第§ 5节</span>
                <li><a href="#dom-collectedclientpaymentdata-payment">CollectedClientPaymentData
                        的成员</a><span>，见第§ 5.1节</span>
            </ul>
        <li><a href="#dictdef-paymentcredentialinstrument">PaymentCredentialInstrument</a><span>，见第§ 7.1节</span>
        <li>
            paymentEntitiesLogos
            <ul>
                <li><a href="#dom-authenticationextensionspaymentinputs-paymententitieslogos">AuthenticationExtensionsPaymentInputs
                        的成员</a><span>，见第§ 5节</span>
                <li><a href="#dom-collectedclientadditionalpaymentdata-paymententitieslogos">CollectedClientAdditionalPaymentData
                        的成员</a><span>，见第§ 5.2节</span>
                <li><a href="#dom-securepaymentconfirmationrequest-paymententitieslogos">SecurePaymentConfirmationRequest
                        的成员</a><span>，见第§ 4.4节</span>
            </ul>
        <li><a href="#dictdef-paymententitylogo">PaymentEntityLogo</a><span>，见第§ 7.2节</span>
        <li><a href="#key-pair-private-key">私钥(private key)</a><span>，见第§ 2节</span>
        <li><a href="#key-pair-public-key">公钥(public key)</a><span>，见第§ 2节</span>
        <li>
            rpId
            <ul>
                <li><a href="#dom-authenticationextensionspaymentinputs-rpid">AuthenticationExtensionsPaymentInputs
                        的成员</a><span>，见第§ 5节</span>
                <li><a href="#dom-collectedclientadditionalpaymentdata-rpid">CollectedClientAdditionalPaymentData
                        的成员</a><span>，见第§ 5.2节</span>
                <li><a href="#dom-securepaymentconfirmationrequest-rpid">SecurePaymentConfirmationRequest
                        的成员</a><span>，见第§ 4.4节</span>
            </ul>
        <li><a href="#secure-payment-confirmation">secure-payment-confirmation</a><span>，见第§ 4节</span>
        <li><a
                href="#enumdef-securepaymentconfirmationavailability">SecurePaymentConfirmationAvailability</a><span>，见第§ 4.6节</span>
        <li><a
                href="#dom-paymentrequest-securepaymentconfirmationavailability">securePaymentConfirmationAvailability()</a><span>，见第§ 4.6节</span>
        <li><a href="#secure-payment-confirmation-payment-handler">Secure Payment Confirmation payment
                handler</a><span>，见第§ 4节</span>
        <li><a
                href="#dictdef-securepaymentconfirmationrequest">SecurePaymentConfirmationRequest</a><span>，见第§ 4.4节</span>
        <li><a href="#set-spc-transaction-mode">设置 SPC 交易模式(Set SPC Transaction Mode)</a><span>，见第§ 10.1节</span>
        <li><a href="#dom-securepaymentconfirmationrequest-showoptout">showOptOut</a><span>，见第§ 4.4节</span>
        <li><a href="#dom-browserboundsignature-signature">signature</a><span>，见第§ 5节</span>
        <li><a href="#spc-credential">SPC 凭证(SPC Credential)</a><span>，见第§ 2节</span>
        <li><a href="#steps-to-silently-determine-if-a-credential-is-available-for-the-current-device">静默确定当前设备是否有凭证的步骤(Steps
                to silently determine if a credential is available for the current device)</a><span>，见第§ 2节</span>
        <li><a href="#steps-to-silently-determine-if-an-spc-credential-is-third-party-enabled">静默确定 SPC
                凭证是否启用第三方的步骤(Steps to silently determine if an SPC Credential is third-party
                enabled)</a><span>，见第§ 2节</span>
        <li><a href="#third-party-enabled-spc-credential">已启用第三方的 SPC 凭证(Third-party enabled SPC
                Credential)</a><span>，见第§ 2节</span>
        <li><a href="#dom-securepaymentconfirmationrequest-timeout">timeout</a><span>，见第§ 4.4节</span>
        <li>
            topOrigin
            <ul>
                <li><a href="#dom-authenticationextensionspaymentinputs-toporigin">AuthenticationExtensionsPaymentInputs
                        的成员</a><span>，见第§ 5节</span>
                <li><a href="#dom-collectedclientadditionalpaymentdata-toporigin">CollectedClientAdditionalPaymentData
                        的成员</a><span>，见第§ 5.2节</span>
            </ul>
        <li>
            total
            <ul>
                <li><a href="#dom-authenticationextensionspaymentinputs-total">AuthenticationExtensionsPaymentInputs
                        的成员</a><span>，见第§ 5节</span>
                <li><a href="#dom-collectedclientadditionalpaymentdata-total">CollectedClientAdditionalPaymentData
                        的成员</a><span>，见第§ 5.2节</span>
            </ul>
        <li><a
                href="#dom-securepaymentconfirmationavailability-unavailable-feature-not-enabled">"unavailable-feature-not-enabled"</a><span>，见第§ 4.6节</span>
        <li><a
                href="#dom-securepaymentconfirmationavailability-unavailable-feature-not-enabled">unavailable-feature-not-enabled</a><span>，见第§ 4.6节</span>
        <li><a
                href="#dom-securepaymentconfirmationavailability-unavailable-no-permission-policy">"unavailable-no-permission-policy"</a><span>，见第§ 4.6节</span>
        <li><a
                href="#dom-securepaymentconfirmationavailability-unavailable-no-permission-policy">unavailable-no-permission-policy</a><span>，见第§ 4.6节</span>
        <li><a
                href="#dom-securepaymentconfirmationavailability-unavailable-no-user-verifying-platform-authenticator">"unavailable-no-user-verifying-platform-authenticator"</a><span>，见第§ 4.6节</span>
        <li><a
                href="#dom-securepaymentconfirmationavailability-unavailable-no-user-verifying-platform-authenticator">unavailable-no-user-verifying-platform-authenticator</a><span>，见第§ 4.6节</span>
        <li><a
                href="#dom-securepaymentconfirmationavailability-unavailable-unknown-reason">"unavailable-unknown-reason"</a><span>，见第§ 4.6节</span>
        <li><a
                href="#dom-securepaymentconfirmationavailability-unavailable-unknown-reason">unavailable-unknown-reason</a><span>，见第§ 4.6节</span>
        <li><a href="#dom-paymententitylogo-url">url</a><span>，见第§ 7.2节</span>
    </ul>
    <h3 class="heading no-num no-ref settled" id="index-defined-elsewhere"><span class="content">引用中定义的术语</span><a
            class="self-link" href="#index-defined-elsewhere"></a></h3>
    <ul class="index">
        <li>
            <a data-link-type="biblio">[CREDENTIAL-MANAGEMENT-1]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="abd7d801">创建权限策略（Create Permissions Policy）</span>
                <li><span class="dfn-paneled" id="a384672a">create()</span>
                <li><span class="dfn-paneled" id="19b78467">get()</span>
                <li><span class="dfn-paneled" id="dbf8986c">id</span>
                <li><span class="dfn-paneled" id="fe4adbb9">请求凭证（request a credential）</span>
            </ul>
        <li>
            <a data-link-type="biblio">[DOM]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="85394472">文档（Document）</span>
            </ul>
        <li>
            <a data-link-type="biblio">[ECMASCRIPT]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="8841d736">内部方法（internal method）</span>
            </ul>
        <li>
            <a data-link-type="biblio">[FETCH]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="55213b5b">请求（request）</span>
            </ul>
        <li>
            <a data-link-type="biblio">[FS]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="efc13bf5">write(buffer, options)</span>
            </ul>
        <li>
            <a data-link-type="biblio">[HTML]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="aca22383">消耗用户激活（consume user activation）</span>
                <li><span class="dfn-paneled" id="12b8dfc0">当前设置对象（current settings object）</span>
                <li><span class="dfn-paneled" id="a72449dd">并行（in parallel）</span>
                <li><span class="dfn-paneled" id="086e3aff">origin</span>
                <li><span class="dfn-paneled" id="43ac8374">origin <small>（针对环境设置对象）</small></span>
                <li><span class="dfn-paneled" id="e99bd18e">相关全局对象（relevant global object）</span>
                <li><span class="dfn-paneled" id="9c4c1e66">相关设置对象（relevant settings object）</span>
                <li><span class="dfn-paneled" id="dae0bfde">origin 的序列化（serialization of an origin）</span>
                <li><span class="dfn-paneled" id="c63519ed">顶级 origin（top-level origin）</span>
                <li><span class="dfn-paneled" id="47fe679e">瞬态激活（transient activation）</span>
            </ul>
        <li>
            <a data-link-type="biblio">[I18N-GLOSSARY]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="d03dbdd2">bidi 隔离（bidi isolation）</span>
                <li><span class="dfn-paneled" id="5553ccf9">语言协商（language negotiation）</span>
                <li><span class="dfn-paneled" id="6533c360">语言优先列表（language priority list）</span>
                <li><span class="dfn-paneled" id="16ad0fd2">locale</span>
            </ul>
        <li>
            <a data-link-type="biblio">[IMAGE-RESOURCE]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="71c2b15c">获取图片资源（fetching an image resource）</span>
                <li><span class="dfn-paneled" id="f7e154e1">src</span>
            </ul>
        <li>
            <a data-link-type="biblio">[INFRA]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="53275e46">append</span>
                <li><span class="dfn-paneled" id="03afaf9c">empty（空）</span>
                <li><span class="dfn-paneled" id="1243a891">exist（存在）</span>
                <li><span class="dfn-paneled" id="860300d4">实现自定义（implementation-defined）</span>
                <li><span class="dfn-paneled" id="6b815fdd">is empty（为空）</span>
                <li><span class="dfn-paneled" id="dd460c8e">is not empty（非空）</span>
                <li><span class="dfn-paneled" id="649608b9">list（列表）</span>
                <li><span class="dfn-paneled" id="99c988d6">remove（移除）</span>
                <li><span class="dfn-paneled" id="0e6b2056">set（设置）</span>
                <li><span class="dfn-paneled" id="0204d188">size（大小）</span>
                <li><span class="dfn-paneled" id="984221ca">struct（结构体）</span>
                <li><span class="dfn-paneled" id="0e8de730">tuple（二元组）</span>
                <li><span class="dfn-paneled" id="6d19ac93">user agent（用户代理）</span>
            </ul>
        <li>
            <a data-link-type="biblio">[PAYMENT-METHOD-ID]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="1a0d3ec4">标准化支付方式注册表（registry of standardized payment methods）</span>
                <li><span class="dfn-paneled" id="468e7b29">标准化支付方式标识符（standardized payment method identifier）</span>
            </ul>
        <li>
            <a data-link-type="biblio">[PAYMENT-REQUEST]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="b3d365cb">PaymentCurrencyAmount</span>
                <li><span class="dfn-paneled" id="c36b44c2">PaymentRequest</span>
                <li><span class="dfn-paneled" id="dffa578a">canMakePayment()</span>
                <li><span class="dfn-paneled" id="004ca005">constructor()</span>
                <li><span class="dfn-paneled" id="8d1f4176">currency（货币）</span>
                <li><span class="dfn-paneled" id="0d0033ad">payment handler</span>
                <li><span class="dfn-paneled" id="75f46ef4">payment method（支付方式）</span>
                <li><span class="dfn-paneled" id="87335f73">payment method additional data type（支付方式附加数据类型）</span>
                <li><span class="dfn-paneled" id="dc24f2fe">payment permission string（支付权限字符串）</span>
                <li><span class="dfn-paneled" id="60fc1ac5">payment request accessibility
                        considerations（支付请求可访问性考虑）</span>
                <li><span class="dfn-paneled" id="b29c33d9">payment request details（支付请求详情）</span>
                <li><span class="dfn-paneled" id="3a4e3860">show()</span>
                <li><span class="dfn-paneled" id="02f7d0f9">steps to check if a payment can be made（检查是否能支付的步骤）</span>
                <li><span class="dfn-paneled" id="559656f0">steps to respond to a payment request（响应请求的步骤）</span>
                <li><span class="dfn-paneled" id="ba4dacbc">steps to validate payment method data（校验支付方式数据的步骤）</span>
                <li><span class="dfn-paneled" id="00dde5ab">total（总计）</span>
                <li><span class="dfn-paneled" id="04060d97">user aborts the payment request algorithm（用户中止支付请求算法）</span>
                <li><span class="dfn-paneled" id="3c7fe9c4">user accepts the payment request algorithm（用户接受请求算法）</span>
                <li><span class="dfn-paneled" id="aeff228f">value（值）</span>
            </ul>
        <li>
            <a data-link-type="biblio">[URL]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="959ad97b">origin</span>
                <li><span class="dfn-paneled" id="3a711be7">scheme（协议）</span>
                <li><span class="dfn-paneled" id="ca3ca4ae">URL parser（URL 解析器）</span>
                <li><span class="dfn-paneled" id="79cad4dd">valid domain（有效域名）</span>
            </ul>
        <li>
            <a data-link-type="biblio">[WEB-AUTHN]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="8f3d2845">authentication ceremony（认证流程）</span>
                <li><span class="dfn-paneled" id="9c64cd22">authentication extension（认证扩展）</span>
                <li><span class="dfn-paneled" id="cf3032fa">base64url encoding</span>
                <li><span class="dfn-paneled" id="88ae1d28">client extension（客户端扩展）</span>
                <li><span class="dfn-paneled" id="af1d27d0">create credential async loop（创建凭证异步循环）</span>
                <li><span class="dfn-paneled" id="e4d7113a">credential ID（凭证ID）</span>
                <li><span class="dfn-paneled" id="9877bbe9">credentialPublicKey（凭证公钥）</span>
                <li><span class="dfn-paneled" id="3781d718">discoverable credential（可发现凭证）</span>
                <li><span class="dfn-paneled" id="b6a00a38">extension identifier（扩展标识符）</span>
                <li><span class="dfn-paneled" id="fe1cbc76">public key credential（公钥凭证）</span>
                <li><span class="dfn-paneled" id="5d6beb3a">registration extension（注册扩展）</span>
                <li><span class="dfn-paneled" id="77a62788">relying party（依赖方）</span>
                <li><span class="dfn-paneled" id="c92c9b81">relying party identifier（依赖方标识符）</span>
                <li><span class="dfn-paneled" id="c7e62ce0">user member（用户成员）</span>
                <li><span class="dfn-paneled" id="03162f8e">user-verifying platform authenticator（用户验证平台认证器）</span>
                <li><span class="dfn-paneled" id="2e3d2880">WebAuthn Extension（WebAuthn 扩展）</span>
            </ul>
        <li>
            <a data-link-type="biblio">[WEBAUTHN-3]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="0686e261">AuthenticationExtensionsClientInputs</span>
                <li><span class="dfn-paneled" id="c72445a7">AuthenticationExtensionsClientOutputs</span>
                <li><span class="dfn-paneled" id="cc6d7419">COSEAlgorithmIdentifier</span>
                <li><span class="dfn-paneled" id="55b47dd4">CollectedClientData</span>
                <li><span class="dfn-paneled" id="3955f290">PublicKeyCredential</span>
                <li><span class="dfn-paneled" id="7cbec8a9">PublicKeyCredentialCreationOptions</span>
                <li><span class="dfn-paneled" id="0267597d">PublicKeyCredentialDescriptor</span>
                <li><span class="dfn-paneled" id="a6eb349a">PublicKeyCredentialParameters</span>
                <li><span class="dfn-paneled" id="1ebc09ba">PublicKeyCredentialRequestOptions</span>
                <li><span class="dfn-paneled" id="464020c6">PublicKeyCredentialType</span>
                <li><span class="dfn-paneled" id="fedc36f2">[[Create]](origin, options, sameOriginWithAncestors)</span>
                <li><span class="dfn-paneled" id="6ee1791f">[[DiscoverFromExternalSource]](origin, options,
                        sameOriginWithAncestors)</span>
                <li><span class="dfn-paneled" id="56f1d711">[[clientExtensionsResults]]</span>
                <li><span class="dfn-paneled" id="b695f46e">[[identifier]]</span>
                <li><span class="dfn-paneled" id="d5675871">alg（签名算法）</span>
                <li><span class="dfn-paneled" id="171090ff">allowCredentials</span>
                <li><span class="dfn-paneled" id="c1452a90">authenticatorAttachment</span>
                <li><span class="dfn-paneled" id="08fd542c">authenticatorSelection</span>
                <li><span class="dfn-paneled" id="cb79a6a2">challenge <small>（对 CollectedClientData）</small></span>
                <li><span class="dfn-paneled" id="a115429a">challenge <small>（对
                            PublicKeyCredentialRequestOptions）</small></span>
                <li><span class="dfn-paneled" id="0647fbdf">displayName</span>
                <li><span class="dfn-paneled" id="536803f2">extensions</span>
                <li><span class="dfn-paneled" id="dea71296">id</span>
                <li><span class="dfn-paneled" id="dcdc90bd">internal</span>
                <li><span class="dfn-paneled" id="70da06af">isUserVerifyingPlatformAuthenticatorAvailable()</span>
                <li><span class="dfn-paneled" id="c84aeda3">name</span>
                <li><span class="dfn-paneled" id="b64ab3cb">origin</span>
                <li><span class="dfn-paneled" id="98e822a3">platform</span>
                <li><span class="dfn-paneled" id="f9f8e868">preferred</span>
                <li><span class="dfn-paneled" id="f0892962">pubKeyCredParams</span>
                <li><span class="dfn-paneled" id="2636efeb">public-key</span>
                <li><span class="dfn-paneled" id="9b39aa25">publicKey</span>
                <li><span class="dfn-paneled" id="8e19bb11">publickey-credentials-create-feature</span>
                <li><span class="dfn-paneled" id="d5865ffa">required <small>（对 ResidentKeyRequirement）</small></span>
                <li><span class="dfn-paneled" id="ddee5d8d">required <small>（对
                            UserVerificationRequirement）</small></span>
                <li><span class="dfn-paneled" id="34dd95ae">residentKey</span>
                <li><span class="dfn-paneled" id="05c1c6e7">rpId</span>
                <li><span class="dfn-paneled" id="d9d31606">timeout</span>
                <li><span class="dfn-paneled" id="1ad9730e">transports</span>
                <li><span class="dfn-paneled" id="aedbc862">type <small>（对 CollectedClientData）</small></span>
                <li><span class="dfn-paneled" id="651f02aa">type <small>（对 PublicKeyCredentialDescriptor）</small></span>
                <li><span class="dfn-paneled" id="af66c42a">type <small>（对 PublicKeyCredentialParameters）</small></span>
                <li><span class="dfn-paneled" id="5431c023">userVerification <small>（对
                            AuthenticatorSelectionCriteria）</small></span>
                <li><span class="dfn-paneled" id="68b0f808">userVerification <small>（对
                            PublicKeyCredentialRequestOptions）</small></span>
            </ul>
        <li>
            <a data-link-type="biblio">[WEBCRYPTO-2]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="4f49be59">getRandomValues()</span>
            </ul>
        <li>
            <a data-link-type="biblio">[WEBDRIVER1]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="cce1676e">扩展命令（extension command）</span>
                <li><span class="dfn-paneled" id="5b668531">获取属性（getting a property）</span>
                <li><span class="dfn-paneled" id="8da4d1e3">无效参数（invalid argument）</span>
                <li><span class="dfn-paneled" id="82c23298">远端步骤（remote end steps）</span>
                <li><span class="dfn-paneled" id="4be6272b">success（成功）</span>
                <li><span class="dfn-paneled" id="603c5d8f">undefined（未定义）</span>
                <li><span class="dfn-paneled" id="5cf0e148">WebDriver error（WebDriver 错误）</span>
                <li><span class="dfn-paneled" id="7482107b">WebDriver error code（WebDriver 错误码）</span>
            </ul>
        <li>
            <a data-link-type="biblio">[WEBIDL]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="d25dfb2c">AbortError</span>
                <li><span class="dfn-paneled" id="2f8afbfe">ArrayBuffer</span>
                <li><span class="dfn-paneled" id="3aff2fb3">BufferSource</span>
                <li><span class="dfn-paneled" id="dca2de17">DOMException</span>
                <li><span class="dfn-paneled" id="797018a7">InvalidStateError</span>
                <li><span class="dfn-paneled" id="ba556545">NotAllowedError</span>
                <li><span class="dfn-paneled" id="b1c1965a">OptOutError</span>
                <li><span class="dfn-paneled" id="bdbd19d1">Promise</span>
                <li><span class="dfn-paneled" id="5e129c74">QuotaExceededError</span>
                <li><span class="dfn-paneled" id="ec878a66">RangeError</span>
                <li><span class="dfn-paneled" id="c3e881ef">SecurityError</span>
                <li><span class="dfn-paneled" id="82ca3efc">TypeError</span>
                <li><span class="dfn-paneled" id="b0d7f3c3">USVString</span>
                <li><span class="dfn-paneled" id="81dd847b">UnknownError</span>
                <li><span class="dfn-paneled" id="d0b4a948">a promise rejected with（一个被拒绝的 Promise）</span>
                <li><span class="dfn-paneled" id="5372cca8">boolean</span>
                <li><span class="dfn-paneled" id="9cce47fd">sequence</span>
                <li><span class="dfn-paneled" id="e97a9688">unsigned long</span>
            </ul>
    </ul>
    <h2 class="heading no-num no-ref settled" id="references"><span class="content">参考文献</span><a class="self-link"
            href="#references"></a></h2>
    <h3 class="heading no-num no-ref settled" id="normative"><span class="content">规范性引用</span><a class="self-link"
            href="#normative"></a></h3>
    <dl>
        <dt id="biblio-credential-management-1">[CREDENTIAL-MANAGEMENT-1]
        <dd>Nina Satragno; Marcos Caceres. <a
                href="https://www.w3.org/TR/credential-management-1/"><cite>凭证管理一级</cite></a>. 2025年10月28日. WD. URL: <a
                href="https://www.w3.org/TR/credential-management-1/">https://www.w3.org/TR/credential-management-1/</a>
        <dt id="biblio-dom">[DOM]
        <dd>Anne van Kesteren. <a href="https://dom.spec.whatwg.org/"><cite>DOM 标准</cite></a>. 现行标准.
            URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
        <dt id="biblio-ecmascript">[ECMASCRIPT]
        <dd><a href="https://tc39.es/ecma262/multipage/"><cite>ECMAScript 语言规范</cite></a>. URL: <a
                href="https://tc39.es/ecma262/multipage/">https://tc39.es/ecma262/multipage/</a>
        <dt id="biblio-fetch">[FETCH]
        <dd>Anne van Kesteren. <a href="https://fetch.spec.whatwg.org/"><cite>Fetch 标准</cite></a>. 现行标准. URL: <a
                href="https://fetch.spec.whatwg.org/">https://fetch.spec.whatwg.org/</a>
        <dt id="biblio-html">[HTML]
        <dd>Anne van Kesteren; et al. <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML 标准</cite></a>.
            现行标准. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
        <dt id="biblio-i18n-glossary">[I18N-GLOSSARY]
        <dd>Richard Ishida; Addison Phillips. <a href="https://www.w3.org/TR/i18n-glossary/"><cite>国际化术语表</cite></a>.
            2024年10月17日. 备注. URL: <a
                href="https://www.w3.org/TR/i18n-glossary/">https://www.w3.org/TR/i18n-glossary/</a>
        <dt id="biblio-iana-cose-algs-reg">[IANA-COSE-ALGS-REG]
        <dd><a href="https://www.iana.org/assignments/cose/cose.xhtml#algorithms"><cite>IANA CBOR
                    对象签名和加密（COSE）算法注册表</cite></a>. URL: <a
                href="https://www.iana.org/assignments/cose/cose.xhtml#algorithms">https://www.iana.org/assignments/cose/cose.xhtml#algorithms</a>
        <dt id="biblio-iana-webauthn-registries">[IANA-WebAuthn-Registries]
        <dd><a href="https://www.rfc-editor.org/rfc/rfc8809.html"><cite>Web 身份认证注册表（WebAuthn）</cite></a>. URL: <a
                href="https://www.rfc-editor.org/rfc/rfc8809.html">https://www.rfc-editor.org/rfc/rfc8809.html</a>
        <dt id="biblio-image-resource">[IMAGE-RESOURCE]
        <dd>Aaron Gustafson; Rayan Kanso; Marcos Caceres. <a
                href="https://www.w3.org/TR/image-resource/"><cite>图像资源</cite></a>. 2021年6月4日. WD. URL: <a
                href="https://www.w3.org/TR/image-resource/">https://www.w3.org/TR/image-resource/</a>
        <dt id="biblio-infra">[INFRA]
        <dd>Anne van Kesteren; Domenic Denicola. <a href="https://infra.spec.whatwg.org/"><cite>Infra
                    标准</cite></a>. 现行标准. URL: <a
                href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
        <dt id="biblio-payment-method-id">[PAYMENT-METHOD-ID]
        <dd>Marcos Caceres. <a href="https://www.w3.org/TR/payment-method-id/"><cite>支付方式标识符</cite></a>. 2022年9月8日. REC.
            URL: <a href="https://www.w3.org/TR/payment-method-id/">https://www.w3.org/TR/payment-method-id/</a>
        <dt id="biblio-payment-request">[PAYMENT-REQUEST]
        <dd>Marcos Caceres; Ian Jacobs; Stephen McGruer. <a href="https://www.w3.org/TR/payment-request/"><cite>支付请求
                    API</cite></a>. 2025年9月30日. CRD. URL: <a
                href="https://www.w3.org/TR/payment-request/">https://www.w3.org/TR/payment-request/</a>
        <dt id="biblio-rfc2119">[RFC2119]
        <dd>S. Bradner. <a href="https://datatracker.ietf.org/doc/html/rfc2119"><cite>用于指示要求级别的关键词</cite></a>. 1997年3月.
            最佳当前实践. URL: <a
                href="https://datatracker.ietf.org/doc/html/rfc2119">https://datatracker.ietf.org/doc/html/rfc2119</a>
        <dt id="biblio-rfc8809">[RFC8809]
        <dd>J. Hodges; G. Mandyam; M. Jones. <a href="https://www.rfc-editor.org/rfc/rfc8809"><cite>Web
                    身份认证注册表（WebAuthn）</cite></a>. 2020年8月. 信息性. URL: <a
                href="https://www.rfc-editor.org/rfc/rfc8809">https://www.rfc-editor.org/rfc/rfc8809</a>
        <dt id="biblio-url">[URL]
        <dd>Anne van Kesteren. <a href="https://url.spec.whatwg.org/"><cite>URL 标准</cite></a>. 现行标准.
            URL: <a href="https://url.spec.whatwg.org/">https://url.spec.whatwg.org/</a>
        <dt id="biblio-webauthn-3">[WEBAUTHN-3]
        <dd>Tim Cappalli; et al. <a href="https://www.w3.org/TR/webauthn-3/"><cite>Web 身份认证：公共密钥凭证访问 API -
                    第3级</cite></a>. 2025年1月27日. WD. URL: <a
                href="https://www.w3.org/TR/webauthn-3/">https://www.w3.org/TR/webauthn-3/</a>
        <dt id="biblio-webcrypto-2">[WEBCRYPTO-2]
        <dd>Daniel Huigens. <a href="https://www.w3.org/TR/webcrypto-2/"><cite>Web 加密二级</cite></a>. 2025年4月22日. FPWD.
            URL: <a href="https://www.w3.org/TR/webcrypto-2/">https://www.w3.org/TR/webcrypto-2/</a>
        <dt id="biblio-webdriver1">[WEBDRIVER1]
        <dd>Simon Stewart; David Burns. <a href="https://www.w3.org/TR/webdriver1/"><cite>WebDriver</cite></a>.
            2018年6月5日. REC. URL: <a href="https://www.w3.org/TR/webdriver1/">https://www.w3.org/TR/webdriver1/</a>
        <dt id="biblio-webdriver2">[WebDriver2]
        <dd>Simon Stewart; David Burns. <a href="https://www.w3.org/TR/webdriver2/"><cite>WebDriver</cite></a>.
            2025年10月28日. WD. URL: <a href="https://www.w3.org/TR/webdriver2/">https://www.w3.org/TR/webdriver2/</a>
        <dt id="biblio-webidl">[WEBIDL]
        <dd>Edgar Chen; Timothy Gu. <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL 标准</cite></a>. 现行标准. URL: <a
                href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
    </dl>
    <h3 class="heading no-num no-ref settled" id="informative"><span class="content">非规范性引用</span><a class="self-link"
            href="#informative"></a></h3>
    <dl>
        <dt id="biblio-bcp47">[BCP47]
        <dd>A. Phillips, Ed.; M. Davis, Ed.. <a
                href="https://www.rfc-editor.org/rfc/rfc5646"><cite>用于标识语言的标签</cite></a>. 2009年9月. 最佳当前实践. URL: <a
                href="https://www.rfc-editor.org/rfc/rfc5646">https://www.rfc-editor.org/rfc/rfc5646</a>
        <dt id="biblio-fs">[FS]
        <dd>Austin Sullivan. <a href="https://fs.spec.whatwg.org/"><cite>文件系统标准</cite></a>. 现行标准. URL: <a
                href="https://fs.spec.whatwg.org/">https://fs.spec.whatwg.org/</a>
        <dt id="biblio-rfc2397">[RFC2397]
        <dd>L. Masinter. <a href="https://www.rfc-editor.org/rfc/rfc2397"><cite>“data” URL 方案</cite></a>. 1998年8月. 拟标准.
            URL: <a href="https://www.rfc-editor.org/rfc/rfc2397">https://www.rfc-editor.org/rfc/rfc2397</a>
        <dt id="biblio-rfc4647">[RFC4647]
        <dd>A. Phillips, Ed.; M. Davis, Ed.. <a href="https://www.rfc-editor.org/rfc/rfc4647"><cite>语言标签匹配</cite></a>.
            2006年9月. 最佳当前实践. URL: <a
                href="https://www.rfc-editor.org/rfc/rfc4647">https://www.rfc-editor.org/rfc/rfc4647</a>
        <dt id="biblio-webauthn-conditional-ui">[WEBAUTHN-CONDITIONAL-UI]
        <dd><a href="https://github.com/w3c/webauthn/issues/1545"><cite>WebAuthn 条件 UI 提案</cite></a>. URL: <a
                href="https://github.com/w3c/webauthn/issues/1545">https://github.com/w3c/webauthn/issues/1545</a>
    </dl>
    <h2 class="heading no-num no-ref settled" id="idl-index"><span class="content">IDL 索引</span><a class="self-link"
            href="#idl-index"></a></h2>
    <pre class="def highlight idl"><c- b>dictionary</c-> <a class="idl-code" data-link-type="dictionary" href="#dictdef-securepaymentconfirmationrequest"><c- g>SecurePaymentConfirmationRequest</c-></a> {
    <c- b>required</c-> <a data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#BufferSource"><c- n>BufferSource</c-></a> <a data-type="BufferSource" href="#dom-securepaymentconfirmationrequest-challenge"><code><c- g>challenge</c-></code></a>;
    <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString"><c- b>USVString</c-></a> <a data-type="USVString" href="#dom-securepaymentconfirmationrequest-rpid"><code><c- g>rpId</c-></code></a>;
    <c- b>required</c-> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#BufferSource"><c- n>BufferSource</c-></a>> <a data-type="sequence<BufferSource>" href="#dom-securepaymentconfirmationrequest-credentialids"><code><c- g>credentialIds</c-></code></a>;
    <c- b>required</c-> <a data-link-type="idl-name" href="#dictdef-paymentcredentialinstrument"><c- n>PaymentCredentialInstrument</c-></a> <a data-type="PaymentCredentialInstrument" href="#dom-securepaymentconfirmationrequest-instrument"><code><c- g>instrument</c-></code></a>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long"><c- b>unsigned</c-> <c- b>long</c-></a> <a data-type="unsigned long" href="#dom-securepaymentconfirmationrequest-timeout"><code><c- g>timeout</c-></code></a>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString"><c- b>USVString</c-></a> <a data-type="USVString" href="#dom-securepaymentconfirmationrequest-payeename"><code><c- g>payeeName</c-></code></a>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString"><c- b>USVString</c-></a> <a data-type="USVString" href="#dom-securepaymentconfirmationrequest-payeeorigin"><code><c- g>payeeOrigin</c-></code></a>;
    <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#dictdef-paymententitylogo"><c- n>PaymentEntityLogo</c-></a>> <a data-type="sequence<PaymentEntityLogo>" href="#dom-securepaymentconfirmationrequest-paymententitieslogos"><code><c- g>paymentEntitiesLogos</c-></code></a>;
    <a data-link-type="idl-name" href="https://www.w3.org/TR/webauthn-3/#dictdef-authenticationextensionsclientinputs"><c- n>AuthenticationExtensionsClientInputs</c-></a> <a data-type="AuthenticationExtensionsClientInputs" href="#dom-securepaymentconfirmationrequest-extensions"><code><c- g>extensions</c-></code></a>;
    <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="https://www.w3.org/TR/webauthn-3/#dictdef-publickeycredentialparameters"><c- n>PublicKeyCredentialParameters</c-></a>> <a data-type="sequence<PublicKeyCredentialParameters>" href="#dom-securepaymentconfirmationrequest-browserboundpubkeycredparams"><code><c- g>browserBoundPubKeyCredParams</c-></code></a>;
    <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString"><c- b>USVString</c-></a>> <a data-type="sequence<USVString>" href="#dom-securepaymentconfirmationrequest-locale"><code><c- g>locale</c-></code></a>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-type="boolean" href="#dom-securepaymentconfirmationrequest-showoptout"><code><c- g>showOptOut</c-></code></a>;
};

<c- b>enum</c-> <a href="#enumdef-securepaymentconfirmationavailability"><code><c- g>SecurePaymentConfirmationAvailability</c-></code></a> {
  <a class="idl-code" data-link-type="enum-value" href="#dom-securepaymentconfirmationavailability-available"><c- s>"available"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-securepaymentconfirmationavailability-unavailable-unknown-reason"><c- s>"unavailable-unknown-reason"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-securepaymentconfirmationavailability-unavailable-feature-not-enabled"><c- s>"unavailable-feature-not-enabled"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-securepaymentconfirmationavailability-unavailable-no-permission-policy"><c- s>"unavailable-no-permission-policy"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-securepaymentconfirmationavailability-unavailable-no-user-verifying-platform-authenticator"><c- s>"unavailable-no-user-verifying-platform-authenticator"</c-></a>,
};

<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://www.w3.org/TR/payment-request/#dom-paymentrequest"><c- g>PaymentRequest</c-></a> {
    <c- b>static</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#enumdef-securepaymentconfirmationavailability"><c- n>SecurePaymentConfirmationAvailability</c-></a>> <a href="#dom-paymentrequest-securepaymentconfirmationavailability"><code><c- g>securePaymentConfirmationAvailability</c-></code></a>();
};

<c- b>partial</c-> <c- b>dictionary</c-> <a class="idl-code" data-link-type="dictionary" href="https://www.w3.org/TR/webauthn-3/#dictdef-authenticationextensionsclientinputs"><c- g>AuthenticationExtensionsClientInputs</c-></a> {
  <a data-link-type="idl-name" href="#dictdef-authenticationextensionspaymentinputs"><c- n>AuthenticationExtensionsPaymentInputs</c-></a> <a data-type="AuthenticationExtensionsPaymentInputs" href="#dom-authenticationextensionsclientinputs-payment"><code><c- g>payment</c-></code></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-authenticationextensionspaymentinputs"><code><c- g>AuthenticationExtensionsPaymentInputs</c-></code></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-type="boolean" href="#dom-authenticationextensionspaymentinputs-ispayment"><code><c- g>isPayment</c-></code></a>;
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="https://www.w3.org/TR/webauthn-3/#dictdef-publickeycredentialparameters"><c- n>PublicKeyCredentialParameters</c-></a>> <a data-type="sequence<PublicKeyCredentialParameters>" href="#dom-authenticationextensionspaymentinputs-browserboundpubkeycredparams"><code><c- g>browserBoundPubKeyCredParams</c-></code></a>;

  // Only used for authentication.
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString"><c- b>USVString</c-></a> <a data-type="USVString" href="#dom-authenticationextensionspaymentinputs-rpid"><code><c- g>rpId</c-></code></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString"><c- b>USVString</c-></a> <a data-type="USVString" href="#dom-authenticationextensionspaymentinputs-toporigin"><code><c- g>topOrigin</c-></code></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString"><c- b>USVString</c-></a> <a data-type="USVString" href="#dom-authenticationextensionspaymentinputs-payeename"><code><c- g>payeeName</c-></code></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString"><c- b>USVString</c-></a> <a data-type="USVString" href="#dom-authenticationextensionspaymentinputs-payeeorigin"><code><c- g>payeeOrigin</c-></code></a>;
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#dictdef-paymententitylogo"><c- n>PaymentEntityLogo</c-></a>> <a data-type="sequence<PaymentEntityLogo>" href="#dom-authenticationextensionspaymentinputs-paymententitieslogos"><code><c- g>paymentEntitiesLogos</c-></code></a>;
  <a data-link-type="idl-name" href="https://www.w3.org/TR/payment-request/#dom-paymentcurrencyamount"><c- n>PaymentCurrencyAmount</c-></a> <a data-type="PaymentCurrencyAmount" href="#dom-authenticationextensionspaymentinputs-total"><code><c- g>total</c-></code></a>;
  <a data-link-type="idl-name" href="#dictdef-paymentcredentialinstrument"><c- n>PaymentCredentialInstrument</c-></a> <a data-type="PaymentCredentialInstrument" href="#dom-authenticationextensionspaymentinputs-instrument"><code><c- g>instrument</c-></code></a>;
};

<c- b>partial</c-> <c- b>dictionary</c-> <a class="idl-code" data-link-type="dictionary" href="https://www.w3.org/TR/webauthn-3/#dictdef-authenticationextensionsclientoutputs"><c- g>AuthenticationExtensionsClientOutputs</c-></a> {
  <a data-link-type="idl-name" href="#dictdef-authenticationextensionspaymentoutputs"><c- n>AuthenticationExtensionsPaymentOutputs</c-></a> <a data-type="AuthenticationExtensionsPaymentOutputs" href="#dom-authenticationextensionsclientoutputs-payment"><code><c- g>payment</c-></code></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-authenticationextensionspaymentoutputs"><code><c- g>AuthenticationExtensionsPaymentOutputs</c-></code></a> {
  <a data-link-type="idl-name" href="#dictdef-browserboundsignature"><c- n>BrowserBoundSignature</c-></a> <a data-type="BrowserBoundSignature" href="#dom-authenticationextensionspaymentoutputs-browserboundsignature"><code><c- g>browserBoundSignature</c-></code></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-browserboundsignature"><code><c- g>BrowserBoundSignature</c-></code></a> {
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-ArrayBuffer"><c- b>ArrayBuffer</c-></a> <a data-type="ArrayBuffer" href="#dom-browserboundsignature-signature"><code><c- g>signature</c-></code></a>;
};

<c- b>dictionary</c-> <a class="idl-code" data-link-type="dictionary" href="#dictdef-collectedclientpaymentdata"><c- g>CollectedClientPaymentData</c-></a> : <a data-link-type="idl-name" href="https://www.w3.org/TR/webauthn-3/#dictdef-collectedclientdata"><c- n>CollectedClientData</c-></a> {
    <c- b>required</c-> (<a data-link-type="idl-name" href="#dictdef-collectedclientadditionalpaymentdata"><c- n>CollectedClientAdditionalPaymentData</c-></a> <c- b>or</c-> <a data-link-type="idl-name" href="#dictdef-collectedclientadditionalpaymentregistrationdata"><c- n>CollectedClientAdditionalPaymentRegistrationData</c-></a>) <a data-type="(CollectedClientAdditionalPaymentData or CollectedClientAdditionalPaymentRegistrationData)" href="#dom-collectedclientpaymentdata-payment"><code><c- g>payment</c-></code></a>;
};

<c- b>dictionary</c-> <a class="idl-code" data-link-type="dictionary" href="#dictdef-collectedclientadditionalpaymentdata"><c- g>CollectedClientAdditionalPaymentData</c-></a> {
    <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString"><c- b>USVString</c-></a> <a data-type="USVString" href="#dom-collectedclientadditionalpaymentdata-rpid"><code><c- g>rpId</c-></code></a>;
    <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString"><c- b>USVString</c-></a> <a data-type="USVString" href="#dom-collectedclientadditionalpaymentdata-toporigin"><code><c- g>topOrigin</c-></code></a>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString"><c- b>USVString</c-></a> <a data-type="USVString" href="#dom-collectedclientadditionalpaymentdata-payeename"><code><c- g>payeeName</c-></code></a>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString"><c- b>USVString</c-></a> <a data-type="USVString" href="#dom-collectedclientadditionalpaymentdata-payeeorigin"><code><c- g>payeeOrigin</c-></code></a>;
    <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#dictdef-paymententitylogo"><c- n>PaymentEntityLogo</c-></a>> <a data-type="sequence<PaymentEntityLogo>" href="#dom-collectedclientadditionalpaymentdata-paymententitieslogos"><code><c- g>paymentEntitiesLogos</c-></code></a>;
    <c- b>required</c-> <a data-link-type="idl-name" href="https://www.w3.org/TR/payment-request/#dom-paymentcurrencyamount"><c- n>PaymentCurrencyAmount</c-></a> <a data-type="PaymentCurrencyAmount" href="#dom-collectedclientadditionalpaymentdata-total"><code><c- g>total</c-></code></a>;
    <c- b>required</c-> <a data-link-type="idl-name" href="#dictdef-paymentcredentialinstrument"><c- n>PaymentCredentialInstrument</c-></a> <a data-type="PaymentCredentialInstrument" href="#dom-collectedclientadditionalpaymentdata-instrument"><code><c- g>instrument</c-></code></a>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString"><c- b>USVString</c-></a> <a data-type="USVString" href="#dom-collectedclientadditionalpaymentdata-browserboundpublickey"><code><c- g>browserBoundPublicKey</c-></code></a>;
};

<c- b>dictionary</c-> <a class="idl-code" data-link-type="dictionary" href="#dictdef-collectedclientadditionalpaymentregistrationdata"><c- g>CollectedClientAdditionalPaymentRegistrationData</c-></a> {
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString"><c- b>USVString</c-></a> <a data-type="USVString" href="#dom-collectedclientadditionalpaymentregistrationdata-browserboundpublickey"><code><c- g>browserBoundPublicKey</c-></code></a>;
};

<c- b>dictionary</c-> <a class="idl-code" data-link-type="dictionary" href="#dictdef-paymentcredentialinstrument"><c- g>PaymentCredentialInstrument</c-></a> {
    <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString"><c- b>USVString</c-></a> <a data-type="USVString" href="#dom-paymentcredentialinstrument-displayname"><code><c- g>displayName</c-></code></a>;
    <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString"><c- b>USVString</c-></a> <a data-type="USVString" href="#dom-paymentcredentialinstrument-icon"><code><c- g>icon</c-></code></a>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-default="true" data-type="boolean" href="#dom-paymentcredentialinstrument-iconmustbeshown"><code><c- g>iconMustBeShown</c-></code></a> = <c- b>true</c->;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString"><c- b>USVString</c-></a> <a data-type="USVString" href="#dom-paymentcredentialinstrument-details"><code><c- g>details</c-></code></a>;
};

<c- b>dictionary</c-> <a class="idl-code" data-link-type="dictionary" href="#dictdef-paymententitylogo"><c- g>PaymentEntityLogo</c-></a> {
    <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString"><c- b>USVString</c-></a> <a data-type="USVString" href="#dom-paymententitylogo-url"><code><c- g>url</c-></code></a>;
    <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString"><c- b>USVString</c-></a> <a data-type="USVString" href="#dom-paymententitylogo-label"><code><c- g>label</c-></code></a>;
};

</pre>
    <h2 class="heading no-num no-ref settled" id="issues-index"><span class="content">问题索引</span><a class="self-link"
            href="#issues-index"></a></h2>
    <div style="counter-reset:issue">
        <div class="issue"> 本规范当前版本每个 <code
                class="idl"><a data-link-type="idl" href="#dictdef-paymententitylogo">PaymentEntityLogo</a></code> 仅支持单一
            URL，因此直接复制和签名该数据结构即可表明用户看到的内容。未来版本可能会为每个 <code
                class="idl"><a data-link-type="idl" href="#dictdef-paymententitylogo">PaymentEntityLogo</a></code> 增加多个
            URL（例如原生支持暗黑模式）。如出现这种情况，规范需指明给 <a data-link-type="dfn"
                href="https://w3c.github.io/webauthn/#relying-party">依赖方</a>实际展示的是哪个 URL。<a class="issue-return"
                href="#issue-69f26477" title="跳转到章节">↵</a>
        </div>
        <div class="issue"> 规范可以规定优先选择硬件存储的算法（按给定顺序），再选择软件存储的算法（同顺序）。目前此问题实际意义不大，因为 Chrome 计划每个平台仅支持一种硬件算法。参见 <a
                href="https://github.com/w3c/secure-payment-confirmation/issues/288">Secure Payment Confirmation
                第288号议题</a>，讨论了BBK的存储类型等，包括应允许哪些存储类型、是否应将存储类型暴露给依赖方等。<a class="issue-return" href="#issue-9a870553"
                title="跳转到章节">↵</a></div>
    </div>
    <script>/* Boilerplate: script-dom-helper */
        "use strict";
        function query(sel) { return document.querySelector(sel); }

        function queryAll(sel) { return [...document.querySelectorAll(sel)]; }

        function iter(obj) {
            if (!obj) return [];
            var it = obj[Symbol.iterator];
            if (it) return it;
            return Object.entries(obj);
        }

        function mk(tagname, attrs, ...children) {
            const el = document.createElement(tagname);
            for (const [k, v] of iter(attrs)) {
                if (k.slice(0, 3) == "_on") {
                    const eventName = k.slice(3);
                    el.addEventListener(eventName, v);
                } else if (k[0] == "_") {
                    // property, not attribute
                    el[k.slice(1)] = v;
                } else {
                    if (v === false || v == null) {
                        continue;
                    } else if (v === true) {
                        el.setAttribute(k, "");
                        continue;
                    } else {
                        el.setAttribute(k, v);
                    }
                }
            }
            append(el, children);
            return el;
        }

        /* Create shortcuts for every known HTML element */
        [
            "a",
            "abbr",
            "acronym",
            "address",
            "applet",
            "area",
            "article",
            "aside",
            "audio",
            "b",
            "base",
            "basefont",
            "bdo",
            "big",
            "blockquote",
            "body",
            "br",
            "button",
            "canvas",
            "caption",
            "center",
            "cite",
            "code",
            "col",
            "colgroup",
            "datalist",
            "dd",
            "del",
            "details",
            "dfn",
            "dialog",
            "div",
            "dl",
            "dt",
            "em",
            "embed",
            "fieldset",
            "figcaption",
            "figure",
            "font",
            "footer",
            "form",
            "frame",
            "frameset",
            "head",
            "header",
            "h1",
            "h2",
            "h3",
            "h4",
            "h5",
            "h6",
            "hr",
            "html",
            "i",
            "iframe",
            "img",
            "input",
            "ins",
            "kbd",
            "label",
            "legend",
            "li",
            "link",
            "main",
            "map",
            "mark",
            "meta",
            "meter",
            "nav",
            "nobr",
            "noscript",
            "object",
            "ol",
            "optgroup",
            "option",
            "output",
            "p",
            "param",
            "pre",
            "progress",
            "q",
            "s",
            "samp",
            "script",
            "section",
            "select",
            "small",
            "source",
            "span",
            "strike",
            "strong",
            "style",
            "sub",
            "summary",
            "sup",
            "table",
            "tbody",
            "td",
            "template",
            "textarea",
            "tfoot",
            "th",
            "thead",
            "time",
            "title",
            "tr",
            "u",
            "ul",
            "var",
            "video",
            "wbr",
            "xmp",
        ].forEach(tagname => {
            mk[tagname] = (...args) => mk(tagname, ...args);
        });

        function* nodesFromChildList(children) {
            for (const child of children.flat(Infinity)) {
                if (child instanceof Node) {
                    yield child;
                } else {
                    yield new Text(child);
                }
            }
        }
        function append(el, ...children) {
            for (const child of nodesFromChildList(children)) {
                if (el instanceof Node) el.appendChild(child);
                else el.push(child);
            }
            return el;
        }

        function insertAfter(el, ...children) {
            for (const child of nodesFromChildList(children)) {
                el.parentNode.insertBefore(child, el.nextSibling);
            }
            return el;
        }

        function clearContents(el) {
            el.innerHTML = "";
            return el;
        }

        function parseHTML(markup) {
            if (markup.toLowerCase().trim().indexOf('<!doctype') === 0) {
                const doc = document.implementation.createHTMLDocument("");
                doc.documentElement.innerHTML = markup;
                return doc;
            } else {
                const el = mk.template({});
                el.innerHTML = markup;
                return el.content;
            }
        }</script>
    <script>/* Boilerplate: script-dfn-panel */
        "use strict";
        {
            let dfnPanelData = {
                "004ca005": { "dfnID": "004ca005", "dfnText": "constructor()", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-paymentrequest-constructor" }], "title": "4.2. Modification of Payment Request constructor" }], "url": "https://www.w3.org/TR/payment-request/#dom-paymentrequest-constructor" },
                "00dde5ab": { "dfnID": "00dde5ab", "dfnText": "total", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-paymentdetailsinit-total" }], "title": "4.10. Steps to respond to a payment request" }], "url": "https://www.w3.org/TR/payment-request/#dom-paymentdetailsinit-total" },
                "0204d188": { "dfnID": "0204d188", "dfnText": "size", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-list-size" }, { "id": "ref-for-list-size\u2460" }], "title": "6.1. Creating a key pair" }], "url": "https://infra.spec.whatwg.org/#list-size" },
                "0267597d": { "dfnID": "0267597d", "dfnText": "PublicKeyCredentialDescriptor", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dictdef-publickeycredentialdescriptor" }], "title": "4.10. Steps to respond to a payment request" }], "url": "https://www.w3.org/TR/webauthn-3/#dictdef-publickeycredentialdescriptor" },
                "02f7d0f9": { "dfnID": "02f7d0f9", "dfnText": "steps to check if a payment can be made", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dfn-steps-to-check-if-a-payment-can-be-made" }], "title": "4.8. Steps to check if a payment can be made" }], "url": "https://w3c.github.io/payment-request/#dfn-steps-to-check-if-a-payment-can-be-made" },
                "03162f8e": { "dfnID": "03162f8e", "dfnText": "user-verifying platform authenticator", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-user-verifying-platform-authenticator" }, { "id": "ref-for-user-verifying-platform-authenticator\u2460" }], "title": "4.6. Checking if Secure Payment Confirmation is available" }], "url": "https://w3c.github.io/webauthn/#user-verifying-platform-authenticator" },
                "03afaf9c": { "dfnID": "03afaf9c", "dfnText": "empty", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-list-empty" }], "title": "5. WebAuthn Extension - \"payment\"" }], "url": "https://infra.spec.whatwg.org/#list-empty" },
                "04060d97": { "dfnID": "04060d97", "dfnText": "user aborts the payment request algorithm", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dfn-user-aborts-the-payment-request" }], "title": "4.9.2. Outcome of the transaction confirmation UX" }], "url": "https://w3c.github.io/payment-request/#dfn-user-aborts-the-payment-request" },
                "05c1c6e7": { "dfnID": "05c1c6e7", "dfnText": "rpId", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-publickeycredentialrequestoptions-rpid" }], "title": "4.10. Steps to respond to a payment request" }], "url": "https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialrequestoptions-rpid" },
                "0647fbdf": { "dfnID": "0647fbdf", "dfnText": "displayName", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-publickeycredentialuserentity-displayname" }], "title": "3. Registration" }], "url": "https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialuserentity-displayname" },
                "0686e261": { "dfnID": "0686e261", "dfnText": "AuthenticationExtensionsClientInputs", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dictdef-authenticationextensionsclientinputs" }], "title": "4.4. SecurePaymentConfirmationRequest Dictionary" }, { "refs": [{ "id": "ref-for-dictdef-authenticationextensionsclientinputs\u2460" }], "title": "4.10. Steps to respond to a payment request" }, { "refs": [{ "id": "ref-for-dictdef-authenticationextensionsclientinputs\u2461" }], "title": "5. WebAuthn Extension - \"payment\"" }], "url": "https://www.w3.org/TR/webauthn-3/#dictdef-authenticationextensionsclientinputs" },
                "086e3aff": { "dfnID": "086e3aff", "dfnText": "origin", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-origin" }], "title": "4.4. SecurePaymentConfirmationRequest Dictionary" }], "url": "https://html.spec.whatwg.org/multipage/browsers.html#concept-origin" },
                "08fd542c": { "dfnID": "08fd542c", "dfnText": "authenticatorSelection", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-publickeycredentialcreationoptions-authenticatorselection" }, { "id": "ref-for-dom-publickeycredentialcreationoptions-authenticatorselection\u2460" }, { "id": "ref-for-dom-publickeycredentialcreationoptions-authenticatorselection\u2461" }], "title": "5. WebAuthn Extension - \"payment\"" }], "url": "https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialcreationoptions-authenticatorselection" },
                "0d0033ad": { "dfnID": "0d0033ad", "dfnText": "payment handler", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dfn-payment-handler" }], "title": "4. Authentication - the Secure Payment Confirmation payment method" }], "url": "https://www.w3.org/TR/payment-request/#dfn-payment-handler" },
                "0e6b2056": { "dfnID": "0e6b2056", "dfnText": "set", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-map-set" }], "title": "5. WebAuthn Extension - \"payment\"" }, { "refs": [{ "id": "ref-for-map-set\u2460" }], "title": "6.1. Creating a key pair" }, { "refs": [{ "id": "ref-for-map-set\u2461" }], "title": "6.2. Binding a key pair" }], "url": "https://infra.spec.whatwg.org/#map-set" },
                "0e8de730": { "dfnID": "0e8de730", "dfnText": "tuple", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-tuple" }], "title": "6. Browser Bound Key Store" }, { "refs": [{ "id": "ref-for-tuple\u2460" }, { "id": "ref-for-tuple\u2461" }], "title": "6.1. Creating a key pair" }, { "refs": [{ "id": "ref-for-tuple\u2462" }], "title": "6.3. Retrieving a key pair" }, { "refs": [{ "id": "ref-for-tuple\u2463" }], "title": "6.4. Getting the browser bound public key" }, { "refs": [{ "id": "ref-for-tuple\u2464" }], "title": "6.5. Signing client data" }], "url": "https://infra.spec.whatwg.org/#tuple" },
                "1243a891": { "dfnID": "1243a891", "dfnText": "exist", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-map-exists" }], "title": "4.7. Steps to validate payment method data" }, { "refs": [{ "id": "ref-for-map-exists\u2460" }, { "id": "ref-for-map-exists\u2461" }], "title": "6.3. Retrieving a key pair" }], "url": "https://infra.spec.whatwg.org/#map-exists" },
                "12b8dfc0": { "dfnID": "12b8dfc0", "dfnText": "current settings object", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-current-settings-object" }], "title": "8. Permissions Policy integration" }], "url": "https://html.spec.whatwg.org/multipage/webappapis.html#current-settings-object" },
                "16ad0fd2": { "dfnID": "16ad0fd2", "dfnText": "locale", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dfn-locale" }], "title": "4.4. SecurePaymentConfirmationRequest Dictionary" }, { "refs": [{ "id": "ref-for-dfn-locale\u2460" }], "title": "14. Internationalization Considerations" }], "url": "https://www.w3.org/TR/i18n-glossary/#dfn-locale" },
                "171090ff": { "dfnID": "171090ff", "dfnText": "allowCredentials", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-publickeycredentialrequestoptions-allowcredentials" }], "title": "4.10. Steps to respond to a payment request" }], "url": "https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialrequestoptions-allowcredentials" },
                "19b78467": { "dfnID": "19b78467", "dfnText": "get()", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-credentialscontainer-get" }], "title": "5. WebAuthn Extension - \"payment\"" }], "url": "https://www.w3.org/TR/credential-management-1/#dom-credentialscontainer-get" },
                "1a0d3ec4": { "dfnID": "1a0d3ec4", "dfnText": "registry of standardized payment methods", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-registry" }], "title": "4.1. Registration in [payment-method-id]" }], "url": "https://w3c.github.io/payment-method-id/#registry" },
                "1ad9730e": { "dfnID": "1ad9730e", "dfnText": "transports", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-publickeycredentialdescriptor-transports" }], "title": "4.10. Steps to respond to a payment request" }], "url": "https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialdescriptor-transports" },
                "1ebc09ba": { "dfnID": "1ebc09ba", "dfnText": "PublicKeyCredentialRequestOptions", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dictdef-publickeycredentialrequestoptions" }], "title": "4.10. Steps to respond to a payment request" }], "url": "https://www.w3.org/TR/webauthn-3/#dictdef-publickeycredentialrequestoptions" },
                "2636efeb": { "dfnID": "2636efeb", "dfnText": "public-key", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-publickeycredentialtype-public-key" }], "title": "4.10. Steps to respond to a payment request" }], "url": "https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialtype-public-key" },
                "2e3d2880": { "dfnID": "2e3d2880", "dfnText": "WebAuthn Extension", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-webauthn-extensions" }], "title": "1. Introduction" }, { "refs": [{ "id": "ref-for-webauthn-extensions\u2460" }], "title": "3. Registration" }, { "refs": [{ "id": "ref-for-webauthn-extensions\u2461" }], "title": "4.4. SecurePaymentConfirmationRequest Dictionary" }], "url": "https://w3c.github.io/webauthn/#webauthn-extensions" },
                "2f8afbfe": { "dfnID": "2f8afbfe", "dfnText": "ArrayBuffer", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-idl-ArrayBuffer" }], "title": "5. WebAuthn Extension - \"payment\"" }], "url": "https://webidl.spec.whatwg.org/#idl-ArrayBuffer" },
                "34dd95ae": { "dfnID": "34dd95ae", "dfnText": "residentKey", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-authenticatorselectioncriteria-residentkey" }], "title": "5. WebAuthn Extension - \"payment\"" }], "url": "https://www.w3.org/TR/webauthn-3/#dom-authenticatorselectioncriteria-residentkey" },
                "3781d718": { "dfnID": "3781d718", "dfnText": "discoverable credential", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-discoverable-credential" }], "title": "2. Terminology" }], "url": "https://w3c.github.io/webauthn/#discoverable-credential" },
                "3955f290": { "dfnID": "3955f290", "dfnText": "PublicKeyCredential", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-publickeycredential" }], "title": "6.1. Creating a key pair" }, { "refs": [{ "id": "ref-for-publickeycredential\u2460" }], "title": "9.1. Verifying an Authentication Assertion" }], "url": "https://www.w3.org/TR/webauthn-3/#publickeycredential" },
                "3a4e3860": { "dfnID": "3a4e3860", "dfnText": "show()", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-paymentrequest-show" }], "title": "4.3. Modification of user activation requirement" }, { "refs": [{ "id": "ref-for-dom-paymentrequest-show\u2460" }], "title": "4.9. Displaying a transaction confirmation UX" }, { "refs": [{ "id": "ref-for-dom-paymentrequest-show\u2461" }, { "id": "ref-for-dom-paymentrequest-show\u2462" }, { "id": "ref-for-dom-paymentrequest-show\u2463" }], "title": "4.9.2. Outcome of the transaction confirmation UX" }, { "refs": [{ "id": "ref-for-dom-paymentrequest-show\u2464" }], "title": "4.10. Steps to respond to a payment request" }, { "refs": [{ "id": "ref-for-dom-paymentrequest-show\u2465" }], "title": "11.4. Lack of user activation requirement" }], "url": "https://www.w3.org/TR/payment-request/#dom-paymentrequest-show" },
                "3a711be7": { "dfnID": "3a711be7", "dfnText": "scheme", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-url-scheme" }], "title": "4.7. Steps to validate payment method data" }, { "refs": [{ "id": "ref-for-concept-url-scheme\u2460" }], "title": "4.8. Steps to check if a payment can be made" }], "url": "https://url.spec.whatwg.org/#concept-url-scheme" },
                "3aff2fb3": { "dfnID": "3aff2fb3", "dfnText": "BufferSource", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-BufferSource" }, { "id": "ref-for-BufferSource\u2460" }], "title": "4.4. SecurePaymentConfirmationRequest Dictionary" }], "url": "https://webidl.spec.whatwg.org/#BufferSource" },
                "3c7fe9c4": { "dfnID": "3c7fe9c4", "dfnText": "user accepts the payment request algorithm", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dfn-user-accepts-the-payment-request-algorithm" }, { "id": "ref-for-dfn-user-accepts-the-payment-request-algorithm\u2460" }], "title": "4.9.2. Outcome of the transaction confirmation UX" }, { "refs": [{ "id": "ref-for-dfn-user-accepts-the-payment-request-algorithm\u2461" }], "title": "4.10. Steps to respond to a payment request" }], "url": "https://w3c.github.io/payment-request/#dfn-user-accepts-the-payment-request-algorithm" },
                "43ac8374": { "dfnID": "43ac8374", "dfnText": "origin (for environment settings object)", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-settings-object-origin" }], "title": "4.8. Steps to check if a payment can be made" }], "url": "https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin" },
                "464020c6": { "dfnID": "464020c6", "dfnText": "PublicKeyCredentialType", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-enumdef-publickeycredentialtype" }, { "id": "ref-for-enumdef-publickeycredentialtype\u2460" }], "title": "6.1. Creating a key pair" }], "url": "https://www.w3.org/TR/webauthn-3/#enumdef-publickeycredentialtype" },
                "468e7b29": { "dfnID": "468e7b29", "dfnText": "standardized payment method identifier", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dfn-standardized-payment-method-identifier" }], "title": "4. Authentication - the Secure Payment Confirmation payment method" }], "url": "https://www.w3.org/TR/payment-method-id/#dfn-standardized-payment-method-identifier" },
                "47fe679e": { "dfnID": "47fe679e", "dfnText": "transient activation", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-transient-activation" }], "title": "4.3. Modification of user activation requirement" }], "url": "https://html.spec.whatwg.org/multipage/interaction.html#transient-activation" },
                "4be6272b": { "dfnID": "4be6272b", "dfnText": "success", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dfn-success" }], "title": "10.1. Set SPC Transaction Mode" }], "url": "https://w3c.github.io/webdriver/#dfn-success" },
                "4f49be59": { "dfnID": "4f49be59", "dfnText": "getRandomValues()", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dfn-Crypto-method-getRandomValues" }], "title": "6.1. Creating a key pair" }], "url": "https://www.w3.org/TR/webcrypto-2/#dfn-Crypto-method-getRandomValues" },
                "53275e46": { "dfnID": "53275e46", "dfnText": "append", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-list-append" }], "title": "4.10. Steps to respond to a payment request" }], "url": "https://infra.spec.whatwg.org/#list-append" },
                "536803f2": { "dfnID": "536803f2", "dfnText": "extensions", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-publickeycredentialrequestoptions-extensions" }], "title": "4.10. Steps to respond to a payment request" }], "url": "https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialrequestoptions-extensions" },
                "5372cca8": { "dfnID": "5372cca8", "dfnText": "boolean", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-idl-boolean" }], "title": "4.4. SecurePaymentConfirmationRequest Dictionary" }, { "refs": [{ "id": "ref-for-idl-boolean\u2460" }], "title": "5. WebAuthn Extension - \"payment\"" }, { "refs": [{ "id": "ref-for-idl-boolean\u2461" }], "title": "7.1. PaymentCredentialInstrument Dictionary" }], "url": "https://webidl.spec.whatwg.org/#idl-boolean" },
                "5431c023": { "dfnID": "5431c023", "dfnText": "userVerification (for AuthenticatorSelectionCriteria)", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-authenticatorselectioncriteria-userverification" }], "title": "5. WebAuthn Extension - \"payment\"" }], "url": "https://www.w3.org/TR/webauthn-3/#dom-authenticatorselectioncriteria-userverification" },
                "55213b5b": { "dfnID": "55213b5b", "dfnText": "request", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-request" }], "title": "4.3. Modification of user activation requirement" }], "url": "https://fetch.spec.whatwg.org/#concept-request" },
                "5553ccf9": { "dfnID": "5553ccf9", "dfnText": "language negotiation", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dfn-language-negotiation" }], "title": "4.4. SecurePaymentConfirmationRequest Dictionary" }], "url": "https://www.w3.org/TR/i18n-glossary/#dfn-language-negotiation" },
                "559656f0": { "dfnID": "559656f0", "dfnText": "steps to respond to a payment request", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dfn-steps-to-respond-to-a-payment-request" }], "title": "4.10. Steps to respond to a payment request" }], "url": "https://w3c.github.io/payment-request/#dfn-steps-to-respond-to-a-payment-request" },
                "55b47dd4": { "dfnID": "55b47dd4", "dfnText": "CollectedClientData", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dictdef-collectedclientdata" }], "title": "1.1.1. Cryptographic evidence of transaction confirmation" }, { "refs": [{ "id": "ref-for-dictdef-collectedclientdata\u2460" }, { "id": "ref-for-dictdef-collectedclientdata\u2461" }, { "id": "ref-for-dictdef-collectedclientdata\u2462" }, { "id": "ref-for-dictdef-collectedclientdata\u2463" }], "title": "5. WebAuthn Extension - \"payment\"" }, { "refs": [{ "id": "ref-for-dictdef-collectedclientdata\u2464" }, { "id": "ref-for-dictdef-collectedclientdata\u2465" }], "title": "5.1. CollectedClientPaymentData Dictionary" }, { "refs": [{ "id": "ref-for-dictdef-collectedclientdata\u2466" }], "title": "5.2. CollectedClientAdditionalPaymentData Dictionary" }, { "refs": [{ "id": "ref-for-dictdef-collectedclientdata\u2467" }], "title": "6.5. Signing client data" }, { "refs": [{ "id": "ref-for-dictdef-collectedclientdata\u2468" }, { "id": "ref-for-dictdef-collectedclientdata\u2460\u24ea" }, { "id": "ref-for-dictdef-collectedclientdata\u2460\u2460" }], "title": "11.1.1. Login Attack" }, { "refs": [{ "id": "ref-for-dictdef-collectedclientdata\u2460\u2461" }, { "id": "ref-for-dictdef-collectedclientdata\u2460\u2462" }], "title": "11.1.2. Payment Attack" }, { "refs": [{ "id": "ref-for-dictdef-collectedclientdata\u2460\u2463" }], "title": "11.3. Attacker generated Browser Bound Key" }], "url": "https://www.w3.org/TR/webauthn-3/#dictdef-collectedclientdata" },
                "56f1d711": { "dfnID": "56f1d711", "dfnText": "[[clientExtensionsResults]]", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-publickeycredential-clientextensionsresults-slot" }, { "id": "ref-for-dom-publickeycredential-clientextensionsresults-slot\u2460" }, { "id": "ref-for-dom-publickeycredential-clientextensionsresults-slot\u2461" }], "title": "5. WebAuthn Extension - \"payment\"" }], "url": "https://www.w3.org/TR/webauthn-3/#dom-publickeycredential-clientextensionsresults-slot" },
                "5b668531": { "dfnID": "5b668531", "dfnText": "getting a property", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dfn-getting-properties" }], "title": "10.1. Set SPC Transaction Mode" }], "url": "https://w3c.github.io/webdriver/#dfn-getting-properties" },
                "5cf0e148": { "dfnID": "5cf0e148", "dfnText": "WebDriver error", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dfn-error" }, { "id": "ref-for-dfn-error\u2460" }], "title": "10.1. Set SPC Transaction Mode" }], "url": "https://w3c.github.io/webdriver/#dfn-error" },
                "5d6beb3a": { "dfnID": "5d6beb3a", "dfnText": "registration extension", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-registration-extension" }, { "id": "ref-for-registration-extension\u2460" }, { "id": "ref-for-registration-extension\u2461" }], "title": "5. WebAuthn Extension - \"payment\"" }], "url": "https://w3c.github.io/webauthn/#registration-extension" },
                "5e129c74": { "dfnID": "5e129c74", "dfnText": "QuotaExceededError", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-quotaexceedederror" }], "title": "6.2. Binding a key pair" }], "url": "https://webidl.spec.whatwg.org/#quotaexceedederror" },
                "603c5d8f": { "dfnID": "603c5d8f", "dfnText": "undefined", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dfn-undefined" }], "title": "10.1. Set SPC Transaction Mode" }], "url": "https://w3c.github.io/webdriver/#dfn-undefined" },
                "60fc1ac5": { "dfnID": "60fc1ac5", "dfnText": "payment request accessibility considerations", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-accessibility-considerations" }], "title": "13. Accessibility Considerations" }], "url": "https://w3c.github.io/payment-request/#accessibility-considerations" },
                "649608b9": { "dfnID": "649608b9", "dfnText": "list", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-list" }], "title": "6.3. Retrieving a key pair" }], "url": "https://infra.spec.whatwg.org/#list" },
                "651f02aa": { "dfnID": "651f02aa", "dfnText": "type (for PublicKeyCredentialDescriptor)", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-publickeycredentialdescriptor-type" }], "title": "4.10. Steps to respond to a payment request" }], "url": "https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialdescriptor-type" },
                "6533c360": { "dfnID": "6533c360", "dfnText": "language priority list", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dfn-language-priority-list" }], "title": "4.4. SecurePaymentConfirmationRequest Dictionary" }], "url": "https://www.w3.org/TR/i18n-glossary/#dfn-language-priority-list" },
                "68b0f808": { "dfnID": "68b0f808", "dfnText": "userVerification (for PublicKeyCredentialRequestOptions)", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-publickeycredentialrequestoptions-userverification" }, { "id": "ref-for-dom-publickeycredentialrequestoptions-userverification\u2460" }], "title": "4.10. Steps to respond to a payment request" }], "url": "https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialrequestoptions-userverification" },
                "6b815fdd": { "dfnID": "6b815fdd", "dfnText": "is empty", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-list-is-empty" }], "title": "4.7. Steps to validate payment method data" }, { "refs": [{ "id": "ref-for-list-is-empty\u2460" }], "title": "6.1. Creating a key pair" }], "url": "https://infra.spec.whatwg.org/#list-is-empty" },
                "6d19ac93": { "dfnID": "6d19ac93", "dfnText": "user agent", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-user-agent" }], "title": "6. Browser Bound Key Store" }], "url": "https://infra.spec.whatwg.org/#user-agent" },
                "6ee1791f": { "dfnID": "6ee1791f", "dfnText": "[[DiscoverFromExternalSource]](origin, options, sameOriginWithAncestors)", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-publickeycredential-discoverfromexternalsource-slot" }], "title": "5. WebAuthn Extension - \"payment\"" }, { "refs": [{ "id": "ref-for-dom-publickeycredential-discoverfromexternalsource-slot\u2460" }], "title": "8. Permissions Policy integration" }], "url": "https://www.w3.org/TR/webauthn-3/#dom-publickeycredential-discoverfromexternalsource-slot" },
                "70da06af": { "dfnID": "70da06af", "dfnText": "isUserVerifyingPlatformAuthenticatorAvailable()", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-publickeycredential-isuserverifyingplatformauthenticatoravailable" }], "title": "4.6. Checking if Secure Payment Confirmation is available" }, { "refs": [{ "id": "ref-for-dom-publickeycredential-isuserverifyingplatformauthenticatoravailable\u2460" }], "title": "12.5. Fingerprinting via securePaymentConfirmationAvailability" }], "url": "https://www.w3.org/TR/webauthn-3/#dom-publickeycredential-isuserverifyingplatformauthenticatoravailable" },
                "71c2b15c": { "dfnID": "71c2b15c", "dfnText": "fetching an image resource", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dfn-fetching-an-image-resource" }, { "id": "ref-for-dfn-fetching-an-image-resource\u2460" }], "title": "4.8. Steps to check if a payment can be made" }], "url": "https://www.w3.org/TR/image-resource/#dfn-fetching-an-image-resource" },
                "7482107b": { "dfnID": "7482107b", "dfnText": "WebDriver error code", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dfn-error-code" }, { "id": "ref-for-dfn-error-code\u2460" }], "title": "10.1. Set SPC Transaction Mode" }], "url": "https://w3c.github.io/webdriver/#dfn-error-code" },
                "75f46ef4": { "dfnID": "75f46ef4", "dfnText": "payment method", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dfn-payment-method" }], "title": "1. Introduction" }], "url": "https://w3c.github.io/payment-request/#dfn-payment-method" },
                "77a62788": { "dfnID": "77a62788", "dfnText": "relying party", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-relying-party" }, { "id": "ref-for-relying-party\u2460" }, { "id": "ref-for-relying-party\u2461" }, { "id": "ref-for-relying-party\u2462" }, { "id": "ref-for-relying-party\u2463" }], "title": "1. Introduction" }, { "refs": [{ "id": "ref-for-relying-party\u2464" }], "title": "1.1.1. Cryptographic evidence of transaction confirmation" }, { "refs": [{ "id": "ref-for-relying-party\u2465" }, { "id": "ref-for-relying-party\u2466" }, { "id": "ref-for-relying-party\u2467" }], "title": "1.1.2. Merchant control of authentication" }, { "refs": [{ "id": "ref-for-relying-party\u2468" }, { "id": "ref-for-relying-party\u2460\u24ea" }, { "id": "ref-for-relying-party\u2460\u2460" }, { "id": "ref-for-relying-party\u2460\u2461" }, { "id": "ref-for-relying-party\u2460\u2462" }], "title": "2. Terminology" }, { "refs": [{ "id": "ref-for-relying-party\u2460\u2463" }], "title": "4. Authentication - the Secure Payment Confirmation payment method" }, { "refs": [{ "id": "ref-for-relying-party\u2460\u2464" }], "title": "4.9.1. Information presented to the user" }, { "refs": [{ "id": "ref-for-relying-party\u2460\u2465" }], "title": "4.10. Steps to respond to a payment request" }, { "refs": [{ "id": "ref-for-relying-party\u2460\u2466" }], "title": "5. WebAuthn Extension - \"payment\"" }, { "refs": [{ "id": "ref-for-relying-party\u2460\u2467" }], "title": "5.2. CollectedClientAdditionalPaymentData Dictionary" }, { "refs": [{ "id": "ref-for-relying-party\u2460\u2468" }, { "id": "ref-for-relying-party\u2461\u24ea" }], "title": "7.1. PaymentCredentialInstrument Dictionary" }, { "refs": [{ "id": "ref-for-relying-party\u2461\u2460" }, { "id": "ref-for-relying-party\u2461\u2461" }], "title": "7.2. PaymentEntityLogo Dictionary" }, { "refs": [{ "id": "ref-for-relying-party\u2461\u2462" }, { "id": "ref-for-relying-party\u2461\u2463" }, { "id": "ref-for-relying-party\u2461\u2464" }, { "id": "ref-for-relying-party\u2461\u2465" }, { "id": "ref-for-relying-party\u2461\u2466" }, { "id": "ref-for-relying-party\u2461\u2467" }, { "id": "ref-for-relying-party\u2461\u2468" }, { "id": "ref-for-relying-party\u2462\u24ea" }], "title": "9.1. Verifying an Authentication Assertion" }, { "refs": [{ "id": "ref-for-relying-party\u2462\u2460" }, { "id": "ref-for-relying-party\u2462\u2461" }], "title": "11.1. Cross-origin authentication ceremony" }, { "refs": [{ "id": "ref-for-relying-party\u2462\u2462" }, { "id": "ref-for-relying-party\u2462\u2463" }, { "id": "ref-for-relying-party\u2462\u2464" }, { "id": "ref-for-relying-party\u2462\u2465" }, { "id": "ref-for-relying-party\u2462\u2466" }, { "id": "ref-for-relying-party\u2462\u2467" }, { "id": "ref-for-relying-party\u2462\u2468" }], "title": "11.1.1. Login Attack" }, { "refs": [{ "id": "ref-for-relying-party\u2463\u24ea" }, { "id": "ref-for-relying-party\u2463\u2460" }, { "id": "ref-for-relying-party\u2463\u2461" }], "title": "11.1.2. Payment Attack" }, { "refs": [{ "id": "ref-for-relying-party\u2463\u2462" }, { "id": "ref-for-relying-party\u2463\u2463" }], "title": "11.2. Merchant-supplied authentication data" }, { "refs": [{ "id": "ref-for-relying-party\u2463\u2464" }, { "id": "ref-for-relying-party\u2463\u2465" }, { "id": "ref-for-relying-party\u2463\u2466" }, { "id": "ref-for-relying-party\u2463\u2467" }, { "id": "ref-for-relying-party\u2463\u2468" }], "title": "11.3. Attacker generated Browser Bound Key" }, { "refs": [{ "id": "ref-for-relying-party\u2464\u24ea" }, { "id": "ref-for-relying-party\u2464\u2460" }], "title": "12.1. Probing for credential ids" }, { "refs": [{ "id": "ref-for-relying-party\u2464\u2461" }, { "id": "ref-for-relying-party\u2464\u2462" }, { "id": "ref-for-relying-party\u2464\u2463" }, { "id": "ref-for-relying-party\u2464\u2464" }, { "id": "ref-for-relying-party\u2464\u2465" }], "title": "12.2. Joining different payment instruments" }, { "refs": [{ "id": "ref-for-relying-party\u2464\u2466" }, { "id": "ref-for-relying-party\u2464\u2467" }, { "id": "ref-for-relying-party\u2464\u2468" }], "title": "12.3. Credential ID(s) as a tracking vector" }, { "refs": [{ "id": "ref-for-relying-party\u2465\u24ea" }], "title": "12.4. Browser Bound Key as a tracking vector" }], "url": "https://w3c.github.io/webauthn/#relying-party" },
                "797018a7": { "dfnID": "797018a7", "dfnText": "InvalidStateError", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-invalidstateerror" }], "title": "6.2. Binding a key pair" }], "url": "https://webidl.spec.whatwg.org/#invalidstateerror" },
                "79cad4dd": { "dfnID": "79cad4dd", "dfnText": "valid domain", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-valid-domain" }], "title": "4.7. Steps to validate payment method data" }], "url": "https://url.spec.whatwg.org/#valid-domain" },
                "7cbec8a9": { "dfnID": "7cbec8a9", "dfnText": "PublicKeyCredentialCreationOptions", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dictdef-publickeycredentialcreationoptions" }, { "id": "ref-for-dictdef-publickeycredentialcreationoptions\u2460" }], "title": "5. WebAuthn Extension - \"payment\"" }], "url": "https://www.w3.org/TR/webauthn-3/#dictdef-publickeycredentialcreationoptions" },
                "81dd847b": { "dfnID": "81dd847b", "dfnText": "UnknownError", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-unknownerror" }], "title": "5. WebAuthn Extension - \"payment\"" }], "url": "https://webidl.spec.whatwg.org/#unknownerror" },
                "82c23298": { "dfnID": "82c23298", "dfnText": "remote end steps", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dfn-remote-end-steps" }], "title": "10.1. Set SPC Transaction Mode" }], "url": "https://w3c.github.io/webdriver/#dfn-remote-end-steps" },
                "82ca3efc": { "dfnID": "82ca3efc", "dfnText": "TypeError", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-exceptiondef-typeerror" }, { "id": "ref-for-exceptiondef-typeerror\u2460" }, { "id": "ref-for-exceptiondef-typeerror\u2461" }, { "id": "ref-for-exceptiondef-typeerror\u2462" }, { "id": "ref-for-exceptiondef-typeerror\u2463" }, { "id": "ref-for-exceptiondef-typeerror\u2464" }, { "id": "ref-for-exceptiondef-typeerror\u2465" }, { "id": "ref-for-exceptiondef-typeerror\u2466" }, { "id": "ref-for-exceptiondef-typeerror\u2467" }, { "id": "ref-for-exceptiondef-typeerror\u2468" }, { "id": "ref-for-exceptiondef-typeerror\u2460\u24ea" }, { "id": "ref-for-exceptiondef-typeerror\u2460\u2460" }, { "id": "ref-for-exceptiondef-typeerror\u2460\u2461" }, { "id": "ref-for-exceptiondef-typeerror\u2460\u2462" }], "title": "4.7. Steps to validate payment method data" }, { "refs": [{ "id": "ref-for-exceptiondef-typeerror\u2460\u2463" }], "title": "5. WebAuthn Extension - \"payment\"" }, { "refs": [{ "id": "ref-for-exceptiondef-typeerror\u2460\u2464" }], "title": "6.2. Binding a key pair" }], "url": "https://webidl.spec.whatwg.org/#exceptiondef-typeerror" },
                "85394472": { "dfnID": "85394472", "dfnText": "Document", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-document" }], "title": "4.6. Checking if Secure Payment Confirmation is available" }], "url": "https://dom.spec.whatwg.org/#document" },
                "860300d4": { "dfnID": "860300d4", "dfnText": "implementation-defined", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-implementation-defined" }], "title": "2. Terminology" }, { "refs": [{ "id": "ref-for-implementation-defined\u2460" }], "title": "6.1. Creating a key pair" }], "url": "https://infra.spec.whatwg.org/#implementation-defined" },
                "87335f73": { "dfnID": "87335f73", "dfnText": "payment method additional data type", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dfn-additional-data-type" }], "title": "4.5. Payment Method additional data type" }], "url": "https://w3c.github.io/payment-request/#dfn-additional-data-type" },
                "8841d736": { "dfnID": "8841d736", "dfnText": "internal method", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-sec-object-internal-methods-and-internal-slots" }], "title": "8. Permissions Policy integration" }], "url": "https://tc39.github.io/ecma262/#sec-object-internal-methods-and-internal-slots" },
                "88ae1d28": { "dfnID": "88ae1d28", "dfnText": "client extension", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-client-extension" }], "title": "5. WebAuthn Extension - \"payment\"" }], "url": "https://w3c.github.io/webauthn/#client-extension" },
                "8d1f4176": { "dfnID": "8d1f4176", "dfnText": "currency", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-paymentcurrencyamount-currency" }], "title": "4.9.1. Information presented to the user" }], "url": "https://www.w3.org/TR/payment-request/#dom-paymentcurrencyamount-currency" },
                "8da4d1e3": { "dfnID": "8da4d1e3", "dfnText": "invalid argument", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dfn-invalid-argument" }, { "id": "ref-for-dfn-invalid-argument\u2460" }], "title": "10.1. Set SPC Transaction Mode" }], "url": "https://w3c.github.io/webdriver/#dfn-invalid-argument" },
                "8e19bb11": { "dfnID": "8e19bb11", "dfnText": "publickey-credentials-create-feature", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-publickey-credentials-create-feature" }], "title": "1.2.1. Registration during a checkout" }], "url": "https://www.w3.org/TR/webauthn-3/#publickey-credentials-create-feature" },
                "8f3d2845": { "dfnID": "8f3d2845", "dfnText": "authentication ceremony", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-authentication-ceremony" }], "title": "4. Authentication - the Secure Payment Confirmation payment method" }, { "refs": [{ "id": "ref-for-authentication-ceremony\u2460" }], "title": "9.1. Verifying an Authentication Assertion" }], "url": "https://w3c.github.io/webauthn/#authentication-ceremony" },
                "959ad97b": { "dfnID": "959ad97b", "dfnText": "origin", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-url-origin" }], "title": "4.8. Steps to check if a payment can be made" }], "url": "https://url.spec.whatwg.org/#concept-url-origin" },
                "984221ca": { "dfnID": "984221ca", "dfnText": "struct", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-struct" }], "title": "2. Terminology" }], "url": "https://infra.spec.whatwg.org/#struct" },
                "9877bbe9": { "dfnID": "9877bbe9", "dfnText": "credentialPublicKey", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-authdata-attestedcredentialdata-credentialpublickey" }], "title": "6.4. Getting the browser bound public key" }], "url": "https://w3c.github.io/webauthn/#authdata-attestedcredentialdata-credentialpublickey" },
                "98e822a3": { "dfnID": "98e822a3", "dfnText": "platform", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-authenticatorattachment-platform" }], "title": "5. WebAuthn Extension - \"payment\"" }], "url": "https://www.w3.org/TR/webauthn-3/#dom-authenticatorattachment-platform" },
                "99c988d6": { "dfnID": "99c988d6", "dfnText": "remove", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-list-remove" }, { "id": "ref-for-list-remove\u2460" }], "title": "6.1. Creating a key pair" }], "url": "https://infra.spec.whatwg.org/#list-remove" },
                "9b39aa25": { "dfnID": "9b39aa25", "dfnText": "publicKey", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-credentialrequestoptions-publickey" }], "title": "4.10. Steps to respond to a payment request" }], "url": "https://www.w3.org/TR/webauthn-3/#dom-credentialrequestoptions-publickey" },
                "9c4c1e66": { "dfnID": "9c4c1e66", "dfnText": "relevant settings object", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-relevant-settings-object" }], "title": "4.8. Steps to check if a payment can be made" }, { "refs": [{ "id": "ref-for-relevant-settings-object\u2460" }], "title": "4.10. Steps to respond to a payment request" }], "url": "https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object" },
                "9c64cd22": { "dfnID": "9c64cd22", "dfnText": "authentication extension", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-authentication-extension" }, { "id": "ref-for-authentication-extension\u2460" }, { "id": "ref-for-authentication-extension\u2461" }], "title": "5. WebAuthn Extension - \"payment\"" }], "url": "https://w3c.github.io/webauthn/#authentication-extension" },
                "9cce47fd": { "dfnID": "9cce47fd", "dfnText": "sequence", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-idl-sequence" }, { "id": "ref-for-idl-sequence\u2460" }, { "id": "ref-for-idl-sequence\u2461" }, { "id": "ref-for-idl-sequence\u2462" }], "title": "4.4. SecurePaymentConfirmationRequest Dictionary" }, { "refs": [{ "id": "ref-for-idl-sequence\u2463" }, { "id": "ref-for-idl-sequence\u2464" }], "title": "5. WebAuthn Extension - \"payment\"" }, { "refs": [{ "id": "ref-for-idl-sequence\u2465" }], "title": "5.2. CollectedClientAdditionalPaymentData Dictionary" }], "url": "https://webidl.spec.whatwg.org/#idl-sequence" },
                "a115429a": { "dfnID": "a115429a", "dfnText": "challenge (for PublicKeyCredentialRequestOptions)", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-publickeycredentialrequestoptions-challenge" }], "title": "1.1.1. Cryptographic evidence of transaction confirmation" }, { "refs": [{ "id": "ref-for-dom-publickeycredentialrequestoptions-challenge\u2460" }], "title": "4.10. Steps to respond to a payment request" }], "url": "https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialrequestoptions-challenge" },
                "a384672a": { "dfnID": "a384672a", "dfnText": "create()", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-credentialscontainer-create" }], "title": "3. Registration" }], "url": "https://www.w3.org/TR/credential-management-1/#dom-credentialscontainer-create" },
                "a6eb349a": { "dfnID": "a6eb349a", "dfnText": "PublicKeyCredentialParameters", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dictdef-publickeycredentialparameters" }], "title": "4.4. SecurePaymentConfirmationRequest Dictionary" }, { "refs": [{ "id": "ref-for-dictdef-publickeycredentialparameters\u2460" }], "title": "5. WebAuthn Extension - \"payment\"" }, { "refs": [{ "id": "ref-for-dictdef-publickeycredentialparameters\u2461" }], "title": "6.1. Creating a key pair" }, { "refs": [{ "id": "ref-for-dictdef-publickeycredentialparameters\u2462" }], "title": "6.3. Retrieving a key pair" }], "url": "https://www.w3.org/TR/webauthn-3/#dictdef-publickeycredentialparameters" },
                "a72449dd": { "dfnID": "a72449dd", "dfnText": "in parallel", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-in-parallel" }], "title": "8. Permissions Policy integration" }], "url": "https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" },
                "abd7d801": { "dfnID": "abd7d801", "dfnText": "Create Permissions Policy", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-credential-type-registry-create-permissions-policy" }], "title": "8. Permissions Policy integration" }], "url": "https://w3c.github.io/webappsec-credential-management/#credential-type-registry-create-permissions-policy" },
                "aca22383": { "dfnID": "aca22383", "dfnText": "consume user activation", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-consume-user-activation" }], "title": "4.3. Modification of user activation requirement" }], "url": "https://html.spec.whatwg.org/multipage/interaction.html#consume-user-activation" },
                "aedbc862": { "dfnID": "aedbc862", "dfnText": "type (for CollectedClientData)", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-collectedclientdata-type" }], "title": "5. WebAuthn Extension - \"payment\"" }, { "refs": [{ "id": "ref-for-dom-collectedclientdata-type\u2460" }], "title": "9.1. Verifying an Authentication Assertion" }, { "refs": [{ "id": "ref-for-dom-collectedclientdata-type\u2461" }], "title": "11.1.1. Login Attack" }], "url": "https://www.w3.org/TR/webauthn-3/#dom-collectedclientdata-type" },
                "aeff228f": { "dfnID": "aeff228f", "dfnText": "value", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-paymentcurrencyamount-value" }], "title": "4.9.1. Information presented to the user" }], "url": "https://www.w3.org/TR/payment-request/#dom-paymentcurrencyamount-value" },
                "af1d27d0": { "dfnID": "af1d27d0", "dfnText": "create credential async loop", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-CreateCred-async-loop" }], "title": "5. WebAuthn Extension - \"payment\"" }], "url": "https://w3c.github.io/webauthn/#CreateCred-async-loop" },
                "af66c42a": { "dfnID": "af66c42a", "dfnText": "type (for PublicKeyCredentialParameters)", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-publickeycredentialparameters-type" }, { "id": "ref-for-dom-publickeycredentialparameters-type\u2460" }], "title": "6.1. Creating a key pair" }], "url": "https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialparameters-type" },
                "b0d7f3c3": { "dfnID": "b0d7f3c3", "dfnText": "USVString", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-idl-USVString" }, { "id": "ref-for-idl-USVString\u2460" }, { "id": "ref-for-idl-USVString\u2461" }, { "id": "ref-for-idl-USVString\u2462" }], "title": "4.4. SecurePaymentConfirmationRequest Dictionary" }, { "refs": [{ "id": "ref-for-idl-USVString\u2463" }, { "id": "ref-for-idl-USVString\u2464" }, { "id": "ref-for-idl-USVString\u2465" }, { "id": "ref-for-idl-USVString\u2466" }], "title": "5. WebAuthn Extension - \"payment\"" }, { "refs": [{ "id": "ref-for-idl-USVString\u2467" }, { "id": "ref-for-idl-USVString\u2468" }, { "id": "ref-for-idl-USVString\u2460\u24ea" }, { "id": "ref-for-idl-USVString\u2460\u2460" }, { "id": "ref-for-idl-USVString\u2460\u2461" }], "title": "5.2. CollectedClientAdditionalPaymentData Dictionary" }, { "refs": [{ "id": "ref-for-idl-USVString\u2460\u2462" }], "title": "5.3. CollectedClientAdditionalPaymentRegistrationData Dictionary" }, { "refs": [{ "id": "ref-for-idl-USVString\u2460\u2463" }, { "id": "ref-for-idl-USVString\u2460\u2464" }, { "id": "ref-for-idl-USVString\u2460\u2465" }], "title": "7.1. PaymentCredentialInstrument Dictionary" }, { "refs": [{ "id": "ref-for-idl-USVString\u2460\u2466" }, { "id": "ref-for-idl-USVString\u2460\u2467" }], "title": "7.2. PaymentEntityLogo Dictionary" }], "url": "https://webidl.spec.whatwg.org/#idl-USVString" },
                "b1c1965a": { "dfnID": "b1c1965a", "dfnText": "OptOutError", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-optouterror" }], "title": "4.9.2. Outcome of the transaction confirmation UX" }, { "refs": [{ "id": "ref-for-optouterror\u2460" }, { "id": "ref-for-optouterror\u2461" }], "title": "12.6. User opt out" }], "url": "https://webidl.spec.whatwg.org/#optouterror" },
                "b29c33d9": { "dfnID": "b29c33d9", "dfnText": "payment request details", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dfn-details" }], "title": "4.10. Steps to respond to a payment request" }], "url": "https://w3c.github.io/payment-request/#dfn-details" },
                "b3d365cb": { "dfnID": "b3d365cb", "dfnText": "PaymentCurrencyAmount", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-paymentcurrencyamount" }], "title": "5. WebAuthn Extension - \"payment\"" }, { "refs": [{ "id": "ref-for-dom-paymentcurrencyamount\u2460" }, { "id": "ref-for-dom-paymentcurrencyamount\u2461" }], "title": "5.2. CollectedClientAdditionalPaymentData Dictionary" }], "url": "https://www.w3.org/TR/payment-request/#dom-paymentcurrencyamount" },
                "b64ab3cb": { "dfnID": "b64ab3cb", "dfnText": "origin", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-collectedclientdata-origin" }], "title": "9.1. Verifying an Authentication Assertion" }, { "refs": [{ "id": "ref-for-dom-collectedclientdata-origin\u2460" }], "title": "11.1.1. Login Attack" }, { "refs": [{ "id": "ref-for-dom-collectedclientdata-origin\u2461" }], "title": "11.1.2. Payment Attack" }], "url": "https://www.w3.org/TR/webauthn-3/#dom-collectedclientdata-origin" },
                "b695f46e": { "dfnID": "b695f46e", "dfnText": "[[identifier]]", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-publickeycredential-identifier-slot" }], "title": "5. WebAuthn Extension - \"payment\"" }], "url": "https://www.w3.org/TR/webauthn-3/#dom-publickeycredential-identifier-slot" },
                "b6a00a38": { "dfnID": "b6a00a38", "dfnText": "extension identifier", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-extension-identifier" }], "title": "15. IANA Considerations" }], "url": "https://w3c.github.io/webauthn/#extension-identifier" },
                "ba4dacbc": { "dfnID": "ba4dacbc", "dfnText": "steps to validate payment method data", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dfn-steps-to-validate-payment-method-data" }], "title": "4.7. Steps to validate payment method data" }], "url": "https://w3c.github.io/payment-request/#dfn-steps-to-validate-payment-method-data" },
                "ba556545": { "dfnID": "ba556545", "dfnText": "NotAllowedError", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-notallowederror" }], "title": "4.9.2. Outcome of the transaction confirmation UX" }, { "refs": [{ "id": "ref-for-notallowederror\u2460" }, { "id": "ref-for-notallowederror\u2461" }], "title": "4.10. Steps to respond to a payment request" }, { "refs": [{ "id": "ref-for-notallowederror\u2462" }], "title": "5. WebAuthn Extension - \"payment\"" }, { "refs": [{ "id": "ref-for-notallowederror\u2463" }], "title": "12.1. Probing for credential ids" }], "url": "https://webidl.spec.whatwg.org/#notallowederror" },
                "bdbd19d1": { "dfnID": "bdbd19d1", "dfnText": "Promise", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-idl-promise" }], "title": "4.6. Checking if Secure Payment Confirmation is available" }], "url": "https://webidl.spec.whatwg.org/#idl-promise" },
                "bind-a-key-pair": { "dfnID": "bind-a-key-pair", "dfnText": "bind a key pair", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-bind-a-key-pair" }], "title": "5. WebAuthn Extension - \"payment\"" }, { "refs": [{ "id": "ref-for-bind-a-key-pair\u2460" }], "title": "6.3. Retrieving a key pair" }], "url": "#bind-a-key-pair" },
                "browser-bound-key": { "dfnID": "browser-bound-key", "dfnText": "Browser bound key", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-browser-bound-key" }], "title": "1.1.3. Cryptographic evidence of device binding" }, { "refs": [{ "id": "ref-for-browser-bound-key\u2460" }], "title": "1.2.2. Authentication on merchant site" }, { "refs": [{ "id": "ref-for-browser-bound-key\u2461" }], "title": "5.2. CollectedClientAdditionalPaymentData Dictionary" }, { "refs": [{ "id": "ref-for-browser-bound-key\u2462" }], "title": "5.3. CollectedClientAdditionalPaymentRegistrationData Dictionary" }, { "refs": [{ "id": "ref-for-browser-bound-key\u2463" }], "title": "6.4. Getting the browser bound public key" }, { "refs": [{ "id": "ref-for-browser-bound-key\u2464" }], "title": "6.5. Signing client data" }, { "refs": [{ "id": "ref-for-browser-bound-key\u2465" }, { "id": "ref-for-browser-bound-key\u2466" }, { "id": "ref-for-browser-bound-key\u2467" }], "title": "11.3. Attacker generated Browser Bound Key" }], "url": "#browser-bound-key" },
                "browser-bound-key-store": { "dfnID": "browser-bound-key-store", "dfnText": "browser bound key\nstore", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-browser-bound-key-store" }], "title": "6. Browser Bound Key Store" }], "url": "#browser-bound-key-store" },
                "browser_bound_map": { "dfnID": "browser_bound_map", "dfnText": "browser_bound_map", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-browser_bound_map" }, { "id": "ref-for-browser_bound_map\u2460" }], "title": "6.2. Binding a key pair" }, { "refs": [{ "id": "ref-for-browser_bound_map\u2461" }, { "id": "ref-for-browser_bound_map\u2462" }, { "id": "ref-for-browser_bound_map\u2463" }], "title": "6.3. Retrieving a key pair" }], "url": "#browser_bound_map" },
                "c1452a90": { "dfnID": "c1452a90", "dfnText": "authenticatorAttachment", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-authenticatorselectioncriteria-authenticatorattachment" }], "title": "5. WebAuthn Extension - \"payment\"" }], "url": "https://www.w3.org/TR/webauthn-3/#dom-authenticatorselectioncriteria-authenticatorattachment" },
                "c36b44c2": { "dfnID": "c36b44c2", "dfnText": "PaymentRequest", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-paymentrequest" }], "title": "1. Introduction" }, { "refs": [{ "id": "ref-for-dom-paymentrequest\u2460" }, { "id": "ref-for-dom-paymentrequest\u2461" }], "title": "4.6. Checking if Secure Payment Confirmation is available" }, { "refs": [{ "id": "ref-for-dom-paymentrequest\u2462" }], "title": "4.7. Steps to validate payment method data" }, { "refs": [{ "id": "ref-for-dom-paymentrequest\u2463" }, { "id": "ref-for-dom-paymentrequest\u2464" }, { "id": "ref-for-dom-paymentrequest\u2465" }], "title": "4.9.2. Outcome of the transaction confirmation UX" }, { "refs": [{ "id": "ref-for-dom-paymentrequest\u2466" }], "title": "4.10. Steps to respond to a payment request" }, { "refs": [{ "id": "ref-for-dom-paymentrequest\u2467" }], "title": "5. WebAuthn Extension - \"payment\"" }, { "refs": [{ "id": "ref-for-dom-paymentrequest\u2468" }], "title": "8. Permissions Policy integration" }, { "refs": [{ "id": "ref-for-dom-paymentrequest\u2460\u24ea" }], "title": "12.5. Fingerprinting via securePaymentConfirmationAvailability" }], "url": "https://www.w3.org/TR/payment-request/#dom-paymentrequest" },
                "c3e881ef": { "dfnID": "c3e881ef", "dfnText": "SecurityError", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-securityerror" }], "title": "4.3. Modification of user activation requirement" }], "url": "https://webidl.spec.whatwg.org/#securityerror" },
                "c63519ed": { "dfnID": "c63519ed", "dfnText": "top-level origin", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-environment-top-level-origin" }], "title": "4.10. Steps to respond to a payment request" }], "url": "https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-top-level-origin" },
                "c72445a7": { "dfnID": "c72445a7", "dfnText": "AuthenticationExtensionsClientOutputs", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dictdef-authenticationextensionsclientoutputs" }], "title": "5. WebAuthn Extension - \"payment\"" }], "url": "https://www.w3.org/TR/webauthn-3/#dictdef-authenticationextensionsclientoutputs" },
                "c7e62ce0": { "dfnID": "c7e62ce0", "dfnText": "user member", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-publickeycredentialcreationoptions-user" }], "title": "3. Registration" }], "url": "https://w3c.github.io/webauthn/#dom-publickeycredentialcreationoptions-user" },
                "c84aeda3": { "dfnID": "c84aeda3", "dfnText": "name", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-publickeycredentialentity-name" }, { "id": "ref-for-dom-publickeycredentialentity-name\u2460" }], "title": "3. Registration" }], "url": "https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialentity-name" },
                "c92c9b81": { "dfnID": "c92c9b81", "dfnText": "relying party identifier", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-relying-party-identifier" }, { "id": "ref-for-relying-party-identifier\u2460" }], "title": "2. Terminology" }, { "refs": [{ "id": "ref-for-relying-party-identifier\u2461" }], "title": "4.4. SecurePaymentConfirmationRequest Dictionary" }], "url": "https://w3c.github.io/webauthn/#relying-party-identifier" },
                "ca3ca4ae": { "dfnID": "ca3ca4ae", "dfnText": "URL parser", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-url-parser" }], "title": "4.7. Steps to validate payment method data" }, { "refs": [{ "id": "ref-for-concept-url-parser\u2460" }], "title": "4.8. Steps to check if a payment can be made" }], "url": "https://url.spec.whatwg.org/#concept-url-parser" },
                "cb79a6a2": { "dfnID": "cb79a6a2", "dfnText": "challenge (for CollectedClientData)", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-collectedclientdata-challenge" }], "title": "9.1. Verifying an Authentication Assertion" }, { "refs": [{ "id": "ref-for-dom-collectedclientdata-challenge\u2460" }], "title": "11.1.1. Login Attack" }, { "refs": [{ "id": "ref-for-dom-collectedclientdata-challenge\u2461" }], "title": "11.1.2. Payment Attack" }], "url": "https://www.w3.org/TR/webauthn-3/#dom-collectedclientdata-challenge" },
                "cc6d7419": { "dfnID": "cc6d7419", "dfnText": "COSEAlgorithmIdentifier", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-typedefdef-cosealgorithmidentifier" }], "title": "6. Browser Bound Key Store" }, { "refs": [{ "id": "ref-for-typedefdef-cosealgorithmidentifier\u2460" }], "title": "6.1. Creating a key pair" }, { "refs": [{ "id": "ref-for-typedefdef-cosealgorithmidentifier\u2461" }], "title": "6.3. Retrieving a key pair" }, { "refs": [{ "id": "ref-for-typedefdef-cosealgorithmidentifier\u2462" }], "title": "6.4. Getting the browser bound public key" }, { "refs": [{ "id": "ref-for-typedefdef-cosealgorithmidentifier\u2463" }], "title": "6.5. Signing client data" }], "url": "https://www.w3.org/TR/webauthn-3/#typedefdef-cosealgorithmidentifier" },
                "cce1676e": { "dfnID": "cce1676e", "dfnText": "extension command", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dfn-extension-commands" }], "title": "10. User Agent Automation" }, { "refs": [{ "id": "ref-for-dfn-extension-commands\u2460" }], "title": "10.1. Set SPC Transaction Mode" }], "url": "https://w3c.github.io/webdriver/#dfn-extension-commands" },
                "cf3032fa": { "dfnID": "cf3032fa", "dfnText": "base64url encoding", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-base64url-encoding" }], "title": "5.2. CollectedClientAdditionalPaymentData Dictionary" }, { "refs": [{ "id": "ref-for-base64url-encoding\u2460" }], "title": "5.3. CollectedClientAdditionalPaymentRegistrationData Dictionary" }], "url": "https://w3c.github.io/webauthn/#base64url-encoding" },
                "client-extension-processing-authentication": { "dfnID": "client-extension-processing-authentication", "dfnText": "Client extension processing (authentication)", "external": false, "refSections": [], "url": "#client-extension-processing-authentication" },
                "client-extension-processing-registration": { "dfnID": "client-extension-processing-registration", "dfnText": "Client extension processing (registration)", "external": false, "refSections": [], "url": "#client-extension-processing-registration" },
                "create-a-key-pair": { "dfnID": "create-a-key-pair", "dfnText": "create a key pair", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-create-a-key-pair" }], "title": "5. WebAuthn Extension - \"payment\"" }, { "refs": [{ "id": "ref-for-create-a-key-pair\u2460" }], "title": "6.3. Retrieving a key pair" }], "url": "#create-a-key-pair" },
                "current-transaction-automation-mode": { "dfnID": "current-transaction-automation-mode", "dfnText": "current transaction automation mode", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-current-transaction-automation-mode" }, { "id": "ref-for-current-transaction-automation-mode\u2460" }], "title": "4.9.3. Test automation support" }, { "refs": [{ "id": "ref-for-current-transaction-automation-mode\u2461" }], "title": "10.1. Set SPC Transaction Mode" }], "url": "#current-transaction-automation-mode" },
                "d03dbdd2": { "dfnID": "d03dbdd2", "dfnText": "bidi isolation", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dfn-bidi-isolation" }], "title": "14. Internationalization Considerations" }], "url": "https://www.w3.org/TR/i18n-glossary/#dfn-bidi-isolation" },
                "d0b4a948": { "dfnID": "d0b4a948", "dfnText": "a promise rejected with", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-a-promise-rejected-with" }], "title": "4.3. Modification of user activation requirement" }], "url": "https://webidl.spec.whatwg.org/#a-promise-rejected-with" },
                "d25dfb2c": { "dfnID": "d25dfb2c", "dfnText": "AbortError", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-aborterror" }], "title": "4.9.2. Outcome of the transaction confirmation UX" }], "url": "https://webidl.spec.whatwg.org/#aborterror" },
                "d5675871": { "dfnID": "d5675871", "dfnText": "alg", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-publickeycredentialparameters-alg" }, { "id": "ref-for-dom-publickeycredentialparameters-alg\u2460" }], "title": "6.1. Creating a key pair" }], "url": "https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialparameters-alg" },
                "d5865ffa": { "dfnID": "d5865ffa", "dfnText": "required (for ResidentKeyRequirement)", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-residentkeyrequirement-required" }], "title": "5. WebAuthn Extension - \"payment\"" }], "url": "https://www.w3.org/TR/webauthn-3/#dom-residentkeyrequirement-required" },
                "d9d31606": { "dfnID": "d9d31606", "dfnText": "timeout", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-publickeycredentialrequestoptions-timeout" }], "title": "4.10. Steps to respond to a payment request" }], "url": "https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialrequestoptions-timeout" },
                "dae0bfde": { "dfnID": "dae0bfde", "dfnText": "serialization of an origin", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-ascii-serialisation-of-an-origin" }], "title": "4.8. Steps to check if a payment can be made" }], "url": "https://html.spec.whatwg.org/multipage/browsers.html#ascii-serialisation-of-an-origin" },
                "dbf8986c": { "dfnID": "dbf8986c", "dfnText": "id", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-credential-id" }], "title": "9.1. Verifying an Authentication Assertion" }], "url": "https://www.w3.org/TR/credential-management-1/#dom-credential-id" },
                "dc24f2fe": { "dfnID": "dc24f2fe", "dfnText": "payment permission string", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dfn-payment" }, { "id": "ref-for-dfn-payment\u2460" }], "title": "4.6. Checking if Secure Payment Confirmation is available" }, { "refs": [{ "id": "ref-for-dfn-payment\u2461" }, { "id": "ref-for-dfn-payment\u2462" }], "title": "8. Permissions Policy integration" }, { "refs": [{ "id": "ref-for-dfn-payment\u2463" }], "title": "12.5. Fingerprinting via securePaymentConfirmationAvailability" }], "url": "https://w3c.github.io/payment-request/#dfn-payment" },
                "dca2de17": { "dfnID": "dca2de17", "dfnText": "DOMException", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-idl-DOMException" }], "title": "4.3. Modification of user activation requirement" }, { "refs": [{ "id": "ref-for-idl-DOMException\u2460" }, { "id": "ref-for-idl-DOMException\u2461" }, { "id": "ref-for-idl-DOMException\u2462" }], "title": "4.9.2. Outcome of the transaction confirmation UX" }, { "refs": [{ "id": "ref-for-idl-DOMException\u2463" }, { "id": "ref-for-idl-DOMException\u2464" }], "title": "4.10. Steps to respond to a payment request" }, { "refs": [{ "id": "ref-for-idl-DOMException\u2465" }], "title": "5. WebAuthn Extension - \"payment\"" }, { "refs": [{ "id": "ref-for-idl-DOMException\u2466" }], "title": "12.1. Probing for credential ids" }], "url": "https://webidl.spec.whatwg.org/#idl-DOMException" },
                "dcdc90bd": { "dfnID": "dcdc90bd", "dfnText": "internal", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-authenticatortransport-internal" }], "title": "4.10. Steps to respond to a payment request" }], "url": "https://www.w3.org/TR/webauthn-3/#dom-authenticatortransport-internal" },
                "dd460c8e": { "dfnID": "dd460c8e", "dfnText": "is not empty", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-list-is-empty" }], "title": "4.7. Steps to validate payment method data" }, { "refs": [{ "id": "ref-for-list-is-empty\u2460" }], "title": "6.1. Creating a key pair" }], "url": "https://infra.spec.whatwg.org/#list-is-empty" },
                "ddee5d8d": { "dfnID": "ddee5d8d", "dfnText": "required (for UserVerificationRequirement)", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-userverificationrequirement-required" }], "title": "4.10. Steps to respond to a payment request" }, { "refs": [{ "id": "ref-for-dom-userverificationrequirement-required\u2460" }], "title": "5. WebAuthn Extension - \"payment\"" }], "url": "https://www.w3.org/TR/webauthn-3/#dom-userverificationrequirement-required" },
                "dea71296": { "dfnID": "dea71296", "dfnText": "id", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-publickeycredentialdescriptor-id" }], "title": "4.10. Steps to respond to a payment request" }], "url": "https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialdescriptor-id" },
                "dffa578a": { "dfnID": "dffa578a", "dfnText": "canMakePayment()", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-paymentrequest-canmakepayment" }], "title": "4.6. Checking if Secure Payment Confirmation is available" }], "url": "https://www.w3.org/TR/payment-request/#dom-paymentrequest-canmakepayment" },
                "dictdef-authenticationextensionspaymentinputs": { "dfnID": "dictdef-authenticationextensionspaymentinputs", "dfnText": "AuthenticationExtensionsPaymentInputs", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dictdef-authenticationextensionspaymentinputs" }], "title": "4.10. Steps to respond to a payment request" }, { "refs": [{ "id": "ref-for-dictdef-authenticationextensionspaymentinputs\u2460" }, { "id": "ref-for-dictdef-authenticationextensionspaymentinputs\u2461" }], "title": "5. WebAuthn Extension - \"payment\"" }], "url": "#dictdef-authenticationextensionspaymentinputs" },
                "dictdef-authenticationextensionspaymentoutputs": { "dfnID": "dictdef-authenticationextensionspaymentoutputs", "dfnText": "AuthenticationExtensionsPaymentOutputs", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dictdef-authenticationextensionspaymentoutputs" }], "title": "1.2.2. Authentication on merchant site" }, { "refs": [{ "id": "ref-for-dictdef-authenticationextensionspaymentoutputs\u2460" }, { "id": "ref-for-dictdef-authenticationextensionspaymentoutputs\u2461" }, { "id": "ref-for-dictdef-authenticationextensionspaymentoutputs\u2462" }], "title": "5. WebAuthn Extension - \"payment\"" }], "url": "#dictdef-authenticationextensionspaymentoutputs" },
                "dictdef-browserboundsignature": { "dfnID": "dictdef-browserboundsignature", "dfnText": "BrowserBoundSignature", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dictdef-browserboundsignature" }], "title": "2. Terminology" }, { "refs": [{ "id": "ref-for-dictdef-browserboundsignature\u2460" }, { "id": "ref-for-dictdef-browserboundsignature\u2461" }, { "id": "ref-for-dictdef-browserboundsignature\u2462" }], "title": "5. WebAuthn Extension - \"payment\"" }], "url": "#dictdef-browserboundsignature" },
                "dictdef-collectedclientadditionalpaymentdata": { "dfnID": "dictdef-collectedclientadditionalpaymentdata", "dfnText": "CollectedClientAdditionalPaymentData", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dictdef-collectedclientadditionalpaymentdata" }], "title": "2. Terminology" }, { "refs": [{ "id": "ref-for-dictdef-collectedclientadditionalpaymentdata\u2460" }], "title": "4.9.1. Information presented to the user" }, { "refs": [{ "id": "ref-for-dictdef-collectedclientadditionalpaymentdata\u2461" }], "title": "5. WebAuthn Extension - \"payment\"" }, { "refs": [{ "id": "ref-for-dictdef-collectedclientadditionalpaymentdata\u2462" }], "title": "5.1. CollectedClientPaymentData Dictionary" }, { "refs": [{ "id": "ref-for-dictdef-collectedclientadditionalpaymentdata\u2463" }, { "id": "ref-for-dictdef-collectedclientadditionalpaymentdata\u2464" }, { "id": "ref-for-dictdef-collectedclientadditionalpaymentdata\u2465" }], "title": "5.2. CollectedClientAdditionalPaymentData Dictionary" }, { "refs": [{ "id": "ref-for-dictdef-collectedclientadditionalpaymentdata\u2466" }], "title": "6.5. Signing client data" }, { "refs": [{ "id": "ref-for-dictdef-collectedclientadditionalpaymentdata\u2467" }], "title": "7.1. PaymentCredentialInstrument Dictionary" }, { "refs": [{ "id": "ref-for-dictdef-collectedclientadditionalpaymentdata\u2468" }], "title": "7.2. PaymentEntityLogo Dictionary" }, { "refs": [{ "id": "ref-for-dictdef-collectedclientadditionalpaymentdata\u2460\u24ea" }], "title": "9.1. Verifying an Authentication Assertion" }], "url": "#dictdef-collectedclientadditionalpaymentdata" },
                "dictdef-collectedclientadditionalpaymentregistrationdata": { "dfnID": "dictdef-collectedclientadditionalpaymentregistrationdata", "dfnText": "CollectedClientAdditionalPaymentRegistrationData", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dictdef-collectedclientadditionalpaymentregistrationdata" }], "title": "2. Terminology" }, { "refs": [{ "id": "ref-for-dictdef-collectedclientadditionalpaymentregistrationdata\u2460" }], "title": "5. WebAuthn Extension - \"payment\"" }, { "refs": [{ "id": "ref-for-dictdef-collectedclientadditionalpaymentregistrationdata\u2461" }], "title": "5.1. CollectedClientPaymentData Dictionary" }, { "refs": [{ "id": "ref-for-dictdef-collectedclientadditionalpaymentregistrationdata\u2462" }, { "id": "ref-for-dictdef-collectedclientadditionalpaymentregistrationdata\u2463" }], "title": "5.3. CollectedClientAdditionalPaymentRegistrationData Dictionary" }, { "refs": [{ "id": "ref-for-dictdef-collectedclientadditionalpaymentregistrationdata\u2464" }], "title": "6.5. Signing client data" }], "url": "#dictdef-collectedclientadditionalpaymentregistrationdata" },
                "dictdef-collectedclientpaymentdata": { "dfnID": "dictdef-collectedclientpaymentdata", "dfnText": "CollectedClientPaymentData", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dictdef-collectedclientpaymentdata" }], "title": "4.9.1. Information presented to the user" }, { "refs": [{ "id": "ref-for-dictdef-collectedclientpaymentdata\u2460" }, { "id": "ref-for-dictdef-collectedclientpaymentdata\u2461" }], "title": "5. WebAuthn Extension - \"payment\"" }, { "refs": [{ "id": "ref-for-dictdef-collectedclientpaymentdata\u2462" }, { "id": "ref-for-dictdef-collectedclientpaymentdata\u2463" }], "title": "5.1. CollectedClientPaymentData Dictionary" }], "url": "#dictdef-collectedclientpaymentdata" },
                "dictdef-paymentcredentialinstrument": { "dfnID": "dictdef-paymentcredentialinstrument", "dfnText": "PaymentCredentialInstrument", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dictdef-paymentcredentialinstrument" }], "title": "4.4. SecurePaymentConfirmationRequest Dictionary" }, { "refs": [{ "id": "ref-for-dictdef-paymentcredentialinstrument\u2460" }], "title": "5. WebAuthn Extension - \"payment\"" }, { "refs": [{ "id": "ref-for-dictdef-paymentcredentialinstrument\u2461" }], "title": "5.2. CollectedClientAdditionalPaymentData Dictionary" }, { "refs": [{ "id": "ref-for-dictdef-paymentcredentialinstrument\u2462" }, { "id": "ref-for-dictdef-paymentcredentialinstrument\u2463" }], "title": "7.1. PaymentCredentialInstrument Dictionary" }], "url": "#dictdef-paymentcredentialinstrument" },
                "dictdef-paymententitylogo": { "dfnID": "dictdef-paymententitylogo", "dfnText": "PaymentEntityLogo", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dictdef-paymententitylogo" }], "title": "4.4. SecurePaymentConfirmationRequest Dictionary" }, { "refs": [{ "id": "ref-for-dictdef-paymententitylogo\u2460" }], "title": "4.9.1. Information presented to the user" }, { "refs": [{ "id": "ref-for-dictdef-paymententitylogo\u2461" }, { "id": "ref-for-dictdef-paymententitylogo\u2462" }, { "id": "ref-for-dictdef-paymententitylogo\u2463" }], "title": "4.10. Steps to respond to a payment request" }, { "refs": [{ "id": "ref-for-dictdef-paymententitylogo\u2464" }], "title": "5. WebAuthn Extension - \"payment\"" }, { "refs": [{ "id": "ref-for-dictdef-paymententitylogo\u2465" }], "title": "5.2. CollectedClientAdditionalPaymentData Dictionary" }, { "refs": [{ "id": "ref-for-dictdef-paymententitylogo\u2466" }, { "id": "ref-for-dictdef-paymententitylogo\u2467" }], "title": "7.2. PaymentEntityLogo Dictionary" }], "url": "#dictdef-paymententitylogo" },
                "dictdef-securepaymentconfirmationrequest": { "dfnID": "dictdef-securepaymentconfirmationrequest", "dfnText": "SecurePaymentConfirmationRequest", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dictdef-securepaymentconfirmationrequest" }, { "id": "ref-for-dictdef-securepaymentconfirmationrequest\u2460" }], "title": "4.4. SecurePaymentConfirmationRequest Dictionary" }, { "refs": [{ "id": "ref-for-dictdef-securepaymentconfirmationrequest\u2461" }], "title": "4.5. Payment Method additional data type" }, { "refs": [{ "id": "ref-for-dictdef-securepaymentconfirmationrequest\u2462" }], "title": "4.7. Steps to validate payment method data" }, { "refs": [{ "id": "ref-for-dictdef-securepaymentconfirmationrequest\u2463" }], "title": "4.8. Steps to check if a payment can be made" }, { "refs": [{ "id": "ref-for-dictdef-securepaymentconfirmationrequest\u2464" }], "title": "4.10. Steps to respond to a payment request" }, { "refs": [{ "id": "ref-for-dictdef-securepaymentconfirmationrequest\u2465" }, { "id": "ref-for-dictdef-securepaymentconfirmationrequest\u2466" }], "title": "5. WebAuthn Extension - \"payment\"" }], "url": "#dictdef-securepaymentconfirmationrequest" },
                "dom-authenticationextensionsclientinputs-payment": { "dfnID": "dom-authenticationextensionsclientinputs-payment", "dfnText": "payment", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-authenticationextensionsclientinputs-payment" }], "title": "3. Registration" }, { "refs": [{ "id": "ref-for-dom-authenticationextensionsclientinputs-payment\u2460" }], "title": "4.10. Steps to respond to a payment request" }, { "refs": [{ "id": "ref-for-dom-authenticationextensionsclientinputs-payment\u2461" }, { "id": "ref-for-dom-authenticationextensionsclientinputs-payment\u2462" }], "title": "11.1.1. Login Attack" }], "url": "#dom-authenticationextensionsclientinputs-payment" },
                "dom-authenticationextensionsclientoutputs-payment": { "dfnID": "dom-authenticationextensionsclientoutputs-payment", "dfnText": "payment", "external": false, "refSections": [], "url": "#dom-authenticationextensionsclientoutputs-payment" },
                "dom-authenticationextensionspaymentinputs-browserboundpubkeycredparams": { "dfnID": "dom-authenticationextensionspaymentinputs-browserboundpubkeycredparams", "dfnText": "browserBoundPubKeyCredParams", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-authenticationextensionspaymentinputs-browserboundpubkeycredparams" }], "title": "4.10. Steps to respond to a payment request" }, { "refs": [{ "id": "ref-for-dom-authenticationextensionspaymentinputs-browserboundpubkeycredparams\u2460" }, { "id": "ref-for-dom-authenticationextensionspaymentinputs-browserboundpubkeycredparams\u2461" }, { "id": "ref-for-dom-authenticationextensionspaymentinputs-browserboundpubkeycredparams\u2462" }], "title": "5. WebAuthn Extension - \"payment\"" }], "url": "#dom-authenticationextensionspaymentinputs-browserboundpubkeycredparams" },
                "dom-authenticationextensionspaymentinputs-instrument": { "dfnID": "dom-authenticationextensionspaymentinputs-instrument", "dfnText": "instrument", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-authenticationextensionspaymentinputs-instrument" }], "title": "4.10. Steps to respond to a payment request" }, { "refs": [{ "id": "ref-for-dom-authenticationextensionspaymentinputs-instrument\u2460" }, { "id": "ref-for-dom-authenticationextensionspaymentinputs-instrument\u2461" }], "title": "5. WebAuthn Extension - \"payment\"" }], "url": "#dom-authenticationextensionspaymentinputs-instrument" },
                "dom-authenticationextensionspaymentinputs-ispayment": { "dfnID": "dom-authenticationextensionspaymentinputs-ispayment", "dfnText": "isPayment", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-authenticationextensionspaymentinputs-ispayment" }], "title": "4.10. Steps to respond to a payment request" }, { "refs": [{ "id": "ref-for-dom-authenticationextensionspaymentinputs-ispayment\u2460" }], "title": "5. WebAuthn Extension - \"payment\"" }], "url": "#dom-authenticationextensionspaymentinputs-ispayment" },
                "dom-authenticationextensionspaymentinputs-payeename": { "dfnID": "dom-authenticationextensionspaymentinputs-payeename", "dfnText": "payeeName", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-authenticationextensionspaymentinputs-payeename" }], "title": "4.10. Steps to respond to a payment request" }, { "refs": [{ "id": "ref-for-dom-authenticationextensionspaymentinputs-payeename\u2460" }, { "id": "ref-for-dom-authenticationextensionspaymentinputs-payeename\u2461" }], "title": "5. WebAuthn Extension - \"payment\"" }], "url": "#dom-authenticationextensionspaymentinputs-payeename" },
                "dom-authenticationextensionspaymentinputs-payeeorigin": { "dfnID": "dom-authenticationextensionspaymentinputs-payeeorigin", "dfnText": "payeeOrigin", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-authenticationextensionspaymentinputs-payeeorigin" }], "title": "4.10. Steps to respond to a payment request" }, { "refs": [{ "id": "ref-for-dom-authenticationextensionspaymentinputs-payeeorigin\u2460" }, { "id": "ref-for-dom-authenticationextensionspaymentinputs-payeeorigin\u2461" }], "title": "5. WebAuthn Extension - \"payment\"" }], "url": "#dom-authenticationextensionspaymentinputs-payeeorigin" },
                "dom-authenticationextensionspaymentinputs-paymententitieslogos": { "dfnID": "dom-authenticationextensionspaymentinputs-paymententitieslogos", "dfnText": "paymentEntitiesLogos", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-authenticationextensionspaymentinputs-paymententitieslogos" }], "title": "4.10. Steps to respond to a payment request" }, { "refs": [{ "id": "ref-for-dom-authenticationextensionspaymentinputs-paymententitieslogos\u2460" }, { "id": "ref-for-dom-authenticationextensionspaymentinputs-paymententitieslogos\u2461" }], "title": "5. WebAuthn Extension - \"payment\"" }], "url": "#dom-authenticationextensionspaymentinputs-paymententitieslogos" },
                "dom-authenticationextensionspaymentinputs-rpid": { "dfnID": "dom-authenticationextensionspaymentinputs-rpid", "dfnText": "rpId", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-authenticationextensionspaymentinputs-rpid" }], "title": "4.10. Steps to respond to a payment request" }, { "refs": [{ "id": "ref-for-dom-authenticationextensionspaymentinputs-rpid\u2460" }, { "id": "ref-for-dom-authenticationextensionspaymentinputs-rpid\u2461" }], "title": "5. WebAuthn Extension - \"payment\"" }], "url": "#dom-authenticationextensionspaymentinputs-rpid" },
                "dom-authenticationextensionspaymentinputs-toporigin": { "dfnID": "dom-authenticationextensionspaymentinputs-toporigin", "dfnText": "topOrigin", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-authenticationextensionspaymentinputs-toporigin" }], "title": "4.10. Steps to respond to a payment request" }, { "refs": [{ "id": "ref-for-dom-authenticationextensionspaymentinputs-toporigin\u2460" }, { "id": "ref-for-dom-authenticationextensionspaymentinputs-toporigin\u2461" }], "title": "5. WebAuthn Extension - \"payment\"" }], "url": "#dom-authenticationextensionspaymentinputs-toporigin" },
                "dom-authenticationextensionspaymentinputs-total": { "dfnID": "dom-authenticationextensionspaymentinputs-total", "dfnText": "total", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-authenticationextensionspaymentinputs-total" }], "title": "4.10. Steps to respond to a payment request" }, { "refs": [{ "id": "ref-for-dom-authenticationextensionspaymentinputs-total\u2460" }, { "id": "ref-for-dom-authenticationextensionspaymentinputs-total\u2461" }], "title": "5. WebAuthn Extension - \"payment\"" }], "url": "#dom-authenticationextensionspaymentinputs-total" },
                "dom-authenticationextensionspaymentoutputs-browserboundsignature": { "dfnID": "dom-authenticationextensionspaymentoutputs-browserboundsignature", "dfnText": "browserBoundSignature", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-authenticationextensionspaymentoutputs-browserboundsignature" }, { "id": "ref-for-dom-authenticationextensionspaymentoutputs-browserboundsignature\u2460" }, { "id": "ref-for-dom-authenticationextensionspaymentoutputs-browserboundsignature\u2461" }], "title": "5. WebAuthn Extension - \"payment\"" }], "url": "#dom-authenticationextensionspaymentoutputs-browserboundsignature" },
                "dom-browserboundsignature-signature": { "dfnID": "dom-browserboundsignature-signature", "dfnText": "signature", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-browserboundsignature-signature" }], "title": "2. Terminology" }, { "refs": [{ "id": "ref-for-dom-browserboundsignature-signature\u2460" }, { "id": "ref-for-dom-browserboundsignature-signature\u2461" }, { "id": "ref-for-dom-browserboundsignature-signature\u2462" }], "title": "5. WebAuthn Extension - \"payment\"" }], "url": "#dom-browserboundsignature-signature" },
                "dom-collectedclientadditionalpaymentdata-browserboundpublickey": { "dfnID": "dom-collectedclientadditionalpaymentdata-browserboundpublickey", "dfnText": "browserBoundPublicKey", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-collectedclientadditionalpaymentdata-browserboundpublickey" }], "title": "1.2.2. Authentication on merchant site" }, { "refs": [{ "id": "ref-for-dom-collectedclientadditionalpaymentdata-browserboundpublickey\u2460" }], "title": "2. Terminology" }, { "refs": [{ "id": "ref-for-dom-collectedclientadditionalpaymentdata-browserboundpublickey\u2461" }], "title": "5. WebAuthn Extension - \"payment\"" }, { "refs": [{ "id": "ref-for-dom-collectedclientadditionalpaymentdata-browserboundpublickey\u2462" }], "title": "5.2. CollectedClientAdditionalPaymentData Dictionary" }], "url": "#dom-collectedclientadditionalpaymentdata-browserboundpublickey" },
                "dom-collectedclientadditionalpaymentdata-instrument": { "dfnID": "dom-collectedclientadditionalpaymentdata-instrument", "dfnText": "instrument", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-collectedclientadditionalpaymentdata-instrument" }], "title": "4.8. Steps to check if a payment can be made" }, { "refs": [{ "id": "ref-for-dom-collectedclientadditionalpaymentdata-instrument\u2460" }], "title": "4.9.1. Information presented to the user" }, { "refs": [{ "id": "ref-for-dom-collectedclientadditionalpaymentdata-instrument\u2461" }], "title": "5. WebAuthn Extension - \"payment\"" }, { "refs": [{ "id": "ref-for-dom-collectedclientadditionalpaymentdata-instrument\u2462" }], "title": "5.2. CollectedClientAdditionalPaymentData Dictionary" }, { "refs": [{ "id": "ref-for-dom-collectedclientadditionalpaymentdata-instrument\u2463" }], "title": "9.1. Verifying an Authentication Assertion" }], "url": "#dom-collectedclientadditionalpaymentdata-instrument" },
                "dom-collectedclientadditionalpaymentdata-payeename": { "dfnID": "dom-collectedclientadditionalpaymentdata-payeename", "dfnText": "payeeName", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-collectedclientadditionalpaymentdata-payeename" }], "title": "4.9.1. Information presented to the user" }, { "refs": [{ "id": "ref-for-dom-collectedclientadditionalpaymentdata-payeename\u2460" }], "title": "5. WebAuthn Extension - \"payment\"" }, { "refs": [{ "id": "ref-for-dom-collectedclientadditionalpaymentdata-payeename\u2461" }], "title": "5.2. CollectedClientAdditionalPaymentData Dictionary" }, { "refs": [{ "id": "ref-for-dom-collectedclientadditionalpaymentdata-payeename\u2462" }], "title": "9.1. Verifying an Authentication Assertion" }], "url": "#dom-collectedclientadditionalpaymentdata-payeename" },
                "dom-collectedclientadditionalpaymentdata-payeeorigin": { "dfnID": "dom-collectedclientadditionalpaymentdata-payeeorigin", "dfnText": "payeeOrigin", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-collectedclientadditionalpaymentdata-payeeorigin" }], "title": "4.9.1. Information presented to the user" }, { "refs": [{ "id": "ref-for-dom-collectedclientadditionalpaymentdata-payeeorigin\u2460" }], "title": "5. WebAuthn Extension - \"payment\"" }, { "refs": [{ "id": "ref-for-dom-collectedclientadditionalpaymentdata-payeeorigin\u2461" }], "title": "5.2. CollectedClientAdditionalPaymentData Dictionary" }, { "refs": [{ "id": "ref-for-dom-collectedclientadditionalpaymentdata-payeeorigin\u2462" }], "title": "9.1. Verifying an Authentication Assertion" }], "url": "#dom-collectedclientadditionalpaymentdata-payeeorigin" },
                "dom-collectedclientadditionalpaymentdata-paymententitieslogos": { "dfnID": "dom-collectedclientadditionalpaymentdata-paymententitieslogos", "dfnText": "paymentEntitiesLogos", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-collectedclientadditionalpaymentdata-paymententitieslogos" }], "title": "4.8. Steps to check if a payment can be made" }, { "refs": [{ "id": "ref-for-dom-collectedclientadditionalpaymentdata-paymententitieslogos\u2460" }], "title": "4.9.1. Information presented to the user" }, { "refs": [{ "id": "ref-for-dom-collectedclientadditionalpaymentdata-paymententitieslogos\u2461" }], "title": "5. WebAuthn Extension - \"payment\"" }, { "refs": [{ "id": "ref-for-dom-collectedclientadditionalpaymentdata-paymententitieslogos\u2462" }], "title": "5.2. CollectedClientAdditionalPaymentData Dictionary" }, { "refs": [{ "id": "ref-for-dom-collectedclientadditionalpaymentdata-paymententitieslogos\u2463" }], "title": "9.1. Verifying an Authentication Assertion" }], "url": "#dom-collectedclientadditionalpaymentdata-paymententitieslogos" },
                "dom-collectedclientadditionalpaymentdata-rpid": { "dfnID": "dom-collectedclientadditionalpaymentdata-rpid", "dfnText": "rpId", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-collectedclientadditionalpaymentdata-rpid" }], "title": "5. WebAuthn Extension - \"payment\"" }, { "refs": [{ "id": "ref-for-dom-collectedclientadditionalpaymentdata-rpid\u2460" }], "title": "5.2. CollectedClientAdditionalPaymentData Dictionary" }, { "refs": [{ "id": "ref-for-dom-collectedclientadditionalpaymentdata-rpid\u2461" }], "title": "9.1. Verifying an Authentication Assertion" }], "url": "#dom-collectedclientadditionalpaymentdata-rpid" },
                "dom-collectedclientadditionalpaymentdata-toporigin": { "dfnID": "dom-collectedclientadditionalpaymentdata-toporigin", "dfnText": "topOrigin", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-collectedclientadditionalpaymentdata-toporigin" }], "title": "5. WebAuthn Extension - \"payment\"" }, { "refs": [{ "id": "ref-for-dom-collectedclientadditionalpaymentdata-toporigin\u2460" }], "title": "5.2. CollectedClientAdditionalPaymentData Dictionary" }, { "refs": [{ "id": "ref-for-dom-collectedclientadditionalpaymentdata-toporigin\u2461" }], "title": "9.1. Verifying an Authentication Assertion" }], "url": "#dom-collectedclientadditionalpaymentdata-toporigin" },
                "dom-collectedclientadditionalpaymentdata-total": { "dfnID": "dom-collectedclientadditionalpaymentdata-total", "dfnText": "total", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-collectedclientadditionalpaymentdata-total" }], "title": "4.9.1. Information presented to the user" }, { "refs": [{ "id": "ref-for-dom-collectedclientadditionalpaymentdata-total\u2460" }], "title": "5. WebAuthn Extension - \"payment\"" }, { "refs": [{ "id": "ref-for-dom-collectedclientadditionalpaymentdata-total\u2461" }], "title": "5.2. CollectedClientAdditionalPaymentData Dictionary" }, { "refs": [{ "id": "ref-for-dom-collectedclientadditionalpaymentdata-total\u2462" }], "title": "9.1. Verifying an Authentication Assertion" }], "url": "#dom-collectedclientadditionalpaymentdata-total" },
                "dom-collectedclientadditionalpaymentregistrationdata-browserboundpublickey": { "dfnID": "dom-collectedclientadditionalpaymentregistrationdata-browserboundpublickey", "dfnText": "browserBoundPublicKey", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-collectedclientadditionalpaymentregistrationdata-browserboundpublickey" }], "title": "2. Terminology" }, { "refs": [{ "id": "ref-for-dom-collectedclientadditionalpaymentregistrationdata-browserboundpublickey\u2460" }], "title": "5. WebAuthn Extension - \"payment\"" }, { "refs": [{ "id": "ref-for-dom-collectedclientadditionalpaymentregistrationdata-browserboundpublickey\u2461" }], "title": "5.3. CollectedClientAdditionalPaymentRegistrationData Dictionary" }], "url": "#dom-collectedclientadditionalpaymentregistrationdata-browserboundpublickey" },
                "dom-collectedclientpaymentdata-payment": { "dfnID": "dom-collectedclientpaymentdata-payment", "dfnText": "payment", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-collectedclientpaymentdata-payment" }, { "id": "ref-for-dom-collectedclientpaymentdata-payment\u2460" }], "title": "5. WebAuthn Extension - \"payment\"" }, { "refs": [{ "id": "ref-for-dom-collectedclientpaymentdata-payment\u2461" }], "title": "5.1. CollectedClientPaymentData Dictionary" }, { "refs": [{ "id": "ref-for-dom-collectedclientpaymentdata-payment\u2462" }, { "id": "ref-for-dom-collectedclientpaymentdata-payment\u2463" }, { "id": "ref-for-dom-collectedclientpaymentdata-payment\u2464" }, { "id": "ref-for-dom-collectedclientpaymentdata-payment\u2465" }, { "id": "ref-for-dom-collectedclientpaymentdata-payment\u2466" }, { "id": "ref-for-dom-collectedclientpaymentdata-payment\u2467" }, { "id": "ref-for-dom-collectedclientpaymentdata-payment\u2468" }], "title": "9.1. Verifying an Authentication Assertion" }], "url": "#dom-collectedclientpaymentdata-payment" },
                "dom-paymentcredentialinstrument-details": { "dfnID": "dom-paymentcredentialinstrument-details", "dfnText": "details", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-paymentcredentialinstrument-details" }], "title": "4.7. Steps to validate payment method data" }, { "refs": [{ "id": "ref-for-dom-paymentcredentialinstrument-details\u2460" }], "title": "4.9.1. Information presented to the user" }, { "refs": [{ "id": "ref-for-dom-paymentcredentialinstrument-details\u2461" }, { "id": "ref-for-dom-paymentcredentialinstrument-details\u2462" }], "title": "7.1. PaymentCredentialInstrument Dictionary" }], "url": "#dom-paymentcredentialinstrument-details" },
                "dom-paymentcredentialinstrument-displayname": { "dfnID": "dom-paymentcredentialinstrument-displayname", "dfnText": "displayName", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-paymentcredentialinstrument-displayname" }], "title": "4.7. Steps to validate payment method data" }, { "refs": [{ "id": "ref-for-dom-paymentcredentialinstrument-displayname\u2460" }], "title": "4.9.1. Information presented to the user" }, { "refs": [{ "id": "ref-for-dom-paymentcredentialinstrument-displayname\u2461" }, { "id": "ref-for-dom-paymentcredentialinstrument-displayname\u2462" }], "title": "7.1. PaymentCredentialInstrument Dictionary" }, { "refs": [{ "id": "ref-for-dom-paymentcredentialinstrument-displayname\u2463" }, { "id": "ref-for-dom-paymentcredentialinstrument-displayname\u2464" }, { "id": "ref-for-dom-paymentcredentialinstrument-displayname\u2465" }], "title": "13. Accessibility Considerations" }, { "refs": [{ "id": "ref-for-dom-paymentcredentialinstrument-displayname\u2466" }], "title": "14. Internationalization Considerations" }], "url": "#dom-paymentcredentialinstrument-displayname" },
                "dom-paymentcredentialinstrument-icon": { "dfnID": "dom-paymentcredentialinstrument-icon", "dfnText": "icon", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-paymentcredentialinstrument-icon" }, { "id": "ref-for-dom-paymentcredentialinstrument-icon\u2460" }], "title": "4.7. Steps to validate payment method data" }, { "refs": [{ "id": "ref-for-dom-paymentcredentialinstrument-icon\u2461" }, { "id": "ref-for-dom-paymentcredentialinstrument-icon\u2462" }], "title": "4.8. Steps to check if a payment can be made" }, { "refs": [{ "id": "ref-for-dom-paymentcredentialinstrument-icon\u2463" }, { "id": "ref-for-dom-paymentcredentialinstrument-icon\u2464" }], "title": "4.9.1. Information presented to the user" }, { "refs": [{ "id": "ref-for-dom-paymentcredentialinstrument-icon\u2465" }, { "id": "ref-for-dom-paymentcredentialinstrument-icon\u2466" }], "title": "7.1. PaymentCredentialInstrument Dictionary" }, { "refs": [{ "id": "ref-for-dom-paymentcredentialinstrument-icon\u2467" }], "title": "13. Accessibility Considerations" }], "url": "#dom-paymentcredentialinstrument-icon" },
                "dom-paymentcredentialinstrument-iconmustbeshown": { "dfnID": "dom-paymentcredentialinstrument-iconmustbeshown", "dfnText": "iconMustBeShown", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-paymentcredentialinstrument-iconmustbeshown" }], "title": "4.8. Steps to check if a payment can be made" }, { "refs": [{ "id": "ref-for-dom-paymentcredentialinstrument-iconmustbeshown\u2460" }], "title": "4.9.1. Information presented to the user" }, { "refs": [{ "id": "ref-for-dom-paymentcredentialinstrument-iconmustbeshown\u2461" }], "title": "7.1. PaymentCredentialInstrument Dictionary" }], "url": "#dom-paymentcredentialinstrument-iconmustbeshown" },
                "dom-paymententitylogo-label": { "dfnID": "dom-paymententitylogo-label", "dfnText": "label", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-paymententitylogo-label" }], "title": "4.7. Steps to validate payment method data" }, { "refs": [{ "id": "ref-for-dom-paymententitylogo-label\u2460" }, { "id": "ref-for-dom-paymententitylogo-label\u2461" }], "title": "4.9.1. Information presented to the user" }, { "refs": [{ "id": "ref-for-dom-paymententitylogo-label\u2462" }], "title": "7.2. PaymentEntityLogo Dictionary" }], "url": "#dom-paymententitylogo-label" },
                "dom-paymententitylogo-url": { "dfnID": "dom-paymententitylogo-url", "dfnText": "url", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-paymententitylogo-url" }, { "id": "ref-for-dom-paymententitylogo-url\u2460" }], "title": "4.7. Steps to validate payment method data" }, { "refs": [{ "id": "ref-for-dom-paymententitylogo-url\u2461" }, { "id": "ref-for-dom-paymententitylogo-url\u2462" }], "title": "4.8. Steps to check if a payment can be made" }, { "refs": [{ "id": "ref-for-dom-paymententitylogo-url\u2463" }], "title": "4.9.1. Information presented to the user" }, { "refs": [{ "id": "ref-for-dom-paymententitylogo-url\u2464" }, { "id": "ref-for-dom-paymententitylogo-url\u2465" }], "title": "7.2. PaymentEntityLogo Dictionary" }], "url": "#dom-paymententitylogo-url" },
                "dom-paymentrequest-securepaymentconfirmationavailability": { "dfnID": "dom-paymentrequest-securepaymentconfirmationavailability", "dfnText": "securePaymentConfirmationAvailability", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-paymentrequest-securepaymentconfirmationavailability" }, { "id": "ref-for-dom-paymentrequest-securepaymentconfirmationavailability\u2460" }, { "id": "ref-for-dom-paymentrequest-securepaymentconfirmationavailability\u2461" }], "title": "4.6. Checking if Secure Payment Confirmation is available" }, { "refs": [{ "id": "ref-for-dom-paymentrequest-securepaymentconfirmationavailability\u2462" }], "title": "12.5. Fingerprinting via securePaymentConfirmationAvailability" }], "url": "#dom-paymentrequest-securepaymentconfirmationavailability" },
                "dom-securepaymentconfirmationavailability-available": { "dfnID": "dom-securepaymentconfirmationavailability-available", "dfnText": "available", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-securepaymentconfirmationavailability-available" }, { "id": "ref-for-dom-securepaymentconfirmationavailability-available\u2460" }], "title": "4.6. Checking if Secure Payment Confirmation is available" }], "url": "#dom-securepaymentconfirmationavailability-available" },
                "dom-securepaymentconfirmationavailability-unavailable-feature-not-enabled": { "dfnID": "dom-securepaymentconfirmationavailability-unavailable-feature-not-enabled", "dfnText": "unavailable-feature-not-enabled", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-securepaymentconfirmationavailability-unavailable-feature-not-enabled" }, { "id": "ref-for-dom-securepaymentconfirmationavailability-unavailable-feature-not-enabled\u2460" }], "title": "4.6. Checking if Secure Payment Confirmation is available" }, { "refs": [{ "id": "ref-for-dom-securepaymentconfirmationavailability-unavailable-feature-not-enabled\u2461" }], "title": "12.5. Fingerprinting via securePaymentConfirmationAvailability" }], "url": "#dom-securepaymentconfirmationavailability-unavailable-feature-not-enabled" },
                "dom-securepaymentconfirmationavailability-unavailable-no-permission-policy": { "dfnID": "dom-securepaymentconfirmationavailability-unavailable-no-permission-policy", "dfnText": "unavailable-no-permission-policy", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-securepaymentconfirmationavailability-unavailable-no-permission-policy" }, { "id": "ref-for-dom-securepaymentconfirmationavailability-unavailable-no-permission-policy\u2460" }], "title": "4.6. Checking if Secure Payment Confirmation is available" }, { "refs": [{ "id": "ref-for-dom-securepaymentconfirmationavailability-unavailable-no-permission-policy\u2461" }], "title": "12.5. Fingerprinting via securePaymentConfirmationAvailability" }], "url": "#dom-securepaymentconfirmationavailability-unavailable-no-permission-policy" },
                "dom-securepaymentconfirmationavailability-unavailable-no-user-verifying-platform-authenticator": { "dfnID": "dom-securepaymentconfirmationavailability-unavailable-no-user-verifying-platform-authenticator", "dfnText": "unavailable-no-user-verifying-platform-authenticator", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-securepaymentconfirmationavailability-unavailable-no-user-verifying-platform-authenticator" }, { "id": "ref-for-dom-securepaymentconfirmationavailability-unavailable-no-user-verifying-platform-authenticator\u2460" }], "title": "4.6. Checking if Secure Payment Confirmation is available" }, { "refs": [{ "id": "ref-for-dom-securepaymentconfirmationavailability-unavailable-no-user-verifying-platform-authenticator\u2461" }], "title": "12.5. Fingerprinting via securePaymentConfirmationAvailability" }], "url": "#dom-securepaymentconfirmationavailability-unavailable-no-user-verifying-platform-authenticator" },
                "dom-securepaymentconfirmationavailability-unavailable-unknown-reason": { "dfnID": "dom-securepaymentconfirmationavailability-unavailable-unknown-reason", "dfnText": "unavailable-unknown-reason", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-securepaymentconfirmationavailability-unavailable-unknown-reason" }, { "id": "ref-for-dom-securepaymentconfirmationavailability-unavailable-unknown-reason\u2460" }, { "id": "ref-for-dom-securepaymentconfirmationavailability-unavailable-unknown-reason\u2461" }], "title": "4.6. Checking if Secure Payment Confirmation is available" }, { "refs": [{ "id": "ref-for-dom-securepaymentconfirmationavailability-unavailable-unknown-reason\u2462" }], "title": "12.5. Fingerprinting via securePaymentConfirmationAvailability" }], "url": "#dom-securepaymentconfirmationavailability-unavailable-unknown-reason" },
                "dom-securepaymentconfirmationrequest-browserboundpubkeycredparams": { "dfnID": "dom-securepaymentconfirmationrequest-browserboundpubkeycredparams", "dfnText": "browserBoundPubKeyCredParams", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-securepaymentconfirmationrequest-browserboundpubkeycredparams" }], "title": "4.4. SecurePaymentConfirmationRequest Dictionary" }, { "refs": [{ "id": "ref-for-dom-securepaymentconfirmationrequest-browserboundpubkeycredparams\u2460" }], "title": "4.10. Steps to respond to a payment request" }, { "refs": [{ "id": "ref-for-dom-securepaymentconfirmationrequest-browserboundpubkeycredparams\u2461" }, { "id": "ref-for-dom-securepaymentconfirmationrequest-browserboundpubkeycredparams\u2462" }], "title": "5. WebAuthn Extension - \"payment\"" }], "url": "#dom-securepaymentconfirmationrequest-browserboundpubkeycredparams" },
                "dom-securepaymentconfirmationrequest-challenge": { "dfnID": "dom-securepaymentconfirmationrequest-challenge", "dfnText": "challenge", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-securepaymentconfirmationrequest-challenge" }], "title": "4.4. SecurePaymentConfirmationRequest Dictionary" }, { "refs": [{ "id": "ref-for-dom-securepaymentconfirmationrequest-challenge\u2460" }], "title": "4.7. Steps to validate payment method data" }, { "refs": [{ "id": "ref-for-dom-securepaymentconfirmationrequest-challenge\u2461" }], "title": "4.10. Steps to respond to a payment request" }], "url": "#dom-securepaymentconfirmationrequest-challenge" },
                "dom-securepaymentconfirmationrequest-credentialids": { "dfnID": "dom-securepaymentconfirmationrequest-credentialids", "dfnText": "credentialIds", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-securepaymentconfirmationrequest-credentialids" }], "title": "4.4. SecurePaymentConfirmationRequest Dictionary" }, { "refs": [{ "id": "ref-for-dom-securepaymentconfirmationrequest-credentialids\u2460" }, { "id": "ref-for-dom-securepaymentconfirmationrequest-credentialids\u2461" }], "title": "4.7. Steps to validate payment method data" }, { "refs": [{ "id": "ref-for-dom-securepaymentconfirmationrequest-credentialids\u2462" }, { "id": "ref-for-dom-securepaymentconfirmationrequest-credentialids\u2463" }, { "id": "ref-for-dom-securepaymentconfirmationrequest-credentialids\u2464" }], "title": "4.8. Steps to check if a payment can be made" }, { "refs": [{ "id": "ref-for-dom-securepaymentconfirmationrequest-credentialids\u2465" }, { "id": "ref-for-dom-securepaymentconfirmationrequest-credentialids\u2466" }], "title": "4.9.2. Outcome of the transaction confirmation UX" }, { "refs": [{ "id": "ref-for-dom-securepaymentconfirmationrequest-credentialids\u2467" }], "title": "4.9.3. Test automation support" }, { "refs": [{ "id": "ref-for-dom-securepaymentconfirmationrequest-credentialids\u2468" }, { "id": "ref-for-dom-securepaymentconfirmationrequest-credentialids\u2460\u24ea" }], "title": "4.10. Steps to respond to a payment request" }], "url": "#dom-securepaymentconfirmationrequest-credentialids" },
                "dom-securepaymentconfirmationrequest-extensions": { "dfnID": "dom-securepaymentconfirmationrequest-extensions", "dfnText": "extensions", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-securepaymentconfirmationrequest-extensions" }], "title": "4.4. SecurePaymentConfirmationRequest Dictionary" }, { "refs": [{ "id": "ref-for-dom-securepaymentconfirmationrequest-extensions\u2460" }], "title": "4.10. Steps to respond to a payment request" }], "url": "#dom-securepaymentconfirmationrequest-extensions" },
                "dom-securepaymentconfirmationrequest-instrument": { "dfnID": "dom-securepaymentconfirmationrequest-instrument", "dfnText": "instrument", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-securepaymentconfirmationrequest-instrument" }], "title": "4.4. SecurePaymentConfirmationRequest Dictionary" }, { "refs": [{ "id": "ref-for-dom-securepaymentconfirmationrequest-instrument\u2460" }, { "id": "ref-for-dom-securepaymentconfirmationrequest-instrument\u2461" }, { "id": "ref-for-dom-securepaymentconfirmationrequest-instrument\u2462" }, { "id": "ref-for-dom-securepaymentconfirmationrequest-instrument\u2463" }], "title": "4.7. Steps to validate payment method data" }, { "refs": [{ "id": "ref-for-dom-securepaymentconfirmationrequest-instrument\u2464" }, { "id": "ref-for-dom-securepaymentconfirmationrequest-instrument\u2465" }, { "id": "ref-for-dom-securepaymentconfirmationrequest-instrument\u2466" }], "title": "4.8. Steps to check if a payment can be made" }, { "refs": [{ "id": "ref-for-dom-securepaymentconfirmationrequest-instrument\u2467" }], "title": "4.10. Steps to respond to a payment request" }], "url": "#dom-securepaymentconfirmationrequest-instrument" },
                "dom-securepaymentconfirmationrequest-locale": { "dfnID": "dom-securepaymentconfirmationrequest-locale", "dfnText": "locale", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-securepaymentconfirmationrequest-locale" }], "title": "4.4. SecurePaymentConfirmationRequest Dictionary" }, { "refs": [{ "id": "ref-for-dom-securepaymentconfirmationrequest-locale\u2460" }, { "id": "ref-for-dom-securepaymentconfirmationrequest-locale\u2461" }, { "id": "ref-for-dom-securepaymentconfirmationrequest-locale\u2462" }], "title": "4.7. Steps to validate payment method data" }, { "refs": [{ "id": "ref-for-dom-securepaymentconfirmationrequest-locale\u2463" }], "title": "4.9.1. Information presented to the user" }, { "refs": [{ "id": "ref-for-dom-securepaymentconfirmationrequest-locale\u2464" }, { "id": "ref-for-dom-securepaymentconfirmationrequest-locale\u2465" }], "title": "14. Internationalization Considerations" }], "url": "#dom-securepaymentconfirmationrequest-locale" },
                "dom-securepaymentconfirmationrequest-payeename": { "dfnID": "dom-securepaymentconfirmationrequest-payeename", "dfnText": "payeeName", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-securepaymentconfirmationrequest-payeename" }, { "id": "ref-for-dom-securepaymentconfirmationrequest-payeename\u2460" }], "title": "4.4. SecurePaymentConfirmationRequest Dictionary" }, { "refs": [{ "id": "ref-for-dom-securepaymentconfirmationrequest-payeename\u2461" }, { "id": "ref-for-dom-securepaymentconfirmationrequest-payeename\u2462" }], "title": "4.7. Steps to validate payment method data" }, { "refs": [{ "id": "ref-for-dom-securepaymentconfirmationrequest-payeename\u2463" }], "title": "4.10. Steps to respond to a payment request" }], "url": "#dom-securepaymentconfirmationrequest-payeename" },
                "dom-securepaymentconfirmationrequest-payeeorigin": { "dfnID": "dom-securepaymentconfirmationrequest-payeeorigin", "dfnText": "payeeOrigin", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-securepaymentconfirmationrequest-payeeorigin" }, { "id": "ref-for-dom-securepaymentconfirmationrequest-payeeorigin\u2460" }], "title": "4.4. SecurePaymentConfirmationRequest Dictionary" }, { "refs": [{ "id": "ref-for-dom-securepaymentconfirmationrequest-payeeorigin\u2461" }, { "id": "ref-for-dom-securepaymentconfirmationrequest-payeeorigin\u2462" }, { "id": "ref-for-dom-securepaymentconfirmationrequest-payeeorigin\u2463" }, { "id": "ref-for-dom-securepaymentconfirmationrequest-payeeorigin\u2464" }], "title": "4.7. Steps to validate payment method data" }, { "refs": [{ "id": "ref-for-dom-securepaymentconfirmationrequest-payeeorigin\u2465" }, { "id": "ref-for-dom-securepaymentconfirmationrequest-payeeorigin\u2466" }, { "id": "ref-for-dom-securepaymentconfirmationrequest-payeeorigin\u2467" }], "title": "4.8. Steps to check if a payment can be made" }, { "refs": [{ "id": "ref-for-dom-securepaymentconfirmationrequest-payeeorigin\u2468" }], "title": "4.10. Steps to respond to a payment request" }], "url": "#dom-securepaymentconfirmationrequest-payeeorigin" },
                "dom-securepaymentconfirmationrequest-paymententitieslogos": { "dfnID": "dom-securepaymentconfirmationrequest-paymententitieslogos", "dfnText": "paymentEntitiesLogos", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-securepaymentconfirmationrequest-paymententitieslogos" }], "title": "4.4. SecurePaymentConfirmationRequest Dictionary" }, { "refs": [{ "id": "ref-for-dom-securepaymentconfirmationrequest-paymententitieslogos\u2460" }, { "id": "ref-for-dom-securepaymentconfirmationrequest-paymententitieslogos\u2461" }], "title": "4.7. Steps to validate payment method data" }, { "refs": [{ "id": "ref-for-dom-securepaymentconfirmationrequest-paymententitieslogos\u2462" }, { "id": "ref-for-dom-securepaymentconfirmationrequest-paymententitieslogos\u2463" }], "title": "4.8. Steps to check if a payment can be made" }, { "refs": [{ "id": "ref-for-dom-securepaymentconfirmationrequest-paymententitieslogos\u2464" }], "title": "4.10. Steps to respond to a payment request" }], "url": "#dom-securepaymentconfirmationrequest-paymententitieslogos" },
                "dom-securepaymentconfirmationrequest-rpid": { "dfnID": "dom-securepaymentconfirmationrequest-rpid", "dfnText": "rpId", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-securepaymentconfirmationrequest-rpid" }], "title": "4.4. SecurePaymentConfirmationRequest Dictionary" }, { "refs": [{ "id": "ref-for-dom-securepaymentconfirmationrequest-rpid\u2460" }], "title": "4.7. Steps to validate payment method data" }, { "refs": [{ "id": "ref-for-dom-securepaymentconfirmationrequest-rpid\u2461" }, { "id": "ref-for-dom-securepaymentconfirmationrequest-rpid\u2462" }, { "id": "ref-for-dom-securepaymentconfirmationrequest-rpid\u2463" }], "title": "4.8. Steps to check if a payment can be made" }, { "refs": [{ "id": "ref-for-dom-securepaymentconfirmationrequest-rpid\u2464" }], "title": "4.9.1. Information presented to the user" }, { "refs": [{ "id": "ref-for-dom-securepaymentconfirmationrequest-rpid\u2465" }], "title": "4.9.2. Outcome of the transaction confirmation UX" }, { "refs": [{ "id": "ref-for-dom-securepaymentconfirmationrequest-rpid\u2466" }, { "id": "ref-for-dom-securepaymentconfirmationrequest-rpid\u2467" }], "title": "4.10. Steps to respond to a payment request" }], "url": "#dom-securepaymentconfirmationrequest-rpid" },
                "dom-securepaymentconfirmationrequest-showoptout": { "dfnID": "dom-securepaymentconfirmationrequest-showoptout", "dfnText": "showOptOut", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-securepaymentconfirmationrequest-showoptout" }], "title": "4.4. SecurePaymentConfirmationRequest Dictionary" }, { "refs": [{ "id": "ref-for-dom-securepaymentconfirmationrequest-showoptout\u2460" }], "title": "4.9.1. Information presented to the user" }, { "refs": [{ "id": "ref-for-dom-securepaymentconfirmationrequest-showoptout\u2461" }], "title": "4.9.2. Outcome of the transaction confirmation UX" }, { "refs": [{ "id": "ref-for-dom-securepaymentconfirmationrequest-showoptout\u2462" }], "title": "12.6. User opt out" }], "url": "#dom-securepaymentconfirmationrequest-showoptout" },
                "dom-securepaymentconfirmationrequest-timeout": { "dfnID": "dom-securepaymentconfirmationrequest-timeout", "dfnText": "timeout", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-securepaymentconfirmationrequest-timeout" }], "title": "4.4. SecurePaymentConfirmationRequest Dictionary" }, { "refs": [{ "id": "ref-for-dom-securepaymentconfirmationrequest-timeout\u2460" }], "title": "4.10. Steps to respond to a payment request" }], "url": "#dom-securepaymentconfirmationrequest-timeout" },
                "e4d7113a": { "dfnID": "e4d7113a", "dfnText": "credential ID", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-credential-id" }, { "id": "ref-for-credential-id\u2460" }], "title": "2. Terminology" }, { "refs": [{ "id": "ref-for-credential-id\u2461" }], "title": "6. Browser Bound Key Store" }, { "refs": [{ "id": "ref-for-credential-id\u2462" }], "title": "6.2. Binding a key pair" }, { "refs": [{ "id": "ref-for-credential-id\u2463" }], "title": "6.3. Retrieving a key pair" }], "url": "https://w3c.github.io/webauthn/#credential-id" },
                "e97a9688": { "dfnID": "e97a9688", "dfnText": "unsigned long", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-idl-unsigned-long" }], "title": "4.4. SecurePaymentConfirmationRequest Dictionary" }], "url": "https://webidl.spec.whatwg.org/#idl-unsigned-long" },
                "e99bd18e": { "dfnID": "e99bd18e", "dfnText": "relevant global object", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-relevant-global" }, { "id": "ref-for-concept-relevant-global\u2460" }], "title": "4.3. Modification of user activation requirement" }], "url": "https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" },
                "ec878a66": { "dfnID": "ec878a66", "dfnText": "RangeError", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-exceptiondef-rangeerror" }], "title": "4.2. Modification of Payment Request constructor" }, { "refs": [{ "id": "ref-for-exceptiondef-rangeerror\u2460" }, { "id": "ref-for-exceptiondef-rangeerror\u2461" }], "title": "4.7. Steps to validate payment method data" }], "url": "https://webidl.spec.whatwg.org/#exceptiondef-rangeerror" },
                "efc13bf5": { "dfnID": "efc13bf5", "dfnText": "write(buffer, options)", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-filesystemsyncaccesshandle-write" }], "title": "6.2. Binding a key pair" }], "url": "https://fs.spec.whatwg.org/#dom-filesystemsyncaccesshandle-write" },
                "enumdef-securepaymentconfirmationavailability": { "dfnID": "enumdef-securepaymentconfirmationavailability", "dfnText": "SecurePaymentConfirmationAvailability", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-enumdef-securepaymentconfirmationavailability" }, { "id": "ref-for-enumdef-securepaymentconfirmationavailability\u2460" }], "title": "4.6. Checking if Secure Payment Confirmation is available" }], "url": "#enumdef-securepaymentconfirmationavailability" },
                "f0892962": { "dfnID": "f0892962", "dfnText": "pubKeyCredParams", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-publickeycredentialcreationoptions-pubkeycredparams" }, { "id": "ref-for-dom-publickeycredentialcreationoptions-pubkeycredparams\u2460" }], "title": "5. WebAuthn Extension - \"payment\"" }], "url": "https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialcreationoptions-pubkeycredparams" },
                "f7e154e1": { "dfnID": "f7e154e1", "dfnText": "src", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-imageresource-src" }, { "id": "ref-for-dom-imageresource-src\u2460" }], "title": "4.8. Steps to check if a payment can be made" }], "url": "https://www.w3.org/TR/image-resource/#dom-imageresource-src" },
                "f9f8e868": { "dfnID": "f9f8e868", "dfnText": "preferred", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-residentkeyrequirement-preferred" }], "title": "5. WebAuthn Extension - \"payment\"" }], "url": "https://www.w3.org/TR/webauthn-3/#dom-residentkeyrequirement-preferred" },
                "fe1cbc76": { "dfnID": "fe1cbc76", "dfnText": "public key credential", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-public-key-credential" }, { "id": "ref-for-public-key-credential\u2460" }], "title": "2. Terminology" }, { "refs": [{ "id": "ref-for-public-key-credential\u2461" }], "title": "12.1. Probing for credential ids" }], "url": "https://w3c.github.io/webauthn/#public-key-credential" },
                "fe4adbb9": { "dfnID": "fe4adbb9", "dfnText": "request a credential", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-abstract-opdef-request-a-credential" }, { "id": "ref-for-abstract-opdef-request-a-credential\u2460" }], "title": "4.10. Steps to respond to a payment request" }], "url": "https://w3c.github.io/webappsec-credential-management/#abstract-opdef-request-a-credential" },
                "fedc36f2": { "dfnID": "fedc36f2", "dfnText": "[[Create]](origin, options, sameOriginWithAncestors)", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-publickeycredential-create-slot" }], "title": "8. Permissions Policy integration" }], "url": "https://www.w3.org/TR/webauthn-3/#dom-publickeycredential-create-slot" },
                "generate-a-browser-bound-signature": { "dfnID": "generate-a-browser-bound-signature", "dfnText": "generate a browser bound signature", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-generate-a-browser-bound-signature" }, { "id": "ref-for-generate-a-browser-bound-signature\u2460" }], "title": "5. WebAuthn Extension - \"payment\"" }], "url": "#generate-a-browser-bound-signature" },
                "get-a-browser-bound-public-key": { "dfnID": "get-a-browser-bound-public-key", "dfnText": "get a browser bound public key", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-get-a-browser-bound-public-key" }, { "id": "ref-for-get-a-browser-bound-public-key\u2460" }], "title": "5. WebAuthn Extension - \"payment\"" }], "url": "#get-a-browser-bound-public-key" },
                "get-or-create-a-browser-bound-key": { "dfnID": "get-or-create-a-browser-bound-key", "dfnText": "get or create a browser bound key", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-get-or-create-a-browser-bound-key" }], "title": "5. WebAuthn Extension - \"payment\"" }, { "refs": [{ "id": "ref-for-get-or-create-a-browser-bound-key\u2460" }], "title": "6.1. Creating a key pair" }], "url": "#get-or-create-a-browser-bound-key" },
                "key-pair": { "dfnID": "key-pair", "dfnText": "Key Pair", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-key-pair" }], "title": "1.1.3. Cryptographic evidence of device binding" }, { "refs": [{ "id": "ref-for-key-pair\u2460" }], "title": "2. Terminology" }, { "refs": [{ "id": "ref-for-key-pair\u2461" }], "title": "6. Browser Bound Key Store" }, { "refs": [{ "id": "ref-for-key-pair\u2462" }, { "id": "ref-for-key-pair\u2463" }, { "id": "ref-for-key-pair\u2464" }], "title": "6.1. Creating a key pair" }, { "refs": [{ "id": "ref-for-key-pair\u2465" }], "title": "6.3. Retrieving a key pair" }], "url": "#key-pair" },
                "key-pair-private-key": { "dfnID": "key-pair-private-key", "dfnText": "private key", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-key-pair-private-key" }, { "id": "ref-for-key-pair-private-key\u2460" }], "title": "2. Terminology" }, { "refs": [{ "id": "ref-for-key-pair-private-key\u2461" }, { "id": "ref-for-key-pair-private-key\u2462" }, { "id": "ref-for-key-pair-private-key\u2463" }], "title": "6.5. Signing client data" }], "url": "#key-pair-private-key" },
                "key-pair-public-key": { "dfnID": "key-pair-public-key", "dfnText": "public\nkey", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-key-pair-public-key" }, { "id": "ref-for-key-pair-public-key\u2460" }], "title": "2. Terminology" }, { "refs": [{ "id": "ref-for-key-pair-public-key\u2461" }], "title": "5. WebAuthn Extension - \"payment\"" }, { "refs": [{ "id": "ref-for-key-pair-public-key\u2462" }, { "id": "ref-for-key-pair-public-key\u2463" }], "title": "6.4. Getting the browser bound public key" }], "url": "#key-pair-public-key" },
                "keypair_map": { "dfnID": "keypair_map", "dfnText": "keypair_map", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-keypair_map" }], "title": "6. Browser Bound Key Store" }, { "refs": [{ "id": "ref-for-keypair_map\u2460" }], "title": "6.1. Creating a key pair" }, { "refs": [{ "id": "ref-for-keypair_map\u2461" }], "title": "6.3. Retrieving a key pair" }], "url": "#keypair_map" },
                "secure-payment-confirmation": { "dfnID": "secure-payment-confirmation", "dfnText": "secure-payment-confirmation", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-secure-payment-confirmation" }], "title": "4.1. Registration in [payment-method-id]" }, { "refs": [{ "id": "ref-for-secure-payment-confirmation\u2460" }], "title": "4.2. Modification of Payment Request constructor" }, { "refs": [{ "id": "ref-for-secure-payment-confirmation\u2461" }, { "id": "ref-for-secure-payment-confirmation\u2462" }], "title": "5. WebAuthn Extension - \"payment\"" }], "url": "#secure-payment-confirmation" },
                "secure-payment-confirmation-payment-handler": { "dfnID": "secure-payment-confirmation-payment-handler", "dfnText": "Secure Payment Confirmation payment\nhandler", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-secure-payment-confirmation-payment-handler" }], "title": "4. Authentication - the Secure Payment Confirmation payment method" }, { "refs": [{ "id": "ref-for-secure-payment-confirmation-payment-handler\u2460" }], "title": "4.9. Displaying a transaction confirmation UX" }, { "refs": [{ "id": "ref-for-secure-payment-confirmation-payment-handler\u2461" }], "title": "9.1. Verifying an Authentication Assertion" }], "url": "#secure-payment-confirmation-payment-handler" },
                "set-spc-transaction-mode": { "dfnID": "set-spc-transaction-mode", "dfnText": "Set SPC Transaction Mode", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-set-spc-transaction-mode" }], "title": "10.1. Set SPC Transaction Mode" }], "url": "#set-spc-transaction-mode" },
                "spc-credential": { "dfnID": "spc-credential", "dfnText": "SPC Credential", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-spc-credential" }, { "id": "ref-for-spc-credential\u2460" }], "title": "2. Terminology" }, { "refs": [{ "id": "ref-for-spc-credential\u2461" }], "title": "4.6. Checking if Secure Payment Confirmation is available" }, { "refs": [{ "id": "ref-for-spc-credential\u2462" }, { "id": "ref-for-spc-credential\u2463" }], "title": "4.9.2. Outcome of the transaction confirmation UX" }, { "refs": [{ "id": "ref-for-spc-credential\u2464" }], "title": "4.9.3. Test automation support" }, { "refs": [{ "id": "ref-for-spc-credential\u2465" }], "title": "6. Browser Bound Key Store" }, { "refs": [{ "id": "ref-for-spc-credential\u2466" }], "title": "11.3. Attacker generated Browser Bound Key" }, { "refs": [{ "id": "ref-for-spc-credential\u2467" }, { "id": "ref-for-spc-credential\u2468" }], "title": "12.1. Probing for credential ids" }, { "refs": [{ "id": "ref-for-spc-credential\u2460\u24ea" }], "title": "12.4. Browser Bound Key as a tracking vector" }], "url": "#spc-credential" },
                "steps-to-silently-determine-if-a-credential-is-available-for-the-current-device": { "dfnID": "steps-to-silently-determine-if-a-credential-is-available-for-the-current-device", "dfnText": "Steps to silently determine if a credential is available for the current device", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-steps-to-silently-determine-if-a-credential-is-available-for-the-current-device" }], "title": "4.8. Steps to check if a payment can be made" }], "url": "#steps-to-silently-determine-if-a-credential-is-available-for-the-current-device" },
                "steps-to-silently-determine-if-an-spc-credential-is-third-party-enabled": { "dfnID": "steps-to-silently-determine-if-an-spc-credential-is-third-party-enabled", "dfnText": "Steps to silently determine if an SPC Credential is third-party enabled", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-steps-to-silently-determine-if-an-spc-credential-is-third-party-enabled" }], "title": "4.8. Steps to check if a payment can be made" }], "url": "#steps-to-silently-determine-if-an-spc-credential-is-third-party-enabled" },
                "third-party-enabled-spc-credential": { "dfnID": "third-party-enabled-spc-credential", "dfnText": "Third-party enabled SPC Credential", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-third-party-enabled-spc-credential" }], "title": "2. Terminology" }], "url": "#third-party-enabled-spc-credential" },
            };

            document.addEventListener("DOMContentLoaded", () => {
                genAllDfnPanels();

                document.body.addEventListener("click", (e) => {
                    // If not handled already, just hide all dfn panels.
                    hideAllDfnPanels();
                });
            });

            window.addEventListener("resize", () => {
                // Pin any visible dfn panel
                queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(el => positionDfnPanel(el));
            });

            function genAllDfnPanels() {
                for (const panelData of Object.values(dfnPanelData)) {
                    const dfnID = panelData.dfnID;
                    const dfn = document.getElementById(dfnID);
                    if (!dfn) {
                        console.log(`Can't find dfn#${dfnID}.`, panelData);
                        continue;
                    }
                    dfn.panelData = panelData;
                    insertDfnPopupAction(dfn);
                }
            }

            function genDfnPanel(dfn, { dfnID, url, dfnText, refSections, external }) {
                const dfnPanel = mk.aside({
                    class: "dfn-panel on",
                    id: `infopanel-for-${dfnID}`,
                    "data-for": dfnID,
                    "aria-labelled-by": `infopaneltitle-for-${dfnID}`,
                },
                    mk.span({ id: `infopaneltitle-for-${dfnID}`, style: "display:none" },
                        `Info about the '${dfnText}' ${external ? "external" : ""} reference.`),
                    mk.a({ href: url, class: "dfn-link" }, url),
                    refSections.length == 0 ? [] :
                        mk.b({}, "Referenced in:"),
                    mk.ul({},
                        ...refSections.map(section =>
                            mk.li({},
                                ...section.refs.map((ref, refI) =>
                                    [
                                        mk.a({ href: `#${ref.id}` },
                                            (refI == 0) ? section.title : `(${refI + 1})`
                                        ),
                                        " ",
                                    ]
                                ),
                            ),
                        ),
                    ),
                    genLinkingSyntaxes(dfn),
                );

                dfnPanel.addEventListener('click', (event) => {
                    if (event.target.nodeName == 'A') {
                        scrollToTargetAndHighlight(event);
                        pinDfnPanel(dfnPanel);
                    }
                    event.stopPropagation();
                    refocusOnTarget(event);
                });
                dfnPanel.addEventListener('keydown', (event) => {
                    if (event.keyCode == 27) { // Escape key
                        hideDfnPanel({ dfnPanel });
                        event.stopPropagation();
                        event.preventDefault();
                    }
                });

                dfnPanel.dfn = dfn;
                dfn.dfnPanel = dfnPanel;
                return dfnPanel;
            }



            function hideAllDfnPanels() {
                // Delete the currently-active dfn panel.
                queryAll(".dfn-panel").forEach(dfnPanel => hideDfnPanel({ dfnPanel }));
            }

            function showDfnPanel(dfn) {
                hideAllDfnPanels(); // Only display one at a time.

                dfn.setAttribute("aria-expanded", "true");

                const dfnPanel = genDfnPanel(dfn, dfn.panelData);

                // Give the dfn a unique tabindex, and then
                // give all the tabbable panel bits successive indexes.
                let tabIndex = 100;
                dfn.tabIndex = tabIndex++;
                const tabbable = dfnPanel.querySelectorAll(":is(a, button)");
                for (const el of tabbable) {
                    el.tabIndex = tabIndex++;
                }

                append(document.body, dfnPanel);
                positionDfnPanel(dfnPanel);
            }

            function positionDfnPanel(dfnPanel) {
                const dfn = dfnPanel.dfn;
                const dfnPos = getBounds(dfn);
                dfnPanel.style.top = dfnPos.bottom + "px";
                dfnPanel.style.left = dfnPos.left + "px";

                const panelPos = dfnPanel.getBoundingClientRect();
                const panelMargin = 8;
                const maxRight = document.body.parentNode.clientWidth - panelMargin;
                if (panelPos.right > maxRight) {
                    const overflowAmount = panelPos.right - maxRight;
                    const newLeft = Math.max(panelMargin, dfnPos.left - overflowAmount);
                    dfnPanel.style.left = newLeft + "px";
                }
            }

            function pinDfnPanel(dfnPanel) {
                // Switch it to "activated" state, which pins it.
                dfnPanel.classList.add("activated");
                dfnPanel.style.position = "fixed";
                dfnPanel.style.left = null;
                dfnPanel.style.top = null;
            }

            function hideDfnPanel({ dfn, dfnPanel }) {
                if (!dfnPanel) dfnPanel = dfn.dfnPanel;
                if (!dfn) dfn = dfnPanel.dfn;
                dfn.dfnPanel = undefined;
                dfnPanel.dfn = undefined;
                dfn.setAttribute("aria-expanded", "false");
                dfn.tabIndex = undefined;
                dfnPanel.remove()
            }

            function toggleDfnPanel(dfn) {
                if (dfn.dfnPanel) {
                    hideDfnPanel(dfn);
                } else {
                    showDfnPanel(dfn);
                }
            }

            function insertDfnPopupAction(dfn) {
                dfn.setAttribute('role', 'button');
                dfn.setAttribute('aria-expanded', 'false')
                dfn.tabIndex = 0;
                dfn.classList.add('has-dfn-panel');
                dfn.addEventListener('click', (event) => {
                    toggleDfnPanel(dfn);
                    event.stopPropagation();
                });
                dfn.addEventListener('keypress', (event) => {
                    const kc = event.keyCode;
                    // 32->Space, 13->Enter
                    if (kc == 32 || kc == 13) {
                        toggleDfnPanel(dfn);
                        event.stopPropagation();
                        event.preventDefault();
                    }
                });
            }

            function refocusOnTarget(event) {
                const target = event.target;
                setTimeout(() => {
                    // Refocus on the event.target element.
                    // This is needed after browser scrolls to the destination.
                    target.focus();
                });
            }

            // TODO: shared util
            // Returns the root-level absolute position {left and top} of element.
            function getBounds(el, relativeTo = document.body) {
                const relativeRect = relativeTo.getBoundingClientRect();
                const elRect = el.getBoundingClientRect();
                const top = elRect.top - relativeRect.top;
                const left = elRect.left - relativeRect.left;
                return {
                    top,
                    left,
                    bottom: top + elRect.height,
                    right: left + elRect.width,
                }
            }

            function scrollToTargetAndHighlight(event) {
                let hash = event.target.hash;
                if (hash) {
                    hash = decodeURIComponent(hash.substring(1));
                    const dest = document.getElementById(hash);
                    if (dest) {
                        dest.classList.add('highlighted');
                        setTimeout(() => dest.classList.remove('highlighted'), 1000);
                    }
                }
            }

            // Functions, divided by link type, that wrap an autolink's
            // contents with the appropriate outer syntax.
            // Alternately, a string naming another type they format
            // the same as.
            function needsFor(type) {
                switch (type) {
                    case "descriptor":
                    case "value":
                    case "element-attr":
                    case "attr-value":
                    case "element-state":
                    case "method":
                    case "constructor":
                    case "argument":
                    case "attribute":
                    case "const":
                    case "dict-member":
                    case "event":
                    case "enum-value":
                    case "stringifier":
                    case "serializer":
                    case "iterator":
                    case "maplike":
                    case "setlike":
                    case "state":
                    case "mode":
                    case "context":
                    case "facet": return true;

                    default: return false;
                }
            }
            function refusesFor(type) {
                switch (type) {
                    case "property":
                    case "element":
                    case "interface":
                    case "namespace":
                    case "callback":
                    case "dictionary":
                    case "enum":
                    case "exception":
                    case "typedef":
                    case "http-header":
                    case "permission": return true;

                    default: return false;
                }
            }
            function linkFormatterFromType(type) {
                switch (type) {
                    case 'scheme':
                    case 'permission':
                    case 'dfn': return (text) => `[=${text}=]`;

                    case 'abstract-op': return (text) => `[\$${text}\$]`;

                    case 'function':
                    case 'at-rule':
                    case 'selector':
                    case 'value': return (text) => `''${text}''`;

                    case 'http-header': return (text) => `[:${text}:]`;

                    case 'interface':
                    case 'constructor':
                    case 'method':
                    case 'argument':
                    case 'attribute':
                    case 'callback':
                    case 'dictionary':
                    case 'dict-member':
                    case 'enum':
                    case 'enum-value':
                    case 'exception':
                    case 'const':
                    case 'typedef':
                    case 'stringifier':
                    case 'serializer':
                    case 'iterator':
                    case 'maplike':
                    case 'setlike':
                    case 'extended-attribute':
                    case 'event':
                    case 'idl': return (text) => `{{${text}}}`;

                    case 'element-state':
                    case 'element-attr':
                    case 'attr-value':
                    case 'element': return (element) => `<{${element}}>`;

                    case 'grammar': return (text) => `${text} (within a <pre class=prod>)`;

                    case 'type': return (text) => `<<${text}>>`;

                    case 'descriptor':
                    case 'property': return (text) => `'${text}'`;

                    default: return;
                };
            };

            function genLinkingSyntaxes(dfn) {
                if (dfn.tagName != "DFN") return;

                const type = dfn.getAttribute('data-dfn-type');
                if (!type) {
                    console.log(`<dfn> doesn't have a data-dfn-type:`, dfn);
                    return [];
                }

                // Return a function that wraps link text based on the type
                const linkFormatter = linkFormatterFromType(type);
                if (!linkFormatter) {
                    console.log(`<dfn> has an unknown data-dfn-type:`, dfn);
                    return [];
                }

                let ltAlts;
                if (dfn.hasAttribute('data-lt')) {
                    ltAlts = dfn.getAttribute('data-lt')
                        .split("|")
                        .map(x => x.trim());
                } else {
                    ltAlts = [dfn.textContent.trim()];
                }
                if (type == "type") {
                    // lt of "<foo>", but "foo" is the interior;
                    // <<foo/bar>> is how you write it with a for,
                    // not <foo/<bar>> or whatever.
                    for (var i = 0; i < ltAlts.length; i++) {
                        const lt = ltAlts[i];
                        const match = /<(.*)>/.exec(lt);
                        if (match) { ltAlts[i] = match[1]; }
                    }
                }

                let forAlts;
                if (dfn.hasAttribute('data-dfn-for')) {
                    forAlts = dfn.getAttribute('data-dfn-for')
                        .split(",")
                        .map(x => x.trim());
                } else {
                    forAlts = [''];
                }

                let linkingSyntaxes = [];
                if (!needsFor(type)) {
                    for (const lt of ltAlts) {
                        linkingSyntaxes.push(linkFormatter(lt));
                    }
                }
                if (!refusesFor(type)) {
                    for (const f of forAlts) {
                        linkingSyntaxes.push(linkFormatter(`${f}/${ltAlts[0]}`))
                    }
                }
                return [
                    mk.b({}, 'Possible linking syntaxes:'),
                    mk.ul({},
                        ...linkingSyntaxes.map(link => {
                            const copyLink = async () =>
                                await navigator.clipboard.writeText(link);
                            return mk.li({},
                                mk.div({ class: 'link-item' },
                                    mk.button({
                                        class: 'copy-icon', title: 'Copy',
                                        type: 'button',
                                        _onclick: copyLink,
                                        tabindex: 0,
                                    }, mk.span({ class: 'icon' })),
                                    mk.span({}, link)
                                )
                            );
                        })
                    )
                ];
            }
        }
    </script>
    <script>/* Boilerplate: script-ref-hints */
        "use strict";
        {
            let refsData = {
                "#bind-a-key-pair": { "displayText": "bind a key pair", "export": true, "for_": [], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "bind a key pair", "type": "dfn", "url": "#bind-a-key-pair" },
                "#browser-bound-key": { "displayText": "browser bound key", "export": true, "for_": [], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "browser bound key", "type": "dfn", "url": "#browser-bound-key" },
                "#browser-bound-key-store": { "displayText": "browser bound key store", "export": true, "for_": [], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "browser bound key store", "type": "dfn", "url": "#browser-bound-key-store" },
                "#browser_bound_map": { "displayText": "browser_bound_map", "export": true, "for_": [], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "browser_bound_map", "type": "dfn", "url": "#browser_bound_map" },
                "#create-a-key-pair": { "displayText": "create a key pair", "export": true, "for_": [], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "create a key pair", "type": "dfn", "url": "#create-a-key-pair" },
                "#current-transaction-automation-mode": { "displayText": "current transaction automation mode", "export": true, "for_": [], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "current transaction automation mode", "type": "dfn", "url": "#current-transaction-automation-mode" },
                "#dictdef-authenticationextensionspaymentinputs": { "displayText": "AuthenticationExtensionsPaymentInputs", "export": true, "for_": [], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "AuthenticationExtensionsPaymentInputs", "type": "dictionary", "url": "#dictdef-authenticationextensionspaymentinputs" },
                "#dictdef-authenticationextensionspaymentoutputs": { "displayText": "AuthenticationExtensionsPaymentOutputs", "export": true, "for_": [], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "AuthenticationExtensionsPaymentOutputs", "type": "dictionary", "url": "#dictdef-authenticationextensionspaymentoutputs" },
                "#dictdef-browserboundsignature": { "displayText": "BrowserBoundSignature", "export": true, "for_": [], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "BrowserBoundSignature", "type": "dictionary", "url": "#dictdef-browserboundsignature" },
                "#dictdef-collectedclientadditionalpaymentdata": { "displayText": "CollectedClientAdditionalPaymentData", "export": true, "for_": [], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "CollectedClientAdditionalPaymentData", "type": "dictionary", "url": "#dictdef-collectedclientadditionalpaymentdata" },
                "#dictdef-collectedclientadditionalpaymentregistrationdata": { "displayText": "CollectedClientAdditionalPaymentRegistrationData", "export": true, "for_": [], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "CollectedClientAdditionalPaymentRegistrationData", "type": "dictionary", "url": "#dictdef-collectedclientadditionalpaymentregistrationdata" },
                "#dictdef-collectedclientpaymentdata": { "displayText": "CollectedClientPaymentData", "export": true, "for_": [], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "CollectedClientPaymentData", "type": "dictionary", "url": "#dictdef-collectedclientpaymentdata" },
                "#dictdef-paymentcredentialinstrument": { "displayText": "PaymentCredentialInstrument", "export": true, "for_": [], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "PaymentCredentialInstrument", "type": "dictionary", "url": "#dictdef-paymentcredentialinstrument" },
                "#dictdef-paymententitylogo": { "displayText": "PaymentEntityLogo", "export": true, "for_": [], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "PaymentEntityLogo", "type": "dictionary", "url": "#dictdef-paymententitylogo" },
                "#dictdef-securepaymentconfirmationrequest": { "displayText": "SecurePaymentConfirmationRequest", "export": true, "for_": [], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "SecurePaymentConfirmationRequest", "type": "dictionary", "url": "#dictdef-securepaymentconfirmationrequest" },
                "#dom-authenticationextensionsclientinputs-payment": { "displayText": "payment", "export": true, "for_": ["AuthenticationExtensionsClientInputs"], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "payment", "type": "dict-member", "url": "#dom-authenticationextensionsclientinputs-payment" },
                "#dom-authenticationextensionspaymentinputs-browserboundpubkeycredparams": { "displayText": "browserBoundPubKeyCredParams", "export": true, "for_": ["AuthenticationExtensionsPaymentInputs"], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "browserBoundPubKeyCredParams", "type": "dict-member", "url": "#dom-authenticationextensionspaymentinputs-browserboundpubkeycredparams" },
                "#dom-authenticationextensionspaymentinputs-instrument": { "displayText": "instrument", "export": true, "for_": ["AuthenticationExtensionsPaymentInputs"], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "instrument", "type": "dict-member", "url": "#dom-authenticationextensionspaymentinputs-instrument" },
                "#dom-authenticationextensionspaymentinputs-ispayment": { "displayText": "isPayment", "export": true, "for_": ["AuthenticationExtensionsPaymentInputs"], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "isPayment", "type": "dict-member", "url": "#dom-authenticationextensionspaymentinputs-ispayment" },
                "#dom-authenticationextensionspaymentinputs-payeename": { "displayText": "payeeName", "export": true, "for_": ["AuthenticationExtensionsPaymentInputs"], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "payeeName", "type": "dict-member", "url": "#dom-authenticationextensionspaymentinputs-payeename" },
                "#dom-authenticationextensionspaymentinputs-payeeorigin": { "displayText": "payeeOrigin", "export": true, "for_": ["AuthenticationExtensionsPaymentInputs"], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "payeeOrigin", "type": "dict-member", "url": "#dom-authenticationextensionspaymentinputs-payeeorigin" },
                "#dom-authenticationextensionspaymentinputs-paymententitieslogos": { "displayText": "paymentEntitiesLogos", "export": true, "for_": ["AuthenticationExtensionsPaymentInputs"], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "paymentEntitiesLogos", "type": "dict-member", "url": "#dom-authenticationextensionspaymentinputs-paymententitieslogos" },
                "#dom-authenticationextensionspaymentinputs-rpid": { "displayText": "rpId", "export": true, "for_": ["AuthenticationExtensionsPaymentInputs"], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "rpId", "type": "dict-member", "url": "#dom-authenticationextensionspaymentinputs-rpid" },
                "#dom-authenticationextensionspaymentinputs-toporigin": { "displayText": "topOrigin", "export": true, "for_": ["AuthenticationExtensionsPaymentInputs"], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "topOrigin", "type": "dict-member", "url": "#dom-authenticationextensionspaymentinputs-toporigin" },
                "#dom-authenticationextensionspaymentinputs-total": { "displayText": "total", "export": true, "for_": ["AuthenticationExtensionsPaymentInputs"], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "total", "type": "dict-member", "url": "#dom-authenticationextensionspaymentinputs-total" },
                "#dom-authenticationextensionspaymentoutputs-browserboundsignature": { "displayText": "browserBoundSignature", "export": true, "for_": ["AuthenticationExtensionsPaymentOutputs"], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "browserBoundSignature", "type": "dict-member", "url": "#dom-authenticationextensionspaymentoutputs-browserboundsignature" },
                "#dom-browserboundsignature-signature": { "displayText": "signature", "export": true, "for_": ["BrowserBoundSignature"], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "signature", "type": "dict-member", "url": "#dom-browserboundsignature-signature" },
                "#dom-collectedclientadditionalpaymentdata-browserboundpublickey": { "displayText": "browserBoundPublicKey", "export": true, "for_": ["CollectedClientAdditionalPaymentData"], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "browserBoundPublicKey", "type": "dict-member", "url": "#dom-collectedclientadditionalpaymentdata-browserboundpublickey" },
                "#dom-collectedclientadditionalpaymentdata-instrument": { "displayText": "instrument", "export": true, "for_": ["CollectedClientAdditionalPaymentData"], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "instrument", "type": "dict-member", "url": "#dom-collectedclientadditionalpaymentdata-instrument" },
                "#dom-collectedclientadditionalpaymentdata-payeename": { "displayText": "payeeName", "export": true, "for_": ["CollectedClientAdditionalPaymentData"], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "payeeName", "type": "dict-member", "url": "#dom-collectedclientadditionalpaymentdata-payeename" },
                "#dom-collectedclientadditionalpaymentdata-payeeorigin": { "displayText": "payeeOrigin", "export": true, "for_": ["CollectedClientAdditionalPaymentData"], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "payeeOrigin", "type": "dict-member", "url": "#dom-collectedclientadditionalpaymentdata-payeeorigin" },
                "#dom-collectedclientadditionalpaymentdata-paymententitieslogos": { "displayText": "paymentEntitiesLogos", "export": true, "for_": ["CollectedClientAdditionalPaymentData"], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "paymentEntitiesLogos", "type": "dict-member", "url": "#dom-collectedclientadditionalpaymentdata-paymententitieslogos" },
                "#dom-collectedclientadditionalpaymentdata-rpid": { "displayText": "rpId", "export": true, "for_": ["CollectedClientAdditionalPaymentData"], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "rpId", "type": "dict-member", "url": "#dom-collectedclientadditionalpaymentdata-rpid" },
                "#dom-collectedclientadditionalpaymentdata-toporigin": { "displayText": "topOrigin", "export": true, "for_": ["CollectedClientAdditionalPaymentData"], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "topOrigin", "type": "dict-member", "url": "#dom-collectedclientadditionalpaymentdata-toporigin" },
                "#dom-collectedclientadditionalpaymentdata-total": { "displayText": "total", "export": true, "for_": ["CollectedClientAdditionalPaymentData"], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "total", "type": "dict-member", "url": "#dom-collectedclientadditionalpaymentdata-total" },
                "#dom-collectedclientadditionalpaymentregistrationdata-browserboundpublickey": { "displayText": "browserBoundPublicKey", "export": true, "for_": ["CollectedClientAdditionalPaymentRegistrationData"], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "browserBoundPublicKey", "type": "dict-member", "url": "#dom-collectedclientadditionalpaymentregistrationdata-browserboundpublickey" },
                "#dom-collectedclientpaymentdata-payment": { "displayText": "payment", "export": true, "for_": ["CollectedClientPaymentData"], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "payment", "type": "dict-member", "url": "#dom-collectedclientpaymentdata-payment" },
                "#dom-paymentcredentialinstrument-details": { "displayText": "details", "export": true, "for_": ["PaymentCredentialInstrument"], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "details", "type": "dict-member", "url": "#dom-paymentcredentialinstrument-details" },
                "#dom-paymentcredentialinstrument-displayname": { "displayText": "displayName", "export": true, "for_": ["PaymentCredentialInstrument"], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "displayName", "type": "dict-member", "url": "#dom-paymentcredentialinstrument-displayname" },
                "#dom-paymentcredentialinstrument-icon": { "displayText": "icon", "export": true, "for_": ["PaymentCredentialInstrument"], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "icon", "type": "dict-member", "url": "#dom-paymentcredentialinstrument-icon" },
                "#dom-paymentcredentialinstrument-iconmustbeshown": { "displayText": "iconMustBeShown", "export": true, "for_": ["PaymentCredentialInstrument"], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "iconMustBeShown", "type": "dict-member", "url": "#dom-paymentcredentialinstrument-iconmustbeshown" },
                "#dom-paymententitylogo-label": { "displayText": "label", "export": true, "for_": ["PaymentEntityLogo"], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "label", "type": "dict-member", "url": "#dom-paymententitylogo-label" },
                "#dom-paymententitylogo-url": { "displayText": "url", "export": true, "for_": ["PaymentEntityLogo"], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "url", "type": "dict-member", "url": "#dom-paymententitylogo-url" },
                "#dom-paymentrequest-securepaymentconfirmationavailability": { "displayText": "securePaymentConfirmationAvailability()", "export": true, "for_": ["PaymentRequest"], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "securePaymentConfirmationAvailability()", "type": "method", "url": "#dom-paymentrequest-securepaymentconfirmationavailability" },
                "#dom-securepaymentconfirmationavailability-available": { "displayText": "\"available\"", "export": true, "for_": ["SecurePaymentConfirmationAvailability"], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "\"available\"", "type": "enum-value", "url": "#dom-securepaymentconfirmationavailability-available" },
                "#dom-securepaymentconfirmationavailability-unavailable-feature-not-enabled": { "displayText": "\"unavailable-feature-not-enabled\"", "export": true, "for_": ["SecurePaymentConfirmationAvailability"], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "\"unavailable-feature-not-enabled\"", "type": "enum-value", "url": "#dom-securepaymentconfirmationavailability-unavailable-feature-not-enabled" },
                "#dom-securepaymentconfirmationavailability-unavailable-no-permission-policy": { "displayText": "\"unavailable-no-permission-policy\"", "export": true, "for_": ["SecurePaymentConfirmationAvailability"], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "\"unavailable-no-permission-policy\"", "type": "enum-value", "url": "#dom-securepaymentconfirmationavailability-unavailable-no-permission-policy" },
                "#dom-securepaymentconfirmationavailability-unavailable-no-user-verifying-platform-authenticator": { "displayText": "\"unavailable-no-user-verifying-platform-authenticator\"", "export": true, "for_": ["SecurePaymentConfirmationAvailability"], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "\"unavailable-no-user-verifying-platform-authenticator\"", "type": "enum-value", "url": "#dom-securepaymentconfirmationavailability-unavailable-no-user-verifying-platform-authenticator" },
                "#dom-securepaymentconfirmationavailability-unavailable-unknown-reason": { "displayText": "\"unavailable-unknown-reason\"", "export": true, "for_": ["SecurePaymentConfirmationAvailability"], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "\"unavailable-unknown-reason\"", "type": "enum-value", "url": "#dom-securepaymentconfirmationavailability-unavailable-unknown-reason" },
                "#dom-securepaymentconfirmationrequest-browserboundpubkeycredparams": { "displayText": "browserBoundPubKeyCredParams", "export": true, "for_": ["SecurePaymentConfirmationRequest"], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "browserBoundPubKeyCredParams", "type": "dict-member", "url": "#dom-securepaymentconfirmationrequest-browserboundpubkeycredparams" },
                "#dom-securepaymentconfirmationrequest-challenge": { "displayText": "challenge", "export": true, "for_": ["SecurePaymentConfirmationRequest"], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "challenge", "type": "dict-member", "url": "#dom-securepaymentconfirmationrequest-challenge" },
                "#dom-securepaymentconfirmationrequest-credentialids": { "displayText": "credentialIds", "export": true, "for_": ["SecurePaymentConfirmationRequest"], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "credentialIds", "type": "dict-member", "url": "#dom-securepaymentconfirmationrequest-credentialids" },
                "#dom-securepaymentconfirmationrequest-extensions": { "displayText": "extensions", "export": true, "for_": ["SecurePaymentConfirmationRequest"], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "extensions", "type": "dict-member", "url": "#dom-securepaymentconfirmationrequest-extensions" },
                "#dom-securepaymentconfirmationrequest-instrument": { "displayText": "instrument", "export": true, "for_": ["SecurePaymentConfirmationRequest"], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "instrument", "type": "dict-member", "url": "#dom-securepaymentconfirmationrequest-instrument" },
                "#dom-securepaymentconfirmationrequest-locale": { "displayText": "locale", "export": true, "for_": ["SecurePaymentConfirmationRequest"], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "locale", "type": "dict-member", "url": "#dom-securepaymentconfirmationrequest-locale" },
                "#dom-securepaymentconfirmationrequest-payeename": { "displayText": "payeeName", "export": true, "for_": ["SecurePaymentConfirmationRequest"], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "payeeName", "type": "dict-member", "url": "#dom-securepaymentconfirmationrequest-payeename" },
                "#dom-securepaymentconfirmationrequest-payeeorigin": { "displayText": "payeeOrigin", "export": true, "for_": ["SecurePaymentConfirmationRequest"], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "payeeOrigin", "type": "dict-member", "url": "#dom-securepaymentconfirmationrequest-payeeorigin" },
                "#dom-securepaymentconfirmationrequest-paymententitieslogos": { "displayText": "paymentEntitiesLogos", "export": true, "for_": ["SecurePaymentConfirmationRequest"], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "paymentEntitiesLogos", "type": "dict-member", "url": "#dom-securepaymentconfirmationrequest-paymententitieslogos" },
                "#dom-securepaymentconfirmationrequest-rpid": { "displayText": "rpId", "export": true, "for_": ["SecurePaymentConfirmationRequest"], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "rpId", "type": "dict-member", "url": "#dom-securepaymentconfirmationrequest-rpid" },
                "#dom-securepaymentconfirmationrequest-showoptout": { "displayText": "showOptOut", "export": true, "for_": ["SecurePaymentConfirmationRequest"], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "showOptOut", "type": "dict-member", "url": "#dom-securepaymentconfirmationrequest-showoptout" },
                "#dom-securepaymentconfirmationrequest-timeout": { "displayText": "timeout", "export": true, "for_": ["SecurePaymentConfirmationRequest"], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "timeout", "type": "dict-member", "url": "#dom-securepaymentconfirmationrequest-timeout" },
                "#enumdef-securepaymentconfirmationavailability": { "displayText": "SecurePaymentConfirmationAvailability", "export": true, "for_": [], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "SecurePaymentConfirmationAvailability", "type": "enum", "url": "#enumdef-securepaymentconfirmationavailability" },
                "#generate-a-browser-bound-signature": { "displayText": "generate a browser bound signature", "export": true, "for_": [], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "generate a browser bound signature", "type": "dfn", "url": "#generate-a-browser-bound-signature" },
                "#get-a-browser-bound-public-key": { "displayText": "get a browser bound public key", "export": true, "for_": [], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "get a browser bound public key", "type": "dfn", "url": "#get-a-browser-bound-public-key" },
                "#get-or-create-a-browser-bound-key": { "displayText": "get or create a browser bound key", "export": true, "for_": [], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "get or create a browser bound key", "type": "dfn", "url": "#get-or-create-a-browser-bound-key" },
                "#key-pair": { "displayText": "key pair", "export": true, "for_": [], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "key pair", "type": "dfn", "url": "#key-pair" },
                "#key-pair-private-key": { "displayText": "private key", "export": true, "for_": ["key pair"], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "private key", "type": "dfn", "url": "#key-pair-private-key" },
                "#key-pair-public-key": { "displayText": "public key", "export": true, "for_": ["key pair"], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "public key", "type": "dfn", "url": "#key-pair-public-key" },
                "#keypair_map": { "displayText": "keypair_map", "export": true, "for_": [], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "keypair_map", "type": "dfn", "url": "#keypair_map" },
                "#secure-payment-confirmation": { "displayText": "secure-payment-confirmation", "export": true, "for_": [], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "secure-payment-confirmation", "type": "dfn", "url": "#secure-payment-confirmation" },
                "#secure-payment-confirmation-payment-handler": { "displayText": "secure payment confirmation payment handler", "export": true, "for_": [], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "secure payment confirmation payment handler", "type": "dfn", "url": "#secure-payment-confirmation-payment-handler" },
                "#set-spc-transaction-mode": { "displayText": "set spc transaction mode", "export": true, "for_": [], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "set spc transaction mode", "type": "dfn", "url": "#set-spc-transaction-mode" },
                "#spc-credential": { "displayText": "spc credential", "export": true, "for_": [], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "spc credential", "type": "dfn", "url": "#spc-credential" },
                "#steps-to-silently-determine-if-a-credential-is-available-for-the-current-device": { "displayText": "steps to silently determine if a credential is available for the current device", "export": true, "for_": [], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "steps to silently determine if a credential is available for the current device", "type": "dfn", "url": "#steps-to-silently-determine-if-a-credential-is-available-for-the-current-device" },
                "#steps-to-silently-determine-if-an-spc-credential-is-third-party-enabled": { "displayText": "steps to silently determine if an spc credential is third-party enabled", "export": true, "for_": [], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "steps to silently determine if an spc credential is third-party enabled", "type": "dfn", "url": "#steps-to-silently-determine-if-an-spc-credential-is-third-party-enabled" },
                "#third-party-enabled-spc-credential": { "displayText": "third-party enabled spc credential", "export": true, "for_": [], "level": "", "normative": true, "shortname": "secure-payment-confirmation", "spec": "secure-payment-confirmation", "status": "local", "text": "third-party enabled spc credential", "type": "dfn", "url": "#third-party-enabled-spc-credential" },
                "https://dom.spec.whatwg.org/#document": { "displayText": "Document", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "Document", "type": "interface", "url": "https://dom.spec.whatwg.org/#document" },
                "https://fetch.spec.whatwg.org/#concept-request": { "displayText": "request", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "fetch", "spec": "fetch", "status": "current", "text": "request", "type": "dfn", "url": "https://fetch.spec.whatwg.org/#concept-request" },
                "https://fs.spec.whatwg.org/#dom-filesystemsyncaccesshandle-write": { "displayText": "write(buffer, options)", "export": true, "for_": ["FileSystemSyncAccessHandle"], "level": "1", "normative": true, "shortname": "fs", "spec": "fs", "status": "current", "text": "write(buffer, options)", "type": "method", "url": "https://fs.spec.whatwg.org/#dom-filesystemsyncaccesshandle-write" },
                "https://html.spec.whatwg.org/multipage/browsers.html#ascii-serialisation-of-an-origin": { "displayText": "serialization of an origin", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "serialization of an origin", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/browsers.html#ascii-serialisation-of-an-origin" },
                "https://html.spec.whatwg.org/multipage/browsers.html#concept-origin": { "displayText": "origin", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "origin", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/browsers.html#concept-origin" },
                "https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel": { "displayText": "in parallel", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "in parallel", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" },
                "https://html.spec.whatwg.org/multipage/interaction.html#consume-user-activation": { "displayText": "consume user activation", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "consume user activation", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/interaction.html#consume-user-activation" },
                "https://html.spec.whatwg.org/multipage/interaction.html#transient-activation": { "displayText": "transient activation", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "transient activation", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/interaction.html#transient-activation" },
                "https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-top-level-origin": { "displayText": "top-level origin", "export": true, "for_": ["environment"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "top-level origin", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-top-level-origin" },
                "https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global": { "displayText": "relevant global object", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "relevant global object", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" },
                "https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin": { "displayText": "origin", "export": true, "for_": ["environment settings object"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "origin", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin" },
                "https://html.spec.whatwg.org/multipage/webappapis.html#current-settings-object": { "displayText": "current settings object", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "current settings object", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#current-settings-object" },
                "https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object": { "displayText": "relevant settings object", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "relevant settings object", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object" },
                "https://infra.spec.whatwg.org/#implementation-defined": { "displayText": "implementation-defined", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "implementation-defined", "type": "dfn", "url": "https://infra.spec.whatwg.org/#implementation-defined" },
                "https://infra.spec.whatwg.org/#list": { "displayText": "list", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "list", "type": "dfn", "url": "https://infra.spec.whatwg.org/#list" },
                "https://infra.spec.whatwg.org/#list-append": { "displayText": "append", "export": true, "for_": ["list"], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "append", "type": "dfn", "url": "https://infra.spec.whatwg.org/#list-append" },
                "https://infra.spec.whatwg.org/#list-empty": { "displayText": "empty", "export": true, "for_": ["list", "stack", "queue", "set"], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "empty", "type": "dfn", "url": "https://infra.spec.whatwg.org/#list-empty" },
                "https://infra.spec.whatwg.org/#list-is-empty": { "displayText": "is not empty", "export": true, "for_": ["list", "stack", "queue", "set"], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "is not empty", "type": "dfn", "url": "https://infra.spec.whatwg.org/#list-is-empty" },
                "https://infra.spec.whatwg.org/#list-remove": { "displayText": "remove", "export": true, "for_": ["list", "set"], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "remove", "type": "dfn", "url": "https://infra.spec.whatwg.org/#list-remove" },
                "https://infra.spec.whatwg.org/#list-size": { "displayText": "size", "export": true, "for_": ["list", "stack", "queue", "set"], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "size", "type": "dfn", "url": "https://infra.spec.whatwg.org/#list-size" },
                "https://infra.spec.whatwg.org/#map-exists": { "displayText": "exist", "export": true, "for_": ["map"], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "exist", "type": "dfn", "url": "https://infra.spec.whatwg.org/#map-exists" },
                "https://infra.spec.whatwg.org/#map-set": { "displayText": "set", "export": true, "for_": ["map"], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "set", "type": "dfn", "url": "https://infra.spec.whatwg.org/#map-set" },
                "https://infra.spec.whatwg.org/#struct": { "displayText": "struct", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "struct", "type": "dfn", "url": "https://infra.spec.whatwg.org/#struct" },
                "https://infra.spec.whatwg.org/#tuple": { "displayText": "tuple", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "tuple", "type": "dfn", "url": "https://infra.spec.whatwg.org/#tuple" },
                "https://infra.spec.whatwg.org/#user-agent": { "displayText": "user agent", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "user agent", "type": "dfn", "url": "https://infra.spec.whatwg.org/#user-agent" },
                "https://tc39.github.io/ecma262/#sec-object-internal-methods-and-internal-slots": { "displayText": "internal method", "export": true, "for_": [], "level": "", "normative": true, "shortname": "ecmascript", "spec": "ecmascript", "status": "anchor-block", "text": "internal method", "type": "dfn", "url": "https://tc39.github.io/ecma262/#sec-object-internal-methods-and-internal-slots" },
                "https://url.spec.whatwg.org/#concept-url-origin": { "displayText": "origin", "export": true, "for_": ["url"], "level": "1", "normative": true, "shortname": "url", "spec": "url", "status": "current", "text": "origin", "type": "dfn", "url": "https://url.spec.whatwg.org/#concept-url-origin" },
                "https://url.spec.whatwg.org/#concept-url-parser": { "displayText": "URL parser", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "url", "spec": "url", "status": "current", "text": "url parser", "type": "dfn", "url": "https://url.spec.whatwg.org/#concept-url-parser" },
                "https://url.spec.whatwg.org/#concept-url-scheme": { "displayText": "scheme", "export": true, "for_": ["url"], "level": "1", "normative": true, "shortname": "url", "spec": "url", "status": "current", "text": "scheme", "type": "dfn", "url": "https://url.spec.whatwg.org/#concept-url-scheme" },
                "https://url.spec.whatwg.org/#valid-domain": { "displayText": "valid domain", "export": false, "for_": [], "level": "1", "normative": true, "shortname": "url", "spec": "url", "status": "current", "text": "valid domain", "type": "dfn", "url": "https://url.spec.whatwg.org/#valid-domain" },
                "https://w3c.github.io/payment-method-id/#registry": { "displayText": "registry of standardized payment methods", "export": true, "for_": [], "level": "", "normative": true, "shortname": "payment-method-id", "spec": "payment-method-id", "status": "anchor-block", "text": "registry of standardized payment methods", "type": "dfn", "url": "https://w3c.github.io/payment-method-id/#registry" },
                "https://w3c.github.io/payment-request/#accessibility-considerations": { "displayText": "payment request accessibility considerations", "export": true, "for_": [], "level": "", "normative": true, "shortname": "payment-request", "spec": "payment-request", "status": "anchor-block", "text": "payment request accessibility considerations", "type": "dfn", "url": "https://w3c.github.io/payment-request/#accessibility-considerations" },
                "https://w3c.github.io/payment-request/#dfn-additional-data-type": { "displayText": "payment method additional data type", "export": true, "for_": [], "level": "", "normative": true, "shortname": "payment-request", "spec": "payment-request", "status": "anchor-block", "text": "payment method additional data type", "type": "dfn", "url": "https://w3c.github.io/payment-request/#dfn-additional-data-type" },
                "https://w3c.github.io/payment-request/#dfn-details": { "displayText": "payment request details", "export": true, "for_": [], "level": "", "normative": true, "shortname": "payment-request", "spec": "payment-request", "status": "anchor-block", "text": "payment request details", "type": "dfn", "url": "https://w3c.github.io/payment-request/#dfn-details" },
                "https://w3c.github.io/payment-request/#dfn-payment": { "displayText": "payment permission string", "export": true, "for_": [], "level": "", "normative": true, "shortname": "payment-request", "spec": "payment-request", "status": "anchor-block", "text": "payment permission string", "type": "dfn", "url": "https://w3c.github.io/payment-request/#dfn-payment" },
                "https://w3c.github.io/payment-request/#dfn-payment-method": { "displayText": "payment method", "export": true, "for_": [], "level": "", "normative": true, "shortname": "payment-request", "spec": "payment-request", "status": "anchor-block", "text": "payment method", "type": "dfn", "url": "https://w3c.github.io/payment-request/#dfn-payment-method" },
                "https://w3c.github.io/payment-request/#dfn-steps-to-check-if-a-payment-can-be-made": { "displayText": "steps to check if a payment can be made", "export": true, "for_": [], "level": "", "normative": true, "shortname": "payment-request", "spec": "payment-request", "status": "anchor-block", "text": "steps to check if a payment can be made", "type": "dfn", "url": "https://w3c.github.io/payment-request/#dfn-steps-to-check-if-a-payment-can-be-made" },
                "https://w3c.github.io/payment-request/#dfn-steps-to-respond-to-a-payment-request": { "displayText": "steps to respond to a payment request", "export": true, "for_": [], "level": "", "normative": true, "shortname": "payment-request", "spec": "payment-request", "status": "anchor-block", "text": "steps to respond to a payment request", "type": "dfn", "url": "https://w3c.github.io/payment-request/#dfn-steps-to-respond-to-a-payment-request" },
                "https://w3c.github.io/payment-request/#dfn-steps-to-validate-payment-method-data": { "displayText": "steps to validate payment method data", "export": true, "for_": [], "level": "", "normative": true, "shortname": "payment-request", "spec": "payment-request", "status": "anchor-block", "text": "steps to validate payment method data", "type": "dfn", "url": "https://w3c.github.io/payment-request/#dfn-steps-to-validate-payment-method-data" },
                "https://w3c.github.io/payment-request/#dfn-user-aborts-the-payment-request": { "displayText": "user aborts the payment request algorithm", "export": true, "for_": [], "level": "", "normative": true, "shortname": "payment-request", "spec": "payment-request", "status": "anchor-block", "text": "user aborts the payment request algorithm", "type": "dfn", "url": "https://w3c.github.io/payment-request/#dfn-user-aborts-the-payment-request" },
                "https://w3c.github.io/payment-request/#dfn-user-accepts-the-payment-request-algorithm": { "displayText": "user accepts the payment request algorithm", "export": true, "for_": [], "level": "", "normative": true, "shortname": "payment-request", "spec": "payment-request", "status": "anchor-block", "text": "user accepts the payment request algorithm", "type": "dfn", "url": "https://w3c.github.io/payment-request/#dfn-user-accepts-the-payment-request-algorithm" },
                "https://w3c.github.io/webappsec-credential-management/#abstract-opdef-request-a-credential": { "displayText": "request a credential", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "credential-management", "spec": "credential-management-1", "status": "anchor-block", "text": "request a credential", "type": "dfn", "url": "https://w3c.github.io/webappsec-credential-management/#abstract-opdef-request-a-credential" },
                "https://w3c.github.io/webappsec-credential-management/#credential-type-registry-create-permissions-policy": { "displayText": "Create Permissions Policy", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "credential-management", "spec": "credential-management-1", "status": "anchor-block", "text": "create permissions policy", "type": "dfn", "url": "https://w3c.github.io/webappsec-credential-management/#credential-type-registry-create-permissions-policy" },
                "https://w3c.github.io/webauthn/#CreateCred-async-loop": { "displayText": "create credential async loop", "export": true, "for_": [], "level": "", "normative": true, "shortname": "web-authn", "spec": "web-authn", "status": "anchor-block", "text": "create credential async loop", "type": "dfn", "url": "https://w3c.github.io/webauthn/#CreateCred-async-loop" },
                "https://w3c.github.io/webauthn/#authdata-attestedcredentialdata-credentialpublickey": { "displayText": "credentialPublicKey", "export": true, "for_": [], "level": "", "normative": true, "shortname": "web-authn", "spec": "web-authn", "status": "anchor-block", "text": "credentialpublickey", "type": "dfn", "url": "https://w3c.github.io/webauthn/#authdata-attestedcredentialdata-credentialpublickey" },
                "https://w3c.github.io/webauthn/#authentication-ceremony": { "displayText": "authentication ceremony", "export": true, "for_": [], "level": "", "normative": true, "shortname": "web-authn", "spec": "web-authn", "status": "anchor-block", "text": "authentication ceremony", "type": "dfn", "url": "https://w3c.github.io/webauthn/#authentication-ceremony" },
                "https://w3c.github.io/webauthn/#authentication-extension": { "displayText": "authentication extension", "export": true, "for_": [], "level": "", "normative": true, "shortname": "web-authn", "spec": "web-authn", "status": "anchor-block", "text": "authentication extension", "type": "dfn", "url": "https://w3c.github.io/webauthn/#authentication-extension" },
                "https://w3c.github.io/webauthn/#base64url-encoding": { "displayText": "base64url encoding", "export": true, "for_": [], "level": "", "normative": true, "shortname": "web-authn", "spec": "web-authn", "status": "anchor-block", "text": "base64url encoding", "type": "dfn", "url": "https://w3c.github.io/webauthn/#base64url-encoding" },
                "https://w3c.github.io/webauthn/#client-extension": { "displayText": "client extension", "export": true, "for_": [], "level": "", "normative": true, "shortname": "web-authn", "spec": "web-authn", "status": "anchor-block", "text": "client extension", "type": "dfn", "url": "https://w3c.github.io/webauthn/#client-extension" },
                "https://w3c.github.io/webauthn/#credential-id": { "displayText": "credential ID", "export": true, "for_": [], "level": "", "normative": true, "shortname": "web-authn", "spec": "web-authn", "status": "anchor-block", "text": "credential id", "type": "dfn", "url": "https://w3c.github.io/webauthn/#credential-id" },
                "https://w3c.github.io/webauthn/#discoverable-credential": { "displayText": "discoverable credential", "export": true, "for_": [], "level": "", "normative": true, "shortname": "web-authn", "spec": "web-authn", "status": "anchor-block", "text": "discoverable credential", "type": "dfn", "url": "https://w3c.github.io/webauthn/#discoverable-credential" },
                "https://w3c.github.io/webauthn/#dom-publickeycredentialcreationoptions-user": { "displayText": "user member", "export": true, "for_": [], "level": "", "normative": true, "shortname": "web-authn", "spec": "web-authn", "status": "anchor-block", "text": "user member", "type": "dfn", "url": "https://w3c.github.io/webauthn/#dom-publickeycredentialcreationoptions-user" },
                "https://w3c.github.io/webauthn/#extension-identifier": { "displayText": "extension identifier", "export": true, "for_": [], "level": "", "normative": true, "shortname": "web-authn", "spec": "web-authn", "status": "anchor-block", "text": "extension identifier", "type": "dfn", "url": "https://w3c.github.io/webauthn/#extension-identifier" },
                "https://w3c.github.io/webauthn/#public-key-credential": { "displayText": "public key credential", "export": true, "for_": [], "level": "", "normative": true, "shortname": "web-authn", "spec": "web-authn", "status": "anchor-block", "text": "public key credential", "type": "dfn", "url": "https://w3c.github.io/webauthn/#public-key-credential" },
                "https://w3c.github.io/webauthn/#registration-extension": { "displayText": "registration extension", "export": true, "for_": [], "level": "", "normative": true, "shortname": "web-authn", "spec": "web-authn", "status": "anchor-block", "text": "registration extension", "type": "dfn", "url": "https://w3c.github.io/webauthn/#registration-extension" },
                "https://w3c.github.io/webauthn/#relying-party": { "displayText": "relying party", "export": true, "for_": [], "level": "", "normative": true, "shortname": "web-authn", "spec": "web-authn", "status": "anchor-block", "text": "relying party", "type": "dfn", "url": "https://w3c.github.io/webauthn/#relying-party" },
                "https://w3c.github.io/webauthn/#relying-party-identifier": { "displayText": "relying party identifier", "export": true, "for_": [], "level": "", "normative": true, "shortname": "web-authn", "spec": "web-authn", "status": "anchor-block", "text": "relying party identifier", "type": "dfn", "url": "https://w3c.github.io/webauthn/#relying-party-identifier" },
                "https://w3c.github.io/webauthn/#user-verifying-platform-authenticator": { "displayText": "user-verifying platform authenticator", "export": true, "for_": [], "level": "", "normative": true, "shortname": "web-authn", "spec": "web-authn", "status": "anchor-block", "text": "user-verifying platform authenticator", "type": "dfn", "url": "https://w3c.github.io/webauthn/#user-verifying-platform-authenticator" },
                "https://w3c.github.io/webauthn/#webauthn-extensions": { "displayText": "WebAuthn Extension", "export": true, "for_": [], "level": "", "normative": true, "shortname": "web-authn", "spec": "web-authn", "status": "anchor-block", "text": "webauthn extension", "type": "dfn", "url": "https://w3c.github.io/webauthn/#webauthn-extensions" },
                "https://w3c.github.io/webdriver/#dfn-error": { "displayText": "WebDriver error", "export": true, "for_": [], "level": "", "normative": true, "shortname": "webdriver", "spec": "webdriver", "status": "anchor-block", "text": "webdriver error", "type": "dfn", "url": "https://w3c.github.io/webdriver/#dfn-error" },
                "https://w3c.github.io/webdriver/#dfn-error-code": { "displayText": "WebDriver error code", "export": true, "for_": [], "level": "", "normative": true, "shortname": "webdriver", "spec": "webdriver", "status": "anchor-block", "text": "webdriver error code", "type": "dfn", "url": "https://w3c.github.io/webdriver/#dfn-error-code" },
                "https://w3c.github.io/webdriver/#dfn-extension-commands": { "displayText": "extension command", "export": true, "for_": [], "level": "", "normative": true, "shortname": "webdriver", "spec": "webdriver", "status": "anchor-block", "text": "extension command", "type": "dfn", "url": "https://w3c.github.io/webdriver/#dfn-extension-commands" },
                "https://w3c.github.io/webdriver/#dfn-getting-properties": { "displayText": "getting a property", "export": true, "for_": [], "level": "", "normative": true, "shortname": "webdriver", "spec": "webdriver", "status": "anchor-block", "text": "getting a property", "type": "dfn", "url": "https://w3c.github.io/webdriver/#dfn-getting-properties" },
                "https://w3c.github.io/webdriver/#dfn-invalid-argument": { "displayText": "invalid argument", "export": true, "for_": [], "level": "", "normative": true, "shortname": "webdriver", "spec": "webdriver", "status": "anchor-block", "text": "invalid argument", "type": "dfn", "url": "https://w3c.github.io/webdriver/#dfn-invalid-argument" },
                "https://w3c.github.io/webdriver/#dfn-remote-end-steps": { "displayText": "remote end steps", "export": true, "for_": [], "level": "", "normative": true, "shortname": "webdriver", "spec": "webdriver", "status": "anchor-block", "text": "remote end steps", "type": "dfn", "url": "https://w3c.github.io/webdriver/#dfn-remote-end-steps" },
                "https://w3c.github.io/webdriver/#dfn-success": { "displayText": "success", "export": true, "for_": [], "level": "", "normative": true, "shortname": "webdriver", "spec": "webdriver", "status": "anchor-block", "text": "success", "type": "dfn", "url": "https://w3c.github.io/webdriver/#dfn-success" },
                "https://w3c.github.io/webdriver/#dfn-undefined": { "displayText": "undefined", "export": true, "for_": [], "level": "", "normative": true, "shortname": "webdriver", "spec": "webdriver", "status": "anchor-block", "text": "undefined", "type": "dfn", "url": "https://w3c.github.io/webdriver/#dfn-undefined" },
                "https://webidl.spec.whatwg.org/#BufferSource": { "displayText": "BufferSource", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "BufferSource", "type": "typedef", "url": "https://webidl.spec.whatwg.org/#BufferSource" },
                "https://webidl.spec.whatwg.org/#a-promise-rejected-with": { "displayText": "a promise rejected with", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "a promise rejected with", "type": "dfn", "url": "https://webidl.spec.whatwg.org/#a-promise-rejected-with" },
                "https://webidl.spec.whatwg.org/#aborterror": { "displayText": "AbortError", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "AbortError", "type": "exception", "url": "https://webidl.spec.whatwg.org/#aborterror" },
                "https://webidl.spec.whatwg.org/#exceptiondef-rangeerror": { "displayText": "RangeError", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "RangeError", "type": "exception", "url": "https://webidl.spec.whatwg.org/#exceptiondef-rangeerror" },
                "https://webidl.spec.whatwg.org/#exceptiondef-typeerror": { "displayText": "TypeError", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "TypeError", "type": "exception", "url": "https://webidl.spec.whatwg.org/#exceptiondef-typeerror" },
                "https://webidl.spec.whatwg.org/#idl-ArrayBuffer": { "displayText": "ArrayBuffer", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "ArrayBuffer", "type": "interface", "url": "https://webidl.spec.whatwg.org/#idl-ArrayBuffer" },
                "https://webidl.spec.whatwg.org/#idl-DOMException": { "displayText": "DOMException", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "DOMException", "type": "interface", "url": "https://webidl.spec.whatwg.org/#idl-DOMException" },
                "https://webidl.spec.whatwg.org/#idl-USVString": { "displayText": "USVString", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "USVString", "type": "interface", "url": "https://webidl.spec.whatwg.org/#idl-USVString" },
                "https://webidl.spec.whatwg.org/#idl-boolean": { "displayText": "boolean", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "boolean", "type": "interface", "url": "https://webidl.spec.whatwg.org/#idl-boolean" },
                "https://webidl.spec.whatwg.org/#idl-promise": { "displayText": "Promise", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "Promise", "type": "interface", "url": "https://webidl.spec.whatwg.org/#idl-promise" },
                "https://webidl.spec.whatwg.org/#idl-sequence": { "displayText": "sequence", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "sequence", "type": "dfn", "url": "https://webidl.spec.whatwg.org/#idl-sequence" },
                "https://webidl.spec.whatwg.org/#idl-unsigned-long": { "displayText": "unsigned long", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "unsigned long", "type": "interface", "url": "https://webidl.spec.whatwg.org/#idl-unsigned-long" },
                "https://webidl.spec.whatwg.org/#invalidstateerror": { "displayText": "InvalidStateError", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "InvalidStateError", "type": "exception", "url": "https://webidl.spec.whatwg.org/#invalidstateerror" },
                "https://webidl.spec.whatwg.org/#notallowederror": { "displayText": "NotAllowedError", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "NotAllowedError", "type": "exception", "url": "https://webidl.spec.whatwg.org/#notallowederror" },
                "https://webidl.spec.whatwg.org/#optouterror": { "displayText": "OptOutError", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "OptOutError", "type": "exception", "url": "https://webidl.spec.whatwg.org/#optouterror" },
                "https://webidl.spec.whatwg.org/#quotaexceedederror": { "displayText": "QuotaExceededError", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "QuotaExceededError", "type": "interface", "url": "https://webidl.spec.whatwg.org/#quotaexceedederror" },
                "https://webidl.spec.whatwg.org/#securityerror": { "displayText": "SecurityError", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "SecurityError", "type": "exception", "url": "https://webidl.spec.whatwg.org/#securityerror" },
                "https://webidl.spec.whatwg.org/#unknownerror": { "displayText": "UnknownError", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "UnknownError", "type": "exception", "url": "https://webidl.spec.whatwg.org/#unknownerror" },
                "https://www.w3.org/TR/credential-management-1/#dom-credential-id": { "displayText": "id", "export": true, "for_": ["Credential"], "level": "1", "normative": true, "shortname": "credential-management", "spec": "credential-management-1", "status": "snapshot", "text": "id", "type": "attribute", "url": "https://www.w3.org/TR/credential-management-1/#dom-credential-id" },
                "https://www.w3.org/TR/credential-management-1/#dom-credentialscontainer-create": { "displayText": "create()", "export": true, "for_": ["CredentialsContainer"], "level": "1", "normative": true, "shortname": "credential-management", "spec": "credential-management-1", "status": "snapshot", "text": "create()", "type": "method", "url": "https://www.w3.org/TR/credential-management-1/#dom-credentialscontainer-create" },
                "https://www.w3.org/TR/credential-management-1/#dom-credentialscontainer-get": { "displayText": "get()", "export": true, "for_": ["CredentialsContainer"], "level": "1", "normative": true, "shortname": "credential-management", "spec": "credential-management-1", "status": "snapshot", "text": "get()", "type": "method", "url": "https://www.w3.org/TR/credential-management-1/#dom-credentialscontainer-get" },
                "https://www.w3.org/TR/i18n-glossary/#dfn-bidi-isolation": { "displayText": "bidi isolation", "export": true, "for_": [], "level": "1", "normative": false, "shortname": "i18n-glossary", "spec": "i18n-glossary", "status": "snapshot", "text": "bidi isolation", "type": "dfn", "url": "https://www.w3.org/TR/i18n-glossary/#dfn-bidi-isolation" },
                "https://www.w3.org/TR/i18n-glossary/#dfn-language-negotiation": { "displayText": "language negotiation", "export": true, "for_": [], "level": "1", "normative": false, "shortname": "i18n-glossary", "spec": "i18n-glossary", "status": "snapshot", "text": "language negotiation", "type": "dfn", "url": "https://www.w3.org/TR/i18n-glossary/#dfn-language-negotiation" },
                "https://www.w3.org/TR/i18n-glossary/#dfn-language-priority-list": { "displayText": "language priority list", "export": true, "for_": [], "level": "1", "normative": false, "shortname": "i18n-glossary", "spec": "i18n-glossary", "status": "snapshot", "text": "language priority list", "type": "dfn", "url": "https://www.w3.org/TR/i18n-glossary/#dfn-language-priority-list" },
                "https://www.w3.org/TR/i18n-glossary/#dfn-locale": { "displayText": "locale", "export": true, "for_": [], "level": "", "normative": true, "shortname": "i18n-glossary", "spec": "i18n-glossary", "status": "anchor-block", "text": "locale", "type": "dfn", "url": "https://www.w3.org/TR/i18n-glossary/#dfn-locale" },
                "https://www.w3.org/TR/image-resource/#dfn-fetching-an-image-resource": { "displayText": "fetching an image resource", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "image-resource", "spec": "image-resource", "status": "snapshot", "text": "fetching an image resource", "type": "dfn", "url": "https://www.w3.org/TR/image-resource/#dfn-fetching-an-image-resource" },
                "https://www.w3.org/TR/image-resource/#dom-imageresource-src": { "displayText": "src", "export": true, "for_": ["ImageResource"], "level": "1", "normative": true, "shortname": "image-resource", "spec": "image-resource", "status": "snapshot", "text": "src", "type": "dict-member", "url": "https://www.w3.org/TR/image-resource/#dom-imageresource-src" },
                "https://www.w3.org/TR/payment-method-id/#dfn-standardized-payment-method-identifier": { "displayText": "standardized payment method identifier", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "payment-method-id", "spec": "payment-method-id", "status": "snapshot", "text": "standardized payment method identifier", "type": "dfn", "url": "https://www.w3.org/TR/payment-method-id/#dfn-standardized-payment-method-identifier" },
                "https://www.w3.org/TR/payment-request/#dfn-payment-handler": { "displayText": "payment handler", "export": true, "for_": [], "level": "1", "normative": false, "shortname": "payment-request", "spec": "payment-request", "status": "snapshot", "text": "payment handler", "type": "dfn", "url": "https://www.w3.org/TR/payment-request/#dfn-payment-handler" },
                "https://www.w3.org/TR/payment-request/#dom-paymentcurrencyamount": { "displayText": "PaymentCurrencyAmount", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "payment-request", "spec": "payment-request", "status": "snapshot", "text": "PaymentCurrencyAmount", "type": "dictionary", "url": "https://www.w3.org/TR/payment-request/#dom-paymentcurrencyamount" },
                "https://www.w3.org/TR/payment-request/#dom-paymentcurrencyamount-currency": { "displayText": "currency", "export": true, "for_": ["PaymentCurrencyAmount"], "level": "1", "normative": true, "shortname": "payment-request", "spec": "payment-request", "status": "snapshot", "text": "currency", "type": "dict-member", "url": "https://www.w3.org/TR/payment-request/#dom-paymentcurrencyamount-currency" },
                "https://www.w3.org/TR/payment-request/#dom-paymentcurrencyamount-value": { "displayText": "value", "export": true, "for_": ["PaymentCurrencyAmount"], "level": "1", "normative": true, "shortname": "payment-request", "spec": "payment-request", "status": "snapshot", "text": "value", "type": "dict-member", "url": "https://www.w3.org/TR/payment-request/#dom-paymentcurrencyamount-value" },
                "https://www.w3.org/TR/payment-request/#dom-paymentdetailsinit-total": { "displayText": "total", "export": true, "for_": ["PaymentDetailsInit"], "level": "1", "normative": true, "shortname": "payment-request", "spec": "payment-request", "status": "snapshot", "text": "total", "type": "dict-member", "url": "https://www.w3.org/TR/payment-request/#dom-paymentdetailsinit-total" },
                "https://www.w3.org/TR/payment-request/#dom-paymentrequest": { "displayText": "PaymentRequest", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "payment-request", "spec": "payment-request", "status": "snapshot", "text": "PaymentRequest", "type": "interface", "url": "https://www.w3.org/TR/payment-request/#dom-paymentrequest" },
                "https://www.w3.org/TR/payment-request/#dom-paymentrequest-canmakepayment": { "displayText": "canMakePayment()", "export": true, "for_": ["PaymentRequest"], "level": "1", "normative": true, "shortname": "payment-request", "spec": "payment-request", "status": "snapshot", "text": "canMakePayment()", "type": "method", "url": "https://www.w3.org/TR/payment-request/#dom-paymentrequest-canmakepayment" },
                "https://www.w3.org/TR/payment-request/#dom-paymentrequest-constructor": { "displayText": "constructor()", "export": true, "for_": ["PaymentRequest"], "level": "1", "normative": true, "shortname": "payment-request", "spec": "payment-request", "status": "snapshot", "text": "constructor()", "type": "constructor", "url": "https://www.w3.org/TR/payment-request/#dom-paymentrequest-constructor" },
                "https://www.w3.org/TR/payment-request/#dom-paymentrequest-show": { "displayText": "show()", "export": true, "for_": ["PaymentRequest"], "level": "1", "normative": true, "shortname": "payment-request", "spec": "payment-request", "status": "snapshot", "text": "show()", "type": "method", "url": "https://www.w3.org/TR/payment-request/#dom-paymentrequest-show" },
                "https://www.w3.org/TR/webauthn-3/#dictdef-authenticationextensionsclientinputs": { "displayText": "AuthenticationExtensionsClientInputs", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "webauthn", "spec": "webauthn-3", "status": "snapshot", "text": "AuthenticationExtensionsClientInputs", "type": "dictionary", "url": "https://www.w3.org/TR/webauthn-3/#dictdef-authenticationextensionsclientinputs" },
                "https://www.w3.org/TR/webauthn-3/#dictdef-authenticationextensionsclientoutputs": { "displayText": "AuthenticationExtensionsClientOutputs", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "webauthn", "spec": "webauthn-3", "status": "snapshot", "text": "AuthenticationExtensionsClientOutputs", "type": "dictionary", "url": "https://www.w3.org/TR/webauthn-3/#dictdef-authenticationextensionsclientoutputs" },
                "https://www.w3.org/TR/webauthn-3/#dictdef-collectedclientdata": { "displayText": "CollectedClientData", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "webauthn", "spec": "webauthn-3", "status": "snapshot", "text": "CollectedClientData", "type": "dictionary", "url": "https://www.w3.org/TR/webauthn-3/#dictdef-collectedclientdata" },
                "https://www.w3.org/TR/webauthn-3/#dictdef-publickeycredentialcreationoptions": { "displayText": "PublicKeyCredentialCreationOptions", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "webauthn", "spec": "webauthn-3", "status": "snapshot", "text": "PublicKeyCredentialCreationOptions", "type": "dictionary", "url": "https://www.w3.org/TR/webauthn-3/#dictdef-publickeycredentialcreationoptions" },
                "https://www.w3.org/TR/webauthn-3/#dictdef-publickeycredentialdescriptor": { "displayText": "PublicKeyCredentialDescriptor", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "webauthn", "spec": "webauthn-3", "status": "snapshot", "text": "PublicKeyCredentialDescriptor", "type": "dictionary", "url": "https://www.w3.org/TR/webauthn-3/#dictdef-publickeycredentialdescriptor" },
                "https://www.w3.org/TR/webauthn-3/#dictdef-publickeycredentialparameters": { "displayText": "PublicKeyCredentialParameters", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "webauthn", "spec": "webauthn-3", "status": "snapshot", "text": "PublicKeyCredentialParameters", "type": "dictionary", "url": "https://www.w3.org/TR/webauthn-3/#dictdef-publickeycredentialparameters" },
                "https://www.w3.org/TR/webauthn-3/#dictdef-publickeycredentialrequestoptions": { "displayText": "PublicKeyCredentialRequestOptions", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "webauthn", "spec": "webauthn-3", "status": "snapshot", "text": "PublicKeyCredentialRequestOptions", "type": "dictionary", "url": "https://www.w3.org/TR/webauthn-3/#dictdef-publickeycredentialrequestoptions" },
                "https://www.w3.org/TR/webauthn-3/#dom-authenticatorattachment-platform": { "displayText": "platform", "export": true, "for_": ["AuthenticatorAttachment"], "level": "3", "normative": true, "shortname": "webauthn", "spec": "webauthn-3", "status": "snapshot", "text": "platform", "type": "enum-value", "url": "https://www.w3.org/TR/webauthn-3/#dom-authenticatorattachment-platform" },
                "https://www.w3.org/TR/webauthn-3/#dom-authenticatorselectioncriteria-authenticatorattachment": { "displayText": "authenticatorAttachment", "export": true, "for_": ["AuthenticatorSelectionCriteria"], "level": "3", "normative": true, "shortname": "webauthn", "spec": "webauthn-3", "status": "snapshot", "text": "authenticatorAttachment", "type": "dict-member", "url": "https://www.w3.org/TR/webauthn-3/#dom-authenticatorselectioncriteria-authenticatorattachment" },
                "https://www.w3.org/TR/webauthn-3/#dom-authenticatorselectioncriteria-residentkey": { "displayText": "residentKey", "export": true, "for_": ["AuthenticatorSelectionCriteria"], "level": "3", "normative": true, "shortname": "webauthn", "spec": "webauthn-3", "status": "snapshot", "text": "residentKey", "type": "dict-member", "url": "https://www.w3.org/TR/webauthn-3/#dom-authenticatorselectioncriteria-residentkey" },
                "https://www.w3.org/TR/webauthn-3/#dom-authenticatorselectioncriteria-userverification": { "displayText": "userVerification", "export": true, "for_": ["AuthenticatorSelectionCriteria"], "level": "3", "normative": true, "shortname": "webauthn", "spec": "webauthn-3", "status": "snapshot", "text": "userVerification", "type": "dict-member", "url": "https://www.w3.org/TR/webauthn-3/#dom-authenticatorselectioncriteria-userverification" },
                "https://www.w3.org/TR/webauthn-3/#dom-authenticatortransport-internal": { "displayText": "internal", "export": true, "for_": ["AuthenticatorTransport"], "level": "3", "normative": true, "shortname": "webauthn", "spec": "webauthn-3", "status": "snapshot", "text": "internal", "type": "enum-value", "url": "https://www.w3.org/TR/webauthn-3/#dom-authenticatortransport-internal" },
                "https://www.w3.org/TR/webauthn-3/#dom-collectedclientdata-challenge": { "displayText": "challenge", "export": true, "for_": ["CollectedClientData"], "level": "3", "normative": true, "shortname": "webauthn", "spec": "webauthn-3", "status": "snapshot", "text": "challenge", "type": "dict-member", "url": "https://www.w3.org/TR/webauthn-3/#dom-collectedclientdata-challenge" },
                "https://www.w3.org/TR/webauthn-3/#dom-collectedclientdata-origin": { "displayText": "origin", "export": true, "for_": ["CollectedClientData"], "level": "3", "normative": true, "shortname": "webauthn", "spec": "webauthn-3", "status": "snapshot", "text": "origin", "type": "dict-member", "url": "https://www.w3.org/TR/webauthn-3/#dom-collectedclientdata-origin" },
                "https://www.w3.org/TR/webauthn-3/#dom-collectedclientdata-type": { "displayText": "type", "export": true, "for_": ["CollectedClientData"], "level": "3", "normative": true, "shortname": "webauthn", "spec": "webauthn-3", "status": "snapshot", "text": "type", "type": "dict-member", "url": "https://www.w3.org/TR/webauthn-3/#dom-collectedclientdata-type" },
                "https://www.w3.org/TR/webauthn-3/#dom-credentialrequestoptions-publickey": { "displayText": "publicKey", "export": true, "for_": ["CredentialRequestOptions"], "level": "3", "normative": true, "shortname": "webauthn", "spec": "webauthn-3", "status": "snapshot", "text": "publicKey", "type": "dict-member", "url": "https://www.w3.org/TR/webauthn-3/#dom-credentialrequestoptions-publickey" },
                "https://www.w3.org/TR/webauthn-3/#dom-publickeycredential-clientextensionsresults-slot": { "displayText": "[[clientExtensionsResults]]", "export": true, "for_": ["PublicKeyCredential"], "level": "3", "normative": true, "shortname": "webauthn", "spec": "webauthn-3", "status": "snapshot", "text": "[[clientExtensionsResults]]", "type": "attribute", "url": "https://www.w3.org/TR/webauthn-3/#dom-publickeycredential-clientextensionsresults-slot" },
                "https://www.w3.org/TR/webauthn-3/#dom-publickeycredential-create-slot": { "displayText": "[[Create]](origin, options, sameOriginWithAncestors)", "export": true, "for_": ["PublicKeyCredential"], "level": "3", "normative": true, "shortname": "webauthn", "spec": "webauthn-3", "status": "snapshot", "text": "[[Create]](origin, options, sameOriginWithAncestors)", "type": "method", "url": "https://www.w3.org/TR/webauthn-3/#dom-publickeycredential-create-slot" },
                "https://www.w3.org/TR/webauthn-3/#dom-publickeycredential-discoverfromexternalsource-slot": { "displayText": "[[DiscoverFromExternalSource]](origin, options, sameOriginWithAncestors)", "export": true, "for_": ["PublicKeyCredential"], "level": "3", "normative": true, "shortname": "webauthn", "spec": "webauthn-3", "status": "snapshot", "text": "[[DiscoverFromExternalSource]](origin, options, sameOriginWithAncestors)", "type": "method", "url": "https://www.w3.org/TR/webauthn-3/#dom-publickeycredential-discoverfromexternalsource-slot" },
                "https://www.w3.org/TR/webauthn-3/#dom-publickeycredential-identifier-slot": { "displayText": "[[identifier]]", "export": true, "for_": ["PublicKeyCredential"], "level": "3", "normative": true, "shortname": "webauthn", "spec": "webauthn-3", "status": "snapshot", "text": "[[identifier]]", "type": "attribute", "url": "https://www.w3.org/TR/webauthn-3/#dom-publickeycredential-identifier-slot" },
                "https://www.w3.org/TR/webauthn-3/#dom-publickeycredential-isuserverifyingplatformauthenticatoravailable": { "displayText": "isUserVerifyingPlatformAuthenticatorAvailable()", "export": true, "for_": ["PublicKeyCredential"], "level": "3", "normative": true, "shortname": "webauthn", "spec": "webauthn-3", "status": "snapshot", "text": "isUserVerifyingPlatformAuthenticatorAvailable()", "type": "method", "url": "https://www.w3.org/TR/webauthn-3/#dom-publickeycredential-isuserverifyingplatformauthenticatoravailable" },
                "https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialcreationoptions-authenticatorselection": { "displayText": "authenticatorSelection", "export": true, "for_": ["PublicKeyCredentialCreationOptions"], "level": "3", "normative": true, "shortname": "webauthn", "spec": "webauthn-3", "status": "snapshot", "text": "authenticatorSelection", "type": "dict-member", "url": "https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialcreationoptions-authenticatorselection" },
                "https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialcreationoptions-pubkeycredparams": { "displayText": "pubKeyCredParams", "export": true, "for_": ["PublicKeyCredentialCreationOptions"], "level": "3", "normative": true, "shortname": "webauthn", "spec": "webauthn-3", "status": "snapshot", "text": "pubKeyCredParams", "type": "dict-member", "url": "https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialcreationoptions-pubkeycredparams" },
                "https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialdescriptor-id": { "displayText": "id", "export": true, "for_": ["PublicKeyCredentialDescriptor"], "level": "3", "normative": true, "shortname": "webauthn", "spec": "webauthn-3", "status": "snapshot", "text": "id", "type": "dict-member", "url": "https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialdescriptor-id" },
                "https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialdescriptor-transports": { "displayText": "transports", "export": true, "for_": ["PublicKeyCredentialDescriptor"], "level": "3", "normative": true, "shortname": "webauthn", "spec": "webauthn-3", "status": "snapshot", "text": "transports", "type": "dict-member", "url": "https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialdescriptor-transports" },
                "https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialdescriptor-type": { "displayText": "type", "export": true, "for_": ["PublicKeyCredentialDescriptor"], "level": "3", "normative": true, "shortname": "webauthn", "spec": "webauthn-3", "status": "snapshot", "text": "type", "type": "dict-member", "url": "https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialdescriptor-type" },
                "https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialentity-name": { "displayText": "name", "export": true, "for_": ["PublicKeyCredentialEntity"], "level": "3", "normative": true, "shortname": "webauthn", "spec": "webauthn-3", "status": "snapshot", "text": "name", "type": "dict-member", "url": "https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialentity-name" },
                "https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialparameters-alg": { "displayText": "alg", "export": true, "for_": ["PublicKeyCredentialParameters"], "level": "3", "normative": true, "shortname": "webauthn", "spec": "webauthn-3", "status": "snapshot", "text": "alg", "type": "dict-member", "url": "https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialparameters-alg" },
                "https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialparameters-type": { "displayText": "type", "export": true, "for_": ["PublicKeyCredentialParameters"], "level": "3", "normative": true, "shortname": "webauthn", "spec": "webauthn-3", "status": "snapshot", "text": "type", "type": "dict-member", "url": "https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialparameters-type" },
                "https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialrequestoptions-allowcredentials": { "displayText": "allowCredentials", "export": true, "for_": ["PublicKeyCredentialRequestOptions"], "level": "3", "normative": true, "shortname": "webauthn", "spec": "webauthn-3", "status": "snapshot", "text": "allowCredentials", "type": "dict-member", "url": "https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialrequestoptions-allowcredentials" },
                "https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialrequestoptions-challenge": { "displayText": "challenge", "export": true, "for_": ["PublicKeyCredentialRequestOptions"], "level": "3", "normative": true, "shortname": "webauthn", "spec": "webauthn-3", "status": "snapshot", "text": "challenge", "type": "dict-member", "url": "https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialrequestoptions-challenge" },
                "https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialrequestoptions-extensions": { "displayText": "extensions", "export": true, "for_": ["PublicKeyCredentialRequestOptions"], "level": "3", "normative": true, "shortname": "webauthn", "spec": "webauthn-3", "status": "snapshot", "text": "extensions", "type": "dict-member", "url": "https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialrequestoptions-extensions" },
                "https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialrequestoptions-rpid": { "displayText": "rpId", "export": true, "for_": ["PublicKeyCredentialRequestOptions"], "level": "3", "normative": true, "shortname": "webauthn", "spec": "webauthn-3", "status": "snapshot", "text": "rpId", "type": "dict-member", "url": "https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialrequestoptions-rpid" },
                "https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialrequestoptions-timeout": { "displayText": "timeout", "export": true, "for_": ["PublicKeyCredentialRequestOptions"], "level": "3", "normative": true, "shortname": "webauthn", "spec": "webauthn-3", "status": "snapshot", "text": "timeout", "type": "dict-member", "url": "https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialrequestoptions-timeout" },
                "https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialrequestoptions-userverification": { "displayText": "userVerification", "export": true, "for_": ["PublicKeyCredentialRequestOptions"], "level": "3", "normative": true, "shortname": "webauthn", "spec": "webauthn-3", "status": "snapshot", "text": "userVerification", "type": "dict-member", "url": "https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialrequestoptions-userverification" },
                "https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialtype-public-key": { "displayText": "public-key", "export": true, "for_": ["PublicKeyCredentialType"], "level": "3", "normative": true, "shortname": "webauthn", "spec": "webauthn-3", "status": "snapshot", "text": "public-key", "type": "enum-value", "url": "https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialtype-public-key" },
                "https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialuserentity-displayname": { "displayText": "displayName", "export": true, "for_": ["PublicKeyCredentialUserEntity"], "level": "3", "normative": true, "shortname": "webauthn", "spec": "webauthn-3", "status": "snapshot", "text": "displayName", "type": "dict-member", "url": "https://www.w3.org/TR/webauthn-3/#dom-publickeycredentialuserentity-displayname" },
                "https://www.w3.org/TR/webauthn-3/#dom-residentkeyrequirement-preferred": { "displayText": "preferred", "export": true, "for_": ["ResidentKeyRequirement"], "level": "3", "normative": true, "shortname": "webauthn", "spec": "webauthn-3", "status": "snapshot", "text": "preferred", "type": "enum-value", "url": "https://www.w3.org/TR/webauthn-3/#dom-residentkeyrequirement-preferred" },
                "https://www.w3.org/TR/webauthn-3/#dom-residentkeyrequirement-required": { "displayText": "required", "export": true, "for_": ["ResidentKeyRequirement"], "level": "3", "normative": true, "shortname": "webauthn", "spec": "webauthn-3", "status": "snapshot", "text": "required", "type": "enum-value", "url": "https://www.w3.org/TR/webauthn-3/#dom-residentkeyrequirement-required" },
                "https://www.w3.org/TR/webauthn-3/#dom-userverificationrequirement-required": { "displayText": "required", "export": true, "for_": ["UserVerificationRequirement"], "level": "3", "normative": true, "shortname": "webauthn", "spec": "webauthn-3", "status": "snapshot", "text": "required", "type": "enum-value", "url": "https://www.w3.org/TR/webauthn-3/#dom-userverificationrequirement-required" },
                "https://www.w3.org/TR/webauthn-3/#enumdef-publickeycredentialtype": { "displayText": "PublicKeyCredentialType", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "webauthn", "spec": "webauthn-3", "status": "snapshot", "text": "PublicKeyCredentialType", "type": "enum", "url": "https://www.w3.org/TR/webauthn-3/#enumdef-publickeycredentialtype" },
                "https://www.w3.org/TR/webauthn-3/#publickey-credentials-create-feature": { "displayText": "publickey-credentials-create-feature", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "webauthn", "spec": "webauthn-3", "status": "snapshot", "text": "publickey-credentials-create-feature", "type": "dfn", "url": "https://www.w3.org/TR/webauthn-3/#publickey-credentials-create-feature" },
                "https://www.w3.org/TR/webauthn-3/#publickeycredential": { "displayText": "PublicKeyCredential", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "webauthn", "spec": "webauthn-3", "status": "snapshot", "text": "PublicKeyCredential", "type": "interface", "url": "https://www.w3.org/TR/webauthn-3/#publickeycredential" },
                "https://www.w3.org/TR/webauthn-3/#typedefdef-cosealgorithmidentifier": { "displayText": "COSEAlgorithmIdentifier", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "webauthn", "spec": "webauthn-3", "status": "snapshot", "text": "COSEAlgorithmIdentifier", "type": "typedef", "url": "https://www.w3.org/TR/webauthn-3/#typedefdef-cosealgorithmidentifier" },
                "https://www.w3.org/TR/webcrypto-2/#dfn-Crypto-method-getRandomValues": { "displayText": "getRandomValues()", "export": true, "for_": ["Crypto"], "level": "2", "normative": true, "shortname": "webcrypto", "spec": "webcrypto-2", "status": "snapshot", "text": "getRandomValues()", "type": "method", "url": "https://www.w3.org/TR/webcrypto-2/#dfn-Crypto-method-getRandomValues" },
            };

            function mkRefHint(link, ref) {
                const linkText = link.textContent;
                let dfnTextElements = '';
                if (ref.displayText.toLowerCase() != linkText.toLowerCase()) {
                    // Give the original term if it's being displayed in a different way.
                    // But allow casing differences, they're insignificant.
                    dfnTextElements =
                        mk.li({},
                            mk.b({}, "Term: "),
                            mk.span({}, ref.displayText)
                        );
                }
                const forList = ref.for_;
                let forListElements;
                if (forList.length == 0) {
                    forListElements = [];
                } else if (forList.length == 1) {
                    forListElements = mk.li({},
                        mk.b({}, "For: "),
                        mk.span({}, forList[0]),
                    );
                } else {
                    forListElements = mk.li({},
                        mk.b({}, "For: "),
                        mk.ul({},
                            ...forList.map(forItem =>
                                mk.li({},
                                    mk.span({}, forItem)
                                ),
                            ),
                        ),
                    );
                }
                const url = ref.url;
                const safeUrl = encodeURIComponent(url);
                const hintPanel = mk.aside({
                    class: "ref-hint",
                    id: `ref-hint-for-${safeUrl}`,
                    "data-for": url,
                    "aria-labelled-by": `ref-hint-for-${safeUrl}`,
                },
                    mk.ul({},
                        dfnTextElements,
                        mk.li({},
                            mk.b({}, "URL: "),
                            mk.a({ href: url, class: "ref" }, url),
                        ),
                        mk.li({},
                            mk.b({}, "Type: "),
                            mk.span({}, `${ref.type}`),
                        ),
                        mk.li({},
                            mk.b({}, "Spec: "),
                            mk.span({}, `${ref.spec ? ref.spec : ''}`),
                        ),
                        forListElements
                    ),
                );
                hintPanel.forLink = link;
                setupRefHintEventListeners(link, hintPanel);
                return hintPanel;
            }

            function hideAllRefHints() {
                queryAll(".ref-hint").forEach(el => hideRefHint(el));
            }

            function hideRefHint(refHint) {
                const link = refHint.forLink;
                link.setAttribute("aria-expanded", "false");
                if (refHint.teardownEventListeners) {
                    refHint.teardownEventListeners();
                }
                refHint.remove();
            }

            function showRefHint(link) {
                if (link.classList.contains("dfn-link")) return;
                const url = link.getAttribute("href");
                const refHintKey = link.getAttribute("data-refhint-key");
                let key = url;
                if (refHintKey) {
                    key = refHintKey + "_" + url;
                }
                const ref = refsData[key];
                if (!ref) return;

                hideAllRefHints(); // Only display one at this time.

                const refHint = mkRefHint(link, ref);
                append(document.body, refHint);
                link.setAttribute("aria-expanded", "true");
                positionRefHint(refHint);
            }

            function setupRefHintEventListeners(link, refHint) {
                if (refHint.teardownEventListeners) return;
                // Add event handlers to hide the refHint after the user moves away
                // from both the link and refHint, if not hovering either within one second.
                let timeout = null;
                const startHidingRefHint = (event) => {
                    if (timeout) {
                        clearTimeout(timeout);
                    }
                    timeout = setTimeout(() => {
                        hideRefHint(refHint);
                    }, 1000);
                }
                const resetHidingRefHint = (event) => {
                    if (timeout) clearTimeout(timeout);
                    timeout = null;
                };
                link.addEventListener("mouseleave", startHidingRefHint);
                link.addEventListener("mouseenter", resetHidingRefHint);
                link.addEventListener("blur", startHidingRefHint);
                link.addEventListener("focus", resetHidingRefHint);
                refHint.addEventListener("mouseleave", startHidingRefHint);
                refHint.addEventListener("mouseenter", resetHidingRefHint);
                refHint.addEventListener("blur", startHidingRefHint);
                refHint.addEventListener("focus", resetHidingRefHint);

                refHint.teardownEventListeners = () => {
                    // remove event listeners
                    resetHidingRefHint();
                    link.removeEventListener("mouseleave", startHidingRefHint);
                    link.removeEventListener("mouseenter", resetHidingRefHint);
                    link.removeEventListener("blur", startHidingRefHint);
                    link.removeEventListener("focus", resetHidingRefHint);
                    refHint.removeEventListener("mouseleave", startHidingRefHint);
                    refHint.removeEventListener("mouseenter", resetHidingRefHint);
                    refHint.removeEventListener("blur", startHidingRefHint);
                    refHint.removeEventListener("focus", resetHidingRefHint);
                };
            }

            function positionRefHint(refHint) {
                const link = refHint.forLink;
                const linkPos = getBounds(link);
                refHint.style.top = linkPos.bottom + "px";
                refHint.style.left = linkPos.left + "px";

                const panelPos = refHint.getBoundingClientRect();
                const panelMargin = 8;
                const maxRight = document.body.parentNode.clientWidth - panelMargin;
                if (panelPos.right > maxRight) {
                    const overflowAmount = panelPos.right - maxRight;
                    const newLeft = Math.max(panelMargin, linkPos.left - overflowAmount);
                    refHint.style.left = newLeft + "px";
                }
            }

            // TODO: shared util
            // Returns the root-level absolute position {left and top} of element.
            function getBounds(el, relativeTo = document.body) {
                const relativeRect = relativeTo.getBoundingClientRect();
                const elRect = el.getBoundingClientRect();
                const top = elRect.top - relativeRect.top;
                const left = elRect.left - relativeRect.left;
                return {
                    top,
                    left,
                    bottom: top + elRect.height,
                    right: left + elRect.width,
                }
            }

            function showRefHintListener(e) {
                // If the target isn't in a link (or is a link),
                // just ignore it.
                let link = e.target.closest("a");
                if (!link) return;

                // If the target is in a ref-hint panel
                // (aka a link in the already-open one),
                // also just ignore it.
                if (link.closest(".ref-hint")) return;

                // Otherwise, show the panel for the link.
                showRefHint(link);
            }

            function hideAllHintsListener(e) {
                // If the click is inside a ref-hint panel, ignore it.
                if (e.target.closest(".ref-hint")) return;
                // Otherwise, close all the current panels.
                hideAllRefHints();
            }

            document.addEventListener("DOMContentLoaded", () => {
                document.body.addEventListener("mousedown", showRefHintListener);
                document.body.addEventListener("focus", showRefHintListener);

                document.body.addEventListener("click", hideAllHintsListener);
            });

            window.addEventListener("resize", () => {
                // Hide any open ref hint.
                hideAllRefHints();
            });
        }
    </script>
    <script>/* Boilerplate: script-wpt */
        "use strict";
        {
            let wptData = {
                "paths": ["/secure-payment-confirmation/"],
            };

            document.addEventListener("DOMContentLoaded", async () => {
                if (wptData.paths.length == 0) return;

                const runsUrl = "https://wpt.fyi/api/runs?label=master&label=stable&max-count=1&product=chrome&product=firefox&product=safari&product=edge";
                const runs = await (await fetch(runsUrl)).json();

                let testResults = [];
                for (const pathPrefix of wptData.paths) {
                    const pathResults = await (await fetch("https://wpt.fyi/api/search", {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json",
                        },
                        body: JSON.stringify({
                            "run_ids": runs.map(x => x.id),
                            "query": { "path": pathPrefix },
                        })
                    })).json();
                    testResults = testResults.concat(pathResults.results);
                }

                const browsers = runs.map(x => ({ name: x.browser_name, version: x.browser_version, passes: 0, total: 0 }));
                const resultsFromPath = new Map(testResults.map(result => {
                    const testPath = result.test;
                    const passes = result.legacy_status.map(x => [x.passes, x.total]);
                    return [testPath, passes];
                }));
                const seenTests = new Set();
                document.querySelectorAll(".wpt-name").forEach(nameEl => {
                    const passData = resultsFromPath.get("/" + nameEl.getAttribute("title"));
                    if (!passData) {
                        console.log("Couldn't find test in results:", nameEl);
                        return
                    }
                    const numTests = passData[0][1];
                    if (numTests > 1) {
                        nameEl.insertAdjacentElement("beforeend",
                            mk.small({}, ` (${numTests} tests)`));
                    }
                    if (passData == undefined) return;
                    const resultsEl = mk.span({ "class": "wpt-results" },
                        ...passData.map((p, i) => mk.span(
                            {
                                "title": `${browsers[i].name} ${p[0]}/${p[1]}`,
                                "class": "wpt-result",
                                "style": `background: conic-gradient(forestgreen ${p[0] / p[1] * 360}deg, darkred 0deg);`,
                            })),
                    );
                    nameEl.insertAdjacentElement("afterend", resultsEl);

                    // Only update the summary pass/total count if we haven't seen this
                    // test before, to support authors listing the same test multiple times
                    // in a spec.
                    if (!seenTests.has(nameEl.getAttribute("title"))) {
                        seenTests.add(nameEl.getAttribute("title"));
                        passData.forEach((p, i) => {
                            browsers[i].passes += p[0];
                            browsers[i].total += p[1];
                        });
                    }
                });
                const overview = document.querySelector(".wpt-overview");
                if (overview) {
                    overview.appendChild(mk.ul({}, ...browsers.map(formatWptResult)));
                    document.head.appendChild(mk.style({},
                        `.wpt-overview ul { display: flex; flex-flow: row wrap; gap: .2em; justify-content: start; list-style: none; padding: 0; margin: 0;}
             .wpt-overview li { padding: .25em 1em; color: black; text-align: center; }
             .wpt-overview img { height: 1.5em; height: max(1.5em, 32px); background: transparent; }
             .wpt-overview .browser { font-weight: bold; }
             .wpt-overview .passes-none { background: #e57373; }
             .wpt-overview .passes-hardly { background: #ffb74d; }
             .wpt-overview .passes-a-few { background: #ffd54f; }
             .wpt-overview .passes-half { background: #fff176; }
             .wpt-overview .passes-lots { background: #dce775; }
             .wpt-overview .passes-most { background: #aed581; }
             .wpt-overview .passes-all { background: #81c784; }`));
                }
            });

            function formatWptResult({ name, version, passes, total }) {
                const passRate = passes / total;
                let passClass = "";
                if (passRate == 0) passClass = "passes-none";
                else if (passRate < .2) passClass = "passes-hardly";
                else if (passRate < .4) passClass = "passes-a-few";
                else if (passRate < .6) passClass = "passes-half";
                else if (passRate < .8) passClass = "passes-lots";
                else if (passRate < 1) passClass = "passes-most";
                else passClass = "passes-all";

                name = name[0].toUpperCase() + name.slice(1);
                const shortVersion = /^\d+/.exec(version);
                const icon = []

                if (name == "Chrome") icon.push(mk.img({ alt: "", src: "https://wpt.fyi/static/chrome_64x64.png" }));
                if (name == "Edge") icon.push(mk.img({ alt: "", src: "https://wpt.fyi/static/edge_64x64.png" }));
                if (name == "Safari") icon.push(mk.img({ alt: "", src: "https://wpt.fyi/static/safari_64x64.png" }));
                if (name == "Firefox") icon.push(mk.img({ alt: "", src: "https://wpt.fyi/static/firefox_64x64.png" }));

                return mk.li({ "class": passClass },
                    mk.nobr({ 'class': 'browser' }, ...icon, ` ${name} ${shortVersion}`),
                    mk.br(),
                    mk.nobr({ 'class': 'pass-rate' }, `${passes}/${total}`)
                );
            }
        }
    </script>
    <script src="/dropdown.js"></script>