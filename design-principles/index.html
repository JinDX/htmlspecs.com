<!doctype html>
<html lang="zh-hans">

<head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
    <title>Web平台设计原则</title>
    <meta content="NOTE" name="w3c-status">
    <!-- <meta content="Bikeshed version 3f621ba99, updated Mon Jul 28 15:38:36 2025 -0700" name="generator"> -->
    <link href="https://www.w3.org/TR/design-principles/" rel="canonical">
    <!-- <meta content="993e58e8e371479f5af9bcaa4bcff53d1760e838" name="revision"> -->
    <meta content="dark light" name="color-scheme">
    <style>
        table.data {
            text-align: left;
            font-size: small;
        }
    </style>
    <style>
        /* Boilerplate: style-autolinks */
        .css.css,
        .property.property,
        .descriptor.descriptor {
            color: var(--a-normal-text);
            font-size: inherit;
            font-family: inherit;
        }

        .css::before,
        .property::before,
        .descriptor::before {
            content: "‘";
        }

        .css::after,
        .property::after,
        .descriptor::after {
            content: "’";
        }

        .property,
        .descriptor {
            /* Don't wrap property and descriptor names */
            white-space: nowrap;
        }

        .type {
            /* CSS value <type> */
            font-style: italic;
        }

        pre .property::before,
        pre .property::after {
            content: "";
        }

        [data-link-type="property"]::before,
        [data-link-type="propdesc"]::before,
        [data-link-type="descriptor"]::before,
        [data-link-type="value"]::before,
        [data-link-type="function"]::before,
        [data-link-type="at-rule"]::before,
        [data-link-type="selector"]::before,
        [data-link-type="maybe"]::before {
            content: "‘";
        }

        [data-link-type="property"]::after,
        [data-link-type="propdesc"]::after,
        [data-link-type="descriptor"]::after,
        [data-link-type="value"]::after,
        [data-link-type="function"]::after,
        [data-link-type="at-rule"]::after,
        [data-link-type="selector"]::after,
        [data-link-type="maybe"]::after {
            content: "’";
        }

        [data-link-type].production::before,
        [data-link-type].production::after,
        .prod [data-link-type]::before,
        .prod [data-link-type]::after {
            content: "";
        }

        [data-link-type=element],
        [data-link-type=element-attr] {
            font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
            font-size: .9em;
        }

        [data-link-type=element]::before {
            content: "<"
        }

        [data-link-type=element]::after {
            content: ">"
        }

        [data-link-type=biblio] {
            white-space: pre;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --selflink-text: black;
                --selflink-bg: silver;
                --selflink-hover-text: white;
            }
        }
    </style>
    <style>
        /* Boilerplate: style-colors */
        /* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
        :root {
            color-scheme: light dark;

            --text: black;
            --bg: white;

            --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

            --logo-bg: #1a5e9a;
            --logo-active-bg: #c00;
            --logo-text: white;

            --tocnav-normal-text: #707070;
            --tocnav-normal-bg: var(--bg);
            --tocnav-hover-text: var(--tocnav-normal-text);
            --tocnav-hover-bg: #f8f8f8;
            --tocnav-active-text: #c00;
            --tocnav-active-bg: var(--tocnav-normal-bg);

            --tocsidebar-text: var(--text);
            --tocsidebar-bg: #f7f8f9;
            --tocsidebar-shadow: rgba(0, 0, 0, .1);
            --tocsidebar-heading-text: hsla(203, 20%, 40%, .7);

            --toclink-text: var(--text);
            --toclink-underline: #3980b5;
            --toclink-visited-text: var(--toclink-text);
            --toclink-visited-underline: #054572;

            --heading-text: #005a9c;

            --hr-text: var(--text);

            --algo-border: #def;

            --del-text: red;
            --del-bg: transparent;
            --ins-text: #080;
            --ins-bg: transparent;

            --a-normal-text: #034575;
            --a-normal-underline: #bbb;
            --a-visited-text: var(--a-normal-text);
            --a-visited-underline: #707070;
            --a-hover-bg: rgba(75%, 75%, 75%, .25);
            --a-active-text: #c00;
            --a-active-underline: #c00;

            --blockquote-border: silver;
            --blockquote-bg: transparent;
            --blockquote-text: currentcolor;

            --issue-border: #e05252;
            --issue-bg: #fbe9e9;
            --issue-text: var(--text);
            --issueheading-text: #831616;

            --example-border: #e0cb52;
            --example-bg: #fcfaee;
            --example-text: var(--text);
            --exampleheading-text: #574b0f;

            --note-border: #52e052;
            --note-bg: #e9fbe9;
            --note-text: var(--text);
            --noteheading-text: hsl(120, 70%, 30%);
            --notesummary-underline: silver;

            --assertion-border: #aaa;
            --assertion-bg: #eee;
            --assertion-text: black;

            --advisement-border: orange;
            --advisement-bg: #fec;
            --advisement-text: var(--text);
            --advisementheading-text: #b35f00;

            --warning-border: red;
            --warning-bg: hsla(40, 100%, 50%, 0.95);
            --warning-text: var(--text);

            --amendment-border: #330099;
            --amendment-bg: #F5F0FF;
            --amendment-text: var(--text);
            --amendmentheading-text: #220066;

            --def-border: #8ccbf2;
            --def-bg: #def;
            --def-text: var(--text);
            --defrow-border: #bbd7e9;

            --datacell-border: silver;

            --indexinfo-text: #707070;

            --indextable-hover-text: black;
            --indextable-hover-bg: #f7f8f9;

            --outdatedspec-bg: rgba(0, 0, 0, .5);
            --outdatedspec-text: black;
            --outdated-bg: maroon;
            --outdated-text: white;
            --outdated-shadow: red;

            --editedrec-bg: darkorange;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --text: #ddd;
                --bg: black;

                --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

                --logo-bg: #1a5e9a;
                --logo-active-bg: #c00;
                --logo-text: white;

                --tocnav-normal-text: #999;
                --tocnav-normal-bg: var(--bg);
                --tocnav-hover-text: var(--tocnav-normal-text);
                --tocnav-hover-bg: #080808;
                --tocnav-active-text: #f44;
                --tocnav-active-bg: var(--tocnav-normal-bg);

                --tocsidebar-text: var(--text);
                --tocsidebar-bg: #080808;
                --tocsidebar-shadow: rgba(255, 255, 255, .1);
                --tocsidebar-heading-text: hsla(203, 20%, 40%, .7);

                --toclink-text: var(--text);
                --toclink-underline: #6af;
                --toclink-visited-text: var(--toclink-text);
                --toclink-visited-underline: #054572;

                --heading-text: #8af;

                --hr-text: var(--text);

                --algo-border: #456;

                --del-text: #f44;
                --del-bg: transparent;
                --ins-text: #4a4;
                --ins-bg: transparent;

                --a-normal-text: #6af;
                --a-normal-underline: #555;
                --a-visited-text: var(--a-normal-text);
                --a-visited-underline: var(--a-normal-underline);
                --a-hover-bg: rgba(25%, 25%, 25%, .2);
                --a-active-text: #f44;
                --a-active-underline: var(--a-active-text);

                --borderedblock-bg: rgba(255, 255, 255, .05);

                --blockquote-border: silver;
                --blockquote-bg: var(--borderedblock-bg);
                --blockquote-text: currentcolor;

                --issue-border: #e05252;
                --issue-bg: var(--borderedblock-bg);
                --issue-text: var(--text);
                --issueheading-text: hsl(0deg, 70%, 70%);

                --example-border: hsl(50deg, 90%, 60%);
                --example-bg: var(--borderedblock-bg);
                --example-text: var(--text);
                --exampleheading-text: hsl(50deg, 70%, 70%);

                --note-border: hsl(120deg, 100%, 35%);
                --note-bg: var(--borderedblock-bg);
                --note-text: var(--text);
                --noteheading-text: hsl(120, 70%, 70%);
                --notesummary-underline: silver;

                --assertion-border: #444;
                --assertion-bg: var(--borderedblock-bg);
                --assertion-text: var(--text);

                --advisement-border: orange;
                --advisement-bg: #222218;
                --advisement-text: var(--text);
                --advisementheading-text: #f84;

                --warning-border: red;
                --warning-bg: hsla(40, 100%, 20%, 0.95);
                --warning-text: var(--text);

                --amendment-border: #330099;
                --amendment-bg: #080010;
                --amendment-text: var(--text);
                --amendmentheading-text: #cc00ff;

                --def-border: #8ccbf2;
                --def-bg: #080818;
                --def-text: var(--text);
                --defrow-border: #136;

                --datacell-border: silver;

                --indexinfo-text: #aaa;

                --indextable-hover-text: var(--text);
                --indextable-hover-bg: #181818;

                --outdatedspec-bg: rgba(255, 255, 255, .5);
                --outdatedspec-text: black;
                --outdated-bg: maroon;
                --outdated-text: white;
                --outdated-shadow: red;

                --editedrec-bg: darkorange;
            }

            /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
            img {
                background: white;
            }
        }
    </style>
    <style>
        /* Boilerplate: style-counters */
        body {
            counter-reset: example figure issue;
        }

        .issue {
            counter-increment: issue;
        }

        .issue:not(.no-marker)::before {
            content: "Issue " counter(issue);
        }

        .example {
            counter-increment: example;
        }

        .example:not(.no-marker)::before {
            content: "Example " counter(example);
        }

        .invalid.example:not(.no-marker)::before,
        .illegal.example:not(.no-marker)::before {
            content: "Invalid Example" counter(example);
        }

        figcaption {
            counter-increment: figure;
        }

        figcaption:not(.no-marker)::before {
            content: "Figure " counter(figure) " ";
        }
    </style>
    <style>
        /* Boilerplate: style-dfn-panel */
        :root {
            --dfnpanel-bg: #ddd;
            --dfnpanel-text: var(--text);
            --dfnpanel-target-bg: #ffc;
            --dfnpanel-target-outline: orange;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --dfnpanel-bg: #222;
                --dfnpanel-text: var(--text);
                --dfnpanel-target-bg: #333;
                --dfnpanel-target-outline: silver;
            }
        }

        .dfn-panel {
            position: absolute;
            z-index: 35;
            width: 20em;
            width: 300px;
            height: auto;
            max-height: 500px;
            overflow: auto;
            padding: 0.5em 0.75em;
            font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
            background: var(--dfnpanel-bg);
            color: var(--dfnpanel-text);
            border: outset 0.2em;
            white-space: normal;
            /* in case it's moved into a pre */
        }

        .dfn-panel:not(.on) {
            display: none;
        }

        .dfn-panel * {
            margin: 0;
            padding: 0;
            text-indent: 0;
        }

        .dfn-panel>b {
            display: block;
        }

        .dfn-panel a {
            color: var(--dfnpanel-text);
        }

        .dfn-panel a:not(:hover) {
            text-decoration: none !important;
            border-bottom: none !important;
        }

        .dfn-panel a:focus {
            outline: 5px auto Highlight;
            outline: 5px auto -webkit-focus-ring-color;
        }

        .dfn-panel>b+b {
            margin-top: 0.25em;
        }

        .dfn-panel ul {
            padding: 0 0 0 1em;
            list-style: none;
        }

        .dfn-panel li a {
            max-width: calc(300px - 1.5em - 1em);
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .dfn-panel.activated {
            display: inline-block;
            position: fixed;
            left: 8px;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - 1.5em - .4em - .5em);
            max-height: 30vh;
            transition: left 1s ease-out, bottom 1s ease-out;
        }

        .dfn-panel .link-item:hover {
            text-decoration: underline;
        }

        .dfn-panel .link-item .copy-icon {
            opacity: 0;
        }

        .dfn-panel .link-item:hover .copy-icon,
        .dfn-panel .link-item .copy-icon:focus {
            opacity: 1;
        }

        .dfn-panel .copy-icon {
            display: inline-block;
            margin-right: 0.5em;
            width: 0.85em;
            height: 1em;
            border-radius: 3px;
            background-color: #ccc;
            cursor: pointer;
        }

        .dfn-panel .copy-icon .icon {
            width: 100%;
            height: 100%;
            background-color: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        .dfn-panel .copy-icon .icon::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: 1px solid black;
            background-color: #ccc;
            opacity: 0.25;
            transform: translate(3px, -3px);
        }

        .dfn-panel .copy-icon:active .icon::before {
            opacity: 1;
        }

        .dfn-paneled[role="button"] {
            cursor: help;
        }

        .highlighted {
            animation: target-fade 3s;
        }

        @keyframes target-fade {
            from {
                background-color: var(--dfnpanel-target-bg);
                outline: 5px solid var(--dfnpanel-target-outline);
            }

            to {
                color: var(--a-normal-text);
                background-color: transparent;
                outline: transparent;
            }
        }
    </style>
    <style>
        /* Boilerplate: style-idl-highlighting */
        pre.idl.highlight {
            background: var(--borderedblock-bg, var(--def-bg));
        }
    </style>
    <style>
        /* Boilerplate: style-issues */
        a[href].issue-return {
            float: right;
            float: inline-end;
            color: var(--issueheading-text);
            font-weight: bold;
            text-decoration: none;
        }
    </style>
    <style>
        /* Boilerplate: style-md-lists */
        /* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
        [data-md]> :first-child {
            margin-top: 0;
        }

        [data-md]> :last-child {
            margin-bottom: 0;
        }
    </style>
    <style>
        /* Boilerplate: style-ref-hints */
        :root {
            --ref-hint-bg: #ddd;
            --ref-hint-text: var(--text);
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --ref-hint-bg: #222;
                --ref-hint-text: var(--text);
            }
        }

        .ref-hint {
            display: inline-block;
            position: absolute;
            z-index: 35;
            width: 20em;
            width: 300px;
            height: auto;
            max-height: 500px;
            overflow: auto;
            padding: 0.5em 0.5em;
            font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
            background: var(--ref-hint-bg);
            color: var(--ref-hint-text);
            border: outset 0.2em;
            white-space: normal;
            /* in case it's moved into a pre */
        }

        .ref-hint * {
            margin: 0;
            padding: 0;
            text-indent: 0;
        }

        .ref-hint ul {
            padding: 0 0 0 1em;
            list-style: none;
        }
    </style>
    <style>
        /* Boilerplate: style-selflinks */
        :root {
            --selflink-text: white;
            --selflink-bg: gray;
            --selflink-hover-text: black;
        }

        .heading,
        .issue,
        .note,
        .example,
        li,
        dt {
            position: relative;
        }

        a.self-link {
            position: absolute;
            top: 0;
            left: calc(-1 * (3.5rem - 26px));
            width: calc(3.5rem - 26px);
            height: 2em;
            text-align: center;
            border: none;
            transition: opacity .2s;
            opacity: .5;
        }

        a.self-link:hover {
            opacity: 1;
        }

        .heading>a.self-link {
            font-size: 83%;
        }

        .example>a.self-link,
        .note>a.self-link,
        .issue>a.self-link {
            /* These blocks are overflow:auto, so positioning outside
       doesn't work. */
            left: auto;
            right: 0;
        }

        li>a.self-link {
            left: calc(-1 * (3.5rem - 26px) - 2em);
        }

        dfn>a.self-link {
            top: auto;
            left: auto;
            opacity: 0;
            width: 1.5em;
            height: 1.5em;
            background: var(--selflink-bg);
            color: var(--selflink-text);
            font-style: normal;
            transition: opacity .2s, background-color .2s, color .2s;
        }

        dfn:hover>a.self-link {
            opacity: 1;
        }

        dfn>a.self-link:hover {
            color: var(--selflink-hover-text);
        }

        a.self-link::before {
            content: "¶";
        }

        .heading>a.self-link::before {
            content: "§";
        }

        dfn>a.self-link::before {
            content: "#";
        }
    </style>
    <style>
        /* Boilerplate: style-syntax-highlighting */
        code.highlight {
            padding: .1em;
            border-radius: .3em;
        }

        pre.highlight,
        pre>code.highlight {
            display: block;
            padding: 1em;
            margin: .5em 0;
            overflow: auto;
            border-radius: 0;
        }

        .highlight:not(.idl) {
            background: rgba(0, 0, 0, .03);
        }

        c-[a] {
            color: #990055
        }

        /* Keyword.Declaration */
        c-[b] {
            color: #990055
        }

        /* Keyword.Type */
        c-[c] {
            color: #708090
        }

        /* Comment */
        c-[d] {
            color: #708090
        }

        /* Comment.Multiline */
        c-[e] {
            color: #0077aa
        }

        /* Name.Attribute */
        c-[f] {
            color: #669900
        }

        /* Name.Tag */
        c-[g] {
            color: #222222
        }

        /* Name.Variable */
        c-[k] {
            color: #990055
        }

        /* Keyword */
        c-[l] {
            color: #000000
        }

        /* Literal */
        c-[m] {
            color: #000000
        }

        /* Literal.Number */
        c-[n] {
            color: #0077aa
        }

        /* Name */
        c-[o] {
            color: #999999
        }

        /* Operator */
        c-[p] {
            color: #999999
        }

        /* Punctuation */
        c-[s] {
            color: #a67f59
        }

        /* Literal.String */
        c-[t] {
            color: #a67f59
        }

        /* Literal.String.Single */
        c-[u] {
            color: #a67f59
        }

        /* Literal.String.Double */
        c-[cp] {
            color: #708090
        }

        /* Comment.Preproc */
        c-[c1] {
            color: #708090
        }

        /* Comment.Single */
        c-[cs] {
            color: #708090
        }

        /* Comment.Special */
        c-[kc] {
            color: #990055
        }

        /* Keyword.Constant */
        c-[kn] {
            color: #990055
        }

        /* Keyword.Namespace */
        c-[kp] {
            color: #990055
        }

        /* Keyword.Pseudo */
        c-[kr] {
            color: #990055
        }

        /* Keyword.Reserved */
        c-[ld] {
            color: #000000
        }

        /* Literal.Date */
        c-[nc] {
            color: #0077aa
        }

        /* Name.Class */
        c-[no] {
            color: #0077aa
        }

        /* Name.Constant */
        c-[nd] {
            color: #0077aa
        }

        /* Name.Decorator */
        c-[ni] {
            color: #0077aa
        }

        /* Name.Entity */
        c-[ne] {
            color: #0077aa
        }

        /* Name.Exception */
        c-[nf] {
            color: #0077aa
        }

        /* Name.Function */
        c-[nl] {
            color: #0077aa
        }

        /* Name.Label */
        c-[nn] {
            color: #0077aa
        }

        /* Name.Namespace */
        c-[py] {
            color: #0077aa
        }

        /* Name.Property */
        c-[ow] {
            color: #999999
        }

        /* Operator.Word */
        c-[mb] {
            color: #000000
        }

        /* Literal.Number.Bin */
        c-[mf] {
            color: #000000
        }

        /* Literal.Number.Float */
        c-[mh] {
            color: #000000
        }

        /* Literal.Number.Hex */
        c-[mi] {
            color: #000000
        }

        /* Literal.Number.Integer */
        c-[mo] {
            color: #000000
        }

        /* Literal.Number.Oct */
        c-[sb] {
            color: #a67f59
        }

        /* Literal.String.Backtick */
        c-[sc] {
            color: #a67f59
        }

        /* Literal.String.Char */
        c-[sd] {
            color: #a67f59
        }

        /* Literal.String.Doc */
        c-[se] {
            color: #a67f59
        }

        /* Literal.String.Escape */
        c-[sh] {
            color: #a67f59
        }

        /* Literal.String.Heredoc */
        c-[si] {
            color: #a67f59
        }

        /* Literal.String.Interpol */
        c-[sx] {
            color: #a67f59
        }

        /* Literal.String.Other */
        c-[sr] {
            color: #a67f59
        }

        /* Literal.String.Regex */
        c-[ss] {
            color: #a67f59
        }

        /* Literal.String.Symbol */
        c-[vc] {
            color: #0077aa
        }

        /* Name.Variable.Class */
        c-[vg] {
            color: #0077aa
        }

        /* Name.Variable.Global */
        c-[vi] {
            color: #0077aa
        }

        /* Name.Variable.Instance */
        c-[il] {
            color: #000000
        }

        /* Literal.Number.Integer.Long */

        @media (prefers-color-scheme: dark) {
            .highlight:not(.idl) {
                background: rgba(255, 255, 255, .05);
            }

            c-[a] {
                color: #d33682
            }

            /* Keyword.Declaration */
            c-[b] {
                color: #d33682
            }

            /* Keyword.Type */
            c-[c] {
                color: #2aa198
            }

            /* Comment */
            c-[d] {
                color: #2aa198
            }

            /* Comment.Multiline */
            c-[e] {
                color: #268bd2
            }

            /* Name.Attribute */
            c-[f] {
                color: #b58900
            }

            /* Name.Tag */
            c-[g] {
                color: #cb4b16
            }

            /* Name.Variable */
            c-[k] {
                color: #d33682
            }

            /* Keyword */
            c-[l] {
                color: #657b83
            }

            /* Literal */
            c-[m] {
                color: #657b83
            }

            /* Literal.Number */
            c-[n] {
                color: #268bd2
            }

            /* Name */
            c-[o] {
                color: #657b83
            }

            /* Operator */
            c-[p] {
                color: #657b83
            }

            /* Punctuation */
            c-[s] {
                color: #6c71c4
            }

            /* Literal.String */
            c-[t] {
                color: #6c71c4
            }

            /* Literal.String.Single */
            c-[u] {
                color: #6c71c4
            }

            /* Literal.String.Double */
            c-[ch] {
                color: #2aa198
            }

            /* Comment.Hashbang */
            c-[cp] {
                color: #2aa198
            }

            /* Comment.Preproc */
            c-[cpf] {
                color: #2aa198
            }

            /* Comment.PreprocFile */
            c-[c1] {
                color: #2aa198
            }

            /* Comment.Single */
            c-[cs] {
                color: #2aa198
            }

            /* Comment.Special */
            c-[kc] {
                color: #d33682
            }

            /* Keyword.Constant */
            c-[kn] {
                color: #d33682
            }

            /* Keyword.Namespace */
            c-[kp] {
                color: #d33682
            }

            /* Keyword.Pseudo */
            c-[kr] {
                color: #d33682
            }

            /* Keyword.Reserved */
            c-[ld] {
                color: #657b83
            }

            /* Literal.Date */
            c-[nc] {
                color: #268bd2
            }

            /* Name.Class */
            c-[no] {
                color: #268bd2
            }

            /* Name.Constant */
            c-[nd] {
                color: #268bd2
            }

            /* Name.Decorator */
            c-[ni] {
                color: #268bd2
            }

            /* Name.Entity */
            c-[ne] {
                color: #268bd2
            }

            /* Name.Exception */
            c-[nf] {
                color: #268bd2
            }

            /* Name.Function */
            c-[nl] {
                color: #268bd2
            }

            /* Name.Label */
            c-[nn] {
                color: #268bd2
            }

            /* Name.Namespace */
            c-[py] {
                color: #268bd2
            }

            /* Name.Property */
            c-[ow] {
                color: #657b83
            }

            /* Operator.Word */
            c-[mb] {
                color: #657b83
            }

            /* Literal.Number.Bin */
            c-[mf] {
                color: #657b83
            }

            /* Literal.Number.Float */
            c-[mh] {
                color: #657b83
            }

            /* Literal.Number.Hex */
            c-[mi] {
                color: #657b83
            }

            /* Literal.Number.Integer */
            c-[mo] {
                color: #657b83
            }

            /* Literal.Number.Oct */
            c-[sa] {
                color: #6c71c4
            }

            /* Literal.String.Affix */
            c-[sb] {
                color: #6c71c4
            }

            /* Literal.String.Backtick */
            c-[sc] {
                color: #6c71c4
            }

            /* Literal.String.Char */
            c-[dl] {
                color: #6c71c4
            }

            /* Literal.String.Delimiter */
            c-[sd] {
                color: #6c71c4
            }

            /* Literal.String.Doc */
            c-[se] {
                color: #6c71c4
            }

            /* Literal.String.Escape */
            c-[sh] {
                color: #6c71c4
            }

            /* Literal.String.Heredoc */
            c-[si] {
                color: #6c71c4
            }

            /* Literal.String.Interpol */
            c-[sx] {
                color: #6c71c4
            }

            /* Literal.String.Other */
            c-[sr] {
                color: #6c71c4
            }

            /* Literal.String.Regex */
            c-[ss] {
                color: #6c71c4
            }

            /* Literal.String.Symbol */
            c-[fm] {
                color: #268bd2
            }

            /* Name.Function.Magic */
            c-[vc] {
                color: #cb4b16
            }

            /* Name.Variable.Class */
            c-[vg] {
                color: #cb4b16
            }

            /* Name.Variable.Global */
            c-[vi] {
                color: #cb4b16
            }

            /* Name.Variable.Instance */
            c-[vm] {
                color: #cb4b16
            }

            /* Name.Variable.Magic */
            c-[il] {
                color: #657b83
            }

            /* Literal.Number.Integer.Long */
        }
    </style>
    <link href="https://www.w3.org/StyleSheets/TR/2021/W3C-NOTE" rel="stylesheet">
    <link href="https://www.w3.org/StyleSheets/TR/2021/dark.css" media="(prefers-color-scheme: dark)" rel="stylesheet"
        type="text/css">

<body class="h-entry">
    <div class="head">
        <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/">
                <img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72">
            </a>
        </p>
        <h1 class="p-name no-ref" id="title">Web平台设计原则</h1>
        <p id="w3c-state"><a href="https://www.w3.org/standards/types/#NOTE">W3C小组说明</a>,
            <time class="dt-updated" datetime="2025-10-28">2025年10月28日</time>
        </p>
        <details open>
            <summary>关于本文件的更多信息</summary>
            <div data-fill-with="spec-metadata">
                <dl>
                    <dt>此版本：
                    <dd><a class="u-url"
                            href="https://www.w3.org/TR/2025/NOTE-design-principles-20251028/">https://www.w3.org/TR/2025/NOTE-design-principles-20251028/</a>
                    <dt>最新发布版本：
                    <dd><a href="https://www.w3.org/TR/design-principles/">https://www.w3.org/TR/design-principles/</a>
                    <dt>编辑草案：
                    <dd><a
                            href="https://w3ctag.github.io/design-principles/">https://w3ctag.github.io/design-principles/</a>
                    <dt>先前版本：
                    <dd><a href="https://www.w3.org/TR/2025/NOTE-design-principles-20251022/"
                            rel="prev">https://www.w3.org/TR/2025/NOTE-design-principles-20251022/</a>
                    <dt>历史记录：
                    <dd><a class="u-url"
                            href="https://www.w3.org/standards/history/design-principles/">https://www.w3.org/standards/history/design-principles/</a>
                    <dt>反馈：
                    <dd><a href="https://github.com/w3ctag/design-principles/issues/">GitHub</a>
                    <dt class="editor">编辑：
                    <dd class="editor p-author h-card vcard" data-editor-id="68503"><a class="p-name fn u-url url"
                            href="https://lowentropy.net/">Martin Thomson</a> (<a class="p-org org"
                            href="https://www.mozilla.org/">Mozilla</a>)
                    <dd class="editor p-author h-card vcard" data-editor-id="72192"><span class="p-name fn">Jeffrey
                            Yasskin</span> (<a class="p-org org" href="https://www.google.com/">Google</a>)
                    <dt class="editor">前编辑：
                    <dd class="editor p-author h-card vcard" data-editor-id="52258"><a class="p-name fn u-url url"
                            href="https://lea.verou.me">Lea Verou</a> (<span class="p-org org">特邀专家</span>)
                    <dd class="editor p-author h-card vcard" data-editor-id="42399"><a class="p-name fn u-url url"
                            href="https://sangwhan.com">Sangwhan Moon</a> (<a class="p-org org"
                            href="https://www.google.com/">Google</a>)
                    <dd class="editor p-author h-card vcard"><a class="p-name fn u-url url"
                            href="https://domenic.me/">Domenic Denicola</a> (<a class="p-org org"
                            href="https://www.google.com/">Google</a>) <a class="u-email email"
                            href="mailto:d@domenic.me">d@domenic.me</a>
                    <dd class="editor p-author h-card vcard"><a class="p-name fn u-email email"
                            href="mailto:travil@microsoft.com">Travis Leithead</a> (<span class="p-org org">微软</span>)
                    <dt>作者：
                    <dd><a href="https://www.w3.org/2001/tag/">TAG成员</a>，包括现任与前任
                    <dt>参与方式：
                    <dd><a href="https://github.com/w3ctag/design-principles">GitHub w3ctag/design-principles</a> (<a
                            href="https://github.com/w3ctag/design-principles/issues/new">提交问题</a>; <a
                            href="https://github.com/w3ctag/design-principles/issues?state=open">开放问题</a>)
                </dl>
            </div>
        </details>
        <div data-fill-with="warning"></div>
        <p class="copyright" data-fill-with="copyright"><a href="https://www.w3.org/policies/#copyright">Copyright</a> ©
            2025 <a href="https://www.w3.org/">World Wide Web Consortium</a>. <abbr
                title="World Wide Web Consortium">W3C</abbr><sup>®</sup> <a
                href="https://www.w3.org/policies/#Legal_Disclaimer">liability</a>, <a
                href="https://www.w3.org/policies/#W3C_Trademarks">trademark</a> and <a
                href="https://www.w3.org/copyright/software-license/" rel="license"
                title="W3C Software and Document License">permissive document license</a> rules apply.
        </p>
        <hr title="Separator for header">
    </div>
    <div class="p-summary" data-fill-with="abstract">
        <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">摘要</span></h2>
        <p>本文件包含一组在设计 Web 平台技术时应使用的设计原则。 这些原则是在技术架构小组（Technical Architecture Group）在 <a
                href="https://github.com/w3ctag/design-reviews/">审查</a> 正在制定的规范时的讨论中收集的，并建立在伦理网络原则 <a
                data-link-type="biblio" href="#biblio-ethical-web-principles"
                title="Ethical Web Principles">[ethical-web-principles]</a> 之上。 我们鼓励规范设计者阅读本文件，并在做出设计决策时将其作为参考。</p>
    </div>
    <h2 class="no-num no-toc no-ref heading settled" id="sotd"><span class="content">文档状态</span></h2>
    <div data-fill-with="status">
        <p>
            <em>本节说明本文件在发布时的状态。W3C 当前出版物列表及本技术报告的最新修订可在 <a href="https://www.w3.org/TR/"><abbr title="World Wide Web
    Consortium">W3C</abbr> 标准和草案索引</a>中查阅。</em>
        </p>
        <p>
            本文件由 <a href="https://www.w3.org/groups/other/tag/">技术架构组（TAG）</a>
            以小组说明（Group Note）形式发布。
            小组说明不代表 <abbr title="World Wide Web
    Consortium">W3C</abbr> 或其成员的认可。
        </p>
        <p>
            欢迎对本文件提出反馈和意见。请在本文件的
            <a href="https://github.com/w3ctag/design-principles/issues">GitHub 问题页</a>
            进行反馈，
            <a href="https://github.com/w3ctag/design-principles/">GitHub 仓库</a>中也可查阅。
        </p>
        <p data-deliverer="34270">
            <a href="https://www.w3.org/policies/patent-policy/"><abbr title="World
    Wide Web Consortium">W3C</abbr> 专利政策</a>对此文件不做任何许可要求或承诺。
        </p>
        <p>
            本文件受 <a href="https://www.w3.org/policies/process/20250818/" id="w3c_process_revision">2025年8月18日 W3C
                过程文件</a>管理。
        </p>
    </div>
    <div data-fill-with="at-risk"></div>
    <nav data-fill-with="table-of-contents" id="toc">
        <h2 class="no-num no-toc no-ref" id="contents">目录</h2>
        <ol class="toc" role="directory">
            <li>
                <a href="#basic-principles"><span class="secno">1</span> <span class="content">Web API设计原则</span></a>
                <ol class="toc">
                    <li><a href="#priority-of-constituencies"><span class="secno">1.1</span> <span
                                class="content">以用户需求为先（相关方优先级）</span></a>
                    <li><a href="#safe-to-browse"><span class="secno">1.2</span> <span
                                class="content">访问网页应当安全</span></a>
                    <li><a href="#trusted-ui"><span class="secno">1.3</span> <span
                                class="content">可信用户界面必须值得信赖</span></a>
                    <li>
                        <a href="#user-intent"><span class="secno">1.4</span> <span
                                class="content">以用户意图为导向的设计</span></a>
                        <ol class="toc">
                            <li><a href="#user-decisions"><span class="secno">1.4.1</span> <span
                                        class="content">帮助用户做出良好决策</span></a>
                        </ol>
                    <li><a href="#identity"><span class="secno">1.5</span> <span class="content">在场景中适当使用身份信息</span></a>
                    <li><a href="#devices-platforms"><span class="secno">1.6</span> <span
                                class="content">支持全类型设备与平台（媒体独立性）</span></a>
                    <li><a href="#new-features"><span class="secno">1.7</span> <span class="content">谨慎添加新能力</span></a>
                    <li><a href="#removing-features"><span class="secno">1.8</span> <span
                                class="content">需充分理解现有用法后再移除或更改能力</span></a>
                    <li><a href="#leave-the-web-better"><span class="secno">1.9</span> <span class="content">让 Web
                                比你遇到时更好</span></a>
                    <li><a href="#data-minimization"><span class="secno">1.10</span> <span
                                class="content">最小化用户数据</span></a>
                </ol>
            <li>
                <a href="#api-across-languages"><span class="secno">2</span> <span class="content">跨语言的API设计</span></a>
                <ol class="toc">
                    <li><a href="#simplicity"><span class="secno">2.1</span> <span class="content">优先选择简单方案</span></a>
                    <li><a href="#high-level-low-level"><span class="secno">2.2</span> <span
                                class="content">权衡高层与底层API</span></a>
                    <li><a href="#name-thoughtfully"><span class="secno">2.3</span> <span
                                class="content">慎重命名</span></a>
                    <li><a href="#consistency"><span class="secno">2.4</span> <span class="content">保持一致性</span></a>
                    <li><a href="#specs-include-guidance"><span class="secno">2.5</span> <span
                                class="content">遵循特性规范中的指导</span></a>
                    <li><a href="#feature-detect"><span class="secno">2.6</span> <span
                                class="content">新特性应可检测</span></a>
                    <li><a href="#text-formats"><span class="secno">2.7</span> <span
                                class="content">为人类设计文本格式</span></a>
                    <li><a href="#secure-context"><span class="secno">2.8</span> <span
                                class="content">考虑仅在安全上下文开放新特性</span></a>
                    <li><a href="#do-not-expose-use-of-private-browsing-mode"><span class="secno">2.9</span> <span
                                class="content">不要暴露私密浏览模式的使用</span></a>
                    <li><a href="#private-browsing-mode"><span class="secno">2.10</span> <span
                                class="content">考虑API在隐私浏览模式下的行为</span></a>
                    <li><a href="#do-not-expose-use-of-assistive-tech"><span class="secno">2.11</span> <span
                                class="content">不要暴露辅助技术的使用</span></a>
                    <li><a href="#require-user-activation"><span class="secno">2.12</span> <span
                                class="content">强大API需用户激活</span></a>
                    <li><a href="#support-non-fully-active"><span class="secno">2.13</span> <span
                                class="content">支持非完全激活的 BFCached 文档</span></a>
                    <li><a href="#third-party-tools"><span class="secno">2.14</span> <span
                                class="content">优先考虑可用性而非第三方工具兼容性</span></a>
                    <li><a href="#prefer-composition"><span class="secno">2.15</span> <span
                                class="content">通过组合简单类型构建复杂类型</span></a>
                </ol>
            <li>
                <a href="#html"><span class="secno">3</span> <span class="content">HTML</span></a>
                <ol class="toc">
                    <li><a href="#attribute-reuse"><span class="secno">3.1</span> <span class="content">仅为类似功能复用 HTML
                                属性名</span></a>
                    <li><a href="#html-lists"><span class="secno">3.2</span> <span
                                class="content">短列表用空格分隔属性，长列表用多个元素</span></a>
                    <li><a href="#avoid-html-parser-blocking"><span class="secno">3.3</span> <span
                                class="content">不要阻塞HTML解析器</span></a>
                    <li><a href="#avoid-render-blocking"><span class="secno">3.4</span> <span
                                class="content">避免阻塞渲染的功能</span></a>
                    <li><a href="#html-idl-must-by-synced"><span class="secno">3.5</span> <span
                                class="content">保持属性同步</span></a>
                    <li><a href="#naming-of-url-attributes"><span class="secno">3.6</span> <span
                                class="content">包含URL属性应按主要用途命名</span></a>
                    <li><a href="#html-overloading"><span class="secno">3.7</span> <span class="content">每个 HTML
                                元素只赋予单一用途</span></a>
                </ol>
            <li>
                <a href="#css"><span class="secno">4</span> <span class="content">层叠样式表（CSS）</span></a>
                <ol class="toc">
                    <li><a href="#css-property-separation"><span class="secno">4.1</span> <span
                                class="content">根据层叠需求分离CSS属性</span></a>
                    <li><a href="#css-inherited-or-not"><span class="secno">4.2</span> <span class="content">合理选择 CSS
                                属性是否继承</span></a>
                    <li><a href="#css-computed-value"><span class="secno">4.3</span> <span
                                class="content">根据继承方式选择计算值类型</span></a>
                    <li><a href="#css-naming"><span class="secno">4.4</span> <span class="content">合理命名 CSS
                                属性与值</span></a>
                    <li><a href="#css-content-should-be-visible"><span class="secno">4.5</span> <span
                                class="content">内容默认应可见且可访问</span></a>
                </ol>
            <li>
                <a href="#js"><span class="secno">5</span> <span class="content">JavaScript 语言</span></a>
                <ol class="toc">
                    <li><a href="#js-only"><span class="secno">5.1</span> <span class="content">Web API 使用 JavaScript
                                实现</span></a>
                    <li><a href="#js-rtc"><span class="secno">5.2</span> <span class="content">保持运行至完成语义</span></a>
                    <li><a href="#js-gc"><span class="secno">5.3</span> <span class="content">不暴露垃圾回收机制</span></a>
                </ol>
            <li>
                <a href="#api-surface"><span class="secno">6</span> <span class="content">设计JavaScript API</span></a>
                <ol class="toc">
                    <li><a href="#webidl-dictionaries-interfaces-namespaces"><span class="secno">6.1</span> <span
                                class="content">合理使用 WebIDL 字典、接口和命名空间</span></a>
                    <li><a href="#attributes-like-data"><span class="secno">6.2</span> <span
                                class="content">属性应像数据属性一样工作</span></a>
                    <li><a href="#live-vs-static"><span class="secno">6.3</span> <span
                                class="content">考虑对象应为实时还是静态</span></a>
                    <li><a href="#attributes-vs-methods"><span class="secno">6.4</span> <span
                                class="content">访问器应表现为属性而非方法</span></a>
                    <li><a href="#prefer-dictionaries"><span class="secno">6.5</span> <span
                                class="content">可选与基础参数应用字典传递</span></a>
                    <li><a href="#optional-parameters"><span class="secno">6.6</span> <span
                                class="content">方法参数应尽可能可选</span></a>
                    <li><a href="#naming-optional-parameters"><span class="secno">6.7</span> <span
                                class="content">合理命名可选参数</span></a>
                    <li><a href="#overloading"><span class="secno">6.8</span> <span class="content">合理使用重载</span></a>
                    <li><a href="#constructors"><span class="secno">6.9</span> <span
                                class="content">类应尽量有构造函数</span></a>
                    <li><a href="#synchronous"><span class="secno">6.10</span> <span
                                class="content">在合适场景下保持同步</span></a>
                    <li><a href="#promises"><span class="secno">6.11</span> <span
                                class="content">用Promise设计异步API</span></a>
                    <li><a href="#aborting"><span class="secno">6.12</span> <span class="content">用 AbortSignal 取消异步
                                API/操作</span></a>
                    <li><a href="#string-constants"><span class="secno">6.13</span> <span
                                class="content">常量与枚举用字符串表示</span></a>
                    <li><a href="#async-by-default"><span class="secno">6.14</span> <span
                                class="content">如需同步与异步方法，默认异步，同步为例外</span></a>
                    <li><a href="#uint8array"><span class="secno">6.15</span> <span
                                class="content">字节数组用Uint8Array返回</span></a>
                    <li><a href="#void-functions"><span class="secno">6.16</span> <span class="content">有副作用的函数应返回
                                <code>undefined</code></span></a>
                    <li><a href="#prefer-existing-task-sources"><span class="secno">6.17</span> <span
                                class="content">优先使用已有任务源</span></a>
                </ol>
            <li>
                <a href="#event-design"><span class="secno">7</span> <span class="content">事件设计</span></a>
                <ol class="toc">
                    <li><a href="#one-time-events"><span class="secno">7.1</span> <span class="content">一次性事件用 Promise
                                实现</span></a>
                    <li><a href="#promises-and-reaction"><span class="secno">7.2</span> <span
                                class="content">可取消事件不要用Promise实现</span></a>
                    <li><a href="#promises-and-events"><span class="secno">7.3</span> <span class="content">事件应在相关
                                Promise resolve 前触发</span></a>
                    <li><a href="#dont-invent-event-like"><span class="secno">7.4</span> <span
                                class="content">不要自创事件监听机制</span></a>
                    <li><a href="#always-add-event-handlers"><span class="secno">7.5</span> <span
                                class="content">始终添加事件处理属性</span></a>
                    <li><a href="#events-are-for-notification"><span class="secno">7.6</span> <span
                                class="content">用事件实现通知</span></a>
                    <li><a href="#guard-against-recursion"><span class="secno">7.7</span> <span
                                class="content">防范递归风险</span></a>
                    <li><a href="#state-and-subclassing"><span class="secno">7.8</span> <span class="content">将状态放在
                                <code class="idl"><span>target</span></code> 对象上，而不是 <code
                                    class="idl"><span>Event</span></code></span></a>
                    <li><a href="#events-vs-observers"><span class="secno">7.9</span> <span
                                class="content">合理使用事件和观察者</span></a>
                </ol>
            <li>
                <a href="#types-and-units"><span class="secno">8</span> <span class="content">Web IDL、类型与单位</span></a>
                <ol class="toc">
                    <li><a href="#numeric-types"><span class="secno">8.1</span> <span
                                class="content">合理使用数值类型</span></a>
                    <li><a href="#idl-string-types"><span class="secno">8.2</span> <span
                                class="content">合理表示字符串</span></a>
                    <li><a href="#milliseconds"><span class="secno">8.3</span> <span
                                class="content">时间度量统一用毫秒</span></a>
                    <li><a href="#times-and-dates"><span class="secno">8.4</span> <span
                                class="content">用合适类型表示时间和日期</span></a>
                    <li><a href="#error-types"><span class="secno">8.5</span> <span class="content">错误用 Error 或
                                DOMException 表示</span></a>
                </ol>
            <li>
                <a href="#device-apis"><span class="secno">9</span> <span class="content">封装设备/浏览器能力的 API</span></a>
                <ol class="toc">
                    <li><a href="#device-ids"><span class="secno">9.1</span> <span
                                class="content">不要暴露多余的能力信息</span></a>
                    <li><a href="#device-enumeration"><span class="secno">9.2</span> <span class="content">谨慎开放设备选择与枚举
                                API</span></a>
                    <li><a href="#usecase-oriented-apis"><span class="secno">9.3</span> <span
                                class="content">以用户需求为基础设计，而非底层能力</span></a>
                    <li><a href="#hardware-is-scary"><span class="secno">9.4</span> <span
                                class="content">积极保障安全</span></a>
                    <li><a href="#wrapper-apis"><span class="secno">9.5</span> <span class="content">用 Web 平台原则适配原生
                                API</span></a>
                </ol>
            <li>
                <a href="#other-considerations"><span class="secno">10</span> <span class="content">其他 API
                        设计考量</span></a>
                <ol class="toc">
                    <li><a href="#polyfills"><span class="secno">10.1</span> <span class="content">为新功能支持
                                polyfill</span></a>
                    <li>
                        <a href="#consider-dedicatedworker-support"><span class="secno">10.2</span> <span
                                class="content">API 尽可能支持 dedicated worker</span></a>
                        <ol class="toc">
                            <li><a href="#worker-only"><span class="secno">10.2.1</span> <span class="content">部分 API
                                        仅暴露给 dedicated worker</span></a>
                        </ol>
                    <li><a href="#expose-everywhere"><span class="secno">10.3</span> <span
                                class="content">仅纯计算能力可全局暴露</span></a>
                    <li><a href="#new-data-formats"><span class="secno">10.4</span> <span
                                class="content">规范添加新数据格式</span></a>
                    <li><a href="#extend-manifests"><span class="secno">10.5</span> <span class="content">优先扩展现有
                                manifest 文件而非新建</span></a>
                    <li><a href="#serialization"><span class="secno">10.6</span> <span
                                class="content">序列化时考虑消费者</span></a>
                    <li><a href="#debuggability"><span class="secno">10.7</span> <span
                                class="content">确保功能对开发者友好</span></a>
                    <li><a href="#crypto"><span class="secno">10.8</span> <span
                                class="content">使用最佳加密算法，并预期其不断演进</span></a>
                    <li><a href="#client-hints"><span class="secno">10.9</span> <span
                                class="content">不要通过客户端提示暴露新信息</span></a>
                </ol>
            <li>
                <a href="#spec-writing"><span class="secno">11</span> <span class="content">编写高质量规范</span></a>
                <ol class="toc">
                    <li><a href="#requirements-on-authors-and-implementers"><span class="secno">11.1</span> <span
                                class="content">明确规范要求的目标读者</span></a>
                    <li>
                        <a href="#avoid-ambiguity"><span class="secno">11.2</span> <span
                                class="content">规范要完整、避免歧义</span></a>
                        <ol class="toc">
                            <li><a href="#algorithms"><span class="secno">11.2.1</span> <span
                                        class="content">算法需定义清楚</span></a>
                            <li><a href="#use-flags-for-states"><span class="secno">11.2.2</span> <span
                                        class="content">用显式标志表示状态</span></a>
                        </ol>
                    <li><a href="#implementability"><span class="secno">11.3</span> <span
                                class="content">兼顾互操作性与可实现性</span></a>
                    <li>
                        <a href="#monkey-patching"><span class="secno">11.4</span> <span class="content">避免 monkey
                                patching</span></a>
                        <ol class="toc">
                            <li><a href="#cant-avoid-monkey-patching"><span class="secno">11.4.1</span> <span
                                        class="content">如必须monkey patch该怎么做</span></a>
                        </ol>
                </ol>
            <li>
                <a href="#naming-is-hard"><span class="secno">12</span> <span class="content">命名原则</span></a>
                <ol class="toc">
                    <li><a href="#naming-common-words"><span class="secno">12.1</span> <span
                                class="content">用常用词命名</span></a>
                    <li><a href="#naming-charset"><span class="secno">12.2</span> <span
                                class="content">用ASCII字符命名</span></a>
                    <li><a href="#naming-consultation"><span class="secno">12.3</span> <span
                                class="content">命名要广泛征询意见</span></a>
                    <li><a href="#naming-future-proofing"><span class="secno">12.4</span> <span
                                class="content">用描述用途的名字</span></a>
                    <li><a href="#naming-consistency"><span class="secno">12.5</span> <span
                                class="content">一致命名事物</span></a>
                    <li><a href="#naming-unsafe"><span class="secno">12.6</span> <span
                                class="content">危险特性应有警示</span></a>
                </ol>
            <li><a href="#writing-resources"><span class="secno">13</span> <span class="content">其他资源</span></a>
            <li><a href="#acks"><span class="secno"></span> <span class="content">致谢</span></a>
            <li>
                <a href="#index"><span class="secno"></span> <span class="content">索引</span></a>
                <ol class="toc">
                    <li><a href="#index-defined-here"><span class="secno"></span> <span
                                class="content">本规范定义的术语</span></a>
                    <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span
                                class="content">引用定义的术语</span></a>
                </ol>
            <li>
                <a href="#references"><span class="secno"></span> <span class="content">参考文献</span></a>
                <ol class="toc">
                    <li><a href="#normative"><span class="secno"></span> <span class="content">规范性引用</span></a>
                    <li><a href="#informative"><span class="secno"></span> <span class="content">参考性引用</span></a>
                </ol>
            <li><a href="#property-index"><span class="secno"></span> <span class="content">属性索引</span></a>
        </ol>
    </nav>
    <main>
        <h2 class="heading settled" data-level="1" id="basic-principles"><span class="secno">1. </span><span
                class="content">Web API设计原则</span><a class="self-link" href="#basic-principles"></a></h2>
        <p>设计原则直接参照了伦理网络原则 <a data-link-type="biblio" href="#biblio-ethical-web-principles"
                title="Ethical Web Principles">[ethical-web-principles]</a> 中提出的伦理框架。这些原则针对开发 Web
            平台所需承担的更高层次伦理责任，提供了具体且实用的建议。</p>
        <h3 class="heading settled" data-level="1.1" id="priority-of-constituencies"><span class="secno">1.1.
            </span><span class="content">以用户需求为先（相关方优先级）</span><a class="self-link"
                href="#priority-of-constituencies"></a></h3>
        <p>如果必须做出权衡，始终将用户需求置于首位。</p>
        <p>同样，在开始设计 API 时，务必理解并记录该 API 旨在解决的用户需求。</p>
        <p><a href="https://tools.ietf.org/html/rfc8890">互联网是为终端用户服务的</a>：对 Web 平台所做的任何变更都可能<a
                href="https://www.w3.org/TR/ethical-web-principles/#allpeople">影响大量人群</a>，甚至可能对个人生活产生深远影响。 <a
                data-link-type="biblio" href="#biblio-rfc8890" title="The Internet is for End Users">[RFC8890]</a>
        </p>
        <p>用户需求优先于网页作者需求，网页作者需求优先于用户代理实现者需求，用户代理实现者需求优先于规范编写者需求，规范编写者需求优先于理论上的纯粹性。</p>
        <p>和所有原则一样，这并非绝对。易于创作影响内容如何触达用户。用户代理必须优先分配有限的工程资源，这决定了功能如何到达作者。规范编写者也有有限的资源，理论上的考量反映了所有这些群体的根本需求。</p>
        <p>另见：</p>
        <ul>
            <li data-md>
                <p><a href="https://www.w3.org/TR/ethical-web-principles/#noharm">Web 不应对社会造成伤害</a></p>
            <li data-md>
                <p><a href="https://www.w3.org/TR/ethical-web-principles/#control">Web 必须增强个人的控制力和权力</a></p>
            <li data-md>
                <p><a data-link-type="biblio" href="#biblio-rfc8890" title="The Internet is for End Users">[RFC8890]</a>
                </p>
        </ul>
        <h3 class="heading settled" data-level="1.2" id="safe-to-browse"><span class="secno">1.2. </span><span
                class="content">访问网页应当安全</span><a class="self-link" href="#safe-to-browse"></a></h3>
        <p>在添加新功能时，
            设计时需确保用户对“访问网页一般是安全的”这一预期得以保持。</p>
        <p>Web因其超链接结构而得名。
            为了保持Web的活力，
            用户需要确信仅仅访问某个链接不会对其计算机安全或
            <a href="https://www.w3.org/TR/ethical-web-principles/#privacy">隐私</a>等重要方面造成影响。
        </p>
        <p>例如，若某API允许网站
            <a href="#do-not-expose-use-of-assistive-tech">检测辅助技术的使用</a>，
            可能会让依赖这些技术的用户在访问未知网页时感到不安全，
            因为任何网页都能检测到这些隐私信息。
        </p>
        <p>只要用户能合理预期安全，
            就能自行判断选择Web技术或其他技术。
            例如，用户可能选择网页点餐而非安装APP，
            因为安装本地应用的风险大于访问网页。</p>
        <p>为了让Web的实际安全性与用户预期相符，
            添加新功能时可以采取补充性措施：</p>
        <ul>
            <li data-md>
                <p>可改进Web的用户界面，让用户明确知晓Web能做什么、不能做什么；</p>
            <li data-md>
                <p>可改变Web的技术基础，使其符合用户对隐私的预期；</p>
            <li data-md>
                <p>可考虑哪些情况下应提升用户预期，并据此同时调整技术基础和用户期望。</p>
        </ul>
        <p>某些新功能即使带来安全风险，整体仍可能提升用户安全，
            比如让用户在网页上完成某任务比安装本地应用更安全。
            但这种收益需与用户对网页安全的合理预期进行权衡。</p>
        <p>另见：</p>
        <ul>
            <li data-md>
                <p><a href="https://www.w3.org/TR/security-privacy-questionnaire/">安全与隐私自查问卷</a>
                </p>
        </ul>
        <h3 class="heading settled" data-level="1.3" id="trusted-ui"><span class="secno">1.3. </span><span
                class="content">可信用户界面必须值得信赖</span><a class="self-link" href="#trusted-ui"></a></h3>
        <p>考虑新功能是否影响可信用户界面。</p>
        <p>用户依赖地址栏、安全指示器、权限提示等可信用户界面，
            来判断自己与谁、以何种方式互动。
            这些界面必须可设计为让用户信任
            <a href="https://www.w3.org/TR/ethical-web-principles/#verify">并验证</a>
            信息的真实性，且不会被网站伪造或劫持。
        </p>
        <p>若新功能让不可信用户界面可模仿可信界面，
            会让用户难以分辨信息是否可信。</p>
        <p class="example" id="example-59575e9e"><a class="self-link" href="#example-59575e9e"></a>
            例如，JavaScript <code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#dom-alert-noargs" id="ref-for-dom-alert-noargs">alert()</a></code>
            允许页面显示类似浏览器的模态对话框，
            这常被用来诱导用户访问诈骗网站。
            若今天提出此功能，可能不会被采纳。
        </p>
        <h3 class="heading settled" data-level="1.4" id="user-intent"><span class="secno">1.4. </span><span
                class="bs-old-id" id="consent"></span><span class="content">以用户意图为导向的设计</span><a class="self-link"
                href="#user-intent"></a></h3>
        <p>使用你的 API 设计来鼓励网站在访问可能不安全的功能时符合用户的期望。</p>
        <p>在满足用户需求的情境下，网页可能想要使用某个具有潜在危害的功能。只有当用户的期望与该功能的后果相匹配（例如，它可能暴露的个人信息或它改变的状态）时，才应允许使用此类功能。</p>
        <p>将你的 API 设计为其行为与人们的意图和期望相匹配。这样在最理想的情况下，人们无需亲自参与允许 API
            访问，也就无法做出日后会后悔的决定。仅在例外情况下才向用户请求确认。如果某项能力可以轻易恢复或仅会引起轻微烦扰且不会造成永久性伤害，应为用户提供停止该能力访问的选项。</p>
        <p class="example" id="example-d2d03cc5"><a class="self-link" href="#example-d2d03cc5"></a>
            例如，网页不需要为了播放声音而请求权限。如果发现某个站点滥用音频输出，停止音频很容易，浏览器也有多种机制可以做到这一点。
        </p>
        <h4 class="heading settled" data-level="1.4.1" id="user-decisions"><span class="secno">1.4.1. </span><span
                class="content">帮助用户做出良好决策</span><a class="self-link" href="#user-decisions"></a>
        </h4>
        <p>通过在 API 级别限制风险并提供清晰性、上下文和用户控制来增强良好决策能力。</p>
        <p>请求用户批准一直是处理剩余风险的常见方式。然而，人们常常无法对被询问的问题做出良好决定，因为他们缺乏关键的上下文和信息。面对困难或恼人的问题会导致决策疲劳、习惯性应答、频繁打断带来的恼怒以及后悔的决定。</p>
        <p>当用户参与不可避免时，应赋能用户做出良好决策。使用以下原则：</p>
        <ul>
            <li> <strong>首先在 API 级别处理风险，以限制错误决策的后果。</strong>
                不要向用户提出可能导致严重后果的问题，例如设备被攻破或严重的个人数据泄露。
            <li> <strong>对持久性的决定提供持续的反馈。</strong>
                如果用户的决定超出当前会话的时间，用户代理应提醒用户他们的过去决定仍然有效。提供撤销任何正在进行的权限的方法。API 应包含让站点得知状态变化的方式。
            <li id="ask-understandable-questions"><a class="self-link" href="#ask-understandable-questions"></a>
                <strong>提出人们能够理解的问题。</strong>
                当典型用户阅读有关某项功能的问题时，他们应能立即联想到相关风险。风险也应直接与该功能或 API
                的用途相关联。例如，这通常意味着我们不能通过请求许可来接受指纹识别的风险，因为这些风险是微妙的、技术性的，并且通常与该能力本身无关。
            <li> <strong>提供充分的上下文。</strong>
                人们需要能够轻松理解他们正在与谁打交道、这个决定是关于什么，以及网站将如何使用他们可能分享的任何信息。
        </ul>
        <p>如果你无法遵守以上所有原则，这很可能表明向用户提问并不是正确的方法。相反，应更改该功能或 API 来解决任何剩余的风险。</p>
        <div class="note" role="note">
            <p>浏览器负责管理权限请求。浏览器无法精确理解用户与站点的交互如何导致对权限请求的合理预期。Web 平台为站点提供了多种方式来传达用途和意图，或进行欺骗和诡计。</p>
            <p>因此，清晰传达意图的责任由 API 的设计、浏览器中的用户界面设计以及网站的构建方式共同承担。如果遵循 API 的简单、明显或默认用法模式自然会尊重用户意图，那是更可取的结果。该原则仅要求 API
                设计鼓励构建尊重用户意图的站点。</p>
        </div>
        <p>在你的规范中，<a data-link-type="dfn" href="https://w3c.github.io/permissions/#dfn-request-permission-to-use"
                id="ref-for-dfn-request-permission-to-use">请求使用权限</a>和<a data-link-type="dfn"
                href="https://w3c.github.io/permissions/#dfn-prompt-the-user-to-choose"
                id="ref-for-dfn-prompt-the-user-to-choose">提示用户选择</a>这两个来自<a data-link-type="biblio"
                href="#biblio-permissions" title="Permissions">[权限]</a>的算法是请求同意的良好方式。</p>
        <p>如果你要求用户做出决定而他们选择不允许，网站不应能够做任何用户认为自己刚刚拒绝访问的事。例如，如果用户代理通过一个 API 请求权限以揭示一条信息，那么同一信息不应通过另一个 API 在无需权限的情况下被获取。</p>
        <p>如果站点无法将拒绝与其他常见情形区分开来，拒绝将更为有效。这可以使站点更难以通过施压来迫使用户授予同意。</p>
        <p>另请参阅：</p>
        <ul>
            <li data-md>
                <p><a href="https://www.w3.org/TR/ethical-web-principles/#privacy">Web 是安全的，并尊重人们的隐私</a></p>
            <li data-md>
                <p><a href="https://www.w3.org/TR/privacy-principles/#consent-principles">同意原则</a></p>
            <li data-md>
                <p><a href="https://www.w3.org/TR/permissions/">权限</a></p>
        </ul>
        <h3 class="heading settled" data-level="1.5" id="identity"><span class="secno">1.5. </span><span
                class="content">在场景中适当使用身份信息</span><a class="self-link" href="#identity"></a>
        </h3>
        <p>让用户<a href="https://www.w3.org/TR/ethical-web-principles/#control">掌控</a>
            自己在Web不同场景下展示的身份信息，
            并保持透明。</p>
        <p>“身份”是个复杂概念，可有多种理解，
            包括个人如何展现/看待自己，与他人、团体或机构的关系，以及行为与他人对待方式。
            Web架构中，“身份”常用来指代标识符及附属信息。</p>
        <p>涉及或依赖标识符及其附属个人数据的功能，
            存在超越单一API或系统的隐私风险，包括被动生成的数据（如行为数据），也包括主动收集的数据（如表单填写）。</p>
        <p>对于此类功能，你应当 <a href="https://www.w3.org/TR/privacy-principles/#identity">了解其使用的上下文</a>
            ，包括它将如何与 Web 的其他功能一起使用。
            确保 <a href="#user-intent">以用户意图为导向地设计</a> 并 <a href="#user-decisions">帮助用户做出良好决策</a>。
            将 API 设计为仅收集
            <a href="https://www.w3.org/TR/privacy-principles/#data-minimization">必要的最少数据</a>。
            使用短期的临时标识符，
            除非确实绝对需要持久标识符。
        </p>
        <h3 class="heading settled" data-level="1.6" id="devices-platforms"><span class="secno">1.6. </span><span
                class="content">支持全类型设备与平台（媒体独立性）</span><a class="self-link" href="#devices-platforms"></a></h3>
        <p>尽量确保Web功能可在不同输入输出<a href="https://www.w3.org/TR/ethical-web-principles/#multi">设备、屏幕尺寸、交互模式、平台和媒体</a>中可用。</p>
        <p>Web的主要价值之一是极高的灵活性：
            网页可在各种终端设备和屏幕尺寸下显示，
            可用于打印媒体，
            并支持多种交互方式。
            新功能应与Web平台的<a href="https://www.w3.org/TR/ethical-web-principles/#render">现有灵活性</a>保持一致。</p>
        <div class="note" role="note">

            这并不意味着所有功能都必须适用于<em>每一种</em>场景。
            例如，打印在纸上的超链接无法访问，
            <span class="css">click</span>事件在触摸设备上的表现也与鼠标不同（如“轻触”即定位加点击）。

            <p>这些功能仍可适配多种场景，
                无法原生支持时可退化处理——如移动设备上的轻触会触发<span class="css">click</span>事件。</p>
        </div>
        <p>功能设计也应保证最简用法同样具备灵活性。</p>
        <div class="example" id="example-f162158a"><a class="self-link" href="#example-f162158a"></a>
            CSS中的'display: block'、'display: flex'和'display: grid'布局模型，
            默认内容在可用空间内排布且不重叠，
            因此能适应各种屏幕尺寸，
            并允许用户自选字体和字号而不会导致文本溢出。
        </div>
        <p>有时某些功能在部分实现或平台上未支持，但在其它平台可用。
            此时应保证代码可优雅降级或polyfill。
            参见<a href="#feature-detect">§ 2.6 新功能应可检测</a>。</p>
        <h3 class="heading settled" data-level="1.7" id="new-features"><span class="secno">1.7. </span><span
                class="content">谨慎添加新能力</span><a class="self-link" href="#new-features"></a></h3>
        <p>添加新能力时需考虑现有功能和内容。</p>
        <p>Web包含许多可扩展点以支持新功能；
            例如见<a href="https://html.spec.whatwg.org/multipage/introduction.html#extensibility"><cite>HTML</cite>
                § 1.7.2
                可扩展性</a>。</p>
        <p>在添加新项前，应考虑与现有类似能力的集成。
            如此带来更优设计方案，但不能仅靠加项实现，
            仍有可能采纳；见<a href="#removing-features">§ 1.8 需先理解现有用法再移除或更改能力</a>。</p>
        <p>不要在未确认前就假定某项更改或移除不可行。</p>
        <h3 class="heading settled" data-level="1.8" id="removing-features"><span class="secno">1.8. </span><span
                class="content">需充分理解现有用法后再移除或更改能力</span><a class="self-link" href="#removing-features"></a></h3>
        <p>移除或更改功能时优先考虑兼容现有内容。</p>
        <p>一旦大量内容依赖某个行为，
            就不建议移除或更改该行为。
            移除/更改功能是可行的，
            但前提是充分了解其对现有内容的影响范围与性质，
            这可能需调研现有内容的使用情况。</p>
        <p>理解现有用法的义务同样适用于内容依赖的所有功能，
            包括厂商私有功能和被认为是实现bug的行为。
            Web特性不仅由规范定义，
            还由内容的实际用法决定。</p>
        <h3 class="heading settled" data-level="1.9" id="leave-the-web-better"><span class="secno">1.9. </span><span
                class="content">让Web比你遇到时更好</span><a class="self-link" href="#leave-the-web-better"></a></h3>
        <p>为Web平台添加新能力时，
            应提升整体平台质量。</p>
        <p>平台某处有缺陷，
            不能成为在该缺陷上继续扩展/添加的理由，
            否则会进一步降低平台质量。</p>
        <p>即使现有设计模式有问题，
            也不应在新API或平台功能中延续此模式。
            应尽量通过新能力改善平台质量，
            弥补现有缺陷。</p>
        <p>如需扩展有已知缺陷的平台功能，
            应考虑如何修正这些问题。
            不必完全修复，但扩展时应尽量改进，
            以免新用法加剧缺陷危害。</p>
        <p>Web平台各部分可独立演化。
            当前某技术的问题可能在后续迭代中修正。
            若重复这些问题，将使修复更难。
            遵循此原则能保证平台质量随时间改善。</p>
        <h3 class="heading settled" data-level="1.10" id="data-minimization"><span class="secno">1.10. </span><span
                class="content">最小化用户数据</span><a class="self-link" href="#data-minimization"></a></h3>
        <p>设计功能时应仅使用完成用户目标所需的最少数据。</p>
        <p><a href="https://www.w3.org/TR/privacy-principles/#data-minimization">数据最小化</a>
            可减少数据泄露或滥用的风险。</p>
        <p>将 Web API 设计为使站点比处理更通用或大批量的数据更容易请求、收集和/或传输少量数据或更细粒度、更加具体的数据。API 还应为传递给站点的数据提供粒度和用户控制，尤其是对 <a
                href="https://www.w3.org/TR/privacy-principles/#dfn-data">个人数据</a> 的控制。当额外功能需要额外数据时，只有在 <a
                href="#user-intent">以用户意图为导向地设计</a> 并在必要时 <a href="#user-decisions">帮助用户做出良好决策</a> 的情况下，API 才能启用这些功能。
        </p>
        <div class="example" id="example-fa9c901d"><a class="self-link" href="#example-fa9c901d"></a>
            曾有<a href="#font-enumeration">字体枚举API</a>提案，但所暴露的用户数据远超用例所需，最终未被采纳。
            替代方案仅暴露用户实际选择的字体。
        </div>
        <h2 class="heading settled" data-level="2" id="api-across-languages"><span class="secno">2. </span><span
                class="content">跨语言的API设计</span><a class="self-link" href="#api-across-languages"></a>
        </h2>
        <h3 class="heading settled" data-level="2.1" id="simplicity"><span class="secno">2.1. </span><span
                class="content">优先选择简单方案</span><a class="self-link" href="#simplicity"></a></h3>
        <p>深入寻找能够满足<a href="#priority-of-constituencies">用户需求</a>的简单方案。
        </p>
        <p>简单方案通常优于复杂方案，虽然可能更难发现。简单的特性更易于用户代理实现和测试，更有可能实现互操作，也更容易让作者理解。尤其要确保你的特性能让最常见的用例易于实现。</p>
        <p>确保你的<a
                href="#priority-of-constituencies">用户需求</a>定义明确。这样可以防止范围膨胀，并确保API真正满足所有用户的需要。当然，复杂或罕见的用例也值得解决，不过它们的方案可能更复杂。如
            Alan Kay 所说，“简单的事情应当简单，复杂的事情应当可能。”</p>
        <p>但需要注意的是，常见用例通常很简单，但常见性和复杂性并不总是相关。</p>
        <div class="example" id="example-b89cef20"><a class="self-link" href="#example-b89cef20"></a>
            为防止XSS攻击而净化HTML是一项复杂过程，需要丰富的安全知识，但<a href="https://wicg.github.io/sanitizer-api/">Sanitizer
                API</a>为这一常见用例提供了简便途径，同时允许更简单类型的过滤，但可配置性更高。
        </div>
        <p>另见：</p>
        <ul>
            <li data-md>
                <p><a data-link-type="biblio" href="#biblio-least-power"
                        title="The Rule of Least Power">[LEAST-POWER]</a></p>
        </ul>
        <h3 class="heading settled" data-level="2.2" id="high-level-low-level"><span class="secno">2.2. </span><span
                class="content">权衡高层与底层API</span><a class="self-link" href="#high-level-low-level"></a></h3>
        <p>高层API让用户代理能以多种方式代表用户进行干预，比如确保可访问性、隐私或易用性。</p>
        <div class="example" id="font-enumeration">
            <a class="self-link" href="#font-enumeration"></a>
            <p>TAG推荐使用字体选择器（高层API）<a
                    href="https://github.com/w3ctag/design-reviews/issues/399">（原文链接）</a>而非字体枚举API（底层API），因为它满足绝大多数用例，同时保护用户隐私，不会像通用字体枚举API那样带来指纹识别风险。原生字体选择器还自带可访问性，并为终端用户提供一致体验。
            </p>
        </div>
        <p>底层API为作者提供实验空间，让高层API能随用例模式的演化自然产生，也能在高层API无法满足需求时提供“逃生通道”。</p>
        <p>底层构件并非总能作为Web API暴露，原因包括保护用户安全和隐私，或避免将Web API绑定到特定硬件。但高层API应尽量以底层API为基础构建，这也有助于确定API需要多高层。</p>
        <p>良好的分层方案应保证易用性与功能强大之间的权衡曲线连续，避免出现因用例复杂度略增而导致代码复杂度陡增的“断崖”。</p>
        <h3 class="heading settled" data-level="2.3" id="name-thoughtfully"><span class="secno">2.3. </span><span
                class="content">慎重命名</span><a class="self-link" href="#name-thoughtfully"></a></h3>
        <p>API命名要谨慎。好的命名能让作者更容易正确使用API。</p>
        <p>详细命名建议请见<a href="#naming-is-hard">命名原则</a>一节。</p>
        <h3 class="heading settled" data-level="2.4" id="consistency"><span class="secno">2.4. </span><span
                class="content">保持一致性</span><a class="self-link" href="#consistency"></a></h3>
        <p>API设计时应参考先例，并尽量保持一致。</p>
        <p>API易用性与一致性之间常有张力，尤其当现有先例可用性较差时。有时打破一致性以提升易用性是合理的，但前提是提升非常显著。</p>
        <p>Web平台逐步演化，常有多种互相矛盾的先例。可以根据流行度（优先更流行的先例）、易用性（优先更易用的先例）、API年龄（优先更新的先例）等综合权衡。</p>
        <p>内部一致性与外部一致性也常有冲突。<em>内部一致性</em>是与系统其它部分的一致，<em>外部一致性</em>是与外界的一致。Web平台通常有三层：API所属技术内部一致性（如CSS），与Web平台其它部分一致，以及部分场景下与外部领域的一致。此时应考虑多数用户是谁。大多数API的目标用户熟悉其所属技术，应倾向于与此保持一致。
        </p>
        <div class="example" id="example-616da141"><a class="self-link" href="#example-616da141"></a>
            一个例子是<a href="https://www.w3.org/TR/css-color-4/#funcdef-lab">CIE
                L*a*b*颜色</a>：用百分比表示L（0%-100%）更符合CSS的一致性，而用无单位数值（0-100）更符合色彩科学领域。经过激烈讨论，最终选择了百分比，即与CSS保持一致。
        </div>
        <p>关于命名一致性另有专门章节，见<a href="#naming-consistency">命名一致性</a>。</p>
        <h3 class="heading settled" data-level="2.5" id="specs-include-guidance"><span class="secno">2.5. </span><span
                class="content">遵循特性规范中的指导</span><a class="self-link" href="#specs-include-guidance"></a></h3>
        <p>使用某项特性时，要遵循其规范中的指导。</p>
        <p>为其它规范调用的特性，应在规范中给出使用指导，以确保整个平台的正确和一致使用。</p>
        <p>部分指导举例如下：</p>
        <ul>
            <li data-md>
                <p><a href="https://encoding.spec.whatwg.org/#specification-hooks">编码</a></p>
            <li data-md>
                <p><a href="https://fetch.spec.whatwg.org/#fetch-elsewhere">Fetch</a></p>
            <li data-md>
                <p><span id="using-http"><a data-biblio-display="inline" data-link-type="biblio"
                            href="https://httpwg.org/specs/rfc9205.html"><cite>使用HTTP构建协议</cite></a></span>，
                    尤其是<a href="https://httpwg.org/specs/rfc9205.html#section-4.7">定义头字段</a>、
                    <a
                        href="https://datatracker.ietf.org/doc/search?name=HTTP&amp;sort=&amp;rfcs=on&amp;by=group&amp;group=httpbis">其它HTTP
                        RFC</a>、
                    以及<a href="https://httpwg.org/admin/editors/style-guide">HTTP工作组风格指南</a>
                </p>
            <li data-md>
                <p><a href="https://w3c.github.io/hr-time/#sec-tools">时间</a></p>
            <li data-md>
                <p><a href="https://url.spec.whatwg.org/#url-apis-elsewhere">URL</a></p>
        </ul>
        <p>使用他人规范时要与相关社区沟通，这有助于告知社区新用法，并为双方规范创造完善机会。</p>
        <h3 class="heading settled" data-level="2.6" id="feature-detect"><span class="secno">2.6. </span><span
                class="content">新特性应可检测</span><a class="self-link" href="#feature-detect"></a>
        </h3>
        <p>为作者提供编程方法检测你的特性是否可用，让网页内容能优雅处理特性不可用的情况。</p>
        <p>现有特性可能因多种原因页面不可用，常见原因有尚未实现，或仅在<a href="#secure-context">安全上下文</a>中可用。</p>
        <p>作者不应为每种情形都写不同代码，这样即使作者只关注某一种情形，代码也能适配全部。</p>
        <p class="note" role="note">
            某特性可用但因缺少所需设备而无法使用时，最好暴露特性可用性，并另有方法检测设备是否存在。这样作者可区分“设备不可用”与“特性不可用”，例如建议用户连接或启用设备。
        </p>
        <p>参见<a href="#device-enumeration">§ 9.2 谨慎开放设备选择/枚举API</a>。</p>
        <p></p>
        <p>作者应始终能通过JavaScript检测特性，在某些情况下也应能在对应语言中检测（如CSS中的<a class="css" data-link-type="maybe"
                href="https://drafts.csswg.org/css-conditional-3/#at-ruledef-supports"
                id="ref-for-at-ruledef-supports">@supports</a>）。</p>
        <p>某些场景下，不适合支持特性检测。是否可检测应以<a href="#priority-of-constituencies">用户需求</a>为依据。如果支持检测会违反用户需求或设计原则，则不应支持检测。</p>
        <p>检测某项功能是否可用并不意味着能够检测是否已<a href="#user-decisions">询问用户</a>使用该功能。
            通常，检测功能是否已实现可以与确定是否授权使用该功能分开进行。
            在某些情况下，可能需要禁用功能检测以便能够拒绝使用该功能的请求。</p>
        <p>如果某特性一般不向开发者开放，也不适合支持检测。例如，隐私浏览模式在规范中有定义，但不向作者开放。为了满足用户需求，不应支持检测隐私浏览模式。</p>
        <p>另见：</p>
        <ul>
            <li data-md>
                <p><a href="#do-not-expose-use-of-private-browsing-mode">§ 2.9 不要透露隐私浏览模式已启用</a></p>
            <li data-md>
                <p><a href="#do-not-expose-use-of-assistive-tech">§ 2.11 不要透露正在使用辅助技术</a></p>
            <li data-md>
                <p><a href="#secure-context">§ 2.8 考虑将新功能限制在安全上下文中</a></p>
            <li data-md>
                <p><a href="#user-decisions">§ 1.4.1 帮助用户做出良好决策</a></p>
        </ul>
        <h3 class="heading settled" data-level="2.7" id="text-formats"><span class="secno">2.7. </span><span
                class="content">为人类设计文本格式</span><a class="self-link" href="#text-formats"></a>
        </h3>
        <p>设计文本格式时应便于人类生成和使用。文本格式也提升了<a href="https://www.w3.org/TR/ethical-web-principles/#transparent">透明度</a>。</p>
        <p>优先考虑可读性而非紧凑性。文件体积可用工具优化，随着时间推移通常不是首要考虑。如果体积是绝对优先，也许不应采用文本格式。</p>
        <div class="example" id="example-db958612"><a class="self-link" href="#example-db958612"></a>
            SVG路径语法为紧凑而设计，用单字母命令及一串未标记坐标。文件体积曾是首要考虑，但随着时间推移体积重要性降低，牺牲可读性的代价却一直存在。
        </div>
        <p>接触文本格式的人应能通过文本编辑器轻松生成或修改内容。手动编辑会产生各类错误，用户可能难以发现和修正。</p>
        <p>人们期望编辑时有一定灵活性。<a href="#avoid-ambiguity">明确定义</a>语法灵活性（如空白、引号、分隔符等）能保证内容易编辑且结果一致。</p>
        <div class="example" id="example-92a0fa51"><a class="self-link" href="#example-92a0fa51"></a>
            JSON是表面看似灵活但缺少基本易用性的格式。例如：无注释能力、对象数组不能有末尾逗号、对象键必须加引号。手动编辑时易产生语法错误。
        </div>
        <p>限定格式受语法错误影响的范围可提升健壮性和人类可用性。规范需完整定义处理和错误机制，保证全部输入都有一致结果。</p>
        <div class="example" id="example-56153df0"><a class="self-link" href="#example-56153df0"></a>
            CSS属性拼写错误只会导致该属性被忽略，属性错误很少导致整个规则丢失。
        </div>
        <p>如果某格式仅供机器使用，二进制格式往往更高效，也能避免人类直接编写和编辑内容。</p>
        <h3 class="heading settled" data-level="2.8" id="secure-context"><span class="secno">2.8. </span><span
                class="content">考虑仅在安全上下文开放新特性</span><a class="self-link" href="#secure-context"></a></h3>
        <p>如果某特性在无认证、完整性或保密性（仅安全上下文具备）下会对用户造成风险，应始终限定在安全上下文中使用。</p>
        <div class="example" id="example-ba6f372c"><a class="self-link" href="#example-ba6f372c"></a>
            例如，<a href="https://www.w3.org/TR/geolocation-API/">地理定位</a>应限定在安全上下文，否则用不安全方式传输位置会危及用户隐私。
        </div>
        <p>其他特性方面，TAG成员未有统一结论。有些人认为所有新特性（除扩展现有特性外）都应限定在安全上下文，这有助于推广HTTPS，让用户整体更安全。</p>
        <p>有人认为，只有有已知安全或隐私影响的特性才应限定在安全上下文，这降低了利用新特性的门槛，适用于无安全/隐私影响的新网页。</p>
        <div class="note" role="note">
            规范作者可通过Web IDL <a data-link-type="biblio" href="#biblio-webidl" title="Web IDL Standard">[WEBIDL]</a>中的
            [<code
                class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#SecureContext" id="ref-for-SecureContext">SecureContext</a></code>]
            扩展属性，限定接口、命名空间或其成员（如方法和属性）在安全上下文中使用。
            <p>但部分API（如分发事件）应在规范正文中明确限制为安全上下文。此时可考虑是否能为[<code
                    class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#SecureContext" id="ref-for-SecureContext①">SecureContext</a></code>]扩展机制，为未来API开发提供便利。
            </p>
        </div>
        <div class="note" role="note">
            如<a href="#feature-detect">§ 2.6 新特性应可检测</a>所述，应提供程序化检测特性可用性的方法，包括因上下文不安全而不可用的情况。
            <p>但如无法优雅处理特性不可用，限定特性只在安全上下文可用可能会给可在安全/非安全环境通用的代码（如库）带来问题。</p>
        </div>
        <h3 class="heading settled" data-level="2.9" id="do-not-expose-use-of-private-browsing-mode"><span
                class="secno">2.9. </span><span class="content">不要暴露隐私浏览模式的使用</span><a class="self-link"
                href="#do-not-expose-use-of-private-browsing-mode"></a></h3>
        <p>确保你的功能不会让作者有办法检测出用户正在使用隐私浏览模式。</p>
        <p>有些人使用<a
                href="https://www.w3.org/2001/tag/doc/private-browsing-modes/">隐私浏览模式</a>来保护自身的个人安全。因此，某人正在使用隐私浏览模式这一事实，可能是关于他们的<a
                href="https://www.w3.org/TR/security-privacy-questionnaire/#sensitive-data">敏感信息</a>。如果这些信息被有权势的人（如雇主、父母、伴侣，或<a
                href="https://www.w3.org/TR/ethical-web-principles/#expression">国家行为者</a>）控制的网站获知，可能会对个人造成<a
                href="https://www.w3.org/TR/ethical-web-principles/#noharm">伤害</a>。</p>
        <p>鉴于这些风险，网站不应有能力检测隐私浏览模式是否被启用。</p>
        <div class="example" id="example-52cad010"><a class="self-link" href="#example-52cad010"></a>
            支持<a href="https://www.w3.org/TR/IndexedDB/">IndexedDB</a>的用户代理在隐私浏览模式下不应禁用该功能，因为这样会暴露隐私浏览模式已被启用。
        </div>
        <div class="example" id="example-26556da1">
            <a class="self-link" href="#example-26556da1"></a>
            <a href="https://www.w3.org/TR/payment-request/">支付请求API</a>的<a
                href="https://www.w3.org/TR/payment-request/#show-method">show()方法</a>允许用户代理<q
                cite="https://www.w3.org/TR/payment-request/#show-method">表现得像用户已立即<a
                    href="https://www.w3.org/TR/payment-request/#dfn-user-aborts-the-payment-request">取消支付请求</a></q>。
            <p>用户代理可自动在隐私浏览模式下取消支付请求（保护如收货/账单地址等<a
                    href="https://www.w3.org/TR/security-privacy-questionnaire/#sensitive-data">敏感信息</a>），且不会暴露隐私浏览模式已启用。
            </p>
        </div>
        <p>另见：</p>
        <ul>
            <li data-md>
                <p><a href="https://www.w3.org/TR/ethical-web-principles/#privacy">安全与隐私至关重要</a></p>
            <li data-md>
                <p><a
                        href="https://www.w3.org/TR/security-privacy-questionnaire/#underlying-platform-data">本规范向源站暴露了哪些数据？</a>
                </p>
            <li data-md>
                <p><a href="#private-browsing-mode">§ 2.10 考虑API在隐私浏览模式下的行为</a></p>
        </ul>
        <h3 class="heading settled" data-level="2.10" id="private-browsing-mode"><span class="secno">2.10. </span><span
                class="content">考虑API在隐私浏览模式下的行为</span><a class="self-link" href="#private-browsing-mode"></a></h3>
        <p>如有必要，规范应指明API在隐私浏览模式下的不同表现。</p>
        <p>例如，如果你的 API 会揭示足以让人将同一用户在隐私浏览模式内外的活动关联起来的信息，
            请考虑可能的 <a href="https://www.w3.org/TR/security-privacy-questionnaire/#mitigations">缓解措施</a>，
            比如引入噪声，或者在必要时 <a href="#user-decisions">帮助用户就这种跟踪做出良好决策</a>。</p>
        <p>隐私浏览模式让用户能无痕浏览网页，因此提供客户端存储的API不应在隐私浏览模式解除后保留数据。应做到不向网站暴露任何可检测的API差异。</p>
        <div class="example" id="example-fb11a26c">
            <a class="self-link" href="#example-fb11a26c"></a>
            支持<a href="https://html.spec.whatwg.org/multipage/webstorage.html#dom-localstorage"
                id="79d831630">localStorage</a>的用户代理不应保留隐私浏览模式下的数据。
            <p>如用户代理同时与某站点有普通和隐私会话，隐私会话中的存储变更不应暴露给普通会话，反之亦然。（<a
                    href="https://html.spec.whatwg.org/multipage/indices.html#event-storage">storage事件</a>不应在另一会话的<a
                    href="https://html.spec.whatwg.org/multipage/window-object.html#window">window对象</a>上触发。）</p>
        </div>
        <p>另见：</p>
        <ul>
            <li data-md>
                <p><a href="#do-not-expose-use-of-private-browsing-mode">§ 2.9 不要暴露隐私浏览模式的使用</a></p>
            <li data-md>
                <p><a
                        href="https://www.w3.org/TR/security-privacy-questionnaire/#persistent-origin-specific-state">本规范是否为源站引入了可跨会话持久化的新状态？</a>
                </p>
            <li data-md>
                <p><a href="https://www.w3.org/TR/security-privacy-questionnaire/#private-browsing">安全与隐私自查：隐私浏览</a></p>
        </ul>
        <h3 class="heading settled" data-level="2.11" id="do-not-expose-use-of-assistive-tech"><span class="secno">2.11.
            </span><span class="content">不要暴露辅助技术的使用</span><a class="self-link"
                href="#do-not-expose-use-of-assistive-tech"></a></h3>
        <p>确保你的API不会让作者检测到用户正在使用辅助技术。</p>
        <p><a
                href="https://www.w3.org/TR/ethical-web-principles/#allpeople">Web平台必须对残障人士可访问。</a>如网站能检测到用户使用辅助技术，可能拒绝或限制其服务。
        </p>
        <p>依赖辅助技术的人常是<a href="https://www.w3.org/TR/ethical-web-principles/#noharm">社会易受伤害成员</a>，他们的辅助技术使用情况是<a
                href="https://www.w3.org/TR/security-privacy-questionnaire/#sensitive-data">敏感信息</a>。API若暴露此信息，可能泄露给有害他意者（包括<a
                href="https://www.w3.org/TR/ethical-web-principles/#expression">国家行为者</a>）。</p>
        <p>有时有人提出旨在提升辅助技术用户体验的特性，但会副作用暴露辅助技术使用。虽出于善意，但却违反了<a href="#safe-to-browse">§ 1.2 访问网页应当安全</a>，需寻找替代方案。</p>
        <div class="example" id="example-f5a7b3e0">
            <a class="self-link" href="#example-f5a7b3e0"></a>
            <p><a href="https://wicg.github.io/aom/">Accessibility Object Model</a>（AOM）曾定义一组事件，其触发会<a
                    href="https://github.com/WICG/aom/issues/81">暴露辅助技术的使用</a>。</p>
            <p>AOM后来移除了这些事件，并<a
                    href="https://github.com/WICG/aom/blob/gh-pages/explainer.md#user-action-events-from-assistive-technology">改用</a>不会暴露辅助技术使用的合成DOM事件。
            </p>
        </div>
        <p>另见：</p>
        <ul>
            <li data-md>
                <p><a href="https://w3c.github.io/apa/fast/">Web技术可访问性指南</a></p>
            <li data-md>
                <p><a href="https://www.w3.org/TR/ethical-web-principles/#privacy">安全与隐私至关重要</a></p>
            <li data-md>
                <p><a
                        href="https://www.w3.org/TR/security-privacy-questionnaire/#underlying-platform-data">本规范向源站暴露了哪些数据？</a>
                </p>
        </ul>
        <h3 class="heading settled" data-level="2.12" id="require-user-activation"><span class="secno">2.12.
            </span><span class="content">强大API需用户激活</span><a class="self-link" href="#require-user-activation"></a></h3>
        <p>部分强大API会生成侵入性界面（如自动播放音频）、暴露用户数据（如操作剪贴板）、后台活动无明显指示（如访问本地存储）、或促使用户与<a
                href="#trusted-ui">可信界面</a>交互（如权限提示、硬件功能）。这些API应设计为必须有用户意图的指示（如<strong>用户激活</strong>）后才能运行，表明用户正在主动与网页交互。
        </p>
        <p>用户激活的详细定义见<a
                href="https://html.spec.whatwg.org/#tracking-user-activation">HTML标准</a>。设计API时应根据用户体验和风险，决定激活是全局一次（<a
                href="https://html.spec.whatwg.org/#sticky-activation-gated-api">sticky</a>）、周期性（<a
                href="https://html.spec.whatwg.org/#transient-activation-gated-api">transient</a>）还是每次调用一次（<a
                href="https://html.spec.whatwg.org/#activation-consuming-api">transient consuming</a>）。</p>
        <p>请注意，虽然在许多情况下需要用户激活，但这并不总是 <em>足以</em> 保护用户免受侵入性行为。<a href="#user-intent">以用户意图为导向的设计</a> 和 <a
                href="#user-decisions">帮助用户做出良好决策</a> 也很重要。</p>
        <h3 class="heading settled" data-level="2.13" id="support-non-fully-active"><span class="secno">2.13.
            </span><span class="content">支持非完全激活的BFCached文档</span><a class="self-link"
                href="#support-non-fully-active"></a></h3>
        <p>如可能，规范应指明特性在非<a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active"
                id="ref-for-fully-active">完全激活</a>的BFCached（前进/后退缓存）文档中的表现。</p>
        <p>如你的特性涉及如下任何事项：</p>
        <ul>
            <li data-md>
                <p>与文档“外部”交互（如向文档发送信息）</p>
            <li data-md>
                <p>支持跨文档交互/资源共享（如持有锁）</p>
            <li data-md>
                <p>文档被缓存为非<a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active"
                        id="ref-for-fully-active①">完全激活</a>后可能异常（如假定文档状态不会跨多次导航）</p>
        </ul>
        <p>应按<a href="https://w3ctag.github.io/bfcache-guide/">BFCached文档支持指南</a>规定，指明特性与非<a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active"
                id="ref-for-fully-active②">完全激活</a>BFCached文档的兼容方案。</p>
        <p class="note" role="note"><span class="marker">注意：</span>文档变为非<a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active"
                id="ref-for-fully-active③">完全激活</a>也可能因其它原因（如iframe被移除），此指导只关注BFCache相关情形，不涵盖其它非激活来源。</p>
        <h3 class="heading settled" data-level="2.14" id="third-party-tools"><span class="secno">2.14. </span><span
                class="content">优先考虑可用性而非第三方工具兼容性</span><a class="self-link" href="#third-party-tools"></a></h3>
        <p>设计新特性时应以可用性为首要目标，第三方工具兼容性为次要目标。</p>
        <p>Web平台受益于丰富工具生态，便于开发。新特性语法常与第三方工具冲突导致故障，尤其是这些工具常用于Web特性原型开发。</p>
        <p>Web平台特性通常比第三方工具寿命更长，因此应优先保证特性的最佳语法和功能。</p>
        <p>有时冲突会影响大量网站，需重设特性语法以避免冲突。</p>
        <div class="example" id="example-1e284310"><a class="self-link" href="#example-1e284310"></a>
            <code>Array.prototype.contains()</code>必须改名为<code>Array.prototype.includes()</code>以避免与PrototypeJS库的同名但不兼容方法冲突，该库在数百万网站中使用。
        </div>
        <p>但此类情况应属例外。</p>
        <p>决定是否因新语法破坏第三方工具时要考虑多因素，如破坏严重程度、工具流行度等。</p>
        <p>最重要因素常是为避免破坏第三方工具而更改语法是否会严重损害Web特性的可用性？如有多个可用性相近方案，通常优先选择对第三方工具干扰最小者。</p>
        <div class="example" id="example-4a031163"><a class="self-link" href="#example-4a031163"></a>
            CSS WG设计<a data-link-type="biblio" href="#biblio-css-grid-1" title="CSS Grid Layout Module Level 1">CSS
                Grid布局</a>时，为避免破坏流行预处理器Sass，选择用方括号而非圆括号命名网格轨道。
        </div>
        <p>但如为避免破坏第三方工具而导致特性可用性<em>显著</em>下降，除非大量网站因此受损，否则通常不可接受。</p>
        <p>语言还应提供可扩展机制，让作者能扩展语言而不破坏未来原生功能，以减少类似困境。</p>
        <h3 class="heading settled" data-level="2.15" id="prefer-composition"><span class="secno">2.15. </span><span
                class="content">通过组合简单类型构建复杂类型</span><a class="self-link" href="#prefer-composition"></a></h3>
        <p>定义可作为超类型替代的子类型。避免接口继承，除非父类型所有属性和行为对子类型都适用。</p>
        <p>继承下，子类型能作为父类型的实例，需提供相同属性和方法，并保持行为一致。若子类型改变了某项行为，使用父类型处理时可能异常。</p>
        <p>类型系统理论中，这称为<a href="https://en.wikipedia.org/wiki/Liskov_substitution_principle">Liskov替换原则</a>。</p>
        <div class="example" id="example-2c1a1d5d"><a class="self-link" href="#example-2c1a1d5d"></a>
            <code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#event" id="ref-for-event">Event</a></code>
            是<code
                class="idl"><a data-link-type="idl" href="https://w3c.github.io/uievents/#keyboardevent" id="ref-for-keyboardevent">KeyboardEvent</a></code>和<code
                class="idl"><a data-link-type="idl" href="https://w3c.github.io/pointerevents/#dom-pointerevent" id="ref-for-dom-pointerevent">PointerEvent</a></code>的超类型。事件总有一组基本属性和操作，如事件是否<code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-bubbles" id="ref-for-dom-event-bubbles">冒泡</a></code>。子类型可添加新属性和操作，但其实例依然完全表现为<code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#event" id="ref-for-event①">Event</a></code>。
        </div>
        <p>更简单做法通常是避免继承，通过组合复用已有能力。新类型可定义属性以持有所需组件。</p>
        <div class="example" id="example-7094db49"><a class="self-link" href="#example-7094db49"></a>
            关联表单的自定义元素允许自定义元素参与表单提交。专用化<code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/input.html#htmlinputelement" id="ref-for-htmlinputelement">HTMLInputElement</a></code>很难，因为<code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/input.html#the-input-element" id="ref-for-the-input-element">input</a></code>元素很复杂，专用化<code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/input.html#htmlinputelement" id="ref-for-htmlinputelement①">HTMLInputElement</a></code>必须保持全部复杂性。自定义元素可通过组合需要与表单交互的项，无需应对<code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/input.html#htmlinputelement" id="ref-for-htmlinputelement②">HTMLInputElement</a></code>的复杂性。
        </div>
        .



        <h2 class="heading settled" data-level="3" id="html"><span class="secno">3. </span><span
                class="content">HTML</span><a class="self-link" href="#html"></a></h2>
        <p>本节详细介绍通过HTML暴露的功能的设计原则。</p>
        <h3 class="heading settled" data-level="3.1" id="attribute-reuse"><span class="secno">3.1. </span><span
                class="content">仅为类似功能复用HTML属性名</span><a class="self-link" href="#attribute-reuse"></a></h3>
        <p>如果你要添加一个通过HTML属性指定的功能，
            请检查其他元素上是否已有用于类似功能的属性名。
            复用已有的HTML属性名，可以让作者利用现有知识，
            保持语言的<a href="#consistency">一致性</a>，
            并让词汇量更精简。</p>
        <div class="example" id="example-c1977603"><a class="self-link" href="#example-c1977603"></a>
            同一个属性名
            <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/form-elements.html#attr-select-multiple" id="ref-for-attr-select-multiple">multiple</a></code>
            被用于
            <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/form-elements.html#the-select-element" id="ref-for-the-select-element">select</a></code>
            元素以允许多选，也被用于
            <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/input.html#the-input-element" id="ref-for-the-input-element①">input</a></code>
            元素以允许输入多个值。
        </div>
        <div class="example" id="example-628fe6cf"><a class="self-link" href="#example-628fe6cf"></a>
            <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/interactive-elements.html#attr-details-open" id="ref-for-attr-details-open">open</a></code>
            属性最初用于
            <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/interactive-elements.html#the-details-element" id="ref-for-the-details-element">details</a></code>
            元素，
            后来又被
            <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/interactive-elements.html#the-dialog-element" id="ref-for-the-dialog-element">dialog</a></code>
            元素复用。
        </div>
        <p>如果复用现有HTML属性，
            尽量保持其语法与原属性一致。</p>
        <div class="example" id="example-0e853da5"><a class="self-link" href="#example-0e853da5"></a>
            <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/forms.html#attr-label-for" id="ref-for-attr-label-for">for</a></code>
            属性最初用于
            <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/forms.html#the-label-element" id="ref-for-the-label-element">label</a></code>
            元素，指定关联的表单元素。
            后来又被
            <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/form-elements.html#the-output-element" id="ref-for-the-output-element">output</a></code>
            元素复用，用于指定哪些元素的输入值参与或影响了计算。
            后者语法更宽泛：可以接收以空格分隔的一组id，而前者只接收一个id。
            但两者都遵循相同的语法，如果其中一个接收id列表，另一个接收selector，那就是反模式。
        </div>
        <p>反之亦然：
            如果你要添加的功能与现有属性功能<strong>不相似</strong>，则<strong>不要</strong>复用已有HTML属性名。</p>
        <div class="example" id="example-9866c588"><a class="self-link" href="#example-9866c588"></a>
            <code>type</code>属性在
            <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/input.html#the-input-element" id="ref-for-the-input-element②">input</a></code>
            和
            <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/form-elements.html#the-button-element" id="ref-for-the-button-element">button</a></code>
            元素上用于细化元素类型，
            而在其它元素（如
            <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/semantics.html#the-link-element" id="ref-for-the-link-element">link</a></code>、
            <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/scripting.html#script" id="ref-for-script">script</a></code>、
            <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/semantics.html#the-style-element" id="ref-for-the-style-element">style</a></code>）
            则用于指定MIME类型。
            这是反模式，其中一组属性应该用不同的名字。
        </div>
        <h3 class="heading settled" data-level="3.2" id="html-lists"><span class="secno">3.2. </span><span
                class="content">短列表用空格分隔属性，长列表用多个元素</span><a class="self-link" href="#html-lists"></a></h3>
        <p>当为元素指定可为列表的元数据时，
            通常做法是用空格分隔，并作为<code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#domtokenlist" id="ref-for-domtokenlist">DOMTokenList</a></code>暴露。
        </p>
        <div class="example" id="example-0db34933">
            <a class="self-link" href="#example-0db34933"></a>
            <p>
                <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/dom.html#classes" id="ref-for-classes">class</a></code>
                属性接收以空格分隔的类名列表。
                <code
                    class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-element-classlist" id="ref-for-dom-element-classlist">classList</a></code>
                是一个<code
                    class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#domtokenlist" id="ref-for-domtokenlist①">DOMTokenList</a></code>
                ，可添加/移除类名。
            </p>
        </div>
        <div class="example" id="example-866341e9">
            <a class="self-link" href="#example-866341e9"></a>
            <p>
                <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-sandbox" id="ref-for-attr-iframe-sandbox">sandbox</a></code>
                属性接收以空格分隔的沙箱标志。
                <code>iframe.sandbox</code>是<code
                    class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#domtokenlist" id="ref-for-domtokenlist②">DOMTokenList</a></code>
                ，可添加/移除沙箱标志。
            </p>
        </div>
        <p>与Web平台其它部分保持一致很重要，
            即使这意味着用其他字符分隔值。</p>
        <div class="example" id="example-03f014a3">
            <a class="self-link" href="#example-03f014a3"></a>
            <p>
                <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/input.html#attr-input-accept" id="ref-for-attr-input-accept">accept</a></code>
                属性使用逗号分隔列表，因为需要与
                <code><a data-link-type="http-header" href="https://www.rfc-editor.org/rfc/rfc9110.html#name-accept" id="ref-for-name-accept">Accept</a></code>
                HTTP头的语法保持一致。
            </p>
        </div>
        <p>无论语法如何，属性只应用于短列表。
            长列表不建议嵌入属性，
            而应用单独元素表示列表项（及元数据）。
            这些元素可以是目标元素的子元素，也可通过属性链接。</p>
        <div class="example" id="example-37a42680">
            <a class="self-link" href="#example-37a42680"></a>
            <p>
                <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/form-elements.html#the-select-element" id="ref-for-the-select-element①">select</a></code>
                的值列表由一系列
                <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/form-elements.html#the-option-element" id="ref-for-the-option-element">option</a></code>
                子元素组成。
                而为
                <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/input.html#the-input-element" id="ref-for-the-input-element③">input</a></code>
                元素提供推荐值时，用单独的
                <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/form-elements.html#the-datalist-element" id="ref-for-the-datalist-element">datalist</a></code>
                元素，通过
                <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/input.html#attr-input-list" id="ref-for-attr-input-list">list</a></code>
                属性链接。
            </p>
        </div>
        <div class="example" id="example-8e66c282">
            <a class="self-link" href="#example-8e66c282"></a>
            <p>
                <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/media.html#video" id="ref-for-video">video</a></code>
                或
                <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/media.html#audio" id="ref-for-audio">audio</a></code>
                的媒体源列表由一系列
                <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/embedded-content.html#the-source-element" id="ref-for-the-source-element">source</a></code>
                子元素组成。
            </p>
        </div>
        <p>极少数情况下需要其他权衡。</p>
        <div class="example" id="example-2fb31462">
            <a class="self-link" href="#example-2fb31462"></a>
            <p>
                <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/embedded-content.html#attr-img-srcset" id="ref-for-attr-img-srcset">srcset</a></code>
                属性允许逗号分隔的图片候选字符串列表。
                这种语法优于用子元素列表，因为
                <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/embedded-content.html#the-img-element" id="ref-for-the-img-element">img</a></code>
                元素是空元素，不允许子元素。
                由于每个列表项包含多个值，也无法用空格分隔语法。
            </p>
        </div>
        <h3 class="heading settled" data-level="3.3" id="avoid-html-parser-blocking"><span class="secno">3.3.
            </span><span class="content">不要阻塞HTML解析器</span><a class="self-link" href="#avoid-html-parser-blocking"></a>
        </h3>
        <p>确保你的设计不要求HTML解析器为处理外部资源而暂停。</p>
        <p>页面解析时，
            浏览器会发现页面所需资源，
            并决定并行加载优先级。
            若有资源阻止后续资源的发现，则解析流程会被打断。
            最坏情况下，浏览器串行下载资源，不能并行。
            最好情况下，浏览器基于猜测解析进行队列下载，但猜测可能出错。</p>
        <p>阻塞解析器的特性一般是为了在后续内容前向解析器注入新内容。
            比如传统的<code>&lt;script src="…"></code>元素可用<code>document.write(…)</code>注入解析器。
            由于上述性能问题，新的特性不能这样设计。</p>
        <h3 class="heading settled" data-level="3.4" id="avoid-render-blocking"><span class="secno">3.4. </span><span
                class="content">避免阻塞渲染的功能</span><a class="self-link" href="#avoid-render-blocking"></a></h3>
        <p>需要在页面渲染前加载资源或执行操作的功能，
            往往导致页面空白（或显示前一页），体验很差。</p>
        <p>仅在整体用户体验得到提升时才考虑这种功能。
            一个典型例子是为加载和处理样式表而阻塞渲染。
            否则就会有无样式内容闪现（FOUC），这是不希望看到的。</p>
        <p>另见<a href="#worker-only">§ 10.2.1 某些API应只暴露给dedicated worker</a>。</p>
        <h3 class="heading settled" data-level="3.5" id="html-idl-must-by-synced"><span class="secno">3.5. </span><span
                class="content">保持属性同步</span><a class="self-link" href="#html-idl-must-by-synced"></a>
        </h3>
        <p>新的内容属性应有同名IDL属性，并保持状态同步。
            若同步的IDL属性命名不一致，会造成混淆，应避免。</p>
        <div class="note" role="note">
            反方向并不成立。
            新的IDL属性不一定需要内容属性对应。
        </div>
        <div class="example" id="example-86fd7cdf"><a class="self-link" href="#example-86fd7cdf"></a>
            <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/input.html#the-input-element" id="ref-for-the-input-element④">input</a></code>的
            <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/input.html#attr-input-value" id="ref-for-attr-input-value">value</a></code>、
            <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/form-elements.html#the-option-element" id="ref-for-the-option-element①">option</a></code>的
            <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/form-elements.html#attr-option-selected" id="ref-for-attr-option-selected">selected</a></code>、
            以及
            <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/input.html#the-input-element" id="ref-for-the-input-element⑤">input</a></code>的
            <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/input.html#attr-input-checked" id="ref-for-attr-input-checked">checked</a></code>，
            对应的IDL属性并不是同名的，
            而是<code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/input.html#dom-input-defaultvalue" id="ref-for-dom-input-defaultvalue">defaultValue</a></code>、
            <code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/form-elements.html#dom-option-defaultselected" id="ref-for-dom-option-defaultselected">defaultSelected</a></code>、
            <code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/input.html#dom-input-defaultchecked" id="ref-for-dom-input-defaultchecked">defaultChecked</a></code>。
        </div>
        <h3 class="heading settled" data-level="3.6" id="naming-of-url-attributes"><span class="secno">3.6. </span><span
                class="content">包含URL属性应按主要用途命名</span><a class="self-link" href="#naming-of-url-attributes"></a></h3>
        <p>如果元素允许用户跳转到属性中的URL，属性名应为<code>href</code>，如
            <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/text-level-semantics.html#the-a-element" id="ref-for-the-a-element">a</a></code>
            元素的
            <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/links.html#attr-hyperlink-href" id="ref-for-attr-hyperlink-href">href</a></code>
            属性。
        </p>
        <p class="note" role="note"><span class="marker">注意：</span>回头看，
            <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/forms.html#the-form-element" id="ref-for-the-form-element">form</a></code>的
            <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#attr-fs-action" id="ref-for-attr-fs-action">action</a></code>
            属性其实应该叫<code>href</code>。
        </p>
        <p>如果元素会加载给定URL的资源，属性名应为<code>src</code>，如
            <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/embedded-content.html#the-img-element" id="ref-for-the-img-element①">img</a></code>
            元素的
            <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/embedded-content.html#attr-img-src" id="ref-for-attr-img-src">src</a></code>
            属性，或
            <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/scripting.html#script" id="ref-for-script①">script</a></code>
            元素的
            <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/scripting.html#attr-script-src" id="ref-for-attr-script-src">src</a></code>
            属性。
        </p>
        <p class="note" role="note"><span class="marker">注意：</span>HTML有一些遗留的不一致做法，不建议效仿，如
            <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/semantics.html#the-link-element" id="ref-for-the-link-element①">link</a></code>的
            <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/semantics.html#attr-link-href" id="ref-for-attr-link-href">href</a></code>
            属性可能用于跳转，也可能用于加载资源，取决于
            <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/semantics.html#attr-link-rel" id="ref-for-attr-link-rel">rel</a></code>
            属性的值。
        </p>
        <p>若属性标识的URL只是元素用途的辅助信息，如
            <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/media.html#video" id="ref-for-video①">video</a></code>的
            <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/media.html#attr-video-poster" id="ref-for-attr-video-poster">poster</a></code>、
            <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/text-level-semantics.html#the-q-element" id="ref-for-the-q-element">q</a></code>的
            <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/text-level-semantics.html#attr-q-cite" id="ref-for-attr-q-cite">cite</a></code>、
            或
            <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/text-level-semantics.html#the-a-element" id="ref-for-the-a-element①">a</a></code>的
            <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/links.html#ping" id="ref-for-ping">ping</a></code>，
            则应按语义命名该属性。
        </p>
        <p class="note" role="note"><span class="marker">注意：</span>含有URL的属性在IDL中应用<code
                class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString">USVString</a></code>表示；
            见<a href="#idl-string-types">§ 8.2 合理表示字符串</a>。</p>
        <h3 class="heading settled" data-level="3.7" id="html-overloading"><span class="secno">3.7. </span><span
                class="content">每个HTML元素只赋予单一用途</span><a class="self-link" href="#html-overloading"></a></h3>
        <p>每个HTML元素都应有明确的用途。
            HTML属性可修饰元素语义，
            但不应根本改变其用途。</p>
        <p>与其定义能以不同模式运行的元素，
            不如为每种模式分别设立不同元素。
            这样更便于作者使用。</p>
        <div class="example" id="example-416870a2"><a class="self-link" href="#example-416870a2"></a>
            <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/input.html#the-input-element" id="ref-for-the-input-element⑥">input</a></code>
            元素通过
            <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/input.html#attr-input-type" id="ref-for-attr-input-type">type</a></code>
            属性切换不同模式。
            虽然这些模式都用于获取用户输入，
            但目标太宽泛。
            这些模式的语义其实可以用不同元素名表达得更清晰。
        </div>
        <p>通过属性在同一元素上过载语义以选择不同行为，
            只有在无论属性值为何，元素用途都不变时才适用。</p>
        <div class="example" id="example-3eddc3fd"><a class="self-link" href="#example-3eddc3fd"></a>
            <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/form-elements.html#the-textarea-element" id="ref-for-the-textarea-element">textarea</a></code>
            元素与
            <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/input.html#the-input-element" id="ref-for-the-input-element⑦">input</a></code>
            元素且
            <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/input.html#attr-input-type" id="ref-for-attr-input-type①">type</a></code>
            为<code>"text"</code>时其实可以用同一个元素，因为差别并不大。
        </div>
        <p>反例包括过度专用和依赖上下文确定语义的元素。</p>
        <div class="example" id="example-36d97918"><a class="self-link" href="#example-36d97918"></a>
            已废弃的
            <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/obsolete.html#acronym" id="ref-for-acronym">acronym</a></code>
            元素实际上与
            <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/text-level-semantics.html#the-abbr-element" id="ref-for-the-abbr-element">abbr</a></code>
            元素重复，属于过度专用。
        </div>
        <div class="example" id="example-2e98e252"><a class="self-link" href="#example-2e98e252"></a>
            <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/embedded-content.html#the-source-element" id="ref-for-the-source-element①">source</a></code>
            元素可因上下文不同而有不同用途。
            <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/embedded-content.html#the-source-element" id="ref-for-the-source-element②">source</a></code>
            元素并非独立存在，其语义由父元素决定。
        </div>
        <h2 class="heading settled" data-level="4" id="css"><span class="secno">4. </span><span
                class="content">层叠样式表（CSS）</span><a class="self-link" href="#css"></a></h2>
        <p>本节详细介绍通过CSS暴露的功能的设计原则。</p>
        <h3 class="heading settled" data-level="4.1" id="css-property-separation"><span class="secno">4.1. </span><span
                class="content">根据层叠需求分离CSS属性</span><a class="self-link" href="#css-property-separation"></a></h3>
        <p>根据哪些值适合独立设置，决定应将哪些值分组为同一个CSS属性，哪些应单独设为不同属性。</p>
        <p><a href="https://www.w3.org/TR/2011/REC-CSS2-20110607/cascade.html#cascade">CSS层叠</a>
            允许不同规则或不同样式表中的<a href="https://www.w3.org/TR/2011/REC-CSS2-20110607/syndata.html#declaration">声明</a>
            相互覆盖。
            应同时被覆盖的一组值应归为同一属性，以便一同层叠。
            同理，应能独立覆盖的值应分成不同属性。</p>
        <div class="example" id="example-e15a5479">
            <a class="self-link" href="#example-e15a5479"></a>例如，<a class="property css" data-link-type="property"
                href="https://drafts.csswg.org/css-inline-3/#propdef-initial-letter"
                id="ref-for-propdef-initial-letter">initial-letter</a>属性的“size”和“sink”方面应归为一个属性，
            因为它们属于同一个首字母效果（如首字下沉、上浮等）。
            <p>而<a class="property css" data-link-type="property"
                    href="https://drafts.csswg.org/css-inline-3/#propdef-initial-letter-align"
                    id="ref-for-propdef-initial-letter-align">initial-letter-align</a>属性则应单独设立，
                因为它用于设置整个文档的对齐策略，是一种通用样式选择，
                并与文档所用的书写体系（如拉丁、斯拉夫、阿拉伯）相关。</p>
        </div>
        <h3 class="heading settled" data-level="4.2" id="css-inherited-or-not"><span class="secno">4.2. </span><span
                class="content">合理选择CSS属性是否继承</span><a class="self-link" href="#css-inherited-or-not"></a></h3>
        <p>根据属性的效果在祖先和后代元素同时设置时，是应被覆盖还是叠加，决定该属性是否<a
                href="https://drafts.csswg.org/css-cascade-3/#inherited-property">继承</a>。</p>
        <p>如果在后代元素上设置该属性需覆盖（而非叠加）祖先设置的效果，则该属性应继承。</p>
        <p>如果后代元素上的设置是独立的效果，会在祖先设置基础上叠加，则该属性<strong>不应</strong>继承。</p>
        <p>如某非继承属性的规范要求处理元素时查找祖先属性值（可能还很慢），这是“代码异味”，说明该属性其实应该继承。
            如某继承属性的规范要求处理元素时忽略与父元素相同的属性值，也是“代码异味”，说明该属性其实不该继承。</p>
        <div class="note" role="note">
            若属性影响文本，
            通常后代需覆盖（而非叠加）祖先设置的效果，
            因此该属性应继承。
            这也是为了保持设计原则：在文本周围插入无样式内联元素不应改变文本外观。
        </div>
        <div class="example" id="example-58897411">
            <a class="self-link" href="#example-58897411"></a>
            例如，<a class="property css" data-link-type="property"
                href="https://drafts.csswg.org/css-backgrounds-3/#propdef-background-image"
                id="ref-for-propdef-background-image">background-image</a>属性<strong>不</strong>继承。
            <p>如果<a class="property css" data-link-type="property"
                    href="https://drafts.csswg.org/css-backgrounds-3/#propdef-background-image"
                    id="ref-for-propdef-background-image①">background-image</a>属性被继承，
                则规范需增加不少复杂度以避免半透明图片在每个后代元素上重复显示。
                这种复杂度可能要求属性值与父元素一致时行为不同，
                这就属于上述“代码异味”，说明该属性其实不该继承。</p>
        </div>
        <div class="example" id="example-51dea7ed">
            <a class="self-link" href="#example-51dea7ed"></a>
            另一个例子是<a class="property css" data-link-type="property"
                href="https://drafts.csswg.org/css-fonts-4/#propdef-font-size"
                id="ref-for-propdef-font-size">font-size</a>属性，<strong>会</strong>继承。
            它设置文本字体大小，
            并会对所有未单独声明<a class="property css" data-link-type="property"
                href="https://drafts.csswg.org/css-fonts-4/#propdef-font-size"
                id="ref-for-propdef-font-size①">font-size</a>的后代元素继续生效。
            <p>若<a class="property css" data-link-type="property"
                    href="https://drafts.csswg.org/css-fonts-4/#propdef-font-size"
                    id="ref-for-propdef-font-size②">font-size</a>属性不继承，
                则初始值可能需要沿祖先链查找最近的非默认值祖先。
                这也是上述“代码异味”，说明该属性其实应该继承。</p>
        </div>
        <h3 class="heading settled" data-level="4.3" id="css-computed-value"><span class="secno">4.3. </span><span
                class="content">根据继承方式选择计算值类型</span><a class="self-link" href="#css-computed-value"></a></h3>
        <p>根据CSS属性如何<a data-link-type="dfn" href="https://drafts.csswg.org/css-cascade-5/#css-inheritance"
                id="ref-for-css-inheritance">继承</a>（包括依赖其他属性的情况）选择其<a data-link-type="dfn"
                href="https://drafts.csswg.org/css-cascade-5/#computed-value" id="ref-for-computed-value">计算值</a>类型。</p>
        <p>继承意味着元素获得与父元素相同的计算值。
            所以在到达计算值前的处理步骤会影响被继承的值，
            之后的步骤（如<a data-link-type="dfn" href="https://drafts.csswg.org/css-cascade-5/#used-value"
                id="ref-for-used-value">used value</a>）则不会。</p>
        <div class="note" role="note">
            注意：<a data-link-type="dfn" href="https://drafts.csswg.org/css-cascade-5/#computed-value"
                id="ref-for-computed-value①">计算值</a>不等同于<a data-link-type="dfn"
                href="https://drafts.csswg.org/cssom-1/#resolved-value" id="ref-for-resolved-value">解析值</a>，后者由<code
                class="idl"><a data-link-type="idl" href="https://drafts.csswg.org/cssom-1/#dom-window-getcomputedstyle" id="ref-for-dom-window-getcomputedstyle">getComputedStyle()</a></code>方法返回。
        </div>
        <div class="example" id="example-bdfc8e34">
            <a class="self-link" href="#example-bdfc8e34"></a>
            例如，<a class="property css" data-link-type="property"
                href="https://drafts.csswg.org/css2/#propdef-line-height"
                id="ref-for-propdef-line-height">line-height</a>属性可接受<a class="production css" data-link-type="type"
                href="https://drafts.csswg.org/css-values-4/#number-value" id="ref-for-number-value">&lt;number></a>值，
            如<a class="css" data-link-type="propdesc" href="https://drafts.csswg.org/css2/#propdef-line-height"
                id="ref-for-propdef-line-height①">line-height: 1.4</a>。
            该值表示字体大小的倍数，例如<a class="property css" data-link-type="property"
                href="https://drafts.csswg.org/css-fonts-4/#propdef-font-size"
                id="ref-for-propdef-font-size③">font-size</a>为<span class="css">20px</span>时，
            行高的<a data-link-type="dfn" href="https://drafts.csswg.org/css-cascade-5/#actual-value"
                id="ref-for-actual-value">实际值</a>为<span class="css">28px</span>。
            <p>但此时<a data-link-type="dfn" href="https://drafts.csswg.org/css-cascade-5/#computed-value"
                    id="ref-for-computed-value②">计算值</a>是<a class="production css" data-link-type="type"
                    href="https://drafts.csswg.org/css-values-4/#number-value"
                    id="ref-for-number-value①">&lt;number></a> <span class="css">1.4</span>，
                不是<a class="production css" data-link-type="type"
                    href="https://drafts.csswg.org/css-values-4/#length-value" id="ref-for-length-value">&lt;length></a>
                <span class="css">28px</span>。
                （<a data-link-type="dfn" href="https://drafts.csswg.org/css-cascade-5/#used-value"
                    id="ref-for-used-value①">used value</a>为<span class="css">28px</span>。）
            </p>
            <p><a class="property css" data-link-type="property"
                    href="https://drafts.csswg.org/css2/#propdef-line-height"
                    id="ref-for-propdef-line-height②">line-height</a>属性可被继承到拥有不同<a class="property css"
                    data-link-type="property" href="https://drafts.csswg.org/css-fonts-4/#propdef-font-size"
                    id="ref-for-propdef-font-size⑤">font-size</a>的元素，
                这些元素上依赖<a class="property css" data-link-type="property"
                    href="https://drafts.csswg.org/css2/#propdef-line-height"
                    id="ref-for-propdef-line-height③">line-height</a>的属性，
                必须使用自身相关的<a class="property css" data-link-type="property"
                    href="https://drafts.csswg.org/css-fonts-4/#propdef-font-size"
                    id="ref-for-propdef-font-size⑥">font-size</a>，
                而不是继承来源元素的<a class="property css" data-link-type="property"
                    href="https://drafts.csswg.org/css-fonts-4/#propdef-font-size"
                    id="ref-for-propdef-font-size⑦">font-size</a>。
            </p>
            <pre class="highlight"><c- p>&lt;</c-><c- f>body</c-> <c- e>style</c-><c- o>=</c-><c- s>"font-size: 20px; line-height: 1.4"</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>p</c-><c- p>></c->这段正文行高为28px。<c- p>&lt;/</c-><c- f>p</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>h2</c-> <c- e>style</c-><c- o>=</c-><c- s>"font-size: 200%"</c-><c- p>></c->
    这个标题行高为56px，不是28px，即使line-height声明在body上。
    这意味着40px字体不会溢出行高。
  <c- p>&lt;/</c-><c- f>h2</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>body</c-><c- p>></c->
</pre>
            <p>这些数字值通常是<a class="property css" data-link-type="property"
                    href="https://drafts.csswg.org/css2/#propdef-line-height"
                    id="ref-for-propdef-line-height⑤">line-height</a>的首选值，因为它们比长度值继承性更好。</p>
        </div>
        <p>另见：</p>
        <ul>
            <li data-md>
                <p><a href="https://wiki.csswg.org/spec/computed-values">计算值模式</a></p>
        </ul>
        <h3 class="heading settled" data-level="4.4" id="css-naming"><span class="secno">4.4. </span><span
                class="content">合理命名CSS属性与值</span><a class="self-link" href="#css-naming"></a></h3>
        <p>CSS属性名通常是名词，其值名通常是形容词（有时是名词）。</p>
        <p>属性和值中的词用连字符分隔。一般避免缩写。</p>
        <p>尽量用词根而非带语法前后缀的形式（如用“size”而非“sizing”）。</p>
        <p>属性的值列表应选用可扩展方式，以便后续添加新值。
            避免用<span class="css">yes</span>、<span class="css">no</span>、<a class="css" data-link-type="maybe"
                href="https://drafts.csswg.org/mediaqueries-5/#valdef-custom-media-true"
                id="ref-for-valdef-custom-media-true">true</a>、<a class="css" data-link-type="maybe"
                href="https://drafts.csswg.org/mediaqueries-5/#valdef-custom-media-false"
                id="ref-for-valdef-custom-media-false">false</a>等或等价复杂词。</p>
        <p>避免在属性名中用“mode”或“state”，因为属性本身就是设置模式或状态。</p>
        <p>有关命名的一般建议见<a href="#naming-is-hard">§ 12 命名原则</a>。</p>
        <h3 class="heading settled" data-level="4.5" id="css-content-should-be-visible"><span class="secno">4.5.
            </span><span class="content">内容默认应可见且可访问</span><a class="self-link"
                href="#css-content-should-be-visible"></a></h3>
        <p>设计CSS属性或CSS布局系统（通常为<code>display</code>属性的值）时，
            应确保内容默认可见、可访问且可用。</p>
        <div class="example" id="example-c09bf2e2"><a class="self-link" href="#example-c09bf2e2"></a>
            例如，所有CSS布局系统的默认行为都不会导致内容被裁剪、内容重叠或内容无法滚动到达。
            只有在明确使用特定CSS特性（如<code>overflow: hidden</code>或<code>left: -40em</code>）时才可能出现这种情况。
            不应因默认行为（如<code>display: flex</code>或<code>position: relative</code>）而导致此类问题。
        </div>
        <h2 class="heading settled" data-level="5" id="js"><span class="secno">5. </span><span
                class="content">JavaScript语言</span><a class="self-link" href="#js"></a></h2>
        <h3 class="heading settled" data-level="5.1" id="js-only"><span class="secno">5.1. </span><span
                class="content">Web API使用JavaScript实现</span><a class="self-link" href="#js-only"></a></h3>
        <p>设计Web的命令式API时，应使用JavaScript。
            可以充分利用语言特有的语义和约定，无需通用化。</p>
        <div class="example" id="example-1f61e97b">
            <a class="self-link" href="#example-1f61e97b"></a>
            例如，
            <code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/custom-elements.html#dom-customelementregistry-define" id="ref-for-dom-customelementregistry-define">CustomElementRegistry.define()</a></code>
            方法接受
            <a href="https://tc39.es/ecma262/#sec-static-semantics-constructormethod">Constructor Method</a>引用。
            <p>这利用了JavaScript最近引入的类机制，以及方法引用在JavaScript中易于使用的事实。</p>
        </div>
        <div class="note" role="note">
            JavaScript以<a data-link-type="biblio" href="#biblio-ecmascript"
                title="ECMAScript Language Specification">[ECMASCRIPT]</a>标准化。
        </div>
        <div class="note" role="note">
            <a data-link-type="biblio" href="#biblio-webidl"
                title="Web IDL Standard">[WEBIDL]</a>有单独的“ECMAScript绑定”章节，但这并不意味着Web IDL要支持其它编程语言的绑定。
        </div>
        <h3 class="heading settled" data-level="5.2" id="js-rtc"><span class="secno">5.2. </span><span
                class="content">保持运行至完成语义</span><a class="self-link" href="#js-rtc"></a></h3>
        <p>如有状态变化源自JavaScript执行上下文外，应在任务之间将变化传递到JavaScript，
            如<a href="https://html.spec.whatwg.org/multipage/webappapis.html#queuing-tasks">排队任务</a>，
            或作为<a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/webappapis.html#update-the-rendering"
                id="ref-for-update-the-rendering">更新渲染</a>的一部分。</p>
        <p>与C++、Rust等低级语言不同，
            JavaScript历来只允许一次执行一段代码。
            因此，JavaScript作者默认函数运行期间数据不会意外变化。</p>
        <p>非开发者操作导致的变化和异步变化，
            不应在其他JavaScript执行期间发生，包括<a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/webappapis.html#microtask"
                id="ref-for-microtask">微任务</a>之间。</p>
        <div class="example" id="example-6f007b39">
            <a class="self-link" href="#example-6f007b39"></a>
            在同步执行（如<code>while</code>循环）或<code>await</code>已解析<code>Promise</code>后，开发者<em>通常</em>不会预期如下情况：
            <ul>
                <li data-md>
                    <p>HTML解析器从网络加载新内容导致DOM更新</p>
                <li data-md>
                    <p><code
                            class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/embedded-content.html#dom-img-width" id="ref-for-dom-img-width">img.width</a></code>
                        因图片数据加载而变化</p>
                <li data-md>
                    <p><code
                            class="idl"><a data-link-type="idl" href="https://w3c.github.io/gamepad/#dom-gamepad" id="ref-for-dom-gamepad">Gamepad</a></code>
                        按钮状态变化</p>
                <li data-md>
                    <p><code
                            class="idl"><a data-link-type="idl" href="https://drafts.csswg.org/cssom-view-1/#dom-element-scrolltop" id="ref-for-dom-element-scrolltop">scrollTop</a></code>
                        变化，即使视觉上可滚动</p>
                <li data-md>
                    <p>同步方法因异步状态变化而表现不同。例如，若<code
                            class="idl"><a data-link-type="idl" href="https://w3c.github.io/web-locks/#lockmanager" id="ref-for-lockmanager">LockManager</a></code>
                        有同步方法，其行为取决于其它窗口的并发调用。</p>
            </ul>
            <p>这些变化不是当前脚本造成，因此不应在当前任务期间发生。</p>
        </div>
        <p>数据可由开发者操作同步更新。</p>
        <div class="example" id="example-c444e540"><a class="self-link" href="#example-c444e540"></a>
            <code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-childnode-remove" id="ref-for-dom-childnode-remove">node.remove()</a></code>
            会同步改变DOM，且可立即观察到。
        </div>
        <p>少数情况可违反此规则：</p>
        <ul>
            <li data-md>
                <p>获取当前时间，如<code
                        class="idl"><a data-link-type="idl" href="https://tc39.es/ecma262/multipage/numbers-and-dates.html#sec-date.now" id="ref-for-sec-date.now">Date.now()</a></code>和<code
                        class="idl"><a data-link-type="idl" href="https://w3c.github.io/hr-time/#dom-performance-now" id="ref-for-dom-performance-now">performance.now()</a></code>，但也可用如<code
                        class="idl"><a data-link-type="idl" href="https://drafts.csswg.org/web-animations-2/#dom-animationtimeline-currenttime" id="ref-for-dom-animationtimeline-currenttime">document.timeline.currentTime</a></code>的任务范围一致时间。
                </p>
            <li data-md>
                <p>用于中断同步工作的函数，如<code
                        class="idl"><a data-link-type="idl" href="https://w3c.github.io/requestidlecallback/#dom-idledeadline-timeremaining" id="ref-for-dom-idledeadline-timeremaining">IdleDeadline.timeRemaining()</a></code>。
                </p>
            <li data-md>
                <p>用于保护用户防止UI突变的状态，如<a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/interaction.html#transient-activation"
                        id="ref-for-transient-activation">transient activation</a>。注意<code
                        class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/interaction.html#dom-useractivation-isactive" id="ref-for-dom-useractivation-isactive">navigator.userActivation.isActive</a></code>违反了<a
                        href="#attributes-like-data">此场景应用方法的建议</a>。</p>
        </ul>
        <h3 class="heading settled" data-level="5.3" id="js-gc"><span class="secno">5.3. </span><span
                class="content">不暴露垃圾回收机制</span><a class="self-link" href="#js-gc"></a></h3>
        <p>确保你的JavaScript Web API不会让作者获知垃圾回收的时机。</p>
        <p>不同用户代理垃圾回收时机不同，且随性能优化可能变化。
            若API暴露垃圾回收时机，程序在不同环境下会表现不同，
            作者需额外编写兼容代码。
            若大量代码依赖特定时机实现，也会让用户代理更难优化垃圾回收策略。</p>
        <p>因此，不应暴露任何作为弱引用的API，如属性因垃圾回收变为<code class="highlight"><c- kc>null</c-></code>。
            JavaScript代码中的对象和数据生命周期应可预测。</p>
        <div class="example" id="example-fecc1403">
            <a class="self-link" href="#example-fecc1403"></a>
            <code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-document-getelementsbytagname" id="ref-for-dom-document-getelementsbytagname">getElementsByTagName</a></code>
            返回一个<code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#htmlcollection" id="ref-for-htmlcollection">HTMLCollection</a></code>
            对象，
            若对同一Document对象用同一标签名多次调用，可能重用该对象。
            实际上，
            只有对象未被垃圾回收才会返回同一对象。
            因此，行为依赖垃圾回收时机。
            <p>若<code
                    class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-document-getelementsbytagname" id="ref-for-dom-document-getelementsbytagname①">getElementsByTagName</a></code>
                现在设计，建议要么始终重用结果，要么每次创建新<code
                    class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#htmlcollection" id="ref-for-htmlcollection①">HTMLCollection</a></code>。
            </p>
        </div>
        <p><code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-document-getelementsbytagname" id="ref-for-dom-document-getelementsbytagname②">getElementsByTagName</a></code>
            并未指出其行为依赖垃圾回收时机。
            相比之下，像<code
                class="idl"><a data-link-type="idl" href="https://tc39.es/ecma262/multipage/managing-memory.html#sec-weak-ref-objects" id="ref-for-sec-weak-ref-objects">WeakRef</a></code>
            或<code
                class="idl"><a data-link-type="idl" href="https://tc39.es/ecma262/multipage/managing-memory.html#sec-finalization-registry-objects" id="ref-for-sec-finalization-registry-objects">FinalizationRegistry</a></code>等API则明确让作者预期与垃圾回收的关系。
        </p>
        <h2 class="heading settled" data-level="6" id="api-surface"><span class="secno">6. </span><span
                class="content">设计JavaScript API</span><a class="self-link" href="#api-surface"></a></h2>
        <h3 class="heading settled" data-level="6.1" id="webidl-dictionaries-interfaces-namespaces"><span
                class="secno">6.1. </span><span class="content">合理使用WebIDL字典、接口和命名空间</span><a class="self-link"
                href="#webidl-dictionaries-interfaces-namespaces"></a></h3>
        <p>为新API选择合适的WebIDL机制。</p>
        <p>WebIDL提供多种结构定义Web API。
            字典、接口和命名空间各自适合不同用途。</p>
        <p>目标是确保API符合人体工程学、一致且自然，避免“伪类”或无功能的类等陷阱。</p>
        <h4 class="no-num no-toc heading settled" id="dictionaries-for-configuration"><span
                class="content">配置或只读输入数据请用字典</span><a class="self-link" href="#dictionaries-for-configuration"></a>
        </h4>
        <p>当API部分表示临时数据，尤其是接受一组参数、配置或选项时，选用字典。</p>
        <p>字典适用于未持久存储或未变更的数据；仅在调用时使用。</p>
        <p>例如，Web Share中的<a href="https://www.w3.org/TR/web-share/#dom-sharedata"><code>ShareData</code></a>成员：</p>
        <pre class="language-WebIDL highlight"><c- k>dictionary</c-> <c- nc>ShareData</c-> <c- p>{</c->
  <c- b>USVString</c-> <c- g>title</c-><c- p>;</c->
  <c- b>USVString</c-> <c- g>text</c-><c- p>;</c->
  <c- b>USVString</c-> <c- g>url</c-><c- p>;</c->
<c- p>};</c->
</pre>
        <p>常见用法如下：</p>
        <pre class="highlight">await navigator.share({text: "Text being shared" });
</pre>
        <p>字典易于扩展，后续可方便添加可选字段。
            字典成员默认可选，需时可标记为<code>required</code>。</p>
        <p>字典非常符合JavaScript习惯（idiomatic）。
            直接传<code>{ ... }</code>是JS中最自然的配置方式。</p>
        <p>字典因用户代理处理方式也较具前向兼容性。
            未实现的字典成员会被忽略，新成员可无缝添加，旧代码不受影响。</p>
        <p>字典适用于生命周期中无需按类型区分的对象（如<code>instanceof</code>检查只会是<code>Object</code>）。</p>
        <p>字典是“值传递”给方法（即被复制）。
            浏览器引擎从JS对象转换到WebIDL时会剔除未知成员，传入API后修改值无效。</p>
        <p>再举<code>ShareData</code>字典例：</p>
        <pre class="language-JS highlight"><c- a>const</c-> data <c- o>=</c-> <c- p>{</c->
    <c- u>"text"</c-><c- o>:</c-> <c- u>"Text being shared"</c-><c- p>,</c->
    <c- c1>// 浏览器未实现"whatever"参数时会忽略</c->
    <c- u>"whatever"</c-><c- o>:</c-> <c- mf>123</c-><c- p>,</c->
<c- p>};</c->
<c- a>let</c-> p <c- o>=</c-> navigator<c- p>.</c->share<c- p>(</c->data<c- p>);</c->

<c- c1>// 调用.share()后再修改无效</c->
data<c- p>.</c->text <c- o>=</c-> <c- u>"New text"</c-><c- p>;</c->
</pre>
        <h4 class="no-num no-toc heading settled" id="interface-for-functionality-state-identity"><span
                class="content">有功能、状态与身份请选接口</span><a class="self-link"
                href="#interface-for-functionality-state-identity"></a></h4>
        <p>接口大致等价于JavaScript类。
            当规范需要把状态（包括可见属性和内部“槽”）与操作（方法）绑定在一起时，用接口。</p>
        <p>接口与字典不同：</p>
        <ul>
            <li data-md>
                <p>可有带状态的实例，</p>
            <li data-md>
                <p>可有只读属性，</p>
            <li data-md>
                <p>赋值可有副作用，</p>
            <li data-md>
                <p>可检查对象身份（即可用<code>instanceof</code>判断全局范围的某类实例），</p>
        </ul>
        <p>定义接口还会暴露到全局作用域，便于规范静态方法。例如URL接口的<code>canParse()</code>静态方法：</p>
        <pre class="language-JS highlight"><c- k>if</c-> <c- p>(</c->URL<c- p>.</c->canParse<c- p>(</c->someURL<c- p>))</c-> <c- p>{</c->
    <c- c1>// 处理逻辑...</c->
<c- p>}</c->
</pre>
        <p>有状态接口应有构造函数，若类无状态则不应添加构造函数，
            否则是“伪类”（实例没做静态方法不能做的事）。如<code>DOMParser</code>或<code>DOMImplementation</code>就是伪类示例。</p>
        <h4 class="no-num no-toc heading settled" id="interface-serializer"><span class="content">为接口数据提供序列化方法</span><a
                class="self-link" href="#interface-serializer"></a></h4>
        <p>添加序列化方法，把接口实例转换为多数应用可用的形式。</p>
        <p><code>.toJSON()</code>方法让接口实例可生成有用的JSON序列化；
            <code>.toBlob()</code>可提取接口的二进制表示。
        </p>
        <p>这样更自然与API配合使用。例如<code>GeolocationPosition</code>接口提供<code>toJSON()</code>方法：</p>
        <pre class="language-JS highlight"><c- a>const</c-> position <c- o>=</c-> <c- k>await</c-> <c- ow>new</c-> Promise<c- p>((</c->resolve<c- p>,</c-> reject<c- p>)</c-> <c- p>=></c-> <c- p>{</c->
    navigator<c- p>.</c->geolocation<c- p>.</c->getCurrentPosition<c- p>(</c->resolve<c- p>,</c-> reject<c- p>);</c->
<c- p>});</c->

<c- a>const</c-> message <c- o>=</c-> JSON<c- p>.</c->stringify<c- p>({</c->
    user<c- o>:</c-> userId<c- p>,</c->
    time<c- o>:</c-> Date<c- p>.</c->now<c- p>(),</c->
    position<c- p>,</c-> <c- c1>// .stringify()会自动调用.toJSON()</c->
<c- p>});</c->
</pre>
        <h4 class="no-num no-toc heading settled" id="namespace-to-avoid-fake-classes"><span
                class="content">行为型工具请用命名空间避免“伪类”</span><a class="self-link"
                href="#namespace-to-avoid-fake-classes"></a></h4>
        <p>命名空间用于分组一组静态属性和方法，没有原型。
            例如JS中的<code>Math</code>、<code>Intl</code>、<code>Atomics</code>和<code>Console</code>对象。</p>
        <p>只有一两个小静态函数时，新建命名空间未免小题大做，挂到已有对象可能更合适。</p>
        <p>反之，命名空间过大或过宽时应优化组织或分区。</p>
        <h4 class="no-num no-toc heading settled" id="pseudo-namespaces"><span class="content">“伪命名空间”</span><a
                class="self-link" href="#pseudo-namespaces"></a></h4>
        <p>WebIDL接口可有属性，可通过非可构造接口属性创建“伪命名空间”。</p>
        <p>典型例子是<code>navigator</code>对象的各种属性。
            <code>navigator</code>本身有接口定义（<a href="https://html.spec.whatwg.org/#navigator"><code>Navigator</code></a>），
            其属性又通过接口实例暴露进一步功能。
        </p>
        <p>例如：</p>
        <ul>
            <li data-md>
                <p><code>navigator.credentials</code> - Credentials Management API的<code>CredentialsContainer</code>接口。
                </p>
            <li data-md>
                <p><code>navigator.geolocation</code> - Geolocation规范的<code>Geolocation</code>接口。</p>
            <li data-md>
                <p><code>navigator.permissions</code> - Permissions规范的<code>Permissions</code>接口。</p>
        </ul>
        <p>当你需要引用某实例（如特定浏览环境下的权限<code>navigator.permissions</code>），
            即使该实例无可见状态时，伪命名空间很有用。</p>
        <h3 class="heading settled" data-level="6.2" id="attributes-like-data"><span class="secno">6.2. </span><span
                class="content">属性应像数据属性一样工作</span><a class="self-link" href="#attributes-like-data"></a></h3>
        <p><a data-link-type="biblio" href="#biblio-webidl" title="Web IDL Standard">[WEBIDL]</a>属性应表现为简单JS对象属性。</p>
        <p>实际上IDL属性是访问器属性（getter/setter）。
            要让它们像JS对象属性：</p>
        <ul>
            <li data-md>
                <p>getter不能有可观察的副作用。</p>
            <li data-md>
                <p>getter不应执行复杂操作。</p>
            <li data-md>
                <p>保证<code
                        class="highlight">obj<c- p>.</c->attribute <c- o>===</c-> obj<c- p>.</c->attribute</code>总为真，不能每次返回新值。
                </p>
            <li data-md>
                <p>尽量保证<code class="highlight">obj<c- p>.</c->attribute <c- o>=</c-> x</code>后<code
                        class="highlight">obj<c- p>.</c->attribute <c- o>===</c-> x</code>为真（如需转换则不强求）。</p>
        </ul>
        <p>如属性不这样工作，建议用方法替代。</p>
        <div class="example" id="example-92914693"><a class="self-link" href="#example-92914693"></a>
            例如<code
                class="idl"><a data-link-type="idl" href="https://drafts.csswg.org/cssom-view-1/#dom-htmlelement-offsettop" id="ref-for-dom-htmlelement-offsettop">offsetTop</a></code>
            会执行布局，过程可能复杂且耗时。
            应该定义为类似<code
                class="idl"><a data-link-type="idl" href="https://drafts.csswg.org/cssom-view-1/#dom-element-getboundingclientrect" id="ref-for-dom-element-getboundingclientrect">getBoundingClientRect()</a></code>的方法。
        </div>
        <h3 class="heading settled" data-level="6.3" id="live-vs-static"><span class="secno">6.3. </span><span
                class="content">考虑对象应为实时还是静态</span><a class="self-link" href="#live-vs-static"></a></h3>
        <p>API如访问表示内部状态的对象，需决定该对象是否随状态变化而实时更新。</p>
        <p>始终表示当前状态的是<dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="live-object">实时对象</dfn>，
            只表示创建时状态的是<dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="static-object">静态对象</dfn>。</p>
        <h4 class="no-num no-toc heading settled" id="live-objects"><span class="content">实时对象</span><a
                class="self-link" href="#live-objects"></a></h4>
        <p>如对象允许作者变更内部状态，应为实时对象。
            例如DOM的<code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#node" id="ref-for-node">Node</a></code>
            都是实时对象，便于作者按当前状态修改文档。</p>
        <p>实时对象属性可在访问时计算，而非创建时。
            若数据计算复杂，实时对象无需提前算好所有数据。</p>
        <p>实时对象也可节省内存，无需为静态版本复制数据。</p>
        <h4 class="no-num no-toc heading settled" id="static-objects"><span class="content">静态对象</span><a
                class="self-link" href="#static-objects"></a></h4>
        <p>如对象表示可能变化的列表，多数情况下应为静态对象。这样遍历列表时无需担心中途列表变化。</p>
        <div class="example" id="example-05004f68">
            <a class="self-link" href="#example-05004f68"></a>
            <code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-document-getelementsbytagname" id="ref-for-dom-document-getelementsbytagname③">getElementsByTagName</a></code>
            返回实时对象表示列表，因此遍历时需谨慎：
            <pre class="language-js highlight"><c- a>let</c-> list <c- o>=</c-> document<c- p>.</c->getElementsByTagName<c- p>(</c-><c- u>"td"</c-><c- p>);</c->
<c- k>for</c-> <c- p>(</c-><c- a>let</c-> i <c- o>=</c-> <c- mf>0</c-><c- p>;</c-> i <c- o>&lt;</c-> list<c- p>.</c->length<c- p>;</c-> i<c- o>++</c-><c- p>)</c-> <c- p>{</c->
    <c- a>let</c-> td <c- o>=</c-> list<c- p>[</c->i<c- p>];</c->
    <c- a>let</c-> tr <c- o>=</c-> document<c- p>.</c->createElement<c- p>(</c-><c- u>"tr"</c-><c- p>);</c->
    tr<c- p>.</c->innerHTML <c- o>=</c-> td<c- p>.</c->outerHTML<c- p>;</c->
    <c- c1>// 此操作会把td从列表移除，导致遍历结果不可预测</c->
    td<c- p>.</c->parentNode<c- p>.</c->replaceChild<c- p>(</c->tr<c- p>,</c-> td<c- p>);</c->
<c- p>}</c->
</pre>
            <p><code
                    class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-parentnode-queryselectorall" id="ref-for-dom-parentnode-queryselectorall">querySelectorAll()</a></code>
                会返回静态对象，正是因为规范作者发现<code
                    class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-document-getelementsbytagname" id="ref-for-dom-document-getelementsbytagname④">getElementsByTagName</a></code>导致问题。
            </p>
            <p><code
                    class="idl"><a data-link-type="idl" href="https://url.spec.whatwg.org/#urlsearchparams" id="ref-for-urlsearchparams">URLSearchParams</a></code>
                虽然表示列表，但不是静态对象，因为它用于变更URL的查询字符串。</p>
        </div>
        <p class="note" role="note"><span
                class="marker">注意：</span>对<em>maplike</em>和<em>setlike</em>类型此建议未必适用，因为这些类型设计时就考虑了迭代时变更。</p>
        <p>如无法在访问时计算属性，静态对象可避免为未使用的对象持续更新直至被回收。</p>
        <p>如静态对象表示频繁变化的状态，应通过方法返回，而不是作为属性。</p>
        <p>另见：</p>
        <ul>
            <li data-md>
                <p><a href="#attributes-like-data">§ 6.2 属性应像数据属性一样工作</a></p>
        </ul>
        <h3 class="heading settled" data-level="6.4" id="attributes-vs-methods"><span class="secno">6.4. </span><span
                class="content">访问器应表现为属性而非方法</span><a class="self-link" href="#attributes-vs-methods"></a></h3>
        <p>IDL属性描述对象属性或getter，产生对象状态信息。</p>
        <ul>
            <li data-md>
                <p>getter不能有（可观察）副作用。有副作用时应用方法。</p>
            <li data-md>
                <p>getter不应抛异常。getter应<a
                        href="#attributes-like-data">表现为普通数据属性</a>，数据属性读取不会抛异常。无效状态应通过拒绝写入而非读取时抛异常。已有getter更新为抛异常会破坏向后兼容，因API用户枚举或包装API时未预期异常。
                </p>
            <li data-md>
                <p>getter不应执行阻塞操作。如需阻塞，应用方法。</p>
            <li data-md>
                <p>对象未变时，getter每次应返回同一对象，即<code>obj.property === obj.property</code>始终成立。每次返回新值不允许，否则应用方法。</p>
        </ul>
        <p class="note" role="note"><span class="marker">注意：</span>阻塞操作反例如getter<code>offsetTop</code>会执行布局。</p>
        <p>定义IDL属性时，尽量保存setter赋值后getter可返回的原值，即<code>obj.property = x</code>后<code>obj.property === x</code>为真（如需归一化或类型转换可酌情）。
        </p>
        <p>返回对象可为<a href="#live-vs-static">实时或静态</a>：
        </p>
        <ul>
            <li data-md>
                <p>实时时，每次返回同一对象，直到状态变化需返回新对象。可由属性、getter或方法返回。</p>
            <li data-md>
                <p>静态时，每次返回新对象，应用方法返回。</p>
        </ul>
        <h3 class="heading settled" data-level="6.5" id="prefer-dictionaries"><span class="secno">6.5. </span><span
                class="bs-old-id" id="prefer-dict-to-bool"></span><span class="content">可选与基础参数应用字典传递</span><a
                class="self-link" href="#prefer-dictionaries"></a></h3>
        <p>API方法应优先用字典参数，而不是一串可选参数。</p>
        <p>这样调用代码更易读，方法签名更易记，也便于后续扩展，尤其有多个同类型参数时。</p>
        <div class="example" id="example-84a7d4ad">
            <a class="self-link" href="#example-84a7d4ad"></a>
            例如，
            <pre class="highlight"><c- ow>new</c-> Event<c- p>(</c-><c- u>"example"</c-><c- p>,</c-> <c- p>{</c-> bubbles<c- o>:</c-> <c- kc>true</c-><c- p>,</c-> cancelable<c- o>:</c-> <c- kc>false</c-><c- p>})</c->
</pre>
            <p>比下面可读性更高：</p>
            <pre class="highlight"><c- ow>new</c-> Event<c- p>(</c-><c- u>"example"</c-><c- p>,</c-> <c- kc>true</c-><c- p>,</c-> <c- kc>false</c-><c- p>)</c->
</pre>
        </div>
        <p>强制参数也可考虑用字典传递，如此更易读，尤其是基础类型参数。</p>
        <div class="example" id="example-015b2c6a">
            <a class="self-link" href="#example-015b2c6a"></a>
            <pre class="highlight">window<c- p>.</c->scrollBy<c- p>({</c-> left<c- o>:</c-> <c- mf>50</c-><c- p>,</c-> top<c- o>:</c-> <c- mf>0</c-> <c- p>})</c->
</pre>
            <p>比下面更易读：</p>
            <pre class="highlight">window<c- p>.</c->scrollBy<c- p>(</c-><c- mf>50</c-><c- p>,</c-> <c- mf>0</c-><c- p>)</c->
</pre>
        </div>
        <p>字典本身应为可选参数，
            这样如作者接受所有默认选项，可不传额外参数。</p>
        <div class="example" id="example-c7e8a584">
            <a class="self-link" href="#example-c7e8a584"></a>
            例如，
            <pre class="highlight">element<c- p>.</c->scrollIntoView<c- p>(</c-><c- kc>false</c-><c- p>,</c-> <c- p>{});</c->
</pre>
            <p>等价于</p>
            <pre class="highlight">element<c- p>.</c->scrollIntoView<c- p>(</c-><c- kc>false</c-><c- p>);</c->
</pre>
        </div>
        <p>另见：</p>
        <ul>
            <li data-md>
                <p><a href="https://ariya.io/2011/08/hall-of-api-shame-boolean-trap">API设计之耻：布尔陷阱</a></p>
            <li data-md>
                <p><a href="#optional-parameters">§ 6.6 方法参数应尽可能可选</a></p>
            <li data-md>
                <p><a href="#naming-optional-parameters">§ 6.7 合理命名可选参数</a></p>
        </ul>
        <h3 class="heading settled" data-level="6.6" id="optional-parameters"><span class="secno">6.6. </span><span
                class="content">方法参数应尽可能可选</span><a class="self-link" href="#optional-parameters"></a></h3>
        <p>如API方法参数有合理默认值，应设为可选并指定默认值。</p>
        <div class="example" id="example-6724ca08"><a class="self-link" href="#example-6724ca08"></a>
            <code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-eventtarget-addeventlistener" id="ref-for-dom-eventtarget-addeventlistener">addEventListener()</a></code>
            有可选布尔参数<code>useCapture</code>，默认为<code>false</code>，即事件默认在冒泡阶段分发给监听器。
        </div>
        <p>布尔参数建议默认值为<code>false</code>。</p>
        <div class="example" id="example-6a0c0a03"><a class="self-link" href="#example-6a0c0a03"></a>
            <code
                class="idl"><a data-link-type="idl" href="https://xhr.spec.whatwg.org/#xmlhttprequest" id="ref-for-xmlhttprequest">XMLHttpRequest</a></code>
            的第三个可选参数默认为<code>true</code>，是该规则的特例，因历史互操作性，不代表设计优良。
        </div>
        <p>默认值应为大多数作者会选择的值，如明显选项。布尔属性名也应选用让<code>false</code>为常用值。</p>
        <p>API列表类型参数建议如下：</p>
        <ul>
            <li data-md>
                <p>方法参数用<code>sequence&lt;T></code></p>
            <li data-md>
                <p>方法返回值用<code>sequence&lt;T></code></p>
            <li data-md>
                <p>属性用<code>ObservableArray&lt;T></code></p>
        </ul>
        <p>另见：</p>
        <ul>
            <li data-md>
                <p><a href="#prefer-dictionaries">§ 6.5 可选与基础参数应用字典传递</a></p>
            <li data-md>
                <p><a href="#naming-optional-parameters">§ 6.7 合理命名可选参数</a></p>
            <li data-md>
                <p><a
                        href="https://lists.w3.org/Archives/Public/public-script-coord/2013OctDec/0302.html">布尔参数默认true的API</a>
                </p>
        </ul>
        <h3 class="heading settled" data-level="6.7" id="naming-optional-parameters"><span class="secno">6.7.
            </span><span class="content">合理命名可选参数</span><a class="self-link" href="#naming-optional-parameters"></a>
        </h3>
        <p>可选参数命名应让默认行为一目了然，且不要用否定命名。</p>
        <p>无论通过<a href="#prefer-dictionaries">字典</a>还是<a href="#optional-parameters">单参数</a>传递都如此。</p>
        <div class="example" id="example-cc7dcba0">
            <a class="self-link" href="#example-cc7dcba0"></a>
            <code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-eventtarget-addeventlistener" id="ref-for-dom-eventtarget-addeventlistener①">addEventListener()</a></code>
            接收一个包含<code>once</code>选项的对象，表示监听器<strong>不会</strong>重复调用。
            <p>该选项原可命名为<code>repeat</code>，此时默认应为<code>true</code>。API作者未用<code>noRepeat</code>，而用<code>once</code>，这样默认行为无需否定命名。
            </p>
            <p>其它例子：</p>
            <ul>
                <li data-md>
                    <p><code>passive</code>优于<code>active</code></p>
                <li data-md>
                    <p><code>isolate</code>优于<code>connect</code></p>
                <li data-md>
                    <p><code>private</code>优于<code>public</code></p>
            </ul>
        </div>
        <p>另见：</p>
        <ul>
            <li data-md>
                <p><a href="#naming-is-hard">§ 12 命名原则</a></p>
        </ul>
        <h3 class="heading settled" data-level="6.8" id="overloading"><span class="secno">6.8. </span><span
                class="content">合理使用重载</span><a class="self-link" href="#overloading"></a></h3>
        <p>如方法行为因参数变化而显著不同，通常应定义不同方法，而不是重载一个方法。</p>
        <p>如方法某参数可为单值或数组，适当重载有用。传递选项字典也是好模式，灵活性更高。</p>
        <p>但如后续参数因首参改变，或参数类型决定方法行为，可能影响代码可读性和API功能发现，不建议这样做。</p>
        <h3 class="heading settled" data-level="6.9" id="constructors"><span class="secno">6.9. </span><span
                class="content">类应尽量有构造函数</span><a class="self-link" href="#constructors"></a></h3>
        <p>API中的类如适用应有构造函数。</p>
        <p>默认<a data-link-type="biblio" href="#biblio-webidl"
                title="Web IDL Standard">[WEBIDL]</a>接口生成不可构造类：用<code>new X()</code>实例化会抛<code
                class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror">TypeError</a></code>。
            要可构造，需为接口添加<a href="https://webidl.spec.whatwg.org/#idl-constructors">构造函数操作</a>并定义实例创建算法。</p>
        <p>这样JS开发者可实例化类以测试、mock或与第三方库交互，也能继承该类，否则JS无法继承。</p>
        <p>但并非所有场景都适用。例如：</p>
        <ul>
            <li data-md>
                <p>部分对象表示特权资源，需工厂方法创建以访问资源。</p>
            <li data-md>
                <p>部分对象生命周期受控，需专用方法创建和访问。</p>
            <li data-md>
                <p>部分对象为抽象基类，不应实例化也不应被继承。</p>
        </ul>
        <p class="example" id="example-b036c85f"><a class="self-link" href="#example-b036c85f"></a>
            <code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#event" id="ref-for-event②">Event</a></code>
            类及其所有派生接口均可构造，便于测试事件处理代码，作者可构造<code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#event" id="ref-for-event③">Event</a></code>传递给事件处理方法。
        </p>
        <p class="example" id="example-efe51367"><a class="self-link" href="#example-efe51367"></a>
            <code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window">Window</a></code>
            类不可构造，因为创建新窗口是特权操作有副作用，应用<code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-open" id="ref-for-dom-open">window.open()</a></code>方法创建。
        </p>
        <p class="example" id="example-c23596fe"><a class="self-link" href="#example-c23596fe"></a>
            <code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/imagebitmap-and-animations.html#imagebitmap" id="ref-for-imagebitmap">ImageBitmap</a></code>
            类不可构造，因其表示不可变、可绘制的位图，生成过程需异步。应用<code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/imagebitmap-and-animations.html#dom-createimagebitmap" id="ref-for-dom-createimagebitmap">createImageBitmap()</a></code>工厂方法创建。
        </p>
        <p class="example" id="example-97798904"><a class="self-link" href="#example-97798904"></a>
            <code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#domtokenlist" id="ref-for-domtokenlist③">DOMTokenList</a></code>
            类目前<a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=27114">不可构造</a>，导致无法为自定义元素暴露其token属性为<code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#domtokenlist" id="ref-for-domtokenlist④">DOMTokenList</a></code>。
        </p>
        <div class="example" id="example-ebdfca9b">
            <a class="self-link" href="#example-ebdfca9b"></a>
            <code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/system-state.html#navigator" id="ref-for-navigator">Navigator</a></code>、
            <code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#history-3" id="ref-for-history-3">History</a></code>、
            <code
                class="idl"><a data-link-type="idl" href="https://w3c.github.io/webcrypto/#dfn-Crypto" id="ref-for-dfn-Crypto">Crypto</a></code>
            等类不可构造，因为它们是单例，表示每窗口信息访问。
            这种场景可用WebIDL<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-namespace"
                id="ref-for-dfn-namespace">命名空间</a>特性，但这些特性设计早于命名空间，且超出现有命名空间能力。
            <p>如API需此类单例，建议用<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-namespace"
                    id="ref-for-dfn-namespace①">命名空间</a>，如用有问题可<a
                    href="https://github.com/whatwg/webidl/issues/new">反馈WebIDL问题</a>。</p>
        </div>
        <p>工厂方法可辅助构造函数，但一般不应完全替代。如有基类和多个子类时，工厂方法可根据参数创建合适子类。通常工厂方法是派生类的静态方法。</p>
        <div class="example" id="example-071fec19"><a class="self-link" href="#example-071fec19"></a>
            <code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-document-createelement" id="ref-for-dom-document-createelement">createElement</a></code>
            方法是工厂方法的例子，无法用构造函数实现，因为结果可为多个<code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element">Element</a></code>子类之一。
        </div>
        <div class="example" id="example-42416b6a"><a class="self-link" href="#example-42416b6a"></a>
            已废弃的<code>MouseEvent.initMouseEvent()</code>工厂方法只创建<code
                class="idl"><a data-link-type="idl" href="https://w3c.github.io/uievents/#mouseevent" id="ref-for-mouseevent">MouseEvent</a></code>对象，最初不可构造，虽无技术障碍。最终被废弃，<code
                class="idl"><a data-link-type="idl" href="https://w3c.github.io/uievents/#mouseevent" id="ref-for-mouseevent①">MouseEvent</a></code>对象变为可构造。
        </div>
        <h3 class="heading settled" data-level="6.10" id="synchronous"><span class="secno">6.10. </span><span
                class="content">在合适场景下保持同步</span><a class="self-link" href="#synchronous"></a></h3>
        <p>在可能的情况下，设计新API时优先使用同步API。
            同步API更易于使用，无需搭建额外的基础设施（如将函数声明为<code>async</code>）。</p>
        <p>一般来说，API应为同步，如果满足以下经验法则：</p>
        <ul>
            <li data-md>
                <p>API不需要权限提示或设备选择等弹窗。</p>
            <li data-md>
                <p>API实现不会因锁、文件系统或网络访问（如进程间通信）而阻塞。</p>
            <li data-md>
                <p>执行时间短且确定。</p>
        </ul>
        <h3 class="heading settled" data-level="6.11" id="promises"><span class="secno">6.11. </span><span
                class="content">用Promise设计异步API</span><a class="self-link" href="#promises"></a>
        </h3>
        <p>如API方法需异步，使用Promise而非回调函数。</p>
        <p>在Web平台统一使用Promise，便于API组合使用，例如链式调用Promise。
            用Promise的代码通常比用回调函数的代码易懂。</p>
        <p>API可能需要异步，如果：</p>
        <ul>
            <li data-md>
                <p>用户代理需要弹窗请求<a href="#user-decisions">权限</a>，</p>
            <li data-md>
                <p>部分信息需从磁盘读取或从网络请求，</p>
            <li data-md>
                <p>用户代理需在其他线程或进程做大量工作才能返回结果。</p>
        </ul>
        <p>另见：</p>
        <ul>
            <li data-md>
                <p><a href="https://www.w3.org/2001/tag/doc/promises-guide">Promise规范编写指南</a></p>
        </ul>
        <h4 class="no-num no-toc heading settled" id="sync-callbacks"><span class="content">何时使用回调函数</span><a
                class="self-link" href="#sync-callbacks"></a></h4>
        <p>仅在需要立即响应时使用同步回调。</p>
        <p>某些API场景需同步操作，特别是涉及延迟敏感行为时。
            例如，浏览器需在事件冒泡结束后立即决定后续处理，媒体处理不能总等到下一个任务边界。
            同步行为无法用Promise建模，应使用显式回调或事件。</p>
        <p>在<a href="https://tc39.es/ecma262/multipage/control-abstraction-objects.html#sec-promisereaction-records">Promise
                reaction回调</a>中，
            不能要求在固定数量microtask内完成操作。</p>
        <p>这样能保护Promise组合：如<code>await</code>、包装辅助函数、日志、<code>Promise.race()</code>或多个<code>.then()</code>分支都会多排一个microtask，不应明显改变被包裹代码行为。
        </p>
        <div class="example" id="example-2bf45bf7">
            <a class="self-link" href="#example-2bf45bf7"></a>
            <p>事件处理器是同步调用和取消的。
                开发者代码如需调用
                <code>event.<code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-preventdefault" id="ref-for-dom-event-preventdefault">preventDefault()</a></code></code>
                或用
                <code>fetchEvent.<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/ServiceWorker/#dom-fetchevent-respondwith" id="ref-for-dom-fetchevent-respondwith">respondWith()</a></code></code>
                选择响应对象，都需要用回调而不是传给
                <code>Promise.<code class="idl"><a data-link-type="idl" href="https://tc39.es/ecma262/multipage/control-abstraction-objects.html#sec-promise.prototype.then" id="ref-for-sec-promise.prototype.then">then()</a></code></code>的反应。
            </p>
        </div>
        <div class="example" id="example-dd425e98">
            <a class="self-link" href="#example-dd425e98"></a>
            <p>非事件的例子如
                <code>captureController.<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/mediacapture-screen-share/#dom-capturecontroller-setfocusbehavior" id="ref-for-dom-capturecontroller-setfocusbehavior">setFocusBehavior()</a></code></code>
                方法，会把用户选定的屏幕捕获窗置前。应用可根据用户选择决定。
                问题是延迟处理会让站点有机会进行点击劫持攻击。
            </p>
            <p>不是要求在<code
                    class="idl"><a data-link-type="idl" href="https://w3c.github.io/mediacapture-screen-share/#dom-mediadevices-getdisplaymedia" id="ref-for-dom-mediadevices-getdisplaymedia">getDisplayMedia()</a></code>的promise
                reaction microtask内调用该方法，
                而是要求在同一promise reaction任务中调用，且有1秒超时限制。</p>
        </div>
        <h3 class="heading settled" data-level="6.12" id="aborting"><span class="secno">6.12. </span><span
                class="content">用AbortSignal取消异步API/操作</span><a class="self-link" href="#aborting"></a></h3>
        <p>如异步方法可取消，允许作者通过选项字典传入<code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortsignal" id="ref-for-abortsignal">AbortSignal</a></code>。
        </p>
        <div class="example" id="example-52de31d9">
            <a class="self-link" href="#example-52de31d9"></a>
            <pre class="language-js highlight"><c- a>const</c-> controller <c- o>=</c-> <c- ow>new</c-> AbortController<c- p>();</c->
<c- a>const</c-> signal <c- o>=</c-> controller<c- p>.</c->signal<c- p>;</c->
geolocation<c- p>.</c->read<c- p>({</c-> signal <c- p>});</c->
</pre>
        </div>
        <p>统一用<code>AbortSignal</code>取消异步操作，可让代码更简单。</p>
        <p>比如，可用一个<code>AbortSignal</code>控制多个并发操作，再用对应<code>AbortController</code>一次性取消（如用户按“取消”，或SPA导航时）。</p>
        <p>即使不能保证一定能取消，也可以用<code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortcontroller" id="ref-for-abortcontroller">AbortController</a></code>，
            因为<code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-abortcontroller-abort" id="ref-for-dom-abortcontroller-abort">abort()</a></code>是请求而非保证。
        </p>
        <h3 class="heading settled" data-level="6.13" id="string-constants"><span class="secno">6.13. </span><span
                class="content">常量与枚举用字符串表示</span><a class="self-link" href="#string-constants"></a></h3>
        <p>对于常量或一组枚举值，使用字符串作为取值。
            选择字符串时请参阅 <a href="#naming-is-hard">§ 12 命名原则</a>。</p>
        <p>字符串方便开发者检查值、阅读相关代码。
            JS引擎用整数没性能优势。
            <a href="https://webidl.spec.whatwg.org/#idl-enums">WebIDL枚举类型</a>的值也是字符串。
        </p>
        <p>如需表示多个属性组合（其他语言用位掩码），用字典对象代替。
            字典对象可像单一位掩码一样传递。</p>
        <div class="example" id="example-b12961d6"><a class="self-link" href="#example-b12961d6"></a>
            专属Worker类型通过枚举型<code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/workers.html#workertype" id="ref-for-workertype">WorkerType</a></code>参数设置。
            只有两个值（"classic"和"module"），本可用布尔类型，字符串无损且代码更清晰。
        </div>
        <div class="example" id="example-2c5eb13f"><a class="self-link" href="#example-2c5eb13f"></a>
            <code
                class="idl"><a data-link-type="idl" href="https://xhr.spec.whatwg.org/#xmlhttprequest" id="ref-for-xmlhttprequest①">XMLHttpRequest</a></code>
            的<code
                class="idl"><a data-link-type="idl" href="https://xhr.spec.whatwg.org/#dom-xmlhttprequest-readystate" id="ref-for-dom-xmlhttprequest-readystate">readyState</a></code>
            getter返回枚举整数值。用此API的代码必须熟悉API才能理解。
        </div>
        <h3 class="heading settled" data-level="6.14" id="async-by-default"><span class="secno">6.14. </span><span
                class="content">如需同步与异步方法，默认异步，同步为例外</span><a class="self-link" href="#async-by-default"></a></h3>
        <p>如极少数场景需同步与异步方法共存，默认用异步，同步为例外。</p>
        <p>因平台当前限制，部分Web平台领域缺乏异步支持，因此同时支持同步方法有助于可用性。
            这类情况应视为例外，且应有将同步方法弃用的明确路径，随平台能力提升。</p>
        <p>多数情况下，同步变体应以<code>Sync()</code>后缀区分。</p>
        <div class="example" id="example-06813f1c"><a class="self-link" href="#example-06813f1c"></a>
            例如，Web神经网络API需同时支持两种方式，以应对平台限制，其中异步为主，同步为例外。
        </div>
        <div class="note" role="note">
            目前一个典型适用场景是JS与WASM边界，Promise集成方案仍在开发中。
        </div>
        <h3 class="heading settled" data-level="6.15" id="uint8array"><span class="secno">6.15. </span><span
                class="content">字节数组用Uint8Array返回</span><a class="self-link" href="#uint8array"></a></h3>
        <p>API如返回字节数组，应用<code
                class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-Uint8Array" id="ref-for-idl-Uint8Array">Uint8Array</a></code>，而不是<code
                class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-ArrayBuffer" id="ref-for-idl-ArrayBuffer">ArrayBuffer</a></code>。
        </p>
        <p><code>ArrayBuffer</code>无法直接读取，开发者需要创建如Uint8Array的视图来读取数据。
            直接提供<code>Uint8Array</code>可省去此步骤。</p>
        <p>如缓冲区字节可自然解释为其他TypedArray类型，则应用对应类型。
            例如字节表示Float32值时，应用<code
                class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-Float32Array" id="ref-for-idl-Float32Array">Float32Array</a></code>。
        </p>
        <h3 class="heading settled" data-level="6.16" id="void-functions"><span class="secno">6.16. </span><span
                class="content">有副作用的函数应返回<code>undefined</code></span><a class="self-link" href="#void-functions"></a>
        </h3>
        <p>如函数目的是产生副作用而非计算值，应指定返回<code
                class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined">undefined</a></code>。
        </p>
        <p>站点通常不会依赖此返回值，因此未来如有新需求可轻松改为返回有意义值。</p>
        <div class="example" id="example-5e29a724">
            <a class="self-link" href="#example-5e29a724"></a>
            <p><code
                    class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement" id="ref-for-htmlmediaelement">HTMLMediaElement</a></code>的
                <code
                    class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/media.html#dom-media-play" id="ref-for-dom-media-play">play()</a></code>
                方法最初定义为返回<code
                    class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined①">undefined</a></code>，
                因其目的是改变媒体元素状态。
            </p>
            <p>播放请求可能因多种原因失败，因此<code
                    class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/media.html#dom-media-play" id="ref-for-dom-media-play①">play()</a></code>被<a
                    href="https://github.com/whatwg/html/issues/505">改为</a>返回<code
                    class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise">Promise</a></code>。
                如果API最初定义为返回非<code
                    class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined②">undefined</a></code>（如返回媒体元素，用于API链式调用），则不兼容于后续增强此API可用性。
            </p>
        </div>
        <p>另见：</p>
        <ul>
            <li data-md>
                <p><a href="https://en.wikipedia.org/wiki/Command–query_separation">命令-查询分离原则（Wikipedia）</a></p>
        </ul>
        <h3 class="heading settled" data-level="6.17" id="prefer-existing-task-sources"><span class="secno">6.17.
            </span><span class="content">优先使用已有任务源</span><a class="self-link" href="#prefer-existing-task-sources"></a>
        </h3>
        <p>在分派工作时，尽可能使用已有的<a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/webappapis.html#task-source"
                id="ref-for-task-source">任务源</a>。</p>
        <p>只有在有明确理由时，才新建<a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/webappapis.html#task-source"
                id="ref-for-task-source①">任务源</a>。
            规范通过<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#task-source"
                id="ref-for-task-source②">任务源</a>来分组相关工作（或“<a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-task"
                id="ref-for-concept-task">任务</a>”），以便用户代理可以合理地调度它们。
            一个任务会被加入到某个任务源，
            每个任务源都关联着某个<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-loop"
                id="ref-for-event-loop">事件循环</a>的任务队列。
            在同一任务源内顺序有保证，但用户代理会自行选择下一个要处理的队列。</p>
        <p>尽可能使用通用或已有的任务源。
            HTML定义了<a
                href="https://html.spec.whatwg.org/multipage/webappapis.html#generic-task-sources">通用任务源</a>，旨在跨规范广泛复用。
            包括但不限于：
            <a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source"
                id="ref-for-dom-manipulation-task-source">DOM操作任务源</a>、
            <a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/webappapis.html#user-interaction-task-source"
                id="ref-for-user-interaction-task-source">用户交互任务源</a>、
            以及<a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/webappapis.html#networking-task-source"
                id="ref-for-networking-task-source">网络任务源</a>。
            如果你的功能属于这些类别之一，
            应当加入对应的任务源，而不是新建一个任务源。
            这样有助于提升平台的互操作性、可预测性和性能调度。
        </p>
        <p>新增任务源会带来性能和复杂度上的成本，
            所有浏览器实现都需承担这些代价。
            只有在确实有具体且可测试的需求时才新建任务源。
            比如，当某个功能的时序/执行模型必须与通用任务源隔离时
            （如媒体元素拥有自己的媒体事件任务源，以便与解码器/时间线语义保持一致）。</p>
        <p>在撰写规范时，优先使用HTML的封装算法
            （<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task"
                id="ref-for-queue-a-global-task">排队一个全局任务</a>、<a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-an-element-task"
                id="ref-for-queue-an-element-task">排队一个元素任务</a>），
            并避免依赖特定的<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-loop"
                id="ref-for-event-loop①">事件循环</a>。
            只有在确实需要时才明确指定事件循环（也可参见<a href="#event-design">§ 7 事件设计</a>）。</p>
        <h2 class="heading settled" data-level="7" id="event-design"><span class="secno">7. </span><span
                class="content">事件设计</span><a class="self-link" href="#event-design"></a></h2>
        <h3 class="heading settled" data-level="7.1" id="one-time-events"><span class="secno">7.1. </span><span
                class="content">一次性事件用Promise实现</span><a class="self-link" href="#one-time-events"></a>
        </h3>
        <p>遵循<a href="https://www.w3.org/2001/tag/doc/promises-guide#one-time-events">Promise规范编写指南</a>中的<a
                href="https://www.w3.org/2001/tag/doc/promises-guide"><strong>一次性事件建议</strong></a>。</p>
        <h3 class="heading settled" data-level="7.2" id="promises-and-reaction"><span class="secno">7.2. </span><span
                class="content">可取消事件不要用Promise实现</span><a class="self-link" href="#promises-and-reaction"></a></h3>
        <p>参见<a href="#sync-callbacks">何时使用回调函数</a>。</p>
        <h3 class="heading settled" data-level="7.3" id="promises-and-events"><span class="secno">7.3. </span><span
                class="content">事件应在相关Promise resolve前触发</span><a class="self-link" href="#promises-and-events"></a>
        </h3>
        <p>如Promise异步算法会调度事件，应在Promise resolve前调度事件。</p>
        <p>Promise resolve时，会排队microtask运行reaction回调。
            microtask在JS栈清空时处理。
            <a href="https://dom.spec.whatwg.org/#dispatching-events">事件分发</a>是同步的，监听器之间JS栈会清空。
            因此，若Promise resolve在相关事件分发前，所有因Promise reaction排队的microtask会在事件第一个和第二个监听器间调用。
        </p>
        <p>先分发事件可避免这种交错。所有事件监听器都在任何Promise reaction回调前调用。</p>
        <h3 class="heading settled" data-level="7.4" id="dont-invent-event-like"><span class="secno">7.4. </span><span
                class="content">不要自创事件监听机制</span><a class="self-link" href="#dont-invent-event-like"></a></h3>
        <p>创建允许作者开始/停止通知生成过程的API时，用现有事件机制监听通知。
            为底层过程提供独立API控制。</p>
        <div class="example" id="example-7b5eb345">
            <a class="self-link" href="#example-7b5eb345"></a>
            例如，Web Bluetooth
            API在<code>BluetoothRemoteGATTCharacteristic</code>全局对象上提供<code>startNotifications()</code>方法，将对象加入“活动通知上下文集”。
            <p>用户代理收到蓝牙设备通知时，会在活动通知上下文集内的<code>BluetoothRemoteGATTCharacteristic</code>对象上触发事件。</p>
        </div>
        <p>参见：</p>
        <ul>
            <li data-md>
                <p><a href="#events-are-for-notification">§ 7.6 用事件实现通知</a></p>
            <li data-md>
                <p><a href="#events-vs-observers">§ 7.9 合理使用事件和观察者</a></p>
            <li data-md>
                <p><a href="#state-and-subclassing">§ 7.8 将状态放在 target 对象上而不是 Event 上</a></p>
        </ul>
        <h3 class="heading settled" data-level="7.5" id="always-add-event-handlers"><span class="secno">7.5.
            </span><span class="content">始终添加事件处理属性</span><a class="self-link" href="#always-add-event-handlers"></a>
        </h3>
        <p>API如添加新事件类型，应在所有可能处理该事件的<code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" id="ref-for-eventhandler">EventHandler</a></code>接口上添加对应的<code>on<em>yourevent</em></code>
            <a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes"
                id="ref-for-event-handler-idl-attributes">事件处理IDL属性</a>。
        </p>
        <p>持续定义事件处理IDL属性很重要：</p>
        <ul>
            <li data-md>
                <p>有助于平台一致性</p>
            <li data-md>
                <p>可用于事件支持的功能检测（见<a href="#feature-detect">§ 2.6 新特性应可检测</a>）</p>
        </ul>
        <p class="note" role="note">
            如事件需被HTML和SVG元素处理，应在<code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/webappapis.html#globaleventhandlers" id="ref-for-globaleventhandlers">GlobalEventHandlers</a></code>接口mixin上添加<a
                data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes"
                id="ref-for-event-handler-idl-attributes①">事件处理IDL属性</a>，而不是直接加到相关元素接口。
            同理，窗口事件应加到<code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/webappapis.html#windoweventhandlers" id="ref-for-windoweventhandlers">WindowEventHandlers</a></code>，而不是<code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window①">Window</a></code>。
        </p>
        <h3 class="heading settled" data-level="7.6" id="events-are-for-notification"><span class="secno">7.6.
            </span><span class="content">用事件实现通知</span><a class="self-link" href="#events-are-for-notification"></a>
        </h3>
        <p>事件不应用于触发变更，只用于通知变更已完成。</p>
        <div class="example" id="example-a13474fb">
            <a class="self-link" href="#example-a13474fb"></a>
            当窗口被调整大小时，会在<code>Window</code>对象上触发名为<code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/media.html#event-media-resize" id="ref-for-event-media-resize">resize</a></code>的事件。
            <p>无法通过拦截事件阻止窗口调整大小，也不能通过自造<code>resize</code>事件使窗口改变尺寸。事件只能通知作者调整已完成。</p>
        </div>
        <h3 class="heading settled" data-level="7.7" id="guard-against-recursion"><span class="secno">7.7. </span><span
                class="content">防范递归风险</span><a class="self-link" href="#guard-against-recursion"></a></h3>
        <p>API如包含耗时或复杂算法，需防止算法正在运行时再次调用。</p>
        <p>API方法如启动长算法，应用<a
                href="#events-are-for-notification">事件</a>通知用户代码进度。但用户代码处理事件时可能再次调用API方法，导致复杂算法递归运行。相同事件可能再次触发，相同处理器又被调用，依此类推。
        </p>
        <p>为防止此情况，应确保“递归”调用API方法时立即返回，不再进入算法。此技术称“守卫”算法。</p>
        <div class="example" id="example-ce590887">
            <a class="self-link" href="#example-ce590887"></a>
            <code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortsignal" id="ref-for-abortsignal①">AbortSignal</a></code>的
            <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-add"
                id="ref-for-abortsignal-add">add</a>、
            <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-remove"
                id="ref-for-abortsignal-remove">remove</a>和<a data-link-type="dfn"
                href="https://dom.spec.whatwg.org/#abortcontroller-signal-abort"
                id="ref-for-abortcontroller-signal-abort">signal abort</a>
            都会先检查信号是否<a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-aborted"
                id="ref-for-abortsignal-aborted">aborted</a>，
            如已aborted，算法不再继续。
            <p>此处很多复杂逻辑在<a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal-abort"
                    id="ref-for-abortcontroller-signal-abort①">signal abort</a>步骤中实现，
                这些步骤会遍历算法集合，由<a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-add"
                    id="ref-for-abortsignal-add①">add</a>和<a data-link-type="dfn"
                    href="https://dom.spec.whatwg.org/#abortsignal-remove"
                    id="ref-for-abortsignal-remove①">remove</a>方法管理。</p>
            <p>例如，
                <a href="https://streams.spec.whatwg.org/#readable-stream-pipe-to">ReadableStreamPipeTo</a>
                会在<code
                    class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortsignal" id="ref-for-abortsignal②">AbortSignal</a></code>的算法集合中注册算法，
                当触发<a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal-abort"
                    id="ref-for-abortcontroller-signal-abort②">signal abort</a>步骤时执行，
                通过<code
                    class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-abortcontroller-abort" id="ref-for-dom-abortcontroller-abort①">abort()</a></code>
                调用关联的<code
                    class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortcontroller" id="ref-for-abortcontroller①">AbortController</a></code>。
            </p>
            <p>此算法可能会resolve Promise导致代码运行，其中包括对<code
                    class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortsignal" id="ref-for-abortsignal③">AbortSignal</a></code>方法的调用。
                由于<a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal-abort"
                    id="ref-for-abortcontroller-signal-abort③">signal abort</a>会遍历算法集合，
                运行期间不应允许集合被修改。</p>
            <p>而且<a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal-abort"
                    id="ref-for-abortcontroller-signal-abort④">signal abort</a>触发的代码可能又导致递归调用<a data-link-type="dfn"
                    href="https://dom.spec.whatwg.org/#abortcontroller-signal-abort"
                    id="ref-for-abortcontroller-signal-abort⑤">signal abort</a>，
                因此如信号已在<a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortcontroller-signal-abort"
                    id="ref-for-abortcontroller-signal-abort⑥">signal abort</a>步骤中，不应重复运行，防止递归。</p>
        </div>
        <p class="note" role="note"><span class="marker">注意：</span>提前终止时如算法本会保证关键状态一致，需确保提前终止前调整状态，否则会造成状态不一致和用户可见bug。
        </p>
        <p class="note" role="note"><span class="marker">注意：</span>提前终止时抛异常需谨慎，考虑开发者调用场景及是否预期处理异常，例如此算法是否唯一会抛异常？</p>
        <p>并非总能用守卫技术。算法如有太多入口无法全部检查时，可选择延迟调用作者代码到后续任务或microtask。
            这样可避免递归栈，但仍可能陷入无休止的后续任务循环。</p>
        <p>事件延迟常规范为“<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task"
                id="ref-for-queue-a-task">排队任务</a>以<a data-link-type="dfn"
                href="https://dom.spec.whatwg.org/#concept-event-fire" id="ref-for-concept-event-fire">触发事件</a>...”</p>
        <p>如算法可能在不同线程/进程运行，事件应始终延迟，以确保在正确任务队列处理。</p>
        <p>守卫与延迟都有权衡：</p>
        <p>守卫算法保证：</p>
        <ul>
            <li data-md>
                <p>事件触发时，守卫算法结束到事件触发间状态不会变化。</p>
            <li data-md>
                <p>算法中触发的事件（如状态变更通知事件）可立即触发，无需等下一个任务。</p>
            <li data-md>
                <p>事件处理器中可直接访问实例对象的相关状态，无需事件中额外附带状态。</p>
        </ul>
        <p>如事件选择延迟：</p>
        <ul>
            <li data-md>
                <p>无法保证算法完成后事件一定排在<a data-link-type="dfn"
                        href="https://w3c.github.io/ServiceWorker/#dfn-service-worker-registration-task-queue"
                        id="ref-for-dfn-service-worker-registration-task-queue①">任务队列</a>首位。</p>
            <li data-md>
                <p>任何其它任务都可能改变对象状态，需在事件中包含相关状态。
                <ul>
                    <li data-md>
                        <p><span class="informative">通常需新建Event子类带新属性保存状态。</span></p>
                        <p>例如<code
                                class="idl"><a data-link-type="idl" href="https://xhr.spec.whatwg.org/#progressevent" id="ref-for-progressevent">ProgressEvent</a></code>有<code
                                class="idl"><a data-link-type="idl" href="https://xhr.spec.whatwg.org/#dom-progressevent-loaded" id="ref-for-dom-progressevent-loaded">loaded</a></code>、
                            <code
                                class="idl"><a data-link-type="idl" href="https://xhr.spec.whatwg.org/#dom-progressevent-total" id="ref-for-dom-progressevent-total">total</a></code>等属性。
                        </p>
                </ul>
            <li data-md>
                <p>如算法不同部分需协调，需定义状态机（明确状态转换），确保延迟事件触发时状态检查/修改行为可预期。
                <p><span class="informative">如Payment Request API中，<code
                            class="idl"><a data-link-type="idl" href="https://w3c.github.io/payment-request/#dom-paymentrequest" id="ref-for-dom-paymentrequest">PaymentRequest</a></code>的<code
                            class="idl"><a data-link-type="idl" href="https://w3c.github.io/payment-request/#dfn-state" id="ref-for-dfn-state">[[state]]</a></code>内部槽显式记录对象状态转移。</span>
                </p>
                <ul>
                    <li data-md>
                        <p>这些状态转换通常自身用守卫技术保证。</p>
                        <p>如Payment Request API中，注意<code
                                class="idl"><a data-link-type="idl" href="https://w3c.github.io/payment-request/#dfn-state" id="ref-for-dfn-state①">[[state]]</a></code>内部槽的守卫，如<code
                                class="idl"><a data-link-type="idl" href="https://w3c.github.io/payment-request/#dom-paymentrequest-show" id="ref-for-dom-paymentrequest-show">show()</a></code>算法。
                        </p>
                </ul>
            <li data-md>
                <p>如延迟事件无需额外状态或状态机，可能仅用于通知算法完成。此时API应返回<code
                        class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise①">Promise</a></code>而非触发事件。
                    见<a href="#one-time-events">§ 7.1 一次性事件用Promise实现</a>。</p>
        </ul>
        <p class="note" role="note"><span
                class="marker">注意：</span>本节所述暴露递归可能性的事件有时称“同步事件”，不建议使用此术语，因为暗示可以异步分发事件。所有事件都是同步分发的。所谓“异步事件”其实是延迟触发事件。
        </p>
        <h3 class="heading settled" data-level="7.8" id="state-and-subclassing"><span class="secno">7.8. </span><span
                class="content">将状态放在 <code
                    class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-target" id="ref-for-dom-event-target">target</a></code>
                对象上，而不是 <code
                    class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#event" id="ref-for-event⑤">Event</a></code>
                上</span><a class="self-link" href="#state-and-subclassing"></a></h3>
        <p>将状态放在 <code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-target" id="ref-for-dom-event-target①">target</a></code>
            上，并使用事件来通知该状态的更新，
            而不是将状态放在 <code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#event" id="ref-for-event⑥">Event</a></code>
            对象上。</p>
        <p>将状态放在 <code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-target" id="ref-for-dom-event-target②">target</a></code>
            对象上，可以用来确定当前状态，
            无需等待下一个事件。
            如果有最终状态，即不会再有事件发生时，这种做法尤为有用。</p>
        <p>通常不需要为 <code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#event" id="ref-for-event⑦">Event</a></code>
            创建新的子类，
            但可以用来提供与状态变化方式相关的信息。</p>
        <div class="example" id="example-4fb1a71f"><a class="self-link" href="#example-4fb1a71f"></a>
            <code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/input.html#htmlinputelement" id="ref-for-htmlinputelement③">HTMLInputElement</a></code>
            上的属性，例如 <code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/input.html#dom-input-value" id="ref-for-dom-input-value">value</a></code>，
            提供了输入的状态。
            <code
                class="idl"><a data-link-type="idl" href="https://w3c.github.io/uievents/#inputevent" id="ref-for-inputevent">InputEvent</a></code>
            上的属性，例如 <code
                class="idl"><a data-link-type="idl" href="https://w3c.github.io/uievents/#dom-inputevent-inputtype" id="ref-for-dom-inputevent-inputtype">inputType</a></code>，
            描述了状态更新的性质。
        </div>
        <p>在一些特殊情况下，如果在对象上维护状态代价太高，
            可以考虑其他模式，
            例如从函数调用中返回一个 <code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#eventtarget" id="ref-for-eventtarget">EventTarget</a></code>，
            此时函数调用表示对某项内容感兴趣的信号。</p>
        <div class="example" id="example-bad2d2dd">
            <a class="self-link" href="#example-bad2d2dd"></a>
            假设有一个虚构的 <code>dataUsage</code> API 用于报告环境已使用的数据量，推荐的模式为：

            <pre class="highlight">self<c- p>.</c->dataUsage<c- p>.</c->addEventListener<c- p>(</c-><c- t>'change'</c-><c- p>,</c-> <c- p>()</c-> <c- p>=></c-> <c- p>{</c->
  console<c- p>.</c->log<c- p>(</c->self<c- p>.</c->dataUsage<c- p>.</c->bytesReceived<c- p>);</c->
<c- p>});</c->
</pre>
            <p>其中 <code>bytesReceived</code> 存在于 <code>dataUsage</code> 的 <code
                    class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#eventtarget" id="ref-for-eventtarget①">EventTarget</a></code>
                上，而不是 <code
                    class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#event" id="ref-for-event⑧">Event</a></code>
                上。
            </p>
            <p>如果在该对象上维护状态开销太大，可以考虑以下模式：</p>
            <pre class="highlight"><c- a>const</c-> dataUsage <c- o>=</c-> <c- k>await</c-> self<c- p>.</c->monitorDataUsage<c- p>();</c->

dataUsage<c- p>.</c->addEventListener<c- p>(</c-><c- t>'change'</c-><c- p>,</c-> <c- p>()</c-> <c- p>=></c-> <c- p>{</c->
  console<c- p>.</c->log<c- p>(</c->dataUsage<c- p>.</c->bytesReceived<c- p>);</c->
<c- p>});</c->
</pre>
            <p>在此模式下，调用 <code>monitorDataUsage</code> 表示对数据的关注，
                状态只有在调用 <code>monitorDataUsage</code> 时才需要被更新。</p>
        </div>
        <h3 class="heading settled" data-level="7.9" id="events-vs-observers"><span class="secno">7.9. </span><span
                class="content">合理使用事件与观察者</span><a class="self-link" href="#events-vs-observers"></a></h3>
        <p>一般来说，应使用 <code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#eventtarget" id="ref-for-eventtarget②">EventTarget</a></code>
            和通知 <code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#event" id="ref-for-event⑨">Event</a></code>，
            而不是使用观察者模式，
            除非 <code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#eventtarget" id="ref-for-eventtarget③">EventTarget</a></code>
            对你的功能来说无法很好地工作。</p>
        <p>使用 <code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#eventtarget" id="ref-for-eventtarget④">EventTarget</a></code>
            可以确保你的功能受益于
            这一共享基类的改进，
            例如增加了 <code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-addeventlisteneroptions-once" id="ref-for-dom-addeventlisteneroptions-once">once</a></code>
            属性。
        </p>
        <p>如果使用事件会带来问题，如不可避免的<a href="#guard-against-recursion">递归</a>，则可考虑采用Observer模式。</p>
        <p><code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#mutationobserver" id="ref-for-mutationobserver">MutationObserver</a></code>、
            <a href="https://w3c.github.io/IntersectionObserver">Intersection Observer</a>、
            <a href="https://drafts.csswg.org/resize-observer/#resize-observer-interface">Resize Observers</a>、
            <a href="https://github.com/WICG/indexed-db-observers">IndexedDB Observers</a>
            都是Observer模式的例子。
        </p>
        <div class="example" id="example-5d14c000">
            <a class="self-link" href="#example-5d14c000"></a>
            <code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#mutationobserver" id="ref-for-mutationobserver①">MutationObserver</a></code>
            替代了已废弃的
            <a href="https://www.w3.org/TR/DOM-Level-3-Events/#legacy-mutationevent-events">DOM Mutation Events</a>，
            因开发者<a href="https://lists.w3.org/Archives/Public/public-webapps/2011JulSep/0779.html">发现</a>
            DOM Mutation Events
            <ul>
                <li data-md>
                    <p>触发频率过高</p>
                <li data-md>
                    <p>没有事件传播，导致太慢不实用</p>
                <li data-md>
                    <p>容易导致<a href="#guard-against-recursion">递归</a>，难以防范</p>
            </ul>
            <p>Mutation Observer的优势：</p>
            <ul>
                <li data-md>
                    <p>可以批量收集变更，在变更应用后统一通知观察者；</p>
                <li data-md>
                    <p>无需经历事件捕获和冒泡阶段；</p>
                <li data-md>
                    <p>提供更丰富的API以表达发生了哪些变更。</p>
            </ul>
            <p class="note" role="note"><span class="marker">注意：</span>事件也可以批量通知，但DOM Mutation
                Events未设计为此。事件不总需要参与事件传播，但针对DOM节点的事件通常会参与。</p>
        </div>
        <p>Observer模式的工作方式如下：</p>
        <ul>
            <li data-md>
                <p>每个Observer实例在构造时传入回调函数，可选传入自定义观察选项。</p>
            <li data-md>
                <p>实例通过<code>observe()</code>方法开始观察目标对象，传入要观察的目标引用。选项可在此处传入而不是构造时。发生变化时会调用构造时传入的回调。</p>
            <li data-md>
                <p>回调接收<em>变更记录</em>，包含变化的详细信息。可一次性接收多个记录。</p>
            <li data-md>
                <p>作者可通过<code>unobserve()</code>或<code>disconnect()</code>方法停止观察。</p>
            <li data-md>
                <p>可选地，提供一个方法立即返回未送达的变更记录，如<code>takeRecords()</code>。</p>
        </ul>
        <div class="example" id="example-f8835767">
            <a class="self-link" href="#example-f8835767"></a>
            <a href="https://w3c.github.io/IntersectionObserver"><code>IntersectionObserver</code></a>
            典型用法如下：
            <pre class="highlight"><c- a>function</c-> checkElementStillVisible<c- p>(</c->element<c- p>,</c-> observer<c- p>)</c-> <c- p>{</c->
    <c- ow>delete</c-> element<c- p>.</c->visibleTimeout<c- p>;</c->

    <c- c1>// 处理任务队列中的观察结果</c->
    processChanges<c- p>(</c->observer<c- p>.</c->takeRecords<c- p>());</c->

    <c- k>if</c-> <c- p>(</c-><c- t>'isVisible'</c-> <c- ow>in</c-> element<c- p>)</c-> <c- p>{</c->
        <c- ow>delete</c-> element<c- p>.</c->isVisible<c- p>;</c->
        logAdImpressionToServer<c- p>();</c->

        <c- c1>// 停止观察该元素</c->
        observer<c- p>.</c->unobserve<c- p>(</c->element<c- p>);</c->
    <c- p>}</c->
<c- p>}</c->

<c- a>function</c-> processChanges<c- p>(</c->changes<c- p>)</c-> <c- p>{</c->
    changes<c- p>.</c->forEach<c- p>(</c-><c- a>function</c-><c- p>(</c->changeRecord<c- p>)</c-> <c- p>{</c->
        <c- a>var</c-> element <c- o>=</c-> changeRecord<c- p>.</c->target<c- p>;</c->
        element<c- p>.</c->isVisible <c- o>=</c-> isVisible<c- p>(</c->changeRecord<c- p>.</c->boundingClientRect<c- p>,</c->
                                      changeRecord<c- p>.</c->intersectionRect<c- p>);</c->
        <c- k>if</c-> <c- p>(</c-><c- t>'isVisible'</c-> <c- ow>in</c-> element<c- p>)</c-> <c- p>{</c->
            <c- c1>// 元素变为可见</c->
            element<c- p>.</c->visibleTimeout <c- o>=</c-> setTimeout<c- p>(()</c-> <c- p>=></c-> <c- p>{</c->
                checkElementStillVisible<c- p>(</c->element<c- p>,</c-> observer<c- p>);</c->
            <c- p>},</c-> <c- mf>1000</c-><c- p>);</c->
        <c- p>}</c-> <c- k>else</c-> <c- p>{</c->
            <c- c1>// 元素变为隐藏</c->
            <c- k>if</c-> <c- p>(</c-><c- t>'visibleTimeout'</c-> <c- ow>in</c-> element<c- p>)</c-> <c- p>{</c->
                clearTimeout<c- p>(</c->element<c- p>.</c->visibleTimeout<c- p>);</c->
                <c- ow>delete</c-> element<c- p>.</c->visibleTimeout<c- p>;</c->
            <c- p>}</c->
        <c- p>}</c->
    <c- p>});</c->
<c- p>}</c->

<c- c1>// 创建IntersectionObserver实例</c->
<c- a>var</c-> observer <c- o>=</c-> <c- ow>new</c-> IntersectionObserver<c- p>(</c->processChanges<c- p>,</c->
                                        <c- p>{</c-> threshold<c- o>:</c-> <c- p>[</c-><c- mf>0.5</c-><c- p>]</c-> <c- p>});</c->

<c- c1>// 观察广告元素</c->
<c- a>var</c-> ad <c- o>=</c-> document<c- p>.</c->querySelector<c- p>(</c-><c- t>'#ad'</c-><c- p>);</c->
observer<c- p>.</c->observe<c- p>(</c->ad<c- p>);</c->
</pre>
            <p>（示例代码改编自<a
                    href="https://github.com/w3c/IntersectionObserver/blob/master/explainer.md">IntersectionObserver
                    explainer</a>。）</p>
        </div>
        <p>如需使用Observer模式，你需定义：</p>
        <ol>
            <li data-md>
                <p>新的Observer对象类型</p>
            <li data-md>
                <p>用于观察选项的对象类型</p>
            <li data-md>
                <p>用于变更记录的对象类型</p>
        </ol>
        <p>额外工作换来的好处：</p>
        <ul>
            <li data-md>
                <p>实例可在观察时或创建时自定义。Observer的构造函数或observe方法可传入选项，每个回调可定制观察内容。<code
                        class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-eventtarget-addeventlistener" id="ref-for-dom-eventtarget-addeventlistener②">addEventListener()</a></code>无法做到。
                </p>
            <li data-md>
                <p>可通过Observer的<code>disconnect()</code>或<code>unobserve()</code>方法轻松停止多回调监听。</p>
            <li data-md>
                <p>可提供如<code>takeRecords()</code>方法，立即获取相关数据，无需等待事件触发。</p>
            <li data-md>
                <p>Observer为单一用途，无需指定事件类型。</p>
        </ul>
        <p><code>Observer</code> 和 <code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#eventtarget" id="ref-for-eventtarget⑤">EventTarget</a></code>
            有这些共同点：</p>
        <ul>
            <li data-md>
                <p>两者都可以在创建时自定义。</p>
            <li data-md>
                <p>两者都可以批量处理事件并随时分发。
                    <code
                        class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#eventtarget" id="ref-for-eventtarget⑥">EventTarget</a></code>
                    不需要是同步的；
                    它们可以使用微任务时机、空闲时机、动画帧时机等。
                    你不需要 <code>Observer</code> 就能实现特殊的时机或批处理。
                </p>
            <li data-md>
                <p><code
                        class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#eventtarget" id="ref-for-eventtarget⑦">EventTarget</a></code>
                    和 <code>Observer</code> 都不需要参与 DOM 树
                    （冒泡/捕获和取消）。
                    最常见的 <code
                        class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#eventtarget" id="ref-for-eventtarget⑧">EventTarget</a></code>
                    是 DOM 树中的 <code
                        class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#node" id="ref-for-node①">Node</a></code>，
                    但许多其他事件是独立的；
                    例如 <code
                        class="idl"><a data-link-type="idl" href="https://w3c.github.io/IndexedDB/#idbdatabase" id="ref-for-idbdatabase">IDBDatabase</a></code>
                    和 <code
                        class="idl"><a data-link-type="idl" href="https://xhr.spec.whatwg.org/#xmlhttprequesteventtarget" id="ref-for-xmlhttprequesteventtarget">XMLHttpRequestEventTarget</a></code>。
                    即使使用 <code
                        class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#node" id="ref-for-node②">Node</a></code>，
                    你的事件也可以设计为不冒泡和不可取消。</p>
        </ul>
        <div class="example" id="example-211011c7">
            <a class="self-link" href="#example-211011c7"></a>
            这里是一个假想版 <code
                class="idl"><a data-link-type="idl" href="https://w3c.github.io/IntersectionObserver/#intersectionobserver" id="ref-for-intersectionobserver">IntersectionObserver</a></code>
            作为 <code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#eventtarget" id="ref-for-eventtarget⑨">EventTarget</a></code>
            子类的用法示例：

            <pre class="highlight"><c- a>const</c-> io <c- o>=</c-> <c- ow>new</c-> ETIntersectionObserver<c- p>(</c->element<c- p>,</c-> <c- p>{</c-> root<c- p>,</c-> rootMargin<c- p>,</c-> threshold <c- p>});</c->

<c- a>function</c-> listener<c- p>(</c->e<c- p>)</c-> <c- p>{</c->
    <c- k>for</c-> <c- p>(</c-><c- a>const</c-> change <c- k>of</c-> e<c- p>.</c->changes<c- p>)</c-> <c- p>{</c->
        <c- c1>// ...</c->
    <c- p>}</c->
<c- p>}</c->

io<c- p>.</c->addEventListener<c- p>(</c-><c- u>"intersect"</c-><c- p>,</c-> listener<c- p>);</c->
io<c- p>.</c->removeEventListener<c- p>(</c-><c- u>"intersect"</c-><c- p>,</c-> listener<c- p>);</c->
</pre>
            <p>与 <code>Observer</code> 版本相比：</p>
            <ul>
                <li data-md>
                    <p>用相同选项观测多个元素更困难；</p>
                <li data-md>
                    <p>无法立即请求数据；</p>
                <li data-md>
                    <p>移除同一事件的多个监听器更麻烦；</p>
                <li data-md>
                    <p>作者必须提供多余的 <code>"intersect"</code> 事件类型。</p>
            </ul>
            <p>与 <code>Observer</code> 版本相同的是：</p>
            <ul>
                <li data-md>
                    <p>仍然可以批处理；</p>
                <li data-md>
                    <p>时机相同（基于 JavaScript 事件队列）；</p>
                <li data-md>
                    <p>作者仍然可以自定义监听内容；</p>
                <li data-md>
                    <p>事件不会经过捕获或冒泡。</p>
            </ul>
            <p>这些方面，无论哪种设计都能实现。</p>
        </div>
        <p>另见：</p>
        <ul>
            <li data-md>
                <p><a href="#events-are-for-notification">§ 7.6 用事件做通知</a></p>
            <li data-md>
                <p><a href="#state-and-subclassing">§ 7.8 将状态放在 target 对象上而不是 Event 上</a></p>
        </ul>
        <h2 class="heading settled" data-level="8" id="types-and-units"><span class="secno">8. </span><span
                class="content">Web IDL、类型与单位</span><a class="self-link" href="#types-and-units"></a></h2>
        <h3 class="heading settled" data-level="8.1" id="numeric-types"><span class="secno">8.1. </span><span
                class="content">合理使用数值类型</span><a class="self-link" href="#numeric-types"></a>
        </h3>
        <p>如设计API需用数字，建议采用如下<a data-link-type="biblio" href="#biblio-webidl"
                title="Web IDL Standard">[WEBIDL]</a>数值类型，除非有特定原因：</p>
        <dl>
            <dt data-md><code
                    class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-unrestricted-double" id="ref-for-idl-unrestricted-double">unrestricted double</a></code>
            <dd data-md>
                <p>任意JavaScript数字，包括无穷和NaN</p>
            <dt data-md><code
                    class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-double" id="ref-for-idl-double">double</a></code>
            <dd data-md>
                <p>任意JavaScript数字，排除无穷和NaN</p>
            <dt data-md>[<code
                    class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#EnforceRange" id="ref-for-EnforceRange">EnforceRange</a></code>]
                <code
                    class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-long-long" id="ref-for-idl-long-long">long long</a></code>
            <dd data-md>
                <p>JavaScript数字，范围-2<sup>63</sup>到2<sup>63</sup>，四舍五入为整数。超出范围将抛出<code
                        class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①">TypeError</a></code>。
                </p>
            <dt data-md>[<code
                    class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#EnforceRange" id="ref-for-EnforceRange①">EnforceRange</a></code>]
                <code
                    class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long" id="ref-for-idl-unsigned-long-long">unsigned long long</a></code>
            <dd data-md>
                <p>JavaScript数字，范围0到2<sup>64</sup>，四舍五入为整数。超出范围将抛出<code
                        class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror②">TypeError</a></code>。
                </p>
        </dl>
        <p>JavaScript只有一种数值类型<code
                class="idl"><a data-link-type="idl" href="https://tc39.es/ecma262/multipage/numbers-and-dates.html#sec-number-objects" id="ref-for-sec-number-objects">Number</a></code>：
            IEEE 754双精度浮点，含±0、±Infinity和NaN。
            <a data-link-type="biblio" href="#biblio-webidl" title="Web IDL Standard">[WEBIDL]</a>数值类型
            规定了如何将任意JavaScript数字转换为具有特定属性的子集。
            无论是方法还是属性setter，数字传给IDL接口时会应用这些规则。
        </p>
        <p>如需额外规则，可在算法中指定。</p>
        <div class="note" role="note">
            <a href="https://webidl.spec.whatwg.org/#es-integer-types">WEBIDL转换JavaScript数字为低位数类型</a>
            如<code
                class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-octet" id="ref-for-idl-octet">octet</a></code>
            （8位，[0, 255]），会取数字的模。如将300转为<code
                class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-octet" id="ref-for-idl-octet①">octet</a></code>，结果为300模255，即45，可能令人意外。
            <p>可用[<code
                    class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#EnforceRange" id="ref-for-EnforceRange②">EnforceRange</a></code>]<code
                    class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-octet" id="ref-for-idl-octet②">octet</a></code>，超出范围则抛TypeError；
                或[<code
                    class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#Clamp" id="ref-for-Clamp">Clamp</a></code>]<code
                    class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-octet" id="ref-for-idl-octet④">octet</a></code>，超出范围则截断为最大值（如300变255）。
            </p>
            <p>其它短类型如<code
                    class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-short" id="ref-for-idl-short">short</a></code>或<code
                    class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-long" id="ref-for-idl-long">long</a></code>也适用。
            </p>
        </div>
        <p><code
                class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-bigint" id="ref-for-idl-bigint">bigint</a></code>
            仅用于期望超出2<sup>53</sup>或小于-2<sup>53</sup>的值。</p>
        <p>API不应同时支持<code
                class="idl"><a data-link-type="idl" href="https://tc39.es/ecma262/multipage/numbers-and-dates.html#sec-bigint-objects" id="ref-for-sec-bigint-objects">BigInt</a></code>
            和<code
                class="idl"><a data-link-type="idl" href="https://tc39.es/ecma262/multipage/numbers-and-dates.html#sec-number-objects" id="ref-for-sec-number-objects①">Number</a></code>，
            无论是多态支持还是分别提供只差类型的API。
            否则会因隐式转换丢失精度，违背<code
                class="idl"><a data-link-type="idl" href="https://tc39.es/ecma262/multipage/numbers-and-dates.html#sec-bigint-objects" id="ref-for-sec-bigint-objects②">BigInt</a></code>的初衷。
        </p>
        <h3 class="heading settled" data-level="8.2" id="idl-string-types"><span class="secno">8.2. </span><span
                class="content">合理表示字符串</span><a class="self-link" href="#idl-string-types"></a>
        </h3>
        <div class="note" role="note">
            本节与<a href="https://w3c.github.io/bp-i18n-specdev/#char_string">Defining string</a>（<a
                data-link-type="biblio" href="#biblio-international-specs"
                title="Internationalization Best Practices for Spec Developers">[international-specs]</a>）保持一致。如文档演化出现不一致，请反馈。
        </div>
        <p>设计操作<a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string"
                id="ref-for-string">字符串</a>的Web平台特性时，除非有特定原因，建议用<code
                class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString">DOMString</a></code>。
        </p>
        <p>大多数字符串操作无需解释字符串中的<a data-link-type="dfn" href="https://infra.spec.whatwg.org/#code-unit"
                id="ref-for-code-unit">码元</a>，因此<code
                class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①">DOMString</a></code>是最佳选择。
            特定场景下可用<code
                class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString①">USVString</a></code>或<code
                class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-ByteString" id="ref-for-idl-ByteString">ByteString</a></code>，详见下文。<a
                data-link-type="biblio" href="#biblio-infra" title="Infra Standard">[INFRA]</a> <a
                data-link-type="biblio" href="#biblio-webidl" title="Web IDL Standard">[WEBIDL]</a>
        </p>
        <p><code
                class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString②">USVString</a></code>
            是Web IDL用于表示<a data-link-type="dfn" href="https://infra.spec.whatwg.org/#scalar-value-string"
                id="ref-for-scalar-value-string">标量值字符串</a>的类型。
            若字符串常用算法操作<a data-link-type="dfn" href="https://infra.spec.whatwg.org/#scalar-value"
                id="ref-for-scalar-value">标量值</a>
            （如<a data-link-type="dfn" href="https://w3c.github.io/i18n-glossary/#dfn-percent-encoding"
                id="ref-for-dfn-percent-encoding">百分号编码</a>），
            或操作无法处理输入中的<a data-link-type="dfn" href="https://infra.spec.whatwg.org/#surrogate"
                id="ref-for-surrogate">代理项</a>
            （如需传递字符串到原生平台API），
            应用<code
                class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString③">USVString</a></code>。
        </p>
        <p class="example" id="example-fe96b598"><a class="self-link" href="#example-fe96b598"></a>
            <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/common-dom-interfaces.html#reflect"
                id="ref-for-reflect">反映IDL属性</a>
            若内容属性定义为包含<a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url"
                id="ref-for-concept-url">URL</a>
            （如
            <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/links.html#attr-hyperlink-href" id="ref-for-attr-hyperlink-href①">href</a></code>），
            应用<code
                class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString④">USVString</a></code>。
            <a data-link-type="biblio" href="#biblio-html" title="HTML Standard">[HTML]</a>
        </p>
        <p><code
                class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-ByteString" id="ref-for-idl-ByteString①">ByteString</a></code>
            仅用于表示如HTTP协议这类不区分字节和字符串的数据，不是通用字符串类型。如需表示<code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#sequence-type"
                id="ref-for-sequence-type②">字节序列</a></code>，请用<code
                class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-Uint8Array" id="ref-for-idl-Uint8Array①">Uint8Array</a></code>。
        </p>
        <h3 class="heading settled" data-level="8.3" id="milliseconds"><span class="secno">8.3. </span><span
                class="content">时间度量统一用毫秒</span><a class="self-link" href="#milliseconds"></a></h3>
        <p>如果你设计的API需要时间度量，统一使用毫秒作为单位。</p>
        <p>即使秒（或其他单位）在API领域更自然，统一用毫秒能保证API之间的互操作性。
            这样作者无需转换时间单位，也不用记住不同API用何种单位。</p>
        <p>这种惯例起源于<code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#dom-settimeout" id="ref-for-dom-settimeout">setTimeout()</a></code>
            和
            <code
                class="idl"><a data-link-type="idl" href="https://tc39.es/ecma262/multipage/numbers-and-dates.html#sec-date-objects" id="ref-for-sec-date-objects">Date</a></code>
            API，
            并延续至今。
        </p>
        <p class="note" role="note"><span class="marker">注意：</span>高精度时间通常用浮点数表示分数毫秒，
            而不是用更小单位如纳秒的整数。</p>
        <h3 class="heading settled" data-level="8.4" id="times-and-dates"><span class="secno">8.4. </span><span
                class="content">用合适类型表示时间和日期</span><a class="self-link" href="#times-and-dates"></a></h3>
        <p>在平台上表示日期时间时，使用<code
                class="idl"><a data-link-type="idl" href="https://w3c.github.io/hr-time/#dom-domhighrestimestamp" id="ref-for-dom-domhighrestimestamp">DOMHighResTimeStamp</a></code>类型。
            <code
                class="idl"><a data-link-type="idl" href="https://w3c.github.io/hr-time/#dom-domhighrestimestamp" id="ref-for-dom-domhighrestimestamp①">DOMHighResTimeStamp</a></code>
            可用于比较时间戳，不受用户本地时间影响。
        </p>
        <p><code
                class="idl"><a data-link-type="idl" href="https://w3c.github.io/hr-time/#dom-domhighrestimestamp" id="ref-for-dom-domhighrestimestamp②">DOMHighResTimeStamp</a></code>
            的值表示以毫秒为单位的时间值。
            详细见<a data-link-type="biblio" href="#biblio-highres-time" title="High Resolution Time">[HIGHRES-TIME]</a>。
        </p>
        <p>不要用JavaScript的<code
                class="idl"><a data-link-type="idl" href="https://tc39.es/ecma262/multipage/numbers-and-dates.html#sec-date-objects" id="ref-for-sec-date-objects①">Date</a></code>
            类来表示具体的日期时间值。
            <code
                class="idl"><a data-link-type="idl" href="https://tc39.es/ecma262/multipage/numbers-and-dates.html#sec-date-objects" id="ref-for-sec-date-objects②">Date</a></code>
            对象是可变的（值可更改），且无法使其不可变。
        </p>
        <div class="note" role="note">
            关于为何不能用<code
                class="idl"><a data-link-type="idl" href="https://tc39.es/ecma262/multipage/numbers-and-dates.html#sec-date-objects" id="ref-for-sec-date-objects③">Date</a></code>，
            见下述链接：
            <ul>
                <li data-md>
                    <p><a href="https://esdiscuss.org/topic/frozen-date-objects">Frozen date objects?</a>（es-discuss）
                    </p>
                <li data-md>
                    <p><a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=22824">从Web IDL移除Date</a>
                        （Web IDL Bugzilla）</p>
            </ul>
        </div>
        <h3 class="heading settled" data-level="8.5" id="error-types"><span class="secno">8.5. </span><span
                class="content">错误用Error或DOMException表示</span><a class="self-link" href="#error-types"></a>
        </h3>
        <p>Web API中的错误应用ECMAScript错误对象（如<code
                class="idl"><a data-link-type="idl" href="https://tc39.es/ecma262/multipage/fundamental-objects.html#sec-error-objects" id="ref-for-sec-error-objects">Error</a></code>）
            或<code
                class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException">DOMException</a></code>表示，
            无论是异常、Promise拒绝值还是属性。</p>
        <h2 class="heading settled" data-level="9" id="device-apis"><span class="secno">9. </span><span
                class="content">封装设备/浏览器能力的API</span><a class="self-link" href="#device-apis"></a></h2>
        <p>现在Web平台正开发与设备交互的新API。
            例如，作者希望用Web连接
            <a href="https://www.w3.org/TR/mediacapture-streams/">麦克风和摄像头</a>、
            <a href="https://www.w3.org/TR/generic-sensor/">通用传感器</a>（如陀螺仪、加速度计）、
            <a href="https://www.w3.org/community/web-bluetooth/">蓝牙</a>和
            <a href="https://wicg.github.io/webusb/">USB</a>外设、
            <a href="https://www.w3.org/community/autowebplatform/">汽车</a>等。
        </p>
        <p>同样也适用于主机系统或外部服务可选提供的能力，包括需用户付费访问的能力。</p>
        <p>这些能力可由底层操作系统或本地第三方库提供。
            API可作为“封装器”抽象原生功能，
            不引入重大复杂性，同时保证浏览器API安全性。
            这些称为封装API（wrapper APIs）。</p>
        <p>本节包含设计此类能力API时需考虑的原则。</p>
        <h3 class="heading settled" data-level="9.1" id="device-ids"><span class="secno">9.1. </span><span
                class="content">不要暴露多余的能力信息</span><a class="self-link" href="#device-ids"></a></h3>
        <p>遵循<a href="#data-minimization">数据最小化</a>原则，
            如需让网站访问能力信息，只暴露完成任务所需的最少数据。</p>
        <p>首先，认真考虑是否真的需要暴露这些信息。
            评估你的<a href="#priority-of-constituencies">用户需求</a>能否用更弱的API满足。</p>
        <p>暴露设备存在、附加信息或设备标识符，都会增加用户隐私受损风险。</p>
        <p>用户拒绝访问设备或能力时，不应暴露该能力是否存在。
            在此场景减少信息泄露比授权后更重要。</p>
        <p>信息越具体，
            <a href="https://www.w3.org/TR/fingerprinting-guidance/">指纹数据</a>
            被网站收集的可能性越大，
            信息也越可能<a href="https://w3ctag.github.io/privacy-principles/#sensitive-information">涉及用户敏感内容</a>。
        </p>
        <p>如无法设计更弱的API，暴露设备信息时应遵循以下原则：</p>
        <dl>
            <dt data-md>限制标识符中的信息
            <dd data-md>
                <p>在向 Web 平台公开的设备标识符中只包含尽可能少的可识别信息。
                    可识别信息包括品牌、厂商与型号等。
                    通常可以使用随机生成的标识符来替代。
                    确保你的标识符不可被猜测且不被重复使用。</p>
            <dt data-md>让用户保持控制
            <dd data-md>
                <p>当用户选择清除浏览数据时，
                    确保清除任何存储的设备标识符。</p>
            <dt data-md>将敏感信息置于用户许可之后
            <dd data-md>
                <p>如果无法以匿名方式创建设备标识符，
                    则应限制对其的访问。
                    确保你 <a href="#user-decisions">帮助用户做出良好决策</a>
                    关于网页访问这些信息的情况。</p>
            <dt data-md>将标识符与同源模型绑定
            <dd data-md>
                <p>为每个有权访问同一物理设备的源创建不同的标识符。</p>
            <dd data-md>
                <p>如果同一设备被同一源多次请求，
                    则为其返回相同的标识符
                    （除非用户已清除其浏览数据）。
                    这允许作者避免拥有同一设备的多个副本。</p>
            <dt data-md>在必要时可持久化
            <dd data-md>
                <p>如果获取设备标识符耗时较长，
                    请确保作者能够存储在一次会话中生成的标识符以便在之后的会话中使用。
                    可以通过确保生成标识符的过程对同一设备、
                    对每个源始终产生相同的值来实现。</p>
        </dl>
        <p>另请参阅：</p>
        <ul>
            <li data-md>
                <p><a href="#user-decisions">§ 1.4.1 帮助用户做出良好决策</a></p>
            <li data-md>
                <p><a data-link-type="biblio" href="#biblio-least-power"
                        title="The Rule of Least Power">[LEAST-POWER]</a></p>
            <li data-md>
                <p><a data-link-type="biblio" href="#biblio-fingerprinting-guidance"
                        title="Mitigating Browser Fingerprinting in Web Specifications">[FINGERPRINTING-GUIDANCE]</a>
                </p>
            <li data-md>
                <p><a data-link-type="biblio" href="#biblio-unsanctioned-tracking"
                        title="Unsanctioned Web Tracking">[UNSANCTIONED-TRACKING]</a></p>
        </ul>
        <h3 class="heading settled" data-level="9.2" id="device-enumeration"><span class="secno">9.2. </span><span
                class="content">谨慎开放设备选择与枚举API</span><a class="self-link" href="#device-enumeration"></a></h3>
        <p>尽量避免枚举设备。如无法避免，暴露的信息要最少。</p>
        <p>如API暴露多个设备的存在、能力或标识符，
            <a href="#device-ids">§ 9.1 不要暴露多余的能力信息</a>中的风险会按设备数倍增。
            同理，应评估你的<a href="#priority-of-constituencies">用户需求</a>能否用更弱API满足。<a data-link-type="biblio"
                href="#biblio-least-power" title="最小能力原则">[LEAST-POWER]</a>
        </p>
        <p>如API目的是让用户<strong>选择设备</strong>，
            可能无需向脚本暴露设备列表。
            可用由用户代理提供的设备选择器API即可。
            这种API：</p>
        <ul>
            <li data-md>
                <p>让用户保持控制，</p>
            <li data-md>
                <p><a href="#user-decisions">帮助用户理解</a> 他们的决定，</p>
            <li data-md>
                <p>默认情况下不向外暴露任何关于用户环境的指纹识别数据，且</p>
            <li data-md>
                <p>每次仅暴露关于一个设备的信息。</p>
        </ul>
        <p>在设计允许用户选择设备的 API 时，可能也需要表明有可供选择的设备存在。这会向网站暴露关于用户环境的一条指纹识别信息，因此它不如没有此类功能的 API 安全。确保该 API 能在用户界面上提供足够的信息，使用户能够
            <a href="#user-decisions">做出良好决策</a>。
        </p>
        <div class="example" id="example-e2381236">
            <a class="self-link" href="#example-e2381236"></a>
            <code
                class="idl"><a data-link-type="idl" href="https://w3c.github.io/remote-playback/#dom-remoteplayback" id="ref-for-dom-remoteplayback">RemotePlayback</a></code>
            接口不暴露可用<a data-link-type="dfn" href="https://w3c.github.io/remote-playback/#dfn-remote-playback-devices"
                id="ref-for-dfn-remote-playback-devices">远程播放设备</a>列表。
            而是允许用户通过用户代理的设备选择器选取设备。
            <p>它能让网站检测是否有可用<a data-link-type="dfn"
                    href="https://w3c.github.io/remote-playback/#dfn-remote-playback-devices"
                    id="ref-for-dfn-remote-playback-devices①">远程播放设备</a>，
                网站可据此显示或隐藏用于弹出选择器的控件。</p>
            <p>权衡在于这种API让作者多获得一点信息，
                但能让UI不易让用户困惑——只有有设备时才显示弹出按钮。</p>
        </div>
        <p>如必须暴露设备列表，
            尽量<strong>只暴露满足用户需求的最小子集</strong>。</p>
        <p>比如，API可让网站请求<strong>筛选或约束过的设备列表</strong>，
            这样设备数量更少。
            但如允许作者用不同约束多次请求，仍可能获得全部列表。</p>
        <p>最后，如必须暴露某类设备的完整列表，
            请务必<strong>严格规定设备的排列顺序</strong>。
            这样可减少互操作性问题，也有助于缓解指纹风险。
            （排序也可能暴露信息，见<a href="https://w3c.github.io/fingerprinting-guidance/#standardization"><cite>指纹缓解 § 6.2
                    标准化</cite></a>）</p>
        <p class="note" role="note"><span class="marker">注意：</span>API不应按<a data-link-type="dfn"
                href="https://infra.spec.whatwg.org/#implementation-defined"
                id="ref-for-implementation-defined">实现自定义</a>顺序暴露完整设备列表，
            但为Web兼容性有时不得不这样做。</p>
        <h3 class="heading settled" data-level="9.3" id="usecase-oriented-apis"><span class="secno">9.3. </span><span
                class="content">以用户需求为基础设计，而非底层能力</span><a class="self-link" href="#usecase-oriented-apis"></a></h3>
        <p>将原生能力带入Web时，应以用户需求为基础暴露新能力。</p>
        <p>避免直接翻译现有原生API到Web。</p>
        <p>而应分析原生API能实现的功能及对应的用户需求，设计满足这些需求的API，即使实现依赖原生API。</p>
        <p>尤其要注意不要直接暴露底层原生API的生命周期和数据结构。如有可能，考虑对新硬件的灵活适配。</p>
        <p>也就是说，新API设计应以预期用法为依据，而非底层硬件、设备或原生API当前实现方式。</p>
        <h3 class="heading settled" data-level="9.4" id="hardware-is-scary"><span class="secno">9.4. </span><span
                class="content">积极保障安全</span><a class="self-link" href="#hardware-is-scary"></a></h3>
        <p>将原生能力带到Web平台时，应尽量防御性设计。</p>
        <p>原生能力引入Web平台会带来诸多影响。
            用户可能不希望网站知道其计算机有何能力。因此，任何跨越逻辑origin边界的访问都应权限控制。</p>
        <p>例如，若设备可存储状态，且该状态可被多个origin同时读取，
            则一组可读写状态的API实际上就是一个破坏Web同源模型的旁路通道。</p>
        <p>因此，即使设备允许非独占访问，也建议按origin强制独占访问，甚至进一步限制为仅当前激活标签页可访问。</p>
        <p>此外，API设计时应确保应用能优雅处理物理中断，比如设备被拔掉。</p>
        <h3 class="heading settled" data-level="9.5" id="wrapper-apis"><span class="secno">9.5. </span><span
                class="content">用Web平台原则适配原生API</span><a class="self-link" href="#wrapper-apis"></a></h3>
        <p>将原生操作系统API适配到Web时，需确保新Web API遵循Web平台设计原则。</p>
        <dl>
            <dt data-md>API应可多平台实现
            <dd data-md>
                <p>设计封装API时，要考虑不同平台如何提供其功能。</p>
                <p>理想情况下所有实现都完全一致，但有时确实需要暴露仅支持部分平台的选项。
                    如遇此情况，应说明作者如何编写可在所有平台运行的代码。
                    见<a href="#feature-detect">§ 2.6 新特性应可检测</a>。</p>
            <dt data-md>底层协议应开放
            <dd data-md>
                <p>与外部硬件或服务交换数据的API，不应依赖闭源或专有协议。
                    依赖非开放协议会削弱Web开放性。</p>
            <dt data-md>API设计应兼容离线场景
            <dd data-md>
                <p>如API依赖远程服务，需保证用户因各种原因无法访问服务时API仍能正常工作。</p>
            <dt data-md>避免增加指纹追踪面
            <dd data-md>
                <p>封装API可能无意间增加用户被指纹追踪风险。
                    请参考TAG关于<a href="https://www.w3.org/2001/tag/doc/unsanctioned-tracking/">未授权追踪</a>的说明。
                </p>
        </dl>
        <h2 class="heading settled" data-level="10" id="other-considerations"><span class="secno">10. </span><span
                class="content">其他API设计考量</span><a class="self-link" href="#other-considerations"></a></h2>
        <h3 class="heading settled" data-level="10.1" id="polyfills"><span class="secno">10.1. </span><span
                class="content">为新功能支持polyfill</span><a class="self-link" href="#polyfills"></a></h3>
        <p>polyfill对新功能推广极为有益。
            技术架构组TAG关于<a href="https://www.w3.org/2001/tag/doc/polyfills/">Polyfill与Web演进</a>的建议，
            在开发新功能时应参考，特别包括：</p>
        <ul>
            <li data-md>
                <p>“可polyfill”不是必须，但<strong>确实</strong>有好处</p>
            <li data-md>
                <p><a href="#feature-detect">§ 2.6 新特性应可检测</a></p>
            <li data-md>
                <p>鼓励开发polyfill</p>
        </ul>
        <h3 class="heading settled" data-level="10.2" id="consider-dedicatedworker-support"><span class="secno">10.2.
            </span><span class="content">API尽可能支持dedicated worker</span><a class="self-link"
                href="#consider-dedicatedworker-support"></a></h3>
        <p>开放新功能时，请考虑是否适合暴露给dedicated worker（通过<code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/workers.html#dedicatedworkerglobalscope" id="ref-for-dedicatedworkerglobalscope">DedicatedWorkerGlobalScope</a></code>接口）。
        </p>
        <p>许多功能本可直接在dedicated worker上运行，不支持会限制用户以非阻塞方式运行代码。</p>
        <p>支持dedicated worker时存在一些挑战，尤其是需要用户输入（权限弹窗、选择器等）时。
            虽然这些困难可能让规范作者不愿支持dedicated worker，但仍建议设计时考虑dedicated worker支持，
            以免后续暴露API时遇到不必要的障碍。</p>
        <h4 class="heading settled" data-level="10.2.1" id="worker-only"><span class="secno">10.2.1. </span><span
                class="content">部分API仅暴露给dedicated worker</span><a class="self-link" href="#worker-only"></a></h4>
        <p>开发者更倾向于用简单代码，因此通常会用API的最简方式。</p>
        <p>应避免添加阻塞渲染的功能。见<a href="#avoid-render-blocking">§ 3.4 避免阻塞渲染的功能</a></p>
        <p>如API最简用法易导致渲染阻塞或页面“<a href="https://developer.mozilla.org/en-US/docs/Glossary/Jank">卡顿</a>”，用户体验会变差。
            （在低性能设备上问题更突出，这些设备更多被弱势群体使用。请记住，<a
                href="https://www.w3.org/TR/ethical-web-principles/#allpeople">Web是为所有人服务</a>。）</p>
        <p>因此，易阻塞主线程的API，不应暴露在<code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window②">Window</a></code>接口。
            限定这类API只在<code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/workers.html#dedicatedworkerglobalscope" id="ref-for-dedicatedworkerglobalscope①">DedicatedWorkerGlobalScope</a></code>接口暴露，
            能让开发者默认获得最佳用户体验。</p>
        <p class="example" id="example-c5e10604"><a class="self-link" href="#example-c5e10604"></a>
            <code
                class="idl"><a data-link-type="idl" href="https://webaudio.github.io/web-audio-api/#ScriptProcessorNode" id="ref-for-ScriptProcessorNode">ScriptProcessorNode</a></code>
            在Web Audio API中已被<code
                class="idl"><a data-link-type="idl" href="https://webaudio.github.io/web-audio-api/#AudioWorklet" id="ref-for-AudioWorklet">AudioWorklet</a></code>替代，
            因为主线程使用<code
                class="idl"><a data-link-type="idl" href="https://webaudio.github.io/web-audio-api/#ScriptProcessorNode" id="ref-for-ScriptProcessorNode①">ScriptProcessorNode</a></code>
            经常导致用户体验很差。<a data-link-type="biblio" href="#biblio-webaudio" title="Web Audio API">[WebAudio]</a>
        </p>
        <h3 class="heading settled" data-level="10.3" id="expose-everywhere"><span class="secno">10.3. </span><span
                class="content">仅纯计算能力可全局暴露</span><a class="self-link" href="#expose-everywhere"></a></h3>
        <p>开放新功能时，请评估是否适合在所有环境全局暴露
            （通过<code
                class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed">[Exposed=*]</a></code>
            注解或所有全局接口）。
        </p>
        <p>只有纯计算能力才可全局暴露。
            即不执行I/O，也不影响用户代理或用户设备状态。</p>
        <p class="example" id="example-e199054f"><a class="self-link" href="#example-e199054f"></a>
            <code
                class="idl"><a data-link-type="idl" href="https://encoding.spec.whatwg.org/#textencoder" id="ref-for-textencoder">TextEncoder</a></code>
            接口将字符串转为UTF-8字节，是纯计算接口，通用性强，应该全局暴露。
        </p>
        <p class="example" id="example-553789a6"><a class="self-link" href="#example-553789a6"></a>
            <a class="idl-code" data-link-type="attribute"
                href="https://html.spec.whatwg.org/multipage/webstorage.html#dom-localstorage"
                id="ref-for-dom-localstorage">localStorage</a>会影响用户代理状态，因此不应全局暴露。
        </p>
        <p class="example" id="example-6dca4ec6"><a class="self-link" href="#example-6dca4ec6"></a>
            技术上<code
                class="idl"><a data-link-type="idl" href="https://console.spec.whatwg.org/#namespacedef-console" id="ref-for-namespacedef-console">console</a></code>
            可能影响用户代理（如开发者工具日志）或设备（如写日志文件），
            但这些影响无法被运行代码观察，且console全局可用的实用性远大于弊端。
        </p>
        <p>此外，依赖事件循环的功能不应全局暴露。
            并非所有全局环境都有事件循环。</p>
        <p class="example" id="example-889d8e68"><a class="self-link" href="#example-889d8e68"></a>
            <code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-abortsignal-timeout" id="ref-for-dom-abortsignal-timeout">timeout</a></code>
            方法依赖事件循环，不应全局暴露。
            其它<code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortsignal" id="ref-for-abortsignal⑤">AbortSignal</a></code>
            功能为纯计算，可全局暴露。
        </p>
        <p><code
                class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed①">[Exposed=*]</a></code>
            注解也需谨慎使用。
            如某功能在未全局暴露的其它功能缺席时用处不大，则默认也不全局暴露。</p>
        <p class="example" id="example-8be633f8"><a class="self-link" href="#example-8be633f8"></a>
            <code
                class="idl"><a data-link-type="idl" href="https://w3c.github.io/FileAPI/#dfn-Blob" id="ref-for-dfn-Blob">Blob</a></code>
            接口是纯计算，但Blob对象主要用于I/O或由I/O产生。
            按保守原则，Blob不应全局暴露。
        </p>
        <h3 class="heading settled" data-level="10.4" id="new-data-formats"><span class="secno">10.4. </span><span
                class="content">规范添加新数据格式</span><a class="self-link" href="#new-data-formats"></a>
        </h3>
        <p>新增数据格式时，务必定义对应MIME类型，并扩展现有API支持此类型。</p>
        <p>Web新能力有时涉及新增数据格式，如图片、视频、音频、文本或浏览器需处理的其他数据类型。
            新格式应使用严格验证的标准MIME类型，文本类新格式仅支持UTF-8编码文本。</p>
        <p>虽有历史媒体格式未严格要求MIME类型（有时依赖头部检测），
            这仅用于兼容旧格式，不应作为新格式设计标准。</p>
        <p>规范作者还应将新格式集成进现有API，使其在输入（如ReadableStream解码）和输出（如WriteableStream编码）都安全可用。</p>
        <p>例如添加新图片格式时，先定义新MIME类型，再为HTMLImageElement添加对应解码器（及编码器），
            并扩展<code>HTMLCanvasElement.toBlob()</code>和<code>HTMLCanvasElement.toDataURL()</code>等输出接口。</p>
        <p>浏览器为兼容旧格式支持MIME类型嗅探，但不建议扩展<a
                href="https://mimesniff.spec.whatwg.org/#image-type-pattern-matching-algorithm">模式匹配算法</a>，
            因为有安全隐患。新格式建议严格使用MIME类型。</p>
        <p>新MIME类型应有规范，并向IANA注册。</p>
        <h3 class="heading settled" data-level="10.5" id="extend-manifests"><span class="secno">10.5. </span><span
                class="content">优先扩展已有manifest文件而非新建</span><a class="self-link" href="#extend-manifests"></a></h3>
        <p>如果你的功能需要manifest文件，
            请先考虑是否可以扩展现有的manifest规范。</p>
        <p>新的Web特性应尽量做到自包含和自描述，理想情况下不需要额外的manifest文件。
            现有的一些manifest文件包括：</p>
        <ul>
            <li data-md>
                <p><a href="https://www.w3.org/TR/appmanifest/">Web App Manifest</a>，包含与Web应用相关的功能。</p>
            <li data-md>
                <p><a href="https://www.w3.org/TR/payment-method-manifest/">Payment Method
                        Manifest</a>，用于Web支付API中的支付方式。</p>
            <li data-md>
                <p><a href="https://www.w3.org/TR/pub-manifest/">Publication Manifest</a>，用于部分Web出版物工作组标准。</p>
            <li data-md>
                <p><a href="https://wicg.github.io/origin-policy/">Origin Policy</a>，用于设置安全策略。</p>
        </ul>
        <p>我们鼓励大家优先扩展已有的manifest文件。
            应尽量将变更纳入原规范，或至少与规范编辑讨论扩展内容。
            讨论将有助于达成更优的设计，并更好地与平台集成。</p>
        <p>设计manifest新键值时，请确保它们确实有需求（即能实现明确的用例）。
            同时请检查是否已有类似的键。如果现有键值对基本满足需求，优先协作扩展原规范以支持你的用例。</p>
        <div class="note" role="note">
            有时原规范作者可能不会立刻集成manifest格式的变更。
            可能是流程原因（如进入CR阶段），
            也可能是新增内容作用范围不同，
            比如Web App Manifest的扩展只影响商店或支付场景。
            此时，可以在与规范编辑达成一致的前提下，采用<a data-link-type="dfn" href="#monkey-patch" id="ref-for-monkey-patch">monkey
                patch</a>方式。
        </div>
        <p>但如果你的功能需要大量特定领域的复杂元数据，则新建manifest可能是合理的。</p>
        <p>如果manifest文件的领域与现有manifest不同，可能需要新建manifest文件。
            例如，抓取时机不同，或manifest复杂度较高。应用元数据应加到Web App Manifest或作为其扩展。
            专用于特定应用或需与非浏览器互操作的manifest，可能需采用不同方式。
            Payment Method Manifest、Publication Manifest和Origin Policy就是此类例子。</p>
        <p>举例来说，如果你只有一条元数据，即使抓取时机与现有manifest不同，也建议使用现有manifest（或最好让设计不需manifest）。
            但如确实需要大量特定领域的复杂元数据，新建manifest则是合理选择。</p>
        <p>注意：所有情况下，命名规范应保持一致（参见<a href="#naming-is-hard">§ 12 命名原则</a>）。</p>
        <p class="note" role="note"><span class="marker">注意：</span> 按原则，现有manifest都采用小写、下划线分隔命名。
            有时需要在DOM API中复用manifest中的字典，这时名称需转换为驼峰式。
            例如<a href="https://w3c.github.io/image-resource/">image resource</a>。
            因此，如果一个键可以明确用单词表达，建议这样做。</p>
        <h3 class="heading settled" data-level="10.6" id="serialization"><span class="secno">10.6. </span><span
                class="content">序列化时要考虑消费者</span><a class="self-link" href="#serialization"></a></h3>

        当你添加或扩展涉及解析器或序列化器的功能时，应考虑序列化的效果。序列化结果的相关方包括：

        <ul>
            <li data-md>
                <p>用户——因为序列化结果可能直接展示给最终用户</p>
            <li data-md>
                <p>工具——可能以多种方式依赖序列化输出（比如判断解析器是否需要纠正输入错误）</p>
            <li data-md>
                <p>Web API——因为序列化结果可能作为参数传入其它Web平台API</p>
        </ul>
        <p>要考虑语言特定的预期——例如，在某些语言中，空白的有无可能很重要。
            不同语言对浮点数精度的接受程度也有差异。
            序列化结果：</p>
        <ul>
            <li data-md>
                <p>应符合开发者预期（比如序列化CSS属性时，输出不应与CSS作者手写的差异很大）</p>
            <li data-md>
                <p><a href="https://en.wikipedia.org/wiki/Idempotence">幂等性</a>——解析器输出的序列化结果应该能反复解析-序列化后仍得到自身</p>
            <li data-md>
                <p>不应加剧错误积累——把API序列化输出反复输入API，内部状态应保持一致</p>
        </ul>
        <h3 class="heading settled" data-level="10.7" id="debuggability"><span class="secno">10.7. </span><span
                class="content">确保功能对开发者友好</span><a class="self-link" href="#debuggability"></a></h3>
        <p>任何新功能都应对开发者友好。
            虽然“友好”难以量化，至少要考虑以下几点。</p>
        <p>异常中的错误文本应当通用，而开发者工具（如开发者控制台）中的错误信息必须有意义。
            当开发者遇到错误时，信息要具体，不能过于宽泛。</p>
        <p>理想情况下，面向开发者的错误信息应包含足够内容，帮助定位问题。</p>
        <p>声明式特性（如CSS），实现时可能需额外工作以提升调试性。
            规范中定义调试要求不仅让功能更友好，也保证用户开发体验一致。</p>
        <p>一个将调试性作为规范一部分的好例子是<a href="https://www.w3.org/TR/web-animations-1/#use-cases">Web Animations</a>。</p>
        <h3 class="heading settled" data-level="10.8" id="crypto"><span class="secno">10.8. </span><span
                class="content">使用最佳加密算法，并预期其不断演进</span><a class="self-link" href="#crypto"></a></h3>
        <p>只采用经过安全领域专家公正评审的加密算法，
            并确保所选算法经过验证且为最新。
            加密协议和算法不仅可能过时或变得不安全，还会快速演进。</p>
        <h3 class="heading settled" data-level="10.9" id="client-hints"><span class="secno">10.9. </span><span
                class="content">不要通过客户端提示暴露新信息</span><a class="self-link" href="#client-hints"></a></h3>
        <p>使用Client Hints时，不要暴露网页本身无法访问的新信息。</p>
        <p>客户端提示是重要优化手段，但不能成为暴露信息给网站的唯一方式。正如
            <cite><a href="https://datatracker.ietf.org/doc/html/rfc8942#section-4.1-5">RFC 8942 §4.1</a></cite>
            中定义Client Hint时所说：
        </p>
        <blockquote cite="https://datatracker.ietf.org/doc/html/rfc8942#section-4.1-5">
            <p>因此，依赖本文件定义Client Hint头的特性
                <strong>不得</strong>提供应用程序本不能通过用户代理获得的新信息，如已有请求头、HTML、CSS或JavaScript。
            </p>
        </blockquote>
        <p>如你要添加新客户端提示，且其暴露了网页无法通过其它方式获取的信息，
            请优先考虑通过API暴露这些信息。</p>
        <h2 class="heading settled" data-level="11" id="spec-writing"><span class="secno">11. </span><span
                class="content">编写高质量规范</span><a class="self-link" href="#spec-writing"></a></h2>
        <p>本文档主要关注Web API设计，
            但API设计者也应撰写他们所设计API的规范。</p>
        <h3 class="heading settled" data-level="11.1" id="requirements-on-authors-and-implementers"><span
                class="secno">11.1. </span><span class="content">明确规范要求的目标读者</span><a class="self-link"
                href="#requirements-on-authors-and-implementers"></a></h3>
        <p>既要描述作者如何用你的API写出优质代码，也要说明API实现者如何处理写得不好的代码。</p>
        <p>与其它平台相比，Web设计目标之一是对格式不规范内容的强容错，
            使得用老标准的网页在新用户代理上仍可浏览，
            也降低了作者的学习门槛。</p>
        <p>为此，Web规范作者需描述如何处理格式不规范内容，以及规范内容。</p>
        <p>实现者需要理解“支持的语言”，而不仅仅是作者应使用的“符合规范语言”，因为前者更复杂。</p>
        <div class="example" id="example-52a8e009"><a class="self-link" href="#example-52a8e009"></a>
            例如，
            <a href="https://html.spec.whatwg.org/multipage/tables.html#table-processing-model">表格处理模型</a>
            说明了如何处理<code>&lt;table></code>元素内容，
            包括内容不符合<a
                href="https://html.spec.whatwg.org/multipage/tables.html#the-table-element:concept-element-content-model">内容模型</a>的情况。
        </div>
        <h3 class="heading settled" data-level="11.2" id="avoid-ambiguity"><span class="secno">11.2. </span><span
                class="content">规范要完整、避免歧义</span><a class="self-link" href="#avoid-ambiguity"></a></h3>
        <p>规范功能时，要确保信息足够，让作者不必为不同实现编写不同代码。</p>
        <p>规范不够具体时，实现者可能做出不同选择，导致作者需写额外代码适配差异。</p>
        <p>实现者不应依赖其它实现细节来避免上述问题。
            规范本身应足够完整和清晰。</p>
        <p class="note" role="note"><span class="marker">注意：</span>这并不意味着实现不能有不同的渲染，或权限弹窗等用户界面不一样。</p>
        <p class="note" role="note"><span class="marker">注意：</span>如规范信息不明确，应由实现者反馈bug。</p>
        <h4 class="heading settled" data-level="11.2.1" id="algorithms"><span class="secno">11.2.1. </span><span
                class="content">算法需定义清楚</span><a class="self-link" href="#algorithms"></a></h4>
        <p>算法应写得清晰简明。</p>
        <p>最常见的算法写法是明确的步骤序列，通常类似伪代码。</p>
        <div class="example" id="example-5e6a38a5"><a class="self-link" href="#example-5e6a38a5"></a>
            <code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/interactive-elements.html#dom-dialog-showmodal" id="ref-for-dom-dialog-showmodal">showModal()</a></code>
            方法以编号步骤描述，清楚说明何时抛出异常，何时运行规范其它部分的算法。
        </div>
        <p>写步骤序列时，想象它是一段函数式代码。</p>
        <ul>
            <li data-md>
                <p>明确输入输出，为算法和变量命名，明确算法何处返回结果或错误。</p>
            <li data-md>
                <p>尽量避免写有副作用的算法。</p>
        </ul>
        <p>在详细说明前先总结算法目的，让读者决定是否需要读步骤细节。
            例如下面这些步骤，确保每个顶级浏览上下文最多有一个待处理的X回调。</p>
        <p>有时纯步骤序列不是写算法的最佳方式。
            比如，可能需要定义或复用正式语法/文法以避免重复，或定义状态机专用状态。
            用这些额外结构时，也应遵循前述建议。</p>
        <p>尽量按实际实现方式描述算法，这可能让规范书写更难，但有助于实现者直接对照规范实现。
            否则不同实现可能做出不同决策，导致后续特性只能在部分实现上可行。</p>
        <p class="example" id="example-e379a9a7"><a class="self-link" href="#example-e379a9a7"></a>
            CSS选择器在阅读时是从左到右，但实际实现是从右到左匹配。
            这样可以更快判断最具体项是否命中，避免无谓工作。
            CSS选择器匹配算法按此方式描述，而不是按CSS作者常见的阅读顺序。
        </p>
        <p>另见：</p>
        <ul>
            <li data-md>
                <p><a href="https://infra.spec.whatwg.org/#algorithms">一些有用的定义和术语</a>，见<a data-link-type="biblio"
                        href="#biblio-infra" title="Infra Standard">[INFRA]</a></p>
        </ul>
        <h4 class="heading settled" data-level="11.2.2" id="use-flags-for-states"><span class="secno">11.2.2.
            </span><span class="content">用显式标志表示状态</span><a class="self-link" href="#use-flags-for-states"></a></h4>
        <p>写算法时，避免用文字描述状态，应用显式标志。</p>
        <p>显式标志能清楚指明不同错误情况下状态是否变化，以及标志指示的状态何时重置。</p>
        <h3 class="heading settled" data-level="11.3" id="implementability"><span class="secno">11.3. </span><span
                class="content">兼顾互操作性与可实现性</span><a class="self-link" href="#implementability"></a></h3>
        <p>规范功能如同所有工程工作，都需权衡取舍。</p>
        <p>有时，即使所有人都尽力，也无法找到可互操作规范，又被所有实现者认同可实现的方案。</p>
        <p>选择方案时应以<a href="#priority-of-constituencies">最终用户利益为先</a>。</p>
        <p>首先，分析可实现性问题的本质。
            可能实现者认为存在用户风险，决定不实现该特性。
            此时，最好不要规范该特性，已发布的实现也应撤回。
            注意撤回特性可能导致用户与作者困惑。</p>
        <div class="example" id="sharedarraybuffer">
            <a class="self-link" href="#sharedarraybuffer"></a>
            <p>当Spectre攻击被发现后，
                <code
                    class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-SharedArrayBuffer" id="ref-for-idl-SharedArrayBuffer">SharedArrayBuffer</a></code>
                被所有实现撤回，因为它可用来构造高精度计时器，进而被用于Spectre攻击。
            </p>
        </div>
        <p>有时同一API所有引擎都能实现，但行为无法完全互操作。
            只要行为有差异，就要考虑最终用户影响。
            这种方式的不足是行为差异无法<a href="#feature-detect">特性检测</a>。
            但如果未来实现能统一行为，网站无需更新即可受益。</p>
        <p class="note" role="note"><span class="marker">注意：</span>作者可能认为主流实现的行为是正确的，其它行为是bug，这反而巩固了主流实现地位。</p>
        <div class="example" id="backdrop-filter">
            <a class="self-link" href="#backdrop-filter"></a>
            <p><a class="property css" data-link-type="property"
                    href="https://drafts.fxtf.org/filter-effects-2/#propdef-backdrop-filter"
                    id="ref-for-propdef-backdrop-filter">backdrop-filter</a>属性在不同实现间有明显可见的行为差异。
                当前维护者认为共享API的好处大于互操作性代价。</p>
        </div>
        <p>如行为差异严重且无法统一，可能更适合规范不同API，各实现者选择可实现的替代方案。</p>
        <p>这种方式的风险是：如果实现最终能统一行为，则需要长期支持多个API，增加开发者负担和维护成本。</p>
        <p>针对同一用例暴露两个API，迫使作者通过<a href="#feature-detect">特性检测</a>为不同浏览器编写不同代码。</p>
        <p class="note" role="note"><span
                class="marker">注意：</span>风险在于作者可能认为主流实现支持的API才是“正确”的，或根本不知道其它实现支持的API，从而进一步巩固主流实现地位。</p>
        <p>如选择此方案，应尽量减少API差异。可考虑将非标准部分设为大规范的小组件。</p>
        <div class="example" id="eme-and-payment-request">
            <a class="self-link" href="#eme-and-payment-request"></a>
            <p><a data-link-type="biblio" href="#biblio-encrypted-media"
                    title="Encrypted Media Extensions">[ENCRYPTED-MEDIA]</a>和<a data-link-type="biblio"
                    href="#biblio-payment-request" title="Payment Request API">[payment-request]</a>规范都通过将非标准组件（如<a
                    href="https://w3c.github.io/encrypted-media/#dfn-cdm">内容解密模块</a>和<a
                    href="https://www.w3.org/TR/payment-method-manifest/">支付方式</a>）与主API解耦，来最小化API差异。</p>
        </div>
        <p>有时标准组织会规范API，明知部分实现者不愿实现。
            作者可用特性检测，仅在API可用时使用，用户在支持API的环境下可受益。
            这种结果总有问题，尤其只有一个实现者愿意实现时最糟。
            有些标准组织明文禁止规范只有单一实现者感兴趣的功能。
            即使不受此限制，也强烈不建议规范仅有单一实现者的功能。</p>
        <p>还有可能上述所有方案都不可行。虽最佳选择可能是不规范该功能，但也有风险：某些实现者可能会以非标准API发布该功能。</p>
        <h3 class="heading settled" data-level="11.4" id="monkey-patching"><span class="secno">11.4. </span><span
                class="content">避免monkey patch</span><a class="self-link" href="#monkey-patching"></a></h3>

        <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="monkey-patch">monkey
            patch</dfn>是指在已有规范基础上叠加新功能，以扩展、重写或修改原规范行为。
        <a href="https://en.wikipedia.org/wiki/Monkey_patch">Monkey
            patch</a><strong>通常被视为不良实践，应尽量避免</strong>，原因如下，但有时不得不采用（见<a
            href="#cant-avoid-monkey-patching">如何应对不可避免的monkey patch</a>）。

        <p>示例：规范A定义某内部算法，规范B直接覆盖或修改该算法功能，而不是用公开的扩展点。</p>
        <p>monkey patch本质上假设底层功能不会改变，这会导致多个问题：</p>
        <ul>
            <li data-md>
                <p>如原规范变动，monkey patch内容可能不再适用，导致失效或困惑。</p>
            <li data-md>
                <p>多个规范对同一规范做monkey patch时，应用顺序不同可能导致行为不一致。</p>
            <li data-md>
                <p>原规范作者可能不知道你的monkey patch，错失协作修复机会。更糟的是，所修改行为可能与其它问题或行为关联，使问题更复杂。</p>
            <li data-md>
                <p>实现者维护代码时仅参考原规范，可能误将monkey patch行为当作bug而回滚。</p>
        </ul>
        <p>Wikipedia还描述了<a href="https://en.wikipedia.org/wiki/Monkey_patch#Pitfalls">monkey patch的其它陷阱</a>。</p>
        <h4 class="heading settled" data-level="11.4.1" id="cant-avoid-monkey-patching"><span class="secno">11.4.1.
            </span><span class="content">如必须monkey patch该怎么做</span><a class="self-link"
                href="#cant-avoid-monkey-patching"></a></h4>

        有时monkey patch不可避免（如新规范设计阶段）。如必须monkey patch现有规范，请确保：

        <ol>
            <li data-md>
                <p>在你的规范中，明确标记monkey patch为对其它规范的临时变更，用类似如下语言：</p>
                <div class="example" id="example-mark-monkeypatch">
                    <a class="self-link" href="#example-mark-monkeypatch"></a>
                    <pre class="language-markdown highlight"># 修改HTTP fetch

&lt;p class="issue">等获得足够共识后合并进[[Fetch]]。&lt;/p>
</pre>
                </div>
            <li data-md>
                <p>用引用原文或链接定义项明确指出你要修改的内容。替换整个定义时用链接，修改编号步骤时包含当前编号，但不要只用编号（编号会变）。如要修改定义中多个位置，可将整个定义粘贴到<code>&lt;blockquote></code>中，用<code>&lt;ins></code>和<code>&lt;del></code>标记变化。
                </p>
                <div class="example" id="example-monkeypatch-quote-text-before-step">
                    <a class="self-link" href="#example-monkeypatch-quote-text-before-step"></a>
                    <p>在<a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-http-fetch"
                            id="ref-for-concept-http-fetch">HTTP fetch</a>第4.2步前，“如request的redirect
                        mode为"follow"，则将request的service-workers mode设为"none"。”插入如下步骤：</p>
                    <ol>
                        <li data-md>
                            <p>新的第一个步骤。</p>
                    </ol>
                </div>
                <div class="example" id="example-monkeypatch-quote-text-replace-def">
                    <a class="self-link" href="#example-monkeypatch-quote-text-replace-def"></a>
                    <p>对于CSS2.1块级格式化<a data-link-type="biblio" href="#biblio-css2"
                            title="Cascading Style Sheets Level 2 Revision 1 (CSS 2.1) Specification">[CSS2]</a>，CSS 2
                        § 10.3.3中“over-constrained”计算规则应被此处指定的对齐规则取代，相应margin属性的used值不再为over-constraint做修正。</p>
                </div>
                <div class="example" id="example-monkeypatch-quote-text-change-idl">
                    <a class="self-link" href="#example-monkeypatch-quote-text-change-idl"></a>
                    <p>在定义<code><code class="idl"><a data-link-type="idl" href="https://url.spec.whatwg.org/#urlsearchparams" id="ref-for-urlsearchparams①">URLSearchParams</a></code>.<code
                            class="idl"><a data-link-type="idl" href="https://url.spec.whatwg.org/#dom-urlsearchparams-delete" id="ref-for-dom-urlsearchparams-delete">delete()</a></code></code>和
                        <code><code class="idl"><a data-link-type="idl" href="https://url.spec.whatwg.org/#urlsearchparams" id="ref-for-urlsearchparams②">URLSearchParams</a></code>.<code
                            class="idl"><a data-link-type="idl" href="https://url.spec.whatwg.org/#dom-urlsearchparams-has" id="ref-for-dom-urlsearchparams-has">has()</a></code></code>时，追加<code>optional USVString value</code>参数：
                    </p>
                    <pre class="idl highlight def"><c- b>partial</c-> <c- b>interface</c-> <c- g>URLSearchParams</c-> {
  <c- b>undefined</c-> <c- g>delete</c->(<c- b>USVString</c-> <c- g>name</c-><ins>, <c- b>optional</c-> <c- b>USVString</c-> <c- g>value</c-></ins>);
  <c- b>boolean</c-> <c- g>has</c->(<c- b>USVString</c-> <c- g>name</c-><ins>, <c- b>optional</c-> <c- b>USVString</c-> <c- g>value</c-></ins>);
};
</pre>
                </div>
                <div class="example" id="example-monkeypatch-quote-text-change-css">
                    <a class="self-link" href="#example-monkeypatch-quote-text-change-css"></a>
                    <p>按如下方式修改<a class="css" data-link-type="property"
                            href="https://drafts.csswg.org/css-fonts-4/#propdef-font-size-adjust"
                            id="ref-for-propdef-font-size-adjust">font-size-adjust</a>定义：</p>
                    <table class="def propdef" data-link-for-hint="font-size-adjust">
                        <tbody>
                            <tr>
                                <th>Name:
                                <td><dfn class="dfn-paneled css" data-dfn-type="property" data-export
                                        id="propdef-font-size-adjust">font-size-adjust</dfn>
                            <tr class="value">
                                <th><a href="https://www.w3.org/TR/css-values/#value-defs">Value:</a>
                                <td class="prod">
                                    none <a data-link-type="grammar"
                                        href="https://drafts.csswg.org/css-values-4/#comb-one"
                                        id="ref-for-comb-one">|</a>
                                    <ins>[ ex-height <a data-link-type="grammar"
                                            href="https://drafts.csswg.org/css-values-4/#comb-one"
                                            id="ref-for-comb-one①">|</a> cap-height <a data-link-type="grammar"
                                            href="https://drafts.csswg.org/css-values-4/#comb-one"
                                            id="ref-for-comb-one②">|</a> ch-width <a data-link-type="grammar"
                                            href="https://drafts.csswg.org/css-values-4/#comb-one"
                                            id="ref-for-comb-one③">|</a> ic-width <a data-link-type="grammar"
                                            href="https://drafts.csswg.org/css-values-4/#comb-one"
                                            id="ref-for-comb-one④">|</a> ic-height ]<a data-link-type="grammar"
                                            href="https://drafts.csswg.org/css-values-4/#mult-opt"
                                            id="ref-for-mult-opt">?</a> [ from-font <a data-link-type="grammar"
                                            href="https://drafts.csswg.org/css-values-4/#comb-one"
                                            id="ref-for-comb-one⑤">|</a></ins>
                                    <a class="production css" data-link-type="type"
                                        href="https://drafts.csswg.org/css-values-4/#number-value"
                                        id="ref-for-number-value②">&lt;number></a>
                                    <ins>]</ins>
                            <tr>
                                <th><a href="https://www.w3.org/TR/css-cascade/#initial-values">Initial:</a>
                                <td>none
                            <tr>
                                <th><a href="https://www.w3.org/TR/css-cascade/#applies-to">Applies to:</a>
                                <td>all elements and text
                            <tr>
                                <th><a href="https://www.w3.org/TR/css-cascade/#inherited-property">Inherited:</a>
                                <td>yes
                            <tr>
                                <th><a href="https://www.w3.org/TR/css-values/#percentages">Percentages:</a>
                                <td>N/A
                            <tr>
                                <th><a href="https://www.w3.org/TR/css-cascade/#computed">Computed value:</a>
                                <td>
                                    <del>a number or the keyword none</del>
                                    <ins>关键词<a class="css" data-link-type="maybe"
                                            href="https://drafts.csswg.org/css-fonts-5/#valdef-font-size-adjust-none"
                                            id="ref-for-valdef-font-size-adjust-none">none</a>，或一组度量关键词和<a
                                            class="production css" data-link-type="type"
                                            href="https://drafts.csswg.org/css-values-4/#number-value"
                                            id="ref-for-number-value③">&lt;number></a></ins>
                            <tr>
                                <th><a href="https://www.w3.org/TR/cssom/#serializing-css-values">Canonical order:</a>
                                <td>per grammar
                            <tr>
                                <th><a href="https://www.w3.org/TR/web-animations/#animation-type">Animation type:</a>
                                <td>
                                    <ins>如关键词不同则离散，否则 </ins>
                                    by computed value type
                    </table>
                </div>
            <li data-md>
                <p>保持monkey patch简短。如对算法增补多步，建议在规范中定义单独算法，由monkey patch调用。</p>
            <li data-md>
                <p>替换或添加算法步骤时，务必使新步骤能被编辑者直接原样粘贴到上游算法中。控制流如“return”或“abort”应返回或终止整个上游算法，而非仅monkey patch部分。</p>
            <li data-md>
                <p>在本社区审查并达成共识后，提交issue至原规范，请上游社区审查你的monkey patch。社区可能建议更优方案，需认真对待。他们或许能告知现有扩展点或快速创建新扩展点，让你比预期更快移除monkey
                    patch。</p>
            <li data-md>
                <p>更新上述<code>&lt;p class="issue"></code>块，指向你提交的上游issue。</p>
            <li data-md>
                <p>如获得足够支持可合并到上游规范，配合规范维护者完成合并。</p>
            <li data-md>
                <p>上游规范集成后，从你的规范中移除monkey patch。</p>
        </ol>
        <p>注意，<a data-link-type="dfn" href="#monkey-patch" id="ref-for-monkey-patch①">monkey
                patching</a>不同于“模块化”，后者以自包含方式扩展技术，不影响其它底层规范（如CSS模块），被视为良好实践。</p>
        <p>通常也可以用WebIDL的<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-partial-interface"
                id="ref-for-dfn-partial-interface">partial interface</a>、
            <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-partial-dictionary"
                id="ref-for-dfn-partial-dictionary">partial dictionary</a>等方式扩展规范。
            但即使如此，也强烈建议与被扩展规范作者协作。
        </p>
        <h2 class="heading settled" data-level="12" id="naming-is-hard"><span class="secno">12. </span><span
                class="content">命名原则</span><a class="self-link" href="#naming-is-hard"></a></h2>
        <p>名字的含义来源于：</p>
        <ul>
            <li data-md>
                <p>标识（名字本身）</p>
            <li data-md>
                <p>使用（人们随着时间理解名字的方式）</p>
            <li data-md>
                <p>上下文（如左侧的对象）</p>
        </ul>
        <h3 class="heading settled" data-level="12.1" id="naming-common-words"><span class="secno">12.1. </span><span
                class="content">用常用词命名</span><a class="self-link" href="#naming-common-words"></a></h3>
        <p>API命名<em>必须</em>易读且用美式英语。
            要记住大多数Web开发者并非英语母语者。
            名字应尽量用大多数英语使用者初见即能理解的常用词汇。</p>
        <div class="example" id="example-d0367763">
            <a class="self-link" href="#example-d0367763"></a>
            <p>比如<code>setSize</code>比<code>cardinality</code>更容易理解。</p>
        </div>
        <p>优先考虑易读性，而不是简洁性。
            避免使用缩写，
            除非该缩写极为常见且易于理解。
            例如 <code>UIEvent</code>，其中 "<code>UI</code>" 代表用户界面。
            但请注意，
            更短的名称往往更清晰。
            比如，
            在定义 API 的规范中，可能适合使用技术术语或众所周知的专业术语。</p>
        <div class="example" id="example-3cd78f17">
            <a class="self-link" href="#example-3cd78f17"></a>
            <p>比如，Fetch API的<code
                    class="idl"><a data-link-type="idl" href="https://fetch.spec.whatwg.org/#body" id="ref-for-body">Body</a></code>
                mixin的<code
                    class="idl"><a data-link-type="idl" href="https://fetch.spec.whatwg.org/#dom-body-json" id="ref-for-dom-body-json">json()</a></code>方法，就是根据返回对象类型命名。
                JSON是Web开发者熟悉的术语。如果该API用和返回类型无关的名字，反而会增加理解难度。<a data-link-type="biblio" href="#biblio-fetch"
                    title="Fetch Standard">[FETCH]</a></p>
        </div>
        <h3 class="heading settled" data-level="12.2" id="naming-charset"><span class="secno">12.2. </span><span
                class="content">用ASCII字符命名</span><a class="self-link" href="#naming-charset"></a></h3>
        <p>名字必须遵守本地语言约束，例如CSS标识符规则等，
            并<em>应</em>在<a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-code-point"
                id="ref-for-ascii-code-point">ASCII范围</a>。</p>
        <h3 class="heading settled" data-level="12.3" id="naming-consultation"><span class="secno">12.3. </span><span
                class="content">命名要广泛征询意见</span><a class="self-link" href="#naming-consultation"></a>
        </h3>
        <p>API命名要广泛咨询。</p>
        <p>你可能会在意想不到的地方找到好名字或灵感。</p>
        <ul>
            <li data-md>
                <p>其它平台或主流库对类似API怎么命名？</p>
            <li data-md>
                <p>问终端用户和开发者，他们如何称呼API操作或处理的事物。</p>
            <li data-md>
                <p>查阅其它Web平台规范，并向相关领域的人员征询意见。</p>
            <li data-md>
                <p>同时考虑命名是否具有包容性。</p>
        </ul>
        <p>特别关注那些有明确原理说明的建议。</p>
        <div class="example" id="example-1f37c106">
            <a class="self-link" href="#example-1f37c106"></a>
            <p>Tantek Çelik <a href="https://tantek.com/2011/238/b1/many-ways-slice-url-name-pieces">深入研究了</a>
                URL各部分如何命名。
                <a href="https://url.spec.whatwg.org">URL规范</a>编辑者在编辑文档时参考了这些研究。<a data-link-type="biblio"
                    href="#biblio-url" title="URL Standard">[URL]</a>
            </p>
        </div>
        <h4 class="no-num no-toc heading settled" id="naming-web-consistency"><span class="content">遵循Web一致性命名</span><a
                class="self-link" href="#naming-web-consistency"></a></h4>
        在为在其它技术栈中也有暴露的特性或API命名时，应优先采用Web生态系统的命名约定，而不是其他社区的约定。
        <div class="example" id="example-2ef86e6f">
            <a class="self-link" href="#example-2ef86e6f"></a>
            <p>NFC标准用<code>media</code>指Web中称为<a href="https://mimesniff.spec.whatwg.org/#mime-type-representation">MIME
                    type</a>的内容。
                这种情况下，Web NFC的特性或API命名应优先采用与<code>MIME type</code>一致的命名。</p>
        </div>
        <h4 class="no-num no-toc heading settled" id="naming-inclusive"><span class="content">使用包容性语言</span><a
                class="self-link" href="#naming-inclusive"></a></h4>
        <p>应尽量使用包容性语言。</p>
        <p>比如，
            应用blocklist和allowlist代替blacklist和whitelist，
            用source和replica代替master和slave。</p>
        <p>如需描述泛指角色，如作者或用户，
            应用通用代词“they”、“their”等。
            例如：“A user may wish to adjust their preferences”。</p>
        <h3 class="heading settled" data-level="12.4" id="naming-future-proofing"><span class="secno">12.4. </span><span
                class="content">用描述用途的名字</span><a class="self-link" href="#naming-future-proofing"></a></h3>
        <p>命名应反映其用途，而不是实现方式。</p>
        <p>反映用途的名字更具前向兼容性。
            <a href="#removing-features">Web上的API很难移除</a>，
            所以名字应比实现细节更长久。
        </p>
        <p>尤其要避免用
            代码名、
            品牌名、
            或底层技术细节命名。
            这些容易过时，将来可能需要替换。</p>
        <div class="example" id="example-fd8a196a">
            <a class="self-link" href="#example-fd8a196a"></a>
            <p>Remote Playback API没有用它受启发的专有系统名（如Chromecast或AirPlay）命名，
                而是选用描述API功能的通用词。<a data-link-type="biblio" href="#biblio-remote-playback"
                    title="Remote Playback API">[REMOTE-PLAYBACK]</a></p>
        </div>
        <div class="example" id="example-4a43ecba">
            <a class="self-link" href="#example-4a43ecba"></a>
            <p>WebTransport API实现了QUIC协议的网络能力，
                但名称反映的是更通用的数据传输能力。
                <a data-link-type="biblio" href="#biblio-webtransport" title="WebTransport">[WebTransport]</a><a
                    data-link-type="biblio" href="#biblio-rfc9000"
                    title="QUIC: A UDP-Based Multiplexed and Secure Transport">[RFC9000]</a>
            </p>
        </div>
        <h3 class="heading settled" data-level="12.5" id="naming-consistency"><span class="secno">12.5. </span><span
                class="content">一致命名事物</span><a class="self-link" href="#naming-consistency"></a></h3>
        命名方案应追求一致性，避免混淆。
        <p>相关名字的集合应在以下方面一致：</p>
        <ul>
            <li data-md>
                <p>词性（名词、动词等）</p>
            <li data-md>
                <p>否定——比如一组名字应都描述允许的内容，或者都描述被拒绝的内容</p>
        </ul>
        <h4 class="no-num no-toc heading settled" id="naming-booleans"><span class="content">布尔属性 vs. 返回布尔值的方法</span><a
                class="self-link" href="#naming-booleans"></a></h4>
        <p>布尔属性、选项或API参数如询问其参数，
            <em>不应</em>以<code>is</code>为前缀；而无副作用、作用相同的方法<em>应</em>以<code>is</code>为前缀，以与平台其它部分一致。
        </p>
        <h4 class="no-num no-toc heading settled" id="casing-rules"><span class="content">遵循现有API的大小写规则</span><a
                class="self-link" href="#casing-rules"></a></h4>
        <p>虽然历史上并非总能统一，Web平台API设计已形成如下规则：</p>
        <table class="data complex informative">
            <thead>
                <tr>
                    <th>
                    <th>大小写规则
                    <th>例子
            <tbody>
                <tr>
                    <th>方法和属性<br>(Web IDL属性、操作和字典键)
                    <td>驼峰式
                    <td><code
                            class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-document-createattribute" id="ref-for-dom-document-createattribute">createAttribute()</a></code><br>
                        <code
                            class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-document-compatmode" id="ref-for-dom-document-compatmode">compatMode</a></code>
                <tr>
                    <th>类和mixin<br>(Web IDL接口)
                    <td>帕斯卡式（首字母大写）
                    <td><code
                            class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#namednodemap" id="ref-for-namednodemap">NamedNodeMap</a></code><br>
                        <code
                            class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#nonelementparentnode" id="ref-for-nonelementparentnode">NonElementParentNode</a></code>
                <tr>
                    <th>API中的缩写词
                    <td>全大写，但方法或属性首词例外
                    <td><code
                            class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#htmlcollection" id="ref-for-htmlcollection②">HTMLCollection</a></code><br>
                        <code
                            class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-element-innerhtml" id="ref-for-dom-element-innerhtml">innerHTML</a></code><br>
                        <code
                            class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/obsolete.html#dom-document-bgcolor" id="ref-for-dom-document-bgcolor">bgColor</a></code>
                <tr>
                    <th>API中重复缩写词
                    <td>同样规则
                    <td><code
                            class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/grouping-content.html#htmlhrelement" id="ref-for-htmlhrelement">HTMLHRElement</a></code><br>
                        <code
                            class="idl"><a data-link-type="idl" href="https://w3c.github.io/webrtc-pc/#dom-rtcdtmfsender" id="ref-for-dom-rtcdtmfsender">RTCDTMFSender</a></code><br>
                <tr>
                    <th>“identity”/“identifier”的缩写
                    <td><code>Id</code>，但方法或属性首词例外
                    <td><code
                            class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-nonelementparentnode-getelementbyid" id="ref-for-dom-nonelementparentnode-getelementbyid">getElementById()</a></code><br>
                        <code
                            class="idl"><a data-link-type="idl" href="https://w3c.github.io/pointerevents/#dom-pointerevent-pointerid" id="ref-for-dom-pointerevent-pointerid">pointerId</a></code><br>
                        <code
                            class="idl"><a data-link-type="idl" href="https://w3c.github.io/webappsec-credential-management/#dom-credential-id" id="ref-for-dom-credential-id">id</a></code>
                <tr>
                    <th>枚举值
                    <td>小写，用连字符分隔
                    <td><code
                            class="idl"><a data-link-type="idl" href="https://w3c.github.io/webappsec-referrer-policy/#dom-referrerpolicy-no-referrer-when-downgrade" id="ref-for-dom-referrerpolicy-no-referrer-when-downgrade">"no-referrer-when-downgrade"</a></code>
                <tr>
                    <th>事件
                    <td>小写，连写
                    <td><code><code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/media.html#event-media-canplaythrough" id="ref-for-event-media-canplaythrough">canplaythrough</a></code></code><br>
                        <code><code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/indices.html#event-languagechange" id="ref-for-event-languagechange">languagechange</a></code></code>
                <tr>
                    <th>HTML元素和属性
                    <td>小写，连写
                    <td><code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/grouping-content.html#the-figcaption-element" id="ref-for-the-figcaption-element">figcaption</a></code><br>
                        <a
                            href="https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#attr-fe-maxlength">maxlength</a>
                <tr>
                    <th>JSON键
                    <td>小写，下划线分隔
                    <td><a data-link-type="dfn" href="https://w3c.github.io/manifest/#dfn-short_name"
                            id="ref-for-dfn-short_name">short_name</a>
        </table>
        <div class="non-normative">
            注意，尤其是HTML属性<a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/common-dom-interfaces.html#reflect"
                id="ref-for-reflect①">映射</a>为属性时，属性和属性名大小写不一定匹配。例如，<code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/embedded-content.html#attr-img-ismap" id="ref-for-attr-img-ismap">ismap</a></code>属性在
            <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/embedded-content.html#the-img-element" id="ref-for-the-img-element②">img</a></code>元素上<a
                data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/common-dom-interfaces.html#reflect"
                id="ref-for-reflect②">映射</a>为
            <code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/embedded-content.html#dom-img-ismap" id="ref-for-dom-img-ismap">isMap</a></code>
            属性（在<code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/embedded-content.html#htmlimageelement" id="ref-for-htmlimageelement">HTMLImageElement</a></code>上）。
            <p>JSON键规则适用于通过HTTP发送或磁盘存储的特定JSON文件格式，不适用于一般JS对象键。</p>
            <p>重复缩写在平台中尤其不统一，典型反例有<code
                    class="idl"><a data-link-type="idl" href="https://xhr.spec.whatwg.org/#xmlhttprequest" id="ref-for-xmlhttprequest②">XMLHttpRequest</a></code>和
                <code
                    class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/semantics.html#htmlhtmlelement" id="ref-for-htmlhtmlelement">HTMLHtmlElement</a></code>。
                不要效仿，应始终大写缩写，即使重复。
            </p>
        </div>
        <h4 class="no-num no-toc heading settled" id="factory-naming"><span
                class="content">工厂方法名以<code>create</code>或<code>from</code>开头</span><a class="self-link"
                href="#factory-naming"></a>
        </h4>
        <p>工厂方法命名应以<code>create</code>或<code>from</code>开头，后面可加更具体名词。</p>
        <p>如工厂方法构造新空对象，用<code>create</code>前缀；
            如从已有数据创建对象，用<code>from</code>前缀。</p>
        <p>工厂方法应是例外，仅在<a href="#constructors">确有合理理由</a>时使用。
            典型例子是创建对象还需关联父对象，比如<code>document.createXXX()</code>。</p>
        <p>如需从源对象转换为目标对象，用<code>from</code>前缀。
            比如<code>Foo.fromBar()</code>表示用<code>Bar</code>对象创建<code>Foo</code>对象。</p>
        <p>常见通用工厂方法命名为<code>create()</code>或<code>from()</code>。</p>
        <p>避免发明其它前缀或用遗留前缀，除非为保持同一对象下现有工厂方法一致。
            比如<code>document.initXXX()</code>，但新工厂方法不应再用此约定。</p>
        <h3 class="heading settled" data-level="12.6" id="naming-unsafe"><span class="secno">12.6. </span><span
                class="content">危险特性应有警示</span><a class="self-link" href="#naming-unsafe"></a></h3>
        <p>如有可能，削弱开发者保障的特性应以“unsafe”开头以便警示。</p>
        <p>比如，
            <a href="https://w3c.github.io/webappsec-csp/">内容安全策略（CSP）</a>
            可防止某些内容注入漏洞，
            但CSP也有削弱自身保障的特性，如<code>unsafe-inline</code>关键字允许内联脚本，降低CSP的保护能力。
        </p>
        <h2 class="heading settled" data-level="13" id="writing-resources"><span class="secno">13. </span><span
                class="content">其它资源</span><a class="self-link" href="#writing-resources"></a></h2>
        <p>其它关于如何编写规范的建议：</p>
        <ul>
            <li data-md>
                <p><a href="https://ln.hixie.ch/?start=1140242962&amp;count=1">编写规范：语句类型</a>（Ian Hickson, 2006）</p>
            <li data-md>
                <p><a href="https://www.w3.org/TR/qaframe-spec/">QA框架：规范指南</a>（W3C QA工作组, 2005）</p>
            <li data-md>
                <p><a data-biblio-display="inline" data-link-type="biblio"
                        href="https://w3ctag.github.io/privacy-principles/"><cite>隐私原则</cite></a></p>
            <li data-md>
                <p><a href="https://www.w3.org/TR/security-privacy-questionnaire/">安全与隐私自查问卷</a></p>
            <li data-md>
                <p><a href="https://w3c.github.io/apa/fast/">Web技术可访问性指南</a></p>
            <li data-md>
                <p><a href="https://w3c.github.io/bp-i18n-specdev/">规范开发者国际化最佳实践</a></p>
        </ul>
        <h2 class="no-num heading settled" id="acks"><span class="content">致谢</span><a class="self-link"
                href="#acks"></a></h2>
        <p>本文档内容集结于TAG现任和前任成员在TAG <a href="https://github.com/w3ctag/design-reviews/">设计评审</a>过程中的经验。
            感谢所有向我们申请设计评审的人。</p>
        <p>TAG感谢
            Adrian Hope-Bailie,
            Alan Stearns,
            Aleksandar Totic,
            Alex Russell,
            Alice Boxhall,
            Andreas Stöckel,
            Andrew Betts,
            Anne van Kesteren,
            Benjamin C. Wiley Sittler,
            Boris Zbarsky,
            Brian Kardell,
            Charles McCathieNevile,
            Chris Wilson,
            Dan Connolly,
            Daniel Ehrenberg,
            Daniel Murphy,
            David Baron,
            Domenic Denicola,
            Eiji Kitamura,
            Eric Shepherd,
            Ethan Resnick,
            fantasai,
            François Daoust,
            Henri Sivonen,
            HE Shi-Jun,
            Ian Hickson,
            Irene Knapp,
            Jake Archibald,
            Jeffrey Yasskin,
            Jeremy Roman,
            Jirka Kosek,
            Kenneth Rohde Christiansen,
            Kevin Marks,
            Lachlan Hunt,
            Léonie Watson,
            L. Le Meur,
            Lukasz Olejnik,
            Maciej Stachowiak,
            Marcos Cáceres,
            Mark Nottingham,
            Martin Thomson,
            Matt Giuca,
            Matt Wolenetz,
            Michael[tm] Smith,
            Mike West,
            Nick Doty,
            Nigel Megitt,
            Nik Thierry,
            Ojan Vafai,
            Olli Pettay,
            Pete Snyder,
            Philip Jägenstedt,
            Philip Taylor,
            Reilly Grant,
            Richard Ishida,
            Rick Byers,
            Rossen Atanassov,
            Ryan Sleevi,
            Sangwhan Moon,
            Sergey Konstantinov,
            Stefan Zager,
            Stephen Stewart,
            Steven Faulkner,
            Surma,
            Tab Atkins-Bittner,
            Tantek Çelik,
            Tobie Langel,
            Travis Leithead,
            和
            Yoav Weiss
            对本文档及其前身<a href="https://www.w3.org/TR/html-design-principles/">HTML设计原则</a>的贡献。</p>
        <p>特别感谢
            Anne van Kesteren
            和
            Maciej Stachowiak,
            编辑了<a href="https://www.w3.org/TR/html-design-principles/">HTML设计原则</a>文档。
        </p>
        <p>如果你对本文档有贡献但未列名，请通知编辑以便更正遗漏。</p>
    </main>
    <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
    <h2 class="no-num no-ref heading settled" id="index"><span class="content">索引</span><a class="self-link"
            href="#index"></a></h2>
    <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">本规范定义的术语</span><a
            class="self-link" href="#index-defined-here"></a></h3>
    <ul class="index">
        <li><a href="#propdef-font-size-adjust">font-size-adjust</a><span>，见 § 11.4.1</span>
        <li><a href="#live-object">live object</a><span>，见 § 6.3</span>
        <li><a href="#monkey-patch">monkey patch</a><span>，见 § 11.4</span>
        <li><a href="#static-object">static object</a><span>，见 § 6.3</span>
    </ul>
    <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">引用定义的术语</span><a
            class="self-link" href="#index-defined-elsewhere"></a></h3>
    <ul class="index">
        <li>
            <a data-link-type="biblio">[APPMANIFEST]</a> 定义了如下术语：
            <ul>
                <li><span class="dfn-paneled" id="bfa87d79">short_name</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CONSOLE]</a> 定义了如下术语：
            <ul>
                <li><span class="dfn-paneled" id="7b1760b0">console</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CREDENTIAL-MANAGEMENT-1]</a> 定义了如下术语：
            <ul>
                <li><span class="dfn-paneled" id="cbdd0aff">id</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-BACKGROUNDS-3]</a> 定义了如下术语：
            <ul>
                <li><span class="dfn-paneled" id="f831c141">background-image</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-CASCADE-5]</a> 定义了如下术语：
            <ul>
                <li><span class="dfn-paneled" id="5d83727e">actual value</span>
                <li><span class="dfn-paneled" id="9cd25054">computed value</span>
                <li><span class="dfn-paneled" id="21ec9802">inherit</span>
                <li><span class="dfn-paneled" id="a4eb3c57">used value</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-CONDITIONAL-3]</a> 定义了如下术语：
            <ul>
                <li><span class="dfn-paneled" id="c1ebc639">@supports</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-FONTS-4]</a> 定义了如下术语：
            <ul>
                <li><span class="dfn-paneled" id="fdf6efd5">font-size</span>
                <li><span class="dfn-paneled" id="99a3763c">font-size-adjust</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-FONTS-5]</a> 定义了如下术语：
            <ul>
                <li><span class="dfn-paneled" id="3b64181e">none</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-INLINE-3]</a> 定义了如下术语：
            <ul>
                <li><span class="dfn-paneled" id="12cf38c9">initial-letter</span>
                <li><span class="dfn-paneled" id="3245cc5d">initial-letter-align</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-VALUES-4]</a> 定义了如下术语：
            <ul>
                <li><span class="dfn-paneled" id="fb030e6c">&lt;length></span>
                <li><span class="dfn-paneled" id="16310992">&lt;number></span>
                <li><span class="dfn-paneled" id="537cf076">?</span>
                <li><span class="dfn-paneled" id="6ec67710">|</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS2]</a> 定义了如下术语：
            <ul>
                <li><span class="dfn-paneled" id="ac54fbff">line-height</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSSOM-1]</a> 定义了如下术语：
            <ul>
                <li><span class="dfn-paneled" id="b203675a">getComputedStyle(elt)</span>
                <li><span class="dfn-paneled" id="4fe61159">resolved value</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSSOM-VIEW-1]</a> 定义了如下术语：
            <ul>
                <li><span class="dfn-paneled" id="d38f9598">getBoundingClientRect()</span>
                <li><span class="dfn-paneled" id="d977a5dd">offsetTop</span>
                <li><span class="dfn-paneled" id="dc0eaa56">scrollTop</span>
            </ul>
        <li>
            <a data-link-type="biblio">[DOM]</a> 定义了如下术语：
            <ul>
                <li><span class="dfn-paneled" id="2e66eaf1">AbortController</span>
                <li><span class="dfn-paneled" id="cca3cdb2">AbortSignal</span>
                <li><span class="dfn-paneled" id="141bbada">DOMTokenList</span>
                <li><span class="dfn-paneled" id="296f3551">Element</span>
                <li><span class="dfn-paneled" id="129bdae8">Event</span>
                <li><span class="dfn-paneled" id="2bc0cdf4">EventTarget</span>
                <li><span class="dfn-paneled" id="9714d594">HTMLCollection</span>
                <li><span class="dfn-paneled" id="83c7a70f">MutationObserver</span>
                <li><span class="dfn-paneled" id="7f21931f">NamedNodeMap</span>
                <li><span class="dfn-paneled" id="96c16e60">Node</span>
                <li><span class="dfn-paneled" id="680651c3">NonElementParentNode</span>
                <li><span class="dfn-paneled" id="19065ec8">abort()</span>
                <li><span class="dfn-paneled" id="535dd335">aborted</span>
                <li><span class="dfn-paneled" id="87bc23a5">add</span>
                <li><span class="dfn-paneled" id="6cf6f82f">addEventListener(type, callback)</span>
                <li><span class="dfn-paneled" id="0c0ceb78">bubbles</span>
                <li><span class="dfn-paneled" id="c2f2a81a">classList</span>
                <li><span class="dfn-paneled" id="aaa103c9">compatMode</span>
                <li><span class="dfn-paneled" id="bc9fe445">createAttribute(localName)</span>
                <li><span class="dfn-paneled" id="5fcd7fc5">createElement(localName)</span>
                <li><span class="dfn-paneled" id="5fd23811">fire an event</span>
                <li><span class="dfn-paneled" id="c7af4825">getElementById(elementId)</span>
                <li><span class="dfn-paneled" id="68c033c8">getElementsByTagName(qualifiedName)</span>
                <li><span class="dfn-paneled" id="50e555d8">once</span>
                <li><span class="dfn-paneled" id="fefe0433">preventDefault()</span>
                <li><span class="dfn-paneled" id="5def70a6">querySelectorAll(selectors)</span>
                <li><span class="dfn-paneled" id="ff87eaf9">remove</span>
                <li><span class="dfn-paneled" id="08baaf46">remove()</span>
                <li><span class="dfn-paneled" id="2296404c">signal abort</span>
                <li><span class="dfn-paneled" id="e8478f36">target</span>
                <li><span class="dfn-paneled" id="072b36ca">timeout(milliseconds)</span>
            </ul>
        <li>
            <a data-link-type="biblio">[ECMASCRIPT]</a> 定义了如下术语：
            <ul>
                <li><span class="dfn-paneled" id="f6c2cd25">BigInt</span>
                <li><span class="dfn-paneled" id="8c8cc336">Date</span>
                <li><span class="dfn-paneled" id="6e923df0">Error</span>
                <li><span class="dfn-paneled" id="5f45e759">FinalizationRegistry</span>
                <li><span class="dfn-paneled" id="5f9c7266">Number</span>
                <li><span class="dfn-paneled" id="bf77e69a">WeakRef</span>
                <li><span class="dfn-paneled" id="434af3a5">now()</span>
                <li><span class="dfn-paneled" id="8bdd3ef8">then(onFulfilled, onRejected)</span>
            </ul>
        <li>
            <a data-link-type="biblio">[ENCODING]</a> 定义了如下术语：
            <ul>
                <li><span class="dfn-paneled" id="056fb0bd">TextEncoder</span>
            </ul>
        <li>
            <a data-link-type="biblio">[FETCH]</a> 定义了如下术语：
            <ul>
                <li><span class="dfn-paneled" id="7c397e50">Body</span>
                <li><span class="dfn-paneled" id="2aaa2f42">HTTP fetch</span>
                <li><span class="dfn-paneled" id="dc4acd27">json()</span>
            </ul>
        <li>
            <a data-link-type="biblio">[FileAPI]</a> 定义了如下术语：
            <ul>
                <li><span class="dfn-paneled" id="b7d73f5b">Blob</span>
            </ul>
        <li>
            <a data-link-type="biblio">[FILTER-EFFECTS-2]</a> 定义了如下术语：
            <ul>
                <li><span class="dfn-paneled" id="54fa0afb">backdrop-filter</span>
            </ul>
        <li>
            <a data-link-type="biblio">[GAMEPAD]</a> 定义了如下术语：
            <ul>
                <li><span class="dfn-paneled" id="112278c6">Gamepad</span>
            </ul>
        <li>
            <a data-link-type="biblio">[HIGHRES-TIME]</a> 定义了如下术语：
            <ul>
                <li><span class="dfn-paneled" id="0e9f636b">DOMHighResTimeStamp</span>
                <li><span class="dfn-paneled" id="d62af025">now()</span>
            </ul>
        <li>
            <a data-link-type="biblio">[HTML]</a> 定义了如下术语：
            <ul>
                <li><span class="dfn-paneled" id="b8308563">DedicatedWorkerGlobalScope</span>
                <li><span class="dfn-paneled" id="f0951476">EventHandler</span>
                <li><span class="dfn-paneled" id="762ce945">GlobalEventHandlers</span>
                <li><span class="dfn-paneled" id="e4ee9a64">HTMLHRElement</span>
                <li><span class="dfn-paneled" id="37ef25b8">HTMLHtmlElement</span>
                <li><span class="dfn-paneled" id="c5891539">HTMLImageElement</span>
                <li><span class="dfn-paneled" id="83b269de">HTMLInputElement</span>
                <li><span class="dfn-paneled" id="1076ec40">HTMLMediaElement</span>
                <li><span class="dfn-paneled" id="a2411b6a">History</span>
                <li><span class="dfn-paneled" id="478bb3aa">ImageBitmap</span>
                <li><span class="dfn-paneled" id="be0c27b2">Navigator</span>
                <li><span class="dfn-paneled" id="5d7209e9">Window</span>
                <li><span class="dfn-paneled" id="8baa72cd">WindowEventHandlers</span>
                <li><span class="dfn-paneled" id="c262266a">WorkerType</span>
                <li><span class="dfn-paneled" id="68bf3d31">a</span>
                <li><span class="dfn-paneled" id="3fbd5055">abbr</span>
                <li><span class="dfn-paneled" id="24366e21">accept</span>
                <li><span class="dfn-paneled" id="7e4cbc4d">acronym</span>
                <li><span class="dfn-paneled" id="5f753d3e">action</span>
                <li><span class="dfn-paneled" id="b2f8a695">alert()</span>
                <li><span class="dfn-paneled" id="2c82d279">audio</span>
                <li><span class="dfn-paneled" id="e81f86c3">bgColor</span>
                <li><span class="dfn-paneled" id="bfff6250">button</span>
                <li><span class="dfn-paneled" id="e6b9f496">canplaythrough</span>
                <li><span class="dfn-paneled" id="8662cdd3">checked</span>
                <li><span class="dfn-paneled" id="d4b3b8bc">cite</span>
                <li><span class="dfn-paneled" id="e356ee85">class</span>
                <li><span class="dfn-paneled" id="3f597ac1">createImageBitmap(image, options)</span>
                <li><span class="dfn-paneled" id="b6fb7a51">custom element</span>
                <li><span class="dfn-paneled" id="3f03fff1">datalist</span>
                <li><span class="dfn-paneled" id="0226500f">defaultChecked</span>
                <li><span class="dfn-paneled" id="032e4578">defaultSelected</span>
                <li><span class="dfn-paneled" id="5fa63f4e">defaultValue</span>
                <li><span class="dfn-paneled" id="31559e1b">define(name, constructor, options)</span>
                <li><span class="dfn-paneled" id="1748bbeb">details</span>
                <li><span class="dfn-paneled" id="1812300f">dialog</span>
                <li><span class="dfn-paneled" id="e10e7eb7">DOM manipulation task source</span>
                <li><span class="dfn-paneled" id="03675365">event handler IDL attribute</span>
                <li><span class="dfn-paneled" id="c6d19e56">event loop</span>
                <li><span class="dfn-paneled" id="11289557">figcaption</span>
                <li><span class="dfn-paneled" id="88885797">for</span>
                <li><span class="dfn-paneled" id="946a9318">form</span>
                <li><span class="dfn-paneled" id="0e3ba9f8">fully active</span>
                <li><span class="dfn-paneled" id="ca0c892d">href <small>(for a)</small></span>
                <li><span class="dfn-paneled" id="a6078b11">href <small>(for link)</small></span>
                <li><span class="dfn-paneled" id="f0811ff8">img</span>
                <li><span class="dfn-paneled" id="d4127354">innerHTML</span>
                <li><span class="dfn-paneled" id="d7d642a2">input</span>
                <li><span class="dfn-paneled" id="7bd34c20">isActive</span>
                <li><span class="dfn-paneled" id="da34f333">isMap</span>
                <li><span class="dfn-paneled" id="93c4bcc0">ismap</span>
                <li><span class="dfn-paneled" id="84f243ef">label</span>
                <li><span class="dfn-paneled" id="2c73cb69">languagechange</span>
                <li><span class="dfn-paneled" id="6cfa013d">link</span>
                <li><span class="dfn-paneled" id="dc6ebe88">list</span>
                <li><span class="dfn-paneled" id="3a2db83f">localStorage</span>
                <li><span class="dfn-paneled" id="6a288f2a">microtask</span>
                <li><span class="dfn-paneled" id="b07164ad">multiple</span>
                <li><span class="dfn-paneled" id="b6ae4501">networking task source</span>
                <li><span class="dfn-paneled" id="31133468">open</span>
                <li><span class="dfn-paneled" id="f449d4f8">open(url, target, features)</span>
                <li><span class="dfn-paneled" id="aee00462">option</span>
                <li><span class="dfn-paneled" id="b093bcd2">output</span>
                <li><span class="dfn-paneled" id="3da24a47">ping</span>
                <li><span class="dfn-paneled" id="613edb27">play()</span>
                <li><span class="dfn-paneled" id="55b2f02c">poster</span>
                <li><span class="dfn-paneled" id="9dc3e09f">q</span>
                <li><span class="dfn-paneled" id="48438eb3">queue a global task</span>
                <li><span class="dfn-paneled" id="9a517a7d">queue a task</span>
                <li><span class="dfn-paneled" id="72aaa5d6">queue an element task</span>
                <li><span class="dfn-paneled" id="5ab7b520">reflect</span>
                <li><span class="dfn-paneled" id="eb9a1873">rel</span>
                <li><span class="dfn-paneled" id="4872935b">resize</span>
                <li><span class="dfn-paneled" id="5c35dd47">sandbox</span>
                <li><span class="dfn-paneled" id="0cf3964f">script</span>
                <li><span class="dfn-paneled" id="85188fb3">select</span>
                <li><span class="dfn-paneled" id="96ffbcca">selected</span>
                <li><span class="dfn-paneled" id="3332e595">setTimeout(handler, timeout, ...arguments)</span>
                <li><span class="dfn-paneled" id="9d861566">showModal()</span>
                <li><span class="dfn-paneled" id="e5882acf">source</span>
                <li><span class="dfn-paneled" id="b996b941">src <small>(for img)</small></span>
                <li><span class="dfn-paneled" id="03431bcb">src <small>(for script)</small></span>
                <li><span class="dfn-paneled" id="c219fdf4">srcset</span>
                <li><span class="dfn-paneled" id="ba920583">style</span>
                <li><span class="dfn-paneled" id="e270bd2a">task</span>
                <li><span class="dfn-paneled" id="c3b2d08c">task source</span>
                <li><span class="dfn-paneled" id="fc736137">textarea</span>
                <li><span class="dfn-paneled" id="47fe679e">transient activation</span>
                <li><span class="dfn-paneled" id="66aee777">type</span>
                <li><span class="dfn-paneled" id="b815f411">update the rendering</span>
                <li><span class="dfn-paneled" id="825cbc48">user interaction task source</span>
                <li><span class="dfn-paneled" id="14e45097">value <small>(for HTMLInputElement)</small></span>
                <li><span class="dfn-paneled" id="fd7a9317">value <small>(for input)</small></span>
                <li><span class="dfn-paneled" id="aa7bbf63">video</span>
                <li><span class="dfn-paneled" id="7a26cf99">width</span>
            </ul>
        <li>
            <a data-link-type="biblio">[I18N-GLOSSARY]</a> 定义了如下术语：
            <ul>
                <li><span class="dfn-paneled" id="30011333">percent-encoding</span>
            </ul>
        <li>
            <a data-link-type="biblio">[IndexedDB-3]</a> 定义了如下术语：
            <ul>
                <li><span class="dfn-paneled" id="a46ec9f9">IDBDatabase</span>
            </ul>
        <li>
            <a data-link-type="biblio">[INFRA]</a> 定义了如下术语：
            <ul>
                <li><span class="dfn-paneled" id="ddc587b1">ASCII code point</span>
                <li><span class="dfn-paneled" id="59912c93">code unit</span>
                <li><span class="dfn-paneled" id="860300d4">implementation-defined</span>
                <li><span class="dfn-paneled" id="ecf251b4">scalar value</span>
                <li><span class="dfn-paneled" id="762869d3">scalar value string</span>
                <li><span class="dfn-paneled" id="0698d556">string</span>
                <li><span class="dfn-paneled" id="a3fb968a">surrogate</span>
            </ul>
        <li>
            <a data-link-type="biblio">[INTERSECTION-OBSERVER]</a> 定义了如下术语：
            <ul>
                <li><span class="dfn-paneled" id="9be179f5">IntersectionObserver</span>
            </ul>
        <li>
            <a data-link-type="biblio">[MEDIAQUERIES-5]</a> 定义了如下术语：
            <ul>
                <li><span class="dfn-paneled" id="f8b3bc81">false</span>
                <li><span class="dfn-paneled" id="c4484b93">true</span>
            </ul>
        <li>
            <a data-link-type="biblio">[PAYMENT-REQUEST]</a> 定义了如下术语：
            <ul>
                <li><span class="dfn-paneled" id="f679a0bc">PaymentRequest</span>
                <li><span class="dfn-paneled" id="2e3a180b">[[state]]</span>
                <li><span class="dfn-paneled" id="ab86e0f1">show()</span>
            </ul>
        <li>
            <a data-link-type="biblio">[PERMISSIONS]</a> 定义了如下术语：
            <ul>
                <li><span class="dfn-paneled" id="c2430fbb">prompt the user to choose</span>
                <li><span class="dfn-paneled" id="bcc085e3">request permission to use</span>
            </ul>
        <li>
            <a data-link-type="biblio">[POINTEREVENTS3]</a> 定义了如下术语：
            <ul>
                <li><span class="dfn-paneled" id="d94094fa">PointerEvent</span>
                <li><span class="dfn-paneled" id="d6aab74b">pointerId</span>
            </ul>
        <li>
            <a data-link-type="biblio">[REFERRER-POLICY]</a> 定义了如下术语：
            <ul>
                <li><span class="dfn-paneled" id="8dba5fba">"no-referrer-when-downgrade"</span>
            </ul>
        <li>
            <a data-link-type="biblio">[REMOTE-PLAYBACK]</a> 定义了如下术语：
            <ul>
                <li><span class="dfn-paneled" id="9e3cc993">RemotePlayback</span>
                <li><span class="dfn-paneled" id="7f769aa9">remote playback device</span>
                <li><span class="dfn-paneled" id="06b254b0">remote playback devices</span>
            </ul>
        <li>
            <a data-link-type="biblio">[REQUESTIDLECALLBACK]</a> 定义了如下术语：
            <ul>
                <li><span class="dfn-paneled" id="ea2e2ea4">timeRemaining()</span>
            </ul>
        <li>
            <a data-link-type="biblio">[RFC9110]</a> 定义了如下术语：
            <ul>
                <li><span class="dfn-paneled" id="3c05c488">Accept</span>
            </ul>
        <li>
            <a data-link-type="biblio">[SCREEN-CAPTURE]</a> 定义了如下术语：
            <ul>
                <li><span class="dfn-paneled" id="5bcbeb1e">getDisplayMedia()</span>
                <li><span class="dfn-paneled" id="ab4b142f">setFocusBehavior()</span>
            </ul>
        <li>
            <a data-link-type="biblio">[SERVICE-WORKERS]</a> 定义了如下术语：
            <ul>
                <li><span class="dfn-paneled" id="611cb8cd">respondWith(r)</span>
                <li><span class="dfn-paneled" id="3a3c984c">task queues</span>
            </ul>
        <li>
            <a data-link-type="biblio">[UIEVENTS]</a> 定义了如下术语：
            <ul>
                <li><span class="dfn-paneled" id="518be2ae">InputEvent</span>
                <li><span class="dfn-paneled" id="1fc098b2">KeyboardEvent</span>
                <li><span class="dfn-paneled" id="c3469cd0">MouseEvent</span>
                <li><span class="dfn-paneled" id="d387f951">inputType</span>
            </ul>
        <li>
            <a data-link-type="biblio">[URL]</a> 定义了如下术语：
            <ul>
                <li><span class="dfn-paneled" id="adfe3014">URLSearchParams</span>
                <li><span class="dfn-paneled" id="46335198">delete(name)</span>
                <li><span class="dfn-paneled" id="0992b8f5">has(name)</span>
                <li><span class="dfn-paneled" id="dcffbccd">URL</span>
            </ul>
        <li>
            <a data-link-type="biblio">[WEB-ANIMATIONS-2]</a> 定义了如下术语：
            <ul>
                <li><span class="dfn-paneled" id="8bd77373">currentTime</span>
            </ul>
        <li>
            <a data-link-type="biblio">[WEB-LOCKS]</a> 定义了如下术语：
            <ul>
                <li><span class="dfn-paneled" id="b88b42f7">LockManager</span>
            </ul>
        <li>
            <a data-link-type="biblio">[WebAudio]</a> 定义了如下术语：
            <ul>
                <li><span class="dfn-paneled" id="1bb59bab">AudioWorklet</span>
                <li><span class="dfn-paneled" id="0065f652">ScriptProcessorNode</span>
            </ul>
        <li>
            <a data-link-type="biblio">[WEBCRYPTO-2]</a> 定义了如下术语：
            <ul>
                <li><span class="dfn-paneled" id="529179ea">Crypto</span>
            </ul>
        <li>
            <a data-link-type="biblio">[WEBIDL]</a> 定义了如下术语：
            <ul>
                <li><span class="dfn-paneled" id="2f8afbfe">ArrayBuffer</span>
                <li><span class="dfn-paneled" id="22cb9a16">ByteString</span>
                <li><span class="dfn-paneled" id="f89c7d0d">Clamp</span>
                <li><span class="dfn-paneled" id="dca2de17">DOMException</span>
                <li><span class="dfn-paneled" id="8855a9aa">DOMString</span>
                <li><span class="dfn-paneled" id="c01cbda0">EnforceRange</span>
                <li><span class="dfn-paneled" id="889e932f">Exposed</span>
                <li><span class="dfn-paneled" id="0a296dfe">Float32Array</span>
                <li><span class="dfn-paneled" id="bdbd19d1">Promise</span>
                <li><span class="dfn-paneled" id="b75bb3bd">SecureContext</span>
                <li><span class="dfn-paneled" id="7d783f61">SharedArrayBuffer</span>
                <li><span class="dfn-paneled" id="82ca3efc">TypeError</span>
                <li><span class="dfn-paneled" id="b0d7f3c3">USVString</span>
                <li><span class="dfn-paneled" id="95d7775a">Uint8Array</span>
                <li><span class="dfn-paneled" id="bdcd112d">bigint</span>
                <li><span class="dfn-paneled" id="f4813f78">byte</span>
                <li><span class="dfn-paneled" id="8c800cdf">double</span>
                <li><span class="dfn-paneled" id="f8de33a3">long</span>
                <li><span class="dfn-paneled" id="9aeb0a82">long long</span>
                <li><span class="dfn-paneled" id="77996ab1">maplike</span>
                <li><span class="dfn-paneled" id="2039631f">namespace</span>
                <li><span class="dfn-paneled" id="d7d5b038">observable array type</span>
                <li><span class="dfn-paneled" id="bc5645aa">octet</span>
                <li><span class="dfn-paneled" id="a9789869">partial dictionary</span>
                <li><span class="dfn-paneled" id="d0eba3fd">partial interface</span>
                <li><span class="dfn-paneled" id="5eafebb0">sequence type</span>
                <li><span class="dfn-paneled" id="cc212fd8">setlike</span>
                <li><span class="dfn-paneled" id="47574099">short</span>
                <li><span class="dfn-paneled" id="5f90bbfb">undefined</span>
                <li><span class="dfn-paneled" id="11e0b87f">unrestricted double</span>
                <li><span class="dfn-paneled" id="f14b47b8">unsigned long long</span>
            </ul>
        <li>
            <a data-link-type="biblio">[WEBRTC]</a> 定义了如下术语：
            <ul>
                <li><span class="dfn-paneled" id="ba3d5b0d">RTCDTMFSender</span>
            </ul>
        <li>
            <a data-link-type="biblio">[XHR]</a> 定义了如下术语：
            <ul>
                <li><span class="dfn-paneled" id="7b0dc914">ProgressEvent</span>
                <li><span class="dfn-paneled" id="d06b2b8c">XMLHttpRequest</span>
                <li><span class="dfn-paneled" id="59f1958b">XMLHttpRequestEventTarget</span>
                <li><span class="dfn-paneled" id="5528aefc">loaded</span>
                <li><span class="dfn-paneled" id="0e833ee0">readyState</span>
                <li><span class="dfn-paneled" id="67fa4a40">total</span>
            </ul>
    </ul>
    <h2 class="no-num no-ref heading settled" id="references"><span class="content">参考文献</span><a class="self-link"
            href="#references"></a></h2>
    <h3 class="no-num no-ref heading settled" id="normative"><span class="content">规范性引用</span><a class="self-link"
            href="#normative"></a></h3>
    <dl>
        <dt id="biblio-css-cascade-5">[CSS-CASCADE-5]
        <dd>Elika Etemad; Miriam Suzanne; Tab Atkins Jr.. <a
                href="https://drafts.csswg.org/css-cascade-5/"><cite>CSS级联与继承第5级</cite></a>。URL: <a
                href="https://drafts.csswg.org/css-cascade-5/">https://drafts.csswg.org/css-cascade-5/</a>
        <dt id="biblio-css-conditional-3">[CSS-CONDITIONAL-3]
        <dd>Chris Lilley; David Baron; Elika Etemad. <a href="https://drafts.csswg.org/css-conditional-3/"><cite>CSS
                    条件规则模块第3级</cite></a>。URL: <a
                href="https://drafts.csswg.org/css-conditional-3/">https://drafts.csswg.org/css-conditional-3/</a>
        <dt id="biblio-dom">[DOM]
        <dd>Anne van Kesteren. <a href="https://dom.spec.whatwg.org/"><cite>DOM 标准</cite></a>。Living Standard。URL: <a
                href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
        <dt id="biblio-ecmascript">[ECMASCRIPT]
        <dd><a href="https://tc39.es/ecma262/multipage/"><cite>ECMAScript语言规范</cite></a>。URL: <a
                href="https://tc39.es/ecma262/multipage/">https://tc39.es/ecma262/multipage/</a>
        <dt id="biblio-encoding">[ENCODING]
        <dd>Anne van Kesteren. <a href="https://encoding.spec.whatwg.org/"><cite>编码标准</cite></a>。Living Standard。URL: <a
                href="https://encoding.spec.whatwg.org/">https://encoding.spec.whatwg.org/</a>
        <dt id="biblio-fetch">[FETCH]
        <dd>Anne van Kesteren. <a href="https://fetch.spec.whatwg.org/"><cite>Fetch标准</cite></a>。Living Standard。URL: <a
                href="https://fetch.spec.whatwg.org/">https://fetch.spec.whatwg.org/</a>
        <dt id="biblio-fingerprinting-guidance">[FINGERPRINTING-GUIDANCE]
        <dd>Nick Doty; Tom Ritter. <a
                href="https://w3c.github.io/fingerprinting-guidance/"><cite>缓解Web规范中的浏览器指纹识别</cite></a>。URL: <a
                href="https://w3c.github.io/fingerprinting-guidance/">https://w3c.github.io/fingerprinting-guidance/</a>
        <dt id="biblio-highres-time">[HIGHRES-TIME]
        <dd>Yoav Weiss. <a href="https://w3c.github.io/hr-time/"><cite>高精度时间</cite></a>。URL: <a
                href="https://w3c.github.io/hr-time/">https://w3c.github.io/hr-time/</a>
        <dt id="biblio-html">[HTML]
        <dd>Anne van Kesteren; 等. <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML标准</cite></a>。Living
            Standard。URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
        <dt id="biblio-i18n-glossary">[I18N-GLOSSARY]
        <dd>Richard Ishida; Addison Phillips. <a
                href="https://w3c.github.io/i18n-glossary/"><cite>国际化术语表</cite></a>。URL: <a
                href="https://w3c.github.io/i18n-glossary/">https://w3c.github.io/i18n-glossary/</a>
        <dt id="biblio-indexeddb-3">[IndexedDB-3]
        <dd>Steven Becker. <a href="https://w3c.github.io/IndexedDB/"><cite>Indexed Database API 3.0</cite></a>。URL: <a
                href="https://w3c.github.io/IndexedDB/">https://w3c.github.io/IndexedDB/</a>
        <dt id="biblio-infra">[INFRA]
        <dd>Anne van Kesteren; Domenic Denicola. <a
                href="https://infra.spec.whatwg.org/"><cite>Infra标准</cite></a>。Living Standard。URL: <a
                href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
        <dt id="biblio-mediaqueries-5">[MEDIAQUERIES-5]
        <dd>Dean Jackson; 等. <a href="https://drafts.csswg.org/mediaqueries-5/"><cite>媒体查询第5级</cite></a>。URL: <a
                href="https://drafts.csswg.org/mediaqueries-5/">https://drafts.csswg.org/mediaqueries-5/</a>
        <dt id="biblio-payment-request">[PAYMENT-REQUEST]
        <dd>Marcos Caceres; Ian Jacobs; Stephen McGruer. <a
                href="https://w3c.github.io/payment-request/"><cite>支付请求API</cite></a>。URL: <a
                href="https://w3c.github.io/payment-request/">https://w3c.github.io/payment-request/</a>
        <dt id="biblio-permissions">[PERMISSIONS]
        <dd>Marcos Caceres; Mike Taylor. <a href="https://w3c.github.io/permissions/"><cite>权限</cite></a>。URL: <a
                href="https://w3c.github.io/permissions/">https://w3c.github.io/permissions/</a>
        <dt id="biblio-privacy-principles">[PRIVACY-PRINCIPLES]
        <dd>Robin Berjon; Jeffrey Yasskin. <a
                href="https://w3ctag.github.io/privacy-principles/"><cite>隐私原则</cite></a>。URL: <a
                href="https://w3ctag.github.io/privacy-principles/">https://w3ctag.github.io/privacy-principles/</a>
        <dt id="biblio-requestidlecallback">[REQUESTIDLECALLBACK]
        <dd>Scott Haseley. <a
                href="https://w3c.github.io/requestidlecallback/"><cite>requestIdleCallback()</cite></a>。URL: <a
                href="https://w3c.github.io/requestidlecallback/">https://w3c.github.io/requestidlecallback/</a>
        <dt id="biblio-rfc9205">[RFC9205]
        <dd>M. Nottingham. <a href="https://httpwg.org/specs/rfc9205.html"><cite>基于HTTP构建协议</cite></a>。2022年6月。最佳实践。URL:
            <a href="https://httpwg.org/specs/rfc9205.html">https://httpwg.org/specs/rfc9205.html</a>
        <dt id="biblio-service-workers">[SERVICE-WORKERS]
        <dd>Yoshisato Yanagisawa; Monica CHINTALA. <a href="https://w3c.github.io/ServiceWorker/"><cite>Service
                    Workers</cite></a>。URL: <a
                href="https://w3c.github.io/ServiceWorker/">https://w3c.github.io/ServiceWorker/</a>
        <dt id="biblio-url">[URL]
        <dd>Anne van Kesteren. <a href="https://url.spec.whatwg.org/"><cite>URL标准</cite></a>。Living Standard。URL: <a
                href="https://url.spec.whatwg.org/">https://url.spec.whatwg.org/</a>
        <dt id="biblio-web-animations-2">[WEB-ANIMATIONS-2]
        <dd>Brian Birtles; Robert Flack. <a
                href="https://drafts.csswg.org/web-animations-2/"><cite>Web动画第2级</cite></a>。URL: <a
                href="https://drafts.csswg.org/web-animations-2/">https://drafts.csswg.org/web-animations-2/</a>
        <dt id="biblio-webidl">[WEBIDL]
        <dd>Edgar Chen; Timothy Gu. <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL标准</cite></a>。Living
            Standard。URL: <a href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
        <dt id="biblio-xhr">[XHR]
        <dd>Anne van Kesteren. <a href="https://xhr.spec.whatwg.org/"><cite>XMLHttpRequest标准</cite></a>。Living
            Standard。URL: <a href="https://xhr.spec.whatwg.org/">https://xhr.spec.whatwg.org/</a>
    </dl>
    <h3 class="no-num no-ref heading settled" id="informative"><span class="content">参考性引用</span><a class="self-link"
            href="#informative"></a></h3>
    <dl>
        <dt id="biblio-appmanifest">[APPMANIFEST]
        <dd>Marcos Caceres; 等. <a href="https://w3c.github.io/manifest/"><cite>Web应用清单</cite></a>。URL: <a
                href="https://w3c.github.io/manifest/">https://w3c.github.io/manifest/</a>
        <dt id="biblio-console">[CONSOLE]
        <dd>Dominic Farolino; Robert Kowalski; Terin Stock. <a
                href="https://console.spec.whatwg.org/"><cite>控制台标准</cite></a>。Living Standard。URL: <a
                href="https://console.spec.whatwg.org/">https://console.spec.whatwg.org/</a>
        <dt id="biblio-credential-management-1">[CREDENTIAL-MANAGEMENT-1]
        <dd>Nina Satragno; Marcos Caceres. <a
                href="https://w3c.github.io/webappsec-credential-management/"><cite>凭据管理第1级</cite></a>。URL: <a
                href="https://w3c.github.io/webappsec-credential-management/">https://w3c.github.io/webappsec-credential-management/</a>
        <dt id="biblio-css-backgrounds-3">[CSS-BACKGROUNDS-3]
        <dd>Elika Etemad; Brad Kemper. <a
                href="https://drafts.csswg.org/css-backgrounds/"><cite>CSS背景与边框模块第3级</cite></a>。URL: <a
                href="https://drafts.csswg.org/css-backgrounds/">https://drafts.csswg.org/css-backgrounds/</a>
        <dt id="biblio-css-fonts-4">[CSS-FONTS-4]
        <dd>Chris Lilley. <a href="https://drafts.csswg.org/css-fonts-4/"><cite>CSS字体模块第4级</cite></a>。URL: <a
                href="https://drafts.csswg.org/css-fonts-4/">https://drafts.csswg.org/css-fonts-4/</a>
        <dt id="biblio-css-fonts-5">[CSS-FONTS-5]
        <dd>Chris Lilley. <a href="https://drafts.csswg.org/css-fonts-5/"><cite>CSS字体模块第5级</cite></a>。URL: <a
                href="https://drafts.csswg.org/css-fonts-5/">https://drafts.csswg.org/css-fonts-5/</a>
        <dt id="biblio-css-grid-1">[CSS-GRID-1]
        <dd>Tab Atkins Jr.; 等. <a href="https://drafts.csswg.org/css-grid-1/"><cite>CSS网格布局模块第1级</cite></a>。URL: <a
                href="https://drafts.csswg.org/css-grid-1/">https://drafts.csswg.org/css-grid-1/</a>
        <dt id="biblio-css-inline-3">[CSS-INLINE-3]
        <dd>Elika Etemad. <a href="https://drafts.csswg.org/css-inline-3/"><cite>CSS内联布局模块第3级</cite></a>。URL: <a
                href="https://drafts.csswg.org/css-inline-3/">https://drafts.csswg.org/css-inline-3/</a>
        <dt id="biblio-css-values-4">[CSS-VALUES-4]
        <dd>Tab Atkins Jr.; Elika Etemad. <a
                href="https://drafts.csswg.org/css-values-4/"><cite>CSS值与单位模块第4级</cite></a>。URL: <a
                href="https://drafts.csswg.org/css-values-4/">https://drafts.csswg.org/css-values-4/</a>
        <dt id="biblio-css2">[CSS2]
        <dd>Bert Bos; 等. <a href="https://drafts.csswg.org/css2/"><cite>层叠样式表第2版（CSS 2.1）规范</cite></a>。URL: <a
                href="https://drafts.csswg.org/css2/">https://drafts.csswg.org/css2/</a>
        <dt id="biblio-cssom-1">[CSSOM-1]
        <dd>Daniel Glazman; Emilio Cobos Álvarez. <a
                href="https://drafts.csswg.org/cssom/"><cite>CSS对象模型（CSSOM）</cite></a>。URL: <a
                href="https://drafts.csswg.org/cssom/">https://drafts.csswg.org/cssom/</a>
        <dt id="biblio-cssom-view-1">[CSSOM-VIEW-1]
        <dd>Simon Fraser; Emilio Cobos Álvarez. <a
                href="https://drafts.csswg.org/cssom-view/"><cite>CSSOM视图模块</cite></a>。URL: <a
                href="https://drafts.csswg.org/cssom-view/">https://drafts.csswg.org/cssom-view/</a>
        <dt id="biblio-encrypted-media">[ENCRYPTED-MEDIA]
        <dd>Joey Parrish; Greg Freedman. <a href="https://w3c.github.io/encrypted-media/"><cite>加密媒体扩展</cite></a>。URL:
            <a href="https://w3c.github.io/encrypted-media/">https://w3c.github.io/encrypted-media/</a>
        <dt id="biblio-ethical-web-principles">[ETHICAL-WEB-PRINCIPLES]
        <dd>Daniel Appelquist; Hadley Beeman; Amy Guy. <a
                href="https://w3ctag.github.io/ethical-web-principles/"><cite>Web伦理原则</cite></a>。URL: <a
                href="https://w3ctag.github.io/ethical-web-principles/">https://w3ctag.github.io/ethical-web-principles/</a>
        <dt id="biblio-fileapi">[FileAPI]
        <dd>Marijn Kruisselbrink. <a href="https://w3c.github.io/FileAPI/"><cite>文件API</cite></a>。URL: <a
                href="https://w3c.github.io/FileAPI/">https://w3c.github.io/FileAPI/</a>
        <dt id="biblio-filter-effects-2">[FILTER-EFFECTS-2]
        <dd><a href="https://drafts.fxtf.org/filter-effects-2/"><cite>滤镜效果模块第2级</cite></a>。Editor's Draft。URL: <a
                href="https://drafts.fxtf.org/filter-effects-2/">https://drafts.fxtf.org/filter-effects-2/</a>
        <dt id="biblio-gamepad">[GAMEPAD]
        <dd>Steve Agoston; Matthew Reynolds. <a href="https://w3c.github.io/gamepad/"><cite>Gamepad</cite></a>。URL: <a
                href="https://w3c.github.io/gamepad/">https://w3c.github.io/gamepad/</a>
        <dt id="biblio-international-specs">[INTERNATIONAL-SPECS]
        <dd>Richard Ishida; Addison Phillips. <a
                href="https://w3c.github.io/bp-i18n-specdev/"><cite>规范开发者国际化最佳实践</cite></a>。URL: <a
                href="https://w3c.github.io/bp-i18n-specdev/">https://w3c.github.io/bp-i18n-specdev/</a>
        <dt id="biblio-intersection-observer">[INTERSECTION-OBSERVER]
        <dd>Stefan Zager; Emilio Cobos Álvarez; Traian Captan. <a
                href="https://w3c.github.io/IntersectionObserver/"><cite>交叉观察者</cite></a>。URL: <a
                href="https://w3c.github.io/IntersectionObserver/">https://w3c.github.io/IntersectionObserver/</a>
        <dt id="biblio-least-power">[LEAST-POWER]
        <dd>Tim Berners-Lee; Noah Mendelsohn. <a
                href="https://www.w3.org/2001/tag/doc/leastPower"><cite>最小能力原则</cite></a>。2006年2月23日。TAG建议。URL: <a
                href="https://www.w3.org/2001/tag/doc/leastPower">https://www.w3.org/2001/tag/doc/leastPower</a>
        <dt id="biblio-pointerevents3">[POINTEREVENTS3]
        <dd>Patrick Lauke; Robert Flack. <a href="https://w3c.github.io/pointerevents/"><cite>指针事件</cite></a>。URL: <a
                href="https://w3c.github.io/pointerevents/">https://w3c.github.io/pointerevents/</a>
        <dt id="biblio-referrer-policy">[REFERRER-POLICY]
        <dd>Jochen Eisinger; Emily Stark. <a
                href="https://w3c.github.io/webappsec-referrer-policy/"><cite>引用者策略</cite></a>。URL: <a
                href="https://w3c.github.io/webappsec-referrer-policy/">https://w3c.github.io/webappsec-referrer-policy/</a>
        <dt id="biblio-remote-playback">[REMOTE-PLAYBACK]
        <dd>Mark Foltz. <a href="https://w3c.github.io/remote-playback/"><cite>远程播放API</cite></a>。URL: <a
                href="https://w3c.github.io/remote-playback/">https://w3c.github.io/remote-playback/</a>
        <dt id="biblio-rfc8890">[RFC8890]
        <dd>M. Nottingham. <a
                href="https://www.rfc-editor.org/rfc/rfc8890"><cite>互联网是为终端用户服务的</cite></a>。2020年8月。信息性文档。URL: <a
                href="https://www.rfc-editor.org/rfc/rfc8890">https://www.rfc-editor.org/rfc/rfc8890</a>
        <dt id="biblio-rfc9000">[RFC9000]
        <dd>J. Iyengar, Ed.; M. Thomson, Ed.. <a
                href="https://www.rfc-editor.org/rfc/rfc9000"><cite>QUIC：基于UDP的多路复用安全传输</cite></a>。2021年5月。建议标准。URL: <a
                href="https://www.rfc-editor.org/rfc/rfc9000">https://www.rfc-editor.org/rfc/rfc9000</a>
        <dt id="biblio-rfc9110">[RFC9110]
        <dd>R. Fielding, Ed.; M. Nottingham, Ed.; J. Reschke, Ed.. <a
                href="https://httpwg.org/specs/rfc9110.html"><cite>HTTP语义</cite></a>。2022年6月。互联网标准。URL: <a
                href="https://httpwg.org/specs/rfc9110.html">https://httpwg.org/specs/rfc9110.html</a>
        <dt id="biblio-screen-capture">[SCREEN-CAPTURE]
        <dd>Jan-Ivar Bruaroey; Elad Alon. <a
                href="https://w3c.github.io/mediacapture-screen-share/"><cite>屏幕捕获</cite></a>。URL: <a
                href="https://w3c.github.io/mediacapture-screen-share/">https://w3c.github.io/mediacapture-screen-share/</a>
        <dt id="biblio-uievents">[UIEVENTS]
        <dd>Gary Kacmarcik; Travis Leithead. <a href="https://w3c.github.io/uievents/"><cite>UI事件</cite></a>。URL: <a
                href="https://w3c.github.io/uievents/">https://w3c.github.io/uievents/</a>
        <dt id="biblio-unsanctioned-tracking">[UNSANCTIONED-TRACKING]
        <dd>Mark Nottingham. <a
                href="https://www.w3.org/2001/tag/doc/unsanctioned-tracking/"><cite>未授权Web追踪</cite></a>。2015年7月17日。TAG建议。URL:
            <a
                href="https://www.w3.org/2001/tag/doc/unsanctioned-tracking/">https://www.w3.org/2001/tag/doc/unsanctioned-tracking/</a>
        <dt id="biblio-web-locks">[WEB-LOCKS]
        <dd>Kagami Rosylight. <a href="https://w3c.github.io/web-locks/"><cite>Web锁API</cite></a>。URL: <a
                href="https://w3c.github.io/web-locks/">https://w3c.github.io/web-locks/</a>
        <dt id="biblio-web-share">[WEB-SHARE]
        <dd>Marcos Caceres; Eric Willigers; Matt Giuca. <a
                href="https://w3c.github.io/web-share/"><cite>Web分享API</cite></a>。URL: <a
                href="https://w3c.github.io/web-share/">https://w3c.github.io/web-share/</a>
        <dt id="biblio-webaudio">[WebAudio]
        <dd>Paul Adenot; Hongchan Choi. <a
                href="https://webaudio.github.io/web-audio-api/"><cite>Web音频API</cite></a>。URL: <a
                href="https://webaudio.github.io/web-audio-api/">https://webaudio.github.io/web-audio-api/</a>
        <dt id="biblio-webcrypto-2">[WEBCRYPTO-2]
        <dd>Daniel Huigens. <a href="https://w3c.github.io/webcrypto/"><cite>Web加密第2级</cite></a>。URL: <a
                href="https://w3c.github.io/webcrypto/">https://w3c.github.io/webcrypto/</a>
        <dt id="biblio-webrtc">[WEBRTC]
        <dd>Cullen Jennings; 等. <a href="https://w3c.github.io/webrtc-pc/"><cite>WebRTC：浏览器中的实时通信</cite></a>。URL: <a
                href="https://w3c.github.io/webrtc-pc/">https://w3c.github.io/webrtc-pc/</a>
        <dt id="biblio-webtransport">[WebTransport]
        <dd>Nidhi Jaju; Victor Vasiliev; Jan-Ivar Bruaroey. <a
                href="https://w3c.github.io/webtransport/"><cite>WebTransport</cite></a>。URL: <a
                href="https://w3c.github.io/webtransport/">https://w3c.github.io/webtransport/</a>
    </dl>
    <h2 class="no-num no-ref heading settled" id="property-index"><span class="content">属性索引</span><a class="self-link"
            href="#property-index"></a></h2>
    <div class="big-element-wrapper">
        <table class="index">
            <thead>
                <tr>
                    <th scope="col">名称
                    <th scope="col">值
                    <th scope="col">初始值
                    <th scope="col">适用对象
                    <th scope="col">继承
                    <th scope="col">百分比
                    <th scope="col">动画类型
                    <th scope="col">规范顺序
                    <th scope="col">计算值
            <tbody>
                <tr>
                    <th scope="row"><a class="css" data-link-type="property" href="#propdef-font-size-adjust"
                            id="ref-for-propdef-font-size-adjust①">font-size-adjust</a>
                    <td>none | [ ex-height | cap-height | ch-width | ic-width | ic-height ]? [ from-font | &lt;number> ]
                    <td>none
                    <td>所有元素和文本
                    <td>是
                    <td>N/A
                    <td>如关键词不同则为离散，否则按计算值类型
                    <td>按语法顺序
                    <td>数字或关键词none，或为度量关键词和&lt;number>组成的对
        </table>
    </div>
    <script>/* Boilerplate: script-dom-helper */
        "use strict";
        function query(sel) { return document.querySelector(sel); }

        function queryAll(sel) { return [...document.querySelectorAll(sel)]; }

        function iter(obj) {
            if (!obj) return [];
            var it = obj[Symbol.iterator];
            if (it) return it;
            return Object.entries(obj);
        }

        function mk(tagname, attrs, ...children) {
            const el = document.createElement(tagname);
            for (const [k, v] of iter(attrs)) {
                if (k.slice(0, 3) == "_on") {
                    const eventName = k.slice(3);
                    el.addEventListener(eventName, v);
                } else if (k[0] == "_") {
                    // property, not attribute
                    el[k.slice(1)] = v;
                } else {
                    if (v === false || v == null) {
                        continue;
                    } else if (v === true) {
                        el.setAttribute(k, "");
                        continue;
                    } else {
                        el.setAttribute(k, v);
                    }
                }
            }
            append(el, children);
            return el;
        }

        /* Create shortcuts for every known HTML element */
        [
            "a",
            "abbr",
            "acronym",
            "address",
            "applet",
            "area",
            "article",
            "aside",
            "audio",
            "b",
            "base",
            "basefont",
            "bdo",
            "big",
            "blockquote",
            "body",
            "br",
            "button",
            "canvas",
            "caption",
            "center",
            "cite",
            "code",
            "col",
            "colgroup",
            "datalist",
            "dd",
            "del",
            "details",
            "dfn",
            "dialog",
            "div",
            "dl",
            "dt",
            "em",
            "embed",
            "fieldset",
            "figcaption",
            "figure",
            "font",
            "footer",
            "form",
            "frame",
            "frameset",
            "head",
            "header",
            "h1",
            "h2",
            "h3",
            "h4",
            "h5",
            "h6",
            "hr",
            "html",
            "i",
            "iframe",
            "img",
            "input",
            "ins",
            "kbd",
            "label",
            "legend",
            "li",
            "link",
            "main",
            "map",
            "mark",
            "meta",
            "meter",
            "nav",
            "nobr",
            "noscript",
            "object",
            "ol",
            "optgroup",
            "option",
            "output",
            "p",
            "param",
            "pre",
            "progress",
            "q",
            "s",
            "samp",
            "script",
            "section",
            "select",
            "small",
            "source",
            "span",
            "strike",
            "strong",
            "style",
            "sub",
            "summary",
            "sup",
            "table",
            "tbody",
            "td",
            "template",
            "textarea",
            "tfoot",
            "th",
            "thead",
            "time",
            "title",
            "tr",
            "u",
            "ul",
            "var",
            "video",
            "wbr",
            "xmp",
        ].forEach(tagname => {
            mk[tagname] = (...args) => mk(tagname, ...args);
        });

        function* nodesFromChildList(children) {
            for (const child of children.flat(Infinity)) {
                if (child instanceof Node) {
                    yield child;
                } else {
                    yield new Text(child);
                }
            }
        }
        function append(el, ...children) {
            for (const child of nodesFromChildList(children)) {
                if (el instanceof Node) el.appendChild(child);
                else el.push(child);
            }
            return el;
        }

        function insertAfter(el, ...children) {
            for (const child of nodesFromChildList(children)) {
                el.parentNode.insertBefore(child, el.nextSibling);
            }
            return el;
        }

        function clearContents(el) {
            el.innerHTML = "";
            return el;
        }

        function parseHTML(markup) {
            if (markup.toLowerCase().trim().indexOf('<!doctype') === 0) {
                const doc = document.implementation.createHTMLDocument("");
                doc.documentElement.innerHTML = markup;
                return doc;
            } else {
                const el = mk.template({});
                el.innerHTML = markup;
                return el.content;
            }
        }</script>
    <script>/* Boilerplate: script-dfn-panel */
        "use strict";
        {
            let dfnPanelData = {
                "0065f652": { "dfnID": "0065f652", "dfnText": "ScriptProcessorNode", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-ScriptProcessorNode" }, { "id": "ref-for-ScriptProcessorNode\u2460" }], "title": "10.2.1. Some APIs should only be exposed to dedicated workers" }], "url": "https://webaudio.github.io/web-audio-api/#ScriptProcessorNode" },
                "0226500f": { "dfnID": "0226500f", "dfnText": "defaultChecked", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-input-defaultchecked" }], "title": "3.5. Keep attributes in sync" }], "url": "https://html.spec.whatwg.org/multipage/input.html#dom-input-defaultchecked" },
                "032e4578": { "dfnID": "032e4578", "dfnText": "defaultSelected", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-option-defaultselected" }], "title": "3.5. Keep attributes in sync" }], "url": "https://html.spec.whatwg.org/multipage/form-elements.html#dom-option-defaultselected" },
                "03431bcb": { "dfnID": "03431bcb", "dfnText": "src (for script)", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-attr-script-src" }], "title": "3.6. Name URL-containing attributes based on their primary purpose" }], "url": "https://html.spec.whatwg.org/multipage/scripting.html#attr-script-src" },
                "03675365": { "dfnID": "03675365", "dfnText": "event handler IDL attribute", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-event-handler-idl-attributes" }, { "id": "ref-for-event-handler-idl-attributes\u2460" }, { "id": "ref-for-event-handler-idl-attributes\u2461" }], "title": "7.5. Always add event handler attributes" }], "url": "https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes" },
                "056fb0bd": { "dfnID": "056fb0bd", "dfnText": "TextEncoder", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-textencoder" }], "title": "10.3. Only purely computational features should be exposed everywhere" }], "url": "https://encoding.spec.whatwg.org/#textencoder" },
                "0698d556": { "dfnID": "0698d556", "dfnText": "string", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-string" }], "title": "8.2. Represent strings appropriately" }], "url": "https://infra.spec.whatwg.org/#string" },
                "06b254b0": { "dfnID": "06b254b0", "dfnText": "remote playback devices", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dfn-remote-playback-devices" }, { "id": "ref-for-dfn-remote-playback-devices\u2460" }], "title": "9.2. Use care when exposing APIs for selecting or enumerating devices" }], "url": "https://w3c.github.io/remote-playback/#dfn-remote-playback-devices" },
                "072b36ca": { "dfnID": "072b36ca", "dfnText": "timeout(milliseconds)", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-abortsignal-timeout" }], "title": "10.3. Only purely computational features should be exposed everywhere" }], "url": "https://dom.spec.whatwg.org/#dom-abortsignal-timeout" },
                "08baaf46": { "dfnID": "08baaf46", "dfnText": "remove()", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-childnode-remove" }], "title": "5.2. Preserve run-to-completion semantics" }], "url": "https://dom.spec.whatwg.org/#dom-childnode-remove" },
                "0992b8f5": { "dfnID": "0992b8f5", "dfnText": "has(name)", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-urlsearchparams-has" }], "title": "11.4.1. If you need to monkey patch" }], "url": "https://url.spec.whatwg.org/#dom-urlsearchparams-has" },
                "0a296dfe": { "dfnID": "0a296dfe", "dfnText": "Float32Array", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-idl-Float32Array" }], "title": "6.15. Output an array of bytes with Uint8Array" }], "url": "https://webidl.spec.whatwg.org/#idl-Float32Array" },
                "0c0ceb78": { "dfnID": "0c0ceb78", "dfnText": "bubbles", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-event-bubbles" }], "title": "2.15. Build complex types by composing simpler types" }], "url": "https://dom.spec.whatwg.org/#dom-event-bubbles" },
                "0cf3964f": { "dfnID": "0cf3964f", "dfnText": "script", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-script" }], "title": "3.1. Re-use HTML attribute names (only) for similar functionality" }, { "refs": [{ "id": "ref-for-script\u2460" }], "title": "3.6. Name URL-containing attributes based on their primary purpose" }], "url": "https://html.spec.whatwg.org/multipage/scripting.html#script" },
                "0e3ba9f8": { "dfnID": "0e3ba9f8", "dfnText": "fully active", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-fully-active" }, { "id": "ref-for-fully-active\u2460" }, { "id": "ref-for-fully-active\u2461" }, { "id": "ref-for-fully-active\u2462" }, { "id": "ref-for-fully-active\u2463" }], "title": "2.13. Support non-fully active BFCached documents" }], "url": "https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active" },
                "0e833ee0": { "dfnID": "0e833ee0", "dfnText": "readyState", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-xmlhttprequest-readystate" }], "title": "6.13. Use strings for constants and enums" }], "url": "https://xhr.spec.whatwg.org/#dom-xmlhttprequest-readystate" },
                "0e9f636b": { "dfnID": "0e9f636b", "dfnText": "DOMHighResTimeStamp", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-domhighrestimestamp" }, { "id": "ref-for-dom-domhighrestimestamp\u2460" }, { "id": "ref-for-dom-domhighrestimestamp\u2461" }], "title": "8.4. Use the appropriate type to represent times and dates" }], "url": "https://w3c.github.io/hr-time/#dom-domhighrestimestamp" },
                "1076ec40": { "dfnID": "1076ec40", "dfnText": "HTMLMediaElement", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-htmlmediaelement" }], "title": "6.16. Return undefined from side-effect-causing functions" }], "url": "https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement" },
                "112278c6": { "dfnID": "112278c6", "dfnText": "Gamepad", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-gamepad" }], "title": "5.2. Preserve run-to-completion semantics" }], "url": "https://w3c.github.io/gamepad/#dom-gamepad" },
                "11289557": { "dfnID": "11289557", "dfnText": "figcaption", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-the-figcaption-element" }], "title": "Use casing rules consistent with existing APIs" }], "url": "https://html.spec.whatwg.org/multipage/grouping-content.html#the-figcaption-element" },
                "11e0b87f": { "dfnID": "11e0b87f", "dfnText": "unrestricted double", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-idl-unrestricted-double" }], "title": "8.1. Use numeric types appropriately" }], "url": "https://webidl.spec.whatwg.org/#idl-unrestricted-double" },
                "129bdae8": { "dfnID": "129bdae8", "dfnText": "Event", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-event" }, { "id": "ref-for-event\u2460" }], "title": "2.15. Build complex types by composing simpler types" }, { "refs": [{ "id": "ref-for-event\u2461" }, { "id": "ref-for-event\u2462" }], "title": "6.9. Classes should have constructors when possible" }, { "refs": [{ "id": "ref-for-event\u2463" }], "title": "7.7. Guard against potential recursion" }, { "refs": [{ "id": "ref-for-event\u2464" }, { "id": "ref-for-event\u2465" }, { "id": "ref-for-event\u2466" }, { "id": "ref-for-event\u2467" }], "title": "7.8. Put state on target objects rather than Events" }, { "refs": [{ "id": "ref-for-event\u2468" }], "title": "7.9. Use Events and Observers appropriately" }], "url": "https://dom.spec.whatwg.org/#event" },
                "12cf38c9": { "dfnID": "12cf38c9", "dfnText": "initial-letter", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-initial-letter" }], "title": "4.1. Separate CSS properties based on what should cascade separately" }], "url": "https://drafts.csswg.org/css-inline-3/#propdef-initial-letter" },
                "141bbada": { "dfnID": "141bbada", "dfnText": "DOMTokenList", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-domtokenlist" }, { "id": "ref-for-domtokenlist\u2460" }, { "id": "ref-for-domtokenlist\u2461" }], "title": "3.2. Use space-separated attributes for short lists of values, separate elements for longer lists" }, { "refs": [{ "id": "ref-for-domtokenlist\u2462" }, { "id": "ref-for-domtokenlist\u2463" }], "title": "6.9. Classes should have constructors when possible" }], "url": "https://dom.spec.whatwg.org/#domtokenlist" },
                "14e45097": { "dfnID": "14e45097", "dfnText": "value (for HTMLInputElement)", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-input-value" }], "title": "7.8. Put state on target objects rather than Events" }], "url": "https://html.spec.whatwg.org/multipage/input.html#dom-input-value" },
                "16310992": { "dfnID": "16310992", "dfnText": "<number>", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-number-value" }, { "id": "ref-for-number-value\u2460" }], "title": "4.3. Choose the computed value type based on how the property should inherit" }, { "refs": [{ "id": "ref-for-number-value\u2461" }, { "id": "ref-for-number-value\u2462" }], "title": "11.4.1. If you need to monkey patch" }], "url": "https://drafts.csswg.org/css-values-4/#number-value" },
                "1748bbeb": { "dfnID": "1748bbeb", "dfnText": "details", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-the-details-element" }], "title": "3.1. Re-use HTML attribute names (only) for similar functionality" }], "url": "https://html.spec.whatwg.org/multipage/interactive-elements.html#the-details-element" },
                "1812300f": { "dfnID": "1812300f", "dfnText": "dialog", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-the-dialog-element" }], "title": "3.1. Re-use HTML attribute names (only) for similar functionality" }], "url": "https://html.spec.whatwg.org/multipage/interactive-elements.html#the-dialog-element" },
                "19065ec8": { "dfnID": "19065ec8", "dfnText": "abort()", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-abortcontroller-abort" }], "title": "6.12. Cancel asynchronous APIs/operations using AbortSignal" }, { "refs": [{ "id": "ref-for-dom-abortcontroller-abort\u2460" }], "title": "7.7. Guard against potential recursion" }], "url": "https://dom.spec.whatwg.org/#dom-abortcontroller-abort" },
                "1bb59bab": { "dfnID": "1bb59bab", "dfnText": "AudioWorklet", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-AudioWorklet" }], "title": "10.2.1. Some APIs should only be exposed to dedicated workers" }], "url": "https://webaudio.github.io/web-audio-api/#AudioWorklet" },
                "1fc098b2": { "dfnID": "1fc098b2", "dfnText": "KeyboardEvent", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-keyboardevent" }], "title": "2.15. Build complex types by composing simpler types" }], "url": "https://w3c.github.io/uievents/#keyboardevent" },
                "2039631f": { "dfnID": "2039631f", "dfnText": "namespace", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dfn-namespace" }, { "id": "ref-for-dfn-namespace\u2460" }], "title": "6.9. Classes should have constructors when possible" }], "url": "https://webidl.spec.whatwg.org/#dfn-namespace" },
                "21ec9802": { "dfnID": "21ec9802", "dfnText": "inherit", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-css-inheritance" }], "title": "4.3. Choose the computed value type based on how the property should inherit" }], "url": "https://drafts.csswg.org/css-cascade-5/#css-inheritance" },
                "2296404c": { "dfnID": "2296404c", "dfnText": "signal abort", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-abortcontroller-signal-abort" }, { "id": "ref-for-abortcontroller-signal-abort\u2460" }, { "id": "ref-for-abortcontroller-signal-abort\u2461" }, { "id": "ref-for-abortcontroller-signal-abort\u2462" }, { "id": "ref-for-abortcontroller-signal-abort\u2463" }, { "id": "ref-for-abortcontroller-signal-abort\u2464" }, { "id": "ref-for-abortcontroller-signal-abort\u2465" }], "title": "7.7. Guard against potential recursion" }], "url": "https://dom.spec.whatwg.org/#abortcontroller-signal-abort" },
                "22cb9a16": { "dfnID": "22cb9a16", "dfnText": "ByteString", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-idl-ByteString" }, { "id": "ref-for-idl-ByteString\u2460" }], "title": "8.2. Represent strings appropriately" }], "url": "https://webidl.spec.whatwg.org/#idl-ByteString" },
                "24366e21": { "dfnID": "24366e21", "dfnText": "accept", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-attr-input-accept" }], "title": "3.2. Use space-separated attributes for short lists of values, separate elements for longer lists" }], "url": "https://html.spec.whatwg.org/multipage/input.html#attr-input-accept" },
                "296f3551": { "dfnID": "296f3551", "dfnText": "Element", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-element" }], "title": "6.9. Classes should have constructors when possible" }], "url": "https://dom.spec.whatwg.org/#element" },
                "2aaa2f42": { "dfnID": "2aaa2f42", "dfnText": "HTTP fetch", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-http-fetch" }], "title": "11.4.1. If you need to monkey patch" }], "url": "https://fetch.spec.whatwg.org/#concept-http-fetch" },
                "2bc0cdf4": { "dfnID": "2bc0cdf4", "dfnText": "EventTarget", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-eventtarget" }, { "id": "ref-for-eventtarget\u2460" }], "title": "7.8. Put state on target objects rather than Events" }, { "refs": [{ "id": "ref-for-eventtarget\u2461" }, { "id": "ref-for-eventtarget\u2462" }, { "id": "ref-for-eventtarget\u2463" }, { "id": "ref-for-eventtarget\u2464" }, { "id": "ref-for-eventtarget\u2465" }, { "id": "ref-for-eventtarget\u2466" }, { "id": "ref-for-eventtarget\u2467" }, { "id": "ref-for-eventtarget\u2468" }], "title": "7.9. Use Events and Observers appropriately" }], "url": "https://dom.spec.whatwg.org/#eventtarget" },
                "2c73cb69": { "dfnID": "2c73cb69", "dfnText": "languagechange", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-event-languagechange" }], "title": "Use casing rules consistent with existing APIs" }], "url": "https://html.spec.whatwg.org/multipage/indices.html#event-languagechange" },
                "2c82d279": { "dfnID": "2c82d279", "dfnText": "audio", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-audio" }], "title": "3.2. Use space-separated attributes for short lists of values, separate elements for longer lists" }], "url": "https://html.spec.whatwg.org/multipage/media.html#audio" },
                "2e3a180b": { "dfnID": "2e3a180b", "dfnText": "[[state]]", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dfn-state" }, { "id": "ref-for-dfn-state\u2460" }], "title": "7.7. Guard against potential recursion" }], "url": "https://w3c.github.io/payment-request/#dfn-state" },
                "2e66eaf1": { "dfnID": "2e66eaf1", "dfnText": "AbortController", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-abortcontroller" }], "title": "6.12. Cancel asynchronous APIs/operations using AbortSignal" }, { "refs": [{ "id": "ref-for-abortcontroller\u2460" }], "title": "7.7. Guard against potential recursion" }], "url": "https://dom.spec.whatwg.org/#abortcontroller" },
                "2f8afbfe": { "dfnID": "2f8afbfe", "dfnText": "ArrayBuffer", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-idl-ArrayBuffer" }], "title": "6.15. Output an array of bytes with Uint8Array" }], "url": "https://webidl.spec.whatwg.org/#idl-ArrayBuffer" },
                "30011333": { "dfnID": "30011333", "dfnText": "percent-encoding", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dfn-percent-encoding" }], "title": "8.2. Represent strings appropriately" }], "url": "https://w3c.github.io/i18n-glossary/#dfn-percent-encoding" },
                "31133468": { "dfnID": "31133468", "dfnText": "open", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-attr-details-open" }], "title": "3.1. Re-use HTML attribute names (only) for similar functionality" }], "url": "https://html.spec.whatwg.org/multipage/interactive-elements.html#attr-details-open" },
                "31559e1b": { "dfnID": "31559e1b", "dfnText": "define(name, constructor, options)", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-customelementregistry-define" }], "title": "5.1. Use JavaScript for Web APIs" }], "url": "https://html.spec.whatwg.org/multipage/custom-elements.html#dom-customelementregistry-define" },
                "3245cc5d": { "dfnID": "3245cc5d", "dfnText": "initial-letter-align", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-initial-letter-align" }], "title": "4.1. Separate CSS properties based on what should cascade separately" }], "url": "https://drafts.csswg.org/css-inline-3/#propdef-initial-letter-align" },
                "3332e595": { "dfnID": "3332e595", "dfnText": "setTimeout(handler, timeout, ...arguments)", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-settimeout" }], "title": "8.3. Use milliseconds for time measurement" }], "url": "https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#dom-settimeout" },
                "37ef25b8": { "dfnID": "37ef25b8", "dfnText": "HTMLHtmlElement", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-htmlhtmlelement" }], "title": "Use casing rules consistent with existing APIs" }], "url": "https://html.spec.whatwg.org/multipage/semantics.html#htmlhtmlelement" },
                "3a2db83f": { "dfnID": "3a2db83f", "dfnText": "localStorage", "external": true, "refSections": [{ "refs": [{ "id": "79d831630" }], "title": "2.10. Consider how your API should behave in private browsing mode" }, { "refs": [{ "id": "ref-for-dom-localstorage" }], "title": "10.3. Only purely computational features should be exposed everywhere" }], "url": "https://html.spec.whatwg.org/multipage/webstorage.html#dom-localstorage" },
                "3a3c984c": { "dfnID": "3a3c984c", "dfnText": "task queues", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dfn-service-worker-registration-task-queue" }, { "id": "ref-for-dfn-service-worker-registration-task-queue\u2460" }], "title": "7.7. Guard against potential recursion" }], "url": "https://w3c.github.io/ServiceWorker/#dfn-service-worker-registration-task-queue" },
                "3b64181e": { "dfnID": "3b64181e", "dfnText": "none", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-valdef-font-size-adjust-none" }], "title": "11.4.1. If you need to monkey patch" }], "url": "https://drafts.csswg.org/css-fonts-5/#valdef-font-size-adjust-none" },
                "3c05c488": { "dfnID": "3c05c488", "dfnText": "Accept", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-name-accept" }], "title": "3.2. Use space-separated attributes for short lists of values, separate elements for longer lists" }], "url": "https://www.rfc-editor.org/rfc/rfc9110.html#name-accept" },
                "3da24a47": { "dfnID": "3da24a47", "dfnText": "ping", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-ping" }], "title": "3.6. Name URL-containing attributes based on their primary purpose" }], "url": "https://html.spec.whatwg.org/multipage/links.html#ping" },
                "3f03fff1": { "dfnID": "3f03fff1", "dfnText": "datalist", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-the-datalist-element" }], "title": "3.2. Use space-separated attributes for short lists of values, separate elements for longer lists" }], "url": "https://html.spec.whatwg.org/multipage/form-elements.html#the-datalist-element" },
                "3f597ac1": { "dfnID": "3f597ac1", "dfnText": "createImageBitmap(image, options)", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-createimagebitmap" }], "title": "6.9. Classes should have constructors when possible" }], "url": "https://html.spec.whatwg.org/multipage/imagebitmap-and-animations.html#dom-createimagebitmap" },
                "3fbd5055": { "dfnID": "3fbd5055", "dfnText": "abbr", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-the-abbr-element" }], "title": "3.7. Give each HTML element a single purpose" }], "url": "https://html.spec.whatwg.org/multipage/text-level-semantics.html#the-abbr-element" },
                "434af3a5": { "dfnID": "434af3a5", "dfnText": "now()", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-sec-date.now" }], "title": "5.2. Preserve run-to-completion semantics" }], "url": "https://tc39.es/ecma262/multipage/numbers-and-dates.html#sec-date.now" },
                "46335198": { "dfnID": "46335198", "dfnText": "delete(name)", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-urlsearchparams-delete" }], "title": "11.4.1. If you need to monkey patch" }], "url": "https://url.spec.whatwg.org/#dom-urlsearchparams-delete" },
                "47574099": { "dfnID": "47574099", "dfnText": "short", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-idl-short" }], "title": "8.1. Use numeric types appropriately" }], "url": "https://webidl.spec.whatwg.org/#idl-short" },
                "478bb3aa": { "dfnID": "478bb3aa", "dfnText": "ImageBitmap", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-imagebitmap" }], "title": "6.9. Classes should have constructors when possible" }], "url": "https://html.spec.whatwg.org/multipage/imagebitmap-and-animations.html#imagebitmap" },
                "47fe679e": { "dfnID": "47fe679e", "dfnText": "transient activation", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-transient-activation" }], "title": "5.2. Preserve run-to-completion semantics" }], "url": "https://html.spec.whatwg.org/multipage/interaction.html#transient-activation" },
                "48438eb3": { "dfnID": "48438eb3", "dfnText": "queue a global task", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-queue-a-global-task" }], "title": "6.17. Prefer existing task sources" }], "url": "https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task" },
                "4872935b": { "dfnID": "4872935b", "dfnText": "resize", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-event-media-resize" }], "title": "7.6. Use events for notification" }], "url": "https://html.spec.whatwg.org/multipage/media.html#event-media-resize" },
                "4fe61159": { "dfnID": "4fe61159", "dfnText": "resolved value", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-resolved-value" }], "title": "4.3. Choose the computed value type based on how the property should inherit" }], "url": "https://drafts.csswg.org/cssom-1/#resolved-value" },
                "50e555d8": { "dfnID": "50e555d8", "dfnText": "once", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-addeventlisteneroptions-once" }], "title": "7.9. Use Events and Observers appropriately" }], "url": "https://dom.spec.whatwg.org/#dom-addeventlisteneroptions-once" },
                "518be2ae": { "dfnID": "518be2ae", "dfnText": "InputEvent", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-inputevent" }], "title": "7.8. Put state on target objects rather than Events" }], "url": "https://w3c.github.io/uievents/#inputevent" },
                "529179ea": { "dfnID": "529179ea", "dfnText": "Crypto", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dfn-Crypto" }], "title": "6.9. Classes should have constructors when possible" }], "url": "https://w3c.github.io/webcrypto/#dfn-Crypto" },
                "535dd335": { "dfnID": "535dd335", "dfnText": "aborted", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-abortsignal-aborted" }, { "id": "ref-for-abortsignal-aborted\u2460" }], "title": "7.7. Guard against potential recursion" }], "url": "https://dom.spec.whatwg.org/#abortsignal-aborted" },
                "537cf076": { "dfnID": "537cf076", "dfnText": "?", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-mult-opt" }], "title": "11.4.1. If you need to monkey patch" }], "url": "https://drafts.csswg.org/css-values-4/#mult-opt" },
                "54fa0afb": { "dfnID": "54fa0afb", "dfnText": "backdrop-filter", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-backdrop-filter" }], "title": "11.3. Resolving tension between interoperability and implementability" }], "url": "https://drafts.fxtf.org/filter-effects-2/#propdef-backdrop-filter" },
                "5528aefc": { "dfnID": "5528aefc", "dfnText": "loaded", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-progressevent-loaded" }], "title": "7.7. Guard against potential recursion" }], "url": "https://xhr.spec.whatwg.org/#dom-progressevent-loaded" },
                "55b2f02c": { "dfnID": "55b2f02c", "dfnText": "poster", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-attr-video-poster" }], "title": "3.6. Name URL-containing attributes based on their primary purpose" }], "url": "https://html.spec.whatwg.org/multipage/media.html#attr-video-poster" },
                "59912c93": { "dfnID": "59912c93", "dfnText": "code unit", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-code-unit" }], "title": "8.2. Represent strings appropriately" }], "url": "https://infra.spec.whatwg.org/#code-unit" },
                "59f1958b": { "dfnID": "59f1958b", "dfnText": "XMLHttpRequestEventTarget", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-xmlhttprequesteventtarget" }], "title": "7.9. Use Events and Observers appropriately" }], "url": "https://xhr.spec.whatwg.org/#xmlhttprequesteventtarget" },
                "5ab7b520": { "dfnID": "5ab7b520", "dfnText": "reflect", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-reflect" }], "title": "8.2. Represent strings appropriately" }, { "refs": [{ "id": "ref-for-reflect\u2460" }, { "id": "ref-for-reflect\u2461" }], "title": "Use casing rules consistent with existing APIs" }], "url": "https://html.spec.whatwg.org/multipage/common-dom-interfaces.html#reflect" },
                "5bcbeb1e": { "dfnID": "5bcbeb1e", "dfnText": "getDisplayMedia()", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-mediadevices-getdisplaymedia" }], "title": "When to use callback functions" }], "url": "https://w3c.github.io/mediacapture-screen-share/#dom-mediadevices-getdisplaymedia" },
                "5c35dd47": { "dfnID": "5c35dd47", "dfnText": "sandbox", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-attr-iframe-sandbox" }], "title": "3.2. Use space-separated attributes for short lists of values, separate elements for longer lists" }], "url": "https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-sandbox" },
                "5d7209e9": { "dfnID": "5d7209e9", "dfnText": "Window", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-window" }], "title": "6.9. Classes should have constructors when possible" }, { "refs": [{ "id": "ref-for-window\u2460" }], "title": "7.5. Always add event handler attributes" }, { "refs": [{ "id": "ref-for-window\u2461" }], "title": "10.2.1. Some APIs should only be exposed to dedicated workers" }], "url": "https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" },
                "5d83727e": { "dfnID": "5d83727e", "dfnText": "actual value", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-actual-value" }], "title": "4.3. Choose the computed value type based on how the property should inherit" }], "url": "https://drafts.csswg.org/css-cascade-5/#actual-value" },
                "5def70a6": { "dfnID": "5def70a6", "dfnText": "querySelectorAll(selectors)", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-parentnode-queryselectorall" }], "title": "Static objects" }], "url": "https://dom.spec.whatwg.org/#dom-parentnode-queryselectorall" },
                "5eafebb0": { "dfnID": "5eafebb0", "dfnText": "sequence type", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-sequence-type" }, { "id": "ref-for-sequence-type\u2460" }], "title": "6.6. Make method arguments optional if possible" }, { "refs": [{ "id": "ref-for-sequence-type\u2461" }], "title": "8.2. Represent strings appropriately" }], "url": "https://webidl.spec.whatwg.org/#sequence-type" },
                "5f45e759": { "dfnID": "5f45e759", "dfnText": "FinalizationRegistry", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-sec-finalization-registry-objects" }], "title": "5.3. Don\u2019t expose garbage collection" }], "url": "https://tc39.es/ecma262/multipage/managing-memory.html#sec-finalization-registry-objects" },
                "5f753d3e": { "dfnID": "5f753d3e", "dfnText": "action", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-attr-fs-action" }], "title": "3.6. Name URL-containing attributes based on their primary purpose" }], "url": "https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#attr-fs-action" },
                "5f90bbfb": { "dfnID": "5f90bbfb", "dfnText": "undefined", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-idl-undefined" }, { "id": "ref-for-idl-undefined\u2460" }, { "id": "ref-for-idl-undefined\u2461" }], "title": "6.16. Return undefined from side-effect-causing functions" }], "url": "https://webidl.spec.whatwg.org/#idl-undefined" },
                "5f9c7266": { "dfnID": "5f9c7266", "dfnText": "Number", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-sec-number-objects" }, { "id": "ref-for-sec-number-objects\u2460" }, { "id": "ref-for-sec-number-objects\u2461" }], "title": "8.1. Use numeric types appropriately" }], "url": "https://tc39.es/ecma262/multipage/numbers-and-dates.html#sec-number-objects" },
                "5fa63f4e": { "dfnID": "5fa63f4e", "dfnText": "defaultValue", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-input-defaultvalue" }], "title": "3.5. Keep attributes in sync" }], "url": "https://html.spec.whatwg.org/multipage/input.html#dom-input-defaultvalue" },
                "5fcd7fc5": { "dfnID": "5fcd7fc5", "dfnText": "createElement(localName)", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-document-createelement" }], "title": "6.9. Classes should have constructors when possible" }], "url": "https://dom.spec.whatwg.org/#dom-document-createelement" },
                "5fd23811": { "dfnID": "5fd23811", "dfnText": "fire an event", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-event-fire" }], "title": "7.7. Guard against potential recursion" }], "url": "https://dom.spec.whatwg.org/#concept-event-fire" },
                "611cb8cd": { "dfnID": "611cb8cd", "dfnText": "respondWith(r)", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-fetchevent-respondwith" }], "title": "When to use callback functions" }], "url": "https://w3c.github.io/ServiceWorker/#dom-fetchevent-respondwith" },
                "613edb27": { "dfnID": "613edb27", "dfnText": "play()", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-media-play" }, { "id": "ref-for-dom-media-play\u2460" }], "title": "6.16. Return undefined from side-effect-causing functions" }], "url": "https://html.spec.whatwg.org/multipage/media.html#dom-media-play" },
                "66aee777": { "dfnID": "66aee777", "dfnText": "type", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-attr-input-type" }, { "id": "ref-for-attr-input-type\u2460" }], "title": "3.7. Give each HTML element a single purpose" }], "url": "https://html.spec.whatwg.org/multipage/input.html#attr-input-type" },
                "67fa4a40": { "dfnID": "67fa4a40", "dfnText": "total", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-progressevent-total" }], "title": "7.7. Guard against potential recursion" }], "url": "https://xhr.spec.whatwg.org/#dom-progressevent-total" },
                "680651c3": { "dfnID": "680651c3", "dfnText": "NonElementParentNode", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-nonelementparentnode" }], "title": "Use casing rules consistent with existing APIs" }], "url": "https://dom.spec.whatwg.org/#nonelementparentnode" },
                "68bf3d31": { "dfnID": "68bf3d31", "dfnText": "a", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-the-a-element" }, { "id": "ref-for-the-a-element\u2460" }], "title": "3.6. Name URL-containing attributes based on their primary purpose" }], "url": "https://html.spec.whatwg.org/multipage/text-level-semantics.html#the-a-element" },
                "68c033c8": { "dfnID": "68c033c8", "dfnText": "getElementsByTagName(qualifiedName)", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-document-getelementsbytagname" }, { "id": "ref-for-dom-document-getelementsbytagname\u2460" }, { "id": "ref-for-dom-document-getelementsbytagname\u2461" }], "title": "5.3. Don\u2019t expose garbage collection" }, { "refs": [{ "id": "ref-for-dom-document-getelementsbytagname\u2462" }, { "id": "ref-for-dom-document-getelementsbytagname\u2463" }], "title": "Static objects" }], "url": "https://dom.spec.whatwg.org/#dom-document-getelementsbytagname" },
                "6a288f2a": { "dfnID": "6a288f2a", "dfnText": "microtask", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-microtask" }], "title": "5.2. Preserve run-to-completion semantics" }, { "refs": [{ "id": "e2b55c350" }], "title": "7.3. Events should fire before related Promises resolve" }], "url": "https://html.spec.whatwg.org/multipage/webappapis.html#microtask" },
                "6cf6f82f": { "dfnID": "6cf6f82f", "dfnText": "addEventListener(type, callback)", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-eventtarget-addeventlistener" }], "title": "6.6. Make method arguments optional if possible" }, { "refs": [{ "id": "ref-for-dom-eventtarget-addeventlistener\u2460" }], "title": "6.7. Name optional arguments appropriately" }, { "refs": [{ "id": "ref-for-dom-eventtarget-addeventlistener\u2461" }], "title": "7.9. Use Events and Observers appropriately" }], "url": "https://dom.spec.whatwg.org/#dom-eventtarget-addeventlistener" },
                "6cfa013d": { "dfnID": "6cfa013d", "dfnText": "link", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-the-link-element" }], "title": "3.1. Re-use HTML attribute names (only) for similar functionality" }, { "refs": [{ "id": "ref-for-the-link-element\u2460" }], "title": "3.6. Name URL-containing attributes based on their primary purpose" }], "url": "https://html.spec.whatwg.org/multipage/semantics.html#the-link-element" },
                "6e923df0": { "dfnID": "6e923df0", "dfnText": "Error", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-sec-error-objects" }], "title": "8.5. Use Error or DOMException for errors" }], "url": "https://tc39.es/ecma262/multipage/fundamental-objects.html#sec-error-objects" },
                "6ec67710": { "dfnID": "6ec67710", "dfnText": "|", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-comb-one" }, { "id": "ref-for-comb-one\u2460" }, { "id": "ref-for-comb-one\u2461" }, { "id": "ref-for-comb-one\u2462" }, { "id": "ref-for-comb-one\u2463" }, { "id": "ref-for-comb-one\u2464" }], "title": "11.4.1. If you need to monkey patch" }], "url": "https://drafts.csswg.org/css-values-4/#comb-one" },
                "72aaa5d6": { "dfnID": "72aaa5d6", "dfnText": "queue an element task", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-queue-an-element-task" }], "title": "6.17. Prefer existing task sources" }], "url": "https://html.spec.whatwg.org/multipage/webappapis.html#queue-an-element-task" },
                "762869d3": { "dfnID": "762869d3", "dfnText": "scalar value string", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-scalar-value-string" }], "title": "8.2. Represent strings appropriately" }], "url": "https://infra.spec.whatwg.org/#scalar-value-string" },
                "762ce945": { "dfnID": "762ce945", "dfnText": "GlobalEventHandlers", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-globaleventhandlers" }], "title": "7.5. Always add event handler attributes" }], "url": "https://html.spec.whatwg.org/multipage/webappapis.html#globaleventhandlers" },
                "77996ab1": { "dfnID": "77996ab1", "dfnText": "maplike", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dfn-maplike" }], "title": "Static objects" }], "url": "https://webidl.spec.whatwg.org/#dfn-maplike" },
                "7a26cf99": { "dfnID": "7a26cf99", "dfnText": "width", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-img-width" }], "title": "5.2. Preserve run-to-completion semantics" }], "url": "https://html.spec.whatwg.org/multipage/embedded-content.html#dom-img-width" },
                "7b0dc914": { "dfnID": "7b0dc914", "dfnText": "ProgressEvent", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-progressevent" }], "title": "7.7. Guard against potential recursion" }], "url": "https://xhr.spec.whatwg.org/#progressevent" },
                "7b1760b0": { "dfnID": "7b1760b0", "dfnText": "console", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-namespacedef-console" }, { "id": "ref-for-namespacedef-console\u2460" }], "title": "10.3. Only purely computational features should be exposed everywhere" }], "url": "https://console.spec.whatwg.org/#namespacedef-console" },
                "7bd34c20": { "dfnID": "7bd34c20", "dfnText": "isActive", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-useractivation-isactive" }], "title": "5.2. Preserve run-to-completion semantics" }], "url": "https://html.spec.whatwg.org/multipage/interaction.html#dom-useractivation-isactive" },
                "7c397e50": { "dfnID": "7c397e50", "dfnText": "Body", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-body" }], "title": "12.1. Use common words" }], "url": "https://fetch.spec.whatwg.org/#body" },
                "7d783f61": { "dfnID": "7d783f61", "dfnText": "SharedArrayBuffer", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-idl-SharedArrayBuffer" }], "title": "11.3. Resolving tension between interoperability and implementability" }], "url": "https://webidl.spec.whatwg.org/#idl-SharedArrayBuffer" },
                "7e4cbc4d": { "dfnID": "7e4cbc4d", "dfnText": "acronym", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-acronym" }], "title": "3.7. Give each HTML element a single purpose" }], "url": "https://html.spec.whatwg.org/multipage/obsolete.html#acronym" },
                "7f21931f": { "dfnID": "7f21931f", "dfnText": "NamedNodeMap", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-namednodemap" }], "title": "Use casing rules consistent with existing APIs" }], "url": "https://dom.spec.whatwg.org/#namednodemap" },
                "7f769aa9": { "dfnID": "7f769aa9", "dfnText": "remote playback device", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dfn-remote-playback-devices" }, { "id": "ref-for-dfn-remote-playback-devices\u2460" }], "title": "9.2. Use care when exposing APIs for selecting or enumerating devices" }], "url": "https://w3c.github.io/remote-playback/#dfn-remote-playback-devices" },
                "825cbc48": { "dfnID": "825cbc48", "dfnText": "user interaction task source", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-user-interaction-task-source" }], "title": "6.17. Prefer existing task sources" }], "url": "https://html.spec.whatwg.org/multipage/webappapis.html#user-interaction-task-source" },
                "82ca3efc": { "dfnID": "82ca3efc", "dfnText": "TypeError", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-exceptiondef-typeerror" }], "title": "6.9. Classes should have constructors when possible" }, { "refs": [{ "id": "ref-for-exceptiondef-typeerror\u2460" }, { "id": "ref-for-exceptiondef-typeerror\u2461" }], "title": "8.1. Use numeric types appropriately" }], "url": "https://webidl.spec.whatwg.org/#exceptiondef-typeerror" },
                "83b269de": { "dfnID": "83b269de", "dfnText": "HTMLInputElement", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-htmlinputelement" }, { "id": "ref-for-htmlinputelement\u2460" }, { "id": "ref-for-htmlinputelement\u2461" }], "title": "2.15. Build complex types by composing simpler types" }, { "refs": [{ "id": "ref-for-htmlinputelement\u2462" }], "title": "7.8. Put state on target objects rather than Events" }], "url": "https://html.spec.whatwg.org/multipage/input.html#htmlinputelement" },
                "83c7a70f": { "dfnID": "83c7a70f", "dfnText": "MutationObserver", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-mutationobserver" }, { "id": "ref-for-mutationobserver\u2460" }], "title": "7.9. Use Events and Observers appropriately" }], "url": "https://dom.spec.whatwg.org/#mutationobserver" },
                "84f243ef": { "dfnID": "84f243ef", "dfnText": "label", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-the-label-element" }], "title": "3.1. Re-use HTML attribute names (only) for similar functionality" }], "url": "https://html.spec.whatwg.org/multipage/forms.html#the-label-element" },
                "85188fb3": { "dfnID": "85188fb3", "dfnText": "select", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-the-select-element" }], "title": "3.1. Re-use HTML attribute names (only) for similar functionality" }, { "refs": [{ "id": "ref-for-the-select-element\u2460" }], "title": "3.2. Use space-separated attributes for short lists of values, separate elements for longer lists" }], "url": "https://html.spec.whatwg.org/multipage/form-elements.html#the-select-element" },
                "860300d4": { "dfnID": "860300d4", "dfnText": "implementation-defined", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-implementation-defined" }], "title": "9.2. Use care when exposing APIs for selecting or enumerating devices" }], "url": "https://infra.spec.whatwg.org/#implementation-defined" },
                "8662cdd3": { "dfnID": "8662cdd3", "dfnText": "checked", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-attr-input-checked" }], "title": "3.5. Keep attributes in sync" }], "url": "https://html.spec.whatwg.org/multipage/input.html#attr-input-checked" },
                "87bc23a5": { "dfnID": "87bc23a5", "dfnText": "add", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-abortsignal-add" }, { "id": "ref-for-abortsignal-add\u2460" }, { "id": "ref-for-abortsignal-add\u2461" }], "title": "7.7. Guard against potential recursion" }], "url": "https://dom.spec.whatwg.org/#abortsignal-add" },
                "8855a9aa": { "dfnID": "8855a9aa", "dfnText": "DOMString", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-idl-DOMString" }, { "id": "ref-for-idl-DOMString\u2460" }], "title": "8.2. Represent strings appropriately" }], "url": "https://webidl.spec.whatwg.org/#idl-DOMString" },
                "88885797": { "dfnID": "88885797", "dfnText": "for", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-attr-label-for" }], "title": "3.1. Re-use HTML attribute names (only) for similar functionality" }], "url": "https://html.spec.whatwg.org/multipage/forms.html#attr-label-for" },
                "889e932f": { "dfnID": "889e932f", "dfnText": "Exposed", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-Exposed" }, { "id": "ref-for-Exposed\u2460" }], "title": "10.3. Only purely computational features should be exposed everywhere" }], "url": "https://webidl.spec.whatwg.org/#Exposed" },
                "8baa72cd": { "dfnID": "8baa72cd", "dfnText": "WindowEventHandlers", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-windoweventhandlers" }], "title": "7.5. Always add event handler attributes" }], "url": "https://html.spec.whatwg.org/multipage/webappapis.html#windoweventhandlers" },
                "8bd77373": { "dfnID": "8bd77373", "dfnText": "currentTime", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-animationtimeline-currenttime" }], "title": "5.2. Preserve run-to-completion semantics" }], "url": "https://drafts.csswg.org/web-animations-2/#dom-animationtimeline-currenttime" },
                "8bdd3ef8": { "dfnID": "8bdd3ef8", "dfnText": "then(onFulfilled, onRejected)", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-sec-promise.prototype.then" }], "title": "When to use callback functions" }], "url": "https://tc39.es/ecma262/multipage/control-abstraction-objects.html#sec-promise.prototype.then" },
                "8c800cdf": { "dfnID": "8c800cdf", "dfnText": "double", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-idl-double" }], "title": "8.1. Use numeric types appropriately" }], "url": "https://webidl.spec.whatwg.org/#idl-double" },
                "8c8cc336": { "dfnID": "8c8cc336", "dfnText": "Date", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-sec-date-objects" }], "title": "8.3. Use milliseconds for time measurement" }, { "refs": [{ "id": "ref-for-sec-date-objects\u2460" }, { "id": "ref-for-sec-date-objects\u2461" }, { "id": "ref-for-sec-date-objects\u2462" }], "title": "8.4. Use the appropriate type to represent times and dates" }], "url": "https://tc39.es/ecma262/multipage/numbers-and-dates.html#sec-date-objects" },
                "8dba5fba": { "dfnID": "8dba5fba", "dfnText": "\"no-referrer-when-downgrade\"", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-referrerpolicy-no-referrer-when-downgrade" }], "title": "Use casing rules consistent with existing APIs" }], "url": "https://w3c.github.io/webappsec-referrer-policy/#dom-referrerpolicy-no-referrer-when-downgrade" },
                "93c4bcc0": { "dfnID": "93c4bcc0", "dfnText": "ismap", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-attr-img-ismap" }], "title": "Use casing rules consistent with existing APIs" }], "url": "https://html.spec.whatwg.org/multipage/embedded-content.html#attr-img-ismap" },
                "946a9318": { "dfnID": "946a9318", "dfnText": "form", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-the-form-element" }], "title": "3.6. Name URL-containing attributes based on their primary purpose" }], "url": "https://html.spec.whatwg.org/multipage/forms.html#the-form-element" },
                "95d7775a": { "dfnID": "95d7775a", "dfnText": "Uint8Array", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-idl-Uint8Array" }], "title": "6.15. Output an array of bytes with Uint8Array" }, { "refs": [{ "id": "ref-for-idl-Uint8Array\u2460" }], "title": "8.2. Represent strings appropriately" }], "url": "https://webidl.spec.whatwg.org/#idl-Uint8Array" },
                "96c16e60": { "dfnID": "96c16e60", "dfnText": "Node", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-node" }], "title": "Live objects" }, { "refs": [{ "id": "ref-for-node\u2460" }, { "id": "ref-for-node\u2461" }], "title": "7.9. Use Events and Observers appropriately" }], "url": "https://dom.spec.whatwg.org/#node" },
                "96ffbcca": { "dfnID": "96ffbcca", "dfnText": "selected", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-attr-option-selected" }], "title": "3.5. Keep attributes in sync" }], "url": "https://html.spec.whatwg.org/multipage/form-elements.html#attr-option-selected" },
                "9714d594": { "dfnID": "9714d594", "dfnText": "HTMLCollection", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-htmlcollection" }, { "id": "ref-for-htmlcollection\u2460" }], "title": "5.3. Don\u2019t expose garbage collection" }, { "refs": [{ "id": "ref-for-htmlcollection\u2461" }], "title": "Use casing rules consistent with existing APIs" }], "url": "https://dom.spec.whatwg.org/#htmlcollection" },
                "99a3763c": { "dfnID": "99a3763c", "dfnText": "font-size-adjust", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-font-size-adjust" }], "title": "11.4.1. If you need to monkey patch" }], "url": "https://drafts.csswg.org/css-fonts-4/#propdef-font-size-adjust" },
                "9a517a7d": { "dfnID": "9a517a7d", "dfnText": "queue a task", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-queue-a-task" }], "title": "7.7. Guard against potential recursion" }], "url": "https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task" },
                "9aeb0a82": { "dfnID": "9aeb0a82", "dfnText": "long long", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-idl-long-long" }], "title": "8.1. Use numeric types appropriately" }], "url": "https://webidl.spec.whatwg.org/#idl-long-long" },
                "9be179f5": { "dfnID": "9be179f5", "dfnText": "IntersectionObserver", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-intersectionobserver" }], "title": "7.9. Use Events and Observers appropriately" }], "url": "https://w3c.github.io/IntersectionObserver/#intersectionobserver" },
                "9cd25054": { "dfnID": "9cd25054", "dfnText": "computed value", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-computed-value" }, { "id": "ref-for-computed-value\u2460" }, { "id": "ref-for-computed-value\u2461" }], "title": "4.3. Choose the computed value type based on how the property should inherit" }], "url": "https://drafts.csswg.org/css-cascade-5/#computed-value" },
                "9d861566": { "dfnID": "9d861566", "dfnText": "showModal()", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-dialog-showmodal" }], "title": "11.2.1. Define algorithms clearly" }], "url": "https://html.spec.whatwg.org/multipage/interactive-elements.html#dom-dialog-showmodal" },
                "9dc3e09f": { "dfnID": "9dc3e09f", "dfnText": "q", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-the-q-element" }], "title": "3.6. Name URL-containing attributes based on their primary purpose" }], "url": "https://html.spec.whatwg.org/multipage/text-level-semantics.html#the-q-element" },
                "9e3cc993": { "dfnID": "9e3cc993", "dfnText": "RemotePlayback", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-remoteplayback" }], "title": "9.2. Use care when exposing APIs for selecting or enumerating devices" }], "url": "https://w3c.github.io/remote-playback/#dom-remoteplayback" },
                "a2411b6a": { "dfnID": "a2411b6a", "dfnText": "History", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-history-3" }], "title": "6.9. Classes should have constructors when possible" }], "url": "https://html.spec.whatwg.org/multipage/nav-history-apis.html#history-3" },
                "a3fb968a": { "dfnID": "a3fb968a", "dfnText": "surrogate", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-surrogate" }], "title": "8.2. Represent strings appropriately" }], "url": "https://infra.spec.whatwg.org/#surrogate" },
                "a46ec9f9": { "dfnID": "a46ec9f9", "dfnText": "IDBDatabase", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-idbdatabase" }], "title": "7.9. Use Events and Observers appropriately" }], "url": "https://w3c.github.io/IndexedDB/#idbdatabase" },
                "a4eb3c57": { "dfnID": "a4eb3c57", "dfnText": "used value", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-used-value" }, { "id": "ref-for-used-value\u2460" }], "title": "4.3. Choose the computed value type based on how the property should inherit" }], "url": "https://drafts.csswg.org/css-cascade-5/#used-value" },
                "a6078b11": { "dfnID": "a6078b11", "dfnText": "href (for link)", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-attr-link-href" }], "title": "3.6. Name URL-containing attributes based on their primary purpose" }], "url": "https://html.spec.whatwg.org/multipage/semantics.html#attr-link-href" },
                "a9789869": { "dfnID": "a9789869", "dfnText": "partial dictionary", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dfn-partial-dictionary" }], "title": "11.4.1. If you need to monkey patch" }], "url": "https://webidl.spec.whatwg.org/#dfn-partial-dictionary" },
                "aa7bbf63": { "dfnID": "aa7bbf63", "dfnText": "video", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-video" }], "title": "3.2. Use space-separated attributes for short lists of values, separate elements for longer lists" }, { "refs": [{ "id": "ref-for-video\u2460" }], "title": "3.6. Name URL-containing attributes based on their primary purpose" }], "url": "https://html.spec.whatwg.org/multipage/media.html#video" },
                "aaa103c9": { "dfnID": "aaa103c9", "dfnText": "compatMode", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-document-compatmode" }], "title": "Use casing rules consistent with existing APIs" }], "url": "https://dom.spec.whatwg.org/#dom-document-compatmode" },
                "ab4b142f": { "dfnID": "ab4b142f", "dfnText": "setFocusBehavior()", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-capturecontroller-setfocusbehavior" }], "title": "When to use callback functions" }], "url": "https://w3c.github.io/mediacapture-screen-share/#dom-capturecontroller-setfocusbehavior" },
                "ab86e0f1": { "dfnID": "ab86e0f1", "dfnText": "show()", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-paymentrequest-show" }], "title": "7.7. Guard against potential recursion" }], "url": "https://w3c.github.io/payment-request/#dom-paymentrequest-show" },
                "ac54fbff": { "dfnID": "ac54fbff", "dfnText": "line-height", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-line-height" }, { "id": "ref-for-propdef-line-height\u2460" }, { "id": "ref-for-propdef-line-height\u2461" }, { "id": "ref-for-propdef-line-height\u2462" }, { "id": "ref-for-propdef-line-height\u2463" }, { "id": "ref-for-propdef-line-height\u2464" }], "title": "4.3. Choose the computed value type based on how the property should inherit" }], "url": "https://drafts.csswg.org/css2/#propdef-line-height" },
                "adfe3014": { "dfnID": "adfe3014", "dfnText": "URLSearchParams", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-urlsearchparams" }], "title": "Static objects" }, { "refs": [{ "id": "ref-for-urlsearchparams\u2460" }, { "id": "ref-for-urlsearchparams\u2461" }], "title": "11.4.1. If you need to monkey patch" }], "url": "https://url.spec.whatwg.org/#urlsearchparams" },
                "aee00462": { "dfnID": "aee00462", "dfnText": "option", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-the-option-element" }], "title": "3.2. Use space-separated attributes for short lists of values, separate elements for longer lists" }, { "refs": [{ "id": "ref-for-the-option-element\u2460" }], "title": "3.5. Keep attributes in sync" }], "url": "https://html.spec.whatwg.org/multipage/form-elements.html#the-option-element" },
                "b07164ad": { "dfnID": "b07164ad", "dfnText": "multiple", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-attr-select-multiple" }], "title": "3.1. Re-use HTML attribute names (only) for similar functionality" }], "url": "https://html.spec.whatwg.org/multipage/form-elements.html#attr-select-multiple" },
                "b093bcd2": { "dfnID": "b093bcd2", "dfnText": "output", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-the-output-element" }], "title": "3.1. Re-use HTML attribute names (only) for similar functionality" }], "url": "https://html.spec.whatwg.org/multipage/form-elements.html#the-output-element" },
                "b0d7f3c3": { "dfnID": "b0d7f3c3", "dfnText": "USVString", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-idl-USVString" }], "title": "3.6. Name URL-containing attributes based on their primary purpose" }, { "refs": [{ "id": "ref-for-idl-USVString\u2460" }, { "id": "ref-for-idl-USVString\u2461" }, { "id": "ref-for-idl-USVString\u2462" }, { "id": "ref-for-idl-USVString\u2463" }], "title": "8.2. Represent strings appropriately" }], "url": "https://webidl.spec.whatwg.org/#idl-USVString" },
                "b203675a": { "dfnID": "b203675a", "dfnText": "getComputedStyle(elt)", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-window-getcomputedstyle" }], "title": "4.3. Choose the computed value type based on how the property should inherit" }], "url": "https://drafts.csswg.org/cssom-1/#dom-window-getcomputedstyle" },
                "b2f8a695": { "dfnID": "b2f8a695", "dfnText": "alert()", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-alert-noargs" }], "title": "1.3. Trusted user interface should be trustworthy" }], "url": "https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#dom-alert-noargs" },
                "b6ae4501": { "dfnID": "b6ae4501", "dfnText": "networking task source", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-networking-task-source" }], "title": "6.17. Prefer existing task sources" }], "url": "https://html.spec.whatwg.org/multipage/webappapis.html#networking-task-source" },
                "b6fb7a51": { "dfnID": "b6fb7a51", "dfnText": "custom element", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-custom-element" }], "title": "6.9. Classes should have constructors when possible" }], "url": "https://html.spec.whatwg.org/multipage/custom-elements.html#custom-element" },
                "b75bb3bd": { "dfnID": "b75bb3bd", "dfnText": "SecureContext", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-SecureContext" }, { "id": "ref-for-SecureContext\u2460" }], "title": "2.8. Consider limiting new features to secure contexts" }], "url": "https://webidl.spec.whatwg.org/#SecureContext" },
                "b7d73f5b": { "dfnID": "b7d73f5b", "dfnText": "Blob", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dfn-Blob" }, { "id": "ref-for-dfn-Blob\u2460" }], "title": "10.3. Only purely computational features should be exposed everywhere" }], "url": "https://w3c.github.io/FileAPI/#dfn-Blob" },
                "b815f411": { "dfnID": "b815f411", "dfnText": "update the rendering", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-update-the-rendering" }], "title": "5.2. Preserve run-to-completion semantics" }], "url": "https://html.spec.whatwg.org/multipage/webappapis.html#update-the-rendering" },
                "b8308563": { "dfnID": "b8308563", "dfnText": "DedicatedWorkerGlobalScope", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dedicatedworkerglobalscope" }], "title": "10.2. Where possible APIs should be made available to dedicated workers" }, { "refs": [{ "id": "ref-for-dedicatedworkerglobalscope\u2460" }], "title": "10.2.1. Some APIs should only be exposed to dedicated workers" }], "url": "https://html.spec.whatwg.org/multipage/workers.html#dedicatedworkerglobalscope" },
                "b88b42f7": { "dfnID": "b88b42f7", "dfnText": "LockManager", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-lockmanager" }], "title": "5.2. Preserve run-to-completion semantics" }], "url": "https://w3c.github.io/web-locks/#lockmanager" },
                "b996b941": { "dfnID": "b996b941", "dfnText": "src (for img)", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-attr-img-src" }], "title": "3.6. Name URL-containing attributes based on their primary purpose" }], "url": "https://html.spec.whatwg.org/multipage/embedded-content.html#attr-img-src" },
                "ba3d5b0d": { "dfnID": "ba3d5b0d", "dfnText": "RTCDTMFSender", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-rtcdtmfsender" }], "title": "Use casing rules consistent with existing APIs" }], "url": "https://w3c.github.io/webrtc-pc/#dom-rtcdtmfsender" },
                "ba920583": { "dfnID": "ba920583", "dfnText": "style", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-the-style-element" }], "title": "3.1. Re-use HTML attribute names (only) for similar functionality" }], "url": "https://html.spec.whatwg.org/multipage/semantics.html#the-style-element" },
                "bc5645aa": { "dfnID": "bc5645aa", "dfnText": "octet", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-idl-octet" }, { "id": "ref-for-idl-octet\u2460" }, { "id": "ref-for-idl-octet\u2461" }, { "id": "ref-for-idl-octet\u2462" }, { "id": "ref-for-idl-octet\u2463" }], "title": "8.1. Use numeric types appropriately" }], "url": "https://webidl.spec.whatwg.org/#idl-octet" },
                "bc9fe445": { "dfnID": "bc9fe445", "dfnText": "createAttribute(localName)", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-document-createattribute" }], "title": "Use casing rules consistent with existing APIs" }], "url": "https://dom.spec.whatwg.org/#dom-document-createattribute" },
                "bcc085e3": { "dfnID": "bcc085e3", "dfnText": "request permission to use", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dfn-request-permission-to-use" }], "title": "1.4.1. Help users make good decisions" }], "url": "https://w3c.github.io/permissions/#dfn-request-permission-to-use" },
                "bdbd19d1": { "dfnID": "bdbd19d1", "dfnText": "Promise", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-idl-promise" }], "title": "6.16. Return undefined from side-effect-causing functions" }, { "refs": [{ "id": "ref-for-idl-promise\u2460" }], "title": "7.7. Guard against potential recursion" }], "url": "https://webidl.spec.whatwg.org/#idl-promise" },
                "bdcd112d": { "dfnID": "bdcd112d", "dfnText": "bigint", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-idl-bigint" }], "title": "8.1. Use numeric types appropriately" }], "url": "https://webidl.spec.whatwg.org/#idl-bigint" },
                "be0c27b2": { "dfnID": "be0c27b2", "dfnText": "Navigator", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-navigator" }], "title": "6.9. Classes should have constructors when possible" }], "url": "https://html.spec.whatwg.org/multipage/system-state.html#navigator" },
                "bf77e69a": { "dfnID": "bf77e69a", "dfnText": "WeakRef", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-sec-weak-ref-objects" }], "title": "5.3. Don\u2019t expose garbage collection" }], "url": "https://tc39.es/ecma262/multipage/managing-memory.html#sec-weak-ref-objects" },
                "bfa87d79": { "dfnID": "bfa87d79", "dfnText": "short_name", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dfn-short_name" }], "title": "Use casing rules consistent with existing APIs" }], "url": "https://w3c.github.io/manifest/#dfn-short_name" },
                "bfff6250": { "dfnID": "bfff6250", "dfnText": "button", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-the-button-element" }], "title": "3.1. Re-use HTML attribute names (only) for similar functionality" }], "url": "https://html.spec.whatwg.org/multipage/form-elements.html#the-button-element" },
                "c01cbda0": { "dfnID": "c01cbda0", "dfnText": "EnforceRange", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-EnforceRange" }, { "id": "ref-for-EnforceRange\u2460" }, { "id": "ref-for-EnforceRange\u2461" }], "title": "8.1. Use numeric types appropriately" }], "url": "https://webidl.spec.whatwg.org/#EnforceRange" },
                "c1ebc639": { "dfnID": "c1ebc639", "dfnText": "@supports", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-at-ruledef-supports" }], "title": "2.6. New features should be detectable" }], "url": "https://drafts.csswg.org/css-conditional-3/#at-ruledef-supports" },
                "c219fdf4": { "dfnID": "c219fdf4", "dfnText": "srcset", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-attr-img-srcset" }], "title": "3.2. Use space-separated attributes for short lists of values, separate elements for longer lists" }], "url": "https://html.spec.whatwg.org/multipage/embedded-content.html#attr-img-srcset" },
                "c2430fbb": { "dfnID": "c2430fbb", "dfnText": "prompt the user to choose", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dfn-prompt-the-user-to-choose" }], "title": "1.4.1. Help users make good decisions" }], "url": "https://w3c.github.io/permissions/#dfn-prompt-the-user-to-choose" },
                "c262266a": { "dfnID": "c262266a", "dfnText": "WorkerType", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-workertype" }], "title": "6.13. Use strings for constants and enums" }], "url": "https://html.spec.whatwg.org/multipage/workers.html#workertype" },
                "c2f2a81a": { "dfnID": "c2f2a81a", "dfnText": "classList", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-element-classlist" }], "title": "3.2. Use space-separated attributes for short lists of values, separate elements for longer lists" }], "url": "https://dom.spec.whatwg.org/#dom-element-classlist" },
                "c3469cd0": { "dfnID": "c3469cd0", "dfnText": "MouseEvent", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-mouseevent" }, { "id": "ref-for-mouseevent\u2460" }], "title": "6.9. Classes should have constructors when possible" }], "url": "https://w3c.github.io/uievents/#mouseevent" },
                "c3b2d08c": { "dfnID": "c3b2d08c", "dfnText": "task source", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-task-source" }, { "id": "ref-for-task-source\u2460" }, { "id": "ref-for-task-source\u2461" }], "title": "6.17. Prefer existing task sources" }], "url": "https://html.spec.whatwg.org/multipage/webappapis.html#task-source" },
                "c4484b93": { "dfnID": "c4484b93", "dfnText": "true", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-valdef-custom-media-true" }], "title": "4.4. Name CSS properties and values appropriately" }], "url": "https://drafts.csswg.org/mediaqueries-5/#valdef-custom-media-true" },
                "c5891539": { "dfnID": "c5891539", "dfnText": "HTMLImageElement", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-htmlimageelement" }], "title": "Use casing rules consistent with existing APIs" }], "url": "https://html.spec.whatwg.org/multipage/embedded-content.html#htmlimageelement" },
                "c6d19e56": { "dfnID": "c6d19e56", "dfnText": "event loop", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-event-loop" }, { "id": "ref-for-event-loop\u2460" }], "title": "6.17. Prefer existing task sources" }], "url": "https://html.spec.whatwg.org/multipage/webappapis.html#event-loop" },
                "c7af4825": { "dfnID": "c7af4825", "dfnText": "getElementById(elementId)", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-nonelementparentnode-getelementbyid" }], "title": "Use casing rules consistent with existing APIs" }], "url": "https://dom.spec.whatwg.org/#dom-nonelementparentnode-getelementbyid" },
                "ca0c892d": { "dfnID": "ca0c892d", "dfnText": "href (for a)", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-attr-hyperlink-href" }], "title": "3.6. Name URL-containing attributes based on their primary purpose" }, { "refs": [{ "id": "ref-for-attr-hyperlink-href\u2460" }], "title": "8.2. Represent strings appropriately" }], "url": "https://html.spec.whatwg.org/multipage/links.html#attr-hyperlink-href" },
                "cbdd0aff": { "dfnID": "cbdd0aff", "dfnText": "id", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-credential-id" }], "title": "Use casing rules consistent with existing APIs" }], "url": "https://w3c.github.io/webappsec-credential-management/#dom-credential-id" },
                "cc212fd8": { "dfnID": "cc212fd8", "dfnText": "setlike", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dfn-setlike" }], "title": "Static objects" }], "url": "https://webidl.spec.whatwg.org/#dfn-setlike" },
                "cca3cdb2": { "dfnID": "cca3cdb2", "dfnText": "AbortSignal", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-abortsignal" }], "title": "6.12. Cancel asynchronous APIs/operations using AbortSignal" }, { "refs": [{ "id": "ref-for-abortsignal\u2460" }, { "id": "ref-for-abortsignal\u2461" }, { "id": "ref-for-abortsignal\u2462" }], "title": "7.7. Guard against potential recursion" }, { "refs": [{ "id": "ref-for-abortsignal\u2463" }, { "id": "ref-for-abortsignal\u2464" }], "title": "10.3. Only purely computational features should be exposed everywhere" }], "url": "https://dom.spec.whatwg.org/#abortsignal" },
                "d06b2b8c": { "dfnID": "d06b2b8c", "dfnText": "XMLHttpRequest", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-xmlhttprequest" }], "title": "6.6. Make method arguments optional if possible" }, { "refs": [{ "id": "ref-for-xmlhttprequest\u2460" }], "title": "6.13. Use strings for constants and enums" }, { "refs": [{ "id": "ref-for-xmlhttprequest\u2461" }], "title": "Use casing rules consistent with existing APIs" }], "url": "https://xhr.spec.whatwg.org/#xmlhttprequest" },
                "d0eba3fd": { "dfnID": "d0eba3fd", "dfnText": "partial interface", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dfn-partial-interface" }], "title": "11.4.1. If you need to monkey patch" }], "url": "https://webidl.spec.whatwg.org/#dfn-partial-interface" },
                "d387f951": { "dfnID": "d387f951", "dfnText": "inputType", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-inputevent-inputtype" }], "title": "7.8. Put state on target objects rather than Events" }], "url": "https://w3c.github.io/uievents/#dom-inputevent-inputtype" },
                "d38f9598": { "dfnID": "d38f9598", "dfnText": "getBoundingClientRect()", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-element-getboundingclientrect" }], "title": "6.2. Attributes should behave like data properties" }], "url": "https://drafts.csswg.org/cssom-view-1/#dom-element-getboundingclientrect" },
                "d4127354": { "dfnID": "d4127354", "dfnText": "innerHTML", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-element-innerhtml" }], "title": "Use casing rules consistent with existing APIs" }], "url": "https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-element-innerhtml" },
                "d4b3b8bc": { "dfnID": "d4b3b8bc", "dfnText": "cite", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-attr-q-cite" }], "title": "3.6. Name URL-containing attributes based on their primary purpose" }], "url": "https://html.spec.whatwg.org/multipage/text-level-semantics.html#attr-q-cite" },
                "d62af025": { "dfnID": "d62af025", "dfnText": "now()", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-performance-now" }], "title": "5.2. Preserve run-to-completion semantics" }], "url": "https://w3c.github.io/hr-time/#dom-performance-now" },
                "d6aab74b": { "dfnID": "d6aab74b", "dfnText": "pointerId", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-pointerevent-pointerid" }], "title": "Use casing rules consistent with existing APIs" }], "url": "https://w3c.github.io/pointerevents/#dom-pointerevent-pointerid" },
                "d7d5b038": { "dfnID": "d7d5b038", "dfnText": "observable array type", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dfn-observable-array-type" }], "title": "6.6. Make method arguments optional if possible" }], "url": "https://webidl.spec.whatwg.org/#dfn-observable-array-type" },
                "d7d642a2": { "dfnID": "d7d642a2", "dfnText": "input", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-the-input-element" }], "title": "2.15. Build complex types by composing simpler types" }, { "refs": [{ "id": "ref-for-the-input-element\u2460" }, { "id": "ref-for-the-input-element\u2461" }], "title": "3.1. Re-use HTML attribute names (only) for similar functionality" }, { "refs": [{ "id": "ref-for-the-input-element\u2462" }], "title": "3.2. Use space-separated attributes for short lists of values, separate elements for longer lists" }, { "refs": [{ "id": "ref-for-the-input-element\u2463" }, { "id": "ref-for-the-input-element\u2464" }], "title": "3.5. Keep attributes in sync" }, { "refs": [{ "id": "ref-for-the-input-element\u2465" }, { "id": "ref-for-the-input-element\u2466" }], "title": "3.7. Give each HTML element a single purpose" }], "url": "https://html.spec.whatwg.org/multipage/input.html#the-input-element" },
                "d94094fa": { "dfnID": "d94094fa", "dfnText": "PointerEvent", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-pointerevent" }], "title": "2.15. Build complex types by composing simpler types" }], "url": "https://w3c.github.io/pointerevents/#dom-pointerevent" },
                "d977a5dd": { "dfnID": "d977a5dd", "dfnText": "offsetTop", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-htmlelement-offsettop" }], "title": "6.2. Attributes should behave like data properties" }], "url": "https://drafts.csswg.org/cssom-view-1/#dom-htmlelement-offsettop" },
                "da34f333": { "dfnID": "da34f333", "dfnText": "isMap", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-img-ismap" }], "title": "Use casing rules consistent with existing APIs" }], "url": "https://html.spec.whatwg.org/multipage/embedded-content.html#dom-img-ismap" },
                "dc0eaa56": { "dfnID": "dc0eaa56", "dfnText": "scrollTop", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-element-scrolltop" }], "title": "5.2. Preserve run-to-completion semantics" }], "url": "https://drafts.csswg.org/cssom-view-1/#dom-element-scrolltop" },
                "dc4acd27": { "dfnID": "dc4acd27", "dfnText": "json()", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-body-json" }], "title": "12.1. Use common words" }], "url": "https://fetch.spec.whatwg.org/#dom-body-json" },
                "dc6ebe88": { "dfnID": "dc6ebe88", "dfnText": "list", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-attr-input-list" }], "title": "3.2. Use space-separated attributes for short lists of values, separate elements for longer lists" }], "url": "https://html.spec.whatwg.org/multipage/input.html#attr-input-list" },
                "dca2de17": { "dfnID": "dca2de17", "dfnText": "DOMException", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-idl-DOMException" }], "title": "8.5. Use Error or DOMException for errors" }], "url": "https://webidl.spec.whatwg.org/#idl-DOMException" },
                "dcffbccd": { "dfnID": "dcffbccd", "dfnText": "URL", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-url" }], "title": "8.2. Represent strings appropriately" }], "url": "https://url.spec.whatwg.org/#concept-url" },
                "ddc587b1": { "dfnID": "ddc587b1", "dfnText": "ASCII code point", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-ascii-code-point" }], "title": "12.2. Use ASCII names" }], "url": "https://infra.spec.whatwg.org/#ascii-code-point" },
                "e10e7eb7": { "dfnID": "e10e7eb7", "dfnText": "DOM manipulation task source", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-manipulation-task-source" }], "title": "6.17. Prefer existing task sources" }], "url": "https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source" },
                "e270bd2a": { "dfnID": "e270bd2a", "dfnText": "task", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-task" }], "title": "6.17. Prefer existing task sources" }], "url": "https://html.spec.whatwg.org/multipage/webappapis.html#concept-task" },
                "e356ee85": { "dfnID": "e356ee85", "dfnText": "class", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-classes" }], "title": "3.2. Use space-separated attributes for short lists of values, separate elements for longer lists" }], "url": "https://html.spec.whatwg.org/multipage/dom.html#classes" },
                "e4ee9a64": { "dfnID": "e4ee9a64", "dfnText": "HTMLHRElement", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-htmlhrelement" }], "title": "Use casing rules consistent with existing APIs" }], "url": "https://html.spec.whatwg.org/multipage/grouping-content.html#htmlhrelement" },
                "e5882acf": { "dfnID": "e5882acf", "dfnText": "source", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-the-source-element" }], "title": "3.2. Use space-separated attributes for short lists of values, separate elements for longer lists" }, { "refs": [{ "id": "ref-for-the-source-element\u2460" }, { "id": "ref-for-the-source-element\u2461" }], "title": "3.7. Give each HTML element a single purpose" }], "url": "https://html.spec.whatwg.org/multipage/embedded-content.html#the-source-element" },
                "e6b9f496": { "dfnID": "e6b9f496", "dfnText": "canplaythrough", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-event-media-canplaythrough" }], "title": "Use casing rules consistent with existing APIs" }], "url": "https://html.spec.whatwg.org/multipage/media.html#event-media-canplaythrough" },
                "e81f86c3": { "dfnID": "e81f86c3", "dfnText": "bgColor", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-document-bgcolor" }], "title": "Use casing rules consistent with existing APIs" }], "url": "https://html.spec.whatwg.org/multipage/obsolete.html#dom-document-bgcolor" },
                "e8478f36": { "dfnID": "e8478f36", "dfnText": "target", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-event-target" }, { "id": "ref-for-dom-event-target\u2460" }, { "id": "ref-for-dom-event-target\u2461" }], "title": "7.8. Put state on target objects rather than Events" }], "url": "https://dom.spec.whatwg.org/#dom-event-target" },
                "ea2e2ea4": { "dfnID": "ea2e2ea4", "dfnText": "timeRemaining()", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-idledeadline-timeremaining" }], "title": "5.2. Preserve run-to-completion semantics" }], "url": "https://w3c.github.io/requestidlecallback/#dom-idledeadline-timeremaining" },
                "eb9a1873": { "dfnID": "eb9a1873", "dfnText": "rel", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-attr-link-rel" }], "title": "3.6. Name URL-containing attributes based on their primary purpose" }], "url": "https://html.spec.whatwg.org/multipage/semantics.html#attr-link-rel" },
                "ecf251b4": { "dfnID": "ecf251b4", "dfnText": "scalar value", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-scalar-value" }], "title": "8.2. Represent strings appropriately" }], "url": "https://infra.spec.whatwg.org/#scalar-value" },
                "f0811ff8": { "dfnID": "f0811ff8", "dfnText": "img", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-the-img-element" }], "title": "3.2. Use space-separated attributes for short lists of values, separate elements for longer lists" }, { "refs": [{ "id": "ref-for-the-img-element\u2460" }], "title": "3.6. Name URL-containing attributes based on their primary purpose" }, { "refs": [{ "id": "ref-for-the-img-element\u2461" }], "title": "Use casing rules consistent with existing APIs" }], "url": "https://html.spec.whatwg.org/multipage/embedded-content.html#the-img-element" },
                "f0951476": { "dfnID": "f0951476", "dfnText": "EventHandler", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-eventhandler" }], "title": "7.5. Always add event handler attributes" }], "url": "https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" },
                "f14b47b8": { "dfnID": "f14b47b8", "dfnText": "unsigned long long", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-idl-unsigned-long-long" }], "title": "8.1. Use numeric types appropriately" }], "url": "https://webidl.spec.whatwg.org/#idl-unsigned-long-long" },
                "f449d4f8": { "dfnID": "f449d4f8", "dfnText": "open(url, target, features)", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-open" }], "title": "6.9. Classes should have constructors when possible" }], "url": "https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-open" },
                "f4813f78": { "dfnID": "f4813f78", "dfnText": "byte", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-idl-byte" }], "title": "8.2. Represent strings appropriately" }], "url": "https://webidl.spec.whatwg.org/#idl-byte" },
                "f679a0bc": { "dfnID": "f679a0bc", "dfnText": "PaymentRequest", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-paymentrequest" }], "title": "7.7. Guard against potential recursion" }], "url": "https://w3c.github.io/payment-request/#dom-paymentrequest" },
                "f6c2cd25": { "dfnID": "f6c2cd25", "dfnText": "BigInt", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-sec-bigint-objects" }, { "id": "ref-for-sec-bigint-objects\u2460" }, { "id": "ref-for-sec-bigint-objects\u2461" }], "title": "8.1. Use numeric types appropriately" }], "url": "https://tc39.es/ecma262/multipage/numbers-and-dates.html#sec-bigint-objects" },
                "f831c141": { "dfnID": "f831c141", "dfnText": "background-image", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-background-image" }, { "id": "ref-for-propdef-background-image\u2460" }], "title": "4.2. Make appropriate choices for whether CSS properties are inherited" }], "url": "https://drafts.csswg.org/css-backgrounds-3/#propdef-background-image" },
                "f89c7d0d": { "dfnID": "f89c7d0d", "dfnText": "Clamp", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-Clamp" }], "title": "8.1. Use numeric types appropriately" }], "url": "https://webidl.spec.whatwg.org/#Clamp" },
                "f8b3bc81": { "dfnID": "f8b3bc81", "dfnText": "false", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-valdef-custom-media-false" }], "title": "4.4. Name CSS properties and values appropriately" }], "url": "https://drafts.csswg.org/mediaqueries-5/#valdef-custom-media-false" },
                "f8de33a3": { "dfnID": "f8de33a3", "dfnText": "long", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-idl-long" }], "title": "8.1. Use numeric types appropriately" }], "url": "https://webidl.spec.whatwg.org/#idl-long" },
                "fb030e6c": { "dfnID": "fb030e6c", "dfnText": "<length>", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-length-value" }], "title": "4.3. Choose the computed value type based on how the property should inherit" }], "url": "https://drafts.csswg.org/css-values-4/#length-value" },
                "fc736137": { "dfnID": "fc736137", "dfnText": "textarea", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-the-textarea-element" }], "title": "3.7. Give each HTML element a single purpose" }], "url": "https://html.spec.whatwg.org/multipage/form-elements.html#the-textarea-element" },
                "fd7a9317": { "dfnID": "fd7a9317", "dfnText": "value (for input)", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-attr-input-value" }], "title": "3.5. Keep attributes in sync" }], "url": "https://html.spec.whatwg.org/multipage/input.html#attr-input-value" },
                "fdf6efd5": { "dfnID": "fdf6efd5", "dfnText": "font-size", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-propdef-font-size" }, { "id": "ref-for-propdef-font-size\u2460" }, { "id": "ref-for-propdef-font-size\u2461" }], "title": "4.2. Make appropriate choices for whether CSS properties are inherited" }, { "refs": [{ "id": "ref-for-propdef-font-size\u2462" }, { "id": "ref-for-propdef-font-size\u2463" }, { "id": "ref-for-propdef-font-size\u2464" }, { "id": "ref-for-propdef-font-size\u2465" }, { "id": "ref-for-propdef-font-size\u2466" }], "title": "4.3. Choose the computed value type based on how the property should inherit" }], "url": "https://drafts.csswg.org/css-fonts-4/#propdef-font-size" },
                "fefe0433": { "dfnID": "fefe0433", "dfnText": "preventDefault()", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-event-preventdefault" }], "title": "When to use callback functions" }], "url": "https://dom.spec.whatwg.org/#dom-event-preventdefault" },
                "ff87eaf9": { "dfnID": "ff87eaf9", "dfnText": "remove", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-abortsignal-remove" }, { "id": "ref-for-abortsignal-remove\u2460" }], "title": "7.7. Guard against potential recursion" }], "url": "https://dom.spec.whatwg.org/#abortsignal-remove" },
                "live-object": { "dfnID": "live-object", "dfnText": "live object", "external": false, "refSections": [], "url": "#live-object" },
                "monkey-patch": { "dfnID": "monkey-patch", "dfnText": "monkey patch", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-monkey-patch" }], "title": "10.5. Extend existing manifest files rather than creating new ones" }, { "refs": [{ "id": "ref-for-monkey-patch\u2460" }], "title": "11.4.1. If you need to monkey patch" }], "url": "#monkey-patch" },
                "propdef-font-size-adjust": { "dfnID": "propdef-font-size-adjust", "dfnText": "font-size-adjust", "external": false, "refSections": [], "url": "#propdef-font-size-adjust" },
                "static-object": { "dfnID": "static-object", "dfnText": "static object", "external": false, "refSections": [], "url": "#static-object" },
            };

            document.addEventListener("DOMContentLoaded", () => {
                genAllDfnPanels();

                document.body.addEventListener("click", (e) => {
                    // If not handled already, just hide all dfn panels.
                    hideAllDfnPanels();
                });
            });

            window.addEventListener("resize", () => {
                // Pin any visible dfn panel
                queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(el => positionDfnPanel(el));
            });

            function genAllDfnPanels() {
                for (const panelData of Object.values(dfnPanelData)) {
                    const dfnID = panelData.dfnID;
                    const dfn = document.getElementById(dfnID);
                    if (!dfn) {
                        console.log(`Can't find dfn#${dfnID}.`, panelData);
                        continue;
                    }
                    dfn.panelData = panelData;
                    insertDfnPopupAction(dfn);
                }
            }

            function genDfnPanel(dfn, { dfnID, url, dfnText, refSections, external }) {
                const dfnPanel = mk.aside({
                    class: "dfn-panel on",
                    id: `infopanel-for-${dfnID}`,
                    "data-for": dfnID,
                    "aria-labelled-by": `infopaneltitle-for-${dfnID}`,
                },
                    mk.span({ id: `infopaneltitle-for-${dfnID}`, style: "display:none" },
                        `Info about the '${dfnText}' ${external ? "external" : ""} reference.`),
                    mk.a({ href: url, class: "dfn-link" }, url),
                    refSections.length == 0 ? [] :
                        mk.b({}, "Referenced in:"),
                    mk.ul({},
                        ...refSections.map(section =>
                            mk.li({},
                                ...section.refs.map((ref, refI) =>
                                    [
                                        mk.a({ href: `#${ref.id}` },
                                            (refI == 0) ? section.title : `(${refI + 1})`
                                        ),
                                        " ",
                                    ]
                                ),
                            ),
                        ),
                    ),
                    genLinkingSyntaxes(dfn),
                );

                dfnPanel.addEventListener('click', (event) => {
                    if (event.target.nodeName == 'A') {
                        scrollToTargetAndHighlight(event);
                        pinDfnPanel(dfnPanel);
                    }
                    event.stopPropagation();
                    refocusOnTarget(event);
                });
                dfnPanel.addEventListener('keydown', (event) => {
                    if (event.keyCode == 27) { // Escape key
                        hideDfnPanel({ dfnPanel });
                        event.stopPropagation();
                        event.preventDefault();
                    }
                });

                dfnPanel.dfn = dfn;
                dfn.dfnPanel = dfnPanel;
                return dfnPanel;
            }



            function hideAllDfnPanels() {
                // Delete the currently-active dfn panel.
                queryAll(".dfn-panel").forEach(dfnPanel => hideDfnPanel({ dfnPanel }));
            }

            function showDfnPanel(dfn) {
                hideAllDfnPanels(); // Only display one at a time.

                dfn.setAttribute("aria-expanded", "true");

                const dfnPanel = genDfnPanel(dfn, dfn.panelData);

                // Give the dfn a unique tabindex, and then
                // give all the tabbable panel bits successive indexes.
                let tabIndex = 100;
                dfn.tabIndex = tabIndex++;
                const tabbable = dfnPanel.querySelectorAll(":is(a, button)");
                for (const el of tabbable) {
                    el.tabIndex = tabIndex++;
                }

                append(document.body, dfnPanel);
                positionDfnPanel(dfnPanel);
            }

            function positionDfnPanel(dfnPanel) {
                const dfn = dfnPanel.dfn;
                const dfnPos = getBounds(dfn);
                dfnPanel.style.top = dfnPos.bottom + "px";
                dfnPanel.style.left = dfnPos.left + "px";

                const panelPos = dfnPanel.getBoundingClientRect();
                const panelMargin = 8;
                const maxRight = document.body.parentNode.clientWidth - panelMargin;
                if (panelPos.right > maxRight) {
                    const overflowAmount = panelPos.right - maxRight;
                    const newLeft = Math.max(panelMargin, dfnPos.left - overflowAmount);
                    dfnPanel.style.left = newLeft + "px";
                }
            }

            function pinDfnPanel(dfnPanel) {
                // Switch it to "activated" state, which pins it.
                dfnPanel.classList.add("activated");
                dfnPanel.style.position = "fixed";
                dfnPanel.style.left = null;
                dfnPanel.style.top = null;
            }

            function hideDfnPanel({ dfn, dfnPanel }) {
                if (!dfnPanel) dfnPanel = dfn.dfnPanel;
                if (!dfn) dfn = dfnPanel.dfn;
                dfn.dfnPanel = undefined;
                dfnPanel.dfn = undefined;
                dfn.setAttribute("aria-expanded", "false");
                dfn.tabIndex = undefined;
                dfnPanel.remove()
            }

            function toggleDfnPanel(dfn) {
                if (dfn.dfnPanel) {
                    hideDfnPanel(dfn);
                } else {
                    showDfnPanel(dfn);
                }
            }

            function insertDfnPopupAction(dfn) {
                dfn.setAttribute('role', 'button');
                dfn.setAttribute('aria-expanded', 'false')
                dfn.tabIndex = 0;
                dfn.classList.add('has-dfn-panel');
                dfn.addEventListener('click', (event) => {
                    toggleDfnPanel(dfn);
                    event.stopPropagation();
                });
                dfn.addEventListener('keypress', (event) => {
                    const kc = event.keyCode;
                    // 32->Space, 13->Enter
                    if (kc == 32 || kc == 13) {
                        toggleDfnPanel(dfn);
                        event.stopPropagation();
                        event.preventDefault();
                    }
                });
            }

            function refocusOnTarget(event) {
                const target = event.target;
                setTimeout(() => {
                    // Refocus on the event.target element.
                    // This is needed after browser scrolls to the destination.
                    target.focus();
                });
            }

            // TODO: shared util
            // Returns the root-level absolute position {left and top} of element.
            function getBounds(el, relativeTo = document.body) {
                const relativeRect = relativeTo.getBoundingClientRect();
                const elRect = el.getBoundingClientRect();
                const top = elRect.top - relativeRect.top;
                const left = elRect.left - relativeRect.left;
                return {
                    top,
                    left,
                    bottom: top + elRect.height,
                    right: left + elRect.width,
                }
            }

            function scrollToTargetAndHighlight(event) {
                let hash = event.target.hash;
                if (hash) {
                    hash = decodeURIComponent(hash.substring(1));
                    const dest = document.getElementById(hash);
                    if (dest) {
                        dest.classList.add('highlighted');
                        setTimeout(() => dest.classList.remove('highlighted'), 1000);
                    }
                }
            }

            // Functions, divided by link type, that wrap an autolink's
            // contents with the appropriate outer syntax.
            // Alternately, a string naming another type they format
            // the same as.
            function needsFor(type) {
                switch (type) {
                    case "descriptor":
                    case "value":
                    case "element-attr":
                    case "attr-value":
                    case "element-state":
                    case "method":
                    case "constructor":
                    case "argument":
                    case "attribute":
                    case "const":
                    case "dict-member":
                    case "event":
                    case "enum-value":
                    case "stringifier":
                    case "serializer":
                    case "iterator":
                    case "maplike":
                    case "setlike":
                    case "state":
                    case "mode":
                    case "context":
                    case "facet": return true;

                    default: return false;
                }
            }
            function refusesFor(type) {
                switch (type) {
                    case "property":
                    case "element":
                    case "interface":
                    case "namespace":
                    case "callback":
                    case "dictionary":
                    case "enum":
                    case "exception":
                    case "typedef":
                    case "http-header":
                    case "permission": return true;

                    default: return false;
                }
            }
            function linkFormatterFromType(type) {
                switch (type) {
                    case 'scheme':
                    case 'permission':
                    case 'dfn': return (text) => `[=${text}=]`;

                    case 'abstract-op': return (text) => `[\$${text}\$]`;

                    case 'function':
                    case 'at-rule':
                    case 'selector':
                    case 'value': return (text) => `''${text}''`;

                    case 'http-header': return (text) => `[:${text}:]`;

                    case 'interface':
                    case 'constructor':
                    case 'method':
                    case 'argument':
                    case 'attribute':
                    case 'callback':
                    case 'dictionary':
                    case 'dict-member':
                    case 'enum':
                    case 'enum-value':
                    case 'exception':
                    case 'const':
                    case 'typedef':
                    case 'stringifier':
                    case 'serializer':
                    case 'iterator':
                    case 'maplike':
                    case 'setlike':
                    case 'extended-attribute':
                    case 'event':
                    case 'idl': return (text) => `{{${text}}}`;

                    case 'element-state':
                    case 'element-attr':
                    case 'attr-value':
                    case 'element': return (element) => `<{${element}}>`;

                    case 'grammar': return (text) => `${text} (within a <pre class=prod>)`;

                    case 'type': return (text) => `<<${text}>>`;

                    case 'descriptor':
                    case 'property': return (text) => `'${text}'`;

                    default: return;
                };
            };

            function genLinkingSyntaxes(dfn) {
                if (dfn.tagName != "DFN") return;

                const type = dfn.getAttribute('data-dfn-type');
                if (!type) {
                    console.log(`<dfn> doesn't have a data-dfn-type:`, dfn);
                    return [];
                }

                // Return a function that wraps link text based on the type
                const linkFormatter = linkFormatterFromType(type);
                if (!linkFormatter) {
                    console.log(`<dfn> has an unknown data-dfn-type:`, dfn);
                    return [];
                }

                let ltAlts;
                if (dfn.hasAttribute('data-lt')) {
                    ltAlts = dfn.getAttribute('data-lt')
                        .split("|")
                        .map(x => x.trim());
                } else {
                    ltAlts = [dfn.textContent.trim()];
                }
                if (type == "type") {
                    // lt of "<foo>", but "foo" is the interior;
                    // <<foo/bar>> is how you write it with a for,
                    // not <foo/<bar>> or whatever.
                    for (var i = 0; i < ltAlts.length; i++) {
                        const lt = ltAlts[i];
                        const match = /<(.*)>/.exec(lt);
                        if (match) { ltAlts[i] = match[1]; }
                    }
                }

                let forAlts;
                if (dfn.hasAttribute('data-dfn-for')) {
                    forAlts = dfn.getAttribute('data-dfn-for')
                        .split(",")
                        .map(x => x.trim());
                } else {
                    forAlts = [''];
                }

                let linkingSyntaxes = [];
                if (!needsFor(type)) {
                    for (const lt of ltAlts) {
                        linkingSyntaxes.push(linkFormatter(lt));
                    }
                }
                if (!refusesFor(type)) {
                    for (const f of forAlts) {
                        linkingSyntaxes.push(linkFormatter(`${f}/${ltAlts[0]}`))
                    }
                }
                return [
                    mk.b({}, 'Possible linking syntaxes:'),
                    mk.ul({},
                        ...linkingSyntaxes.map(link => {
                            const copyLink = async () =>
                                await navigator.clipboard.writeText(link);
                            return mk.li({},
                                mk.div({ class: 'link-item' },
                                    mk.button({
                                        class: 'copy-icon', title: 'Copy',
                                        type: 'button',
                                        _onclick: copyLink,
                                        tabindex: 0,
                                    }, mk.span({ class: 'icon' })),
                                    mk.span({}, link)
                                )
                            );
                        })
                    )
                ];
            }
        }
    </script>
    <script>/* Boilerplate: script-link-titles */
        "use strict";
        {
            let linkTitleData = {
                "https://drafts.csswg.org/css-values-4/#length-value": "Expands to: advance measure | cap | ch | cm | dvb | dvh | dvi | dvmax | dvmin | dvw | em | ex | ic | in | lh | lvb | lvh | lvi | lvmax | lvmin | lvw | mm | pc | pt | px | rcap | rch | rem | rex | ric | rlh | svb | svh | svi | svmax | svmin | svw | vb | vh | vi | vmax | vmin | vw",
            };

            function setTypeTitles() {
                for (let el of document.querySelectorAll("a[href]")) {
                    if (el.href in linkTitleData && !el.hasAttribute("title")) {
                        el.setAttribute("title", linkTitleData[el.href]);
                    }
                }
            }

            document.addEventListener("DOMContentLoaded", setTypeTitles);
        }
    </script>
    <script>/* Boilerplate: script-ref-hints */
        "use strict";
        {
            let refsData = {
                "#monkey-patch": { "displayText": "monkey patch", "export": true, "for_": [], "level": "", "normative": true, "shortname": "design-principles", "spec": "design-principles", "status": "local", "text": "monkey patch", "type": "dfn", "url": "#monkey-patch" },
                "#propdef-font-size-adjust": { "displayText": "font-size-adjust", "export": true, "for_": [], "level": "", "normative": true, "shortname": "design-principles", "spec": "design-principles", "status": "local", "text": "font-size-adjust", "type": "property", "url": "#propdef-font-size-adjust" },
                "https://console.spec.whatwg.org/#namespacedef-console": { "displayText": "console", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "console", "spec": "console", "status": "current", "text": "console", "type": "namespace", "url": "https://console.spec.whatwg.org/#namespacedef-console" },
                "https://dom.spec.whatwg.org/#abortcontroller": { "displayText": "AbortController", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "AbortController", "type": "interface", "url": "https://dom.spec.whatwg.org/#abortcontroller" },
                "https://dom.spec.whatwg.org/#abortcontroller-signal-abort": { "displayText": "signal abort", "export": true, "for_": ["AbortController"], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "signal abort", "type": "dfn", "url": "https://dom.spec.whatwg.org/#abortcontroller-signal-abort" },
                "https://dom.spec.whatwg.org/#abortsignal": { "displayText": "AbortSignal", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "AbortSignal", "type": "interface", "url": "https://dom.spec.whatwg.org/#abortsignal" },
                "https://dom.spec.whatwg.org/#abortsignal-aborted": { "displayText": "aborted", "export": true, "for_": ["AbortSignal"], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "aborted", "type": "dfn", "url": "https://dom.spec.whatwg.org/#abortsignal-aborted" },
                "https://dom.spec.whatwg.org/#abortsignal-add": { "displayText": "add", "export": true, "for_": ["AbortSignal"], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "add", "type": "dfn", "url": "https://dom.spec.whatwg.org/#abortsignal-add" },
                "https://dom.spec.whatwg.org/#abortsignal-remove": { "displayText": "remove", "export": true, "for_": ["AbortSignal"], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "remove", "type": "dfn", "url": "https://dom.spec.whatwg.org/#abortsignal-remove" },
                "https://dom.spec.whatwg.org/#concept-event-fire": { "displayText": "fire an event", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "fire an event", "type": "dfn", "url": "https://dom.spec.whatwg.org/#concept-event-fire" },
                "https://dom.spec.whatwg.org/#dom-abortcontroller-abort": { "displayText": "abort()", "export": true, "for_": ["AbortController"], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "abort()", "type": "method", "url": "https://dom.spec.whatwg.org/#dom-abortcontroller-abort" },
                "https://dom.spec.whatwg.org/#dom-abortsignal-timeout": { "displayText": "timeout(milliseconds)", "export": true, "for_": ["AbortSignal"], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "timeout(milliseconds)", "type": "method", "url": "https://dom.spec.whatwg.org/#dom-abortsignal-timeout" },
                "https://dom.spec.whatwg.org/#dom-addeventlisteneroptions-once": { "displayText": "once", "export": true, "for_": ["AddEventListenerOptions"], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "once", "type": "dict-member", "url": "https://dom.spec.whatwg.org/#dom-addeventlisteneroptions-once" },
                "https://dom.spec.whatwg.org/#dom-childnode-remove": { "displayText": "remove()", "export": true, "for_": ["ChildNode"], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "remove()", "type": "method", "url": "https://dom.spec.whatwg.org/#dom-childnode-remove" },
                "https://dom.spec.whatwg.org/#dom-document-compatmode": { "displayText": "compatMode", "export": true, "for_": ["Document"], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "compatMode", "type": "attribute", "url": "https://dom.spec.whatwg.org/#dom-document-compatmode" },
                "https://dom.spec.whatwg.org/#dom-document-createattribute": { "displayText": "createAttribute(localName)", "export": true, "for_": ["Document"], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "createAttribute(localName)", "type": "method", "url": "https://dom.spec.whatwg.org/#dom-document-createattribute" },
                "https://dom.spec.whatwg.org/#dom-document-createelement": { "displayText": "createElement(localName)", "export": true, "for_": ["Document"], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "createElement(localName)", "type": "method", "url": "https://dom.spec.whatwg.org/#dom-document-createelement" },
                "https://dom.spec.whatwg.org/#dom-document-getelementsbytagname": { "displayText": "getElementsByTagName(qualifiedName)", "export": true, "for_": ["Document"], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "getElementsByTagName(qualifiedName)", "type": "method", "url": "https://dom.spec.whatwg.org/#dom-document-getelementsbytagname" },
                "https://dom.spec.whatwg.org/#dom-element-classlist": { "displayText": "classList", "export": true, "for_": ["Element"], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "classList", "type": "attribute", "url": "https://dom.spec.whatwg.org/#dom-element-classlist" },
                "https://dom.spec.whatwg.org/#dom-event-bubbles": { "displayText": "bubbles", "export": true, "for_": ["Event"], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "bubbles", "type": "attribute", "url": "https://dom.spec.whatwg.org/#dom-event-bubbles" },
                "https://dom.spec.whatwg.org/#dom-event-preventdefault": { "displayText": "preventDefault()", "export": true, "for_": ["Event"], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "preventDefault()", "type": "method", "url": "https://dom.spec.whatwg.org/#dom-event-preventdefault" },
                "https://dom.spec.whatwg.org/#dom-event-target": { "displayText": "target", "export": true, "for_": ["Event"], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "target", "type": "attribute", "url": "https://dom.spec.whatwg.org/#dom-event-target" },
                "https://dom.spec.whatwg.org/#dom-eventtarget-addeventlistener": { "displayText": "addEventListener(type, callback)", "export": true, "for_": ["EventTarget"], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "addEventListener(type, callback)", "type": "method", "url": "https://dom.spec.whatwg.org/#dom-eventtarget-addeventlistener" },
                "https://dom.spec.whatwg.org/#dom-nonelementparentnode-getelementbyid": { "displayText": "getElementById(elementId)", "export": true, "for_": ["NonElementParentNode"], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "getElementById(elementId)", "type": "method", "url": "https://dom.spec.whatwg.org/#dom-nonelementparentnode-getelementbyid" },
                "https://dom.spec.whatwg.org/#dom-parentnode-queryselectorall": { "displayText": "querySelectorAll(selectors)", "export": true, "for_": ["ParentNode"], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "querySelectorAll(selectors)", "type": "method", "url": "https://dom.spec.whatwg.org/#dom-parentnode-queryselectorall" },
                "https://dom.spec.whatwg.org/#domtokenlist": { "displayText": "DOMTokenList", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "DOMTokenList", "type": "interface", "url": "https://dom.spec.whatwg.org/#domtokenlist" },
                "https://dom.spec.whatwg.org/#element": { "displayText": "Element", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "Element", "type": "interface", "url": "https://dom.spec.whatwg.org/#element" },
                "https://dom.spec.whatwg.org/#event": { "displayText": "Event", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "Event", "type": "interface", "url": "https://dom.spec.whatwg.org/#event" },
                "https://dom.spec.whatwg.org/#eventtarget": { "displayText": "EventTarget", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "EventTarget", "type": "interface", "url": "https://dom.spec.whatwg.org/#eventtarget" },
                "https://dom.spec.whatwg.org/#htmlcollection": { "displayText": "HTMLCollection", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "HTMLCollection", "type": "interface", "url": "https://dom.spec.whatwg.org/#htmlcollection" },
                "https://dom.spec.whatwg.org/#mutationobserver": { "displayText": "MutationObserver", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "MutationObserver", "type": "interface", "url": "https://dom.spec.whatwg.org/#mutationobserver" },
                "https://dom.spec.whatwg.org/#namednodemap": { "displayText": "NamedNodeMap", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "NamedNodeMap", "type": "interface", "url": "https://dom.spec.whatwg.org/#namednodemap" },
                "https://dom.spec.whatwg.org/#node": { "displayText": "Node", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "Node", "type": "interface", "url": "https://dom.spec.whatwg.org/#node" },
                "https://dom.spec.whatwg.org/#nonelementparentnode": { "displayText": "NonElementParentNode", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "NonElementParentNode", "type": "interface", "url": "https://dom.spec.whatwg.org/#nonelementparentnode" },
                "https://drafts.csswg.org/css-backgrounds-3/#propdef-background-image": { "displayText": "background-image", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-backgrounds", "spec": "css-backgrounds-3", "status": "current", "text": "background-image", "type": "property", "url": "https://drafts.csswg.org/css-backgrounds-3/#propdef-background-image" },
                "https://drafts.csswg.org/css-cascade-5/#actual-value": { "displayText": "actual value", "export": true, "for_": [], "level": "5", "normative": true, "shortname": "css-cascade", "spec": "css-cascade-5", "status": "current", "text": "actual value", "type": "dfn", "url": "https://drafts.csswg.org/css-cascade-5/#actual-value" },
                "https://drafts.csswg.org/css-cascade-5/#computed-value": { "displayText": "computed value", "export": true, "for_": [], "level": "5", "normative": true, "shortname": "css-cascade", "spec": "css-cascade-5", "status": "current", "text": "computed value", "type": "dfn", "url": "https://drafts.csswg.org/css-cascade-5/#computed-value" },
                "https://drafts.csswg.org/css-cascade-5/#css-inheritance": { "displayText": "inherit", "export": true, "for_": ["CSS"], "level": "5", "normative": true, "shortname": "css-cascade", "spec": "css-cascade-5", "status": "current", "text": "inherit", "type": "dfn", "url": "https://drafts.csswg.org/css-cascade-5/#css-inheritance" },
                "https://drafts.csswg.org/css-cascade-5/#used-value": { "displayText": "used value", "export": true, "for_": [], "level": "5", "normative": true, "shortname": "css-cascade", "spec": "css-cascade-5", "status": "current", "text": "used value", "type": "dfn", "url": "https://drafts.csswg.org/css-cascade-5/#used-value" },
                "https://drafts.csswg.org/css-conditional-3/#at-ruledef-supports": { "displayText": "@supports", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-conditional", "spec": "css-conditional-3", "status": "current", "text": "@supports", "type": "at-rule", "url": "https://drafts.csswg.org/css-conditional-3/#at-ruledef-supports" },
                "https://drafts.csswg.org/css-fonts-4/#propdef-font-size": { "displayText": "font-size", "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-fonts", "spec": "css-fonts-4", "status": "current", "text": "font-size", "type": "property", "url": "https://drafts.csswg.org/css-fonts-4/#propdef-font-size" },
                "https://drafts.csswg.org/css-fonts-4/#propdef-font-size-adjust": { "displayText": "font-size-adjust", "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-fonts", "spec": "css-fonts-4", "status": "current", "text": "font-size-adjust", "type": "property", "url": "https://drafts.csswg.org/css-fonts-4/#propdef-font-size-adjust" },
                "https://drafts.csswg.org/css-fonts-5/#valdef-font-size-adjust-none": { "displayText": "none", "export": true, "for_": ["font-size-adjust"], "level": "5", "normative": true, "shortname": "css-fonts", "spec": "css-fonts-5", "status": "current", "text": "none", "type": "value", "url": "https://drafts.csswg.org/css-fonts-5/#valdef-font-size-adjust-none" },
                "https://drafts.csswg.org/css-inline-3/#propdef-initial-letter": { "displayText": "initial-letter", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-inline", "spec": "css-inline-3", "status": "current", "text": "initial-letter", "type": "property", "url": "https://drafts.csswg.org/css-inline-3/#propdef-initial-letter" },
                "https://drafts.csswg.org/css-inline-3/#propdef-initial-letter-align": { "displayText": "initial-letter-align", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "css-inline", "spec": "css-inline-3", "status": "current", "text": "initial-letter-align", "type": "property", "url": "https://drafts.csswg.org/css-inline-3/#propdef-initial-letter-align" },
                "https://drafts.csswg.org/css-values-4/#comb-one": { "displayText": "|", "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-values", "spec": "css-values-4", "status": "current", "text": "|", "type": "grammar", "url": "https://drafts.csswg.org/css-values-4/#comb-one" },
                "https://drafts.csswg.org/css-values-4/#length-value": { "displayText": "<length>", "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-values", "spec": "css-values-4", "status": "current", "text": "<length>", "type": "type", "url": "https://drafts.csswg.org/css-values-4/#length-value" },
                "https://drafts.csswg.org/css-values-4/#mult-opt": { "displayText": "?", "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-values", "spec": "css-values-4", "status": "current", "text": "?", "type": "grammar", "url": "https://drafts.csswg.org/css-values-4/#mult-opt" },
                "https://drafts.csswg.org/css-values-4/#number-value": { "displayText": "<number>", "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-values", "spec": "css-values-4", "status": "current", "text": "<number>", "type": "type", "url": "https://drafts.csswg.org/css-values-4/#number-value" },
                "https://drafts.csswg.org/css2/#propdef-line-height": { "displayText": "line-height", "export": true, "for_": [], "level": "2", "normative": true, "shortname": "css", "spec": "css2", "status": "current", "text": "line-height", "type": "property", "url": "https://drafts.csswg.org/css2/#propdef-line-height" },
                "https://drafts.csswg.org/cssom-1/#dom-window-getcomputedstyle": { "displayText": "getComputedStyle(elt)", "export": true, "for_": ["Window"], "level": "1", "normative": true, "shortname": "cssom", "spec": "cssom-1", "status": "current", "text": "getComputedStyle(elt)", "type": "method", "url": "https://drafts.csswg.org/cssom-1/#dom-window-getcomputedstyle" },
                "https://drafts.csswg.org/cssom-1/#resolved-value": { "displayText": "resolved value", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "cssom", "spec": "cssom-1", "status": "current", "text": "resolved value", "type": "dfn", "url": "https://drafts.csswg.org/cssom-1/#resolved-value" },
                "https://drafts.csswg.org/cssom-view-1/#dom-element-getboundingclientrect": { "displayText": "getBoundingClientRect()", "export": true, "for_": ["Element"], "level": "1", "normative": true, "shortname": "cssom-view", "spec": "cssom-view-1", "status": "current", "text": "getBoundingClientRect()", "type": "method", "url": "https://drafts.csswg.org/cssom-view-1/#dom-element-getboundingclientrect" },
                "https://drafts.csswg.org/cssom-view-1/#dom-element-scrolltop": { "displayText": "scrollTop", "export": true, "for_": ["Element"], "level": "1", "normative": true, "shortname": "cssom-view", "spec": "cssom-view-1", "status": "current", "text": "scrollTop", "type": "attribute", "url": "https://drafts.csswg.org/cssom-view-1/#dom-element-scrolltop" },
                "https://drafts.csswg.org/cssom-view-1/#dom-htmlelement-offsettop": { "displayText": "offsetTop", "export": true, "for_": ["HTMLElement"], "level": "1", "normative": true, "shortname": "cssom-view", "spec": "cssom-view-1", "status": "current", "text": "offsetTop", "type": "attribute", "url": "https://drafts.csswg.org/cssom-view-1/#dom-htmlelement-offsettop" },
                "https://drafts.csswg.org/mediaqueries-5/#valdef-custom-media-false": { "displayText": "false", "export": true, "for_": ["@custom-media"], "level": "5", "normative": true, "shortname": "mediaqueries", "spec": "mediaqueries-5", "status": "current", "text": "false", "type": "value", "url": "https://drafts.csswg.org/mediaqueries-5/#valdef-custom-media-false" },
                "https://drafts.csswg.org/mediaqueries-5/#valdef-custom-media-true": { "displayText": "true", "export": true, "for_": ["@custom-media"], "level": "5", "normative": true, "shortname": "mediaqueries", "spec": "mediaqueries-5", "status": "current", "text": "true", "type": "value", "url": "https://drafts.csswg.org/mediaqueries-5/#valdef-custom-media-true" },
                "https://drafts.csswg.org/web-animations-2/#dom-animationtimeline-currenttime": { "displayText": "currentTime", "export": true, "for_": ["AnimationTimeline"], "level": "2", "normative": true, "shortname": "web-animations", "spec": "web-animations-2", "status": "current", "text": "currentTime", "type": "attribute", "url": "https://drafts.csswg.org/web-animations-2/#dom-animationtimeline-currenttime" },
                "https://drafts.fxtf.org/filter-effects-2/#propdef-backdrop-filter": { "displayText": "backdrop-filter", "export": true, "for_": [], "level": "2", "normative": true, "shortname": "filter-effects", "spec": "filter-effects-2", "status": "current", "text": "backdrop-filter", "type": "property", "url": "https://drafts.fxtf.org/filter-effects-2/#propdef-backdrop-filter" },
                "https://encoding.spec.whatwg.org/#textencoder": { "displayText": "TextEncoder", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "encoding", "spec": "encoding", "status": "current", "text": "TextEncoder", "type": "interface", "url": "https://encoding.spec.whatwg.org/#textencoder" },
                "https://fetch.spec.whatwg.org/#body": { "displayText": "Body", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "fetch", "spec": "fetch", "status": "current", "text": "Body", "type": "interface", "url": "https://fetch.spec.whatwg.org/#body" },
                "https://fetch.spec.whatwg.org/#concept-http-fetch": { "displayText": "HTTP fetch", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "fetch", "spec": "fetch", "status": "current", "text": "http fetch", "type": "dfn", "url": "https://fetch.spec.whatwg.org/#concept-http-fetch" },
                "https://fetch.spec.whatwg.org/#dom-body-json": { "displayText": "json()", "export": true, "for_": ["Body"], "level": "1", "normative": true, "shortname": "fetch", "spec": "fetch", "status": "current", "text": "json()", "type": "method", "url": "https://fetch.spec.whatwg.org/#dom-body-json" },
                "https://html.spec.whatwg.org/multipage/common-dom-interfaces.html#reflect": { "displayText": "reflect", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "reflect", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/common-dom-interfaces.html#reflect" },
                "https://html.spec.whatwg.org/multipage/custom-elements.html#custom-element": { "displayText": "custom element", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "custom element", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/custom-elements.html#custom-element" },
                "https://html.spec.whatwg.org/multipage/custom-elements.html#dom-customelementregistry-define": { "displayText": "define(name, constructor, options)", "export": true, "for_": ["CustomElementRegistry"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "define(name, constructor, options)", "type": "method", "url": "https://html.spec.whatwg.org/multipage/custom-elements.html#dom-customelementregistry-define" },
                "https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active": { "displayText": "fully active", "export": true, "for_": ["Document"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "fully active", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active" },
                "https://html.spec.whatwg.org/multipage/dom.html#classes": { "displayText": "class", "export": true, "for_": ["global"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "class", "type": "element-attr", "url": "https://html.spec.whatwg.org/multipage/dom.html#classes" },
                "https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-element-innerhtml": { "displayText": "innerHTML", "export": true, "for_": ["Element"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "innerHTML", "type": "attribute", "url": "https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-element-innerhtml" },
                "https://html.spec.whatwg.org/multipage/embedded-content.html#attr-img-ismap": { "displayText": "ismap", "export": true, "for_": ["img"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "ismap", "type": "element-attr", "url": "https://html.spec.whatwg.org/multipage/embedded-content.html#attr-img-ismap" },
                "https://html.spec.whatwg.org/multipage/embedded-content.html#attr-img-src": { "displayText": "src", "export": true, "for_": ["img"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "src", "type": "element-attr", "url": "https://html.spec.whatwg.org/multipage/embedded-content.html#attr-img-src" },
                "https://html.spec.whatwg.org/multipage/embedded-content.html#attr-img-srcset": { "displayText": "srcset", "export": true, "for_": ["img"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "srcset", "type": "element-attr", "url": "https://html.spec.whatwg.org/multipage/embedded-content.html#attr-img-srcset" },
                "https://html.spec.whatwg.org/multipage/embedded-content.html#dom-img-ismap": { "displayText": "isMap", "export": true, "for_": ["HTMLImageElement"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "isMap", "type": "attribute", "url": "https://html.spec.whatwg.org/multipage/embedded-content.html#dom-img-ismap" },
                "https://html.spec.whatwg.org/multipage/embedded-content.html#dom-img-width": { "displayText": "width", "export": true, "for_": ["HTMLImageElement"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "width", "type": "attribute", "url": "https://html.spec.whatwg.org/multipage/embedded-content.html#dom-img-width" },
                "https://html.spec.whatwg.org/multipage/embedded-content.html#htmlimageelement": { "displayText": "HTMLImageElement", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "HTMLImageElement", "type": "interface", "url": "https://html.spec.whatwg.org/multipage/embedded-content.html#htmlimageelement" },
                "https://html.spec.whatwg.org/multipage/embedded-content.html#the-img-element": { "displayText": "img", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "img", "type": "element", "url": "https://html.spec.whatwg.org/multipage/embedded-content.html#the-img-element" },
                "https://html.spec.whatwg.org/multipage/embedded-content.html#the-source-element": { "displayText": "source", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "source", "type": "element", "url": "https://html.spec.whatwg.org/multipage/embedded-content.html#the-source-element" },
                "https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#attr-fs-action": { "displayText": "action", "export": true, "for_": ["form", "button"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "action", "type": "element-attr", "url": "https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#attr-fs-action" },
                "https://html.spec.whatwg.org/multipage/form-elements.html#attr-option-selected": { "displayText": "selected", "export": true, "for_": ["option"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "selected", "type": "element-attr", "url": "https://html.spec.whatwg.org/multipage/form-elements.html#attr-option-selected" },
                "https://html.spec.whatwg.org/multipage/form-elements.html#attr-select-multiple": { "displayText": "multiple", "export": true, "for_": ["select"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "multiple", "type": "element-attr", "url": "https://html.spec.whatwg.org/multipage/form-elements.html#attr-select-multiple" },
                "https://html.spec.whatwg.org/multipage/form-elements.html#dom-option-defaultselected": { "displayText": "defaultSelected", "export": true, "for_": ["HTMLOptionElement"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "defaultSelected", "type": "attribute", "url": "https://html.spec.whatwg.org/multipage/form-elements.html#dom-option-defaultselected" },
                "https://html.spec.whatwg.org/multipage/form-elements.html#the-button-element": { "displayText": "button", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "button", "type": "element", "url": "https://html.spec.whatwg.org/multipage/form-elements.html#the-button-element" },
                "https://html.spec.whatwg.org/multipage/form-elements.html#the-datalist-element": { "displayText": "datalist", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "datalist", "type": "element", "url": "https://html.spec.whatwg.org/multipage/form-elements.html#the-datalist-element" },
                "https://html.spec.whatwg.org/multipage/form-elements.html#the-option-element": { "displayText": "option", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "option", "type": "element", "url": "https://html.spec.whatwg.org/multipage/form-elements.html#the-option-element" },
                "https://html.spec.whatwg.org/multipage/form-elements.html#the-output-element": { "displayText": "output", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "output", "type": "element", "url": "https://html.spec.whatwg.org/multipage/form-elements.html#the-output-element" },
                "https://html.spec.whatwg.org/multipage/form-elements.html#the-select-element": { "displayText": "select", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "select", "type": "element", "url": "https://html.spec.whatwg.org/multipage/form-elements.html#the-select-element" },
                "https://html.spec.whatwg.org/multipage/form-elements.html#the-textarea-element": { "displayText": "textarea", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "textarea", "type": "element", "url": "https://html.spec.whatwg.org/multipage/form-elements.html#the-textarea-element" },
                "https://html.spec.whatwg.org/multipage/forms.html#attr-label-for": { "displayText": "for", "export": true, "for_": ["label"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "for", "type": "element-attr", "url": "https://html.spec.whatwg.org/multipage/forms.html#attr-label-for" },
                "https://html.spec.whatwg.org/multipage/forms.html#the-form-element": { "displayText": "form", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "form", "type": "element", "url": "https://html.spec.whatwg.org/multipage/forms.html#the-form-element" },
                "https://html.spec.whatwg.org/multipage/forms.html#the-label-element": { "displayText": "label", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "label", "type": "element", "url": "https://html.spec.whatwg.org/multipage/forms.html#the-label-element" },
                "https://html.spec.whatwg.org/multipage/grouping-content.html#htmlhrelement": { "displayText": "HTMLHRElement", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "HTMLHRElement", "type": "interface", "url": "https://html.spec.whatwg.org/multipage/grouping-content.html#htmlhrelement" },
                "https://html.spec.whatwg.org/multipage/grouping-content.html#the-figcaption-element": { "displayText": "figcaption", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "figcaption", "type": "element", "url": "https://html.spec.whatwg.org/multipage/grouping-content.html#the-figcaption-element" },
                "https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-sandbox": { "displayText": "sandbox", "export": true, "for_": ["iframe"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "sandbox", "type": "element-attr", "url": "https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-sandbox" },
                "https://html.spec.whatwg.org/multipage/imagebitmap-and-animations.html#dom-createimagebitmap": { "displayText": "createImageBitmap(image, options)", "export": true, "for_": ["WindowOrWorkerGlobalScope"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "createImageBitmap(image, options)", "type": "method", "url": "https://html.spec.whatwg.org/multipage/imagebitmap-and-animations.html#dom-createimagebitmap" },
                "https://html.spec.whatwg.org/multipage/imagebitmap-and-animations.html#imagebitmap": { "displayText": "ImageBitmap", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "ImageBitmap", "type": "interface", "url": "https://html.spec.whatwg.org/multipage/imagebitmap-and-animations.html#imagebitmap" },
                "https://html.spec.whatwg.org/multipage/indices.html#event-languagechange": { "displayText": "languagechange", "export": true, "for_": ["Window", "WorkerGlobalScope"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "languagechange", "type": "event", "url": "https://html.spec.whatwg.org/multipage/indices.html#event-languagechange" },
                "https://html.spec.whatwg.org/multipage/input.html#attr-input-accept": { "displayText": "accept", "export": true, "for_": ["input"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "accept", "type": "element-attr", "url": "https://html.spec.whatwg.org/multipage/input.html#attr-input-accept" },
                "https://html.spec.whatwg.org/multipage/input.html#attr-input-checked": { "displayText": "checked", "export": true, "for_": ["input"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "checked", "type": "element-attr", "url": "https://html.spec.whatwg.org/multipage/input.html#attr-input-checked" },
                "https://html.spec.whatwg.org/multipage/input.html#attr-input-list": { "displayText": "list", "export": true, "for_": ["input"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "list", "type": "element-attr", "url": "https://html.spec.whatwg.org/multipage/input.html#attr-input-list" },
                "https://html.spec.whatwg.org/multipage/input.html#attr-input-type": { "displayText": "type", "export": true, "for_": ["input"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "type", "type": "element-attr", "url": "https://html.spec.whatwg.org/multipage/input.html#attr-input-type" },
                "https://html.spec.whatwg.org/multipage/input.html#attr-input-value": { "displayText": "value", "export": true, "for_": ["input"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "value", "type": "element-attr", "url": "https://html.spec.whatwg.org/multipage/input.html#attr-input-value" },
                "https://html.spec.whatwg.org/multipage/input.html#dom-input-defaultchecked": { "displayText": "defaultChecked", "export": true, "for_": ["HTMLInputElement"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "defaultChecked", "type": "attribute", "url": "https://html.spec.whatwg.org/multipage/input.html#dom-input-defaultchecked" },
                "https://html.spec.whatwg.org/multipage/input.html#dom-input-defaultvalue": { "displayText": "defaultValue", "export": true, "for_": ["HTMLInputElement"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "defaultValue", "type": "attribute", "url": "https://html.spec.whatwg.org/multipage/input.html#dom-input-defaultvalue" },
                "https://html.spec.whatwg.org/multipage/input.html#dom-input-value": { "displayText": "value", "export": true, "for_": ["HTMLInputElement"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "value", "type": "attribute", "url": "https://html.spec.whatwg.org/multipage/input.html#dom-input-value" },
                "https://html.spec.whatwg.org/multipage/input.html#htmlinputelement": { "displayText": "HTMLInputElement", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "HTMLInputElement", "type": "interface", "url": "https://html.spec.whatwg.org/multipage/input.html#htmlinputelement" },
                "https://html.spec.whatwg.org/multipage/input.html#the-input-element": { "displayText": "input", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "input", "type": "element", "url": "https://html.spec.whatwg.org/multipage/input.html#the-input-element" },
                "https://html.spec.whatwg.org/multipage/interaction.html#dom-useractivation-isactive": { "displayText": "isActive", "export": true, "for_": ["UserActivation"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "isActive", "type": "attribute", "url": "https://html.spec.whatwg.org/multipage/interaction.html#dom-useractivation-isactive" },
                "https://html.spec.whatwg.org/multipage/interaction.html#transient-activation": { "displayText": "transient activation", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "transient activation", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/interaction.html#transient-activation" },
                "https://html.spec.whatwg.org/multipage/interactive-elements.html#attr-details-open": { "displayText": "open", "export": true, "for_": ["details"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "open", "type": "element-attr", "url": "https://html.spec.whatwg.org/multipage/interactive-elements.html#attr-details-open" },
                "https://html.spec.whatwg.org/multipage/interactive-elements.html#dom-dialog-showmodal": { "displayText": "showModal()", "export": true, "for_": ["HTMLDialogElement"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "showModal()", "type": "method", "url": "https://html.spec.whatwg.org/multipage/interactive-elements.html#dom-dialog-showmodal" },
                "https://html.spec.whatwg.org/multipage/interactive-elements.html#the-details-element": { "displayText": "details", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "details", "type": "element", "url": "https://html.spec.whatwg.org/multipage/interactive-elements.html#the-details-element" },
                "https://html.spec.whatwg.org/multipage/interactive-elements.html#the-dialog-element": { "displayText": "dialog", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "dialog", "type": "element", "url": "https://html.spec.whatwg.org/multipage/interactive-elements.html#the-dialog-element" },
                "https://html.spec.whatwg.org/multipage/links.html#attr-hyperlink-href": { "displayText": "href", "export": true, "for_": ["a", "area"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "href", "type": "element-attr", "url": "https://html.spec.whatwg.org/multipage/links.html#attr-hyperlink-href" },
                "https://html.spec.whatwg.org/multipage/links.html#ping": { "displayText": "ping", "export": true, "for_": ["a", "area"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "ping", "type": "element-attr", "url": "https://html.spec.whatwg.org/multipage/links.html#ping" },
                "https://html.spec.whatwg.org/multipage/media.html#attr-video-poster": { "displayText": "poster", "export": true, "for_": ["video"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "poster", "type": "element-attr", "url": "https://html.spec.whatwg.org/multipage/media.html#attr-video-poster" },
                "https://html.spec.whatwg.org/multipage/media.html#audio": { "displayText": "audio", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "audio", "type": "element", "url": "https://html.spec.whatwg.org/multipage/media.html#audio" },
                "https://html.spec.whatwg.org/multipage/media.html#dom-media-play": { "displayText": "play()", "export": true, "for_": ["HTMLMediaElement"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "play()", "type": "method", "url": "https://html.spec.whatwg.org/multipage/media.html#dom-media-play" },
                "https://html.spec.whatwg.org/multipage/media.html#event-media-canplaythrough": { "displayText": "canplaythrough", "export": true, "for_": ["HTMLMediaElement"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "canplaythrough", "type": "event", "url": "https://html.spec.whatwg.org/multipage/media.html#event-media-canplaythrough" },
                "https://html.spec.whatwg.org/multipage/media.html#event-media-resize": { "displayText": "resize", "export": true, "for_": ["HTMLMediaElement"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "resize", "type": "event", "url": "https://html.spec.whatwg.org/multipage/media.html#event-media-resize" },
                "https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement": { "displayText": "HTMLMediaElement", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "HTMLMediaElement", "type": "interface", "url": "https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement" },
                "https://html.spec.whatwg.org/multipage/media.html#video": { "displayText": "video", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "video", "type": "element", "url": "https://html.spec.whatwg.org/multipage/media.html#video" },
                "https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-open": { "displayText": "open(url, target, features)", "export": true, "for_": ["Window"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "open(url, target, features)", "type": "method", "url": "https://html.spec.whatwg.org/multipage/nav-history-apis.html#dom-open" },
                "https://html.spec.whatwg.org/multipage/nav-history-apis.html#history-3": { "displayText": "History", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "History", "type": "interface", "url": "https://html.spec.whatwg.org/multipage/nav-history-apis.html#history-3" },
                "https://html.spec.whatwg.org/multipage/nav-history-apis.html#window": { "displayText": "Window", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "Window", "type": "interface", "url": "https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" },
                "https://html.spec.whatwg.org/multipage/obsolete.html#acronym": { "displayText": "acronym", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "acronym", "type": "element", "url": "https://html.spec.whatwg.org/multipage/obsolete.html#acronym" },
                "https://html.spec.whatwg.org/multipage/obsolete.html#dom-document-bgcolor": { "displayText": "bgColor", "export": true, "for_": ["Document"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "bgColor", "type": "attribute", "url": "https://html.spec.whatwg.org/multipage/obsolete.html#dom-document-bgcolor" },
                "https://html.spec.whatwg.org/multipage/scripting.html#attr-script-src": { "displayText": "src", "export": true, "for_": ["script"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "src", "type": "element-attr", "url": "https://html.spec.whatwg.org/multipage/scripting.html#attr-script-src" },
                "https://html.spec.whatwg.org/multipage/scripting.html#script": { "displayText": "script", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "script", "type": "element", "url": "https://html.spec.whatwg.org/multipage/scripting.html#script" },
                "https://html.spec.whatwg.org/multipage/semantics.html#attr-link-href": { "displayText": "href", "export": true, "for_": ["link"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "href", "type": "element-attr", "url": "https://html.spec.whatwg.org/multipage/semantics.html#attr-link-href" },
                "https://html.spec.whatwg.org/multipage/semantics.html#attr-link-rel": { "displayText": "rel", "export": true, "for_": ["link"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "rel", "type": "element-attr", "url": "https://html.spec.whatwg.org/multipage/semantics.html#attr-link-rel" },
                "https://html.spec.whatwg.org/multipage/semantics.html#htmlhtmlelement": { "displayText": "HTMLHtmlElement", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "HTMLHtmlElement", "type": "interface", "url": "https://html.spec.whatwg.org/multipage/semantics.html#htmlhtmlelement" },
                "https://html.spec.whatwg.org/multipage/semantics.html#the-link-element": { "displayText": "link", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "link", "type": "element", "url": "https://html.spec.whatwg.org/multipage/semantics.html#the-link-element" },
                "https://html.spec.whatwg.org/multipage/semantics.html#the-style-element": { "displayText": "style", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "style", "type": "element", "url": "https://html.spec.whatwg.org/multipage/semantics.html#the-style-element" },
                "https://html.spec.whatwg.org/multipage/system-state.html#navigator": { "displayText": "Navigator", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "Navigator", "type": "interface", "url": "https://html.spec.whatwg.org/multipage/system-state.html#navigator" },
                "https://html.spec.whatwg.org/multipage/text-level-semantics.html#attr-q-cite": { "displayText": "cite", "export": true, "for_": ["q"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "cite", "type": "element-attr", "url": "https://html.spec.whatwg.org/multipage/text-level-semantics.html#attr-q-cite" },
                "https://html.spec.whatwg.org/multipage/text-level-semantics.html#the-a-element": { "displayText": "a", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "a", "type": "element", "url": "https://html.spec.whatwg.org/multipage/text-level-semantics.html#the-a-element" },
                "https://html.spec.whatwg.org/multipage/text-level-semantics.html#the-abbr-element": { "displayText": "abbr", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "abbr", "type": "element", "url": "https://html.spec.whatwg.org/multipage/text-level-semantics.html#the-abbr-element" },
                "https://html.spec.whatwg.org/multipage/text-level-semantics.html#the-q-element": { "displayText": "q", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "q", "type": "element", "url": "https://html.spec.whatwg.org/multipage/text-level-semantics.html#the-q-element" },
                "https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#dom-alert-noargs": { "displayText": "alert()", "export": true, "for_": ["Window"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "alert()", "type": "method", "url": "https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#dom-alert-noargs" },
                "https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#dom-settimeout": { "displayText": "setTimeout(handler, timeout, ...arguments)", "export": true, "for_": ["WindowOrWorkerGlobalScope"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "setTimeout(handler, timeout, ...arguments)", "type": "method", "url": "https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#dom-settimeout" },
                "https://html.spec.whatwg.org/multipage/webappapis.html#concept-task": { "displayText": "task", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "task", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#concept-task" },
                "https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source": { "displayText": "DOM manipulation task source", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "dom manipulation task source", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source" },
                "https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes": { "displayText": "event handler IDL attribute", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "event handler idl attribute", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes" },
                "https://html.spec.whatwg.org/multipage/webappapis.html#event-loop": { "displayText": "event loop", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "event loop", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#event-loop" },
                "https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler": { "displayText": "EventHandler", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "EventHandler", "type": "typedef", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" },
                "https://html.spec.whatwg.org/multipage/webappapis.html#globaleventhandlers": { "displayText": "GlobalEventHandlers", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "GlobalEventHandlers", "type": "interface", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#globaleventhandlers" },
                "https://html.spec.whatwg.org/multipage/webappapis.html#microtask": { "displayText": "microtask", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "microtask", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#microtask" },
                "https://html.spec.whatwg.org/multipage/webappapis.html#networking-task-source": { "displayText": "networking task source", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "networking task source", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#networking-task-source" },
                "https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task": { "displayText": "queue a global task", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "queue a global task", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task" },
                "https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task": { "displayText": "queue a task", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "queue a task", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task" },
                "https://html.spec.whatwg.org/multipage/webappapis.html#queue-an-element-task": { "displayText": "queue an element task", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "queue an element task", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#queue-an-element-task" },
                "https://html.spec.whatwg.org/multipage/webappapis.html#task-source": { "displayText": "task source", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "task source", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#task-source" },
                "https://html.spec.whatwg.org/multipage/webappapis.html#update-the-rendering": { "displayText": "update the rendering", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "update the rendering", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#update-the-rendering" },
                "https://html.spec.whatwg.org/multipage/webappapis.html#user-interaction-task-source": { "displayText": "user interaction task source", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "user interaction task source", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#user-interaction-task-source" },
                "https://html.spec.whatwg.org/multipage/webappapis.html#windoweventhandlers": { "displayText": "WindowEventHandlers", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "WindowEventHandlers", "type": "interface", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#windoweventhandlers" },
                "https://html.spec.whatwg.org/multipage/webstorage.html#dom-localstorage": { "displayText": "localStorage", "export": true, "for_": ["WindowLocalStorage"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "localStorage", "type": "attribute", "url": "https://html.spec.whatwg.org/multipage/webstorage.html#dom-localstorage" },
                "https://html.spec.whatwg.org/multipage/workers.html#dedicatedworkerglobalscope": { "displayText": "DedicatedWorkerGlobalScope", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "DedicatedWorkerGlobalScope", "type": "interface", "url": "https://html.spec.whatwg.org/multipage/workers.html#dedicatedworkerglobalscope" },
                "https://html.spec.whatwg.org/multipage/workers.html#workertype": { "displayText": "WorkerType", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "WorkerType", "type": "enum", "url": "https://html.spec.whatwg.org/multipage/workers.html#workertype" },
                "https://infra.spec.whatwg.org/#ascii-code-point": { "displayText": "ASCII code point", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "ascii code point", "type": "dfn", "url": "https://infra.spec.whatwg.org/#ascii-code-point" },
                "https://infra.spec.whatwg.org/#code-unit": { "displayText": "code unit", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "code unit", "type": "dfn", "url": "https://infra.spec.whatwg.org/#code-unit" },
                "https://infra.spec.whatwg.org/#implementation-defined": { "displayText": "implementation-defined", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "implementation-defined", "type": "dfn", "url": "https://infra.spec.whatwg.org/#implementation-defined" },
                "https://infra.spec.whatwg.org/#scalar-value": { "displayText": "scalar value", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "scalar value", "type": "dfn", "url": "https://infra.spec.whatwg.org/#scalar-value" },
                "https://infra.spec.whatwg.org/#scalar-value-string": { "displayText": "scalar value string", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "scalar value string", "type": "dfn", "url": "https://infra.spec.whatwg.org/#scalar-value-string" },
                "https://infra.spec.whatwg.org/#string": { "displayText": "string", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "string", "type": "dfn", "url": "https://infra.spec.whatwg.org/#string" },
                "https://infra.spec.whatwg.org/#surrogate": { "displayText": "surrogate", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "surrogate", "type": "dfn", "url": "https://infra.spec.whatwg.org/#surrogate" },
                "https://tc39.es/ecma262/multipage/control-abstraction-objects.html#sec-promise.prototype.then": { "displayText": "then(onFulfilled, onRejected)", "export": true, "for_": ["Promise"], "level": "1", "normative": true, "shortname": "ecmascript", "spec": "ecmascript", "status": "current", "text": "then(onFulfilled, onRejected)", "type": "method", "url": "https://tc39.es/ecma262/multipage/control-abstraction-objects.html#sec-promise.prototype.then" },
                "https://tc39.es/ecma262/multipage/fundamental-objects.html#sec-error-objects": { "displayText": "Error", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "ecmascript", "spec": "ecmascript", "status": "current", "text": "Error", "type": "exception", "url": "https://tc39.es/ecma262/multipage/fundamental-objects.html#sec-error-objects" },
                "https://tc39.es/ecma262/multipage/managing-memory.html#sec-finalization-registry-objects": { "displayText": "FinalizationRegistry", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "ecmascript", "spec": "ecmascript", "status": "current", "text": "FinalizationRegistry", "type": "interface", "url": "https://tc39.es/ecma262/multipage/managing-memory.html#sec-finalization-registry-objects" },
                "https://tc39.es/ecma262/multipage/managing-memory.html#sec-weak-ref-objects": { "displayText": "WeakRef", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "ecmascript", "spec": "ecmascript", "status": "current", "text": "WeakRef", "type": "interface", "url": "https://tc39.es/ecma262/multipage/managing-memory.html#sec-weak-ref-objects" },
                "https://tc39.es/ecma262/multipage/numbers-and-dates.html#sec-bigint-objects": { "displayText": "BigInt", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "ecmascript", "spec": "ecmascript", "status": "current", "text": "BigInt", "type": "interface", "url": "https://tc39.es/ecma262/multipage/numbers-and-dates.html#sec-bigint-objects" },
                "https://tc39.es/ecma262/multipage/numbers-and-dates.html#sec-date-objects": { "displayText": "Date", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "ecmascript", "spec": "ecmascript", "status": "current", "text": "Date", "type": "interface", "url": "https://tc39.es/ecma262/multipage/numbers-and-dates.html#sec-date-objects" },
                "https://tc39.es/ecma262/multipage/numbers-and-dates.html#sec-date.now": { "displayText": "now()", "export": true, "for_": ["Date"], "level": "1", "normative": true, "shortname": "ecmascript", "spec": "ecmascript", "status": "current", "text": "now()", "type": "method", "url": "https://tc39.es/ecma262/multipage/numbers-and-dates.html#sec-date.now" },
                "https://tc39.es/ecma262/multipage/numbers-and-dates.html#sec-number-objects": { "displayText": "Number", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "ecmascript", "spec": "ecmascript", "status": "current", "text": "Number", "type": "interface", "url": "https://tc39.es/ecma262/multipage/numbers-and-dates.html#sec-number-objects" },
                "https://url.spec.whatwg.org/#concept-url": { "displayText": "URL", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "url", "spec": "url", "status": "current", "text": "url", "type": "dfn", "url": "https://url.spec.whatwg.org/#concept-url" },
                "https://url.spec.whatwg.org/#dom-urlsearchparams-delete": { "displayText": "delete(name)", "export": true, "for_": ["URLSearchParams"], "level": "1", "normative": true, "shortname": "url", "spec": "url", "status": "current", "text": "delete(name)", "type": "method", "url": "https://url.spec.whatwg.org/#dom-urlsearchparams-delete" },
                "https://url.spec.whatwg.org/#dom-urlsearchparams-has": { "displayText": "has(name)", "export": true, "for_": ["URLSearchParams"], "level": "1", "normative": true, "shortname": "url", "spec": "url", "status": "current", "text": "has(name)", "type": "method", "url": "https://url.spec.whatwg.org/#dom-urlsearchparams-has" },
                "https://url.spec.whatwg.org/#urlsearchparams": { "displayText": "URLSearchParams", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "url", "spec": "url", "status": "current", "text": "URLSearchParams", "type": "interface", "url": "https://url.spec.whatwg.org/#urlsearchparams" },
                "https://w3c.github.io/FileAPI/#dfn-Blob": { "displayText": "Blob", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "fileapi", "spec": "fileapi", "status": "current", "text": "Blob", "type": "interface", "url": "https://w3c.github.io/FileAPI/#dfn-Blob" },
                "https://w3c.github.io/IndexedDB/#idbdatabase": { "displayText": "IDBDatabase", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "indexeddb", "spec": "indexeddb-3", "status": "current", "text": "IDBDatabase", "type": "interface", "url": "https://w3c.github.io/IndexedDB/#idbdatabase" },
                "https://w3c.github.io/IntersectionObserver/#intersectionobserver": { "displayText": "IntersectionObserver", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "intersection-observer", "spec": "intersection-observer", "status": "current", "text": "IntersectionObserver", "type": "interface", "url": "https://w3c.github.io/IntersectionObserver/#intersectionobserver" },
                "https://w3c.github.io/ServiceWorker/#dfn-service-worker-registration-task-queue": { "displayText": "task queues", "export": true, "for_": ["service worker registration"], "level": "1", "normative": true, "shortname": "service-workers", "spec": "service-workers", "status": "current", "text": "task queues", "type": "dfn", "url": "https://w3c.github.io/ServiceWorker/#dfn-service-worker-registration-task-queue" },
                "https://w3c.github.io/ServiceWorker/#dom-fetchevent-respondwith": { "displayText": "respondWith(r)", "export": true, "for_": ["FetchEvent"], "level": "1", "normative": true, "shortname": "service-workers", "spec": "service-workers", "status": "current", "text": "respondWith(r)", "type": "method", "url": "https://w3c.github.io/ServiceWorker/#dom-fetchevent-respondwith" },
                "https://w3c.github.io/gamepad/#dom-gamepad": { "displayText": "Gamepad", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "gamepad", "spec": "gamepad", "status": "current", "text": "Gamepad", "type": "interface", "url": "https://w3c.github.io/gamepad/#dom-gamepad" },
                "https://w3c.github.io/hr-time/#dom-domhighrestimestamp": { "displayText": "DOMHighResTimeStamp", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "hr-time", "spec": "hr-time-3", "status": "current", "text": "DOMHighResTimeStamp", "type": "typedef", "url": "https://w3c.github.io/hr-time/#dom-domhighrestimestamp" },
                "https://w3c.github.io/hr-time/#dom-performance-now": { "displayText": "now()", "export": true, "for_": ["Performance"], "level": "3", "normative": true, "shortname": "hr-time", "spec": "hr-time-3", "status": "current", "text": "now()", "type": "method", "url": "https://w3c.github.io/hr-time/#dom-performance-now" },
                "https://w3c.github.io/i18n-glossary/#dfn-percent-encoding": { "displayText": "percent-encoding", "export": true, "for_": [], "level": "1", "normative": false, "shortname": "i18n-glossary", "spec": "i18n-glossary", "status": "current", "text": "percent-encoding", "type": "dfn", "url": "https://w3c.github.io/i18n-glossary/#dfn-percent-encoding" },
                "https://w3c.github.io/manifest/#dfn-short_name": { "displayText": "short_name", "export": true, "for_": ["manifest"], "level": "1", "normative": true, "shortname": "appmanifest", "spec": "appmanifest", "status": "current", "text": "short_name", "type": "dfn", "url": "https://w3c.github.io/manifest/#dfn-short_name" },
                "https://w3c.github.io/mediacapture-screen-share/#dom-capturecontroller-setfocusbehavior": { "displayText": "setFocusBehavior()", "export": true, "for_": ["CaptureController"], "level": "1", "normative": true, "shortname": "screen-capture", "spec": "screen-capture", "status": "current", "text": "setFocusBehavior()", "type": "method", "url": "https://w3c.github.io/mediacapture-screen-share/#dom-capturecontroller-setfocusbehavior" },
                "https://w3c.github.io/mediacapture-screen-share/#dom-mediadevices-getdisplaymedia": { "displayText": "getDisplayMedia()", "export": true, "for_": ["MediaDevices"], "level": "1", "normative": true, "shortname": "screen-capture", "spec": "screen-capture", "status": "current", "text": "getDisplayMedia()", "type": "method", "url": "https://w3c.github.io/mediacapture-screen-share/#dom-mediadevices-getdisplaymedia" },
                "https://w3c.github.io/payment-request/#dfn-state": { "displayText": "[[state]]", "export": false, "for_": ["PaymentRequest"], "level": "1", "normative": true, "shortname": "payment-request", "spec": "payment-request", "status": "current", "text": "[[state]]", "type": "attribute", "url": "https://w3c.github.io/payment-request/#dfn-state" },
                "https://w3c.github.io/payment-request/#dom-paymentrequest": { "displayText": "PaymentRequest", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "payment-request", "spec": "payment-request", "status": "current", "text": "PaymentRequest", "type": "interface", "url": "https://w3c.github.io/payment-request/#dom-paymentrequest" },
                "https://w3c.github.io/payment-request/#dom-paymentrequest-show": { "displayText": "show()", "export": true, "for_": ["PaymentRequest"], "level": "1", "normative": true, "shortname": "payment-request", "spec": "payment-request", "status": "current", "text": "show()", "type": "method", "url": "https://w3c.github.io/payment-request/#dom-paymentrequest-show" },
                "https://w3c.github.io/permissions/#dfn-prompt-the-user-to-choose": { "displayText": "prompt the user to choose", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "permissions", "spec": "permissions", "status": "current", "text": "prompt the user to choose", "type": "dfn", "url": "https://w3c.github.io/permissions/#dfn-prompt-the-user-to-choose" },
                "https://w3c.github.io/permissions/#dfn-request-permission-to-use": { "displayText": "request permission to use", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "permissions", "spec": "permissions", "status": "current", "text": "request permission to use", "type": "dfn", "url": "https://w3c.github.io/permissions/#dfn-request-permission-to-use" },
                "https://w3c.github.io/pointerevents/#dom-pointerevent": { "displayText": "PointerEvent", "export": true, "for_": [], "level": "3", "normative": true, "shortname": "pointerevents", "spec": "pointerevents3", "status": "current", "text": "PointerEvent", "type": "interface", "url": "https://w3c.github.io/pointerevents/#dom-pointerevent" },
                "https://w3c.github.io/pointerevents/#dom-pointerevent-pointerid": { "displayText": "pointerId", "export": true, "for_": ["PointerEvent"], "level": "3", "normative": true, "shortname": "pointerevents", "spec": "pointerevents3", "status": "current", "text": "pointerId", "type": "attribute", "url": "https://w3c.github.io/pointerevents/#dom-pointerevent-pointerid" },
                "https://w3c.github.io/remote-playback/#dfn-remote-playback-devices": { "displayText": "remote playback devices", "export": false, "for_": [], "level": "1", "normative": true, "shortname": "remote-playback", "spec": "remote-playback", "status": "current", "text": "remote playback devices", "type": "dfn", "url": "https://w3c.github.io/remote-playback/#dfn-remote-playback-devices" },
                "https://w3c.github.io/remote-playback/#dom-remoteplayback": { "displayText": "RemotePlayback", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "remote-playback", "spec": "remote-playback", "status": "current", "text": "RemotePlayback", "type": "interface", "url": "https://w3c.github.io/remote-playback/#dom-remoteplayback" },
                "https://w3c.github.io/requestidlecallback/#dom-idledeadline-timeremaining": { "displayText": "timeRemaining()", "export": true, "for_": ["IdleDeadline"], "level": "1", "normative": true, "shortname": "requestidlecallback", "spec": "requestidlecallback", "status": "current", "text": "timeRemaining()", "type": "method", "url": "https://w3c.github.io/requestidlecallback/#dom-idledeadline-timeremaining" },
                "https://w3c.github.io/uievents/#dom-inputevent-inputtype": { "displayText": "inputType", "export": true, "for_": ["InputEvent"], "level": "1", "normative": true, "shortname": "uievents", "spec": "uievents", "status": "current", "text": "inputType", "type": "attribute", "url": "https://w3c.github.io/uievents/#dom-inputevent-inputtype" },
                "https://w3c.github.io/uievents/#inputevent": { "displayText": "InputEvent", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "uievents", "spec": "uievents", "status": "current", "text": "InputEvent", "type": "interface", "url": "https://w3c.github.io/uievents/#inputevent" },
                "https://w3c.github.io/uievents/#keyboardevent": { "displayText": "KeyboardEvent", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "uievents", "spec": "uievents", "status": "current", "text": "KeyboardEvent", "type": "interface", "url": "https://w3c.github.io/uievents/#keyboardevent" },
                "https://w3c.github.io/uievents/#mouseevent": { "displayText": "MouseEvent", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "uievents", "spec": "uievents", "status": "current", "text": "MouseEvent", "type": "interface", "url": "https://w3c.github.io/uievents/#mouseevent" },
                "https://w3c.github.io/web-locks/#lockmanager": { "displayText": "LockManager", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "web-locks", "spec": "web-locks", "status": "current", "text": "LockManager", "type": "interface", "url": "https://w3c.github.io/web-locks/#lockmanager" },
                "https://w3c.github.io/webappsec-credential-management/#dom-credential-id": { "displayText": "id", "export": true, "for_": ["Credential"], "level": "1", "normative": true, "shortname": "credential-management", "spec": "credential-management-1", "status": "current", "text": "id", "type": "attribute", "url": "https://w3c.github.io/webappsec-credential-management/#dom-credential-id" },
                "https://w3c.github.io/webappsec-referrer-policy/#dom-referrerpolicy-no-referrer-when-downgrade": { "displayText": "\"no-referrer-when-downgrade\"", "export": true, "for_": ["ReferrerPolicy"], "level": "1", "normative": true, "shortname": "referrer-policy", "spec": "referrer-policy", "status": "current", "text": "\"no-referrer-when-downgrade\"", "type": "enum-value", "url": "https://w3c.github.io/webappsec-referrer-policy/#dom-referrerpolicy-no-referrer-when-downgrade" },
                "https://w3c.github.io/webcrypto/#dfn-Crypto": { "displayText": "Crypto", "export": true, "for_": [], "level": "2", "normative": true, "shortname": "webcrypto", "spec": "webcrypto-2", "status": "current", "text": "Crypto", "type": "interface", "url": "https://w3c.github.io/webcrypto/#dfn-Crypto" },
                "https://w3c.github.io/webrtc-pc/#dom-rtcdtmfsender": { "displayText": "RTCDTMFSender", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webrtc", "spec": "webrtc", "status": "current", "text": "RTCDTMFSender", "type": "interface", "url": "https://w3c.github.io/webrtc-pc/#dom-rtcdtmfsender" },
                "https://webaudio.github.io/web-audio-api/#AudioWorklet": { "displayText": "AudioWorklet", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webaudio", "spec": "webaudio-1.0", "status": "current", "text": "AudioWorklet", "type": "interface", "url": "https://webaudio.github.io/web-audio-api/#AudioWorklet" },
                "https://webaudio.github.io/web-audio-api/#ScriptProcessorNode": { "displayText": "ScriptProcessorNode", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webaudio", "spec": "webaudio-1.0", "status": "current", "text": "ScriptProcessorNode", "type": "interface", "url": "https://webaudio.github.io/web-audio-api/#ScriptProcessorNode" },
                "https://webidl.spec.whatwg.org/#Clamp": { "displayText": "Clamp", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "Clamp", "type": "extended-attribute", "url": "https://webidl.spec.whatwg.org/#Clamp" },
                "https://webidl.spec.whatwg.org/#EnforceRange": { "displayText": "EnforceRange", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "EnforceRange", "type": "extended-attribute", "url": "https://webidl.spec.whatwg.org/#EnforceRange" },
                "https://webidl.spec.whatwg.org/#Exposed": { "displayText": "Exposed", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "Exposed", "type": "extended-attribute", "url": "https://webidl.spec.whatwg.org/#Exposed" },
                "https://webidl.spec.whatwg.org/#SecureContext": { "displayText": "SecureContext", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "SecureContext", "type": "extended-attribute", "url": "https://webidl.spec.whatwg.org/#SecureContext" },
                "https://webidl.spec.whatwg.org/#dfn-maplike": { "displayText": "maplike", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "maplike", "type": "dfn", "url": "https://webidl.spec.whatwg.org/#dfn-maplike" },
                "https://webidl.spec.whatwg.org/#dfn-namespace": { "displayText": "namespace", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "namespace", "type": "dfn", "url": "https://webidl.spec.whatwg.org/#dfn-namespace" },
                "https://webidl.spec.whatwg.org/#dfn-observable-array-type": { "displayText": "observable array type", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "observable array type", "type": "dfn", "url": "https://webidl.spec.whatwg.org/#dfn-observable-array-type" },
                "https://webidl.spec.whatwg.org/#dfn-partial-dictionary": { "displayText": "partial dictionary", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "partial dictionary", "type": "dfn", "url": "https://webidl.spec.whatwg.org/#dfn-partial-dictionary" },
                "https://webidl.spec.whatwg.org/#dfn-partial-interface": { "displayText": "partial interface", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "partial interface", "type": "dfn", "url": "https://webidl.spec.whatwg.org/#dfn-partial-interface" },
                "https://webidl.spec.whatwg.org/#dfn-setlike": { "displayText": "setlike", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "setlike", "type": "dfn", "url": "https://webidl.spec.whatwg.org/#dfn-setlike" },
                "https://webidl.spec.whatwg.org/#exceptiondef-typeerror": { "displayText": "TypeError", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "TypeError", "type": "exception", "url": "https://webidl.spec.whatwg.org/#exceptiondef-typeerror" },
                "https://webidl.spec.whatwg.org/#idl-ArrayBuffer": { "displayText": "ArrayBuffer", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "ArrayBuffer", "type": "interface", "url": "https://webidl.spec.whatwg.org/#idl-ArrayBuffer" },
                "https://webidl.spec.whatwg.org/#idl-ByteString": { "displayText": "ByteString", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "ByteString", "type": "interface", "url": "https://webidl.spec.whatwg.org/#idl-ByteString" },
                "https://webidl.spec.whatwg.org/#idl-DOMException": { "displayText": "DOMException", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "DOMException", "type": "interface", "url": "https://webidl.spec.whatwg.org/#idl-DOMException" },
                "https://webidl.spec.whatwg.org/#idl-DOMString": { "displayText": "DOMString", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "DOMString", "type": "interface", "url": "https://webidl.spec.whatwg.org/#idl-DOMString" },
                "https://webidl.spec.whatwg.org/#idl-Float32Array": { "displayText": "Float32Array", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "Float32Array", "type": "interface", "url": "https://webidl.spec.whatwg.org/#idl-Float32Array" },
                "https://webidl.spec.whatwg.org/#idl-SharedArrayBuffer": { "displayText": "SharedArrayBuffer", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "SharedArrayBuffer", "type": "interface", "url": "https://webidl.spec.whatwg.org/#idl-SharedArrayBuffer" },
                "https://webidl.spec.whatwg.org/#idl-USVString": { "displayText": "USVString", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "USVString", "type": "interface", "url": "https://webidl.spec.whatwg.org/#idl-USVString" },
                "https://webidl.spec.whatwg.org/#idl-Uint8Array": { "displayText": "Uint8Array", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "Uint8Array", "type": "interface", "url": "https://webidl.spec.whatwg.org/#idl-Uint8Array" },
                "https://webidl.spec.whatwg.org/#idl-bigint": { "displayText": "bigint", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "bigint", "type": "interface", "url": "https://webidl.spec.whatwg.org/#idl-bigint" },
                "https://webidl.spec.whatwg.org/#idl-byte": { "displayText": "byte", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "byte", "type": "interface", "url": "https://webidl.spec.whatwg.org/#idl-byte" },
                "https://webidl.spec.whatwg.org/#idl-double": { "displayText": "double", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "double", "type": "interface", "url": "https://webidl.spec.whatwg.org/#idl-double" },
                "https://webidl.spec.whatwg.org/#idl-long": { "displayText": "long", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "long", "type": "interface", "url": "https://webidl.spec.whatwg.org/#idl-long" },
                "https://webidl.spec.whatwg.org/#idl-long-long": { "displayText": "long long", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "long long", "type": "interface", "url": "https://webidl.spec.whatwg.org/#idl-long-long" },
                "https://webidl.spec.whatwg.org/#idl-octet": { "displayText": "octet", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "octet", "type": "interface", "url": "https://webidl.spec.whatwg.org/#idl-octet" },
                "https://webidl.spec.whatwg.org/#idl-promise": { "displayText": "Promise", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "Promise", "type": "interface", "url": "https://webidl.spec.whatwg.org/#idl-promise" },
                "https://webidl.spec.whatwg.org/#idl-short": { "displayText": "short", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "short", "type": "interface", "url": "https://webidl.spec.whatwg.org/#idl-short" },
                "https://webidl.spec.whatwg.org/#idl-undefined": { "displayText": "undefined", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "undefined", "type": "interface", "url": "https://webidl.spec.whatwg.org/#idl-undefined" },
                "https://webidl.spec.whatwg.org/#idl-unrestricted-double": { "displayText": "unrestricted double", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "unrestricted double", "type": "interface", "url": "https://webidl.spec.whatwg.org/#idl-unrestricted-double" },
                "https://webidl.spec.whatwg.org/#idl-unsigned-long-long": { "displayText": "unsigned long long", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "unsigned long long", "type": "interface", "url": "https://webidl.spec.whatwg.org/#idl-unsigned-long-long" },
                "https://webidl.spec.whatwg.org/#sequence-type": { "displayText": "sequence type", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "sequence type", "type": "dfn", "url": "https://webidl.spec.whatwg.org/#sequence-type" },
                "https://www.rfc-editor.org/rfc/rfc9110.html#name-accept": { "displayText": "Accept", "export": true, "for_": [], "level": "", "normative": true, "shortname": "rfc9110", "spec": "rfc9110", "status": "anchor-block", "text": "accept", "type": "http-header", "url": "https://www.rfc-editor.org/rfc/rfc9110.html#name-accept" },
                "https://xhr.spec.whatwg.org/#dom-progressevent-loaded": { "displayText": "loaded", "export": true, "for_": ["ProgressEvent"], "level": "1", "normative": true, "shortname": "xhr", "spec": "xhr", "status": "current", "text": "loaded", "type": "attribute", "url": "https://xhr.spec.whatwg.org/#dom-progressevent-loaded" },
                "https://xhr.spec.whatwg.org/#dom-progressevent-total": { "displayText": "total", "export": true, "for_": ["ProgressEvent"], "level": "1", "normative": true, "shortname": "xhr", "spec": "xhr", "status": "current", "text": "total", "type": "attribute", "url": "https://xhr.spec.whatwg.org/#dom-progressevent-total" },
                "https://xhr.spec.whatwg.org/#dom-xmlhttprequest-readystate": { "displayText": "readyState", "export": true, "for_": ["XMLHttpRequest"], "level": "1", "normative": true, "shortname": "xhr", "spec": "xhr", "status": "current", "text": "readyState", "type": "attribute", "url": "https://xhr.spec.whatwg.org/#dom-xmlhttprequest-readystate" },
                "https://xhr.spec.whatwg.org/#progressevent": { "displayText": "ProgressEvent", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "xhr", "spec": "xhr", "status": "current", "text": "ProgressEvent", "type": "interface", "url": "https://xhr.spec.whatwg.org/#progressevent" },
                "https://xhr.spec.whatwg.org/#xmlhttprequest": { "displayText": "XMLHttpRequest", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "xhr", "spec": "xhr", "status": "current", "text": "XMLHttpRequest", "type": "interface", "url": "https://xhr.spec.whatwg.org/#xmlhttprequest" },
                "https://xhr.spec.whatwg.org/#xmlhttprequesteventtarget": { "displayText": "XMLHttpRequestEventTarget", "export": true, "for_": [], "level": "1", "normative": true, "shortname": "xhr", "spec": "xhr", "status": "current", "text": "XMLHttpRequestEventTarget", "type": "interface", "url": "https://xhr.spec.whatwg.org/#xmlhttprequesteventtarget" },
            };

            function mkRefHint(link, ref) {
                const linkText = link.textContent;
                let dfnTextElements = '';
                if (ref.displayText.toLowerCase() != linkText.toLowerCase()) {
                    // Give the original term if it's being displayed in a different way.
                    // But allow casing differences, they're insignificant.
                    dfnTextElements =
                        mk.li({},
                            mk.b({}, "Term: "),
                            mk.span({}, ref.displayText)
                        );
                }
                const forList = ref.for_;
                let forListElements;
                if (forList.length == 0) {
                    forListElements = [];
                } else if (forList.length == 1) {
                    forListElements = mk.li({},
                        mk.b({}, "For: "),
                        mk.span({}, forList[0]),
                    );
                } else {
                    forListElements = mk.li({},
                        mk.b({}, "For: "),
                        mk.ul({},
                            ...forList.map(forItem =>
                                mk.li({},
                                    mk.span({}, forItem)
                                ),
                            ),
                        ),
                    );
                }
                const url = ref.url;
                const safeUrl = encodeURIComponent(url);
                const hintPanel = mk.aside({
                    class: "ref-hint",
                    id: `ref-hint-for-${safeUrl}`,
                    "data-for": url,
                    "aria-labelled-by": `ref-hint-for-${safeUrl}`,
                },
                    mk.ul({},
                        dfnTextElements,
                        mk.li({},
                            mk.b({}, "URL: "),
                            mk.a({ href: url, class: "ref" }, url),
                        ),
                        mk.li({},
                            mk.b({}, "Type: "),
                            mk.span({}, `${ref.type}`),
                        ),
                        mk.li({},
                            mk.b({}, "Spec: "),
                            mk.span({}, `${ref.spec ? ref.spec : ''}`),
                        ),
                        forListElements
                    ),
                );
                hintPanel.forLink = link;
                setupRefHintEventListeners(link, hintPanel);
                return hintPanel;
            }

            function hideAllRefHints() {
                queryAll(".ref-hint").forEach(el => hideRefHint(el));
            }

            function hideRefHint(refHint) {
                const link = refHint.forLink;
                link.setAttribute("aria-expanded", "false");
                if (refHint.teardownEventListeners) {
                    refHint.teardownEventListeners();
                }
                refHint.remove();
            }

            function showRefHint(link) {
                if (link.classList.contains("dfn-link")) return;
                const url = link.getAttribute("href");
                const refHintKey = link.getAttribute("data-refhint-key");
                let key = url;
                if (refHintKey) {
                    key = refHintKey + "_" + url;
                }
                const ref = refsData[key];
                if (!ref) return;

                hideAllRefHints(); // Only display one at this time.

                const refHint = mkRefHint(link, ref);
                append(document.body, refHint);
                link.setAttribute("aria-expanded", "true");
                positionRefHint(refHint);
            }

            function setupRefHintEventListeners(link, refHint) {
                if (refHint.teardownEventListeners) return;
                // Add event handlers to hide the refHint after the user moves away
                // from both the link and refHint, if not hovering either within one second.
                let timeout = null;
                const startHidingRefHint = (event) => {
                    if (timeout) {
                        clearTimeout(timeout);
                    }
                    timeout = setTimeout(() => {
                        hideRefHint(refHint);
                    }, 1000);
                }
                const resetHidingRefHint = (event) => {
                    if (timeout) clearTimeout(timeout);
                    timeout = null;
                };
                link.addEventListener("mouseleave", startHidingRefHint);
                link.addEventListener("mouseenter", resetHidingRefHint);
                link.addEventListener("blur", startHidingRefHint);
                link.addEventListener("focus", resetHidingRefHint);
                refHint.addEventListener("mouseleave", startHidingRefHint);
                refHint.addEventListener("mouseenter", resetHidingRefHint);
                refHint.addEventListener("blur", startHidingRefHint);
                refHint.addEventListener("focus", resetHidingRefHint);

                refHint.teardownEventListeners = () => {
                    // remove event listeners
                    resetHidingRefHint();
                    link.removeEventListener("mouseleave", startHidingRefHint);
                    link.removeEventListener("mouseenter", resetHidingRefHint);
                    link.removeEventListener("blur", startHidingRefHint);
                    link.removeEventListener("focus", resetHidingRefHint);
                    refHint.removeEventListener("mouseleave", startHidingRefHint);
                    refHint.removeEventListener("mouseenter", resetHidingRefHint);
                    refHint.removeEventListener("blur", startHidingRefHint);
                    refHint.removeEventListener("focus", resetHidingRefHint);
                };
            }

            function positionRefHint(refHint) {
                const link = refHint.forLink;
                const linkPos = getBounds(link);
                refHint.style.top = linkPos.bottom + "px";
                refHint.style.left = linkPos.left + "px";

                const panelPos = refHint.getBoundingClientRect();
                const panelMargin = 8;
                const maxRight = document.body.parentNode.clientWidth - panelMargin;
                if (panelPos.right > maxRight) {
                    const overflowAmount = panelPos.right - maxRight;
                    const newLeft = Math.max(panelMargin, linkPos.left - overflowAmount);
                    refHint.style.left = newLeft + "px";
                }
            }

            // TODO: shared util
            // Returns the root-level absolute position {left and top} of element.
            function getBounds(el, relativeTo = document.body) {
                const relativeRect = relativeTo.getBoundingClientRect();
                const elRect = el.getBoundingClientRect();
                const top = elRect.top - relativeRect.top;
                const left = elRect.left - relativeRect.left;
                return {
                    top,
                    left,
                    bottom: top + elRect.height,
                    right: left + elRect.width,
                }
            }

            function showRefHintListener(e) {
                // If the target isn't in a link (or is a link),
                // just ignore it.
                let link = e.target.closest("a");
                if (!link) return;

                // If the target is in a ref-hint panel
                // (aka a link in the already-open one),
                // also just ignore it.
                if (link.closest(".ref-hint")) return;

                // Otherwise, show the panel for the link.
                showRefHint(link);
            }

            function hideAllHintsListener(e) {
                // If the click is inside a ref-hint panel, ignore it.
                if (e.target.closest(".ref-hint")) return;
                // Otherwise, close all the current panels.
                hideAllRefHints();
            }

            document.addEventListener("DOMContentLoaded", () => {
                document.body.addEventListener("mousedown", showRefHintListener);
                document.body.addEventListener("focus", showRefHintListener);

                document.body.addEventListener("click", hideAllHintsListener);
            });

            window.addEventListener("resize", () => {
                // Hide any open ref hint.
                hideAllRefHints();
            });
        }
    </script>
    <script src="/dropdown.js"></script>