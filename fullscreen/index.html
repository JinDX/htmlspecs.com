<!doctype html>
<html lang="zh-hans">

<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
    <meta content="#3c790a" name="theme-color">
    <meta content="light dark" name="color-scheme">
    <title>全屏 API 标准</title>
    <link crossorigin href="https://resources.whatwg.org/standard-shared-with-dev.css" rel="stylesheet">
    <link crossorigin href="https://resources.whatwg.org/standard.css" rel="stylesheet">
    <link crossorigin href="https://resources.whatwg.org/spec.css" rel="stylesheet">
    <link crossorigin href="https://resources.whatwg.org/logo-fullscreen.svg" rel="icon">
    <script crossorigin defer src="https://resources.whatwg.org/commit-snapshot-shortcut-key.js"></script>
    <meta content="Bikeshed version a1dabb26c, updated Mon Jun 17 15:00:44 2024 -0700" name="generator">
    <meta content="5a93198e4c58484dbc44385ec8a93cc39907506f" name="revision">
    <style>
        /* Boilerplate: style-dfn-panel */
        :root {
            --dfnpanel-bg: #ddd;
            --dfnpanel-text: var(--text);
            --dfnpanel-target-bg: #ffc;
            --dfnpanel-target-outline: orange;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --dfnpanel-bg: #222;
                --dfnpanel-text: var(--text);
                --dfnpanel-target-bg: #333;
                --dfnpanel-target-outline: silver;
            }
        }

        .dfn-panel {
            position: absolute;
            z-index: 35;
            width: 20em;
            width: 300px;
            height: auto;
            max-height: 500px;
            overflow: auto;
            padding: 0.5em 0.75em;
            font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
            background: var(--dfnpanel-bg);
            color: var(--dfnpanel-text);
            border: outset 0.2em;
            white-space: normal;
            /* in case it's moved into a pre */
        }

        .dfn-panel:not(.on) {
            display: none;
        }

        .dfn-panel * {
            margin: 0;
            padding: 0;
            text-indent: 0;
        }

        .dfn-panel>b {
            display: block;
        }

        .dfn-panel a {
            color: var(--dfnpanel-text);
        }

        .dfn-panel a:not(:hover) {
            text-decoration: none !important;
            border-bottom: none !important;
        }

        .dfn-panel a:focus {
            outline: 5px auto Highlight;
            outline: 5px auto -webkit-focus-ring-color;
        }

        .dfn-panel>b+b {
            margin-top: 0.25em;
        }

        .dfn-panel ul {
            padding: 0 0 0 1em;
            list-style: none;
        }

        .dfn-panel li a {
            max-width: calc(300px - 1.5em - 1em);
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .dfn-panel.activated {
            display: inline-block;
            position: fixed;
            left: 8px;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - 1.5em - .4em - .5em);
            max-height: 30vh;
            transition: left 1s ease-out, bottom 1s ease-out;
        }

        .dfn-panel .link-item:hover {
            text-decoration: underline;
        }

        .dfn-panel .link-item .copy-icon {
            opacity: 0;
        }

        .dfn-panel .link-item:hover .copy-icon,
        .dfn-panel .link-item .copy-icon:focus {
            opacity: 1;
        }

        .dfn-panel .copy-icon {
            display: inline-block;
            margin-right: 0.5em;
            width: 0.85em;
            height: 1em;
            border-radius: 3px;
            background-color: #ccc;
            cursor: pointer;
        }

        .dfn-panel .copy-icon .icon {
            width: 100%;
            height: 100%;
            background-color: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        .dfn-panel .copy-icon .icon::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: 1px solid black;
            background-color: #ccc;
            opacity: 0.25;
            transform: translate(3px, -3px);
        }

        .dfn-panel .copy-icon:active .icon::before {
            opacity: 1;
        }

        .dfn-paneled[role="button"] {
            cursor: help;
        }

        .highlighted {
            animation: target-fade 3s;
        }

        @keyframes target-fade {
            from {
                background-color: var(--dfnpanel-target-bg);
                outline: 5px solid var(--dfnpanel-target-outline);
            }

            to {
                color: var(--a-normal-text);
                background-color: transparent;
                outline: transparent;
            }
        }
    </style>
    <style>
        /* Boilerplate: style-mdn-anno */
        :root {
            --mdn-bg: #EEE;
            --mdn-shadow: #999;
            --mdn-nosupport-text: #ccc;
            --mdn-pass: green;
            --mdn-fail: red;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --mdn-bg: #222;
                --mdn-shadow: #444;
                --mdn-nosupport-text: #666;
                --mdn-pass: #690;
                --mdn-fail: #d22;
            }
        }

        .mdn-anno {
            background: var(--mdn-bg, #EEE);
            border-radius: .25em;
            box-shadow: 0 0 3px var(--mdn-shadow, #999);
            color: var(--text, black);
            font: 1em sans-serif;
            hyphens: none;
            max-width: min-content;
            overflow: hidden;
            padding: 0.2em;
            position: absolute;
            right: 0.3em;
            top: auto;
            white-space: nowrap;
            word-wrap: normal;
            z-index: 8;
        }

        .mdn-anno.unpositioned {
            display: none;
        }

        .mdn-anno.overlapping-main {
            opacity: .2;
            transition: opacity .1s;
        }

        .mdn-anno[open] {
            opacity: 1;
            z-index: 9;
            min-width: 9em;
        }

        .mdn-anno:hover {
            opacity: 1;
            outline: var(--text, black) 1px solid;
        }

        .mdn-anno>summary {
            font-weight: normal;
            text-align: right;
            cursor: pointer;
            display: block;
        }

        .mdn-anno>summary>.less-than-two-engines-flag {
            color: var(--mdn-fail);
            padding-right: 2px;
        }

        .mdn-anno>summary>.all-engines-flag {
            color: var(--mdn-pass);
            padding-right: 2px;
        }

        .mdn-anno>summary>span {
            color: #fff;
            background-color: #000;
            font-weight: normal;
            font-family: zillaslab, Palatino, "Palatino Linotype", serif;
            padding: 2px 3px 0px 3px;
            line-height: 1.3em;
            vertical-align: top;
        }

        .mdn-anno>.feature {
            margin-top: 20px;
        }

        .mdn-anno>.feature:not(:first-of-type) {
            border-top: 1px solid #999;
            margin-top: 6px;
            padding-top: 2px;
        }

        .mdn-anno>.feature>.less-than-two-engines-text {
            color: var(--mdn-fail);
        }

        .mdn-anno>.feature>.all-engines-text {
            color: var(--mdn-pass);
        }

        .mdn-anno>.feature>p {
            font-size: .75em;
            margin-top: 6px;
            margin-bottom: 0;
        }

        .mdn-anno>.feature>p+p {
            margin-top: 3px;
        }

        .mdn-anno>.feature>.support {
            display: block;
            font-size: 0.6em;
            margin: 0;
            padding: 0;
            margin-top: 2px;
        }

        .mdn-anno>.feature>.support+div {
            padding-top: 0.5em;
        }

        .mdn-anno>.feature>.support>hr {
            display: block;
            border: none;
            border-top: 1px dotted #999;
            padding: 3px 0px 0px 0px;
            margin: 2px 3px 0px 3px;
        }

        .mdn-anno>.feature>.support>hr::before {
            content: "";
        }

        .mdn-anno>.feature>.support>span {
            padding: 0.2em 0;
            display: block;
            display: table;
        }

        .mdn-anno>.feature>.support>span.no {
            color: var(--mdn-nosupport-text);
            filter: grayscale(100%);
        }

        .mdn-anno>.feature>.support>span.no::before {
            opacity: 0.5;
        }

        .mdn-anno>.feature>.support>span:first-of-type {
            padding-top: 0.5em;
        }

        .mdn-anno>.feature>.support>span>span {
            padding: 0 0.5em;
            display: table-cell;
        }

        .mdn-anno>.feature>.support>span>span:first-child {
            width: 100%;
        }

        .mdn-anno>.feature>.support>span>span:last-child {
            width: 100%;
            white-space: pre;
            padding: 0;
        }

        .mdn-anno>.feature>.support>span::before {
            content: ' ';
            display: table-cell;
            min-width: 1.5em;
            height: 1.5em;
            background: no-repeat center center;
            background-size: contain;
            text-align: right;
            font-size: 0.75em;
            font-weight: bold;
        }

        .mdn-anno>.feature>.support>.chrome_android::before {
            background-image: url(https://resources.whatwg.org/browser-logos/chrome.svg);
        }

        .mdn-anno>.feature>.support>.firefox_android::before {
            background-image: url(https://resources.whatwg.org/browser-logos/firefox.png);
        }

        .mdn-anno>.feature>.support>.chrome::before {
            background-image: url(https://resources.whatwg.org/browser-logos/chrome.svg);
        }

        .mdn-anno>.feature>.support>.edge_blink::before {
            background-image: url(https://resources.whatwg.org/browser-logos/edge.svg);
        }

        .mdn-anno>.feature>.support>.edge::before {
            background-image: url(https://resources.whatwg.org/browser-logos/edge_legacy.svg);
        }

        .mdn-anno>.feature>.support>.firefox::before {
            background-image: url(https://resources.whatwg.org/browser-logos/firefox.png);
        }

        .mdn-anno>.feature>.support>.ie::before {
            background-image: url(https://resources.whatwg.org/browser-logos/ie.png);
        }

        .mdn-anno>.feature>.support>.safari_ios::before {
            background-image: url(https://resources.whatwg.org/browser-logos/safari-ios.svg);
        }

        .mdn-anno>.feature>.support>.nodejs::before {
            background-image: url(https://nodejs.org/static/images/favicons/favicon.ico);
        }

        .mdn-anno>.feature>.support>.opera_android::before {
            background-image: url(https://resources.whatwg.org/browser-logos/opera.svg);
        }

        .mdn-anno>.feature>.support>.opera::before {
            background-image: url(https://resources.whatwg.org/browser-logos/opera.svg);
        }

        .mdn-anno>.feature>.support>.safari::before {
            background-image: url(https://resources.whatwg.org/browser-logos/safari.png);
        }

        .mdn-anno>.feature>.support>.samsunginternet_android::before {
            background-image: url(https://resources.whatwg.org/browser-logos/samsung.svg);
        }

        .mdn-anno>.feature>.support>.webview_android::before {
            background-image: url(https://resources.whatwg.org/browser-logos/android-webview.png);
        }

        .name-slug-mismatch {
            color: red;
        }

        .caniuse-status:hover {
            z-index: 9;
        }

        /* dt, li, .issue, .note, and .example are "position: relative", so to put annotation at right margin, must move to right of containing block */
        ;

        .h-entry:not(.status-LS) dt>.mdn-anno,
        .h-entry:not(.status-LS) li>.mdn-anno,
        .h-entry:not(.status-LS) .issue>.mdn-anno,
        .h-entry:not(.status-LS) .note>.mdn-anno,
        .h-entry:not(.status-LS) .example>.mdn-anno {
            right: -6.7em;
        }

        .h-entry p+.mdn-anno {
            margin-top: 0;
        }

        h2+.mdn-anno.after {
            margin: -48px 0 0 0;
        }

        h3+.mdn-anno.after {
            margin: -46px 0 0 0;
        }

        h4+.mdn-anno.after {
            margin: -42px 0 0 0;
        }

        h5+.mdn-anno.after {
            margin: -40px 0 0 0;
        }

        h6+.mdn-anno.after {
            margin: -40px 0 0 0;
        }
    </style>
    <style>
        /* Boilerplate: style-ref-hints */
        :root {
            --ref-hint-bg: #ddd;
            --ref-hint-text: var(--text);
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --ref-hint-bg: #222;
                --ref-hint-text: var(--text);
            }
        }

        .ref-hint {
            display: inline-block;
            position: absolute;
            z-index: 35;
            width: 20em;
            width: 300px;
            height: auto;
            max-height: 500px;
            overflow: auto;
            padding: 0.5em 0.5em;
            font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
            background: var(--ref-hint-bg);
            color: var(--ref-hint-text);
            border: outset 0.2em;
            white-space: normal;
            /* in case it's moved into a pre */
        }

        .ref-hint * {
            margin: 0;
            padding: 0;
            text-indent: 0;
        }

        .ref-hint ul {
            padding: 0 0 0 1em;
            list-style: none;
        }
    </style>
    <style>
        /* Boilerplate: style-var-click-highlighting */
        /*
Colors were chosen in Lab using https://nixsensor.com/free-color-converter/
D50 2deg illuminant, L in [0,100], a and b in [-128, 128]
0 = lab(85,0,85)
1 = lab(85,80,30)
2 = lab(85,-40,40)
3 = lab(85,-50,0)
4 = lab(85,5,15)
5 = lab(85,-10,-50)
6 = lab(85,35,-15)
*/
        [data-algorithm] var {
            cursor: pointer;
        }

        var[data-var-color="0"] {
            background-color: #F4D200;
            box-shadow: 0 0 0 2px #F4D200;
        }

        var[data-var-color="1"] {
            background-color: #FF87A2;
            box-shadow: 0 0 0 2px #FF87A2;
        }

        var[data-var-color="2"] {
            background-color: #96E885;
            box-shadow: 0 0 0 2px #96E885;
        }

        var[data-var-color="3"] {
            background-color: #3EEED2;
            box-shadow: 0 0 0 2px #3EEED2;
        }

        var[data-var-color="4"] {
            background-color: #EACFB6;
            box-shadow: 0 0 0 2px #EACFB6;
        }

        var[data-var-color="5"] {
            background-color: #82DDFF;
            box-shadow: 0 0 0 2px #82DDFF;
        }

        var[data-var-color="6"] {
            background-color: #FFBCF2;
            box-shadow: 0 0 0 2px #FFBCF2;
        }
    </style>

<body class="h-entry status-LS">
    <div class="head">
        <a class="logo" href="https://whatwg.org/"> <img alt="WHATWG" class="darkmode-aware" crossorigin height="100"
                src="https://resources.whatwg.org/logo-fullscreen.svg"> </a>
        <hgroup>
            <h1 class="p-name no-ref" id="title">全屏 API</h1>
            <p id="subtitle">现行标准 — 最后更新 <time class="dt-updated" datetime="2024-09-21">2024年9月21日</time> </p>
        </hgroup>
        <div data-fill-with="spec-metadata">
            <dl>
                <dt>参与：
                <dd><a href="https://github.com/whatwg/fullscreen">GitHub whatwg/fullscreen</a> (<a
                        href="https://github.com/whatwg/fullscreen/issues/new/choose">新建 issue</a>, <a
                        href="https://github.com/whatwg/fullscreen/issues">打开的 issues</a>)
                <dd><a href="https://whatwg.org/chat">在 Matrix 上聊天</a>
                <dt>提交：
                <dd><a href="https://github.com/whatwg/fullscreen/commits">GitHub whatwg/fullscreen/commits</a>
                <dd><a href="/commit-snapshots/5a93198e4c58484dbc44385ec8a93cc39907506f/"
                        id="commit-snapshot-link">该提交时的快照</a>
                <dd><a href="https://twitter.com/fullscreenapi">@fullscreenapi</a>
                <dt>测试：
                <dd><a href="https://github.com/web-platform-tests/wpt/tree/master/fullscreen">web-platform-tests
                        fullscreen/</a> (<a
                        href="https://github.com/web-platform-tests/wpt/labels/fullscreen">正在进行的工作</a>)
                <dt>翻译 <small>(非规范性)</small>：
                <dd><span title="Japanese"><a href="https://triple-underscore.github.io/fullscreen-ja.html"
                            hreflang="ja" lang="ja" rel="alternate">日本語</a></span>
                <dd><span title="Simplified Chinese"><a href="https://htmlspecs.com/fullscreen/" hreflang="zh-hans"
                            lang="zh-hans" rel="alternate">简体中文</a></span>
            </dl>
        </div>
        <div data-fill-with="warning"></div>
    </div>
    <div class="p-summary" data-fill-with="abstract">
        <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">摘要</span></h2>
        <p>全屏 API 标准定义了一个 API，允许元素以全屏模式显示。</p>
    </div>
    <nav data-fill-with="table-of-contents" id="toc">
        <h2 class="no-num no-toc no-ref" id="contents">目录</h2>
        <ol class="toc" role="directory">
            <li><a href="#terminology"><span class="secno">1</span> <span class="content">术语</span></a>
            <li><a href="#model"><span class="secno">2</span> <span class="content">模型</span></a>
            <li><a href="#api"><span class="secno">3</span> <span class="content">API</span></a>
            <li><a href="#ui"><span class="secno">4</span> <span class="content">用户界面</span></a>
            <li>
                <a href="#rendering"><span class="secno">5</span> <span class="content">渲染</span></a>
                <ol class="toc">
                    <li><a href="#:fullscreen-pseudo-class"><span class="secno">5.1</span> <span
                                class="content"><code>:fullscreen</code> 伪类</span></a>
                    <li><a href="#user-agent-level-style-sheet-defaults"><span class="secno">5.2</span> <span
                                class="content">用户代理级别样式表默认值</span></a>
                </ol>
            <li><a href="#permissions-policy-integration"><span class="secno">6</span> <span
                        class="content">权限策略集成</span></a>
            <li><a href="#security-and-privacy-considerations"><span class="secno">7</span> <span
                        class="content">安全与隐私注意事项</span></a>
            <li><a href="#old-links"><span class="secno"></span> <span class="content">先前托管的定义</span></a>
            <li><a href="#acknowledgments"><span class="secno"></span> <span class="content">致谢</span></a>
            <li><a href="#ipr"><span class="secno"></span> <span class="content">知识产权</span></a>
            <li>
                <a href="#index"><span class="secno"></span> <span class="content">索引</span></a>
                <ol class="toc">
                    <li><a href="#index-defined-here"><span class="secno"></span> <span
                                class="content">本规范定义的术语</span></a>
                    <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span
                                class="content">引用中定义的术语</span></a>
                </ol>
            <li>
                <a href="#references"><span class="secno"></span> <span class="content">参考资料</span></a>
                <ol class="toc">
                    <li><a href="#normative"><span class="secno"></span> <span class="content">规范性引用</span></a>
                </ol>
            <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL 索引</span></a>
        </ol>
    </nav>
    <main>
        <h2 class="heading settled" data-level="1" id="terminology"><span class="secno">1. </span><span
                class="content">术语</span><a class="self-link" href="#terminology"></a></h2>
        <p>本规范依赖于 Infra 标准。<a data-link-type="biblio" href="#biblio-infra" title="Infra Standard">[INFRA]</a></p>
        <p>本规范中使用的大多数术语来自 CSS、DOM、HTML 和 Web IDL。<a data-link-type="biblio" href="#biblio-css"
                title="Cascading Style Sheets Level 2 Revision 1 (CSS 2.1) Specification">[CSS]</a>
            <a data-link-type="biblio" href="#biblio-dom" title="DOM Standard">[DOM]</a> <a data-link-type="biblio"
                href="#biblio-html" title="HTML Standard">[HTML]</a> <a data-link-type="biblio" href="#biblio-webidl"
                title="Web IDL Standard">[WEBIDL]</a>
        </p>
        <h2 class="heading settled" data-level="2" id="model"><span class="secno">2. </span><span
                class="content">模型</span><a class="self-link" href="#model"></a></h2>
        <p>所有<a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-element"
                id="ref-for-concept-element">元素</a>都有一个相关的<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="fullscreen-flag">全屏标志</dfn>。除非另有说明，否则该标志为未设置。</p>
        <p>所有<code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element" id="ref-for-the-iframe-element">iframe</a></code><a
                data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-element"
                id="ref-for-concept-element①">元素</a>都有一个相关的<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="iframe-fullscreen-flag">iframe 全屏标志</dfn>。除非另有说明，否则该标志为未设置。</p>
        <p>所有<a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document"
                id="ref-for-concept-document">文档</a>都有一个相关的<dfn class="dfn-paneled" data-dfn-type="dfn" data-export
                id="fullscreen-element">全屏元素</dfn>。<a data-link-type="dfn" href="#fullscreen-element"
                id="ref-for-fullscreen-element">全屏元素</a>
            是 <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document"
                id="ref-for-concept-document①">文档</a>中 <a data-link-type="dfn"
                href="https://drafts.csswg.org/css-position-4/#document-top-layer"
                id="ref-for-document-top-layer">顶层</a> 中置顶的<a data-link-type="dfn"
                href="https://dom.spec.whatwg.org/#concept-element" id="ref-for-concept-element②">元素</a>，其 <a
                data-link-type="dfn" href="#fullscreen-flag" id="ref-for-fullscreen-flag">全屏标志</a>已设置；否则为 null。</p>
        <p>所有<a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document"
                id="ref-for-concept-document②">文档</a>都有一个相关的<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="list-of-pending-fullscreen-events">待处理全屏事件列表</dfn>，
            它是一个包含 (<a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string">字符串</a>, <a
                data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-element"
                id="ref-for-concept-element③">元素</a>)<a data-link-type="dfn" href="https://infra.spec.whatwg.org/#tuple"
                id="ref-for-tuple">元组</a> 的<a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set"
                id="ref-for-ordered-set">有序集合</a>。初始为空。</p>
        <p>要<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="fullscreen-an-element">全屏显示
                <var>element</var></dfn>：</p>
        <ol>
            <li>
                <p>将 <var>hideUntil</var> 设为运行<a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/popover.html#topmost-popover-ancestor"
                        id="ref-for-topmost-popover-ancestor">最顶层的弹出元素祖先</a>的结果，给定 <var>element</var>，null 和 false。</p>
            <li>
                <p>如果 <var>hideUntil</var> 为 null，则将 <var>hideUntil</var> 设为 <var>element</var> 的<span>节点文档</span>。</p>
            <li>
                <p>运行<a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/popover.html#hide-all-popovers-until"
                        id="ref-for-hide-all-popovers-until">隐藏所有弹出元素直到</a>，给定 <var>hideUntil</var>，false 和 true。</p>
            <li>
                <p>设置 <var>element</var> 的<a data-link-type="dfn" href="#fullscreen-flag"
                        id="ref-for-fullscreen-flag①">全屏标志</a>。</p>
            <li>
                <p><a data-link-type="dfn"
                        href="https://drafts.csswg.org/css-position-4/#remove-an-element-from-the-top-layer-immediately"
                        id="ref-for-remove-an-element-from-the-top-layer-immediately">立即从顶层移除</a>给定 <var>element</var>。
                </p>
            <li><a data-link-type="dfn" href="https://drafts.csswg.org/css-position-4/#add-an-element-to-the-top-layer"
                    id="ref-for-add-an-element-to-the-top-layer">添加到顶层</a>给定 <var>element</var>。
        </ol>
        <p>要<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="unfullscreen-an-element">取消全屏显示
                <var>element</var></dfn>，取消设置 <var>element</var> 的<a data-link-type="dfn" href="#fullscreen-flag"
                id="ref-for-fullscreen-flag②">全屏标志</a>和<a data-link-type="dfn" href="#iframe-fullscreen-flag"
                id="ref-for-iframe-fullscreen-flag">iframe 全屏标志</a>（如果有），并<a data-link-type="dfn"
                href="https://drafts.csswg.org/css-position-4/#remove-an-element-from-the-top-layer-immediately"
                id="ref-for-remove-an-element-from-the-top-layer-immediately①">立即从顶层移除</a>给定 <var>element</var>。</p>
        <p>要<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="unfullscreen-a-document">取消全屏显示
                <var>document</var></dfn>，<a data-link-type="dfn" href="#unfullscreen-an-element"
                id="ref-for-unfullscreen-an-element">取消全屏显示</a>所有在 <var>document</var> 的 <a data-link-type="dfn"
                href="https://drafts.csswg.org/css-position-4/#document-top-layer"
                id="ref-for-document-top-layer①">顶层</a> 中的<a data-link-type="dfn"
                href="https://dom.spec.whatwg.org/#concept-element" id="ref-for-concept-element④">元素</a>，其 <a
                data-link-type="dfn" href="#fullscreen-flag" id="ref-for-fullscreen-flag③">全屏标志</a>已设置。
        </p>
        <hr>
        <div class="algorithm" data-algorithm="fully exit fullscreen">
            <p>要<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="fully-exit-fullscreen">完全退出全屏</dfn>给定 <a
                    data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document"
                    id="ref-for-concept-document③">文档</a> <var>document</var>，运行以下步骤：</p>
            <ol>
                <li>
                    <p>如果 <var>document</var> 的 <a data-link-type="dfn" href="#fullscreen-element"
                            id="ref-for-fullscreen-element①">全屏元素</a> 为 null，则终止这些步骤。</p>
                <li>
                    <p><a data-link-type="dfn" href="#unfullscreen-an-element"
                            id="ref-for-unfullscreen-an-element①">取消全屏显示元素</a>，这些元素的<a data-link-type="dfn"
                            href="#fullscreen-flag" id="ref-for-fullscreen-flag④">全屏标志</a>已设置，在 <var>document</var> 的<a
                            data-link-type="dfn" href="https://drafts.csswg.org/css-position-4/#document-top-layer"
                            id="ref-for-document-top-layer②">顶层</a>中，但不包括 <var>document</var> 的 <a data-link-type="dfn"
                            href="#fullscreen-element" id="ref-for-fullscreen-element②">全屏元素</a>。</p>
                <li>
                    <p><a data-link-type="dfn" href="#exit-fullscreen"
                            id="ref-for-exit-fullscreen">退出全屏</a><var>document</var>。</p>
            </ol>
        </div>
        <div class="algorithm" data-algorithm="fullscreen removing steps">
            <p id="removing-steps">每当运行 <a data-link-type="dfn"
                    href="https://dom.spec.whatwg.org/#concept-node-remove-ext"
                    id="ref-for-concept-node-remove-ext">移除步骤</a>时，给定一个 <var>removedNode</var>，运行以下步骤：</p>
            <ol>
                <li>
                    <p>将 <var>document</var> 设为 <var>removedNode</var> 的 <a data-link-type="dfn"
                            href="https://dom.spec.whatwg.org/#concept-node-document"
                            id="ref-for-concept-node-document">节点文档</a>。</p>
                <li>
                    <p>将 <var>nodes</var> 设为 <var>removedNode</var> 的 <a data-link-type="dfn"
                            href="https://dom.spec.whatwg.org/#concept-shadow-including-inclusive-descendant"
                            id="ref-for-concept-shadow-including-inclusive-descendant">包括阴影在内的包含后代</a>，其<a
                            data-link-type="dfn" href="#fullscreen-flag" id="ref-for-fullscreen-flag⑤">全屏标志</a>已设置，按<a
                            data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-shadow-including-tree-order"
                            id="ref-for-concept-shadow-including-tree-order">包括阴影在内的树顺序</a>排列。</p>
                <li>
                    <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate"
                            id="ref-for-list-iterate">遍历</a><var>nodes</var>中的每个<var>node</var>：</p>
                    <ol>
                        <li>
                            <p>如果 <var>node</var> 是 <var>document</var> 的<a data-link-type="dfn"
                                    href="#fullscreen-element" id="ref-for-fullscreen-element③">全屏元素</a>，<a
                                    data-link-type="dfn" href="#exit-fullscreen" id="ref-for-exit-fullscreen①">退出全屏</a>
                                <var>document</var>。
                            </p>
                        <li>
                            <p>否则，<a data-link-type="dfn" href="#unfullscreen-an-element"
                                    id="ref-for-unfullscreen-an-element②">取消全屏显示<var>node</var></a>。</p>
                        <li>
                            <p>如果 <var>document</var> 的 <a data-link-type="dfn"
                                    href="https://drafts.csswg.org/css-position-4/#document-top-layer"
                                    id="ref-for-document-top-layer③">顶层</a> <a data-link-type="dfn"
                                    href="https://infra.spec.whatwg.org/#list-contain" id="ref-for-list-contain">包含</a>
                                <var>node</var>，<a data-link-type="dfn"
                                    href="https://drafts.csswg.org/css-position-4/#remove-an-element-from-the-top-layer-immediately"
                                    id="ref-for-remove-an-element-from-the-top-layer-immediately②">立即从顶层移除</a>给定
                                <var>node</var>。
                            </p>
                            <p class="note" role="note">其他规范可以在<a data-link-type="dfn"
                                    href="https://drafts.csswg.org/css-position-4/#document-top-layer"
                                    id="ref-for-document-top-layer④">顶层</a>中添加和移除元素，因此 <var>node</var> 可能不是
                                <var>document</var> 的<a data-link-type="dfn" href="#fullscreen-element"
                                    id="ref-for-fullscreen-element④">全屏元素</a>。例如，<var>node</var>
                                可能是一个打开的<code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/interactive-elements.html#the-dialog-element" id="ref-for-the-dialog-element">对话框</a></code>元素。
                            </p>
                    </ol>
            </ol>
        </div>
        <p>每当运行<a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/document-lifecycle.html#unloading-document-cleanup-steps"
                id="ref-for-unloading-document-cleanup-steps">卸载文档清理步骤</a>时，给定一个<var>document</var>，<a
                data-link-type="dfn" href="#fully-exit-fullscreen" id="ref-for-fully-exit-fullscreen">完全退出全屏</a>
            <var>document</var>。
        </p>
        <hr>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="fullscreen-is-supported">支持全屏</dfn>，如果没有先前建立的用户偏好、安全风险或平台限制。</p>
        <hr>
        <div class="algorithm" data-algorithm="run the fullscreen steps">
            <p>要<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="run-the-fullscreen-steps">运行全屏步骤</dfn>给定
                <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document"
                    id="ref-for-concept-document④">文档</a><var>document</var>，运行这些步骤：
            </p>
            <ol>
                <li>
                    <p>将 <var>pendingEvents</var> 设为 <var>document</var> 的 <a data-link-type="dfn"
                            href="#list-of-pending-fullscreen-events"
                            id="ref-for-list-of-pending-fullscreen-events">待处理全屏事件列表</a>。</p>
                <li>
                    <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-empty"
                            id="ref-for-list-empty">清空</a> <var>document</var> 的 <a data-link-type="dfn"
                            href="#list-of-pending-fullscreen-events"
                            id="ref-for-list-of-pending-fullscreen-events①">待处理全屏事件列表</a>。</p>
                <li>
                    <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate"
                            id="ref-for-list-iterate①">遍历</a> <var>pendingEvents</var> 中的每个 (<var>type</var>,
                        <var>element</var>)：
                    </p>
                    <ol>
                        <li>
                            <p>将 <var>target</var> 设为 <var>element</var>，如果 <var>element</var> 是<a data-link-type="dfn"
                                    href="https://dom.spec.whatwg.org/#connected" id="ref-for-connected">已连接</a>并且其<a
                                    data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document"
                                    id="ref-for-concept-node-document①">节点文档</a>是 <var>document</var>，否则将
                                <var>target</var> 设为 <var>document</var>。
                            </p>
                        <li>
                            <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire"
                                    id="ref-for-concept-event-fire">触发一个事件</a>，名为 <var>type</var>，其<code
                                    class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-bubbles" id="ref-for-dom-event-bubbles">bubbles</a></code>和<code
                                    class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-composed" id="ref-for-dom-event-composed">composed</a></code>属性设置为
                                true， 在 <var>target</var> 上。</p>
                    </ol>
            </ol>
            <p class="note" role="note">这些步骤与 HTML 中定义的<a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/webappapis.html#event-loop"
                    id="ref-for-event-loop">事件循环</a>集成。<a data-link-type="biblio" href="#biblio-html"
                    title="HTML Standard">[HTML]</a></p>
        </div>

        <h2 class="heading settled" data-level="3" id="api"><span class="secno">3. </span><span
                class="content">API</span><a class="self-link" href="#api"></a></h2>
        <pre class="idl highlight def"><c- b>enum</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="enum" data-export id="enumdef-fullscreennavigationui"><code><c- g>FullscreenNavigationUI</c-></code></dfn> {
  <a class="idl-code" data-link-type="enum-value" href="#dom-fullscreennavigationui-auto" id="ref-for-dom-fullscreennavigationui-auto"><c- s>"auto"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-fullscreennavigationui-show" id="ref-for-dom-fullscreennavigationui-show"><c- s>"show"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-fullscreennavigationui-hide" id="ref-for-dom-fullscreennavigationui-hide"><c- s>"hide"</c-></a>
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-fullscreenoptions"><code><c- g>FullscreenOptions</c-></code></dfn> {
  <a data-link-type="idl-name" href="#enumdef-fullscreennavigationui" id="ref-for-enumdef-fullscreennavigationui"><c- n>FullscreenNavigationUI</c-></a> <dfn class="dfn-paneled idl-code" data-default="&quot;auto&quot;" data-dfn-for="FullscreenOptions" data-dfn-type="dict-member" data-export data-type="FullscreenNavigationUI" id="dom-fullscreenoptions-navigationui"><code><c- g>navigationUI</c-></code></dfn> = "auto";
};

<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://dom.spec.whatwg.org/#element" id="ref-for-element"><c- g>Element</c-></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined"><c- b>undefined</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-element-requestfullscreen" id="ref-for-dom-element-requestfullscreen"><c- g>requestFullscreen</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-fullscreenoptions" id="ref-for-dictdef-fullscreenoptions"><c- n>FullscreenOptions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Element/requestFullscreen(options), Element/requestFullscreen()" data-dfn-type="argument" data-export id="dom-element-requestfullscreen-options-options"><code><c- g>options</c-></code></dfn> = {});

  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" id="ref-for-eventhandler"><c- n>EventHandler</c-></a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#handler-document-onfullscreenchange" id="ref-for-handler-document-onfullscreenchange"><c- g>onfullscreenchange</c-></a>;
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" id="ref-for-eventhandler①"><c- n>EventHandler</c-></a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#handler-document-onfullscreenerror" id="ref-for-handler-document-onfullscreenerror"><c- g>onfullscreenerror</c-></a>;
};

<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://dom.spec.whatwg.org/#document" id="ref-for-document"><c- g>Document</c-></a> {
  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#LegacyLenientSetter" id="ref-for-LegacyLenientSetter"><c- g>LegacyLenientSetter</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-document-fullscreenenabled" id="ref-for-dom-document-fullscreenenabled"><c- g>fullscreenEnabled</c-></a>;
  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#LegacyLenientSetter" id="ref-for-LegacyLenientSetter①"><c- g>LegacyLenientSetter</c-></a>, <a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Unscopable" id="ref-for-Unscopable"><c- g>Unscopable</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean①"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-document-fullscreen" id="ref-for-dom-document-fullscreen"><c- g>fullscreen</c-></a>; // historical

  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise①"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined①"><c- b>undefined</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-document-exitfullscreen" id="ref-for-dom-document-exitfullscreen"><c- g>exitFullscreen</c-></a>();

  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" id="ref-for-eventhandler②"><c- n>EventHandler</c-></a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#handler-document-onfullscreenchange" id="ref-for-handler-document-onfullscreenchange①"><c- g>onfullscreenchange</c-></a>;
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" id="ref-for-eventhandler③"><c- n>EventHandler</c-></a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#handler-document-onfullscreenerror" id="ref-for-handler-document-onfullscreenerror①"><c- g>onfullscreenerror</c-></a>;
};

<c- b>partial</c-> <c- b>interface</c-> <c- b>mixin</c-> <a class="idl-code" data-link-type="interface" href="https://dom.spec.whatwg.org/#documentorshadowroot" id="ref-for-documentorshadowroot"><c- g>DocumentOrShadowRoot</c-></a> {
  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#LegacyLenientSetter" id="ref-for-LegacyLenientSetter②"><c- g>LegacyLenientSetter</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element" id="ref-for-element①"><c- n>Element</c-></a>? <a class="idl-code" data-link-type="attribute" data-readonly data-type="Element?" href="#dom-document-fullscreenelement" id="ref-for-dom-document-fullscreenelement"><c- g>fullscreenElement</c-></a>;
};
</pre>
        <dl class="domintro">
            <dt><code><var>promise</var> = <var>element</var> . <a class="idl-code" data-link-type="method" href="#dom-element-requestfullscreen" id="ref-for-dom-element-requestfullscreen①">requestFullscreen([<var>options</var>])</a></code>
            <dd>
                将 <var>element</var> 显示为全屏，并在完成后解析 <var>promise</var>。
                <p>当提供时，<var>options</var> 的 <code
                        class="idl"><a data-link-type="idl" href="#dom-fullscreenoptions-navigationui" id="ref-for-dom-fullscreenoptions-navigationui">navigationUI</a></code>
                    成员指示是否希望在全屏显示时显示导航 UI。如果设置为 "<code
                        class="idl"><a data-link-type="idl" href="#dom-fullscreennavigationui-show" id="ref-for-dom-fullscreennavigationui-show①">show</a></code>"，
                    则表示优先考虑导航简便性，而不是屏幕空间；如果设置为 "<code
                        class="idl"><a data-link-type="idl" href="#dom-fullscreennavigationui-hide" id="ref-for-dom-fullscreennavigationui-hide①">hide</a></code>"，
                    则更倾向于更多的屏幕空间。用户代理始终可以优先考虑用户偏好，而不是应用程序的偏好。默认值 "<code
                        class="idl"><a data-link-type="idl" href="#dom-fullscreennavigationui-auto" id="ref-for-dom-fullscreennavigationui-auto①">auto</a></code>"
                    表示没有应用程序偏好。</p>
            <dt><code><var>document</var> . <code class="idl"><a data-link-type="idl" href="#dom-document-fullscreenenabled" id="ref-for-dom-document-fullscreenenabled①">fullscreenEnabled</a></code></code>
            <dd>
                <p>如果 <var>document</var> 具有显示<a data-link-type="dfn"
                        href="https://dom.spec.whatwg.org/#concept-element" id="ref-for-concept-element⑤">元素</a>
                    全屏的能力，并且<a data-link-type="dfn" href="#fullscreen-is-supported"
                        id="ref-for-fullscreen-is-supported">支持全屏</a>，则返回 true，否则返回 false。 </p>
            <dt><code><var>promise</var> = <var>document</var> . <code class="idl"><a data-link-type="idl" href="#dom-document-exitfullscreen" id="ref-for-dom-document-exitfullscreen①">exitFullscreen()</a></code></code>
            <dd>
                <p>停止 <var>document</var> 的<a data-link-type="dfn" href="#fullscreen-element"
                        id="ref-for-fullscreen-element⑤">全屏元素</a>的全屏显示，并在完成后解析 <var>promise</var>。</p>
            <dt><code><var>document</var> . <code class="idl"><a data-link-type="idl" href="#dom-document-fullscreenelement" id="ref-for-dom-document-fullscreenelement①">fullscreenElement</a></code></code>
            <dd>
                <p>返回 <var>document</var> 的<a data-link-type="dfn" href="#fullscreen-element"
                        id="ref-for-fullscreen-element⑥">全屏元素</a>。</p>
            <dt><code><var>shadowroot</var> . <code class="idl"><a data-link-type="idl" href="#dom-document-fullscreenelement" id="ref-for-dom-document-fullscreenelement②">fullscreenElement</a></code></code>
            <dd>
                <p>返回 <var>shadowroot</var> 的<a data-link-type="dfn" href="#fullscreen-element"
                        id="ref-for-fullscreen-element⑦">全屏元素</a>。</p>
        </dl>
        <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-element"
                id="ref-for-concept-element⑥">元素</a><var>element</var>的<dfn class="dfn-paneled" data-dfn-type="dfn"
                data-noexport id="fullscreen-element-ready-check">全屏元素就绪检查</dfn>返回 true 如果以下所有条件都为 true，否则返回 false：
        </p>
        <ul>
            <li>
                <p><var>element</var> 是<a data-link-type="dfn" href="https://dom.spec.whatwg.org/#connected"
                        id="ref-for-connected①">已连接的</a>。</p>
            <li>
                <p><var>element</var> 的<a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document"
                        id="ref-for-concept-node-document②">节点文档</a>被<a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#allowed-to-use"
                        id="ref-for-allowed-to-use">允许使用</a>
                    "<code><a data-link-type="dfn" href="#fullscreen-feature" id="ref-for-fullscreen-feature">全屏</a></code>"
                    功能。</p>
            <li>
                <p><var>element</var> 的<a data-link-type="dfn"
                        href="https://dom.spec.whatwg.org/#concept-element-namespace"
                        id="ref-for-concept-element-namespace">命名空间</a>不是<a data-link-type="dfn"
                        href="https://infra.spec.whatwg.org/#html-namespace" id="ref-for-html-namespace">HTML
                        命名空间</a>，或 <var>element</var> 的<a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/popover.html#popover-visibility-state"
                        id="ref-for-popover-visibility-state">弹出框可见性状态</a>为<a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/popover.html#popover-hidden-state"
                        id="ref-for-popover-hidden-state">隐藏</a>。</p>
        </ul>
        <div class="algorithm" data-algorithm="requestFullscreen(options)">
            <p><dfn class="dfn-paneled idl-code" data-dfn-for="Element" data-dfn-type="method" data-export
                    data-lt="requestFullscreen(options)|requestFullscreen()"
                    id="dom-element-requestfullscreen"><code>requestFullscreen(<var>options</var>)</code></dfn>方法的步骤如下：
            </p>
            <ol>
                <li>
                    <p>将 <var>pendingDoc</var> 设为<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this"
                            id="ref-for-this">this</a>的<a data-link-type="dfn"
                            href="https://dom.spec.whatwg.org/#concept-node-document"
                            id="ref-for-concept-node-document③">节点文档</a>。</p>
                <li>
                    <p>将 <var>promise</var> 设为一个新的 promise。</p>
                <li>
                    <p>如果 <var>pendingDoc</var> 不是<a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active"
                            id="ref-for-fully-active">完全活动的</a>，则使用 <code
                            class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror">TypeError</a></code>
                        异常拒绝 <var>promise</var>，并返回 <var>promise</var>。</p>
                <li>
                    <p>将 <var>error</var> 设为 false。</p>
                <li>
                    <p>如果以下任一条件为 false，则将 <var>error</var> 设置为 true：</p>
                    <ul>
                        <li>
                            <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this"
                                    id="ref-for-this①">this</a> 的<a data-link-type="dfn"
                                    href="https://dom.spec.whatwg.org/#concept-element-namespace"
                                    id="ref-for-concept-element-namespace①">命名空间</a>是<a data-link-type="dfn"
                                    href="https://infra.spec.whatwg.org/#html-namespace"
                                    id="ref-for-html-namespace①">HTML 命名空间</a>，或者<a data-link-type="dfn"
                                    href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②">this</a> 是一个<a
                                    href="https://www.w3.org/TR/SVG11/struct.html#SVGElement">SVG <code>svg</code></a>
                                或 <a href="https://www.w3.org/Math/draft-spec/chapter2.html#interf.toplevel">MathML
                                    <code>math</code></a> 元素。<a data-link-type="biblio" href="#biblio-svg"
                                    title="Scalable Vector Graphics (SVG) 1.1 (Second Edition)">[SVG]</a> <a
                                    data-link-type="biblio" href="#biblio-mathml"
                                    title="Mathematical Markup Language (MathML™) 1.01 Specification">[MATHML]</a></p>
                        <li>
                            <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this"
                                    id="ref-for-this③">this</a> 不是
                                <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/interactive-elements.html#the-dialog-element" id="ref-for-the-dialog-element①">对话框</a></code>
                                元素。
                            </p>
                        <li>
                            <p><a data-link-type="dfn" href="#fullscreen-element-ready-check"
                                    id="ref-for-fullscreen-element-ready-check">全屏元素就绪检查</a>对于<a data-link-type="dfn"
                                    href="https://webidl.spec.whatwg.org/#this" id="ref-for-this④">this</a>返回 true。</p>
                        <li>
                            <p><a data-link-type="dfn" href="#fullscreen-is-supported"
                                    id="ref-for-fullscreen-is-supported①">支持全屏</a>。</p>
                        <li>
                            <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this"
                                    id="ref-for-this⑤">this</a>的<a data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global"
                                    id="ref-for-concept-relevant-global">相关全局对象</a>具有<a data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/interaction.html#transient-activation"
                                    id="ref-for-transient-activation">瞬时激活</a>，或者该算法是<a data-link-type="dfn"
                                    href="https://w3c.github.io/screen-orientation/#dfn-triggered-by-a-user-generated-orientation-change"
                                    id="ref-for-dfn-triggered-by-a-user-generated-orientation-change">由用户生成的方向更改触发</a>。
                            </p>
                    </ul>
                <li>
                    <p>如果 <var>error</var> 为 false，则<a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/interaction.html#consume-user-activation"
                            id="ref-for-consume-user-activation">消耗用户激活</a>，给定
                        <var>pendingDoc</var> 的<a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global"
                            id="ref-for-concept-relevant-global①">相关全局对象</a>。
                    </p>
                <li>
                    <p>返回 <var>promise</var>，并运行剩余步骤<a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel"
                            id="ref-for-in-parallel">并行</a>。</p>
                <li>
                    <p>如果 <var>error</var> 为 false，则调整 <var>pendingDoc</var> 的<a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/document-sequences.html#node-navigable"
                            id="ref-for-node-navigable">节点可导航</a>的<a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-top"
                            id="ref-for-nav-top">顶级可遍历对象</a>的<a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-document"
                            id="ref-for-nav-document">活动文档</a>的视口尺寸，可选择考虑 <var>options</var>["<code
                            class="idl"><a data-link-type="idl" href="#dom-fullscreenoptions-navigationui" id="ref-for-dom-fullscreenoptions-navigationui①">navigationUI</a></code>"]：
                    </p>
                    <table>
                        <thead>
                            <tr>
                                <th>值
                                <th>视口尺寸
                        <tbody>
                            <tr>
                                <td>"<dfn class="dfn-paneled idl-code" data-dfn-for="FullscreenNavigationUI"
                                        data-dfn-type="enum-value" data-export data-lt="&quot;hide&quot;|hide"
                                        id="dom-fullscreennavigationui-hide"><code>hide</code></dfn>"
                                <td>输出设备屏幕的完整尺寸
                            <tr>
                                <td>"<dfn class="dfn-paneled idl-code" data-dfn-for="FullscreenNavigationUI"
                                        data-dfn-type="enum-value" data-export data-lt="&quot;show&quot;|show"
                                        id="dom-fullscreennavigationui-show"><code>show</code></dfn>"
                                <td>限制为允许用户代理显示页面导航控件的输出设备屏幕尺寸
                            <tr>
                                <td>"<dfn class="dfn-paneled idl-code" data-dfn-for="FullscreenNavigationUI"
                                        data-dfn-type="enum-value" data-export data-lt="&quot;auto&quot;|auto"
                                        id="dom-fullscreennavigationui-auto"><code>auto</code></dfn>"
                                <td>用户代理定义，但匹配上述之一
                    </table>
                    <p>可选择显示一条消息，说明最终用户如何还原此操作。</p>
                <li>
                    <p>如果以下任一条件为 false，则将 <var>error</var> 设置为 true：</p>
                    <ul>
                        <li>
                            <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this"
                                    id="ref-for-this⑥">this</a> 的<a data-link-type="dfn"
                                    href="https://dom.spec.whatwg.org/#concept-node-document"
                                    id="ref-for-concept-node-document④">节点文档</a>是 <var>pendingDoc</var>。</p>
                        <li>
                            <p><a data-link-type="dfn" href="#fullscreen-element-ready-check"
                                    id="ref-for-fullscreen-element-ready-check①">全屏元素就绪检查</a>对于<a data-link-type="dfn"
                                    href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑦">this</a>返回 true。</p>
                    </ul>
                <li>
                    <p>如果 <var>error</var> 为 true：</p>
                    <ol>
                        <li>
                            <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-append"
                                    id="ref-for-set-append">追加</a> (<code
                                    class="idl"><a data-link-type="idl" href="#eventdef-document-fullscreenerror" id="ref-for-eventdef-document-fullscreenerror">fullscreenerror</a></code>,
                                <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this"
                                    id="ref-for-this⑧">this</a>) 到 <var>pendingDoc</var> 的<a data-link-type="dfn"
                                    href="#list-of-pending-fullscreen-events"
                                    id="ref-for-list-of-pending-fullscreen-events②">待处理全屏事件列表</a>中。
                            </p>
                        <li>
                            <p>使用 <code
                                    class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①">TypeError</a></code>
                                异常拒绝 <var>promise</var>，并终止这些步骤。</p>
                    </ol>
                <li>
                    <p>将 <var>fullscreenElements</var> 设为一个<a data-link-type="dfn"
                            href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set①">有序集合</a>，最初由<a
                            data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this"
                            id="ref-for-this⑨">this</a>组成。</p>
                <li>
                    <p>当条件为 true 时：</p>
                    <ol>
                        <li>
                            <p>将 <var>last</var> 设为 <var>fullscreenElements</var> 的最后一个<a data-link-type="dfn"
                                    href="https://infra.spec.whatwg.org/#list-item" id="ref-for-list-item">项</a>。</p>
                        <li>
                            <p>将 <var>container</var> 设为 <var>last</var> 的<a data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/document-sequences.html#node-navigable"
                                    id="ref-for-node-navigable①">节点可导航</a>的<a data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-container"
                                    id="ref-for-nav-container">容器</a>。</p>
                        <li>
                            <p>如果 <var>container</var> 为 null，则<a data-link-type="dfn"
                                    href="https://infra.spec.whatwg.org/#iteration-break"
                                    id="ref-for-iteration-break">中断</a>。</p>
                        <li>
                            <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-append"
                                    id="ref-for-set-append①">追加</a> <var>container</var> 到
                                <var>fullscreenElements</var>。
                            </p>
                    </ol>
                <li>
                    <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate"
                            id="ref-for-list-iterate②">遍历</a> <var>fullscreenElements</var> 中的每个 <var>element</var>：
                    </p>
                    <ol>
                        <li>
                            <p>将 <var>doc</var> 设为 <var>element</var> 的<a data-link-type="dfn"
                                    href="https://dom.spec.whatwg.org/#concept-node-document"
                                    id="ref-for-concept-node-document⑤">节点文档</a>。</p>
                        <li>
                            <p>如果 <var>element</var> 是 <var>doc</var> 的<a data-link-type="dfn"
                                    href="#fullscreen-element" id="ref-for-fullscreen-element⑧">全屏元素</a>，则<a
                                    data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-continue"
                                    id="ref-for-iteration-continue">继续</a>。</p>
                            <p class="note" role="note">当没有发生任何变化时，无需通知观察者。</p>
                        <li>
                            <p>如果 <var>element</var> 是<a data-link-type="dfn"
                                    href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⓪">this</a>，并且<a
                                    data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this"
                                    id="ref-for-this①①">this</a> 是一个
                                <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element" id="ref-for-the-iframe-element①">iframe</a></code>
                                <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-element"
                                    id="ref-for-concept-element⑦">元素</a>，则设置 <var>element</var> 的<a data-link-type="dfn"
                                    href="#iframe-fullscreen-flag" id="ref-for-iframe-fullscreen-flag①">iframe 全屏标志</a>。
                            </p>
                        <li>
                            <p><a data-link-type="dfn" href="#fullscreen-an-element"
                                    id="ref-for-fullscreen-an-element">全屏显示 <var>element</var></a> 在
                                <var>doc</var> 中。
                            </p>
                        <li>
                            <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-append"
                                    id="ref-for-set-append②">追加</a> (<code
                                    class="idl"><a data-link-type="idl" href="#eventdef-document-fullscreenchange" id="ref-for-eventdef-document-fullscreenchange">fullscreenchange</a></code>,
                                <var>element</var>) 到 <var>doc</var> 的<a data-link-type="dfn"
                                    href="#list-of-pending-fullscreen-events"
                                    id="ref-for-list-of-pending-fullscreen-events③">待处理全屏事件列表</a>。
                            </p>
                    </ol>
                    <p class="note" role="note">元素<a data-link-type="dfn" href="#fullscreen-an-element"
                            id="ref-for-fullscreen-an-element①">全屏显示</a>的顺序是不可观察的，因为<a data-link-type="dfn"
                            href="#run-the-fullscreen-steps" id="ref-for-run-the-fullscreen-steps">运行全屏步骤</a>在<a
                            data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-tree-order"
                            id="ref-for-concept-tree-order">树顺序</a>中被调用。</p>
                <li>
                    <p>使用 undefined 解析 <var>promise</var>。</p>
            </ol>
            <p class="note" role="note">具有跨进程<a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/document-sequences.html#navigable"
                    id="ref-for-navigable">可导航对象</a>的实现留给读者练习。欢迎对潜在改进提出意见。</p>
        </div>
        <p><dfn class="dfn-paneled idl-code" data-dfn-for="Document" data-dfn-type="attribute" data-export
                id="dom-document-fullscreenenabled"><code>fullscreenEnabled</code></dfn> getter 步骤是如果<a
                data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①②">this</a>被<a
                data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#allowed-to-use"
                id="ref-for-allowed-to-use①">允许使用</a>
            "<code><a data-link-type="dfn" href="#fullscreen-feature" id="ref-for-fullscreen-feature①">全屏</a></code>"
            功能，并且<a data-link-type="dfn" href="#fullscreen-is-supported"
                id="ref-for-fullscreen-is-supported②">支持全屏</a>，则返回 true，
            否则返回 false。
        </p>
        <p><dfn class="dfn-paneled idl-code" data-dfn-for="Document" data-dfn-type="attribute" data-export
                id="dom-document-fullscreen"><code>fullscreen</code></dfn> getter 步骤是如果<a data-link-type="dfn"
                href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①③">this</a>的<a data-link-type="dfn"
                href="#fullscreen-element" id="ref-for-fullscreen-element⑨">全屏元素</a>
            为 null，则返回 false，否则返回 true。</p>
        <p class="note" role="note">请改用<code
                class="idl"><a data-link-type="idl" href="#dom-document-fullscreenelement" id="ref-for-dom-document-fullscreenelement③">fullscreenElement</a></code>
            属性。</p>
        <div class="algorithm" data-algorithm="fullscreenElement" data-algorithm-for="DocumentOrShadowRoot">
            <p><dfn class="dfn-paneled idl-code" data-dfn-for="DocumentOrShadowRoot" data-dfn-type="attribute"
                    data-export id="dom-document-fullscreenelement"><code>fullscreenElement</code></dfn> getter 步骤如下：
            </p>
            <ol>
                <li>
                    <p>如果<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this"
                            id="ref-for-this①④">this</a>是<a data-link-type="dfn"
                            href="https://dom.spec.whatwg.org/#concept-shadow-root"
                            id="ref-for-concept-shadow-root">阴影根</a>，并且其<a data-link-type="dfn"
                            href="https://dom.spec.whatwg.org/#concept-documentfragment-host"
                            id="ref-for-concept-documentfragment-host">宿主</a>未<a data-link-type="dfn"
                            href="https://dom.spec.whatwg.org/#connected" id="ref-for-connected②">连接</a>，则返回 null。</p>
                <li>
                    <p>将 <var>candidate</var> 设为<a data-link-type="dfn" href="https://dom.spec.whatwg.org/#重新目标化"
                            id="ref-for-retarget">重新目标化</a>的结果<a data-link-type="dfn" href="#fullscreen-element"
                            id="ref-for-fullscreen-element①⓪">全屏元素</a>针对<a data-link-type="dfn"
                            href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⑤">this</a>。</p>
                <li>
                    <p>如果 <var>candidate</var> 和 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this"
                            id="ref-for-this①⑥">this</a>在同一<a data-link-type="dfn"
                            href="https://dom.spec.whatwg.org/#概念树" id="ref-for-concept-tree">树</a>中，则返回
                        <var>candidate</var>。
                    </p>
                <li>
                    <p>返回 null。</p>
            </ol>
        </div>
        <p>一个 <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document"
                id="ref-for-concept-document⑤">document</a> 被称为 <dfn class="dfn-paneled" data-dfn-type="dfn"
                data-noexport id="simple-fullscreen-document">简单全屏文档</dfn>，如果在其 <a data-link-type="dfn"
                href="https://drafts.csswg.org/css-position-4/#document-top-layer"
                id="ref-for-document-top-layer⑤">顶层</a>中只有一个 <a data-link-type="dfn"
                href="https://dom.spec.whatwg.org/#concept-element" id="ref-for-concept-element⑧">元素</a> 具有其 <a
                data-link-type="dfn" href="#fullscreen-flag" id="ref-for-fullscreen-flag⑥">全屏标志</a> 设置。</p>
        <p class="note" role="note">一个 <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document"
                id="ref-for-concept-document⑥">document</a> 中有两个 <a data-link-type="dfn"
                href="https://dom.spec.whatwg.org/#concept-element" id="ref-for-concept-element⑨">元素</a> 在其 <a
                data-link-type="dfn" href="https://drafts.csswg.org/css-position-4/#document-top-layer"
                id="ref-for-document-top-layer⑥">顶层</a> 中，可以被称为一个 <a data-link-type="dfn"
                href="#simple-fullscreen-document" id="ref-for-simple-fullscreen-document">简单全屏文档</a>。例如，除了 <a
                data-link-type="dfn" href="#fullscreen-element" id="ref-for-fullscreen-element①①">全屏元素</a> 外，还可以有一个打开的
            <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/interactive-elements.html#the-dialog-element" id="ref-for-the-dialog-element②">对话框</a></code>
            元素。
        </p>
        <div class="algorithm" data-algorithm="collect documents to unfullscreen">
            <p>要<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                    id="collect-documents-to-unfullscreen">收集要退出全屏的文档</dfn>，给定<var>doc</var>，请运行以下步骤：</p>
            <ol>
                <li>
                    <p>将 <var>docs</var> 设为一个<a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set"
                            id="ref-for-ordered-set②">有序集合</a>，由 <var>doc</var> 组成。</p>
                <li>
                    <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-while"
                            id="ref-for-iteration-while">当</a> 条件为 true 时：</p>
                    <ol>
                        <li>
                            <p>将 <var>lastDoc</var> 设为 <var>docs</var> 的最后一个<a data-link-type="dfn"
                                    href="https://dom.spec.whatwg.org/#概念文档" id="ref-for-concept-document⑦">文档</a>。</p>
                        <li>
                            <p>断言：<var>lastDoc</var> 的 <a data-link-type="dfn" href="#fullscreen-element"
                                    id="ref-for-fullscreen-element①②">全屏元素</a> 不为 null。</p>
                        <li>
                            <p>如果 <var>lastDoc</var> 不是 <a data-link-type="dfn" href="#simple-fullscreen-document"
                                    id="ref-for-simple-fullscreen-document①">简单全屏文档</a>，则<a data-link-type="dfn"
                                    href="https://infra.spec.whatwg.org/#iteration-break"
                                    id="ref-for-iteration-break①">中断</a>。</p>
                        <li>
                            <p>将 <var>container</var> 设为 <var>lastDoc</var> 的<a data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/document-sequences.html#node-navigable"
                                    id="ref-for-node-navigable②">节点可导航</a>的<a data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-container"
                                    id="ref-for-nav-container①">容器</a>。</p>
                        <li>
                            <p>如果 <var>container</var> 为 null，则<a data-link-type="dfn"
                                    href="https://infra.spec.whatwg.org/#iteration-break"
                                    id="ref-for-iteration-break②">中断</a>。</p>
                        <li>
                            <p>如果 <var>container</var> 的 <a data-link-type="dfn" href="#iframe-fullscreen-flag"
                                    id="ref-for-iframe-fullscreen-flag②">iframe 全屏标志</a> 被设置，<a data-link-type="dfn"
                                    href="https://infra.spec.whatwg.org/#iteration-break"
                                    id="ref-for-iteration-break③">中断</a>。</p>
                        <li>
                            <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-append"
                                    id="ref-for-set-append③">追加</a> <var>container</var> 的<a data-link-type="dfn"
                                    href="https://dom.spec.whatwg.org/#概念文档"
                                    id="ref-for-concept-node-document⑥">节点文档</a> 到 <var>docs</var>。</p>
                    </ol>
                <li>
                    <p>返回 <var>docs</var>。</p>
                    <p class="note" role="note">这是<a data-link-type="dfn" href="#fullscreen-element"
                            id="ref-for-fullscreen-element①③">全屏元素</a>将被<a data-link-type="dfn"
                            href="#unfullscreen-an-element" id="ref-for-unfullscreen-an-element③">退出全屏</a>的一组文档，但
                        <var>docs</var> 中的最后一个文档可能有多个<a data-link-type="dfn" href="https://dom.spec.whatwg.org/#概念元素"
                            id="ref-for-concept-element①⓪">元素</a>在其<a data-link-type="dfn"
                            href="https://drafts.csswg.org/css-position-4/#document-top-layer"
                            id="ref-for-document-top-layer⑦">顶层</a>中设置了 <a data-link-type="dfn" href="#fullscreen-flag"
                            id="ref-for-fullscreen-flag⑦">全屏标志</a>，这种情况下该文档仍将保持全屏状态。
                    </p>
            </ol>
        </div>
        <div class="algorithm" data-algorithm="exit fullscreen">
            <p>要<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="exit-fullscreen">退出全屏</dfn>，给定<a
                    data-link-type="dfn" href="https://dom.spec.whatwg.org/#概念文档" id="ref-for-concept-document⑧">文档</a>
                <var>doc</var>，请运行以下步骤：
            </p>
            <ol>
                <li>
                    <p>将 <var>promise</var> 设为一个新的 promise。</p>
                <li>
                    <p>如果 <var>doc</var> 不是<a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active"
                            id="ref-for-fully-active①">完全活动的</a>或 <var>doc</var> 的<a data-link-type="dfn"
                            href="#fullscreen-element" id="ref-for-fullscreen-element①④">全屏元素</a> 为 null，则使用 <code
                            class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror②">TypeError</a></code>异常拒绝
                        <var>promise</var>，并返回 <var>promise</var>。
                    </p>
                <li>
                    <p>将 <var>resize</var> 设为 false。</p>
                <li>
                    <p>将 <var>docs</var> 设为<a data-link-type="dfn" href="#collect-documents-to-unfullscreen"
                            id="ref-for-collect-documents-to-unfullscreen">收集要退出全屏的文档</a>的结果，给定 <var>doc</var>。</p>
                <li>
                    <p>将 <var>topLevelDoc</var> 设为 <var>doc</var> 的<a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/document-sequences.html#node-navigable"
                            id="ref-for-node-navigable③">节点可导航</a>的<a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-top"
                            id="ref-for-nav-top①">顶级可遍历对象</a>的<a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-document"
                            id="ref-for-nav-document①">活动文档</a>。</p>
                <li>
                    <p>如果 <var>topLevelDoc</var> 在 <var>docs</var> 中，并且它是一个 <a data-link-type="dfn"
                            href="#simple-fullscreen-document" id="ref-for-simple-fullscreen-document②">简单全屏文档</a>，则将
                        <var>doc</var> 设置为 <var>topLevelDoc</var> 并将 <var>resize</var> 设置为 true。
                    </p>
                <li>
                    <p>如果 <var>doc</var> 的<a data-link-type="dfn" href="#fullscreen-element"
                            id="ref-for-fullscreen-element①⑤">全屏元素</a>未<a data-link-type="dfn"
                            href="https://dom.spec.whatwg.org/#已连接" id="ref-for-connected③">连接</a>：</p>
                    <ol>
                        <li>
                            <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-append"
                                    id="ref-for-set-append④">追加</a> (<code
                                    class="idl"><a data-link-type="idl" href="#eventdef-document-fullscreenchange" id="ref-for-eventdef-document-fullscreenchange①">fullscreenchange</a></code>，<var>doc</var>
                                的 <a data-link-type="dfn" href="#fullscreen-element"
                                    id="ref-for-fullscreen-element①⑥">全屏元素</a>) 到 <var>doc</var> 的<a
                                    data-link-type="dfn" href="#list-of-pending-fullscreen-events"
                                    id="ref-for-list-of-pending-fullscreen-events④">待处理全屏事件列表</a>中。</p>
                    </ol>
                <li>
                    <p>返回 <var>promise</var>，并运行剩余步骤<a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/infrastructure.html#并行"
                            id="ref-for-in-parallel①">并行</a>。</p>
                <li>
                    <p>运行<a data-link-type="dfn"
                            href="https://w3c.github.io/screen-orientation/#dfn-fully-unlock-the-screen-orientation-steps"
                            id="ref-for-dfn-fully-unlock-the-screen-orientation-steps">完全解锁屏幕方向的步骤</a>，给定
                        <var>doc</var>。
                    </p>
                <li>
                    <p>如果 <var>resize</var> 为 true，则调整 <var>doc</var> 的视口到其“正常”尺寸。</p>
                <li>
                    <p>如果 <var>doc</var> 的<a data-link-type="dfn" href="#fullscreen-element"
                            id="ref-for-fullscreen-element①⑦">全屏元素</a>为 null，则使用 undefined 解析 <var>promise</var>
                        并终止这些步骤。</p>
                <li>
                    <p>将 <var>exitDocs</var> 设为<a data-link-type="dfn" href="#collect-documents-to-unfullscreen"
                            id="ref-for-collect-documents-to-unfullscreen①">收集要退出全屏的文档</a>的结果，给定 <var>doc</var>。</p>
                <li>
                    <p>将 <var>descendantDocs</var> 设为一个<a data-link-type="dfn"
                            href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set③">有序集合</a>，由
                        <var>doc</var> 的<a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/document-sequences.html#descendant-navigables"
                            id="ref-for-descendant-navigables">后代可导航对象</a>的<a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-document"
                            id="ref-for-nav-document②">活动文档</a>的<a data-link-type="dfn" href="#fullscreen-element"
                            id="ref-for-fullscreen-element①⑧">全屏元素</a>非 null（如果有）组成，按<a data-link-type="dfn"
                            href="https://dom.spec.whatwg.org/#树顺序" id="ref-for-concept-tree-order①">树顺序</a>。
                    </p>
                <li>
                    <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate"
                            id="ref-for-list-iterate③">遍历</a> <var>exitDoc</var> 中的每个 <var>exitDoc</var>：</p>
                    <ol>
                        <li>
                            <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-append"
                                    id="ref-for-set-append⑤">追加</a> (<code
                                    class="idl"><a data-link-type="idl" href="#eventdef-document-fullscreenchange" id="ref-for-eventdef-document-fullscreenchange②">fullscreenchange</a></code>，<var>exitDoc</var>
                                的 <a data-link-type="dfn" href="#fullscreen-element"
                                    id="ref-for-fullscreen-element①⑨">全屏元素</a>) 到 <var>exitDoc</var> 的<a
                                    data-link-type="dfn" href="#list-of-pending-fullscreen-events"
                                    id="ref-for-list-of-pending-fullscreen-events⑤">待处理全屏事件列表</a>中。</p>
                        <li>
                            <p>如果 <var>resize</var> 为 true，则<a data-link-type="dfn" href="#unfullscreen-a-document"
                                    id="ref-for-unfullscreen-a-document">退出全屏 <var>exitDoc</var></a>。</p>
                        <li>
                            <p>否则，<a data-link-type="dfn" href="#unfullscreen-an-element"
                                    id="ref-for-unfullscreen-an-element④">退出全屏</a> <var>exitDoc</var> 的<a
                                    data-link-type="dfn" href="#fullscreen-element"
                                    id="ref-for-fullscreen-element②⓪">全屏元素</a>。</p>
                    </ol>
                <li>
                    <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate"
                            id="ref-for-list-iterate④">遍历</a> <var>descendantDoc</var> 中的每个 <var>descendantDoc</var>：
                    </p>
                    <ol>
                        <li>
                            <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-append"
                                    id="ref-for-set-append⑥">追加</a> (<code
                                    class="idl"><a data-link-type="idl" href="#eventdef-document-fullscreenchange" id="ref-for-eventdef-document-fullscreenchange③">fullscreenchange</a></code>，<var>descendantDoc</var>
                                的 <a data-link-type="dfn" href="#fullscreen-element"
                                    id="ref-for-fullscreen-element②①">全屏元素</a>) 到 <var>descendantDoc</var> 的<a
                                    data-link-type="dfn" href="#list-of-pending-fullscreen-events"
                                    id="ref-for-list-of-pending-fullscreen-events⑥">待处理全屏事件列表</a>中。</p>
                        <li>
                            <p><a data-link-type="dfn" href="#unfullscreen-a-document"
                                    id="ref-for-unfullscreen-a-document①">退出全屏 <var>descendantDoc</var></a>。</p>
                    </ol>
                    <p class="note" role="note">文档<a data-link-type="dfn" href="#unfullscreen-a-document"
                            id="ref-for-unfullscreen-a-document②">退出全屏</a>的顺序是不可观察的，因为<a data-link-type="dfn"
                            href="#run-the-fullscreen-steps" id="ref-for-run-the-fullscreen-steps①">运行全屏步骤</a>在<a
                            data-link-type="dfn" href="https://dom.spec.whatwg.org/#树顺序"
                            id="ref-for-concept-tree-order②">树顺序</a>中被调用。</p>
                <li>
                    <p>使用 undefined 解析 <var>promise</var>。</p>
            </ol>
        </div>
        <p><dfn class="dfn-paneled idl-code" data-dfn-for="Document" data-dfn-type="method" data-export
                id="dom-document-exitfullscreen"><code>exitFullscreen()</code></dfn>方法步骤是返回在<a data-link-type="dfn"
                href="#exit-fullscreen" id="ref-for-exit-fullscreen②">退出全屏</a>上运行的结果，给定<a data-link-type="dfn"
                href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⑦">this</a>。</p>

        <hr>
        <p>以下是<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers"
                id="ref-for-event-handlers">事件处理程序</a>（及其对应的<a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type"
                id="ref-for-event-handler-event-type">事件处理程序事件类型</a>），它们必须被<code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element②">Element</a></code>
            和<code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document①">Document</a></code>
            对象作为<a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes"
                id="ref-for-event-handler-idl-attributes">事件处理程序IDL属性</a>支持的事件处理程序：</p>
        <table>
            <thead>
                <tr>
                    <th><a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers"
                            id="ref-for-event-handlers①">事件处理程序</a>
                    <th><a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type"
                            id="ref-for-event-handler-event-type①">事件处理程序事件类型</a>
            <tbody>
                <tr>
                    <td><dfn class="dfn-paneled idl-code" data-dfn-for="Document,Element" data-dfn-type="attribute"
                            data-export id="handler-document-onfullscreenchange"><code>onfullscreenchange</code></dfn>
                    <td><dfn class="dfn-paneled idl-code" data-dfn-for="Document,Element" data-dfn-type="event"
                            data-export id="eventdef-document-fullscreenchange"><code>fullscreenchange</code></dfn>
                <tr>
                    <td><dfn class="dfn-paneled idl-code" data-dfn-for="Document,Element" data-dfn-type="attribute"
                            data-export id="handler-document-onfullscreenerror"><code>onfullscreenerror</code></dfn>
                    <td><dfn class="dfn-paneled idl-code" data-dfn-for="Document,Element" data-dfn-type="event"
                            data-export id="eventdef-document-fullscreenerror"><code>fullscreenerror</code></dfn>
        </table>
        <p class="note" role="note">这些事件处理程序不被<code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#shadowroot" id="ref-for-shadowroot">ShadowRoot</a></code>
            或<code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window">Window</a></code>
            对象支持，并且在任何命名空间中的<code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element③">Element</a></code>
            对象上也没有对应的<a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-content-attributes"
                id="ref-for-event-handler-content-attributes">事件处理程序内容属性</a>。</p>
        <h2 class="heading settled" data-level="4" id="ui"><span class="secno">4. </span><span
                class="content">用户界面</span><a class="self-link" href="#ui"></a></h2>
        <p>鼓励用户代理在实现原生媒体全屏控制时使用<code
                class="idl"><a data-link-type="idl" href="#dom-element-requestfullscreen" id="ref-for-dom-element-requestfullscreen②">requestFullscreen()</a></code>和<code
                class="idl"><a data-link-type="idl" href="#dom-document-exitfullscreen" id="ref-for-dom-document-exitfullscreen②">exitFullscreen()</a></code>。
        </p>
        <p>如果最终用户指示用户代理结束通过<code
                class="idl"><a data-link-type="idl" href="#dom-element-requestfullscreen" id="ref-for-dom-element-requestfullscreen③">requestFullscreen()</a></code>启动的全屏会话，<a
                data-link-type="dfn" href="#fully-exit-fullscreen" id="ref-for-fully-exit-fullscreen①">完全退出全屏</a>，给定<a
                data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-traversable"
                id="ref-for-top-level-traversable">顶级可遍历对象</a>的<a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-document"
                id="ref-for-nav-document③">活动文档</a>。</p>
        <p>用户代理可以在没有最终用户指示或调用<code
                class="idl"><a data-link-type="idl" href="#dom-document-exitfullscreen" id="ref-for-dom-document-exitfullscreen③">exitFullscreen()</a></code>的情况下随时结束任何全屏会话，只要用户代理认为有必要。
        </p>
        <h2 class="heading settled" data-level="5" id="rendering"><span class="secno">5. </span><span
                class="content">渲染</span><a class="self-link" href="#rendering"></a></h2>
        <p>本节的解释应与HTML的渲染部分等效。<a data-link-type="biblio" href="#biblio-html" title="HTML Standard">[HTML]</a></p>
        <h3 class="heading settled" data-level="5.1" id=":fullscreen-pseudo-class"><span class="secno">5.1. </span><span
                class="content"><code>:fullscreen</code> 伪类</span><a class="self-link"
                href="#:fullscreen-pseudo-class"></a></h3>
        <p><dfn class="dfn-paneled css" data-dfn-type="selector" data-export
                id="css-pc-fullscreen"><code>:fullscreen</code></dfn>伪类必须匹配满足以下任一条件的<a data-link-type="dfn"
                href="https://dom.spec.whatwg.org/#concept-element"
                id="ref-for-concept-element①①">元素</a><var>element</var>：</p>
        <ul>
            <li>
                <p><var>element</var>的<a data-link-type="dfn" href="#fullscreen-flag"
                        id="ref-for-fullscreen-flag⑧">全屏标志</a>已设置。</p>
            <li>
                <p><var>element</var>是<a data-link-type="dfn" href="https://dom.spec.whatwg.org/#element-shadow-host"
                        id="ref-for-element-shadow-host">shadow宿主</a>，并且<a data-link-type="dfn"
                        href="https://dom.spec.whatwg.org/#retarget" id="ref-for-retarget①">重新定位</a>其<a
                        data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document"
                        id="ref-for-concept-node-document⑦">节点文档</a>的<a data-link-type="dfn" href="#fullscreen-element"
                        id="ref-for-fullscreen-element②②">全屏元素</a>的结果是<var>element</var>。</p>
        </ul>
        <p class="note no-backref" role="note">这使其不同于<code
                class="idl"><a data-link-type="idl" href="#dom-document-fullscreenelement" id="ref-for-dom-document-fullscreenelement④">fullscreenElement</a></code>
            API，该API返回最上层的<a data-link-type="dfn" href="#fullscreen-element" id="ref-for-fullscreen-element②③">全屏元素</a>。
        </p>
        <h3 class="heading settled" data-level="5.2" id="user-agent-level-style-sheet-defaults"><span class="secno">5.2.
            </span><span class="content">用户代理级别样式表默认值</span><a class="self-link"
                href="#user-agent-level-style-sheet-defaults"></a></h3>
        <pre class="css">@namespace "http://www.w3.org/1999/xhtml";

*|*:not(:root):fullscreen {
  position:fixed !important;
  inset:0 !important;
  margin:0 !important;
  box-sizing:border-box !important;
  min-width:0 !important;
  max-width:none !important;
  min-height:0 !important;
  max-height:none !important;
  width:100% !important;
  height:100% !important;
  transform:none !important;

  /* intentionally not !important */
  object-fit:contain;
}

iframe:fullscreen {
  border:none !important;
  padding:0 !important;
}

*|*:not(:root):fullscreen::backdrop {
  background:black;
}
</pre>
        <h2 class="heading settled" data-level="6" id="permissions-policy-integration"><span class="secno">6.
            </span><span class="content">权限策略集成</span><span id="feature-policy-integration"></span><a class="self-link"
                href="#permissions-policy-integration"></a></h2>
        <p>本规范定义了一个由字符串"<code><dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="fullscreen-feature" data-noexport id="fullscreen-feature">fullscreen</dfn></code>"标识的<a
                data-link-type="dfn"
                href="https://w3c.github.io/webappsec-permissions-policy/#policy-controlled-feature"
                id="ref-for-policy-controlled-feature">策略控制的功能</a>。其<a data-link-type="dfn"
                href="https://w3c.github.io/webappsec-permissions-policy/#policy-controlled-feature-default-allowlist"
                id="ref-for-policy-controlled-feature-default-allowlist">默认允许列表</a>是<code>'self'</code>。
        </p>
        <div class="note" role="note">
            <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document"
                    id="ref-for-concept-document⑨">文档</a>的<a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/dom.html#concept-document-permissions-policy"
                    id="ref-for-concept-document-permissions-policy">权限策略</a>决定了该文档中的任何内容是否被允许进入全屏模式。如果在任何文档中禁用，则该文档中的任何内容都不会
                <a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#allowed-to-use"
                    id="ref-for-allowed-to-use②">被允许使用</a>全屏。
            </p>
            <p>
                HTML
                <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allowfullscreen" id="ref-for-attr-iframe-allowfullscreen">allowfullscreen</a></code>
                属性会影响嵌套在该
                <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element" id="ref-for-the-iframe-element②">iframe</a></code>
                中的任何文档的
                <a data-link-type="dfn" href="https://w3c.github.io/webappsec-permissions-policy/#container-policy"
                    id="ref-for-container-policy">容器策略</a>。除非通过
                <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allow" id="ref-for-attr-iframe-allow">allow</a></code>
                属性覆盖，在
                <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allowfullscreen" id="ref-for-attr-iframe-allowfullscreen①">allowfullscreen</a></code>
                上设置
                <code>&lt;iframe
allow="fullscreen *"></code>，如<a
                    href="https://w3c.github.io/webappsec-permissions-policy/#iframe-allowfullscreen-attribute"><cite>Permissions
                        Policy</cite> § 6.3.1 allowfullscreen</a>中所述。
            </p>
        </div>

        <h2 class="heading settled" data-level="7" id="security-and-privacy-considerations"><span class="secno">7.
            </span><span class="content">安全性和隐私考量</span><a class="self-link"
                href="#security-and-privacy-considerations"></a></h2>
        <p>用户代理应确保，例如通过覆盖层，使最终用户意识到某些内容正在全屏显示。用户代理应提供一种始终有效的退出全屏的方式，并向用户宣传这一点。这是为了防止网站通过在全屏状态下重新创建用户代理甚至操作系统环境来欺骗最终用户。另请参见<code
                class="idl"><a data-link-type="idl" href="#dom-element-requestfullscreen" id="ref-for-dom-element-requestfullscreen④">requestFullscreen()</a></code>的定义。
        </p>
        <p>要使<a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/document-sequences.html#child-navigable"
                id="ref-for-child-navigable">子可遍历对象</a>中的内容能够全屏显示，必须通过权限策略明确允许，方式包括通过HTML<code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allowfullscreen" id="ref-for-attr-iframe-allowfullscreen②">allowfullscreen</a></code>属性，或通过HTML<code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element" id="ref-for-the-iframe-element③">iframe</a></code>元素中的<code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allow" id="ref-for-attr-iframe-allow①">allow</a></code>属性，或通过与嵌套文档一起传递的<code>`<a data-link-type="http-header"
            href="https://w3c.github.io/webappsec-permissions-policy/#permissions-policy-header"
            id="ref-for-permissions-policy-header"><code>Permissions-Policy</code></a>`</code> HTTP头部声明。
        </p>
        <p>这可以防止例如第三方内容未经明确许可进入全屏模式。</p>
        <h2 class="no-num heading settled" id="old-links"><span class="content">先前托管的定义</span><span
                id="new-stacking-layer"></span><span id="top-layer"></span><span id="top-layer-add"></span><span
                id="::backdrop-pseudo-element"></span><span id="css-pe-backdrop"></span><a class="self-link"
                href="#old-links"></a></h2>
        <p>本规范之前托管了<a class="css" data-link-type="selector"
                href="https://drafts.csswg.org/css-position-4/#selectordef-backdrop"
                id="ref-for-selectordef-backdrop">::backdrop</a>选择器和文档的<a data-link-type="dfn"
                href="https://drafts.csswg.org/css-position-4/#document-top-layer"
                id="ref-for-document-top-layer⑧">顶层</a>概念的定义。</p>

        <h2 class="no-num heading settled" id="acknowledgments"><span class="content">致谢</span><a class="self-link"
                href="#acknowledgments"></a></h2>
        <p>特别感谢 Robert O’Callahan 设计了最初的模型，并且非常出色。</p>
        <p>感谢
            Andy Earnshaw,
            Changwan Hong,
            Chris Pearce,
            Darin Fisher,
            Dave Tapuska, <i>fantasai</i>,
            Giuseppe Pascale,
            Glenn Maynard,
            Ian Clelland,
            Ian Hickson,
            Ignacio Solla,
            João Eiras,
            Josh Soref,
            Kagami Sascha Rosylight,
            Matt Falkenhagen,
            Mihai Balan,
            Mounir Lamouri,
            Øyvind Stenhaug,
            Pat Ladd,
            Rafał Chłodnicki,
            Riff Jiang,
            Rune Lillesveen,
            Sigbjørn Vik,
            Simon Pieters,
            Tab Atkins-Bittner,
            Takayoshi Kochi,
            Theresa O’Connor,
            triple-underscore,
            Vincent Scheib, 和
            Xidorn Quan
            也非常出色。
        </p>
        <p>本标准由 <a href="https://foolip.org/" lang="sv">Philip Jägenstedt</a> (<a href="https://google.com/">Google</a>,
            <a href="mailto:philip@foolip.org">philip@foolip.org</a>) 编辑。最初由 <a href="https://annevankesteren.nl/"
                lang="nl">Anne van Kesteren</a> (<a href="https://www.apple.com/">Apple</a>, <a
                href="mailto:annevk@annevk.nl">annevk@annevk.nl</a>) 撰写。<a href="http://tantek.com/" lang="tr">Tantek
                Çelik</a> (<a class="p-org org h-org h-card" href="https://www.mozilla.org/">Mozilla</a>, <a
                href="mailto:tantek@cs.stanford.edu">tantek@cs.stanford.edu</a>) 解决了法律问题。
        </p>
        <h2 class="no-num heading settled" id="ipr"><span class="content">知识产权</span><a class="self-link"
                href="#ipr"></a></h2>
        <p>版权 © WHATWG (Apple, Google, Mozilla, Microsoft)。本作品以 <a href="https://creativecommons.org/licenses/by/4.0/"
                rel="license">知识共享署名 4.0 国际许可协议</a> 授权。若将其部分内容纳入源代码，则源代码中的这些部分将根据 <a
                href="https://opensource.org/licenses/BSD-3-Clause" rel="license">BSD 3-Clause 许可证</a> 授权。</p>
        <p>这是现行标准。对专利审查版本感兴趣的人士应查看<a href="/review-drafts/2024-07/">现行标准审查草案</a>。</p>
    </main>
    <!-- <script>
"use strict";
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("/service-worker.js");
}
</script> -->
    <h2 class="no-num no-ref heading settled" id="index"><span class="content">索引</span><a class="self-link"
            href="#index"></a></h2>
    <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">本规范定义的术语</span><a
            class="self-link" href="#index-defined-here"></a></h3>
    <ul class="index">
        <li><a href="#dom-fullscreennavigationui-auto">"auto"</a><span>, 见 § 3</span>
        <li><a href="#dom-fullscreennavigationui-auto">auto</a><span>, 见 § 3</span>
        <li><a href="#collect-documents-to-unfullscreen">collect documents to unfullscreen</a><span>, 见 § 3</span>
        <li><a href="#exit-fullscreen">exit fullscreen</a><span>, 见 § 3</span>
        <li><a href="#dom-document-exitfullscreen">exitFullscreen()</a><span>, 见 § 3</span>
        <li><a href="#css-pc-fullscreen">:fullscreen</a><span>, 见 § 5.1</span>
        <li><a href="#dom-document-fullscreen">fullscreen</a><span>, 见 § 3</span>
        <li><a href="#fullscreen-an-element">fullscreen an element</a><span>, 见 § 2</span>
        <li><a href="#eventdef-document-fullscreenchange">fullscreenchange</a><span>, 见 § 3</span>
        <li><a href="#fullscreen-element">fullscreen element</a><span>, 见 § 2</span>
        <li><a href="#dom-document-fullscreenelement">fullscreenElement</a><span>, 见 § 3</span>
        <li><a href="#fullscreen-element-ready-check">fullscreen element ready check</a><span>, 见 § 3</span>
        <li><a href="#dom-document-fullscreenenabled">fullscreenEnabled</a><span>, 见 § 3</span>
        <li><a href="#eventdef-document-fullscreenerror">fullscreenerror</a><span>, 见 § 3</span>
        <li><a href="#fullscreen-feature">fullscreen-feature</a><span>, 见 § 6</span>
        <li><a href="#fullscreen-flag">fullscreen flag</a><span>, 见 § 2</span>
        <li><a href="#fullscreen-is-supported">Fullscreen is supported</a><span>, 见 § 2</span>
        <li><a href="#enumdef-fullscreennavigationui">FullscreenNavigationUI</a><span>, 见 § 3</span>
        <li><a href="#dictdef-fullscreenoptions">FullscreenOptions</a><span>, 见 § 3</span>
        <li><a href="#fully-exit-fullscreen">fully exit fullscreen</a><span>, 见 § 2</span>
        <li><a href="#dom-fullscreennavigationui-hide">"hide"</a><span>, 见 § 3</span>
        <li><a href="#dom-fullscreennavigationui-hide">hide</a><span>, 见 § 3</span>
        <li><a href="#iframe-fullscreen-flag">iframe fullscreen flag</a><span>, 见 § 2</span>
        <li><a href="#list-of-pending-fullscreen-events">list of pending fullscreen events</a><span>, 见 § 2</span>
        <li><a href="#dom-fullscreenoptions-navigationui">navigationUI</a><span>, 见 § 3</span>
        <li><a href="#handler-document-onfullscreenchange">onfullscreenchange</a><span>, 见 § 3</span>
        <li><a href="#handler-document-onfullscreenerror">onfullscreenerror</a><span>, 见 § 3</span>
        <li><a href="#dom-element-requestfullscreen">requestFullscreen()</a><span>, 见 § 3</span>
        <li><a href="#dom-element-requestfullscreen">requestFullscreen(options)</a><span>, 见 § 3</span>
        <li><a href="#run-the-fullscreen-steps">run the fullscreen steps</a><span>, 见 § 2</span>
        <li><a href="#dom-fullscreennavigationui-show">"show"</a><span>, 见 § 3</span>
        <li><a href="#dom-fullscreennavigationui-show">show</a><span>, 见 § 3</span>
        <li><a href="#simple-fullscreen-document">simple fullscreen document</a><span>, 见 § 3</span>
        <li><a href="#unfullscreen-a-document">unfullscreen a document</a><span>, 见 § 2</span>
        <li><a href="#unfullscreen-an-element">unfullscreen an element</a><span>, 见 § 2</span>
    </ul>
    <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">引用定义的术语</span><a
            class="self-link" href="#index-defined-elsewhere"></a></h3>
    <ul class="index">
        <li>
            <a data-link-type="biblio">[]</a> 定义了以下术语:
            <ul>
                <li><span class="dfn-paneled" id="95ea01a3">由用户生成的方向改变触发</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-POSITION-4]</a> 定义了以下术语:
            <ul>
                <li><span class="dfn-paneled" id="b9a45e7f">::backdrop</span>
                <li><span class="dfn-paneled" id="f3abaffb">添加到顶层</span>
                <li><span class="dfn-paneled" id="d4a9f2b2">立即从顶层移除</span>
                <li><span class="dfn-paneled" id="8f59bb58">顶层</span>
            </ul>
        <li>
            <a data-link-type="biblio">[DOM]</a> 定义了以下术语:
            <ul>
                <li><span class="dfn-paneled" id="85394472">Document</span>
                <li><span class="dfn-paneled" id="9ac2aadf">DocumentOrShadowRoot</span>
                <li><span class="dfn-paneled" id="296f3551">Element</span>
                <li><span class="dfn-paneled" id="1cd7ff31">ShadowRoot</span>
                <li><span class="dfn-paneled" id="0c0ceb78">bubbles</span>
                <li><span class="dfn-paneled" id="8b547cc7">composed</span>
                <li><span class="dfn-paneled" id="9638f92b">connected</span>
                <li><span class="dfn-paneled" id="a973e0fe">document</span>
                <li><span class="dfn-paneled" id="27d9b7ea">element</span>
                <li><span class="dfn-paneled" id="5fd23811">触发事件</span>
                <li><span class="dfn-paneled" id="5d233601">host</span>
                <li><span class="dfn-paneled" id="746cc3ba">命名空间</span>
                <li><span class="dfn-paneled" id="5216e1a0">节点文档</span>
                <li><span class="dfn-paneled" id="62e9a98d">移除步骤</span>
                <li><span class="dfn-paneled" id="c200d9ce">重定向</span>
                <li><span class="dfn-paneled" id="58a8f724">shadow host</span>
                <li><span class="dfn-paneled" id="3fcc582f">shadow root</span>
                <li><span class="dfn-paneled" id="a85a691e">包含shadow的所有子节点</span>
                <li><span class="dfn-paneled" id="fefa5851">包含shadow的树形结构顺序</span>
                <li><span class="dfn-paneled" id="e6cc3311">树</span>
                <li><span class="dfn-paneled" id="25538777">树形顺序</span>
            </ul>
        <li>
            <a data-link-type="biblio">[HTML]</a> 定义了以下术语:
            <ul>
                <li><span class="dfn-paneled" id="f0951476">事件处理程序</span>
                <li><span class="dfn-paneled" id="5d7209e9">Window</span>
                <li><span class="dfn-paneled" id="35972864">活动文档</span>
                <li><span class="dfn-paneled" id="57435598">允许</span>
                <li><span class="dfn-paneled" id="3610bd67">允许使用</span>
                <li><span class="dfn-paneled" id="06cba118">允许全屏</span>
                <li><span class="dfn-paneled" id="f23dc013">子导航</span>
                <li><span class="dfn-paneled" id="aca22383">消耗用户激活</span>
                <li><span class="dfn-paneled" id="762210c0">容器</span>
                <li><span class="dfn-paneled" id="82529e79">后代导航</span>
                <li><span class="dfn-paneled" id="1812300f">对话框</span>
                <li><span class="dfn-paneled" id="6a5a59a0">事件处理程序</span>
                <li><span class="dfn-paneled" id="cc6d9aed">事件处理程序内容属性</span>
                <li><span class="dfn-paneled" id="9d386f55">事件处理程序事件类型</span>
                <li><span class="dfn-paneled" id="03675365">事件处理程序IDL属性</span>
                <li><span class="dfn-paneled" id="c6d19e56">事件循环</span>
                <li><span class="dfn-paneled" id="0e3ba9f8">完全激活</span>
                <li><span class="dfn-paneled" id="7e214bfc">隐藏</span>
                <li><span class="dfn-paneled" id="fa3971e0">隐藏所有弹出框直到</span>
                <li><span class="dfn-paneled" id="87fcd40c">iframe</span>
                <li><span class="dfn-paneled" id="a72449dd">并行</span>
                <li><span class="dfn-paneled" id="9c19b7fc">可导航元素</span>
                <li><span class="dfn-paneled" id="13dd6cae">节点可导航元素</span>
                <li><span class="dfn-paneled" id="a41102eb">权限策略</span>
                <li><span class="dfn-paneled" id="83b82cf5">弹出框可见状态</span>
                <li><span class="dfn-paneled" id="e99bd18e">相关的全局对象</span>
                <li><span class="dfn-paneled" id="bd736ec6">顶级遍历</span>
                <li><span class="dfn-paneled" id="30717154">顶级遍历 <small>(针对可导航元素)</small></span>
                <li><span class="dfn-paneled" id="04274997">最顶层弹出框祖先</span>
                <li><span class="dfn-paneled" id="47fe679e">临时激活</span>
                <li><span class="dfn-paneled" id="4411082c">卸载文档清理步骤</span>
            </ul>
        <li>
            <a data-link-type="biblio">[INFRA]</a> 定义了以下术语:
            <ul>
                <li><span class="dfn-paneled" id="a3b18719">附加</span>
                <li><span class="dfn-paneled" id="7b0d918d">中断</span>
                <li><span class="dfn-paneled" id="ae8def21">包含</span>
                <li><span class="dfn-paneled" id="f937b7b6">继续</span>
                <li><span class="dfn-paneled" id="03afaf9c">清空</span>
                <li><span class="dfn-paneled" id="16d07e10">对于每个</span>
                <li><span class="dfn-paneled" id="f052b1ea">HTML命名空间</span>
                <li><span class="dfn-paneled" id="5afbefcd">项目</span>
                <li><span class="dfn-paneled" id="692595fe">有序集合</span>
                <li><span class="dfn-paneled" id="0698d556">字符串</span>
                <li><span class="dfn-paneled" id="0e8de730">元组</span>
                <li><span class="dfn-paneled" id="cbdc89b4">当...时</span>
            </ul>
        <li>
            <a data-link-type="biblio">[PERMISSIONS-POLICY-1]</a> 定义了以下术语:
            <ul>
                <li><span class="dfn-paneled" id="d080b91a">容器策略</span>
                <li><span class="dfn-paneled" id="1570624a">默认允许列表</span>
                <li><span class="dfn-paneled" id="0e3ba2bf">权限策略</span>
                <li><span class="dfn-paneled" id="cc890cc1">策略控制的特性</span>
            </ul>
        <li>
            <a data-link-type="biblio">[SCREEN-ORIENTATION]</a> 定义了以下术语:
            <ul>
                <li><span class="dfn-paneled" id="08e2f34f">完全解锁屏幕方向步骤</span>
            </ul>
        <li>
            <a data-link-type="biblio">[WEBIDL]</a> 定义了以下术语:
            <ul>
                <li><span class="dfn-paneled" id="459b02ed">LegacyLenientSetter</span>
                <li><span class="dfn-paneled" id="bdbd19d1">Promise</span>
                <li><span class="dfn-paneled" id="82ca3efc">TypeError</span>
                <li><span class="dfn-paneled" id="31d6b6c6">Unscopable</span>
                <li><span class="dfn-paneled" id="5372cca8">boolean</span>
                <li><span class="dfn-paneled" id="4013a022">this</span>
                <li><span class="dfn-paneled" id="5f90bbfb">undefined</span>
            </ul>
    </ul>
    <h2 class="no-num no-ref heading settled" id="references"><span class="content">参考文献</span><a class="self-link"
            href="#references"></a></h2>
    <h3 class="no-num no-ref heading settled" id="normative"><span class="content">规范性引用</span><a class="self-link"
            href="#normative"></a></h3>
    <dl>
        <dt id="biblio-css">[CSS]
        <dd>Bert Bos; 等. <a href="https://drafts.csswg.org/css2/"><cite>层叠样式表第 2 级修订 1 (CSS 2.1) 规范</cite></a>. URL: <a
                href="https://drafts.csswg.org/css2/">https://drafts.csswg.org/css2/</a>
        <dt id="biblio-css-position-4">[CSS-POSITION-4]
        <dd><a href="https://drafts.csswg.org/css-position-4/"><cite>CSS 定位布局模块第 4 级</cite></a>.
            编辑草案. URL: <a href="https://drafts.csswg.org/css-position-4/">https://drafts.csswg.org/css-position-4/</a>
        <dt id="biblio-dom">[DOM]
        <dd>Anne van Kesteren. <a href="https://dom.spec.whatwg.org/"><cite>DOM 标准</cite></a>. 现行标准.
            URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
        <dt id="biblio-html">[HTML]
        <dd>Anne van Kesteren; 等. <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML 标准</cite></a>.
            现行标准. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
        <dt id="biblio-infra">[INFRA]
        <dd>Anne van Kesteren; Domenic Denicola. <a href="https://infra.spec.whatwg.org/"><cite>Infra
                    标准</cite></a>. 现行标准. URL: <a
                href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
        <dt id="biblio-mathml">[MATHML]
        <dd>Patrick D F Ion; Robert R Miner. <a href="https://www.w3.org/TR/REC-MathML/"><cite>数学标记语言 (MathML™) 1.01
                    规范</cite></a>. 2023年3月7日. REC. URL: <a
                href="https://www.w3.org/TR/REC-MathML/">https://www.w3.org/TR/REC-MathML/</a>
        <dt id="biblio-permissions-policy-1">[PERMISSIONS-POLICY-1]
        <dd>Ian Clelland. <a href="https://w3c.github.io/webappsec-permissions-policy/"><cite>权限策略</cite></a>. URL: <a
                href="https://w3c.github.io/webappsec-permissions-policy/">https://w3c.github.io/webappsec-permissions-policy/</a>
        <dt id="biblio-screen-orientation">[SCREEN-ORIENTATION]
        <dd>Marcos Caceres. <a href="https://w3c.github.io/screen-orientation/"><cite>屏幕方向</cite></a>.
            URL: <a href="https://w3c.github.io/screen-orientation/">https://w3c.github.io/screen-orientation/</a>
        <dt id="biblio-svg">[SVG]
        <dd>Erik Dahlström; 等. <a href="https://www.w3.org/TR/SVG11/"><cite>可缩放矢量图形 (SVG) 1.1（第二版）</cite></a>.
            2011年8月16日. REC. URL: <a href="https://www.w3.org/TR/SVG11/">https://www.w3.org/TR/SVG11/</a>
        <dt id="biblio-webidl">[WEBIDL]
        <dd>Edgar Chen; Timothy Gu. <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL 标准</cite></a>. 现行标准. URL: <a
                href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
    </dl>

    <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL 索引</span><a class="self-link"
            href="#idl-index"></a></h2>
    <pre class="idl highlight def"><c- b>enum</c-> <a href="#enumdef-fullscreennavigationui"><code><c- g>FullscreenNavigationUI</c-></code></a> {
  <a class="idl-code" data-link-type="enum-value" href="#dom-fullscreennavigationui-auto"><c- s>"auto"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-fullscreennavigationui-show"><c- s>"show"</c-></a>,
  <a class="idl-code" data-link-type="enum-value" href="#dom-fullscreennavigationui-hide"><c- s>"hide"</c-></a>
};

<c- b>dictionary</c-> <a href="#dictdef-fullscreenoptions"><code><c- g>FullscreenOptions</c-></code></a> {
  <a data-link-type="idl-name" href="#enumdef-fullscreennavigationui"><c- n>FullscreenNavigationUI</c-></a> <a data-default="&quot;auto&quot;" data-type="FullscreenNavigationUI" href="#dom-fullscreenoptions-navigationui"><code><c- g>navigationUI</c-></code></a> = "auto";
};

<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://dom.spec.whatwg.org/#element"><c- g>Element</c-></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-element-requestfullscreen"><c- g>requestFullscreen</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-fullscreenoptions"><c- n>FullscreenOptions</c-></a> <a href="#dom-element-requestfullscreen-options-options"><code><c- g>options</c-></code></a> = {});

  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><c- n>EventHandler</c-></a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#handler-document-onfullscreenchange"><c- g>onfullscreenchange</c-></a>;
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><c- n>EventHandler</c-></a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#handler-document-onfullscreenerror"><c- g>onfullscreenerror</c-></a>;
};

<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://dom.spec.whatwg.org/#document"><c- g>Document</c-></a> {
  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#LegacyLenientSetter"><c- g>LegacyLenientSetter</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-document-fullscreenenabled"><c- g>fullscreenEnabled</c-></a>;
  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#LegacyLenientSetter"><c- g>LegacyLenientSetter</c-></a>, <a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Unscopable"><c- g>Unscopable</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-document-fullscreen"><c- g>fullscreen</c-></a>; // historical

  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-document-exitfullscreen"><c- g>exitFullscreen</c-></a>();

  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><c- n>EventHandler</c-></a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#handler-document-onfullscreenchange"><c- g>onfullscreenchange</c-></a>;
  <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><c- n>EventHandler</c-></a> <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#handler-document-onfullscreenerror"><c- g>onfullscreenerror</c-></a>;
};

<c- b>partial</c-> <c- b>interface</c-> <c- b>mixin</c-> <a class="idl-code" data-link-type="interface" href="https://dom.spec.whatwg.org/#documentorshadowroot"><c- g>DocumentOrShadowRoot</c-></a> {
  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#LegacyLenientSetter"><c- g>LegacyLenientSetter</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element"><c- n>Element</c-></a>? <a class="idl-code" data-link-type="attribute" data-readonly data-type="Element?" href="#dom-document-fullscreenelement"><c- g>fullscreenElement</c-></a>;
};

</pre>
    <details class="mdn-anno unpositioned" data-anno-for="ref-for-dom-document-exitfullscreen①">
        <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span>
        </summary>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/exitFullscreen"
                    title="The Document method exitFullscreen() requests that the element on this document which is currently being presented in fullscreen mode be taken out of fullscreen mode, restoring the previous state of the screen. This usually reverses the effects of a previous call to Element.requestFullscreen().">Document/exitFullscreen</a>
            </p>
            <p class="all-engines-text">In all current engines.</p>
            <div class="support">
                <span class="firefox yes"><span>Firefox</span><span>64+</span></span><span
                    class="safari yes"><span>Safari</span><span>16.4+</span></span><span
                    class="chrome yes"><span>Chrome</span><span>71+</span></span>
                <hr>
                <span class="opera yes"><span>Opera</span><span>58+</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                <hr>
                <span class="edge no"><span>Edge (Legacy)</span><span>None</span></span><span
                    class="ie no"><span>IE</span><span>None</span></span>
                <hr>
                <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>None</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android yes"><span>Android WebView</span><span>71+</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android yes"><span>Opera Mobile</span><span>50+</span></span>
            </div>
        </div>
    </details>
    <details class="mdn-anno unpositioned" data-anno-for="handler-document-onfullscreenchange">
        <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span>
        </summary>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/fullscreenchange_event"
                    title="The fullscreenchange event is fired immediately after the browser switches into or out of fullscreen mode.">Document/fullscreenchange_event</a>
            </p>
            <p class="all-engines-text">In all current engines.</p>
            <div class="support">
                <span class="firefox yes"><span>Firefox</span><span>64+</span></span><span
                    class="safari yes"><span>Safari</span><span>16.4+</span></span><span
                    class="chrome yes"><span>Chrome</span><span>71+</span></span>
                <hr>
                <span class="opera yes"><span>Opera</span><span>58+</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                <hr>
                <span class="edge no"><span>Edge (Legacy)</span><span>None</span></span><span
                    class="ie no"><span>IE</span><span>None</span></span>
                <hr>
                <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>None</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android yes"><span>Android WebView</span><span>71+</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android yes"><span>Opera Mobile</span><span>50+</span></span>
            </div>
        </div>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/fullscreenchange_event"
                    title="The fullscreenchange event is fired immediately after an Element switches into or out of fullscreen mode.">Element/fullscreenchange_event</a>
            </p>
            <p class="all-engines-text">In all current engines.</p>
            <div class="support">
                <span class="firefox yes"><span>Firefox</span><span>64+</span></span><span
                    class="safari yes"><span>Safari</span><span>16.4+</span></span><span
                    class="chrome yes"><span>Chrome</span><span>71+</span></span>
                <hr>
                <span class="opera yes"><span>Opera</span><span>58+</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                <hr>
                <span class="edge no"><span>Edge (Legacy)</span><span>None</span></span><span
                    class="ie no"><span>IE</span><span>None</span></span>
                <hr>
                <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>None</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android yes"><span>Android WebView</span><span>71+</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android yes"><span>Opera Mobile</span><span>50+</span></span>
            </div>
        </div>
    </details>
    <details class="mdn-anno unpositioned" data-anno-for="ref-for-dom-document-fullscreenelement①">
        <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span>
        </summary>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/fullscreenElement"
                    title="The Document.fullscreenElement read-only property returns the Element that is currently being presented in fullscreen mode in this document, or null if fullscreen mode is not currently in use.">Document/fullscreenElement</a>
            </p>
            <p class="all-engines-text">In all current engines.</p>
            <div class="support">
                <span class="firefox yes"><span>Firefox</span><span>64+</span></span><span
                    class="safari yes"><span>Safari</span><span>16.4+</span></span><span
                    class="chrome yes"><span>Chrome</span><span>71+</span></span>
                <hr>
                <span class="opera yes"><span>Opera</span><span>58+</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                <hr>
                <span class="edge no"><span>Edge (Legacy)</span><span>None</span></span><span
                    class="ie no"><span>IE</span><span>None</span></span>
                <hr>
                <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android no"><span>Android WebView</span><span>?</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android yes"><span>Opera Mobile</span><span>50+</span></span>
            </div>
        </div>
    </details>
    <details class="mdn-anno unpositioned" data-anno-for="ref-for-dom-document-fullscreenenabled①">
        <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span>
        </summary>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/fullscreenEnabled"
                    title="The read-only fullscreenEnabled property on the Document interface indicates whether or not fullscreen mode is available.">Document/fullscreenEnabled</a>
            </p>
            <p class="all-engines-text">In all current engines.</p>
            <div class="support">
                <span class="firefox yes"><span>Firefox</span><span>64+</span></span><span
                    class="safari yes"><span>Safari</span><span>16.4+</span></span><span
                    class="chrome yes"><span>Chrome</span><span>71+</span></span>
                <hr>
                <span class="opera yes"><span>Opera</span><span>58+</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                <hr>
                <span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span
                    class="ie no"><span>IE</span><span>None</span></span>
                <hr>
                <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>None</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android no"><span>Android WebView</span><span>?</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android yes"><span>Opera Mobile</span><span>50+</span></span>
            </div>
        </div>
    </details>
    <details class="mdn-anno unpositioned" data-anno-for="handler-document-onfullscreenerror">
        <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span>
        </summary>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/fullscreenerror_event"
                    title="The fullscreenerror event is fired when the browser cannot switch to fullscreen mode.">Document/fullscreenerror_event</a>
            </p>
            <p class="all-engines-text">In all current engines.</p>
            <div class="support">
                <span class="firefox yes"><span>Firefox</span><span>64+</span></span><span
                    class="safari yes"><span>Safari</span><span>16.4+</span></span><span
                    class="chrome yes"><span>Chrome</span><span>71+</span></span>
                <hr>
                <span class="opera yes"><span>Opera</span><span>58+</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                <hr>
                <span class="edge no"><span>Edge (Legacy)</span><span>None</span></span><span
                    class="ie no"><span>IE</span><span>None</span></span>
                <hr>
                <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>None</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android yes"><span>Android WebView</span><span>71+</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android yes"><span>Opera Mobile</span><span>50+</span></span>
            </div>
        </div>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/fullscreenerror_event"
                    title="The fullscreenerror event is fired when the browser cannot switch to fullscreen mode.">Element/fullscreenerror_event</a>
            </p>
            <p class="all-engines-text">In all current engines.</p>
            <div class="support">
                <span class="firefox yes"><span>Firefox</span><span>64+</span></span><span
                    class="safari yes"><span>Safari</span><span>16.4+</span></span><span
                    class="chrome yes"><span>Chrome</span><span>71+</span></span>
                <hr>
                <span class="opera yes"><span>Opera</span><span>58+</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                <hr>
                <span class="edge no"><span>Edge (Legacy)</span><span>None</span></span><span
                    class="ie no"><span>IE</span><span>None</span></span>
                <hr>
                <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>None</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android yes"><span>Android WebView</span><span>71+</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android yes"><span>Opera Mobile</span><span>50+</span></span>
            </div>
        </div>
    </details>
    <details class="mdn-anno unpositioned" data-anno-for="ref-for-dom-element-requestfullscreen①">
        <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span>
        </summary>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/requestFullscreen"
                    title="The Element.requestFullscreen() method issues an asynchronous request to make the element be displayed in fullscreen mode.">Element/requestFullscreen</a>
            </p>
            <p class="all-engines-text">In all current engines.</p>
            <div class="support">
                <span class="firefox yes"><span>Firefox</span><span>64+</span></span><span
                    class="safari yes"><span>Safari</span><span>16.4+</span></span><span
                    class="chrome yes"><span>Chrome</span><span>71+</span></span>
                <hr>
                <span class="opera yes"><span>Opera</span><span>58+</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                <hr>
                <span class="edge no"><span>Edge (Legacy)</span><span>None</span></span><span
                    class="ie no"><span>IE</span><span>None</span></span>
                <hr>
                <span class="firefox_android yes"><span>Firefox for Android</span><span>64+</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>None</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android yes"><span>Android WebView</span><span>71+</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android yes"><span>Opera Mobile</span><span>50+</span></span>
            </div>
        </div>
    </details>
    <details class="mdn-anno unpositioned" data-anno-for="api">
        <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span>
        </summary>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Element"
                    title="Element is the most general base class from which all element objects (i.e. objects that represent elements) in a Document inherit. It only has methods and properties common to all kinds of elements. More specific classes inherit from Element.">Element</a>
            </p>
            <p class="all-engines-text">In all current engines.</p>
            <div class="support">
                <span class="firefox yes"><span>Firefox</span><span>1+</span></span><span
                    class="safari yes"><span>Safari</span><span>1+</span></span><span
                    class="chrome yes"><span>Chrome</span><span>1+</span></span>
                <hr>
                <span class="opera yes"><span>Opera</span><span>8+</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                <hr>
                <span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span
                    class="ie yes"><span>IE</span><span>4+</span></span>
                <hr>
                <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android yes"><span>Android WebView</span><span>37+</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android yes"><span>Opera Mobile</span><span>10.1+</span></span>
            </div>
        </div>
    </details>
    <details class="mdn-anno unpositioned" data-anno-for="ref-for-dom-document-fullscreenelement②">
        <summary><b class="all-engines-flag" title="This feature is in all current engines.">✔</b><span>MDN</span>
        </summary>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/ShadowRoot/fullscreenElement"
                    title="The fullscreenElement read-only property of the ShadowRoot interface returns the element within the shadow tree that is currently displayed in full screen.">ShadowRoot/fullscreenElement</a>
            </p>
            <p class="all-engines-text">In all current engines.</p>
            <div class="support">
                <span class="firefox yes"><span>Firefox</span><span>64+</span></span><span
                    class="safari yes"><span>Safari</span><span>16.4+</span></span><span
                    class="chrome yes"><span>Chrome</span><span>71+</span></span>
                <hr>
                <span class="opera no"><span>Opera</span><span>?</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                <hr>
                <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span
                    class="ie no"><span>IE</span><span>None</span></span>
                <hr>
                <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android no"><span>Android WebView</span><span>?</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
            </div>
        </div>
    </details>
    <details class="mdn-anno unpositioned" data-anno-for=":fullscreen-pseudo-class">
        <summary><span>MDN</span></summary>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:fullscreen"
                    title="The :fullscreen CSS pseudo-class matches every element which is currently in fullscreen mode. If multiple elements have been put into fullscreen mode, this selects them all.">:fullscreen</a>
            </p>
            <div class="support">
                <span class="firefox yes"><span>Firefox</span><span>64+</span></span><span
                    class="safari no"><span>Safari</span><span>None</span></span><span
                    class="chrome yes"><span>Chrome</span><span>71+</span></span>
                <hr>
                <span class="opera no"><span>Opera</span><span>?</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                <hr>
                <span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span
                    class="ie no"><span>IE</span><span>None</span></span>
                <hr>
                <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>None</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android yes"><span>Android WebView</span><span>71+</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
            </div>
        </div>
    </details>
    <details class="mdn-anno unpositioned" data-anno-for="permissions-policy-integration">
        <summary><b class="less-than-two-engines-flag"
                title="This feature is in less than two current engines.">⚠</b><span>MDN</span></summary>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Feature-Policy/fullscreen"
                    title="The HTTP Permissions-Policy header fullscreen directive controls whether the current document is allowed to use Element.requestFullscreen().">Headers/Feature-Policy/fullscreen</a>
            </p>
            <p class="less-than-two-engines-text">In only one current engine.</p>
            <div class="support">
                <span class="firefox no"><span>Firefox</span><span>None</span></span><span
                    class="safari no"><span>Safari</span><span>None</span></span><span
                    class="chrome yes"><span>Chrome</span><span>62+</span></span>
                <hr>
                <span class="opera no"><span>Opera</span><span>?</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>79+</span></span>
                <hr>
                <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span
                    class="ie no"><span>IE</span><span>None</span></span>
                <hr>
                <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android no"><span>Android WebView</span><span>?</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
            </div>
        </div>
        <div class="feature">
            <p><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Permissions-Policy/fullscreen"
                    title="The HTTP Permissions-Policy header fullscreen directive controls whether the current document is allowed to use Element.requestFullscreen().">Headers/Permissions-Policy/fullscreen</a>
            </p>
            <p class="less-than-two-engines-text">In only one current engine.</p>
            <div class="support">
                <span class="firefox no"><span>Firefox</span><span>None</span></span><span
                    class="safari no"><span>Safari</span><span>None</span></span><span
                    class="chrome yes"><span>Chrome</span><span>88+</span></span>
                <hr>
                <span class="opera no"><span>Opera</span><span>?</span></span><span
                    class="edge_blink yes"><span>Edge</span><span>88+</span></span>
                <hr>
                <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span
                    class="ie no"><span>IE</span><span>None</span></span>
                <hr>
                <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span
                    class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span
                    class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span
                    class="webview_android no"><span>Android WebView</span><span>?</span></span><span
                    class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span
                    class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
            </div>
        </div>
    </details>
    <script>/* Boilerplate: script-dom-helper */
        "use strict";
        function query(sel) { return document.querySelector(sel); }

        function queryAll(sel) { return [...document.querySelectorAll(sel)]; }

        function iter(obj) {
            if (!obj) return [];
            var it = obj[Symbol.iterator];
            if (it) return it;
            return Object.entries(obj);
        }

        function mk(tagname, attrs, ...children) {
            const el = document.createElement(tagname);
            for (const [k, v] of iter(attrs)) {
                if (k.slice(0, 3) == "_on") {
                    const eventName = k.slice(3);
                    el.addEventListener(eventName, v);
                } else if (k[0] == "_") {
                    // property, not attribute
                    el[k.slice(1)] = v;
                } else {
                    if (v === false || v == null) {
                        continue;
                    } else if (v === true) {
                        el.setAttribute(k, "");
                        continue;
                    } else {
                        el.setAttribute(k, v);
                    }
                }
            }
            append(el, children);
            return el;
        }

        /* Create shortcuts for every known HTML element */
        [
            "a",
            "abbr",
            "acronym",
            "address",
            "applet",
            "area",
            "article",
            "aside",
            "audio",
            "b",
            "base",
            "basefont",
            "bdo",
            "big",
            "blockquote",
            "body",
            "br",
            "button",
            "canvas",
            "caption",
            "center",
            "cite",
            "code",
            "col",
            "colgroup",
            "datalist",
            "dd",
            "del",
            "details",
            "dfn",
            "dialog",
            "div",
            "dl",
            "dt",
            "em",
            "embed",
            "fieldset",
            "figcaption",
            "figure",
            "font",
            "footer",
            "form",
            "frame",
            "frameset",
            "head",
            "header",
            "h1",
            "h2",
            "h3",
            "h4",
            "h5",
            "h6",
            "hr",
            "html",
            "i",
            "iframe",
            "img",
            "input",
            "ins",
            "kbd",
            "label",
            "legend",
            "li",
            "link",
            "main",
            "map",
            "mark",
            "meta",
            "meter",
            "nav",
            "nobr",
            "noscript",
            "object",
            "ol",
            "optgroup",
            "option",
            "output",
            "p",
            "param",
            "pre",
            "progress",
            "q",
            "s",
            "samp",
            "script",
            "section",
            "select",
            "small",
            "source",
            "span",
            "strike",
            "strong",
            "style",
            "sub",
            "summary",
            "sup",
            "table",
            "tbody",
            "td",
            "template",
            "textarea",
            "tfoot",
            "th",
            "thead",
            "time",
            "title",
            "tr",
            "u",
            "ul",
            "var",
            "video",
            "wbr",
            "xmp",
        ].forEach(tagname => {
            mk[tagname] = (...args) => mk(tagname, ...args);
        });

        function* nodesFromChildList(children) {
            for (const child of children.flat(Infinity)) {
                if (child instanceof Node) {
                    yield child;
                } else {
                    yield new Text(child);
                }
            }
        }
        function append(el, ...children) {
            for (const child of nodesFromChildList(children)) {
                if (el instanceof Node) el.appendChild(child);
                else el.push(child);
            }
            return el;
        }

        function insertAfter(el, ...children) {
            for (const child of nodesFromChildList(children)) {
                el.parentNode.insertBefore(child, el.nextSibling);
            }
            return el;
        }

        function clearContents(el) {
            el.innerHTML = "";
            return el;
        }

        function parseHTML(markup) {
            if (markup.toLowerCase().trim().indexOf('<!doctype') === 0) {
                const doc = document.implementation.createHTMLDocument("");
                doc.documentElement.innerHTML = markup;
                return doc;
            } else {
                const el = mk.template({});
                el.innerHTML = markup;
                return el.content;
            }
        }</script>
    <script>/* Boilerplate: script-dfn-panel */
        "use strict";
        {
            let dfnPanelData = {
                "03675365": { "dfnID": "03675365", "dfnText": "event handler idl attribute", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-event-handler-idl-attributes" }], "title": "3. API" }], "url": "https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes" },
                "03afaf9c": { "dfnID": "03afaf9c", "dfnText": "empty", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-list-empty" }], "title": "2. Model" }], "url": "https://infra.spec.whatwg.org/#list-empty" },
                "04274997": { "dfnID": "04274997", "dfnText": "topmost popover ancestor", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-topmost-popover-ancestor" }], "title": "2. Model" }], "url": "https://html.spec.whatwg.org/multipage/popover.html#topmost-popover-ancestor" },
                "0698d556": { "dfnID": "0698d556", "dfnText": "string", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-string" }], "title": "2. Model" }], "url": "https://infra.spec.whatwg.org/#string" },
                "06cba118": { "dfnID": "06cba118", "dfnText": "allowfullscreen", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-attr-iframe-allowfullscreen" }, { "id": "ref-for-attr-iframe-allowfullscreen\u2460" }], "title": "6. Permissions Policy\nIntegration" }, { "refs": [{ "id": "ref-for-attr-iframe-allowfullscreen\u2461" }], "title": "7. Security and Privacy Considerations" }], "url": "https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allowfullscreen" },
                "08e2f34f": { "dfnID": "08e2f34f", "dfnText": "fully unlock the screen orientation steps", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dfn-fully-unlock-the-screen-orientation-steps" }], "title": "3. API" }], "url": "https://w3c.github.io/screen-orientation/#dfn-fully-unlock-the-screen-orientation-steps" },
                "0c0ceb78": { "dfnID": "0c0ceb78", "dfnText": "bubbles", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-event-bubbles" }], "title": "2. Model" }], "url": "https://dom.spec.whatwg.org/#dom-event-bubbles" },
                "0e3ba2bf": { "dfnID": "0e3ba2bf", "dfnText": "permissions-policy", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-permissions-policy-header" }], "title": "7. Security and Privacy Considerations" }], "url": "https://w3c.github.io/webappsec-permissions-policy/#permissions-policy-header" },
                "0e3ba9f8": { "dfnID": "0e3ba9f8", "dfnText": "fully active", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-fully-active" }, { "id": "ref-for-fully-active\u2460" }], "title": "3. API" }], "url": "https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active" },
                "0e8de730": { "dfnID": "0e8de730", "dfnText": "tuple", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-tuple" }], "title": "2. Model" }], "url": "https://infra.spec.whatwg.org/#tuple" },
                "13dd6cae": { "dfnID": "13dd6cae", "dfnText": "node navigable", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-node-navigable" }, { "id": "ref-for-node-navigable\u2460" }, { "id": "ref-for-node-navigable\u2461" }, { "id": "ref-for-node-navigable\u2462" }], "title": "3. API" }], "url": "https://html.spec.whatwg.org/multipage/document-sequences.html#node-navigable" },
                "1570624a": { "dfnID": "1570624a", "dfnText": "default allowlist", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-policy-controlled-feature-default-allowlist" }], "title": "6. Permissions Policy\nIntegration" }], "url": "https://w3c.github.io/webappsec-permissions-policy/#policy-controlled-feature-default-allowlist" },
                "16d07e10": { "dfnID": "16d07e10", "dfnText": "for each", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-list-iterate" }, { "id": "ref-for-list-iterate\u2460" }], "title": "2. Model" }, { "refs": [{ "id": "ref-for-list-iterate\u2461" }, { "id": "ref-for-list-iterate\u2462" }, { "id": "ref-for-list-iterate\u2463" }], "title": "3. API" }], "url": "https://infra.spec.whatwg.org/#list-iterate" },
                "1812300f": { "dfnID": "1812300f", "dfnText": "dialog", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-the-dialog-element" }], "title": "2. Model" }, { "refs": [{ "id": "ref-for-the-dialog-element\u2460" }, { "id": "ref-for-the-dialog-element\u2461" }], "title": "3. API" }], "url": "https://html.spec.whatwg.org/multipage/interactive-elements.html#the-dialog-element" },
                "1cd7ff31": { "dfnID": "1cd7ff31", "dfnText": "ShadowRoot", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-shadowroot" }], "title": "3. API" }], "url": "https://dom.spec.whatwg.org/#shadowroot" },
                "25538777": { "dfnID": "25538777", "dfnText": "tree order", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-tree-order" }, { "id": "ref-for-concept-tree-order\u2460" }, { "id": "ref-for-concept-tree-order\u2461" }], "title": "3. API" }], "url": "https://dom.spec.whatwg.org/#concept-tree-order" },
                "27d9b7ea": { "dfnID": "27d9b7ea", "dfnText": "element", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-element" }, { "id": "ref-for-concept-element\u2460" }, { "id": "ref-for-concept-element\u2461" }, { "id": "ref-for-concept-element\u2462" }, { "id": "ref-for-concept-element\u2463" }], "title": "2. Model" }, { "refs": [{ "id": "ref-for-concept-element\u2464" }, { "id": "ref-for-concept-element\u2465" }, { "id": "ref-for-concept-element\u2466" }, { "id": "ref-for-concept-element\u2467" }, { "id": "ref-for-concept-element\u2468" }, { "id": "ref-for-concept-element\u2460\u24ea" }], "title": "3. API" }, { "refs": [{ "id": "ref-for-concept-element\u2460\u2460" }], "title": "5.1. :fullscreen pseudo-class" }], "url": "https://dom.spec.whatwg.org/#concept-element" },
                "296f3551": { "dfnID": "296f3551", "dfnText": "Element", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-element" }, { "id": "ref-for-element\u2460" }, { "id": "ref-for-element\u2461" }, { "id": "ref-for-element\u2462" }], "title": "3. API" }], "url": "https://dom.spec.whatwg.org/#element" },
                "30717154": { "dfnID": "30717154", "dfnText": "top-level traversable (for navigable)", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-nav-top" }, { "id": "ref-for-nav-top\u2460" }], "title": "3. API" }], "url": "https://html.spec.whatwg.org/multipage/document-sequences.html#nav-top" },
                "31d6b6c6": { "dfnID": "31d6b6c6", "dfnText": "Unscopable", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-Unscopable" }], "title": "3. API" }], "url": "https://webidl.spec.whatwg.org/#Unscopable" },
                "35972864": { "dfnID": "35972864", "dfnText": "active document", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-nav-document" }, { "id": "ref-for-nav-document\u2460" }, { "id": "ref-for-nav-document\u2461" }], "title": "3. API" }, { "refs": [{ "id": "ref-for-nav-document\u2462" }], "title": "4. UI" }], "url": "https://html.spec.whatwg.org/multipage/document-sequences.html#nav-document" },
                "3610bd67": { "dfnID": "3610bd67", "dfnText": "allowed to use", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-allowed-to-use" }, { "id": "ref-for-allowed-to-use\u2460" }], "title": "3. API" }, { "refs": [{ "id": "ref-for-allowed-to-use\u2461" }], "title": "6. Permissions Policy\nIntegration" }], "url": "https://html.spec.whatwg.org/multipage/iframe-embed-object.html#allowed-to-use" },
                "3fcc582f": { "dfnID": "3fcc582f", "dfnText": "shadow root", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-shadow-root" }], "title": "3. API" }], "url": "https://dom.spec.whatwg.org/#concept-shadow-root" },
                "4013a022": { "dfnID": "4013a022", "dfnText": "this", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-this" }, { "id": "ref-for-this\u2460" }, { "id": "ref-for-this\u2461" }, { "id": "ref-for-this\u2462" }, { "id": "ref-for-this\u2463" }, { "id": "ref-for-this\u2464" }, { "id": "ref-for-this\u2465" }, { "id": "ref-for-this\u2466" }, { "id": "ref-for-this\u2467" }, { "id": "ref-for-this\u2468" }, { "id": "ref-for-this\u2460\u24ea" }, { "id": "ref-for-this\u2460\u2460" }, { "id": "ref-for-this\u2460\u2461" }, { "id": "ref-for-this\u2460\u2462" }, { "id": "ref-for-this\u2460\u2463" }, { "id": "ref-for-this\u2460\u2464" }, { "id": "ref-for-this\u2460\u2465" }, { "id": "ref-for-this\u2460\u2466" }], "title": "3. API" }], "url": "https://webidl.spec.whatwg.org/#this" },
                "4411082c": { "dfnID": "4411082c", "dfnText": "unloading document cleanup steps", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-unloading-document-cleanup-steps" }], "title": "2. Model" }], "url": "https://html.spec.whatwg.org/multipage/document-lifecycle.html#unloading-document-cleanup-steps" },
                "459b02ed": { "dfnID": "459b02ed", "dfnText": "LegacyLenientSetter", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-LegacyLenientSetter" }, { "id": "ref-for-LegacyLenientSetter\u2460" }, { "id": "ref-for-LegacyLenientSetter\u2461" }], "title": "3. API" }], "url": "https://webidl.spec.whatwg.org/#LegacyLenientSetter" },
                "47fe679e": { "dfnID": "47fe679e", "dfnText": "transient activation", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-transient-activation" }], "title": "3. API" }], "url": "https://html.spec.whatwg.org/multipage/interaction.html#transient-activation" },
                "5216e1a0": { "dfnID": "5216e1a0", "dfnText": "node document", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-node-document" }, { "id": "ref-for-concept-node-document\u2460" }], "title": "2. Model" }, { "refs": [{ "id": "ref-for-concept-node-document\u2461" }, { "id": "ref-for-concept-node-document\u2462" }, { "id": "ref-for-concept-node-document\u2463" }, { "id": "ref-for-concept-node-document\u2464" }, { "id": "ref-for-concept-node-document\u2465" }], "title": "3. API" }, { "refs": [{ "id": "ref-for-concept-node-document\u2466" }], "title": "5.1. :fullscreen pseudo-class" }], "url": "https://dom.spec.whatwg.org/#concept-node-document" },
                "5372cca8": { "dfnID": "5372cca8", "dfnText": "boolean", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-idl-boolean" }, { "id": "ref-for-idl-boolean\u2460" }], "title": "3. API" }], "url": "https://webidl.spec.whatwg.org/#idl-boolean" },
                "57435598": { "dfnID": "57435598", "dfnText": "allow", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-attr-iframe-allow" }], "title": "6. Permissions Policy\nIntegration" }, { "refs": [{ "id": "ref-for-attr-iframe-allow\u2460" }], "title": "7. Security and Privacy Considerations" }], "url": "https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allow" },
                "58a8f724": { "dfnID": "58a8f724", "dfnText": "shadow host", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-element-shadow-host" }], "title": "5.1. :fullscreen pseudo-class" }], "url": "https://dom.spec.whatwg.org/#element-shadow-host" },
                "5afbefcd": { "dfnID": "5afbefcd", "dfnText": "item", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-list-item" }], "title": "3. API" }], "url": "https://infra.spec.whatwg.org/#list-item" },
                "5d233601": { "dfnID": "5d233601", "dfnText": "host", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-documentfragment-host" }], "title": "3. API" }], "url": "https://dom.spec.whatwg.org/#concept-documentfragment-host" },
                "5d7209e9": { "dfnID": "5d7209e9", "dfnText": "Window", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-window" }], "title": "3. API" }], "url": "https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" },
                "5f90bbfb": { "dfnID": "5f90bbfb", "dfnText": "undefined", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-idl-undefined" }, { "id": "ref-for-idl-undefined\u2460" }], "title": "3. API" }], "url": "https://webidl.spec.whatwg.org/#idl-undefined" },
                "5fd23811": { "dfnID": "5fd23811", "dfnText": "fire an event", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-event-fire" }], "title": "2. Model" }], "url": "https://dom.spec.whatwg.org/#concept-event-fire" },
                "62e9a98d": { "dfnID": "62e9a98d", "dfnText": "removing steps", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-node-remove-ext" }], "title": "2. Model" }], "url": "https://dom.spec.whatwg.org/#concept-node-remove-ext" },
                "692595fe": { "dfnID": "692595fe", "dfnText": "ordered set", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-ordered-set" }], "title": "2. Model" }, { "refs": [{ "id": "ref-for-ordered-set\u2460" }, { "id": "ref-for-ordered-set\u2461" }, { "id": "ref-for-ordered-set\u2462" }], "title": "3. API" }], "url": "https://infra.spec.whatwg.org/#ordered-set" },
                "6a5a59a0": { "dfnID": "6a5a59a0", "dfnText": "event handler", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-event-handlers" }, { "id": "ref-for-event-handlers\u2460" }], "title": "3. API" }], "url": "https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers" },
                "746cc3ba": { "dfnID": "746cc3ba", "dfnText": "namespace", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-element-namespace" }, { "id": "ref-for-concept-element-namespace\u2460" }], "title": "3. API" }], "url": "https://dom.spec.whatwg.org/#concept-element-namespace" },
                "762210c0": { "dfnID": "762210c0", "dfnText": "container", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-nav-container" }, { "id": "ref-for-nav-container\u2460" }], "title": "3. API" }], "url": "https://html.spec.whatwg.org/multipage/document-sequences.html#nav-container" },
                "7b0d918d": { "dfnID": "7b0d918d", "dfnText": "break", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-iteration-break" }, { "id": "ref-for-iteration-break\u2460" }, { "id": "ref-for-iteration-break\u2461" }, { "id": "ref-for-iteration-break\u2462" }], "title": "3. API" }], "url": "https://infra.spec.whatwg.org/#iteration-break" },
                "7e214bfc": { "dfnID": "7e214bfc", "dfnText": "hidden", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-popover-hidden-state" }], "title": "3. API" }], "url": "https://html.spec.whatwg.org/multipage/popover.html#popover-hidden-state" },
                "82529e79": { "dfnID": "82529e79", "dfnText": "descendant navigables", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-descendant-navigables" }], "title": "3. API" }], "url": "https://html.spec.whatwg.org/multipage/document-sequences.html#descendant-navigables" },
                "82ca3efc": { "dfnID": "82ca3efc", "dfnText": "TypeError", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-exceptiondef-typeerror" }, { "id": "ref-for-exceptiondef-typeerror\u2460" }, { "id": "ref-for-exceptiondef-typeerror\u2461" }], "title": "3. API" }], "url": "https://webidl.spec.whatwg.org/#exceptiondef-typeerror" },
                "83b82cf5": { "dfnID": "83b82cf5", "dfnText": "popover visibility state", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-popover-visibility-state" }], "title": "3. API" }], "url": "https://html.spec.whatwg.org/multipage/popover.html#popover-visibility-state" },
                "85394472": { "dfnID": "85394472", "dfnText": "Document", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-document" }, { "id": "ref-for-document\u2460" }], "title": "3. API" }], "url": "https://dom.spec.whatwg.org/#document" },
                "87fcd40c": { "dfnID": "87fcd40c", "dfnText": "iframe", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-the-iframe-element" }], "title": "2. Model" }, { "refs": [{ "id": "ref-for-the-iframe-element\u2460" }], "title": "3. API" }, { "refs": [{ "id": "ref-for-the-iframe-element\u2461" }], "title": "6. Permissions Policy\nIntegration" }, { "refs": [{ "id": "ref-for-the-iframe-element\u2462" }, { "id": "ref-for-the-iframe-element\u2463" }], "title": "7. Security and Privacy Considerations" }], "url": "https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element" },
                "8b547cc7": { "dfnID": "8b547cc7", "dfnText": "composed", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dom-event-composed" }], "title": "2. Model" }], "url": "https://dom.spec.whatwg.org/#dom-event-composed" },
                "8f59bb58": { "dfnID": "8f59bb58", "dfnText": "top layer", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-document-top-layer" }, { "id": "ref-for-document-top-layer\u2460" }, { "id": "ref-for-document-top-layer\u2461" }, { "id": "ref-for-document-top-layer\u2462" }, { "id": "ref-for-document-top-layer\u2463" }], "title": "2. Model" }, { "refs": [{ "id": "ref-for-document-top-layer\u2464" }, { "id": "ref-for-document-top-layer\u2465" }, { "id": "ref-for-document-top-layer\u2466" }], "title": "3. API" }, { "refs": [{ "id": "ref-for-document-top-layer\u2467" }], "title": "Previously-hosted definitions" }], "url": "https://drafts.csswg.org/css-position-4/#document-top-layer" },
                "95ea01a3": { "dfnID": "95ea01a3", "dfnText": "triggered by a user generated orientation change", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-dfn-triggered-by-a-user-generated-orientation-change" }], "title": "3. API" }], "url": "https://w3c.github.io/screen-orientation/#dfn-triggered-by-a-user-generated-orientation-change" },
                "9638f92b": { "dfnID": "9638f92b", "dfnText": "connected", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-connected" }], "title": "2. Model" }, { "refs": [{ "id": "ref-for-connected\u2460" }, { "id": "ref-for-connected\u2461" }, { "id": "ref-for-connected\u2462" }], "title": "3. API" }], "url": "https://dom.spec.whatwg.org/#connected" },
                "9ac2aadf": { "dfnID": "9ac2aadf", "dfnText": "DocumentOrShadowRoot", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-documentorshadowroot" }], "title": "3. API" }], "url": "https://dom.spec.whatwg.org/#documentorshadowroot" },
                "9c19b7fc": { "dfnID": "9c19b7fc", "dfnText": "navigable", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-navigable" }], "title": "3. API" }], "url": "https://html.spec.whatwg.org/multipage/document-sequences.html#navigable" },
                "9d386f55": { "dfnID": "9d386f55", "dfnText": "event handler event type", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-event-handler-event-type" }, { "id": "ref-for-event-handler-event-type\u2460" }], "title": "3. API" }], "url": "https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type" },
                "a3b18719": { "dfnID": "a3b18719", "dfnText": "append", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-set-append" }, { "id": "ref-for-set-append\u2460" }, { "id": "ref-for-set-append\u2461" }, { "id": "ref-for-set-append\u2462" }, { "id": "ref-for-set-append\u2463" }, { "id": "ref-for-set-append\u2464" }, { "id": "ref-for-set-append\u2465" }], "title": "3. API" }], "url": "https://infra.spec.whatwg.org/#set-append" },
                "a41102eb": { "dfnID": "a41102eb", "dfnText": "permissions policy", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-document-permissions-policy" }], "title": "6. Permissions Policy\nIntegration" }], "url": "https://html.spec.whatwg.org/multipage/dom.html#concept-document-permissions-policy" },
                "a72449dd": { "dfnID": "a72449dd", "dfnText": "in parallel", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-in-parallel" }, { "id": "ref-for-in-parallel\u2460" }], "title": "3. API" }], "url": "https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" },
                "a85a691e": { "dfnID": "a85a691e", "dfnText": "shadow-including inclusive descendant", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-shadow-including-inclusive-descendant" }], "title": "2. Model" }], "url": "https://dom.spec.whatwg.org/#concept-shadow-including-inclusive-descendant" },
                "a973e0fe": { "dfnID": "a973e0fe", "dfnText": "document", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-document" }, { "id": "ref-for-concept-document\u2460" }, { "id": "ref-for-concept-document\u2461" }, { "id": "ref-for-concept-document\u2462" }, { "id": "ref-for-concept-document\u2463" }], "title": "2. Model" }, { "refs": [{ "id": "ref-for-concept-document\u2464" }, { "id": "ref-for-concept-document\u2465" }, { "id": "ref-for-concept-document\u2466" }, { "id": "ref-for-concept-document\u2467" }], "title": "3. API" }, { "refs": [{ "id": "ref-for-concept-document\u2468" }], "title": "6. Permissions Policy\nIntegration" }, { "refs": [{ "id": "ref-for-concept-document\u2460\u24ea" }], "title": "7. Security and Privacy Considerations" }], "url": "https://dom.spec.whatwg.org/#concept-document" },
                "aca22383": { "dfnID": "aca22383", "dfnText": "consume user activation", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-consume-user-activation" }], "title": "3. API" }], "url": "https://html.spec.whatwg.org/multipage/interaction.html#consume-user-activation" },
                "ae8def21": { "dfnID": "ae8def21", "dfnText": "contain", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-list-contain" }], "title": "2. Model" }], "url": "https://infra.spec.whatwg.org/#list-contain" },
                "b9a45e7f": { "dfnID": "b9a45e7f", "dfnText": "::backdrop", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-selectordef-backdrop" }], "title": "Previously-hosted definitions" }], "url": "https://drafts.csswg.org/css-position-4/#selectordef-backdrop" },
                "bd736ec6": { "dfnID": "bd736ec6", "dfnText": "top-level traversable", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-top-level-traversable" }], "title": "4. UI" }], "url": "https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-traversable" },
                "bdbd19d1": { "dfnID": "bdbd19d1", "dfnText": "Promise", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-idl-promise" }, { "id": "ref-for-idl-promise\u2460" }], "title": "3. API" }], "url": "https://webidl.spec.whatwg.org/#idl-promise" },
                "c200d9ce": { "dfnID": "c200d9ce", "dfnText": "retargeting", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-retarget" }], "title": "3. API" }, { "refs": [{ "id": "ref-for-retarget\u2460" }], "title": "5.1. :fullscreen pseudo-class" }], "url": "https://dom.spec.whatwg.org/#retarget" },
                "c6d19e56": { "dfnID": "c6d19e56", "dfnText": "event loop", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-event-loop" }], "title": "2. Model" }], "url": "https://html.spec.whatwg.org/multipage/webappapis.html#event-loop" },
                "cbdc89b4": { "dfnID": "cbdc89b4", "dfnText": "while", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-iteration-while" }], "title": "3. API" }], "url": "https://infra.spec.whatwg.org/#iteration-while" },
                "cc6d9aed": { "dfnID": "cc6d9aed", "dfnText": "event handler content attribute", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-event-handler-content-attributes" }], "title": "3. API" }], "url": "https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-content-attributes" },
                "cc890cc1": { "dfnID": "cc890cc1", "dfnText": "policy-controlled feature", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-policy-controlled-feature" }], "title": "6. Permissions Policy\nIntegration" }], "url": "https://w3c.github.io/webappsec-permissions-policy/#policy-controlled-feature" },
                "collect-documents-to-unfullscreen": { "dfnID": "collect-documents-to-unfullscreen", "dfnText": "collect documents to unfullscreen", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-collect-documents-to-unfullscreen" }, { "id": "ref-for-collect-documents-to-unfullscreen\u2460" }], "title": "3. API" }], "url": "#collect-documents-to-unfullscreen" },
                "css-pc-fullscreen": { "dfnID": "css-pc-fullscreen", "dfnText": ":fullscreen", "external": false, "refSections": [], "url": "#css-pc-fullscreen" },
                "d080b91a": { "dfnID": "d080b91a", "dfnText": "container policy", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-container-policy" }], "title": "6. Permissions Policy\nIntegration" }], "url": "https://w3c.github.io/webappsec-permissions-policy/#container-policy" },
                "d4a9f2b2": { "dfnID": "d4a9f2b2", "dfnText": "remove from the top layer immediately", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-remove-an-element-from-the-top-layer-immediately" }, { "id": "ref-for-remove-an-element-from-the-top-layer-immediately\u2460" }, { "id": "ref-for-remove-an-element-from-the-top-layer-immediately\u2461" }], "title": "2. Model" }], "url": "https://drafts.csswg.org/css-position-4/#remove-an-element-from-the-top-layer-immediately" },
                "dictdef-fullscreenoptions": { "dfnID": "dictdef-fullscreenoptions", "dfnText": "FullscreenOptions", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dictdef-fullscreenoptions" }], "title": "3. API" }], "url": "#dictdef-fullscreenoptions" },
                "dom-document-exitfullscreen": { "dfnID": "dom-document-exitfullscreen", "dfnText": "exitFullscreen()", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-document-exitfullscreen" }, { "id": "ref-for-dom-document-exitfullscreen\u2460" }], "title": "3. API" }, { "refs": [{ "id": "ref-for-dom-document-exitfullscreen\u2461" }, { "id": "ref-for-dom-document-exitfullscreen\u2462" }], "title": "4. UI" }], "url": "#dom-document-exitfullscreen" },
                "dom-document-fullscreen": { "dfnID": "dom-document-fullscreen", "dfnText": "fullscreen", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-document-fullscreen" }], "title": "3. API" }], "url": "#dom-document-fullscreen" },
                "dom-document-fullscreenelement": { "dfnID": "dom-document-fullscreenelement", "dfnText": "fullscreenElement", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-document-fullscreenelement" }, { "id": "ref-for-dom-document-fullscreenelement\u2460" }, { "id": "ref-for-dom-document-fullscreenelement\u2461" }, { "id": "ref-for-dom-document-fullscreenelement\u2462" }], "title": "3. API" }, { "refs": [{ "id": "ref-for-dom-document-fullscreenelement\u2463" }], "title": "5.1. :fullscreen pseudo-class" }], "url": "#dom-document-fullscreenelement" },
                "dom-document-fullscreenenabled": { "dfnID": "dom-document-fullscreenenabled", "dfnText": "fullscreenEnabled", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-document-fullscreenenabled" }, { "id": "ref-for-dom-document-fullscreenenabled\u2460" }], "title": "3. API" }], "url": "#dom-document-fullscreenenabled" },
                "dom-element-requestfullscreen": { "dfnID": "dom-element-requestfullscreen", "dfnText": "requestFullscreen(options)", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-element-requestfullscreen" }, { "id": "ref-for-dom-element-requestfullscreen\u2460" }], "title": "3. API" }, { "refs": [{ "id": "ref-for-dom-element-requestfullscreen\u2461" }, { "id": "ref-for-dom-element-requestfullscreen\u2462" }], "title": "4. UI" }, { "refs": [{ "id": "ref-for-dom-element-requestfullscreen\u2463" }], "title": "7. Security and Privacy Considerations" }], "url": "#dom-element-requestfullscreen" },
                "dom-element-requestfullscreen-options-options": { "dfnID": "dom-element-requestfullscreen-options-options", "dfnText": "options", "external": false, "refSections": [], "url": "#dom-element-requestfullscreen-options-options" },
                "dom-fullscreennavigationui-auto": { "dfnID": "dom-fullscreennavigationui-auto", "dfnText": "auto", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-fullscreennavigationui-auto" }, { "id": "ref-for-dom-fullscreennavigationui-auto\u2460" }], "title": "3. API" }], "url": "#dom-fullscreennavigationui-auto" },
                "dom-fullscreennavigationui-hide": { "dfnID": "dom-fullscreennavigationui-hide", "dfnText": "hide", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-fullscreennavigationui-hide" }, { "id": "ref-for-dom-fullscreennavigationui-hide\u2460" }], "title": "3. API" }], "url": "#dom-fullscreennavigationui-hide" },
                "dom-fullscreennavigationui-show": { "dfnID": "dom-fullscreennavigationui-show", "dfnText": "show", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-fullscreennavigationui-show" }, { "id": "ref-for-dom-fullscreennavigationui-show\u2460" }], "title": "3. API" }], "url": "#dom-fullscreennavigationui-show" },
                "dom-fullscreenoptions-navigationui": { "dfnID": "dom-fullscreenoptions-navigationui", "dfnText": "navigationUI", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-dom-fullscreenoptions-navigationui" }, { "id": "ref-for-dom-fullscreenoptions-navigationui\u2460" }], "title": "3. API" }], "url": "#dom-fullscreenoptions-navigationui" },
                "e6cc3311": { "dfnID": "e6cc3311", "dfnText": "tree", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-tree" }], "title": "3. API" }], "url": "https://dom.spec.whatwg.org/#concept-tree" },
                "e99bd18e": { "dfnID": "e99bd18e", "dfnText": "relevant global object", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-relevant-global" }, { "id": "ref-for-concept-relevant-global\u2460" }], "title": "3. API" }], "url": "https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" },
                "enumdef-fullscreennavigationui": { "dfnID": "enumdef-fullscreennavigationui", "dfnText": "FullscreenNavigationUI", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-enumdef-fullscreennavigationui" }], "title": "3. API" }], "url": "#enumdef-fullscreennavigationui" },
                "eventdef-document-fullscreenchange": { "dfnID": "eventdef-document-fullscreenchange", "dfnText": "fullscreenchange", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-eventdef-document-fullscreenchange" }, { "id": "ref-for-eventdef-document-fullscreenchange\u2460" }, { "id": "ref-for-eventdef-document-fullscreenchange\u2461" }, { "id": "ref-for-eventdef-document-fullscreenchange\u2462" }], "title": "3. API" }], "url": "#eventdef-document-fullscreenchange" },
                "eventdef-document-fullscreenerror": { "dfnID": "eventdef-document-fullscreenerror", "dfnText": "fullscreenerror", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-eventdef-document-fullscreenerror" }], "title": "3. API" }], "url": "#eventdef-document-fullscreenerror" },
                "exit-fullscreen": { "dfnID": "exit-fullscreen", "dfnText": "exit fullscreen", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-exit-fullscreen" }, { "id": "ref-for-exit-fullscreen\u2460" }], "title": "2. Model" }, { "refs": [{ "id": "ref-for-exit-fullscreen\u2461" }], "title": "3. API" }], "url": "#exit-fullscreen" },
                "f052b1ea": { "dfnID": "f052b1ea", "dfnText": "html namespace", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-html-namespace" }, { "id": "ref-for-html-namespace\u2460" }], "title": "3. API" }], "url": "https://infra.spec.whatwg.org/#html-namespace" },
                "f0951476": { "dfnID": "f0951476", "dfnText": "EventHandler", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-eventhandler" }, { "id": "ref-for-eventhandler\u2460" }, { "id": "ref-for-eventhandler\u2461" }, { "id": "ref-for-eventhandler\u2462" }], "title": "3. API" }], "url": "https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" },
                "f23dc013": { "dfnID": "f23dc013", "dfnText": "child navigable", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-child-navigable" }], "title": "7. Security and Privacy Considerations" }], "url": "https://html.spec.whatwg.org/multipage/document-sequences.html#child-navigable" },
                "f3abaffb": { "dfnID": "f3abaffb", "dfnText": "add to the top layer", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-add-an-element-to-the-top-layer" }], "title": "2. Model" }], "url": "https://drafts.csswg.org/css-position-4/#add-an-element-to-the-top-layer" },
                "f937b7b6": { "dfnID": "f937b7b6", "dfnText": "continue", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-iteration-continue" }], "title": "3. API" }], "url": "https://infra.spec.whatwg.org/#iteration-continue" },
                "fa3971e0": { "dfnID": "fa3971e0", "dfnText": "hide all popovers until", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-hide-all-popovers-until" }], "title": "2. Model" }], "url": "https://html.spec.whatwg.org/multipage/popover.html#hide-all-popovers-until" },
                "fefa5851": { "dfnID": "fefa5851", "dfnText": "shadow-including tree order", "external": true, "refSections": [{ "refs": [{ "id": "ref-for-concept-shadow-including-tree-order" }], "title": "2. Model" }], "url": "https://dom.spec.whatwg.org/#concept-shadow-including-tree-order" },
                "fullscreen-an-element": { "dfnID": "fullscreen-an-element", "dfnText": "fullscreen an element", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-fullscreen-an-element" }, { "id": "ref-for-fullscreen-an-element\u2460" }], "title": "3. API" }], "url": "#fullscreen-an-element" },
                "fullscreen-element": { "dfnID": "fullscreen-element", "dfnText": "fullscreen element", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-fullscreen-element" }, { "id": "ref-for-fullscreen-element\u2460" }, { "id": "ref-for-fullscreen-element\u2461" }, { "id": "ref-for-fullscreen-element\u2462" }, { "id": "ref-for-fullscreen-element\u2463" }], "title": "2. Model" }, { "refs": [{ "id": "ref-for-fullscreen-element\u2464" }, { "id": "ref-for-fullscreen-element\u2465" }, { "id": "ref-for-fullscreen-element\u2466" }, { "id": "ref-for-fullscreen-element\u2467" }, { "id": "ref-for-fullscreen-element\u2468" }, { "id": "ref-for-fullscreen-element\u2460\u24ea" }, { "id": "ref-for-fullscreen-element\u2460\u2460" }, { "id": "ref-for-fullscreen-element\u2460\u2461" }, { "id": "ref-for-fullscreen-element\u2460\u2462" }, { "id": "ref-for-fullscreen-element\u2460\u2463" }, { "id": "ref-for-fullscreen-element\u2460\u2464" }, { "id": "ref-for-fullscreen-element\u2460\u2465" }, { "id": "ref-for-fullscreen-element\u2460\u2466" }, { "id": "ref-for-fullscreen-element\u2460\u2467" }, { "id": "ref-for-fullscreen-element\u2460\u2468" }, { "id": "ref-for-fullscreen-element\u2461\u24ea" }, { "id": "ref-for-fullscreen-element\u2461\u2460" }], "title": "3. API" }, { "refs": [{ "id": "ref-for-fullscreen-element\u2461\u2461" }, { "id": "ref-for-fullscreen-element\u2461\u2462" }], "title": "5.1. :fullscreen pseudo-class" }], "url": "#fullscreen-element" },
                "fullscreen-element-ready-check": { "dfnID": "fullscreen-element-ready-check", "dfnText": "fullscreen element ready check", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-fullscreen-element-ready-check" }, { "id": "ref-for-fullscreen-element-ready-check\u2460" }], "title": "3. API" }], "url": "#fullscreen-element-ready-check" },
                "fullscreen-feature": { "dfnID": "fullscreen-feature", "dfnText": "fullscreen", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-fullscreen-feature" }, { "id": "ref-for-fullscreen-feature\u2460" }], "title": "3. API" }], "url": "#fullscreen-feature" },
                "fullscreen-flag": { "dfnID": "fullscreen-flag", "dfnText": "fullscreen flag", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-fullscreen-flag" }, { "id": "ref-for-fullscreen-flag\u2460" }, { "id": "ref-for-fullscreen-flag\u2461" }, { "id": "ref-for-fullscreen-flag\u2462" }, { "id": "ref-for-fullscreen-flag\u2463" }, { "id": "ref-for-fullscreen-flag\u2464" }], "title": "2. Model" }, { "refs": [{ "id": "ref-for-fullscreen-flag\u2465" }, { "id": "ref-for-fullscreen-flag\u2466" }], "title": "3. API" }, { "refs": [{ "id": "ref-for-fullscreen-flag\u2467" }], "title": "5.1. :fullscreen pseudo-class" }], "url": "#fullscreen-flag" },
                "fullscreen-is-supported": { "dfnID": "fullscreen-is-supported", "dfnText": "Fullscreen is supported", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-fullscreen-is-supported" }, { "id": "ref-for-fullscreen-is-supported\u2460" }, { "id": "ref-for-fullscreen-is-supported\u2461" }], "title": "3. API" }], "url": "#fullscreen-is-supported" },
                "fully-exit-fullscreen": { "dfnID": "fully-exit-fullscreen", "dfnText": "fully exit fullscreen", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-fully-exit-fullscreen" }], "title": "2. Model" }, { "refs": [{ "id": "ref-for-fully-exit-fullscreen\u2460" }], "title": "4. UI" }], "url": "#fully-exit-fullscreen" },
                "handler-document-onfullscreenchange": { "dfnID": "handler-document-onfullscreenchange", "dfnText": "onfullscreenchange", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-handler-document-onfullscreenchange" }, { "id": "ref-for-handler-document-onfullscreenchange\u2460" }], "title": "3. API" }], "url": "#handler-document-onfullscreenchange" },
                "handler-document-onfullscreenerror": { "dfnID": "handler-document-onfullscreenerror", "dfnText": "onfullscreenerror", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-handler-document-onfullscreenerror" }, { "id": "ref-for-handler-document-onfullscreenerror\u2460" }], "title": "3. API" }], "url": "#handler-document-onfullscreenerror" },
                "iframe-fullscreen-flag": { "dfnID": "iframe-fullscreen-flag", "dfnText": "iframe fullscreen flag", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-iframe-fullscreen-flag" }], "title": "2. Model" }, { "refs": [{ "id": "ref-for-iframe-fullscreen-flag\u2460" }, { "id": "ref-for-iframe-fullscreen-flag\u2461" }], "title": "3. API" }], "url": "#iframe-fullscreen-flag" },
                "list-of-pending-fullscreen-events": { "dfnID": "list-of-pending-fullscreen-events", "dfnText": "list of pending fullscreen events", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-list-of-pending-fullscreen-events" }, { "id": "ref-for-list-of-pending-fullscreen-events\u2460" }], "title": "2. Model" }, { "refs": [{ "id": "ref-for-list-of-pending-fullscreen-events\u2461" }, { "id": "ref-for-list-of-pending-fullscreen-events\u2462" }, { "id": "ref-for-list-of-pending-fullscreen-events\u2463" }, { "id": "ref-for-list-of-pending-fullscreen-events\u2464" }, { "id": "ref-for-list-of-pending-fullscreen-events\u2465" }], "title": "3. API" }], "url": "#list-of-pending-fullscreen-events" },
                "run-the-fullscreen-steps": { "dfnID": "run-the-fullscreen-steps", "dfnText": "run the fullscreen steps", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-run-the-fullscreen-steps" }, { "id": "ref-for-run-the-fullscreen-steps\u2460" }], "title": "3. API" }], "url": "#run-the-fullscreen-steps" },
                "simple-fullscreen-document": { "dfnID": "simple-fullscreen-document", "dfnText": "simple fullscreen document", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-simple-fullscreen-document" }, { "id": "ref-for-simple-fullscreen-document\u2460" }, { "id": "ref-for-simple-fullscreen-document\u2461" }], "title": "3. API" }], "url": "#simple-fullscreen-document" },
                "unfullscreen-a-document": { "dfnID": "unfullscreen-a-document", "dfnText": "unfullscreen a document", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-unfullscreen-a-document" }, { "id": "ref-for-unfullscreen-a-document\u2460" }, { "id": "ref-for-unfullscreen-a-document\u2461" }], "title": "3. API" }], "url": "#unfullscreen-a-document" },
                "unfullscreen-an-element": { "dfnID": "unfullscreen-an-element", "dfnText": "unfullscreen an element", "external": false, "refSections": [{ "refs": [{ "id": "ref-for-unfullscreen-an-element" }, { "id": "ref-for-unfullscreen-an-element\u2460" }, { "id": "ref-for-unfullscreen-an-element\u2461" }], "title": "2. Model" }, { "refs": [{ "id": "ref-for-unfullscreen-an-element\u2462" }, { "id": "ref-for-unfullscreen-an-element\u2463" }], "title": "3. API" }], "url": "#unfullscreen-an-element" },
            };

            document.addEventListener("DOMContentLoaded", () => {
                genAllDfnPanels();

                document.body.addEventListener("click", (e) => {
                    // If not handled already, just hide all dfn panels.
                    hideAllDfnPanels();
                });
            });

            window.addEventListener("resize", () => {
                // Pin any visible dfn panel
                queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(el => positionDfnPanel(el));
            });

            function genAllDfnPanels() {
                for (const panelData of Object.values(dfnPanelData)) {
                    const dfnID = panelData.dfnID;
                    const dfn = document.getElementById(dfnID);
                    if (!dfn) {
                        console.log(`Can't find dfn#${dfnID}.`, panelData);
                        continue;
                    }
                    dfn.panelData = panelData;
                    insertDfnPopupAction(dfn);
                }
            }

            function genDfnPanel(dfn, { dfnID, url, dfnText, refSections, external }) {
                const dfnPanel = mk.aside({
                    class: "dfn-panel on",
                    id: `infopanel-for-${dfnID}`,
                    "data-for": dfnID,
                    "aria-labelled-by": `infopaneltitle-for-${dfnID}`,
                },
                    mk.span({ id: `infopaneltitle-for-${dfnID}`, style: "display:none" },
                        `Info about the '${dfnText}' ${external ? "external" : ""} reference.`),
                    mk.a({ href: url, class: "dfn-link" }, url),
                    refSections.length == 0 ? [] :
                        mk.b({}, "Referenced in:"),
                    mk.ul({},
                        ...refSections.map(section =>
                            mk.li({},
                                ...section.refs.map((ref, refI) =>
                                    [
                                        mk.a({ href: `#${ref.id}` },
                                            (refI == 0) ? section.title : `(${refI + 1})`
                                        ),
                                        " ",
                                    ]
                                ),
                            ),
                        ),
                    ),
                    genLinkingSyntaxes(dfn),
                );

                dfnPanel.addEventListener('click', (event) => {
                    if (event.target.nodeName == 'A') {
                        scrollToTargetAndHighlight(event);
                        pinDfnPanel(dfnPanel);
                    }
                    event.stopPropagation();
                    refocusOnTarget(event);
                });
                dfnPanel.addEventListener('keydown', (event) => {
                    if (event.keyCode == 27) { // Escape key
                        hideDfnPanel({ dfnPanel });
                        event.stopPropagation();
                        event.preventDefault();
                    }
                });

                dfnPanel.dfn = dfn;
                dfn.dfnPanel = dfnPanel;
                return dfnPanel;
            }



            function hideAllDfnPanels() {
                // Delete the currently-active dfn panel.
                queryAll(".dfn-panel").forEach(dfnPanel => hideDfnPanel({ dfnPanel }));
            }

            function showDfnPanel(dfn) {
                hideAllDfnPanels(); // Only display one at a time.

                dfn.setAttribute("aria-expanded", "true");

                const dfnPanel = genDfnPanel(dfn, dfn.panelData);

                // Give the dfn a unique tabindex, and then
                // give all the tabbable panel bits successive indexes.
                let tabIndex = 100;
                dfn.tabIndex = tabIndex++;
                const tabbable = dfnPanel.querySelectorAll(":is(a, button)");
                for (const el of tabbable) {
                    el.tabIndex = tabIndex++;
                }

                append(document.body, dfnPanel);
                positionDfnPanel(dfnPanel);
            }

            function positionDfnPanel(dfnPanel) {
                const dfn = dfnPanel.dfn;
                const dfnPos = getBounds(dfn);
                dfnPanel.style.top = dfnPos.bottom + "px";
                dfnPanel.style.left = dfnPos.left + "px";

                const panelPos = dfnPanel.getBoundingClientRect();
                const panelMargin = 8;
                const maxRight = document.body.parentNode.clientWidth - panelMargin;
                if (panelPos.right > maxRight) {
                    const overflowAmount = panelPos.right - maxRight;
                    const newLeft = Math.max(panelMargin, dfnPos.left - overflowAmount);
                    dfnPanel.style.left = newLeft + "px";
                }
            }

            function pinDfnPanel(dfnPanel) {
                // Switch it to "activated" state, which pins it.
                dfnPanel.classList.add("activated");
                dfnPanel.style.position = "fixed";
                dfnPanel.style.left = null;
                dfnPanel.style.top = null;
            }

            function hideDfnPanel({ dfn, dfnPanel }) {
                if (!dfnPanel) dfnPanel = dfn.dfnPanel;
                if (!dfn) dfn = dfnPanel.dfn;
                dfn.dfnPanel = undefined;
                dfnPanel.dfn = undefined;
                dfn.setAttribute("aria-expanded", "false");
                dfn.tabIndex = undefined;
                dfnPanel.remove()
            }

            function toggleDfnPanel(dfn) {
                if (dfn.dfnPanel) {
                    hideDfnPanel(dfn);
                } else {
                    showDfnPanel(dfn);
                }
            }

            function insertDfnPopupAction(dfn) {
                dfn.setAttribute('role', 'button');
                dfn.setAttribute('aria-expanded', 'false')
                dfn.tabIndex = 0;
                dfn.classList.add('has-dfn-panel');
                dfn.addEventListener('click', (event) => {
                    toggleDfnPanel(dfn);
                    event.stopPropagation();
                });
                dfn.addEventListener('keypress', (event) => {
                    const kc = event.keyCode;
                    // 32->Space, 13->Enter
                    if (kc == 32 || kc == 13) {
                        toggleDfnPanel(dfn);
                        event.stopPropagation();
                        event.preventDefault();
                    }
                });
            }

            function refocusOnTarget(event) {
                const target = event.target;
                setTimeout(() => {
                    // Refocus on the event.target element.
                    // This is needed after browser scrolls to the destination.
                    target.focus();
                });
            }

            // TODO: shared util
            // Returns the root-level absolute position {left and top} of element.
            function getBounds(el, relativeTo = document.body) {
                const relativeRect = relativeTo.getBoundingClientRect();
                const elRect = el.getBoundingClientRect();
                const top = elRect.top - relativeRect.top;
                const left = elRect.left - relativeRect.left;
                return {
                    top,
                    left,
                    bottom: top + elRect.height,
                    right: left + elRect.width,
                }
            }

            function scrollToTargetAndHighlight(event) {
                let hash = event.target.hash;
                if (hash) {
                    hash = decodeURIComponent(hash.substring(1));
                    const dest = document.getElementById(hash);
                    if (dest) {
                        dest.classList.add('highlighted');
                        setTimeout(() => dest.classList.remove('highlighted'), 1000);
                    }
                }
            }

            // Functions, divided by link type, that wrap an autolink's
            // contents with the appropriate outer syntax.
            // Alternately, a string naming another type they format
            // the same as.
            function needsFor(type) {
                switch (type) {
                    case "descriptor":
                    case "value":
                    case "element-attr":
                    case "attr-value":
                    case "element-state":
                    case "method":
                    case "constructor":
                    case "argument":
                    case "attribute":
                    case "const":
                    case "dict-member":
                    case "event":
                    case "enum-value":
                    case "stringifier":
                    case "serializer":
                    case "iterator":
                    case "maplike":
                    case "setlike":
                    case "state":
                    case "mode":
                    case "context":
                    case "facet": return true;

                    default: return false;
                }
            }
            function refusesFor(type) {
                switch (type) {
                    case "property":
                    case "element":
                    case "interface":
                    case "namespace":
                    case "callback":
                    case "dictionary":
                    case "enum":
                    case "exception":
                    case "typedef":
                    case "http-header":
                    case "permission": return true;

                    default: return false;
                }
            }
            function linkFormatterFromType(type) {
                switch (type) {
                    case 'scheme':
                    case 'permission':
                    case 'dfn': return (text) => `[=${text}=]`;

                    case 'abstract-op': return (text) => `[\$${text}\$]`;

                    case 'function':
                    case 'at-rule':
                    case 'selector':
                    case 'value': return (text) => `''${text}''`;

                    case 'http-header': return (text) => `[:${text}:]`;

                    case 'interface':
                    case 'constructor':
                    case 'method':
                    case 'argument':
                    case 'attribute':
                    case 'callback':
                    case 'dictionary':
                    case 'dict-member':
                    case 'enum':
                    case 'enum-value':
                    case 'exception':
                    case 'const':
                    case 'typedef':
                    case 'stringifier':
                    case 'serializer':
                    case 'iterator':
                    case 'maplike':
                    case 'setlike':
                    case 'extended-attribute':
                    case 'event':
                    case 'idl': return (text) => `{{${text}}}`;

                    case 'element-state':
                    case 'element-attr':
                    case 'attr-value':
                    case 'element': return (element) => `<{${element}}>`;

                    case 'grammar': return (text) => `${text} (within a <pre class=prod>)`;

                    case 'type': return (text) => `<<${text}>>`;

                    case 'descriptor':
                    case 'property': return (text) => `'${text}'`;

                    default: return;
                };
            };

            function genLinkingSyntaxes(dfn) {
                if (dfn.tagName != "DFN") return;

                const type = dfn.getAttribute('data-dfn-type');
                if (!type) {
                    console.log(`<dfn> doesn't have a data-dfn-type:`, dfn);
                    return [];
                }

                // Return a function that wraps link text based on the type
                const linkFormatter = linkFormatterFromType(type);
                if (!linkFormatter) {
                    console.log(`<dfn> has an unknown data-dfn-type:`, dfn);
                    return [];
                }

                let ltAlts;
                if (dfn.hasAttribute('data-lt')) {
                    ltAlts = dfn.getAttribute('data-lt')
                        .split("|")
                        .map(x => x.trim());
                } else {
                    ltAlts = [dfn.textContent.trim()];
                }
                if (type == "type") {
                    // lt of "<foo>", but "foo" is the interior;
                    // <<foo/bar>> is how you write it with a for,
                    // not <foo/<bar>> or whatever.
                    for (var i = 0; i < ltAlts.length; i++) {
                        const lt = ltAlts[i];
                        const match = /<(.*)>/.exec(lt);
                        if (match) { ltAlts[i] = match[1]; }
                    }
                }

                let forAlts;
                if (dfn.hasAttribute('data-dfn-for')) {
                    forAlts = dfn.getAttribute('data-dfn-for')
                        .split(",")
                        .map(x => x.trim());
                } else {
                    forAlts = [''];
                }

                let linkingSyntaxes = [];
                if (!needsFor(type)) {
                    for (const lt of ltAlts) {
                        linkingSyntaxes.push(linkFormatter(lt));
                    }
                }
                if (!refusesFor(type)) {
                    for (const f of forAlts) {
                        linkingSyntaxes.push(linkFormatter(`${f}/${ltAlts[0]}`))
                    }
                }
                return [
                    mk.b({}, 'Possible linking syntaxes:'),
                    mk.ul({},
                        ...linkingSyntaxes.map(link => {
                            const copyLink = async () =>
                                await navigator.clipboard.writeText(link);
                            return mk.li({},
                                mk.div({ class: 'link-item' },
                                    mk.button({
                                        class: 'copy-icon', title: 'Copy',
                                        type: 'button',
                                        _onclick: copyLink,
                                        tabindex: 0,
                                    }, mk.span({ class: 'icon' })),
                                    mk.span({}, link)
                                )
                            );
                        })
                    )
                ];
            }
        }
    </script>
    <script>/* Boilerplate: script-position-annos */
        "use strict";
        {
            function repositionAnnoPanels() {
                const panels = [...document.querySelectorAll("[data-anno-for]")];
                hydratePanels(panels);
                let vSoFar = 0;
                for (const panel of panels.sort(cmpTops)) {
                    if (panel.top < vSoFar) {
                        panel.top = vSoFar;
                        panel.style.top = vSoFar + "px";
                    }
                    vSoFar = panel.top + panel.height + 15;
                }
            }
            function hydratePanels(panels) {
                const main = document.querySelector("main");
                let mainRect;
                if (main) mainRect = main.getBoundingClientRect();
                // First display them all, if they're not already visible.
                for (const panel of panels) {
                    panel.classList.remove("unpositioned");
                }
                // Measure them all
                for (const panel of panels) {
                    const dfn = document.getElementById(panel.getAttribute("data-anno-for"));
                    if (!dfn) {
                        console.log("Can't find the annotation panel target:", panel);
                        continue;
                    }
                    panel.dfn = dfn;
                    panel.top = window.scrollY + dfn.getBoundingClientRect().top;
                    let panelRect = panel.getBoundingClientRect();
                    panel.height = panelRect.height;
                    if (main) {
                        panel.overlappingMain = panelRect.left < mainRect.right;
                    } else {
                        panel.overlappingMain = false;
                    }
                }
                // And finally position them
                for (const panel of panels) {
                    const dfn = panel.dfn;
                    if (!dfn) continue;
                    panel.style.top = panel.top + "px";
                    panel.classList.toggle("overlapping-main", panel.overlappingMain);
                }
            }

            function cmpTops(a, b) {
                return a.top - b.top;
            }

            window.addEventListener("load", repositionAnnoPanels);
            window.addEventListener("resize", repositionAnnoPanels);
        }
    </script>
    <script>/* Boilerplate: script-ref-hints */
        "use strict";
        {
            let refsData = {
                "#collect-documents-to-unfullscreen": { "export": true, "for_": [], "level": "", "normative": true, "shortname": "fullscreen", "spec": "fullscreen", "status": "local", "text": "collect documents to unfullscreen", "type": "dfn", "url": "#collect-documents-to-unfullscreen" },
                "#dictdef-fullscreenoptions": { "export": true, "for_": [], "level": "", "normative": true, "shortname": "fullscreen", "spec": "fullscreen", "status": "local", "text": "FullscreenOptions", "type": "dictionary", "url": "#dictdef-fullscreenoptions" },
                "#dom-document-exitfullscreen": { "export": true, "for_": ["Document"], "level": "", "normative": true, "shortname": "fullscreen", "spec": "fullscreen", "status": "local", "text": "exitFullscreen()", "type": "method", "url": "#dom-document-exitfullscreen" },
                "#dom-document-fullscreen": { "export": true, "for_": ["Document"], "level": "", "normative": true, "shortname": "fullscreen", "spec": "fullscreen", "status": "local", "text": "fullscreen", "type": "attribute", "url": "#dom-document-fullscreen" },
                "#dom-document-fullscreenelement": { "export": true, "for_": ["DocumentOrShadowRoot"], "level": "", "normative": true, "shortname": "fullscreen", "spec": "fullscreen", "status": "local", "text": "fullscreenElement", "type": "attribute", "url": "#dom-document-fullscreenelement" },
                "#dom-document-fullscreenenabled": { "export": true, "for_": ["Document"], "level": "", "normative": true, "shortname": "fullscreen", "spec": "fullscreen", "status": "local", "text": "fullscreenEnabled", "type": "attribute", "url": "#dom-document-fullscreenenabled" },
                "#dom-element-requestfullscreen": { "export": true, "for_": ["Element"], "level": "", "normative": true, "shortname": "fullscreen", "spec": "fullscreen", "status": "local", "text": "requestFullscreen(options)", "type": "method", "url": "#dom-element-requestfullscreen" },
                "#dom-fullscreennavigationui-auto": { "export": true, "for_": ["FullscreenNavigationUI"], "level": "", "normative": true, "shortname": "fullscreen", "spec": "fullscreen", "status": "local", "text": "\"auto\"", "type": "enum-value", "url": "#dom-fullscreennavigationui-auto" },
                "#dom-fullscreennavigationui-hide": { "export": true, "for_": ["FullscreenNavigationUI"], "level": "", "normative": true, "shortname": "fullscreen", "spec": "fullscreen", "status": "local", "text": "\"hide\"", "type": "enum-value", "url": "#dom-fullscreennavigationui-hide" },
                "#dom-fullscreennavigationui-show": { "export": true, "for_": ["FullscreenNavigationUI"], "level": "", "normative": true, "shortname": "fullscreen", "spec": "fullscreen", "status": "local", "text": "\"show\"", "type": "enum-value", "url": "#dom-fullscreennavigationui-show" },
                "#dom-fullscreenoptions-navigationui": { "export": true, "for_": ["FullscreenOptions"], "level": "", "normative": true, "shortname": "fullscreen", "spec": "fullscreen", "status": "local", "text": "navigationUI", "type": "dict-member", "url": "#dom-fullscreenoptions-navigationui" },
                "#enumdef-fullscreennavigationui": { "export": true, "for_": [], "level": "", "normative": true, "shortname": "fullscreen", "spec": "fullscreen", "status": "local", "text": "FullscreenNavigationUI", "type": "enum", "url": "#enumdef-fullscreennavigationui" },
                "#eventdef-document-fullscreenchange": { "export": true, "for_": ["Document", "Element"], "level": "", "normative": true, "shortname": "fullscreen", "spec": "fullscreen", "status": "local", "text": "fullscreenchange", "type": "event", "url": "#eventdef-document-fullscreenchange" },
                "#eventdef-document-fullscreenerror": { "export": true, "for_": ["Document", "Element"], "level": "", "normative": true, "shortname": "fullscreen", "spec": "fullscreen", "status": "local", "text": "fullscreenerror", "type": "event", "url": "#eventdef-document-fullscreenerror" },
                "#exit-fullscreen": { "export": true, "for_": [], "level": "", "normative": true, "shortname": "fullscreen", "spec": "fullscreen", "status": "local", "text": "exit fullscreen", "type": "dfn", "url": "#exit-fullscreen" },
                "#fullscreen-an-element": { "export": true, "for_": [], "level": "", "normative": true, "shortname": "fullscreen", "spec": "fullscreen", "status": "local", "text": "fullscreen an element", "type": "dfn", "url": "#fullscreen-an-element" },
                "#fullscreen-element": { "export": true, "for_": [], "level": "", "normative": true, "shortname": "fullscreen", "spec": "fullscreen", "status": "local", "text": "fullscreen element", "type": "dfn", "url": "#fullscreen-element" },
                "#fullscreen-element-ready-check": { "export": true, "for_": [], "level": "", "normative": true, "shortname": "fullscreen", "spec": "fullscreen", "status": "local", "text": "fullscreen element ready check", "type": "dfn", "url": "#fullscreen-element-ready-check" },
                "#fullscreen-feature": { "export": true, "for_": [], "level": "", "normative": true, "shortname": "fullscreen", "spec": "fullscreen", "status": "local", "text": "fullscreen-feature", "type": "dfn", "url": "#fullscreen-feature" },
                "#fullscreen-flag": { "export": true, "for_": [], "level": "", "normative": true, "shortname": "fullscreen", "spec": "fullscreen", "status": "local", "text": "fullscreen flag", "type": "dfn", "url": "#fullscreen-flag" },
                "#fullscreen-is-supported": { "export": true, "for_": [], "level": "", "normative": true, "shortname": "fullscreen", "spec": "fullscreen", "status": "local", "text": "fullscreen is supported", "type": "dfn", "url": "#fullscreen-is-supported" },
                "#fully-exit-fullscreen": { "export": true, "for_": [], "level": "", "normative": true, "shortname": "fullscreen", "spec": "fullscreen", "status": "local", "text": "fully exit fullscreen", "type": "dfn", "url": "#fully-exit-fullscreen" },
                "#handler-document-onfullscreenchange": { "export": true, "for_": ["Document", "Element"], "level": "", "normative": true, "shortname": "fullscreen", "spec": "fullscreen", "status": "local", "text": "onfullscreenchange", "type": "attribute", "url": "#handler-document-onfullscreenchange" },
                "#handler-document-onfullscreenerror": { "export": true, "for_": ["Document", "Element"], "level": "", "normative": true, "shortname": "fullscreen", "spec": "fullscreen", "status": "local", "text": "onfullscreenerror", "type": "attribute", "url": "#handler-document-onfullscreenerror" },
                "#iframe-fullscreen-flag": { "export": true, "for_": [], "level": "", "normative": true, "shortname": "fullscreen", "spec": "fullscreen", "status": "local", "text": "iframe fullscreen flag", "type": "dfn", "url": "#iframe-fullscreen-flag" },
                "#list-of-pending-fullscreen-events": { "export": true, "for_": [], "level": "", "normative": true, "shortname": "fullscreen", "spec": "fullscreen", "status": "local", "text": "list of pending fullscreen events", "type": "dfn", "url": "#list-of-pending-fullscreen-events" },
                "#run-the-fullscreen-steps": { "export": true, "for_": [], "level": "", "normative": true, "shortname": "fullscreen", "spec": "fullscreen", "status": "local", "text": "run the fullscreen steps", "type": "dfn", "url": "#run-the-fullscreen-steps" },
                "#simple-fullscreen-document": { "export": true, "for_": [], "level": "", "normative": true, "shortname": "fullscreen", "spec": "fullscreen", "status": "local", "text": "simple fullscreen document", "type": "dfn", "url": "#simple-fullscreen-document" },
                "#unfullscreen-a-document": { "export": true, "for_": [], "level": "", "normative": true, "shortname": "fullscreen", "spec": "fullscreen", "status": "local", "text": "unfullscreen a document", "type": "dfn", "url": "#unfullscreen-a-document" },
                "#unfullscreen-an-element": { "export": true, "for_": [], "level": "", "normative": true, "shortname": "fullscreen", "spec": "fullscreen", "status": "local", "text": "unfullscreen an element", "type": "dfn", "url": "#unfullscreen-an-element" },
                "https://dom.spec.whatwg.org/#concept-document": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "document", "type": "dfn", "url": "https://dom.spec.whatwg.org/#concept-document" },
                "https://dom.spec.whatwg.org/#concept-documentfragment-host": { "export": true, "for_": ["DocumentFragment"], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "host", "type": "dfn", "url": "https://dom.spec.whatwg.org/#concept-documentfragment-host" },
                "https://dom.spec.whatwg.org/#concept-element": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "element", "type": "dfn", "url": "https://dom.spec.whatwg.org/#concept-element" },
                "https://dom.spec.whatwg.org/#concept-element-namespace": { "export": true, "for_": ["Element"], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "namespace", "type": "dfn", "url": "https://dom.spec.whatwg.org/#concept-element-namespace" },
                "https://dom.spec.whatwg.org/#concept-event-fire": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "fire an event", "type": "dfn", "url": "https://dom.spec.whatwg.org/#concept-event-fire" },
                "https://dom.spec.whatwg.org/#concept-node-document": { "export": true, "for_": ["Node"], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "node document", "type": "dfn", "url": "https://dom.spec.whatwg.org/#concept-node-document" },
                "https://dom.spec.whatwg.org/#concept-node-remove-ext": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "removing steps", "type": "dfn", "url": "https://dom.spec.whatwg.org/#concept-node-remove-ext" },
                "https://dom.spec.whatwg.org/#concept-shadow-including-inclusive-descendant": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "shadow-including inclusive descendant", "type": "dfn", "url": "https://dom.spec.whatwg.org/#concept-shadow-including-inclusive-descendant" },
                "https://dom.spec.whatwg.org/#concept-shadow-including-tree-order": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "shadow-including tree order", "type": "dfn", "url": "https://dom.spec.whatwg.org/#concept-shadow-including-tree-order" },
                "https://dom.spec.whatwg.org/#concept-shadow-root": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "shadow root", "type": "dfn", "url": "https://dom.spec.whatwg.org/#concept-shadow-root" },
                "https://dom.spec.whatwg.org/#concept-tree": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "tree", "type": "dfn", "url": "https://dom.spec.whatwg.org/#concept-tree" },
                "https://dom.spec.whatwg.org/#concept-tree-order": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "tree order", "type": "dfn", "url": "https://dom.spec.whatwg.org/#concept-tree-order" },
                "https://dom.spec.whatwg.org/#connected": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "connected", "type": "dfn", "url": "https://dom.spec.whatwg.org/#connected" },
                "https://dom.spec.whatwg.org/#document": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "Document", "type": "interface", "url": "https://dom.spec.whatwg.org/#document" },
                "https://dom.spec.whatwg.org/#documentorshadowroot": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "DocumentOrShadowRoot", "type": "interface", "url": "https://dom.spec.whatwg.org/#documentorshadowroot" },
                "https://dom.spec.whatwg.org/#dom-event-bubbles": { "export": true, "for_": ["Event"], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "bubbles", "type": "attribute", "url": "https://dom.spec.whatwg.org/#dom-event-bubbles" },
                "https://dom.spec.whatwg.org/#dom-event-composed": { "export": true, "for_": ["Event"], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "composed", "type": "attribute", "url": "https://dom.spec.whatwg.org/#dom-event-composed" },
                "https://dom.spec.whatwg.org/#element": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "Element", "type": "interface", "url": "https://dom.spec.whatwg.org/#element" },
                "https://dom.spec.whatwg.org/#element-shadow-host": { "export": true, "for_": ["Element"], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "shadow host", "type": "dfn", "url": "https://dom.spec.whatwg.org/#element-shadow-host" },
                "https://dom.spec.whatwg.org/#retarget": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "retargeting", "type": "dfn", "url": "https://dom.spec.whatwg.org/#retarget" },
                "https://dom.spec.whatwg.org/#shadowroot": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "dom", "spec": "dom", "status": "current", "text": "ShadowRoot", "type": "interface", "url": "https://dom.spec.whatwg.org/#shadowroot" },
                "https://drafts.csswg.org/css-position-4/#add-an-element-to-the-top-layer": { "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-position", "spec": "css-position-4", "status": "current", "text": "add to the top layer", "type": "dfn", "url": "https://drafts.csswg.org/css-position-4/#add-an-element-to-the-top-layer" },
                "https://drafts.csswg.org/css-position-4/#document-top-layer": { "export": true, "for_": ["Document"], "level": "4", "normative": true, "shortname": "css-position", "spec": "css-position-4", "status": "current", "text": "top layer", "type": "dfn", "url": "https://drafts.csswg.org/css-position-4/#document-top-layer" },
                "https://drafts.csswg.org/css-position-4/#remove-an-element-from-the-top-layer-immediately": { "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-position", "spec": "css-position-4", "status": "current", "text": "remove from the top layer immediately", "type": "dfn", "url": "https://drafts.csswg.org/css-position-4/#remove-an-element-from-the-top-layer-immediately" },
                "https://drafts.csswg.org/css-position-4/#selectordef-backdrop": { "export": true, "for_": [], "level": "4", "normative": true, "shortname": "css-position", "spec": "css-position-4", "status": "current", "text": "::backdrop", "type": "selector", "url": "https://drafts.csswg.org/css-position-4/#selectordef-backdrop" },
                "https://html.spec.whatwg.org/multipage/document-lifecycle.html#unloading-document-cleanup-steps": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "unloading document cleanup steps", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/document-lifecycle.html#unloading-document-cleanup-steps" },
                "https://html.spec.whatwg.org/multipage/document-sequences.html#child-navigable": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "child navigable", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/document-sequences.html#child-navigable" },
                "https://html.spec.whatwg.org/multipage/document-sequences.html#descendant-navigables": { "export": true, "for_": ["Document"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "descendant navigables", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/document-sequences.html#descendant-navigables" },
                "https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active": { "export": true, "for_": ["Document"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "fully active", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active" },
                "https://html.spec.whatwg.org/multipage/document-sequences.html#nav-container": { "export": true, "for_": ["navigable"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "container", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/document-sequences.html#nav-container" },
                "https://html.spec.whatwg.org/multipage/document-sequences.html#nav-document": { "export": true, "for_": ["navigable"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "active document", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/document-sequences.html#nav-document" },
                "https://html.spec.whatwg.org/multipage/document-sequences.html#nav-top": { "export": true, "for_": ["navigable"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "top-level traversable", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/document-sequences.html#nav-top" },
                "https://html.spec.whatwg.org/multipage/document-sequences.html#navigable": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "navigable", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/document-sequences.html#navigable" },
                "https://html.spec.whatwg.org/multipage/document-sequences.html#node-navigable": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "node navigable", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/document-sequences.html#node-navigable" },
                "https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-traversable": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "top-level traversable", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-traversable" },
                "https://html.spec.whatwg.org/multipage/dom.html#concept-document-permissions-policy": { "export": true, "for_": ["Document"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "permissions policy", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/dom.html#concept-document-permissions-policy" },
                "https://html.spec.whatwg.org/multipage/iframe-embed-object.html#allowed-to-use": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "allowed to use", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/iframe-embed-object.html#allowed-to-use" },
                "https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allow": { "export": true, "for_": ["iframe"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "allow", "type": "element-attr", "url": "https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allow" },
                "https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allowfullscreen": { "export": true, "for_": ["iframe"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "allowfullscreen", "type": "element-attr", "url": "https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allowfullscreen" },
                "https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "iframe", "type": "element", "url": "https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element" },
                "https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "in parallel", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" },
                "https://html.spec.whatwg.org/multipage/interaction.html#consume-user-activation": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "consume user activation", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/interaction.html#consume-user-activation" },
                "https://html.spec.whatwg.org/multipage/interaction.html#transient-activation": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "transient activation", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/interaction.html#transient-activation" },
                "https://html.spec.whatwg.org/multipage/interactive-elements.html#the-dialog-element": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "dialog", "type": "element", "url": "https://html.spec.whatwg.org/multipage/interactive-elements.html#the-dialog-element" },
                "https://html.spec.whatwg.org/multipage/nav-history-apis.html#window": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "Window", "type": "interface", "url": "https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" },
                "https://html.spec.whatwg.org/multipage/popover.html#hide-all-popovers-until": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "hide all popovers until", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/popover.html#hide-all-popovers-until" },
                "https://html.spec.whatwg.org/multipage/popover.html#popover-hidden-state": { "export": true, "for_": ["popover visibility state"], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "hidden", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/popover.html#popover-hidden-state" },
                "https://html.spec.whatwg.org/multipage/popover.html#popover-visibility-state": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "popover visibility state", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/popover.html#popover-visibility-state" },
                "https://html.spec.whatwg.org/multipage/popover.html#topmost-popover-ancestor": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "topmost popover ancestor", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/popover.html#topmost-popover-ancestor" },
                "https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "relevant global object", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" },
                "https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-content-attributes": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "event handler content attribute", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-content-attributes" },
                "https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "event handler event type", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type" },
                "https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "event handler idl attribute", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes" },
                "https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "event handler", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers" },
                "https://html.spec.whatwg.org/multipage/webappapis.html#event-loop": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "event loop", "type": "dfn", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#event-loop" },
                "https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "html", "spec": "html", "status": "current", "text": "EventHandler", "type": "typedef", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" },
                "https://infra.spec.whatwg.org/#html-namespace": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "html namespace", "type": "dfn", "url": "https://infra.spec.whatwg.org/#html-namespace" },
                "https://infra.spec.whatwg.org/#iteration-break": { "export": true, "for_": ["iteration"], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "break", "type": "dfn", "url": "https://infra.spec.whatwg.org/#iteration-break" },
                "https://infra.spec.whatwg.org/#iteration-continue": { "export": true, "for_": ["iteration"], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "continue", "type": "dfn", "url": "https://infra.spec.whatwg.org/#iteration-continue" },
                "https://infra.spec.whatwg.org/#iteration-while": { "export": true, "for_": ["iteration"], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "while", "type": "dfn", "url": "https://infra.spec.whatwg.org/#iteration-while" },
                "https://infra.spec.whatwg.org/#list-contain": { "export": true, "for_": ["list", "stack", "queue", "set"], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "contain", "type": "dfn", "url": "https://infra.spec.whatwg.org/#list-contain" },
                "https://infra.spec.whatwg.org/#list-empty": { "export": true, "for_": ["list", "stack", "queue", "set"], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "empty", "type": "dfn", "url": "https://infra.spec.whatwg.org/#list-empty" },
                "https://infra.spec.whatwg.org/#list-item": { "export": true, "for_": ["list", "stack", "queue", "set"], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "item", "type": "dfn", "url": "https://infra.spec.whatwg.org/#list-item" },
                "https://infra.spec.whatwg.org/#list-iterate": { "export": true, "for_": ["list", "set"], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "for each", "type": "dfn", "url": "https://infra.spec.whatwg.org/#list-iterate" },
                "https://infra.spec.whatwg.org/#ordered-set": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "ordered set", "type": "dfn", "url": "https://infra.spec.whatwg.org/#ordered-set" },
                "https://infra.spec.whatwg.org/#set-append": { "export": true, "for_": ["set"], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "append", "type": "dfn", "url": "https://infra.spec.whatwg.org/#set-append" },
                "https://infra.spec.whatwg.org/#string": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "string", "type": "dfn", "url": "https://infra.spec.whatwg.org/#string" },
                "https://infra.spec.whatwg.org/#tuple": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "infra", "spec": "infra", "status": "current", "text": "tuple", "type": "dfn", "url": "https://infra.spec.whatwg.org/#tuple" },
                "https://w3c.github.io/screen-orientation/#dfn-fully-unlock-the-screen-orientation-steps": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "screen-orientation", "spec": "screen-orientation", "status": "current", "text": "fully unlock the screen orientation steps", "type": "dfn", "url": "https://w3c.github.io/screen-orientation/#dfn-fully-unlock-the-screen-orientation-steps" },
                "https://w3c.github.io/screen-orientation/#dfn-triggered-by-a-user-generated-orientation-change": { "export": true, "for_": [], "level": "", "normative": true, "shortname": "fullscreen", "spec": "", "status": "anchor-block", "text": "triggered by a user generated orientation change", "type": "dfn", "url": "https://w3c.github.io/screen-orientation/#dfn-triggered-by-a-user-generated-orientation-change" },
                "https://w3c.github.io/webappsec-permissions-policy/#container-policy": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "permissions-policy", "spec": "permissions-policy-1", "status": "current", "text": "container policy", "type": "dfn", "url": "https://w3c.github.io/webappsec-permissions-policy/#container-policy" },
                "https://w3c.github.io/webappsec-permissions-policy/#permissions-policy-header": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "permissions-policy", "spec": "permissions-policy-1", "status": "current", "text": "permissions-policy", "type": "http-header", "url": "https://w3c.github.io/webappsec-permissions-policy/#permissions-policy-header" },
                "https://w3c.github.io/webappsec-permissions-policy/#policy-controlled-feature": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "permissions-policy", "spec": "permissions-policy-1", "status": "current", "text": "policy-controlled feature", "type": "dfn", "url": "https://w3c.github.io/webappsec-permissions-policy/#policy-controlled-feature" },
                "https://w3c.github.io/webappsec-permissions-policy/#policy-controlled-feature-default-allowlist": { "export": true, "for_": ["policy-controlled feature"], "level": "1", "normative": true, "shortname": "permissions-policy", "spec": "permissions-policy-1", "status": "current", "text": "default allowlist", "type": "dfn", "url": "https://w3c.github.io/webappsec-permissions-policy/#policy-controlled-feature-default-allowlist" },
                "https://webidl.spec.whatwg.org/#LegacyLenientSetter": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "LegacyLenientSetter", "type": "extended-attribute", "url": "https://webidl.spec.whatwg.org/#LegacyLenientSetter" },
                "https://webidl.spec.whatwg.org/#Unscopable": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "Unscopable", "type": "extended-attribute", "url": "https://webidl.spec.whatwg.org/#Unscopable" },
                "https://webidl.spec.whatwg.org/#exceptiondef-typeerror": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "TypeError", "type": "exception", "url": "https://webidl.spec.whatwg.org/#exceptiondef-typeerror" },
                "https://webidl.spec.whatwg.org/#idl-boolean": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "boolean", "type": "interface", "url": "https://webidl.spec.whatwg.org/#idl-boolean" },
                "https://webidl.spec.whatwg.org/#idl-promise": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "Promise", "type": "interface", "url": "https://webidl.spec.whatwg.org/#idl-promise" },
                "https://webidl.spec.whatwg.org/#idl-undefined": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "undefined", "type": "interface", "url": "https://webidl.spec.whatwg.org/#idl-undefined" },
                "https://webidl.spec.whatwg.org/#this": { "export": true, "for_": [], "level": "1", "normative": true, "shortname": "webidl", "spec": "webidl", "status": "current", "text": "this", "type": "dfn", "url": "https://webidl.spec.whatwg.org/#this" },
            };

            function mkRefHint(link, ref) {
                const linkText = link.textContent;
                let dfnTextElements = '';
                if (ref.text != linkText) {
                    dfnTextElements =
                        mk.li({},
                            mk.b({}, "Term: "),
                            mk.span({}, ref.text)
                        );
                }
                const forList = ref.for_;
                let forListElements;
                if (forList.length == 0) {
                    forListElements = [];
                } else if (forList.length == 1) {
                    forListElements = mk.li({},
                        mk.b({}, "For: "),
                        mk.span({}, forList[0]),
                    );
                } else {
                    forListElements = mk.li({},
                        mk.b({}, "For: "),
                        mk.ul({},
                            ...forList.map(forItem =>
                                mk.li({},
                                    mk.span({}, forItem)
                                ),
                            ),
                        ),
                    );
                }
                const url = ref.url;
                const safeUrl = encodeURIComponent(url);
                const hintPanel = mk.aside({
                    class: "ref-hint",
                    id: `ref-hint-for-${safeUrl}`,
                    "data-for": url,
                    "aria-labelled-by": `ref-hint-for-${safeUrl}`,
                },
                    mk.ul({},
                        dfnTextElements,
                        mk.li({},
                            mk.b({}, "URL: "),
                            mk.a({ href: url, class: "ref" }, url),
                        ),
                        mk.li({},
                            mk.b({}, "Type: "),
                            mk.span({}, `${ref.type}`),
                        ),
                        mk.li({},
                            mk.b({}, "Spec: "),
                            mk.span({}, `${ref.spec ? ref.spec : ''}`),
                        ),
                        forListElements
                    ),
                );
                hintPanel.forLink = link;
                setupRefHintEventListeners(link, hintPanel);
                return hintPanel;
            }

            function hideAllRefHints() {
                queryAll(".ref-hint").forEach(el => hideRefHint(el));
            }

            function hideRefHint(refHint) {
                const link = refHint.forLink;
                link.setAttribute("aria-expanded", "false");
                if (refHint.teardownEventListeners) {
                    refHint.teardownEventListeners();
                }
                refHint.remove();
            }

            function showRefHint(link) {
                if (link.classList.contains("dfn-link")) return;
                const url = link.getAttribute("href");
                const ref = refsData[url];
                if (!ref) return;

                hideAllRefHints(); // Only display one at this time.

                const refHint = mkRefHint(link, ref);
                append(document.body, refHint);
                link.setAttribute("aria-expanded", "true");
                positionRefHint(refHint);
            }

            function setupRefHintEventListeners(link, refHint) {
                if (refHint.teardownEventListeners) return;
                // Add event handlers to hide the refHint after the user moves away
                // from both the link and refHint, if not hovering either within one second.
                let timeout = null;
                const startHidingRefHint = (event) => {
                    if (timeout) {
                        clearTimeout(timeout);
                    }
                    timeout = setTimeout(() => {
                        hideRefHint(refHint);
                    }, 1000);
                }
                const resetHidingRefHint = (event) => {
                    if (timeout) clearTimeout(timeout);
                    timeout = null;
                };
                link.addEventListener("mouseleave", startHidingRefHint);
                link.addEventListener("mouseenter", resetHidingRefHint);
                link.addEventListener("blur", startHidingRefHint);
                link.addEventListener("focus", resetHidingRefHint);
                refHint.addEventListener("mouseleave", startHidingRefHint);
                refHint.addEventListener("mouseenter", resetHidingRefHint);
                refHint.addEventListener("blur", startHidingRefHint);
                refHint.addEventListener("focus", resetHidingRefHint);

                refHint.teardownEventListeners = () => {
                    // remove event listeners
                    resetHidingRefHint();
                    link.removeEventListener("mouseleave", startHidingRefHint);
                    link.removeEventListener("mouseenter", resetHidingRefHint);
                    link.removeEventListener("blur", startHidingRefHint);
                    link.removeEventListener("focus", resetHidingRefHint);
                    refHint.removeEventListener("mouseleave", startHidingRefHint);
                    refHint.removeEventListener("mouseenter", resetHidingRefHint);
                    refHint.removeEventListener("blur", startHidingRefHint);
                    refHint.removeEventListener("focus", resetHidingRefHint);
                };
            }

            function positionRefHint(refHint) {
                const link = refHint.forLink;
                const linkPos = getBounds(link);
                refHint.style.top = linkPos.bottom + "px";
                refHint.style.left = linkPos.left + "px";

                const panelPos = refHint.getBoundingClientRect();
                const panelMargin = 8;
                const maxRight = document.body.parentNode.clientWidth - panelMargin;
                if (panelPos.right > maxRight) {
                    const overflowAmount = panelPos.right - maxRight;
                    const newLeft = Math.max(panelMargin, linkPos.left - overflowAmount);
                    refHint.style.left = newLeft + "px";
                }
            }

            // TODO: shared util
            // Returns the root-level absolute position {left and top} of element.
            function getBounds(el, relativeTo = document.body) {
                const relativeRect = relativeTo.getBoundingClientRect();
                const elRect = el.getBoundingClientRect();
                const top = elRect.top - relativeRect.top;
                const left = elRect.left - relativeRect.left;
                return {
                    top,
                    left,
                    bottom: top + elRect.height,
                    right: left + elRect.width,
                }
            }

            function showRefHintListener(e) {
                // If the target isn't in a link (or is a link),
                // just ignore it.
                let link = e.target.closest("a");
                if (!link) return;

                // If the target is in a ref-hint panel
                // (aka a link in the already-open one),
                // also just ignore it.
                if (link.closest(".ref-hint")) return;

                // Otherwise, show the panel for the link.
                showRefHint(link);
            }

            function hideAllHintsListener(e) {
                // If the click is inside a ref-hint panel, ignore it.
                if (e.target.closest(".ref-hint")) return;
                // Otherwise, close all the current panels.
                hideAllRefHints();
            }

            document.addEventListener("DOMContentLoaded", () => {
                document.body.addEventListener("mousedown", showRefHintListener);
                document.body.addEventListener("focus", showRefHintListener);

                document.body.addEventListener("click", hideAllHintsListener);
            });

            window.addEventListener("resize", () => {
                // Hide any open ref hint.
                hideAllRefHints();
            });
        }
    </script>
    <script>/* Boilerplate: script-var-click-highlighting */
        "use strict";
        {
            /*
            Color-choosing design:
            
            * Colors are ordered by goodness.
            * On clicking a var, give it the earliest color
                with the lowest usage in the algorithm.
            * On re-clicking, re-use the var's most recent color
                if that's not currently being used elsewhere.
            */

            const COLOR_COUNT = 7;

            document.addEventListener("click", e => {
                if (e.target.nodeName == "VAR") {
                    highlightSameAlgoVars(e.target);
                }
            });

            function highlightSameAlgoVars(v) {
                // Find the algorithm container.
                let algoContainer = findAlgoContainer(v);

                // Not highlighting document-global vars,
                // too likely to be unrelated.
                if (algoContainer == null) return;

                const varName = nameFromVar(v);
                if (!v.hasAttribute("data-var-color")) {
                    const newColor = chooseHighlightColor(algoContainer, v);
                    for (const el of algoContainer.querySelectorAll("var")) {
                        if (nameFromVar(el) == varName) {
                            el.setAttribute("data-var-color", newColor);
                            el.setAttribute("data-var-last-color", newColor);
                        }
                    }
                } else {
                    for (const el of algoContainer.querySelectorAll("var")) {
                        if (nameFromVar(el) == varName) {
                            el.removeAttribute("data-var-color");
                        }
                    }
                }
            }
            function findAlgoContainer(el) {
                while (el != document.body) {
                    if (el.hasAttribute("data-algorithm")) return el;
                    el = el.parentNode;
                }
                return null;
            }
            function nameFromVar(el) {
                return el.textContent.replace(/(\s|\xa0)+/g, " ").trim();
            }
            function colorCountsFromContainer(container) {
                const namesFromColor = Array.from({ length: COLOR_COUNT }, x => new Set());
                for (let v of container.querySelectorAll("var[data-var-color]")) {
                    let color = +v.getAttribute("data-var-color");
                    namesFromColor[color].add(nameFromVar(v));
                }

                return namesFromColor.map(x => x.size);
            }
            function leastUsedColor(colors) {
                // Find the earliest color with the lowest count.
                let minCount = Infinity;
                let minColor = null;
                for (var i = 0; i < colors.length; i++) {
                    if (colors[i] < minCount) {
                        minColor = i;
                        minCount = colors[i];
                    }
                }
                return minColor;
            }
            function chooseHighlightColor(container, v) {
                const colorCounts = colorCountsFromContainer(container);
                if (v.hasAttribute("data-var-last-color")) {
                    let color = +v.getAttribute("data-var-last-color");
                    if (colorCounts[color] == 0) return color;
                }
                return leastUsedColor(colorCounts);
            }
        }
    </script>
