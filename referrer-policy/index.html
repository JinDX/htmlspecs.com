<!doctype html>
<html lang="zh-hans">

<head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
    <title>引用策略</title>
    <meta content="CR" name="w3c-status">

    <meta content="Bikeshed version af155f2e5c3bb772c32f7c8fe6857fd648994d60" name="generator">
    <style>
        /* style-md-lists */

        /* This is a weird hack for me not yet following the commonmark spec
               regarding paragraph and lists. */
        [data-md]> :first-child {
            margin-top: 0;
        }

        [data-md]> :last-child {
            margin-bottom: 0;
        }
    </style>
    <style>
        /* style-selflinks */

        .heading,
        .issue,
        .note,
        .example,
        li,
        dt {
            position: relative;
        }

        a.self-link {
            position: absolute;
            top: 0;
            left: calc(-1 * (3.5rem - 26px));
            width: calc(3.5rem - 26px);
            height: 2em;
            text-align: center;
            border: none;
            transition: opacity .2s;
            opacity: .5;
        }

        a.self-link:hover {
            opacity: 1;
        }

        .heading>a.self-link {
            font-size: 83%;
        }

        li>a.self-link {
            left: calc(-1 * (3.5rem - 26px) - 2em);
        }

        dfn>a.self-link {
            top: auto;
            left: auto;
            opacity: 0;
            width: 1.5em;
            height: 1.5em;
            background: gray;
            color: white;
            font-style: normal;
            transition: opacity .2s, background-color .2s, color .2s;
        }

        dfn:hover>a.self-link {
            opacity: 1;
        }

        dfn>a.self-link:hover {
            color: black;
        }

        a.self-link::before {
            content: "¶";
        }

        .heading>a.self-link::before {
            content: "§";
        }

        dfn>a.self-link::before {
            content: "#";
        }
    </style>
    <style>
        /* style-counters */

        body {
            counter-reset: example figure issue;
        }

        .issue {
            counter-increment: issue;
        }

        .issue:not(.no-marker)::before {
            content: "Issue " counter(issue);
        }

        .example {
            counter-increment: example;
        }

        .example:not(.no-marker)::before {
            content: "Example " counter(example);
        }

        .invalid.example:not(.no-marker)::before,
        .illegal.example:not(.no-marker)::before {
            content: "Invalid Example" counter(example);
        }

        figcaption {
            counter-increment: figure;
        }

        figcaption:not(.no-marker)::before {
            content: "Figure " counter(figure) " ";
        }
    </style>
    <style>
        /* style-autolinks */

        .css.css,
        .property.property,
        .descriptor.descriptor {
            color: #005a9c;
            font-size: inherit;
            font-family: inherit;
        }

        .css::before,
        .property::before,
        .descriptor::before {
            content: "‘";
        }

        .css::after,
        .property::after,
        .descriptor::after {
            content: "’";
        }

        .property,
        .descriptor {
            /* Don't wrap property and descriptor names */
            white-space: nowrap;
        }

        .type {
            /* CSS value <type> */
            font-style: italic;
        }

        pre .property::before,
        pre .property::after {
            content: "";
        }

        [data-link-type="property"]::before,
        [data-link-type="propdesc"]::before,
        [data-link-type="descriptor"]::before,
        [data-link-type="value"]::before,
        [data-link-type="function"]::before,
        [data-link-type="at-rule"]::before,
        [data-link-type="selector"]::before,
        [data-link-type="maybe"]::before {
            content: "‘";
        }

        [data-link-type="property"]::after,
        [data-link-type="propdesc"]::after,
        [data-link-type="descriptor"]::after,
        [data-link-type="value"]::after,
        [data-link-type="function"]::after,
        [data-link-type="at-rule"]::after,
        [data-link-type="selector"]::after,
        [data-link-type="maybe"]::after {
            content: "’";
        }

        [data-link-type].production::before,
        [data-link-type].production::after,
        .prod [data-link-type]::before,
        .prod [data-link-type]::after {
            content: "";
        }

        [data-link-type=element],
        [data-link-type=element-attr] {
            font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
            font-size: .9em;
        }

        [data-link-type=element]::before {
            content: "<"
        }

        [data-link-type=element]::after {
            content: ">"
        }

        [data-link-type=biblio] {
            white-space: pre;
        }
    </style>
    <style>
        /* style-dfn-panel */

        .dfn-panel {
            position: absolute;
            z-index: 35;
            height: auto;
            width: -webkit-fit-content;
            width: fit-content;
            max-width: 300px;
            max-height: 500px;
            overflow: auto;
            padding: 0.5em 0.75em;
            font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
            background: #DDDDDD;
            color: black;
            border: outset 0.2em;
        }

        .dfn-panel:not(.on) {
            display: none;
        }

        .dfn-panel * {
            margin: 0;
            padding: 0;
            text-indent: 0;
        }

        .dfn-panel>b {
            display: block;
        }

        .dfn-panel a {
            color: black;
        }

        .dfn-panel a:not(:hover) {
            text-decoration: none !important;
            border-bottom: none !important;
        }

        .dfn-panel>b+b {
            margin-top: 0.25em;
        }

        .dfn-panel ul {
            padding: 0;
        }

        .dfn-panel li {
            list-style: inside;
        }

        .dfn-panel.activated {
            display: inline-block;
            position: fixed;
            left: .5em;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - 1.5em - .4em - .5em);
            max-height: 30vh;
        }

        .dfn-paneled {
            cursor: pointer;
        }
    </style>
    <style>
        /* style-syntax-highlighting */
        pre.idl.highlight {
            color: #708090;
        }

        .highlight:not(.idl) {
            background: hsl(24, 20%, 95%);
        }

        code.highlight {
            padding: .1em;
            border-radius: .3em;
        }

        pre.highlight,
        pre>code.highlight {
            display: block;
            padding: 1em;
            margin: .5em 0;
            overflow: auto;
            border-radius: 0;
        }

        .highlight .c {
            color: #708090
        }

        /* Comment */
        .highlight .k {
            color: #990055
        }

        /* Keyword */
        .highlight .l {
            color: #000000
        }

        /* Literal */
        .highlight .n {
            color: #0077aa
        }

        /* Name */
        .highlight .o {
            color: #999999
        }

        /* Operator */
        .highlight .p {
            color: #999999
        }

        /* Punctuation */
        .highlight .cm {
            color: #708090
        }

        /* Comment.Multiline */
        .highlight .cp {
            color: #708090
        }

        /* Comment.Preproc */
        .highlight .c1 {
            color: #708090
        }

        /* Comment.Single */
        .highlight .cs {
            color: #708090
        }

        /* Comment.Special */
        .highlight .kc {
            color: #990055
        }

        /* Keyword.Constant */
        .highlight .kd {
            color: #990055
        }

        /* Keyword.Declaration */
        .highlight .kn {
            color: #990055
        }

        /* Keyword.Namespace */
        .highlight .kp {
            color: #990055
        }

        /* Keyword.Pseudo */
        .highlight .kr {
            color: #990055
        }

        /* Keyword.Reserved */
        .highlight .kt {
            color: #990055
        }

        /* Keyword.Type */
        .highlight .ld {
            color: #000000
        }

        /* Literal.Date */
        .highlight .m {
            color: #000000
        }

        /* Literal.Number */
        .highlight .s {
            color: #a67f59
        }

        /* Literal.String */
        .highlight .na {
            color: #0077aa
        }

        /* Name.Attribute */
        .highlight .nc {
            color: #0077aa
        }

        /* Name.Class */
        .highlight .no {
            color: #0077aa
        }

        /* Name.Constant */
        .highlight .nd {
            color: #0077aa
        }

        /* Name.Decorator */
        .highlight .ni {
            color: #0077aa
        }

        /* Name.Entity */
        .highlight .ne {
            color: #0077aa
        }

        /* Name.Exception */
        .highlight .nf {
            color: #0077aa
        }

        /* Name.Function */
        .highlight .nl {
            color: #0077aa
        }

        /* Name.Label */
        .highlight .nn {
            color: #0077aa
        }

        /* Name.Namespace */
        .highlight .py {
            color: #0077aa
        }

        /* Name.Property */
        .highlight .nt {
            color: #669900
        }

        /* Name.Tag */
        .highlight .nv {
            color: #222222
        }

        /* Name.Variable */
        .highlight .ow {
            color: #999999
        }

        /* Operator.Word */
        .highlight .mb {
            color: #000000
        }

        /* Literal.Number.Bin */
        .highlight .mf {
            color: #000000
        }

        /* Literal.Number.Float */
        .highlight .mh {
            color: #000000
        }

        /* Literal.Number.Hex */
        .highlight .mi {
            color: #000000
        }

        /* Literal.Number.Integer */
        .highlight .mo {
            color: #000000
        }

        /* Literal.Number.Oct */
        .highlight .sb {
            color: #a67f59
        }

        /* Literal.String.Backtick */
        .highlight .sc {
            color: #a67f59
        }

        /* Literal.String.Char */
        .highlight .sd {
            color: #a67f59
        }

        /* Literal.String.Doc */
        .highlight .s2 {
            color: #a67f59
        }

        /* Literal.String.Double */
        .highlight .se {
            color: #a67f59
        }

        /* Literal.String.Escape */
        .highlight .sh {
            color: #a67f59
        }

        /* Literal.String.Heredoc */
        .highlight .si {
            color: #a67f59
        }

        /* Literal.String.Interpol */
        .highlight .sx {
            color: #a67f59
        }

        /* Literal.String.Other */
        .highlight .sr {
            color: #a67f59
        }

        /* Literal.String.Regex */
        .highlight .s1 {
            color: #a67f59
        }

        /* Literal.String.Single */
        .highlight .ss {
            color: #a67f59
        }

        /* Literal.String.Symbol */
        .highlight .vc {
            color: #0077aa
        }

        /* Name.Variable.Class */
        .highlight .vg {
            color: #0077aa
        }

        /* Name.Variable.Global */
        .highlight .vi {
            color: #0077aa
        }

        /* Name.Variable.Instance */
        .highlight .il {
            color: #000000
        }

        /* Literal.Number.Integer.Long */
    </style>
    <link href="https://www.w3.org/StyleSheets/TR/2016/W3C-CR" rel="stylesheet" type="text/css">

<body class="h-entry">
    <div class="head">
        <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48"
                    src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" width="72"> </a> </p>
        <h1>引用策略</h1>
        <h2 class="no-num no-toc no-ref heading settled" id="subtitle"><span class="content">W3C 候选推荐规范，<time
                    class="dt-updated" datetime="2017-01-26">2017年1月26日</time></span></h2>
        <div data-fill-with="spec-metadata">
            <dl>
                <dt>此版本：
                <dd><a class="u-url"
                        href="https://www.w3.org/TR/2017/CR-referrer-policy-20170126/">https://www.w3.org/TR/2017/CR-referrer-policy-20170126/</a>
                <dt>最新发布版本：
                <dd><a href="https://www.w3.org/TR/referrer-policy/">https://www.w3.org/TR/referrer-policy/</a>
                <dt>之前版本：
                <dd><a
                        href="https://www.w3.org/TR/2016/WD-referrer-policy-20161222/">https://www.w3.org/TR/2016/WD-referrer-policy-20161222/</a>
                <dt>编辑草案：
                <dd><a
                        href="https://w3c.github.io/webappsec-referrer-policy/">https://w3c.github.io/webappsec-referrer-policy/</a>
                <dt>版本历史：
                <dd><a
                        href="https://github.com/w3c/webappsec-referrer-policy/commits/master/index.src.html">https://github.com/w3c/webappsec-referrer-policy/commits/master/index.src.html</a>
                <dt>反馈：
                <dd><span><a
                            href="mailto:public-webappsec@w3.org?subject=%5Breferrer-policy%5D%20YOUR%20TOPIC%20HERE">public-webappsec@w3.org</a>
                        主题行为 “<kbd>[referrer-policy] <i data-lt="">… 消息主题 …</i></kbd>” (<a
                            href="https://lists.w3.org/Archives/Public/public-webappsec/"
                            rel="discussion">存档</a>)</span>
                <dt>问题跟踪：
                <dd><a href="https://github.com/w3c/webappsec-referrer-policy/issues/">GitHub</a>
                <dd><a href="#issues-index">规范内联</a>
                <dt class="editor">编辑：
                <dd class="editor p-author h-card vcard" data-editor-id="49402"><a class="p-name fn u-email email"
                        href="mailto:eisinger@google.com">Jochen Eisinger</a> (<span class="p-org org">Google
                        Inc.</span>)
                <dd class="editor p-author h-card vcard" data-editor-id="76989"><a class="p-name fn u-email email"
                        href="mailto:estark@google.com">Emily Stark</a> (<span class="p-org org">Google Inc.</span>)
            </dl>
        </div>
        <div data-fill-with="warning"></div>
        <p class="copyright" data-fill-with="copyright"><a
                href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 2017 <a
                href="https://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a
                href="https://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>, <a
                href="https://www.ercim.eu/"><abbr
                    title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a
                href="https://www.keio.ac.jp/">Keio</a>, <a href="http://ev.buaa.edu.cn/">Beihang</a>). W3C <a
                href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, <a
                href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a
                href="https://www.w3.org/Consortium/Legal/copyright-documents">document use</a> rules apply. </p>
        <hr title="Separator for header">
    </div>
    <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">摘要</span></h2>
    <div class="p-summary" data-fill-with="abstract">
        <p>本文档描述了作者如何为其创建的文档设置引用策略，以及此类策略对外发请求和导航的 <code>Referer</code> HTTP 头的影响。</p>
    </div>
    <h2 class="no-num no-toc no-ref heading settled" id="status"><span class="content">本文档的状态</span></h2>
    <div data-fill-with="status">
        <p><em>本节描述了本文档在发布时的状态。其他文档可能会取代本文档。当前 W3C 发布的文档列表以及本技术报告的最新修订版可在 <a href="https://www.w3.org/TR/">W3C 技术报告索引
                    https://www.w3.org/TR/</a> 中找到。</em></p>
        <p>本文档由 <a href="https://www.w3.org/2011/webappsec/">Web 应用安全工作组</a>发布为候选推荐规范。本文档旨在成为 W3C 推荐规范。本文档将至少保持候选推荐规范状态至
            <time class="status-deadline" datetime="2017-02-26">2017年2月26日</time>，以确保有机会进行广泛审查。
        </p>
        <p>（<a href="https://lists.w3.org/Archives/Public/public-webappsec/">存档</a>）公共邮件列表 <a
                href="mailto:public-webappsec@w3.org?Subject=%5Breferrer-policy%5D%20PUT%20SUBJECT%20HERE">public-webappsec@w3.org</a>（参见
            <a
                href="https://www.w3.org/Mail/Request">说明</a>）是讨论本规范的首选方式。发送电子邮件时，请在主题中包含“referrer-policy”文本，最好像这样：“[referrer-policy]
            <em>…评论摘要…</em>”。
        </p>
        <p>作为候选推荐规范发布并不意味着 W3C 会员的认可。这是一个草稿文档，可能会随时更新、替换或被其他文档废弃。将本文档引用为除工作进展之外的其他内容是不合适的。</p>
        <p>本文档进入拟推荐阶段的准入标准是至少有两个独立且可互操作的用户代理实现了本规范的所有功能，这将通过工作组开发的测试套件中定义的用户代理测试来确定。工作组将准备一份实施报告以跟踪进展。</p>
        <p>本文档由根据 <a href="https://www.w3.org/Consortium/Patent-Policy-20040205/">2004年2月5日 W3C 专利政策</a>运作的工作组制作。W3C
            维护了与工作组交付物相关的 <a href="https://www.w3.org/2004/01/pp-impl/49309/status"
                rel="disclosure">公开专利披露列表</a>；该页面还包括披露专利的说明。个人如果实际了解某项专利，并认为该专利包含 <a
                href="https://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">必要声明</a>，则必须根据 <a
                href="https://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">W3C 专利政策第6节</a>披露信息。</p>
        <p>本文档受 <a href="https://www.w3.org/2015/Process-20150901/" id="w3c_process_revision">2015年9月1日 W3C 流程文档</a>管理。
        </p>
    </div>
    <div data-fill-with="at-risk"></div>
    <nav data-fill-with="table-of-contents" id="toc">
        <h2 class="no-num no-toc no-ref" id="contents">目录</h2>
        <ol class="toc" role="directory">
            <li>
                <a href="#intro"><span class="secno">1</span> <span class="content">简介</span></a>
                <ol class="toc">
                    <li><a href="#intro-privacy"><span class="secno">1.1</span> <span class="content">隐私</span></a>
                    <li><a href="#intro-security"><span class="secno">1.2</span> <span class="content">安全</span></a>
                    <li><a href="#intro-trackback"><span class="secno">1.3</span> <span class="content">回溯</span></a>
                </ol>
            <li><a href="#terms"><span class="secno">2</span> <span class="content">关键概念和术语</span></a>
            <li>
                <a href="#referrer-policies"><span class="secno">3</span> <span class="content">引用策略</span></a>
                <ol class="toc">
                    <li><a href="#referrer-policy-no-referrer"><span class="secno">3.1</span> <span
                                class="content">"<code>no-referrer</code>"</span></a>
                    <li><a href="#referrer-policy-no-referrer-when-downgrade"><span class="secno">3.2</span> <span
                                class="content">"<code>no-referrer-when-downgrade</code>"</span></a>
                    <li><a href="#referrer-policy-same-origin"><span class="secno">3.3</span> <span
                                class="content">"<code>same-origin</code>"</span></a>
                    <li><a href="#referrer-policy-origin"><span class="secno">3.4</span> <span
                                class="content">"<code>origin</code>"</span></a>
                    <li><a href="#referrer-policy-strict-origin"><span class="secno">3.5</span> <span
                                class="content">"<code>strict-origin</code>"</span></a>
                    <li><a href="#referrer-policy-origin-when-cross-origin"><span class="secno">3.6</span> <span
                                class="content">"<code>origin-when-cross-origin</code>"</span></a>
                    <li><a href="#referrer-policy-strict-origin-when-cross-origin"><span class="secno">3.7</span> <span
                                class="content">"<code>strict-origin-when-cross-origin</code>"</span></a>
                    <li><a href="#referrer-policy-unsafe-url"><span class="secno">3.8</span> <span
                                class="content">"<code>unsafe-url</code>"</span></a>
                    <li><a href="#referrer-policy-empty-string"><span class="secno">3.9</span> <span
                                class="content">空字符串</span></a>
                </ol>
            <li>
                <a href="#referrer-policy-delivery"><span class="secno">4</span> <span
                        class="content">引用策略的传递</span></a>
                <ol class="toc">
                    <li>
                        <a href="#referrer-policy-header"><span class="secno">4.1</span> <span class="content">通过
                                Referrer-Policy 头传递</span></a>
                        <ol class="toc">
                            <li><a href="#referrer-usage"><span class="secno">4.1.1</span> <span
                                        class="content">使用</span></a>
                        </ol>
                    <li><a href="#referrer-policy-delivery-meta"><span class="secno">4.2</span> <span class="content">通过
                                <code><span>meta</span></code> 传递</span></a>
                    <li><a href="#referrer-policy-delivery-referrer-attribute"><span class="secno">4.3</span> <span
                                class="content">通过 <code>referrerpolicy</code> 内容属性传递</span></a>
                    <li><a href="#referrer-policy-delivery-nested"><span class="secno">4.4</span> <span
                                class="content">嵌套浏览上下文</span></a>
                </ol>
            <li><a href="#integration-with-fetch"><span class="secno">5</span> <span class="content">与 Fetch
                        的集成</span></a>
            <li><a href="#integration-with-html"><span class="secno">6</span> <span class="content">与 HTML
                        的集成</span></a>
            <li><a href="#integration-with-css"><span class="secno">7</span> <span class="content">与 CSS 的集成</span></a>
            <li>
                <a href="#algorithms"><span class="secno">8</span> <span class="content">算法</span></a>
                <ol class="toc">
                    <li><a href="#parse-referrer-policy-from-header"><span class="secno">8.1</span> <span
                                class="content">从 <span><code>Referrer-Policy</code></span> 头解析引用策略</span></a>
                    <li><a href="#set-requests-referrer-policy-on-redirect"><span class="secno">8.2</span> <span
                                class="content">在重定向时设置 <var>request</var> 的引用策略</span></a>
                    <li><a href="#determine-requests-referrer"><span class="secno">8.3</span> <span class="content">确定
                                <var>request</var> 的引用</span></a>
                    <li><a href="#strip-url"><span class="secno">8.4</span> <span class="content">剥离 <var>url</var>
                                以用作引用</span></a>
                </ol>
            <li>
                <a href="#privacy"><span class="secno">9</span> <span class="content">隐私注意事项</span></a>
                <ol class="toc">
                    <li><a href="#user-controls"><span class="secno">9.1</span> <span class="content">用户控制</span></a>
                </ol>
            <li>
                <a href="#security"><span class="secno">10</span> <span class="content">安全注意事项</span></a>
                <ol class="toc">
                    <li><a href="#information-leakage"><span class="secno">10.1</span> <span
                                class="content">信息泄漏</span></a>
                    <li><a href="#downgrade"><span class="secno">10.2</span> <span class="content">降级到较不严格的策略</span></a>
                </ol>
            <li>
                <a href="#authoring"><span class="secno">11</span> <span class="content">编写注意事项</span></a>
                <ol class="toc">
                    <li><a href="#unknown-policy-values"><span class="secno">11.1</span> <span
                                class="content">未知的策略值</span></a>
                </ol>
            <li><a href="#acknowledgements"><span class="secno">12</span> <span class="content">致谢</span></a>
            <li>
                <a href="#conformance"><span class="secno"></span> <span class="content">一致性</span></a>
                <ol class="toc">
                    <li><a href="#conventions"><span class="secno"></span> <span class="content">文档约定</span></a>
                    <li><a href="#conformant-algorithms"><span class="secno"></span> <span
                                class="content">一致性算法</span></a>
                </ol>
            <li>
                <a href="#index"><span class="secno"></span> <span class="content">索引</span></a>
                <ol class="toc">
                    <li><a href="#index-defined-here"><span class="secno"></span> <span
                                class="content">本规范定义的术语</span></a>
                    <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span
                                class="content">通过引用定义的术语</span></a>
                </ol>
            <li>
                <a href="#references"><span class="secno"></span> <span class="content">参考文献</span></a>
                <ol class="toc">
                    <li><a href="#normative"><span class="secno"></span> <span class="content">规范性参考文献</span></a>
                    <li><a href="#informative"><span class="secno"></span> <span class="content">信息性参考文献</span></a>
                </ol>
            <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL 索引</span></a>
            <li><a href="#issues-index"><span class="secno"></span> <span class="content">问题索引</span></a>
        </ol>
    </nav>
    <main>
        <section>
            <h2 class="heading settled" data-level="1" id="intro"><span class="secno">1. </span><span
                    class="content">简介</span><a class="self-link" href="#intro"></a></h2>
            <p><em>本节为非规范性内容。</em></p>
            <p>从文档发出的请求以及从该文档导航离开的请求都与 <a data-link-type="dfn"
                    href="https://tools.ietf.org/html/rfc7231#section-5.5.2"><code>Referer</code></a> 头相关联。虽然可以通过带有 <a
                    data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/semantics.html#link-type-noreferrer"><code>noreferrer</code></a>
                链接类型的链接抑制该头，但作者可能希望出于多种原因更直接地控制 <a data-link-type="dfn"
                    href="https://tools.ietf.org/html/rfc7231#section-5.5.2"><code>Referer</code></a> 头：</p>
            <h3 class="heading settled" data-level="1.1" id="intro-privacy"><span class="secno">1.1. </span><span
                    class="content">隐私</span><a class="self-link" href="#intro-privacy"></a></h3>
            <p>一个社交网站为其用户提供个人资料页面，用户可以在个人资料页面上添加指向他们喜欢的乐队的超链接。当其他用户点击这些超链接时，社交网站可能不希望将用户的个人资料 URL 泄露给乐队网站（因为个人资料 URL
                可能会暴露个人资料所有者的身份）。</p>
            <p>然而，一些社交网站可能希望通知乐队网站这些链接来自社交网站，但不透露具体是哪个用户的个人资料包含这些链接。</p>
            <h3 class="heading settled" data-level="1.2" id="intro-security"><span class="secno">1.2. </span><span
                    class="content">安全</span><a class="self-link" href="#intro-security"></a></h3>
            <p>一个使用 HTTPS 和基于 URL 的会话标识符的 Web 应用可能希望链接到其他网站上的 HTTPS 资源，而不泄露用户的会话标识符。</p>
            <p>或者，一个 Web 应用可能使用 URL 本身授予某些能力。控制引用可以帮助防止这些能力 URL 通过引用头泄露。<a data-link-type="biblio"
                    href="#biblio-capability-urls">[CAPABILITY-URLS]</a></p>
            <p>请注意，能力 URL 可能通过其他方式泄露，控制引用不足以控制所有这些潜在泄露。</p>
            <h3 class="heading settled" data-level="1.3" id="intro-trackback"><span class="secno">1.3. </span><span
                    class="content">回溯</span><a class="self-link" href="#intro-trackback"></a></h3>
            <p>一个通过 HTTPS 托管的博客可能希望链接到一个通过 HTTP 托管的博客并接收回溯链接。</p>
        </section>
        <section>
            <h2 class="heading settled" data-level="2" id="terms"><span class="secno">2. </span><span
                    class="content">关键概念和术语</span><a class="self-link" href="#terms"></a></h2>
            <dl>
                <dt><a data-link-type="dfn" href="#referrer-policy" id="ref-for-referrer-policy-1">引用策略</a></dt>
                <dd>
                    <a data-link-type="dfn" href="#referrer-policy" id="ref-for-referrer-policy-2">引用策略</a> 修改了用于填充 <a
                        data-link-type="dfn"
                        href="https://tools.ietf.org/html/rfc7231#section-5.5.2"><code>Referer</code></a> 头的算法，当 <a
                        data-link-type="dfn"
                        href="https://fetch.spec.whatwg.org/#fetching">获取</a>子资源、预取或执行导航时使用。本文档定义了每种 <a
                        data-link-type="dfn" href="#referrer-policy" id="ref-for-referrer-policy-3">引用策略</a>的各种行为。
                    <p>每个 <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object">环境设置对象</a>
                        都有一个用于获取 <a data-link-type="dfn" href="#referrer-policy" id="ref-for-referrer-policy-4">引用策略</a>
                        的算法，该算法默认用于所有以该 <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object">环境设置对象</a>
                        作为其 <a data-link-type="dfn"
                            href="https://fetch.spec.whatwg.org/#concept-request-client">客户端</a>的 <a
                            data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request">请求</a>。</p>
                </dd>
                <dt><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="same-origin-request">同源请求</dfn>
                </dt>
                <dd>
                    一个 <code
                        class="idl"><a data-link-type="idl" href="https://fetch.spec.whatwg.org/#request">Request</a></code>
                    <var>request</var> 是一个 <strong>同源请求</strong>，如果 <var>request</var> 的 <a data-link-type="dfn"
                        href="https://fetch.spec.whatwg.org/#concept-request-origin">来源</a> 和 <var>request</var> 的 <a
                        data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-current-url">当前
                        URL</a> 的 <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-origin">来源</a>是
                    <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc6454#section-5"><code>相同的</code></a>。
                </dd>
                <dt><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="cross-origin-request">跨源请求</dfn>
                </dt>
                <dd>
                    一个 <code
                        class="idl"><a data-link-type="idl" href="https://fetch.spec.whatwg.org/#request">Request</a></code>
                    是一个 <strong>跨源请求</strong>，如果它 <em>不是</em> <a data-link-type="dfn" href="#same-origin-request"
                        id="ref-for-same-origin-request-1">同源</a>。
                </dd>
            </dl>
        </section>
        <section>
            <h2 class="heading settled" data-level="3" id="referrer-policies"><span class="secno">3. </span><span
                    class="content">引用策略</span><span id="referrer-policy-states"></span><a class="self-link"
                    href="#referrer-policies"></a></h2>
            <p>
                一个 <dfn class="dfn-paneled" data-dfn-type="dfn" data-export="" id="referrer-policy">引用策略</dfn>
                可以是空字符串、"<code>no-referrer</code>"、"<code>no-referrer-when-downgrade</code>"、"<code>same-origin</code>"、"<code>origin</code>"、"<code>strict-origin</code>"、"<code>origin-when-cross-origin</code>"、"<code>strict-origin-when-cross-origin</code>"
                或 "<code>unsafe-url</code>"。
            </p>
            <pre class="idl highlight def">
<span class="kt">enum</span> <dfn class="nv idl-code" data-dfn-type="enum" data-export="" id="enumdef-referrerpolicy">ReferrerPolicy<a class="self-link" href="#enumdef-referrerpolicy"></a></dfn> {
    <dfn class="s idl-code" data-dfn-for="ReferrerPolicy" data-dfn-type="enum-value" data-export="" data-lt="&quot;&quot;|" id="dom-referrerpolicy">""<a class="self-link" href="#dom-referrerpolicy"></a></dfn>,
    <dfn class="s idl-code" data-dfn-for="ReferrerPolicy" data-dfn-type="enum-value" data-export="" data-lt="&quot;no-referrer&quot;|no-referrer" id="dom-referrerpolicy-no-referrer">"no-referrer"<a class="self-link" href="#dom-referrerpolicy-no-referrer"></a></dfn>,
    <dfn class="s idl-code" data-dfn-for="ReferrerPolicy" data-dfn-type="enum-value" data-export="" data-lt="&quot;no-referrer-when-downgrade&quot;|no-referrer-when-downgrade" id="dom-referrerpolicy-no-referrer-when-downgrade">"no-referrer-when-downgrade"<a class="self-link" href="#dom-referrerpolicy-no-referrer-when-downgrade"></a></dfn>,
    <dfn class="s idl-code" data-dfn-for="ReferrerPolicy" data-dfn-type="enum-value" data-export="" data-lt="&quot;same-origin&quot;|same-origin" id="dom-referrerpolicy-same-origin">"same-origin"<a class="self-link" href="#dom-referrerpolicy-same-origin"></a></dfn>,
    <dfn class="s idl-code" data-dfn-for="ReferrerPolicy" data-dfn-type="enum-value" data-export="" data-lt="&quot;origin&quot;|origin" id="dom-referrerpolicy-origin">"origin"<a class="self-link" href="#dom-referrerpolicy-origin"></a></dfn>,
    <dfn class="s idl-code" data-dfn-for="ReferrerPolicy" data-dfn-type="enum-value" data-export="" data-lt="&quot;strict-origin&quot;|strict-origin" id="dom-referrerpolicy-strict-origin">"strict-origin"<a class="self-link" href="#dom-referrerpolicy-strict-origin"></a></dfn>,
    <dfn class="s idl-code" data-dfn-for="ReferrerPolicy" data-dfn-type="enum-value" data-export="" data-lt="&quot;origin-when-cross-origin&quot;|origin-when-cross-origin" id="dom-referrerpolicy-origin-when-cross-origin">"origin-when-cross-origin"<a class="self-link" href="#dom-referrerpolicy-origin-when-cross-origin"></a></dfn>,
    <dfn class="s idl-code" data-dfn-for="ReferrerPolicy" data-dfn-type="enum-value" data-export="" data-lt="&quot;strict-origin-when-cross-origin&quot;|strict-origin-when-cross-origin" id="dom-referrerpolicy-strict-origin-when-cross-origin">"strict-origin-when-cross-origin"<a class="self-link" href="#dom-referrerpolicy-strict-origin-when-cross-origin"></a></dfn>,
    <dfn class="s idl-code" data-dfn-for="ReferrerPolicy" data-dfn-type="enum-value" data-export="" data-lt="&quot;unsafe-url&quot;|unsafe-url" id="dom-referrerpolicy-unsafe-url">"unsafe-url"<a class="self-link" href="#dom-referrerpolicy-unsafe-url"></a></dfn>
};
</pre>
            <p>
                每种可能的 <a data-link-type="dfn" href="#referrer-policy" id="ref-for-referrer-policy-5">引用策略</a>
                在下文中进行了说明。评估其效果的详细算法在 <a href="#integration-with-fetch">§5 与 Fetch 的集成</a> 和 <a href="#algorithms">§8
                    算法</a> 部分中给出。
            </p>
            <p class="note" role="note">
                注意：<a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object">环境设置对象</a>
                的引用策略为请求提供了默认的基线策略，当该 <a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object">环境设置对象</a>
                用作 <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-client">请求客户端</a>
                时使用。此策略可以通过诸如
                <code><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/semantics.html#link-type-noreferrer">noreferrer</a></code>
                链接类型的机制为特定请求收紧。
            </p>
            <h3 class="heading settled dfn-paneled" data-dfn-type="dfn" data-export="" data-level="3.1"
                data-lt="&quot;no-referrer&quot;" id="referrer-policy-no-referrer"><span class="secno">3.1. </span><span
                    class="content">"<code>no-referrer</code>"</span><span
                    id="referrer-policy-state-no-referrer"></span></h3>
            <p>
                最简单的策略是 <a data-link-type="dfn" href="#referrer-policy-no-referrer"
                    id="ref-for-referrer-policy-no-referrer-1">"<code>no-referrer</code>"</a>，它指定不应将任何引用信息与从特定 <a
                    data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-client">请求客户端</a>
                发出的请求一起发送到任何 <a data-link-type="dfn"
                    href="https://tools.ietf.org/html/rfc6454#section-3.2">来源</a>。头将完全省略。
            </p>
            <div class="example" id="example-df4273ed">
                <a class="self-link" href="#example-df4273ed"></a> 如果位于 <code>https://example.com/page.html</code>
                的文档设置了 <a data-link-type="dfn" href="#referrer-policy-no-referrer"
                    id="ref-for-referrer-policy-no-referrer-2">"<code>no-referrer</code>"</a> 策略，则导航到
                <code>https://example.com/</code>（或任何其他 URL）将不会发送 <a data-link-type="dfn"
                    href="https://tools.ietf.org/html/rfc7231#section-5.5.2"><code>Referer</code></a> 头。
            </div>
            <h3 class="heading settled dfn-paneled" data-dfn-type="dfn" data-export="" data-level="3.2"
                data-lt="&quot;no-referrer-when-downgrade&quot;" id="referrer-policy-no-referrer-when-downgrade"><span
                    class="secno">3.2. </span><span
                    class="content">"<code>no-referrer-when-downgrade</code>"</span><span
                    id="referrer-policy-state-no-referrer-when-downgrade"></span></h3>
            <p>
                <a data-link-type="dfn" href="#referrer-policy-no-referrer-when-downgrade"
                    id="ref-for-referrer-policy-no-referrer-when-downgrade-1">"<code>no-referrer-when-downgrade</code>"</a>
                策略会将完整的 URL 与从 <a data-link-type="dfn"
                    href="https://www.w3.org/TR/2010/REC-wsc-ui-20100812/#typesoftls">TLS 保护</a>的 <a
                    data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object">环境设置对象</a>
                发出的请求一起发送到 <a data-link-type="dfn"
                    href="https://w3c.github.io/webappsec-secure-contexts/#potentially-trustworthy-url">潜在可信 URL</a>，以及从
                <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-client">客户端</a>（<em>未</em>
                <a data-link-type="dfn" href="https://www.w3.org/TR/2010/REC-wsc-ui-20100812/#typesoftls">TLS
                    保护</a>）发出的请求发送到任何 <a data-link-type="dfn"
                    href="https://tools.ietf.org/html/rfc6454#section-3.2">来源</a>。
            </p>
            <p>
                从 <a data-link-type="dfn" href="https://www.w3.org/TR/2010/REC-wsc-ui-20100812/#typesoftls">TLS 保护</a>的
                <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-client">客户端</a> 发出的请求到非 <a
                    data-link-type="dfn"
                    href="https://w3c.github.io/webappsec-secure-contexts/#potentially-trustworthy-url">潜在可信
                    URL</a>，则不会包含任何引用信息。不会发送
                <code><a data-link-type="dfn" href="https://tools.ietf.org/html/rfc7231#section-5.5.2">Referer</a></code>
                HTTP 头。
            </p>
            <div class="example" id="example-e13d3d6c">
                <a class="self-link" href="#example-e13d3d6c"></a> 如果位于 <code>https://example.com/page.html</code>
                的文档设置了 <a data-link-type="dfn" href="#referrer-policy-no-referrer-when-downgrade"
                    id="ref-for-referrer-policy-no-referrer-when-downgrade-2">"<code>no-referrer-when-downgrade</code>"</a>
                策略，则导航到 <code>https://not.example.com/</code> 会发送一个
                <code><a data-link-type="dfn" href="https://tools.ietf.org/html/rfc7231#section-5.5.2">Referer</a></code>
                HTTP 头，其值为 <code>https://example.com/page.html</code>，因为两个资源的来源都不是非 <a data-link-type="dfn"
                    href="https://w3c.github.io/webappsec-secure-contexts/#potentially-trustworthy-url">潜在可信 URL</a>。
                <p>从同一页面导航到 <code><strong>http</strong>://not.example.com/</code> 则不会发送 <a data-link-type="dfn"
                        href="https://tools.ietf.org/html/rfc7231#section-5.5.2"><code>Referer</code></a> 头。</p>
            </div>
            <p>如果未指定其他策略，这是用户代理的默认行为。</p>
            <h3 class="heading settled dfn-paneled" data-dfn-type="dfn" data-export="" data-level="3.3"
                data-lt="&quot;same-origin&quot;" id="referrer-policy-same-origin"><span class="secno">3.3. </span><span
                    class="content">"<code>same-origin</code>"</span></h3>
            <p>
                <a data-link-type="dfn" href="#referrer-policy-same-origin"
                    id="ref-for-referrer-policy-same-origin-1">"<code>same-origin</code>"</a> 策略指定，当从特定 <a
                    data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-client">客户端</a> 发出 <a
                    data-link-type="dfn" href="#same-origin-request" id="ref-for-same-origin-request-2">同源请求</a>
                时，会发送一个完整的 URL（<a href="#strip-url">剥离以用作引用</a>）作为引用信息。
            </p>
            <p>
                <a data-link-type="dfn" href="#cross-origin-request"
                    id="ref-for-cross-origin-request-1">跨源请求</a>，另一方面，不会包含任何引用信息。不会发送
                <code><a data-link-type="dfn" href="https://tools.ietf.org/html/rfc7231#section-5.5.2">Referer</a></code>
                HTTP 头。
            </p>
            <div class="example" id="example-af6c3f8c">
                <a class="self-link" href="#example-af6c3f8c"></a> 如果位于 <code>https://example.com/page.html</code>
                的文档设置了 <a data-link-type="dfn" href="#referrer-policy-same-origin"
                    id="ref-for-referrer-policy-same-origin-2">"<code>same-origin</code>"</a> 策略，则导航到
                <code>https://example.com/not-page.html</code> 会发送一个 <a data-link-type="dfn"
                    href="https://tools.ietf.org/html/rfc7231#section-5.5.2"><code>Referer</code></a> 头，其值为
                <code>https://example.com/page.html</code>。
                <p>从同一页面导航到 <code>https://<strong>not</strong>.example.com/</code> 则不会发送 <a data-link-type="dfn"
                        href="https://tools.ietf.org/html/rfc7231#section-5.5.2"><code>Referer</code></a> 头。</p>
            </div>
            <h3 class="heading settled dfn-paneled" data-dfn-type="dfn" data-export="" data-level="3.4"
                data-lt="&quot;origin&quot;" id="referrer-policy-origin"><span class="secno">3.4. </span><span
                    class="content">"<code>origin</code>"</span><span id="referrer-policy-state-origin"></span></h3>
            <p>
                <a data-link-type="dfn" href="#referrer-policy-origin"
                    id="ref-for-referrer-policy-origin-1">"<code>origin</code>"</a> 策略指定，仅发送 <a data-link-type="dfn"
                    href="https://tools.ietf.org/html/rfc6454#section-6.2">ASCII 序列化</a> 的 <a data-link-type="dfn"
                    href="https://tools.ietf.org/html/rfc6454#section-3.2">来源</a>作为引用信息，无论是从特定 <a data-link-type="dfn"
                    href="https://fetch.spec.whatwg.org/#concept-request-client">客户端</a> 发出的 <a data-link-type="dfn"
                    href="#same-origin-request" id="ref-for-same-origin-request-3">同源请求</a> 还是 <a data-link-type="dfn"
                    href="#cross-origin-request" id="ref-for-cross-origin-request-2">跨源请求</a>。
            </p>
            <p class="note" role="note">
                注意：来源的序列化看起来像 <code>https://example.com</code>。为了确保在 `<code>Referer</code>` 头中发送有效的 URL，用户代理会在来源后附加一个
                U+002F SOLIDUS ("<code>/</code>") 字符，例如 <code>https://example.com/</code>。
            </p>
            <p class="note" role="note">
                注意：<a data-link-type="dfn" href="#referrer-policy-origin"
                    id="ref-for-referrer-policy-origin-2">"<code>origin</code>"</a> 策略会导致 HTTPS 引用的来源作为未加密 HTTP
                请求的一部分通过网络发送。<a data-link-type="dfn" href="#referrer-policy-strict-origin"
                    id="ref-for-referrer-policy-strict-origin-1">"<code>strict-origin</code>"</a> 策略解决了这一问题。
            </p>
            <div class="example" id="example-ef2bdc9b">
                <a class="self-link" href="#example-ef2bdc9b"></a> 如果位于 <code>https://example.com/page.html</code>
                的文档设置了 <a data-link-type="dfn" href="#referrer-policy-origin"
                    id="ref-for-referrer-policy-origin-3">"<code>origin</code>"</a> 策略，则导航到任何 <a data-link-type="dfn"
                    href="https://tools.ietf.org/html/rfc6454#section-3.2">来源</a>都会发送一个 <a data-link-type="dfn"
                    href="https://tools.ietf.org/html/rfc7231#section-5.5.2"><code>Referer</code></a> 头，其值为
                <code>https://example.com/</code>，即使 URL 不是 <a data-link-type="dfn"
                    href="https://w3c.github.io/webappsec-secure-contexts/#potentially-trustworthy-url">潜在可信 URL</a>。
            </div>
            <h3 class="heading settled dfn-paneled" data-dfn-type="dfn" data-export="" data-level="3.5"
                data-lt="&quot;strict-origin&quot;" id="referrer-policy-strict-origin"><span class="secno">3.5.
                </span><span class="content">"<code>strict-origin</code>"</span></h3>
            <p>
                <a data-link-type="dfn" href="#referrer-policy-strict-origin"
                    id="ref-for-referrer-policy-strict-origin-2">"<code>strict-origin</code>"</a> 策略在发出请求时发送 <a
                    data-link-type="dfn" href="https://tools.ietf.org/html/rfc6454#section-6.2">ASCII 序列化</a> 的 <a
                    data-link-type="dfn" href="https://tools.ietf.org/html/rfc6454#section-3.2">来源</a>：
            </p>
            <ul>
                <li>从 <a data-link-type="dfn" href="https://www.w3.org/TR/2010/REC-wsc-ui-20100812/#typesoftls">TLS
                        保护</a>的 <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object">环境设置对象</a>
                    发出的请求到 <a data-link-type="dfn"
                        href="https://w3c.github.io/webappsec-secure-contexts/#potentially-trustworthy-url">潜在可信
                        URL</a>。</li>
                <li>从 <em>非</em> <a data-link-type="dfn"
                        href="https://www.w3.org/TR/2010/REC-wsc-ui-20100812/#typesoftls">TLS 保护</a>的 <a
                        data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object">环境设置对象</a>
                    发出的请求到任何 <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc6454#section-3.2">来源</a>。</li>
            </ul>
            <p>
                从 <a data-link-type="dfn" href="https://www.w3.org/TR/2010/REC-wsc-ui-20100812/#typesoftls">TLS 保护</a>的
                <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-client">请求客户端</a> 发出的请求到非
                <a data-link-type="dfn"
                    href="https://w3c.github.io/webappsec-secure-contexts/#potentially-trustworthy-url">潜在可信
                    URL</a>，不会包含任何引用信息。不会发送
                <code><a data-link-type="dfn" href="https://tools.ietf.org/html/rfc7231#section-5.5.2">Referer</a></code>
                HTTP 头。
            </p>
            <div class="example" id="example-e6df45e4">
                <a class="self-link" href="#example-e6df45e4"></a> 如果位于 <code>https://example.com/page.html</code>
                的文档设置了 <a data-link-type="dfn" href="#referrer-policy-strict-origin"
                    id="ref-for-referrer-policy-strict-origin-3">"<code>strict-origin</code>"</a> 策略，则导航到
                <code>https://<strong>not</strong>.example.com</code> 会发送一个 <a data-link-type="dfn"
                    href="https://tools.ietf.org/html/rfc7231#section-5.5.2"><code>Referer</code></a> 头，其值为
                <code>https://example.com/</code>。
                <p>从同一页面导航到 <code><strong>http://</strong>not.example.com</code> 则不会发送 <a data-link-type="dfn"
                        href="https://tools.ietf.org/html/rfc7231#section-5.5.2"><code>Referer</code></a> 头。</p>
            </div>
            <div class="example" id="example-e2f29a9f">
                <a class="self-link" href="#example-e2f29a9f"></a> 如果位于 <code>http://example.com/page.html</code> 的文档设置了
                <a data-link-type="dfn" href="#referrer-policy-strict-origin"
                    id="ref-for-referrer-policy-strict-origin-4">"<code>strict-origin</code>"</a> 策略，则导航到
                <code>http://<strong>not</strong>.example.com</code> 或 <code><strong>https</strong>://example.com</code>
                会发送一个 <a data-link-type="dfn"
                    href="https://tools.ietf.org/html/rfc7231#section-5.5.2"><code>Referer</code></a> 头，其值为
                <code>http://example.com/</code>。
            </div>
            <h3 class="heading settled dfn-paneled" data-dfn-type="dfn" data-export="" data-level="3.6"
                data-lt="&quot;origin-when-cross-origin&quot;" id="referrer-policy-origin-when-cross-origin"><span
                    class="secno">3.6. </span><span class="content">"<code>origin-when-cross-origin</code>"</span><span
                    id="referrer-policy-state-origin-when-cross-origin"></span></h3>
            <p>
                <a data-link-type="dfn" href="#referrer-policy-origin-when-cross-origin"
                    id="ref-for-referrer-policy-origin-when-cross-origin-1">"<code>origin-when-cross-origin</code>"</a>
                策略指定，当从特定 <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-client">请求客户端</a>
                发出 <a data-link-type="dfn" href="#same-origin-request" id="ref-for-same-origin-request-4">同源请求</a>
                时，会发送一个完整的 URL（<a href="#strip-url">剥离以用作引用</a>）作为引用信息；而当发出 <a data-link-type="dfn"
                    href="#cross-origin-request" id="ref-for-cross-origin-request-3">跨源请求</a> 时，仅发送 <a
                    data-link-type="dfn" href="https://tools.ietf.org/html/rfc6454#section-6.2">ASCII 序列化</a> 的 <a
                    data-link-type="dfn" href="https://tools.ietf.org/html/rfc6454#section-3.2">来源</a>。
            </p>
            <p class="note" role="note">
                注意：对于 <a data-link-type="dfn" href="#referrer-policy-origin-when-cross-origin"
                    id="ref-for-referrer-policy-origin-when-cross-origin-2">"<code>origin-when-cross-origin</code>"</a>
                策略，我们还将协议升级（例如从 <code>http://example.com/</code> 到 <code>https://example.com/</code> 的请求）视为 <a
                    data-link-type="dfn" href="#cross-origin-request" id="ref-for-cross-origin-request-4">跨源请求</a>。
            </p>
            <p class="note" role="note">
                注意：<a data-link-type="dfn" href="#referrer-policy-origin-when-cross-origin"
                    id="ref-for-referrer-policy-origin-when-cross-origin-3">"<code>origin-when-cross-origin</code>"</a>
                策略会导致 HTTPS 引用的来源作为未加密 HTTP 请求的一部分通过网络发送。<a data-link-type="dfn"
                    href="#referrer-policy-strict-origin-when-cross-origin"
                    id="ref-for-referrer-policy-strict-origin-when-cross-origin-1">"<code>strict-origin-when-cross-origin</code>"</a>
                策略解决了这一问题。
            </p>
            <div class="example" id="example-747c716f">
                <a class="self-link" href="#example-747c716f"></a> 如果位于 <code>https://example.com/page.html</code>
                的文档设置了 <a data-link-type="dfn" href="#referrer-policy-origin-when-cross-origin"
                    id="ref-for-referrer-policy-origin-when-cross-origin-4">"<code>origin-when-cross-origin</code>"</a>
                策略，则导航到 <code>https://example.com/not-page.html</code> 会发送一个 <a data-link-type="dfn"
                    href="https://tools.ietf.org/html/rfc7231#section-5.5.2"><code>Referer</code></a> 头，其值为
                <code>https://example.com/page.html</code>。
                <p>从同一页面导航到 <code>https://not.example.com/</code> 会发送一个 <a data-link-type="dfn"
                        href="https://tools.ietf.org/html/rfc7231#section-5.5.2"><code>Referer</code></a> 头，其值为
                    <code>https://example.com/</code>，即使 URL 不是 <a data-link-type="dfn"
                        href="https://w3c.github.io/webappsec-secure-contexts/#potentially-trustworthy-url">潜在可信
                        URL</a>。
                </p>
            </div>
            <h3 class="heading settled dfn-paneled" data-dfn-type="dfn" data-export="" data-level="3.7"
                data-lt="&quot;strict-origin-when-cross-origin&quot;"
                id="referrer-policy-strict-origin-when-cross-origin"><span class="secno">3.7. </span><span
                    class="content">"<code>strict-origin-when-cross-origin</code>"</span></h3>
            <p>
                <a data-link-type="dfn" href="#referrer-policy-strict-origin-when-cross-origin"
                    id="ref-for-referrer-policy-strict-origin-when-cross-origin-2">"<code>strict-origin-when-cross-origin</code>"</a>
                策略指定，当从特定 <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-client">请求客户端</a>
                发出 <a data-link-type="dfn" href="#same-origin-request" id="ref-for-same-origin-request-5">同源请求</a>
                时，会发送一个完整的 URL（<a href="#strip-url">剥离以用作引用</a>）作为引用信息；而当发出 <a data-link-type="dfn"
                    href="#cross-origin-request" id="ref-for-cross-origin-request-5">跨源请求</a> 时，仅发送 <a
                    data-link-type="dfn" href="https://tools.ietf.org/html/rfc6454#section-6.2">ASCII 序列化</a> 的 <a
                    data-link-type="dfn" href="https://tools.ietf.org/html/rfc6454#section-3.2">来源</a>：
            </p>
            <ul>
                <li>从 <a data-link-type="dfn" href="https://www.w3.org/TR/2010/REC-wsc-ui-20100812/#typesoftls">TLS
                        保护</a>的 <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object">环境设置对象</a>
                    发出的请求到 <a data-link-type="dfn"
                        href="https://w3c.github.io/webappsec-secure-contexts/#potentially-trustworthy-url">潜在可信
                        URL</a>。</li>
                <li>从 <em>非</em> <a data-link-type="dfn"
                        href="https://www.w3.org/TR/2010/REC-wsc-ui-20100812/#typesoftls">TLS 保护</a>的 <a
                        data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object">环境设置对象</a>
                    发出的请求到任何 <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc6454#section-3.2">来源</a>。</li>
            </ul>
            <p>
                从 <a data-link-type="dfn" href="https://www.w3.org/TR/2010/REC-wsc-ui-20100812/#typesoftls">TLS 保护</a>的
                <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-client">客户端</a> 发出的请求到非 <a
                    data-link-type="dfn"
                    href="https://w3c.github.io/webappsec-secure-contexts/#potentially-trustworthy-url">潜在可信
                    URL</a>，不会包含任何引用信息。不会发送
                <code><a data-link-type="dfn" href="https://tools.ietf.org/html/rfc7231#section-5.5.2">Referer</a></code>
                HTTP 头。
            </p>
            <div class="example" id="example-2269af87">
                <a class="self-link" href="#example-2269af87"></a> 如果位于 <code>https://example.com/page.html</code>
                的文档设置了 <a data-link-type="dfn" href="#referrer-policy-strict-origin-when-cross-origin"
                    id="ref-for-referrer-policy-strict-origin-when-cross-origin-3">"<code>strict-origin-when-cross-origin</code>"</a>
                策略，则导航到 <code>https://example.com/not-page.html</code> 会发送一个 <a data-link-type="dfn"
                    href="https://tools.ietf.org/html/rfc7231#section-5.5.2"><code>Referer</code></a> 头，其值为
                <code>https://example.com/page.html</code>。
                <p>从同一页面导航到 <code>https://not.example.com/</code> 会发送一个 <a data-link-type="dfn"
                        href="https://tools.ietf.org/html/rfc7231#section-5.5.2"><code>Referer</code></a> 头，其值为
                    <code>https://example.com/</code>。
                </p>
                <p>从同一页面导航到 <code><strong>http://</strong>not.example.com/</code> 则不会发送 <a data-link-type="dfn"
                        href="https://tools.ietf.org/html/rfc7231#section-5.5.2"><code>Referer</code></a> 头。</p>
            </div>
            <h3 class="heading settled dfn-paneled" data-dfn-type="dfn" data-export="" data-level="3.8"
                data-lt="&quot;unsafe-url&quot;" id="referrer-policy-unsafe-url"><span class="secno">3.8. </span><span
                    class="content">"<code>unsafe-url</code>"</span><span id="referrer-policy-state-unsafe-url"></span>
            </h3>
            <p>
                <a data-link-type="dfn" href="#referrer-policy-unsafe-url"
                    id="ref-for-referrer-policy-unsafe-url-1">"<code>unsafe-url</code>"</a> 策略指定，无论是从特定 <a
                    data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-client">客户端</a> 发出的 <a
                    data-link-type="dfn" href="#same-origin-request" id="ref-for-same-origin-request-6">同源请求</a> 还是 <a
                    data-link-type="dfn" href="#cross-origin-request"
                    id="ref-for-cross-origin-request-6">跨源请求</a>，都会发送一个完整的 URL（<a href="#strip-url">剥离以用作引用</a>）作为引用信息。
            </p>
            <div class="example" id="example-32de6eb8">
                <a class="self-link" href="#example-32de6eb8"></a> 如果位于
                <code>https://example.com/sekrit.html</code> 的文档设置了 <a data-link-type="dfn"
                    href="#referrer-policy-unsafe-url"
                    id="ref-for-referrer-policy-unsafe-url-2">"<code>unsafe-url</code>"</a> 策略，则导航到
                <code>http://not.example.com/</code>（以及其他所有来源）会发送一个
                <code><a data-link-type="dfn" href="https://tools.ietf.org/html/rfc7231#section-5.5.2">Referer</a></code>
                HTTP 头，其值为 <code>https://example.com/sekrit.html</code>。
            </div>
            <p class="note" role="note">
                注意：该策略的名称并未误导；它确实不安全。此策略会将 <a data-link-type="dfn"
                    href="https://www.w3.org/TR/2010/REC-wsc-ui-20100812/#typesoftls">TLS
                    保护</a>资源的来源和路径泄露到不安全的来源。请仔细考虑为潜在敏感文档设置此类策略的影响。
            </p>
            <h3 class="heading settled" data-dfn-type="dfn" data-export="" data-level="3.9" data-lt="The empty string"
                id="referrer-policy-empty-string"><span class="secno">3.9.
                </span><span class="content">空字符串</span><a class="self-link" href="#referrer-policy-empty-string"></a>
            </h3>
            <p>
                空字符串 "" 对应于没有 <a data-link-type="dfn" href="#referrer-policy"
                    id="ref-for-referrer-policy-6">引用策略</a>，导致回退到其他地方定义的 <a data-link-type="dfn" href="#referrer-policy"
                    id="ref-for-referrer-policy-7">引用策略</a>，或者在没有此类高级策略的情况下，默认回退到 <a data-link-type="dfn"
                    href="#referrer-policy-no-referrer-when-downgrade"
                    id="ref-for-referrer-policy-no-referrer-when-downgrade-3">"<code>no-referrer-when-downgrade</code>"</a>。此默认行为发生在
                <a href="#determine-requests-referrer" id="ref-for-determine-requests-referrer-1">§8.3
                    确定请求的引用</a> 算法中。
            </p>
            <div class="example" id="example-27ee7725">
                <a class="self-link" href="#example-27ee7725"></a> 给定一个 HTML
                <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/semantics.html#the-a-element">a</a></code>
                元素，没有声明任何
                <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/semantics.html#attr-hyperlink-referrerpolicy">referrerpolicy</a></code>
                属性，其引用策略为空字符串。因此，通过点击该
                <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/semantics.html#the-a-element">a</a></code>
                元素发起的导航请求将使用该
                <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/semantics.html#the-a-element">a</a></code>
                元素的 <a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/dom.html#concept-document-referrer-policy">引用策略</a>。如果该
                <code
                    class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/dom.html#document">Document</a></code>
                的引用策略为空字符串，则 <a href="#determine-requests-referrer" id="ref-for-determine-requests-referrer-2">§8.3
                    确定请求的引用</a> 算法会将空字符串视为 <a data-link-type="dfn" href="#referrer-policy-no-referrer-when-downgrade"
                    id="ref-for-referrer-policy-no-referrer-when-downgrade-4">"<code>no-referrer-when-downgrade</code>"</a>。
            </div>
        </section>
        <section>
            <h2 class="heading settled" data-level="4" id="referrer-policy-delivery"><span class="secno">4. </span><span
                    class="content">引用策略的传递</span><a class="self-link" href="#referrer-policy-delivery"></a></h2>
            <p>
                一个 <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request">请求</a> 的 <a
                    data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-referrer-policy">引用策略</a>
                可以通过以下五种方式传递：
            </p>
            <ul>
                <li>通过 <code>Referrer-Policy</code> HTTP 头（定义在 <a href="#referrer-policy-header">§4.1 通过 Referrer-Policy
                        头传递</a>）。</li>
                <li>通过
                    <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/semantics.html#meta">meta</a></code>
                    元素，其
                    <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/semantics.html#attr-meta-name">name</a></code>
                    属性为 <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/semantics.html#meta-referrer"><code>referrer</code></a>。
                </li>
                <li>通过 <code>referrerpolicy</code>
                    内容属性，应用于以下元素：<code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/semantics.html#the-a-element">a</a></code>、<code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/embedded-content.html#the-area-element">area</a></code>、<code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/embedded-content.html#the-img-element">img</a></code>、<code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/embedded-content.html#the-iframe-element">iframe</a></code>
                    或
                    <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/semantics.html#the-link-element">link</a></code>。
                </li>
                <li>通过
                    <code><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/semantics.html#link-type-noreferrer">noreferrer</a></code>
                    链接关系，应用于以下元素：<code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/semantics.html#the-a-element">a</a></code>、<code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/embedded-content.html#the-area-element">area</a></code>
                    或
                    <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/semantics.html#the-link-element">link</a></code>。
                </li>
                <li>通过继承隐式传递。</li>
            </ul>
            <h3 class="heading settled" data-level="4.1" id="referrer-policy-header"><span class="secno">4.1.
                </span><span class="content">通过 Referrer-Policy 头传递</span><a class="self-link"
                    href="#referrer-policy-header"></a></h3>
            <p>
                <code><dfn class="dfn-paneled" data-dfn-type="dfn" data-local-lt="referrer-policy header" data-noexport="" id="referrer-policy-header-dfn">Referrer-Policy</dfn></code>
                HTTP 头指定了用户代理在确定应包含哪些引用信息时应用的引用策略，以及在从受保护资源的上下文创建的 <a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context">浏览上下文</a>中应用的策略。头名称和值的语法由以下
                ABNF 语法描述：
            </p>
            <pre>"Referrer-Policy:" 1#<a data-link-type="dfn" href="#policy-token" id="ref-for-policy-token-1">policy-token</a>
</pre>
            <pre><dfn class="dfn-paneled" data-dfn-type="dfn" data-export="" id="policy-token">policy-token</dfn>   = "no-referrer" / "no-referrer-when-downgrade" / "strict-origin" / "strict-origin-when-cross-origin" / "same-origin" / "origin" / "origin-when-cross-origin" / "unsafe-url"
</pre>
            <p class="note" role="note">
                注意：头名称与 HTTP Referer 头的拼写错误无关。
            </p>
            <p>
                <a href="#integration-with-fetch">§5 与 Fetch 的集成</a> 和 <a href="#integration-with-html">§6 与 HTML
                    的集成</a> 描述了如何处理 <code>Referrer-Policy</code> 头。
            </p>
            <section class="informative">
                <h4 class="heading settled" data-level="4.1.1" id="referrer-usage"><span class="secno">4.1.1.
                    </span><span class="content">使用</span><a class="self-link" href="#referrer-usage"></a></h4>
                <p><em>本节为非规范性内容。</em></p>
                <p>
                    受保护资源可以通过将 <code>no-referrer</code> 指定为其 <code>Referrer-Policy</code> 头的值来防止引用泄漏：
                </p>
                <pre>Referrer-Policy: no-referrer
</pre>
                <p>
                    这将导致从受保护资源的上下文发出的所有请求都具有空的 <code>Referer</code> [sic] 头。
                </p>
            </section>
            <section class="informative">
                <h3 class="heading settled" data-level="4.2" id="referrer-policy-delivery-meta"><span class="secno">4.2.
                    </span><span class="content">通过
                        <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/semantics.html#meta">meta</a></code>
                        传递</span><a class="self-link" href="#referrer-policy-delivery-meta"></a></h3>
                <p><em>本节为非规范性内容。</em></p>
                <p>
                    HTML 标准定义了 <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/semantics.html#meta-referrer"><code>referrer</code></a>
                    关键字，用于
                    <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/semantics.html#meta">meta</a></code>
                    元素，允许通过标记设置 <a data-link-type="dfn" href="#referrer-policy" id="ref-for-referrer-policy-8">引用策略</a>。
                </p>
            </section>
            <section class="informative">
                <h3 class="heading settled" data-level="4.3" id="referrer-policy-delivery-referrer-attribute"><span
                        class="secno">4.3. </span><span class="content">通过 <code>referrerpolicy</code> 内容属性传递</span><a
                        class="self-link" href="#referrer-policy-delivery-referrer-attribute"></a></h3>
                <p><em>本节为非规范性内容。</em></p>
                <p>
                    HTML 标准定义了 <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/infrastructure.html#referrer-policy-attribute">引用策略属性</a>
                    的概念，适用于其多个元素，例如：
                </p>
                <pre class="example" id="example-4214a796"><a class="self-link" href="#example-4214a796"></a><code class="lang-html highlight"><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"http://example.com"</span> <span class="na">referrerpolicy=</span><span class="s">"origin"</span><span class="nt">></span>
</code></pre>
            </section>
            <section class="informative">
                <h3 class="heading settled" data-level="4.4" id="referrer-policy-delivery-nested"><span
                        class="secno">4.4. </span><span class="content">嵌套浏览上下文</span><span
                        id="referrer-policy-delivery-implicit"></span><a class="self-link"
                        href="#referrer-policy-delivery-nested"></a></h3>
                <p><em>本节为非规范性内容。</em></p>
                <p>
                    HTML 标准和 Fetch 标准定义了如何处理嵌套浏览上下文，这些上下文不是从 <a data-link-type="dfn"
                        href="https://fetch.spec.whatwg.org/#concept-response">响应</a> 创建的，例如设置了
                    <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/embedded-content.html#the-iframe-element">iframe</a></code>
                    元素的
                    <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/embedded-content.html#attr-iframe-srcdoc">srcdoc</a></code>
                    属性，或从 blob URL 创建的上下文。这些上下文会从创建它们的浏览上下文或 blob URL 继承其 <a data-link-type="dfn"
                        href="#referrer-policy" id="ref-for-referrer-policy-9">引用策略</a>。
                </p>
            </section>
        </section>
        <section class="informative">
            <h2 class="heading settled" data-level="5" id="integration-with-fetch"><span class="secno">5. </span><span
                    class="content">与 Fetch 的集成</span><a class="self-link" href="#integration-with-fetch"></a></h2>
            <p><em>本节为非规范性内容。</em></p>
            <p>
                Fetch 规范在 <a href="#set-requests-referrer-policy-on-redirect"
                    id="ref-for-set-requests-referrer-policy-on-redirect-1">§8.2 设置请求的引用策略（重定向）</a> 中调用，在 <a
                    href="https://fetch.spec.whatwg.org/#http-redirect-fetch">HTTP 重定向 Fetch 的第 13
                    步</a>之前，以便在跟随重定向之前更新请求的引用策略。
            </p>
            <p>
                Fetch 规范在 <a href="#determine-requests-referrer" id="ref-for-determine-requests-referrer-3">§8.3
                    确定请求的引用</a> 中调用，作为 <a href="https://fetch.spec.whatwg.org/#main-fetch">主 Fetch 算法的第 8 步</a>，并使用结果设置
                <var>request</var> 的 <code>referrer</code> 属性。Fetch 负责序列化提供的 URL，并在 <var>request</var> 上设置
                `<code>Referer</code>` 头。
            </p>
        </section>
        <section class="informative">
            <h2 class="heading settled" data-level="6" id="integration-with-html"><span class="secno">6. </span><span
                    class="content">与 HTML 的集成</span><a class="self-link" href="#integration-with-html"></a></h2>
            <p><em>本节为非规范性内容。</em></p>
            <p>
                HTML 标准确定了在 <a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/browsers.html#navigate">导航</a>或 <a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/workers.html#run-a-worker">运行 worker</a> 时接收到的任何响应的 <a
                    data-link-type="dfn" href="#referrer-policy" id="ref-for-referrer-policy-10">引用策略</a>，并使用结果设置生成的
                <code
                    class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/dom.html#document">Document</a></code>
                或 <code
                    class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/workers.html#workerglobalscope">WorkerGlobalScope</a></code>
                的引用策略。随后，这些策略由相应的 <a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object">环境设置对象</a>使用，该对象作为
                <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-client">请求客户端</a>，用于其发起的 <a
                    data-link-type="dfn" href="https://fetch.spec.whatwg.org/#fetching">Fetch</a>。
            </p>
            <p class="note" role="note">
                注意：W3C HTML5 未定义 <code>referrerpolicy</code> 内容属性、<code>referrerPolicy</code> IDL 属性、<a
                    data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/semantics.html#meta-referrer"><code>referrer</code></a>
                关键字（用于
                <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/semantics.html#meta">meta</a></code>），或与导航或运行
                worker 的集成。为了使本规范与 W3C HTML5 一致，需要从 <a data-link-type="biblio" href="#biblio-html">[HTML]</a> 中复制这些内容。
            </p>
        </section>
        <section>
            <h2 class="heading settled" data-level="7" id="integration-with-css"><span class="secno">7. </span><span
                    class="content">与 CSS 的集成</span><a class="self-link" href="#integration-with-css"></a></h2>
            <p>
                CSS 标准未指定如何获取样式表引用的资源。然而，实施应确保设置样式表发起的任何 <a data-link-type="dfn"
                    href="https://fetch.spec.whatwg.org/#concept-request">请求</a> 的引用相关属性，如下所示：
            </p>
            <ol>
                <li>
                    如果请求由 <a data-link-type="dfn" href="https://drafts.csswg.org/cssom-1/#css-declaration-block">CSS
                        声明块</a>负责，则将 <a data-link-type="dfn"
                        href="https://fetch.spec.whatwg.org/#concept-request-referrer">引用</a> 设置为块的 <a
                        data-link-type="dfn"
                        href="https://drafts.csswg.org/cssom-1/#cssstyledeclaration-owner-node">所有者节点</a>的 <a
                        data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document">节点文档</a>的 <a
                        data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document-url">URL</a>，并将 <a
                        data-link-type="dfn"
                        href="https://fetch.spec.whatwg.org/#concept-request-referrer-policy">引用策略</a> 设置为块的 <a
                        data-link-type="dfn"
                        href="https://drafts.csswg.org/cssom-1/#cssstyledeclaration-owner-node">所有者节点</a>的 <a
                        data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document">节点文档</a>的 <a
                        data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/dom.html#concept-document-referrer-policy">引用策略</a>。
                </li>
                <li>
                    如果请求由 <a data-link-type="dfn" href="https://www.w3.org/TR/cssom-1/#css-style-sheet">CSS
                        样式表</a>负责，并且其 <a data-link-type="dfn"
                        href="https://drafts.csswg.org/cssom-1/#concept-css-style-sheet-location">位置</a> 非空，则将 <a
                        data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-referrer">引用</a> 设置为其
                    <a data-link-type="dfn"
                        href="https://drafts.csswg.org/cssom-1/#concept-css-style-sheet-location">位置</a>，并将 <a
                        data-link-type="dfn"
                        href="https://fetch.spec.whatwg.org/#concept-request-referrer-policy">引用策略</a> 设置为其 <a
                        data-link-type="dfn" href="#cssstylesheet-referrer-policy"
                        id="ref-for-cssstylesheet-referrer-policy-1">引用策略</a>。
                    <p class="issue" id="issue-8299c74c"><a class="self-link" href="#issue-8299c74c"></a> 这要求 CSS 样式表处理
                        `Referrer-Policy` 头，并以与 <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/dom.html#concept-document-referrer-policy">文档</a>相同的方式存储
                        <dfn class="dfn-paneled" data-dfn-for="CSSStyleSheet" data-dfn-type="dfn" data-noexport=""
                            id="cssstylesheet-referrer-policy">引用策略</dfn>。
                    </p>
                </li>
                <li>
                    否则，由 <a data-link-type="dfn" href="https://www.w3.org/TR/cssom-1/#css-style-sheet">CSS
                        样式表</a>负责的请求，其 <a data-link-type="dfn"
                        href="https://drafts.csswg.org/cssom-1/#concept-css-style-sheet-location">位置</a> 为 null：将 <a
                        data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-referrer">引用</a> 设置为其
                    <a data-link-type="dfn"
                        href="https://drafts.csswg.org/cssom-1/#concept-css-style-sheet-owner-node">所有者节点</a>的 <a
                        data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document">节点文档</a>的 <a
                        data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document-url">URL</a>，并将 <a
                        data-link-type="dfn"
                        href="https://fetch.spec.whatwg.org/#concept-request-referrer-policy">引用策略</a> 设置为块的 <a
                        data-link-type="dfn"
                        href="https://drafts.csswg.org/cssom-1/#concept-css-style-sheet-owner-node">所有者节点</a>的 <a
                        data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document">节点文档</a>的 <a
                        data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/dom.html#concept-document-referrer-policy">引用策略</a>。
                </li>
            </ol>
            <p class="note" role="note">
                注意：请求的 <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request">引用</a> 和 <a
                    data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-referrer-policy">引用策略</a>
                的值是基于创建请求时的值设置的。如果文档的引用策略在其生命周期内发生变化，与内联样式表请求相关联的策略也会随之变化。
            </p>
        </section>
        <section>
            <h2 class="heading settled" data-level="8" id="algorithms"><span class="secno">8. </span><span
                    class="content">算法</span><a class="self-link" href="#algorithms"></a></h2>
            <h3 class="heading settled" data-level="8.1" id="parse-referrer-policy-from-header"><span class="secno">8.1.
                </span><span class="content">从 <a data-link-type="dfn" href="#referrer-policy-header-dfn"
                        id="ref-for-referrer-policy-header-dfn-1"><code>Referrer-Policy</code></a> 头解析引用策略</span><a
                    class="self-link" href="#parse-referrer-policy-from-header"></a></h3>
            <p>
                给定一个 <code
                    class="idl"><a data-link-type="idl" href="https://fetch.spec.whatwg.org/#response">Response</a></code>
                <var>response</var>，以下步骤根据 <var>response</var> 的 `<code>Referrer-Policy</code>` 头返回一个 <a
                    data-link-type="dfn" href="#referrer-policy" id="ref-for-referrer-policy-11">引用策略</a>：
            </p>
            <ol>
                <li>让 <var>policy-tokens</var> 是 <a data-link-type="dfn"
                        href="https://fetch.spec.whatwg.org/#concept-header-parse">解析</a> <var>response</var> 的 <a
                        data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response-header-list">头列表</a>
                    中 `<code>Referrer-Policy</code>` 的结果。</li>
                <li>让 <var>policy</var> 是空字符串。</li>
                <li>对于 <var>policy-tokens</var> 中的每个 <var>token</var>，如果 <var>token</var> 是一个 <a data-link-type="dfn"
                        href="#referrer-policy" id="ref-for-referrer-policy-12">引用策略</a> 且 <var>token</var> 不是空字符串，则将
                    <var>policy</var> 设置为 <var>token</var>。
                    <p class="note" role="note">注意：此算法循环处理多个策略值，以允许为旧的用户代理提供回退，同时部署新的策略值，如 <a
                            href="#unknown-policy-values">§11.1 未知策略值</a> 中所述。</p>
                </li>
                <li>返回 <var>policy</var>。</li>
            </ol>
            <h3 class="heading settled dfn-paneled" data-dfn-type="dfn" data-export="" data-level="8.2"
                data-lt="Set request’s referrer policy on redirect" id="set-requests-referrer-policy-on-redirect"><span
                    class="secno">8.2. </span><span class="content">在重定向时设置 <var>request</var> 的引用策略</span></h3>
            <p>
                给定一个 <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request">请求</a>
                <var>request</var> 和一个 <a data-link-type="dfn"
                    href="https://fetch.spec.whatwg.org/#concept-response">响应</a> <var>actualResponse</var>，此算法根据
                <var>actualResponse</var> 中的 Referrer-Policy 头（如果有）更新 <var>request</var> 的关联 <a data-link-type="dfn"
                    href="https://fetch.spec.whatwg.org/#concept-request-referrer-policy">引用策略</a>。
            </p>
            <ol>
                <li>让 <var>policy</var> 是在 <var>actualResponse</var> 上执行 <a
                        href="#parse-referrer-policy-from-header">§8.1 从 Referrer-Policy 头解析引用策略</a> 的结果。</li>
                <li>如果 <var>policy</var> 不是空字符串，则将 <var>request</var> 的关联引用策略设置为 <var>policy</var>。</li>
            </ol>
            <h3 class="heading settled dfn-paneled" data-dfn-type="dfn" data-export="" data-level="8.3"
                data-lt="Determine request’s Referrer" id="determine-requests-referrer"><span class="secno">8.3.
                </span><span class="content">确定 <var>request</var> 的引用</span></h3>
            <p>
                给定一个 <code
                    class="idl"><a data-link-type="idl" href="https://fetch.spec.whatwg.org/#request">Request</a></code>
                <var>request</var>，我们可以通过检查与其关联的 <a data-link-type="dfn"
                    href="https://fetch.spec.whatwg.org/#concept-request-referrer-policy">引用策略</a>
                来确定要发送的正确引用信息，如以下步骤所述，这些步骤返回 <code>no referrer</code> 或一个 URL：
            </p>
            <ol>
                <li>让 <var>policy</var> 是 <var>request</var> 的关联 <a data-link-type="dfn"
                        href="https://fetch.spec.whatwg.org/#concept-request-referrer-policy">引用策略</a>。</li>
                <li>让 <var>environment</var> 是 <var>request</var> 的 <a data-link-type="dfn"
                        href="https://fetch.spec.whatwg.org/#concept-request-client">客户端</a>。</li>
                <li>根据 <var>request</var> 的 <a data-link-type="dfn"
                        href="https://fetch.spec.whatwg.org/#concept-request-referrer">引用</a> 执行以下操作：
                    <dl class="switch">
                        <dt>"<code>client</code>"</dt>
                        <dd>
                            <ol>
                                <li>如果 <var>environment</var> 的 <a data-link-type="dfn"
                                        href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-global">全局对象</a>
                                    是一个 <code
                                        class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/browsers.html#window">Window</a></code>
                                    对象，则：
                                    <ol>
                                        <li>让 <var>document</var> 是 <var>environment</var> 的 <a data-link-type="dfn"
                                                href="https://html.spec.whatwg.org/multipage/browsers.html#concept-document-window">关联
                                                <code>Document</code></a>。</li>
                                        <li>如果 <var>document</var> 的 <a data-link-type="dfn"
                                                href="https://tools.ietf.org/html/rfc6454#section-3.2">来源</a> 是一个 <a
                                                data-link-type="dfn"
                                                href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin-opaque">不透明来源</a>，返回
                                            <code>no referrer</code>。
                                        </li>
                                        <li>当 <var>document</var> 是一个 <a data-link-type="dfn"
                                                href="https://html.spec.whatwg.org/multipage/embedded-content.html#an-iframe-srcdoc-document">iframe
                                                srcdoc 文档</a> 时，让 <var>document</var> 是其 <a data-link-type="dfn"
                                                href="https://html.spec.whatwg.org/multipage/browsers.html#concept-document-bc">浏览上下文</a>的
                                            <a data-link-type="dfn"
                                                href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context-container">浏览上下文容器</a>
                                            的 <a data-link-type="dfn"
                                                href="https://dom.spec.whatwg.org/#concept-node-document">节点文档</a>。
                                        </li>
                                        <li>让 <var>referrerSource</var> 是 <var>document</var> 的 <a data-link-type="dfn"
                                                href="https://dom.spec.whatwg.org/#concept-document-url">URL</a>。</li>
                                    </ol>
                                </li>
                                <li>否则，让 <var>referrerSource</var> 是 <var>environment</var> 的 <a data-link-type="dfn"
                                        href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-creation-url">创建
                                        URL</a>。</li>
                            </ol>
                        </dd>
                        <dt>一个 <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url">URL</a></dt>
                        <dd>让 <var>referrerSource</var> 是 <var>request</var> 的 <a data-link-type="dfn"
                                href="https://fetch.spec.whatwg.org/#concept-request-referrer">引用</a>。</dd>
                    </dl>
                    <p class="note" role="note">注意：如果 <var>request</var> 的 <a data-link-type="dfn"
                            href="https://fetch.spec.whatwg.org/#concept-request-referrer">引用</a> 是
                        "<code>no-referrer</code>"，Fetch 不会调用此算法。</p>
                </li>
                <li>让 <var>referrerURL</var> 是 <a href="#strip-url">剥离 <var>referrerSource</var> 以用作引用</a> 的结果。</li>
                <li>让 <var>referrerOrigin</var> 是 <a href="#strip-url">剥离 <var>referrerSource</var> 以用作引用</a> 的结果，并将
                    <code><a data-link-type="dfn" href="#origin-only-flag" id="ref-for-origin-only-flag-1">仅来源标志</a></code>
                    设置为 <code>true</code>。
                </li>
                <li>根据 <var>policy</var> 的值执行以下语句：
                    <dl class="switch">
                        <dt><a data-link-type="dfn" href="#referrer-policy-no-referrer"
                                id="ref-for-referrer-policy-no-referrer-3">"<code>no-referrer</code>"</a></dt>
                        <dd>返回 <code>no referrer</code></dd>
                        <dt><a data-link-type="dfn" href="#referrer-policy-origin"
                                id="ref-for-referrer-policy-origin-4">"<code>origin</code>"</a></dt>
                        <dd>返回 <var>referrerOrigin</var></dd>
                        <dt><a data-link-type="dfn" href="#referrer-policy-unsafe-url"
                                id="ref-for-referrer-policy-unsafe-url-3">"<code>unsafe-url</code>"</a></dt>
                        <dd>返回 <var>referrerURL</var></dd>
                        <dt><a data-link-type="dfn" href="#referrer-policy-strict-origin"
                                id="ref-for-referrer-policy-strict-origin-5">"<code>strict-origin</code>"</a></dt>
                        <dd>
                            <ol>
                                <li>如果 <var>environment</var> 不为 null：
                                    <ol>
                                        <li>如果 <var>environment</var> 是 <a data-link-type="dfn"
                                                href="https://www.w3.org/TR/2010/REC-wsc-ui-20100812/#typesoftls">TLS
                                                保护</a> 且 <var>request</var> 的 <a
                                                href="https://fetch.spec.whatwg.org/#concept-request-current-url">当前
                                                URL</a> 不是 <a data-link-type="dfn"
                                                href="https://w3c.github.io/webappsec-secure-contexts/#potentially-trustworthy-url">潜在可信
                                                URL</a>，则返回 <code>no referrer</code>。</li>
                                    </ol>
                                </li>
                                <li>返回 <var>referrerOrigin</var>。</li>
                            </ol>
                        </dd>
                        <dt><a data-link-type="dfn" href="#referrer-policy-strict-origin-when-cross-origin"
                                id="ref-for-referrer-policy-strict-origin-when-cross-origin-4">"<code>strict-origin-when-cross-origin</code>"</a>
                        </dt>
                        <dd>
                            <ol>
                                <li>如果 <var>request</var> 是一个 <a data-link-type="dfn" href="#same-origin-request"
                                        id="ref-for-same-origin-request-7">同源请求</a>，则返回 <var>referrerURL</var>。</li>
                                <li>如果 <var>environment</var> 不为 null：
                                    <ol>
                                        <li>如果 <var>environment</var> 是 <a data-link-type="dfn"
                                                href="https://www.w3.org/TR/2010/REC-wsc-ui-20100812/#typesoftls">TLS
                                                保护</a> 且 <var>request</var> 的 <a
                                                href="https://fetch.spec.whatwg.org/#concept-request-current-url">当前
                                                URL</a> 不是 <a data-link-type="dfn"
                                                href="https://w3c.github.io/webappsec-secure-contexts/#potentially-trustworthy-url">潜在可信
                                                URL</a>，则返回 <code>no referrer</code>。</li>
                                    </ol>
                                </li>
                                <li>返回 <var>referrerOrigin</var>。</li>
                            </ol>
                        </dd>
                        <dt><a data-link-type="dfn" href="#referrer-policy-same-origin"
                                id="ref-for-referrer-policy-same-origin-3">"<code>same-origin</code>"</a></dt>
                        <dd>
                            <ol>
                                <li>如果 <var>request</var> 是一个 <a data-link-type="dfn" href="#same-origin-request"
                                        id="ref-for-same-origin-request-8">同源请求</a>，则返回 <var>referrerURL</var>。</li>
                                <li>否则，返回 <code>no referrer</code>。</li>
                            </ol>
                        </dd>
                        <dt><a data-link-type="dfn" href="#referrer-policy-origin-when-cross-origin"
                                id="ref-for-referrer-policy-origin-when-cross-origin-5">"<code>origin-when-cross-origin</code>"</a>
                        </dt>
                        <dd>
                            <ol>
                                <li>如果 <var>request</var> 是一个 <a data-link-type="dfn" href="#cross-origin-request"
                                        id="ref-for-cross-origin-request-7">跨源请求</a>，则返回 <var>referrerOrigin</var>。</li>
                                <li>否则，返回 <var>referrerURL</var>。</li>
                            </ol>
                        </dd>
                        <dt><a data-link-type="dfn" href="#referrer-policy-no-referrer-when-downgrade"
                                id="ref-for-referrer-policy-no-referrer-when-downgrade-5">"<code>no-referrer-when-downgrade</code>"</a>
                        </dt>
                        <dd>
                            <ol>
                                <li>如果 <var>environment</var> 不为 null：
                                    <ol>
                                        <li>如果 <var>environment</var> 是 <a data-link-type="dfn"
                                                href="https://www.w3.org/TR/2010/REC-wsc-ui-20100812/#typesoftls">TLS
                                                保护</a> 且 <var>request</var> 的 <a
                                                href="https://fetch.spec.whatwg.org/#concept-request-current-url">当前
                                                URL</a> 不是 <a data-link-type="dfn"
                                                href="https://w3c.github.io/webappsec-secure-contexts/#potentially-trustworthy-url">潜在可信
                                                URL</a>，则返回 <code>no referrer</code>。</li>
                                    </ol>
                                </li>
                                <li>返回 <var>referrerURL</var>。</li>
                            </ol>
                        </dd>
                    </dl>
                    <p class="note" role="note">注意：Fetch 会确保 <var>request</var> 的 <a data-link-type="dfn"
                            href="#referrer-policy" id="ref-for-referrer-policy-13">引用策略</a> 在调用此算法之前不是空字符串。</p>
                </li>
            </ol>
            <h3 class="heading settled" data-level="8.4" id="strip-url"><span class="secno">8.4. </span><span
                    class="content">剥离 <var>url</var> 以用作引用</span><a class="self-link" href="#strip-url"></a></h3>
            <p>
                在将 URL 作为 `<code>Referer</code>` 头的值发送时，某些部分必须被剥离：URL 的片段、用户名和密码组件应在发送前剥离。此算法接受一个
                <code><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="origin-only-flag">仅来源标志</dfn></code>，默认值为
                <code>false</code>。如果设置为 <code>true</code>，算法将额外移除 URL 的路径和查询组件，仅保留方案、主机和端口。
            </p>
            <ol>
                <li>如果 <var>url</var> 是 <code>null</code>，返回 <code>no referrer</code>。</li>
                <li>如果 <var>url</var> 的 <a data-link-type="dfn"
                        href="https://url.spec.whatwg.org/#concept-url-scheme">方案</a> 是 <a data-link-type="dfn"
                        href="https://url.spec.whatwg.org/#local-scheme">本地方案</a>，则返回 <code>no referrer</code>。</li>
                <li>将 <var>url</var> 的 <a data-link-type="dfn"
                        href="https://url.spec.whatwg.org/#concept-url-username">用户名</a> 设置为空字符串。</li>
                <li>将 <var>url</var> 的 <a data-link-type="dfn"
                        href="https://url.spec.whatwg.org/#concept-url-password">密码</a> 设置为 <code>null</code>。</li>
                <li>将 <var>url</var> 的 <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/infrastructure.html#concept-url-fragment">片段</a>
                    设置为 <code>null</code>。</li>
                <li>
                    如果
                    <code><a data-link-type="dfn" href="#origin-only-flag" id="ref-for-origin-only-flag-2">仅来源标志</a></code>
                    是 <code>true</code>，则：
                    <ol>
                        <li>将 <var>url</var> 的 <a data-link-type="dfn"
                                href="https://url.spec.whatwg.org/#concept-url-path">路径</a> 设置为 <code>null</code>。</li>
                        <li>将 <var>url</var> 的 <a data-link-type="dfn"
                                href="https://url.spec.whatwg.org/#concept-url-query">查询</a> 设置为 <code>null</code>。</li>
                    </ol>
                </li>
                <li>返回 <var>url</var>。</li>
            </ol>
        </section>
        <section>
            <h2 class="heading settled" data-level="9" id="privacy"><span class="secno">9. </span><span
                    class="content">隐私注意事项</span><a class="self-link" href="#privacy"></a></h2>
            <h3 class="heading settled" data-level="9.1" id="user-controls"><span class="secno">9.1. </span><span
                    class="content">用户控制</span><a class="self-link" href="#user-controls"></a></h3>
            <p>
                本规范中的内容不应被解释为阻止用户代理提供选项以更改通过 `<code>Referer</code>` 头发送的信息。例如，用户代理可以允许用户完全抑制引用头，无论页面上的活动 <a
                    data-link-type="dfn" href="#referrer-policy" id="ref-for-referrer-policy-14">引用策略</a> 是什么。
            </p>
        </section>
        <section>
            <h2 class="heading settled" data-level="10" id="security"><span class="secno">10. </span><span
                    class="content">安全注意事项</span><a class="self-link" href="#security"></a></h2>
            <h3 class="heading settled" data-level="10.1" id="information-leakage"><span class="secno">10.1.
                </span><span class="content">信息泄露</span><a class="self-link" href="#information-leakage"></a></h3>
            <p>
                <a data-link-type="dfn" href="#referrer-policy" id="ref-for-referrer-policy-15">引用策略</a>中的 <a
                    data-link-type="dfn" href="#referrer-policy-origin"
                    id="ref-for-referrer-policy-origin-5">"<code>origin</code>"</a>、<a data-link-type="dfn"
                    href="#referrer-policy-origin-when-cross-origin"
                    id="ref-for-referrer-policy-origin-when-cross-origin-6">"<code>origin-when-cross-origin</code>"</a>
                和 <a data-link-type="dfn" href="#referrer-policy-unsafe-url"
                    id="ref-for-referrer-policy-unsafe-url-4">"<code>unsafe-url</code>"</a> 可能分别通过不安全的传输泄露安全站点的来源和 URL。
            </p>
            <p>
                尽管如此，这三个策略仍包含在规范中，以降低站点采用安全传输的阻力。
            </p>
            <p>
                希望确保不泄露比默认策略更多信息的作者应改用以下策略状态：<a data-link-type="dfn" href="#referrer-policy-same-origin"
                    id="ref-for-referrer-policy-same-origin-4">"<code>same-origin</code>"</a>、<a data-link-type="dfn"
                    href="#referrer-policy-strict-origin"
                    id="ref-for-referrer-policy-strict-origin-6">"<code>strict-origin</code>"</a>、<a
                    data-link-type="dfn" href="#referrer-policy-strict-origin-when-cross-origin"
                    id="ref-for-referrer-policy-strict-origin-when-cross-origin-5">"<code>strict-origin-when-cross-origin</code>"</a>
                或 <a data-link-type="dfn" href="#referrer-policy-no-referrer"
                    id="ref-for-referrer-policy-no-referrer-4">"<code>no-referrer</code>"</a>。
            </p>
            <h3 class="heading settled" data-level="10.2" id="downgrade"><span class="secno">10.2. </span><span
                    class="content">降级到较不严格的策略</span><a class="self-link" href="#downgrade"></a></h3>
            <p>
                规范不禁止降级到较不严格的策略，例如从 <a data-link-type="dfn" href="#referrer-policy-no-referrer"
                    id="ref-for-referrer-policy-no-referrer-5">"<code>no-referrer</code>"</a> 降级到 <a
                    data-link-type="dfn" href="#referrer-policy-unsafe-url"
                    id="ref-for-referrer-policy-unsafe-url-5">"<code>unsafe-url</code>"</a>。
            </p>
            <p>
                一方面，不清楚对于所有可能的策略对，哪个策略更严格：虽然 <a data-link-type="dfn" href="#referrer-policy-no-referrer-when-downgrade"
                    id="ref-for-referrer-policy-no-referrer-when-downgrade-6">"<code>no-referrer-when-downgrade</code>"</a>
                不会通过不安全的传输泄露任何信息，而 <a data-link-type="dfn" href="#referrer-policy-origin"
                    id="ref-for-referrer-policy-origin-6">"<code>origin</code>"</a> 会，但后者在跨源导航中泄露的信息较少。
            </p>
            <p>
                另一方面，允许设置较不严格的策略使作者能够定义安全的回退，如 <a href="#unknown-policy-values">§11.1 未知策略值</a> 中所述。
            </p>
        </section>
        <section>
            <h2 class="heading settled" data-level="11" id="authoring"><span class="secno">11. </span><span
                    class="content">编写注意事项</span><a class="self-link" href="#authoring"></a></h2>
            <h3 class="heading settled" data-level="11.1" id="unknown-policy-values"><span class="secno">11.1.
                </span><span class="content">未知的策略值</span><a class="self-link" href="#unknown-policy-values"></a></h3>
            <p>
                如 <a href="#parse-referrer-policy-from-header">§8.1 从 Referrer-Policy 头解析引用策略</a> 和
                <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/semantics.html#meta">meta</a></code>
                <a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/semantics.html#meta-referrer"><code>referrer</code></a>
                算法所述，未知的策略值将被忽略，当多个来源指定引用策略时，将使用最新的值。这使得部署新的策略值成为可能。
            </p>
            <div class="example" id="example-e42fe91b">
                <a class="self-link" href="#example-e42fe91b"></a> 假设较旧的用户代理无法理解 <a data-link-type="dfn"
                    href="#referrer-policy-unsafe-url"
                    id="ref-for-referrer-policy-unsafe-url-6">"<code>unsafe-url</code>"</a> 策略。站点可以指定一个 <a
                    data-link-type="dfn" href="#referrer-policy-origin"
                    id="ref-for-referrer-policy-origin-7">"<code>origin</code>"</a> 策略，然后是一个 <a data-link-type="dfn"
                    href="#referrer-policy-unsafe-url"
                    id="ref-for-referrer-policy-unsafe-url-7">"<code>unsafe-url</code>"</a> 策略：较旧的用户代理将忽略未知的 <a
                    data-link-type="dfn" href="#referrer-policy-unsafe-url"
                    id="ref-for-referrer-policy-unsafe-url-8">"<code>unsafe-url</code>"</a> 值并使用 <a data-link-type="dfn"
                    href="#referrer-policy-origin"
                    id="ref-for-referrer-policy-origin-8">"<code>origin</code>"</a>，而较新的用户代理将使用 <a data-link-type="dfn"
                    href="#referrer-policy-unsafe-url"
                    id="ref-for-referrer-policy-unsafe-url-9">"<code>unsafe-url</code>"</a>，因为它是最后处理的。
            </div>
            <p>
                然而，这种行为不适用于 <code>referrerpolicy</code> 属性。作者可以动态设置和获取 <code>referrerpolicy</code> 属性，以检测是否支持特定的策略值。
            </p>
        </section>
        <section>
            <h2 class="heading settled" data-level="12" id="acknowledgements"><span class="secno">12. </span><span
                    class="content">致谢</span><a class="self-link" href="#acknowledgements"></a></h2>
            <p>
                本规范在很大程度上基于 Adam Barth 和 Jochen Eisinger 的 <a href="https://wiki.whatwg.org/wiki/Meta_referrer">Meta
                    referrer</a> 文档。
            </p>
        </section>
    </main>
    <h2 class="no-ref no-num heading settled" id="conformance"><span class="content">一致性</span><a class="self-link"
            href="#conformance"></a></h2>
    <h3 class="no-ref no-num heading settled" id="conventions"><span class="content">文档约定</span><a class="self-link"
            href="#conventions"></a></h3>
    <p>
        一致性要求通过描述性断言和 RFC 2119 术语的组合来表达。本规范中的规范部分使用的关键字 “MUST”、“MUST NOT”、“REQUIRED”、“SHALL”、“SHALL
        NOT”、“SHOULD”、“SHOULD NOT”、“RECOMMENDED”、“MAY” 和 “OPTIONAL” 应按照 RFC 2119
        中的描述进行解释。然而，为了可读性，这些词在本规范中并未全部以大写字母形式出现。
    </p>
    <p>
        本规范的所有文本均为规范性内容，除非明确标记为非规范性内容、示例和注释。<a data-link-type="biblio" href="#biblio-rfc2119">[RFC2119]</a>
    </p>
    <p>
        本规范中的示例以“例如”开头，或通过 <code>class="example"</code> 与规范性文本区分开，例如：
    </p>
    <div class="example" id="example-f839f6c8">
        <a class="self-link" href="#example-f839f6c8"></a>
        <p>这是一个信息性示例。</p>
    </div>
    <p>
        信息性注释以“注意”开头，并通过 <code>class="note"</code> 与规范性文本区分开，例如：
    </p>
    <p class="note" role="note">注意，这是一个信息性注释。</p>
    <h3 class="no-ref no-num heading settled" id="conformant-algorithms"><span class="content">一致性算法</span><a
            class="self-link" href="#conformant-algorithms"></a></h3>
    <p>
        在算法中以命令式表达的要求（例如“剥离任何前导空格字符”或“返回 false 并中止这些步骤”）应按照引入算法时使用的关键字（“must”、“should”、“may”等）的含义进行解释。
    </p>
    <p>
        以算法或具体步骤表达的一致性要求可以以任何方式实现，只要最终结果是等效的即可。特别是，本规范中定义的算法旨在易于理解，并非旨在提高性能。鼓励实现者进行优化。
    </p>
    <script src="https://www.w3.org/scripts/TR/2016/fixup.js"></script>
    <h2 class="no-num no-ref heading settled" id="index"><span class="content">索引</span><a class="self-link"
            href="#index"></a></h2>
    <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">本规范定义的术语</span><a
            class="self-link" href="#index-defined-here"></a></h3>
    <ul class="index">
        <li><a href="#dom-referrerpolicy">""</a><span>，在 §3</span></li>
        <li><a href="#cross-origin-request">跨源请求</a><span>，在 §2</span></li>
        <li><a href="#determine-requests-referrer">确定请求的引用</a><span>，在 §8.2</span></li>
        <li>
            "no-referrer"
            <ul>
                <li><a href="#dom-referrerpolicy-no-referrer">ReferrerPolicy 的枚举值</a><span>，在 §3</span></li>
                <li><a href="#referrer-policy-no-referrer">定义</a><span>，在 §3</span></li>
            </ul>
        </li>
        <li><a href="#dom-referrerpolicy-no-referrer">no-referrer</a><span>，在 §3</span></li>
        <li><a href="#dom-referrerpolicy-no-referrer-when-downgrade">no-referrer-when-downgrade</a><span>，在 §3</span>
        </li>
        <li>
            "no-referrer-when-downgrade"
            <ul>
                <li><a href="#dom-referrerpolicy-no-referrer-when-downgrade">ReferrerPolicy 的枚举值</a><span>，在 §3</span>
                </li>
                <li><a href="#referrer-policy-no-referrer-when-downgrade">定义</a><span>，在 §3.1</span></li>
            </ul>
        </li>
        <li><a href="#dom-referrerpolicy-origin">origin</a><span>，在 §3</span></li>
        <li>
            "origin"
            <ul>
                <li><a href="#dom-referrerpolicy-origin">ReferrerPolicy 的枚举值</a><span>，在 §3</span></li>
                <li><a href="#referrer-policy-origin">定义</a><span>，在 §3.3</span></li>
            </ul>
        </li>
        <li><a href="#origin-only-flag">仅来源标志</a><span>，在 §8.4</span></li>
        <li><a href="#dom-referrerpolicy-origin-when-cross-origin">origin-when-cross-origin</a><span>，在 §3</span></li>
        <li>
            "origin-when-cross-origin"
            <ul>
                <li><a href="#dom-referrerpolicy-origin-when-cross-origin">ReferrerPolicy 的枚举值</a><span>，在 §3</span>
                </li>
                <li><a href="#referrer-policy-origin-when-cross-origin">定义</a><span>，在 §3.5</span></li>
            </ul>
        </li>
        <li><a href="#policy-token">策略令牌</a><span>，在 §4.1</span></li>
        <li><a href="#enumdef-referrerpolicy">ReferrerPolicy</a><span>，在 §3</span></li>
        <li>
            引用策略
            <ul>
                <li><a href="#referrer-policy">定义</a><span>，在 §3</span></li>
                <li><a href="#cssstylesheet-referrer-policy">CSSStyleSheet 的定义</a><span>，在 §7</span></li>
            </ul>
        </li>
        <li><a href="#referrer-policy-header-dfn">Referrer-Policy</a><span>，在 §4.1</span></li>
        <li><a href="#referrer-policy-header-dfn">referrer-policy 头</a><span>，在 §4.1</span></li>
        <li>
            "same-origin"
            <ul>
                <li><a href="#dom-referrerpolicy-same-origin">ReferrerPolicy 的枚举值</a><span>，在 §3</span></li>
                <li><a href="#referrer-policy-same-origin">定义</a><span>，在 §3.2</span></li>
            </ul>
        </li>
        <li><a href="#dom-referrerpolicy-same-origin">same-origin</a><span>，在 §3</span></li>
        <li><a href="#same-origin-request">同源请求</a><span>，在 §2</span></li>
        <li><a href="#set-requests-referrer-policy-on-redirect">在重定向时设置请求的引用策略</a><span>，在 §8.1</span></li>
        <li><a href="#dom-referrerpolicy-strict-origin">strict-origin</a><span>，在 §3</span></li>
        <li>
            "strict-origin"
            <ul>
                <li><a href="#dom-referrerpolicy-strict-origin">ReferrerPolicy 的枚举值</a><span>，在 §3</span></li>
                <li><a href="#referrer-policy-strict-origin">定义</a><span>，在 §3.4</span></li>
            </ul>
        </li>
        <li>
            "strict-origin-when-cross-origin"
            <ul>
                <li><a href="#dom-referrerpolicy-strict-origin-when-cross-origin">ReferrerPolicy 的枚举值</a><span>，在
                        §3</span></li>
                <li><a href="#referrer-policy-strict-origin-when-cross-origin">定义</a><span>，在 §3.6</span></li>
            </ul>
        </li>
        <li><a href="#dom-referrerpolicy-strict-origin-when-cross-origin">strict-origin-when-cross-origin</a><span>，在
                §3</span></li>
        <li><a href="#referrer-policy-empty-string">空字符串</a><span>，在 §3.8</span></li>
        <li><a href="#dom-referrerpolicy-unsafe-url">unsafe-url</a><span>，在 §3</span></li>
        <li>
            "unsafe-url"
            <ul>
                <li><a href="#dom-referrerpolicy-unsafe-url">ReferrerPolicy 的枚举值</a><span>，在 §3</span></li>
                <li><a href="#referrer-policy-unsafe-url">定义</a><span>，在 §3.7</span></li>
            </ul>
        </li>
    </ul>

    <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">通过引用定义的术语</span><a
            class="self-link" href="#index-defined-elsewhere"></a></h3>
    <ul class="index">
        <li>
            <a data-link-type="biblio">[CSSOM-1]</a> 定义了以下术语：
            <ul>
                <li><a href="https://drafts.csswg.org/cssom-1/#css-declaration-block">CSS 声明块</a></li>
                <li><a href="https://www.w3.org/TR/cssom-1/#css-style-sheet">CSS 样式表</a></li>
                <li><a href="https://drafts.csswg.org/cssom-1/#concept-css-style-sheet-location">位置</a></li>
                <li><a href="https://drafts.csswg.org/cssom-1/#cssstyledeclaration-owner-node">所有者节点 <small>(针对
                            CSSStyleDeclaration)</small></a></li>
                <li><a href="https://drafts.csswg.org/cssom-1/#concept-css-style-sheet-owner-node">所有者节点 <small>(针对
                            CSSStyleSheet)</small></a></li>
            </ul>
        </li>
        <li>
            <a data-link-type="biblio">[DOM4]</a> 定义了以下术语：
            <ul>
                <li><a href="https://www.w3.org/TR/dom/#concept-node-document">节点文档</a></li>
                <li><a href="https://www.w3.org/TR/dom/#concept-document-url">URL</a></li>
            </ul>
        </li>
        <li>
            <a data-link-type="biblio">[FETCH]</a> 定义了以下术语：
            <ul>
                <li><a href="https://fetch.spec.whatwg.org/#request">请求</a></li>
                <li><a href="https://fetch.spec.whatwg.org/#response">响应</a></li>
                <li><a href="https://fetch.spec.whatwg.org/#concept-request-client">客户端</a></li>
                <li><a href="https://fetch.spec.whatwg.org/#concept-request-current-url">当前 URL</a></li>
                <li><a href="https://fetch.spec.whatwg.org/#fetching">获取</a></li>
                <li><a href="https://fetch.spec.whatwg.org/#concept-response-header-list">头列表</a></li>
                <li><a href="https://fetch.spec.whatwg.org/#concept-request-origin">来源</a></li>
                <li><a href="https://fetch.spec.whatwg.org/#concept-header-parse">解析头值</a></li>
                <li><a href="https://fetch.spec.whatwg.org/#concept-request-referrer">引用</a></li>
                <li><a href="https://fetch.spec.whatwg.org/#concept-request-referrer-policy">引用策略</a></li>
            </ul>
        </li>
        <li>
            <a data-link-type="biblio">[HTML]</a> 定义了以下术语：
            <ul>
                <li><a href="https://html.spec.whatwg.org/multipage/dom.html#document">文档</a></li>
                <li><a href="https://html.spec.whatwg.org/multipage/browsers.html#window">窗口</a></li>
                <li><a
                        href="https://html.spec.whatwg.org/multipage/workers.html#workerglobalscope">WorkerGlobalScope</a>
                </li>
                <li><a href="https://html.spec.whatwg.org/multipage/semantics.html#the-a-element">a</a></li>
                <li><a href="https://html.spec.whatwg.org/multipage/embedded-content.html#an-iframe-srcdoc-document">iframe
                        srcdoc 文档</a></li>
                <li><a href="https://html.spec.whatwg.org/multipage/embedded-content.html#the-area-element">area</a>
                </li>
                <li><a href="https://html.spec.whatwg.org/multipage/browsers.html#concept-document-window">关联文档</a></li>
                <li><a href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context">浏览上下文</a></li>
                <li><a href="https://html.spec.whatwg.org/multipage/browsers.html#concept-document-bc">浏览上下文
                        <small>(针对文档)</small></a></li>
                <li><a
                        href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context-container">浏览上下文容器</a>
                </li>
                <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-creation-url">创建
                        URL</a></li>
                <li><a
                        href="https://html.spec.whatwg.org/multipage/dom.html#concept-document-referrer-policy">文档引用策略</a>
                </li>
                <li><a
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object">环境设置对象</a>
                </li>
                <li><a href="https://html.spec.whatwg.org/multipage/infrastructure.html#concept-url-fragment">片段</a>
                </li>
                <li><a
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-global">全局对象</a>
                </li>
                <li><a href="https://html.spec.whatwg.org/multipage/embedded-content.html#the-iframe-element">iframe</a>
                </li>
                <li><a href="https://html.spec.whatwg.org/multipage/embedded-content.html#the-img-element">img</a></li>
                <li><a href="https://html.spec.whatwg.org/multipage/semantics.html#the-link-element">link</a></li>
                <li><a href="https://html.spec.whatwg.org/multipage/semantics.html#meta">meta</a></li>
                <li><a href="https://html.spec.whatwg.org/multipage/semantics.html#attr-meta-name">name</a></li>
                <li><a href="https://html.spec.whatwg.org/multipage/browsers.html#navigate">导航</a></li>
                <li><a href="https://html.spec.whatwg.org/multipage/semantics.html#link-type-noreferrer">noreferrer</a>
                </li>
                <li><a href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin-opaque">不透明来源</a></li>
                <li><a href="https://html.spec.whatwg.org/multipage/semantics.html#meta-referrer">引用</a></li>
                <li><a href="https://html.spec.whatwg.org/multipage/dom.html#concept-document-referrer-policy">引用策略</a>
                </li>
                <li><a
                        href="https://html.spec.whatwg.org/multipage/infrastructure.html#referrer-policy-attribute">引用策略属性</a>
                </li>
                <li><a
                        href="https://html.spec.whatwg.org/multipage/semantics.html#attr-hyperlink-referrerpolicy">referrerpolicy</a>
                </li>
                <li><a href="https://html.spec.whatwg.org/multipage/workers.html#run-a-worker">运行 worker</a></li>
                <li><a href="https://html.spec.whatwg.org/multipage/embedded-content.html#attr-iframe-srcdoc">srcdoc</a>
                </li>
            </ul>
        </li>
        <li>
            <a data-link-type="biblio">[RFC6454]</a> 定义了以下术语：
            <ul>
                <li><a href="https://tools.ietf.org/html/rfc6454#section-6.2">来源的 ASCII 序列化</a></li>
                <li><a href="https://tools.ietf.org/html/rfc6454#section-3.2">来源</a></li>
                <li><a href="https://tools.ietf.org/html/rfc6454#section-5">相同</a></li>
            </ul>
        </li>
        <li>
            <a data-link-type="biblio">[RFC7231]</a> 定义了以下术语：
            <ul>
                <li><a href="https://tools.ietf.org/html/rfc7231#section-5.5.2">引用者</a></li>
            </ul>
        </li>
        <li>
            <a data-link-type="biblio">[SECURE-CONTEXTS]</a> 定义了以下术语：
            <ul>
                <li><a href="https://w3c.github.io/webappsec-secure-contexts/#potentially-trustworthy-url">潜在可信 URL</a>
                </li>
            </ul>
        </li>
        <li>
            <a data-link-type="biblio">[WHATWG-URL]</a> 定义了以下术语：
            <ul>
                <li><a href="https://url.spec.whatwg.org/#local-scheme">本地方案</a></li>
                <li><a href="https://url.spec.whatwg.org/#concept-url-origin">来源</a></li>
                <li><a href="https://url.spec.whatwg.org/#concept-url-password">密码</a></li>
                <li><a href="https://url.spec.whatwg.org/#concept-url-path">路径</a></li>
                <li><a href="https://url.spec.whatwg.org/#concept-url-query">查询</a></li>
                <li><a href="https://url.spec.whatwg.org/#concept-url-scheme">方案</a></li>
                <li><a href="https://url.spec.whatwg.org/#concept-url">URL</a></li>
                <li><a href="https://url.spec.whatwg.org/#concept-url-username">用户名</a></li>
            </ul>
        </li>
        <li>
            <a data-link-type="biblio">[WSC-UI]</a> 定义了以下术语：
            <ul>
                <li><a href="https://www.w3.org/TR/2010/REC-wsc-ui-20100812/#typesoftls">TLS 保护</a></li>
            </ul>
        </li>
    </ul>
    <h2 class="no-num no-ref heading settled" id="references"><span class="content">参考文献</span><a class="self-link"
            href="#references"></a></h2>
    <h3 class="no-num no-ref heading settled" id="normative"><span class="content">规范性参考文献</span><a class="self-link"
            href="#normative"></a></h3>
    <dl>
        <dt id="biblio-cssom-1">[CSSOM-1]</dt>
        <dd>Simon Pieters; Glenn Adams. <a href="https://www.w3.org/TR/cssom-1/">CSS 对象模型 (CSSOM)</a>. 2016年3月17日. WD.
            URL: <a href="https://www.w3.org/TR/cssom-1/">https://www.w3.org/TR/cssom-1/</a></dd>
        <dt id="biblio-fetch">[FETCH]</dt>
        <dd>Anne van Kesteren. <a href="https://fetch.spec.whatwg.org/">Fetch</a>. Living Standard. URL: <a
                href="https://fetch.spec.whatwg.org/">http://fetch.spec.whatwg.org/</a></dd>
        <dt id="biblio-html">[HTML]</dt>
        <dd>Anne van Kesteren; et al. <a href="https://html.spec.whatwg.org/multipage/">HTML 标准</a>. Living Standard.
            URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a></dd>
        <dt id="biblio-rfc2119">[RFC2119]</dt>
        <dd>S. Bradner. <a href="https://tools.ietf.org/html/rfc2119">RFC 中用于指示需求级别的关键字</a>. 1997年3月. 最佳当前实践. URL: <a
                href="https://tools.ietf.org/html/rfc2119">https://tools.ietf.org/html/rfc2119</a></dd>
        <dt id="biblio-rfc6454">[RFC6454]</dt>
        <dd>Adam Barth. <a href="http://www.ietf.org/rfc/rfc6454.txt">Web 来源概念</a>. RFC. URL: <a
                href="http://www.ietf.org/rfc/rfc6454.txt">http://www.ietf.org/rfc/rfc6454.txt</a></dd>
        <dt id="biblio-rfc7231">[RFC7231]</dt>
        <dd>Roy T. Fielding; Julian F. Reschke. <a href="http://www.ietf.org/rfc/rfc7231.txt">HTTP/1.1 语义和内容</a>. RFC.
            URL: <a href="http://www.ietf.org/rfc/rfc7231.txt">http://www.ietf.org/rfc/rfc7231.txt</a></dd>
        <dt id="biblio-secure-contexts">[SECURE-CONTEXTS]</dt>
        <dd>Mike West. <a href="https://www.w3.org/TR/secure-contexts/">安全上下文</a>. 2016年9月15日. CR. URL: <a
                href="https://www.w3.org/TR/secure-contexts/">https://www.w3.org/TR/secure-contexts/</a></dd>
        <dt id="biblio-dom4">[DOM4]</dt>
        <dd>Anne van Kesteren, Aryeh Gregor, Ms2ger, Alex Russel, Robin Berjon. <a href="https://www.w3.org/TR/dom">W3C
                DOM4</a>, 2015年11月19日. REC. URL: <a href="https://www.w3.org/TR/dom">https://www.w3.org/TR/dom</a></dd>
        <dt id="biblio-whatwg-url">[WHATWG-URL]</dt>
        <dd>Anne van Kesteren. <a href="https://url.spec.whatwg.org/">URL 标准</a>. Living Standard. URL: <a
                href="https://url.spec.whatwg.org/">https://url.spec.whatwg.org/</a></dd>
        <dt id="biblio-wsc-ui">[WSC-UI]</dt>
        <dd>Thomas Roessler; Anil Saldhana. <a href="https://www.w3.org/TR/wsc-ui/">Web 安全上下文：用户界面指南</a>. 2010年8月12日.
            REC. URL: <a href="https://www.w3.org/TR/wsc-ui/">https://www.w3.org/TR/wsc-ui/</a></dd>
    </dl>
    <h3 class="no-num no-ref heading settled" id="informative"><span class="content">信息性参考文献</span><a class="self-link"
            href="#informative"></a></h3>
    <dl>
        <dt id="biblio-capability-urls">[CAPABILITY-URLS]</dt>
        <dd>Jenni Tennison. <a href="https://www.w3.org/TR/capability-urls/">能力 URL</a>. WD. URL: <a
                href="https://www.w3.org/TR/capability-urls/">https://www.w3.org/TR/capability-urls/</a></dd>
    </dl>
    <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL 索引</span><a class="self-link"
            href="#idl-index"></a></h2>
    <pre class="idl def"><span class="kt">enum</span> <a class="nv" href="#enumdef-referrerpolicy">ReferrerPolicy</a> {
  <a class="s" href="#dom-referrerpolicy">""</a>,
  <a class="s" href="#dom-referrerpolicy-no-referrer">"no-referrer"</a>,
  <a class="s" href="#dom-referrerpolicy-no-referrer-when-downgrade">"no-referrer-when-downgrade"</a>,
  <a class="s" href="#dom-referrerpolicy-same-origin">"same-origin"</a>,
  <a class="s" href="#dom-referrerpolicy-origin">"origin"</a>,
  <a class="s" href="#dom-referrerpolicy-strict-origin">"strict-origin"</a>,
  <a class="s" href="#dom-referrerpolicy-origin-when-cross-origin">"origin-when-cross-origin"</a>,
  <a class="s" href="#dom-referrerpolicy-strict-origin-when-cross-origin">"strict-origin-when-cross-origin"</a>,
  <a class="s" href="#dom-referrerpolicy-unsafe-url">"unsafe-url"</a>
};

</pre>
    <h2 class="no-num no-ref heading settled" id="issues-index"><span class="content">问题索引</span><a class="self-link"
            href="#issues-index"></a></h2>
    <div style="counter-reset:issue">
        <div class="issue">
            这要求 CSS 样式表处理 `Referrer-Policy` 头，并以与 <a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/dom.html#concept-document-referrer-policy">文档</a> 相同的方式存储
            <span>引用策略</span>。<a href="#issue-8299c74c"> ↵ </a>
        </div>
    </div>
    <aside class="dfn-panel" data-for="same-origin-request">
        <b><a href="#same-origin-request">#same-origin-request</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-same-origin-request-1">2. Key Concepts and Terminology</a>
            <li><a href="#ref-for-same-origin-request-2">3.3. "same-origin"</a>
            <li><a href="#ref-for-same-origin-request-3">3.4. "origin"</a>
            <li><a href="#ref-for-same-origin-request-4">3.6. "origin-when-cross-origin"</a>
            <li><a href="#ref-for-same-origin-request-5">3.7. "strict-origin-when-cross-origin"</a>
            <li><a href="#ref-for-same-origin-request-6">3.8. "unsafe-url"</a>
            <li><a href="#ref-for-same-origin-request-7">8.3.
                    Determine request’s Referrer </a> <a href="#ref-for-same-origin-request-8">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="cross-origin-request">
        <b><a href="#cross-origin-request">#cross-origin-request</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-cross-origin-request-1">3.3. "same-origin"</a>
            <li><a href="#ref-for-cross-origin-request-2">3.4. "origin"</a>
            <li><a href="#ref-for-cross-origin-request-3">3.6. "origin-when-cross-origin"</a> <a
                    href="#ref-for-cross-origin-request-4">(2)</a>
            <li><a href="#ref-for-cross-origin-request-5">3.7. "strict-origin-when-cross-origin"</a>
            <li><a href="#ref-for-cross-origin-request-6">3.8. "unsafe-url"</a>
            <li><a href="#ref-for-cross-origin-request-7">8.3.
                    Determine request’s Referrer </a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="referrer-policy">
        <b><a href="#referrer-policy">#referrer-policy</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-referrer-policy-1">2. Key Concepts and Terminology</a> <a
                    href="#ref-for-referrer-policy-2">(2)</a> <a href="#ref-for-referrer-policy-3">(3)</a> <a
                    href="#ref-for-referrer-policy-4">(4)</a>
            <li><a href="#ref-for-referrer-policy-5">3. Referrer Policies</a>
            <li><a href="#ref-for-referrer-policy-6">3.9. The empty string</a> <a
                    href="#ref-for-referrer-policy-7">(2)</a>
            <li><a href="#ref-for-referrer-policy-8">4.2. Delivery via meta</a>
            <li><a href="#ref-for-referrer-policy-9">4.4. Nested browsing contexts</a>
            <li><a href="#ref-for-referrer-policy-10">6. Integration with HTML</a>
            <li><a href="#ref-for-referrer-policy-11">8.1.
                    Parse a referrer policy from a Referrer-Policy header </a> <a
                    href="#ref-for-referrer-policy-12">(2)</a>
            <li><a href="#ref-for-referrer-policy-13">8.3.
                    Determine request’s Referrer </a>
            <li><a href="#ref-for-referrer-policy-14">9.1. User Controls</a>
            <li><a href="#ref-for-referrer-policy-15">10.1. Information Leakage</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="referrer-policy-no-referrer">
        <b><a href="#referrer-policy-no-referrer">#referrer-policy-no-referrer</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-referrer-policy-no-referrer-1">3.1. "no-referrer"</a> <a
                    href="#ref-for-referrer-policy-no-referrer-2">(2)</a>
            <li><a href="#ref-for-referrer-policy-no-referrer-3">8.3.
                    Determine request’s Referrer </a>
            <li><a href="#ref-for-referrer-policy-no-referrer-4">10.1. Information Leakage</a>
            <li><a href="#ref-for-referrer-policy-no-referrer-5">10.2. Downgrade to less strict policies</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="referrer-policy-no-referrer-when-downgrade">
        <b><a
                href="#referrer-policy-no-referrer-when-downgrade">#referrer-policy-no-referrer-when-downgrade</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-referrer-policy-no-referrer-when-downgrade-1">3.2. "no-referrer-when-downgrade"</a> <a
                    href="#ref-for-referrer-policy-no-referrer-when-downgrade-2">(2)</a>
            <li><a href="#ref-for-referrer-policy-no-referrer-when-downgrade-3">3.9. The empty string</a> <a
                    href="#ref-for-referrer-policy-no-referrer-when-downgrade-4">(2)</a>
            <li><a href="#ref-for-referrer-policy-no-referrer-when-downgrade-5">8.3.
                    Determine request’s Referrer </a>
            <li><a href="#ref-for-referrer-policy-no-referrer-when-downgrade-6">10.2. Downgrade to less strict
                    policies</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="referrer-policy-same-origin">
        <b><a href="#referrer-policy-same-origin">#referrer-policy-same-origin</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-referrer-policy-same-origin-1">3.3. "same-origin"</a> <a
                    href="#ref-for-referrer-policy-same-origin-2">(2)</a>
            <li><a href="#ref-for-referrer-policy-same-origin-3">8.3.
                    Determine request’s Referrer </a>
            <li><a href="#ref-for-referrer-policy-same-origin-4">10.1. Information Leakage</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="referrer-policy-origin">
        <b><a href="#referrer-policy-origin">#referrer-policy-origin</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-referrer-policy-origin-1">3.4. "origin"</a> <a
                    href="#ref-for-referrer-policy-origin-2">(2)</a> <a href="#ref-for-referrer-policy-origin-3">(3)</a>
            <li><a href="#ref-for-referrer-policy-origin-4">8.3.
                    Determine request’s Referrer </a>
            <li><a href="#ref-for-referrer-policy-origin-5">10.1. Information Leakage</a>
            <li><a href="#ref-for-referrer-policy-origin-6">10.2. Downgrade to less strict policies</a>
            <li><a href="#ref-for-referrer-policy-origin-7">11.1. Unknown Policy Values</a> <a
                    href="#ref-for-referrer-policy-origin-8">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="referrer-policy-strict-origin">
        <b><a href="#referrer-policy-strict-origin">#referrer-policy-strict-origin</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-referrer-policy-strict-origin-1">3.4. "origin"</a>
            <li><a href="#ref-for-referrer-policy-strict-origin-2">3.5. "strict-origin"</a> <a
                    href="#ref-for-referrer-policy-strict-origin-3">(2)</a> <a
                    href="#ref-for-referrer-policy-strict-origin-4">(3)</a>
            <li><a href="#ref-for-referrer-policy-strict-origin-5">8.3.
                    Determine request’s Referrer </a>
            <li><a href="#ref-for-referrer-policy-strict-origin-6">10.1. Information Leakage</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="referrer-policy-origin-when-cross-origin">
        <b><a
                href="#referrer-policy-origin-when-cross-origin">#referrer-policy-origin-when-cross-origin</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-referrer-policy-origin-when-cross-origin-1">3.6. "origin-when-cross-origin"</a> <a
                    href="#ref-for-referrer-policy-origin-when-cross-origin-2">(2)</a> <a
                    href="#ref-for-referrer-policy-origin-when-cross-origin-3">(3)</a> <a
                    href="#ref-for-referrer-policy-origin-when-cross-origin-4">(4)</a>
            <li><a href="#ref-for-referrer-policy-origin-when-cross-origin-5">8.3.
                    Determine request’s Referrer </a>
            <li><a href="#ref-for-referrer-policy-origin-when-cross-origin-6">10.1. Information Leakage</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="referrer-policy-strict-origin-when-cross-origin">
        <b><a
                href="#referrer-policy-strict-origin-when-cross-origin">#referrer-policy-strict-origin-when-cross-origin</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-referrer-policy-strict-origin-when-cross-origin-1">3.6. "origin-when-cross-origin"</a>
            <li><a href="#ref-for-referrer-policy-strict-origin-when-cross-origin-2">3.7.
                    "strict-origin-when-cross-origin"</a> <a
                    href="#ref-for-referrer-policy-strict-origin-when-cross-origin-3">(2)</a>
            <li><a href="#ref-for-referrer-policy-strict-origin-when-cross-origin-4">8.3.
                    Determine request’s Referrer </a>
            <li><a href="#ref-for-referrer-policy-strict-origin-when-cross-origin-5">10.1. Information Leakage</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="referrer-policy-unsafe-url">
        <b><a href="#referrer-policy-unsafe-url">#referrer-policy-unsafe-url</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-referrer-policy-unsafe-url-1">3.8. "unsafe-url"</a> <a
                    href="#ref-for-referrer-policy-unsafe-url-2">(2)</a>
            <li><a href="#ref-for-referrer-policy-unsafe-url-3">8.3.
                    Determine request’s Referrer </a>
            <li><a href="#ref-for-referrer-policy-unsafe-url-4">10.1. Information Leakage</a>
            <li><a href="#ref-for-referrer-policy-unsafe-url-5">10.2. Downgrade to less strict policies</a>
            <li><a href="#ref-for-referrer-policy-unsafe-url-6">11.1. Unknown Policy Values</a> <a
                    href="#ref-for-referrer-policy-unsafe-url-7">(2)</a> <a
                    href="#ref-for-referrer-policy-unsafe-url-8">(3)</a> <a
                    href="#ref-for-referrer-policy-unsafe-url-9">(4)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="referrer-policy-header-dfn">
        <b><a href="#referrer-policy-header-dfn">#referrer-policy-header-dfn</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-referrer-policy-header-dfn-1">8.1.
                    Parse a referrer policy from a Referrer-Policy header </a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="policy-token">
        <b><a href="#policy-token">#policy-token</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-policy-token-1">4.1. Delivery via Referrer-Policy header</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="cssstylesheet-referrer-policy">
        <b><a href="#cssstylesheet-referrer-policy">#cssstylesheet-referrer-policy</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-cssstylesheet-referrer-policy-1">7. Integration with CSS</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="set-requests-referrer-policy-on-redirect">
        <b><a
                href="#set-requests-referrer-policy-on-redirect">#set-requests-referrer-policy-on-redirect</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-set-requests-referrer-policy-on-redirect-1">5. Integration with Fetch</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="determine-requests-referrer">
        <b><a href="#determine-requests-referrer">#determine-requests-referrer</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-determine-requests-referrer-1">3.9. The empty string</a> <a
                    href="#ref-for-determine-requests-referrer-2">(2)</a>
            <li><a href="#ref-for-determine-requests-referrer-3">5. Integration with Fetch</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="origin-only-flag">
        <b><a href="#origin-only-flag">#origin-only-flag</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-origin-only-flag-1">8.3.
                    Determine request’s Referrer </a>
            <li><a href="#ref-for-origin-only-flag-2">8.4.
                    Strip url for use as a referrer </a>
        </ul>
    </aside>
    <script>/* script-dfn-panel */

        document.body.addEventListener("click", function (e) {
            var queryAll = function (sel) { return [].slice.call(document.querySelectorAll(sel)); }
            // Find the dfn element or panel, if any, that was clicked on.
            var el = e.target;
            var target;
            var hitALink = false;
            while (el.parentElement) {
                if (el.tagName == "A") {
                    // Clicking on a link in a <dfn> shouldn't summon the panel
                    hitALink = true;
                }
                if (el.classList.contains("dfn-paneled")) {
                    target = "dfn";
                    break;
                }
                if (el.classList.contains("dfn-panel")) {
                    target = "dfn-panel";
                    break;
                }
                el = el.parentElement;
            }
            if (target != "dfn-panel") {
                // Turn off any currently "on" or "activated" panels.
                queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(function (el) {
                    el.classList.remove("on");
                    el.classList.remove("activated");
                });
            }
            if (target == "dfn" && !hitALink) {
                // open the panel
                var dfnPanel = document.querySelector(".dfn-panel[data-for='" + el.id + "']");
                if (dfnPanel) {
                    console.log(dfnPanel);
                    dfnPanel.classList.add("on");
                    var rect = el.getBoundingClientRect();
                    dfnPanel.style.left = window.scrollX + rect.right + 5 + "px";
                    dfnPanel.style.top = window.scrollY + rect.top + "px";
                    var panelRect = dfnPanel.getBoundingClientRect();
                    var panelWidth = panelRect.right - panelRect.left;
                    if (panelRect.right > document.body.scrollWidth && (rect.left - (panelWidth + 5)) > 0) {
                        // Reposition, because the panel is overflowing
                        dfnPanel.style.left = window.scrollX + rect.left - (panelWidth + 5) + "px";
                    }
                } else {
                    console.log("Couldn't find .dfn-panel[data-for='" + el.id + "']");
                }
            } else if (target == "dfn-panel") {
                // Switch it to "activated" state, which pins it.
                el.classList.add("activated");
                el.style.left = null;
                el.style.top = null;
            }

        });
    </script>
    <script src="/dropdown.js"></script>