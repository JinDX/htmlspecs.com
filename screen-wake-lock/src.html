<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="generator" content="ReSpec 35.1.2">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <style>
        span.example-title {
            text-transform: none
        }

        :is(aside, div).example,
        div.illegal-example {
            padding: .5em;
            margin: 1em 0;
            position: relative;
            clear: both
        }

        div.illegal-example {
            color: red
        }

        div.illegal-example p {
            color: #000
        }

        aside.example div.example {
            border-left-width: .1em;
            border-color: #999;
            background: #fff
        }
    </style>
    <style>
        .issue-label {
            text-transform: initial
        }

        .warning>p:first-child {
            margin-top: 0
        }

        .warning {
            padding: .5em;
            border-left-width: .5em;
            border-left-style: solid
        }

        span.warning {
            padding: .1em .5em .15em
        }

        .issue.closed span.issue-number {
            text-decoration: line-through
        }

        .issue.closed span.issue-number::after {
            content: " (Closed)";
            font-size: smaller
        }

        .warning {
            border-color: #f11;
            border-color: var(--warning-border, #f11);
            border-width: .2em;
            border-style: solid;
            background: #fbe9e9;
            background: var(--warning-bg, #fbe9e9);
            color: #000;
            color: var(--text, #000)
        }

        .warning-title:before {
            content: "⚠";
            font-size: 1.3em;
            float: left;
            padding-right: .3em;
            margin-top: -.3em
        }

        li.task-list-item {
            list-style: none
        }

        input.task-list-item-checkbox {
            margin: 0 .35em .25em -1.6em;
            vertical-align: middle
        }

        .issue a.respec-gh-label {
            padding: 5px;
            margin: 0 2px 0 2px;
            font-size: 10px;
            text-transform: none;
            text-decoration: none;
            font-weight: 700;
            border-radius: 4px;
            position: relative;
            bottom: 2px;
            border: none;
            display: inline-block
        }
    </style>
    <style>
        pre.idl {
            padding: 1em;
            position: relative
        }

        pre.idl>code {
            color: #000;
            color: var(--text, #000)
        }

        @media print {
            pre.idl {
                white-space: pre-wrap
            }
        }

        .idlHeader {
            display: block;
            width: 150px;
            background: #8ccbf2;
            background: var(--def-border, #8ccbf2);
            color: #fff;
            color: var(--defrow-border, #fff);
            font-family: sans-serif;
            font-weight: 700;
            margin: -1em 0 1em -1em;
            height: 28px;
            line-height: 28px
        }

        .idlHeader a.self-link {
            margin-left: .3cm;
            text-decoration: none;
            border-bottom: none;
            color: inherit
        }

        .idlID {
            font-weight: 700;
            color: #005a9c
        }

        .idlType {
            color: #005a9c
        }

        .idlName {
            color: #ff4500
        }

        .idlName a {
            color: #ff4500;
            border-bottom: 1px dotted #ff4500;
            text-decoration: none
        }

        a.idlEnumItem {
            color: #000;
            border-bottom: 1px dotted #ccc;
            text-decoration: none
        }

        .idlSuperclass {
            font-style: italic;
            color: #005a9c
        }

        .idlDefaultValue,
        .idlParamName {
            font-style: italic
        }

        .extAttr {
            color: #666
        }

        .idlSectionComment {
            color: gray
        }

        .idlIncludes a {
            font-weight: 700
        }

        .respec-button-copy-paste:focus {
            text-decoration: none;
            border-color: #51a7e8;
            outline: 0;
            box-shadow: 0 0 5px rgba(81, 167, 232, .5)
        }

        .respec-button-copy-paste:is(:focus:hover, .selected:focus) {
            border-color: #51a7e8
        }

        .respec-button-copy-paste:is(:hover, :active, .zeroclipboard-is-hover, .zeroclipboard-is-active) {
            text-decoration: none;
            background-color: #ddd;
            background-image: linear-gradient(#eee, #ddd);
            border-color: #ccc
        }

        .respec-button-copy-paste:is(:active, .selected, .zeroclipboard-is-active) {
            background-color: #dcdcdc;
            background-image: none;
            border-color: #b5b5b5;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, .15)
        }

        .respec-button-copy-paste.selected:hover {
            background-color: #cfcfcf
        }

        .respec-button-copy-paste:is(:disabled, :disabled:hover, .disabled, .disabled:hover) {
            color: rgba(102, 102, 102, .5);
            cursor: default;
            background-color: rgba(229, 229, 229, .5);
            background-image: none;
            border-color: rgba(197, 197, 197, .5);
            box-shadow: none
        }

        @media print {
            .respec-button-copy-paste {
                visibility: hidden
            }
        }
    </style>
    <style>
        dfn {
            cursor: pointer
        }

        .dfn-panel {
            position: absolute;
            z-index: 35;
            min-width: 300px;
            max-width: 500px;
            padding: .5em .75em;
            margin-top: .6em;
            font-family: "Helvetica Neue", sans-serif;
            font-size: small;
            background: #fff;
            background: var(--indextable-hover-bg, #fff);
            color: #000;
            color: var(--text, #000);
            box-shadow: 0 1em 3em -.4em rgba(0, 0, 0, .3), 0 0 1px 1px rgba(0, 0, 0, .05);
            box-shadow: 0 1em 3em -.4em var(--tocsidebar-shadow, rgba(0, 0, 0, .3)), 0 0 1px 1px var(--tocsidebar-shadow, rgba(0, 0, 0, .05));
            border-radius: 2px
        }

        .dfn-panel:not(.docked)>.caret {
            position: absolute;
            top: -9px
        }

        .dfn-panel:not(.docked)>.caret::after,
        .dfn-panel:not(.docked)>.caret::before {
            content: "";
            position: absolute;
            border: 10px solid transparent;
            border-top: 0;
            border-bottom: 10px solid #fff;
            border-bottom-color: var(--indextable-hover-bg, #fff);
            top: 0
        }

        .dfn-panel:not(.docked)>.caret::before {
            border-bottom: 9px solid #a2a9b1;
            border-bottom-color: var(--indextable-hover-bg, #a2a9b1)
        }

        .dfn-panel * {
            margin: 0
        }

        .dfn-panel b {
            display: block;
            color: #000;
            color: var(--text, #000);
            margin-top: .25em
        }

        .dfn-panel ul a[href] {
            color: #333;
            color: var(--text, #333)
        }

        .dfn-panel>div {
            display: flex
        }

        .dfn-panel a.self-link {
            font-weight: 700;
            margin-right: auto
        }

        .dfn-panel .marker {
            padding: .1em;
            margin-left: .5em;
            border-radius: .2em;
            text-align: center;
            white-space: nowrap;
            font-size: 90%;
            color: #040b1c
        }

        .dfn-panel .marker.dfn-exported {
            background: #d1edfd;
            box-shadow: 0 0 0 .125em #1ca5f940
        }

        .dfn-panel .marker.idl-block {
            background: #8ccbf2;
            box-shadow: 0 0 0 .125em #0670b161
        }

        .dfn-panel a:not(:hover) {
            text-decoration: none !important;
            border-bottom: none !important
        }

        .dfn-panel a[href]:hover {
            border-bottom-width: 1px
        }

        .dfn-panel ul {
            padding: 0
        }

        .dfn-panel li {
            margin-left: 1em
        }

        .dfn-panel.docked {
            position: fixed;
            left: .5em;
            top: unset;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - .75em * 2 - .5em - .2em * 2);
            max-height: 30vh;
            overflow: auto
        }
    </style>


    <title>Screen Wake Lock API</title>



    <style id="respec-mainstyle">
        @keyframes pop {
            0% {
                transform: scale(1, 1)
            }

            25% {
                transform: scale(1.25, 1.25);
                opacity: .75
            }

            100% {
                transform: scale(1, 1)
            }
        }

        a.internalDFN {
            color: inherit;
            border-bottom: 1px solid #99c;
            text-decoration: none
        }

        a.externalDFN {
            color: inherit;
            border-bottom: 1px dotted #ccc;
            text-decoration: none
        }

        a.bibref {
            text-decoration: none
        }

        .respec-offending-element:target {
            animation: pop .25s ease-in-out 0s 1
        }

        .respec-offending-element,
        a[href].respec-offending-element {
            text-decoration: red wavy underline
        }

        @supports not (text-decoration:red wavy underline) {
            .respec-offending-element:not(pre) {
                display: inline-block
            }

            .respec-offending-element {
                background: url(data:image/gif;base64,R0lGODdhBAADAPEAANv///8AAP///wAAACwAAAAABAADAEACBZQjmIAFADs=) bottom repeat-x
            }
        }

        #references :target {
            background: #eaf3ff;
            animation: pop .4s ease-in-out 0s 1
        }

        cite .bibref {
            font-style: normal
        }

        a[href].orcid {
            padding-left: 4px;
            padding-right: 4px
        }

        a[href].orcid>svg {
            margin-bottom: -2px
        }

        ol.tof,
        ul.tof {
            list-style: none outside none
        }

        .caption {
            margin-top: .5em;
            font-style: italic
        }

        #issue-summary>ul {
            column-count: 2
        }

        #issue-summary li {
            list-style: none;
            display: inline-block
        }

        details.respec-tests-details {
            margin-left: 1em;
            display: inline-block;
            vertical-align: top
        }

        details.respec-tests-details>* {
            padding-right: 2em
        }

        details.respec-tests-details[open] {
            z-index: 999999;
            position: absolute;
            border: thin solid #cad3e2;
            border-radius: .3em;
            background-color: #fff;
            padding-bottom: .5em
        }

        details.respec-tests-details[open]>summary {
            border-bottom: thin solid #cad3e2;
            padding-left: 1em;
            margin-bottom: 1em;
            line-height: 2em
        }

        details.respec-tests-details>ul {
            width: 100%;
            margin-top: -.3em
        }

        details.respec-tests-details>li {
            padding-left: 1em
        }

        .self-link:hover {
            opacity: 1;
            text-decoration: none;
            background-color: transparent
        }

        aside.example .marker>a.self-link {
            color: inherit
        }

        .header-wrapper {
            display: flex;
            align-items: baseline
        }

        :is(h2, h3, h4, h5, h6):not(#toc>h2, #abstract>h2, #sotd>h2, .head>h2) {
            position: relative;
            left: -.5em
        }

        :is(h2, h3, h4, h5, h6):not(#toch2)+a.self-link {
            color: inherit;
            order: -1;
            position: relative;
            left: -1.1em;
            font-size: 1rem;
            opacity: .5
        }

        :is(h2, h3, h4, h5, h6)+a.self-link::before {
            content: "§";
            text-decoration: none;
            color: var(--heading-text)
        }

        :is(h2, h3)+a.self-link {
            top: -.2em
        }

        :is(h4, h5, h6)+a.self-link::before {
            color: #000
        }

        @media (max-width:767px) {
            dd {
                margin-left: 0
            }
        }

        @media print {
            .removeOnSave {
                display: none
            }
        }
    </style>
    <meta name="color-scheme" content="light">
    <style>
        ul.index {
            columns: 30ch;
            column-gap: 1.5em
        }

        ul.index li {
            list-style: inherit
        }

        ul.index li span {
            color: inherit;
            cursor: pointer;
            white-space: normal
        }

        #index-defined-here ul.index li {
            font-size: .9rem
        }

        ul.index code {
            color: inherit
        }

        #index-defined-here .print-only {
            display: none
        }

        @media print {
            #index-defined-here .print-only {
                display: initial
            }
        }
    </style>
    <meta name="revision" content="cfde1a5134f28fefe70a953bc01fd3f5da03a812">
    <meta name="description" content="This document specifies an API that allows web applications to request
        a screen wake lock. Under the right conditions, and if allowed, the
        screen wake lock prevents the system from turning off a device's
        screen.">
    <link rel="canonical" href="https://www.w3.org/TR/screen-wake-lock/">
    <style>
        .hljs {
            --base: #fafafa;
            --mono-1: #383a42;
            --mono-2: #686b77;
            --mono-3: #717277;
            --hue-1: #0b76c5;
            --hue-2: #336ae3;
            --hue-3: #a626a4;
            --hue-4: #42803c;
            --hue-5: #ca4706;
            --hue-5-2: #c91243;
            --hue-6: #986801;
            --hue-6-2: #9a6a01
        }

        @media (prefers-color-scheme:dark) {
            .hljs {
                --base: #282c34;
                --mono-1: #abb2bf;
                --mono-2: #818896;
                --mono-3: #5c6370;
                --hue-1: #56b6c2;
                --hue-2: #61aeee;
                --hue-3: #c678dd;
                --hue-4: #98c379;
                --hue-5: #e06c75;
                --hue-5-2: #be5046;
                --hue-6: #d19a66;
                --hue-6-2: #e6c07b
            }
        }

        .hljs {
            display: block;
            overflow-x: auto;
            padding: .5em;
            color: #383a42;
            color: var(--mono-1, #383a42);
            background: #fafafa;
            background: var(--base, #fafafa)
        }

        .hljs-comment,
        .hljs-quote {
            color: #717277;
            color: var(--mono-3, #717277);
            font-style: italic
        }

        .hljs-doctag,
        .hljs-formula,
        .hljs-keyword {
            color: #a626a4;
            color: var(--hue-3, #a626a4)
        }

        .hljs-deletion,
        .hljs-name,
        .hljs-section,
        .hljs-selector-tag,
        .hljs-subst {
            color: #ca4706;
            color: var(--hue-5, #ca4706);
            font-weight: 700
        }

        .hljs-literal {
            color: #0b76c5;
            color: var(--hue-1, #0b76c5)
        }

        .hljs-addition,
        .hljs-attribute,
        .hljs-meta-string,
        .hljs-regexp,
        .hljs-string {
            color: #42803c;
            color: var(--hue-4, #42803c)
        }

        .hljs-built_in,
        .hljs-class .hljs-title {
            color: #9a6a01;
            color: var(--hue-6-2, #9a6a01)
        }

        .hljs-attr,
        .hljs-number,
        .hljs-selector-attr,
        .hljs-selector-class,
        .hljs-selector-pseudo,
        .hljs-template-variable,
        .hljs-type,
        .hljs-variable {
            color: #986801;
            color: var(--hue-6, #986801)
        }

        .hljs-bullet,
        .hljs-link,
        .hljs-meta,
        .hljs-selector-id,
        .hljs-symbol,
        .hljs-title {
            color: #336ae3;
            color: var(--hue-2, #336ae3)
        }

        .hljs-emphasis {
            font-style: italic
        }

        .hljs-strong {
            font-weight: 700
        }

        .hljs-link {
            text-decoration: underline
        }
    </style>
    <style>
        var {
            position: relative;
            cursor: pointer
        }

        var[data-type]::after,
        var[data-type]::before {
            position: absolute;
            left: 50%;
            top: -6px;
            opacity: 0;
            transition: opacity .4s;
            pointer-events: none
        }

        var[data-type]::before {
            content: "";
            transform: translateX(-50%);
            border-width: 4px 6px 0 6px;
            border-style: solid;
            border-color: transparent;
            border-top-color: #222
        }

        var[data-type]::after {
            content: attr(data-type);
            transform: translateX(-50%) translateY(-100%);
            background: #222;
            text-align: center;
            font-family: "Dank Mono", "Fira Code", monospace;
            font-style: normal;
            padding: 6px;
            border-radius: 3px;
            color: #daca88;
            text-indent: 0;
            font-weight: 400
        }

        var[data-type]:hover::after,
        var[data-type]:hover::before {
            opacity: 1
        }
    </style>
    <script id="initialUserConfig" type="application/json">{
  "specStatus": "WD",
  "shortName": "screen-wake-lock",
  "editors": [
    {
      "name": "Kenneth Rohde Christiansen",
      "company": "Intel Corporation",
      "companyURL": "https://intel.com/",
      "w3cid": 57705
    },
    {
      "name": "Marcos Cáceres",
      "url": "https://marcosc.com",
      "company": "Apple Inc.",
      "companyURL": "https://www.apple.com/",
      "w3cid": "39125"
    }
  ],
  "formerEditors": [
    {
      "name": "Raphael Kubo da Costa",
      "company": "Intel Corporation",
      "w3cid": "95850"
    },
    {
      "name": "Ilya Bogdanovich",
      "url": "mailto:bogdanovichiy@yandex-team.ru",
      "company": "Yandex",
      "w3cid": "71741"
    },
    {
      "name": "Andrey Logvinov",
      "url": "mailto:alogvinov@yandex-team.ru",
      "company": "Yandex",
      "w3cid": "75989"
    }
  ],
  "github": "https://github.com/w3c/screen-wake-lock/",
  "group": [
    "das",
    "webapps"
  ],
  "testSuiteURI": "https://wpt.live/screen-wake-lock/",
  "implementationReportURI": "https://www.w3.org/wiki/DAS/Implementations",
  "otherLinks": [
    {
      "key": "Quality Assurance Lead",
      "data": [
        {
          "value": "Wanming Lin (Intel)",
          "href": "https://github.com/Honry"
        }
      ]
    }
  ],
  "xref": {
    "profile": "web-platform",
    "specs": [
      "permissions",
      "permissions-policy"
    ]
  },
  "gitRevision": "cfde1a5134f28fefe70a953bc01fd3f5da03a812",
  "publishDate": "2024-10-24",
  "previousMaturity": "WD",
  "previousPublishDate": "2024-05-27",
  "publishISODate": "2024-10-24T00:00:00.000Z",
  "generatedSubtitle": "W3C Working Draft 24 October 2024"
}</script>
    <link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2021/W3C-WD">
</head>

<body class="h-entry" data-cite="WEBIDL permissions permissions-policy HTML INFRA URL WEBIDL DOM FETCH">
    <div class="head">
        <p class="logos"><a class="logo" href="https://www.w3.org/"><img crossorigin="" alt="W3C" height="48"
                    src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72">
            </a></p>
        <h1 id="title" class="title">Screen Wake Lock API</h1>
        <p id="w3c-state"><a href="https://www.w3.org/standards/types#WD">W3C Working Draft</a> <time
                class="dt-published" datetime="2024-10-24">24 October 2024</time></p>
        <details open="">
            <summary>More details about this document</summary>
            <dl>
                <dt>This version:</dt>
                <dd>
                    <a class="u-url"
                        href="https://www.w3.org/TR/2024/WD-screen-wake-lock-20241024/">https://www.w3.org/TR/2024/WD-screen-wake-lock-20241024/</a>
                </dd>
                <dt>Latest published version:</dt>
                <dd>
                    <a href="https://www.w3.org/TR/screen-wake-lock/">https://www.w3.org/TR/screen-wake-lock/</a>
                </dd>
                <dt>Latest editor's draft:</dt>
                <dd><a href="https://w3c.github.io/screen-wake-lock/">https://w3c.github.io/screen-wake-lock/</a></dd>
                <dt>History:</dt>
                <dd>
                    <a
                        href="https://www.w3.org/standards/history/screen-wake-lock/">https://www.w3.org/standards/history/screen-wake-lock/</a>
                </dd>
                <dd>
                    <a href="https://github.com/w3c/screen-wake-lock/commits/">Commit history</a>
                </dd>
                <dt>Test suite:</dt>
                <dd><a href="https://wpt.live/screen-wake-lock/">https://wpt.live/screen-wake-lock/</a></dd>
                <dt>Implementation report:</dt>
                <dd>
                    <a
                        href="https://www.w3.org/wiki/DAS/Implementations">https://www.w3.org/wiki/DAS/Implementations</a>
                </dd>



                <dt>Editors:</dt>
                <dd class="editor p-author h-card vcard" data-editor-id="57705">
                    <span class="p-name fn">Kenneth Rohde Christiansen</span> (<a class="p-org org h-org"
                        href="https://intel.com/">Intel Corporation</a>)
                </dd>
                <dd class="editor p-author h-card vcard" data-editor-id="39125">
                    <a class="u-url url p-name fn" href="https://marcosc.com">Marcos Cáceres</a> (<a
                        class="p-org org h-org" href="https://www.apple.com/">Apple Inc.</a>)
                </dd>
                <dt>
                    Former editors:
                </dt>
                <dd class="editor p-author h-card vcard" data-editor-id="95850">
                    <span class="p-name fn">Raphael Kubo da Costa</span> (<span class="p-org org h-org">Intel
                        Corporation</span>)
                </dd>
                <dd class="editor p-author h-card vcard" data-editor-id="71741">
                    <a class="ed_mailto u-email email p-name" href="mailto:bogdanovichiy@yandex-team.ru">Ilya
                        Bogdanovich</a> (<span class="p-org org h-org">Yandex</span>)
                </dd>
                <dd class="editor p-author h-card vcard" data-editor-id="75989">
                    <a class="ed_mailto u-email email p-name" href="mailto:alogvinov@yandex-team.ru">Andrey Logvinov</a>
                    (<span class="p-org org h-org">Yandex</span>)
                </dd>

                <dt>Feedback:</dt>
                <dd>
                    <a href="https://github.com/w3c/screen-wake-lock/">GitHub w3c/screen-wake-lock</a>
                    (<a href="https://github.com/w3c/screen-wake-lock/pulls/">pull requests</a>,
                    <a href="https://github.com/w3c/screen-wake-lock/issues/new/choose">new issue</a>,
                    <a href="https://github.com/w3c/screen-wake-lock/issues/">open issues</a>)
                </dd>

                <dt>Quality Assurance Lead</dt>
                <dd>
                    <a href="https://github.com/Honry">Wanming Lin (Intel)</a>
                </dd>
            </dl>
        </details>


        <p class="copyright">
            <a href="https://www.w3.org/policies/#copyright">Copyright</a>
            ©
            2024

            <a href="https://www.w3.org/">World Wide Web Consortium</a>.
            <abbr title="World Wide Web Consortium">W3C</abbr><sup>®</sup>
            <a href="https://www.w3.org/policies/#Legal_Disclaimer">liability</a>,
            <a href="https://www.w3.org/policies/#W3C_Trademarks">trademark</a> and
            <a rel="license" href="https://www.w3.org/copyright/software-license-2023/"
                title="W3C Software and Document Notice and License">permissive document license</a> rules apply.
        </p>
        <hr title="Separator for header">
    </div>
    <section id="abstract" class="introductory">
        <h2>Abstract</h2>
        <p>
            This document specifies an API that allows web applications to request
            a screen wake lock. Under the right conditions, and if allowed, the
            screen wake lock prevents the system from turning off a device's
            screen.
        </p>
    </section>
    <section id="sotd" class="introductory">
        <h2>Status of This Document</h2>
        <p><em>This section describes the status of this
                document at the time of its publication. A list of current <abbr
                    title="World Wide Web Consortium">W3C</abbr>
                publications and the latest revision of this technical report can be found
                in the <a href="https://www.w3.org/TR/"><abbr title="World Wide Web Consortium">W3C</abbr> technical
                    reports index</a> at
                https://www.w3.org/TR/.</em></p>
        <p>
            Implementors need to be aware that this specification is extremely
            unstable. <strong>Implementors who are not taking part in the
                discussions will find the specification changing out from under them in
                incompatible ways.</strong> Vendors interested in implementing this
            specification before it eventually reaches the Candidate Recommendation
            phase should <a href="https://github.com/w3c/screen-wake-lock/issues">subscribe to the
                repository on GitHub</a> and take part in the discussions.
        </p>
        <p>
            This document was published by the <a href="https://www.w3.org/groups/wg/das">Devices and Sensors Working
                Group</a> and the <a href="https://www.w3.org/groups/wg/webapps">Web Applications Working Group</a> as
            a Working Draft using the
            <a href="https://www.w3.org/policies/process/20231103/#recs-and-notes">Recommendation track</a>.
        </p>
        <p>Publication as a Working Draft does not
            imply endorsement by <abbr title="World Wide Web Consortium">W3C</abbr> and its Members. </p>
        <p>
            This is a draft document and may be updated, replaced or obsoleted by other
            documents at any time. It is inappropriate to cite this document as other
            than work in progress.

        </p>
        <p>

            This document was produced by groups
            operating under the
            <a href="https://www.w3.org/policies/patent-policy/"><abbr title="World Wide Web Consortium">W3C</abbr>
                Patent
                Policy</a>.

            <abbr title="World Wide Web Consortium">W3C</abbr> maintains a
            <a rel="disclosure" href="https://www.w3.org/groups/wg/das/ipr">public list of any patent disclosures
                (Devices and Sensors Working Group)</a> and a
            <a rel="disclosure" href="https://www.w3.org/groups/wg/webapps/ipr">public list of any patent disclosures
                (Web Applications Working Group)</a>
            made in connection with the deliverables of
            each group; these pages also include
            instructions for disclosing a patent. An individual who has actual
            knowledge of a patent which the individual believes contains
            <a href="https://www.w3.org/policies/patent-policy/#def-essential">Essential Claim(s)</a>
            must disclose the information in accordance with
            <a href="https://www.w3.org/policies/patent-policy/#sec-Disclosure">section 6 of the <abbr
                    title="World Wide Web Consortium">W3C</abbr> Patent Policy</a>.

        </p>
        <p>
            This document is governed by the
            <a id="w3c_process_revision" href="https://www.w3.org/policies/process/20231103/">03 November 2023 <abbr
                    title="World Wide Web Consortium">W3C</abbr> Process Document</a>.
        </p>
    </section>
    <nav id="toc">
        <h2 class="introductory" id="table-of-contents">Table of Contents</h2>
        <ol class="toc">
            <li class="tocline"><a class="tocxref" href="#abstract">Abstract</a></li>
            <li class="tocline"><a class="tocxref" href="#sotd">Status of This Document</a></li>
            <li class="tocline"><a class="tocxref" href="#introduction"><bdi class="secno">1. </bdi>
                    Introduction
                </a></li>
            <li class="tocline"><a class="tocxref" href="#wake-locks"><bdi class="secno">2. </bdi>
                    Wake Locks
                </a></li>
            <li class="tocline"><a class="tocxref" href="#policy-control"><bdi class="secno">3. </bdi>
                    Policy control
                </a></li>
            <li class="tocline"><a class="tocxref" href="#permissions-and-user-prompts"><bdi class="secno">4. </bdi>
                    Permissions and user prompts
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#the-screen-wake-lock-powerful-feature"><bdi
                                class="secno">4.1 </bdi>
                            The <code>"screen-wake-lock"</code> powerful feature
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#permission-algorithms"><bdi class="secno">4.2 </bdi>
                            Permission algorithms
                        </a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#concepts"><bdi class="secno">5. </bdi>
                    Concepts
                </a></li>
            <li class="tocline"><a class="tocxref" href="#extensions-to-the-document-interface"><bdi class="secno">6.
                    </bdi>
                    Extensions to the <code>Document</code> interface
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#internal-slots"><bdi class="secno">6.1 </bdi>
                            Internal slots
                        </a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#extensions-to-the-navigator-interface"><bdi class="secno">7.
                    </bdi>
                    Extensions to the <code>Navigator</code> interface
                </a></li>
            <li class="tocline"><a class="tocxref" href="#the-wakelock-interface"><bdi class="secno">8. </bdi>
                    The <span data-export="" data-dfn-type="interface" data-idl="interface" data-title="WakeLock"
                        data-dfn-for=""><code>WakeLock</code></span> interface
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#the-request-method"><bdi class="secno">8.1 </bdi>
                            The <span data-export="" data-dfn-type="method" data-idl="operation" data-title="request()"
                                data-dfn-for="WakeLock" data-type="Promise" data-lt="request()|request(type)"
                                data-local-lt="WakeLock.request|WakeLock.request()|request"><code>request()</code></span>
                            method
                        </a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#the-wakelocksentinel-interface"><bdi class="secno">9. </bdi>
                    The <span data-export="" data-dfn-type="interface" data-idl="interface"
                        data-title="WakeLockSentinel" data-dfn-for=""><code>WakeLockSentinel</code></span> interface
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#internal-slots-0"><bdi class="secno">9.1 </bdi>
                            Internal slots
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#the-released-attribute"><bdi class="secno">9.2 </bdi>
                            The <span data-export="" data-dfn-type="attribute" data-idl="attribute"
                                data-title="released" data-dfn-for="WakeLockSentinel" data-type="boolean"
                                data-lt="released"
                                data-local-lt="WakeLockSentinel.released"><code>released</code></span> attribute
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#the-type-attribute"><bdi class="secno">9.3 </bdi>
                            The <span data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="type"
                                data-dfn-for="WakeLockSentinel" data-type="WakeLockType" data-lt="type"
                                data-local-lt="WakeLockSentinel.type"><code>type</code></span> attribute
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#the-release-method"><bdi class="secno">9.4 </bdi>
                            The <span data-export="" data-dfn-type="method" data-idl="operation" data-title="release()"
                                data-dfn-for="WakeLockSentinel" data-type="Promise" data-lt="release()"
                                data-local-lt="WakeLockSentinel.release|WakeLockSentinel.release()|release"><code>release()</code></span>
                            method
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#the-onrelease-attribute"><bdi class="secno">9.5 </bdi>
                            The <span data-export="" data-dfn-type="attribute" data-idl="attribute"
                                data-title="onrelease" data-dfn-for="WakeLockSentinel" data-type="EventHandler"
                                data-lt="onrelease"
                                data-local-lt="WakeLockSentinel.onrelease"><code>onrelease</code></span> attribute
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#garbage-collection"><bdi class="secno">9.6 </bdi>
                            Garbage collection
                        </a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#the-wakelocktype-enum"><bdi class="secno">10. </bdi>
                    The <span data-export="" data-dfn-type="enum" data-idl="enum" data-title="WakeLockType"
                        data-dfn-for=""><code>WakeLockType</code></span> enum
                </a></li>
            <li class="tocline"><a class="tocxref" href="#managing-wake-locks"><bdi class="secno">11. </bdi>
                    Managing Wake Locks
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#auto-releasing-wake-locks"><bdi class="secno">11.1
                            </bdi>
                            <span>Auto-releasing wake locks</span>
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#handling-document-loss-of-full-activity"><bdi
                                class="secno">11.2 </bdi>
                            <span>Handling document loss of full activity</span>
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#handling-document-loss-of-visibility"><bdi
                                class="secno">11.3 </bdi>
                            <span>Handling document loss of visibility</span>
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#acquire-wake-lock-algorithm"><bdi class="secno">11.4
                            </bdi>
                            Acquire wake lock algorithm
                        </a></li>
                    <li class="tocline"><a class="tocxref" href="#release-wake-lock-algorithm"><bdi class="secno">11.5
                            </bdi>
                            Release wake lock algorithm
                        </a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#security-and-privacy-considerations"><bdi class="secno">12.
                    </bdi>
                    Security and privacy considerations
                </a></li>
            <li class="tocline"><a class="tocxref" href="#examples"><bdi class="secno">13. </bdi>
                    Examples
                </a></li>
            <li class="tocline"><a class="tocxref" href="#conformance"><bdi class="secno">14. </bdi>Conformance</a></li>
            <li class="tocline"><a class="tocxref" href="#acknowledgments"><bdi class="secno">A. </bdi>
                    Acknowledgments
                </a></li>
            <li class="tocline"><a class="tocxref" href="#changes"><bdi class="secno">B. </bdi>
                    Changes
                </a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#changes-20171214"><bdi class="secno">B.1 </bdi>
                            Changes since the 14 December 2017 CR
                        </a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#index"><bdi class="secno">C. </bdi>Index</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#index-defined-here"><bdi class="secno">C.1 </bdi>Terms
                            defined by this specification</a></li>
                    <li class="tocline"><a class="tocxref" href="#index-defined-elsewhere"><bdi class="secno">C.2
                            </bdi>Terms defined by reference</a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#idl-index"><bdi class="secno">D. </bdi>IDL Index</a></li>
            <li class="tocline"><a class="tocxref" href="#references"><bdi class="secno">E. </bdi>References</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#normative-references"><bdi class="secno">E.1
                            </bdi>Normative references</a></li>
                    <li class="tocline"><a class="tocxref" href="#informative-references"><bdi class="secno">E.2
                            </bdi>Informative references</a></li>
                </ol>
            </li>
        </ol>
    </nav>
    <section class="informative" id="introduction">
        <div class="header-wrapper">
            <h2 id="x1-introduction"><bdi class="secno">1. </bdi>
                Introduction
            </h2><a class="self-link" href="#introduction" aria-label="Permalink for Section 1."></a>
        </div>
        <p><em>This section is non-normative.</em></p>

        <p>
            Modern operating systems achieve longer battery life by implementing
            aggressive power management, meaning that shortly after the lack of
            user activity, a host device may lower the screen brightness, turn the
            screen off and even let the CPU go into a deep power state, limiting
            power usage as much as possible.
        </p>
        <p>
            Though this is great for prolonged battery life, it can sometime hinder
            some use cases such as scanning a barcode, reading an ebook, following
            a recipe, presenting to an audience, and so on. See also
            <cite><a data-matched-text="[[[wake-lock-use-cases]]]"
                    href="https://www.w3.org/TR/wake-lock-use-cases/">Wake Lock: Use cases</a></cite>.
        </p>
        <p>
            A wake lock will generally prevent something from happening, but UAs
            (and the underlying OS) may time limit a wake lock given the battery
            status (wall power connected, discharging, low battery level), or even
            disallow wake locks in the case a power saving mode is activated.
        </p>
    </section>
    <section id="wake-locks">
        <div class="header-wrapper">
            <h2 id="x2-wake-locks"><bdi class="secno">2. </bdi>
                Wake Locks
            </h2><a class="self-link" href="#wake-locks" aria-label="Permalink for Section 2."></a>
        </div>

        <p>
            This specification defines the following <dfn data-export="" data-plurals="wake lock types"
                id="dfn-wake-lock-type" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">wake lock
                type</dfn>:
        </p>
        <ol>
            <li>A <dfn data-export="" id="dfn-screen-wake-lock" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">screen wake lock</dfn> prevents the screen
                from turning off. Only visible documents can acquire the screen wake
                lock.
            </li>
        </ol>
        <p>
            In the API, the <a data-link-type="dfn|abstract-op" href="#dfn-wake-lock-type" class="internalDFN"
                id="ref-for-dfn-wake-lock-type-1">wake lock types</a> are represented by the
            <a data-link-type="idl" data-lt="WakeLockType" href="#dom-wakelocktype" class="internalDFN"
                id="ref-for-dom-wakelocktype-1"><code>WakeLockType</code></a> enum values.
        </p>
        <div class="note" role="note" id="issue-container-generatedID">
            <div role="heading" class="note-title marker" id="h-note" aria-level="3"><span>Note</span></div>
            <p class="">
                Other specifications might define different wake lock types.
            </p>
        </div>
    </section>
    <section id="policy-control">
        <div class="header-wrapper">
            <h2 id="x3-policy-control"><bdi class="secno">3. </bdi>
                Policy control
            </h2><a class="self-link" href="#policy-control" aria-label="Permalink for Section 3."></a>
        </div>

        <p
            data-tests="wakelock-supported-by-permissions-policy.html, wakelock-enabled-on-self-origin-by-permissions-policy.https.sub.html, wakelock-enabled-by-permissions-policy-attribute-redirect-on-load.https.sub.html, wakelock-enabled-by-permissions-policy-attribute.https.sub.html, wakelock-enabled-by-permissions-policy.https.sub.html">
            The Screen Wake Lock API defines a <a data-link-type="dfn|abstract-op" data-type="dfn"
                href="https://www.w3.org/TR/permissions-policy-1/#policy-controlled-feature"
                id="ref-for-index-term-policy-controlled-feature-1">policy-controlled feature</a>
            identified by the string <code>"screen-wake-lock"</code>. Its <a data-link-type="dfn|abstract-op"
                data-type="dfn"
                href="https://www.w3.org/TR/permissions-policy-1/#policy-controlled-feature-default-allowlist"
                id="ref-for-index-term-default-allowlist-for-policy-controlled-feature-1">default allowlist</a> is
            <code>'self'</code>.
        </p>
        <div class="note" role="note" id="issue-container-generatedID-0">
            <div role="heading" class="note-title marker" id="h-note-0" aria-level="3"><span>Note</span></div>
            <aside class="">
                <p>
                    The <a data-link-type="dfn|abstract-op" data-type="dfn"
                        href="https://www.w3.org/TR/permissions-policy-1/#policy-controlled-feature-default-allowlist"
                        id="ref-for-index-term-default-allowlist-for-policy-controlled-feature-2">default allowlist</a>
                    of <code>'self'</code>
                    allows wake lock usage in same-origin nested frames but prevents
                    third-party content from using wake locks.
                </p>
                <p>
                    Third-party usage can be selectively enabled by adding
                    <code>allow="screen-wake-lock"</code> attribute to the frame container element:
                </p>
                <div class="example" id="example-enabling-screen-wake-lock-on-remote-content">
                    <div class="marker">
                        <a class="self-link"
                            href="#example-enabling-screen-wake-lock-on-remote-content">Example<bdi></bdi></a><span
                            class="example-title">: Enabling screen wake lock on remote content</span>
                    </div>
                    <pre
                        aria-busy="false"><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">iframe</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://third-party.com"</span> <span class="hljs-attr">allow</span>=<span class="hljs-string">"screen-wake-lock"</span>/&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">iframe</span>&gt;</span></code></pre>
                </div>
                <p>
                    Alternatively, the Screen Wake Lock API can be disabled completely by
                    specifying the permissions policy in a HTTP response header:
                </p>
                <div class="example" id="example-permissions-policy-header">
                    <div class="marker">
                        <a class="self-link" href="#example-permissions-policy-header">Example<bdi></bdi></a><span
                            class="example-title">: Permissions Policy header</span>
                    </div>
                    <pre
                        aria-busy="false"><code class="hljs http"><span class="hljs-attribute">Permissions-Policy</span><span class="hljs-punctuation">: </span>screen-wake-lock=()</code></pre>
                </div>
                <p>
                    See <cite><a data-matched-text="[[[PERMISSIONS-POLICY]]]"
                            href="https://www.w3.org/TR/permissions-policy-1/">Permissions Policy</a></cite> for more
                    details.
                </p>
            </aside>
        </div>
    </section>
    <section id="permissions-and-user-prompts">
        <div class="header-wrapper">
            <h2 id="x4-permissions-and-user-prompts"><bdi class="secno">4. </bdi>
                Permissions and user prompts
            </h2><a class="self-link" href="#permissions-and-user-prompts" aria-label="Permalink for Section 4."></a>
        </div>

        <p>
            The [<cite><a class="bibref" data-link-type="biblio" href="#bib-permissions"
                    title="Permissions">PERMISSIONS</a></cite>] API provides a uniform way for websites to request
            permissions from users and query which permissions they have.
        </p>
        <p>
            A <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-user-agent-1">user
                agent</a> can <dfn data-lt="deny wake lock|denies the wake lock|deny a wake lock"
                id="dfn-deny-wake-lock" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">deny a wake lock</dfn>
            of a
            particular <a href="#dfn-wake-lock-type" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-wake-lock-type-2">wake lock type</a> for a particular <a data-link-type="idl"
                data-lt="Document" data-type="interface" href="https://dom.spec.whatwg.org/#document"
                id="ref-for-index-term-document-interface-1"><code>Document</code></a> by any
            implementation-specific reason, such as platform setting or user
            preference.
        </p>
        <p>
            It is <em class="rfc2119">RECOMMENDED</em> that a user agent show some form of unobtrusive
            notification that informs the user when a wake lock is active, as well
            as provides the user with the means to <a data-link-type="dfn|abstract-op"
                data-lt="screen wake lock permission revocation algorithm"
                href="#dfn-screen-wake-lock-permission-revocation-algorithm" class="internalDFN"
                id="ref-for-dfn-screen-wake-lock-permission-revocation-algorithm-1">block</a> the ongoing operation, or
            simply dismiss
            the notification.
        </p>
        <section id="the-screen-wake-lock-powerful-feature">
            <div class="header-wrapper">
                <h3 id="x4-1-the-screen-wake-lock-powerful-feature"><bdi class="secno">4.1 </bdi>
                    The <code>"screen-wake-lock"</code> powerful feature
                </h3><a class="self-link" href="#the-screen-wake-lock-powerful-feature"
                    aria-label="Permalink for Section 4.1"></a>
            </div>

            <p data-tests="wakelockpermissiondescriptor.https.html">
                The <code>"screen-wake-lock"</code> <a data-type="dfn"
                    href="https://www.w3.org/TR/permissions/#dfn-powerful-feature"
                    id="ref-for-index-term-powerful-feature-1">powerful feature</a> enables the
                capability defined by this specification.
            </p>
        </section>
        <section id="permission-algorithms">
            <div class="header-wrapper">
                <h3 id="x4-2-permission-algorithms"><bdi class="secno">4.2 </bdi>
                    Permission algorithms
                </h3><a class="self-link" href="#permission-algorithms" aria-label="Permalink for Section 4.2"></a>
            </div>

            <p>
                The <code>"screen-wake-lock"</code> <a data-type="dfn"
                    href="https://www.w3.org/TR/permissions/#dfn-powerful-feature"
                    id="ref-for-index-term-powerful-feature-2">powerful feature</a> defines a <a
                    data-link-type="dfn|abstract-op" data-type="dfn"
                    href="https://www.w3.org/TR/permissions/#dfn-permission-revocation-algorithm"
                    id="ref-for-index-term-permission-revocation-algorithm-for-powerful-feature-1">permission revocation
                    algorithm</a>. To invoke the <dfn id="dfn-screen-wake-lock-permission-revocation-algorithm"
                    tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">Screen
                    Wake Lock permission revocation algorithm</dfn>, run these steps:
            </p>
            <ol class="algorithm">
                <li>Let <var data-type="Document">document</var> be the <a data-link-type="dfn|abstract-op"
                        data-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#current-global-object"
                        id="ref-for-index-term-current-global-object-1">current global object</a>'s
                    <a data-link-type="dfn|abstract-op" data-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window"
                        id="ref-for-index-term-associated-document-1">associated Document</a>.
                </li>
                <li>Let <var>lockList</var> be
                    <var data-type="Document">document</var>.<a data-link-type="attribute" data-lt="[[ActiveLocks]]"
                        href="#dfn-activelocks" class="internalDFN"
                        id="ref-for-dfn-activelocks-1"><code>[[ActiveLocks]]</code></a>["<code>screen</code>"].
                </li>
                <li><a data-link-type="dfn|abstract-op" data-type="dfn"
                        href="https://infra.spec.whatwg.org/#list-iterate"
                        id="ref-for-index-term-for-each-for-list-1">For each</a> <var
                        data-type="WakeLockSentinel">lock</var> in <var>lockList</var>:
                    <ol>
                        <li>Run <a href="#dfn-release-a-wake-lock" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-release-a-wake-lock-1">release a wake lock</a> with <var
                                data-type="Document">document</var>, <var data-type="WakeLockSentinel">lock</var>, and
                            "<a data-link-type="idl" href="#dom-wakelocktype-screen" class="internalDFN"
                                id="ref-for-dom-wakelocktype-screen-1"><code>screen</code></a>".
                        </li>
                    </ol>
                </li>
            </ol>
        </section>
    </section>
    <section id="concepts">
        <div class="header-wrapper">
            <h2 id="x5-concepts"><bdi class="secno">5. </bdi>
                Concepts
            </h2><a class="self-link" href="#concepts" aria-label="Permalink for Section 5."></a>
        </div>

        <p>
            The <a data-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#task-source"
                id="ref-for-index-term-task-source-1">task source</a> for the <a data-type="dfn"
                href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-task"
                id="ref-for-index-term-tasks-1">tasks</a> mentioned in this
            specification is the <dfn id="dfn-screen-wake-lock-task-source" tabindex="0" aria-haspopup="dialog"
                data-dfn-type="dfn">screen wake lock task source</dfn>.
        </p>
        <p>
            The term <dfn id="dfn-platform-wake-lock" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">platform
                wake lock</dfn> refers to platform interfaces
            with which the user agent interacts to query state and acquire and
            release a wake lock.
        </p>
        <p>
            A <a href="#dfn-platform-wake-lock" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-platform-wake-lock-1">platform wake lock</a> can be defined by the underlying platform
            (e.g. in a native wake lock framework) or by the user agent, if it has
            direct hardware control.
        </p>
    </section>
    <section data-dfn-for="Document" id="extensions-to-the-document-interface">
        <div class="header-wrapper">
            <h2 id="x6-extensions-to-the-document-interface"><bdi class="secno">6. </bdi>
                Extensions to the <code>Document</code> interface
            </h2><a class="self-link" href="#extensions-to-the-document-interface"
                aria-label="Permalink for Section 6."></a>
        </div>

        <section id="internal-slots">
            <div class="header-wrapper">
                <h3 id="x6-1-internal-slots"><bdi class="secno">6.1 </bdi>
                    Internal slots
                </h3><a class="self-link" href="#internal-slots" aria-label="Permalink for Section 6.1"></a>
            </div>

            <table class="simple">
                <thead>
                    <tr>
                        <th>
                            Internal slot
                        </th>
                        <th>
                            Initial value
                        </th>
                        <th>
                            Description
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <dfn data-idl="" data-dfn-for="Document" data-noexport="" data-dfn-type="attribute"
                                id="dfn-activelocks" tabindex="0" aria-haspopup="dialog">[[ActiveLocks]]</dfn>
                        </td>
                        <td>
                            An <a data-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map"
                                id="ref-for-index-term-ordered-map-1">ordered map</a> mapping <a
                                href="#dfn-wake-lock-type" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-wake-lock-type-3">wake lock types</a> to empty
                            <a data-type="dfn" href="https://infra.spec.whatwg.org/#list"
                                id="ref-for-index-term-lists-1">lists</a>.
                        </td>
                        <td>
                            An <a data-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map"
                                id="ref-for-index-term-ordered-map-2">ordered map</a> of <a href="#dfn-wake-lock-type"
                                class="internalDFN" data-link-type="dfn" id="ref-for-dfn-wake-lock-type-4">wake lock
                                types</a> to a
                            <a data-type="dfn" href="https://infra.spec.whatwg.org/#list"
                                id="ref-for-index-term-lists-2">list</a> of <a data-link-type="idl"
                                data-lt="WakeLockSentinel" href="#dom-wakelocksentinel" class="internalDFN"
                                id="ref-for-dom-wakelocksentinel-1"><code>WakeLockSentinel</code></a> objects associated
                            with
                            this <a data-link-type="idl" data-lt="Document" data-type="interface"
                                href="https://dom.spec.whatwg.org/#document"
                                id="ref-for-index-term-document-interface-2"><code>Document</code></a>.
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>
    </section>
    <section data-dfn-for="Navigator" id="extensions-to-the-navigator-interface">
        <div class="header-wrapper">
            <h2 id="x7-extensions-to-the-navigator-interface"><bdi class="secno">7. </bdi>
                Extensions to the <code>Navigator</code> interface
            </h2><a class="self-link" href="#extensions-to-the-navigator-interface"
                aria-label="Permalink for Section 7."></a>
        </div>

        <pre class="idl def" id="webidl-2101563504"><span class="idlHeader"><a class="self-link" href="#webidl-2101563504">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-navigator-partial-1" data-title="Navigator">[<span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext" id="ref-for-index-term-securecontext-extended-attribute-1">SecureContext</a></span>]
partial interface <a data-idl="partial" data-link-type="interface" data-title="Navigator" class="idlID" data-dfn-for="Navigator" data-type="interface" href="https://html.spec.whatwg.org/multipage/system-state.html#navigator" id="ref-for-index-term-navigator-interface-1">Navigator</a> {<span data-idl="" class="idlAttribute" id="idl-def-navigator-wakelock" data-title="wakeLock" data-dfn-for="Navigator">
  [<span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject" id="ref-for-index-term-sameobject-extended-attribute-1">SameObject</a></span>] readonly attribute<span class="idlType"> <a data-link-type="idl" href="#dom-wakelock" class="internalDFN" id="ref-for-dom-wakelock-1"><code>WakeLock</code></a></span> <dfn data-export="" data-dfn-type="attribute" id="dom-navigator-wakelock" data-idl="attribute" data-title="wakeLock" data-dfn-for="Navigator" data-type="WakeLock" data-lt="wakeLock" data-local-lt="Navigator.wakeLock" class="idlName" tabindex="0" aria-haspopup="dialog"><code>wakeLock</code></dfn>;</span>
};</span></code></pre>
    </section>
    <section data-dfn-for="WakeLock" id="the-wakelock-interface">
        <div class="header-wrapper">
            <h2 id="x8-the-wakelock-interface"><bdi class="secno">8. </bdi>
                The <dfn data-export="" data-dfn-type="interface" id="dom-wakelock" data-idl="interface"
                    data-title="WakeLock" data-dfn-for="" tabindex="0"
                    aria-haspopup="dialog"><code>WakeLock</code></dfn> interface
            </h2><a class="self-link" href="#the-wakelock-interface" aria-label="Permalink for Section 8."></a>
        </div>

        <p data-tests="wakelock-insecure-context.any.html">
            The <a data-link-type="idl" data-lt="WakeLock" href="#dom-wakelock" class="internalDFN"
                id="ref-for-dom-wakelock-2"><code>WakeLock</code></a> interface allows a document to acquire a <a
                data-link-type="dfn|abstract-op" href="#dfn-screen-wake-lock" class="internalDFN"
                id="ref-for-dfn-screen-wake-lock-1">screen wake lock</a>.
        </p>
        <pre class="idl def" id="webidl-1156448766"><span class="idlHeader"><a class="self-link" href="#webidl-1156448766">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-wakelock" data-title="WakeLock">[<span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext" id="ref-for-index-term-securecontext-extended-attribute-2">SecureContext</a></span>, <span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-index-term-exposed-extended-attribute-1">Exposed</a>=(Window)</span>]
interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-wakelock" id="ref-for-dom-wakelock-3"><code>WakeLock</code></a> {<span data-idl="" class="idlMethod" id="idl-def-wakelock-request-type" data-title="request" data-dfn-for="WakeLock"><span class="idlType">
  <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-index-term-promise-interface-1">Promise</a>&lt;<a data-link-type="idl" href="#dom-wakelocksentinel" class="internalDFN" id="ref-for-dom-wakelocksentinel-2"><code>WakeLockSentinel</code></a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-wakelock-request" id="ref-for-dom-wakelock-request-1"><code>request</code></a>(optional<span class="idlType"> <a data-link-type="idl" href="#dom-wakelocktype" class="internalDFN" id="ref-for-dom-wakelocktype-2"><code>WakeLockType</code></a></span> <span class="idlParamName">type</span> = "screen");</span>
};</span></code></pre>
        <section id="the-request-method">
            <div class="header-wrapper">
                <h3 id="x8-1-the-request-method"><bdi class="secno">8.1 </bdi>
                    The <dfn data-export="" data-dfn-type="method" id="dom-wakelock-request" data-idl="operation"
                        data-title="request()" data-dfn-for="WakeLock" data-type="Promise"
                        data-lt="request()|request(type)" data-local-lt="WakeLock.request|WakeLock.request()|request"
                        tabindex="0" aria-haspopup="dialog"><code>request()</code></dfn> method
                </h3><a class="self-link" href="#the-request-method" aria-label="Permalink for Section 8.1"></a>
            </div>

            <p data-tests="wakelock-type.https.any.html">
                The <code>request(<var data-type="WakeLockType">type</var>)</code> method steps are:
            </p>
            <ol class="algorithm">
                <li>Let <var data-type="Document">document</var> be <a data-link-type="dfn|abstract-op" data-type="dfn"
                        href="https://webidl.spec.whatwg.org/#this" id="ref-for-index-term-this-1">this</a>'s <a
                        data-link-type="dfn|abstract-op" data-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global"
                        id="ref-for-index-term-relevant-global-object-1">relevant global object</a>'s <a
                        data-link-type="dfn|abstract-op" data-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window"
                        id="ref-for-index-term-associated-document-2">associated Document</a>.
                </li>
                <li data-tests="wakelock-active-document.https.window.html">If
                    <var data-type="Document">document</var> is not <a data-link-type="dfn|abstract-op" data-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active"
                        id="ref-for-index-term-fully-active-for-document-1">fully active</a>, return <a
                        data-link-type="dfn|abstract-op" data-type="dfn"
                        href="https://webidl.spec.whatwg.org/#a-promise-rejected-with"
                        id="ref-for-index-term-a-promise-rejected-with-1">a promise rejected with</a> with a "<a
                        data-link-type="idl" data-type="exception"
                        href="https://webidl.spec.whatwg.org/#notallowederror"
                        id="ref-for-index-term-notallowederror-exception-1"><code>NotAllowedError</code></a>" <a
                        data-link-type="idl" data-lt="DOMException" data-type="interface"
                        href="https://webidl.spec.whatwg.org/#idl-DOMException"
                        id="ref-for-index-term-domexception-interface-1"><code>DOMException</code></a>.
                </li>
                <li data-tests="wakelock-disabled-by-permissions-policy.https.sub.html">If
                    <var data-type="Document">document</var> is not <a data-link-type="dfn|abstract-op" data-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#allowed-to-use"
                        id="ref-for-index-term-allowed-to-use-1">allowed to use</a> the <a
                        data-link-type="dfn|abstract-op" data-type="dfn"
                        href="https://www.w3.org/TR/permissions-policy-1/#policy-controlled-feature"
                        id="ref-for-index-term-policy-controlled-feature-2">policy-controlled feature</a> named
                    "<code>screen-wake-lock</code>", return <a data-link-type="dfn|abstract-op" data-type="dfn"
                        href="https://webidl.spec.whatwg.org/#a-promise-rejected-with"
                        id="ref-for-index-term-a-promise-rejected-with-2">a promise rejected with</a> a "<a
                        data-link-type="idl" data-type="exception"
                        href="https://webidl.spec.whatwg.org/#notallowederror"
                        id="ref-for-index-term-notallowederror-exception-2"><code>NotAllowedError</code></a>" <a
                        data-link-type="idl" data-lt="DOMException" data-type="interface"
                        href="https://webidl.spec.whatwg.org/#idl-DOMException"
                        id="ref-for-index-term-domexception-interface-2"><code>DOMException</code></a>.
                </li>
                <li data-tests="wakelock-screen-type-on-worker.https.worker.html">If
                    the <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-user-agent-2">user agent</a> <a href="#dfn-deny-wake-lock" class="internalDFN"
                        data-link-type="dfn" id="ref-for-dfn-deny-wake-lock-1">denies the wake lock</a> of this <var
                        data-type="WakeLockType">type</var> for
                    <var data-type="Document">document</var>, return <a data-link-type="dfn|abstract-op" data-type="dfn"
                        href="https://webidl.spec.whatwg.org/#a-promise-rejected-with"
                        id="ref-for-index-term-a-promise-rejected-with-3">a promise rejected with</a> a
                    "<a data-link-type="idl" data-type="exception"
                        href="https://webidl.spec.whatwg.org/#notallowederror"
                        id="ref-for-index-term-notallowederror-exception-3"><code>NotAllowedError</code></a>" <a
                        data-link-type="idl" data-lt="DOMException" data-type="interface"
                        href="https://webidl.spec.whatwg.org/#idl-DOMException"
                        id="ref-for-index-term-domexception-interface-3"><code>DOMException</code></a>.
                </li>
                <li data-tests="wakelock-document-hidden-manual.https.html">If
                    <var data-type="Document">document</var>'s <a data-link-type="dfn|abstract-op" data-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/interaction.html#visibility-state"
                        id="ref-for-index-term-visibility-state-for-document-1">visibility state</a> is
                    "<code>hidden</code>", return <a data-link-type="dfn|abstract-op" data-type="dfn"
                        href="https://webidl.spec.whatwg.org/#a-promise-rejected-with"
                        id="ref-for-index-term-a-promise-rejected-with-4">a promise rejected with</a> "<a
                        data-link-type="idl" data-type="exception"
                        href="https://webidl.spec.whatwg.org/#notallowederror"
                        id="ref-for-index-term-notallowederror-exception-4"><code>NotAllowedError</code></a>" <a
                        data-link-type="idl" data-lt="DOMException" data-type="interface"
                        href="https://webidl.spec.whatwg.org/#idl-DOMException"
                        id="ref-for-index-term-domexception-interface-4"><code>DOMException</code></a>.
                </li>
                <li>Let <var data-type="Promise">promise</var> be <a data-link-type="dfn|abstract-op" data-type="dfn"
                        href="https://webidl.spec.whatwg.org/#a-new-promise" id="ref-for-index-term-a-new-promise-1">a
                        new promise</a>.
                </li>
                <li>Run the following steps <a data-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel"
                        id="ref-for-index-term-in-parallel-1">in parallel</a>:
                    <ol>
                        <li>Let <var data-type="PermissionState">state</var> be the result of <a data-type="dfn"
                                href="https://www.w3.org/TR/permissions/#dfn-request-permission-to-use"
                                id="ref-for-index-term-requesting-permission-to-use-1">requesting
                                permission to use</a> "<code>screen-wake-lock</code>".
                        </li>
                        <li data-tests="wakelock-request-denied.https.html">If <var
                                data-type="PermissionState">state</var> is
                            "<a data-link-type="idl" data-type="enum-value"
                                href="https://www.w3.org/TR/permissions/#dom-permissionstate-denied"
                                id="ref-for-index-term-denied-for-permissionstate-1"><code>denied</code></a>", then:
                            <ol>
                                <li>
                                    <a data-type="dfn"
                                        href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task"
                                        id="ref-for-index-term-queue-a-global-task-1">Queue a global task</a> on the <a
                                        href="#dfn-screen-wake-lock-task-source" class="internalDFN"
                                        data-link-type="dfn" id="ref-for-dfn-screen-wake-lock-task-source-1">screen wake
                                        lock task
                                        source</a> given <var data-type="Document">document</var>'s <a data-type="dfn"
                                        href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global"
                                        id="ref-for-index-term-relevant-global-object-2">relevant global object</a>
                                    to reject <var data-type="Promise">promise</var> with a "<a data-link-type="idl"
                                        data-type="exception" href="https://webidl.spec.whatwg.org/#notallowederror"
                                        id="ref-for-index-term-notallowederror-exception-5"><code>NotAllowedError</code></a>"
                                    <a data-link-type="idl" data-lt="DOMException" data-type="interface"
                                        href="https://webidl.spec.whatwg.org/#idl-DOMException"
                                        id="ref-for-index-term-domexception-interface-5"><code>DOMException</code></a>.
                                </li>
                                <li>Abort these steps.
                                </li>
                            </ol>
                        </li>
                        <li>
                            <a data-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task"
                                id="ref-for-index-term-queue-a-global-task-2">Queue a global task</a> on the <a
                                href="#dfn-screen-wake-lock-task-source" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-screen-wake-lock-task-source-2">screen wake lock task
                                source</a> given <var data-type="Document">document</var>'s <a data-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global"
                                id="ref-for-index-term-relevant-global-object-3">relevant global object</a> to
                            run these steps:
                            <ol>
                                <li>If <var data-type="Document">document</var> is not <a
                                        data-link-type="dfn|abstract-op" data-type="dfn"
                                        href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active"
                                        id="ref-for-index-term-fully-active-for-document-2">fully active</a>, then:
                                    <ol>
                                        <li>Reject <var data-type="Promise">promise</var> with a "<a
                                                data-link-type="idl" data-type="exception"
                                                href="https://webidl.spec.whatwg.org/#notallowederror"
                                                id="ref-for-index-term-notallowederror-exception-6"><code>NotAllowedError</code></a>"
                                            <a data-link-type="idl" data-lt="DOMException" data-type="interface"
                                                href="https://webidl.spec.whatwg.org/#idl-DOMException"
                                                id="ref-for-index-term-domexception-interface-6"><code>DOMException</code></a>.
                                        </li>
                                        <li>Abort these steps.
                                        </li>
                                    </ol>
                                </li>
                                <li>If <var data-type="Document">document</var>'s <a data-link-type="dfn|abstract-op"
                                        data-type="dfn"
                                        href="https://html.spec.whatwg.org/multipage/interaction.html#visibility-state"
                                        id="ref-for-index-term-visibility-state-for-document-2">visibility state</a> is
                                    "<code>hidden</code>", then:
                                    <ol>
                                        <li>Reject <var data-type="Promise">promise</var> with a "<a
                                                data-link-type="idl" data-type="exception"
                                                href="https://webidl.spec.whatwg.org/#notallowederror"
                                                id="ref-for-index-term-notallowederror-exception-7"><code>NotAllowedError</code></a>"
                                            <a data-link-type="idl" data-lt="DOMException" data-type="interface"
                                                href="https://webidl.spec.whatwg.org/#idl-DOMException"
                                                id="ref-for-index-term-domexception-interface-7"><code>DOMException</code></a>.
                                        </li>
                                        <li>Abort these steps.
                                        </li>
                                    </ol>
                                </li>
                                <li>If <var data-type="Document">document</var>.<a data-link-type="attribute"
                                        data-lt="[[ActiveLocks]]" href="#dfn-activelocks" class="internalDFN"
                                        id="ref-for-dfn-activelocks-2"><code>[[ActiveLocks]]</code></a>["<code>screen</code>"]
                                    <a data-link-type="dfn|abstract-op" data-type="dfn"
                                        href="https://infra.spec.whatwg.org/#list-is-empty"
                                        id="ref-for-index-term-is-empty-for-list-1">is empty</a>, then invoke the
                                    following steps <a data-type="dfn"
                                        href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel"
                                        id="ref-for-index-term-in-parallel-2">in
                                        parallel</a>:
                                    <ol>
                                        <li>Invoke <a href="#dfn-acquire-a-wake-lock" class="internalDFN"
                                                data-link-type="dfn" id="ref-for-dfn-acquire-a-wake-lock-1">acquire a
                                                wake lock</a> with
                                            "<a data-link-type="idl" href="#dom-wakelocktype-screen" class="internalDFN"
                                                id="ref-for-dom-wakelocktype-screen-2"><code>screen</code></a>".
                                            <div class="note" role="note" id="issue-container-generatedID-1">
                                                <div role="heading" class="note-title marker" id="h-note-1"
                                                    aria-level="4"><span>Note</span></div>
                                                <aside class="">
                                                    The <a href="#dfn-acquire-a-wake-lock" class="internalDFN"
                                                        data-link-type="dfn"
                                                        id="ref-for-dfn-acquire-a-wake-lock-2">acquire a wake lock</a>
                                                    algorithm may
                                                    ultimately be unable to acquire a lock from the
                                                    operating system, but this is indistinguishable from
                                                    a successful lock acquisition to avoid user
                                                    fingerprinting (failure to acquire a lock can
                                                    indicate low battery levels, for example).
                                                </aside>
                                            </div>
                                        </li>
                                    </ol>
                                </li>
                                <li>Let <var data-type="WakeLockSentinel">lock</var> be a new <a data-link-type="idl"
                                        data-lt="WakeLockSentinel" href="#dom-wakelocksentinel" class="internalDFN"
                                        id="ref-for-dom-wakelocksentinel-3"><code>WakeLockSentinel</code></a>
                                    object with its <a data-link-type="idl" href="#dom-wakelocksentinel-type"
                                        class="internalDFN"
                                        id="ref-for-dom-wakelocksentinel-type-1"><code>type</code></a> attribute set to
                                    <var data-type="WakeLockType">type</var>.
                                </li>
                                <li><a data-link-type="dfn|abstract-op" data-type="dfn"
                                        href="https://infra.spec.whatwg.org/#list-append"
                                        id="ref-for-index-term-append-for-list-1">Append</a> <var
                                        data-type="WakeLockSentinel">lock</var> to
                                    <var data-type="Document">document</var>.<a data-link-type="attribute"
                                        data-lt="[[ActiveLocks]]" href="#dfn-activelocks" class="internalDFN"
                                        id="ref-for-dfn-activelocks-3"><code>[[ActiveLocks]]</code></a>["<code>screen</code>"].
                                </li>
                                <li>Resolve <var data-type="Promise">promise</var> with <var
                                        data-type="WakeLockSentinel">lock</var>.
                                </li>
                            </ol>
                        </li>
                    </ol>
                </li>
                <li>Return <var data-type="Promise">promise</var>.
                </li>
            </ol>
        </section>
    </section>
    <section data-dfn-for="WakeLockSentinel" id="the-wakelocksentinel-interface">
        <div class="header-wrapper">
            <h2 id="x9-the-wakelocksentinel-interface"><bdi class="secno">9. </bdi>
                The <dfn data-export="" data-dfn-type="interface" id="dom-wakelocksentinel" data-idl="interface"
                    data-title="WakeLockSentinel" data-dfn-for="" tabindex="0"
                    aria-haspopup="dialog"><code>WakeLockSentinel</code></dfn> interface
            </h2><a class="self-link" href="#the-wakelocksentinel-interface" aria-label="Permalink for Section 9."></a>
        </div>

        <pre class="idl def" id="webidl-1858612967"><span class="idlHeader"><a class="self-link" href="#webidl-1858612967">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-wakelocksentinel" data-title="WakeLockSentinel">[<span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext" id="ref-for-index-term-securecontext-extended-attribute-3">SecureContext</a></span>, <span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-index-term-exposed-extended-attribute-2">Exposed</a>=(Window)</span>]
interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-wakelocksentinel" id="ref-for-dom-wakelocksentinel-4"><code>WakeLockSentinel</code></a> : <span class="idlSuperclass"><a data-link-type="idl" data-type="interface" href="https://dom.spec.whatwg.org/#eventtarget" id="ref-for-index-term-eventtarget-interface-1">EventTarget</a></span> {<span data-idl="" class="idlAttribute" id="idl-def-wakelocksentinel-released" data-title="released" data-dfn-for="WakeLockSentinel">
  readonly attribute<span class="idlType"> <a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-index-term-boolean-type-1">boolean</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-wakelocksentinel-released" id="ref-for-dom-wakelocksentinel-released-1"><code>released</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-wakelocksentinel-type" data-title="type" data-dfn-for="WakeLockSentinel">
  readonly attribute<span class="idlType"> <a data-link-type="idl" href="#dom-wakelocktype" class="internalDFN" id="ref-for-dom-wakelocktype-3"><code>WakeLockType</code></a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-wakelocksentinel-type" id="ref-for-dom-wakelocksentinel-type-2"><code>type</code></a>;</span><span data-idl="" class="idlMethod" id="idl-def-wakelocksentinel-release" data-title="release" data-dfn-for="WakeLockSentinel"><span class="idlType">
  <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-index-term-promise-interface-2">Promise</a>&lt;<a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-index-term-undefined-type-1">undefined</a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-wakelocksentinel-release" id="ref-for-dom-wakelocksentinel-release-1"><code>release</code></a>();</span><span data-idl="" class="idlAttribute" id="idl-def-wakelocksentinel-onrelease" data-title="onrelease" data-dfn-for="WakeLockSentinel">
  attribute<span class="idlType"> <a data-link-type="idl" data-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" id="ref-for-index-term-eventhandler-1">EventHandler</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-wakelocksentinel-onrelease" id="ref-for-dom-wakelocksentinel-onrelease-1"><code>onrelease</code></a>;</span>
};</span></code></pre>
        <p>
            A <a data-link-type="idl" data-lt="WakeLockSentinel" href="#dom-wakelocksentinel" class="internalDFN"
                id="ref-for-dom-wakelocksentinel-5"><code>WakeLockSentinel</code></a> object provides a handle to a <a
                href="#dfn-platform-wake-lock" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-platform-wake-lock-2">platform wake
                lock</a>, and it holds on to it until it is either manually released or
            until the underlying <a href="#dfn-platform-wake-lock" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-platform-wake-lock-3">platform wake lock</a> is released. Its
            existence keeps a <a href="#dfn-platform-wake-lock" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-platform-wake-lock-4">platform wake lock</a> for a given <a href="#dfn-wake-lock-type"
                class="internalDFN" data-link-type="dfn" id="ref-for-dfn-wake-lock-type-5">wake lock
                type</a> active, and releasing all <a data-link-type="idl" data-lt="WakeLockSentinel"
                href="#dom-wakelocksentinel" class="internalDFN"
                id="ref-for-dom-wakelocksentinel-6"><code>WakeLockSentinel</code></a> instances of a
            given <a href="#dfn-wake-lock-type" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-wake-lock-type-6">wake lock type</a> will cause the underlying <a
                href="#dfn-platform-wake-lock" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-platform-wake-lock-5">platform wake
                lock</a> to be released.
        </p>
        <div class="note" role="note" id="issue-container-generatedID-2">
            <div role="heading" class="note-title marker" id="h-note-2" aria-level="3"><span>Note</span></div>
            <aside class="">
                See <a href="#dfn-auto-releasing-wake-locks" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-auto-releasing-wake-locks-1">auto-releasing wake locks</a>, <a
                    href="#dfn-handling-document-loss-of-full-activity" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-handling-document-loss-of-full-activity-1">handling document loss of full
                    activity</a> and <a href="#dfn-handling-document-loss-of-visibility" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-handling-document-loss-of-visibility-1">handling document loss
                    of visibility</a> for
                circumstances under which a given wake lock may be released by the
                <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-user-agent-3">user
                    agent</a>.
            </aside>
        </div>
        <section id="internal-slots-0">
            <div class="header-wrapper">
                <h3 id="x9-1-internal-slots"><bdi class="secno">9.1 </bdi>
                    Internal slots
                </h3><a class="self-link" href="#internal-slots-0" aria-label="Permalink for Section 9.1"></a>
            </div>

            <p>
                <a data-link-type="idl" data-lt="WakeLockSentinel" href="#dom-wakelocksentinel" class="internalDFN"
                    id="ref-for-dom-wakelocksentinel-7"><code>WakeLockSentinel</code></a> instances are created with the
                following
                <a href="https://tc39.es/ecma262/multipage/#sec-object-internal-methods-and-internal-slots"
                    id="ref-for-index-term-internal-slots-1">internal
                    slots</a>:
            </p>
            <table class="simple">
                <thead>
                    <tr>
                        <th>
                            Internal slot
                        </th>
                        <th>
                            Initial value
                        </th>
                        <th>
                            Description (non-normative)
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <dfn data-idl="" data-dfn-for="WakeLockSentinel" data-noexport="" data-dfn-type="attribute"
                                id="dfn-released" tabindex="0" aria-haspopup="dialog">[[Released]]</dfn>
                        </td>
                        <td>
                            <code>false</code>
                        </td>
                        <td>
                            Whether the given <a data-link-type="idl" data-lt="WakeLockSentinel"
                                href="#dom-wakelocksentinel" class="internalDFN"
                                id="ref-for-dom-wakelocksentinel-8"><code>WakeLockSentinel</code></a> has been released.
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>
        <section id="the-released-attribute">
            <div class="header-wrapper">
                <h3 id="x9-2-the-released-attribute"><bdi class="secno">9.2 </bdi>
                    The <dfn data-export="" data-dfn-type="attribute" id="dom-wakelocksentinel-released"
                        data-idl="attribute" data-title="released" data-dfn-for="WakeLockSentinel" data-type="boolean"
                        data-lt="released" data-local-lt="WakeLockSentinel.released" tabindex="0"
                        aria-haspopup="dialog"><code>released</code></dfn> attribute
                </h3><a class="self-link" href="#the-released-attribute" aria-label="Permalink for Section 9.2"></a>
            </div>

            <p data-tests="wakelock-released.https.html">
                The <a data-link-type="idl" href="#dom-wakelocksentinel-released" class="internalDFN"
                    id="ref-for-dom-wakelocksentinel-released-2"><code>released</code></a> getter steps are to return
                <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#this"
                    id="ref-for-index-term-this-2">this</a>.<a data-link-type="attribute" data-lt="[[Released]]"
                    href="#dfn-released" class="internalDFN" id="ref-for-dfn-released-1"><code>[[Released]]</code></a>.
            </p>
            <div class="note" role="note" id="issue-container-generatedID-3">
                <div role="heading" class="note-title marker" id="h-note-3" aria-level="4"><span>Note</span></div>
                <aside class="">
                    Once a <a data-link-type="idl" data-lt="WakeLockSentinel" href="#dom-wakelocksentinel"
                        class="internalDFN" id="ref-for-dom-wakelocksentinel-9"><code>WakeLockSentinel</code></a> is
                    released,
                    <a data-link-type="idl" href="#dom-wakelocksentinel-released" class="internalDFN"
                        id="ref-for-dom-wakelocksentinel-released-3"><code>released</code></a> becomes
                    <code>true</code>, and the value never
                    changes again.
                </aside>
            </div>
        </section>
        <section id="the-type-attribute">
            <div class="header-wrapper">
                <h3 id="x9-3-the-type-attribute"><bdi class="secno">9.3 </bdi>
                    The <dfn data-export="" data-dfn-type="attribute" id="dom-wakelocksentinel-type"
                        data-idl="attribute" data-title="type" data-dfn-for="WakeLockSentinel" data-type="WakeLockType"
                        data-lt="type" data-local-lt="WakeLockSentinel.type" tabindex="0"
                        aria-haspopup="dialog"><code>type</code></dfn> attribute
                </h3><a class="self-link" href="#the-type-attribute" aria-label="Permalink for Section 9.3"></a>
            </div>

            <p>
                The <a data-link-type="idl" href="#dom-wakelocksentinel-type" class="internalDFN"
                    id="ref-for-dom-wakelocksentinel-type-3"><code>type</code></a> getter steps are to return <a
                    data-link-type="dfn|abstract-op" data-type="dfn" href="https://webidl.spec.whatwg.org/#this"
                    id="ref-for-index-term-this-3">this</a>'s
                <a href="#dfn-wake-lock-type" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-wake-lock-type-7">wake lock type</a>.
            </p>
        </section>
        <section id="the-release-method">
            <div class="header-wrapper">
                <h3 id="x9-4-the-release-method"><bdi class="secno">9.4 </bdi>
                    The <dfn data-export="" data-dfn-type="method" id="dom-wakelocksentinel-release"
                        data-idl="operation" data-title="release()" data-dfn-for="WakeLockSentinel" data-type="Promise"
                        data-lt="release()" data-local-lt="WakeLockSentinel.release|WakeLockSentinel.release()|release"
                        tabindex="0" aria-haspopup="dialog"><code>release()</code></dfn> method
                </h3><a class="self-link" href="#the-release-method" aria-label="Permalink for Section 9.4"></a>
            </div>

            <p data-tests="wakelock-onrelease.https.html">
                The <a data-link-type="idl" data-lt="release()" href="#dom-wakelocksentinel-release" class="internalDFN"
                    id="ref-for-dom-wakelocksentinel-release-2"><code>release</code></a><code>()</code> method steps
                are:
            </p>
            <ol class="algorithm">
                <li>If <a data-type="dfn" href="https://webidl.spec.whatwg.org/#this"
                        id="ref-for-index-term-this-4">this</a>'s <a data-link-type="attribute" data-lt="[[Released]]"
                        href="#dfn-released" class="internalDFN"
                        id="ref-for-dfn-released-2"><code>[[Released]]</code></a> is <code>false</code>,
                    then run <a href="#dfn-release-a-wake-lock" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-release-a-wake-lock-2">release a wake lock</a> with <var
                        data-type="WakeLockSentinel">lock</var> set
                    to <a data-type="dfn" href="https://webidl.spec.whatwg.org/#this"
                        id="ref-for-index-term-this-5">this</a> and <var data-type="WakeLockType">type</var> set to the
                    value of
                    <a data-type="dfn" href="https://webidl.spec.whatwg.org/#this"
                        id="ref-for-index-term-this-6">this</a>'s <a data-link-type="idl"
                        href="#dom-wakelocksentinel-type" class="internalDFN"
                        id="ref-for-dom-wakelocksentinel-type-4"><code>type</code></a> attribute.
                </li>
                <li>Return <a data-type="dfn" href="https://webidl.spec.whatwg.org/#a-promise-resolved-with"
                        id="ref-for-index-term-a-promise-resolved-with-1">a promise resolved with</a>
                    <code>undefined</code>.
                </li>
            </ol>
        </section>
        <section id="the-onrelease-attribute">
            <div class="header-wrapper">
                <h3 data-tests="wakelock-onrelease.https.html" id="x9-5-the-onrelease-attribute"><bdi class="secno">9.5
                    </bdi>
                    The <dfn data-export="" data-dfn-type="attribute" id="dom-wakelocksentinel-onrelease"
                        data-idl="attribute" data-title="onrelease" data-dfn-for="WakeLockSentinel"
                        data-type="EventHandler" data-lt="onrelease" data-local-lt="WakeLockSentinel.onrelease"
                        tabindex="0" aria-haspopup="dialog"><code>onrelease</code></dfn> attribute
                </h3><a class="self-link" href="#the-onrelease-attribute" aria-label="Permalink for Section 9.5"></a>
            </div>

            <p>
                The <a data-link-type="idl" href="#dom-wakelocksentinel-onrelease" class="internalDFN"
                    id="ref-for-dom-wakelocksentinel-onrelease-2"><code>onrelease</code></a> attribute is an <a
                    data-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes"
                    id="ref-for-index-term-event-handler-idl-attribute-1">event handler
                    IDL attribute</a> for the "<code>onrelease</code>" <a data-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers"
                    id="ref-for-index-term-event-handler-1">event
                    handler</a>, whose <a data-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type"
                    id="ref-for-index-term-event-handler-event-type-1">event handler event type</a> is
                "<dfn id="dfn-release" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn"><code>release</code></dfn>".
            </p>
            <p>
                It is used to notify scripts that a given <a data-link-type="idl" data-lt="WakeLockSentinel"
                    href="#dom-wakelocksentinel" class="internalDFN"
                    id="ref-for-dom-wakelocksentinel-10"><code>WakeLockSentinel</code></a>
                object's handle has been released, either due to the
                <a data-link-type="idl" data-lt="release()" href="#dom-wakelocksentinel-release" class="internalDFN"
                    id="ref-for-dom-wakelocksentinel-release-3"><code>release</code></a><code>()</code> method being
                called or because the
                wake lock was released by the <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-user-agent-4">user agent</a>.
            </p>
            <div class="note" role="note" id="issue-container-generatedID-4">
                <div role="heading" class="note-title marker" id="h-note-4" aria-level="4"><span>Note</span></div>
                <aside class="">
                    A <a data-link-type="idl" data-lt="WakeLockSentinel" href="#dom-wakelocksentinel"
                        class="internalDFN" id="ref-for-dom-wakelocksentinel-11"><code>WakeLockSentinel</code></a>
                    object's handle being released does not
                    necessarily mean the <a href="#dfn-platform-wake-lock" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-platform-wake-lock-6">platform wake lock</a> for a given <a
                        href="#dfn-wake-lock-type" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-wake-lock-type-8">wake
                        lock type</a> was released. That depends on the <a href="#dfn-platform-wake-lock"
                        class="internalDFN" data-link-type="dfn" id="ref-for-dfn-platform-wake-lock-7">platform wake
                        lock</a>'s <a data-link-type="attribute" data-lt="[[ActiveLocks]]" href="#dfn-activelocks"
                        class="internalDFN" id="ref-for-dfn-activelocks-4"><code>[[ActiveLocks]]</code></a> internal
                    slot. See <a href="#dfn-release-a-wake-lock" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-release-a-wake-lock-3">release
                        a wake lock</a>.
                </aside>
            </div>
            <div class="note" role="note" id="issue-container-generatedID-5">
                <div role="heading" class="note-title marker" id="h-note-5" aria-level="4"><span>Note</span></div>
                <aside class="">
                    <a href="#onrelease-example" data-matched-text="[[[#onrelease-example]]]"
                        class="box-ref">Example<bdi> 2</bdi></a> contains an example of how to use the
                    <a data-link-type="idl" href="#dom-wakelocksentinel-onrelease" class="internalDFN"
                        id="ref-for-dom-wakelocksentinel-onrelease-3"><code>onrelease</code></a> event handler.
                </aside>
            </div>
        </section>
        <section id="garbage-collection">
            <div class="header-wrapper">
                <h3 id="x9-6-garbage-collection"><bdi class="secno">9.6 </bdi>
                    Garbage collection
                </h3><a class="self-link" href="#garbage-collection" aria-label="Permalink for Section 9.6"></a>
            </div>

            <p>
                While a <a data-link-type="idl" data-lt="WakeLockSentinel" href="#dom-wakelocksentinel"
                    class="internalDFN" id="ref-for-dom-wakelocksentinel-12"><code>WakeLockSentinel</code></a> object
                has one or more event listeners
                registered for "<a href="#dfn-release" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-release-1"><code><code>release</code></code></a>", and the
                <a data-link-type="idl" data-lt="WakeLockSentinel" href="#dom-wakelocksentinel" class="internalDFN"
                    id="ref-for-dom-wakelocksentinel-13"><code>WakeLockSentinel</code></a> object hasn't already been
                released, there <em class="rfc2119">MUST</em>
                be a strong reference from the <a data-link-type="idl" data-lt="Window" data-type="interface"
                    href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"
                    id="ref-for-index-term-window-interface-1"><code>Window</code></a> object that the
                <a data-link-type="idl" data-lt="WakeLockSentinel" href="#dom-wakelocksentinel" class="internalDFN"
                    id="ref-for-dom-wakelocksentinel-14"><code>WakeLockSentinel</code></a> object's constructor was
                invoked from to the
                <a data-link-type="idl" data-lt="WakeLockSentinel" href="#dom-wakelocksentinel" class="internalDFN"
                    id="ref-for-dom-wakelocksentinel-15"><code>WakeLockSentinel</code></a> object itself.
            </p>
            <p>
                While there is a task queued by an <a data-link-type="idl" data-lt="WakeLockSentinel"
                    href="#dom-wakelocksentinel" class="internalDFN"
                    id="ref-for-dom-wakelocksentinel-16"><code>WakeLockSentinel</code></a> object on the
                <a href="#dfn-screen-wake-lock-task-source" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-screen-wake-lock-task-source-3">screen wake lock task source</a>, there <em
                    class="rfc2119">MUST</em> be a strong reference
                from the <a data-link-type="idl" data-lt="Window" data-type="interface"
                    href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"
                    id="ref-for-index-term-window-interface-2"><code>Window</code></a> object that the <a
                    data-link-type="idl" data-lt="WakeLockSentinel" href="#dom-wakelocksentinel" class="internalDFN"
                    id="ref-for-dom-wakelocksentinel-17"><code>WakeLockSentinel</code></a> object's
                constructor was invoked from to that <a data-link-type="idl" data-lt="WakeLockSentinel"
                    href="#dom-wakelocksentinel" class="internalDFN"
                    id="ref-for-dom-wakelocksentinel-18"><code>WakeLockSentinel</code></a> object.
            </p>
        </section>
    </section>
    <section data-dfn-for="WakeLockType" id="the-wakelocktype-enum">
        <div class="header-wrapper">
            <h2 id="x10-the-wakelocktype-enum"><bdi class="secno">10. </bdi>
                The <dfn data-export="" data-dfn-type="enum" id="dom-wakelocktype" data-idl="enum"
                    data-title="WakeLockType" data-dfn-for="" tabindex="0"
                    aria-haspopup="dialog"><code>WakeLockType</code></dfn> enum
            </h2><a class="self-link" href="#the-wakelocktype-enum" aria-label="Permalink for Section 10."></a>
        </div>

        <p>
            For the purpose of wake lock type description, this specification
            defines the following enumeration to represent <a data-link-type="dfn|abstract-op"
                href="#dfn-wake-lock-type" class="internalDFN" id="ref-for-dfn-wake-lock-type-9">wake lock types</a>:
        </p>
        <pre class="idl def"
            id="webidl-1682627699"><span class="idlHeader"><a class="self-link" href="#webidl-1682627699">WebIDL</a></span><code><span data-idl="" class="idlEnum" id="idl-def-wakelocktype" data-title="WakeLockType">enum <a class="internalDFN idlID" data-link-type="enum" href="#dom-wakelocktype" id="ref-for-dom-wakelocktype-4"><code>WakeLockType</code></a> { <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-wakelocktype-screen" id="ref-for-dom-wakelocktype-screen-3"><code>screen</code></a>"</span> };</span></code></pre>
        <dl>
            <dt>
                <dfn data-export="" data-dfn-type="enum-value" id="dom-wakelocktype-screen" data-idl="enum-value"
                    data-title="screen" data-dfn-for="WakeLockType" tabindex="0"
                    aria-haspopup="dialog"><code>screen</code></dfn>
            </dt>
            <dd>
                <a href="#dfn-screen-wake-lock" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-screen-wake-lock-2">Screen wake lock</a> type.
            </dd>
        </dl>
    </section>
    <section id="managing-wake-locks">
        <div class="header-wrapper">
            <h2 id="x11-managing-wake-locks"><bdi class="secno">11. </bdi>
                Managing Wake Locks
            </h2><a class="self-link" href="#managing-wake-locks" aria-label="Permalink for Section 11."></a>
        </div>

        <p>
            This section applies to each <a href="#dfn-wake-lock-type" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-wake-lock-type-10">wake lock type</a> equally and
            independently, unless a particular <a href="#dfn-wake-lock-type" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-wake-lock-type-11">wake lock type</a> is explicitly
            mentioned.
        </p>
        <p>
            The <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-user-agent-5">user
                agent</a> <dfn data-lt="acquire wake lock|acquire the wake lock|acquired|acquires the wake lock"
                id="dfn-acquire-wake-lock" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">acquires the wake
                lock</dfn> by requesting the underlying operating system to apply the
            lock. A possible return value of the request to the underlying
            operating system is not checked. In other words, <a href="#dfn-user-agent" class="internalDFN"
                data-link-type="dfn" id="ref-for-dfn-user-agent-6">user agents</a>
            <em class="rfc2119">MUST</em> treat wake lock acquisition as <strong>advisory-only</strong>.
        </p>
        <p>
            Conversely, the <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-user-agent-7">user agent</a> <dfn
                data-lt="release wake lock|release the wake lock|releases the wake lock" id="dfn-release-wake-lock"
                tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">releases the wake lock</dfn>
            by requesting the underlying operating system to no longer apply the
            wake lock. The lock is considered released only when the request to the
            operating system succeeds.
        </p>
        <p>
            The wake lock is <dfn data-lt="applicable wake lock|applicability|applicable" id="dfn-applicable-wake-lock"
                tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">applicable</dfn> if the state of
            the operating system permits application of the lock (e.g. there is
            sufficient battery charge).
        </p>
        <p>
            The <a href="#dfn-screen-wake-lock" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-screen-wake-lock-3">screen wake lock</a> <em class="rfc2119">MUST NOT</em> be <a
                href="#dfn-applicable-wake-lock" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-applicable-wake-lock-1">applicable</a> after the
            screen is manually switched off by the user until it is switched on
            again.
        </p>
        <div class="note" role="note" id="issue-container-generatedID-6">
            <div role="heading" class="note-title marker" id="h-note-6" aria-level="3"><span>Note</span></div>
            <aside class="">
                Whether the wake lock is applicable is a transient condition, e.g. when
                the battery charge is low but then the battery is recharged. So like
                the visibility requirement, this is part of automatic wake lock
                management and not part of the decision process whether to allow or
                deny the wake lock.
            </aside>
        </div>
        <section id="auto-releasing-wake-locks">
            <div class="header-wrapper">
                <h3 id="x11-1-auto-releasing-wake-locks"><bdi class="secno">11.1 </bdi>
                    <dfn id="dfn-auto-releasing-wake-locks" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">Auto-releasing wake locks</dfn>
                </h3><a class="self-link" href="#auto-releasing-wake-locks" aria-label="Permalink for Section 11.1"></a>
            </div>

            <p>
                A user agent may <a href="#dfn-release-a-wake-lock" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-release-a-wake-lock-4">release a wake lock</a> at any time. For example,
                when:
            </p>
            <ul>
                <li>It detects abnormal operation: such as infinite loops and tasks
                    exceeding imposed time limits (if any).
                </li>
                <li>Battery is considered low and discharging.
                </li>
                <li>The user turns on some kind of device power conservation mode.
                </li>
                <li>The operating system is configured to dim or turn off the screen
                    based on the user presence state.
                </li>
            </ul>
        </section>
        <section id="handling-document-loss-of-full-activity">
            <div class="header-wrapper">
                <h3 id="x11-2-handling-document-loss-of-full-activity"><bdi class="secno">11.2 </bdi>
                    <dfn id="dfn-handling-document-loss-of-full-activity" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">Handling document loss of full activity</dfn>
                </h3><a class="self-link" href="#handling-document-loss-of-full-activity"
                    aria-label="Permalink for Section 11.2"></a>
            </div>

            <p data-tests="wakelock-active-document.https.window.html">
                When a <a data-link-type="idl" data-lt="Document" data-type="interface"
                    href="https://dom.spec.whatwg.org/#document"
                    id="ref-for-index-term-document-interface-3"><code>Document</code></a> <var
                    data-type="Document">document</var> becomes no longer
                <a data-link-type="dfn|abstract-op" data-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active"
                    id="ref-for-index-term-fully-active-for-document-3">fully active</a>, the user agent must run these
                steps:
            </p>
            <ol class="algorithm">
                <li><a data-link-type="dfn|abstract-op" data-type="dfn"
                        href="https://infra.spec.whatwg.org/#list-iterate"
                        id="ref-for-index-term-for-each-for-list-2">For each</a> <var
                        data-type="WakeLockSentinel">lock</var> in
                    <var data-type="Document">document</var>.<a data-link-type="attribute" data-lt="[[ActiveLocks]]"
                        href="#dfn-activelocks" class="internalDFN"
                        id="ref-for-dfn-activelocks-5"><code>[[ActiveLocks]]</code></a>["<code>screen</code>"]:
                    <ol>
                        <li>Run <a href="#dfn-release-a-wake-lock" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-release-a-wake-lock-5">release a wake lock</a> with <var
                                data-type="Document">document</var>, <var data-type="WakeLockSentinel">lock</var>, and
                            "<a data-link-type="idl" href="#dom-wakelocktype-screen" class="internalDFN"
                                id="ref-for-dom-wakelocktype-screen-4"><code>screen</code></a>".
                        </li>
                    </ol>
                </li>
            </ol>
        </section>
        <section id="handling-document-loss-of-visibility">
            <div class="header-wrapper">
                <h3 id="x11-3-handling-document-loss-of-visibility"><bdi class="secno">11.3 </bdi>
                    <dfn id="dfn-handling-document-loss-of-visibility" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">Handling document loss of visibility</dfn>
                </h3><a class="self-link" href="#handling-document-loss-of-visibility"
                    aria-label="Permalink for Section 11.3"></a>
            </div>

            <p data-tests="wakelock-document-hidden-manual.https.html">
                This specification defines the following <a data-link-type="dfn|abstract-op" data-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/interaction.html#page-visibility-change-steps"
                    id="ref-for-index-term-page-visibility-change-steps-1">page visibility change steps</a> with <a
                    data-link-type="dfn|abstract-op" data-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/interaction.html#visibility-state"
                    id="ref-for-index-term-visibility-state-for-document-3">visibility state</a> <var>state</var> and
                <var data-type="Document">document</var>:
            </p>
            <ol class="algorithm">
                <li>If <var>state</var> is not "<code>hidden</code>", abort these steps.
                </li>
                <li><a data-link-type="dfn|abstract-op" data-type="dfn"
                        href="https://infra.spec.whatwg.org/#list-iterate"
                        id="ref-for-index-term-for-each-for-list-3">For each</a> <var
                        data-type="WakeLockSentinel">lock</var> in
                    <var data-type="Document">document</var>.<a data-link-type="attribute" data-lt="[[ActiveLocks]]"
                        href="#dfn-activelocks" class="internalDFN"
                        id="ref-for-dfn-activelocks-6"><code>[[ActiveLocks]]</code></a>["<code>screen</code>"]:
                    <ol>
                        <li>Run <a href="#dfn-release-a-wake-lock" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-release-a-wake-lock-6">release a wake lock</a> with <var
                                data-type="Document">document</var>, <var data-type="WakeLockSentinel">lock</var>, and
                            "<a data-link-type="idl" href="#dom-wakelocktype-screen" class="internalDFN"
                                id="ref-for-dom-wakelocktype-screen-5"><code>screen</code></a>".
                        </li>
                    </ol>
                </li>
            </ol>
        </section>
        <section id="acquire-wake-lock-algorithm">
            <div class="header-wrapper">
                <h3 id="x11-4-acquire-wake-lock-algorithm"><bdi class="secno">11.4 </bdi>
                    Acquire wake lock algorithm
                </h3><a class="self-link" href="#acquire-wake-lock-algorithm"
                    aria-label="Permalink for Section 11.4"></a>
            </div>

            <p>
                To <dfn id="dfn-acquire-a-wake-lock" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">acquire a
                    wake lock</dfn> for a given <var data-type="WakeLockType">type</var>,
                run these steps:
            </p>
            <ol class="algorithm">
                <li>If the wake lock for type <var data-type="WakeLockType">type</var> is not <a
                        href="#dfn-applicable-wake-lock" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-applicable-wake-lock-2">applicable</a>, abort
                    these steps.
                </li>
                <li>Ask the underlying operating system to <a href="#dfn-acquire-wake-lock" class="internalDFN"
                        data-link-type="dfn" id="ref-for-dfn-acquire-wake-lock-1">acquire the wake
                        lock</a> of type <var data-type="WakeLockType">type</var>.
                </li>
            </ol>
        </section>
        <section id="release-wake-lock-algorithm">
            <div class="header-wrapper">
                <h3 id="x11-5-release-wake-lock-algorithm"><bdi class="secno">11.5 </bdi>
                    Release wake lock algorithm
                </h3><a class="self-link" href="#release-wake-lock-algorithm"
                    aria-label="Permalink for Section 11.5"></a>
            </div>

            <p>
                To <dfn id="dfn-release-a-wake-lock" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">release a
                    wake lock</dfn> for a given <var data-type="Document">document</var>,
                <var data-type="WakeLockSentinel">lock</var>, and <var data-type="WakeLockType">type</var>, run these
                steps:
            </p>
            <ol class="algorithm">
                <li>If <var data-type="Document">document</var>.<a data-link-type="attribute" data-lt="[[ActiveLocks]]"
                        href="#dfn-activelocks" class="internalDFN"
                        id="ref-for-dfn-activelocks-7"><code>[[ActiveLocks]]</code></a>[<var
                        data-type="WakeLockType">type</var>] does not
                    contain <var data-type="WakeLockSentinel">lock</var>, abort these steps.
                </li>
                <li>Remove <var data-type="WakeLockSentinel">lock</var> from
                    <var data-type="Document">document</var>.<a data-link-type="attribute" data-lt="[[ActiveLocks]]"
                        href="#dfn-activelocks" class="internalDFN"
                        id="ref-for-dfn-activelocks-8"><code>[[ActiveLocks]]</code></a>[<var
                        data-type="WakeLockType">type</var>].
                </li>
                <li>If <var data-type="Document">document</var>.<a data-link-type="attribute" data-lt="[[ActiveLocks]]"
                        href="#dfn-activelocks" class="internalDFN"
                        id="ref-for-dfn-activelocks-9"><code>[[ActiveLocks]]</code></a>[<var
                        data-type="WakeLockType">type</var>] <a data-link-type="dfn|abstract-op" data-type="dfn"
                        href="https://infra.spec.whatwg.org/#list-is-empty"
                        id="ref-for-index-term-is-empty-for-list-2">is empty</a>, then run the following steps <a
                        data-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel"
                        id="ref-for-index-term-in-parallel-3">in parallel</a>:
                    <ol>
                        <li>Ask the underlying operating system to <a href="#dfn-release-wake-lock" class="internalDFN"
                                data-link-type="dfn" id="ref-for-dfn-release-wake-lock-1">release the wake
                                lock</a> of type <var data-type="WakeLockType">type</var> and let <var
                                data-type="boolean">success</var> be <code>true</code> if
                            the operation succeeded, or else <code>false</code>.
                        </li>
                        <li>If <var data-type="boolean">success</var> is <code>true</code> and <var
                                data-type="WakeLockType">type</var> is <code>"screen"</code> run the
                            following:
                            <ol>
                                <li>Reset the platform-specific inactivity timer after which
                                    the screen is actually turned off.
                                </li>
                            </ol>
                            <div class="note" role="note" id="issue-container-generatedID-7">
                                <div role="heading" class="note-title marker" id="h-note-7" aria-level="4">
                                    <span>Note</span>
                                </div>
                                <aside class="">
                                    Resetting the inactivity timer prevents the screen from going
                                    blank immediately after the wake lock is released.
                                </aside>
                            </div>
                        </li>
                    </ol>
                </li>
                <li>Set <var data-type="WakeLockSentinel">lock</var>'s <a data-link-type="attribute"
                        data-lt="[[Released]]" href="#dfn-released" class="internalDFN"
                        id="ref-for-dfn-released-3"><code>[[Released]]</code></a> to <code>true</code>.
                </li>
                <li>
                    <a data-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire"
                        id="ref-for-index-term-fire-an-event-1">Fire an event</a> named "<a href="#dfn-release"
                        class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-release-2"><code><code>release</code></code></a>" at <var
                        data-type="WakeLockSentinel">lock</var>.
                </li>
            </ol>
        </section>
    </section>
    <section id="security-and-privacy-considerations">
        <div class="header-wrapper">
            <h2 id="x12-security-and-privacy-considerations"><bdi class="secno">12. </bdi>
                Security and privacy considerations
            </h2><a class="self-link" href="#security-and-privacy-considerations"
                aria-label="Permalink for Section 12."></a>
        </div>

        <p>
            Screen wake locks can cause various device components - particularly
            the display - to operate at higher power levels than they otherwise
            would. This can lead to undesirable effects, such as preventing the
            device from automatically locking itself and faster battery depletion.
            Faster battery depletion is of particular concern for mobile devices,
            which often don't have a stationary power source readily available.
            Complete battery depletion at an unexpected time can lead to inability
            of the user to make or receive calls and use network services,
            including the emergency call service.
        </p>
        <p>
            Implementations <em class="rfc2119">MAY</em> ignore requests for screen wake lock if, for
            example, the battery capacity is low, or the user has put their device
            in a power-saving mode.
        </p>
        <p>
            It is <em class="rfc2119">RECOMMENDED</em> that a user agent provide some UI or indicator that
            allows the user to know when a screen wake lock is active. Providing
            such a UI could help end users to identify if a particular web
            application is having a negative energy impact on the device, and allow
            them to take action if so desired.
        </p>
    </section>
    <section id="examples" class="informative">
        <div class="header-wrapper">
            <h2 id="x13-examples"><bdi class="secno">13. </bdi>
                Examples
            </h2><a class="self-link" href="#examples" aria-label="Permalink for Section 13."></a>
        </div>
        <p><em>This section is non-normative.</em></p>

        <div class="example" id="example-acquires-and-releases-a-screen-wake-lock">
            <div class="marker">
                <a class="self-link" href="#example-acquires-and-releases-a-screen-wake-lock">Example<bdi>
                        1</bdi></a><span class="example-title">: Acquires and releases a screen wake lock</span>
            </div>
            <pre aria-busy="false"><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">tryKeepScreenAlive</span>(<span class="hljs-params">minutes</span>) {
  navigator.<span class="hljs-property">wakeLock</span>.<span class="hljs-title function_">request</span>(<span class="hljs-string">"screen"</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">lock</span> =&gt;</span> {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> lock.<span class="hljs-title function_">release</span>(), minutes * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>);
  });
}

<span class="hljs-title function_">tryKeepScreenAlive</span>(<span class="hljs-number">10</span>);</code></pre>
        </div>
        <p>
            This example allows the user to request a screen wake lock by clicking
            on a checkbox, but updates the checkbox checked state in case the wake
            lock state changes:
        </p>
        <div class="example" id="onrelease-example">
            <div class="marker">
                <a class="self-link" href="#onrelease-example">Example<bdi> 2</bdi></a>
            </div>
            <pre
                aria-busy="false"><code class="hljs js"><span class="hljs-keyword">const</span> checkbox = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">"input"</span>);
checkbox.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">"type"</span>, <span class="hljs-string">"checkbox"</span>);
<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(checkbox);

<span class="hljs-keyword">const</span> sentinel = <span class="hljs-keyword">await</span> navigator.<span class="hljs-property">wakeLock</span>.<span class="hljs-title function_">request</span>(<span class="hljs-string">"screen"</span>);
checkbox.<span class="hljs-property">checked</span> = !sentinel.<span class="hljs-property">released</span>;
sentinel.<span class="hljs-property">onrelease</span> = <span class="hljs-function">() =&gt;</span> checkbox.<span class="hljs-property">checked</span> = !sentinel.<span class="hljs-property">released</span>;</code></pre>
        </div>
        <p>
            In this example, two different wake lock requests are created and
            released independently:
        </p>
        <div class="example" id="example-3">
            <div class="marker">
                <a class="self-link" href="#example-3">Example<bdi> 3</bdi></a>
            </div>
            <pre aria-busy="false"><code class="hljs js"><span class="hljs-keyword">let</span> lock1 = <span class="hljs-keyword">await</span> navigator.<span class="hljs-property">wakeLock</span>.<span class="hljs-title function_">request</span>(<span class="hljs-string">"screen"</span>);
<span class="hljs-keyword">let</span> lock2 = <span class="hljs-keyword">await</span> navigator.<span class="hljs-property">wakeLock</span>.<span class="hljs-title function_">request</span>(<span class="hljs-string">"screen"</span>);

lock1.<span class="hljs-title function_">release</span>();
lock2.<span class="hljs-title function_">release</span>();</code></pre>
        </div>
    </section>
    <section id="conformance">
        <div class="header-wrapper">
            <h2 id="x14-conformance"><bdi class="secno">14. </bdi>Conformance</h2><a class="self-link"
                href="#conformance" aria-label="Permalink for Section 14."></a>
        </div>
        <p>As well as sections marked as non-normative, all authoring guidelines, diagrams, examples, and notes in this
            specification are non-normative. Everything else in this specification is normative.</p>
        <p>
            The key words <em class="rfc2119">MAY</em>, <em class="rfc2119">MUST</em>, <em class="rfc2119">MUST
                NOT</em>, and <em class="rfc2119">RECOMMENDED</em> in this document
            are to be interpreted as described in
            <a href="https://datatracker.ietf.org/doc/html/bcp14">BCP 14</a>
            [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc2119"
                    title="Key words for use in RFCs to Indicate Requirement Levels">RFC2119</a></cite>] [<cite><a
                    class="bibref" data-link-type="biblio" href="#bib-rfc8174"
                    title="Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words">RFC8174</a></cite>]
            when, and only when, they appear in all capitals, as shown here.
        </p>
        <p>
            This specification defines conformance criteria for a single product: a
            <dfn data-plurals="user agents" id="dfn-user-agent" tabindex="0" aria-haspopup="dialog"
                data-dfn-type="dfn">user agent</dfn> that implements the interfaces that it contains.
        </p>
    </section>
    <section class="appendix informative" id="acknowledgments">
        <div class="header-wrapper">
            <h2 id="a-acknowledgments"><bdi class="secno">A. </bdi>
                Acknowledgments
            </h2><a class="self-link" href="#acknowledgments" aria-label="Permalink for Appendix A."></a>
        </div>
        <p><em>This section is non-normative.</em></p>

        <p>
            We would like to offer our sincere thanks to Mounir Lamouri, Sergey
            Konstantinov, Matvey Larionov, Dominique Hazael-Massieux, Domenic
            Denicola, Thomas Steiner, Anne van Kesteren for their contributions to
            this work.
        </p>
    </section>
    <section class="appendix informative" id="changes">
        <div class="header-wrapper">
            <h2 id="b-changes"><bdi class="secno">B. </bdi>
                Changes
            </h2><a class="self-link" href="#changes" aria-label="Permalink for Appendix B."></a>
        </div>
        <p><em>This section is non-normative.</em></p>

        <p>
            This section documents the changes since previous publications.
        </p>
        <section id="changes-20171214">
            <div class="header-wrapper">
                <h3 id="b-1-changes-since-the-14-december-2017-cr"><bdi class="secno">B.1 </bdi>
                    Changes since the 14 December 2017 CR
                </h3><a class="self-link" href="#changes-20171214" aria-label="Permalink for Appendix B.1"></a>
            </div>

            <ul>
                <li>Convert the document to purely screen wake lock, and move system
                    lock to a new specification.
                </li>
                <li>Rewrite user-visible API.
                </li>
                <li>Add an <a data-type="dfn" href="https://infra.spec.whatwg.org/#if-aborted"
                        id="ref-for-index-term-if-aborted-1">if aborted</a> step to <code>WakeLock.request()</code>
                    to deal with hidden documents.
                </li>
                <li>Add an IDL Index.
                </li>
                <li>Remove duplicate normative statements.
                </li>
                <li>Modernize the examples.
                </li>
                <li>Use internal slots instead of prose.
                </li>
                <li>Add info on when the user agent may <a href="#dfn-release-a-wake-lock" class="internalDFN"
                        data-link-type="dfn" id="ref-for-dfn-release-a-wake-lock-7">release a wake lock</a>.
                </li>
                <li>Handle document visibility.
                </li>
                <li>Make <code>ScreenWakeLock</code> constructable.
                </li>
                <li>Integrate optional permission prompting.
                </li>
                <li>Handle loss of full activity, as well as running in workers.
                </li>
                <li>Rewrite the introduction section.
                </li>
                <li>Rename Feature Policy to Permissions Policy.
                </li>
                <li>Add <code>WakeLockSentinel.released</code>.
                </li>
                <li>Define a task source for tasks in this specification.
                </li>
            </ul>
        </section>
    </section>
    <section id="index" class="appendix">
        <div class="header-wrapper">
            <h2 id="c-index"><bdi class="secno">C. </bdi>Index</h2><a class="self-link" href="#index"
                aria-label="Permalink for Appendix C."></a>
        </div>
        <section id="index-defined-here">
            <div class="header-wrapper">
                <h3 id="c-1-terms-defined-by-this-specification"><bdi class="secno">C.1 </bdi>Terms defined by this
                    specification</h3><a class="self-link" href="#index-defined-here"
                    aria-label="Permalink for Appendix C.1"></a>
            </div>

            <ul class="index">
                <li>
                    <a class="index-term" href="#dfn-acquire-a-wake-lock">acquire a wake lock</a>
                    <span class="print-only">§11.4</span>
                </li>
                <li>
                    <a class="index-term" href="#dfn-acquire-wake-lock">acquires the wake lock</a>
                    <span class="print-only">§11.</span>
                </li>
                <li>
                    <a class="index-term" href="#dfn-activelocks"><code>[[ActiveLocks]]</code></a> internal slot for
                    <code>Document</code>
                    <span class="print-only">§6.1</span>
                </li>
                <li>
                    <a class="index-term" href="#dfn-applicable-wake-lock">applicable</a>
                    <span class="print-only">§11.</span>
                </li>
                <li>
                    <a class="index-term" href="#dfn-auto-releasing-wake-locks">Auto-releasing wake locks</a>
                    <span class="print-only">§11.1</span>
                </li>
                <li>
                    <a class="index-term" href="#dfn-deny-wake-lock">deny a wake lock</a>
                    <span class="print-only">§4.</span>
                </li>
                <li>
                    <a class="index-term" href="#dfn-handling-document-loss-of-full-activity">Handling document loss of
                        full activity</a>
                    <span class="print-only">§11.2</span>
                </li>
                <li>
                    <a class="index-term" href="#dfn-handling-document-loss-of-visibility">Handling document loss of
                        visibility</a>
                    <span class="print-only">§11.3</span>
                </li>
                <li>
                    <a class="index-term" href="#dom-wakelocksentinel-onrelease"><code>onrelease</code></a> attribute
                    for <code>WakeLockSentinel</code>
                    <span class="print-only">§9.5</span>
                </li>
                <li>
                    <a class="index-term" href="#dfn-platform-wake-lock">platform wake lock</a>
                    <span class="print-only">§5.</span>
                </li>
                <li>
                    <a class="index-term" href="#dfn-release">release</a>
                    <span class="print-only">§9.5</span>
                </li>
                <li>
                    <a class="index-term" href="#dfn-release-a-wake-lock">release a wake lock</a>
                    <span class="print-only">§11.5</span>
                </li>
                <li>
                    <a class="index-term" href="#dom-wakelocksentinel-release"><code>release()</code></a> method for
                    <code>WakeLockSentinel</code>
                    <span class="print-only">§9.4</span>
                </li>
                <li>
                    <a class="index-term" href="#dom-wakelocksentinel-released"><code>released</code></a> attribute for
                    <code>WakeLockSentinel</code>
                    <span class="print-only">§9.2</span>
                </li>
                <li>
                    <a class="index-term" href="#dfn-released"><code>[[Released]]</code></a> internal slot for
                    <code>WakeLockSentinel</code>
                    <span class="print-only">§9.1</span>
                </li>
                <li>
                    <a class="index-term" href="#dfn-release-wake-lock">releases the wake lock</a>
                    <span class="print-only">§11.</span>
                </li>
                <li>
                    <a class="index-term" href="#dom-wakelock-request"><code>request()</code></a> method for
                    <code>WakeLock</code>
                    <span class="print-only">§8.1</span>
                </li>
                <li>
                    <a class="index-term" href="#dom-wakelocktype-screen"><code>"screen"</code></a> enum value for
                    <code>WakeLockType</code>
                    <span class="print-only">§10.</span>
                </li>
                <li>
                    <a class="index-term" href="#dfn-screen-wake-lock">screen wake lock</a>
                    <span class="print-only">§2.</span>
                </li>
                <li>
                    <a class="index-term" href="#dfn-screen-wake-lock-permission-revocation-algorithm">Screen Wake Lock
                        permission revocation algorithm</a>
                    <span class="print-only">§4.2</span>
                </li>
                <li>
                    <a class="index-term" href="#dfn-screen-wake-lock-task-source">screen wake lock task source</a>
                    <span class="print-only">§5.</span>
                </li>
                <li>
                    <a class="index-term" href="#dom-wakelocksentinel-type"><code>type</code></a> attribute for
                    <code>WakeLockSentinel</code>
                    <span class="print-only">§9.3</span>
                </li>
                <li>
                    <a class="index-term" href="#dfn-user-agent">user agent</a>
                    <span class="print-only">§14.</span>
                </li>
                <li>
                    <a class="index-term" href="#dfn-wake-lock-type">wake lock type</a>
                    <span class="print-only">§2.</span>
                </li>
                <li>
                    <a class="index-term" href="#dom-navigator-wakelock"><code>wakeLock</code></a> attribute for
                    <code>Navigator</code>
                    <span class="print-only">§7.</span>
                </li>
                <li>
                    <a class="index-term" href="#dom-wakelock"><code>WakeLock</code></a> interface
                    <span class="print-only">§8.</span>
                </li>
                <li>
                    <a class="index-term" href="#dom-wakelocksentinel"><code>WakeLockSentinel</code></a> interface
                    <span class="print-only">§9.</span>
                </li>
                <li>
                    <a class="index-term" href="#dom-wakelocktype"><code>WakeLockType</code></a> enum
                    <span class="print-only">§10.</span>
                </li>
            </ul>
        </section>
        <section id="index-defined-elsewhere">
            <div class="header-wrapper">
                <h3 id="c-2-terms-defined-by-reference"><bdi class="secno">C.2 </bdi>Terms defined by reference</h3><a
                    class="self-link" href="#index-defined-elsewhere" aria-label="Permalink for Appendix C.2"></a>
            </div>

            <ul class="index">
                <li>
                    [<cite><a class="bibref" data-link-type="biblio" href="#bib-dom">DOM</a></cite>] defines the
                    following:
                    <ul>
                        <li>
                            <span class="index-term" data-href="https://dom.spec.whatwg.org/#document"
                                id="index-term-document-interface" tabindex="0"
                                aria-haspopup="dialog"><code>Document</code> interface</span>
                        </li>
                        <li>
                            <span class="index-term" data-href="https://dom.spec.whatwg.org/#eventtarget"
                                id="index-term-eventtarget-interface" tabindex="0"
                                aria-haspopup="dialog"><code>EventTarget</code> interface</span>
                        </li>
                        <li>
                            <span class="index-term" data-href="https://dom.spec.whatwg.org/#concept-event-fire"
                                id="index-term-fire-an-event" tabindex="0" aria-haspopup="dialog">Fire an event</span>
                        </li>
                    </ul>
                </li>
                <li>
                    [<cite><a class="bibref" data-link-type="biblio" href="#bib-ecmascript">ECMASCRIPT</a></cite>]
                    defines the following:
                    <ul>
                        <li>
                            <span class="index-term"
                                data-href="https://tc39.es/ecma262/multipage/#sec-object-internal-methods-and-internal-slots"
                                id="index-term-internal-slots" tabindex="0" aria-haspopup="dialog">internal slots</span>
                        </li>
                    </ul>
                </li>
                <li>
                    [<cite><a class="bibref" data-link-type="biblio" href="#bib-html">HTML</a></cite>] defines the
                    following:
                    <ul>
                        <li>
                            <span class="index-term"
                                data-href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#allowed-to-use"
                                id="index-term-allowed-to-use" tabindex="0" aria-haspopup="dialog">allowed to use</span>
                        </li>
                        <li>
                            <span class="index-term"
                                data-href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window"
                                id="index-term-associated-document" tabindex="0" aria-haspopup="dialog">associated
                                Document</span>
                        </li>
                        <li>
                            <span class="index-term"
                                data-href="https://html.spec.whatwg.org/multipage/webappapis.html#current-global-object"
                                id="index-term-current-global-object" tabindex="0" aria-haspopup="dialog">current global
                                object</span>
                        </li>
                        <li>
                            <span class="index-term"
                                data-href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers"
                                id="index-term-event-handler" tabindex="0" aria-haspopup="dialog">event handler</span>
                        </li>
                        <li>
                            <span class="index-term"
                                data-href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type"
                                id="index-term-event-handler-event-type" tabindex="0" aria-haspopup="dialog">event
                                handler event type</span>
                        </li>
                        <li>
                            <span class="index-term"
                                data-href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes"
                                id="index-term-event-handler-idl-attribute" tabindex="0" aria-haspopup="dialog">event
                                handler IDL attribute</span>
                        </li>
                        <li>
                            <span class="index-term"
                                data-href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"
                                id="index-term-eventhandler" tabindex="0"
                                aria-haspopup="dialog"><code>EventHandler</code></span>
                        </li>
                        <li>
                            <span class="index-term"
                                data-href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active"
                                id="index-term-fully-active-for-document" tabindex="0" aria-haspopup="dialog">fully
                                active (for <code>Document</code>)</span>
                        </li>
                        <li>
                            <span class="index-term"
                                data-href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel"
                                id="index-term-in-parallel" tabindex="0" aria-haspopup="dialog">in parallel</span>
                        </li>
                        <li>
                            <span class="index-term"
                                data-href="https://html.spec.whatwg.org/multipage/system-state.html#navigator"
                                id="index-term-navigator-interface" tabindex="0"
                                aria-haspopup="dialog"><code>Navigator</code> interface</span>
                        </li>
                        <li>
                            <span class="index-term"
                                data-href="https://html.spec.whatwg.org/multipage/interaction.html#page-visibility-change-steps"
                                id="index-term-page-visibility-change-steps" tabindex="0" aria-haspopup="dialog">page
                                visibility change steps</span>
                        </li>
                        <li>
                            <span class="index-term"
                                data-href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task"
                                id="index-term-queue-a-global-task" tabindex="0" aria-haspopup="dialog">Queue a global
                                task</span>
                        </li>
                        <li>
                            <span class="index-term"
                                data-href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global"
                                id="index-term-relevant-global-object" tabindex="0" aria-haspopup="dialog">relevant
                                global object</span>
                        </li>
                        <li>
                            <span class="index-term"
                                data-href="https://html.spec.whatwg.org/multipage/webappapis.html#task-source"
                                id="index-term-task-source" tabindex="0" aria-haspopup="dialog">task source</span>
                        </li>
                        <li>
                            <span class="index-term"
                                data-href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-task"
                                id="index-term-tasks" tabindex="0" aria-haspopup="dialog">tasks</span>
                        </li>
                        <li>
                            <span class="index-term"
                                data-href="https://html.spec.whatwg.org/multipage/interaction.html#visibility-state"
                                id="index-term-visibility-state-for-document" tabindex="0"
                                aria-haspopup="dialog">visibility state (for <code>Document</code>)</span>
                        </li>
                        <li>
                            <span class="index-term"
                                data-href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"
                                id="index-term-window-interface" tabindex="0" aria-haspopup="dialog"><code>Window</code>
                                interface</span>
                        </li>
                    </ul>
                </li>
                <li>
                    [<cite><a class="bibref" data-link-type="biblio" href="#bib-infra">INFRA</a></cite>] defines the
                    following:
                    <ul>
                        <li>
                            <span class="index-term" data-href="https://infra.spec.whatwg.org/#list-append"
                                id="index-term-append-for-list" tabindex="0" aria-haspopup="dialog">Append (for
                                <code>list</code>)</span>
                        </li>
                        <li>
                            <span class="index-term" data-href="https://infra.spec.whatwg.org/#list-iterate"
                                id="index-term-for-each-for-list" tabindex="0" aria-haspopup="dialog">For each (for
                                <code>list</code>)</span>
                        </li>
                        <li>
                            <span class="index-term" data-href="https://infra.spec.whatwg.org/#if-aborted"
                                id="index-term-if-aborted" tabindex="0" aria-haspopup="dialog">if aborted</span>
                        </li>
                        <li>
                            <span class="index-term" data-href="https://infra.spec.whatwg.org/#list-is-empty"
                                id="index-term-is-empty-for-list" tabindex="0" aria-haspopup="dialog">is empty (for
                                <code>list</code>)</span>
                        </li>
                        <li>
                            <span class="index-term" data-href="https://infra.spec.whatwg.org/#list"
                                id="index-term-lists" tabindex="0" aria-haspopup="dialog">lists</span>
                        </li>
                        <li>
                            <span class="index-term" data-href="https://infra.spec.whatwg.org/#ordered-map"
                                id="index-term-ordered-map" tabindex="0" aria-haspopup="dialog">ordered map</span>
                        </li>
                    </ul>
                </li>
                <li>
                    [<cite><a class="bibref" data-link-type="biblio" href="#bib-permissions">PERMISSIONS</a></cite>]
                    defines the following:
                    <ul>
                        <li>
                            <span class="index-term"
                                data-href="https://www.w3.org/TR/permissions/#dom-permissionstate-denied"
                                id="index-term-denied-for-permissionstate" tabindex="0"
                                aria-haspopup="dialog"><code>denied</code> (for <code>PermissionState</code>)</span>
                        </li>
                        <li>
                            <span class="index-term"
                                data-href="https://www.w3.org/TR/permissions/#dfn-permission-revocation-algorithm"
                                id="index-term-permission-revocation-algorithm-for-powerful-feature" tabindex="0"
                                aria-haspopup="dialog">permission revocation algorithm (for powerful feature)</span>
                        </li>
                        <li>
                            <span class="index-term" data-href="https://www.w3.org/TR/permissions/#dfn-powerful-feature"
                                id="index-term-powerful-feature" tabindex="0" aria-haspopup="dialog">powerful
                                feature</span>
                        </li>
                        <li>
                            <span class="index-term"
                                data-href="https://www.w3.org/TR/permissions/#dfn-request-permission-to-use"
                                id="index-term-requesting-permission-to-use" tabindex="0"
                                aria-haspopup="dialog">requesting permission to use</span>
                        </li>
                    </ul>
                </li>
                <li>
                    [<cite><a class="bibref" data-link-type="biblio"
                            href="#bib-permissions-policy">PERMISSIONS-POLICY</a></cite>] defines the following:
                    <ul>
                        <li>
                            <span class="index-term"
                                data-href="https://www.w3.org/TR/permissions-policy-1/#policy-controlled-feature-default-allowlist"
                                id="index-term-default-allowlist-for-policy-controlled-feature" tabindex="0"
                                aria-haspopup="dialog">default allowlist (for policy-controlled feature)</span>
                        </li>
                        <li>
                            <span class="index-term"
                                data-href="https://www.w3.org/TR/permissions-policy-1/#policy-controlled-feature"
                                id="index-term-policy-controlled-feature" tabindex="0"
                                aria-haspopup="dialog">policy-controlled feature</span>
                        </li>
                    </ul>
                </li>
                <li>
                    [<cite><a class="bibref" data-link-type="biblio" href="#bib-webidl">WEBIDL</a></cite>] defines the
                    following:
                    <ul>
                        <li>
                            <span class="index-term" data-href="https://webidl.spec.whatwg.org/#a-new-promise"
                                id="index-term-a-new-promise" tabindex="0" aria-haspopup="dialog">a new promise</span>
                        </li>
                        <li>
                            <span class="index-term" data-href="https://webidl.spec.whatwg.org/#a-promise-rejected-with"
                                id="index-term-a-promise-rejected-with" tabindex="0" aria-haspopup="dialog">a promise
                                rejected with</span>
                        </li>
                        <li>
                            <span class="index-term" data-href="https://webidl.spec.whatwg.org/#a-promise-resolved-with"
                                id="index-term-a-promise-resolved-with" tabindex="0" aria-haspopup="dialog">a promise
                                resolved with</span>
                        </li>
                        <li>
                            <span class="index-term" data-href="https://webidl.spec.whatwg.org/#idl-boolean"
                                id="index-term-boolean-type" tabindex="0" aria-haspopup="dialog"><code>boolean</code>
                                type</span>
                        </li>
                        <li>
                            <span class="index-term" data-href="https://webidl.spec.whatwg.org/#idl-DOMException"
                                id="index-term-domexception-interface" tabindex="0"
                                aria-haspopup="dialog"><code>DOMException</code> interface</span>
                        </li>
                        <li>
                            <span class="index-term" data-href="https://webidl.spec.whatwg.org/#Exposed"
                                id="index-term-exposed-extended-attribute" tabindex="0"
                                aria-haspopup="dialog"><code>[Exposed]</code> extended attribute</span>
                        </li>
                        <li>
                            <span class="index-term" data-href="https://webidl.spec.whatwg.org/#notallowederror"
                                id="index-term-notallowederror-exception" tabindex="0"
                                aria-haspopup="dialog"><code>NotAllowedError</code> exception</span>
                        </li>
                        <li>
                            <span class="index-term" data-href="https://webidl.spec.whatwg.org/#idl-promise"
                                id="index-term-promise-interface" tabindex="0"
                                aria-haspopup="dialog"><code>Promise</code> interface</span>
                        </li>
                        <li>
                            <span class="index-term" data-href="https://webidl.spec.whatwg.org/#SameObject"
                                id="index-term-sameobject-extended-attribute" tabindex="0"
                                aria-haspopup="dialog"><code>[SameObject]</code> extended attribute</span>
                        </li>
                        <li>
                            <span class="index-term" data-href="https://webidl.spec.whatwg.org/#SecureContext"
                                id="index-term-securecontext-extended-attribute" tabindex="0"
                                aria-haspopup="dialog"><code>[SecureContext]</code> extended attribute</span>
                        </li>
                        <li>
                            <span class="index-term" data-href="https://webidl.spec.whatwg.org/#this"
                                id="index-term-this" tabindex="0" aria-haspopup="dialog">this</span>
                        </li>
                        <li>
                            <span class="index-term" data-href="https://webidl.spec.whatwg.org/#idl-undefined"
                                id="index-term-undefined-type" tabindex="0"
                                aria-haspopup="dialog"><code>undefined</code> type</span>
                        </li>
                    </ul>
                </li>
            </ul>
        </section>
    </section>
    <section id="idl-index" class="appendix">
        <div class="header-wrapper">
            <h2 id="d-idl-index"><bdi class="secno">D. </bdi>IDL Index</h2><a class="self-link" href="#idl-index"
                aria-label="Permalink for Appendix D."></a>
        </div>
        <pre class="idl def"
            id="actual-idl-index"><span class="idlHeader"><a class="self-link" href="#actual-idl-index">WebIDL</a></span><code><span data-idl="" class="idlInterface" data-title="Navigator">[<span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext" id="ref-for-index-term-securecontext-extended-attribute-4">SecureContext</a></span>]
partial interface <a data-idl="partial" data-link-type="interface" data-title="Navigator" class="idlID" data-dfn-for="Navigator" data-type="interface" href="https://html.spec.whatwg.org/multipage/system-state.html#navigator" id="ref-for-index-term-navigator-interface-2">Navigator</a> {<span data-idl="" class="idlAttribute" data-title="wakeLock" data-dfn-for="Navigator">
  [<span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject" id="ref-for-index-term-sameobject-extended-attribute-2">SameObject</a></span>] readonly attribute<span class="idlType"> <a data-link-type="idl" href="#dom-wakelock" class="internalDFN" id="ref-for-dom-wakelock-4"><code>WakeLock</code></a></span> <dfn data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="wakeLock" data-dfn-for="Navigator" data-type="WakeLock" data-lt="wakeLock" data-local-lt="Navigator.wakeLock" class="idlName"><code>wakeLock</code></dfn>;</span>
};</span>

<span data-idl="" class="idlInterface" data-title="WakeLock">[<span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext" id="ref-for-index-term-securecontext-extended-attribute-5">SecureContext</a></span>, <span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-index-term-exposed-extended-attribute-3">Exposed</a>=(Window)</span>]
interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-wakelock" id="ref-for-dom-wakelock-5"><code>WakeLock</code></a> {<span data-idl="" class="idlMethod" data-title="request" data-dfn-for="WakeLock"><span class="idlType">
  <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-index-term-promise-interface-3">Promise</a>&lt;<a data-link-type="idl" href="#dom-wakelocksentinel" class="internalDFN" id="ref-for-dom-wakelocksentinel-19"><code>WakeLockSentinel</code></a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-wakelock-request" id="ref-for-dom-wakelock-request-2"><code>request</code></a>(optional<span class="idlType"> <a data-link-type="idl" href="#dom-wakelocktype" class="internalDFN" id="ref-for-dom-wakelocktype-5"><code>WakeLockType</code></a></span> <span class="idlParamName">type</span> = "screen");</span>
};</span>

<span data-idl="" class="idlInterface" data-title="WakeLockSentinel">[<span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext" id="ref-for-index-term-securecontext-extended-attribute-6">SecureContext</a></span>, <span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-index-term-exposed-extended-attribute-4">Exposed</a>=(Window)</span>]
interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-wakelocksentinel" id="ref-for-dom-wakelocksentinel-20"><code>WakeLockSentinel</code></a> : <span class="idlSuperclass"><a data-link-type="idl" data-type="interface" href="https://dom.spec.whatwg.org/#eventtarget" id="ref-for-index-term-eventtarget-interface-2">EventTarget</a></span> {<span data-idl="" class="idlAttribute" data-title="released" data-dfn-for="WakeLockSentinel">
  readonly attribute<span class="idlType"> <a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-index-term-boolean-type-2">boolean</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-wakelocksentinel-released" id="ref-for-dom-wakelocksentinel-released-4"><code>released</code></a>;</span><span data-idl="" class="idlAttribute" data-title="type" data-dfn-for="WakeLockSentinel">
  readonly attribute<span class="idlType"> <a data-link-type="idl" href="#dom-wakelocktype" class="internalDFN" id="ref-for-dom-wakelocktype-6"><code>WakeLockType</code></a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-wakelocksentinel-type" id="ref-for-dom-wakelocksentinel-type-5"><code>type</code></a>;</span><span data-idl="" class="idlMethod" data-title="release" data-dfn-for="WakeLockSentinel"><span class="idlType">
  <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-index-term-promise-interface-4">Promise</a>&lt;<a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-index-term-undefined-type-2">undefined</a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-wakelocksentinel-release" id="ref-for-dom-wakelocksentinel-release-4"><code>release</code></a>();</span><span data-idl="" class="idlAttribute" data-title="onrelease" data-dfn-for="WakeLockSentinel">
  attribute<span class="idlType"> <a data-link-type="idl" data-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" id="ref-for-index-term-eventhandler-2">EventHandler</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-wakelocksentinel-onrelease" id="ref-for-dom-wakelocksentinel-onrelease-4"><code>onrelease</code></a>;</span>
};</span>

<span data-idl="" class="idlEnum" data-title="WakeLockType">enum <a class="internalDFN idlID" data-link-type="enum" href="#dom-wakelocktype" id="ref-for-dom-wakelocktype-7"><code>WakeLockType</code></a> { <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-wakelocktype-screen" id="ref-for-dom-wakelocktype-screen-6"><code>screen</code></a>"</span> };</span></code></pre>
    </section>


    <section id="references" class="appendix">
        <div class="header-wrapper">
            <h2 id="e-references"><bdi class="secno">E. </bdi>References</h2><a class="self-link" href="#references"
                aria-label="Permalink for Appendix E."></a>
        </div>
        <section id="normative-references">
            <div class="header-wrapper">
                <h3 id="e-1-normative-references"><bdi class="secno">E.1 </bdi>Normative references</h3><a
                    class="self-link" href="#normative-references" aria-label="Permalink for Appendix E.1"></a>
            </div>

            <dl class="bibliography">
                <dt id="bib-dom">[dom]</dt>
                <dd>
                    <a href="https://dom.spec.whatwg.org/"><cite>DOM Standard</cite></a>. Anne van Kesteren. WHATWG.
                    Living Standard. URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
                </dd>
                <dt id="bib-ecmascript">[ECMASCRIPT]</dt>
                <dd>
                    <a href="https://tc39.es/ecma262/multipage/"><cite>ECMAScript Language Specification</cite></a>.
                    Ecma International. URL: <a
                        href="https://tc39.es/ecma262/multipage/">https://tc39.es/ecma262/multipage/</a>
                </dd>
                <dt id="bib-html">[html]</dt>
                <dd>
                    <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML Standard</cite></a>. Anne van Kesteren;
                    Domenic Denicola; Dominic Farolino; Ian Hickson; Philip Jägenstedt; Simon Pieters. WHATWG. Living
                    Standard. URL: <a
                        href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
                </dd>
                <dt id="bib-infra">[infra]</dt>
                <dd>
                    <a href="https://infra.spec.whatwg.org/"><cite>Infra Standard</cite></a>. Anne van Kesteren; Domenic
                    Denicola. WHATWG. Living Standard. URL: <a
                        href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
                </dd>
                <dt id="bib-permissions">[PERMISSIONS]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/permissions/"><cite>Permissions</cite></a>. Marcos Caceres; Mike
                    Taylor. W3C. 19 March 2024. W3C Working Draft. URL: <a
                        href="https://www.w3.org/TR/permissions/">https://www.w3.org/TR/permissions/</a>
                </dd>
                <dt id="bib-permissions-policy">[PERMISSIONS-POLICY]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/permissions-policy-1/"><cite>Permissions Policy</cite></a>. Ian
                    Clelland. W3C. 25 September 2024. W3C Working Draft. URL: <a
                        href="https://www.w3.org/TR/permissions-policy-1/">https://www.w3.org/TR/permissions-policy-1/</a>
                </dd>
                <dt id="bib-rfc2119">[RFC2119]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc2119"><cite>Key words for use in RFCs to Indicate
                            Requirement Levels</cite></a>. S. Bradner. IETF. March 1997. Best Current Practice. URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc2119">https://www.rfc-editor.org/rfc/rfc2119</a>
                </dd>
                <dt id="bib-rfc8174">[RFC8174]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc8174"><cite>Ambiguity of Uppercase vs Lowercase in RFC
                            2119 Key Words</cite></a>. B. Leiba. IETF. May 2017. Best Current Practice. URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc8174">https://www.rfc-editor.org/rfc/rfc8174</a>
                </dd>
                <dt id="bib-webidl">[WEBIDL]</dt>
                <dd>
                    <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL Standard</cite></a>. Edgar Chen; Timothy Gu.
                    WHATWG. Living Standard. URL: <a
                        href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
                </dd>
            </dl>
        </section>
        <section id="informative-references">
            <div class="header-wrapper">
                <h3 id="e-2-informative-references"><bdi class="secno">E.2 </bdi>Informative references</h3><a
                    class="self-link" href="#informative-references" aria-label="Permalink for Appendix E.2"></a>
            </div>

            <dl class="bibliography">
                <dt id="bib-wake-lock-use-cases">[wake-lock-use-cases]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/wake-lock-use-cases/"><cite>Wake Lock: Use cases</cite></a>. Marcos
                    Caceres; Natasha Rooney; Dominique Hazaël-Massieux. W3C. 14 August 2014. W3C Working Group Note.
                    URL: <a
                        href="https://www.w3.org/TR/wake-lock-use-cases/">https://www.w3.org/TR/wake-lock-use-cases/</a>
                </dd>
            </dl>
        </section>
    </section>
    <p role="navigation" id="back-to-top">
        <a href="#title"><abbr title="Back to Top">↑</abbr></a>
    </p>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-wake-lock-type"
        aria-label="Links in this document to definition: wake lock type">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-wake-lock-type"
                aria-label="Permalink for definition: wake lock type. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-wake-lock-type-1" title="§ 2. Wake Locks">§ 2. Wake Locks</a>
            </li>
            <li>
                <a href="#ref-for-dfn-wake-lock-type-2" title="§ 4. Permissions and user prompts">§ 4. Permissions and
                    user prompts</a>
            </li>
            <li>
                <a href="#ref-for-dfn-wake-lock-type-3" title="§ 6.1 Internal slots">§ 6.1 Internal slots</a> <a
                    href="#ref-for-dfn-wake-lock-type-4" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-wake-lock-type-5" title="§ 9. The WakeLockSentinel interface">§ 9. The
                    WakeLockSentinel interface</a> <a href="#ref-for-dfn-wake-lock-type-6" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-wake-lock-type-7" title="§ 9.3 The type attribute">§ 9.3 The type attribute</a>
            </li>
            <li>
                <a href="#ref-for-dfn-wake-lock-type-8"
                    title="§ 9.5 The onrelease attribute tests: 1 wakelock-onrelease 🔒">§ 9.5 The onrelease attribute
                    tests: 1 wakelock-onrelease 🔒</a>
            </li>
            <li>
                <a href="#ref-for-dfn-wake-lock-type-9" title="§ 10. The WakeLockType enum">§ 10. The WakeLockType
                    enum</a>
            </li>
            <li>
                <a href="#ref-for-dfn-wake-lock-type-10" title="§ 11. Managing Wake Locks">§ 11. Managing Wake Locks</a>
                <a href="#ref-for-dfn-wake-lock-type-11" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-screen-wake-lock"
        aria-label="Links in this document to definition: screen wake lock">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-screen-wake-lock"
                aria-label="Permalink for definition: screen wake lock. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-screen-wake-lock-1" title="§ 8. The WakeLock interface">§ 8. The WakeLock
                    interface</a>
            </li>
            <li>
                <a href="#ref-for-dfn-screen-wake-lock-2" title="§ 10. The WakeLockType enum">§ 10. The WakeLockType
                    enum</a>
            </li>
            <li>
                <a href="#ref-for-dfn-screen-wake-lock-3" title="§ 11. Managing Wake Locks">§ 11. Managing Wake
                    Locks</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-deny-wake-lock"
        aria-label="Links in this document to definition: deny a wake lock">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-deny-wake-lock"
                aria-label="Permalink for definition: deny a wake lock. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-deny-wake-lock-1" title="§ 8.1 The request() method">§ 8.1 The request()
                    method</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-screen-wake-lock-permission-revocation-algorithm"
        aria-label="Links in this document to definition: Screen Wake Lock permission revocation algorithm">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-screen-wake-lock-permission-revocation-algorithm"
                aria-label="Permalink for definition: Screen Wake Lock permission revocation algorithm. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-screen-wake-lock-permission-revocation-algorithm-1"
                    title="§ 4. Permissions and user prompts">§ 4. Permissions and user prompts</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-screen-wake-lock-task-source"
        aria-label="Links in this document to definition: screen wake lock task source">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-screen-wake-lock-task-source"
                aria-label="Permalink for definition: screen wake lock task source. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-screen-wake-lock-task-source-1" title="§ 8.1 The request() method">§ 8.1 The
                    request() method</a> <a href="#ref-for-dfn-screen-wake-lock-task-source-2"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-screen-wake-lock-task-source-3" title="§ 9.6 Garbage collection">§ 9.6 Garbage
                    collection</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-platform-wake-lock"
        aria-label="Links in this document to definition: platform wake lock">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-platform-wake-lock"
                aria-label="Permalink for definition: platform wake lock. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-platform-wake-lock-1" title="§ 5. Concepts">§ 5. Concepts</a>
            </li>
            <li>
                <a href="#ref-for-dfn-platform-wake-lock-2" title="§ 9. The WakeLockSentinel interface">§ 9. The
                    WakeLockSentinel interface</a> <a href="#ref-for-dfn-platform-wake-lock-3"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-platform-wake-lock-4" title="Reference 3">(3)</a>
                <a href="#ref-for-dfn-platform-wake-lock-5" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-platform-wake-lock-6"
                    title="§ 9.5 The onrelease attribute tests: 1 wakelock-onrelease 🔒">§ 9.5 The onrelease attribute
                    tests: 1 wakelock-onrelease 🔒</a> <a href="#ref-for-dfn-platform-wake-lock-7"
                    title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-activelocks"
        aria-label="Links in this document to definition: [[ActiveLocks]]">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-activelocks"
                aria-label="Permalink for definition: [[ActiveLocks]]. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-activelocks-1" title="§ 4.2 Permission algorithms">§ 4.2 Permission algorithms</a>
            </li>
            <li>
                <a href="#ref-for-dfn-activelocks-2" title="§ 8.1 The request() method">§ 8.1 The request() method</a>
                <a href="#ref-for-dfn-activelocks-3" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-activelocks-4"
                    title="§ 9.5 The onrelease attribute tests: 1 wakelock-onrelease 🔒">§ 9.5 The onrelease attribute
                    tests: 1 wakelock-onrelease 🔒</a>
            </li>
            <li>
                <a href="#ref-for-dfn-activelocks-5" title="§ 11.2 Handling document loss of full activity">§ 11.2
                    Handling document loss of full activity</a>
            </li>
            <li>
                <a href="#ref-for-dfn-activelocks-6" title="§ 11.3 Handling document loss of visibility">§ 11.3 Handling
                    document loss of visibility</a>
            </li>
            <li>
                <a href="#ref-for-dfn-activelocks-7" title="§ 11.5 Release wake lock algorithm">§ 11.5 Release wake lock
                    algorithm</a> <a href="#ref-for-dfn-activelocks-8" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-activelocks-9" title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-navigator-wakelock"
        aria-label="Links in this document to definition: wakeLock">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-navigator-wakelock"
                aria-label="Permalink for definition: wakeLock. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-wakelock"
        aria-label="Links in this document to definition: WakeLock">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-wakelock"
                aria-label="Permalink for definition: WakeLock. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1156448766">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-wakelock-1" title="§ 7. Extensions to the Navigator interface">§ 7. Extensions to
                    the Navigator interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-wakelock-2" title="§ 8. The WakeLock interface">§ 8. The WakeLock interface</a> <a
                    href="#ref-for-dom-wakelock-3" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-wakelock-4" title="§ D. IDL Index">§ D. IDL Index</a> <a
                    href="#ref-for-dom-wakelock-5" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-wakelock-request"
        aria-label="Links in this document to definition: request()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-wakelock-request"
                aria-label="Permalink for definition: request(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1156448766">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-wakelock-request-1" title="§ 8. The WakeLock interface">§ 8. The WakeLock
                    interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-wakelock-request-2" title="§ D. IDL Index">§ D. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-wakelocksentinel"
        aria-label="Links in this document to definition: WakeLockSentinel">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-wakelocksentinel"
                aria-label="Permalink for definition: WakeLockSentinel. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1858612967">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-wakelocksentinel-1" title="§ 6.1 Internal slots">§ 6.1 Internal slots</a>
            </li>
            <li>
                <a href="#ref-for-dom-wakelocksentinel-2" title="§ 8. The WakeLock interface">§ 8. The WakeLock
                    interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-wakelocksentinel-3" title="§ 8.1 The request() method">§ 8.1 The request()
                    method</a>
            </li>
            <li>
                <a href="#ref-for-dom-wakelocksentinel-4" title="§ 9. The WakeLockSentinel interface">§ 9. The
                    WakeLockSentinel interface</a> <a href="#ref-for-dom-wakelocksentinel-5" title="Reference 2">(2)</a>
                <a href="#ref-for-dom-wakelocksentinel-6" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-wakelocksentinel-7" title="§ 9.1 Internal slots">§ 9.1 Internal slots</a> <a
                    href="#ref-for-dom-wakelocksentinel-8" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-wakelocksentinel-9" title="§ 9.2 The released attribute">§ 9.2 The released
                    attribute</a>
            </li>
            <li>
                <a href="#ref-for-dom-wakelocksentinel-10"
                    title="§ 9.5 The onrelease attribute tests: 1 wakelock-onrelease 🔒">§ 9.5 The onrelease attribute
                    tests: 1 wakelock-onrelease 🔒</a> <a href="#ref-for-dom-wakelocksentinel-11"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-wakelocksentinel-12" title="§ 9.6 Garbage collection">§ 9.6 Garbage collection</a>
                <a href="#ref-for-dom-wakelocksentinel-13" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-wakelocksentinel-14" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-wakelocksentinel-15" title="Reference 4">(4)</a> <a
                    href="#ref-for-dom-wakelocksentinel-16" title="Reference 5">(5)</a> <a
                    href="#ref-for-dom-wakelocksentinel-17" title="Reference 6">(6)</a> <a
                    href="#ref-for-dom-wakelocksentinel-18" title="Reference 7">(7)</a>
            </li>
            <li>
                <a href="#ref-for-dom-wakelocksentinel-19" title="§ D. IDL Index">§ D. IDL Index</a> <a
                    href="#ref-for-dom-wakelocksentinel-20" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-released"
        aria-label="Links in this document to definition: [[Released]]">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-released"
                aria-label="Permalink for definition: [[Released]]. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-released-1" title="§ 9.2 The released attribute">§ 9.2 The released attribute</a>
            </li>
            <li>
                <a href="#ref-for-dfn-released-2" title="§ 9.4 The release() method">§ 9.4 The release() method</a>
            </li>
            <li>
                <a href="#ref-for-dfn-released-3" title="§ 11.5 Release wake lock algorithm">§ 11.5 Release wake lock
                    algorithm</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-wakelocksentinel-released"
        aria-label="Links in this document to definition: released">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-wakelocksentinel-released"
                aria-label="Permalink for definition: released. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1858612967">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-wakelocksentinel-released-1" title="§ 9. The WakeLockSentinel interface">§ 9. The
                    WakeLockSentinel interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-wakelocksentinel-released-2" title="§ 9.2 The released attribute">§ 9.2 The
                    released attribute</a> <a href="#ref-for-dom-wakelocksentinel-released-3"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-wakelocksentinel-released-4" title="§ D. IDL Index">§ D. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-wakelocksentinel-type"
        aria-label="Links in this document to definition: type">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-wakelocksentinel-type"
                aria-label="Permalink for definition: type. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1858612967">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-wakelocksentinel-type-1" title="§ 8.1 The request() method">§ 8.1 The request()
                    method</a>
            </li>
            <li>
                <a href="#ref-for-dom-wakelocksentinel-type-2" title="§ 9. The WakeLockSentinel interface">§ 9. The
                    WakeLockSentinel interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-wakelocksentinel-type-3" title="§ 9.3 The type attribute">§ 9.3 The type
                    attribute</a>
            </li>
            <li>
                <a href="#ref-for-dom-wakelocksentinel-type-4" title="§ 9.4 The release() method">§ 9.4 The release()
                    method</a>
            </li>
            <li>
                <a href="#ref-for-dom-wakelocksentinel-type-5" title="§ D. IDL Index">§ D. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-wakelocksentinel-release"
        aria-label="Links in this document to definition: release()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-wakelocksentinel-release"
                aria-label="Permalink for definition: release(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1858612967">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-wakelocksentinel-release-1" title="§ 9. The WakeLockSentinel interface">§ 9. The
                    WakeLockSentinel interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-wakelocksentinel-release-2" title="§ 9.4 The release() method">§ 9.4 The release()
                    method</a>
            </li>
            <li>
                <a href="#ref-for-dom-wakelocksentinel-release-3"
                    title="§ 9.5 The onrelease attribute tests: 1 wakelock-onrelease 🔒">§ 9.5 The onrelease attribute
                    tests: 1 wakelock-onrelease 🔒</a>
            </li>
            <li>
                <a href="#ref-for-dom-wakelocksentinel-release-4" title="§ D. IDL Index">§ D. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-wakelocksentinel-onrelease"
        aria-label="Links in this document to definition: onrelease">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-wakelocksentinel-onrelease"
                aria-label="Permalink for definition: onrelease. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1858612967">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-wakelocksentinel-onrelease-1" title="§ 9. The WakeLockSentinel interface">§ 9. The
                    WakeLockSentinel interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-wakelocksentinel-onrelease-2"
                    title="§ 9.5 The onrelease attribute tests: 1 wakelock-onrelease 🔒">§ 9.5 The onrelease attribute
                    tests: 1 wakelock-onrelease 🔒</a> <a href="#ref-for-dom-wakelocksentinel-onrelease-3"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-wakelocksentinel-onrelease-4" title="§ D. IDL Index">§ D. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-release"
        aria-label="Links in this document to definition: release">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-release"
                aria-label="Permalink for definition: release. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-release-1" title="§ 9.6 Garbage collection">§ 9.6 Garbage collection</a>
            </li>
            <li>
                <a href="#ref-for-dfn-release-2" title="§ 11.5 Release wake lock algorithm">§ 11.5 Release wake lock
                    algorithm</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-wakelocktype"
        aria-label="Links in this document to definition: WakeLockType">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-wakelocktype"
                aria-label="Permalink for definition: WakeLockType. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1682627699">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-wakelocktype-1" title="§ 2. Wake Locks">§ 2. Wake Locks</a>
            </li>
            <li>
                <a href="#ref-for-dom-wakelocktype-2" title="§ 8. The WakeLock interface">§ 8. The WakeLock
                    interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-wakelocktype-3" title="§ 9. The WakeLockSentinel interface">§ 9. The
                    WakeLockSentinel interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-wakelocktype-4" title="§ 10. The WakeLockType enum">§ 10. The WakeLockType
                    enum</a>
            </li>
            <li>
                <a href="#ref-for-dom-wakelocktype-5" title="§ D. IDL Index">§ D. IDL Index</a> <a
                    href="#ref-for-dom-wakelocktype-6" title="Reference 2">(2)</a> <a href="#ref-for-dom-wakelocktype-7"
                    title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-wakelocktype-screen"
        aria-label="Links in this document to definition: screen">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-wakelocktype-screen"
                aria-label="Permalink for definition: screen. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-1682627699">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-wakelocktype-screen-1" title="§ 4.2 Permission algorithms">§ 4.2 Permission
                    algorithms</a>
            </li>
            <li>
                <a href="#ref-for-dom-wakelocktype-screen-2" title="§ 8.1 The request() method">§ 8.1 The request()
                    method</a>
            </li>
            <li>
                <a href="#ref-for-dom-wakelocktype-screen-3" title="§ 10. The WakeLockType enum">§ 10. The WakeLockType
                    enum</a>
            </li>
            <li>
                <a href="#ref-for-dom-wakelocktype-screen-4" title="§ 11.2 Handling document loss of full activity">§
                    11.2 Handling document loss of full activity</a>
            </li>
            <li>
                <a href="#ref-for-dom-wakelocktype-screen-5" title="§ 11.3 Handling document loss of visibility">§ 11.3
                    Handling document loss of visibility</a>
            </li>
            <li>
                <a href="#ref-for-dom-wakelocktype-screen-6" title="§ D. IDL Index">§ D. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-acquire-wake-lock"
        aria-label="Links in this document to definition: acquires the wake lock">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-acquire-wake-lock"
                aria-label="Permalink for definition: acquires the wake lock. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-acquire-wake-lock-1" title="§ 11.4 Acquire wake lock algorithm">§ 11.4 Acquire
                    wake lock algorithm</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-release-wake-lock"
        aria-label="Links in this document to definition: releases the wake lock">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-release-wake-lock"
                aria-label="Permalink for definition: releases the wake lock. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-release-wake-lock-1" title="§ 11.5 Release wake lock algorithm">§ 11.5 Release
                    wake lock algorithm</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-applicable-wake-lock"
        aria-label="Links in this document to definition: applicable">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-applicable-wake-lock"
                aria-label="Permalink for definition: applicable. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-applicable-wake-lock-1" title="§ 11. Managing Wake Locks">§ 11. Managing Wake
                    Locks</a>
            </li>
            <li>
                <a href="#ref-for-dfn-applicable-wake-lock-2" title="§ 11.4 Acquire wake lock algorithm">§ 11.4 Acquire
                    wake lock algorithm</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-auto-releasing-wake-locks"
        aria-label="Links in this document to definition: Auto-releasing wake locks">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-auto-releasing-wake-locks"
                aria-label="Permalink for definition: Auto-releasing wake locks. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-auto-releasing-wake-locks-1" title="§ 9. The WakeLockSentinel interface">§ 9. The
                    WakeLockSentinel interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-handling-document-loss-of-full-activity"
        aria-label="Links in this document to definition: Handling document loss of full activity">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-handling-document-loss-of-full-activity"
                aria-label="Permalink for definition: Handling document loss of full activity. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-handling-document-loss-of-full-activity-1"
                    title="§ 9. The WakeLockSentinel interface">§ 9. The WakeLockSentinel interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-handling-document-loss-of-visibility"
        aria-label="Links in this document to definition: Handling document loss of visibility">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-handling-document-loss-of-visibility"
                aria-label="Permalink for definition: Handling document loss of visibility. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-handling-document-loss-of-visibility-1"
                    title="§ 9. The WakeLockSentinel interface">§ 9. The WakeLockSentinel interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-acquire-a-wake-lock"
        aria-label="Links in this document to definition: acquire a wake lock">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-acquire-a-wake-lock"
                aria-label="Permalink for definition: acquire a wake lock. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-acquire-a-wake-lock-1" title="§ 8.1 The request() method">§ 8.1 The request()
                    method</a> <a href="#ref-for-dfn-acquire-a-wake-lock-2" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-release-a-wake-lock"
        aria-label="Links in this document to definition: release a wake lock">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-release-a-wake-lock"
                aria-label="Permalink for definition: release a wake lock. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-release-a-wake-lock-1" title="§ 4.2 Permission algorithms">§ 4.2 Permission
                    algorithms</a>
            </li>
            <li>
                <a href="#ref-for-dfn-release-a-wake-lock-2" title="§ 9.4 The release() method">§ 9.4 The release()
                    method</a>
            </li>
            <li>
                <a href="#ref-for-dfn-release-a-wake-lock-3"
                    title="§ 9.5 The onrelease attribute tests: 1 wakelock-onrelease 🔒">§ 9.5 The onrelease attribute
                    tests: 1 wakelock-onrelease 🔒</a>
            </li>
            <li>
                <a href="#ref-for-dfn-release-a-wake-lock-4" title="§ 11.1 Auto-releasing wake locks">§ 11.1
                    Auto-releasing wake locks</a>
            </li>
            <li>
                <a href="#ref-for-dfn-release-a-wake-lock-5" title="§ 11.2 Handling document loss of full activity">§
                    11.2 Handling document loss of full activity</a>
            </li>
            <li>
                <a href="#ref-for-dfn-release-a-wake-lock-6" title="§ 11.3 Handling document loss of visibility">§ 11.3
                    Handling document loss of visibility</a>
            </li>
            <li>
                <a href="#ref-for-dfn-release-a-wake-lock-7" title="§ B.1 Changes since the 14 December 2017 CR">§ B.1
                    Changes since the 14 December 2017 CR</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-user-agent"
        aria-label="Links in this document to definition: user agent">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-user-agent"
                aria-label="Permalink for definition: user agent. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-user-agent-1" title="§ 4. Permissions and user prompts">§ 4. Permissions and user
                    prompts</a>
            </li>
            <li>
                <a href="#ref-for-dfn-user-agent-2" title="§ 8.1 The request() method">§ 8.1 The request() method</a>
            </li>
            <li>
                <a href="#ref-for-dfn-user-agent-3" title="§ 9. The WakeLockSentinel interface">§ 9. The
                    WakeLockSentinel interface</a>
            </li>
            <li>
                <a href="#ref-for-dfn-user-agent-4"
                    title="§ 9.5 The onrelease attribute tests: 1 wakelock-onrelease 🔒">§ 9.5 The onrelease attribute
                    tests: 1 wakelock-onrelease 🔒</a>
            </li>
            <li>
                <a href="#ref-for-dfn-user-agent-5" title="§ 11. Managing Wake Locks">§ 11. Managing Wake Locks</a> <a
                    href="#ref-for-dfn-user-agent-6" title="Reference 2">(2)</a> <a href="#ref-for-dfn-user-agent-7"
                    title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-document-interface"
        aria-label="Links in this document to definition: Document interface">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://dom.spec.whatwg.org/#document"
                aria-label="Permalink for definition: Document interface. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-document-interface-1" title="§ 4. Permissions and user prompts">§ 4.
                    Permissions and user prompts</a>
            </li>
            <li>
                <a href="#ref-for-index-term-document-interface-2" title="§ 6.1 Internal slots">§ 6.1 Internal slots</a>
            </li>
            <li>
                <a href="#ref-for-index-term-document-interface-3"
                    title="§ 11.2 Handling document loss of full activity">§ 11.2 Handling document loss of full
                    activity</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-eventtarget-interface"
        aria-label="Links in this document to definition: EventTarget interface">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://dom.spec.whatwg.org/#eventtarget"
                aria-label="Permalink for definition: EventTarget interface. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-eventtarget-interface-1" title="§ 9. The WakeLockSentinel interface">§ 9.
                    The WakeLockSentinel interface</a>
            </li>
            <li>
                <a href="#ref-for-index-term-eventtarget-interface-2" title="§ D. IDL Index">§ D. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-fire-an-event"
        aria-label="Links in this document to definition: Fire an event">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://dom.spec.whatwg.org/#concept-event-fire"
                aria-label="Permalink for definition: Fire an event. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-fire-an-event-1" title="§ 11.5 Release wake lock algorithm">§ 11.5 Release
                    wake lock algorithm</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-internal-slots"
        aria-label="Links in this document to definition: internal slots">
        <span class="caret"></span>
        <div>
            <a class="self-link"
                href="https://tc39.es/ecma262/multipage/#sec-object-internal-methods-and-internal-slots"
                aria-label="Permalink for definition: internal slots. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-internal-slots-1" title="§ 9.1 Internal slots">§ 9.1 Internal slots</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-allowed-to-use"
        aria-label="Links in this document to definition: allowed to use">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#allowed-to-use"
                aria-label="Permalink for definition: allowed to use. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-allowed-to-use-1" title="§ 8.1 The request() method">§ 8.1 The request()
                    method</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-associated-document"
        aria-label="Links in this document to definition: associated Document">
        <span class="caret"></span>
        <div>
            <a class="self-link"
                href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window"
                aria-label="Permalink for definition: associated Document. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-associated-document-1" title="§ 4.2 Permission algorithms">§ 4.2 Permission
                    algorithms</a>
            </li>
            <li>
                <a href="#ref-for-index-term-associated-document-2" title="§ 8.1 The request() method">§ 8.1 The
                    request() method</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-current-global-object"
        aria-label="Links in this document to definition: current global object">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://html.spec.whatwg.org/multipage/webappapis.html#current-global-object"
                aria-label="Permalink for definition: current global object. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-current-global-object-1" title="§ 4.2 Permission algorithms">§ 4.2
                    Permission algorithms</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-event-handler"
        aria-label="Links in this document to definition: event handler">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers"
                aria-label="Permalink for definition: event handler. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-event-handler-1"
                    title="§ 9.5 The onrelease attribute tests: 1 wakelock-onrelease 🔒">§ 9.5 The onrelease attribute
                    tests: 1 wakelock-onrelease 🔒</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-index-term-event-handler-event-type"
        aria-label="Links in this document to definition: event handler event type">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type"
                aria-label="Permalink for definition: event handler event type. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-event-handler-event-type-1"
                    title="§ 9.5 The onrelease attribute tests: 1 wakelock-onrelease 🔒">§ 9.5 The onrelease attribute
                    tests: 1 wakelock-onrelease 🔒</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-index-term-event-handler-idl-attribute"
        aria-label="Links in this document to definition: event handler IDL attribute">
        <span class="caret"></span>
        <div>
            <a class="self-link"
                href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes"
                aria-label="Permalink for definition: event handler IDL attribute. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-event-handler-idl-attribute-1"
                    title="§ 9.5 The onrelease attribute tests: 1 wakelock-onrelease 🔒">§ 9.5 The onrelease attribute
                    tests: 1 wakelock-onrelease 🔒</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-eventhandler"
        aria-label="Links in this document to definition: EventHandler">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"
                aria-label="Permalink for definition: EventHandler. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-eventhandler-1" title="§ 9. The WakeLockSentinel interface">§ 9. The
                    WakeLockSentinel interface</a>
            </li>
            <li>
                <a href="#ref-for-index-term-eventhandler-2" title="§ D. IDL Index">§ D. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-index-term-fully-active-for-document"
        aria-label="Links in this document to definition: fully active (for Document)">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active"
                aria-label="Permalink for definition: fully active (for Document). Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-fully-active-for-document-1" title="§ 8.1 The request() method">§ 8.1 The
                    request() method</a> <a href="#ref-for-index-term-fully-active-for-document-2"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-index-term-fully-active-for-document-3"
                    title="§ 11.2 Handling document loss of full activity">§ 11.2 Handling document loss of full
                    activity</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-in-parallel"
        aria-label="Links in this document to definition: in parallel">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel"
                aria-label="Permalink for definition: in parallel. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-in-parallel-1" title="§ 8.1 The request() method">§ 8.1 The request()
                    method</a> <a href="#ref-for-index-term-in-parallel-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-index-term-in-parallel-3" title="§ 11.5 Release wake lock algorithm">§ 11.5 Release
                    wake lock algorithm</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-navigator-interface"
        aria-label="Links in this document to definition: Navigator interface">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://html.spec.whatwg.org/multipage/system-state.html#navigator"
                aria-label="Permalink for definition: Navigator interface. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-navigator-interface-1" title="§ 7. Extensions to the Navigator interface">§
                    7. Extensions to the Navigator interface</a>
            </li>
            <li>
                <a href="#ref-for-index-term-navigator-interface-2" title="§ D. IDL Index">§ D. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-index-term-page-visibility-change-steps"
        aria-label="Links in this document to definition: page visibility change steps">
        <span class="caret"></span>
        <div>
            <a class="self-link"
                href="https://html.spec.whatwg.org/multipage/interaction.html#page-visibility-change-steps"
                aria-label="Permalink for definition: page visibility change steps. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-page-visibility-change-steps-1"
                    title="§ 11.3 Handling document loss of visibility">§ 11.3 Handling document loss of visibility</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-queue-a-global-task"
        aria-label="Links in this document to definition: Queue a global task">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task"
                aria-label="Permalink for definition: Queue a global task. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-queue-a-global-task-1" title="§ 8.1 The request() method">§ 8.1 The
                    request() method</a> <a href="#ref-for-index-term-queue-a-global-task-2" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-index-term-relevant-global-object"
        aria-label="Links in this document to definition: relevant global object">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global"
                aria-label="Permalink for definition: relevant global object. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-relevant-global-object-1" title="§ 8.1 The request() method">§ 8.1 The
                    request() method</a> <a href="#ref-for-index-term-relevant-global-object-2"
                    title="Reference 2">(2)</a> <a href="#ref-for-index-term-relevant-global-object-3"
                    title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-task-source"
        aria-label="Links in this document to definition: task source">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://html.spec.whatwg.org/multipage/webappapis.html#task-source"
                aria-label="Permalink for definition: task source. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-task-source-1" title="§ 5. Concepts">§ 5. Concepts</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-tasks"
        aria-label="Links in this document to definition: tasks">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-task"
                aria-label="Permalink for definition: tasks. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-tasks-1" title="§ 5. Concepts">§ 5. Concepts</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-index-term-visibility-state-for-document"
        aria-label="Links in this document to definition: visibility state (for Document)">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://html.spec.whatwg.org/multipage/interaction.html#visibility-state"
                aria-label="Permalink for definition: visibility state (for Document). Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-visibility-state-for-document-1" title="§ 8.1 The request() method">§ 8.1
                    The request() method</a> <a href="#ref-for-index-term-visibility-state-for-document-2"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-index-term-visibility-state-for-document-3"
                    title="§ 11.3 Handling document loss of visibility">§ 11.3 Handling document loss of visibility</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-window-interface"
        aria-label="Links in this document to definition: Window interface">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"
                aria-label="Permalink for definition: Window interface. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-window-interface-1" title="§ 9.6 Garbage collection">§ 9.6 Garbage
                    collection</a> <a href="#ref-for-index-term-window-interface-2" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-append-for-list"
        aria-label="Links in this document to definition: Append (for list)">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://infra.spec.whatwg.org/#list-append"
                aria-label="Permalink for definition: Append (for list). Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-append-for-list-1" title="§ 8.1 The request() method">§ 8.1 The request()
                    method</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-for-each-for-list"
        aria-label="Links in this document to definition: For each (for list)">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://infra.spec.whatwg.org/#list-iterate"
                aria-label="Permalink for definition: For each (for list). Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-for-each-for-list-1" title="§ 4.2 Permission algorithms">§ 4.2 Permission
                    algorithms</a>
            </li>
            <li>
                <a href="#ref-for-index-term-for-each-for-list-2"
                    title="§ 11.2 Handling document loss of full activity">§ 11.2 Handling document loss of full
                    activity</a>
            </li>
            <li>
                <a href="#ref-for-index-term-for-each-for-list-3" title="§ 11.3 Handling document loss of visibility">§
                    11.3 Handling document loss of visibility</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-if-aborted"
        aria-label="Links in this document to definition: if aborted">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://infra.spec.whatwg.org/#if-aborted"
                aria-label="Permalink for definition: if aborted. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-if-aborted-1" title="§ B.1 Changes since the 14 December 2017 CR">§ B.1
                    Changes since the 14 December 2017 CR</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-is-empty-for-list"
        aria-label="Links in this document to definition: is empty (for list)">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://infra.spec.whatwg.org/#list-is-empty"
                aria-label="Permalink for definition: is empty (for list). Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-is-empty-for-list-1" title="§ 8.1 The request() method">§ 8.1 The request()
                    method</a>
            </li>
            <li>
                <a href="#ref-for-index-term-is-empty-for-list-2" title="§ 11.5 Release wake lock algorithm">§ 11.5
                    Release wake lock algorithm</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-lists"
        aria-label="Links in this document to definition: lists">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://infra.spec.whatwg.org/#list"
                aria-label="Permalink for definition: lists. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-lists-1" title="§ 6.1 Internal slots">§ 6.1 Internal slots</a> <a
                    href="#ref-for-index-term-lists-2" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-ordered-map"
        aria-label="Links in this document to definition: ordered map">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://infra.spec.whatwg.org/#ordered-map"
                aria-label="Permalink for definition: ordered map. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-ordered-map-1" title="§ 6.1 Internal slots">§ 6.1 Internal slots</a> <a
                    href="#ref-for-index-term-ordered-map-2" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-index-term-denied-for-permissionstate"
        aria-label="Links in this document to definition: denied (for PermissionState)">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://www.w3.org/TR/permissions/#dom-permissionstate-denied"
                aria-label="Permalink for definition: denied (for PermissionState). Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-denied-for-permissionstate-1" title="§ 8.1 The request() method">§ 8.1 The
                    request() method</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-index-term-permission-revocation-algorithm-for-powerful-feature"
        aria-label="Links in this document to definition: permission revocation algorithm (for powerful feature)">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://www.w3.org/TR/permissions/#dfn-permission-revocation-algorithm"
                aria-label="Permalink for definition: permission revocation algorithm (for powerful feature). Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-permission-revocation-algorithm-for-powerful-feature-1"
                    title="§ 4.2 Permission algorithms">§ 4.2 Permission algorithms</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-powerful-feature"
        aria-label="Links in this document to definition: powerful feature">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://www.w3.org/TR/permissions/#dfn-powerful-feature"
                aria-label="Permalink for definition: powerful feature. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-powerful-feature-1"
                    title="§ 4.1 The &quot;screen-wake-lock&quot; powerful feature">§ 4.1 The "screen-wake-lock"
                    powerful feature</a>
            </li>
            <li>
                <a href="#ref-for-index-term-powerful-feature-2" title="§ 4.2 Permission algorithms">§ 4.2 Permission
                    algorithms</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-index-term-requesting-permission-to-use"
        aria-label="Links in this document to definition: requesting permission to use">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://www.w3.org/TR/permissions/#dfn-request-permission-to-use"
                aria-label="Permalink for definition: requesting permission to use. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-requesting-permission-to-use-1" title="§ 8.1 The request() method">§ 8.1
                    The request() method</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-index-term-default-allowlist-for-policy-controlled-feature"
        aria-label="Links in this document to definition: default allowlist (for policy-controlled feature)">
        <span class="caret"></span>
        <div>
            <a class="self-link"
                href="https://www.w3.org/TR/permissions-policy-1/#policy-controlled-feature-default-allowlist"
                aria-label="Permalink for definition: default allowlist (for policy-controlled feature). Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-default-allowlist-for-policy-controlled-feature-1"
                    title="§ 3. Policy control">§ 3. Policy control</a> <a
                    href="#ref-for-index-term-default-allowlist-for-policy-controlled-feature-2"
                    title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-index-term-policy-controlled-feature"
        aria-label="Links in this document to definition: policy-controlled feature">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://www.w3.org/TR/permissions-policy-1/#policy-controlled-feature"
                aria-label="Permalink for definition: policy-controlled feature. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-policy-controlled-feature-1" title="§ 3. Policy control">§ 3. Policy
                    control</a>
            </li>
            <li>
                <a href="#ref-for-index-term-policy-controlled-feature-2" title="§ 8.1 The request() method">§ 8.1 The
                    request() method</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-a-new-promise"
        aria-label="Links in this document to definition: a new promise">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://webidl.spec.whatwg.org/#a-new-promise"
                aria-label="Permalink for definition: a new promise. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-a-new-promise-1" title="§ 8.1 The request() method">§ 8.1 The request()
                    method</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-index-term-a-promise-rejected-with"
        aria-label="Links in this document to definition: a promise rejected with">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://webidl.spec.whatwg.org/#a-promise-rejected-with"
                aria-label="Permalink for definition: a promise rejected with. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-a-promise-rejected-with-1" title="§ 8.1 The request() method">§ 8.1 The
                    request() method</a> <a href="#ref-for-index-term-a-promise-rejected-with-2"
                    title="Reference 2">(2)</a> <a href="#ref-for-index-term-a-promise-rejected-with-3"
                    title="Reference 3">(3)</a> <a href="#ref-for-index-term-a-promise-rejected-with-4"
                    title="Reference 4">(4)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-index-term-a-promise-resolved-with"
        aria-label="Links in this document to definition: a promise resolved with">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://webidl.spec.whatwg.org/#a-promise-resolved-with"
                aria-label="Permalink for definition: a promise resolved with. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-a-promise-resolved-with-1" title="§ 9.4 The release() method">§ 9.4 The
                    release() method</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-boolean-type"
        aria-label="Links in this document to definition: boolean type">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://webidl.spec.whatwg.org/#idl-boolean"
                aria-label="Permalink for definition: boolean type. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-boolean-type-1" title="§ 9. The WakeLockSentinel interface">§ 9. The
                    WakeLockSentinel interface</a>
            </li>
            <li>
                <a href="#ref-for-index-term-boolean-type-2" title="§ D. IDL Index">§ D. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-index-term-domexception-interface"
        aria-label="Links in this document to definition: DOMException interface">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://webidl.spec.whatwg.org/#idl-DOMException"
                aria-label="Permalink for definition: DOMException interface. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-domexception-interface-1" title="§ 8.1 The request() method">§ 8.1 The
                    request() method</a> <a href="#ref-for-index-term-domexception-interface-2"
                    title="Reference 2">(2)</a> <a href="#ref-for-index-term-domexception-interface-3"
                    title="Reference 3">(3)</a> <a href="#ref-for-index-term-domexception-interface-4"
                    title="Reference 4">(4)</a> <a href="#ref-for-index-term-domexception-interface-5"
                    title="Reference 5">(5)</a> <a href="#ref-for-index-term-domexception-interface-6"
                    title="Reference 6">(6)</a> <a href="#ref-for-index-term-domexception-interface-7"
                    title="Reference 7">(7)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-index-term-exposed-extended-attribute"
        aria-label="Links in this document to definition: [Exposed] extended attribute">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://webidl.spec.whatwg.org/#Exposed"
                aria-label="Permalink for definition: [Exposed] extended attribute. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-exposed-extended-attribute-1" title="§ 8. The WakeLock interface">§ 8. The
                    WakeLock interface</a>
            </li>
            <li>
                <a href="#ref-for-index-term-exposed-extended-attribute-2" title="§ 9. The WakeLockSentinel interface">§
                    9. The WakeLockSentinel interface</a>
            </li>
            <li>
                <a href="#ref-for-index-term-exposed-extended-attribute-3" title="§ D. IDL Index">§ D. IDL Index</a> <a
                    href="#ref-for-index-term-exposed-extended-attribute-4" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-index-term-notallowederror-exception"
        aria-label="Links in this document to definition: NotAllowedError exception">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://webidl.spec.whatwg.org/#notallowederror"
                aria-label="Permalink for definition: NotAllowedError exception. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-notallowederror-exception-1" title="§ 8.1 The request() method">§ 8.1 The
                    request() method</a> <a href="#ref-for-index-term-notallowederror-exception-2"
                    title="Reference 2">(2)</a> <a href="#ref-for-index-term-notallowederror-exception-3"
                    title="Reference 3">(3)</a> <a href="#ref-for-index-term-notallowederror-exception-4"
                    title="Reference 4">(4)</a> <a href="#ref-for-index-term-notallowederror-exception-5"
                    title="Reference 5">(5)</a> <a href="#ref-for-index-term-notallowederror-exception-6"
                    title="Reference 6">(6)</a> <a href="#ref-for-index-term-notallowederror-exception-7"
                    title="Reference 7">(7)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-promise-interface"
        aria-label="Links in this document to definition: Promise interface">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://webidl.spec.whatwg.org/#idl-promise"
                aria-label="Permalink for definition: Promise interface. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-promise-interface-1" title="§ 8. The WakeLock interface">§ 8. The WakeLock
                    interface</a>
            </li>
            <li>
                <a href="#ref-for-index-term-promise-interface-2" title="§ 9. The WakeLockSentinel interface">§ 9. The
                    WakeLockSentinel interface</a>
            </li>
            <li>
                <a href="#ref-for-index-term-promise-interface-3" title="§ D. IDL Index">§ D. IDL Index</a> <a
                    href="#ref-for-index-term-promise-interface-4" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-index-term-sameobject-extended-attribute"
        aria-label="Links in this document to definition: [SameObject] extended attribute">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://webidl.spec.whatwg.org/#SameObject"
                aria-label="Permalink for definition: [SameObject] extended attribute. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-sameobject-extended-attribute-1"
                    title="§ 7. Extensions to the Navigator interface">§ 7. Extensions to the Navigator interface</a>
            </li>
            <li>
                <a href="#ref-for-index-term-sameobject-extended-attribute-2" title="§ D. IDL Index">§ D. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-index-term-securecontext-extended-attribute"
        aria-label="Links in this document to definition: [SecureContext] extended attribute">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://webidl.spec.whatwg.org/#SecureContext"
                aria-label="Permalink for definition: [SecureContext] extended attribute. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-securecontext-extended-attribute-1"
                    title="§ 7. Extensions to the Navigator interface">§ 7. Extensions to the Navigator interface</a>
            </li>
            <li>
                <a href="#ref-for-index-term-securecontext-extended-attribute-2" title="§ 8. The WakeLock interface">§
                    8. The WakeLock interface</a>
            </li>
            <li>
                <a href="#ref-for-index-term-securecontext-extended-attribute-3"
                    title="§ 9. The WakeLockSentinel interface">§ 9. The WakeLockSentinel interface</a>
            </li>
            <li>
                <a href="#ref-for-index-term-securecontext-extended-attribute-4" title="§ D. IDL Index">§ D. IDL
                    Index</a> <a href="#ref-for-index-term-securecontext-extended-attribute-5"
                    title="Reference 2">(2)</a> <a href="#ref-for-index-term-securecontext-extended-attribute-6"
                    title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-this"
        aria-label="Links in this document to definition: this">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://webidl.spec.whatwg.org/#this"
                aria-label="Permalink for definition: this. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-this-1" title="§ 8.1 The request() method">§ 8.1 The request() method</a>
            </li>
            <li>
                <a href="#ref-for-index-term-this-2" title="§ 9.2 The released attribute">§ 9.2 The released
                    attribute</a>
            </li>
            <li>
                <a href="#ref-for-index-term-this-3" title="§ 9.3 The type attribute">§ 9.3 The type attribute</a>
            </li>
            <li>
                <a href="#ref-for-index-term-this-4" title="§ 9.4 The release() method">§ 9.4 The release() method</a>
                <a href="#ref-for-index-term-this-5" title="Reference 2">(2)</a> <a href="#ref-for-index-term-this-6"
                    title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-undefined-type"
        aria-label="Links in this document to definition: undefined type">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://webidl.spec.whatwg.org/#idl-undefined"
                aria-label="Permalink for definition: undefined type. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-undefined-type-1" title="§ 9. The WakeLockSentinel interface">§ 9. The
                    WakeLockSentinel interface</a>
            </li>
            <li>
                <a href="#ref-for-index-term-undefined-type-2" title="§ D. IDL Index">§ D. IDL Index</a>
            </li>
        </ul>
    </div>
    <script id="respec-dfn-panel">(() => {
            // @ts-check
            if (document.respec) {
                document.respec.ready.then(setupPanel);
            } else {
                setupPanel();
            }

            function setupPanel() {
                const listener = panelListener();
                document.body.addEventListener("keydown", listener);
                document.body.addEventListener("click", listener);
            }

            function panelListener() {
                /** @type {HTMLElement} */
                let panel = null;
                return event => {
                    const { target, type } = event;

                    if (!(target instanceof HTMLElement)) return;

                    // For keys, we only care about Enter key to activate the panel
                    // otherwise it's activated via a click.
                    if (type === "keydown" && event.key !== "Enter") return;

                    const action = deriveAction(event);

                    switch (action) {
                        case "show": {
                            hidePanel(panel);
                            /** @type {HTMLElement} */
                            const dfn = target.closest("dfn, .index-term");
                            panel = document.getElementById(`dfn-panel-for-${dfn.id}`);
                            const coords = deriveCoordinates(event);
                            displayPanel(dfn, panel, coords);
                            break;
                        }
                        case "dock": {
                            panel.style.left = null;
                            panel.style.top = null;
                            panel.classList.add("docked");
                            break;
                        }
                        case "hide": {
                            hidePanel(panel);
                            panel = null;
                            break;
                        }
                    }
                };
            }

            /**
             * @param {MouseEvent|KeyboardEvent} event
             */
            function deriveCoordinates(event) {
                const target = /** @type HTMLElement */ (event.target);

                // We prevent synthetic AT clicks from putting
                // the dialog in a weird place. The AT events sometimes
                // lack coordinates, so they have clientX/Y = 0
                const rect = target.getBoundingClientRect();
                if (
                    event instanceof MouseEvent &&
                    event.clientX >= rect.left &&
                    event.clientY >= rect.top
                ) {
                    // The event probably happened inside the bounding rect...
                    return { x: event.clientX, y: event.clientY };
                }

                // Offset to the middle of the element
                const x = rect.x + rect.width / 2;
                // Placed at the bottom of the element
                const y = rect.y + rect.height;
                return { x, y };
            }

            /**
             * @param {Event} event
             */
            function deriveAction(event) {
                const target = /** @type {HTMLElement} */ (event.target);
                const hitALink = !!target.closest("a");
                if (target.closest("dfn:not([data-cite]), .index-term")) {
                    return hitALink ? "none" : "show";
                }
                if (target.closest(".dfn-panel")) {
                    if (hitALink) {
                        return target.classList.contains("self-link") ? "hide" : "dock";
                    }
                    const panel = target.closest(".dfn-panel");
                    return panel.classList.contains("docked") ? "hide" : "none";
                }
                if (document.querySelector(".dfn-panel:not([hidden])")) {
                    return "hide";
                }
                return "none";
            }

            /**
             * @param {HTMLElement} dfn
             * @param {HTMLElement} panel
             * @param {{ x: number, y: number }} clickPosition
             */
            function displayPanel(dfn, panel, { x, y }) {
                panel.hidden = false;
                // distance (px) between edge of panel and the pointing triangle (caret)
                const MARGIN = 20;

                const dfnRects = dfn.getClientRects();
                // Find the `top` offset when the `dfn` can be spread across multiple lines
                let closestTop = 0;
                let minDiff = Infinity;
                for (const rect of dfnRects) {
                    const { top, bottom } = rect;
                    const diffFromClickY = Math.abs((top + bottom) / 2 - y);
                    if (diffFromClickY < minDiff) {
                        minDiff = diffFromClickY;
                        closestTop = top;
                    }
                }

                const top = window.scrollY + closestTop + dfnRects[0].height;
                const left = x - MARGIN;
                panel.style.left = `${left}px`;
                panel.style.top = `${top}px`;

                // Find if the panel is flowing out of the window
                const panelRect = panel.getBoundingClientRect();
                const SCREEN_WIDTH = Math.min(window.innerWidth, window.screen.width);
                if (panelRect.right > SCREEN_WIDTH) {
                    const newLeft = Math.max(MARGIN, x + MARGIN - panelRect.width);
                    const newCaretOffset = left - newLeft;
                    panel.style.left = `${newLeft}px`;
                    /** @type {HTMLElement} */
                    const caret = panel.querySelector(".caret");
                    caret.style.left = `${newCaretOffset}px`;
                }

                // As it's a dialog, we trap focus.
                // TODO: when <dialog> becomes a implemented, we should really
                // use that.
                trapFocus(panel, dfn);
            }

            /**
             * @param {HTMLElement} panel
             * @param {HTMLElement} dfn
             * @returns
             */
            function trapFocus(panel, dfn) {
                /** @type NodeListOf<HTMLAnchorElement> elements */
                const anchors = panel.querySelectorAll("a[href]");
                // No need to trap focus
                if (!anchors.length) return;

                // Move focus to first anchor element
                const first = anchors.item(0);
                first.focus();

                const trapListener = createTrapListener(anchors, panel, dfn);
                panel.addEventListener("keydown", trapListener);

                // Hiding the panel releases the trap
                const mo = new MutationObserver(records => {
                    const [record] = records;
                    const target = /** @type HTMLElement */ (record.target);
                    if (target.hidden) {
                        panel.removeEventListener("keydown", trapListener);
                        mo.disconnect();
                    }
                });
                mo.observe(panel, { attributes: true, attributeFilter: ["hidden"] });
            }

            /**
             *
             * @param {NodeListOf<HTMLAnchorElement>} anchors
             * @param {HTMLElement} panel
             * @param {HTMLElement} dfn
             * @returns
             */
            function createTrapListener(anchors, panel, dfn) {
                const lastIndex = anchors.length - 1;
                let currentIndex = 0;
                return event => {
                    switch (event.key) {
                        // Hitting "Tab" traps us in a nice loop around elements.
                        case "Tab": {
                            event.preventDefault();
                            currentIndex += event.shiftKey ? -1 : +1;
                            if (currentIndex < 0) {
                                currentIndex = lastIndex;
                            } else if (currentIndex > lastIndex) {
                                currentIndex = 0;
                            }
                            anchors.item(currentIndex).focus();
                            break;
                        }

                        // Hitting "Enter" on an anchor releases the trap.
                        case "Enter":
                            hidePanel(panel);
                            break;

                        // Hitting "Escape" returns focus to dfn.
                        case "Escape":
                            hidePanel(panel);
                            dfn.focus();
                            return;
                    }
                };
            }

            /** @param {HTMLElement} panel */
            function hidePanel(panel) {
                if (!panel) return;
                panel.hidden = true;
                panel.classList.remove("docked");
            }
        })()</script>
    <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
</body>

</html>