<!DOCTYPE html>
<html lang="zh-hans" dir="ltr">

<head>
    <meta charset="utf-8">
    <meta name="generator" content="ReSpec 24.4.0">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <style>
        /* --- EXAMPLES --- */
        span.example-title {
            text-transform: none;
        }

        aside.example,
        div.example,
        div.illegal-example {
            padding: 0.5em;
            margin: 1em 0;
            position: relative;
            clear: both;
        }

        div.illegal-example {
            color: red
        }

        div.illegal-example p {
            color: black
        }

        aside.example,
        div.example {
            padding: .5em;
            border-left-width: .5em;
            border-left-style: solid;
            border-color: #e0cb52;
            background: #fcfaee;
        }

        aside.example div.example {
            border-left-width: .1em;
            border-color: #999;
            background: #fff;
        }

        aside.example div.example span.example-title {
            color: #999;
        }
    </style>
    <style>
        /* --- ISSUES/NOTES --- */
        div.issue-title,
        div.note-title,
        div.ednote-title,
        div.warning-title {
            padding-right: 1em;
            min-width: 7.5em;
            color: #b9ab2d;
        }

        div.issue-title {
            color: #e05252;
        }

        div.note-title,
        div.ednote-title {
            color: #2b2;
        }

        div.warning-title {
            color: #f22;
        }

        div.note-title span,
        div.ednote-title span,
        div.warning-title span {
            text-transform: uppercase;
        }

        div.issue-title span {
            text-transform: none;
        }

        div.note,
        div.issue,
        div.ednote,
        div.warning {
            margin-top: 1em;
            margin-bottom: 1em;
        }

        .warning>p:first-child {
            margin-top: 0
        }

        .warning {
            padding: .5em;
            border-left-width: .5em;
            border-left-style: solid;
        }

        div.issue,
        div.note,
        div.ednote,
        div.warning {
            padding: 1em 1.2em 0.5em;
            margin: 1em 0;
            position: relative;
            clear: both;
        }

        span.warning {
            padding: .1em .5em .15em;
        }

        .issue.closed span.issue-number {
            text-decoration: line-through;
        }

        .warning {
            border-color: #f11;
            border-width: .2em;
            border-style: solid;
            background: #fbe9e9;
        }

        .warning-title:before {
            content: "⚠";
            /*U+26A0 WARNING SIGN*/
            font-size: 3em;
            float: left;
            height: 100%;
            padding-right: .3em;
            vertical-align: top;
            margin-top: -0.5em;
        }

        li.task-list-item {
            list-style: none;
        }

        input.task-list-item-checkbox {
            margin: 0 0.35em 0.25em -1.6em;
            vertical-align: middle;
        }

        .issue a.respec-gh-label {
            padding: 5px;
            margin: 0 2px 0 2px;
            font-size: 10px;
            text-transform: none;
            text-decoration: none;
            font-weight: bold;
            border-radius: 4px;
            position: relative;
            bottom: 2px;
            border: none;
        }

        .issue a.respec-label-dark {
            color: #fff;
            background-color: #000;
        }

        .issue a.respec-label-light {
            color: #000;
            background-color: #fff;
        }
    </style>
    <style>
        /* --- WEB IDL --- */

        pre.idl {
            padding: 1em;
        }

        @media print {
            pre.idl {
                white-space: pre-wrap;
            }
        }

        pre.idl::before {
            content: "WebIDL";
            display: block;
            width: 150px;
            background: #90b8de;
            color: #fff;
            font-family: sans-serif;
            font-weight: bold;
            margin: -1em 0 1em -1em;
            height: 28px;
            line-height: 28px;
        }

        .idlID {
            font-weight: bold;
            color: #005a9c;
        }

        .idlType {
            color: #005a9c;
        }

        .idlName {
            color: #ff4500;
        }

        .idlName a {
            color: #ff4500;
            border-bottom: 1px dotted #ff4500;
            text-decoration: none;
        }

        a.idlEnumItem {
            color: #000;
            border-bottom: 1px dotted #ccc;
            text-decoration: none;
        }

        .idlSuperclass {
            font-style: italic;
            color: #005a9c;
        }


        /*.idlParam*/

        .idlParamName,
        .idlDefaultValue {
            font-style: italic;
        }

        .extAttr {
            color: #666;
        }


        /*.idlSectionComment*/

        .idlSectionComment {
            color: gray;
        }

        .idlIncludes a {
            font-weight: bold;
        }

        .respec-button-copy-paste:focus {
            text-decoration: none;
            border-color: #51a7e8;
            outline: none;
            box-shadow: 0 0 5px rgba(81, 167, 232, 0.5);
        }

        .respec-button-copy-paste:focus:hover,
        .respec-button-copy-paste.selected:focus {
            border-color: #51a7e8;
        }

        .respec-button-copy-paste:hover,
        .respec-button-copy-paste:active,
        .respec-button-copy-paste.zeroclipboard-is-hover,
        .respec-button-copy-paste.zeroclipboard-is-active {
            text-decoration: none;
            background-color: #ddd;
            background-image: linear-gradient(#eee, #ddd);
            border-color: #ccc;
        }

        .respec-button-copy-paste:active,
        .respec-button-copy-paste.selected,
        .respec-button-copy-paste.zeroclipboard-is-active {
            background-color: #dcdcdc;
            background-image: none;
            border-color: #b5b5b5;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.15)
        }

        .respec-button-copy-paste.selected:hover {
            background-color: #cfcfcf;
        }

        .respec-button-copy-paste:disabled,
        .respec-button-copy-paste:disabled:hover,
        .respec-button-copy-paste.disabled,
        .respec-button-copy-paste.disabled:hover {
            color: rgba(102, 102, 102, 0.5);
            cursor: default;
            background-color: rgba(229, 229, 229, 0.5);
            background-image: none;
            border-color: rgba(197, 197, 197, 0.5);
            box-shadow: none;
        }
    </style>
    <title>用户计时 第 2 级</title>

    <style id="respec-mainstyle">
        /*****************************************************************
     * ReSpec 3 CSS
     * Robin Berjon - http://berjon.com/
     *****************************************************************/

        /* Override code highlighter background */
        .hljs {
            background: transparent !important;
        }

        /* --- INLINES --- */
        h1 abbr,
        h2 abbr,
        h3 abbr,
        h4 abbr,
        h5 abbr,
        h6 abbr,
        a abbr {
            border: none;
        }

        dfn {
            font-weight: bold;
        }

        a.internalDFN {
            color: inherit;
            border-bottom: 1px solid #99c;
            text-decoration: none;
        }

        a.externalDFN {
            color: inherit;
            border-bottom: 1px dotted #ccc;
            text-decoration: none;
        }

        a.bibref {
            text-decoration: none;
        }

        #references :target {
            background: #eaf3ff;
        }

        cite .bibref {
            font-style: normal;
        }

        code {
            color: #c83500;
        }

        th code {
            color: inherit;
        }

        /* --- TOC --- */

        .toc a,
        .tof a {
            text-decoration: none;
        }

        a .secno,
        a .figno {
            color: #000;
        }

        ul.tof,
        ol.tof {
            list-style: none outside none;
        }

        .caption {
            margin-top: 0.5em;
            font-style: italic;
        }

        /* --- TABLE --- */

        table.simple {
            border-spacing: 0;
            border-collapse: collapse;
            border-bottom: 3px solid #005a9c;
        }

        .simple th {
            background: #005a9c;
            color: #fff;
            padding: 3px 5px;
            text-align: left;
        }

        .simple th[scope="row"] {
            background: inherit;
            color: inherit;
            border-top: 1px solid #ddd;
        }

        .simple td {
            padding: 3px 10px;
            border-top: 1px solid #ddd;
        }

        .simple tr:nth-child(even) {
            background: #f0f6ff;
        }

        /* --- DL --- */

        .section dd>p:first-child {
            margin-top: 0;
        }

        .section dd>p:last-child {
            margin-bottom: 0;
        }

        .section dd {
            margin-bottom: 1em;
        }

        .section dl.attrs dd,
        .section dl.eldef dd {
            margin-bottom: 0;
        }

        #issue-summary>ul,
        .respec-dfn-list {
            column-count: 2;
        }

        #issue-summary li,
        .respec-dfn-list li {
            list-style: none;
        }

        details.respec-tests-details {
            margin-left: 1em;
            display: inline-block;
            vertical-align: top;
        }

        details.respec-tests-details>* {
            padding-right: 2em;
        }

        details.respec-tests-details[open] {
            z-index: 999999;
            position: absolute;
            border: thin solid #cad3e2;
            border-radius: 0.3em;
            background-color: white;
            padding-bottom: 0.5em;
        }

        details.respec-tests-details[open]>summary {
            border-bottom: thin solid #cad3e2;
            padding-left: 1em;
            margin-bottom: 1em;
            line-height: 2em;
        }

        details.respec-tests-details>ul {
            width: 100%;
            margin-top: -0.3em;
        }

        details.respec-tests-details>li {
            padding-left: 1em;
        }

        a[href].self-link:hover {
            opacity: 1;
            text-decoration: none;
            background-color: transparent;
        }

        h2,
        h3,
        h4,
        h5,
        h6 {
            position: relative;
        }

        aside.example .marker>a.self-link {
            color: inherit;
        }

        h2>a.self-link,
        h3>a.self-link,
        h4>a.self-link,
        h5>a.self-link,
        h6>a.self-link {
            border: none;
            color: inherit;
            font-size: 83%;
            height: 2em;
            left: -1.6em;
            opacity: .5;
            position: absolute;
            text-align: center;
            text-decoration: none;
            top: 0;
            transition: opacity .2s;
            width: 2em;
        }

        h2>a.self-link::before,
        h3>a.self-link::before,
        h4>a.self-link::before,
        h5>a.self-link::before,
        h6>a.self-link::before {
            content: "§";
            display: block;
        }

        @media (max-width: 767px) {
            dd {
                margin-left: 0;
            }

            /* Don't position self-link in headings off-screen */
            h2>a.self-link,
            h3>a.self-link,
            h4>a.self-link,
            h5>a.self-link,
            h6>a.self-link {
                left: auto;
                top: auto;
            }
        }

        @media print {
            .removeOnSave {
                display: none;
            }
        }
    </style>
    <style>
        /*
    
    github.com style (c) Vasily Polovnyov <vast@whiteants.net>
    
    */

        .hljs {
            display: block;
            overflow-x: auto;
            padding: 0.5em;
            color: #333;
            background: #f8f8f8;
        }

        .hljs-comment,
        .hljs-quote {
            color: #998;
            font-style: italic;
        }

        .hljs-keyword,
        .hljs-selector-tag,
        .hljs-subst {
            color: #333;
            font-weight: bold;
        }

        .hljs-number,
        .hljs-literal,
        .hljs-variable,
        .hljs-template-variable,
        .hljs-tag .hljs-attr {
            color: #008080;
        }

        .hljs-string,
        .hljs-doctag {
            color: #d14;
        }

        .hljs-title,
        .hljs-section,
        .hljs-selector-id {
            color: #900;
            font-weight: bold;
        }

        .hljs-subst {
            font-weight: normal;
        }

        .hljs-type,
        .hljs-class .hljs-title {
            color: #458;
            font-weight: bold;
        }

        .hljs-tag,
        .hljs-name,
        .hljs-attribute {
            color: #000080;
            font-weight: normal;
        }

        .hljs-regexp,
        .hljs-link {
            color: #009926;
        }

        .hljs-symbol,
        .hljs-bullet {
            color: #990073;
        }

        .hljs-built_in,
        .hljs-builtin-name {
            color: #0086b3;
        }

        .hljs-meta {
            color: #999;
            font-weight: bold;
        }

        .hljs-deletion {
            background: #fdd;
        }

        .hljs-addition {
            background: #dfd;
        }

        .hljs-emphasis {
            font-style: italic;
        }

        .hljs-strong {
            font-weight: bold;
        }
    </style>

    <link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2016/W3C-REC">
    <link rel="canonical" href="https://www.w3.org/TR/user-timing-2/">
    <script id="initialUserConfig" type="application/json">{
      "specStatus": "REC",
      "shortName": "user-timing-2",
      "editors": [
        {
          "name": "Ilya Grigorik",
          "url": "https://www.igvita.com/",
          "mailto": "igrigorik@gmail.com",
          "company": "Google",
          "companyURL": "https://google.com/",
          "w3cid": "56102"
        }
      ],
      "formerEditors": [
        {
          "name": "Jatinder Mann",
          "company": "Microsoft Corp.",
          "note": "Until February 2014",
          "email": "jmann@microsoft.com",
          "w3cid": "44357"
        },
        {
          "name": "Zhiheng Wang",
          "company": "Google Inc.",
          "note": "Until July 2013",
          "w3cid": "43685"
        },
        {
          "name": "Anderson Quach",
          "company": "Microsoft Corp.",
          "note": "until March 2011",
          "w3cid": "45288"
        }
      ],
      "wg": "Web Performance Working Group",
      "wgURI": "https://www.w3.org/webperf/",
      "wgPublicList": "public-web-perf",
      "subjectPrefix": "[UserTiming]",
      "testSuiteURI": "https://wpt.fyi/results/user-timing",
      "implementationReportURI": "https://wpt.fyi/results/user-timing",
      "crEnd": "2018-08-06",
      "errata": "https://www.w3.org/2019/02/user-timing-2-errata.html",
      "previousMaturity": "WD",
      "previousPublishDate": "2018-07-06",
      "github": "https://github.com/w3c/user-timing/",
      "otherLinks": [
        {
          "key": "Participate",
          "data": [
            {
              "value": "GitHub w3c/user-timing",
              "href": "https://github.com/w3c/user-timing/"
            },
            {
              "value": "File a bug",
              "href": "https://github.com/w3c/user-timing/issues/"
            },
            {
              "value": "Commit history",
              "href": "https://github.com/w3c/user-timing/commits/gh-pages"
            },
            {
              "value": "Pull requests",
              "href": "https://github.com/w3c/user-timing/pulls/"
            }
          ]
        },
        {
          "key": "Implementation",
          "data": [
            {
              "value": "Can I use User Timing?",
              "href": "http://caniuse.com/#feat=user-timing"
            }
          ]
        }
      ],
      "wgPatentURI": "https://www.w3.org/2004/01/pp-impl/45211/status",
      "publishISODate": "2019-02-24T00:00:00.000Z",
      "generatedSubtitle": "Recommendation 24 February 2019"
    }</script>
    <meta name="description" content="This specification defines an interface to help web
        developers measure the performance of their applications by giving them access
        to high precision timestamps.">
</head>

<body class="h-entry">
    <div class="head">
        <a href="https://www.w3.org/" class="logo"><img alt="W3C" width="72" height="48"
                src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C"></a>
        <h1 id="title" class="title p-name">用户计时 第 2 级</h1>

        <h2>
            <abbr title="World Wide Web Consortium">W3C</abbr> 推荐标准
            <time class="dt-published" datetime="2019-02-26">2019 年 2 月 26 日</time>
        </h2>
        <dl>
            <dt>此版本：</dt>
            <dd>
                <a class="u-url"
                    href="https://www.w3.org/TR/2019/REC-user-timing-2-20190226/">https://www.w3.org/TR/2019/REC-user-timing-2-20190226/</a>
            </dd>
            <dt>最新发布版本：</dt>
            <dd>
                <a href="https://www.w3.org/TR/user-timing-2/">https://www.w3.org/TR/user-timing-2/</a>
            </dd>
            <dt>用户计时的最新版本：</dt>
            <dd>
                <a href="https://www.w3.org/TR/user-timing/">https://www.w3.org/TR/user-timing/</a>
            </dd>
            <dt>最新编辑草案：</dt>
            <dd><a href="https://w3c.github.io/user-timing/">https://w3c.github.io/user-timing/</a></dd>
            <dt>先前版本：</dt>
            <dd><a
                    href="https://www.w3.org/TR/2019/PR-user-timing-2-20190110/">https://www.w3.org/TR/2019/PR-user-timing-2-20190110/</a>
            </dd>
            <dt>测试套件：</dt>
            <dd><a href="https://wpt.fyi/results/user-timing">https://wpt.fyi/results/user-timing</a></dd>
            <dt>实现报告：</dt>
            <dd>
                <a href="https://wpt.fyi/results/user-timing">https://wpt.fyi/results/user-timing</a>
            </dd>
            <dt>编辑：</dt>
            <dd class="p-author h-card vcard" data-editor-id="56102"><a class="ed_mailto u-email email p-name"
                    href="mailto:igrigorik@gmail.com">Ilya Grigorik</a>
                (<a class="p-org org h-org h-card" href="https://google.com/">Google</a>)
            </dd>
            <dt>
                前编辑：
            </dt>
            <dd class="p-author h-card vcard" data-editor-id="44357"><span class="p-name fn">Jatinder Mann</span>
                (微软公司)
                (截至 2014 年 2 月)</dd>
            <dd class="p-author h-card vcard" data-editor-id="43685"><span class="p-name fn">Zhiheng Wang</span>
                (Google Inc.)
                (截至 2013 年 7 月)</dd>
            <dd class="p-author h-card vcard" data-editor-id="45288"><span class="p-name fn">Anderson Quach</span>
                (微软公司)
                (截至 2011 年 3 月)</dd>

            <dt>参与：</dt>
            <dd>
                <a href="https://github.com/w3c/user-timing/">GitHub w3c/user-timing</a>
            </dd>
            <dd>
                <a href="https://github.com/w3c/user-timing/issues/">提交错误报告</a>
            </dd>
            <dd>
                <a href="https://github.com/w3c/user-timing/commits/gh-pages">提交历史</a>
            </dd>
            <dd>
                <a href="https://github.com/w3c/user-timing/pulls/">拉取请求</a>
            </dd>
            <dt>实现：</dt>
            <dd>
                <a href="http://caniuse.com/#feat=user-timing">Can I use User Timing?</a>
            </dd>
        </dl>
        <p>
            请检查
            <a href="https://www.w3.org/2019/02/user-timing-2-errata.html"><strong>勘误表</strong></a>，了解发布后报告的错误或问题。
        </p>
        <p>
            另见
            <a href="https://www.w3.org/2003/03/Translations/byTechnology?technology=user-timing-2">
                <strong>翻译</strong></a>。
        </p>

        <p class="copyright">
            <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">版权</a>
            ©
            2019

            <a href="https://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a
                href="https://www.csail.mit.edu/"><abbr title="麻省理工学院">MIT</abbr></a>,
            <a href="https://www.ercim.eu/"><abbr title="欧洲信息和数学研究联盟">ERCIM</abbr></a>, <a
                href="https://www.keio.ac.jp/">庆应义塾大学</a>,
            <a href="http://ev.buaa.edu.cn/">北航</a>)。

            <abbr title="World Wide Web Consortium">W3C</abbr>
            <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">法律免责声明</a>，
            <a href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">商标</a>
            和
            <a rel="license" href="https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document">许可
                文档</a>规则适用。
        </p>
        <hr title="分隔线">
    </div>
    <section id="abstract" class="introductory">
        <h2>摘要</h2>
        <p>本规范定义了一个接口，帮助 Web 开发人员通过提供高精度时间戳来衡量其应用程序的性能。</p>
    </section>
    <section id="sotd" class="introductory">
        <h2>本文档状态</h2>
        <p><em>本节描述了本文档在发布时的状态。其他文档可能会取代此文档。当前 <abbr title="万维网联盟">W3C</abbr> 出版物的列表及此技术报告的最新修订版可在 <a
                    href="https://www.w3.org/TR/"><abbr title="万维网联盟">W3C</abbr>
                    技术报告索引</a>上找到：https://www.w3.org/TR/。</em></p>
        <p>用户计时第 2 级旨在取代第 1 版 [<cite><a class="bibref" href="#bib-user-timing">USER-TIMING</a></cite>]，并包括：</p>
        <ul>
            <li>通过与 [<cite><a class="bibref" href="#bib-hr-time-2">HR-TIME-2</a></cite>] 集成，在 Web Workers 中支持 <a
                    href="#dom-performancemark" class="internalDFN"
                    data-link-type="dfn"><code>PerformanceMark</code></a> 和 <a href="#dom-performancemeasure"
                    class="internalDFN" data-link-type="dfn"><code>PerformanceMeasure</code></a> [<cite
                    class="respec-offending-element" title="规范部分中不允许使用规范性引用。请从引用 `[[!!WORKERS]]` 的开头删除'!'"
                    id="respec-offender-normative-references-in-informative-sections-are-not-allowed-remove-from-the-start-of-the-reference-workers"><a
                        class="bibref" href="#bib-workers">WORKERS</a></cite>];
            </li>
            <li>处理对 [<cite><a class="bibref" href="#bib-navigation-timing">NAVIGATION-TIMING</a></cite>] 中定义的
                <code>PerformanceTiming</code> 接口的标记名称的澄清。
            </li>
        </ul>
        <p>
            本文档由 <a href="https://www.w3.org/webperf/">Web 性能工作组</a> 作为建议标准发布。

        </p>
        <p>
            <a href="https://github.com/w3c/user-timing/issues/">GitHub 问题</a> 是讨论此规范的首选方式。

            或者，您可以将评论发送到我们的邮件列表。
            请发送至
            <a href="mailto:public-web-perf@w3.org?subject=%5BUserTiming%5D">public-web-perf@w3.org</a>
            (<a href="https://lists.w3.org/Archives/Public/public-web-perf/">存档</a>)
            并在电子邮件主题的开头添加 <code>[UserTiming]</code>。

        </p>
        <p>
            请参阅工作组的
            <a href="https://wpt.fyi/results/user-timing">实现报告</a>。
        </p>
        <p>
            本文档已经经过 <abbr title="万维网联盟">W3C</abbr> 成员、软件开发人员以及其他 <abbr title="万维网联盟">W3C</abbr> 小组和相关方的审查，并已得到 W3C
            总监的认可为 <abbr title="万维网联盟">W3C</abbr> 推荐标准。它是一个稳定的文档，可以用作参考资料或被其他文档引用。 <abbr title="万维网联盟">W3C</abbr>
            在制定推荐标准时的作用是引起对该规范的关注并推动其广泛部署。这提高了 Web 的功能性和互操作性。
        </p>
        <p>

            本文档由一个根据 <a href="https://www.w3.org/Consortium/Patent-Policy/"><abbr title="万维网联盟">W3C</abbr> 专利政策</a>
            运营的小组制作。



            <abbr title="万维网联盟">W3C</abbr> 维护了一个 <a rel="disclosure"
                href="https://www.w3.org/2004/01/pp-impl/45211/status">公开的专利披露列表</a>，该列表列出了与小组交付物相关的任何专利披露；该页面还包括披露专利的说明。任何了解包含
            <a href="https://www.w3.org/Consortium/Patent-Policy/#def-essential">必要声明</a> 的专利的个人必须根据 <a
                href="https://www.w3.org/Consortium/Patent-Policy/#sec-Disclosure">W3C 专利政策第 6 节</a> 披露信息。


        </p>
        <p>
            本文档受 <a id="w3c_process_revision" href="https://www.w3.org/2018/Process-20180201/">2018 年 2 月 1 日 W3C
                过程文档</a> 管理。
        </p>
    </section>
    <nav id="toc">
        <h2 class="introductory" id="table-of-contents">目录</h2>
        <ol class="toc">
            <li class="tocline"><a class="tocxref" href="#introduction"><span class="secno">1. </span>简介</a>
            </li>
            <li class="tocline"><a class="tocxref" href="#conformance"><span class="secno">2. </span>符合性</a>
            </li>
            <li class="tocline"><a class="tocxref" href="#user-timing"><span class="secno">3. </span><span
                        data-dfn-type="dfn">用户计时</span></a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#extensions-performance-interface"><span
                                class="secno">3.1 </span>扩展
                            <code><span data-dfn-for="" data-dfn-type="dfn" data-idl="interface" data-title="Performance"><span class="formerLink">Performance</span></span></code>
                            接口</a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#mark-method"><span class="secno">3.1.1
                                    </span><span data-dfn-for="performance" data-dfn-type="dfn" data-idl="operation"
                                        data-title="mark()" data-type="void"
                                        data-lt="performance.mark()|performance.mark|mark()|mark"><code>mark()</code></span>
                                    方法</a></li>
                            <li class="tocline"><a class="tocxref" href="#clearmarks-method"><span class="secno">3.1.2
                                    </span><span data-dfn-for="performance" data-dfn-type="dfn" data-idl="operation"
                                        data-title="clearMarks()" data-type="void"
                                        data-lt="performance.clearmarks()|performance.clearmarks|clearmarks()|clearmarks"><code>clearMarks()</code></span>
                                    方法</a></li>
                            <li class="tocline"><a class="tocxref" href="#measure-method"><span class="secno">3.1.3
                                    </span><span data-dfn-for="performance" data-dfn-type="dfn" data-idl="operation"
                                        data-title="measure()" data-type="void"
                                        data-lt="performance.measure()|performance.measure|measure()|measure"><code>measure()</code></span>
                                    方法</a></li>
                            <li class="tocline"><a class="tocxref" href="#clearmeasures-method"><span
                                        class="secno">3.1.4 </span><span data-dfn-for="performance" data-dfn-type="dfn"
                                        data-idl="operation" data-title="clearMeasures()" data-type="void"
                                        data-lt="performance.clearmeasures()|performance.clearmeasures|clearmeasures()|clearmeasures"><code>clearMeasures()</code></span>
                                    方法</a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#performancemark"><span class="secno">3.2 </span>
                            <span data-dfn-for="" data-dfn-type="dfn" data-idl="interface"
                                data-title="PerformanceMark"><code>PerformanceMark</code></span>
                            接口</a></li>
                    <li class="tocline"><a class="tocxref" href="#performancemeasure"><span class="secno">3.3 </span>
                            <span data-dfn-for="" data-dfn-type="dfn" data-idl="interface"
                                data-title="PerformanceMeasure"><code>PerformanceMeasure</code></span>
                            接口</a>
                    </li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#processing"><span class="secno">4. </span>处理</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#convert-a-name-to-a-timestamp"><span class="secno">4.1
                            </span>将 <var>name</var> 转换为 <var>timestamp</var></a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#privacy-security"><span class="secno">5. </span>隐私与安全</a></li>
            <li class="tocline"><a class="tocxref" href="#acknowledgments"><span class="secno">A.
                    </span>致谢</a></li>
            <li class="tocline"><a class="tocxref" href="#references"><span class="secno">B. </span>参考资料</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#normative-references"><span class="secno">B.1
                            </span>规范性参考资料</a></li>
                    <li class="tocline"><a class="tocxref" href="#informative-references"><span class="secno">B.2
                            </span>参考性引用资料</a></li>
                </ol>
            </li>
        </ol>
    </nav>
    <section class="informative" id="introduction">
        <!--OddPage-->
        <h2 id="x1-introduction"><span class="secno">1. </span>介绍<a class="self-link" aria-label="§"
                href="#introduction"></a></h2>
        <p><em>本节为非规范性内容。</em></p>
        <p>Web 开发者需要评估和理解其应用程序的性能特征。尽管 JavaScript [<cite><a class="bibref" href="#bib-ecma-262">ECMA-262</a></cite>]
            提供了一种测量应用程序延迟的机制（通过 <code>Date.now()</code> 方法获取当前时间戳），但该时间戳的精度在不同的用户代理之间有所差异。</p>
        <p>本文档定义了 <a href="#dom-performancemark" class="internalDFN"
                data-link-type="dfn"><code>PerformanceMark</code></a> 和 <a href="#dom-performancemeasure"
                class="internalDFN" data-link-type="dfn"><code>PerformanceMeasure</code></a> 接口，以及对 <a
                href="#extensions-performance-interface"><code>Performance</code></a>
            接口的扩展，这些接口提供了高精度、单调递增的时间戳，帮助开发者更好地衡量其应用程序的性能特征。</p>
        <div class="informative">
            <p>以下脚本展示了开发者如何使用本文档中定义的接口来获取与开发者脚本相关的计时数据。</p>
            <div class="example" id="example-1">
                <div class="marker">
                    <a class="self-link" href="#example-1">示例 1</a>
                </div>
                <pre class="hljs javascript" aria-busy="false"><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">run</span>(<span class="hljs-params"></span>) </span>{
      performance.mark(<span class="hljs-string">"startTask1"</span>);
      <span class="hljs-keyword">await</span> doTask1(); <span class="hljs-comment">// 一些开发者代码</span>
      performance.mark(<span class="hljs-string">"endTask1"</span>);
    
      performance.mark(<span class="hljs-string">"startTask2"</span>);
      <span class="hljs-keyword">await</span> doTask2(); <span class="hljs-comment">// 一些开发者代码</span>
      performance.mark(<span class="hljs-string">"endTask2"</span>);
    
      <span class="hljs-comment">// 输出结果</span>
      <span class="hljs-keyword">const</span> entries = performance.getEntriesByType(<span class="hljs-string">"mark"</span>);
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> entry <span class="hljs-keyword">of</span> entries) {
        <span class="hljs-built_in">console</span>.table(entry.toJSON());
      }
    }
    run();</pre>
            </div>
            <div class="note" role="note" id="issue-container-generatedID">
                <div role="heading" class="note-title marker" id="h-note" aria-level="3"><span>注意</span></div>
                <p class="">[<cite><a class="bibref"
                            href="#bib-performance-timeline-2">PERFORMANCE-TIMELINE-2</a></cite>]
                    定义了两种用于检索记录的计量机制：<code>getEntries()</code> 和 <code>getEntriesByType()</code> 方法，以及
                    <code>PerformanceObserver</code> 接口。前者适用于在单个时间点按名称检索特定指标的情况，而后者针对希望在新指标可用时接收通知的情况进行了优化。
                </p>
            </div>
        </div>
    </section>
    <section id="conformance"><!--OddPage-->
        <h2 id="x2-conformance"><span class="secno">2. </span>符合性<a class="self-link" aria-label="§"
                href="#conformance"></a></h2>
        <p>
            除了标记为非规范性的部分，本规范中的所有作者指南、图表、示例和注释均为非规范性内容。
            本规范中的其他所有内容都是规范性的。
        </p>
        <p>
            关键字 <em class="rfc2119">MAY</em> 和 <em class="rfc2119">MUST</em> 应按照
            [<cite><a class="bibref" href="#bib-rfc2119">RFC2119</a></cite>] 中的说明进行解释。
        </p>
        <p>一些符合性要求以对属性、方法或对象的要求形式表达。这些要求应解释为对用户代理的要求。</p>

        <p>本规范中的IDL片段<em class="rfc2119" title="MUST">必须</em>按照Web IDL规范中所述的方式解释为符合性IDL片段。
            [<cite><a class="bibref" href="#bib-webidl">WEBIDL</a></cite>]
        </p>
    </section>
    <section id="user-timing">
        <!--OddPage-->
        <h2 id="x3-user-timing"><span class="secno">3. </span><dfn data-dfn-type="dfn" id="dfn-user-timing">用户计时</dfn><a
                class="self-link" aria-label="§" href="#user-timing"></a></h2>
        <section id="extensions-performance-interface" data-dfn-for="Performance" data-link-for="Performance">
            <h3 id="x3-1-extensions-to-the-performance-interface"><span class="secno">3.1 </span>扩展
                <code><dfn data-dfn-for="" data-dfn-type="dfn" id="dom-performance" data-idl="interface" data-title="Performance"><a href="https://www.w3.org/TR/hr-time-2/#dfn-performance">Performance</a></dfn></code>
                接口<a class="self-link" aria-label="§" href="#extensions-performance-interface"></a>
            </h3>
            <p><a data-link-type="dfn"
                    href="https://www.w3.org/TR/hr-time-2/#dfn-performance"><code>Performance</code></a>接口定义在
                [<cite><a class="bibref" href="#bib-hr-time-2">HR-TIME-2</a></cite>] 中。
            </p>
            <div>
                <pre class="def idl"><span data-idl="" class="idlInterface" id="idl-def-performance-partial-1" data-title="Performance">partial interface <span class="idlID"><a data-link-for="" data-lt="" data-link-type="dfn" href="https://www.w3.org/TR/hr-time-2/#dfn-performance"><code>Performance</code></a></span> {<span data-idl="" class="idlMethod" id="idl-def-performance-mark-markname" data-title="mark" data-dfn-for="performance"><span class="idlType">
        void</span> <span class="idlName"><a data-link-for="performance" data-lt="performance.mark()|performance.mark|mark()|mark" href="#dom-performance-mark" class="internalDFN" data-link-type="dfn"><code>mark</code></a></span>(<span class="idlType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlParamName">markName</span>);</span><span data-idl="" class="idlMethod" id="idl-def-performance-clearmarks-markname" data-title="clearMarks" data-dfn-for="performance"><span class="idlType">
        void</span> <span class="idlName"><a data-link-for="performance" data-lt="performance.clearmarks()|performance.clearmarks|clearmarks()|clearmarks" href="#dom-performance-clearmarks" class="internalDFN" data-link-type="dfn"><code>clearMarks</code></a></span>(optional<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlParamName">markName</span>);</span><span data-idl="" class="idlMethod" id="idl-def-performance-measure-measurename-startmark-endmark" data-title="measure" data-dfn-for="performance"><span class="idlType">
        void</span> <span class="idlName"><a data-link-for="performance" data-lt="performance.measure()|performance.measure|measure()|measure" href="#dom-performance-measure" class="internalDFN" data-link-type="dfn"><code>measure</code></a></span>(<span class="idlType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlParamName">measureName</span>, optional<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlParamName">startMark</span>, optional<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlParamName">endMark</span>);</span><span data-idl="" class="idlMethod" id="idl-def-performance-clearmeasures-measurename" data-title="clearMeasures" data-dfn-for="performance"><span class="idlType">
        void</span> <span class="idlName"><a data-link-for="performance" data-lt="performance.clearmeasures()|performance.clearmeasures|clearmeasures()|clearmeasures" href="#dom-performance-clearmeasures" class="internalDFN" data-link-type="dfn"><code>clearMeasures</code></a></span>(optional<span class="idlType"> <a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlParamName">measureName</span>);</span>
    };</span></pre>
            </div>
            <section id="mark-method">
                <h4 id="x3-1-1-mark-method"><span class="secno">3.1.1 </span><dfn data-dfn-for="performance"
                        data-dfn-type="dfn" id="dom-performance-mark" data-idl="operation" data-title="mark()"
                        data-type="void"
                        data-lt="performance.mark()|performance.mark|mark()|mark"><code>mark()</code></dfn> 方法<a
                        class="self-link" aria-label="§" href="#mark-method"></a></h4>
                <p>存储带有相关名称（"mark"）的时间戳。它 <em class="rfc2119" title="MUST">必须</em> 按照以下步骤运行：</p>
                <ol>
                    <li>如果 <a href="https://www.w3.org/TR/html51/webappapis.html#global-object">全局对象</a> 是一个
                        <code>Window</code> 对象，并且 <var>markName</var> 使用的名称与
                        <code><a href="https://www.w3.org/TR/navigation-timing/#performancetiming">PerformanceTiming</a></code>
                        接口中的某个 <a href="https://heycam.github.io/webidl/#dfn-read-only">只读属性</a> 相同，
                        <a href="https://heycam.github.io/webidl/#dfn-throw">抛出</a> 一个
                        <a href="https://heycam.github.io/webidl/#syntaxerror"><code>SyntaxError</code></a>。
                    </li>
                    <li>创建一个新的 <a href="#dom-performancemark" class="internalDFN"
                            data-link-type="dfn"><code>PerformanceMark</code></a> 对象（<var>entry</var>）。</li>
                    <li>将 <var>entry</var> 的 <code>name</code> 属性设置为 <var>markName</var>。</li>
                    <li>将 <var>entry</var> 的 <code>entryType</code> 属性设置为 <code>DOMString "mark"</code>。</li>
                    <li>将 <var>entry</var> 的 <code>startTime</code> 属性设置为通过 <code>Performance</code> 对象的
                        <a href="https://www.w3.org/TR/hr-time-2/#dom-performance-now"><code>now()</code></a> 方法返回的值。
                    </li>
                    <li>将 <var>entry</var> 的 <code>duration</code> 属性设置为 <code>0</code>。</li>
                    <li><a href="https://www.w3.org/TR/performance-timeline-2/#dfn-queue-a-performanceentry">排队</a>
                        <var>entry</var>。
                    </li>
                    <li id="stored_mark">将 <var>entry</var> 添加到 <a
                            href="https://www.w3.org/TR/performance-timeline-2/#dfn-performance-entry-buffer">性能条目缓冲区</a>。
                    </li>
                    <li>返回 <strong>undefined</strong>。</li>
                </ol>
            </section>
            <section id="clearmarks-method">
                <h4 id="x3-1-2-clearmarks-method"><span class="secno">3.1.2 </span><dfn data-dfn-for="performance"
                        data-dfn-type="dfn" id="dom-performance-clearmarks" data-idl="operation"
                        data-title="clearMarks()" data-type="void"
                        data-lt="performance.clearmarks()|performance.clearmarks|clearmarks()|clearmarks"><code>clearMarks()</code></dfn>
                    方法<a class="self-link" aria-label="§" href="#clearmarks-method"></a></h4>
                <p>删除带有相关名称的已存储时间戳。它 <em class="rfc2119" title="MUST">必须</em> 按照以下步骤运行：</p>
                <ol>
                    <li>如果省略了 <var>markName</var>，则从 <a href="#dom-performancemark" class="internalDFN"
                            data-link-type="dfn"><code>PerformanceMark</code></a> 对象中删除所有条目，并从
                        <a
                            href="https://www.w3.org/TR/performance-timeline-2/#dfn-performance-entry-buffer">性能条目缓冲区</a>中删除。
                    </li>
                    <li>否则，删除所有 <a href="#dom-performancemark" class="internalDFN"
                            data-link-type="dfn"><code>PerformanceMark</code></a> 对象，其名称与 <var>markName</var> 匹配，并列在
                        <a href="https://www.w3.org/TR/performance-timeline-2/#dfn-performance-entry-buffer">性能条目缓冲区</a>
                        中。
                    </li>
                    <li>返回 <strong>undefined</strong>。</li>
                </ol>
            </section>
            <section id="measure-method">
                <h4 id="x3-1-3-measure-method"><span class="secno">3.1.3 </span><dfn data-dfn-for="performance"
                        data-dfn-type="dfn" id="dom-performance-measure" data-idl="operation" data-title="measure()"
                        data-type="void"
                        data-lt="performance.measure()|performance.measure|measure()|measure"><code>measure()</code></dfn>
                    方法<a class="self-link" aria-label="§" href="#measure-method"></a></h4>
                <p>存储两个标记之间的 <code>DOMHighResTimeStamp</code> 持续时间以及相关的名称（“measure”）。它
                    <em class="rfc2119" title="MUST">必须</em> 按照以下步骤运行：
                </p>
                <ol>
                    <li>令 <var>end time</var> 为 <code>0</code>。</li>
                    <li>如果省略了 <var>endMark</var>，则将 <var>end time</var> 设置为通过
                        <code>Performance</code> 对象的
                        <a href="https://www.w3.org/TR/hr-time-2/#dom-performance-now"><code>now()</code></a> 方法返回的值。否则：
                        <ol>
                            <li>如果 <var>endMark</var> 的名称与
                                <code><a href="https://www.w3.org/TR/navigation-timing/#performancetiming">PerformanceTiming</a></code>
                                接口中的某个<a href="https://heycam.github.io/webidl/#dfn-read-only">只读属性</a> 相同，使用
                                <var>endMark</var> 的值运行 <a href="#dfn-convert-a-name-to-a-timestamp" class="internalDFN"
                                    data-link-type="dfn">将名称转换为时间戳</a> 算法，并将 <var>name</var> 设置为
                                <var>endMark</var>。
                            </li>
                            <li>否则，将 <var>end time</var> 设置为在 <a href="#dom-performancemark" class="internalDFN"
                                    data-link-type="dfn"><code>PerformanceMark</code></a> 对象的 <code>startTime</code>
                                属性中，
                                其名称与 <var>endMark</var> 的值匹配的最近一次出现的条目。如果未找到匹配的条目，
                                <a href="https://heycam.github.io/webidl/#dfn-throw">抛出</a> 一个
                                <a href="https://heycam.github.io/webidl/#syntaxerror"><code>SyntaxError</code></a>。
                            </li>
                        </ol>
                    </li>
                    <li>如果省略了 <var>startMark</var>，则将 <var>start time</var> 设置为 <code>0</code>。否则：
                        <ol>
                            <li>如果 <var>startMark</var> 的名称与
                                <code><a href="https://www.w3.org/TR/navigation-timing/#performancetiming">PerformanceTiming</a></code>
                                接口中的某个<a href="https://heycam.github.io/webidl/#dfn-read-only">只读属性</a> 相同，使用
                                <var>startMark</var> 的值运行 <a href="#dfn-convert-a-name-to-a-timestamp"
                                    class="internalDFN" data-link-type="dfn">将名称转换为时间戳</a> 算法，并将 <var>name</var> 设置为
                                <var>startMark</var>。
                            </li>
                            <li>否则，将 <var>start time</var> 设置为在 <a href="#dom-performancemark" class="internalDFN"
                                    data-link-type="dfn"><code>PerformanceMark</code></a> 对象的 <code>startTime</code>
                                属性中，
                                其名称与 <var>startMark</var> 的值匹配的最近一次出现的条目。如果未找到匹配的条目，
                                <a href="https://heycam.github.io/webidl/#dfn-throw">抛出</a> 一个
                                <a href="https://heycam.github.io/webidl/#syntaxerror"><code>SyntaxError</code></a>。
                            </li>
                        </ol>
                    </li>
                    <li>创建一个新的 <a href="#dom-performancemeasure" class="internalDFN"
                            data-link-type="dfn"><code>PerformanceMeasure</code></a> 对象（<var>entry</var>）。</li>
                    <li>将 <var>entry</var> 的 <code>name</code> 属性设置为 <var>measureName</var>。</li>
                    <li>将 <var>entry</var> 的 <code>entryType</code> 属性设置为 <code>DOMString "measure"</code>。</li>
                    <li>将 <var>entry</var> 的 <code>startTime</code> 属性设置为 <var>start time</var>。</li>
                    <li>将 <var>entry</var> 的 <code>duration</code> 属性设置为从 <var>start time</var> 到 <var>end time</var>
                        的持续时间。所得的持续时间值 <em class="rfc2119" title="MAY">可以</em> 为负值。</li>
                    <li><a href="https://www.w3.org/TR/performance-timeline-2/#dfn-queue-a-performanceentry">排队</a>
                        <var>entry</var>。
                    </li>
                    <li id="stored_measure">将 <var>entry</var> 添加到 <a
                            href="https://www.w3.org/TR/performance-timeline-2/#dfn-performance-entry-buffer">性能条目缓冲区</a>。
                    </li>
                    <li>返回 <strong>undefined</strong>。</li>
                </ol>
            </section>
            <section id="clearmeasures-method">
                <h4 id="x3-1-4-clearmeasures-method"><span class="secno">3.1.4 </span><dfn data-dfn-for="performance"
                        data-dfn-type="dfn" id="dom-performance-clearmeasures" data-idl="operation"
                        data-title="clearMeasures()" data-type="void"
                        data-lt="performance.clearmeasures()|performance.clearmeasures|clearmeasures()|clearmeasures"><code>clearMeasures()</code></dfn>
                    方法<a class="self-link" aria-label="§" href="#clearmeasures-method"></a></h4>
                <p>删除带有相关名称的已存储时间戳。它 <em class="rfc2119" title="MUST">必须</em> 按照以下步骤运行：</p>
                <ol>
                    <li>如果省略了 <var>measureName</var>，则从 <a href="#dom-performancemeasure" class="internalDFN"
                            data-link-type="dfn"><code>PerformanceMeasure</code></a> 对象中删除所有条目，并从
                        <a
                            href="https://www.w3.org/TR/performance-timeline-2/#dfn-performance-entry-buffer">性能条目缓冲区</a>中删除。
                    </li>
                    <li>否则，删除所有 <a href="#dom-performancemeasure" class="internalDFN"
                            data-link-type="dfn"><code>PerformanceMeasure</code></a> 对象，其名称与 <var>measureName</var>
                        匹配，并列在
                        <a href="https://www.w3.org/TR/performance-timeline-2/#dfn-performance-entry-buffer">性能条目缓冲区</a>
                        中。
                    </li>
                    <li>返回 <strong>undefined</strong>。</li>
                </ol>
            </section>
        </section>
        <section id="performancemark" data-dfn-for="PerformanceMark" data-link-for="PerformanceMark">
            <h3 id="x3-2-the-performancemark-interface"><span class="secno">3.2 </span><dfn data-dfn-for=""
                    data-dfn-type="dfn" id="dom-performancemark" data-idl="interface"
                    data-title="PerformanceMark"><code>PerformanceMark</code></dfn> 接口<a class="self-link"
                    aria-label="§" href="#performancemark"></a></h3>
            <p><a href="#dom-performancemark" class="internalDFN" data-link-type="dfn"><code>PerformanceMark</code></a>
                接口还通过
                <a href="#dom-performance-mark" class="internalDFN"
                    data-link-type="dfn"><code>performance.mark</code></a> 方法将创建的标记暴露给
                <a href="https://www.w3.org/TR/performance-timeline-2/#dfn-performance-timeline">性能时间轴</a>。
            </p>
            <div>
                <pre class="def idl"><span data-idl="" class="idlInterface" id="idl-def-performancemark" data-title="PerformanceMark">[<span class="extAttr"><a href="https://heycam.github.io/webidl/#Exposed">Exposed</a>=(Window,Worker)</span>]
    interface <span class="idlID"><a data-link-for="" data-lt="" href="#dom-performancemark" class="internalDFN" data-link-type="dfn"><code>PerformanceMark</code></a></span> : <span class="idlSuperclass">PerformanceEntry</span> {
    };</span></pre>
            </div>
            <p><a href="#dom-performancemark" class="internalDFN" data-link-type="dfn"><code>PerformanceMark</code></a>
                接口扩展了
                <a href="https://www.w3.org/TR/performance-timeline-2/#dom-performanceentry">PerformanceEntry</a>
                接口的以下属性：
            </p>
            <p><code>name</code> 属性必须返回标记的名称。</p>
            <p><code>entryType</code> 属性必须返回 <a
                    href="https://heycam.github.io/webidl/#idl-DOMString"><code>DOMString</code></a>
                <code>"mark"</code>。
            </p>
            <p><code>startTime</code> 属性必须返回带有标记时间值的 <a
                    href="https://www.w3.org/TR/hr-time-2/#idl-def-domhighrestimestamp"><code>DOMHighResTimeStamp</code></a>。
            </p>
            <p><code>duration</code> 属性必须返回值为 <code>0</code> 的 <a
                    href="https://www.w3.org/TR/hr-time-2/#idl-def-domhighrestimestamp"><code>DOMHighResTimeStamp</code></a>。
            </p>
        </section>
        <section id="performancemeasure" data-dfn-for="PerformanceMeasure" data-link-for="PerformanceMeasure">
            <h3 id="x3-3-the-performancemeasure-interface"><span class="secno">3.3 </span><dfn data-dfn-for=""
                    data-dfn-type="dfn" id="dom-performancemeasure" data-idl="interface"
                    data-title="PerformanceMeasure"><code>PerformanceMeasure</code></dfn> 接口<a class="self-link"
                    aria-label="§" href="#performancemeasure"></a></h3>
            <p><a href="#dom-performancemeasure" class="internalDFN"
                    data-link-type="dfn"><code>PerformanceMeasure</code></a> 接口还通过
                <a href="#dom-performance-measure" class="internalDFN"
                    data-link-type="dfn"><code>performance.measure</code></a> 方法将创建的测量暴露给
                <a href="https://www.w3.org/TR/performance-timeline-2/#performance-timeline">性能时间轴</a>。
            </p>
            <div>
                <pre class="def idl"><span data-idl="" class="idlInterface" id="idl-def-performancemeasure" data-title="PerformanceMeasure">[<span class="extAttr"><a href="https://heycam.github.io/webidl/#Exposed">Exposed</a>=(Window,Worker)</span>]
    interface <span class="idlID"><a data-link-for="" data-lt="" href="#dom-performancemeasure" class="internalDFN" data-link-type="dfn"><code>PerformanceMeasure</code></a></span> : <span class="idlSuperclass">PerformanceEntry</span> {
    };</span></pre>
            </div>
            <p><a href="#dom-performancemeasure" class="internalDFN"
                    data-link-type="dfn"><code>PerformanceMeasure</code></a> 接口扩展了
                <a href="https://www.w3.org/TR/performance-timeline-2/#dom-performanceentry">PerformanceEntry</a>
                接口的以下属性：
            </p>
            <p><code>name</code> 属性必须返回测量的名称。</p>
            <p><code>entryType</code> 属性必须返回 <a
                    href="https://heycam.github.io/webidl/#idl-DOMString"><code>DOMString</code></a>
                <code>"measure"</code>。
            </p>
            <p><code>startTime</code> 属性必须返回带有测量起始标记的 <a
                    href="https://www.w3.org/TR/hr-time-2/#idl-def-domhighrestimestamp"><code>DOMHighResTimeStamp</code></a>。
            </p>
            <p><code>duration</code> 属性必须返回测量的持续时间的 <a
                    href="https://www.w3.org/TR/hr-time-2/#idl-def-domhighrestimestamp"><code>DOMHighResTimeStamp</code></a>。
            </p>
        </section>
    </section>
    <section id="processing">
        <!--OddPage-->
        <h2 id="x4-processing"><span class="secno">4. </span>处理<a class="self-link" aria-label="§"
                href="#processing"></a></h2>
        <p>实现用户计时API的用户代理必须执行以下步骤：</p>
        <ol>
            <li>运行 <a
                    href="https://www.w3.org/TR/performance-timeline-2/#dfn-register-a-performance-entry-type">注册性能条目类型</a>
                算法，输入为 <code>"mark"</code>。</li>
            <li>运行 <a
                    href="https://www.w3.org/TR/performance-timeline-2/#dfn-register-a-performance-entry-type">注册性能条目类型</a>
                算法，输入为 <code>"measure"</code>。</li>
        </ol>
        <section id="convert-a-name-to-a-timestamp">
            <h3 id="x4-1-convert-a-name-to-a-timestamp"><span class="secno">4.1 </span>将 <var>name</var> 转换为
                <var>timestamp</var><a class="self-link" aria-label="§" href="#convert-a-name-to-a-timestamp"></a>
            </h3>
            <p>要在给定 <var>name</var> 的情况下，将 <var>name</var> 转换为 <a
                    href="https://www.w3.org/TR/hr-time-2/#idl-def-domhighrestimestamp">时间戳</a>，如果该名称是
                <code><a href="https://www.w3.org/TR/navigation-timing/#performancetiming">PerformanceTiming</a></code>
                接口中的一个 <a href="https://heycam.github.io/webidl/#dfn-read-only">只读属性</a>，请执行以下步骤：
            </p>
            <ol>
                <li>如果 <a href="https://www.w3.org/TR/html51/webappapis.html#global-object">全局对象</a> 不是一个
                    <code>Window</code> 对象，<a href="https://heycam.github.io/webidl/#dfn-throw">抛出</a> 一个
                    <a href="https://heycam.github.io/webidl/#syntaxerror"><code>SyntaxError</code></a>。
                </li>
                <li>如果 <var>name</var> 是 <code>navigationStart</code>，返回 <code>0</code>。</li>
                <li>将 <var>startTime</var> 设置为
                    <code><a href="https://www.w3.org/TR/navigation-timing/#performancetiming">PerformanceTiming</a></code>
                    接口中的 <code>navigationStart</code> 的值。
                </li>
                <li>将 <var>endTime</var> 设置为
                    <code><a href="https://www.w3.org/TR/navigation-timing/#performancetiming">PerformanceTiming</a></code>
                    接口中的 <var>name</var> 的值。
                </li>
                <li>如果 <var>endTime</var> 为 <code>0</code>，<a href="https://heycam.github.io/webidl/#dfn-throw">抛出</a>
                    一个 <a
                        href="https://heycam.github.io/webidl/#invalidaccesserror"><code>InvalidAccessError</code></a>。
                </li>
                <li>返回 <var>endTime</var> 减去 <var>startTime</var> 的结果。</li>
            </ol>
            <div class="note" role="note" id="issue-container-generatedID-0">
                <div role="heading" class="note-title marker" id="h-note-0" aria-level="4"><span>注</span></div>
                <p class="">
                    <a href="https://www.w3.org/TR/navigation-timing/#performancetiming">PerformanceTiming</a> 接口定义在
                    [<cite><a class="bibref" href="#bib-navigation-timing">NAVIGATION-TIMING</a></cite>] 中，并且现在被认为是过时的。
                    <a href="https://www.w3.org/TR/navigation-timing/#performancetiming">PerformanceTiming</a>
                    接口中的名称仍然支持以保持向后兼容性，
                    但没有计划将此功能扩展到 [<cite><a class="bibref"
                            href="#bib-navigation-timing-2">NAVIGATION-TIMING-2</a></cite>] 定义的
                    <a
                        href="https://www.w3.org/TR/navigation-timing-2/#dom-performancenavigationtiming">PerformanceNavigationTiming</a>
                    接口（或其他接口）中的名称。
                </p>
            </div>
        </section>
    </section>
    <section id="privacy-security" class="informative">
        <!--OddPage-->
        <h2 id="x5-privacy-and-security"><span class="secno">5. </span>隐私与安全<a class="self-link" aria-label="§"
                href="#privacy-security"></a></h2>
        <p><em>本节为非规范性。</em></p>
        <p>本规范中定义的接口暴露了页面上特定JavaScript活动的潜在敏感计时信息。
            有关暴露高分辨率计时信息的隐私和安全考虑，请参阅 [<cite><a class="bibref" href="#bib-hr-time-2">HR-TIME-2</a></cite>]。
        </p>
        <p>由于Web平台的设计原则是，页面上包含的任何脚本与同一页面上包含的任何其他脚本拥有相同的访问权限，
            无论这些脚本的来源如何，本规范定义的接口不对记录或检索已记录的计时信息施加任何限制 - 即页面上包含的任何脚本记录的用户计时标记或测量可以被同一页面上运行的任何其他脚本读取，无论其来源如何。
        </p>
    </section>
    <section class="appendix" id="acknowledgments">
        <!--OddPage-->
        <h2 id="a-acknowledgments"><span class="secno">A. </span>致谢<a class="self-link" aria-label="§"
                href="#acknowledgments"></a></h2>
        <p>感谢以下人员对本工作的贡献：
            James Simonsen,
            Jason Weber,
            Nic Jansma,
            Philippe Le Hegaret,
            Karen Anderson,
            Steve Souders,
            Sigbjorn Vik,
            Todd Reifsteck,
            Tony Gentilcore。
        </p>
    </section>

    <section id="references" class="appendix">
        <!--OddPage-->
        <h2 id="b-references"><span class="secno">B. </span>参考资料<a class="self-link" aria-label="§"
                href="#references"></a></h2>

        <section id="normative-references">
            <h3 id="b-1-normative-references"><span class="secno">B.1 </span>规范性参考资料<a class="self-link" aria-label="§"
                    href="#normative-references"></a></h3>
            <dl class="bibliography">
                <dt id="bib-hr-time-2">[HR-TIME-2]</dt>
                <dd><a href="https://www.w3.org/TR/hr-time-2/"><cite>High Resolution Time Level 2</cite></a>。Ilya
                    Grigorik；James Simonsen；Jatinder Mann。W3C。2018年3月1日。W3C 候选推荐标准。URL: <a
                        href="https://www.w3.org/TR/hr-time-2/">https://www.w3.org/TR/hr-time-2/</a></dd>
                <dt id="bib-html51">[HTML51]</dt>
                <dd><a href="https://www.w3.org/TR/html51/"><cite>HTML 5.1 第二版</cite></a>。Steve Faulkner；Arron
                    Eicholz；Travis Leithead；Alex Danilo。W3C。2017年10月3日。W3C推荐标准。URL: <a
                        href="https://www.w3.org/TR/html51/">https://www.w3.org/TR/html51/</a></dd>
                <dt id="bib-navigation-timing">[NAVIGATION-TIMING]</dt>
                <dd><a href="https://www.w3.org/TR/navigation-timing/"><cite>导航计时</cite></a>。Zhiheng Wang。
                    W3C。2012年12月17日。W3C推荐标准。URL: <a
                        href="https://www.w3.org/TR/navigation-timing/">https://www.w3.org/TR/navigation-timing/</a>
                </dd>
                <dt id="bib-performance-timeline-2">[PERFORMANCE-TIMELINE-2]</dt>
                <dd><a href="https://www.w3.org/TR/performance-timeline-2/"><cite>性能时间线 第2级</cite></a>。Ilya
                    Grigorik。W3C。2019年1月10日。W3C工作草案。URL: <a
                        href="https://www.w3.org/TR/performance-timeline-2/">https://www.w3.org/TR/performance-timeline-2/</a>
                </dd>
                <dt id="bib-rfc2119">[RFC2119]</dt>
                <dd><a href="https://tools.ietf.org/html/rfc2119"><cite>用于在RFC中指示需求级别的关键字</cite></a>。S.
                    Bradner。IETF。1997年3月。当前最佳实践。URL: <a
                        href="https://tools.ietf.org/html/rfc2119">https://tools.ietf.org/html/rfc2119</a></dd>
                <dt id="bib-webidl">[WEBIDL]</dt>
                <dd><a href="https://heycam.github.io/webidl/"><cite>Web IDL</cite></a>。Cameron McCormack；Boris
                    Zbarsky；Tobie Langel。W3C。2016年12月15日。W3C编辑草案。URL: <a
                        href="https://heycam.github.io/webidl/">https://heycam.github.io/webidl/</a></dd>
                <dt id="bib-workers">[WORKERS]</dt>
                <dd><a href="https://www.w3.org/TR/workers/"><cite>Web Workers</cite></a>。Ian
                    Hickson。W3C。2015年9月24日。W3C工作草案。URL: <a
                        href="https://www.w3.org/TR/workers/">https://www.w3.org/TR/workers/</a></dd>
            </dl>
        </section>
        <section id="informative-references">
            <h3 id="b-2-informative-references"><span class="secno">B.2 </span>参考性引用资料<a class="self-link"
                    aria-label="§" href="#informative-references"></a></h3>
            <dl class="bibliography">
                <dt id="bib-ecma-262">[ECMA-262]</dt>
                <dd><a href="https://tc39.github.io/ecma262/"><cite>ECMAScript 语言规范</cite></a>。Ecma国际。URL: <a
                        href="https://tc39.github.io/ecma262/">https://tc39.github.io/ecma262/</a>
                </dd>
                <dt id="bib-navigation-timing-2">[NAVIGATION-TIMING-2]</dt>
                <dd><a href="https://www.w3.org/TR/navigation-timing-2/"><cite>导航计时 第2级</cite></a>。Ilya Grigorik；Tobin
                    Titus；Jatinder Mann；Arvind Jain。W3C。2018年11月30日。W3C工作草案。URL: <a
                        href="https://www.w3.org/TR/navigation-timing-2/">https://www.w3.org/TR/navigation-timing-2/</a>
                </dd>
                <dt id="bib-user-timing">[USER-TIMING]</dt>
                <dd><a href="https://www.w3.org/TR/user-timing/"><cite>用户计时</cite></a>。Jatinder Mann；Zhiheng
                    Wang；Anderson Quach。W3C。2013年12月12日。W3C推荐标准。URL: <a
                        href="https://www.w3.org/TR/user-timing/">https://www.w3.org/TR/user-timing/</a></dd>
            </dl>
        </section>
    </section>
    <p role="navigation" id="back-to-top"><a href="#title"><abbr title="返回顶部">↑</abbr></a></p>
    <script src="https://www.w3.org/scripts/TR/2016/fixup.js"></script>
    <script src="/dropdown.js"></script>
</body>

