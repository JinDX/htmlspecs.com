<!doctype html>
<html lang="zh-hans">

<head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
    <title>网页动画</title>
    <meta content="WD" name="w3c-status">
    <meta content="Bikeshed version 63e66730b, updated Tue Oct 25 12:35:05 2022 -0700" name="generator">
    <link href="https://www.w3.org/TR/web-animations-1/" rel="canonical">
    <meta content="f94c72bb13e60955556d99fef15fa8aef22c1b34" name="document-revision">
    <style>
        .informative-bg {
            margin: 1.5em 0 1em;
            padding: 1em;
            margin-top: 1em;
            background: #efe;
            border: green 1px dotted;
        }

        @media (prefers-color-scheme: dark) {
            .informative-bg {
                background: rgba(255, 255, 255, .05);
            }
        }

        div.informative-bg *:last-child {
            margin-bottom: 0;
        }

        div.informative-bg p:first-child {
            margin-top: 0;
        }

        div.informative-bg h2,
        div.informative-bg h3,
        div.informative-bg h4 {
            background: none;
        }

        div.switch>dl {
            padding-left: 2em;
        }

        div.switch>dl>dt>p {
            display: inline;
        }

        div.switch>dl>dt:before {
            content: '\21AA';
            padding: 0 0.5em 0 0;
            display: inline-block;
            width: 1em;
            text-align: right;
            line-height: 0.5em;
            margin-left: -1.3em;
        }

        .attributes::before,
        .methods::before,
        .parameters::before,
        .exceptions::before,
        .constructors::before,
        .members::before {
            font: bold 100% sans-serif;
            text-align: left;
            margin: 1.33em 0px;
            color: var(--heading-text, #005A9C);
        }

        .attributes::before {
            content: 'Attributes'
        }

        .methods::before {
            content: 'Methods'
        }

        .parameters::before {
            content: 'Parameters'
        }

        .exceptions::before {
            content: 'Exceptions'
        }

        .constructors::before {
            content: 'Constructors'
        }

        .members::before {
            content: 'Dictionary members'
        }

        .param,
        .exceptionname,
        .estype,
        .esvalue {
            font-weight: bold;
        }

        .formula {
            display: block;
            margin: .5em 2em;
        }
    </style>
    <style>
        /* style-autolinks */

        .css.css,
        .property.property,
        .descriptor.descriptor {
            color: var(--a-normal-text);
            font-size: inherit;
            font-family: inherit;
        }

        .css::before,
        .property::before,
        .descriptor::before {
            content: "‘";
        }

        .css::after,
        .property::after,
        .descriptor::after {
            content: "’";
        }

        .property,
        .descriptor {
            /* Don't wrap property and descriptor names */
            white-space: nowrap;
        }

        .type {
            /* CSS value <type> */
            font-style: italic;
        }

        pre .property::before,
        pre .property::after {
            content: "";
        }

        [data-link-type="property"]::before,
        [data-link-type="propdesc"]::before,
        [data-link-type="descriptor"]::before,
        [data-link-type="value"]::before,
        [data-link-type="function"]::before,
        [data-link-type="at-rule"]::before,
        [data-link-type="selector"]::before,
        [data-link-type="maybe"]::before {
            content: "‘";
        }

        [data-link-type="property"]::after,
        [data-link-type="propdesc"]::after,
        [data-link-type="descriptor"]::after,
        [data-link-type="value"]::after,
        [data-link-type="function"]::after,
        [data-link-type="at-rule"]::after,
        [data-link-type="selector"]::after,
        [data-link-type="maybe"]::after {
            content: "’";
        }

        [data-link-type].production::before,
        [data-link-type].production::after,
        .prod [data-link-type]::before,
        .prod [data-link-type]::after {
            content: "";
        }

        [data-link-type=element],
        [data-link-type=element-attr] {
            font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
            font-size: .9em;
        }

        [data-link-type=element]::before {
            content: "<"
        }

        [data-link-type=element]::after {
            content: ">"
        }

        [data-link-type=biblio] {
            white-space: pre;
        }
    </style>
    <style>
        /* style-counters */

        body {
            counter-reset: example figure issue;
        }

        .issue {
            counter-increment: issue;
        }

        .issue:not(.no-marker)::before {
            content: "Issue " counter(issue);
        }

        .example {
            counter-increment: example;
        }

        .example:not(.no-marker)::before {
            content: "Example " counter(example);
        }

        .invalid.example:not(.no-marker)::before,
        .illegal.example:not(.no-marker)::before {
            content: "Invalid Example" counter(example);
        }

        figcaption {
            counter-increment: figure;
        }

        figcaption:not(.no-marker)::before {
            content: "Figure " counter(figure) " ";
        }
    </style>
    <style>
        /* style-dfn-panel */

        :root {
            --dfnpanel-bg: #ddd;
            --dfnpanel-text: var(--text);
        }

        .dfn-panel {
            position: absolute;
            z-index: 35;
            height: auto;
            width: -webkit-fit-content;
            width: fit-content;
            max-width: 300px;
            max-height: 500px;
            overflow: auto;
            padding: 0.5em 0.75em;
            font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
            background: var(--dfnpanel-bg);
            color: var(--dfnpanel-text);
            border: outset 0.2em;
        }

        .dfn-panel:not(.on) {
            display: none;
        }

        .dfn-panel * {
            margin: 0;
            padding: 0;
            text-indent: 0;
        }

        .dfn-panel>b {
            display: block;
        }

        .dfn-panel a {
            color: var(--dfnpanel-text);
        }

        .dfn-panel a:not(:hover) {
            text-decoration: none !important;
            border-bottom: none !important;
        }

        .dfn-panel>b+b {
            margin-top: 0.25em;
        }

        .dfn-panel ul {
            padding: 0;
        }

        .dfn-panel li {
            list-style: inside;
        }

        .dfn-panel.activated {
            display: inline-block;
            position: fixed;
            left: .5em;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - 1.5em - .4em - .5em);
            max-height: 30vh;
        }

        .dfn-paneled {
            cursor: pointer;
        }
    </style>
    <style>
        /* style-issues */

        a[href].issue-return {
            float: right;
            float: inline-end;
            color: var(--issueheading-text);
            font-weight: bold;
            text-decoration: none;
        }
    </style>
    <style>
        /* style-md-lists */

        /* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
        [data-md]> :first-child {
            margin-top: 0;
        }

        [data-md]> :last-child {
            margin-bottom: 0;
        }
    </style>
    <style>
        /* style-selflinks */

        :root {
            --selflink-text: white;
            --selflink-bg: gray;
            --selflink-hover-text: black;
        }

        .heading,
        .issue,
        .note,
        .example,
        li,
        dt {
            position: relative;
        }

        a.self-link {
            position: absolute;
            top: 0;
            left: calc(-1 * (3.5rem - 26px));
            width: calc(3.5rem - 26px);
            height: 2em;
            text-align: center;
            border: none;
            transition: opacity .2s;
            opacity: .5;
        }

        a.self-link:hover {
            opacity: 1;
        }

        .heading>a.self-link {
            font-size: 83%;
        }

        .example>a.self-link,
        .note>a.self-link,
        .issue>a.self-link {
            /* These blocks are overflow:auto, so positioning outside
       doesn't work. */
            left: auto;
            right: 0;
        }

        li>a.self-link {
            left: calc(-1 * (3.5rem - 26px) - 2em);
        }

        dfn>a.self-link {
            top: auto;
            left: auto;
            opacity: 0;
            width: 1.5em;
            height: 1.5em;
            background: var(--selflink-bg);
            color: var(--selflink-text);
            font-style: normal;
            transition: opacity .2s, background-color .2s, color .2s;
        }

        dfn:hover>a.self-link {
            opacity: 1;
        }

        dfn>a.self-link:hover {
            color: var(--selflink-hover-text);
        }

        a.self-link::before {
            content: "¶";
        }

        .heading>a.self-link::before {
            content: "§";
        }

        dfn>a.self-link::before {
            content: "#";
        }
    </style>
    <style>
        /* style-syntax-highlighting */

        pre.idl.highlight {
            background: var(--borderedblock-bg, var(--def-bg));
        }

        code.highlight {
            padding: .1em;
            border-radius: .3em;
        }

        pre.highlight,
        pre>code.highlight {
            display: block;
            padding: 1em;
            margin: .5em 0;
            overflow: auto;
            border-radius: 0;
        }

        .highlight:not(.idl) {
            background: rgba(0, 0, 0, .03);
        }

        c-[a] {
            color: #990055
        }

        /* Keyword.Declaration */
        c-[b] {
            color: #990055
        }

        /* Keyword.Type */
        c-[c] {
            color: #708090
        }

        /* Comment */
        c-[d] {
            color: #708090
        }

        /* Comment.Multiline */
        c-[e] {
            color: #0077aa
        }

        /* Name.Attribute */
        c-[f] {
            color: #669900
        }

        /* Name.Tag */
        c-[g] {
            color: #222222
        }

        /* Name.Variable */
        c-[k] {
            color: #990055
        }

        /* Keyword */
        c-[l] {
            color: #000000
        }

        /* Literal */
        c-[m] {
            color: #000000
        }

        /* Literal.Number */
        c-[n] {
            color: #0077aa
        }

        /* Name */
        c-[o] {
            color: #999999
        }

        /* Operator */
        c-[p] {
            color: #999999
        }

        /* Punctuation */
        c-[s] {
            color: #a67f59
        }

        /* Literal.String */
        c-[t] {
            color: #a67f59
        }

        /* Literal.String.Single */
        c-[u] {
            color: #a67f59
        }

        /* Literal.String.Double */
        c-[cp] {
            color: #708090
        }

        /* Comment.Preproc */
        c-[c1] {
            color: #708090
        }

        /* Comment.Single */
        c-[cs] {
            color: #708090
        }

        /* Comment.Special */
        c-[kc] {
            color: #990055
        }

        /* Keyword.Constant */
        c-[kn] {
            color: #990055
        }

        /* Keyword.Namespace */
        c-[kp] {
            color: #990055
        }

        /* Keyword.Pseudo */
        c-[kr] {
            color: #990055
        }

        /* Keyword.Reserved */
        c-[ld] {
            color: #000000
        }

        /* Literal.Date */
        c-[nc] {
            color: #0077aa
        }

        /* Name.Class */
        c-[no] {
            color: #0077aa
        }

        /* Name.Constant */
        c-[nd] {
            color: #0077aa
        }

        /* Name.Decorator */
        c-[ni] {
            color: #0077aa
        }

        /* Name.Entity */
        c-[ne] {
            color: #0077aa
        }

        /* Name.Exception */
        c-[nf] {
            color: #0077aa
        }

        /* Name.Function */
        c-[nl] {
            color: #0077aa
        }

        /* Name.Label */
        c-[nn] {
            color: #0077aa
        }

        /* Name.Namespace */
        c-[py] {
            color: #0077aa
        }

        /* Name.Property */
        c-[ow] {
            color: #999999
        }

        /* Operator.Word */
        c-[mb] {
            color: #000000
        }

        /* Literal.Number.Bin */
        c-[mf] {
            color: #000000
        }

        /* Literal.Number.Float */
        c-[mh] {
            color: #000000
        }

        /* Literal.Number.Hex */
        c-[mi] {
            color: #000000
        }

        /* Literal.Number.Integer */
        c-[mo] {
            color: #000000
        }

        /* Literal.Number.Oct */
        c-[sb] {
            color: #a67f59
        }

        /* Literal.String.Backtick */
        c-[sc] {
            color: #a67f59
        }

        /* Literal.String.Char */
        c-[sd] {
            color: #a67f59
        }

        /* Literal.String.Doc */
        c-[se] {
            color: #a67f59
        }

        /* Literal.String.Escape */
        c-[sh] {
            color: #a67f59
        }

        /* Literal.String.Heredoc */
        c-[si] {
            color: #a67f59
        }

        /* Literal.String.Interpol */
        c-[sx] {
            color: #a67f59
        }

        /* Literal.String.Other */
        c-[sr] {
            color: #a67f59
        }

        /* Literal.String.Regex */
        c-[ss] {
            color: #a67f59
        }

        /* Literal.String.Symbol */
        c-[vc] {
            color: #0077aa
        }

        /* Name.Variable.Class */
        c-[vg] {
            color: #0077aa
        }

        /* Name.Variable.Global */
        c-[vi] {
            color: #0077aa
        }

        /* Name.Variable.Instance */
        c-[il] {
            color: #000000
        }

        /* Literal.Number.Integer.Long */
    </style>
    <style>
        /* style-var-click-highlighting */

        var {
            cursor: pointer;
        }

        var.selected0 {
            background-color: #F4D200;
            box-shadow: 0 0 0 2px #F4D200;
        }

        var.selected1 {
            background-color: #FF87A2;
            box-shadow: 0 0 0 2px #FF87A2;
        }

        var.selected2 {
            background-color: #96E885;
            box-shadow: 0 0 0 2px #96E885;
        }

        var.selected3 {
            background-color: #3EEED2;
            box-shadow: 0 0 0 2px #3EEED2;
        }

        var.selected4 {
            background-color: #EACFB6;
            box-shadow: 0 0 0 2px #EACFB6;
        }

        var.selected5 {
            background-color: #82DDFF;
            box-shadow: 0 0 0 2px #82DDFF;
        }

        var.selected6 {
            background-color: #FFBCF2;
            box-shadow: 0 0 0 2px #FFBCF2;
        }
    </style>
    <link href="https://www.w3.org/StyleSheets/TR/2021/W3C-WD" rel="stylesheet">

<body class="h-entry">
    <div class="head">
        <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48"
                    src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" width="72"> </a> </p>
        <h1 class="p-name no-ref" id="title">网页动画</h1>
        <p id="w3c-state"><a href="https://www.w3.org/standards/types#WD">W3C 工作草案</a>，<time class="dt-updated"
                datetime="2023-06-05">2023年6月5日</time></p>
        <details open>
            <summary>更多关于本文档的信息</summary>
            <div data-fill-with="spec-metadata">
                <dl>
                    <dt>此版本：
                    <dd><a class="u-url"
                            href="https://www.w3.org/TR/2023/WD-web-animations-1-20230605/">https://www.w3.org/TR/2023/WD-web-animations-1-20230605/</a>
                    <dt>最新发布的版本：
                    <dd><a href="https://www.w3.org/TR/web-animations-1/">https://www.w3.org/TR/web-animations-1/</a>
                    <dt>编辑草案：
                    <dd><a
                            href="https://drafts.csswg.org/web-animations-1/">https://drafts.csswg.org/web-animations-1/</a>
                    <dt>以前的版本：
                    <dd><a href="https://www.w3.org/TR/2021/WD-web-animations-1-20220908/"
                            rel="prev">https://www.w3.org/TR/2021/WD-web-animations-1-20220908/</a>
                    <dd><a href="https://www.w3.org/TR/2021/WD-web-animations-1-20210518/"
                            rel="prev">https://www.w3.org/TR/2021/WD-web-animations-1-20210518/</a>
                    <dd><a href="https://www.w3.org/TR/2018/WD-web-animations-1-20181011/"
                            rel="prev">https://www.w3.org/TR/2018/WD-web-animations-1-20181011/</a>
                    <dd><a href="https://www.w3.org/TR/2016/WD-web-animations-1-20160913/"
                            rel="prev">https://www.w3.org/TR/2016/WD-web-animations-1-20160913/</a>
                    <dd><a href="https://www.w3.org/TR/2015/WD-web-animations-1-20150707/"
                            rel="prev">https://www.w3.org/TR/2015/WD-web-animations-1-20150707/</a>
                    <dd><a href="https://www.w3.org/TR/2014/WD-web-animations-20140605/"
                            rel="prev">https://www.w3.org/TR/2014/WD-web-animations-20140605/</a>
                    <dd><a href="https://www.w3.org/TR/2013/WD-web-animations-20130625/"
                            rel="prev">https://www.w3.org/TR/2013/WD-web-animations-20130625/</a>
                    <dt>历史：
                    <dd><a class="u-url"
                            href="https://www.w3.org/standards/history/web-animations-1">https://www.w3.org/standards/history/web-animations-1</a>
                    <dt>测试套件：
                    <dd><a
                            href="https://github.com/web-platform-tests/wpt/tree/master/web-animations">https://github.com/web-platform-tests/wpt/tree/master/web-animations</a>
                    <dt>反馈：
                    <dd><a href="https://github.com/w3c/csswg-drafts/labels/web-animations-1">CSSWG 问题库</a>
                    <dd><a href="#issues-index">规范内联</a>
                    <dt class="editor">编辑：
                    <dd class="editor p-author h-card vcard" data-editor-id="43194"><a class="p-name fn u-email email"
                            href="mailto:brian@birchill.co.jp">Brian Birtles</a> (<span class="p-org org">受邀专家</span>)
                    <dd class="editor p-author h-card vcard" data-editor-id="98451"><a class="p-name fn u-email email"
                            href="mailto:flackr@google.com">Robert Flack</a> (<span class="p-org org">谷歌</span>)
                    <dd class="editor p-author h-card vcard" data-editor-id="96463"><a class="p-name fn u-email email"
                            href="mailto:smcgruer@google.com">Stephen McGruer</a> (<span class="p-org org">谷歌</span>)
                    <dd class="editor p-author h-card vcard" data-editor-id="51377"><a class="p-name fn u-email email"
                            href="mailto:graouts@apple.com">Antoine Quint</a> (<span class="p-org org">苹果公司</span>)
                    <dt class="editor">前编辑：
                    <dd class="editor p-author h-card vcard" data-editor-id="47691"><a class="p-name fn u-email email"
                            href="mailto:shans@google.com">Shane Stephens</a> (<span class="p-org org">谷歌</span>)
                    <dd class="editor p-author h-card vcard"><a class="p-name fn u-email email"
                            href="mailto:dstockwell@google.com">Douglas Stockwell</a> (<span
                            class="p-org org">谷歌</span>)
                    <dd class="editor p-author h-card vcard" data-editor-id="31960"><a class="p-name fn u-email email"
                            href="mailto:adanilo@google.com">Alex Danilo</a> (<span class="p-org org">谷歌</span>)
                    <dd class="editor p-author h-card vcard" data-editor-id="42199"><a class="p-name fn u-email email"
                            href="mailto:jackalmage@gmail.com">Tab Atkins</a> (<span class="p-org org">谷歌</span>)
                    <dt>建议编辑此规范：
                    <dd><a href="https://github.com/w3c/csswg-drafts/blob/main/web-animations-1/Overview.bs">GitHub
                            编辑器</a>
                    <dt>参与：
                    <dd><a href="https://github.com/w3c/csswg-drafts/tree/main/web-animations-1">通过 GitHub 修改文本</a>
                    <dd>加入<a href="https://damp-lake-50659.herokuapp.com/">Animation at Work</a> slack 的 "waapi" 频道
                    <dd>IRC: <a href="ircs://irc.w3.org:6667/webanimations">#webanimations</a> on W3C’s IRC
                </dl>
            </div>
        </details>
        <div data-fill-with="warning"></div>
        <p class="copyright" data-fill-with="copyright"><a
                href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">版权所有</a> © 2023 <a
                href="https://www.w3.org/">万维网联盟</a>。<abbr title="World Wide Web Consortium">W3C</abbr><sup>®</sup> <a
                href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">责任</a>、<a
                href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">商标</a>和<a
                href="https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document"
                rel="license">许可文档许可</a>规则适用。
        </p>
        <hr title="标题分隔线">
    </div>

    <div class="p-summary" data-fill-with="abstract">
        <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">摘要</span></h2>
        <p>本规范定义了一个同步和定时模型，用于更改网页展示内容。
            此规范还定义了与此模型交互的应用程序接口，
            并且预计未来的规范将定义公开这些功能的声明性方法。</p>
        <a href="https://www.w3.org/TR/CSS/">CSS</a> 是一种用于描述结构化文档（如 HTML 和 XML）
        在屏幕、纸张等上的呈现的语言。
    </div>
    <h2 class="no-num no-toc no-ref heading settled" id="sotd"><span class="content">本文档的状态</span></h2>
    <div data-fill-with="status">
        <p><em>本节描述了本文档在出版时的状态。
                当前 W3C 出版物的列表
                和本技术报告的最新修订版
                可在 <a href="https://www.w3.org/TR/">W3C 技术报告索引</a> 中找到。</em></p>
        <p> 本文档由 <a href="https://www.w3.org/groups/wg/css">CSS 工作组</a> 作为<strong>工作草案</strong>
            发表，使用了 <a href="https://www.w3.org/2021/Process-20211102/#recs-and-notes">推荐标准流程</a>。
            作为工作草案的发表
            并不意味着 <abbr title="World Wide Web Consortium">W3C</abbr> 及其成员的认可。</p>
        <p> 这是一个草案文件，
            可能会在任何时候更新、替换
            或被其他文件取代。
            除了作为工作进展之外，引用本文档是不合适的。</p>
        <p>请通过 <a href="https://github.com/w3c/csswg-drafts/issues">在 GitHub 上提交问题</a>（优先），
            反馈意见，包括规范代码 “web-animations” 在标题中，例如：
            “[web-animations] <i>…评论摘要…</i>”。
            所有问题和评论都会 <a href="https://lists.w3.org/Archives/Public/public-css-archive/">被存档</a>。
            或者，也可以将反馈发送到
            (<a href="https://lists.w3.org/Archives/Public/www-style/">存档的</a>) 公共邮件列表 <a
                href="mailto:www-style@w3.org?Subject=%5Bweb-animations%5D%20PUT%20SUBJECT%20HERE">www-style@w3.org</a>。
        </p>
        <p>本文档受 <a href="https://www.w3.org/2021/Process-20211102/" id="w3c_process_revision">2021年11月2日 W3C 流程文档</a>
            管辖。</p>
        <p>本文档由一个在 <a href="https://www.w3.org/Consortium/Patent-Policy-20200915/">W3C 专利政策</a> 下运作的小组产生。
            W3C 维护了一个 <a href="https://www.w3.org/groups/wg/css/ipr" rel="disclosure">公开的专利披露列表</a>，
            该页面还包括披露专利的说明。
            任何知道自己所掌握的专利包含<a href="https://www.w3.org/Consortium/Patent-Policy-20200915/#def-essential">必要权利要求</a>的人，
            必须按照 <a href="https://www.w3.org/Consortium/Patent-Policy-20200915/#sec-Disclosure">W3C 专利政策第6节</a>
            的规定披露该信息。
        </p>
        <p></p>
    </div>

    <div data-fill-with="at-risk"></div>
    <nav data-fill-with="table-of-contents" id="toc">
        <h2 class="no-num no-toc no-ref" id="contents">目录</h2>
        <ol class="toc" role="directory">
            <li>
                <a href="#introduction"><span class="secno">1</span> <span class="content">介绍</span></a>
                <ol class="toc">
                    <li><a href="#use-cases"><span class="secno">1.1</span> <span class="content">用例</span></a></li>
                    <li><a href="#relationship-to-other-specifications"><span class="secno">1.2</span> <span
                                class="content">与其他规范的关系</span></a></li>
                    <li><a href="#overview-of-this-specification"><span class="secno">1.3</span> <span
                                class="content">本规范概述</span></a></li>
                </ol>
            </li>
            <li><a href="#spec-conventions"><span class="secno">2</span> <span class="content">规范约定</span></a></li>
            <li><a href="#web-animations-model-overview"><span class="secno">3</span> <span
                        class="content">网页动画模型概述</span></a></li>
            <li>
                <a href="#timing-model"><span class="secno">4</span> <span class="content">时间模型</span></a>
                <ol class="toc">
                    <li>
                        <a href="#timing-model-overview"><span class="secno">4.1</span> <span
                                class="content">时间模型概述</span></a>
                        <ol class="toc">
                            <li><a href="#stateless"><span class="secno">4.1.1</span> <span
                                        class="content">无状态</span></a></li>
                            <li><a href="#hierarchical"><span class="secno">4.1.2</span> <span
                                        class="content">层次化</span></a></li>
                        </ol>
                    </li>
                    <li><a href="#time-value-section"><span class="secno">4.2</span> <span
                                class="content">时间值</span></a></li>
                    <li>
                        <a href="#timelines"><span class="secno">4.3</span> <span class="content">时间线</span></a>
                        <ol class="toc">
                            <li><a href="#document-timelines"><span class="secno">4.3.1</span> <span
                                        class="content">文档时间线</span></a></li>
                            <li><a href="#the-documents-default-timeline"><span class="secno">4.3.2</span> <span
                                        class="content">文档默认时间线</span></a></li>
                        </ol>
                    </li>
                    <li>
                        <a href="#animations"><span class="secno">4.4</span> <span class="content">动画</span></a>
                        <ol class="toc">
                            <li><a href="#setting-the-timeline"><span class="secno">4.4.1</span> <span
                                        class="content">设置动画的时间线</span></a></li>
                            <li><a href="#setting-the-associated-effect"><span class="secno">4.4.2</span> <span
                                        class="content">设置动画的关联效果</span></a></li>
                            <li><a href="#the-current-time-of-an-animation"><span class="secno">4.4.3</span> <span
                                        class="content">动画的当前时间</span></a></li>
                            <li><a href="#setting-the-current-time-of-an-animation"><span class="secno">4.4.4</span>
                                    <span class="content">设置动画的当前时间</span></a></li>
                            <li><a href="#setting-the-start-time-of-an-animation"><span class="secno">4.4.5</span> <span
                                        class="content">设置动画的开始时间</span></a></li>
                            <li><a href="#waiting-for-the-associated-effect"><span class="secno">4.4.6</span> <span
                                        class="content">等待关联效果</span></a></li>
                            <li><a href="#the-current-ready-promise"><span class="secno">4.4.7</span> <span
                                        class="content">当前的准备承诺</span></a></li>
                            <li><a href="#playing-an-animation-section"><span class="secno">4.4.8</span> <span
                                        class="content">播放动画</span></a></li>
                            <li><a href="#pausing-an-animation-section"><span class="secno">4.4.9</span> <span
                                        class="content">暂停动画</span></a></li>
                            <li><a href="#reaching-the-end"><span class="secno">4.4.10</span> <span
                                        class="content">到达结尾</span></a></li>
                            <li><a href="#the-current-finished-promise"><span class="secno">4.4.11</span> <span
                                        class="content">当前的完成承诺</span></a></li>
                            <li><a href="#updating-the-finished-state"><span class="secno">4.4.12</span> <span
                                        class="content">更新完成状态</span></a></li>
                            <li><a href="#finishing-an-animation-section"><span class="secno">4.4.13</span> <span
                                        class="content">完成动画</span></a></li>
                            <li><a href="#canceling-an-animation-section"><span class="secno">4.4.14</span> <span
                                        class="content">取消动画</span></a></li>
                            <li>
                                <a href="#speed-control"><span class="secno">4.4.15</span> <span
                                        class="content">速度控制</span></a>
                                <ol class="toc">
                                    <li><a href="#setting-the-playback-rate-of-an-animation"><span
                                                class="secno">4.4.15.1</span>
                                            <span class="content">设置动画的播放速率</span></a></li>
                                    <li><a href="#seamlessly-updating-the-playback-rate-of-an-animation"><span
                                                class="secno">4.4.15.2</span> <span
                                                class="content">无缝更新动画的播放速率</span></a></li>
                                </ol>
                            </li>
                            <li><a href="#reversing-an-animation-section"><span class="secno">4.4.16</span> <span
                                        class="content">反转动画</span></a></li>
                            <li><a href="#play-states"><span class="secno">4.4.17</span> <span
                                        class="content">播放状态</span></a></li>
                            <li>
                                <a href="#animation-events-section"><span class="secno">4.4.18</span> <span
                                        class="content">动画事件</span></a>
                                <ol class="toc">
                                    <li><a href="#sorting-animation-events"><span class="secno">4.4.18.1</span> <span
                                                class="content">排序动画事件</span></a></li>
                                    <li><a href="#animation-playback-events-section"><span class="secno">4.4.18.2</span>
                                            <span class="content">动画播放事件</span></a></li>
                                    <li><a href="#animation-playback-event-types"><span class="secno">4.4.18.3</span>
                                            <span class="content">动画播放事件类型</span></a></li>
                                </ol>
                            </li>
                        </ol>
                    </li>
                    <li>
                        <a href="#animation-effects"><span class="secno">4.5</span> <span
                                class="content">动画效果</span></a>
                        <ol class="toc">
                            <li><a href="#animation-effects-and-animations"><span class="secno">4.5.1</span> <span
                                        class="content">动画效果与动画的关系</span></a></li>
                            <li><a href="#types-of-animation-effects"><span class="secno">4.5.2</span> <span
                                        class="content">动画效果的类型</span></a></li>
                            <li><a href="#the-active-interval"><span class="secno">4.5.3</span> <span
                                        class="content">活动区间</span></a></li>
                            <li><a href="#local-time-section"><span class="secno">4.5.4</span> <span
                                        class="content">本地时间</span></a></li>
                            <li><a href="#animation-effect-phases-and-states"><span class="secno">4.5.5</span> <span
                                        class="content">动画效果的阶段与状态</span></a></li>
                            <li><a href="#relevant-animations-section"><span class="secno">4.5.6</span> <span
                                        class="content">相关动画</span></a></li>
                        </ol>
                    </li>
                    <li>
                        <a href="#fill-behavior"><span class="secno">4.6</span> <span class="content">填充行为</span></a>
                        <ol class="toc">
                            <li><a href="#fill-modes"><span class="secno">4.6.1</span> <span
                                        class="content">填充模式</span></a></li>
                        </ol>
                    </li>
                    <li>
                        <a href="#repeating"><span class="secno">4.7</span> <span class="content">重复</span></a>
                        <ol class="toc">
                            <li><a href="#iteration-intervals"><span class="secno">4.7.1</span> <span
                                        class="content">迭代区间</span></a></li>
                            <li><a href="#controlling-iteration"><span class="secno">4.7.2</span> <span
                                        class="content">控制迭代</span></a></li>
                            <li><a href="#iteration-time-space"><span class="secno">4.7.3</span> <span
                                        class="content">迭代时间空间</span></a></li>
                            <li><a href="#interval-timing"><span class="secno">4.7.4</span> <span
                                        class="content">区间定时</span></a></li>
                        </ol>
                    </li>
                    <li>
                        <a href="#core-animation-effect-calculations"><span class="secno">4.8</span> <span
                                class="content">核心动画效果计算</span></a>
                        <ol class="toc">
                            <li><a href="#animation-effect-calculations-overview"><span class="secno">4.8.1</span> <span
                                        class="content">概述</span></a></li>
                            <li><a href="#calculating-the-active-duration"><span class="secno">4.8.2</span> <span
                                        class="content">计算活动持续时间</span></a></li>
                            <li>
                                <a href="#transforming-the-local-time"><span class="secno">4.8.3</span> <span
                                        class="content">转换本地时间</span></a>
                                <ol class="toc">
                                    <li><a href="#calculating-the-active-time"><span class="secno">4.8.3.1</span> <span
                                                class="content">计算活动时间</span></a></li>
                                    <li><a href="#calculating-the-overall-progress"><span class="secno">4.8.3.2</span>
                                            <span class="content">计算整体进度</span></a></li>
                                    <li><a href="#calculating-the-simple-iteration-progress"><span
                                                class="secno">4.8.3.3</span> <span class="content">计算简单迭代进度</span></a>
                                    </li>
                                </ol>
                            </li>
                            <li><a href="#calculating-the-current-iteration"><span class="secno">4.8.4</span> <span
                                        class="content">计算当前迭代</span></a></li>
                        </ol>
                    </li>
                    <li>
                        <a href="#direction-control"><span class="secno">4.9</span> <span
                                class="content">方向控制</span></a>
                        <ol class="toc">
                            <li><a href="#calculating-the-directed-progress"><span class="secno">4.9.1</span> <span
                                        class="content">计算定向进度</span></a></li>
                        </ol>
                    </li>
                    <li>
                        <a href="#time-transformations"><span class="secno">4.10</span> <span
                                class="content">时间转换</span></a>
                        <ol class="toc">
                            <li><a href="#calculating-the-transformed-progress"><span class="secno">4.10.1</span> <span
                                        class="content">计算转换后的进度</span></a></li>
                        </ol>
                    </li>
                    <li><a href="#the-iteration-progress"><span class="secno">4.11</span> <span
                                class="content">迭代进度</span></a></li>
                </ol>
            </li>
            <li>
                <a href="#animation-model"><span class="secno">5</span> <span class="content">动画模型</span></a>
                <ol class="toc">
                    <li><a href="#introduction-to-the-animation-model"><span class="secno">5.1</span> <span
                                class="content">动画模型介绍</span></a></li>
                    <li>
                        <a href="#animating-properties"><span class="secno">5.2</span> <span
                                class="content">动画属性</span></a>
                        <ol class="toc">
                            <li><a href="#custom-properties"><span class="secno">5.2.1</span> <span
                                        class="content">自定义属性</span></a></li>
                        </ol>
                    </li>
                    <li>
                        <a href="#keyframe-effects"><span class="secno">5.3</span> <span
                                class="content">关键帧效果</span></a>
                        <ol class="toc">
                            <li><a href="#keyframes-section"><span class="secno">5.3.1</span> <span
                                        class="content">关键帧</span></a></li>
                            <li><a href="#computing-property-values"><span class="secno">5.3.2</span> <span
                                        class="content">计算属性值</span></a></li>
                            <li><a href="#calculating-computed-keyframes"><span class="secno">5.3.3</span> <span
                                        class="content">计算已计算的关键帧</span></a></li>
                            <li><a href="#the-effect-value-of-a-keyframe-animation-effect"><span
                                        class="secno">5.3.4</span>
                                    <span class="content">关键帧效果的效果值</span></a></li>
                        </ol>
                    </li>
                    <li>
                        <a href="#combining-effects"><span class="secno">5.4</span> <span
                                class="content">组合效果</span></a>
                        <ol class="toc">
                            <li><a href="#animation-classes"><span class="secno">5.4.1</span> <span
                                        class="content">动画类别</span></a></li>
                            <li><a href="#the-effect-stack"><span class="secno">5.4.2</span> <span
                                        class="content">效果堆栈</span></a></li>
                            <li><a href="#calculating-the-result-of-an-effect-stack"><span class="secno">5.4.3</span>
                                    <span class="content">计算效果堆栈的结果</span></a></li>
                            <li><a href="#effect-composition"><span class="secno">5.4.4</span> <span
                                        class="content">效果合成</span></a></li>
                            <li><a href="#applying-the-composited-result"><span class="secno">5.4.5</span> <span
                                        class="content">应用合成结果</span></a></li>
                        </ol>
                    </li>
                    <li>
                        <a href="#replacing-animations"><span class="secno">5.5</span> <span
                                class="content">替换动画</span></a>
                        <ol class="toc">
                            <li><a href="#animation-replace-state"><span class="secno">5.5.1</span> <span
                                        class="content">替换状态</span></a></li>
                            <li><a href="#removing-replaced-animations"><span class="secno">5.5.2</span> <span
                                        class="content">移除被替换的动画</span></a></li>
                        </ol>
                    </li>
                    <li><a href="#side-effects-section"><span class="secno">5.6</span> <span
                                class="content">动画的副作用</span></a></li>
                </ol>
            </li>
            <li>
                <a href="#programming-interface"><span class="secno">6</span> <span class="content">编程接口</span></a>
                <ol class="toc">
                    <li><a href="#time-values-in-the-programming-interface"><span class="secno">6.1</span> <span
                                class="content">编程接口中的时间值</span></a></li>
                    <li><a href="#the-animationtimeline-interface"><span class="secno">6.2</span> <span class="content">
                                <code>AnimationTimeline</code> 接口</span></a></li>
                    <li><a href="#the-documenttimeline-interface"><span class="secno">6.3</span> <span class="content">
                                <code>DocumentTimeline</code> 接口</span></a></li>
                    <li>
                        <a href="#the-animation-interface"><span class="secno">6.4</span> <span class="content">
                                <code>Animation</code> 接口</span></a>
                        <ol class="toc">
                            <li><a href="#the-animationplaystate-enumeration"><span class="secno">6.4.1</span> <span
                                        class="content">
                                        <code>AnimationPlayState</code> 枚举</span></a></li>
                            <li><a href="#the-animationreplacestate-enumeration"><span class="secno">6.4.2</span> <span
                                        class="content">
                                        <code>AnimationReplaceState</code> 枚举</span></a></li>
                        </ol>
                    </li>
                    <li>
                        <a href="#the-animationeffect-interface"><span class="secno">6.5</span> <span class="content">
                                <code>AnimationEffect</code> 接口</span></a>
                        <ol class="toc">
                            <li><a href="#the-effecttiming-dictionaries"><span class="secno">6.5.1</span> <span
                                        class="content">
                                        <code>EffectTiming</code> 和
                                        <code>OptionalEffectTiming</code> 字典</span></a></li>
                            <li><a href="#the-fillmode-enumeration"><span class="secno">6.5.2</span> <span
                                        class="content">
                                        <code>FillMode</code> 枚举</span></a></li>
                            <li><a href="#the-playbackdirection-enumeration"><span class="secno">6.5.3</span> <span
                                        class="content">
                                        <code>PlaybackDirection</code> 枚举</span></a></li>
                            <li><a href="#updating-animationeffect-timing"><span class="secno">6.5.4</span> <span
                                        class="content">更新
                                        <code>AnimationEffect</code> 的时间设置</span></a></li>
                            <li><a href="#the-computedeffecttiming-dictionary"><span class="secno">6.5.5</span> <span
                                        class="content">
                                        <code>ComputedEffectTiming</code> 字典</span></a></li>
                        </ol>
                    </li>
                    <li>
                        <a href="#the-keyframeeffect-interface"><span class="secno">6.6</span> <span class="content">
                                <code>KeyframeEffect</code> 接口</span></a>
                        <ol class="toc">
                            <li><a href="#creating-a-new-keyframeeffect-object"><span class="secno">6.6.1</span> <span
                                        class="content">创建新的
                                        <code>KeyframeEffect</code> 对象</span></a></li>
                            <li><a href="#property-name-conversion"><span class="secno">6.6.2</span> <span
                                        class="content">属性名称与 IDL 名称</span></a></li>
                            <li><a href="#processing-a-keyframes-argument"><span class="secno">6.6.3</span> <span
                                        class="content">处理
                                        <code>keyframes</code> 参数</span></a></li>
                            <li><a href="#the-keyframeeffectoptions-dictionary"><span class="secno">6.6.4</span> <span
                                        class="content">
                                        <code>KeyframeEffectOptions</code> 字典</span></a></li>
                        </ol>
                    </li>
                    <li><a href="#the-compositeoperation-enumeration"><span class="secno">6.7</span> <span
                                class="content">
                                <code>CompositeOperation</code> 和
                                <code>CompositeOperationOrAuto</code> 枚举</span></a></li>
                    <li><a href="#the-animatable-interface-mixin"><span class="secno">6.8</span> <span class="content">
                                <code>Animatable</code> 接口混入</span></a></li>
                    <li><a href="#extensions-to-the-document-interface"><span class="secno">6.9</span> <span
                                class="content">对
                                <code>Document</code> 接口的扩展</span></a></li>
                    <li><a href="#extensions-to-the-documentorshadowroot-interface-mixin"><span
                                class="secno">6.10</span> <span class="content">对
                                <code>DocumentOrShadowRoot</code> 接口混入的扩展</span></a></li>
                    <li><a href="#extensions-to-the-element-interface"><span class="secno">6.11</span> <span
                                class="content">对
                                <code>Element</code> 接口的扩展</span></a></li>
                    <li><a href="#the-animationplaybackevent-interface"><span class="secno">6.12</span> <span
                                class="content">
                                <code>AnimationPlaybackEvent</code> 接口</span></a></li>
                    <li><a href="#model-liveness"><span class="secno">6.13</span> <span class="content">模型活性</span></a>
                    </li>
                </ol>
            </li>
            <li><a href="#integration-with-media-fragments"><span class="secno">7</span> <span
                        class="content">与媒体片段的集成</span></a></li>
            <li><a href="#interaction-with-page-display"><span class="secno">8</span> <span
                        class="content">与页面显示的交互</span></a></li>
            <li>
                <a href="#implementation-requirements"><span class="secno">9</span> <span
                        class="content">实现要求</span></a>
                <ol class="toc">
                    <li><a href="#precision-of-time-values"><span class="secno">9.1</span> <span
                                class="content">时间值的精度</span></a></li>
                    <li><a href="#conformance-criteria"><span class="secno">9.2</span> <span
                                class="content">一致性标准</span></a></li>
                </ol>
            </li>
            <li><a href="#acknowledgements"><span class="secno">10</span> <span class="content">致谢</span></a></li>
            <li><a href="#changes-since-last-publication"><span class="secno">11</span> <span
                        class="content">自上次发布以来的变更</span></a></li>
            <li>
                <a href="#animation-types"><span class="secno"></span> <span class="content">附录A：现有属性的动画类型</span></a>
                <ol class="toc">
                    <li><a href="#animating-font-weight"><span class="secno"></span> <span class="content"><span
                                    class="property">font-weight</span>的动画</span></a></li>
                    <li><a href="#animating-visibility"><span class="secno"></span> <span class="content"><span
                                    class="property">visibility</span>的动画</span></a></li>
                    <li><a href="#animating-shadow-lists"><span class="secno"></span> <span class="content"><span
                                    class="property">box-shadow</span>和<span
                                    class="property">text-shadow</span>的动画</span></a></li>
                </ol>
            </li>
            <li>
                <a href="#w3c-conformance"><span class="secno"></span> <span class="content">一致性</span></a>
                <ol class="toc">
                    <li><a href="#w3c-conventions"><span class="secno"></span> <span class="content">文档约定</span></a>
                    </li>
                    <li><a href="#w3c-conformance-classes"><span class="secno"></span> <span
                                class="content">一致性类别</span></a></li>
                    <li>
                        <a href="#w3c-partial"><span class="secno"></span> <span class="content">部分实现</span></a>
                        <ol class="toc">
                            <li><a href="#w3c-conform-future-proofing"><span class="secno"></span> <span
                                        class="content">不稳定和专有功能的实现</span></a></li>
                        </ol>
                    </li>
                    <li><a href="#w3c-testing"><span class="secno"></span> <span class="content">非实验性实现</span></a></li>
                </ol>
            </li>
            <li>
                <a href="#index"><span class="secno"></span> <span class="content">索引</span></a>
                <ol class="toc">
                    <li><a href="#index-defined-here"><span class="secno"></span> <span
                                class="content">本规范定义的术语</span></a></li>
                    <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span
                                class="content">引用定义的术语</span></a></li>
                </ol>
            </li>
            <li>
                <a href="#references"><span class="secno"></span> <span class="content">参考资料</span></a>
                <ol class="toc">
                    <li><a href="#normative"><span class="secno"></span> <span class="content">规范性参考资料</span></a></li>
                    <li><a href="#informative"><span class="secno"></span> <span class="content">参考性参考资料</span></a></li>
                </ol>
            </li>
            <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL 索引</span></a></li>
            <li><a href="#issues-index"><span class="secno"></span> <span class="content">问题索引</span></a></li>
        </ol>
    </nav>

    <main>
        <script type="text/x-mathjax-config">
  MathJax.Hub.Config({showMathMenu: false});
</script>
        <script src="https://www.w3.org/scripts/MathJax/2/MathJax.js?config=MML_SVG"></script>
        <h2 class="heading settled" data-level="1" id="introduction"><span class="secno">1. </span><span
                class="content">介绍</span><a class="self-link" href="#introduction"></a></h2>
        <div class="informative-bg">
            <em>本节是非规范性的</em>
            <p>Web Animations 定义了一个在 Web 平台上支持动画和同步的模型。
                其他规范将基于此模型构建，并通过声明性方式公开其功能。
                此外，本规范还定义了一个编程接口，
                该接口可由提供脚本支持的用户代理实现。</p>
            <h3 class="heading settled" data-level="1.1" id="use-cases"><span class="secno">1.1. </span><span
                    class="content">用例</span><a class="self-link" href="#use-cases"></a></h3>
            <p>Web Animations 模型旨在提供表达 CSS 过渡<a data-link-type="biblio"
                    href="#biblio-css-transitions-1">[CSS-TRANSITIONS-1]</a>、
                CSS 动画<a data-link-type="biblio" href="#biblio-css-animations-1">[CSS-ANIMATIONS-1]</a>和
                SVG <a data-link-type="biblio" href="#biblio-svg11">[SVG11]</a>所需的功能。
                因此，Web Animations 模型的用例是这三个规范的用例的合集。</p>
            <p>编程接口的用例包括以下内容：</p>
            <dl>
                <dt data-md>检查运行中的动画
                <dd data-md>
                    <p>Web 应用程序通常必须等待某些动画效果完成后再更新某些状态。
                        本规范中的编程接口允许此类应用程序等待所有当前运行的动画完成，
                        无论它们是由 CSS 过渡、CSS 动画、SVG 动画定义的，还是通过编程接口直接创建的。</p>
                    <div class="example" id="example-e8eccc9e">
                        <a class="self-link" href="#example-e8eccc9e"></a>
                        <pre class="lang-javascript highlight"><c- c1>// 在删除元素之前等待所有动画完成</c->
Promise<c- p>.</c->all<c- p>(</c->
  elem<c- p>.</c->getAnimations<c- p>().</c->map<c- p>(</c->animation <c- p>=></c-> animation<c- p>.</c->finished<c- p>)</c->
<c- p>).</c->then<c- p>(()</c-> <c- p>=></c-> elem<c- p>.</c->remove<c- p>());</c->
</pre>
                    </div>
                    <p>或者，应用程序可能希望查询动画的播放状态，而无需等待。</p>
                    <div class="example" id="example-9a95d87d">
                        <a class="self-link" href="#example-9a95d87d"></a>
                        <pre class="lang-javascript highlight"><c- a>const</c-> isAnimating <c- o>=</c-> elem<c- p>.</c->getAnimations<c- p>().</c->some<c- p>(</c->
  animation <c- p>=></c-> animation<c- p>.</c->playState <c- o>===</c-> <c- t>'running'</c->
<c- p>);</c->
</pre>
                    </div>
                <dt data-md>控制运行中的动画
                <dd data-md>
                    <p>有时需要对动画进行播放控制，以便它们能够响应外部输入。
                        例如，可能需要在显示模态对话框之前暂停所有现有动画，以免它们分散用户的注意力。</p>
                    <div class="example" id="example-e7bbf635">
                        <a class="self-link" href="#example-e7bbf635"></a>
                        <pre class="lang-javascript highlight"><c- c1>// 暂停文档中的所有现有动画</c->
<c- k>for</c-> <c- p>(</c-><c- a>const</c-> animation <c- k>of</c-> document<c- p>.</c->getAnimations<c- p>())</c-> <c- p>{</c->
  animation<c- p>.</c->pause<c- p>()</c->
<c- p>}</c->
</pre>
                    </div>
                <dt data-md>通过脚本创建动画
                <dd data-md>
                    <p>虽然可以使用 ECMAScript 通过 <code>requestAnimationFrame</code> <a data-link-type="biblio"
                            href="#biblio-html">[HTML]</a>执行动画，
                        但在表示方式和可能的性能优化（如在单独线程上执行动画）方面，此类动画的行为与声明性动画有所不同。
                        使用 Web Animations 编程接口，可以通过脚本创建与声明性动画具有相同行为和性能特征的动画。</p>
                    <div class="example" id="example-824e8c83">
                        <a class="self-link" href="#example-824e8c83"></a>
                        <pre class="lang-javascript highlight"><c- c1>// 快速淡出</c->
elem<c- p>.</c->animate<c- p>({</c-> transform<c- o>:</c-> <c- t>'scale(0)'</c-><c- p>,</c-> opacity<c- o>:</c-> <c- mf>0</c-> <c- p>},</c-> <c- mf>300</c-><c- p>);</c->
</pre>
                    </div>
                <dt data-md>动画调试
                <dd data-md>
                    <p>在复杂的应用程序中，可能很难确定元素如何达到其当前状态。
                        可以使用 Web Animations 编程接口检查正在运行的动画，以回答诸如“为什么这个元素的不透明度在变化？”等问题。</p>
                    <div class="example" id="example-6c6854a7">
                        <a class="self-link" href="#example-6c6854a7"></a>
                        <pre class="lang-javascript highlight"><c- c1>// 打印 elem 上任何不透明度动画的 id</c->
<c- k>for</c-> <c- p>(</c-><c- a>const</c-> animation <c- k>of</c-> elem<c- p>.</c->getAnimations<c- p>())</c-> <c- p>{</c->
  <c- k>if</c-> <c- p>(</c->
    animation<c- p>.</c->effect <c- ow>instanceof</c-> KeyframeEffect <c- o>&amp;&amp;</c->
    animation<c- p>.</c->effect
      <c- p>.</c->getKeyframes<c- p>()</c->
      <c- p>.</c->some<c- p>(</c->frame <c- p>=></c-> frame<c- p>.</c->hasOwnProperty<c- p>(</c-><c- t>'opacity'</c-><c- p>))</c->
  <c- p>)</c-> <c- p>{</c->
    console<c- p>.</c->log<c- p>(</c->animation<c- p>.</c->id<c- p>);</c->
  <c- p>}</c->
<c- p>}</c->
</pre>
                    </div>
                    <p>同样，为了微调动画，通常需要降低它们的播放速度并重放它们。</p>
                    <div class="example" id="example-06eda695">
                        <a class="self-link" href="#example-06eda695"></a>
                        <pre class="lang-javascript highlight"><c- c1>// 减慢并重放任何变换动画</c->
<c- a>const</c-> transformAnimations <c- o>=</c-> elem<c- p>.</c->getAnimations<c- p>().</c->filter<c- p>(</c->
  animation <c- p>=></c->
    animation<c- p>.</c->effect <c- ow>instanceof</c-> KeyframeEffect <c- o>&amp;&amp;</c->
    animation<c- p>.</c->effect<c- p>.</c->getKeyframes<c- p>().</c->some<c- p>(</c->
      frame <c- p>=></c-> frame<c- p>.</c->hasOwnProperty<c- p>(</c-><c- t>'transform'</c-><c- p>)</c->
    <c- p>)</c->
<c- p>);</c->

<c- k>for</c-> <c- p>(</c-><c- a>const</c-> animation <c- k>of</c-> transformAnimations<c- p>)</c-> <c- p>{</c->
  animation<c- p>.</c->currentTime <c- o>=</c-> <c- mf>0</c-><c- p>;</c->
  animation<c- p>.</c->updatePlaybackRate<c- p>(</c-><c- mf>0.5</c-><c- p>);</c->
<c- p>}</c->
</pre>
                    </div>
                <dt data-md>测试动画
                <dd data-md>
                    <p>为了测试使用动画的应用程序，通常不实际等待这些动画运行完毕。
                        而是希望将动画调整到特定时间点。</p>
            </dl>
            <div class="example" id="example-d0c0c637">
                <a class="self-link" href="#example-d0c0c637"></a>
                <pre class="lang-javascript highlight"><c- c1>// 将动画调整到中途并检查不透明度是否为50%</c->
<c- k>for</c-> <c- p>(</c-><c- a>const</c-> animation <c- k>of</c-> elem<c- p>.</c->getAnimations<c- p>())</c-> <c- p>{</c->
  <c- a>const</c-> <c- p>{</c-> delay<c- p>,</c-> activeDuration <c- p>}</c-> <c- o>=</c-> animation<c- p>.</c->effect<c- p>.</c->getComputedTiming<c- p>();</c->
  animation<c- p>.</c->currentTime <c- o>=</c-> delay <c- o>+</c-> activeDuration <c- o>/</c-> <c- mf>2</c-><c- p>;</c->
<c- p>}</c->
assert<c- p>.</c->strictEqual<c- p>(</c->getComputedStyle<c- p>(</c->elem<c- p>).</c->opacity<c- p>,</c-> <c- t>'0.5'</c-><c- p>);</c->

<c- c1>// 检查动画完成后加载屏幕是否隐藏</c->
<c- k>for</c-> <c- p>(</c-><c- a>const</c-> animation <c- k>of</c-> elem<c- p>.</c->getAnimations<c- p>())</c-> <c- p>{</c->
  animation<c- p>.</c->finish<c- p>();</c->
<c- p>}</c->
<c- c1>// 等待一帧以便事件处理程序有机会运行</c->
requestAnimationFrame<c- p>(()</c-> <c- p>=></c-> <c- p>{</c->
  assert<c- p>.</c->strictEqual<c- p>(</c->
    getComputedStyle<c- p>(</c->document<c- p>.</c->querySelector<c- p>(</c-><c- t>'#loading'</c-><c- p>)).</c->display<c- p>,</c-> <c- t>'none'</c-><c- p>);</c->
<c- p>});</c->
</pre>
            </div>
            <h3 class="heading settled" data-level="1.2" id="relationship-to-other-specifications"><span
                    class="secno">1.2. </span><span class="content">与其他规范的关系</span><a class="self-link"
                    href="#relationship-to-other-specifications"></a></h3>
            <p>CSS 过渡<a data-link-type="biblio" href="#biblio-css-transitions-1">[CSS-TRANSITIONS-1]</a>、
                CSS 动画<a data-link-type="biblio" href="#biblio-css-animations-1">[CSS-ANIMATIONS-1]</a>和
                SVG <a data-link-type="biblio" href="#biblio-svg11">[SVG11]</a>都提供了在网页上生成动画内容的机制。
                虽然这三个规范提供了许多相似的功能，
                但它们使用不同的术语来描述。
                本规范提出了一个涵盖这三个规范的共同特征的抽象动画模型。
                该模型与这些规范的当前行为向后兼容，因此可以根据此模型定义它们，
                而不会发生任何可观察到的变化。</p>
            <p>SVG 1.1 中的动画功能是基于 SMIL 动画<a data-link-type="biblio"
                    href="#biblio-smil-animation">[SMIL-ANIMATION]</a>定义的。
                通过根据 Web Animations 模型定义 SVG 的动画功能，
                可以消除 SVG 和 SMIL 动画之间的依赖关系。</p>
            <p>与<a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/imagebitmap-and-animations.html.html#animation-frames"
                    id="ref-for-animation-frames">动画帧回调</a>（通常称为“requestAnimationFrame”）<a data-link-type="biblio"
                    href="#biblio-html">[HTML]</a>一样，
                本规范的编程接口部分允许通过脚本创建动画。
                使用本规范中定义的接口创建的动画，一旦创建，
                由用户代理完全执行，这意味着它们与标记定义的动画共享相同的性能特性。
                使用此接口可以以更简单和更高效的方式从脚本创建动画。</p>
            <p>编程接口中使用的时间值
                与<a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/imagebitmap-and-animations.html.html#animation-frames"
                    id="ref-for-animation-frames①">动画帧回调</a> <a data-link-type="biblio"
                    href="#biblio-html">[HTML]</a>中使用的时间值相对应，并且其执行顺序定义为使得可以同时使用这两个接口而不会发生冲突。</p>
            <p>本规范的编程接口部分对 HTML 中定义的接口进行了一些补充<a data-link-type="biblio" href="#biblio-html">[HTML]</a>。</p>
            <h3 class="heading settled" data-level="1.3" id="overview-of-this-specification"><span class="secno">1.3.
                </span><span class="content">本规范概述</span><a class="self-link"
                    href="#overview-of-this-specification"></a></h3>
            <p>本规范首先定义了一个动画的抽象模型。
                随后，通过抽象模型定义了一个编程接口。
                编程接口是根据抽象模型定义的，仅与提供脚本支持的用户代理相关。</p>
        </div>

        <h2 class="heading settled" data-level="2" id="spec-conventions"><span class="secno">2. </span><span
                class="content">规范约定</span><a class="self-link" href="#spec-conventions"></a></h2>
        <p>本规范首先描述了抽象概念，如<a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation">动画</a>和<a
                data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect">动画效果</a>及其所属的属性，如<a
                data-link-type="dfn" href="#playback-rate" id="ref-for-playback-rate">播放速率</a>或<a data-link-type="dfn"
                href="#iteration-duration" id="ref-for-iteration-duration">迭代持续时间</a>。
            除了这些属性之外，通常还有更新这些属性的特定过程，例如<a data-link-type="dfn" href="#set-the-playback-rate"
                id="ref-for-set-the-playback-rate">设置播放速率</a>的过程或
            <a data-link-type="dfn" href="#set-the-start-time" id="ref-for-set-the-start-time">设置动画开始时间</a>的过程。
        </p>
        <p>当本规范未明确链接到某个过程时，需要用户代理更新属性的文本，如“将<var>动画</var>的<a data-link-type="dfn" href="#animation-start-time"
                id="ref-for-animation-start-time">开始时间</a>设为<a data-link-type="dfn" href="#unresolved"
                id="ref-for-unresolved">未解析</a>”，应理解为直接更新属性
            <em>而不</em>调用任何相关过程。
        </p>
        <p>有关本规范特有的文档约定，请参见<a href="#w3c-conventions">文档约定</a>部分。</p>
        <h2 class="heading settled" data-level="3" id="web-animations-model-overview"><span class="secno">3.
            </span><span class="content">Web Animations 模型概述</span><a class="self-link"
                href="#web-animations-model-overview"></a></h2>
        <div class="informative-bg">
            <em>本节是非规范性的</em>
            <p>简单来说，Web Animations 模型由两个主要独立的部分组成，即<em>时间模型</em>和<em>动画模型</em>。这些部分的作用如下：</p>
            <dl>
                <dt data-md>时间模型
                <dd data-md>
                    <p>获取某一时刻，并将其转换为动画单次迭代中的比例距离，称为<em>迭代进度</em>。
                        同时记录<em>迭代索引</em>，因为有些动画每次重复时会有所不同。</p>
                <dt data-md>动画模型
                <dd data-md>
                    <p>获取时间模型生成的<em>迭代进度</em>值和<em>迭代索引</em>，并将其转换为要应用于目标属性的一系列值。</p>
            </dl>
            <p>从图形上看，这个流程可以表示如下：</p>
            <figure>
                <img alt="Web Animations 模型的操作概述"
                    src="https://www.w3.org/TR/web-animations-1/images/timing-and-animation-models.svg" width="600">
                <figcaption> Web Animations 模型的操作概述。<br> 当前时间作为输入进入时间模型，生成迭代进度值和迭代索引。<br> 这些参数作为输入用于动画模型，生成要应用的值。
                </figcaption>
            </figure>
            <p>例如，考虑一个动画：</p>
            <ul>
                <li data-md>
                    <p>在3秒后开始，</p>
                </li>
                <li data-md>
                    <p>运行两次，</p>
                </li>
                <li data-md>
                    <p>每次运行2秒，</p>
                </li>
                <li data-md>
                    <p>将一个矩形的宽度从50像素更改为100像素。</p>
                </li>
            </ul>
            <p>前三点适用于时间模型。
                在6秒时，它会计算出动画应处于第二次迭代的中途，并生成结果0.5。
                然后动画模型使用该信息来计算宽度。</p>
            <p>本规范从时间模型开始，然后介绍动画模型。</p>
        </div>

        <h2 class="heading settled" data-level="4" id="timing-model"><span class="secno">4. </span><span
                class="content">时间模型</span><a class="self-link" href="#timing-model"></a></h2>
        <p>本节描述并定义了 Web Animations 时间模型的行为。</p>
        <h3 class="heading settled" data-level="4.1" id="timing-model-overview"><span class="secno">4.1. </span><span
                class="content">时间模型概述</span><a class="self-link" href="#timing-model-overview"></a></h3>
        <div class="informative-bg">
            <p><em>本节是非规范性的</em></p>
            <p>Web Animations 时间模型的两个特征是：<em>无状态</em>和<em>层次化</em>。</p>
            <h4 class="heading settled" data-level="4.1.1" id="stateless"><span class="secno">4.1.1. </span><span
                    class="content">无状态</span><a class="self-link" href="#stateless"></a></h4>
            <p>Web Animations 时间模型通过接收输入时间并生成输出迭代进度来运行。
                由于输出仅基于输入时间，并且与先前的输入无关，因此该模型可以被描述为无状态的。
                这使得模型具有以下特性：</p>
            <dl>
                <dt data-md>与帧率无关
                <dd data-md>
                    <p>由于输出与先前的输入无关，更新模型的速度不会影响其进度。
                        只要输入时间与现实世界时间的进展成比例，动画将以相同的速度进行，
                        而不受运行它们的设备能力的影响。</p>
                <dt data-md>方向不可知
                <dd data-md>
                    <p>由于输入序列无关紧要，模型是无方向的。
                        这意味着模型可以更新到任意时刻，而无需任何特殊处理。</p>
                <dt data-md>常时间寻址
                <dd data-md>
                    <p>由于每个输入都与先前的输入无关，执行寻址操作所需的处理，即使是很远的未来，也至少有可能是恒定的。</p>
            </dl>
            <p>时间模型的无状态行为有一些例外情况。</p>
            <p>首先，模型的<a href="#programming-interface">编程接口</a>中定义了一些方法，
                提供播放控制功能，如暂停动画。
                这些方法是根据调用它们的时间来定义的，因此是有状态的。
                这些方法主要是为了方便而提供的，不属于核心时间模型，而是叠加在其上。</p>
            <p>同样，动画的<a href="#reaching-the-end">完成行为</a>意味着
                动画的媒体（<a data-link-type="dfn" href="#animation-associated-effect"
                    id="ref-for-animation-associated-effect">关联效果</a>）的结束时间的动态变化
                可能会根据变化发生的时间产生不同的结果。
                这种行为虽然有些不尽如人意，但被认为是直观的，并与 HTML 保持一致。
                因此，模型只能在<em>时间属性没有动态变化的情况下</em>真正被描述为无状态的。</p>
            <p>最后，每次更新模型时，都可以认为它建立了一个临时状态。
                虽然这个临时状态会影响<a href="#programming-interface">编程接口</a>返回的值，
                但它对后续更新没有影响，因此与上述无状态特性不冲突。</p>
            <h4 class="heading settled" data-level="4.1.2" id="hierarchical"><span class="secno">4.1.2. </span><span
                    class="content">层次化</span><a class="self-link" href="#hierarchical"></a></h4>
            <p>时间模型的另一个特征是时间是继承的。
                时间从时间线开始，逐步向下传递到每个动画效果。
                在每个步骤中，时间可能被向前或向后移动、缩放、反转、暂停和重复。</p>
            <figure>
                <img alt="时间节点的层次结构" src="https://www.w3.org/TR/web-animations-1/images/time-hierarchy.svg" width="350">
                <figcaption> 时间节点的层次结构。
                    树中的每个节点都从其父节点继承时间。</figcaption>
            </figure>
            <p>在本规范的这一层次中，层次结构是浅显的。
                规范的后续层次将引入组效果的概念，从而允许更深的时间层次结构。</p>
        </div>

        <h3 class="heading settled" data-level="4.2" id="time-value-section"><span class="secno">4.2. </span><span
                class="content">时间值</span><a class="self-link" href="#time-value-section"></a></h3>
        <p>时间的基础是时间节点之间的时间关系层次结构。
            父节点以<a data-link-type="dfn" href="#time-value" id="ref-for-time-value">时间值</a>的形式向其子节点提供时间信息。</p>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="time-value">时间值</dfn>是一个实数，通常表示
            从某个时刻起的毫秒数。
            <a data-link-type="dfn" href="#time-value" id="ref-for-time-value①">时间值</a>与挂钟时间毫秒数之间的联系
            可能会因值在时间层次结构中传递时应用的任何数量的变换而模糊。
        </p>
        <p class="note" role="note"> 将来可能会有基于滚动位置或 UI 手势的时间线，
            在这种情况下，时间值与毫秒之间的联系将进一步减弱。</p>
        <p>如果时间节点没有处于生成<span id="ref-for-time-value③">时间值</span>的状态，
            则<a data-link-type="dfn" href="#time-value" id="ref-for-time-value②">时间值</a>也可能是<dfn class="dfn-paneled"
                data-dfn-type="dfn" data-noexport id="unresolved">未解析的</dfn>。</p>

        <h3 class="heading settled" data-level="4.3" id="timelines"><span class="secno">4.3. </span><span
                class="content">时间线</span><a class="self-link" href="#timelines"></a></h3>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="timeline">时间线</dfn>提供
            <a data-link-type="dfn" href="#time-value" id="ref-for-time-value④">时间值</a>来源，
            以便进行同步。
        </p>
        <p>在任何给定时刻，<a data-link-type="dfn" href="#timeline" id="ref-for-timeline">时间线</a>都有一个
            单一的当前<a data-link-type="dfn" href="#time-value" id="ref-for-time-value⑤">时间值</a>，
            简单地称为时间线的<dfn class="dfn-paneled" data-dfn-for="timeline" data-dfn-type="dfn" data-export
                id="timeline-current-time">当前时间</dfn>。</p>
        <p><a data-link-type="dfn" href="#timeline" id="ref-for-timeline①">时间线</a>可能并不总能返回有意义的
            <a data-link-type="dfn" href="#time-value" id="ref-for-time-value⑥">时间值</a>，而是仅返回
            <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved①">未解析的</a>时间值。
            例如，它可能是相对于尚未发生的时刻定义的，
            如文档的加载事件触发的时间。
            当<span id="ref-for-timeline②">时间线</span>的<span id="ref-for-time-value⑦">时间值</span>为<span
                id="ref-for-unresolved②">未解析</span>时，
            该时间线被视为<dfn class="dfn-paneled" data-dfn-type="dfn" data-export data-lt="inactive timeline"
                id="inactive-timeline">非活动</dfn>。
        </p>
        <p>如果时间线报告的<a data-link-type="dfn" href="#timeline-current-time" id="ref-for-timeline-current-time">当前时间</a>
            始终大于或等于其先前报告的<span id="ref-for-timeline-current-time①">当前时间</span>，则该
            <a data-link-type="dfn" href="#timeline" id="ref-for-timeline③">时间线</a>是<dfn class="dfn-paneled"
                data-dfn-type="dfn" data-export data-local-lt="monotonically increasing"
                data-lt="monotonically increasing timeline" id="monotonically-increasing-timeline">单调递增</dfn>的。
        </p>
        <p>特定类型的<a data-link-type="dfn" href="#timeline" id="ref-for-timeline④">时间线</a>可以定义一个过程，将
            <dfn class="dfn-paneled" data-dfn-type="dfn" data-export data-lt="timeline time
to origin-relative time" id="timeline-time-to-origin-relative-time">时间线时间转换为起源相对时间</dfn>，
            以便可以比较由基于挂钟的时间线生成的<a data-link-type="dfn" href="#time-value" id="ref-for-time-value⑧">时间值</a>。
        </p>
        <p><a data-link-type="dfn" href="#timeline" id="ref-for-timeline⑤">时间线</a>可以与文档<dfn class="dfn-paneled"
                data-dfn-type="dfn" data-lt="timeline associated with
a document" data-noexport id="timeline-associated-with-a-document">相关联</dfn>。</p>
        <p>当被要求为时间戳<var>now</var>的<code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/#document"
            id="ref-for-document">Document</a></code><var>doc</var><dfn class="dfn-paneled" data-dfn-type="dfn"
                data-export id="update-animations-and-send-events">更新动画并发送事件</dfn>时，请执行以下步骤：</p>
        <ol>
            <li data-md>
                <p>更新所有时间线的<a data-link-type="dfn" href="#timeline-current-time"
                        id="ref-for-timeline-current-time②">当前时间</a>，这些时间线<a data-link-type="dfn"
                        href="#timeline-associated-with-a-document"
                        id="ref-for-timeline-associated-with-a-document">与<var>doc</var>相关联</a>，并传递<var>now</var>作为时间戳。
                </p>
                <div class="note" role="note">
                    <p>由于时间模型的层次结构，更新<a data-link-type="dfn" href="#timeline-current-time"
                            id="ref-for-timeline-current-time③">当前时间</a>的<a data-link-type="dfn" href="#timeline"
                            id="ref-for-timeline⑥">时间线</a>还涉及：</p>

                    <ul>
                        <li data-md>
                            <p>更新与时间线<a data-link-type="dfn" href="#associated-with-a-timeline"
                                    id="ref-for-associated-with-a-timeline">相关联</a>的任何<a data-link-type="dfn"
                                    href="#concept-animation" id="ref-for-concept-animation①">动画</a>的<a
                                    data-link-type="dfn" href="#animation-current-time"
                                    id="ref-for-animation-current-time">当前时间</a>。</p>
                        <li data-md>
                            <p>为任何<a data-link-type="dfn" href="#animation-current-time"
                                    id="ref-for-animation-current-time①">当前时间</a>已更新的动画
                                运行<a data-link-type="dfn" href="#update-an-animations-finished-state"
                                    id="ref-for-update-an-animations-finished-state">更新动画的完成状态</a>过程。</p>
                        <li data-md>
                            <p>为任何此类动画排队<a data-link-type="dfn" href="#animation-events"
                                    id="ref-for-animation-events">动画事件</a>。</p>
                    </ul>
                </div>
            <li data-md>
                <p>为<var>doc</var><a data-link-type="dfn" href="#remove-replaced-animations"
                        id="ref-for-remove-replaced-animations">移除被替换的动画</a>。</p>
            <li data-md>
                <p><a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#perform-a-microtask-checkpoint"
                        id="ref-for-perform-a-microtask-checkpoint">执行微任务检查点</a>。</p>
                <p class="note" role="note"><span>注意：</span> 这样做是为了确保在上一步骤中更新时间线时排队的任何微任务
                    在分发动画事件之前运行其回调。</p>
            <li data-md>
                <p>将<var>doc</var>的<a data-link-type="dfn" href="#pending-animation-event-queue"
                        id="ref-for-pending-animation-event-queue">待处理的动画事件队列</a>复制为<var>events to dispatch</var>。</p>
            <li data-md>
                <p>清除<var>doc</var>的<a data-link-type="dfn" href="#pending-animation-event-queue"
                        id="ref-for-pending-animation-event-queue①">待处理的动画事件队列</a>。</p>
            <li data-md>
                <p>按以下方式对<var>events to dispatch</var>中的<a data-link-type="dfn" href="#animation-events"
                        id="ref-for-animation-events①">动画事件</a>执行稳定排序：</p>
                <ol>
                    <li data-md>
                        <p>按其<a data-link-type="dfn" href="#scheduled-event-time"
                                id="ref-for-scheduled-event-time">预定事件时间</a>排序，使得预定较早发生的事件排在预定较晚发生的事件之前，
                            而预定事件时间为<a data-link-type="dfn" href="#unresolved"
                                id="ref-for-unresolved③">未解析</a>的事件排在预定事件时间<span
                                id="ref-for-unresolved④">已解析</span>的事件之前。</p>
                    <li data-md>
                        <p>在<a data-link-type="dfn" href="#scheduled-event-time"
                                id="ref-for-scheduled-event-time①">预定事件时间</a>相同的事件中，按其<a data-link-type="dfn"
                                href="#animation-composite-order" id="ref-for-animation-composite-order">复合顺序</a>排序。</p>
                </ol>
                <p class="note" role="note"><span>注意：</span> 对事件进行排序的目的是为了尽可能确保，即使在设备性能不同从而帧率不同的情况下，
                    事件也能以一致的顺序分发。</p>
                <p class="note" role="note"><span>注意：</span> 稳定排序的要求是因为有时可能会有相同预定事件时间的事件排队。
                    例如，持续时间为零的 CSS 动画可能会同时分发<code>animationstart</code>和<code>animationend</code>事件，
                    这些事件的顺序应该保持不变。</p>
            <li data-md>
                <p>按照上一步确定的顺序，在其对应的目标上<a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-dispatch"
                        id="ref-for-concept-event-dispatch">分发</a><var>events to dispatch</var>中的每个事件。</p>
        </ol>
        <p>通常描述每次调用此过程时，都会建立一个新的<dfn class="dfn-paneled" data-dfn-type="dfn" data-export
                id="animation-frame">动画帧</dfn>是很方便的。
            对<a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation②">动画</a>或<a
                data-link-type="dfn" href="#animation-effect"
                id="ref-for-animation-effect①">动画效果</a>的时间属性的更改，或对象的添加和删除可能会导致时间模型或动画模型的输出发生变化，
            但这些操作本身并不会创建新的<a data-link-type="dfn" href="#animation-frame"
                id="ref-for-animation-frame">动画帧</a>，它们只是更新当前的<span id="ref-for-animation-frame①">动画帧</span>。</p>

        <h4 class="heading settled" data-level="4.3.1" id="document-timelines"><span class="secno">4.3.1. </span><span
                class="content">文档时间线</span><a class="self-link" href="#document-timelines"></a></h4>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="document-timeline">文档时间线</dfn>是一种<a
                data-link-type="dfn" href="#timeline" id="ref-for-timeline⑦">时间线</a>，它与文档<a data-link-type="dfn"
                href="#timeline-associated-with-a-document" id="ref-for-timeline-associated-with-a-document①">相关联</a>，其
            <a data-link-type="dfn" href="#timeline-current-time" id="ref-for-timeline-current-time④">当前时间</a>计算为每次
            <a data-link-type="dfn" href="#update-animations-and-send-events"
                id="ref-for-update-animations-and-send-events">更新动画并发送事件</a>过程运行时提供的<var>now</var>时间戳的固定偏移量。
            此固定偏移量称为文档时间线的<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="origin-time">起始时间</dfn>。
        </p>
        <p class="issue" id="issue-9fa706cb"><a class="self-link" href="#issue-9fa706cb"></a> “起始时间”这个术语可能有更好的替代方案——
            它与“时间起源”过于相似。<a href="https://github.com/w3c/csswg-drafts/issues/2079">[Issue #2079]</a></p>
        <p>在为其关联文档建立<a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-time-origin"
                id="ref-for-concept-settings-object-time-origin">时间起源</a>之前，
            <a data-link-type="dfn" href="#document-timeline" id="ref-for-document-timeline">文档时间线</a>是<a
                data-link-type="dfn" href="#inactive-timeline" id="ref-for-inactive-timeline">非活动</a>的。
        </p>
        <p>在<a data-link-type="dfn" href="#document-timeline" id="ref-for-document-timeline①">文档时间线</a>变为
            <a data-link-type="dfn" href="#inactive-timeline" id="ref-for-inactive-timeline①">活动</a>后，它是
            <a data-link-type="dfn" href="#monotonically-increasing-timeline"
                id="ref-for-monotonically-increasing-timeline">单调递增</a>的。
        </p>
        <p>与不是<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#active-document"
                id="ref-for-active-document">活动文档</a>的<code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/#document"
            id="ref-for-document①">Document</a></code>相关联的<a data-link-type="dfn" href="#document-timeline"
                id="ref-for-document-timeline②">文档时间线</a>也被视为<a data-link-type="dfn" href="#inactive-timeline"
                id="ref-for-inactive-timeline②">非活动</a>的。</p>
        <p>要将文档时间线<var>timeline</var>的<a data-link-type="dfn" href="#timeline-time-to-origin-relative-time"
                id="ref-for-timeline-time-to-origin-relative-time">时间线时间<var>timeline time</var>转换为起源相对时间</a>，
            返回<var>timeline time</var>与<var>timeline</var>的<a data-link-type="dfn" href="#origin-time"
                id="ref-for-origin-time">起始时间</a>之和。如果<var>timeline</var>是非活动的，则返回
            <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved⑤">未解析的</a><a data-link-type="dfn"
                href="#time-value" id="ref-for-time-value①⓪">时间值</a>。
        </p>

        <h4 class="heading settled" data-level="4.3.2" id="the-documents-default-timeline"><span class="secno">4.3.2.
            </span><span class="content">文档的默认时间线</span><a class="self-link" href="#the-documents-default-timeline"></a>
        </h4>
        <p>每个<code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/#document"
        id="ref-for-document②">Document</a></code>都有一个<a data-link-type="dfn" href="#document-timeline"
                id="ref-for-document-timeline③">文档时间线</a>，称为<dfn class="dfn-paneled" data-dfn-for="document"
                data-dfn-type="dfn" data-export id="document-default-document-timeline">默认文档时间线</dfn>。
            <a data-link-type="dfn" href="#document-default-document-timeline"
                id="ref-for-document-default-document-timeline">默认文档时间线</a>对于每个文档都是唯一的，并且在文档的生命周期内持久存在，
            包括调用<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-document-open"
                id="ref-for-dom-document-open">document.open()</a><a data-link-type="biblio"
                href="#biblio-html">[HTML]</a>时。
        </p>
        <p><a data-link-type="dfn" href="#document-default-document-timeline"
                id="ref-for-document-default-document-timeline①">默认文档时间线</a>的<a data-link-type="dfn" href="#origin-time"
                id="ref-for-origin-time①">起始时间</a>为零。</p>
        <div class="informative-bg">
            <em>本节是非规范性的</em>
            <p>由于提供给<a data-link-type="dfn" href="#document-timeline" id="ref-for-document-timeline④">文档时间线</a>的
                <var>now</var>时间戳值没有进行缩放，因此它生成的<a data-link-type="dfn" href="#time-value"
                    id="ref-for-time-value①①">时间值</a>将与挂钟时间毫秒数成比例。
            </p>
            <p>此外，由于<a data-link-type="dfn" href="#document-default-document-timeline"
                    id="ref-for-document-default-document-timeline②">默认文档时间线</a>的<a data-link-type="dfn"
                    href="#time-value" id="ref-for-time-value①②">时间值</a>与<a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-time-origin"
                    id="ref-for-concept-settings-object-time-origin①">时间起源</a>没有偏移，
                因此<code>document.timeline.currentTime</code>将大致对应于
                <a href="https://www.w3.org/TR/hr-time/#dom-performance-now"> <code>Performance.now()</code></a><a
                    data-link-type="biblio"
                    href="#biblio-hr-time">[HR-TIME]</a>，只是<code>document.timeline.currentTime</code>
                不会在调用<a data-link-type="dfn" href="#update-animations-and-send-events"
                    id="ref-for-update-animations-and-send-events①">更新动画并发送事件</a>过程之间发生变化。
            </p>
        </div>

        <h3 class="heading settled" data-level="4.4" id="animations"><span class="secno">4.4. </span><span
                class="content">动画</span><a class="self-link" href="#animations"></a></h3>
        <div class="informative-bg">
            <em>本节是非规范性的</em>
            <p><a data-link-type="dfn" href="#timeline" id="ref-for-timeline⑧">时间线</a>的子节点称为<em>动画</em>。
                动画接受一个<a data-link-type="dfn" href="#animation-effect"
                    id="ref-for-animation-effect②">动画效果</a>，即一些定时行为的静态描述，并将其绑定到
                <span id="ref-for-timeline⑨">时间线</span>上以便运行。
                动画还通过提供暂停、寻址和速度控制来允许在运行时控制
                <span id="ref-for-animation-effect③">动画效果</span>与其<span id="ref-for-timeline①⓪">时间线</span>之间的连接。
                动画与<a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect④">动画效果</a>之间的关系类似于 DVD
                播放器和 DVD 之间的关系。
            </p>
        </div>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="concept-animation">动画</dfn>连接单个
            <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect⑤">动画效果</a>，称为其
            <dfn class="dfn-paneled" data-dfn-for="animation" data-dfn-type="dfn" data-export
                id="animation-associated-effect">关联效果</dfn>，
            到一个<a data-link-type="dfn" href="#timeline" id="ref-for-timeline①①">时间线</a>并提供播放控制。
            这两个关联都是可选且可配置的，因此
            <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation③">动画</a>在某个时刻可能没有
            <a data-link-type="dfn" href="#animation-associated-effect"
                id="ref-for-animation-associated-effect①">关联效果</a>或<span id="ref-for-timeline①②">时间线</span>。
        </p>
        <p><a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation④">动画</a>的<dfn
                class="dfn-paneled" data-dfn-for="animation" data-dfn-type="dfn" data-export
                id="animation-document-for-timing">定时文档</dfn>是与其
            <a data-link-type="dfn" href="#timeline" id="ref-for-timeline①③">时间线</a><a data-link-type="dfn"
                href="#timeline-associated-with-a-document"
                id="ref-for-timeline-associated-with-a-document②">相关联</a>的<code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/#document"
        id="ref-for-document③">Document</a></code>。
            如果动画未与时间线关联，或其时间线未与文档关联，则它没有<a data-link-type="dfn" href="#animation-document-for-timing"
                id="ref-for-animation-document-for-timing">定时文档</a>。
        </p>
        <p><a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation⑤">动画</a>的<dfn
                class="dfn-paneled" data-dfn-for="animation" data-dfn-type="dfn" data-export
                id="animation-start-time">开始时间</dfn>是其
            <a data-link-type="dfn" href="#timeline" id="ref-for-timeline①④">时间线</a>在其<a data-link-type="dfn"
                href="#animation-associated-effect" id="ref-for-animation-associated-effect②">关联效果</a>计划开始播放时的
            <a data-link-type="dfn" href="#time-value" id="ref-for-time-value①③">时间值</a>。
            动画的开始时间最初是<a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved⑥">未解析</a>的。
        </p>
        <p><a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation⑥">动画</a>还保持一个<dfn
                class="dfn-paneled" data-dfn-for="animation" data-dfn-type="dfn" data-export
                id="animation-hold-time">保持时间</dfn>，
            <a data-link-type="dfn" href="#time-value" id="ref-for-time-value①④">时间值</a>用于在暂停等情况下固定动画的输出
            <span id="ref-for-time-value①⑤">时间值</span>，称为其<a data-link-type="dfn" href="#animation-current-time"
                id="ref-for-animation-current-time②">当前时间</a>。
            <a data-link-type="dfn" href="#animation-hold-time" id="ref-for-animation-hold-time">保持时间</a>最初是
            <a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved⑦">未解析</a>的。
        </p>
        <p>为了建立冲突<a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation⑦">动画</a>的相对顺序，
            动画按创建顺序附加到<dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="global-animation-list">全局动画列表</dfn>中。
            但是，某些<a data-link-type="dfn" href="#animation-class" id="ref-for-animation-class">动画类</a>可能会提供排序动画的替代方法
            （参见<a href="#animation-classes">§ 5.4.1 动画类</a>）。</p>

        <h4 class="heading settled" data-level="4.4.1" id="setting-the-timeline"><span class="secno">4.4.1. </span><span
                class="content">设置动画的时间线</span><a class="self-link" href="#setting-the-timeline"></a></h4>
        <p>将<var>animation</var>的时间线设置为<var>new timeline</var>（可能为null）的过程如下：</p>
        <ol>
            <li data-md>
                <p>将<var>old timeline</var>设为当前的<var>animation</var>的<a data-link-type="dfn" href="#timeline"
                        id="ref-for-timeline①⑤">时间线</a>（如果有）。</p>
            <li data-md>
                <p>如果<var>new timeline</var>与<var>old timeline</var>是同一对象，则终止此过程。</p>
            <li data-md>
                <p>将<var>animation</var>的<a data-link-type="dfn" href="#timeline" id="ref-for-timeline①⑥">时间线</a>设置为
                    <var>new timeline</var>。
                </p>
            <li data-md>
                <p>如果<var>animation</var>的<a data-link-type="dfn" href="#animation-start-time"
                        id="ref-for-animation-start-time①">开始时间</a>已<a data-link-type="dfn" href="#unresolved"
                        id="ref-for-unresolved⑧">解析</a>，则将<var>animation</var>的<a data-link-type="dfn"
                        href="#animation-hold-time" id="ref-for-animation-hold-time①">保持时间</a>设为<span
                        id="ref-for-unresolved⑨">未解析</span>。</p>
                <p class="note" role="note"><span>注意：</span>此步骤确保<var>animation</var>的<a data-link-type="dfn"
                        href="#play-state-finished" id="ref-for-play-state-finished">完成播放状态</a>不会“粘滞”，而是根据其更新后的
                    <a data-link-type="dfn" href="#animation-current-time"
                        id="ref-for-animation-current-time③">当前时间</a>重新评估。
                </p>
            <li data-md>
                <p>运行<a data-link-type="dfn" href="#update-an-animations-finished-state"
                        id="ref-for-update-an-animations-finished-state①">更新动画完成状态</a>的过程，
                    对<var>animation</var>将<var>did seek</var>标志设置为false，并将<var>synchronously notify</var>标志设置为false。</p>
        </ol>

        <h4 class="heading settled" data-level="4.4.2" id="setting-the-associated-effect"><span class="secno">4.4.2.
            </span><span class="content">设置动画的关联效果</span><span id="setting-the-target-effect"></span><a
                class="self-link" href="#setting-the-associated-effect"></a></h4>
        <p>将<var>animation</var>的关联效果设置为<var>new effect</var>（可能为null）的过程如下：</p>
        <ol>
            <li data-md>
                <p>将<var>old effect</var>设为当前的<var>animation</var>的<a data-link-type="dfn"
                        href="#animation-associated-effect" id="ref-for-animation-associated-effect③">关联效果</a>（如果有）。</p>
            <li data-md>
                <p>如果<var>new effect</var>与<var>old effect</var>是同一对象，则终止此过程。</p>
            <li data-md>
                <p>如果<var>animation</var>有<a data-link-type="dfn" href="#pending-pause-task"
                        id="ref-for-pending-pause-task">待处理的暂停任务</a>，则重新安排该任务，以便在<var>animation</var>
                    <a data-link-type="dfn" href="#ready" id="ref-for-ready">就绪</a>时尽快运行。
                </p>
            <li data-md>
                <p>如果<var>animation</var>有<a data-link-type="dfn" href="#pending-play-task"
                        id="ref-for-pending-play-task">待处理的播放任务</a>，则重新安排该任务，以便在<var>animation</var>
                    <a data-link-type="dfn" href="#ready" id="ref-for-ready①">就绪</a>播放<var>new effect</var>时尽快运行。
                </p>
            <li data-md>
                <p>如果<var>new effect</var>不为<code>null</code>且<var>new effect</var>是另一个<a data-link-type="dfn"
                        href="#concept-animation" id="ref-for-concept-animation⑧">动画</a>的<a data-link-type="dfn"
                        href="#animation-associated-effect" id="ref-for-animation-associated-effect④">关联效果</a>，则运行
                    <a data-link-type="dfn" href="#animation-set-the-associated-effect-of-an-animation"
                        id="ref-for-animation-set-the-associated-effect-of-an-animation">设置动画的关联效果</a>
                    （此过程）在<var>previous animation</var>上传递null作为<var>new effect</var>。
                </p>
            <li data-md>
                <p>将<var>animation</var>的<a data-link-type="dfn" href="#animation-associated-effect"
                        id="ref-for-animation-associated-effect⑤">关联效果</a>设为<var>new effect</var>。</p>
            <li data-md>
                <p>运行<a data-link-type="dfn" href="#update-an-animations-finished-state"
                        id="ref-for-update-an-animations-finished-state②">更新动画完成状态</a>的过程，
                    对<var>animation</var>将<var>did seek</var>标志设置为false，并将<var>synchronously notify</var>标志设置为false。</p>
        </ol>

        <h4 class="heading settled" data-level="4.4.3" id="the-current-time-of-an-animation"><span class="secno">4.4.3.
            </span><span class="content">动画的当前时间</span><a class="self-link"
                href="#the-current-time-of-an-animation"></a></h4>
        <p><a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation⑨">动画</a>为其
            <a data-link-type="dfn" href="#animation-associated-effect"
                id="ref-for-animation-associated-effect⑥">关联效果</a>提供一个
            <a data-link-type="dfn" href="#time-value" id="ref-for-time-value①⑥">时间值</a>，称为动画的<dfn class="dfn-paneled"
                data-dfn-for="animation" data-dfn-type="dfn" data-export id="animation-current-time">当前时间</dfn>。
        </p>
        <p><a data-link-type="dfn" href="#animation-current-time" id="ref-for-animation-current-time④">当前时间</a>根据以下条件计算：
        </p>
        <div class="switch">
            <dl>
                <dt data-md>如果动画的<a data-link-type="dfn" href="#animation-hold-time"
                        id="ref-for-animation-hold-time②">保持时间</a>已<a data-link-type="dfn" href="#unresolved"
                        id="ref-for-unresolved①⓪">解析</a>，
                <dd data-md>
                    <p><a data-link-type="dfn" href="#animation-current-time"
                            id="ref-for-animation-current-time⑤">当前时间</a>是动画的<a data-link-type="dfn"
                            href="#animation-hold-time" id="ref-for-animation-hold-time③">保持时间</a>。</p>
                <dt data-md>
                    <p>如果以下<em>任一</em>条件为真：</p>
                    <ol>
                        <li data-md>
                            <p>动画没有关联的<a data-link-type="dfn" href="#timeline" id="ref-for-timeline①⑦">时间线</a>，或</p>
                        <li data-md>
                            <p>关联的<a data-link-type="dfn" href="#timeline" id="ref-for-timeline①⑧">时间线</a>是
                                <a data-link-type="dfn" href="#inactive-timeline"
                                    id="ref-for-inactive-timeline③">非活动的</a>，或
                            </p>
                        <li data-md>
                            <p>动画的<a data-link-type="dfn" href="#animation-start-time"
                                    id="ref-for-animation-start-time②">开始时间</a>是<a data-link-type="dfn"
                                    href="#unresolved" id="ref-for-unresolved①①">未解析</a>的。</p>
                    </ol>
                <dd data-md>
                    <p><a data-link-type="dfn" href="#animation-current-time"
                            id="ref-for-animation-current-time⑥">当前时间</a>是一个<a data-link-type="dfn" href="#unresolved"
                            id="ref-for-unresolved①②">未解析</a>的时间值。</p>
                <dt data-md>否则，
                <dd data-md>
                    <blockquote><code><a data-link-type="dfn" href="#animation-current-time" id="ref-for-animation-current-time⑦">当前时间</a> =
    (<var>时间线时间</var> - <a data-link-type="dfn" href="#animation-start-time" id="ref-for-animation-start-time③">开始时间</a>)
    × <a data-link-type="dfn" href="#playback-rate" id="ref-for-playback-rate①">播放速度</a></code></blockquote>
                    <p>其中<var>时间线时间</var>是关联的<a data-link-type="dfn" href="#time-value"
                            id="ref-for-time-value①⑦">时间值</a>。
                        <a data-link-type="dfn" href="#playback-rate" id="ref-for-playback-rate②">播放速度</a>值定义在
                        <a href="#speed-control">§ 4.4.15 速度控制</a>中。
                    </p>
            </dl>
        </div>

        <h4 class="heading settled" data-level="4.4.4" id="setting-the-current-time-of-an-animation"><span
                class="secno">4.4.4. </span><span class="content">设置动画的当前时间</span><a class="self-link"
                href="#setting-the-current-time-of-an-animation"></a></h4>
        <p><a data-link-type="dfn" href="#animation-current-time"
                id="ref-for-animation-current-time⑧">动画的当前时间</a>可以设置为一个新值，以<em>定位</em>动画。设置当前时间的过程分为两部分。</p>
        <p>将动画<var>animation</var>的当前时间<dfn class="dfn-paneled" data-dfn-for="animation" data-dfn-type="dfn" data-export
                id="animation-silently-set-the-current-time">静默设置</dfn>为<var>seek time</var>的过程如下：</p>
        <ol>
            <li data-md>
                <p>如果<var>seek time</var>是一个<a data-link-type="dfn" href="#unresolved"
                        id="ref-for-unresolved①③">未解析的</a>时间值，则执行以下步骤。</p>
                <ol>
                    <li data-md>
                        <p>如果<a data-link-type="dfn" href="#animation-current-time"
                                id="ref-for-animation-current-time⑨">当前时间</a>已<a data-link-type="dfn" href="#unresolved"
                                id="ref-for-unresolved①④">解析</a>，则<a data-link-type="dfn"
                                href="https://webidl.spec.whatwg.org/#dfn-throw" id="ref-for-dfn-throw">抛出</a><span
                                class="exceptionname">TypeError</span>异常。</p>
                    <li data-md>
                        <p>中止这些步骤。</p>
                </ol>
            <li data-md>
                <p>根据以下情况更新<var>animation</var>的<a data-link-type="dfn" href="#animation-hold-time"
                        id="ref-for-animation-hold-time④">保持时间</a>或<a data-link-type="dfn" href="#animation-start-time"
                        id="ref-for-animation-start-time④">开始时间</a>：</p>
                <div class="switch">
                    <dl>
                        <dt data-md>
                            <p>如果以下任意条件为真：</p>
                            <ul>
                                <li data-md>
                                    <p><var>animation</var>的<a data-link-type="dfn" href="#animation-hold-time"
                                            id="ref-for-animation-hold-time⑤">保持时间</a>已<a data-link-type="dfn"
                                            href="#unresolved" id="ref-for-unresolved①⑤">解析</a>，或</p>
                                <li data-md>
                                    <p><var>animation</var>的<a data-link-type="dfn" href="#animation-start-time"
                                            id="ref-for-animation-start-time⑤">开始时间</a>未<a data-link-type="dfn"
                                            href="#unresolved" id="ref-for-unresolved①⑥">解析</a>，或</p>
                                <li data-md>
                                    <p><var>animation</var>没有关联的<a data-link-type="dfn" href="#timeline"
                                            id="ref-for-timeline②⓪">时间线</a>或关联的时间线是<a data-link-type="dfn"
                                            href="#inactive-timeline" id="ref-for-inactive-timeline④">非活动的</a>，或</p>
                                <li data-md>
                                    <p><var>animation</var>的<a data-link-type="dfn" href="#playback-rate"
                                            id="ref-for-playback-rate③">播放速率</a>为0，</p>
                            </ul>
                        <dd data-md>
                            <p>将<var>animation</var>的<a data-link-type="dfn" href="#animation-hold-time"
                                    id="ref-for-animation-hold-time⑥">保持时间</a>设置为<var>seek time</var>。</p>
                        <dt data-md>否则，
                        <dd data-md>
                            <p>将<var>animation</var>的<a data-link-type="dfn" href="#animation-start-time"
                                    id="ref-for-animation-start-time⑥">开始时间</a>设置为评估结果<code><var>timeline time</var> - (<var>seek time</var> / <a data-link-type="dfn" href="#playback-rate" id="ref-for-playback-rate④">播放速率</a>)</code>，其中<var>timeline
                                    time</var>是与<var>animation</var>关联的<a data-link-type="dfn" href="#timeline"
                                    id="ref-for-timeline②②">时间线</a>的当前<a data-link-type="dfn" href="#time-value"
                                    id="ref-for-time-value①⑧">时间值</a>。</p>
                    </dl>
                </div>
            <li data-md>
                <p>如果<var>animation</var>没有关联的<a data-link-type="dfn" href="#timeline"
                        id="ref-for-timeline②③">时间线</a>或关联的时间线是<a data-link-type="dfn" href="#inactive-timeline"
                        id="ref-for-inactive-timeline⑤">非活动的</a>，则将<var>animation</var>的<a data-link-type="dfn"
                        href="#animation-start-time" id="ref-for-animation-start-time⑦">开始时间</a>设为<a
                        data-link-type="dfn" href="#unresolved" id="ref-for-unresolved①⑦">未解析</a>。</p>
                <p class="note" role="note"> 这保留了一个不变性，即当我们没有活动时间线时，只能设置<a data-link-type="dfn"
                        href="#animation-start-time" id="ref-for-animation-start-time⑧">开始时间</a>或动画的<a
                        data-link-type="dfn" href="#animation-current-time"
                        id="ref-for-animation-current-time①⓪">当前时间</a>之一。</p>
            <li data-md>
                <p>将<var>animation</var>的<a data-link-type="dfn" href="#previous-current-time"
                        id="ref-for-previous-current-time">先前的当前时间</a>设为<a data-link-type="dfn" href="#unresolved"
                        id="ref-for-unresolved①⑧">未解析</a>。</p>
        </ol>
        <p>将动画<var>animation</var>的当前时间设置为<var>seek time</var>的过程如下：</p>
        <ol>
            <li data-md>
                <p>运行<a data-link-type="dfn" href="#animation-silently-set-the-current-time"
                        id="ref-for-animation-silently-set-the-current-time">静默设置当前时间</a>的步骤，将<var>animation</var>的时间设置为<var>seek
                        time</var>。</p>
            <li data-md>
                <p>如果<var>animation</var>有<a data-link-type="dfn" href="#pending-pause-task"
                        id="ref-for-pending-pause-task①">待处理的暂停任务</a>，则通过执行以下步骤同步完成暂停操作：</p>
                <ol>
                    <li data-md>
                        <p>将<var>animation</var>的<a data-link-type="dfn" href="#animation-hold-time"
                                id="ref-for-animation-hold-time⑦">保持时间</a>设置为<var>seek time</var>。</p>
                    <li data-md>
                        <p><a data-link-type="dfn" href="#apply-any-pending-playback-rate"
                                id="ref-for-apply-any-pending-playback-rate">应用任何待处理的播放速率</a>到<var>animation</var>。</p>
                    <li data-md>
                        <p>将<var>animation</var>的<a data-link-type="dfn" href="#animation-start-time"
                                id="ref-for-animation-start-time⑨">开始时间</a>设为<a data-link-type="dfn" href="#unresolved"
                                id="ref-for-unresolved①⑨">未解析</a>。</p>
                    <li data-md>
                        <p>取消<a data-link-type="dfn" href="#pending-pause-task"
                                id="ref-for-pending-pause-task②">待处理的暂停任务</a>。</p>
                    <li data-md>
                        <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve"
                                id="ref-for-resolve">解决</a><var>animation</var>的<a data-link-type="dfn"
                                href="#current-ready-promise"
                                id="ref-for-current-ready-promise">当前准备就绪的承诺</a>，并传递<var>animation</var>。</p>
                </ol>
            <li data-md>
                <p>运行<a data-link-type="dfn" href="#update-an-animations-finished-state"
                        id="ref-for-update-an-animations-finished-state③">更新动画完成状态</a>的过程，对<var>animation</var>将<var>did
                        seek</var>标志设置为true，并将<var>synchronously notify</var>标志设置为false。</p>
        </ol>
        <h4 class="heading settled" data-level="4.4.5" id="setting-the-start-time-of-an-animation"><span
                class="secno">4.4.5. </span><span class="content">设置动画的开始时间</span><a class="self-link"
                href="#setting-the-start-time-of-an-animation"></a></h4>
        <p>将动画<var>animation</var>的开始时间<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="set-the-start-time">设置</dfn>为<var>new start time</var>的过程如下：</p>
        <ol>
            <li data-md>
                <p>令<var>timeline time</var>为<var>animation</var>所关联的<a data-link-type="dfn" href="#timeline"
                        id="ref-for-timeline②⑤">时间线</a>的当前<a data-link-type="dfn" href="#time-value"
                        id="ref-for-time-value①⑨">时间值</a>。如果没有与<var>animation</var>关联的<a data-link-type="dfn"
                        href="#timeline" id="ref-for-timeline②⑥">时间线</a>或关联的时间线是<a data-link-type="dfn"
                        href="#inactive-timeline" id="ref-for-inactive-timeline⑥">非活动的</a>，则将<var>timeline
                        time</var>设为<a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved②⓪">未解析</a>。</p>
            <li data-md>
                <p>如果<var>timeline time</var>是<a data-link-type="dfn" href="#unresolved"
                        id="ref-for-unresolved②①">未解析</a>的，而<var>new start time</var>是已解析的，则将<var>animation</var>的<a
                        data-link-type="dfn" href="#animation-hold-time"
                        id="ref-for-animation-hold-time⑧">保持时间</a>设为未解析。</p>
                <p class="note" role="note"> 这保留了一个不变性，即当我们没有活动时间线时，只能设置<em>开始时间</em>或动画的<em>当前时间</em>之一。</p>
            <li data-md>
                <p>令<var>previous current time</var>为<var>animation</var>的当前时间。</p>
                <p class="note" role="note"><span>注意：</span>这是应用上一步中的更改后<var>animation</var>的当前时间，这些更改可能导致当前时间变为未解析。</p>
            <li data-md>
                <p><a data-link-type="dfn" href="#apply-any-pending-playback-rate"
                        id="ref-for-apply-any-pending-playback-rate①">应用任何待处理的播放速率</a>到<var>animation</var>。</p>
            <li data-md>
                <p>将<var>animation</var>的<a data-link-type="dfn" href="#animation-start-time"
                        id="ref-for-animation-start-time①①">开始时间</a>设为<var>new start time</var>。</p>
            <li data-md>
                <p>根据以下匹配条件之一更新<var>animation</var>的<a data-link-type="dfn" href="#animation-hold-time"
                        id="ref-for-animation-hold-time⑨">保持时间</a>：</p>
                <div class="switch">
                    <dl>
                        <dt data-md>如果<var>new start time</var>是已解析的，
                        <dd data-md>
                            <p>如果<var>animation</var>的<a data-link-type="dfn" href="#playback-rate"
                                    id="ref-for-playback-rate⑤">播放速率</a>不为0，则将<var>animation</var>的<a
                                    data-link-type="dfn" href="#animation-hold-time"
                                    id="ref-for-animation-hold-time①⓪">保持时间</a>设为未解析。</p>
                        <dt data-md>否则（<var>new start time</var>未解析），
                        <dd data-md>
                            <p>将<var>animation</var>的<a data-link-type="dfn" href="#animation-hold-time"
                                    id="ref-for-animation-hold-time①①">保持时间</a>设为<var>previous current
                                    time</var>，即使<var>previous current time</var>是未解析的。</p>
                    </dl>
                </div>
            <li data-md>
                <p>如果<var>animation</var>有<a data-link-type="dfn" href="#pending-play-task"
                        id="ref-for-pending-play-task①">待处理的播放任务</a>或<a data-link-type="dfn" href="#pending-pause-task"
                        id="ref-for-pending-pause-task③">待处理的暂停任务</a>，则取消该任务，并<em>解决</em><var>animation</var>的<a
                        data-link-type="dfn" href="#current-ready-promise"
                        id="ref-for-current-ready-promise①">当前准备就绪的承诺</a>，传递<var>animation</var>。</p>
            <li data-md>
                <p>运行<a data-link-type="dfn" href="#update-an-animations-finished-state"
                        id="ref-for-update-an-animations-finished-state④">更新动画完成状态</a>的过程，设置<var>did
                        seek</var>标志为true，并将<var>synchronously notify</var>标志设置为false。</p>
        </ol>

        <h4 class="heading settled" data-level="4.4.6" id="waiting-for-the-associated-effect"><span class="secno">4.4.6.
            </span><span class="content">等待关联效果</span><span id="waiting-for-the-target-effect"></span><a
                class="self-link" href="#waiting-for-the-associated-effect"></a></h4>
        <div class="informative-bg">
            <p><em>本节为非规范性内容</em></p>
            <p>某些由<a data-link-type="dfn" href="#concept-animation"
                    id="ref-for-concept-animation①①">动画</a>执行的操作可能不会立即发生。
                例如，一些用户代理可能会将动画的播放委托给单独的进程或专门的图形硬件，每一个都可能涉及一些设置开销。</p>
            <p>如果此类动画从触发动画的时刻开始计时，则可能在动画的第一帧和第二帧之间产生显著的跳跃，这对应于所涉及的设置时间。</p>
            <p>为了避免这个问题，Web Animations 通常从动画的第一帧完成时开始计时。
                这由<a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved②⑨">未解析</a>的<a data-link-type="dfn"
                    href="#animation-start-time" id="ref-for-animation-start-time①②">开始时间</a>表示，该时间在动画<a
                    data-link-type="dfn" href="#ready" id="ref-for-ready②">准备好</a>时解析。
                内容可以通过将<a data-link-type="dfn" href="#animation-start-time"
                    id="ref-for-animation-start-time①③">开始时间</a>设置为已解析的<a data-link-type="dfn" href="#time-value"
                    id="ref-for-time-value②⓪">时间值</a>来选择退出此行为。</p>
        </div>
        <p>在以下两个条件都为真时，动画被认为是<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="ready">准备好</dfn>的：</p>
        <ul>
            <li data-md>
                <p>用户代理已完成开始播放动画<a data-link-type="dfn" href="#animation-associated-effect"
                        id="ref-for-animation-associated-effect⑦">关联效果</a>所需的所有设置，包括渲染任何<a data-link-type="dfn"
                        href="#keyframe-effect" id="ref-for-keyframe-effect">关键帧效果</a>的第一帧。</p>
            <li data-md>
                <p>动画关联了一个非<a data-link-type="dfn" href="#inactive-timeline" id="ref-for-inactive-timeline⑦">非活动</a>的<a
                        data-link-type="dfn" href="#timeline" id="ref-for-timeline②⑦">时间线</a>。</p>
        </ul>
        <h4 class="heading settled" data-level="4.4.7" id="the-current-ready-promise"><span class="secno">4.4.7.
            </span><span class="content">当前准备就绪的 Promise</span><a class="self-link"
                href="#the-current-ready-promise"></a></h4>
        <p>每个<a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation①③">动画</a>都有一个<dfn
                class="dfn-paneled" data-dfn-type="dfn" data-noexport id="current-ready-promise">当前准备就绪的 Promise</dfn>。
            该<a data-link-type="dfn" href="#current-ready-promise" id="ref-for-current-ready-promise②">当前准备就绪的
                Promise</a>最初是一个已解析的<a data-link-type="dfn"
                href="http://www.ecma-international.org/ecma-262/6.0/#sec-promise-objects"
                id="ref-for-sec-promise-objects">Promise</a>，
            该 Promise 是使用创建<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-promise-resolved-with"
                id="ref-for-a-promise-resolved-with">新解析的 Promise</a>的过程创建的，
            其值为动画本身，并在动画的<a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm"
                id="ref-for-concept-relevant-realm">相关领域</a>中创建。
        </p>
        <p>每当动画在先前没有挂起任务时排队<a data-link-type="dfn" href="#pending-play-task"
                id="ref-for-pending-play-task②">挂起的播放任务</a>或<a data-link-type="dfn" href="#pending-pause-task"
                id="ref-for-pending-pause-task④">挂起的暂停任务</a>，或当动画被取消时（参见<a
                href="#canceling-an-animation-section">§ 4.4.14 取消动画</a>），
            该对象将被新的<a data-link-type="dfn" href="http://www.ecma-international.org/ecma-262/6.0/#sec-promise-objects"
                id="ref-for-sec-promise-objects①">Promise 对象</a>替换。</p>
        <div class="note" role="note">
            <p>请注意，由于同一个对象用于挂起播放和挂起暂停请求，因此建议作者在<a data-link-type="dfn"
                    href="http://www.ecma-international.org/ecma-262/6.0/#sec-promise-objects"
                    id="ref-for-sec-promise-objects②">Promise 对象</a>被解析时检查动画的状态。</p>
            <p>例如，在以下代码片段中，当<a data-link-type="dfn" href="#current-ready-promise"
                    id="ref-for-current-ready-promise③">当前准备就绪的 Promise</a>被解析时，动画的状态将为<a data-link-type="dfn"
                    href="#play-state-running" id="ref-for-play-state-running">运行中</a>。
                这是因为当<a data-link-type="dfn" href="#pending-play-task"
                    id="ref-for-pending-play-task③">挂起的播放任务</a>仍在队列中时，播放操作发生，因此<a
                    id="ref-for-current-ready-promise④">当前准备就绪的 Promise</a>被重用。</p>
            <div class="example" id="example-eb69e98f">
                <a class="self-link" href="#example-eb69e98f"></a>
                <pre class="lang-javascript highlight">animation<c- p>.</c->pause<c- p>();</c->
animation<c- p>.</c->ready<c- p>.</c->then<c- p>(</c-><c- a>function</c-><c- p>()</c-> <c- p>{</c->
  <c- c1>// 显示 'running'</c->
  alert<c- p>(</c->animation<c- p>.</c->playState<c- p>);</c->
<c- p>});</c->
animation<c- p>.</c->play<c- p>();</c-></pre>
            </div>
        </div>

        <h4 class="heading settled" data-level="4.4.8" id="playing-an-animation-section"><span class="secno">4.4.8.
            </span><span class="content">播放动画</span><a class="self-link" href="#playing-an-animation-section"></a></h4>
        <p>用于<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="play-an-animation">播放动画</dfn>的过程，<var>animation</var>，给定一个标志<var>auto-rewind</var>，如下：</p>
        <ol>
            <li data-md>
                <p>让<var>aborted pause</var>为布尔标志，如果<var>animation</var>有一个<a data-link-type="dfn"
                        href="#pending-pause-task" id="ref-for-pending-pause-task⑤">挂起的暂停任务</a>，则为 true，否则为 false。</p>
            <li data-md>
                <p>让<var>has pending ready promise</var>为布尔标志，初始值为 false。</p>
            <li data-md>
                <p>让<var>seek time</var>为一个初始为<a data-link-type="dfn" href="#unresolved"
                        id="ref-for-unresolved③①">未解决的</a><a data-link-type="dfn" href="#time-value"
                        id="ref-for-time-value②①">时间值</a>。</p>
            <li data-md>
                <p>如果<var>auto-rewind</var>标志为 true，执行以下步骤中第一个匹配条件对应的步骤：</p>
                <div class="switch">
                    <dl>
                        <dt data-md>
                            <p>如果<var>animation</var>的<a data-link-type="dfn" href="#effective-playback-rate"
                                    id="ref-for-effective-playback-rate">有效播放速率</a> ≥ 0，且<var>animation</var>的<a
                                    data-link-type="dfn" href="#animation-current-time"
                                    id="ref-for-animation-current-time①④">当前时间</a>为<em>以下之一</em>：</p>
                            <ul>
                                <li data-md>
                                    <p><a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved③②">未解决的</a>，或
                                    </p>
                                <li data-md>
                                    <p>小于零，或</p>
                                <li data-md>
                                    <p>大于或等于<a data-link-type="dfn" href="#associated-effect-end"
                                            id="ref-for-associated-effect-end">关联效果结束</a>，</p>
                            </ul>
                        <dd data-md>
                            <p>将<var>seek time</var>设置为零。</p>
                        <dt data-md>
                            <p>如果<var>animation</var>的<a data-link-type="dfn" href="#effective-playback-rate"
                                    id="ref-for-effective-playback-rate①">有效播放速率</a> &lt; 0，且<var>animation</var>的<a
                                    data-link-type="dfn" href="#animation-current-time"
                                    id="ref-for-animation-current-time①⑤">当前时间</a>为<em>以下之一</em>：</p>
                            <ul>
                                <li data-md>
                                    <p><a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved③③">未解决的</a>，或
                                    </p>
                                <li data-md>
                                    <p>小于或等于零，或</p>
                                <li data-md>
                                    <p>大于<a data-link-type="dfn" href="#associated-effect-end"
                                            id="ref-for-associated-effect-end①">关联效果结束</a>，</p>
                            </ul>
                        <dd data-md>
                            <div class="switch">
                                <dl>
                                    <dt data-md>如果<a data-link-type="dfn" href="#associated-effect-end"
                                            id="ref-for-associated-effect-end②">关联效果结束</a>为正无穷大，
                                    <dd data-md>
                                        <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw"
                                                id="ref-for-dfn-throw①">抛出</a>一个"<code
                                                class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidstateerror" id="ref-for-invalidstateerror">InvalidStateError</a></code>"<code
                                                class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException">DOMException</a></code>并中止这些步骤。
                                        </p>
                                    <dt data-md>否则，
                                    <dd data-md>
                                        <p>将<var>seek time</var>设置为<var>animation</var>的<a data-link-type="dfn"
                                                href="#associated-effect-end"
                                                id="ref-for-associated-effect-end③">关联效果结束</a>。</p>
                                </dl>
                            </div>
                    </dl>
                </div>
            <li data-md>
                <p>如果以下三个条件<em>都</em>满足：</p>
                <ul>
                    <li data-md>
                        <p><var>seek time</var>为<a data-link-type="dfn" href="#unresolved"
                                id="ref-for-unresolved③④">未解决的</a>，并且</p>
                    <li data-md>
                        <p><var>animation</var>的<a data-link-type="dfn" href="#animation-start-time"
                                id="ref-for-animation-start-time①④">开始时间</a>为<a data-link-type="dfn" href="#unresolved"
                                id="ref-for-unresolved③⑤">未解决的</a>，并且</p>
                    <li data-md>
                        <p><var>animation</var>的<a data-link-type="dfn" href="#animation-current-time"
                                id="ref-for-animation-current-time①⑥">当前时间</a>为<a data-link-type="dfn"
                                href="#unresolved" id="ref-for-unresolved③⑥">未解决的</a>，</p>
                </ul>
                <p>将<var>seek time</var>设置为零。</p>
                <p class="note" role="note"><span>注意：</span> 上述步骤确保无论<var>auto-rewind</var>标志如何设置，此过程都将播放一个闲置动画。</p>
            <li data-md>
                <p>让<var>has finite timeline</var>为 true，如果<var>animation</var>有一个关联的<a data-link-type="dfn"
                        href="#timeline" id="ref-for-timeline②⑧">时间轴</a>，该时间轴不是<a data-link-type="dfn"
                        href="#monotonically-increasing-timeline"
                        id="ref-for-monotonically-increasing-timeline①">单调递增的</a>。</p>
            <li data-md>
                <p>如果<var>seek time</var>是<a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved③⑦">已解决的</a>，
                </p>
                <div class="switch">
                    <dl>
                        <dt data-md>如果<var>has finite timeline</var>为 true，
                        <dd data-md>
                            <ol>
                                <li data-md>
                                    <p>将<var>animation</var>的<a data-link-type="dfn" href="#animation-start-time"
                                            id="ref-for-animation-start-time①⑤">开始时间</a>设置为<var>seek time</var>。</p>
                                <li data-md>
                                    <p>让<var>animation</var>的<a data-link-type="dfn" href="#animation-hold-time"
                                            id="ref-for-animation-hold-time①②">保持时间</a>为<a data-link-type="dfn"
                                            href="#unresolved" id="ref-for-unresolved③⑧">未解决的</a>。</p>
                                <li data-md>
                                    <p><a data-link-type="dfn" href="#apply-any-pending-playback-rate"
                                            id="ref-for-apply-any-pending-playback-rate②">应用任何挂起的播放速率</a>到<var>animation</var>。
                                    </p>
                            </ol>
                        <dt data-md>否则，
                        <dd data-md>
                            <p>将<var>animation</var>的<a data-link-type="dfn" href="#animation-hold-time"
                                    id="ref-for-animation-hold-time①③">保持时间</a>设置为<var>seek time</var>。</p>
                    </dl>
                </div>
            <li data-md>
                <p>如果<var>animation</var>的<a data-link-type="dfn" href="#animation-hold-time"
                        id="ref-for-animation-hold-time①④">保持时间</a>是<a data-link-type="dfn" href="#unresolved"
                        id="ref-for-unresolved③⑨">已解决的</a>，让其<a data-link-type="dfn" href="#animation-start-time"
                        id="ref-for-animation-start-time①⑥">开始时间</a>为<a id="ref-for-unresolved④⓪">未解决的</a>。</p>
            <li data-md>
                <p>如果<var>animation</var>有一个<a data-link-type="dfn" href="#pending-play-task"
                        id="ref-for-pending-play-task④">挂起的播放任务</a>或<a data-link-type="dfn" href="#pending-pause-task"
                        id="ref-for-pending-pause-task⑥">挂起的暂停任务</a>，</p>
                <ol>
                    <li data-md>
                        <p>取消该任务。</p>
                    <li data-md>
                        <p>将<var>has pending ready promise</var>设置为 true。</p>
                </ol>
            <li data-md>
                <p>如果以下四个条件<em>都</em>满足：</p>
                <ul>
                    <li data-md>
                        <p><var>animation</var>的<a data-link-type="dfn" href="#animation-hold-time"
                                id="ref-for-animation-hold-time①⑤">保持时间</a>为<a data-link-type="dfn" href="#unresolved"
                                id="ref-for-unresolved④①">未解决的</a>，并且</p>
                    <li data-md>
                        <p><var>seek time</var>为<a data-link-type="dfn" href="#unresolved"
                                id="ref-for-unresolved④②">未解决的</a>，并且</p>
                    <li data-md>
                        <p><var>aborted pause</var>为 false，并且</p>
                    <li data-md>
                        <p><var>animation</var>没有<a data-link-type="dfn" href="#pending-playback-rate"
                                id="ref-for-pending-playback-rate">挂起的播放速率</a>，</p>
                </ul>
                <p>中止此过程。</p>
            <li data-md>
                <p>如果<var>has pending ready promise</var>为 false，让<var>animation</var>的<a data-link-type="dfn"
                        href="#current-ready-promise" id="ref-for-current-ready-promise⑤">当前准备就绪的 Promise</a>为<a
                        data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-new-promise"
                        id="ref-for-a-new-promise">一个新的 promise</a>，位于<var>animation</var>的<a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm"
                        id="ref-for-concept-relevant-realm①">相关领域</a>。</p>
            <li data-md>
                <p>安排一个任务，在<var>animation</var><a data-link-type="dfn" href="#ready" id="ref-for-ready③">准备就绪</a>时立即运行。
                    该任务应执行以下步骤：</p>
                <ol>
                    <li data-md>
                        <p>断言<var>animation</var>的<a data-link-type="dfn" href="#animation-start-time"
                                id="ref-for-animation-start-time①⑦">开始时间</a>或<a data-link-type="dfn"
                                href="#animation-hold-time" id="ref-for-animation-hold-time①⑥">保持时间</a>中的至少一个是<a
                                data-link-type="dfn" href="#unresolved" id="ref-for-unresolved④③">已解决的</a>。</p>
                    <li data-md>
                        <p>让<var>ready time</var>为<var>animation</var>成为<a data-link-type="dfn" href="#ready"
                                id="ref-for-ready④">准备就绪</a>时<a data-link-type="dfn" href="#timeline"
                                id="ref-for-timeline②⑨">时间轴</a>的<a data-link-type="dfn" href="#time-value"
                                id="ref-for-time-value②②">时间值</a>。</p>
                    <li data-md>
                        <p>执行以下条件中第一个匹配条件对应的步骤（如果有）：</p>
                        <div class="switch">
                            <dl>
                                <dt data-md>如果<var>animation</var>的<a data-link-type="dfn" href="#animation-hold-time"
                                        id="ref-for-animation-hold-time①⑦">保持时间</a>是<a data-link-type="dfn"
                                        href="#unresolved" id="ref-for-unresolved④④">已解决的</a>，
                                <dd data-md>
                                    <ol>
                                        <li data-md>
                                            <p><a data-link-type="dfn" href="#apply-any-pending-playback-rate"
                                                    id="ref-for-apply-any-pending-playback-rate③">应用任何挂起的播放速率</a>到<var>animation</var>。
                                            </p>
                                        <li data-md>
                                            <p>让<var>new start
                                                    time</var>为评估<code><var>ready time</var> - <a data-link-type="dfn" href="#animation-hold-time" id="ref-for-animation-hold-time①⑧">保持时间</a> / <a data-link-type="dfn" href="#playback-rate" id="ref-for-playback-rate⑥">播放速率</a></code>的结果。如果<a
                                                    data-link-type="dfn" href="#playback-rate"
                                                    id="ref-for-playback-rate⑦">播放速率</a>为零，让<var>new start
                                                    time</var>为<var>ready time</var>。</p>
                                        <li data-md>
                                            <p>将<var>animation</var>的<a data-link-type="dfn"
                                                    href="#animation-start-time"
                                                    id="ref-for-animation-start-time①⑧">开始时间</a>设置为<var>new start
                                                    time</var>。</p>
                                        <li data-md>
                                            <p>如果<var>animation</var>的<a data-link-type="dfn" href="#playback-rate"
                                                    id="ref-for-playback-rate⑧">播放速率</a>不是 0，将<var>animation</var>的<a
                                                    data-link-type="dfn" href="#animation-hold-time"
                                                    id="ref-for-animation-hold-time①⑨">保持时间</a>设为<a data-link-type="dfn"
                                                    href="#unresolved" id="ref-for-unresolved④⑤">未解决的</a>。</p>
                                    </ol>
                                <dt data-md>如果<var>animation</var>的<a data-link-type="dfn" href="#animation-start-time"
                                        id="ref-for-animation-start-time①⑨">开始时间</a>已解决，并且<var>animation</var>有一个<a
                                        data-link-type="dfn" href="#pending-playback-rate"
                                        id="ref-for-pending-playback-rate①">挂起的播放速率</a>，
                                <dd data-md>
                                    <ol>
                                        <li data-md>
                                            <p>让<var>current time to
                                                    match</var>为评估<code>(<var>ready time</var> - <a data-link-type="dfn" href="#animation-start-time" id="ref-for-animation-start-time②⓪">开始时间</a>) × <a data-link-type="dfn" href="#playback-rate" id="ref-for-playback-rate⑨">播放速率</a></code>的结果。
                                            </p>
                                        <li data-md>
                                            <p><a data-link-type="dfn" href="#apply-any-pending-playback-rate"
                                                    id="ref-for-apply-any-pending-playback-rate④">应用任何挂起的播放速率</a>到<var>animation</var>。
                                            </p>
                                        <li data-md>
                                            <p>如果<var>animation</var>的<a data-link-type="dfn" href="#playback-rate"
                                                    id="ref-for-playback-rate①⓪">播放速率</a>为零，让<var>animation</var>的<a
                                                    data-link-type="dfn" href="#animation-hold-time"
                                                    id="ref-for-animation-hold-time②⓪">保持时间</a>为<var>current time to
                                                    match</var>。</p>
                                        <li data-md>
                                            <p>让<var>new start
                                                    time</var>为评估<code><var>ready time</var> - <var>current time to match</var> / <a data-link-type="dfn" href="#playback-rate" id="ref-for-playback-rate①①">播放速率</a></code>的结果。如果<a
                                                    data-link-type="dfn" href="#playback-rate"
                                                    id="ref-for-playback-rate①②">播放速率</a>为零，让<var>new start
                                                    time</var>为<var>ready time</var>。</p>
                                        <li data-md>
                                            <p>将<var>animation</var>的<a data-link-type="dfn"
                                                    href="#animation-start-time"
                                                    id="ref-for-animation-start-time②①">开始时间</a>设置为<var>new start
                                                    time</var>。</p>
                                    </ol>
                            </dl>
                        </div>
                    <li data-md>
                        <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve"
                                id="ref-for-resolve②">解决</a><var>animation</var>的<a data-link-type="dfn"
                                href="#current-ready-promise" id="ref-for-current-ready-promise⑥">当前准备就绪的
                                Promise</a>与<var>animation</var>。</p>
                    <li data-md>
                        <p>运行用于<a data-link-type="dfn" href="#update-an-animations-finished-state"
                                id="ref-for-update-an-animations-finished-state⑤">更新动画的完成状态</a>的过程，将<var>did
                                seek</var>标志设置为 false，并将<var>synchronously notify</var>标志设置为 false。</p>
                        <div class="note" role="note">注意，上述两步的顺序很重要，因为这意味着具有零长度<a data-link-type="dfn"
                                href="#animation-associated-effect"
                                id="ref-for-animation-associated-effect⑧">关联效果</a>的动画将在其<a data-link-type="dfn"
                                href="#current-finished-promise" id="ref-for-current-finished-promise">当前完成的
                                Promise</a>之前解决其<a data-link-type="dfn" href="#current-ready-promise"
                                id="ref-for-current-ready-promise⑦">当前准备就绪的 Promise</a>。</div>
                </ol>
                <p>只要上述任务已安排但尚未运行，<var>animation</var>就被描述为具有一个<dfn class="dfn-paneled" data-dfn-type="dfn"
                        data-noexport
                        id="pending-play-task">挂起的播放任务</dfn>。然而，当任务正在运行时，<var>animation</var><em>不</em>具有<a
                        data-link-type="dfn" href="#pending-play-task" id="ref-for-pending-play-task⑤">挂起的播放任务</a>。</p>
                <p>如果用户代理确定<var>animation</var>立即<a data-link-type="dfn" href="#ready"
                        id="ref-for-ready⑤">准备就绪</a>，它可能会将上述任务安排为微任务，使其在下一个<a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#perform-a-microtask-checkpoint"
                        id="ref-for-perform-a-microtask-checkpoint①">微任务检查点</a>运行，但不得<em>同步</em>执行任务。</p>
                <div class="note" role="note">
                    <p>上述要求异步运行<a data-link-type="dfn" href="#pending-play-task"
                            id="ref-for-pending-play-task⑥">挂起的播放任务</a>，确保如下代码在不同实现之间行为一致：</p>
                    <div class="example" id="example-b6f05729">
                        <a class="self-link" href="#example-b6f05729"></a>
                        <pre class="lang-javascript highlight">animation<c- p>.</c->play<c- p>();</c->
animation<c- p>.</c->ready<c- p>.</c->then<c- p>(</c->
  <c- p>()</c-> <c- p>=></c-> <c- p>{</c-> console<c- p>.</c->log<c- p>(</c-><c- t>'Playback commenced'</c-><c- p>);</c-> <c- p>},</c->
  <c- p>()</c-> <c- p>=></c-> <c- p>{</c-> console<c- p>.</c->log<c- p>(</c-><c- t>'Playback was canceled'</c-><c- p>);</c-> <c- p>}</c->
<c- p>);</c->
<c- c1>// 假设某种情况需要取消播放...</c->
animation<c- p>.</c->cancel<c- p>();</c->
<c- c1>// "播放已取消" 将打印到控制台。</c->
</pre>
                    </div>
                    <p>在上述代码中，如果<a data-link-type="dfn" href="#pending-play-task"
                            id="ref-for-pending-play-task⑦">挂起的播放任务</a>是同步运行的，则不会拒绝<a data-link-type="dfn"
                            href="#current-ready-promise" id="ref-for-current-ready-promise⑧">当前准备就绪的 Promise</a>。</p>
                </div>
            <li data-md>
                <p>运行用于<a data-link-type="dfn" href="#update-an-animations-finished-state"
                        id="ref-for-update-an-animations-finished-state⑥">更新动画的完成状态</a>的过程，将<var>did seek</var>标志设置为
                    false，并将<var>synchronously notify</var>标志设置为 false。</p>
        </ol>

        <h4 class="heading settled" data-level="4.4.9" id="pausing-an-animation-section"><span class="secno">4.4.9.
            </span><span class="content">暂停动画</span><a class="self-link" href="#pausing-an-animation-section"></a></h4>
        <p>每当<a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation①④">动画</a>具有<a
                data-link-type="dfn" href="#unresolved" id="ref-for-unresolved④⑥">未解析的</a><a data-link-type="dfn"
                href="#animation-start-time" id="ref-for-animation-start-time②②">开始时间</a>时，其<a data-link-type="dfn"
                href="#animation-current-time" id="ref-for-animation-current-time①⑦">当前时间</a>将被暂停。</p>
        <p>与<a data-link-type="dfn" href="#play-an-animation"
                id="ref-for-play-an-animation">播放动画</a>一样，暂停操作可能不会立即发生（参见<a
                href="#waiting-for-the-associated-effect">§ 4.4.6 等待关联效果</a>）。例如，如果动画由单独的进程执行，可能需要同步<a
                data-link-type="dfn" href="#animation-current-time"
                id="ref-for-animation-current-time①⑧">当前时间</a>，以确保其反映动画进程绘制的状态。</p>
        <p>将动画<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="pause-an-animation">暂停</dfn>，<var>动画</var>，的过程如下：</p>
        <ol>
            <li data-md>
                <p>如果<var>动画</var>有<a data-link-type="dfn" href="#pending-pause-task"
                        id="ref-for-pending-pause-task⑦">待处理的暂停任务</a>，中止这些步骤。</p>
            <li data-md>
                <p>如果<var>动画</var>的<a data-link-type="dfn" href="#animation-play-state"
                        id="ref-for-animation-play-state">播放状态</a>为<a data-link-type="dfn" href="#play-state-paused"
                        id="ref-for-play-state-paused">暂停</a>，中止这些步骤。</p>
            <li data-md>
                <p>让<var>寻找时间</var>成为一个<a data-link-type="dfn" href="#time-value"
                        id="ref-for-time-value②③">时间值</a>，最初为<a data-link-type="dfn" href="#unresolved"
                        id="ref-for-unresolved④⑦">未解析</a>。</p>
            <li data-md>
                <p>如果<var>动画</var>具有关联的<a data-link-type="dfn" href="#timeline" id="ref-for-timeline③⓪">时间轴</a>，且不是<a
                        data-link-type="dfn" href="#monotonically-increasing-timeline"
                        id="ref-for-monotonically-increasing-timeline②">单调递增的时间轴</a>，那么设<var>具有有限时间轴</var>为真。</p>
            <li data-md>
                <p>如果<var>动画</var>的<a data-link-type="dfn" href="#animation-current-time"
                        id="ref-for-animation-current-time①⑨">当前时间</a>是<a data-link-type="dfn" href="#unresolved"
                        id="ref-for-unresolved④⑧">未解析</a>，根据以下第一个匹配条件执行步骤：</p>
                <div class="switch">
                    <dl>
                        <dt data-md>如果<var>动画</var>的<a data-link-type="dfn" href="#playback-rate"
                                id="ref-for-playback-rate①③">播放速度</a>≥ 0，
                        <dd data-md>
                            <p>将<var>寻找时间</var>设置为零。</p>
                        <dt data-md>否则，
                        <dd data-md>
                            <div class="switch">
                                <dl>
                                    <dt data-md>如果<var>动画</var>的<a data-link-type="dfn" href="#associated-effect-end"
                                            id="ref-for-associated-effect-end④">关联效果结束</a>为正无穷，
                                    <dd data-md>
                                        <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw"
                                                id="ref-for-dfn-throw②">抛出</a>“<code
                                                class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidstateerror" id="ref-for-invalidstateerror①">InvalidStateError</a></code>”<code
                                                class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException①">DOMException</a></code>并中止这些步骤。
                                        </p>
                                    <dt data-md>否则，
                                    <dd data-md>
                                        <p>将<var>寻找时间</var>设置为<var>动画</var>的<a data-link-type="dfn"
                                                href="#associated-effect-end"
                                                id="ref-for-associated-effect-end⑤">关联效果结束</a>。</p>
                                </dl>
                            </div>
                    </dl>
                </div>
            <li data-md>
                <p>如果<var>寻找时间</var>是<a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved④⑨">已解析</a>，</p>
                <div class="switch">
                    <dl>
                        <dt data-md>如果<var>具有有限时间轴</var>为真，
                        <dd data-md>
                            <p>将<var>动画</var>的<a data-link-type="dfn" href="#animation-start-time"
                                    id="ref-for-animation-start-time②③">开始时间</a>设置为<var>寻找时间</var>。</p>
                        <dt data-md>否则，
                        <dd data-md>
                            <p>将<var>动画</var>的<a data-link-type="dfn" href="#animation-hold-time"
                                    id="ref-for-animation-hold-time②①">保持时间</a>设置为<var>寻找时间</var>。</p>
                    </dl>
                </div>
            <li data-md>
                <p>设<var>具有待处理的准备承诺</var>为一个布尔标志，初始为假。</p>
            <li data-md>
                <p>如果<var>动画</var>有<a data-link-type="dfn" href="#pending-play-task"
                        id="ref-for-pending-play-task⑧">待处理的播放任务</a>，取消该任务并将<var>具有待处理的准备承诺</var>设为真。</p>
            <li data-md>
                <p>如果<var>具有待处理的准备承诺</var>为假，将<var>动画</var>的<a data-link-type="dfn" href="#current-ready-promise"
                        id="ref-for-current-ready-promise⑨">当前准备承诺</a>设置为<a data-link-type="dfn"
                        href="https://webidl.spec.whatwg.org/#a-new-promise"
                        id="ref-for-a-new-promise①">一个新的承诺</a>，该承诺在<var>动画</var>的<a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm"
                        id="ref-for-concept-relevant-realm②">相关领域</a>中创建。</p>
            <li data-md>
                <p>调度一个任务，在首次满足以下两个条件时执行：</p>
                <ul>
                    <li data-md>
                        <p>用户代理已执行任何必要的处理以暂停<var>动画</var>的<a data-link-type="dfn" href="#animation-associated-effect"
                                id="ref-for-animation-associated-effect⑨">关联效果</a>的播放（如果有）。</p>
                    <li data-md>
                        <p>动画与非<a data-link-type="dfn" href="#inactive-timeline"
                                id="ref-for-inactive-timeline⑧">非活动时间轴</a>关联的<a data-link-type="dfn" href="#timeline"
                                id="ref-for-timeline③①">时间轴</a>相关联。</p>
                </ul>
                <p>任务应执行以下步骤：</p>
                <ol>
                    <li data-md>
                        <p>让<var>准备时间</var>为完成暂停<var>动画</var>的<a data-link-type="dfn"
                                href="#animation-associated-effect"
                                id="ref-for-animation-associated-effect①⓪">关联效果</a>播放时，与<var>动画</var>关联的时间轴的时间值。</p>
                    <li data-md>
                        <p>如果<var>动画</var>的<a data-link-type="dfn" href="#animation-start-time"
                                id="ref-for-animation-start-time②④">开始时间</a>是<a data-link-type="dfn" href="#unresolved"
                                id="ref-for-unresolved⑤⓪">已解析</a>并且其<a data-link-type="dfn" href="#animation-hold-time"
                                id="ref-for-animation-hold-time②②">保持时间</a>未解析，让<var>动画</var>的<span
                                id="ref-for-animation-hold-time②③">保持时间</span>为评估的结果。</p>
                    <li data-md>
                        <p><a data-link-type="dfn" href="#apply-any-pending-playback-rate"
                                id="ref-for-apply-any-pending-playback-rate⑤">应用任何待处理的播放速度</a>在<var>动画</var>上。</p>
                    <li data-md>
                        <p>使<var>动画</var>的<a data-link-type="dfn" href="#animation-start-time"
                                id="ref-for-animation-start-time②⑥">开始时间</a>未解析。</p>
                    <li data-md>
                        <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve"
                                id="ref-for-resolve③">解析</a><var>动画</var>的<a data-link-type="dfn"
                                href="#current-ready-promise"
                                id="ref-for-current-ready-promise①⓪">当前准备承诺</a>，并将其与<var>动画</var>一同解决。</p>
                    <li data-md>
                        <p>运行程序<a data-link-type="dfn" href="#update-an-animations-finished-state"
                                id="ref-for-update-an-animations-finished-state⑦">更新动画的完成状态</a>，<var>did
                                seek</var>标志设置为假，<var>synchronously notify</var>标志设置为假。</p>
                </ol>
                <p>只要上述任务已调度但尚未运行，<var>动画</var>即被描述为有一个<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                        id="pending-pause-task">待处理的暂停任务</dfn>。然而，在任务运行时，<var>动画</var>不会有<a data-link-type="dfn"
                        href="#pending-pause-task" id="ref-for-pending-pause-task⑧">待处理的暂停任务</a>。</p>
                <p>与<a data-link-type="dfn" href="#pending-play-task"
                        id="ref-for-pending-play-task①⓪">待处理的播放任务</a>一样，用户代理必须异步运行<a data-link-type="dfn"
                        href="#pending-pause-task" id="ref-for-pending-pause-task⑨">待处理的暂停任务</a>，尽管这可能是在下一个<a
                        data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#perform-a-microtask-checkpoint"
                        id="ref-for-perform-a-microtask-checkpoint②">微任务检查点</a>。</p>
            <li data-md>
                <p>运行程序<a data-link-type="dfn" href="#update-an-animations-finished-state"
                        id="ref-for-update-an-animations-finished-state⑧">更新动画的完成状态</a>，<var>did
                        seek</var>标志设置为假，<var>synchronously notify</var>标志设置为假。</p>
        </ol>

        <h4 class="heading settled" data-level="4.4.10" id="reaching-the-end"><span class="secno">4.4.10. </span><span
                class="content">到达结束</span><a class="self-link" href="#reaching-the-end"></a></h4>
        <div class="informative-bg">
            <p><em>本节是非规范性的</em></p>
            <p>DVD播放器或磁带播放器通常会继续播放，直到它们到达媒体的末尾，此时它们停止播放。如果这些播放器能够反向播放，它们通常会在到达媒体的开头时停止播放。为了模拟这种行为并与HTML的<a
                    data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/embedded-content.html#media-element"
                    id="ref-for-media-element">媒体元素</a> <a data-link-type="biblio"
                    href="#biblio-html">[HTML]</a>保持一致，Web Animations的动画不会在<a data-link-type="dfn"
                    href="#animation-associated-effect" id="ref-for-animation-associated-effect①①">关联效果</a>的<a
                    data-link-type="dfn" href="#end-time" id="ref-for-end-time">结束时间</a>之后继续向前播放，或在时间为零时向后播放。</p>
            <p>达到其播放范围的自然边界的动画被称为已<em>完成</em>。</p>
            <p>限制当前时间的效果如下图所示。</p>
            <figure>
                <img alt="限制动画当前时间的效果。" src="https://www.w3.org/TR/web-animations-1/images/limiting.svg" width="500">
                <figcaption> 限制<a data-link-type="dfn" href="#animation-current-time"
                        id="ref-for-animation-current-time②①">动画当前时间</a>的效果，动画的开始时间为1秒，<a data-link-type="dfn"
                        href="#animation-associated-effect"
                        id="ref-for-animation-associated-effect①②">关联效果</a>长度为3秒，并且具有正的<a data-link-type="dfn"
                        href="#playback-rate" id="ref-for-playback-rate①⑤">播放速度</a>。在动画的当前时间到达关联效果的末尾后，它被限制在3秒。
                </figcaption>
            </figure>
            <p>然而，可以将<a data-link-type="dfn" href="#animation-current-time"
                    id="ref-for-animation-current-time②②">动画当前时间</a>“<em>寻找到</em>”超出<a data-link-type="dfn"
                    href="#animation-associated-effect"
                    id="ref-for-animation-associated-effect①③">关联效果</a>结束后的时间。在这样做时，当前时间将不会继续推进，但动画将表现得像是已在寻找到的时间暂停。</p>
            <p>这使得，例如，可以将没有<a data-link-type="dfn" href="#animation-associated-effect"
                    id="ref-for-animation-associated-effect①④">关联效果</a>的动画的<a data-link-type="dfn"
                    href="#animation-current-time" id="ref-for-animation-current-time②③">当前时间</a>寻找到5秒。如果稍后将一个具有晚于5秒的<a
                    data-link-type="dfn" href="#end-time" id="ref-for-end-time①">结束时间</a>的<a data-link-type="dfn"
                    href="#animation-associated-effect"
                    id="ref-for-animation-associated-effect①⑤">关联效果</a>与动画相关联，则播放将从5秒标记处开始。</p>
            <p>当动画的<a data-link-type="dfn" href="#animation-associated-effect"
                    id="ref-for-animation-associated-effect①⑥">关联效果</a>长度发生变化时，可能会出现类似的行为。</p>
            <p>同样，当<a data-link-type="dfn" href="#playback-rate" id="ref-for-playback-rate①⑥">播放速度</a>为负时，<a
                    data-link-type="dfn" href="#animation-current-time"
                    id="ref-for-animation-current-time②④">当前时间</a>不会超过零时。</p>
        </div>
        <h4 class="heading settled" data-level="4.4.11" id="the-current-finished-promise"><span class="secno">4.4.11.
            </span><span class="content">当前的已完成 Promise</span><a class="self-link"
                href="#the-current-finished-promise"></a></h4>
        <p>每个动画都有一个<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="current-finished-promise">当前的已完成
                Promise</dfn>。
            这个<a data-link-type="dfn" href="#current-finished-promise" id="ref-for-current-finished-promise①">当前的已完成
                Promise</a>最初是一个待定的<a data-link-type="dfn"
                href="http://www.ecma-international.org/ecma-262/6.0/#sec-promise-objects"
                id="ref-for-sec-promise-objects③">Promise</a>对象。</p>
        <p>每次动画离开<a data-link-type="dfn" href="#play-state-finished"
                id="ref-for-play-state-finished②">已完成播放状态</a>时，该对象将被替换为一个新的<a data-link-type="dfn"
                href="http://www.ecma-international.org/ecma-262/6.0/#sec-promise-objects"
                id="ref-for-sec-promise-objects④">Promise</a>。</p>
        <h4 class="heading settled" data-level="4.4.12" id="updating-the-finished-state"><span class="secno">4.4.12.
            </span><span class="content">更新已完成状态</span><a class="self-link" href="#updating-the-finished-state"></a>
        </h4>
        <p>对于具有正<a data-link-type="dfn" href="#playback-rate" id="ref-for-playback-rate①⑦">播放速率</a>的动画，<a
                data-link-type="dfn" href="#animation-current-time"
                id="ref-for-animation-current-time②⑤">当前时间</a>会不断增加，直到到达<a data-link-type="dfn"
                href="#associated-effect-end" id="ref-for-associated-effect-end⑥">关联效果的结束时间</a>。</p>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="associated-effect-end">关联效果的结束时间</dfn>等于动画的<a
                data-link-type="dfn" href="#end-time" id="ref-for-end-time②">结束时间</a>。如果动画没有<a data-link-type="dfn"
                href="#animation-associated-effect" id="ref-for-animation-associated-effect①⑦">关联效果</a>，则关联效果的结束时间为零。
        </p>
        <p>对于具有负<a data-link-type="dfn" href="#playback-rate" id="ref-for-playback-rate①⑧">播放速率</a>的动画，<a
                data-link-type="dfn" href="#animation-current-time"
                id="ref-for-animation-current-time②⑥">当前时间</a>会不断减少，直到到达零。</p>
        <p>一个正在运行的动画，当达到这个边界（或超越它）并且其<a data-link-type="dfn" href="#animation-start-time"
                id="ref-for-animation-start-time②⑦">开始时间</a>已解析时，即被称为<a data-link-type="dfn" href="#play-state-finished"
                id="ref-for-play-state-finished③">已完成</a>。</p>
        <p>在每次修改动画对象时，都会通过以下定义的<a data-link-type="dfn" href="#update-an-animations-finished-state"
                id="ref-for-update-an-animations-finished-state⑨">更新动画的已完成状态</a>过程检查是否越过了这个边界。这个过程还会作为<a
                data-link-type="dfn" href="#update-animations-and-send-events"
                id="ref-for-update-animations-and-send-events②">更新动画并发送事件</a>过程的一部分运行。在这两种情况下，<var>did
                seek</var>标志被设置为false。</p>
        <p>对于每个动画，用户代理维护一个<dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="previous current time" data-noexport
                id="previous-current-time">先前的当前时间</dfn> <a data-link-type="dfn" href="#time-value"
                id="ref-for-time-value②④">时间值</a>，该值最初为<a data-link-type="dfn" href="#unresolved"
                id="ref-for-unresolved⑤②">未解析的</a>。</p>
        <p>在正常播放期间，<a data-link-type="dfn" href="#animation-current-time"
                id="ref-for-animation-current-time②⑦">动画的当前时间</a>被限制在上述边界内，然而，仍可以使用<a data-link-type="dfn"
                href="#animation-set-the-current-time"
                id="ref-for-animation-set-the-current-time">设置动画当前时间</a>的过程将动画的当前时间设置为超出这些边界的时间。</p>
        <p>用于<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="update-an-animations-finished-state">更新动画的已完成状态</dfn>的过程如下，参数包括<var>did seek</var>标志（指示是否在<a
                data-link-type="dfn" href="#animation-set-the-current-time"
                id="ref-for-animation-set-the-current-time①">设置当前时间</a>后进行的更新），以及<var>synchronously
                notify</var>标志（指示更新是否在我们期望立即完成事件队列和完成Promise解析的上下文中调用）。</p>
        <ol>
            <li data-md>
                <p>计算<var>unconstrained current time</var>，即当前时间，若<var>did seek</var>为false，则使用<a data-link-type="dfn"
                        href="#animation-hold-time" id="ref-for-animation-hold-time②⑥">保持时间</a>代替<a data-link-type="dfn"
                        href="#unresolved" id="ref-for-unresolved⑤③">未解析的</a>时间值。如果<var>did
                        seek</var>为true，则<var>unconstrained current time</var>等于<var>current time</var>。</p>
                <p class="note" role="note"><span>注意：</span>此定义是为了适应可能改变方向的时间轴。如果没有这个定义，即使时间轴在相反方向上进展，一旦完成的动画也将保持完成状态。
                </p>
            <li data-md>
                <p>如果下列三个条件<em>全部</em>为真：</p>
                <ul>
                    <li data-md>
                        <p><var>unconstrained current time</var>是<a data-link-type="dfn" href="#unresolved"
                                id="ref-for-unresolved⑤④">已解析的</a>，<em>并且</em></p>
                    <li data-md>
                        <p><var>animation</var>的<a data-link-type="dfn" href="#animation-start-time"
                                id="ref-for-animation-start-time②⑧">开始时间</a>是<a data-link-type="dfn" href="#unresolved"
                                id="ref-for-unresolved⑤⑤">已解析的</a>，<em>并且</em></p>
                    <li data-md>
                        <p><var>animation</var>没有<a data-link-type="dfn" href="#pending-play-task"
                                id="ref-for-pending-play-task①①">待处理播放任务</a>或<a data-link-type="dfn"
                                href="#pending-pause-task" id="ref-for-pending-pause-task①⓪">待处理暂停任务</a>，</p>
                </ul>
                <p>则根据下列条件更新<var>animation</var>的<a data-link-type="dfn" href="#animation-hold-time"
                        id="ref-for-animation-hold-time②⑦">保持时间</a>：</p>
                <div class="switch">
                    <dl>
                        <dt data-md>如果<a data-link-type="dfn" href="#playback-rate"
                                id="ref-for-playback-rate①⑨">播放速率</a> > 0 并且<var>unconstrained current time</var>大于或等于<a
                                data-link-type="dfn" href="#associated-effect-end"
                                id="ref-for-associated-effect-end⑧">关联效果结束时间</a>，
                        <dd data-md>
                            <p>如果<var>did seek</var>为true，则<var>保持时间</var>为<var>unconstrained current time</var>的值。</p>
                            <p>如果<var>did seek</var>为false，则<var>保持时间</var>为<var>previous current
                                    time</var>和<var>associated effect end</var>的最大值。如果<var>previous current
                                    time</var>是<a data-link-type="dfn" href="#unresolved"
                                    id="ref-for-unresolved⑤⑥">未解析的</a>，则<var>保持时间</var>为<var>associated effect
                                    end</var>。</p>
                        <dt data-md>如果<a data-link-type="dfn" href="#playback-rate"
                                id="ref-for-playback-rate②⓪">播放速率</a> &lt; 0 并且<var>unconstrained current
                                time</var>小于或等于0，
                        <dd data-md>
                            <p>如果<var>did seek</var>为true，则<var>保持时间</var>为<var>unconstrained current time</var>的值。</p>
                            <p>如果<var>did seek</var>为false，则<var>保持时间</var>为<var>previous current
                                    time</var>和零的最小值。如果<var>previous current time</var>是<a data-link-type="dfn"
                                    href="#unresolved" id="ref-for-unresolved⑤⑦">未解析的</a>，则<var>保持时间</var>为零。</p>
                        <dt data-md>如果<a data-link-type="dfn" href="#playback-rate"
                                id="ref-for-playback-rate②①">播放速率</a> ≠ 0 并且<var>animation</var>与<a data-link-type="dfn"
                                href="#inactive-timeline" id="ref-for-inactive-timeline⑨">活动时间轴</a>关联，
                        <dd data-md>
                            <p>执行以下步骤：</p>
                            <ol>
                                <li data-md>
                                    <p>如果<var>did seek</var>为true并且<var>保持时间</var>是<a data-link-type="dfn"
                                            href="#unresolved"
                                            id="ref-for-unresolved⑤⑧">已解析的</a>，则让<var>animation</var>的<a
                                            data-link-type="dfn" href="#animation-start-time"
                                            id="ref-for-animation-start-time②⑨">开始时间</a>等于以下表达式的结果：</p>
                                    <code><var>timeline time</var> - (<var>保持时间</var> / <a data-link-type="dfn" href="#playback-rate" id="ref-for-playback-rate②②">播放速率</a>)</code>
                                    <p>其中<var>timeline time</var>是<var>animation</var>关联的<a data-link-type="dfn"
                                            href="#timeline" id="ref-for-timeline③②">时间轴</a>的当前<a data-link-type="dfn"
                                            href="#time-value" id="ref-for-time-value②⑤">时间值</a>。</p>
                                <li data-md>
                                    <p>让<var>保持时间</var>为<a data-link-type="dfn" href="#unresolved"
                                            id="ref-for-unresolved⑤⑨">未解析的</a>。</p>
                            </ol>
                    </dl>
                </div>
            <li data-md>
                <p>将<var>animation</var>的<var>previous current time</var>设置为计算出的<a data-link-type="dfn"
                        href="#animation-current-time" id="ref-for-animation-current-time③⓪">当前时间</a>。</p>
            <li data-md>
                <p>如果<var>current finished state</var>为true并且<a data-link-type="dfn" href="#current-finished-promise"
                        id="ref-for-current-finished-promise②">当前完成的promise</a>尚未解决，则执行以下步骤：</p>
                <ol>
                    <li data-md>
                        <p>让<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                                id="finish-notification-steps">完成通知步骤</dfn>指代以下过程：</p>
                        <ol>
                            <li data-md>
                                <p>如果<var>animation</var>的<a data-link-type="dfn" href="#animation-play-state"
                                        id="ref-for-animation-play-state②">播放状态</a>不等于<a data-link-type="dfn"
                                        href="#play-state-finished" id="ref-for-play-state-finished⑤">完成</a>，则中止这些步骤。
                                </p>
                            <li data-md>
                                <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve"
                                        id="ref-for-resolve④">解析</a><var>animation</var>的<a data-link-type="dfn"
                                        href="#current-finished-promise"
                                        id="ref-for-current-finished-promise③">当前已完成的promise</a>对象，并传递<var>animation</var>。
                                </p>
                            <li data-md>
                                <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-create"
                                        id="ref-for-concept-event-create">创建</a>一个<code
                                        class="idl"><a data-link-type="idl" href="#animationplaybackevent" id="ref-for-animationplaybackevent">AnimationPlaybackEvent</a></code>，即<var>finishEvent</var>。
                                </p>
                            <li data-md>
                                <p>将<var>finishEvent</var>的<code
                                        class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-type" id="ref-for-dom-event-type">type</a></code>属性设置为<a
                                        data-link-type="dfn" href="#finish-event" id="ref-for-finish-event">完成</a>。</p>
                            <li data-md>
                                <p>将<var>finishEvent</var>的<code
                                        class="idl"><a data-link-type="idl" href="#dom-animationplaybackevent-currenttime" id="ref-for-dom-animationplaybackevent-currenttime">currentTime</a></code>属性设置为<var>animation</var>的<a
                                        data-link-type="dfn" href="#animation-current-time"
                                        id="ref-for-animation-current-time③①">当前时间</a>。</p>
                            <li data-md>
                                <p>将<var>finishEvent</var>的<code
                                        class="idl"><a data-link-type="idl" href="#dom-animationplaybackevent-timelinetime" id="ref-for-dom-animationplaybackevent-timelinetime">timelineTime</a></code>属性设置为与<var>animation</var>关联的<a
                                        data-link-type="dfn" href="#timeline"
                                        id="ref-for-timeline③③">时间轴</a>的当前时间。如果<var>animation</var>未与时间轴关联，或时间轴为<a
                                        data-link-type="dfn" href="#inactive-timeline"
                                        id="ref-for-inactive-timeline①⓪">非活动</a>状态，则将<code
                                        class="esvalue"><a data-link-type="idl" href="#dom-animationplaybackevent-timelinetime" id="ref-for-dom-animationplaybackevent-timelinetime①">timelineTime</a></code>设置为<code
                                        class="esvalue">null</code>。</p>
                            <li data-md>
                                <p>如果<var>animation</var>具有<a data-link-type="dfn" href="#animation-document-for-timing"
                                        id="ref-for-animation-document-for-timing①">时间文档</a>，则将<var>finishEvent</var>及其目标<var>animation</var>附加到其<a
                                        data-link-type="dfn" href="#pending-animation-event-queue"
                                        id="ref-for-pending-animation-event-queue②">待处理动画事件队列</a>中。对于<a
                                        data-link-type="dfn" href="#scheduled-event-time"
                                        id="ref-for-scheduled-event-time②">预定事件时间</a>，使用将<var>animation</var>的<a
                                        data-link-type="dfn" href="#associated-effect-end"
                                        id="ref-for-associated-effect-end①①">关联效果结束时间</a>转换为与原点相关的时间的结果。</p>
                                <p>否则，<a data-link-type="dfn"
                                        href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task"
                                        id="ref-for-queue-a-task">排队一个任务</a>，以<a data-link-type="dfn"
                                        href="https://dom.spec.whatwg.org/#concept-event-dispatch"
                                        id="ref-for-concept-event-dispatch①">分发</a>在<var>animation</var>上的<var>finishEvent</var>。该任务的任务源是<a
                                        data-link-type="dfn"
                                        href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source"
                                        id="ref-for-dom-manipulation-task-source">DOM操作任务源</a>。</p>
                        </ol>
                    <li data-md>
                        <p>如果<var>synchronously notify</var>为true，则取消任何已排队的微任务来运行<var>animation</var>的<a
                                data-link-type="dfn" href="#finish-notification-steps"
                                id="ref-for-finish-notification-steps">完成通知步骤</a>，并立即执行<var>finish notification
                                steps</var>。</p>
                        <p>否则，如果<var>synchronously notify</var>为false，则<a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-microtask"
                                id="ref-for-queue-a-microtask">排队一个微任务</a>来运行<var>animation</var>的<a
                                data-link-type="dfn" href="#finish-notification-steps"
                                id="ref-for-finish-notification-steps②">完成通知步骤</a>，除非已为<var>animation</var>排队了一个微任务来运行这些步骤。
                        </p>
                </ol>
            <li data-md>
                <p>如果<var>current finished state</var>为false并且<var>animation</var>的<a data-link-type="dfn"
                        href="#current-finished-promise"
                        id="ref-for-current-finished-promise④">当前已完成的promise</a>已解析，则将<var>animation</var>的<var>current
                        finished promise</var>设置为<a data-link-type="dfn"
                        href="https://webidl.spec.whatwg.org/#a-new-promise" id="ref-for-a-new-promise②">相关 Realm 中的新
                        Promise</a>。</p>
        </ol>
        <div class="informative-bg">
            <p>通常情况下，有关动画已完成状态的通知是异步执行的。这使得动画能够暂时进入<a data-link-type="dfn" href="#play-state-finished"
                    id="ref-for-play-state-finished⑥">已完成状态</a>而不会触发事件或解析Promise。</p>
            <p>例如，在下面的代码片段中，<code>animation</code>会暂时进入已完成状态。如果完成状态的通知是同步进行的，则这段代码将导致<a data-link-type="dfn"
                    href="#finish-event" id="ref-for-finish-event①">完成事件</a>被排队，并且<a data-link-type="dfn"
                    href="#current-finished-promise"
                    id="ref-for-current-finished-promise⑥">当前已完成的Promise</a>会被解析。然而，如果我们反转两个语句的顺序，使<code>iterations</code>首先更新，这种情况就不会发生。为了避免这种令人惊讶的行为，动画完成状态的通知通常是异步执行的。
            </p>
            <div class="example" id="example-63369f6e">
                <a class="self-link" href="#example-63369f6e"></a>
                <pre class="lang-javascript highlight"><c- a>var</c-> animation <c- o>=</c-> elem<c- p>.</c->animate<c- p>({</c-> left<c- o>:</c-> <c- t>'100px'</c-> <c- p>},</c-> <c- mf>2000</c-><c- p>);</c->
animation<c- p>.</c->playbackRate <c- o>=</c-> <c- mf>2</c-><c- p>;</c->
animation<c- p>.</c->currentTime <c- o>=</c-> <c- mf>1000</c-><c- p>;</c-> <c- c1>// animation is now finished</c->
animation<c- p>.</c->effect<c- p>.</c->updateTiming<c- p>({</c-> iterations<c- o>:</c-> <c- mf>2</c-> <c- p>});</c-> <c- c1>// animation is no longer finished</c->
</pre>
            </div>
            <p>通知有关动画已完成状态的唯一例外情况是执行<a data-link-type="dfn" href="#finish-an-animation"
                    id="ref-for-finish-an-animation">完成动画</a>的过程（通常是通过调用<code
                    class="idl"><a data-link-type="idl" href="#dom-animation-finish" id="ref-for-dom-animation-finish">finish()</a></code>方法）。在这种情况下，作者的完成动画的意图是明确的，因此有关动画已完成状态的通知是同步进行的，如下所示。
            </p>
            <div class="example" id="example-3a2cd29f">
                <a class="self-link" href="#example-3a2cd29f"></a>
                <pre class="lang-javascript highlight"><c- a>var</c-> animation <c- o>=</c-> elem<c- p>.</c->animate<c- p>({</c-> left<c- o>:</c-> <c- t>'100px'</c-> <c- p>},</c-> <c- mf>1000</c-><c- p>);</c->
animation<c- p>.</c->finish<c- p>();</c-> <c- c1>// finish event is queued immediately and finished promise</c->
                    <c- c1>// is resolved despite the fact that the following statement</c->
                    <c- c1>// causes the animation to leave the finished state</c->
animation<c- p>.</c->currentTime <c- o>=</c-> <c- mf>0</c-><c- p>;</c->
</pre>
            </div>
            <p>请注意，与<a data-link-type="dfn" href="#finish-an-animation"
                    id="ref-for-finish-an-animation①">完成动画</a>的过程类似，<a data-link-type="dfn" href="#cancel-an-animation"
                    id="ref-for-cancel-an-animation">取消动画</a>的过程也会同步地将<a data-link-type="dfn" href="#cancel-event"
                    id="ref-for-cancel-event">取消事件</a>排队并拒绝<a data-link-type="dfn" href="#current-finished-promise"
                    id="ref-for-current-finished-promise⑦">当前已完成的Promise</a>和<a data-link-type="dfn"
                    href="#current-ready-promise" id="ref-for-current-ready-promise①①">当前准备好的Promise</a>。
            </p>
        </div>

        <h4 class="heading settled" data-level="4.4.13" id="finishing-an-animation-section"><span class="secno">4.4.13.
            </span><span class="content">完成动画</span><a class="self-link" href="#finishing-an-animation-section"></a>
        </h4>
        <p>可以使用下面定义的<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="finish-an-animation">完成动画</dfn>过程，将<var>animation</var>推进到其当前播放方向的自然结束点：</p>
        <ol>
            <li data-md>
                <p>如果<var>animation</var>的<a data-link-type="dfn" href="#effective-playback-rate"
                        id="ref-for-effective-playback-rate②">有效播放速率</a>为零，或者<var>animation</var>的<span
                        id="ref-for-effective-playback-rate③">有效播放速率</span> > 0 并且<a data-link-type="dfn"
                        href="#associated-effect-end" id="ref-for-associated-effect-end①②">关联效果结束时间</a>为无限大，<a
                        data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw"
                        id="ref-for-dfn-throw③">抛出</a>一个 "<code
                        class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidstateerror" id="ref-for-invalidstateerror②">InvalidStateError</a></code>"
                    <code
                        class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException②">DOMException</a></code>并中止这些步骤。
                </p>
            <li data-md>
                <p><a data-link-type="dfn" href="#apply-any-pending-playback-rate"
                        id="ref-for-apply-any-pending-playback-rate⑥">应用任何待处理的播放速率</a>到<var>animation</var>。</p>
            <li data-md>
                <p>设置<var>limit</var>如下：</p>
                <div class="switch">
                    <dl>
                        <dt data-md>如果<a data-link-type="dfn" href="#playback-rate"
                                id="ref-for-playback-rate②③">播放速率</a> > 0，
                        <dd data-md>
                            <p>让<var>limit</var>为<a data-link-type="dfn" href="#associated-effect-end"
                                    id="ref-for-associated-effect-end①③">关联效果结束时间</a>。</p>
                        <dt data-md>否则，
                        <dd data-md>
                            <p>让<var>limit</var>为零。</p>
                    </dl>
                </div>
            <li data-md>
                <p><a data-link-type="dfn" href="#animation-silently-set-the-current-time"
                        id="ref-for-animation-silently-set-the-current-time①">静默设置当前时间</a>为<var>limit</var>。</p>
            <li data-md>
                <p>如果<var>animation</var>的<a data-link-type="dfn" href="#animation-start-time"
                        id="ref-for-animation-start-time③⓪">开始时间</a>是<a data-link-type="dfn" href="#unresolved"
                        id="ref-for-unresolved⑥⓪">未解析的</a>，并且<var>animation</var>有一个关联的<a data-link-type="dfn"
                        href="#inactive-timeline" id="ref-for-inactive-timeline①①">活动</a>的<a data-link-type="dfn"
                        href="#timeline" id="ref-for-timeline③④">时间轴</a>，则将<var>start time</var>设置为以下表达式的结果：
                    <code><var>timeline time</var> - (<var>limit</var> / <a data-link-type="dfn" href="#playback-rate" id="ref-for-playback-rate②④">播放速率</a>)</code>，其中<var>timeline
                        time</var>是关联的<a data-link-type="dfn" href="#time-value" id="ref-for-time-value②⑥">时间值</a>。
                </p>
            <li data-md>
                <p>如果存在<a data-link-type="dfn" href="#pending-pause-task"
                        id="ref-for-pending-pause-task①①">待处理的暂停任务</a>，并且<a data-link-type="dfn"
                        href="#animation-start-time" id="ref-for-animation-start-time③②">开始时间</a>是<a
                        data-link-type="dfn" href="#unresolved" id="ref-for-unresolved⑥①">已解析的</a>，则：</p>
                <ol>
                    <li data-md>
                        <p>将<a data-link-type="dfn" href="#animation-hold-time"
                                id="ref-for-animation-hold-time③⑦">保持时间</a>设为<a data-link-type="dfn" href="#unresolved"
                                id="ref-for-unresolved⑥②">未解析的</a>。</p>
                        <div class="note" role="note">通常，<a data-link-type="dfn" href="#animation-hold-time"
                                id="ref-for-animation-hold-time③⑧">保持时间</a>将已未解析，除非动画先前处于<a data-link-type="dfn"
                                href="#play-state-idle" id="ref-for-play-state-idle">空闲</a>状态。</div>
                    <li data-md>
                        <p>取消<a data-link-type="dfn" href="#pending-pause-task"
                                id="ref-for-pending-pause-task①②">待处理的暂停任务</a>。</p>
                    <li data-md>
                        <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve"
                                id="ref-for-resolve⑤">解析</a><var>animation</var>的<a data-link-type="dfn"
                                href="#current-ready-promise"
                                id="ref-for-current-ready-promise①②">当前就绪承诺</a>并将<var>animation</var>作为其值。</p>
                </ol>
            <li data-md>
                <p>如果存在<a data-link-type="dfn" href="#pending-play-task"
                        id="ref-for-pending-play-task①②">待处理的播放任务</a>，并且<a data-link-type="dfn"
                        href="#animation-start-time" id="ref-for-animation-start-time③③">开始时间</a>是<a
                        data-link-type="dfn" href="#unresolved" id="ref-for-unresolved⑥③">已解析的</a>，则取消该任务并<a
                        data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve"
                        id="ref-for-resolve⑥">解析</a><var>animation</var>的<a data-link-type="dfn"
                        href="#current-ready-promise"
                        id="ref-for-current-ready-promise①③">当前就绪承诺</a>并将<var>animation</var>作为其值。</p>
            <li data-md>
                <p>执行<a data-link-type="dfn" href="#update-an-animations-finished-state"
                        id="ref-for-update-an-animations-finished-state①⓪">更新动画完成状态</a>的过程，针对<var>animation</var>并将<var>did
                        seek</var>标志设置为true，将<var>synchronously notify</var>标志设置为true。</p>
        </ol>

        <h4 class="heading settled" data-level="4.4.14" id="canceling-an-animation-section"><span class="secno">4.4.14.
            </span><span class="content">取消动画</span><a class="self-link" href="#canceling-an-animation-section"></a>
        </h4>
        <p>可以取消动画，这将导致<a data-link-type="dfn" href="#animation-current-time"
                id="ref-for-animation-current-time③②">当前时间</a>变为<a data-link-type="dfn" href="#unresolved"
                id="ref-for-unresolved⑥④">未解析的</a>，从而移除由<a data-link-type="dfn" href="#animation-associated-effect"
                id="ref-for-animation-associated-effect①⑨">关联效果</a>引起的任何效果。</p>
        <p>取消<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="cancel-an-animation">动画</dfn>的过程如下：</p>
        <ol>
            <li data-md>
                <p>如果<var>animation</var>的<a data-link-type="dfn" href="#animation-play-state"
                        id="ref-for-animation-play-state③">播放状态</a>不是<a data-link-type="dfn" href="#play-state-idle"
                        id="ref-for-play-state-idle①">空闲</a>，执行以下步骤：</p>
                <ol>
                    <li data-md>
                        <p>运行<a data-link-type="dfn" href="#animation-reset-an-animations-pending-tasks"
                                id="ref-for-animation-reset-an-animations-pending-tasks">重置动画的待处理任务</a>的过程，针对<var>animation</var>。
                        </p>
                    <li data-md>
                        <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject"
                                id="ref-for-reject">拒绝</a><var>animation</var>的<a data-link-type="dfn"
                                href="#current-finished-promise"
                                id="ref-for-current-finished-promise⑧">当前完成承诺</a>并附上名为"AbortError"的DOMException。</p>
                    <li data-md>
                        <p>将<a data-link-type="dfn" href="#current-finished-promise"
                                id="ref-for-current-finished-promise⑨">当前完成承诺</a>的[[PromiseIsHandled]]内部槽设置为true。</p>
                    <li data-md>
                        <p>让<a data-link-type="dfn" href="#current-finished-promise"
                                id="ref-for-current-finished-promise①⓪">当前完成承诺</a>成为<a data-link-type="dfn"
                                href="https://webidl.spec.whatwg.org/#a-new-promise"
                                id="ref-for-a-new-promise③">新承诺</a>，在<var>animation</var>的<a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm"
                                id="ref-for-concept-relevant-realm④">相关领域</a>中。</p>
                    <li data-md>
                        <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-create"
                                id="ref-for-concept-event-create①">创建</a>一个<code
                                class="idl"><a data-link-type="idl" href="#animationplaybackevent" id="ref-for-animationplaybackevent①">AnimationPlaybackEvent</a></code>，命名为<var>cancelEvent</var>。
                        </p>
                    <li data-md>
                        <p>将<var>cancelEvent</var>的<code
                                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-type" id="ref-for-dom-event-type①">type</a></code>属性设置为<a
                                data-link-type="dfn" href="#cancel-event" id="ref-for-cancel-event①">cancel</a>。</p>
                    <li data-md>
                        <p>将<var>cancelEvent</var>的<code
                                class="idl"><a data-link-type="idl" href="#dom-animationplaybackevent-currenttime" id="ref-for-dom-animationplaybackevent-currenttime①">currentTime</a></code>设置为<code
                                class="esvalue">null</code>。</p>
                    <li data-md>
                        <p>让<var>timeline time</var>为与<var>animation</var>关联的<a data-link-type="dfn"
                                href="#timeline-current-time"
                                id="ref-for-timeline-current-time⑥">时间轴的当前时间</a>。如果<var>animation</var>未关联到一个<a
                                data-link-type="dfn" href="#inactive-timeline"
                                id="ref-for-inactive-timeline①②">活动时间轴</a>，则让<var>timeline time</var>为<a
                                data-link-type="dfn" href="#unresolved" id="ref-for-unresolved⑥⑤">未解析</a>的<a
                                data-link-type="dfn" href="#time-value" id="ref-for-time-value②⑦">时间值</a>。</p>
                    <li data-md>
                        <p>将<var>cancelEvent</var>的<code
                                class="idl"><a data-link-type="idl" href="#dom-animationplaybackevent-timelinetime" id="ref-for-dom-animationplaybackevent-timelinetime②">timelineTime</a></code>设置为<var>timeline
                                time</var>。如果<var>timeline time</var>是<a data-link-type="dfn" href="#unresolved"
                                id="ref-for-unresolved⑥⑥">未解析的</a>，则将其设置为<code class="esvalue">null</code>。</p>
                    <li data-md>
                        <p>如果<var>animation</var>有一个<a data-link-type="dfn" href="#animation-document-for-timing"
                                id="ref-for-animation-document-for-timing③">时间控制文档</a>，则将<var>cancelEvent</var>及其目标<var>animation</var>追加到该文档的<a
                                data-link-type="dfn" href="#pending-animation-event-queue"
                                id="ref-for-pending-animation-event-queue③">待处理动画事件队列</a>中。如果<var>animation</var>与定义了将时间轴时间转换为原点相对时间的过程的<a
                                data-link-type="dfn" href="#inactive-timeline"
                                id="ref-for-inactive-timeline①③">活动时间轴</a>关联，则<a data-link-type="dfn"
                                href="#scheduled-event-time"
                                id="ref-for-scheduled-event-time③">计划事件时间</a>为应用该过程后得到的结果。否则，<span
                                id="ref-for-scheduled-event-time④">计划事件时间</span>是一个<a data-link-type="dfn"
                                href="#unresolved" id="ref-for-unresolved⑥⑦">未解析的</a><a data-link-type="dfn"
                                href="#time-value" id="ref-for-time-value②⑧">时间值</a>。</p>
                        <p>否则，<a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task"
                                id="ref-for-queue-a-task①">排队一个任务</a>，以<a data-link-type="dfn"
                                href="https://dom.spec.whatwg.org/#concept-event-dispatch"
                                id="ref-for-concept-event-dispatch②">分派</a>在<var>animation</var>上的<var>cancelEvent</var>。此任务的任务源是<a
                                data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source"
                                id="ref-for-dom-manipulation-task-source①">DOM操作任务源</a>。</p>
                </ol>
            <li data-md>
                <p>将<var>animation</var>的<a data-link-type="dfn" href="#animation-hold-time"
                        id="ref-for-animation-hold-time③⑨">保持时间</a>设置为<a data-link-type="dfn" href="#unresolved"
                        id="ref-for-unresolved⑥⑧">未解析的</a>。</p>
            <li data-md>
                <p>将<var>animation</var>的<a data-link-type="dfn" href="#animation-start-time"
                        id="ref-for-animation-start-time③④">开始时间</a>设置为<a data-link-type="dfn" href="#unresolved"
                        id="ref-for-unresolved⑥⑨">未解析的</a>。</p>
        </ol>
        <p>重置<dfn class="dfn-paneled" data-dfn-for="animation" data-dfn-type="dfn" data-export
                id="animation-reset-an-animations-pending-tasks">动画的待处理任务</dfn>的过程如下：</p>
        <ol>
            <li data-md>
                <p>如果<var>animation</var>没有<a data-link-type="dfn" href="#pending-play-task"
                        id="ref-for-pending-play-task①③">待处理的播放任务</a>或<a data-link-type="dfn" href="#pending-pause-task"
                        id="ref-for-pending-pause-task①③">待处理的暂停任务</a>，则中止此过程。</p>
            <li data-md>
                <p>如果<var>animation</var>有<a data-link-type="dfn" href="#pending-play-task"
                        id="ref-for-pending-play-task①④">待处理的播放任务</a>，取消该任务。</p>
            <li data-md>
                <p>如果<var>animation</var>有<a data-link-type="dfn" href="#pending-pause-task"
                        id="ref-for-pending-pause-task①④">待处理的暂停任务</a>，取消该任务。</p>
            <li data-md>
                <p><a data-link-type="dfn" href="#apply-any-pending-playback-rate"
                        id="ref-for-apply-any-pending-playback-rate⑦">应用任何待处理的播放速率</a>到<var>animation</var>。</p>
            <li data-md>
                <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject"
                        id="ref-for-reject①">拒绝</a><var>animation</var>的<a data-link-type="dfn"
                        href="#current-ready-promise"
                        id="ref-for-current-ready-promise①④">当前就绪承诺</a>并附上名为"AbortError"的DOMException。</p>
            <li data-md>
                <p>将<var>animation</var>的<a data-link-type="dfn" href="#current-ready-promise"
                        id="ref-for-current-ready-promise①⑤">当前就绪承诺</a>的[[PromiseIsHandled]]内部槽设置为true。</p>
            <li data-md>
                <p>让<var>animation</var>的<a data-link-type="dfn" href="#current-ready-promise"
                        id="ref-for-current-ready-promise①⑥">当前就绪承诺</a>成为<a data-link-type="dfn"
                        href="https://webidl.spec.whatwg.org/#a-promise-resolved-with"
                        id="ref-for-a-promise-resolved-with①">新解析的承诺对象</a>，其值为<var>animation</var>，位于<var>animation</var>的<a
                        data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm"
                        id="ref-for-concept-relevant-realm⑤">相关领域</a>。</p>
        </ol>

        <h4 class="heading settled" data-level="4.4.15" id="speed-control"><span class="secno">4.4.15. </span><span
                class="content">速度控制</span><a class="self-link" href="#speed-control"></a></h4>
        <div class="informative-bg">
            <p>可以通过设置<em>播放速率</em>来控制动画的播放速度。例如，将播放速率设置为2将导致动画的<a data-link-type="dfn" href="#animation-current-time"
                    id="ref-for-animation-current-time③③">当前时间</a>以其<a data-link-type="dfn" href="#timeline"
                    id="ref-for-timeline③⑦">时间轴</a>的两倍速率增加。同样，播放速率设置为-1将导致动画的<span
                    id="ref-for-animation-current-time③④">当前时间</span>以与其<a data-link-type="dfn" href="#time-value"
                    id="ref-for-time-value②⑨">时间值</a>增加相同的速率减少。</p>
        </div>
        <p><a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation①⑧">动画</a>具有一个<dfn
                class="dfn-paneled" data-dfn-type="dfn" data-noexport id="playback-rate">播放速率</dfn>，它提供了从关联的<a
                data-link-type="dfn" href="#timeline" id="ref-for-timeline③⑨">时间轴</a>的<a data-link-type="dfn"
                href="#time-value" id="ref-for-time-value③⓪">时间值</a>的变化速率到动画的<a data-link-type="dfn"
                href="#animation-current-time" id="ref-for-animation-current-time③⑤">当前时间</a>的缩放因子。<a
                data-link-type="dfn" href="#playback-rate" id="ref-for-playback-rate②⑤">播放速率</a>最初为1。</p>
        <p>将动画的<a data-link-type="dfn" href="#playback-rate" id="ref-for-playback-rate②⑥">播放速率</a>设置为零实际上会暂停动画（然而，<a
                data-link-type="dfn" href="#animation-play-state" id="ref-for-animation-play-state④">播放状态</a>不一定会变为<a
                data-link-type="dfn" href="#play-state-paused" id="ref-for-play-state-paused②">暂停</a>）。</p>
        <h5 class="heading settled" data-level="4.4.15.1" id="setting-the-playback-rate-of-an-animation"><span
                class="secno">4.4.15.1. </span><span class="content">设置动画的播放速率</span><a class="self-link"
                href="#setting-the-playback-rate-of-an-animation"></a></h5>
        <p>将<a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation①⑨">动画</a>
            <var>animation</var> 的播放速率设置为 <var>new playback rate</var> 的过程如下：
        </p>
        <ol>
            <li data-md>
                <p>清除<var>animation</var>上的任何<a data-link-type="dfn" href="#pending-playback-rate"
                        id="ref-for-pending-playback-rate②">待处理的播放速率</a>。</p>
            <li data-md>
                <p>让<var>previous time</var>为更改<a data-link-type="dfn" href="#playback-rate"
                        id="ref-for-playback-rate②⑦">播放速率</a>之前的<var>animation</var>的<a data-link-type="dfn"
                        href="#animation-current-time" id="ref-for-animation-current-time③⑥">当前时间</a>。</p>
            <li data-md>
                <p>让<var>previous playback rate</var>为<var>animation</var>的当前<a data-link-type="dfn"
                        href="#effective-playback-rate" id="ref-for-effective-playback-rate④">有效播放速率</a>。</p>
            <li data-md>
                <p>将<a data-link-type="dfn" href="#playback-rate" id="ref-for-playback-rate②⑧">播放速率</a>设置为<var>new
                        playback rate</var>。</p>
            <li data-md>
                <p>根据以下第一个匹配条件执行步骤（如果有）：</p>
                <div class="switch">
                    <dl>
                        <dt data-md>如果<var>animation</var>与<a data-link-type="dfn"
                                href="#monotonically-increasing-timeline"
                                id="ref-for-monotonically-increasing-timeline③">单调递增时间轴</a>关联，且<var>previous
                                time</var>为<a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved⑦⓪">已解析</a>，
                        </dt>
                        <dd data-md>
                            <p><a data-link-type="dfn" href="#animation-set-the-current-time"
                                    id="ref-for-animation-set-the-current-time②">将当前时间</a>设置为<var>animation</var>的<var>previous
                                    time</var>。</p>
                        <dt data-md>
                            <p>如果<var>animation</var>与一个非空的<a data-link-type="dfn" href="#timeline"
                                    id="ref-for-timeline④①">时间轴</a>关联，该时间轴不是<a data-link-type="dfn"
                                    href="#monotonically-increasing-timeline"
                                    id="ref-for-monotonically-increasing-timeline④">单调递增</a>的，并且<var>animation</var>的<a
                                    data-link-type="dfn" href="#animation-start-time"
                                    id="ref-for-animation-start-time③⑤">开始时间</a>是<a data-link-type="dfn"
                                    href="#unresolved" id="ref-for-unresolved⑦①">已解析</a>的，<a data-link-type="dfn"
                                    href="#associated-effect-end"
                                    id="ref-for-associated-effect-end①④">关联效果结束</a>不是无限大，并且：</p>
                            <ul>
                                <li data-md>
                                    <p>如果<var>previous playback rate</var>&lt;0，且<var>new playback rate</var>≥0，或者</p>
                                <li data-md>
                                    <p>如果<var>previous playback rate</var>≥0，且<var>new playback rate</var>&lt;0，</p>
                            </ul>
                        <dd data-md>
                            <p>将<var>animation</var>的<a data-link-type="dfn" href="#animation-start-time"
                                    id="ref-for-animation-start-time③⑥">开始时间</a>设置为计算<code><a data-link-type="dfn" href="#associated-effect-end" id="ref-for-associated-effect-end①⑤">关联效果结束</a> - <a data-link-type="dfn" href="#animation-start-time" id="ref-for-animation-start-time③⑦">开始时间</a></code>的结果。
                            </p>
                            <p class="note" role="note"><span>注意：</span> 这实际上翻转了非单调时间轴上的动画开始/结束时间，保留了相对于另一个方向的开始时间的相对偏移。
                            </p>
                    </dl>
                </div>
        </ol>
        <h5 class="heading settled" data-level="4.4.15.2" id="seamlessly-updating-the-playback-rate-of-an-animation">
            <span class="secno">4.4.15.2. </span><span class="content">无缝更新动画的播放速率</span><a class="self-link"
                href="#seamlessly-updating-the-playback-rate-of-an-animation"></a>
        </h5>
        <p>对于在另一个进程或线程上运行的飞行中的动画，<a data-link-type="dfn" href="#set-the-playback-rate"
                id="ref-for-set-the-playback-rate①">设置播放速率</a>的过程可能会导致动画跳跃，
            如果运行动画的进程或线程当前未与执行更新的进程或线程同步。</p>
        <p>为了对<a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation②⓪">动画</a>的<a
                data-link-type="dfn" href="#playback-rate" id="ref-for-playback-rate②⑨">播放速率</a>进行无缝更改，动画可以具有一个<dfn
                class="dfn-paneled" data-dfn-type="dfn" data-noexport id="pending-playback-rate">待处理的播放速率</dfn>，
            定义在进行任何必要的同步之后应用的播放速率（对于在不同线程或进程中运行的动画情况）。</p>
        <p>最初，<a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation②①">动画</a>的<a
                data-link-type="dfn" href="#pending-playback-rate" id="ref-for-pending-playback-rate③">待处理的播放速率</a>未设置。
        </p>
        <p>动画的<var>animation</var>的<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="effective-playback-rate">有效播放速率</dfn>是其<a data-link-type="dfn" href="#pending-playback-rate"
                id="ref-for-pending-playback-rate④">待处理的播放速率</a>，如果已设置，
            否则是动画的<a data-link-type="dfn" href="#playback-rate" id="ref-for-playback-rate③⓪">播放速率</a>。</p>
        <p>当要<dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="apply any pending playback rate" data-noexport
                id="apply-any-pending-playback-rate">应用任何待处理的播放速率</dfn>到<a data-link-type="dfn"
                href="#concept-animation" id="ref-for-concept-animation②②">动画</a><var>animation</var>时，执行以下步骤：</p>
        <ol>
            <li data-md>
                <p>如果<var>animation</var>没有<a data-link-type="dfn" href="#pending-playback-rate"
                        id="ref-for-pending-playback-rate⑤">待处理的播放速率</a>，则终止这些步骤。</p>
            <li data-md>
                <p>将<var>animation</var>的<a data-link-type="dfn" href="#playback-rate"
                        id="ref-for-playback-rate③①">播放速率</a>设置为其<a data-link-type="dfn" href="#pending-playback-rate"
                        id="ref-for-pending-playback-rate⑥">待处理的播放速率</a>。</p>
            <li data-md>
                <p>清除<var>animation</var>的<a data-link-type="dfn" href="#pending-playback-rate"
                        id="ref-for-pending-playback-rate⑦">待处理的播放速率</a>。</p>
        </ol>
        <p>将<a data-link-type="dfn" href="#concept-animation"
                id="ref-for-concept-animation②③">动画</a><var>animation</var>的播放速率无缝更新为<var>new playback rate</var>，并保留其<a
                data-link-type="dfn" href="#animation-current-time" id="ref-for-animation-current-time③⑦">当前时间</a>的过程如下：
        </p>
        <ol>
            <li data-md>
                <p>将<var>animation</var>的<a data-link-type="dfn" href="#animation-play-state"
                        id="ref-for-animation-play-state⑤">播放状态</a>记为<var>previous play state</var>。</p>
                <p class="note" role="note"><span>注意：</span> 在更新<var>animation</var>的<a data-link-type="dfn"
                        href="#effective-playback-rate" id="ref-for-effective-playback-rate⑤">有效播放速率</a>之前，
                    需要记录播放状态，因为在以下逻辑中，
                    如果<var>animation</var>当前处于<a data-link-type="dfn" href="#play-state-finished"
                        id="ref-for-play-state-finished⑦">完成</a>状态，我们希望立即应用其<a data-link-type="dfn"
                        href="#pending-playback-rate" id="ref-for-pending-playback-rate⑧">待处理的播放速率</a>，
                    无论应用后它是否仍将完成。</p>
            <li data-md>
                <p>将<var>animation</var>的<a data-link-type="dfn" href="#pending-playback-rate"
                        id="ref-for-pending-playback-rate①⓪">待处理的播放速率</a>设置为<var>new playback rate</var>。</p>
            <li data-md>
                <p>执行以下第一个匹配条件对应的步骤：</p>
                <div class="switch">
                    <dl>
                        <dt data-md>如果<var>animation</var>有一个<a data-link-type="dfn" href="#pending-play-task"
                                id="ref-for-pending-play-task①⑤">待处理的播放任务</a>或<a data-link-type="dfn"
                                href="#pending-pause-task" id="ref-for-pending-pause-task①⑤">待处理的暂停任务</a>，</dt>
                        <dd data-md>
                            <p>终止这些步骤。</p>
                            <p class="note" role="note"><span>注意：</span> 不同类型的待处理任务将在其运行时应用<a data-link-type="dfn"
                                    href="#pending-playback-rate"
                                    id="ref-for-pending-playback-rate①①">待处理的播放速率</a>，因此在这种情况下无需进一步操作。</p>
                        <dt data-md>
                            <p>如果<var>previous play state</var>为<a data-link-type="dfn" href="#play-state-idle"
                                    id="ref-for-play-state-idle②">空闲</a>或<a data-link-type="dfn"
                                    href="#play-state-paused"
                                    id="ref-for-play-state-paused③">暂停</a>，或<var>animation</var>的<a data-link-type="dfn"
                                    href="#animation-current-time" id="ref-for-animation-current-time③⑧">当前时间</a>为<a
                                    data-link-type="dfn" href="#unresolved" id="ref-for-unresolved⑦②">未解析</a>，
                        </dt>
                        <dd data-md>
                            <p><a data-link-type="dfn" href="#apply-any-pending-playback-rate"
                                    id="ref-for-apply-any-pending-playback-rate⑧">应用任何待处理的播放速率</a>于<var>animation</var>。
                            </p>
                            <p class="note" role="note"><span>注意：</span>
                                第二个条件是必需的，以确保如果我们有一个运行中的动画，其当前时间未解析且没有待处理的播放任务，则我们不会在下面尝试播放它。</p>
                        <dt data-md>
                            <p>如果<var>previous play state</var>为<a data-link-type="dfn" href="#play-state-finished"
                                    id="ref-for-play-state-finished⑧">完成</a>，
                        </dt>
                        <dd data-md>
                            <ol>
                                <li data-md>
                                    <p>将<var>unconstrained current time</var>设为通过计算<var>animation</var>的<a
                                            data-link-type="dfn" href="#animation-current-time"
                                            id="ref-for-animation-current-time③⑨">当前时间</a>并将<a data-link-type="dfn"
                                            href="#animation-hold-time" id="ref-for-animation-hold-time④⓪">保留时间</a>替换为<a
                                            data-link-type="dfn" href="#unresolved"
                                            id="ref-for-unresolved⑦③">未解析</a>时间值得出的结果。</p>
                                <li data-md>
                                    <p>将<var>animation</var>的<a data-link-type="dfn" href="#animation-start-time"
                                            id="ref-for-animation-start-time③⑧">开始时间</a>设置为计算以下表达式的结果：</p>
                                    <blockquote>
                                        <code><var>timeline time</var> - (<var>unconstrained current time</var> / <a data-link-type="dfn" href="#pending-playback-rate" id="ref-for-pending-playback-rate①②">待处理的播放速率</a>)</code>
                                    </blockquote>
                                    <p>其中，<var>timeline time</var>是与<var>animation</var>关联的<a data-link-type="dfn"
                                            href="#timeline" id="ref-for-timeline④②">时间轴</a>的当前<a data-link-type="dfn"
                                            href="#time-value" id="ref-for-time-value③①">时间值</a>。</p>
                                    <p>如果<a data-link-type="dfn" href="#pending-playback-rate"
                                            id="ref-for-pending-playback-rate①③">待处理的播放速率</a>为零，则将<var>animation</var>的<a
                                            data-link-type="dfn" href="#animation-start-time"
                                            id="ref-for-animation-start-time③⑨">开始时间</a>设置为<var>timeline time</var>。</p>
                                <li data-md>
                                    <p><a data-link-type="dfn" href="#apply-any-pending-playback-rate"
                                            id="ref-for-apply-any-pending-playback-rate⑨">应用任何待处理的播放速率</a>于<var>animation</var>。
                                    </p>
                                <li data-md>
                                    <p>执行<a data-link-type="dfn" href="#update-an-animations-finished-state"
                                            id="ref-for-update-an-animations-finished-state①①">更新动画完成状态</a>的过程，
                                        其中<var>did seek</var>标志设为false，<var>synchronously notify</var>标志设为false。</p>
                            </ol>
                        <dt data-md>否则，</dt>
                        <dd data-md>
                            <p>执行<a data-link-type="dfn" href="#play-an-animation"
                                    id="ref-for-play-an-animation①">播放动画</a>的过程，
                                <var>auto-rewind</var>标志设为false。
                            </p>
                    </dl>
                </div>
        </ol>

        <h4 class="heading settled" data-level="4.4.16" id="reversing-an-animation-section"><span class="secno">4.4.16.
            </span><span class="content">倒放动画</span><a class="self-link" href="#reversing-an-animation-section"></a>
        </h4>
        <p>倒放<a data-link-type="dfn" href="#concept-animation"
                id="ref-for-concept-animation②④">动画</a><var>animation</var>的过程如下：</p>
        <ol>
            <li data-md>
                <p>如果<var>animation</var>没有关联的<a data-link-type="dfn" href="#timeline"
                        id="ref-for-timeline④③">时间轴</a>，或关联的<span id="ref-for-timeline④④">时间轴</span>是<a
                        data-link-type="dfn" href="#inactive-timeline" id="ref-for-inactive-timeline①④">非活动的</a>，<a
                        data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw"
                        id="ref-for-dfn-throw④">抛出</a>一个
                    "<code
                        class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidstateerror" id="ref-for-invalidstateerror③">InvalidStateError</a></code>"
                    <code
                        class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException③">DOMException</a></code>
                    并终止这些步骤。
                </p>
            <li data-md>
                <p>将<var>original pending playback rate</var>设为<var>animation</var>的<a data-link-type="dfn"
                        href="#pending-playback-rate" id="ref-for-pending-playback-rate①④">待处理的播放速率</a>。</p>
            <li data-md>
                <p>将<var>animation</var>的<a data-link-type="dfn" href="#pending-playback-rate"
                        id="ref-for-pending-playback-rate①⑤">待处理的播放速率</a>设为其<a data-link-type="dfn"
                        href="#effective-playback-rate" id="ref-for-effective-playback-rate⑥">有效播放速率</a>的加法逆元（即
                    <code>-<a data-link-type="dfn" href="#effective-playback-rate"
                    id="ref-for-effective-playback-rate⑦">有效播放速率</a></code>）。
                </p>
            <li data-md>
                <p>运行<a data-link-type="dfn" href="#play-an-animation"
                        id="ref-for-play-an-animation②">播放动画</a>的步骤，<var>auto-rewind</var>标志设为true。</p>
                <p>如果<a data-link-type="dfn" href="#play-an-animation"
                        id="ref-for-play-an-animation③">播放动画</a>的步骤抛出异常，将<var>animation</var>的<a data-link-type="dfn"
                        href="#pending-playback-rate" id="ref-for-pending-playback-rate①⑥">待处理的播放速率</a>恢复为<var>original
                        pending playback rate</var>并传播异常。</p>
        </ol>
        <h4 class="heading settled" data-level="4.4.17" id="play-states"><span class="secno">4.4.17. </span><span
                class="content">播放状态</span><a class="self-link" href="#play-states"></a></h4>
        <p><a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation②⑤">动画</a>可以描述为以下<a
                data-link-type="dfn" data-dfn-for="animation" data-dfn-type="dfn" data-export data-lt="play state"
                id="animation-play-state">播放状态</a>之一，每个状态还提供了非规范性的描述：</p>
        <div class="informative-bg">
            <dl>
                <dt data-md><a data-link-type="dfn" href="#play-state-idle" id="ref-for-play-state-idle③">空闲</a>
                <dd data-md>
                    <p>动画的<a data-link-type="dfn" href="#animation-current-time"
                            id="ref-for-animation-current-time④⓪">当前时间</a>是<a data-link-type="dfn" href="#unresolved"
                            id="ref-for-unresolved⑦④">未解析</a>的，动画的<a data-link-type="dfn" href="#animation-start-time"
                            id="ref-for-animation-start-time④⓪">开始时间</a>也是<span
                            id="ref-for-unresolved⑦⑤">未解析</span>的，且没有待处理的任务。在这种状态下，动画没有任何效果。</p>
                <dt data-md><a data-link-type="dfn" href="#play-state-running" id="ref-for-play-state-running②">运行中</a>
                <dd data-md>
                    <p>动画有一个已解析的<a data-link-type="dfn" href="#animation-current-time"
                            id="ref-for-animation-current-time④①">当前时间</a>，它会在每个<a data-link-type="dfn"
                            href="#animation-frame" id="ref-for-animation-frame②">动画帧</a>上变化（前提是<a data-link-type="dfn"
                            href="#playback-rate" id="ref-for-playback-rate③②">播放速率</a>不为零且<a data-link-type="dfn"
                            href="#timeline" id="ref-for-timeline④⑤">时间轴</a>是<a data-link-type="dfn"
                            href="#inactive-timeline" id="ref-for-inactive-timeline①⑤">活动的</a>并且<a data-link-type="dfn"
                            href="#monotonically-increasing-timeline">单调递增</a>）。</p>
                <dt data-md><a data-link-type="dfn" href="#play-state-paused" id="ref-for-play-state-paused④">暂停</a>
                <dd data-md>
                    <p>动画已被暂停，<a data-link-type="dfn" href="#animation-current-time"
                            id="ref-for-animation-current-time④②">当前时间</a>不再变化。</p>
                <dt data-md><a data-link-type="dfn" href="#play-state-finished" id="ref-for-play-state-finished⑨">完成</a>
                <dd data-md>
                    <p>动画已达到其播放范围的自然边界，<a data-link-type="dfn" href="#animation-current-time"
                            id="ref-for-animation-current-time④③">当前时间</a>不再更新。</p>
            </dl>
        </div>
        <p><a data-link-type="dfn" href="#animation-play-state" id="ref-for-animation-play-state⑥">动画</a>的<a
                data-link-type="dfn" href="#concept-animation"
                id="ref-for-concept-animation②⑥">播放状态</a><var>animation</var>在某个给定时刻的状态为以下条件中首先匹配的状态：</p>
        <div class="switch">
            <dl>
                <dt data-md>
                    <p><em>所有</em>以下条件都为真：</p>
                    <ul>
                        <li data-md>
                            <p><var>animation</var>的<a data-link-type="dfn" href="#animation-current-time"
                                    id="ref-for-animation-current-time④④">当前时间</a>是<a data-link-type="dfn"
                                    href="#unresolved" id="ref-for-unresolved⑦⑥">未解析</a>的，
                                <em>并且</em>
                            </p>
                        <li data-md>
                            <p><var>animation</var>的<a data-link-type="dfn" href="#animation-start-time"
                                    id="ref-for-animation-start-time④①">开始时间</a>是<a data-link-type="dfn"
                                    href="#unresolved" id="ref-for-unresolved⑦⑦">未解析</a>的，
                                <em>并且</em>
                            </p>
                        <li data-md>
                            <p><var>animation</var>没有<a data-link-type="dfn" href="#pending-play-task"
                                    id="ref-for-pending-play-task①⑥">待处理的播放任务</a>或<a data-link-type="dfn"
                                    href="#pending-pause-task" id="ref-for-pending-pause-task①⑥">待处理的暂停任务</a>。</p>
                    </ul>
                <dd data-md>
                    <p>→ <dfn class="dfn-paneled" data-dfn-for="play state" data-dfn-type="dfn" data-export
                            data-local-lt="idle play state" id="play-state-idle">空闲</dfn></p>
                <dt data-md>
                    <p><em>以下任一</em>条件为真：</p>
                    <ul>
                        <li data-md>
                            <p><var>animation</var>有一个<a data-link-type="dfn" href="#pending-pause-task"
                                    id="ref-for-pending-pause-task①⑦">待处理的暂停任务</a>，
                                <em>或者</em>
                            </p>
                        <li data-md>
                            <p><em>两个</em>条件同时成立：<var>animation</var>的<a data-link-type="dfn"
                                    href="#animation-start-time" id="ref-for-animation-start-time④②">开始时间</a>是<a
                                    data-link-type="dfn" href="#unresolved" id="ref-for-unresolved⑦⑧">未解析</a>的，
                                并且没有<a data-link-type="dfn" href="#pending-play-task"
                                    id="ref-for-pending-play-task①⑦">待处理的播放任务</a>。</p>
                    </ul>
                <dd data-md>
                    <p>→ <dfn class="dfn-paneled" data-dfn-for="play state" data-dfn-type="dfn" data-export
                            data-local-lt="paused play state" id="play-state-paused">暂停</dfn></p>
                <dt data-md>
                    <p>对<var>animation</var>来说，<a data-link-type="dfn" href="#animation-current-time"
                            id="ref-for-animation-current-time④⑤">当前时间</a>是<a data-link-type="dfn" href="#unresolved"
                            id="ref-for-unresolved⑦⑨">已解析</a>的，并且<em>以下任一</em>条件为真：</p>
                    <ul>
                        <li data-md>
                            <p><var>animation</var>的<a data-link-type="dfn" href="#effective-playback-rate"
                                    id="ref-for-effective-playback-rate⑧">有效播放速率</a> > 0 且 <a data-link-type="dfn"
                                    href="#animation-current-time" id="ref-for-animation-current-time④⑥">当前时间</a> ≥ <a
                                    data-link-type="dfn" href="#associated-effect-end"
                                    id="ref-for-associated-effect-end①⑥">关联效果结束</a>；<em>或者</em></p>
                        <li data-md>
                            <p><var>animation</var>的<a data-link-type="dfn" href="#effective-playback-rate"
                                    id="ref-for-effective-playback-rate⑨">有效播放速率</a>
                                &lt; 0 且 <a data-link-type="dfn" href="#animation-current-time"
                                    id="ref-for-animation-current-time④⑦">当前时间</a> ≤ 0，
                            </p>
                    </ul>
                <dd data-md>
                    <p>→ <dfn class="dfn-paneled" data-dfn-for="play state" data-dfn-type="dfn" data-export
                            data-local-lt="finished play state" id="play-state-finished">完成</dfn></p>
                <dt data-md>否则，
                <dd data-md>
                    <p>→ <dfn class="dfn-paneled" data-dfn-for="play state" data-dfn-type="dfn" data-export
                            data-local-lt="running play state" id="play-state-running">运行中</dfn></p>
            </dl>
        </div>
        <div class="note" role="note">
            <p>注意<a data-link-type="dfn" href="#play-state-paused" id="ref-for-play-state-paused⑤">暂停状态</a>在实际上"胜过"<a
                    data-link-type="dfn" href="#play-state-finished" id="ref-for-play-state-finished①⓪">完成状态</a>。</p>
            <p>然而，一个在其自然播放范围之外暂停的动画可以通过设置<a data-link-type="dfn" href="#animation-start-time"
                    id="ref-for-animation-start-time④③">开始时间</a>，从<a data-link-type="dfn" href="#play-state-paused"
                    id="ref-for-play-state-paused⑥">暂停</a>状态转换为<a data-link-type="dfn" href="#play-state-finished"
                    id="ref-for-play-state-finished①①">完成</a>状态而无需重新开始，如下所示：</p>
            <div class="example" id="example-e0f669c8">
                <a class="self-link" href="#example-e0f669c8"></a>
                <pre class="lang-javascript highlight">animation<c- p>.</c->effect<c- p>.</c->updateTiming<c- p>({</c-> duration<c- o>:</c-> <c- mf>5000</c-> <c- p>});</c->
animation<c- p>.</c->currentTime <c- o>=</c-> <c- mf>4000</c-><c- p>;</c-> 
animation<c- p>.</c->pause<c- p>();</c-> 
animation<c- p>.</c->ready<c- p>.</c->then<c- p>(</c-><c- a>function</c-><c- p>()</c-> <c- p>{</c->
  animation<c- p>.</c->effect<c- p>.</c->updateTiming<c- p>({</c-> duration<c- o>:</c-> <c- mf>3000</c-> <c- p>});</c-> 
  alert<c- p>(</c->animation<c- p>.</c->playState<c- p>);</c-> <c- c1>// 显示'paused'</c->
  animation<c- p>.</c->startTime <c- o>=</c->
    document<c- p>.</c->timeline<c- p>.</c->currentTime <c- o>-</c-> animation<c- p>.</c->currentTime <c- o>*</c-> animation<c- p>.</c->playbackRate<c- p>;</c-> 
  alert<c- p>(</c->animation<c- p>.</c->playState<c- p>);</c-> <c- c1>// 显示'finished'</c->
<c- p>});</c-></pre>
            </div>
        </div>

        <h4 class="heading settled" data-level="4.4.18" id="animation-events-section"><span class="secno">4.4.18.
            </span><span class="content">动画事件</span><a class="self-link" href="#animation-events-section"></a></h4>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="animation-events">动画事件</dfn>
            包括本规范中定义的<a data-link-type="dfn" href="#animation-playback-events"
                id="ref-for-animation-playback-events">动画播放事件</a>，以及来自
            <a data-link-type="dfn" href="https://drafts.csswg.org/css-transitions/#transition-events"
                id="ref-for-transition-events">CSS 过渡</a>
            <a data-link-type="biblio" href="#biblio-css-transitions-1">[CSS-TRANSITIONS-1]</a> 和
            <a data-link-type="dfn" href="https://drafts.csswg.org/css-animations/#events" id="ref-for-events">CSS
                动画</a>
            <a data-link-type="biblio" href="#biblio-css-animations-1">[CSS-ANIMATIONS-1]</a> 的事件。
            未来的规范可能会通过进一步的类型扩展这组<a data-link-type="dfn" href="#animation-events"
                id="ref-for-animation-events②">动画事件</a>。
        </p>
        <p>每个<code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/#document" id="ref-for-document④">文档</a></code>
            维护一个<dfn class="dfn-paneled" data-dfn-type="dfn" data-export
                id="pending-animation-event-queue">待处理动画事件队列</dfn>，其中存储<a data-link-type="dfn" href="#animation-events"
                id="ref-for-animation-events③">动画事件</a>及其相应的事件目标
            和<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="scheduled-event-time">计划事件时间</dfn>。
            <a data-link-type="dfn" href="#scheduled-event-time" id="ref-for-scheduled-event-time⑤">计划事件时间</a>是一个
            相对于<a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-time-origin"
                id="ref-for-concept-settings-object-time-origin②">时间起源</a>的<a data-link-type="dfn" href="#time-value"
                id="ref-for-time-value③②">时间值</a>，表示在无限高频率更新的情况下事件理想情况下的调度时间点。
            它被<a data-link-type="dfn" href="#update-animations-and-send-events"
                id="ref-for-update-animations-and-send-events③">更新动画并发送事件</a>的过程用于按时间顺序排列队列中的
            <span id="ref-for-animation-events④">动画事件</span>。
            请注意，如果例如<a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation②⑦">动画</a>的
            <a data-link-type="dfn" href="#timeline" id="ref-for-timeline④⑥">时间线</a>生成的时间值与<span
                id="ref-for-concept-settings-object-time-origin③">时间起源</span>无关（例如跟踪滚动位置的时间线），或如果
            <span id="ref-for-timeline④⑦">时间线</span>是<a data-link-type="dfn" href="#inactive-timeline"
                id="ref-for-inactive-timeline①⑥">非活动</a>的，
            则该值可能是<a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved⑧⓪">未解析</a>。
        </p>
        <h5 class="heading settled" data-level="4.4.18.1" id="sorting-animation-events"><span class="secno">4.4.18.1.
            </span><span class="content">排序动画事件</span><a class="self-link" href="#sorting-animation-events"></a></h5>
        <p>以下定义提供了排序队列事件的帮助。</p>
        <p>将动画时间转换为时间线时间，即<a data-link-type="dfn" href="#time-value" id="ref-for-time-value③③">时间值</a>，
            <var>time</var>，相对于动画的<a data-link-type="dfn" href="#animation-start-time"
                id="ref-for-animation-start-time④④">开始时间</a>，<var>animation</var>，执行以下步骤：
        </p>
        <ol>
            <li data-md>
                <p>如果<var>time</var>是<a data-link-type="dfn" href="#unresolved"
                        id="ref-for-unresolved⑧①">未解析</a>的，返回<var>time</var>。</p>
            <li data-md>
                <p>如果<var>time</var>是无穷大，返回<a data-link-type="dfn" href="#unresolved"
                        id="ref-for-unresolved⑧②">未解析</a>的<a data-link-type="dfn" href="#time-value"
                        id="ref-for-time-value③④">时间值</a>。</p>
            <li data-md>
                <p>如果<var>animation</var>的<a data-link-type="dfn" href="#playback-rate"
                        id="ref-for-playback-rate③③">播放速率</a>为零，
                    返回<a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved⑧③">未解析</a>的<a
                        data-link-type="dfn" href="#time-value" id="ref-for-time-value③⑤">时间值</a>。</p>
            <li data-md>
                <p>如果<var>animation</var>的<a data-link-type="dfn" href="#animation-start-time"
                        id="ref-for-animation-start-time④⑤">开始时间</a>是<a data-link-type="dfn" href="#unresolved"
                        id="ref-for-unresolved⑧④">未解析</a>的，
                    返回<span id="ref-for-unresolved⑧⑤">未解析</span>的<a data-link-type="dfn" href="#time-value"
                        id="ref-for-time-value③⑥">时间值</a>。</p>
            <li data-md>
                <p>返回计算结果：
                    <code><var>time</var> × (1 / <var>playback rate</var>) + <var>start time</var></code>（其中
                    <var>playback rate</var> 和<var>start time</var>分别是
                    <var>animation</var>的<a data-link-type="dfn" href="#playback-rate"
                        id="ref-for-playback-rate③④">播放速率</a>
                    和<a data-link-type="dfn" href="#animation-start-time" id="ref-for-animation-start-time④⑥">开始时间</a>）。
                </p>
        </ol>
        <p>要<dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="animation time to origin-relative time" data-noexport
                id="animation-time-to-origin-relative-time">将时间线时间转换为相对于原点的时间</dfn>，即一个以与<a data-link-type="dfn"
                href="#time-value" id="ref-for-time-value③⑦">时间值</a>相同尺度表示的<var>time</var>，执行以下步骤，以<a
                data-link-type="dfn" href="#timeline" id="ref-for-timeline④⑧">时间线</a>的<var>timeline</var>为基准：</p>
        <ol>
            <li data-md>
                <p>将<var>time</var>从动画时间<a data-link-type="dfn" href="#animation-time-to-timeline-time"
                        id="ref-for-animation-time-to-timeline-time">转换</a>为时间线时间。</p>
            <li data-md>
                <p>如果<var>timeline time</var>是<a data-link-type="dfn" href="#unresolved"
                        id="ref-for-unresolved⑧⑥">未解析</a>的，返回<var>time</var>。</p>
            <li data-md>
                <p>如果<var>animation</var>未关联<a data-link-type="dfn" href="#timeline" id="ref-for-timeline④⑨">时间线</a>，
                    返回<a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved⑧⑦">未解析</a>的时间值。</p>
            <li data-md>
                <p>如果<var>animation</var>关联的是<a data-link-type="dfn" href="#inactive-timeline"
                        id="ref-for-inactive-timeline①⑦">非活动时间线</a>，
                    返回<a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved⑧⑧">未解析</a>的时间值。</p>
            <li data-md>
                <p>如果未定义将时间线时间<a data-link-type="dfn" href="#timeline-time-to-origin-relative-time"
                        id="ref-for-timeline-time-to-origin-relative-time②">转换为起源相关时间</a>的过程，
                    返回<a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved⑧⑨">未解析</a>的<a
                        data-link-type="dfn" href="#time-value" id="ref-for-time-value③⑨">时间值</a>。</p>
            <li data-md>
                <p>返回通过定义的过程，将<a data-link-type="dfn" href="#timeline" id="ref-for-timeline⑤⓪">时间线</a>中的<var>timeline
                        time</var>
                    转换为起源相关时间的结果，<var>animation</var>与此时间线关联。</p>
        </ol>

        <h5 class="heading settled" data-level="4.4.18.2" id="animation-playback-events-section"><span
                class="secno">4.4.18.2. </span><span class="content">动画播放事件</span><a class="self-link"
                href="#animation-playback-events-section"></a></h5>
        <p>当<a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation②⑧">动画</a>播放时，
            它们通过<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="animation-playback-events">动画播放事件</dfn>报告状态的变化。</p>
        <p><a data-link-type="dfn" href="#animation-playback-events" id="ref-for-animation-playback-events①">动画播放事件</a>
            是时间模型的一个属性。因此，即使在<a data-link-type="dfn" href="#animation-associated-effect"
                id="ref-for-animation-associated-effect②⓪">关联效果</a>不存在或没有可观察结果的情况下，
            它们也会被调度。</p>
        <h5 class="heading settled" data-level="4.4.18.3" id="animation-playback-event-types"><span
                class="secno">4.4.18.3. </span><span class="content">动画播放事件的类型</span><a class="self-link"
                href="#animation-playback-event-types"></a></h5>
        <dl>
            <dt data-md><dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="finish event" data-noexport
                    id="finish-event">完成事件</dfn>
            <dd data-md>
                <p>每当动画进入<a data-link-type="dfn" href="#play-state-finished"
                        id="ref-for-play-state-finished①②">完成播放状态</a>时排队。</p>
            <dt data-md><dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="cancel event" data-noexport
                    id="cancel-event">取消事件</dfn>
            <dd data-md>
                <p>每当动画从其他状态进入<a data-link-type="dfn" href="#play-state-idle"
                        id="ref-for-play-state-idle④">空闲播放状态</a>时排队。
                    创建一个初始状态为空闲的新<a data-link-type="dfn" href="#concept-animation"
                        id="ref-for-concept-animation③⓪">动画</a>不会生成新的
                    <a data-link-type="dfn" href="#cancel-event" id="ref-for-cancel-event②">取消事件</a>。
                </p>
            <dt data-md><dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="remove event" data-noexport
                    id="remove-event">移除事件</dfn>
            <dd data-md>
                <p>每当动画被自动移除时排队。
                    参见<a href="#replacing-animations">§ 5.5 替换动画</a>。</p>
        </dl>

        <h3 class="heading settled" data-level="4.5" id="animation-effects"><span class="secno">4.5. </span><span
                class="content">动画效果</span><a class="self-link" href="#animation-effects"></a></h3>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="animation-effect">动画效果</dfn>是指时间层级中的一个项目的抽象术语。
        </p>
        <h4 class="heading settled" data-level="4.5.1" id="animation-effects-and-animations"><span class="secno">4.5.1.
            </span><span class="content">动画效果与动画之间的关系</span><a class="self-link"
                href="#animation-effects-and-animations"></a></h4>
        <p>如果设置了<a data-link-type="dfn" href="#animation-associated-effect"
                id="ref-for-animation-associated-effect②①">动画的关联效果</a>，它就是一种<a data-link-type="dfn"
                href="#animation-effect" id="ref-for-animation-effect⑥">动画效果</a>。
            <span id="ref-for-animation-associated-effect②②">动画的关联效果</span>被称为<dfn class="dfn-paneled"
                data-dfn-type="dfn" data-lt="associated with an animation" data-noexport
                id="associated-with-an-animation">与该动画相关联</dfn>。
            在某一时刻，一个<span id="ref-for-animation-effect⑦">动画效果</span>最多只能<a data-link-type="dfn"
                href="#associated-with-an-animation" id="ref-for-associated-with-an-animation">与一个动画关联</a>。
        </p>
        <p>一个<a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect⑧">动画效果</a>,
            <var>效果</var>，如果<var>效果</var>是<a data-link-type="dfn" href="#associated-with-an-animation"
                id="ref-for-associated-with-an-animation①">与动画相关联</a>，
            则<var>效果</var>是与<var>时间线</var>相关联的<dfn class="dfn-paneled" data-dfn-type="dfn"
                data-lt="associated with a timeline" data-noexport id="associated-with-a-timeline">与时间线关联</dfn>。
        </p>
        <h4 class="heading settled" data-level="4.5.2" id="types-of-animation-effects"><span class="secno">4.5.2.
            </span><span class="content">动画效果的类型</span><a class="self-link" href="#types-of-animation-effects"></a></h4>
        <p>本规范定义了单一类型的<a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect⑨">动画效果</a>：<a
                data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect①">关键帧效果</a>。
            本规范的后续版本将定义更多类型的<span id="ref-for-animation-effect①⓪">动画效果</span>。</p>
        <p>所有类型的<a data-link-type="dfn" href="#animation-effect"
                id="ref-for-animation-effect①①">动画效果</a>定义了一些常见的属性，这些属性将在以下部分描述。</p>
        <h4 class="heading settled" data-level="4.5.3" id="the-active-interval"><span class="secno">4.5.3. </span><span
                class="content">活动区间</span><a class="self-link" href="#the-active-interval"></a></h4>
        <div class="informative-bg">
            <p>一个<a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect①②">动画效果</a>被安排运行的时间段称为其<a
                    data-link-type="dfn" href="#active-interval" id="ref-for-active-interval">活动区间</a>。
                每个<span id="ref-for-animation-effect①③">动画效果</span>只有一个这样的区间。</p>
            <p><a data-link-type="dfn" href="#active-interval" id="ref-for-active-interval①">活动区间</a>的下限通常对应于与该<a
                    data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation③④">动画</a>关联的<a
                    data-link-type="dfn" href="#animation-start-time"
                    id="ref-for-animation-start-time④⑦">动画开始时间</a>，但可能会因动画效果上的<a data-link-type="dfn"
                    href="#start-delay" id="ref-for-start-delay">开始延迟</a>而有所变动。</p>
            <p>区间的上限由<a data-link-type="dfn" href="#active-duration" id="ref-for-active-duration">活动持续时间</a>决定。</p>
            <p>以下说明了<a data-link-type="dfn" href="#animation-start-time"
                    id="ref-for-animation-start-time④⑧">动画开始时间</a>、<a data-link-type="dfn" href="#start-delay"
                    id="ref-for-start-delay①">开始延迟</a>和<a data-link-type="dfn" href="#active-duration"
                    id="ref-for-active-duration①">活动持续时间</a>之间的关系。</p>
            <figure>
                <img alt="开始延迟对活动区间端点的影响示例"
                    src="https://www.w3.org/TR/web-animations-1/images/active-interval-examples.svg" width="600">
                <figcaption> 开始延迟对<a data-link-type="dfn" href="#start-delay"
                        id="ref-for-start-delay②">活动区间</a>端点的影响示例。<br> (a) 无延迟的动画效果；<a data-link-type="dfn"
                        href="#animation-start-time" id="ref-for-animation-start-time④⑨">动画开始时间</a>与活动区间的开始时间重合。<br> (b)
                    正延迟的动画效果；活动区间的开始时间因延迟而推迟。<br> (c) 负延迟的动画效果；活动区间的开始时间因延迟而提前。</figcaption>
            </figure>
            <p>还可以指定<a data-link-type="dfn" href="#end-delay" id="ref-for-end-delay">结束延迟</a>，但主要用于动画的顺序。</p>
        </div>
        <p><a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect①⑥">动画效果</a>定义了一个<dfn
                class="dfn-paneled" data-dfn-type="dfn" data-noexport id="active-interval">活动区间</dfn>，
            这是动画安排产生效果的时间段，<a data-link-type="dfn" href="#fill-mode" id="ref-for-fill-mode">填充模式</a>的例外，它适用于活动区间之外。</p>
        <p><a data-link-type="dfn" href="#active-interval" id="ref-for-active-interval⑦">活动区间</a>的下限由<a
                data-link-type="dfn" href="#start-delay" id="ref-for-start-delay③">开始延迟</a>定义。</p>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="start-delay">开始延迟</dfn>是一个<a
                data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect①⑦">动画效果</a>与其关联的<a
                data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation③⑤">动画</a>的<a
                data-link-type="dfn" href="#animation-start-time"
                id="ref-for-animation-start-time⑤⓪">动画开始时间</a>之间的签名偏移量。</p>
        <p><a data-link-type="dfn" href="#active-interval" id="ref-for-active-interval⑧">活动区间</a>的长度称为<a
                data-link-type="dfn" href="#active-duration" id="ref-for-active-duration②">活动持续时间</a>，其计算方法定义在<a
                href="#calculating-the-active-duration">§ 4.8.2 计算活动持续时间</a>。</p>
        <p>与<a data-link-type="dfn" href="#start-delay" id="ref-for-start-delay④">开始延迟</a>类似，<a data-link-type="dfn"
                href="#animation-effect" id="ref-for-animation-effect①⑧">动画效果</a>也有一个<dfn class="dfn-paneled"
                data-dfn-type="dfn" data-noexport id="end-delay">结束延迟</dfn>，
            主要用于基于另一个<a data-link-type="dfn" href="#end-time" id="ref-for-end-time③">结束时间</a>的动画排序。
            尽管这通常仅在结合顺序效果时有用，这些效果在本规范的后续版本中介绍，但在此包含它是为了表示SVG中的<a
                href="https://www.w3.org/TR/SVG/animate.html#MinAttribute"><code>min</code></a>属性（<a
                data-link-type="biblio" href="#biblio-svg11">[SVG11]</a>，第19章）。</p>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="end-time">结束时间</dfn>是通过评估<code>max(<a data-link-type="dfn" href="#start-delay" id="ref-for-start-delay⑤">开始延迟</a> + <a data-link-type="dfn" href="#active-duration" id="ref-for-active-duration③">活动持续时间</a> + <a data-link-type="dfn" href="#end-delay" id="ref-for-end-delay①">结束延迟</a>, 0)</code>得出的。
        </p>
        <h4 class="heading settled" data-level="4.5.4" id="local-time-section"><span class="secno">4.5.4. </span><span
                class="content">本地时间</span><a class="self-link" href="#local-time-section"></a></h4>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="local-time">本地时间</dfn>是指某一时刻<a
                data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect②①">动画效果</a>的时间，基于以下第一个匹配条件：
        </p>
        <div class="switch">
            <dl>
                <dt data-md>如果<a data-link-type="dfn" href="#animation-effect"
                        id="ref-for-animation-effect②②">动画效果</a><a data-link-type="dfn"
                        href="#associated-with-an-animation" id="ref-for-associated-with-an-animation②">与动画相关联</a>，
                <dd data-md>
                    <p>本地时间为该<a data-link-type="dfn" href="#animation-current-time"
                            id="ref-for-animation-current-time④⑧">动画的当前时间</a>。</p>
                <dt data-md>否则，
                <dd data-md>
                    <p>本地时间为<a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved⑨⓪">未解析</a>。</p>
            </dl>
        </div>
        <h4 class="heading settled" data-level="4.5.5" id="animation-effect-phases-and-states"><span
                class="secno">4.5.5. </span><span class="content">动画效果的阶段与状态</span><a class="self-link"
                href="#animation-effect-phases-and-states"></a></h4>
        <div class="informative-bg">
            <em>本节为非规范性内容</em>
            <p>在某一时刻，<a data-link-type="dfn" href="#animation-effect"
                    id="ref-for-animation-effect②③">动画效果</a>可能处于三个可能的<em>阶段</em>之一。
                如果一个<span id="ref-for-animation-effect②④">动画效果</span>具有<a data-link-type="dfn" href="#unresolved"
                    id="ref-for-unresolved⑨①">未解析</a>的<a data-link-type="dfn" href="#local-time"
                    id="ref-for-local-time">本地时间</a>，则它将不会处于任何阶段。</p>
            <p>不同阶段如下图所示。</p>
            <figure>
                <img alt="描述动画效果的不同阶段和状态的示例"
                    src="https://www.w3.org/TR/web-animations-1/images/animation-effect-phases-and-states.svg"
                    width="700">
                <figcaption> 描述<a data-link-type="dfn" href="#animation-effect"
                        id="ref-for-animation-effect②⑤">动画效果</a>的不同阶段和状态的示例。</figcaption>
            </figure>
            <p>这些阶段如下：</p>
            <dl>
                <dt data-md><a data-link-type="dfn" href="#animation-effect-before-phase"
                        id="ref-for-animation-effect-before-phase">之前阶段</a>
                <dd data-md>
                    <p><a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect②⑥">动画效果</a>的<a
                            data-link-type="dfn" href="#local-time" id="ref-for-local-time①">局部时间</a>落在效果的<a
                            data-link-type="dfn" href="#active-interval" id="ref-for-active-interval⑨">活动区间</a>和<a
                            data-link-type="dfn" href="#end-time" id="ref-for-end-time④">结束时间</a>之前，<em>或者</em>发生在负<a
                            data-link-type="dfn" href="#start-delay" id="ref-for-start-delay⑥">启动延迟</a>生效期间的范围内。</p>

                <dt data-md><a data-link-type="dfn" href="#animation-effect-active-phase"
                        id="ref-for-animation-effect-active-phase">活动阶段</a>
                <dd data-md>
                    <p>当<a data-link-type="dfn" href="#local-time" id="ref-for-local-time②">本地时间</a>落在<a
                            data-link-type="dfn" href="#active-interval" id="ref-for-active-interval①⓪">活动区间</a>内，
                        且不在负<a data-link-type="dfn" href="#start-delay" id="ref-for-start-delay⑦">开始延迟</a>或负<a
                            data-link-type="dfn" href="#end-delay" id="ref-for-end-delay②">结束延迟</a>的范围内时，动画效果处于“活动”阶段。
                    </p>
                <dt data-md><a data-link-type="dfn" href="#animation-effect-after-phase"
                        id="ref-for-animation-effect-after-phase">之后阶段</a>
                <dd data-md>
                    <p>当<a data-link-type="dfn" href="#local-time" id="ref-for-local-time③">本地时间</a>落在<a
                            data-link-type="dfn" href="#active-interval"
                            id="ref-for-active-interval①①">活动区间</a>之后，或在由于负<a data-link-type="dfn" href="#end-delay"
                            id="ref-for-end-delay③">结束延迟</a>而导致的更早的<a data-link-type="dfn" href="#end-time"
                            id="ref-for-end-time⑤">结束时间</a>之后（但不在负<a data-link-type="dfn" href="#start-delay"
                            id="ref-for-start-delay⑧">开始延迟</a>的范围内）时，动画效果处于“之后”阶段。</p>
            </dl>
            <p>除了这些阶段外，<a data-link-type="dfn" href="#animation-effect"
                    id="ref-for-animation-effect②⑨">动画效果</a>还可以被描述为处于几个重叠的<em>状态</em>之一。
                这些状态仅在单个<a data-link-type="dfn" href="#animation-frame"
                    id="ref-for-animation-frame③">动画帧</a>的持续时间内确立，主要用于描述模型的静态部分。</p>
            <p>这些状态及其在模型中的使用总结如下：</p>
            <dl>
                <dt data-md><a data-link-type="dfn" href="#in-play" id="ref-for-in-play">播放中</a>
                <dd data-md>
                    <p>对应于<a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect③⓪">动画效果</a>，其<a
                            data-link-type="dfn" href="#active-time" id="ref-for-active-time">活动时间</a>在每帧上都会改变。</p>
                <dt data-md><a data-link-type="dfn" href="#current" id="ref-for-current">当前</a>
                <dd data-md>
                    <p>对应于<a data-link-type="dfn" href="#animation-effect"
                            id="ref-for-animation-effect③①">动画效果</a>，它要么<a data-link-type="dfn" href="#in-play"
                            id="ref-for-in-play①">播放中</a>，要么可能根据其<a data-link-type="dfn" href="#concept-animation"
                            id="ref-for-concept-animation③⑦">动画</a>的当前<a data-link-type="dfn" href="#playback-rate"
                            id="ref-for-playback-rate③⑤">播放速率</a>在未来进入播放中状态。</p>
                <dt data-md><a data-link-type="dfn" href="#in-effect" id="ref-for-in-effect">有效</a>
                <dd data-md>
                    <p>对应于具有已解析<a data-link-type="dfn" href="#active-time" id="ref-for-active-time①">活动时间</a>的<a
                            data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect③②">动画效果</a>。
                        这种情况发生在动画效果处于<a data-link-type="dfn" href="#animation-effect-active-phase"
                            id="ref-for-animation-effect-active-phase①">活动阶段</a>或处于活动阶段之外，但在其<a data-link-type="dfn"
                            href="#fill-mode" id="ref-for-fill-mode①">填充模式</a>（见<a href="#fill-behavior">§ 4.6
                            填充行为</a>）生效时。
                        只有处于<a data-link-type="dfn" href="#in-effect" id="ref-for-in-effect①">有效</a>状态的动画效果才会对其目标产生结果。
                    </p>
            </dl>
            <p>每种状态的规范定义如下。</p>
        </div>
        <p>确定<a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect③⑤">动画效果</a>的阶段需要以下定义：</p>
        <dl>
            <dt data-md><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="animation-direction">动画方向</dfn>
            <dd data-md>
                <p>如果效果与动画相关联且关联的动画的播放速率小于零，则为“向后”；
                    在所有其他情况下，<a data-link-type="dfn" href="#animation-direction"
                        id="ref-for-animation-direction">动画方向</a>为“向前”。</p>
            <dt data-md><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                    id="before-active-boundary-time">活动前边界时间</dfn>
            <dd data-md>
                <p><code>max(min(<a data-link-type="dfn" href="#start-delay" id="ref-for-start-delay⑨">开始延迟</a>, <a data-link-type="dfn" href="#end-time" id="ref-for-end-time⑥">结束时间</a>), 0)</code>
                </p>
            <dt data-md><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                    id="active-after-boundary-time">活动后边界时间</dfn>
            <dd data-md>
                <p><code>max(min(<a data-link-type="dfn" href="#start-delay" id="ref-for-start-delay①⓪">开始延迟</a> + <a data-link-type="dfn" href="#active-duration" id="ref-for-active-duration④">活动持续时间</a>, <a data-link-type="dfn" href="#end-time" id="ref-for-end-time⑦">结束时间</a>), 0)</code>
                </p>
        </dl>
        <p>如果动画效果的<a data-link-type="dfn" href="#local-time" id="ref-for-local-time④">本地时间</a>未解析，并且满足以下任一条件，则<a
                data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect③⑥">动画效果</a>处于<dfn
                class="dfn-paneled" data-dfn-for="animation effect" data-dfn-type="dfn" data-export
                id="animation-effect-before-phase">之前阶段</dfn>：</p>
        <ol>
            <li data-md>
                <p><a data-link-type="dfn" href="#local-time" id="ref-for-local-time⑤">本地时间</a>小于<a data-link-type="dfn"
                        href="#before-active-boundary-time" id="ref-for-before-active-boundary-time">活动前边界时间</a>，或</p>
            <li data-md>
                <p>动画方向为“向后”，且<a data-link-type="dfn" href="#local-time" id="ref-for-local-time⑥">本地时间</a>等于<a
                        data-link-type="dfn" href="#before-active-boundary-time"
                        id="ref-for-before-active-boundary-time①">活动前边界时间</a>。</p>
        </ol>
        <p>如果动画效果的<a data-link-type="dfn" href="#local-time" id="ref-for-local-time⑦">本地时间</a>未解析，并且满足以下任一条件，则<a
                data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect③⑦">动画效果</a>处于<dfn
                class="dfn-paneled" data-dfn-for="animation effect" data-dfn-type="dfn" data-export
                id="animation-effect-after-phase">之后阶段</dfn>：</p>
        <ol>
            <li data-md>
                <p><a data-link-type="dfn" href="#local-time" id="ref-for-local-time⑧">本地时间</a>大于<a data-link-type="dfn"
                        href="#active-after-boundary-time" id="ref-for-active-after-boundary-time">活动后边界时间</a>，或</p>
            <li data-md>
                <p>动画方向为“向前”，且<a data-link-type="dfn" href="#local-time" id="ref-for-local-time⑨">本地时间</a>等于<a
                        data-link-type="dfn" href="#active-after-boundary-time"
                        id="ref-for-active-after-boundary-time①">活动后边界时间</a>。</p>
        </ol>
        <p>如果动画效果的<a data-link-type="dfn" href="#local-time" id="ref-for-local-time①⓪">本地时间</a>未解析，并且不处于<a
                data-link-type="dfn" href="#animation-effect-before-phase"
                id="ref-for-animation-effect-before-phase①">之前阶段</a>或<a data-link-type="dfn"
                href="#animation-effect-after-phase" id="ref-for-animation-effect-after-phase①">之后阶段</a>，则<a
                data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect③⑧">动画效果</a>处于<dfn
                class="dfn-paneled" data-dfn-for="animation effect" data-dfn-type="dfn" data-export
                id="animation-effect-active-phase">活动阶段</dfn>。</p>
        <p>此外，将动画效果处于上述任何阶段之外的情况称为处于<dfn data-dfn-for="animation effect" data-dfn-type="dfn" data-export
                id="animation-effect-idle-phase">空闲阶段</dfn>。</p>
        <p>如果满足以下所有条件，则<a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect③⑨">动画效果</a>处于<dfn
                class="dfn-paneled" data-dfn-type="dfn" data-noexport id="in-play">播放中</dfn>状态：</p>
        <ol>
            <li data-md>
                <p><a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect④⓪">动画效果</a>处于<a
                        data-link-type="dfn" href="#animation-effect-active-phase"
                        id="ref-for-animation-effect-active-phase③">活动阶段</a>，且</p>
            <li data-md>
                <p><a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect④①">动画效果</a><a
                        data-link-type="dfn" href="#associated-with-an-animation"
                        id="ref-for-associated-with-an-animation④">与动画相关联</a>，且动画未处于<a data-link-type="dfn"
                        href="#play-state-finished" id="ref-for-play-state-finished①③">完成</a>状态。</p>
        </ol>
        <p>如果满足以下任何条件，则<a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect④②">动画效果</a>处于<dfn
                class="dfn-paneled" data-dfn-type="dfn" data-noexport id="current">当前</dfn>状态：</p>
        <ul>
            <li data-md>
                <p><a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect④③">动画效果</a>处于<a
                        data-link-type="dfn" href="#in-play" id="ref-for-in-play③">播放中</a>，或</p>
            <li data-md>
                <p><a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect④④">动画效果</a><a
                        data-link-type="dfn" href="#associated-with-an-animation"
                        id="ref-for-associated-with-an-animation⑤">与动画相关联</a>，且播放速率大于0，
                    且<span id="ref-for-animation-effect④⑤">动画效果</span>处于<a data-link-type="dfn"
                        href="#animation-effect-before-phase" id="ref-for-animation-effect-before-phase②">之前阶段</a>，或</p>
            <li data-md>
                <p><a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect④⑥">动画效果</a><a
                        data-link-type="dfn" href="#associated-with-an-animation"
                        id="ref-for-associated-with-an-animation⑥">与动画相关联</a>，且播放速率小于0，
                    且<span id="ref-for-animation-effect④⑦">动画效果</span>处于<a data-link-type="dfn"
                        href="#animation-effect-after-phase" id="ref-for-animation-effect-after-phase②">之后阶段</a>，或</p>
            <li data-md>
                <p><a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect④⑧">动画效果</a><a
                        data-link-type="dfn" href="#associated-with-an-animation"
                        id="ref-for-associated-with-an-animation⑦">与动画相关联</a>，且不处于<a data-link-type="dfn"
                        href="#play-state-idle" id="ref-for-play-state-idle⑤">空闲</a><a data-link-type="dfn"
                        href="#animation-play-state" id="ref-for-animation-play-state⑦">播放状态</a>，
                    且关联的时间线不为null且不单调增加。</p>
        </ul>
        <p>如果动画效果的<a data-link-type="dfn" href="#active-time" id="ref-for-active-time③">活动时间</a>未解析，则动画效果处于<dfn
                class="dfn-paneled" data-dfn-type="dfn" data-noexport id="in-effect">有效</dfn>状态，按<a
                href="#calculating-the-active-time">§ 4.8.3.1 计算活动时间</a>中的过程计算。</p>

        <h4 class="heading settled" data-level="4.5.6" id="relevant-animations-section"><span class="secno">4.5.6.
            </span><span class="content">相关动画</span><a class="self-link" href="#relevant-animations-section"></a></h4>
        <p>我们可以根据与其关联的<a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect④⑨">动画效果</a>，将一个<a
                data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation③⑨">动画</a>定义为<a
                data-link-type="dfn" href="#animation-relevant" id="ref-for-animation-relevant">相关</a>动画。</p>
        <p>如果满足以下条件，则一个<a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation④⓪">动画</a>是<dfn
                class="dfn-paneled" data-dfn-for="animation" data-dfn-type="dfn" data-export
                id="animation-relevant">相关</dfn>动画：</p>
        <ul>
            <li data-md>
                <p>其<a data-link-type="dfn" href="#animation-associated-effect"
                        id="ref-for-animation-associated-effect②④">关联的效果</a>是<a data-link-type="dfn" href="#current"
                        id="ref-for-current①">当前</a>或<a data-link-type="dfn" href="#in-effect"
                        id="ref-for-in-effect②">有效</a>状态，且</p>
            <li data-md>
                <p>其<a data-link-type="dfn" href="#replace-state" id="ref-for-replace-state">替换状态</a>不是<a
                        data-link-type="dfn" href="#removed-replace-state" id="ref-for-removed-replace-state">移除</a>状态。
                </p>
        </ul>
        <div class="algorithm" data-algorithm="get relevant animations">
            <p>元素或伪元素<var>target</var>的<dfn class="dfn-paneled" data-dfn-type="dfn" data-export
                    id="relevant-animations">相关动画</dfn>是包含至少一个其<a data-link-type="dfn"
                    href="#keyframe-effect-effect-target"
                    id="ref-for-keyframe-effect-effect-target">效果目标</a>为<var>target</var>的<a data-link-type="dfn"
                    href="#concept-animation" id="ref-for-concept-animation④①">动画</a>的集合。</p>
        </div>
        <div class="algorithm" data-algorithm="get relevant animations for a subtree">
            <p>元素、伪元素、<a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document"
                    id="ref-for-concept-document">文档</a>或<a data-link-type="dfn"
                    href="https://dom.spec.whatwg.org/#concept-shadow-root"
                    id="ref-for-concept-shadow-root">影子根</a><var>target</var>的子树的<dfn class="dfn-paneled"
                    data-dfn-type="dfn" data-export id="relevant-animations-for-a-subtree">相关动画</dfn>是包含至少一个其<a
                    data-link-type="dfn" href="#keyframe-effect-effect-target"
                    id="ref-for-keyframe-effect-effect-target①">效果目标</a>为<var>target</var>的<a data-link-type="dfn"
                    href="#concept-animation"
                    id="ref-for-concept-animation④②">动画</a>的集合，<var>target</var>是<var>target</var>或伪元素的<a
                    data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-tree-inclusive-descendant"
                    id="ref-for-concept-tree-inclusive-descendant">包含的后代</a>（如果<var>target</var>是一个<a
                    data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document"
                    id="ref-for-concept-document①">文档</a>或<a data-link-type="dfn"
                    href="https://dom.spec.whatwg.org/#concept-shadow-root"
                    id="ref-for-concept-shadow-root①">影子根</a>，则为<a data-link-type="dfn"
                    href="https://dom.spec.whatwg.org/#concept-tree-descendant"
                    id="ref-for-concept-tree-descendant">后代</a>）的集合。</p>
        </div>

        <h3 class="heading settled" data-level="4.6" id="fill-behavior"><span class="secno">4.6. </span><span
                class="content">填充行为</span><a class="self-link" href="#fill-behavior"></a></h3>
        <p>当<a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect⑤②">动画效果</a>不<a
                data-link-type="dfn" href="#in-play" id="ref-for-in-play④">在播放</a>时，其效果由其<dfn class="dfn-paneled"
                data-dfn-type="dfn" data-noexport id="fill-mode">填充模式</dfn>决定。</p>
        <p>可能的<a data-link-type="dfn" href="#fill-mode" id="ref-for-fill-mode②">填充模式</a>有：</p>
        <ul>
            <li data-md>
                <p>无，</p>
            <li data-md>
                <p>向前，</p>
            <li data-md>
                <p>向后，</p>
            <li data-md>
                <p>两者。</p>
        </ul>
        <p>这些模式的规范定义包含在<a data-link-type="dfn" href="#active-time" id="ref-for-active-time④">活动时间</a>的计算中，详见<a
                href="#calculating-the-active-time">§ 4.8.3.1 计算活动时间</a>。</p>
        <div class="advisement">
            <p> 建议作者避免使用<a data-link-type="dfn" href="#fill-mode" id="ref-for-fill-mode③">填充模式</a>来创建其效果被无限期应用的动画。<span
                    id="ref-for-fill-mode④">填充模式</span>的引入是为了表示CSS动画定义的<a class="property css" data-link-type="property"
                    href="https://www.w3.org/TR/css-animations-1/#propdef-animation-fill-mode"
                    id="ref-for-propdef-animation-fill-mode">animation-fill-mode</a>属性<a data-link-type="biblio"
                    href="#biblio-css-animations-1">[CSS-ANIMATIONS-1]</a>。然而，它们会导致动画状态无限期累积，从而需要根据<a
                    href="#replacing-animations">§ 5.5
                    替换动画</a>中定义的自动移除动画。此外，无限填充动画可能会在所有动画完成后很长时间内导致指定样式无效，因为动画样式在CSS级联中优先<a data-link-type="biblio"
                    href="#biblio-css-cascade-3">[css-cascade-3]</a>。</p>
            <p>在可能的情况下，作者应优先直接在指定样式中设置动画的最终状态。这可以通过等待动画完成后更新样式来实现，如下所示：</p>
            <div class="example" id="example-3cbeb1f1">
                <a class="self-link" href="#example-3cbeb1f1"></a>
                <pre class="lang-javascript highlight"><c- c1>// 在以下动画完成后的第一帧中，`finished`  promise 的回调函数会在样式更新之前运行，因此不会出现闪烁。</c->
elem<c- p>.</c->animate<c- p>({</c-> transform<c- o>:</c-> <c- t>'translateY(100px)'</c-> <c- p>},</c-> <c- mf>200</c-><c- p>).</c->finished<c- p>.</c->then<c- p>(()</c-> <c- p>=></c-> <c- p>{</c->
  elem<c- p>.</c->style<c- p>.</c->transform <c- o>=</c-> <c- t>'translateY(100px)'</c-><c- p>;</c->
<c- p>});</c-></pre>
            </div>
            <p>或者，作者可以在动画开始时设置指定样式，然后从原始值开始动画，如下所示：</p>
            <div class="example" id="example-fb96320c">
                <a class="self-link" href="#example-fb96320c"></a>
                <pre
                    class="lang-javascript highlight">elem<c- p>.</c->style<c- p>.</c->transform <c- o>=</c-> <c- t>'translateY(100px)'</c-><c- p>;</c->
elem<c- p>.</c->animate<c- p>({</c-> transform<c- o>:</c-> <c- t>'none'</c-><c- p>,</c-> offset<c- o>:</c-> <c- mf>0</c-> <c- p>},</c-> <c- mf>200</c-><c- p>);</c-></pre>
            </div>
            <p>涉及叠加多个动画的复杂效果可能需要临时使用向前填充模式，以捕获动画的最终值，然后取消它。例如：</p>
            <div class="example" id="example-8cd36716">
                <a class="self-link" href="#example-8cd36716"></a>
                <pre class="lang-javascript highlight">elem<c- p>.</c->addEventListener<c- p>(</c-><c- t>'click'</c-><c- p>,</c-> <c- k>async</c-> evt <c- p>=></c-> <c- p>{</c->
  <c- a>const</c-> animation <c- o>=</c-> elem<c- p>.</c->animate<c- p>(</c->
    <c- p>{</c-> transform<c- o>:</c-> <c- sb>`translate(</c-><c- si>${</c->evt<c- p>.</c->clientX<c- si>}</c-><c- sb>px, </c-><c- si>${</c->evt<c- p>.</c->clientY<c- si>}</c-><c- sb>px)`</c-> <c- p>},</c->
    <c- p>{</c-> duration<c- o>:</c-> <c- mf>800</c-><c- p>,</c-> fill<c- o>:</c-> <c- t>'forwards'</c-> <c- p>}</c-> 
  <c- p>);</c-> 
  <c- k>await</c-> animation<c- p>.</c->finished<c- p>;</c-> 
  <c- c1>// commitStyles 将记录包括 `animation` 在内的样式，并使用结果更新 elem 的指定样式。</c->
  animation<c- p>.</c->commitStyles<c- p>();</c-> 
  animation<c- p>.</c->cancel<c- p>();</c-> 
<c- p>});</c-></pre>
            </div>
        </div>

        <h4 class="heading settled" data-level="4.6.1" id="fill-modes"><span class="secno">4.6.1. </span><span
                class="content">填充模式</span><a class="self-link" href="#fill-modes"></a></h4>
        <div class="informative-bg">
            <em>本节为非规范性内容</em>
            <p>每种<a data-link-type="dfn" href="#fill-mode" id="ref-for-fill-mode⑤">填充模式</a>的效果如下：</p>
            <dl>
                <dt data-md>none
                <dd data-md>
                    <p>当动画效果不<a data-link-type="dfn" href="#in-play" id="ref-for-in-play⑤">在播放</a>时，它没有任何效果。</p>
                <dt data-md>forwards
                <dd data-md>
                    <p>当动画效果处于<a data-link-type="dfn" href="#animation-effect-after-phase"
                            id="ref-for-animation-effect-after-phase③">后阶段</a>时，
                        动画效果将产生与最后一次<a data-link-type="dfn" href="#in-play" id="ref-for-in-play⑥">播放中</a>时相同的<a
                            data-link-type="dfn" href="#iteration-progress" id="ref-for-iteration-progress">迭代进度</a>值。
                    </p>
                    <p>在动画效果不<a data-link-type="dfn" href="#in-play" id="ref-for-in-play⑦">在播放</a>的其他所有时间内，
                        它将不会产生任何效果。</p>
                <dt data-md>backwards
                <dd data-md>
                    <p>当动画效果处于<a data-link-type="dfn" href="#animation-effect-before-phase"
                            id="ref-for-animation-effect-before-phase③">前阶段</a>时，
                        动画效果将产生与最早一次<a data-link-type="dfn" href="#in-play" id="ref-for-in-play⑧">播放中</a>时相同的<a
                            data-link-type="dfn" href="#iteration-progress" id="ref-for-iteration-progress①">迭代进度</a>值。
                    </p>
                    <p>在动画效果不<a data-link-type="dfn" href="#in-play" id="ref-for-in-play⑨">在播放</a>的其他所有时间内，
                        它将不会产生任何效果。</p>
                <dt data-md>both
                <dd data-md>
                    <p>当动画效果处于<a data-link-type="dfn" href="#animation-effect-before-phase"
                            id="ref-for-animation-effect-before-phase④">前阶段</a>时，
                        使用<span class="prop-value">backwards</span>填充行为。</p>
                    <p>当动画效果处于<a data-link-type="dfn" href="#animation-effect-after-phase"
                            id="ref-for-animation-effect-after-phase④">后阶段</a>时，
                        使用<span class="prop-value">forwards</span>填充行为。</p>
            </dl>
            <p>以下插图展示了这些填充模式的一些示例。</p>
            <figure>
                <img alt="不同填充模式及其产生的状态示例。"
                    src="https://www.w3.org/TR/web-animations-1/images/animation-state-and-fill-behavior.svg"
                    width="600">
                <figcaption> 不同填充模式及其产生的状态示例。<br> (a) 填充模式“none”。动画效果在其活动阶段之外没有效果。<br> (b) 填充模式“forwards”。在活动阶段结束后，<a
                        data-link-type="dfn" href="#iteration-progress"
                        id="ref-for-iteration-progress②">迭代进度</a>值继续保持填充值。<br> (c)
                    填充模式“backwards”。动画效果在活动阶段开始之前产生填充值。<br> (d) 填充模式“both”。在活动阶段之前和之后，动画效果都产生填充值。</figcaption>
            </figure>
            <p class="note" role="note"><span>注意：</span>设置填充模式不会影响<a data-link-type="dfn" href="#active-interval"
                    id="ref-for-active-interval①②">活动区间</a>的端点或<a
                    href="#animation-effect-phases-and-states">阶段</a>之间的边界。
                但是，填充模式确实会影响时间模型的其他属性，因为动画效果的<a data-link-type="dfn" href="#active-time"
                    id="ref-for-active-time⑤">活动时间</a>仅在<a data-link-type="dfn" href="#animation-effect-active-phase"
                    id="ref-for-animation-effect-active-phase④">活动阶段</a>内<em>或</em>应用填充时被定义（即不是<a data-link-type="dfn"
                    href="#unresolved" id="ref-for-unresolved⑨⑥">未解决</a>）。</p>
        </div>

        <h3 class="heading settled" data-level="4.7" id="repeating"><span class="secno">4.7. </span><span
                class="content">重复</span><a class="self-link" href="#repeating"></a></h3>
        <h4 class="heading settled" data-level="4.7.1" id="iteration-intervals"><span class="secno">4.7.1. </span><span
                class="content">迭代区间</span><a class="self-link" href="#iteration-intervals"></a></h4>
        <p>可以指定动画效果重复一定次数或无限次。
            这种重复发生在<a data-link-type="dfn" href="#active-interval" id="ref-for-active-interval①③">活动区间</a>之内。
            单次重复发生的时间跨度称为<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="iteration-interval">迭代区间</dfn>。
        </p>
        <p>与<a data-link-type="dfn" href="#active-interval" id="ref-for-active-interval①④">活动区间</a>不同，动画效果可以有多个<a
                data-link-type="dfn" href="#iteration-interval" id="ref-for-iteration-interval">迭代区间</a>，尽管通常只有与<a
                data-link-type="dfn" href="#current-iteration" id="ref-for-current-iteration">当前迭代</a>对应的区间是关注的重点。</p>
        <p>单次迭代的时间长度称为<dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="iteration duration" data-noexport
                id="iteration-duration">迭代持续时间</dfn>。
            动画效果的初始<a data-link-type="dfn" href="#iteration-duration" id="ref-for-iteration-duration①">迭代持续时间</a>为零。</p>
        <div class="informative-bg">
            <em>本节为非规范性内容</em>
            <p>比较<a data-link-type="dfn" href="#iteration-duration" id="ref-for-iteration-duration②">迭代持续时间</a>和<a
                    data-link-type="dfn" href="#active-duration" id="ref-for-active-duration⑤">活动持续时间</a>：</p>
            <dl>
                <dt data-md>迭代持续时间
                <dd data-md>
                    <p>动画效果完成单次迭代所需的时间。</p>
                <dt data-md>活动持续时间
                <dd data-md>
                    <p>整个动画效果完成所需的时间，包括重复部分。
                        这可能比<a data-link-type="dfn" href="#iteration-duration"
                            id="ref-for-iteration-duration③">迭代持续时间</a>更长或更短。</p>
            </dl>
            <p>以下插图展示了<a data-link-type="dfn" href="#iteration-duration" id="ref-for-iteration-duration④">迭代持续时间</a>和<a
                    data-link-type="dfn" href="#active-duration" id="ref-for-active-duration⑥">活动持续时间</a>之间的关系。</p>
            <figure>
                <img alt="迭代持续时间与活动时间的比较。" src="https://www.w3.org/TR/web-animations-1/images/iteration-intervals.svg"
                    width="600">
                <figcaption> 一个将<a data-link-type="dfn" href="#iteration-duration"
                        id="ref-for-iteration-duration⑤">迭代持续时间</a>与<a data-link-type="dfn" href="#active-duration"
                        id="ref-for-active-duration⑦">活动持续时间</a>进行比较的示例，迭代次数为2.5。
                    注意，最后一次迭代的<span id="ref-for-iteration-duration⑥">迭代持续时间</span>并没有改变，只是被<span
                        id="ref-for-active-duration⑧">活动持续时间</span>截断了。
                </figcaption>
            </figure>
        </div>

        <h4 class="heading settled" data-level="4.7.2" id="controlling-iteration"><span class="secno">4.7.2.
            </span><span class="content">控制迭代</span><a class="self-link" href="#controlling-iteration"></a></h4>
        <p><a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect⑤③">动画效果</a>重复的次数称为其<dfn
                class="dfn-paneled" data-dfn-type="dfn" data-noexport id="iteration-count">迭代次数</dfn>。
            <a data-link-type="dfn" href="#iteration-count" id="ref-for-iteration-count①">迭代次数</a>是一个大于或等于零的实数。
            <span id="ref-for-iteration-count②">迭代次数</span>也可以是正无穷大，以表示<a data-link-type="dfn" href="#animation-effect"
                id="ref-for-animation-effect⑤④">动画效果</a>无限重复。
        </p>
        <p>除了<a data-link-type="dfn" href="#iteration-count" id="ref-for-iteration-count③">迭代次数</a>，<a
                data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect⑤⑤">动画效果</a>还具有<dfn
                class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="iteration-start">迭代开始</dfn>属性，用于指定动画效果应从一系列迭代中的哪个偏移位置开始。
            <a data-link-type="dfn" href="#iteration-start" id="ref-for-iteration-start">迭代开始</a>是一个大于或等于零的有限实数。
        </p>
        <p>这些参数的行为在<a href="#core-animation-effect-calculations">§ 4.8 核心动画效果计算</a>中定义。</p>
        <div class="informative-bg">
            <em>本节为非规范性内容</em>
            <p><a data-link-type="dfn" href="#iteration-count" id="ref-for-iteration-count④">迭代次数</a>和<a
                    data-link-type="dfn" href="#iteration-start" id="ref-for-iteration-start①">迭代开始</a>参数的效果如下图所示。</p>
            <figure>
                <img alt="迭代次数和迭代开始参数的效果"
                    src="https://www.w3.org/TR/web-animations-1/images/iteration-count-and-start.svg" width="600">
                <figcaption> <a data-link-type="dfn" href="#iteration-count" id="ref-for-iteration-count⑤">迭代次数</a>和<a
                        data-link-type="dfn" href="#iteration-start" id="ref-for-iteration-start②">迭代开始</a>参数的效果。<br>
                    第一个例子中，<span id="ref-for-iteration-count⑥">迭代次数</span>为2.5，导致第三次迭代在其<a data-link-type="dfn"
                        href="#iteration-interval" id="ref-for-iteration-interval①">迭代区间</a>的一半时被截断。<br>
                    第二个例子与第一个相同，但具有<span id="ref-for-iteration-start③">迭代开始</span>0.5。
                    这导致<a data-link-type="dfn" href="#animation-effect"
                        id="ref-for-animation-effect⑤⑦">动画效果</a>从第一次迭代的一半处开始。 </figcaption>
            </figure>
            <p>与<a data-link-type="dfn" href="#iteration-count" id="ref-for-iteration-count⑦">迭代次数</a>参数不同，<a
                    data-link-type="dfn" href="#iteration-start" id="ref-for-iteration-start④">迭代开始</a>参数不会影响<a
                    data-link-type="dfn" href="#active-duration" id="ref-for-active-duration⑨">活动持续时间</a>的长度。</p>
            <p>注意，<a data-link-type="dfn" href="#iteration-start"
                    id="ref-for-iteration-start⑤">迭代开始</a>值大于或等于1的情况通常没有用处，除非与具有<a data-link-type="dfn"
                    href="https://drafts.csswg.org/web-animations-2/#iteration-composite-operation"
                    id="ref-for-iteration-composite-operation">迭代复合操作</a>为<a data-link-type="dfn"
                    href="https://drafts.csswg.org/web-animations-2/#iteration-composite-operation-accumulate"
                    id="ref-for-iteration-composite-operation-accumulate">累加</a>的<a data-link-type="dfn"
                    href="#animation-effect" id="ref-for-animation-effect⑤⑧">动画效果</a>结合使用。</p>
        </div>
        <h4 class="heading settled" data-level="4.7.3" id="iteration-time-space"><span class="secno">4.7.3. </span><span
                class="content">迭代时间空间</span><a class="self-link" href="#iteration-time-space"></a></h4>
        <div class="informative-bg">
            <em>本节为非规范性内容</em>
            <p>在Web动画中，所有时间都是相对于某个参考点的。
                不同的参考点产生不同的<em>时间空间</em>。</p>
            <p>这可以与计算机图形学中使用的坐标空间进行比较。
                时间空间的零时刻类似于坐标空间的原点。</p>
            <p>我们可以描述重复的动画在每次动画重复时建立一个新的时间空间：<em>迭代时间空间</em>。</p>
            <p><em>迭代时间空间</em>是一个时间空间，其零时刻是动画效果当前迭代的开始。</p>
            <p>在Web动画模型中，我们还引用了<a data-link-type="dfn" href="#active-time"
                    id="ref-for-active-time⑥">活动时间</a>，它是相对于活动区间开始的时间。
                然而，这个时间空间是模型的内部内容，在编程接口或标记中并不公开。</p>
            <p>以下图例展示了这些时间空间。</p>
            <figure>
                <img alt="本地时间、活动时间和迭代时间的比较。" src="https://www.w3.org/TR/web-animations-1/images/time-spaces.svg"
                    width="600">
                <figcaption> 一个动画的本地时间、活动时间和迭代时间的比较，其迭代持续时间为1秒，迭代次数为2.5。 </figcaption>
            </figure>
            <p class="note" role="note"><span>注意：</span> 虽然时间空间本身是无限的，但Web动画定义了<a data-link-type="dfn"
                    href="#active-time" id="ref-for-active-time⑦">活动时间</a>和<a data-link-type="dfn"
                    href="#iteration-progress" id="ref-for-iteration-progress③">迭代进度</a>，使它们被限制在如图所示的范围内。
                例如，尽管-1秒的时间在<em>活动时间空间</em>中是有效时间，但在<a href="#calculating-the-active-time">§ 4.8.3.1 计算活动时间</a>中定义的计算<a
                    data-link-type="dfn" href="#active-time" id="ref-for-active-time⑧">活动时间</a>的过程将永远不会返回负值。</p>
            <p>除了这些时间空间，我们还可以引用<em>文档时间空间</em>，这是<a data-link-type="dfn" href="#document-default-document-timeline"
                    id="ref-for-document-default-document-timeline③">默认文档时间轴</a>的<a data-link-type="dfn"
                    href="#time-value" id="ref-for-time-value④⓪">时间值</a>的时间空间，该时间轴属于当前全局对象的<a data-link-type="idl"
                    href="https://html.spec.whatwg.org/#document" id="ref-for-document⑤">Document</a>。</p>
        </div>

        <h4 class="heading settled" data-level="4.7.4" id="interval-timing"><span class="secno">4.7.4. </span><span
                class="content">区间定时</span><a class="self-link" href="#interval-timing"></a></h4>
        <div class="informative-bg">
            <em>本节为非规范性内容</em>
            <p>当动画效果重复时，我们必须定义迭代边界上的行为。
                对于此行为，实际上对于所有区间定时，Web动画使用的是端点排他性定时模型。
                这意味着虽然区间的开始时间包含在区间内，但结束时间不包含在区间内。
                在区间表示法中，这可以写成<code>[begin, end)</code>。
                这种模型在区间重复和顺序排列时提供了合理的行为，因为区间之间没有重叠。</p>
            <p>在下图中，对于重复效果，在本地时间1秒时，迭代时间为0。
                对于顺序动画，在时间轴时间1秒时，只有动画B的<a data-link-type="dfn" href="#animation-associated-effect"
                    id="ref-for-animation-associated-effect②⑤">关联效果</a>会<a data-link-type="dfn" href="#in-play"
                    id="ref-for-in-play①⓪">在播放中</a>；边界之间没有重叠。
            </p>
            <figure>
                <img alt="端点排他性定时的示例。" src="https://www.w3.org/TR/web-animations-1/images/endpoint-exclusive-timing.svg"
                    width="600">
                <figcaption> 端点排他性定时的示例。对于重复和顺序动画效果，在区间边界之间没有重叠。 </figcaption>
            </figure>
            <p>这种行为的一个例外是，当执行<a href="#fill-behavior">填充</a>时，如果填充开始于区间端点，则使用该端点。
                此行为源自于<a href="#calculating-the-simple-iteration-progress">§ 4.8.3.3 计算简单迭代进度</a>中给出的算法，并在下图中进行了说明。</p>
            <figure>
                <img alt="迭代和填充对迭代时间的影响。"
                    src="https://www.w3.org/TR/web-animations-1/images/endpoint-exclusive-timing-and-fill.svg"
                    width="600">
                <figcaption> 在一次迭代后，<a data-link-type="dfn" href="#iteration-progress"
                        id="ref-for-iteration-progress④">迭代进度</a>为0，但在两次迭代后（以及之后），由于定义的动画效果填充的特殊行为，<span
                        id="ref-for-iteration-progress⑤">迭代进度</span>为1。 </figcaption>
            </figure>
        </div>

        <h3 class="heading settled" data-level="4.8" id="core-animation-effect-calculations"><span class="secno">4.8.
            </span><span class="content">核心动画效果计算</span><a class="self-link"
                href="#core-animation-effect-calculations"></a></h3>
        <h4 class="heading settled" data-level="4.8.1" id="animation-effect-calculations-overview"><span
                class="secno">4.8.1. </span><span class="content">概述</span><a class="self-link"
                href="#animation-effect-calculations-overview"></a></h4>
        <div class="informative-bg">
            <em>本节为非规范性内容</em>
            <p>Web动画定时模型的核心是将<a data-link-type="dfn" href="#local-time" id="ref-for-local-time①①">本地时间</a>值转换为<a
                    data-link-type="dfn" href="#iteration-progress" id="ref-for-iteration-progress⑥">迭代进度</a>的过程。</p>
            <p>此过程的第一步是计算由<a data-link-type="dfn" href="#active-duration" id="ref-for-active-duration①⓪">活动持续时间</a>决定的<a
                    data-link-type="dfn" href="#active-interval" id="ref-for-active-interval①⑤">活动区间</a>的边界。</p>
            <p>此过程如下图所示。</p>
            <figure>
                <img alt="活动持续时间的计算。"
                    src="https://www.w3.org/TR/web-animations-1/images/active-duration-calculation.svg" width="650">
                <figcaption> 活动持续时间<a data-link-type="dfn" href="#active-duration"
                        id="ref-for-active-duration①①">的计算</a>基于将<a data-link-type="dfn" href="#iteration-duration"
                        id="ref-for-iteration-duration⑦">迭代持续时间</a>乘以<a data-link-type="dfn" href="#iteration-count"
                        id="ref-for-iteration-count⑧">迭代次数</a>。 </figcaption>
            </figure>
            <p> 活动持续时间<a data-link-type="dfn" href="#active-duration" id="ref-for-active-duration①②">的计算</a>在<a
                    href="#calculating-the-active-duration">§ 4.8.2 计算活动持续时间</a>中有规范性定义。 </p>
            <p> 在确定了活动持续时间<a data-link-type="dfn" href="#active-duration" id="ref-for-active-duration①③">后</a>，将<a
                    data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect⑤⑨">动画效果</a>的<a
                    data-link-type="dfn" href="#local-time" id="ref-for-local-time①②">本地时间</a>转换为<a data-link-type="dfn"
                    href="#transformed-progress" id="ref-for-transformed-progress">转换进度</a>（即<a data-link-type="dfn"
                    href="#iteration-progress" id="ref-for-iteration-progress⑦">迭代进度</a>）的过程如下图所示。 </p>
            <figure>
                <img alt="定时模型计算概览。" src="https://www.w3.org/TR/web-animations-1/images/time-calculations.svg"
                    width="650">
                <figcaption> 定时模型计算概览。<br> (1) <a data-link-type="dfn" href="#local-time"
                        id="ref-for-local-time①③">本地时间</a>由关联的<a data-link-type="dfn" href="#concept-animation"
                        id="ref-for-concept-animation④③">动画</a>确定。<br> (2) <span
                        id="ref-for-local-time①④">本地时间</span>通过结合<a data-link-type="dfn" href="#start-delay"
                        id="ref-for-start-delay①①">开始延迟</a>转换为<a data-link-type="dfn" href="#active-time"
                        id="ref-for-active-time⑨">活动时间</a>。<br> (3) <span id="ref-for-active-time①⓪">活动时间</span>通过结合<a
                        data-link-type="dfn" href="#iteration-duration" id="ref-for-iteration-duration⑧">迭代持续时间</a>和<a
                        data-link-type="dfn" href="#iteration-start" id="ref-for-iteration-start⑥">迭代开始</a>属性分割以产生<a
                        data-link-type="dfn" href="#overall-progress" id="ref-for-overall-progress">整体进度</a>。<br> (4)
                    然后，将<span id="ref-for-overall-progress①">整体进度</span>时间转换为单个迭代内的偏移量：<a data-link-type="dfn"
                        href="#simple-iteration-progress" id="ref-for-simple-iteration-progress">简单迭代进度</a>。<br> (5)
                    <span id="ref-for-simple-iteration-progress①">简单迭代进度</span>通过结合<a data-link-type="dfn"
                        href="#playback-direction" id="ref-for-playback-direction">播放方向</a>转换为<a data-link-type="dfn"
                        href="#directed-progress" id="ref-for-directed-progress">定向进度</a>。<br> (6) 最后，将定时函数应用于<span
                        id="ref-for-directed-progress①">定向进度</span>以产生<a data-link-type="dfn"
                        href="#transformed-progress" id="ref-for-transformed-progress①">转换进度</a>。
                </figcaption>
            </figure>
            <p> 第一步，计算<a data-link-type="dfn" href="#local-time" id="ref-for-local-time①⑤">本地时间</a>在<a
                    href="#local-time-section">§ 4.5.4 本地时间</a>中描述。
                图中的第2至4步在以下各节中描述。
                第5和第6步分别在<a href="#calculating-the-directed-progress">§ 4.9.1 计算定向进度</a>和<a
                    href="#calculating-the-transformed-progress">§ 4.10.1 计算转换进度</a>中描述。</p>
        </div>

        <h4 class="heading settled" data-level="4.8.2" id="calculating-the-active-duration"><span class="secno">4.8.2.
            </span><span class="content">计算活动持续时间</span><a class="self-link"
                href="#calculating-the-active-duration"></a></h4>
        <p><a data-link-type="dfn" href="#active-duration" id="ref-for-active-duration①④">活动持续时间</a>的计算如下：</p>
        <blockquote>
            <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="active-duration">活动持续时间</dfn> =
            <code><a data-link-type="dfn" href="#iteration-duration" id="ref-for-iteration-duration⑨">迭代持续时间</a> × <a data-link-type="dfn" href="#iteration-count" id="ref-for-iteration-count⑨">迭代次数</a></code>
            <p> 如果<a data-link-type="dfn" href="#iteration-duration" id="ref-for-iteration-duration①⓪">迭代持续时间</a>或<a
                    data-link-type="dfn" href="#iteration-count" id="ref-for-iteration-count①⓪">迭代次数</a>为零，那么<a
                    data-link-type="dfn" href="#active-duration" id="ref-for-active-duration①⑤">活动持续时间</a>也为零。 </p>
            <p class="note" role="note"> 这一说明是必要的，因为根据IEEE 754-2008，零乘以无穷大的结果是未定义的。 </p>
        </blockquote>
        <h4 class="heading settled" data-level="4.8.3" id="transforming-the-local-time"><span class="secno">4.8.3.
            </span><span class="content">转换本地时间</span><a class="self-link" href="#transforming-the-local-time"></a></h4>
        <h5 class="heading settled" data-level="4.8.3.1" id="calculating-the-active-time"><span class="secno">4.8.3.1.
            </span><span class="content">计算活动时间</span><a class="self-link" href="#calculating-the-active-time"></a></h5>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="active-time">活动时间</dfn>基于<a
                data-link-type="dfn" href="#local-time" id="ref-for-local-time①⑥">本地时间</a>和<a data-link-type="dfn"
                href="#start-delay" id="ref-for-start-delay①②">开始延迟</a>。
            然而，它只有在<a data-link-type="dfn" href="#animation-effect"
                id="ref-for-animation-effect⑥⓪">动画效果</a>应该产生输出时才定义，因此它依赖于<a data-link-type="dfn" href="#fill-mode"
                id="ref-for-fill-mode⑥">填充模式</a>和以下各阶段：</p>
        <div class="switch">
            <dl>
                <dt data-md>如果动画效果处于<a data-link-type="dfn" href="#animation-effect-before-phase"
                        id="ref-for-animation-effect-before-phase⑤">前置阶段</a>，
                <dd data-md>
                    <p>结果取决于以下第一个匹配条件：</p>
                    <div class="switch">
                        <dl>
                            <dt data-md>如果<a data-link-type="dfn" href="#fill-mode"
                                    id="ref-for-fill-mode⑦">填充模式</a>为<span class="prop-mode">backwards</span>或<span
                                    class="prop-mode">both</span>，
                            <dd data-md>
                                <p>返回以下计算结果：
                                    <code>max(<a data-link-type="dfn" href="#local-time" id="ref-for-local-time①⑦">本地时间</a> - <a data-link-type="dfn" href="#start-delay" id="ref-for-start-delay①③">开始延迟</a>, 0)</code>。
                                </p>
                            <dt data-md>否则，
                            <dd data-md>
                                <p>返回<a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved⑨⑦">未解析的</a><a
                                        data-link-type="dfn" href="#time-value" id="ref-for-time-value④①">时间值</a>。</p>
                        </dl>
                    </div>
                <dt data-md>如果动画效果处于<a data-link-type="dfn" href="#animation-effect-active-phase"
                        id="ref-for-animation-effect-active-phase⑤">活动阶段</a>，
                <dd data-md>
                    <p>返回以下计算结果：
                        <code><a data-link-type="dfn" href="#local-time" id="ref-for-local-time①⑧">本地时间</a> - <a data-link-type="dfn" href="#start-delay" id="ref-for-start-delay①④">开始延迟</a></code>。
                    </p>
                <dt data-md>如果动画效果处于<a data-link-type="dfn" href="#animation-effect-after-phase"
                        id="ref-for-animation-effect-after-phase⑤">后置阶段</a>，
                <dd data-md>
                    <p>结果取决于以下第一个匹配条件：</p>
                    <div class="switch">
                        <dl>
                            <dt data-md>如果<a data-link-type="dfn" href="#fill-mode"
                                    id="ref-for-fill-mode⑧">填充模式</a>为<span class="prop-mode">forwards</span>或<span
                                    class="prop-mode">both</span>，
                            <dd data-md>
                                <p>返回以下计算结果：<code>max(min(<a data-link-type="dfn" href="#local-time" id="ref-for-local-time①⑨">本地时间</a> - <a data-link-type="dfn" href="#start-delay" id="ref-for-start-delay①⑤">开始延迟</a>, <a data-link-type="dfn" href="#active-duration" id="ref-for-active-duration①⑥">活动持续时间</a>),
          0)</code>。</p>
                            <dt data-md>否则，
                            <dd data-md>
                                <p>返回<a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved⑨⑧">未解析的</a><a
                                        data-link-type="dfn" href="#time-value" id="ref-for-time-value④②">时间值</a>。</p>
                        </dl>
                    </div>
                <dt data-md>否则（<a data-link-type="dfn" href="#local-time" id="ref-for-local-time②⓪">本地时间</a>为<a
                        data-link-type="dfn" href="#unresolved" id="ref-for-unresolved⑨⑨">未解析</a>），
                <dd data-md>
                    <p>返回<a data-link-type="dfn" href="#unresolved" id="ref-for-unresolved①⓪⓪">未解析的</a><a
                            data-link-type="dfn" href="#time-value" id="ref-for-time-value④③">时间值</a>。</p>
            </dl>
        </div>

        <h5 class="heading settled" data-level="4.8.3.2" id="calculating-the-overall-progress"><span
                class="secno">4.8.3.2. </span><span class="content">计算整体进度</span><a class="self-link"
                href="#calculating-the-overall-progress"></a></h5>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="overall-progress">整体进度</dfn>
            描述了已完成的迭代次数（包括部分迭代），其定义如下：</p>
        <ol>
            <li data-md>
                <p>如果<a data-link-type="dfn" href="#active-time" id="ref-for-active-time①①">活动时间</a>是<a
                        data-link-type="dfn" href="#unresolved" id="ref-for-unresolved①⓪①">未解析的</a>，则返回<span
                        id="ref-for-unresolved①⓪②">未解析</span>。</p>
            <li data-md>
                <p>根据以下第一个匹配条件计算<var>整体进度</var>的初始值，</p>
                <div class="switch">
                    <dl>
                        <dt data-md>如果<a data-link-type="dfn" href="#iteration-duration"
                                id="ref-for-iteration-duration①①">迭代持续时间</a>为零，
                        <dd data-md>
                            <p>如果动画效果处于<a data-link-type="dfn" href="#animation-effect-before-phase"
                                    id="ref-for-animation-effect-before-phase⑥">前置阶段</a>，则<var>整体进度</var>为零，否则，为<a
                                    data-link-type="dfn" href="#iteration-count"
                                    id="ref-for-iteration-count①①">迭代次数</a>。</p>
                        <dt data-md>否则，
                        <dd data-md>
                            <p>令<var>整体进度</var>等于以下计算结果
                                <code><a data-link-type="dfn" href="#active-time" id="ref-for-active-time①②">活动时间</a> / <a data-link-type="dfn" href="#iteration-duration" id="ref-for-iteration-duration①②">迭代持续时间</a></code>。
                            </p>
                    </dl>
                </div>
            <li data-md>
                <p>返回以下计算结果
                    <code><var>整体进度</var> + <a data-link-type="dfn" href="#iteration-start" id="ref-for-iteration-start⑦">迭代起始点</a></code>。
                </p>
        </ol>
        <h5 class="heading settled" data-level="4.8.3.3" id="calculating-the-simple-iteration-progress"><span
                class="secno">4.8.3.3. </span><span class="content">计算简单迭代进度</span><a class="self-link"
                href="#calculating-the-simple-iteration-progress"></a></h5>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="simple-iteration-progress">简单迭代进度</dfn>是当前迭代的进度百分比，
            忽略<a data-link-type="dfn" href="#playback-direction" id="ref-for-playback-direction①">播放方向</a>或应用于效果的<a
                data-link-type="dfn" href="https://www.w3.org/TR/css-easing-1/#easing-function"
                id="ref-for-easing-function">时间函数</a>引入的时间变换，其计算方法如下：</p>
        <ol>
            <li data-md>
                <p>如果<a data-link-type="dfn" href="#overall-progress" id="ref-for-overall-progress②">整体进度</a>是<a
                        data-link-type="dfn" href="#unresolved" id="ref-for-unresolved①⓪③">未解析的</a>，
                    返回<span id="ref-for-unresolved①⓪④">未解析</span>。</p>
            <li data-md>
                <p>如果<a data-link-type="dfn" href="#overall-progress"
                        id="ref-for-overall-progress③">整体进度</a>是无穷大，令<var>简单迭代进度</var>等于
                    <code><a data-link-type="dfn" href="#iteration-start" id="ref-for-iteration-start⑧">迭代起始点</a> % 1.0</code>，
                    否则，令<var>简单迭代进度</var>等于
                    <code><a data-link-type="dfn" href="#overall-progress" id="ref-for-overall-progress④">整体进度</a> % 1.0</code>。
                </p>
            <li data-md>
                <p>如果<em>所有</em>以下条件为真，</p>
                <ul>
                    <li data-md>
                        <p>上述计算出的<var>简单迭代进度</var>为零，<em>并且</em></p>
                    <li data-md>
                        <p>动画效果处于<a data-link-type="dfn" href="#animation-effect-active-phase"
                                id="ref-for-animation-effect-active-phase⑥">活动阶段</a> <em>或</em> <a data-link-type="dfn"
                                href="#animation-effect-after-phase"
                                id="ref-for-animation-effect-after-phase⑥">后置阶段</a>，<em>并且</em></p>
                    <li data-md>
                        <p><a data-link-type="dfn" href="#active-time" id="ref-for-active-time①③">活动时间</a>等于<a
                                data-link-type="dfn" href="#active-duration"
                                id="ref-for-active-duration①⑦">活动持续时间</a>，<em>并且</em></p>
                    <li data-md>
                        <p><a data-link-type="dfn" href="#iteration-count" id="ref-for-iteration-count①②">迭代次数</a>
                            <em>不</em>等于零。
                        </p>
                </ul>
                <p>令<var>简单迭代进度</var>为1.0。</p>
                <div class="note" role="note">
                    <p>上述步骤实现了这样一种行为：当动画的活动区间恰好在迭代结束时结束时，它通过保持最后一次迭代的端点而不是下一次迭代的开始点来填充。</p>
                    <p>最后一个条件防止在迭代次数为零的情况下应用此行为，因为动画从未播放任何迭代。</p>
                </div>
            <li data-md>
                <p>返回<var>简单迭代进度</var>。</p>
        </ol>

        <h4 class="heading settled" data-level="4.8.4" id="calculating-the-current-iteration"><span class="secno">4.8.4.
            </span><span class="content">计算当前迭代</span><a class="self-link"
                href="#calculating-the-current-iteration"></a></h4>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="current-iteration">当前迭代</dfn>
            可以通过以下步骤计算：</p>
        <ol>
            <li data-md>
                <p>如果<a data-link-type="dfn" href="#active-time" id="ref-for-active-time①④">活动时间</a>是<a
                        data-link-type="dfn" href="#unresolved" id="ref-for-unresolved①⓪⑤">未解析的</a>，返回<span
                        id="ref-for-unresolved①⓪⑥">未解析</span>。</p>
            <li data-md>
                <p>如果动画效果处于<a data-link-type="dfn" href="#animation-effect-after-phase"
                        id="ref-for-animation-effect-after-phase⑦">后置阶段</a><em>且</em><a data-link-type="dfn"
                        href="#iteration-count" id="ref-for-iteration-count①④">迭代次数</a>
                    为无穷大，返回无穷大。</p>
            <li data-md>
                <p>如果<a data-link-type="dfn" href="#simple-iteration-progress"
                        id="ref-for-simple-iteration-progress②">简单迭代进度</a>为1.0，
                    返回
                    <code>floor(<a data-link-type="dfn" href="#overall-progress" id="ref-for-overall-progress⑤">整体进度</a>) - 1</code>。
                </p>
            <li data-md>
                <p>否则，返回
                    <code>floor(<a data-link-type="dfn" href="#overall-progress" id="ref-for-overall-progress⑥">整体进度</a>)</code>。
                </p>
        </ol>
        <h3 class="heading settled" data-level="4.9" id="direction-control"><span class="secno">4.9. </span><span
                class="content">方向控制</span><a class="self-link" href="#direction-control"></a></h3>
        <p><a data-link-type="dfn" href="#animation-effect"
                id="ref-for-animation-effect⑥①">动画效果</a>还可以通过方向控制来配置以不同方向运行迭代。
            为此，<span id="ref-for-animation-effect⑥②">动画效果</span>具有一个<dfn class="dfn-paneled" data-dfn-type="dfn"
                data-lt="playback direction" data-noexport id="playback-direction">播放方向</dfn>参数，该参数取以下值之一：</p>
        <ul>
            <li data-md>
                <p>正常（normal），</p>
            <li data-md>
                <p>反向（reverse），</p>
            <li data-md>
                <p>交替（alternate），或</p>
            <li data-md>
                <p>交替反向（alternate-reverse）。</p>
        </ul>
        <p>这些值的语义被纳入到随后对<a data-link-type="dfn" href="#directed-progress" id="ref-for-directed-progress②">定向进度</a>的计算中。
        </p>
        <div class="informative-bg">
            <em>本节为非规范性内容</em>
            <p>这些值的非规范性定义如下：</p>
            <dl>
                <dt data-md>正常（normal）
                <dd data-md>
                    <p>所有迭代按指定方式播放。</p>
                <dt data-md>反向（reverse）
                <dd data-md>
                    <p>所有迭代按与指定方式相反的方向播放。</p>
                <dt data-md>交替（alternate）
                <dd data-md>
                    <p>偶数迭代按指定方式播放，奇数迭代按与指定方式相反的方向播放。</p>
                <dt data-md>交替反向（alternate-reverse）
                <dd data-md>
                    <p>偶数迭代按与指定方式相反的方向播放，奇数迭代按指定方式播放。</p>
            </dl>
        </div>

        <h4 class="heading settled" data-level="4.9.1" id="calculating-the-directed-progress"><span class="secno">4.9.1.
            </span><span class="content">计算定向进度</span><a class="self-link"
                href="#calculating-the-directed-progress"></a></h4>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="directed-progress">定向进度</dfn>
            通过以下步骤从<a data-link-type="dfn" href="#simple-iteration-progress"
                id="ref-for-simple-iteration-progress③">简单迭代进度</a>计算得出：</p>
        <ol>
            <li data-md>
                <p>如果<a data-link-type="dfn" href="#simple-iteration-progress"
                        id="ref-for-simple-iteration-progress④">简单迭代进度</a>是<a data-link-type="dfn" href="#unresolved"
                        id="ref-for-unresolved①⓪⑦">未解析的</a>，返回<span id="ref-for-unresolved①⓪⑧">未解析</span>。</p>
            <li data-md>
                <p>使用以下列表中的第一个匹配条件计算<var>当前方向</var>：</p>
                <div class="switch">
                    <dl>
                        <dt data-md>如果<a data-link-type="dfn" href="#playback-direction"
                                id="ref-for-playback-direction②">播放方向</a>为<code>normal</code>，
                        <dd data-md>
                            <p>令<var>当前方向</var>为正向。</p>
                        <dt data-md>如果<a data-link-type="dfn" href="#playback-direction"
                                id="ref-for-playback-direction③">播放方向</a>为<code>reverse</code>，
                        <dd data-md>
                            <p>令<var>当前方向</var>为反向。</p>
                        <dt data-md>否则，
                        <dd data-md>
                            <ol>
                                <li data-md>
                                    <p>令<var>d</var>为<a data-link-type="dfn" href="#current-iteration"
                                            id="ref-for-current-iteration①">当前迭代</a>。</p>
                                <li data-md>
                                    <p>如果<a data-link-type="dfn" href="#playback-direction"
                                            id="ref-for-playback-direction④">播放方向</a>为
                                        <code>alternate-reverse</code>，则将<var>d</var>加1。
                                    </p>
                                <li data-md>
                                    <p>如果<code><var>d</var> % 2 == 0</code>，令<var>当前方向</var>为正向，否则令
                                        <var>当前方向</var>为反向。
                                        如果<var>d</var>为无穷大，令<var>当前方向</var>为正向。
                                    </p>
                            </ol>
                    </dl>
                </div>
            <li data-md>
                <p>如果<var>当前方向</var>为正向，则返回
                    <a data-link-type="dfn" href="#simple-iteration-progress"
                        id="ref-for-simple-iteration-progress⑤">简单迭代进度</a>。
                </p>
                <p>否则，返回
                    <code>1.0 - <a data-link-type="dfn" href="#simple-iteration-progress" id="ref-for-simple-iteration-progress⑥">简单迭代进度</a></code>。
                </p>
        </ol>
        <h3 class="heading settled" data-level="4.10" id="time-transformations"><span class="secno">4.10. </span><span
                class="content">时间变换</span><a class="self-link" href="#time-transformations"></a></h3>
        <p>通常需要控制<a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect⑥③">动画效果</a>的进展速度。
            例如，通过缓动动画速度可以创造出动量感并产生更自然的效果。
            CSS 缓动函数模块<a data-link-type="biblio" href="#biblio-css-easing-1">[CSS-EASING-1]</a>
            定义了用于此目的的<a data-link-type="dfn" href="https://www.w3.org/TR/css-easing-1/#easing-function"
                id="ref-for-easing-function①">缓动函数</a>。</p>
        <p><a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect⑥④">动画效果</a>关联有一个
            <a data-link-type="dfn" href="https://www.w3.org/TR/css-easing-1/#easing-function"
                id="ref-for-easing-function②">缓动函数</a>。
            默认的<span id="ref-for-easing-function③">缓动函数</span>是<a data-link-type="dfn"
                href="https://www.w3.org/TR/css-easing-1/#linear-easing-function"
                id="ref-for-linear-easing-function">线性缓动函数</a>。
        </p>
        <h4 class="heading settled" data-level="4.10.1" id="calculating-the-transformed-progress"><span
                class="secno">4.10.1. </span><span class="content">计算变换进度</span><a class="self-link"
                href="#calculating-the-transformed-progress"></a></h4>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="transformed-progress">变换进度</dfn>
            通过以下步骤从<a data-link-type="dfn" href="#directed-progress" id="ref-for-directed-progress③">定向进度</a>计算得出：</p>
        <ol>
            <li data-md>
                <p>如果<a data-link-type="dfn" href="#directed-progress" id="ref-for-directed-progress④">定向进度</a>是<a
                        data-link-type="dfn" href="#unresolved" id="ref-for-unresolved①⓪⑨">未解析的</a>，
                    返回<span id="ref-for-unresolved①①⓪">未解析</span>。</p>
            <li data-md>
                <p>按以下步骤计算<var>之前标志</var>的值：</p>
                <ol>
                    <li data-md>
                        <p>使用<a href="#calculating-the-directed-progress">§ 4.9.1 计算定向进度</a>中定义的过程确定<var>当前方向</var>。</p>
                    <li data-md>
                        <p>如果<var>当前方向</var>为<span class="prop-value">正向</span>，则<var>前进中</var>为真，否则为假。</p>
                    <li data-md>
                        <p>如果动画效果处于<a data-link-type="dfn" href="#animation-effect-before-phase"
                                id="ref-for-animation-effect-before-phase⑦">前置阶段</a>且<var>前进中</var>为真；或
                            如果动画效果处于<a data-link-type="dfn" href="#animation-effect-after-phase"
                                id="ref-for-animation-effect-after-phase⑧">后置阶段</a>且<var>前进中</var>为假，则设置<var>之前标志</var>。
                        </p>
                </ol>
            <li data-md>
                <p>返回评估<a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect⑥⑤">动画效果</a>的<a
                        data-link-type="dfn" href="https://www.w3.org/TR/css-easing-1/#easing-function"
                        id="ref-for-easing-function④">缓动函数</a>的结果，
                    传递<a data-link-type="dfn" href="#directed-progress" id="ref-for-directed-progress⑤">定向进度</a>作为<a
                        data-link-type="dfn" href="https://www.w3.org/TR/css-easing-1/#input-progress-value"
                        id="ref-for-input-progress-value">输入进度值</a>，并传递<var>之前标志</var>作为<a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-easing-1/#before-flag" id="ref-for-before-flag">之前标志</a>。</p>
        </ol>
        <h3 class="heading settled" data-level="4.11" id="the-iteration-progress"><span class="secno">4.11. </span><span
                class="content">迭代进度</span><a class="self-link" href="#the-iteration-progress"></a>
        </h3>
        <p><a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect⑥⑥">动画效果</a>的<dfn
                class="dfn-paneled" data-dfn-type="dfn" data-noexport id="iteration-progress">迭代进度</dfn>
            就是其<a data-link-type="dfn" href="#transformed-progress" id="ref-for-transformed-progress②">变换进度</a>。
        </p>

        <h2 class="heading settled" data-level="5" id="animation-model"><span class="secno">5. </span><span
                class="content">动画模型</span><a class="self-link" href="#animation-model"></a></h2>
        <div class="informative-bg">
            <em>本节为非规范性内容</em>
            <p>对于某些类型的<a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect⑥⑦">动画效果</a>，Web
                动画<em>动画模型</em>会采用<em>时间模型</em>生成的<a data-link-type="dfn" href="#iteration-progress"
                    id="ref-for-iteration-progress⑧">迭代进度</a>和<a data-link-type="dfn" href="#current-iteration"
                    id="ref-for-current-iteration②">当前迭代</a>值，并使用这些值来计算相应的输出。</p>
            <p>每个这样的动画效果的输出会通过<a data-link-type="dfn" href="#effect-stack"
                    id="ref-for-effect-stack">效果栈</a>与其他效果的输出结合，然后应用到目标属性上（参见<a href="#combining-effects">§ 5.4
                    结合效果</a>）。</p>
        </div>
        <h3 class="heading settled" data-level="5.1" id="introduction-to-the-animation-model"><span class="secno">5.1.
            </span><span class="content">简介</span><a class="self-link" href="#introduction-to-the-animation-model"></a>
        </h3>
        <p>一个<a data-link-type="dfn" href="#animation-effect"
                id="ref-for-animation-effect⑥⑧">动画效果</a>有零个或多个与之关联的属性，这些属性会响应其时间输出的变化而受到影响。这些属性被称为效果的<dfn
                class="dfn-paneled" data-dfn-type="dfn" data-lt="target property" data-noexport
                id="target-property">目标属性</dfn>。</p>
        <p>给定一个<a data-link-type="dfn" href="#iteration-progress" id="ref-for-iteration-progress⑨">迭代进度</a>、<a
                data-link-type="dfn" href="#current-iteration" id="ref-for-current-iteration③">当前迭代</a>和一个<a
                data-link-type="dfn" href="#underlying-value" id="ref-for-underlying-value">基础值</a>，一个<a
                data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect⑥⑨">动画效果</a>会通过应用适用于该属性的<a
                data-link-type="dfn" href="#animation-type" id="ref-for-animation-type">动画类型</a>的程序来为每个<a
                data-link-type="dfn" href="#concept-animatable" id="ref-for-concept-animatable">可动画的</a> <a
                data-link-type="dfn" href="#target-property" id="ref-for-target-property">目标属性</a>生成一个<dfn
                class="dfn-paneled" data-dfn-type="dfn" data-noexport id="effect-value">效果值</dfn>。
        </p>

        <h3 class="heading settled" data-level="5.2" id="animating-properties"><span class="secno">5.2. </span><span
                class="content">动画属性</span><a class="self-link" href="#animating-properties"></a></h3>
        <p>除非另有说明，否则所有 CSS 属性都是<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="concept-animatable">可动画的</dfn>。
            每个属性的属性定义表中通过<dfn class="dfn-paneled" data-dfn-type="dfn" data-export
                id="animation-type">动画类型</dfn>行定义了属性值如何组合：</p>
        <dl>
            <dt><dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="not-animatable">不可动画</dfn>
            <dd>
                该属性不可动画。
                在动画关键帧中列出时不会处理，
                并且不会受过渡效果影响。
                <p class="note" role="note"><span>注意：</span>属性通常被排除在动画之外，
                    因为对其进行动画处理会导致过于复杂的情况。
                    例如，定义动画参数的属性是<a data-link-type="dfn" href="#not-animatable" id="ref-for-not-animatable">不可动画</a>的，
                    因为这样做会导致复杂的递归行为。</p>
                <p class="note" role="note"><span>注意：</span>仅针对<a data-link-type="dfn" href="#not-animatable"
                        id="ref-for-not-animatable①">不可动画</a>属性的<a data-link-type="dfn" href="#animation-effect"
                        id="ref-for-animation-effect⑦⓪">动画效果</a>仍然会表现出通常的<a data-link-type="dfn"
                        href="#animation-effect" id="ref-for-animation-effect⑦①">动画效果</a>行为，例如触发事件和
                    延迟<a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation④④">动画</a>的<a
                        data-link-type="dfn" href="#current-finished-promise"
                        id="ref-for-current-finished-promise①①">当前完成的 promise</a>的实现。</p>
            <dt><dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="discrete">离散的</dfn>
            <dd>
                该属性的值无法有意义地组合，
                因此它是<a data-link-type="dfn" href="https://www.w3.org/TR/css-values-4/#not-additive"
                    id="ref-for-not-additive">不可加的</a>，<a data-link-type="dfn"
                    href="https://www.w3.org/TR/css-values-4/#interpolation" id="ref-for-interpolation">插值</a>在 50%
                时从<var>V<sub>a</sub></var>切换到<var>V<sub>b</sub></var>，即
                <div class="formula" role="math">
                    <math xmlns="http://www.w3.org/1998/Math/MathML">
                        <msub>
                            <mi>V</mi>
                            <mn>result</mn>
                        </msub>
                        <mo>=</mo>
                        <mrow>
                            <mfenced close open="{">
                                <mtable>
                                    <mtr>
                                        <mtd columnalign="left">
                                            <msub>
                                                <mi>V</mi>
                                                <mn>start</mn>
                                            </msub>
                                        </mtd>
                                        <mtd columnalign="left">
                                            <mtext>当 </mtext>
                                            <mi>p</mi>
                                            <mo>&lt;</mo>
                                            <mn>0.5</mn>
                                        </mtd>
                                    </mtr>
                                    <mtr>
                                        <mtd columnalign="left">
                                            <msub>
                                                <mi>V</mi>
                                                <mn>end</mn>
                                            </msub>
                                        </mtd>
                                        <mtd columnalign="left">
                                            <mtext>当 </mtext>
                                            <mi>p</mi>
                                            <mo>≥</mo>
                                            <mn>0.5</mn>
                                        </mtd>
                                    </mtr>
                                </mtable>
                            </mfenced>
                        </mrow>
                    </math>
                </div>
            <dt><dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="by-computed-value">按计算值</dfn>
            <dd> 相应的<a data-link-type="dfn" href="https://www.w3.org/TR/css-cascade-5/#computed-value"
                    id="ref-for-computed-value">计算值</a>组件根据该值类型
                使用指示的过程进行组合（插值、添加或累积）
                （参见<a href="https://www.w3.org/TR/css-values-4/#combining-values"><cite>CSS Values 4</cite> § 3
                    组合值：插值、添加和累积</a>）。
                如果组件数量或相应组件的类型不匹配，
                或者如果任何组件值使用<a data-link-type="dfn" href="#discrete" id="ref-for-discrete">离散的</a>动画，
                并且两个对应的值不匹配，
                那么属性值将按<span id="ref-for-discrete①">离散的</span>方式组合。
            <dt><dfn data-dfn-type="dfn" data-export id="repeatable-list">可重复列表<a class="self-link"
                        href="#repeatable-list"></a></dfn>
            <dd>
                与<a data-link-type="dfn" href="#by-computed-value"
                    id="ref-for-by-computed-value">按计算值</a>相同，除了当两个列表项数量不同时，
                它们首先会重复到最小公倍数的项数。
                然后，每一项按照<span id="ref-for-by-computed-value①">按计算值</span>进行组合。
                如果一对值无法组合
                或者任何组件值使用<a data-link-type="dfn" href="#discrete" id="ref-for-discrete②">离散的</a>动画，
                那么属性值将按<span id="ref-for-discrete③">离散的</span>方式组合。
                <p class="note" role="note"><span>注意：</span>可重复列表概念确保了
                    一个概念上重复到某个长度的列表
                    （如<a class="property css" data-link-type="property"
                        href="https://www.w3.org/TR/css-backgrounds-3/#propdef-background-origin"
                        id="ref-for-propdef-background-origin">background-origin</a>会重复到
                    <a class="property css" data-link-type="property"
                        href="https://www.w3.org/TR/css-backgrounds-3/#propdef-background-image"
                        id="ref-for-propdef-background-image">background-image</a>列表的长度）
                    或无限重复的列表
                    将在任何值之间平滑过渡，
                    并且计算值
                    将正确表示结果
                    （并有可能被正确继承）。
                </p>
            <dt>(参见详细说明)
            <dd> 某些属性具有上述情况未涵盖的特定插值行为；
                在这种情况下，将明确指定该属性的动画行为。
        </dl>
        <p>尚未包含<a data-link-type="dfn" href="#animation-type" id="ref-for-animation-type①">动画类型</a>行的属性的
            <span id="ref-for-animation-type②">动画类型</span>在其属性定义中，
            见<a href="#animation-types">附录 A：现有属性的动画类型</a>中定义。
        </p>
        <h4 class="heading settled" data-level="5.2.1" id="custom-properties"><span class="secno">5.2.1. </span><span
                class="content">自定义属性</span><a class="self-link" href="#custom-properties"></a></h4>
        <p>对于使用<code
                class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-properties-values-api-1/#dom-css-registerproperty" id="ref-for-dom-css-registerproperty">registerProperty()</a></code>方法为
            <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#current-global-object"
                id="ref-for-current-global-object①">当前全局对象</a>
            注册的<a data-link-type="dfn" href="https://www.w3.org/TR/css-variables-1/#custom-property"
                id="ref-for-custom-property">自定义属性</a>，
            其<a data-link-type="dfn" href="#animation-type" id="ref-for-animation-type③">动画类型</a>为<a
                data-link-type="dfn" href="#by-computed-value" id="ref-for-by-computed-value②">按计算值</a>，
            派生自属性的<a data-link-type="dfn"
                href="https://drafts.css-houdini.org/css-properties-values-api-1/#syntax-definition"
                id="ref-for-syntax-definition">语法定义</a>中使用的类型。
            如果没有与属性的指定语法
            （例如当语法为<a data-link-type="dfn"
                href="https://drafts.css-houdini.org/css-properties-values-api-1/#universal-syntax-definition"
                id="ref-for-universal-syntax-definition">通用语法定义</a>）对应的<a data-link-type="dfn"
                href="https://www.w3.org/TR/css-cascade-5/#computed-value" id="ref-for-computed-value①">计算值</a>类型，
            或者当<span id="ref-for-custom-property①">自定义属性</span>未注册时，
            该<span id="ref-for-animation-type④">动画类型</span>为<a data-link-type="dfn" href="#discrete"
                id="ref-for-discrete④">离散的</a>。
        </p>

        <h3 class="heading settled" data-level="5.3" id="keyframe-effects"><span class="secno">5.3. </span><span
                class="content">关键帧效果</span><a class="self-link" href="#keyframe-effects"></a></h3>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="keyframe effect" data-noexport
                id="keyframe-effect">关键帧效果</dfn>是一种<a data-link-type="dfn" href="#animation-effect"
                id="ref-for-animation-effect⑦②">动画效果</a>，它利用时间模型的输出来更新元素或<a data-link-type="dfn"
                href="https://www.w3.org/TR/selectors-4/#pseudo-element"
                id="ref-for-pseudo-element①">伪元素</a>（如<code>::before</code>或<code>::after</code><a
                data-link-type="biblio" href="#biblio-select">[select]</a>）的 CSS 属性，
            这些元素或伪元素称为<dfn class="dfn-paneled" data-dfn-for="keyframe effect" data-dfn-type="dfn" data-export
                id="keyframe-effect-effect-target">效果目标</dfn>。
        </p>
        <p><a data-link-type="dfn" href="#keyframe-effect-effect-target"
                id="ref-for-keyframe-effect-effect-target②">效果目标</a>包括一个称为<code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element">元素</a></code>的对象，
            称为<dfn class="dfn-paneled" data-dfn-for="effect target" data-dfn-type="dfn" data-export
                id="effect-target-target-element">目标元素</dfn>和一个<a data-link-type="dfn"
                href="https://www.w3.org/TR/selectors-4/#pseudo-element" id="ref-for-pseudo-element②">伪元素</a>选择器，
            称为<dfn class="dfn-paneled" data-dfn-for="effect target" data-dfn-type="dfn" data-export
                id="effect-target-target-pseudo-selector">目标伪选择器</dfn>。
            如果<span id="ref-for-keyframe-effect-effect-target③">效果目标</span>是<code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element①">元素</a></code>，
            则<a data-link-type="dfn" href="#effect-target-target-element"
                id="ref-for-effect-target-target-element">目标元素</a>是该元素，
            而<a data-link-type="dfn" href="#effect-target-target-pseudo-selector"
                id="ref-for-effect-target-target-pseudo-selector">目标伪选择器</a>为<code>null</code>。
            如果<span id="ref-for-keyframe-effect-effect-target④">效果目标</span>是<span
                id="ref-for-pseudo-element③">伪元素</span>，
            则<span id="ref-for-effect-target-target-element①">目标元素</span>是其<a data-link-type="dfn"
                href="https://www.w3.org/TR/selectors-4/#originating-element"
                id="ref-for-originating-element">源元素</a>，而<span
                id="ref-for-effect-target-target-pseudo-selector①">目标伪选择器</span>则根据需要指定该伪元素。</p>
        <p>请注意，并非所有以这种方式指定的<a data-link-type="dfn" href="#keyframe-effect-effect-target"
                id="ref-for-keyframe-effect-effect-target⑤">效果目标</a>（如<a class="css" data-link-type="maybe"
                href="https://www.w3.org/TR/css-shadow-parts-1/#selectordef-part"
                id="ref-for-selectordef-part">::part()</a>伪元素和不支持的伪元素）都有定义的计算属性值。</p>
        <h4 class="heading settled" data-level="5.3.1" id="keyframes-section"><span class="secno">5.3.1. </span><span
                class="content">关键帧</span><a class="self-link" href="#keyframes-section"></a></h4>
        <p><a data-link-type="dfn" href="#effect-value" id="ref-for-effect-value">效果值</a>是通过在一系列按分数偏移的位置插值
            来为<a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect②">关键帧效果</a>计算出来的。
            每组按偏移索引的属性值称为<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="keyframe">关键帧</dfn>。</p>
        <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="keyframe offset" data-noexport
                id="keyframe-offset">关键帧的偏移</dfn>是一个范围在 [0, 1] 内的值，或特殊值 null。
            <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe">关键帧</a>列表必须按<dfn class="dfn-paneled"
                data-dfn-type="dfn" data-noexport id="loosely-sorted-by-offset">偏移松散排序</dfn>，
            这意味着列表中每个<a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe①">关键帧</a>的<a data-link-type="dfn"
                href="#keyframe-offset" id="ref-for-keyframe-offset">关键帧偏移</a>如果不为 null，
            则该偏移大于或等于列表中前一个关键帧的偏移。
        </p>
        <p><a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe③">关键帧</a>重叠或具有不支持的值时的行为
            定义在<a href="#the-effect-value-of-a-keyframe-animation-effect">§ 5.3.4 关键帧效果的效果值</a>中。</p>
        <p>每个关键帧还有一个与之关联的<a data-link-type="dfn" href="https://www.w3.org/TR/css-easing-1/#easing-function"
                id="ref-for-easing-function⑤">缓动函数</a>，
            它应用于指定它的关键帧和列表中<em>下一个</em>关键帧之间的时间段。
            列表中最后一个关键帧上指定的<span id="ref-for-easing-function⑥">缓动函数</span>永远不会被应用。</p>
        <p>每个<a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe④">关键帧</a>可能有一个<dfn class="dfn-paneled"
                data-dfn-type="dfn" data-lt="keyframe-specific composite operation" data-noexport
                id="keyframe-specific-composite-operation">关键帧特定的组合操作</dfn>，
            如果设置了，则它会应用于该<span id="ref-for-keyframe⑤">关键帧</span>中指定的所有值。
            可能的操作及其含义与<a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect④">关键帧效果</a>整体关联的<a
                data-link-type="dfn" href="#composite-operation" id="ref-for-composite-operation">组合操作</a>在<a
                href="#effect-composition">§ 5.4.4 效果组合</a>中定义的操作相同。
            如果关键帧的<a data-link-type="dfn" href="#keyframe-specific-composite-operation"
                id="ref-for-keyframe-specific-composite-operation">关键帧特定的组合操作</a>未设置，则使用为该关键帧中指定的值定义的关键帧效果整体上的<span
                id="ref-for-composite-operation①">组合操作</span>。</p>
        <h4 class="heading settled" data-level="5.3.2" id="computing-property-values"><span class="secno">5.3.2.
            </span><span class="content">计算属性值</span><a class="self-link" href="#computing-property-values"></a></h4>
        <div class="algorithm" data-algorithm="compute a property value">
            要<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="compute-a-property-value">计算属性值</dfn>，给定属性<var>property</var>，
            值<var>value</var>，和<code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element②">元素</a></code>
            <var>element</var>：
            根据<var>property</var>的定义表中的"计算值"行解析<var>value</var>，
            使用<var>element</var>的<a data-link-type="dfn" href="https://www.w3.org/TR/css-cascade-5/#computed-value"
                id="ref-for-computed-value②">计算值</a>作为解析依赖项的上下文，并返回结果。
            <p class="note" role="note"><span>注意：</span><var>element</var>上的<a data-link-type="dfn"
                    href="https://www.w3.org/TR/css-cascade-5/#computed-value" id="ref-for-computed-value③">计算值</a>不受
                此算法影响。</p>
            <p>此算法意味着在关键帧中指定的属性值可以建立顺序依赖。
                在<a data-link-type="dfn" href="#compute-a-property-value"
                    id="ref-for-compute-a-property-value">计算属性值</a>时，<var>value</var>持有的依赖项的<a data-link-type="dfn"
                    href="https://www.w3.org/TR/css-cascade-5/#computed-value" id="ref-for-computed-value④">计算值</a>必须
                首先计算。</p>
            <div class="example" id="example-6f975f2f">
                <a class="self-link" href="#example-6f975f2f"></a>
                <pre class="lang-javascript highlight"><c- a>var</c-> animation <c- o>=</c-> elem<c- p>.</c->animate<c- p>([{</c-> fontSize<c- o>:</c-> <c- t>'10px'</c-><c- p>,</c-> width<c- o>:</c-> <c- t>'10em'</c-> <c- p>},</c->
                              <c- p>{</c-> fontSize<c- o>:</c-> <c- t>'20px'</c-><c- p>,</c-> width<c- o>:</c-> <c- t>'20em'</c-> <c- p>}],</c-> <c- mf>1000</c-><c- p>);</c->
animation<c- p>.</c->currentTime <c- o>=</c-> <c- mf>500</c-><c- p>;</c->
console<c- p>.</c->log<c- p>(</c->getComputedStyle<c- p>(</c->elem<c- p>).</c->fontSize<c- p>);</c-> <c- c1>// 应为 15px</c->
console<c- p>.</c->log<c- p>(</c->getComputedStyle<c- p>(</c->elem<c- p>).</c->width<c- p>);</c-> <c- c1>// 应为 225px</c->
</pre>
                <p>在此示例中，为了<a data-link-type="dfn" href="#compute-a-property-value"
                        id="ref-for-compute-a-property-value①">计算属性值</a>，<code>10em</code>的值，
                    我们必须知道<a data-link-type="dfn" href="https://www.w3.org/TR/css-cascade-5/#computed-value"
                        id="ref-for-computed-value⑤">计算值</a><a class="property css" data-link-type="property"
                        href="https://www.w3.org/TR/css-fonts-4/#propdef-font-size"
                        id="ref-for-propdef-font-size">font-size</a>在<a data-link-type="dfn"
                        href="#effect-target-target-element" id="ref-for-effect-target-target-element②">目标元素</a>上的计算值，
                    而这又由<span class="property" id="ref-for-propdef-font-size①">font-size</span>的<a data-link-type="dfn"
                        href="#effect-value" id="ref-for-effect-value①">效果值</a>决定，
                    这又要求我们计算<span class="property" id="ref-for-propdef-font-size②">font-size</span>的属性值。
                    因此，计算属性值受制于顺序约束。
                </p>
            </div>
        </div>

        <h4 class="heading settled" data-level="5.3.3" id="calculating-computed-keyframes"><span class="secno">5.3.3.
            </span><span class="content">计算已计算的关键帧</span><a class="self-link"
                href="#calculating-computed-keyframes"></a></h4>
        <p>在计算<a data-link-type="dfn" href="#effect-value" id="ref-for-effect-value②">效果值</a>之前，<a data-link-type="dfn"
                href="#keyframe-effect" id="ref-for-keyframe-effect⑥">关键帧效果</a>的
            <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe⑦">关键帧</a>上的属性值将先被
            <a href="#computing-property-values">计算</a>，并计算任何关键帧的空<a data-link-type="dfn" href="#keyframe-offset"
                id="ref-for-keyframe-offset②">关键帧偏移</a>的偏移量。解析这些值的结果是一组
            <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="computed-keyframes">已计算的关键帧</dfn>。
        </p>
        <p>计算出的一组<a data-link-type="dfn" href="#keyframe-offset" id="ref-for-keyframe-offset③">关键帧偏移</a>，其中包含了每个空<span
                id="ref-for-keyframe-offset④">关键帧偏移</span>的适当值，称为
            <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="computed keyframe offset" data-noexport
                id="computed-keyframe-offset">已计算的关键帧偏移</dfn>。
        </p>
        <p>要生成<a data-link-type="dfn" href="#computed-keyframe-offset"
                id="ref-for-computed-keyframe-offset">已计算的关键帧偏移</a>，我们定义了一个过程来
            <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="compute-missing-keyframe-offsets">计算缺失的关键帧偏移</dfn>，该过程接受一系列
            <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe⑨">关键帧</a> <var>keyframes</var>，并包含以下步骤：
        </p>
        <ol>
            <li data-md>
                <p>对于<var>keyframes</var>中的每个<a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe①⓪">关键帧</a>，
                    将该<span id="ref-for-keyframe①①">关键帧</span>的<a data-link-type="dfn" href="#computed-keyframe-offset"
                        id="ref-for-computed-keyframe-offset①">已计算的关键帧偏移</a>设为其<a data-link-type="dfn"
                        href="#keyframe-offset" id="ref-for-keyframe-offset⑤">关键帧偏移</a>值。
                </p>
            <li data-md>
                <p>如果<var>keyframes</var>包含多个<a data-link-type="dfn" href="#keyframe"
                        id="ref-for-keyframe①②">关键帧</a>，并且<var>keyframes</var>中第一个
                    <span id="ref-for-keyframe①③">关键帧</span>的<a data-link-type="dfn" href="#computed-keyframe-offset"
                        id="ref-for-computed-keyframe-offset②">已计算的关键帧偏移</a>为null，
                    则将该<span id="ref-for-keyframe①④">关键帧</span>的<span
                        id="ref-for-computed-keyframe-offset③">已计算的关键帧偏移</span>设为0。
                </p>
            <li data-md>
                <p>如果<var>keyframes</var>中最后一个<a data-link-type="dfn" href="#keyframe"
                        id="ref-for-keyframe①⑤">关键帧</a>的<a data-link-type="dfn" href="#computed-keyframe-offset"
                        id="ref-for-computed-keyframe-offset④">已计算的关键帧偏移</a>为null，
                    则将其<span id="ref-for-computed-keyframe-offset⑤">已计算的关键帧偏移</span>设为1。
                </p>
            <li data-md>
                <p>对于每对<var>A</var>和<var>B</var>之间的<a data-link-type="dfn" href="#keyframe"
                        id="ref-for-keyframe①⑥">关键帧</a>：</p>
                <ul>
                    <li data-md>
                        <p><var>A</var>在<var>B</var>之前出现在<var>keyframes</var>中，并且</p>
                    <li data-md>
                        <p><var>A</var>和<var>B</var>的<a data-link-type="dfn" href="#computed-keyframe-offset"
                                id="ref-for-computed-keyframe-offset⑥">已计算的关键帧偏移</a>不为null，并且</p>
                    <li data-md>
                        <p><var>A</var>和<var>B</var>之间的所有<a data-link-type="dfn" href="#keyframe"
                                id="ref-for-keyframe①⑦">关键帧</a>的
                            <a data-link-type="dfn" href="#computed-keyframe-offset"
                                id="ref-for-computed-keyframe-offset⑦">已计算的关键帧偏移</a>为null，
                        </p>
                </ul>
                <p>计算<var>A</var>和<var>B</var>之间每个<a data-link-type="dfn" href="#keyframe"
                        id="ref-for-keyframe①⑧">关键帧</a>的<a data-link-type="dfn" href="#computed-keyframe-offset"
                        id="ref-for-computed-keyframe-offset⑧">已计算的关键帧偏移</a>，如下：</p>
                <ol>
                    <li data-md>
                        <p>让<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                                id="offsetk">offset<sub><var>k</var></sub></dfn>为关键帧<var>k</var>的
                            <a data-link-type="dfn" href="#computed-keyframe-offset"
                                id="ref-for-computed-keyframe-offset⑨">已计算的关键帧偏移</a>。
                        </p>
                    <li data-md>
                        <p>令<var>n</var>为<var>A</var>和<var>B</var>之间包含<var>A</var>和<var>B</var>的关键帧数量减去1。</p>
                    <li data-md>
                        <p>令<var>index</var>表示在<var>A</var>和<var>B</var>之间的关键帧序列中的位置，第一个<var>A</var>之后的关键帧的<var>index</var>为1。
                        </p>
                    <li data-md>
                        <p>将关键帧<var>keyframe</var>的<a data-link-type="dfn" href="#computed-keyframe-offset"
                                id="ref-for-computed-keyframe-offset①⓪">已计算的关键帧偏移</a>设为
                            <a data-link-type="dfn" href="#offsetk"
                                id="ref-for-offsetk">offset</a><sub><var>A</var></sub> +
                            (<span id="ref-for-offsetk①">offset</span><sub><var>B</var></sub> − <span
                                id="ref-for-offsetk②">offset</span><sub><var>A</var></sub>)
                            × <var>index</var> / <var>n</var>。
                        </p>
                </ol>
        </ol>
        <p><a data-link-type="dfn" href="#computed-keyframes" id="ref-for-computed-keyframes">已计算的关键帧</a>是使用以下过程生成的。
            注意，此过程仅对具有<a data-link-type="dfn" href="#keyframe-effect-effect-target"
                id="ref-for-keyframe-effect-effect-target⑥">效果目标</a>的
            <a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect⑦">关键帧效果</a>执行，其中可以计算出计算属性值。
        </p>
        <ol>
            <li data-md>
                <p>让<var>computed keyframes</var>成为一个空的<a data-link-type="dfn" href="#keyframe"
                        id="ref-for-keyframe②⓪">关键帧</a>列表。</p>
            <li data-md>
                <p>对于在此<a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect⑧">关键帧效果</a>上指定的
                    <a data-link-type="dfn" href="#keyframe"
                        id="ref-for-keyframe②①">关键帧</a>列表中的每个<var>keyframe</var>，执行以下步骤：
                </p>
                <ol>
                    <li data-md>
                        <p>将一个新的空的<a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe②②">关键帧</a>，
                            <var>computed keyframe</var>，添加到<var>computed keyframes</var>。
                        </p>
                    <li data-md>
                        <p>对于<var>keyframe</var>中指定的每个属性：</p>
                        <ul>
                            <li data-md>
                                <p>使用<var>keyframe</var>上指定的值作为值，使用<a data-link-type="dfn"
                                        href="#effect-target-target-element"
                                        id="ref-for-effect-target-target-element③">目标元素</a>作为元素
                                    <a data-link-type="dfn" href="#compute-a-property-value"
                                        id="ref-for-compute-a-property-value②">计算属性值</a>；然后将该属性和值添加到<var>computed
                                        keyframe</var>。
                                </p>
                            <li data-md>
                                <p>对于简写属性，添加等效的长格式属性。</p>
                            <li data-md>
                                <p>对于逻辑属性<a data-link-type="biblio" href="#biblio-css-logical-1">[CSS-LOGICAL-1]</a>，根据
                                    <a class="property css" data-link-type="property"
                                        href="https://www.w3.org/TR/css-writing-modes-4/#propdef-writing-mode"
                                        id="ref-for-propdef-writing-mode">writing-mode</a>
                                    和/或<a class="property css" data-link-type="property"
                                        href="https://www.w3.org/TR/css-writing-modes-3/#propdef-direction"
                                        id="ref-for-propdef-direction">direction</a>的计算值，
                                    添加<a data-link-type="dfn"
                                        href="https://drafts.csswg.org/css-writing-modes-4/#logical-to-physical"
                                        id="ref-for-logical-to-physical">等效的物理属性</a>
                                    <a data-link-type="biblio"
                                        href="#biblio-css-writing-modes-4">[CSS-WRITING-MODES-4]</a>至<a
                                        data-link-type="dfn" href="#keyframe-effect-effect-target"
                                        id="ref-for-keyframe-effect-effect-target⑦">效果目标</a>。
                                </p>
                        </ul>
                        <p>例如，如果<var>keyframe</var>的<a class="property css" data-link-type="property"
                                href="https://www.w3.org/TR/css-backgrounds-3/#propdef-border-width"
                                id="ref-for-propdef-border-width">border-width</a>
                            属性的值为“12pt”，用户代理可能会计算出每个长格式属性的“16px”值：<a class="property css" data-link-type="property"
                                href="https://www.w3.org/TR/css-backgrounds-3/#propdef-border-bottom-width"
                                id="ref-for-propdef-border-bottom-width">border-bottom-width</a>，
                            <a class="property css" data-link-type="property"
                                href="https://www.w3.org/TR/css-backgrounds-3/#propdef-border-left-width"
                                id="ref-for-propdef-border-left-width">border-left-width</a>，
                            <a class="property css" data-link-type="property"
                                href="https://www.w3.org/TR/css-backgrounds-3/#propdef-border-right-width"
                                id="ref-for-propdef-border-right-width">border-right-width</a>，
                            和<a class="property css" data-link-type="property"
                                href="https://www.w3.org/TR/css-backgrounds-3/#propdef-border-top-width"
                                id="ref-for-propdef-border-top-width">border-top-width</a>。
                            因此，<var>computed keyframe</var>将不会有属性
                            <span class="property"
                                id="ref-for-propdef-border-width①">border-width</span>的值，而是包括每个长格式属性，并且每个属性的值均为“16px”。
                        </p>
                        <p>如果在展开简写属性或使用物理属性替换逻辑属性时出现冲突，请按以下顺序应用规则，直到解决冲突：</p>
                        <ol>
                            <li data-md>
                                <p>长格式属性覆盖简写属性（例如<a class="property css" data-link-type="property"
                                        href="https://www.w3.org/TR/css-backgrounds-3/#propdef-border-top-color"
                                        id="ref-for-propdef-border-top-color">border-top-color</a>覆盖<a
                                        class="property css" data-link-type="property"
                                        href="https://www.w3.org/TR/css-backgrounds-3/#propdef-border-top"
                                        id="ref-for-propdef-border-top">border-top</a>）。</p>
                            <li data-md>
                                <p>包含较少长格式组件的简写属性覆盖包含较多长格式组件的简写属性（例如<a class="property css" data-link-type="property"
                                        href="https://www.w3.org/TR/css-backgrounds-3/#propdef-border-top"
                                        id="ref-for-propdef-border-top①">border-top</a>覆盖<a class="property css"
                                        data-link-type="property"
                                        href="https://www.w3.org/TR/css-backgrounds-3/#propdef-border-color"
                                        id="ref-for-propdef-border-color">border-color</a>）。</p>
                            <li data-md>
                                <p>物理属性覆盖逻辑属性。</p>
                            <li data-md>
                                <p>对于具有相同数量的长格式组件的简写属性，当按组成每个IDL名称的Unicode代码点升序排序时，IDL名称较早出现的属性将覆盖较晚出现的属性。</p>
                        </ol>
                </ol>
            <li data-md>
                <p>将<a data-link-type="dfn" href="#compute-missing-keyframe-offsets"
                        id="ref-for-compute-missing-keyframe-offsets">计算缺失的关键帧偏移</a>过程应用于
                    <var>computed keyframes</var>。
                </p>
            <li data-md>
                <p>返回<var>computed keyframes</var>。</p>
        </ol>

        <h4 class="heading settled" data-level="5.3.4" id="the-effect-value-of-a-keyframe-animation-effect"><span
                class="secno">5.3.4. </span><span class="content">关键帧效果的效果值</span><a class="self-link"
                href="#the-effect-value-of-a-keyframe-animation-effect"></a></h4>
        <p>单个属性的<a data-link-type="dfn" href="#effect-value" id="ref-for-effect-value③">效果值</a>由<a data-link-type="dfn"
                href="#keyframe-effect" id="ref-for-keyframe-effect⑨">关键帧效果</a>引用，作为其
            <a data-link-type="dfn" href="#target-property"
                id="ref-for-target-property①">目标属性</a>之一，对于给定的<var>迭代进度</var>、<var>当前迭代</var>和<var>基础值</var>，计算如下。
        </p>
        <ol>
            <li data-md>
                <p>如果<var>迭代进度</var>为<a data-link-type="dfn" href="#unresolved"
                        id="ref-for-unresolved①①①">未解析</a>，则中止此过程。</p>
            <li data-md>
                <p>让<var>目标属性</var>成为要计算其<a data-link-type="dfn" href="#effect-value"
                        id="ref-for-effect-value④">效果值</a>的长格式属性。</p>
            <li data-md>
                <p>如果<var>目标属性</var>的<a data-link-type="dfn" href="#animation-type"
                        id="ref-for-animation-type⑤">动画类型</a>为<a data-link-type="dfn" href="#not-animatable"
                        id="ref-for-not-animatable②">不可动画化</a>，则中止此过程，因为无法应用该效果。</p>
            <li data-md>
                <p>如果<a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect①⓪">关键帧效果</a>没有<a
                        data-link-type="dfn" href="#keyframe-effect-effect-target"
                        id="ref-for-keyframe-effect-effect-target⑧">效果目标</a>，或者如果<span
                        id="ref-for-keyframe-effect-effect-target⑨">效果目标</span>无法计算出属性值，则中止此过程。</p>
            <li data-md>
                <p>定义<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                        id="neutral-value-for-composition">组合的中性值</dfn>为一个值，当与<a data-link-type="dfn"
                        href="#underlying-value" id="ref-for-underlying-value①">基础值</a>使用<a data-link-type="dfn"
                        href="#composite-operation-add" id="ref-for-composite-operation-add">add</a>
                    <a data-link-type="dfn" href="#composite-operation"
                        id="ref-for-composite-operation②">组合操作</a>进行组合时，生成<span
                        id="ref-for-underlying-value②">基础值</span>。
                </p>
            <li data-md>
                <p>让<var>特定属性的关键帧</var>为获取此<a data-link-type="dfn" href="#keyframe-effect"
                        id="ref-for-keyframe-effect①①">关键帧效果</a>的
                    <a data-link-type="dfn" href="#computed-keyframes" id="ref-for-computed-keyframes①">已计算关键帧</a>的结果。
                </p>
            <li data-md>
                <p>从<var>特定属性的关键帧</var>中移除没有<var>目标属性</var>的属性值的<a data-link-type="dfn" href="#keyframe"
                        id="ref-for-keyframe②③">关键帧</a>。</p>
            <li data-md>
                <p>如果<var>特定属性的关键帧</var>为空，则返回<var>基础值</var>。</p>
            <li data-md>
                <p>如果<var>特定属性的关键帧</var>中没有<a data-link-type="dfn" href="#computed-keyframe-offset"
                        id="ref-for-computed-keyframe-offset①①">已计算的关键帧偏移</a>为0的<a data-link-type="dfn" href="#keyframe"
                        id="ref-for-keyframe②④">关键帧</a>，
                    则创建一个新的<span id="ref-for-keyframe②⑤">关键帧</span>，其<span
                        id="ref-for-computed-keyframe-offset①②">已计算的关键帧偏移</span>为0，属性值设置为<a data-link-type="dfn"
                        href="#neutral-value-for-composition" id="ref-for-neutral-value-for-composition">组合的中性值</a>，
                    并将其<a data-link-type="dfn" href="#composite-operation"
                        id="ref-for-composite-operation③">组合操作</a>设置为<a data-link-type="dfn"
                        href="#composite-operation-add"
                        id="ref-for-composite-operation-add①">add</a>，并将其添加到<var>特定属性的关键帧</var>的开头。</p>
            <li data-md>
                <p>同样，如果<var>特定属性的关键帧</var>中没有<a data-link-type="dfn" href="#computed-keyframe-offset"
                        id="ref-for-computed-keyframe-offset①③">已计算的关键帧偏移</a>为1的<a data-link-type="dfn" href="#keyframe"
                        id="ref-for-keyframe②⑥">关键帧</a>，
                    则创建一个新的<span id="ref-for-keyframe②⑦">关键帧</span>，其<span
                        id="ref-for-computed-keyframe-offset①④">已计算的关键帧偏移</span>为1，属性值设置为<a data-link-type="dfn"
                        href="#neutral-value-for-composition" id="ref-for-neutral-value-for-composition①">组合的中性值</a>，
                    并将其<a data-link-type="dfn" href="#composite-operation"
                        id="ref-for-composite-operation④">组合操作</a>设置为<a data-link-type="dfn"
                        href="#composite-operation-add"
                        id="ref-for-composite-operation-add②">add</a>，并将其添加到<var>特定属性的关键帧</var>的末尾。</p>
            <li data-md>
                <p>让<var>区间端点</var>为一个空的关键帧序列。</p>
            <li data-md>
                <p>通过以下条件中的第一个匹配条件来填充<var>区间端点</var>：</p>
                <div class="switch">
                    <dl>
                        <dt data-md>如果<var>迭代进度</var>
                            &lt; 0，且在<var>特定属性的关键帧</var>中有多个<a data-link-type="dfn" href="#keyframe"
                                id="ref-for-keyframe②⑧">关键帧</a>的<a data-link-type="dfn" href="#computed-keyframe-offset"
                                id="ref-for-computed-keyframe-offset①⑤">已计算关键帧偏移</a>为0，
                        <dd data-md>
                            <p>将<var>特定属性的关键帧</var>中的第一个<a data-link-type="dfn" href="#keyframe"
                                    id="ref-for-keyframe②⑨">关键帧</a>添加到<var>区间端点</var>中。</p>
                        <dt data-md>如果<var>迭代进度</var> ≥ 1，且在<var>特定属性的关键帧</var>中有多个<a data-link-type="dfn"
                                href="#keyframe" id="ref-for-keyframe③⓪">关键帧</a>的<a data-link-type="dfn"
                                href="#computed-keyframe-offset" id="ref-for-computed-keyframe-offset①⑥">已计算关键帧偏移</a>为1，
                        <dd data-md>
                            <p>将<var>特定属性的关键帧</var>中的最后一个<a data-link-type="dfn" href="#keyframe"
                                    id="ref-for-keyframe③①">关键帧</a>添加到<var>区间端点</var>中。</p>
                        <dt data-md>否则，
                        <dd data-md>
                            <ol>
                                <li data-md>
                                    <p>将<var>特定属性的关键帧</var>中<a data-link-type="dfn" href="#computed-keyframe-offset"
                                            id="ref-for-computed-keyframe-offset①⑦">已计算关键帧偏移</a>小于等于<var>迭代进度</var>且小于1的最后一个<a
                                            data-link-type="dfn" href="#keyframe"
                                            id="ref-for-keyframe③②">关键帧</a>添加到<var>区间端点</var>中。
                                        如果没有这样的<span id="ref-for-keyframe③③">关键帧</span>（例如，<a data-link-type="dfn"
                                            href="#iteration-progress"
                                            id="ref-for-iteration-progress①⓪">迭代进度</a>为负），则添加已计算关键帧偏移为0的最后一个<span
                                            id="ref-for-keyframe③④">关键帧</span>。</p>
                                <li data-md>
                                    <p>将上一步中添加的关键帧后的下一个<a data-link-type="dfn" href="#keyframe"
                                            id="ref-for-keyframe③⑤">关键帧</a>添加到<var>区间端点</var>中。</p>
                            </ol>
                    </dl>
                </div>
            <li data-md>
                <p>对于<var>区间端点</var>中的每个<var>关键帧</var>：</p>
                <ol>
                    <li data-md>
                        <p>如果<var>关键帧</var>的<a data-link-type="dfn" href="#composite-operation"
                                id="ref-for-composite-operation⑤">组合操作</a>不是<em>replace</em>，或<var>关键帧</var>没有<span
                                id="ref-for-composite-operation⑥">组合操作</span>且此<a data-link-type="dfn"
                                href="#keyframe-effect" id="ref-for-keyframe-effect①②">关键帧效果</a>的<span
                                id="ref-for-composite-operation⑦">组合操作</span>不是<em>replace</em>，
                            则执行以下步骤：</p>
                        <ol>
                            <li data-md>
                                <p>让<var>使用的组合操作</var>为<var>关键帧</var>的<a data-link-type="dfn"
                                        href="#composite-operation"
                                        id="ref-for-composite-operation⑧">组合操作</a>，如果没有，则为此<a data-link-type="dfn"
                                        href="#keyframe-effect" id="ref-for-keyframe-effect①③">关键帧效果</a>的<span
                                        id="ref-for-composite-operation⑨">组合操作</span>。</p>
                            <li data-md>
                                <p>让<var>要组合的值</var>为<var>关键帧</var>上指定的<var>目标属性</var>的属性值。</p>
                            <li data-md>
                                <p>将<var>目标属性</var>的属性值替换为<var>基础值</var>（<var>V</var><sub>a</sub>）与<var>要组合的值</var>（<var>V</var><sub>b</sub>）的组合结果，使用对应于<var>目标属性</var>的<a
                                        data-link-type="dfn" href="#animation-type"
                                        id="ref-for-animation-type⑥">动画类型</a>的<var>使用的组合操作</var>的过程。</p>
                        </ol>
                </ol>
            <li data-md>
                <p>如果<var>区间端点</var>中只有一个关键帧，则返回该关键帧上<var>目标属性</var>的属性值。</p>
            <li data-md>
                <p>让<var>起始偏移</var>为<var>区间端点</var>中第一个关键帧的<a data-link-type="dfn" href="#computed-keyframe-offset"
                        id="ref-for-computed-keyframe-offset①⑨">已计算关键帧偏移</a>。</p>
            <li data-md>
                <p>让<var>结束偏移</var>为<var>区间端点</var>中最后一个关键帧的<a data-link-type="dfn" href="#computed-keyframe-offset"
                        id="ref-for-computed-keyframe-offset②⓪">已计算关键帧偏移</a>。</p>
            <li data-md>
                <p>让<var>区间距离</var>为以下结果：<code>(<var>迭代进度</var> - <var>起始偏移</var>) / (<var>结束偏移</var> - <var>起始偏移</var>)</code>。
                </p>
            <li data-md>
                <p>让<var>变换后的距离</var>为以下结果：使用<var>区间距离</var>作为输入进度，计算与<var>区间端点</var>中第一个关键帧关联的<a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-easing-1/#easing-function"
                        id="ref-for-easing-function⑦">时间函数</a>。</p>
            <li data-md>
                <p>返回以下结果：应用由<var>目标属性</var>的<a data-link-type="dfn" href="#animation-type"
                        id="ref-for-animation-type⑦">动画类型</a>定义的<a data-link-type="dfn"
                        href="https://www.w3.org/TR/css-values-4/#interpolation" id="ref-for-interpolation①">插值过程</a>，
                    对<var>区间端点</var>中的两个关键帧指定的<var>目标属性</var>的值，使用第一个这样的值作为<var>V</var><sub>start</sub>，使用第二个值作为<var>V</var><sub>end</sub>，
                    并使用<var>变换后的距离</var>作为插值参数<var>p</var>。</p>
        </ol>
        <div class="note" role="note">
            <p>请注意，此过程对效果指定的<a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe③⑥">关键帧</a>列表假定以下内容：</p>
            <p></p>
            <ul>
                <li data-md>
                    <p>每个<a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe③⑦">关键帧</a>在范围[0, 1]内有一个指定的<a
                            data-link-type="dfn" href="#computed-keyframe-offset"
                            id="ref-for-computed-keyframe-offset②①">已计算关键帧偏移</a>。</p>
                <li data-md>
                    <p><a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe③⑧">关键帧</a>的列表按<a
                            data-link-type="dfn" href="#computed-keyframe-offset"
                            id="ref-for-computed-keyframe-offset②②">已计算关键帧偏移</a>的升序排列。</p>
                <li data-md>
                    <p>对于给定的属性，每个关键帧上最多只有一个指定的属性值。</p>
            </ul>
            <p>确保这些条件得到满足的责任在于模型的用户（例如，声明性标记或编程接口）。</p>
            <p>例如，对于本规范定义的<a href="#programming-interface">编程接口</a>，这些条件通过生成输入此过程的<a data-link-type="dfn"
                    href="#computed-keyframes" id="ref-for-computed-keyframes②">已计算关键帧</a>的过程得到满足。</p>
        </div>
        <p class="note" role="note"><span>注意：</span>此过程允许<a data-link-type="dfn" href="#keyframe"
                id="ref-for-keyframe③⑨">关键帧</a>重叠。
            在重叠点上的行为是输出值跳转到该偏移量处定义的最后一个<span id="ref-for-keyframe④⓪">关键帧</span>的值。
            对于在0或1处重叠的关键帧，输出值对于<var>迭代进度</var>值小于0或大于或等于1的情况，分别是<var>关键帧</var>中的第一个<span
                id="ref-for-keyframe④①">关键帧</span>或最后一个<span id="ref-for-keyframe④②">关键帧</span>的值。</p>
        <div class="note" role="note">
            请注意，<a data-link-type="dfn" href="#computed-keyframes" id="ref-for-computed-keyframes③">已计算的关键帧</a>是“动态”的：
            用户代理必须表现得好像它们在每次计算<a data-link-type="dfn" href="#effect-value" id="ref-for-effect-value⑤">效果值</a>时都会被重新创建。
            <p>例如，如果在<a class="property css" data-link-type="property"
                    href="https://www.w3.org/TR/css-fonts-4/#propdef-font-size"
                    id="ref-for-propdef-font-size③">font-size</a>属性上存在从<code>10px</code>到<code>20px</code>的进行中的过渡，
                则在关键帧中指定为<code>1em</code>的属性值在<a
                    href="#calculating-computed-keyframes">关键帧计算</a>期间会针对<var>font-size</var>属性的范围[<code>10px</code>,
                <code>20px</code>]内的<var>计算值</var>进行解析。
            </p>
        </div>
        <div class="issue" id="issue-9e46aa87">
            <a class="self-link" href="#issue-9e46aa87"></a> 在某些时间函数的存在下，动画效果的输入迭代进度不受限于范围[0, 1]。
            然而，目前关键帧偏移量确实限制在范围[0, 1]，并且属性值对于范围之外的输入迭代进度值只是简单地外推。
            <p>我们曾考虑删除此限制，因为存在一些情况，其中在[0, 1]范围之外指定非线性属性值变化是有用的。
                一个例子是一个从绿色插值到黄色的动画，但具有一个使其暂时插值“超越”黄色到红色然后再回到黄色的超调时间函数。
                虽然这种效果可以通过修改关键帧和时间函数来实现，但这种方法似乎破坏了模型中的时间问题与动画效果的分离。</p>
            <p>目前尚不清楚应该如何实现这种效果，但我们注意到，允许关键帧偏移超出[0, 1]范围可能使当前指定的行为（必要时合成偏移为0和1的关键帧）不一致。</p>
            <p>参见<a href="https://lists.w3.org/Archives/Public/public-fx/2013AprJun/0184.html">2013年东京F2F会议讨论的第4节（[0,
                    1]范围之外的关键帧偏移）</a>。</p>
            <p><a
                    href="https://github.com/w3c/csswg-drafts/issues/2081">&lt;https://github.com/w3c/csswg-drafts/issues/2081></a>
            </p>
        </div>

        <h3 class="heading settled" data-level="5.4" id="combining-effects"><span class="secno">5.4. </span><span
                class="content">组合效果</span><a class="self-link" href="#combining-effects"></a></h3>
        <div class="informative-bg">
            <em>本节是非规范性的</em>
            <p>在为<a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect①④">关键帧效果</a>计算<a
                    data-link-type="dfn" href="#effect-value" id="ref-for-effect-value⑥">效果值</a>后，它们将应用于<a
                    data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect⑦③">动画效果</a>的<a
                    data-link-type="dfn" href="#target-property" id="ref-for-target-property②">目标属性</a>。</p>
            <p>由于多个<a data-link-type="dfn" href="#in-effect" id="ref-for-in-effect③">生效的</a><a data-link-type="dfn"
                    href="#keyframe-effect" id="ref-for-keyframe-effect①⑤">关键帧效果</a>可能会针对同一属性，因此通常需要将多个<span
                    id="ref-for-keyframe-effect①⑥">关键帧效果</span>的结果组合在一起。这一过程称为<dfn class="dfn-paneled"
                    data-dfn-type="dfn" data-lt="composite | composition" data-noexport
                    id="composite">合成</dfn>，它基于为每个由<span id="ref-for-in-effect④">生效的</span><a data-link-type="dfn"
                    href="#animation-effect" id="ref-for-animation-effect⑦④">动画效果</a>目标的属性建立的<a data-link-type="dfn"
                    href="#effect-stack" id="ref-for-effect-stack①">效果栈</a>。</p>
            <p>在将<a data-link-type="dfn" href="#keyframe-effect"
                    id="ref-for-keyframe-effect①⑦">关键帧效果</a>的结果组合在一起后，合成的结果将与目标属性的其他指定值相结合。</p>
            <p>该安排如下图所示：</p>
            <figure>
                <img alt="效果值应用于目标属性的概览" src="https://www.w3.org/TR/web-animations-1/images/animation-cascade.svg"
                    width="500">
                <figcaption>效果值应用于目标属性的概览。<br> 针对同一属性的关键帧效果的结果通过效果栈组合在一起。<br> 该组合的结果随后在适当的位置插入 CSS 层叠。</figcaption>
            </figure>
            <p>此操作的第一部分——组合针对相同<a data-link-type="dfn" href="#target-property" id="ref-for-target-property⑤">属性</a>的<a
                    data-link-type="dfn" href="#effect-value" id="ref-for-effect-value⑧">效果值</a>——需要确定<a
                    data-link-type="dfn" href="#keyframe-effect"
                    id="ref-for-keyframe-effect①⑨">关键帧效果</a>彼此结合的方式，以及它们应用的顺序，即它们的相对合成顺序。</p>
            <p>效果值的结合方式由相应关键帧效果的<a data-link-type="dfn" href="#composite-operation"
                    id="ref-for-composite-operation①⓪">合成操作</a>决定。</p>
            <p>效果值的相对合成顺序由为每个动画属性建立的<a data-link-type="dfn" href="#effect-stack" id="ref-for-effect-stack③">效果栈</a>决定。
            </p>
        </div>

        <h4 class="heading settled" data-level="5.4.1" id="animation-classes"><span class="secno">5.4.1. </span><span
                class="content">动画类</span><a class="self-link" href="#animation-classes"></a></h4>
        <p>本规范提供了一个通用的动画模型，旨在供其他规范在此模型之上定义标记或编程接口。生成<a data-link-type="dfn" href="#concept-animation"
                id="ref-for-concept-animation④⑤">动画</a>的特定标记或编程接口定义其<a class="dfn-paneled" data-dfn-type="dfn"
                data-noexport id="animation-class">动画类</a>。</p>
        <p>其他规范可能会定义不同动画类之间或特定类内的复合顺序的特定行为。</p>
        <div class="informative-bg">
            <em>本节是非规范性的</em>
            <p>例如，<a data-link-type="dfn" href="#animation-class" id="ref-for-animation-class①">类</a>为“CSS
                动画”的动画被定义为比类为“CSS 过渡”的动画具有更高的复合顺序，但比没有特定类的其他动画顺序低。</p>
            <p>在“CSS 动画”对象集中，基于<a class="property css" data-link-type="property"
                    href="https://www.w3.org/TR/css-animations-1/#propdef-animation-name"
                    id="ref-for-propdef-animation-name">animation-name</a>属性等因素定义了特定的复合顺序。</p>
        </div>
        <h4 class="heading settled" data-level="5.4.2" id="the-effect-stack"><span class="secno">5.4.2. </span><span
                class="content">效果栈</span><a class="self-link" href="#the-effect-stack"></a></h4>
        <p>与每个由一个或多个<a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect②①">关键帧效果</a>目标的<a
                data-link-type="dfn" href="#target-property" id="ref-for-target-property⑥">属性</a>关联的<a
                class="dfn-paneled" data-dfn-type="dfn" data-noexport id="effect-stack">效果栈</a>建立了关键帧效果的相对复合顺序。</p>
        <p>在一个<a data-link-type="dfn" href="#effect-stack" id="ref-for-effect-stack⑤">效果栈</a>中，任何两个<a
                data-link-type="dfn" href="#keyframe-effect"
                id="ref-for-keyframe-effect②③">关键帧效果</a><var>A</var>和<var>B</var>的相对<a class="dfn-paneled"
                data-dfn-type="dfn" data-export data-local-lt="composite order" data-lt="animation composite order"
                id="animation-composite-order">复合顺序</a>通过比较其属性来建立，具体如下：</p>
        <ol>
            <li data-md>
                <p>将<a class="dfn-paneled" data-dfn-for="animation effect" data-dfn-type="dfn"
                        data-lt="associated animation" data-noexport
                        id="animation-effect-associated-animation">动画效果的关联动画</a>定义为与<a data-link-type="dfn"
                        href="#animation-effect" id="ref-for-animation-effect⑦⑤">动画效果</a>关联的<a data-link-type="dfn"
                        href="#concept-animation" id="ref-for-concept-animation④⑥">动画</a>。</p>
            <li data-md>
                <p>按照以下条件依次排序<var>A</var>和<var>B</var>，直到确定顺序：</p>
                <ol>
                    <li data-md>
                        <p>如果<var>A</var>和<var>B</var>的<a data-link-type="dfn"
                                href="#animation-effect-associated-animation"
                                id="ref-for-animation-effect-associated-animation">关联动画</a>在<a data-link-type="dfn"
                                href="#animation-class" id="ref-for-animation-class②">类</a>上不同，则按为相应类定义的任何类间复合顺序进行排序。
                        </p>
                    <li data-md>
                        <p>如果<var>A</var>和<var>B</var>仍未排序，则按<var>A</var>和<var>B</var>的关联动画的共同类定义的任何类特定复合顺序进行排序。</p>
                    <li data-md>
                        <p>如果<var>A</var>和<var>B</var>仍未排序，则按其关联动画在<a data-link-type="dfn" href="#global-animation-list"
                                id="ref-for-global-animation-list">全局动画列表</a>中的位置进行排序。</p>
                </ol>
        </ol>
        <p>排序靠前的<a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect⑦⑥">动画效果</a>具有更低的复合顺序。</p>
        <h4 class="heading settled" data-level="5.4.3" id="calculating-the-result-of-an-effect-stack"><span
                class="secno">5.4.3. </span><span class="content">计算效果栈的结果</span><a class="self-link"
                href="#calculating-the-result-of-an-effect-stack"></a></h4>
        <p>为了计算<a data-link-type="dfn" href="#effect-stack" id="ref-for-effect-stack⑥">效果栈</a>的最终值，将栈中每个<a
                data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect②④">关键帧效果</a>的<a
                data-link-type="dfn" href="#effect-value" id="ref-for-effect-value①①">效果值</a>按复合顺序依次组合。</p>
        <p>在评估<a data-link-type="dfn" href="#effect-stack" id="ref-for-effect-stack⑦">效果栈</a>的过程中，每一步都将以<a
                class="dfn-paneled" data-dfn-type="dfn" data-noexport id="underlying-value">基础值</a>作为输入。</p>
        <p>对于栈中的每个<a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect②⑤">关键帧效果</a>，从该<span
                id="ref-for-keyframe-effect②⑥">关键帧效果</span>中选择适当的<a data-link-type="dfn" href="#effect-value"
                id="ref-for-effect-value①②">效果值</a>与<a data-link-type="dfn" href="#underlying-value"
                id="ref-for-underlying-value③">基础值</a>结合，生成新值。这个结果值成为栈中下一个<span
                id="ref-for-keyframe-effect②⑦">关键帧效果</span>组合的<span id="ref-for-underlying-value④">基础值</span>。</p>
        <p>效果栈的最终值称为<a class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="composited-value">合成值</a>，它只是将栈中最后一个（复合顺序最高的）<a data-link-type="dfn" href="#keyframe-effect"
                id="ref-for-keyframe-effect②⑧">关键帧效果</a>的<a data-link-type="dfn" href="#effect-value"
                id="ref-for-effect-value①③">效果值</a>与此时的<a data-link-type="dfn" href="#underlying-value"
                id="ref-for-underlying-value⑤">基础值</a>组合的结果。</p>
        <h4 class="heading settled" data-level="5.4.4" id="effect-composition"><span class="secno">5.4.4. </span><span
                class="content">效果合成</span><a class="self-link" href="#effect-composition"></a></h4>
        <p>将<a data-link-type="dfn" href="#effect-value" id="ref-for-effect-value①④">效果值</a>与<a data-link-type="dfn"
                href="#underlying-value" id="ref-for-underlying-value⑥">基础值</a>结合使用的具体操作由产生此<span
                id="ref-for-effect-value①⑤">效果值</span>的<a data-link-type="dfn" href="#keyframe-effect"
                id="ref-for-keyframe-effect②⑨">关键帧效果</a>的<a class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="composite-operation">合成操作</a>决定。</p>
        <p>本规范定义了三种<a data-link-type="dfn" href="#composite-operation" id="ref-for-composite-operation①①">合成操作</a>，如下：
        </p>
        <dl>
            <dt data-md><a class="dfn-paneled" data-dfn-type="dfn" data-lt="composite operation replace" data-noexport
                    id="composite-operation-replace">替换</a>
            <dd data-md>
                <p>将<a data-link-type="dfn" href="#effect-value" id="ref-for-effect-value①⑥">效果值</a>与<a
                        data-link-type="dfn" href="#underlying-value" id="ref-for-underlying-value⑦">基础值</a>合成的结果仅为<span
                        id="ref-for-effect-value①⑦">效果值</span>。</p>
            <dt data-md><a class="dfn-paneled" data-dfn-type="dfn" data-lt="composite operation add" data-noexport
                    id="composite-operation-add">添加</a>
            <dd data-md>
                <p><a data-link-type="dfn" href="#effect-value" id="ref-for-effect-value①⑧">效果值</a>将<a
                        data-link-type="dfn" href="https://www.w3.org/TR/css-values-4/#addition"
                        id="ref-for-addition">添加</a>到<a data-link-type="dfn" href="#underlying-value"
                        id="ref-for-underlying-value⑧">基础值</a>。</p>
                <p>对于<a data-link-type="dfn" href="#animation-type" id="ref-for-animation-type⑧">动画类型</a>而言，如果<span
                        id="ref-for-addition①">添加操作</span>被定义为非交换的，则操作数的顺序为<code><a data-link-type="dfn" href="#underlying-value" id="ref-for-underlying-value⑨">基础值</a> + <a data-link-type="dfn" href="#effect-value" id="ref-for-effect-value①⑨">效果值</a></code>。
                </p>
            <dt data-md><a class="dfn-paneled" data-dfn-type="dfn" data-lt="composite operation accumulate"
                    data-noexport id="composite-operation-accumulate">累积</a>
            <dd data-md>
                <p><a data-link-type="dfn" href="#effect-value" id="ref-for-effect-value②⓪">效果值</a>将<a
                        data-link-type="dfn" href="https://www.w3.org/TR/css-values-4/#accumulation"
                        id="ref-for-accumulation">累积</a>到<a data-link-type="dfn" href="#underlying-value"
                        id="ref-for-underlying-value①⓪">基础值</a>。</p>
                <p>对于<a data-link-type="dfn" href="#animation-type" id="ref-for-animation-type⑨">动画类型</a>，如果<span
                        id="ref-for-accumulation①">累积操作</span>被定义为非交换的，则操作数的顺序为<span
                        id="ref-for-underlying-value①①">基础值</span>随后为<span id="ref-for-effect-value②①">效果值</span>。</p>
        </dl>
        <h4 class="heading settled" data-level="5.4.5" id="applying-the-composited-result"><span class="secno">5.4.5.
            </span><span class="content">应用合成结果</span><a class="self-link" href="#applying-the-composited-result"></a>
        </h4>
        <p>将<a data-link-type="dfn" href="#composited-value" id="ref-for-composited-value">合成值</a>应用于<a
                data-link-type="dfn" href="#target-property" id="ref-for-target-property⑦">目标属性</a>通过将指定值添加到 CSS 层叠来实现。
        </p>
        <p>添加此指定值的层叠级别取决于与效果栈中复合顺序最高的效果关联的动画的<a data-link-type="dfn" href="#animation-class"
                id="ref-for-animation-class④">类</a>。</p>
        <p>默认情况下，指定值添加到 CSS 层叠的“动画声明”级别（<a data-link-type="biblio" href="#biblio-css-cascade-3">[css-cascade-3]</a>）。
        </p>
        <div class="informative-bg">
            <em>本节是非规范性的</em>
            <p>例如，如果复合顺序最高的效果与“CSS 过渡”类动画相关联，则合成值将添加到层叠的“过渡声明”级别。</p>
        </div>
        <p>为 CSS <a data-link-type="dfn" href="#target-property" id="ref-for-target-property⑧">目标属性</a>计算的<a
                data-link-type="dfn" href="#composited-value" id="ref-for-composited-value②">合成值</a>使用以下过程进行应用。</p>
        <ol>
            <li data-md>
                <p>将属性的<var>基础值</var>计算为在没有动画的情况下为该属性生成的计算值。</p>
            <li data-md>
                <p>为属性建立<a data-link-type="dfn" href="#effect-stack" id="ref-for-effect-stack①⓪">效果栈</a>（参见 § 5.4.2
                    效果栈）。</p>
            <li data-md>
                <p>计算效果栈的<a data-link-type="dfn" href="#composited-value"
                        id="ref-for-composited-value③">合成值</a>，将属性的基础值作为初始基础值传入（参见 § 5.4.3 计算效果栈的结果）。</p>
            <li data-md>
                <p>将<a data-link-type="dfn" href="#composited-value" id="ref-for-composited-value④">合成值</a>插入到 CSS
                    层叠中，在为与效果栈顶部效果关联的动画类定义的级别插入。</p>
        </ol>

        <h3 class="heading settled" data-level="5.5" id="replacing-animations"><span class="secno">5.5. </span><span
                class="content">替换动画</span><a class="self-link" href="#replacing-animations"></a></h3>
        <div class="informative-bg">
            <em>本节是非规范性的</em>
            <p>使用本规范定义的编程接口，可以不断触发新的动画，使其无限期地对元素的动画样式产生影响。</p>
            <p>例如，考虑以下代码：</p>
            <div class="example" id="example-86ce4327">
                <a class="self-link" href="#example-86ce4327"></a>
                <pre class="lang-javascript highlight">elem<c- p>.</c->addEventListener<c- p>(</c-><c- t>'mousemove'</c-><c- p>,</c-> evt <c- p>=></c-> <c- p>{</c->
  circle<c- p>.</c->animate<c- p>(</c->
    <c- p>{</c-> transform<c- o>:</c-> <c- sb>`translate(</c-><c- si>${</c->evt<c- p>.</c->clientX<c- si>}</c-><c- sb>px, </c-><c- si>${</c->evt<c- p>.</c->clientY<c- si>}</c-><c- sb>px)`</c-> <c- p>},</c->
    <c- p>{</c-> duration<c- o>:</c-> <c- mf>500</c-><c- p>,</c-> fill<c- o>:</c-> <c- t>'forwards'</c-> <c- p>}</c->
  <c- p>);</c->
<c- p>});</c->
</pre>
            </div>
            <p>这段代码将在每次鼠标移动时生成一个新的前进填充动画，迅速产生数百甚至数千个前进填充动画。</p>
            <p>如果用户代理需要保留<em>所有</em>这些动画，动画列表将无限制增长，导致内存泄漏。</p>
            <p>本节定义了一种机制，使被覆盖的动画自动移除，除非作者明确要求保留它们。</p>
        </div>
        <h4 class="heading settled" data-level="5.5.1" id="animation-replace-state"><span class="secno">5.5.1.
            </span><span class="content">替换状态</span><a class="self-link" href="#animation-replace-state"></a>
        </h4>
        <p><a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation④⑨">动画</a>维护着一个<a
                class="dfn-paneled" data-dfn-type="dfn" data-noexport id="replace-state">替换状态</a>，该状态可以是以下值之一：</p>
        <ul>
            <li data-md>
                <p><a class="dfn-paneled" data-dfn-type="dfn" data-lt="active replace state" data-noexport
                        id="active-replace-state">活动状态</a></p>
            <li data-md>
                <p><a class="dfn-paneled" data-dfn-type="dfn" data-lt="removed replace state" data-noexport
                        id="removed-replace-state">移除状态</a></p>
            <li data-md>
                <p><a class="dfn-paneled" data-dfn-type="dfn" data-lt="persisted replace state" data-noexport
                        id="persisted-replace-state">持久状态</a></p>
        </ul>
        <p><a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation⑤⓪">动画</a>的初始<a
                data-link-type="dfn" href="#replace-state" id="ref-for-replace-state①">替换状态</a>为<a data-link-type="dfn"
                href="#active-replace-state" id="ref-for-active-replace-state">活动状态</a>。</p>
        <p>如果<a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation⑤①">动画</a>的<a
                data-link-type="dfn" href="#replace-state" id="ref-for-replace-state②">替换状态</a>为<a data-link-type="dfn"
                href="#removed-replace-state" id="ref-for-removed-replace-state①">移除状态</a>，则其<a data-link-type="dfn"
                href="#animation-effect" id="ref-for-animation-effect⑦⑦">动画效果</a>不会包括在其<a data-link-type="dfn"
                href="#target-property" id="ref-for-target-property⑨">目标属性</a>的<a data-link-type="dfn"
                href="#effect-stack" id="ref-for-effect-stack①③">效果栈</a>中。</p>
        <h4 class="heading settled" data-level="5.5.2" id="removing-replaced-animations"><span class="secno">5.5.2.
            </span><span class="content">移除被替换的动画</span><a class="self-link" href="#removing-replaced-animations"></a>
        </h4>
        <p>如果满足<em>所有</em>以下条件，<a data-link-type="dfn" href="#concept-animation"
                id="ref-for-concept-animation⑤②">动画</a>被认为是<a class="dfn-paneled" data-dfn-type="dfn"
                data-local-lt="replaceable" data-lt="replaceable animation" data-noexport
                id="replaceable-animation">可替换的</a>：</p>
        <ul>
            <li data-md>
                <p>该<a data-link-type="dfn" href="#concept-animation"
                        id="ref-for-concept-animation⑤③">动画</a>的存在<em>不是</em>由标记规定的。即，它<em>不是</em>具有<a
                        data-link-type="dfn" href="https://drafts.csswg.org/css-animations-2/#owning-element"
                        id="ref-for-owning-element">所属元素</a>的 CSS 动画，也<em>不是</em>具有<a data-link-type="dfn"
                        href="https://drafts.csswg.org/css-transitions-2/#owning-element"
                        id="ref-for-owning-element①">所属元素</a>的 CSS 过渡。</p>
            <li data-md>
                <p>该<a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation⑤④">动画</a>的<a
                        data-link-type="dfn" href="#animation-play-state" id="ref-for-animation-play-state⑧">播放状态</a>为<a
                        data-link-type="dfn" href="#play-state-finished" id="ref-for-play-state-finished①④">已完成</a>。</p>
            <li data-md>
                <p>该<a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation⑤⑤">动画</a>的<a
                        data-link-type="dfn" href="#replace-state" id="ref-for-replace-state③">替换状态</a><em>不是</em><a
                        data-link-type="dfn" href="#removed-replace-state" id="ref-for-removed-replace-state②">移除状态</a>。
                </p>
            <li data-md>
                <p>该<a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation⑤⑥">动画</a>与<a
                        data-link-type="dfn" href="#monotonically-increasing-timeline"
                        id="ref-for-monotonically-increasing-timeline⑦">单调递增</a>的<a data-link-type="dfn"
                        href="#timeline" id="ref-for-timeline⑤②">时间线</a>相关联。</p>
            <li data-md>
                <p>该<a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation⑤⑦">动画</a>具有<a
                        data-link-type="dfn" href="#animation-associated-effect"
                        id="ref-for-animation-associated-effect②⑥">关联效果</a>。</p>
            <li data-md>
                <p>该<a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation⑤⑧">动画</a>的<a
                        data-link-type="dfn" href="#animation-associated-effect"
                        id="ref-for-animation-associated-effect②⑦">关联效果</a>处于<a data-link-type="dfn" href="#in-effect"
                        id="ref-for-in-effect⑤">生效</a>状态。</p>
            <li data-md>
                <p>该<a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation⑤⑨">动画</a>的<a
                        data-link-type="dfn" href="#animation-associated-effect"
                        id="ref-for-animation-associated-effect②⑧">关联效果</a>具有<a data-link-type="dfn"
                        href="#keyframe-effect-effect-target" id="ref-for-keyframe-effect-effect-target①⓪">效果目标</a>。</p>
        </ul>
        <p>当请求为<code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/#document" id="ref-for-document⑥">文档</a></code>
            <var>doc</var> <a class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="remove-replaced-animations">移除被替换的动画</a>时，对于每个<a data-link-type="dfn" href="#concept-animation"
                id="ref-for-concept-animation⑥⓪">动画</a>，<var>animation</var>，如果：
        </p>
        <ul>
            <li data-md>
                <p>其关联的<a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect⑦⑧">动画效果</a>的<a
                        data-link-type="dfn" href="#keyframe-effect-effect-target"
                        id="ref-for-keyframe-effect-effect-target①①">效果目标</a>是<var>doc</var>的一个<a data-link-type="dfn"
                        href="https://dom.spec.whatwg.org/#concept-tree-descendant"
                        id="ref-for-concept-tree-descendant①">后代</a>，并且</p>
            <li data-md>
                <p>是<a data-link-type="dfn" href="#replaceable-animation" id="ref-for-replaceable-animation">可替换的</a>，并且
                </p>
            <li data-md>
                <p>其<a data-link-type="dfn" href="#replace-state" id="ref-for-replace-state④">替换状态</a>为<a
                        data-link-type="dfn" href="#active-replace-state" id="ref-for-active-replace-state①">活动状态</a>，并且
                </p>
            <li data-md>
                <p>对于其每个<a data-link-type="dfn" href="#target-property"
                        id="ref-for-target-property①⓪">目标属性</a>，存在一个与具有更高<a data-link-type="dfn"
                        href="#animation-composite-order" id="ref-for-animation-composite-order①">合成顺序</a>的可替换<a
                        data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation⑥①">动画</a>关联的<a
                        data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect⑦⑨">动画效果</a>，且其包括相同的<a
                        data-link-type="dfn" href="#target-property" id="ref-for-target-property①①">目标属性</a>，</p>
        </ul>
        <p>执行以下步骤：</p>
        <ol>
            <li data-md>
                <p>将<var>animation</var>的<a data-link-type="dfn" href="#replace-state"
                        id="ref-for-replace-state⑤">替换状态</a>设置为<a data-link-type="dfn" href="#removed-replace-state"
                        id="ref-for-removed-replace-state③">移除状态</a>。</p>
            <li data-md>
                <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-create"
                        id="ref-for-concept-event-create②">创建</a>一个<code
                        class="idl"><a data-link-type="idl" href="#animationplaybackevent" id="ref-for-animationplaybackevent②">AnimationPlaybackEvent</a></code>，<var>removeEvent</var>。
                </p>
            <li data-md>
                <p>将<var>removeEvent</var>的<code
                        class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-type" id="ref-for-dom-event-type②">类型</a></code>属性设置为<a
                        data-link-type="dfn" href="#remove-event" id="ref-for-remove-event">remove</a>。</p>
            <li data-md>
                <p>将<var>removeEvent</var>的<code
                        class="idl"><a data-link-type="idl" href="#dom-animationplaybackevent-currenttime" id="ref-for-dom-animationplaybackevent-currenttime②">currentTime</a></code>属性设置为<var>animation</var>的<a
                        data-link-type="dfn" href="#animation-current-time"
                        id="ref-for-animation-current-time④⑨">当前时间</a>。</p>
            <li data-md>
                <p>将<var>removeEvent</var>的<code
                        class="idl"><a data-link-type="idl" href="#dom-animationplaybackevent-timelinetime" id="ref-for-dom-animationplaybackevent-timelinetime③">timelineTime</a></code>属性设置为与<var>animation</var>关联的<a
                        data-link-type="dfn" href="#timeline" id="ref-for-timeline⑤③">时间线</a>的<a data-link-type="dfn"
                        href="#timeline-current-time" id="ref-for-timeline-current-time⑦">当前时间</a>。</p>
            <li data-md>
                <p>如果<var>animation</var>有<a data-link-type="dfn" href="#animation-document-for-timing"
                        id="ref-for-animation-document-for-timing⑤">用于计时的文档</a>，则将<var>removeEvent</var>附加到其<a
                        data-link-type="dfn" href="#pending-animation-event-queue"
                        id="ref-for-pending-animation-event-queue④">待处理动画事件队列</a>中，并附上其目标<var>animation</var>。</p>
                <p>否则，<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task"
                        id="ref-for-queue-a-task②">排队任务</a>以在<var>animation</var>处<a data-link-type="dfn"
                        href="https://dom.spec.whatwg.org/#concept-event-dispatch"
                        id="ref-for-concept-event-dispatch③">派发</a><var>removeEvent</var>。此任务的任务源为<a
                        data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source"
                        id="ref-for-dom-manipulation-task-source②">DOM 操作任务源</a>。</p>
        </ol>

        <h3 class="heading settled" data-level="5.6" id="side-effects-section"><span class="secno">5.6. </span><span
                class="content">动画的副作用</span><a class="self-link" href="#side-effects-section"></a>
        </h3>
        <p>对于至少由一个<a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect⑧①">动画效果</a>且该效果为<a
                data-link-type="dfn" href="#current" id="ref-for-current②">当前</a>或<a data-link-type="dfn"
                href="#in-effect" id="ref-for-in-effect⑥">生效</a>状态，并且与<a data-link-type="dfn" href="#concept-animation"
                id="ref-for-concept-animation⑥②">动画</a>相关联的属性，且该动画的<a data-link-type="dfn" href="#replace-state"
                id="ref-for-replace-state⑥">替换状态</a>并<em>未</em>被<a data-link-type="dfn" href="#removed-replace-state"
                id="ref-for-removed-replace-state④">移除</a>，
            用户代理必须表现得像该元素的<a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-will-change-1/#propdef-will-change"
                id="ref-for-propdef-will-change">will-change</a>属性 (<a data-link-type="biblio"
                href="#biblio-css-will-change-1">[css-will-change-1]</a>) 包含该属性一样。</p>
        <div class="informative-bg">
            <em>本节是非规范性的</em>
            <p>根据上述要求，如果动画目标为元素的<a class="property css" data-link-type="property"
                    href="https://www.w3.org/TR/css-transforms-1/#propdef-transform"
                    id="ref-for-propdef-transform">transform</a>属性，那么只要该<a data-link-type="dfn"
                    href="#keyframe-effect-effect-target" id="ref-for-keyframe-effect-effect-target①③">效果目标</a>的<a
                    data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation⑥③">动画</a>处于<a
                    data-link-type="dfn" href="#animation-effect-before-phase"
                    id="ref-for-animation-effect-before-phase⑧">前阶段</a>、<a data-link-type="dfn"
                    href="#animation-effect-active-phase" id="ref-for-animation-effect-active-phase⑦">活动阶段</a>
                或者，如果它的<a data-link-type="dfn" href="#fill-mode"
                    id="ref-for-fill-mode⑨">填充模式</a>为“forwards”或“both”，那么它将会创建一个<a data-link-type="dfn"
                    href="https://www.w3.org/TR/CSS21/visuren.html#x43" id="ref-for-x43">堆叠上下文</a>。</p>
        </div>

        <h2 class="heading settled" data-level="6" id="programming-interface"><span class="secno">6. </span><span
                class="content">编程接口</span><a class="self-link" href="#programming-interface"></a></h2>
        <div class="informative-bg">
            <em>本节为非规范性内容</em>
            <p>除了上面描述的抽象模型之外，Web 动画还定义了一个编程接口来操作该模型。该接口可用于检查和扩展通过声明方式生成的动画，或在过程方法更为合适时直接生成动画。</p>
        </div>
        <h3 class="heading settled" data-level="6.1" id="time-values-in-the-programming-interface"><span
                class="secno">6.1. </span><span class="content">编程接口中的时间值</span><a class="self-link"
                href="#time-values-in-the-programming-interface"></a></h3>
        <p><a data-link-type="dfn" href="#time-value" id="ref-for-time-value④④">时间值</a>在编程接口中表示为<code>double</code>类型。<a
                data-link-type="dfn" href="#unresolved" id="ref-for-unresolved①①②">未解析</a>的时间值用<code>null</code>表示。</p>
        <h3 class="heading settled" data-level="6.2" id="the-animationtimeline-interface"><span class="secno">6.2.
            </span><span class="content"><code>AnimationTimeline</code> 接口</span><a class="self-link"
                href="#the-animationtimeline-interface"></a></h3>
        <p><a data-link-type="dfn" href="#timeline" id="ref-for-timeline⑤⑤">时间线</a>在 Web 动画 API 中由<code
                class="idl"><a data-link-type="idl" href="#animationtimeline" id="ref-for-animationtimeline">AnimationTimeline</a></code>接口表示。
        </p>
        <pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="animationtimeline"><code><c- g>AnimationTimeline</c-></code></dfn> {
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double" id="ref-for-idl-double"><c- b>double</c-></a>? <a class="idl-code" data-link-type="attribute" data-readonly data-type="double?" href="#dom-animationtimeline-currenttime" id="ref-for-dom-animationtimeline-currenttime"><c- g>currentTime</c-></a>;
};
</pre>
        <div class="attributes">
            <dl>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="AnimationTimeline" data-dfn-type="attribute"
                        data-export id="dom-animationtimeline-currenttime"><code>currentTime</code></dfn>，<span> 类型为 <a
                            data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#idl-double"
                            id="ref-for-idl-double①">double</a>，只读，可为空</span>
                <dd data-md>
                    <p>返回该时间线的<a data-link-type="dfn" href="#timeline-current-time"
                            id="ref-for-timeline-current-time⑨">当前时间</a>，如果该时间线<a data-link-type="dfn"
                            href="#inactive-timeline" id="ref-for-inactive-timeline①⑧">不活跃</a>，则返回<code>null</code>。</p>
            </dl>
        </div>
        <h3 class="heading settled" data-level="6.3" id="the-documenttimeline-interface"><span class="secno">6.3.
            </span><span class="content"><code>DocumentTimeline</code> 接口</span><a class="self-link"
                href="#the-documenttimeline-interface"></a></h3>
        <p><a data-link-type="dfn" href="#document-timeline" id="ref-for-document-timeline⑤">文档时间线</a>，包括<a
                data-link-type="dfn" href="#document-default-document-timeline"
                id="ref-for-document-default-document-timeline④">默认文档时间线</a>，在 Web 动画 API 中由<code
                class="idl"><a data-link-type="idl" href="#documenttimeline" id="ref-for-documenttimeline">DocumentTimeline</a></code>接口表示。
        </p>
        <pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-documenttimelineoptions"><code><c- g>DocumentTimelineOptions</c-></code></dfn> {
  <a data-link-type="idl-name" href="https://www.w3.org/TR/hr-time-3/#dom-domhighrestimestamp" id="ref-for-dom-domhighrestimestamp"><c- n>DOMHighResTimeStamp</c-></a> <a class="idl-code" data-default="0" data-link-type="dict-member" data-type="DOMHighResTimeStamp " href="#dom-documenttimelineoptions-origintime" id="ref-for-dom-documenttimelineoptions-origintime"><c- g>originTime</c-></a> = 0;
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed①"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="documenttimeline"><code><c- g>DocumentTimeline</c-></code></dfn> : <a data-link-type="idl-name" href="#animationtimeline" id="ref-for-animationtimeline①"><c- n>AnimationTimeline</c-></a> {
  <a class="idl-code" data-link-type="constructor" href="#dom-documenttimeline-documenttimeline" id="ref-for-dom-documenttimeline-documenttimeline"><c- g>constructor</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-documenttimelineoptions" id="ref-for-dictdef-documenttimelineoptions"><c- n>DocumentTimelineOptions</c-></a> <a class="idl-code" data-link-type="argument" href="#dom-documenttimeline-documenttimeline-options-options" id="ref-for-dom-documenttimeline-documenttimeline-options-options"><c- g>options</c-></a> = {});
};
</pre>
        <div class="members">
            <dl>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="DocumentTimelineOptions"
                        data-dfn-type="dict-member" data-export
                        id="dom-documenttimelineoptions-origintime"><code>originTime</code></dfn>，<span> 类型为 <a
                            data-link-type="idl-name" href="https://www.w3.org/TR/hr-time-3/#dom-domhighrestimestamp"
                            id="ref-for-dom-domhighrestimestamp①">DOMHighResTimeStamp</a>，默认为<code>0</code></span>
                <dd data-md>
                    <p>指定时间线的<a data-link-type="dfn" href="#origin-time" id="ref-for-origin-time②">原点时间</a>，以相对于<a
                            data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-time-origin"
                            id="ref-for-concept-settings-object-time-origin④">时间原点</a>的毫秒数表示。</p>
            </dl>
        </div>
        <div class="constructors">
            <dl>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="DocumentTimeline"
                        data-dfn-type="constructor" data-export
                        data-lt="DocumentTimeline(options)|constructor(options)|DocumentTimeline()|constructor()"
                        id="dom-documenttimeline-documenttimeline"><code>DocumentTimeline (options)</code></dfn>
                <dd data-md>
                    <p>创建一个新的<code
                            class="idl"><a data-link-type="idl" href="#documenttimeline" id="ref-for-documenttimeline①">DocumentTimeline</a></code>。与该时间线关联的<code
                            class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/#document" id="ref-for-document⑦">Document</a></code>是与<code
                            class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/#document" id="ref-for-document⑧">Document</a></code>关联的<code
                            class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window">Window</a></code>，该<code
                            class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/webappapis.html#current-global-object" id="ref-for-current-global-object②">当前全局对象</a></code>。
                    </p>
                    <div class="parameters">
                        <dl>
                            <dt data-md><dfn class="dfn-paneled idl-code"
                                    data-dfn-for="DocumentTimeline/DocumentTimeline(options)" data-dfn-type="argument"
                                    data-export
                                    id="dom-documenttimeline-documenttimeline-options-options"><code>options</code></dfn>
                            <dd data-md>
                                <p>为新创建的时间线配置参数。本规范仅定义了<code
                                        class="idl"><a data-link-type="idl" href="#dom-documenttimelineoptions-origintime" id="ref-for-dom-documenttimelineoptions-origintime①">originTime</a></code>成员，但其他规范可能会扩展此集。
                                </p>
                        </dl>
                    </div>
            </dl>
        </div>

        <h3 class="heading settled" data-level="6.4" id="the-animation-interface"><span class="secno">6.4. </span><span
                class="content"><code>Animation</code> 接口</span><a class="self-link"
                href="#the-animation-interface"></a></h3>
        <p><a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation⑥④">动画</a>在 Web 动画 API 中由<code
                class="idl"><a data-link-type="idl" href="#animation" id="ref-for-animation">Animation</a></code>接口表示。
        </p>

        <pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed②"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="animation"><code><c- g>Animation</c-></code></dfn> : <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#eventtarget" id="ref-for-eventtarget"><c- n>EventTarget</c-></a> {
    <a class="idl-code" data-link-type="constructor" href="#dom-animation-animation" id="ref-for-dom-animation-animation"><c- g>constructor</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#animationeffect" id="ref-for-animationeffect"><c- n>AnimationEffect</c-></a>? <a class="idl-code" data-link-type="argument" href="#dom-animation-animation-effect-timeline-effect" id="ref-for-dom-animation-animation-effect-timeline-effect"><c- g>effect</c-></a> = <c- b>null</c->,
                <c- b>optional</c-> <a data-link-type="idl-name" href="#animationtimeline" id="ref-for-animationtimeline②"><c- n>AnimationTimeline</c-></a>? <a class="idl-code" data-link-type="argument" href="#dom-animation-animation-effect-timeline-timeline" id="ref-for-dom-animation-animation-effect-timeline-timeline"><c- g>timeline</c-></a>);
             <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString"><c- b>DOMString</c-></a>                <a class="idl-code" data-link-type="attribute" data-type="DOMString" href="#dom-animation-id" id="ref-for-dom-animation-id"><c- g>id</c-></a>;
             <c- b>attribute</c-> <a data-link-type="idl-name" href="#animationeffect" id="ref-for-animationeffect①"><c- n>AnimationEffect</c-></a>?         <a class="idl-code" data-link-type="attribute" data-type="AnimationEffect?" href="#dom-animation-effect" id="ref-for-dom-animation-effect"><c- g>effect</c-></a>;
             <c- b>attribute</c-> <a data-link-type="idl-name" href="#animationtimeline" id="ref-for-animationtimeline③"><c- n>AnimationTimeline</c-></a>?       <a class="idl-code" data-link-type="attribute" data-type="AnimationTimeline?" href="#dom-animation-timeline" id="ref-for-dom-animation-timeline"><c- g>timeline</c-></a>;
             <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double" id="ref-for-idl-double②"><c- b>double</c-></a>?                  <a class="idl-code" data-link-type="attribute" data-type="double?" href="#dom-animation-starttime" id="ref-for-dom-animation-starttime"><c- g>startTime</c-></a>;
             <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double" id="ref-for-idl-double③"><c- b>double</c-></a>?                  <a class="idl-code" data-link-type="attribute" data-type="double?" href="#dom-animation-currenttime" id="ref-for-dom-animation-currenttime"><c- g>currentTime</c-></a>;
             <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double" id="ref-for-idl-double④"><c- b>double</c-></a>                   <a class="idl-code" data-link-type="attribute" data-type="double" href="#dom-animation-playbackrate" id="ref-for-dom-animation-playbackrate"><c- g>playbackRate</c-></a>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#enumdef-animationplaystate" id="ref-for-enumdef-animationplaystate"><c- n>AnimationPlayState</c-></a>       <a class="idl-code" data-link-type="attribute" data-readonly data-type="AnimationPlayState" href="#dom-animation-playstate" id="ref-for-dom-animation-playstate"><c- g>playState</c-></a>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#enumdef-animationreplacestate" id="ref-for-enumdef-animationreplacestate"><c- n>AnimationReplaceState</c-></a>    <a class="idl-code" data-link-type="attribute" data-readonly data-type="AnimationReplaceState" href="#dom-animation-replacestate" id="ref-for-dom-animation-replacestate"><c- g>replaceState</c-></a>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean"><c- b>boolean</c-></a>                  <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-animation-pending" id="ref-for-dom-animation-pending"><c- g>pending</c-></a>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#animation" id="ref-for-animation①"><c- n>Animation</c-></a>>       <a class="idl-code" data-link-type="attribute" data-readonly data-type="Promise<Animation>" href="#dom-animation-ready" id="ref-for-dom-animation-ready"><c- g>ready</c-></a>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise①"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#animation" id="ref-for-animation②"><c- n>Animation</c-></a>>       <a class="idl-code" data-link-type="attribute" data-readonly data-type="Promise<Animation>" href="#dom-animation-finished" id="ref-for-dom-animation-finished"><c- g>finished</c-></a>;
             <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" id="ref-for-eventhandler"><c- n>EventHandler</c-></a>             <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-animation-onfinish" id="ref-for-dom-animation-onfinish"><c- g>onfinish</c-></a>;
             <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" id="ref-for-eventhandler①"><c- n>EventHandler</c-></a>             <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-animation-oncancel" id="ref-for-dom-animation-oncancel"><c- g>oncancel</c-></a>;
             <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" id="ref-for-eventhandler②"><c- n>EventHandler</c-></a>             <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-animation-onremove" id="ref-for-dom-animation-onremove"><c- g>onremove</c-></a>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-animation-cancel" id="ref-for-dom-animation-cancel"><c- g>cancel</c-></a>();
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined①"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-animation-finish" id="ref-for-dom-animation-finish①"><c- g>finish</c-></a>();
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined②"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-animation-play" id="ref-for-dom-animation-play"><c- g>play</c-></a>();
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined③"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-animation-pause" id="ref-for-dom-animation-pause"><c- g>pause</c-></a>();
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined④"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-animation-updateplaybackrate" id="ref-for-dom-animation-updateplaybackrate"><c- g>updatePlaybackRate</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double" id="ref-for-idl-double⑤"><c- b>double</c-></a> <a class="idl-code" data-link-type="argument" href="#dom-animation-updateplaybackrate-playbackrate-playbackrate" id="ref-for-dom-animation-updateplaybackrate-playbackrate-playbackrate"><c- g>playbackRate</c-></a>);
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined⑤"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-animation-reverse" id="ref-for-dom-animation-reverse"><c- g>reverse</c-></a>();
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined⑥"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-animation-persist" id="ref-for-dom-animation-persist"><c- g>persist</c-></a>();
    [<a class="idl-code" data-link-type="extended-attribute" href="https://html.spec.whatwg.org/multipage/custom-elements.html#cereactions" id="ref-for-cereactions"><c- g>CEReactions</c-></a>]
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined⑦"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-animation-commitstyles" id="ref-for-dom-animation-commitstyles"><c- g>commitStyles</c-></a>();
};
</pre>
        <div class="constructors">
            <dl>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="Animation" data-dfn-type="constructor"
                        data-export
                        data-lt="Animation(effect, timeline)|constructor(effect, timeline)|Animation(effect)|constructor(effect)|Animation()|constructor()"
                        id="dom-animation-animation"><code>Animation (effect, timeline)</code></dfn>
                <dd data-md>
                    <p>使用以下过程创建一个新的<code
                            class="idl"><a data-link-type="idl" href="#animation" id="ref-for-animation③">Animation</a></code>对象。
                    </p>
                    <ol>
                        <li data-md>
                            <p>让<var>animation</var>成为一个新的<code
                                    class="idl"><a data-link-type="idl" href="#animation" id="ref-for-animation④">Animation</a></code>对象。
                            </p>
                        <li data-md>
                            <p>运行将<a data-link-type="dfn" href="#animation-set-the-timeline-of-an-animation"
                                    id="ref-for-animation-set-the-timeline-of-an-animation">设置动画时间轴</a>的过程，传递<var>animation</var>并使用<var>timeline</var>作为<var>新时间轴</var>，或者如果<var>timeline</var>参数缺失，则传递与<code
                                    class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/#document" id="ref-for-document⑨">文档</a></code>相关联的<code
                                    class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window①">窗口</a></code>的<a
                                    data-link-type="dfn" href="#document-default-document-timeline"
                                    id="ref-for-document-default-document-timeline⑤">默认文档时间轴</a>，该窗口是<a
                                    data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/webappapis.html#current-global-object"
                                    id="ref-for-current-global-object③">当前全局对象</a>。</p>

                        <li data-md>
                            <p>运行<a data-link-type="dfn" href="#animation-set-the-associated-effect-of-an-animation"
                                    id="ref-for-animation-set-the-associated-effect-of-an-animation①">设置动画关联效果</a>的过程，将<var>source</var>作为<var>新效果</var>传递。
                            </p>
                    </ol>
                    <div class="parameters">
                        <dl>
                            <dt data-md><dfn class="dfn-paneled idl-code"
                                    data-dfn-for="Animation/Animation(effect, timeline)" data-dfn-type="argument"
                                    data-export
                                    id="dom-animation-animation-effect-timeline-effect"><code>effect</code></dfn>
                            <dd data-md>
                                <p>一个可选值，如果不为 null，则指定要分配给新创建的<a data-link-type="dfn" href="#concept-animation"
                                        id="ref-for-concept-animation⑥⑤">动画</a>的<a data-link-type="dfn"
                                        href="#animation-associated-effect"
                                        id="ref-for-animation-associated-effect②⑨">关联效果</a>。</p>
                            <dt data-md><dfn class="dfn-paneled idl-code"
                                    data-dfn-for="Animation/Animation(effect, timeline)" data-dfn-type="argument"
                                    data-export
                                    id="dom-animation-animation-effect-timeline-timeline"><code>timeline</code></dfn>
                            <dd data-md>
                                <p>一个可选值，如果存在，则指定要与新创建的<a data-link-type="dfn" href="#concept-animation"
                                        id="ref-for-concept-animation⑥⑥">动画</a>关联的<a data-link-type="dfn"
                                        href="#timeline" id="ref-for-timeline⑤⑥">时间线</a>。如果缺失，则使用与<code
                                        class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/#document" id="ref-for-document①⓪">Document</a></code>关联的<a
                                        data-link-type="dfn" href="#document-default-document-timeline"
                                        id="ref-for-document-default-document-timeline⑥">默认文档时间线</a>，<code
                                        class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window②">Window</a></code>是<a
                                        data-link-type="dfn"
                                        href="https://html.spec.whatwg.org/multipage/webappapis.html#current-global-object"
                                        id="ref-for-current-global-object④">当前全局对象</a>。</p>
                        </dl>
                    </div>
            </dl>
        </div>
        <div class="attributes">
            <dl>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="Animation" data-dfn-type="attribute"
                        data-export id="dom-animation-id"><code>id</code></dfn>，<span>类型为<a data-link-type="idl-name"
                            href="https://webidl.spec.whatwg.org/#idl-DOMString"
                            id="ref-for-idl-DOMString①">DOMString</a></span>
                <dd data-md>
                    <p>用于标识动画的字符串。</p>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="Animation" data-dfn-type="attribute"
                        data-export id="dom-animation-effect"><code>effect</code></dfn>，<span>类型为<a
                            data-link-type="idl-name" href="#animationeffect"
                            id="ref-for-animationeffect②">AnimationEffect</a>，可为空</span>
                <dd data-md>
                    <p>此动画的<a data-link-type="dfn" href="#animation-associated-effect"
                            id="ref-for-animation-associated-effect③⓪">关联效果</a>。设置此属性将使用<a data-link-type="dfn"
                            href="#animation-set-the-associated-effect-of-an-animation"
                            id="ref-for-animation-set-the-associated-effect-of-an-animation②">设置动画关联效果</a>的过程更新对象的<span
                            id="ref-for-animation-associated-effect③①">关联效果</span>。</p>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="Animation" data-dfn-type="attribute"
                        data-export id="dom-animation-timeline"><code>timeline</code></dfn>，<span>类型为<a
                            data-link-type="idl-name" href="#animationtimeline"
                            id="ref-for-animationtimeline④">AnimationTimeline</a>，可为空</span>
                <dd data-md>
                    <p>与此动画关联的<a data-link-type="dfn" href="#timeline" id="ref-for-timeline⑤⑦">时间线</a>。设置此属性将使用<a
                            data-link-type="dfn" href="#animation-set-the-timeline-of-an-animation"
                            id="ref-for-animation-set-the-timeline-of-an-animation①">设置动画时间线</a>的过程更新对象的<span
                            id="ref-for-timeline⑤⑧">时间线</span>。</p>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="Animation" data-dfn-type="attribute"
                        data-export id="dom-animation-starttime"><code>startTime</code></dfn>，<span>类型为<a
                            data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#idl-double"
                            id="ref-for-idl-double⑥">double</a>，可为空</span>
                <dd data-md>
                    <p>返回此动画的<a data-link-type="dfn" href="#animation-start-time"
                            id="ref-for-animation-start-time⑤①">开始时间</a>。设置此属性将使用<a data-link-type="dfn"
                            href="#set-the-start-time" id="ref-for-set-the-start-time①">设置开始时间</a>的过程将对象的<span
                            id="ref-for-animation-start-time⑤②">开始时间</span>更新为新值。</p>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="Animation" data-dfn-type="attribute"
                        data-export id="dom-animation-currenttime"><code>currentTime</code></dfn>，<span>类型为<a
                            data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#idl-double"
                            id="ref-for-idl-double⑦">double</a>，可为空</span>
                <dd data-md>
                    <p>此动画的<a data-link-type="dfn" href="#animation-current-time"
                            id="ref-for-animation-current-time⑤⓪">当前时间</a>。设置此属性将遵循<a data-link-type="dfn"
                            href="#animation-set-the-current-time"
                            id="ref-for-animation-set-the-current-time③">设置当前时间</a>的过程，将对象的当前时间更新为新值。</p>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="Animation" data-dfn-type="attribute"
                        data-export id="dom-animation-playbackrate"><code>playbackRate</code></dfn>，<span>类型为<a
                            data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#idl-double"
                            id="ref-for-idl-double⑧">double</a></span>
                <dd data-md>
                    <p>此动画的<a data-link-type="dfn" href="#playback-rate"
                            id="ref-for-playback-rate③⑨">播放速度</a>。设置此属性将遵循<a data-link-type="dfn"
                            href="#set-the-playback-rate"
                            id="ref-for-set-the-playback-rate②">设置播放速度</a>的过程，将对象的播放速度更新为新值。</p>
                    <div class="note" role="note">
                        <p>设置此属性会同步更新<a data-link-type="dfn" href="#playback-rate"
                                id="ref-for-playback-rate④⓪">播放速度</a>，这意味着它不会尝试与在单独进程或线程上运行的动画的播放状态同步。因此，为正在播放的动画设置<code
                                class="idl"><a data-link-type="idl" href="#dom-animation-playbackrate" id="ref-for-dom-animation-playbackrate①">playbackRate</a></code>可能会导致动画跳跃。
                        </p>
                        <p>要为正在播放的动画设置<a data-link-type="dfn" href="#playback-rate"
                                id="ref-for-playback-rate④①">播放速度</a>，以便它平滑更新，请使用异步<code
                                class="idl"><a data-link-type="idl" href="#dom-animation-updateplaybackrate" id="ref-for-dom-animation-updateplaybackrate①">updatePlaybackRate()</a></code>方法。
                        </p>
                    </div>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="Animation" data-dfn-type="attribute"
                        data-export id="dom-animation-playstate"><code>playState</code></dfn>，<span>类型为<a
                            data-link-type="idl-name" href="#enumdef-animationplaystate"
                            id="ref-for-enumdef-animationplaystate①">AnimationPlayState</a>，只读</span>
                <dd data-md>
                    <p>此动画的<a data-link-type="dfn" href="#animation-play-state"
                            id="ref-for-animation-play-state⑨">播放状态</a>。</p>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="Animation" data-dfn-type="attribute"
                        data-export id="dom-animation-replacestate"><code>replaceState</code></dfn>，<span>类型为<a
                            data-link-type="idl-name" href="#enumdef-animationreplacestate"
                            id="ref-for-enumdef-animationreplacestate①">AnimationReplaceState</a>，只读</span>
                <dd data-md>
                    <p>此动画的<a data-link-type="dfn" href="#replace-state" id="ref-for-replace-state⑦">替换状态</a>。</p>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="Animation" data-dfn-type="attribute"
                        data-export id="dom-animation-pending"><code>pending</code></dfn>，<span>类型为<a
                            data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#idl-boolean"
                            id="ref-for-idl-boolean①">boolean</a>，只读</span>
                <dd data-md>
                    <p>如果此动画有<a data-link-type="dfn" href="#pending-play-task"
                            id="ref-for-pending-play-task①⑧">待处理播放任务</a>或<a data-link-type="dfn"
                            href="#pending-pause-task" id="ref-for-pending-pause-task①⑧">待处理暂停任务</a>，则返回 true。</p>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="Animation" data-dfn-type="attribute"
                        data-export id="dom-animation-ready"><code>ready</code></dfn>，<span>类型为 Promise&lt;<a
                            data-link-type="idl-name" href="#animation" id="ref-for-animation⑤">Animation</a>>，只读</span>
                <dd data-md>
                    <p>返回此对象的<a data-link-type="dfn" href="#current-ready-promise"
                            id="ref-for-current-ready-promise①⑦">当前 ready promise</a>。</p>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="Animation" data-dfn-type="attribute"
                        data-export id="dom-animation-finished"><code>finished</code></dfn>，<span>类型为 Promise&lt;<a
                            data-link-type="idl-name" href="#animation" id="ref-for-animation⑥">Animation</a>>，只读</span>
                <dd data-md>
                    <p>返回此对象的<a data-link-type="dfn" href="#current-finished-promise"
                            id="ref-for-current-finished-promise①②">当前 finished promise</a>。</p>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="Animation" data-dfn-type="attribute"
                        data-export id="dom-animation-onfinish"><code>onfinish</code></dfn>，<span>类型为<a
                            data-link-type="idl-name"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"
                            id="ref-for-eventhandler③">EventHandler</a></span>
                <dd data-md>
                    <p><a data-link-type="dfn" href="#finish-event" id="ref-for-finish-event②">finish 事件</a>的事件处理程序。</p>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="Animation" data-dfn-type="attribute"
                        data-export id="dom-animation-oncancel"><code>oncancel</code></dfn>，<span>类型为<a
                            data-link-type="idl-name"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"
                            id="ref-for-eventhandler④">EventHandler</a></span>
                <dd data-md>
                    <p><a data-link-type="dfn" href="#cancel-event" id="ref-for-cancel-event③">cancel 事件</a>的事件处理程序。</p>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="Animation" data-dfn-type="attribute"
                        data-export id="dom-animation-onremove"><code>onremove</code></dfn>，<span>类型为<a
                            data-link-type="idl-name"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"
                            id="ref-for-eventhandler⑤">EventHandler</a></span>
                <dd data-md>
                    <p><a data-link-type="dfn" href="#remove-event" id="ref-for-remove-event①">remove 事件</a>的事件处理程序。</p>
            </dl>
        </div>
        <div class="methods">
            <dl>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="Animation" data-dfn-type="method"
                        data-export data-lt="cancel()" id="dom-animation-cancel"><code>void cancel()</code></dfn>
                <dd data-md>
                    <p>通过运行<a data-link-type="dfn" href="#cancel-an-animation"
                            id="ref-for-cancel-an-animation①">取消动画</a>的过程来清除此动画引起的所有效果并中止其播放。</p>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="Animation" data-dfn-type="method"
                        data-export data-lt="finish()" id="dom-animation-finish"><code>void finish()</code></dfn>
                <dd data-md>
                    <p>通过运行<a data-link-type="dfn" href="#finish-an-animation"
                            id="ref-for-finish-an-animation②">完成动画</a>的过程，在当前方向上将动画设置为<a data-link-type="dfn"
                            href="#associated-effect-end" id="ref-for-associated-effect-end①⑦">关联效果结束</a>。</p>
                    <div class="exceptions">
                        <dl>
                            <dt data-md>DOMException of type <code
                                    class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidstateerror" id="ref-for-invalidstateerror④">InvalidStateError</a></code>
                            <dd data-md>
                                <p>如果此动画的<a data-link-type="dfn" href="#playback-rate"
                                        id="ref-for-playback-rate④②">播放速度</a>为零，或者如果此动画的<span
                                        id="ref-for-playback-rate④③">播放速度</span> > 零且<a data-link-type="dfn"
                                        href="#associated-effect-end"
                                        id="ref-for-associated-effect-end①⑧">关联效果结束</a>为无穷大，则引发。</p>
                        </dl>
                    </div>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="Animation" data-dfn-type="method"
                        data-export data-lt="play()" id="dom-animation-play"><code>void play()</code></dfn>
                <dd data-md>
                    <p>通过运行<a data-link-type="dfn" href="#play-an-animation"
                            id="ref-for-play-an-animation④">播放动画</a>的过程，传递 true 作为<var>自动回放</var>标志的值，开始或恢复动画的播放。</p>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="Animation" data-dfn-type="method"
                        data-export data-lt="pause()" id="dom-animation-pause"><code>void pause()</code></dfn>
                <dd data-md>
                    <p>通过运行<a data-link-type="dfn" href="#pause-an-animation"
                            id="ref-for-pause-an-animation">暂停动画</a>的过程暂停此动画的播放。</p>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="Animation" data-dfn-type="method"
                        data-export data-lt="updatePlaybackRate(playbackRate)"
                        id="dom-animation-updateplaybackrate"><code>void updatePlaybackRate(playbackRate)</code></dfn>
                <dd data-md>
                    <p>通过执行<a data-link-type="dfn" href="#seamlessly-update-the-playback-rate"
                            id="ref-for-seamlessly-update-the-playback-rate">无缝更新播放速度</a>的过程，传递<code
                            class="idl"><a data-link-type="idl" href="#dom-animation-updateplaybackrate-playbackrate-playbackrate" id="ref-for-dom-animation-updateplaybackrate-playbackrate-playbackrate①">playbackRate</a></code>作为<var>新播放速度</var>，对该动画的<a
                            data-link-type="dfn" href="#playback-rate" id="ref-for-playback-rate④④">播放速度</a>进行异步更新。</p>
                    <div class="parameters">
                        <dl>
                            <dt data-md><dfn class="dfn-paneled idl-code"
                                    data-dfn-for="Animation/updatePlaybackRate(playbackRate)" data-dfn-type="argument"
                                    data-export
                                    id="dom-animation-updateplaybackrate-playbackrate-playbackrate"><code>playbackRate</code></dfn>
                            <dd data-md>
                                <p>指定要使用的更新后播放速度的有限实数。</p>
                        </dl>
                    </div>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="Animation" data-dfn-type="method"
                        data-export data-lt="reverse()" id="dom-animation-reverse"><code>void reverse()</code></dfn>
                <dd data-md>
                    <p>反转此动画的<a data-link-type="dfn" href="#playback-rate" id="ref-for-playback-rate④⑤">播放速度</a>并使用<a
                            data-link-type="dfn" href="#reverse-an-animation"
                            id="ref-for-reverse-an-animation">反转动画</a>的过程进行播放。与<a class="idl-code"
                            data-link-type="method" href="#dom-animation-play"
                            id="ref-for-dom-animation-play①">play()</a>类似，此方法会取消动画的暂停状态，并且如果动画已经在反方向播放完毕，则会将其定位到<a
                            data-link-type="dfn" href="#animation-associated-effect"
                            id="ref-for-animation-associated-effect③②">关联效果</a>的开始。</p>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="Animation" data-dfn-type="method"
                        data-export data-lt="persist()" id="dom-animation-persist"><code>void persist()</code></dfn>
                <dd data-md>
                    <p>将此动画的<a data-link-type="dfn" href="#replace-state" id="ref-for-replace-state⑧">替换状态</a>设置为<a
                            data-link-type="dfn" href="#persisted-replace-state"
                            id="ref-for-persisted-replace-state">已持久化</a>。</p>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="Animation" data-dfn-type="method"
                        data-export data-lt="commitStyles()"
                        id="dom-animation-commitstyles"><code>void commitStyles()</code></dfn>
                <dd data-md>
                    <p>使用<a data-link-type="dfn" href="#commit-computed-styles"
                            id="ref-for-commit-computed-styles">提交计算样式</a>的过程，将此动画的<a data-link-type="dfn"
                            href="#animation-effect" id="ref-for-animation-effect⑧②">动画效果</a>产生的当前<a
                            data-link-type="dfn" href="#effect-value" id="ref-for-effect-value②②">效果值</a>写入其对应的<a
                            data-link-type="dfn" href="#keyframe-effect-effect-target"
                            id="ref-for-keyframe-effect-effect-target①④">效果目标</a>的内联样式中。</p>
                    <p>与此接口上定义的大多数其他方法不同，调用此方法<em>确实</em>会触发<a data-link-type="dfn"
                            href="https://www.w3.org/TR/css-transitions-1/#style-change-event"
                            id="ref-for-style-change-event">样式更改事件</a>（参见<a href="#model-liveness">§ 6.13 模型活性</a>）。</p>
                    <div class="note" role="note">
                        <p>由于<a data-link-type="dfn" href="#commit-computed-styles"
                                id="ref-for-commit-computed-styles①">提交计算样式</a>的过程包括动画的<a data-link-type="dfn"
                                href="#effect-value" id="ref-for-effect-value②③">效果值</a>，即使它已<a data-link-type="dfn"
                                href="#removed-replace-state"
                                id="ref-for-removed-replace-state⑤">移除</a>，此方法对于在动画被替换后保留其效果（参见<a
                                href="#removing-replaced-animations">§ 5.5.2 移除已替换的动画</a>）而不保留实际动画非常有用。</p>
                        <p>请注意，提交的值是在调用此方法时由<a data-link-type="dfn" href="#animation-effect"
                                id="ref-for-animation-effect⑧③">动画效果</a>产生的<em>计算</em>值。由于这些值是计算值，它们不会反映上下文的变化，例如响应 CSS
                            变量的更改或根据计算的 <span class="css">font-size</span> 的更改重新计算 em 单位，就像实时动画产生的值一样。</p>
                        <p>为了在替换动画后保留填充动画结果的完整保真度（参见<a href="#replacing-animations">§ 5.5 替换动画</a>），可以使用<code
                                class="idl"><a data-link-type="idl" href="#dom-animation-persist" id="ref-for-dom-animation-persist①">persist()</a></code>方法，但请注意，这样做会意味着动画继续消耗资源。
                        </p>
                    </div>
            </dl>
        </div>
        <p>要为<a data-link-type="dfn" href="#concept-animation"
                id="ref-for-concept-animation⑥⑦">动画</a>的<var>animation</var><dfn class="dfn-paneled" data-dfn-type="dfn"
                data-noexport id="commit-computed-styles">提交计算样式</dfn>：</p>
        <ol>
            <li data-md>
                <p>令<var>targets</var>为与<var>animation</var><a data-link-type="dfn" href="#associated-with-an-animation"
                        id="ref-for-associated-with-an-animation①①">关联</a>的<a data-link-type="dfn"
                        href="#animation-effect" id="ref-for-animation-effect⑧④">动画效果</a>的所有<a data-link-type="dfn"
                        href="#keyframe-effect-effect-target" id="ref-for-keyframe-effect-effect-target①⑤">效果目标</a>的<a
                        data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set"
                        id="ref-for-ordered-set">集合</a>。</p>
            <li data-md>
                <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate"
                        id="ref-for-list-iterate">对每个</a>集合中的<var>target</var>：</p>
                <ol>
                    <li data-md>
                        <p>如果<var>target</var>不是可以拥有<a data-link-type="dfn"
                                href="https://drafts.csswg.org/css-style-attr/#style-attribute"
                                id="ref-for-style-attribute">样式属性</a><a data-link-type="biblio"
                                href="#biblio-css-style-attr">[CSS-STYLE-ATTR]</a>的元素（例如，它是一个伪元素或在不定义样式属性的文档格式中的元素），则<a
                                data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw"
                                id="ref-for-dfn-throw⑤">抛出</a>"<code
                                class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#nomodificationallowederror" id="ref-for-nomodificationallowederror">NoModificationAllowedError</a></code>"<code
                                class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException④">DOMException</a></code>并中止这些步骤。
                        </p>
                    <li data-md>
                        <p>如果在应用任何待处理的样式更改后，<var>target</var>未<a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/browsers.html#being-rendered"
                                id="ref-for-being-rendered">被渲染</a>，则<a data-link-type="dfn"
                                href="https://webidl.spec.whatwg.org/#dfn-throw" id="ref-for-dfn-throw⑥">抛出</a>"<code
                                class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidstateerror" id="ref-for-invalidstateerror⑤">InvalidStateError</a></code>"<code
                                class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException⑤">DOMException</a></code>并中止这些步骤。
                        </p>
                        <div class="issue" id="issue-8f3b970c">
                            <a class="self-link" href="#issue-8f3b970c"></a>
                            <p>关于<a data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/browsers.html#being-rendered"
                                    id="ref-for-being-rendered①">正在渲染</a>的定义 <a data-link-type="biblio"
                                    href="#biblio-html">[HTML]</a> 以及 <a class="css" data-link-type="propdesc"
                                    href="https://www.w3.org/TR/css-display-3/#propdef-display"
                                    id="ref-for-propdef-display">display: contents</a> 仍在 <a
                                    href="https://github.com/whatwg/html/issues/1837">讨论中</a>。在本程序中，我们假设具有 <span
                                    class="css" id="ref-for-propdef-display①">display: contents</span> 且通常会有相关布局框的元素（即它是
                                <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#connected"
                                    id="ref-for-connected">连接的</a>，且不属于 <span class="css"
                                    id="ref-for-propdef-display②">display: none</span> 子树的一部分）<em>正在</em>被渲染。
                            </p>
                        </div>
                    <li data-md>
                        <p>让<var>inline style</var>成为获取与<var>target</var>的<a data-link-type="dfn"
                                href="https://drafts.csswg.org/css-style-attr/#style-attribute"
                                id="ref-for-style-attribute①">样式属性</a>对应的<a data-link-type="dfn"
                                href="https://www.w3.org/TR/cssom-1/#css-declaration-block"
                                id="ref-for-css-declaration-block">CSS 声明块</a>的结果。如果<var>target</var>没有<a
                                data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-element-attribute-has"
                                id="ref-for-concept-element-attribute-has">有</a><span
                                id="ref-for-style-attribute②">样式属性</span>，则令<var>inline style</var>成为一个新的空的<span
                                id="ref-for-css-declaration-block①">CSS 声明块</span>，<a data-link-type="dfn"
                                href="https://www.w3.org/TR/cssom-1/#cssstyledeclaration-owner-node"
                                id="ref-for-cssstyledeclaration-owner-node">所有者节点</a>设置为<var>target</var>。</p>
                    <li data-md>
                        <p>让<var>targeted properties</var>成为物理长手属性的<a data-link-type="dfn"
                                href="https://infra.spec.whatwg.org/#ordered-set"
                                id="ref-for-ordered-set①">集合</a>，它是至少一个<a data-link-type="dfn" href="#animation-effect"
                                id="ref-for-animation-effect⑧⑤">动画效果</a><a data-link-type="dfn"
                                href="#associated-with-an-animation"
                                id="ref-for-associated-with-an-animation①②">与动画关联</a>的<a data-link-type="dfn"
                                href="#target-property" id="ref-for-target-property①②">目标属性</a>，<var>animation</var>的<a
                                data-link-type="dfn" href="#keyframe-effect-effect-target"
                                id="ref-for-keyframe-effect-effect-target①⑥">效果目标</a>为<var>target</var>。</p>
                    <li data-md>
                        <p>对于<var>targeted properties</var>中的每个属性，<var>property</var>：</p>
                        <ol>
                            <li data-md>
                                <p>让<var>partialEffectStack</var>成为<var>target</var>上<var>property</var>的<a
                                        data-link-type="dfn" href="#effect-stack"
                                        id="ref-for-effect-stack①④">效果堆栈</a>的副本。</p>
                            <li data-md>
                                <p>如果<var>animation</var>的<a data-link-type="dfn" href="#replace-state"
                                        id="ref-for-replace-state⑨">替换状态</a>是<a data-link-type="dfn"
                                        href="#removed-replace-state" id="ref-for-removed-replace-state⑥">移除的</a>，则将所有<a
                                        data-link-type="dfn" href="#animation-effect"
                                        id="ref-for-animation-effect⑧⑥">动画效果</a><a data-link-type="dfn"
                                        href="#associated-with-an-animation"
                                        id="ref-for-associated-with-an-animation①③">与动画关联</a>，且其<a data-link-type="dfn"
                                        href="#keyframe-effect-effect-target"
                                        id="ref-for-keyframe-effect-effect-target①⑦">效果目标</a>为<var>target</var>且包括<var>property</var>作为<a
                                        data-link-type="dfn" href="#target-property"
                                        id="ref-for-target-property①③">目标属性</a>，添加到<var>partialEffectStack</var>。</p>
                            <li data-md>
                                <p>从<var>partialEffectStack</var>中移除任何其<a data-link-type="dfn"
                                        href="#associated-with-an-animation"
                                        id="ref-for-associated-with-an-animation①④">关联</a>的<a data-link-type="dfn"
                                        href="#animation-effect"
                                        id="ref-for-animation-effect⑧⑦">动画效果</a>具有比<var>animation</var>更高的<a
                                        data-link-type="dfn" href="#animation-composite-order"
                                        id="ref-for-animation-composite-order②">合成顺序</a>的效果。</p>
                            <li data-md>
                                <p>使用<var>target</var>的计算样式（参见<a
                                        href="#calculating-the-result-of-an-effect-stack">§ 5.4.3
                                        计算效果堆栈的结果</a>），让<var>effect value</var>成为计算<var>partialEffectStack</var>的结果。</p>
                            <li data-md>
                                <p><a data-link-type="dfn" href="https://www.w3.org/TR/cssom-1/#set-a-css-declaration"
                                        id="ref-for-set-a-css-declaration">设置 CSS 声明</a><var>property</var>的<var>effect
                                        value</var>在<var>inline style</var>中。</p>
                        </ol>
                    <li data-md>
                        <p><a data-link-type="dfn" href="https://www.w3.org/TR/cssom-1/#update-style-attribute-for"
                                id="ref-for-update-style-attribute-for">更新</a><var>inline style</var>的样式属性。</p>
                </ol>
        </ol>

        <h4 class="heading settled" data-level="6.4.1" id="the-animationplaystate-enumeration"><span
                class="secno">6.4.1. </span><span class="content"><code>AnimationPlayState</code> 枚举</span><a
                class="self-link" href="#the-animationplaystate-enumeration"></a></h4>
        <pre class="idl highlight def"><c- b>enum</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="enum" data-export id="enumdef-animationplaystate"><code><c- g>AnimationPlayState</c-></code></dfn> { <dfn class="idl-code" data-dfn-for="AnimationPlayState" data-dfn-type="enum-value" data-export id="dom-animationplaystate-idle"><code><c- s>"idle"</c-></code><a class="self-link" href="#dom-animationplaystate-idle"></a></dfn>, <dfn class="idl-code" data-dfn-for="AnimationPlayState" data-dfn-type="enum-value" data-export id="dom-animationplaystate-running"><code><c- s>"running"</c-></code><a class="self-link" href="#dom-animationplaystate-running"></a></dfn>, <dfn class="idl-code" data-dfn-for="AnimationPlayState" data-dfn-type="enum-value" data-export id="dom-animationplaystate-paused"><code><c- s>"paused"</c-></code><a class="self-link" href="#dom-animationplaystate-paused"></a></dfn>, <dfn class="idl-code" data-dfn-for="AnimationPlayState" data-dfn-type="enum-value" data-export id="dom-animationplaystate-finished"><code><c- s>"finished"</c-></code><a class="self-link" href="#dom-animationplaystate-finished"></a></dfn> };
</pre>
        <dl>
            <dt data-md><code>idle</code>
            <dd data-md>
                <p>对应于<a data-link-type="dfn" href="#play-state-idle" id="ref-for-play-state-idle⑥">空闲播放状态</a>。</p>
            <dt data-md><code>running</code>
            <dd data-md>
                <p>对应于<a data-link-type="dfn" href="#play-state-running" id="ref-for-play-state-running③">运行中播放状态</a>。
                </p>
            <dt data-md><code>paused</code>
            <dd data-md>
                <p>对应于<a data-link-type="dfn" href="#play-state-paused" id="ref-for-play-state-paused⑦">暂停播放状态</a>。</p>
            <dt data-md><code>finished</code>
            <dd data-md>
                <p>对应于<a data-link-type="dfn" href="#play-state-finished" id="ref-for-play-state-finished①⑤">完成播放状态</a>。
                </p>
        </dl>
        <h4 class="heading settled" data-level="6.4.2" id="the-animationreplacestate-enumeration"><span
                class="secno">6.4.2. </span><span class="content"><code>AnimationReplaceState</code> 枚举</span><a
                class="self-link" href="#the-animationreplacestate-enumeration"></a></h4>
        <pre class="idl highlight def"><c- b>enum</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="enum" data-export id="enumdef-animationreplacestate"><code><c- g>AnimationReplaceState</c-></code></dfn> { <dfn class="idl-code" data-dfn-for="AnimationReplaceState" data-dfn-type="enum-value" data-export id="dom-animationreplacestate-active"><code><c- s>"active"</c-></code><a class="self-link" href="#dom-animationreplacestate-active"></a></dfn>, <dfn class="idl-code" data-dfn-for="AnimationReplaceState" data-dfn-type="enum-value" data-export id="dom-animationreplacestate-removed"><code><c- s>"removed"</c-></code><a class="self-link" href="#dom-animationreplacestate-removed"></a></dfn>, <dfn class="idl-code" data-dfn-for="AnimationReplaceState" data-dfn-type="enum-value" data-export id="dom-animationreplacestate-persisted"><code><c- s>"persisted"</c-></code><a class="self-link" href="#dom-animationreplacestate-persisted"></a></dfn> };
</pre>
        <dl>
            <dt data-md><code>active</code>
            <dd data-md>
                <p>对应于<a data-link-type="dfn" href="#active-replace-state"
                        id="ref-for-active-replace-state②">活动替换状态</a>。</p>
            <dt data-md><code>removed</code>
            <dd data-md>
                <p>对应于<a data-link-type="dfn" href="#removed-replace-state"
                        id="ref-for-removed-replace-state⑦">移除替换状态</a>。</p>
            <dt data-md><code>persisted</code>
            <dd data-md>
                <p>对应于<a data-link-type="dfn" href="#persisted-replace-state"
                        id="ref-for-persisted-replace-state①">持久化替换状态</a>。</p>
        </dl>
        <h3 class="heading settled" data-level="6.5" id="the-animationeffect-interface"><span class="secno">6.5.
            </span><span class="content"><code>AnimationEffect</code> 接口</span><a class="self-link"
                href="#the-animationeffect-interface"></a></h3>
        <p><a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect⑧⑧">动画效果</a>在 Web 动画 API
            中由抽象<code
                class="idl"><a data-link-type="idl" href="#animationeffect" id="ref-for-animationeffect③">AnimationEffect</a></code>接口表示。
        </p>
        <pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed③"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="animationeffect"><code><c- g>AnimationEffect</c-></code></dfn> {
    <a data-link-type="idl-name" href="#dictdef-effecttiming" id="ref-for-dictdef-effecttiming"><c- n>EffectTiming</c-></a> <a class="idl-code" data-link-type="method" href="#dom-animationeffect-gettiming" id="ref-for-dom-animationeffect-gettiming"><c- g>getTiming</c-></a>();
    <a data-link-type="idl-name" href="#dictdef-computedeffecttiming" id="ref-for-dictdef-computedeffecttiming"><c- n>ComputedEffectTiming</c-></a> <a class="idl-code" data-link-type="method" href="#dom-animationeffect-getcomputedtiming" id="ref-for-dom-animationeffect-getcomputedtiming"><c- g>getComputedTiming</c-></a>();
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined⑧"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-animationeffect-updatetiming" id="ref-for-dom-animationeffect-updatetiming"><c- g>updateTiming</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-optionaleffecttiming" id="ref-for-dictdef-optionaleffecttiming"><c- n>OptionalEffectTiming</c-></a> <a class="idl-code" data-link-type="argument" href="#dom-animationeffect-updatetiming-timing-timing" id="ref-for-dom-animationeffect-updatetiming-timing-timing"><c- g>timing</c-></a> = {});
};
</pre>
        <div class="note" role="note">
            未来，我们可能会公开<code>any onupdate (double? progress, double currentIteration, Animatable? target, any underlyingValue)</code>，以便动画效果可以与时间模型分离。
        </div>
        <div class="methods">
            <dl>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="AnimationEffect" data-dfn-type="method"
                        data-export id="dom-animationeffect-gettiming"><code>getTiming()</code></dfn>
                <dd data-md>
                    <p>返回此<a data-link-type="dfn" href="#animation-effect"
                            id="ref-for-animation-effect⑧⑨">动画效果</a>的指定时间属性。</p>
                    <p>有关返回的<code
                            class="idl"><a data-link-type="idl" href="#dictdef-effecttiming" id="ref-for-dictdef-effecttiming①">EffectTiming</a></code>对象的成员与<a
                            href="#timing-model">时间模型</a>属性之间的对应关系，请参见<code
                            class="idl"><a data-link-type="idl" href="#dictdef-effecttiming" id="ref-for-dictdef-effecttiming②">EffectTiming</a></code>接口。
                    </p>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="AnimationEffect" data-dfn-type="method"
                        data-export id="dom-animationeffect-getcomputedtiming"><code>getComputedTiming()</code></dfn>
                <dd data-md>
                    <p>返回此<a data-link-type="dfn" href="#animation-effect"
                            id="ref-for-animation-effect⑨⓪">动画效果</a>的计算时间属性。</p>
                    <p>尽管<code
                            class="idl"><a data-link-type="idl" href="#dom-animationeffect-gettiming" id="ref-for-dom-animationeffect-gettiming①">getTiming()</a></code>和<code
                            class="idl"><a data-link-type="idl" href="#dom-animationeffect-getcomputedtiming" id="ref-for-dom-animationeffect-getcomputedtiming①">getComputedTiming()</a></code>返回的对象的某些属性是通用的，但它们的值可能会有所不同：
                    </p>
                    <ul>
                        <li data-md>
                            <p><code
                                    class="idl"><a data-link-type="idl" href="#dom-effecttiming-duration" id="ref-for-dom-effecttiming-duration">duration</a></code>
                                - 虽然<code
                                    class="idl"><a data-link-type="idl" href="#dom-animationeffect-gettiming" id="ref-for-dom-animationeffect-gettiming②">getTiming()</a></code>可能返回字符串<code>auto</code>，但<code
                                    class="idl"><a data-link-type="idl" href="#dom-animationeffect-getcomputedtiming" id="ref-for-dom-animationeffect-getcomputedtiming②">getComputedTiming()</a></code>必须返回与<a
                                    data-link-type="dfn" href="#iteration-duration"
                                    id="ref-for-iteration-duration①③">迭代持续时间</a>的计算值对应的数字，如<code
                                    class="idl"><a data-link-type="idl" href="#dom-effecttiming-duration" id="ref-for-dom-effecttiming-duration①">duration</a></code>成员的描述中所定义<code
                                    class="idl"><a data-link-type="idl" href="#dictdef-effecttiming" id="ref-for-dictdef-effecttiming③">EffectTiming</a></code>接口。
                            </p>
                            <p>在本规范的这个层次上，这仅意味着<code>auto</code>值被零替代。</p>
                        <li data-md>
                            <p><code
                                    class="idl"><a data-link-type="idl" href="#dom-effecttiming-fill" id="ref-for-dom-effecttiming-fill">fill</a></code>
                                - 同样，<code
                                    class="idl"><a data-link-type="idl" href="#dom-animationeffect-gettiming" id="ref-for-dom-animationeffect-gettiming③">getTiming()</a></code>可能返回字符串<code>auto</code>，但<code
                                    class="idl"><a data-link-type="idl" href="#dom-animationeffect-getcomputedtiming" id="ref-for-dom-animationeffect-getcomputedtiming③">getComputedTiming()</a></code>必须返回用于时间计算的特定<a
                                    class="idl-code" data-link-type="enum" href="#enumdef-fillmode"
                                    id="ref-for-enumdef-fillmode">FillMode</a>，如<code
                                    class="idl"><a data-link-type="idl" href="#dom-effecttiming-fill" id="ref-for-dom-effecttiming-fill①">fill</a></code>成员的描述中所定义的<code
                                    class="idl"><a data-link-type="idl" href="#dictdef-effecttiming" id="ref-for-dictdef-effecttiming④">EffectTiming</a></code>接口。
                            </p>
                            <p>在本规范的这个层次上，这仅意味着<code>auto</code>值被<code>none</code>替换<a class="idl-code"
                                    data-link-type="enum" href="#enumdef-fillmode"
                                    id="ref-for-enumdef-fillmode①">FillMode</a>。</p>
                    </ul>
                    <p class="note" role="note"><span>注意：</span>
                        未来可能会扩展其他时间成员以包括<code>auto</code>之类的值。进行时间计算时，鼓励作者尽可能使用<code
                            class="idl"><a data-link-type="idl" href="#dom-animationeffect-getcomputedtiming" id="ref-for-dom-animationeffect-getcomputedtiming④">getComputedTiming()</a></code>，以避免在允许指定值的范围或类型发生更改时出现不兼容情况。
                    </p>
                    <p>除了返回值可能的差异之外，与<code
                            class="idl"><a data-link-type="idl" href="#dom-animationeffect-gettiming" id="ref-for-dom-animationeffect-gettiming④">getTiming()</a></code>相比，<code
                            class="idl"><a data-link-type="idl" href="#dom-animationeffect-getcomputedtiming" id="ref-for-dom-animationeffect-getcomputedtiming⑤">getComputedTiming()</a></code>返回了<code
                            class="idl"><a data-link-type="idl" href="#dictdef-computedeffecttiming" id="ref-for-dictdef-computedeffecttiming①">ComputedEffectTiming</a></code>字典定义的其他时间信息。
                    </p>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="AnimationEffect" data-dfn-type="method"
                        data-export data-lt="updateTiming(timing)|updateTiming()"
                        id="dom-animationeffect-updatetiming"><code>updateTiming(timing)</code></dfn>
                <dd data-md>
                    <p>通过执行<a data-link-type="dfn" href="#update-the-timing-properties-of-an-animation-effect"
                            id="ref-for-update-the-timing-properties-of-an-animation-effect">更新动画效果的时间属性</a>的过程，传递<code
                            class="idl"><a data-link-type="idl" href="#dom-animationeffect-updatetiming-timing-timing" id="ref-for-dom-animationeffect-updatetiming-timing-timing①">timing</a></code>参数作为<var>输入</var>，更新此<a
                            data-link-type="dfn" href="#animation-effect"
                            id="ref-for-animation-effect⑨①">动画效果</a>的指定时间属性。</p>
                    <div class="parameters">
                        <dl>
                            <dt data-md><dfn class="dfn-paneled idl-code"
                                    data-dfn-for="AnimationEffect/updateTiming(timing)" data-dfn-type="argument"
                                    data-export data-lt="timing"
                                    id="dom-animationeffect-updatetiming-timing-timing"><code>optional <code class="idl"><a data-link-type="idl" href="#dictdef-optionaleffecttiming" id="ref-for-dictdef-optionaleffecttiming①">OptionalEffectTiming</a></code>
                                    timing</code></dfn>
                            <dd data-md>
                                <p>要更新的时间属性。<code
                                        class="idl"><a data-link-type="idl" href="#dom-animationeffect-updatetiming-timing-timing" id="ref-for-dom-animationeffect-updatetiming-timing-timing②">timing</a></code>中不存在的任何成员的时间属性将<em>不会</em>被修改。
                                </p>
                        </dl>
                    </div>
            </dl>
        </div>
        <p class="issue" id="issue-178c6cfa"><a class="self-link"
                href="#issue-178c6cfa"></a><code>remove()</code>方法可用于从其父组或动画中移除效果。我们是否应该将其保留在第一级并仅将其定义为从动画中移除动画效果？<a
                href="https://github.com/w3c/csswg-drafts/issues/2082">[Issue #2082]</a></p>

        <h4 class="heading settled" data-level="6.5.1" id="the-effecttiming-dictionaries"><span class="secno">6.5.1.
            </span><span class="content"><code>EffectTiming</code> 和 <code>OptionalEffectTiming</code> 字典</span><a
                class="self-link" href="#the-effecttiming-dictionaries"></a></h4>
        <p><code
                class="idl"><a data-link-type="idl" href="#dictdef-effecttiming" id="ref-for-dictdef-effecttiming⑤">EffectTiming</a></code>字典表示<code
                class="idl"><a data-link-type="idl" href="#animationeffect" id="ref-for-animationeffect④">AnimationEffect</a></code>的时间属性。
        </p>
        <p><code
                class="idl"><a data-link-type="idl" href="#dictdef-optionaleffecttiming" id="ref-for-dictdef-optionaleffecttiming②">OptionalEffectTiming</a></code>字典是<code
                class="idl"><a data-link-type="idl" href="#dictdef-effecttiming" id="ref-for-dictdef-effecttiming⑥">EffectTiming</a></code>字典的变体，允许某些成员不存在<a
                data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists"
                id="ref-for-map-exists①">exist</a>。它被<code
                class="idl"><a data-link-type="idl" href="#dom-animationeffect-updatetiming" id="ref-for-dom-animationeffect-updatetiming①">updateTiming()</a></code>方法使用，该方法属于<code
                class="idl"><a data-link-type="idl" href="#animationeffect" id="ref-for-animationeffect⑤">AnimationEffect</a></code>接口，用于对<a
                data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect⑨②">动画效果</a>的时间属性执行增量更新。</p>

        <pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-effecttiming"><code><c- g>EffectTiming</c-></code></dfn> {
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double" id="ref-for-idl-double⑨"><c- b>double</c-></a>                             <a class="idl-code" data-default="0" data-link-type="dict-member" data-type="double                             " href="#dom-effecttiming-delay" id="ref-for-dom-effecttiming-delay"><c- g>delay</c-></a> = 0;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double" id="ref-for-idl-double①⓪"><c- b>double</c-></a>                             <a class="idl-code" data-default="0" data-link-type="dict-member" data-type="double                             " href="#dom-effecttiming-enddelay" id="ref-for-dom-effecttiming-enddelay"><c- g>endDelay</c-></a> = 0;
    <a data-link-type="idl-name" href="#enumdef-fillmode" id="ref-for-enumdef-fillmode②"><c- n>FillMode</c-></a>                           <a class="idl-code" data-default="&quot;auto&quot;" data-link-type="dict-member" data-type="FillMode                           " href="#dom-effecttiming-fill" id="ref-for-dom-effecttiming-fill②"><c- g>fill</c-></a> = "auto";
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double" id="ref-for-idl-double①①"><c- b>double</c-></a>                             <a class="idl-code" data-default="0.0" data-link-type="dict-member" data-type="double                             " href="#dom-effecttiming-iterationstart" id="ref-for-dom-effecttiming-iterationstart"><c- g>iterationStart</c-></a> = 0.0;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unrestricted-double" id="ref-for-idl-unrestricted-double"><c- b>unrestricted</c-> <c- b>double</c-></a>                <a class="idl-code" data-default="1.0" data-link-type="dict-member" data-type="unrestricted double                " href="#dom-effecttiming-iterations" id="ref-for-dom-effecttiming-iterations"><c- g>iterations</c-></a> = 1.0;
    (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unrestricted-double" id="ref-for-idl-unrestricted-double①"><c- b>unrestricted</c-> <c- b>double</c-></a> <c- b>or</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString②"><c- b>DOMString</c-></a>) <a class="idl-code" data-default="&quot;auto&quot;" data-link-type="dict-member" data-type="(unrestricted double or DOMString) " href="#dom-effecttiming-duration" id="ref-for-dom-effecttiming-duration②"><c- g>duration</c-></a> = "auto";
    <a data-link-type="idl-name" href="#enumdef-playbackdirection" id="ref-for-enumdef-playbackdirection"><c- n>PlaybackDirection</c-></a>                  <a class="idl-code" data-default="&quot;normal&quot;" data-link-type="dict-member" data-type="PlaybackDirection                  " href="#dom-effecttiming-direction" id="ref-for-dom-effecttiming-direction"><c- g>direction</c-></a> = "normal";
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString③"><c- b>DOMString</c-></a>                          <a class="idl-code" data-default="&quot;linear&quot;" data-link-type="dict-member" data-type="DOMString                          " href="#dom-effecttiming-easing" id="ref-for-dom-effecttiming-easing"><c- g>easing</c-></a> = "linear";
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-optionaleffecttiming"><code><c- g>OptionalEffectTiming</c-></code></dfn> {
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double" id="ref-for-idl-double①②"><c- b>double</c-></a>                             <a class="idl-code" data-link-type="dict-member" data-type="double                             " href="#dom-optionaleffecttiming-delay" id="ref-for-dom-optionaleffecttiming-delay"><c- g>delay</c-></a>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double" id="ref-for-idl-double①③"><c- b>double</c-></a>                             <a class="idl-code" data-link-type="dict-member" data-type="double                             " href="#dom-optionaleffecttiming-enddelay" id="ref-for-dom-optionaleffecttiming-enddelay"><c- g>endDelay</c-></a>;
    <a data-link-type="idl-name" href="#enumdef-fillmode" id="ref-for-enumdef-fillmode③"><c- n>FillMode</c-></a>                           <a class="idl-code" data-link-type="dict-member" data-type="FillMode                           " href="#dom-optionaleffecttiming-fill" id="ref-for-dom-optionaleffecttiming-fill"><c- g>fill</c-></a>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double" id="ref-for-idl-double①④"><c- b>double</c-></a>                             <a class="idl-code" data-link-type="dict-member" data-type="double                             " href="#dom-optionaleffecttiming-iterationstart" id="ref-for-dom-optionaleffecttiming-iterationstart"><c- g>iterationStart</c-></a>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unrestricted-double" id="ref-for-idl-unrestricted-double②"><c- b>unrestricted</c-> <c- b>double</c-></a>                <a class="idl-code" data-link-type="dict-member" data-type="unrestricted double                " href="#dom-optionaleffecttiming-iterations" id="ref-for-dom-optionaleffecttiming-iterations"><c- g>iterations</c-></a>;
    (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unrestricted-double" id="ref-for-idl-unrestricted-double③"><c- b>unrestricted</c-> <c- b>double</c-></a> <c- b>or</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString④"><c- b>DOMString</c-></a>) <a class="idl-code" data-link-type="dict-member" data-type="(unrestricted double or DOMString) " href="#dom-optionaleffecttiming-duration" id="ref-for-dom-optionaleffecttiming-duration"><c- g>duration</c-></a>;
    <a data-link-type="idl-name" href="#enumdef-playbackdirection" id="ref-for-enumdef-playbackdirection①"><c- n>PlaybackDirection</c-></a>                  <a class="idl-code" data-link-type="dict-member" data-type="PlaybackDirection                  " href="#dom-optionaleffecttiming-direction" id="ref-for-dom-optionaleffecttiming-direction"><c- g>direction</c-></a>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString⑤"><c- b>DOMString</c-></a>                          <a class="idl-code" data-link-type="dict-member" data-type="DOMString                          " href="#dom-optionaleffecttiming-easing" id="ref-for-dom-optionaleffecttiming-easing"><c- g>easing</c-></a>;
};
</pre>
        <div class="members">
            <dl>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="EffectTiming" data-dfn-type="dict-member"
                        data-export id="dom-effecttiming-delay"><code>delay</code></dfn>, <span>类型为 <a
                            data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#idl-double"
                            id="ref-for-idl-double①⑤">double</a>，默认值为 <code>0</code></span><dfn
                        class="dfn-paneled idl-code" data-dfn-for="OptionalEffectTiming" data-dfn-type="dict-member"
                        data-export data-lt="delay" id="dom-optionaleffecttiming-delay"><code></code></dfn>
                <dd data-md>
                    <p><a data-link-type="dfn" href="#start-delay" id="ref-for-start-delay①⑥">开始延迟</a>，表示从关联的<a
                            data-link-type="dfn" href="#animation-start-time"
                            id="ref-for-animation-start-time⑤③">开始时间</a>到<a data-link-type="dfn" href="#active-interval"
                            id="ref-for-active-interval①⑥">活动间隔</a>开始之间的毫秒数。</p>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="EffectTiming" data-dfn-type="dict-member"
                        data-export id="dom-effecttiming-enddelay"><code>endDelay</code></dfn>, <span>类型为 <a
                            data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#idl-double"
                            id="ref-for-idl-double①⑥">double</a>，默认值为 <code>0</code></span><dfn
                        class="dfn-paneled idl-code" data-dfn-for="OptionalEffectTiming" data-dfn-type="dict-member"
                        data-export data-lt="endDelay" id="dom-optionaleffecttiming-enddelay"><code></code></dfn>
                <dd data-md>
                    <p><a data-link-type="dfn" href="#end-delay" id="ref-for-end-delay④">结束延迟</a>，表示从<a
                            data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect⑨③">动画效果</a>的<a
                            data-link-type="dfn" href="#active-interval" id="ref-for-active-interval①⑦">活动间隔</a>结束到其<a
                            data-link-type="dfn" href="#end-time" id="ref-for-end-time⑧">结束时间</a>之间的毫秒数。</p>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="EffectTiming" data-dfn-type="dict-member"
                        data-export id="dom-effecttiming-fill"><code>fill</code></dfn>, <span>类型为 <a
                            data-link-type="idl-name" href="#enumdef-fillmode"
                            id="ref-for-enumdef-fillmode④">FillMode</a>，默认值为 <code>"auto"</code></span><dfn
                        class="dfn-paneled idl-code" data-dfn-for="OptionalEffectTiming" data-dfn-type="dict-member"
                        data-export data-lt="fill" id="dom-optionaleffecttiming-fill"><code></code></dfn>
                <dd data-md>
                    <p><a data-link-type="dfn" href="#fill-mode" id="ref-for-fill-mode①⓪">填充模式</a>，定义了<a
                            data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect⑨④">动画效果</a>在其<a
                            data-link-type="dfn" href="#active-interval" id="ref-for-active-interval①⑧">活动间隔</a>之外的行为。
                    </p>
                    <p>在进行时间计算时，特殊字符串值<code>auto</code>会扩展为时间模型所识别的<a data-link-type="dfn" href="#fill-mode"
                            id="ref-for-fill-mode①①">填充模式</a>之一，如下所示：</p>
                    <div class="switch">
                        <dl>
                            <dt data-md>如果应用填充模式的<a data-link-type="dfn" href="#animation-effect"
                                    id="ref-for-animation-effect⑨⑤">动画效果</a>是<a data-link-type="dfn"
                                    href="#keyframe-effect" id="ref-for-keyframe-effect③⓪">关键帧效果</a>，
                            <dd data-md>
                                <p>使用 <span class="enum-value">none</span> 作为<a data-link-type="dfn" href="#fill-mode"
                                        id="ref-for-fill-mode①②">填充模式</a>。</p>
                            <dt data-md>否则，
                            <dd data-md>
                                <p>使用 <span class="enum-value">both</span> 作为<a data-link-type="dfn" href="#fill-mode"
                                        id="ref-for-fill-mode①③">填充模式</a>。</p>
                        </dl>
                    </div>
                    <div class="advisement">如<a href="#fill-behavior">§ 4.6 填充行为</a>所述，不建议作者使用无限期填充动画。</div>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="EffectTiming" data-dfn-type="dict-member"
                        data-export id="dom-effecttiming-iterationstart"><code>iterationStart</code></dfn>, <span>类型为 <a
                            data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#idl-double"
                            id="ref-for-idl-double①⑦">double</a>，默认值为 <code>0.0</code></span><dfn
                        class="dfn-paneled idl-code" data-dfn-for="OptionalEffectTiming" data-dfn-type="dict-member"
                        data-export data-lt="iterationStart"
                        id="dom-optionaleffecttiming-iterationstart"><code></code></dfn>
                <dd data-md>
                    <p><a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect⑨⑥">动画效果</a>的<a
                            data-link-type="dfn" href="#iteration-start"
                            id="ref-for-iteration-start⑨">迭代开始</a>属性，它是一个大于或等于零的有限实数，表示动画效果开始的迭代索引及其在该迭代中的进度。</p>
                    <p>例如，值为0.5表示动画效果在其第一次迭代的中途开始。值为1.2表示动画效果在其第二次迭代的20%处开始。</p>
                    <div class="note" role="note">
                        请注意，<code
                            class="idl"><a data-link-type="idl" href="#dom-effecttiming-iterations" id="ref-for-dom-effecttiming-iterations①">iterations</a></code>的值实际上是<em>添加</em>到<code
                            class="idl"><a data-link-type="idl" href="#dom-effecttiming-iterationstart" id="ref-for-dom-effecttiming-iterationstart①">iterationStart</a></code>上的，因此一个<code
                            class="idl"><a data-link-type="idl" href="#dom-effecttiming-iterationstart" id="ref-for-dom-effecttiming-iterationstart②">iterationStart</a></code>值为"0.5"且<code
                            class="idl"><a data-link-type="idl" href="#dom-effecttiming-iterations" id="ref-for-dom-effecttiming-iterations②">iterations</a></code>值为"2"的动画效果仍将重复两次，但它将在<a
                            data-link-type="dfn" href="#iteration-interval"
                            id="ref-for-iteration-interval②">迭代间隔</a>的中途开始和结束。
                        <p><code
                                class="idl"><a data-link-type="idl" href="#dom-effecttiming-iterationstart" id="ref-for-dom-effecttiming-iterationstart③">iterationStart</a></code>值大于或等于1通常仅在与具有<a
                                data-link-type="dfn"
                                href="https://drafts.csswg.org/web-animations-2/#iteration-composite-operation"
                                id="ref-for-iteration-composite-operation①">迭代合成操作</a>为<span
                                class="enum-value">累积</span>的动画效果结合使用时，或者当<a data-link-type="dfn"
                                href="#current-iteration" id="ref-for-current-iteration④">当前迭代</a>索引有其他意义时才有用。</p>
                    </div>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="EffectTiming" data-dfn-type="dict-member"
                        data-export id="dom-effecttiming-iterations"><code>iterations</code></dfn>, <span>类型为 <a
                            data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#idl-unrestricted-double"
                            id="ref-for-idl-unrestricted-double④">unrestricted double</a>，默认值为
                        <code>1.0</code></span><dfn class="dfn-paneled idl-code" data-dfn-for="OptionalEffectTiming"
                        data-dfn-type="dict-member" data-export data-lt="iterations"
                        id="dom-optionaleffecttiming-iterations"><code></code></dfn>
                <dd data-md>
                    <p><a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect⑨⑦">动画效果</a>的<a
                            data-link-type="dfn" href="#iteration-count"
                            id="ref-for-iteration-count①⑤">迭代计数</a>属性，它是一个大于或等于零的实数（包括正无穷），表示动画效果重复的次数。</p>
                    <p>可以将此值设置为<code class="esvalue">+Infinity</code>，以使<a data-link-type="dfn" href="#animation-effect"
                            id="ref-for-animation-effect⑨⑧">动画效果</a>永远重复（除非效果的持续时间为零，在这种情况下它会立即结束）。</p>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="EffectTiming" data-dfn-type="dict-member"
                        data-export id="dom-effecttiming-duration"><code>duration</code></dfn>, <span>类型为 <code
                            class="idl-code">(unrestricted double or DOMString)</code>，默认值为
                        <code>"auto"</code></span><dfn class="dfn-paneled idl-code" data-dfn-for="OptionalEffectTiming"
                        data-dfn-type="dict-member" data-export data-lt="duration"
                        id="dom-optionaleffecttiming-duration"><code></code></dfn>
                <dd data-md>
                    <p><a data-link-type="dfn" href="#iteration-duration"
                            id="ref-for-iteration-duration①④">迭代持续时间</a>，它是一个大于或等于零的实数（包括正无穷），表示完成<a
                            data-link-type="dfn" href="#animation-effect"
                            id="ref-for-animation-effect⑨⑨">动画效果</a>单次迭代所需的时间。</p>
                    <p>在本规范的这个层次上，字符串值<code>auto</code>在时间模型计算和从<code
                            class="idl"><a data-link-type="idl" href="#dom-animationeffect-getcomputedtiming" id="ref-for-dom-animationeffect-getcomputedtiming⑥">getComputedTiming()</a></code>返回的<code
                            class="idl"><a data-link-type="idl" href="#dom-effecttiming-duration" id="ref-for-dom-effecttiming-duration③">duration</a></code>成员的结果中被视为值为零。然而，如果作者指定了<code>auto</code>值，用户代理必须为从<code
                            class="idl"><a data-link-type="idl" href="#dom-animationeffect-gettiming" id="ref-for-dom-animationeffect-gettiming⑤">getTiming()</a></code>返回的<code
                            class="idl"><a data-link-type="idl" href="#dom-effecttiming-duration" id="ref-for-dom-effecttiming-duration④">duration</a></code>成员返回<code>auto</code>。
                    </p>
                    <p>这是一个前向兼容措施，因为预计本规范的未来版本将引入组效果，其中<code>auto</code>值将扩展为包含子效果的持续时间。</p>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="EffectTiming" data-dfn-type="dict-member"
                        data-export id="dom-effecttiming-direction"><code>direction</code></dfn>, <span>类型为 <a
                            data-link-type="idl-name" href="#enumdef-playbackdirection"
                            id="ref-for-enumdef-playbackdirection②">PlaybackDirection</a>，默认值为
                        <code>"normal"</code></span><dfn class="dfn-paneled idl-code"
                        data-dfn-for="OptionalEffectTiming" data-dfn-type="dict-member" data-export data-lt="direction"
                        id="dom-optionaleffecttiming-direction"><code></code></dfn>
                <dd data-md>
                    <p><a data-link-type="dfn" href="#playback-direction"
                            id="ref-for-playback-direction⑤">播放方向</a>，定义了<a data-link-type="dfn"
                            href="#animation-effect" id="ref-for-animation-effect①⓪⓪">动画效果</a>是正向播放、反向播放还是每次迭代交替播放。</p>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="EffectTiming" data-dfn-type="dict-member"
                        data-export id="dom-effecttiming-easing"><code>easing</code></dfn>, <span>类型为 <a
                            data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#idl-DOMString"
                            id="ref-for-idl-DOMString⑥">DOMString</a>，默认值为 <code>"linear"</code></span><dfn
                        class="dfn-paneled idl-code" data-dfn-for="OptionalEffectTiming" data-dfn-type="dict-member"
                        data-export data-lt="easing" id="dom-optionaleffecttiming-easing"><code></code></dfn>
                <dd data-md>
                    <p><a data-link-type="dfn" href="https://www.w3.org/TR/css-easing-1/#easing-function"
                            id="ref-for-easing-function⑧">缓动函数</a>，用于缩放时间以产生缓动效果。</p>
                    <p>该字符串的语法由 <a class="production css" data-link-type="type"
                            href="https://www.w3.org/TR/css-easing-1/#typedef-easing-function"
                            id="ref-for-typedef-easing-function" title="展开为：linear">&lt;easing-function></a> 生成式 <a
                            data-link-type="biblio" href="#biblio-css-easing-1">[CSS-EASING-1]</a> 定义。</p>

            </dl>
        </div>

        <h4 class="heading settled" data-level="6.5.2" id="the-fillmode-enumeration"><span class="secno">6.5.2.
            </span><span class="content"><code>FillMode</code> 枚举</span><a class="self-link"
                href="#the-fillmode-enumeration"></a></h4>
        <pre class="idl highlight def"><c- b>enum</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="enum" data-export id="enumdef-fillmode"><code><c- g>FillMode</c-></code></dfn> { <dfn class="idl-code" data-dfn-for="FillMode" data-dfn-type="enum-value" data-export id="dom-fillmode-none"><code><c- s>"none"</c-></code><a class="self-link" href="#dom-fillmode-none"></a></dfn>, <dfn class="idl-code" data-dfn-for="FillMode" data-dfn-type="enum-value" data-export id="dom-fillmode-forwards"><code><c- s>"forwards"</c-></code><a class="self-link" href="#dom-fillmode-forwards"></a></dfn>, <dfn class="idl-code" data-dfn-for="FillMode" data-dfn-type="enum-value" data-export id="dom-fillmode-backwards"><code><c- s>"backwards"</c-></code><a class="self-link" href="#dom-fillmode-backwards"></a></dfn>, <dfn class="idl-code" data-dfn-for="FillMode" data-dfn-type="enum-value" data-export id="dom-fillmode-both"><code><c- s>"both"</c-></code><a class="self-link" href="#dom-fillmode-both"></a></dfn>, <dfn class="idl-code" data-dfn-for="FillMode" data-dfn-type="enum-value" data-export id="dom-fillmode-auto"><code><c- s>"auto"</c-></code><a class="self-link" href="#dom-fillmode-auto"></a></dfn> };
</pre>
        <dl>
            <dt data-md><code>none</code>
            <dd data-md>
                <p>无填充。</p>
            <dt data-md><code>forwards</code>
            <dd data-md>
                <p>向前填充。</p>
            <dt data-md><code>backwards</code>
            <dd data-md>
                <p>向后填充。</p>
            <dt data-md><code>both</code>
            <dd data-md>
                <p>前后填充。</p>
            <dt data-md><code>auto</code>
            <dd data-md>
                <p>无填充。在本规范的后续版本中，这可能会对其他类型的<a data-link-type="dfn" href="#animation-effect"
                        id="ref-for-animation-effect①⓪①">动画效果</a>产生不同的行为。</p>
        </dl>

        <h4 class="heading settled" data-level="6.5.3" id="the-playbackdirection-enumeration"><span class="secno">6.5.3.
            </span><span class="content"><code>PlaybackDirection</code> 枚举</span><a class="self-link"
                href="#the-playbackdirection-enumeration"></a></h4>
        <pre class="idl highlight def"><c- b>enum</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="enum" data-export id="enumdef-playbackdirection"><code><c- g>PlaybackDirection</c-></code></dfn> { <dfn class="idl-code" data-dfn-for="PlaybackDirection" data-dfn-type="enum-value" data-export id="dom-playbackdirection-normal"><code><c- s>"normal"</c-></code><a class="self-link" href="#dom-playbackdirection-normal"></a></dfn>, <dfn class="idl-code" data-dfn-for="PlaybackDirection" data-dfn-type="enum-value" data-export id="dom-playbackdirection-reverse"><code><c- s>"reverse"</c-></code><a class="self-link" href="#dom-playbackdirection-reverse"></a></dfn>, <dfn class="idl-code" data-dfn-for="PlaybackDirection" data-dfn-type="enum-value" data-export id="dom-playbackdirection-alternate"><code><c- s>"alternate"</c-></code><a class="self-link" href="#dom-playbackdirection-alternate"></a></dfn>, <dfn class="idl-code" data-dfn-for="PlaybackDirection" data-dfn-type="enum-value" data-export id="dom-playbackdirection-alternate-reverse"><code><c- s>"alternate-reverse"</c-></code><a class="self-link" href="#dom-playbackdirection-alternate-reverse"></a></dfn> };
</pre>
        <dl>
            <dt data-md><code>normal</code>
            <dd data-md>
                <p>所有迭代都按指定的顺序播放。</p>
            <dt data-md><code>reverse</code>
            <dd data-md>
                <p>所有迭代按指定顺序的反方向播放。</p>
            <dt data-md><code>alternate</code>
            <dd data-md>
                <p>偶数次迭代按指定顺序播放，奇数次迭代按指定顺序的反方向播放。</p>
            <dt data-md><code>alternate-reverse</code>
            <dd data-md>
                <p>偶数次迭代按指定顺序的反方向播放，奇数次迭代按指定顺序播放。</p>
        </dl>

        <h4 class="heading settled" data-level="6.5.4" id="updating-animationeffect-timing"><span class="secno">6.5.4.
            </span><span class="content">更新<code>AnimationEffect</code>的时间</span><a class="self-link"
                href="#updating-animationeffect-timing"></a></h4>
        <p>要从<code
                class="idl"><a data-link-type="idl" href="#dictdef-effecttiming" id="ref-for-dictdef-effecttiming⑦">EffectTiming</a></code>或<code
                class="idl"><a data-link-type="idl" href="#dictdef-optionaleffecttiming" id="ref-for-dictdef-optionaleffecttiming③">OptionalEffectTiming</a></code>对象<var>input</var>中<dfn
                class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="update-the-timing-properties-of-an-animation-effect">更新动画效果的时间属性</dfn>，请执行以下步骤：</p>
        <ol>
            <li data-md>
                <p>如果<var>input</var>的<code
                        class="idl"><a data-link-type="idl" href="#dom-effecttiming-iterationstart" id="ref-for-dom-effecttiming-iterationstart④">iterationStart</a></code>成员<a
                        data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists"
                        id="ref-for-map-exists②">存在</a>且小于零，则<a data-link-type="dfn"
                        href="https://webidl.spec.whatwg.org/#dfn-throw" id="ref-for-dfn-throw⑦">抛出</a>一个<span
                        class="exceptionname">TypeError</span>并中止此过程。</p>
                <p class="note" role="note"><span>注意：</span> 之所以使用<span class="exceptionname">TypeError</span>而不是<span
                        class="exceptionname">RangeError</span>，是为了反映WebIDL的<a data-link-type="dfn"
                        href="https://webidl.spec.whatwg.org/#EnforceRange"
                        id="ref-for-EnforceRange">[EnforceRange]</a>注释的行为，假如将来可以将该注释用于浮点值。</p>
            <li data-md>
                <p>如果<var>input</var>的<code
                        class="idl"><a data-link-type="idl" href="#dom-effecttiming-iterations" id="ref-for-dom-effecttiming-iterations③">iterations</a></code>成员<a
                        data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists"
                        id="ref-for-map-exists③">存在</a>，且小于零或为<code class="esvalue">NaN</code>，则<a data-link-type="dfn"
                        href="https://webidl.spec.whatwg.org/#dfn-throw" id="ref-for-dfn-throw⑧">抛出</a>一个<span
                        class="exceptionname">TypeError</span>并中止此过程。</p>
            <li data-md>
                <p>如果<var>input</var>的<code
                        class="idl"><a data-link-type="idl" href="#dom-effecttiming-duration" id="ref-for-dom-effecttiming-duration⑤">duration</a></code>成员<a
                        data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists"
                        id="ref-for-map-exists④">存在</a>，且小于零或为<code class="esvalue">NaN</code>，则<a data-link-type="dfn"
                        href="https://webidl.spec.whatwg.org/#dfn-throw" id="ref-for-dfn-throw⑨">抛出</a>一个<span
                        class="exceptionname">TypeError</span>并中止此过程。</p>
            <li data-md>
                <p>如果 <var>input</var> 的 <code
                        class="idl"><a data-link-type="idl" href="#dom-effecttiming-easing" id="ref-for-dom-effecttiming-easing①">easing</a></code>
                    成员 <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists"
                        id="ref-for-map-exists⑤">存在</a>，但无法使用 <a class="production css" data-link-type="type"
                        href="https://www.w3.org/TR/css-easing-1/#typedef-easing-function"
                        id="ref-for-typedef-easing-function①" title="展开为：linear">&lt;easing-function></a> 生成式 <a
                        data-link-type="biblio" href="#biblio-css-easing-1">[CSS-EASING-1]</a> 解析，则 <a
                        data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw"
                        id="ref-for-dfn-throw①⓪">抛出</a>一个 <span class="exceptionname">TypeError</span> 异常并中止此过程。</p>
            <li data-md>
                <p>将<var>input</var>中<a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists"
                        id="ref-for-map-exists⑥">存在</a>的每个成员分配给<var>effect</var>的相应时间属性，具体如下：</p>
                <ul>
                    <li data-md>
                        <p><code
                                class="idl"><a data-link-type="idl" href="#dom-effecttiming-delay" id="ref-for-dom-effecttiming-delay①">delay</a></code>
                            → <a data-link-type="dfn" href="#start-delay" id="ref-for-start-delay①⑦">开始延迟</a></p>
                    <li data-md>
                        <p><code
                                class="idl"><a data-link-type="idl" href="#dom-effecttiming-enddelay" id="ref-for-dom-effecttiming-enddelay①">endDelay</a></code>
                            → <a data-link-type="dfn" href="#end-delay" id="ref-for-end-delay⑤">结束延迟</a></p>
                    <li data-md>
                        <p><code
                                class="idl"><a data-link-type="idl" href="#dom-effecttiming-fill" id="ref-for-dom-effecttiming-fill③">fill</a></code>
                            → <a data-link-type="dfn" href="#fill-mode" id="ref-for-fill-mode①④">填充模式</a></p>
                    <li data-md>
                        <p><code
                                class="idl"><a data-link-type="idl" href="#dom-effecttiming-iterationstart" id="ref-for-dom-effecttiming-iterationstart⑤">iterationStart</a></code>
                            → <a data-link-type="dfn" href="#iteration-start" id="ref-for-iteration-start①⓪">迭代开始</a>
                        </p>
                    <li data-md>
                        <p><code
                                class="idl"><a data-link-type="idl" href="#dom-effecttiming-iterations" id="ref-for-dom-effecttiming-iterations④">iterations</a></code>
                            → <a data-link-type="dfn" href="#iteration-count" id="ref-for-iteration-count①⑥">迭代计数</a>
                        </p>
                    <li data-md>
                        <p><code
                                class="idl"><a data-link-type="idl" href="#dom-effecttiming-duration" id="ref-for-dom-effecttiming-duration⑥">duration</a></code>
                            → <a data-link-type="dfn" href="#iteration-duration"
                                id="ref-for-iteration-duration①⑤">迭代持续时间</a></p>
                    <li data-md>
                        <p><code
                                class="idl"><a data-link-type="idl" href="#dom-effecttiming-direction" id="ref-for-dom-effecttiming-direction①">direction</a></code>
                            → <a data-link-type="dfn" href="#playback-direction"
                                id="ref-for-playback-direction⑥">播放方向</a></p>
                    <li data-md>
                        <p><code
                                class="idl"><a data-link-type="idl" href="#dom-effecttiming-easing" id="ref-for-dom-effecttiming-easing②">easing</a></code>
                            → <a data-link-type="dfn" href="https://www.w3.org/TR/css-easing-1/#easing-function"
                                id="ref-for-easing-function⑨">缓动函数</a></p>
                </ul>
        </ol>

        <h4 class="heading settled" data-level="6.5.5" id="the-computedeffecttiming-dictionary"><span
                class="secno">6.5.5. </span><span class="content"><code>ComputedEffectTiming</code> 字典</span><a
                class="self-link" href="#the-computedeffecttiming-dictionary"></a></h4>
        <p>通过时间模型计算出的时间属性通过<code
                class="idl"><a data-link-type="idl" href="#dictdef-computedeffecttiming" id="ref-for-dictdef-computedeffecttiming②">ComputedEffectTiming</a></code>字典对象公开。
        </p>

        <pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-computedeffecttiming"><code><c- g>ComputedEffectTiming</c-></code></dfn> : <a data-link-type="idl-name" href="#dictdef-effecttiming" id="ref-for-dictdef-effecttiming⑧"><c- n>EffectTiming</c-></a> {
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unrestricted-double" id="ref-for-idl-unrestricted-double⑤"><c- b>unrestricted</c-> <c- b>double</c-></a>  <a class="idl-code" data-link-type="dict-member" data-type="unrestricted double  " href="#dom-computedeffecttiming-endtime" id="ref-for-dom-computedeffecttiming-endtime"><c- g>endTime</c-></a>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unrestricted-double" id="ref-for-idl-unrestricted-double⑥"><c- b>unrestricted</c-> <c- b>double</c-></a>  <a class="idl-code" data-link-type="dict-member" data-type="unrestricted double  " href="#dom-computedeffecttiming-activeduration" id="ref-for-dom-computedeffecttiming-activeduration"><c- g>activeDuration</c-></a>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double" id="ref-for-idl-double①⑧"><c- b>double</c-></a>?              <a class="idl-code" data-link-type="dict-member" data-type="double?              " href="#dom-computedeffecttiming-localtime" id="ref-for-dom-computedeffecttiming-localtime"><c- g>localTime</c-></a>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double" id="ref-for-idl-double①⑨"><c- b>double</c-></a>?              <a class="idl-code" data-link-type="dict-member" data-type="double?              " href="#dom-computedeffecttiming-progress" id="ref-for-dom-computedeffecttiming-progress"><c- g>progress</c-></a>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unrestricted-double" id="ref-for-idl-unrestricted-double⑦"><c- b>unrestricted</c-> <c- b>double</c-></a>? <a class="idl-code" data-link-type="dict-member" data-type="unrestricted double? " href="#dom-computedeffecttiming-currentiteration" id="ref-for-dom-computedeffecttiming-currentiteration"><c- g>currentIteration</c-></a>;
};
</pre>
        <div class="members">
            <dl>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="ComputedEffectTiming"
                        data-dfn-type="dict-member" data-export
                        id="dom-computedeffecttiming-endtime"><code>endTime</code></dfn>, <span> 类型为 <a
                            data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#idl-unrestricted-double"
                            id="ref-for-idl-unrestricted-double⑧">unrestricted double</a></span>
                <dd data-md>
                    <p>以毫秒为单位表示的<a data-link-type="dfn" href="#end-time" id="ref-for-end-time⑨">结束时间</a>，从<a
                            data-link-type="dfn" href="#local-time" id="ref-for-local-time②①">本地时间</a>零点算起（即，如果该<a
                            data-link-type="dfn" href="#animation-effect"
                            id="ref-for-animation-effect①⓪②">动画效果</a>与动画关联，则从相关<a data-link-type="dfn"
                            href="#concept-animation" id="ref-for-concept-animation⑦⓪">动画</a>的<a data-link-type="dfn"
                            href="#animation-start-time" id="ref-for-animation-start-time⑤④">开始时间</a>算起）。这对应于<a
                            data-link-type="dfn" href="#end-delay" id="ref-for-end-delay⑥">结束延迟</a>加上<a
                            data-link-type="dfn" href="#animation-effect"
                            id="ref-for-animation-effect①⓪④">动画效果</a>的活动间隔结束。</p>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="ComputedEffectTiming"
                        data-dfn-type="dict-member" data-export
                        id="dom-computedeffecttiming-activeduration"><code>activeDuration</code></dfn>, <span> 类型为 <a
                            data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#idl-unrestricted-double"
                            id="ref-for-idl-unrestricted-double⑨">unrestricted double</a></span>
                <dd data-md>
                    <p>此<a data-link-type="dfn" href="#active-duration" id="ref-for-active-duration①⑧">活动时长</a>表示此<a
                            data-link-type="dfn" href="#animation-effect"
                            id="ref-for-animation-effect①⓪⑤">动画效果</a>的持续时间。</p>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="ComputedEffectTiming"
                        data-dfn-type="dict-member" data-export
                        id="dom-computedeffecttiming-localtime"><code>localTime</code></dfn>, <span> 类型为 <a
                            data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#idl-double"
                            id="ref-for-idl-double②⓪">double</a>，可为空</span>
                <dd data-md>
                    <p>此<a data-link-type="dfn" href="#local-time" id="ref-for-local-time②②">本地时间</a>表示此<a
                            data-link-type="dfn" href="#animation-effect"
                            id="ref-for-animation-effect①⓪⑥">动画效果</a>的本地时间。</p>
                    <p>如果此<a data-link-type="dfn" href="#animation-effect"
                            id="ref-for-animation-effect①⓪⑦">动画效果</a>未与动画相关联，则此值为<code>null</code>。</p>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="ComputedEffectTiming"
                        data-dfn-type="dict-member" data-export
                        id="dom-computedeffecttiming-progress"><code>progress</code></dfn>, <span> 类型为 <a
                            data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#idl-double"
                            id="ref-for-idl-double②①">double</a>，可为空</span>
                <dd data-md>
                    <p>此<a data-link-type="dfn" href="#iteration-progress"
                            id="ref-for-iteration-progress①②">迭代进度</a>表示此<a data-link-type="dfn"
                            href="#animation-effect" id="ref-for-animation-effect①⓪⑧">动画效果</a>的当前进度。</p>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="ComputedEffectTiming"
                        data-dfn-type="dict-member" data-export
                        id="dom-computedeffecttiming-currentiteration"><code>currentIteration</code></dfn>, <span> 类型为
                        <a data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#idl-unrestricted-double"
                            id="ref-for-idl-unrestricted-double①⓪">unrestricted double</a>，可为空</span>
                <dd data-md>
                    <p>当前迭代的索引，从第一次迭代的零开始。</p>
                    <p>在大多数情况下，这将是一个正整数。然而，对于一个零持续时间且无限次重复的动画，值将为正的<span class="esvalue">Infinity</span>。</p>
                    <p>与未解析的时间一样，未解析的当前迭代表示为<code>null</code>值。</p>
            </dl>
        </div>
        <h3 class="heading settled" data-level="6.6" id="the-keyframeeffect-interface"><span class="secno">6.6.
            </span><span class="content"><code>KeyframeEffect</code> 接口</span><a class="self-link"
                href="#the-keyframeeffect-interface"></a></h3>
        <p><a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect③①">关键帧效果</a>由<code
                class="idl"><a data-link-type="idl" href="#keyframeeffect" id="ref-for-keyframeeffect">KeyframeEffect</a></code>接口表示。
        </p>

        <pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed④"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="keyframeeffect"><code><c- g>KeyframeEffect</c-></code></dfn> : <a data-link-type="idl-name" href="#animationeffect" id="ref-for-animationeffect⑥"><c- n>AnimationEffect</c-></a> {
    <a class="idl-code" data-link-type="constructor" href="#dom-keyframeeffect-keyframeeffect" id="ref-for-dom-keyframeeffect-keyframeeffect"><c- g>constructor</c-></a>(<a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element" id="ref-for-element③"><c- n>Element</c-></a>? <a class="idl-code" data-link-type="argument" href="#dom-keyframeeffect-keyframeeffect-target-keyframes-options-target" id="ref-for-dom-keyframeeffect-keyframeeffect-target-keyframes-options-target"><c- g>target</c-></a>,
                <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-object" id="ref-for-idl-object"><c- b>object</c-></a>? <a class="idl-code" data-link-type="argument" href="#dom-keyframeeffect-keyframeeffect-target-keyframes-options-keyframes" id="ref-for-dom-keyframeeffect-keyframeeffect-target-keyframes-options-keyframes"><c- g>keyframes</c-></a>,
                <c- b>optional</c-> (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unrestricted-double" id="ref-for-idl-unrestricted-double①①"><c- b>unrestricted</c-> <c- b>double</c-></a> <c- b>or</c-> <a data-link-type="idl-name" href="#dictdef-keyframeeffectoptions" id="ref-for-dictdef-keyframeeffectoptions"><c- n>KeyframeEffectOptions</c-></a>) <a class="idl-code" data-link-type="argument" href="#dom-keyframeeffect-keyframeeffect-target-keyframes-options-options" id="ref-for-dom-keyframeeffect-keyframeeffect-target-keyframes-options-options"><c- g>options</c-></a> = {});
    <a class="idl-code" data-link-type="constructor" href="#dom-keyframeeffect-keyframeeffect-source" id="ref-for-dom-keyframeeffect-keyframeeffect-source"><c- g>constructor</c-></a>(<a data-link-type="idl-name" href="#keyframeeffect" id="ref-for-keyframeeffect①"><c- n>KeyframeEffect</c-></a> <a class="idl-code" data-link-type="argument" href="#dom-keyframeeffect-keyframeeffect-source-source" id="ref-for-dom-keyframeeffect-keyframeeffect-source-source"><c- g>source</c-></a>);
    <c- b>attribute</c-> <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element" id="ref-for-element④"><c- n>Element</c-></a>?           <a class="idl-code" data-link-type="attribute" data-type="Element?" href="#dom-keyframeeffect-target" id="ref-for-dom-keyframeeffect-target"><c- g>target</c-></a>;
    <c- b>attribute</c-> <a data-link-type="idl-name" href="https://www.w3.org/TR/cssom-1/#cssomstring" id="ref-for-cssomstring"><c- n>CSSOMString</c-></a>?       <a class="idl-code" data-link-type="attribute" data-type="CSSOMString?" href="#dom-keyframeeffect-pseudoelement" id="ref-for-dom-keyframeeffect-pseudoelement"><c- g>pseudoElement</c-></a>;
    <c- b>attribute</c-> <a data-link-type="idl-name" href="#enumdef-compositeoperation" id="ref-for-enumdef-compositeoperation"><c- n>CompositeOperation</c-></a> <a class="idl-code" data-link-type="attribute" data-type="CompositeOperation" href="#dom-keyframeeffect-composite" id="ref-for-dom-keyframeeffect-composite"><c- g>composite</c-></a>;
    <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-object" id="ref-for-idl-object①"><c- b>object</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-keyframeeffect-getkeyframes" id="ref-for-dom-keyframeeffect-getkeyframes"><c- g>getKeyframes</c-></a>();
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined⑨"><c- b>undefined</c-></a>        <a class="idl-code" data-link-type="method" href="#dom-keyframeeffect-setkeyframes" id="ref-for-dom-keyframeeffect-setkeyframes"><c- g>setKeyframes</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-object" id="ref-for-idl-object②"><c- b>object</c-></a>? <dfn class="idl-code" data-dfn-for="KeyframeEffect/setKeyframes(keyframes)" data-dfn-type="argument" data-export id="dom-keyframeeffect-setkeyframes-keyframes-keyframes"><code><c- g>keyframes</c-></code><a class="self-link" href="#dom-keyframeeffect-setkeyframes-keyframes-keyframes"></a></dfn>);
};
</pre>
        <div class="constructors">
            <dl>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="KeyframeEffect" data-dfn-type="constructor"
                        data-export
                        data-lt="KeyframeEffect(target, keyframes, options)|constructor(target, keyframes, options)|KeyframeEffect(target, keyframes)|constructor(target, keyframes)"
                        id="dom-keyframeeffect-keyframeeffect"><code> KeyframeEffect (target, keyframes, options)</code></dfn>
                <dd data-md>
                    <p>使用以下过程创建一个新的 <code
                            class="idl"><a data-link-type="idl" href="#keyframeeffect" id="ref-for-keyframeeffect②">KeyframeEffect</a></code>
                        对象：</p>
                    <ol>
                        <li data-md>
                            <p>创建一个新的 <code
                                    class="idl"><a data-link-type="idl" href="#keyframeeffect" id="ref-for-keyframeeffect③">KeyframeEffect</a></code>
                                对象，<var>effect</var>。</p>
                        <li data-md>
                            <p>将 <var>effect</var> 的 <a data-link-type="dfn" href="#effect-target-target-element"
                                    id="ref-for-effect-target-target-element④">目标元素</a> 设置为 <var>target</var>。</p>
                        <li data-md>
                            <p>将 <a data-link-type="dfn" href="#effect-target-target-pseudo-selector"
                                    id="ref-for-effect-target-target-pseudo-selector②">目标伪选择器</a> 设置为以下条件的第一个匹配结果。</p>
                            <dl>
                                <dt data-md>如果 <var>options</var> 是一个 <code
                                        class="idl"><a data-link-type="idl" href="#dictdef-keyframeeffectoptions" id="ref-for-dictdef-keyframeeffectoptions①">KeyframeEffectOptions</a></code>
                                    对象，
                                <dd data-md>
                                    <p>将 <a data-link-type="dfn" href="#effect-target-target-pseudo-selector"
                                            id="ref-for-effect-target-target-pseudo-selector③">目标伪选择器</a> 设置为 <code
                                            class="idl"><a data-link-type="idl" href="#dom-keyframeeffectoptions-pseudoelement" id="ref-for-dom-keyframeeffectoptions-pseudoelement">pseudoElement</a></code>
                                        属性的值。</p>
                                    <p>在设置此属性时，应用接口上的 <code
                                            class="idl"><a data-link-type="idl" href="#dom-keyframeeffect-pseudoelement" id="ref-for-dom-keyframeeffect-pseudoelement①">pseudoElement</a></code>
                                        setter 定义的错误处理。
                                        如果 setter 需要抛出异常，则此过程必须抛出相同的异常并中止所有进一步的步骤。</p>
                                <dt data-md>否则，
                                <dd data-md>
                                    <p>将 <a data-link-type="dfn" href="#effect-target-target-pseudo-selector"
                                            id="ref-for-effect-target-target-pseudo-selector④">目标伪选择器</a> 设置为
                                        <code>null</code>。
                                    </p>
                            </dl>
                        <li data-md>
                            <p>让 <var>timing input</var> 为以下条件的第一个匹配结果。</p>
                            <dl>
                                <dt data-md>如果 <var>options</var> 是一个 <code
                                        class="idl"><a data-link-type="idl" href="#dictdef-keyframeeffectoptions" id="ref-for-dictdef-keyframeeffectoptions②">KeyframeEffectOptions</a></code>
                                    对象，
                                <dd data-md>
                                    <p>将 <var>timing input</var> 设置为 <var>options</var>。</p>
                                <dt data-md>否则（如果 <var>options</var> 是 <code>double</code>），
                                <dd data-md>
                                    <p>将 <var>timing input</var> 设置为一个新的 <code
                                            class="idl"><a data-link-type="idl" href="#dictdef-effecttiming" id="ref-for-dictdef-effecttiming⑨">EffectTiming</a></code>
                                        对象，其中所有成员设置为其默认值，并且 <code
                                            class="idl"><a data-link-type="idl" href="#dom-effecttiming-duration" id="ref-for-dom-effecttiming-duration⑦">duration</a></code>
                                        设置为 <var>options</var>。</p>
                            </dl>
                        <li data-md>
                            <p>调用过程 <a data-link-type="dfn" href="#update-the-timing-properties-of-an-animation-effect"
                                    id="ref-for-update-the-timing-properties-of-an-animation-effect①">更新动画效果的时序属性</a>，从
                                <var>timing input</var> 更新 <var>effect</var>。
                            </p>
                            <p>如果该过程引发异常，则传播异常并中止此过程。</p>
                        <li data-md>
                            <p>如果 <var>options</var> 是一个 <code
                                    class="idl"><a data-link-type="idl" href="#dictdef-keyframeeffectoptions" id="ref-for-dictdef-keyframeeffectoptions③">KeyframeEffectOptions</a></code>
                                对象，将 <var>effect</var> 的 <code
                                    class="idl"><a data-link-type="idl" href="#dom-keyframeeffect-composite" id="ref-for-dom-keyframeeffect-composite①">composite</a></code>
                                属性分配为 <var>options</var> 的对应值。</p>
                            <p>在分配此属性时，应用接口上对应 setter 定义的错误处理。
                                如果 setter 需要对 <var>options</var> 指定的值抛出异常，则此过程必须 <a data-link-type="dfn"
                                    href="https://webidl.spec.whatwg.org/#dfn-throw" id="ref-for-dfn-throw①①">抛出</a>
                                相同的异常并中止所有进一步的步骤。</p>
                        <li data-md>
                            <p>通过执行为 <code
                                    class="idl"><a data-link-type="idl" href="#dom-keyframeeffect-setkeyframes" id="ref-for-dom-keyframeeffect-setkeyframes①">setKeyframes()</a></code>
                                定义的过程，并将 <var>keyframes</var> 作为输入，初始化 <a data-link-type="dfn" href="#keyframe"
                                    id="ref-for-keyframe④④">关键帧</a> 集。</p>
                    </ol>
                    <div class="parameters">
                        <dl>
                            <dt data-md><dfn class="dfn-paneled idl-code"
                                    data-dfn-for="KeyframeEffect/KeyframeEffect(target, keyframes, options)"
                                    data-dfn-type="argument" data-export data-lt="target"
                                    id="dom-keyframeeffect-keyframeeffect-target-keyframes-options-target"><code><code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element⑤">Element</a></code>?
                                    target</code></dfn>
                            <dd data-md>
                                <p>动画的 <a data-link-type="dfn" href="#effect-target-target-element"
                                        id="ref-for-effect-target-target-element⑤">目标元素</a>。
                                    对于不针对特定元素的动画（例如使用音频 API 生成声音的动画），此值可以为 <code>null</code>。</p>
                            <dt data-md><dfn class="dfn-paneled idl-code"
                                    data-dfn-for="KeyframeEffect/KeyframeEffect(target, keyframes, options)"
                                    data-dfn-type="argument" data-export data-lt="keyframes"
                                    id="dom-keyframeeffect-keyframeeffect-target-keyframes-options-keyframes"><code>object? keyframes</code></dfn>
                            <dd data-md>
                                <p>要使用的 <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe④⑤">关键帧</a> 集。
                                    此参数的格式和处理在<a href="#processing-a-keyframes-argument">第 6.6.3 节 处理关键帧参数</a>中定义。</p>
                            <dt data-md><dfn class="dfn-paneled idl-code"
                                    data-dfn-for="KeyframeEffect/KeyframeEffect(target, keyframes, options)"
                                    data-dfn-type="argument" data-export data-lt="options"
                                    id="dom-keyframeeffect-keyframeeffect-target-keyframes-options-options"><code>optional <code class="idl"><a data-link-type="idl" href="#dictdef-keyframeeffectoptions" id="ref-for-dictdef-keyframeeffectoptions④">KeyframeEffectOptions</a></code>
                                    options</code></dfn>
                            <dd data-md>
                                <p>指定效果的 <a data-link-type="dfn" href="#iteration-duration"
                                        id="ref-for-iteration-duration①⑥">迭代时长</a> 的数字，或指定效果的时序和行为的一组属性。</p>
                        </dl>
                        <p>此构造函数的使用示例可在<a href="#creating-a-new-keyframeeffect-object">第 6.6.1 节 创建新的 KeyframeEffect
                                对象</a>中找到。</p>
                    </div>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="KeyframeEffect" data-dfn-type="constructor"
                        data-export data-lt="KeyframeEffect(source)|constructor(source)"
                        id="dom-keyframeeffect-keyframeeffect-source"><code>KeyframeEffect (source)</code></dfn>
                <dd data-md>
                    <p>使用以下过程创建一个与 <code
                            class="idl"><a data-link-type="idl" href="#dom-keyframeeffect-keyframeeffect-source-source" id="ref-for-dom-keyframeeffect-keyframeeffect-source-source①">source</a></code>
                        具有相同属性的新 <code
                            class="idl"><a data-link-type="idl" href="#keyframeeffect" id="ref-for-keyframeeffect⑤">KeyframeEffect</a></code>
                        对象：</p>
                    <ol>
                        <li data-md>
                            <p>创建一个新的 <code
                                    class="idl"><a data-link-type="idl" href="#keyframeeffect" id="ref-for-keyframeeffect⑥">KeyframeEffect</a></code>
                                对象，<var>effect</var>。</p>
                        <li data-md>
                            <p>使用 <var>source</var> 的相应值设置 <var>effect</var> 的以下属性：</p>
                            <ul>
                                <li data-md>
                                    <p><a data-link-type="dfn" href="#keyframe-effect-effect-target"
                                            id="ref-for-keyframe-effect-effect-target①⑧">效果目标</a>，</p>
                                <li data-md>
                                    <p><a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe④⑥">关键帧</a>，</p>
                                <li data-md>
                                    <p><a data-link-type="dfn" href="#composite-operation"
                                            id="ref-for-composite-operation①②">复合操作</a>，以及</p>
                                <li data-md>
                                    <p>所有指定的时序属性：</p>
                                    <ul>
                                        <li data-md>
                                            <p><a data-link-type="dfn" href="#start-delay"
                                                    id="ref-for-start-delay①⑧">开始延迟</a>，</p>
                                        <li data-md>
                                            <p><a data-link-type="dfn" href="#end-delay"
                                                    id="ref-for-end-delay⑦">结束延迟</a>，</p>
                                        <li data-md>
                                            <p><a data-link-type="dfn" href="#fill-mode"
                                                    id="ref-for-fill-mode①⑤">填充模式</a>，</p>
                                        <li data-md>
                                            <p><a data-link-type="dfn" href="#iteration-start"
                                                    id="ref-for-iteration-start①①">迭代开始</a>，</p>
                                        <li data-md>
                                            <p><a data-link-type="dfn" href="#iteration-count"
                                                    id="ref-for-iteration-count①⑦">迭代次数</a>，</p>
                                        <li data-md>
                                            <p><a data-link-type="dfn" href="#iteration-duration"
                                                    id="ref-for-iteration-duration①⑦">迭代时长</a>，</p>
                                        <li data-md>
                                            <p><a data-link-type="dfn" href="#playback-direction"
                                                    id="ref-for-playback-direction⑦">播放方向</a>，以及</p>
                                        <li data-md>
                                            <p><a data-link-type="dfn"
                                                    href="https://www.w3.org/TR/css-easing-1/#easing-function"
                                                    id="ref-for-easing-function①⓪">时序函数</a>。</p>
                                    </ul>
                            </ul>
                            <p class="note" role="note"><span>注意：</span> 与 <code
                                    class="idl"><a data-link-type="idl" href="#dom-keyframeeffect-keyframeeffect" id="ref-for-dom-keyframeeffect-keyframeeffect①">KeyframeEffect(target, keyframes, options)</a></code>
                                构造函数不同，
                                我们不需要重新抛出异常，因为可以假设在 <var>source</var> 上指定的时序属性是有效的。</p>
                    </ol>
                    <div class="parameters">
                        <dl>
                            <dt data-md><dfn class="dfn-paneled idl-code"
                                    data-dfn-for="KeyframeEffect/KeyframeEffect(source)" data-dfn-type="argument"
                                    data-export data-lt="source"
                                    id="dom-keyframeeffect-keyframeeffect-source-source"><code><code class="idl"><a data-link-type="idl" href="#keyframeeffect" id="ref-for-keyframeeffect⑦">KeyframeEffect</a></code>
                                    source</code></dfn>
                            <dd data-md>
                                <p>要从中复制定义新 <span id="ref-for-keyframe-effect③③">关键帧效果</span> 的属性的 <a
                                        data-link-type="dfn" href="#keyframe-effect"
                                        id="ref-for-keyframe-effect③②">关键帧效果</a>。</p>
                        </dl>
                    </div>
            </dl>
        </div>
        <div class="attributes">
            <dl>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="KeyframeEffect" data-dfn-type="attribute"
                        data-export id="dom-keyframeeffect-target"><code>target</code></dfn>, <span> 类型为 <a
                            data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element"
                            id="ref-for-element⑥">Element</a>，可为空</span>
                <dd data-md>
                    <p>此对象动画的 <a data-link-type="dfn" href="#effect-target-target-element"
                            id="ref-for-effect-target-target-element⑥">目标元素</a>（如果 <span
                            id="ref-for-keyframe-effect-effect-target①⑨">效果目标</span> 是 <code
                            class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element⑦">Element</a></code>，或如果它是伪元素，则为其
                        <a data-link-type="dfn" href="https://www.w3.org/TR/selectors-4/#originating-element"
                            id="ref-for-originating-element①">源元素</a>）。
                        对于不针对特定元素的动画（例如使用音频 API 生成声音的动画），此值可以为 <code>null</code>。
                    </p>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="KeyframeEffect" data-dfn-type="attribute"
                        data-export id="dom-keyframeeffect-pseudoelement"><code>pseudoElement</code></dfn>, <span> 类型为
                        <a data-link-type="idl-name" href="https://www.w3.org/TR/cssom-1/#cssomstring"
                            id="ref-for-cssomstring①">CSSOMString</a>，可为空</span>
                <dd data-md>
                    <p>此对象的 <a data-link-type="dfn" href="#effect-target-target-pseudo-selector"
                            id="ref-for-effect-target-target-pseudo-selector⑤">目标伪选择器</a>。
                        如果此效果没有 <a data-link-type="dfn" href="#keyframe-effect-effect-target"
                            id="ref-for-keyframe-effect-effect-target②⓪">效果目标</a> 或 <span
                            id="ref-for-keyframe-effect-effect-target②①">效果目标</span> 是一个元素（即不是伪元素），则为 <code>null</code>。
                        当 <span id="ref-for-keyframe-effect-effect-target②②">效果目标</span> 是伪元素时，此属性指定伪元素选择器（例如
                        <code>::before</code>）。
                    </p>
                    <p>在设置时，
                        将此对象的 <a data-link-type="dfn" href="#effect-target-target-pseudo-selector"
                            id="ref-for-effect-target-target-pseudo-selector⑥">目标伪选择器</a> 设置为提供的值，并应用以下例外情况：</p>
                    <ul>
                        <li data-md>
                            <p>如果提供的值不是 <code>null</code> 且为无效的 <a class="production css" data-link-type="type"
                                    href="https://www.w3.org/TR/selectors-4/#typedef-pseudo-element-selector"
                                    id="ref-for-typedef-pseudo-element-selector">&lt;pseudo-element-selector></a>，
                                用户代理必须 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw"
                                    id="ref-for-dfn-throw①②">抛出</a> 一个 <code
                                    class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException⑥">DOMException</a></code>，错误名称为
                                <code
                                    class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#syntaxerror" id="ref-for-syntaxerror">SyntaxError</a></code>，并保持此
                                <a data-link-type="dfn" href="#animation-effect"
                                    id="ref-for-animation-effect①①⓪">动画效果</a> 的 <a data-link-type="dfn"
                                    href="#effect-target-target-pseudo-selector"
                                    id="ref-for-effect-target-target-pseudo-selector⑦">目标伪选择器</a> 不变。
                            </p>
                            <p class="note" role="note"><span>注意：</span> 在此上下文中，无效的伪元素遵循<a data-link-type="dfn"
                                    href="https://www.w3.org/TR/selectors-4/#invalid-selector"
                                    id="ref-for-invalid-selector">无效选择器</a>的定义，包括语法无效的伪元素以及用户代理不支持的伪元素，均被视为无效。</p>
                        <li data-md>
                            <p>如果指定了选择器级别 2 中的旧版单冒号伪选择器（'：before'，'：after'，'：first-letter'，或 '：first-line'），
                                则 <a data-link-type="dfn" href="#effect-target-target-pseudo-selector"
                                    id="ref-for-effect-target-target-pseudo-selector⑧">目标伪选择器</a> 必须设置为等效的双冒号选择器（例如
                                '::before'）。</p>
                    </ul>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="KeyframeEffect" data-dfn-type="attribute"
                        data-export id="dom-keyframeeffect-composite"><code>composite</code></dfn>, <span> 类型为 <a
                            data-link-type="idl-name" href="#enumdef-compositeoperation"
                            id="ref-for-enumdef-compositeoperation①">CompositeOperation</a></span>
                <dd data-md>
                    <p>用于将此 <a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect③④">关键帧效果</a> 与
                        <a data-link-type="dfn" href="#effect-stack" id="ref-for-effect-stack①⑤">效果堆栈</a> 进行组合的 <a
                            data-link-type="dfn" href="#composite-operation"
                            id="ref-for-composite-operation①③">复合操作</a>，如 <a data-link-type="dfn"
                            href="#compositeoperation" id="ref-for-compositeoperation">CompositeOperation</a> 枚举值中指定。
                    </p>
                    <p>设置时，将此 <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect①①①">动画效果</a>
                        的 <a data-link-type="dfn" href="#composite-operation"
                            id="ref-for-composite-operation①④">复合操作</a> 属性设置为提供的值。</p>
            </dl>
        </div>
        <div class="methods">
            <dl>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="KeyframeEffect" data-dfn-type="method"
                        data-export data-lt="getKeyframes()"
                        id="dom-keyframeeffect-getkeyframes"><code> sequence&lt;object> getKeyframes()</code></dfn>
                <dd data-md>
                    <p>返回组成此效果的关键帧及其 <a data-link-type="dfn" href="#computed-keyframe-offset"
                            id="ref-for-computed-keyframe-offset②③">计算的关键帧偏移</a>。</p>
                    <div class="informative-bg">
                        <em>本节为非规范性内容</em>
                        <p>此方法的结果是以下格式的对象序列：</p>
                        <pre class="lang-idl highlight"><c- b>dictionary</c-> <c- g>ComputedKeyframe</c-> {
    // ... 属性-值对 ...
    // 即 DOMString 属性名称
    <c- b>double</c->?                  <c- g>offset</c-> = <c- b>null</c->;
    <c- b>double</c->                   <c- g>computedOffset</c->;
    <c- b>DOMString</c->                <c- g>easing</c-> = "linear";
    <c- n>CompositeOperationOrAuto</c-> <c- g>composite</c-> = "auto";
};
</pre>
                        <p>每个成员的含义和值如下：</p>
                        <dl>
                            <dt data-md><code>offset</code>
                            <dd data-md>
                                <p><a data-link-type="dfn" href="#keyframe-offset"
                                        id="ref-for-keyframe-offset⑥">关键帧偏移</a>，为 <a data-link-type="dfn"
                                        href="#keyframe" id="ref-for-keyframe④⑦">关键帧</a> 指定的介于 0.0 到 1.0 之间的数字，或
                                    <code>null</code>。
                                </p>
                                <p>如果 <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe④⑧">关键帧</a>
                                    将自动在相邻关键帧之间进行间隔，则此值为 <code>null</code>。</p>
                            <dt data-md><code>computedOffset</code>
                            <dd data-md>
                                <p>计算出的 <a data-link-type="dfn" href="#computed-keyframe-offset"
                                        id="ref-for-computed-keyframe-offset②④">关键帧偏移</a>，为在运行 <a data-link-type="dfn"
                                        href="#compute-missing-keyframe-offsets"
                                        id="ref-for-compute-missing-keyframe-offsets①">计算丢失的关键帧偏移</a> 过程时计算的值。</p>
                                <p>与 <code>offset</code> 成员不同，<code>computedOffset</code> 永远不会为 null。</p>
                            <dt data-md><code>easing</code>
                            <dd data-md>
                                <p>用于从此关键帧到系列中的下一个关键帧的时间进度转换的<a data-link-type="dfn"
                                        href="https://www.w3.org/TR/css-easing-1/#easing-function"
                                        id="ref-for-easing-function①①">时序函数</a>。</p>
                            <dt data-md><code>composite</code>
                            <dd data-md>
                                <p>用于将此关键帧中指定的值与<a data-link-type="dfn" href="#underlying-value"
                                        id="ref-for-underlying-value①③">底层值</a>结合的 <a data-link-type="dfn"
                                        href="#keyframe-specific-composite-operation"
                                        id="ref-for-keyframe-specific-composite-operation①">关键帧特定的复合操作</a>。</p>
                                <p>如果此 <a data-link-type="dfn" href="#keyframe-effect"
                                        id="ref-for-keyframe-effect③⑤">关键帧效果</a> 上指定的 <a data-link-type="dfn"
                                        href="#composite-operation" id="ref-for-composite-operation①⑤">复合操作</a>
                                    正在使用，则此成员将为 <code
                                        class="idl"><a data-link-type="idl" href="#dom-compositeoperationorauto-auto" id="ref-for-dom-compositeoperationorauto-auto">auto</a></code>。
                                </p>
                        </dl>
                    </div>
                    <p>由于 <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe⑤⓪">关键帧</a> 由部分开放的字典类型表示，目前尚无法使用
                        WebIDL 表达，故此方法结果的准备过程以如下文字定义：</p>
                    <ol>
                        <li data-md>
                            <p>让 <var>result</var> 成为一个空的对象序列。</p>
                        <li data-md>
                            <p>让 <var>keyframes</var> 为以下之一：</p>
                            <ol>
                                <li data-md>
                                    <p>如果此 <a data-link-type="dfn" href="#keyframe-effect"
                                            id="ref-for-keyframe-effect③⑥">关键帧效果</a> 与 <code
                                            class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/css-animations-2/#cssanimation" id="ref-for-cssanimation">CSSAnimation</a></code>
                                        关联，并且它的 <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe⑤①">关键帧</a>
                                        尚未被 <code
                                            class="idl"><a data-link-type="idl" href="#dom-keyframeeffect-setkeyframes" id="ref-for-dom-keyframeeffect-setkeyframes②">setKeyframes()</a></code>
                                        的成功调用替换；
                                        则此 <span id="ref-for-keyframe-effect③⑦">关键帧效果</span> 的 <a data-link-type="dfn"
                                            href="#computed-keyframes" id="ref-for-computed-keyframes④">计算的关键帧</a>。</p>
                                <li data-md>
                                    <p>否则，应用过程 <a data-link-type="dfn" href="#compute-missing-keyframe-offsets"
                                            id="ref-for-compute-missing-keyframe-offsets②">计算丢失的关键帧偏移</a> 的结果，此 <a
                                            data-link-type="dfn" href="#keyframe-effect"
                                            id="ref-for-keyframe-effect③⑧">关键帧效果</a> 的 <a data-link-type="dfn"
                                            href="#keyframe" id="ref-for-keyframe⑤②">关键帧</a>。</p>
                            </ol>
                            <p class="note" role="note"><span>注意：</span> 我们返回 CSS 动画的 <a data-link-type="dfn"
                                    href="#computed-keyframes" id="ref-for-computed-keyframes⑤">计算的关键帧</a>，
                                因为并非所有在 CSS 中指定的关键帧都可以用字典表示。</p>
                        <li data-md>
                            <p>对于 <var>keyframes</var> 中的每个 <var>keyframe</var> 执行以下步骤：</p>
                            <ol>
                                <li data-md>
                                    <p>使用以下定义初始化一个字典对象 <var>output keyframe</var>：</p>
                                    <pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="idl-code" data-dfn-type="dictionary" data-export id="dictdef-basecomputedkeyframe"><code><c- g>BaseComputedKeyframe</c-></code><a class="self-link" href="#dictdef-basecomputedkeyframe"></a></dfn> {
     <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double" id="ref-for-idl-double②②"><c- b>double</c-></a>?                  <dfn class="dfn-paneled idl-code" data-default="null" data-dfn-for="BaseComputedKeyframe" data-dfn-type="dict-member" data-export data-type="double?                  " id="dom-basecomputedkeyframe-offset"><code><c- g>offset</c-></code></dfn> = <c- b>null</c->;
     <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double" id="ref-for-idl-double②③"><c- b>double</c-></a>                   <dfn class="dfn-paneled idl-code" data-dfn-for="BaseComputedKeyframe" data-dfn-type="dict-member" data-export data-type="double                   " id="dom-basecomputedkeyframe-computedoffset"><code><c- g>computedOffset</c-></code></dfn>;
     <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString⑦"><c- b>DOMString</c-></a>                <dfn class="dfn-paneled idl-code" data-default="&quot;linear&quot;" data-dfn-for="BaseComputedKeyframe" data-dfn-type="dict-member" data-export data-type="DOMString                " id="dom-basecomputedkeyframe-easing"><code><c- g>easing</c-></code></dfn> = "linear";
     <a data-link-type="idl-name" href="#enumdef-compositeoperationorauto" id="ref-for-enumdef-compositeoperationorauto"><c- n>CompositeOperationOrAuto</c-></a> <dfn class="dfn-paneled idl-code" data-default="&quot;auto&quot;" data-dfn-for="BaseComputedKeyframe" data-dfn-type="dict-member" data-export data-type="CompositeOperationOrAuto " id="dom-basecomputedkeyframe-composite"><code><c- g>composite</c-></code></dfn> = "auto";
};
</pre>
                                <li data-md>
                                    <p>将 <code
                                            class="idl"><a data-link-type="idl" href="#dom-basecomputedkeyframe-offset" id="ref-for-dom-basecomputedkeyframe-offset">offset</a></code>、
                                        <code
                                            class="idl"><a data-link-type="idl" href="#dom-basecomputedkeyframe-computedoffset" id="ref-for-dom-basecomputedkeyframe-computedoffset">computedOffset</a></code>、
                                        <code
                                            class="idl"><a data-link-type="idl" href="#dom-basecomputedkeyframe-easing" id="ref-for-dom-basecomputedkeyframe-easing">easing</a></code>
                                        和
                                        <code
                                            class="idl"><a data-link-type="idl" href="#dom-basecomputedkeyframe-composite" id="ref-for-dom-basecomputedkeyframe-composite">composite</a></code>
                                        成员设置为
                                        <var>keyframe</var> 的相应 <a data-link-type="dfn" href="#keyframe-offset"
                                            id="ref-for-keyframe-offset⑦">关键帧偏移</a>、
                                        <a data-link-type="dfn" href="#computed-keyframe-offset"
                                            id="ref-for-computed-keyframe-offset②⑤">计算的关键帧偏移</a>、
                                        关键帧特定的 <a data-link-type="dfn"
                                            href="https://www.w3.org/TR/css-easing-1/#easing-function"
                                            id="ref-for-easing-function①②">时序函数</a> 和
                                        <a data-link-type="dfn" href="#keyframe-specific-composite-operation"
                                            id="ref-for-keyframe-specific-composite-operation②">关键帧特定的复合操作</a>。
                                    </p>
                                <li data-md>
                                    <p>对于 <var>keyframe</var> 中的每个动画属性-值对 <var>declaration</var>，执行以下步骤：</p>
                                    <ol>
                                        <li data-md>
                                            <p>将 <var>property name</var> 设置为通过将 <var>declaration</var> 的属性名称传递给算法<a
                                                    data-link-type="dfn"
                                                    href="#animation-property-name-to-idl-attribute-name"
                                                    id="ref-for-animation-property-name-to-idl-attribute-name">将动画属性名称转换为
                                                    IDL 属性名称</a>的结果。</p>
                                        <li data-md>
                                            <p>将 <var>IDL value</var> 设置为通过将 <var>declaration</var> 传递给算法<a
                                                    data-link-type="dfn"
                                                    href="https://drafts.csswg.org/cssom/#serialize-a-css-value"
                                                    id="ref-for-serialize-a-css-value">序列化 CSS 值</a> <a
                                                    data-link-type="biblio"
                                                    href="#biblio-cssom">[CSSOM]</a>得到的属性值的序列化结果。</p>
                                        <li data-md>
                                            <p>将 <var>value</var> 设置为<a data-link-type="dfn"
                                                    href="https://webidl.spec.whatwg.org/#DOMString-to-es"
                                                    id="ref-for-DOMString-to-es">转换</a> <var>IDL value</var> 为
                                                ECMAScript 字符串值的结果。</p>
                                        <li data-md>
                                            <p>使用属性名称 <var>property name</var> 和属性描述符 { [[Writable]]: <span
                                                    class="esvalue">true</span>, [[Enumerable]]: <span
                                                    class="esvalue">true</span>, [[Configurable]]: <span
                                                    class="esvalue">true</span>, [[Value]]: <var>value</var> } 以及布尔标志
                                                <span class="esvalue">false</span>，
                                                调用 <var>output keyframe</var> 的<a data-link-type="dfn"
                                                    href="http://www.ecma-international.org/ecma-262/6.0/#sec-ordinary-object-internal-methods-and-internal-slots-defineownproperty-p-desc"
                                                    id="ref-for-sec-ordinary-object-internal-methods-and-internal-slots-defineownproperty-p-desc">[[DefineOwnProperty]]</a>
                                                内部方法。
                                            </p>
                                    </ol>
                                <li data-md>
                                    <p>将 <var>output keyframe</var> 添加到 <var>result</var>。</p>
                            </ol>
                        <li data-md>
                            <p>返回 <var>result</var>。</p>
                    </ol>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="KeyframeEffect" data-dfn-type="method"
                        data-export data-lt="setKeyframes(keyframes)"
                        id="dom-keyframeeffect-setkeyframes"><code> void setKeyframes(object? keyframes)</code></dfn>
                <dd data-md>
                    <p>替换组成此效果的一组 <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe⑤③">关键帧</a>。</p>
                    <div class="parameters">
                        <dl>
                            <dt data-md><dfn class="idl-code" data-dfn-for="KeyframeEffect/setKeyframes"
                                    data-dfn-type="argument" data-export data-lt="keyframes"
                                    id="dom-keyframeeffect-setkeyframes-keyframes"><code>object? keyframes</code><a
                                        class="self-link" href="#dom-keyframeeffect-setkeyframes-keyframes"></a></dfn>
                            <dd data-md>
                                <p>一系列关键帧，其格式和处理在 <a href="#processing-a-keyframes-argument">第 6.6.3 节 处理关键帧参数</a> 中定义。
                                </p>
                                <p>此效果的 <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe⑤④">关键帧</a> 组将被执行过程
                                    <a data-link-type="dfn" href="#process-a-keyframes-argument"
                                        id="ref-for-process-a-keyframes-argument">处理关键帧参数</a> 的结果替换。
                                    如果该过程引发异常，则此效果的 <span id="ref-for-keyframe⑤⑤">关键帧</span> 不会被修改。
                                </p>
                        </dl>
                    </div>
            </dl>
        </div>

        <h4 class="heading settled" data-level="6.6.1" id="creating-a-new-keyframeeffect-object"><span
                class="secno">6.6.1. </span><span class="content">创建一个新的 <code>KeyframeEffect</code>
                对象</span><a class="self-link" href="#creating-a-new-keyframeeffect-object"></a></h4>
        <div class="informative-bg">
            <em>本节为非规范性内容</em>
            <p><code
                    class="idl"><a data-link-type="idl" href="#dom-keyframeeffect-keyframeeffect" id="ref-for-dom-keyframeeffect-keyframeeffect②">KeyframeEffect</a></code>
                构造函数提供了多种创建新的 <code
                    class="idl"><a data-link-type="idl" href="#keyframeeffect" id="ref-for-keyframeeffect⑧">KeyframeEffect</a></code>
                对象的方法。</p>
            <p>在最简单的情况下，可以通过以下方式构造一个将 <code>elem</code> 的 "left" 属性在三秒内更改为 100px 的 <code
                    class="idl"><a data-link-type="idl" href="#keyframeeffect" id="ref-for-keyframeeffect⑨">KeyframeEffect</a></code>
                对象：</p>
            <div class="example" id="example-7a28f33c">
                <a class="self-link" href="#example-7a28f33c"></a>
                <pre
                    class="lang-javascript highlight"><c- a>var</c-> effect <c- o>=</c-> <c- ow>new</c-> KeyframeEffect<c- p>(</c->elem<c- p>,</c-> <c- p>{</c-> left<c- o>:</c-> <c- t>'100px'</c-> <c- p>},</c-> <c- mf>3000</c-><c- p>);</c-></pre>
            </div>
            <p>第二个参数，表示关键帧列表，可以指定多个属性。（参见 <a href="#processing-a-keyframes-argument">第 6.6.3 节 处理关键帧参数</a>。）</p>
            <div class="example" id="example-d6624b71">
                <a class="self-link" href="#example-d6624b71"></a>
                <pre
                    class="lang-javascript highlight"><c- c1>// 一次性指定多个属性</c->
<c- a>var</c-> effectA <c- o>=</c-> <c- ow>new</c-> KeyframeEffect<c- p>(</c->elem<c- p>,</c-> <c- p>{</c-> left<c- o>:</c-> <c- t>'100px'</c-><c- p>,</c-> top<c- o>:</c-> <c- t>'300px'</c-> <c- p>},</c-> <c- mf>3000</c-><c- p>);</c->

<c- c1>// 指定多个关键帧</c->
<c- a>var</c-> effectB <c- o>=</c-> <c- ow>new</c-> KeyframeEffect<c- p>(</c->elem<c- p>,</c-> <c- p>[</c-> <c- p>{</c-> left<c- o>:</c-> <c- t>'100px'</c-> <c- p>},</c-> <c- p>{</c-> left<c- o>:</c-> <c- t>'300px'</c-> <c- p>}</c-> <c- p>],</c-> <c- mf>3000</c-><c- p>);</c-></pre>
            </div>
            <p>第三个参数，表示动画的时序，可以简单地是一个表示以毫秒为单位的 <a data-link-type="dfn" href="#iteration-duration"
                    id="ref-for-iteration-duration①⑧">迭代持续时间</a> 的数字，如上所示，或者为了指定更多的时序属性，例如 <a data-link-type="dfn"
                    href="#start-delay" id="ref-for-start-delay①⑨">开始延迟</a>，可以使用 <code
                    class="idl"><a data-link-type="idl" href="#dictdef-effecttiming" id="ref-for-dictdef-effecttiming①⓪">EffectTiming</a></code>
                对象，如下所示：</p>
            <div class="example" id="example-4d5977de">
                <a class="self-link" href="#example-4d5977de"></a>
                <pre
                    class="lang-javascript highlight"><c- a>var</c-> effect <c- o>=</c->
  <c- ow>new</c-> KeyframeEffect<c- p>(</c->elem<c- p>,</c-> <c- p>{</c-> left<c- o>:</c-> <c- t>'100px'</c-> <c- p>},</c-> <c- p>{</c-> duration<c- o>:</c-> <c- mf>3000</c-><c- p>,</c-> delay<c- o>:</c-> <c- mf>2000</c-> <c- p>});</c-></pre>
            </div>
            <p>如果未指定持续时间，则使用值 0。可以通过以下方式创建一个简单设置属性而不进行任何插值的动画：</p>
            <div class="example" id="example-d3a5d53d">
                <a class="self-link" href="#example-d3a5d53d"></a>
                <pre
                    class="lang-javascript highlight"><c- a>var</c-> effect <c- o>=</c->
  <c- ow>new</c-> KeyframeEffect<c- p>(</c->elem<c- p>,</c-> <c- p>{</c-> visibility<c- o>:</c-> <c- t>'hidden'</c-> <c- p>},</c-> <c- p>{</c-> fill<c- o>:</c-> <c- t>'forwards'</c-> <c- p>});</c-></pre>
            </div>
            <p>然而，正如在 <a href="#fill-behavior">第 4.6 节 填充行为</a> 中所描述的，这种使用无限填充动画的方式是不建议的。</p>
            <p>创建一个 <code
                    class="idl"><a data-link-type="idl" href="#keyframeeffect" id="ref-for-keyframeeffect①⓪">KeyframeEffect</a></code>
                后，可以将其添加到 <code
                    class="idl"><a data-link-type="idl" href="#animation" id="ref-for-animation⑦">Animation</a></code>
                中然后播放该动画。然而，对于简单效果来说，<a href="#extensions-to-the-element-interface"><code>Element.animate</code></a>
                快捷方式更为方便，因为它会自动执行这些步骤。例如，</p>
            <div class="example" id="example-a7ce65dd">
                <a class="self-link" href="#example-a7ce65dd"></a>
                <pre
                    class="lang-javascript highlight">elem<c- p>.</c->animate<c- p>({</c-> left<c- o>:</c-> <c- t>'100px'</c-> <c- p>},</c-> <c- mf>3000</c-><c- p>);</c-></pre>
            </div>
        </div>

        <h4 class="heading settled" data-level="6.6.2" id="property-name-conversion"><span class="secno">6.6.2.
            </span><span class="content">属性名称和IDL名称</span><a class="self-link" href="#property-name-conversion"></a>
        </h4>
        <p><var>property</var> 的 <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="animation-property-name-to-idl-attribute-name">动画属性名称到IDL属性名称</dfn> 转换算法如下：</p>
        <ol>
            <li data-md>
                <p>如果 <var>property</var> 符合 <a class="production css" data-link-type="type"
                        href="https://www.w3.org/TR/css-variables-1/#typedef-custom-property-name"
                        id="ref-for-typedef-custom-property-name">&lt;custom-property-name></a> 的形式，返回
                    <var>property</var>。
                </p>
            <li data-md>
                <p>如果 <var>property</var> 指的是CSS属性 <a class="property css" data-link-type="property"
                        href="https://drafts.csswg.org/css2/#propdef-float" id="ref-for-propdef-float">float</a>，返回字符串
                    "cssFloat"。</p>
            <li data-md>
                <p>如果 <var>property</var> 指的是CSS属性 <a class="property css" data-link-type="property"
                        href="https://www.w3.org/TR/motion-1/#propdef-offset"
                        id="ref-for-propdef-offset">offset</a>，返回字符串 "cssOffset"。</p>
            <li data-md>
                <p>否则，返回将 <var>property</var> 传入 <a data-link-type="dfn"
                        href="https://drafts.csswg.org/cssom/#css-property-to-idl-attribute"
                        id="ref-for-css-property-to-idl-attribute①">CSS属性到IDL属性</a> 的算法结果 <a data-link-type="biblio"
                        href="#biblio-cssom">[CSSOM]</a>。</p>
        </ol>
        <p><var>attribute</var> 的 <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="idl-attribute-name-to-animation-property-name">IDL属性名称到动画属性名称</dfn> 转换算法如下：</p>
        <ol>
            <li data-md>
                <p>如果 <var>attribute</var> 符合 <a class="production css" data-link-type="type"
                        href="https://www.w3.org/TR/css-variables-1/#typedef-custom-property-name"
                        id="ref-for-typedef-custom-property-name①">&lt;custom-property-name></a> 的形式，返回
                    <var>attribute</var>。
                </p>
            <li data-md>
                <p>如果 <var>attribute</var> 是字符串 "cssFloat"，则返回表示CSS属性 <a class="property css" data-link-type="property"
                        href="https://drafts.csswg.org/css2/#propdef-float" id="ref-for-propdef-float①">float</a> 的动画属性。
                </p>
            <li data-md>
                <p>如果 <var>attribute</var> 是字符串 "cssOffset"，则返回表示CSS属性 <a class="property css" data-link-type="property"
                        href="https://www.w3.org/TR/motion-1/#propdef-offset" id="ref-for-propdef-offset①">offset</a>
                    的动画属性。</p>
            <li data-md>
                <p>否则，返回将 <var>attribute</var> 传入 <a data-link-type="dfn"
                        href="https://drafts.csswg.org/cssom/#idl-attribute-to-css-property"
                        id="ref-for-idl-attribute-to-css-property">IDL属性到CSS属性</a> 的算法结果 <a data-link-type="biblio"
                        href="#biblio-cssom">[CSSOM]</a>。</p>
        </ol>

        <h4 class="heading settled" data-level="6.6.3" id="processing-a-keyframes-argument"><span class="secno">6.6.3.
            </span><span class="content">处理 <code>keyframes</code> 参数</span><a class="self-link"
                href="#processing-a-keyframes-argument"></a></h4>
        <div class="informative-bg">
            <em>本节内容为非规范性内容</em>
            <p>以下方法均接受一组关键帧作为参数：</p>
            <ul>
                <li data-md>
                    <p><code
                            class="idl"><a data-link-type="idl" href="#dom-keyframeeffect-keyframeeffect" id="ref-for-dom-keyframeeffect-keyframeeffect③">KeyframeEffect(target, keyframes, options)</a></code>
                        构造函数,</p>
                <li data-md>
                    <p><code
                            class="idl"><a data-link-type="idl" href="#dom-keyframeeffect-setkeyframes" id="ref-for-dom-keyframeeffect-setkeyframes③">setKeyframes()</a></code>
                        方法在 <code
                            class="idl"><a data-link-type="idl" href="#keyframeeffect" id="ref-for-keyframeeffect①①">KeyframeEffect</a></code>
                        接口上,</p>
                <li data-md>
                    <p><code
                            class="idl"><a data-link-type="idl" href="#dom-animatable-animate" id="ref-for-dom-animatable-animate">animate()</a></code>
                        方法在 <code
                            class="idl"><a data-link-type="idl" href="#animatable" id="ref-for-animatable">Animatable</a></code>
                        接口混入中。</p>
            </ul>
            <p>此参数可以采用以下两种形式之一，如下所示。</p>
            <div class="example" id="example-23ca44fc">
                <a class="self-link" href="#example-23ca44fc"></a>
                <pre class="lang-javascript highlight"><c- c1>// 以下两种表达式产生相同的结果：</c->
elem<c- p>.</c->animate<c- p>([</c-> <c- p>{</c-> color<c- o>:</c-> <c- t>'blue'</c-> <c- p>},</c->
               <c- p>{</c-> color<c- o>:</c-> <c- t>'green'</c-> <c- p>},</c->
               <c- p>{</c-> color<c- o>:</c-> <c- t>'red'</c-> <c- p>},</c->
               <c- p>{</c-> color<c- o>:</c-> <c- t>'yellow'</c-> <c- p>}</c-> <c- p>],</c-> <c- mf>2000</c-><c- p>);</c->
elem<c- p>.</c->animate<c- p>({</c-> color<c- o>:</c-> <c- p>[</c-> <c- t>'blue'</c-><c- p>,</c-> <c- t>'green'</c-><c- p>,</c-> <c- t>'red'</c-><c- p>,</c-> <c- t>'yellow'</c-> <c- p>]</c-> <c- p>},</c-> <c- mf>2000</c-><c- p>);</c->

<c- c1>// 同样地，对于多属性动画，以下两个表达式是等效的：</c->
elem<c- p>.</c->animate<c- p>([</c-> <c- p>{</c-> color<c- o>:</c-> <c- t>'blue'</c-><c- p>,</c-> left<c- o>:</c-> <c- t>'0px'</c-> <c- p>},</c->
               <c- p>{</c-> color<c- o>:</c-> <c- t>'green'</c-><c- p>,</c-> left<c- o>:</c-> <c- t>'-20px'</c-> <c- p>},</c->
               <c- p>{</c-> color<c- o>:</c-> <c- t>'red'</c-><c- p>,</c-> left<c- o>:</c-> <c- t>'100px'</c-> <c- p>},</c->
               <c- p>{</c-> color<c- o>:</c-> <c- t>'yellow'</c-><c- p>,</c-> left<c- o>:</c-> <c- t>'50px'</c-><c- p>}</c-> <c- p>],</c-> <c- mf>2000</c-><c- p>);</c->
elem<c- p>.</c->animate<c- p>({</c-> color<c- o>:</c-> <c- p>[</c-> <c- t>'blue'</c-><c- p>,</c-> <c- t>'green'</c-><c- p>,</c-> <c- t>'red'</c-><c- p>,</c-> <c- t>'yellow'</c-> <c- p>],</c->
               left<c- o>:</c-> <c- p>[</c-> <c- t>'0px'</c-><c- p>,</c-> <c- t>'-20px'</c-><c- p>,</c-> <c- t>'100px'</c-><c- p>,</c-> <c- t>'50px'</c-> <c- p>]</c-> <c- p>},</c-> <c- mf>2000</c-><c- p>);</c->

<c- c1>// 顺便说一句，以下三种表达式都是等效的：</c->
elem<c- p>.</c->animate<c- p>([</c-> <c- p>{</c-> color<c- o>:</c-> <c- t>'red'</c-> <c- p>}</c-> <c- p>],</c-> <c- mf>1000</c-><c- p>);</c->
elem<c- p>.</c->animate<c- p>({</c-> color<c- o>:</c-> <c- p>[</c-> <c- t>'red'</c-> <c- p>]</c-> <c- p>},</c-> <c- mf>1000</c-><c- p>);</c->
elem<c- p>.</c->animate<c- p>({</c-> color<c- o>:</c-> <c- t>'red'</c-> <c- p>},</c-> <c- mf>1000</c-><c- p>);</c->
</pre>
            </div>
            <p>第一种形式（数组形式）由一个关键帧数组组成，每个关键帧可以为每个动画属性指定最多一个值。第二种形式（对象形式）由一个对象组成，其中每个动画属性可以指定单个动画值或一组动画值。</p>
            <p>第一种数组形式是规范形式，也是由 <code
                    class="idl"><a data-link-type="idl" href="#dom-keyframeeffect-getkeyframes" id="ref-for-dom-keyframeeffect-getkeyframes①">getKeyframes()</a></code>
                方法返回的形式。</p>
            <p><a data-link-type="dfn" href="#keyframe-offset" id="ref-for-keyframe-offset⑧">关键帧偏移</a>
                可以通过任意一种形式来指定，如下所示：</p>
            <div class="example" id="example-34879cb3">
                <a class="self-link" href="#example-34879cb3"></a>
                <pre class="lang-javascript highlight"><c- c1>// 没有偏移的关键帧将自动计算偏移</c->
<c- c1>// 为第一个关键帧设置为 0，中间关键帧为 0.65，最后一个关键帧为 1。</c->
elem<c- p>.</c->animate<c- p>([</c-> <c- p>{</c-> color<c- o>:</c-> <c- t>'blue'</c-> <c- p>},</c->
               <c- p>{</c-> color<c- o>:</c-> <c- t>'green'</c-><c- p>,</c-> offset<c- o>:</c-> <c- mf>0.5</c-> <c- p>},</c->
               <c- p>{</c-> color<c- o>:</c-> <c- t>'red'</c-> <c- p>},</c->
               <c- p>{</c-> color<c- o>:</c-> <c- t>'yellow'</c-><c- p>,</c-> offset<c- o>:</c-> <c- mf>0.8</c-> <c- p>},</c->
               <c- p>{</c-> color<c- o>:</c-> <c- t>'pink'</c-> <c- p>}</c-> <c- p>],</c-> <c- mf>2000</c-><c- p>);</c->

<c- c1>// 以下代码产生相同的结果。请注意，不需要指定最后一个值：它将自动被视为 'null'，然后像前一个情况一样应用自动分配。</c->
elem<c- p>.</c->animate<c- p>({</c-> color<c- o>:</c-> <c- p>[</c-> <c- t>'blue'</c-><c- p>,</c-> <c- t>'green'</c-><c- p>,</c-> <c- t>'red'</c-><c- p>,</c-> <c- t>'yellow'</c-><c- p>,</c-> <c- t>'pink'</c-> <c- p>],</c->
               offset<c- o>:</c-> <c- p>[</c-> <c- kc>null</c-><c- p>,</c-> <c- mf>0.5</c-><c- p>,</c-> <c- kc>null</c-><c- p>,</c-> <c- mf>0.8</c-> <c- p>]</c-> <c- p>},</c-> <c- mf>2000</c-><c- p>);</c->
</pre>
            </div>
            <p>同样的，<a data-link-type="dfn" href="https://www.w3.org/TR/css-easing-1/#easing-function"
                    id="ref-for-easing-function①③">时间函数</a> 和 <a data-link-type="dfn"
                    href="#keyframe-specific-composite-operation"
                    id="ref-for-keyframe-specific-composite-operation③">关键帧特定复合操作</a> 也可以通过任意形式指定。数组形式允许为每个 <a
                    data-link-type="dfn" href="#keyframe" id="ref-for-keyframe⑤⑥">关键帧</a>
                指定不同的值，而对于对象形式，值列表将根据需要重复，直到每个关键帧都分配了一个值。</p>
            <div class="example" id="example-52bc65a2">
                <a class="self-link" href="#example-52bc65a2"></a>
                <pre class="lang-javascript highlight"><c- c1>// 由于时间函数应用于关键帧之间，即使我们在最后一个关键帧上指定</c->
<c- c1>// 一个时间函数，它也会被忽略。</c->
elem<c- p>.</c->animate<c- p>([</c-> <c- p>{</c-> color<c- o>:</c-> <c- t>'blue'</c-><c- p>,</c-> easing<c- o>:</c-> <c- t>'ease-in'</c-> <c- p>},</c->
               <c- p>{</c-> color<c- o>:</c-> <c- t>'green'</c-><c- p>,</c-> easing<c- o>:</c-> <c- t>'ease-out'</c-> <c- p>},</c->
               <c- p>{</c-> color<c- o>:</c-> <c- t>'yellow'</c-> <c- p>}</c-> <c- p>],</c-> <c- mf>2000</c-><c- p>);</c->

<c- c1>// 以下代码产生相同的结果。</c->
elem<c- p>.</c->animate<c- p>({</c-> color<c- o>:</c-> <c- p>[</c-> <c- t>'blue'</c-><c- p>,</c-> <c- t>'green'</c-><c- p>,</c-> <c- t>'yellow'</c-> <c- p>],</c->
               easing<c- o>:</c-> <c- p>[</c-> <c- t>'ease-in'</c-><c- p>,</c-> <c- t>'ease-out'</c-> <c- p>]</c-> <c- p>},</c-> <c- mf>2000</c-><c- p>);</c->

<c- c1>// 重复行为使得将相同的值分配给所有关键帧变得简单：</c->
elem<c- p>.</c->animate<c- p>({</c-> color<c- o>:</c-> <c- p>[</c-> <c- t>'blue'</c-><c- p>,</c-> <c- t>'green'</c-><c- p>,</c-> <c- t>'yellow'</c-> <c- p>],</c->
               easing<c- o>:</c-> <c- t>'ease-in-out'</c-> <c- p>},</c-> <c- mf>2000</c-><c- p>);</c->
</pre>
            </div>
            <p>请注意，<code>easing</code> 属性在任意形式中都设置了 <em>关键帧特定的时间函数</em>。这与应用于整个 <a data-link-type="dfn"
                    href="#iteration-duration" id="ref-for-iteration-duration①⑨">迭代持续时间</a> 的 <a data-link-type="dfn"
                    href="https://www.w3.org/TR/css-easing-1/#easing-function" id="ref-for-easing-function①④">时间函数</a>
                是独立的，后者可以使用 <code
                    class="idl"><a data-link-type="idl" href="#dictdef-keyframeeffectoptions" id="ref-for-dictdef-keyframeeffectoptions⑤">KeyframeEffectOptions</a></code>
                对象指定（或者在使用 <code
                    class="idl"><a data-link-type="idl" href="#dom-animatable-animate" id="ref-for-dom-animatable-animate①">animate()</a></code>
                方法时使用 <code
                    class="idl"><a data-link-type="idl" href="#dictdef-keyframeanimationoptions" id="ref-for-dictdef-keyframeanimationoptions">KeyframeAnimationOptions</a></code>
                对象）。</p>
            <p>在以下示例中，这两条语句会产生不同的结果。</p>
            <div class="example" id="example-148601d7">
                <a class="self-link" href="#example-148601d7"></a>
                <pre class="lang-javascript highlight"><c- c1>// 此处，'ease-in-out' 应用于每个颜色值之间。</c->
elem<c- p>.</c->animate<c- p>({</c-> color<c- o>:</c-> <c- p>[</c-> <c- t>'blue'</c-><c- p>,</c-> <c- t>'green'</c-><c- p>,</c-> <c- t>'yellow'</c-> <c- p>],</c->
               easing<c- o>:</c-> <c- t>'ease-in-out'</c-> <c- p>},</c-> <c- mf>2000</c-><c- p>);</c->

<c- c1>// 然而，在这种情况下，'ease-in-out' 应用于整个动画的跨度，即从 'blue' 到 'yellow'。</c->
elem<c- p>.</c->animate<c- p>({</c-> color<c- o>:</c-> <c- p>[</c-> <c- t>'blue'</c-><c- p>,</c-> <c- t>'green'</c-><c- p>,</c-> <c- t>'yellow'</c-> <c- p>]</c-> <c- p>},</c->
             <c- p>{</c-> duration<c- o>:</c-> <c- mf>2000</c-><c- p>,</c-> easing<c- o>:</c-> <c- t>'ease-in-out'</c-> <c- p>});</c->
</pre>
            </div>
            <p><code>keyframes</code> 参数的类型无法在 WebIDL 中表示，因为它依赖于部分开放的字典类型。</p>
            <p>从概念上讲，此参数的类型等同于以下类 WebIDL 定义：</p>
            <pre class="lang-idl highlight"><c- b>dictionary</c-> <c- g>Keyframe</c-> {
    // ... 属性-值对 ...
    // 即 DOMString propertyName
    <c- b>double</c->?                   <c- g>offset</c-> = <c- b>null</c->;
    <c- b>DOMString</c->                 <c- g>easing</c-> = "linear";
    <c- n>CompositeOperationOrAuto</c->  <c- g>composite</c-> = "auto";
};

<c- b>dictionary</c-> <c- g>PropertyIndexedKeyframes</c-> {
    // ... 属性-值 和 属性-值列表 对 ...
    // 即 (DOMString 或 sequence&amp;lt;DOMString&amp;gt;) propertyName
    (<c- b>double</c->? <c- b>or</c-> <c- b>sequence</c->&lt;<c- b>double</c->?>)                         <c- g>offset</c-> = [];
    (<c- b>DOMString</c-> <c- b>or</c-> <c- b>sequence</c->&lt;<c- b>DOMString</c->>)                     <c- g>easing</c-> = [];
    (<c- n>CompositeOperationOrAuto</c-> <c- b>or</c-> <c- b>sequence</c->&lt;<c- n>CompositeOperationOrAuto</c->>) <c- g>composite</c-> = [];
};

<c- b>typedef</c-> (<c- b>sequence</c->&lt;<c- n>Keyframe</c->> <c- b>or</c-> <c- n>PropertyIndexedKeyframes</c->) <c- g>KeyframeArgument</c->;
</pre>
            <p>每个参数的含义和允许的值如下：</p>
            <dl>
                <dt data-md>offset
                <dd data-md>
                    <p><a data-link-type="dfn" href="#keyframe-offset" id="ref-for-keyframe-offset⑨">关键帧偏移</a>，以介于 0.0 和
                        1.0 之间的数字表示，包括这两个值，或 <code>null</code>。</p>
                    <p><code>null</code> 值表示 <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe⑤⑧">关键帧</a>
                        应在相邻关键帧之间自动间隔。</p>
                    <p>指定超出范围 [0.0, 1.0] 的偏移量会导致抛出 <span class="exceptionname">TypeError</span> 异常。</p>
                    <p>指定偏移量的关键帧必须按偏移量递增的顺序提供。然而，允许相邻且相等的偏移量。</p>
                <dt data-md>easing
                <dd data-md>
                    <p>从此关键帧到系列中的下一个关键帧的 <a data-link-type="dfn"
                            href="https://www.w3.org/TR/css-easing-1/#easing-function"
                            id="ref-for-easing-function①⑤">时间函数</a>。</p>
                    <p>解析此字符串的语法和错误处理与为 <code
                            class="idl"><a data-link-type="idl" href="#dom-effecttiming-easing" id="ref-for-dom-effecttiming-easing③">easing</a></code>
                        属性在 <code
                            class="idl"><a data-link-type="idl" href="#dictdef-effecttiming" id="ref-for-dictdef-effecttiming①①">EffectTiming</a></code>
                        接口中定义的解析方式相同。</p>
                <dt data-md>composite
                <dd data-md>
                    <p>用于将此关键帧中指定的值与 <a data-link-type="dfn" href="#underlying-value"
                            id="ref-for-underlying-value①④">基础值</a> 结合起来的 <a data-link-type="dfn"
                            href="#keyframe-specific-composite-operation"
                            id="ref-for-keyframe-specific-composite-operation④">关键帧特定复合操作</a>。</p>
                    <p>如果值为 <code
                            class="idl"><a data-link-type="idl" href="#dom-compositeoperationorauto-auto" id="ref-for-dom-compositeoperationorauto-auto①">auto</a></code>，则使用在
                        <a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect④⓪">关键帧效果</a> 中指定的 <a
                            data-link-type="dfn" href="#composite-operation"
                            id="ref-for-composite-operation①⑥">复合操作</a>。
                    </p>
            </dl>
            <p>由于此类型无法在 WebIDL 中表示，因此其处理方式在以下文本中定义。</p>
        </div>
        <p>对于接受 <code>keyframes</code> 参数的每个方法，对输入运行 <a data-link-type="dfn" href="#process-a-keyframes-argument"
                id="ref-for-process-a-keyframes-argument①">处理 keyframes 参数</a> 的过程，并保留该过程的结果。</p>
        <p>首先，我们定义两个支持定义。</p>
        <p>指令 <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="check-the-completion-record">检查完成记录</dfn> 的
            <var>结果</var>，其中 <var>结果</var> 是来自调用 ECMAScript 操作的 <a data-link-type="dfn"
                href="http://www.ecma-international.org/ecma-262/6.0/#sec-completion-record-specification-type"
                id="ref-for-sec-completion-record-specification-type">完成记录</a>，相当于以下步骤：
        </p>
        <ol>
            <li data-md>
                <p>如果 <var>结果</var> 是 <a data-link-type="dfn"
                        href="http://www.ecma-international.org/ecma-262/6.0/#sec-completion-record-specification-type"
                        id="ref-for-sec-completion-record-specification-type①">突然完成</a>，则抛出 <var>结果</var> 的 [[value]]
                    字段中包含的异常并中止该过程。</p>
                <p class="issue" id="issue-47a68024"><a class="self-link" href="#issue-47a68024"></a> 如果 [[type]] 是
                    <span class="esvalue">break</span>、<span class="esvalue">continue</span> 或 <span
                        class="esvalue">return</span>，我们应该怎么做？可能会这样吗？
                </p>
            <li data-md>
                <p>用 <var>结果</var> 的 [[value]] 字段中的值替换 <var>结果</var>。</p>
        </ol>
        <p>将 <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport
                id="process-a-keyframe-like-object">处理类似关键帧对象</dfn> 的过程分为两个参数：</p>
        <ul>
            <li data-md>
                <p>一个 ECMAScript 对象 <var>keyframe input</var> 和</p>
            <li data-md>
                <p>一个 <var>allow lists</var> 布尔标志</p>
        </ul>
        <p>并返回一个映射，将属性名称映射到 DOMString 值（如果 <var>allow lists</var> 为 false），或者将属性名称映射到字符串值序列，否则，将使用以下过程：</p>
        <ol>
            <li data-md>
                <p>运行 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#es-to-dictionary"
                        id="ref-for-es-to-dictionary">将 ECMAScript 值转换为字典类型</a> <a data-link-type="biblio"
                        href="#biblio-webidl">[WEBIDL]</a> 的过程，将 <var>keyframe input</var> 作为 ECMAScript 值，并根据
                    <var>allow lists</var> 标志的值选择字典类型，如下所示：
                </p>
                <div class="switch">
                    <dl>
                        <dt data-md>如果 <var>allow lists</var> 为 true，
                        <dd data-md>
                            <p>使用以下字典类型：</p>
                            <pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="idl-code" data-dfn-type="dictionary" data-export id="dictdef-basepropertyindexedkeyframe"><code><c- g>BasePropertyIndexedKeyframe</c-></code><a class="self-link" href="#dictdef-basepropertyindexedkeyframe"></a></dfn> {
    (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double" id="ref-for-idl-double②④"><c- b>double</c-></a>? <c- b>or</c-> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence①"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double" id="ref-for-idl-double②⑤"><c- b>double</c-></a>?>)                         <dfn class="idl-code" data-default="[]" data-dfn-for="BasePropertyIndexedKeyframe" data-dfn-type="dict-member" data-export data-type="(double? or sequence<double?>)                         " id="dom-basepropertyindexedkeyframe-offset"><code><c- g>offset</c-></code><a class="self-link" href="#dom-basepropertyindexedkeyframe-offset"></a></dfn> = [];
    (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString⑧"><c- b>DOMString</c-></a> <c- b>or</c-> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence②"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString⑨"><c- b>DOMString</c-></a>>)                     <dfn class="idl-code" data-default="[]" data-dfn-for="BasePropertyIndexedKeyframe" data-dfn-type="dict-member" data-export data-type="(DOMString or sequence<DOMString>)                     " id="dom-basepropertyindexedkeyframe-easing"><code><c- g>easing</c-></code><a class="self-link" href="#dom-basepropertyindexedkeyframe-easing"></a></dfn> = [];
    (<a data-link-type="idl-name" href="#enumdef-compositeoperationorauto" id="ref-for-enumdef-compositeoperationorauto①"><c- n>CompositeOperationOrAuto</c-></a> <c- b>or</c-> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence③"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#enumdef-compositeoperationorauto" id="ref-for-enumdef-compositeoperationorauto②"><c- n>CompositeOperationOrAuto</c-></a>>) <dfn class="idl-code" data-default="[]" data-dfn-for="BasePropertyIndexedKeyframe" data-dfn-type="dict-member" data-export data-type="(CompositeOperationOrAuto or sequence<CompositeOperationOrAuto>) " id="dom-basepropertyindexedkeyframe-composite"><code><c- g>composite</c-></code><a class="self-link" href="#dom-basepropertyindexedkeyframe-composite"></a></dfn> = [];
};
</pre>
                        <dt data-md>否则，
                        <dd data-md>
                            <p>使用以下字典类型，</p>
                            <pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="idl-code" data-dfn-type="dictionary" data-export id="dictdef-basekeyframe"><code><c- g>BaseKeyframe</c-></code><a class="self-link" href="#dictdef-basekeyframe"></a></dfn> {
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double" id="ref-for-idl-double②⑥"><c- b>double</c-></a>?                  <dfn class="idl-code" data-default="null" data-dfn-for="BaseKeyframe" data-dfn-type="dict-member" data-export data-type="double?                  " id="dom-basekeyframe-offset"><code><c- g>offset</c-></code><a class="self-link" href="#dom-basekeyframe-offset"></a></dfn> = <c- b>null</c->;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①⓪"><c- b>DOMString</c-></a>                <dfn class="idl-code" data-default="&quot;linear&quot;" data-dfn-for="BaseKeyframe" data-dfn-type="dict-member" data-export data-type="DOMString                " id="dom-basekeyframe-easing"><code><c- g>easing</c-></code><a class="self-link" href="#dom-basekeyframe-easing"></a></dfn> = "linear";
    <a data-link-type="idl-name" href="#enumdef-compositeoperationorauto" id="ref-for-enumdef-compositeoperationorauto③"><c- n>CompositeOperationOrAuto</c-></a> <dfn class="idl-code" data-default="&quot;auto&quot;" data-dfn-for="BaseKeyframe" data-dfn-type="dict-member" data-export data-type="CompositeOperationOrAuto " id="dom-basekeyframe-composite"><code><c- g>composite</c-></code><a class="self-link" href="#dom-basekeyframe-composite"></a></dfn> = "auto";
};
</pre>
                    </dl>
                </div>
                <p>将此过程的结果存储为 <var>keyframe output</var>。</p>
            <li data-md>
                <p>构建一个 <var>animatable properties</var> 列表如下：</p>
                <ol>
                    <li data-md>
                        <p>让 <var>animatable properties</var> 成为一个属性名称列表（包括具有可动画长手子属性的简写属性），这些属性可以由实现进行动画处理。</p>
                    <li data-md>
                        <p>通过应用 <a data-link-type="dfn" href="#animation-property-name-to-idl-attribute-name"
                                id="ref-for-animation-property-name-to-idl-attribute-name①">动画属性名称到 IDL 属性名称</a> 算法，将
                            <var>animatable properties</var> 中的每个属性名称转换为等效的 IDL 属性。
                        </p>
                </ol>
            <li data-md>
                <p>让 <var>input properties</var> 成为通过调用 <a data-link-type="dfn"
                        href="http://www.ecma-international.org/ecma-262/6.0/#sec-enumerableownnames"
                        id="ref-for-sec-enumerableownnames">EnumerableOwnNames</a> 操作获得的结果，并将 <var>keyframe input</var>
                    作为对象。</p>
            <li data-md>
                <p>组成一个新的列表 <var>animation properties</var>，该列表包含在 <var>input properties</var> 和 <var>animatable
                        properties</var> 中的所有属性，<em>或</em> 在 <var>input properties</var> 中的属性并符合 <a
                        class="production css" data-link-type="type"
                        href="https://www.w3.org/TR/css-variables-1/#typedef-custom-property-name"
                        id="ref-for-typedef-custom-property-name②">&lt;custom-property-name></a> 生产规则。</p>
            <li data-md>
                <p>按每个属性名称定义的 Unicode 代码点对 <var>animation properties</var> 进行升序排序。</p>
            <li data-md>
                <p>对于 <var>animation properties</var> 中的每个 <var>property name</var>，</p>
                <ol>
                    <li data-md>
                        <p>让 <var>raw value</var> 成为通过调用 <a data-link-type="dfn"
                                href="http://www.ecma-international.org/ecma-262/6.0/#sec-ordinary-object-internal-methods-and-internal-slots-get-p-receiver"
                                id="ref-for-sec-ordinary-object-internal-methods-and-internal-slots-get-p-receiver">[[Get]]</a>
                            内部方法，并将 <var>property name</var> 作为属性键，将 <var>keyframe input</var> 作为接收器的结果。</p>
                    <li data-md>
                        <p><a data-link-type="dfn" href="#check-the-completion-record"
                                id="ref-for-check-the-completion-record">检查完成记录</a> 的 <var>raw value</var>。</p>
                    <li data-md>
                        <p>将 <var>raw value</var> 转换为 DOMString 或 DOMString 序列 <var>property values</var>，如下所示：</p>
                        <div class="switch">
                            <dl>
                                <dt data-md>如果 <var>allow lists</var> 为 true，
                                <dd data-md>
                                    <p>让 <var>property values</var> 成为通过使用为将 ECMAScript 值转换为 IDL 值而定义的 <a
                                            data-link-type="dfn"
                                            href="https://webidl.spec.whatwg.org/#dfn-convert-ecmascript-to-idl-value"
                                            id="ref-for-dfn-convert-ecmascript-to-idl-value">过程</a> 将 <var>raw
                                            value</var> 转换为 IDL 类型 <code>(DOMString 或 sequence&lt;DOMString>)</code>
                                        的结果。</p>
                                    <p>如果 <var>property values</var> 是单个 DOMString，则用一个 DOMString 序列替换 <var>property
                                            values</var>，该序列的原始值为 <var>property values</var> 的唯一元素。</p>
                                <dt data-md>否则，
                                <dd data-md>
                                    <p>让 <var>property values</var> 成为通过使用为将 ECMAScript 值转换为 DOMString 而定义的 <a
                                            data-link-type="dfn" href="https://webidl.spec.whatwg.org/#es-to-DOMString"
                                            id="ref-for-es-to-DOMString">过程</a> 将 <var>raw value</var> 转换为 DOMString
                                        的结果。</p>
                            </dl>
                        </div>
                    <li data-md>
                        <p>计算 <var>normalized property name</var>，该名称是将 <var>property name</var> 应用到 <a
                                data-link-type="dfn" href="#idl-attribute-name-to-animation-property-name"
                                id="ref-for-idl-attribute-name-to-animation-property-name">IDL 属性名称到动画属性名称</a> 算法的结果。
                        </p>
                    <li data-md>
                        <p>将属性添加到 <var>keyframe output</var>，其属性名称为 <var>normalized property name</var>，属性值为
                            <var>property values</var>。
                        </p>
                </ol>
            <li data-md>
                <p>返回 <var>keyframe output</var>。</p>
        </ol>
        <p>将 <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="process-a-keyframes-argument">处理 keyframes
                参数</dfn> 的过程分为可为空的 ECMAScript 对象 <var>object</var> 作为输入，并返回一个关键帧序列，使用以下过程：</p>
        <ol>
            <li data-md>
                <p>如果 <var>object</var> 为空，返回一个空的关键帧序列。</p>
            <li data-md>
                <p>让 <var>processed keyframes</var> 成为一个空的 <a data-link-type="dfn" href="#keyframe"
                        id="ref-for-keyframe⑤⑨">关键帧</a> 序列。</p>
            <li data-md>
                <p>让 <var>method</var> 成为 <a data-link-type="dfn"
                        href="http://www.ecma-international.org/ecma-262/6.0/#sec-getmethod"
                        id="ref-for-sec-getmethod">GetMethod</a>(<var>object</var>, <a data-link-type="dfn"
                        href="http://www.ecma-international.org/ecma-262/6.0/#sec-well-known-symbols"
                        id="ref-for-sec-well-known-symbols">@@iterator</a>) 的结果。</p>
            <li data-md>
                <p><a data-link-type="dfn" href="#check-the-completion-record"
                        id="ref-for-check-the-completion-record①">检查完成记录</a> 的 <var>method</var>。</p>
            <li data-md>
                <p>执行与以下第一个匹配条件对应的步骤，</p>
                <div class="switch">
                    <dl>
                        <dt data-md>如果 <var>method</var> 不为 <span class="esvalue">undefined</span>，
                        <dd data-md>
                            <ol>
                                <li data-md>
                                    <p>让 <var>iter</var> 成为 <a data-link-type="dfn"
                                            href="http://www.ecma-international.org/ecma-262/6.0/#sec-getiterator"
                                            id="ref-for-sec-getiterator">GetIterator</a>(<var>object</var>,
                                        <var>method</var>)。
                                    </p>
                                <li data-md>
                                    <p><a data-link-type="dfn" href="#check-the-completion-record"
                                            id="ref-for-check-the-completion-record②">检查完成记录</a> 的 <var>iter</var>。</p>
                                <li data-md>
                                    <p>重复：</p>
                                    <ol>
                                        <li data-md>
                                            <p>让 <var>next</var> 成为 <a data-link-type="dfn"
                                                    href="http://www.ecma-international.org/ecma-262/6.0/#sec-iteratorstep"
                                                    id="ref-for-sec-iteratorstep">IteratorStep</a>(<var>iter</var>)。</p>
                                        <li data-md>
                                            <p><a data-link-type="dfn" href="#check-the-completion-record"
                                                    id="ref-for-check-the-completion-record③">检查完成记录</a> 的
                                                <var>next</var>。
                                            </p>
                                        <li data-md>
                                            <p>如果 <var>next</var> 为 false，中止此循环。</p>
                                        <li data-md>
                                            <p>让 <var>nextItem</var> 成为 <a data-link-type="dfn"
                                                    href="http://www.ecma-international.org/ecma-262/6.0/#sec-iteratorvalue"
                                                    id="ref-for-sec-iteratorvalue">IteratorValue</a>(next)。</p>
                                        <li data-md>
                                            <p><a data-link-type="dfn" href="#check-the-completion-record"
                                                    id="ref-for-check-the-completion-record④">检查完成记录</a> 的
                                                <var>nextItem</var>。
                                            </p>
                                        <li data-md>
                                            <p>如果 <a data-link-type="dfn"
                                                    href="http://www.ecma-international.org/ecma-262/6.0/#sec-ecmascript-data-types-and-values"
                                                    id="ref-for-sec-ecmascript-data-types-and-values">Type</a>(<var>nextItem</var>)
                                                不是 Undefined、Null 或 Object，则抛出 <span
                                                    class="exceptionname">TypeError</span> 并中止这些步骤。</p>
                                        <li data-md>
                                            <p>将结果追加到 <var>processed keyframes</var>，通过运行 <a data-link-type="dfn"
                                                    href="#process-a-keyframe-like-object"
                                                    id="ref-for-process-a-keyframe-like-object">处理类似关键帧对象</a> 过程，传递
                                                <var>nextItem</var> 作为 <var>keyframe input</var>，并将 <var>allow
                                                    lists</var> 标志设置为 false。
                                            </p>
                                    </ol>
                            </ol>
                        <dt data-md>否则，
                        <dd data-md>
                            <ol>
                                <li data-md>
                                    <p>让 <var>property-indexed keyframe</var> 成为运行 <a data-link-type="dfn"
                                            href="#process-a-keyframe-like-object"
                                            id="ref-for-process-a-keyframe-like-object①">处理类似关键帧对象</a> 过程的结果，将
                                        <var>object</var> 作为 <var>keyframe input</var>，并将 <var>allow lists</var> 标志设置为
                                        true。
                                    </p>
                                <li data-md>
                                    <p>对于 <var>property-indexed keyframe</var> 中的每个成员 <var>m</var>，执行以下步骤：</p>
                                    <ol>
                                        <li data-md>
                                            <p>让 <var>property name</var> 成为 <var>m</var> 的键。</p>
                                        <li data-md>
                                            <p>如果 <var>property name</var> 是 "composite"、"easing" 或
                                                "offset"，跳过此循环中的剩余步骤，并从 <var>property-indexed keyframe</var> 中的下一个成员
                                                <var>m</var> 继续。
                                            </p>
                                        <li data-md>
                                            <p>让 <var>property values</var> 成为 <var>m</var> 的值。</p>
                                        <li data-md>
                                            <p>让 <var>property keyframes</var> 成为一个空的 <a data-link-type="dfn"
                                                    href="#keyframe" id="ref-for-keyframe⑥⓪">关键帧</a> 序列。</p>
                                        <li data-md>
                                            <p>对于 <var>property values</var> 中的每个值 <var>v</var>，执行以下步骤：</p>
                                            <ol>
                                                <li data-md>
                                                    <p>让 <var>k</var> 成为一个新的 <a data-link-type="dfn" href="#keyframe"
                                                            id="ref-for-keyframe⑥①">关键帧</a>，其 <a data-link-type="dfn"
                                                            href="#keyframe-offset"
                                                            id="ref-for-keyframe-offset①⓪">关键帧偏移</a> 为空。</p>
                                                <li data-md>
                                                    <p>将属性-值对 <var>property name</var> → <var>v</var> 添加到 <var>k</var>
                                                        中。</p>
                                                <li data-md>
                                                    <p>将 <var>k</var> 追加到 <var>property keyframes</var> 中。</p>
                                            </ol>
                                        <li data-md>
                                            <p>将 <a data-link-type="dfn" href="#compute-missing-keyframe-offsets"
                                                    id="ref-for-compute-missing-keyframe-offsets③">计算丢失的关键帧偏移</a> 过程应用于
                                                <var>property keyframes</var>。
                                            </p>
                                        <li data-md>
                                            <p>将 <a data-link-type="dfn" href="#keyframe"
                                                    id="ref-for-keyframe⑥②">关键帧</a> 添加到 <var>processed keyframes</var>
                                                中。</p>
                                    </ol>
                                <li data-md>
                                    <p>按 <a data-link-type="dfn" href="#computed-keyframe-offset"
                                            id="ref-for-computed-keyframe-offset②⑥">计算的关键帧偏移</a> 升序排序 <var>processed
                                            keyframes</var> 中的每个 <a data-link-type="dfn" href="#keyframe"
                                            id="ref-for-keyframe⑥③">关键帧</a>。</p>
                                <li data-md>
                                    <p>当 <var>processed keyframes</var> 中相邻的 <a data-link-type="dfn" href="#keyframe"
                                            id="ref-for-keyframe⑥④">关键帧</a> 具有相等的 <a data-link-type="dfn"
                                            href="#computed-keyframe-offset"
                                            id="ref-for-computed-keyframe-offset②⑦">计算的关键帧偏移</a> 时，合并它们。</p>
                                <li data-md>
                                    <p>让 <var>offsets</var> 成为一个 <a data-link-type="dfn"
                                            href="https://webidl.spec.whatwg.org/#dfn-nullable-type"
                                            id="ref-for-dfn-nullable-type">可为空</a> 的 <code>double</code> 值序列，基于
                                        <var>property-indexed keyframe</var> 的 "offset" 成员的类型，分配如下：
                                    </p>
                                    <div class="switch">
                                        <dl>
                                            <dt data-md><code>sequence&lt;double?></code>，
                                            <dd data-md>
                                                <p>"offset" 的值原样保留。</p>
                                            <dt data-md><code>double?</code>，
                                            <dd data-md>
                                                <p>一个长度为一的序列，其值为 "offset"，即 « <code>offset</code> »，</p>
                                        </dl>
                                    </div>
                                <li data-md>
                                    <p>将 <var>offsets</var> 中的每个值分配给 <var>processed keyframes</var> 中对应位置的 <a
                                            data-link-type="dfn" href="#keyframe-offset"
                                            id="ref-for-keyframe-offset①①">关键帧偏移</a>，直到到达任一序列的末尾。</p>
                                <li data-md>
                                    <p>让 <var>easings</var> 成为 <code>DOMString</code> 值的序列，基于 <var>property-indexed
                                            keyframe</var> 的 "easing" 成员的类型，分配如下：</p>
                                    <div class="switch">
                                        <dl>
                                            <dt data-md><code>sequence&lt;DOMString></code>，
                                            <dd data-md>
                                                <p>"easing" 的值原样保留。</p>
                                            <dt data-md><code>DOMString</code>，
                                            <dd data-md>
                                                <p>一个长度为一的序列，其值为 "easing"，即 « <code>easing</code> »，</p>
                                        </dl>
                                    </div>
                                <li data-md>
                                    <p>如果 <var>easings</var> 是一个空序列，则将其设为长度为一的序列，其中包含单个值 "linear"，即 « "linear" »。</p>
                                <li data-md>
                                    <p>如果 <var>easings</var> 的项数少于 <var>processed keyframes</var>，则从列表的开头开始，连续重复
                                        <var>easings</var> 中的元素，直到 <var>easings</var> 的项数与 <var>processed
                                            keyframes</var> 相等。
                                    </p>
                                    <div class="example" id="example-649bc6e3"><a class="self-link"
                                            href="#example-649bc6e3"></a> 例如，如果 <var>processed keyframes</var> 有五个项，而
                                        <var>easings</var> 是序列 « "ease-in", "ease-out" »，则 <var>easings</var> 将被重复，变为 «
                                        "ease-in", "ease-out", "ease-in", "ease-out", "ease-in" »。
                                    </div>
                                <li data-md>
                                    <p>如果 <var>easings</var> 的项数多于 <var>processed keyframes</var>，则将多余的项存储为 <var>unused
                                            easings</var>。</p>
                                <li data-md>
                                    <p>将 <var>easings</var> 中的每个值分配给与 <var>processed keyframes</var> 中对应位置的 <a
                                            data-link-type="dfn" href="#keyframe" id="ref-for-keyframe⑥⑥">关键帧</a> 上的
                                        "easing" 属性，直到到达 <var>processed keyframes</var> 的末尾。</p>
                                <li data-md>
                                    <p>如果 <var>property-indexed keyframe</var> 的 "composite" 成员 <em>不是</em> 一个空序列：</p>
                                    <ol>
                                        <li data-md>
                                            <p>让 <var>composite modes</var> 成为从 <var>property-indexed keyframe</var> 的
                                                "composite" 成员中分配的 <code
                                                    class="idl"><a data-link-type="idl" href="#enumdef-compositeoperationorauto" id="ref-for-enumdef-compositeoperationorauto④">CompositeOperationOrAuto</a></code>
                                                值的序列。如果该成员是一个 <code
                                                    class="idl"><a data-link-type="idl" href="#enumdef-compositeoperationorauto" id="ref-for-enumdef-compositeoperationorauto⑤">CompositeOperationOrAuto</a></code>
                                                值操作的单个值，则将 <var>composite modes</var> 设为长度为一的序列，其中值为 "composite"。</p>
                                        <li data-md>
                                            <p>与 <var>easings</var> 类似，如果 <var>composite modes</var> 的项数少于
                                                <var>processed keyframes</var>，则从列表的开头开始，连续重复 <var>composite modes</var>
                                                中的元素，直到 <var>composite modes</var> 的项数与 <var>processed keyframes</var>
                                                相等。
                                            </p>
                                        <li data-md>
                                            <p>将 <var>composite modes</var> 中不为 <code
                                                    class="idl"><a data-link-type="idl" href="#dom-compositeoperationorauto-auto" id="ref-for-dom-compositeoperationorauto-auto②">auto</a></code>
                                                的每个值分配给与 <var>processed keyframes</var> 中对应位置的 <a data-link-type="dfn"
                                                    href="#keyframe-specific-composite-operation"
                                                    id="ref-for-keyframe-specific-composite-operation⑤">关键帧特定复合操作</a> 上的
                                                <a data-link-type="dfn" href="#keyframe"
                                                    id="ref-for-keyframe⑥⑦">关键帧</a>，直到到达 <var>processed keyframes</var>
                                                的末尾。
                                            </p>
                                    </ol>
                            </ol>
                    </dl>
                </div>
            <li data-md>
                <p>如果 <var>processed keyframes</var> 未按 <a data-link-type="dfn" href="#loosely-sorted-by-offset"
                        id="ref-for-loosely-sorted-by-offset">松散排序的偏移</a> 排序，则抛出 <span
                        class="exceptionname">TypeError</span> 并中止这些步骤。</p>
            <li data-md>
                <p>如果 <var>processed keyframes</var> 中存在任何 <a data-link-type="dfn" href="#keyframe"
                        id="ref-for-keyframe⑥⑧">关键帧</a>，其 <a data-link-type="dfn" href="#keyframe-offset"
                        id="ref-for-keyframe-offset①②">关键帧偏移</a> 非空且小于零或大于一，则抛出 <span
                        class="exceptionname">TypeError</span> 并中止这些步骤。</p>
            <li data-md>
                <p>对于 <var>processed keyframes</var> 中的每个 <var>frame</var>，执行以下步骤：</p>
                <ol>
                    <li data-md>
                        <p>对于 <var>frame</var> 中的每个属性-值对，使用为该属性定义的语法解析属性值。</p>
                        <p>如果属性值根据该属性的语法无效，则丢弃属性-值对。提供支持诊断内容错误的用户代理应该生成适当的警告，以突出显示无效的属性值。</p>
                    <li data-md>
                        <p>让 <var>frame</var> 的 <a data-link-type="dfn"
                                href="https://www.w3.org/TR/css-easing-1/#easing-function"
                                id="ref-for-easing-function①⑥">时间函数</a> 成为通过使用为 <code
                                class="idl"><a data-link-type="idl" href="#dom-effecttiming-easing" id="ref-for-dom-effecttiming-easing④">easing</a></code>
                            属性在 <code
                                class="idl"><a data-link-type="idl" href="#dictdef-effecttiming" id="ref-for-dictdef-effecttiming①②">EffectTiming</a></code>
                            字典中定义的 CSS 语法解析 "easing" 属性的结果。</p>
                        <p>如果解析 "easing" 属性失败，<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw"
                                id="ref-for-dfn-throw①⑥">抛出</a> <span class="exceptionname">TypeError</span> 并中止此过程。</p>
                        <p class="note" role="note"><span>注意：</span> 在上述两个步骤中使用 CSS 解析器意味着允许 CSS 注释和转义，但在成功解析值时不保留这些内容。
                        </p>
                        <p class="note" role="note"><span>注意：</span> 在 "easing" 属性解析失败的情况下，重要的是在从 <var>object</var>
                            读取所有属性后 <em>抛出</em> <span class="exceptionname">TypeError</span>，因为未能这样做是可观察的，并且如果以后在 WebIDL
                            中部分支持开放式字典，则不会匹配行为。</p>
                </ol>
            <li data-md>
                <p>使用在 <code
                        class="idl"><a data-link-type="idl" href="#dom-effecttiming-easing" id="ref-for-dom-effecttiming-easing⑤">easing</a></code>
                    属性在 <code
                        class="idl"><a data-link-type="idl" href="#dictdef-effecttiming" id="ref-for-dictdef-effecttiming①③">EffectTiming</a></code>
                    接口中定义的 CSS 语法解析 <var>unused easings</var> 中的每个值，如果任何值解析失败，<a data-link-type="dfn"
                        href="https://webidl.spec.whatwg.org/#dfn-throw" id="ref-for-dfn-throw①⑦">抛出</a> <span
                        class="exceptionname">TypeError</span> 并中止此过程。</p>
                <div class="note" role="note">
                    <p>此最后步骤是必需的，以便提供一致的行为，使得在以下所有情况下都会抛出 <span class="exceptionname">TypeError</span>：</p>
                    <pre class="lang-javascript highlight">elem<c- p>.</c->animate<c- p>({</c-> easing<c- o>:</c-> <c- t>'invalid'</c-> <c- p>});</c->
elem<c- p>.</c->animate<c- p>({</c-> easing<c- o>:</c-> <c- p>[</c-><c- t>'invalid'</c-><c- p>]</c-> <c- p>});</c->
elem<c- p>.</c->animate<c- p>([{</c-> easing<c- o>:</c-> <c- t>'invalid'</c-> <c- p>}]);</c->
</pre>
                </div>
        </ol>

        <h4 class="heading settled" data-level="6.6.4" id="the-keyframeeffectoptions-dictionary"><span
                class="secno">6.6.4. </span><span class="content"> <code>KeyframeEffectOptions</code>
                字典</span><a class="self-link" href="#the-keyframeeffectoptions-dictionary"></a></h4>
        <p>通过提供 <code class="idl"><a data-link-type="idl" href="#dom-keyframeeffect-keyframeeffect" id="ref-for-dom-keyframeeffect-keyframeeffect④">KeyframeEffect(target, keyframes,
options)</a></code> 构造函数，可以传递其他参数，其中包含 <code
                class="idl"><a data-link-type="idl" href="#dictdef-keyframeeffectoptions" id="ref-for-dictdef-keyframeeffectoptions⑥">KeyframeEffectOptions</a></code>
            对象。</p>
        <pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-keyframeeffectoptions"><code><c- g>KeyframeEffectOptions</c-></code></dfn> : <a data-link-type="idl-name" href="#dictdef-effecttiming" id="ref-for-dictdef-effecttiming①④"><c- n>EffectTiming</c-></a> {
    <a data-link-type="idl-name" href="#enumdef-compositeoperation" id="ref-for-enumdef-compositeoperation②"><c- n>CompositeOperation</c-></a> <a class="idl-code" data-default="&quot;replace&quot;" data-link-type="dict-member" data-type="CompositeOperation " href="#dom-keyframeeffectoptions-composite" id="ref-for-dom-keyframeeffectoptions-composite"><c- g>composite</c-></a> = "replace";
    <a data-link-type="idl-name" href="https://www.w3.org/TR/cssom-1/#cssomstring" id="ref-for-cssomstring②"><c- n>CSSOMString</c-></a>?       <a class="idl-code" data-default="null" data-link-type="dict-member" data-type="CSSOMString?       " href="#dom-keyframeeffectoptions-pseudoelement" id="ref-for-dom-keyframeeffectoptions-pseudoelement②"><c- g>pseudoElement</c-></a> = <c- b>null</c->;
};
</pre>
        <div class="members">
            <dl>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="KeyframeEffectOptions"
                        data-dfn-type="dict-member" data-export
                        id="dom-keyframeeffectoptions-composite"><code>composite</code></dfn>, <span> 类型为 <a
                            data-link-type="idl-name" href="#enumdef-compositeoperation"
                            id="ref-for-enumdef-compositeoperation③">CompositeOperation</a>，默认值为
                        <code>"replace"</code></span>
                <dd data-md>
                    <p><a data-link-type="dfn" href="#composite-operation" id="ref-for-composite-operation①⑦">合成操作</a>
                        用于将此动画与 <a data-link-type="dfn" href="#effect-stack" id="ref-for-effect-stack①⑥">效果栈</a>
                        进行合成，具体由 <a data-link-type="dfn" href="#compositeoperation"
                            id="ref-for-compositeoperation①">CompositeOperation</a> 枚举值之一指定。
                        适用于所有指定 <code
                            class="idl"><a data-link-type="idl" href="#dom-compositeoperationorauto-auto" id="ref-for-dom-compositeoperationorauto-auto③">auto</a></code>
                        <a data-link-type="dfn" href="#keyframe-specific-composite-operation"
                            id="ref-for-keyframe-specific-composite-operation⑥">关键帧特定合成操作</a>的 <a data-link-type="dfn"
                            href="#keyframe" id="ref-for-keyframe⑥⑨">关键帧</a>。
                    </p>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="KeyframeEffectOptions"
                        data-dfn-type="dict-member" data-export
                        id="dom-keyframeeffectoptions-pseudoelement"><code>pseudoElement</code></dfn>, <span> 类型为 <a
                            data-link-type="idl-name" href="https://www.w3.org/TR/cssom-1/#cssomstring"
                            id="ref-for-cssomstring③">CSSOMString</a>，可为空，默认值为 <code>null</code></span>
                <dd data-md>
                    <p>用于指定 <a data-link-type="dfn" href="https://www.w3.org/TR/selectors-4/#pseudo-element"
                            id="ref-for-pseudo-element⑤">伪元素</a> 选择器（必须有效或为 <code>null</code>），
                        以确定给定 <a data-link-type="dfn" href="#effect-target-target-element"
                            id="ref-for-effect-target-target-element⑦">目标元素</a> 的 <a data-link-type="dfn"
                            href="#keyframe-effect-effect-target" id="ref-for-keyframe-effect-effect-target②③">效果目标</a>。
                    </p>
            </dl>
        </div>
        <h3 class="heading settled" data-level="6.7" id="the-compositeoperation-enumeration"><span class="secno">6.7.
            </span><span class="content"> <code>CompositeOperation</code> 和 <code>CompositeOperationOrAuto</code>
                枚举</span><a class="self-link" href="#the-compositeoperation-enumeration"></a></h3>
        <p><a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect④①">关键帧效果</a> 的合成行为可能的值由 <dfn
                class="dfn-paneled" data-dfn-type="dfn" data-noexport id="compositeoperation">CompositeOperation</dfn>
            枚举表示。</p>
        <pre class="idl highlight def"><c- b>enum</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="enum" data-export id="enumdef-compositeoperation"><code><c- g>CompositeOperation</c-></code></dfn> { <a class="idl-code" data-link-type="enum-value" href="#dom-compositeoperation-replace" id="ref-for-dom-compositeoperation-replace"><c- s>"replace"</c-></a>, <a class="idl-code" data-link-type="enum-value" href="#dom-compositeoperation-add" id="ref-for-dom-compositeoperation-add"><c- s>"add"</c-></a>, <a class="idl-code" data-link-type="enum-value" href="#dom-compositeoperation-accumulate" id="ref-for-dom-compositeoperation-accumulate"><c- s>"accumulate"</c-></a> };
</pre>
        <dl>
            <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="CompositeOperation,CompositeOperationOrAuto"
                    data-dfn-type="enum-value" data-export data-lt="&quot;replace&quot;|replace"
                    id="dom-compositeoperation-replace"><code>replace</code></dfn>
            <dd data-md>
                <p>对应于 <a data-link-type="dfn" href="#composite-operation-replace"
                        id="ref-for-composite-operation-replace②">替换</a> <a data-link-type="dfn"
                        href="#composite-operation" id="ref-for-composite-operation①⑧">合成操作</a> 值
                    使 <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect①①②">动画效果</a> 覆盖其合并的
                    <a data-link-type="dfn" href="#underlying-value" id="ref-for-underlying-value①⑤">基础值</a>。
                </p>
            <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="CompositeOperation,CompositeOperationOrAuto"
                    data-dfn-type="enum-value" data-export data-lt="&quot;add&quot;|add"
                    id="dom-compositeoperation-add"><code>add</code></dfn>
            <dd data-md>
                <p>对应于 <a data-link-type="dfn" href="#composite-operation-add"
                        id="ref-for-composite-operation-add③">添加</a> <a data-link-type="dfn" href="#composite-operation"
                        id="ref-for-composite-operation①⑨">合成操作</a> 值
                    使 <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect①①③">动画效果</a> 添加到其合并的
                    <a data-link-type="dfn" href="#underlying-value" id="ref-for-underlying-value①⑥">基础值</a> 上。
                </p>
            <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="CompositeOperation,CompositeOperationOrAuto"
                    data-dfn-type="enum-value" data-export data-lt="&quot;accumulate&quot;|accumulate"
                    id="dom-compositeoperation-accumulate"><code>accumulate</code></dfn>
            <dd data-md>
                <p>对应于 <a data-link-type="dfn" href="#composite-operation-accumulate"
                        id="ref-for-composite-operation-accumulate">累积</a> <a data-link-type="dfn"
                        href="#composite-operation" id="ref-for-composite-operation②⓪">合成操作</a> 值
                    使 <a data-link-type="dfn" href="#animation-effect" id="ref-for-animation-effect①①④">动画效果</a> 累积到其合并的
                    <a data-link-type="dfn" href="#underlying-value" id="ref-for-underlying-value①⑦">基础值</a> 上。
                </p>
        </dl>
        <p><a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe⑦⓪">关键帧</a> 的合成行为的可能值与 <code
                class="idl"><a data-link-type="idl" href="#enumdef-compositeoperation" id="ref-for-enumdef-compositeoperation④">CompositeOperation</a></code>
            枚举共享相同的值，以及附加的 <code
                class="idl"><a data-link-type="idl" href="#dom-compositeoperationorauto-auto" id="ref-for-dom-compositeoperationorauto-auto④">auto</a></code>
            值。</p>
        <pre class="idl highlight def"><c- b>enum</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="enum" data-export id="enumdef-compositeoperationorauto"><code><c- g>CompositeOperationOrAuto</c-></code></dfn> { <a class="idl-code" data-link-type="enum-value" href="#dom-compositeoperation-replace" id="ref-for-dom-compositeoperation-replace①"><c- s>"replace"</c-></a>, <a class="idl-code" data-link-type="enum-value" href="#dom-compositeoperation-add" id="ref-for-dom-compositeoperation-add①"><c- s>"add"</c-></a>, <a class="idl-code" data-link-type="enum-value" href="#dom-compositeoperation-accumulate" id="ref-for-dom-compositeoperation-accumulate①"><c- s>"accumulate"</c-></a>, <a class="idl-code" data-link-type="enum-value" href="#dom-compositeoperationorauto-auto" id="ref-for-dom-compositeoperationorauto-auto⑤"><c- s>"auto"</c-></a> };
</pre>
        <dl>
            <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="CompositeOperationOrAuto"
                    data-dfn-type="enum-value" data-export data-lt="&quot;auto&quot;|auto"
                    id="dom-compositeoperationorauto-auto"><code>auto</code></dfn>
            <dd data-md>
                <p>指示应使用关联的 <a data-link-type="dfn" href="#keyframe-effect" id="ref-for-keyframe-effect④②">关键帧效果</a> 的
                    <a data-link-type="dfn" href="#composite-operation" id="ref-for-composite-operation②①">合成操作</a>。
                </p>
        </dl>

        <h3 class="heading settled" data-level="6.8" id="the-animatable-interface-mixin"><span class="secno">6.8.
            </span><span class="content"><code>Animatable</code> 接口混入</span><a class="self-link"
                href="#the-animatable-interface-mixin"></a></h3>
        <p>可以作为 <code
                class="idl"><a data-link-type="idl" href="#keyframeeffect" id="ref-for-keyframeeffect①②">KeyframeEffect</a></code>
            对象目标的对象实现了
            <code class="idl"><a data-link-type="idl" href="#animatable" id="ref-for-animatable②">Animatable</a></code>
            接口混入。
        </p>
        <pre class="idl highlight def"><c- b>interface</c-> <c- b>mixin</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="animatable"><code><c- g>Animatable</c-></code></dfn> {
    <a data-link-type="idl-name" href="#animation" id="ref-for-animation⑧"><c- n>Animation</c-></a>           <a class="idl-code" data-link-type="method" href="#dom-animatable-animate" id="ref-for-dom-animatable-animate②"><c- g>animate</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-object" id="ref-for-idl-object③"><c- b>object</c-></a>? <a class="idl-code" data-link-type="argument" href="#dom-animatable-animate-keyframes-options-keyframes" id="ref-for-dom-animatable-animate-keyframes-options-keyframes"><c- g>keyframes</c-></a>,
                                <c- b>optional</c-> (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unrestricted-double" id="ref-for-idl-unrestricted-double①②"><c- b>unrestricted</c-> <c- b>double</c-></a> <c- b>or</c-> <a data-link-type="idl-name" href="#dictdef-keyframeanimationoptions" id="ref-for-dictdef-keyframeanimationoptions①"><c- n>KeyframeAnimationOptions</c-></a>) <a class="idl-code" data-link-type="argument" href="#dom-animatable-animate-keyframes-options-options" id="ref-for-dom-animatable-animate-keyframes-options-options"><c- g>options</c-></a> = {});
    <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence④"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#animation" id="ref-for-animation⑨"><c- n>Animation</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-animatable-getanimations" id="ref-for-dom-animatable-getanimations"><c- g>getAnimations</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-getanimationsoptions" id="ref-for-dictdef-getanimationsoptions"><c- n>GetAnimationsOptions</c-></a> <a class="idl-code" data-link-type="argument" href="#dom-animatable-getanimations-options-options" id="ref-for-dom-animatable-getanimations-options-options"><c- g>options</c-></a> = {});
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-keyframeanimationoptions"><code><c- g>KeyframeAnimationOptions</c-></code></dfn> : <a data-link-type="idl-name" href="#dictdef-keyframeeffectoptions" id="ref-for-dictdef-keyframeeffectoptions⑦"><c- n>KeyframeEffectOptions</c-></a> {
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①①"><c- b>DOMString</c-></a> <a class="idl-code" data-default="&quot;&quot;" data-link-type="dict-member" data-type="DOMString " href="#dom-keyframeanimationoptions-id" id="ref-for-dom-keyframeanimationoptions-id"><c- g>id</c-></a> = "";
    <a data-link-type="idl-name" href="#animationtimeline" id="ref-for-animationtimeline⑤"><c- n>AnimationTimeline</c-></a>? <a class="idl-code" data-link-type="dict-member" data-type="AnimationTimeline? " href="#dom-keyframeanimationoptions-timeline" id="ref-for-dom-keyframeanimationoptions-timeline"><c- g>timeline</c-></a>;
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-getanimationsoptions"><code><c- g>GetAnimationsOptions</c-></code></dfn> {
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean②"><c- b>boolean</c-></a> <a class="idl-code" data-default="false" data-link-type="dict-member" data-type="boolean " href="#dom-getanimationsoptions-subtree" id="ref-for-dom-getanimationsoptions-subtree"><c- g>subtree</c-></a> = <c- b>false</c->;
};
</pre>
        <div class="methods">
            <dl>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="Animatable" data-dfn-type="method"
                        data-export data-lt="animate(keyframes, options)|animate(keyframes)"
                        id="dom-animatable-animate"><code>Animation animate(keyframes, options)</code></dfn>
                <dd data-md>
                    <p>执行以下步骤：</p>
                    <ol>
                        <li data-md>
                            <p>令 <var>target</var> 为调用此方法的对象。</p>
                        <li data-md>
                            <p>使用与 <code class="idl"><a data-link-type="idl" href="#dom-keyframeeffect-keyframeeffect" id="ref-for-dom-keyframeeffect-keyframeeffect⑤">KeyframeEffect(target, keyframes,
options)</a></code> 构造函数相同的过程，在 <var>target</var> 的 <a data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm"
                                    id="ref-for-concept-relevant-realm⑥">相关 Realm</a> 中构造一个新的 <code
                                    class="idl"><a data-link-type="idl" href="#keyframeeffect" id="ref-for-keyframeeffect①③">KeyframeEffect</a></code>
                                对象 <var>effect</var>，传递 <var>target</var> 作为 <var>target</var> 参数，<var>keyframes</var> 和
                                <var>options</var> 参数如所提供的那样。
                            </p>
                            <p>如果上述过程引发异常，则传播该异常并中止此过程。</p>
                        <li data-md>
                            <p>如果 <var>options</var> 是 <code
                                    class="idl"><a data-link-type="idl" href="#dictdef-keyframeanimationoptions" id="ref-for-dictdef-keyframeanimationoptions②">KeyframeAnimationOptions</a></code>
                                对象，令 <var>timeline</var> 为 <var>options</var> 的 <code>timeline</code> 成员，或者，如果
                                <var>options</var> 的 <code>timeline</code> 成员缺失，则为调用此方法的元素的 <a data-link-type="dfn"
                                    href="#document-default-document-timeline"
                                    id="ref-for-document-default-document-timeline⑦">默认文档时间线</a>。
                            </p>
                        <li data-md>
                            <p>使用与 <code
                                    class="idl"><a data-link-type="idl" href="#dom-animation-animation" id="ref-for-dom-animation-animation①">Animation()</a></code>
                                构造函数相同的过程，在 <var>target</var> 的 <a data-link-type="dfn"
                                    href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm"
                                    id="ref-for-concept-relevant-realm⑦">相关 Realm</a> 中构造一个新的 <code
                                    class="idl"><a data-link-type="idl" href="#animation" id="ref-for-animation①⓪">Animation</a></code>
                                对象 <var>animation</var>，传递 <var>effect</var> 和 <var>timeline</var> 作为同名参数。</p>
                        <li data-md>
                            <p>如果 <var>options</var> 是 <code
                                    class="idl"><a data-link-type="idl" href="#dictdef-keyframeanimationoptions" id="ref-for-dictdef-keyframeanimationoptions③">KeyframeAnimationOptions</a></code>
                                对象，将 <var>options</var> 的 <code>id</code> 成员的值分配给 <var>animation</var> 的 <code
                                    class="idl"><a data-link-type="idl" href="#dom-animation-id" id="ref-for-dom-animation-id①">id</a></code>
                                属性。
                            </p>
                        <li data-md>
                            <p>运行 <a data-link-type="dfn" href="#play-an-animation"
                                    id="ref-for-play-an-animation⑤">播放动画</a> 的过程，<var>animation</var> 的
                                <var>auto-rewind</var> 标志设置为 true。
                            </p>
                        <li data-md>
                            <p>返回 <var>animation</var>。</p>
                    </ol>
                    <div class="informative-bg">
                        <em>本节为非规范性内容</em>
                        <p>以下代码片段：</p>
                        <pre
                            class="lang-javascript highlight"><c- a>var</c-> animation <c- o>=</c-> elem<c- p>.</c->animate<c- p>({</c-> opacity<c- o>:</c-> <c- mf>0</c-> <c- p>},</c-> <c- mf>2000</c-><c- p>);</c-></pre>
                        <p>大致相当于：</p>
                        <pre class="lang-javascript highlight"><c- a>var</c-> effect <c- o>=</c-> <c- ow>new</c-> KeyframeEffect<c- p>(</c->elem<c- p>,</c-> <c- p>{</c-> opacity<c- o>:</c-> <c- mf>0</c-> <c- p>},</c-> <c- mf>2000</c-><c- p>);</c->
<c- a>var</c-> animation <c- o>=</c-> <c- ow>new</c-> Animation<c- p>(</c->effect<c- p>,</c-> elem<c- p>.</c->ownerDocument<c- p>.</c->timeline<c- p>);</c->
animation<c- p>.</c->play<c- p>();</c-></pre>
                    </div>
                    <div class="parameters">
                        <dl>
                            <dt data-md><dfn class="dfn-paneled idl-code"
                                    data-dfn-for="Animatable/animate(keyframes, options)" data-dfn-type="argument"
                                    data-export
                                    id="dom-animatable-animate-keyframes-options-keyframes"><code>keyframes</code></dfn>
                            <dd data-md>
                                <p>要使用的 <a data-link-type="dfn" href="#keyframe" id="ref-for-keyframe⑦①">关键帧</a>。
                                    此值将作为 <var>keyframes</var> 参数传递给 <code class="idl"><a data-link-type="idl" href="#dom-keyframeeffect-keyframeeffect" id="ref-for-dom-keyframeeffect-keyframeeffect⑥">KeyframeEffect(target, keyframes,
options)</a></code> 构造函数，并且具有与该构造函数中定义的相同解释。</p>
                            <dt data-md><dfn class="dfn-paneled idl-code"
                                    data-dfn-for="Animatable/animate(keyframes, options)" data-dfn-type="argument"
                                    data-export
                                    id="dom-animatable-animate-keyframes-options-options"><code>options</code></dfn>
                            <dd data-md>
                                <p>为创建的 <code
                                        class="idl"><a data-link-type="idl" href="#keyframeeffect" id="ref-for-keyframeeffect①④">KeyframeEffect</a></code>
                                    和 <code
                                        class="idl"><a data-link-type="idl" href="#animation" id="ref-for-animation①①">Animation</a></code>
                                    提供的时间和动画选项。
                                </p>
                        </dl>
                    </div>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="Animatable" data-dfn-type="method"
                        data-export data-lt="getAnimations(options)|getAnimations()"
                        id="dom-animatable-getanimations"><code> sequence&lt;Animation> getAnimations(options)</code></dfn>
                <dd data-md>
                    <p>返回该对象的 <a data-link-type="dfn" href="#relevant-animations"
                            id="ref-for-relevant-animations">相关动画</a> 集合，或者，如果传递了 <code
                            class="idl"><a data-link-type="idl" href="#dom-animatable-getanimations-options-options" id="ref-for-dom-animatable-getanimations-options-options①">options</a></code>
                        参数，并且将 <code
                            class="idl"><a data-link-type="idl" href="#dom-getanimationsoptions-subtree" id="ref-for-dom-getanimationsoptions-subtree①">subtree</a></code>
                        设置为 true，则返回该对象的 <a data-link-type="dfn" href="#relevant-animations-for-a-subtree"
                            id="ref-for-relevant-animations-for-a-subtree">子树相关动画</a> 集合。</p>
                    <p>返回的列表按照 <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation⑦①">动画</a>
                        相关的效果在 <a href="#the-effect-stack">§ 5.4.2 效果栈</a> 中描述的组合顺序进行排序。</p>
                    <p>调用此方法会触发 <a data-link-type="dfn"
                            href="https://www.w3.org/TR/css-transitions-1/#style-change-event"
                            id="ref-for-style-change-event①">样式更改事件</a>，适用于 <a data-link-type="dfn"
                            href="#effect-target-target-element" id="ref-for-effect-target-target-element⑧">目标元素</a>。
                        因此，返回的列表反映了应用任何未处理的样式更改后的状态，例如尚未处理的动画相关样式属性的更改。</p>
                    <div class="parameters">
                        <dl>
                            <dt data-md><dfn class="dfn-paneled idl-code"
                                    data-dfn-for="Animatable/getAnimations(options)" data-dfn-type="argument"
                                    data-export
                                    id="dom-animatable-getanimations-options-options"><code>options</code></dfn>
                            <dd data-md>
                                <p>管理 <code
                                        class="idl"><a data-link-type="idl" href="#dom-animatable-getanimations" id="ref-for-dom-animatable-getanimations①">getAnimations()</a></code>
                                    返回的动画集合的参数。
                                </p>
                        </dl>
                    </div>
            </dl>
        </div>
        <div class="members">
            <dl>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="KeyframeAnimationOptions"
                        data-dfn-type="dict-member" data-export
                        id="dom-keyframeanimationoptions-id"><code>id</code></dfn>, <span> 类型为 <a
                            data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#idl-DOMString"
                            id="ref-for-idl-DOMString①②">DOMString</a>，默认值为 <code>""</code></span>
                <dd data-md>
                    <p>要分配给生成的 <code
                            class="idl"><a data-link-type="idl" href="#animation" id="ref-for-animation①②">Animation</a></code>
                        的 <code
                            class="idl"><a data-link-type="idl" href="#dom-animation-id" id="ref-for-dom-animation-id②">id</a></code>
                        属性的字符串。
                    </p>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="KeyframeAnimationOptions"
                        data-dfn-type="dict-member" data-export
                        id="dom-keyframeanimationoptions-timeline"><code>timeline</code></dfn>, <span> 类型为 <a
                            data-link-type="idl-name" href="#animationtimeline"
                            id="ref-for-animationtimeline⑥">AnimationTimeline</a>，可为空</span>
                <dd data-md>
                    <p>一个可选值，如果存在，则指定要与新创建的 <a data-link-type="dfn" href="#concept-animation"
                            id="ref-for-concept-animation⑦②">动画</a> 关联的 <a data-link-type="dfn" href="#timeline"
                            id="ref-for-timeline⑤⑨">时间线</a>。</p>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="GetAnimationsOptions"
                        data-dfn-type="dict-member" data-export
                        id="dom-getanimationsoptions-subtree"><code>subtree</code></dfn>, <span> 类型为 <a
                            data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#idl-boolean"
                            id="ref-for-idl-boolean③">boolean</a>，默认值为 <code>false</code></span>
                <dd data-md>
                    <p>如果为 true，则表示应将与其 <a data-link-type="dfn" href="#animation-effect"
                            id="ref-for-animation-effect①①⑤">动画效果</a> 关联的 <a data-link-type="dfn"
                            href="#concept-animation" id="ref-for-concept-animation⑦③">动画</a> 的目标元素是调用 <code
                            class="idl"><a data-link-type="idl" href="#dom-animatable-getanimations" id="ref-for-dom-animatable-getanimations②">getAnimations()</a></code>
                        方法的对象的 <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-tree-descendant"
                            id="ref-for-concept-tree-descendant②">后代</a> 时，也应将其包含在结果中。</p>
            </dl>
        </div>

        <h3 class="heading settled" data-level="6.9" id="extensions-to-the-document-interface"><span class="secno">6.9.
            </span><span class="content">对 <code>Document</code> 接口的扩展</span><a class="self-link"
                href="#extensions-to-the-document-interface"></a></h3>
        <p>以下扩展应用于 <code
                class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/#document" id="ref-for-document①①">Document</a></code>
            接口，该接口在 <a data-link-type="biblio" href="#biblio-dom">[DOM]</a> 中定义。</p>
        <pre class="idl highlight def"><c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/#document" id="ref-for-document①②"><c- g>Document</c-></a> {
    <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#documenttimeline" id="ref-for-documenttimeline②"><c- n>DocumentTimeline</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="DocumentTimeline" href="#dom-document-timeline" id="ref-for-dom-document-timeline"><c- g>timeline</c-></a>;
};
</pre>
        <div class="attributes">
            <dl>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="Document" data-dfn-type="attribute"
                        data-export id="dom-document-timeline"><code>timeline</code></dfn>, <span> 类型为 <a
                            data-link-type="idl-name" href="#documenttimeline"
                            id="ref-for-documenttimeline③">DocumentTimeline</a>，只读</span>
                <dd data-md>
                    <p>表示 <a data-link-type="dfn" href="#document-default-document-timeline"
                            id="ref-for-document-default-document-timeline⑧">默认文档时间线</a> 的 <code
                            class="idl"><a data-link-type="idl" href="#documenttimeline" id="ref-for-documenttimeline④">DocumentTimeline</a></code>
                        对象。</p>
            </dl>
        </div>
        <h3 class="heading settled" data-level="6.10" id="extensions-to-the-documentorshadowroot-interface-mixin"><span
                class="secno">6.10. </span><span class="content">对 <code>DocumentOrShadowRoot</code>
                接口混入的扩展</span><a class="self-link" href="#extensions-to-the-documentorshadowroot-interface-mixin"></a>
        </h3>
        <p>以下扩展应用于 <code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#documentorshadowroot" id="ref-for-documentorshadowroot">DocumentOrShadowRoot</a></code>
            接口
            混入，该接口混入在 <a data-link-type="biblio" href="#biblio-dom">[DOM]</a> 中定义。</p>
        <pre class="idl highlight def"><c- b>partial</c-> <c- b>interface</c-> <c- b>mixin</c-> <a class="idl-code" data-link-type="interface" href="https://dom.spec.whatwg.org/#documentorshadowroot" id="ref-for-documentorshadowroot①"><c- g>DocumentOrShadowRoot</c-></a> {
    <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence⑤"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#animation" id="ref-for-animation①③"><c- n>Animation</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-documentorshadowroot-getanimations" id="ref-for-dom-documentorshadowroot-getanimations"><c- g>getAnimations</c-></a>();
};
</pre>
        <div class="methods">
            <dl>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="DocumentOrShadowRoot" data-dfn-type="method"
                        data-export data-lt="getAnimations()"
                        id="dom-documentorshadowroot-getanimations"><code> sequence&lt;Animation> getAnimations()</code></dfn>
                <dd data-md>
                    <p>返回调用此方法的 <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document"
                            id="ref-for-concept-document②">文档</a> 或 <a data-link-type="dfn"
                            href="https://dom.spec.whatwg.org/#concept-shadow-root"
                            id="ref-for-concept-shadow-root②">影子根</a> 的 <a data-link-type="dfn"
                            href="#relevant-animations-for-a-subtree"
                            id="ref-for-relevant-animations-for-a-subtree①">子树相关动画</a> 集合。</p>
                    <p>返回的列表按照 <a data-link-type="dfn" href="#concept-animation" id="ref-for-concept-animation⑦④">动画</a>
                        相关的效果在 <a href="#the-effect-stack">§ 5.4.2 效果栈</a> 中描述的组合顺序进行排序。</p>
                    <p>调用此方法会触发文档的 <a data-link-type="dfn"
                            href="https://www.w3.org/TR/css-transitions-1/#style-change-event"
                            id="ref-for-style-change-event②">样式更改事件</a>。
                        因此，返回的列表反映了应用任何未处理的样式更改后的状态，例如尚未处理的动画相关样式属性的更改。</p>
            </dl>
        </div>
        <h3 class="heading settled" data-level="6.11" id="extensions-to-the-element-interface"><span class="secno">6.11.
            </span><span class="content">对 <code>Element</code> 接口的扩展</span><a class="self-link"
                href="#extensions-to-the-element-interface"></a></h3>
        <p>由于 DOM 元素可以作为动画的目标，<code
                class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element⑧">Element</a></code>
            接口在 <a data-link-type="biblio" href="#biblio-dom">[DOM]</a> 中扩展如下：</p>
        <pre class="idl highlight def"><a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element" id="ref-for-element⑨"><c- n>Element</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="#animatable" id="ref-for-animatable③"><c- n>Animatable</c-></a>;
</pre>
        <p>这允许以下用法。</p>
        <div class="example" id="example-3abce906">
            <a class="self-link" href="#example-3abce906"></a>
            <pre
                class="lang-javascript highlight">elem<c- p>.</c->animate<c- p>({</c-> color<c- o>:</c-> <c- t>'red'</c-> <c- p>},</c-> <c- mf>2000</c-><c- p>);</c-></pre>
        </div>
        <h3 class="heading settled" data-level="6.12" id="the-animationplaybackevent-interface"><span
                class="secno">6.12. </span><span class="content"><code>AnimationPlaybackEvent</code>
                接口</span><a class="self-link" href="#the-animationplaybackevent-interface"></a></h3>
        <p><a data-link-type="dfn" href="#animation-playback-events" id="ref-for-animation-playback-events②">动画播放事件</a>
            使用 <code
                class="idl"><a data-link-type="idl" href="#animationplaybackevent" id="ref-for-animationplaybackevent③">AnimationPlaybackEvent</a></code>
            接口表示。</p>
        <pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed⑤"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="animationplaybackevent"><code><c- g>AnimationPlaybackEvent</c-></code></dfn> : <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#event" id="ref-for-event"><c- n>Event</c-></a> {
    <a class="idl-code" data-link-type="constructor" href="#dom-animationplaybackevent-animationplaybackevent" id="ref-for-dom-animationplaybackevent-animationplaybackevent"><c- g>constructor</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①③"><c- b>DOMString</c-></a> <dfn class="idl-code" data-dfn-for="AnimationPlaybackEvent/AnimationPlaybackEvent(type, eventInitDict), AnimationPlaybackEvent/constructor(type, eventInitDict), AnimationPlaybackEvent/AnimationPlaybackEvent(type), AnimationPlaybackEvent/constructor(type)" data-dfn-type="argument" data-export id="dom-animationplaybackevent-animationplaybackevent-type-eventinitdict-type"><code><c- g>type</c-></code><a class="self-link" href="#dom-animationplaybackevent-animationplaybackevent-type-eventinitdict-type"></a></dfn>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-animationplaybackeventinit" id="ref-for-dictdef-animationplaybackeventinit"><c- n>AnimationPlaybackEventInit</c-></a> <dfn class="idl-code" data-dfn-for="AnimationPlaybackEvent/AnimationPlaybackEvent(type, eventInitDict), AnimationPlaybackEvent/constructor(type, eventInitDict), AnimationPlaybackEvent/AnimationPlaybackEvent(type), AnimationPlaybackEvent/constructor(type)" data-dfn-type="argument" data-export id="dom-animationplaybackevent-animationplaybackevent-type-eventinitdict-eventinitdict"><code><c- g>eventInitDict</c-></code><a class="self-link" href="#dom-animationplaybackevent-animationplaybackevent-type-eventinitdict-eventinitdict"></a></dfn> = {});
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double" id="ref-for-idl-double②⑦"><c- b>double</c-></a>? <a class="idl-code" data-link-type="attribute" data-readonly data-type="double?" href="#dom-animationplaybackevent-currenttime" id="ref-for-dom-animationplaybackevent-currenttime③"><c- g>currentTime</c-></a>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double" id="ref-for-idl-double②⑧"><c- b>double</c-></a>? <a class="idl-code" data-link-type="attribute" data-readonly data-type="double?" href="#dom-animationplaybackevent-timelinetime" id="ref-for-dom-animationplaybackevent-timelinetime④"><c- g>timelineTime</c-></a>;
};
<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-animationplaybackeventinit"><code><c- g>AnimationPlaybackEventInit</c-></code></dfn> : <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#dictdef-eventinit" id="ref-for-dictdef-eventinit"><c- n>EventInit</c-></a> {
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double" id="ref-for-idl-double②⑨"><c- b>double</c-></a>? <a class="idl-code" data-default="null" data-link-type="dict-member" data-type="double? " href="#dom-animationplaybackeventinit-currenttime" id="ref-for-dom-animationplaybackeventinit-currenttime"><c- g>currentTime</c-></a> = <c- b>null</c->;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double" id="ref-for-idl-double③⓪"><c- b>double</c-></a>? <a class="idl-code" data-default="null" data-link-type="dict-member" data-type="double? " href="#dom-animationplaybackeventinit-timelinetime" id="ref-for-dom-animationplaybackeventinit-timelinetime"><c- g>timelineTime</c-></a> = <c- b>null</c->;
};
</pre>
        <div class="constructors">
            <dl>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="AnimationPlaybackEvent"
                        data-dfn-type="constructor" data-export
                        data-lt="AnimationPlaybackEvent(type, eventInitDict)|constructor(type, eventInitDict)|AnimationPlaybackEvent(type)|constructor(type)"
                        id="dom-animationplaybackevent-animationplaybackevent"><code> AnimationPlaybackEvent(type, eventInitDict)</code></dfn>
                <dd data-md>
                    <p>使用在 <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#constructing-events"
                            id="ref-for-constructing-events">构造事件</a> 中定义的过程构造一个新的 <code
                            class="idl"><a data-link-type="idl" href="#animationplaybackevent" id="ref-for-animationplaybackevent④">AnimationPlaybackEvent</a></code>
                        对象 <a data-link-type="biblio" href="#biblio-dom">[DOM]</a>。</p>
            </dl>
        </div>
        <div class="attributes">
            <dl>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="AnimationPlaybackEvent"
                        data-dfn-type="attribute" data-export
                        id="dom-animationplaybackevent-currenttime"><code>currentTime</code></dfn>, <span> 类型为 <a
                            data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#idl-double"
                            id="ref-for-idl-double③①">double</a>，只读，可为空</span>
                <dd data-md>
                    <p>事件排队时生成事件的 <a data-link-type="dfn" href="#animation-current-time"
                            id="ref-for-animation-current-time⑤①">动画的当前时间</a>。
                        如果事件生成时<a data-link-type="dfn" href="#play-state-idle"
                            id="ref-for-play-state-idle⑦">动画处于空闲状态</a>，此值将为 <code class="esvalue">null</code>。</p>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="AnimationPlaybackEvent"
                        data-dfn-type="attribute" data-export
                        id="dom-animationplaybackevent-timelinetime"><code>timelineTime</code></dfn>, <span> 类型为 <a
                            data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#idl-double"
                            id="ref-for-idl-double③②">double</a>，只读，可为空</span>
                <dd data-md>
                    <p>事件排队时与生成事件的<a data-link-type="dfn" href="#timeline" id="ref-for-timeline⑥⓪">时间线</a>关联的<a
                            data-link-type="dfn" href="#time-value" id="ref-for-time-value④⑤">时间值</a>。
                        如果事件排队时<a data-link-type="dfn" href="#concept-animation"
                            id="ref-for-concept-animation⑦⑧">动画</a>没有关联的<a data-link-type="dfn"
                            href="#inactive-timeline" id="ref-for-inactive-timeline①⑨">活动时间线</a>，此值将为 <code
                            class="esvalue">null</code>。</p>
            </dl>
        </div>
        <div class="members">
            <dl>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="AnimationPlaybackEventInit"
                        data-dfn-type="dict-member" data-export
                        id="dom-animationplaybackeventinit-currenttime"><code>currentTime</code></dfn>, <span> 类型为
                        <a data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#idl-double"
                            id="ref-for-idl-double③③">double</a>，可为空，默认值为 <code>null</code></span>
                <dd data-md>
                    <p>请参见 <code
                            class="idl"><a data-link-type="idl" href="#dom-animationplaybackevent-currenttime" id="ref-for-dom-animationplaybackevent-currenttime④">currentTime</a></code>
                        属性的描述。</p>
                <dt data-md><dfn class="dfn-paneled idl-code" data-dfn-for="AnimationPlaybackEventInit"
                        data-dfn-type="dict-member" data-export
                        id="dom-animationplaybackeventinit-timelinetime"><code>timelineTime</code></dfn>, <span> 类型为
                        <a data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#idl-double"
                            id="ref-for-idl-double③④">double</a>，可为空，默认值为 <code>null</code></span>
                <dd data-md>
                    <p>请参见 <code
                            class="idl"><a data-link-type="idl" href="#dom-animationplaybackevent-timelinetime" id="ref-for-dom-animationplaybackevent-timelinetime⑤">timelineTime</a></code>
                        属性的描述。</p>
            </dl>
        </div>

        <h3 class="heading settled" data-level="6.13" id="model-liveness"><span class="secno">6.13. </span><span
                class="content">模型活跃性</span><a class="self-link" href="#model-liveness"></a></h3>
        <p>对模型的任何部分进行更改，都会导致整个时间模型以及任何依赖的样式更新。</p>
        <p>除非另有说明，
            调用此规范编程接口部分定义的方法或构造函数，
            或者获取或设置成员，
            不会触发<a data-link-type="dfn" href="https://www.w3.org/TR/css-transitions-1/#style-change-event"
                id="ref-for-style-change-event③">样式更改事件</a>。</p>
        <p class="note" role="note"><span>注意：</span> 扩展此规范的其他规范预计将通过引入触发
            这种事件的情况来细化<a data-link-type="dfn" href="https://www.w3.org/TR/css-transitions-1/#style-change-event"
                id="ref-for-style-change-event④">样式更改事件</a>的要求。
            例如，
            当此规范中的接口表示
            由 CSS 标记定义的动画时，
            其中的许多方法将需要触发<span id="ref-for-style-change-event⑤">样式更改事件</span>
            以反映对指定样式的更改。</p>
        <div class="informative-bg">
            <em>本节为非规范性内容</em>
            <p>基于上述要求和本规范中其他地方的规范性要求，可以观察到以下不变量：</p>
            <dl>
                <dt data-md>对 Web 动画模型所做的更改立即生效
                <dd data-md>
                    <p>例如，如果与 <code
                            class="idl"><a data-link-type="idl" href="#keyframeeffect" id="ref-for-keyframeeffect①⑤">KeyframeEffect</a></code>
                        相关联的 <code
                            class="idl"><a data-link-type="idl" href="#animation" id="ref-for-animation①④">Animation</a></code>
                        通过编程接口进行定位（参见 <a href="#setting-the-current-time-of-an-animation">§ 4.4.4 设置动画的当前时间</a>），
                        则查询动画的 <code>startTime</code> 时返回的值将立即反映模型的更新状态。</p>
                    <div class="example" id="example-f6015dd0">
                        <a class="self-link" href="#example-f6015dd0"></a>
                        <pre
                            class="lang-javascript highlight"><c- c1>// 最初 animation.effect.getComputedTiming().localTime 为 3000</c->
animation<c- p>.</c->currentTime <c- o>+=</c-> <c- mf>2000</c-><c- p>;</c->
alert<c- p>(</c->animation<c- p>.</c->effect<c- p>.</c->getComputedTiming<c- p>().</c->localTime<c- p>);</c-> <c- c1>// 显示 "5000"</c-></pre>
                    </div>
                <dt data-md>查询受动画影响的属性的计算样式将返回动画的完全最新状态
                <dd data-md>
                    <p>例如，如果在将新的 <code
                            class="idl"><a data-link-type="idl" href="#animation" id="ref-for-animation①⑤">Animation</a></code>
                        应用于元素后立即查询该元素的已使用样式，
                        则新动画的结果将包含在返回的值中。</p>
                    <div class="example" id="example-ac9a1207">
                        <a class="self-link" href="#example-ac9a1207"></a>
                        <pre
                            class="lang-javascript highlight"><c- c1>// 立即将不透明度设置为 0</c->
elem<c- p>.</c->animate<c- p>({</c-> opacity<c- o>:</c-> <c- mf>0</c-> <c- p>},</c-> <c- p>{</c-> fill<c- o>:</c-> <c- t>'forwards'</c-> <c- p>});</c->
alert<c- p>(</c->window<c- p>.</c->getComputedStyle<c- p>(</c->elem<c- p>).</c->opacity<c- p>);</c-> <c- c1>// 显示 "0"</c-></pre>
                    </div>
                <dt data-md>在同一任务内进行的更改被同步，以便整个更改集一起呈现
                <dd data-md>
                    <p>由于对模型的更改立即生效并结合 ECMAScript 的运行到完成语义，
                        因此永远不会出现例如仅应用指定样式的更改而不应用动画的情况。</p>
                    <div class="example" id="example-a559e918">
                        <a class="self-link" href="#example-a559e918"></a>
                        <pre
                            class="lang-javascript highlight"><c- c1>// 使用回退淡化不支持 Element.animate 的浏览器的透明度</c->
<c- c1>// 设置过渡起点</c->
elem<c- p>.</c->style<c- p>.</c->opacity <c- o>=</c-> <c- t>'0'</c-><c- p>;</c->
elem<c- p>.</c->animate<c- p>([</c-> <c- p>{</c-> opacity<c- o>:</c-> <c- mf>1</c-> <c- p>},</c-> <c- p>{</c-> opacity<c- o>:</c-> <c- mf>0</c-> <c- p>}</c-> <c- p>],</c-> <c- mf>500</c-><c- p>);</c-></pre>
                    </div>
                    <p class="note" role="note"><span>注意，</span>然而，在上述示例中，用户代理可能会呈现
                        <em>未</em>应用上述任何更改的帧。
                        例如，如果渲染发生在一个单独的进程中，并且该进程计划在
                        上述任务完成后不久运行，但在更改
                        可以传达给该进程之前。
                    </p>
                <dt data-md>通过 <a data-link-type="dfn" href="#document-timeline"
                        id="ref-for-document-timeline⑥">文档时间线</a> 的 <code>currentTime</code> 属性返回的值在任务内不会更改
                <dd data-md>
                    <p>由于要求<a data-link-type="dfn" href="#timeline" id="ref-for-timeline⑥①">时间线</a>每次运行 <a
                            data-link-type="dfn" href="#update-animations-and-send-events"
                            id="ref-for-update-animations-and-send-events④">更新动画并发送事件</a> 过程时更新其<a data-link-type="dfn"
                            href="#timeline-current-time" id="ref-for-timeline-current-time①⓪">当前时间</a>，
                        在同一个脚本块中执行的长代码块中两次查询 <code>currentTime</code>
                        将返回相同的值，如以下示例所示。</p>
                    <div class="example" id="example-16dafcc0">
                        <a class="self-link" href="#example-16dafcc0"></a>
                        <pre class="lang-javascript highlight"><c- a>var</c-> a <c- o>=</c-> document<c- p>.</c->timeline<c- p>.</c->currentTime<c- p>;</c->
<c- c1>// ... 许多行代码 ...</c->
<c- a>var</c-> b <c- o>=</c-> document<c- p>.</c->timeline<c- p>.</c->currentTime<c- p>;</c->
alert<c- p>(</c->b <c- o>-</c-> a<c- p>);</c-> <c- c1>// 显示 0</c-></pre>
                    </div>
                <dt data-md>传递给 <code>requestAnimationFrame</code> 回调的时间将等于 <code>document.timeline.currentTime</code>
                <dd data-md>
                    <p>由于 HTML 的 <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#event-loop-processing-model"
                            id="ref-for-event-loop-processing-model">事件循环处理模型</a> 定义了
                        <a data-link-type="dfn" href="#update-animations-and-send-events"
                            id="ref-for-update-animations-and-send-events⑤">更新动画并发送事件</a> 的过程在<a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/imagebitmap-and-animations.html.html#run-the-animation-frame-callbacks"
                            id="ref-for-run-the-animation-frame-callbacks">运行动画帧回调</a>之前执行，
                        并且由于传递给这些回调的时间与传递给这两个过程的 <var>now</var>
                        时间戳相同，默认文档时间线的 <a data-link-type="dfn" href="#timeline-current-time"
                            id="ref-for-timeline-current-time①①">当前时间</a>应该
                        与传递给 <code>requestAnimationFrame</code> 的时间一致。
                    </p>
                    <div class="example" id="example-a0637e5c">
                        <a class="self-link" href="#example-a0637e5c"></a>
                        <pre class="lang-javascript highlight">window<c- p>.</c->requestAnimationFrame<c- p>(</c-><c- a>function</c-><c- p>(</c->now<c- p>)</c-> <c- p>{</c->
  <c- c1>// 显示 0</c->
  alert<c- p>(</c->now <c- o>-</c-> document<c- p>.</c->timeline<c- p>.</c->currentTime<c- p>);</c->
<c- p>});</c-></pre>
                    </div>
                <dt data-md>从此编程接口调用方法通常<em>不会</em>触发过渡
                <dd data-md>
                    <p>请考虑以下示例：</p>
                    <div class="example" id="example-a8ba32df">
                        <a class="self-link" href="#example-a8ba32df"></a>
                        <pre class="lang-javascript highlight"><c- c1>// 设置过渡起点</c->
div<c- p>.</c->style<c- p>.</c->opacity <c- o>=</c-> <c- t>'1'</c-><c- p>;</c->
getComputedStyle<c- p>(</c->div<c- p>).</c->opacity<c- p>;</c->

<c- c1>// 设置过渡终点</c->
div<c- p>.</c->style<c- p>.</c->transition <c- o>=</c-> <c- t>'opacity 1s'</c-><c- p>;</c->
div<c- p>.</c->style<c- p>.</c->opacity <c- o>=</c-> <c- t>'0'</c-><c- p>;</c->

<c- c1>// 触发动画</c->
div<c- p>.</c->animate<c- p>({</c-> opacity<c- o>:</c-> <c- p>[</c-><c- mf>0.5</c-><c- p>,</c-> <c- mf>1</c-><c- p>]</c-> <c- p>},</c-> <c- mf>500</c-><c- p>);</c->

<c- c1>// 等待过渡结束 —— 以下内容永远不会被调用！</c->
div<c- p>.</c->addEventListener<c- p>(</c-><c- t>'transitionend'</c-><c- p>,</c-> <c- p>()</c-> <c- p>=></c-> <c- p>{</c->
  console<c- p>.</c->log<c- p>(</c-><c- t>'transitionend'</c-><c- p>);</c->
<c- p>});</c-></pre>
                    </div>
                    <p>在这种情况下，调用 <code
                            class="idl"><a data-link-type="idl" href="#dom-animatable-animate" id="ref-for-dom-animatable-animate③">animate()</a></code>
                        将<em>不会</em>触发 <a data-link-type="dfn"
                            href="https://www.w3.org/TR/css-transitions-1/#style-change-event"
                            id="ref-for-style-change-event⑥">样式更改事件</a>。
                        因此，待处理的样式更改将与
                        由新动画导致的样式更改同时处理。
                        由于动画样式将覆盖
                        <a data-link-type="dfn" href="https://www.w3.org/TR/css-transitions-1/#before-change-style"
                            id="ref-for-before-change-style">更改前样式</a>和<a data-link-type="dfn"
                            href="https://www.w3.org/TR/css-transitions-1/#after-change-style"
                            id="ref-for-after-change-style">更改后样式</a>，
                        因此不会生成过渡，
                        并且<a data-link-type="dfn" href="https://drafts.csswg.org/css-transitions/#transitionend"
                            id="ref-for-transitionend">transitionend</a>事件的事件处理程序永远不会被调用。
                    </p>
            </dl>
        </div>

        <h2 class="heading settled" data-level="7" id="integration-with-media-fragments"><span class="secno">7.
            </span><span class="content">与媒体片段的集成</span><a class="self-link"
                href="#integration-with-media-fragments"></a></h2>
        <p>媒体片段规范 <a data-link-type="biblio" href="#biblio-media-frags">[MEDIA-FRAGS]</a>
            定义了一种用于定位媒体资源时间范围的方法。
            媒体片段的应用取决于其所指定资源的 MIME 类型。
            对于具有 <a data-link-type="dfn" href="https://svgwg.org/svg2-draft/mimereg.html#mime-registration"
                id="ref-for-mime-registration">SVG
                MIME 类型</a> 的资源，时间参数的应用在 <a href="https://svgwg.org/specs/animation-elements/">动画元素</a>
            规范中定义。</p>
        <p class="note" role="note"><span>注意：</span> 媒体片段的定义是基于资源的 MIME 类型进行操作。
            因此，在使用 Web 动画内容的所有情况下，可能不支持时间定位。</p>
        <h2 class="heading settled" data-level="8" id="interaction-with-page-display"><span class="secno">8.
            </span><span class="content">与页面显示的交互</span><a class="self-link" href="#interaction-with-page-display"></a>
        </h2>
        <p>HTML 允许用户代理与<a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/browsers.html#an-entry-with-persisted-user-state"
                id="ref-for-an-entry-with-persisted-user-state">用户代理定义的状态</a>一起存储
            <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#session-history-entry"
                id="ref-for-session-history-entry">会话历史条目</a>，以便用户在页面之间导航时，
            可以恢复页面的先前状态，包括滚动位置等状态 <a data-link-type="biblio" href="#biblio-html">[HTML]</a>。
        </p>
        <p>当引用的文档被卸载和遍历时，暂停和恢复<a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/embedded-content.html#media-element"
                id="ref-for-media-element①">媒体元素</a>的用户代理，
            应当对包含 Web 动画内容的文档应用一致的处理。
            如果提供了这种行为，则应通过调整跟踪挂钟时间的<a data-link-type="dfn" href="#time-value" id="ref-for-time-value④⑥">时间值</a>的任何<a
                data-link-type="dfn" href="#timeline" id="ref-for-timeline⑥②">时间线</a>来实现。</p>
        <p class="issue" id="issue-a128cfff"><a class="self-link" href="#issue-a128cfff"></a> 这是否与这些
            <a data-link-type="dfn" href="#time-value" id="ref-for-time-value④⑦">时间值</a>相对于
            <code>navigationStart</code> 并且 <code>requestAnimationFrame</code> 使用与
            <code>document.timeline.currentTime</code> 相同的时间相矛盾？ <a
                href="https://github.com/w3c/csswg-drafts/issues/2083">[问题 #2083]</a>
        </p>
        <h2 class="heading settled" data-level="9" id="implementation-requirements"><span class="secno">9. </span><span
                class="content">实现要求</span><a class="self-link" href="#implementation-requirements"></a></h2>
        <h3 class="heading settled" data-level="9.1" id="precision-of-time-values"><span class="secno">9.1. </span><span
                class="content">时间值的精度</span><a class="self-link" href="#precision-of-time-values"></a></h3>
        <p>时间值的内部表示是实现依赖的，
            但是，建议用户代理能够以微秒精度表示输入时间值，
            以便 0.001 的<a data-link-type="dfn" href="#time-value" id="ref-for-time-value④⑧">时间值</a>（通常表示毫秒）与 0.0 区分开来。
        </p>
        <h3 class="heading settled" data-level="9.2" id="conformance-criteria"><span class="secno">9.2. </span><span
                class="content">一致性标准</span><a class="self-link" href="#conformance-criteria"></a></h3>
        <p>本规范定义了动画的抽象模型，
            因此，对于不支持脚本的用户代理，
            由于没有可测试的表面区域，故没有一致性标准。</p>
        <p>然而，不支持脚本的用户代理可能会实现基于本规范定义的其他技术，
            在这种情况下，本规范中提供的定义将构成额外技术的一部分一致性标准。</p>
        <p><dfn data-dfn-type="dfn" data-export id="conforming-scripted-web-animations-user-agent">符合规范的脚本化 Web 动画用户代理<a
                    class="self-link" href="#conforming-scripted-web-animations-user-agent"></a></dfn>是实现了<a
                href="#programming-interface">§ 6 编程接口</a>中定义的<abbr
                title="Application Programming Interface">API</abbr>的用户代理。</p>
        <h2 class="heading settled" data-level="10" id="acknowledgements"><span class="secno">10. </span><span
                class="content">致谢</span><a class="self-link" href="#acknowledgements"></a></h2>
        <p>感谢 Steve Block、Michael Giuffrida、Ryan Seys 和 Eric Willigers 对本规范的贡献。</p>
        <p>还要感谢 Michiel "Pomax" Kamermans 帮助拟定了平滑时间函数的方程，
            尽管此功能已推迟到后续规范。</p>
        <p>我们深深感谢 <a href="http://www.endemolshine.com.au">Southern Star
                Animation</a> 的慷慨和耐心，他们向编辑介绍了制作广播动画时使用的过程和技术。</p>
        <h2 class="heading settled" data-level="11" id="changes-since-last-publication"><span class="secno">11.
            </span><span class="content">自上次发布以来的更改</span><a class="self-link"
                href="#changes-since-last-publication"></a></h2>
        <p>自 <a href="https://www.w3.org/TR/2022/WD-web-animations-1-20220908/">2022 年 9 月 8 日工作草案</a> 以来，进行了以下更改：</p>
        <ul>
            <li data-md>
                <p>更新了<a data-link-type="dfn" href="#set-the-playback-rate"
                        id="ref-for-set-the-playback-rate③">设置播放速率</a>的过程，以保持开始时间
                    并在非单调时间线上翻转播放速率时交换开始时间位置。</p>
            <li data-md>
                <p>将<a data-link-type="dfn" href="#relevant-animations"
                        id="ref-for-relevant-animations①">相关动画</a>的定义分解出来，供其他规范使用。</p>
            <li data-md>
                <p>更新了<a data-link-type="dfn" href="#current" id="ref-for-current③">当前</a>动画效果的定义，
                    使其在非空闲且与非递增时间线相关联时被视为当前效果。</p>
            <li data-md>
                <p>修正了 <a href="#fill-behavior">§ 4.6 填充行为</a> 部分的代码示例。</p>
        </ul>

        <p><a href="https://github.com/w3c/csswg-drafts/commits/main/web-animations-1">更新日志</a>提供了更详细的历史记录。</p>
        <h2 class="heading settled" id="animation-types"><span class="content">附录 A: 现有属性的动画类型</span><a
                class="self-link" href="#animation-types"></a></h2>
        <p>通常，属性的<a data-link-type="dfn" href="#animation-type" id="ref-for-animation-type①⓪">动画类型</a>会与其定义一起包含。
            然而，对于一些在较旧或非常成熟的规范中定义的属性，
            <span id="ref-for-animation-type①①">动画类型</span>信息未被包含。
            所有这些属性都被假定为具有 <span id="ref-for-animation-type①②">通过计算值</span>的<a data-link-type="dfn"
                href="#by-computed-value" id="ref-for-by-computed-value③">动画类型</a>，
            除非它们是下面列出的例外之一。
        </p>
        <h3 class="heading settled" id="animating-font-weight"><span class="content">动画 <a class="property css"
                    data-link-type="property" href="https://www.w3.org/TR/css-fonts-4/#propdef-font-weight"
                    id="ref-for-propdef-font-weight">字体粗细</a></span><a class="self-link"
                href="#animating-font-weight"></a></h3>
        <p><a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-fonts-4/#propdef-font-weight" id="ref-for-propdef-font-weight①">字体粗细</a>
            属性值在第 4 级之前按如下方式<a href="https://www.w3.org/TR/css-values-4/#combining-values">组合</a>：</p>
        <ul>
            <li data-md>
                <p>通过<a data-link-type="dfn" href="https://www.w3.org/TR/css-values-4/#interpolation"
                        id="ref-for-interpolation②">离散步长</a>（100 的倍数）插值。
                    插值在实数空间中进行，如 <a class="production css" data-link-type="type"
                        href="https://www.w3.org/TR/css-values-4/#number-value"
                        id="ref-for-number-value">&lt;number></a>，并通过四舍五入到最接近的 100 倍数转换为整数，
                    100 倍数之间的中间值向正无穷大舍入。</p>
            <li data-md>
                <p><a data-link-type="dfn" href="https://www.w3.org/TR/css-values-4/#addition"
                        id="ref-for-addition③">加法</a>的 <a class="property css" data-link-type="property"
                        href="https://www.w3.org/TR/css-fonts-4/#propdef-font-weight"
                        id="ref-for-propdef-font-weight②">字体粗细</a>值定义为
                    <var>V<sub>result</sub></var> = <var>V<sub>a</sub></var> + <var>V<sub>b</sub></var>
                </p>
        </ul>
        <p class="note" role="note"><span>注意：</span> 此定义已被<a data-link-type="biblio"
                href="#biblio-css-fonts-4">[CSS-FONTS-4]</a>废弃，
            其中关于<a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-fonts-4/#propdef-font-weight"
                id="ref-for-propdef-font-weight③">字体粗细</a>值必须是 100 的倍数的要求被取消。
            此时，<span class="property" id="ref-for-propdef-font-weight④">字体粗细</span>的<a data-link-type="dfn"
                href="#animation-type" id="ref-for-animation-type①③">动画类型</a>仅为<a data-link-type="dfn"
                href="#by-computed-value" id="ref-for-by-computed-value④">通过计算值</a>。
        </p>

        <h3 class="heading settled" id="animating-visibility"><span class="content">动画 <a class="property css"
                    data-link-type="property" href="https://www.w3.org/TR/css-display-3/#propdef-visibility"
                    id="ref-for-propdef-visibility">可见性</a></span><a class="self-link" href="#animating-visibility"></a>
        </h3>
        <p>对于 <a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-display-3/#propdef-visibility"
                id="ref-for-propdef-visibility①">visibility</a> 属性，<a class="css" data-link-type="maybe"
                href="https://www.w3.org/TR/css-display-3/#valdef-visibility-visible"
                id="ref-for-valdef-visibility-visible">visible</a> 的<a data-link-type="dfn"
                href="https://www.w3.org/TR/css-values-4/#interpolation" id="ref-for-interpolation③">插值</a>方式为
            离散步长，
            其中 <var>p</var> 的值介于 0 和 1 之间时
            映射到 <span class="css" id="ref-for-valdef-visibility-visible①">visible</span>，<var>p</var> 的其他值映射到更接近的端点；
            如果两个值都不是 <span class="css" id="ref-for-valdef-visibility-visible②">visible</span>，则使用<a data-link-type="dfn"
                href="#discrete" id="ref-for-discrete⑤">离散</a>动画。
        </p>
        <h3 class="heading settled" id="animating-shadow-lists"><span class="content">动画 <a class="property css"
                    data-link-type="property" href="https://www.w3.org/TR/css-backgrounds-3/#propdef-box-shadow"
                    id="ref-for-propdef-box-shadow">盒阴影</a> 和 <a class="property css" data-link-type="property"
                    href="https://www.w3.org/TR/css-text-decor-4/#propdef-text-shadow"
                    id="ref-for-propdef-text-shadow">文本阴影</a></span><a class="self-link"
                href="#animating-shadow-lists"></a></h3>
        <p>对 <a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-backgrounds-3/#propdef-box-shadow"
                id="ref-for-propdef-box-shadow①">box-shadow</a> 或 <a class="property css" data-link-type="property"
                href="https://www.w3.org/TR/css-text-decor-4/#propdef-text-shadow"
                id="ref-for-propdef-text-shadow①">text-shadow</a> 属性的动画遵循<a
                href="https://www.w3.org/TR/css-values-4/#combining-values">组合</a> <dfn class="dfn-paneled"
                data-dfn-type="dfn" data-export data-local-lt="shadow lists" data-lt="combining shadow lists"
                id="combining-shadow-lists">阴影列表</dfn>的以下程序：</p>
        <p>列表中的每个阴影
            （将 <span class="css">none</span> 视为长度为 0 的列表）
            都按组件插值，类似于 <a data-link-type="dfn" href="#by-computed-value" id="ref-for-by-computed-value⑤">通过计算值</a>的行为。
            但是，如果两个输入阴影都是 <span class="css">inset</span> 或两个输入阴影都不是 <span class="css">inset</span>，
            则插值阴影在这方面必须与输入阴影匹配。
            如果任何一对输入阴影有一个 <span class="css">inset</span> 而另一个不是 <span class="css">inset</span>，
            则整个阴影列表使用<a data-link-type="dfn" href="#discrete" id="ref-for-discrete⑥">离散</a>动画。
            如果阴影列表的长度不同，
            则通过在末尾填充阴影来扩展较短的列表，
            这些阴影的颜色为 <a class="css" data-link-type="maybe"
                href="https://www.w3.org/TR/css-color-4/#valdef-color-transparent"
                id="ref-for-valdef-color-transparent">透明</a>，
            所有长度为 <span class="css">0</span>，
            并且其 <span class="css">inset</span>（或不是）与较长的列表匹配。</p>
        <p><a data-link-type="dfn" href="https://www.w3.org/TR/css-values-4/#addition" id="ref-for-addition④">两个
                <var>V<sub>a</sub></var> 和 <var>V<sub>b</sub></var> 的加法</a>定义为<a data-link-type="dfn"
                href="#combining-shadow-lists" id="ref-for-combining-shadow-lists">阴影列表</a>的<a data-link-type="dfn"
                href="https://infra.spec.whatwg.org/#list" id="ref-for-list">列表</a>连接，使得 <var>V<sub>result</sub></var>
            等于 <var>V<sub>a</sub></var> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-extend"
                id="ref-for-list-extend">扩展</a>了 <var>V<sub>b</sub></var>。</p>
        <p><a data-link-type="dfn" href="https://www.w3.org/TR/css-values-4/#accumulation"
                id="ref-for-accumulation③">阴影列表的累积</a>遵循
            上述插值的匹配规则，根据每个组件的类型执行加法，
            或者如果 <span class="css">inset</span> 值不匹配，则回退到<a data-link-type="dfn" href="#discrete"
                id="ref-for-discrete⑦">离散</a>动画。
        </p>
    </main>
    <h2 class="no-ref no-num heading settled" id="w3c-conformance"><span class="content"> 一致性</span><a class="self-link"
            href="#w3c-conformance"></a></h2>
    <h3 class="no-ref heading settled" id="w3c-conventions"><span class="content"> 文档约定</span><a class="self-link"
            href="#w3c-conventions"></a></h3>
    <p>一致性要求以描述性断言和 RFC 2119 术语的组合形式表达。 在本规范的规范性部分中，关键词“必须 (MUST)”、
        “不得 (MUST NOT)”、“要求 (REQUIRED)”、“应 (SHALL)”、“不应 (SHALL NOT)”、
        “应该 (SHOULD)”、“不应该 (SHOULD NOT)”、
        “推荐 (RECOMMENDED)”、“可以 (MAY)”和“可选 (OPTIONAL)”应按照 RFC 2119 中的描述进行解释。
        但是，为了便于阅读，这些词在本规范中并未全部以大写字母出现。</p>
    <p>本规范的所有文字都是规范性的，除非明确标记为非规范性的部分、示例和注释。 <a data-link-type="biblio" href="#biblio-rfc2119">[RFC2119]</a></p>
    <p>本规范中的示例以“例如”开头
        或通过 <code>class="example"</code> 将其与规范性文本区分开来，
        如下所示：</p>
    <div class="example" id="w3c-example">
        <a class="self-link" href="#w3c-example"></a>
        <p>这是一个信息示例。</p>
    </div>
    <p>信息性注释以“注意”一词开头，并通过 <code>class="note"</code> 与规范性文本区分开来，如下所示：</p>
    <p class="note" role="note">注意，这是一条信息性注释。</p>
    <p>建议是规范性部分，样式上引起特别关注，并通过 <code>&lt;strong class="advisement"></code> 与其他规范性文本区分开来，如下所示：<strong class="advisement">
            用户代理必须提供可访问的替代方案。 </strong></p>
    <h3 class="no-ref heading settled" id="w3c-conformance-classes"><span class="content"> 一致性类别</span><a
            class="self-link" href="#w3c-conformance-classes"></a></h3>
    <p>本规范的一致性
        定义为三类一致性类别：</p>
    <dl>
        <dt>样式表
        <dd>一个 <a href="https://www.w3.org/TR/CSS21/conform.html#style-sheet">CSS 样式表</a>。
        <dt>渲染器
        <dd>一个 <a href="https://www.w3.org/TR/CSS21/conform.html#user-agent">用户代理</a>，解释样式表的语义并渲染
            使用它们的文档。
        <dt>创作工具
        <dd>一个 <a href="https://www.w3.org/TR/CSS21/conform.html#user-agent">用户代理</a>，编写样式表。
    </dl>
    <p>如果样式表的所有语句
        使用此模块中定义的语法均符合通用 CSS 语法以及此模块中定义的每个功能的单独语法，则样式表符合本规范。</p>
    <p>如果渲染器除了按
        适当规范定义的方式解释样式表之外，还通过正确解析
        并相应地渲染文档，支持本规范定义的所有功能，则渲染器符合本规范。 但是，UA
        因设备限制无法正确渲染文档并不会导致 UA 不符合规范。 （例如，UA
        不要求在单色显示器上渲染颜色。）</p>
    <p>如果创作工具编写的样式表在语法上符合通用 CSS 语法以及此模块中每个功能的单独语法，
        并符合本模块描述的样式表的所有其他一致性要求，则创作工具符合本规范。</p>
    <h3 class="no-ref heading settled" id="w3c-partial"><span class="content"> 部分实现</span><a class="self-link"
            href="#w3c-partial"></a></h3>
    <p>为了便于作者利用向前兼容的解析规则来分配后备值，CSS 渲染器 <strong>必须</strong> 将任何 at 规则、属性、属性值、关键字
        以及其他语法结构视为无效（并<a href="https://www.w3.org/TR/CSS21/conform.html#ignore">忽略
            适当</a>），如果它们没有可用的支持级别。 特别是，用户代理<strong>不得</strong>在单个
        多值属性声明中选择性忽略不支持的组件值并使用支持的值：如果任何值被视为无效
        （不支持的值必须如此），CSS 要求整个声明
        被忽略。</p>
    <h4 class="heading settled" id="w3c-conform-future-proofing"><span class="content"> 不稳定和专有功能的实现</span><a
            class="self-link" href="#w3c-conform-future-proofing"></a></h4>
    <p>为了避免与未来的稳定 CSS 功能发生冲突，
        CSS 工作组建议<a href="https://www.w3.org/TR/CSS/#future-proofing">遵循最佳实践</a>来
        实现 <a href="https://www.w3.org/TR/CSS/#unstable">不稳定</a>功能和 <a
            href="https://www.w3.org/TR/CSS/#proprietary-extension">专有扩展</a>到 CSS。</p>
    <h3 class="no-ref heading settled" id="w3c-testing"><span class="content"> 非实验性实现</span><a class="self-link"
            href="#w3c-testing"></a></h3>
    <p>一旦规范达到候选推荐阶段，
        就可以进行非实验性实现，并且实现者应
        发布任何 CR 级别功能的未加前缀的实现，
        只要他们能够证明这些功能已根据规范正确实现。</p>
    <p>为了建立和维护 CSS 在各个
        实现之间的互操作性，CSS 工作组要求非实验性
        CSS 渲染器在发布任何 CSS 功能的未加前缀实现之前，向 W3C 提交实施报告（如有必要，还提交实施报告中使用的
        测试用例）。 提交给 W3C 的测试用例
        需由 CSS 工作组审查和修正。</p>
    <p>有关提交测试用例和实施报告的更多信息，
        可以在 CSS 工作组的网站上找到，网址为 <a href="https://www.w3.org/Style/CSS/Test/">https://www.w3.org/Style/CSS/Test/</a>。
        应将问题发送到 <a href="https://lists.w3.org/Archives/Public/public-css-testsuite">public-css-testsuite@w3.org</a>
        邮件列表。</p>

    <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
    <h2 class="no-num no-ref heading settled" id="index"><span class="content">索引</span><a class="self-link"
            href="#index"></a></h2>
    <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">本规范定义的术语</span><a
            class="self-link" href="#index-defined-here"></a></h3>
    <ul class="index">
        <li><a href="#dom-compositeoperation-accumulate">"累积"</a><span>, 位于 § 6.7</span>
        <li><a href="#dom-compositeoperation-accumulate">累积</a><span>, 位于 § 6.7</span>
        <li><a href="#dom-animationreplacestate-active">"活动"</a><span>, 位于 § 6.4.2</span>
        <li><a href="#active-after-boundary-time">活动后边界时间</a><span>, 位于 § 4.5.5</span>
        <li><a href="#active-duration">活动时长</a><span>, 位于 § 4.8.2</span>
        <li><a href="#dom-computedeffecttiming-activeduration">activeDuration</a><span>, 位于 § 6.5.5</span>
        <li><a href="#active-interval">活动区间</a><span>, 位于 § 4.5.3</span>
        <li><a href="#animation-effect-active-phase">活动阶段</a><span>, 位于 § 4.5.5</span>
        <li><a href="#active-replace-state">活动替换状态</a><span>, 位于 § 5.5.1</span>
        <li><a href="#active-time">活动时间</a><span>, 位于 § 4.8.3.1</span>
        <li><a href="#dom-compositeoperation-add">"添加"</a><span>, 位于 § 6.7</span>
        <li><a href="#dom-compositeoperation-add">添加</a><span>, 位于 § 6.7</span>
        <li><a href="#animation-effect-after-phase">后阶段</a><span>, 位于 § 4.5.5</span>
        <li><a href="#dom-playbackdirection-alternate">"交替"</a><span>, 位于 § 6.5.3</span>
        <li><a href="#dom-playbackdirection-alternate-reverse">"交替反向"</a><span>, 位于 § 6.5.3</span>
        <li><a href="#animatable">Animatable</a><span>, 位于 § 6.8</span>
        <li><a href="#concept-animatable">可动画</a><span>, 位于 § 5.2</span>
        <li><a href="#dom-animatable-animate">animate(keyframes)</a><span>, 位于 § 6.8</span>
        <li><a href="#dom-animatable-animate">animate(keyframes, options)</a><span>, 位于 § 6.8</span>
        <li><a href="#animation">Animation</a><span>, 位于 § 6.4</span>
        <li><a href="#concept-animation">动画</a><span>, 位于 § 4.4</span>
        <li><a href="#dom-animation-animation">Animation()</a><span>, 位于 § 6.4</span>
        <li><a href="#animation-class">动画类</a><span>, 位于 § 5.4.1</span>
        <li><a href="#animation-composite-order">动画复合顺序</a><span>, 位于 § 5.4.2</span>
        <li><a href="#animation-direction">动画方向</a><span>, 位于 § 4.5.5</span>
        <li><a href="#animation-effect">动画效果</a><span>, 位于 § 4.5</span>
        <li><a href="#dom-animation-animation">Animation(effect)</a><span>, 位于 § 6.4</span>
        <li><a href="#animationeffect">AnimationEffect</a><span>, 位于 § 6.5</span>
        <li><a href="#dom-animation-animation">Animation(effect, timeline)</a><span>, 位于 § 6.4</span>
        <li><a href="#animation-events">动画事件</a><span>, 位于 § 4.4.18</span>
        <li><a href="#animation-frame">动画帧</a><span>, 位于 § 4.3</span>
        <li><a href="#animationplaybackevent">AnimationPlaybackEvent</a><span>, 位于 § 6.12</span>
        <li><a href="#dictdef-animationplaybackeventinit">AnimationPlaybackEventInit</a><span>, 位于 § 6.12</span>
        <li><a href="#animation-playback-events">动画播放事件</a><span>, 位于 § 4.4.18.2</span>
        <li><a href="#dom-animationplaybackevent-animationplaybackevent">AnimationPlaybackEvent(type)</a><span>, 位于
                § 6.12</span>
        <li><a href="#dom-animationplaybackevent-animationplaybackevent">AnimationPlaybackEvent(type,
                eventInitDict)</a><span>, 位于 § 6.12</span>
        <li><a href="#enumdef-animationplaystate">AnimationPlayState</a><span>, 位于 § 6.4.1</span>
        <li><a href="#animation-property-name-to-idl-attribute-name">动画属性名称到 IDL 属性名称</a><span>, 位于 § 6.6.2</span>
        <li><a href="#enumdef-animationreplacestate">AnimationReplaceState</a><span>, 位于 § 6.4.2</span>
        <li><a href="#animationtimeline">AnimationTimeline</a><span>, 位于 § 6.2</span>
        <li><a href="#animation-time-to-origin-relative-time">动画时间到原点相对时间</a><span>, 位于 § 4.4.18.1</span>
        <li><a href="#animation-time-to-timeline-time">动画时间到时间线时间</a><span>, 位于 § 4.4.18.1</span>
        <li><a href="#animation-type">动画类型</a><span>, 位于 § 5.2</span>
        <li><a href="#apply-any-pending-playback-rate">应用任何待处理的播放速度</a><span>, 位于 § 4.4.15.2</span>
        <li><a href="#animation-effect-associated-animation">关联的动画</a><span>, 位于 § 5.4.2</span>
        <li><a href="#animation-associated-effect">关联效果</a><span>, 位于 § 4.4</span>
        <li><a href="#associated-effect-end">关联效果结束</a><span>, 位于 § 4.4.12</span>
        <li><a href="#associated-with-an-animation">与动画关联</a><span>, 位于 § 4.5.1</span>
        <li><a href="#associated-with-a-timeline">与时间线关联</a><span>, 位于 § 4.5.1</span>
        <li>
            "自动"
            <ul>
                <li><a href="#dom-compositeoperationorauto-auto">CompositeOperationOrAuto 的枚举值</a><span>, 位于
                        § 6.7</span>
                <li><a href="#dom-fillmode-auto">FillMode 的枚举值</a><span>, 位于 § 6.5.2</span>
            </ul>
        <li><a href="#dom-compositeoperationorauto-auto">自动</a><span>, 位于 § 6.7</span>
        <li><a href="#dom-fillmode-backwards">"向后"</a><span>, 位于 § 6.5.2</span>
        <li><a href="#dictdef-basecomputedkeyframe">BaseComputedKeyframe</a><span>, 位于 § 6.6</span>
        <li><a href="#dictdef-basekeyframe">BaseKeyframe</a><span>, 位于 § 6.6.3</span>
        <li><a href="#dictdef-basepropertyindexedkeyframe">BasePropertyIndexedKeyframe</a><span>, 位于 § 6.6.3</span>
        <li><a href="#before-active-boundary-time">活动前边界时间</a><span>, 位于 § 4.5.5</span>
        <li><a href="#animation-effect-before-phase">前阶段</a><span>, 位于 § 4.5.5</span>
        <li><a href="#dom-fillmode-both">"两者"</a><span>, 位于 § 6.5.2</span>
        <li><a href="#by-computed-value">通过计算值</a><span>, 位于 § 5.2</span>
        <li><a href="#dom-animation-cancel">cancel()</a><span>, 位于 § 6.4</span>
        <li><a href="#cancel-an-animation">取消动画</a><span>, 位于 § 4.4.14</span>
        <li><a href="#cancel-event">取消事件</a><span>, 位于 § 4.4.18.3</span>
        <li><a href="#check-the-completion-record">检查完成记录</a><span>, 位于 § 6.6.3</span>
        <li><a href="#combining-shadow-lists">组合阴影列表</a><span>, 位于 § 无编号章节</span>
        <li><a href="#commit-computed-styles">提交计算样式</a><span>, 位于 § 6.4</span>
        <li><a href="#dom-animation-commitstyles">commitStyles()</a><span>, 位于 § 6.4</span>
        <li>
            复合
            <ul>
                <li><a href="#dom-keyframeeffect-composite">KeyframeEffect 的属性</a><span>, 位于 § 6.6</span>
                <li><a href="#composite">定义</a><span>, 位于 § 5.4</span>
                <li><a href="#dom-basecomputedkeyframe-composite">BaseComputedKeyframe 的字典成员</a><span>, 位于 § 6.6</span>
                <li><a href="#dom-basekeyframe-composite">BaseKeyframe 的字典成员</a><span>, 位于 § 6.6.3</span>
                <li><a href="#dom-basepropertyindexedkeyframe-composite">BasePropertyIndexedKeyframe 的字典成员</a><span>, 位于
                        § 6.6.3</span>
                <li><a href="#dom-keyframeeffectoptions-composite">KeyframeEffectOptions 的字典成员</a><span>, 位于
                        § 6.6.4</span>
            </ul>
        <li><a href="#composited-value">复合值</a><span>, 位于 § 5.4.3</span>
        <li><a href="#composite-operation">复合操作</a><span>, 位于 § 5.4.4</span>
        <li>
            CompositeOperation
            <ul>
                <li><a href="#enumdef-compositeoperation">（枚举）</a><span>, 位于 § 6.7</span>
                <li><a href="#compositeoperation">定义</a><span>, 位于 § 6.7</span>
            </ul>
        <li><a href="#composite-operation-accumulate">复合操作累积</a><span>, 位于 § 5.4.4</span>
        <li><a href="#composite-operation-add">复合操作添加</a><span>, 位于 § 5.4.4</span>
        <li><a href="#enumdef-compositeoperationorauto">CompositeOperationOrAuto</a><span>, 位于 § 6.7</span>
        <li><a href="#composite-operation-replace">复合操作替换</a><span>, 位于 § 5.4.4</span>
        <li><a href="#animation-composite-order">复合顺序</a><span>, 位于 § 5.4.2</span>
        <li><a href="#composite">复合</a><span>, 位于 § 5.4</span>
        <li><a href="#compute-a-property-value">计算属性值</a><span>, 位于 § 5.3.2</span>
        <li><a href="#dictdef-computedeffecttiming">ComputedEffectTiming</a><span>, 位于 § 6.5.5</span>
        <li><a href="#computed-keyframe-offset">计算的关键帧偏移</a><span>, 位于 § 5.3.3</span>
        <li><a href="#computed-keyframes">计算的关键帧</a><span>, 位于 § 5.3.3</span>
        <li><a href="#dom-basecomputedkeyframe-computedoffset">computedOffset</a><span>, 位于 § 6.6</span>
        <li><a href="#compute-missing-keyframe-offsets">计算缺失的关键帧偏移</a><span>, 位于 § 5.3.3</span>
        <li><a href="#conforming-scripted-web-animations-user-agent">符合规范的脚本化 Web 动画用户代理</a><span>, 位于 § 9.2</span>
        <li>
            构造函数()
            <ul>
                <li><a href="#dom-animation-animation">Animation 的构造函数</a><span>, 位于 § 6.4</span>
                <li><a href="#dom-documenttimeline-documenttimeline">DocumentTimeline 的构造函数</a><span>, 位于 § 6.3</span>
            </ul>
        <li><a href="#dom-animation-animation">constructor(effect)</a><span>, 位于 § 6.4</span>
        <li><a href="#dom-animation-animation">constructor(effect, timeline)</a><span>, 位于 § 6.4</span>
        <li><a href="#dom-documenttimeline-documenttimeline">constructor(options)</a><span>, 位于 § 6.3</span>
        <li><a href="#dom-keyframeeffect-keyframeeffect-source">constructor(source)</a><span>, 位于 § 6.6</span>
        <li><a href="#dom-keyframeeffect-keyframeeffect">constructor(target, keyframes)</a><span>, 位于 § 6.6</span>
        <li><a href="#dom-keyframeeffect-keyframeeffect">constructor(target, keyframes, options)</a><span>, 位于
                § 6.6</span>
        <li><a href="#dom-animationplaybackevent-animationplaybackevent">constructor(type)</a><span>, 位于 § 6.12</span>
        <li><a href="#dom-animationplaybackevent-animationplaybackevent">constructor(type, eventInitDict)</a><span>, 位于
                § 6.12</span>
        <li><a href="#current">当前</a><span>, 位于 § 4.5.5</span>
        <li><a href="#current-finished-promise">当前完成的承诺</a><span>, 位于 § 4.4.11</span>
        <li><a href="#current-iteration">当前迭代</a><span>, 位于 § 4.8.4</span>
        <li><a href="#dom-computedeffecttiming-currentiteration">currentIteration</a><span>, 位于 § 6.5.5</span>
        <li><a href="#current-ready-promise">当前准备的承诺</a><span>, 位于 § 4.4.7</span>
        <li>
            当前时间
            <ul>
                <li><a href="#animation-current-time">动画的定义</a><span>, 位于 § 4.4.3</span>
                <li><a href="#timeline-current-time">时间线的定义</a><span>, 位于 § 4.3</span>
            </ul>
        <li>
            currentTime
            <ul>
                <li><a href="#dom-animation-currenttime">Animation 的属性</a><span>, 位于 § 6.4</span>
                <li><a href="#dom-animationplaybackevent-currenttime">AnimationPlaybackEvent 的属性</a><span>, 位于
                        § 6.12</span>
                <li><a href="#dom-animationtimeline-currenttime">AnimationTimeline 的属性</a><span>, 位于 § 6.2</span>
                <li><a href="#dom-animationplaybackeventinit-currenttime">AnimationPlaybackEventInit 的字典成员</a><span>, 位于
                        § 6.12</span>
            </ul>
        <li><a href="#document-default-document-timeline">默认文档时间线</a><span>, 位于 § 4.3.2</span>
        <li>
            延迟
            <ul>
                <li><a href="#dom-effecttiming-delay">EffectTiming 的字典成员</a><span>, 位于 § 6.5.1</span>
                <li><a href="#dom-optionaleffecttiming-delay">OptionalEffectTiming 的字典成员</a><span>, 位于 § 6.5.1</span>
            </ul>
        <li><a href="#directed-progress">定向进展</a><span>, 位于 § 4.9.1</span>
        <li>
            方向
            <ul>
                <li><a href="#dom-effecttiming-direction">EffectTiming 的字典成员</a><span>, 位于 § 6.5.1</span>
                <li><a href="#dom-optionaleffecttiming-direction">OptionalEffectTiming 的字典成员</a><span>, 位于
                        § 6.5.1</span>
            </ul>
        <li><a href="#discrete">离散</a><span>, 位于 § 5.2</span>
        <li><a href="#animation-document-for-timing">用于计时的文档</a><span>, 位于 § 4.4</span>
        <li><a href="#document-timeline">文档时间线</a><span>, 位于 § 4.3.1</span>
        <li><a href="#documenttimeline">DocumentTimeline</a><span>, 位于 § 6.3</span>
        <li><a href="#dom-documenttimeline-documenttimeline">DocumentTimeline()</a><span>, 位于 § 6.3</span>
        <li><a href="#dom-documenttimeline-documenttimeline">DocumentTimeline(options)</a><span>, 位于 § 6.3</span>
        <li>
            持续时间
            <ul>
                <li><a href="#dom-effecttiming-duration">EffectTiming 的字典成员</a><span>, 位于 § 6.5.1</span>
                <li><a href="#dom-optionaleffecttiming-duration">OptionalEffectTiming 的字典成员</a><span>, 位于 § 6.5.1</span>
            </ul>
        <li>
            缓动
            <ul>
                <li><a href="#dom-basecomputedkeyframe-easing">BaseComputedKeyframe 的字典成员</a><span>, 位于 § 6.6</span>
                <li><a href="#dom-basekeyframe-easing">BaseKeyframe 的字典成员</a><span>, 位于 § 6.6.3</span>
                <li><a href="#dom-basepropertyindexedkeyframe-easing">BasePropertyIndexedKeyframe 的字典成员</a><span>, 位于
                        § 6.6.3</span>
                <li><a href="#dom-effecttiming-easing">EffectTiming 的字典成员</a><span>, 位于 § 6.5.1</span>
                <li><a href="#dom-optionaleffecttiming-easing">OptionalEffectTiming 的字典成员</a><span>, 位于 § 6.5.1</span>
            </ul>
        <li><a href="#dom-animation-effect">effect</a><span>, 位于 § 6.4</span>
        <li><a href="#effective-playback-rate">有效播放速度</a><span>, 位于 § 4.4.15.2</span>
        <li><a href="#effect-stack">效果堆栈</a><span>, 位于 § 5.4.2</span>
        <li><a href="#keyframe-effect-effect-target">效果目标</a><span>, 位于 § 5.3</span>
        <li><a href="#dictdef-effecttiming">EffectTiming</a><span>, 位于 § 6.5.1</span>
        <li><a href="#effect-value">效果值</a><span>, 位于 § 5.1</span>
        <li><a href="#end-delay">结束延迟</a><span>, 位于 § 4.5.3</span>
        <li>
            endDelay
            <ul>
                <li><a href="#dom-effecttiming-enddelay">EffectTiming 的字典成员</a><span>, 位于 § 6.5.1</span>
                <li><a href="#dom-optionaleffecttiming-enddelay">OptionalEffectTiming 的字典成员</a><span>, 位于 § 6.5.1</span>
            </ul>
        <li><a href="#end-time">结束时间</a><span>, 位于 § 4.5.3</span>
        <li><a href="#dom-computedeffecttiming-endtime">endTime</a><span>, 位于 § 6.5.5</span>
        <li>
            填充
            <ul>
                <li><a href="#dom-effecttiming-fill">EffectTiming 的字典成员</a><span>, 位于 § 6.5.1</span>
                <li><a href="#dom-optionaleffecttiming-fill">OptionalEffectTiming 的字典成员</a><span>, 位于 § 6.5.1</span>
            </ul>
        <li><a href="#fill-mode">填充模式</a><span>, 位于 § 4.6</span>
        <li><a href="#enumdef-fillmode">FillMode</a><span>, 位于 § 6.5.2</span>
        <li><a href="#dom-animation-finish">finish()</a><span>, 位于 § 6.4</span>
        <li><a href="#finish-an-animation">完成动画</a><span>, 位于 § 4.4.13</span>
        <li><a href="#dom-animationplaystate-finished">"已完成"</a><span>, 位于 § 6.4.1</span>
        <li>
            完成
            <ul>
                <li><a href="#dom-animation-finished">Animation 的属性</a><span>, 位于 § 6.4</span>
                <li><a href="#play-state-finished">播放状态的定义</a><span>, 位于 § 4.4.17</span>
            </ul>
        <li><a href="#play-state-finished">完成播放状态</a><span>, 位于 § 4.4.17</span>
        <li><a href="#finish-event">完成事件</a><span>, 位于 § 4.4.18.3</span>
        <li><a href="#finish-notification-steps">完成通知步骤</a><span>, 位于 § 4.4.12</span>
        <li><a href="#dom-fillmode-forwards">"向前"</a><span>, 位于 § 6.5.2</span>
        <li>
            getAnimations()
            <ul>
                <li><a href="#dom-animatable-getanimations">Animatable 的方法</a><span>, 位于 § 6.8</span>
                <li><a href="#dom-documentorshadowroot-getanimations">DocumentOrShadowRoot 的方法</a><span>, 位于
                        § 6.10</span>
            </ul>
        <li><a href="#dom-animatable-getanimations">getAnimations(options)</a><span>, 位于 § 6.8</span>
        <li><a href="#dictdef-getanimationsoptions">GetAnimationsOptions</a><span>, 位于 § 6.8</span>
        <li><a href="#dom-animationeffect-getcomputedtiming">getComputedTiming()</a><span>, 位于 § 6.5</span>
        <li><a href="#dom-keyframeeffect-getkeyframes">getKeyframes()</a><span>, 位于 § 6.6</span>
        <li><a href="#dom-animationeffect-gettiming">getTiming()</a><span>, 位于 § 6.5</span>
        <li><a href="#global-animation-list">全局动画列表</a><span>, 位于 § 4.4</span>
        <li><a href="#animation-hold-time">保持时间</a><span>, 位于 § 4.4</span>
        <li>
            id
            <ul>
                <li><a href="#dom-animation-id">Animation 的属性</a><span>, 位于 § 6.4</span>
                <li><a href="#dom-keyframeanimationoptions-id">KeyframeAnimationOptions 的字典成员</a><span>, 位于 § 6.8</span>
            </ul>
        <li><a href="#idl-attribute-name-to-animation-property-name">IDL 属性名称到动画属性名称</a><span>, 位于 § 6.6.2</span>
        <li><a href="#dom-animationplaystate-idle">"空闲"</a><span>, 位于 § 6.4.1</span>
        <li><a href="#play-state-idle">空闲</a><span>, 位于 § 4.4.17</span>
        <li><a href="#animation-effect-idle-phase">空闲阶段</a><span>, 位于 § 4.5.5</span>
        <li><a href="#play-state-idle">空闲播放状态</a><span>, 位于 § 4.4.17</span>
        <li><a href="#inactive-timeline">非活动时间线</a><span>, 位于 § 4.3</span>
        <li><a href="#in-effect">有效</a><span>, 位于 § 4.5.5</span>
        <li><a href="#in-play">播放中</a><span>, 位于 § 4.5.5</span>
        <li><a href="#iteration-count">迭代计数</a><span>, 位于 § 4.7.2</span>
        <li><a href="#iteration-duration">迭代时长</a><span>, 位于 § 4.7.1</span>
        <li><a href="#iteration-interval">迭代间隔</a><span>, 位于 § 4.7.1</span>
        <li><a href="#iteration-progress">迭代进展</a><span>, 位于 § 4.11</span>
        <li>
            迭代
            <ul>
                <li><a href="#dom-effecttiming-iterations">EffectTiming 的字典成员</a><span>, 位于 § 6.5.1</span>
                <li><a href="#dom-optionaleffecttiming-iterations">OptionalEffectTiming 的字典成员</a><span>, 位于
                        § 6.5.1</span>
            </ul>
        <li><a href="#iteration-start">迭代开始</a><span>, 位于 § 4.7.2</span>
        <li>
            iterationStart
            <ul>
                <li><a href="#dom-effecttiming-iterationstart">EffectTiming 的字典成员</a><span>, 位于 § 6.5.1</span>
                <li><a href="#dom-optionaleffecttiming-iterationstart">OptionalEffectTiming 的字典成员</a><span>, 位于
                        § 6.5.1</span>
            </ul>
        <li><a href="#keyframe">关键帧</a><span>, 位于 § 5.3.1</span>
        <li><a href="#dictdef-keyframeanimationoptions">KeyframeAnimationOptions</a><span>, 位于 § 6.8</span>
        <li><a href="#keyframe-effect">关键帧效果</a><span>, 位于 § 5.3</span>
        <li><a href="#keyframeeffect">KeyframeEffect</a><span>, 位于 § 6.6</span>
        <li><a href="#dictdef-keyframeeffectoptions">KeyframeEffectOptions</a><span>, 位于 § 6.6.4</span>
        <li><a href="#dom-keyframeeffect-keyframeeffect-source">KeyframeEffect(source)</a><span>, 位于 § 6.6</span>
        <li><a href="#dom-keyframeeffect-keyframeeffect">KeyframeEffect(target, keyframes)</a><span>, 位于 § 6.6</span>
        <li><a href="#dom-keyframeeffect-keyframeeffect">KeyframeEffect(target, keyframes, options)</a><span>, 位于
                § 6.6</span>
        <li><a href="#keyframe-offset">关键帧偏移</a><span>, 位于 § 5.3.1</span>
        <li><a href="#keyframe-specific-composite-operation">关键帧特定复合操作</a><span>, 位于 § 5.3.1</span>
        <li><a href="#local-time">本地时间</a><span>, 位于 § 4.5.4</span>
        <li><a href="#dom-computedeffecttiming-localtime">localTime</a><span>, 位于 § 6.5.5</span>
        <li><a href="#loosely-sorted-by-offset">按偏移松散排序</a><span>, 位于 § 5.3.1</span>
        <li><a href="#monotonically-increasing-timeline">单调递增时间线</a><span>, 位于 § 4.3</span>
        <li><a href="#monotonically-increasing-timeline">单调递增时间线</a><span>, 位于 § 4.3</span>
        <li><a href="#neutral-value-for-composition">合成的中性值</a><span>, 位于 § 5.3.4</span>
        <li><a href="#dom-fillmode-none">"无"</a><span>, 位于 § 6.5.2</span>
        <li><a href="#dom-playbackdirection-normal">"正常"</a><span>, 位于 § 6.5.3</span>
        <li><a href="#not-animatable">不可动画</a><span>, 位于 § 5.2</span>
        <li>
            偏移
            <ul>
                <li><a href="#dom-basecomputedkeyframe-offset">BaseComputedKeyframe 的字典成员</a><span>, 位于 § 6.6</span>
                <li><a href="#dom-basekeyframe-offset">BaseKeyframe 的字典成员</a><span>, 位于 § 6.6.3</span>
                <li><a href="#dom-basepropertyindexedkeyframe-offset">BasePropertyIndexedKeyframe 的字典成员</a><span>, 位于
                        § 6.6.3</span>
            </ul>
        <li><a href="#offsetk">offsetk</a><span>, 位于 § 5.3.3</span>
        <li><a href="#dom-animation-oncancel">oncancel</a><span>, 位于 § 6.4</span>
        <li><a href="#dom-animation-onfinish">onfinish</a><span>, 位于 § 6.4</span>
        <li><a href="#dom-animation-onremove">onremove</a><span>, 位于 § 6.4</span>
        <li><a href="#dictdef-optionaleffecttiming">OptionalEffectTiming</a><span>, 位于 § 6.5.1</span>
        <li><a href="#origin-time">原点时间</a><span>, 位于 § 4.3.1</span>
        <li><a href="#dom-documenttimelineoptions-origintime">originTime</a><span>, 位于 § 6.3</span>
        <li><a href="#overall-progress">整体进展</a><span>, 位于 § 4.8.3.2</span>
        <li><a href="#dom-animation-pause">pause()</a><span>, 位于 § 6.4</span>
        <li><a href="#pause-an-animation">暂停动画</a><span>, 位于 § 4.4.9</span>
        <li><a href="#dom-animationplaystate-paused">"已暂停"</a><span>, 位于 § 6.4.1</span>
        <li><a href="#play-state-paused">暂停</a><span>, 位于 § 4.4.17</span>
        <li><a href="#play-state-paused">暂停播放状态</a><span>, 位于 § 4.4.17</span>
        <li><a href="#dom-animation-pending">pending</a><span>, 位于 § 6.4</span>
        <li><a href="#pending-animation-event-queue">待处理的动画事件队列</a><span>, 位于 § 4.4.18</span>
        <li><a href="#pending-pause-task">待处理的暂停任务</a><span>, 位于 § 4.4.9</span>
        <li><a href="#pending-playback-rate">待处理的播放速度</a><span>, 位于 § 4.4.15.2</span>
        <li><a href="#pending-play-task">待处理的播放任务</a><span>, 位于 § 4.4.8</span>
        <li><a href="#dom-animation-persist">persist()</a><span>, 位于 § 6.4</span>
        <li><a href="#dom-animationreplacestate-persisted">"已持久化"</a><span>, 位于 § 6.4.2</span>
        <li><a href="#persisted-replace-state">持久化替换状态</a><span>, 位于 § 5.5.1</span>
        <li><a href="#dom-animation-play">play()</a><span>, 位于 § 6.4</span>
        <li><a href="#play-an-animation">播放动画</a><span>, 位于 § 4.4.8</span>
        <li><a href="#playback-direction">播放方向</a><span>, 位于 § 4.9</span>
        <li><a href="#enumdef-playbackdirection">PlaybackDirection</a><span>, 位于 § 6.5.3</span>
        <li><a href="#playback-rate">播放速度</a><span>, 位于 § 4.4.15</span>
        <li><a href="#dom-animation-playbackrate">playbackRate</a><span>, 位于 § 6.4</span>
        <li><a href="#animation-play-state">播放状态</a><span>, 位于 § 4.4.17</span>
        <li><a href="#dom-animation-playstate">playState</a><span>, 位于 § 6.4</span>
        <li><a href="#previous-current-time">先前的当前时间</a><span>, 位于 § 4.4.12</span>
        <li><a href="#process-a-keyframe-like-object">处理类似关键帧的对象</a><span>, 位于 § 6.6.3</span>
        <li><a href="#process-a-keyframes-argument">处理关键帧参数</a><span>, 位于 § 6.6.3</span>
        <li><a href="#dom-computedeffecttiming-progress">progress</a><span>, 位于 § 6.5.5</span>
        <li>
            伪元素
            <ul>
                <li><a href="#dom-keyframeeffect-pseudoelement">KeyframeEffect 的属性</a><span>, 位于 § 6.6</span>
                <li><a href="#dom-keyframeeffectoptions-pseudoelement">KeyframeEffectOptions 的字典成员</a><span>, 位于
                        § 6.6.4</span>
            </ul>
        <li>
            ready
            <ul>
                <li><a href="#dom-animation-ready">Animation 的属性</a><span>, 位于 § 6.4</span>
                <li><a href="#ready">定义</a><span>, 位于 § 4.4.6</span>
            </ul>
        <li><a href="#animation-relevant">相关</a><span>, 位于 § 4.5.6</span>
        <li><a href="#relevant-animations">相关动画</a><span>, 位于 § 4.5.6</span>
        <li><a href="#relevant-animations-for-a-subtree">子树的相关动画</a><span>, 位于 § 4.5.6</span>
        <li><a href="#dom-animationreplacestate-removed">"已移除"</a><span>, 位于 § 6.4.2</span>
        <li><a href="#removed-replace-state">已移除的替换状态</a><span>, 位于 § 5.5.1</span>
        <li><a href="#remove-event">移除事件</a><span>, 位于 § 4.4.18.3</span>
        <li><a href="#remove-replaced-animations">移除替换的动画</a><span>, 位于 § 5.5.2</span>
        <li><a href="#repeatable-list">可重复列表</a><span>, 位于 § 5.2</span>
        <li><a href="#dom-compositeoperation-replace">"替换"</a><span>, 位于 § 6.7</span>
        <li><a href="#dom-compositeoperation-replace">替换</a><span>, 位于 § 6.7</span>
        <li><a href="#replaceable-animation">可替换</a><span>, 位于 § 5.5.2</span>
        <li><a href="#replaceable-animation">可替换动画</a><span>, 位于 § 5.5.2</span>
        <li><a href="#replace-state">替换状态</a><span>, 位于 § 5.5.1</span>
        <li><a href="#dom-animation-replacestate">replaceState</a><span>, 位于 § 6.4</span>
        <li><a href="#animation-reset-an-animations-pending-tasks">重置动画的待处理任务</a><span>, 位于 § 4.4.14</span>
        <li><a href="#dom-playbackdirection-reverse">"反向"</a><span>, 位于 § 6.5.3</span>
        <li><a href="#dom-animation-reverse">reverse()</a><span>, 位于 § 6.4</span>
        <li><a href="#reverse-an-animation">反向动画</a><span>, 位于 § 4.4.16</span>
        <li><a href="#dom-animationplaystate-running">"运行中"</a><span>, 位于 § 6.4.1</span>
        <li><a href="#play-state-running">运行中</a><span>, 位于 § 4.4.17</span>
        <li><a href="#play-state-running">运行中播放状态</a><span>, 位于 § 4.4.17</span>
        <li><a href="#scheduled-event-time">计划事件时间</a><span>, 位于 § 4.4.18</span>
        <li><a href="#seamlessly-update-the-playback-rate">无缝更新播放速度</a><span>, 位于 § 4.4.15.2</span>
        <li><a href="#dom-keyframeeffect-setkeyframes">setKeyframes(keyframes)</a><span>, 位于 § 6.6</span>
        <li><a href="#animation-set-the-associated-effect-of-an-animation">设置动画的关联效果</a><span>, 位于 § 4.4.2</span>
        <li><a href="#animation-set-the-current-time">设置当前时间</a><span>, 位于 § 4.4.4</span>
        <li><a href="#set-the-playback-rate">设置播放速度</a><span>, 位于 § 4.4.15.1</span>
        <li><a href="#set-the-start-time">设置开始时间</a><span>, 位于 § 4.4.5</span>
        <li><a href="#animation-set-the-timeline-of-an-animation">设置动画的时间线</a><span>, 位于 § 4.4.1</span>
        <li><a href="#combining-shadow-lists">阴影列表</a><span>, 位于 § 无编号章节</span>
        <li><a href="#animation-silently-set-the-current-time">静默设置当前时间</a><span>, 位于 § 4.4.4</span>
        <li><a href="#simple-iteration-progress">简单迭代进展</a><span>, 位于 § 4.8.3.3</span>
        <li><a href="#start-delay">开始延迟</a><span>, 位于 § 4.5.3</span>
        <li><a href="#animation-start-time">开始时间</a><span>, 位于 § 4.4</span>
        <li><a href="#dom-animation-starttime">startTime</a><span>, 位于 § 6.4</span>
        <li><a href="#dom-getanimationsoptions-subtree">subtree</a><span>, 位于 § 6.8</span>
        <li><a href="#dom-keyframeeffect-target">target</a><span>, 位于 § 6.6</span>
        <li><a href="#effect-target-target-element">目标元素</a><span>, 位于 § 5.3</span>
        <li><a href="#target-property">目标属性</a><span>, 位于 § 5.1</span>
        <li><a href="#effect-target-target-pseudo-selector">目标伪选择器</a><span>, 位于 § 5.3</span>
        <li>
            时间线
            <ul>
                <li><a href="#dom-animation-timeline">Animation 的属性</a><span>, 位于 § 6.4</span>
                <li><a href="#dom-document-timeline">Document 的属性</a><span>, 位于 § 6.9</span>
                <li><a href="#timeline">定义</a><span>, 位于 § 4.3</span>
                <li><a href="#dom-keyframeanimationoptions-timeline">KeyframeAnimationOptions 的字典成员</a><span>, 位于
                        § 6.8</span>
            </ul>
        <li><a href="#timeline-associated-with-a-document">与文档关联的时间线</a><span>, 位于 § 4.3</span>
        <li>
            timelineTime
            <ul>
                <li><a href="#dom-animationplaybackevent-timelinetime">AnimationPlaybackEvent 的属性</a><span>, 位于
                        § 6.12</span>
                <li><a href="#dom-animationplaybackeventinit-timelinetime">AnimationPlaybackEventInit 的字典成员</a><span>,
                        位于 § 6.12</span>
            </ul>
        <li><a href="#timeline-time-to-origin-relative-time">时间线时间到原点相对时间</a><span>, 位于 § 4.3</span>
        <li><a href="#time-value">时间值</a><span>, 位于 § 4.2</span>
        <li><a href="#transformed-progress">变换后的进展</a><span>, 位于 § 4.10.1</span>
        <li><a href="#underlying-value">基础值</a><span>, 位于 § 5.4.3</span>
        <li><a href="#unresolved">未解决</a><span>, 位于 § 4.2</span>
        <li><a href="#update-an-animations-finished-state">更新动画的完成状态</a><span>, 位于 § 4.4.12</span>
        <li><a href="#update-animations-and-send-events">更新动画并发送事件</a><span>, 位于 § 4.3</span>
        <li><a href="#dom-animation-updateplaybackrate">updatePlaybackRate(playbackRate)</a><span>, 位于 § 6.4</span>
        <li><a href="#update-the-timing-properties-of-an-animation-effect">更新动画效果的计时属性</a><span>, 位于 § 6.5.4</span>
        <li><a href="#dom-animationeffect-updatetiming">updateTiming()</a><span>, 位于 § 6.5</span>
        <li><a href="#dom-animationeffect-updatetiming">updateTiming(timing)</a><span>, 位于 § 6.5</span>
    </ul>

    <aside class="dfn-panel" data-for="term-for-propdef-animation-fill-mode">
        <a
            href="https://www.w3.org/TR/css-animations-1/#propdef-animation-fill-mode">https://www.w3.org/TR/css-animations-1/#propdef-animation-fill-mode</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-animation-fill-mode">4.6. Fill behavior</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-animation-name">
        <a
            href="https://www.w3.org/TR/css-animations-1/#propdef-animation-name">https://www.w3.org/TR/css-animations-1/#propdef-animation-name</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-animation-name">5.4.1. Animation classes</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-events">
        <a href="https://drafts.csswg.org/css-animations/#events">https://drafts.csswg.org/css-animations/#events</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-events">4.4.18. Animation events</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-cssanimation">
        <a
            href="https://www.w3.org/TR/css-animations-2/#cssanimation">https://www.w3.org/TR/css-animations-2/#cssanimation</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-cssanimation">6.6. The KeyframeEffect interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-owning-element">
        <a
            href="https://drafts.csswg.org/css-animations-2/#owning-element">https://drafts.csswg.org/css-animations-2/#owning-element</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-owning-element">5.5.2. Removing replaced animations</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-background-image">
        <a
            href="https://www.w3.org/TR/css-backgrounds-3/#propdef-background-image">https://www.w3.org/TR/css-backgrounds-3/#propdef-background-image</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-background-image">5.2. Animating properties</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-background-origin">
        <a
            href="https://www.w3.org/TR/css-backgrounds-3/#propdef-background-origin">https://www.w3.org/TR/css-backgrounds-3/#propdef-background-origin</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-background-origin">5.2. Animating properties</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-border-bottom-width">
        <a
            href="https://www.w3.org/TR/css-backgrounds-3/#propdef-border-bottom-width">https://www.w3.org/TR/css-backgrounds-3/#propdef-border-bottom-width</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-border-bottom-width">5.3.3. Calculating computed keyframes</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-border-color">
        <a
            href="https://www.w3.org/TR/css-backgrounds-3/#propdef-border-color">https://www.w3.org/TR/css-backgrounds-3/#propdef-border-color</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-border-color">5.3.3. Calculating computed keyframes</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-border-left-width">
        <a
            href="https://www.w3.org/TR/css-backgrounds-3/#propdef-border-left-width">https://www.w3.org/TR/css-backgrounds-3/#propdef-border-left-width</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-border-left-width">5.3.3. Calculating computed keyframes</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-border-right-width">
        <a
            href="https://www.w3.org/TR/css-backgrounds-3/#propdef-border-right-width">https://www.w3.org/TR/css-backgrounds-3/#propdef-border-right-width</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-border-right-width">5.3.3. Calculating computed keyframes</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-border-top">
        <a
            href="https://www.w3.org/TR/css-backgrounds-3/#propdef-border-top">https://www.w3.org/TR/css-backgrounds-3/#propdef-border-top</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-border-top">5.3.3. Calculating computed keyframes</a> <a
                    href="#ref-for-propdef-border-top①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-border-top-color">
        <a
            href="https://www.w3.org/TR/css-backgrounds-3/#propdef-border-top-color">https://www.w3.org/TR/css-backgrounds-3/#propdef-border-top-color</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-border-top-color">5.3.3. Calculating computed keyframes</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-border-top-width">
        <a
            href="https://www.w3.org/TR/css-backgrounds-3/#propdef-border-top-width">https://www.w3.org/TR/css-backgrounds-3/#propdef-border-top-width</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-border-top-width">5.3.3. Calculating computed keyframes</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-border-width">
        <a
            href="https://www.w3.org/TR/css-backgrounds-3/#propdef-border-width">https://www.w3.org/TR/css-backgrounds-3/#propdef-border-width</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-border-width">5.3.3. Calculating computed keyframes</a> <a
                    href="#ref-for-propdef-border-width①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-box-shadow">
        <a
            href="https://www.w3.org/TR/css-backgrounds-3/#propdef-box-shadow">https://www.w3.org/TR/css-backgrounds-3/#propdef-box-shadow</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-box-shadow">Animation of box-shadow and text-shadow</a> <a
                    href="#ref-for-propdef-box-shadow①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-computed-value">
        <a
            href="https://www.w3.org/TR/css-cascade-5/#computed-value">https://www.w3.org/TR/css-cascade-5/#computed-value</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-computed-value">5.2. Animating properties</a>
            <li><a href="#ref-for-computed-value①">5.2.1. Custom Properties</a>
            <li><a href="#ref-for-computed-value②">5.3.2. Computing property values</a> <a
                    href="#ref-for-computed-value③">(2)</a> <a href="#ref-for-computed-value④">(3)</a> <a
                    href="#ref-for-computed-value⑤">(4)</a>
            <li><a href="#ref-for-computed-value⑥">5.3.4. The effect value of a keyframe effect</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-valdef-color-transparent">
        <a
            href="https://www.w3.org/TR/css-color-4/#valdef-color-transparent">https://www.w3.org/TR/css-color-4/#valdef-color-transparent</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-valdef-color-transparent">Animation of box-shadow and text-shadow</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-display">
        <a
            href="https://www.w3.org/TR/css-display-3/#propdef-display">https://www.w3.org/TR/css-display-3/#propdef-display</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-display">6.4. The Animation interface</a> <a
                    href="#ref-for-propdef-display①">(2)</a> <a href="#ref-for-propdef-display②">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-visibility">
        <a
            href="https://www.w3.org/TR/css-display-3/#propdef-visibility">https://www.w3.org/TR/css-display-3/#propdef-visibility</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-visibility">Animation of visibility</a> <a
                    href="#ref-for-propdef-visibility①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-valdef-visibility-visible">
        <a
            href="https://www.w3.org/TR/css-display-3/#valdef-visibility-visible">https://www.w3.org/TR/css-display-3/#valdef-visibility-visible</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-valdef-visibility-visible">Animation of visibility</a> <a
                    href="#ref-for-valdef-visibility-visible①">(2)</a> <a
                    href="#ref-for-valdef-visibility-visible②">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-typedef-easing-function">
        <a
            href="https://www.w3.org/TR/css-easing-1/#typedef-easing-function">https://www.w3.org/TR/css-easing-1/#typedef-easing-function</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-typedef-easing-function">6.5.1. The EffectTiming and OptionalEffectTiming
                    dictionaries</a>
            <li><a href="#ref-for-typedef-easing-function①">6.5.4. Updating the timing of an AnimationEffect</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-before-flag">
        <a href="https://www.w3.org/TR/css-easing-1/#before-flag">https://www.w3.org/TR/css-easing-1/#before-flag</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-before-flag">4.10.1. Calculating the transformed progress</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-input-progress-value">
        <a
            href="https://www.w3.org/TR/css-easing-1/#input-progress-value">https://www.w3.org/TR/css-easing-1/#input-progress-value</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-input-progress-value">4.10.1. Calculating the transformed progress</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-linear-easing-function">
        <a
            href="https://www.w3.org/TR/css-easing-1/#linear-easing-function">https://www.w3.org/TR/css-easing-1/#linear-easing-function</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-linear-easing-function">4.10. Time transformations</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-easing-function">
        <a
            href="https://www.w3.org/TR/css-easing-1/#easing-function">https://www.w3.org/TR/css-easing-1/#easing-function</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-easing-function">4.8.3.3. Calculating the simple iteration progress</a>
            <li><a href="#ref-for-easing-function①">4.10. Time transformations</a> <a
                    href="#ref-for-easing-function②">(2)</a> <a href="#ref-for-easing-function③">(3)</a>
            <li><a href="#ref-for-easing-function④">4.10.1. Calculating the transformed progress</a>
            <li><a href="#ref-for-easing-function⑤">5.3.1. Keyframes</a> <a href="#ref-for-easing-function⑥">(2)</a>
            <li><a href="#ref-for-easing-function⑦">5.3.4. The effect value of a keyframe effect</a>
            <li><a href="#ref-for-easing-function⑧">6.5.1. The EffectTiming and OptionalEffectTiming dictionaries</a>
            <li><a href="#ref-for-easing-function⑨">6.5.4. Updating the timing of an AnimationEffect</a>
            <li><a href="#ref-for-easing-function①⓪">6.6. The KeyframeEffect interface</a> <a
                    href="#ref-for-easing-function①①">(2)</a> <a href="#ref-for-easing-function①②">(3)</a>
            <li><a href="#ref-for-easing-function①③">6.6.3. Processing a keyframes
                    argument</a> <a href="#ref-for-easing-function①④">(2)</a> <a
                    href="#ref-for-easing-function①⑤">(3)</a> <a href="#ref-for-easing-function①⑥">(4)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-font-size">
        <a
            href="https://www.w3.org/TR/css-fonts-4/#propdef-font-size">https://www.w3.org/TR/css-fonts-4/#propdef-font-size</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-font-size">5.3.2. Computing property values</a> <a
                    href="#ref-for-propdef-font-size①">(2)</a> <a href="#ref-for-propdef-font-size②">(3)</a>
            <li><a href="#ref-for-propdef-font-size③">5.3.4. The effect value of a keyframe effect</a> <a
                    href="#ref-for-propdef-font-size④">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-font-weight">
        <a
            href="https://www.w3.org/TR/css-fonts-4/#propdef-font-weight">https://www.w3.org/TR/css-fonts-4/#propdef-font-weight</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-font-weight">Animation of font-weight</a> <a
                    href="#ref-for-propdef-font-weight①">(2)</a> <a href="#ref-for-propdef-font-weight②">(3)</a> <a
                    href="#ref-for-propdef-font-weight③">(4)</a> <a href="#ref-for-propdef-font-weight④">(5)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-css-registerproperty">
        <a
            href="https://www.w3.org/TR/css-properties-values-api-1/#dom-css-registerproperty">https://www.w3.org/TR/css-properties-values-api-1/#dom-css-registerproperty</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-css-registerproperty">5.2.1. Custom Properties</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-syntax-definition">
        <a
            href="https://drafts.css-houdini.org/css-properties-values-api-1/#syntax-definition">https://drafts.css-houdini.org/css-properties-values-api-1/#syntax-definition</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-syntax-definition">5.2.1. Custom Properties</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-universal-syntax-definition">
        <a
            href="https://drafts.css-houdini.org/css-properties-values-api-1/#universal-syntax-definition">https://drafts.css-houdini.org/css-properties-values-api-1/#universal-syntax-definition</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-universal-syntax-definition">5.2.1. Custom Properties</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-selectordef-part">
        <a
            href="https://www.w3.org/TR/css-shadow-parts-1/#selectordef-part">https://www.w3.org/TR/css-shadow-parts-1/#selectordef-part</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-selectordef-part">5.3. Keyframe effects</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-style-attribute">
        <a
            href="https://drafts.csswg.org/css-style-attr/#style-attribute">https://drafts.csswg.org/css-style-attr/#style-attribute</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-style-attribute">6.4. The Animation interface</a> <a
                    href="#ref-for-style-attribute①">(2)</a> <a href="#ref-for-style-attribute②">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-text-shadow">
        <a
            href="https://www.w3.org/TR/css-text-decor-4/#propdef-text-shadow">https://www.w3.org/TR/css-text-decor-4/#propdef-text-shadow</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-text-shadow">Animation of box-shadow and text-shadow</a> <a
                    href="#ref-for-propdef-text-shadow①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-transform">
        <a
            href="https://www.w3.org/TR/css-transforms-1/#propdef-transform">https://www.w3.org/TR/css-transforms-1/#propdef-transform</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-transform">5.6. Side effects of animation</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-after-change-style">
        <a
            href="https://www.w3.org/TR/css-transitions-1/#after-change-style">https://www.w3.org/TR/css-transitions-1/#after-change-style</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-after-change-style">6.13. Model liveness</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-before-change-style">
        <a
            href="https://www.w3.org/TR/css-transitions-1/#before-change-style">https://www.w3.org/TR/css-transitions-1/#before-change-style</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-before-change-style">6.13. Model liveness</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-transition-events">
        <a
            href="https://drafts.csswg.org/css-transitions/#transition-events">https://drafts.csswg.org/css-transitions/#transition-events</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-transition-events">4.4.18. Animation events</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-style-change-event">
        <a
            href="https://www.w3.org/TR/css-transitions-1/#style-change-event">https://www.w3.org/TR/css-transitions-1/#style-change-event</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-style-change-event">6.4. The Animation interface</a>
            <li><a href="#ref-for-style-change-event①">6.8. The Animatable interface mixin</a>
            <li><a href="#ref-for-style-change-event②">6.10. Extensions to the DocumentOrShadowRoot interface mixin</a>
            <li><a href="#ref-for-style-change-event③">6.13. Model liveness</a> <a
                    href="#ref-for-style-change-event④">(2)</a> <a href="#ref-for-style-change-event⑤">(3)</a> <a
                    href="#ref-for-style-change-event⑥">(4)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-transitionend">
        <a
            href="https://drafts.csswg.org/css-transitions/#transitionend">https://drafts.csswg.org/css-transitions/#transitionend</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-transitionend">6.13. Model liveness</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-owning-element">
        <a
            href="https://drafts.csswg.org/css-transitions-2/#owning-element">https://drafts.csswg.org/css-transitions-2/#owning-element</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-owning-element①">5.5.2. Removing replaced animations</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-number-value">
        <a
            href="https://www.w3.org/TR/css-values-4/#number-value">https://www.w3.org/TR/css-values-4/#number-value</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-number-value">Animation of font-weight</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-interpolation">
        <a
            href="https://www.w3.org/TR/css-values-4/#interpolation">https://www.w3.org/TR/css-values-4/#interpolation</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-interpolation">5.2. Animating properties</a>
            <li><a href="#ref-for-interpolation①">5.3.4. The effect value of a keyframe effect</a>
            <li><a href="#ref-for-interpolation②">Animation of font-weight</a>
            <li><a href="#ref-for-interpolation③">Animation of visibility</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-interpolation">
        <a
            href="https://www.w3.org/TR/css-values-4/#interpolation">https://www.w3.org/TR/css-values-4/#interpolation</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-interpolation">5.2. Animating properties</a>
            <li><a href="#ref-for-interpolation①">5.3.4. The effect value of a keyframe effect</a>
            <li><a href="#ref-for-interpolation②">Animation of font-weight</a>
            <li><a href="#ref-for-interpolation③">Animation of visibility</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-not-additive">
        <a
            href="https://www.w3.org/TR/css-values-4/#not-additive">https://www.w3.org/TR/css-values-4/#not-additive</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-not-additive">5.2. Animating properties</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-accumulation">
        <a
            href="https://www.w3.org/TR/css-values-4/#accumulation">https://www.w3.org/TR/css-values-4/#accumulation</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-accumulation">5.4.4. Effect composition</a> <a href="#ref-for-accumulation①">(2)</a>
            <li><a href="#ref-for-accumulation②">6.7. The CompositeOperation and CompositeOperationOrAuto
                    enumerations</a>
            <li><a href="#ref-for-accumulation③">Animation of box-shadow and text-shadow</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-addition">
        <a href="https://www.w3.org/TR/css-values-4/#addition">https://www.w3.org/TR/css-values-4/#addition</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-addition">5.4.4. Effect composition</a> <a href="#ref-for-addition①">(2)</a>
            <li><a href="#ref-for-addition②">6.7. The CompositeOperation and CompositeOperationOrAuto enumerations</a>
            <li><a href="#ref-for-addition③">Animation of font-weight</a>
            <li><a href="#ref-for-addition④">Animation of box-shadow and text-shadow</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-typedef-custom-property-name">
        <a
            href="https://www.w3.org/TR/css-variables-1/#typedef-custom-property-name">https://www.w3.org/TR/css-variables-1/#typedef-custom-property-name</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-typedef-custom-property-name">6.6.2. Property names and IDL names</a> <a
                    href="#ref-for-typedef-custom-property-name①">(2)</a>
            <li><a href="#ref-for-typedef-custom-property-name②">6.6.3. Processing a keyframes
                    argument</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-custom-property">
        <a
            href="https://www.w3.org/TR/css-variables-1/#custom-property">https://www.w3.org/TR/css-variables-1/#custom-property</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-custom-property">5.2.1. Custom Properties</a> <a
                    href="#ref-for-custom-property①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-will-change">
        <a
            href="https://www.w3.org/TR/css-will-change-1/#propdef-will-change">https://www.w3.org/TR/css-will-change-1/#propdef-will-change</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-will-change">5.6. Side effects of animation</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-direction">
        <a
            href="https://www.w3.org/TR/css-writing-modes-3/#propdef-direction">https://www.w3.org/TR/css-writing-modes-3/#propdef-direction</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-direction">5.3.3. Calculating computed keyframes</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-logical-to-physical">
        <a
            href="https://drafts.csswg.org/css-writing-modes-4/#logical-to-physical">https://drafts.csswg.org/css-writing-modes-4/#logical-to-physical</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-logical-to-physical">5.3.3. Calculating computed keyframes</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-writing-mode">
        <a
            href="https://www.w3.org/TR/css-writing-modes-4/#propdef-writing-mode">https://www.w3.org/TR/css-writing-modes-4/#propdef-writing-mode</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-writing-mode">5.3.3. Calculating computed keyframes</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-x43">
        <a href="https://www.w3.org/TR/CSS21/visuren.html#x43">https://www.w3.org/TR/CSS21/visuren.html#x43</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-x43">5.6. Side effects of animation</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-float">
        <a href="https://drafts.csswg.org/css2/#propdef-float">https://drafts.csswg.org/css2/#propdef-float</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-float">6.6.2. Property names and IDL names</a> <a
                    href="#ref-for-propdef-float①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-cssomstring">
        <a href="https://www.w3.org/TR/cssom-1/#cssomstring">https://www.w3.org/TR/cssom-1/#cssomstring</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-cssomstring">6.6. The KeyframeEffect interface</a> <a
                    href="#ref-for-cssomstring①">(2)</a>
            <li><a href="#ref-for-cssomstring②">6.6.4. The KeyframeEffectOptions dictionary</a> <a
                    href="#ref-for-cssomstring③">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-css-declaration-block">
        <a
            href="https://www.w3.org/TR/cssom-1/#css-declaration-block">https://www.w3.org/TR/cssom-1/#css-declaration-block</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-css-declaration-block">6.4. The Animation interface</a> <a
                    href="#ref-for-css-declaration-block①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-css-property-to-idl-attribute">
        <a
            href="https://drafts.csswg.org/cssom/#css-property-to-idl-attribute">https://drafts.csswg.org/cssom/#css-property-to-idl-attribute</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-css-property-to-idl-attribute">5.3.3. Calculating computed keyframes</a>
            <li><a href="#ref-for-css-property-to-idl-attribute①">6.6.2. Property names and IDL names</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-idl-attribute-to-css-property">
        <a
            href="https://drafts.csswg.org/cssom/#idl-attribute-to-css-property">https://drafts.csswg.org/cssom/#idl-attribute-to-css-property</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-idl-attribute-to-css-property">6.6.2. Property names and IDL names</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-cssstyledeclaration-owner-node">
        <a
            href="https://www.w3.org/TR/cssom-1/#cssstyledeclaration-owner-node">https://www.w3.org/TR/cssom-1/#cssstyledeclaration-owner-node</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-cssstyledeclaration-owner-node">6.4. The Animation interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-serialize-a-css-value">
        <a
            href="https://drafts.csswg.org/cssom/#serialize-a-css-value">https://drafts.csswg.org/cssom/#serialize-a-css-value</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-serialize-a-css-value">6.6. The KeyframeEffect interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-set-a-css-declaration">
        <a
            href="https://www.w3.org/TR/cssom-1/#set-a-css-declaration">https://www.w3.org/TR/cssom-1/#set-a-css-declaration</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-set-a-css-declaration">6.4. The Animation interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-update-style-attribute-for">
        <a
            href="https://www.w3.org/TR/cssom-1/#update-style-attribute-for">https://www.w3.org/TR/cssom-1/#update-style-attribute-for</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-update-style-attribute-for">6.4. The Animation interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-documentorshadowroot">
        <a
            href="https://dom.spec.whatwg.org/#documentorshadowroot">https://dom.spec.whatwg.org/#documentorshadowroot</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-documentorshadowroot">6.10. Extensions to the DocumentOrShadowRoot interface mixin</a>
                <a href="#ref-for-documentorshadowroot①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-element">
        <a href="https://dom.spec.whatwg.org/#element">https://dom.spec.whatwg.org/#element</a><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-element">5.3. Keyframe effects</a> <a href="#ref-for-element①">(2)</a>
            <li><a href="#ref-for-element②">5.3.2. Computing property values</a>
            <li><a href="#ref-for-element③">6.6. The KeyframeEffect interface</a> <a href="#ref-for-element④">(2)</a> <a
                    href="#ref-for-element⑤">(3)</a> <a href="#ref-for-element⑥">(4)</a> <a
                    href="#ref-for-element⑦">(5)</a>
            <li><a href="#ref-for-element⑧">6.11. Extensions to the Element interface</a> <a
                    href="#ref-for-element⑨">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-event">
        <a href="https://dom.spec.whatwg.org/#event">https://dom.spec.whatwg.org/#event</a><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-event">6.12. The AnimationPlaybackEvent interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dictdef-eventinit">
        <a href="https://dom.spec.whatwg.org/#dictdef-eventinit">https://dom.spec.whatwg.org/#dictdef-eventinit</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dictdef-eventinit">6.12. The AnimationPlaybackEvent interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-eventtarget">
        <a href="https://dom.spec.whatwg.org/#eventtarget">https://dom.spec.whatwg.org/#eventtarget</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-eventtarget">6.4. The Animation interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-connected">
        <a href="https://dom.spec.whatwg.org/#connected">https://dom.spec.whatwg.org/#connected</a><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-connected">6.4. The Animation interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-constructing-events">
        <a
            href="https://dom.spec.whatwg.org/#constructing-events">https://dom.spec.whatwg.org/#constructing-events</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-constructing-events">6.12. The AnimationPlaybackEvent interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-event-create">
        <a
            href="https://dom.spec.whatwg.org/#concept-event-create">https://dom.spec.whatwg.org/#concept-event-create</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-event-create">4.4.12. Updating the finished state</a>
            <li><a href="#ref-for-concept-event-create①">4.4.14. Canceling an animation</a>
            <li><a href="#ref-for-concept-event-create②">5.5.2. Removing replaced animations</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-tree-descendant">
        <a
            href="https://dom.spec.whatwg.org/#concept-tree-descendant">https://dom.spec.whatwg.org/#concept-tree-descendant</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-tree-descendant">4.5.6. Relevant animations</a>
            <li><a href="#ref-for-concept-tree-descendant①">5.5.2. Removing replaced animations</a>
            <li><a href="#ref-for-concept-tree-descendant②">6.8. The Animatable interface mixin</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-event-dispatch">
        <a
            href="https://dom.spec.whatwg.org/#concept-event-dispatch">https://dom.spec.whatwg.org/#concept-event-dispatch</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-event-dispatch">4.3. Timelines</a>
            <li><a href="#ref-for-concept-event-dispatch①">4.4.12. Updating the finished state</a>
            <li><a href="#ref-for-concept-event-dispatch②">4.4.14. Canceling an animation</a>
            <li><a href="#ref-for-concept-event-dispatch③">5.5.2. Removing replaced animations</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-document">
        <a href="https://dom.spec.whatwg.org/#concept-document">https://dom.spec.whatwg.org/#concept-document</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-document">4.5.6. Relevant animations</a> <a
                    href="#ref-for-concept-document①">(2)</a>
            <li><a href="#ref-for-concept-document②">6.10. Extensions to the DocumentOrShadowRoot interface mixin</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-element-attribute-has">
        <a
            href="https://dom.spec.whatwg.org/#concept-element-attribute-has">https://dom.spec.whatwg.org/#concept-element-attribute-has</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-element-attribute-has">6.4. The Animation interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-tree-inclusive-descendant">
        <a
            href="https://dom.spec.whatwg.org/#concept-tree-inclusive-descendant">https://dom.spec.whatwg.org/#concept-tree-inclusive-descendant</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-tree-inclusive-descendant">4.5.6. Relevant animations</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-node-document">
        <a
            href="https://dom.spec.whatwg.org/#concept-node-document">https://dom.spec.whatwg.org/#concept-node-document</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-node-document">6.8. The Animatable interface mixin</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-shadow-root">
        <a
            href="https://dom.spec.whatwg.org/#concept-shadow-root">https://dom.spec.whatwg.org/#concept-shadow-root</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-shadow-root">4.5.6. Relevant animations</a> <a
                    href="#ref-for-concept-shadow-root①">(2)</a>
            <li><a href="#ref-for-concept-shadow-root②">6.10. Extensions to the DocumentOrShadowRoot interface mixin</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-event-type">
        <a href="https://dom.spec.whatwg.org/#dom-event-type">https://dom.spec.whatwg.org/#dom-event-type</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-event-type">4.4.12. Updating the finished state</a>
            <li><a href="#ref-for-dom-event-type①">4.4.14. Canceling an animation</a>
            <li><a href="#ref-for-dom-event-type②">5.5.2. Removing replaced animations</a>
        </ul>
    </aside>
    <aside class="dfn-panel"
        data-for="term-for-sec-ordinary-object-internal-methods-and-internal-slots-defineownproperty-p-desc">
        <a
            href="http://www.ecma-international.org/ecma-262/6.0/#sec-ordinary-object-internal-methods-and-internal-slots-defineownproperty-p-desc">http://www.ecma-international.org/ecma-262/6.0/#sec-ordinary-object-internal-methods-and-internal-slots-defineownproperty-p-desc</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-sec-ordinary-object-internal-methods-and-internal-slots-defineownproperty-p-desc">6.6.
                    The KeyframeEffect interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-sec-ordinary-object-internal-methods-and-internal-slots-get-p-receiver">
        <a
            href="http://www.ecma-international.org/ecma-262/6.0/#sec-ordinary-object-internal-methods-and-internal-slots-get-p-receiver">http://www.ecma-international.org/ecma-262/6.0/#sec-ordinary-object-internal-methods-and-internal-slots-get-p-receiver</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-sec-ordinary-object-internal-methods-and-internal-slots-get-p-receiver">6.6.3.
                    Processing a keyframes
                    argument</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-sec-completion-record-specification-type">
        <a
            href="http://www.ecma-international.org/ecma-262/6.0/#sec-completion-record-specification-type">http://www.ecma-international.org/ecma-262/6.0/#sec-completion-record-specification-type</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-sec-completion-record-specification-type">6.6.3. Processing a keyframes
                    argument</a> <a href="#ref-for-sec-completion-record-specification-type①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-sec-enumerableownnames">
        <a
            href="http://www.ecma-international.org/ecma-262/6.0/#sec-enumerableownnames">http://www.ecma-international.org/ecma-262/6.0/#sec-enumerableownnames</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-sec-enumerableownnames">6.6.3. Processing a keyframes
                    argument</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-sec-getiterator">
        <a
            href="http://www.ecma-international.org/ecma-262/6.0/#sec-getiterator">http://www.ecma-international.org/ecma-262/6.0/#sec-getiterator</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-sec-getiterator">6.6.3. Processing a keyframes
                    argument</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-sec-getmethod">
        <a
            href="http://www.ecma-international.org/ecma-262/6.0/#sec-getmethod">http://www.ecma-international.org/ecma-262/6.0/#sec-getmethod</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-sec-getmethod">6.6.3. Processing a keyframes
                    argument</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-sec-iteratorstep">
        <a
            href="http://www.ecma-international.org/ecma-262/6.0/#sec-iteratorstep">http://www.ecma-international.org/ecma-262/6.0/#sec-iteratorstep</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-sec-iteratorstep">6.6.3. Processing a keyframes
                    argument</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-sec-iteratorvalue">
        <a
            href="http://www.ecma-international.org/ecma-262/6.0/#sec-iteratorvalue">http://www.ecma-international.org/ecma-262/6.0/#sec-iteratorvalue</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-sec-iteratorvalue">6.6.3. Processing a keyframes
                    argument</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-sec-promise-objects">
        <a
            href="http://www.ecma-international.org/ecma-262/6.0/#sec-promise-objects">http://www.ecma-international.org/ecma-262/6.0/#sec-promise-objects</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-sec-promise-objects">4.4.7. The current ready promise</a> <a
                    href="#ref-for-sec-promise-objects①">(2)</a> <a href="#ref-for-sec-promise-objects②">(3)</a>
            <li><a href="#ref-for-sec-promise-objects③">4.4.11. The current finished promise</a> <a
                    href="#ref-for-sec-promise-objects④">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-sec-promise-objects">
        <a
            href="http://www.ecma-international.org/ecma-262/6.0/#sec-promise-objects">http://www.ecma-international.org/ecma-262/6.0/#sec-promise-objects</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-sec-promise-objects">4.4.7. The current ready promise</a> <a
                    href="#ref-for-sec-promise-objects①">(2)</a> <a href="#ref-for-sec-promise-objects②">(3)</a>
            <li><a href="#ref-for-sec-promise-objects③">4.4.11. The current finished promise</a> <a
                    href="#ref-for-sec-promise-objects④">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-sec-ecmascript-data-types-and-values">
        <a
            href="http://www.ecma-international.org/ecma-262/6.0/#sec-ecmascript-data-types-and-values">http://www.ecma-international.org/ecma-262/6.0/#sec-ecmascript-data-types-and-values</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-sec-ecmascript-data-types-and-values">6.6.3. Processing a keyframes
                    argument</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-sec-well-known-symbols">
        <a
            href="http://www.ecma-international.org/ecma-262/6.0/#sec-well-known-symbols">http://www.ecma-international.org/ecma-262/6.0/#sec-well-known-symbols</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-sec-well-known-symbols">6.6.3. Processing a keyframes
                    argument</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-domhighrestimestamp">
        <a
            href="https://www.w3.org/TR/hr-time-3/#dom-domhighrestimestamp">https://www.w3.org/TR/hr-time-3/#dom-domhighrestimestamp</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-domhighrestimestamp">6.3. The DocumentTimeline interface</a> <a
                    href="#ref-for-dom-domhighrestimestamp①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-cereactions">
        <a
            href="https://html.spec.whatwg.org/multipage/custom-elements.html#cereactions">https://html.spec.whatwg.org/multipage/custom-elements.html#cereactions</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-cereactions">6.4. The Animation interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-document">
        <a href="https://html.spec.whatwg.org/#document">https://html.spec.whatwg.org/#document</a><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-document">4.3. Timelines</a>
            <li><a href="#ref-for-document①">4.3.1. Document timelines</a>
            <li><a href="#ref-for-document②">4.3.2. The default document timeline</a>
            <li><a href="#ref-for-document③">4.4. Animations</a>
            <li><a href="#ref-for-document④">4.4.18. Animation events</a>
            <li><a href="#ref-for-document⑤">4.7.3. Iteration time space</a>
            <li><a href="#ref-for-document⑥">5.5.2. Removing replaced animations</a>
            <li><a href="#ref-for-document⑦">6.3. The DocumentTimeline interface</a> <a
                    href="#ref-for-document⑧">(2)</a>
            <li><a href="#ref-for-document⑨">6.4. The Animation interface</a> <a href="#ref-for-document①⓪">(2)</a>
            <li><a href="#ref-for-document①①">6.9. Extensions to the Document interface</a> <a
                    href="#ref-for-document①②">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-eventhandler">
        <a
            href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-eventhandler">6.4. The Animation interface</a> <a
                    href="#ref-for-eventhandler①">(2)</a> <a href="#ref-for-eventhandler②">(3)</a> <a
                    href="#ref-for-eventhandler③">(4)</a> <a href="#ref-for-eventhandler④">(5)</a> <a
                    href="#ref-for-eventhandler⑤">(6)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-window">
        <a
            href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window">https://html.spec.whatwg.org/multipage/nav-history-apis.html#window</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-window">6.3. The DocumentTimeline interface</a>
            <li><a href="#ref-for-window①">6.4. The Animation interface</a> <a href="#ref-for-window②">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-active-document">
        <a
            href="https://html.spec.whatwg.org/multipage/browsers.html#active-document">https://html.spec.whatwg.org/multipage/browsers.html#active-document</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-active-document">4.3.1. Document timelines</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-an-entry-with-persisted-user-state">
        <a
            href="https://html.spec.whatwg.org/multipage/browsers.html#an-entry-with-persisted-user-state">https://html.spec.whatwg.org/multipage/browsers.html#an-entry-with-persisted-user-state</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-an-entry-with-persisted-user-state">8. Interaction with page display</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-animation-frames">
        <a
            href="https://html.spec.whatwg.org/multipage/imagebitmap-and-animations.html.html#animation-frames">https://html.spec.whatwg.org/multipage/imagebitmap-and-animations.html.html#animation-frames</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-animation-frames">1.2. Relationship to other specifications</a> <a
                    href="#ref-for-animation-frames①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-being-rendered">
        <a
            href="https://html.spec.whatwg.org/multipage/browsers.html#being-rendered">https://html.spec.whatwg.org/multipage/browsers.html#being-rendered</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-being-rendered">6.4. The Animation interface</a> <a
                    href="#ref-for-being-rendered①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-current-global-object">
        <a
            href="https://html.spec.whatwg.org/multipage/webappapis.html#current-global-object">https://html.spec.whatwg.org/multipage/webappapis.html#current-global-object</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-current-global-object">4.7.3. Iteration time space</a>
            <li><a href="#ref-for-current-global-object①">5.2.1. Custom Properties</a>
            <li><a href="#ref-for-current-global-object②">6.3. The DocumentTimeline interface</a>
            <li><a href="#ref-for-current-global-object③">6.4. The Animation interface</a> <a
                    href="#ref-for-current-global-object④">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-document-window">
        <a
            href="https://html.spec.whatwg.org/multipage/browsers.html#concept-document-window">https://html.spec.whatwg.org/multipage/browsers.html#concept-document-window</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-document-window">6.3. The DocumentTimeline interface</a>
            <li><a href="#ref-for-concept-document-window①">6.4. The Animation interface</a> <a
                    href="#ref-for-concept-document-window②">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-document-open">
        <a
            href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-document-open">https://html.spec.whatwg.org/multipage/webappapis.html#dom-document-open</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-document-open">4.3.2. The default document timeline</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dom-manipulation-task-source">
        <a
            href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source">https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-manipulation-task-source">4.4.12. Updating the finished state</a>
            <li><a href="#ref-for-dom-manipulation-task-source①">4.4.14. Canceling an animation</a>
            <li><a href="#ref-for-dom-manipulation-task-source②">5.5.2. Removing replaced animations</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-event-loop-processing-model">
        <a
            href="https://html.spec.whatwg.org/multipage/webappapis.html#event-loop-processing-model">https://html.spec.whatwg.org/multipage/webappapis.html#event-loop-processing-model</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-event-loop-processing-model">6.13. Model liveness</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-media-element">
        <a
            href="https://html.spec.whatwg.org/multipage/embedded-content.html#media-element">https://html.spec.whatwg.org/multipage/embedded-content.html#media-element</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-media-element">4.4.10. Reaching the end</a>
            <li><a href="#ref-for-media-element①">8. Interaction with page display</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-perform-a-microtask-checkpoint">
        <a
            href="https://html.spec.whatwg.org/multipage/webappapis.html#perform-a-microtask-checkpoint">https://html.spec.whatwg.org/multipage/webappapis.html#perform-a-microtask-checkpoint</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-perform-a-microtask-checkpoint">4.3. Timelines</a>
            <li><a href="#ref-for-perform-a-microtask-checkpoint①">4.4.8. Playing an animation</a>
            <li><a href="#ref-for-perform-a-microtask-checkpoint②">4.4.9. Pausing an animation</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-queue-a-microtask">
        <a
            href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-microtask">https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-microtask</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-queue-a-microtask">4.4.12. Updating the finished state</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-queue-a-task">
        <a
            href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-queue-a-task">4.4.12. Updating the finished state</a>
            <li><a href="#ref-for-queue-a-task①">4.4.14. Canceling an animation</a>
            <li><a href="#ref-for-queue-a-task②">5.5.2. Removing replaced animations</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-relevant-realm">
        <a
            href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm">https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-relevant-realm">4.4.7. The current ready promise</a>
            <li><a href="#ref-for-concept-relevant-realm①">4.4.8. Playing an animation</a>
            <li><a href="#ref-for-concept-relevant-realm②">4.4.9. Pausing an animation</a>
            <li><a href="#ref-for-concept-relevant-realm③">4.4.12. Updating the finished state</a>
            <li><a href="#ref-for-concept-relevant-realm④">4.4.14. Canceling an animation</a> <a
                    href="#ref-for-concept-relevant-realm⑤">(2)</a>
            <li><a href="#ref-for-concept-relevant-realm⑥">6.8. The Animatable interface mixin</a> <a
                    href="#ref-for-concept-relevant-realm⑦">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-run-the-animation-frame-callbacks">
        <a
            href="https://html.spec.whatwg.org/multipage/imagebitmap-and-animations.html.html#run-the-animation-frame-callbacks">https://html.spec.whatwg.org/multipage/imagebitmap-and-animations.html.html#run-the-animation-frame-callbacks</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-run-the-animation-frame-callbacks">6.13. Model liveness</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-session-history-entry">
        <a
            href="https://html.spec.whatwg.org/multipage/browsers.html#session-history-entry">https://html.spec.whatwg.org/multipage/browsers.html#session-history-entry</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-session-history-entry">8. Interaction with page display</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-concept-settings-object-time-origin">
        <a
            href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-time-origin">https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-time-origin</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-concept-settings-object-time-origin">4.3.1. Document timelines</a>
            <li><a href="#ref-for-concept-settings-object-time-origin①">4.3.2. The default document timeline</a>
            <li><a href="#ref-for-concept-settings-object-time-origin②">4.4.18. Animation events</a> <a
                    href="#ref-for-concept-settings-object-time-origin③">(2)</a>
            <li><a href="#ref-for-concept-settings-object-time-origin④">6.3. The DocumentTimeline interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-map-exists">
        <a href="https://infra.spec.whatwg.org/#map-exists">https://infra.spec.whatwg.org/#map-exists</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-map-exists">6.5. The AnimationEffect interface</a>
            <li><a href="#ref-for-map-exists①">6.5.1. The EffectTiming and OptionalEffectTiming dictionaries</a>
            <li><a href="#ref-for-map-exists②">6.5.4. Updating the timing of an AnimationEffect</a> <a
                    href="#ref-for-map-exists③">(2)</a> <a href="#ref-for-map-exists④">(3)</a> <a
                    href="#ref-for-map-exists⑤">(4)</a> <a href="#ref-for-map-exists⑥">(5)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-list-extend">
        <a href="https://infra.spec.whatwg.org/#list-extend">https://infra.spec.whatwg.org/#list-extend</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-list-extend">Animation of box-shadow and text-shadow</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-list-iterate">
        <a href="https://infra.spec.whatwg.org/#list-iterate">https://infra.spec.whatwg.org/#list-iterate</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-list-iterate">6.4. The Animation interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-list">
        <a href="https://infra.spec.whatwg.org/#list">https://infra.spec.whatwg.org/#list</a><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-list">Animation of box-shadow and text-shadow</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-ordered-set">
        <a href="https://infra.spec.whatwg.org/#ordered-set">https://infra.spec.whatwg.org/#ordered-set</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-ordered-set">6.4. The Animation interface</a> <a href="#ref-for-ordered-set①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-propdef-offset">
        <a href="https://www.w3.org/TR/motion-1/#propdef-offset">https://www.w3.org/TR/motion-1/#propdef-offset</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-propdef-offset">6.6.2. Property names and IDL names</a> <a
                    href="#ref-for-propdef-offset①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-typedef-pseudo-element-selector">
        <a
            href="https://www.w3.org/TR/selectors-4/#typedef-pseudo-element-selector">https://www.w3.org/TR/selectors-4/#typedef-pseudo-element-selector</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-typedef-pseudo-element-selector">6.6. The KeyframeEffect interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-invalid-selector">
        <a
            href="https://www.w3.org/TR/selectors-4/#invalid-selector">https://www.w3.org/TR/selectors-4/#invalid-selector</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-invalid-selector">6.6. The KeyframeEffect interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-originating-element">
        <a
            href="https://www.w3.org/TR/selectors-4/#originating-element">https://www.w3.org/TR/selectors-4/#originating-element</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-originating-element">5.3. Keyframe effects</a>
            <li><a href="#ref-for-originating-element①">6.6. The KeyframeEffect interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-pseudo-element">
        <a
            href="https://www.w3.org/TR/selectors-4/#pseudo-element">https://www.w3.org/TR/selectors-4/#pseudo-element</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-pseudo-element">4.5.6. Relevant animations</a>
            <li><a href="#ref-for-pseudo-element①">5.3. Keyframe effects</a> <a href="#ref-for-pseudo-element②">(2)</a>
                <a href="#ref-for-pseudo-element③">(3)</a> <a href="#ref-for-pseudo-element④">(4)</a>
            <li><a href="#ref-for-pseudo-element⑤">6.6.4. The KeyframeEffectOptions dictionary</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-mime-registration">
        <a
            href="https://svgwg.org/svg2-draft/mimereg.html#mime-registration">https://svgwg.org/svg2-draft/mimereg.html#mime-registration</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-mime-registration">7. Integration with Media Fragments</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-iteration-composite-operation">
        <a
            href="https://drafts.csswg.org/web-animations-2/#iteration-composite-operation">https://drafts.csswg.org/web-animations-2/#iteration-composite-operation</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-iteration-composite-operation">4.7.2. Controlling iteration</a>
            <li><a href="#ref-for-iteration-composite-operation①">6.5.1. The EffectTiming and OptionalEffectTiming
                    dictionaries</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-iteration-composite-operation-accumulate">
        <a
            href="https://drafts.csswg.org/web-animations-2/#iteration-composite-operation-accumulate">https://drafts.csswg.org/web-animations-2/#iteration-composite-operation-accumulate</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-iteration-composite-operation-accumulate">4.7.2. Controlling iteration</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-idl-DOMException">
        <a
            href="https://webidl.spec.whatwg.org/#idl-DOMException">https://webidl.spec.whatwg.org/#idl-DOMException</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-idl-DOMException">4.4.8. Playing an animation</a>
            <li><a href="#ref-for-idl-DOMException①">4.4.9. Pausing an animation</a>
            <li><a href="#ref-for-idl-DOMException②">4.4.13. Finishing an animation</a>
            <li><a href="#ref-for-idl-DOMException③">4.4.16. Reversing an animation</a>
            <li><a href="#ref-for-idl-DOMException④">6.4. The Animation interface</a> <a
                    href="#ref-for-idl-DOMException⑤">(2)</a>
            <li><a href="#ref-for-idl-DOMException⑥">6.6. The KeyframeEffect interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-idl-DOMString">
        <a href="https://webidl.spec.whatwg.org/#idl-DOMString">https://webidl.spec.whatwg.org/#idl-DOMString</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-idl-DOMString">6.4. The Animation interface</a> <a
                    href="#ref-for-idl-DOMString①">(2)</a>
            <li><a href="#ref-for-idl-DOMString②">6.5.1. The EffectTiming and OptionalEffectTiming dictionaries</a> <a
                    href="#ref-for-idl-DOMString③">(2)</a> <a href="#ref-for-idl-DOMString④">(3)</a> <a
                    href="#ref-for-idl-DOMString⑤">(4)</a> <a href="#ref-for-idl-DOMString⑥">(5)</a>
            <li><a href="#ref-for-idl-DOMString⑦">6.6. The KeyframeEffect interface</a>
            <li><a href="#ref-for-idl-DOMString⑧">6.6.3. Processing a keyframes
                    argument</a> <a href="#ref-for-idl-DOMString⑨">(2)</a> <a href="#ref-for-idl-DOMString①⓪">(3)</a>
            <li><a href="#ref-for-idl-DOMString①①">6.8. The Animatable interface mixin</a> <a
                    href="#ref-for-idl-DOMString①②">(2)</a>
            <li><a href="#ref-for-idl-DOMString①③">6.12. The AnimationPlaybackEvent interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-Exposed">
        <a href="https://webidl.spec.whatwg.org/#Exposed">https://webidl.spec.whatwg.org/#Exposed</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-Exposed">6.2. The AnimationTimeline interface</a>
            <li><a href="#ref-for-Exposed①">6.3. The DocumentTimeline interface</a>
            <li><a href="#ref-for-Exposed②">6.4. The Animation interface</a>
            <li><a href="#ref-for-Exposed③">6.5. The AnimationEffect interface</a>
            <li><a href="#ref-for-Exposed④">6.6. The KeyframeEffect interface</a>
            <li><a href="#ref-for-Exposed⑤">6.12. The AnimationPlaybackEvent interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-invalidstateerror">
        <a
            href="https://webidl.spec.whatwg.org/#invalidstateerror">https://webidl.spec.whatwg.org/#invalidstateerror</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-invalidstateerror">4.4.8. Playing an animation</a>
            <li><a href="#ref-for-invalidstateerror①">4.4.9. Pausing an animation</a>
            <li><a href="#ref-for-invalidstateerror②">4.4.13. Finishing an animation</a>
            <li><a href="#ref-for-invalidstateerror③">4.4.16. Reversing an animation</a>
            <li><a href="#ref-for-invalidstateerror④">6.4. The Animation interface</a> <a
                    href="#ref-for-invalidstateerror⑤">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-nomodificationallowederror">
        <a
            href="https://webidl.spec.whatwg.org/#nomodificationallowederror">https://webidl.spec.whatwg.org/#nomodificationallowederror</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-nomodificationallowederror">6.4. The Animation interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-idl-promise">
        <a href="https://webidl.spec.whatwg.org/#idl-promise">https://webidl.spec.whatwg.org/#idl-promise</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-idl-promise">6.4. The Animation interface</a> <a href="#ref-for-idl-promise①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-syntaxerror">
        <a href="https://webidl.spec.whatwg.org/#syntaxerror">https://webidl.spec.whatwg.org/#syntaxerror</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-syntaxerror">6.6. The KeyframeEffect interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-EnforceRange">
        <a href="https://webidl.spec.whatwg.org/#EnforceRange">https://webidl.spec.whatwg.org/#EnforceRange</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-EnforceRange">6.5.4. Updating the timing of an AnimationEffect</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-a-new-promise">
        <a href="https://webidl.spec.whatwg.org/#a-new-promise">https://webidl.spec.whatwg.org/#a-new-promise</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-a-new-promise">4.4.8. Playing an animation</a>
            <li><a href="#ref-for-a-new-promise①">4.4.9. Pausing an animation</a>
            <li><a href="#ref-for-a-new-promise②">4.4.12. Updating the finished state</a>
            <li><a href="#ref-for-a-new-promise③">4.4.14. Canceling an animation</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-idl-boolean">
        <a href="https://webidl.spec.whatwg.org/#idl-boolean">https://webidl.spec.whatwg.org/#idl-boolean</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-idl-boolean">6.4. The Animation interface</a> <a href="#ref-for-idl-boolean①">(2)</a>
            <li><a href="#ref-for-idl-boolean②">6.8. The Animatable interface mixin</a> <a
                    href="#ref-for-idl-boolean③">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dfn-convert-ecmascript-to-idl-value">
        <a
            href="https://webidl.spec.whatwg.org/#dfn-convert-ecmascript-to-idl-value">https://webidl.spec.whatwg.org/#dfn-convert-ecmascript-to-idl-value</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dfn-convert-ecmascript-to-idl-value">6.6.3. Processing a keyframes
                    argument</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-a-promise-resolved-with">
        <a
            href="https://webidl.spec.whatwg.org/#a-promise-resolved-with">https://webidl.spec.whatwg.org/#a-promise-resolved-with</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-a-promise-resolved-with">4.4.7. The current ready promise</a>
            <li><a href="#ref-for-a-promise-resolved-with①">4.4.14. Canceling an animation</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-DOMString-to-es">
        <a href="https://webidl.spec.whatwg.org/#DOMString-to-es">https://webidl.spec.whatwg.org/#DOMString-to-es</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-DOMString-to-es">6.6. The KeyframeEffect interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-idl-double">
        <a href="https://webidl.spec.whatwg.org/#idl-double">https://webidl.spec.whatwg.org/#idl-double</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-idl-double">6.2. The AnimationTimeline interface</a> <a
                    href="#ref-for-idl-double①">(2)</a>
            <li><a href="#ref-for-idl-double②">6.4. The Animation interface</a> <a href="#ref-for-idl-double③">(2)</a>
                <a href="#ref-for-idl-double④">(3)</a> <a href="#ref-for-idl-double⑤">(4)</a> <a
                    href="#ref-for-idl-double⑥">(5)</a> <a href="#ref-for-idl-double⑦">(6)</a> <a
                    href="#ref-for-idl-double⑧">(7)</a>
            <li><a href="#ref-for-idl-double⑨">6.5.1. The EffectTiming and OptionalEffectTiming dictionaries</a> <a
                    href="#ref-for-idl-double①⓪">(2)</a> <a href="#ref-for-idl-double①①">(3)</a> <a
                    href="#ref-for-idl-double①②">(4)</a> <a href="#ref-for-idl-double①③">(5)</a> <a
                    href="#ref-for-idl-double①④">(6)</a> <a href="#ref-for-idl-double①⑤">(7)</a> <a
                    href="#ref-for-idl-double①⑥">(8)</a> <a href="#ref-for-idl-double①⑦">(9)</a>
            <li><a href="#ref-for-idl-double①⑧">6.5.5. The ComputedEffectTiming dictionary</a> <a
                    href="#ref-for-idl-double①⑨">(2)</a> <a href="#ref-for-idl-double②⓪">(3)</a> <a
                    href="#ref-for-idl-double②①">(4)</a>
            <li><a href="#ref-for-idl-double②②">6.6. The KeyframeEffect interface</a> <a
                    href="#ref-for-idl-double②③">(2)</a>
            <li><a href="#ref-for-idl-double②④">6.6.3. Processing a keyframes
                    argument</a> <a href="#ref-for-idl-double②⑤">(2)</a> <a href="#ref-for-idl-double②⑥">(3)</a>
            <li><a href="#ref-for-idl-double②⑦">6.12. The AnimationPlaybackEvent interface</a> <a
                    href="#ref-for-idl-double②⑧">(2)</a> <a href="#ref-for-idl-double②⑨">(3)</a> <a
                    href="#ref-for-idl-double③⓪">(4)</a> <a href="#ref-for-idl-double③①">(5)</a> <a
                    href="#ref-for-idl-double③②">(6)</a> <a href="#ref-for-idl-double③③">(7)</a> <a
                    href="#ref-for-idl-double③④">(8)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-es-to-dictionary">
        <a
            href="https://webidl.spec.whatwg.org/#es-to-dictionary">https://webidl.spec.whatwg.org/#es-to-dictionary</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-es-to-dictionary">6.6.3. Processing a keyframes
                    argument</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-es-to-DOMString">
        <a href="https://webidl.spec.whatwg.org/#es-to-DOMString">https://webidl.spec.whatwg.org/#es-to-DOMString</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-es-to-DOMString">6.6.3. Processing a keyframes
                    argument</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dfn-nullable-type">
        <a
            href="https://webidl.spec.whatwg.org/#dfn-nullable-type">https://webidl.spec.whatwg.org/#dfn-nullable-type</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dfn-nullable-type">6.6.3. Processing a keyframes
                    argument</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-idl-object">
        <a href="https://webidl.spec.whatwg.org/#idl-object">https://webidl.spec.whatwg.org/#idl-object</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-idl-object">6.6. The KeyframeEffect interface</a> <a
                    href="#ref-for-idl-object①">(2)</a> <a href="#ref-for-idl-object②">(3)</a>
            <li><a href="#ref-for-idl-object③">6.8. The Animatable interface mixin</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-reject">
        <a href="https://webidl.spec.whatwg.org/#reject">https://webidl.spec.whatwg.org/#reject</a><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-reject">4.4.14. Canceling an animation</a> <a href="#ref-for-reject①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-resolve">
        <a href="https://webidl.spec.whatwg.org/#resolve">https://webidl.spec.whatwg.org/#resolve</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-resolve">4.4.4. Setting the current time of an animation</a>
            <li><a href="#ref-for-resolve①">4.4.5. Setting the start time of an animation</a>
            <li><a href="#ref-for-resolve②">4.4.8. Playing an animation</a>
            <li><a href="#ref-for-resolve③">4.4.9. Pausing an animation</a>
            <li><a href="#ref-for-resolve④">4.4.12. Updating the finished state</a>
            <li><a href="#ref-for-resolve⑤">4.4.13. Finishing an animation</a> <a href="#ref-for-resolve⑥">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-idl-sequence">
        <a href="https://webidl.spec.whatwg.org/#idl-sequence">https://webidl.spec.whatwg.org/#idl-sequence</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-idl-sequence">6.6. The KeyframeEffect interface</a>
            <li><a href="#ref-for-idl-sequence①">6.6.3. Processing a keyframes
                    argument</a> <a href="#ref-for-idl-sequence②">(2)</a> <a href="#ref-for-idl-sequence③">(3)</a>
            <li><a href="#ref-for-idl-sequence④">6.8. The Animatable interface mixin</a>
            <li><a href="#ref-for-idl-sequence⑤">6.10. Extensions to the DocumentOrShadowRoot interface mixin</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-dfn-throw">
        <a href="https://webidl.spec.whatwg.org/#dfn-throw">https://webidl.spec.whatwg.org/#dfn-throw</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dfn-throw">4.4.4. Setting the current time of an animation</a>
            <li><a href="#ref-for-dfn-throw①">4.4.8. Playing an animation</a>
            <li><a href="#ref-for-dfn-throw②">4.4.9. Pausing an animation</a>
            <li><a href="#ref-for-dfn-throw③">4.4.13. Finishing an animation</a>
            <li><a href="#ref-for-dfn-throw④">4.4.16. Reversing an animation</a>
            <li><a href="#ref-for-dfn-throw⑤">6.4. The Animation interface</a> <a href="#ref-for-dfn-throw⑥">(2)</a>
            <li><a href="#ref-for-dfn-throw⑦">6.5.4. Updating the timing of an AnimationEffect</a> <a
                    href="#ref-for-dfn-throw⑧">(2)</a> <a href="#ref-for-dfn-throw⑨">(3)</a> <a
                    href="#ref-for-dfn-throw①⓪">(4)</a>
            <li><a href="#ref-for-dfn-throw①①">6.6. The KeyframeEffect interface</a> <a
                    href="#ref-for-dfn-throw①②">(2)</a>
            <li><a href="#ref-for-dfn-throw①③">6.6.3. Processing a keyframes
                    argument</a> <a href="#ref-for-dfn-throw①④">(2)</a> <a href="#ref-for-dfn-throw①⑤">(3)</a> <a
                    href="#ref-for-dfn-throw①⑥">(4)</a> <a href="#ref-for-dfn-throw①⑦">(5)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-idl-undefined">
        <a href="https://webidl.spec.whatwg.org/#idl-undefined">https://webidl.spec.whatwg.org/#idl-undefined</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-idl-undefined">6.4. The Animation interface</a> <a
                    href="#ref-for-idl-undefined①">(2)</a> <a href="#ref-for-idl-undefined②">(3)</a> <a
                    href="#ref-for-idl-undefined③">(4)</a> <a href="#ref-for-idl-undefined④">(5)</a> <a
                    href="#ref-for-idl-undefined⑤">(6)</a> <a href="#ref-for-idl-undefined⑥">(7)</a> <a
                    href="#ref-for-idl-undefined⑦">(8)</a>
            <li><a href="#ref-for-idl-undefined⑧">6.5. The AnimationEffect interface</a>
            <li><a href="#ref-for-idl-undefined⑨">6.6. The KeyframeEffect interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="term-for-idl-unrestricted-double">
        <a
            href="https://webidl.spec.whatwg.org/#idl-unrestricted-double">https://webidl.spec.whatwg.org/#idl-unrestricted-double</a><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-idl-unrestricted-double">6.5.1. The EffectTiming and OptionalEffectTiming
                    dictionaries</a> <a href="#ref-for-idl-unrestricted-double①">(2)</a> <a
                    href="#ref-for-idl-unrestricted-double②">(3)</a> <a href="#ref-for-idl-unrestricted-double③">(4)</a>
                <a href="#ref-for-idl-unrestricted-double④">(5)</a>
            <li><a href="#ref-for-idl-unrestricted-double⑤">6.5.5. The ComputedEffectTiming dictionary</a> <a
                    href="#ref-for-idl-unrestricted-double⑥">(2)</a> <a href="#ref-for-idl-unrestricted-double⑦">(3)</a>
                <a href="#ref-for-idl-unrestricted-double⑧">(4)</a> <a href="#ref-for-idl-unrestricted-double⑨">(5)</a>
                <a href="#ref-for-idl-unrestricted-double①⓪">(6)</a>
            <li><a href="#ref-for-idl-unrestricted-double①①">6.6. The KeyframeEffect interface</a>
            <li><a href="#ref-for-idl-unrestricted-double①②">6.8. The Animatable interface mixin</a>
        </ul>
    </aside>
    <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">由引用定义的术语</span><a
            class="self-link" href="#index-defined-elsewhere"></a></h3>
    <ul class="index">
        <li>
            <a data-link-type="biblio">[CSS-ANIMATIONS-1]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-propdef-animation-fill-mode">animation-fill-mode</span>
                <li><span class="dfn-paneled" id="term-for-propdef-animation-name">animation-name</span>
                <li><span class="dfn-paneled" id="term-for-events">来自 CSS 动画的事件</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-ANIMATIONS-2]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-cssanimation">CSSAnimation</span>
                <li><span class="dfn-paneled" id="term-for-owning-element">所有元素（动画）</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-BACKGROUNDS-3]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-propdef-background-image">background-image</span>
                <li><span class="dfn-paneled" id="term-for-propdef-background-origin">background-origin</span>
                <li><span class="dfn-paneled" id="term-for-propdef-border-bottom-width">border-bottom-width</span>
                <li><span class="dfn-paneled" id="term-for-propdef-border-color">border-color</span>
                <li><span class="dfn-paneled" id="term-for-propdef-border-left-width">border-left-width</span>
                <li><span class="dfn-paneled" id="term-for-propdef-border-right-width">border-right-width</span>
                <li><span class="dfn-paneled" id="term-for-propdef-border-top">border-top</span>
                <li><span class="dfn-paneled" id="term-for-propdef-border-top-color">border-top-color</span>
                <li><span class="dfn-paneled" id="term-for-propdef-border-top-width">border-top-width</span>
                <li><span class="dfn-paneled" id="term-for-propdef-border-width">border-width</span>
                <li><span class="dfn-paneled" id="term-for-propdef-box-shadow">box-shadow</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-CASCADE-5]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-computed-value">computed value</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-COLOR-4]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-valdef-color-transparent">transparent</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-DISPLAY-3]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-propdef-display">display</span>
                <li><span class="dfn-paneled" id="term-for-propdef-visibility">visibility</span>
                <li><span class="dfn-paneled" id="term-for-valdef-visibility-visible">visible</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-EASING-1]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-typedef-easing-function">&lt;easing-function></span>
                <li><span class="dfn-paneled" id="term-for-before-flag">before flag</span>
                <li><span class="dfn-paneled" id="term-for-input-progress-value">input progress value</span>
                <li><span class="dfn-paneled" id="term-for-linear-easing-function">linear timing function</span>
                <li><span class="dfn-paneled" id="term-for-easing-function">timing function</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-FONTS-4]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-propdef-font-size">font-size</span>
                <li><span class="dfn-paneled" id="term-for-propdef-font-weight">font-weight</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-PROPERTIES-VALUES-API-1]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-dom-css-registerproperty">registerProperty(definition)</span>
                <li><span class="dfn-paneled" id="term-for-syntax-definition">syntax definition</span>
                <li><span class="dfn-paneled" id="term-for-universal-syntax-definition">universal syntax
                        definition</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-SHADOW-PARTS-1]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-selectordef-part">::part()</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-STYLE-ATTR]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-style-attribute">style attribute</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-TEXT-DECOR-4]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-propdef-text-shadow">text-shadow</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-TRANSFORMS-1]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-propdef-transform">transform</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-TRANSITIONS-1]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-after-change-style">after-change style</span>
                <li><span class="dfn-paneled" id="term-for-before-change-style">before-change style</span>
                <li><span class="dfn-paneled" id="term-for-transition-events">来自 CSS 过渡的事件</span>
                <li><span class="dfn-paneled" id="term-for-style-change-event">样式更改事件</span>
                <li><span class="dfn-paneled" id="term-for-transitionend">transitionend</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-TRANSITIONS-2]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-owning-element①">所有元素（过渡）</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-VALUES-4]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-number-value">&lt;number></span>
                <li><span class="dfn-paneled" id="term-for-interpolation">插值</span>
                <li><span class="dfn-paneled" id="term-for-interpolation①">插值</span>
                <li><span class="dfn-paneled" id="term-for-not-additive">不可加</span>
                <li><span class="dfn-paneled" id="term-for-accumulation">值累加</span>
                <li><span class="dfn-paneled" id="term-for-addition">值加法</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-VARIABLES-1]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled"
                        id="term-for-typedef-custom-property-name">&lt;custom-property-name></span>
                <li><span class="dfn-paneled" id="term-for-custom-property">自定义属性</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-WILL-CHANGE-1]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-propdef-will-change">will-change</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-WRITING-MODES-3]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-propdef-direction">direction</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS-WRITING-MODES-4]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-logical-to-physical">对应的物理属性</span>
                <li><span class="dfn-paneled" id="term-for-propdef-writing-mode">writing-mode</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS21]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-x43">堆叠上下文</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSS22]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-propdef-float">float</span>
            </ul>
        <li>
            <a data-link-type="biblio">[CSSOM]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-cssomstring">CSSOMString</span>
                <li><span class="dfn-paneled" id="term-for-css-declaration-block">CSS 声明块</span>
                <li><span class="dfn-paneled" id="term-for-css-property-to-idl-attribute">CSS 属性到 IDL 属性</span>
                <li><span class="dfn-paneled" id="term-for-idl-attribute-to-css-property">IDL 属性到 CSS 属性</span>
                <li><span class="dfn-paneled" id="term-for-cssstyledeclaration-owner-node">所有者节点</span>
                <li><span class="dfn-paneled" id="term-for-serialize-a-css-value">序列化 CSS 值</span>
                <li><span class="dfn-paneled" id="term-for-set-a-css-declaration">设置 CSS 声明</span>
                <li><span class="dfn-paneled" id="term-for-update-style-attribute-for">更新样式属性</span>
            </ul>
        <li>
            <a data-link-type="biblio">[DOM]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-documentorshadowroot">DocumentOrShadowRoot</span>
                <li><span class="dfn-paneled" id="term-for-element">元素</span>
                <li><span class="dfn-paneled" id="term-for-event">事件</span>
                <li><span class="dfn-paneled" id="term-for-dictdef-eventinit">EventInit</span>
                <li><span class="dfn-paneled" id="term-for-eventtarget">EventTarget</span>
                <li><span class="dfn-paneled" id="term-for-connected">已连接</span>
                <li><span class="dfn-paneled" id="term-for-constructing-events">构建事件</span>
                <li><span class="dfn-paneled" id="term-for-concept-event-create">创建事件</span>
                <li><span class="dfn-paneled" id="term-for-concept-tree-descendant">后代</span>
                <li><span class="dfn-paneled" id="term-for-concept-event-dispatch">派发</span>
                <li><span class="dfn-paneled" id="term-for-concept-document">文档</span>
                <li><span class="dfn-paneled" id="term-for-concept-element-attribute-has">具有属性</span>
                <li><span class="dfn-paneled" id="term-for-concept-tree-inclusive-descendant">包含的后代</span>
                <li><span class="dfn-paneled" id="term-for-concept-node-document">节点文档</span>
                <li><span class="dfn-paneled" id="term-for-concept-shadow-root">ShadowRoot</span>
                <li><span class="dfn-paneled" id="term-for-dom-event-type">类型</span>
            </ul>
        <li>
            <a data-link-type="biblio">[ECMASCRIPT]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled"
                        id="term-for-sec-ordinary-object-internal-methods-and-internal-slots-defineownproperty-p-desc">[[defineownproperty]]</span>
                <li><span class="dfn-paneled"
                        id="term-for-sec-ordinary-object-internal-methods-and-internal-slots-get-p-receiver">[[get]]</span>
                <li><span class="dfn-paneled" id="term-for-sec-completion-record-specification-type">完成记录规范类型</span>
                <li><span class="dfn-paneled" id="term-for-sec-enumerableownnames">enumerableownnames</span>
                <li><span class="dfn-paneled" id="term-for-sec-getiterator">getiterator</span>
                <li><span class="dfn-paneled" id="term-for-sec-getmethod">getmethod</span>
                <li><span class="dfn-paneled" id="term-for-sec-iteratorstep">iteratorstep</span>
                <li><span class="dfn-paneled" id="term-for-sec-iteratorvalue">iteratorvalue</span>
                <li><span class="dfn-paneled" id="term-for-sec-promise-objects">promise</span>
                <li><span class="dfn-paneled" id="term-for-sec-promise-objects①">promise 对象</span>
                <li><span class="dfn-paneled" id="term-for-sec-ecmascript-data-types-and-values">类型</span>
                <li><span class="dfn-paneled" id="term-for-sec-well-known-symbols">知名符号</span>
            </ul>
        <li>
            <a data-link-type="biblio">[HR-TIME]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-dom-domhighrestimestamp">DOMHighResTimeStamp</span>
            </ul>
        <li>
            <a data-link-type="biblio">[HTML]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-cereactions">CEReactions</span>
                <li><span class="dfn-paneled" id="term-for-document">文档</span>
                <li><span class="dfn-paneled" id="term-for-eventhandler">EventHandler</span>
                <li><span class="dfn-paneled" id="term-for-window">Window</span>
                <li><span class="dfn-paneled" id="term-for-active-document">活动文档</span>
                <li><span class="dfn-paneled" id="term-for-an-entry-with-persisted-user-state">具有持久用户状态的条目</span>
                <li><span class="dfn-paneled" id="term-for-animation-frames">动画帧回调</span>
                <li><span class="dfn-paneled" id="term-for-being-rendered">正在渲染</span>
                <li><span class="dfn-paneled" id="term-for-current-global-object">当前全局对象</span>
                <li><span class="dfn-paneled" id="term-for-concept-document-window">与窗口关联的文档</span>
                <li><span class="dfn-paneled" id="term-for-dom-document-open">document.open()</span>
                <li><span class="dfn-paneled" id="term-for-dom-manipulation-task-source">DOM 操作任务源</span>
                <li><span class="dfn-paneled" id="term-for-event-loop-processing-model">事件循环处理模型</span>
                <li><span class="dfn-paneled" id="term-for-media-element">媒体元素</span>
                <li><span class="dfn-paneled" id="term-for-perform-a-microtask-checkpoint">执行微任务检查点</span>
                <li><span class="dfn-paneled" id="term-for-queue-a-microtask">排队微任务</span>
                <li><span class="dfn-paneled" id="term-for-queue-a-task">排队任务</span>
                <li><span class="dfn-paneled" id="term-for-concept-relevant-realm">相关领域</span>
                <li><span class="dfn-paneled" id="term-for-run-the-animation-frame-callbacks">运行动画帧回调</span>
                <li><span class="dfn-paneled" id="term-for-session-history-entry">会话历史条目</span>
                <li><span class="dfn-paneled" id="term-for-concept-settings-object-time-origin">时间原点</span>
            </ul>
        <li>
            <a data-link-type="biblio">[INFRA]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-map-exists">存在</span>
                <li><span class="dfn-paneled" id="term-for-list-extend">扩展</span>
                <li><span class="dfn-paneled" id="term-for-list-iterate">迭代</span>
                <li><span class="dfn-paneled" id="term-for-list">列表</span>
                <li><span class="dfn-paneled" id="term-for-ordered-set">有序集</span>
            </ul>
        <li>
            <a data-link-type="biblio">[MOTION-1]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-propdef-offset">偏移</span>
            </ul>
        <li>
            <a data-link-type="biblio">[SELECTORS-4]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled"
                        id="term-for-typedef-pseudo-element-selector">&lt;pseudo-element-selector></span>
                <li><span class="dfn-paneled" id="term-for-invalid-selector">无效选择器</span>
                <li><span class="dfn-paneled" id="term-for-originating-element">起始元素</span>
                <li><span class="dfn-paneled" id="term-for-pseudo-element">伪元素</span>
            </ul>
        <li>
            <a data-link-type="biblio">[SVG2]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-mime-registration">SVG MIME 类型</span>
            </ul>
        <li>
            <a data-link-type="biblio">[WEB-ANIMATIONS-2]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-iteration-composite-operation">迭代合成操作</span>
                <li><span class="dfn-paneled" id="term-for-iteration-composite-operation-accumulate">迭代合成操作累加</span>
            </ul>
        <li>
            <a data-link-type="biblio">[WEBIDL]</a> 定义了以下术语：
            <ul>
                <li><span class="dfn-paneled" id="term-for-idl-DOMException">DOMException</span>
                <li><span class="dfn-paneled" id="term-for-idl-DOMString">DOMString</span>
                <li><span class="dfn-paneled" id="term-for-Exposed">Exposed</span>
                <li><span class="dfn-paneled" id="term-for-invalidstateerror">InvalidStateError</span>
                <li><span class="dfn-paneled" id="term-for-nomodificationallowederror">NoModificationAllowedError</span>
                <li><span class="dfn-paneled" id="term-for-idl-promise">Promise</span>
                <li><span class="dfn-paneled" id="term-for-syntaxerror">SyntaxError</span>
                <li><span class="dfn-paneled" id="term-for-EnforceRange">[EnforceRange]</span>
                <li><span class="dfn-paneled" id="term-for-a-new-promise">新的 Promise</span>
                <li><span class="dfn-paneled" id="term-for-idl-boolean">Boolean</span>
                <li><span class="dfn-paneled" id="term-for-dfn-convert-ecmascript-to-idl-value">将 ECMAScript 转换为 IDL
                        值</span>
                <li><span class="dfn-paneled" id="term-for-a-promise-resolved-with">创建一个已解析的 Promise</span>
                <li><span class="dfn-paneled" id="term-for-DOMString-to-es">DOMString 到 ES</span>
                <li><span class="dfn-paneled" id="term-for-idl-double">Double</span>
                <li><span class="dfn-paneled" id="term-for-es-to-dictionary">ES 到字典</span>
                <li><span class="dfn-paneled" id="term-for-es-to-DOMString">ES 到 DOMString</span>
                <li><span class="dfn-paneled" id="term-for-dfn-nullable-type">可空类型</span>
                <li><span class="dfn-paneled" id="term-for-idl-object">对象</span>
                <li><span class="dfn-paneled" id="term-for-reject">拒绝 Promise</span>
                <li><span class="dfn-paneled" id="term-for-resolve">解析 Promise</span>
                <li><span class="dfn-paneled" id="term-for-idl-sequence">序列</span>
                <li><span class="dfn-paneled" id="term-for-dfn-throw">抛出</span>
                <li><span class="dfn-paneled" id="term-for-idl-undefined">Undefined</span>
                <li><span class="dfn-paneled" id="term-for-idl-unrestricted-double">Unrestricted Double</span>
            </ul>
    </ul>

    <h2 class="no-num no-ref heading settled" id="references"><span class="content">参考文献</span><a class="self-link"
            href="#references"></a></h2>
    <h3 class="no-num no-ref heading settled" id="normative"><span class="content">规范性引用</span><a class="self-link"
            href="#normative"></a></h3>
    <dl>
        <dt id="biblio-css-animations-1">[CSS-ANIMATIONS-1]
        <dd>David Baron 等人. <a href="https://www.w3.org/TR/css-animations-1/"><cite>CSS 动画 第 1 级</cite></a>. 2023年3月2日.
            WD. URL: <a href="https://www.w3.org/TR/css-animations-1/">https://www.w3.org/TR/css-animations-1/</a>
        <dt id="biblio-css-animations-2">[CSS-ANIMATIONS-2]
        <dd>David Baron; Brian Birtles. <a href="https://www.w3.org/TR/css-animations-2/"><cite>CSS 动画 第 2 级</cite></a>.
            2023年3月2日. WD. URL: <a
                href="https://www.w3.org/TR/css-animations-2/">https://www.w3.org/TR/css-animations-2/</a>
        <dt id="biblio-css-backgrounds-3">[CSS-BACKGROUNDS-3]
        <dd>Bert Bos; Elika Etemad; Brad Kemper. <a href="https://www.w3.org/TR/css-backgrounds-3/"><cite>CSS 背景和边框模块 第
                    3 级</cite></a>. 2023年2月14日. CR. URL: <a
                href="https://www.w3.org/TR/css-backgrounds-3/">https://www.w3.org/TR/css-backgrounds-3/</a>
        <dt id="biblio-css-cascade-3">[CSS-CASCADE-3]
        <dd>Elika Etemad; Tab Atkins Jr.. <a href="https://www.w3.org/TR/css-cascade-3/"><cite>CSS 层叠与继承 第 3
                    级</cite></a>. 2021年2月11日. REC. URL: <a
                href="https://www.w3.org/TR/css-cascade-3/">https://www.w3.org/TR/css-cascade-3/</a>
        <dt id="biblio-css-cascade-5">[CSS-CASCADE-5]
        <dd>Elika Etemad; Miriam Suzanne; Tab Atkins Jr.. <a href="https://www.w3.org/TR/css-cascade-5/"><cite>CSS 层叠与继承
                    第 5 级</cite></a>. 2022年1月13日. CR. URL: <a
                href="https://www.w3.org/TR/css-cascade-5/">https://www.w3.org/TR/css-cascade-5/</a>
        <dt id="biblio-css-color-4">[CSS-COLOR-4]
        <dd>Tab Atkins Jr.; Chris Lilley; Lea Verou. <a href="https://www.w3.org/TR/css-color-4/"><cite>CSS 色彩模块 第 4
                    级</cite></a>. 2022年11月1日. CR. URL: <a
                href="https://www.w3.org/TR/css-color-4/">https://www.w3.org/TR/css-color-4/</a>
        <dt id="biblio-css-display-3">[CSS-DISPLAY-3]
        <dd>Elika Etemad; Tab Atkins Jr.. <a href="https://www.w3.org/TR/css-display-3/"><cite>CSS 显示模块 第 3
                    级</cite></a>. 2023年3月30日. CR. URL: <a
                href="https://www.w3.org/TR/css-display-3/">https://www.w3.org/TR/css-display-3/</a>
        <dt id="biblio-css-easing-1">[CSS-EASING-1]
        <dd>Brian Birtles; Dean Jackson; Matt Rakow. <a href="https://www.w3.org/TR/css-easing-1/"><cite>CSS 缓动函数 第 1
                    级</cite></a>. 2023年2月13日. CR. URL: <a
                href="https://www.w3.org/TR/css-easing-1/">https://www.w3.org/TR/css-easing-1/</a>
        <dt id="biblio-css-fonts-4">[CSS-FONTS-4]
        <dd>John Daggett; Myles Maxfield; Chris Lilley. <a href="https://www.w3.org/TR/css-fonts-4/"><cite>CSS 字体模块 第 4
                    级</cite></a>. 2021年12月21日. WD. URL: <a
                href="https://www.w3.org/TR/css-fonts-4/">https://www.w3.org/TR/css-fonts-4/</a>
        <dt id="biblio-css-logical-1">[CSS-LOGICAL-1]
        <dd>Rossen Atanassov; Elika Etemad. <a href="https://www.w3.org/TR/css-logical-1/"><cite>CSS 逻辑属性与值 第 1
                    级</cite></a>. 2018年8月27日. WD. URL: <a
                href="https://www.w3.org/TR/css-logical-1/">https://www.w3.org/TR/css-logical-1/</a>
        <dt id="biblio-css-properties-values-api-1">[CSS-PROPERTIES-VALUES-API-1]
        <dd>Tab Atkins Jr. 等人. <a href="https://www.w3.org/TR/css-properties-values-api-1/"><cite>CSS 属性与值 API 第 1
                    级</cite></a>. 2020年10月13日. WD. URL: <a
                href="https://www.w3.org/TR/css-properties-values-api-1/">https://www.w3.org/TR/css-properties-values-api-1/</a>
        <dt id="biblio-css-shadow-parts-1">[CSS-SHADOW-PARTS-1]
        <dd>Tab Atkins Jr.; Fergal Daly. <a href="https://www.w3.org/TR/css-shadow-parts-1/"><cite>CSS Shadow
                    Parts</cite></a>. 2018年11月15日. WD. URL: <a
                href="https://www.w3.org/TR/css-shadow-parts-1/">https://www.w3.org/TR/css-shadow-parts-1/</a>
        <dt id="biblio-css-style-attr">[CSS-STYLE-ATTR]
        <dd>Tantek Çelik; Elika Etemad. <a href="https://www.w3.org/TR/css-style-attr/"><cite>CSS 样式属性</cite></a>.
            2013年11月7日. REC. URL: <a
                href="https://www.w3.org/TR/css-style-attr/">https://www.w3.org/TR/css-style-attr/</a>
        <dt id="biblio-css-text-decor-4">[CSS-TEXT-DECOR-4]
        <dd>Elika Etemad; Koji Ishii. <a href="https://www.w3.org/TR/css-text-decor-4/"><cite>CSS 文本装饰模块 第 4
                    级</cite></a>. 2022年5月4日. WD. URL: <a
                href="https://www.w3.org/TR/css-text-decor-4/">https://www.w3.org/TR/css-text-decor-4/</a>
        <dt id="biblio-css-transforms-1">[CSS-TRANSFORMS-1]
        <dd>Simon Fraser 等人. <a href="https://www.w3.org/TR/css-transforms-1/"><cite>CSS 变换模块 第 1 级</cite></a>.
            2019年2月14日. CR. URL: <a
                href="https://www.w3.org/TR/css-transforms-1/">https://www.w3.org/TR/css-transforms-1/</a>
        <dt id="biblio-css-transitions-1">[CSS-TRANSITIONS-1]
        <dd>David Baron 等人. <a href="https://www.w3.org/TR/css-transitions-1/"><cite>CSS 过渡</cite></a>. 2018年10月11日. WD.
            URL: <a href="https://www.w3.org/TR/css-transitions-1/">https://www.w3.org/TR/css-transitions-1/</a>
        <dt id="biblio-css-transitions-2">[CSS-TRANSITIONS-2]
        <dd>CSS 过渡 第 2 级 URL: <a
                href="https://drafts.csswg.org/css-transitions-2/">https://drafts.csswg.org/css-transitions-2/</a>
        <dt id="biblio-css-values-4">[CSS-VALUES-4]
        <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://www.w3.org/TR/css-values-4/"><cite>CSS 值与单位模块 第 4
                    级</cite></a>. 2023年4月6日. WD. URL: <a
                href="https://www.w3.org/TR/css-values-4/">https://www.w3.org/TR/css-values-4/</a>
        <dt id="biblio-css-variables-1">[CSS-VARIABLES-1]
        <dd>Tab Atkins Jr.. <a href="https://www.w3.org/TR/css-variables-1/"><cite>CSS 自定义属性级联变量模块 第 1 级</cite></a>.
            2022年6月16日. CR. URL: <a
                href="https://www.w3.org/TR/css-variables-1/">https://www.w3.org/TR/css-variables-1/</a>
        <dt id="biblio-css-will-change-1">[CSS-WILL-CHANGE-1]
        <dd>Tab Atkins Jr.. <a href="https://www.w3.org/TR/css-will-change-1/"><cite>CSS Will Change 模块 第 1
                    级</cite></a>. 2022年5月5日. CR. URL: <a
                href="https://www.w3.org/TR/css-will-change-1/">https://www.w3.org/TR/css-will-change-1/</a>
        <dt id="biblio-css-writing-modes-3">[CSS-WRITING-MODES-3]
        <dd>Elika Etemad; Koji Ishii. <a href="https://www.w3.org/TR/css-writing-modes-3/"><cite>CSS 书写模式 第 3
                    级</cite></a>. 2019年12月10日. REC. URL: <a
                href="https://www.w3.org/TR/css-writing-modes-3/">https://www.w3.org/TR/css-writing-modes-3/</a>
        <dt id="biblio-css-writing-modes-4">[CSS-WRITING-MODES-4]
        <dd>Elika Etemad; Koji Ishii. <a href="https://www.w3.org/TR/css-writing-modes-4/"><cite>CSS 书写模式 第 4
                    级</cite></a>. 2019年7月30日. CR. URL: <a
                href="https://www.w3.org/TR/css-writing-modes-4/">https://www.w3.org/TR/css-writing-modes-4/</a>
        <dt id="biblio-css21">[CSS21]
        <dd>Bert Bos 等人. <a href="https://www.w3.org/TR/CSS21/"><cite>层叠样式表 第 2 级修订 1 (CSS 2.1) 规范</cite></a>.
            2011年6月7日. REC. URL: <a href="https://www.w3.org/TR/CSS21/">https://www.w3.org/TR/CSS21/</a>
        <dt id="biblio-css22">[CSS22]
        <dd>Bert Bos. <a href="https://www.w3.org/TR/CSS22/"><cite>层叠样式表 第 2 级修订 2 (CSS 2.2) 规范</cite></a>. 2016年4月12日.
            WD. URL: <a href="https://www.w3.org/TR/CSS22/">https://www.w3.org/TR/CSS22/</a>
        <dt id="biblio-cssom">[CSSOM]
        <dd>Daniel Glazman; Emilio Cobos Álvarez. <a href="https://www.w3.org/TR/cssom-1/"><cite>CSS 对象模型
                    (CSSOM)</cite></a>. 2021年8月26日. WD. URL: <a
                href="https://www.w3.org/TR/cssom-1/">https://www.w3.org/TR/cssom-1/</a>
        <dt id="biblio-dom">[DOM]
        <dd>Anne van Kesteren. <a href="https://dom.spec.whatwg.org/"><cite>DOM 标准</cite></a>. 现行标准. URL: <a
                href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
        <dt id="biblio-ecmascript">[ECMASCRIPT]
        <dd><a href="https://tc39.es/ecma262/multipage/"><cite>ECMAScript 语言规范</cite></a>. URL: <a
                href="https://tc39.es/ecma262/multipage/">https://tc39.es/ecma262/multipage/</a>
        <dt id="biblio-hr-time">[HR-TIME]
        <dd>Yoav Weiss. <a href="https://www.w3.org/TR/hr-time-3/"><cite>高分辨率时间</cite></a>. 2023年4月25日. WD. URL: <a
                href="https://www.w3.org/TR/hr-time-3/">https://www.w3.org/TR/hr-time-3/</a>
        <dt id="biblio-html">[HTML]
        <dd>Anne van Kesteren 等人. <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML 标准</cite></a>. 现行标准. URL:
            <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
        <dt id="biblio-infra">[INFRA]
        <dd>Anne van Kesteren; Domenic Denicola. <a href="https://infra.spec.whatwg.org/"><cite>Infra
                    标准</cite></a>. 现行标准. URL: <a
                href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
        <dt id="biblio-media-frags">[MEDIA-FRAGS]
        <dd>Raphaël Troncy 等人. <a href="https://www.w3.org/TR/media-frags/"><cite>媒体片段 URI 1.0 (基础)</cite></a>.
            2012年9月25日. REC. URL: <a href="https://www.w3.org/TR/media-frags/">https://www.w3.org/TR/media-frags/</a>
        <dt id="biblio-motion-1">[MOTION-1]
        <dd>Dirk Schulze 等人. <a href="https://www.w3.org/TR/motion-1/"><cite>运动路径模块 第 1 级</cite></a>. 2018年12月18日. WD.
            URL: <a href="https://www.w3.org/TR/motion-1/">https://www.w3.org/TR/motion-1/</a>
        <dt id="biblio-rfc2119">[RFC2119]
        <dd>S. Bradner. <a href="https://datatracker.ietf.org/doc/html/rfc2119"><cite>RFC 中用于表示要求级别的关键词</cite></a>.
            1997年3月. 最佳现行做法. URL: <a
                href="https://datatracker.ietf.org/doc/html/rfc2119">https://datatracker.ietf.org/doc/html/rfc2119</a>
        <dt id="biblio-select">[SELECT]
        <dd>Tantek Çelik 等人. <a href="https://www.w3.org/TR/selectors-3/"><cite>选择器 第 3 级</cite></a>. 2018年11月6日. REC.
            URL: <a href="https://www.w3.org/TR/selectors-3/">https://www.w3.org/TR/selectors-3/</a>
        <dt id="biblio-selectors-4">[SELECTORS-4]
        <dd>Elika Etemad; Tab Atkins Jr.. <a href="https://www.w3.org/TR/selectors-4/"><cite>选择器 第 4 级</cite></a>.
            2022年11月11日. WD. URL: <a href="https://www.w3.org/TR/selectors-4/">https://www.w3.org/TR/selectors-4/</a>
        <dt id="biblio-svg11">[SVG11]
        <dd>Erik Dahlström 等人. <a href="https://www.w3.org/TR/SVG11/"><cite>可缩放矢量图形 (SVG) 1.1 (第二版)</cite></a>.
            2011年8月16日. REC. URL: <a href="https://www.w3.org/TR/SVG11/">https://www.w3.org/TR/SVG11/</a>
        <dt id="biblio-svg2">[SVG2]
        <dd>Amelia Bellamy-Royds 等人. <a href="https://www.w3.org/TR/SVG2/"><cite>可缩放矢量图形 (SVG) 2</cite></a>. 2018年10月4日.
            CR. URL: <a href="https://www.w3.org/TR/SVG2/">https://www.w3.org/TR/SVG2/</a>
        <dt id="biblio-web-animations-2">[WEB-ANIMATIONS-2]
        <dd>Brian Birtles; Robert Flack. <a href="https://www.w3.org/TR/web-animations-2/"><cite>Web 动画 第 2
                    级</cite></a>. 2023年2月21日. WD. URL: <a
                href="https://www.w3.org/TR/web-animations-2/">https://www.w3.org/TR/web-animations-2/</a>
        <dt id="biblio-webidl">[WEBIDL]
        <dd>Edgar Chen; Timothy Gu. <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL 标准</cite></a>. 现行标准. URL: <a
                href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
    </dl>

    <h3 class="no-num no-ref heading settled" id="informative"><span class="content">参考资料</span><a class="self-link"
            href="#informative"></a></h3>
    <dl>
        <dt id="biblio-smil-animation">[SMIL-ANIMATION]
        <dd>Patrick Schmitz; Aaron Cohen. <a href="https://www.w3.org/TR/smil-animation/"><cite>SMIL
                    动画</cite></a>. 2001年9月4日. REC. URL: <a
                href="https://www.w3.org/TR/smil-animation/">https://www.w3.org/TR/smil-animation/</a>
    </dl>
    <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL 索引</span><a class="self-link"
            href="#idl-index"></a></h2>
    <pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <a href="#animationtimeline"><code><c- g>AnimationTimeline</c-></code></a> {
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double"><c- b>double</c-></a>? <a class="idl-code" data-link-type="attribute" data-readonly data-type="double?" href="#dom-animationtimeline-currenttime"><c- g>currentTime</c-></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-documenttimelineoptions"><code><c- g>DocumentTimelineOptions</c-></code></a> {
  <a data-link-type="idl-name" href="https://www.w3.org/TR/hr-time-3/#dom-domhighrestimestamp"><c- n>DOMHighResTimeStamp</c-></a> <a class="idl-code" data-default="0" data-link-type="dict-member" data-type="DOMHighResTimeStamp " href="#dom-documenttimelineoptions-origintime"><c- g>originTime</c-></a> = 0;
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <a href="#documenttimeline"><code><c- g>DocumentTimeline</c-></code></a> : <a data-link-type="idl-name" href="#animationtimeline"><c- n>AnimationTimeline</c-></a> {
  <a class="idl-code" data-link-type="constructor" href="#dom-documenttimeline-documenttimeline"><c- g>constructor</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-documenttimelineoptions"><c- n>DocumentTimelineOptions</c-></a> <a class="idl-code" data-link-type="argument" href="#dom-documenttimeline-documenttimeline-options-options"><c- g>options</c-></a> = {});
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <a href="#animation"><code><c- g>Animation</c-></code></a> : <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#eventtarget"><c- n>EventTarget</c-></a> {
    <a class="idl-code" data-link-type="constructor" href="#dom-animation-animation"><c- g>constructor</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#animationeffect"><c- n>AnimationEffect</c-></a>? <a class="idl-code" data-link-type="argument" href="#dom-animation-animation-effect-timeline-effect"><c- g>effect</c-></a> = <c- b>null</c->,
                <c- b>optional</c-> <a data-link-type="idl-name" href="#animationtimeline"><c- n>AnimationTimeline</c-></a>? <a class="idl-code" data-link-type="argument" href="#dom-animation-animation-effect-timeline-timeline"><c- g>timeline</c-></a>);
             <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a>                <a class="idl-code" data-link-type="attribute" data-type="DOMString" href="#dom-animation-id"><c- g>id</c-></a>;
             <c- b>attribute</c-> <a data-link-type="idl-name" href="#animationeffect"><c- n>AnimationEffect</c-></a>?         <a class="idl-code" data-link-type="attribute" data-type="AnimationEffect?" href="#dom-animation-effect"><c- g>effect</c-></a>;
             <c- b>attribute</c-> <a data-link-type="idl-name" href="#animationtimeline"><c- n>AnimationTimeline</c-></a>?       <a class="idl-code" data-link-type="attribute" data-type="AnimationTimeline?" href="#dom-animation-timeline"><c- g>timeline</c-></a>;
             <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double"><c- b>double</c-></a>?                  <a class="idl-code" data-link-type="attribute" data-type="double?" href="#dom-animation-starttime"><c- g>startTime</c-></a>;
             <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double"><c- b>double</c-></a>?                  <a class="idl-code" data-link-type="attribute" data-type="double?" href="#dom-animation-currenttime"><c- g>currentTime</c-></a>;
             <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double"><c- b>double</c-></a>                   <a class="idl-code" data-link-type="attribute" data-type="double" href="#dom-animation-playbackrate"><c- g>playbackRate</c-></a>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#enumdef-animationplaystate"><c- n>AnimationPlayState</c-></a>       <a class="idl-code" data-link-type="attribute" data-readonly data-type="AnimationPlayState" href="#dom-animation-playstate"><c- g>playState</c-></a>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#enumdef-animationreplacestate"><c- n>AnimationReplaceState</c-></a>    <a class="idl-code" data-link-type="attribute" data-readonly data-type="AnimationReplaceState" href="#dom-animation-replacestate"><c- g>replaceState</c-></a>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a>                  <a class="idl-code" data-link-type="attribute" data-readonly data-type="boolean" href="#dom-animation-pending"><c- g>pending</c-></a>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#animation"><c- n>Animation</c-></a>>       <a class="idl-code" data-link-type="attribute" data-readonly data-type="Promise<Animation>" href="#dom-animation-ready"><c- g>ready</c-></a>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#animation"><c- n>Animation</c-></a>>       <a class="idl-code" data-link-type="attribute" data-readonly data-type="Promise<Animation>" href="#dom-animation-finished"><c- g>finished</c-></a>;
             <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><c- n>EventHandler</c-></a>             <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-animation-onfinish"><c- g>onfinish</c-></a>;
             <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><c- n>EventHandler</c-></a>             <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-animation-oncancel"><c- g>oncancel</c-></a>;
             <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler"><c- n>EventHandler</c-></a>             <a class="idl-code" data-link-type="attribute" data-type="EventHandler" href="#dom-animation-onremove"><c- g>onremove</c-></a>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-animation-cancel"><c- g>cancel</c-></a>();
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-animation-finish"><c- g>finish</c-></a>();
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-animation-play"><c- g>play</c-></a>();
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-animation-pause"><c- g>pause</c-></a>();
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-animation-updateplaybackrate"><c- g>updatePlaybackRate</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double"><c- b>double</c-></a> <a class="idl-code" data-link-type="argument" href="#dom-animation-updateplaybackrate-playbackrate-playbackrate"><c- g>playbackRate</c-></a>);
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-animation-reverse"><c- g>reverse</c-></a>();
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-animation-persist"><c- g>persist</c-></a>();
    [<a class="idl-code" data-link-type="extended-attribute" href="https://html.spec.whatwg.org/multipage/custom-elements.html#cereactions"><c- g>CEReactions</c-></a>]
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-animation-commitstyles"><c- g>commitStyles</c-></a>();
};

<c- b>enum</c-> <a href="#enumdef-animationplaystate"><code><c- g>AnimationPlayState</c-></code></a> { <a href="#dom-animationplaystate-idle"><code><c- s>"idle"</c-></code></a>, <a href="#dom-animationplaystate-running"><code><c- s>"running"</c-></code></a>, <a href="#dom-animationplaystate-paused"><code><c- s>"paused"</c-></code></a>, <a href="#dom-animationplaystate-finished"><code><c- s>"finished"</c-></code></a> };

<c- b>enum</c-> <a href="#enumdef-animationreplacestate"><code><c- g>AnimationReplaceState</c-></code></a> { <a href="#dom-animationreplacestate-active"><code><c- s>"active"</c-></code></a>, <a href="#dom-animationreplacestate-removed"><code><c- s>"removed"</c-></code></a>, <a href="#dom-animationreplacestate-persisted"><code><c- s>"persisted"</c-></code></a> };

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <a href="#animationeffect"><code><c- g>AnimationEffect</c-></code></a> {
    <a data-link-type="idl-name" href="#dictdef-effecttiming"><c- n>EffectTiming</c-></a>         <a class="idl-code" data-link-type="method" href="#dom-animationeffect-gettiming"><c- g>getTiming</c-></a>();
    <a data-link-type="idl-name" href="#dictdef-computedeffecttiming"><c- n>ComputedEffectTiming</c-></a> <a class="idl-code" data-link-type="method" href="#dom-animationeffect-getcomputedtiming"><c- g>getComputedTiming</c-></a>();
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a>            <a class="idl-code" data-link-type="method" href="#dom-animationeffect-updatetiming"><c- g>updateTiming</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-optionaleffecttiming"><c- n>OptionalEffectTiming</c-></a> <a class="idl-code" data-link-type="argument" href="#dom-animationeffect-updatetiming-timing-timing"><c- g>timing</c-></a> = {});
};

<c- b>dictionary</c-> <a href="#dictdef-effecttiming"><code><c- g>EffectTiming</c-></code></a> {
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double"><c- b>double</c-></a>                             <a class="idl-code" data-default="0" data-link-type="dict-member" data-type="double                             " href="#dom-effecttiming-delay"><c- g>delay</c-></a> = 0;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double"><c- b>double</c-></a>                             <a class="idl-code" data-default="0" data-link-type="dict-member" data-type="double                             " href="#dom-effecttiming-enddelay"><c- g>endDelay</c-></a> = 0;
    <a data-link-type="idl-name" href="#enumdef-fillmode"><c- n>FillMode</c-></a>                           <a class="idl-code" data-default="&quot;auto&quot;" data-link-type="dict-member" data-type="FillMode                           " href="#dom-effecttiming-fill"><c- g>fill</c-></a> = "auto";
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double"><c- b>double</c-></a>                             <a class="idl-code" data-default="0.0" data-link-type="dict-member" data-type="double                             " href="#dom-effecttiming-iterationstart"><c- g>iterationStart</c-></a> = 0.0;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unrestricted-double"><c- b>unrestricted</c-> <c- b>double</c-></a>                <a class="idl-code" data-default="1.0" data-link-type="dict-member" data-type="unrestricted double                " href="#dom-effecttiming-iterations"><c- g>iterations</c-></a> = 1.0;
    (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unrestricted-double"><c- b>unrestricted</c-> <c- b>double</c-></a> <c- b>or</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a>) <a class="idl-code" data-default="&quot;auto&quot;" data-link-type="dict-member" data-type="(unrestricted double or DOMString) " href="#dom-effecttiming-duration"><c- g>duration</c-></a> = "auto";
    <a data-link-type="idl-name" href="#enumdef-playbackdirection"><c- n>PlaybackDirection</c-></a>                  <a class="idl-code" data-default="&quot;normal&quot;" data-link-type="dict-member" data-type="PlaybackDirection                  " href="#dom-effecttiming-direction"><c- g>direction</c-></a> = "normal";
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a>                          <a class="idl-code" data-default="&quot;linear&quot;" data-link-type="dict-member" data-type="DOMString                          " href="#dom-effecttiming-easing"><c- g>easing</c-></a> = "linear";
};

<c- b>dictionary</c-> <a href="#dictdef-optionaleffecttiming"><code><c- g>OptionalEffectTiming</c-></code></a> {
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double"><c- b>double</c-></a>                             <a class="idl-code" data-link-type="dict-member" data-type="double                             " href="#dom-optionaleffecttiming-delay"><c- g>delay</c-></a>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double"><c- b>double</c-></a>                             <a class="idl-code" data-link-type="dict-member" data-type="double                             " href="#dom-optionaleffecttiming-enddelay"><c- g>endDelay</c-></a>;
    <a data-link-type="idl-name" href="#enumdef-fillmode"><c- n>FillMode</c-></a>                           <a class="idl-code" data-link-type="dict-member" data-type="FillMode                           " href="#dom-optionaleffecttiming-fill"><c- g>fill</c-></a>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double"><c- b>double</c-></a>                             <a class="idl-code" data-link-type="dict-member" data-type="double                             " href="#dom-optionaleffecttiming-iterationstart"><c- g>iterationStart</c-></a>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unrestricted-double"><c- b>unrestricted</c-> <c- b>double</c-></a>                <a class="idl-code" data-link-type="dict-member" data-type="unrestricted double                " href="#dom-optionaleffecttiming-iterations"><c- g>iterations</c-></a>;
    (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unrestricted-double"><c- b>unrestricted</c-> <c- b>double</c-></a> <c- b>or</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a>) <a class="idl-code" data-link-type="dict-member" data-type="(unrestricted double or DOMString) " href="#dom-optionaleffecttiming-duration"><c- g>duration</c-></a>;
    <a data-link-type="idl-name" href="#enumdef-playbackdirection"><c- n>PlaybackDirection</c-></a>                  <a class="idl-code" data-link-type="dict-member" data-type="PlaybackDirection                  " href="#dom-optionaleffecttiming-direction"><c- g>direction</c-></a>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a>                          <a class="idl-code" data-link-type="dict-member" data-type="DOMString                          " href="#dom-optionaleffecttiming-easing"><c- g>easing</c-></a>;
};

<c- b>enum</c-> <a href="#enumdef-fillmode"><code><c- g>FillMode</c-></code></a> { <a href="#dom-fillmode-none"><code><c- s>"none"</c-></code></a>, <a href="#dom-fillmode-forwards"><code><c- s>"forwards"</c-></code></a>, <a href="#dom-fillmode-backwards"><code><c- s>"backwards"</c-></code></a>, <a href="#dom-fillmode-both"><code><c- s>"both"</c-></code></a>, <a href="#dom-fillmode-auto"><code><c- s>"auto"</c-></code></a> };

<c- b>enum</c-> <a href="#enumdef-playbackdirection"><code><c- g>PlaybackDirection</c-></code></a> { <a href="#dom-playbackdirection-normal"><code><c- s>"normal"</c-></code></a>, <a href="#dom-playbackdirection-reverse"><code><c- s>"reverse"</c-></code></a>, <a href="#dom-playbackdirection-alternate"><code><c- s>"alternate"</c-></code></a>, <a href="#dom-playbackdirection-alternate-reverse"><code><c- s>"alternate-reverse"</c-></code></a> };

<c- b>dictionary</c-> <a href="#dictdef-computedeffecttiming"><code><c- g>ComputedEffectTiming</c-></code></a> : <a data-link-type="idl-name" href="#dictdef-effecttiming"><c- n>EffectTiming</c-></a> {
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unrestricted-double"><c- b>unrestricted</c-> <c- b>double</c-></a>  <a class="idl-code" data-link-type="dict-member" data-type="unrestricted double  " href="#dom-computedeffecttiming-endtime"><c- g>endTime</c-></a>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unrestricted-double"><c- b>unrestricted</c-> <c- b>double</c-></a>  <a class="idl-code" data-link-type="dict-member" data-type="unrestricted double  " href="#dom-computedeffecttiming-activeduration"><c- g>activeDuration</c-></a>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double"><c- b>double</c-></a>?              <a class="idl-code" data-link-type="dict-member" data-type="double?              " href="#dom-computedeffecttiming-localtime"><c- g>localTime</c-></a>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double"><c- b>double</c-></a>?              <a class="idl-code" data-link-type="dict-member" data-type="double?              " href="#dom-computedeffecttiming-progress"><c- g>progress</c-></a>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unrestricted-double"><c- b>unrestricted</c-> <c- b>double</c-></a>? <a class="idl-code" data-link-type="dict-member" data-type="unrestricted double? " href="#dom-computedeffecttiming-currentiteration"><c- g>currentIteration</c-></a>;
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <a href="#keyframeeffect"><code><c- g>KeyframeEffect</c-></code></a> : <a data-link-type="idl-name" href="#animationeffect"><c- n>AnimationEffect</c-></a> {
    <a class="idl-code" data-link-type="constructor" href="#dom-keyframeeffect-keyframeeffect"><c- g>constructor</c-></a>(<a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element"><c- n>Element</c-></a>? <a class="idl-code" data-link-type="argument" href="#dom-keyframeeffect-keyframeeffect-target-keyframes-options-target"><c- g>target</c-></a>,
                <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-object"><c- b>object</c-></a>? <a class="idl-code" data-link-type="argument" href="#dom-keyframeeffect-keyframeeffect-target-keyframes-options-keyframes"><c- g>keyframes</c-></a>,
                <c- b>optional</c-> (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unrestricted-double"><c- b>unrestricted</c-> <c- b>double</c-></a> <c- b>or</c-> <a data-link-type="idl-name" href="#dictdef-keyframeeffectoptions"><c- n>KeyframeEffectOptions</c-></a>) <a class="idl-code" data-link-type="argument" href="#dom-keyframeeffect-keyframeeffect-target-keyframes-options-options"><c- g>options</c-></a> = {});
    <a class="idl-code" data-link-type="constructor" href="#dom-keyframeeffect-keyframeeffect-source"><c- g>constructor</c-></a>(<a data-link-type="idl-name" href="#keyframeeffect"><c- n>KeyframeEffect</c-></a> <a class="idl-code" data-link-type="argument" href="#dom-keyframeeffect-keyframeeffect-source-source"><c- g>source</c-></a>);
    <c- b>attribute</c-> <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element"><c- n>Element</c-></a>?           <a class="idl-code" data-link-type="attribute" data-type="Element?" href="#dom-keyframeeffect-target"><c- g>target</c-></a>;
    <c- b>attribute</c-> <a data-link-type="idl-name" href="https://www.w3.org/TR/cssom-1/#cssomstring"><c- n>CSSOMString</c-></a>?       <a class="idl-code" data-link-type="attribute" data-type="CSSOMString?" href="#dom-keyframeeffect-pseudoelement"><c- g>pseudoElement</c-></a>;
    <c- b>attribute</c-> <a data-link-type="idl-name" href="#enumdef-compositeoperation"><c- n>CompositeOperation</c-></a> <a class="idl-code" data-link-type="attribute" data-type="CompositeOperation" href="#dom-keyframeeffect-composite"><c- g>composite</c-></a>;
    <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-object"><c- b>object</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-keyframeeffect-getkeyframes"><c- g>getKeyframes</c-></a>();
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a>        <a class="idl-code" data-link-type="method" href="#dom-keyframeeffect-setkeyframes"><c- g>setKeyframes</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-object"><c- b>object</c-></a>? <a href="#dom-keyframeeffect-setkeyframes-keyframes-keyframes"><code><c- g>keyframes</c-></code></a>);
};

<c- b>dictionary</c-> <a href="#dictdef-basecomputedkeyframe"><code><c- g>BaseComputedKeyframe</c-></code></a> {
     <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double"><c- b>double</c-></a>?                  <a data-default="null" data-type="double?                  " href="#dom-basecomputedkeyframe-offset"><code><c- g>offset</c-></code></a> = <c- b>null</c->;
     <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double"><c- b>double</c-></a>                   <a data-type="double                   " href="#dom-basecomputedkeyframe-computedoffset"><code><c- g>computedOffset</c-></code></a>;
     <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a>                <a data-default="&quot;linear&quot;" data-type="DOMString                " href="#dom-basecomputedkeyframe-easing"><code><c- g>easing</c-></code></a> = "linear";
     <a data-link-type="idl-name" href="#enumdef-compositeoperationorauto"><c- n>CompositeOperationOrAuto</c-></a> <a data-default="&quot;auto&quot;" data-type="CompositeOperationOrAuto " href="#dom-basecomputedkeyframe-composite"><code><c- g>composite</c-></code></a> = "auto";
};

<c- b>dictionary</c-> <a href="#dictdef-basepropertyindexedkeyframe"><code><c- g>BasePropertyIndexedKeyframe</c-></code></a> {
    (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double"><c- b>double</c-></a>? <c- b>or</c-> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double"><c- b>double</c-></a>?>)                         <a data-default="[]" data-type="(double? or sequence<double?>)                         " href="#dom-basepropertyindexedkeyframe-offset"><code><c- g>offset</c-></code></a> = [];
    (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <c- b>or</c-> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a>>)                     <a data-default="[]" data-type="(DOMString or sequence<DOMString>)                     " href="#dom-basepropertyindexedkeyframe-easing"><code><c- g>easing</c-></code></a> = [];
    (<a data-link-type="idl-name" href="#enumdef-compositeoperationorauto"><c- n>CompositeOperationOrAuto</c-></a> <c- b>or</c-> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#enumdef-compositeoperationorauto"><c- n>CompositeOperationOrAuto</c-></a>>) <a data-default="[]" data-type="(CompositeOperationOrAuto or sequence<CompositeOperationOrAuto>) " href="#dom-basepropertyindexedkeyframe-composite"><code><c- g>composite</c-></code></a> = [];
};

<c- b>dictionary</c-> <a href="#dictdef-basekeyframe"><code><c- g>BaseKeyframe</c-></code></a> {
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double"><c- b>double</c-></a>?                  <a data-default="null" data-type="double?                  " href="#dom-basekeyframe-offset"><code><c- g>offset</c-></code></a> = <c- b>null</c->;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a>                <a data-default="&quot;linear&quot;" data-type="DOMString                " href="#dom-basekeyframe-easing"><code><c- g>easing</c-></code></a> = "linear";
    <a data-link-type="idl-name" href="#enumdef-compositeoperationorauto"><c- n>CompositeOperationOrAuto</c-></a> <a data-default="&quot;auto&quot;" data-type="CompositeOperationOrAuto " href="#dom-basekeyframe-composite"><code><c- g>composite</c-></code></a> = "auto";
};

<c- b>dictionary</c-> <a href="#dictdef-keyframeeffectoptions"><code><c- g>KeyframeEffectOptions</c-></code></a> : <a data-link-type="idl-name" href="#dictdef-effecttiming"><c- n>EffectTiming</c-></a> {
    <a data-link-type="idl-name" href="#enumdef-compositeoperation"><c- n>CompositeOperation</c-></a> <a class="idl-code" data-default="&quot;replace&quot;" data-link-type="dict-member" data-type="CompositeOperation " href="#dom-keyframeeffectoptions-composite"><c- g>composite</c-></a> = "replace";
    <a data-link-type="idl-name" href="https://www.w3.org/TR/cssom-1/#cssomstring"><c- n>CSSOMString</c-></a>?       <a class="idl-code" data-default="null" data-link-type="dict-member" data-type="CSSOMString?       " href="#dom-keyframeeffectoptions-pseudoelement"><c- g>pseudoElement</c-></a> = <c- b>null</c->;
};

<c- b>enum</c-> <a href="#enumdef-compositeoperation"><code><c- g>CompositeOperation</c-></code></a> { <a class="idl-code" data-link-type="enum-value" href="#dom-compositeoperation-replace"><c- s>"replace"</c-></a>, <a class="idl-code" data-link-type="enum-value" href="#dom-compositeoperation-add"><c- s>"add"</c-></a>, <a class="idl-code" data-link-type="enum-value" href="#dom-compositeoperation-accumulate"><c- s>"accumulate"</c-></a> };

<c- b>enum</c-> <a href="#enumdef-compositeoperationorauto"><code><c- g>CompositeOperationOrAuto</c-></code></a> { <a class="idl-code" data-link-type="enum-value" href="#dom-compositeoperation-replace"><c- s>"replace"</c-></a>, <a class="idl-code" data-link-type="enum-value" href="#dom-compositeoperation-add"><c- s>"add"</c-></a>, <a class="idl-code" data-link-type="enum-value" href="#dom-compositeoperation-accumulate"><c- s>"accumulate"</c-></a>, <a class="idl-code" data-link-type="enum-value" href="#dom-compositeoperationorauto-auto"><c- s>"auto"</c-></a> };

<c- b>interface</c-> <c- b>mixin</c-> <a href="#animatable"><code><c- g>Animatable</c-></code></a> {
    <a data-link-type="idl-name" href="#animation"><c- n>Animation</c-></a>           <a class="idl-code" data-link-type="method" href="#dom-animatable-animate"><c- g>animate</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-object"><c- b>object</c-></a>? <a class="idl-code" data-link-type="argument" href="#dom-animatable-animate-keyframes-options-keyframes"><c- g>keyframes</c-></a>,
                                <c- b>optional</c-> (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unrestricted-double"><c- b>unrestricted</c-> <c- b>double</c-></a> <c- b>or</c-> <a data-link-type="idl-name" href="#dictdef-keyframeanimationoptions"><c- n>KeyframeAnimationOptions</c-></a>) <a class="idl-code" data-link-type="argument" href="#dom-animatable-animate-keyframes-options-options"><c- g>options</c-></a> = {});
    <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#animation"><c- n>Animation</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-animatable-getanimations"><c- g>getAnimations</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-getanimationsoptions"><c- n>GetAnimationsOptions</c-></a> <a class="idl-code" data-link-type="argument" href="#dom-animatable-getanimations-options-options"><c- g>options</c-></a> = {});
};

<c- b>dictionary</c-> <a href="#dictdef-keyframeanimationoptions"><code><c- g>KeyframeAnimationOptions</c-></code></a> : <a data-link-type="idl-name" href="#dictdef-keyframeeffectoptions"><c- n>KeyframeEffectOptions</c-></a> {
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a class="idl-code" data-default="&quot;&quot;" data-link-type="dict-member" data-type="DOMString " href="#dom-keyframeanimationoptions-id"><c- g>id</c-></a> = "";
    <a data-link-type="idl-name" href="#animationtimeline"><c- n>AnimationTimeline</c-></a>? <a class="idl-code" data-link-type="dict-member" data-type="AnimationTimeline? " href="#dom-keyframeanimationoptions-timeline"><c- g>timeline</c-></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-getanimationsoptions"><code><c- g>GetAnimationsOptions</c-></code></a> {
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a class="idl-code" data-default="false" data-link-type="dict-member" data-type="boolean " href="#dom-getanimationsoptions-subtree"><c- g>subtree</c-></a> = <c- b>false</c->;
};

<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/#document"><c- g>Document</c-></a> {
    <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#documenttimeline"><c- n>DocumentTimeline</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="DocumentTimeline" href="#dom-document-timeline"><c- g>timeline</c-></a>;
};

<c- b>partial</c-> <c- b>interface</c-> <c- b>mixin</c-> <a class="idl-code" data-link-type="interface" href="https://dom.spec.whatwg.org/#documentorshadowroot"><c- g>DocumentOrShadowRoot</c-></a> {
    <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#animation"><c- n>Animation</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-documentorshadowroot-getanimations"><c- g>getAnimations</c-></a>();
};

<a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#element"><c- n>Element</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="#animatable"><c- n>Animatable</c-></a>;

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <a href="#animationplaybackevent"><code><c- g>AnimationPlaybackEvent</c-></code></a> : <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#event"><c- n>Event</c-></a> {
    <a class="idl-code" data-link-type="constructor" href="#dom-animationplaybackevent-animationplaybackevent"><c- g>constructor</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a href="#dom-animationplaybackevent-animationplaybackevent-type-eventinitdict-type"><code><c- g>type</c-></code></a>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-animationplaybackeventinit"><c- n>AnimationPlaybackEventInit</c-></a> <a href="#dom-animationplaybackevent-animationplaybackevent-type-eventinitdict-eventinitdict"><code><c- g>eventInitDict</c-></code></a> = {});
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double"><c- b>double</c-></a>? <a class="idl-code" data-link-type="attribute" data-readonly data-type="double?" href="#dom-animationplaybackevent-currenttime"><c- g>currentTime</c-></a>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double"><c- b>double</c-></a>? <a class="idl-code" data-link-type="attribute" data-readonly data-type="double?" href="#dom-animationplaybackevent-timelinetime"><c- g>timelineTime</c-></a>;
};
<c- b>dictionary</c-> <a href="#dictdef-animationplaybackeventinit"><code><c- g>AnimationPlaybackEventInit</c-></code></a> : <a data-link-type="idl-name" href="https://dom.spec.whatwg.org/#dictdef-eventinit"><c- n>EventInit</c-></a> {
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double"><c- b>double</c-></a>? <a class="idl-code" data-default="null" data-link-type="dict-member" data-type="double? " href="#dom-animationplaybackeventinit-currenttime"><c- g>currentTime</c-></a> = <c- b>null</c->;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double"><c- b>double</c-></a>? <a class="idl-code" data-default="null" data-link-type="dict-member" data-type="double? " href="#dom-animationplaybackeventinit-timelinetime"><c- g>timelineTime</c-></a> = <c- b>null</c->;
};

</pre>
    <h2 class="no-num no-ref heading settled" id="issues-index"><span class="content">问题索引</span><a class="self-link"
            href="#issues-index"></a></h2>
    <div style="counter-reset:issue">
        <div class="issue"> 应该有一个比“origin time”更好的术语——
            它与“time origin”太相似了。<a href="https://github.com/w3c/csswg-drafts/issues/2079">[问题
                #2079]</a> <a class="issue-return" href="#issue-9fa706cb" title="跳到章节">↵</a></div>
        <div class="issue">
            在某些计时函数存在的情况下，动画效果的输入迭代进度并不限于[0, 1]范围。
            但是，目前关键帧偏移<em>确实</em>限于[0, 1]范围，并且属性值只是为超出此范围的输入迭代进度值外推。
            <p>我们曾考虑取消此限制，因为在某些情况下，能够在[0, 1]范围外指定非线性属性值变化是有用的。
                一个例子是一个从绿色到黄色插值的动画，但有一个过冲计时函数，使得它暂时插值“超出”黄色到红色，然后再回到黄色。</p>
            <p>虽然可以通过修改关键帧和计时函数来实现此效果，但这种方法似乎打破了模型将计时问题与动画效果分离的原则。</p>
            <p>目前尚不清楚应该如何实现这种效果，但我们注意到允许关键帧偏移超出[0, 1]范围可能会使当前指定的行为（在必要时综合偏移为0和1的关键帧）不一致。</p>
            <p>请参阅<a href="https://lists.w3.org/Archives/Public/public-fx/2013AprJun/0184.html">2013年东京F2F会议中讨论的第4节（[0,
                    1]范围外的关键帧偏移）</a>。</p>
            <p><a
                    href="https://github.com/w3c/csswg-drafts/issues/2081">&lt;https://github.com/w3c/csswg-drafts/issues/2081></a>
            </p>
            <a class="issue-return" href="#issue-9e46aa87" title="跳到章节">↵</a>
        </div>
        <div class="issue">
            <p>关于<a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/browsers.html#being-rendered">being rendered</a> <a
                    data-link-type="biblio" href="#biblio-html">[HTML]</a>对于<a class="css" data-link-type="propdesc"
                    href="https://www.w3.org/TR/css-display-3/#propdef-display">display:
                    contents</a>的定义仍然在<a href="https://github.com/whatwg/html/issues/1837">讨论中</a>。
                在此过程的目的下，我们假设一个具有<span class="css">display: contents</span>的元素如果在其他情况下会有相关布局框（即它是<a data-link-type="dfn"
                    href="https://dom.spec.whatwg.org/#connected">连接的</a>且不属于
                <span class="css">display: none</span>子树）<em>正在渲染</em>。
            </p>
            <a class="issue-return" href="#issue-8f3b970c" title="跳到章节">↵</a>
        </div>
        <div class="issue"> <code>remove()</code> 方法可以用于从其父组或动画中移除效果。
            我们是否应该保留它在第1级中并将其简单定义为从其动画中移除动画效果？<a href="https://github.com/w3c/csswg-drafts/issues/2082">[问题 #2082]</a>
            <a class="issue-return" href="#issue-178c6cfa" title="跳到章节">↵</a>
        </div>
        <div class="issue"> 如果 [[type]] 是 <span class="esvalue">break</span>、<span class="esvalue">continue</span> 或
            <span class="esvalue">return</span>，我们该怎么办？可能吗？<a class="issue-return" href="#issue-47a68024"
                title="跳到章节">↵</a>
        </div>
        <div class="issue"> 这是否与这些<a data-link-type="dfn" href="#time-value">时间值</a>相冲突，因为它们相对于
            <code>navigationStart</code>，并且 <code>requestAnimationFrame</code> 使用的时间与
            <code>document.timeline.currentTime</code> 相同？<a href="https://github.com/w3c/csswg-drafts/issues/2083">[问题
                #2083]</a> <a class="issue-return" href="#issue-a128cfff" title="跳到章节">↵</a>
        </div>
    </div>
    <aside class="dfn-panel" data-for="time-value">
        <b><a href="#time-value">#time-value</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-time-value">4.2. Time values</a> <a href="#ref-for-time-value①">(2)</a> <a
                    href="#ref-for-time-value②">(3)</a> <a href="#ref-for-time-value③">(4)</a>
            <li><a href="#ref-for-time-value④">4.3. Timelines</a> <a href="#ref-for-time-value⑤">(2)</a> <a
                    href="#ref-for-time-value⑥">(3)</a> <a href="#ref-for-time-value⑦">(4)</a> <a
                    href="#ref-for-time-value⑧">(5)</a> <a href="#ref-for-time-value⑨">(6)</a>
            <li><a href="#ref-for-time-value①⓪">4.3.1. Document timelines</a>
            <li><a href="#ref-for-time-value①①">4.3.2. The default document timeline</a> <a
                    href="#ref-for-time-value①②">(2)</a>
            <li><a href="#ref-for-time-value①③">4.4. Animations</a> <a href="#ref-for-time-value①④">(2)</a> <a
                    href="#ref-for-time-value①⑤">(3)</a>
            <li><a href="#ref-for-time-value①⑥">4.4.3. The current time of an animation</a> <a
                    href="#ref-for-time-value①⑦">(2)</a>
            <li><a href="#ref-for-time-value①⑧">4.4.4. Setting the current time of an animation</a>
            <li><a href="#ref-for-time-value①⑨">4.4.5. Setting the start time of an animation</a>
            <li><a href="#ref-for-time-value②⓪">4.4.6. Waiting for the associated effect</a>
            <li><a href="#ref-for-time-value②①">4.4.8. Playing an animation</a> <a href="#ref-for-time-value②②">(2)</a>
            <li><a href="#ref-for-time-value②③">4.4.9. Pausing an animation</a>
            <li><a href="#ref-for-time-value②④">4.4.12. Updating the finished state</a> <a
                    href="#ref-for-time-value②⑤">(2)</a>
            <li><a href="#ref-for-time-value②⑥">4.4.13. Finishing an animation</a>
            <li><a href="#ref-for-time-value②⑦">4.4.14. Canceling an animation</a> <a
                    href="#ref-for-time-value②⑧">(2)</a>
            <li><a href="#ref-for-time-value②⑨">4.4.15. Speed control</a> <a href="#ref-for-time-value③⓪">(2)</a>
            <li><a href="#ref-for-time-value③①">4.4.15.2. Seamlessly updating the playback rate of an animation</a>
            <li><a href="#ref-for-time-value③②">4.4.18. Animation events</a>
            <li><a href="#ref-for-time-value③③">4.4.18.1. Sorting animation events</a> <a
                    href="#ref-for-time-value③④">(2)</a> <a href="#ref-for-time-value③⑤">(3)</a> <a
                    href="#ref-for-time-value③⑥">(4)</a> <a href="#ref-for-time-value③⑦">(5)</a> <a
                    href="#ref-for-time-value③⑧">(6)</a> <a href="#ref-for-time-value③⑨">(7)</a>
            <li><a href="#ref-for-time-value④⓪">4.7.3. Iteration time space</a>
            <li><a href="#ref-for-time-value④①">4.8.3.1. Calculating the active time</a> <a
                    href="#ref-for-time-value④②">(2)</a> <a href="#ref-for-time-value④③">(3)</a>
            <li><a href="#ref-for-time-value④④">6.1. Time values in the programming interface</a>
            <li><a href="#ref-for-time-value④⑤">6.12. The AnimationPlaybackEvent interface</a>
            <li><a href="#ref-for-time-value④⑥">8. Interaction with page display</a> <a
                    href="#ref-for-time-value④⑦">(2)</a>
            <li><a href="#ref-for-time-value④⑧">9.1. Precision of time values</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="unresolved">
        <b><a href="#unresolved">#unresolved</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-unresolved">2. Specification conventions</a>
            <li><a href="#ref-for-unresolved①">4.3. Timelines</a> <a href="#ref-for-unresolved②">(2)</a> <a
                    href="#ref-for-unresolved③">(3)</a> <a href="#ref-for-unresolved④">(4)</a>
            <li><a href="#ref-for-unresolved⑤">4.3.1. Document timelines</a>
            <li><a href="#ref-for-unresolved⑥">4.4. Animations</a> <a href="#ref-for-unresolved⑦">(2)</a>
            <li><a href="#ref-for-unresolved⑧">4.4.1. Setting the timeline of an animation</a> <a
                    href="#ref-for-unresolved⑨">(2)</a>
            <li><a href="#ref-for-unresolved①⓪">4.4.3. The current time of an animation</a> <a
                    href="#ref-for-unresolved①①">(2)</a> <a href="#ref-for-unresolved①②">(3)</a>
            <li><a href="#ref-for-unresolved①③">4.4.4. Setting the current time of an animation</a> <a
                    href="#ref-for-unresolved①④">(2)</a> <a href="#ref-for-unresolved①⑤">(3)</a> <a
                    href="#ref-for-unresolved①⑥">(4)</a> <a href="#ref-for-unresolved①⑦">(5)</a> <a
                    href="#ref-for-unresolved①⑧">(6)</a> <a href="#ref-for-unresolved①⑨">(7)</a>
            <li><a href="#ref-for-unresolved②⓪">4.4.5. Setting the start time of an animation</a> <a
                    href="#ref-for-unresolved②①">(2)</a> <a href="#ref-for-unresolved②②">(3)</a> <a
                    href="#ref-for-unresolved②③">(4)</a> <a href="#ref-for-unresolved②④">(5)</a> <a
                    href="#ref-for-unresolved②⑤">(6)</a> <a href="#ref-for-unresolved②⑥">(7)</a> <a
                    href="#ref-for-unresolved②⑦">(8)</a> <a href="#ref-for-unresolved②⑧">(9)</a>
            <li><a href="#ref-for-unresolved②⑨">4.4.6. Waiting for the associated effect</a> <a
                    href="#ref-for-unresolved③⓪">(2)</a>
            <li><a href="#ref-for-unresolved③①">4.4.8. Playing an animation</a> <a href="#ref-for-unresolved③②">(2)</a>
                <a href="#ref-for-unresolved③③">(3)</a> <a href="#ref-for-unresolved③④">(4)</a> <a
                    href="#ref-for-unresolved③⑤">(5)</a> <a href="#ref-for-unresolved③⑥">(6)</a> <a
                    href="#ref-for-unresolved③⑦">(7)</a> <a href="#ref-for-unresolved③⑧">(8)</a> <a
                    href="#ref-for-unresolved③⑨">(9)</a> <a href="#ref-for-unresolved④⓪">(10)</a> <a
                    href="#ref-for-unresolved④①">(11)</a> <a href="#ref-for-unresolved④②">(12)</a> <a
                    href="#ref-for-unresolved④③">(13)</a> <a href="#ref-for-unresolved④④">(14)</a> <a
                    href="#ref-for-unresolved④⑤">(15)</a>
            <li><a href="#ref-for-unresolved④⑥">4.4.9. Pausing an animation</a> <a href="#ref-for-unresolved④⑦">(2)</a>
                <a href="#ref-for-unresolved④⑧">(3)</a> <a href="#ref-for-unresolved④⑨">(4)</a> <a
                    href="#ref-for-unresolved⑤⓪">(5)</a>
            <li><a href="#ref-for-unresolved⑤①">4.4.12. Updating the finished state</a> <a
                    href="#ref-for-unresolved⑤②">(2)</a> <a href="#ref-for-unresolved⑤③">(3)</a> <a
                    href="#ref-for-unresolved⑤④">(4)</a> <a href="#ref-for-unresolved⑤⑤">(5)</a> <a
                    href="#ref-for-unresolved⑤⑥">(6)</a> <a href="#ref-for-unresolved⑤⑦">(7)</a> <a
                    href="#ref-for-unresolved⑤⑧">(8)</a> <a href="#ref-for-unresolved⑤⑨">(9)</a>
            <li><a href="#ref-for-unresolved⑥⓪">4.4.13. Finishing an animation</a> <a
                    href="#ref-for-unresolved⑥①">(2)</a> <a href="#ref-for-unresolved⑥②">(3)</a> <a
                    href="#ref-for-unresolved⑥③">(4)</a>
            <li><a href="#ref-for-unresolved⑥④">4.4.14. Canceling an animation</a> <a
                    href="#ref-for-unresolved⑥⑤">(2)</a> <a href="#ref-for-unresolved⑥⑥">(3)</a> <a
                    href="#ref-for-unresolved⑥⑦">(4)</a> <a href="#ref-for-unresolved⑥⑧">(5)</a> <a
                    href="#ref-for-unresolved⑥⑨">(6)</a>
            <li><a href="#ref-for-unresolved⑦⓪">4.4.15.1. Setting the playback rate of an animation</a> <a
                    href="#ref-for-unresolved⑦①">(2)</a>
            <li><a href="#ref-for-unresolved⑦②">4.4.15.2. Seamlessly updating the playback rate of an animation</a> <a
                    href="#ref-for-unresolved⑦③">(2)</a>
            <li><a href="#ref-for-unresolved⑦④">4.4.17. Play states</a> <a href="#ref-for-unresolved⑦⑤">(2)</a> <a
                    href="#ref-for-unresolved⑦⑥">(3)</a> <a href="#ref-for-unresolved⑦⑦">(4)</a> <a
                    href="#ref-for-unresolved⑦⑧">(5)</a> <a href="#ref-for-unresolved⑦⑨">(6)</a>
            <li><a href="#ref-for-unresolved⑧⓪">4.4.18. Animation events</a>
            <li><a href="#ref-for-unresolved⑧①">4.4.18.1. Sorting animation events</a> <a
                    href="#ref-for-unresolved⑧②">(2)</a> <a href="#ref-for-unresolved⑧③">(3)</a> <a
                    href="#ref-for-unresolved⑧④">(4)</a> <a href="#ref-for-unresolved⑧⑤">(5)</a> <a
                    href="#ref-for-unresolved⑧⑥">(6)</a> <a href="#ref-for-unresolved⑧⑦">(7)</a> <a
                    href="#ref-for-unresolved⑧⑧">(8)</a> <a href="#ref-for-unresolved⑧⑨">(9)</a>
            <li><a href="#ref-for-unresolved⑨⓪">4.5.4. Local time</a>
            <li><a href="#ref-for-unresolved⑨①">4.5.5. Animation effect phases and
                    states</a> <a href="#ref-for-unresolved⑨②">(2)</a> <a href="#ref-for-unresolved⑨③">(3)</a> <a
                    href="#ref-for-unresolved⑨④">(4)</a> <a href="#ref-for-unresolved⑨⑤">(5)</a>
            <li><a href="#ref-for-unresolved⑨⑥">4.6.1. Fill modes</a>
            <li><a href="#ref-for-unresolved⑨⑦">4.8.3.1. Calculating the active time</a> <a
                    href="#ref-for-unresolved⑨⑧">(2)</a> <a href="#ref-for-unresolved⑨⑨">(3)</a> <a
                    href="#ref-for-unresolved①⓪⓪">(4)</a>
            <li><a href="#ref-for-unresolved①⓪①">4.8.3.2. Calculating the overall progress</a> <a
                    href="#ref-for-unresolved①⓪②">(2)</a>
            <li><a href="#ref-for-unresolved①⓪③">4.8.3.3. Calculating the simple iteration progress</a> <a
                    href="#ref-for-unresolved①⓪④">(2)</a>
            <li><a href="#ref-for-unresolved①⓪⑤">4.8.4. Calculating the current iteration</a> <a
                    href="#ref-for-unresolved①⓪⑥">(2)</a>
            <li><a href="#ref-for-unresolved①⓪⑦">4.9.1. Calculating the directed progress</a> <a
                    href="#ref-for-unresolved①⓪⑧">(2)</a>
            <li><a href="#ref-for-unresolved①⓪⑨">4.10.1. Calculating the transformed progress</a> <a
                    href="#ref-for-unresolved①①⓪">(2)</a>
            <li><a href="#ref-for-unresolved①①①">5.3.4. The effect value of a keyframe effect</a>
            <li><a href="#ref-for-unresolved①①②">6.1. Time values in the programming interface</a>
            <li><a href="#ref-for-unresolved①①③">6.5.5. The ComputedEffectTiming dictionary</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="timeline">
        <b><a href="#timeline">#timeline</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-timeline">4.3. Timelines</a> <a href="#ref-for-timeline①">(2)</a> <a
                    href="#ref-for-timeline②">(3)</a> <a href="#ref-for-timeline③">(4)</a> <a
                    href="#ref-for-timeline④">(5)</a> <a href="#ref-for-timeline⑤">(6)</a> <a
                    href="#ref-for-timeline⑥">(7)</a>
            <li><a href="#ref-for-timeline⑦">4.3.1. Document timelines</a>
            <li><a href="#ref-for-timeline⑧">4.4. Animations</a> <a href="#ref-for-timeline⑨">(2)</a> <a
                    href="#ref-for-timeline①⓪">(3)</a> <a href="#ref-for-timeline①①">(4)</a> <a
                    href="#ref-for-timeline①②">(5)</a> <a href="#ref-for-timeline①③">(6)</a> <a
                    href="#ref-for-timeline①④">(7)</a>
            <li><a href="#ref-for-timeline①⑤">4.4.1. Setting the timeline of an animation</a> <a
                    href="#ref-for-timeline①⑥">(2)</a>
            <li><a href="#ref-for-timeline①⑦">4.4.3. The current time of an animation</a> <a
                    href="#ref-for-timeline①⑧">(2)</a> <a href="#ref-for-timeline①⑨">(3)</a>
            <li><a href="#ref-for-timeline②⓪">4.4.4. Setting the current time of an animation</a> <a
                    href="#ref-for-timeline②①">(2)</a> <a href="#ref-for-timeline②②">(3)</a> <a
                    href="#ref-for-timeline②③">(4)</a> <a href="#ref-for-timeline②④">(5)</a>
            <li><a href="#ref-for-timeline②⑤">4.4.5. Setting the start time of an animation</a> <a
                    href="#ref-for-timeline②⑥">(2)</a>
            <li><a href="#ref-for-timeline②⑦">4.4.6. Waiting for the associated effect</a>
            <li><a href="#ref-for-timeline②⑧">4.4.8. Playing an animation</a> <a href="#ref-for-timeline②⑨">(2)</a>
            <li><a href="#ref-for-timeline③⓪">4.4.9. Pausing an animation</a> <a href="#ref-for-timeline③①">(2)</a>
            <li><a href="#ref-for-timeline③②">4.4.12. Updating the finished state</a> <a
                    href="#ref-for-timeline③③">(2)</a>
            <li><a href="#ref-for-timeline③④">4.4.13. Finishing an animation</a> <a href="#ref-for-timeline③⑤">(2)</a>
            <li><a href="#ref-for-timeline③⑥">4.4.14. Canceling an animation</a>
            <li><a href="#ref-for-timeline③⑦">4.4.15. Speed control</a> <a href="#ref-for-timeline③⑧">(2)</a> <a
                    href="#ref-for-timeline③⑨">(3)</a>
            <li><a href="#ref-for-timeline④⓪">4.4.15.1. Setting the playback rate of an animation</a> <a
                    href="#ref-for-timeline④①">(2)</a>
            <li><a href="#ref-for-timeline④②">4.4.15.2. Seamlessly updating the playback rate of an animation</a>
            <li><a href="#ref-for-timeline④③">4.4.16. Reversing an animation</a> <a href="#ref-for-timeline④④">(2)</a>
            <li><a href="#ref-for-timeline④⑤">4.4.17. Play states</a>
            <li><a href="#ref-for-timeline④⑥">4.4.18. Animation events</a> <a href="#ref-for-timeline④⑦">(2)</a>
            <li><a href="#ref-for-timeline④⑧">4.4.18.1. Sorting animation events</a> <a
                    href="#ref-for-timeline④⑨">(2)</a> <a href="#ref-for-timeline⑤⓪">(3)</a>
            <li><a href="#ref-for-timeline⑤①">4.5.5. Animation effect phases and
                    states</a>
            <li><a href="#ref-for-timeline⑤②">5.5.2. Removing replaced animations</a> <a
                    href="#ref-for-timeline⑤③">(2)</a> <a href="#ref-for-timeline⑤④">(3)</a>
            <li><a href="#ref-for-timeline⑤⑤">6.2. The AnimationTimeline interface</a>
            <li><a href="#ref-for-timeline⑤⑥">6.4. The Animation interface</a> <a href="#ref-for-timeline⑤⑦">(2)</a> <a
                    href="#ref-for-timeline⑤⑧">(3)</a>
            <li><a href="#ref-for-timeline⑤⑨">6.8. The Animatable interface mixin</a>
            <li><a href="#ref-for-timeline⑥⓪">6.12. The AnimationPlaybackEvent interface</a>
            <li><a href="#ref-for-timeline⑥①">6.13. Model liveness</a>
            <li><a href="#ref-for-timeline⑥②">8. Interaction with page display</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="timeline-current-time">
        <b><a href="#timeline-current-time">#timeline-current-time</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-timeline-current-time">4.3. Timelines</a> <a
                    href="#ref-for-timeline-current-time①">(2)</a> <a href="#ref-for-timeline-current-time②">(3)</a> <a
                    href="#ref-for-timeline-current-time③">(4)</a>
            <li><a href="#ref-for-timeline-current-time④">4.3.1. Document timelines</a>
            <li><a href="#ref-for-timeline-current-time⑤">4.4.12. Updating the finished state</a>
            <li><a href="#ref-for-timeline-current-time⑥">4.4.14. Canceling an animation</a>
            <li><a href="#ref-for-timeline-current-time⑦">5.5.2. Removing replaced animations</a> <a
                    href="#ref-for-timeline-current-time⑧">(2)</a>
            <li><a href="#ref-for-timeline-current-time⑨">6.2. The AnimationTimeline interface</a>
            <li><a href="#ref-for-timeline-current-time①⓪">6.13. Model liveness</a> <a
                    href="#ref-for-timeline-current-time①①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="inactive-timeline">
        <b><a href="#inactive-timeline">#inactive-timeline</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-inactive-timeline">4.3.1. Document timelines</a> <a
                    href="#ref-for-inactive-timeline①">(2)</a> <a href="#ref-for-inactive-timeline②">(3)</a>
            <li><a href="#ref-for-inactive-timeline③">4.4.3. The current time of an animation</a>
            <li><a href="#ref-for-inactive-timeline④">4.4.4. Setting the current time of an animation</a> <a
                    href="#ref-for-inactive-timeline⑤">(2)</a>
            <li><a href="#ref-for-inactive-timeline⑥">4.4.5. Setting the start time of an animation</a>
            <li><a href="#ref-for-inactive-timeline⑦">4.4.6. Waiting for the associated effect</a>
            <li><a href="#ref-for-inactive-timeline⑧">4.4.9. Pausing an animation</a>
            <li><a href="#ref-for-inactive-timeline⑨">4.4.12. Updating the finished state</a> <a
                    href="#ref-for-inactive-timeline①⓪">(2)</a>
            <li><a href="#ref-for-inactive-timeline①①">4.4.13. Finishing an animation</a>
            <li><a href="#ref-for-inactive-timeline①②">4.4.14. Canceling an animation</a> <a
                    href="#ref-for-inactive-timeline①③">(2)</a>
            <li><a href="#ref-for-inactive-timeline①④">4.4.16. Reversing an animation</a>
            <li><a href="#ref-for-inactive-timeline①⑤">4.4.17. Play states</a>
            <li><a href="#ref-for-inactive-timeline①⑥">4.4.18. Animation events</a>
            <li><a href="#ref-for-inactive-timeline①⑦">4.4.18.1. Sorting animation events</a>
            <li><a href="#ref-for-inactive-timeline①⑧">6.2. The AnimationTimeline interface</a>
            <li><a href="#ref-for-inactive-timeline①⑨">6.12. The AnimationPlaybackEvent interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="monotonically-increasing-timeline">
        <b><a href="#monotonically-increasing-timeline">#monotonically-increasing-timeline</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-monotonically-increasing-timeline">4.3.1. Document timelines</a>
            <li><a href="#ref-for-monotonically-increasing-timeline①">4.4.8. Playing an animation</a>
            <li><a href="#ref-for-monotonically-increasing-timeline②">4.4.9. Pausing an animation</a>
            <li><a href="#ref-for-monotonically-increasing-timeline③">4.4.15.1. Setting the playback rate of an
                    animation</a> <a href="#ref-for-monotonically-increasing-timeline④">(2)</a>
            <li><a href="#ref-for-monotonically-increasing-timeline⑤">4.4.17. Play states</a>
            <li><a href="#ref-for-monotonically-increasing-timeline⑥">4.5.5. Animation effect phases and
                    states</a>
            <li><a href="#ref-for-monotonically-increasing-timeline⑦">5.5.2. Removing replaced animations</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="timeline-time-to-origin-relative-time">
        <b><a href="#timeline-time-to-origin-relative-time">#timeline-time-to-origin-relative-time</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-timeline-time-to-origin-relative-time">4.3.1. Document timelines</a>
            <li><a href="#ref-for-timeline-time-to-origin-relative-time①">4.4.14. Canceling an animation</a>
            <li><a href="#ref-for-timeline-time-to-origin-relative-time②">4.4.18.1. Sorting animation events</a> <a
                    href="#ref-for-timeline-time-to-origin-relative-time③">(2)</a>
            <li><a href="#ref-for-timeline-time-to-origin-relative-time④">5.5.2. Removing replaced animations</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="timeline-associated-with-a-document">
        <b><a href="#timeline-associated-with-a-document">#timeline-associated-with-a-document</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-timeline-associated-with-a-document">4.3. Timelines</a>
            <li><a href="#ref-for-timeline-associated-with-a-document①">4.3.1. Document timelines</a>
            <li><a href="#ref-for-timeline-associated-with-a-document②">4.4. Animations</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="update-animations-and-send-events">
        <b><a href="#update-animations-and-send-events">#update-animations-and-send-events</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-update-animations-and-send-events">4.3.1. Document timelines</a>
            <li><a href="#ref-for-update-animations-and-send-events①">4.3.2. The default document timeline</a>
            <li><a href="#ref-for-update-animations-and-send-events②">4.4.12. Updating the finished state</a>
            <li><a href="#ref-for-update-animations-and-send-events③">4.4.18. Animation events</a>
            <li><a href="#ref-for-update-animations-and-send-events④">6.13. Model liveness</a> <a
                    href="#ref-for-update-animations-and-send-events⑤">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="animation-frame">
        <b><a href="#animation-frame">#animation-frame</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-animation-frame">4.3. Timelines</a> <a href="#ref-for-animation-frame①">(2)</a>
            <li><a href="#ref-for-animation-frame②">4.4.17. Play states</a>
            <li><a href="#ref-for-animation-frame③">4.5.5. Animation effect phases and
                    states</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="document-timeline">
        <b><a href="#document-timeline">#document-timeline</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-document-timeline">4.3.1. Document timelines</a> <a
                    href="#ref-for-document-timeline①">(2)</a> <a href="#ref-for-document-timeline②">(3)</a>
            <li><a href="#ref-for-document-timeline③">4.3.2. The default document timeline</a> <a
                    href="#ref-for-document-timeline④">(2)</a>
            <li><a href="#ref-for-document-timeline⑤">6.3. The DocumentTimeline interface</a>
            <li><a href="#ref-for-document-timeline⑥">6.13. Model liveness</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="origin-time">
        <b><a href="#origin-time">#origin-time</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-origin-time">4.3.1. Document timelines</a>
            <li><a href="#ref-for-origin-time①">4.3.2. The default document timeline</a>
            <li><a href="#ref-for-origin-time②">6.3. The DocumentTimeline interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="document-default-document-timeline">
        <b><a href="#document-default-document-timeline">#document-default-document-timeline</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-document-default-document-timeline">4.3.2. The default document timeline</a> <a
                    href="#ref-for-document-default-document-timeline①">(2)</a> <a
                    href="#ref-for-document-default-document-timeline②">(3)</a>
            <li><a href="#ref-for-document-default-document-timeline③">4.7.3. Iteration time space</a>
            <li><a href="#ref-for-document-default-document-timeline④">6.3. The DocumentTimeline interface</a>
            <li><a href="#ref-for-document-default-document-timeline⑤">6.4. The Animation interface</a> <a
                    href="#ref-for-document-default-document-timeline⑥">(2)</a>
            <li><a href="#ref-for-document-default-document-timeline⑦">6.8. The Animatable interface mixin</a>
            <li><a href="#ref-for-document-default-document-timeline⑧">6.9. Extensions to the Document interface</a>
            <li><a href="#ref-for-document-default-document-timeline⑨">6.13. Model liveness</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="concept-animation">
        <b><a href="#concept-animation">#concept-animation</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-concept-animation">2. Specification conventions</a>
            <li><a href="#ref-for-concept-animation①">4.3. Timelines</a> <a href="#ref-for-concept-animation②">(2)</a>
            <li><a href="#ref-for-concept-animation③">4.4. Animations</a> <a href="#ref-for-concept-animation④">(2)</a>
                <a href="#ref-for-concept-animation⑤">(3)</a> <a href="#ref-for-concept-animation⑥">(4)</a> <a
                    href="#ref-for-concept-animation⑦">(5)</a>
            <li><a href="#ref-for-concept-animation⑧">4.4.2. Setting the associated effect of an animation</a>
            <li><a href="#ref-for-concept-animation⑨">4.4.3. The current time of an animation</a>
            <li><a href="#ref-for-concept-animation①⓪">4.4.5. Setting the start time of an animation</a>
            <li><a href="#ref-for-concept-animation①①">4.4.6. Waiting for the associated effect</a> <a
                    href="#ref-for-concept-animation①②">(2)</a>
            <li><a href="#ref-for-concept-animation①③">4.4.7. The current ready promise</a>
            <li><a href="#ref-for-concept-animation①④">4.4.9. Pausing an animation</a>
            <li><a href="#ref-for-concept-animation①⑤">4.4.10. Reaching the end</a> <a
                    href="#ref-for-concept-animation①⑥">(2)</a>
            <li><a href="#ref-for-concept-animation①⑦">4.4.12. Updating the finished state</a>
            <li><a href="#ref-for-concept-animation①⑧">4.4.15. Speed control</a>
            <li><a href="#ref-for-concept-animation①⑨">4.4.15.1. Setting the playback rate of an animation</a>
            <li><a href="#ref-for-concept-animation②⓪">4.4.15.2. Seamlessly updating the playback rate of an
                    animation</a> <a href="#ref-for-concept-animation②①">(2)</a> <a
                    href="#ref-for-concept-animation②②">(3)</a> <a href="#ref-for-concept-animation②③">(4)</a>
            <li><a href="#ref-for-concept-animation②④">4.4.16. Reversing an animation</a>
            <li><a href="#ref-for-concept-animation②⑤">4.4.17. Play states</a> <a
                    href="#ref-for-concept-animation②⑥">(2)</a>
            <li><a href="#ref-for-concept-animation②⑦">4.4.18. Animation events</a>
            <li><a href="#ref-for-concept-animation②⑧">4.4.18.2. Animation playback events</a> <a
                    href="#ref-for-concept-animation②⑨">(2)</a>
            <li><a href="#ref-for-concept-animation③⓪">4.4.18.3. Types of animation playback events</a>
            <li><a href="#ref-for-concept-animation③①">4.5.1. Relationship between animation effects
                    and animations</a> <a href="#ref-for-concept-animation③②">(2)</a> <a
                    href="#ref-for-concept-animation③③">(3)</a>
            <li><a href="#ref-for-concept-animation③④">4.5.3. The active interval</a> <a
                    href="#ref-for-concept-animation③⑤">(2)</a>
            <li><a href="#ref-for-concept-animation③⑥">4.5.4. Local time</a>
            <li><a href="#ref-for-concept-animation③⑦">4.5.5. Animation effect phases and
                    states</a> <a href="#ref-for-concept-animation③⑧">(2)</a>
            <li><a href="#ref-for-concept-animation③⑨">4.5.6. Relevant animations</a> <a
                    href="#ref-for-concept-animation④⓪">(2)</a> <a href="#ref-for-concept-animation④①">(3)</a> <a
                    href="#ref-for-concept-animation④②">(4)</a>
            <li><a href="#ref-for-concept-animation④③">4.8.1. Overview</a>
            <li><a href="#ref-for-concept-animation④④">5.2. Animating properties</a>
            <li><a href="#ref-for-concept-animation④⑤">5.4.1. Animation classes</a>
            <li><a href="#ref-for-concept-animation④⑥">5.4.2. The effect stack</a>
            <li><a href="#ref-for-concept-animation④⑦">5.4.5. Applying the composited result</a> <a
                    href="#ref-for-concept-animation④⑧">(2)</a>
            <li><a href="#ref-for-concept-animation④⑨">5.5.1. Replace state</a> <a
                    href="#ref-for-concept-animation⑤⓪">(2)</a> <a href="#ref-for-concept-animation⑤①">(3)</a>
            <li><a href="#ref-for-concept-animation⑤②">5.5.2. Removing replaced animations</a> <a
                    href="#ref-for-concept-animation⑤③">(2)</a> <a href="#ref-for-concept-animation⑤④">(3)</a> <a
                    href="#ref-for-concept-animation⑤⑤">(4)</a> <a href="#ref-for-concept-animation⑤⑥">(5)</a> <a
                    href="#ref-for-concept-animation⑤⑦">(6)</a> <a href="#ref-for-concept-animation⑤⑧">(7)</a> <a
                    href="#ref-for-concept-animation⑤⑨">(8)</a> <a href="#ref-for-concept-animation⑥⓪">(9)</a> <a
                    href="#ref-for-concept-animation⑥①">(10)</a>
            <li><a href="#ref-for-concept-animation⑥②">5.6. Side effects of animation</a> <a
                    href="#ref-for-concept-animation⑥③">(2)</a>
            <li><a href="#ref-for-concept-animation⑥④">6.4. The Animation interface</a> <a
                    href="#ref-for-concept-animation⑥⑤">(2)</a> <a href="#ref-for-concept-animation⑥⑥">(3)</a> <a
                    href="#ref-for-concept-animation⑥⑦">(4)</a> <a href="#ref-for-concept-animation⑥⑧">(5)</a>
            <li><a href="#ref-for-concept-animation⑥⑨">6.5.1. The EffectTiming and OptionalEffectTiming dictionaries</a>
            <li><a href="#ref-for-concept-animation⑦⓪">6.5.5. The ComputedEffectTiming dictionary</a>
            <li><a href="#ref-for-concept-animation⑦①">6.8. The Animatable interface mixin</a> <a
                    href="#ref-for-concept-animation⑦②">(2)</a> <a href="#ref-for-concept-animation⑦③">(3)</a>
            <li><a href="#ref-for-concept-animation⑦④">6.10. Extensions to the DocumentOrShadowRoot interface mixin</a>
            <li><a href="#ref-for-concept-animation⑦⑤">6.12. The AnimationPlaybackEvent interface</a> <a
                    href="#ref-for-concept-animation⑦⑥">(2)</a> <a href="#ref-for-concept-animation⑦⑦">(3)</a> <a
                    href="#ref-for-concept-animation⑦⑧">(4)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="animation-associated-effect">
        <b><a href="#animation-associated-effect">#animation-associated-effect</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-animation-associated-effect">4.1.1. Stateless</a>
            <li><a href="#ref-for-animation-associated-effect①">4.4. Animations</a> <a
                    href="#ref-for-animation-associated-effect②">(2)</a>
            <li><a href="#ref-for-animation-associated-effect③">4.4.2. Setting the associated effect of an animation</a>
                <a href="#ref-for-animation-associated-effect④">(2)</a> <a
                    href="#ref-for-animation-associated-effect⑤">(3)</a>
            <li><a href="#ref-for-animation-associated-effect⑥">4.4.3. The current time of an animation</a>
            <li><a href="#ref-for-animation-associated-effect⑦">4.4.6. Waiting for the associated effect</a>
            <li><a href="#ref-for-animation-associated-effect⑧">4.4.8. Playing an animation</a>
            <li><a href="#ref-for-animation-associated-effect⑨">4.4.9. Pausing an animation</a> <a
                    href="#ref-for-animation-associated-effect①⓪">(2)</a>
            <li><a href="#ref-for-animation-associated-effect①①">4.4.10. Reaching the end</a> <a
                    href="#ref-for-animation-associated-effect①②">(2)</a> <a
                    href="#ref-for-animation-associated-effect①③">(3)</a> <a
                    href="#ref-for-animation-associated-effect①④">(4)</a> <a
                    href="#ref-for-animation-associated-effect①⑤">(5)</a> <a
                    href="#ref-for-animation-associated-effect①⑥">(6)</a>
            <li><a href="#ref-for-animation-associated-effect①⑦">4.4.12. Updating the finished state</a> <a
                    href="#ref-for-animation-associated-effect①⑧">(2)</a>
            <li><a href="#ref-for-animation-associated-effect①⑨">4.4.14. Canceling an animation</a>
            <li><a href="#ref-for-animation-associated-effect②⓪">4.4.18.2. Animation playback events</a>
            <li><a href="#ref-for-animation-associated-effect②①">4.5.1. Relationship between animation effects
                    and animations</a> <a href="#ref-for-animation-associated-effect②②">(2)</a>
            <li><a href="#ref-for-animation-associated-effect②③">4.5.6. Relevant animations</a> <a
                    href="#ref-for-animation-associated-effect②④">(2)</a>
            <li><a href="#ref-for-animation-associated-effect②⑤">4.7.4. Interval timing</a>
            <li><a href="#ref-for-animation-associated-effect②⑥">5.5.2. Removing replaced animations</a> <a
                    href="#ref-for-animation-associated-effect②⑦">(2)</a> <a
                    href="#ref-for-animation-associated-effect②⑧">(3)</a>
            <li><a href="#ref-for-animation-associated-effect②⑨">6.4. The Animation interface</a> <a
                    href="#ref-for-animation-associated-effect③⓪">(2)</a> <a
                    href="#ref-for-animation-associated-effect③①">(3)</a> <a
                    href="#ref-for-animation-associated-effect③②">(4)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="animation-document-for-timing">
        <b><a href="#animation-document-for-timing">#animation-document-for-timing</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-animation-document-for-timing">4.4. Animations</a>
            <li><a href="#ref-for-animation-document-for-timing①">4.4.12. Updating the finished state</a> <a
                    href="#ref-for-animation-document-for-timing②">(2)</a>
            <li><a href="#ref-for-animation-document-for-timing③">4.4.14. Canceling an animation</a> <a
                    href="#ref-for-animation-document-for-timing④">(2)</a>
            <li><a href="#ref-for-animation-document-for-timing⑤">5.5.2. Removing replaced animations</a> <a
                    href="#ref-for-animation-document-for-timing⑥">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="animation-start-time">
        <b><a href="#animation-start-time">#animation-start-time</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-animation-start-time">2. Specification conventions</a>
            <li><a href="#ref-for-animation-start-time①">4.4.1. Setting the timeline of an animation</a>
            <li><a href="#ref-for-animation-start-time②">4.4.3. The current time of an animation</a> <a
                    href="#ref-for-animation-start-time③">(2)</a>
            <li><a href="#ref-for-animation-start-time④">4.4.4. Setting the current time of an animation</a> <a
                    href="#ref-for-animation-start-time⑤">(2)</a> <a href="#ref-for-animation-start-time⑥">(3)</a> <a
                    href="#ref-for-animation-start-time⑦">(4)</a> <a href="#ref-for-animation-start-time⑧">(5)</a> <a
                    href="#ref-for-animation-start-time⑨">(6)</a>
            <li><a href="#ref-for-animation-start-time①⓪">4.4.5. Setting the start time of an animation</a> <a
                    href="#ref-for-animation-start-time①①">(2)</a>
            <li><a href="#ref-for-animation-start-time①②">4.4.6. Waiting for the associated effect</a> <a
                    href="#ref-for-animation-start-time①③">(2)</a>
            <li><a href="#ref-for-animation-start-time①④">4.4.8. Playing an animation</a> <a
                    href="#ref-for-animation-start-time①⑤">(2)</a> <a href="#ref-for-animation-start-time①⑥">(3)</a> <a
                    href="#ref-for-animation-start-time①⑦">(4)</a> <a href="#ref-for-animation-start-time①⑧">(5)</a> <a
                    href="#ref-for-animation-start-time①⑨">(6)</a> <a href="#ref-for-animation-start-time②⓪">(7)</a> <a
                    href="#ref-for-animation-start-time②①">(8)</a>
            <li><a href="#ref-for-animation-start-time②②">4.4.9. Pausing an animation</a> <a
                    href="#ref-for-animation-start-time②③">(2)</a> <a href="#ref-for-animation-start-time②④">(3)</a> <a
                    href="#ref-for-animation-start-time②⑤">(4)</a> <a href="#ref-for-animation-start-time②⑥">(5)</a>
            <li><a href="#ref-for-animation-start-time②⑦">4.4.12. Updating the finished state</a> <a
                    href="#ref-for-animation-start-time②⑧">(2)</a> <a href="#ref-for-animation-start-time②⑨">(3)</a>
            <li><a href="#ref-for-animation-start-time③⓪">4.4.13. Finishing an animation</a> <a
                    href="#ref-for-animation-start-time③①">(2)</a> <a href="#ref-for-animation-start-time③②">(3)</a> <a
                    href="#ref-for-animation-start-time③③">(4)</a>
            <li><a href="#ref-for-animation-start-time③④">4.4.14. Canceling an animation</a>
            <li><a href="#ref-for-animation-start-time③⑤">4.4.15.1. Setting the playback rate of an animation</a> <a
                    href="#ref-for-animation-start-time③⑥">(2)</a> <a href="#ref-for-animation-start-time③⑦">(3)</a>
            <li><a href="#ref-for-animation-start-time③⑧">4.4.15.2. Seamlessly updating the playback rate of an
                    animation</a> <a href="#ref-for-animation-start-time③⑨">(2)</a>
            <li><a href="#ref-for-animation-start-time④⓪">4.4.17. Play states</a> <a
                    href="#ref-for-animation-start-time④①">(2)</a> <a href="#ref-for-animation-start-time④②">(3)</a> <a
                    href="#ref-for-animation-start-time④③">(4)</a>
            <li><a href="#ref-for-animation-start-time④④">4.4.18.1. Sorting animation events</a> <a
                    href="#ref-for-animation-start-time④⑤">(2)</a> <a href="#ref-for-animation-start-time④⑥">(3)</a>
            <li><a href="#ref-for-animation-start-time④⑦">4.5.3. The active interval</a> <a
                    href="#ref-for-animation-start-time④⑧">(2)</a> <a href="#ref-for-animation-start-time④⑨">(3)</a> <a
                    href="#ref-for-animation-start-time⑤⓪">(4)</a>
            <li><a href="#ref-for-animation-start-time⑤①">6.4. The Animation interface</a> <a
                    href="#ref-for-animation-start-time⑤②">(2)</a>
            <li><a href="#ref-for-animation-start-time⑤③">6.5.1. The EffectTiming and OptionalEffectTiming
                    dictionaries</a>
            <li><a href="#ref-for-animation-start-time⑤④">6.5.5. The ComputedEffectTiming dictionary</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="animation-hold-time">
        <b><a href="#animation-hold-time">#animation-hold-time</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-animation-hold-time">4.4. Animations</a>
            <li><a href="#ref-for-animation-hold-time①">4.4.1. Setting the timeline of an animation</a>
            <li><a href="#ref-for-animation-hold-time②">4.4.3. The current time of an animation</a> <a
                    href="#ref-for-animation-hold-time③">(2)</a>
            <li><a href="#ref-for-animation-hold-time④">4.4.4. Setting the current time of an animation</a> <a
                    href="#ref-for-animation-hold-time⑤">(2)</a> <a href="#ref-for-animation-hold-time⑥">(3)</a> <a
                    href="#ref-for-animation-hold-time⑦">(4)</a>
            <li><a href="#ref-for-animation-hold-time⑧">4.4.5. Setting the start time of an animation</a> <a
                    href="#ref-for-animation-hold-time⑨">(2)</a> <a href="#ref-for-animation-hold-time①⓪">(3)</a> <a
                    href="#ref-for-animation-hold-time①①">(4)</a>
            <li><a href="#ref-for-animation-hold-time①②">4.4.8. Playing an animation</a> <a
                    href="#ref-for-animation-hold-time①③">(2)</a> <a href="#ref-for-animation-hold-time①④">(3)</a> <a
                    href="#ref-for-animation-hold-time①⑤">(4)</a> <a href="#ref-for-animation-hold-time①⑥">(5)</a> <a
                    href="#ref-for-animation-hold-time①⑦">(6)</a> <a href="#ref-for-animation-hold-time①⑧">(7)</a> <a
                    href="#ref-for-animation-hold-time①⑨">(8)</a> <a href="#ref-for-animation-hold-time②⓪">(9)</a>
            <li><a href="#ref-for-animation-hold-time②①">4.4.9. Pausing an animation</a> <a
                    href="#ref-for-animation-hold-time②②">(2)</a> <a href="#ref-for-animation-hold-time②③">(3)</a> <a
                    href="#ref-for-animation-hold-time②④">(4)</a> <a href="#ref-for-animation-hold-time②⑤">(5)</a>
            <li><a href="#ref-for-animation-hold-time②⑥">4.4.12. Updating the finished state</a> <a
                    href="#ref-for-animation-hold-time②⑦">(2)</a> <a href="#ref-for-animation-hold-time②⑧">(3)</a> <a
                    href="#ref-for-animation-hold-time②⑨">(4)</a> <a href="#ref-for-animation-hold-time③⓪">(5)</a> <a
                    href="#ref-for-animation-hold-time③①">(6)</a> <a href="#ref-for-animation-hold-time③②">(7)</a> <a
                    href="#ref-for-animation-hold-time③③">(8)</a> <a href="#ref-for-animation-hold-time③④">(9)</a> <a
                    href="#ref-for-animation-hold-time③⑤">(10)</a> <a href="#ref-for-animation-hold-time③⑥">(11)</a>
            <li><a href="#ref-for-animation-hold-time③⑦">4.4.13. Finishing an animation</a> <a
                    href="#ref-for-animation-hold-time③⑧">(2)</a>
            <li><a href="#ref-for-animation-hold-time③⑨">4.4.14. Canceling an animation</a>
            <li><a href="#ref-for-animation-hold-time④⓪">4.4.15.2. Seamlessly updating the playback rate of an
                    animation</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="global-animation-list">
        <b><a href="#global-animation-list">#global-animation-list</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-global-animation-list">5.4.2. The effect stack</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="animation-set-the-timeline-of-an-animation">
        <b><a
                href="#animation-set-the-timeline-of-an-animation">#animation-set-the-timeline-of-an-animation</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-animation-set-the-timeline-of-an-animation">6.4. The Animation interface</a> <a
                    href="#ref-for-animation-set-the-timeline-of-an-animation①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="animation-set-the-associated-effect-of-an-animation">
        <b><a
                href="#animation-set-the-associated-effect-of-an-animation">#animation-set-the-associated-effect-of-an-animation</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-animation-set-the-associated-effect-of-an-animation">4.4.2. Setting the associated
                    effect of an animation</a>
            <li><a href="#ref-for-animation-set-the-associated-effect-of-an-animation①">6.4. The Animation interface</a>
                <a href="#ref-for-animation-set-the-associated-effect-of-an-animation②">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="animation-current-time">
        <b><a href="#animation-current-time">#animation-current-time</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-animation-current-time">4.3. Timelines</a> <a
                    href="#ref-for-animation-current-time①">(2)</a>
            <li><a href="#ref-for-animation-current-time②">4.4. Animations</a>
            <li><a href="#ref-for-animation-current-time③">4.4.1. Setting the timeline of an animation</a>
            <li><a href="#ref-for-animation-current-time④">4.4.3. The current time of an animation</a> <a
                    href="#ref-for-animation-current-time⑤">(2)</a> <a href="#ref-for-animation-current-time⑥">(3)</a>
                <a href="#ref-for-animation-current-time⑦">(4)</a>
            <li><a href="#ref-for-animation-current-time⑧">4.4.4. Setting the current time of an animation</a> <a
                    href="#ref-for-animation-current-time⑨">(2)</a> <a href="#ref-for-animation-current-time①⓪">(3)</a>
            <li><a href="#ref-for-animation-current-time①①">4.4.5. Setting the start time of an animation</a> <a
                    href="#ref-for-animation-current-time①②">(2)</a> <a href="#ref-for-animation-current-time①③">(3)</a>
            <li><a href="#ref-for-animation-current-time①④">4.4.8. Playing an animation</a> <a
                    href="#ref-for-animation-current-time①⑤">(2)</a> <a href="#ref-for-animation-current-time①⑥">(3)</a>
            <li><a href="#ref-for-animation-current-time①⑦">4.4.9. Pausing an animation</a> <a
                    href="#ref-for-animation-current-time①⑧">(2)</a> <a href="#ref-for-animation-current-time①⑨">(3)</a>
            <li><a href="#ref-for-animation-current-time②⓪">4.4.10. Reaching the end</a> <a
                    href="#ref-for-animation-current-time②①">(2)</a> <a href="#ref-for-animation-current-time②②">(3)</a>
                <a href="#ref-for-animation-current-time②③">(4)</a> <a href="#ref-for-animation-current-time②④">(5)</a>
            <li><a href="#ref-for-animation-current-time②⑤">4.4.12. Updating the finished state</a> <a
                    href="#ref-for-animation-current-time②⑥">(2)</a> <a href="#ref-for-animation-current-time②⑦">(3)</a>
                <a href="#ref-for-animation-current-time②⑧">(4)</a> <a href="#ref-for-animation-current-time②⑨">(5)</a>
                <a href="#ref-for-animation-current-time③⓪">(6)</a> <a href="#ref-for-animation-current-time③①">(7)</a>
            <li><a href="#ref-for-animation-current-time③②">4.4.14. Canceling an animation</a>
            <li><a href="#ref-for-animation-current-time③③">4.4.15. Speed control</a> <a
                    href="#ref-for-animation-current-time③④">(2)</a> <a href="#ref-for-animation-current-time③⑤">(3)</a>
            <li><a href="#ref-for-animation-current-time③⑥">4.4.15.1. Setting the playback rate of an animation</a>
            <li><a href="#ref-for-animation-current-time③⑦">4.4.15.2. Seamlessly updating the playback rate of an
                    animation</a> <a href="#ref-for-animation-current-time③⑧">(2)</a> <a
                    href="#ref-for-animation-current-time③⑨">(3)</a>
            <li><a href="#ref-for-animation-current-time④⓪">4.4.17. Play states</a> <a
                    href="#ref-for-animation-current-time④①">(2)</a> <a href="#ref-for-animation-current-time④②">(3)</a>
                <a href="#ref-for-animation-current-time④③">(4)</a> <a href="#ref-for-animation-current-time④④">(5)</a>
                <a href="#ref-for-animation-current-time④⑤">(6)</a> <a href="#ref-for-animation-current-time④⑥">(7)</a>
                <a href="#ref-for-animation-current-time④⑦">(8)</a>
            <li><a href="#ref-for-animation-current-time④⑧">4.5.4. Local time</a>
            <li><a href="#ref-for-animation-current-time④⑨">5.5.2. Removing replaced animations</a>
            <li><a href="#ref-for-animation-current-time⑤⓪">6.4. The Animation interface</a>
            <li><a href="#ref-for-animation-current-time⑤①">6.12. The AnimationPlaybackEvent interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="animation-silently-set-the-current-time">
        <b><a
                href="#animation-silently-set-the-current-time">#animation-silently-set-the-current-time</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-animation-silently-set-the-current-time">4.4.4. Setting the current time of an
                    animation</a>
            <li><a href="#ref-for-animation-silently-set-the-current-time①">4.4.13. Finishing an animation</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="animation-set-the-current-time">
        <b><a href="#animation-set-the-current-time">#animation-set-the-current-time</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-animation-set-the-current-time">4.4.12. Updating the finished state</a> <a
                    href="#ref-for-animation-set-the-current-time①">(2)</a>
            <li><a href="#ref-for-animation-set-the-current-time②">4.4.15.1. Setting the playback rate of an
                    animation</a>
            <li><a href="#ref-for-animation-set-the-current-time③">6.4. The Animation interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="set-the-start-time">
        <b><a href="#set-the-start-time">#set-the-start-time</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-set-the-start-time">2. Specification conventions</a>
            <li><a href="#ref-for-set-the-start-time①">6.4. The Animation interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="ready">
        <b><a href="#ready">#ready</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-ready">4.4.2. Setting the associated effect of an animation</a> <a
                    href="#ref-for-ready①">(2)</a>
            <li><a href="#ref-for-ready②">4.4.6. Waiting for the associated effect</a>
            <li><a href="#ref-for-ready③">4.4.8. Playing an animation</a> <a href="#ref-for-ready④">(2)</a> <a
                    href="#ref-for-ready⑤">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="current-ready-promise">
        <b><a href="#current-ready-promise">#current-ready-promise</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-current-ready-promise">4.4.4. Setting the current time of an animation</a>
            <li><a href="#ref-for-current-ready-promise①">4.4.5. Setting the start time of an animation</a>
            <li><a href="#ref-for-current-ready-promise②">4.4.7. The current ready promise</a> <a
                    href="#ref-for-current-ready-promise③">(2)</a> <a href="#ref-for-current-ready-promise④">(3)</a>
            <li><a href="#ref-for-current-ready-promise⑤">4.4.8. Playing an animation</a> <a
                    href="#ref-for-current-ready-promise⑥">(2)</a> <a href="#ref-for-current-ready-promise⑦">(3)</a> <a
                    href="#ref-for-current-ready-promise⑧">(4)</a>
            <li><a href="#ref-for-current-ready-promise⑨">4.4.9. Pausing an animation</a> <a
                    href="#ref-for-current-ready-promise①⓪">(2)</a>
            <li><a href="#ref-for-current-ready-promise①①">4.4.12. Updating the finished state</a>
            <li><a href="#ref-for-current-ready-promise①②">4.4.13. Finishing an animation</a> <a
                    href="#ref-for-current-ready-promise①③">(2)</a>
            <li><a href="#ref-for-current-ready-promise①④">4.4.14. Canceling an animation</a> <a
                    href="#ref-for-current-ready-promise①⑤">(2)</a> <a href="#ref-for-current-ready-promise①⑥">(3)</a>
            <li><a href="#ref-for-current-ready-promise①⑦">6.4. The Animation interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="play-an-animation">
        <b><a href="#play-an-animation">#play-an-animation</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-play-an-animation">4.4.9. Pausing an animation</a>
            <li><a href="#ref-for-play-an-animation①">4.4.15.2. Seamlessly updating the playback rate of an
                    animation</a>
            <li><a href="#ref-for-play-an-animation②">4.4.16. Reversing an animation</a> <a
                    href="#ref-for-play-an-animation③">(2)</a>
            <li><a href="#ref-for-play-an-animation④">6.4. The Animation interface</a>
            <li><a href="#ref-for-play-an-animation⑤">6.8. The Animatable interface mixin</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="pending-play-task">
        <b><a href="#pending-play-task">#pending-play-task</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-pending-play-task">4.4.2. Setting the associated effect of an animation</a>
            <li><a href="#ref-for-pending-play-task①">4.4.5. Setting the start time of an animation</a>
            <li><a href="#ref-for-pending-play-task②">4.4.7. The current ready promise</a> <a
                    href="#ref-for-pending-play-task③">(2)</a>
            <li><a href="#ref-for-pending-play-task④">4.4.8. Playing an animation</a> <a
                    href="#ref-for-pending-play-task⑤">(2)</a> <a href="#ref-for-pending-play-task⑥">(3)</a> <a
                    href="#ref-for-pending-play-task⑦">(4)</a>
            <li><a href="#ref-for-pending-play-task⑧">4.4.9. Pausing an animation</a> <a
                    href="#ref-for-pending-play-task⑨">(2)</a> <a href="#ref-for-pending-play-task①⓪">(3)</a>
            <li><a href="#ref-for-pending-play-task①①">4.4.12. Updating the finished state</a>
            <li><a href="#ref-for-pending-play-task①②">4.4.13. Finishing an animation</a>
            <li><a href="#ref-for-pending-play-task①③">4.4.14. Canceling an animation</a> <a
                    href="#ref-for-pending-play-task①④">(2)</a>
            <li><a href="#ref-for-pending-play-task①⑤">4.4.15.2. Seamlessly updating the playback rate of an
                    animation</a>
            <li><a href="#ref-for-pending-play-task①⑥">4.4.17. Play states</a> <a
                    href="#ref-for-pending-play-task①⑦">(2)</a>
            <li><a href="#ref-for-pending-play-task①⑧">6.4. The Animation interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="pause-an-animation">
        <b><a href="#pause-an-animation">#pause-an-animation</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-pause-an-animation">6.4. The Animation interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="pending-pause-task">
        <b><a href="#pending-pause-task">#pending-pause-task</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-pending-pause-task">4.4.2. Setting the associated effect of an animation</a>
            <li><a href="#ref-for-pending-pause-task①">4.4.4. Setting the current time of an animation</a> <a
                    href="#ref-for-pending-pause-task②">(2)</a>
            <li><a href="#ref-for-pending-pause-task③">4.4.5. Setting the start time of an animation</a>
            <li><a href="#ref-for-pending-pause-task④">4.4.7. The current ready promise</a>
            <li><a href="#ref-for-pending-pause-task⑤">4.4.8. Playing an animation</a> <a
                    href="#ref-for-pending-pause-task⑥">(2)</a>
            <li><a href="#ref-for-pending-pause-task⑦">4.4.9. Pausing an animation</a> <a
                    href="#ref-for-pending-pause-task⑧">(2)</a> <a href="#ref-for-pending-pause-task⑨">(3)</a>
            <li><a href="#ref-for-pending-pause-task①⓪">4.4.12. Updating the finished state</a>
            <li><a href="#ref-for-pending-pause-task①①">4.4.13. Finishing an animation</a> <a
                    href="#ref-for-pending-pause-task①②">(2)</a>
            <li><a href="#ref-for-pending-pause-task①③">4.4.14. Canceling an animation</a> <a
                    href="#ref-for-pending-pause-task①④">(2)</a>
            <li><a href="#ref-for-pending-pause-task①⑤">4.4.15.2. Seamlessly updating the playback rate of an
                    animation</a>
            <li><a href="#ref-for-pending-pause-task①⑥">4.4.17. Play states</a> <a
                    href="#ref-for-pending-pause-task①⑦">(2)</a>
            <li><a href="#ref-for-pending-pause-task①⑧">6.4. The Animation interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="current-finished-promise">
        <b><a href="#current-finished-promise">#current-finished-promise</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-current-finished-promise">4.4.8. Playing an animation</a>
            <li><a href="#ref-for-current-finished-promise①">4.4.11. The current finished promise</a>
            <li><a href="#ref-for-current-finished-promise②">4.4.12. Updating the finished state</a> <a
                    href="#ref-for-current-finished-promise③">(2)</a> <a
                    href="#ref-for-current-finished-promise④">(3)</a> <a
                    href="#ref-for-current-finished-promise⑤">(4)</a> <a
                    href="#ref-for-current-finished-promise⑥">(5)</a> <a
                    href="#ref-for-current-finished-promise⑦">(6)</a>
            <li><a href="#ref-for-current-finished-promise⑧">4.4.14. Canceling an animation</a> <a
                    href="#ref-for-current-finished-promise⑨">(2)</a> <a
                    href="#ref-for-current-finished-promise①⓪">(3)</a>
            <li><a href="#ref-for-current-finished-promise①①">5.2. Animating properties</a>
            <li><a href="#ref-for-current-finished-promise①②">6.4. The Animation interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="associated-effect-end">
        <b><a href="#associated-effect-end">#associated-effect-end</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-associated-effect-end">4.4.8. Playing an animation</a> <a
                    href="#ref-for-associated-effect-end①">(2)</a> <a href="#ref-for-associated-effect-end②">(3)</a> <a
                    href="#ref-for-associated-effect-end③">(4)</a>
            <li><a href="#ref-for-associated-effect-end④">4.4.9. Pausing an animation</a> <a
                    href="#ref-for-associated-effect-end⑤">(2)</a>
            <li><a href="#ref-for-associated-effect-end⑥">4.4.12. Updating the finished state</a> <a
                    href="#ref-for-associated-effect-end⑦">(2)</a> <a href="#ref-for-associated-effect-end⑧">(3)</a> <a
                    href="#ref-for-associated-effect-end⑨">(4)</a> <a href="#ref-for-associated-effect-end①⓪">(5)</a> <a
                    href="#ref-for-associated-effect-end①①">(6)</a>
            <li><a href="#ref-for-associated-effect-end①②">4.4.13. Finishing an animation</a> <a
                    href="#ref-for-associated-effect-end①③">(2)</a>
            <li><a href="#ref-for-associated-effect-end①④">4.4.15.1. Setting the playback rate of an animation</a> <a
                    href="#ref-for-associated-effect-end①⑤">(2)</a>
            <li><a href="#ref-for-associated-effect-end①⑥">4.4.17. Play states</a>
            <li><a href="#ref-for-associated-effect-end①⑦">6.4. The Animation interface</a> <a
                    href="#ref-for-associated-effect-end①⑧">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="previous-current-time">
        <b><a href="#previous-current-time">#previous-current-time</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-previous-current-time">4.4.4. Setting the current time of an animation</a>
            <li><a href="#ref-for-previous-current-time①">4.4.12. Updating the finished state</a> <a
                    href="#ref-for-previous-current-time②">(2)</a> <a href="#ref-for-previous-current-time③">(3)</a> <a
                    href="#ref-for-previous-current-time④">(4)</a> <a href="#ref-for-previous-current-time⑤">(5)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="update-an-animations-finished-state">
        <b><a href="#update-an-animations-finished-state">#update-an-animations-finished-state</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-update-an-animations-finished-state">4.3. Timelines</a>
            <li><a href="#ref-for-update-an-animations-finished-state①">4.4.1. Setting the timeline of an animation</a>
            <li><a href="#ref-for-update-an-animations-finished-state②">4.4.2. Setting the associated effect of an
                    animation</a>
            <li><a href="#ref-for-update-an-animations-finished-state③">4.4.4. Setting the current time of an
                    animation</a>
            <li><a href="#ref-for-update-an-animations-finished-state④">4.4.5. Setting the start time of an
                    animation</a>
            <li><a href="#ref-for-update-an-animations-finished-state⑤">4.4.8. Playing an animation</a> <a
                    href="#ref-for-update-an-animations-finished-state⑥">(2)</a>
            <li><a href="#ref-for-update-an-animations-finished-state⑦">4.4.9. Pausing an animation</a> <a
                    href="#ref-for-update-an-animations-finished-state⑧">(2)</a>
            <li><a href="#ref-for-update-an-animations-finished-state⑨">4.4.12. Updating the finished state</a>
            <li><a href="#ref-for-update-an-animations-finished-state①⓪">4.4.13. Finishing an animation</a>
            <li><a href="#ref-for-update-an-animations-finished-state①①">4.4.15.2. Seamlessly updating the playback rate
                    of an animation</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="finish-notification-steps">
        <b><a href="#finish-notification-steps">#finish-notification-steps</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-finish-notification-steps">4.4.12. Updating the finished state</a> <a
                    href="#ref-for-finish-notification-steps①">(2)</a> <a
                    href="#ref-for-finish-notification-steps②">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="finish-an-animation">
        <b><a href="#finish-an-animation">#finish-an-animation</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-finish-an-animation">4.4.12. Updating the finished state</a> <a
                    href="#ref-for-finish-an-animation①">(2)</a>
            <li><a href="#ref-for-finish-an-animation②">6.4. The Animation interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="cancel-an-animation">
        <b><a href="#cancel-an-animation">#cancel-an-animation</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-cancel-an-animation">4.4.12. Updating the finished state</a>
            <li><a href="#ref-for-cancel-an-animation①">6.4. The Animation interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="animation-reset-an-animations-pending-tasks">
        <b><a
                href="#animation-reset-an-animations-pending-tasks">#animation-reset-an-animations-pending-tasks</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-animation-reset-an-animations-pending-tasks">4.4.14. Canceling an animation</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="playback-rate">
        <b><a href="#playback-rate">#playback-rate</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-playback-rate">2. Specification conventions</a>
            <li><a href="#ref-for-playback-rate①">4.4.3. The current time of an animation</a> <a
                    href="#ref-for-playback-rate②">(2)</a>
            <li><a href="#ref-for-playback-rate③">4.4.4. Setting the current time of an animation</a> <a
                    href="#ref-for-playback-rate④">(2)</a>
            <li><a href="#ref-for-playback-rate⑤">4.4.5. Setting the start time of an animation</a>
            <li><a href="#ref-for-playback-rate⑥">4.4.8. Playing an animation</a> <a
                    href="#ref-for-playback-rate⑦">(2)</a> <a href="#ref-for-playback-rate⑧">(3)</a> <a
                    href="#ref-for-playback-rate⑨">(4)</a> <a href="#ref-for-playback-rate①⓪">(5)</a> <a
                    href="#ref-for-playback-rate①①">(6)</a> <a href="#ref-for-playback-rate①②">(7)</a>
            <li><a href="#ref-for-playback-rate①③">4.4.9. Pausing an animation</a> <a
                    href="#ref-for-playback-rate①④">(2)</a>
            <li><a href="#ref-for-playback-rate①⑤">4.4.10. Reaching the end</a> <a
                    href="#ref-for-playback-rate①⑥">(2)</a>
            <li><a href="#ref-for-playback-rate①⑦">4.4.12. Updating the finished state</a> <a
                    href="#ref-for-playback-rate①⑧">(2)</a> <a href="#ref-for-playback-rate①⑨">(3)</a> <a
                    href="#ref-for-playback-rate②⓪">(4)</a> <a href="#ref-for-playback-rate②①">(5)</a> <a
                    href="#ref-for-playback-rate②②">(6)</a>
            <li><a href="#ref-for-playback-rate②③">4.4.13. Finishing an animation</a> <a
                    href="#ref-for-playback-rate②④">(2)</a>
            <li><a href="#ref-for-playback-rate②⑤">4.4.15. Speed control</a> <a href="#ref-for-playback-rate②⑥">(2)</a>
            <li><a href="#ref-for-playback-rate②⑦">4.4.15.1. Setting the playback rate of an animation</a> <a
                    href="#ref-for-playback-rate②⑧">(2)</a>
            <li><a href="#ref-for-playback-rate②⑨">4.4.15.2. Seamlessly updating the playback rate of an animation</a>
                <a href="#ref-for-playback-rate③⓪">(2)</a> <a href="#ref-for-playback-rate③①">(3)</a>
            <li><a href="#ref-for-playback-rate③②">4.4.17. Play states</a>
            <li><a href="#ref-for-playback-rate③③">4.4.18.1. Sorting animation events</a> <a
                    href="#ref-for-playback-rate③④">(2)</a>
            <li><a href="#ref-for-playback-rate③⑤">4.5.5. Animation effect phases and
                    states</a> <a href="#ref-for-playback-rate③⑥">(2)</a> <a href="#ref-for-playback-rate③⑦">(3)</a> <a
                    href="#ref-for-playback-rate③⑧">(4)</a>
            <li><a href="#ref-for-playback-rate③⑨">6.4. The Animation interface</a> <a
                    href="#ref-for-playback-rate④⓪">(2)</a> <a href="#ref-for-playback-rate④①">(3)</a> <a
                    href="#ref-for-playback-rate④②">(4)</a> <a href="#ref-for-playback-rate④③">(5)</a> <a
                    href="#ref-for-playback-rate④④">(6)</a> <a href="#ref-for-playback-rate④⑤">(7)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="set-the-playback-rate">
        <b><a href="#set-the-playback-rate">#set-the-playback-rate</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-set-the-playback-rate">2. Specification conventions</a>
            <li><a href="#ref-for-set-the-playback-rate①">4.4.15.2. Seamlessly updating the playback rate of an
                    animation</a>
            <li><a href="#ref-for-set-the-playback-rate②">6.4. The Animation interface</a>
            <li><a href="#ref-for-set-the-playback-rate③">11. Changes since last publication</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="pending-playback-rate">
        <b><a href="#pending-playback-rate">#pending-playback-rate</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-pending-playback-rate">4.4.8. Playing an animation</a> <a
                    href="#ref-for-pending-playback-rate①">(2)</a>
            <li><a href="#ref-for-pending-playback-rate②">4.4.15.1. Setting the playback rate of an animation</a>
            <li><a href="#ref-for-pending-playback-rate③">4.4.15.2. Seamlessly updating the playback rate of an
                    animation</a> <a href="#ref-for-pending-playback-rate④">(2)</a> <a
                    href="#ref-for-pending-playback-rate⑤">(3)</a> <a href="#ref-for-pending-playback-rate⑥">(4)</a> <a
                    href="#ref-for-pending-playback-rate⑦">(5)</a> <a href="#ref-for-pending-playback-rate⑧">(6)</a> <a
                    href="#ref-for-pending-playback-rate⑨">(7)</a> <a href="#ref-for-pending-playback-rate①⓪">(8)</a> <a
                    href="#ref-for-pending-playback-rate①①">(9)</a> <a href="#ref-for-pending-playback-rate①②">(10)</a>
                <a href="#ref-for-pending-playback-rate①③">(11)</a>
            <li><a href="#ref-for-pending-playback-rate①④">4.4.16. Reversing an animation</a> <a
                    href="#ref-for-pending-playback-rate①⑤">(2)</a> <a href="#ref-for-pending-playback-rate①⑥">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="effective-playback-rate">
        <b><a href="#effective-playback-rate">#effective-playback-rate</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-effective-playback-rate">4.4.8. Playing an animation</a> <a
                    href="#ref-for-effective-playback-rate①">(2)</a>
            <li><a href="#ref-for-effective-playback-rate②">4.4.13. Finishing an animation</a> <a
                    href="#ref-for-effective-playback-rate③">(2)</a>
            <li><a href="#ref-for-effective-playback-rate④">4.4.15.1. Setting the playback rate of an animation</a>
            <li><a href="#ref-for-effective-playback-rate⑤">4.4.15.2. Seamlessly updating the playback rate of an
                    animation</a>
            <li><a href="#ref-for-effective-playback-rate⑥">4.4.16. Reversing an animation</a> <a
                    href="#ref-for-effective-playback-rate⑦">(2)</a>
            <li><a href="#ref-for-effective-playback-rate⑧">4.4.17. Play states</a> <a
                    href="#ref-for-effective-playback-rate⑨">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="apply-any-pending-playback-rate">
        <b><a href="#apply-any-pending-playback-rate">#apply-any-pending-playback-rate</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-apply-any-pending-playback-rate">4.4.4. Setting the current time of an animation</a>
            <li><a href="#ref-for-apply-any-pending-playback-rate①">4.4.5. Setting the start time of an animation</a>
            <li><a href="#ref-for-apply-any-pending-playback-rate②">4.4.8. Playing an animation</a> <a
                    href="#ref-for-apply-any-pending-playback-rate③">(2)</a> <a
                    href="#ref-for-apply-any-pending-playback-rate④">(3)</a>
            <li><a href="#ref-for-apply-any-pending-playback-rate⑤">4.4.9. Pausing an animation</a>
            <li><a href="#ref-for-apply-any-pending-playback-rate⑥">4.4.13. Finishing an animation</a>
            <li><a href="#ref-for-apply-any-pending-playback-rate⑦">4.4.14. Canceling an animation</a>
            <li><a href="#ref-for-apply-any-pending-playback-rate⑧">4.4.15.2. Seamlessly updating the playback rate of
                    an animation</a> <a href="#ref-for-apply-any-pending-playback-rate⑨">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="seamlessly-update-the-playback-rate">
        <b><a href="#seamlessly-update-the-playback-rate">#seamlessly-update-the-playback-rate</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-seamlessly-update-the-playback-rate">6.4. The Animation interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="reverse-an-animation">
        <b><a href="#reverse-an-animation">#reverse-an-animation</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-reverse-an-animation">6.4. The Animation interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="animation-play-state">
        <b><a href="#animation-play-state">#animation-play-state</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-animation-play-state">4.4.9. Pausing an animation</a>
            <li><a href="#ref-for-animation-play-state①">4.4.12. Updating the finished state</a> <a
                    href="#ref-for-animation-play-state②">(2)</a>
            <li><a href="#ref-for-animation-play-state③">4.4.14. Canceling an animation</a>
            <li><a href="#ref-for-animation-play-state④">4.4.15. Speed control</a>
            <li><a href="#ref-for-animation-play-state⑤">4.4.15.2. Seamlessly updating the playback rate of an
                    animation</a>
            <li><a href="#ref-for-animation-play-state⑥">4.4.17. Play states</a>
            <li><a href="#ref-for-animation-play-state⑦">4.5.5. Animation effect phases and
                    states</a>
            <li><a href="#ref-for-animation-play-state⑧">5.5.2. Removing replaced animations</a>
            <li><a href="#ref-for-animation-play-state⑨">6.4. The Animation interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="play-state-idle">
        <b><a href="#play-state-idle">#play-state-idle</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-play-state-idle">4.4.13. Finishing an animation</a>
            <li><a href="#ref-for-play-state-idle①">4.4.14. Canceling an animation</a>
            <li><a href="#ref-for-play-state-idle②">4.4.15.2. Seamlessly updating the playback rate of an animation</a>
            <li><a href="#ref-for-play-state-idle③">4.4.17. Play states</a>
            <li><a href="#ref-for-play-state-idle④">4.4.18.3. Types of animation playback events</a>
            <li><a href="#ref-for-play-state-idle⑤">4.5.5. Animation effect phases and
                    states</a>
            <li><a href="#ref-for-play-state-idle⑥">6.4.1. The AnimationPlayState enumeration</a>
            <li><a href="#ref-for-play-state-idle⑦">6.12. The AnimationPlaybackEvent interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="play-state-paused">
        <b><a href="#play-state-paused">#play-state-paused</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-play-state-paused">4.4.9. Pausing an animation</a> <a
                    href="#ref-for-play-state-paused①">(2)</a>
            <li><a href="#ref-for-play-state-paused②">4.4.15. Speed control</a>
            <li><a href="#ref-for-play-state-paused③">4.4.15.2. Seamlessly updating the playback rate of an
                    animation</a>
            <li><a href="#ref-for-play-state-paused④">4.4.17. Play states</a> <a
                    href="#ref-for-play-state-paused⑤">(2)</a> <a href="#ref-for-play-state-paused⑥">(3)</a>
            <li><a href="#ref-for-play-state-paused⑦">6.4.1. The AnimationPlayState enumeration</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="play-state-finished">
        <b><a href="#play-state-finished">#play-state-finished</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-play-state-finished">4.4.1. Setting the timeline of an animation</a>
            <li><a href="#ref-for-play-state-finished①">4.4.9. Pausing an animation</a>
            <li><a href="#ref-for-play-state-finished②">4.4.11. The current finished promise</a>
            <li><a href="#ref-for-play-state-finished③">4.4.12. Updating the finished state</a> <a
                    href="#ref-for-play-state-finished④">(2)</a> <a href="#ref-for-play-state-finished⑤">(3)</a> <a
                    href="#ref-for-play-state-finished⑥">(4)</a>
            <li><a href="#ref-for-play-state-finished⑦">4.4.15.2. Seamlessly updating the playback rate of an
                    animation</a> <a href="#ref-for-play-state-finished⑧">(2)</a>
            <li><a href="#ref-for-play-state-finished⑨">4.4.17. Play states</a> <a
                    href="#ref-for-play-state-finished①⓪">(2)</a> <a href="#ref-for-play-state-finished①①">(3)</a>
            <li><a href="#ref-for-play-state-finished①②">4.4.18.3. Types of animation playback events</a>
            <li><a href="#ref-for-play-state-finished①③">4.5.5. Animation effect phases and
                    states</a>
            <li><a href="#ref-for-play-state-finished①④">5.5.2. Removing replaced animations</a>
            <li><a href="#ref-for-play-state-finished①⑤">6.4.1. The AnimationPlayState enumeration</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="play-state-running">
        <b><a href="#play-state-running">#play-state-running</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-play-state-running">4.4.7. The current ready promise</a>
            <li><a href="#ref-for-play-state-running①">4.4.15.2. Seamlessly updating the playback rate of an
                    animation</a>
            <li><a href="#ref-for-play-state-running②">4.4.17. Play states</a>
            <li><a href="#ref-for-play-state-running③">6.4.1. The AnimationPlayState enumeration</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="animation-events">
        <b><a href="#animation-events">#animation-events</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-animation-events">4.3. Timelines</a> <a href="#ref-for-animation-events①">(2)</a>
            <li><a href="#ref-for-animation-events②">4.4.18. Animation events</a> <a
                    href="#ref-for-animation-events③">(2)</a> <a href="#ref-for-animation-events④">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="pending-animation-event-queue">
        <b><a href="#pending-animation-event-queue">#pending-animation-event-queue</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-pending-animation-event-queue">4.3. Timelines</a> <a
                    href="#ref-for-pending-animation-event-queue①">(2)</a>
            <li><a href="#ref-for-pending-animation-event-queue②">4.4.12. Updating the finished state</a>
            <li><a href="#ref-for-pending-animation-event-queue③">4.4.14. Canceling an animation</a>
            <li><a href="#ref-for-pending-animation-event-queue④">5.5.2. Removing replaced animations</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="scheduled-event-time">
        <b><a href="#scheduled-event-time">#scheduled-event-time</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-scheduled-event-time">4.3. Timelines</a> <a
                    href="#ref-for-scheduled-event-time①">(2)</a>
            <li><a href="#ref-for-scheduled-event-time②">4.4.12. Updating the finished state</a>
            <li><a href="#ref-for-scheduled-event-time③">4.4.14. Canceling an animation</a> <a
                    href="#ref-for-scheduled-event-time④">(2)</a>
            <li><a href="#ref-for-scheduled-event-time⑤">4.4.18. Animation events</a>
            <li><a href="#ref-for-scheduled-event-time⑥">5.5.2. Removing replaced animations</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="animation-time-to-timeline-time">
        <b><a href="#animation-time-to-timeline-time">#animation-time-to-timeline-time</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-animation-time-to-timeline-time">4.4.18.1. Sorting animation events</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="animation-time-to-origin-relative-time">
        <b><a
                href="#animation-time-to-origin-relative-time">#animation-time-to-origin-relative-time</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-animation-time-to-origin-relative-time">4.4.12. Updating the finished state</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="animation-playback-events">
        <b><a href="#animation-playback-events">#animation-playback-events</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-animation-playback-events">4.4.18. Animation events</a>
            <li><a href="#ref-for-animation-playback-events①">4.4.18.2. Animation playback events</a>
            <li><a href="#ref-for-animation-playback-events②">6.12. The AnimationPlaybackEvent interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="finish-event">
        <b><a href="#finish-event">#finish-event</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-finish-event">4.4.12. Updating the finished state</a> <a
                    href="#ref-for-finish-event①">(2)</a>
            <li><a href="#ref-for-finish-event②">6.4. The Animation interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="cancel-event">
        <b><a href="#cancel-event">#cancel-event</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-cancel-event">4.4.12. Updating the finished state</a>
            <li><a href="#ref-for-cancel-event①">4.4.14. Canceling an animation</a>
            <li><a href="#ref-for-cancel-event②">4.4.18.3. Types of animation playback events</a>
            <li><a href="#ref-for-cancel-event③">6.4. The Animation interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="remove-event">
        <b><a href="#remove-event">#remove-event</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-remove-event">5.5.2. Removing replaced animations</a>
            <li><a href="#ref-for-remove-event①">6.4. The Animation interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="animation-effect">
        <b><a href="#animation-effect">#animation-effect</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-animation-effect">2. Specification conventions</a>
            <li><a href="#ref-for-animation-effect①">4.3. Timelines</a>
            <li><a href="#ref-for-animation-effect②">4.4. Animations</a> <a href="#ref-for-animation-effect③">(2)</a> <a
                    href="#ref-for-animation-effect④">(3)</a> <a href="#ref-for-animation-effect⑤">(4)</a>
            <li><a href="#ref-for-animation-effect⑥">4.5.1. Relationship between animation effects
                    and animations</a> <a href="#ref-for-animation-effect⑦">(2)</a> <a
                    href="#ref-for-animation-effect⑧">(3)</a>
            <li><a href="#ref-for-animation-effect⑨">4.5.2. Types of animation effects</a> <a
                    href="#ref-for-animation-effect①⓪">(2)</a> <a href="#ref-for-animation-effect①①">(3)</a>
            <li><a href="#ref-for-animation-effect①②">4.5.3. The active interval</a> <a
                    href="#ref-for-animation-effect①③">(2)</a> <a href="#ref-for-animation-effect①④">(3)</a> <a
                    href="#ref-for-animation-effect①⑤">(4)</a> <a href="#ref-for-animation-effect①⑥">(5)</a> <a
                    href="#ref-for-animation-effect①⑦">(6)</a> <a href="#ref-for-animation-effect①⑧">(7)</a> <a
                    href="#ref-for-animation-effect①⑨">(8)</a> <a href="#ref-for-animation-effect②⓪">(9)</a>
            <li><a href="#ref-for-animation-effect②①">4.5.4. Local time</a> <a
                    href="#ref-for-animation-effect②②">(2)</a>
            <li><a href="#ref-for-animation-effect②③">4.5.5. Animation effect phases and
                    states</a> <a href="#ref-for-animation-effect②④">(2)</a> <a
                    href="#ref-for-animation-effect②⑤">(3)</a> <a href="#ref-for-animation-effect②⑥">(4)</a> <a
                    href="#ref-for-animation-effect②⑦">(5)</a> <a href="#ref-for-animation-effect②⑧">(6)</a> <a
                    href="#ref-for-animation-effect②⑨">(7)</a> <a href="#ref-for-animation-effect③⓪">(8)</a> <a
                    href="#ref-for-animation-effect③①">(9)</a> <a href="#ref-for-animation-effect③②">(10)</a> <a
                    href="#ref-for-animation-effect③③">(11)</a> <a href="#ref-for-animation-effect③④">(12)</a> <a
                    href="#ref-for-animation-effect③⑤">(13)</a> <a href="#ref-for-animation-effect③⑥">(14)</a> <a
                    href="#ref-for-animation-effect③⑦">(15)</a> <a href="#ref-for-animation-effect③⑧">(16)</a> <a
                    href="#ref-for-animation-effect③⑨">(17)</a> <a href="#ref-for-animation-effect④⓪">(18)</a> <a
                    href="#ref-for-animation-effect④①">(19)</a> <a href="#ref-for-animation-effect④②">(20)</a> <a
                    href="#ref-for-animation-effect④③">(21)</a> <a href="#ref-for-animation-effect④④">(22)</a> <a
                    href="#ref-for-animation-effect④⑤">(23)</a> <a href="#ref-for-animation-effect④⑥">(24)</a> <a
                    href="#ref-for-animation-effect④⑦">(25)</a> <a href="#ref-for-animation-effect④⑧">(26)</a>
            <li><a href="#ref-for-animation-effect④⑨">4.5.6. Relevant animations</a> <a
                    href="#ref-for-animation-effect⑤⓪">(2)</a> <a href="#ref-for-animation-effect⑤①">(3)</a>
            <li><a href="#ref-for-animation-effect⑤②">4.6. Fill behavior</a>
            <li><a href="#ref-for-animation-effect⑤③">4.7.2. Controlling iteration</a> <a
                    href="#ref-for-animation-effect⑤④">(2)</a> <a href="#ref-for-animation-effect⑤⑤">(3)</a> <a
                    href="#ref-for-animation-effect⑤⑥">(4)</a> <a href="#ref-for-animation-effect⑤⑦">(5)</a> <a
                    href="#ref-for-animation-effect⑤⑧">(6)</a>
            <li><a href="#ref-for-animation-effect⑤⑨">4.8.1. Overview</a>
            <li><a href="#ref-for-animation-effect⑥⓪">4.8.3.1. Calculating the active time</a>
            <li><a href="#ref-for-animation-effect⑥①">4.9. Direction control</a> <a
                    href="#ref-for-animation-effect⑥②">(2)</a>
            <li><a href="#ref-for-animation-effect⑥③">4.10. Time transformations</a> <a
                    href="#ref-for-animation-effect⑥④">(2)</a>
            <li><a href="#ref-for-animation-effect⑥⑤">4.10.1. Calculating the transformed progress</a>
            <li><a href="#ref-for-animation-effect⑥⑥">4.11. The iteration progress</a>
            <li><a href="#ref-for-animation-effect⑥⑦">5. Animation model</a>
            <li><a href="#ref-for-animation-effect⑥⑧">5.1. Introduction</a> <a
                    href="#ref-for-animation-effect⑥⑨">(2)</a>
            <li><a href="#ref-for-animation-effect⑦⓪">5.2. Animating properties</a> <a
                    href="#ref-for-animation-effect⑦①">(2)</a>
            <li><a href="#ref-for-animation-effect⑦②">5.3. Keyframe effects</a>
            <li><a href="#ref-for-animation-effect⑦③">5.4. Combining effects</a> <a
                    href="#ref-for-animation-effect⑦④">(2)</a>
            <li><a href="#ref-for-animation-effect⑦⑤">5.4.2. The effect stack</a> <a
                    href="#ref-for-animation-effect⑦⑥">(2)</a>
            <li><a href="#ref-for-animation-effect⑦⑦">5.5.1. Replace state</a>
            <li><a href="#ref-for-animation-effect⑦⑧">5.5.2. Removing replaced animations</a> <a
                    href="#ref-for-animation-effect⑦⑨">(2)</a> <a href="#ref-for-animation-effect⑧⓪">(3)</a>
            <li><a href="#ref-for-animation-effect⑧①">5.6. Side effects of animation</a>
            <li><a href="#ref-for-animation-effect⑧②">6.4. The Animation interface</a> <a
                    href="#ref-for-animation-effect⑧③">(2)</a> <a href="#ref-for-animation-effect⑧④">(3)</a> <a
                    href="#ref-for-animation-effect⑧⑤">(4)</a> <a href="#ref-for-animation-effect⑧⑥">(5)</a> <a
                    href="#ref-for-animation-effect⑧⑦">(6)</a>
            <li><a href="#ref-for-animation-effect⑧⑧">6.5. The AnimationEffect interface</a> <a
                    href="#ref-for-animation-effect⑧⑨">(2)</a> <a href="#ref-for-animation-effect⑨⓪">(3)</a> <a
                    href="#ref-for-animation-effect⑨①">(4)</a>
            <li><a href="#ref-for-animation-effect⑨②">6.5.1. The EffectTiming and OptionalEffectTiming dictionaries</a>
                <a href="#ref-for-animation-effect⑨③">(2)</a> <a href="#ref-for-animation-effect⑨④">(3)</a> <a
                    href="#ref-for-animation-effect⑨⑤">(4)</a> <a href="#ref-for-animation-effect⑨⑥">(5)</a> <a
                    href="#ref-for-animation-effect⑨⑦">(6)</a> <a href="#ref-for-animation-effect⑨⑧">(7)</a> <a
                    href="#ref-for-animation-effect⑨⑨">(8)</a> <a href="#ref-for-animation-effect①⓪⓪">(9)</a>
            <li><a href="#ref-for-animation-effect①⓪①">6.5.2. The FillMode enumeration</a>
            <li><a href="#ref-for-animation-effect①⓪②">6.5.5. The ComputedEffectTiming dictionary</a> <a
                    href="#ref-for-animation-effect①⓪③">(2)</a> <a href="#ref-for-animation-effect①⓪④">(3)</a> <a
                    href="#ref-for-animation-effect①⓪⑤">(4)</a> <a href="#ref-for-animation-effect①⓪⑥">(5)</a> <a
                    href="#ref-for-animation-effect①⓪⑦">(6)</a> <a href="#ref-for-animation-effect①⓪⑧">(7)</a>
            <li><a href="#ref-for-animation-effect①⓪⑨">6.6. The KeyframeEffect interface</a> <a
                    href="#ref-for-animation-effect①①⓪">(2)</a> <a href="#ref-for-animation-effect①①①">(3)</a>
            <li><a href="#ref-for-animation-effect①①②">6.7. The CompositeOperation and CompositeOperationOrAuto
                    enumerations</a> <a href="#ref-for-animation-effect①①③">(2)</a> <a
                    href="#ref-for-animation-effect①①④">(3)</a>
            <li><a href="#ref-for-animation-effect①①⑤">6.8. The Animatable interface mixin</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="associated-with-an-animation">
        <b><a href="#associated-with-an-animation">#associated-with-an-animation</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-associated-with-an-animation">4.5.1. Relationship between animation effects
                    and animations</a> <a href="#ref-for-associated-with-an-animation①">(2)</a>
            <li><a href="#ref-for-associated-with-an-animation②">4.5.4. Local time</a>
            <li><a href="#ref-for-associated-with-an-animation③">4.5.5. Animation effect phases and
                    states</a> <a href="#ref-for-associated-with-an-animation④">(2)</a> <a
                    href="#ref-for-associated-with-an-animation⑤">(3)</a> <a
                    href="#ref-for-associated-with-an-animation⑥">(4)</a> <a
                    href="#ref-for-associated-with-an-animation⑦">(5)</a>
            <li><a href="#ref-for-associated-with-an-animation⑧">5.4.2. The effect stack</a>
            <li><a href="#ref-for-associated-with-an-animation⑨">5.5.2. Removing replaced animations</a> <a
                    href="#ref-for-associated-with-an-animation①⓪">(2)</a>
            <li><a href="#ref-for-associated-with-an-animation①①">6.4. The Animation interface</a> <a
                    href="#ref-for-associated-with-an-animation①②">(2)</a> <a
                    href="#ref-for-associated-with-an-animation①③">(3)</a> <a
                    href="#ref-for-associated-with-an-animation①④">(4)</a>
            <li><a href="#ref-for-associated-with-an-animation①⑤">6.5.5. The ComputedEffectTiming dictionary</a> <a
                    href="#ref-for-associated-with-an-animation①⑥">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="associated-with-a-timeline">
        <b><a href="#associated-with-a-timeline">#associated-with-a-timeline</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-associated-with-a-timeline">4.3. Timelines</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="active-interval">
        <b><a href="#active-interval">#active-interval</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-active-interval">4.5.3. The active interval</a> <a
                    href="#ref-for-active-interval①">(2)</a> <a href="#ref-for-active-interval②">(3)</a> <a
                    href="#ref-for-active-interval③">(4)</a> <a href="#ref-for-active-interval④">(5)</a> <a
                    href="#ref-for-active-interval⑤">(6)</a> <a href="#ref-for-active-interval⑥">(7)</a> <a
                    href="#ref-for-active-interval⑦">(8)</a> <a href="#ref-for-active-interval⑧">(9)</a>
            <li><a href="#ref-for-active-interval⑨">4.5.5. Animation effect phases and
                    states</a> <a href="#ref-for-active-interval①⓪">(2)</a> <a href="#ref-for-active-interval①①">(3)</a>
            <li><a href="#ref-for-active-interval①②">4.6.1. Fill modes</a>
            <li><a href="#ref-for-active-interval①③">4.7.1. Iteration intervals</a> <a
                    href="#ref-for-active-interval①④">(2)</a>
            <li><a href="#ref-for-active-interval①⑤">4.8.1. Overview</a>
            <li><a href="#ref-for-active-interval①⑥">6.5.1. The EffectTiming and OptionalEffectTiming dictionaries</a>
                <a href="#ref-for-active-interval①⑦">(2)</a> <a href="#ref-for-active-interval①⑧">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="start-delay">
        <b><a href="#start-delay">#start-delay</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-start-delay">4.5.3. The active interval</a> <a href="#ref-for-start-delay①">(2)</a> <a
                    href="#ref-for-start-delay②">(3)</a> <a href="#ref-for-start-delay③">(4)</a> <a
                    href="#ref-for-start-delay④">(5)</a> <a href="#ref-for-start-delay⑤">(6)</a>
            <li><a href="#ref-for-start-delay⑥">4.5.5. Animation effect phases and
                    states</a> <a href="#ref-for-start-delay⑦">(2)</a> <a href="#ref-for-start-delay⑧">(3)</a> <a
                    href="#ref-for-start-delay⑨">(4)</a> <a href="#ref-for-start-delay①⓪">(5)</a>
            <li><a href="#ref-for-start-delay①①">4.8.1. Overview</a>
            <li><a href="#ref-for-start-delay①②">4.8.3.1. Calculating the active time</a> <a
                    href="#ref-for-start-delay①③">(2)</a> <a href="#ref-for-start-delay①④">(3)</a> <a
                    href="#ref-for-start-delay①⑤">(4)</a>
            <li><a href="#ref-for-start-delay①⑥">6.5.1. The EffectTiming and OptionalEffectTiming dictionaries</a>
            <li><a href="#ref-for-start-delay①⑦">6.5.4. Updating the timing of an AnimationEffect</a>
            <li><a href="#ref-for-start-delay①⑧">6.6. The KeyframeEffect interface</a>
            <li><a href="#ref-for-start-delay①⑨">6.6.1. Creating a new KeyframeEffect object</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="end-delay">
        <b><a href="#end-delay">#end-delay</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-end-delay">4.5.3. The active interval</a> <a href="#ref-for-end-delay①">(2)</a>
            <li><a href="#ref-for-end-delay②">4.5.5. Animation effect phases and
                    states</a> <a href="#ref-for-end-delay③">(2)</a>
            <li><a href="#ref-for-end-delay④">6.5.1. The EffectTiming and OptionalEffectTiming dictionaries</a>
            <li><a href="#ref-for-end-delay⑤">6.5.4. Updating the timing of an AnimationEffect</a>
            <li><a href="#ref-for-end-delay⑥">6.5.5. The ComputedEffectTiming dictionary</a>
            <li><a href="#ref-for-end-delay⑦">6.6. The KeyframeEffect interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="end-time">
        <b><a href="#end-time">#end-time</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-end-time">4.4.10. Reaching the end</a> <a href="#ref-for-end-time①">(2)</a>
            <li><a href="#ref-for-end-time②">4.4.12. Updating the finished state</a>
            <li><a href="#ref-for-end-time③">4.5.3. The active interval</a>
            <li><a href="#ref-for-end-time④">4.5.5. Animation effect phases and
                    states</a> <a href="#ref-for-end-time⑤">(2)</a> <a href="#ref-for-end-time⑥">(3)</a> <a
                    href="#ref-for-end-time⑦">(4)</a>
            <li><a href="#ref-for-end-time⑧">6.5.1. The EffectTiming and OptionalEffectTiming dictionaries</a>
            <li><a href="#ref-for-end-time⑨">6.5.5. The ComputedEffectTiming dictionary</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="local-time">
        <b><a href="#local-time">#local-time</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-local-time">4.5.5. Animation effect phases and
                    states</a> <a href="#ref-for-local-time①">(2)</a> <a href="#ref-for-local-time②">(3)</a> <a
                    href="#ref-for-local-time③">(4)</a> <a href="#ref-for-local-time④">(5)</a> <a
                    href="#ref-for-local-time⑤">(6)</a> <a href="#ref-for-local-time⑥">(7)</a> <a
                    href="#ref-for-local-time⑦">(8)</a> <a href="#ref-for-local-time⑧">(9)</a> <a
                    href="#ref-for-local-time⑨">(10)</a> <a href="#ref-for-local-time①⓪">(11)</a>
            <li><a href="#ref-for-local-time①①">4.8.1. Overview</a> <a href="#ref-for-local-time①②">(2)</a> <a
                    href="#ref-for-local-time①③">(3)</a> <a href="#ref-for-local-time①④">(4)</a> <a
                    href="#ref-for-local-time①⑤">(5)</a>
            <li><a href="#ref-for-local-time①⑥">4.8.3.1. Calculating the active time</a> <a
                    href="#ref-for-local-time①⑦">(2)</a> <a href="#ref-for-local-time①⑧">(3)</a> <a
                    href="#ref-for-local-time①⑨">(4)</a> <a href="#ref-for-local-time②⓪">(5)</a>
            <li><a href="#ref-for-local-time②①">6.5.5. The ComputedEffectTiming dictionary</a> <a
                    href="#ref-for-local-time②②">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="animation-direction">
        <b><a href="#animation-direction">#animation-direction</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-animation-direction">4.5.5. Animation effect phases and
                    states</a> <a href="#ref-for-animation-direction①">(2)</a> <a
                    href="#ref-for-animation-direction②">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="before-active-boundary-time">
        <b><a href="#before-active-boundary-time">#before-active-boundary-time</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-before-active-boundary-time">4.5.5. Animation effect phases and
                    states</a> <a href="#ref-for-before-active-boundary-time①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="active-after-boundary-time">
        <b><a href="#active-after-boundary-time">#active-after-boundary-time</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-active-after-boundary-time">4.5.5. Animation effect phases and
                    states</a> <a href="#ref-for-active-after-boundary-time①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="animation-effect-before-phase">
        <b><a href="#animation-effect-before-phase">#animation-effect-before-phase</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-animation-effect-before-phase">4.5.5. Animation effect phases and
                    states</a> <a href="#ref-for-animation-effect-before-phase①">(2)</a> <a
                    href="#ref-for-animation-effect-before-phase②">(3)</a>
            <li><a href="#ref-for-animation-effect-before-phase③">4.6.1. Fill modes</a> <a
                    href="#ref-for-animation-effect-before-phase④">(2)</a>
            <li><a href="#ref-for-animation-effect-before-phase⑤">4.8.3.1. Calculating the active time</a>
            <li><a href="#ref-for-animation-effect-before-phase⑥">4.8.3.2. Calculating the overall progress</a>
            <li><a href="#ref-for-animation-effect-before-phase⑦">4.10.1. Calculating the transformed progress</a>
            <li><a href="#ref-for-animation-effect-before-phase⑧">5.6. Side effects of animation</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="animation-effect-after-phase">
        <b><a href="#animation-effect-after-phase">#animation-effect-after-phase</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-animation-effect-after-phase">4.5.5. Animation effect phases and
                    states</a> <a href="#ref-for-animation-effect-after-phase①">(2)</a> <a
                    href="#ref-for-animation-effect-after-phase②">(3)</a>
            <li><a href="#ref-for-animation-effect-after-phase③">4.6.1. Fill modes</a> <a
                    href="#ref-for-animation-effect-after-phase④">(2)</a>
            <li><a href="#ref-for-animation-effect-after-phase⑤">4.8.3.1. Calculating the active time</a>
            <li><a href="#ref-for-animation-effect-after-phase⑥">4.8.3.3. Calculating the simple iteration progress</a>
            <li><a href="#ref-for-animation-effect-after-phase⑦">4.8.4. Calculating the current iteration</a>
            <li><a href="#ref-for-animation-effect-after-phase⑧">4.10.1. Calculating the transformed progress</a>
            <li><a href="#ref-for-animation-effect-after-phase⑨">5.6. Side effects of animation</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="animation-effect-active-phase">
        <b><a href="#animation-effect-active-phase">#animation-effect-active-phase</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-animation-effect-active-phase">4.5.5. Animation effect phases and
                    states</a> <a href="#ref-for-animation-effect-active-phase①">(2)</a> <a
                    href="#ref-for-animation-effect-active-phase②">(3)</a> <a
                    href="#ref-for-animation-effect-active-phase③">(4)</a>
            <li><a href="#ref-for-animation-effect-active-phase④">4.6.1. Fill modes</a>
            <li><a href="#ref-for-animation-effect-active-phase⑤">4.8.3.1. Calculating the active time</a>
            <li><a href="#ref-for-animation-effect-active-phase⑥">4.8.3.3. Calculating the simple iteration progress</a>
            <li><a href="#ref-for-animation-effect-active-phase⑦">5.6. Side effects of animation</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="in-play">
        <b><a href="#in-play">#in-play</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-in-play">4.5.5. Animation effect phases and
                    states</a> <a href="#ref-for-in-play①">(2)</a> <a href="#ref-for-in-play②">(3)</a> <a
                    href="#ref-for-in-play③">(4)</a>
            <li><a href="#ref-for-in-play④">4.6. Fill behavior</a>
            <li><a href="#ref-for-in-play⑤">4.6.1. Fill modes</a> <a href="#ref-for-in-play⑥">(2)</a> <a
                    href="#ref-for-in-play⑦">(3)</a> <a href="#ref-for-in-play⑧">(4)</a> <a
                    href="#ref-for-in-play⑨">(5)</a>
            <li><a href="#ref-for-in-play①⓪">4.7.4. Interval timing</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="current">
        <b><a href="#current">#current</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-current">4.5.5. Animation effect phases and
                    states</a>
            <li><a href="#ref-for-current①">4.5.6. Relevant animations</a>
            <li><a href="#ref-for-current②">5.6. Side effects of animation</a>
            <li><a href="#ref-for-current③">11. Changes since last publication</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="in-effect">
        <b><a href="#in-effect">#in-effect</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-in-effect">4.5.5. Animation effect phases and
                    states</a> <a href="#ref-for-in-effect①">(2)</a>
            <li><a href="#ref-for-in-effect②">4.5.6. Relevant animations</a>
            <li><a href="#ref-for-in-effect③">5.4. Combining effects</a> <a href="#ref-for-in-effect④">(2)</a>
            <li><a href="#ref-for-in-effect⑤">5.5.2. Removing replaced animations</a>
            <li><a href="#ref-for-in-effect⑥">5.6. Side effects of animation</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="animation-relevant">
        <b><a href="#animation-relevant">#animation-relevant</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-animation-relevant">4.5.6. Relevant animations</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="relevant-animations">
        <b><a href="#relevant-animations">#relevant-animations</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-relevant-animations">6.8. The Animatable interface mixin</a>
            <li><a href="#ref-for-relevant-animations①">11. Changes since last publication</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="relevant-animations-for-a-subtree">
        <b><a href="#relevant-animations-for-a-subtree">#relevant-animations-for-a-subtree</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-relevant-animations-for-a-subtree">6.8. The Animatable interface mixin</a>
            <li><a href="#ref-for-relevant-animations-for-a-subtree①">6.10. Extensions to the DocumentOrShadowRoot
                    interface mixin</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="fill-mode">
        <b><a href="#fill-mode">#fill-mode</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-fill-mode">4.5.3. The active interval</a>
            <li><a href="#ref-for-fill-mode①">4.5.5. Animation effect phases and
                    states</a>
            <li><a href="#ref-for-fill-mode②">4.6. Fill behavior</a> <a href="#ref-for-fill-mode③">(2)</a> <a
                    href="#ref-for-fill-mode④">(3)</a>
            <li><a href="#ref-for-fill-mode⑤">4.6.1. Fill modes</a>
            <li><a href="#ref-for-fill-mode⑥">4.8.3.1. Calculating the active time</a> <a
                    href="#ref-for-fill-mode⑦">(2)</a> <a href="#ref-for-fill-mode⑧">(3)</a>
            <li><a href="#ref-for-fill-mode⑨">5.6. Side effects of animation</a>
            <li><a href="#ref-for-fill-mode①⓪">6.5.1. The EffectTiming and OptionalEffectTiming dictionaries</a> <a
                    href="#ref-for-fill-mode①①">(2)</a> <a href="#ref-for-fill-mode①②">(3)</a> <a
                    href="#ref-for-fill-mode①③">(4)</a>
            <li><a href="#ref-for-fill-mode①④">6.5.4. Updating the timing of an AnimationEffect</a>
            <li><a href="#ref-for-fill-mode①⑤">6.6. The KeyframeEffect interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="iteration-interval">
        <b><a href="#iteration-interval">#iteration-interval</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-iteration-interval">4.7.1. Iteration intervals</a>
            <li><a href="#ref-for-iteration-interval①">4.7.2. Controlling iteration</a>
            <li><a href="#ref-for-iteration-interval②">6.5.1. The EffectTiming and OptionalEffectTiming dictionaries</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="iteration-duration">
        <b><a href="#iteration-duration">#iteration-duration</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-iteration-duration">2. Specification conventions</a>
            <li><a href="#ref-for-iteration-duration①">4.7.1. Iteration intervals</a> <a
                    href="#ref-for-iteration-duration②">(2)</a> <a href="#ref-for-iteration-duration③">(3)</a> <a
                    href="#ref-for-iteration-duration④">(4)</a> <a href="#ref-for-iteration-duration⑤">(5)</a> <a
                    href="#ref-for-iteration-duration⑥">(6)</a>
            <li><a href="#ref-for-iteration-duration⑦">4.8.1. Overview</a> <a
                    href="#ref-for-iteration-duration⑧">(2)</a>
            <li><a href="#ref-for-iteration-duration⑨">4.8.2. Calculating the active duration</a> <a
                    href="#ref-for-iteration-duration①⓪">(2)</a>
            <li><a href="#ref-for-iteration-duration①①">4.8.3.2. Calculating the overall progress</a> <a
                    href="#ref-for-iteration-duration①②">(2)</a>
            <li><a href="#ref-for-iteration-duration①③">6.5. The AnimationEffect interface</a>
            <li><a href="#ref-for-iteration-duration①④">6.5.1. The EffectTiming and OptionalEffectTiming
                    dictionaries</a>
            <li><a href="#ref-for-iteration-duration①⑤">6.5.4. Updating the timing of an AnimationEffect</a>
            <li><a href="#ref-for-iteration-duration①⑥">6.6. The KeyframeEffect interface</a> <a
                    href="#ref-for-iteration-duration①⑦">(2)</a>
            <li><a href="#ref-for-iteration-duration①⑧">6.6.1. Creating a new KeyframeEffect object</a>
            <li><a href="#ref-for-iteration-duration①⑨">6.6.3. Processing a keyframes
                    argument</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="iteration-count">
        <b><a href="#iteration-count">#iteration-count</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-iteration-count">4.7.1. Iteration intervals</a>
            <li><a href="#ref-for-iteration-count①">4.7.2. Controlling iteration</a> <a
                    href="#ref-for-iteration-count②">(2)</a> <a href="#ref-for-iteration-count③">(3)</a> <a
                    href="#ref-for-iteration-count④">(4)</a> <a href="#ref-for-iteration-count⑤">(5)</a> <a
                    href="#ref-for-iteration-count⑥">(6)</a> <a href="#ref-for-iteration-count⑦">(7)</a>
            <li><a href="#ref-for-iteration-count⑧">4.8.1. Overview</a>
            <li><a href="#ref-for-iteration-count⑨">4.8.2. Calculating the active duration</a> <a
                    href="#ref-for-iteration-count①⓪">(2)</a>
            <li><a href="#ref-for-iteration-count①①">4.8.3.2. Calculating the overall progress</a>
            <li><a href="#ref-for-iteration-count①②">4.8.3.3. Calculating the simple iteration progress</a> <a
                    href="#ref-for-iteration-count①③">(2)</a>
            <li><a href="#ref-for-iteration-count①④">4.8.4. Calculating the current iteration</a>
            <li><a href="#ref-for-iteration-count①⑤">6.5.1. The EffectTiming and OptionalEffectTiming dictionaries</a>
            <li><a href="#ref-for-iteration-count①⑥">6.5.4. Updating the timing of an AnimationEffect</a>
            <li><a href="#ref-for-iteration-count①⑦">6.6. The KeyframeEffect interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="iteration-start">
        <b><a href="#iteration-start">#iteration-start</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-iteration-start">4.7.2. Controlling iteration</a> <a
                    href="#ref-for-iteration-start①">(2)</a> <a href="#ref-for-iteration-start②">(3)</a> <a
                    href="#ref-for-iteration-start③">(4)</a> <a href="#ref-for-iteration-start④">(5)</a> <a
                    href="#ref-for-iteration-start⑤">(6)</a>
            <li><a href="#ref-for-iteration-start⑥">4.8.1. Overview</a>
            <li><a href="#ref-for-iteration-start⑦">4.8.3.2. Calculating the overall progress</a>
            <li><a href="#ref-for-iteration-start⑧">4.8.3.3. Calculating the simple iteration progress</a>
            <li><a href="#ref-for-iteration-start⑨">6.5.1. The EffectTiming and OptionalEffectTiming dictionaries</a>
            <li><a href="#ref-for-iteration-start①⓪">6.5.4. Updating the timing of an AnimationEffect</a>
            <li><a href="#ref-for-iteration-start①①">6.6. The KeyframeEffect interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="active-duration">
        <b><a href="#active-duration">#active-duration</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-active-duration">4.5.3. The active interval</a> <a
                    href="#ref-for-active-duration①">(2)</a> <a href="#ref-for-active-duration②">(3)</a> <a
                    href="#ref-for-active-duration③">(4)</a>
            <li><a href="#ref-for-active-duration④">4.5.5. Animation effect phases and
                    states</a>
            <li><a href="#ref-for-active-duration⑤">4.7.1. Iteration intervals</a> <a
                    href="#ref-for-active-duration⑥">(2)</a> <a href="#ref-for-active-duration⑦">(3)</a> <a
                    href="#ref-for-active-duration⑧">(4)</a>
            <li><a href="#ref-for-active-duration⑨">4.7.2. Controlling iteration</a>
            <li><a href="#ref-for-active-duration①⓪">4.8.1. Overview</a> <a href="#ref-for-active-duration①①">(2)</a> <a
                    href="#ref-for-active-duration①②">(3)</a> <a href="#ref-for-active-duration①③">(4)</a>
            <li><a href="#ref-for-active-duration①④">4.8.2. Calculating the active duration</a> <a
                    href="#ref-for-active-duration①⑤">(2)</a>
            <li><a href="#ref-for-active-duration①⑥">4.8.3.1. Calculating the active time</a>
            <li><a href="#ref-for-active-duration①⑦">4.8.3.3. Calculating the simple iteration progress</a>
            <li><a href="#ref-for-active-duration①⑧">6.5.5. The ComputedEffectTiming dictionary</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="active-time">
        <b><a href="#active-time">#active-time</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-active-time">4.5.5. Animation effect phases and
                    states</a> <a href="#ref-for-active-time①">(2)</a> <a href="#ref-for-active-time②">(3)</a> <a
                    href="#ref-for-active-time③">(4)</a>
            <li><a href="#ref-for-active-time④">4.6. Fill behavior</a>
            <li><a href="#ref-for-active-time⑤">4.6.1. Fill modes</a>
            <li><a href="#ref-for-active-time⑥">4.7.3. Iteration time space</a> <a href="#ref-for-active-time⑦">(2)</a>
                <a href="#ref-for-active-time⑧">(3)</a>
            <li><a href="#ref-for-active-time⑨">4.8.1. Overview</a> <a href="#ref-for-active-time①⓪">(2)</a>
            <li><a href="#ref-for-active-time①①">4.8.3.2. Calculating the overall progress</a> <a
                    href="#ref-for-active-time①②">(2)</a>
            <li><a href="#ref-for-active-time①③">4.8.3.3. Calculating the simple iteration progress</a>
            <li><a href="#ref-for-active-time①④">4.8.4. Calculating the current iteration</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="overall-progress">
        <b><a href="#overall-progress">#overall-progress</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-overall-progress">4.8.1. Overview</a> <a href="#ref-for-overall-progress①">(2)</a>
            <li><a href="#ref-for-overall-progress②">4.8.3.3. Calculating the simple iteration progress</a> <a
                    href="#ref-for-overall-progress③">(2)</a> <a href="#ref-for-overall-progress④">(3)</a>
            <li><a href="#ref-for-overall-progress⑤">4.8.4. Calculating the current iteration</a> <a
                    href="#ref-for-overall-progress⑥">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="simple-iteration-progress">
        <b><a href="#simple-iteration-progress">#simple-iteration-progress</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-simple-iteration-progress">4.8.1. Overview</a> <a
                    href="#ref-for-simple-iteration-progress①">(2)</a>
            <li><a href="#ref-for-simple-iteration-progress②">4.8.4. Calculating the current iteration</a>
            <li><a href="#ref-for-simple-iteration-progress③">4.9.1. Calculating the directed progress</a> <a
                    href="#ref-for-simple-iteration-progress④">(2)</a> <a
                    href="#ref-for-simple-iteration-progress⑤">(3)</a> <a
                    href="#ref-for-simple-iteration-progress⑥">(4)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="current-iteration">
        <b><a href="#current-iteration">#current-iteration</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-current-iteration">4.7.1. Iteration intervals</a>
            <li><a href="#ref-for-current-iteration①">4.9.1. Calculating the directed progress</a>
            <li><a href="#ref-for-current-iteration②">5. Animation model</a>
            <li><a href="#ref-for-current-iteration③">5.1. Introduction</a>
            <li><a href="#ref-for-current-iteration④">6.5.1. The EffectTiming and OptionalEffectTiming dictionaries</a>
            <li><a href="#ref-for-current-iteration⑤">6.5.5. The ComputedEffectTiming dictionary</a> <a
                    href="#ref-for-current-iteration⑥">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="playback-direction">
        <b><a href="#playback-direction">#playback-direction</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-playback-direction">4.8.1. Overview</a>
            <li><a href="#ref-for-playback-direction①">4.8.3.3. Calculating the simple iteration progress</a>
            <li><a href="#ref-for-playback-direction②">4.9.1. Calculating the directed progress</a> <a
                    href="#ref-for-playback-direction③">(2)</a> <a href="#ref-for-playback-direction④">(3)</a>
            <li><a href="#ref-for-playback-direction⑤">6.5.1. The EffectTiming and OptionalEffectTiming dictionaries</a>
            <li><a href="#ref-for-playback-direction⑥">6.5.4. Updating the timing of an AnimationEffect</a>
            <li><a href="#ref-for-playback-direction⑦">6.6. The KeyframeEffect interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="directed-progress">
        <b><a href="#directed-progress">#directed-progress</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-directed-progress">4.8.1. Overview</a> <a href="#ref-for-directed-progress①">(2)</a>
            <li><a href="#ref-for-directed-progress②">4.9. Direction control</a>
            <li><a href="#ref-for-directed-progress③">4.10.1. Calculating the transformed progress</a> <a
                    href="#ref-for-directed-progress④">(2)</a> <a href="#ref-for-directed-progress⑤">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="transformed-progress">
        <b><a href="#transformed-progress">#transformed-progress</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-transformed-progress">4.8.1. Overview</a> <a
                    href="#ref-for-transformed-progress①">(2)</a>
            <li><a href="#ref-for-transformed-progress②">4.11. The iteration progress</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="iteration-progress">
        <b><a href="#iteration-progress">#iteration-progress</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-iteration-progress">4.6.1. Fill modes</a> <a
                    href="#ref-for-iteration-progress①">(2)</a> <a href="#ref-for-iteration-progress②">(3)</a>
            <li><a href="#ref-for-iteration-progress③">4.7.3. Iteration time space</a>
            <li><a href="#ref-for-iteration-progress④">4.7.4. Interval timing</a> <a
                    href="#ref-for-iteration-progress⑤">(2)</a>
            <li><a href="#ref-for-iteration-progress⑥">4.8.1. Overview</a> <a
                    href="#ref-for-iteration-progress⑦">(2)</a>
            <li><a href="#ref-for-iteration-progress⑧">5. Animation model</a>
            <li><a href="#ref-for-iteration-progress⑨">5.1. Introduction</a>
            <li><a href="#ref-for-iteration-progress①⓪">5.3.4. The effect value of a keyframe effect</a> <a
                    href="#ref-for-iteration-progress①①">(2)</a>
            <li><a href="#ref-for-iteration-progress①②">6.5.5. The ComputedEffectTiming dictionary</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="target-property">
        <b><a href="#target-property">#target-property</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-target-property">5.1. Introduction</a>
            <li><a href="#ref-for-target-property①">5.3.4. The effect value of a keyframe effect</a>
            <li><a href="#ref-for-target-property②">5.4. Combining effects</a> <a
                    href="#ref-for-target-property③">(2)</a> <a href="#ref-for-target-property④">(3)</a> <a
                    href="#ref-for-target-property⑤">(4)</a>
            <li><a href="#ref-for-target-property⑥">5.4.2. The effect stack</a>
            <li><a href="#ref-for-target-property⑦">5.4.5. Applying the composited result</a> <a
                    href="#ref-for-target-property⑧">(2)</a>
            <li><a href="#ref-for-target-property⑨">5.5.1. Replace state</a>
            <li><a href="#ref-for-target-property①⓪">5.5.2. Removing replaced animations</a> <a
                    href="#ref-for-target-property①①">(2)</a>
            <li><a href="#ref-for-target-property①②">6.4. The Animation interface</a> <a
                    href="#ref-for-target-property①③">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="effect-value">
        <b><a href="#effect-value">#effect-value</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-effect-value">5.3.1. Keyframes</a>
            <li><a href="#ref-for-effect-value①">5.3.2. Computing property values</a>
            <li><a href="#ref-for-effect-value②">5.3.3. Calculating computed keyframes</a>
            <li><a href="#ref-for-effect-value③">5.3.4. The effect value of a keyframe effect</a> <a
                    href="#ref-for-effect-value④">(2)</a> <a href="#ref-for-effect-value⑤">(3)</a>
            <li><a href="#ref-for-effect-value⑥">5.4. Combining effects</a> <a href="#ref-for-effect-value⑦">(2)</a> <a
                    href="#ref-for-effect-value⑧">(3)</a> <a href="#ref-for-effect-value⑨">(4)</a> <a
                    href="#ref-for-effect-value①⓪">(5)</a>
            <li><a href="#ref-for-effect-value①①">5.4.3. Calculating the result of an effect stack</a> <a
                    href="#ref-for-effect-value①②">(2)</a> <a href="#ref-for-effect-value①③">(3)</a>
            <li><a href="#ref-for-effect-value①④">5.4.4. Effect composition</a> <a
                    href="#ref-for-effect-value①⑤">(2)</a> <a href="#ref-for-effect-value①⑥">(3)</a> <a
                    href="#ref-for-effect-value①⑦">(4)</a> <a href="#ref-for-effect-value①⑧">(5)</a> <a
                    href="#ref-for-effect-value①⑨">(6)</a> <a href="#ref-for-effect-value②⓪">(7)</a> <a
                    href="#ref-for-effect-value②①">(8)</a>
            <li><a href="#ref-for-effect-value②②">6.4. The Animation interface</a> <a
                    href="#ref-for-effect-value②③">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="concept-animatable">
        <b><a href="#concept-animatable">#concept-animatable</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-concept-animatable">5.1. Introduction</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="animation-type">
        <b><a href="#animation-type">#animation-type</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-animation-type">5.1. Introduction</a>
            <li><a href="#ref-for-animation-type①">5.2. Animating properties</a> <a
                    href="#ref-for-animation-type②">(2)</a>
            <li><a href="#ref-for-animation-type③">5.2.1. Custom Properties</a> <a
                    href="#ref-for-animation-type④">(2)</a>
            <li><a href="#ref-for-animation-type⑤">5.3.4. The effect value of a keyframe effect</a> <a
                    href="#ref-for-animation-type⑥">(2)</a> <a href="#ref-for-animation-type⑦">(3)</a>
            <li><a href="#ref-for-animation-type⑧">5.4.4. Effect composition</a> <a
                    href="#ref-for-animation-type⑨">(2)</a>
            <li><a href="#ref-for-animation-type①⓪">Appendix A: Animation types of existing properties</a> <a
                    href="#ref-for-animation-type①①">(2)</a> <a href="#ref-for-animation-type①②">(3)</a>
            <li><a href="#ref-for-animation-type①③">Animation of font-weight</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="not-animatable">
        <b><a href="#not-animatable">#not-animatable</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-not-animatable">5.2. Animating properties</a> <a
                    href="#ref-for-not-animatable①">(2)</a>
            <li><a href="#ref-for-not-animatable②">5.3.4. The effect value of a keyframe effect</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="discrete">
        <b><a href="#discrete">#discrete</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-discrete">5.2. Animating properties</a> <a href="#ref-for-discrete①">(2)</a> <a
                    href="#ref-for-discrete②">(3)</a> <a href="#ref-for-discrete③">(4)</a>
            <li><a href="#ref-for-discrete④">5.2.1. Custom Properties</a>
            <li><a href="#ref-for-discrete⑤">Animation of visibility</a>
            <li><a href="#ref-for-discrete⑥">Animation of box-shadow and text-shadow</a> <a
                    href="#ref-for-discrete⑦">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="by-computed-value">
        <b><a href="#by-computed-value">#by-computed-value</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-by-computed-value">5.2. Animating properties</a> <a
                    href="#ref-for-by-computed-value①">(2)</a>
            <li><a href="#ref-for-by-computed-value②">5.2.1. Custom Properties</a>
            <li><a href="#ref-for-by-computed-value③">Appendix A: Animation types of existing properties</a>
            <li><a href="#ref-for-by-computed-value④">Animation of font-weight</a>
            <li><a href="#ref-for-by-computed-value⑤">Animation of box-shadow and text-shadow</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="keyframe-effect">
        <b><a href="#keyframe-effect">#keyframe-effect</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-keyframe-effect">4.4.6. Waiting for the associated effect</a>
            <li><a href="#ref-for-keyframe-effect①">4.5.2. Types of animation effects</a>
            <li><a href="#ref-for-keyframe-effect②">5.3.1. Keyframes</a> <a href="#ref-for-keyframe-effect③">(2)</a> <a
                    href="#ref-for-keyframe-effect④">(3)</a> <a href="#ref-for-keyframe-effect⑤">(4)</a>
            <li><a href="#ref-for-keyframe-effect⑥">5.3.3. Calculating computed keyframes</a> <a
                    href="#ref-for-keyframe-effect⑦">(2)</a> <a href="#ref-for-keyframe-effect⑧">(3)</a>
            <li><a href="#ref-for-keyframe-effect⑨">5.3.4. The effect value of a keyframe effect</a> <a
                    href="#ref-for-keyframe-effect①⓪">(2)</a> <a href="#ref-for-keyframe-effect①①">(3)</a> <a
                    href="#ref-for-keyframe-effect①②">(4)</a> <a href="#ref-for-keyframe-effect①③">(5)</a>
            <li><a href="#ref-for-keyframe-effect①④">5.4. Combining effects</a> <a
                    href="#ref-for-keyframe-effect①⑤">(2)</a> <a href="#ref-for-keyframe-effect①⑥">(3)</a> <a
                    href="#ref-for-keyframe-effect①⑦">(4)</a> <a href="#ref-for-keyframe-effect①⑧">(5)</a> <a
                    href="#ref-for-keyframe-effect①⑨">(6)</a> <a href="#ref-for-keyframe-effect②⓪">(7)</a>
            <li><a href="#ref-for-keyframe-effect②①">5.4.2. The effect stack</a> <a
                    href="#ref-for-keyframe-effect②②">(2)</a> <a href="#ref-for-keyframe-effect②③">(3)</a>
            <li><a href="#ref-for-keyframe-effect②④">5.4.3. Calculating the result of an effect stack</a> <a
                    href="#ref-for-keyframe-effect②⑤">(2)</a> <a href="#ref-for-keyframe-effect②⑥">(3)</a> <a
                    href="#ref-for-keyframe-effect②⑦">(4)</a> <a href="#ref-for-keyframe-effect②⑧">(5)</a>
            <li><a href="#ref-for-keyframe-effect②⑨">5.4.4. Effect composition</a>
            <li><a href="#ref-for-keyframe-effect③⓪">6.5.1. The EffectTiming and OptionalEffectTiming dictionaries</a>
            <li><a href="#ref-for-keyframe-effect③①">6.6. The KeyframeEffect interface</a> <a
                    href="#ref-for-keyframe-effect③②">(2)</a> <a href="#ref-for-keyframe-effect③③">(3)</a> <a
                    href="#ref-for-keyframe-effect③④">(4)</a> <a href="#ref-for-keyframe-effect③⑤">(5)</a> <a
                    href="#ref-for-keyframe-effect③⑥">(6)</a> <a href="#ref-for-keyframe-effect③⑦">(7)</a> <a
                    href="#ref-for-keyframe-effect③⑧">(8)</a>
            <li><a href="#ref-for-keyframe-effect③⑨">6.6.3. Processing a keyframes
                    argument</a> <a href="#ref-for-keyframe-effect④⓪">(2)</a>
            <li><a href="#ref-for-keyframe-effect④①">6.7. The CompositeOperation and CompositeOperationOrAuto
                    enumerations</a> <a href="#ref-for-keyframe-effect④②">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="keyframe-effect-effect-target">
        <b><a href="#keyframe-effect-effect-target">#keyframe-effect-effect-target</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-keyframe-effect-effect-target">4.5.6. Relevant animations</a> <a
                    href="#ref-for-keyframe-effect-effect-target①">(2)</a>
            <li><a href="#ref-for-keyframe-effect-effect-target②">5.3. Keyframe effects</a> <a
                    href="#ref-for-keyframe-effect-effect-target③">(2)</a> <a
                    href="#ref-for-keyframe-effect-effect-target④">(3)</a> <a
                    href="#ref-for-keyframe-effect-effect-target⑤">(4)</a>
            <li><a href="#ref-for-keyframe-effect-effect-target⑥">5.3.3. Calculating computed keyframes</a> <a
                    href="#ref-for-keyframe-effect-effect-target⑦">(2)</a>
            <li><a href="#ref-for-keyframe-effect-effect-target⑧">5.3.4. The effect value of a keyframe effect</a> <a
                    href="#ref-for-keyframe-effect-effect-target⑨">(2)</a>
            <li><a href="#ref-for-keyframe-effect-effect-target①⓪">5.5.2. Removing replaced animations</a> <a
                    href="#ref-for-keyframe-effect-effect-target①①">(2)</a>
            <li><a href="#ref-for-keyframe-effect-effect-target①②">5.6. Side effects of animation</a> <a
                    href="#ref-for-keyframe-effect-effect-target①③">(2)</a>
            <li><a href="#ref-for-keyframe-effect-effect-target①④">6.4. The Animation interface</a> <a
                    href="#ref-for-keyframe-effect-effect-target①⑤">(2)</a> <a
                    href="#ref-for-keyframe-effect-effect-target①⑥">(3)</a> <a
                    href="#ref-for-keyframe-effect-effect-target①⑦">(4)</a>
            <li><a href="#ref-for-keyframe-effect-effect-target①⑧">6.6. The KeyframeEffect interface</a> <a
                    href="#ref-for-keyframe-effect-effect-target①⑨">(2)</a> <a
                    href="#ref-for-keyframe-effect-effect-target②⓪">(3)</a> <a
                    href="#ref-for-keyframe-effect-effect-target②①">(4)</a> <a
                    href="#ref-for-keyframe-effect-effect-target②②">(5)</a>
            <li><a href="#ref-for-keyframe-effect-effect-target②③">6.6.4. The KeyframeEffectOptions dictionary</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="effect-target-target-element">
        <b><a href="#effect-target-target-element">#effect-target-target-element</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-effect-target-target-element">5.3. Keyframe effects</a> <a
                    href="#ref-for-effect-target-target-element①">(2)</a>
            <li><a href="#ref-for-effect-target-target-element②">5.3.2. Computing property values</a>
            <li><a href="#ref-for-effect-target-target-element③">5.3.3. Calculating computed keyframes</a>
            <li><a href="#ref-for-effect-target-target-element④">6.6. The KeyframeEffect interface</a> <a
                    href="#ref-for-effect-target-target-element⑤">(2)</a> <a
                    href="#ref-for-effect-target-target-element⑥">(3)</a>
            <li><a href="#ref-for-effect-target-target-element⑦">6.6.4. The KeyframeEffectOptions dictionary</a>
            <li><a href="#ref-for-effect-target-target-element⑧">6.8. The Animatable interface mixin</a> <a
                    href="#ref-for-effect-target-target-element⑨">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="effect-target-target-pseudo-selector">
        <b><a href="#effect-target-target-pseudo-selector">#effect-target-target-pseudo-selector</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-effect-target-target-pseudo-selector">5.3. Keyframe effects</a> <a
                    href="#ref-for-effect-target-target-pseudo-selector①">(2)</a>
            <li><a href="#ref-for-effect-target-target-pseudo-selector②">6.6. The KeyframeEffect interface</a> <a
                    href="#ref-for-effect-target-target-pseudo-selector③">(2)</a> <a
                    href="#ref-for-effect-target-target-pseudo-selector④">(3)</a> <a
                    href="#ref-for-effect-target-target-pseudo-selector⑤">(4)</a> <a
                    href="#ref-for-effect-target-target-pseudo-selector⑥">(5)</a> <a
                    href="#ref-for-effect-target-target-pseudo-selector⑦">(6)</a> <a
                    href="#ref-for-effect-target-target-pseudo-selector⑧">(7)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="keyframe">
        <b><a href="#keyframe">#keyframe</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-keyframe">5.3.1. Keyframes</a> <a href="#ref-for-keyframe①">(2)</a> <a
                    href="#ref-for-keyframe②">(3)</a> <a href="#ref-for-keyframe③">(4)</a> <a
                    href="#ref-for-keyframe④">(5)</a> <a href="#ref-for-keyframe⑤">(6)</a> <a
                    href="#ref-for-keyframe⑥">(7)</a>
            <li><a href="#ref-for-keyframe⑦">5.3.3. Calculating computed keyframes</a> <a
                    href="#ref-for-keyframe⑧">(2)</a> <a href="#ref-for-keyframe⑨">(3)</a> <a
                    href="#ref-for-keyframe①⓪">(4)</a> <a href="#ref-for-keyframe①①">(5)</a> <a
                    href="#ref-for-keyframe①②">(6)</a> <a href="#ref-for-keyframe①③">(7)</a> <a
                    href="#ref-for-keyframe①④">(8)</a> <a href="#ref-for-keyframe①⑤">(9)</a> <a
                    href="#ref-for-keyframe①⑥">(10)</a> <a href="#ref-for-keyframe①⑦">(11)</a> <a
                    href="#ref-for-keyframe①⑧">(12)</a> <a href="#ref-for-keyframe①⑨">(13)</a> <a
                    href="#ref-for-keyframe②⓪">(14)</a> <a href="#ref-for-keyframe②①">(15)</a> <a
                    href="#ref-for-keyframe②②">(16)</a>
            <li><a href="#ref-for-keyframe②③">5.3.4. The effect value of a keyframe effect</a> <a
                    href="#ref-for-keyframe②④">(2)</a> <a href="#ref-for-keyframe②⑤">(3)</a> <a
                    href="#ref-for-keyframe②⑥">(4)</a> <a href="#ref-for-keyframe②⑦">(5)</a> <a
                    href="#ref-for-keyframe②⑧">(6)</a> <a href="#ref-for-keyframe②⑨">(7)</a> <a
                    href="#ref-for-keyframe③⓪">(8)</a> <a href="#ref-for-keyframe③①">(9)</a> <a
                    href="#ref-for-keyframe③②">(10)</a> <a href="#ref-for-keyframe③③">(11)</a> <a
                    href="#ref-for-keyframe③④">(12)</a> <a href="#ref-for-keyframe③⑤">(13)</a> <a
                    href="#ref-for-keyframe③⑥">(14)</a> <a href="#ref-for-keyframe③⑦">(15)</a> <a
                    href="#ref-for-keyframe③⑧">(16)</a> <a href="#ref-for-keyframe③⑨">(17)</a> <a
                    href="#ref-for-keyframe④⓪">(18)</a> <a href="#ref-for-keyframe④①">(19)</a> <a
                    href="#ref-for-keyframe④②">(20)</a> <a href="#ref-for-keyframe④③">(21)</a>
            <li><a href="#ref-for-keyframe④④">6.6. The KeyframeEffect interface</a> <a
                    href="#ref-for-keyframe④⑤">(2)</a> <a href="#ref-for-keyframe④⑥">(3)</a> <a
                    href="#ref-for-keyframe④⑦">(4)</a> <a href="#ref-for-keyframe④⑧">(5)</a> <a
                    href="#ref-for-keyframe④⑨">(6)</a> <a href="#ref-for-keyframe⑤⓪">(7)</a> <a
                    href="#ref-for-keyframe⑤①">(8)</a> <a href="#ref-for-keyframe⑤②">(9)</a> <a
                    href="#ref-for-keyframe⑤③">(10)</a> <a href="#ref-for-keyframe⑤④">(11)</a> <a
                    href="#ref-for-keyframe⑤⑤">(12)</a>
            <li><a href="#ref-for-keyframe⑤⑥">6.6.3. Processing a keyframes
                    argument</a> <a href="#ref-for-keyframe⑤⑦">(2)</a> <a href="#ref-for-keyframe⑤⑧">(3)</a> <a
                    href="#ref-for-keyframe⑤⑨">(4)</a> <a href="#ref-for-keyframe⑥⓪">(5)</a> <a
                    href="#ref-for-keyframe⑥①">(6)</a> <a href="#ref-for-keyframe⑥②">(7)</a> <a
                    href="#ref-for-keyframe⑥③">(8)</a> <a href="#ref-for-keyframe⑥④">(9)</a> <a
                    href="#ref-for-keyframe⑥⑤">(10)</a> <a href="#ref-for-keyframe⑥⑥">(11)</a> <a
                    href="#ref-for-keyframe⑥⑦">(12)</a> <a href="#ref-for-keyframe⑥⑧">(13)</a>
            <li><a href="#ref-for-keyframe⑥⑨">6.6.4. The KeyframeEffectOptions dictionary</a>
            <li><a href="#ref-for-keyframe⑦⓪">6.7. The CompositeOperation and CompositeOperationOrAuto enumerations</a>
            <li><a href="#ref-for-keyframe⑦①">6.8. The Animatable interface mixin</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="keyframe-offset">
        <b><a href="#keyframe-offset">#keyframe-offset</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-keyframe-offset">5.3.1. Keyframes</a> <a href="#ref-for-keyframe-offset①">(2)</a>
            <li><a href="#ref-for-keyframe-offset②">5.3.3. Calculating computed keyframes</a> <a
                    href="#ref-for-keyframe-offset③">(2)</a> <a href="#ref-for-keyframe-offset④">(3)</a> <a
                    href="#ref-for-keyframe-offset⑤">(4)</a>
            <li><a href="#ref-for-keyframe-offset⑥">6.6. The KeyframeEffect interface</a> <a
                    href="#ref-for-keyframe-offset⑦">(2)</a>
            <li><a href="#ref-for-keyframe-offset⑧">6.6.3. Processing a keyframes
                    argument</a> <a href="#ref-for-keyframe-offset⑨">(2)</a> <a
                    href="#ref-for-keyframe-offset①⓪">(3)</a> <a href="#ref-for-keyframe-offset①①">(4)</a> <a
                    href="#ref-for-keyframe-offset①②">(5)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="loosely-sorted-by-offset">
        <b><a href="#loosely-sorted-by-offset">#loosely-sorted-by-offset</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-loosely-sorted-by-offset">6.6.3. Processing a keyframes
                    argument</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="keyframe-specific-composite-operation">
        <b><a href="#keyframe-specific-composite-operation">#keyframe-specific-composite-operation</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-keyframe-specific-composite-operation">5.3.1. Keyframes</a>
            <li><a href="#ref-for-keyframe-specific-composite-operation①">6.6. The KeyframeEffect interface</a> <a
                    href="#ref-for-keyframe-specific-composite-operation②">(2)</a>
            <li><a href="#ref-for-keyframe-specific-composite-operation③">6.6.3. Processing a keyframes
                    argument</a> <a href="#ref-for-keyframe-specific-composite-operation④">(2)</a> <a
                    href="#ref-for-keyframe-specific-composite-operation⑤">(3)</a>
            <li><a href="#ref-for-keyframe-specific-composite-operation⑥">6.6.4. The KeyframeEffectOptions
                    dictionary</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="compute-a-property-value">
        <b><a href="#compute-a-property-value">#compute-a-property-value</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-compute-a-property-value">5.3.2. Computing property values</a> <a
                    href="#ref-for-compute-a-property-value①">(2)</a>
            <li><a href="#ref-for-compute-a-property-value②">5.3.3. Calculating computed keyframes</a> <a
                    href="#ref-for-compute-a-property-value③">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="computed-keyframes">
        <b><a href="#computed-keyframes">#computed-keyframes</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-computed-keyframes">5.3.3. Calculating computed keyframes</a>
            <li><a href="#ref-for-computed-keyframes①">5.3.4. The effect value of a keyframe effect</a> <a
                    href="#ref-for-computed-keyframes②">(2)</a> <a href="#ref-for-computed-keyframes③">(3)</a>
            <li><a href="#ref-for-computed-keyframes④">6.6. The KeyframeEffect interface</a> <a
                    href="#ref-for-computed-keyframes⑤">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="computed-keyframe-offset">
        <b><a href="#computed-keyframe-offset">#computed-keyframe-offset</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-computed-keyframe-offset">5.3.3. Calculating computed keyframes</a> <a
                    href="#ref-for-computed-keyframe-offset①">(2)</a> <a
                    href="#ref-for-computed-keyframe-offset②">(3)</a> <a
                    href="#ref-for-computed-keyframe-offset③">(4)</a> <a
                    href="#ref-for-computed-keyframe-offset④">(5)</a> <a
                    href="#ref-for-computed-keyframe-offset⑤">(6)</a> <a
                    href="#ref-for-computed-keyframe-offset⑥">(7)</a> <a
                    href="#ref-for-computed-keyframe-offset⑦">(8)</a> <a
                    href="#ref-for-computed-keyframe-offset⑧">(9)</a> <a
                    href="#ref-for-computed-keyframe-offset⑨">(10)</a> <a
                    href="#ref-for-computed-keyframe-offset①⓪">(11)</a>
            <li><a href="#ref-for-computed-keyframe-offset①①">5.3.4. The effect value of a keyframe effect</a> <a
                    href="#ref-for-computed-keyframe-offset①②">(2)</a> <a
                    href="#ref-for-computed-keyframe-offset①③">(3)</a> <a
                    href="#ref-for-computed-keyframe-offset①④">(4)</a> <a
                    href="#ref-for-computed-keyframe-offset①⑤">(5)</a> <a
                    href="#ref-for-computed-keyframe-offset①⑥">(6)</a> <a
                    href="#ref-for-computed-keyframe-offset①⑦">(7)</a> <a
                    href="#ref-for-computed-keyframe-offset①⑧">(8)</a> <a
                    href="#ref-for-computed-keyframe-offset①⑨">(9)</a> <a
                    href="#ref-for-computed-keyframe-offset②⓪">(10)</a> <a
                    href="#ref-for-computed-keyframe-offset②①">(11)</a> <a
                    href="#ref-for-computed-keyframe-offset②②">(12)</a>
            <li><a href="#ref-for-computed-keyframe-offset②③">6.6. The KeyframeEffect interface</a> <a
                    href="#ref-for-computed-keyframe-offset②④">(2)</a> <a
                    href="#ref-for-computed-keyframe-offset②⑤">(3)</a>
            <li><a href="#ref-for-computed-keyframe-offset②⑥">6.6.3. Processing a keyframes
                    argument</a> <a href="#ref-for-computed-keyframe-offset②⑦">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="compute-missing-keyframe-offsets">
        <b><a href="#compute-missing-keyframe-offsets">#compute-missing-keyframe-offsets</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-compute-missing-keyframe-offsets">5.3.3. Calculating computed keyframes</a>
            <li><a href="#ref-for-compute-missing-keyframe-offsets①">6.6. The KeyframeEffect interface</a> <a
                    href="#ref-for-compute-missing-keyframe-offsets②">(2)</a>
            <li><a href="#ref-for-compute-missing-keyframe-offsets③">6.6.3. Processing a keyframes
                    argument</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="offsetk">
        <b><a href="#offsetk">#offsetk</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-offsetk">5.3.3. Calculating computed keyframes</a> <a href="#ref-for-offsetk①">(2)</a>
                <a href="#ref-for-offsetk②">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="neutral-value-for-composition">
        <b><a href="#neutral-value-for-composition">#neutral-value-for-composition</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-neutral-value-for-composition">5.3.4. The effect value of a keyframe effect</a> <a
                    href="#ref-for-neutral-value-for-composition①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="composite">
        <b><a href="#composite">#composite</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-composite">5.4. Combining effects</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="animation-class">
        <b><a href="#animation-class">#animation-class</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-animation-class">4.4. Animations</a>
            <li><a href="#ref-for-animation-class①">5.4.1. Animation classes</a>
            <li><a href="#ref-for-animation-class②">5.4.2. The effect stack</a> <a
                    href="#ref-for-animation-class③">(2)</a>
            <li><a href="#ref-for-animation-class④">5.4.5. Applying the composited result</a> <a
                    href="#ref-for-animation-class⑤">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="effect-stack">
        <b><a href="#effect-stack">#effect-stack</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-effect-stack">5. Animation model</a>
            <li><a href="#ref-for-effect-stack①">5.4. Combining effects</a> <a href="#ref-for-effect-stack②">(2)</a> <a
                    href="#ref-for-effect-stack③">(3)</a>
            <li><a href="#ref-for-effect-stack④">5.4.2. The effect stack</a> <a href="#ref-for-effect-stack⑤">(2)</a>
            <li><a href="#ref-for-effect-stack⑥">5.4.3. Calculating the result of an effect stack</a> <a
                    href="#ref-for-effect-stack⑦">(2)</a> <a href="#ref-for-effect-stack⑧">(3)</a>
            <li><a href="#ref-for-effect-stack⑨">5.4.5. Applying the composited result</a> <a
                    href="#ref-for-effect-stack①⓪">(2)</a> <a href="#ref-for-effect-stack①①">(3)</a> <a
                    href="#ref-for-effect-stack①②">(4)</a>
            <li><a href="#ref-for-effect-stack①③">5.5.1. Replace state</a>
            <li><a href="#ref-for-effect-stack①④">6.4. The Animation interface</a>
            <li><a href="#ref-for-effect-stack①⑤">6.6. The KeyframeEffect interface</a>
            <li><a href="#ref-for-effect-stack①⑥">6.6.4. The KeyframeEffectOptions dictionary</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="animation-composite-order">
        <b><a href="#animation-composite-order">#animation-composite-order</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-animation-composite-order">4.3. Timelines</a>
            <li><a href="#ref-for-animation-composite-order①">5.5.2. Removing replaced animations</a>
            <li><a href="#ref-for-animation-composite-order②">6.4. The Animation interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="animation-effect-associated-animation">
        <b><a href="#animation-effect-associated-animation">#animation-effect-associated-animation</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-animation-effect-associated-animation">5.4.2. The effect stack</a> <a
                    href="#ref-for-animation-effect-associated-animation①">(2)</a> <a
                    href="#ref-for-animation-effect-associated-animation②">(3)</a>
            <li><a href="#ref-for-animation-effect-associated-animation③">5.4.5. Applying the composited result</a> <a
                    href="#ref-for-animation-effect-associated-animation④">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="underlying-value">
        <b><a href="#underlying-value">#underlying-value</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-underlying-value">5.1. Introduction</a>
            <li><a href="#ref-for-underlying-value①">5.3.4. The effect value of a keyframe effect</a> <a
                    href="#ref-for-underlying-value②">(2)</a>
            <li><a href="#ref-for-underlying-value③">5.4.3. Calculating the result of an effect stack</a> <a
                    href="#ref-for-underlying-value④">(2)</a> <a href="#ref-for-underlying-value⑤">(3)</a>
            <li><a href="#ref-for-underlying-value⑥">5.4.4. Effect composition</a> <a
                    href="#ref-for-underlying-value⑦">(2)</a> <a href="#ref-for-underlying-value⑧">(3)</a> <a
                    href="#ref-for-underlying-value⑨">(4)</a> <a href="#ref-for-underlying-value①⓪">(5)</a> <a
                    href="#ref-for-underlying-value①①">(6)</a>
            <li><a href="#ref-for-underlying-value①②">5.4.5. Applying the composited result</a>
            <li><a href="#ref-for-underlying-value①③">6.6. The KeyframeEffect interface</a>
            <li><a href="#ref-for-underlying-value①④">6.6.3. Processing a keyframes
                    argument</a>
            <li><a href="#ref-for-underlying-value①⑤">6.7. The CompositeOperation and CompositeOperationOrAuto
                    enumerations</a> <a href="#ref-for-underlying-value①⑥">(2)</a> <a
                    href="#ref-for-underlying-value①⑦">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="composited-value">
        <b><a href="#composited-value">#composited-value</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-composited-value">5.4.5. Applying the composited result</a> <a
                    href="#ref-for-composited-value①">(2)</a> <a href="#ref-for-composited-value②">(3)</a> <a
                    href="#ref-for-composited-value③">(4)</a> <a href="#ref-for-composited-value④">(5)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="composite-operation">
        <b><a href="#composite-operation">#composite-operation</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-composite-operation">5.3.1. Keyframes</a> <a
                    href="#ref-for-composite-operation①">(2)</a>
            <li><a href="#ref-for-composite-operation②">5.3.4. The effect value of a keyframe effect</a> <a
                    href="#ref-for-composite-operation③">(2)</a> <a href="#ref-for-composite-operation④">(3)</a> <a
                    href="#ref-for-composite-operation⑤">(4)</a> <a href="#ref-for-composite-operation⑥">(5)</a> <a
                    href="#ref-for-composite-operation⑦">(6)</a> <a href="#ref-for-composite-operation⑧">(7)</a> <a
                    href="#ref-for-composite-operation⑨">(8)</a>
            <li><a href="#ref-for-composite-operation①⓪">5.4. Combining effects</a>
            <li><a href="#ref-for-composite-operation①①">5.4.4. Effect composition</a>
            <li><a href="#ref-for-composite-operation①②">6.6. The KeyframeEffect interface</a> <a
                    href="#ref-for-composite-operation①③">(2)</a> <a href="#ref-for-composite-operation①④">(3)</a> <a
                    href="#ref-for-composite-operation①⑤">(4)</a>
            <li><a href="#ref-for-composite-operation①⑥">6.6.3. Processing a keyframes
                    argument</a>
            <li><a href="#ref-for-composite-operation①⑦">6.6.4. The KeyframeEffectOptions dictionary</a>
            <li><a href="#ref-for-composite-operation①⑧">6.7. The CompositeOperation and CompositeOperationOrAuto
                    enumerations</a> <a href="#ref-for-composite-operation①⑨">(2)</a> <a
                    href="#ref-for-composite-operation②⓪">(3)</a> <a href="#ref-for-composite-operation②①">(4)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="composite-operation-replace">
        <b><a href="#composite-operation-replace">#composite-operation-replace</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-composite-operation-replace">5.3.4. The effect value of a keyframe effect</a> <a
                    href="#ref-for-composite-operation-replace①">(2)</a>
            <li><a href="#ref-for-composite-operation-replace②">6.7. The CompositeOperation and CompositeOperationOrAuto
                    enumerations</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="composite-operation-add">
        <b><a href="#composite-operation-add">#composite-operation-add</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-composite-operation-add">5.3.4. The effect value of a keyframe effect</a> <a
                    href="#ref-for-composite-operation-add①">(2)</a> <a href="#ref-for-composite-operation-add②">(3)</a>
            <li><a href="#ref-for-composite-operation-add③">6.7. The CompositeOperation and CompositeOperationOrAuto
                    enumerations</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="composite-operation-accumulate">
        <b><a href="#composite-operation-accumulate">#composite-operation-accumulate</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-composite-operation-accumulate">6.7. The CompositeOperation and
                    CompositeOperationOrAuto enumerations</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="replace-state">
        <b><a href="#replace-state">#replace-state</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-replace-state">4.5.6. Relevant animations</a>
            <li><a href="#ref-for-replace-state①">5.5.1. Replace state</a> <a href="#ref-for-replace-state②">(2)</a>
            <li><a href="#ref-for-replace-state③">5.5.2. Removing replaced animations</a> <a
                    href="#ref-for-replace-state④">(2)</a> <a href="#ref-for-replace-state⑤">(3)</a>
            <li><a href="#ref-for-replace-state⑥">5.6. Side effects of animation</a>
            <li><a href="#ref-for-replace-state⑦">6.4. The Animation interface</a> <a
                    href="#ref-for-replace-state⑧">(2)</a> <a href="#ref-for-replace-state⑨">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="active-replace-state">
        <b><a href="#active-replace-state">#active-replace-state</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-active-replace-state">5.5.1. Replace state</a>
            <li><a href="#ref-for-active-replace-state①">5.5.2. Removing replaced animations</a>
            <li><a href="#ref-for-active-replace-state②">6.4.2. The AnimationReplaceState enumeration</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="removed-replace-state">
        <b><a href="#removed-replace-state">#removed-replace-state</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-removed-replace-state">4.5.6. Relevant animations</a>
            <li><a href="#ref-for-removed-replace-state①">5.5.1. Replace state</a>
            <li><a href="#ref-for-removed-replace-state②">5.5.2. Removing replaced animations</a> <a
                    href="#ref-for-removed-replace-state③">(2)</a>
            <li><a href="#ref-for-removed-replace-state④">5.6. Side effects of animation</a>
            <li><a href="#ref-for-removed-replace-state⑤">6.4. The Animation interface</a> <a
                    href="#ref-for-removed-replace-state⑥">(2)</a>
            <li><a href="#ref-for-removed-replace-state⑦">6.4.2. The AnimationReplaceState enumeration</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="persisted-replace-state">
        <b><a href="#persisted-replace-state">#persisted-replace-state</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-persisted-replace-state">6.4. The Animation interface</a>
            <li><a href="#ref-for-persisted-replace-state①">6.4.2. The AnimationReplaceState enumeration</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="replaceable-animation">
        <b><a href="#replaceable-animation">#replaceable-animation</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-replaceable-animation">5.5.2. Removing replaced animations</a> <a
                    href="#ref-for-replaceable-animation①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="remove-replaced-animations">
        <b><a href="#remove-replaced-animations">#remove-replaced-animations</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-remove-replaced-animations">4.3. Timelines</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="animationtimeline">
        <b><a href="#animationtimeline">#animationtimeline</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-animationtimeline">6.2. The AnimationTimeline interface</a>
            <li><a href="#ref-for-animationtimeline①">6.3. The DocumentTimeline interface</a>
            <li><a href="#ref-for-animationtimeline②">6.4. The Animation interface</a> <a
                    href="#ref-for-animationtimeline③">(2)</a> <a href="#ref-for-animationtimeline④">(3)</a>
            <li><a href="#ref-for-animationtimeline⑤">6.8. The Animatable interface mixin</a> <a
                    href="#ref-for-animationtimeline⑥">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-animationtimeline-currenttime">
        <b><a href="#dom-animationtimeline-currenttime">#dom-animationtimeline-currenttime</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-animationtimeline-currenttime">6.2. The AnimationTimeline interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dictdef-documenttimelineoptions">
        <b><a href="#dictdef-documenttimelineoptions">#dictdef-documenttimelineoptions</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dictdef-documenttimelineoptions">6.3. The DocumentTimeline interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="documenttimeline">
        <b><a href="#documenttimeline">#documenttimeline</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-documenttimeline">6.3. The DocumentTimeline interface</a> <a
                    href="#ref-for-documenttimeline①">(2)</a>
            <li><a href="#ref-for-documenttimeline②">6.9. Extensions to the Document interface</a> <a
                    href="#ref-for-documenttimeline③">(2)</a> <a href="#ref-for-documenttimeline④">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-documenttimelineoptions-origintime">
        <b><a
                href="#dom-documenttimelineoptions-origintime">#dom-documenttimelineoptions-origintime</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-documenttimelineoptions-origintime">6.3. The DocumentTimeline interface</a> <a
                    href="#ref-for-dom-documenttimelineoptions-origintime①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-documenttimeline-documenttimeline">
        <b><a href="#dom-documenttimeline-documenttimeline">#dom-documenttimeline-documenttimeline</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-documenttimeline-documenttimeline">6.3. The DocumentTimeline interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-documenttimeline-documenttimeline-options-options">
        <b><a
                href="#dom-documenttimeline-documenttimeline-options-options">#dom-documenttimeline-documenttimeline-options-options</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-documenttimeline-documenttimeline-options-options">6.3. The DocumentTimeline
                    interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="animation">
        <b><a href="#animation">#animation</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-animation">6.4. The Animation interface</a> <a href="#ref-for-animation①">(2)</a> <a
                    href="#ref-for-animation②">(3)</a> <a href="#ref-for-animation③">(4)</a> <a
                    href="#ref-for-animation④">(5)</a> <a href="#ref-for-animation⑤">(6)</a> <a
                    href="#ref-for-animation⑥">(7)</a>
            <li><a href="#ref-for-animation⑦">6.6.1. Creating a new KeyframeEffect object</a>
            <li><a href="#ref-for-animation⑧">6.8. The Animatable interface mixin</a> <a
                    href="#ref-for-animation⑨">(2)</a> <a href="#ref-for-animation①⓪">(3)</a> <a
                    href="#ref-for-animation①①">(4)</a> <a href="#ref-for-animation①②">(5)</a>
            <li><a href="#ref-for-animation①③">6.10. Extensions to the DocumentOrShadowRoot interface mixin</a>
            <li><a href="#ref-for-animation①④">6.13. Model liveness</a> <a href="#ref-for-animation①⑤">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-animation-animation">
        <b><a href="#dom-animation-animation">#dom-animation-animation</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-animation-animation">6.4. The Animation interface</a>
            <li><a href="#ref-for-dom-animation-animation①">6.8. The Animatable interface mixin</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-animation-animation-effect-timeline-effect">
        <b><a
                href="#dom-animation-animation-effect-timeline-effect">#dom-animation-animation-effect-timeline-effect</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-animation-animation-effect-timeline-effect">6.4. The Animation interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-animation-animation-effect-timeline-timeline">
        <b><a
                href="#dom-animation-animation-effect-timeline-timeline">#dom-animation-animation-effect-timeline-timeline</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-animation-animation-effect-timeline-timeline">6.4. The Animation interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-animation-id">
        <b><a href="#dom-animation-id">#dom-animation-id</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-animation-id">6.4. The Animation interface</a>
            <li><a href="#ref-for-dom-animation-id①">6.8. The Animatable interface mixin</a> <a
                    href="#ref-for-dom-animation-id②">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-animation-effect">
        <b><a href="#dom-animation-effect">#dom-animation-effect</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-animation-effect">6.4. The Animation interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-animation-timeline">
        <b><a href="#dom-animation-timeline">#dom-animation-timeline</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-animation-timeline">6.4. The Animation interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-animation-starttime">
        <b><a href="#dom-animation-starttime">#dom-animation-starttime</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-animation-starttime">6.4. The Animation interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-animation-currenttime">
        <b><a href="#dom-animation-currenttime">#dom-animation-currenttime</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-animation-currenttime">6.4. The Animation interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-animation-playbackrate">
        <b><a href="#dom-animation-playbackrate">#dom-animation-playbackrate</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-animation-playbackrate">6.4. The Animation interface</a> <a
                    href="#ref-for-dom-animation-playbackrate①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-animation-playstate">
        <b><a href="#dom-animation-playstate">#dom-animation-playstate</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-animation-playstate">6.4. The Animation interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-animation-replacestate">
        <b><a href="#dom-animation-replacestate">#dom-animation-replacestate</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-animation-replacestate">6.4. The Animation interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-animation-pending">
        <b><a href="#dom-animation-pending">#dom-animation-pending</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-animation-pending">6.4. The Animation interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-animation-ready">
        <b><a href="#dom-animation-ready">#dom-animation-ready</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-animation-ready">6.4. The Animation interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-animation-finished">
        <b><a href="#dom-animation-finished">#dom-animation-finished</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-animation-finished">6.4. The Animation interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-animation-onfinish">
        <b><a href="#dom-animation-onfinish">#dom-animation-onfinish</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-animation-onfinish">6.4. The Animation interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-animation-oncancel">
        <b><a href="#dom-animation-oncancel">#dom-animation-oncancel</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-animation-oncancel">6.4. The Animation interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-animation-onremove">
        <b><a href="#dom-animation-onremove">#dom-animation-onremove</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-animation-onremove">6.4. The Animation interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-animation-cancel">
        <b><a href="#dom-animation-cancel">#dom-animation-cancel</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-animation-cancel">6.4. The Animation interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-animation-finish">
        <b><a href="#dom-animation-finish">#dom-animation-finish</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-animation-finish">4.4.12. Updating the finished state</a>
            <li><a href="#ref-for-dom-animation-finish①">6.4. The Animation interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-animation-play">
        <b><a href="#dom-animation-play">#dom-animation-play</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-animation-play">6.4. The Animation interface</a> <a
                    href="#ref-for-dom-animation-play①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-animation-pause">
        <b><a href="#dom-animation-pause">#dom-animation-pause</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-animation-pause">6.4. The Animation interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-animation-updateplaybackrate">
        <b><a href="#dom-animation-updateplaybackrate">#dom-animation-updateplaybackrate</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-animation-updateplaybackrate">6.4. The Animation interface</a> <a
                    href="#ref-for-dom-animation-updateplaybackrate①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-animation-updateplaybackrate-playbackrate-playbackrate">
        <b><a
                href="#dom-animation-updateplaybackrate-playbackrate-playbackrate">#dom-animation-updateplaybackrate-playbackrate-playbackrate</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-animation-updateplaybackrate-playbackrate-playbackrate">6.4. The Animation
                    interface</a> <a href="#ref-for-dom-animation-updateplaybackrate-playbackrate-playbackrate①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-animation-reverse">
        <b><a href="#dom-animation-reverse">#dom-animation-reverse</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-animation-reverse">6.4. The Animation interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-animation-persist">
        <b><a href="#dom-animation-persist">#dom-animation-persist</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-animation-persist">6.4. The Animation interface</a> <a
                    href="#ref-for-dom-animation-persist①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-animation-commitstyles">
        <b><a href="#dom-animation-commitstyles">#dom-animation-commitstyles</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-animation-commitstyles">6.4. The Animation interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="commit-computed-styles">
        <b><a href="#commit-computed-styles">#commit-computed-styles</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-commit-computed-styles">6.4. The Animation interface</a> <a
                    href="#ref-for-commit-computed-styles①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="enumdef-animationplaystate">
        <b><a href="#enumdef-animationplaystate">#enumdef-animationplaystate</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-enumdef-animationplaystate">6.4. The Animation interface</a> <a
                    href="#ref-for-enumdef-animationplaystate①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="enumdef-animationreplacestate">
        <b><a href="#enumdef-animationreplacestate">#enumdef-animationreplacestate</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-enumdef-animationreplacestate">6.4. The Animation interface</a> <a
                    href="#ref-for-enumdef-animationreplacestate①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="animationeffect">
        <b><a href="#animationeffect">#animationeffect</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-animationeffect">6.4. The Animation interface</a> <a
                    href="#ref-for-animationeffect①">(2)</a> <a href="#ref-for-animationeffect②">(3)</a>
            <li><a href="#ref-for-animationeffect③">6.5. The AnimationEffect interface</a>
            <li><a href="#ref-for-animationeffect④">6.5.1. The EffectTiming and OptionalEffectTiming dictionaries</a> <a
                    href="#ref-for-animationeffect⑤">(2)</a>
            <li><a href="#ref-for-animationeffect⑥">6.6. The KeyframeEffect interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-animationeffect-gettiming">
        <b><a href="#dom-animationeffect-gettiming">#dom-animationeffect-gettiming</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-animationeffect-gettiming">6.5. The AnimationEffect interface</a> <a
                    href="#ref-for-dom-animationeffect-gettiming①">(2)</a> <a
                    href="#ref-for-dom-animationeffect-gettiming②">(3)</a> <a
                    href="#ref-for-dom-animationeffect-gettiming③">(4)</a> <a
                    href="#ref-for-dom-animationeffect-gettiming④">(5)</a>
            <li><a href="#ref-for-dom-animationeffect-gettiming⑤">6.5.1. The EffectTiming and OptionalEffectTiming
                    dictionaries</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-animationeffect-getcomputedtiming">
        <b><a href="#dom-animationeffect-getcomputedtiming">#dom-animationeffect-getcomputedtiming</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-animationeffect-getcomputedtiming">6.5. The AnimationEffect interface</a> <a
                    href="#ref-for-dom-animationeffect-getcomputedtiming①">(2)</a> <a
                    href="#ref-for-dom-animationeffect-getcomputedtiming②">(3)</a> <a
                    href="#ref-for-dom-animationeffect-getcomputedtiming③">(4)</a> <a
                    href="#ref-for-dom-animationeffect-getcomputedtiming④">(5)</a> <a
                    href="#ref-for-dom-animationeffect-getcomputedtiming⑤">(6)</a>
            <li><a href="#ref-for-dom-animationeffect-getcomputedtiming⑥">6.5.1. The EffectTiming and
                    OptionalEffectTiming dictionaries</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-animationeffect-updatetiming">
        <b><a href="#dom-animationeffect-updatetiming">#dom-animationeffect-updatetiming</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-animationeffect-updatetiming">6.5. The AnimationEffect interface</a>
            <li><a href="#ref-for-dom-animationeffect-updatetiming①">6.5.1. The EffectTiming and OptionalEffectTiming
                    dictionaries</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-animationeffect-updatetiming-timing-timing">
        <b><a
                href="#dom-animationeffect-updatetiming-timing-timing">#dom-animationeffect-updatetiming-timing-timing</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-animationeffect-updatetiming-timing-timing">6.5. The AnimationEffect interface</a>
                <a href="#ref-for-dom-animationeffect-updatetiming-timing-timing①">(2)</a> <a
                    href="#ref-for-dom-animationeffect-updatetiming-timing-timing②">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dictdef-effecttiming">
        <b><a href="#dictdef-effecttiming">#dictdef-effecttiming</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dictdef-effecttiming">6.5. The AnimationEffect interface</a> <a
                    href="#ref-for-dictdef-effecttiming①">(2)</a> <a href="#ref-for-dictdef-effecttiming②">(3)</a> <a
                    href="#ref-for-dictdef-effecttiming③">(4)</a> <a href="#ref-for-dictdef-effecttiming④">(5)</a>
            <li><a href="#ref-for-dictdef-effecttiming⑤">6.5.1. The EffectTiming and OptionalEffectTiming
                    dictionaries</a> <a href="#ref-for-dictdef-effecttiming⑥">(2)</a>
            <li><a href="#ref-for-dictdef-effecttiming⑦">6.5.4. Updating the timing of an AnimationEffect</a>
            <li><a href="#ref-for-dictdef-effecttiming⑧">6.5.5. The ComputedEffectTiming dictionary</a>
            <li><a href="#ref-for-dictdef-effecttiming⑨">6.6. The KeyframeEffect interface</a>
            <li><a href="#ref-for-dictdef-effecttiming①⓪">6.6.1. Creating a new KeyframeEffect object</a>
            <li><a href="#ref-for-dictdef-effecttiming①①">6.6.3. Processing a keyframes
                    argument</a> <a href="#ref-for-dictdef-effecttiming①②">(2)</a> <a
                    href="#ref-for-dictdef-effecttiming①③">(3)</a>
            <li><a href="#ref-for-dictdef-effecttiming①④">6.6.4. The KeyframeEffectOptions dictionary</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dictdef-optionaleffecttiming">
        <b><a href="#dictdef-optionaleffecttiming">#dictdef-optionaleffecttiming</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dictdef-optionaleffecttiming">6.5. The AnimationEffect interface</a> <a
                    href="#ref-for-dictdef-optionaleffecttiming①">(2)</a>
            <li><a href="#ref-for-dictdef-optionaleffecttiming②">6.5.1. The EffectTiming and OptionalEffectTiming
                    dictionaries</a>
            <li><a href="#ref-for-dictdef-optionaleffecttiming③">6.5.4. Updating the timing of an AnimationEffect</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-effecttiming-delay">
        <b><a href="#dom-effecttiming-delay">#dom-effecttiming-delay</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-effecttiming-delay">6.5.1. The EffectTiming and OptionalEffectTiming
                    dictionaries</a>
            <li><a href="#ref-for-dom-effecttiming-delay①">6.5.4. Updating the timing of an AnimationEffect</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-optionaleffecttiming-delay">
        <b><a href="#dom-optionaleffecttiming-delay">#dom-optionaleffecttiming-delay</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-optionaleffecttiming-delay">6.5.1. The EffectTiming and OptionalEffectTiming
                    dictionaries</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-effecttiming-enddelay">
        <b><a href="#dom-effecttiming-enddelay">#dom-effecttiming-enddelay</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-effecttiming-enddelay">6.5.1. The EffectTiming and OptionalEffectTiming
                    dictionaries</a>
            <li><a href="#ref-for-dom-effecttiming-enddelay①">6.5.4. Updating the timing of an AnimationEffect</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-optionaleffecttiming-enddelay">
        <b><a href="#dom-optionaleffecttiming-enddelay">#dom-optionaleffecttiming-enddelay</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-optionaleffecttiming-enddelay">6.5.1. The EffectTiming and OptionalEffectTiming
                    dictionaries</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-effecttiming-fill">
        <b><a href="#dom-effecttiming-fill">#dom-effecttiming-fill</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-effecttiming-fill">6.5. The AnimationEffect interface</a> <a
                    href="#ref-for-dom-effecttiming-fill①">(2)</a>
            <li><a href="#ref-for-dom-effecttiming-fill②">6.5.1. The EffectTiming and OptionalEffectTiming
                    dictionaries</a>
            <li><a href="#ref-for-dom-effecttiming-fill③">6.5.4. Updating the timing of an AnimationEffect</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-optionaleffecttiming-fill">
        <b><a href="#dom-optionaleffecttiming-fill">#dom-optionaleffecttiming-fill</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-optionaleffecttiming-fill">6.5.1. The EffectTiming and OptionalEffectTiming
                    dictionaries</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-effecttiming-iterationstart">
        <b><a href="#dom-effecttiming-iterationstart">#dom-effecttiming-iterationstart</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-effecttiming-iterationstart">6.5.1. The EffectTiming and OptionalEffectTiming
                    dictionaries</a> <a href="#ref-for-dom-effecttiming-iterationstart①">(2)</a> <a
                    href="#ref-for-dom-effecttiming-iterationstart②">(3)</a> <a
                    href="#ref-for-dom-effecttiming-iterationstart③">(4)</a>
            <li><a href="#ref-for-dom-effecttiming-iterationstart④">6.5.4. Updating the timing of an AnimationEffect</a>
                <a href="#ref-for-dom-effecttiming-iterationstart⑤">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-optionaleffecttiming-iterationstart">
        <b><a
                href="#dom-optionaleffecttiming-iterationstart">#dom-optionaleffecttiming-iterationstart</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-optionaleffecttiming-iterationstart">6.5.1. The EffectTiming and
                    OptionalEffectTiming dictionaries</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-effecttiming-iterations">
        <b><a href="#dom-effecttiming-iterations">#dom-effecttiming-iterations</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-effecttiming-iterations">6.5.1. The EffectTiming and OptionalEffectTiming
                    dictionaries</a> <a href="#ref-for-dom-effecttiming-iterations①">(2)</a> <a
                    href="#ref-for-dom-effecttiming-iterations②">(3)</a>
            <li><a href="#ref-for-dom-effecttiming-iterations③">6.5.4. Updating the timing of an AnimationEffect</a> <a
                    href="#ref-for-dom-effecttiming-iterations④">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-optionaleffecttiming-iterations">
        <b><a href="#dom-optionaleffecttiming-iterations">#dom-optionaleffecttiming-iterations</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-optionaleffecttiming-iterations">6.5.1. The EffectTiming and OptionalEffectTiming
                    dictionaries</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-effecttiming-duration">
        <b><a href="#dom-effecttiming-duration">#dom-effecttiming-duration</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-effecttiming-duration">6.5. The AnimationEffect interface</a> <a
                    href="#ref-for-dom-effecttiming-duration①">(2)</a>
            <li><a href="#ref-for-dom-effecttiming-duration②">6.5.1. The EffectTiming and OptionalEffectTiming
                    dictionaries</a> <a href="#ref-for-dom-effecttiming-duration③">(2)</a> <a
                    href="#ref-for-dom-effecttiming-duration④">(3)</a>
            <li><a href="#ref-for-dom-effecttiming-duration⑤">6.5.4. Updating the timing of an AnimationEffect</a> <a
                    href="#ref-for-dom-effecttiming-duration⑥">(2)</a>
            <li><a href="#ref-for-dom-effecttiming-duration⑦">6.6. The KeyframeEffect interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-optionaleffecttiming-duration">
        <b><a href="#dom-optionaleffecttiming-duration">#dom-optionaleffecttiming-duration</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-optionaleffecttiming-duration">6.5.1. The EffectTiming and OptionalEffectTiming
                    dictionaries</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-effecttiming-direction">
        <b><a href="#dom-effecttiming-direction">#dom-effecttiming-direction</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-effecttiming-direction">6.5.1. The EffectTiming and OptionalEffectTiming
                    dictionaries</a>
            <li><a href="#ref-for-dom-effecttiming-direction①">6.5.4. Updating the timing of an AnimationEffect</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-optionaleffecttiming-direction">
        <b><a href="#dom-optionaleffecttiming-direction">#dom-optionaleffecttiming-direction</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-optionaleffecttiming-direction">6.5.1. The EffectTiming and OptionalEffectTiming
                    dictionaries</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-effecttiming-easing">
        <b><a href="#dom-effecttiming-easing">#dom-effecttiming-easing</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-effecttiming-easing">6.5.1. The EffectTiming and OptionalEffectTiming
                    dictionaries</a>
            <li><a href="#ref-for-dom-effecttiming-easing①">6.5.4. Updating the timing of an AnimationEffect</a> <a
                    href="#ref-for-dom-effecttiming-easing②">(2)</a>
            <li><a href="#ref-for-dom-effecttiming-easing③">6.6.3. Processing a keyframes
                    argument</a> <a href="#ref-for-dom-effecttiming-easing④">(2)</a> <a
                    href="#ref-for-dom-effecttiming-easing⑤">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-optionaleffecttiming-easing">
        <b><a href="#dom-optionaleffecttiming-easing">#dom-optionaleffecttiming-easing</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-optionaleffecttiming-easing">6.5.1. The EffectTiming and OptionalEffectTiming
                    dictionaries</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="enumdef-fillmode">
        <b><a href="#enumdef-fillmode">#enumdef-fillmode</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-enumdef-fillmode">6.5. The AnimationEffect interface</a> <a
                    href="#ref-for-enumdef-fillmode①">(2)</a>
            <li><a href="#ref-for-enumdef-fillmode②">6.5.1. The EffectTiming and OptionalEffectTiming dictionaries</a>
                <a href="#ref-for-enumdef-fillmode③">(2)</a> <a href="#ref-for-enumdef-fillmode④">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="enumdef-playbackdirection">
        <b><a href="#enumdef-playbackdirection">#enumdef-playbackdirection</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-enumdef-playbackdirection">6.5.1. The EffectTiming and OptionalEffectTiming
                    dictionaries</a> <a href="#ref-for-enumdef-playbackdirection①">(2)</a> <a
                    href="#ref-for-enumdef-playbackdirection②">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="update-the-timing-properties-of-an-animation-effect">
        <b><a
                href="#update-the-timing-properties-of-an-animation-effect">#update-the-timing-properties-of-an-animation-effect</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-update-the-timing-properties-of-an-animation-effect">6.5. The AnimationEffect
                    interface</a>
            <li><a href="#ref-for-update-the-timing-properties-of-an-animation-effect①">6.6. The KeyframeEffect
                    interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dictdef-computedeffecttiming">
        <b><a href="#dictdef-computedeffecttiming">#dictdef-computedeffecttiming</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dictdef-computedeffecttiming">6.5. The AnimationEffect interface</a> <a
                    href="#ref-for-dictdef-computedeffecttiming①">(2)</a>
            <li><a href="#ref-for-dictdef-computedeffecttiming②">6.5.5. The ComputedEffectTiming dictionary</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-computedeffecttiming-endtime">
        <b><a href="#dom-computedeffecttiming-endtime">#dom-computedeffecttiming-endtime</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-computedeffecttiming-endtime">6.5.5. The ComputedEffectTiming dictionary</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-computedeffecttiming-activeduration">
        <b><a
                href="#dom-computedeffecttiming-activeduration">#dom-computedeffecttiming-activeduration</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-computedeffecttiming-activeduration">6.5.5. The ComputedEffectTiming
                    dictionary</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-computedeffecttiming-localtime">
        <b><a href="#dom-computedeffecttiming-localtime">#dom-computedeffecttiming-localtime</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-computedeffecttiming-localtime">6.5.5. The ComputedEffectTiming dictionary</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-computedeffecttiming-progress">
        <b><a href="#dom-computedeffecttiming-progress">#dom-computedeffecttiming-progress</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-computedeffecttiming-progress">6.5.5. The ComputedEffectTiming dictionary</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-computedeffecttiming-currentiteration">
        <b><a
                href="#dom-computedeffecttiming-currentiteration">#dom-computedeffecttiming-currentiteration</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-computedeffecttiming-currentiteration">6.5.5. The ComputedEffectTiming
                    dictionary</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="keyframeeffect">
        <b><a href="#keyframeeffect">#keyframeeffect</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-keyframeeffect">6.6. The KeyframeEffect interface</a> <a
                    href="#ref-for-keyframeeffect①">(2)</a> <a href="#ref-for-keyframeeffect②">(3)</a> <a
                    href="#ref-for-keyframeeffect③">(4)</a> <a href="#ref-for-keyframeeffect④">(5)</a> <a
                    href="#ref-for-keyframeeffect⑤">(6)</a> <a href="#ref-for-keyframeeffect⑥">(7)</a> <a
                    href="#ref-for-keyframeeffect⑦">(8)</a>
            <li><a href="#ref-for-keyframeeffect⑧">6.6.1. Creating a new KeyframeEffect object</a> <a
                    href="#ref-for-keyframeeffect⑨">(2)</a> <a href="#ref-for-keyframeeffect①⓪">(3)</a>
            <li><a href="#ref-for-keyframeeffect①①">6.6.3. Processing a keyframes
                    argument</a>
            <li><a href="#ref-for-keyframeeffect①②">6.8. The Animatable interface mixin</a> <a
                    href="#ref-for-keyframeeffect①③">(2)</a> <a href="#ref-for-keyframeeffect①④">(3)</a>
            <li><a href="#ref-for-keyframeeffect①⑤">6.13. Model liveness</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-keyframeeffect-keyframeeffect">
        <b><a href="#dom-keyframeeffect-keyframeeffect">#dom-keyframeeffect-keyframeeffect</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-keyframeeffect-keyframeeffect">6.6. The KeyframeEffect interface</a> <a
                    href="#ref-for-dom-keyframeeffect-keyframeeffect①">(2)</a>
            <li><a href="#ref-for-dom-keyframeeffect-keyframeeffect②">6.6.1. Creating a new KeyframeEffect object</a>
            <li><a href="#ref-for-dom-keyframeeffect-keyframeeffect③">6.6.3. Processing a keyframes
                    argument</a>
            <li><a href="#ref-for-dom-keyframeeffect-keyframeeffect④">6.6.4. The KeyframeEffectOptions dictionary</a>
            <li><a href="#ref-for-dom-keyframeeffect-keyframeeffect⑤">6.8. The Animatable interface mixin</a> <a
                    href="#ref-for-dom-keyframeeffect-keyframeeffect⑥">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-keyframeeffect-keyframeeffect-target-keyframes-options-target">
        <b><a
                href="#dom-keyframeeffect-keyframeeffect-target-keyframes-options-target">#dom-keyframeeffect-keyframeeffect-target-keyframes-options-target</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-keyframeeffect-keyframeeffect-target-keyframes-options-target">6.6. The
                    KeyframeEffect interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-keyframeeffect-keyframeeffect-target-keyframes-options-keyframes">
        <b><a
                href="#dom-keyframeeffect-keyframeeffect-target-keyframes-options-keyframes">#dom-keyframeeffect-keyframeeffect-target-keyframes-options-keyframes</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-keyframeeffect-keyframeeffect-target-keyframes-options-keyframes">6.6. The
                    KeyframeEffect interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-keyframeeffect-keyframeeffect-target-keyframes-options-options">
        <b><a
                href="#dom-keyframeeffect-keyframeeffect-target-keyframes-options-options">#dom-keyframeeffect-keyframeeffect-target-keyframes-options-options</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-keyframeeffect-keyframeeffect-target-keyframes-options-options">6.6. The
                    KeyframeEffect interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-keyframeeffect-keyframeeffect-source">
        <b><a
                href="#dom-keyframeeffect-keyframeeffect-source">#dom-keyframeeffect-keyframeeffect-source</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-keyframeeffect-keyframeeffect-source">6.6. The KeyframeEffect interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-keyframeeffect-keyframeeffect-source-source">
        <b><a
                href="#dom-keyframeeffect-keyframeeffect-source-source">#dom-keyframeeffect-keyframeeffect-source-source</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-keyframeeffect-keyframeeffect-source-source">6.6. The KeyframeEffect interface</a>
                <a href="#ref-for-dom-keyframeeffect-keyframeeffect-source-source①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-keyframeeffect-target">
        <b><a href="#dom-keyframeeffect-target">#dom-keyframeeffect-target</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-keyframeeffect-target">6.6. The KeyframeEffect interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-keyframeeffect-pseudoelement">
        <b><a href="#dom-keyframeeffect-pseudoelement">#dom-keyframeeffect-pseudoelement</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-keyframeeffect-pseudoelement">6.6. The KeyframeEffect interface</a> <a
                    href="#ref-for-dom-keyframeeffect-pseudoelement①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-keyframeeffect-composite">
        <b><a href="#dom-keyframeeffect-composite">#dom-keyframeeffect-composite</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-keyframeeffect-composite">6.6. The KeyframeEffect interface</a> <a
                    href="#ref-for-dom-keyframeeffect-composite①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-keyframeeffect-getkeyframes">
        <b><a href="#dom-keyframeeffect-getkeyframes">#dom-keyframeeffect-getkeyframes</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-keyframeeffect-getkeyframes">6.6. The KeyframeEffect interface</a>
            <li><a href="#ref-for-dom-keyframeeffect-getkeyframes①">6.6.3. Processing a keyframes
                    argument</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-basecomputedkeyframe-offset">
        <b><a href="#dom-basecomputedkeyframe-offset">#dom-basecomputedkeyframe-offset</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-basecomputedkeyframe-offset">6.6. The KeyframeEffect interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-basecomputedkeyframe-computedoffset">
        <b><a
                href="#dom-basecomputedkeyframe-computedoffset">#dom-basecomputedkeyframe-computedoffset</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-basecomputedkeyframe-computedoffset">6.6. The KeyframeEffect interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-basecomputedkeyframe-easing">
        <b><a href="#dom-basecomputedkeyframe-easing">#dom-basecomputedkeyframe-easing</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-basecomputedkeyframe-easing">6.6. The KeyframeEffect interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-basecomputedkeyframe-composite">
        <b><a href="#dom-basecomputedkeyframe-composite">#dom-basecomputedkeyframe-composite</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-basecomputedkeyframe-composite">6.6. The KeyframeEffect interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-keyframeeffect-setkeyframes">
        <b><a href="#dom-keyframeeffect-setkeyframes">#dom-keyframeeffect-setkeyframes</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-keyframeeffect-setkeyframes">6.6. The KeyframeEffect interface</a> <a
                    href="#ref-for-dom-keyframeeffect-setkeyframes①">(2)</a> <a
                    href="#ref-for-dom-keyframeeffect-setkeyframes②">(3)</a>
            <li><a href="#ref-for-dom-keyframeeffect-setkeyframes③">6.6.3. Processing a keyframes
                    argument</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="animation-property-name-to-idl-attribute-name">
        <b><a
                href="#animation-property-name-to-idl-attribute-name">#animation-property-name-to-idl-attribute-name</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-animation-property-name-to-idl-attribute-name">6.6. The KeyframeEffect interface</a>
            <li><a href="#ref-for-animation-property-name-to-idl-attribute-name①">6.6.3. Processing a keyframes
                    argument</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="idl-attribute-name-to-animation-property-name">
        <b><a
                href="#idl-attribute-name-to-animation-property-name">#idl-attribute-name-to-animation-property-name</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-idl-attribute-name-to-animation-property-name">6.6.3. Processing a keyframes
                    argument</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="check-the-completion-record">
        <b><a href="#check-the-completion-record">#check-the-completion-record</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-check-the-completion-record">6.6.3. Processing a keyframes
                    argument</a> <a href="#ref-for-check-the-completion-record①">(2)</a> <a
                    href="#ref-for-check-the-completion-record②">(3)</a> <a
                    href="#ref-for-check-the-completion-record③">(4)</a> <a
                    href="#ref-for-check-the-completion-record④">(5)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="process-a-keyframe-like-object">
        <b><a href="#process-a-keyframe-like-object">#process-a-keyframe-like-object</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-process-a-keyframe-like-object">6.6.3. Processing a keyframes
                    argument</a> <a href="#ref-for-process-a-keyframe-like-object①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="process-a-keyframes-argument">
        <b><a href="#process-a-keyframes-argument">#process-a-keyframes-argument</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-process-a-keyframes-argument">6.6. The KeyframeEffect interface</a>
            <li><a href="#ref-for-process-a-keyframes-argument①">6.6.3. Processing a keyframes
                    argument</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dictdef-keyframeeffectoptions">
        <b><a href="#dictdef-keyframeeffectoptions">#dictdef-keyframeeffectoptions</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dictdef-keyframeeffectoptions">6.6. The KeyframeEffect interface</a> <a
                    href="#ref-for-dictdef-keyframeeffectoptions①">(2)</a> <a
                    href="#ref-for-dictdef-keyframeeffectoptions②">(3)</a> <a
                    href="#ref-for-dictdef-keyframeeffectoptions③">(4)</a> <a
                    href="#ref-for-dictdef-keyframeeffectoptions④">(5)</a>
            <li><a href="#ref-for-dictdef-keyframeeffectoptions⑤">6.6.3. Processing a keyframes
                    argument</a>
            <li><a href="#ref-for-dictdef-keyframeeffectoptions⑥">6.6.4. The KeyframeEffectOptions dictionary</a>
            <li><a href="#ref-for-dictdef-keyframeeffectoptions⑦">6.8. The Animatable interface mixin</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-keyframeeffectoptions-composite">
        <b><a href="#dom-keyframeeffectoptions-composite">#dom-keyframeeffectoptions-composite</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-keyframeeffectoptions-composite">6.6.4. The KeyframeEffectOptions dictionary</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-keyframeeffectoptions-pseudoelement">
        <b><a
                href="#dom-keyframeeffectoptions-pseudoelement">#dom-keyframeeffectoptions-pseudoelement</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-keyframeeffectoptions-pseudoelement">6.6. The KeyframeEffect interface</a> <a
                    href="#ref-for-dom-keyframeeffectoptions-pseudoelement①">(2)</a>
            <li><a href="#ref-for-dom-keyframeeffectoptions-pseudoelement②">6.6.4. The KeyframeEffectOptions
                    dictionary</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="compositeoperation">
        <b><a href="#compositeoperation">#compositeoperation</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-compositeoperation">6.6. The KeyframeEffect interface</a>
            <li><a href="#ref-for-compositeoperation①">6.6.4. The KeyframeEffectOptions dictionary</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="enumdef-compositeoperation">
        <b><a href="#enumdef-compositeoperation">#enumdef-compositeoperation</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-enumdef-compositeoperation">6.6. The KeyframeEffect interface</a> <a
                    href="#ref-for-enumdef-compositeoperation①">(2)</a>
            <li><a href="#ref-for-enumdef-compositeoperation②">6.6.4. The KeyframeEffectOptions dictionary</a> <a
                    href="#ref-for-enumdef-compositeoperation③">(2)</a>
            <li><a href="#ref-for-enumdef-compositeoperation④">6.7. The CompositeOperation and CompositeOperationOrAuto
                    enumerations</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-compositeoperation-replace">
        <b><a href="#dom-compositeoperation-replace">#dom-compositeoperation-replace</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-compositeoperation-replace">6.7. The CompositeOperation and
                    CompositeOperationOrAuto enumerations</a> <a href="#ref-for-dom-compositeoperation-replace①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-compositeoperation-add">
        <b><a href="#dom-compositeoperation-add">#dom-compositeoperation-add</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-compositeoperation-add">6.7. The CompositeOperation and CompositeOperationOrAuto
                    enumerations</a> <a href="#ref-for-dom-compositeoperation-add①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-compositeoperation-accumulate">
        <b><a href="#dom-compositeoperation-accumulate">#dom-compositeoperation-accumulate</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-compositeoperation-accumulate">6.7. The CompositeOperation and
                    CompositeOperationOrAuto enumerations</a> <a
                    href="#ref-for-dom-compositeoperation-accumulate①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="enumdef-compositeoperationorauto">
        <b><a href="#enumdef-compositeoperationorauto">#enumdef-compositeoperationorauto</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-enumdef-compositeoperationorauto">6.6. The KeyframeEffect interface</a>
            <li><a href="#ref-for-enumdef-compositeoperationorauto①">6.6.3. Processing a keyframes
                    argument</a> <a href="#ref-for-enumdef-compositeoperationorauto②">(2)</a> <a
                    href="#ref-for-enumdef-compositeoperationorauto③">(3)</a> <a
                    href="#ref-for-enumdef-compositeoperationorauto④">(4)</a> <a
                    href="#ref-for-enumdef-compositeoperationorauto⑤">(5)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-compositeoperationorauto-auto">
        <b><a href="#dom-compositeoperationorauto-auto">#dom-compositeoperationorauto-auto</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-compositeoperationorauto-auto">6.6. The KeyframeEffect interface</a>
            <li><a href="#ref-for-dom-compositeoperationorauto-auto①">6.6.3. Processing a keyframes
                    argument</a> <a href="#ref-for-dom-compositeoperationorauto-auto②">(2)</a>
            <li><a href="#ref-for-dom-compositeoperationorauto-auto③">6.6.4. The KeyframeEffectOptions dictionary</a>
            <li><a href="#ref-for-dom-compositeoperationorauto-auto④">6.7. The CompositeOperation and
                    CompositeOperationOrAuto enumerations</a> <a
                    href="#ref-for-dom-compositeoperationorauto-auto⑤">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="animatable">
        <b><a href="#animatable">#animatable</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-animatable">6.6.3. Processing a keyframes
                    argument</a> <a href="#ref-for-animatable①">(2)</a>
            <li><a href="#ref-for-animatable②">6.8. The Animatable interface mixin</a>
            <li><a href="#ref-for-animatable③">6.11. Extensions to the Element interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dictdef-keyframeanimationoptions">
        <b><a href="#dictdef-keyframeanimationoptions">#dictdef-keyframeanimationoptions</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dictdef-keyframeanimationoptions">6.6.3. Processing a keyframes
                    argument</a>
            <li><a href="#ref-for-dictdef-keyframeanimationoptions①">6.8. The Animatable interface mixin</a> <a
                    href="#ref-for-dictdef-keyframeanimationoptions②">(2)</a> <a
                    href="#ref-for-dictdef-keyframeanimationoptions③">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dictdef-getanimationsoptions">
        <b><a href="#dictdef-getanimationsoptions">#dictdef-getanimationsoptions</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dictdef-getanimationsoptions">6.8. The Animatable interface mixin</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-animatable-animate">
        <b><a href="#dom-animatable-animate">#dom-animatable-animate</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-animatable-animate">6.6.3. Processing a keyframes
                    argument</a> <a href="#ref-for-dom-animatable-animate①">(2)</a>
            <li><a href="#ref-for-dom-animatable-animate②">6.8. The Animatable interface mixin</a>
            <li><a href="#ref-for-dom-animatable-animate③">6.13. Model liveness</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-animatable-animate-keyframes-options-keyframes">
        <b><a
                href="#dom-animatable-animate-keyframes-options-keyframes">#dom-animatable-animate-keyframes-options-keyframes</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-animatable-animate-keyframes-options-keyframes">6.8. The Animatable interface
                    mixin</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-animatable-animate-keyframes-options-options">
        <b><a
                href="#dom-animatable-animate-keyframes-options-options">#dom-animatable-animate-keyframes-options-options</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-animatable-animate-keyframes-options-options">6.8. The Animatable interface
                    mixin</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-animatable-getanimations">
        <b><a href="#dom-animatable-getanimations">#dom-animatable-getanimations</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-animatable-getanimations">6.8. The Animatable interface mixin</a> <a
                    href="#ref-for-dom-animatable-getanimations①">(2)</a> <a
                    href="#ref-for-dom-animatable-getanimations②">(3)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-animatable-getanimations-options-options">
        <b><a
                href="#dom-animatable-getanimations-options-options">#dom-animatable-getanimations-options-options</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-animatable-getanimations-options-options">6.8. The Animatable interface mixin</a>
                <a href="#ref-for-dom-animatable-getanimations-options-options①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-keyframeanimationoptions-id">
        <b><a href="#dom-keyframeanimationoptions-id">#dom-keyframeanimationoptions-id</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-keyframeanimationoptions-id">6.8. The Animatable interface mixin</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-keyframeanimationoptions-timeline">
        <b><a href="#dom-keyframeanimationoptions-timeline">#dom-keyframeanimationoptions-timeline</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-keyframeanimationoptions-timeline">6.8. The Animatable interface mixin</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-getanimationsoptions-subtree">
        <b><a href="#dom-getanimationsoptions-subtree">#dom-getanimationsoptions-subtree</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-getanimationsoptions-subtree">6.8. The Animatable interface mixin</a> <a
                    href="#ref-for-dom-getanimationsoptions-subtree①">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-document-timeline">
        <b><a href="#dom-document-timeline">#dom-document-timeline</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-dom-document-timeline">6.9. Extensions to the Document interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-documentorshadowroot-getanimations">
        <b><a
                href="#dom-documentorshadowroot-getanimations">#dom-documentorshadowroot-getanimations</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-documentorshadowroot-getanimations">6.10. Extensions to the DocumentOrShadowRoot
                    interface mixin</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="animationplaybackevent">
        <b><a href="#animationplaybackevent">#animationplaybackevent</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-animationplaybackevent">4.4.12. Updating the finished state</a>
            <li><a href="#ref-for-animationplaybackevent①">4.4.14. Canceling an animation</a>
            <li><a href="#ref-for-animationplaybackevent②">5.5.2. Removing replaced animations</a>
            <li><a href="#ref-for-animationplaybackevent③">6.12. The AnimationPlaybackEvent interface</a> <a
                    href="#ref-for-animationplaybackevent④">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dictdef-animationplaybackeventinit">
        <b><a href="#dictdef-animationplaybackeventinit">#dictdef-animationplaybackeventinit</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dictdef-animationplaybackeventinit">6.12. The AnimationPlaybackEvent interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-animationplaybackevent-animationplaybackevent">
        <b><a
                href="#dom-animationplaybackevent-animationplaybackevent">#dom-animationplaybackevent-animationplaybackevent</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-animationplaybackevent-animationplaybackevent">6.12. The AnimationPlaybackEvent
                    interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-animationplaybackevent-currenttime">
        <b><a
                href="#dom-animationplaybackevent-currenttime">#dom-animationplaybackevent-currenttime</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-animationplaybackevent-currenttime">4.4.12. Updating the finished state</a>
            <li><a href="#ref-for-dom-animationplaybackevent-currenttime①">4.4.14. Canceling an animation</a>
            <li><a href="#ref-for-dom-animationplaybackevent-currenttime②">5.5.2. Removing replaced animations</a>
            <li><a href="#ref-for-dom-animationplaybackevent-currenttime③">6.12. The AnimationPlaybackEvent
                    interface</a> <a href="#ref-for-dom-animationplaybackevent-currenttime④">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-animationplaybackevent-timelinetime">
        <b><a
                href="#dom-animationplaybackevent-timelinetime">#dom-animationplaybackevent-timelinetime</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-animationplaybackevent-timelinetime">4.4.12. Updating the finished state</a> <a
                    href="#ref-for-dom-animationplaybackevent-timelinetime①">(2)</a>
            <li><a href="#ref-for-dom-animationplaybackevent-timelinetime②">4.4.14. Canceling an animation</a>
            <li><a href="#ref-for-dom-animationplaybackevent-timelinetime③">5.5.2. Removing replaced animations</a>
            <li><a href="#ref-for-dom-animationplaybackevent-timelinetime④">6.12. The AnimationPlaybackEvent
                    interface</a> <a href="#ref-for-dom-animationplaybackevent-timelinetime⑤">(2)</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-animationplaybackeventinit-currenttime">
        <b><a
                href="#dom-animationplaybackeventinit-currenttime">#dom-animationplaybackeventinit-currenttime</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-animationplaybackeventinit-currenttime">6.12. The AnimationPlaybackEvent
                    interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="dom-animationplaybackeventinit-timelinetime">
        <b><a
                href="#dom-animationplaybackeventinit-timelinetime">#dom-animationplaybackeventinit-timelinetime</a></b><b>Referenced
            in:</b>
        <ul>
            <li><a href="#ref-for-dom-animationplaybackeventinit-timelinetime">6.12. The AnimationPlaybackEvent
                    interface</a>
        </ul>
    </aside>
    <aside class="dfn-panel" data-for="combining-shadow-lists">
        <b><a href="#combining-shadow-lists">#combining-shadow-lists</a></b><b>Referenced in:</b>
        <ul>
            <li><a href="#ref-for-combining-shadow-lists">Animation of box-shadow and text-shadow</a> <a
                    href="#ref-for-combining-shadow-lists①">(2)</a>
        </ul>
    </aside>
    <script>/* script-dfn-panel */

        document.body.addEventListener("click", function (e) {
            var queryAll = function (sel) { return [].slice.call(document.querySelectorAll(sel)); }
            // Find the dfn element or panel, if any, that was clicked on.
            var el = e.target;
            var target;
            var hitALink = false;
            while (el.parentElement) {
                if (el.tagName == "A") {
                    // Clicking on a link in a <dfn> shouldn't summon the panel
                    hitALink = true;
                }
                if (el.classList.contains("dfn-paneled")) {
                    target = "dfn";
                    break;
                }
                if (el.classList.contains("dfn-panel")) {
                    target = "dfn-panel";
                    break;
                }
                el = el.parentElement;
            }
            if (target != "dfn-panel") {
                // Turn off any currently "on" or "activated" panels.
                queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(function (el) {
                    el.classList.remove("on");
                    el.classList.remove("activated");
                });
            }
            if (target == "dfn" && !hitALink) {
                // open the panel
                var dfnPanel = document.querySelector(".dfn-panel[data-for='" + el.id + "']");
                if (dfnPanel) {
                    dfnPanel.classList.add("on");
                    var rect = el.getBoundingClientRect();
                    dfnPanel.style.left = window.scrollX + rect.right + 5 + "px";
                    dfnPanel.style.top = window.scrollY + rect.top + "px";
                    var panelRect = dfnPanel.getBoundingClientRect();
                    var panelWidth = panelRect.right - panelRect.left;
                    if (panelRect.right > document.body.scrollWidth && (rect.left - (panelWidth + 5)) > 0) {
                        // Reposition, because the panel is overflowing
                        dfnPanel.style.left = window.scrollX + rect.left - (panelWidth + 5) + "px";
                    }
                } else {
                    console.log("Couldn't find .dfn-panel[data-for='" + el.id + "']");
                }
            } else if (target == "dfn-panel") {
                // Switch it to "activated" state, which pins it.
                el.classList.add("activated");
                el.style.left = null;
                el.style.top = null;
            }

        });
    </script>
    <script>/* script-var-click-highlighting */

        document.addEventListener("click", e => {
            if (e.target.nodeName == "VAR") {
                highlightSameAlgoVars(e.target);
            }
        });
        {
            const indexCounts = new Map();
            const indexNames = new Map();
            function highlightSameAlgoVars(v) {
                // Find the algorithm container.
                let algoContainer = null;
                let searchEl = v;
                while (algoContainer == null && searchEl != document.body) {
                    searchEl = searchEl.parentNode;
                    if (searchEl.hasAttribute("data-algorithm")) {
                        algoContainer = searchEl;
                    }
                }

                // Not highlighting document-global vars,
                // too likely to be unrelated.
                if (algoContainer == null) return;

                const algoName = algoContainer.getAttribute("data-algorithm");
                const varName = getVarName(v);
                const addClass = !v.classList.contains("selected");
                let highlightClass = null;
                if (addClass) {
                    const index = chooseHighlightIndex(algoName, varName);
                    indexCounts.get(algoName)[index] += 1;
                    indexNames.set(algoName + "///" + varName, index);
                    highlightClass = nameFromIndex(index);
                } else {
                    const index = previousHighlightIndex(algoName, varName);
                    indexCounts.get(algoName)[index] -= 1;
                    highlightClass = nameFromIndex(index);
                }

                // Find all same-name vars, and toggle their class appropriately.
                for (const el of algoContainer.querySelectorAll("var")) {
                    if (getVarName(el) == varName) {
                        el.classList.toggle("selected", addClass);
                        el.classList.toggle(highlightClass, addClass);
                    }
                }
            }
            function getVarName(el) {
                return el.textContent.replace(/(\s|\xa0)+/, " ").trim();
            }
            function chooseHighlightIndex(algoName, varName) {
                let indexes = null;
                if (indexCounts.has(algoName)) {
                    indexes = indexCounts.get(algoName);
                } else {
                    // 7 classes right now
                    indexes = [0, 0, 0, 0, 0, 0, 0];
                    indexCounts.set(algoName, indexes);
                }

                // If the element was recently unclicked,
                // *and* that color is still unclaimed,
                // give it back the same color.
                const lastIndex = previousHighlightIndex(algoName, varName);
                if (indexes[lastIndex] === 0) return lastIndex;

                // Find the earliest index with the lowest count.
                const minCount = Math.min.apply(null, indexes);
                let index = null;
                for (var i = 0; i < indexes.length; i++) {
                    if (indexes[i] == minCount) {
                        return i;
                    }
                }
            }
            function previousHighlightIndex(algoName, varName) {
                return indexNames.get(algoName + "///" + varName);
            }
            function nameFromIndex(index) {
                return "selected" + index;
            }
        }
    </script>
    <script src="/dropdown.js"></script>