<!DOCTYPE html>
<html lang="zh-hans">

<head>
    <meta charset="UTF-8">
    <!-- <meta name="generator" content="ReSpec 35.5.1"> -->
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <style>
        dfn {
            cursor: pointer
        }

        .dfn-panel {
            position: absolute;
            z-index: 35;
            min-width: 300px;
            max-width: 500px;
            padding: .5em .75em;
            margin-top: .6em;
            font-family: "Helvetica Neue", sans-serif;
            font-size: small;
            background: #fff;
            background: var(--indextable-hover-bg, #fff);
            color: #000;
            color: var(--text, #000);
            box-shadow: 0 1em 3em -.4em rgba(0, 0, 0, .3), 0 0 1px 1px rgba(0, 0, 0, .05);
            box-shadow: 0 1em 3em -.4em var(--tocsidebar-shadow, rgba(0, 0, 0, .3)), 0 0 1px 1px var(--tocsidebar-shadow, rgba(0, 0, 0, .05));
            border-radius: 2px
        }

        .dfn-panel:not(.docked)>.caret {
            position: absolute;
            top: -9px
        }

        .dfn-panel:not(.docked)>.caret::after,
        .dfn-panel:not(.docked)>.caret::before {
            content: "";
            position: absolute;
            border: 10px solid transparent;
            border-top: 0;
            border-bottom: 10px solid #fff;
            border-bottom-color: var(--indextable-hover-bg, #fff);
            top: 0
        }

        .dfn-panel:not(.docked)>.caret::before {
            border-bottom: 9px solid #a2a9b1;
            border-bottom-color: var(--indextable-hover-bg, #a2a9b1)
        }

        .dfn-panel * {
            margin: 0
        }

        .dfn-panel b {
            display: block;
            color: #000;
            color: var(--text, #000);
            margin-top: .25em
        }

        .dfn-panel ul a[href] {
            color: #333;
            color: var(--text, #333)
        }

        .dfn-panel>div {
            display: flex
        }

        .dfn-panel a.self-link {
            font-weight: 700;
            margin-right: auto
        }

        .dfn-panel .marker {
            padding: .1em;
            margin-left: .5em;
            border-radius: .2em;
            text-align: center;
            white-space: nowrap;
            font-size: 90%;
            color: #040b1c
        }

        .dfn-panel .marker.dfn-exported {
            background: #d1edfd;
            box-shadow: 0 0 0 .125em #1ca5f940
        }

        .dfn-panel .marker.idl-block {
            background: #8ccbf2;
            box-shadow: 0 0 0 .125em #0670b161
        }

        .dfn-panel a:not(:hover) {
            text-decoration: none !important;
            border-bottom: none !important
        }

        .dfn-panel a[href]:hover {
            border-bottom-width: 1px
        }

        .dfn-panel ul {
            padding: 0
        }

        .dfn-panel li {
            margin-left: 1em
        }

        .dfn-panel.docked {
            position: fixed;
            left: .5em;
            top: unset;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - .75em * 2 - .5em - .2em * 2);
            max-height: 30vh;
            overflow: auto
        }
    </style>




    <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-831873-42"></script>

    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'UA-831873-42');
    </script>


    <title>OpenAPI 规范 v3.2.0</title>
    <meta name="description"
        content="The OpenAPI Specification (OAS) defines a standard, programming language-agnostic interface description for HTTP APIs.">

    <meta name="color-scheme" content="light dark">
    <style id="respec-mainstyle">
        @keyframes pop {
            0% {
                transform: scale(1, 1)
            }

            25% {
                transform: scale(1.25, 1.25);
                opacity: .75
            }

            100% {
                transform: scale(1, 1)
            }
        }

        a.internalDFN {
            color: inherit;
            border-bottom: 1px solid #99c;
            text-decoration: none
        }

        a.externalDFN {
            color: inherit;
            border-bottom: 1px dotted #ccc;
            text-decoration: none
        }

        a.bibref {
            text-decoration: none
        }

        .respec-offending-element:target {
            animation: pop .25s ease-in-out 0s 1
        }

        .respec-offending-element,
        a[href].respec-offending-element {
            text-decoration: red wavy underline
        }

        @supports not (text-decoration:red wavy underline) {
            .respec-offending-element:not(pre) {
                display: inline-block
            }

            .respec-offending-element {
                background: url(data:image/gif;base64,R0lGODdhBAADAPEAANv///8AAP///wAAACwAAAAABAADAEACBZQjmIAFADs=) bottom repeat-x
            }
        }

        #references :target {
            background: #eaf3ff;
            animation: pop .4s ease-in-out 0s 1
        }

        cite .bibref {
            font-style: italic
        }

        a[href].orcid {
            padding-left: 4px;
            padding-right: 4px
        }

        a[href].orcid>svg {
            margin-bottom: -2px
        }

        ol.tof,
        ul.tof {
            list-style: none outside none
        }

        .caption {
            margin-top: .5em;
            font-style: italic
        }

        #issue-summary>ul {
            column-count: 2
        }

        #issue-summary li {
            list-style: none;
            display: inline-block
        }

        details.respec-tests-details {
            margin-left: 1em;
            display: inline-block;
            vertical-align: top
        }

        details.respec-tests-details>* {
            padding-right: 2em
        }

        details.respec-tests-details[open] {
            z-index: 999999;
            position: absolute;
            border: thin solid #cad3e2;
            border-radius: .3em;
            background-color: #fff;
            padding-bottom: .5em
        }

        details.respec-tests-details[open]>summary {
            border-bottom: thin solid #cad3e2;
            padding-left: 1em;
            margin-bottom: 1em;
            line-height: 2em
        }

        details.respec-tests-details>ul {
            width: 100%;
            margin-top: -.3em
        }

        details.respec-tests-details>li {
            padding-left: 1em
        }

        .self-link:hover {
            opacity: 1;
            text-decoration: none;
            background-color: transparent
        }

        aside.example .marker>a.self-link {
            color: inherit
        }

        .header-wrapper {
            display: flex;
            align-items: baseline
        }

        :is(h2, h3, h4, h5, h6):not(#toc>h2, #abstract>h2, #sotd>h2, .head>h2) {
            position: relative;
            left: -.5em
        }

        :is(h2, h3, h4, h5, h6):not(#toch2)+a.self-link {
            color: inherit;
            order: -1;
            position: relative;
            left: -1.1em;
            font-size: 1rem;
            opacity: .5
        }

        :is(h2, h3, h4, h5, h6)+a.self-link::before {
            content: "§";
            text-decoration: none;
            color: var(--heading-text)
        }

        :is(h2, h3)+a.self-link {
            top: -.2em
        }

        :is(h4, h5, h6)+a.self-link::before {
            color: #000
        }

        @media (max-width:767px) {
            dd {
                margin-left: 0
            }
        }

        @media print {
            .removeOnSave {
                display: none
            }
        }
    </style>

    <link rel="canonical" href="https://spec.openapis.org/oas/v3.2.0.html">
    <style>
        var:hover {
            text-decoration: underline;
            cursor: pointer
        }

        var.respec-hl {
            color: var(--color, #000);
            background-color: var(--bg-color);
            box-shadow: 0 0 0 2px var(--bg-color)
        }

        @media (prefers-color-scheme:dark) {
            var.respec-hl {
                filter: saturate(.9) brightness(.9)
            }
        }

        var.respec-hl-c1 {
            --bg-color: #f4d200
        }

        var.respec-hl-c2 {
            --bg-color: #ff87a2
        }

        var.respec-hl-c3 {
            --bg-color: #96e885
        }

        var.respec-hl-c4 {
            --bg-color: #3eeed2
        }

        var.respec-hl-c5 {
            --bg-color: #eacfb6
        }

        var.respec-hl-c6 {
            --bg-color: #82ddff
        }

        var.respec-hl-c7 {
            --bg-color: #ffbcf2
        }

        @media print {
            var.respec-hl {
                background: 0 0;
                color: #000;
                box-shadow: unset
            }
        }
    </style>
    <style>
        var {
            position: relative;
            cursor: pointer
        }

        var[data-type]::after,
        var[data-type]::before {
            position: absolute;
            left: 50%;
            top: -6px;
            opacity: 0;
            transition: opacity .4s;
            pointer-events: none
        }

        var[data-type]::before {
            content: "";
            transform: translateX(-50%);
            border-width: 4px 6px 0 6px;
            border-style: solid;
            border-color: transparent;
            border-top-color: #222
        }

        var[data-type]::after {
            content: attr(data-type);
            transform: translateX(-50%) translateY(-100%);
            background: #222;
            text-align: center;
            font-family: "Dank Mono", "Fira Code", monospace;
            font-style: normal;
            padding: 6px;
            border-radius: 3px;
            color: #daca88;
            text-indent: 0;
            font-weight: 400
        }

        var[data-type]:hover::after,
        var[data-type]:hover::before {
            opacity: 1
        }
    </style>
    <script id="initialUserConfig" type="application/json">{
  "specStatus": "base",
  "latestVersion": "https://spec.openapis.org/oas/latest.html",
  "thisVersion": "https://spec.openapis.org/oas/v3.2.0.html",
  "canonicalURI": "https://spec.openapis.org/oas/v3.2.0.html",
  "editors": [
    {
      "name": "Henry Andrews "
    },
    {
      "name": "Jeremy Whitlock "
    },
    {
      "name": "Karen Etheridge "
    },
    {
      "name": "Lorna Mitchell "
    },
    {
      "name": "Marsh Gardiner "
    },
    {
      "name": "Miguel Quintero "
    },
    {
      "name": "Mike Kistler "
    },
    {
      "name": "Ralf Handl "
    },
    {
      "name": "Vincent Biret "
    }
  ],
  "formerEditors": [
    {
      "name": "Ron Ratovsky "
    },
    {
      "name": "Darrel Miller "
    },
    {
      "name": "Mike Ralphson "
    },
    {
      "name": "Uri Sarid "
    },
    {
      "name": "Jason Harmon "
    },
    {
      "name": "Tony Tam "
    }
  ],
  "publishDate": "2025-09-19T00:00:00.000Z",
  "subtitle": "Version 3.2.0",
  "edDraftURI": "https://github.com/OAI/OpenAPI-Specification/",
  "shortName": "OAS",
  "historyURI": null,
  "lint": false,
  "logos": [
    {
      "src": "https://raw.githubusercontent.com/OAI/OpenAPI-Style-Guide/master/graphics/bitmap/OpenAPI_Logo_Pantone.png",
      "alt": "OpenAPI Initiative",
      "height": 48,
      "url": "https://openapis.org/"
    }
  ],
  "otherLinks": [
    {
      "key": "Other versions:",
      "data": [
        {
          "href": "https://spec.openapis.org/oas/v3.1.2.html"
        },
        {
          "href": "https://spec.openapis.org/oas/v3.1.1.html"
        },
        {
          "href": "https://spec.openapis.org/oas/v3.1.0.html"
        },
        {
          "href": "https://spec.openapis.org/oas/v3.0.4.html"
        },
        {
          "href": "https://spec.openapis.org/oas/v3.0.3.html"
        },
        {
          "href": "https://spec.openapis.org/oas/v3.0.2.html"
        },
        {
          "href": "https://spec.openapis.org/oas/v3.0.1.html"
        },
        {
          "href": "https://spec.openapis.org/oas/v3.0.0.html"
        },
        {
          "href": "https://spec.openapis.org/oas/v2.0.html"
        }
      ]
    },
    {
      "key": "Participate",
      "data": [
        {
          "value": "GitHub OAI/OpenAPI-Specification",
          "href": "https://github.com/OAI/OpenAPI-Specification/"
        },
        {
          "value": "File a bug",
          "href": "https://github.com/OAI/OpenAPI-Specification/issues"
        },
        {
          "value": "Commit history",
          "href": "https://github.com/OAI/OpenAPI-Specification/commits/main/versions/3.2.0.md"
        },
        {
          "value": "Pull requests",
          "href": "https://github.com/OAI/OpenAPI-Specification/pulls"
        }
      ]
    }
  ],
  "publishISODate": "2025-09-19T00:00:00.000Z",
  "generatedSubtitle": "19 September 2025"
}</script>
    <link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2021/base.css">
    <link rel="stylesheet" media="" href="https://www.w3.org/StyleSheets/TR/2021/dark.css" disabled="">
</head>

<body class="h-entry toc-inline">
    <div class="head">
        <p class="logos"><a class="logo" href="https://openapis.org/"><img  alt="OpenAPI Initiative"
                    height="48"
                    src="https://raw.githubusercontent.com/OAI/OpenAPI-Style-Guide/master/graphics/bitmap/OpenAPI_Logo_Pantone.png">
            </a></p>
        <h1 id="title" class="title">OpenAPI 规范 v3.2.0 </h1>
        <h2 id="subtitle" class="subtitle">版本 3.2.0</h2>
        <p id="w3c-state"> <time class="dt-published" datetime="2025-09-19">2025年9月19日</time></p>
        <details open="">
            <summary>关于本文档的更多信息</summary>
            <dl>
                <dt>此版本：</dt>
                <dd>
                    <a class="u-url"
                        href="https://spec.openapis.org/oas/v3.2.0.html">https://spec.openapis.org/oas/v3.2.0.html</a>
                </dd>
                <dt>最新发布版本：</dt>
                <dd>
                    <a href="https://spec.openapis.org/oas/latest.html">https://spec.openapis.org/oas/latest.html</a>
                </dd>
                <dt>最新编辑草稿：</dt>
                <dd><a
                        href="https://github.com/OAI/OpenAPI-Specification/">https://github.com/OAI/OpenAPI-Specification/</a>
                </dd>
                <dt>编辑者：</dt>
                <dd class="editor p-author h-card vcard">
                    <span class="p-name fn">Henry Andrews </span>
                </dd>
                <dd class="editor p-author h-card vcard">
                    <span class="p-name fn">Jeremy Whitlock </span>
                </dd>
                <dd class="editor p-author h-card vcard">
                    <span class="p-name fn">Karen Etheridge </span>
                </dd>
                <dd class="editor p-author h-card vcard">
                    <span class="p-name fn">Lorna Mitchell </span>
                </dd>
                <dd class="editor p-author h-card vcard">
                    <span class="p-name fn">Marsh Gardiner </span>
                </dd>
                <dd class="editor p-author h-card vcard">
                    <span class="p-name fn">Miguel Quintero </span>
                </dd>
                <dd class="editor p-author h-card vcard">
                    <span class="p-name fn">Mike Kistler </span>
                </dd>
                <dd class="editor p-author h-card vcard">
                    <span class="p-name fn">Ralf Handl </span>
                </dd>
                <dd class="editor p-author h-card vcard">
                    <span class="p-name fn">Vincent Biret </span>
                </dd>
                <dt>
                    前任编辑：
                </dt>
                <dd class="editor p-author h-card vcard">
                    <span class="p-name fn">Ron Ratovsky </span>
                </dd>
                <dd class="editor p-author h-card vcard">
                    <span class="p-name fn">Darrel Miller </span>
                </dd>
                <dd class="editor p-author h-card vcard">
                    <span class="p-name fn">Mike Ralphson </span>
                </dd>
                <dd class="editor p-author h-card vcard">
                    <span class="p-name fn">Uri Sarid </span>
                </dd>
                <dd class="editor p-author h-card vcard">
                    <span class="p-name fn">Jason Harmon </span>
                </dd>
                <dd class="editor p-author h-card vcard">
                    <span class="p-name fn">Tony Tam </span>
                </dd>
                <dt>其他版本：</dt>
                <dd>
                    <a href="https://spec.openapis.org/oas/v3.1.2.html">https://spec.openapis.org/oas/v3.1.2.html</a>
                </dd>
                <dd>
                    <a href="https://spec.openapis.org/oas/v3.1.1.html">https://spec.openapis.org/oas/v3.1.1.html</a>
                </dd>
                <dd>
                    <a href="https://spec.openapis.org/oas/v3.1.0.html">https://spec.openapis.org/oas/v3.1.0.html</a>
                </dd>
                <dd>
                    <a href="https://spec.openapis.org/oas/v3.0.4.html">https://spec.openapis.org/oas/v3.0.4.html</a>
                </dd>
                <dd>
                    <a href="https://spec.openapis.org/oas/v3.0.3.html">https://spec.openapis.org/oas/v3.0.3.html</a>
                </dd>
                <dd>
                    <a href="https://spec.openapis.org/oas/v3.0.2.html">https://spec.openapis.org/oas/v3.0.2.html</a>
                </dd>
                <dd>
                    <a href="https://spec.openapis.org/oas/v3.0.1.html">https://spec.openapis.org/oas/v3.0.1.html</a>
                </dd>
                <dd>
                    <a href="https://spec.openapis.org/oas/v3.0.0.html">https://spec.openapis.org/oas/v3.0.0.html</a>
                </dd>
                <dd>
                    <a href="https://spec.openapis.org/oas/v2.0.html">https://spec.openapis.org/oas/v2.0.html</a>
                </dd>
                <dt>参与</dt>
                <dd>
                    <a href="https://github.com/OAI/OpenAPI-Specification/">GitHub OAI/OpenAPI-Specification</a>
                </dd>
                <dd>
                    <a href="https://github.com/OAI/OpenAPI-Specification/issues">提交 Bug</a>
                </dd>
                <dd>
                    <a href="https://github.com/OAI/OpenAPI-Specification/commits/main/versions/3.2.0.md">提交历史</a>
                </dd>
                <dd>
                    <a href="https://github.com/OAI/OpenAPI-Specification/pulls">Pull requests</a>
                </dd>
            </dl>
        </details>


        <p class="copyright">Copyright © 2025 the Linux Foundation</p>
        <hr title="Separator for header">
    </div>
    <style>
        #respec-ui {
            visibility: hidden;
        }

        #title {
            color: #578000;
        }

        #subtitle {
            color: #578000;
        }

        .dt-published {
            color: #578000;
        }

        .dt-published::before {
            content: "Published ";
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            color: #578000;
            font-weight: normal;
            font-style: normal;
        }

        a[href] {
            color: #45512c;
        }

        body:not(.toc-inline) #toc h2 {
            color: #45512c;
        }

        table {
            display: block;
            width: 100%;
            overflow: auto;
        }

        table th {
            font-weight: 600;
        }

        table th,
        table td {
            padding: 6px 13px;
            border: 1px solid #dfe2e5;
        }

        table tr {
            background-color: #fff;
            border-top: 1px solid #c6cbd1;
        }

        table tr:nth-child(2n) {
            background-color: #f6f8fa;
        }

        pre {
            background-color: #f6f8fa !important;
        }

        code {
            color: #c83500
        }

        th code {
            color: inherit
        }

        a.bibref {
            text-decoration: underline;
        }

        body.darkmode {
            --toclink-underline: #6a9000;
            --toclink-visited-underline: #fff;
        }

        body.darkmode a,
        body.darkmode .tocxref,
        body.darkmode .u-url {
            color: #6a9000;
        }

        body.darkmode code {
            color: #e66c33;
        }

        body.darkmode:not(.toc-inline) #toc h2,
        body.darkmode h1,
        body.darkmode h2,
        body.darkmode h3,
        body.darkmode h4,
        body.darkmode h5,
        body.darkmode h6,
        body.darkmode #title,
        body.darkmode #subtitle,
        body.darkmode .toc-inline,
        body.darkmode .dt-published {
            color: #7bb01c;
        }

        body.darkmode pre,
        body.darkmode table tr:nth-child(2n),
        body.darkmode table tr {
            background-color: #1e1e1e !important;
            color: #dcdcdc;
        }

        body.darkmode img {
            background: transparent;
        }

        body.darkmode .logo img {
            display: none;
        }

        body.darkmode .logo::before {
            content: "";
            display: inline-block;
            height: 48px;
            width: 175px;
            background: url("https://raw.githubusercontent.com/OAI/OpenAPI-Style-Guide/refs/heads/main/graphics/bitmap/OpenAPI_Logo_Pantone.png") no-repeat center / contain;
            vertical-align: middle;
        }

        /** This contains the content of the https://www.w3.org/StyleSheets/TR/2021/dark.css file */
        body.darkmode {
            --text: #ddd;
            --bg: black;
            /* Absolute URLs due to https://bugs.webkit.org/show_bug.cgi?id=230243 */
            --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2021/logos/UD-watermark-dark-unofficial);
            --draft-watermark: url(https://www.w3.org/StyleSheets/TR/2021/logos/UD-watermark-dark-draft);
            --logo-bg: #1a5e9a;
            --logo-active-bg: #c00;
            --logo-text: white;
            --tocnav-normal-text: #999;
            --tocnav-normal-bg: var(--bg);
            --tocnav-hover-text: var(--tocnav-normal-text);
            --tocnav-hover-bg: #080808;
            --tocnav-active-text: #f44;
            --tocnav-active-bg: var(--tocnav-normal-bg);
            --tocsidebar-text: var(--text);
            --tocsidebar-bg: #080808;
            --tocsidebar-shadow: rgba(255, 255, 255, .1);
            --tocsidebar-heading-text: hsla(203, 20%, 40%, .7);
            --toclink-text: var(--text);
            --toclink-underline: #6af;
            --toclink-visited-text: var(--toclink-text);
            --toclink-visited-underline: #054572;
            --heading-text: #8af;
            --hr-text: var(--text);
            --algo-border: #456;
            --del-text: #f44;
            --del-bg: transparent;
            --ins-text: #4a4;
            --ins-bg: transparent;
            --a-normal-text: #6af;
            --a-normal-underline: #555;
            --a-visited-text: var(--a-normal-text);
            --a-visited-underline: var(--a-normal-underline);
            --a-hover-bg: rgba(25%, 25%, 25%, .2);
            --a-active-text: #f44;
            --a-active-underline: var(--a-active-text);
            --borderedblock-bg: rgba(255, 255, 255, .05);
            --blockquote-border: silver;
            --blockquote-bg: var(--borderedblock-bg);
            --blockquote-text: currentcolor;
            --issue-border: #e05252;
            --issue-bg: var(--borderedblock-bg);
            --issue-text: var(--text);
            --issueheading-text: hsl(0deg, 70%, 70%);
            --example-border: hsl(50deg, 90%, 60%);
            --example-bg: var(--borderedblock-bg);
            --example-text: var(--text);
            --exampleheading-text: hsl(50deg, 70%, 70%);
            --note-border: hsl(120deg, 100%, 35%);
            --note-bg: var(--borderedblock-bg);
            --note-text: var(--text);
            --noteheading-text: hsl(120, 70%, 70%);
            --notesummary-underline: silver;
            --advisement-border: orange;
            --advisement-bg: #222218;
            --advisement-text: var(--text);
            --advisementheading-text: #f84;
            --amendment-border: #330099;
            --amendment-bg: var(--borderedblock-bg);
            --amendment-text: var(--text);
            --amendmentheading-text: #a086ff;
            --amendment-border: #330099;
            --amendment-bg: #080010;
            --amendment-text: var(--text);
            --amendmentheading-text: #cc00ff;
            --warning-border: red;
            --warning-bg: hsla(40, 100%, 20%, 0.95);
            --warning-text: var(--text);
            --def-border: #8ccbf2;
            --def-bg: #080818;
            --def-text: var(--text);
            --defrow-border: #136;
            --datacell-border: silver;
            --indexinfo-text: #aaa;
            --indextable-hover-text: var(--text);
            --indextable-hover-bg: #181818;
            --outdatedspec-bg: rgba(255, 255, 255, .5);
            --outdatedspec-text: black;
            --outdated-bg: maroon;
            --outdated-text: white;
            --outdated-shadow: red;
            --editedrec-bg: darkorange;
        }

        /**  * GitHub Gist Theme  * Author : Louis Barranqueiro - https://github.com/LouisBarranqueiro  */
        .hljs {
            display: block;
            background: white;
            padding: 0.5em;
            color: #333333;
            overflow-x: auto;
        }

        .hljs-comment,
        .hljs-meta {
            color: #727070;
        }

        .hljs-string,
        .hljs-variable,
        .hljs-template-variable,
        .hljs-strong,
        .hljs-emphasis,
        .hljs-quote {
            color: #c74700;
        }

        .hljs-number {
            color: #005e5e;
        }

        .hljs-keyword,
        .hljs-selector-tag,
        .hljs-type {
            color: #a71d5d;
        }

        .hljs-literal,
        .hljs-symbol,
        .hljs-bullet,
        .hljs-attribute {
            color: #007aa2;
        }

        .hljs-section,
        .hljs-name {
            color: #4b7c46;
        }

        .hljs-tag {
            color: #333333;
        }

        .hljs-title,
        .hljs-attr,
        .hljs-selector-id,
        .hljs-selector-class,
        .hljs-selector-attr,
        .hljs-selector-pseudo {
            color: #795da3;
        }

        .hljs-addition {
            color: #55a532;
            background-color: #eaffea;
        }

        .hljs-deletion {
            color: #bd2c00;
            background-color: #ffecec;
        }

        .hljs-link {
            text-decoration: underline;
        }
    </style>
    <section class="notoc introductory" id="abstract">
        <h2>什么是 OpenAPI 规范？</h2>OpenAPI 规范（OAS）定义了一个标准的、与编程语言无关的 HTTP API
        接口描述方式，使得人类和计算机都能在无需访问源代码、额外文档或检测网络流量的情况下，发现并理解服务的能力。只要通过 OpenAPI
        正确定义，使用者就能以极少的实现逻辑理解并与远程服务交互。类似于底层编程中的接口描述，OpenAPI 规范消除了调用服务时的猜测工作。
    </section>
    <section class="override introductory notoc" id="sotd" data-max-toc="0">
        <h2>本文档状态</h2>本规范的权威出处为上方引用的 HTML 文件，标记为<em>此版本</em>。
    </section>
    <nav id="toc">
        <h2 class="introductory" id="table-of-contents">内容目录</h2>
        <ol class="toc">
            <li class="tocline"><a class="tocxref" href="#openapi-specification"><bdi class="secno">1. </bdi>OpenAPI
                    规范</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#conformance"><bdi class="secno">1.1 </bdi>版本 3.2.0</a>
                    </li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#introduction"><bdi class="secno">2. </bdi>简介</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#versions-and-deprecation"><bdi class="secno">2.1
                            </bdi>版本与弃用</a></li>
                    <li class="tocline"><a class="tocxref" href="#undefined-and-implementation-defined-behavior"><bdi
                                class="secno">2.2 </bdi>未定义与实现自定义行为</a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#format"><bdi class="secno">3. </bdi>格式</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#json-and-yaml-compatibility"><bdi class="secno">3.1
                            </bdi>JSON 与 YAML 兼容性</a></li>
                    <li class="tocline"><a class="tocxref" href="#case-sensitivity"><bdi class="secno">3.2
                            </bdi>大小写敏感性</a></li>
                    <li class="tocline"><a class="tocxref" href="#rich-text-formatting"><bdi class="secno">3.3
                            </bdi>富文本格式化</a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#objects-and-fields"><bdi class="secno">4. </bdi>对象与字段</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#openapi-object"><bdi class="secno">4.1 </bdi>OpenAPI
                            对象</a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#fixed-fields"><bdi class="secno">4.1.1
                                    </bdi>固定字段</a></li>
                            <li class="tocline"><a class="tocxref" href="#openapi-description-structure"><bdi
                                        class="secno">4.1.2 </bdi>OpenAPI 描述结构</a>
                                <ol class="toc">
                                    <li class="tocline"><a class="tocxref" href="#parsing-documents"><bdi
                                                class="secno">4.1.2.1 </bdi>文档解析</a></li>
                                    <li class="tocline"><a class="tocxref"
                                            href="#relative-references-in-api-description-uris"><bdi
                                                class="secno">4.1.2.2 </bdi>API 描述 URI 的相对引用</a>
                                        <ol class="toc">
                                            <li class="tocline"><a class="tocxref"
                                                    href="#establishing-the-base-uri"><bdi class="secno">4.1.2.2.1
                                                    </bdi>基础 URI 的建立</a></li>
                                            <li class="tocline"><a class="tocxref" href="#resolving-uri-fragments"><bdi
                                                        class="secno">4.1.2.2.2 </bdi>URI 片段解析</a></li>
                                            <li class="tocline"><a class="tocxref"
                                                    href="#relative-uri-references-in-commonmark-fields"><bdi
                                                        class="secno">4.1.2.2.3 </bdi>CommonMark 字段中的相对 URI 引用</a></li>
                                        </ol>
                                    </li>
                                    <li class="tocline"><a class="tocxref" href="#resolving-implicit-connections"><bdi
                                                class="secno">4.1.2.3 </bdi>隐式连接解析</a></li>
                                </ol>
                            </li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#info-object"><bdi class="secno">4.2 </bdi>信息对象</a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#fixed-fields-0"><bdi class="secno">4.2.1
                                    </bdi>固定字段</a></li>
                            <li class="tocline"><a class="tocxref" href="#info-object-example"><bdi class="secno">4.2.2
                                    </bdi>信息对象示例</a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#contact-object"><bdi class="secno">4.3 </bdi>联系对象</a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#fixed-fields-1"><bdi class="secno">4.3.1
                                    </bdi>固定字段</a></li>
                            <li class="tocline"><a class="tocxref" href="#contact-object-example"><bdi
                                        class="secno">4.3.2 </bdi>联系对象示例</a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#license-object"><bdi class="secno">4.4 </bdi>许可对象</a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#fixed-fields-2"><bdi class="secno">4.4.1
                                    </bdi>固定字段</a></li>
                            <li class="tocline"><a class="tocxref" href="#license-object-example"><bdi
                                        class="secno">4.4.2 </bdi>许可对象示例</a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#server-object"><bdi class="secno">4.5 </bdi>服务对象</a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#fixed-fields-3"><bdi class="secno">4.5.1
                                    </bdi>固定字段</a></li>
                            <li class="tocline"><a class="tocxref" href="#relative-references-in-api-urls"><bdi
                                        class="secno">4.5.2 </bdi>API URL 的相对引用</a>
                                <ol class="toc">
                                    <li class="tocline"><a class="tocxref"
                                            href="#examples-of-api-base-url-determination"><bdi class="secno">4.5.2.1
                                            </bdi>API 基本 URL 解析示例</a></li>
                                </ol>
                            </li>
                            <li class="tocline"><a class="tocxref" href="#server-object-example"><bdi
                                        class="secno">4.5.3 </bdi>服务对象示例</a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#server-variable-object"><bdi class="secno">4.6
                            </bdi>服务变量对象</a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#fixed-fields-4"><bdi class="secno">4.6.1
                                    </bdi>固定字段</a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#components-object"><bdi class="secno">4.7
                            </bdi>组件对象</a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#fixed-fields-5"><bdi class="secno">4.7.1
                                    </bdi>固定字段</a></li>
                            <li class="tocline"><a class="tocxref" href="#components-object-example"><bdi
                                        class="secno">4.7.2 </bdi>组件对象示例</a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#paths-object"><bdi class="secno">4.8 </bdi>Paths
                            对象</a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#patterned-fields"><bdi class="secno">4.8.1
                                    </bdi>模式字段</a></li>
                            <li class="tocline"><a class="tocxref" href="#path-templating"><bdi class="secno">4.8.2
                                    </bdi>路径模板化</a>
                                <ol class="toc">
                                    <li class="tocline"><a class="tocxref" href="#path-templating-matching"><bdi
                                                class="secno">4.8.2.1 </bdi>路径模板化匹配</a></li>
                                </ol>
                            </li>
                            <li class="tocline"><a class="tocxref" href="#paths-object-example"><bdi class="secno">4.8.3
                                    </bdi>Paths 对象示例</a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#path-item-object"><bdi class="secno">4.9
                            </bdi>Path Item 对象</a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#fixed-fields-6"><bdi class="secno">4.9.1
                                    </bdi>固定字段</a></li>
                            <li class="tocline"><a class="tocxref" href="#path-item-object-example"><bdi
                                        class="secno">4.9.2 </bdi>Path Item 对象示例</a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#operation-object"><bdi class="secno">4.10
                            </bdi>Operation 对象</a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#fixed-fields-7"><bdi class="secno">4.10.1
                                    </bdi>固定字段</a></li>
                            <li class="tocline"><a class="tocxref" href="#operation-object-example"><bdi
                                        class="secno">4.10.2 </bdi>Operation 对象示例</a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#external-documentation-object"><bdi class="secno">4.11
                            </bdi>外部文档对象</a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#fixed-fields-8"><bdi class="secno">4.11.1
                                    </bdi>固定字段</a></li>
                            <li class="tocline"><a class="tocxref" href="#external-documentation-object-example"><bdi
                                        class="secno">4.11.2 </bdi>外部文档对象示例</a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#parameter-object"><bdi class="secno">4.12
                            </bdi>参数对象</a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#parameter-locations"><bdi class="secno">4.12.1
                                    </bdi>参数位置</a></li>
                            <li class="tocline"><a class="tocxref" href="#fixed-fields-9"><bdi class="secno">4.12.2
                                    </bdi>固定字段</a>
                                <ol class="toc">
                                    <li class="tocline"><a class="tocxref" href="#common-fixed-fields"><bdi
                                                class="secno">4.12.2.1 </bdi>通用固定字段</a></li>
                                    <li class="tocline"><a class="tocxref" href="#fixed-fields-for-use-with-schema"><bdi
                                                class="secno">4.12.2.2 </bdi>与<code>schema</code>一起使用的固定字段</a></li>
                                    <li class="tocline"><a class="tocxref"
                                            href="#fixed-fields-for-use-with-content"><bdi class="secno">4.12.2.3
                                            </bdi>与<code>content</code>一起使用的固定字段</a></li>
                                </ol>
                            </li>
                            <li class="tocline"><a class="tocxref" href="#style-values"><bdi class="secno">4.12.3
                                    </bdi>样式值</a></li>
                            <li class="tocline"><a class="tocxref" href="#url-percent-encoding"><bdi
                                        class="secno">4.12.4 </bdi>URL 百分号编码</a></li>
                            <li class="tocline"><a class="tocxref" href="#serialization-and-examples"><bdi
                                        class="secno">4.12.5 </bdi>序列化与示例</a></li>
                            <li class="tocline"><a class="tocxref" href="#style-examples"><bdi class="secno">4.12.6
                                    </bdi>样式示例</a></li>
                            <li class="tocline"><a class="tocxref"
                                    href="#extending-support-for-querystring-formats"><bdi class="secno">4.12.7
                                    </bdi>扩展对 Querystring 格式的支持</a></li>
                            <li class="tocline"><a class="tocxref" href="#parameter-object-examples"><bdi
                                        class="secno">4.12.8 </bdi>参数对象示例</a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#request-body-object"><bdi class="secno">4.13
                            </bdi>请求体对象</a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#fixed-fields-10"><bdi class="secno">4.13.1
                                    </bdi>固定字段</a></li>
                            <li class="tocline"><a class="tocxref" href="#request-body-examples"><bdi
                                        class="secno">4.13.2 </bdi>请求体示例</a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#media-type-object"><bdi class="secno">4.14
                            </bdi>媒体类型对象</a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#fixed-fields-11"><bdi class="secno">4.14.1
                                    </bdi>固定字段</a></li>
                            <li class="tocline"><a class="tocxref" href="#media-types"><bdi class="secno">4.14.2
                                    </bdi>媒体类型</a>
                                <ol class="toc">
                                    <li class="tocline"><a class="tocxref" href="#openapi-media-type-registry"><bdi
                                                class="secno">4.14.2.1 </bdi>OpenAPI 媒体类型注册表</a></li>
                                </ol>
                            </li>
                            <li class="tocline"><a class="tocxref" href="#complete-vs-streaming-content"><bdi
                                        class="secno">4.14.3 </bdi>完整与流式内容</a>
                                <ol class="toc">
                                    <li class="tocline"><a class="tocxref" href="#sequential-media-types"><bdi
                                                class="secno">4.14.3.1 </bdi>顺序媒体类型</a>
                                        <ol class="toc">
                                            <li class="tocline"><a class="tocxref"
                                                    href="#streaming-sequential-media-types"><bdi
                                                        class="secno">4.14.3.1.1 </bdi>流式顺序媒体类型</a></li>
                                        </ol>
                                    </li>
                                    <li class="tocline"><a class="tocxref" href="#binary-streams"><bdi
                                                class="secno">4.14.3.2 </bdi>二进制流</a></li>
                                </ol>
                            </li>
                            <li class="tocline"><a class="tocxref"
                                    href="#special-considerations-for-server-sent-events"><bdi class="secno">4.14.4
                                    </bdi>服务器推送事件的特殊考虑</a></li>
                            <li class="tocline"><a class="tocxref" href="#encoding-usage-and-restrictions"><bdi
                                        class="secno">4.14.5 </bdi>编码用法与限制</a>
                                <ol class="toc">
                                    <li class="tocline"><a class="tocxref" href="#encoding-by-name"><bdi
                                                class="secno">4.14.5.1 </bdi>按名称编码</a></li>
                                    <li class="tocline"><a class="tocxref" href="#encoding-by-position"><bdi
                                                class="secno">4.14.5.2 </bdi>按位置编码</a></li>
                                    <li class="tocline"><a class="tocxref" href="#additional-encoding-approaches"><bdi
                                                class="secno">4.14.5.3 </bdi>其他编码方式</a></li>
                                </ol>
                            </li>
                            <li class="tocline"><a class="tocxref" href="#media-type-examples-0"><bdi
                                        class="secno">4.14.6 </bdi>媒体类型示例</a>
                                <ol class="toc">
                                    <li class="tocline"><a class="tocxref" href="#json"><bdi class="secno">4.14.6.1
                                            </bdi>JSON</a></li>
                                    <li class="tocline"><a class="tocxref" href="#sequential-json"><bdi
                                                class="secno">4.14.6.2 </bdi>顺序 JSON</a></li>
                                    <li class="tocline"><a class="tocxref" href="#server-sent-event-streams"><bdi
                                                class="secno">4.14.6.3 </bdi>服务器推送事件流</a></li>
                                </ol>
                            </li>
                            <li class="tocline"><a class="tocxref" href="#considerations-for-file-uploads"><bdi
                                        class="secno">4.14.7 </bdi>文件上传注意事项</a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#encoding-object"><bdi class="secno">4.15
                            </bdi>Encoding 对象</a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#fixed-fields-12"><bdi class="secno">4.15.1
                                    </bdi>固定字段</a>
                                <ol class="toc">
                                    <li class="tocline"><a class="tocxref" href="#common-fixed-fields-0"><bdi
                                                class="secno">4.15.1.1 </bdi>通用固定字段</a></li>
                                    <li class="tocline"><a class="tocxref"
                                            href="#fixed-fields-for-rfc6570-style-serialization"><bdi
                                                class="secno">4.15.1.2 </bdi>用于 RFC6570 风格序列化的固定字段</a></li>
                                </ol>
                            </li>
                            <li class="tocline"><a class="tocxref" href="#nested-encoding"><bdi class="secno">4.15.2
                                    </bdi>嵌套编码</a></li>
                            <li class="tocline"><a class="tocxref"
                                    href="#encoding-the-x-www-form-urlencoded-media-type"><bdi class="secno">4.15.3
                                    </bdi>对 <code>x-www-form-urlencoded</code> 媒体类型的编码</a>
                                <ol class="toc">
                                    <li class="tocline"><a class="tocxref"
                                            href="#example-url-encoded-form-with-json-values"><bdi
                                                class="secno">4.15.3.1 </bdi> 示例：包含 JSON 值的 URL 编码表单</a></li>
                                    <li class="tocline"><a class="tocxref"
                                            href="#example-url-encoded-form-with-binary-values"><bdi
                                                class="secno">4.15.3.2 </bdi>示例：包含二进制值的 URL 编码表单</a></li>
                                </ol>
                            </li>
                            <li class="tocline"><a class="tocxref" href="#encoding-multipart-media-types"><bdi
                                        class="secno">4.15.4 </bdi>对 multipart 媒体类型的编码</a>
                                <ol class="toc">
                                    <li class="tocline"><a class="tocxref"
                                            href="#handling-multiple-contenttype-values"><bdi class="secno">4.15.4.1
                                            </bdi>处理多个<code>contentType</code>值</a></li>
                                    <li class="tocline"><a class="tocxref"
                                            href="#content-transfer-encoding-and-contentencoding"><bdi
                                                class="secno">4.15.4.2 </bdi><code>Content-Transfer-Encoding</code> 与
                                            <code>contentEncoding</code></a></li>
                                    <li class="tocline"><a class="tocxref" href="#example-basic-multipart-form"><bdi
                                                class="secno">4.15.4.3 </bdi>示例：基本的 Multipart 表单</a></li>
                                    <li class="tocline"><a class="tocxref"
                                            href="#example-multipart-form-with-encoding-objects"><bdi
                                                class="secno">4.15.4.4 </bdi>示例：示例：包含 Encoding Objects 的 Multipart
                                            表单</a></li>
                                    <li class="tocline"><a class="tocxref"
                                            href="#example-multipart-form-with-multiple-files"><bdi
                                                class="secno">4.15.4.5 </bdi>示例：包含多个文件的 Multipart 表单</a></li>
                                    <li class="tocline"><a class="tocxref"
                                            href="#example-ordered-unnamed-multipart"><bdi class="secno">4.15.4.6
                                            </bdi>示例：有序且无名的 Multipart分</a></li>
                                    <li class="tocline"><a class="tocxref"
                                            href="#example-ordered-multipart-with-required-header"><bdi
                                                class="secno">4.15.4.7 </bdi>示例：有必需头部的有序 Multipart</a></li>
                                    <li class="tocline"><a class="tocxref" href="#example-streaming-multipart"><bdi
                                                class="secno">4.15.4.8 </bdi>示例：流式 Multipart</a></li>
                                    <li class="tocline"><a class="tocxref" href="#example-streaming-byte-ranges"><bdi
                                                class="secno">4.15.4.9 </bdi>示例：流式字节范围</a></li>
                                    <li class="tocline"><a class="tocxref" href="#example-nested-multipart-mixed"><bdi
                                                class="secno">4.15.4.10 </bdi>示例：嵌套的 <code>multipart/mixed</code></a>
                                    </li>
                                </ol>
                            </li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#responses-object"><bdi class="secno">4.16
                            </bdi>Responses 对象</a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#fixed-fields-13"><bdi class="secno">4.16.1
                                    </bdi>固定字段</a></li>
                            <li class="tocline"><a class="tocxref" href="#patterned-fields-0"><bdi class="secno">4.16.2
                                    </bdi>模式字段</a></li>
                            <li class="tocline"><a class="tocxref" href="#http-status-codes"><bdi class="secno">4.16.3
                                    </bdi>HTTP 状态码</a></li>
                            <li class="tocline"><a class="tocxref" href="#responses-object-example"><bdi
                                        class="secno">4.16.4 </bdi>Responses 对象示例</a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#response-object"><bdi class="secno">4.17
                            </bdi>Response 对象</a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#fixed-fields-14"><bdi class="secno">4.17.1
                                    </bdi>固定字段</a></li>
                            <li class="tocline"><a class="tocxref" href="#response-object-examples"><bdi
                                        class="secno">4.17.2 </bdi>Response 对象示例</a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#callback-object"><bdi class="secno">4.18
                            </bdi>Callback 对象</a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#patterned-fields-1"><bdi class="secno">4.18.1
                                    </bdi>模式字段</a></li>
                            <li class="tocline"><a class="tocxref" href="#key-expression"><bdi class="secno">4.18.2
                                    </bdi>键表达式</a></li>
                            <li class="tocline"><a class="tocxref" href="#callback-object-examples"><bdi
                                        class="secno">4.18.3 </bdi>Callback 对象示例</a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#example-object"><bdi class="secno">4.19 </bdi>Example
                            对象</a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#fixed-fields-15"><bdi class="secno">4.19.1
                                    </bdi>固定字段</a></li>
                            <li class="tocline"><a class="tocxref" href="#working-with-examples"><bdi
                                        class="secno">4.19.2 </bdi>使用示例</a>
                                <ol class="toc">
                                    <li class="tocline"><a class="tocxref"
                                            href="#json-compatible-and-value-safe-examples"><bdi class="secno">4.19.2.1
                                            </bdi>兼容 JSON 与 <code>value</code> -安全的示例</a></li>
                                    <li class="tocline"><a class="tocxref" href="#choosing-which-field-s-to-use"><bdi
                                                class="secno">4.19.2.2 </bdi>选择使用哪些字段</a></li>
                                    <li class="tocline"><a class="tocxref" href="#criteria-for-serializedexample"><bdi
                                                class="secno">4.19.2.3 </bdi>
                                            用于 <code>serializedExample</code> 的标准</a></li>
                                    <li class="tocline"><a class="tocxref" href="#validating-examples"><bdi
                                                class="secno">4.19.2.4 </bdi>验证示例</a></li>
                                </ol>
                            </li>
                            <li class="tocline"><a class="tocxref" href="#example-object-examples"><bdi
                                        class="secno">4.19.3 </bdi>Example 对象示例</a>
                                <ol class="toc">
                                    <li class="tocline"><a class="tocxref" href="#json-examples"><bdi
                                                class="secno">4.19.3.1 </bdi>JSON 示例</a></li>
                                    <li class="tocline"><a class="tocxref" href="#binary-examples"><bdi
                                                class="secno">4.19.3.2 </bdi>二进制示例</a></li>
                                    <li class="tocline"><a class="tocxref" href="#boolean-query-parameter-examples"><bdi
                                                class="secno">4.19.3.3 </bdi>布尔型查询参数示例</a></li>
                                </ol>
                            </li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#link-object"><bdi class="secno">4.20 </bdi>链接对象</a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#fixed-fields-16"><bdi class="secno">4.20.1
                                    </bdi>固定字段</a></li>
                            <li class="tocline"><a class="tocxref" href="#examples"><bdi class="secno">4.20.2
                                    </bdi>示例</a>
                                <ol class="toc">
                                    <li class="tocline"><a class="tocxref" href="#operationref-examples"><bdi
                                                class="secno">4.20.2.1 </bdi><code>operationRef</code> 示例</a></li>
                                </ol>
                            </li>
                            <li class="tocline"><a class="tocxref" href="#runtime-expressions"><bdi class="secno">4.20.3
                                    </bdi>运行时表达式</a>
                                <ol class="toc">
                                    <li class="tocline"><a class="tocxref" href="#example-expressions"><bdi
                                                class="secno">4.20.3.1 </bdi>示例表达式</a></li>
                                </ol>
                            </li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#header-object"><bdi class="secno">4.21 </bdi>Header
                            对象</a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#fixed-fields-17"><bdi class="secno">4.21.1
                                    </bdi>固定字段</a>
                                <ol class="toc">
                                    <li class="tocline"><a class="tocxref" href="#common-fixed-fields-1"><bdi
                                                class="secno">4.21.1.1 </bdi>通用固定字段</a></li>
                                    <li class="tocline"><a class="tocxref"
                                            href="#fixed-fields-for-use-with-schema-0"><bdi class="secno">4.21.1.2
                                            </bdi>与<code>schema</code>配合使用的固定字段</a></li>
                                    <li class="tocline"><a class="tocxref"
                                            href="#fixed-fields-for-use-with-content-0"><bdi class="secno">4.21.1.3
                                            </bdi>与<code>content</code>配合使用的固定字段</a></li>
                                </ol>
                            </li>
                            <li class="tocline"><a class="tocxref" href="#modeling-link-headers"><bdi
                                        class="secno">4.21.2 </bdi>链接头的建模</a></li>
                            <li class="tocline"><a class="tocxref" href="#representing-the-set-cookie-header"><bdi
                                        class="secno">4.21.3 </bdi>Set-Cookie 头的表示</a>
                            </li>
                            <li class="tocline"><a class="tocxref" href="#header-object-example"><bdi
                                        class="secno">4.21.4 </bdi>Header 对象示例</a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#tag-object"><bdi class="secno">4.22 </bdi>标签对象</a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#fixed-fields-18"><bdi class="secno">4.22.1
                                    </bdi>固定字段</a></li>
                            <li class="tocline"><a class="tocxref" href="#tag-object-example"><bdi class="secno">4.22.2
                                    </bdi>标签对象示例</a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#reference-object"><bdi class="secno">4.23
                            </bdi>引用对象</a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#fixed-fields-19"><bdi class="secno">4.23.1
                                    </bdi>固定字段</a></li>
                            <li class="tocline"><a class="tocxref" href="#reference-object-example"><bdi
                                        class="secno">4.23.2 </bdi>引用对象示例</a></li>
                            <li class="tocline"><a class="tocxref" href="#relative-schema-document-example"><bdi
                                        class="secno">4.23.3 </bdi>相对模式文档示例</a></li>
                            <li class="tocline"><a class="tocxref"
                                    href="#relative-documents-with-embedded-schema-example"><bdi class="secno">4.23.4
                                    </bdi>包含嵌入模式的相对文档示例</a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#schema-object"><bdi class="secno">4.24 </bdi>Schema
                            对象</a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#json-schema-keywords"><bdi
                                        class="secno">4.24.1 </bdi>JSON Schema 关键字</a></li>
                            <li class="tocline"><a class="tocxref" href="#fixed-fields-20"><bdi class="secno">4.24.2
                                    </bdi>固定字段</a></li>
                            <li class="tocline"><a class="tocxref" href="#data-types"><bdi class="secno">4.24.3
                                    </bdi>数据类型</a>
                                <ol class="toc">
                                    <li class="tocline"><a class="tocxref" href="#data-type-format"><bdi
                                                class="secno">4.24.3.1 </bdi>数据类型格式</a></li>
                                </ol>
                            </li>
                            <li class="tocline"><a class="tocxref" href="#parsing-and-serializing"><bdi
                                        class="secno">4.24.4 </bdi>解析与序列化</a>
                                <ol class="toc">
                                    <li class="tocline"><a class="tocxref" href="#json-data"><bdi class="secno">4.24.4.1
                                            </bdi>JSON 数据</a></li>
                                    <li class="tocline"><a class="tocxref" href="#non-json-data"><bdi
                                                class="secno">4.24.4.2 </bdi>非 JSON 数据</a></li>
                                    <li class="tocline"><a class="tocxref" href="#working-with-binary-data"><bdi
                                                class="secno">4.24.4.3 </bdi>处理二进制数据</a>
                                        <ol class="toc">
                                            <li class="tocline"><a class="tocxref"
                                                    href="#schema-evaluation-and-binary-data"><bdi
                                                        class="secno">4.24.4.3.1 </bdi>模式评估与二进制数据</a></li>
                                            <li class="tocline"><a class="tocxref"
                                                    href="#migrating-binary-descriptions-from-oas-3-0"><bdi
                                                        class="secno">4.24.4.3.2 </bdi>从 OAS 3.0 迁移二进制描述</a></li>
                                        </ol>
                                    </li>
                                </ol>
                            </li>
                            <li class="tocline"><a class="tocxref" href="#extended-validation-with-annotations"><bdi
                                        class="secno">4.24.5 </bdi>使用注释的扩展验证</a>
                                <ol class="toc">
                                    <li class="tocline"><a class="tocxref"
                                            href="#non-validating-constraint-keywords"><bdi class="secno">4.24.5.1
                                            </bdi>非验证性约束关键字</a></li>
                                    <li class="tocline"><a class="tocxref"
                                            href="#validating-readonly-and-writeonly"><bdi class="secno">4.24.5.2
                                            </bdi>对 <code>readOnly</code> 和 <code>writeOnly</code> 的验证</a></li>
                                </ol>
                            </li>
                            <li class="tocline"><a class="tocxref" href="#data-modeling-techniques"><bdi
                                        class="secno">4.24.6 </bdi>数据建模技术</a>
                                <ol class="toc">
                                    <li class="tocline"><a class="tocxref"
                                            href="#composition-and-inheritance-polymorphism"><bdi class="secno">4.24.6.1
                                            </bdi>组合与继承（多态）</a></li>
                                    <li class="tocline"><a class="tocxref" href="#generic-template-data-structures"><bdi
                                                class="secno">4.24.6.2 </bdi>通用（模板）数据结构</a></li>
                                    <li class="tocline"><a class="tocxref" href="#annotated-enumerations"><bdi
                                                class="secno">4.24.6.3 </bdi>带注释的枚举</a></li>
                                    <li class="tocline"><a class="tocxref" href="#xml-modeling"><bdi
                                                class="secno">4.24.6.4 </bdi>XML 建模</a></li>
                                </ol>
                            </li>
                            <li class="tocline"><a class="tocxref" href="#specifying-schema-dialects"><bdi
                                        class="secno">4.24.7 </bdi>指定模式方言</a></li>
                            <li class="tocline"><a class="tocxref" href="#schema-object-examples"><bdi
                                        class="secno">4.24.8 </bdi>Schema 对象示例</a>
                                <ol class="toc">
                                    <li class="tocline"><a class="tocxref" href="#primitive-example"><bdi
                                                class="secno">4.24.8.1 </bdi>原始示例</a></li>
                                    <li class="tocline"><a class="tocxref" href="#simple-model"><bdi
                                                class="secno">4.24.8.2 </bdi>简单模型</a></li>
                                    <li class="tocline"><a class="tocxref"
                                            href="#model-with-map-dictionary-properties"><bdi class="secno">4.24.8.3
                                            </bdi>带映射/字典属性的模型</a></li>
                                    <li class="tocline"><a class="tocxref" href="#model-with-annotated-enumeration"><bdi
                                                class="secno">4.24.8.4 </bdi>带注释枚举的模型</a></li>
                                    <li class="tocline"><a class="tocxref" href="#model-with-example"><bdi
                                                class="secno">4.24.8.5 </bdi>带示例的模型</a></li>
                                    <li class="tocline"><a class="tocxref" href="#models-with-composition"><bdi
                                                class="secno">4.24.8.6 </bdi>具有组合的模型</a></li>
                                    <li class="tocline"><a class="tocxref" href="#models-with-polymorphism-support"><bdi
                                                class="secno">4.24.8.7 </bdi>支持多态的模型</a></li>
                                    <li class="tocline"><a class="tocxref"
                                            href="#models-with-polymorphism-support-and-a-discriminator-object"><bdi
                                                class="secno">4.24.8.8 </bdi>带 Discriminator Object 的多态模型示例</a></li>
                                    <li class="tocline"><a class="tocxref"
                                            href="#models-with-polymorphism-support-using-allof-and-a-discriminator-object"><bdi
                                                class="secno">4.24.8.9 </bdi>使用 <code>allOf</code> 与 Discriminator
                                            Object 的多态模型示例</a></li>
                                    <li class="tocline"><a class="tocxref" href="#generic-data-structure-model"><bdi
                                                class="secno">4.24.8.10 </bdi>通用数据结构模型</a></li>
                                </ol>
                            </li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#discriminator-object"><bdi class="secno">4.25
                            </bdi>判别器对象</a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#fixed-fields-21"><bdi class="secno">4.25.1
                                    </bdi>固定字段</a></li>
                            <li class="tocline"><a class="tocxref"
                                    href="#conditions-for-using-the-discriminator-object"><bdi class="secno">4.25.2
                                    </bdi>使用判别器对象的条件</a></li>
                            <li class="tocline"><a class="tocxref" href="#options-for-mapping-values-to-schemas"><bdi
                                        class="secno">4.25.3 </bdi>将值映射到模式的选项</a></li>
                            <li class="tocline"><a class="tocxref" href="#optional-discriminating-property"><bdi
                                        class="secno">4.25.4 </bdi>可选的判定属性</a></li>
                            <li class="tocline"><a class="tocxref" href="#examples-0"><bdi class="secno">4.25.5
                                    </bdi>示例</a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#xml-object"><bdi class="secno">4.26 </bdi>XML 对象</a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#fixed-fields-22"><bdi class="secno">4.26.1
                                    </bdi>固定字段</a></li>
                            <li class="tocline"><a class="tocxref" href="#xml-node-types"><bdi class="secno">4.26.2
                                    </bdi>XML 节点类型</a>
                                <ol class="toc">
                                    <li class="tocline"><a class="tocxref" href="#modeling-element-lists"><bdi
                                                class="secno">4.26.2.1 </bdi>建模元素列表</a></li>
                                    <li class="tocline"><a class="tocxref" href="#implicit-and-explicit-text-nodes"><bdi
                                                class="secno">4.26.2.2 </bdi>隐式与显式<code>text</code>节点</a></li>
                                </ol>
                            </li>
                            <li class="tocline"><a class="tocxref" href="#xml-node-names"><bdi class="secno">4.26.3
                                    </bdi>XML 节点名称</a></li>
                            <li class="tocline"><a class="tocxref" href="#namespace-limitations"><bdi
                                        class="secno">4.26.4 </bdi>命名空间限制</a></li>
                            <li class="tocline"><a class="tocxref" href="#handling-null-values"><bdi
                                        class="secno">4.26.5 </bdi>处理<code>null</code>值</a></li>
                            <li class="tocline"><a class="tocxref" href="#xml-object-examples"><bdi class="secno">4.26.6
                                    </bdi>XML 对象示例</a>
                                <ol class="toc">
                                    <li class="tocline"><a class="tocxref" href="#no-xml-object"><bdi
                                                class="secno">4.26.6.1 </bdi>无 XML Object</a></li>
                                    <li class="tocline"><a class="tocxref" href="#xml-name-replacement"><bdi
                                                class="secno">4.26.6.2 </bdi>XML 名称替换</a></li>
                                    <li class="tocline"><a class="tocxref"
                                            href="#xml-attribute-prefix-and-namespace"><bdi class="secno">4.26.6.3
                                            </bdi>XML 属性、前缀与命名空间</a></li>
                                    <li class="tocline"><a class="tocxref" href="#xml-arrays"><bdi
                                                class="secno">4.26.6.4 </bdi>XML 数组</a></li>
                                    <li class="tocline"><a class="tocxref"
                                            href="#elements-with-attributes-and-text"><bdi class="secno">4.26.6.5
                                            </bdi>带属性与文本的元素</a></li>
                                    <li class="tocline"><a class="tocxref" href="#referenced-element-with-cdata"><bdi
                                                class="secno">4.26.6.6 </bdi>引用的带 CDATA 的元素</a></li>
                                    <li class="tocline"><a class="tocxref" href="#ordered-elements-and-text"><bdi
                                                class="secno">4.26.6.7 </bdi>有序元素与文本</a></li>
                                    <li class="tocline"><a class="tocxref" href="#xml-with-null-values"><bdi
                                                class="secno">4.26.6.8 </bdi>带 <code>null</code> 值的 XML</a></li>
                                </ol>
                            </li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#security-scheme-object"><bdi class="secno">4.27
                            </bdi>安全方案对象</a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#fixed-fields-23"><bdi class="secno">4.27.1
                                    </bdi>固定字段</a></li>
                            <li class="tocline"><a class="tocxref" href="#security-scheme-object-examples"><bdi
                                        class="secno">4.27.2 </bdi>安全方案对象示例</a>
                                <ol class="toc">
                                    <li class="tocline"><a class="tocxref" href="#basic-authentication-example"><bdi
                                                class="secno">4.27.2.1 </bdi>基础认证示例</a></li>
                                    <li class="tocline"><a class="tocxref" href="#api-key-example"><bdi
                                                class="secno">4.27.2.2 </bdi>API 密钥示例</a></li>
                                    <li class="tocline"><a class="tocxref" href="#jwt-bearer-example"><bdi
                                                class="secno">4.27.2.3 </bdi>JWT 承载示例</a></li>
                                    <li class="tocline"><a class="tocxref" href="#mutualtls-example"><bdi
                                                class="secno">4.27.2.4 </bdi>双向 TLS 示例</a></li>
                                    <li class="tocline"><a class="tocxref" href="#implicit-oauth2-example"><bdi
                                                class="secno">4.27.2.5 </bdi>隐式 OAuth2 示例</a></li>
                                </ol>
                            </li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#oauth-flows-object"><bdi class="secno">4.28
                            </bdi>OAuth 流程对象</a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#fixed-fields-24"><bdi class="secno">4.28.1
                                    </bdi>固定字段</a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#oauth-flow-object"><bdi class="secno">4.29 </bdi>OAuth
                            流对象</a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#fixed-fields-25"><bdi class="secno">4.29.1
                                    </bdi>固定字段</a></li>
                            <li class="tocline"><a class="tocxref" href="#oauth-flow-object-example"><bdi
                                        class="secno">4.29.2 </bdi>OAuth 流对象示例</a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#security-requirement-object"><bdi class="secno">4.30
                            </bdi>安全需求对象</a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#patterned-fields-2"><bdi class="secno">4.30.1
                                    </bdi>模式字段</a></li>
                            <li class="tocline"><a class="tocxref" href="#security-requirement-object-examples"><bdi
                                        class="secno">4.30.2 </bdi>安全需求对象示例</a>
                                <ol class="toc">
                                    <li class="tocline"><a class="tocxref" href="#non-oauth2-security-requirement"><bdi
                                                class="secno">4.30.2.1 </bdi>非 OAuth2 的安全需求</a></li>
                                    <li class="tocline"><a class="tocxref" href="#oauth2-security-requirement"><bdi
                                                class="secno">4.30.2.2 </bdi>OAuth2 安全需求</a></li>
                                    <li class="tocline"><a class="tocxref" href="#optional-oauth2-security"><bdi
                                                class="secno">4.30.2.3 </bdi>可选的 OAuth2 安全</a></li>
                                </ol>
                            </li>
                        </ol>
                    </li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#specification-extensions"><bdi class="secno">5.
                    </bdi>规范扩展</a></li>
            <li class="tocline"><a class="tocxref" href="#security-considerations"><bdi class="secno">6.
                    </bdi>安全注意事项</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#openapi-description-formats"><bdi class="secno">6.1
                            </bdi>OpenAPI 描述格式</a></li>
                    <li class="tocline"><a class="tocxref" href="#tooling-and-usage-scenarios"><bdi class="secno">6.2
                            </bdi>工具与使用场景</a></li>
                    <li class="tocline"><a class="tocxref" href="#security-schemes"><bdi class="secno">6.3
                            </bdi>安全方案</a></li>
                    <li class="tocline"><a class="tocxref" href="#security-filtering"><bdi class="secno">6.4
                            </bdi>安全过滤</a></li>
                    <li class="tocline"><a class="tocxref" href="#handling-external-resources"><bdi class="secno">6.5
                            </bdi>外部资源处理</a></li>
                    <li class="tocline"><a class="tocxref" href="#handling-reference-cycles"><bdi class="secno">6.6
                            </bdi>处理引用循环</a></li>
                    <li class="tocline"><a class="tocxref" href="#markdown-and-html-sanitization"><bdi class="secno">6.7
                            </bdi>Markdown 与 HTML 清理</a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#appendix-a-revision-history"><bdi class="secno">A.
                    </bdi>附录 A：修订历史</a></li>
            <li class="tocline"><a class="tocxref" href="#appendix-b-data-type-conversion"><bdi class="secno">B.
                    </bdi>附录 B：数据类型转换</a></li>
            <li class="tocline"><a class="tocxref" href="#appendix-c-using-rfc6570-based-serialization"><bdi
                        class="secno">C. </bdi>附录 C：使用基于 RFC6570 的序列化</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref"
                            href="#equivalences-between-fields-and-rfc6570-operators"><bdi class="secno">C.1
                            </bdi>字段与 RFC6570 操作符的等价关系</a></li>
                    <li class="tocline"><a class="tocxref" href="#delimiters-in-parameter-values"><bdi class="secno">C.2
                            </bdi>参数值中的分隔符</a></li>
                    <li class="tocline"><a class="tocxref" href="#non-rfc6570-field-values-and-combinations"><bdi
                                class="secno">C.3 </bdi>非 RFC6570 字段值与组合</a></li>
                    <li class="tocline"><a class="tocxref" href="#examples-1"><bdi class="secno">C.4 </bdi>示例</a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#rfc6570-equivalent-expansion"><bdi
                                        class="secno">C.4.1 </bdi>RFC6570 等价展开</a></li>
                            <li class="tocline"><a class="tocxref"
                                    href="#expansion-with-non-rfc6570-supported-options"><bdi class="secno">C.4.2
                                    </bdi>使用非 RFC6570 支持选项的展开</a></li>
                            <li class="tocline"><a class="tocxref"
                                    href="#undefined-values-and-manual-uri-template-construction"><bdi
                                        class="secno">C.4.3 </bdi>未定义值与手动构造 URI 模板</a></li>
                            <li class="tocline"><a class="tocxref"
                                    href="#illegal-variable-names-as-parameter-names"><bdi class="secno">C.4.4
                                    </bdi>非法变量名作为参数名</a></li>
                        </ol>
                    </li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#appendix-d-serializing-headers-and-cookies"><bdi
                        class="secno">D. </bdi>附录 D：序列化头与 Cookie</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#percent-encoding-and-cookies"><bdi class="secno">D.1
                            </bdi>百分号编码与 Cookie</a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#appendix-e-percent-encoding-and-form-media-types"><bdi
                        class="secno">E. </bdi>附录 E：百分号编码与表单媒体类型</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#percent-encoding-character-classes"><bdi
                                class="secno">E.1 </bdi>百分号编码的字符类</a></li>
                    <li class="tocline"><a class="tocxref" href="#percent-encoding-and-form-urlencoded"><bdi
                                class="secno">E.2 </bdi>百分号编码与<code>form-urlencoded</code></a></li>
                    <li class="tocline"><a class="tocxref" href="#percent-encoding-and-form-data"><bdi class="secno">E.3
                            </bdi>百分号编码与<code>form-data</code></a></li>
                    <li class="tocline"><a class="tocxref"
                            href="#generating-and-validating-uris-and-form-urlencoded-strings"><bdi class="secno">E.4
                            </bdi>生成与验证 URI 及 <code>form-urlencoded</code> 字符串</a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref"
                                    href="#interoperability-with-historical-specifications"><bdi class="secno">E.4.1
                                    </bdi>与历史规范的互操作性</a></li>
                            <li class="tocline"><a class="tocxref"
                                    href="#interoperability-with-web-browser-environments"><bdi class="secno">E.4.2
                                    </bdi>与 Web 浏览器环境的互操作性</a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#decoding-uris-and-form-urlencoded-strings"><bdi
                                class="secno">E.5 </bdi>URI 与<code>form-urlencoded</code>字符串解码</a></li>
                    <li class="tocline"><a class="tocxref"
                            href="#percent-encoding-and-illegal-or-reserved-delimiters"><bdi class="secno">E.6
                            </bdi>百分号编码与非法或保留分隔符</a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref"
                    href="#appendix-f-examples-of-base-uri-determination-and-reference-resolution"><bdi class="secno">F.
                    </bdi>附录 F：基本 URI 确定与引用解析示例</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#base-uri-within-content"><bdi class="secno">F.1
                            </bdi>内容内的基本 URI</a></li>
                    <li class="tocline"><a class="tocxref" href="#base-uri-from-encapsulating-entity"><bdi
                                class="secno">F.2 </bdi>来自封装实体的基本 URI</a></li>
                    <li class="tocline"><a class="tocxref" href="#base-uri-from-the-retrieval-uri"><bdi
                                class="secno">F.3 </bdi>来自检索 URI 的基本 URI</a></li>
                    <li class="tocline"><a class="tocxref" href="#application-specific-default-base-uri"><bdi
                                class="secno">F.4 </bdi>应用特定的默认基本 URI</a></li>
                    <li class="tocline"><a class="tocxref" href="#resolving-relative-self-and-id"><bdi class="secno">F.5
                            </bdi>解析相对的 <code>$self</code> 与 <code>$id</code></a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#appendix-g-parsing-and-resolution-guidance"><bdi
                        class="secno">G. </bdi>附录 G：解析与解析指导</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#warnings-regarding-fragmentary-parsing"><bdi
                                class="secno">G.1 </bdi>关于片段解析的警告</a></li>
                    <li class="tocline"><a class="tocxref"
                            href="#conflicts-between-field-types-and-reference-contexts"><bdi class="secno">G.2
                            </bdi>字段类型与引用上下文之间的冲突</a></li>
                    <li class="tocline"><a class="tocxref" href="#guidance-regarding-implicit-connections"><bdi
                                class="secno">G.3 </bdi>关于隐式连接的指导</a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#implicit-connection-resolution-examples"><bdi
                                        class="secno">G.3.1 </bdi>隐式连接解析示例</a></li>
                        </ol>
                    </li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#references"><bdi class="secno">H. </bdi>参考文献</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#normative-references"><bdi class="secno">H.1
                            </bdi>规范性参考文献</a></li>
                    <li class="tocline"><a class="tocxref" href="#informative-references"><bdi class="secno">H.2
                            </bdi>说明性参考文献</a></li>
                </ol>
            </li>
        </ol>
    </nav>
    <section id="openapi-specification">
        <div class="header-wrapper">
            <h2 id="x1-openapi-specification"><bdi class="secno">1. </bdi>OpenAPI 规范</h2><a class="self-link"
                href="#openapi-specification" aria-label="Permalink for Section 1."></a>
        </div>
        <section class="override" id="conformance">
            <div class="header-wrapper">
                <h3 id="x1-1-version-3-2-0"><bdi class="secno">1.1 </bdi>版本 3.2.0</h3><a class="self-link"
                    href="#conformance" aria-label="Permalink for Section 1.1"></a>
            </div>
            <p>本文件中的 “<em class="rfc2119">MUST</em>”（必须）、 “<em class="rfc2119">MUST NOT</em>”（不能）、 “<em
                    class="rfc2119">REQUIRED</em>”（要求）、 “<em class="rfc2119">SHALL</em>”（应）、 “<em class="rfc2119">SHALL
                    NOT</em>”（不应）、 “<em class="rfc2119">SHOULD</em>”（推荐）、 “<em class="rfc2119">SHOULD NOT</em>”（不推荐）、
                “<em class="rfc2119">RECOMMENDED</em>”（建议）、 “<em class="rfc2119">NOT RECOMMENDED</em>”（不建议）、 “<em
                    class="rfc2119">MAY</em>”（可以）和 “<em class="rfc2119">OPTIONAL</em>”（可选）等关键词的解释，如 <a
                    href="https://tools.ietf.org/html/bcp14">BCP 14</a> [<cite><a class="bibref" data-link-type="biblio"
                        href="#bib-rfc2119"
                        title="Key words for use in RFCs to Indicate Requirement Levels">RFC2119</a></cite>] [<cite><a
                        class="bibref" data-link-type="biblio" href="#bib-rfc8174"
                        title="Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words">RFC8174</a></cite>]
                所述，仅在这些词全部大写时适用。</p>
            <p>本文件采用 <a href="https://www.apache.org/licenses/LICENSE-2.0.html">Apache License, Version 2.0</a> 许可协议。
            </p>
        </section>
    </section>
    <section id="introduction">
        <div class="header-wrapper">
            <h2 id="x2-introduction"><bdi class="secno">2. </bdi>简介</h2><a class="self-link" href="#introduction"
                aria-label="Permalink for Section 2."></a>
        </div>
        <p>OpenAPI 规范（OAS）定义了一个语言无关的标准 HTTP API 接口，允许人类和计算机无需访问源代码、文档或通过网络流量检查，就能发现并理解服务的能力。经过规范定义后，使用者可通过<a
                href="#parsing-and-serializing">解析与序列化</a> HTTP 消息到 <a href="#data-types">数据模型</a>，以最少的实现逻辑与远程服务交互。</p>
        <p>一个 <a href="#openapi-description-structure">OpenAPI 描述</a> (OAD) 可以被文档生成工具用于展示
            API，代码生成工具用于各类编程语言的服务端和客户端生成，以及测试工具和众多其他场景。</p>
        <p>有关 OpenAPI 的使用示例和更多文档，请访问 [<cite><a class="bibref" data-link-type="biblio" href="#bib-openapi-learn"
                    title="OpenAPI - Getting started, and the specification explained">OpenAPI-Learn</a></cite>]。</p>
        <p>关于扩展注册表和 OpenAPI Initiative 发布的其他规范，以及本规范的权威渲染，请访问 <a
                href="https://spec.openapis.org/">spec.openapis.org</a>。</p>
        <section id="versions-and-deprecation">
            <div class="header-wrapper">
                <h3 id="x2-1-versions-and-deprecation"><bdi class="secno">2.1 </bdi>版本与弃用</h3><a class="self-link"
                    href="#versions-and-deprecation" aria-label="Permalink for Section 2.1"></a>
            </div>
            <p>OpenAPI 规范采用 <code>major</code>.<code>minor</code>.<code>patch</code>
                的版本管理方式。<code>major</code>.<code>minor</code> 部分（如 <code>3.1</code>）<em class="rfc2119">SHALL</em> 指定
                OAS 功能集；<em><code>.patch</code></em> 版本则是修正文档或提供说明，不增加功能集。支持 OAS 3.1 的工具 <em class="rfc2119">SHOULD</em>
                兼容所有 OAS 3.1.* 版本。工具 <em class="rfc2119">SHOULD NOT</em> 区分 patch 版本，例如不区分 <code>3.1.0</code> 和
                <code>3.1.1</code>。
            </p>
            <p>部分字段或功能可能被标记为 <strong>弃用</strong>（Deprecated）。
                这些字段和功能仍属于规范，可以正常使用。
                但 OpenAPI 描述作者建议尽量用新字段或新功能替换弃用项。
            </p>
            <p>目前，弃用元素预计会保留到 OAS 下一个主版本。但未来的小版本可能会规定弃用元素后续移除的策略。</p>
            <p>偶尔，OAS 的 <code>minor</code> 版本会因带来显著好处而做出部分非兼容性变更，前提是影响较小。</p>
        </section>
        <section id="undefined-and-implementation-defined-behavior">
            <div class="header-wrapper">
                <h3 id="x2-2-undefined-and-implementation-defined-behavior"><bdi class="secno">2.2 </bdi>未定义与实现自定义行为
                </h3><a class="self-link" href="#undefined-and-implementation-defined-behavior"
                    aria-label="Permalink for Section 2.2"></a>
            </div>
            <p>本规范认为某些情景属于<em>未定义</em>或<em>实现自定义</em>行为。
            </p>
            <p>所谓<em>未定义</em>行为，至少部分情况下可能导致与规范相悖的结果。这种定义多用于无法或不便检测矛盾的场景。各实现 <em class="rfc2119">MAY</em>
                为兼容历史或规范旧版本的模糊文本而支持未定义场景。这在不少情况下能产生正确结果，但 <em class="rfc2119">NOT RECOMMENDED</em>
                依赖于此，因为无法保证对所有工具乃至未来规范版本都有效，哪怕这些版本在其它方面与当前版本严格兼容。</p>
            <p>而<em>实现自定义</em>行为，是指规范对某要求允许多种符合规范但实现方式不同的策略。这样描述用于指代模糊要求，API 描述作者<em class="rfc2119">RECOMMENDED</em>
                应避免，以提升工具兼容性。与未定义行为不同，若能确保所有相关工具实现一致，则依赖实现自定义行为是安全的。</p>
        </section>
    </section>
    <section id="format">
        <div class="header-wrapper">
            <h2 id="x3-format"><bdi class="secno">3. </bdi>格式</h2><a class="self-link" href="#format"
                aria-label="Permalink for Section 3."></a>
        </div>
        <p>符合 OpenAPI 规范的 OpenAPI 文档本身是一个 JSON 对象，可用 <cite><a class="bibref" data-link-type="biblio" href="#bib-rfc8259"
                    title="The JavaScript Object Notation (JSON) Data Interchange Format">JSON</a></cite> 或 <cite><a
                    class="bibref" data-link-type="biblio" href="#bib-yaml"
                    title="YAML Ain’t Markup Language (YAML™) Version 1.2">YAML</a></cite> 格式表示。本规范中的示例为简洁起见采用 YAML 展示。
        </p>
        <p>规范中的所有字段名称均为<strong>区分大小写</strong>。作为 map 键使用的字段也包括在内，除非明确说明为<strong>不区分大小写</strong>。</p>
        <p>OAS <a href="#objects-and-fields">对象</a>包含两类字段：声明名称的<em>固定字段</em>，以及声明名称模式的<em>模式字段</em>。</p>
        <p>模式字段在其所处对象中 <em class="rfc2119">MUST</em> 唯一。</p>
        <p><strong>注意：</strong>虽然 API 可用 YAML 或 JSON 格式描述，但 API 请求和响应体以及其它内容没有强制为 JSON 或 YAML。</p>
        <section id="json-and-yaml-compatibility">
            <div class="header-wrapper">
                <h3 id="x3-1-json-and-yaml-compatibility"><bdi class="secno">3.1 </bdi>JSON 与 YAML 兼容性</h3>
                <a class="self-link" href="#json-and-yaml-compatibility" aria-label="Permalink for Section 3.1"></a>
            </div>
            <p>为保持 YAML 与 JSON 的格式互转能力，<cite><a class="bibref" data-link-type="biblio" href="#bib-yaml"
                        title="YAML Ain’t Markup Language (YAML™) Version 1.2">YAML 1.2 版</a></cite> <em
                    class="rfc2119">RECOMMENDED</em> 使用，同时遵循 [<cite><a class="bibref" data-link-type="biblio"
                        href="#bib-rfc9512" title="YAML Media Type">RFC9512</a></cite>] <a
                    href="https://tools.ietf.org/html/rfc9512#name-yaml-and-json">第 3.4 节</a>的补充约束。</p>
            <p>规范旧版本建议将 YAML 限制为其“JSON”<a href="https://yaml.org/spec/1.2/spec.html#id2803231">schema 规则集</a>，但不少这种（名字虽是
                JSON，但实际上不能被 JSON 表示的）值。OAD 作者 <em class="rfc2119">SHOULD NOT</em> 依赖这类不兼容 JSON 的 YAML 值。</p>
        </section>
        <section id="case-sensitivity">
            <div class="header-wrapper">
                <h3 id="x3-2-case-sensitivity"><bdi class="secno">3.2 </bdi>大小写敏感性</h3><a class="self-link"
                    href="#case-sensitivity" aria-label="Permalink for Section 3.2"></a>
            </div>
            <p>因 OpenAPI 规范中的大多数字段名和字段值都区分大小写，本文档会特别标注不敏感场景。但只要字段名或字段值与 HTTP 概念直接对应，其大小写敏感规则即遵循 HTTP，无论本文档是否特别说明。</p>
        </section>
        <section id="rich-text-formatting">
            <div class="header-wrapper">
                <h3 id="x3-3-rich-text-formatting"><bdi class="secno">3.3 </bdi>富文本格式化</h3><a class="self-link"
                    href="#rich-text-formatting" aria-label="Permalink for Section 3.3"></a>
            </div>
            <p>规范各处的 <code>description</code> 字段均支持 [<cite><a class="bibref" data-link-type="biblio"
                        href="#bib-commonmark" title="CommonMark Spec">CommonMark</a></cite>] markdown 格式。OpenAPI
                工具渲染富文本时 <em class="rfc2119">MUST</em> 至少支持 [<cite><a class="bibref" data-link-type="biblio"
                        href="#bib-commonmark-0.27" title="CommonMark Spec, Version 0.27">CommonMark-0.27</a></cite>]
                所述的 markdown 语法。工具 <em class="rfc2119">MAY</em> 可忽略部分 CommonMark 或扩展特性以确保安全。</p>
            <p>CommonMark 0.27 仅作为最低要求，允许工具在此基础上实现扩展，但这些扩展均属于实现自定义行为，无法保证互操作。OpenAPI 描述作者 <em
                    class="rfc2119">SHOULD</em> 考虑使用这些扩展时，在只支持最低要求的工具下的展示效果。</p>
        </section>
    </section>
    <section id="objects-and-fields">
        <div class="header-wrapper">
            <h2 id="x4-objects-and-fields"><bdi class="secno">4. </bdi>对象与字段</h2><a class="self-link"
                href="#objects-and-fields" aria-label="Permalink for Section 4."></a>
        </div>
        <p>本节描述了 OpenAPI 描述格式的结构。
            此处内容是格式的唯一规范性描述。
            <a href="https://spec.openapis.org">spec.openapis.org</a> 提供了 JSON Schema，仅供参考。
            如果 JSON Schema 与本节内容有不同，则本节 <em class="rfc2119">MUST</em> 被视为权威。
        </p>
        <p>在以下描述中，如果某字段未被明确声明为 <strong><em class="rfc2119">REQUIRED</em></strong> 或未使用 <em class="rfc2119">MUST</em> 或
            <em class="rfc2119">SHALL</em> 描述，则可视为 <em class="rfc2119">OPTIONAL</em> 可选项。
        </p>
        <section id="openapi-object">
            <div class="header-wrapper">
                <h3 id="x4-1-openapi-object"><bdi class="secno">4.1 </bdi>OpenAPI 对象</h3><a class="self-link"
                    href="#openapi-object" aria-label="Permalink for Section 4.1"></a>
            </div>
            <p>这是<a href="#openapi-description-structure">OpenAPI 描述</a>的根对象。</p>
            <section id="fixed-fields">
                <div class="header-wrapper">
                    <h4 id="x4-1-1-fixed-fields"><bdi class="secno">4.1.1 </bdi>固定字段</h4><a class="self-link"
                        href="#fixed-fields" aria-label="Permalink for Section 4.1.1"></a>
                </div>
                <p>除了必需字段外，<code>components</code>、<code>paths</code> 或 <code>webhooks</code> 字段至少有一个 <em
                        class="rfc2119">MUST</em> 存在。</p>
                <table>
                    <thead>
                        <tr>
                            <th>字段名</th>
                            <th style="text-align:center">类型</th>
                            <th>说明</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><span id="oas-version"></span>openapi</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td><strong><em class="rfc2119">REQUIRED</em></strong>. 字符串 <em class="rfc2119">MUST</em> 是
                                OpenAPI 规范的<a href="#versions-and-deprecation">版本号</a>。工具 <em
                                    class="rfc2119">SHOULD</em> 通过 <code>openapi</code> 字段解释 OpenAPI 文档。此字段与 <a
                                    href="#info-version"><code>info.version</code></a>（描述文档版本）无关。</td>
                        </tr>
                        <tr>
                            <td><span id="oas-self"></span>$self</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td>该字符串 <em class="rfc2119">MUST</em> 符合 [<cite><a class="bibref" data-link-type="biblio"
                                        href="#bib-rfc3986"
                                        title="Uniform Resource Identifier (URI): Generic Syntax">RFC3986</a></cite>] <a
                                    href="https://tools.ietf.org/html/rfc3986#section-4.1">第 4.1 节</a> 的 URI 引用格式。
                                <code>$self</code> 字段为本文件的自我指定 URI，也作为其基础 URI，参见 [<cite><a class="bibref"
                                        data-link-type="biblio" href="#bib-rfc3986"
                                        title="Uniform Resource Identifier (URI): Generic Syntax">RFC3986</a></cite>] <a
                                    href="https://tools.ietf.org/html/rfc3986#section-5.1.1">第 5.1.1 节</a>。工具 <em
                                    class="rfc2119">MUST</em> 在此字段存在时，用其定义的 URI 标识<a
                                    href="#relative-references-in-api-description-uris">API 描述 URI 的目标</a>。可参考 <a
                                    href="#establishing-the-base-uri">基础 URI 建立</a> 了解缺失或相对情况下的行为，参考 <a
                                    href="#appendix-f-examples-of-base-uri-determination-and-reference-resolution">附录
                                    F</a> 了解使用 <code>$self</code> 进行引用解析的示例。
                            </td>
                        </tr>
                        <tr>
                            <td><span id="oas-info"></span>info</td>
                            <td style="text-align:center"><a href="#info-object">Info 对象</a></td>
                            <td><strong><em class="rfc2119">REQUIRED</em></strong>。提供关于 API 的元数据。元数据 <em
                                    class="rfc2119">MAY</em> 可被工具使用。</td>
                        </tr>
                        <tr>
                            <td><span id="oas-json-schema-dialect"></span> jsonSchemaDialect</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td>作为本 OAS 文档中 <a href="#schema-object">Schema 对象</a> 内 <code>$schema</code> 关键字的默认值。<em
                                    class="rfc2119">MUST</em> 是 URI 格式。</td>
                        </tr>
                        <tr>
                            <td><span id="oas-servers"></span>servers</td>
                            <td style="text-align:center">[<a href="#server-object">Server 对象</a>]</td>
                            <td>Server 对象数组，提供目标服务器的连接信息。如果未提供 <code>servers</code> 字段或为空数组，则默认值为包含一个 <a
                                    href="#server-object">Server 对象</a> 且其 <a href="#server-url">url</a> 为
                                <code>/</code> 的数组。
                            </td>
                        </tr>
                        <tr>
                            <td><span id="oas-paths"></span>paths</td>
                            <td style="text-align:center"><a href="#paths-object">Paths 对象</a></td>
                            <td>API 的可用路径和操作。</td>
                        </tr>
                        <tr>
                            <td><span id="oas-webhooks"></span>webhooks</td>
                            <td style="text-align:center">Map[<code>string</code>, <a href="#path-item-object">Path Item
                                    对象</a>]</td>
                            <td>可被接收为此 API 的部分的入站 webhook，API 使用者 <em class="rfc2119">MAY</em> 可选择实现。与
                                <code>callbacks</code> 功能密切相关，本节描述 API 调用之外的请求，如带外注册。键为唯一字符串，引用每个 webhook，可选引用 Path Item
                                对象，其描述 API 提供者可发起的请求及期望响应。可参考 <a
                                    href="https://learn.openapis.org/examples/v3.1/webhook-example.html">示例</a>。
                            </td>
                        </tr>
                        <tr>
                            <td><span id="oas-components"></span>components</td>
                            <td style="text-align:center"><a href="#components-object">Components 对象</a></td>
                            <td>用于存放 OpenAPI 描述中的各种对象的元素。</td>
                        </tr>
                        <tr>
                            <td><span id="oas-security"></span>security</td>
                            <td style="text-align:center">[<a href="#security-requirement-object">Security Requirement
                                    对象</a>]</td>
                            <td>声明 API 可用的安全机制。值列表包含可选用的不同 Security Requirement
                                对象，只需满足其中一个即可授权请求。单独操作可覆盖该定义。列表可不完整，甚至可为空或缺失。若需显式可选安全，可在数组中添加空安全需求 <code>{}</code>。</td>
                        </tr>
                        <tr>
                            <td><span id="oas-tags"></span>tags</td>
                            <td style="text-align:center">[<a href="#tag-object">Tag 对象</a>]</td>
                            <td>OpenAPI 描述中用到的标签列表含附加元数据。标签顺序可用于反映解析工具中的顺序。并非 <a href="#operation-object">Operation
                                    对象</a> 用到的所有标签都需声明。未声明的标签 <em class="rfc2119">MAY</em> 可随机或按工具逻辑组织。列表中的每个标签名称 <em
                                    class="rfc2119">MUST</em> 唯一。</td>
                        </tr>
                        <tr>
                            <td><span id="oas-external-docs"></span>externalDocs</td>
                            <td style="text-align:center"><a href="#external-documentation-object">External
                                    Documentation 对象</a></td>
                            <td>附加的外部文档。</td>
                        </tr>
                    </tbody>
                </table>
                <p>该对象 <em class="rfc2119">MAY</em> 可通过 <a href="#specification-extensions">规范扩展</a> 扩展。</p>
                <p>为确保互操作性，如有 <code>$self</code> 字段，引用 <em class="rfc2119">MUST</em> 使用目标文档的 <code>$self</code> URI。
                    工具实现 <em class="rfc2119">MAY</em> 支持用其他 URI（如获取 URI）作为引用目标，即使 <code>$self</code> 已存在，但该行为不具备互操作性，不推荐
                    <em class="rfc2119">NOT RECOMMENDED</em> 依赖此服务。
                </p>
            </section>
            <section id="openapi-description-structure">
                <div class="header-wrapper">
                    <h4 id="x4-1-2-openapi-description-structure"><bdi class="secno">4.1.2 </bdi>OpenAPI 描述结构</h4><a
                        class="self-link" href="#openapi-description-structure"
                        aria-label="Permalink for Section 4.1.2"></a>
                </div>
                <p><strong>OpenAPI 描述</strong>（<strong>OAD</strong>）正式描述了 API 的表层及语义。
                    一个 OAD <em class="rfc2119">MAY</em> 可以由单一文档组成，也可以分散至多个文档，各文档可通过<a
                        href="#relative-references-in-api-description-uris">URI 引用</a>和<a
                        href="#resolving-implicit-connections">隐式连接</a>字段关联。
                </p>
                <p>为保证解析行为明确，OAD 所有文档 <em class="rfc2119">MUST</em> 以 OpenAPI 对象或 Schema 对象为根，并 <em
                        class="rfc2119">MUST</em> 当作完整文档解析，具体见下一节。</p>
                <p>根为其他对象或混杂其他内容的文档 <em class="rfc2119">MAY</em> 可被支持，但会有实现自定义行为或潜在未定义行为，详见 <a
                        href="#appendix-g-parsing-and-resolution-guidance">附录 G：解析与解析指导</a>。
                    除非另行说明，本规范假定文档根为 OpenAPI 或 Schema 对象。</p>
                <p>对于多文档 OAD，包含 OpenAPI 对象且开始解析的文档称为 OAD 的<strong>入口文档</strong>。
                    强烈建议 <em class="rfc2119">RECOMMENDED</em> OAD 入口文档命名为 <code>openapi.json</code> 或
                    <code>openapi.yaml</code>。
                </p>
                <p>OpenAPI 对象 <em class="rfc2119">MAY</em> 可嵌入其他格式中，被称为<strong>嵌入格式</strong>，如 JSON Schema 是以 Schema
                    对象形式嵌入 OAS。
                    嵌入格式需定义如何解析嵌入内容，OAS 实现未声明嵌入格式支持时，不应期望能正确解析嵌入式 OAS 内容。
                </p>
                <section id="parsing-documents">
                    <div class="header-wrapper">
                        <h5 id="x4-1-2-1-parsing-documents"><bdi class="secno">4.1.2.1 </bdi>文档解析</h5><a
                            class="self-link" href="#parsing-documents" aria-label="Permalink for Section 4.1.2.1"></a>
                    </div>
                    <p>OAD 中每个文档 <em class="rfc2119">MUST</em> 完全解析，以定位可能的引用目标。
                        包括对 <a href="https://www.ietf.org/archive/id/draft-bhutton-json-schema-01.html#section-9">JSON
                            Schema 规范（2020-12草案）</a>的解析要求，并根据<a href="#relative-references-in-api-description-uris">URI
                            相对引用</a>对基础 URI 做修改。
                        引用目标由字段如 OpenAPI 对象的 <a href="#oas-self"><code>$self</code></a>、<a href="#schema-object">Schema
                            对象</a>的 <code>$id</code>、<code>$anchor</code> 和 <code>$dynamicAnchor</code> 关键字定义。
                    </p>
                    <p>工具 <em class="rfc2119">MUST NOT</em> 在完全解析所有可作为 OAD 部分的文档前，将某引用视为无法解析。</p>
                    <p>如在解析引用时只解析了文档的一部分，则行为为实现自定义或未定义；参见 <a href="#warnings-regarding-fragmentary-parsing">碎片化解析警告</a>及
                        <a href="#appendix-g-parsing-and-resolution-guidance">附录 G</a> 详细说明。
                    </p>
                </section>
                <section id="relative-references-in-api-description-uris">
                    <div class="header-wrapper">
                        <h5 id="x4-1-2-2-relative-references-in-api-description-uris"><bdi class="secno">4.1.2.2
                            </bdi>API 描述 URI 的相对引用</h5><a class="self-link"
                            href="#relative-references-in-api-description-uris"
                            aria-label="Permalink for Section 4.1.2.2"></a>
                    </div>
                    <p>OpenAPI 描述内用于引用、外部文档或如许可证等补充信息的 URI 作为<em>标识符</em>被解析，规范中称为 <strong><em>URI</em></strong>，与<a
                            href="#relative-references-in-api-urls">API URL</a>区分。注意部分 URI 字段因历史原因名为
                        <code>url</code>，但描述采用正确的“URI”术语。
                    </p>
                    <p>如<a href="#parsing-documents">文档解析</a>所述，多个字段可用于将 OpenAPI 文档或 Schema 对象关联到 URI，该 URI 不一定与文档或
                        schema 的实际位置一致。这样在不同部署环境（如本地文件系统，安全或网络受限环境）下可使用相同引用。</p>
                    <p>除非另行说明，所有作为 URI 的字段 <em class="rfc2119">MAY</em> 接受 [<cite><a class="bibref"
                                data-link-type="biblio" href="#bib-rfc3986"
                                title="Uniform Resource Identifier (URI): Generic Syntax">RFC3986</a></cite>] <a
                            href="https://tools.ietf.org/html/rfc3986#section-4.2">第 4.2 节</a> 定义的相对引用。</p>
                    <section id="establishing-the-base-uri">
                        <div class="header-wrapper">
                            <h6 id="x4-1-2-2-1-establishing-the-base-uri"><bdi class="secno">4.1.2.2.1 </bdi>基础 URI 的建立
                            </h6><a class="self-link" href="#establishing-the-base-uri"
                                aria-label="Permalink for Section 4.1.2.2.1"></a>
                        </div>
                        <p>相对 URI 引用需使用合适的基础 URI 解析，<em class="rfc2119">MUST</em> 遵循 [<cite><a class="bibref"
                                    data-link-type="biblio" href="#bib-rfc3986"
                                    title="Uniform Resource Identifier (URI): Generic Syntax">RFC3986</a></cite>] <a
                                href="https://tools.ietf.org/html/rfc3986#section-5.1.1">第 5.1.1 – 5.1.4 节</a>，以及 Schema
                            对象参考 <a
                                href="https://www.ietf.org/archive/id/draft-bhutton-json-schema-01.html#section-8.2">JSON
                                Schema 2020-12 草案第 8.2 节</a>，实际操作可参考 <a
                                href="#appendix-f-examples-of-base-uri-determination-and-reference-resolution">附录 F：基础
                                URI 解析及引用解析示例</a>。</p>
                        <p>如 <code>$self</code> 是相对 URI 引用，须按下一个可用基础 URI 来源解析 ([<cite><a class="bibref"
                                    data-link-type="biblio" href="#bib-rfc3986"
                                    title="Uniform Resource Identifier (URI): Generic Syntax">RFC3986</a></cite>] <a
                                href="https://tools.ietf.org/html/rfc3986#section-5.1.2">第 5.1.2 – 5.1.4 节</a>)，再用于其他相对
                            URI 的解析。</p>
                        <p>若 <code>$self</code>（OpenAPI 对象）或 <code>$id</code>（Schema 对象）缺失或为相对 URI，最常用的基础 URI 来源是获取
                            URI。工具实现 <em class="rfc2119">MAY</em> 支持文档获取，详见 <a
                                href="#security-considerations">安全注意事项</a>。即使支持获取，也可能受网络配置、服务器不可用（如服务器托管旧版本时新版本在开发中）影响，或因性能不适合获取。因此所有工具实现
                            <em class="rfc2119">SHOULD</em> 允许用户指定文档期望的获取 URI，以便像实际获取一样解析引用。
                        </p>
                    </section>
                    <section id="resolving-uri-fragments">
                        <div class="header-wrapper">
                            <h6 id="x4-1-2-2-2-resolving-uri-fragments"><bdi class="secno">4.1.2.2.2 </bdi>URI 片段解析</h6>
                            <a class="self-link" href="#resolving-uri-fragments"
                                aria-label="Permalink for Section 4.1.2.2.2"></a>
                        </div>
                        <p>如 URI 包含片段标识符，则片段应按所引用文档的片段解析机制解析。引用文档为 JSON 或 YAML 时，片段标识符 <em class="rfc2119">SHOULD</em> 按
                            [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc6901"
                                    title="JavaScript Object Notation (JSON) Pointer">RFC6901</a></cite>] 作为 JSON 指针解析。
                        </p>
                    </section>
                    <section id="relative-uri-references-in-commonmark-fields">
                        <div class="header-wrapper">
                            <h6 id="x4-1-2-2-3-relative-uri-references-in-commonmark-fields"><bdi
                                    class="secno">4.1.2.2.3 </bdi>CommonMark 字段中的相对 URI 引用</h6><a class="self-link"
                                href="#relative-uri-references-in-commonmark-fields"
                                aria-label="Permalink for Section 4.1.2.2.3"></a>
                        </div>
                        <p>CommonMark 超链接中的相对引用在其渲染上下文中解析，可能与 API 描述上下文不同。</p>
                    </section>
                </section>
                <section id="resolving-implicit-connections">
                    <div class="header-wrapper">
                        <h5 id="x4-1-2-3-resolving-implicit-connections"><bdi class="secno">4.1.2.3 </bdi>隐式连接解析</h5><a
                            class="self-link" href="#resolving-implicit-connections"
                            aria-label="Permalink for Section 4.1.2.3"></a>
                    </div>
                    <p>本规范的若干特性要求解析某些非 URI 连接至 OAD 其它部分。</p>
                    <p>在单文档 OAD 中这些连接可明确解析；在多文档 OAD 下，解析过程属于<em>实现自定义</em>，但须符合本节约束。
                        部分情况下可用明确的 URI 替代，强烈建议 OAD 作者 <em class="rfc2119">RECOMMENDED</em> 使用 URI 以提升工具兼容性。</p>
                    <p>解析来自引用（非入口）文档的 <a href="#components-object">Components 对象</a>和<a href="#tag-object">Tag
                            对象</a>名称时，建议工具 <em class="rfc2119">RECOMMENDED</em> 从入口文档解析而不是当前文档。解析基于
                        <code>operationId</code> 的 <a href="#operation-object">Operation 对象</a>时，建议同时考虑所有已解析文档中的
                        Operation 对象。
                    </p>
                    <p>隐式连接解析不影响 <a href="#relative-references-in-api-description-uris">URI 解析</a> 及其目标。</p>
                    <p>更多细节及使用隐式连接的对象和字段清单详见 <a href="#appendix-g-parsing-and-resolution-guidance">附录 G：解析与解析指导</a>。</p>
                </section>
            </section>
        </section>
        <section id="info-object">
            <div class="header-wrapper">
                <h3 id="x4-2-info-object"><bdi class="secno">4.2 </bdi>信息对象</h3><a class="self-link" href="#info-object"
                    aria-label="Permalink for Section 4.2"></a>
            </div>
            <p>该对象提供 API 元数据。
                元数据 <em class="rfc2119">MAY</em> 可被客户端在需要时使用，也 <em class="rfc2119">MAY</em> 可在编辑或文档生成工具中展示以提升便捷性。
            </p>
            <section id="fixed-fields-0">
                <div class="header-wrapper">
                    <h4 id="x4-2-1-fixed-fields"><bdi class="secno">4.2.1 </bdi>固定字段</h4><a class="self-link"
                        href="#fixed-fields-0" aria-label="Permalink for Section 4.2.1"></a>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>字段名</th>
                            <th style="text-align:center">类型</th>
                            <th>说明</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><span id="info-title"></span>title</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td><strong><em class="rfc2119">REQUIRED</em></strong>。API 标题。</td>
                        </tr>
                        <tr>
                            <td><span id="info-summary"></span>summary</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td>API 简要说明。</td>
                        </tr>
                        <tr>
                            <td><span id="info-description"></span>description</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td>API 描述。[<cite><a class="bibref" data-link-type="biblio" href="#bib-commonmark"
                                        title="CommonMark Spec">CommonMark</a></cite>] 语法 <em class="rfc2119">MAY</em>
                                可用于富文本表示。</td>
                        </tr>
                        <tr>
                            <td><span id="info-terms-of-service"></span>termsOfService</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td>API 服务条款的 URI。该值 <em class="rfc2119">MUST</em> 是 URI 格式。</td>
                        </tr>
                        <tr>
                            <td><span id="info-contact"></span>contact</td>
                            <td style="text-align:center"><a href="#contact-object">Contact 对象</a></td>
                            <td>API 的联系信息。</td>
                        </tr>
                        <tr>
                            <td><span id="info-license"></span>license</td>
                            <td style="text-align:center"><a href="#license-object">License 对象</a></td>
                            <td>API 的许可信息。</td>
                        </tr>
                        <tr>
                            <td><span id="info-version"></span>version</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td><strong><em class="rfc2119">REQUIRED</em></strong>。OpenAPI 文档版本（与 <a
                                    href="#oas-version">OpenAPI 规范版本</a>、所描述 API 的版本或描述本身的版本不同）。</td>
                        </tr>
                    </tbody>
                </table>
                <p>该对象 <em class="rfc2119">MAY</em> 可通过<a href="#specification-extensions">规范扩展</a>扩展。</p>
            </section>
            <section id="info-object-example">
                <div class="header-wrapper">
                    <h4 id="x4-2-2-info-object-example"><bdi class="secno">4.2.2 </bdi>信息对象示例</h4><a class="self-link"
                        href="#info-object-example" aria-label="Permalink for Section 4.2.2"></a>
                </div>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">title:</span> <span class="hljs-string">示例</span> <span class="hljs-string">宠物</span> <span class="hljs-string">商店</span> <span class="hljs-string">应用</span>
<span class="hljs-attr">summary:</span> <span class="hljs-string">宠物</span> <span class="hljs-string">商店</span> <span class="hljs-string">管理。</span>
<span class="hljs-attr">description:</span> <span class="hljs-string">这是</span> <span class="hljs-string">一个</span> <span class="hljs-string">宠物</span> <span class="hljs-string">商店</span> <span class="hljs-string">的</span> <span class="hljs-string">示例</span> <span class="hljs-string">服务器。</span>
<span class="hljs-attr">termsOfService:</span> <span class="hljs-string">https://example.com/terms/</span>
<span class="hljs-attr">contact:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">API</span> <span class="hljs-string">支持</span>
  <span class="hljs-attr">url:</span> <span class="hljs-string">https://www.example.com/support</span>
  <span class="hljs-attr">email:</span> <span class="hljs-string">support@example.com</span>
<span class="hljs-attr">license:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">Apache</span> <span class="hljs-number">2.0</span>
  <span class="hljs-attr">url:</span> <span class="hljs-string">https://www.apache.org/licenses/LICENSE-2.0.html</span>
<span class="hljs-attr">version:</span> <span class="hljs-number">1.0</span><span class="hljs-number">.1</span>
</code></pre>
            </section>
        </section>
        <section id="contact-object">
            <div class="header-wrapper">
                <h3 id="x4-3-contact-object"><bdi class="secno">4.3 </bdi>联系对象</h3><a class="self-link"
                    href="#contact-object" aria-label="Permalink for Section 4.3"></a>
            </div>
            <p>暴露的 API 的联系信息。</p>
            <section id="fixed-fields-1">
                <div class="header-wrapper">
                    <h4 id="x4-3-1-fixed-fields"><bdi class="secno">4.3.1 </bdi>固定字段</h4><a class="self-link"
                        href="#fixed-fields-1" aria-label="Permalink for Section 4.3.1"></a>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>字段名</th>
                            <th style="text-align:center">类型</th>
                            <th>说明</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><span id="contact-name"></span>name</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td>联系人或组织的标识名称。</td>
                        </tr>
                        <tr>
                            <td><span id="contact-url"></span>url</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td>联系信息的 URI。该值 <em class="rfc2119">MUST</em> 必须为 URI 形式。</td>
                        </tr>
                        <tr>
                            <td><span id="contact-email"></span>email</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td>联系人或组织的电子邮件地址。该值 <em class="rfc2119">MUST</em> 必须为电子邮件地址形式。</td>
                        </tr>
                    </tbody>
                </table>
                <p>该对象 <em class="rfc2119">MAY</em> 可通过 <a href="#specification-extensions">Specification Extensions</a>
                    进行扩展。</p>
            </section>
            <section id="contact-object-example">
                <div class="header-wrapper">
                    <h4 id="x4-3-2-contact-object-example"><bdi class="secno">4.3.2 </bdi>联系对象示例</h4><a
                        class="self-link" href="#contact-object-example" aria-label="Permalink for Section 4.3.2"></a>
                </div>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">name:</span> <span class="hljs-string">API</span> <span class="hljs-string">Support</span>
<span class="hljs-attr">url:</span> <span class="hljs-string">https://www.example.com/support</span>
<span class="hljs-attr">email:</span> <span class="hljs-string">support@example.com</span>
</code></pre>
            </section>
        </section>
        <section id="license-object">
            <div class="header-wrapper">
                <h3 id="x4-4-license-object"><bdi class="secno">4.4 </bdi>许可对象</h3><a class="self-link"
                    href="#license-object" aria-label="Permalink for Section 4.4"></a>
            </div>
            <p>暴露的 API 的许可信息。</p>
            <section id="fixed-fields-2">
                <div class="header-wrapper">
                    <h4 id="x4-4-1-fixed-fields"><bdi class="secno">4.4.1 </bdi>固定字段</h4><a class="self-link"
                        href="#fixed-fields-2" aria-label="Permalink for Section 4.4.1"></a>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>字段名</th>
                            <th style="text-align:center">类型</th>
                            <th>说明</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><span id="license-name"></span>name</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td><strong><em class="rfc2119">REQUIRED</em></strong>。API 使用的许可证名称。</td>
                        </tr>
                        <tr>
                            <td><span id="license-identifier"></span>identifier</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td>用于 API 的 [<cite><a class="bibref" data-link-type="biblio" href="#bib-spdx-licenses"
                                        title="SPDX License List">SPDX-Licenses</a></cite>] 表达式。<code>identifier</code>
                                字段与 <code>url</code> 字段互斥。</td>
                        </tr>
                        <tr>
                            <td><span id="license-url"></span>url</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td>API 所使用许可证的 URI。该值 <em class="rfc2119">MUST</em> 必须为 URI 形式。<code>url</code> 字段与
                                <code>identifier</code> 字段互斥。
                            </td>
                        </tr>
                    </tbody>
                </table>
                <p>该对象 <em class="rfc2119">MAY</em> 可通过 <a href="#specification-extensions">Specification Extensions</a>
                    进行扩展。</p>
            </section>
            <section id="license-object-example">
                <div class="header-wrapper">
                    <h4 id="x4-4-2-license-object-example"><bdi class="secno">4.4.2 </bdi>许可对象示例</h4><a
                        class="self-link" href="#license-object-example" aria-label="Permalink for Section 4.4.2"></a>
                </div>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">name:</span> <span class="hljs-string">Apache</span> <span class="hljs-number">2.0</span>
<span class="hljs-attr">identifier:</span> <span class="hljs-string">Apache-2.0</span>
</code></pre>
            </section>
        </section>
        <section id="server-object">
            <div class="header-wrapper">
                <h3 id="x4-5-server-object"><bdi class="secno">4.5 </bdi>服务对象</h3><a class="self-link"
                    href="#server-object" aria-label="Permalink for Section 4.5"></a>
            </div>
            <p>表示一个 Server 的对象。</p>
            <section id="fixed-fields-3">
                <div class="header-wrapper">
                    <h4 id="x4-5-1-fixed-fields"><bdi class="secno">4.5.1 </bdi>固定字段</h4><a class="self-link"
                        href="#fixed-fields-3" aria-label="Permalink for Section 4.5.1"></a>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>字段名</th>
                            <th style="text-align:center">类型</th>
                            <th>说明</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><span id="server-url"></span>url</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td><strong><em class="rfc2119">REQUIRED</em></strong>。目标主机的 URL。该 URL 支持 Server
                                Variables，并且 <em class="rfc2119">MAY</em> 可以是相对的，用以指示主机位置相对于包含该 Server Object
                                的文档的服务位置。查询和片段 <em class="rfc2119">MUST NOT</em> 不得出现在该 URL 中。若在 URL 模板中以
                                <code>{</code>braces<code>}</code> 命名变量，则会进行变量替换。
                            </td>
                        </tr>
                        <tr>
                            <td><span id="server-description"></span>description</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td>用于描述由该 URL 指定的主机的可选字符串。[<cite><a class="bibref" data-link-type="biblio"
                                        href="#bib-commonmark" title="CommonMark Spec">CommonMark</a></cite>] 语法 <em
                                    class="rfc2119">MAY</em> 可用于富文本表示。</td>
                        </tr>
                        <tr>
                            <td><span id="server-name"></span>name</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td>用于引用该 URL 指定主机的可选唯一字符串。</td>
                        </tr>
                        <tr>
                            <td><span id="server-variables"></span>variables</td>
                            <td style="text-align:center">Map[<code>string</code>, <a
                                    href="#server-variable-object">Server Variable Object</a>]</td>
                            <td>将变量名映射到其值的映射表。该值用于在服务器的 URL 模板中进行替换。</td>
                        </tr>
                    </tbody>
                </table>
                <p>该对象 <em class="rfc2119">MAY</em> 可通过 <a href="#specification-extensions">Specification Extensions</a>
                    进行扩展。</p>
            </section>
            <section id="relative-references-in-api-urls">
                <div class="header-wrapper">
                    <h4 id="x4-5-2-relative-references-in-api-urls"><bdi class="secno">4.5.2 </bdi>API URL 的相对引用</h4><a
                        class="self-link" href="#relative-references-in-api-urls"
                        aria-label="Permalink for Section 4.5.2"></a>
                </div>
                <p>API 端点按定义作为位置进行访问，本规范将其描述为 <strong><em>URLs</em></strong>。</p>
                <p>除非另有说明，所有作为 URL 的字段 <em class="rfc2119">MAY</em> 接受 [<cite><a class="bibref" data-link-type="biblio"
                            href="#bib-rfc3986"
                            title="Uniform Resource Identifier (URI): Generic Syntax">RFC3986</a></cite>] <a
                        href="https://datatracker.ietf.org/doc/html/rfc3986#section-4.2">第 4.2 节</a> 定义的相对引用。</p>
                <p>由于 API 与 OpenAPI 文档是不同的实体，RFC3986 对 OpenAPI 文档的基础 URI 规则不适用。除非另有说明，相对引用应使用 <a
                        href="#server-object">Server Object</a> 中定义的 URL 作为基础 URL 来解析。注意这些 URL 本身 <em
                        class="rfc2119">MAY</em> 相对于引用它们的文档为相对。</p>
                <section id="examples-of-api-base-url-determination">
                    <div class="header-wrapper">
                        <h5 id="x4-5-2-1-examples-of-api-base-url-determination"><bdi class="secno">4.5.2.1
                            </bdi>API 基本 URL 解析示例</h5><a class="self-link"
                            href="#examples-of-api-base-url-determination"
                            aria-label="Permalink for Section 4.5.2.1"></a>
                    </div>
                    <p>假设以下 OpenAPI 文档的检索 URI 为 <code>https://device1.example.com</code>：</p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">openapi:</span> <span class="hljs-number">3.2</span><span class="hljs-number">.0</span>
<span class="hljs-string">$self:</span> <span class="hljs-string">https://apidescriptions.example.com/foo</span>
<span class="hljs-attr">info:</span>
  <span class="hljs-attr">title:</span> <span class="hljs-string">Example</span> <span class="hljs-string">API</span>
  <span class="hljs-attr">version:</span> <span class="hljs-number">1.0</span>
<span class="hljs-attr">servers:</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">url:</span> <span class="hljs-string">.</span>
  <span class="hljs-attr">description:</span> <span class="hljs-string">The</span> <span class="hljs-string">production</span> <span class="hljs-string">API</span> <span class="hljs-string">on</span> <span class="hljs-string">this</span> <span class="hljs-string">device</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">url:</span> <span class="hljs-string">./test</span>
  <span class="hljs-attr">description:</span> <span class="hljs-string">The</span> <span class="hljs-string">test</span> <span class="hljs-string">API</span> <span class="hljs-string">on</span> <span class="hljs-string">this</span> <span class="hljs-string">device</span>
</code></pre>
                    <p>对于 API URLs，应忽略标识 OpenAPI 文档的 <code>$self</code> 字段，改用检索 URI。这样会得到规范化的生产 URL 为
                        <code>https://device1.example.com</code>，以及规范化的测试 URL 为
                        <code>https://device1.example.com/test</code>。
                    </p>
                </section>
            </section>
            <section id="server-object-example">
                <div class="header-wrapper">
                    <h4 id="x4-5-3-server-object-example"><bdi class="secno">4.5.3 </bdi>服务对象示例</h4><a class="self-link"
                        href="#server-object-example" aria-label="Permalink for Section 4.5.3"></a>
                </div>
                <p>单个服务器可描述为：</p>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">url:</span> <span class="hljs-string">https://development.gigantic-server.com/v1</span>
<span class="hljs-attr">description:</span> <span class="hljs-string">Development</span> <span class="hljs-string">server</span>
<span class="hljs-attr">name:</span> <span class="hljs-string">dev</span>
</code></pre>
                <p>下面示例展示了如何描述多个服务器，例如在 OpenAPI 对象的 <a href="#oas-servers"><code>servers</code></a>：</p>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">servers:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">url:</span> <span class="hljs-string">https://development.gigantic-server.com/v1</span>
    <span class="hljs-attr">description:</span> <span class="hljs-string">Development</span> <span class="hljs-string">server</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">dev</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">url:</span> <span class="hljs-string">https://staging.gigantic-server.com/v1</span>
    <span class="hljs-attr">description:</span> <span class="hljs-string">Staging</span> <span class="hljs-string">server</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">staging</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">url:</span> <span class="hljs-string">https://api.gigantic-server.com/v1</span>
    <span class="hljs-attr">description:</span> <span class="hljs-string">Production</span> <span class="hljs-string">server</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">prod</span>
</code></pre>
                <p>下面示例展示了如何为服务器配置使用变量：</p>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">servers:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">url:</span> <span class="hljs-string">https://{username}.gigantic-server.com:{port}/{basePath}</span>
    <span class="hljs-attr">description:</span> <span class="hljs-string">The</span> <span class="hljs-string">production</span> <span class="hljs-string">API</span> <span class="hljs-string">server</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">prod</span>
    <span class="hljs-attr">variables:</span>
      <span class="hljs-attr">username:</span>
        <span class="hljs-comment"># note! no enum here means it is an open value</span>
        <span class="hljs-attr">default:</span> <span class="hljs-string">demo</span>
        <span class="hljs-attr">description:</span> <span class="hljs-string">A</span> <span class="hljs-string">user-specific</span> <span class="hljs-string">subdomain.</span> <span class="hljs-string">Use</span> <span class="hljs-string">`demo`</span> <span class="hljs-string">for</span> <span class="hljs-string">a</span> <span class="hljs-string">free</span> <span class="hljs-string">sandbox</span> <span class="hljs-string">environment.</span>
      <span class="hljs-attr">port:</span>
        <span class="hljs-attr">enum:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">'8443'</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">'443'</span>
        <span class="hljs-attr">default:</span> <span class="hljs-string">'8443'</span>
      <span class="hljs-attr">basePath:</span>
        <span class="hljs-comment"># open meaning there is the opportunity to use special base paths as assigned by the provider, default is "v2"</span>
        <span class="hljs-attr">default:</span> <span class="hljs-string">v2</span>
</code></pre>
            </section>
        </section>
        <section id="server-variable-object">
            <div class="header-wrapper">
                <h3 id="x4-6-server-variable-object"><bdi class="secno">4.6 </bdi>服务变量对象</h3><a class="self-link"
                    href="#server-variable-object" aria-label="Permalink for Section 4.6"></a>
            </div>
            <p>表示用于服务器 URL 模板替换的 Server Variable 的对象。</p>
            <p>服务器 URL 模板由以下 [<cite><a class="bibref" data-link-type="biblio" href="#bib-abnf"
                        title="Augmented BNF for Syntax Specifications: ABNF">ABNF</a></cite>] 语法定义。</p>
            <pre class="nohighlight" tabindex="0"><code><span class="hljs-attribute">server-url-template</span>  <span class="hljs-operator">=</span> <span class="hljs-number">1</span>*( literals / server-variable )
<span class="hljs-attribute">server-variable</span>      <span class="hljs-operator">=</span> <span class="hljs-string">"{"</span> server-variable-name <span class="hljs-string">"}"</span>
<span class="hljs-attribute">server-variable-name</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>*( <span class="hljs-symbol">%x00-7A</span> / <span class="hljs-symbol">%x7C</span> / <span class="hljs-symbol">%x7E-10FFFF</span> ) <span class="hljs-comment">; every Unicode character except { and }</span>

<span class="hljs-attribute">literals</span>       <span class="hljs-operator">=</span> <span class="hljs-number">1</span>*( <span class="hljs-symbol">%x21</span> / <span class="hljs-symbol">%x23-24</span> / <span class="hljs-symbol">%x26-3B</span> / <span class="hljs-symbol">%x3D</span> / <span class="hljs-symbol">%x3F-5B</span>
               / <span class="hljs-symbol">%x5D</span> / <span class="hljs-symbol">%x5F</span> / <span class="hljs-symbol">%x61-7A</span> / <span class="hljs-symbol">%x7E</span> / ucschar / iprivate
               / pct-encoded)
                    <span class="hljs-comment">; any Unicode character except: CTL, SP,</span>
                    <span class="hljs-comment">;  DQUOTE, "%" (aside from pct-encoded),</span>
                    <span class="hljs-comment">;  "&lt;", "&gt;", "\", "^", "`", "{", "|", "}"</span>
<span class="hljs-attribute">pct-encoded</span>    <span class="hljs-operator">=</span>  <span class="hljs-string">"%"</span> <span class="hljs-keyword">HEXDIG</span> <span class="hljs-keyword">HEXDIG</span>
<span class="hljs-attribute">ucschar</span>        <span class="hljs-operator">=</span>  <span class="hljs-symbol">%xA0-D7FF</span> / <span class="hljs-symbol">%xF900-FDCF</span> / <span class="hljs-symbol">%xFDF0-FFEF</span>
               /  <span class="hljs-symbol">%x10000-1FFFD</span> / <span class="hljs-symbol">%x20000-2FFFD</span> / <span class="hljs-symbol">%x30000-3FFFD</span>
               /  <span class="hljs-symbol">%x40000-4FFFD</span> / <span class="hljs-symbol">%x50000-5FFFD</span> / <span class="hljs-symbol">%x60000-6FFFD</span>
               /  <span class="hljs-symbol">%x70000-7FFFD</span> / <span class="hljs-symbol">%x80000-8FFFD</span> / <span class="hljs-symbol">%x90000-9FFFD</span>
               /  <span class="hljs-symbol">%xA0000-AFFFD</span> / <span class="hljs-symbol">%xB0000-BFFFD</span> / <span class="hljs-symbol">%xC0000-CFFFD</span>
               /  <span class="hljs-symbol">%xD0000-DFFFD</span> / <span class="hljs-symbol">%xE1000-EFFFD</span>
<span class="hljs-attribute">iprivate</span>       <span class="hljs-operator">=</span>  <span class="hljs-symbol">%xE000-F8FF</span> / <span class="hljs-symbol">%xF0000-FFFFD</span> / <span class="hljs-symbol">%x100000-10FFFD</span>
</code></pre>
            <p>此处的 <code>literals</code>、<code>pct-encoded</code>、<code>ucschar</code> 和 <code>iprivate</code> 定义取自
                [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc6570"
                        title="URI Template">RFC6570</a></cite>]，并结合了 <a
                    href="https://www.rfc-editor.org/errata/eid6937">Errata 6937</a> 对 <code>literals</code> 的修正。</p>
            <p>每个服务器变量在 URL 模板中 <em class="rfc2119">MUST NOT</em> 不得出现多次。</p>
            <p>关于构造完整请求 URL 的指导，请参见 <a href="#paths-object">Paths Object</a>。</p>
            <section id="fixed-fields-4">
                <div class="header-wrapper">
                    <h4 id="x4-6-1-fixed-fields"><bdi class="secno">4.6.1 </bdi>固定字段</h4><a class="self-link"
                        href="#fixed-fields-4" aria-label="Permalink for Section 4.6.1"></a>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>字段名</th>
                            <th style="text-align:center">类型</th>
                            <th>说明</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><span id="server-variable-enum"></span>enum</td>
                            <td style="text-align:center">[<code>string</code>]</td>
                            <td>当替换选项来自有限集合时使用的字符串枚举。该数组 <em class="rfc2119">MUST NOT</em> 不得为空。</td>
                        </tr>
                        <tr>
                            <td><span id="server-variable-default"></span>default</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td><strong><em class="rfc2119">REQUIRED</em></strong>。用于替换的默认值，若未提供替代值，则 <em
                                    class="rfc2119">SHALL</em> 发送此默认值。如果定义了 <a
                                    href="#server-variable-enum"><code>enum</code></a>，则该值 <em class="rfc2119">MUST</em>
                                必须存在于枚举值中。注意此行为不同于 <a href="#schema-object">Schema Object</a> 中的 <code>default</code>
                                关键字，后者记录接收方的行为而不是将值插入数据中。</td>
                        </tr>
                        <tr>
                            <td><span id="server-variable-description"></span>description</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td>服务器变量的可选描述。[<cite><a class="bibref" data-link-type="biblio" href="#bib-commonmark"
                                        title="CommonMark Spec">CommonMark</a></cite>] 语法 <em class="rfc2119">MAY</em>
                                可用于富文本表示。</td>
                        </tr>
                    </tbody>
                </table>
                <p>该对象 <em class="rfc2119">MAY</em> 可通过 <a href="#specification-extensions">Specification Extensions</a>
                    进行扩展。</p>
            </section>
        </section>
        <section id="components-object">
            <div class="header-wrapper">
                <h3 id="x4-7-components-object"><bdi class="secno">4.7 </bdi>组件对象</h3><a class="self-link"
                    href="#components-object" aria-label="Permalink for Section 4.7"></a>
            </div>
            <p>包含一组可重用对象以用于 OAS 的不同方面。所有在 Components Object 中定义的对象，除非在 Components 之外被显式引用，否则不会对 API 产生任何影响。</p>
            <section id="fixed-fields-5">
                <div class="header-wrapper">
                    <h4 id="x4-7-1-fixed-fields"><bdi class="secno">4.7.1 </bdi>固定字段</h4><a class="self-link"
                        href="#fixed-fields-5" aria-label="Permalink for Section 4.7.1"></a>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>字段名</th>
                            <th style="text-align:left">类型</th>
                            <th>说明</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><span id="components-schemas"></span> schemas</td>
                            <td style="text-align:left">Map[<code>string</code>, <a href="#schema-object">Schema
                                    Object</a>]</td>
                            <td>用于存放可重用 <a href="#schema-object">Schema Objects</a> 的对象。</td>
                        </tr>
                        <tr>
                            <td><span id="components-responses"></span> responses</td>
                            <td style="text-align:left">Map[<code>string</code>, <a href="#response-object">Response
                                    Object</a> | <a href="#reference-object">Reference Object</a>]</td>
                            <td>用于存放可重用 <a href="#response-object">Response Objects</a> 的对象。</td>
                        </tr>
                        <tr>
                            <td><span id="components-parameters"></span> parameters</td>
                            <td style="text-align:left">Map[<code>string</code>, <a href="#parameter-object">Parameter
                                    Object</a> | <a href="#reference-object">Reference Object</a>]</td>
                            <td>用于存放可重用 <a href="#parameter-object">Parameter Objects</a> 的对象。</td>
                        </tr>
                        <tr>
                            <td><span id="components-examples"></span> examples</td>
                            <td style="text-align:left">Map[<code>string</code>, <a href="#example-object">Example
                                    Object</a> | <a href="#reference-object">Reference Object</a>]</td>
                            <td>用于存放可重用 <a href="#example-object">Example Objects</a> 的对象。</td>
                        </tr>
                        <tr>
                            <td><span id="components-request-bodies"></span> requestBodies</td>
                            <td style="text-align:left">Map[<code>string</code>, <a href="#request-body-object">Request
                                    Body Object</a> | <a href="#reference-object">Reference Object</a>]</td>
                            <td>用于存放可重用 <a href="#request-body-object">Request Body Objects</a> 的对象。</td>
                        </tr>
                        <tr>
                            <td><span id="components-headers"></span> headers</td>
                            <td style="text-align:left">Map[<code>string</code>, <a href="#header-object">Header
                                    Object</a> | <a href="#reference-object">Reference Object</a>]</td>
                            <td>用于存放可重用 <a href="#header-object">Header Objects</a> 的对象。</td>
                        </tr>
                        <tr>
                            <td><span id="components-security-schemes"></span> securitySchemes</td>
                            <td style="text-align:left">Map[<code>string</code>, <a
                                    href="#security-scheme-object">Security Scheme Object</a> | <a
                                    href="#reference-object">Reference Object</a>]</td>
                            <td>用于存放可重用 <a href="#security-scheme-object">Security Scheme Objects</a> 的对象。</td>
                        </tr>
                        <tr>
                            <td><span id="components-links"></span> links</td>
                            <td style="text-align:left">Map[<code>string</code>, <a href="#link-object">Link Object</a>
                                | <a href="#reference-object">Reference Object</a>]</td>
                            <td>用于存放可重用 <a href="#link-object">Link Objects</a> 的对象。</td>
                        </tr>
                        <tr>
                            <td><span id="components-callbacks"></span> callbacks</td>
                            <td style="text-align:left">Map[<code>string</code>, <a href="#callback-object">Callback
                                    Object</a> | <a href="#reference-object">Reference Object</a>]</td>
                            <td>用于存放可重用 <a href="#callback-object">Callback Objects</a> 的对象。</td>
                        </tr>
                        <tr>
                            <td><span id="components-path-items"></span> pathItems</td>
                            <td style="text-align:left">Map[<code>string</code>, <a href="#path-item-object">Path Item
                                    Object</a>]</td>
                            <td>用于存放可重用 <a href="#path-item-object">Path Item Objects</a> 的对象。</td>
                        </tr>
                        <tr>
                            <td><span id="components-media-types"></span> mediaTypes</td>
                            <td style="text-align:left">Map[<code>string</code>, <a href="#media-type-object">Media Type
                                    Object</a> | <a href="#reference-object">Reference Object</a>]</td>
                            <td>用于存放可重用 <a href="#media-type-object">Media Type Objects</a> 的对象。</td>
                        </tr>
                    </tbody>
                </table>
                <p>该对象 <em class="rfc2119">MAY</em> 可通过 <a href="#specification-extensions">Specification Extensions</a>
                    进行扩展。</p>
                <p>上面声明的所有固定字段都是对象，<em class="rfc2119">MUST</em> 使用匹配正则表达式 <code>^[a-zA-Z0-9\.\-_]+$</code> 的键。</p>
                <p>字段名示例：</p>
                <pre class="nohighlight" tabindex="0"><code>User
User_1
User_Name
user-name
my.org.User
</code></pre>
            </section>
            <section id="components-object-example">
                <div class="header-wrapper">
                    <h4 id="x4-7-2-components-object-example"><bdi class="secno">4.7.2 </bdi>组件对象示例
                    </h4><a class="self-link" href="#components-object-example"
                        aria-label="Permalink for Section 4.7.2"></a>
                </div>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">components:</span>
  <span class="hljs-attr">schemas:</span>
    <span class="hljs-attr">GeneralError:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
      <span class="hljs-attr">properties:</span>
        <span class="hljs-attr">code:</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">integer</span>
          <span class="hljs-attr">format:</span> <span class="hljs-string">int32</span>
        <span class="hljs-attr">message:</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
    <span class="hljs-attr">Category:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
      <span class="hljs-attr">properties:</span>
        <span class="hljs-attr">id:</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">integer</span>
          <span class="hljs-attr">format:</span> <span class="hljs-string">int64</span>
        <span class="hljs-attr">name:</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
    <span class="hljs-attr">Tag:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
      <span class="hljs-attr">properties:</span>
        <span class="hljs-attr">id:</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">integer</span>
          <span class="hljs-attr">format:</span> <span class="hljs-string">int64</span>
        <span class="hljs-attr">name:</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
  <span class="hljs-attr">parameters:</span>
    <span class="hljs-attr">skipParam:</span>
      <span class="hljs-attr">name:</span> <span class="hljs-string">skip</span>
      <span class="hljs-attr">in:</span> <span class="hljs-string">query</span>
      <span class="hljs-attr">description:</span> <span class="hljs-string">number</span> <span class="hljs-string">of</span> <span class="hljs-string">items</span> <span class="hljs-string">to</span> <span class="hljs-string">skip</span>
      <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>
      <span class="hljs-attr">schema:</span>
        <span class="hljs-attr">type:</span> <span class="hljs-string">integer</span>
        <span class="hljs-attr">format:</span> <span class="hljs-string">int32</span>
    <span class="hljs-attr">limitParam:</span>
      <span class="hljs-attr">name:</span> <span class="hljs-string">limit</span>
      <span class="hljs-attr">in:</span> <span class="hljs-string">query</span>
      <span class="hljs-attr">description:</span> <span class="hljs-string">max</span> <span class="hljs-string">records</span> <span class="hljs-string">to</span> <span class="hljs-string">return</span>
      <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>
      <span class="hljs-attr">schema:</span>
        <span class="hljs-attr">type:</span> <span class="hljs-string">integer</span>
        <span class="hljs-attr">format:</span> <span class="hljs-string">int32</span>
  <span class="hljs-attr">responses:</span>
    <span class="hljs-attr">NotFound:</span>
      <span class="hljs-attr">description:</span> <span class="hljs-string">Entity</span> <span class="hljs-string">not</span> <span class="hljs-string">found.</span>
    <span class="hljs-attr">IllegalInput:</span>
      <span class="hljs-attr">description:</span> <span class="hljs-string">Illegal</span> <span class="hljs-string">input</span> <span class="hljs-string">for</span> <span class="hljs-string">operation.</span>
    <span class="hljs-attr">GeneralError:</span>
      <span class="hljs-attr">description:</span> <span class="hljs-string">General</span> <span class="hljs-string">Error</span>
      <span class="hljs-attr">content:</span>
        <span class="hljs-attr">application/json:</span>
          <span class="hljs-attr">schema:</span>
            <span class="hljs-string">$ref:</span> <span class="hljs-string">'#/components/schemas/GeneralError'</span>
  <span class="hljs-attr">securitySchemes:</span>
    <span class="hljs-attr">api_key:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">apiKey</span>
      <span class="hljs-attr">name:</span> <span class="hljs-string">api-key</span>
      <span class="hljs-attr">in:</span> <span class="hljs-string">header</span>
    <span class="hljs-attr">petstore_auth:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">oauth2</span>
      <span class="hljs-attr">flows:</span>
        <span class="hljs-attr">implicit:</span>
          <span class="hljs-attr">authorizationUrl:</span> <span class="hljs-string">https://example.org/api/oauth/dialog</span>
          <span class="hljs-attr">scopes:</span>
            <span class="hljs-attr">write:pets:</span> <span class="hljs-string">modify</span> <span class="hljs-string">pets</span> <span class="hljs-string">in</span> <span class="hljs-string">your</span> <span class="hljs-string">account</span>
            <span class="hljs-attr">read:pets:</span> <span class="hljs-string">read</span> <span class="hljs-string">your</span> <span class="hljs-string">pets</span>
</code></pre>
            </section>
        </section>
        <section id="paths-object">
            <div class="header-wrapper">
                <h3 id="x4-8-paths-object"><bdi class="secno">4.8 </bdi>Paths 对象</h3><a class="self-link"
                    href="#paths-object" aria-label="Permalink for Section 4.8"></a>
            </div>
            <p>保存指向各个端点及其操作的相对路径。该路径会附加到来自 <a href="#server-object">Server Object</a> 的 URL 上以构造完整的 URL。由于 <a
                    href="#security-filtering">访问控制列表（ACL）约束</a>，Paths Object <em class="rfc2119">MAY</em> 可以为空。</p>
            <section id="patterned-fields">
                <div class="header-wrapper">
                    <h4 id="x4-8-1-patterned-fields"><bdi class="secno">4.8.1 </bdi>模式字段</h4><a class="self-link"
                        href="#patterned-fields" aria-label="Permalink for Section 4.8.1"></a>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>字段模式</th>
                            <th style="text-align:center">类型</th>
                            <th>描述</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><span id="paths-path"></span>/{path}</td>
                            <td style="text-align:center"><a href="#path-item-object">Path Item 对象</a></td>
                            <td>指向单个端点的相对路径。字段名 <em class="rfc2119">MUST</em> 以正斜杠（<code>/</code>）开头。来自 <a
                                    href="#server-object">Server Object</a> 的 <code>url</code>
                                字段在解析并替换模板变量后，会将该路径<strong>追加</strong>（不进行相对 URL 解析）到其上以构造完整的 URL。允许使用 <a
                                    href="#path-templating">路径模板化</a>。在匹配 URL
                                时，具体（非模板化的）路径会先于其模板化的对应项被匹配。具有相同层级但模板名称不同的模板化路径 <em class="rfc2119">MUST NOT</em>
                                共存，因为它们是相同的。若出现歧义匹配，由工具决定使用哪一个。</td>
                        </tr>
                    </tbody>
                </table>
                <p>该对象 <em class="rfc2119">MAY</em> 可通过 <a href="#specification-extensions">规范扩展</a> 进行扩展。</p>
            </section>
            <section id="path-templating">
                <div class="header-wrapper">
                    <h4 id="x4-8-2-path-templating"><bdi class="secno">4.8.2 </bdi>路径模板化</h4><a class="self-link"
                        href="#path-templating" aria-label="Permalink for Section 4.8.2"></a>
                </div>
                <p>路径模板化指使用以大括号（<code>{}</code>）分隔的模板表达式，将 URL 路径的一部分标记为可通过路径参数替换的部分。</p>
                <p>路径中的每个模板表达式 <em class="rfc2119">MUST</em> 对应于在 <a href="#path-item-object">Path Item</a> 本身和/或该 Path
                    Item 的每个 <a href="#operation-object">Operation</a> 中包含的路径参数。例外情况是当 Path Item 为空（例如由于 ACL
                    约束），则不要求存在匹配的路径参数。</p>
                <p>这些路径参数的值 <em class="rfc2119">MUST NOT</em> 包含任何未转义的“通用语法”字符，参见 [<cite><a class="bibref"
                            data-link-type="biblio" href="#bib-rfc3986"
                            title="Uniform Resource Identifier (URI): Generic Syntax">RFC3986</a></cite>] <a
                        href="https://datatracker.ietf.org/doc/html/rfc3986#section-3">第 3
                        节</a>：正斜杠（<code>/</code>）、问号（<code>?</code>）或井号（<code>#</code>）。有关转义字符的更多指导，请参阅 <a
                        href="#url-percent-encoding">URL 百分号编码</a>。</p>
                <p>路径模板化由下列 [<cite><a class="bibref" data-link-type="biblio" href="#bib-abnf"
                            title="Augmented BNF for Syntax Specifications: ABNF">ABNF</a></cite>] 语法定义</p>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-attribute">path-template</span>                  <span class="hljs-operator">=</span> <span class="hljs-string">"/"</span> *( path-segment <span class="hljs-string">"/"</span> ) [ path-segment ]
<span class="hljs-attribute">path-segment</span>                   <span class="hljs-operator">=</span> <span class="hljs-number">1</span>*( path-literal / template-expression )
<span class="hljs-attribute">path-literal</span>                   <span class="hljs-operator">=</span> <span class="hljs-number">1</span>*pchar
<span class="hljs-attribute">template-expression</span>            <span class="hljs-operator">=</span> <span class="hljs-string">"{"</span> template-expression-param-name <span class="hljs-string">"}"</span>
<span class="hljs-attribute">template-expression-param-name</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>*( <span class="hljs-symbol">%x00-7A</span> / <span class="hljs-symbol">%x7C</span> / <span class="hljs-symbol">%x7E-10FFFF</span> ) <span class="hljs-comment">; every Unicode character except { and }</span>

<span class="hljs-attribute">pchar</span>               <span class="hljs-operator">=</span> unreserved / pct-encoded / sub-delims / <span class="hljs-string">":"</span> / <span class="hljs-string">"@"</span>
<span class="hljs-attribute">unreserved</span>          <span class="hljs-operator">=</span> <span class="hljs-keyword">ALPHA</span> / <span class="hljs-keyword">DIGIT</span> / <span class="hljs-string">"-"</span> / <span class="hljs-string">"."</span> / <span class="hljs-string">"_"</span> / <span class="hljs-string">"~"</span>
<span class="hljs-attribute">pct-encoded</span>         <span class="hljs-operator">=</span> <span class="hljs-string">"%"</span> <span class="hljs-keyword">HEXDIG</span> <span class="hljs-keyword">HEXDIG</span>
<span class="hljs-attribute">sub-delims</span>          <span class="hljs-operator">=</span> <span class="hljs-string">"!"</span> / <span class="hljs-string">"$"</span> / <span class="hljs-string">"&amp;"</span> / <span class="hljs-string">"'"</span> / <span class="hljs-string">"("</span> / <span class="hljs-string">")"</span>
                    / <span class="hljs-string">"*"</span> / <span class="hljs-string">"+"</span> / <span class="hljs-string">","</span> / <span class="hljs-string">";"</span> / <span class="hljs-string">"="</span>
</code></pre>
                <p>此处的 <code>pchar</code>、<code>unreserved</code>、<code>pct-encoded</code> 与 <code>sub-delims</code>
                    定义取自 [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc3986"
                            title="Uniform Resource Identifier (URI): Generic Syntax">RFC3986</a></cite>]。<code>path-template</code>
                    直接源自 <a href="https://tools.ietf.org/html/rfc3986#section-3.3">RFC 3986，第 3.3 节</a>。</p>
                <p>每个模板表达式在单一路径模板中 <em class="rfc2119">MUST NOT</em> 出现多于一次。</p>
                <p>另见 <a href="#appendix-c-using-rfc6570-based-serialization">附录 C：使用基于 RFC6570 的序列化</a> 以获取更多指导。</p>
                <section id="path-templating-matching">
                    <div class="header-wrapper">
                        <h5 id="x4-8-2-1-path-templating-matching"><bdi class="secno">4.8.2.1 </bdi>路径模板化匹配</h5><a
                            class="self-link" href="#path-templating-matching"
                            aria-label="Permalink for Section 4.8.2.1"></a>
                    </div>
                    <p>假设存在如下路径，如果使用，则具体定义 <code>/pets/mine</code> 将优先匹配：</p>
                    <pre class="nohighlight" tabindex="0"><code>  /pets/{petId}
  /pets/mine
</code></pre>
                    <p>以下路径被视为相同且无效：</p>
                    <pre class="nohighlight" tabindex="0"><code>  /pets/{petId}
  /pets/{name}
</code></pre>
                    <p>以下情况可能导致歧义解析：</p>
                    <pre class="nohighlight" tabindex="0"><code>  /{entity}/me
  /books/{id}
</code></pre>
                </section>
            </section>
            <section id="paths-object-example">
                <div class="header-wrapper">
                    <h4 id="x4-8-3-paths-object-example"><bdi class="secno">4.8.3 </bdi>Paths 对象示例</h4><a
                        class="self-link" href="#paths-object-example" aria-label="Permalink for Section 4.8.3"></a>
                </div>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-string">/pets:</span>
  <span class="hljs-attr">get:</span>
    <span class="hljs-attr">description:</span> <span class="hljs-string">Returns</span> <span class="hljs-string">all</span> <span class="hljs-string">pets</span> <span class="hljs-string">from</span> <span class="hljs-string">the</span> <span class="hljs-string">system</span> <span class="hljs-string">that</span> <span class="hljs-string">the</span> <span class="hljs-string">user</span> <span class="hljs-string">has</span> <span class="hljs-string">access</span> <span class="hljs-string">to</span>
    <span class="hljs-attr">responses:</span>
      <span class="hljs-attr">'200':</span>
        <span class="hljs-attr">description:</span> <span class="hljs-string">A</span> <span class="hljs-string">list</span> <span class="hljs-string">of</span> <span class="hljs-string">pets.</span>
        <span class="hljs-attr">content:</span>
          <span class="hljs-attr">application/json:</span>
            <span class="hljs-attr">schema:</span>
              <span class="hljs-attr">type:</span> <span class="hljs-string">array</span>
              <span class="hljs-attr">items:</span>
                <span class="hljs-string">$ref:</span> <span class="hljs-string">'#/components/schemas/pet'</span>
</code></pre>
            </section>
        </section>
        <section id="path-item-object">
            <div class="header-wrapper">
                <h3 id="x4-9-path-item-object"><bdi class="secno">4.9 </bdi>Path Item 对象</h3><a class="self-link"
                    href="#path-item-object" aria-label="Permalink for Section 4.9"></a>
            </div>
            <p>描述单一路径上可用的操作。由于 <a href="#security-filtering">ACL 约束</a>，Path Item <em class="rfc2119">MAY</em>
                为空。该路径本身仍会在文档查看器中显示，但查看者将无法知道哪些操作和参数可用。</p>
            <section id="fixed-fields-6">
                <div class="header-wrapper">
                    <h4 id="x4-9-1-fixed-fields"><bdi class="secno">4.9.1 </bdi>固定字段</h4><a class="self-link"
                        href="#fixed-fields-6" aria-label="Permalink for Section 4.9.1"></a>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>字段名</th>
                            <th style="text-align:center">类型</th>
                            <th>描述</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><span id="path-item-ref"></span>$ref</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td>允许对该 Path Item 进行引用定义。该值 <em class="rfc2119">MUST</em> 必须是 URI 形式，被引用的结构 <em
                                    class="rfc2119">MUST</em> 必须是 <a href="#path-item-object">Path Item Object</a>
                                的形式。如果在已定义的对象和被引用的对象中都出现 Path Item Object 字段，则行为未定义。参见解析 <a
                                    href="#relative-references-in-api-description-uris">相对引用</a>
                                的规则。<br><br><em><strong>注：</strong>在将来版本的规范中，<code>$ref</code> 与相邻属性的行为可能会更改，以使其与 <a
                                        href="#reference-object">Reference Object</a> 的行为更为一致。</em>
                            </td>
                        </tr>
                        <tr>
                            <td><span id="path-item-summary"></span>summary</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td> 一个可选的字符串摘要，旨在适用于该路径中的所有操作。</td>
                        </tr>
                        <tr>
                            <td><span id="path-item-description"></span>description</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td>一个可选的字符串描述，旨在适用于该路径中的所有操作。可以使用 [<cite><a class="bibref" data-link-type="biblio"
                                        href="#bib-commonmark" title="CommonMark Spec">CommonMark</a></cite>]
                                语法来进行富文本表示，<em class="rfc2119">MAY</em> 使用。</td>
                        </tr>
                        <tr>
                            <td><span id="path-item-get"></span>get</td>
                            <td style="text-align:center"><a href="#operation-object">Operation 对象</a></td>
                            <td>该路径上 GET 操作的定义。</td>
                        </tr>
                        <tr>
                            <td><span id="path-item-put"></span>put</td>
                            <td style="text-align:center"><a href="#operation-object">Operation 对象</a></td>
                            <td>该路径上 PUT 操作的定义。</td>
                        </tr>
                        <tr>
                            <td><span id="path-item-post"></span>post</td>
                            <td style="text-align:center"><a href="#operation-object">Operation 对象</a></td>
                            <td>该路径上 POST 操作的定义。</td>
                        </tr>
                        <tr>
                            <td><span id="path-item-delete"></span>delete</td>
                            <td style="text-align:center"><a href="#operation-object">Operation 对象</a></td>
                            <td>该路径上 DELETE 操作的定义。</td>
                        </tr>
                        <tr>
                            <td><span id="path-item-options"></span>options</td>
                            <td style="text-align:center"><a href="#operation-object">Operation 对象</a></td>
                            <td>该路径上 OPTIONS 操作的定义。</td>
                        </tr>
                        <tr>
                            <td><span id="path-item-head"></span>head</td>
                            <td style="text-align:center"><a href="#operation-object">Operation 对象</a></td>
                            <td>该路径上 HEAD 操作的定义。</td>
                        </tr>
                        <tr>
                            <td><span id="path-item-patch"></span>patch</td>
                            <td style="text-align:center"><a href="#operation-object">Operation 对象</a></td>
                            <td>该路径上 PATCH 操作的定义。</td>
                        </tr>
                        <tr>
                            <td><span id="path-item-trace"></span>trace</td>
                            <td style="text-align:center"><a href="#operation-object">Operation 对象</a></td>
                            <td>该路径上 TRACE 操作的定义。</td>
                        </tr>
                        <tr>
                            <td><span id="path-item-query"></span>query</td>
                            <td style="text-align:center"><a href="#operation-object">Operation 对象</a></td>
                            <td>该路径上 QUERY 操作的定义，按最新的 IETF 草案（撰写本文时为 <a
                                    href="https://www.ietf.org/archive/id/draft-ietf-httpbis-safe-method-w-body-11.html">draft-ietf-httpbis-safe-method-w-body-08</a>）或其
                                RFC 后续版本 的定义。</td>
                        </tr>
                        <tr>
                            <td><span id="path-item-additional-operations"></span>additionalOperations</td>
                            <td style="text-align:center">Map[<code>string</code>, <a href="#operation-object">Operation
                                    对象</a>]</td>
                            <td>该路径上额外操作的映射。映射的键是要在请求中发送的 HTTP 方法，其大小写与实际发送一致。该映射 <em class="rfc2119">MUST NOT</em>
                                包含可以由其他固定字段（具有 Operation Object 值）定义的方法的条目（例如，不应包含 <code>POST</code> 条目，因为
                                <code>post</code> 字段用于该方法）。
                            </td>
                        </tr>
                        <tr>
                            <td><span id="path-item-servers"></span>servers</td>
                            <td style="text-align:center">[<a href="#server-object">Server Object</a>]</td>
                            <td>用于为该路径下所有操作提供服务的替代 <code>servers</code> 数组。如果在 <a href="#oas-servers">OpenAPI Object</a>
                                级别指定了 <code>servers</code> 数组，则会被此值覆盖。</td>
                        </tr>
                        <tr>
                            <td><span id="path-item-parameters"></span>parameters</td>
                            <td style="text-align:center">[<a href="#parameter-object">Parameter Object</a> | <a
                                    href="#reference-object">Reference Object</a>]</td>
                            <td>适用于该路径下所有操作的参数列表。这些参数可以在操作级别被覆盖，但不能被删除。该列表 <em class="rfc2119">MUST NOT</em>
                                包含重复参数。唯一参数由 <a href="#parameter-name">name</a> 和 <a href="#parameter-in">location</a>
                                的组合定义。该列表可以使用 <a href="#reference-object">Reference Object</a> 链接到在 <a
                                    href="#components-parameters">OpenAPI Object 的
                                    <code>components.parameters</code></a> 中定义的参数。</td>
                        </tr>
                    </tbody>
                </table>
                <p>该对象 <em class="rfc2119">MAY</em> 可通过 <a href="#specification-extensions">规范扩展</a> 进行扩展。</p>
            </section>
            <section id="path-item-object-example">
                <div class="header-wrapper">
                    <h4 id="x4-9-2-path-item-object-example"><bdi class="secno">4.9.2 </bdi>Path Item 对象示例
                    </h4><a class="self-link" href="#path-item-object-example"
                        aria-label="Permalink for Section 4.9.2"></a>
                </div>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">get:</span>
  <span class="hljs-attr">description:</span> <span class="hljs-string">Returns</span> <span class="hljs-string">pets</span> <span class="hljs-string">based</span> <span class="hljs-string">on</span> <span class="hljs-string">ID</span>
  <span class="hljs-attr">summary:</span> <span class="hljs-string">Find</span> <span class="hljs-string">pets</span> <span class="hljs-string">by</span> <span class="hljs-string">ID</span>
  <span class="hljs-attr">operationId:</span> <span class="hljs-string">getPetsById</span>
  <span class="hljs-attr">responses:</span>
    <span class="hljs-attr">'200':</span>
      <span class="hljs-attr">description:</span> <span class="hljs-string">pet</span> <span class="hljs-string">response</span>
      <span class="hljs-attr">content:</span>
        <span class="hljs-attr">'*/*':</span>
          <span class="hljs-attr">schema:</span>
            <span class="hljs-attr">type:</span> <span class="hljs-string">array</span>
            <span class="hljs-attr">items:</span>
              <span class="hljs-string">$ref:</span> <span class="hljs-string">'#/components/schemas/Pet'</span>
    <span class="hljs-attr">default:</span>
      <span class="hljs-attr">description:</span> <span class="hljs-string">error</span> <span class="hljs-string">payload</span>
      <span class="hljs-attr">content:</span>
        <span class="hljs-attr">text/html:</span>
          <span class="hljs-attr">schema:</span>
            <span class="hljs-string">$ref:</span> <span class="hljs-string">'#/components/schemas/ErrorModel'</span>
<span class="hljs-attr">parameters:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">id</span>
    <span class="hljs-attr">in:</span> <span class="hljs-string">path</span>
    <span class="hljs-attr">description:</span> <span class="hljs-string">ID</span> <span class="hljs-string">of</span> <span class="hljs-string">pet</span> <span class="hljs-string">to</span> <span class="hljs-string">use</span>
    <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>
    <span class="hljs-attr">schema:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">array</span>
      <span class="hljs-attr">items:</span>
        <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
    <span class="hljs-attr">style:</span> <span class="hljs-string">simple</span>
<span class="hljs-attr">additionalOperations:</span>
  <span class="hljs-attr">COPY:</span>
    <span class="hljs-attr">description:</span> <span class="hljs-string">Copies</span> <span class="hljs-string">pet</span> <span class="hljs-string">information</span> <span class="hljs-string">based</span> <span class="hljs-string">on</span> <span class="hljs-string">ID</span>
    <span class="hljs-attr">summary:</span> <span class="hljs-string">Copies</span> <span class="hljs-string">pets</span> <span class="hljs-string">by</span> <span class="hljs-string">ID</span>
    <span class="hljs-attr">operationId:</span> <span class="hljs-string">copyPetsById</span>
    <span class="hljs-attr">responses:</span>
      <span class="hljs-attr">'200':</span>
        <span class="hljs-attr">description:</span> <span class="hljs-string">pet</span> <span class="hljs-string">response</span>
        <span class="hljs-attr">content:</span>
          <span class="hljs-attr">'*/*':</span>
            <span class="hljs-attr">schema:</span>
              <span class="hljs-attr">type:</span> <span class="hljs-string">array</span>
              <span class="hljs-attr">items:</span>
                <span class="hljs-string">$ref:</span> <span class="hljs-string">'#/components/schemas/Pet'</span>
      <span class="hljs-attr">default:</span>
        <span class="hljs-attr">description:</span> <span class="hljs-string">error</span> <span class="hljs-string">payload</span>
        <span class="hljs-attr">content:</span>
          <span class="hljs-attr">text/html:</span>
            <span class="hljs-attr">schema:</span>
              <span class="hljs-string">$ref:</span> <span class="hljs-string">'#/components/schemas/ErrorModel'</span>
</code></pre>
            </section>
        </section>
        <section id="operation-object">
            <div class="header-wrapper">
                <h3 id="x4-10-operation-object"><bdi class="secno">4.10 </bdi>Operation 对象</h3><a class="self-link"
                    href="#operation-object" aria-label="Permalink for Section 4.10"></a>
            </div>
            <p>描述路径上的单个 API 操作。</p>
            <section id="fixed-fields-7">
                <div class="header-wrapper">
                    <h4 id="x4-10-1-fixed-fields"><bdi class="secno">4.10.1 </bdi>固定字段</h4><a class="self-link"
                        href="#fixed-fields-7" aria-label="Permalink for Section 4.10.1"></a>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>字段名</th>
                            <th style="text-align:center">类型</th>
                            <th>描述</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><span id="operation-tags"></span>tags</td>
                            <td style="text-align:center">[<code>string</code>]</td>
                            <td>用于 API 文档控制的标签列表。标签可用于按资源或其他任意分类对操作进行逻辑分组。</td>
                        </tr>
                        <tr>
                            <td><span id="operation-summary"></span>summary</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td>对该操作所做内容的简短摘要。</td>
                        </tr>
                        <tr>
                            <td><span id="operation-description"></span>description</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td>对操作行为的详细说明。可以使用 [<cite><a class="bibref" data-link-type="biblio" href="#bib-commonmark"
                                        title="CommonMark Spec">CommonMark</a></cite>] 语法来进行富文本表示，<em
                                    class="rfc2119">MAY</em> 使用。</td>
                        </tr>
                        <tr>
                            <td><span id="operation-external-docs"></span>externalDocs</td>
                            <td style="text-align:center"><a href="#external-documentation-object">外部文档对象</a></td>
                            <td>该操作的补充外部文档。</td>
                        </tr>
                        <tr>
                            <td><span id="operation-id"></span>operationId</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td>用于标识操作的唯一字符串。该 id 在 API 中所有操作之间 <em class="rfc2119">MUST</em> 保持唯一。operationId
                                值是<strong>区分大小写</strong>的。工具和库 <em class="rfc2119">MAY</em> 使用 operationId
                                来唯一标识一个操作，因此建议遵循常见的编程命名约定。</td>
                        </tr>
                        <tr>
                            <td><span id="operation-parameters"></span>parameters</td>
                            <td style="text-align:center">[<a href="#parameter-object">Parameter Object</a> | <a
                                    href="#reference-object">Reference Object</a>]</td>
                            <td>适用于该操作的参数列表。如果参数已在 <a href="#path-item-parameters">Path Item</a> 中定义，新定义将覆盖它但永远不能移除它。该列表
                                <em class="rfc2119">MUST NOT</em> 包含重复参数。唯一参数由 <a href="#parameter-name">name</a> 和 <a
                                    href="#parameter-in">location</a> 的组合定义。该列表可以使用 <a
                                    href="#reference-object">Reference Object</a> 链接到在 <a
                                    href="#components-parameters">OpenAPI Object 的
                                    <code>components.parameters</code></a> 中定义的参数。
                            </td>
                        </tr>
                        <tr>
                            <td><span id="operation-request-body"></span>requestBody</td>
                            <td style="text-align:center"><a href="#request-body-object">Request Body Object</a> | <a
                                    href="#reference-object">Reference Object</a></td>
                            <td>适用于该操作的请求体。对于 HTTP 规范明确为请求体定义语义的 HTTP 方法（参见 HTTP 规范 [<cite><a class="bibref"
                                        data-link-type="biblio" href="#bib-rfc9110"
                                        title="HTTP Semantics">RFC9110</a></cite>] <a
                                    href="https://datatracker.ietf.org/doc/html/rfc9110#section-9.3">第 9.3
                                    节</a>），<code>requestBody</code> 完全受支持。在其他 HTTP 规范不鼓励包含消息内容的情况（例如 <a
                                    href="https://tools.ietf.org/html/rfc9110#section-9.3.1">GET</a> 和 <a
                                    href="https://tools.ietf.org/html/rfc9110#section-9.3.5">DELETE</a>），允许使用
                                <code>requestBody</code>，但其语义并不明确，<em class="rfc2119">SHOULD</em> 尽可能避免。
                            </td>
                        </tr>
                        <tr>
                            <td><span id="operation-responses"></span>responses</td>
                            <td style="text-align:center"><a href="#responses-object">Responses Object</a></td>
                            <td>执行该操作后可能返回的响应列表。</td>
                        </tr>
                        <tr>
                            <td><span id="operation-callbacks"></span>callbacks</td>
                            <td style="text-align:center">Map[<code>string</code>, <a href="#callback-object">Callback
                                    Object</a> | <a href="#reference-object">Reference Object</a>]</td>
                            <td>与父操作相关的可能的带外回调的映射。键是 Callback Object 的唯一标识符。映射中的每个值都是描述 API 提供者可能发起的请求以及预期响应的 <a
                                    href="#callback-object">Callback Object</a>。</td>
                        </tr>
                        <tr>
                            <td><span id="operation-deprecated"></span>deprecated</td>
                            <td style="text-align:center"><code>boolean</code></td>
                            <td>声明此操作已被弃用。消费者 <em class="rfc2119">SHOULD</em> 避免使用被声明的操作。默认值为 <code>false</code>。</td>
                        </tr>
                        <tr>
                            <td><span id="operation-security"></span>security</td>
                            <td style="text-align:center">[<a href="#security-requirement-object">Security Requirement
                                    Object</a>]</td>
                            <td>声明可用于此操作的安全机制。该值列表包含可替代使用的 Security Requirement Objects。只需满足其中一个 Security Requirement
                                Object 即可授权请求。要使安全成为可选项，可以在数组中包含一个空的安全需求（<code>{}</code>）。此定义会覆盖任何声明的顶级 <a
                                    href="#oas-security"><code>security</code></a>。要移除顶级安全声明，可以使用空数组。</td>
                        </tr>
                        <tr>
                            <td><span id="operation-servers"></span>servers</td>
                            <td style="text-align:center">[<a href="#server-object">Server Object</a>]</td>
                            <td>为此操作提供服务的替代 <code>servers</code> 数组。如果在 <a href="#path-item-servers">Path Item
                                    Object</a> 或 <a href="#oas-servers">OpenAPI Object</a> 级别指定了 <code>servers</code>
                                数组，它们将被此值覆盖。</td>
                        </tr>
                    </tbody>
                </table>
                <p>该对象 <em class="rfc2119">MAY</em> 可通过 <a href="#specification-extensions">规范扩展</a> 进行扩展。</p>
            </section>
            <section id="operation-object-example">
                <div class="header-wrapper">
                    <h4 id="x4-10-2-operation-object-example"><bdi class="secno">4.10.2 </bdi>Operation 对象示例
                    </h4><a class="self-link" href="#operation-object-example"
                        aria-label="Permalink for Section 4.10.2"></a>
                </div>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">tags:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">pet</span>
<span class="hljs-attr">summary:</span> <span class="hljs-string">Updates</span> <span class="hljs-string">a</span> <span class="hljs-string">pet</span> <span class="hljs-string">in</span> <span class="hljs-string">the</span> <span class="hljs-string">store</span> <span class="hljs-string">with</span> <span class="hljs-string">form</span> <span class="hljs-string">data</span>
<span class="hljs-attr">operationId:</span> <span class="hljs-string">updatePetWithForm</span>
<span class="hljs-attr">parameters:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">petId</span>
    <span class="hljs-attr">in:</span> <span class="hljs-string">path</span>
    <span class="hljs-attr">description:</span> <span class="hljs-string">ID</span> <span class="hljs-string">of</span> <span class="hljs-string">pet</span> <span class="hljs-string">that</span> <span class="hljs-string">needs</span> <span class="hljs-string">to</span> <span class="hljs-string">be</span> <span class="hljs-string">updated</span>
    <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>
    <span class="hljs-attr">schema:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
<span class="hljs-attr">requestBody:</span>
  <span class="hljs-attr">content:</span>
    <span class="hljs-attr">application/x-www-form-urlencoded:</span>
      <span class="hljs-attr">schema:</span>
        <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
        <span class="hljs-attr">properties:</span>
          <span class="hljs-attr">name:</span>
            <span class="hljs-attr">description:</span> <span class="hljs-string">Updated</span> <span class="hljs-string">name</span> <span class="hljs-string">of</span> <span class="hljs-string">the</span> <span class="hljs-string">pet</span>
            <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
          <span class="hljs-attr">status:</span>
            <span class="hljs-attr">description:</span> <span class="hljs-string">Updated</span> <span class="hljs-string">status</span> <span class="hljs-string">of</span> <span class="hljs-string">the</span> <span class="hljs-string">pet</span>
            <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
        <span class="hljs-attr">required:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">status</span>
<span class="hljs-attr">responses:</span>
  <span class="hljs-attr">'200':</span>
    <span class="hljs-attr">description:</span> <span class="hljs-string">Pet</span> <span class="hljs-string">updated.</span>
    <span class="hljs-attr">content:</span>
      <span class="hljs-attr">application/json:</span> {}
      <span class="hljs-attr">application/xml:</span> {}
  <span class="hljs-attr">'405':</span>
    <span class="hljs-attr">description:</span> <span class="hljs-string">Method</span> <span class="hljs-string">Not</span> <span class="hljs-string">Allowed</span>
    <span class="hljs-attr">content:</span>
      <span class="hljs-attr">application/json:</span> {}
      <span class="hljs-attr">application/xml:</span> {}
<span class="hljs-attr">security:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">petstore_auth:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">write:pets</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">read:pets</span>
</code></pre>
            </section>
        </section>
        <section id="external-documentation-object">
            <div class="header-wrapper">
                <h3 id="x4-11-external-documentation-object"><bdi class="secno">4.11 </bdi>外部文档对象
                </h3><a class="self-link" href="#external-documentation-object"
                    aria-label="Permalink for Section 4.11"></a>
            </div>
            <p>允许引用外部资源以获取扩展文档。</p>
            <section id="fixed-fields-8">
                <div class="header-wrapper">
                    <h4 id="x4-11-1-fixed-fields"><bdi class="secno">4.11.1 </bdi>固定字段</h4><a class="self-link"
                        href="#fixed-fields-8" aria-label="Permalink for Section 4.11.1"></a>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>字段名</th>
                            <th style="text-align:center">类型</th>
                            <th>描述</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><span id="external-doc-description"></span>description</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td>目标文档的描述。可以使用 [<cite><a class="bibref" data-link-type="biblio" href="#bib-commonmark"
                                        title="CommonMark Spec">CommonMark</a></cite>] 语法来进行富文本表示（<em
                                    class="rfc2119">MAY</em>）。</td>
                        </tr>
                        <tr>
                            <td><span id="external-doc-url"></span>url</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td><strong><em class="rfc2119">REQUIRED</em></strong>。目标文档的 URI。此项 <em
                                    class="rfc2119">MUST</em> 必须采用 URI 的形式。</td>
                        </tr>
                    </tbody>
                </table>
                <p>该对象 <em class="rfc2119">MAY</em> 可通过 <a href="#specification-extensions">规范扩展</a> 进行扩展。</p>
            </section>
            <section id="external-documentation-object-example">
                <div class="header-wrapper">
                    <h4 id="x4-11-2-external-documentation-object-example"><bdi class="secno">4.11.2 </bdi>外部文档对象示例</h4>
                    <a class="self-link" href="#external-documentation-object-example"
                        aria-label="Permalink for Section 4.11.2"></a>
                </div>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">description:</span> <span class="hljs-string">Find</span> <span class="hljs-string">more</span> <span class="hljs-string">info</span> <span class="hljs-string">here</span>
<span class="hljs-attr">url:</span> <span class="hljs-string">https://example.com</span>
</code></pre>
            </section>
        </section>
        <section id="parameter-object">
            <div class="header-wrapper">
                <h3 id="x4-12-parameter-object"><bdi class="secno">4.12 </bdi>参数对象</h3><a class="self-link"
                    href="#parameter-object" aria-label="Permalink for Section 4.12"></a>
            </div>
            <p>描述单个操作参数。</p>
            <p>唯一参数由 <a href="#parameter-name">name</a> 和 <a href="#parameter-in">location</a> 的组合定义。</p>
            <p>有关百分号编码问题的详细探讨（包括与 <code>application/x-www-form-urlencoded</code> 查询字符串格式的交互），请参阅 <a
                    href="#appendix-e-percent-encoding-and-form-media-types">附录 E</a>。</p>
            <section id="parameter-locations">
                <div class="header-wrapper">
                    <h4 id="x4-12-1-parameter-locations"><bdi class="secno">4.12.1 </bdi>参数位置</h4><a class="self-link"
                        href="#parameter-locations" aria-label="Permalink for Section 4.12.1"></a>
                </div>
                <p>由 <code>in</code> 字段指定的参数位置有五种：</p>
                <ul>
                    <li>path - 与 <a href="#path-templating">路径模板化</a> 一起使用，参数值实际上是操作的 URL 的一部分。这不包括 API 的主机或基路径。例如，在
                        <code>/items/{itemId}</code> 中，路径参数是 <code>itemId</code>。
                    </li>
                    <li>query - 附加到 URL 的参数。例如，在 <code>/items?id=###</code> 中，查询参数是 <code>id</code>；<em
                            class="rfc2119">MUST NOT</em> 与 <code>in: "querystring"</code> 参数在同一操作（或该操作的
                        path-item）中同时出现。</li>
                    <li>querystring - 将整个 URL 查询字符串视为一个值的参数，该值 <em class="rfc2119">MUST</em> 使用 <code>content</code>
                        字段指定，通常使用媒体类型 <code>application/x-www-form-urlencoded</code> 并使用 <a
                            href="#encoding-object">Encoding Objects</a>，与该媒体类型的请求体相同；<em class="rfc2119">MUST NOT</em>
                        出现多次，并且 <em class="rfc2119">MUST NOT</em> 与任何 <code>in: "query"</code> 参数在同一操作（或该操作的
                        path-item）中同时出现。</li>
                    <li>header - 作为请求一部分期望的自定义头。注意 [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc9110"
                                title="HTTP Semantics">RFC9110</a></cite>] <a
                            href="https://datatracker.ietf.org/doc/html/rfc9110#section-5.1">第 5.1 节</a> 指出，头名称不区分大小写。
                    </li>
                    <li>cookie - 用于将特定的 cookie 值传递给 API。</li>
                </ul>
            </section>
            <section id="fixed-fields-9">
                <div class="header-wrapper">
                    <h4 id="x4-12-2-fixed-fields"><bdi class="secno">4.12.2 </bdi>固定字段</h4><a class="self-link"
                        href="#fixed-fields-9" aria-label="Permalink for Section 4.12.2"></a>
                </div>
                <p>参数的序列化规则通过两种方式中的一种指定。Parameter Objects <em class="rfc2119">MUST</em> 包含 <code>content</code> 字段或
                    <code>schema</code> 字段，但不能同时包含两者。有关将各种类型的值转换为字符串表示的讨论，请参阅 <a
                        href="#appendix-b-data-type-conversion">附录 B</a>。
                </p>
                <section id="common-fixed-fields">
                    <div class="header-wrapper">
                        <h5 id="x4-12-2-1-common-fixed-fields"><bdi class="secno">4.12.2.1 </bdi>常用固定字段</h5><a
                            class="self-link" href="#common-fixed-fields"
                            aria-label="Permalink for Section 4.12.2.1"></a>
                    </div>
                    <p>这些字段 <em class="rfc2119">MAY</em> 与 <code>content</code> 或 <code>schema</code> 一起使用。</p>
                    <p><code>example</code> 与 <code>examples</code> 字段互斥；有关验证要求的指导，请参阅 <a
                            href="#working-with-examples">Working with Examples</a>。</p>
                    <table>
                        <thead>
                            <tr>
                                <th>字段名</th>
                                <th style="text-align:center">类型</th>
                                <th>描述</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><span id="parameter-name"></span>name</td>
                                <td style="text-align:center"><code>string</code></td>
                                <td><strong><em class="rfc2119">REQUIRED</em></strong>。参数的名称。参数名称区分大小写。
                                    <ul>
                                        <li>如果 <a href="#parameter-in"><code>in</code></a> 为 <code>"path"</code>，则
                                            <code>name</code> 字段 <em class="rfc2119">MUST</em> 对应于 <a
                                                href="#paths-path">Paths Object</a> 中 <a href="#paths-path">path</a>
                                            字段内出现的单个模板表达式。详见 <a href="#path-templating">Path Templating</a>。
                                        </li>
                                        <li>如果 <a href="#parameter-in"><code>in</code></a> 为 <code>"header"</code> 且
                                            <code>name</code> 字段为 <code>"Accept"</code>、<code>"Content-Type"</code> 或
                                            <code>"Authorization"</code>，则该参数定义 <em class="rfc2119">SHALL</em> 被忽略。
                                        </li>
                                        <li>如果 <code>in</code> 为 <code>"querystring"</code>，或在某些 <a
                                                href="#style-examples">style 与 explode 组合</a> 的情况下，参数序列化中不使用
                                            <code>name</code> 的值。
                                        </li>
                                        <li>在所有其他情况下，<code>name</code> 对应于由 <a href="#parameter-in"><code>in</code></a>
                                            字段使用的参数名称。</li>
                                    </ul>
                                </td>
                            </tr>
                            <tr>
                                <td><span id="parameter-in"></span>in</td>
                                <td style="text-align:center"><code>string</code></td>
                                <td><strong><em class="rfc2119">REQUIRED</em></strong>。参数的位置。可能的值为
                                    <code>"query"</code>、<code>"querystring"</code>、<code>"header"</code>、<code>"path"</code>
                                    或 <code>"cookie"</code>。
                                </td>
                            </tr>
                            <tr>
                                <td><span id="parameter-description"></span>description</td>
                                <td style="text-align:center"><code>string</code></td>
                                <td>参数的简短描述。可以包含使用示例。可以使用 [<cite><a class="bibref" data-link-type="biblio"
                                            href="#bib-commonmark" title="CommonMark Spec">CommonMark</a></cite>]
                                    语法进行富文本表示（<em class="rfc2119">MAY</em>）。</td>
                            </tr>
                            <tr>
                                <td><span id="parameter-required"></span>required</td>
                                <td style="text-align:center"><code>boolean</code></td>
                                <td>确定此参数是否为必需。如果参数位置为 <code>"path"</code>，此字段为 <strong><em
                                            class="rfc2119">REQUIRED</em></strong>，其值 <em class="rfc2119">MUST</em> 为
                                    <code>true</code>。否则，该字段 <em class="rfc2119">MAY</em> 包含，默认值为 <code>false</code>。
                                </td>
                            </tr>
                            <tr>
                                <td><span id="parameter-deprecated"></span> deprecated</td>
                                <td style="text-align:center"><code>boolean</code></td>
                                <td>指定参数已被弃用，应逐步停止使用（<em class="rfc2119">SHOULD</em>）。默认值为 <code>false</code>。</td>
                            </tr>
                            <tr>
                                <td><span id="parameter-allow-empty-value"></span> allowEmptyValue</td>
                                <td style="text-align:center"><code>boolean</code></td>
                                <td>如果为 <code>true</code>，客户端 <em class="rfc2119">MAY</em> 传递空字符串作为参数值（代替完全省略参数），服务器 <em
                                        class="rfc2119">SHOULD</em> 将其解释为参数未使用。默认值为 <code>false</code>。如果使用了 <a
                                        href="#parameter-style"><code>style</code></a>，且 <a
                                        href="#style-examples">序列化行为为 <em>n/a</em>（无法序列化）</a>，则
                                    <code>allowEmptyValue</code> 的值 <em class="rfc2119">SHALL</em> 被忽略。该字段与参数的 <a
                                        href="#schema-object">Schema Object</a> 之间的交互由实现定义。此字段仅对 <code>query</code>
                                    参数有效。<br><br><strong>已弃用：</strong>不建议使用该字段（<em class="rfc2119">NOT
                                        RECOMMENDED</em>），并且可能在将来版本中被移除。
                                </td>
                            </tr>
                            <tr>
                                <td><span id="parameter-example"></span>example</td>
                                <td style="text-align:center">Any</td>
                                <td>参数的可能值示例；参见 <a href="#working-with-examples">Working With Examples</a>。</td>
                            </tr>
                            <tr>
                                <td><span id="parameter-examples"></span>examples</td>
                                <td style="text-align:center">Map[ <code>string</code>, <a
                                        href="#example-object">Example Object</a> | <a
                                        href="#reference-object">Reference Object</a>]</td>
                                <td>参数的可能值示例集合；参见 <a href="#working-with-examples">Working With Examples</a>。</td>
                            </tr>
                        </tbody>
                    </table>
                    <p>该对象 <em class="rfc2119">MAY</em> 可通过 <a href="#specification-extensions">规范扩展</a> 进行扩展。</p>
                    <p>注意，虽然如果 <code>in</code> 为 <code>"header"</code> 时 <code>"Cookie"</code> 作为 <code>name</code>
                        并非被禁止，但这样定义 cookie 参数的效果是未定义的；应使用 <code>in: "cookie"</code>。</p>
                </section>
                <section id="fixed-fields-for-use-with-schema">
                    <div class="header-wrapper">
                        <h5 id="x4-12-2-2-fixed-fields-for-use-with-schema"><bdi class="secno">4.12.2.2 </bdi>与
                            <code>schema</code> 一起使用的固定字段
                        </h5><a class="self-link" href="#fixed-fields-for-use-with-schema"
                            aria-label="Permalink for Section 4.12.2.2"></a>
                    </div>
                    <p>对于简单场景，<a href="#parameter-schema"><code>schema</code></a> 和 <a
                            href="#parameter-style"><code>style</code></a> 可以描述参数的结构和语法。</p>
                    <p>这些字段 <em class="rfc2119">MUST NOT</em> 与 <code>in: "querystring"</code> 一起使用。</p>
                    <p>对于具有 <code>schema</code> 且 <code>in: "header"</code> 或 <code>in: "cookie", style: "cookie"</code>
                        的参数，需要注意：</p>
                    <ul>
                        <li>序列化这些值时，不应应用 URI 百分号编码（<em class="rfc2119">MUST NOT</em>）。</li>
                        <li>解析这些参数时，任何看起来像百分号编码的内容都不应被解码（<em class="rfc2119">MUST NOT</em>）。</li>
                        <li>如果使用的 RFC6570 实现自动执行编码或解码步骤，则在使用之前必须撤销这些步骤（<em class="rfc2119">MUST</em>）。</li>
                    </ul>
                    <p>在这些情况下，实现 <em class="rfc2119">MUST</em> 原样传递值，而不是尝试对其进行引用或转义，因为头和 cookie
                        的引用规则与转义约定差异太大，无法自动处理；有关引用和转义的指导，请参见 <a href="#appendix-d-serializing-headers-and-cookies">附录
                            D</a>。</p>
                    <table>
                        <thead>
                            <tr>
                                <th>字段名</th>
                                <th style="text-align:center">类型</th>
                                <th>描述</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><span id="parameter-style"></span>style</td>
                                <td style="text-align:center"><code>string</code></td>
                                <td>描述参数值将如何根据参数类型进行序列化。默认值（基于 <code>in</code> 的取值）：对于 <code>"query"</code> 为
                                    <code>"form"</code>；对于 <code>"path"</code> 为 <code>"simple"</code>；对于
                                    <code>"header"</code> 为 <code>"simple"</code>；对于 <code>"cookie"</code> 为
                                    <code>"form"</code>（出于兼容性原因；注意应与 <code>in: "cookie"</code> 一起使用
                                    <code>style: "cookie"</code>；详见 <a
                                        href="#appendix-d-serializing-headers-and-cookies">附录 D</a>）。
                                </td>
                            </tr>
                            <tr>
                                <td><span id="parameter-explode"></span>explode</td>
                                <td style="text-align:center"><code>boolean</code></td>
                                <td>当为 true 时，类型为 <code>array</code> 或 <code>object</code>
                                    的参数会为数组的每个值或对象的每个键值对产生独立的参数。对于其他类型或当 <a
                                        href="#parameter-style"><code>style</code></a> 为 <code>"deepObject"</code>
                                    时，此字段无效。若 <code>style</code> 为 <code>"form"</code> 或 <code>"cookie"</code>，默认值为
                                    <code>true</code>；对于其他样式，默认值为 <code>false</code>。
                                </td>
                            </tr>
                            <tr>
                                <td><span id="parameter-allow-reserved"></span>allowReserved</td>
                                <td style="text-align:center"><code>boolean</code></td>
                                <td>当为 true 时，参数值按 [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc6570"
                                            title="URI Template">RFC6570</a></cite>] 定义的保留扩展进行序列化（参见 <a
                                        href="https://datatracker.ietf.org/doc/html/rfc6570#section-3.2.3">Section
                                        3.2.3</a>），这允许 RFC3986 的保留字符集以及百分号编码的三元组保持不变，同时对所有其他不允许的字符进行百分号编码（包括百分号
                                    <code>%</code>，若其不属于百分号编码三元组）。应用仍需对目标位置或媒体类型不允许的保留字符进行百分号编码，或对 <a
                                        href="#path-templating">本规范不允许出现在路径中的字符</a> 进行处理；详见 <a
                                        href="#url-percent-encoding">URL 百分号编码</a>。默认值为
                                    <code>false</code>。此字段仅适用于会自动进行百分号编码的 <code>in</code> 与 <code>style</code> 值。
                                </td>
                            </tr>
                            <tr>
                                <td><span id="parameter-schema"></span>schema</td>
                                <td style="text-align:center"><a href="#schema-object">Schema Object</a></td>
                                <td>定义参数使用类型的 schema。</td>
                            </tr>
                        </tbody>
                    </table>
                    <p>另请参见 <a href="#appendix-c-using-rfc6570-based-serialization">附录 C：使用基于 RFC6570 的序列化</a> 以获取更多指导。
                    </p>
                </section>
                <section id="fixed-fields-for-use-with-content">
                    <div class="header-wrapper">
                        <h5 id="x4-12-2-3-fixed-fields-for-use-with-content"><bdi class="secno">4.12.2.3 </bdi>与
                            <code>content</code> 一起使用的固定字段
                        </h5><a class="self-link" href="#fixed-fields-for-use-with-content"
                            aria-label="Permalink for Section 4.12.2.3"></a>
                    </div>
                    <p>对于更复杂的场景，<a href="#parameter-content"><code>content</code></a> 字段可定义参数的媒体类型和 schema，并提供其使用示例。</p>
                    <p>对于 <code>in: "querystring"</code> 和 <code>application/x-www-form-urlencoded</code> 的使用，请参见 <a
                            href="#encoding-the-x-www-form-urlencoded-media-type">Encoding the
                            <code>x-www-form-urlencoded</code> Media Type</a>。</p>
                    <table>
                        <thead>
                            <tr>
                                <th>字段名</th>
                                <th style="text-align:center">类型</th>
                                <th>描述</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><span id="parameter-content"></span>content</td>
                                <td style="text-align:center">Map[<code>string</code>, <a
                                        href="#media-type-object">Media Type Object</a> | <a
                                        href="#reference-object">Reference Object</a>]</td>
                                <td>包含参数表示形式的映射。键是媒体类型，值描述该媒体类型。该映射 <em class="rfc2119">MUST</em> 只能包含一项条目。</td>
                            </tr>
                        </tbody>
                    </table>
                </section>
            </section>
            <section id="style-values">
                <div class="header-wrapper">
                    <h4 id="x4-12-3-style-values"><bdi class="secno">4.12.3 </bdi>样式值</h4><a class="self-link"
                        href="#style-values" aria-label="Permalink for Section 4.12.3"></a>
                </div>
                <p>为了支持常见的简单参数序列化方式，定义了一组 <code>style</code> 值。表中未表示的组合是不允许的。</p>
                <table>
                    <thead>
                        <tr>
                            <th><code>style</code></th>
                            <th><a href="#data-types"><code>type</code></a></th>
                            <th><code>in</code></th>
                            <th>说明</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>matrix</code></td>
                            <td>primitive, <code>array</code>, <code>object</code></td>
                            <td><code>path</code></td>
                            <td>路径样式参数，由 [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc6570"
                                        title="URI Template">RFC6570</a></cite>] 定义的第 <a
                                    href="https://datatracker.ietf.org/doc/html/rfc6570#section-3.2.7">3.2.7 节</a> 所描述。
                            </td>
                        </tr>
                        <tr>
                            <td><code>label</code></td>
                            <td>primitive, <code>array</code>, <code>object</code></td>
                            <td><code>path</code></td>
                            <td>标签样式参数，由 RFC6570 定义（参见 <a
                                    href="https://datatracker.ietf.org/doc/html/rfc6570#section-3.2.5">3.2.5 节</a>）。
                            </td>
                        </tr>
                        <tr>
                            <td><code>simple</code></td>
                            <td>primitive, <code>array</code>, <code>object</code></td>
                            <td><code>path</code>, <code>header</code></td>
                            <td>简单样式参数，由 RFC6570 定义（参见 <a
                                    href="https://datatracker.ietf.org/doc/html/rfc6570#section-3.2.2">3.2.2
                                    节</a>）。此选项替代 OpenAPI 2.0 中的 <code>collectionFormat</code> 的 <code>csv</code> 值。</td>
                        </tr>
                        <tr>
                            <td><code>form</code></td>
                            <td>primitive, <code>array</code>, <code>object</code></td>
                            <td><code>query</code>, <code>cookie</code></td>
                            <td>表单样式参数，由 RFC6570 定义（参见 <a
                                    href="https://datatracker.ietf.org/doc/html/rfc6570#section-3.2.8">3.2.8 节</a>）。此选项在
                                OpenAPI 2.0 中替代了 <code>collectionFormat</code> 的 <code>csv</code>（当 <code>explode</code>
                                为 false）或 <code>multi</code>（当 <code>explode</code> 为 true）。</td>
                        </tr>
                        <tr>
                            <td><code>spaceDelimited</code></td>
                            <td><code>array</code>, <code>object</code></td>
                            <td><code>query</code></td>
                            <td>以空格分隔的数组值或对象属性与值。此选项替代 OpenAPI 2.0 中 <code>collectionFormat</code> 等于 <code>ssv</code>
                                的情形。</td>
                        </tr>
                        <tr>
                            <td><code>pipeDelimited</code></td>
                            <td><code>array</code>, <code>object</code></td>
                            <td><code>query</code></td>
                            <td>以竖线（|）分隔的数组值或对象属性与值。此选项替代 OpenAPI 2.0 中 <code>collectionFormat</code> 等于
                                <code>pipes</code> 的情形。
                            </td>
                        </tr>
                        <tr>
                            <td><code>deepObject</code></td>
                            <td><code>object</code></td>
                            <td><code>query</code></td>
                            <td>允许使用表单参数表示具有标量属性的对象。数组或对象属性的表示未定义（但参见 <a
                                    href="#extending-support-for-querystring-formats">扩展对 Querystring 格式的支持</a> 获取替代方案）。
                            </td>
                        </tr>
                        <tr>
                            <td><code>cookie</code></td>
                            <td>primitive, <code>array</code>, <code>object</code></td>
                            <td><code>cookie</code></td>
                            <td>与 <code>form</code> 类似，但遵循 [<cite><a class="bibref" data-link-type="biblio"
                                        href="#bib-rfc6265" title="HTTP State Management Mechanism">RFC6265</a></cite>]
                                的 <code>Cookie</code> 语法规则，表示 name=value 对由分号加单空格分隔（例如
                                <code>n1=v1; n2=v2</code>），且不应用百分号编码或其他转义；需要任何转义的值 <em class="rfc2119">MUST</em>
                                以转义形式提供。
                            </td>
                        </tr>
                    </tbody>
                </table>
            </section>
            <section id="url-percent-encoding">
                <div class="header-wrapper">
                    <h4 id="x4-12-4-url-percent-encoding"><bdi class="secno">4.12.4 </bdi>URL 百分号编码</h4><a
                        class="self-link" href="#url-percent-encoding" aria-label="Permalink for Section 4.12.4"></a>
                </div>
                <p>所有 API URL <em class="rfc2119">MUST</em> 能够根据 [<cite><a class="bibref" data-link-type="biblio"
                            href="#bib-rfc3986"
                            title="Uniform Resource Identifier (URI): Generic Syntax">RFC3986</a></cite>]
                    的规则成功解析并进行百分号解码。</p>
                <p>以 <code>application/x-www-form-urlencoded</code> 格式的内容，包括由具有 <code>in: "query"</code> 的 <a
                        href="#parameter-object">Parameter Objects</a> 生成的查询字符串，也 <em class="rfc2119">MUST</em> 能够根据
                    [<cite><a class="bibref" data-link-type="biblio" href="#bib-whatwg-url"
                            title="URL Standard">WHATWG-URL</a></cite>] 的规则成功解析并进行百分号解码，其中将未百分号编码的 <code>+</code>
                    视为已转义的空格字符。</p>
                <p>这些要求以百分号解码规则来指定，这些规则在适用于 URI 的不同标准版本之间保持一致的容错性。</p>
                <p>在若干场景下会执行百分号编码：</p>
                <ul>
                    <li>由 [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc6570"
                                title="URI Template">RFC6570</a></cite>] 实现（或其模拟，详见 <a
                            href="#appendix-c-using-rfc6570-based-serialization">附录 C</a>）执行。</li>
                    <li>当参数或 <a href="#encoding-object">Encoding</a> 对象将通过 <a href="#media-type-object">Media Type
                            Object</a> 序列化的值合入时执行（若该媒体类型未包含 URI 百分号编码）。</li>
                    <li>由用户在将数据传入 RFC6570 的保留扩展流程之前自行执行。</li>
                </ul>
                <p>执行百分号编码时，最安全的方法是对 RFC3986 的“unreserved”集合之外的所有字符进行百分号编码；对于
                    form-urlencoded，还应对波浪号（<code>~</code>）进行百分号编码，以与源自 RFC1738 的历史要求保持一致。本规范中的示例采用了这种做法。</p>
                <p>对于 form-urlencoded，尽管 [<cite><a class="bibref" data-link-type="biblio" href="#bib-whatwg-url"
                            title="URL Standard">WHATWG-URL</a></cite>] 的算法要求将空格转义为 <code>+</code>，将空格百分号编码为
                    <code>%20</code> 也符合上述要求。在使用 RFC6570 的默认（非保留）表单样式扩展时，本规范示例会更倾向于使用 <code>%20</code>，否则使用
                    <code>+</code>。
                </p>
                <p>当保留字符用于保留用途（例如在 form-urlencoded 中的 <code>&amp;=+</code>，或在 RFC6570 扩展中用于分隔非爆炸数组与对象值的
                    <code>,</code>）时，不应对这些保留字符进行百分号编码（<em class="rfc2119">MUST NOT</em>）。通过手动百分号编码将未编码的分隔符插入数据（包括通过
                    RFC6570 的保留扩展规则）所得结果是未定义的，并且可能导致实现无法将其解析回正确的数据结构。在某些情况下，例如将 <code>/</code> 插入路径参数值，本规范 <a
                        href="#path-templating">明确禁止</a> 这样做。
                </p>
                <p>另见：</p>
                <ul>
                    <li><a href="#appendix-c-using-rfc6570-based-serialization">附录 C</a>，有关使用或模拟/扩展 RFC6570 实现的指导。</li>
                    <li><a href="#appendix-d-serializing-headers-and-cookies">附录 D</a>，有关百分号编码与 cookies 的指导，以及头和 cookie
                        的其他转义方法。</li>
                    <li><a href="#appendix-e-percent-encoding-and-form-media-types">附录 E</a>，对百分号编码选项、兼容性以及处理 OAS 定义的但不被
                        RFC3986 允许的分隔符的详尽讨论。</li>
                </ul>
            </section>
            <section id="serialization-and-examples">
                <div class="header-wrapper">
                    <h4 id="x4-12-5-serialization-and-examples"><bdi class="secno">4.12.5 </bdi>序列化与示例</h4><a
                        class="self-link" href="#serialization-and-examples"
                        aria-label="Permalink for Section 4.12.5"></a>
                </div>
                <p>本节的规则适用于 Parameter 与 <a href="#header-object">Header</a> 对象，它们使用相同的机制。</p>
                <p>在展示序列化示例时，例如在 <a href="#example-object">Example Object</a> 的 <code>serializedValue</code> 或
                    <code>externalValue</code> 字段中，在大多数情况下应显示实际序列化后的值，包含所有相关的百分号编码或其他编码/转义，并包括由 <code>style</code> 与
                    <code>explode</code> 产生的任何分隔符。
                </p>
                <p>在名称本身是构造序列化的一部分的情况下（例如由 <code>style: "form"</code> 生成的 <code>name=value</code> 对，或
                    <code>style: "simple", explode: true</code> 的组合），必须包含名称以及名称与值之间的任何分隔符（<em
                        class="rfc2119">MUST</em>）。
                </p>
                <p><code>matrix</code> 与 <code>label</code> 样式会产生始终为有效序列化一部分的前导分隔符，该分隔符必须包含。对应
                    <code>style: "form"</code> 的 RFC6570 运算符会生成 <code>?</code> 或 <code>&amp;</code>
                    之一作为前导分隔符，具体取决于所使用的语法。由于是否应使用哪种分隔符依赖于参数在查询字符串中的位置以及它是在 URI 中还是在
                    <code>application/x-www-form-urlencoded</code> 内容中，因此在单个参数或媒体类型文档的示例中不得包含该前导分隔符（<em
                        class="rfc2119">MUST NOT</em>）。对于 <code>in: "cookie", style: "form"</code>，既不是
                    <code>&amp;</code> 也不是 <code>?</code> 分隔符适用；详见 <a
                        href="#appendix-d-serializing-headers-and-cookies">附录 D：序列化头和 Cookies</a>。
                </p>
                <p>对于头部，序列化中不得包含头名（<em class="rfc2119">MUST NOT</em>），因为头名从不属于 RFC6570 导出的结果的一部分。然而，由
                    <code>style: "simple", explode: "true"</code> 生成的名称会作为头值的一部分出现，但不是作为独立头。关于 <code>Set-Cookie</code>
                    响应头示例的特殊规则，请参见 <a href="#header-object">Header Object</a>。
                </p>
            </section>
            <section id="style-examples">
                <div class="header-wrapper">
                    <h4 id="x4-12-6-style-examples"><bdi class="secno">4.12.6 </bdi>样式示例</h4><a class="self-link"
                        href="#style-examples" aria-label="Permalink for Section 4.12.6"></a>
                </div>
                <p>假设名为 <code>color</code> 的参数有下列值之一，箭头右侧的内容表示在 Example Object 的 <code>dataValue</code> 字段中会显示的值：</p>
                <pre class="nohighlight" tabindex="0"><code>   string -&gt; <span class="hljs-string">"blue"</span>
   array -&gt; [<span class="hljs-string">"blue"</span>, <span class="hljs-string">"black"</span>, <span class="hljs-string">"brown"</span>]
   object -&gt; { <span class="hljs-string">"R"</span>: <span class="hljs-number">100</span>, <span class="hljs-string">"G"</span>: <span class="hljs-number">200</span>, <span class="hljs-string">"B"</span>: <span class="hljs-number">150</span> }
</code></pre>
                <p>下表展示了不同值的序列化示例（如在 Example Object 的 <code>serializedValue</code> 字段中所示）。</p>
                <ul>
                    <li>值 <em>empty</em> 表示空字符串，与 <code>allowEmptyValue</code> 字段无关。</li>
                    <li>标记为 <em>n/a</em> 的组合其行为未定义。</li>
                    <li><code>undefined</code> 列替代了以前规范中的 <code>empty</code> 列，以更好地与 RFC6570 的术语对齐，RFC6570 描述了包括但不限于
                        <code>null</code> 的“未定义”值具有特殊处理；值得注意的是，空字符串并非未定义。
                    </li>
                    <li>关于 <code>form</code> 与非 RFC6570 的查询字符串样式 <code>spaceDelimited</code>、<code>pipeDelimited</code>
                        和 <code>deepObject</code>，请参见 <a href="#appendix-c-using-rfc6570-based-serialization">附录
                            C</a>，了解如何从多个参数构造查询字符串，以及参见 <a href="#appendix-d-serializing-headers-and-cookies">附录
                            D</a>，了解关于 <code>form</code> 与 <code>cookie</code> 参数的警告。</li>
                    <li>示例根据上文的 <a href="#url-percent-encoding">URL 百分号编码</a> 部分进行百分号编码；有关百分号编码问题的详细讨论请参见 <a
                            href="#appendix-e-percent-encoding-and-form-media-types">附录 E</a>，其中包括为什么未编码的
                        <code>|</code>（<code>%7C</code>）、<code>[</code>（<code>%5B</code>）和
                        <code>]</code>（<code>%5D</code>）在某些环境中似乎可用但并不合规的原因。
                    </li>
                </ul>
                <table>
                    <thead>
                        <tr>
                            <th><a href="#style-values"><code>style</code></a></th>
                            <th><code>explode</code></th>
                            <th><code>undefined</code></th>
                            <th><code>string</code></th>
                            <th><code>array</code></th>
                            <th><code>object</code></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>matrix</td>
                            <td>false</td>
                            <td>;color</td>
                            <td>;color=blue</td>
                            <td>;color=blue,black,brown</td>
                            <td>;color=R,100,G,200,B,150</td>
                        </tr>
                        <tr>
                            <td>matrix</td>
                            <td>true</td>
                            <td>;color</td>
                            <td>;color=blue</td>
                            <td>;color=blue;color=black;color=brown</td>
                            <td>;R=100;G=200;B=150</td>
                        </tr>
                        <tr>
                            <td>label</td>
                            <td>false</td>
                            <td>.</td>
                            <td>.blue</td>
                            <td>.blue,black,brown</td>
                            <td>.R,100,G,200,B,150</td>
                        </tr>
                        <tr>
                            <td>label</td>
                            <td>true</td>
                            <td>.</td>
                            <td>.blue</td>
                            <td>.blue.black.brown</td>
                            <td>.R=100.G=200.B=150</td>
                        </tr>
                        <tr>
                            <td>simple</td>
                            <td>false</td>
                            <td><em>empty</em></td>
                            <td>blue</td>
                            <td>blue,black,brown</td>
                            <td>R,100,G,200,B,150</td>
                        </tr>
                        <tr>
                            <td>simple</td>
                            <td>true</td>
                            <td><em>empty</em></td>
                            <td>blue</td>
                            <td>blue,black,brown</td>
                            <td>R=100,G=200,B=150</td>
                        </tr>
                        <tr>
                            <td>form</td>
                            <td>false</td>
                            <td><span style="white-space: nowrap;">color=</span></td>
                            <td><span style="white-space: nowrap;">color=blue</span></td>
                            <td><span style="white-space: nowrap;">color=blue,black,brown</span></td>
                            <td><span style="white-space: nowrap;">color=R,100,G,200,B,150</span></td>
                        </tr>
                        <tr>
                            <td>form</td>
                            <td>true</td>
                            <td><span style="white-space: nowrap;">color=</span></td>
                            <td><span style="white-space: nowrap;">color=blue</span></td>
                            <td><span style="white-space: nowrap;">color=blue&amp;color=black&amp;color=brown</span>
                            </td>
                            <td><span style="white-space: nowrap;">R=100&amp;G=200&amp;B=150</span></td>
                        </tr>
                        <tr>
                            <td>spaceDelimited</td>
                            <td>false</td>
                            <td><em>n/a</em></td>
                            <td><em>n/a</em></td>
                            <td><span style="white-space: nowrap;">color=blue%20black%20brown</span></td>
                            <td><span style="white-space: nowrap;">color=R%20100%20G%20200%20B%20150</span></td>
                        </tr>
                        <tr>
                            <td>spaceDelimited</td>
                            <td>true</td>
                            <td><em>n/a</em></td>
                            <td><em>n/a</em></td>
                            <td><em>n/a</em></td>
                            <td><em>n/a</em></td>
                        </tr>
                        <tr>
                            <td>pipeDelimited</td>
                            <td>false</td>
                            <td><em>n/a</em></td>
                            <td><em>n/a</em></td>
                            <td><span style="white-space: nowrap;">color=blue%7Cblack%7Cbrown</span></td>
                            <td><span style="white-space: nowrap;">color=R%7C100%7CG%7C200%7CB%7C150</span></td>
                        </tr>
                        <tr>
                            <td>pipeDelimited</td>
                            <td>true</td>
                            <td><em>n/a</em></td>
                            <td><em>n/a</em></td>
                            <td><em>n/a</em></td>
                            <td><em>n/a</em></td>
                        </tr>
                        <tr>
                            <td>deepObject</td>
                            <td><em>n/a</em></td>
                            <td><em>n/a</em></td>
                            <td><em>n/a</em></td>
                            <td><em>n/a</em></td>
                            <td><span
                                    style="white-space: nowrap;">color%5BR%5D=100&amp;color%5BG%5D=200&amp;color%5BB%5D=150</span>
                            </td>
                        </tr>
                        <tr>
                            <td>cookie</td>
                            <td>false</td>
                            <td><span style="white-space: nowrap;">color=</span></td>
                            <td><span style="white-space: nowrap;">color=blue</span></td>
                            <td><span style="white-space: nowrap;">color=blue,black,brown</span></td>
                            <td><span style="white-space: nowrap;">color=R,100,G,200,B,150</span></td>
                        </tr>
                        <tr>
                            <td>cookie</td>
                            <td>true</td>
                            <td><span style="white-space: nowrap;">color=</span></td>
                            <td><span style="white-space: nowrap;">color=blue</span></td>
                            <td><span style="white-space: nowrap;">color=blue; color=black; color=brown</span></td>
                            <td><span style="white-space: nowrap;">R=100; G=200; B=150</span></td>
                        </tr>
                    </tbody>
                </table>
            </section>
            <section id="extending-support-for-querystring-formats">
                <div class="header-wrapper">
                    <h4 id="x4-12-7-extending-support-for-querystring-formats"><bdi class="secno">4.12.7 </bdi>扩展对
                        Querystring 格式的支持</h4><a class="self-link" href="#extending-support-for-querystring-formats"
                        aria-label="Permalink for Section 4.12.7"></a>
                </div>
                <p>许多框架定义了用于复杂值的查询字符串语法，例如在参数名后追加数组索引或表示多层嵌套对象，这些超出了 <code>deepObject</code> 的能力范围。</p>
                <p>由于这些并非标准且常互相冲突，OAS 并不尝试直接支持它们。对于使用 <code>in: "querystring"</code> 的此类格式，有两种可行途径：</p>
                <ul>
                    <li>使用 <code>content</code> 并将媒体类型设为 <code>text/plain</code>，schema 为 <code>type: "string"</code>，并在
                        OpenAPI 之外定义格式。虽然这需要更多的工作来描述和构造或解析该格式（从 OpenAPI 视角看这是一个普通字符串），但它提供了最灵活的选项。</li>
                    <li>定义一种媒体类型（不必是 IANA 注册的），以及将内存中数据映射到该序列化媒体类型的过程。为提高跨工具支持的可能性，可将该媒体类型和过程提交至 OpenAPI Initiative 的 <a
                            href="#openapi-media-type-registry">媒体类型注册表</a> 进行注册。</li>
                </ul>
            </section>
            <section id="parameter-object-examples">
                <div class="header-wrapper">
                    <h4 id="x4-12-8-parameter-object-examples"><bdi class="secno">4.12.8 </bdi>参数对象示例</h4><a
                        class="self-link" href="#parameter-object-examples"
                        aria-label="Permalink for Section 4.12.8"></a>
                </div>
                <p>一个包含 64 位整数数组的头参数示例：</p>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">name:</span> <span class="hljs-string">X-Token</span>
<span class="hljs-attr">in:</span> <span class="hljs-string">header</span>
<span class="hljs-attr">description:</span> <span class="hljs-string">token</span> <span class="hljs-string">to</span> <span class="hljs-string">be</span> <span class="hljs-string">passed</span> <span class="hljs-string">as</span> <span class="hljs-string">a</span> <span class="hljs-string">header</span>
<span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>
<span class="hljs-attr">schema:</span>
  <span class="hljs-attr">type:</span> <span class="hljs-string">array</span>
  <span class="hljs-attr">items:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">integer</span>
    <span class="hljs-attr">format:</span> <span class="hljs-string">int64</span>
<span class="hljs-attr">style:</span> <span class="hljs-string">simple</span>
<span class="hljs-attr">examples:</span>
  <span class="hljs-attr">Tokens:</span>
    <span class="hljs-attr">dataValue:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-number">12345678</span>
      <span class="hljs-bullet">-</span> <span class="hljs-number">90099</span>
    <span class="hljs-attr">serializedValue:</span> <span class="hljs-string">"12345678,90099"</span>
</code></pre>
                <p>一个使用爆炸对象的 cookie 参数（对于 <code>style: "cookie"</code> 默认即为爆炸）：</p>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">name:</span> <span class="hljs-string">cookie</span>
<span class="hljs-attr">in:</span> <span class="hljs-string">cookie</span>
<span class="hljs-attr">style:</span> <span class="hljs-string">cookie</span>
<span class="hljs-attr">schema:</span>
  <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
  <span class="hljs-attr">properties:</span>
    <span class="hljs-attr">greeting:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
    <span class="hljs-attr">code:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">integer</span>
      <span class="hljs-attr">minimum:</span> <span class="hljs-number">0</span>
<span class="hljs-attr">examples:</span>
  <span class="hljs-attr">Object:</span>
    <span class="hljs-attr">description:</span> <span class="hljs-string">|
        Note that the comma (,) has been pre-percent-encoded
        to "%2C" in the data, as it is forbidden in
        cookie values.  However, the exclamation point (!)
        is legal in cookies, so it can be left unencoded.
</span>    <span class="hljs-attr">dataValue:</span>
      <span class="hljs-attr">greeting:</span> <span class="hljs-string">Hello%2C</span> <span class="hljs-string">world!</span>
      <span class="hljs-attr">code:</span> <span class="hljs-number">42</span>
    <span class="hljs-attr">serializedValue:</span> <span class="hljs-string">"greeting=Hello%2C world!; code=42"</span>
</code></pre>
                <p>一个依赖于默认 <code>style: "form"</code> 的百分号编码行为的 cookie 参数示例：</p>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">name:</span> <span class="hljs-string">greeting</span>
<span class="hljs-attr">in:</span> <span class="hljs-string">cookie</span>
<span class="hljs-attr">schema:</span>
  <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
<span class="hljs-attr">examples:</span>
  <span class="hljs-attr">Greeting:</span>
    <span class="hljs-attr">description:</span> <span class="hljs-string">|
      Note that in this approach, RFC6570's percent-encoding
      process applies, so unsafe characters are not
      pre-percent-encoded.  This results in all non-URL-safe
      characters, rather than just the one non-cookie-safe
      character, getting percent-encoded.
</span>    <span class="hljs-attr">dataValue:</span> <span class="hljs-string">Hello,</span> <span class="hljs-string">world!</span>
    <span class="hljs-attr">serializedValue:</span> <span class="hljs-string">"greeting=Hello%2C%20world%21"</span>
</code></pre>
                <p>一个字符串类型的路径参数示例：</p>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">name:</span> <span class="hljs-string">username</span>
<span class="hljs-attr">in:</span> <span class="hljs-string">path</span>
<span class="hljs-attr">description:</span> <span class="hljs-string">username</span> <span class="hljs-string">to</span> <span class="hljs-string">fetch</span>
<span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>
<span class="hljs-attr">schema:</span>
  <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
<span class="hljs-attr">examples:</span>
  <span class="hljs-attr">"Edsger Dijkstra":</span>
    <span class="hljs-attr">dataValue:</span> <span class="hljs-string">edijkstra</span>
    <span class="hljs-attr">serializedValue:</span> <span class="hljs-string">edijkstra</span>
  <span class="hljs-string">Diṅnāga:</span>
    <span class="hljs-attr">dataValue:</span> <span class="hljs-string">diṅnāga</span>
    <span class="hljs-attr">serializedValue:</span> <span class="hljs-string">di%E1%B9%85n%C4%81ga</span>
  <span class="hljs-attr">Al-Khwarizmi:</span>
    <span class="hljs-attr">dataValue:</span> <span class="hljs-string">"الخوارزميّ"</span>
    <span class="hljs-attr">serializedValue:</span> <span class="hljs-string">"%D8%A7%D9%84%D8%AE%D9%88%D8%A7%D8%B1%D8%B2%D9%85%D9%8A%D9%91"</span>
</code></pre>
                <p>一个可选的字符串查询参数，允许通过重复查询参数来提供多个值（注意这里使用 <code>"%20"</code> 代替空格，因为这是 RFC6570 的处理方式；关于使用 <code>+</code>
                    表示空格的说明，请参见 <a href="#appendix-e-percent-encoding-and-form-media-types">附录 E</a>）：</p>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">name:</span> <span class="hljs-string">thing</span>
<span class="hljs-attr">in:</span> <span class="hljs-string">query</span>
<span class="hljs-attr">required:</span> <span class="hljs-literal">false</span>
<span class="hljs-attr">schema:</span>
  <span class="hljs-attr">type:</span> <span class="hljs-string">array</span>
  <span class="hljs-attr">items:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
<span class="hljs-attr">style:</span> <span class="hljs-string">form</span>
<span class="hljs-attr">explode:</span> <span class="hljs-literal">true</span>
<span class="hljs-attr">examples:</span>
  <span class="hljs-attr">ObjectList:</span>
    <span class="hljs-attr">dataValue:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">one</span> <span class="hljs-string">thing</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">another</span> <span class="hljs-string">thing</span>
    <span class="hljs-attr">serializedValue:</span> <span class="hljs-string">"thing=one%20thing&amp;thing=another%20thing"</span>
</code></pre>
                <p>一个自由形式的查询参数示例，允许任意的 <code>type: "integer"</code> 参数：</p>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">in:</span> <span class="hljs-string">query</span>
<span class="hljs-attr">name:</span> <span class="hljs-string">freeForm</span>
<span class="hljs-attr">schema:</span>
  <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
  <span class="hljs-attr">additionalProperties:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">integer</span>
<span class="hljs-attr">style:</span> <span class="hljs-string">form</span>
<span class="hljs-attr">examples:</span>
  <span class="hljs-attr">Pagination:</span>
    <span class="hljs-attr">dataValue:</span>
      <span class="hljs-attr">page:</span> <span class="hljs-number">4</span>
      <span class="hljs-attr">pageSize:</span> <span class="hljs-number">50</span>
    <span class="hljs-attr">serializeValue:</span> <span class="hljs-string">page=4&amp;pageSize=50</span>
</code></pre>
                <p>一个使用 <code>content</code> 定义序列化的复杂参数示例，展示了多个层级和类型的示例以清晰说明示例用法 — 注意 <code>dataValue</code>
                    在两个层级是相同的，通常不需要在两个位置都显示，但 <code>serializedValue</code> 不同：</p>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">in:</span> <span class="hljs-string">query</span>
<span class="hljs-attr">name:</span> <span class="hljs-string">coordinates</span>
<span class="hljs-attr">content:</span>
  <span class="hljs-attr">application/json:</span>
    <span class="hljs-attr">schema:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
      <span class="hljs-attr">required:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">lat</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">long</span>
      <span class="hljs-attr">properties:</span>
        <span class="hljs-attr">lat:</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">number</span>
        <span class="hljs-attr">long:</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">number</span>
    <span class="hljs-attr">examples:</span>
      <span class="hljs-attr">dataValue:</span>
        <span class="hljs-attr">lat:</span> <span class="hljs-number">10</span>
        <span class="hljs-attr">long:</span> <span class="hljs-number">60</span>
      <span class="hljs-attr">serializedValue:</span> <span class="hljs-string">'{"lat":10,"long":60}'</span>
<span class="hljs-attr">examples:</span>
  <span class="hljs-attr">dataValue:</span>
    <span class="hljs-attr">lat:</span> <span class="hljs-number">10</span>
    <span class="hljs-attr">long:</span> <span class="hljs-number">60</span>
  <span class="hljs-attr">serializedValue:</span> <span class="hljs-string">coordinates=%7B%22lat%22%3A10%2C%22long%22%3A60%7D</span>
</code></pre>
                <p>一个使用媒体类型对象管理的查询字符串参数示例，展示了按 <code>application/x-www-form-urlencoded</code> 媒体类型规则处理空格（用
                    <code>+</code> 编码）而非 RFC6570 的处理（用 <code>%20</code> 编码）；有关此区别的更多指导，请参见 <a
                        href="#appendix-e-percent-encoding-and-form-media-types">附录 E</a>。在媒体类型和参数级别都展示示例以强调，由于
                    <code>application/x-www-form-urlencoded</code> 定义上即适用于查询字符串，因此对序列化的媒体类型值不再进行额外的编码或转义：
                </p>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">in:</span> <span class="hljs-string">querystring</span>
<span class="hljs-attr">content:</span>
  <span class="hljs-attr">application/x-www-form-urlencoded:</span>
    <span class="hljs-attr">schema:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
      <span class="hljs-attr">properties:</span>
        <span class="hljs-attr">foo:</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
        <span class="hljs-attr">bar:</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">boolean</span>
    <span class="hljs-attr">examples:</span>
      <span class="hljs-attr">spacesAndPluses:</span>
        <span class="hljs-attr">description:</span> <span class="hljs-string">Note</span> <span class="hljs-string">handling</span> <span class="hljs-string">of</span> <span class="hljs-string">spaces</span> <span class="hljs-string">and</span> <span class="hljs-string">"+"</span> <span class="hljs-string">per</span> <span class="hljs-string">media</span> <span class="hljs-string">type.</span>
        <span class="hljs-attr">dataValue:</span>
          <span class="hljs-attr">foo:</span> <span class="hljs-string">a</span> <span class="hljs-string">+</span> <span class="hljs-string">b</span>
          <span class="hljs-attr">bar:</span> <span class="hljs-literal">true</span>
        <span class="hljs-attr">serializedValue:</span> <span class="hljs-string">foo=a+%2B+b&amp;bar=true</span>
<span class="hljs-attr">examples:</span>
  <span class="hljs-attr">spacesAndPluses:</span>
    <span class="hljs-attr">description:</span> <span class="hljs-string">|
      Note that no additional percent encoding is done, as this
      media type is URI query string-ready by definition.
</span>    <span class="hljs-attr">dataValue:</span>
      <span class="hljs-attr">foo:</span> <span class="hljs-string">a</span> <span class="hljs-string">+</span> <span class="hljs-string">b</span>
      <span class="hljs-attr">bar:</span> <span class="hljs-literal">true</span>
    <span class="hljs-attr">serializedValue:</span> <span class="hljs-string">foo=a+%2B+b&amp;bar=true</span>
</code></pre>
                <p>一个将整个字符串使用 JSON 的查询字符串参数（不是作为单个查询参数值）。在两个层级都展示 <code>dataValue</code>
                    字段以完整说明两种提供示例的方式。如下所示，这在实践中是冗余的且不必同时进行：</p>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">in:</span> <span class="hljs-string">querystring</span>
<span class="hljs-attr">name:</span> <span class="hljs-string">json</span>
<span class="hljs-attr">content:</span>
  <span class="hljs-attr">application/json:</span>
    <span class="hljs-attr">schema:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
      <span class="hljs-attr">properties:</span>
        <span class="hljs-attr">numbers:</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">array</span>
          <span class="hljs-attr">items:</span>
            <span class="hljs-attr">type:</span> <span class="hljs-string">integer</span>
        <span class="hljs-attr">flag:</span>
          <span class="hljs-attr">type:</span> [<span class="hljs-string">boolean</span>, <span class="hljs-string">"null"</span>]
    <span class="hljs-attr">examples:</span>
      <span class="hljs-attr">TwoNoFlag:</span>
        <span class="hljs-attr">description:</span> <span class="hljs-string">Serialize</span> <span class="hljs-string">with</span> <span class="hljs-string">minimized</span> <span class="hljs-string">whitespace</span>
        <span class="hljs-attr">dataValue:</span>
          <span class="hljs-attr">numbers:</span>
            <span class="hljs-bullet">-</span> <span class="hljs-number">1</span>
            <span class="hljs-bullet">-</span> <span class="hljs-number">2</span>
          <span class="hljs-attr">flag:</span> <span class="hljs-literal">null</span>
        <span class="hljs-attr">serializedValue:</span> <span class="hljs-string">'{"numbers":[1,2],"flag":null}'</span>
<span class="hljs-attr">examples:</span>
  <span class="hljs-attr">TwoNoFlag:</span>
    <span class="hljs-attr">dataValue:</span>
      <span class="hljs-attr">numbers:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-number">1</span>
        <span class="hljs-bullet">-</span> <span class="hljs-number">2</span>
      <span class="hljs-attr">flag:</span> <span class="hljs-literal">null</span>
    <span class="hljs-attr">serializedValue:</span> <span class="hljs-string">"%7B%22numbers%22%3A%5B1%2C2%5D%2C%22flag%22%3Anull%7D"</span>
</code></pre>
                <p>假设路径为 <code>/foo</code>，服务器为 <code>https://example.com</code>，则包含来自 <code>serializedValue</code>
                    的值的完整 URL 如下：</p>
                <pre class="nohighlight" tabindex="0"><code>https://<span class="hljs-attr">example.com</span>/<span class="hljs-attr">foo</span>?<span class="hljs-attr">%7B%22numbers%22%3A%5B1%2C2%5D%2C%22flag%22%3Anull%7D</span>
</code></pre>
                <p>一个使用 <cite><a class="bibref" data-link-type="biblio" href="#bib-rfc9535"
                            title="JSONPath: Query Expressions for JSON">JSONPath</a></cite> 的查询字符串参数示例。注意在此示例中我们不仅不重复
                    <code>dataValue</code>，而且使用简写的 <code>example</code>，因为 <code>application/jsonpath</code>
                    的值是一个字符串，在媒体类型级别按原样序列化：
                </p>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">in:</span> <span class="hljs-string">querystring</span>
<span class="hljs-attr">name:</span> <span class="hljs-string">selector</span>
<span class="hljs-attr">content:</span>
  <span class="hljs-attr">application/jsonpath:</span>
    <span class="hljs-attr">schema:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
    <span class="hljs-attr">example:</span> <span class="hljs-string">$.a.b[1:1]</span>
<span class="hljs-attr">examples:</span>
  <span class="hljs-attr">Selector:</span>
    <span class="hljs-attr">serializedValue:</span> <span class="hljs-string">"%24.a.b%5B1%3A1%5D"</span>
</code></pre>
                <p>由于截至撰写时尚无将 JSON Schema 数据模型与 JSONPath 建立映射的 <a
                        href="#openapi-media-type-registry">注册</a>，该字符串允许结构的细节需要通过可读的 <code>description</code> 字段传达，或通过
                    OpenAPI 描述之外的机制（例如用于被查询数据结构的 JSON Schema）来表达。</p>
                <p>假设路径为 <code>/foo</code> 且服务器为 <code>https://example.com</code>，则包含来自 <code>serializedValue</code>
                    的值的完整 URL 如下：</p>
                <pre class="nohighlight" tabindex="0"><code>https://<span class="hljs-attr">example.com</span>/<span class="hljs-attr">foo</span>?<span class="hljs-attr">%24.a.b%5B1%3A1%5D</span>
</code></pre>
            </section>
        </section>
        <section id="request-body-object">
            <div class="header-wrapper">
                <h3 id="x4-13-request-body-object"><bdi class="secno">4.13 </bdi>请求体对象</h3><a class="self-link"
                    href="#request-body-object" aria-label="Permalink for Section 4.13"></a>
            </div>
            <p>描述单个请求体。</p>
            <section id="fixed-fields-10">
                <div class="header-wrapper">
                    <h4 id="x4-13-1-fixed-fields"><bdi class="secno">4.13.1 </bdi>固定字段</h4><a class="self-link"
                        href="#fixed-fields-10" aria-label="Permalink for Section 4.13.1"></a>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>字段名</th>
                            <th style="text-align:center">类型</th>
                            <th>描述</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><span id="request-body-description"></span>description</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td>请求体的简要描述。可以包含使用示例。可使用 [<cite><a class="bibref" data-link-type="biblio"
                                        href="#bib-commonmark" title="CommonMark Spec">CommonMark</a></cite>]
                                语法来进行富文本表示（<em class="rfc2119">MAY</em>）。</td>
                        </tr>
                        <tr>
                            <td><span id="request-body-content"></span>content</td>
                            <td style="text-align:center">Map[<code>string</code>, <a href="#media-type-object">Media
                                    Type Object</a> | <a href="#reference-object">Reference Object</a>]</td>
                            <td><strong><em class="rfc2119">REQUIRED</em></strong>。请求体的内容。键为媒体类型或 <a
                                    href="https://tools.ietf.org/html/rfc9110#appendix-A">media type
                                    range</a>，值描述该媒体类型。该映射<em class="rfc2119">SHOULD</em>
                                至少包含一项；如果不包含，行为由实现定义。对于匹配多个键的请求，仅最具体的键适用，例如 <code>"text/plain"</code> 会覆盖
                                <code>"text/*"</code>。
                            </td>
                        </tr>
                        <tr>
                            <td><span id="request-body-required"></span>required</td>
                            <td style="text-align:center"><code>boolean</code></td>
                            <td>确定请求中是否必须包含请求体。默认值为 <code>false</code>。</td>
                        </tr>
                    </tbody>
                </table>
                <p>该对象 <em class="rfc2119">MAY</em> 可通过 <a href="#specification-extensions">Specification Extensions</a>
                    进行扩展。</p>
            </section>
            <section id="request-body-examples">
                <div class="header-wrapper">
                    <h4 id="x4-13-2-request-body-examples"><bdi class="secno">4.13.2 </bdi>请求体示例</h4><a
                        class="self-link" href="#request-body-examples" aria-label="Permalink for Section 4.13.2"></a>
                </div>
                <p>带有引用 schema 定义的请求体示例。</p>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">description:</span> <span class="hljs-string">user</span> <span class="hljs-string">to</span> <span class="hljs-string">add</span> <span class="hljs-string">to</span> <span class="hljs-string">the</span> <span class="hljs-string">system</span>
<span class="hljs-attr">content:</span>
  <span class="hljs-attr">application/json:</span>
    <span class="hljs-attr">schema:</span>
      <span class="hljs-string">$ref:</span> <span class="hljs-string">'#/components/schemas/User'</span>
    <span class="hljs-attr">examples:</span>
      <span class="hljs-attr">user:</span>
        <span class="hljs-attr">summary:</span> <span class="hljs-string">User</span> <span class="hljs-string">example</span>
        <span class="hljs-attr">externalValue:</span> <span class="hljs-string">https://foo.bar/examples/user-example.json</span>
  <span class="hljs-attr">application/xml:</span>
    <span class="hljs-attr">schema:</span>
      <span class="hljs-string">$ref:</span> <span class="hljs-string">'#/components/schemas/User'</span>
    <span class="hljs-attr">examples:</span>
      <span class="hljs-attr">user:</span>
        <span class="hljs-attr">summary:</span> <span class="hljs-string">User</span> <span class="hljs-string">example</span> <span class="hljs-string">in</span> <span class="hljs-string">XML</span>
        <span class="hljs-attr">externalValue:</span> <span class="hljs-string">https://foo.bar/examples/user-example.xml</span>
  <span class="hljs-attr">text/plain:</span>
    <span class="hljs-attr">examples:</span>
      <span class="hljs-attr">user:</span>
        <span class="hljs-attr">summary:</span> <span class="hljs-string">User</span> <span class="hljs-string">example</span> <span class="hljs-string">in</span> <span class="hljs-string">plain</span> <span class="hljs-string">text</span>
        <span class="hljs-attr">externalValue:</span> <span class="hljs-string">https://foo.bar/examples/user-example.txt</span>
  <span class="hljs-attr">'*/*':</span>
    <span class="hljs-attr">examples:</span>
      <span class="hljs-attr">user:</span>
        <span class="hljs-attr">summary:</span> <span class="hljs-string">User</span> <span class="hljs-string">example</span> <span class="hljs-string">in</span> <span class="hljs-string">other</span> <span class="hljs-string">format</span>
        <span class="hljs-attr">externalValue:</span> <span class="hljs-string">https://foo.bar/examples/user-example.whatever</span>
</code></pre>
            </section>
        </section>
        <section id="media-type-object">
            <div class="header-wrapper">
                <h3 id="x4-14-media-type-object"><bdi class="secno">4.14 </bdi>媒体类型对象</h3><a class="self-link"
                    href="#media-type-object" aria-label="Permalink for Section 4.14"></a>
            </div>
            <p>每个 Media Type Object 描述与其键所标识的媒体类型一致的内容结构。
                可以使用多个 Media Type Object 来描述可出现在多种不同媒体类型中的内容。</p>
            <p>当提供 <code>example</code> 或 <code>examples</code> 时，示例 <em class="rfc2119">SHOULD</em> 与指定的 schema
                匹配，并采用媒体类型及其编码所指定的正确格式。
                <code>example</code> 与 <code>examples</code> 字段互斥。
                有关以不同方式指定示例（包括非 JSON/YAML 值）的更多指南，请参见 <a href="#working-with-examples">Working With Examples</a>。
            </p>
            <section id="fixed-fields-11">
                <div class="header-wrapper">
                    <h4 id="x4-14-1-fixed-fields"><bdi class="secno">4.14.1 </bdi>固定字段</h4><a class="self-link"
                        href="#fixed-fields-11" aria-label="Permalink for Section 4.14.1"></a>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>字段名</th>
                            <th style="text-align:center">类型</th>
                            <th>描述</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><span id="media-type-schema"></span>schema</td>
                            <td style="text-align:center"><a href="#schema-object">Schema Object</a></td>
                            <td>描述请求、响应、参数或头的完整内容的 schema。</td>
                        </tr>
                        <tr>
                            <td><span id="media-type-item-schema"></span>itemSchema</td>
                            <td style="text-align:center"><a href="#schema-object">Schema Object</a></td>
                            <td>描述 <a href="#sequential-media-types">顺序媒体类型</a> 中每个项的 schema。</td>
                        </tr>
                        <tr>
                            <td><span id="media-type-example"></span>example</td>
                            <td style="text-align:center">Any</td>
                            <td>该媒体类型的示例；参见 <a href="#working-with-examples">Working With Examples</a>。</td>
                        </tr>
                        <tr>
                            <td><span id="media-type-examples"></span>examples</td>
                            <td style="text-align:center">Map[ <code>string</code>, <a href="#example-object">Example
                                    Object</a> | <a href="#reference-object">Reference Object</a>]</td>
                            <td>该媒体类型的示例集合；参见 <a href="#working-with-examples">Working With Examples</a>。</td>
                        </tr>
                        <tr>
                            <td><span id="media-type-encoding"></span>encoding</td>
                            <td style="text-align:center">Map[<code>string</code>, <a href="#encoding-object">Encoding
                                    Object</a>]</td>
                            <td>属性名与其编码信息之间的映射，如 <a href="#encoding-by-name">按名称编码</a> 所定义。仅当媒体类型为
                                <code>multipart</code> 或 <code>application/x-www-form-urlencoded</code>
                                时，<code>encoding</code> 字段 <em class="rfc2119">SHALL</em> 生效。如果未为某属性提供 Encoding
                                Object，则行为由 Encoding Object 的默认值决定。若存在 <code>prefixEncoding</code> 或
                                <code>itemEncoding</code>，则该字段 <em class="rfc2119">MUST NOT</em> 出现。
                            </td>
                        </tr>
                        <tr>
                            <td><span id="media-type-prefix-encoding"></span>prefixEncoding</td>
                            <td style="text-align:center">[<a href="#encoding-object">Encoding Object</a>]</td>
                            <td>按位置的编码信息数组，如 <a href="#encoding-by-position">按位置编码</a> 所定义。仅当媒体类型为
                                <code>multipart</code> 时，<code>prefixEncoding</code> 字段 <em class="rfc2119">SHALL</em>
                                生效。如果未为某属性提供 Encoding Object，则行为由 Encoding Object 的默认值决定。若存在 <code>encoding</code>，则该字段
                                <em class="rfc2119">MUST NOT</em> 出现。
                            </td>
                        </tr>
                        <tr>
                            <td><span id="media-type-item-encoding"></span>itemEncoding</td>
                            <td style="text-align:center"><a href="#encoding-object">Encoding Object</a></td>
                            <td>为多个数组项提供编码信息的单个 Encoding Object，如 <a href="#encoding-by-position">按位置编码</a> 所定义。仅当媒体类型为
                                <code>multipart</code> 时，<code>itemEncoding</code> 字段 <em class="rfc2119">SHALL</em>
                                生效。如果未为某属性提供 Encoding Object，则行为由 Encoding Object 的默认值决定。若存在 <code>encoding</code>，则该字段
                                <em class="rfc2119">MUST NOT</em> 出现。
                            </td>
                        </tr>
                    </tbody>
                </table>
                <p>该对象 <em class="rfc2119">MAY</em> 可通过 <a href="#specification-extensions">Specification Extensions</a>
                    进行扩展。</p>
            </section>
            <section id="media-types">
                <div class="header-wrapper">
                    <h4 id="x4-14-2-media-types"><bdi class="secno">4.14.2 </bdi>媒体类型</h4><a class="self-link"
                        href="#media-types" aria-label="Permalink for Section 4.14.2"></a>
                </div>
                <p>媒体类型通过 <a href="https://www.iana.org/assignments/media-types/media-types.xhtml">IANA media types
                        registry</a> 以公开注册的方式记录，注册流程记录在 [<cite><a class="bibref" data-link-type="biblio"
                            href="#bib-rfc6838"
                            title="Media Type Specifications and Registration Procedures">RFC6838</a></cite>] 中。</p>
                <p>API 有时也会定义私有媒体类型，例如 GitHub 的 <code>application/vnd.github.v3+json</code>（未注册），以及其他媒体类型如
                    <code>application/schema+json</code> 在被正式注册前已经被广泛使用。
                </p>
                <p>有关在多种媒体类型下使用 schemas 的解析与序列化指南，请参见 <a href="#parsing-and-serializing">Parsing and Serializing</a>（位于
                    <a href="#schema-object">Schema Object</a> 下）。
                </p>
                <section id="openapi-media-type-registry">
                    <div class="header-wrapper">
                        <h5 id="x4-14-2-1-openapi-media-type-registry"><bdi class="secno">4.14.2.1 </bdi>OpenAPI 媒体类型注册表
                        </h5><a class="self-link" href="#openapi-media-type-registry"
                            aria-label="Permalink for Section 4.14.2.1"></a>
                    </div>
                    <p>OpenAPI Initiative 维护了一个 <a href="https://spec.openapis.org/registry/media-type/">Media
                            Type Registry</a>，汇总了本规范期望支持的媒体类型并索引了哪些章节讨论了哪些媒体类型。该注册表还链接到 IANA
                        注册（若存在）以及与每种媒体类型相关的最重要的规范文档。
                        在该注册表中作为扩展或为后续版本添加的任何附加媒体类型，<em class="rfc2119">MAY</em> 被本版本 OAS 的实现所支持。</p>
                </section>
            </section>
            <section id="complete-vs-streaming-content">
                <div class="header-wrapper">
                    <h4 id="x4-14-3-complete-vs-streaming-content"><bdi class="secno">4.14.3 </bdi>完整与流式内容</h4><a
                        class="self-link" href="#complete-vs-streaming-content"
                        aria-label="Permalink for Section 4.14.3"></a>
                </div>
                <p><code>schema</code> 字段 <em class="rfc2119">MUST</em> 应用于完整内容，该完整内容由媒体类型和上下文（<a
                        href="#request-body-object">Request Body Object</a>、<a href="#response-object">Response
                        Object</a>、<a href="#parameter-object">Parameter Object</a> 或 <a href="#header-object">Header
                        Object</a>）定义。
                    由于这需要将内容完整加载到内存中，因此对流式内容会带来挑战。
                    在客户端需要决定何时停止读取的用例尤其具有挑战性，因为流没有明确定义的结束。</p>
                <section id="sequential-media-types">
                    <div class="header-wrapper">
                        <h5 id="x4-14-3-1-sequential-media-types"><bdi class="secno">4.14.3.1 </bdi>顺序媒体类型</h5><a
                            class="self-link" href="#sequential-media-types"
                            aria-label="Permalink for Section 4.14.3.1"></a>
                    </div>
                    <p>在本规范中，<em>顺序媒体类型</em> 定义为任何由重复结构组成且没有头部、尾部、信封或其它元数据附加到序列之外的媒体类型。</p>
                    <p>一些顺序媒体类型示例（包括一些未在 IANA 注册但常用的）为：</p>
                    <pre class="nohighlight" tabindex="0"><code>  application/jsonl
  application/x-ndjson
  application/json-seq
  application/geo+json-seq
  text/event-stream
  multipart/mixed
</code></pre>
                    <p>在前面三个示例中，重复结构为任何 <a href="https://tools.ietf.org/html/rfc8259#section-3">JSON value</a>。第四个重复的是
                        <code>application/geo+json</code> 结构化值，而 <code>text/event-stream</code>
                        则重复与服务器发送事件相关的自定义文本格式。最后列出的 <code>multipart/mixed</code> 提供任意媒体类型文档的有序列表，有时用于流式传输。
                        注意尽管 <code>multipart</code> 格式在技术上允许前言和结尾，但 RFC 指示应忽略它们，使其实际作为注释，本规范不对其进行建模。
                    </p>
                    <p>实现 <em class="rfc2119">MUST</em> 支持将顺序媒体类型映射到 JSON Schema 数据模型，方法是将其视为按相同顺序排列的数组中的值。</p>
                    <p>关于在流式上下文中处理顺序媒体类型的更多信息，包括对 <code>text/event-stream</code> 内容的特殊考虑，请参见 <a
                            href="#complete-vs-streaming-content">Complete vs Streaming Content</a>。对于
                        <code>multipart</code> 类型，也请参见 <a href="#encoding-by-position">Encoding By Position</a>。
                    </p>
                    <section id="streaming-sequential-media-types">
                        <div class="header-wrapper">
                            <h6 id="x4-14-3-1-1-streaming-sequential-media-types"><bdi class="secno">4.14.3.1.1
                                </bdi>流式顺序媒体类型</h6><a class="self-link" href="#streaming-sequential-media-types"
                                aria-label="Permalink for Section 4.14.3.1.1"></a>
                        </div>
                        <p><code>itemSchema</code> 字段用于支持顺序媒体类型的流式用例，<code>itemEncoding</code> 则为流式的 <a
                                href="#encoding-by-position">按位置的 <code>multipart</code> 媒体类型</a> 提供对应的编码机制。</p>
                        <p>与应用于完整内容的 <code>schema</code> 不同（按 <a href="#sequential-media-types">顺序媒体类型</a>
                            节所述将其视为数组），<code>itemSchema</code> <em class="rfc2119">MUST</em>
                            应用于流中每个项，这支持在从流中读取时对每个项进行逐个处理。</p>
                        <p><code>schema</code> 与 <code>itemSchema</code> 都 <em class="rfc2119">MAY</em> 在同一 Media Type
                            Object 中使用。但这样做相较于在 <code>schema</code> 字段中使用 <code>items</code> 关键字通常并无显著优势。</p>
                    </section>
                </section>
                <section id="binary-streams">
                    <div class="header-wrapper">
                        <h5 id="x4-14-3-2-binary-streams"><bdi class="secno">4.14.3.2 </bdi>二进制流</h5><a
                            class="self-link" href="#binary-streams" aria-label="Permalink for Section 4.14.3.2"></a>
                    </div>
                    <p><code>maxLength</code> 关键字 <em class="rfc2119">MAY</em>
                        用于设置由字符串数据（包括编码的二进制数据）或未编码的二进制数据组成的流式有效载荷的预计上限长度。对于未编码的二进制数据，长度以八位字节（octets）计。
                        在这种用例中，<code>maxLength</code> <em class="rfc2119">MAY</em> 在常规 JSON Schema 验证之外被实现，因为 JSON
                        Schema 并不直接适用于二进制数据，并且对编码的二进制流将其完整存于内存中可能不可行。</p>
                </section>
            </section>
            <section id="special-considerations-for-server-sent-events">
                <div class="header-wrapper">
                    <h4 id="x4-14-4-special-considerations-for-server-sent-events"><bdi class="secno">4.14.4
                        </bdi>服务器推送事件的特殊考虑</h4><a class="self-link"
                        href="#special-considerations-for-server-sent-events"
                        aria-label="Permalink for Section 4.14.4"></a>
                </div>
                <p>对于 <code>text/event-stream</code>，实现 <em class="rfc2119">MUST</em> 在根据 <a
                        href="https://html.spec.whatwg.org/multipage/server-sent-events.html#parsing-an-event-stream"><code>text/event-stream</code>
                        specification</a> 解析事件流后处理事件数据，包括忽略某些字段（包括注释）和/或值的所有指导，以及合并跨多行拆分的值的规则。</p>
                <p>字段值类型 <em class="rfc2119">MUST</em> 按 <code>text/event-stream</code> 规范的规定处理（例如 <code>retry</code>
                    字段值被建模为预期为 JSON Schema <code>type: integer</code> 的 JSON 数字），而未给出显式值类型的字段 <em
                        class="rfc2119">MUST</em> 作为字符串处理。</p>
                <p>一些 <code>text/event-stream</code> 的使用者在字段值中使用 JSON 格式，尤其是 <code>data</code> 字段。对于此类字符串编码数据的内容，请使用
                    JSON Schema 的关键词（尤其是 <code>contentMediaType</code> 与
                    <code>contentSchema</code>）来描述并验证这些字段，以提供比基于字符串的验证（如 <code>pattern</code>）更详尽的描述与验证。注意
                    <code>contentSchema</code> 并非默认被自动验证（另见本规范的 <a
                        href="#non-validating-constraint-keywords">Non-validating constraint keywords</a> 部分）。
                </p>
                <p>下面的 Schema Object 是截至撰写本文时由 [<cite><a class="bibref" data-link-type="biblio" href="#bib-html"
                            title="HTML Standard">HTML</a></cite>] 规范所记录的 <code>text/event-stream</code> 媒体类型的通用 schema：
                </p>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
<span class="hljs-attr">required:</span>
<span class="hljs-bullet">-</span> <span class="hljs-string">data</span>
<span class="hljs-attr">properties:</span>
  <span class="hljs-attr">data:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
  <span class="hljs-attr">event:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
  <span class="hljs-attr">id:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
  <span class="hljs-attr">retry:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">integer</span>
    <span class="hljs-attr">minimum:</span> <span class="hljs-number">0</span>
</code></pre>
            </section>
            <section id="encoding-usage-and-restrictions">
                <div class="header-wrapper">
                    <h4 id="x4-14-5-encoding-usage-and-restrictions"><bdi class="secno">4.14.5 </bdi>编码用法与限制</h4><a
                        class="self-link" href="#encoding-usage-and-restrictions"
                        aria-label="Permalink for Section 4.14.5"></a>
                </div>
                <p>这些编码字段定义了如何将每个 <a href="#encoding-object">Encoding Object</a> 映射到数据中的具体值。
                    每个字段都有其可使用的媒体类型集；对于所有其它媒体类型，这三者在实现上 <em class="rfc2119">SHALL</em> 被忽略。</p>
                <section id="encoding-by-name">
                    <div class="header-wrapper">
                        <h5 id="x4-14-5-1-encoding-by-name"><bdi class="secno">4.14.5.1 </bdi>按名称编码</h5><a
                            class="self-link" href="#encoding-by-name" aria-label="Permalink for Section 4.14.5.1"></a>
                    </div>
                    <p><code>encoding</code> 字段的行为旨在支持 Web 表单，因此仅为结构为允许重复值的名-值对的媒体类型定义，最显著的是
                        <code>application/x-www-form-urlencoded</code> 与 <code>multipart/form-data</code>。
                    </p>
                    <p>要使用 <code>encoding</code> 字段，字段下的每个键 <em class="rfc2119">MUST</em> 在属性中存在；没有对应属性的
                        <code>encoding</code> 条目 <em class="rfc2119">SHALL</em> 被忽略。
                        数组属性 <em class="rfc2119">MUST</em> 通过对数组的每个项应用给定的 Encoding Object
                        来处理，以生成每个数组项对应的一个已编码值，且这些已编码值使用相同的 <code>name</code>，这与 [<cite><a class="bibref"
                                data-link-type="biblio" href="#bib-rfc7578"
                                title="Returning Values from Forms: multipart/form-data">RFC7578</a></cite>] <a
                            href="https://tools.ietf.org/html/rfc7578#section-4.3">第 4.3 节</a> 建议的为表单字段提供多个值的做法一致。
                        对于顶层非数组属性以及顶层数组内的值（包括数组值）的所有其他值类型，应将 Encoding Object 应用于整个值。
                        这些名-值对在目标媒体类型中的顺序由实现定义。
                    </p>
                    <p>对于 <code>application/x-www-form-urlencoded</code>，编码键 <em class="rfc2119">MUST</em> 映射到参数名称，值按照
                        <a href="#encoding-object">Encoding Object</a> 的规则生成。有关使用与不使用 <code>encoding</code> 字段的指导与示例，请参见
                        <a href="#encoding-the-x-www-form-urlencoded-media-type">Encoding the
                            <code>x-www-form-urlencoded</code> Media Type</a>。
                    </p>
                    <p>对于 <code>multipart</code>，编码键 <em class="rfc2119">MUST</em> 映射到每个部分的
                        <code>Content-Disposition: form-data</code> 头的 <a
                            href="https://tools.ietf.org/html/rfc7578#section-4.2"><code>name</code> 参数</a>，如 [<cite><a
                                class="bibref" data-link-type="biblio" href="#bib-rfc7578"
                                title="Returning Values from Forms: multipart/form-data">RFC7578</a></cite>] 所定义。关于非
                        ASCII 部分名称的指导，请参见 RFC7578 的 <a href="https://tools.ietf.org/html/rfc7578#section-5">第 5 节</a>。
                    </p>
                    <p>有关带或不带 <code>encoding</code> 字段的更多指导与示例，请参见 <a href="#encoding-multipart-media-types">Encoding
                            <code>multipart</code> Media Types</a>。</p>
                </section>
                <section id="encoding-by-position">
                    <div class="header-wrapper">
                        <h5 id="x4-14-5-2-encoding-by-position"><bdi class="secno">4.14.5.2 </bdi>按位置编码
                        </h5><a class="self-link" href="#encoding-by-position"
                            aria-label="Permalink for Section 4.14.5.2"></a>
                    </div>
                    <p>大多数 <code>multipart</code> 媒体类型（包括定义解析所有 <code>multipart</code> 类型基础规则的
                        <code>multipart/mixed</code>）没有命名的部分。
                        这些媒体类型的数据被建模为数组，每个部分对应一个按序的项。
                    </p>
                    <p>要使用 <code>prefixEncoding</code> 和/或 <code>itemEncoding</code> 字段，必须存在 <code>itemSchema</code>
                        或数组形式的 <code>schema</code>。
                        这些字段类似于 JSON Schema 的 <code>prefixItems</code> 和 <code>items</code> 关键字，其中
                        <code>prefixEncoding</code>（若存在）提供一个 Encoding Object 数组，每个 Encoding Object 应用于数据数组中相同位置的值，而
                        <code>itemEncoding</code> 将其单个 Encoding Object 应用于数组中剩余的所有项。
                        与 <code>prefixItems</code> 一样，如果实例数组比 <code>prefixEncoding</code> 数组短，这并非错误；额外的 Encoding Objects
                        <em class="rfc2119">SHALL</em> 被忽略。
                    </p>
                    <p><code>itemEncoding</code> 字段也可与 <code>itemSchema</code> 一起使用以支持流式 <code>multipart</code> 内容。</p>
                </section>
                <section id="additional-encoding-approaches">
                    <div class="header-wrapper">
                        <h5 id="x4-14-5-3-additional-encoding-approaches"><bdi class="secno">4.14.5.3 </bdi>其他编码方式</h5>
                        <a class="self-link" href="#additional-encoding-approaches"
                            aria-label="Permalink for Section 4.14.5.3"></a>
                    </div>
                    <p><code>prefixEncoding</code> 字段可与任何 <code>multipart</code> 内容一起使用以强制固定的部分顺序。
                        这包括 <code>multipart/form-data</code>，对于此类情形，Encoding Object 的 <code>headers</code> 字段 <em
                            class="rfc2119">MUST</em> 用于提供 <code>Content-Disposition</code> 与部分名称，因为没有属性名可自动提供名称。</p>
                    <p>本规范的早期版本建议在非 <code>multipart/form-data</code> 的 <code>multipart</code> 媒体类型中使用每部分的
                        <code>Content-Disposition: form-data</code> 头的 <a
                            href="https://tools.ietf.org/html/rfc7578#section-4.2"><code>name</code> 参数</a> 来规避
                        <code>encoding</code> 字段的限制。
                        实现 <em class="rfc2119">MAY</em> 选择支持该变通方法，但由于该用法并不常见，非 <code>form-data</code> 类型的
                        <code>multipart</code> 媒体类型的实现很可能不会支持它。
                    </p>
                </section>
            </section>
            <section id="media-type-examples-0">
                <div class="header-wrapper">
                    <h4 id="x4-14-6-media-type-examples"><bdi class="secno">4.14.6 </bdi>媒体类型示例</h4><a class="self-link"
                        href="#media-type-examples-0" aria-label="Permalink for Section 4.14.6"></a>
                </div>
                <p>有关表单相关与 <code>multipart</code> 媒体类型示例，请参见 <a href="#encoding-object">Encoding Object</a>。</p>
                <section id="json">
                    <div class="header-wrapper">
                        <h5 id="x4-14-6-1-json"><bdi class="secno">4.14.6.1 </bdi>JSON</h5><a class="self-link"
                            href="#json" aria-label="Permalink for Section 4.14.6.1"></a>
                    </div>
                    <p>请注意，由于此示例以 YAML 编写，Example Object 的 <code>value</code> 字段可以格式化为 YAML，因为 YAML 可轻松转换为 JSON，从而避免将
                        JSON 嵌入为字符串。</p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">application/json:</span>
  <span class="hljs-attr">schema:</span>
    <span class="hljs-string">$ref:</span> <span class="hljs-string">'#/components/schemas/Pet'</span>
  <span class="hljs-attr">examples:</span>
    <span class="hljs-attr">cat:</span>
      <span class="hljs-attr">summary:</span> <span class="hljs-string">An</span> <span class="hljs-string">example</span> <span class="hljs-string">of</span> <span class="hljs-string">a</span> <span class="hljs-string">cat</span>
      <span class="hljs-attr">value:</span>
        <span class="hljs-attr">name:</span> <span class="hljs-string">Fluffy</span>
        <span class="hljs-attr">petType:</span> <span class="hljs-string">Cat</span>
        <span class="hljs-attr">color:</span> <span class="hljs-string">White</span>
        <span class="hljs-attr">gender:</span> <span class="hljs-string">male</span>
        <span class="hljs-attr">breed:</span> <span class="hljs-string">Persian</span>
    <span class="hljs-attr">dog:</span>
      <span class="hljs-attr">summary:</span> <span class="hljs-string">An</span> <span class="hljs-string">example</span> <span class="hljs-string">of</span> <span class="hljs-string">a</span> <span class="hljs-string">dog</span> <span class="hljs-string">with</span> <span class="hljs-string">a</span> <span class="hljs-string">cat's</span> <span class="hljs-string">name</span>
      <span class="hljs-attr">value:</span>
        <span class="hljs-attr">name:</span> <span class="hljs-string">Puma</span>
        <span class="hljs-attr">petType:</span> <span class="hljs-string">Dog</span>
        <span class="hljs-attr">color:</span> <span class="hljs-string">Black</span>
        <span class="hljs-attr">gender:</span> <span class="hljs-string">Female</span>
        <span class="hljs-attr">breed:</span> <span class="hljs-string">Mixed</span>
    <span class="hljs-attr">frog:</span>
      <span class="hljs-string">$ref:</span> <span class="hljs-string">'#/components/examples/frog-example'</span>
</code></pre>
                    <p>另外，由于所有 JSON 都是有效的 YAML，示例值也可以在 YAML 文档中使用 JSON 语法：</p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">application/json:</span>
  <span class="hljs-attr">schema:</span>
    <span class="hljs-string">$ref:</span> <span class="hljs-string">'#/components/schemas/Pet'</span>
  <span class="hljs-attr">examples:</span>
    <span class="hljs-attr">cat:</span>
      <span class="hljs-attr">summary:</span> <span class="hljs-string">An</span> <span class="hljs-string">example</span> <span class="hljs-string">of</span> <span class="hljs-string">a</span> <span class="hljs-string">cat</span>
      <span class="hljs-attr">value:</span> {
        <span class="hljs-attr">"name":</span> <span class="hljs-string">"Fluffy"</span>,
        <span class="hljs-attr">"petType":</span> <span class="hljs-string">"Cat"</span>,
        <span class="hljs-attr">"color":</span> <span class="hljs-string">"White"</span>,
        <span class="hljs-attr">"gender":</span> <span class="hljs-string">"male"</span>,
        <span class="hljs-attr">"breed":</span> <span class="hljs-string">"Persian"</span>
      }
    <span class="hljs-attr">dog:</span>
      <span class="hljs-attr">summary:</span> <span class="hljs-string">An</span> <span class="hljs-string">example</span> <span class="hljs-string">of</span> <span class="hljs-string">a</span> <span class="hljs-string">dog</span> <span class="hljs-string">with</span> <span class="hljs-string">a</span> <span class="hljs-string">cat's</span> <span class="hljs-string">name</span>
      <span class="hljs-attr">value:</span> {
        <span class="hljs-attr">"name":</span> <span class="hljs-string">"Puma"</span>,
        <span class="hljs-attr">"petType":</span> <span class="hljs-string">"Dog"</span>,
        <span class="hljs-attr">"color":</span> <span class="hljs-string">"Black"</span>,
        <span class="hljs-attr">"gender":</span> <span class="hljs-string">"Female"</span>,
        <span class="hljs-attr">"breed":</span> <span class="hljs-string">"Mixed"</span>
      }
    <span class="hljs-attr">frog:</span>
      <span class="hljs-string">$ref:</span> <span class="hljs-string">'#/components/examples/frog-example'</span>
</code></pre>
                </section>
                <section id="sequential-json">
                    <div class="header-wrapper">
                        <h5 id="x4-14-6-2-sequential-json"><bdi class="secno">4.14.6.2 </bdi>顺序 JSON</h5><a
                            class="self-link" href="#sequential-json" aria-label="Permalink for Section 4.14.6.2"></a>
                    </div>
                    <p>对于任何其序列项为 JSON 值的 <a href="#sequential-media-types">顺序媒体类型</a>，无需对每个值进行转换。
                        JSON 文本序列（[<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc7464"
                                title="JavaScript Object Notation (JSON) Text Sequences">RFC7464</a></cite>] 的
                        <code>application/json-seq</code> 以及 [<cite><a class="bibref" data-link-type="biblio"
                                href="#bib-rfc8091"
                                title="A Media Type Structured Syntax Suffix for JSON Text Sequences">RFC8091</a></cite>]
                        的 <code>+json-seq</code> 结构后缀）、<a href="https://jsonlines.org/">JSON
                            Lines</a>（<code>application/jsonl</code>）和 <a
                            href="https://github.com/ndjson/ndjson-spec">NDJSON</a>（<code>application/x-ndjson</code>）都属于此类。注意
                        JSON Lines 与 NDJSON 的媒体类型尚未在 IANA 注册，但被广泛使用。
                    </p>
                    <p>下面示例展示了用于流式日志条目和响应查询时返回固定长度集合的 Media Type Objects，展示了 <code>schema</code> 与
                        <code>itemSchema</code> 之间的关系以及何时使用它们，尽管在两种情况下 <code>examples</code> 字段相同。
                    </p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">components:</span>
  <span class="hljs-attr">schemas:</span>
    <span class="hljs-attr">LogEntry:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
      <span class="hljs-attr">properties:</span>
        <span class="hljs-attr">timestamp:</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
          <span class="hljs-attr">format:</span> <span class="hljs-string">date-time</span>
        <span class="hljs-attr">level:</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">integer</span>
          <span class="hljs-attr">minimum:</span> <span class="hljs-number">0</span>
        <span class="hljs-attr">message:</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
    <span class="hljs-attr">Log:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">array</span>
      <span class="hljs-attr">items:</span>
        <span class="hljs-string">$ref:</span> <span class="hljs-string">"#/components/schemas/LogEntry"</span>
      <span class="hljs-attr">maxItems:</span> <span class="hljs-number">100</span>
  <span class="hljs-attr">examples:</span>
    <span class="hljs-attr">LogJSONSeq:</span>
      <span class="hljs-attr">summary:</span> <span class="hljs-string">Log</span> <span class="hljs-string">entries</span> <span class="hljs-string">in</span> <span class="hljs-string">application/json-seq</span>
      <span class="hljs-comment"># JSON Text Sequences require an unprintable character</span>
      <span class="hljs-comment"># that cannot be escaped in a YAML string, and therefore</span>
      <span class="hljs-comment"># must be placed in an external document shown below</span>
      <span class="hljs-attr">externalValue:</span> <span class="hljs-string">examples/log.json-seq</span>
    <span class="hljs-attr">LogJSONPerLine:</span>
      <span class="hljs-attr">summary:</span> <span class="hljs-string">Log</span> <span class="hljs-string">entries</span> <span class="hljs-string">in</span> <span class="hljs-string">application/jsonl</span> <span class="hljs-string">or</span> <span class="hljs-string">application/x-ndjson</span>
      <span class="hljs-attr">description:</span> <span class="hljs-string">JSONL</span> <span class="hljs-string">and</span> <span class="hljs-string">NDJSON</span> <span class="hljs-string">are</span> <span class="hljs-string">identical</span> <span class="hljs-string">for</span> <span class="hljs-string">this</span> <span class="hljs-string">example</span>
      <span class="hljs-comment"># Note that the value must be written as a string with newlines,</span>
      <span class="hljs-comment"># as JSONL and NDJSON are not valid YAML</span>
      <span class="hljs-attr">value:</span> <span class="hljs-string">|
        {"timestamp": "1985-04-12T23:20:50.52Z", "level": 1, "message": "Hi!"}
        {"timestamp": "1985-04-12T23:20:51.37Z", "level": 1, "message": "Bye!"}
</span>  <span class="hljs-attr">responses:</span>
    <span class="hljs-attr">LogStream:</span>
      <span class="hljs-attr">description:</span> <span class="hljs-string">|
        A stream of JSON-format log messages that can be read
        for as long as the application is running, and is available
        in any of the sequential JSON media types.
</span>      <span class="hljs-attr">content:</span>
        <span class="hljs-attr">application/json-seq:</span>
          <span class="hljs-attr">itemSchema:</span>
            <span class="hljs-string">$ref:</span> <span class="hljs-string">"#/components/schemas/LogEntry"</span>
          <span class="hljs-attr">examples:</span>
            <span class="hljs-attr">JSON-SEQ:</span>
              <span class="hljs-string">$ref:</span> <span class="hljs-string">"#/components/examples/LogJSONSeq"</span>
        <span class="hljs-attr">application/jsonl:</span>
          <span class="hljs-attr">itemSchema:</span>
            <span class="hljs-string">$ref:</span> <span class="hljs-string">"#/components/schemas/LogEntry"</span>
          <span class="hljs-attr">examples:</span>
            <span class="hljs-attr">JSONL:</span>
              <span class="hljs-string">$ref:</span> <span class="hljs-string">"#/components/examples/LogJSONPerLine"</span>
        <span class="hljs-attr">application/x-ndjson:</span>
          <span class="hljs-attr">itemSchema:</span>
            <span class="hljs-string">$ref:</span> <span class="hljs-string">"#/components/schemas/LogEntry"</span>
          <span class="hljs-attr">examples:</span>
            <span class="hljs-attr">NDJSON:</span>
              <span class="hljs-string">$ref:</span> <span class="hljs-string">"#/components/examples/LogJSONPerLine"</span>
    <span class="hljs-attr">LogExcerpt:</span>
      <span class="hljs-attr">description:</span> <span class="hljs-string">|
        A response consisting of no more than 100 log records,
        generally as a result of a query of the historical log,
        available in any of the sequential JSON media types.
</span>      <span class="hljs-attr">content:</span>
        <span class="hljs-attr">application/json-seq:</span>
          <span class="hljs-attr">schema:</span>
            <span class="hljs-string">$ref:</span> <span class="hljs-string">"#/components/schemas/Log"</span>
          <span class="hljs-attr">examples:</span>
            <span class="hljs-attr">JSON-SEQ:</span>
              <span class="hljs-string">$ref:</span> <span class="hljs-string">"#/components/examples/LogJSONSeq"</span>
        <span class="hljs-attr">application/jsonl:</span>
          <span class="hljs-attr">schema:</span>
            <span class="hljs-string">$ref:</span> <span class="hljs-string">"#/components/schemas/Log"</span>
          <span class="hljs-attr">examples:</span>
            <span class="hljs-attr">JSONL:</span>
              <span class="hljs-string">$ref:</span> <span class="hljs-string">"#/components/examples/LogJSONPerLine"</span>
        <span class="hljs-attr">application/x-ndjson:</span>
          <span class="hljs-attr">schema:</span>
            <span class="hljs-string">$ref:</span> <span class="hljs-string">"#/components/schemas/Log"</span>
          <span class="hljs-attr">examples:</span>
            <span class="hljs-attr">NDJSON:</span>
              <span class="hljs-string">$ref:</span> <span class="hljs-string">"#/components/examples/LogJSONPerLine"</span>
</code></pre>
                    <p>我们的 <code>application/json-seq</code> 示例必须放在外部文档中，因为它同时使用换行符和不可打印的记录分隔符（<code>0x1E</code>），该字符无法在
                        YAML 块文本中转义：</p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-meta">0x1E</span><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"timestamp"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1985-04-12T23:20:50.52Z"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"level"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"message"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Hi!"</span>
<span class="hljs-punctuation">}</span>
<span class="hljs-meta">0x1E</span><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"timestamp"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1985-04-12T23:20:51.37Z"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"level"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"message"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Bye!"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
                </section>
                <section id="server-sent-event-streams">
                    <div class="header-wrapper">
                        <h5 id="x4-14-6-3-server-sent-event-streams"><bdi class="secno">4.14.6.3 </bdi>服务器推送事件流</h5><a
                            class="self-link" href="#server-sent-event-streams"
                            aria-label="Permalink for Section 4.14.6.3"></a>
                    </div>
                    <p>在此示例中，假设在 <a href="#special-considerations-for-server-sent-events">Special Considerations for
                            Server-Sent Events</a> 节中提供的通用事件 schema 可通过 <code>#/components/schemas/Event</code> 访问：</p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">description:</span> <span class="hljs-string">A</span> <span class="hljs-string">request</span> <span class="hljs-string">body</span> <span class="hljs-string">to</span> <span class="hljs-string">add</span> <span class="hljs-string">a</span> <span class="hljs-string">stream</span> <span class="hljs-string">of</span> <span class="hljs-string">typed</span> <span class="hljs-string">data.</span>
<span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>
<span class="hljs-attr">content:</span>
  <span class="hljs-attr">text/event-stream:</span>
    <span class="hljs-attr">itemSchema:</span>
      <span class="hljs-string">$ref:</span> <span class="hljs-string">"#/components/schemas/Event"</span>
      <span class="hljs-attr">required:</span> [<span class="hljs-string">event</span>]
      <span class="hljs-attr">oneOf:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">properties:</span>
          <span class="hljs-attr">event:</span>
            <span class="hljs-attr">const:</span> <span class="hljs-string">addString</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">properties:</span>
          <span class="hljs-attr">event:</span>
            <span class="hljs-attr">const:</span> <span class="hljs-string">addInt64</span>
          <span class="hljs-attr">data:</span>
            <span class="hljs-string">$comment:</span> <span class="hljs-string">|
              Since the `data` field is a string,
              we need a format to signal that it
              should be handled as a 64-bit integer.
</span>            <span class="hljs-attr">format:</span> <span class="hljs-string">int64</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">properties:</span>
          <span class="hljs-attr">event:</span>
            <span class="hljs-attr">const:</span> <span class="hljs-string">addJson</span>
          <span class="hljs-attr">data:</span>
            <span class="hljs-string">$comment:</span> <span class="hljs-string">|
              These content fields indicate
              that the string value should
              be parsed and validated as a
              JSON document (since JSON is not
              a binary format, `contentEncoding`
              is not needed)
</span>            <span class="hljs-attr">contentMediaType:</span> <span class="hljs-string">application/json</span>
            <span class="hljs-attr">contentSchema:</span>
              <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
              <span class="hljs-attr">required:</span> [<span class="hljs-string">foo</span>]
              <span class="hljs-attr">properties:</span>
                <span class="hljs-attr">foo:</span>
                  <span class="hljs-attr">type:</span> <span class="hljs-string">integer</span>
</code></pre>
                    <p>下面的 <code>text/event-stream</code> 文档是上述示例的一个有效请求体示例：</p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">event</span>: addString
<span class="hljs-attr">data</span>: This data is formatted
<span class="hljs-attr">data</span>: across two lines
<span class="hljs-attr">retry</span>: 5
<span class="hljs-attr">
event</span>: addInt64
<span class="hljs-attr">data</span>: 1234.5678
<span class="hljs-attr">unknownField</span>: this is ignored
<span class="hljs-attr">
</span><span class="hljs-comment">: This is a comment</span>
<span class="hljs-attr">event</span>: addJSON
<span class="hljs-attr">data</span>: {"foo": 42}
</code></pre>
                    <p>为更清楚地展示该流如何处理，下面是等效的 JSON Lines 文档，显示数值与 JSON 数据如何作为字符串处理，以及未知字段与注释如何被忽略且不会传入 schema 验证：</p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-punctuation">{</span><span class="hljs-attr">"event"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"addString"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"data"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"This data is formatted\nacross two lines"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"retry"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">5</span><span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">{</span><span class="hljs-attr">"event"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"addInt64"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"data"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1234.5678"</span><span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">{</span><span class="hljs-attr">"event"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"addJSON"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"data"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"{\"foo\": 42}"</span><span class="hljs-punctuation">}</span>
</code></pre>
                </section>
            </section>
            <section id="considerations-for-file-uploads">
                <div class="header-wrapper">
                    <h4 id="x4-14-7-considerations-for-file-uploads"><bdi class="secno">4.14.7 </bdi>文件上传注意事项</h4><a
                        class="self-link" href="#considerations-for-file-uploads"
                        aria-label="Permalink for Section 4.14.7"></a>
                </div>
                <p>与 OpenAPI 2.0 相比，OAS 3.x 中的 <code>file</code> 输入/输出内容使用与任何其他 schema 类型相同的语义进行描述。</p>
                <p>与 OAS 3.0 不同，OAS 3.1 中 <code>format</code> 关键字对 schema 的内容编码不再产生影响。取而代之的是使用 JSON Schema 的
                    <code>contentEncoding</code> 与 <code>contentMediaType</code> 关键字。有关如何使用这些关键字建模各种场景以及如何从先前的
                    <code>format</code> 用法迁移，请参见 <a href="#working-with-binary-data">Working With Binary Data</a>。
                </p>
                <p>示例：</p>
                <p>以二进制（octet-stream）传输的内容 <em class="rfc2119">MAY</em> 省略 <code>schema</code>：</p>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-comment"># a PNG image as a binary file:</span>
<span class="hljs-attr">content:</span>
  <span class="hljs-attr">image/png:</span> {}
</code></pre>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-comment"># an arbitrary binary file:</span>
<span class="hljs-attr">content:</span>
  <span class="hljs-attr">application/octet-stream:</span> {}
</code></pre>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-comment"># arbitrary JSON without constraints beyond being syntactically valid:</span>
<span class="hljs-attr">content:</span>
  <span class="hljs-attr">application/json:</span> {}
</code></pre>
                <p>这些示例适用于文件上传的输入有效载荷或作为响应的有效载荷。</p>
                <p>用于在 <code>POST</code> 操作中提交文件的 <code>requestBody</code> 示例可能如下所示：</p>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">requestBody:</span>
  <span class="hljs-attr">content:</span>
    <span class="hljs-attr">application/octet-stream:</span> {}
</code></pre>
                <p>此外，可指定特定的媒体类型 <em class="rfc2119">MAY</em>：</p>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-comment"># multiple, specific media types may be specified:</span>
<span class="hljs-attr">requestBody:</span>
  <span class="hljs-attr">content:</span>
    <span class="hljs-comment"># a binary file of type png or jpeg</span>
    <span class="hljs-attr">image/jpeg:</span> {}
    <span class="hljs-attr">image/png:</span> {}
</code></pre>
                <p>要上传多个文件，必须使用 <code>multipart</code> 媒体类型，如 <a
                        href="#example-multipart-form-with-multiple-files">Example: Multipart Form with Multiple
                        Files</a> 所示。</p>
            </section>
        </section>
        <section id="encoding-object">
            <div class="header-wrapper">
                <h3 id="x4-15-encoding-object"><bdi class="secno">4.15 </bdi>Encoding 对象</h3><a class="self-link"
                    href="#encoding-object" aria-label="Permalink for Section 4.15"></a>
            </div>
            <p>应用于单个值的单个编码定义，Encoding Objects 与值之间的映射由 <a href="#media-type-object">Media Type Object</a> 决定，详见 <a
                    href="#encoding-usage-and-restrictions">Encoding Usage and Restrictions</a>。</p>
            <p>有关将各种类型的值转换为字符串表示的讨论，请参阅 <a href="#appendix-b-data-type-conversion">Appendix B</a>。</p>
            <p>有关表单媒体类型的百分号编码问题的详细检查，请参阅 <a href="#appendix-e-percent-encoding-and-form-media-types">Appendix E</a>。</p>
            <section id="fixed-fields-12">
                <div class="header-wrapper">
                    <h4 id="x4-15-1-fixed-fields"><bdi class="secno">4.15.1 </bdi>固定字段</h4><a class="self-link"
                        href="#fixed-fields-12" aria-label="Permalink for Section 4.15.1"></a>
                </div>
                <section id="common-fixed-fields-0">
                    <div class="header-wrapper">
                        <h5 id="x4-15-1-1-common-fixed-fields"><bdi class="secno">4.15.1.1 </bdi>常用固定字段
                        </h5><a class="self-link" href="#common-fixed-fields-0"
                            aria-label="Permalink for Section 4.15.1.1"></a>
                    </div>
                    <p>这些字段 <em class="rfc2119">MAY</em> 可与下节所定义的 RFC6570 风格序列化字段一并使用或单独使用。</p>
                    <table>
                        <thead>
                            <tr>
                                <th>字段名</th>
                                <th style="text-align:center">类型</th>
                                <th>描述</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><span id="encoding-content-type"></span>contentType</td>
                                <td style="text-align:center"><code>string</code></td>
                                <td>用于编码特定属性的 <code>Content-Type</code>。值为以逗号分隔的列表，每一项要么是具体的媒体类型（例如
                                    <code>image/png</code>），要么是通配的媒体类型（例如 <code>image/*</code>）。默认值依赖于下表所示的类型。
                                </td>
                            </tr>
                            <tr>
                                <td><span id="encoding-headers"></span>headers</td>
                                <td style="text-align:center">Map[<code>string</code>, <a href="#header-object">Header
                                        Object</a> | <a href="#reference-object">Reference Object</a>]</td>
                                <td>允许以头部形式提供附加信息的映射。
                                    <code>Content-Type</code> 在此处单独描述并且在本节中 <em class="rfc2119">SHALL</em> 被忽略。若媒体类型不是
                                    <code>multipart</code>，则此字段 <em class="rfc2119">SHALL</em> 被忽略。
                                </td>
                            </tr>
                            <tr>
                                <td><span id="encoding-encoding"></span>encoding</td>
                                <td style="text-align:center">Map[<code>string</code>, <a
                                        href="#encoding-object">Encoding Object</a>]</td>
                                <td>以与 <a href="#media-type-object">Media Type Object</a> 的 <code>encoding</code>
                                    字段相同的方式应用嵌套的 Encoding Objects。</td>
                            </tr>
                            <tr>
                                <td><span id="encoding-prefix-encoding"></span>prefixEncoding</td>
                                <td style="text-align:center">[<a href="#encoding-object">Encoding Object</a>]</td>
                                <td>以与 <a href="#media-type-object">Media Type Object</a> 的 <code>prefixEncoding</code>
                                    字段相同的方式应用嵌套的 Encoding Objects。</td>
                            </tr>
                            <tr>
                                <td><span id="encoding-item-encoding"></span>itemEncoding</td>
                                <td style="text-align:center"><a href="#encoding-object">Encoding Object</a></td>
                                <td>以与 <a href="#media-type-object">Media Type Object</a> 的 <code>itemEncoding</code>
                                    字段相同的方式应用嵌套的 Encoding Objects。</td>
                            </tr>
                        </tbody>
                    </table>
                    <p>该对象 <em class="rfc2119">MAY</em> 可通过 <a href="#specification-extensions">Specification
                            Extensions</a> 进行扩展。</p>
                    <p><code>contentType</code> 的默认值如下，其中 <em>n/a</em> 在 <code>contentEncoding</code> 列中表示
                        <code>contentEncoding</code> 的存在或值与该情况无关。
                        本表基于 Encoding Object 所应用的值，参见 <a href="#encoding-usage-and-restrictions">Encoding Usage and
                            Restrictions</a>。
                        注意在 <a href="#encoding-by-name">Encoding By Name</a> 情况下，对于类型为 <code>"array"</code>
                        的属性，这一值是数组项；对于其它类型则是整个值。因此本表中 <code>array</code> 行仅适用于在按名称编码时位于顶层数组内部的数组值。
                    </p>
                    <table>
                        <thead>
                            <tr>
                                <th><code>type</code></th>
                                <th><code>contentEncoding</code></th>
                                <th>默认 <code>contentType</code></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><a href="#working-with-binary-data"><em>absent</em></a></td>
                                <td><em>n/a</em></td>
                                <td><code>application/octet-stream</code></td>
                            </tr>
                            <tr>
                                <td><code>string</code></td>
                                <td><em>present</em></td>
                                <td><code>application/octet-stream</code></td>
                            </tr>
                            <tr>
                                <td><code>string</code></td>
                                <td><em>absent</em></td>
                                <td><code>text/plain</code></td>
                            </tr>
                            <tr>
                                <td><code>number</code>, <code>integer</code>, or <code>boolean</code></td>
                                <td><em>n/a</em></td>
                                <td><code>text/plain</code></td>
                            </tr>
                            <tr>
                                <td><code>object</code></td>
                                <td><em>n/a</em></td>
                                <td><code>application/json</code></td>
                            </tr>
                            <tr>
                                <td><code>array</code></td>
                                <td><em>n/a</em></td>
                                <td><code>application/json</code></td>
                            </tr>
                        </tbody>
                    </table>
                    <p>如何处理 <code>null</code> 类型的 <code>type</code> 值取决于 <code>null</code> 值的序列化方式。
                        若 <code>null</code> 值被完全省略，则 <code>contentType</code> 无关紧要。
                        有关数据类型转换选项的讨论，请参阅 <a href="#appendix-b-data-type-conversion">Appendix B</a>。
                    </p>
                </section>
                <section id="fixed-fields-for-rfc6570-style-serialization">
                    <div class="header-wrapper">
                        <h5 id="x4-15-1-2-fixed-fields-for-rfc6570-style-serialization"><bdi class="secno">4.15.1.2
                            </bdi>用于 RFC6570 风格序列化的固定字段</h5><a class="self-link"
                            href="#fixed-fields-for-rfc6570-style-serialization"
                            aria-label="Permalink for Section 4.15.1.2"></a>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>字段名</th>
                                <th style="text-align:center">类型</th>
                                <th>描述</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><span id="encoding-style"></span>style</td>
                                <td style="text-align:center"><code>string</code></td>
                                <td>描述特定属性值将如何根据其类型进行序列化。关于 <a href="#parameter-object">Parameter Object</a> 中 <a
                                        href="#parameter-style"><code>style</code></a> 字段的详细信息请参阅相应部分。其行为与
                                    <code>query</code> 参数采用相同的取值，包括默认值 <code>"form"</code>（该默认仅在由于显式指定了
                                    <code>explode</code> 或 <code>allowReserved</code> 而未使用 <code>contentType</code>
                                    时适用）。注意用于查询字符串的初始 <code>?</code> 在 <code>application/x-www-form-urlencoded</code>
                                    消息体中不使用，若使用 RFC6570 实现则 <em class="rfc2119">MUST</em> 将其移除（若手动构造字符串则不要添加）。若媒体类型不是
                                    <code>application/x-www-form-urlencoded</code> 或
                                    <code>multipart/form-data</code>，则此字段 <em class="rfc2119">SHALL</em>
                                    被忽略。若显式定义了该值，则隐式或显式的 <a href="#encoding-content-type"><code>contentType</code></a>
                                    <em class="rfc2119">SHALL</em> 被忽略。
                                </td>
                            </tr>
                            <tr>
                                <td><span id="encoding-explode"></span>explode</td>
                                <td style="text-align:center"><code>boolean</code></td>
                                <td>当为真时，类型为 <code>array</code> 或 <code>object</code>
                                    的属性会为数组的每个值或映射的每个键值对生成独立的参数。对于其他类型的属性，或当 <a
                                        href="#encoding-style"><code>style</code></a> 为 <code>"deepObject"</code>
                                    时，该字段无效。若 <code>style</code> 为 <code>"form"</code>，默认值为 <code>true</code>；其它样式默认值为
                                    <code>false</code>。若媒体类型不是 <code>application/x-www-form-urlencoded</code> 或
                                    <code>multipart/form-data</code>，此字段 <em class="rfc2119">SHALL</em>
                                    被忽略。若显式定义了该值，则隐式或显式的 <a href="#encoding-content-type"><code>contentType</code></a>
                                    <em class="rfc2119">SHALL</em> 被忽略。
                                </td>
                            </tr>
                            <tr>
                                <td><span id="encoding-allow-reserved"></span>allowReserved</td>
                                <td style="text-align:center"><code>boolean</code></td>
                                <td>当为真时，参数值按 [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc6570"
                                            title="URI Template">RFC6570</a></cite>] 所定义的保留扩展进行序列化（参见 <a
                                        href="https://datatracker.ietf.org/doc/html/rfc6570#section-3.2.3">Section
                                        3.2.3</a>），这允许 RFC3986 的保留字符集以及百分号编码三元组保持不变，同时对所有其他不允许的字符进行百分号编码（包括百分号
                                    <code>%</code>，若其不属于百分号编码三元组）。应用程序仍需对目标媒体类型不允许的保留字符进行百分号编码；详见 <a
                                        href="#url-percent-encoding">URL Percent-Encoding</a>。默认值为
                                    <code>false</code>。若媒体类型不是 <code>application/x-www-form-urlencoded</code> 或
                                    <code>multipart/form-data</code>，此字段 <em class="rfc2119">SHALL</em>
                                    被忽略。若显式定义了该值，则隐式或显式的 <a href="#encoding-content-type"><code>contentType</code></a>
                                    <em class="rfc2119">SHALL</em> 被忽略。
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <p>当对 <code>multipart/form-data</code> 使用 RFC6570 风格序列化时，<em class="rfc2119">MUST NOT</em> 应用 URI
                        百分号编码，且 <code>allowReserved</code> 的值无影响。
                        另见 <a href="#appendix-c-using-rfc6570-based-serialization">Appendix C: Using RFC6570
                            Implementations</a> 以获取额外指导。</p>
                    <p>注意：至少存在 <code>style</code>、<code>explode</code> 或 <code>allowReserved</code> 中的任一显式值，相当于在
                        Parameter Objects 中使用 <code>schema</code> 且 <code>in: "query"</code>。
                        若这三者都缺失，则等同于使用 <code>content</code>，但媒体类型由 <code>contentType</code> 指定，而非通过 Media Type Object
                        指定。
                    </p>
                </section>
            </section>
            <section id="nested-encoding">
                <div class="header-wrapper">
                    <h4 id="x4-15-2-nested-encoding"><bdi class="secno">4.15.2 </bdi>嵌套编码</h4><a class="self-link"
                        href="#nested-encoding" aria-label="Permalink for Section 4.15.2"></a>
                </div>
                <p>需要编码的嵌套格式（最显著的是嵌套的 <code>multipart/mixed</code>）可以通过本对象的
                    <code>encoding</code>、<code>prefixEncoding</code> 和/或 <code>itemEncoding</code> 字段来支持。
                    实现 <em class="rfc2119">MUST</em> 支持一级嵌套，并且 <em class="rfc2119">MAY</em> 支持更多级别的嵌套。
                </p>
            </section>
            <section id="encoding-the-x-www-form-urlencoded-media-type">
                <div class="header-wrapper">
                    <h4 id="x4-15-3-encoding-the-x-www-form-urlencoded-media-type"><bdi class="secno">4.15.3
                        </bdi>对 <code>x-www-form-urlencoded</code> 媒体类型的编码</h4><a class="self-link"
                        href="#encoding-the-x-www-form-urlencoded-media-type"
                        aria-label="Permalink for Section 4.15.3"></a>
                </div>
                <p>要使用 [<cite><a class="bibref" data-link-type="biblio" href="#bib-whatwg-url"
                            title="URL Standard">WHATWG-URL</a></cite>] 的表单 URL 编码规则处理内容，请在 <a
                        href="#media-type-object">Media Type Object</a> 中使用
                    <code>application/x-www-form-urlencoded</code> 媒体类型。
                    这种配置意味着在任何复杂对象序列化为字符串表示之后，内容 <em class="rfc2119">MUST</em> 按照该媒体类型的 [<cite><a class="bibref"
                            data-link-type="biblio" href="#bib-whatwg-url" title="URL Standard">WHATWG-URL</a></cite>]
                    规则进行百分号编码。
                </p>
                <p>有关表单媒体类型的百分号编码问题的详细检查，请参见 <a href="#appendix-e-percent-encoding-and-form-media-types">Appendix E</a>。
                </p>
                <section id="example-url-encoded-form-with-json-values">
                    <div class="header-wrapper">
                        <h5 id="x4-15-3-1-example-url-encoded-form-with-json-values"><bdi class="secno">4.15.3.1
                            </bdi>示例：包含 JSON 值的 URL 编码表单</h5><a class="self-link"
                            href="#example-url-encoded-form-with-json-values"
                            aria-label="Permalink for Section 4.15.3.1"></a>
                    </div>
                    <p>当不存在 <a href="#media-type-encoding"><code>encoding</code></a> 字段时，序列化策略基于 Encoding Object 的默认值：
                    </p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">requestBody:</span>
  <span class="hljs-attr">content:</span>
    <span class="hljs-attr">application/x-www-form-urlencoded:</span>
      <span class="hljs-attr">schema:</span>
        <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
        <span class="hljs-attr">properties:</span>
          <span class="hljs-attr">id:</span>
            <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
            <span class="hljs-attr">format:</span> <span class="hljs-string">uuid</span>
          <span class="hljs-attr">address:</span>
            <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
            <span class="hljs-attr">properties:</span> {}
</code></pre>
                    <p>在此示例中，考虑一个 <code>id</code> 为 <code>f81d4fae-7dec-11d0-a765-00a0c91e6bf6</code> 且美国式地址（含 ZIP+4）如下：
                    </p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"streetAddress"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"123 Example Dr."</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"city"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Somewhere"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"state"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"CA"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"zip"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"99999+1234"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
                    <p>假设采用最紧凑的 JSON 表示（去除不必要的空白），我们期望看到如下请求体，其中空格字符被替换为 <code>+</code>，并且
                        <code>+</code>、<code>"</code>、<code>:</code>、<code>,</code>、<code>{</code> 与 <code>}</code>
                        分别被百分号编码为 <code>%2B</code>、<code>%22</code>、<code>%3A</code>、<code>%2C</code>、<code>%7B</code> 与
                        <code>%7D</code>：
                    </p>
                    <pre class="nohighlight" tabindex="0"><code>id=<span class="hljs-literal">f81d4fae-7dec-11d0-a765-00a0c91e6bf6</span>&amp;<span class="hljs-attr">address</span>=<span class="hljs-literal">%7B%22streetAddress%22%3A%22123+Example+Dr.%22%2C%22city%22%3A%22Somewhere%22%2C%22state%22%3A%22CA%22%2C%22zip%22%3A%2299999%2B1234%22%7D</span>
</code></pre>
                    <p>注意根据 Encoding Object 的默认行为，<code>id</code> 关键字被视为 <code>text/plain</code> 并按原样序列化。
                        若将其视为 <code>application/json</code>，则序列化值将是包含引号的 JSON 字符串，而引号会被百分号编码为 <code>%22</code>。</p>
                    <p>下面示例展示将 <code>id</code> 参数（不含 <code>address</code>）作为 <code>application/json</code> 而不是
                        <code>text/plain</code> 序列化，然后按 [<cite><a class="bibref" data-link-type="biblio"
                                href="#bib-whatwg-url" title="URL Standard">WHATWG-URL</a></cite>] 的
                        <code>form-urlencoded</code> 规则编码：
                    </p>
                    <pre class="nohighlight" tabindex="0"><code>id=<span class="hljs-literal">%22f81d4fae-7dec-11d0-a765-00a0c91e6bf6%22</span>
</code></pre>
                </section>
                <section id="example-url-encoded-form-with-binary-values">
                    <div class="header-wrapper">
                        <h5 id="x4-15-3-2-example-url-encoded-form-with-binary-values"><bdi class="secno">4.15.3.2
                            </bdi>示例：包含二进制值的 URL 编码表单</h5><a class="self-link"
                            href="#example-url-encoded-form-with-binary-values"
                            aria-label="Permalink for Section 4.15.3.2"></a>
                    </div>
                    <p>注意 <code>application/x-www-form-urlencoded</code> 是文本格式，任何二进制数据都需要进行 base64 编码：</p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">requestBody:</span>
  <span class="hljs-attr">content:</span>
    <span class="hljs-attr">application/x-www-form-urlencoded:</span>
      <span class="hljs-attr">schema:</span>
        <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
        <span class="hljs-attr">properties:</span>
          <span class="hljs-attr">name:</span>
            <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
          <span class="hljs-attr">icon:</span>
            <span class="hljs-comment"># The default content type with `contentEncoding` present</span>
            <span class="hljs-comment"># is `application/octet-stream`, so we need to set the correct</span>
            <span class="hljs-comment"># image media type(s) in the Encoding Object.</span>
            <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
            <span class="hljs-attr">contentEncoding:</span> <span class="hljs-string">base64url</span>
  <span class="hljs-attr">encoding:</span>
    <span class="hljs-attr">icon:</span>
      <span class="hljs-attr">contentType:</span> <span class="hljs-string">image/png,</span> <span class="hljs-string">image/jpeg</span>
</code></pre>
                    <p>假设 <code>name</code> 为 <code>example</code>，且 <code>icon</code> 为一个实心红色的 2x2 像素 PNG，则会产生如下请求体：
                    </p>
                    <pre class="nohighlight" tabindex="0"><code>name=<span class="hljs-literal">example</span>&amp;<span class="hljs-attr">icon</span>=<span class="hljs-literal">iVBORw0KGgoAAAANSUhEUgAAAAIAAAACCAIAAAD91JpzAAAABGdBTUEAALGPC_xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAqADAAQAAAABAAAAAgAAAADO0J6QAAAAEElEQVQIHWP8zwACTGCSAQANHQEDqtPptQAAAABJRU5ErkJggg%3D%3D</span>
</code></pre>
                    <p>注意即使使用“URL safe”的 <code>contentEncoding: base64url</code>，末尾的 <code>=</code> 填充字符仍需进行百分号编码。
                        一些 base64 解码实现可能根据 [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc4648"
                                title="The Base16, Base32, and Base64 Data Encodings">RFC4648</a></cite>] 第 3.2 节
                        能够在没有填充的情况下处理字符串，但这并不保证，因此保留填充并依赖百分号解码通常更具互操作性。</p>
                </section>
            </section>
            <section id="encoding-multipart-media-types">
                <div class="header-wrapper">
                    <h4 id="x4-15-4-encoding-multipart-media-types"><bdi class="secno">4.15.4 </bdi>对
                        <code>multipart</code> 媒体类型的编码
                    </h4><a class="self-link" href="#encoding-multipart-media-types"
                        aria-label="Permalink for Section 4.15.4"></a>
                </div>
                <p>关于将 schema 属性与各部分相关联的指导，请参阅 <a href="#encoding-usage-and-restrictions">Encoding Usage and
                        Restrictions</a>。</p>
                <p>注意一般情况下 <code>multipart</code> 媒体类型对可用头部有显著限制（参见 [<cite><a class="bibref" data-link-type="biblio"
                            href="#bib-rfc2046"
                            title="Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types">RFC2046</a></cite>]
                    第 5.1 节）以及对 <code>multi-part/form-data</code> 的特殊限制（参见 [<cite><a class="bibref"
                            data-link-type="biblio" href="#bib-rfc7578"
                            title="Returning Values from Forms: multipart/form-data">RFC7578</a></cite>] 第 4.8 节）。</p>
                <section id="handling-multiple-contenttype-values">
                    <div class="header-wrapper">
                        <h5 id="x4-15-4-1-handling-multiple-contenttype-values"><bdi class="secno">4.15.4.1
                            </bdi>处理多个 <code>contentType</code> 值</h5><a class="self-link"
                            href="#handling-multiple-contenttype-values"
                            aria-label="Permalink for Section 4.15.4.1"></a>
                    </div>
                    <p>当为 <code>contentType</code> 提供多个值时，解析仍然直接，因为文档中包含了该部分的实际 <code>Content-Type</code>。</p>
                    <p>对于编码和序列化，实施应 <em class="rfc2119">MUST</em> 提供机制让应用程序指明意图使用的媒体类型。
                        实现 <em class="rfc2119">MAY</em> 选择提供媒体类型嗅探（[<cite><a class="bibref" data-link-type="biblio"
                                href="#bib-sniff"
                                title="MIME Sniffing Standard">SNIFF</a></cite>]）作为替代，但由于该过程固有的安全风险，该方法 <em
                            class="rfc2119">MUST NOT</em> 成为默认行为。</p>
                </section>
                <section id="content-transfer-encoding-and-contentencoding">
                    <div class="header-wrapper">
                        <h5 id="x4-15-4-2-content-transfer-encoding-and-contentencoding"><bdi class="secno">4.15.4.2
                            </bdi><code>Content-Transfer-Encoding</code> 与 <code>contentEncoding</code></h5><a
                            class="self-link" href="#content-transfer-encoding-and-contentencoding"
                            aria-label="Permalink for Section 4.15.4.2"></a>
                    </div>
                    <p>对 multipart 字段使用 <code>contentEncoding</code> 等同于指定一个 <a href="#encoding-object">Encoding
                            Object</a>，其 <code>headers</code> 字段包含一个要求使用 <code>contentEncoding</code> 值的
                        <code>Content-Transfer-Encoding</code> 的 schema。
                        若对一个 multipart 字段同时使用了 <code>contentEncoding</code>，且该字段的 Encoding Object 的 <code>headers</code>
                        中包含了一个不允许来自 <code>contentEncoding</code> 的值的 <code>Content-Transfer-Encoding</code>
                        schema，则序列化和解析的结果为未定义。
                    </p>
                    <p>注意，如 <a href="#working-with-binary-data">Working with Binary Data</a> 所述，若 Encoding Object 的
                        <code>contentType</code>（无论是显式设置还是通过默认规则隐式确定）与 Schema Object 中的 <code>contentMediaType</code>
                        不一致，则应忽略 <code>contentMediaType</code>。
                        因此，并且由于 Encoding Object 的 <code>contentType</code> 默认规则未考虑 Schema Object 的
                        <code>contentMediaType</code>，在 Encoding Object 中使用 <code>contentMediaType</code> <em
                            class="rfc2119">NOT RECOMMENDED</em>。
                    </p>
                    <p>另请注意对于 <code>multipart/form-data</code>，<code>Content-Transfer-Encoding</code> 已被弃用（参见 [<cite><a
                                class="bibref" data-link-type="biblio" href="#bib-rfc7578"
                                title="Returning Values from Forms: multipart/form-data">RFC7578</a></cite>] 第 4.7 节），因为
                        HTTP 已支持二进制数据。</p>
                    <p>有关表单媒体类型的百分号编码问题的详细检查，请参阅 <a href="#appendix-e-percent-encoding-and-form-media-types">Appendix
                            E</a>。</p>
                </section>
                <section id="example-basic-multipart-form">
                    <div class="header-wrapper">
                        <h5 id="x4-15-4-3-example-basic-multipart-form"><bdi class="secno">4.15.4.3 </bdi>示例：基本的
                            Multipart 表单</h5><a class="self-link" href="#example-basic-multipart-form"
                            aria-label="Permalink for Section 4.15.4.3"></a>
                    </div>
                    <p>当不使用 <code>encoding</code> 字段时，编码由 Encoding Object 的默认值决定：</p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">requestBody:</span>
  <span class="hljs-attr">content:</span>
    <span class="hljs-attr">multipart/form-data:</span>
      <span class="hljs-attr">schema:</span>
        <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
        <span class="hljs-attr">properties:</span>
          <span class="hljs-comment"># default content type for a string without `contentEncoding`</span>
          <span class="hljs-comment"># is `text/plain`</span>
          <span class="hljs-attr">id:</span>
            <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
            <span class="hljs-attr">format:</span> <span class="hljs-string">uuid</span>

          <span class="hljs-comment"># default content type for a schema without `type`</span>
          <span class="hljs-comment"># is `application/octet-stream`</span>
          <span class="hljs-attr">profileImage:</span> {}

          <span class="hljs-comment"># for arrays, the `encoding` field applies the Encoding Object</span>
          <span class="hljs-comment"># to each item individually and determines the default content type</span>
          <span class="hljs-comment"># based on the type in the `items` subschema, which in this example</span>
          <span class="hljs-comment"># is an object, so the default content type for each item is</span>
          <span class="hljs-comment"># `application/json`</span>
          <span class="hljs-attr">addresses:</span>
            <span class="hljs-attr">type:</span> <span class="hljs-string">array</span>
            <span class="hljs-attr">items:</span>
              <span class="hljs-string">$ref:</span> <span class="hljs-string">'#/components/schemas/Address'</span>
</code></pre>
                </section>
                <section id="example-multipart-form-with-encoding-objects">
                    <div class="header-wrapper">
                        <h5 id="x4-15-4-4-example-multipart-form-with-encoding-objects"><bdi class="secno">4.15.4.4
                            </bdi>示例：包含 Encoding Objects 的 Multipart 表单</h5><a class="self-link"
                            href="#example-multipart-form-with-encoding-objects"
                            aria-label="Permalink for Section 4.15.4.4"></a>
                    </div>
                    <p>使用 <code>encoding</code>，我们可以为二进制数据设置更具体的类型，或为复杂值设置非 JSON 格式。
                        我们也可以为每个部分描述其头部：</p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">requestBody:</span>
  <span class="hljs-attr">content:</span>
    <span class="hljs-attr">multipart/form-data:</span>
      <span class="hljs-attr">schema:</span>
        <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
        <span class="hljs-attr">properties:</span>
          <span class="hljs-comment"># No Encoding Object, so use default `text/plain`</span>
          <span class="hljs-attr">id:</span>
            <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
            <span class="hljs-attr">format:</span> <span class="hljs-string">uuid</span>

          <span class="hljs-comment"># Encoding Object overrides the default `application/json` content type</span>
          <span class="hljs-comment"># for each item in the array with `application/xml; charset=utf-8`</span>
          <span class="hljs-attr">addresses:</span>
            <span class="hljs-attr">description:</span> <span class="hljs-string">addresses</span> <span class="hljs-string">in</span> <span class="hljs-string">XML</span> <span class="hljs-string">format</span>
            <span class="hljs-attr">type:</span> <span class="hljs-string">array</span>
            <span class="hljs-attr">items:</span>
              <span class="hljs-string">$ref:</span> <span class="hljs-string">'#/components/schemas/Address'</span>

          <span class="hljs-comment"># Encoding Object accepts only PNG or JPEG, and also describes</span>
          <span class="hljs-comment"># a custom header for just this part in the multipart format</span>
          <span class="hljs-attr">profileImage:</span> {}

      <span class="hljs-attr">encoding:</span>
        <span class="hljs-attr">addresses:</span>
          <span class="hljs-attr">contentType:</span> <span class="hljs-string">application/xml;</span> <span class="hljs-string">charset=utf-8</span>
        <span class="hljs-attr">profileImage:</span>
          <span class="hljs-attr">contentType:</span> <span class="hljs-string">image/png,</span> <span class="hljs-string">image/jpeg</span>
          <span class="hljs-attr">headers:</span>
            <span class="hljs-attr">X-Rate-Limit-Limit:</span>
              <span class="hljs-attr">description:</span> <span class="hljs-string">The</span> <span class="hljs-string">number</span> <span class="hljs-string">of</span> <span class="hljs-string">allowed</span> <span class="hljs-string">requests</span> <span class="hljs-string">in</span> <span class="hljs-string">the</span> <span class="hljs-string">current</span> <span class="hljs-string">period</span>
              <span class="hljs-attr">schema:</span>
                <span class="hljs-attr">type:</span> <span class="hljs-string">integer</span>
</code></pre>
                </section>
                <section id="example-multipart-form-with-multiple-files">
                    <div class="header-wrapper">
                        <h5 id="x4-15-4-5-example-multipart-form-with-multiple-files"><bdi class="secno">4.15.4.5
                            </bdi>示例：包含多个文件的 Multipart 表单</h5><a class="self-link"
                            href="#example-multipart-form-with-multiple-files"
                            aria-label="Permalink for Section 4.15.4.5"></a>
                    </div>
                    <p>根据 [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc7578"
                                title="Returning Values from Forms: multipart/form-data">RFC7578</a></cite>] 第 4.3
                        节，单个表单字段的多个文件通过为每个文件的部分使用相同的名称（在本例中为 <code>file</code>）上传：</p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">requestBody:</span>
  <span class="hljs-attr">content:</span>
    <span class="hljs-attr">multipart/form-data:</span>
      <span class="hljs-attr">schema:</span>
        <span class="hljs-attr">properties:</span>
          <span class="hljs-comment"># The property name `file` will be used for all files.</span>
          <span class="hljs-attr">file:</span>
            <span class="hljs-attr">type:</span> <span class="hljs-string">array</span>
            <span class="hljs-attr">items:</span> {}
</code></pre>
                    <p>如 <a href="#encoding-content-type">Encoding Object 的 <code>contentType</code> 字段文档</a>
                        中所示，<code>items</code> 的空 schema 表示媒体类型为 <code>application/octet-stream</code>。</p>
                </section>
                <section id="example-ordered-unnamed-multipart">
                    <div class="header-wrapper">
                        <h5 id="x4-15-4-6-example-ordered-unnamed-multipart"><bdi class="secno">4.15.4.6 </bdi>示例：
                            有序且无名的 Multipart</h5><a class="self-link" href="#example-ordered-unnamed-multipart"
                            aria-label="Permalink for Section 4.15.4.6"></a>
                    </div>
                    <p>一个由 JSON 元数据文档随后跟随该元数据所描述的图像组成的 <code>multipart/mixed</code> 有载荷示例：</p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">multipart/mixed:</span>
  <span class="hljs-attr">schema:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">array</span>
    <span class="hljs-attr">prefixItems:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-comment"># default content type for objects</span>
      <span class="hljs-comment"># is `application/json`</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
      <span class="hljs-attr">properties:</span>
        <span class="hljs-attr">author:</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
        <span class="hljs-attr">created:</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
          <span class="hljs-attr">format:</span> <span class="hljs-string">datetime</span>
        <span class="hljs-attr">copyright:</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
        <span class="hljs-attr">license:</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
    <span class="hljs-bullet">-</span> <span class="hljs-comment"># default content type for a schema without `type`</span>
      <span class="hljs-comment"># is `application/octet-stream`, which we need</span>
      <span class="hljs-comment"># to override.</span>
      {}
  <span class="hljs-attr">prefixEncoding:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-comment"># Encoding Object defaults are correct for JSON</span>
    {}
  <span class="hljs-bullet">-</span> <span class="hljs-attr">contentType:</span> <span class="hljs-string">image/*</span>
</code></pre>
                </section>
                <section id="example-ordered-multipart-with-required-header">
                    <div class="header-wrapper">
                        <h5 id="x4-15-4-7-example-ordered-multipart-with-required-header"><bdi class="secno">4.15.4.7
                            </bdi>示例：有必需头部的有序 Multipart</h5><a class="self-link"
                            href="#example-ordered-multipart-with-required-header"
                            aria-label="Permalink for Section 4.15.4.7"></a>
                    </div>
                    <p>如 [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc2557"
                                title="MIME Encapsulation of Aggregate Documents, such as HTML (MHTML)">RFC2557</a></cite>]
                        所述，一组构成网页的资源可以在 <code>multipart/related</code> 有载荷中发送，通过为每个页面定义 <code>Content-Location</code>
                        头来保留从 <code>text/html</code> 文档到从属资源（脚本、样式表、图像等）的链接。
                        第一部分被用作根资源（除非使用 RFC2557 建议避免且在本示例中被禁止的 <code>Content-ID</code>），因此我们使用 <code>prefixItems</code>
                        与 <code>prefixEncoding</code> 来定义其必须是 HTML 资源，然后允许若干种不同类型的资源以任意顺序跟随。
                    </p>
                    <p>为避免对其 URI 值进行百分号编码，<code>Content-Location</code> 头使用 <code>content: {text/plain: {...}}</code>
                        定义；详见 <a href="#appendix-d-serializing-headers-and-cookies">Appendix D</a>。</p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">components:</span>
  <span class="hljs-attr">headers:</span>
    <span class="hljs-attr">RFC2557NoContentId:</span>
      <span class="hljs-attr">description:</span> <span class="hljs-string">Use</span> <span class="hljs-string">Content-Location</span> <span class="hljs-string">instead</span> <span class="hljs-string">of</span> <span class="hljs-string">Content-ID</span>
      <span class="hljs-attr">schema:</span> <span class="hljs-literal">false</span>
    <span class="hljs-attr">RFC2557ContentLocation:</span>
      <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>
      <span class="hljs-attr">content:</span>
        <span class="hljs-attr">text/plain:</span>
          <span class="hljs-attr">schema:</span>
            <span class="hljs-string">$comment:</span> <span class="hljs-string">Use</span> <span class="hljs-string">a</span> <span class="hljs-string">full</span> <span class="hljs-string">URI</span> <span class="hljs-string">(not</span> <span class="hljs-string">a</span> <span class="hljs-string">relative</span> <span class="hljs-string">reference)</span>
            <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
            <span class="hljs-attr">format:</span> <span class="hljs-string">uri</span>
  <span class="hljs-attr">requestBodies:</span>
    <span class="hljs-attr">RFC2557:</span>
      <span class="hljs-attr">content:</span>
        <span class="hljs-string">multipart/related;</span> <span class="hljs-string">type=text/html:</span>
          <span class="hljs-attr">schema:</span>
            <span class="hljs-attr">prefixItems:</span>
            <span class="hljs-bullet">-</span> <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
            <span class="hljs-attr">items:</span>
              <span class="hljs-attr">anyOf:</span>
              <span class="hljs-bullet">-</span> <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
              <span class="hljs-bullet">-</span> <span class="hljs-string">$comment:</span> <span class="hljs-string">To</span> <span class="hljs-string">allow</span> <span class="hljs-string">binary,</span> <span class="hljs-string">this</span> <span class="hljs-string">must</span> <span class="hljs-string">always</span> <span class="hljs-string">pass</span>
          <span class="hljs-attr">prefixEncoding:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-attr">contentType:</span> <span class="hljs-string">text/html</span>
            <span class="hljs-attr">headers:</span>
              <span class="hljs-attr">Content-ID:</span>
                <span class="hljs-string">$ref:</span> <span class="hljs-string">'#/components/headers/RFC2557NoContentId'</span>
              <span class="hljs-attr">Content-Location:</span>
                <span class="hljs-string">$ref:</span> <span class="hljs-string">'#/components/headers/RFC2557ContentLocation'</span>
          <span class="hljs-attr">itemEncoding:</span>
            <span class="hljs-attr">contentType:</span> <span class="hljs-string">text/css,text/javascript,image/*</span>
            <span class="hljs-attr">headers:</span>
              <span class="hljs-attr">Content-ID:</span>
                <span class="hljs-string">$ref:</span> <span class="hljs-string">'#/components/headers/RFC2557NoContentId'</span>
              <span class="hljs-attr">Content-Location:</span>
                <span class="hljs-string">$ref:</span> <span class="hljs-string">'#/components/headers/RFC2557ContentLocation'</span>
</code></pre>
                </section>
                <section id="example-streaming-multipart">
                    <div class="header-wrapper">
                        <h5 id="x4-15-4-8-example-streaming-multipart"><bdi class="secno">4.15.4.8 </bdi>示例：
                            流式 Multipart</h5><a class="self-link" href="#example-streaming-multipart"
                            aria-label="Permalink for Section 4.15.4.8"></a>
                    </div>
                    <p>本例假设一个设备拍摄大量图片并将其流式传输给调用方。与前例不同，我们在此使用
                        <code>itemSchema</code>，因为期望每张图片在到达时（或少量批次）被处理，而缓冲整个流将占用过多内存。
                    </p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">multipart/mixed:</span>
  <span class="hljs-attr">itemSchema:</span>
    <span class="hljs-string">$comment:</span> <span class="hljs-string">A</span> <span class="hljs-string">single</span> <span class="hljs-string">data</span> <span class="hljs-string">image</span> <span class="hljs-string">from</span> <span class="hljs-string">the</span> <span class="hljs-string">device</span>
  <span class="hljs-attr">itemEncoding:</span>
    <span class="hljs-attr">contentType:</span> <span class="hljs-string">image/jpg</span>
</code></pre>
                </section>
                <section id="example-streaming-byte-ranges">
                    <div class="header-wrapper">
                        <h5 id="x4-15-4-9-example-streaming-byte-ranges"><bdi class="secno">4.15.4.9 </bdi>示例：
                            流式字节范围</h5><a class="self-link" href="#example-streaming-byte-ranges"
                            aria-label="Permalink for Section 4.15.4.9"></a>
                    </div>
                    <p>对于 <code>multipart/byteranges</code>（参见 [<cite><a class="bibref" data-link-type="biblio"
                                href="#bib-rfc9110" title="HTTP Semantics">RFC9110</a></cite>] 第 14.6 节），需要包含
                        <code>Content-Range</code> 头：
                    </p>
                    <p>关于为何使用 <code>content: {text/plain: {...}}</code> 来描述头值的解释，请参见 <a
                            href="#appendix-d-serializing-headers-and-cookies">Appendix D</a>。</p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">multipart/byteranges:</span>
  <span class="hljs-attr">itemSchema:</span>
    <span class="hljs-string">$comment:</span> <span class="hljs-string">A</span> <span class="hljs-string">single</span> <span class="hljs-string">range</span> <span class="hljs-string">of</span> <span class="hljs-string">bytes</span> <span class="hljs-string">from</span> <span class="hljs-string">a</span> <span class="hljs-string">video</span>
  <span class="hljs-attr">itemEncoding:</span>
    <span class="hljs-attr">contentType:</span> <span class="hljs-string">video/mp4</span>
    <span class="hljs-attr">headers:</span>
      <span class="hljs-attr">Content-Range:</span>
        <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>
        <span class="hljs-attr">content:</span>
          <span class="hljs-attr">text/plain:</span>
            <span class="hljs-attr">schema:</span>
              <span class="hljs-comment"># The `pattern` regular expression that would</span>
              <span class="hljs-comment"># be included in practice is omitted for simplicity</span>
              <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
</code></pre>
                </section>
                <section id="example-nested-multipart-mixed">
                    <div class="header-wrapper">
                        <h5 id="x4-15-4-10-example-nested-multipart-mixed"><bdi class="secno">4.15.4.10 </bdi>示例：
                            嵌套的 <code>multipart/mixed</code></h5><a class="self-link"
                            href="#example-nested-multipart-mixed" aria-label="Permalink for Section 4.15.4.10"></a>
                    </div>
                    <p>此示例定义了一个两部分的 <code>multipart/mixed</code>，其中第一部分是一个 JSON 数组，第二部分是一个嵌套的
                        <code>multipart/mixed</code> 文档。嵌套部分为 XML、纯文本和 PNG 图像。
                    </p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">multipart/mixed:</span>
  <span class="hljs-attr">schema:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">array</span>
    <span class="hljs-attr">prefixItems:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">type:</span> <span class="hljs-string">array</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">type:</span> <span class="hljs-string">array</span>
      <span class="hljs-attr">prefixItems:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
      <span class="hljs-bullet">-</span> {}
  <span class="hljs-attr">prefixEncoding:</span>
    <span class="hljs-bullet">-</span> {} <span class="hljs-comment"># Accept the default application/json</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">contentType:</span> <span class="hljs-string">multipart/mixed</span>
      <span class="hljs-attr">prefixEncoding:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">contentType:</span> <span class="hljs-string">application/xml</span>
      <span class="hljs-bullet">-</span> {} <span class="hljs-comment"># Accept the default text/plain</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">contentType:</span> <span class="hljs-string">image/png</span>
</code></pre>
                </section>
            </section>
        </section>
        <section id="responses-object">
            <div class="header-wrapper">
                <h3 id="x4-16-responses-object"><bdi class="secno">4.16 </bdi>Responses 对象</h3><a class="self-link"
                    href="#responses-object" aria-label="Permalink for Section 4.16"></a>
            </div>
            <p>用于描述某个操作预期的响应的容器。
                该容器将 HTTP 响应代码映射到预期的响应。</p>
            <p>文档不一定需要覆盖所有可能的 HTTP 响应代码，因为某些响应代码可能事先未知。
                但文档应当覆盖成功操作的响应以及任何已知的错误。</p>
            <p><code>default</code> <em class="rfc2119">MAY</em> 可用作 Responses Object 中未单独覆盖的所有 HTTP 代码的默认 Response
                Object。</p>
            <p>Responses Object <em class="rfc2119">MUST</em> 至少包含一个响应代码；如果只提供了一个响应代码，则该代码 <em
                    class="rfc2119">SHOULD</em> 为成功操作调用的响应。</p>
            <section id="fixed-fields-13">
                <div class="header-wrapper">
                    <h4 id="x4-16-1-fixed-fields"><bdi class="secno">4.16.1 </bdi>固定字段</h4><a class="self-link"
                        href="#fixed-fields-13" aria-label="Permalink for Section 4.16.1"></a>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>字段名</th>
                            <th style="text-align:center">类型</th>
                            <th>描述</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><span id="responses-default"></span>default</td>
                            <td style="text-align:center"><a href="#response-object">Response Object</a> | <a
                                    href="#reference-object">Reference Object</a></td>
                            <td>对未为特定 HTTP 响应代码声明的其它响应的文档。使用此字段来覆盖未声明的响应。</td>
                        </tr>
                    </tbody>
                </table>
            </section>
            <section id="patterned-fields-0">
                <div class="header-wrapper">
                    <h4 id="x4-16-2-patterned-fields"><bdi class="secno">4.16.2 </bdi>模式字段</h4><a class="self-link"
                        href="#patterned-fields-0" aria-label="Permalink for Section 4.16.2"></a>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>字段模式</th>
                            <th style="text-align:center">类型</th>
                            <th>描述</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><span id="responses-code"></span><a href="#http-status-codes">HTTP 状态码</a></td>
                            <td style="text-align:center"><a href="#response-object">Response Object</a> | <a
                                    href="#reference-object">Reference Object</a></td>
                            <td>任意 <a href="#http-status-codes">HTTP 状态码</a> 可用作属性名，但每个代码只能有一个属性，用以描述该 HTTP 状态码的预期响应。为兼容
                                JSON 与 YAML，此字段 <em class="rfc2119">MUST</em> 用引号包围（例如，“200”）。要定义响应码范围，该字段 <em
                                    class="rfc2119">MAY</em> 使用大写通配符字符 <code>X</code>，例如 <code>2XX</code> 表示所有 200 到 299
                                的响应代码。仅允许以下范围定义：<code>1XX</code>、<code>2XX</code>、<code>3XX</code>、<code>4XX</code> 和
                                <code>5XX</code>。若使用显式代码定义了某响应，则该显式定义优先于相应的范围定义。
                            </td>
                        </tr>
                    </tbody>
                </table>
                <p>该对象 <em class="rfc2119">MAY</em> 可通过 <a href="#specification-extensions">规范扩展</a> 进行扩展。</p>
            </section>
            <section id="http-status-codes">
                <div class="header-wrapper">
                    <h4 id="x4-16-3-http-status-codes"><bdi class="secno">4.16.3 </bdi>HTTP 状态码</h4><a class="self-link"
                        href="#http-status-codes" aria-label="Permalink for Section 4.16.3"></a>
                </div>
                <p>HTTP 状态码用于指示已执行操作的状态。
                    应当从 <cite><a class="bibref" data-link-type="biblio" href="#bib-iana-http-status-codes"
                            title="Hypertext Transfer Protocol (HTTP) Status Code Registry">IANA Status Code
                            Registry</a></cite> 中注册的可用状态码中选择状态码，尽量遵循该注册表。</p>
            </section>
            <section id="responses-object-example">
                <div class="header-wrapper">
                    <h4 id="x4-16-4-responses-object-example"><bdi class="secno">4.16.4 </bdi>Responses 对象示例
                    </h4><a class="self-link" href="#responses-object-example"
                        aria-label="Permalink for Section 4.16.4"></a>
                </div>
                <p>一个用于成功操作的 200 响应，以及用于其它情况的默认响应（表示错误）：</p>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">'200':</span>
  <span class="hljs-attr">description:</span> <span class="hljs-string">a</span> <span class="hljs-string">pet</span> <span class="hljs-string">to</span> <span class="hljs-string">be</span> <span class="hljs-string">returned</span>
  <span class="hljs-attr">content:</span>
    <span class="hljs-attr">application/json:</span>
      <span class="hljs-attr">schema:</span>
        <span class="hljs-string">$ref:</span> <span class="hljs-string">'#/components/schemas/Pet'</span>
<span class="hljs-attr">default:</span>
  <span class="hljs-attr">description:</span> <span class="hljs-string">Unexpected</span> <span class="hljs-string">error</span>
  <span class="hljs-attr">content:</span>
    <span class="hljs-attr">application/json:</span>
      <span class="hljs-attr">schema:</span>
        <span class="hljs-string">$ref:</span> <span class="hljs-string">'#/components/schemas/ErrorModel'</span>
</code></pre>
            </section>
        </section>
        <section id="response-object">
            <div class="header-wrapper">
                <h3 id="x4-17-response-object"><bdi class="secno">4.17 </bdi>Response 对象</h3><a class="self-link"
                    href="#response-object" aria-label="Permalink for Section 4.17"></a>
            </div>
            <p>描述 API 操作返回的单个响应，包括基于该响应的设计时静态 <code>links</code> 到其它操作。</p>
            <section id="fixed-fields-14">
                <div class="header-wrapper">
                    <h4 id="x4-17-1-fixed-fields"><bdi class="secno">4.17.1 </bdi>固定字段</h4><a class="self-link"
                        href="#fixed-fields-14" aria-label="Permalink for Section 4.17.1"></a>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>字段名</th>
                            <th style="text-align:center">类型</th>
                            <th>描述</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><span id="response-summary"></span>summary</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td>对该响应含义的简要概述。</td>
                        </tr>
                        <tr>
                            <td><span id="response-description"></span>description</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td>对响应的描述。可以使用 [<cite><a class="bibref" data-link-type="biblio" href="#bib-commonmark"
                                        title="CommonMark Spec">CommonMark</a></cite>] 语法来进行富文本表示（<em
                                    class="rfc2119">MAY</em>）。</td>
                        </tr>
                        <tr>
                            <td><span id="response-headers"></span>headers</td>
                            <td style="text-align:center">Map[<code>string</code>, <a href="#header-object">Header
                                    Object</a> | <a href="#reference-object">Reference Object</a>]</td>
                            <td>将头名称映射到其定义。[<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc9110"
                                        title="HTTP Semantics">RFC9110</a></cite>] 第 5.1 节 指出头名称不区分大小写。如果响应头以名称
                                <code>"Content-Type"</code> 定义，则应被忽略。
                            </td>
                        </tr>
                        <tr>
                            <td><span id="response-content"></span>content</td>
                            <td style="text-align:center">Map[<code>string</code>, <a href="#media-type-object">Media
                                    Type Object</a> | <a href="#reference-object">Reference Object</a>]</td>
                            <td>包含潜在响应负载描述的映射。键为媒体类型或 <a
                                    href="https://tools.ietf.org/html/rfc9110#appendix-A">媒体类型范围</a>，值描述该媒体类型。对于匹配多个键的响应，只有最具体的键适用（例如
                                <code>"text/plain"</code> 覆盖 <code>"text/*"</code>）。
                            </td>
                        </tr>
                        <tr>
                            <td><span id="response-links"></span>links</td>
                            <td style="text-align:center">Map[<code>string</code>, <a href="#link-object">Link
                                    Object</a> | <a href="#reference-object">Reference Object</a>]</td>
                            <td>一个可从响应中跟随的操作链接映射。映射的键是链接的短名称，遵循 <a href="#components-object">Component Objects</a>
                                名称的命名约束。</td>
                        </tr>
                    </tbody>
                </table>
                <p>该对象 <em class="rfc2119">MAY</em> 可通过 <a href="#specification-extensions">规范扩展</a> 进行扩展。</p>
            </section>
            <section id="response-object-examples">
                <div class="header-wrapper">
                    <h4 id="x4-17-2-response-object-examples"><bdi class="secno">4.17.2 </bdi>Response 对象示例
                    </h4><a class="self-link" href="#response-object-examples"
                        aria-label="Permalink for Section 4.17.2"></a>
                </div>
                <p>返回复杂类型数组的响应：</p>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">description:</span> <span class="hljs-string">A</span> <span class="hljs-string">complex</span> <span class="hljs-string">object</span> <span class="hljs-string">array</span> <span class="hljs-string">response</span>
<span class="hljs-attr">content:</span>
  <span class="hljs-attr">application/json:</span>
    <span class="hljs-attr">schema:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">array</span>
      <span class="hljs-attr">items:</span>
        <span class="hljs-string">$ref:</span> <span class="hljs-string">'#/components/schemas/VeryComplexType'</span>
</code></pre>
                <p>返回字符串类型的响应：</p>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">description:</span> <span class="hljs-string">A</span> <span class="hljs-string">simple</span> <span class="hljs-string">string</span> <span class="hljs-string">response</span>
<span class="hljs-attr">content:</span>
  <span class="hljs-attr">text/plain:</span>
    <span class="hljs-attr">schema:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
</code></pre>
                <p>带头部的纯文本响应：</p>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">description:</span> <span class="hljs-string">A</span> <span class="hljs-string">simple</span> <span class="hljs-string">string</span> <span class="hljs-string">response</span>
<span class="hljs-attr">content:</span>
  <span class="hljs-attr">text/plain:</span>
    <span class="hljs-attr">schema:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
    <span class="hljs-attr">example:</span> <span class="hljs-string">'whoa!'</span>
<span class="hljs-attr">headers:</span>
  <span class="hljs-attr">X-Rate-Limit-Limit:</span>
    <span class="hljs-attr">description:</span> <span class="hljs-string">The</span> <span class="hljs-string">number</span> <span class="hljs-string">of</span> <span class="hljs-string">allowed</span> <span class="hljs-string">requests</span> <span class="hljs-string">in</span> <span class="hljs-string">the</span> <span class="hljs-string">current</span> <span class="hljs-string">period</span>
    <span class="hljs-attr">schema:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">integer</span>
  <span class="hljs-attr">X-Rate-Limit-Remaining:</span>
    <span class="hljs-attr">description:</span> <span class="hljs-string">The</span> <span class="hljs-string">number</span> <span class="hljs-string">of</span> <span class="hljs-string">remaining</span> <span class="hljs-string">requests</span> <span class="hljs-string">in</span> <span class="hljs-string">the</span> <span class="hljs-string">current</span> <span class="hljs-string">period</span>
    <span class="hljs-attr">schema:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">integer</span>
  <span class="hljs-attr">X-Rate-Limit-Reset:</span>
    <span class="hljs-attr">description:</span> <span class="hljs-string">The</span> <span class="hljs-string">number</span> <span class="hljs-string">of</span> <span class="hljs-string">seconds</span> <span class="hljs-string">left</span> <span class="hljs-string">in</span> <span class="hljs-string">the</span> <span class="hljs-string">current</span> <span class="hljs-string">period</span>
    <span class="hljs-attr">schema:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">integer</span>
</code></pre>
                <p>无返回值的响应：</p>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">description:</span> <span class="hljs-string">object</span> <span class="hljs-string">created</span>
</code></pre>
            </section>
        </section>
        <section id="callback-object">
            <div class="header-wrapper">
                <h3 id="x4-18-callback-object"><bdi class="secno">4.18 </bdi>Callback 对象</h3><a class="self-link"
                    href="#callback-object" aria-label="Permalink for Section 4.18"></a>
            </div>
            <p>与父操作相关的可能的带外回调映射。
                映射中的每个值都是一个 <a href="#path-item-object">Path Item Object</a>，用于描述 API 提供者可能发起的一组请求以及预期的响应。
                用于标识 Path Item Object 的键是一个在运行时求值的表达式，用来标识回调操作要使用的 URL。</p>
            <p>若要描述来自 API 提供者的入站请求（独立于另一次 API 调用），请使用 <a href="#oas-webhooks"><code>webhooks</code></a> 字段。</p>
            <section id="patterned-fields-1">
                <div class="header-wrapper">
                    <h4 id="x4-18-1-patterned-fields"><bdi class="secno">4.18.1 </bdi>模式字段</h4><a class="self-link"
                        href="#patterned-fields-1" aria-label="Permalink for Section 4.18.1"></a>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>字段模式</th>
                            <th style="text-align:center">类型</th>
                            <th>描述</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><span id="callback-expression"></span>{expression}</td>
                            <td style="text-align:center"><a href="#path-item-object">Path Item Object</a></td>
                            <td>用于定义回调请求和预期响应的 Path Item Object。可参见一个 <a
                                    href="https://learn.openapis.org/examples/v3.0/callback-example.html">完整示例</a>。</td>
                        </tr>
                    </tbody>
                </table>
                <p>该对象 <em class="rfc2119">MAY</em> 可通过 <a href="#specification-extensions">规范扩展</a> 进行扩展。</p>
            </section>
            <section id="key-expression">
                <div class="header-wrapper">
                    <h4 id="x4-18-2-key-expression"><bdi class="secno">4.18.2 </bdi>键表达式</h4><a class="self-link"
                        href="#key-expression" aria-label="Permalink for Section 4.18.2"></a>
                </div>
                <p>用于标识 <a href="#path-item-object">Path Item Object</a> 的键是一个 <a
                        href="#runtime-expressions">运行时表达式</a>，该表达式可以在运行时 HTTP 请求/响应的上下文中求值，以识别用于回调请求的 URL。例如，一个简单的示例可能是
                    <code>$request.body#/url</code>。
                    使用 <a href="#runtime-expressions">运行时表达式</a> 可以访问完整的 HTTP 消息，这包括访问 JSON Pointer [<cite><a
                            class="bibref" data-link-type="biblio" href="#bib-rfc6901"
                            title="JavaScript Object Notation (JSON) Pointer">RFC6901</a></cite>] 可引用的任何部分。
                </p>
                <p>例如，给定如下 HTTP 请求：</p>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-keyword">POST</span> <span class="hljs-string">/subscribe/myevent?queryUrl=https://clientdomain.com/stillrunning</span> <span class="hljs-meta">HTTP/1.1</span>
<span class="hljs-attribute">Host</span><span class="hljs-punctuation">: </span>example.org
<span class="hljs-attribute">Content-Type</span><span class="hljs-punctuation">: </span>application/json
<span class="hljs-attribute">Content-Length</span><span class="hljs-punctuation">: </span>188

<span class="language-uri">{
  "failedUrl": "https://<span class="hljs-attr">clientdomain.com</span>/<span class="hljs-attr">failed",</span>
  "successUrls": [
    "https://<span class="hljs-attr">clientdomain.com</span>/<span class="hljs-attr">fast",</span>
    "https://<span class="hljs-attr">clientdomain.com</span>/<span class="hljs-attr">medium",</span>
    "https://<span class="hljs-attr">clientdomain.com</span>/<span class="hljs-attr">slow"</span>
  ]
}
</span></code></pre>
                <p>结果为：</p>
                <pre class="nohighlight" tabindex="0"><code>201 Created
<span class="hljs-attribute">Location</span><span class="hljs-punctuation">: </span>https://example.org/subscription/1
</code></pre>
                <p>下面的示例展示了在假设回调操作具有名为 <code>eventType</code> 的路径参数和名为 <code>queryUrl</code> 的查询参数时，各表达式如何求值。</p>
                <table>
                    <thead>
                        <tr>
                            <th>表达式</th>
                            <th style="text-align:left">值</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>$url</td>
                            <td style="text-align:left"><a
                                    href="https://example.org/subscribe/myevent?queryUrl=https://clientdomain.com/stillrunning">https://example.org/subscribe/myevent?queryUrl=https://clientdomain.com/stillrunning</a>
                            </td>
                        </tr>
                        <tr>
                            <td>$method</td>
                            <td style="text-align:left">POST</td>
                        </tr>
                        <tr>
                            <td>$request.path.eventType</td>
                            <td style="text-align:left">myevent</td>
                        </tr>
                        <tr>
                            <td>$request.query.queryUrl</td>
                            <td style="text-align:left"><a
                                    href="https://clientdomain.com/stillrunning">https://clientdomain.com/stillrunning</a>
                            </td>
                        </tr>
                        <tr>
                            <td>$request.header.content-type</td>
                            <td style="text-align:left">application/json</td>
                        </tr>
                        <tr>
                            <td>$request.body#/failedUrl</td>
                            <td style="text-align:left"><a
                                    href="https://clientdomain.com/failed">https://clientdomain.com/failed</a></td>
                        </tr>
                        <tr>
                            <td>$request.body#/successUrls/1</td>
                            <td style="text-align:left"><a
                                    href="https://clientdomain.com/medium">https://clientdomain.com/medium</a></td>
                        </tr>
                        <tr>
                            <td>$response.header.Location</td>
                            <td style="text-align:left"><a
                                    href="https://example.org/subscription/1">https://example.org/subscription/1</a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </section>
            <section id="callback-object-examples">
                <div class="header-wrapper">
                    <h4 id="x4-18-3-callback-object-examples"><bdi class="secno">4.18.3 </bdi>Callback 对象示例
                    </h4><a class="self-link" href="#callback-object-examples"
                        aria-label="Permalink for Section 4.18.3"></a>
                </div>
                <p>下面的示例使用用户提供的查询字符串参数 <code>queryUrl</code> 来定义回调 URL。这类似于 <a
                        href="#oas-webhooks">webhook</a>，但不同之处在于回调仅在最初发送了 <code>queryUrl</code> 的请求之后才发生。</p>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">myCallback:</span>
  <span class="hljs-string">'{$request.query.queryUrl}'</span><span class="hljs-string">:</span>
    <span class="hljs-attr">post:</span>
      <span class="hljs-attr">requestBody:</span>
        <span class="hljs-attr">description:</span> <span class="hljs-string">Callback</span> <span class="hljs-string">payload</span>
        <span class="hljs-attr">content:</span>
          <span class="hljs-attr">application/json:</span>
            <span class="hljs-attr">schema:</span>
              <span class="hljs-string">$ref:</span> <span class="hljs-string">'#/components/schemas/SomePayload'</span>
      <span class="hljs-attr">responses:</span>
        <span class="hljs-attr">'200':</span>
          <span class="hljs-attr">description:</span> <span class="hljs-string">callback</span> <span class="hljs-string">successfully</span> <span class="hljs-string">processed</span>
</code></pre>
                <p>下面的示例展示了一个回调，其中服务器是硬编码的，但查询字符串参数由请求体中的 <code>id</code> 和 <code>email</code> 属性填充。</p>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">transactionCallback:</span>
  <span class="hljs-string">'http://notificationServer.com?transactionId={$request.body#/id}&amp;email={$request.body#/email}'</span><span class="hljs-string">:</span>
    <span class="hljs-attr">post:</span>
      <span class="hljs-attr">requestBody:</span>
        <span class="hljs-attr">description:</span> <span class="hljs-string">Callback</span> <span class="hljs-string">payload</span>
        <span class="hljs-attr">content:</span>
          <span class="hljs-attr">application/json:</span>
            <span class="hljs-attr">schema:</span>
              <span class="hljs-string">$ref:</span> <span class="hljs-string">'#/components/schemas/SomePayload'</span>
      <span class="hljs-attr">responses:</span>
        <span class="hljs-attr">'200':</span>
          <span class="hljs-attr">description:</span> <span class="hljs-string">callback</span> <span class="hljs-string">successfully</span> <span class="hljs-string">processed</span>
</code></pre>
            </section>
        </section>
        <section id="example-object">
            <div class="header-wrapper">
                <h3 id="x4-19-example-object"><bdi class="secno">4.19 </bdi>Example 对象</h3><a class="self-link"
                    href="#example-object" aria-label="Permalink for Section 4.19"></a>
            </div>
            <p>将内部或外部示例值与基本的 <code>summary</code> 和 <code>description</code> 元数据分组的对象。
                这些示例可以展示适用于 schema 验证的数据，或按包含的 <a href="#media-type-object">Media Type Object</a>、<a
                    href="#parameter-object">Parameter Object</a> 或 <a href="#header-object">Header Object</a> 要求的序列化数据。
                该对象通常用于名为 <code>examples</code>（复数）的字段，并且是可通过 <a href="#reference-object">Reference Object</a>
                引用的替代方案，弥补了旧的不可引用的单数 <code>example</code> 字段的不足。
                在 <a href="#working-with-examples">Working With Examples</a> 一节中对该对象的各字段与示例类型有更详细的说明。
            </p>
            <section id="fixed-fields-15">
                <div class="header-wrapper">
                    <h4 id="x4-19-1-fixed-fields"><bdi class="secno">4.19.1 </bdi>固定字段</h4><a class="self-link"
                        href="#fixed-fields-15" aria-label="Permalink for Section 4.19.1"></a>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>字段名</th>
                            <th style="text-align:center">类型</th>
                            <th>描述</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><span id="example-summary"></span>summary</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td>示例的简短描述。</td>
                        </tr>
                        <tr>
                            <td><span id="example-description"></span>description</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td>示例的长描述。可以使用 [<cite><a class="bibref" data-link-type="biblio" href="#bib-commonmark"
                                        title="CommonMark Spec">CommonMark</a></cite>] 语法来进行富文本表示（<em
                                    class="rfc2119">MAY</em>）。</td>
                        </tr>
                        <tr>
                            <td><span id="example-data-value"></span>dataValue</td>
                            <td style="text-align:center">Any</td>
                            <td>一个数据结构示例，该示例 <em class="rfc2119">MUST</em> 符合相关的 <a href="#schema-object">Schema
                                    Object</a> 的要求。如果存在此字段，则 <code>value</code> <em class="rfc2119">MUST</em> 缺失。</td>
                        </tr>
                        <tr>
                            <td><span id="example-serialized-value"></span>serializedValue</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td>值的序列化形式示例，包含在 <a href="#validating-examples">Validating Examples</a> 中描述的编码与转义。如果存在
                                <code>dataValue</code>，则此字段 <em class="rfc2119">SHOULD</em> 包含该数据的序列化结果。否则，它 <em
                                    class="rfc2119">SHOULD</em> 为某个数据值的有效序列化，该数据值本身按 <code>dataValue</code> 的描述 <em
                                    class="rfc2119">MUST</em> 有效。若序列化格式为 JSON，则不应使用此字段（<em class="rfc2119">SHOULD
                                    NOT</em>），因为数据形式更易于处理。如果此字段存在，则 <code>value</code> 与 <code>externalValue</code> <em
                                    class="rfc2119">MUST</em> 缺失。
                            </td>
                        </tr>
                        <tr>
                            <td><span id="example-external-value"></span>externalValue</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td>一个 URI，标识位于单独文档中的序列化示例，允许表达不能以 Unicode 字符串容易或可读地表示的值。如果存在 <code>dataValue</code>，则该字段
                                <em class="rfc2119">SHOULD</em> 标识给定数据的某种序列化形式。否则，该值 <em class="rfc2119">SHOULD</em>
                                为某个数据值的有效序列化，而该数据值本身应当按 <code>dataValue</code> 的描述 <em class="rfc2119">MUST</em>
                                有效。若此字段存在，则 <code>serializedValue</code> 与 <code>value</code> <em
                                    class="rfc2119">MUST</em> 缺失。另见解析 <a
                                    href="#relative-references-in-api-description-uris">相对引用</a> 的规则。
                            </td>
                        </tr>
                        <tr>
                            <td><span id="example-value"></span>value</td>
                            <td style="text-align:center">Any</td>
                            <td>嵌入的字面示例。<code>value</code> 与 <code>externalValue</code> 互斥。对于无法自然以 JSON 或 YAML
                                表示的媒体类型示例，请使用字符串值包含示例并在必要时进行转义。<br><br><strong>对非 JSON 序列化目标已弃用：</strong>请改用
                                <code>dataValue</code> 和/或 <code>serializedValue</code>，它们具有无歧义的语法和语义。
                            </td>
                        </tr>
                    </tbody>
                </table>
                <p>该对象 <em class="rfc2119">MAY</em> 可通过 <a href="#specification-extensions">规范扩展</a> 进行扩展。</p>
                <p>在所有情况下，示例值 <em class="rfc2119">SHOULD</em> 与其关联值的 schema 兼容。工具实现 <em class="rfc2119">MAY</em>
                    选择自动验证兼容性，并在不兼容时拒绝示例值。有关“兼容”的确切含义，请参见 <a href="#validating-examples">Validating Examples</a>
                    一节中对本对象每个字段的定义。</p>
            </section>
            <section id="working-with-examples">
                <div class="header-wrapper">
                    <h4 id="x4-19-2-working-with-examples"><bdi class="secno">4.19.2 </bdi>使用示例</h4><a class="self-link"
                        href="#working-with-examples" aria-label="Permalink for Section 4.19.2"></a>
                </div>
                <p>Example Objects 可用于 <a href="#parameter-object">Parameter Objects</a>、<a href="#header-object">Header
                        Objects</a> 和 <a href="#media-type-object">Media Type Objects</a>。
                    在这三类对象中，均通过 <code>examples</code>（复数）字段来完成。但也有其它提供示例的方式：在 Parameter、Header 或 Media Type 对象中互斥的单数
                    <code>example</code> 字段，以及在出现在三个对象的 <code>schema</code> 字段中的 <a href="#schema-object">Schema
                        Object</a> 中的两个关键字（弃用的单数 <code>example</code> 与当前的复数 <code>examples</code>，后者接受示例数组）。
                    下文中我们将单数的简写 <code>example</code> 字段（在 Parameter、Header 或 Media Type 对象中，其行为等同于只有 <code>value</code>
                    字段的单一 Example Object）称为“简写 <code>example</code>”字段。每种字段都有稍微不同的考虑因素。
                </p>
                <section id="json-compatible-and-value-safe-examples">
                    <div class="header-wrapper">
                        <h5 id="x4-19-2-1-json-compatible-and-value-safe-examples"><bdi class="secno">4.19.2.1
                            </bdi>兼容 JSON 与 <code>value</code>-安全的示例</h5><a class="self-link"
                            href="#json-compatible-and-value-safe-examples"
                            aria-label="Permalink for Section 4.19.2.1"></a>
                    </div>
                    <p><code>value</code> 与简写 <code>example</code> 字段旨在具有与 <code>serializedValue</code>（或
                        <code>externalValue</code>）相同的语义，但在 JSON（或 JSON 兼容的 YAML）表示与最终序列化形式无差异时提供更方便的语法。当将此语法用于
                        <code>application/json</code> 或任何 <code>+json</code> 媒体类型时，这些字段实际上等同于
                        <code>dataValue</code>，因为序列化是平凡的，因此使用它们是安全的。
                    </p>
                    <p>对于仅包含单个字符串的数据，且序列化目标如 <code>text/plain</code> 保证字符串以不需进一步转义的方式序列化时，这些字段也安全可用。</p>
                    <p>对于其它序列化目标，“自然地用 JSON 或 YAML 表示”的歧义性，以及先前参数样式示例表中的错误，导致这些字段在非 JSON 目标上的支持与用法存在不一致。因此，在实践中对于非 JSON
                        目标，<code>value</code> 与简写 <code>example</code> 字段的行为通常由实现定义；OAD 作者 <em
                            class="rfc2119">SHOULD</em> 使用其它字段以确保互操作性。</p>
                </section>
                <section id="choosing-which-field-s-to-use">
                    <div class="header-wrapper">
                        <h5 id="x4-19-2-2-choosing-which-field-s-to-use"><bdi class="secno">4.19.2.2 </bdi>选择使用哪些字段</h5>
                        <a class="self-link" href="#choosing-which-field-s-to-use"
                            aria-label="Permalink for Section 4.19.2.2"></a>
                    </div>
                    <p>牢记上一节中的注意事项，以及当仅涉及一个 Example Object 时可用简写 <code>example</code> 代替 <code>value</code>
                        的事实，使用下列指南决定应使用哪一字段。</p>
                    <p>若要展示一个将如何被 Schema Object 验证的示例：</p>
                    <ul>
                        <li>如果意图是将示例随验证用的 schema 一起保留，请使用 Schema Object 的 <code>examples</code> 数组（来自 JSON Schema draft
                            2020-12）。
                            <ul>
                                <li>仅当需要与 OAS v3.0 或更早版本兼容时，才使用 Schema Object 的单数 <code>example</code>。</li>
                            </ul>
                        </li>
                        <li>如果意图是将示例与其序列化形式关联，或希望将示例与 schema 分离，请使用 Example Object 的 <code>dataValue</code> 字段。
                            <ul>
                                <li>仅当需要与 OAS v3.1 或更早版本兼容且该值可“自然地在 JSON 或 YAML
                                    中表示”而无需在验证就绪的值与序列化表示之间进行任何更改（例如百分号编码）时，才使用 Example Object 的 <code>value</code> 字段。
                                </li>
                            </ul>
                        </li>
                    </ul>
                    <p>若要展示用于构建 HTTP/1.1 消息的序列化示例：</p>
                    <ul>
                        <li>如果序列化能表示为有效的 Unicode 字符串且无需展示确切字符编码，请使用 Example Object 的 <code>serializedValue</code> 字段。
                            <ul>
                                <li>仅当需要与 OAS v3.1 或更早版本兼容时，才使用 <code>value</code> 的字符串形式。</li>
                            </ul>
                        </li>
                        <li>对于其它值，或希望将示例与 OpenAPI 文档分离，请使用 Example Object 的 <code>externalValue</code>。</li>
                    </ul>
                    <p><code>serializedValue</code> 与 <code>externalValue</code> 两个字段都 <em class="rfc2119">MUST</em>
                        展示数据的序列化形式。对于 Media Type Objects，这是一份合适媒体类型的文档，并应用任何 Encoding Object 的效果。对于使用
                        <code>schema</code> 与 <code>style</code>（而不是 Media Type Object）的 Parameter 与 Header Objects，请参见
                        <a href="#style-examples">Style Examples</a>，了解何为序列化值。
                    </p>
                </section>
                <section id="criteria-for-serializedexample">
                    <div class="header-wrapper">
                        <h5 id="x4-19-2-3-criteria-for-serializedexample"><bdi class="secno">4.19.2.3 </bdi>用于
                            <code>serializedExample</code> 的标准
                        </h5><a class="self-link" href="#criteria-for-serializedexample"
                            aria-label="Permalink for Section 4.19.2.3"></a>
                    </div>
                    <p>若满足下列任一条件，则序列化可以在 <code>serializedValue</code> 中表示为有效的 Unicode 字符串：</p>
                    <ul>
                        <li>该媒体类型支持 <code>charset</code> 参数，并且该参数指示任何 Unicode 编码（UTF-8、UTF-16 等）或上述编码的有效子集（例如 US-ASCII）。
                        </li>
                        <li>该格式（例如 URI 或 HTTP 字段）或基于字符的媒体类型要求或默认使用 Unicode 编码，或其有效子集（如 US-ASCII），且未被
                            <code>charset</code> 覆盖。
                        </li>
                        <li>该格式为复合格式，且所有部分至少满足上述一项，例如一个包含 <code>application/json</code>（默认 UTF-8）和
                            <code>application/xml; charset=utf-8</code> 的 <code>multipart/mixed</code>。
                        </li>
                    </ul>
                    <p>在所有这些情况下，将 OAD 的字符集（假定为 JSON 的互操作字符集 UTF-8）先转换为 Unicode 代码点，再转换为实际序列化字符集的过程是可定义的。</p>
                    <p>对于 <code>externalValue</code>，若未显式声明字符集且格式或媒体类型规范也未确定字符集，实施者 <em class="rfc2119">SHOULD</em> 假设为
                        UTF-8。</p>
                </section>
                <section id="validating-examples">
                    <div class="header-wrapper">
                        <h5 id="x4-19-2-4-validating-examples"><bdi class="secno">4.19.2.4 </bdi>验证示例</h5><a
                            class="self-link" href="#validating-examples"
                            aria-label="Permalink for Section 4.19.2.4"></a>
                    </div>
                    <p>工具实现 <em class="rfc2119">MAY</em> 选择自动验证兼容性，并在不兼容时拒绝示例值。对于以 schema 就绪数据形式存在的示例，验证是直接且明确的。</p>
                    <p>对于序列化的示例，某些格式允许相同数据的多种有效表示形式（包括在 <a href="#appendix-b-data-type-conversion">附录 B</a>
                        中提到的场景）。在某些情况下，解析序列化示例并验证所得数据可以消除歧义，但在少数情况下解析本身也存在歧义。因此，OAD 作者应注意对某些序列化示例的验证在性质上属于尽力而为的特性。</p>
                </section>
            </section>
            <section id="example-object-examples">
                <div class="header-wrapper">
                    <h4 id="x4-19-3-example-object-examples"><bdi class="secno">4.19.3 </bdi>Example 对象示例
                    </h4><a class="self-link" href="#example-object-examples"
                        aria-label="Permalink for Section 4.19.3"></a>
                </div>
                <section id="json-examples">
                    <div class="header-wrapper">
                        <h5 id="x4-19-3-1-json-examples"><bdi class="secno">4.19.3.1 </bdi>JSON 示例</h5><a
                            class="self-link" href="#json-examples" aria-label="Permalink for Section 4.19.3.1"></a>
                    </div>
                    <p>在编写 YAML 时，<code>dataValue</code> 可以使用 JSON 语法（如 <code>noRating</code> 示例所示），但并非必须。虽然此示例对于 JSON
                        展示了 <code>dataValue</code> 与 <code>serializedValue</code> 的行为（在 <code>withRating</code>
                        示例中），但在大多数情况下只需要数据形式即可。</p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">content:</span>
  <span class="hljs-attr">application/json:</span>
    <span class="hljs-attr">schema:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
      <span class="hljs-attr">required:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">author</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">title</span>
      <span class="hljs-attr">properties:</span>
        <span class="hljs-attr">author:</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
        <span class="hljs-attr">title:</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
        <span class="hljs-attr">rating:</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">number</span>
          <span class="hljs-attr">minimum:</span> <span class="hljs-number">1</span>
          <span class="hljs-attr">maximum:</span> <span class="hljs-number">5</span>
          <span class="hljs-attr">multipleOf:</span> <span class="hljs-number">0.5</span>
    <span class="hljs-attr">examples:</span>
      <span class="hljs-attr">noRating:</span>
        <span class="hljs-attr">summary:</span> <span class="hljs-string">A</span> <span class="hljs-string">not-yet-rated</span> <span class="hljs-string">work</span>
        <span class="hljs-attr">dataValue:</span>
          <span class="hljs-attr">author:</span> <span class="hljs-string">A.</span> <span class="hljs-string">Writer</span>
          <span class="hljs-attr">title:</span> <span class="hljs-string">The</span> <span class="hljs-string">Newest</span> <span class="hljs-string">Book</span>
      <span class="hljs-attr">withRating:</span>
        <span class="hljs-attr">summary:</span> <span class="hljs-string">A</span> <span class="hljs-string">work</span> <span class="hljs-string">with</span> <span class="hljs-string">an</span> <span class="hljs-string">average</span> <span class="hljs-string">rating</span> <span class="hljs-string">of</span> <span class="hljs-number">4.5</span> <span class="hljs-string">stars</span>
        <span class="hljs-attr">dataValue:</span>
          <span class="hljs-attr">author:</span> <span class="hljs-string">A.</span> <span class="hljs-string">Writer</span>
          <span class="hljs-attr">title:</span> <span class="hljs-string">An</span> <span class="hljs-string">Older</span> <span class="hljs-string">Book</span>
          <span class="hljs-attr">rating:</span> <span class="hljs-number">4.5</span>
        <span class="hljs-attr">serializedValue:</span> <span class="hljs-string">|
          {
            "author": "A. Writer",
            "title": "An Older Book",
            "rating": 4.5
          }
</span></code></pre>
                </section>
                <section id="binary-examples">
                    <div class="header-wrapper">
                        <h5 id="x4-19-3-2-binary-examples"><bdi class="secno">4.19.3.2 </bdi>二进制示例</h5><a
                            class="self-link" href="#binary-examples" aria-label="Permalink for Section 4.19.3.2"></a>
                    </div>
                    <p>完整二进制数据使用 <code>externalValue</code> 展示：</p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">content:</span>
  <span class="hljs-attr">image/png:</span>
    <span class="hljs-attr">schema:</span> {}
    <span class="hljs-attr">examples:</span>
      <span class="hljs-attr">Red:</span>
        <span class="hljs-attr">externalValue:</span> <span class="hljs-string">./examples/2-by-2-red-pixels.png</span>
</code></pre>
                </section>
                <section id="boolean-query-parameter-examples">
                    <div class="header-wrapper">
                        <h5 id="x4-19-3-3-boolean-query-parameter-examples"><bdi class="secno">4.19.3.3 </bdi>布尔查询参数示例
                        </h5><a class="self-link" href="#boolean-query-parameter-examples"
                            aria-label="Permalink for Section 4.19.3.3"></a>
                    </div>
                    <p>由于布尔值序列化无统一标准（参见 <a href="#appendix-b-data-type-conversion">附录 B</a>），本示例使用
                        <code>dataValue</code> 与 <code>serializedValue</code> 来展示该参数的布尔序列化方式：
                    </p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">name:</span> <span class="hljs-string">flag</span>
<span class="hljs-attr">in:</span> <span class="hljs-string">query</span>
<span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>
<span class="hljs-attr">schema:</span>
  <span class="hljs-attr">type:</span> <span class="hljs-string">boolean</span>
<span class="hljs-attr">examples:</span>
  <span class="hljs-attr">"true":</span>
    <span class="hljs-attr">dataValue:</span> <span class="hljs-literal">true</span>
    <span class="hljs-attr">serializedValue:</span> <span class="hljs-string">flag=true</span>
  <span class="hljs-attr">"false":</span>
    <span class="hljs-attr">dataValue:</span> <span class="hljs-literal">false</span>
    <span class="hljs-attr">serializedValue:</span> <span class="hljs-string">flag=false</span>
</code></pre>
                </section>
            </section>
        </section>
        <section id="link-object">
            <div class="header-wrapper">
                <h3 id="x4-20-link-object"><bdi class="secno">4.20 </bdi>链接对象</h3><a class="self-link"
                    href="#link-object" aria-label="Permalink for Section 4.20"></a>
            </div>
            <p>Link Object 表示针对响应可能存在的设计时链接。
                链接的存在并不保证调用方能够成功调用它，而是提供了响应与其它操作之间已知的关系与遍历机制。</p>
            <p>与 <em>动态</em> 链接（即在响应负载中 <strong>提供</strong> 的链接）不同，OAS 的链接机制不要求在运行时响应中包含链接信息。</p>
            <p>用于计算链接并提供执行指令的是一种用于访问操作中值并在调用链接操作时将其用作参数的 <a href="#runtime-expressions">runtime expression</a>。</p>
            <section id="fixed-fields-16">
                <div class="header-wrapper">
                    <h4 id="x4-20-1-fixed-fields"><bdi class="secno">4.20.1 </bdi>固定字段</h4><a class="self-link"
                        href="#fixed-fields-16" aria-label="Permalink for Section 4.20.1"></a>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>Field Name</th>
                            <th style="text-align:center">Type</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><span id="link-operation-ref"></span>operationRef</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td>指向 OAS 操作的 URI 引用。该字段与 <code>operationId</code> 字段互斥，且 <em class="rfc2119">MUST</em>
                                指向一个 <a href="#operation-object">Operation Object</a>。相对的 <code>operationRef</code> 值
                                <em class="rfc2119">MAY</em> 用于在 OpenAPI 描述中定位已有的 <a href="#operation-object">Operation
                                    Object</a>。
                            </td>
                        </tr>
                        <tr>
                            <td><span id="link-operation-id"></span>operationId</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td>一个 <em>已存在</em>、可解析的 OAS 操作的名称，该操作以唯一的 <code>operationId</code> 定义。此字段与
                                <code>operationRef</code> 字段互斥。
                            </td>
                        </tr>
                        <tr>
                            <td><span id="link-parameters"></span>parameters</td>
                            <td style="text-align:center">Map[<code>string</code>, Any | <a
                                    href="#runtime-expressions">{expression}</a>]</td>
                            <td>表示要传递给由 <code>operationId</code> 指定或通过 <code>operationRef</code>
                                标识的操作的参数的映射。键是要使用的参数名称（可选择地带位置限定，例如用于路径中的 <code>id</code> 参数可以写作
                                <code>path.id</code>），而值可以是常量或在运行时求值并传递给被链接操作的表达式。
                            </td>
                        </tr>
                        <tr>
                            <td><span id="link-request-body"></span>requestBody</td>
                            <td style="text-align:center">Any | <a href="#runtime-expressions">{expression}</a></td>
                            <td>调用目标操作时用作请求体的字面值或 <a href="#runtime-expressions">{expression}</a>。</td>
                        </tr>
                        <tr>
                            <td><span id="link-description"></span>description</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td>该链接的描述。可使用 [<cite><a class="bibref" data-link-type="biblio" href="#bib-commonmark"
                                        title="CommonMark Spec">CommonMark</a></cite>] 语法进行富文本表示（<em
                                    class="rfc2119">MAY</em>）。</td>
                        </tr>
                        <tr>
                            <td><span id="link-server"></span>server</td>
                            <td style="text-align:center"><a href="#server-object">Server Object</a></td>
                            <td>目标操作要使用的 server 对象。</td>
                        </tr>
                    </tbody>
                </table>
                <p>该对象 <em class="rfc2119">MAY</em> 通过 <a href="#specification-extensions">Specification Extensions</a>
                    扩展。</p>
                <p>被链接的操作 <em class="rfc2119">MUST</em> 通过 <code>operationRef</code> 或 <code>operationId</code> 之一来标识。
                    被标识或引用的操作 <em class="rfc2119">MUST</em> 是唯一的；在使用 <code>operationId</code> 的情况下，它 <em
                        class="rfc2119">MUST</em> 在 OpenAPI 描述（OAD）范围内可解析。
                    由于名称冲突的可能性，对于多文档的 OAD 更推荐使用 <code>operationRef</code> 语法。
                    但因为操作的使用取决于其在 <a href="#paths-object">Paths Object</a> 中的 URL 路径模板，对于在 OAD 中被多次引用的任何 <a
                        href="#path-item-object">Path Item Object</a>，这些操作可能无法唯一解析。
                    在此类不明确的情况下，结果行为为实现定义，并且 <em class="rfc2119">MAY</em> 导致错误。
                </p>
                <p>注意无法向 <code>parameters</code> 提供与运行时表达式语法相匹配的常量值。
                    参数名称可能存在歧义，例如 <code>name: "id", in: "path"</code> 与 <code>name: "path.id", in: "query"</code>；这 <em
                        class="rfc2119">NOT RECOMMENDED</em>，其行为为实现定义。不过实现 <em class="rfc2119">SHOULD</em> 优先采用限定的解释（将
                    <code>path.id</code> 视为路径参数），因为名称总可以通过限定来消歧（例如对查询参数使用 <code>query.path.id</code>）。
                </p>
            </section>
            <section id="examples">
                <div class="header-wrapper">
                    <h4 id="x4-20-2-examples"><bdi class="secno">4.20.2 </bdi>示例</h4><a class="self-link"
                        href="#examples" aria-label="Permalink for Section 4.20.2"></a>
                </div>
                <p>从请求操作计算链接的示例，其中使用 <code>$request.path.id</code> 来将请求路径参数传递给被链接的操作。</p>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">paths:</span>
  <span class="hljs-string">/users/{id}:</span>
    <span class="hljs-attr">parameters:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">id</span>
        <span class="hljs-attr">in:</span> <span class="hljs-string">path</span>
        <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>
        <span class="hljs-attr">description:</span> <span class="hljs-string">the</span> <span class="hljs-string">user</span> <span class="hljs-string">identifier,</span> <span class="hljs-string">as</span> <span class="hljs-string">userId</span>
        <span class="hljs-attr">schema:</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
    <span class="hljs-attr">get:</span>
      <span class="hljs-attr">responses:</span>
        <span class="hljs-attr">'200':</span>
          <span class="hljs-attr">description:</span> <span class="hljs-string">the</span> <span class="hljs-string">user</span> <span class="hljs-string">being</span> <span class="hljs-string">returned</span>
          <span class="hljs-attr">content:</span>
            <span class="hljs-attr">application/json:</span>
              <span class="hljs-attr">schema:</span>
                <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
                <span class="hljs-attr">properties:</span>
                  <span class="hljs-attr">uuid:</span> <span class="hljs-comment"># the unique user id</span>
                    <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
                    <span class="hljs-attr">format:</span> <span class="hljs-string">uuid</span>
          <span class="hljs-attr">links:</span>
            <span class="hljs-attr">address:</span>
              <span class="hljs-comment"># the target link operationId</span>
              <span class="hljs-attr">operationId:</span> <span class="hljs-string">getUserAddress</span>
              <span class="hljs-attr">parameters:</span>
                <span class="hljs-comment"># get the `id` field from the request path parameter named "id"</span>
                <span class="hljs-attr">userid:</span> <span class="hljs-string">$request.path.id</span>
  <span class="hljs-comment"># the path item of the linked operation</span>
  <span class="hljs-string">/users/{userid}/address:</span>
    <span class="hljs-attr">parameters:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">userid</span>
        <span class="hljs-attr">in:</span> <span class="hljs-string">path</span>
        <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>
        <span class="hljs-attr">description:</span> <span class="hljs-string">the</span> <span class="hljs-string">user</span> <span class="hljs-string">identifier,</span> <span class="hljs-string">as</span> <span class="hljs-string">userId</span>
        <span class="hljs-attr">schema:</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
    <span class="hljs-comment"># linked operation</span>
    <span class="hljs-attr">get:</span>
      <span class="hljs-attr">operationId:</span> <span class="hljs-string">getUserAddress</span>
      <span class="hljs-attr">responses:</span>
        <span class="hljs-attr">'200':</span>
          <span class="hljs-attr">description:</span> <span class="hljs-string">the</span> <span class="hljs-string">user's</span> <span class="hljs-string">address</span>
</code></pre>
                <p>当运行时表达式求值失败时，不会向目标操作传递该参数值。</p>
                <p>可以使用响应体中的值来驱动被链接的操作。</p>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">links:</span>
  <span class="hljs-attr">address:</span>
    <span class="hljs-attr">operationId:</span> <span class="hljs-string">getUserAddressByUUID</span>
    <span class="hljs-attr">parameters:</span>
      <span class="hljs-comment"># get the `uuid` field from the `uuid` field in the response body</span>
      <span class="hljs-attr">userUuid:</span> <span class="hljs-string">$response.body#/uuid</span>
</code></pre>
                <p>客户端可酌情跟随所有链接。
                    仅凭关系的存在并不能保证权限或能够成功调用该链接。</p>
                <section id="operationref-examples">
                    <div class="header-wrapper">
                        <h5 id="x4-20-2-1-operationref-examples"><bdi class="secno">4.20.2.1
                            </bdi><code>operationRef</code> 示例</h5><a class="self-link" href="#operationref-examples"
                            aria-label="Permalink for Section 4.20.2.1"></a>
                    </div>
                    <p>由于 <code>operationId</code> 在 <a href="#operation-object">Operation Object</a> 中是可选字段，因此引用在某些情况下
                        <em class="rfc2119">MAY</em> 通过 URI 引用与 <code>operationRef</code> 一起使用来代替。
                        注意以下两个示例都通过 <a href="#paths-object">Paths Object</a> 可以标识操作，以确保该操作的路径模板是无歧义的。
                    </p>
                    <p>一个相对 URI 引用的 <code>operationRef</code>：</p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">links:</span>
  <span class="hljs-attr">UserRepositories:</span>
    <span class="hljs-comment"># returns array of '#/components/schemas/repository'</span>
    <span class="hljs-attr">operationRef:</span> <span class="hljs-string">'#/paths/~12.0~1repositories~1%7Busername%7D/get'</span>
    <span class="hljs-attr">parameters:</span>
      <span class="hljs-attr">username:</span> <span class="hljs-string">$response.body#/username</span>
</code></pre>
                    <p>一个非相对 URI 的 <code>operationRef</code>：</p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">links:</span>
  <span class="hljs-attr">UserRepositories:</span>
    <span class="hljs-comment"># returns array of '#/components/schemas/repository'</span>
    <span class="hljs-attr">operationRef:</span> <span class="hljs-string">https://na2.gigantic-server.com/#/paths/~12.0~1repositories~1%7Busername%7D/get</span>
    <span class="hljs-attr">parameters:</span>
      <span class="hljs-attr">username:</span> <span class="hljs-string">$response.body#/username</span>
</code></pre>
                    <p>注意在使用 <code>operationRef</code> 时，在 URI 片段中使用 JSON Pointer 时需要对斜线进行转义（使用 <code>~1</code>），并且需要将
                        <code>{</code> 与 <code>}</code> 分别 URL 编码为 <code>%7B</code> 与 <code>%7D</code>。
                        上述示例中未转义、经百分号解码后的路径模板为 <code>/2.0/repositories/{username}</code>。
                    </p>
                </section>
            </section>
            <section id="runtime-expressions">
                <div class="header-wrapper">
                    <h4 id="x4-20-3-runtime-expressions"><bdi class="secno">4.20.3 </bdi>运行时表达式</h4><a class="self-link"
                        href="#runtime-expressions" aria-label="Permalink for Section 4.20.3"></a>
                </div>
                <p>Runtime expressions 允许基于在实际 API 调用的 HTTP 消息中才可用的信息定义值。
                    该机制由 <a href="#link-object">Link Objects</a> 与 <a href="#callback-object">Callback Objects</a> 使用。
                </p>
                <p>运行时表达式由下列 [<cite><a class="bibref" data-link-type="biblio" href="#bib-abnf"
                            title="Augmented BNF for Syntax Specifications: ABNF">ABNF</a></cite>] 语法定义：</p>
                <pre class="nohighlight" tabindex="0"><code>    expression <span class="hljs-operator">=</span> <span class="hljs-string">"$url"</span> / <span class="hljs-string">"$method"</span> / <span class="hljs-string">"$statusCode"</span> / <span class="hljs-string">"$request."</span> source / <span class="hljs-string">"$response."</span> source
    source     <span class="hljs-operator">=</span> header-reference / query-reference / path-reference / body-reference
    header-reference <span class="hljs-operator">=</span> <span class="hljs-string">"header."</span> token
    query-reference  <span class="hljs-operator">=</span> <span class="hljs-string">"query."</span> name
    path-reference   <span class="hljs-operator">=</span> <span class="hljs-string">"path."</span> name
    body-reference   <span class="hljs-operator">=</span> <span class="hljs-string">"body"</span> [<span class="hljs-string">"#"</span> json-pointer ]
    json-pointer    <span class="hljs-operator">=</span> *( <span class="hljs-string">"/"</span> reference-token )
    reference-token <span class="hljs-operator">=</span> *( unescaped / escaped )
    unescaped       <span class="hljs-operator">=</span> <span class="hljs-symbol">%x00-2E</span> / <span class="hljs-symbol">%x30-7D</span> / <span class="hljs-symbol">%x7F-10FFFF</span>
                    <span class="hljs-comment">; %x2F ('/') and %x7E ('~') are excluded from 'unescaped'</span>
    escaped         <span class="hljs-operator">=</span> <span class="hljs-string">"~"</span> ( <span class="hljs-string">"0"</span> / <span class="hljs-string">"1"</span> )
                    <span class="hljs-comment">; representing '~' and '/', respectively</span>
    name <span class="hljs-operator">=</span> *char
    token <span class="hljs-operator">=</span> <span class="hljs-number">1</span>*tchar
    tchar <span class="hljs-operator">=</span> <span class="hljs-string">"!"</span> / <span class="hljs-string">"#"</span> / <span class="hljs-string">"$"</span> / <span class="hljs-string">"%"</span> / <span class="hljs-string">"&amp;"</span> / <span class="hljs-string">"'"</span> / <span class="hljs-string">"*"</span> / <span class="hljs-string">"+"</span> / <span class="hljs-string">"-"</span> / <span class="hljs-string">"."</span>
          / <span class="hljs-string">"^"</span> / <span class="hljs-string">"_"</span> / <span class="hljs-string">"`"</span> / <span class="hljs-string">"|"</span> / <span class="hljs-string">"~"</span> / <span class="hljs-keyword">DIGIT</span> / <span class="hljs-keyword">ALPHA</span>
</code></pre>
                <p>这里的 <code>json-pointer</code> 来源于 [<cite><a class="bibref" data-link-type="biblio"
                            href="#bib-rfc6901" title="JavaScript Object Notation (JSON) Pointer">RFC6901</a></cite>]，
                    <code>char</code> 来源于 [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc8259"
                            title="The JavaScript Object Notation (JSON) Data Interchange Format">RFC8259</a></cite>]
                    的相关部分，
                    而 <code>token</code> 来源于 [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc9110"
                            title="HTTP Semantics">RFC9110</a></cite>] 的相关部分。
                </p>
                <p>其中 <code>name</code> 标识符区分大小写，而 <code>token</code> 则不区分大小写。</p>
                <p> 下表给出了运行时表达式的示例及其在值中的使用示例：</p>
                <section id="example-expressions">
                    <div class="header-wrapper">
                        <h5 id="x4-20-3-1-example-expressions"><bdi class="secno">4.20.3.1 </bdi>示例表达式
                        </h5><a class="self-link" href="#example-expressions"
                            aria-label="Permalink for Section 4.20.3.1"></a>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>Source Location</th>
                                <th style="text-align:left">example expression</th>
                                <th style="text-align:left">notes</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>HTTP Method</td>
                                <td style="text-align:left"><code>$method</code></td>
                                <td style="text-align:left"><code>$method</code> 的允许值为 HTTP 操作所允许的那些方法。</td>
                            </tr>
                            <tr>
                                <td>Requested media type</td>
                                <td style="text-align:left"><code>$request.header.accept</code></td>
                                <td style="text-align:left"></td>
                            </tr>
                            <tr>
                                <td>Request parameter</td>
                                <td style="text-align:left"><code>$request.path.id</code></td>
                                <td style="text-align:left">请求参数 <em class="rfc2119">MUST</em> 在父操作的
                                    <code>parameters</code> 部分中声明，否则无法被求值。此规则也适用于请求头。
                                </td>
                            </tr>
                            <tr>
                                <td>Request body property</td>
                                <td style="text-align:left"><code>$request.body#/user/uuid</code></td>
                                <td style="text-align:left">在接受有效载荷的操作中，可以引用 <code>requestBody</code> 的部分或整个请求体。</td>
                            </tr>
                            <tr>
                                <td>Request URL</td>
                                <td style="text-align:left"><code>$url</code></td>
                                <td style="text-align:left"></td>
                            </tr>
                            <tr>
                                <td>Response value</td>
                                <td style="text-align:left"><code>$response.body#/status</code></td>
                                <td style="text-align:left">在返回有效载荷的操作中，可以引用响应体的部分或整个响应体。</td>
                            </tr>
                            <tr>
                                <td>Response header</td>
                                <td style="text-align:left"><code>$response.header.Server</code></td>
                                <td style="text-align:left">仅可用单个头部值。</td>
                            </tr>
                        </tbody>
                    </table>
                    <p>运行时表达式会保留被引用值的类型。
                        可以通过用花括号 <code>{}</code> 将表达式包围的方式将表达式嵌入到字符串值中。</p>
                </section>
            </section>
        </section>
        <section id="header-object">
            <div class="header-wrapper">
                <h3 id="x4-21-header-object"><bdi class="secno">4.21 </bdi>Header 对象</h3><a class="self-link"
                    href="#header-object" aria-label="Permalink for Section 4.21"></a>
            </div>
            <p>描述用于 <a href="#response-headers">HTTP responses</a> 以及用于 <a href="#encoding-headers">在
                    <code>multipart</code> 表示中的各部分</a> 的单个 header；请参阅相关的 <a href="#response-object">Response Object</a>
                与 <a href="#encoding-object">Encoding Object</a> 文档以了解哪些头可以被描述的限制。</p>
            <p>Header Object 遵循 <a href="#parameter-object">Parameter Object</a> 的结构，包括基于是否存在 <code>schema</code> 或
                <code>content</code> 来确定其序列化策略，但有如下更改：
            </p>
            <ol>
                <li><code>name</code> <em class="rfc2119">MUST NOT</em> 指定，名称由对应的 <code>headers</code> 映射给出。</li>
                <li><code>in</code> <em class="rfc2119">MUST NOT</em> 指定，其隐含位置为 <code>header</code>。</li>
                <li>所有受位置影响的特性 <em class="rfc2119">MUST</em> 适用于位置为 <code>header</code>（例如 <a
                        href="#parameter-style"><code>style</code></a>）。这意味着 <code>allowEmptyValue</code> <em
                        class="rfc2119">MUST NOT</em> 被使用，且若使用 <code>style</code>，则 <em class="rfc2119">MUST</em> 限定为
                    <code>"simple"</code>。
                </li>
            </ol>
            <section id="fixed-fields-17">
                <div class="header-wrapper">
                    <h4 id="x4-21-1-fixed-fields"><bdi class="secno">4.21.1 </bdi>固定字段</h4><a class="self-link"
                        href="#fixed-fields-17" aria-label="Permalink for Section 4.21.1"></a>
                </div>
                <section id="common-fixed-fields-1">
                    <div class="header-wrapper">
                        <h5 id="x4-21-1-1-common-fixed-fields"><bdi class="secno">4.21.1.1 </bdi>通用固定字段
                        </h5><a class="self-link" href="#common-fixed-fields-1"
                            aria-label="Permalink for Section 4.21.1.1"></a>
                    </div>
                    <p>这些字段 <em class="rfc2119">MAY</em> 与 <code>content</code> 或 <code>schema</code> 一起使用。</p>
                    <p><code>example</code> 与 <code>examples</code> 字段互斥；有关验证要求的指导，请参见 <a
                            href="#working-with-examples">Working with Examples</a>。</p>
                    <table>
                        <thead>
                            <tr>
                                <th>Field Name</th>
                                <th style="text-align:center">Type</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><span id="header-description"></span>description</td>
                                <td style="text-align:center"><code>string</code></td>
                                <td>该 header 的简要描述。可以包含使用示例。可使用 [<cite><a class="bibref" data-link-type="biblio"
                                            href="#bib-commonmark" title="CommonMark Spec">CommonMark</a></cite>]
                                    语法来进行富文本表示（<em class="rfc2119">MAY</em>）。</td>
                            </tr>
                            <tr>
                                <td><span id="header-required"></span>required</td>
                                <td style="text-align:center"><code>boolean</code></td>
                                <td>确定该 header 是否为必需。默认值为 <code>false</code>。</td>
                            </tr>
                            <tr>
                                <td><span id="header-deprecated"></span> deprecated</td>
                                <td style="text-align:center"><code>boolean</code></td>
                                <td>指定该 header 已被弃用并且 <em class="rfc2119">SHOULD</em> 逐步停止使用。默认值为 <code>false</code>。
                                </td>
                            </tr>
                            <tr>
                                <td><span id="header-example"></span>example</td>
                                <td style="text-align:center">Any</td>
                                <td>header 可能值的示例；参见 <a href="#working-with-examples">Working With Examples</a>。</td>
                            </tr>
                            <tr>
                                <td><span id="header-examples"></span>examples</td>
                                <td style="text-align:center">Map[ <code>string</code>, <a
                                        href="#example-object">Example Object</a> | <a
                                        href="#reference-object">Reference Object</a>]</td>
                                <td>header 可能值的示例集合；参见 <a href="#working-with-examples">Working With Examples</a>。</td>
                            </tr>
                        </tbody>
                    </table>
                    <p>该对象 <em class="rfc2119">MAY</em> 通过 <a href="#specification-extensions">Specification
                            Extensions</a> 扩展。</p>
                </section>
                <section id="fixed-fields-for-use-with-schema-0">
                    <div class="header-wrapper">
                        <h5 id="x4-21-1-2-fixed-fields-for-use-with-schema"><bdi class="secno">4.21.1.2 </bdi>与
                            <code>schema</code> 配合使用的固定字段
                        </h5><a class="self-link" href="#fixed-fields-for-use-with-schema-0"
                            aria-label="Permalink for Section 4.21.1.2"></a>
                    </div>
                    <p>对于简单场景，<a href="#header-schema"><code>schema</code></a> 与 <a
                            href="#header-style"><code>style</code></a> 可以描述 header 的结构与语法。</p>
                    <p>在使用 <code>schema</code> 序列化 header 时，<em class="rfc2119">MUST NOT</em> 应用 URI 百分号编码；若使用会自动应用编码的
                        RFC6570 实现，则在使用前 <em class="rfc2119">MUST</em> 撤销该编码。
                        实现 <em class="rfc2119">MUST</em> 原样传递 header 值，而不要尝试自动为 header 值添加引用，因为不同 header
                        的引用规则差异过大；有关引用与转义的指导，请参见 <a href="#appendix-d-serializing-headers-and-cookies">Appendix D</a>。
                    </p>
                    <table>
                        <thead>
                            <tr>
                                <th>Field Name</th>
                                <th style="text-align:center">Type</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><span id="header-style"></span>style</td>
                                <td style="text-align:center"><code>string</code></td>
                                <td>描述 header 值将如何序列化。默认值（也是 header 的唯一合法值）为 <code>"simple"</code>。</td>
                            </tr>
                            <tr>
                                <td><span id="header-explode"></span>explode</td>
                                <td style="text-align:center"><code>boolean</code></td>
                                <td>当为 true 时，类型为 <code>array</code> 或 <code>object</code> 的 header 值将产生一个单一
                                    header，其值为数组项或映射键值对的以逗号分隔的列表，参见 <a href="#style-examples">Style
                                        Examples</a>。对于其他数据类型此字段无效。默认值为 <code>false</code>。</td>
                            </tr>
                            <tr>
                                <td><span id="header-schema"></span>schema</td>
                                <td style="text-align:center"><a href="#schema-object">Schema Object</a></td>
                                <td>定义用于该 header 的类型的 schema。</td>
                            </tr>
                        </tbody>
                    </table>
                    <p>另见 <a href="#appendix-c-using-rfc6570-based-serialization">Appendix C: Using RFC6570-Based
                            Serialization</a> 以获取更多指导。</p>
                </section>
                <section id="fixed-fields-for-use-with-content-0">
                    <div class="header-wrapper">
                        <h5 id="x4-21-1-3-fixed-fields-for-use-with-content"><bdi class="secno">4.21.1.3 </bdi>与
                            <code>content</code> 配合使用的固定字段
                        </h5><a class="self-link" href="#fixed-fields-for-use-with-content-0"
                            aria-label="Permalink for Section 4.21.1.3"></a>
                    </div>
                    <p>对于更复杂的情形，<a href="#header-content"><code>content</code></a> 字段可定义 header 的媒体类型和 schema，并提供其使用示例。
                    </p>
                    <table>
                        <thead>
                            <tr>
                                <th>Field Name</th>
                                <th style="text-align:center">Type</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><span id="header-content"></span>content</td>
                                <td style="text-align:center">Map[<code>string</code>, <a
                                        href="#media-type-object">Media Type Object</a> | <a
                                        href="#reference-object">Reference Object</a>]</td>
                                <td>包含 header 表示形式的映射。键是媒体类型，值描述该媒体类型。该映射 <em class="rfc2119">MUST</em> 仅包含一项条目。</td>
                            </tr>
                        </tbody>
                    </table>
                </section>
            </section>
            <section id="modeling-link-headers">
                <div class="header-wrapper">
                    <h4 id="x4-21-2-modeling-link-headers"><bdi class="secno">4.21.2 </bdi>链接头的建模</h4><a
                        class="self-link" href="#modeling-link-headers" aria-label="Permalink for Section 4.21.2"></a>
                </div>
                <p>[<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc9264"
                            title="Linkset: Media Types and a Link Relation Type for Link Sets">RFC9264</a></cite>]
                    定义了 <code>application/linkset</code> 与 <code>application/linkset+json</code> 媒体类型。
                    前者恰好是 HTTP Link header 值的格式，只是允许为可读性添加额外空白；后者则是此类头的等价 JSON 表示形式。</p>
                <p>要使用这两种媒体类型中的任意一种，<a href="#media-type-object">Media Type Object</a> 中的 <code>schema</code> <em
                        class="rfc2119">MUST</em> 描述这些链接在 <code>application/linkset+json</code> 格式中将如何结构化。
                    如果 Media Type Object 的父键为 <code>application/linkset+json</code>，则序列化是平凡的，但该格式不能用于 HTTP 的
                    <code>Link</code> 头。
                    如果 Media Type Object 的父键为 <code>application/linkset</code>，则序列化 <em class="rfc2119">MUST</em> 为
                    <code>schema</code> 所建模链接在 <code>application/linkset</code> 格式中的等价表示。
                    如果在 Header Object 的 <code>content</code> 字段中使用 <code>application/linkset</code> Media Type Object（或在
                    <code>in: "header"</code> 的 Parameter Object 中使用），则该序列化 <em class="rfc2119">MUST</em> 与 RFC9264 所述的
                    HTTP 字段语法兼容（参见 RFC9264 的相关节）。
                </p>
                <p>下面示例展示了相同的数据模型如何既作为消息内容的 JSON 格式用于集合分页 linkset，也可在 HTTP <code>Link</code> 头中使用：</p>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">components:</span>
  <span class="hljs-attr">schemas:</span>
    <span class="hljs-attr">SimpleLinkContext:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">array</span>
      <span class="hljs-attr">items:</span>
        <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
        <span class="hljs-attr">required:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">href</span>
        <span class="hljs-attr">properties:</span>
          <span class="hljs-attr">href:</span>
            <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
            <span class="hljs-attr">format:</span> <span class="hljs-string">uri-reference</span>
    <span class="hljs-attr">CollectionLinks:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
      <span class="hljs-attr">required:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">linkset</span>
      <span class="hljs-attr">properties:</span>
        <span class="hljs-attr">linkset:</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">array</span>
          <span class="hljs-attr">items:</span>
            <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
            <span class="hljs-attr">required:</span> [<span class="hljs-string">first</span>, <span class="hljs-string">prev</span>, <span class="hljs-string">next</span>, <span class="hljs-string">last</span>]
            <span class="hljs-attr">properties:</span>
              <span class="hljs-attr">anchor:</span>
                <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
                <span class="hljs-attr">format:</span> <span class="hljs-string">uri</span>
            <span class="hljs-attr">additionalProperties:</span>
              <span class="hljs-string">$ref:</span> <span class="hljs-string">'#/components/schemas/SimpleLinkContext'</span>
  <span class="hljs-attr">responses:</span>
    <span class="hljs-attr">CollectionWithLinks:</span>
      <span class="hljs-attr">content:</span>
        <span class="hljs-attr">application/json:</span>
          <span class="hljs-attr">schema:</span>
            <span class="hljs-attr">type:</span> <span class="hljs-string">array</span>
      <span class="hljs-attr">headers:</span>
        <span class="hljs-attr">Link:</span>
          <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>
          <span class="hljs-attr">content:</span>
            <span class="hljs-attr">application/linkset:</span>
              <span class="hljs-attr">schema:</span>
                <span class="hljs-string">$ref:</span> <span class="hljs-string">'#/components/schemas/CollectionLinks'</span>
    <span class="hljs-attr">StandaloneJsonLinkset:</span>
      <span class="hljs-attr">content:</span>
        <span class="hljs-string">application/linkset+json:</span>
          <span class="hljs-attr">schema:</span>
            <span class="hljs-string">$ref:</span> <span class="hljs-string">'#/components/mediaTypes/CollectionLinks'</span>
</code></pre>
            </section>
            <section id="representing-the-set-cookie-header">
                <div class="header-wrapper">
                    <h4 id="x4-21-3-representing-the-set-cookie-header"><bdi class="secno">4.21.3
                        </bdi><code>Set-Cookie</code> 头的表示
                    </h4><a class="self-link" href="#representing-the-set-cookie-header"
                        aria-label="Permalink for Section 4.21.3"></a>
                </div>
                <p><code>Set-Cookie</code> 头在 [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc9110"
                            title="HTTP Semantics">RFC9110</a></cite>] 的相关章节中被标注为对允许多值头的常规规则的例外。</p>
                <p>对于大多数使用 RFC9110 定义的一般语法的头，多行形式与逗号分隔的一行形式可互换，例如：</p>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-attribute">Accept-Encoding</span><span class="hljs-punctuation">: </span>compress;q=0.5
<span class="hljs-attribute">Accept-Encoding</span><span class="hljs-punctuation">: </span>gzip;q=1.0
</code></pre>
                <p>与适用于 OAS 的 <code>style: "simple"</code> 的一行形式是等价的：</p>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-attribute">Accept-Encoding</span><span class="hljs-punctuation">: </span>compress;q=0.5,gzip;q=1.0
</code></pre>
                <p>OAS 使用一行形式对这类多值头进行建模，因为它与 <code>style: "simple"</code> 的行为一致，并且当使用 <code>content</code>
                    时效果良好，因为值与头名称完全分离，但在实际 HTTP 消息中使用哪种形式并不重要。</p>
                <p>正如 RFC 中也指出的，<code>Set-Cookie</code> 是个例外，因为它允许在其值中出现未引用、未转义的逗号，并且只能使用每行一值的形式。
                    对于 HTTP 消息而言，这纯粹是序列化问题，并不比其它头使用多行形式更为复杂。</p>
                <p>然而，由于使用 <code>content</code> 建模的示例与值并不包含头名称，对于这些字段，<code>Set-Cookie</code> <em
                        class="rfc2119">MUST</em> 通过将每个值放在单独的一行来处理，且不包含头名或 <code>:</code> 分隔符。</p>
                <p>还要注意，任何 URI 百分号编码、base64 编码或其它转义 <em class="rfc2119">MUST</em> 在将数据提供给 OAS 工具之前完成；详见 <a
                        href="#appendix-d-serializing-headers-and-cookies">Appendix D</a>。</p>
                <p>下面示例展示了两种描述需要名为 <code>"lang"</code> 与 <code>"foo"</code> 的 cookie，以及一个预期已进行百分号编码的
                    <code>"urlSafeData"</code> cookie 的不同方式。第一种使用 <code>content</code> 来准确展示此类示例的格式，但也指出了多行文本模式的 schema
                    约束的局限性。第二种展示了使用 <code>style: "simple"</code>，它生成相同的序列化示例文本（每行对应 HTTP 响应中的一条 <code>Set-Cookie:</code>
                    行），但允许对每个 cookie 应用 schema 约束；注意示例的 <code>dataValue</code> 字段中已先行应用了百分号编码：
                </p>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">components:</span>
  <span class="hljs-attr">headers:</span>
    <span class="hljs-attr">SetCookieWithContent:</span>
      <span class="hljs-attr">content:</span>
        <span class="hljs-attr">text/plain:</span>
          <span class="hljs-attr">schema:</span>
            <span class="hljs-comment"># Due to lack of support for multiline regular expressions</span>
            <span class="hljs-comment"># in the `pattern` keyword, not much validation can be done.</span>
            <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
      <span class="hljs-attr">examples:</span>
        <span class="hljs-attr">WithExpires:</span>
          <span class="hljs-comment"># This demonstrates that the text is required to be provided</span>
          <span class="hljs-comment"># in the final format, and is not changed by serialization.</span>
          <span class="hljs-comment"># In practice, it is not necessary to show both value fields.</span>
          <span class="hljs-comment"># Note that only the comma (%2C) would need to be percent-encoded</span>
          <span class="hljs-comment"># if percent-encoding were only being done to make the value</span>
          <span class="hljs-comment"># a valid cookie, as space (%20) and the exclamation point (%21)</span>
          <span class="hljs-comment"># are allowed in cookies, but not in URLs.  See the cookie</span>
          <span class="hljs-comment"># input parameter examples for an example of encoding only</span>
          <span class="hljs-comment"># what is needed for the cookie syntax.</span>
          <span class="hljs-attr">dataValue:</span> <span class="hljs-string">|
            lang=en-US; Expires=Wed, 09 Jun 2021 10:18:14 GMT
            foo=bar; Expires=Wed, 09 Jun 2021 10:18:14 GMT
            urlSafeData: Hello%2C%20world%21
</span>          <span class="hljs-attr">serializedValue:</span> <span class="hljs-string">|
            lang=en-US; Expires=Wed, 09 Jun 2021 10:18:14 GMT
            foo=bar; Expires=Wed, 09 Jun 2021 10:18:14 GMT
            urlSafeData: Hello%2C%20world%21
</span>    <span class="hljs-attr">SetCookieWithSchemaAndStyle:</span>
      <span class="hljs-attr">schema:</span>
        <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
        <span class="hljs-attr">required:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">lang</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">foo</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">urlSafeData</span>
        <span class="hljs-attr">properties:</span>
          <span class="hljs-attr">urlSafeData:</span>
            <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
            <span class="hljs-attr">pattern:</span> <span class="hljs-string">^[-_.%a-zA-Z0-9]+(;|$)</span>
        <span class="hljs-attr">additionalProperties:</span>
          <span class="hljs-string">$comment:</span> <span class="hljs-string">Require</span> <span class="hljs-string">an</span> <span class="hljs-string">Expires</span> <span class="hljs-string">parameter</span>
          <span class="hljs-attr">pattern:</span> <span class="hljs-string">"; *Expires="</span>
      <span class="hljs-attr">style:</span> <span class="hljs-string">simple</span>
      <span class="hljs-attr">explode:</span> <span class="hljs-literal">true</span>
      <span class="hljs-attr">examples:</span>
        <span class="hljs-attr">SetCookies:</span>
          <span class="hljs-attr">dataValue:</span> {
            <span class="hljs-attr">"lang":</span> <span class="hljs-string">"en-US; Expires=Wed, 09 Jun 2021 10:18:14 GMT"</span>
            <span class="hljs-attr">"foo":</span> <span class="hljs-string">"bar; Expires=Wed, 09 Jun 2021 10:18:14 GMT"</span>
            <span class="hljs-attr">"urlSafeData":</span> <span class="hljs-string">"Hello%2C%20world%21"</span>
          }
          <span class="hljs-attr">serializedValue:</span> <span class="hljs-string">|
            lang=en-US; Expires=Wed, 09 Jun 2021 10:18:14 GMT
            foo=bar; Expires=Wed, 09 Jun 2021 10:18:14 GMT
            urlSafeData: Hello%2C%20world%21
</span></code></pre>
                <p>在 HTTP 消息中，序列化示例如下所示：</p>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-attribute">Set-Cookie</span><span class="hljs-punctuation">: </span>lang=en-US; Expires=Wed, 09 Jun 2021 10:18:14 GM
<span class="hljs-attribute">Set-Cookie</span><span class="hljs-punctuation">: </span>foo=bar; Expires=Wed, 09 Jun 2021 10:18:14 GMT
<span class="hljs-attribute">Set-Cookie</span><span class="hljs-punctuation">: </span>urlSafeData=Hello%2C%20world%21
</code></pre>
            </section>
            <section id="header-object-example">
                <div class="header-wrapper">
                    <h4 id="x4-21-4-header-object-example"><bdi class="secno">4.21.4 </bdi>Header 对象示例</h4><a
                        class="self-link" href="#header-object-example" aria-label="Permalink for Section 4.21.4"></a>
                </div>
                <p>一个简单的 <code>integer</code> 类型 header：</p>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">X-Rate-Limit-Limit:</span>
  <span class="hljs-attr">description:</span> <span class="hljs-string">The</span> <span class="hljs-string">number</span> <span class="hljs-string">of</span> <span class="hljs-string">allowed</span> <span class="hljs-string">requests</span> <span class="hljs-string">in</span> <span class="hljs-string">the</span> <span class="hljs-string">current</span> <span class="hljs-string">period</span>
  <span class="hljs-attr">schema:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">integer</span>
</code></pre>
                <p>要求存在强 ETag 头（值以 <code>"</code> 开始，而不是 <code>W/</code>）：</p>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">ETag:</span>
  <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>
  <span class="hljs-attr">schema:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
    <span class="hljs-comment"># Note that quotation marks are part of the</span>
    <span class="hljs-comment"># ETag value, unlike many other headers that</span>
    <span class="hljs-comment"># use a quoted string purely for managing</span>
    <span class="hljs-comment"># reserved characters.</span>
    <span class="hljs-attr">pattern:</span> <span class="hljs-string">^"</span>
  <span class="hljs-attr">example:</span> <span class="hljs-string">'"xyzzy"'</span>
</code></pre>
            </section>
        </section>
        <section id="tag-object">
            <div class="header-wrapper">
                <h3 id="x4-22-tag-object"><bdi class="secno">4.22 </bdi>标签对象</h3><a class="self-link" href="#tag-object"
                    aria-label="Permalink for Section 4.22"></a>
            </div>
            <p>为单个标签添加由 <a href="#operation-object">Operation Object</a> 使用的元数据。对于 Operation Object
                实例中定义的每个标签，并非强制要求都存在一个 Tag Object。</p>
            <section id="fixed-fields-18">
                <div class="header-wrapper">
                    <h4 id="x4-22-1-fixed-fields"><bdi class="secno">4.22.1 </bdi>固定字段</h4><a class="self-link"
                        href="#fixed-fields-18" aria-label="Permalink for Section 4.22.1"></a>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>字段名</th>
                            <th style="text-align:center">类型</th>
                            <th>描述</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><span id="tag-name"></span>name</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td><strong><em class="rfc2119">REQUIRED</em></strong>。标签的名称。在 Operation 的 <code>tags</code>
                                数组中使用此值。</td>
                        </tr>
                        <tr>
                            <td><span id="tag-summary"></span>summary</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td>标签的简短摘要，用于显示目的。</td>
                        </tr>
                        <tr>
                            <td><span id="tag-description"></span>description</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td>标签的描述。可以使用 [<cite><a class="bibref" data-link-type="biblio" href="#bib-commonmark"
                                        title="CommonMark Spec">CommonMark</a></cite>] 语法来进行富文本表示，<em
                                    class="rfc2119">MAY</em> 使用。</td>
                        </tr>
                        <tr>
                            <td><span id="tag-external-docs"></span>externalDocs</td>
                            <td style="text-align:center"><a href="#external-documentation-object">External
                                    Documentation Object</a></td>
                            <td>该标签的额外外部文档。</td>
                        </tr>
                        <tr>
                            <td><span id="tag-parent"></span>parent</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td>该标签所嵌套的父标签的 <code>name</code>。被引用的标签 <em class="rfc2119">MUST</em> 必须存在于 API
                                描述中，且父子标签之间不得出现循环引用（<em class="rfc2119">MUST NOT</em>）。</td>
                        </tr>
                        <tr>
                            <td><span id="tag-kind"></span>kind</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td>用于机器可读的字符串，用以对标签进行分类。可以使用任意字符串；常见用途有用于导航的 <code>nav</code>、用于可见徽章的
                                <code>badge</code>、用于不同用户群体的 API 的 <code>audience</code> 等。可参见 <a
                                    href="https://spec.openapis.org/registry/tag-kind/">常用值注册表</a>。
                            </td>
                        </tr>
                    </tbody>
                </table>
                <p>此对象 <em class="rfc2119">MAY</em> 使用 <a href="#specification-extensions">Specification Extensions</a>
                    进行扩展。</p>
            </section>
            <section id="tag-object-example">
                <div class="header-wrapper">
                    <h4 id="x4-22-2-tag-object-example"><bdi class="secno">4.22.2 </bdi>标签对象示例</h4><a class="self-link"
                        href="#tag-object-example" aria-label="Permalink for Section 4.22.2"></a>
                </div>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">tags:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">account-updates</span>
    <span class="hljs-attr">summary:</span> <span class="hljs-string">Account</span> <span class="hljs-string">Updates</span>
    <span class="hljs-attr">description:</span> <span class="hljs-string">Account</span> <span class="hljs-string">update</span> <span class="hljs-string">operations</span>
    <span class="hljs-attr">kind:</span> <span class="hljs-string">nav</span>

  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">partner</span>
    <span class="hljs-attr">summary:</span> <span class="hljs-string">Partner</span>
    <span class="hljs-attr">description:</span> <span class="hljs-string">Operations</span> <span class="hljs-string">available</span> <span class="hljs-string">to</span> <span class="hljs-string">the</span> <span class="hljs-string">partners</span> <span class="hljs-string">network</span>
    <span class="hljs-attr">parent:</span> <span class="hljs-string">external</span>
    <span class="hljs-attr">kind:</span> <span class="hljs-string">audience</span>

  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">external</span>
    <span class="hljs-attr">summary:</span> <span class="hljs-string">External</span>
    <span class="hljs-attr">description:</span> <span class="hljs-string">Operations</span> <span class="hljs-string">available</span> <span class="hljs-string">to</span> <span class="hljs-string">external</span> <span class="hljs-string">consumers</span>
    <span class="hljs-attr">kind:</span> <span class="hljs-string">audience</span>
</code></pre>
            </section>
        </section>
        <section id="reference-object">
            <div class="header-wrapper">
                <h3 id="x4-23-reference-object"><bdi class="secno">4.23 </bdi>引用对象</h3><a class="self-link"
                    href="#reference-object" aria-label="Permalink for Section 4.23"></a>
            </div>
            <p>一个用于在 OpenAPI 描述中引用其他组件的简单对象，支持内部和外部引用。</p>
            <p><code>$ref</code> 字符串值包含一个 URI [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc3986"
                        title="Uniform Resource Identifier (URI): Generic Syntax">RFC3986</a></cite>]，用于标识被引用的值。</p>
            <p>关于解析 <a href="#relative-references-in-api-description-uris">相对引用</a> 的规则，请参见相关说明。</p>
            <section id="fixed-fields-19">
                <div class="header-wrapper">
                    <h4 id="x4-23-1-fixed-fields"><bdi class="secno">4.23.1 </bdi>固定字段</h4><a class="self-link"
                        href="#fixed-fields-19" aria-label="Permalink for Section 4.23.1"></a>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>字段名</th>
                            <th style="text-align:center">类型</th>
                            <th>描述</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><span id="reference-ref"></span>$ref</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td><strong><em class="rfc2119">REQUIRED</em></strong>。引用标识符。此值 <em
                                    class="rfc2119">MUST</em> 必须为 URI 形式。</td>
                        </tr>
                        <tr>
                            <td><span id="reference-summary"></span>summary</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td>简短摘要，默认情况下 <em class="rfc2119">SHOULD</em> 覆盖被引用组件的摘要。如果被引用的对象类型不允许 <code>summary</code>
                                字段，则此字段无效。</td>
                        </tr>
                        <tr>
                            <td><span id="reference-description"></span>description</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td>描述，默认情况下 <em class="rfc2119">SHOULD</em> 覆盖被引用组件的描述。可以使用 [<cite><a class="bibref"
                                        data-link-type="biblio" href="#bib-commonmark"
                                        title="CommonMark Spec">CommonMark</a></cite>] 语法进行富文本表示（<em
                                    class="rfc2119">MAY</em>）。如果被引用的对象类型不允许 <code>description</code> 字段，则此字段无效。</td>
                        </tr>
                    </tbody>
                </table>
                <p>此对象不能扩展额外属性，任何被添加的属性 <em class="rfc2119">SHALL</em> 被忽略。</p>
                <p>注意：对于包含 <code>$ref</code> 关键字的 Schema Objects，与 Reference Objects 在额外属性方面存在差异。</p>
            </section>
            <section id="reference-object-example">
                <div class="header-wrapper">
                    <h4 id="x4-23-2-reference-object-example"><bdi class="secno">4.23.2 </bdi>引用对象示例
                    </h4><a class="self-link" href="#reference-object-example"
                        aria-label="Permalink for Section 4.23.2"></a>
                </div>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-string">$ref:</span> <span class="hljs-string">'#/components/schemas/Pet'</span>
</code></pre>
            </section>
            <section id="relative-schema-document-example">
                <div class="header-wrapper">
                    <h4 id="x4-23-3-relative-schema-document-example"><bdi class="secno">4.23.3 </bdi>相对模式文档示例</h4><a
                        class="self-link" href="#relative-schema-document-example"
                        aria-label="Permalink for Section 4.23.3"></a>
                </div>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-string">$ref:</span> <span class="hljs-string">Pet.yaml</span>
</code></pre>
            </section>
            <section id="relative-documents-with-embedded-schema-example">
                <div class="header-wrapper">
                    <h4 id="x4-23-4-relative-documents-with-embedded-schema-example"><bdi class="secno">4.23.4
                        </bdi>包含嵌入模式的相对文档示例</h4><a class="self-link"
                        href="#relative-documents-with-embedded-schema-example"
                        aria-label="Permalink for Section 4.23.4"></a>
                </div>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-string">$ref:</span> <span class="hljs-string">definitions.yaml#/Pet</span>
</code></pre>
            </section>
        </section>
        <section id="schema-object">
            <div class="header-wrapper">
                <h3 id="x4-24-schema-object"><bdi class="secno">4.24 </bdi>Schema 对象</h3><a class="self-link"
                    href="#schema-object" aria-label="Permalink for Section 4.24"></a>
            </div>
            <p>Schema Object 允许定义输入和输出的数据类型。这些类型可以是对象，也可以是原语或数组。该对象是 <a
                    href="https://www.ietf.org/archive/id/draft-bhutton-json-schema-01.html">JSON Schema Specification
                    Draft 2020-12</a> 的超集。空模式（允许任何实例通过验证）<em class="rfc2119">MAY</em> 可由布尔值 <code>true</code>
                表示，而不允许任何实例通过验证的模式 <em class="rfc2119">MAY</em> 可由布尔值 <code>false</code> 表示。
            </p>
            <p>关于关键字的更多信息，请参见 <a href="https://www.ietf.org/archive/id/draft-bhutton-json-schema-01.html">JSON Schema
                    Core</a> 与 <a
                    href="https://www.ietf.org/archive/id/draft-bhutton-json-schema-validation-01.html">JSON Schema
                    Validation</a>。</p>
            <p>除非另有说明，关键字定义遵循 JSON Schema 的定义且不添加额外语义；这包括诸如 <code>$schema</code>、<code>$id</code>、<code>$ref</code> 和
                <code>$dynamicRef</code> 等关键字为 URI 而非 URL 的情况。若 JSON Schema 指出某些行为由应用决定（例如注释），OAS 也将语义定义延迟给使用该 OpenAPI
                文档的应用。
            </p>
            <section id="json-schema-keywords">
                <div class="header-wrapper">
                    <h4 id="x4-24-1-json-schema-keywords"><bdi class="secno">4.24.1 </bdi>JSON Schema 关键字</h4><a
                        class="self-link" href="#json-schema-keywords" aria-label="Permalink for Section 4.24.1"></a>
                </div>
                <p>OpenAPI Schema Object 的 <a
                        href="https://www.ietf.org/archive/id/draft-bhutton-json-schema-01.html#section-4.3.3">方言</a>
                    被定义为需要包含 <a href="#base-vocabulary">OAS 基础词汇</a>，另外还包含 JSON Schema Specification Draft 2020-12
                    中指定的词汇表（参见 <a href="https://www.ietf.org/archive/id/draft-bhutton-json-schema-01.html#section-8">通用
                        meta-schema</a>）。</p>
                <p>此版本规范的 OpenAPI Schema Object 方言由 URI <code>https://spec.openapis.org/oas/3.1/dialect/base</code> 标识（即
                    <span id="dialect-schema-id"></span>“OAS 方言模式 id”）。
                </p>
                <p>以下关键字来自 JSON Schema 规范，但在 OAS 中其定义有所扩展：</p>
                <ul>
                    <li>description - 可以使用 [<cite><a class="bibref" data-link-type="biblio" href="#bib-commonmark"
                                title="CommonMark Spec">CommonMark</a></cite>] 语法进行富文本表示，<em class="rfc2119">MAY</em>
                        使用。</li>
                    <li>format - 参见 <a href="#data-type-format">数据类型格式</a> 了解更多细节。在依赖 JSON Schema 已定义格式的同时，OAS
                        提供了一些额外的预定义格式。</li>
                </ul>
                <p>除了组成 OAS 方言的 JSON Schema 关键字外，Schema Object 还支持来自其他词汇表的关键字或任意属性。</p>
                <p>JSON Schema 实现 <em class="rfc2119">MAY</em> 选择将由 OpenAPI 规范基础词汇定义的关键字视为 <a
                        href="https://www.ietf.org/archive/id/draft-bhutton-json-schema-01.html#section-4.3.1">未知关键字</a>，因为其在
                    OAS 方言中以 <a
                        href="https://www.ietf.org/archive/id/draft-bhutton-json-schema-01.html#section-8.1.2"><code>$vocabulary</code></a>
                    值为 <code>false</code> 的方式被包含。
                    <span id="base-vocabulary"></span>OAS 基础词汇由以下关键字组成：
                </p>
            </section>
            <section id="fixed-fields-20">
                <div class="header-wrapper">
                    <h4 id="x4-24-2-fixed-fields"><bdi class="secno">4.24.2 </bdi>固定字段</h4><a class="self-link"
                        href="#fixed-fields-20" aria-label="Permalink for Section 4.24.2"></a>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>字段名</th>
                            <th style="text-align:center">类型</th>
                            <th>描述</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><span id="schema-discriminator"></span>discriminator</td>
                            <td style="text-align:center"><a href="#discriminator-object">Discriminator Object</a></td>
                            <td>discriminator 提供了一个“提示”，指出有效载荷应满足哪一组模式之一。更多细节见 <a
                                    href="#composition-and-inheritance-polymorphism">组合与继承</a>。</td>
                        </tr>
                        <tr>
                            <td><span id="schema-xml"></span>xml</td>
                            <td style="text-align:center"><a href="#xml-object">XML Object</a></td>
                            <td>添加额外元数据以描述该模式的 XML 表现形式。</td>
                        </tr>
                        <tr>
                            <td><span id="schema-external-docs"></span>externalDocs</td>
                            <td style="text-align:center"><a href="#external-documentation-object">External
                                    Documentation Object</a></td>
                            <td>该模式的额外外部文档。</td>
                        </tr>
                        <tr>
                            <td><span id="schema-example"></span>example</td>
                            <td style="text-align:center">Any</td>
                            <td>用于包含该模式实例示例的自由字段。若示例无法自然地用 JSON 或 YAML
                                表示，可使用字符串值并在必要时进行转义。<br><br><strong>已弃用：</strong>字段 <code>example</code> 已被 JSON Schema
                                的 <code>examples</code> 关键字取代。建议不要使用 <code>example</code>，未来版本规范可能移除该字段。</td>
                        </tr>
                    </tbody>
                </table>
                <p>此对象 <em class="rfc2119">MAY</em> 使用 <a href="#specification-extensions">Specification Extensions</a>
                    进行扩展，尽管如上所述，在该对象内额外属性 <em class="rfc2119">MAY</em> 可以省略 <code>x-</code> 前缀。</p>
            </section>
            <section id="data-types">
                <div class="header-wrapper">
                    <h4 id="x4-24-3-data-types"><bdi class="secno">4.24.3 </bdi>数据类型</h4><a class="self-link"
                        href="#data-types" aria-label="Permalink for Section 4.24.3"></a>
                </div>
                <p>OAS 中的数据类型基于 <a
                        href="https://www.ietf.org/archive/id/draft-bhutton-json-schema-validation-01.html#section-6.1.1">JSON
                        Schema Validation Specification Draft 2020-12</a> 定义的类型：
                    “null”、 “boolean”、 “object”、 “array”、 “number”、 “string” 或 “integer”。模型使用 <a
                        href="#schema-object">Schema Object</a> 定义，该对象是 JSON Schema Specification Draft 2020-12 的超集。</p>
                <p>JSON Schema 的关键字与 <code>format</code> 值作用于可能是六种 JSON 数据类型之一的 JSON
                    “实例”：“null”、“boolean”、“object”、“array”、“number” 或 “string”，且某些关键字和格式仅适用于特定类型。例如，关键字
                    <code>pattern</code> 和格式 <code>date-time</code> 仅适用于字符串，并将其它五种类型的任何实例视为“自动通过”。这意味着 JSON Schema
                    的关键字和格式并不隐式地要求某个期望类型。若要显式约束类型，请使用 <code>type</code> 关键字。
                </p>
                <p>注意，<code>type</code> 关键字允许使用 <code>"integer"</code> 作为值以便于使用，但关键字和格式的适用性并不将整数视为与其它数字不同的 JSON 类型，因为
                    <cite><a class="bibref" data-link-type="biblio" href="#bib-rfc8259"
                            title="The JavaScript Object Notation (JSON) Data Interchange Format">JSON</a></cite>
                    本身并不做此区分。由于不存在独立的 JSON 整数类型，JSON Schema 以数学方式定义整数。这意味着 <code>1</code> 与 <code>1.0</code>
                    在语义上被视为等价，二者都被认为是整数。
                </p>
                <section id="data-type-format">
                    <div class="header-wrapper">
                        <h5 id="x4-24-3-1-data-type-format"><bdi class="secno">4.24.3.1 </bdi>数据类型格式</h5><a
                            class="self-link" href="#data-type-format" aria-label="Permalink for Section 4.24.3.1"></a>
                    </div>
                    <p>如 <a
                            href="https://www.ietf.org/archive/id/draft-bhutton-json-schema-validation-01.html#section-7.3">JSON
                            Schema Validation 规范</a> 所定义，数据类型可以有一个可选的修饰关键字：<code>format</code>。如该规范所述，默认情况下
                        <code>format</code> 被视为非验证注释；是否验证 <code>format</code> 取决于具体实现。
                    </p>
                    <p>OpenAPI Initiative 还托管了一个 <a href="https://spec.openapis.org/registry/format/">Format
                            Registry</a>，用于记录由 OAS 用户和其它规范定义的格式。对任何注册格式的支持完全是 <em class="rfc2119">可选</em>
                        的，对一个注册格式的支持并不意味着对其他格式的支持。</p>
                    <p>未伴随 <code>format</code> 关键字的类型遵循 JSON Schema 中的类型定义。若工具不识别某个特定 <code>format</code>，则可 <em
                            class="rfc2119">MAY</em> 回退仅按 <code>type</code> 进行处理，仿佛未指定 <code>format</code>。针对 <a
                            href="https://www.ietf.org/archive/id/draft-bhutton-json-schema-validation-01.html#section-7.1">JSON
                            Schema 验证</a>，每个格式应指定其适用的 JSON 数据类型集合。在此注册表中，这些类型在“JSON Data Type”列中列出。</p>
                    <p>OAS 定义的格式如下：</p>
                    <table>
                        <thead>
                            <tr>
                                <th><code>format</code></th>
                                <th>JSON 数据类型</th>
                                <th>备注</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>int32</code></td>
                                <td>number</td>
                                <td>有符号 32 位</td>
                            </tr>
                            <tr>
                                <td><code>int64</code></td>
                                <td>number</td>
                                <td>有符号 64 位（即 long）</td>
                            </tr>
                            <tr>
                                <td><code>float</code></td>
                                <td>number</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td><code>double</code></td>
                                <td>number</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td><code>password</code></td>
                                <td>string</td>
                                <td>提示应对该值进行隐藏处理。</td>
                            </tr>
                        </tbody>
                    </table>
                    <p>如在 <a href="#data-types">数据类型</a> 一节所述，<code>type: number</code> 与 <code>type: integer</code>
                        在数据模型中都被视为数字。</p>
                </section>
            </section>
            <section id="parsing-and-serializing">
                <div class="header-wrapper">
                    <h4 id="x4-24-4-parsing-and-serializing"><bdi class="secno">4.24.4 </bdi>解析与序列化</h4><a
                        class="self-link" href="#parsing-and-serializing" aria-label="Permalink for Section 4.24.4"></a>
                </div>
                <p>API 数据有几种形式：</p>
                <ol>
                    <li>序列化形式：文档（属于某种媒体类型）、HTTP 头值，或 URI 的一部分。</li>
                    <li>数据形式：用于配合 <a href="#schema-object">Schema Object</a> 的形式。</li>
                    <li>应用形式：包含由 JSON Schema 关键字（如 <code>format</code> 和
                        <code>contentType</code>）以及可能的额外信息（例如类层次结构）传达的附加信息。这些超出本规范范围的内容 <em class="rfc2119">MAY</em>
                        基于规范元素（如 <a href="#discriminator-object">Discriminator Object</a>）或关于 <a
                            href="#data-modeling-techniques">数据建模技术</a> 的指引来实现。
                    </li>
                </ol>
                <section id="json-data">
                    <div class="header-wrapper">
                        <h5 id="x4-24-4-1-json-data"><bdi class="secno">4.24.4.1 </bdi>JSON 数据</h5><a class="self-link"
                            href="#json-data" aria-label="Permalink for Section 4.24.4.1"></a>
                    </div>
                    <p>JSON 序列化的数据几乎等同于数据形式，因为 <a
                            href="https://www.ietf.org/archive/id/draft-bhutton-json-schema-01.html#section-4.2.1">JSON
                            Schema 的数据模型</a> 与 JSON 表示几乎一致。序列化的 UTF-8 JSON 字符串
                        <code>{"when": "1985-04-12T23:20:50.52"}</code> 表示一个具有单个数据字段的对象，该字段名为 <code>when</code>，其字符串值为
                        <code>1985-04-12T23:20:50.52</code>。
                    </p>
                    <p>具体的应用形式超出本规范范围，但可通过下面的模式示例说明我们的 JSON 实例：</p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
<span class="hljs-attr">properties:</span>
  <span class="hljs-attr">when:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
    <span class="hljs-attr">format:</span> <span class="hljs-string">date-time</span>
</code></pre>
                    <p>一些应用可能会将该字符串在任意编程语言中保持为字符串，而其他应用可能会注意到 <code>format</code> 并将其作为 Python 的
                        <code>datetime.datetime</code> 实例，或 Java 的
                        <code>java.time.ZonedDateTime</code>。本规范仅要求数据根据模式有效，且诸如 <code>format</code> 之类作为注释的关键字按 JSON
                        Schema 规范可用。
                    </p>
                </section>
                <section id="non-json-data">
                    <div class="header-wrapper">
                        <h5 id="x4-24-4-2-non-json-data"><bdi class="secno">4.24.4.2 </bdi>非 JSON 数据</h5><a
                            class="self-link" href="#non-json-data" aria-label="Permalink for Section 4.24.4.2"></a>
                    </div>
                    <p>非 JSON 的序列化形式可能与其对应的数据形式有很大不同，且可能需要多个步骤才能解析。</p>
                    <p>延续我们的 “when” 示例，如果我们将对象序列化为 <code>application/x-www-form-urlencoded</code>，它将以 ASCII
                        字符串的形式出现：<code>when=1985-04-12T23%3A20%3A50.52</code>。该示例仍然易于使用，因为都是字符串数据，且与 JSON 的唯一区别是 URI
                        百分号编码和分隔语法（使用 <code>=</code> 替代 JSON 标点和引号）。</p>
                    <p>然而，许多非 JSON 的文本格式可能很复杂，必须检查相应的模式以将文本正确解析为可供模式使用的数据结构。将数据序列化为此类格式需要检查经过模式验证的数据，或执行相同的模式检查。</p>
                    <p>在检查模式时，给定一个起始模式，实施者 <em class="rfc2119">MUST</em> 检查该模式以及通过仅跟随 <code>$ref</code> 和
                        <code>allOf</code> 关键字可到达的所有模式。这些模式保证适用于任何实例。在搜索模式以查找 <code>type</code> 时，如果 <code>type</code>
                        关键字的值是类型列表，并且序列化值可以成功解析为列表中多个类型之一，且没有其它可发现的 <code>type</code> 关键字来消除歧义，则行为由实现定义。未包含
                        <code>type</code> 的 Schema Objects <em class="rfc2119">MUST</em> 被视为允许所有类型，无论其它关键字如何存在（例如
                        <code>maximum</code> 适用于数字，但并不要求实例必须为数字）。
                    </p>
                    <p>实现 <em class="rfc2119">MAY</em> 检查子模式或其它关键字（如 <code>oneOf</code> 或 <code>$dynamicRef</code>）
                        的可能引用目标，但 <em class="rfc2119">MUST NOT</em> 试图解决歧义。例如，如果实现选择检查 <code>anyOf</code>，下列模式：</p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">anyOf:</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">type:</span> <span class="hljs-string">number</span>
  <span class="hljs-attr">minimum:</span> <span class="hljs-number">0</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">type:</span> <span class="hljs-string">number</span>
  <span class="hljs-attr">maximum:</span> <span class="hljs-number">100</span>
</code></pre>
                    <p>明确地指出了数字类型，但下列模式：</p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">anyOf:</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">type:</span> <span class="hljs-string">number</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">maximum:</span> <span class="hljs-number">100</span>
</code></pre>
                    <p>则不明确，因为第二个子模式允许所有类型。</p>
                    <p>鉴于这些对模式搜索的有限要求，能够访问已验证数据的序列化器 <em class="rfc2119">MUST</em>
                        在可能的情况下检查实际数据；不处理运行时数据（例如代码生成器）或无法访问已验证数据的实现 <em class="rfc2119">MUST</em> 回退到模式检查。</p>
                    <p>还应记住，在 JSON Schema 中适用于特定类型的关键字（例如 <code>pattern</code> 适用于字符串，<code>minimum</code>
                        适用于数字）并不要求或暗示数据实际上会是该类型。</p>
                    <p>作为这些过程的示例，给定以下 OpenAPI 组件：</p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">components:</span>
  <span class="hljs-attr">requestBodies:</span>
    <span class="hljs-attr">Form:</span>
      <span class="hljs-attr">content:</span>
        <span class="hljs-attr">application/x-www-form-urlencoded:</span>
          <span class="hljs-attr">schema:</span>
            <span class="hljs-string">$ref:</span> <span class="hljs-string">"#/components/schemas/FormData"</span>
          <span class="hljs-attr">encoding:</span>
            <span class="hljs-attr">extra:</span>
              <span class="hljs-attr">contentType:</span> <span class="hljs-string">application/xml</span>
  <span class="hljs-attr">schemas:</span>
    <span class="hljs-attr">FormData:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
      <span class="hljs-attr">properties:</span>
        <span class="hljs-attr">code:</span>
          <span class="hljs-attr">allOf:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-attr">type:</span> [<span class="hljs-string">string</span>, <span class="hljs-string">number</span>]
            <span class="hljs-attr">pattern:</span> <span class="hljs-string">"1"</span>
            <span class="hljs-attr">minimum:</span> <span class="hljs-number">0</span>
          <span class="hljs-bullet">-</span> <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
            <span class="hljs-attr">pattern:</span> <span class="hljs-string">"2"</span>
        <span class="hljs-attr">count:</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">integer</span>
        <span class="hljs-attr">extra:</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
</code></pre>
                    <p>以及下面这个要解析为数据形式的请求体：</p>
                    <pre class="nohighlight" tabindex="0"><code>code=<span class="hljs-literal">1234</span>&amp;<span class="hljs-attr">count</span>=<span class="hljs-literal">42</span>&amp;<span class="hljs-attr">extra</span>=<span class="hljs-literal">%3Cinfo%3Eabc%3C/info%3E</span>
</code></pre>
                    <p>我们必须首先在模式中搜索 <code>properties</code> 或其它定义属性的关键字，然后将每个属性的模式作为起点去搜索该属性的 <code>type</code>
                        关键字，过程如下（具体顺序由实现定义）：</p>
                    <ul>
                        <li><code>#/components/requestBodies/Form/content/application~1x-www-form-urlencoded/schema</code>（起始模式，仅包含
                            <code>$ref</code>）
                        </li>
                        <li><code>#/components/schemas/FormData</code>（跟随 <code>$ref</code>，发现 <code>properties</code>）
                        </li>
                        <li><code>#/components/schemas/FormData/properties/code</code>（<code>code</code> 属性的起始模式）</li>
                        <li><code>#/components/schemas/FormData/properties/code/allOf/0</code>（跟随 <code>allOf</code>，发现
                            <code>type: [string, number]</code>）
                        </li>
                        <li><code>#/components/schemas/FormData/properties/code/allOf/1</code>（跟随 <code>allOf</code>，发现
                            <code>type: string</code>）
                        </li>
                        <li><code>#/components/schemas/FormData/properties/count</code>（<code>count</code> 属性的起始模式，发现
                            <code>type: integer</code>）
                        </li>
                        <li><code>#/components/schemas/FormData/properties/extra</code>（<code>extra</code> 属性的起始模式，发现
                            <code>type: object</code>）
                        </li>
                    </ul>
                    <p>注意对 <code>code</code> 我们起初找到一个模糊的 <code>type</code>，但随后又找到了另一个 <code>type</code>
                        关键字，使两种可能性中只有一种有效。</p>
                    <p>通过这种检查，我们确定 <code>code</code> 是一个看起来像数字的字符串，而 <code>count</code>
                        需要在模式验证之前被解析为数字。此外，<code>extra</code> 字符串实际上是一个表示含有 <code>info</code> 属性的对象的 XML
                        序列化。这意味着该序列化的数据形式等价于下面的 JSON 对象：</p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"code"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1234"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"count"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">42</span>
  <span class="hljs-attr">"extra"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"info"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"abc"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
                    <p>序列化该对象还需要将属性与 <a href="#encoding-object">Encoding Objects</a> 关联，并可能需要检查以确定
                        <code>contentType</code> 字段的默认值。如果无法获取到已验证的数据，则模式检查过程与解析时相同。
                    </p>
                    <p>在该示例中，<code>code</code> 和 <code>count</code> 都是原始类型，且未出现在 <code>encoding</code>
                        字段中，因此按纯文本序列化。然而，<code>extra</code> 字段是一个对象，默认会被序列化为 JSON，但 <code>encoding</code> 字段中对
                        <code>extra</code> 的条目告知要改为以 XML 形式序列化。
                    </p>
                </section>
                <section id="working-with-binary-data">
                    <div class="header-wrapper">
                        <h5 id="x4-24-4-3-working-with-binary-data"><bdi class="secno">4.24.4.3 </bdi>处理二进制数据</h5><a
                            class="self-link" href="#working-with-binary-data"
                            aria-label="Permalink for Section 4.24.4.3"></a>
                    </div>
                    <p>OAS 可描述 <em>原始</em> 或 <em>编码</em> 的二进制数据。</p>
                    <ul>
                        <li><strong>原始二进制（raw binary）</strong>：用于允许未编码的二进制数据场景，例如将二进制有效负载作为整个 HTTP 消息体发送，或作为允许二进制部分的
                            <code>multipart/*</code> 有效负载的一部分。
                        </li>
                        <li><strong>编码二进制（encoded binary）</strong>：用于二进制数据嵌入到仅文本格式中，例如 <code>application/json</code> 或
                            <code>application/x-www-form-urlencoded</code>（无论是作为消息体还是 URL 查询字符串的一部分）。
                        </li>
                    </ul>
                    <p>在下面展示如何为二进制数据使用 Schema Object 关键字的表中，我们以 <code>image/png</code> 作为示例二进制媒体类型。任何二进制媒体类型（包括
                        <code>application/octet-stream</code>）均可表示二进制内容。
                    </p>
                    <table>
                        <thead>
                            <tr>
                                <th>关键字</th>
                                <th>原始</th>
                                <th>编码</th>
                                <th>备注</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>type</code></td>
                                <td><em>省略</em></td>
                                <td><code>string</code></td>
                                <td>原始二进制位于 <a
                                        href="https://www.ietf.org/archive/id/draft-bhutton-json-schema-01.html#section-4.2.3">type
                                        之外</a></td>
                            </tr>
                            <tr>
                                <td><code>contentMediaType</code></td>
                                <td><code>image/png</code></td>
                                <td><code>image/png</code></td>
                                <td>若冗余可有时省略（见下文）</td>
                            </tr>
                            <tr>
                                <td><code>contentEncoding</code></td>
                                <td><em>省略</em></td>
                                <td><code>base64</code>&nbsp;或&nbsp;<code>base64url</code></td>
                                <td>其它编码也被 <a
                                        href="https://www.ietf.org/archive/id/draft-bhutton-json-schema-validation-01.html#section-8.3">允许</a>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <p>注意：由 <code>contentEncoding</code> 指示的编码会增大数据大小以便表示为 7 位 ASCII 文本，这与 HTTP 的
                        <code>Content-Encoding</code> 头（标识消息体是否以及如何被压缩）无关，且该头在本节描述的所有内容序列化完成后应用。由于 HTTP
                        允许未编码的二进制消息体，因此没有标准的 HTTP 头用于指示整个消息体使用 base64 或类似编码。
                    </p>
                    <p>使用 <code>contentEncoding</code> 为 <code>base64url</code> 可确保在查询字符串和类型为
                        <code>application/x-www-form-urlencoded</code> 的消息体中所需的 URL 编码不需对已编码的二进制数据再做额外编码。
                    </p>
                    <p>若媒体类型已设置，则 <code>contentMediaType</code> 关键字是冗余的，具体场景包括：</p>
                    <ul>
                        <li>作为 <a href="#media-type-object">Media Type Object</a> 的键名</li>
                        <li>在 <a href="#encoding-object">Encoding Object</a> 的 <code>contentType</code> 字段中</li>
                    </ul>
                    <p>如果 Schema Object 将由非 OAS 感知的 JSON Schema 实现处理，即便冗余也可能有用以包含 <code>contentMediaType</code>。但若
                        <code>contentMediaType</code> 与相关的 Media Type Object 或 Encoding Object 冲突，则
                        <code>contentMediaType</code> <em class="rfc2119">SHALL</em> 被忽略。
                    </p>
                    <p>有关流式二进制有效负载的指导，请参见 <a href="#complete-vs-streaming-content">完整内容 与 流式内容</a>。</p>
                    <section id="schema-evaluation-and-binary-data">
                        <div class="header-wrapper">
                            <h6 id="x4-24-4-3-1-schema-evaluation-and-binary-data"><bdi class="secno">4.24.4.3.1
                                </bdi>模式评估与二进制数据</h6><a class="self-link" href="#schema-evaluation-and-binary-data"
                                aria-label="Permalink for Section 4.24.4.3.1"></a>
                        </div>
                        <p>较少的 JSON Schema 实现直接支持处理二进制数据，因为这不是该规范的强制部分。</p>
                        <p>无法获得支持二进制实例的 JSON Schema 实现的 OAS 实现 <em class="rfc2119">MUST</em> 按照 <a
                                href="#working-with-binary-data">处理二进制数据</a> 一节的要求检查并应用模式。当整个实例为二进制时，因相关关键字较少，处理较为直接。
                        </p>
                        <p>然而，<code>multipart</code> 媒体类型可以混合二进制和文本数据，使实现对于模式评估有两种选择：</p>
                        <ol>
                            <li>使用占位值，假定没有断言适用于二进制数据且没有条件模式关键字导致模式对占位值的不同处理（例如，某一部分可能是纯文本或二进制，如果用字符串作为二进制占位值，可能会被视为纯文本并受到不同子模式和关键字的影响）。
                            </li>
                            <li>检查模式以找到适当的关键字（如 <code>properties</code>、<code>prefixItems</code>
                                等），以便拆分子模式并分别将它们应用到二进制和与 JSON 兼容的数据。</li>
                        </ol>
                    </section>
                    <section id="migrating-binary-descriptions-from-oas-3-0">
                        <div class="header-wrapper">
                            <h6 id="x4-24-4-3-2-migrating-binary-descriptions-from-oas-3-0"><bdi
                                    class="secno">4.24.4.3.2 </bdi>从 OAS 3.0 迁移二进制描述</h6><a class="self-link"
                                href="#migrating-binary-descriptions-from-oas-3-0"
                                aria-label="Permalink for Section 4.24.4.3.2"></a>
                        </div>
                        <p>下面的表展示了如何从 OAS 3.0 的二进制数据描述迁移（继续以 <code>image/png</code> 为示例二进制媒体类型）：</p>
                        <table>
                            <thead>
                                <tr>
                                    <th>OAS &lt; 3.1</th>
                                    <th>OAS &gt;= 3.1</th>
                                    <th>备注</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code style="white-space:nowrap">type: string</code><br><code
                                            style="white-space:nowrap">format: binary</code></td>
                                    <td><code style="white-space:nowrap">contentMediaType: image/png</code></td>
                                    <td>若冗余可省略，通常会导致一个空的 <a href="#schema-object">Schema Object</a></td>
                                </tr>
                                <tr>
                                    <td><code style="white-space:nowrap">type: string</code><br><code
                                            style="white-space:nowrap">format: byte</code></td>
                                    <td><code style="white-space:nowrap">type: string</code><br><code
                                            style="white-space:nowrap">contentMediaType: image/png</code><br><code
                                            style="white-space:nowrap">contentEncoding: base64</code></td>
                                    <td>注意可以使用 <code>base64url</code> 以避免将 base64 字符串重新编码为 URL 安全形式</td>
                                </tr>
                            </tbody>
                        </table>
                    </section>
                </section>
            </section>
            <section id="extended-validation-with-annotations">
                <div class="header-wrapper">
                    <h4 id="x4-24-5-extended-validation-with-annotations"><bdi class="secno">4.24.5 </bdi>使用注释的扩展验证</h4>
                    <a class="self-link" href="#extended-validation-with-annotations"
                        aria-label="Permalink for Section 4.24.5"></a>
                </div>
                <p>JSON Schema Draft 2020-12 支持 <a
                        href="https://www.ietf.org/archive/id/draft-bhutton-json-schema-01.html#section-7.7.1">收集注释</a>，包括将未识别的关键字视为注释的处理（见
                    <a
                        href="https://www.ietf.org/archive/id/draft-bhutton-json-schema-01.html#section-6.5">相关说明</a>）。OAS
                    实现 <em class="rfc2119">MAY</em> 使用这些注释（包括未被声明的 JSON Schema 词汇表识别的 <a
                        href="https://spec.openapis.org/registry/extension/">扩展</a>）作为进一步验证的基础。注意 JSON Schema Draft
                    2020-12 并不要求扩展使用 <code>x-</code> 前缀。
                </p>
                <section id="non-validating-constraint-keywords">
                    <div class="header-wrapper">
                        <h5 id="x4-24-5-1-non-validating-constraint-keywords"><bdi class="secno">4.24.5.1
                            </bdi>非验证性约束关键字</h5><a class="self-link" href="#non-validating-constraint-keywords"
                            aria-label="Permalink for Section 4.24.5.1"></a>
                    </div>
                    <p>当使用默认的 format-annotation 词汇表时，<a
                            href="https://www.ietf.org/archive/id/draft-bhutton-json-schema-validation-01.html#section-7.2.1"><code>format</code></a>
                        关键字，以及 <a
                            href="https://www.ietf.org/archive/id/draft-bhutton-json-schema-validation-01.html#section-8.2"><code>contentMediaType</code>、<code>contentEncoding</code>
                            和 <code>contentSchema</code></a> 关键字对数据定义约束，但被视为注释而非直接验证。扩展验证是强制执行这些约束的一种方式，且这些约束 <em
                            class="rfc2119">MAY</em> 被这样执行。</p>
                </section>
                <section id="validating-readonly-and-writeonly">
                    <div class="header-wrapper">
                        <h5 id="x4-24-5-2-validating-readonly-and-writeonly"><bdi class="secno">4.24.5.2
                            </bdi>对 <code>readOnly</code> 和 <code>writeOnly</code> 的验证</h5><a class="self-link"
                            href="#validating-readonly-and-writeonly" aria-label="Permalink for Section 4.24.5.2"></a>
                    </div>
                    <p><code>readOnly</code> 与 <code>writeOnly</code> 关键字是注释，因为 JSON Schema 无法知道它正在验证的数据将如何被使用。对这些关键字的验证
                        <em class="rfc2119">MAY</em> 通过检查注释、读/写方向以及（若相关）字段的当前值来完成。<a
                            href="https://www.ietf.org/archive/id/draft-bhutton-json-schema-validation-01.html#section-9.4">JSON
                            Schema Validation Draft 2020-12 第 9.4 节</a> 定义了这些关键字的期望行为，包括资源（称为“拥有权威”） <em
                            class="rfc2119">MAY</em> 忽略 <code>readOnly</code> 字段或将其视为错误。
                    </p>
                    <p>同时为必需且只读的字段是一个示例，说明在 PUT 请求中忽略 <code>readOnly: true</code> 约束可能是有益的，特别是在值未被更改的情况下。这允许在 GET
                        时正确要求该字段，同时仍然在 PUT 时使用相同的表示与模式。即便只读字段不是必需的，移除它们对客户端来说也是繁重的，尤其当 JSON 数据复杂或深度嵌套时。</p>
                    <p>注意 <code>readOnly</code> 的行为与本规范的 3.0 版本存在差异。</p>
                </section>
            </section>
            <section id="data-modeling-techniques">
                <div class="header-wrapper">
                    <h4 id="x4-24-6-data-modeling-techniques"><bdi class="secno">4.24.6 </bdi>数据建模技术</h4><a
                        class="self-link" href="#data-modeling-techniques"
                        aria-label="Permalink for Section 4.24.6"></a>
                </div>
                <section id="composition-and-inheritance-polymorphism">
                    <div class="header-wrapper">
                        <h5 id="x4-24-6-1-composition-and-inheritance-polymorphism"><bdi class="secno">4.24.6.1
                            </bdi>组合与继承（多态）</h5><a class="self-link" href="#composition-and-inheritance-polymorphism"
                            aria-label="Permalink for Section 4.24.6.1"></a>
                    </div>
                    <p>OpenAPI 规范允许使用 JSON Schema 的 <code>allOf</code> 关键字来组合和扩展模型定义，从而实现模型组合。<code>allOf</code>
                        接受一组对象定义的数组，这些定义独立验证，但一起组成单个对象。</p>
                    <p>尽管组合提供了模型的可扩展性，但并不意味着模型之间存在继承层次结构。</p>
                    <p>JSON Schema 还提供 <code>anyOf</code> 和 <code>oneOf</code> 关键字，分别允许定义多个模式，其中至少一个或恰好一个必须有效。与
                        <code>allOf</code> 相同，这些模式也是独立验证的。这些关键字可用于描述多态，在该场景中单个字段可以接受多种类型的值。
                    </p>
                    <p>OpenAPI 规范通过添加 <a href="#schema-discriminator"><code>discriminator</code></a> 字段（其值为 <a
                            href="#discriminator-object">Discriminator Object</a>）扩展了 JSON Schema
                        对多态的支持。使用时，Discriminator Object 指示用于提示哪个 <code>anyOf</code> 或 <code>oneOf</code>
                        模式应验证模型结构的属性名称。判定属性 <em class="rfc2119">MAY</em> 被定义为必需或可选，但若将其定义为可选，则 Discriminator Object <em
                            class="rfc2119">MUST</em> 包含 <code>defaultMapping</code> 字段，以指定在判定属性不存在时期望使用哪个
                        <code>anyOf</code> 或 <code>oneOf</code> 中的模式，或在 <code>allOf</code> 中引用当前模式的哪个模式。
                    </p>
                    <p>定义继承实例的判定属性值有两种方式：</p>
                    <ul>
                        <li>使用模式名称。</li>
                        <li><a href="#discriminator-mapping">通过覆盖属性值</a> 来覆盖模式名称。如果存在新的值，则优先于模式名称。</li>
                    </ul>
                </section>
                <section id="generic-template-data-structures">
                    <div class="header-wrapper">
                        <h5 id="x4-24-6-2-generic-template-data-structures"><bdi class="secno">4.24.6.2 </bdi>通用（模板）数据结构
                        </h5><a class="self-link" href="#generic-template-data-structures"
                            aria-label="Permalink for Section 4.24.6.2"></a>
                    </div>
                    <p>实现 <em class="rfc2119">SHOULD</em> 支持使用 JSON Schema 的动态引用功能来定义通用或模板数据结构：</p>
                    <ul>
                        <li><code>$dynamicAnchor</code> 标识一组可能的模式（包括默认的占位模式），<code>$dynamicRef</code> 可解析到这些模式之一。</li>
                        <li><code>$dynamicRef</code> 按 JSON Schema 规范，从模式入口点到引用路径上遇到的第一个匹配 <code>$dynamicAnchor</code>
                            进行解析。</li>
                    </ul>
                    <p>示例包含在下方的 <a href="#schema-object-examples">Schema Object 示例</a> 部分，并且在 Learn OpenAPI 网站的 <a
                            href="https://learn.openapis.org/referencing/dynamic.html">“动态引用”</a> 页面上有更多信息。</p>
                </section>
                <section id="annotated-enumerations">
                    <div class="header-wrapper">
                        <h5 id="x4-24-6-3-annotated-enumerations"><bdi class="secno">4.24.6.3 </bdi>带注释的枚举</h5><a
                            class="self-link" href="#annotated-enumerations"
                            aria-label="Permalink for Section 4.24.6.3"></a>
                    </div>
                    <p>Schema Object 的 <code>enum</code> 关键字不允许为各个值关联描述或其它信息。</p>
                    <p>实现 <em class="rfc2119">MAY</em> 支持识别一种模式：将 <code>oneOf</code> 或 <code>anyOf</code> 中的每个子模式写为包含
                        <code>const</code> 关键字及诸如 <code>title</code> 或 <code>description</code> 等注释，从而作为带有附加信息的枚举类型。此模式在
                        JSON Schema 所要求行为之外的具体行为由实现定义。
                    </p>
                </section>
                <section id="xml-modeling">
                    <div class="header-wrapper">
                        <h5 id="x4-24-6-4-xml-modeling"><bdi class="secno">4.24.6.4 </bdi>XML 建模</h5><a
                            class="self-link" href="#xml-modeling" aria-label="Permalink for Section 4.24.6.4"></a>
                    </div>
                    <p><a href="#schema-xml">xml</a> 字段在将 JSON 定义转换为 XML 时允许额外定义。<a href="#xml-object">XML Object</a>
                        包含有关可用选项的更多信息。</p>
                </section>
            </section>
            <section id="specifying-schema-dialects">
                <div class="header-wrapper">
                    <h4 id="x4-24-7-specifying-schema-dialects"><bdi class="secno">4.24.7 </bdi>指定模式方言</h4><a
                        class="self-link" href="#specifying-schema-dialects"
                        aria-label="Permalink for Section 4.24.7"></a>
                </div>
                <p>工具需要能够确定任一资源希望使用哪个方言或元模式进行处理：JSON Schema Core、JSON Schema Validation、OpenAPI Schema 方言或某个自定义元模式。</p>
                <p><code>$schema</code> 关键字 <em class="rfc2119">MAY</em> 出现在作为 <a
                        href="https://www.ietf.org/archive/id/draft-bhutton-json-schema-01.html#section-4.3.5">模式资源根</a>
                    的任何 Schema Object 中，若存在则 <em class="rfc2119">MUST</em> 用于确定处理该模式时应使用哪个方言。这允许使用不同于默认 Draft 2020-12
                    的其它 JSON Schema 草案的 Schema Object。工具 <em class="rfc2119">MUST</em> 支持 <a
                        href="#dialect-schema-id">OAS 方言模式 id</a>，且 <em class="rfc2119">MAY</em> 支持 <code>$schema</code>
                    的其他取值。</p>
                <p>为了允许对包含在 OAS 文档中的所有 Schema Object 使用不同的默认 <code>$schema</code> 值，可在 <a href="#openapi-object">OpenAPI
                        Object</a> 中设置 <code>jsonSchemaDialect</code>。若未设置该默认值，则这些 Schema Object 必须使用 OAS 方言模式 id。资源根
                    Schema Object 中的 <code>$schema</code> 值始终覆盖任何默认值。</p>
                <p>对于未设置 <code>$schema</code> 的独立 JSON Schema 文档，或对于不作为 <a
                        href="#openapi-description-structure">完整文档</a> 的 OpenAPI 描述文档中的 Schema Object，方言 <em
                        class="rfc2119">SHOULD</em> 假定为 OAS 方言。然而，为了最大互操作性，建议 OpenAPI 描述作者在此类文档中显式通过
                    <code>$schema</code> 设置方言。
                </p>
            </section>
            <section id="schema-object-examples">
                <div class="header-wrapper">
                    <h4 id="x4-24-8-schema-object-examples"><bdi class="secno">4.24.8 </bdi>Schema 对象示例</h4>
                    <a class="self-link" href="#schema-object-examples" aria-label="Permalink for Section 4.24.8"></a>
                </div>
                <section id="primitive-example">
                    <div class="header-wrapper">
                        <h5 id="x4-24-8-1-primitive-example"><bdi class="secno">4.24.8.1 </bdi>原始示例</h5><a
                            class="self-link" href="#primitive-example" aria-label="Permalink for Section 4.24.8.1"></a>
                    </div>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
<span class="hljs-attr">format:</span> <span class="hljs-string">email</span>
</code></pre>
                </section>
                <section id="simple-model">
                    <div class="header-wrapper">
                        <h5 id="x4-24-8-2-simple-model"><bdi class="secno">4.24.8.2 </bdi>简单模型</h5><a class="self-link"
                            href="#simple-model" aria-label="Permalink for Section 4.24.8.2"></a>
                    </div>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
<span class="hljs-attr">required:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">name</span>
<span class="hljs-attr">properties:</span>
  <span class="hljs-attr">name:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
  <span class="hljs-attr">address:</span>
    <span class="hljs-string">$ref:</span> <span class="hljs-string">'#/components/schemas/Address'</span>
  <span class="hljs-attr">age:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">integer</span>
    <span class="hljs-attr">format:</span> <span class="hljs-string">int32</span>
    <span class="hljs-attr">minimum:</span> <span class="hljs-number">0</span>
</code></pre>
                </section>
                <section id="model-with-map-dictionary-properties">
                    <div class="header-wrapper">
                        <h5 id="x4-24-8-3-model-with-map-dictionary-properties"><bdi class="secno">4.24.8.3
                            </bdi>带映射/字典属性的模型</h5><a class="self-link" href="#model-with-map-dictionary-properties"
                            aria-label="Permalink for Section 4.24.8.3"></a>
                    </div>
                    <p>用于简单的字符串到字符串的映射：</p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
<span class="hljs-attr">additionalProperties:</span>
  <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
</code></pre>
                    <p>用于字符串到模型的映射：</p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
<span class="hljs-attr">additionalProperties:</span>
  <span class="hljs-string">$ref:</span> <span class="hljs-string">'#/components/schemas/ComplexModel'</span>
</code></pre>
                </section>
                <section id="model-with-annotated-enumeration">
                    <div class="header-wrapper">
                        <h5 id="x4-24-8-4-model-with-annotated-enumeration"><bdi class="secno">4.24.8.4 </bdi>带注释枚举的模型
                        </h5><a class="self-link" href="#model-with-annotated-enumeration"
                            aria-label="Permalink for Section 4.24.8.4"></a>
                    </div>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">oneOf:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">const:</span> <span class="hljs-string">RGB</span>
    <span class="hljs-attr">title:</span> <span class="hljs-string">Red,</span> <span class="hljs-string">Green,</span> <span class="hljs-string">Blue</span>
    <span class="hljs-attr">description:</span> <span class="hljs-string">Specify</span> <span class="hljs-string">colors</span> <span class="hljs-string">with</span> <span class="hljs-string">the</span> <span class="hljs-string">red,</span> <span class="hljs-string">green,</span> <span class="hljs-string">and</span> <span class="hljs-string">blue</span> <span class="hljs-string">additive</span> <span class="hljs-string">color</span> <span class="hljs-string">model</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">const:</span> <span class="hljs-string">CMYK</span>
    <span class="hljs-attr">title:</span> <span class="hljs-string">Cyan,</span> <span class="hljs-string">Magenta,</span> <span class="hljs-string">Yellow,</span> <span class="hljs-string">Black</span>
    <span class="hljs-attr">description:</span> <span class="hljs-string">Specify</span> <span class="hljs-string">colors</span> <span class="hljs-string">with</span> <span class="hljs-string">the</span> <span class="hljs-string">cyan,</span> <span class="hljs-string">magenta,</span> <span class="hljs-string">yellow,</span> <span class="hljs-string">and</span> <span class="hljs-string">black</span> <span class="hljs-string">subtractive</span> <span class="hljs-string">color</span> <span class="hljs-string">model</span>
</code></pre>
                </section>
                <section id="model-with-example">
                    <div class="header-wrapper">
                        <h5 id="x4-24-8-5-model-with-example"><bdi class="secno">4.24.8.5 </bdi>带示例的模型</h5>
                        <a class="self-link" href="#model-with-example" aria-label="Permalink for Section 4.24.8.5"></a>
                    </div>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
<span class="hljs-attr">properties:</span>
  <span class="hljs-attr">id:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">integer</span>
    <span class="hljs-attr">format:</span> <span class="hljs-string">int64</span>
  <span class="hljs-attr">name:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
<span class="hljs-attr">required:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">name</span>
<span class="hljs-attr">examples:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Puma</span>
    <span class="hljs-attr">id:</span> <span class="hljs-number">1</span>
</code></pre>
                </section>
                <section id="models-with-composition">
                    <div class="header-wrapper">
                        <h5 id="x4-24-8-6-models-with-composition"><bdi class="secno">4.24.8.6 </bdi>具有组合的模型</h5><a
                            class="self-link" href="#models-with-composition"
                            aria-label="Permalink for Section 4.24.8.6"></a>
                    </div>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">components:</span>
  <span class="hljs-attr">schemas:</span>
    <span class="hljs-attr">ErrorModel:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
      <span class="hljs-attr">required:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">message</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">code</span>
      <span class="hljs-attr">properties:</span>
        <span class="hljs-attr">message:</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
        <span class="hljs-attr">code:</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">integer</span>
          <span class="hljs-attr">minimum:</span> <span class="hljs-number">100</span>
          <span class="hljs-attr">maximum:</span> <span class="hljs-number">600</span>
    <span class="hljs-attr">ExtendedErrorModel:</span>
      <span class="hljs-attr">allOf:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">$ref:</span> <span class="hljs-string">'#/components/schemas/ErrorModel'</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
          <span class="hljs-attr">required:</span>
            <span class="hljs-bullet">-</span> <span class="hljs-string">rootCause</span>
          <span class="hljs-attr">properties:</span>
            <span class="hljs-attr">rootCause:</span>
              <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
</code></pre>
                </section>
                <section id="models-with-polymorphism-support">
                    <div class="header-wrapper">
                        <h5 id="x4-24-8-7-models-with-polymorphism-support"><bdi class="secno">4.24.8.7 </bdi>支持多态的模型
                        </h5><a class="self-link" href="#models-with-polymorphism-support"
                            aria-label="Permalink for Section 4.24.8.7"></a>
                    </div>
                    <p>下面示例描述了一个 <code>Pet</code> 模型，该模型可表示猫或狗，区分依据为 <code>petType</code> 属性。每种宠物类型在基础 <code>Pet</code>
                        模型之外有额外属性。若实例缺少 <code>petType</code> 属性，或该属性值既不是 <code>cat</code> 也不是 <code>dog</code>，则该实例无效。
                    </p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">components:</span>
  <span class="hljs-attr">schemas:</span>
    <span class="hljs-attr">Pet:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
      <span class="hljs-attr">properties:</span>
        <span class="hljs-attr">name:</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
      <span class="hljs-attr">required:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">name</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">petType</span>
      <span class="hljs-attr">oneOf:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">$ref:</span> <span class="hljs-string">'#/components/schemas/Cat'</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">$ref:</span> <span class="hljs-string">'#/components/schemas/Dog'</span>
    <span class="hljs-attr">Cat:</span>
      <span class="hljs-attr">description:</span> <span class="hljs-string">A</span> <span class="hljs-string">pet</span> <span class="hljs-string">cat</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
      <span class="hljs-attr">properties:</span>
        <span class="hljs-attr">petType:</span>
          <span class="hljs-attr">const:</span> <span class="hljs-string">'cat'</span>
        <span class="hljs-attr">huntingSkill:</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
          <span class="hljs-attr">description:</span> <span class="hljs-string">The</span> <span class="hljs-string">measured</span> <span class="hljs-string">skill</span> <span class="hljs-string">for</span> <span class="hljs-string">hunting</span>
          <span class="hljs-attr">enum:</span>
            <span class="hljs-bullet">-</span> <span class="hljs-string">clueless</span>
            <span class="hljs-bullet">-</span> <span class="hljs-string">lazy</span>
            <span class="hljs-bullet">-</span> <span class="hljs-string">adventurous</span>
            <span class="hljs-bullet">-</span> <span class="hljs-string">aggressive</span>
      <span class="hljs-attr">required:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">huntingSkill</span>
    <span class="hljs-attr">Dog:</span>
      <span class="hljs-attr">description:</span> <span class="hljs-string">A</span> <span class="hljs-string">pet</span> <span class="hljs-string">dog</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
      <span class="hljs-attr">properties:</span>
        <span class="hljs-attr">petType:</span>
          <span class="hljs-attr">const:</span> <span class="hljs-string">'dog'</span>
        <span class="hljs-attr">packSize:</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">integer</span>
          <span class="hljs-attr">format:</span> <span class="hljs-string">int32</span>
          <span class="hljs-attr">description:</span> <span class="hljs-string">the</span> <span class="hljs-string">size</span> <span class="hljs-string">of</span> <span class="hljs-string">the</span> <span class="hljs-string">pack</span> <span class="hljs-string">the</span> <span class="hljs-string">dog</span> <span class="hljs-string">is</span> <span class="hljs-string">from</span>
          <span class="hljs-attr">default:</span> <span class="hljs-number">0</span>
          <span class="hljs-attr">minimum:</span> <span class="hljs-number">0</span>
      <span class="hljs-attr">required:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">packSize</span>
</code></pre>
                </section>
                <section id="models-with-polymorphism-support-and-a-discriminator-object">
                    <div class="header-wrapper">
                        <h5 id="x4-24-8-8-models-with-polymorphism-support-and-a-discriminator-object"><bdi
                                class="secno">4.24.8.8 </bdi>带 Discriminator Object 的多态模型示例
                        </h5><a class="self-link" href="#models-with-polymorphism-support-and-a-discriminator-object"
                            aria-label="Permalink for Section 4.24.8.8"></a>
                    </div>
                    <p>下面的示例在上一节示例的基础上，为 <code>Pet</code> 模式添加了一个 <a href="#discriminator-object">Discriminator
                            Object</a>。注意 Discriminator Object 仅为 API 使用者提供提示，并不会改变模式的验证结果。</p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">components:</span>
  <span class="hljs-attr">schemas:</span>
    <span class="hljs-attr">Pet:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
      <span class="hljs-attr">discriminator:</span>
        <span class="hljs-attr">propertyName:</span> <span class="hljs-string">petType</span>
        <span class="hljs-attr">mapping:</span>
          <span class="hljs-attr">cat:</span> <span class="hljs-string">'#/components/schemas/Cat'</span>
          <span class="hljs-attr">dog:</span> <span class="hljs-string">'#/components/schemas/Dog'</span>
      <span class="hljs-attr">properties:</span>
        <span class="hljs-attr">name:</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
      <span class="hljs-attr">required:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">name</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">petType</span>
      <span class="hljs-attr">oneOf:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">$ref:</span> <span class="hljs-string">'#/components/schemas/Cat'</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">$ref:</span> <span class="hljs-string">'#/components/schemas/Dog'</span>
    <span class="hljs-attr">Cat:</span>
      <span class="hljs-attr">description:</span> <span class="hljs-string">A</span> <span class="hljs-string">pet</span> <span class="hljs-string">cat</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
      <span class="hljs-attr">properties:</span>
        <span class="hljs-attr">petType:</span>
          <span class="hljs-attr">const:</span> <span class="hljs-string">'cat'</span>
        <span class="hljs-attr">huntingSkill:</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
          <span class="hljs-attr">description:</span> <span class="hljs-string">The</span> <span class="hljs-string">measured</span> <span class="hljs-string">skill</span> <span class="hljs-string">for</span> <span class="hljs-string">hunting</span>
          <span class="hljs-attr">enum:</span>
            <span class="hljs-bullet">-</span> <span class="hljs-string">clueless</span>
            <span class="hljs-bullet">-</span> <span class="hljs-string">lazy</span>
            <span class="hljs-bullet">-</span> <span class="hljs-string">adventurous</span>
            <span class="hljs-bullet">-</span> <span class="hljs-string">aggressive</span>
      <span class="hljs-attr">required:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">huntingSkill</span>
    <span class="hljs-attr">Dog:</span>
      <span class="hljs-attr">description:</span> <span class="hljs-string">A</span> <span class="hljs-string">pet</span> <span class="hljs-string">dog</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
      <span class="hljs-attr">properties:</span>
        <span class="hljs-attr">petType:</span>
          <span class="hljs-attr">const:</span> <span class="hljs-string">'dog'</span>
        <span class="hljs-attr">packSize:</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">integer</span>
          <span class="hljs-attr">format:</span> <span class="hljs-string">int32</span>
          <span class="hljs-attr">description:</span> <span class="hljs-string">the</span> <span class="hljs-string">size</span> <span class="hljs-string">of</span> <span class="hljs-string">the</span> <span class="hljs-string">pack</span> <span class="hljs-string">the</span> <span class="hljs-string">dog</span> <span class="hljs-string">is</span> <span class="hljs-string">from</span>
          <span class="hljs-attr">default:</span> <span class="hljs-number">0</span>
          <span class="hljs-attr">minimum:</span> <span class="hljs-number">0</span>
      <span class="hljs-attr">required:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">petType</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">packSize</span>
</code></pre>
                </section>
                <section id="models-with-polymorphism-support-using-allof-and-a-discriminator-object">
                    <div class="header-wrapper">
                        <h5 id="x4-24-8-9-models-with-polymorphism-support-using-allof-and-a-discriminator-object"><bdi
                                class="secno">4.24.8.9 </bdi>使用 <code>allOf</code> 与 Discriminator Object 的多态模型示例</h5><a
                            class="self-link"
                            href="#models-with-polymorphism-support-using-allof-and-a-discriminator-object"
                            aria-label="Permalink for Section 4.24.8.9"></a>
                    </div>
                    <p>也可以使用 <code>allOf</code> 描述多态模型。以下示例使用 <code>allOf</code> 和 <a
                            href="#discriminator-object">Discriminator Object</a> 来描述一个多态的 <code>Pet</code> 模型。</p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">components:</span>
  <span class="hljs-attr">schemas:</span>
    <span class="hljs-attr">Pet:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
      <span class="hljs-attr">discriminator:</span>
        <span class="hljs-attr">propertyName:</span> <span class="hljs-string">petType</span>
      <span class="hljs-attr">properties:</span>
        <span class="hljs-attr">name:</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
        <span class="hljs-attr">petType:</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
      <span class="hljs-attr">required:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">name</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">petType</span>
    <span class="hljs-attr">Cat:</span> <span class="hljs-comment"># "Cat" will be used as the discriminating value</span>
      <span class="hljs-attr">description:</span> <span class="hljs-string">A</span> <span class="hljs-string">representation</span> <span class="hljs-string">of</span> <span class="hljs-string">a</span> <span class="hljs-string">cat</span>
      <span class="hljs-attr">allOf:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">$ref:</span> <span class="hljs-string">'#/components/schemas/Pet'</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
          <span class="hljs-attr">properties:</span>
            <span class="hljs-attr">huntingSkill:</span>
              <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
              <span class="hljs-attr">description:</span> <span class="hljs-string">The</span> <span class="hljs-string">measured</span> <span class="hljs-string">skill</span> <span class="hljs-string">for</span> <span class="hljs-string">hunting</span>
              <span class="hljs-attr">enum:</span>
                <span class="hljs-bullet">-</span> <span class="hljs-string">clueless</span>
                <span class="hljs-bullet">-</span> <span class="hljs-string">lazy</span>
                <span class="hljs-bullet">-</span> <span class="hljs-string">adventurous</span>
                <span class="hljs-bullet">-</span> <span class="hljs-string">aggressive</span>
          <span class="hljs-attr">required:</span>
            <span class="hljs-bullet">-</span> <span class="hljs-string">huntingSkill</span>
    <span class="hljs-attr">Dog:</span> <span class="hljs-comment"># "Dog" will be used as the discriminating value</span>
      <span class="hljs-attr">description:</span> <span class="hljs-string">A</span> <span class="hljs-string">representation</span> <span class="hljs-string">of</span> <span class="hljs-string">a</span> <span class="hljs-string">dog</span>
      <span class="hljs-attr">allOf:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">$ref:</span> <span class="hljs-string">'#/components/schemas/Pet'</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
          <span class="hljs-attr">properties:</span>
            <span class="hljs-attr">packSize:</span>
              <span class="hljs-attr">type:</span> <span class="hljs-string">integer</span>
              <span class="hljs-attr">format:</span> <span class="hljs-string">int32</span>
              <span class="hljs-attr">description:</span> <span class="hljs-string">the</span> <span class="hljs-string">size</span> <span class="hljs-string">of</span> <span class="hljs-string">the</span> <span class="hljs-string">pack</span> <span class="hljs-string">the</span> <span class="hljs-string">dog</span> <span class="hljs-string">is</span> <span class="hljs-string">from</span>
              <span class="hljs-attr">default:</span> <span class="hljs-number">0</span>
              <span class="hljs-attr">minimum:</span> <span class="hljs-number">0</span>
          <span class="hljs-attr">required:</span>
            <span class="hljs-bullet">-</span> <span class="hljs-string">packSize</span>
</code></pre>
                </section>
                <section id="generic-data-structure-model">
                    <div class="header-wrapper">
                        <h5 id="x4-24-8-10-generic-data-structure-model"><bdi class="secno">4.24.8.10 </bdi>通用数据结构模型
                        </h5><a class="self-link" href="#generic-data-structure-model"
                            aria-label="Permalink for Section 4.24.8.10"></a>
                    </div>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">components:</span>
  <span class="hljs-attr">schemas:</span>
    <span class="hljs-attr">genericArrayComponent:</span>
      <span class="hljs-string">$id:</span> <span class="hljs-string">fully_generic_array</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">array</span>
      <span class="hljs-attr">items:</span>
        <span class="hljs-string">$dynamicRef:</span> <span class="hljs-string">'#generic-array'</span>
      <span class="hljs-string">$defs:</span>
        <span class="hljs-attr">allowAll:</span>
          <span class="hljs-string">$dynamicAnchor:</span> <span class="hljs-string">generic-array</span>
    <span class="hljs-attr">numberArray:</span>
      <span class="hljs-string">$id:</span> <span class="hljs-string">array_of_numbers</span>
      <span class="hljs-string">$ref:</span> <span class="hljs-string">fully_generic_array</span>
      <span class="hljs-string">$defs:</span>
        <span class="hljs-attr">numbersOnly:</span>
          <span class="hljs-string">$dynamicAnchor:</span> <span class="hljs-string">generic-array</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">number</span>
    <span class="hljs-attr">stringArray:</span>
      <span class="hljs-string">$id:</span> <span class="hljs-string">array_of_strings</span>
      <span class="hljs-string">$ref:</span> <span class="hljs-string">fully_generic_array</span>
      <span class="hljs-string">$defs:</span>
        <span class="hljs-attr">stringsOnly:</span>
          <span class="hljs-string">$dynamicAnchor:</span> <span class="hljs-string">generic-array</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
    <span class="hljs-attr">objWithTypedArray:</span>
      <span class="hljs-string">$id:</span> <span class="hljs-string">obj_with_typed_array</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
      <span class="hljs-attr">required:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">dataType</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">data</span>
      <span class="hljs-attr">properties:</span>
        <span class="hljs-attr">dataType:</span>
          <span class="hljs-attr">enum:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">string</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">number</span>
      <span class="hljs-attr">oneOf:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">properties:</span>
          <span class="hljs-attr">dataType:</span>
            <span class="hljs-attr">const:</span> <span class="hljs-string">string</span>
          <span class="hljs-attr">data:</span>
            <span class="hljs-string">$ref:</span> <span class="hljs-string">array_of_strings</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">properties:</span>
          <span class="hljs-attr">dataType:</span>
            <span class="hljs-attr">const:</span> <span class="hljs-string">number</span>
          <span class="hljs-attr">data:</span>
            <span class="hljs-string">$ref:</span> <span class="hljs-string">array_of_numbers</span>
</code></pre>
                </section>
            </section>
        </section>
        <section id="discriminator-object">
            <div class="header-wrapper">
                <h3 id="x4-25-discriminator-object"><bdi class="secno">4.25 </bdi>判别器对象</h3><a class="self-link"
                    href="#discriminator-object" aria-label="Permalink for Section 4.25"></a>
            </div>
            <p>当请求体或响应负载可能属于多种不同模式之一时，应使用 JSON Schema 的 <code>anyOf</code> 或 <code>oneOf</code> 关键字来描述可能的模式（见 <a
                    href="#composition-and-inheritance-polymorphism">组合与继承</a>）。</p>
            <p>多态模式 <em class="rfc2119">MAY</em> 包含一个判别器（Discriminator Object），用于定义可作为提示的属性名称，该属性可指示在 <code>anyOf</code>
                或 <code>oneOf</code> 中哪个模式，或在 <code>allOf</code>
                中引用当前模式的哪个模式，预期用于验证模型结构。该提示可以用于帮助序列化、反序列化和验证。判别器对象通过隐式或显式地将命名属性的可能值与替代模式关联来实现此目的。</p>
            <p>注意 <code>discriminator</code> <em class="rfc2119">MUST NOT</em> 改变模式的验证结果。</p>
            <section id="fixed-fields-21">
                <div class="header-wrapper">
                    <h4 id="x4-25-1-fixed-fields"><bdi class="secno">4.25.1 </bdi>固定字段</h4><a class="self-link"
                        href="#fixed-fields-21" aria-label="Permalink for Section 4.25.1"></a>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>Field Name</th>
                            <th style="text-align:center">Type</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><span id="property-name"></span>propertyName</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td><strong><em class="rfc2119">REQUIRED</em></strong>。载荷中用于保存判别值的判定属性的名称。判定属性 <em
                                    class="rfc2119">MAY</em> 被定义为必需或可选，但当定义为可选时，判别器对象 <em class="rfc2119">MUST</em> 包含一个
                                <code>defaultMapping</code> 字段，该字段指定在判定属性不存在时代码期望用于验证模型结构的模式。
                            </td>
                        </tr>
                        <tr>
                            <td><span id="discriminator-mapping"></span> mapping</td>
                            <td style="text-align:center">Map[<code>string</code>, <code>string</code>]</td>
                            <td>用于保存载荷值与模式名称或 URI 引用之间映射的对象。</td>
                        </tr>
                        <tr>
                            <td><span id="discriminator-default-mapping"></span> defaultMapping</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td>当载荷中未包含判定属性或判定属性包含没有显式或隐式映射的值时，预期用于验证模型结构的模式名称或模式的 URI 引用。</td>
                        </tr>
                    </tbody>
                </table>
                <p>此对象 <em class="rfc2119">MAY</em> 使用 <a href="#specification-extensions">Specification Extensions</a>
                    进行扩展。</p>
            </section>
            <section id="conditions-for-using-the-discriminator-object">
                <div class="header-wrapper">
                    <h4 id="x4-25-2-conditions-for-using-the-discriminator-object"><bdi class="secno">4.25.2
                        </bdi>使用判别器对象的条件</h4><a class="self-link" href="#conditions-for-using-the-discriminator-object"
                        aria-label="Permalink for Section 4.25.2"></a>
                </div>
                <p>只有在使用复合关键字之一 <code>oneOf</code>、<code>anyOf</code> 或 <code>allOf</code> 时，判别器对象才是合法的。</p>
                <p>在 <code>oneOf</code> 和 <code>anyOf</code> 的用例中，当这些关键字与 <code>discriminator</code> 并列时，所有可能的模式 <em
                        class="rfc2119">MUST</em> 被显式列出。</p>
                <p>为避免冗余，判别器 <em class="rfc2119">MAY</em> 被添加到父模式定义中，通过 <code>allOf</code> 构建在该父模式之上的所有模式都可以作为备选模式使用。
                </p>
                <p><code>allOf</code> 形式的 <code>discriminator</code> 仅对非验证用途有用；使用该形式的 <code>discriminator</code>
                    与父模式一起进行验证时，<em>不会</em> 搜索子模式或以任何方式在验证中使用它们。这是因为 <code>discriminator</code> 无法改变验证结果，并且没有标准的 JSON
                    Schema 关键字将父模式与子模式连接起来。</p>
                <p>任何未在上述描述中的 <code>oneOf</code>、<code>anyOf</code>、<code>allOf</code> 与 <code>discriminator</code>
                    的配置的行为均未定义。</p>
            </section>
            <section id="options-for-mapping-values-to-schemas">
                <div class="header-wrapper">
                    <h4 id="x4-25-3-options-for-mapping-values-to-schemas"><bdi class="secno">4.25.3 </bdi>将值映射到模式的选项
                    </h4><a class="self-link" href="#options-for-mapping-values-to-schemas"
                        aria-label="Permalink for Section 4.25.3"></a>
                </div>
                <p><code>propertyName</code> 指定的属性的值被用作在 <a href="#components-object">Components Object</a>
                    下关联模式的名称，除非该值存在对应的 <code>mapping</code>。<code>mapping</code> 条目将特定的属性值映射到不同的模式组件名称或由 URI
                    标识的模式。当使用隐式或显式的模式组件名称时，内联的 <code>oneOf</code> 或 <code>anyOf</code> 子模式不予考虑。若某个 <code>mapping</code>
                    值或 <code>defaultMapping</code> 值同时是有效的模式名称和有效的相对 URI 引用，则其行为由实现定义，但建议（<em
                        class="rfc2119">RECOMMENDED</em>）将其视为模式名称。为确保歧义值（例如 <code>"foo"</code>）被所有实现视为相对 URI 引用，作者 <em
                        class="rfc2119">MUST</em> 在其前面加上路径段 <code>"."</code>（例如 <code>"./foo"</code>）。</p>
                <p>映射键 <em class="rfc2119">MUST</em> 为字符串值，但工具链 <em class="rfc2119">MAY</em>
                    将响应值转换为字符串以便比较。然而，此类转换的具体性质由实现定义。</p>
            </section>
            <section id="optional-discriminating-property">
                <div class="header-wrapper">
                    <h4 id="x4-25-4-optional-discriminating-property"><bdi class="secno">4.25.4 </bdi>可选的判定属性</h4><a
                        class="self-link" href="#optional-discriminating-property"
                        aria-label="Permalink for Section 4.25.4"></a>
                </div>
                <p>当判定属性被定义为可选时，<a href="#discriminator-object">判别器对象</a> <em class="rfc2119">MUST</em> 包含一个
                    <code>defaultMapping</code> 字段，指定在载荷中判定属性不存在或包含没有显式或隐式映射值时，预期用于验证模型结构的模式。这样即使缺少判定属性，模式仍能被正确验证。
                </p>
                <p>可选判定属性的主要用途是允许在不破坏未提供判定属性的现有客户端的情况下向模式添加判别器。</p>
                <p>当判定属性被定义为可选时，每个在子模式中定义了该判定属性值的子模式也应将该属性定义为必需，因为父模式不再强制执行此项。</p>
                <p><code>defaultMapping</code> 模式也应在判定属性存在但其值没有显式或隐式映射时，能用于验证模型结构。通常在 <code>defaultMapping</code>
                    模式中通过排除任何具有映射判定值的实例来表达，例如：</p>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">OtherPet:</span>
  <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
  <span class="hljs-attr">properties:</span>
    <span class="hljs-attr">petType:</span>
      <span class="hljs-attr">not:</span>
        <span class="hljs-attr">enum:</span> [<span class="hljs-string">'cat'</span>, <span class="hljs-string">'dog'</span>]
</code></pre>
                <p>这可以防止 <code>defaultMapping</code> 模式验证包含已映射判定值的载荷，否则使用 <code>oneOf</code> 描述多态时会导致验证失败。</p>
            </section>
            <section id="examples-0">
                <div class="header-wrapper">
                    <h4 id="x4-25-5-examples"><bdi class="secno">4.25.5 </bdi>示例</h4><a class="self-link"
                        href="#examples-0" aria-label="Permalink for Section 4.25.5"></a>
                </div>
                <p>在这些示例中，假设所有模式都位于 OAD 的 <a href="#openapi-description-structure">入口文档</a>；关于在被引用文档中处理
                    <code>discriminator</code> 的说明，请参见 <a href="#resolving-implicit-connections">解析隐式连接</a>。
                </p>
                <p>在 OAS 3.x 中，响应负载 <em class="rfc2119">MAY</em> 被描述为恰好为任意数量类型之一：</p>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">MyResponseType:</span>
  <span class="hljs-attr">oneOf:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">$ref:</span> <span class="hljs-string">'#/components/schemas/Cat'</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">$ref:</span> <span class="hljs-string">'#/components/schemas/Dog'</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">$ref:</span> <span class="hljs-string">'#/components/schemas/Lizard'</span>
</code></pre>
                <p>这意味着有效载荷必须恰好匹配由 <code>Cat</code>、<code>Dog</code> 或 <code>Lizard</code> 描述的其中一个模式。对
                    <code>oneOf</code> 的反序列化可能代价较高，因为需要确定哪个模式匹配载荷并因此应在反序列化中使用。对于 <code>anyOf</code>
                    模式也存在相同问题。<code>discriminator</code> 可作为提示以提高选择匹配模式的效率。判别器对象不能改变 <code>oneOf</code>
                    的验证结果，它只能帮助提高反序列化效率并提供更好的错误消息。我们可以指定确切的字段来告诉我们哪个模式预期匹配该实例：
                </p>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">MyResponseType:</span>
  <span class="hljs-attr">oneOf:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">$ref:</span> <span class="hljs-string">'#/components/schemas/Cat'</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">$ref:</span> <span class="hljs-string">'#/components/schemas/Dog'</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">$ref:</span> <span class="hljs-string">'#/components/schemas/Lizard'</span>
  <span class="hljs-attr">discriminator:</span>
    <span class="hljs-attr">propertyName:</span> <span class="hljs-string">petType</span>
</code></pre>
                <p>现在的预期是响应载荷中 <code>petType</code> 名称的属性 <em class="rfc2119">MUST</em> 出现，其值将对应于在 OpenAPI
                    描述中定义的某个模式名称。例如，下面的响应载荷：</p>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">12345</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"petType"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Cat"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
                <p>将表明预期匹配该载荷的模式是 <code>Cat</code>。</p>
                <p>在判定属性的值不匹配模式名称或无法进行隐式映射的情况下，可以使用可选的 <code>mapping</code> 定义：</p>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">MyResponseType:</span>
  <span class="hljs-attr">oneOf:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">$ref:</span> <span class="hljs-string">'#/components/schemas/Cat'</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">$ref:</span> <span class="hljs-string">'#/components/schemas/Dog'</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">$ref:</span> <span class="hljs-string">'#/components/schemas/Lizard'</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">$ref:</span> <span class="hljs-string">https://gigantic-server.com/schemas/Monster/schema.json</span>
  <span class="hljs-attr">discriminator:</span>
    <span class="hljs-attr">propertyName:</span> <span class="hljs-string">petType</span>
    <span class="hljs-attr">mapping:</span>
      <span class="hljs-attr">dog:</span> <span class="hljs-string">'#/components/schemas/Dog'</span>
      <span class="hljs-attr">monster:</span> <span class="hljs-string">https://gigantic-server.com/schemas/Monster/schema.json</span>
</code></pre>
                <p>此处判别值 <code>dog</code> 将映射到模式 <code>#/components/schemas/Dog</code>，而不是默认的（隐式）值
                    <code>#/components/schemas/dog</code>。如果判别值既不匹配隐式也不匹配显式映射，则无法确定模式，验证 <em class="rfc2119">SHOULD</em>
                    失败。
                </p>
                <p>当与 <code>anyOf</code> 结构结合使用时，判别器可避免在多个模式可能满足单个载荷时对序列化/反序列化器造成歧义。</p>
                <p>当判定属性被定义为可选时，判别器对象必须包含一个 <code>defaultMapping</code> 字段，指定在载荷中判定属性不存在时代码期望用于验证模型结构的
                    <code>anyOf</code> 或 <code>oneOf</code> 中的某个模式。这样即使缺少判定属性，模式仍能被正确验证。
                </p>
                <p>例如：</p>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">MyResponseType:</span>
  <span class="hljs-attr">oneOf:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">$ref:</span> <span class="hljs-string">'#/components/schemas/Cat'</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">$ref:</span> <span class="hljs-string">'#/components/schemas/Dog'</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">$ref:</span> <span class="hljs-string">'#/components/schemas/Lizard'</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">$ref:</span> <span class="hljs-string">'#/components/schemas/OtherPet'</span>
  <span class="hljs-attr">discriminator:</span>
    <span class="hljs-attr">propertyName:</span> <span class="hljs-string">petType</span>
    <span class="hljs-attr">defaultMapping:</span> <span class="hljs-string">OtherPet</span>
<span class="hljs-attr">OtherPet:</span>
  <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
  <span class="hljs-attr">properties:</span>
    <span class="hljs-attr">petType:</span>
      <span class="hljs-attr">not:</span>
        <span class="hljs-attr">enum:</span> [<span class="hljs-string">'Cat'</span>, <span class="hljs-string">'Dog'</span>, <span class="hljs-string">'Lizard'</span>]
</code></pre>
                <p>在此示例中，如果载荷中不存在 <code>petType</code> 属性，或 <code>petType</code> 的值不是 “Cat”、“Dog” 或 “Lizard”，则该载荷应针对
                    <code>OtherPet</code> 模式进行验证。
                </p>
                <p>下面的示例展示了使用 <code>allOf</code> 的用法，从而避免在父模式中引用所有子模式：</p>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">components:</span>
  <span class="hljs-attr">schemas:</span>
    <span class="hljs-attr">Pet:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
      <span class="hljs-attr">required:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">petType</span>
      <span class="hljs-attr">properties:</span>
        <span class="hljs-attr">petType:</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
      <span class="hljs-attr">discriminator:</span>
        <span class="hljs-attr">propertyName:</span> <span class="hljs-string">petType</span>
        <span class="hljs-attr">mapping:</span>
          <span class="hljs-attr">dog:</span> <span class="hljs-string">Dog</span>
    <span class="hljs-attr">Cat:</span>
      <span class="hljs-attr">allOf:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">$ref:</span> <span class="hljs-string">'#/components/schemas/Pet'</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
          <span class="hljs-comment"># all other properties specific to a `Cat`</span>
          <span class="hljs-attr">properties:</span>
            <span class="hljs-attr">name:</span>
              <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
    <span class="hljs-attr">Dog:</span>
      <span class="hljs-attr">allOf:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">$ref:</span> <span class="hljs-string">'#/components/schemas/Pet'</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
          <span class="hljs-comment"># all other properties specific to a `Dog`</span>
          <span class="hljs-attr">properties:</span>
            <span class="hljs-attr">bark:</span>
              <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
    <span class="hljs-attr">Lizard:</span>
      <span class="hljs-attr">allOf:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">$ref:</span> <span class="hljs-string">'#/components/schemas/Pet'</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
          <span class="hljs-comment"># all other properties specific to a `Lizard`</span>
          <span class="hljs-attr">properties:</span>
            <span class="hljs-attr">lovesRocks:</span>
              <span class="hljs-attr">type:</span> <span class="hljs-string">boolean</span>
</code></pre>
                <p>针对 <code>Pet</code> 模式验证时，像下面这样的载荷：</p>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"petType"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Cat"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Misty"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
                <p>将表明预期匹配 <code>#/components/schemas/Cat</code>。同样地，下面的载荷：</p>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"petType"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"dog"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"bark"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"soft"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
                <p>将映射到 <code>#/components/schemas/Dog</code>，因为 <code>mapping</code> 元素中的 <code>dog</code> 条目映射到了模式名
                    <code>Dog</code>（即 <code>#/components/schemas/Dog</code>）。
                </p>
            </section>
        </section>
        <section id="xml-object">
            <div class="header-wrapper">
                <h3 id="x4-26-xml-object"><bdi class="secno">4.26 </bdi>XML 对象</h3><a class="self-link"
                    href="#xml-object" aria-label="Permalink for Section 4.26"></a>
            </div>
            <p>一个元数据对象，用于更细粒度地定义 XML 模型。当在 Schema Object 中使用 XML 时，如果没有提供 XML Object，则行为由 XML Object 的默认字段值决定。</p>
            <section id="fixed-fields-22">
                <div class="header-wrapper">
                    <h4 id="x4-26-1-fixed-fields"><bdi class="secno">4.26.1 </bdi>固定字段</h4><a class="self-link"
                        href="#fixed-fields-22" aria-label="Permalink for Section 4.26.1"></a>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>Field Name</th>
                            <th style="text-align:center">Type</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><span id="xml-node-type"></span>nodeType</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td>取值为 <code>element</code>、<code>attribute</code>、<code>text</code>、<code>cdata</code> 或
                                <code>none</code> 之一，详见 <a href="#xml-node-types">XML 节点类型</a>。当包含该 XML Object 的 <a
                                    href="#schema-object">Schema Object</a> 中存在
                                <code>$ref</code>、<code>$dynamicRef</code> 或 <code>type: "array"</code> 时，默认值为
                                <code>none</code>，否则为 <code>element</code>。
                            </td>
                        </tr>
                        <tr>
                            <td><span id="xml-name"></span>name</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td>设置与该模式对应的元素/属性名称，替换在 <a href="#xml-node-names">XML 节点名称</a> 中说明的推断名称。当
                                <code>nodeType</code> 为 <code>text</code>、<code>cdata</code> 或 <code>none</code> 时，该字段
                                <em class="rfc2119">SHALL</em> 被忽略。
                            </td>
                        </tr>
                        <tr>
                            <td><span id="xml-namespace"></span>namespace</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td>命名空间定义的 IRI（参见 <cite><a class="bibref" data-link-type="biblio" href="#bib-rfc3987"
                                        title="Internationalized Resource Identifiers (IRIs)">RFC3987</a></cite>）。该值 <em
                                    class="rfc2119">MUST</em> 为非相对 IRI。</td>
                        </tr>
                        <tr>
                            <td><span id="xml-prefix"></span>prefix</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td>用于 <a href="#xml-name">name</a> 的前缀。</td>
                        </tr>
                        <tr>
                            <td><span id="xml-attribute"></span>attribute</td>
                            <td style="text-align:center"><code>boolean</code></td>
                            <td>声明该属性定义是否应转换为属性而不是元素。默认值为 <code>false</code>。如果存在 <code>nodeType</code>，则此字段 <em
                                    class="rfc2119">MUST NOT</em> 出现。<br><br><strong>已弃用：</strong>请使用
                                <code>nodeType: "attribute"</code> 代替 <code>attribute: true</code>
                            </td>
                        </tr>
                        <tr>
                            <td><span id="xml-wrapped"></span>wrapped</td>
                            <td style="text-align:center"><code>boolean</code></td>
                            <td>仅可用于数组定义。表示数组是否被包裹（例如
                                <code>&lt;books&gt;&lt;book/&gt;&lt;book/&gt;&lt;/books&gt;</code>）或未包裹（例如
                                <code>&lt;book/&gt;&lt;book/&gt;</code>）。默认值为
                                <code>false</code>。该定义仅在与 <code>type</code> 为 <code>"array"</code>（位于 <code>items</code>
                                之外）同时定义时生效。如果存在 <code>nodeType</code>，此字段 <em class="rfc2119">MUST NOT</em>
                                出现。<br><br><strong>已弃用：</strong>请使用 <code>nodeType: "element"</code> 代替
                                <code>wrapped: true</code>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <p>注意，从对象数据生成 XML 文档时，节点的顺序是未定义的。若需控制节点顺序，请使用 <code>prefixItems</code>，详见 <a
                        href="#ordered-elements-and-text">有序元素与文本</a>。</p>
                <p>关于将各种类型的值转换为字符串表示的讨论，请参见 <a href="#appendix-b-data-type-conversion">附录 B</a>。</p>
                <p>此对象 <em class="rfc2119">MAY</em> 使用 <a href="#specification-extensions">Specification Extensions</a>
                    进行扩展。</p>
            </section>
            <section id="xml-node-types">
                <div class="header-wrapper">
                    <h4 id="x4-26-2-xml-node-types"><bdi class="secno">4.26.2 </bdi>XML 节点类型</h4><a class="self-link"
                        href="#xml-node-types" aria-label="Permalink for Section 4.26.2"></a>
                </div>
                <p>每个 Schema Object 描述由 <code>nodeType</code> 字段指定的特定类型的 XML [<cite><a class="bibref"
                            data-link-type="biblio" href="#bib-dom" title="DOM Standard">DOM</a></cite>] <a
                        href="https://dom.spec.whatwg.org/#interface-node">节点</a>，其可能值如下。除特殊值 <code>none</code> 外，这些值在
                    DOM 规范中有对应的数字等价（括号中给出）：</p>
                <ul>
                    <li><code>element</code> (1)：该模式表示一个元素并描述其内容</li>
                    <li><code>attribute</code> (2)：该模式表示一个属性并描述其值</li>
                    <li><code>text</code> (3)：该模式表示一个文本节点（解析字符数据）</li>
                    <li><code>cdata</code> (4)：该模式表示一个 CDATA 节</li>
                    <li><code>none</code>：该模式不对应于 XML 文档中的任何节点，其子模式对应的节点直接包含在其父模式的节点下</li>
                </ul>
                <p><code>none</code> 类型对需要比 XML 节点更多 Schema Objects 的 JSON Schema 构造（例如仅包含 <code>$ref</code>
                    的为便于重用而存在的模式）很有用。</p>
                <section id="modeling-element-lists">
                    <div class="header-wrapper">
                        <h5 id="x4-26-2-1-modeling-element-lists"><bdi class="secno">4.26.2.1 </bdi>建模元素列表</h5><a
                            class="self-link" href="#modeling-element-lists"
                            aria-label="Permalink for Section 4.26.2.1"></a>
                    </div>
                    <p>为兼容历史，<code>type: "array"</code> 的模式默认 <code>nodeType: "none"</code>，将每个数组项的节点放在父节点下。这也与 <a
                            href="#xml-node-names">XML 节点名称</a> 中定义的推断命名行为一致。</p>
                    <p>要生成包含列表的元素，请在 <code>type: "array"</code> 模式上显式设置
                        <code>nodeType: "element"</code>。在此情况下，建议对包裹元素或项元素之一设置显式名称，以避免它们具有相同的推断名称。请参见示例以了解预期行为。
                    </p>
                </section>
                <section id="implicit-and-explicit-text-nodes">
                    <div class="header-wrapper">
                        <h5 id="x4-26-2-2-implicit-and-explicit-text-nodes"><bdi class="secno">4.26.2.2 </bdi>隐式与显式
                            <code>text</code> 节点
                        </h5><a class="self-link" href="#implicit-and-explicit-text-nodes"
                            aria-label="Permalink for Section 4.26.2.2"></a>
                    </div>
                    <p>如果某个 <code>element</code> 节点具有原始类型，则该模式还会为该 <code>element</code> 节点的内容生成一个由该元素内容的模式描述的隐式
                        <code>text</code> 节点，名称为属性名（或 <code>name</code> 字段）。
                    </p>
                    <p>如果一个元素同时具有属性与内容，则需要显式的 <code>text</code> 节点。</p>
                    <p>注意，将两个 <code>text</code> 节点相邻放置对解析来说是歧义的，其结果行为由实现定义。</p>
                </section>
            </section>
            <section id="xml-node-names">
                <div class="header-wrapper">
                    <h4 id="x4-26-3-xml-node-names"><bdi class="secno">4.26.3 </bdi>XML 节点名称</h4><a class="self-link"
                        href="#xml-node-names" aria-label="Permalink for Section 4.26.3"></a>
                </div>
                <p><code>element</code> 和 <code>attribute</code> 节点类型需要名称，该名称 <em class="rfc2119">MUST</em>
                    按照如下方式从模式中推断，除非被 <code>name</code> 字段覆盖：</p>
                <ul>
                    <li>对于直接位于 <a href="#components-object">Components Object</a> 的 <code>schemas</code>
                        字段下的模式，组件名称为推断名称。</li>
                    <li>对于属性模式，以及属性模式下数组项的模式，属性名称为推断名称。</li>
                    <li>在所有其它情况下，例如在 <a href="#media-type-object">Media Type Object</a> 的 <code>schema</code>
                        字段下的内联模式，无法推断名称，因此必须存在带有 <code>name</code> 字段的 XML Object。</li>
                </ul>
                <p>注意：在使用数组时，不会推断单数或复数形式，必须显式设置。</p>
            </section>
            <section id="namespace-limitations">
                <div class="header-wrapper">
                    <h4 id="x4-26-4-namespace-limitations"><bdi class="secno">4.26.4 </bdi>命名空间限制</h4><a
                        class="self-link" href="#namespace-limitations" aria-label="Permalink for Section 4.26.4"></a>
                </div>
                <p><code>namespace</code> 字段旨在匹配 XML 命名空间的语法（参见 <cite><a class="bibref" data-link-type="biblio"
                            href="#bib-xml-names11" title="Namespaces in XML 1.1 (Second Edition)">XML
                            namespaces</a></cite>），但有几点注意事项：</p>
                <ul>
                    <li>规范的 3.1.0、3.0.3 及更早版本错误地使用了“absolute URI”而非“non-relative URI”（在 OAS v3.2.0 中为“non-relative
                        IRI”）这一术语，因此使用包含片段的命名空间的作者应谨慎检查工具支持情况。</li>
                    <li>XML 允许但不鼓励相对 IRI 引用，而本规范则明确禁止相对 IRI。</li>
                </ul>
            </section>
            <section id="handling-null-values">
                <div class="header-wrapper">
                    <h4 id="x4-26-5-handling-null-values"><bdi class="secno">4.26.5 </bdi>处理 <code>null</code> 值</h4><a
                        class="self-link" href="#handling-null-values" aria-label="Permalink for Section 4.26.5"></a>
                </div>
                <p>XML 默认情况下没有等价于 <code>null</code> 的概念，为了与本规范 3.1.1 及更早版本兼容，序列化 <code>null</code> 值的行为由实现定义。</p>
                <p>然而，实现 <em class="rfc2119">SHOULD</em> 按如下方式处理 <code>null</code> 值：</p>
                <ul>
                    <li>对于元素，生成带有 <code>xsi:nil="true"</code> 属性的空元素。</li>
                    <li>对于属性，省略该属性。</li>
                    <li>对于文本和 CDATA 节，请参见 <a href="#appendix-b-data-type-conversion">附录 B</a>，了解将非文本值序列化为文本的讨论。</li>
                </ul>
                <p>注意：对于属性，这意味着 <code>null</code> 值或缺失属性都会序列化为省略的属性。由于 Schema Object 验证的是内存表示，这允许处理 <code>null</code>
                    与必需属性的组合。然而，因为无法以不同方式将 <code>null</code> 表示为属性，建议（<em class="rfc2119">RECOMMENDED</em>）将属性类型设为可选而非使用
                    <code>null</code>。
                </p>
                <p>为确保正确的往返行为，在解析省略了属性的元素时，如果模式允许该值（例如 <code>type: ["number", "null"]</code>），实现 <em
                        class="rfc2119">SHOULD</em> 将对应属性设置为 <code>null</code>，否则应省略该属性（例如 <code>type: "number"</code>）。
                </p>
            </section>
            <section id="xml-object-examples">
                <div class="header-wrapper">
                    <h4 id="x4-26-6-xml-object-examples"><bdi class="secno">4.26.6 </bdi>XML 对象示例</h4><a
                        class="self-link" href="#xml-object-examples" aria-label="Permalink for Section 4.26.6"></a>
                </div>
                <p>下面在每个模式后给出一个为该模式生成的示例 XML 表示。有关使用 <code>attribute</code> 或 <code>wrapped</code> 的示例，请参见 OpenAPI
                    Specification 3.1。</p>
                <section id="no-xml-object">
                    <div class="header-wrapper">
                        <h5 id="x4-26-6-1-no-xml-object"><bdi class="secno">4.26.6.1 </bdi>无 XML Object</h5><a
                            class="self-link" href="#no-xml-object" aria-label="Permalink for Section 4.26.6.1"></a>
                    </div>
                    <p>基本字符串属性没有 XML Object，使用 <code>serializedValue</code>（其余示例将使用 <code>externalValue</code>
                        以便在带语法高亮的情况下展示 XML 形式）：</p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">application/xml:</span>
  <span class="hljs-attr">schema:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
    <span class="hljs-attr">xml:</span>
      <span class="hljs-attr">name:</span> <span class="hljs-string">document</span>
    <span class="hljs-attr">properties:</span>
      <span class="hljs-attr">animals:</span>
        <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
  <span class="hljs-attr">examples:</span>
    <span class="hljs-attr">pets:</span>
      <span class="hljs-attr">dataValue:</span>
        <span class="hljs-attr">animals:</span> <span class="hljs-string">dog,</span> <span class="hljs-string">cat,</span> <span class="hljs-string">hamster</span>
      <span class="hljs-attr">serializedValue:</span> <span class="hljs-string">|
        &lt;document&gt;
          &lt;animals&gt;dog, cat, hamster&lt;/animals&gt;
        &lt;/document&gt;
</span></code></pre>
                    <p>基本字符串数组属性（默认 <code>nodeType</code> 为 <code>none</code>）：</p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">application/xml:</span>
  <span class="hljs-attr">schema:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
    <span class="hljs-attr">xml:</span>
      <span class="hljs-attr">name:</span> <span class="hljs-string">document</span>
    <span class="hljs-attr">properties:</span>
      <span class="hljs-attr">animals:</span>
        <span class="hljs-attr">type:</span> <span class="hljs-string">array</span>
        <span class="hljs-attr">items:</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
  <span class="hljs-attr">examples:</span>
    <span class="hljs-attr">pets:</span>
      <span class="hljs-attr">dataValue:</span>
        <span class="hljs-attr">animals:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">dog</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">cat</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">hamster</span>
      <span class="hljs-attr">externalValue:</span> <span class="hljs-string">./examples/pets.xml</span>
</code></pre>
                    <p>其中 <code>./examples/pets.xml</code> 将为：</p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-tag">&lt;<span class="hljs-name">document</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">animals</span>&gt;</span>dog<span class="hljs-tag">&lt;/<span class="hljs-name">animals</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">animals</span>&gt;</span>cat<span class="hljs-tag">&lt;/<span class="hljs-name">animals</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">animals</span>&gt;</span>hamster<span class="hljs-tag">&lt;/<span class="hljs-name">animals</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">document</span>&gt;</span>
</code></pre>
                </section>
                <section id="xml-name-replacement">
                    <div class="header-wrapper">
                        <h5 id="x4-26-6-2-xml-name-replacement"><bdi class="secno">4.26.6.2 </bdi>XML 名称替换</h5><a
                            class="self-link" href="#xml-name-replacement"
                            aria-label="Permalink for Section 4.26.6.2"></a>
                    </div>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">application/xml:</span>
  <span class="hljs-attr">schema:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
    <span class="hljs-attr">xml:</span>
      <span class="hljs-attr">name:</span> <span class="hljs-string">document</span>
    <span class="hljs-attr">properties:</span>
      <span class="hljs-attr">animals:</span>
        <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
        <span class="hljs-attr">xml:</span>
          <span class="hljs-attr">name:</span> <span class="hljs-string">animal</span>
  <span class="hljs-attr">examples:</span>
    <span class="hljs-attr">pets:</span>
      <span class="hljs-attr">dataValue:</span>
        <span class="hljs-attr">animals:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">dog</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">cat</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">hamster</span>
      <span class="hljs-attr">externalValue:</span> <span class="hljs-string">./examples/pets.xml</span>
</code></pre>
                    <p>其中 <code>./examples/pets.xml</code> 将为：</p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-tag">&lt;<span class="hljs-name">document</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">animal</span>&gt;</span>dog<span class="hljs-tag">&lt;/<span class="hljs-name">animal</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">animal</span>&gt;</span>cat<span class="hljs-tag">&lt;/<span class="hljs-name">animal</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">animal</span>&gt;</span>hamster<span class="hljs-tag">&lt;/<span class="hljs-name">animal</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">document</span>&gt;</span>
</code></pre>
                </section>
                <section id="xml-attribute-prefix-and-namespace">
                    <div class="header-wrapper">
                        <h5 id="x4-26-6-3-xml-attribute-prefix-and-namespace"><bdi class="secno">4.26.6.3 </bdi>XML
                            属性、前缀与命名空间</h5><a class="self-link" href="#xml-attribute-prefix-and-namespace"
                            aria-label="Permalink for Section 4.26.6.3"></a>
                    </div>
                    <p>注意根 XML 元素的名称来自组件名称。</p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">components:</span>
  <span class="hljs-attr">schemas:</span>
    <span class="hljs-attr">Person:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
      <span class="hljs-attr">properties:</span>
        <span class="hljs-attr">id:</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">integer</span>
          <span class="hljs-attr">format:</span> <span class="hljs-string">int32</span>
          <span class="hljs-attr">xml:</span>
            <span class="hljs-attr">nodeType:</span> <span class="hljs-string">attribute</span>
        <span class="hljs-attr">name:</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
          <span class="hljs-attr">xml:</span>
            <span class="hljs-attr">namespace:</span> <span class="hljs-string">https://example.com/schema/sample</span>
            <span class="hljs-attr">prefix:</span> <span class="hljs-string">sample</span>
  <span class="hljs-attr">requestBodies:</span>
    <span class="hljs-attr">Person:</span>
      <span class="hljs-attr">content:</span>
        <span class="hljs-attr">application/xml:</span>
          <span class="hljs-attr">schema:</span>
            <span class="hljs-string">$ref:</span> <span class="hljs-string">"#/components/schemas/Person"</span>
          <span class="hljs-attr">examples:</span>
            <span class="hljs-attr">Person:</span>
              <span class="hljs-attr">dataValue:</span>
                <span class="hljs-attr">id:</span> <span class="hljs-number">123</span>
                <span class="hljs-attr">name:</span> <span class="hljs-string">example</span>
              <span class="hljs-attr">externalValue:</span> <span class="hljs-string">./examples/Person.xml</span>
</code></pre>
                    <p>其中 <code>./examples/Person.xml</code> 将为：</p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-tag">&lt;<span class="hljs-name">Person</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"123"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">sample:name</span> <span class="hljs-attr">xmlns:sample</span>=<span class="hljs-string">"https://example.com/schema/sample"</span>&gt;</span>example<span class="hljs-tag">&lt;/<span class="hljs-name">sample:name</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">Person</span>&gt;</span>
</code></pre>
                </section>
                <section id="xml-arrays">
                    <div class="header-wrapper">
                        <h5 id="x4-26-6-4-xml-arrays"><bdi class="secno">4.26.6.4 </bdi>XML 数组</h5><a class="self-link"
                            href="#xml-arrays" aria-label="Permalink for Section 4.26.6.4"></a>
                    </div>
                    <p>更改元素名称示例：</p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">application/xml:</span>
  <span class="hljs-attr">schema:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
    <span class="hljs-attr">xml:</span>
      <span class="hljs-attr">name:</span> <span class="hljs-string">document</span>
    <span class="hljs-attr">properties:</span>
      <span class="hljs-attr">animals:</span>
        <span class="hljs-attr">type:</span> <span class="hljs-string">array</span>
        <span class="hljs-attr">items:</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
          <span class="hljs-attr">xml:</span>
            <span class="hljs-attr">name:</span> <span class="hljs-string">animal</span>
  <span class="hljs-attr">examples:</span>
    <span class="hljs-attr">pets:</span>
      <span class="hljs-attr">dataValue:</span>
        <span class="hljs-attr">animals:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">dog</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">cat</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">hamster</span>
      <span class="hljs-attr">externalValue:</span> <span class="hljs-string">./examples/pets.xml</span>
</code></pre>
                    <p>其中 <code>./examples/pets.xml</code> 将为：</p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-tag">&lt;<span class="hljs-name">document</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">animal</span>&gt;</span>dog<span class="hljs-tag">&lt;/<span class="hljs-name">animal</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">animal</span>&gt;</span>cat<span class="hljs-tag">&lt;/<span class="hljs-name">animal</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">animal</span>&gt;</span>hamster<span class="hljs-tag">&lt;/<span class="hljs-name">animal</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">document</span>&gt;</span>
</code></pre>
                    <p>对于 <code>type: "array"</code> 模式，其 <code>name</code> 字段无效，因为该对象的默认 <code>nodeType</code> 为
                        <code>none</code>：
                    </p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">application/xml:</span>
  <span class="hljs-attr">schema:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
    <span class="hljs-attr">xml:</span>
      <span class="hljs-attr">name:</span> <span class="hljs-string">document</span>
    <span class="hljs-attr">properties:</span>
      <span class="hljs-attr">animals:</span>
        <span class="hljs-attr">type:</span> <span class="hljs-string">array</span>
        <span class="hljs-attr">xml:</span>
          <span class="hljs-attr">name:</span> <span class="hljs-string">aliens</span>
        <span class="hljs-attr">items:</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
          <span class="hljs-attr">xml:</span>
            <span class="hljs-attr">name:</span> <span class="hljs-string">animal</span>
  <span class="hljs-attr">examples:</span>
    <span class="hljs-attr">pets:</span>
      <span class="hljs-attr">dataValue:</span>
        <span class="hljs-attr">animals:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">dog</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">cat</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">hamster</span>
      <span class="hljs-attr">externalValue:</span> <span class="hljs-string">./examples/pets.xml</span>
</code></pre>
                    <p>其中 <code>./examples/pets.xml</code> 将为：</p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-tag">&lt;<span class="hljs-name">document</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">animal</span>&gt;</span>dog<span class="hljs-tag">&lt;/<span class="hljs-name">animal</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">animal</span>&gt;</span>cat<span class="hljs-tag">&lt;/<span class="hljs-name">animal</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">animal</span>&gt;</span>hamster<span class="hljs-tag">&lt;/<span class="hljs-name">animal</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">document</span>&gt;</span>
</code></pre>
                    <p>即使通过将 <code>nodeType</code> 显式设置为 <code>element</code> 创建了包裹元素，如果未显式定义名称，则包装元素和列表项元素将使用相同名称：</p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">application/xml:</span>
  <span class="hljs-attr">schema:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
    <span class="hljs-attr">xml:</span>
      <span class="hljs-attr">name:</span> <span class="hljs-string">document</span>
    <span class="hljs-attr">properties:</span>
      <span class="hljs-attr">animals:</span>
        <span class="hljs-attr">type:</span> <span class="hljs-string">array</span>
        <span class="hljs-attr">xml:</span>
          <span class="hljs-attr">nodeType:</span> <span class="hljs-string">element</span>
        <span class="hljs-attr">items:</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
  <span class="hljs-attr">examples:</span>
    <span class="hljs-attr">pets:</span>
      <span class="hljs-attr">dataValue:</span>
        <span class="hljs-attr">animals:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">dog</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">cat</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">hamster</span>
      <span class="hljs-attr">externalValue:</span> <span class="hljs-string">./examples/pets.xml</span>
</code></pre>
                    <p>其中 <code>./examples/pets.xml</code> 将为：</p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-tag">&lt;<span class="hljs-name">document</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">animals</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">animals</span>&gt;</span>dog<span class="hljs-tag">&lt;/<span class="hljs-name">animals</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">animals</span>&gt;</span>cat<span class="hljs-tag">&lt;/<span class="hljs-name">animals</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">animals</span>&gt;</span>hamster<span class="hljs-tag">&lt;/<span class="hljs-name">animals</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">animals</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">document</span>&gt;</span>
</code></pre>
                    <p>为解决上述命名问题，可使用如下定义：</p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">application/xml:</span>
  <span class="hljs-attr">schema:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
    <span class="hljs-attr">xml:</span>
      <span class="hljs-attr">name:</span> <span class="hljs-string">document</span>
    <span class="hljs-attr">properties:</span>
      <span class="hljs-attr">animals:</span>
        <span class="hljs-attr">type:</span> <span class="hljs-string">array</span>
        <span class="hljs-attr">xml:</span>
          <span class="hljs-attr">nodeType:</span> <span class="hljs-string">element</span>
        <span class="hljs-attr">items:</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
          <span class="hljs-attr">xml:</span>
            <span class="hljs-attr">name:</span> <span class="hljs-string">animal</span>
  <span class="hljs-attr">examples:</span>
    <span class="hljs-attr">pets:</span>
      <span class="hljs-attr">dataValue:</span>
        <span class="hljs-attr">animals:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">dog</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">cat</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">hamster</span>
      <span class="hljs-attr">externalValue:</span> <span class="hljs-string">./examples/pets.xml</span>
</code></pre>
                    <p>其中 <code>./examples/pets.xml</code> 将为：</p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-tag">&lt;<span class="hljs-name">document</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">animals</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">animal</span>&gt;</span>dog<span class="hljs-tag">&lt;/<span class="hljs-name">animal</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">animal</span>&gt;</span>cat<span class="hljs-tag">&lt;/<span class="hljs-name">animal</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">animal</span>&gt;</span>hamster<span class="hljs-tag">&lt;/<span class="hljs-name">animal</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">animals</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">document</span>&gt;</span>
</code></pre>
                    <p>同时影响包裹元素和项元素名称的例子：</p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">application/xml:</span>
  <span class="hljs-attr">schema:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
    <span class="hljs-attr">xml:</span>
      <span class="hljs-attr">name:</span> <span class="hljs-string">document</span>
    <span class="hljs-attr">properties:</span>
      <span class="hljs-attr">animals:</span>
        <span class="hljs-attr">type:</span> <span class="hljs-string">array</span>
        <span class="hljs-attr">xml:</span>
          <span class="hljs-attr">name:</span> <span class="hljs-string">aliens</span>
          <span class="hljs-attr">nodeType:</span> <span class="hljs-string">element</span>
        <span class="hljs-attr">items:</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
          <span class="hljs-attr">xml:</span>
            <span class="hljs-attr">name:</span> <span class="hljs-string">animal</span>
  <span class="hljs-attr">examples:</span>
    <span class="hljs-attr">pets:</span>
      <span class="hljs-attr">dataValue:</span>
        <span class="hljs-attr">animals:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">dog</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">cat</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">hamster</span>
      <span class="hljs-attr">externalValue:</span> <span class="hljs-string">./examples/pets.xml</span>
</code></pre>
                    <p>其中 <code>./examples/pets.xml</code> 将为：</p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-tag">&lt;<span class="hljs-name">document</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">aliens</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">animal</span>&gt;</span>dog<span class="hljs-tag">&lt;/<span class="hljs-name">animal</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">animal</span>&gt;</span>cat<span class="hljs-tag">&lt;/<span class="hljs-name">animal</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">animal</span>&gt;</span>hamster<span class="hljs-tag">&lt;/<span class="hljs-name">animal</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">aliens</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">document</span>&gt;</span>
</code></pre>
                    <p>如果我们更改包装元素名称但不更改项元素名称：</p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">application/xml:</span>
  <span class="hljs-attr">schema:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
    <span class="hljs-attr">xml:</span>
      <span class="hljs-attr">name:</span> <span class="hljs-string">document</span>
    <span class="hljs-attr">properties:</span>
      <span class="hljs-attr">animals:</span>
        <span class="hljs-attr">type:</span> <span class="hljs-string">array</span>
        <span class="hljs-attr">xml:</span>
          <span class="hljs-attr">name:</span> <span class="hljs-string">aliens</span>
          <span class="hljs-attr">nodeType:</span> <span class="hljs-string">element</span>
        <span class="hljs-attr">items:</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
  <span class="hljs-attr">examples:</span>
    <span class="hljs-attr">pets:</span>
      <span class="hljs-attr">dataValue:</span>
        <span class="hljs-attr">animals:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">dog</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">cat</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">hamster</span>
      <span class="hljs-attr">externalValue:</span> <span class="hljs-string">./examples/pets.xml</span>
</code></pre>
                    <p>其中 <code>./examples/pets.xml</code> 将为：</p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-tag">&lt;<span class="hljs-name">document</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">aliens</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">aliens</span>&gt;</span>dog<span class="hljs-tag">&lt;/<span class="hljs-name">aliens</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">aliens</span>&gt;</span>cat<span class="hljs-tag">&lt;/<span class="hljs-name">aliens</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">aliens</span>&gt;</span>hamster<span class="hljs-tag">&lt;/<span class="hljs-name">aliens</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">aliens</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">document</span>&gt;</span>
</code></pre>
                </section>
                <section id="elements-with-attributes-and-text">
                    <div class="header-wrapper">
                        <h5 id="x4-26-6-5-elements-with-attributes-and-text"><bdi class="secno">4.26.6.5 </bdi>带属性与文本的元素
                        </h5><a class="self-link" href="#elements-with-attributes-and-text"
                            aria-label="Permalink for Section 4.26.6.5"></a>
                    </div>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">application/xml:</span>
  <span class="hljs-attr">schema:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">array</span>
    <span class="hljs-attr">xml:</span>
      <span class="hljs-attr">nodeType:</span> <span class="hljs-string">element</span>
      <span class="hljs-attr">name:</span> <span class="hljs-string">animals</span>
    <span class="hljs-attr">items:</span>
      <span class="hljs-attr">xml:</span>
        <span class="hljs-attr">name:</span> <span class="hljs-string">animal</span>
      <span class="hljs-attr">properties:</span>
        <span class="hljs-attr">kind:</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
          <span class="hljs-attr">xml:</span>
            <span class="hljs-attr">nodeType:</span> <span class="hljs-string">attribute</span>
        <span class="hljs-attr">name:</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
          <span class="hljs-attr">xml:</span>
            <span class="hljs-attr">nodeType:</span> <span class="hljs-string">text</span>
  <span class="hljs-attr">examples:</span>
    <span class="hljs-attr">pets:</span>
      <span class="hljs-attr">dataValue:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">kind:</span> <span class="hljs-string">Cat</span>
        <span class="hljs-attr">name:</span> <span class="hljs-string">Fluffy</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">kind:</span> <span class="hljs-string">Dog</span>
        <span class="hljs-attr">name:</span> <span class="hljs-string">Fido</span>
</code></pre>
                    <p>其中 <code>./examples/pets.xml</code> 将为：</p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-tag">&lt;<span class="hljs-name">animals</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">animal</span> <span class="hljs-attr">kind</span>=<span class="hljs-string">"Cat"</span>&gt;</span>Fluffy<span class="hljs-tag">&lt;/<span class="hljs-name">animals</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">animal</span> <span class="hljs-attr">kind</span>=<span class="hljs-string">"Dog"</span>&gt;</span>Fido<span class="hljs-tag">&lt;/<span class="hljs-name">animals</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">animals</span>&gt;</span>
</code></pre>
                </section>
                <section id="referenced-element-with-cdata">
                    <div class="header-wrapper">
                        <h5 id="x4-26-6-6-referenced-element-with-cdata"><bdi class="secno">4.26.6.6 </bdi>引用的带 CDATA
                            的元素</h5><a class="self-link" href="#referenced-element-with-cdata"
                            aria-label="Permalink for Section 4.26.6.6"></a>
                    </div>
                    <p>在此示例中，仅包含 <code>$ref</code> 的 Schema Object 不会创建元素，因为其 <code>nodeType</code> 默认为
                        <code>none</code>。必须为 CDATA 节创建子模式，否则内容将被视为类型为 <code>text</code> 的隐式节点。
                    </p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">components:</span>
  <span class="hljs-attr">schemas:</span>
    <span class="hljs-attr">Documentation:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
      <span class="hljs-attr">properties:</span>
        <span class="hljs-attr">content:</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
          <span class="hljs-attr">contentMediaType:</span> <span class="hljs-string">text/html</span>
          <span class="hljs-attr">xml:</span>
            <span class="hljs-attr">nodeType:</span> <span class="hljs-string">cdata</span>
  <span class="hljs-attr">responses:</span>
    <span class="hljs-attr">content:</span>
      <span class="hljs-attr">application/xml:</span>
        <span class="hljs-attr">schema:</span>
          <span class="hljs-string">$ref:</span> <span class="hljs-string">"#/components/schemas/Documentation"</span>
        <span class="hljs-attr">examples:</span>
          <span class="hljs-attr">docs:</span>
            <span class="hljs-attr">dataValue:</span>
              <span class="hljs-attr">content:</span> <span class="hljs-string">&lt;html&gt;&lt;head&gt;&lt;title&gt;Awesome</span> <span class="hljs-string">Docs&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;/body&gt;&lt;html&gt;</span>
            <span class="hljs-attr">externalValue:</span> <span class="hljs-string">./examples/docs.xml</span>
</code></pre>
                    <p>其中 <code>./examples/docs.xml</code> 将为：</p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-tag">&lt;<span class="hljs-name">Documentation</span>&gt;</span>
  &lt;![CDATA[&lt;html&gt;&lt;head&gt;&lt;title&gt;Awesome Docs&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;/body&gt;&lt;html&gt;]]&gt;
<span class="hljs-tag">&lt;/<span class="hljs-name">Documentation</span>&gt;</span>
</code></pre>
                    <p>或者，可以在使用点设置命名根元素并在组件处禁用根元素（注意在此示例中，相同的 <code>dataValue</code> 在两个位置使用，不同的序列化通过
                        <code>externalValue</code> 显示）：
                    </p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">paths:</span>
  <span class="hljs-string">/docs:</span>
    <span class="hljs-attr">get:</span>
      <span class="hljs-attr">responses:</span>
        <span class="hljs-attr">"200":</span>
          <span class="hljs-attr">content:</span>
            <span class="hljs-attr">application/xml:</span>
              <span class="hljs-attr">schema:</span>
                <span class="hljs-attr">xml:</span>
                  <span class="hljs-attr">nodeType:</span> <span class="hljs-string">element</span>
                  <span class="hljs-attr">name:</span> <span class="hljs-string">StoredDocument</span>
                <span class="hljs-string">$ref:</span> <span class="hljs-string">"#/components/schemas/Documentation"</span>
              <span class="hljs-attr">examples:</span>
                <span class="hljs-attr">stored:</span>
                  <span class="hljs-attr">dataValue:</span>
                    <span class="hljs-attr">content:</span> <span class="hljs-string">&lt;html&gt;&lt;head&gt;&lt;title&gt;Awesome</span> <span class="hljs-string">Docs&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;/body&gt;&lt;html&gt;</span>
                  <span class="hljs-attr">externalValue:</span> <span class="hljs-string">./examples/stored.xml</span>
    <span class="hljs-attr">put:</span>
      <span class="hljs-attr">requestBody:</span>
        <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>
        <span class="hljs-attr">content:</span>
          <span class="hljs-attr">application/xml:</span>
            <span class="hljs-attr">schema:</span>
              <span class="hljs-attr">xml:</span>
                <span class="hljs-attr">nodeType:</span> <span class="hljs-string">element</span>
                <span class="hljs-attr">name:</span> <span class="hljs-string">UpdatedDocument</span>
              <span class="hljs-string">$ref:</span> <span class="hljs-string">"#/components/schemas/Documentation"</span>
            <span class="hljs-attr">examples:</span>
              <span class="hljs-attr">updated:</span>
                <span class="hljs-attr">dataValue:</span>
                  <span class="hljs-attr">content:</span> <span class="hljs-string">&lt;html&gt;&lt;head&gt;&lt;title&gt;Awesome</span> <span class="hljs-string">Docs&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;/body&gt;&lt;html&gt;</span>
                <span class="hljs-attr">externalValue:</span> <span class="hljs-string">./examples/updated.xml</span>
      <span class="hljs-attr">responses:</span>
        <span class="hljs-attr">"201":</span> {}
<span class="hljs-attr">components:</span>
  <span class="hljs-attr">schemas:</span>
    <span class="hljs-attr">Documentation:</span>
      <span class="hljs-attr">xml:</span>
        <span class="hljs-attr">nodeType:</span> <span class="hljs-string">none</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
      <span class="hljs-attr">properties:</span>
        <span class="hljs-attr">content:</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
          <span class="hljs-attr">contentMediaType:</span> <span class="hljs-string">text/html</span>
          <span class="hljs-attr">xml:</span>
            <span class="hljs-attr">nodeType:</span> <span class="hljs-string">cdata</span>
</code></pre>
                    <p>其中 <code>./examples/stored.xml</code> 将为：</p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-tag">&lt;<span class="hljs-name">StoredDocument</span>&gt;</span>
  &lt;![CDATA[&lt;html&gt;&lt;head&gt;&lt;title&gt;Awesome Docs&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;/body&gt;&lt;html&gt;]]&gt;
<span class="hljs-tag">&lt;/<span class="hljs-name">StoredDocument</span>&gt;</span>
</code></pre>
                    <p>而 <code>./examples/updated.xml</code> 将为：</p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-tag">&lt;<span class="hljs-name">UpdatedDocument</span>&gt;</span>
  &lt;![CDATA[&lt;html&gt;&lt;head&gt;&lt;title&gt;Awesome Docs&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;/body&gt;&lt;html&gt;]]&gt;
<span class="hljs-tag">&lt;/<span class="hljs-name">UpdatedDocument</span>&gt;</span>
</code></pre>
                </section>
                <section id="ordered-elements-and-text">
                    <div class="header-wrapper">
                        <h5 id="x4-26-6-7-ordered-elements-and-text"><bdi class="secno">4.26.6.7 </bdi>有序元素与文本</h5><a
                            class="self-link" href="#ordered-elements-and-text"
                            aria-label="Permalink for Section 4.26.6.7"></a>
                    </div>
                    <p>要控制元素的确切顺序，请使用 <code>prefixItems</code> 关键字。采用该方法时，需要使用 XML Object
                        显式设置元素名称，否则它们尽管在特定顺序中为不同元素，却都会继承父元素的名称。此外，需要在数组上显式设置
                        <code>nodeType: "element"</code>，以获取包含序列的元素。
                    </p>
                    <p>下面第一个有序示例展示了元素序列，以及推荐的元素 <code>null</code> 序列化方式：</p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">application/xml:</span>
  <span class="hljs-attr">schema:</span>
    <span class="hljs-attr">xml:</span>
      <span class="hljs-attr">nodeType:</span> <span class="hljs-string">element</span>
      <span class="hljs-attr">name:</span> <span class="hljs-string">OneTwoThree</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">array</span>
    <span class="hljs-attr">minLength:</span> <span class="hljs-number">3</span>
    <span class="hljs-attr">maxLength:</span> <span class="hljs-number">3</span>
    <span class="hljs-attr">prefixItems:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">xml:</span>
        <span class="hljs-attr">name:</span> <span class="hljs-string">One</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">xml:</span>
        <span class="hljs-attr">name:</span> <span class="hljs-string">Two</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
      <span class="hljs-attr">required:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">unit</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">value</span>
      <span class="hljs-attr">properties:</span>
        <span class="hljs-attr">unit:</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
          <span class="hljs-attr">xml:</span>
            <span class="hljs-attr">nodeType:</span> <span class="hljs-string">attribute</span>
        <span class="hljs-attr">value:</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">number</span>
          <span class="hljs-attr">xml:</span>
            <span class="hljs-attr">nodeType:</span> <span class="hljs-string">text</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">xml:</span>
        <span class="hljs-attr">name:</span> <span class="hljs-string">Three</span>
      <span class="hljs-attr">type:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">boolean</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"null"</span>
  <span class="hljs-attr">examples:</span>
    <span class="hljs-attr">OneTwoThree:</span>
      <span class="hljs-attr">dataValue:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">Some</span> <span class="hljs-string">text</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">unit:</span> <span class="hljs-string">cubits</span>
          <span class="hljs-attr">value:</span> <span class="hljs-number">42</span>
        <span class="hljs-literal">null</span>
      <span class="hljs-string">]</span>
      <span class="hljs-attr">externalValue:</span> <span class="hljs-string">./examples/OneTwoThree.xml</span>
</code></pre>
                    <p>其中 <code>./examples/OneTwoThree.xml</code> 将为：</p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-tag">&lt;<span class="hljs-name">OneTwoThree</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">One</span>&gt;</span>Some text<span class="hljs-tag">&lt;/<span class="hljs-name">One</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">Two</span> <span class="hljs-attr">unit</span>=<span class="hljs-string">"cubits"</span>&gt;</span>42<span class="hljs-tag">&lt;/<span class="hljs-name">Two</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">Three</span> <span class="hljs-attr">xsi:nil</span>=<span class="hljs-string">"true"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">OneTwoThree</span>&gt;</span>
</code></pre>
                    <p>在下一个示例中，需要为元素设置 <code>name</code>，同时为文本节点设置 <code>nodeType</code>。</p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">application/xml:</span>
  <span class="hljs-attr">schema:</span>
    <span class="hljs-attr">xml:</span>
      <span class="hljs-attr">nodeType:</span> <span class="hljs-string">element</span>
      <span class="hljs-attr">name:</span> <span class="hljs-string">Report</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">array</span>
    <span class="hljs-attr">prefixItems:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">xml:</span>
        <span class="hljs-attr">nodeType:</span> <span class="hljs-string">text</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">xml:</span>
        <span class="hljs-attr">name:</span> <span class="hljs-string">data</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">number</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">xml:</span>
        <span class="hljs-attr">nodeType:</span> <span class="hljs-string">text</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
  <span class="hljs-attr">examples:</span>
    <span class="hljs-attr">Report:</span>
      <span class="hljs-attr">dataValue:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">Some</span> <span class="hljs-string">preamble</span> <span class="hljs-string">text.</span>
        <span class="hljs-bullet">-</span> <span class="hljs-number">42</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">Some</span> <span class="hljs-string">postamble</span> <span class="hljs-string">text.</span>
      <span class="hljs-attr">externalValue:</span> <span class="hljs-string">./examples/Report.xml</span>
</code></pre>
                    <p>其中 <code>./examples/Report.xml</code> 将为：</p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-tag">&lt;<span class="hljs-name">Report</span>&gt;</span>Some preamble text.<span class="hljs-tag">&lt;<span class="hljs-name">data</span>&gt;</span>42<span class="hljs-tag">&lt;/<span class="hljs-name">data</span>&gt;</span>Some postamble text.<span class="hljs-tag">&lt;/<span class="hljs-name">Report</span>&gt;</span>
</code></pre>
                </section>
                <section id="xml-with-null-values">
                    <div class="header-wrapper">
                        <h5 id="x4-26-6-8-xml-with-null-values"><bdi class="secno">4.26.6.8 </bdi>带 <code>null</code> 值的
                            XML</h5><a class="self-link" href="#xml-with-null-values"
                            aria-label="Permalink for Section 4.26.6.8"></a>
                    </div>
                    <p>请记住，模式验证的是内存数据，而不是 XML 文档本身。此示例未为 <code>"related"</code> 定义属性，因为它展示了空对象和 <code>null</code> 的处理方式。
                    </p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">application/xml:</span>
  <span class="hljs-attr">schema:</span>
    <span class="hljs-attr">xml:</span>
      <span class="hljs-attr">name:</span> <span class="hljs-string">product</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
    <span class="hljs-attr">required:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">count</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">description</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">related</span>
    <span class="hljs-attr">properties:</span>
      <span class="hljs-attr">count:</span>
        <span class="hljs-attr">type:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">number</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">"null"</span>
        <span class="hljs-attr">xml:</span>
          <span class="hljs-attr">nodeType:</span> <span class="hljs-string">attribute</span>
      <span class="hljs-attr">rating:</span>
        <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
        <span class="hljs-attr">xml:</span>
          <span class="hljs-attr">nodeType:</span> <span class="hljs-string">attribute</span>
      <span class="hljs-attr">description:</span>
        <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
      <span class="hljs-attr">related:</span>
        <span class="hljs-attr">type:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">object</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">"null"</span>
  <span class="hljs-attr">examples:</span>
    <span class="hljs-attr">productWithNulls:</span>
      <span class="hljs-attr">dataValue:</span>
        <span class="hljs-attr">count:</span> <span class="hljs-literal">null</span>
        <span class="hljs-attr">description:</span> <span class="hljs-string">Thing</span>
        <span class="hljs-attr">related:</span> <span class="hljs-literal">null</span>
      <span class="hljs-attr">externalValue:</span> <span class="hljs-string">./examples/productWithNulls.xml</span>
    <span class="hljs-attr">productNoNulls:</span>
      <span class="hljs-attr">dataValue:</span>
        <span class="hljs-attr">count:</span> <span class="hljs-number">42</span>
        <span class="hljs-attr">description:</span> <span class="hljs-string">Thing</span>
        <span class="hljs-attr">related:</span> {}
      <span class="hljs-attr">externalValue:</span> <span class="hljs-string">./examples/productNoNulls.xml</span>
</code></pre>
                    <p>其中 <code>./examples/productWithNulls.xml</code> 将为：</p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-tag">&lt;<span class="hljs-name">product</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">description</span>&gt;</span>Thing<span class="hljs-tag">&lt;/<span class="hljs-name">description</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">related</span> <span class="hljs-attr">xsi:nil</span>=<span class="hljs-string">"true"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">product</span>&gt;</span>
</code></pre>
                    <p>而 <code>./examples/productNoNulls.xml</code> 将为：</p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-tag">&lt;<span class="hljs-name">product</span> <span class="hljs-attr">count</span>=<span class="hljs-string">"42"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">description</span>&gt;</span>Thing<span class="hljs-tag">&lt;/<span class="hljs-name">description</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">related</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">related</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">product</span>&gt;</span>
</code></pre>
                </section>
            </section>
        </section>
        <section id="security-scheme-object">
            <div class="header-wrapper">
                <h3 id="x4-27-security-scheme-object"><bdi class="secno">4.27 </bdi>安全方案对象</h3><a class="self-link"
                    href="#security-scheme-object" aria-label="Permalink for Section 4.27"></a>
            </div>
            <p>定义可被操作使用的安全方案。</p>
            <p>支持的方案包括 HTTP 验证、API 密钥（作为头部、cookie 参数或查询参数）、双向 TLS（使用客户端证书）、OAuth2 的常见流程（隐式、密码、客户端凭证和授权代码），如 [<cite><a
                        class="bibref" data-link-type="biblio" href="#bib-rfc6749"
                        title="The OAuth 2.0 Authorization Framework">RFC6749</a></cite>] 所定义；OAuth2 设备授权流程，如 [<cite><a
                        class="bibref" data-link-type="biblio" href="#bib-rfc8628"
                        title="OAuth 2.0 Device Authorization Grant">RFC8628</a></cite>] 所定义；以及 [<cite><a class="bibref"
                        data-link-type="biblio" href="#bib-openid-connect-core"
                        title="OpenID Connect Core 1.0 incorporating errata set 2">OpenID-Connect-Core</a></cite>]。请注意，截至
                2020 年，隐式流程已由 <a href="https://tools.ietf.org/html/draft-ietf-oauth-security-topics">OAuth 2.0 Security
                    Best Current
                    Practice</a> 建议弃用。对于大多数使用场景，推荐使用带 PKCE 的授权代码授权（Authorization Code Grant）流程。</p>
            <section id="fixed-fields-23">
                <div class="header-wrapper">
                    <h4 id="x4-27-1-fixed-fields"><bdi class="secno">4.27.1 </bdi>固定字段</h4><a class="self-link"
                        href="#fixed-fields-23" aria-label="Permalink for Section 4.27.1"></a>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>字段名</th>
                            <th style="text-align:center">类型</th>
                            <th>适用对象</th>
                            <th>描述</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><span id="security-scheme-type"></span>type</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td>Any</td>
                            <td><strong><em class="rfc2119">REQUIRED</em></strong>。安全方案的类型。有效值为
                                <code>"apiKey"</code>、<code>"http"</code>、<code>"mutualTLS"</code>、<code>"oauth2"</code>、<code>"openIdConnect"</code>。
                            </td>
                        </tr>
                        <tr>
                            <td><span id="security-scheme-description"></span>description</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td>Any</td>
                            <td>安全方案的描述。可以使用 [<cite><a class="bibref" data-link-type="biblio" href="#bib-commonmark"
                                        title="CommonMark Spec">CommonMark</a></cite>] 语法进行富文本表示（<em
                                    class="rfc2119">MAY</em>）。</td>
                        </tr>
                        <tr>
                            <td><span id="security-scheme-name"></span>name</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td><code>apiKey</code></td>
                            <td><strong><em class="rfc2119">REQUIRED</em></strong>。要使用的头部、查询或 cookie 参数的名称。</td>
                        </tr>
                        <tr>
                            <td><span id="security-scheme-in"></span>in</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td><code>apiKey</code></td>
                            <td><strong><em class="rfc2119">REQUIRED</em></strong>。API 密钥的位置。有效值为
                                <code>"query"</code>、<code>"header"</code> 或 <code>"cookie"</code>。
                            </td>
                        </tr>
                        <tr>
                            <td><span id="security-scheme-scheme"></span>scheme</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td><code>http</code></td>
                            <td><strong><em class="rfc2119">REQUIRED</em></strong>。在 Authorization 头中使用的 HTTP 认证方案的名称，如
                                [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc9110"
                                        title="HTTP Semantics">RFC9110</a></cite>] <a
                                    href="https://datatracker.ietf.org/doc/html/rfc9110#section-16.4.1">第 16.4.1 节</a>
                                所定义。建议使用在 <cite><a class="bibref" data-link-type="biblio"
                                        href="#bib-iana-http-authschemes"
                                        title="Hypertext Transfer Protocol (HTTP) Authentication Scheme Registry">IANA
                                        Authentication Scheme registry</a></cite> 中注册的值。该值为不区分大小写，依据 [<cite><a
                                        class="bibref" data-link-type="biblio" href="#bib-rfc9110"
                                        title="HTTP Semantics">RFC9110</a></cite>] <a
                                    href="https://datatracker.ietf.org/doc/html/rfc9110#section-11.1">第 11.1 节</a> 的定义。
                            </td>
                        </tr>
                        <tr>
                            <td><span id="security-scheme-bearer-format"></span>bearerFormat</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td><code>http</code> (<code>"bearer"</code>)</td>
                            <td>提示客户端了解承载令牌的格式。承载令牌通常由授权服务器生成，因此此信息主要用于文档说明。</td>
                        </tr>
                        <tr>
                            <td><span id="security-scheme-flows"></span>flows</td>
                            <td style="text-align:center"><a href="#oauth-flows-object">OAuth Flows Object</a></td>
                            <td><code>oauth2</code></td>
                            <td><strong><em class="rfc2119">REQUIRED</em></strong>。包含对所支持流程类型的配置的对象。</td>
                        </tr>
                        <tr>
                            <td><span id="security-scheme-open-id-connect-url"></span>openIdConnectUrl</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td><code>openIdConnect</code></td>
                            <td><strong><em class="rfc2119">REQUIRED</em></strong>。用于发现 [<cite><a class="bibref"
                                        data-link-type="biblio" href="#bib-openid-connect-discovery"
                                        title="OpenID Connect Discovery 1.0 incorporating errata set 2">OpenID-Connect-Discovery</a></cite>]
                                提供者元数据的 <a
                                    href="https://openid.net/specs/openid-connect-discovery-1_0.html#ProviderConfig">Well-known
                                    URL</a>。</td>
                        </tr>
                        <tr>
                            <td><span id="security-scheme-oauth2-metadata-url"></span>oauth2MetadataUrl</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td><code>oauth2</code></td>
                            <td>OAuth2 授权服务器元数据的 URL [<cite><a class="bibref" data-link-type="biblio"
                                        href="#bib-rfc8414"
                                        title="OAuth 2.0 Authorization Server Metadata">RFC8414</a></cite>]。要求使用 TLS。
                            </td>
                        </tr>
                        <tr>
                            <td><span id="security-scheme-deprecated"></span>deprecated</td>
                            <td style="text-align:center"><code>boolean</code></td>
                            <td>Any</td>
                            <td>声明该安全方案已被弃用。使用者 <em class="rfc2119">SHOULD</em> 避免使用该声明的方案。默认值为 <code>false</code>。</td>
                        </tr>
                    </tbody>
                </table>
                <p>此对象 <em class="rfc2119">MAY</em> 使用 <a href="#specification-extensions">规范扩展</a> 进行扩展。</p>
            </section>
            <section id="security-scheme-object-examples">
                <div class="header-wrapper">
                    <h4 id="x4-27-2-security-scheme-object-examples"><bdi class="secno">4.27.2 </bdi>安全方案对象示例</h4><a
                        class="self-link" href="#security-scheme-object-examples"
                        aria-label="Permalink for Section 4.27.2"></a>
                </div>
                <section id="basic-authentication-example">
                    <div class="header-wrapper">
                        <h5 id="x4-27-2-1-basic-authentication-example"><bdi class="secno">4.27.2.1 </bdi>基本认证示例</h5><a
                            class="self-link" href="#basic-authentication-example"
                            aria-label="Permalink for Section 4.27.2.1"></a>
                    </div>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">type:</span> <span class="hljs-string">http</span>
<span class="hljs-attr">scheme:</span> <span class="hljs-string">basic</span>
</code></pre>
                </section>
                <section id="api-key-example">
                    <div class="header-wrapper">
                        <h5 id="x4-27-2-2-api-key-example"><bdi class="secno">4.27.2.2 </bdi>API 密钥示例</h5><a
                            class="self-link" href="#api-key-example" aria-label="Permalink for Section 4.27.2.2"></a>
                    </div>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">type:</span> <span class="hljs-string">apiKey</span>
<span class="hljs-attr">name:</span> <span class="hljs-string">api-key</span>
<span class="hljs-attr">in:</span> <span class="hljs-string">header</span>
</code></pre>
                </section>
                <section id="jwt-bearer-example">
                    <div class="header-wrapper">
                        <h5 id="x4-27-2-3-jwt-bearer-example"><bdi class="secno">4.27.2.3 </bdi>JWT 承载示例</h5>
                        <a class="self-link" href="#jwt-bearer-example" aria-label="Permalink for Section 4.27.2.3"></a>
                    </div>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">type:</span> <span class="hljs-string">http</span>
<span class="hljs-attr">scheme:</span> <span class="hljs-string">bearer</span>
<span class="hljs-attr">bearerFormat:</span> <span class="hljs-string">JWT</span>
</code></pre>
                </section>
                <section id="mutualtls-example">
                    <div class="header-wrapper">
                        <h5 id="x4-27-2-4-mutualtls-example"><bdi class="secno">4.27.2.4 </bdi>双向 TLS 示例</h5><a
                            class="self-link" href="#mutualtls-example" aria-label="Permalink for Section 4.27.2.4"></a>
                    </div>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">type:</span> <span class="hljs-string">mutualTLS</span>
<span class="hljs-attr">description:</span> <span class="hljs-string">Cert</span> <span class="hljs-string">must</span> <span class="hljs-string">be</span> <span class="hljs-string">signed</span> <span class="hljs-string">by</span> <span class="hljs-string">example.com</span> <span class="hljs-string">CA</span>
</code></pre>
                </section>
                <section id="implicit-oauth2-example">
                    <div class="header-wrapper">
                        <h5 id="x4-27-2-5-implicit-oauth2-example"><bdi class="secno">4.27.2.5 </bdi>隐式 OAuth2 示例</h5><a
                            class="self-link" href="#implicit-oauth2-example"
                            aria-label="Permalink for Section 4.27.2.5"></a>
                    </div>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">type:</span> <span class="hljs-string">oauth2</span>
<span class="hljs-attr">flows:</span>
  <span class="hljs-attr">implicit:</span>
    <span class="hljs-attr">authorizationUrl:</span> <span class="hljs-string">https://example.com/api/oauth/dialog</span>
    <span class="hljs-attr">scopes:</span>
      <span class="hljs-attr">write:pets:</span> <span class="hljs-string">modify</span> <span class="hljs-string">pets</span> <span class="hljs-string">in</span> <span class="hljs-string">your</span> <span class="hljs-string">account</span>
      <span class="hljs-attr">read:pets:</span> <span class="hljs-string">read</span> <span class="hljs-string">your</span> <span class="hljs-string">pets</span>
</code></pre>
                </section>
            </section>
        </section>
        <section id="oauth-flows-object">
            <div class="header-wrapper">
                <h3 id="x4-28-oauth-flows-object"><bdi class="secno">4.28 </bdi>OAuth 流程对象</h3><a class="self-link"
                    href="#oauth-flows-object" aria-label="Permalink for Section 4.28"></a>
            </div>
            <p>允许配置所支持的 OAuth 流程。</p>
            <section id="fixed-fields-24">
                <div class="header-wrapper">
                    <h4 id="x4-28-1-fixed-fields"><bdi class="secno">4.28.1 </bdi>固定字段</h4><a class="self-link"
                        href="#fixed-fields-24" aria-label="Permalink for Section 4.28.1"></a>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>字段名</th>
                            <th style="text-align:center">类型</th>
                            <th>描述</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><span id="oauth-flows-implicit"></span>implicit</td>
                            <td style="text-align:center"><a href="#oauth-flow-object">OAuth Flow Object</a></td>
                            <td>OAuth 隐式流程的配置</td>
                        </tr>
                        <tr>
                            <td><span id="oauth-flows-password"></span>password</td>
                            <td style="text-align:center"><a href="#oauth-flow-object">OAuth Flow Object</a></td>
                            <td>OAuth 资源所有者密码（Resource Owner Password）流程的配置</td>
                        </tr>
                        <tr>
                            <td><span id="oauth-flows-client-credentials"></span>clientCredentials</td>
                            <td style="text-align:center"><a href="#oauth-flow-object">OAuth Flow Object</a></td>
                            <td>OAuth 客户端凭证（Client Credentials）流程的配置。在 OpenAPI 2.0 中曾被称为 <code>application</code>。</td>
                        </tr>
                        <tr>
                            <td><span id="oauth-flows-authorization-code"></span>authorizationCode</td>
                            <td style="text-align:center"><a href="#oauth-flow-object">OAuth Flow Object</a></td>
                            <td>OAuth 授权代码（Authorization Code）流程的配置。在 OpenAPI 2.0 中曾被称为 <code>accessCode</code>。</td>
                        </tr>
                        <tr>
                            <td><span id="oauth-flows-device-authorization"></span>deviceAuthorization</td>
                            <td style="text-align:center"><a href="#oauth-flow-object">OAuth Flow Object</a></td>
                            <td>OAuth 设备授权（Device Authorization）流程的配置。</td>
                        </tr>
                    </tbody>
                </table>
                <p>此对象 <em class="rfc2119">MAY</em> 使用 <a href="#specification-extensions">规范扩展</a> 进行扩展。</p>
            </section>
        </section>
        <section id="oauth-flow-object">
            <div class="header-wrapper">
                <h3 id="x4-29-oauth-flow-object"><bdi class="secno">4.29 </bdi>OAuth 流对象</h3><a class="self-link"
                    href="#oauth-flow-object" aria-label="Permalink for Section 4.29"></a>
            </div>
            <p>受支持的 OAuth 流的配置详情</p>
            <section id="fixed-fields-25">
                <div class="header-wrapper">
                    <h4 id="x4-29-1-fixed-fields"><bdi class="secno">4.29.1 </bdi>固定字段</h4><a class="self-link"
                        href="#fixed-fields-25" aria-label="Permalink for Section 4.29.1"></a>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>字段名</th>
                            <th style="text-align:center">类型</th>
                            <th>适用对象</th>
                            <th>描述</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><span id="oauth-flow-authorization-url"></span>authorizationUrl</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td><code>oauth2</code> (<code>"implicit"</code>, <code>"authorizationCode"</code>)</td>
                            <td><strong><em class="rfc2119">REQUIRED</em></strong>。用于此流程的 authorization URL。该值 <em
                                    class="rfc2119">MUST</em> 必须为 URL 形式。OAuth2 标准要求使用 TLS。</td>
                        </tr>
                        <tr>
                            <td><span id="oauth-flow-device-authorization-url"></span>deviceAuthorizationUrl</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td><code>oauth2</code> (<code>"deviceAuthorization"</code>)</td>
                            <td><strong><em class="rfc2119">REQUIRED</em></strong>。用于此流程的 device authorization URL。该值
                                <em class="rfc2119">MUST</em> 必须为 URL 形式。OAuth2 标准要求使用 TLS。
                            </td>
                        </tr>
                        <tr>
                            <td><span id="oauth-flow-token-url"></span>tokenUrl</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td><code>oauth2</code> (<code>"password"</code>, <code>"clientCredentials"</code>,
                                <code>"authorizationCode"</code>, <code>"deviceAuthorization"</code>)
                            </td>
                            <td><strong><em class="rfc2119">REQUIRED</em></strong>。用于此流程的 token URL。该值 <em
                                    class="rfc2119">MUST</em> 必须为 URL 形式。OAuth2 标准要求使用 TLS。</td>
                        </tr>
                        <tr>
                            <td><span id="oauth-flow-refresh-url"></span>refreshUrl</td>
                            <td style="text-align:center"><code>string</code></td>
                            <td><code>oauth2</code></td>
                            <td>用于获取刷新令牌的 URL。该值 <em class="rfc2119">MUST</em> 必须为 URL 形式。OAuth2 标准要求使用 TLS。</td>
                        </tr>
                        <tr>
                            <td><span id="oauth-flow-scopes"></span>scopes</td>
                            <td style="text-align:center">Map[<code>string</code>, <code>string</code>]</td>
                            <td><code>oauth2</code></td>
                            <td><strong><em class="rfc2119">REQUIRED</em></strong>。OAuth2 安全方案可用的 scopes。一个从 scope
                                名称到其简短描述的映射。该映射 <em class="rfc2119">MAY</em> 为空。
                            </td>
                        </tr>
                    </tbody>
                </table>
                <p>此对象 <em class="rfc2119">MAY</em> 使用 <a href="#specification-extensions">Specification Extensions</a>
                    进行扩展。</p>
            </section>
            <section id="oauth-flow-object-example">
                <div class="header-wrapper">
                    <h4 id="x4-29-2-oauth-flow-object-example"><bdi class="secno">4.29.2 </bdi>OAuth 流对象示例
                    </h4><a class="self-link" href="#oauth-flow-object-example"
                        aria-label="Permalink for Section 4.29.2"></a>
                </div>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">type:</span> <span class="hljs-string">oauth2</span>
<span class="hljs-attr">flows:</span>
  <span class="hljs-attr">implicit:</span>
    <span class="hljs-attr">authorizationUrl:</span> <span class="hljs-string">https://example.com/api/oauth/dialog</span>
    <span class="hljs-attr">scopes:</span>
      <span class="hljs-attr">write:pets:</span> <span class="hljs-string">修改您账户中的宠物</span>
      <span class="hljs-attr">read:pets:</span> <span class="hljs-string">读取您的宠物</span>
  <span class="hljs-attr">authorizationCode:</span>
    <span class="hljs-attr">authorizationUrl:</span> <span class="hljs-string">https://example.com/api/oauth/dialog</span>
    <span class="hljs-attr">tokenUrl:</span> <span class="hljs-string">https://example.com/api/oauth/token</span>
    <span class="hljs-attr">scopes:</span>
      <span class="hljs-attr">write:pets:</span> <span class="hljs-string">修改您账户中的宠物</span>
      <span class="hljs-attr">read:pets:</span> <span class="hljs-string">读取您的宠物</span>
</code></pre>
            </section>
        </section>
        <section id="security-requirement-object">
            <div class="header-wrapper">
                <h3 id="x4-30-security-requirement-object"><bdi class="secno">4.30 </bdi>安全需求对象
                </h3><a class="self-link" href="#security-requirement-object"
                    aria-label="Permalink for Section 4.30"></a>
            </div>
            <p>列出执行此操作所需的安全方案。</p>
            <p>用于每个属性的名称 <em class="rfc2119">MUST</em> 要么对应于在 <a href="#components-security-schemes">Components
                    Object</a> 下的 <a href="#components-object">Security Schemes</a> 中声明的安全方案，要么为 Security Scheme Object
                的 URI。与 Components Object 下组件名称相同的属性名 <em class="rfc2119">MUST</em> 被视为组件名称。为了引用与组件名冲突的单段相对 URI 引用（例如
                <code>foo</code> 对应 <code>#/components/securitySchemes/foo</code>），请使用 <code>.</code> 路径段（例如
                <code>./foo</code>）。
            </p>
            <p>使用看起来像 URI 的安全方案组件名称 <em class="rfc2119">NOT RECOMMENDED</em>，因为为兼容之前的 OAS 版本需要将组件名称匹配优先于 URI
                解析，这一点可能违反直觉。另请参见 <a href="#security-considerations">安全注意事项</a>。</p>
            <p>Security Requirement Object <em class="rfc2119">MAY</em> 引用多个安全方案，在这种情况下，所有这些方案 <em
                    class="rfc2119">MUST</em> 都必须满足，才能使请求被授权。这支持需要通过多个查询参数或 HTTP 头传递安全信息的场景。</p>
            <p>当在 <a href="#openapi-object">OpenAPI Object</a> 或 <a href="#operation-object">Operation Object</a> 上定义
                <code>security</code> 字段并包含多个 Security Requirement Objects 时，列表中的任意一项满足即可授权请求。这支持 API 允许多种独立安全方案的场景。
            </p>
            <p>空的 Security Requirement Object（<code>{}</code>）表示支持匿名访问。</p>
            <section id="patterned-fields-2">
                <div class="header-wrapper">
                    <h4 id="x4-30-1-patterned-fields"><bdi class="secno">4.30.1 </bdi>模式字段</h4><a class="self-link"
                        href="#patterned-fields-2" aria-label="Permalink for Section 4.30.1"></a>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>字段模式</th>
                            <th style="text-align:center">类型</th>
                            <th>描述</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><span id="security-requirements-name"></span>{name}</td>
                            <td style="text-align:center">[<code>string</code>]</td>
                            <td>每个名称或 URI <em class="rfc2119">MUST</em> 对应上述描述的安全方案。如果安全方案类型为 <code>"oauth2"</code> 或
                                <code>"openIdConnect"</code>，则其值为执行所需的 scope 名称列表；若授权不要求指定 scope，则该列表 <em
                                    class="rfc2119">MAY</em> 为空。对于其它安全方案类型，数组 <em class="rfc2119">MAY</em>
                                包含执行所需的角色名称，但这些角色名称不会在带内定义或交换。
                            </td>
                        </tr>
                    </tbody>
                </table>
            </section>
            <section id="security-requirement-object-examples">
                <div class="header-wrapper">
                    <h4 id="x4-30-2-security-requirement-object-examples"><bdi class="secno">4.30.2 </bdi>安全需求对象示例</h4>
                    <a class="self-link" href="#security-requirement-object-examples"
                        aria-label="Permalink for Section 4.30.2"></a>
                </div>
                <p>另见 <a href="#implicit-connection-resolution-examples">隐式连接解析示例</a>（位于 <a
                        href="#appendix-g-parsing-and-resolution-guidance">附录 G：解析与解析指导</a>），其中展示了在多文档 OpenAPI 描述中使用
                    Security Requirement Objects 的示例。</p>
                <section id="non-oauth2-security-requirement">
                    <div class="header-wrapper">
                        <h5 id="x4-30-2-1-non-oauth2-security-requirement"><bdi class="secno">4.30.2.1 </bdi>非 OAuth2
                            的安全需求</h5><a class="self-link" href="#non-oauth2-security-requirement"
                            aria-label="Permalink for Section 4.30.2.1"></a>
                    </div>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">api_key:</span> []
</code></pre>
                </section>
                <section id="oauth2-security-requirement">
                    <div class="header-wrapper">
                        <h5 id="x4-30-2-2-oauth2-security-requirement"><bdi class="secno">4.30.2.2 </bdi>OAuth2 安全需求
                        </h5><a class="self-link" href="#oauth2-security-requirement"
                            aria-label="Permalink for Section 4.30.2.2"></a>
                    </div>
                    <p>此示例使用 Security Scheme 的组件名称。</p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">petstore_auth:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">write:pets</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">read:pets</span>
</code></pre>
                </section>
                <section id="optional-oauth2-security">
                    <div class="header-wrapper">
                        <h5 id="x4-30-2-3-optional-oauth2-security"><bdi class="secno">4.30.2.3 </bdi>可选的 OAuth2 安全</h5>
                        <a class="self-link" href="#optional-oauth2-security"
                            aria-label="Permalink for Section 4.30.2.3"></a>
                    </div>
                    <p>此示例使用 Security Scheme 的相对 URI 引用。</p>
                    <p>在 <a href="#openapi-object">OpenAPI Object</a> 或 <a href="#operation-object">Operation Object</a>
                        中定义的可选 OAuth2 安全示例如下：</p>
                    <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">security:</span>
  <span class="hljs-bullet">-</span> {}
  <span class="hljs-bullet">-</span> <span class="hljs-attr">petstore_auth:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">write:pets</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">read:pets</span>
</code></pre>
                </section>
            </section>
        </section>
    </section>
    <section id="specification-extensions">
        <div class="header-wrapper">
            <h2 id="x5-specification-extensions"><bdi class="secno">5. </bdi>规范扩展</h2><a class="self-link"
                href="#specification-extensions" aria-label="Permalink for Section 5."></a>
        </div>
        <p>尽管 OpenAPI 规范试图涵盖大多数用例，但可以在某些点添加额外数据以扩展规范。</p>
        <p>扩展属性以模式化字段实现，始终以 <code>x-</code> 为前缀。</p>
        <table>
            <thead>
                <tr>
                    <th>字段模式</th>
                    <th style="text-align:center">类型</th>
                    <th>描述</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><span id="extension-properties"></span>^x-</td>
                    <td style="text-align:center">Any</td>
                    <td>允许对 OpenAPI 模式进行扩展。字段名 <em class="rfc2119">MUST</em> 以 <code>x-</code> 开头，例如
                        <code>x-internal-id</code>。以 <code>x-oai-</code> 和 <code>x-oas-</code> 开头的字段名保留供 <a
                            href="https://www.openapis.org/">OpenAPI Initiative</a> 定义的用途使用。值可以是任何有效的 JSON
                        值（<code>null</code>、原语、数组或对象）。
                    </td>
                </tr>
            </tbody>
        </table>
        <p>OpenAPI Initiative 维护多个 <cite><a class="bibref" data-link-type="biblio" href="#bib-openapi-registry"
                    title="OpenAPI Initiative Registry">扩展注册表</a></cite>，包括针对 <a
                href="https://spec.openapis.org/registry/extension/">单个扩展关键字</a> 和 <a
                href="https://spec.openapis.org/registry/namespace/">扩展关键字命名空间</a> 的注册表。</p>
        <p>扩展是验证拟议添加项可行性的最佳方式之一。因此 <em class="rfc2119">RECOMMENDED</em> 实现应被设计为可扩展以支持社区实验。</p>
        <p>对任一扩展的支持为 <em class="rfc2119">OPTIONAL</em>，对一个扩展的支持并不意味着对其他扩展的支持。</p>
    </section>
    <section id="security-considerations">
        <div class="header-wrapper">
            <h2 id="x6-security-considerations"><bdi class="secno">6. </bdi>安全注意事项</h2><a class="self-link"
                href="#security-considerations" aria-label="Permalink for Section 6."></a>
        </div>
        <section id="openapi-description-formats">
            <div class="header-wrapper">
                <h3 id="x6-1-openapi-description-formats"><bdi class="secno">6.1 </bdi>OpenAPI 描述格式</h3>
                <a class="self-link" href="#openapi-description-formats" aria-label="Permalink for Section 6.1"></a>
            </div>
            <p>OpenAPI 描述使用 JSON、YAML 和 JSON Schema 的组合，因此它们共享相应的安全注意事项：</p>
            <ul>
                <li><a href="https://www.iana.org/assignments/media-types/application/json">JSON</a></li>
                <li><a href="https://www.iana.org/assignments/media-types/application/yaml">YAML</a></li>
                <li><a href="https://www.ietf.org/archive/id/draft-bhutton-json-schema-01.html#section-13">JSON Schema
                        Core</a></li>
                <li><a href="https://www.ietf.org/archive/id/draft-bhutton-json-schema-validation-01.html#section-10">JSON
                        Schema Validation</a></li>
            </ul>
        </section>
        <section id="tooling-and-usage-scenarios">
            <div class="header-wrapper">
                <h3 id="x6-2-tooling-and-usage-scenarios"><bdi class="secno">6.2 </bdi>工具与使用场景</h3>
                <a class="self-link" href="#tooling-and-usage-scenarios" aria-label="Permalink for Section 6.2"></a>
            </div>
            <p>此外，OpenAPI 描述会被各种工具以多种用途处理，例如客户端代码生成、文档生成、服务端路由和 API 测试。OpenAPI 描述作者必须考虑 OpenAPI 描述可能被使用的场景所带来的风险。</p>
        </section>
        <section id="security-schemes">
            <div class="header-wrapper">
                <h3 id="x6-3-security-schemes"><bdi class="secno">6.3 </bdi>安全方案</h3><a class="self-link"
                    href="#security-schemes" aria-label="Permalink for Section 6.3"></a>
            </div>
            <p>OpenAPI 描述说明了用于保护其定义资源的安全方案。可用的安全方案提供不同程度的保护。数据的敏感性和安全漏洞可能带来的影响等因素应指导 API 资源安全方案的选择。有些安全方案（例如 basic auth
                和 OAuth 隐式流程）是为与现有 API 兼容而支持的。然而，在 OpenAPI 中包含它们并不意味着对其使用的认可，尤其是在处理高度敏感的数据或操作时。</p>
            <p>将 <a href="#security-requirement-object">Security Requirement Object</a> 连接到 <a
                    href="#security-scheme-object">Security Scheme Object</a>（位于 <a href="#components-object">Components
                    Object</a> 下）时的规则存在模糊之处，可能被利用。具体而言：</p>
            <ul>
                <li>在被引用文档中，Security Requirement Object 使用的组件名称究竟是从入口文档解析（<em
                        class="rfc2119">RECOMMENDED</em>）还是从被引用文档解析，这是由实现定义的。</li>
                <li>使用 URI 来标识 Security Scheme Object 的 Security Requirement Object 可以通过提供与该 URI 相同的 Security Scheme
                    组件名称来劫持 URI 解析，因为为了兼容以前的 OAS 版本，名称查找行为优先于 URI 解析。</li>
            </ul>
        </section>
        <section id="security-filtering">
            <div class="header-wrapper">
                <h3 id="x6-4-security-filtering"><bdi class="secno">6.4 </bdi>安全过滤</h3><a class="self-link"
                    href="#security-filtering" aria-label="Permalink for Section 6.4"></a>
            </div>
            <p>OpenAPI 规范中的某些对象 <em class="rfc2119">MAY</em> 被声明但保持为空，或被完全移除，尽管它们本质上是 API 文档的核心。</p>
            <p>其原因是允许在文档之上增加一层访问控制。尽管这不是规范本身的一部分，但某些库 <em class="rfc2119">MAY</em> 选择基于某种形式的认证/授权来允许访问文档的部分内容。</p>
            <p>两个例子：</p>
            <ol>
                <li><a href="#paths-object">Paths Object</a> <em class="rfc2119">MAY</em>
                    存在但为空。虽然这可能令人困惑，但这可能告诉查看者他们来到了正确的位置，但无法访问任何文档。查看者仍然至少可以访问 <a href="#info-object">Info
                        Object</a>，其中可能包含关于认证的额外信息。</li>
                <li><a href="#path-item-object">Path Item Object</a> <em class="rfc2119">MAY</em>
                    为空。在这种情况下，查看者会知道该路径存在，但无法查看其任何操作或参数。这与将路径本身从 <a href="#paths-object">Paths Object</a>
                    中隐藏不同，因为用户仍会知道其存在。这允许文档提供者精细控制查看者能看到的内容。</li>
            </ol>
        </section>
        <section id="handling-external-resources">
            <div class="header-wrapper">
                <h3 id="x6-5-handling-external-resources"><bdi class="secno">6.5 </bdi>处理外部资源</h3>
                <a class="self-link" href="#handling-external-resources" aria-label="Permalink for Section 6.5"></a>
            </div>
            <p>OpenAPI 描述可能包含对外部资源的引用，消费工具可能会自动对其进行解引用。外部资源可能托管在不同且不受信任的域上。</p>
        </section>
        <section id="handling-reference-cycles">
            <div class="header-wrapper">
                <h3 id="x6-6-handling-reference-cycles"><bdi class="secno">6.6 </bdi>处理引用循环</h3><a class="self-link"
                    href="#handling-reference-cycles" aria-label="Permalink for Section 6.6"></a>
            </div>
            <p>OpenAPI 描述中的引用可能导致循环。工具必须检测并处理循环以防止资源耗尽。</p>
        </section>
        <section id="markdown-and-html-sanitization">
            <div class="header-wrapper">
                <h3 id="x6-7-markdown-and-html-sanitization"><bdi class="secno">6.7 </bdi>Markdown 与 HTML 清理</h3><a
                    class="self-link" href="#markdown-and-html-sanitization" aria-label="Permalink for Section 6.7"></a>
            </div>
            <p>某些字段允许使用 Markdown，而 Markdown 可能包含包括脚本在内的 HTML。适当清理 Markdown（sanitization）是工具的责任。</p>
        </section>
    </section>
    <section class="appendix" id="appendix-a-revision-history">
        <div class="header-wrapper">
            <h2 id="a-appendix-a-revision-history"><bdi class="secno">A. </bdi>附录 A：修订历史</h2><a class="self-link"
                href="#appendix-a-revision-history" aria-label="Permalink for Appendix A."></a>
        </div>
        <table>
            <thead>
                <tr>
                    <th>版本</th>
                    <th>日期</th>
                    <th>说明</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>3.2.0</td>
                    <td>2025-09-19</td>
                    <td>发布 OpenAPI 规范 3.2.0</td>
                </tr>
                <tr>
                    <td>3.1.2</td>
                    <td>2025-09-19</td>
                    <td>OpenAPI 规范 3.1.2 的补丁发布</td>
                </tr>
                <tr>
                    <td>3.1.1</td>
                    <td>2024-10-24</td>
                    <td>OpenAPI 规范 3.1.1 的补丁发布</td>
                </tr>
                <tr>
                    <td>3.1.0</td>
                    <td>2021-02-15</td>
                    <td>发布 OpenAPI 规范 3.1.0</td>
                </tr>
                <tr>
                    <td>3.1.0-rc1</td>
                    <td>2020-10-08</td>
                    <td>3.1 规范的 rc1</td>
                </tr>
                <tr>
                    <td>3.1.0-rc0</td>
                    <td>2020-06-18</td>
                    <td>3.1 规范的 rc0</td>
                </tr>
                <tr>
                    <td>3.0.4</td>
                    <td>2024-10-24</td>
                    <td>OpenAPI 规范 3.0.4 的补丁发布</td>
                </tr>
                <tr>
                    <td>3.0.3</td>
                    <td>2020-02-20</td>
                    <td>OpenAPI 规范 3.0.3 的补丁发布</td>
                </tr>
                <tr>
                    <td>3.0.2</td>
                    <td>2018-10-08</td>
                    <td>OpenAPI 规范 3.0.2 的补丁发布</td>
                </tr>
                <tr>
                    <td>3.0.1</td>
                    <td>2017-12-06</td>
                    <td>OpenAPI 规范 3.0.1 的补丁发布</td>
                </tr>
                <tr>
                    <td>3.0.0</td>
                    <td>2017-07-26</td>
                    <td>发布 OpenAPI 规范 3.0.0</td>
                </tr>
                <tr>
                    <td>3.0.0-rc2</td>
                    <td>2017-06-16</td>
                    <td>3.0 规范的 rc2</td>
                </tr>
                <tr>
                    <td>3.0.0-rc1</td>
                    <td>2017-04-27</td>
                    <td>3.0 规范的 rc1</td>
                </tr>
                <tr>
                    <td>3.0.0-rc0</td>
                    <td>2017-02-28</td>
                    <td>3.0 规范的实施者草案</td>
                </tr>
                <tr>
                    <td>2.0</td>
                    <td>2015-12-31</td>
                    <td>将 Swagger 2.0 捐赠给 OpenAPI Initiative</td>
                </tr>
                <tr>
                    <td>2.0</td>
                    <td>2014-09-08</td>
                    <td>发布 Swagger 2.0</td>
                </tr>
                <tr>
                    <td>1.2</td>
                    <td>2014-03-14</td>
                    <td>正式文档的初始发布。</td>
                </tr>
                <tr>
                    <td>1.1</td>
                    <td>2012-08-22</td>
                    <td>发布 Swagger 1.1</td>
                </tr>
                <tr>
                    <td>1.0</td>
                    <td>2011-08-10</td>
                    <td>首次发布 Swagger 规范</td>
                </tr>
            </tbody>
        </table>
    </section>
    <section class="appendix" id="appendix-b-data-type-conversion">
        <div class="header-wrapper">
            <h2 id="b-appendix-b-data-type-conversion"><bdi class="secno">B. </bdi>附录 B：数据类型转换</h2>
            <a class="self-link" href="#appendix-b-data-type-conversion" aria-label="Permalink for Appendix B."></a>
        </div>
        <p>将类型化数据序列化为纯文本（例如在 <code>text/plain</code> 消息体或 <code>multipart</code> 部分中，或在 URL 查询字符串或消息体中的
            <code>application/x-www-form-urlencoded</code> 格式中）涉及大量由实现或应用定义的行为。
        </p>
        <p><a href="#schema-object">Schema Objects</a> 基于 <a
                href="https://www.ietf.org/archive/id/draft-bhutton-json-schema-01.html#section-4.2.1">JSON Schema
                数据模型</a> 对数据进行验证，该模型仅识别四种原始数据类型：字符串（通常仅作为 UTF-8 具有良好互操作性）、数字、布尔值和
            <code>null</code>。值得注意的是，整数并不是与其它数字不同的独立类型，<code>type: "integer"</code> 只是一个数学上的便利，而不是基于字符串表示中是否包含小数点来区分。
        </p>
        <p><a href="#parameter-object">Parameter Object</a>、<a href="#header-object">Header Object</a> 和 <a
                href="#encoding-object">Encoding Object</a>
            提供了控制如何排列数组或对象类型值的功能。它们还可以控制如何对字符串进行进一步编码以避免保留或非法字符。然而，对于将经模式验证的非 UTF-8 原始数据类型（或整个数组或对象）转换为字符串，并没有通用规范。</p>
        <p>有两种情况提供基于标准的指导：</p>
        <ul>
            <li>[<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc3987"
                        title="Internationalized Resource Identifiers (IRIs)">RFC3987</a></cite>] 的 <a
                    href="https://datatracker.ietf.org/doc/html/rfc3987#section-3.1">第 3.1 节</a> 为将非 Unicode 字符串转换为
                UTF-8 提供指导，特别是在 URI（以及使用相同编码规则的表单媒体类型）上下文中。</li>
            <li>[<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc6570"
                        title="URI Template">RFC6570</a></cite>] 的 <a
                    href="https://datatracker.ietf.org/doc/html/rfc6570#section-2.3">第 2.3 节</a> 指定了哪些值（包括但不限于
                <code>null</code>）在展开过程中被视为 <em>未定义</em>，因此被特别处理。
            </li>
        </ul>
        <p>RFC6570 的实现通常对非字符串值的转换有自己的约定，但这些是实现特定的，不由 RFC 本身定义。这也是 OpenAPI 将这些转换留给实现定义的原因之一：它允许使用任意 RFC6570
            实现而无需依赖其具体转换策略。</p>
        <p>为了更精确地控制数字、布尔值和 <code>null</code>（或 RFC6570 视为未定义的其他值）的序列化，可以将模式定义为 <code>type: "string"</code> 并使用
            <code>pattern</code>、<code>enum</code>、<code>format</code>
            等关键字来约束，以指示应用在模式验证前必须如何预先转换其数据。得到的字符串就不需要进一步的类型转换。
        </p>
        <p><code>format</code> 关键字可以辅助序列化。一些格式（例如 <code>date-time</code>）是不含歧义的，而有些（例如格式注册表中的 <a
                href="https://spec.openapis.org/registry/format/decimal.html"><code>decimal</code></a>）则不够明确。然而，使用
            <code>format</code> 时必须小心，确保相关工具支持特定格式，否则未识别的格式将被忽略。
        </p>
        <p>要求输入为预格式化、模式验证通过的字符串也能改善往返互操作性，因为并非所有编程语言和环境都支持相同的数据类型。</p>
    </section>
    <section class="appendix" id="appendix-c-using-rfc6570-based-serialization">
        <div class="header-wrapper">
            <h2 id="c-appendix-c-using-rfc6570-based-serialization"><bdi class="secno">C. </bdi>附录 C：使用基于 RFC6570 的序列化
            </h2><a class="self-link" href="#appendix-c-using-rfc6570-based-serialization"
                aria-label="Permalink for Appendix C."></a>
        </div>
        <p>在三种场景中，序列化以 [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc6570"
                    title="URI Template">RFC6570</a></cite>] URI 模板来定义：</p>
        <table>
            <thead>
                <tr>
                    <th>对象</th>
                    <th>条件</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><a href="#parameter-object">Parameter Object</a></td>
                    <td>当存在 <code>schema</code> 时</td>
                </tr>
                <tr>
                    <td><a href="#header-object">Header Object</a></td>
                    <td>当存在 <code>schema</code> 时</td>
                </tr>
                <tr>
                    <td><a href="#encoding-object">Encoding Object</a></td>
                    <td>当对 <code>application/x-www-form-urlencoded</code> 进行编码并使用任一
                        <code>style</code>、<code>explode</code> 或 <code>allowReserved</code> 时
                    </td>
                </tr>
            </tbody>
        </table>
        <p>本规范的实现 <em class="rfc2119">MAY</em> 使用 RFC6570 的实现来执行变量展开，但有一些注意事项。</p>
        <p>注意，当使用 <code>style: "form"</code> 的 RFC6570 展开来生成 <code>application/x-www-form-urlencoded</code> HTTP
            消息体时，需要移除为满足 URI 查询字符串语法而产生的 <code>?</code> 前缀。</p>
        <p>当使用 <code>style</code> 等关键字来生成 <code>multipart/form-data</code> 消息体时，查询字符串名称被放在
            <code>Content-Disposition</code> 部分头的 <code>name</code> 参数中，值被放在对应的部分体中；此时不使用 <code>?</code>、<code>=</code>
            和 <code>&amp;</code> 字符，并且无论 <code>allowReserved</code> 的值如何，都不执行 URI 百分号编码。注意虽然 [<cite><a class="bibref"
                    data-link-type="biblio" href="#bib-rfc7578"
                    title="Returning Values from Forms: multipart/form-data">RFC7578</a></cite>] 允许在“文件名”中使用 [<cite><a
                    class="bibref" data-link-type="biblio" href="#bib-rfc3986"
                    title="Uniform Resource Identifier (URI): Generic Syntax">RFC3986</a></cite>]
            的百分号编码，但它并未在其它情况下处理格式内使用百分号编码。用户应当提供已经对名称和数据应用了符合 RFC7578 的必要转义。
        </p>
        <p>注意并非所有 RFC6570 实现都支持全部四个级别的操作符，而这些级别都需要以完全支持 OpenAPI 规范的用法。使用支持级别较低的实现将需要额外手动构造 URI 模板以规避限制。</p>
        <section id="equivalences-between-fields-and-rfc6570-operators">
            <div class="header-wrapper">
                <h3 id="c-1-equivalences-between-fields-and-rfc6570-operators"><bdi class="secno">C.1 </bdi>字段与 RFC6570
                    操作符的等价关系</h3><a class="self-link" href="#equivalences-between-fields-and-rfc6570-operators"
                    aria-label="Permalink for Appendix C.1"></a>
            </div>
            <p>某些字段值可转换为 RFC6570 的 <a href="https://tools.ietf.org/html/rfc6570#section-2.2">操作符</a>（或无操作符）：</p>
            <table>
                <thead>
                    <tr>
                        <th>字段</th>
                        <th>值</th>
                        <th>等价</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>style</td>
                        <td><code>"simple"</code></td>
                        <td><em>n/a</em></td>
                    </tr>
                    <tr>
                        <td>style</td>
                        <td><code>"matrix"</code></td>
                        <td><code>;</code> 前缀操作符</td>
                    </tr>
                    <tr>
                        <td>style</td>
                        <td><code>"label"</code></td>
                        <td><code>.</code> 前缀操作符</td>
                    </tr>
                    <tr>
                        <td>style</td>
                        <td><code>"form"</code></td>
                        <td><code>?</code> 前缀操作符</td>
                    </tr>
                    <tr>
                        <td>allowReserved</td>
                        <td><code>false</code></td>
                        <td><em>n/a</em></td>
                    </tr>
                    <tr>
                        <td>allowReserved</td>
                        <td><code>true</code></td>
                        <td><code>+</code> 前缀操作符</td>
                    </tr>
                    <tr>
                        <td>explode</td>
                        <td><code>false</code></td>
                        <td><em>n/a</em></td>
                    </tr>
                    <tr>
                        <td>explode</td>
                        <td><code>true</code></td>
                        <td><code>*</code> 修饰符后缀</td>
                    </tr>
                </tbody>
            </table>
            <p>多个 <code>style: "form"</code> 参数等价于使用 <code>?</code> 前缀操作符的单个 RFC6570 <a
                    href="https://tools.ietf.org/html/rfc6570#section-2.2">变量列表</a>：</p>
            <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">parameters:</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">foo</span>
  <span class="hljs-attr">in:</span> <span class="hljs-string">query</span>
  <span class="hljs-attr">schema:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
  <span class="hljs-attr">explode:</span> <span class="hljs-literal">true</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">bar</span>
  <span class="hljs-attr">in:</span> <span class="hljs-string">query</span>
  <span class="hljs-attr">schema:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
</code></pre>
            <p>此示例等价于 RFC6570 的 <code>{?foo*,bar}</code>，而 <strong>不等同</strong> 于
                <code>{?foo*}{&amp;bar}</code>。后者存在问题，因为如果 <code>foo</code> 未定义，结果将是无效 URI。Parameter Object 中没有等价的
                <code>&amp;</code> 前缀操作符。
            </p>
            <p>注意 RFC6570 并未为超出 <code>explode</code> 所处理的单层复合值指定行为。对对象或数组使用在没有明确行为的情况下，其结果由实现定义。</p>
        </section>
        <section id="delimiters-in-parameter-values">
            <div class="header-wrapper">
                <h3 id="c-2-delimiters-in-parameter-values"><bdi class="secno">C.2 </bdi>参数值中的分隔符</h3><a
                    class="self-link" href="#delimiters-in-parameter-values"
                    aria-label="Permalink for Appendix C.2"></a>
            </div>
            <p>RFC6570 展开使用的分隔符（例如用于将数组或对象值与 <code>style: "simple"</code> 一起连接的 <code>,</code>）在
                <code>allowReserved</code> 为 <code>false</code> 时会被自动百分号编码。注意由于 RFC6570 并未定义基于 URI
                模板解析变量的方法，用户必须先按分隔符拆分值，然后再对可能包含分隔符字符的值进行百分号解码。
            </p>
            <p>当 <code>allowReserved</code> 为 <code>true</code> 时，必须在正确的时机手动执行百分号编码（在连接值之前）和百分号解码（在按分隔符拆分之后）。</p>
            <p>关于在没有 RFC6570 等价物的 <code>style</code> 值中处理作为分隔符而需要百分号编码的字符的更多指导，请参见 <a
                    href="#appendix-e-percent-encoding-and-form-media-types">附录 E</a>。</p>
        </section>
        <section id="non-rfc6570-field-values-and-combinations">
            <div class="header-wrapper">
                <h3 id="c-3-non-rfc6570-field-values-and-combinations"><bdi class="secno">C.3 </bdi>非 RFC6570 字段值与组合
                </h3><a class="self-link" href="#non-rfc6570-field-values-and-combinations"
                    aria-label="Permalink for Appendix C.3"></a>
            </div>
            <p>对没有直接 [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc6570"
                        title="URI Template">RFC6570</a></cite>] 等价物的配置，应该（<em class="rfc2119">SHOULD</em>）依照 RFC6570
                处理。实现 <em class="rfc2119">MAY</em> 使用 RFC6570 的常规或保留扩展（基于 <code>allowReserved</code>）为单独名称和值创建正确分隔的 URI
                模板变量以绕过限制。</p>
            <p>这包括：</p>
            <ul>
                <li>没有任何等价物的样式：<code>pipeDelimited</code>、<code>spaceDelimited</code> 和 <code>deepObject</code></li>
                <li>将 <code>form</code> 样式与 <code>allowReserved: true</code> 组合使用，该组合不允许，因为一次只能使用一个前缀操作符</li>
                <li>任何不是合法 RFC6570 变量名的参数名</li>
            </ul>
            <p>Parameter Object 的 <code>name</code> 字段的语法比 RFC6570 的 <a
                    href="https://tools.ietf.org/html/rfc6570#section-2.3">变量名语法</a> 要宽松得多。包含 RFC6570 变量字符集之外字符的参数名 <em
                    class="rfc2119">MUST</em> 在用于 URI 模板之前进行百分号编码。</p>
        </section>
        <section id="examples-1">
            <div class="header-wrapper">
                <h3 id="c-4-examples"><bdi class="secno">C.4 </bdi>示例</h3><a class="self-link" href="#examples-1"
                    aria-label="Permalink for Appendix C.4"></a>
            </div>
            <p>假设我们想在表单查询字符串中使用以下数据，其中 <code>formulas</code> 被展开，而 <code>words</code> 则不被展开：</p>
            <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">formulas:</span>
  <span class="hljs-attr">a:</span> <span class="hljs-string">x+y</span>
  <span class="hljs-attr">b:</span> <span class="hljs-string">x/y</span>
  <span class="hljs-attr">c:</span> <span class="hljs-string">x^y</span>
<span class="hljs-attr">words:</span>
<span class="hljs-bullet">-</span> <span class="hljs-string">math</span>
<span class="hljs-bullet">-</span> <span class="hljs-string">is</span>
<span class="hljs-bullet">-</span> <span class="hljs-string">fun</span>
</code></pre>
            <section id="rfc6570-equivalent-expansion">
                <div class="header-wrapper">
                    <h4 id="c-4-1-rfc6570-equivalent-expansion"><bdi class="secno">C.4.1 </bdi>RFC6570 等价展开</h4><a
                        class="self-link" href="#rfc6570-equivalent-expansion"
                        aria-label="Permalink for Appendix C.4.1"></a>
                </div>
                <p>此数组的 Parameter Objects 使用常规的 <code>style: "form"</code> 展开，RFC6570 完全支持：</p>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">parameters:</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">formulas</span>
  <span class="hljs-attr">in:</span> <span class="hljs-string">query</span>
  <span class="hljs-attr">schema:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
    <span class="hljs-attr">additionalProperties:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
  <span class="hljs-attr">explode:</span> <span class="hljs-literal">true</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">words</span>
  <span class="hljs-attr">in:</span> <span class="hljs-string">query</span>
  <span class="hljs-attr">schema:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">array</span>
    <span class="hljs-attr">items:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
</code></pre>
                <p>这翻译为以下 URI 模板：</p>
                <pre class="nohighlight" tabindex="0"><code>{<span class="hljs-attr">?formulas*</span>,<span class="hljs-attr">words</span>}
</code></pre>
                <p>用之前给定的数据展开，我们得到：</p>
                <pre class="nohighlight" tabindex="0"><code>?<span class="hljs-attr">a</span>=<span class="hljs-literal">x%2By</span>&amp;<span class="hljs-attr">b</span>=<span class="hljs-literal">x%2Fy</span>&amp;<span class="hljs-attr">c</span>=<span class="hljs-literal">x%5Ey</span>&amp;<span class="hljs-attr">words</span>=<span class="hljs-literal">math,is,fun</span>
</code></pre>
            </section>
            <section id="expansion-with-non-rfc6570-supported-options">
                <div class="header-wrapper">
                    <h4 id="c-4-2-expansion-with-non-rfc6570-supported-options"><bdi class="secno">C.4.2 </bdi>使用非
                        RFC6570 支持选项的展开</h4><a class="self-link" href="#expansion-with-non-rfc6570-supported-options"
                        aria-label="Permalink for Appendix C.4.2"></a>
                </div>
                <p>但现在假设（出于某种原因），我们确实希望 <code>b</code> 公式中的 <code>/</code> 在查询字符串中保持原样，并且希望我们的单词像书写短语那样以空格分隔。为此，我们将对
                    <code>formulas</code> 添加 <code>allowReserved: true</code>，并将 <code>words</code> 的样式改为
                    <code>style: "spaceDelimited"</code>：
                </p>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">parameters:</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">formulas</span>
  <span class="hljs-attr">in:</span> <span class="hljs-string">query</span>
  <span class="hljs-attr">schema:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
    <span class="hljs-attr">additionalProperties:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
  <span class="hljs-attr">explode:</span> <span class="hljs-literal">true</span>
  <span class="hljs-attr">allowReserved:</span> <span class="hljs-literal">true</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">words</span>
  <span class="hljs-attr">in:</span> <span class="hljs-string">query</span>
  <span class="hljs-attr">style:</span> <span class="hljs-string">spaceDelimited</span>
  <span class="hljs-attr">explode:</span> <span class="hljs-literal">false</span>
  <span class="hljs-attr">schema:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">array</span>
    <span class="hljs-attr">items:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
</code></pre>
                <p>我们不能结合 RFC6570 的 <code>?</code> 和 <code>+</code> 前缀，而且 RFC6570 也无法将 <code>,</code>
                    分隔符替换为空格。因此我们需要重构数据以适配手工构造的 URI 模板，使其以正确的方式通过不同类型的展开。</p>
                <p>下面是一个这样的模板，使用约定 <code>words.0</code> 表示 words 的第一个条目，<code>words.1</code> 表示第二个，<code>words.2</code>
                    表示第三个：</p>
                <pre class="nohighlight" tabindex="0"><code>?a={<span class="hljs-attr">+a</span>}&amp;b={<span class="hljs-attr">+b</span>}&amp;c={<span class="hljs-attr">+c</span>}&amp;words={<span class="hljs-attr">words.0</span>} {<span class="hljs-attr">words.1</span>} {<span class="hljs-attr">words.2</span>}
</code></pre>
                <p>RFC6570 提到使用 <code>.</code> “表示子结构中的名称层级”，但并未定义具体的命名约定或行为。由于 <code>.</code>
                    的使用不是自动的，我们需要为该新模板构造合适的输入结构。</p>
                <p>我们还需要对 <code>formulas</code> 的值进行预处理，因为尽管 <code>/</code> 和大多数保留字符在 RFC3986 的查询字符串中是允许的，但
                    <code>[</code>、<code>]</code> 和 <code>#</code> 是不允许的，并且在
                    <code>application/x-www-form-urlencoded</code> 格式中 <code>&amp;</code>、<code>=</code> 和
                    <code>+</code> 都具有特殊行为（正是我们在查询字符串中使用的格式）。
                </p>
                <p>设置 <code>allowReserved: true</code> 并不会使 URI 中不允许的保留字符变为允许，它只是允许它们在展开时被
                    <em>原样传递</em>，例如因为其他规范对它们定义了特定含义。
                </p>
                <p>因此，用户仍需对那些未因特殊含义而被传递的保留字符进行百分号编码，因为保留展开无法判断哪些保留字符应保留，哪些仍应被百分号编码。不过，保留展开（与常规展开不同）会保留预先百分号编码的三元组不变。另请参见
                    <a href="#appendix-e-percent-encoding-and-form-media-types">附录 E</a>
                    获取关于百分号编码与表单媒体类型的更多指导，包括在参数名和值中处理 <code>spaceDelimited</code>、<code>pipeDelimited</code> 和
                    <code>deepObject</code> 分隔符字符的建议。
                </p>
                <p>下面是我们的数据结构，将名称和值安排为适合上述模板，其中 <code>formulas</code> 的值已对 <code>[]#&amp;=+</code> 进行了预百分号编码（尽管在本示例中仅出现了
                    <code>+</code>）：
                </p>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">a:</span> <span class="hljs-string">x%2By</span>
<span class="hljs-attr">b:</span> <span class="hljs-string">x/y</span>
<span class="hljs-attr">c:</span> <span class="hljs-string">x^y</span>
<span class="hljs-attr">words.0:</span> <span class="hljs-string">math</span>
<span class="hljs-attr">words.1:</span> <span class="hljs-string">is</span>
<span class="hljs-attr">words.2:</span> <span class="hljs-string">fun</span>
</code></pre>
                <p>用我们重新构造的数据展开手工组装的模板，得到以下查询字符串：</p>
                <pre class="nohighlight" tabindex="0"><code>?<span class="hljs-attr">a</span>=<span class="hljs-literal">x%2By</span>&amp;<span class="hljs-attr">b</span>=<span class="hljs-literal">x/y</span>&amp;<span class="hljs-attr">c</span>=<span class="hljs-literal">x%5Ey</span>&amp;<span class="hljs-attr">words</span>=<span class="hljs-literal">math%20is%20fun</span>
</code></pre>
                <p>其中 <code>/</code> 和预先百分号编码的 <code>%2B</code> 被保留，但值中不允许的字符 <code>^</code> 和模板中但不在扩展变量内的空格字符被百分号编码。
                </p>
            </section>
            <section id="undefined-values-and-manual-uri-template-construction">
                <div class="header-wrapper">
                    <h4 id="c-4-3-undefined-values-and-manual-uri-template-construction"><bdi class="secno">C.4.3
                        </bdi>未定义值与手动构造 URI 模板</h4><a class="self-link"
                        href="#undefined-values-and-manual-uri-template-construction"
                        aria-label="Permalink for Appendix C.4.3"></a>
                </div>
                <p>在手动构造模板时，必须小心正确处理 RFC6570 所视为 <em>未定义</em> 的值：</p>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">formulas:</span> {}
<span class="hljs-attr">words:</span>
<span class="hljs-bullet">-</span> <span class="hljs-string">hello</span>
<span class="hljs-bullet">-</span> <span class="hljs-string">world</span>
</code></pre>
                <p>将这些数据与我们最初的 RFC6570 友好 URI 模板 <code>{?formulas*,words}</code> 一起使用，会产生：</p>
                <pre class="nohighlight" tabindex="0"><code>?<span class="hljs-attr">words</span>=<span class="hljs-literal">hello,world</span>
</code></pre>
                <p>这意味着手工构造的 URI 模板和重构后的数据需要完全省略 <code>formulas</code> 对象，以便 <code>words</code> 参数成为查询字符串中的第一个且唯一的参数。
                </p>
                <p>重构后的数据：</p>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">words.0:</span> <span class="hljs-string">hello</span>
<span class="hljs-attr">words.1:</span> <span class="hljs-string">world</span>
</code></pre>
                <p>手工构造的 URI 模板：</p>
                <pre class="nohighlight" tabindex="0"><code>?words={<span class="hljs-attr">words.0</span>} {<span class="hljs-attr">words.1</span>}
</code></pre>
                <p>结果：</p>
                <pre class="nohighlight" tabindex="0"><code>?<span class="hljs-attr">words</span>=<span class="hljs-literal">hello%20world</span>
</code></pre>
            </section>
            <section id="illegal-variable-names-as-parameter-names">
                <div class="header-wrapper">
                    <h4 id="c-4-4-illegal-variable-names-as-parameter-names"><bdi class="secno">C.4.4 </bdi>非法变量名作为参数名
                    </h4><a class="self-link" href="#illegal-variable-names-as-parameter-names"
                        aria-label="Permalink for Appendix C.4.4"></a>
                </div>
                <p>在此示例中，心形表情符号在 URI 模板名称（或 URI）中并不合法：</p>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">parameters:</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">❤️</span>
  <span class="hljs-attr">in:</span> <span class="hljs-string">query</span>
  <span class="hljs-attr">schema:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
</code></pre>
                <p>我们不能直接将 <code>❤️: "love!"</code> 传递给 RFC6570 实现。相反，我们必须在数据和 URI 模板中预先对名称进行百分号编码（该心形为一个六字节的 UTF-8 序列）：
                </p>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-string">"%E2%9D%A4%EF%B8%8F"</span><span class="hljs-string">:</span> <span class="hljs-string">love!</span>
</code></pre>
                <pre class="nohighlight" tabindex="0"><code>{<span class="hljs-attr">?%E2%9D%A4%EF%B8%8F</span>}
</code></pre>
                <p>这将展开为：</p>
                <pre class="nohighlight" tabindex="0"><code>?<span class="hljs-attr">%E2%9D%A4%EF%B8%8F</span>=<span class="hljs-literal">love%21</span>
</code></pre>
            </section>
        </section>
    </section>
    <section class="appendix" id="appendix-d-serializing-headers-and-cookies">
        <div class="header-wrapper">
            <h2 id="d-appendix-d-serializing-headers-and-cookies"><bdi class="secno">D. </bdi>附录 D：序列化头与 Cookie</h2><a
                class="self-link" href="#appendix-d-serializing-headers-and-cookies"
                aria-label="Permalink for Appendix D."></a>
        </div>
        <p>HTTP 头在允许哪些字符以及如何对某些或全部不允许字符进行转义并包含方面规则不一致。虽然 [<cite><a class="bibref" data-link-type="biblio"
                    href="#bib-rfc9110" title="HTTP Semantics">RFC9110</a></cite>] 中给出的 <code>quoted-string</code> ABNF
            规则（见 <a href="https://tools.ietf.org/html/rfc9110#section-5.6.4">第 5.4.6
                节</a>）是最常见的转义方案，但它并不足以普遍适用。例如，强实体标签（strong <code>ETag</code>）看起来像
            <code>"foo"</code>（带引号，不论内容如何），而弱实体标签（weak <code>ETag</code>）看起来像
            <code>W/"foo"</code>（注意只有部分值被引用）；对于该头的引号内容，其转义方式也不同于 <code>quoted-string</code> 内容的转义。
        </p>
        <p>因此，通过 <a href="#parameter-object">Parameter</a> 或 <a href="#header-object">Header</a> 对头传递的任何数据，需要在传给 OAS
            实现之前先进行引号和转义，并且解析后的头值应包含引号和转义内容。</p>
        <section id="percent-encoding-and-cookies">
            <div class="header-wrapper">
                <h3 id="d-1-percent-encoding-and-cookies"><bdi class="secno">D.1 </bdi>百分号编码与 Cookie</h3>
                <a class="self-link" href="#percent-encoding-and-cookies" aria-label="Permalink for Appendix D.1"></a>
            </div>
            <p>RFC6570 的百分号编码行为并不总是适用于 <code>in: "cookie"</code> 参数。虽然与 [<cite><a class="bibref" data-link-type="biblio"
                        href="#bib-rfc6265" title="HTTP State Management Mechanism">RFC6265</a></cite>]（及其建议替代草案）推荐的
                base64 编码（<code>contentEncoding</code>: “base64”）相比，百分号编码似乎更常见，但 <a
                    href="https://www.ietf.org/archive/id/draft-ietf-httpbis-rfc6265bis-20.html#section-5.6">draft-ietf-httpbis-rfc6265bis-20
                    的第 5.6 节</a> 指出，在 <code>Set-Cookie</code> 响应头中看起来像已被百分号编码的 Cookie，当客户端存储时 <em class="rfc2119">MUST
                    NOT</em> 被解码，这意味着它们在从存储中检索用于 <code>Cookie</code> 请求头时已经是编码状态。<code>style: "cookie"</code>
                的行为假设了这种用法，并且 <em>不</em> 应用或移除百分号编码。</p>
            <p>如果希望自动进行百分号编码，可对原始值使用 <code>style: "form"</code>（针对原始值）或在非默认 <code>explode</code> 值 <code>false</code>
                时使用 <code>style: "form"</code>。然而请注意，对于非原始值，<code>style: "form"</code> 的默认 <code>explode: true</code>
                会使用错误的分隔符来设置多个 cookie 值（使用 <code>&amp;</code> 而不是应为 <code>;</code> 后跟一个空格）。使用 RFC6570 实现通过
                <code>style: "form"</code> 与 <code>in: "cookie"</code> 时，需要像生成
                <code>application/x-www-form-urlencoded</code> 消息体那样去除 <code>?</code> 前缀。若要充分使用
                <code>style: "form"</code> 与 <code>in: "cookie"</code>，可使用 <code>allowReserved</code> 字段。
            </p>
        </section>
    </section>
    <section class="appendix" id="appendix-e-percent-encoding-and-form-media-types">
        <div class="header-wrapper">
            <h2 id="e-appendix-e-percent-encoding-and-form-media-types"><bdi class="secno">E. </bdi>附录 E：
                百分号编码与表单媒体类型</h2><a class="self-link" href="#appendix-e-percent-encoding-and-form-media-types"
                aria-label="Permalink for Appendix E."></a>
        </div>
        <p><em><strong>注意：</strong> 在本节中，为了可读性，<code>application/x-www-form-urlencoded</code> 和
                <code>multipart/form-data</code> 媒体类型分别缩写为 <code>form-urlencoded</code> 和
                <code>form-data</code>。</em></p>
        <p>百分号编码用于 URI 以及其语法来源于 URI 的媒体类型。
            百分号编码的基本规则如下：</p>
        <ul>
            <li>必须被编码的字符集取决于你使用的是哪个规范版本，以及（对于 URI）该字符出现在 URI 的哪个部分。</li>
            <li>未编码的 <code>+</code> 字符如何解码取决于你使用的是 <code>application/x-www-form-urlencoded</code> 规则还是更通用的 URI
                规则；这是唯一可能因解码算法选择而改变结果的情况。</li>
            <li>对比必要情况对更多字符进行编码在解码过程中始终是安全的，但可能产生非规范化的 URI。</li>
            <li>在实践中，有些系统容忍甚至期望一些在某些或所有百分号编码规范中要求编码的未编码字符；这可能导致与更严格兼容实现之间的互操作性问题。</li>
        </ul>
        <p>本附录其余部分基于上述规则提供更详细的指导。</p>
        <section id="percent-encoding-character-classes">
            <div class="header-wrapper">
                <h3 id="e-1-percent-encoding-character-classes"><bdi class="secno">E.1 </bdi>百分号编码的字符类</h3><a
                    class="self-link" href="#percent-encoding-character-classes"
                    aria-label="Permalink for Appendix E.1"></a>
            </div>
            <p>本过程涉及三类字符，这些名称在不同规范中有所不同，但在本节中定义如下：</p>
            <ul>
                <li><em>unreserved</em>（未保留）字符不需要进行百分号编码；虽然对它们进行百分号编码是安全的，但这样会产生一个<a
                        href="https://tools.ietf.org/html/rfc3986#section-6.2.2.2">非规范化</a>的 URI。</li>
                <li><em>reserved</em>（保留）字符在 URI 语法中具有特殊行为（例如用于分隔组件），或为其他需要定义特殊行为的规范保留（例如 <code>form-urlencoded</code> 对
                    <code>=</code>、<code>&amp;</code> 和 <code>+</code> 定义了特殊行为）。
                </li>
                <li><em>unsafe</em>（不安全）字符在某些环境中解析 URI 时已知会产生问题。</li>
            </ul>
            <p>除非另有说明，本节采用 RFC3986 对 <a href="https://tools.ietf.org/html/rfc3986#section-2.2">reserved</a> 和 <a
                    href="https://tools.ietf.org/html/rfc3986#section-2.3">unreserved</a> 的定义，并将不属于这两类的所有字符定义为 unsafe
                集合。</p>
        </section>
        <section id="percent-encoding-and-form-urlencoded">
            <div class="header-wrapper">
                <h3 id="e-2-percent-encoding-and-form-urlencoded"><bdi class="secno">E.2 </bdi>百分号编码与
                    <code>form-urlencoded</code>
                </h3><a class="self-link" href="#percent-encoding-and-form-urlencoded"
                    aria-label="Permalink for Appendix E.2"></a>
            </div>
            <p>每个 URI 组件（例如查询字符串）将部分保留字符视为不安全，要么因为它们在组件之间作为分隔符（例如 <code>#</code>），要么因为（如 <code>[</code> 和
                <code>]</code>）历史上被视为全局不安全但后来为有限目的赋予了保留地位。
            </p>
            <p>在某个组件内没有定义特殊含义的保留字符可以保持未百分号编码。然而，其他规范可以为这些字符定义特殊含义，要求在那些特殊含义之外的情形对这些字符进行百分号编码。</p>
            <p><code>form-urlencoded</code> 媒体类型将 <code>=</code> 和 <code>&amp;</code> 定义为分隔符，并将 <code>+</code>
                定义为空格的替代表示（而不是其百分号编码形式 <code>%20</code>）。
                这意味着虽然这三者在 RFC3986 中作为保留但在查询字符串中被允许，但在 <code>form-urlencoded</code> 查询字符串中，它们必须被百分号编码，除非它们用于
                <code>form-urlencoded</code> 的特殊用途；关于在表单值中处理 <code>+</code> 的示例，见 <a
                    href="#appendix-c-using-rfc6570-based-serialization">附录 C</a>。
            </p>
        </section>
        <section id="percent-encoding-and-form-data">
            <div class="header-wrapper">
                <h3 id="e-3-percent-encoding-and-form-data"><bdi class="secno">E.3 </bdi>百分号编码与
                    <code>form-data</code>
                </h3><a class="self-link" href="#percent-encoding-and-form-data"
                    aria-label="Permalink for Appendix E.3"></a>
            </div>
            <p>[<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc7578"
                        title="Returning Values from Forms: multipart/form-data">RFC7578</a></cite>] <a
                    href="https://datatracker.ietf.org/doc/html/rfc7578#section-2">第 2 节</a> 建议使用基于 RFC3986
                的百分号编码作为一种机制，以将诸如文件名等按部分的基于文本的头数据保持在 ASCII 字符集内。
                该建议并非旧的（2015 年之前的）<code>form-data</code> 规范的一部分，因此必须小心以确保互操作性。
                希望以这种方式使用百分号编码的用户 <em class="rfc2119">MUST</em> 以百分号编码的形式提供数据，因为对于该媒体类型，无论使用哪个 Encoding Object
                字段，都不会自动应用百分号编码。</p>
            <p><code>form-data</code> 媒体类型允许其各部分包含任意文本或二进制数据，因此通常不需要百分号编码或类似的转义。</p>
        </section>
        <section id="generating-and-validating-uris-and-form-urlencoded-strings">
            <div class="header-wrapper">
                <h3 id="e-4-generating-and-validating-uris-and-form-urlencoded-strings"><bdi class="secno">E.4
                    </bdi>生成与验证 URI 及 <code>form-urlencoded</code> 字符串</h3><a class="self-link"
                    href="#generating-and-validating-uris-and-form-urlencoded-strings"
                    aria-label="Permalink for Appendix E.4"></a>
            </div>
            <p>URI 百分号编码与 <code>form-urlencoded</code> 媒体类型具有复杂的规范历史，跨越多个修订版，在某些情况下，不同标准机构之间还存在所有权主张冲突。
                不幸的是，这些规范各自定义了略有不同的百分号编码规则，如果 URI 或 <code>form-urlencoded</code> 消息体将受到严格验证，则需要考虑这些差异。
                （请注意，许多 URI 解析器默认不会执行验证，或者根本不执行验证。）</p>
            <p>本规范规范性地引用以下相关标准：</p>
            <table>
                <thead>
                    <tr>
                        <th>规范</th>
                        <th>日期</th>
                        <th>OAS 用途</th>
                        <th>百分号编码</th>
                        <th>说明</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>[<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc3986"
                                    title="Uniform Resource Identifier (URI): Generic Syntax">RFC3986</a></cite>]</td>
                        <td>01/2005</td>
                        <td>URI/URL 语法，包括非 <code>form-urlencoded</code> 的基于内容的序列化</td>
                        <td>[<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc3986"
                                    title="Uniform Resource Identifier (URI): Generic Syntax">RFC3986</a></cite>]</td>
                        <td>取代了 [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc1738"
                                    title="Uniform Resource Locators (URL)">RFC1738</a></cite>] 和 [<cite><a
                                    class="bibref" data-link-type="biblio" href="#bib-rfc2396"
                                    title="Uniform Resource Identifiers (URI): Generic Syntax">RFC2396</a></cite>]</td>
                    </tr>
                    <tr>
                        <td>[<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc6570"
                                    title="URI Template">RFC6570</a></cite>]</td>
                        <td>03/2012</td>
                        <td>基于 style 的序列化</td>
                        <td>[<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc3986"
                                    title="Uniform Resource Identifier (URI): Generic Syntax">RFC3986</a></cite>]</td>
                        <td>不使用 <code>+</code> 来表示查询字符串中的空格</td>
                    </tr>
                    <tr>
                        <td><a href="https://url.spec.whatwg.org/#application/x-www-form-urlencoded">WHATWG-URL 第 5
                                节</a></td>
                        <td>“活动”标准</td>
                        <td>基于内容的 <code>form/url-encoded</code> 序列化，包括 HTTP 消息内容</td>
                        <td><a href="https://url.spec.whatwg.org/#application-x-www-form-urlencoded-percent-encode-set">WHATWG-URL
                                第 1.3 节</a></td>
                        <td>取代了 [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc1866"
                                    title="Hypertext Markup Language - 2.0">RFC1866</a></cite>]、[<cite><a class="bibref"
                                    data-link-type="biblio" href="#bib-html401"
                                    title="HTML 4.01 Specification">HTML401</a></cite>]</td>
                    </tr>
                </tbody>
            </table>
            <p>当 <code>schema</code> 存在时，Parameter Object 中使用基于 style 的带百分号编码的序列化；当至少存在
                <code>style</code>、<code>explode</code> 或 <code>allowReserved</code> 之一时，Encoding Object 中也使用基于 style
                的序列化。
                有关 RFC6570 的两种不同百分号编码方法的更多细节以及包含 <code>+</code> 的示例，请参见 <a
                    href="#appendix-c-using-rfc6570-based-serialization">附录 C</a>。
            </p>
            <p>基于内容的序列化由 <a href="#media-type-object">Media Type Object</a> 定义，并在 <a href="#parameter-object">Parameter
                    Object</a> 和 <a href="#header-object">Header Object</a> 中当存在 <code>content</code> 字段时使用；当
                <code>style</code>、<code>explode</code> 和 <code>allowReserved</code> 字段缺失时，基于 <code>contentType</code>
                字段，Encoding Object 也会使用基于内容的序列化。
                用于 URI 时，每个部分根据媒体类型进行编码（例如 <code>text/plain</code> 或 <code>application/json</code>），随后必须为了在
                <code>form-urlencoded</code> 字符串（在表单样式查询字符串中）或在其他 URL 组件用于一般 URI 时进行百分号编码，除非该媒体类型已经包含了 URI 百分号编码。
            </p>
            <section id="interoperability-with-historical-specifications">
                <div class="header-wrapper">
                    <h4 id="e-4-1-interoperability-with-historical-specifications"><bdi class="secno">E.4.1
                        </bdi>与历史规范的互操作性</h4><a class="self-link"
                        href="#interoperability-with-historical-specifications"
                        aria-label="Permalink for Appendix E.4.1"></a>
                </div>
                <p>本规范的先前版本要求使用 [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc1866"
                            title="Hypertext Markup Language - 2.0">RFC1866</a></cite>] 及其对 [<cite><a class="bibref"
                            data-link-type="biblio" href="#bib-rfc1738"
                            title="Uniform Resource Locators (URL)">RFC1738</a></cite>] 的百分号编码规则，而不是使用 [<cite><a
                            class="bibref" data-link-type="biblio" href="#bib-whatwg-url"
                            title="URL Standard">WHATWG-URL</a></cite>]。
                    [<cite><a class="bibref" data-link-type="biblio" href="#bib-whatwg-url"
                            title="URL Standard">WHATWG-URL</a></cite>] 的 <code>form-urlencoded</code>
                    规则代表了当前浏览器社区在该媒体类型上的共识，并避免了 RFC1866 中对 RFC1738 不清晰释述所引入的歧义。</p>
                <p>需要与 RFC1866/RFC1738 保持一致性的用户应仔细检查其工具和库的行为。</p>
            </section>
            <section id="interoperability-with-web-browser-environments">
                <div class="header-wrapper">
                    <h4 id="e-4-2-interoperability-with-web-browser-environments"><bdi class="secno">E.4.2
                        </bdi>与 Web 浏览器环境的互操作性</h4><a class="self-link"
                        href="#interoperability-with-web-browser-environments"
                        aria-label="Permalink for Appendix E.4.2"></a>
                </div>
                <p>WHATWG 是一个面向 <a href="https://whatwg.org/faq#what-is-the-whatwg-working-on">Web 浏览器</a>
                    的标准组织，它为浏览器上下文中的 URL 解析和序列化定义了“URL 活动标准”，包括 <code>form-urlencoded</code> 数据的解析与序列化。
                    WHATWG 关于查询字符串的百分号编码规则会根据查询字符串是否被视为 <a
                        href="https://url.spec.whatwg.org/#application-x-www-form-urlencoded-percent-encode-set">作为
                        <code>form-urlencoded</code></a>（在该情形下它要求比 [<cite><a class="bibref" data-link-type="biblio"
                            href="#bib-rfc1738" title="Uniform Resource Locators (URL)">RFC1738</a></cite>]
                    更多的百分号编码）或作为通用语法的一部分（其要求与 [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc3986"
                            title="Uniform Resource Identifier (URI): Generic Syntax">RFC3986</a></cite>] 不同）而有所不同。</p>
                <p>本规范仅在 <code>form-urlencoded</code> 规范方面依赖 WHATWG。那些以其他方式使用查询字符串的实现应意识到，WHATWG 关于非
                    <code>form-urlencoded</code> 查询字符串规则与 RFC3986 之间的区别需要谨慎考虑，结合 WHATWG 的百分号编码集合及其对 URL 的有效 Unicode
                    代码点集合；详见 <a href="#percent-encoding-and-illegal-or-reserved-delimiters">关于百分号编码和非法或保留分隔符</a>。
                </p>
            </section>
        </section>
        <section id="decoding-uris-and-form-urlencoded-strings">
            <div class="header-wrapper">
                <h3 id="e-5-decoding-uris-and-form-urlencoded-strings"><bdi class="secno">E.5 </bdi>解码 URI 与
                    <code>form-urlencoded</code> 字符串
                </h3><a class="self-link" href="#decoding-uris-and-form-urlencoded-strings"
                    aria-label="Permalink for Appendix E.5"></a>
            </div>
            <p>百分号解码算法并不关心哪些字符曾被或未被百分号编码，这意味着按照任一规范进行百分号编码的 URI 都能被正确解码。</p>
            <p>同样地，所有 <code>form-urlencoded</code> 解码算法只是对百分号解码算法添加了 <code>+</code>-表示空格的处理，因此无论采用哪种编码规范，解码都能工作。</p>
            <p>然而，需要注意：如果 <code>+</code> 表示空格，则必须使用 <code>form-urlencoded</code> 解码；如果 <code>+</code>
                本身表示字面值，则应使用常规的百分号解码。</p>
        </section>
        <section id="percent-encoding-and-illegal-or-reserved-delimiters">
            <div class="header-wrapper">
                <h3 id="e-6-percent-encoding-and-illegal-or-reserved-delimiters"><bdi class="secno">E.6
                    </bdi>百分号编码与非法或保留分隔符</h3><a class="self-link"
                    href="#percent-encoding-and-illegal-or-reserved-delimiters"
                    aria-label="Permalink for Appendix E.6"></a>
            </div>
            <p>用于 <code>deepObject</code>、<code>pipeDelimited</code> 和 <code>spaceDelimited</code> 样式的分隔符字符
                <code>[</code>、<code>]</code>、<code>|</code> 和空格，均 <em class="rfc2119">MUST</em> 被百分号编码以符合 [<cite><a
                        class="bibref" data-link-type="biblio" href="#bib-rfc3986"
                        title="Uniform Resource Identifier (URI): Generic Syntax">RFC3986</a></cite>] 的要求。
                这要求用户在参数名称和值中以某种方式预先对这些字符进行编码，以便在使用这些样式时将它们与分隔符用途区分开来。
            </p>
            <p>空格字符在所有相关标准的所有实现中始终是非法的，并且以某种方式被编码。
                虽然可以使用 <code>form-urlencoded</code> 约定的 <code>+</code> 来将参数名称和值中的空格与作为分隔符的
                <code>spaceDelimited</code>（其编码为
                <code>%20</code>）区分开，但规范将解码定义为单次处理，使得在解码后的结果中无法区分不同用法，除非使用先基于一种分隔符分割再解码另一种分隔符的非标准解析算法。任何此类非标准解析方法都不会在所有工具间互操作。
            </p>
            <p>某些环境在查询字符串中使用未编码的 <code>[</code>、<code>]</code>，甚至可能使用 <code>|</code>，且似乎没有出现问题。WHATWG 的通用查询字符串规则在非
                <code>form-urlencoded</code> 的查询字符串中不要求对它们进行百分号编码，尽管它也将它们排除在 URL 的有效 Unicode 代码点集合之外。
                依赖在名称和值中对这些分隔符保持未编码但在其它位置使用常规百分号编码的代码，不能保证在所有实现间互操作。
            </p>
            <p>为获得最大互操作性，<em class="rfc2119">RECOMMENDED</em> 的做法是：在对这些样式的分隔符进行百分号编码的同时，定义并记录一个额外的转义约定，或完全避免使用这些样式。
                额外编码/转义的具体方法由 API 设计者决定，预期在本规范描述的序列化和编码步骤之前执行该预处理，并在对这些步骤反向处理时再将其还原。
                这样可以将其保持在本规范所管理流程之外。</p>
        </section>
    </section>
    <section class="appendix" id="appendix-f-examples-of-base-uri-determination-and-reference-resolution">
        <div class="header-wrapper">
            <h2 id="f-appendix-f-examples-of-base-uri-determination-and-reference-resolution"><bdi class="secno">F.
                </bdi>附录 F：基本 URI 确定与引用解析示例</h2><a class="self-link"
                href="#appendix-f-examples-of-base-uri-determination-and-reference-resolution"
                aria-label="Permalink for Appendix F."></a>
        </div>
        <p>本节展示四种可能的基本 URI 来源中的每一种，随后举例说明带相对 <code>$self</code> 和 <code>$id</code> 的情况。</p>
        <section id="base-uri-within-content">
            <div class="header-wrapper">
                <h3 id="f-1-base-uri-within-content"><bdi class="secno">F.1 </bdi>内容内的基本 URI</h3><a class="self-link"
                    href="#base-uri-within-content" aria-label="Permalink for Appendix F.1"></a>
            </div>
            <p>资源内容内的基本 URI（参见 [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc3986"
                        title="Uniform Resource Identifier (URI): Generic Syntax">RFC3986</a></cite>] <a
                    href="https://datatracker.ietf.org/doc/html/rfc3986#section-5.1.1">第 5.1.1 节</a>）是基本 URI 的最高优先级来源。
                对于 OpenAPI 文档，此来源是 OpenAPI Object 的 <code>$self</code> 字段；对于包含 <code>$id</code> 的 Schema Object，或为包含
                <code>$id</code> 的 Schema Object 的子模式，该来源是其 <code>$id</code> 字段：
            </p>
            <p>假定下列文档的检索 URI 为 <code>file://home/someone/src/api/openapi.yaml</code>：</p>
            <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">openapi:</span> <span class="hljs-number">3.2</span><span class="hljs-number">.0</span>
<span class="hljs-string">$self:</span> <span class="hljs-string">https://example.com/api/openapi</span>
<span class="hljs-attr">info:</span>
  <span class="hljs-attr">title:</span> <span class="hljs-string">Example</span> <span class="hljs-string">API</span>
  <span class="hljs-attr">version:</span> <span class="hljs-number">1.0</span>
<span class="hljs-attr">paths:</span>
  <span class="hljs-string">/foo:</span>
    <span class="hljs-attr">get:</span>
      <span class="hljs-attr">requestBody:</span>
        <span class="hljs-string">$ref:</span> <span class="hljs-string">"shared/foo#/components/requestBodies/Foo"</span>
</code></pre>
            <p>假定下列文档的检索 URI 为 <code>https://git.example.com/shared/blob/main/shared/foo.yaml</code>：</p>
            <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">openapi:</span> <span class="hljs-number">3.2</span><span class="hljs-number">.0</span>
<span class="hljs-string">$self:</span> <span class="hljs-string">https://example.com/api/shared/foo</span>
<span class="hljs-attr">info:</span>
  <span class="hljs-attr">title:</span> <span class="hljs-string">Shared</span> <span class="hljs-string">components</span> <span class="hljs-string">for</span> <span class="hljs-string">all</span> <span class="hljs-string">APIs</span>
  <span class="hljs-attr">version:</span> <span class="hljs-number">1.0</span>
<span class="hljs-attr">components:</span>
  <span class="hljs-attr">requestBodies:</span>
    <span class="hljs-attr">Foo:</span>
      <span class="hljs-attr">content:</span>
        <span class="hljs-attr">application/json:</span>
          <span class="hljs-attr">schema:</span>
            <span class="hljs-string">$ref:</span> <span class="hljs-string">../schemas/foo</span>
  <span class="hljs-attr">schemas:</span>
    <span class="hljs-attr">Foo:</span>
      <span class="hljs-string">$id:</span> <span class="hljs-string">https://example.com/api/schemas/foo</span>
      <span class="hljs-attr">properties:</span>
        <span class="hljs-attr">bar:</span>
          <span class="hljs-string">$ref:</span> <span class="hljs-string">bar</span>
    <span class="hljs-attr">Bar:</span>
      <span class="hljs-string">$id:</span> <span class="hljs-string">https://example.com/api/schemas/bar</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
</code></pre>
            <p>在此示例中，检索 URI 无关紧要，因为两个文档都定义了 <code>$self</code>。</p>
            <p>第一个文档中的相对 <code>$ref</code> 会基于 <code>$self</code> 解析为
                <code>https://example.com/api/shared/foo#/components/requestBodies/Foo</code>。
                该 URI 中 <code>#</code> 之前的部分匹配第二个文档的 <code>$self</code>，因此引用目标解析为该第二个文档中的
                <code>#/components/requestBodies/Foo</code>。
            </p>
            <p>在该文档中，请求体对象内的 <code>$ref</code> 使用该文档的 <code>$self</code> 作为基本 URI 来解析，生成
                <code>https://example.com/api/schemas/foo</code>。
                该 URI 与 <code>#/components/schemas/Foo/$id</code> 处的 <code>$id</code> 匹配，因此指向该 Schema Object。
                该 Schema Object 有一个子模式，其 <code>$ref: bar</code> 将相对于该 <code>$id</code> 解析为
                <code>https://example.com/api/schemas/bar</code>，这又匹配 <code>#/components/schemas/Bar/$id</code> 处的
                <code>$id</code>。
            </p>
            <p>为保证互操作性，包含 <code>$id</code> 的 Schema Objects，或位于包含 <code>$id</code> 的 schema 之下的对象，<em
                    class="rfc2119">MUST</em> 由离它最近的此类 <code>$id</code> 来引用其非片段部分。
                如 JSON Schema 规范所述，使用非最近的 <code>$id</code> 作为基 URI 并将该 <code>$id</code> 与 JSON 指针片段交叉<a
                    href="https://www.ietf.org/archive/id/draft-bhutton-json-schema-01.html#name-json-pointer-fragments-and-">并不可互操作</a>。
            </p>
            <p>另请注意，位于 <code>#/components/schemas/Foo/properties/bar/$ref</code> 的引用不可能仅使用 JSON 指针片段引用
                <code>#/components/schemas/Bar</code>，因为 JSON 指针会相对于 <code>https://example.com/api/schemas/foo</code>
                解析，而不是相对于 OpenAPI 文档的来自 <code>$self</code> 的基本 URI。
            </p>
        </section>
        <section id="base-uri-from-encapsulating-entity">
            <div class="header-wrapper">
                <h3 id="f-2-base-uri-from-encapsulating-entity"><bdi class="secno">F.2 </bdi>来自封装实体的基本 URI</h3><a
                    class="self-link" href="#base-uri-from-encapsulating-entity"
                    aria-label="Permalink for Appendix F.2"></a>
            </div>
            <p>如果在内容内无法确定基本 URI，则下一个要搜索的位置是任何封装实体（参见 [<cite><a class="bibref" data-link-type="biblio"
                        href="#bib-rfc3986"
                        title="Uniform Resource Identifier (URI): Generic Syntax">RFC3986</a></cite>] <a
                    href="https://datatracker.ietf.org/doc/html/rfc3986#section-5.1.2">第 5.1.2 节</a>）。</p>
            <p>这在封装在 OpenAPI 文档内的 Schema Objects 中很常见。
                一个 OpenAPI Object 本身被封装在另一个实体中的示例是 <code>multipart/related</code> 存档（参见 [<cite><a class="bibref"
                        data-link-type="biblio" href="#bib-rfc2557"
                        title="MIME Encapsulation of Aggregate Documents, such as HTML (MHTML)">RFC2557</a></cite>]），例如以下
                <code>multipart/related; boundary="boundary-example"; type="application/openapi+yaml"</code> 文档。
                注意这仅是一个示例，并不是本规范要求必须支持此类 multipart 文档或任何其他可封装 OpenAPI Object 的格式。
            </p>
            <p>RFC2557 是为了允许将一组包含超链接的文档作为电子邮件附件发送而编写的，在这种情况下 multipart 附件不会有检索 URI（尽管该格式也可用于 HTTP）。</p>
            <pre class="nohighlight" tabindex="0"><code><span class="hljs-meta">--boundary-example</span>
<span class="hljs-literal">Content-Type:<span class="hljs-attr"> application/openapi+yaml</span></span>
<span class="hljs-literal">Content-Location:<span class="hljs-attr"> https://example.com/api/openapi.yaml</span></span>

openapi: 3.2.0
info:
  title: Example API
  version: 1.0
  externalDocs:
    url: docs.html
components:
  requestBodies:
    Foo:
      content:
        application/json:
          schema:
            $ref: "#/components/api/schemas/Foo"
  schemas:
    Foo:
      properties:
        bar:
          $ref: schemas/bar
<span class="hljs-meta">--boundary-example</span>
<span class="hljs-literal">Content-Type:<span class="hljs-attr"> application/schema+json</span></span>
<span class="hljs-literal">Content-Location:<span class="hljs-attr"> https://example.com/api/schemas/bar</span></span>

{
  "type": "string"
}
<span class="hljs-meta">--boundary-example</span>
<span class="hljs-literal">Content-Type:<span class="hljs-attr"> text/html</span></span>
<span class="hljs-literal">Content-Location:<span class="hljs-attr"> https://example.com/api/docs.html</span></span>

&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;API Documentation&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;p&gt;Awesome documentation goes here&lt;/p&gt;
  &lt;/body&gt;
&lt;/html&gt;
<span class="hljs-meta">--boundary-example</span>
</code></pre>
            <p>在此示例中，每个部分的 URI（也作为其基本 URI）来自该部分的 <code>Content-Location</code> 头，如 RFC2557 所规定。
                由于 <code>#/components/schemas/Foo</code> 处的 Schema Object 未包含 <code>$id</code>，其子模式中的引用使用 OpenAPI 文档的基本
                URI，该基本 URI 取自其在 <code>multipart/related</code> 格式中部分的 <code>Content-Location</code> 头。
                生成的对 <code>https://example.com/schemas/bar</code> 的引用匹配第二个部分的 <code>Content-Location</code> 头，根据 RFC2557
                允许在 multipart 存档中定位引用目标。</p>
            <p>类似地，External Documentation Object 的 <code>url</code> 字段相对于来自 <code>Content-Location</code> 的基本 URI
                解析，生成与第三个部分的 <code>Content-Location</code> 匹配的 <code>https://example.com/api/docs.html</code>。</p>
        </section>
        <section id="base-uri-from-the-retrieval-uri">
            <div class="header-wrapper">
                <h3 id="f-3-base-uri-from-the-retrieval-uri"><bdi class="secno">F.3 </bdi>来自检索 URI 的基本 URI</h3><a
                    class="self-link" href="#base-uri-from-the-retrieval-uri"
                    aria-label="Permalink for Appendix F.3"></a>
            </div>
            <p>如果前两种来源都未提供基本 URI，则下一个来源是检索 URI（参见 [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc3986"
                        title="Uniform Resource Identifier (URI): Generic Syntax">RFC3986</a></cite>] <a
                    href="https://datatracker.ietf.org/doc/html/rfc3986#section-5.1.3">第 5.1.3 节</a>）。</p>
            <p>假定该文档从 <code>https://example.com/api/openapis.yaml</code> 检索到：</p>
            <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">openapi:</span> <span class="hljs-number">3.2</span><span class="hljs-number">.0</span>
<span class="hljs-attr">info:</span>
  <span class="hljs-attr">title:</span> <span class="hljs-string">Example</span> <span class="hljs-string">API</span>
  <span class="hljs-attr">version:</span> <span class="hljs-number">1.0</span>
<span class="hljs-attr">components:</span>
  <span class="hljs-attr">requestBodies:</span>
    <span class="hljs-attr">Foo:</span>
      <span class="hljs-attr">content:</span>
        <span class="hljs-attr">application/json:</span>
          <span class="hljs-attr">schema:</span>
            <span class="hljs-string">$ref:</span> <span class="hljs-string">schemas/foo</span>
</code></pre>
            <p>假定此 JSON Schema 文档从 <code>https://example.com/api/schemas/foo</code> 检索到：</p>
            <pre class="nohighlight" tabindex="0"><code><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"object"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"properties"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"bar"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
            <p>将 <code>$ref: schemas/foo</code> 相对于 OpenAPI 文档的检索 URI 解析，会生成
                <code>https://example.com/api/schemas/foo</code>，即 JSON Schema 文档的检索 URI。
            </p>
        </section>
        <section id="application-specific-default-base-uri">
            <div class="header-wrapper">
                <h3 id="f-4-application-specific-default-base-uri"><bdi class="secno">F.4 </bdi>应用特定的默认基本 URI</h3><a
                    class="self-link" href="#application-specific-default-base-uri"
                    aria-label="Permalink for Appendix F.4"></a>
            </div>
            <p>当在内存中构建的 OpenAPI 文档既没有 <code>$self</code>、也没有封装实体或检索 URI 时，应用可以通过假定一个默认基本 URI 来解析内部（仅片段）引用（参见 [<cite><a
                        class="bibref" data-link-type="biblio" href="#bib-rfc3986"
                        title="Uniform Resource Identifier (URI): Generic Syntax">RFC3986</a></cite>] <a
                    href="https://datatracker.ietf.org/doc/html/rfc3986#section-5.1.4">第 5.1.4 节</a>）。
                虽然此类内部解析在实践中可以在不选择基本 URI 的情况下执行，但选择一个（例如带随机生成 UUID 的 URN，如
                <code>urn:uuid:f26cdaad-3193-4398-a838-4ecb7326c4c5</code>）可以避免将其作为特殊情况来实现。
            </p>
        </section>
        <section id="resolving-relative-self-and-id">
            <div class="header-wrapper">
                <h3 id="f-5-resolving-relative-self-and-id"><bdi class="secno">F.5 </bdi>解析相对的 <code>$self</code> 与
                    <code>$id</code>
                </h3><a class="self-link" href="#resolving-relative-self-and-id"
                    aria-label="Permalink for Appendix F.5"></a>
            </div>
            <p>让我们重新考虑本附录的第一个示例，但将 <code>$self</code> 和 <code>$id</code> 使用相对 URI 引用，并设置支持该相对用法的检索 URI：</p>
            <p>假定下列内容从 <code>https://staging.example.com/api/openapi</code> 检索到：</p>
            <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">openapi:</span> <span class="hljs-number">3.2</span><span class="hljs-number">.0</span>
<span class="hljs-string">$self:</span> <span class="hljs-string">/api/openapi</span>
<span class="hljs-attr">info:</span>
  <span class="hljs-attr">title:</span> <span class="hljs-string">Example</span> <span class="hljs-string">API</span>
  <span class="hljs-attr">version:</span> <span class="hljs-number">1.0</span>
<span class="hljs-attr">paths:</span>
  <span class="hljs-string">/foo:</span>
    <span class="hljs-attr">get:</span>
      <span class="hljs-attr">requestBody:</span>
        <span class="hljs-string">$ref:</span> <span class="hljs-string">"shared/foo#/components/requestBodies/Foo"</span>
</code></pre>
            <p>假定下列文档的检索 URI 为 <code>https://staging.example.com/api/shared/foo</code>：</p>
            <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">openapi:</span> <span class="hljs-number">3.2</span><span class="hljs-number">.0</span>
<span class="hljs-string">$self:</span> <span class="hljs-string">/api/shared/foo</span>
<span class="hljs-attr">info:</span>
  <span class="hljs-attr">title:</span> <span class="hljs-string">Shared</span> <span class="hljs-string">components</span> <span class="hljs-string">for</span> <span class="hljs-string">all</span> <span class="hljs-string">APIs</span>
  <span class="hljs-attr">version:</span> <span class="hljs-number">1.0</span>
<span class="hljs-attr">components:</span>
  <span class="hljs-attr">requestBodies:</span>
    <span class="hljs-attr">Foo:</span>
      <span class="hljs-attr">content:</span>
        <span class="hljs-attr">application/json:</span>
          <span class="hljs-attr">schema:</span>
            <span class="hljs-string">$ref:</span> <span class="hljs-string">../schemas/foo</span>
  <span class="hljs-attr">schemas:</span>
    <span class="hljs-attr">Foo:</span>
      <span class="hljs-string">$id:</span> <span class="hljs-string">/api/schemas/foo</span>
      <span class="hljs-attr">properties:</span>
        <span class="hljs-attr">bar:</span>
          <span class="hljs-string">$ref:</span> <span class="hljs-string">bar</span>
    <span class="hljs-attr">Bar:</span>
      <span class="hljs-string">$id:</span> <span class="hljs-string">/api/schemas/bar</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">string</span>
</code></pre>
            <p>在此示例中，所有 <code>$self</code> 与 <code>$id</code> 值都是由绝对路径组成的相对 URI 引用。
                这允许检索 URI 设置主机（和方案），在本例中为 <code>https://staging.example.com</code>，从而第一个文档的 <code>$self</code> 为
                <code>https://staging.example.com/openapi</code>，第二个文档的 <code>$self</code> 为
                <code>https://staging.example.com/api/shared/foo</code>，相应的 <code>$id</code> 值为
                <code>https://staging.example.com/api/schemas/foo</code> 和
                <code>https://staging.example.com/api/schemas/bar</code>。
                此类相对的 <code>$self</code> 和 <code>$id</code> 值使得同一组文档在部署到其他主机时也能工作，例如生产环境的
                <code>https://example.com</code> 或本地开发的 <code>https://localhost:8080</code>。
            </p>
        </section>
    </section>
    <section class="appendix" id="appendix-g-parsing-and-resolution-guidance">
        <div class="header-wrapper">
            <h2 id="g-appendix-g-parsing-and-resolution-guidance"><bdi class="secno">G. </bdi>附录 G：解析与解析指导</h2><a
                class="self-link" href="#appendix-g-parsing-and-resolution-guidance"
                aria-label="Permalink for Appendix G."></a>
        </div>
        <p>实现 <em class="rfc2119">MAY</em> 支持以下任一方式的完整文档解析：</p>
        <ul>
            <li>通过媒体类型检测 OpenAPI 或 JSON Schema 文档</li>
            <li>通过根字段 <code>openapi</code> 检测 OpenAPI 文档</li>
            <li>通过检测关键字或按 JSON Schema 规范成功解析文档来检测 JSON Schema 文档</li>
        </ul>
        <p>还可以使用额外机制来支持根节点为 OpenAPI Object 或 Schema Object 之外的对象的文档，但请注意其结果行为由实现定义：</p>
        <ul>
            <li>基于引用的预期类型检测根处包含可引用对象的文档</li>
            <li>允许用户配置因引用到非根对象而可能被加载的文档类型</li>
        </ul>
        <section id="warnings-regarding-fragmentary-parsing">
            <div class="header-wrapper">
                <h3 id="g-1-warnings-regarding-fragmentary-parsing"><bdi class="secno">G.1 </bdi>关于片段解析的警告</h3><a
                    class="self-link" href="#warnings-regarding-fragmentary-parsing"
                    aria-label="Permalink for Appendix G.1"></a>
            </div>
            <p>在不考虑包含文档其余内容的情况下解析被引用的 OpenAPI 片段的实现，会错过可能改变引用目标含义和行为的关键字。
                特别地，未考虑那些改变基本 URI 的关键字会引入安全风险，因为这会导致引用解析到非预期的 URI，产生不可预测的结果。
                虽然一些实现因过去规范的要求而支持这种解析方式，但在 3.1 及以后的版本中，孤立片段解析的结果是 <em>未定义</em> 的，并且很可能与本规范的要求相冲突。</p>
            <p>虽然可以构造某些 OpenAPI 描述以确保在将引用作为孤立片段解析时仍能正确工作，但依赖此行为 <em class="rfc2119">NOT RECOMMENDED</em>。
                本规范未明确列出在何种条件下此类行为是安全的，并且不保证在任何未来版本的 OAS 中继续保持安全。</p>
        </section>
        <section id="conflicts-between-field-types-and-reference-contexts">
            <div class="header-wrapper">
                <h3 id="g-2-conflicts-between-field-types-and-reference-contexts"><bdi class="secno">G.2
                    </bdi>字段类型与引用上下文之间的冲突</h3><a class="self-link"
                    href="#conflicts-between-field-types-and-reference-contexts"
                    aria-label="Permalink for Appendix G.2"></a>
            </div>
            <p>OAD 中的 JSON 或 YAML 对象根据其上下文被解释为特定的对象类型（例如 <a href="#operation-object">Operation Objects</a>、<a
                    href="#response-object">Response Objects</a>、<a href="#reference-object">Reference Objects</a>
                等）。取决于引用的安排，给定的 JSON 或 YAML 对象可能在多种不同上下文中被解释：</p>
            <ul>
                <li>作为入口文档（entry document）的根对象，该根对象始终被解释为 OpenAPI Object</li>
                <li>作为文档中父对象字段所暗示的对象类型</li>
                <li>作为引用目标，其对象类型与引用源的上下文相匹配</li>
            </ul>
            <p>如果相同的 JSON/YAML 对象被多次解析且各自上下文要求其被解析为不同的对象类型，则其结果行为为 <em>实现定义</em>，并且如果检测到可被视为错误（<em
                    class="rfc2119">MAY</em>）。例如，在期望 Path Item Object 的位置下引用位于 <code>#/components/schemas</code> 的空
                Schema Object，因为空对象对两种类型都是有效的。为获得最大互操作性，<em class="rfc2119">RECOMMENDED</em> OpenAPI 描述作者避免此类情形。</p>
        </section>
        <section id="guidance-regarding-implicit-connections">
            <div class="header-wrapper">
                <h3 id="g-3-guidance-regarding-implicit-connections"><bdi class="secno">G.3 </bdi>关于隐式连接的指导</h3><a
                    class="self-link" href="#guidance-regarding-implicit-connections"
                    aria-label="Permalink for Appendix G.3"></a>
            </div>
            <p>下列对象和字段涉及隐式连接的使用：</p>
            <table>
                <thead>
                    <tr>
                        <th>来源</th>
                        <th>目标</th>
                        <th>替代</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><a href="#security-requirement-object">Security Requirement Object</a> <code>{name}</code>
                        </td>
                        <td><a href="#security-scheme-object">Security Scheme Object</a> 名称，位于 <a
                                href="#components-object">Components Object</a> 下</td>
                        <td><em>n/a</em></td>
                    </tr>
                    <tr>
                        <td><a href="#discriminator-object">Discriminator Object</a> <code>mapping</code>
                            <em>(隐式或显式名称语法)</em>
                        </td>
                        <td><a href="#schema-object">Schema Object</a> 名称，位于 Components Object 下</td>
                        <td><code>mapping</code> <em>(显式 URI 语法)</em></td>
                    </tr>
                    <tr>
                        <td><a href="#operation-object">Operation Object</a> <code>tags</code></td>
                        <td><a href="#tag-object">Tag Object</a> <code>name</code>（在 <a href="#openapi-object">OpenAPI
                                Object</a> 的 <code>tags</code> 数组中）</td>
                        <td><em>n/a</em></td>
                    </tr>
                    <tr>
                        <td><a href="#link-object">Link Object</a> <code>operationId</code></td>
                        <td><a href="#operation-object">Operation Object</a> <code>operationId</code></td>
                        <td><code>operationRef</code></td>
                    </tr>
                </tbody>
            </table>
            <p>另一个隐式连接涉及将 <a href="#paths-object">Paths Object</a> 的模板化 URL 路径附加到相应 <a href="#server-object">Server
                    Object</a> 的 <code>url</code> 字段。
                该连接无歧义，因为只有入口文档的 Paths Object 会为所描述的 API 提供 URL。</p>
            <p>Security Requirement Object 与 Discriminator Object 中的隐式连接依赖于 <em>组件名称</em>，即 Components Object
                中相应类型子对象所持有组件属性的名称。例如，位于 <code>#/components/schemas/Foo</code> 的 Schema Object 的组件名称为 <code>Foo</code>。
                Operation Object 中 <code>tags</code> 的隐式连接使用 Tag Objects 的 <code>name</code> 字段，该字段（如 Components
                Object）位于根 OpenAPI Object 下。这意味着解析组件名称和标签名称都依赖于从正确的 OpenAPI Object 开始。</p>
            <p>对于从被引用（非入口）文档解析组件和标签名称连接，工具 <em class="rfc2119">RECOMMENDED</em> 从入口文档解析，而不是从当前文档解析。
                按 <a href="#resolving-implicit-connections">解析隐式连接</a> 中建议的方式从入口文档解析组件和标签名称连接，允许在服务器对象顶层数组旁定义组件和 Tag
                Objects，并将其视为被引用文档访问的接口。</p>
            <p>对于 Security Requirement Objects 和 Discriminator Objects，也可以通过使用这些对象提供的 URI 引用形式，将解析限制在被引用文档内。</p>
            <p>Operation Object 的 <code>tags</code> 字段没有基于 URI 的替代方案。建议 OAD 作者使用外部方案（例如 OpenAPI Initiative 的 Overlay
                规范）来模拟在多个文档间共享 <a href="#tag-object">Tag Objects</a>。</p>
            <section id="implicit-connection-resolution-examples">
                <div class="header-wrapper">
                    <h4 id="g-3-1-implicit-connection-resolution-examples"><bdi class="secno">G.3.1 </bdi>隐式连接解析示例</h4>
                    <a class="self-link" href="#implicit-connection-resolution-examples"
                        aria-label="Permalink for Appendix G.3.1"></a>
                </div>
                <p>本节展示如何检索一个可通过 HTTP 访问的多文档 OpenAPI 描述（OAD），并解析被引用（非入口）文档中的 <a
                        href="#security-requirement-object">Security Requirement Object</a>。
                    Discriminator Object 的非 URI 映射和 Operation Object 的 <code>tags</code> 字段的行为遵循相同原则。</p>
                <p>首先，入口文档是解析开始的地方。它将 <code>MySecurity</code> 安全方案定义为基于 JWT，并将一个 Path Item 定义为对另一个文档中组件的引用：</p>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-keyword">GET</span> <span class="hljs-string">/api/description/openapi</span> <span class="hljs-meta">HTTP/1.1</span>
<span class="hljs-attribute">Host</span><span class="hljs-punctuation">: </span>www.example.com
<span class="hljs-attribute">Accept</span><span class="hljs-punctuation">: </span>application/openapi+json
</code></pre>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">"components"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"securitySchemes"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"MySecurity"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"http"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"scheme"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"bearer"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"bearerFormat"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"JWT"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
<span class="hljs-attr">"paths"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"/foo"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"$ref"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"other#/components/pathItems/Foo"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-keyword">GET</span> <span class="hljs-string">/api/description/openapi</span> <span class="hljs-meta">HTTP/1.1</span>
<span class="hljs-attribute">Host</span><span class="hljs-punctuation">: </span>www.example.com
<span class="hljs-attribute">Accept</span><span class="hljs-punctuation">: </span>application/openapi+yaml
</code></pre>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">components:</span>
  <span class="hljs-attr">securitySchemes:</span>
    <span class="hljs-attr">MySecurity:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">http</span>
      <span class="hljs-attr">scheme:</span> <span class="hljs-string">bearer</span>
      <span class="hljs-attr">bearerFormat:</span> <span class="hljs-string">JWT</span>
<span class="hljs-attr">paths:</span>
  <span class="hljs-string">/foo:</span>
    <span class="hljs-string">$ref:</span> <span class="hljs-string">'other#/components/pathItems/Foo'</span>
</code></pre>
                <p>该入口文档引用了另一个文档 <code>other</code>，未使用文件扩展名。这样客户端可以在每个资源上选择可接受的格式，前提是两种表示都可用：</p>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-keyword">GET</span> <span class="hljs-string">/api/description/other</span> <span class="hljs-meta">HTTP/1.1</span>
<span class="hljs-attribute">Host</span><span class="hljs-punctuation">: </span>www.example.com
<span class="hljs-attribute">Accept</span><span class="hljs-punctuation">: </span>application/openapi+json
</code></pre>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">"components"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"securitySchemes"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"MySecurity"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"http"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"scheme"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"basic"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"pathItems"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"Foo"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"get"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"security"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-attr">"MySecurity"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span>
        <span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-keyword">GET</span> <span class="hljs-string">/api/description/other</span> <span class="hljs-meta">HTTP/1.1</span>
<span class="hljs-attribute">Host</span><span class="hljs-punctuation">: </span>www.example.com
<span class="hljs-attribute">Accept</span><span class="hljs-punctuation">: </span>application/openapi+yaml
</code></pre>
                <pre class="nohighlight" tabindex="0"><code><span class="hljs-attr">components:</span>
  <span class="hljs-attr">securitySchemes:</span>
    <span class="hljs-attr">MySecurity:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">http</span>
      <span class="hljs-attr">scheme:</span> <span class="hljs-string">basic</span>
  <span class="hljs-attr">pathItems:</span>
    <span class="hljs-attr">Foo:</span>
      <span class="hljs-attr">get:</span>
        <span class="hljs-attr">security:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-attr">MySecurity:</span> []
</code></pre>
                <p>在 <code>other</code> 文档中，被引用的 Path Item 对该 Security Scheme <code>MySecurity</code>
                    有一个安全需求。入口文档中也存在同名的 Security Scheme。正如 <a href="#resolving-implicit-connections">解析隐式连接</a>
                    一节所述，<code>MySecurity</code> 的解析具有实现定义的行为，但该节正式建议工具应从 <a
                        href="#openapi-description-structure">入口文档</a> 解析组件名称。与所有实现定义的行为一样，重要的是检查工具文档以确定支持哪种行为。</p>

            </section>
        </section>
    </section>
    <section id="references" class="appendix">
        <div class="header-wrapper">
            <h2 id="h-references"><bdi class="secno">H. </bdi>参考文献</h2><a class="self-link" href="#references"
                aria-label="Permalink for Appendix H."></a>
        </div>
        <section id="normative-references">
            <div class="header-wrapper">
                <h3 id="h-1-normative-references"><bdi class="secno">H.1 </bdi>规范性参考文献</h3><a class="self-link"
                    href="#normative-references" aria-label="Permalink for Appendix H.1"></a>
            </div>

            <dl class="bibliography">
                <dt id="bib-abnf">[ABNF]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc5234"><cite>语法规范的扩展 BNF：ABNF</cite></a>。D. Crocker，编；P.
                    Overell。IETF。2008 年 1 月。互联网标准。URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc5234">https://www.rfc-editor.org/rfc/rfc5234</a>
                </dd>
                <dt id="bib-commonmark">[CommonMark]</dt>
                <dd>
                    <a href="https://spec.commonmark.org/"><cite>CommonMark 规范</cite></a>。URL: <a
                        href="https://spec.commonmark.org/">https://spec.commonmark.org/</a>
                </dd>
                <dt id="bib-commonmark-0.27">[CommonMark-0.27]</dt>
                <dd>
                    <a href="https://spec.commonmark.org/0.27/"><cite>CommonMark 规范，版本 0.27</cite></a>。John
                    MacFarlane。2016 年 11 月 18 日。URL: <a
                        href="https://spec.commonmark.org/0.27/">https://spec.commonmark.org/0.27/</a>
                </dd>
                <dt id="bib-dom">[DOM]</dt>
                <dd>
                    <a href="https://dom.spec.whatwg.org/"><cite>DOM 标准</cite></a>。Anne van Kesteren。WHATWG。
                    活动标准。URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
                </dd>
                <dt id="bib-iana-http-authschemes">[IANA-HTTP-AUTHSCHEMES]</dt>
                <dd>
                    <a href="https://www.iana.org/assignments/http-authschemes/"><cite>超文本传输协议 (HTTP)
                            认证方案注册表</cite></a>。IANA。URL: <a
                        href="https://www.iana.org/assignments/http-authschemes/">https://www.iana.org/assignments/http-authschemes/</a>
                </dd>
                <dt id="bib-iana-http-status-codes">[IANA-HTTP-STATUS-CODES]</dt>
                <dd>
                    <a href="https://www.iana.org/assignments/http-status-codes/"><cite>超文本传输协议 (HTTP)
                            状态代码注册表</cite></a>。IANA。URL: <a
                        href="https://www.iana.org/assignments/http-status-codes/">https://www.iana.org/assignments/http-status-codes/</a>
                </dd>
                <dt id="bib-openapi-registry">[OpenAPI-Registry]</dt>
                <dd>
                    <a href="https://spec.openapis.org/registry/index.html"><cite>OpenAPI Initiative
                            注册表</cite></a>。OpenAPI Initiative。URL: <a
                        href="https://spec.openapis.org/registry/index.html">https://spec.openapis.org/registry/index.html</a>
                </dd>
                <dt id="bib-openid-connect-core">[OpenID-Connect-Core]</dt>
                <dd>
                    <a href="https://openid.net/specs/openid-connect-core-1_0.html"><cite>OpenID Connect Core 1.0（含勘误集
                            2）</cite></a>。N. Sakimura；J. Bradley；M. Jones；B. de Medeiros；C.
                    Mortimore。OpenID Foundation。2023 年 12 月 15 日。最终。URL: <a
                        href="https://openid.net/specs/openid-connect-core-1_0.html">https://openid.net/specs/openid-connect-core-1_0.html</a>
                </dd>
                <dt id="bib-openid-connect-discovery">[OpenID-Connect-Discovery]</dt>
                <dd>
                    <a href="https://openid.net/specs/openid-connect-discovery-1_0.html"><cite>OpenID Connect Discovery
                            1.0（含勘误集 2）</cite></a>。N. Sakimura；J. Bradley；M. Jones；E. Jay。OpenID
                    Foundation。2023 年 12 月 15 日。最终。URL: <a
                        href="https://openid.net/specs/openid-connect-discovery-1_0.html">https://openid.net/specs/openid-connect-discovery-1_0.html</a>
                </dd>
                <dt id="bib-rfc2046">[RFC2046]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc2046"><cite>多用途 Internet 邮件扩展 (MIME)
                            第二部分：媒体类型</cite></a>。N. Freed；N. Borenstein。IETF。1996 年 11 月。草案标准。URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc2046">https://www.rfc-editor.org/rfc/rfc2046</a>
                </dd>
                <dt id="bib-rfc2119">[RFC2119]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc2119"><cite>在 RFC 中用于指示要求级别的关键字</cite></a>。S.
                    Bradner。IETF。1997 年 3 月。最佳当前实践。URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc2119">https://www.rfc-editor.org/rfc/rfc2119</a>
                </dd>
                <dt id="bib-rfc3986">[RFC3986]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc3986"><cite>统一资源标识符 (URI)：通用语法</cite></a>。T.
                    Berners-Lee；R. Fielding；L. Masinter。IETF。2005 年 1 月。互联网标准。URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc3986">https://www.rfc-editor.org/rfc/rfc3986</a>
                </dd>
                <dt id="bib-rfc3987">[RFC3987]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc3987"><cite>国际化资源标识符 (IRIs)</cite></a>。M. Duerst；M.
                    Suignard。IETF。2005 年 1 月。建议标准。URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc3987">https://www.rfc-editor.org/rfc/rfc3987</a>
                </dd>
                <dt id="bib-rfc4648">[RFC4648]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc4648"><cite>Base16、Base32 与 Base64 数据编码</cite></a>。S.
                    Josefsson。IETF。2006 年 10 月。建议标准。URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc4648">https://www.rfc-editor.org/rfc/rfc4648</a>
                </dd>
                <dt id="bib-rfc6265">[RFC6265]</dt>
                <dd>
                    <a href="https://httpwg.org/specs/rfc6265.html"><cite>HTTP 状态管理机制</cite></a>。A.
                    Barth。IETF。2011 年 4 月。建议标准。URL: <a
                        href="https://httpwg.org/specs/rfc6265.html">https://httpwg.org/specs/rfc6265.html</a>
                </dd>
                <dt id="bib-rfc6570">[RFC6570]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc6570"><cite>URI 模板</cite></a>。J. Gregorio；R.
                    Fielding；M. Hadley；M. Nottingham；D. Orchard。IETF。2012 年 3 月。建议标准。URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc6570">https://www.rfc-editor.org/rfc/rfc6570</a>
                </dd>
                <dt id="bib-rfc6749">[RFC6749]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc6749"><cite>OAuth 2.0 授权框架</cite></a>。D.
                    Hardt，编。IETF。2012 年 10 月。建议标准。URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc6749">https://www.rfc-editor.org/rfc/rfc6749</a>
                </dd>
                <dt id="bib-rfc6901">[RFC6901]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc6901"><cite>JSON 指针（JavaScript Object Notation
                            Pointer）</cite></a>。P. Bryan，编；K. Zyp；M. Nottingham，编。IETF。2013 年 4 月。建议标准。URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc6901">https://www.rfc-editor.org/rfc/rfc6901</a>
                </dd>
                <dt id="bib-rfc7578">[RFC7578]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc7578"><cite>从表单返回值：multipart/form-data</cite></a>。L.
                    Masinter。IETF。2015 年 7 月。建议标准。URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc7578">https://www.rfc-editor.org/rfc/rfc7578</a>
                </dd>
                <dt id="bib-rfc8174">[RFC8174]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc8174"><cite>RFC 2119 关键字大小写歧义</cite></a>。B.
                    Leiba。IETF。2017 年 5 月。最佳当前实践。URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc8174">https://www.rfc-editor.org/rfc/rfc8174</a>
                </dd>
                <dt id="bib-rfc8259">[RFC8259]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc8259"><cite>JSON（JavaScript Object
                            Notation）数据交换格式</cite></a>。T. Bray，编。IETF。2017 年 12 月。互联网标准。URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc8259">https://www.rfc-editor.org/rfc/rfc8259</a>
                </dd>
                <dt id="bib-rfc8414">[RFC8414]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc8414"><cite>OAuth 2.0 授权服务器元数据</cite></a>。M. Jones；N.
                    Sakimura；J. Bradley。IETF。2018 年 6 月。建议标准。
                    URL: <a href="https://www.rfc-editor.org/rfc/rfc8414">https://www.rfc-editor.org/rfc/rfc8414</a>
                </dd>
                <dt id="bib-rfc8628">[RFC8628]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc8628"><cite>OAuth 2.0 设备授权授予</cite></a>。W. Denniss；J.
                    Bradley；M. Jones；H. Tschofenig。IETF。2019 年 8 月。建议标准。URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc8628">https://www.rfc-editor.org/rfc/rfc8628</a>
                </dd>
                <dt id="bib-rfc9110">[RFC9110]</dt>
                <dd>
                    <a href="https://httpwg.org/specs/rfc9110.html"><cite>HTTP 语义</cite></a>。R. Fielding，编；
                    M. Nottingham，编；J. Reschke，编。IETF。2022 年 6 月。互联网标准。URL: <a
                        href="https://httpwg.org/specs/rfc9110.html">https://httpwg.org/specs/rfc9110.html</a>
                </dd>
                <dt id="bib-rfc9264">[RFC9264]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc9264"><cite>Linkset：链接集的媒体类型与链接关系类型</cite></a>。E.
                    Wilde；H. Van de Sompel。IETF。2022 年 7 月。建议标准。
                    URL: <a href="https://www.rfc-editor.org/rfc/rfc9264">https://www.rfc-editor.org/rfc/rfc9264</a>
                </dd>
                <dt id="bib-rfc9512">[RFC9512]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc9512"><cite>YAML 媒体类型</cite></a>。R. Polli；E.
                    Wilde；E. Aro。IETF。2024 年 2 月。信息性说明。URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc9512">https://www.rfc-editor.org/rfc/rfc9512</a>
                </dd>
                <dt id="bib-sniff">[SNIFF]</dt>
                <dd>
                    <a href="https://mimesniff.spec.whatwg.org/"><cite>MIME 嗅探标准</cite></a>。Gordon P.
                    Hemsley。WHATWG。活动标准。URL: <a
                        href="https://mimesniff.spec.whatwg.org/">https://mimesniff.spec.whatwg.org/</a>
                </dd>
                <dt id="bib-spdx-licenses">[SPDX-Licenses]</dt>
                <dd>
                    <a href="https://spdx.org/licenses/"><cite>SPDX 许可证列表</cite></a>。Linux Foundation。URL: <a
                        href="https://spdx.org/licenses/">https://spdx.org/licenses/</a>
                </dd>
                <dt id="bib-whatwg-url">[WHATWG-URL]</dt>
                <dd>
                    <a href="https://url.spec.whatwg.org/"><cite>URL 标准</cite></a>。Anne van Kesteren。WHATWG。
                    活动标准。URL: <a href="https://url.spec.whatwg.org/">https://url.spec.whatwg.org/</a>
                </dd>
                <dt id="bib-xml-names11">[xml-names11]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/xml-names11/"><cite>XML 名称空间 1.1（第二版）</cite></a>。Tim Bray；Dave
                    Hollander；Andrew Layman；Richard Tobin 等。W3C。2006 年 8 月 16 日。W3C 推荐。URL: <a
                        href="https://www.w3.org/TR/xml-names11/">https://www.w3.org/TR/xml-names11/</a>
                </dd>
                <dt id="bib-yaml">[YAML]</dt>
                <dd>
                    <a href="http://yaml.org/spec/1.2/spec.html"><cite>YAML 不是标记语言（YAML™）版本 1.2</cite></a>。Oren
                    Ben-Kiki；Clark Evans；Ingy döt Net。2009 年 10 月 1 日。URL: <a
                        href="http://yaml.org/spec/1.2/spec.html">http://yaml.org/spec/1.2/spec.html</a>
                </dd>
            </dl>
        </section>
        <section id="informative-references">
            <div class="header-wrapper">
                <h3 id="h-2-informative-references"><bdi class="secno">H.2 </bdi>说明性参考文献</h3><a class="self-link"
                    href="#informative-references" aria-label="Permalink for Appendix H.2"></a>
            </div>

            <dl class="bibliography">
                <dt id="bib-html">[HTML]</dt>
                <dd>
                    <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML 标准</cite></a>。Anne van Kesteren；
                    Domenic Denicola；Dominic Farolino；Ian Hickson；Philip Jägenstedt；Simon Pieters。WHATWG。活动
                    标准。URL: <a
                        href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
                </dd>
                <dt id="bib-html401">[HTML401]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/html401/"><cite>HTML 4.01 规范</cite></a>。Dave Raggett；
                    Arnaud Le Hors；Ian Jacobs。W3C。2018 年 3 月 27 日。W3C 推荐。URL: <a
                        href="https://www.w3.org/TR/html401/">https://www.w3.org/TR/html401/</a>
                </dd>
                <dt id="bib-openapi-learn">[OpenAPI-Learn]</dt>
                <dd>
                    <a href="https://learn.openapis.org/"><cite>OpenAPI — 入门与规范解读</cite></a>。OpenAPI Initiative。URL: <a
                        href="https://learn.openapis.org/">https://learn.openapis.org/</a>
                </dd>
                <dt id="bib-rfc1738">[RFC1738]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc1738"><cite>统一资源定位符（URL）</cite></a>。T. Berners-Lee；L.
                    Masinter；M. McCahill。IETF。1994 年 12 月。建议标准。URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc1738">https://www.rfc-editor.org/rfc/rfc1738</a>
                </dd>
                <dt id="bib-rfc1866">[RFC1866]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc1866"><cite>超文本标记语言 - 2.0</cite></a>。T. Berners-Lee；D.
                    Connolly。IETF。1995 年 11 月。历史性规范。URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc1866">https://www.rfc-editor.org/rfc/rfc1866</a>
                </dd>
                <dt id="bib-rfc2396">[RFC2396]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc2396"><cite>统一资源标识符（URI）：通用语法</cite></a>。T.
                    Berners-Lee；R. Fielding；L. Masinter。IETF。1998 年 8 月。草案标准。URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc2396">https://www.rfc-editor.org/rfc/rfc2396</a>
                </dd>
                <dt id="bib-rfc2557">[RFC2557]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc2557"><cite>聚合文档的 MIME 封装（例如 HTML）(MHTML)</cite></a>。J.
                    Palme；A. Hopmann；N. Shelness。IETF。1999 年 3 月。建议标准。URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc2557">https://www.rfc-editor.org/rfc/rfc2557</a>
                </dd>
                <dt id="bib-rfc6838">[RFC6838]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc6838"><cite>媒体类型规范与注册程序</cite></a>。N. Freed；J. Klensin；T.
                    Hansen。IETF。2013 年 1 月。最佳当前实践。URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc6838">https://www.rfc-editor.org/rfc/rfc6838</a>
                </dd>
                <dt id="bib-rfc7464">[RFC7464]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc7464"><cite>JSON 文本序列</cite></a>。N. Williams。IETF。2015 年
                    2 月。建议标准。URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc7464">https://www.rfc-editor.org/rfc/rfc7464</a>
                </dd>
                <dt id="bib-rfc8091">[RFC8091]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc8091"><cite>用于 JSON 文本序列的媒体类型结构后缀</cite></a>。E.
                    Wilde。IETF。2017 年 2 月。信息性说明。URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc8091">https://www.rfc-editor.org/rfc/rfc8091</a>
                </dd>
                <dt id="bib-rfc9535">[RFC9535]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc9535"><cite>JSONPath：用于 JSON 的查询表达式</cite></a>。S.
                    Gössner，编；G. Normington，编；C. Bormann，编。IETF。2024 年 2 月。建议标准。URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc9535">https://www.rfc-editor.org/rfc/rfc9535</a>
                </dd>
            </dl>
        </section>
    </section>
    <p role="navigation" id="back-to-top">
        <a href="#title"><abbr title="返回顶部">↑</abbr></a>
    </p>
    <script id="respec-highlight-vars">(() => {
            // @ts-check

            if (document.respec) {
                document.respec.ready.then(setupVarHighlighter);
            } else {
                setupVarHighlighter();
            }

            function setupVarHighlighter() {
                document
                    .querySelectorAll("var")
                    .forEach(varElem => varElem.addEventListener("click", highlightListener));
            }

            function highlightListener(ev) {
                ev.stopPropagation();
                const { target: varElem } = ev;
                const hightligtedElems = highlightVars(varElem);
                const resetListener = () => {
                    const hlColor = getHighlightColor(varElem);
                    hightligtedElems.forEach(el => removeHighlight(el, hlColor));
                    [...HL_COLORS.keys()].forEach(key => HL_COLORS.set(key, true));
                };
                if (hightligtedElems.length) {
                    document.body.addEventListener("click", resetListener, { once: true });
                }
            }

            // availability of highlight colors. colors from var.css
            const HL_COLORS = new Map([
                ["respec-hl-c1", true],
                ["respec-hl-c2", true],
                ["respec-hl-c3", true],
                ["respec-hl-c4", true],
                ["respec-hl-c5", true],
                ["respec-hl-c6", true],
                ["respec-hl-c7", true],
            ]);

            function getHighlightColor(target) {
                // return current colors if applicable
                const { value } = target.classList;
                const re = /respec-hl-\w+/;
                const activeClass = re.test(value) && value.match(re);
                if (activeClass) return activeClass[0];

                // first color preference
                if (HL_COLORS.get("respec-hl-c1") === true) return "respec-hl-c1";

                // otherwise get some other available color
                return [...HL_COLORS.keys()].find(c => HL_COLORS.get(c)) || "respec-hl-c1";
            }

            function highlightVars(varElem) {
                const textContent = norm(varElem.textContent);
                const parent = varElem.closest(".algorithm, section");
                const highlightColor = getHighlightColor(varElem);

                const varsToHighlight = [...parent.querySelectorAll("var")].filter(
                    el =>
                        norm(el.textContent) === textContent &&
                        el.closest(".algorithm, section") === parent
                );

                // update availability of highlight color
                const colorStatus = varsToHighlight[0].classList.contains("respec-hl");
                HL_COLORS.set(highlightColor, colorStatus);

                // highlight vars
                if (colorStatus) {
                    varsToHighlight.forEach(el => removeHighlight(el, highlightColor));
                    return [];
                } else {
                    varsToHighlight.forEach(el => addHighlight(el, highlightColor));
                }
                return varsToHighlight;
            }

            function removeHighlight(el, highlightColor) {
                el.classList.remove("respec-hl", highlightColor);
                // clean up empty class attributes so they don't come in export
                if (!el.classList.length) el.removeAttribute("class");
            }

            function addHighlight(elem, highlightColor) {
                elem.classList.add("respec-hl", highlightColor);
            }

            /**
             * Same as `norm` from src/core/utils, but our build process doesn't allow
             * imports in runtime scripts, so duplicated here.
             * @param {string} str
             */
            function norm(str) {
                return str.trim().replace(/\s+/g, " ");
            }
        })()</script>
    <script id="respec-dfn-panel">(() => {
                                               // @ts-check
                                               if (document.respec) {
                                                   document.respec.ready.then(setupPanel);
                                               } else {
                                                   setupPanel();
                                               }

                                               function setupPanel() {
                                                   const listener = panelListener();
                                                   document.body.addEventListener("keydown", listener);
                                                   document.body.addEventListener("click", listener);
                                               }

                                               function panelListener() {
                                                   /** @type {HTMLElement} */
                                                   let panel = null;
                                                   return event => {
                                                       const { target, type } = event;

                                                       if (!(target instanceof HTMLElement)) return;

                                                       // For keys, we only care about Enter key to activate the panel
                                                       // otherwise it's activated via a click.
                                                       if (type === "keydown" && event.key !== "Enter") return;

                                                       const action = deriveAction(event);

                                                       switch (action) {
                                                           case "show": {
                                                               hidePanel(panel);
                                                               /** @type {HTMLElement} */
                                                               const dfn = target.closest("dfn, .index-term");
                                                               panel = document.getElementById(`dfn-panel-for-${dfn.id}`);
                                                               const coords = deriveCoordinates(event);
                                                               displayPanel(dfn, panel, coords);
                                                               break;
                                                           }
                                                           case "dock": {
                                                               panel.style.left = null;
                                                               panel.style.top = null;
                                                               panel.classList.add("docked");
                                                               break;
                                                           }
                                                           case "hide": {
                                                               hidePanel(panel);
                                                               panel = null;
                                                               break;
                                                           }
                                                       }
                                                   };
                                               }

                                               /**
                                                * @param {MouseEvent|KeyboardEvent} event
                                                */
                                               function deriveCoordinates(event) {
                                                   const target = /** @type HTMLElement */ (event.target);

                                                   // We prevent synthetic AT clicks from putting
                                                   // the dialog in a weird place. The AT events sometimes
                                                   // lack coordinates, so they have clientX/Y = 0
                                                   const rect = target.getBoundingClientRect();
                                                   if (
                                                       event instanceof MouseEvent &&
                                                       event.clientX >= rect.left &&
                                                       event.clientY >= rect.top
                                                   ) {
                                                       // The event probably happened inside the bounding rect...
                                                       return { x: event.clientX, y: event.clientY };
                                                   }

                                                   // Offset to the middle of the element
                                                   const x = rect.x + rect.width / 2;
                                                   // Placed at the bottom of the element
                                                   const y = rect.y + rect.height;
                                                   return { x, y };
                                               }

                                               /**
                                                * @param {Event} event
                                                */
                                               function deriveAction(event) {
                                                   const target = /** @type {HTMLElement} */ (event.target);
                                                   const hitALink = !!target.closest("a");
                                                   if (target.closest("dfn:not([data-cite]), .index-term")) {
                                                       return hitALink ? "none" : "show";
                                                   }
                                                   if (target.closest(".dfn-panel")) {
                                                       if (hitALink) {
                                                           return target.classList.contains("self-link") ? "hide" : "dock";
                                                       }
                                                       const panel = target.closest(".dfn-panel");
                                                       return panel.classList.contains("docked") ? "hide" : "none";
                                                   }
                                                   if (document.querySelector(".dfn-panel:not([hidden])")) {
                                                       return "hide";
                                                   }
                                                   return "none";
                                               }

                                               /**
                                                * @param {HTMLElement} dfn
                                                * @param {HTMLElement} panel
                                                * @param {{ x: number, y: number }} clickPosition
                                                */
                                               function displayPanel(dfn, panel, { x, y }) {
                                                   panel.hidden = false;
                                                   // distance (px) between edge of panel and the pointing triangle (caret)
                                                   const MARGIN = 20;

                                                   const dfnRects = dfn.getClientRects();
                                                   // Find the `top` offset when the `dfn` can be spread across multiple lines
                                                   let closestTop = 0;
                                                   let minDiff = Infinity;
                                                   for (const rect of dfnRects) {
                                                       const { top, bottom } = rect;
                                                       const diffFromClickY = Math.abs((top + bottom) / 2 - y);
                                                       if (diffFromClickY < minDiff) {
                                                           minDiff = diffFromClickY;
                                                           closestTop = top;
                                                       }
                                                   }

                                                   const top = window.scrollY + closestTop + dfnRects[0].height;
                                                   const left = x - MARGIN;
                                                   panel.style.left = `${left}px`;
                                                   panel.style.top = `${top}px`;

                                                   // Find if the panel is flowing out of the window
                                                   const panelRect = panel.getBoundingClientRect();
                                                   const SCREEN_WIDTH = Math.min(window.innerWidth, window.screen.width);
                                                   if (panelRect.right > SCREEN_WIDTH) {
                                                       const newLeft = Math.max(MARGIN, x + MARGIN - panelRect.width);
                                                       const newCaretOffset = left - newLeft;
                                                       panel.style.left = `${newLeft}px`;
                                                       /** @type {HTMLElement} */
                                                       const caret = panel.querySelector(".caret");
                                                       caret.style.left = `${newCaretOffset}px`;
                                                   }

                                                   // As it's a dialog, we trap focus.
                                                   // TODO: when <dialog> becomes a implemented, we should really
                                                   // use that.
                                                   trapFocus(panel, dfn);
                                               }

                                               /**
                                                * @param {HTMLElement} panel
                                                * @param {HTMLElement} dfn
                                                * @returns
                                                */
                                               function trapFocus(panel, dfn) {
                                                   /** @type NodeListOf<HTMLAnchorElement> elements */
                                                   const anchors = panel.querySelectorAll("a[href]");
                                                   // No need to trap focus
                                                   if (!anchors.length) return;

                                                   // Move focus to first anchor element
                                                   const first = anchors.item(0);
                                                   first.focus();

                                                   const trapListener = createTrapListener(anchors, panel, dfn);
                                                   panel.addEventListener("keydown", trapListener);

                                                   // Hiding the panel releases the trap
                                                   const mo = new MutationObserver(records => {
                                                       const [record] = records;
                                                       const target = /** @type HTMLElement */ (record.target);
                                                       if (target.hidden) {
                                                           panel.removeEventListener("keydown", trapListener);
                                                           mo.disconnect();
                                                       }
                                                   });
                                                   mo.observe(panel, { attributes: true, attributeFilter: ["hidden"] });
                                               }

                                               /**
                                                *
                                                * @param {NodeListOf<HTMLAnchorElement>} anchors
                                                * @param {HTMLElement} panel
                                                * @param {HTMLElement} dfn
                                                * @returns
                                                */
                                               function createTrapListener(anchors, panel, dfn) {
                                                   const lastIndex = anchors.length - 1;
                                                   let currentIndex = 0;
                                                   return event => {
                                                       switch (event.key) {
                                                           // Hitting "Tab" traps us in a nice loop around elements.
                                                           case "Tab": {
                                                               event.preventDefault();
                                                               currentIndex += event.shiftKey ? -1 : +1;
                                                               if (currentIndex < 0) {
                                                                   currentIndex = lastIndex;
                                                               } else if (currentIndex > lastIndex) {
                                                                   currentIndex = 0;
                                                               }
                                                               anchors.item(currentIndex).focus();
                                                               break;
                                                           }

                                                           // Hitting "Enter" on an anchor releases the trap.
                                                           case "Enter":
                                                               hidePanel(panel);
                                                               break;

                                                           // Hitting "Escape" returns focus to dfn.
                                                           case "Escape":
                                                               hidePanel(panel);
                                                               dfn.focus();
                                                               return;
                                                       }
                                                   };
                                               }

                                               /** @param {HTMLElement} panel */
                                               function hidePanel(panel) {
                                                   if (!panel) return;
                                                   panel.hidden = true;
                                                   panel.classList.remove("docked");
                                               }
                                           })()</script>
    <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
    <script src="https://htmlspecs.com/dropdown.js"></script>
</body>

</html>