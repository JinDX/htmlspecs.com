<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
    <meta charset="utf-8">
    <meta name="generator" content="ReSpec 32.2.1">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <style>
        span.example-title {
            text-transform: none
        }

        :is(aside, div).example,
        div.illegal-example {
            padding: .5em;
            margin: 1em 0;
            position: relative;
            clear: both
        }

        div.illegal-example {
            color: red
        }

        div.illegal-example p {
            color: #000
        }

        :is(aside, div).example {
            border-left-width: .5em;
            border-left-style: solid;
            border-color: #e0cb52;
            background: #fcfaee
        }

        aside.example div.example {
            border-left-width: .1em;
            border-color: #999;
            background: #fff
        }

        .example pre {
            background-color: rgba(0, 0, 0, .03)
        }
    </style>
    <style>
        .issue-label {
            text-transform: initial
        }

        .warning>p:first-child {
            margin-top: 0
        }

        .warning {
            padding: .5em;
            border-left-width: .5em;
            border-left-style: solid
        }

        span.warning {
            padding: .1em .5em .15em
        }

        .issue.closed span.issue-number {
            text-decoration: line-through
        }

        .issue.closed span.issue-number::after {
            content: " (Closed)";
            font-size: smaller
        }

        .warning {
            border-color: #f11;
            border-width: .2em;
            border-style: solid;
            background: #fbe9e9
        }

        .warning-title:before {
            content: "âš ";
            font-size: 1.3em;
            float: left;
            padding-right: .3em;
            margin-top: -.3em
        }

        li.task-list-item {
            list-style: none
        }

        input.task-list-item-checkbox {
            margin: 0 .35em .25em -1.6em;
            vertical-align: middle
        }

        .issue a.respec-gh-label {
            padding: 5px;
            margin: 0 2px 0 2px;
            font-size: 10px;
            text-transform: none;
            text-decoration: none;
            font-weight: 700;
            border-radius: 4px;
            position: relative;
            bottom: 2px;
            border: none;
            display: inline-block
        }
    </style>
    <style>
        pre.idl {
            padding: 1em;
            position: relative
        }

        pre.idl>code {
            color: #000
        }

        @media print {
            pre.idl {
                white-space: pre-wrap
            }
        }

        .idlHeader {
            display: block;
            width: 150px;
            background: #8ccbf2;
            color: #fff;
            font-family: sans-serif;
            font-weight: 700;
            margin: -1em 0 1em -1em;
            height: 28px;
            line-height: 28px
        }

        .idlHeader a.self-link {
            margin-left: .3cm;
            text-decoration: none;
            border-bottom: none
        }

        .idlID {
            font-weight: 700;
            color: #005a9c
        }

        .idlType {
            color: #005a9c
        }

        .idlName {
            color: #ff4500
        }

        .idlName a {
            color: #ff4500;
            border-bottom: 1px dotted #ff4500;
            text-decoration: none
        }

        a.idlEnumItem {
            color: #000;
            border-bottom: 1px dotted #ccc;
            text-decoration: none
        }

        .idlSuperclass {
            font-style: italic;
            color: #005a9c
        }

        .idlDefaultValue,
        .idlParamName {
            font-style: italic
        }

        .extAttr {
            color: #666
        }

        .idlSectionComment {
            color: gray
        }

        .idlIncludes a {
            font-weight: 700
        }

        .respec-button-copy-paste:focus {
            text-decoration: none;
            border-color: #51a7e8;
            outline: 0;
            box-shadow: 0 0 5px rgba(81, 167, 232, .5)
        }

        .respec-button-copy-paste:is(:focus:hover, .selected:focus) {
            border-color: #51a7e8
        }

        .respec-button-copy-paste:is(:hover, :active, .zeroclipboard-is-hover, .zeroclipboard-is-active) {
            text-decoration: none;
            background-color: #ddd;
            background-image: linear-gradient(#eee, #ddd);
            border-color: #ccc
        }

        .respec-button-copy-paste:is(:active, .selected, .zeroclipboard-is-active) {
            background-color: #dcdcdc;
            background-image: none;
            border-color: #b5b5b5;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, .15)
        }

        .respec-button-copy-paste.selected:hover {
            background-color: #cfcfcf
        }

        .respec-button-copy-paste:is(:disabled, :disabled:hover, .disabled, .disabled:hover) {
            color: rgba(102, 102, 102, .5);
            cursor: default;
            background-color: rgba(229, 229, 229, .5);
            background-image: none;
            border-color: rgba(197, 197, 197, .5);
            box-shadow: none
        }

        @media print {
            .respec-button-copy-paste {
                visibility: hidden
            }
        }
    </style>
    <style>
        dfn {
            cursor: pointer
        }

        .dfn-panel {
            position: absolute;
            z-index: 35;
            min-width: 300px;
            max-width: 500px;
            padding: .5em .75em;
            margin-top: .6em;
            font-family: "Helvetica Neue", sans-serif;
            font-size: small;
            background: #fff;
            color: #000;
            box-shadow: 0 1em 3em -.4em rgba(0, 0, 0, .3), 0 0 1px 1px rgba(0, 0, 0, .05);
            border-radius: 2px
        }

        .dfn-panel:not(.docked)>.caret {
            position: absolute;
            top: -9px
        }

        .dfn-panel:not(.docked)>.caret::after,
        .dfn-panel:not(.docked)>.caret::before {
            content: "";
            position: absolute;
            border: 10px solid transparent;
            border-top: 0;
            border-bottom: 10px solid #fff;
            top: 0
        }

        .dfn-panel:not(.docked)>.caret::before {
            border-bottom: 9px solid #a2a9b1
        }

        .dfn-panel * {
            margin: 0
        }

        .dfn-panel b {
            display: block;
            color: #000;
            margin-top: .25em
        }

        .dfn-panel ul a[href] {
            color: #333
        }

        .dfn-panel>div {
            display: flex
        }

        .dfn-panel a.self-link {
            font-weight: 700;
            margin-right: auto
        }

        .dfn-panel .marker {
            padding: .1em;
            margin-left: .5em;
            border-radius: .2em;
            text-align: center;
            white-space: nowrap;
            font-size: 90%;
            color: #040b1c
        }

        .dfn-panel .marker.dfn-exported {
            background: #d1edfd;
            box-shadow: 0 0 0 .125em #1ca5f940
        }

        .dfn-panel .marker.idl-block {
            background: #8ccbf2;
            box-shadow: 0 0 0 .125em #0670b161
        }

        .dfn-panel a:not(:hover) {
            text-decoration: none !important;
            border-bottom: none !important
        }

        .dfn-panel a[href]:hover {
            border-bottom-width: 1px
        }

        .dfn-panel ul {
            padding: 0
        }

        .dfn-panel li {
            margin-left: 1em
        }

        .dfn-panel.docked {
            position: fixed;
            left: .5em;
            top: unset;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - .75em * 2 - .5em - .2em * 2);
            max-height: 30vh;
            overflow: auto
        }
    </style>

    <title>Beacon</title>




    <style id="respec-mainstyle">
        @keyframes pop {
            0% {
                transform: scale(1, 1)
            }

            25% {
                transform: scale(1.25, 1.25);
                opacity: .75
            }

            100% {
                transform: scale(1, 1)
            }
        }

        :is(h1, h2, h3, h4, h5, h6, a) abbr {
            border: none
        }

        dfn {
            font-weight: 700
        }

        a.internalDFN {
            color: inherit;
            border-bottom: 1px solid #99c;
            text-decoration: none
        }

        a.externalDFN {
            color: inherit;
            border-bottom: 1px dotted #ccc;
            text-decoration: none
        }

        a.bibref {
            text-decoration: none
        }

        .respec-offending-element:target {
            animation: pop .25s ease-in-out 0s 1
        }

        .respec-offending-element,
        a[href].respec-offending-element {
            text-decoration: red wavy underline
        }

        @supports not (text-decoration:red wavy underline) {
            .respec-offending-element:not(pre) {
                display: inline-block
            }

            .respec-offending-element {
                background: url(data:image/gif;base64,R0lGODdhBAADAPEAANv///8AAP///wAAACwAAAAABAADAEACBZQjmIAFADs=) bottom repeat-x
            }
        }

        #references :target {
            background: #eaf3ff;
            animation: pop .4s ease-in-out 0s 1
        }

        cite .bibref {
            font-style: normal
        }

        code {
            color: #c63501
        }

        th code {
            color: inherit
        }

        a[href].orcid {
            padding-left: 4px;
            padding-right: 4px
        }

        a[href].orcid>svg {
            margin-bottom: -2px
        }

        .toc a,
        .tof a {
            text-decoration: none
        }

        a .figno,
        a .secno {
            color: #000
        }

        ol.tof,
        ul.tof {
            list-style: none outside none
        }

        .caption {
            margin-top: .5em;
            font-style: italic
        }

        table.simple {
            border-spacing: 0;
            border-collapse: collapse;
            border-bottom: 3px solid #005a9c
        }

        .simple th {
            background: #005a9c;
            color: #fff;
            padding: 3px 5px;
            text-align: left
        }

        .simple th a {
            color: #fff;
            padding: 3px 5px;
            text-align: left
        }

        .simple th[scope=row] {
            background: inherit;
            color: inherit;
            border-top: 1px solid #ddd
        }

        .simple td {
            padding: 3px 10px;
            border-top: 1px solid #ddd
        }

        .simple tr:nth-child(even) {
            background: #f0f6ff
        }

        .section dd>p:first-child {
            margin-top: 0
        }

        .section dd>p:last-child {
            margin-bottom: 0
        }

        .section dd {
            margin-bottom: 1em
        }

        .section dl.attrs dd,
        .section dl.eldef dd {
            margin-bottom: 0
        }

        #issue-summary>ul {
            column-count: 2
        }

        #issue-summary li {
            list-style: none;
            display: inline-block
        }

        details.respec-tests-details {
            margin-left: 1em;
            display: inline-block;
            vertical-align: top
        }

        details.respec-tests-details>* {
            padding-right: 2em
        }

        details.respec-tests-details[open] {
            z-index: 999999;
            position: absolute;
            border: thin solid #cad3e2;
            border-radius: .3em;
            background-color: #fff;
            padding-bottom: .5em
        }

        details.respec-tests-details[open]>summary {
            border-bottom: thin solid #cad3e2;
            padding-left: 1em;
            margin-bottom: 1em;
            line-height: 2em
        }

        details.respec-tests-details>ul {
            width: 100%;
            margin-top: -.3em
        }

        details.respec-tests-details>li {
            padding-left: 1em
        }

        .self-link:hover {
            opacity: 1;
            text-decoration: none;
            background-color: transparent
        }

        aside.example .marker>a.self-link {
            color: inherit
        }

        .header-wrapper {
            display: flex;
            align-items: baseline
        }

        :is(h2, h3, h4, h5, h6):not(#toc>h2, #abstract>h2, #sotd>h2, .head>h2) {
            position: relative;
            left: -.5em
        }

        :is(h2, h3, h4, h5, h6):not(#toch2)+a.self-link {
            color: inherit;
            order: -1;
            position: relative;
            left: -1.1em;
            font-size: 1rem;
            opacity: .5
        }

        :is(h2, h3, h4, h5, h6)+a.self-link::before {
            content: "Â§";
            text-decoration: none;
            color: var(--heading-text)
        }

        :is(h2, h3)+a.self-link {
            top: -.2em
        }

        :is(h4, h5, h6)+a.self-link::before {
            color: #000
        }

        @media (max-width:767px) {
            dd {
                margin-left: 0
            }
        }

        @media print {
            .removeOnSave {
                display: none
            }
        }
    </style>
    <meta name="description" content="This specification defines an interface that web developers can use to
    schedule asynchronous and non-blocking delivery of data that minimizes
    resource contention with other time-critical operations, while ensuring
    that such requests are still processed and delivered to destination.">
    <link rel="canonical" href="https://www.w3.org/TR/beacon/">
    <style>
        .hljs {
            display: block;
            overflow-x: auto;
            padding: .5em;
            color: #383a42;
            background: #fafafa
        }

        .hljs-comment,
        .hljs-quote {
            color: #717277;
            font-style: italic
        }

        .hljs-doctag,
        .hljs-formula,
        .hljs-keyword {
            color: #a626a4
        }

        .hljs-deletion,
        .hljs-name,
        .hljs-section,
        .hljs-selector-tag,
        .hljs-subst {
            color: #ca4706;
            font-weight: 700
        }

        .hljs-literal {
            color: #0b76c5
        }

        .hljs-addition,
        .hljs-attribute,
        .hljs-meta-string,
        .hljs-regexp,
        .hljs-string {
            color: #42803c
        }

        .hljs-built_in,
        .hljs-class .hljs-title {
            color: #9a6a01
        }

        .hljs-attr,
        .hljs-number,
        .hljs-selector-attr,
        .hljs-selector-class,
        .hljs-selector-pseudo,
        .hljs-template-variable,
        .hljs-type,
        .hljs-variable {
            color: #986801
        }

        .hljs-bullet,
        .hljs-link,
        .hljs-meta,
        .hljs-selector-id,
        .hljs-symbol,
        .hljs-title {
            color: #336ae3
        }

        .hljs-emphasis {
            font-style: italic
        }

        .hljs-strong {
            font-weight: 700
        }

        .hljs-link {
            text-decoration: underline
        }
    </style>
    <style>
        var {
            position: relative;
            cursor: pointer
        }

        var[data-type]::after,
        var[data-type]::before {
            position: absolute;
            left: 50%;
            top: -6px;
            opacity: 0;
            transition: opacity .4s;
            pointer-events: none
        }

        var[data-type]::before {
            content: "";
            transform: translateX(-50%);
            border-width: 4px 6px 0 6px;
            border-style: solid;
            border-color: transparent;
            border-top-color: #000
        }

        var[data-type]::after {
            content: attr(data-type);
            transform: translateX(-50%) translateY(-100%);
            background: #000;
            text-align: center;
            font-family: "Dank Mono", "Fira Code", monospace;
            font-style: normal;
            padding: 6px;
            border-radius: 3px;
            color: #daca88;
            text-indent: 0;
            font-weight: 400
        }

        var[data-type]:hover::after,
        var[data-type]:hover::before {
            opacity: 1
        }
    </style>
    <script id="initialUserConfig" type="application/json">{
  "shortName": "beacon",
  "specStatus": "CRD",
  "crEnd": "2017-05-11",
  "useExperimentalStyles": true,
  "edDraftURI": "https://w3c.github.io/beacon/",
  "editors": [
    {
      "name": "Ilya Grigorik",
      "mailto": "igrigorik@gmail.com",
      "company": "Shopify",
      "w3cid": "56102",
      "url": "mailto:igrigorik@gmail.com"
    },
    {
      "name": "Alois Reitbauer",
      "mailto": "alois.reitbauer@compuware.com",
      "company": "Compuware Corp.",
      "w3cid": "48276",
      "url": "mailto:alois.reitbauer@compuware.com"
    }
  ],
  "group": "webperf",
  "license": "w3c-software-doc",
  "wgPublicList": "public-web-perf",
  "noLegacyStyle": true,
  "github": "https://github.com/w3c/beacon",
  "testSuiteURI": "https://w3c-test.org/beacon/",
  "implementationReportURI": "https://w3c.github.io/test-results/beacon/",
  "otherLinks": [
    {
      "key": "Implementation",
      "data": [
        {
          "value": "Can I use Beacon?",
          "href": "http://caniuse.com/#feat=beacon"
        }
      ]
    }
  ],
  "xref": [
    "html",
    "fetch",
    "url",
    "webidl"
  ],
  "publishDate": "2022-08-03",
  "previousMaturity": "CRD",
  "previousPublishDate": "2022-08-03",
  "publishISODate": "2022-08-03T00:00:00.000Z",
  "generatedSubtitle": "W3C Candidate Recommendation Draft 03 August 2022"
}</script>
    <link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2021/W3C-CRD">
</head>

<body data-link-for="Navigator" class="h-entry" data-cite="WEBIDL html fetch url webidl">
    <div class="head">
        <p class="logos"><a class="logo" href="https://www.w3.org/"><img alt="W3C" height="48"
                    src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72">
            </a></p>
        <h1 id="title" class="title">Beacon</h1>
        <p id="w3c-state"><a href="https://www.w3.org/standards/types#CRD">W3C Candidate Recommendation Draft</a> <time
                class="dt-published" datetime="2022-08-03">03 August 2022</time></p>
        <details open="">
            <summary>More details about this document</summary>
            <dl>
                <dt>This version:</dt>
                <dd>
                    <a class="u-url"
                        href="https://www.w3.org/TR/2022/CRD-beacon-20220803/">https://www.w3.org/TR/2022/CRD-beacon-20220803/</a>
                </dd>
                <dt>Latest published version:</dt>
                <dd>
                    <a href="https://www.w3.org/TR/beacon/">https://www.w3.org/TR/beacon/</a>
                </dd>
                <dt>Latest editor's draft:</dt>
                <dd><a href="https://w3c.github.io/beacon/">https://w3c.github.io/beacon/</a></dd>
                <dt>History:</dt>
                <dd>
                    <a
                        href="https://www.w3.org/standards/history/beacon">https://www.w3.org/standards/history/beacon</a>
                </dd>
                <dd>
                    <a href="https://github.com/w3c/beacon/commits/">Commit history</a>
                </dd>
                <dt>Test suite:</dt>
                <dd><a href="https://w3c-test.org/beacon/">https://w3c-test.org/beacon/</a></dd>
                <dt>Implementation report:</dt>
                <dd>
                    <a href="https://w3c.github.io/test-results/beacon/">https://w3c.github.io/test-results/beacon/</a>
                </dd>



                <dt>Editors:</dt>
                <dd class="editor p-author h-card vcard" data-editor-id="56102">
                    <a class="ed_mailto u-email email p-name" href="mailto:igrigorik@gmail.com">Ilya Grigorik</a> (<span
                        class="p-org org h-org">Shopify</span>)
                </dd>
                <dd class="editor p-author h-card vcard" data-editor-id="48276">
                    <a class="ed_mailto u-email email p-name" href="mailto:alois.reitbauer@compuware.com">Alois
                        Reitbauer</a> (<span class="p-org org h-org">Compuware Corp.</span>)
                </dd>
                <dt>
                    Former editors:
                </dt>
                <dd class="editor p-author h-card vcard" data-editor-id="45188">
                    <a class="ed_mailto u-email email p-name" href="mailto:arvind@google.com">Arvind Jain</a> (<span
                        class="p-org org h-org">Google Inc.</span>) - Until <time datetime="2015-01-01">01 January
                        2015</time>
                </dd>
                <dd class="editor p-author h-card vcard" data-editor-id="44357">
                    <a class="ed_mailto u-email email p-name" href="mailto:jmann@microsoft.com">Jatinder Mann</a> (<span
                        class="p-org org h-org">Microsoft Corp.</span>) - Until <time datetime="2014-02-01">01 February
                        2014</time>
                </dd>

                <dt>Feedback:</dt>
                <dd>
                    <a href="https://github.com/w3c/beacon/">GitHub w3c/beacon</a>
                    (<a href="https://github.com/w3c/beacon/pulls/">pull requests</a>,
                    <a href="https://github.com/w3c/beacon/issues/new/choose">new issue</a>,
                    <a href="https://github.com/w3c/beacon/issues/">open issues</a>)
                </dd>
                <dd><a
                        href="mailto:public-web-perf@w3.org?subject=%5Bbeacon%5D%20YOUR%20TOPIC%20HERE">public-web-perf@w3.org</a>
                    with subject line <kbd>[beacon] <em>â€¦ message topic â€¦</em></kbd> (<a rel="discussion"
                        href="https://lists.w3.org/Archives/Public/public-web-perf">archives</a>)</dd>

                <dt>Implementation</dt>
                <dd>
                    <a href="http://caniuse.com/#feat=beacon">Can I use Beacon?</a>
                </dd>
            </dl>
        </details>


        <p class="copyright">
            <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a>
            Â©
            2022

            <a href="https://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>Â®</sup> (<a
                href="https://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>,
            <a href="https://www.ercim.eu/"><abbr
                    title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a
                href="https://www.keio.ac.jp/">Keio</a>,
            <a href="https://ev.buaa.edu.cn/">Beihang</a>). W3C
            <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>,
            <a href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and
            <a rel="license" href="https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document"
                title="W3C Software and Document Notice and License">permissive document license</a> rules apply.
        </p>
        <hr title="Separator for header">
    </div>
    <section id="abstract" class="introductory">
        <h2>Abstract</h2>
        <p>This specification defines an interface that web developers can use to
            schedule asynchronous and non-blocking delivery of data that minimizes
            resource contention with other time-critical operations, while ensuring
            that such requests are still processed and delivered to destination.</p>
    </section>
    <section id="sotd" class="introductory">
        <h2>Status of This Document</h2>
        <p><em>This section describes the status of this
                document at the time of its publication. A list of current <abbr
                    title="World Wide Web Consortium">W3C</abbr>
                publications and the latest revision of this technical report can be found
                in the <a href="https://www.w3.org/TR/"><abbr title="World Wide Web Consortium">W3C</abbr> technical
                    reports index</a> at
                https://www.w3.org/TR/.</em></p>
        <p>
            This document was published by the <a href="https://www.w3.org/groups/wg/webperf">Web Performance Working
                Group</a> as
            a Candidate Recommendation Draft using the
            <a href="https://www.w3.org/2021/Process-20211102/#recs-and-notes">Recommendation track</a>.
        </p>
        <p>Publication as a Candidate Recommendation does not
            imply endorsement by <abbr title="World Wide Web Consortium">W3C</abbr> and its Members. A Candidate
            Recommendation Draft integrates
            changes from the previous Candidate Recommendation that the Working Group
            intends to include in a subsequent Candidate Recommendation Snapshot.</p>
        <p>
            This is a draft document and may be updated, replaced or obsoleted by other
            documents at any time. It is inappropriate to cite this document as other
            than work in progress.

        </p>
        <p>

            This document was produced by a group
            operating under the
            <a href="https://www.w3.org/Consortium/Patent-Policy/"><abbr title="World Wide Web Consortium">W3C</abbr>
                Patent
                Policy</a>.


            <abbr title="World Wide Web Consortium">W3C</abbr> maintains a
            <a rel="disclosure" href="https://www.w3.org/groups/wg/webperf/ipr">public list of any patent
                disclosures</a>
            made in connection with the deliverables of
            the group; that page also includes
            instructions for disclosing a patent. An individual who has actual
            knowledge of a patent which the individual believes contains
            <a href="https://www.w3.org/Consortium/Patent-Policy/#def-essential">Essential Claim(s)</a>
            must disclose the information in accordance with
            <a href="https://www.w3.org/Consortium/Patent-Policy/#sec-Disclosure">section 6 of the <abbr
                    title="World Wide Web Consortium">W3C</abbr> Patent Policy</a>.

        </p>
        <p>
            This document is governed by the
            <a id="w3c_process_revision" href="https://www.w3.org/2021/Process-20211102/">2 November 2021 <abbr
                    title="World Wide Web Consortium">W3C</abbr> Process Document</a>.
        </p>
    </section>
    <nav id="toc">
        <h2 class="introductory" id="table-of-contents">Table of Contents</h2>
        <ol class="toc">
            <li class="tocline"><a class="tocxref" href="#abstract">Abstract</a></li>
            <li class="tocline"><a class="tocxref" href="#sotd">Status of This Document</a></li>
            <li class="tocline"><a class="tocxref" href="#introduction"><bdi class="secno">1. </bdi>Introduction</a>
            </li>
            <li class="tocline"><a class="tocxref" href="#conformance"><bdi class="secno">2. </bdi>Conformance</a></li>
            <li class="tocline"><a class="tocxref" href="#beacon"><bdi class="secno">3. </bdi>Beacon</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#sendbeacon-method"><bdi class="secno">3.1
                            </bdi><code><span data-export="" data-dfn-type="method" data-idl="operation" data-title="sendBeacon()" data-dfn-for="Navigator" data-type="boolean" data-lt="sendBeacon()|sendBeacon(url)|sendBeacon(url, data)" data-local-lt="Navigator.sendBeacon|Navigator.sendBeacon()|sendBeacon">sendBeacon()</span></code>
                            Method</a></li>
                    <li class="tocline"><a class="tocxref" href="#sec-processing-model"><bdi class="secno">3.2
                            </bdi>Processing Model</a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#privacy-and-security"><bdi class="secno">4. </bdi>Privacy and
                    Security</a></li>
            <li class="tocline"><a class="tocxref" href="#acknowledgments"><bdi class="secno">A.
                    </bdi>Acknowledgments</a></li>
            <li class="tocline"><a class="tocxref" href="#references"><bdi class="secno">B. </bdi>References</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#normative-references"><bdi class="secno">B.1
                            </bdi>Normative references</a></li>
                    <li class="tocline"><a class="tocxref" href="#informative-references"><bdi class="secno">B.2
                            </bdi>Informative references</a></li>
                </ol>
            </li>
        </ol>
    </nav>
    <section id="introduction" class="informative">
        <div class="header-wrapper">
            <h2 id="x1-introduction"><bdi class="secno">1. </bdi>Introduction</h2><a class="self-link"
                href="#introduction" aria-label="Permalink for Section 1."></a>
        </div>
        <p><em>This section is non-normative.</em></p>

        <p>Web applications often need to issue requests that report events, state
            updates, and analytics to one or more servers. Such requests typically do
            not require response processing on the client (e.g. result in 204, or 200
            HTTP response codes with an empty response body), and should not compete
            for network and compute resources with other high priority operations such
            as fetching critical resources, reacting to input, running animations, and
            so on. However, such one-way requests (beacons), are also responsible for
            delivering critical application and measurement data, forcing developers to
            use costly methods to ensure their delivery:</p>
        <ul>
            <li>Developers opt for immediate delivery of each beacon, instead of
                coalescing and deferring their delivery because this provides improved
                delivery rates. Deferring delivery may mean that the beacon request may
                not have sufficient time to complete successfully, which leads to loss of
                important application data.</li>
            <li>Developers opt for issuing blocking requests via synchronous
                XMLHttpRequest's, inserting no-op busy loops, or using other techniques
                that block the user agent from executing time-critical operations (e.g.
                click, unload, and other handlers) and hurt the user experience. The
                blocking behavior is used to provide improved delivery rate, as it
                prevents the user agent and the operating system from cancelling the
                request if the page is unloaded, suspended, or killed by the system.</li>
        </ul>
        <p>The mismatch between above delivery and processing requirements leaves
            most developers with a tough choice and widespread adoption of blocking
            techniques that hurt the user experience. This specification defines an
            interface that web developers can use to schedule asynchronous and
            non-blocking delivery of data that minimizes resource contention with other
            time-critical operations, while ensuring that such requests are still
            processed and delivered to destination:</p>
        <ul>
            <li>Beacon requests are prioritized to avoid competing with time-critical
                operations and higher priority network requests.</li>
            <li>Beacon requests may be efficiently coalesced by the user agent to
                optimize energy use on mobile devices.</li>
            <li>Beacon requests are guaranteed to be initiated before page is
                unloaded and are allowed to run to completion without requiring blocking
                requests or other techniques that block processing of user interactive
                events.</li>
        </ul>
        <p>The following example shows use of the <a href="#dom-navigator-sendbeacon" class="internalDFN"
                data-link-type="idl" id="ref-for-dom-navigator-sendbeacon-1"><code>sendBeacon()</code></a> method to
            deliver event, click, and analytics data:</p>
        <div class="example" id="example-1">
            <div class="marker">
                <a class="self-link" href="#example-1">Example<bdi> 1</bdi></a>
            </div>
            <pre class="highlight" aria-busy="false"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-comment">// emit non-blocking beacon to record client-side event</span>
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">reportEvent</span>(<span class="hljs-params">event</span>) </span>{
    <span class="hljs-keyword">var</span> data = <span class="hljs-built_in">JSON</span>.stringify({
      <span class="hljs-attr">event</span>: event,
      <span class="hljs-attr">time</span>: performance.now()
    });
    navigator.sendBeacon(<span class="hljs-string">'/collector'</span>, data);
  }

  <span class="hljs-comment">// emit non-blocking beacon with session analytics as the page</span>
  <span class="hljs-comment">// transitions to background state (Page Visibility API)</span>
  <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'visibilitychange'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">document</span>.visibilityState === <span class="hljs-string">'hidden'</span>) {
      <span class="hljs-keyword">var</span> sessionData = buildSessionReport();
      navigator.sendBeacon(<span class="hljs-string">'/collector'</span>, sessionData);
    }
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">'http://www.w3.org/'</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">'reportEvent(this)'</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"reportEvent('some event')"</span>&gt;</span>Click me<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></code></pre>
        </div>
        <div class="note" role="note" id="issue-container-generatedID">
            <div role="heading" class="note-title marker" id="h-note" aria-level="3"><span>Note</span></div>
            <p class="">Above example uses <a data-link-type="dfn" data-type="event"
                    href="https://html.spec.whatwg.org/multipage/indices.html#event-visibilitychange">visibilitychange</a>
                event defined in [<cite><a class="bibref" data-link-type="biblio" href="#bib-page-visibility-2"
                        title="Page Visibility Level 2">PAGE-VISIBILITY-2</a></cite>] to trigger delivery of session
                data.
                This event is the only event that is guaranteed to fire on mobile devices
                when the page transitions to background state (e.g. when user switches to a
                different application, goes to homescreen, etc), or is being unloaded.
                Developers should avoid relying on <a data-link-type="dfn" data-type="event"
                    href="https://html.spec.whatwg.org/multipage/indices.html#event-unload">unload</a> event because it
                will
                not fire whenever a page is in a background state (i.e.
                <a data-link-type="idl" data-type="attribute"
                    href="https://html.spec.whatwg.org/multipage/interaction.html#dom-document-visibilitystate"><code>visibilityState</code></a>
                equal to <a data-link-type="idl" data-type="attribute"
                    href="https://html.spec.whatwg.org/multipage/interaction.html#dom-document-hidden"><code>hidden</code></a>
                and the process is
                terminated by the mobile OS.
            </p>
        </div>
        <p>The requests initiated via the <a href="#dom-navigator-sendbeacon" class="internalDFN" data-link-type="idl"
                id="ref-for-dom-navigator-sendbeacon-2"><code>sendBeacon()</code></a> method do not block
            or compete with time-critical work, may be prioritized by the user agent to
            improve network efficiency, and eliminate the need to use blocking
            operations to ensure delivery of beacon data.</p>
        <p>What <a href="#dom-navigator-sendbeacon" class="internalDFN" data-link-type="idl"
                id="ref-for-dom-navigator-sendbeacon-3"><code>sendBeacon()</code></a> does not do and is not intended to
            solve:</p>
        <ul>
            <li>The <a href="#dom-navigator-sendbeacon" class="internalDFN" data-link-type="idl"
                    id="ref-for-dom-navigator-sendbeacon-4"><code>sendBeacon()</code></a> method does not provide
                special handling for
                offline storage or delivery. A beacon request is like any other request
                and may be combined with [<cite><a class="bibref" data-link-type="biblio" href="#bib-service-workers"
                        title="Service Workers 1">SERVICE-WORKERS</a></cite>] to provide offline
                functionality where necessary.
            </li>
            <li>The <a href="#dom-navigator-sendbeacon" class="internalDFN" data-link-type="idl"
                    id="ref-for-dom-navigator-sendbeacon-5"><code>sendBeacon()</code></a> method is not intended to
                provide background
                synchronization or transfer capabilities. The user agent restricts the
                maximum accepted payload size to ensure that beacon requests are able to
                complete quickly and in a timely manner.
            </li>
            <li>The <a href="#dom-navigator-sendbeacon" class="internalDFN" data-link-type="idl"
                    id="ref-for-dom-navigator-sendbeacon-6"><code>sendBeacon()</code></a> method does not provide
                ability to customize
                the request method, provide custom request headers, or change other
                <a href="#sec-processing-model">processing properties</a> of the request
                and response. Applications that require non-default settings for such
                requests should use the [<cite><a class="bibref" data-link-type="biblio" href="#bib-fetch"
                        title="Fetch Standard">FETCH</a></cite>] API with <a data-link-type="dfn" data-type="dfn"
                    href="https://fetch.spec.whatwg.org/#request-keepalive-flag">keepalive</a> set to
                <code>true</code>.
            </li>
        </ul>
    </section>
    <section id="conformance">
        <div class="header-wrapper">
            <h2 id="x2-conformance"><bdi class="secno">2. </bdi>Conformance</h2><a class="self-link" href="#conformance"
                aria-label="Permalink for Section 2."></a>
        </div>
        <p>As well as sections marked as non-normative, all authoring guidelines, diagrams, examples, and notes in this
            specification are non-normative. Everything else in this specification is normative.</p>
        <p>
            The key words <em class="rfc2119">MAY</em>, <em class="rfc2119">MUST</em>, <em class="rfc2119">SHOULD</em>,
            and <em class="rfc2119">SHOULD NOT</em> in this document
            are to be interpreted as described in
            <a href="https://datatracker.ietf.org/doc/html/bcp14">BCP 14</a>
            [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc2119"
                    title="Key words for use in RFCs to Indicate Requirement Levels">RFC2119</a></cite>] [<cite><a
                    class="bibref" data-link-type="biblio" href="#bib-rfc8174"
                    title="Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words">RFC8174</a></cite>]
            when, and only when, they appear in all capitals, as shown here.
        </p>
        <p>For readability, these words do not appear in all uppercase letters in
            this specification.</p>
        <p>Requirements phrased in the imperative as part of algorithms (such as
            "strip any leading space characters" or "return false and abort these
            steps") are to be interpreted with the meaning of the key word ("must",
            "should", "may", etc) used in introducing the algorithm.</p>
        <p>Some conformance requirements are phrased as requirements on attributes,
            methods or objects. Such requirements are to be interpreted as requirements
            on the user agent.</p>
        <p>Conformance requirements phrased as algorithms or specific steps may be
            implemented in any manner, so long as the end result is equivalent. (In
            particular, the algorithms defined in this specification are intended to be
            easy to follow, and not intended to be performant.)</p>
    </section>
    <section id="beacon">
        <div class="header-wrapper">
            <h2 id="x3-beacon"><bdi class="secno">3. </bdi>Beacon</h2><a class="self-link" href="#beacon"
                aria-label="Permalink for Section 3."></a>
        </div>

        <section data-dfn-for="Navigator" data-link-for="Navigator" id="sendbeacon-method">
            <div class="header-wrapper">
                <h3 id="x3-1-sendbeacon-method"><bdi class="secno">3.1
                    </bdi><code><dfn data-export="" data-dfn-type="method" id="dom-navigator-sendbeacon" data-idl="operation" data-title="sendBeacon()" data-dfn-for="Navigator" data-type="boolean" data-lt="sendBeacon()|sendBeacon(url)|sendBeacon(url, data)" data-local-lt="Navigator.sendBeacon|Navigator.sendBeacon()|sendBeacon" tabindex="0" aria-haspopup="dialog">sendBeacon()</dfn></code>
                    Method</h3><a class="self-link" href="#sendbeacon-method"
                    aria-label="Permalink for Section 3.1"></a>
            </div>

            <pre class="idl def" id="webidl-339285629"><span class="idlHeader"><a class="self-link" href="#webidl-339285629">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-navigator-partial-1" data-title="Navigator">partial interface <a data-idl="partial" data-link-type="interface" data-title="Navigator" class="idlID" data-dfn-for="Navigator" data-type="interface" href="https://html.spec.whatwg.org/multipage/system-state.html#navigator">Navigator</a> {<span data-idl="" class="idlMethod" id="idl-def-navigator-sendbeacon-url-data" data-title="sendBeacon" data-dfn-for="Navigator"><span class="idlType">
    <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean">boolean</a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-navigator-sendbeacon" id="ref-for-dom-navigator-sendbeacon-7"><code>sendBeacon</code></a>(<span class="idlType"><a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString">USVString</a></span> <span class="idlParamName">url</span>, optional<span class="idlType"> <a data-type="typedef" href="https://fetch.spec.whatwg.org/#bodyinit">BodyInit</a>?</span> <span class="idlParamName">data</span> = null);</span>
};</span></code></pre>
            <p>The <a href="#dom-navigator-sendbeacon" class="internalDFN" data-link-type="idl"
                    id="ref-for-dom-navigator-sendbeacon-8"><code>sendBeacon()</code></a> method transmits data provided
                by the
                <a href="#dfn-data" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-data-1"><code><code>data</code></code></a> parameter to the URL provided by the <a
                    href="#url-parameter" id="ref-for-url-parameter-1"><code>url</code></a> parameter:
            </p>
            <ul>
                <li>The user agent <em class="rfc2119">MUST</em> initiate a fetch with <a data-link-type="dfn"
                        data-type="dfn" href="https://fetch.spec.whatwg.org/#request-keepalive-flag">keepalive</a>
                    flag set, which restricts the amount of data that can be queued by such
                    requests to ensure that beacon requests are able to complete quickly and
                    in a timely manner.
                </li>
                <li>The user agent <em class="rfc2119">MUST</em> schedule immediate transmission of all beacon
                    requests when the document <a data-link-type="idl" data-type="attribute"
                        href="https://html.spec.whatwg.org/multipage/interaction.html#dom-document-visibilitystate"><code>visibilityState</code></a>
                    transitions to
                    <a data-link-type="idl" data-type="attribute"
                        href="https://html.spec.whatwg.org/multipage/interaction.html#dom-document-hidden"><code>hidden</code></a>,
                    and must allow all such requests to run to
                    completion without blocking other time-critical and high-priority work.
                </li>
                <li>The user agent <em class="rfc2119">SHOULD</em> schedule transmission of provided data to
                    minimize resource (CPU and network) contention with other time-critical
                    and high priority work.</li>
                <li>The user agent <em class="rfc2119">MAY</em> delay transmission of provided data to optimize
                    network and energy efficiency - e.g. deliver immediately if the network
                    is active, or wait until network interface is active. However, the user
                    agent <em class="rfc2119">SHOULD NOT</em> delay transmission indefinitely and ensure that
                    pending transmissions are periodically flushed even if there is no
                    other network activity.</li>
            </ul>
            <div class="note" role="note" id="issue-container-generatedID-0">
                <div role="heading" class="note-title marker" id="h-note-0" aria-level="4"><span>Note</span></div>
                <div class="">
                    Beacon API does not provide a response callback. The server is
                    encouraged to omit returning a response body for such requests (e.g.
                    respond with <code>204 No Content</code>).
                </div>
            </div>
            <div>
                <div class="header-wrapper">
                    <h3 id="parameters">Parameters</h3><a class="self-link" href="#parameters"
                        aria-label="Permalink for this Section"></a>
                </div>
                <div class="header-wrapper">
                    <h4 id="url"><dfn id="url-parameter" data-lt-nodefault="" data-lt="url parameter" tabindex="0"
                            aria-haspopup="dialog" data-dfn-type="dfn"><code>url</code></dfn></h4><a class="self-link"
                        href="#url" aria-label="Permalink for this Section"></a>
                </div>
                <p>The <a href="#url-parameter" id="ref-for-url-parameter-2"><code>url</code></a> parameter
                    indicates the URL where the data is to be transmitted.</p>
                <div class="header-wrapper">
                    <h4 id="data"><dfn id="dfn-data" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn"><code>data</code></dfn></h4><a class="self-link" href="#data"
                        aria-label="Permalink for this Section"></a>
                </div>
                <p>The <a href="#dfn-data" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-data-2"><code><code>data</code></code></a> parameter is the <a
                        data-link-type="idl" data-lt="BodyInit" data-type="typedef"
                        href="https://fetch.spec.whatwg.org/#bodyinit"><code>BodyInit</code></a> data
                    that is to be transmitted.</p>
            </div>
            <div>
                <div class="header-wrapper">
                    <h3 id="return-value">Return Value</h3><a class="self-link" href="#return-value"
                        aria-label="Permalink for this Section"></a>
                </div>
                <p>The <a href="#dom-navigator-sendbeacon" class="internalDFN" data-link-type="idl"
                        id="ref-for-dom-navigator-sendbeacon-9"><code>sendBeacon()</code></a> method returns true if the
                    user agent is
                    able to successfully queue the data for transfer. Otherwise it returns
                    false.</p>
                <div class="note" role="note" id="issue-container-generatedID-1">
                    <div role="heading" class="note-title marker" id="h-note-1" aria-level="4"><span>Note</span></div>
                    <p class="">The user agent imposes limits on the amount of data
                        that can be sent via this API: this helps ensure that such requests are
                        delivered successfully and with minimal impact on other user and
                        browser activity. If the amount of <var>data</var> to be queued exceeds
                        the user agent limit (as defined in <a
                            href="https://fetch.spec.whatwg.org/#concept-http-network-or-cache-fetch">HTTP-network-or-cache
                            fetch</a>), this method returns <code>false</code>; a return value of
                        <code>true</code> implies the browser has queued the data for transfer.
                        However, since the actual data transfer happens asynchronously, this
                        method does not provide any information whether the data transfer has
                        succeeded or not.
                    </p>
                </div>
            </div>
        </section>
        <section id="sec-processing-model">
            <div class="header-wrapper">
                <h3 id="x3-2-processing-model"><bdi class="secno">3.2 </bdi>Processing Model</h3><a class="self-link"
                    href="#sec-processing-model" aria-label="Permalink for Section 3.2"></a>
            </div>

            <p>On calling the <a href="#dom-navigator-sendbeacon" class="internalDFN" data-link-type="idl"
                    id="ref-for-dom-navigator-sendbeacon-10"><code>sendBeacon()</code></a> method with <var>url</var>
                and
                optional <var>data</var>, the following steps must be run:</p>
            <ol>
                <li>
                    <p>Set <var>base</var> to <a data-link-type="dfn" data-type="dfn"
                            href="https://webidl.spec.whatwg.org/#this">this</a>'s <a data-link-type="dfn"
                            data-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object">relevant
                            settings object</a>'s
                        <a data-link-type="dfn" data-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#api-base-url">API base URL</a>.
                    </p>
                </li>
                <li>
                    <p>Set <var>origin</var> to <a data-link-type="dfn" data-type="dfn"
                            href="https://webidl.spec.whatwg.org/#this">this</a>'s <a data-link-type="dfn"
                            data-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object">relevant
                            settings object</a>'s
                        <a data-link-type="dfn" data-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin">origin</a>.
                    </p>
                </li>
                <li>
                    <p>Set <var>parsedUrl</var> to the result of the <a data-type="dfn"
                            href="https://url.spec.whatwg.org/#concept-url-parser">URL parser</a>
                        steps with <var>url</var> and <var>base</var>. If the algorithm
                        returns an error, or if <var>parsedUrl</var>'s <a data-link-type="dfn" data-type="dfn"
                            href="https://url.spec.whatwg.org/#concept-url-scheme">scheme</a> is not
                        "http" or "https", <a data-link-type="dfn" data-type="dfn"
                            href="https://webidl.spec.whatwg.org/#dfn-throw">throw</a> a
                        "<code><a data-link-type="idl" data-lt="TypeError" data-type="exception" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror"><code>TypeError</code></a></code>"
                        exception and terminate these
                        steps.</p>
                </li>
                <li>Let <var>headerList</var> be an empty list.</li>
                <li>Let <var>corsMode</var> be "<code>no-cors</code>".</li>
                <li>
                    <p>If <var>data</var> is not <code>null</code>:</p>
                    <ol>
                        <li>Set <var>transmittedData</var> and <var>contentType</var> to the
                            result of <a data-link-type="dfn" data-lt="extract" data-type="dfn"
                                href="https://fetch.spec.whatwg.org/#concept-bodyinit-extract">extracting</a>
                            <var>data</var>'s
                            byte stream with the <var>keepalive flag</var> set.
                        </li>
                        <li>If the amount of data that can be queued to be sent by
                            <a data-link-type="dfn" data-type="dfn"
                                href="https://fetch.spec.whatwg.org/#request-keepalive-flag">keepalive</a> enabled
                            requests is exceeded by the size of
                            <var>transmittedData</var> (as defined in <a
                                href="https://fetch.spec.whatwg.org/#concept-http-network-or-cache-fetch">HTTP-network-or-cache
                                fetch</a>), set the return value to <code>false</code> and
                            terminate these steps.
                            <div class="note" role="note" id="issue-container-generatedID-2">
                                <div role="heading" class="note-title marker" id="h-note-2" aria-level="4">
                                    <span>Note</span>
                                </div>
                                <p class="">Requests initiated via the Beacon API automatically
                                    set the <a data-link-type="dfn" data-type="dfn"
                                        href="https://fetch.spec.whatwg.org/#request-keepalive-flag">keepalive</a> flag,
                                    and developers can similarly
                                    set the same flag manually when using the Fetch API. All requests
                                    with this flag set share the same in-flight quota restrictions
                                    that is enforced within the Fetch API.</p>
                            </div>
                        </li>
                        <li>If <var>contentType</var> is not null:
                            <ul>
                                <li>Set <var>corsMode</var> to "<code>cors</code>".</li>
                                <li>If <var>contentType</var> value is a <a data-type="dfn"
                                        href="https://fetch.spec.whatwg.org/#cors-safelisted-request-header">CORS-safelisted
                                        request-header</a> value for the <code>Content-Type</code>
                                    header, set <var>corsMode</var> to "<code>no-cors</code>".
                                </li>
                                <li>Append a <code>Content-Type</code> header with value
                                    <var>contentType</var> to <var>headerList</var>.
                                </li>
                            </ul>
                        </li>
                    </ol>
                </li>
                <li>Set the return value to <code>true</code>, return the
                    <a href="#dom-navigator-sendbeacon" class="internalDFN" data-link-type="idl"
                        id="ref-for-dom-navigator-sendbeacon-11"><code>sendBeacon()</code></a> call, and continue to run
                    the following steps in
                    parallel:
                    <ol>
                        <li>
                            <p>Let <var>req</var> be a new <a data-type="dfn"
                                    href="https://fetch.spec.whatwg.org/#concept-request">request</a>, initialized as
                                follows:</p>
                            <dl>
                                <dt>
                                    <a data-link-type="dfn" data-type="dfn"
                                        href="https://fetch.spec.whatwg.org/#concept-request-method">method</a>
                                </dt>
                                <dd><code>POST</code></dd>
                                <dt>
                                    <a data-link-type="dfn" data-type="dfn"
                                        href="https://fetch.spec.whatwg.org/#concept-request-client">client</a>
                                </dt>
                                <dd><a data-link-type="dfn" data-type="dfn"
                                        href="https://webidl.spec.whatwg.org/#this">this</a>'s <a data-link-type="dfn"
                                        data-type="dfn"
                                        href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object">relevant
                                        settings object</a></dd>
                                <dt>
                                    <a data-link-type="dfn" data-type="dfn"
                                        href="https://fetch.spec.whatwg.org/#concept-request-url">url</a>
                                </dt>
                                <dd><var>parsedUrl</var></dd>
                                <dt>
                                    <a data-link-type="dfn" data-type="dfn"
                                        href="https://fetch.spec.whatwg.org/#concept-request-header-list">header
                                        list</a>
                                </dt>
                                <dd><var>headerList</var></dd>
                                <dt>
                                    <a data-link-type="dfn" data-type="dfn"
                                        href="https://fetch.spec.whatwg.org/#concept-request-origin">origin</a>
                                </dt>
                                <dd><i>origin</i></dd>
                                <dt>
                                    <a data-link-type="dfn" data-type="dfn"
                                        href="https://fetch.spec.whatwg.org/#request-keepalive-flag">keepalive</a>
                                </dt>
                                <dd><code>true</code></dd>
                                <dt>
                                    <a data-link-type="dfn" data-type="dfn"
                                        href="https://fetch.spec.whatwg.org/#concept-request-body">body</a>
                                </dt>
                                <dd><var>transmittedData</var></dd>
                                <dt>
                                    <a data-link-type="dfn" data-type="dfn"
                                        href="https://fetch.spec.whatwg.org/#concept-request-mode">mode</a>
                                </dt>
                                <dd><var>corsMode</var></dd>
                                <dt>
                                    <a data-link-type="dfn" data-type="dfn"
                                        href="https://fetch.spec.whatwg.org/#concept-request-credentials-mode">credentials
                                        mode</a>
                                </dt>
                                <dd><i>include</i></dd>
                                <dt>
                                    <a data-link-type="dfn" data-type="dfn"
                                        href="https://fetch.spec.whatwg.org/#request-initiator-type">initiator type</a>
                                </dt>
                                <dd>"<code>beacon</code>"</dd>
                            </dl>
                        </li>
                        <li>
                            <a data-type="dfn" href="https://fetch.spec.whatwg.org/#concept-fetch">Fetch</a>
                            <var>req</var>.
                        </li>
                    </ol>
                </li>
            </ol>
        </section>
    </section>
    <section id="privacy-and-security">
        <div class="header-wrapper">
            <h2 id="x4-privacy-and-security"><bdi class="secno">4. </bdi>Privacy and Security</h2><a class="self-link"
                href="#privacy-and-security" aria-label="Permalink for Section 4."></a>
        </div>

        <p>The <a href="#dom-navigator-sendbeacon" class="internalDFN" data-link-type="idl"
                id="ref-for-dom-navigator-sendbeacon-12"><code>sendBeacon()</code></a> interface provides an
            asynchronous and
            non-blocking mechanism for delivery of data. This API can be used to:</p>
        <ul>
            <li>Report client-side events to the server. The delivery is prioritized
                and scheduled by the user agent such that it does not block other
                interactive work and makes efficient use of system resources.</li>
            <li>Report session data when the page transitions to background state or
                is being unloaded, without blocking the user agent.</li>
            <li>Other use cases that require delivery of small payloads and do not
                expect a response callback.</li>
        </ul>
        <p>The delivered data might contain potentially sensitive information, for
            example, data about a user's activity on a web page, to a server. While
            this can have privacy implications for the user, existing methods, such as
            scripted form-submit, image beacons, and XHR/fetch requests provide similar
            capabilities, but come with various and costly performance tradeoffs: the
            requests can be aborted by the user agent unless the developer blocks the
            user agent from processing other events (e.g. by invoking a synchronous
            request, or spinning in an empty loop), and the user agent is unable to
            prioritize and coalesce such requests to optimize use of system
            resources.</p>
        <p>A request initiated by <a href="#dom-navigator-sendbeacon" class="internalDFN" data-link-type="idl"
                id="ref-for-dom-navigator-sendbeacon-13"><code>sendBeacon()</code></a> is subject to following
            properties:</p>
        <ul>
            <li>If the request does not contain a payload, or the request
                <code>Content-Type</code> is a <a data-type="dfn"
                    href="https://fetch.spec.whatwg.org/#cors-safelisted-request-header">CORS-safelisted
                    request-header</a>,
                then the request mode is <code>no-cors</code>â€”similar to an image beacon or
                form-post respectively.
            </li>
            <li>Otherwise, a CORS preflight is made and the server needs to first
                allow such requests by returning the appropriate set of CORS headers:
                <a href="https://fetch.spec.whatwg.org/#http-access-control-allow-credentials">
                    <code>Access-Control-Allow-Credentials</code></a>,
                <a href="https://fetch.spec.whatwg.org/#http-access-control-allow-origin">
                    <code>Access-Control-Allow-Origin</code></a>,
                <a href="https://fetch.spec.whatwg.org/#http-access-control-allow-headers">
                    <code>Access-Control-Allow-Headers</code></a>.
            </li>
        </ul>
        <p>As such, from the security perspective, the Beacon API is subject to
            same security policies as the current methods in use by developers.
            Similarly, from the privacy perspective, the resulting requests are
            initiated immediately when the API is called, or upon a page visibility
            change, which restricts the exposed information (e.g. user's IP address) to
            existing lifecycle events accessible to the developers. However, user
            agents might consider alternative methods to surface such requests to
            provide transparency to users.</p>
        <p>Compared to the alternatives, the <a href="#dom-navigator-sendbeacon" class="internalDFN"
                data-link-type="idl" id="ref-for-dom-navigator-sendbeacon-14"><code>sendBeacon()</code></a> API does
            apply two
            restrictions: there is no callback method, and the payload size can be
            restricted by the user agent. Otherwise, the <a href="#dom-navigator-sendbeacon" class="internalDFN"
                data-link-type="idl" id="ref-for-dom-navigator-sendbeacon-15"><code>sendBeacon()</code></a> API is not
            subject to any additional restrictions. The user agent ought not skip or
            throttle processing of <a href="#dom-navigator-sendbeacon" class="internalDFN" data-link-type="idl"
                id="ref-for-dom-navigator-sendbeacon-16"><code>sendBeacon()</code></a> calls, as they can contain
            critical application state, events, and analytics data. Similarly, the user
            agent ought not disable <a href="#dom-navigator-sendbeacon" class="internalDFN" data-link-type="idl"
                id="ref-for-dom-navigator-sendbeacon-17"><code>sendBeacon()</code></a> when in "private browsing" or
            equivalent mode, both to avoid breaking the application and to avoid
            leaking that the user is in such mode.</p>
    </section>
    <section class="appendix" id="acknowledgments">
        <div class="header-wrapper">
            <h2 id="a-acknowledgments"><bdi class="secno">A. </bdi>Acknowledgments</h2><a class="self-link"
                href="#acknowledgments" aria-label="Permalink for Appendix A."></a>
        </div>

        <p>Thanks to Alois Reitbauer, Arvind Jain, Anne van Kesteren, Boris
            Zbarsky, Chase Douglas, Daniel Austin, Jatinder Mann, James Simonsen, Jason
            Weber, Jonas Sicking, Nick Doty, Philippe Le Hegaret, Todd Reifsteck, Tony
            Gentilcore, William Chan, and Yoav Weiss for their contributions to this
            work.</p>
    </section>


    <section id="references" class="appendix">
        <div class="header-wrapper">
            <h2 id="b-references"><bdi class="secno">B. </bdi>References</h2><a class="self-link" href="#references"
                aria-label="Permalink for Appendix B."></a>
        </div>
        <section id="normative-references">
            <div class="header-wrapper">
                <h3 id="b-1-normative-references"><bdi class="secno">B.1 </bdi>Normative references</h3><a
                    class="self-link" href="#normative-references" aria-label="Permalink for Appendix B.1"></a>
            </div>

            <dl class="bibliography">
                <dt id="bib-fetch">[fetch]</dt>
                <dd>
                    <a href="https://fetch.spec.whatwg.org/"><cite>Fetch Standard</cite></a>. Anne van Kesteren. WHATWG.
                    Living Standard. URL: <a href="https://fetch.spec.whatwg.org/">https://fetch.spec.whatwg.org/</a>
                </dd>
                <dt id="bib-html">[html]</dt>
                <dd>
                    <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML Standard</cite></a>. Anne van Kesteren;
                    Domenic Denicola; Ian Hickson; Philip JÃ¤genstedt; Simon Pieters. WHATWG. Living Standard. URL: <a
                        href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
                </dd>
                <dt id="bib-rfc2119">[RFC2119]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc2119"><cite>Key words for use in RFCs to Indicate
                            Requirement Levels</cite></a>. S. Bradner. IETF. March 1997. Best Current Practice. URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc2119">https://www.rfc-editor.org/rfc/rfc2119</a>
                </dd>
                <dt id="bib-rfc8174">[RFC8174]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc8174"><cite>Ambiguity of Uppercase vs Lowercase in RFC
                            2119 Key Words</cite></a>. B. Leiba. IETF. May 2017. Best Current Practice. URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc8174">https://www.rfc-editor.org/rfc/rfc8174</a>
                </dd>
                <dt id="bib-url">[url]</dt>
                <dd>
                    <a href="https://url.spec.whatwg.org/"><cite>URL Standard</cite></a>. Anne van Kesteren. WHATWG.
                    Living Standard. URL: <a href="https://url.spec.whatwg.org/">https://url.spec.whatwg.org/</a>
                </dd>
                <dt id="bib-webidl">[webidl]</dt>
                <dd>
                    <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL Standard</cite></a>. Edgar Chen; Timothy Gu.
                    WHATWG. Living Standard. URL: <a
                        href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
                </dd>
            </dl>
        </section>
        <section id="informative-references">
            <div class="header-wrapper">
                <h3 id="b-2-informative-references"><bdi class="secno">B.2 </bdi>Informative references</h3><a
                    class="self-link" href="#informative-references" aria-label="Permalink for Appendix B.2"></a>
            </div>

            <dl class="bibliography">
                <dt id="bib-page-visibility-2">[PAGE-VISIBILITY-2]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/page-visibility-2/"><cite>Page Visibility Level 2</cite></a>. Ilya
                    Grigorik; Marcos Caceres. W3C. 23 June 2022. W3C Candidate Recommendation. URL: <a
                        href="https://www.w3.org/TR/page-visibility-2/">https://www.w3.org/TR/page-visibility-2/</a>
                </dd>
                <dt id="bib-service-workers">[SERVICE-WORKERS]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/service-workers-1/"><cite>Service Workers 1</cite></a>. Alex Russell;
                    Jungkee Song; Jake Archibald; Marijn Kruisselbrink. W3C. 19 November 2019. W3C Candidate
                    Recommendation. URL: <a
                        href="https://www.w3.org/TR/service-workers-1/">https://www.w3.org/TR/service-workers-1/</a>
                </dd>
            </dl>
        </section>
    </section>
    <p role="navigation" id="back-to-top">
        <a href="#title"><abbr title="Back to Top">â†‘</abbr></a>
    </p>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-navigator-sendbeacon"
        aria-label="Links in this document to definition: sendBeacon()">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-navigator-sendbeacon"
                aria-label="Permalink for definition: sendBeacon(). Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block"
                title="Jump to IDL declaration" href="#webidl-339285629">IDL</a>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-navigator-sendbeacon-1" title="Â§ 1. Introduction">Â§ 1. Introduction</a> <a
                    href="#ref-for-dom-navigator-sendbeacon-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-navigator-sendbeacon-3" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-navigator-sendbeacon-4" title="Reference 4">(4)</a> <a
                    href="#ref-for-dom-navigator-sendbeacon-5" title="Reference 5">(5)</a> <a
                    href="#ref-for-dom-navigator-sendbeacon-6" title="Reference 6">(6)</a>
            </li>
            <li>
                <a href="#ref-for-dom-navigator-sendbeacon-7" title="Â§ 3.1 sendBeacon() Method">Â§ 3.1 sendBeacon()
                    Method</a> <a href="#ref-for-dom-navigator-sendbeacon-8" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-navigator-sendbeacon-9" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-navigator-sendbeacon-10" title="Â§ 3.2 Processing Model">Â§ 3.2 Processing Model</a>
                <a href="#ref-for-dom-navigator-sendbeacon-11" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-navigator-sendbeacon-12" title="Â§ 4. Privacy and Security">Â§ 4. Privacy and
                    Security</a> <a href="#ref-for-dom-navigator-sendbeacon-13" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-navigator-sendbeacon-14" title="Reference 3">(3)</a> <a
                    href="#ref-for-dom-navigator-sendbeacon-15" title="Reference 4">(4)</a> <a
                    href="#ref-for-dom-navigator-sendbeacon-16" title="Reference 5">(5)</a> <a
                    href="#ref-for-dom-navigator-sendbeacon-17" title="Reference 6">(6)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-url-parameter"
        aria-label="Links in this document to definition: url">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#url-parameter"
                aria-label="Permalink for definition: url. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-url-parameter-1" title="Â§ 3.1 sendBeacon() Method">Â§ 3.1 sendBeacon() Method</a> <a
                    href="#ref-for-url-parameter-2" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-data"
        aria-label="Links in this document to definition: data">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-data"
                aria-label="Permalink for definition: data. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-data-1" title="Â§ 3.1 sendBeacon() Method">Â§ 3.1 sendBeacon() Method</a> <a
                    href="#ref-for-dfn-data-2" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <script id="respec-dfn-panel">(() => {
            // @ts-check
            if (document.respec) {
                document.respec.ready.then(setupPanel);
            } else {
                setupPanel();
            }

            function setupPanel() {
                const listener = panelListener();
                document.body.addEventListener("keydown", listener);
                document.body.addEventListener("click", listener);
            }

            function panelListener() {
                /** @type {HTMLElement} */
                let panel = null;
                return event => {
                    const { target, type } = event;

                    if (!(target instanceof HTMLElement)) return;

                    // For keys, we only care about Enter key to activate the panel
                    // otherwise it's activated via a click.
                    if (type === "keydown" && event.key !== "Enter") return;

                    const action = deriveAction(event);

                    switch (action) {
                        case "show": {
                            hidePanel(panel);
                            /** @type {HTMLElement} */
                            const dfn = target.closest("dfn, .index-term");
                            panel = document.getElementById(`dfn-panel-for-${dfn.id}`);
                            const coords = deriveCoordinates(event);
                            displayPanel(dfn, panel, coords);
                            break;
                        }
                        case "dock": {
                            panel.style.left = null;
                            panel.style.top = null;
                            panel.classList.add("docked");
                            break;
                        }
                        case "hide": {
                            hidePanel(panel);
                            panel = null;
                            break;
                        }
                    }
                };
            }

            /**
             * @param {MouseEvent|KeyboardEvent} event
             */
            function deriveCoordinates(event) {
                const target = /** @type HTMLElement */ (event.target);

                // We prevent synthetic AT clicks from putting
                // the dialog in a weird place. The AT events sometimes
                // lack coordinates, so they have clientX/Y = 0
                const rect = target.getBoundingClientRect();
                if (
                    event instanceof MouseEvent &&
                    event.clientX >= rect.left &&
                    event.clientY >= rect.top
                ) {
                    // The event probably happened inside the bounding rect...
                    return { x: event.clientX, y: event.clientY };
                }

                // Offset to the middle of the element
                const x = rect.x + rect.width / 2;
                // Placed at the bottom of the element
                const y = rect.y + rect.height;
                return { x, y };
            }

            /**
             * @param {Event} event
             */
            function deriveAction(event) {
                const target = /** @type {HTMLElement} */ (event.target);
                const hitALink = !!target.closest("a");
                if (target.closest("dfn:not([data-cite]), .index-term")) {
                    return hitALink ? "none" : "show";
                }
                if (target.closest(".dfn-panel")) {
                    if (hitALink) {
                        return target.classList.contains("self-link") ? "hide" : "dock";
                    }
                    const panel = target.closest(".dfn-panel");
                    return panel.classList.contains("docked") ? "hide" : "none";
                }
                if (document.querySelector(".dfn-panel:not([hidden])")) {
                    return "hide";
                }
                return "none";
            }

            /**
             * @param {HTMLElement} dfn
             * @param {HTMLElement} panel
             * @param {{ x: number, y: number }} clickPosition
             */
            function displayPanel(dfn, panel, { x, y }) {
                panel.hidden = false;
                // distance (px) between edge of panel and the pointing triangle (caret)
                const MARGIN = 20;

                const dfnRects = dfn.getClientRects();
                // Find the `top` offset when the `dfn` can be spread across multiple lines
                let closestTop = 0;
                let minDiff = Infinity;
                for (const rect of dfnRects) {
                    const { top, bottom } = rect;
                    const diffFromClickY = Math.abs((top + bottom) / 2 - y);
                    if (diffFromClickY < minDiff) {
                        minDiff = diffFromClickY;
                        closestTop = top;
                    }
                }

                const top = window.scrollY + closestTop + dfnRects[0].height;
                const left = x - MARGIN;
                panel.style.left = `${left}px`;
                panel.style.top = `${top}px`;

                // Find if the panel is flowing out of the window
                const panelRect = panel.getBoundingClientRect();
                const SCREEN_WIDTH = Math.min(window.innerWidth, window.screen.width);
                if (panelRect.right > SCREEN_WIDTH) {
                    const newLeft = Math.max(MARGIN, x + MARGIN - panelRect.width);
                    const newCaretOffset = left - newLeft;
                    panel.style.left = `${newLeft}px`;
                    /** @type {HTMLElement} */
                    const caret = panel.querySelector(".caret");
                    caret.style.left = `${newCaretOffset}px`;
                }

                // As it's a dialog, we trap focus.
                // TODO: when <dialog> becomes a implemented, we should really
                // use that.
                trapFocus(panel, dfn);
            }

            /**
             * @param {HTMLElement} panel
             * @param {HTMLElement} dfn
             * @returns
             */
            function trapFocus(panel, dfn) {
                /** @type NodeListOf<HTMLAnchorElement> elements */
                const anchors = panel.querySelectorAll("a[href]");
                // No need to trap focus
                if (!anchors.length) return;

                // Move focus to first anchor element
                const first = anchors.item(0);
                first.focus();

                const trapListener = createTrapListener(anchors, panel, dfn);
                panel.addEventListener("keydown", trapListener);

                // Hiding the panel releases the trap
                const mo = new MutationObserver(records => {
                    const [record] = records;
                    const target = /** @type HTMLElement */ (record.target);
                    if (target.hidden) {
                        panel.removeEventListener("keydown", trapListener);
                        mo.disconnect();
                    }
                });
                mo.observe(panel, { attributes: true, attributeFilter: ["hidden"] });
            }

            /**
             *
             * @param {NodeListOf<HTMLAnchorElement>} anchors
             * @param {HTMLElement} panel
             * @param {HTMLElement} dfn
             * @returns
             */
            function createTrapListener(anchors, panel, dfn) {
                const lastIndex = anchors.length - 1;
                let currentIndex = 0;
                return event => {
                    switch (event.key) {
                        // Hitting "Tab" traps us in a nice loop around elements.
                        case "Tab": {
                            event.preventDefault();
                            currentIndex += event.shiftKey ? -1 : +1;
                            if (currentIndex < 0) {
                                currentIndex = lastIndex;
                            } else if (currentIndex > lastIndex) {
                                currentIndex = 0;
                            }
                            anchors.item(currentIndex).focus();
                            break;
                        }

                        // Hitting "Enter" on an anchor releases the trap.
                        case "Enter":
                            hidePanel(panel);
                            break;

                        // Hitting "Escape" returns focus to dfn.
                        case "Escape":
                            hidePanel(panel);
                            dfn.focus();
                            return;
                    }
                };
            }

            /** @param {HTMLElement} panel */
            function hidePanel(panel) {
                if (!panel) return;
                panel.hidden = true;
                panel.classList.remove("docked");
            }
        })()</script>
    <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
</body>

</html>