<!DOCTYPE html>
<html lang="zh-hans" dir="ltr">

<head>
    <meta charset="utf-8">
    <!-- <meta name="generator" content="ReSpec 35.3.1"> -->
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <style>
        span.example-title {
            text-transform: none
        }

        :is(aside, div).example,
        div.illegal-example {
            padding: .5em;
            margin: 1em 0;
            position: relative;
            clear: both
        }

        div.illegal-example {
            color: red
        }

        div.illegal-example p {
            color: #000
        }

        aside.example div.example {
            border-left-width: .1em;
            border-color: #999;
            background: #fff
        }
    </style>
    <style>
        .issue-label {
            text-transform: initial
        }

        .warning>p:first-child {
            margin-top: 0
        }

        .warning {
            padding: .5em;
            border-left-width: .5em;
            border-left-style: solid
        }

        span.warning {
            padding: .1em .5em .15em
        }

        .issue.closed span.issue-number {
            text-decoration: line-through
        }

        .issue.closed span.issue-number::after {
            content: " (Closed)";
            font-size: smaller
        }

        .warning {
            border-color: #f11;
            border-color: var(--warning-border, #f11);
            border-width: .2em;
            border-style: solid;
            background: #fbe9e9;
            background: var(--warning-bg, #fbe9e9);
            color: #000;
            color: var(--text, #000)
        }

        .warning-title:before {
            content: "⚠";
            font-size: 1.3em;
            float: left;
            padding-right: .3em;
            margin-top: -.3em
        }

        li.task-list-item {
            list-style: none
        }

        input.task-list-item-checkbox {
            margin: 0 .35em .25em -1.6em;
            vertical-align: middle
        }

        .issue a.respec-gh-label {
            padding: 5px;
            margin: 0 2px 0 2px;
            font-size: 10px;
            text-transform: none;
            text-decoration: none;
            font-weight: 700;
            border-radius: 4px;
            position: relative;
            bottom: 2px;
            border: none;
            display: inline-block
        }
    </style>
    <style>
        dfn {
            cursor: pointer
        }

        .dfn-panel {
            position: absolute;
            z-index: 35;
            min-width: 300px;
            max-width: 500px;
            padding: .5em .75em;
            margin-top: .6em;
            font-family: "Helvetica Neue", sans-serif;
            font-size: small;
            background: #fff;
            background: var(--indextable-hover-bg, #fff);
            color: #000;
            color: var(--text, #000);
            box-shadow: 0 1em 3em -.4em rgba(0, 0, 0, .3), 0 0 1px 1px rgba(0, 0, 0, .05);
            box-shadow: 0 1em 3em -.4em var(--tocsidebar-shadow, rgba(0, 0, 0, .3)), 0 0 1px 1px var(--tocsidebar-shadow, rgba(0, 0, 0, .05));
            border-radius: 2px
        }

        .dfn-panel:not(.docked)>.caret {
            position: absolute;
            top: -9px
        }

        .dfn-panel:not(.docked)>.caret::after,
        .dfn-panel:not(.docked)>.caret::before {
            content: "";
            position: absolute;
            border: 10px solid transparent;
            border-top: 0;
            border-bottom: 10px solid #fff;
            border-bottom-color: var(--indextable-hover-bg, #fff);
            top: 0
        }

        .dfn-panel:not(.docked)>.caret::before {
            border-bottom: 9px solid #a2a9b1;
            border-bottom-color: var(--indextable-hover-bg, #a2a9b1)
        }

        .dfn-panel * {
            margin: 0
        }

        .dfn-panel b {
            display: block;
            color: #000;
            color: var(--text, #000);
            margin-top: .25em
        }

        .dfn-panel ul a[href] {
            color: #333;
            color: var(--text, #333)
        }

        .dfn-panel>div {
            display: flex
        }

        .dfn-panel a.self-link {
            font-weight: 700;
            margin-right: auto
        }

        .dfn-panel .marker {
            padding: .1em;
            margin-left: .5em;
            border-radius: .2em;
            text-align: center;
            white-space: nowrap;
            font-size: 90%;
            color: #040b1c
        }

        .dfn-panel .marker.dfn-exported {
            background: #d1edfd;
            box-shadow: 0 0 0 .125em #1ca5f940
        }

        .dfn-panel .marker.idl-block {
            background: #8ccbf2;
            box-shadow: 0 0 0 .125em #0670b161
        }

        .dfn-panel a:not(:hover) {
            text-decoration: none !important;
            border-bottom: none !important
        }

        .dfn-panel a[href]:hover {
            border-bottom-width: 1px
        }

        .dfn-panel ul {
            padding: 0
        }

        .dfn-panel li {
            margin-left: 1em
        }

        .dfn-panel.docked {
            position: fixed;
            left: .5em;
            top: unset;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - .75em * 2 - .5em - .2em * 2);
            max-height: 30vh;
            overflow: auto
        }
    </style>

    <title>网络错误日志记录</title>


    <meta name="color-scheme" content="light dark">



    <style>
        .reportTypeGroup {
            margin-top: 1em;
            padding-top: 1ex;
            border-top: 1px solid black;
        }
    </style>

    <style id="respec-mainstyle">
        @keyframes pop {
            0% {
                transform: scale(1, 1)
            }

            25% {
                transform: scale(1.25, 1.25);
                opacity: .75
            }

            100% {
                transform: scale(1, 1)
            }
        }

        a.internalDFN {
            color: inherit;
            border-bottom: 1px solid #99c;
            text-decoration: none
        }

        a.externalDFN {
            color: inherit;
            border-bottom: 1px dotted #ccc;
            text-decoration: none
        }

        a.bibref {
            text-decoration: none
        }

        .respec-offending-element:target {
            animation: pop .25s ease-in-out 0s 1
        }

        .respec-offending-element,
        a[href].respec-offending-element {
            text-decoration: red wavy underline
        }

        @supports not (text-decoration:red wavy underline) {
            .respec-offending-element:not(pre) {
                display: inline-block
            }

            .respec-offending-element {
                background: url(data:image/gif;base64,R0lGODdhBAADAPEAANv///8AAP///wAAACwAAAAABAADAEACBZQjmIAFADs=) bottom repeat-x
            }
        }

        #references :target {
            background: #eaf3ff;
            animation: pop .4s ease-in-out 0s 1
        }

        cite .bibref {
            font-style: italic
        }

        a[href].orcid {
            padding-left: 4px;
            padding-right: 4px
        }

        a[href].orcid>svg {
            margin-bottom: -2px
        }

        ol.tof,
        ul.tof {
            list-style: none outside none
        }

        .caption {
            margin-top: .5em;
            font-style: italic
        }

        #issue-summary>ul {
            column-count: 2
        }

        #issue-summary li {
            list-style: none;
            display: inline-block
        }

        details.respec-tests-details {
            margin-left: 1em;
            display: inline-block;
            vertical-align: top
        }

        details.respec-tests-details>* {
            padding-right: 2em
        }

        details.respec-tests-details[open] {
            z-index: 999999;
            position: absolute;
            border: thin solid #cad3e2;
            border-radius: .3em;
            background-color: #fff;
            padding-bottom: .5em
        }

        details.respec-tests-details[open]>summary {
            border-bottom: thin solid #cad3e2;
            padding-left: 1em;
            margin-bottom: 1em;
            line-height: 2em
        }

        details.respec-tests-details>ul {
            width: 100%;
            margin-top: -.3em
        }

        details.respec-tests-details>li {
            padding-left: 1em
        }

        .self-link:hover {
            opacity: 1;
            text-decoration: none;
            background-color: transparent
        }

        aside.example .marker>a.self-link {
            color: inherit
        }

        .header-wrapper {
            display: flex;
            align-items: baseline
        }

        :is(h2, h3, h4, h5, h6):not(#toc>h2, #abstract>h2, #sotd>h2, .head>h2) {
            position: relative;
            left: -.5em
        }

        :is(h2, h3, h4, h5, h6):not(#toch2)+a.self-link {
            color: inherit;
            order: -1;
            position: relative;
            left: -1.1em;
            font-size: 1rem;
            opacity: .5
        }

        :is(h2, h3, h4, h5, h6)+a.self-link::before {
            content: "§";
            text-decoration: none;
            color: var(--heading-text)
        }

        :is(h2, h3)+a.self-link {
            top: -.2em
        }

        :is(h4, h5, h6)+a.self-link::before {
            color: #000
        }

        @media (max-width:767px) {
            dd {
                margin-left: 0
            }
        }

        @media print {
            .removeOnSave {
                display: none
            }
        }
    </style>
    <style>
        ul.index {
            columns: 30ch;
            column-gap: 1.5em
        }

        ul.index li {
            list-style: inherit
        }

        ul.index li span {
            color: inherit;
            cursor: pointer;
            white-space: normal
        }

        #index-defined-here ul.index li {
            font-size: .9rem
        }

        ul.index code {
            color: inherit
        }

        #index-defined-here .print-only {
            display: none
        }

        @media print {
            #index-defined-here .print-only {
                display: initial
            }
        }
    </style>
    <meta name="revision" content="5e200d5445c3907701a513ace40aa19352743d47">
    <meta name="description"
        content="This document defines a mechanism that enables developers to declare a network error reporting policy for a web application. A user agent can use this policy to report encountered network errors that prevented it from successfully fetching requested resources.">
    <link rel="canonical" href="https://www.w3.org/TR/network-error-logging/">
    <style>
        .hljs {
            --base: #fafafa;
            --mono-1: #383a42;
            --mono-2: #686b77;
            --mono-3: #717277;
            --hue-1: #0b76c5;
            --hue-2: #336ae3;
            --hue-3: #a626a4;
            --hue-4: #42803c;
            --hue-5: #ca4706;
            --hue-5-2: #c91243;
            --hue-6: #986801;
            --hue-6-2: #9a6a01
        }

        @media (prefers-color-scheme:dark) {
            .hljs {
                --base: #282c34;
                --mono-1: #abb2bf;
                --mono-2: #818896;
                --mono-3: #5c6370;
                --hue-1: #56b6c2;
                --hue-2: #61aeee;
                --hue-3: #c678dd;
                --hue-4: #98c379;
                --hue-5: #e06c75;
                --hue-5-2: #be5046;
                --hue-6: #d19a66;
                --hue-6-2: #e6c07b
            }
        }

        .hljs {
            display: block;
            overflow-x: auto;
            padding: .5em;
            color: #383a42;
            color: var(--mono-1, #383a42);
            background: #fafafa;
            background: var(--base, #fafafa)
        }

        .hljs-comment,
        .hljs-quote {
            color: #717277;
            color: var(--mono-3, #717277);
            font-style: italic
        }

        .hljs-doctag,
        .hljs-formula,
        .hljs-keyword {
            color: #a626a4;
            color: var(--hue-3, #a626a4)
        }

        .hljs-deletion,
        .hljs-name,
        .hljs-section,
        .hljs-selector-tag,
        .hljs-subst {
            color: #ca4706;
            color: var(--hue-5, #ca4706);
            font-weight: 700
        }

        .hljs-literal {
            color: #0b76c5;
            color: var(--hue-1, #0b76c5)
        }

        .hljs-addition,
        .hljs-attribute,
        .hljs-meta-string,
        .hljs-regexp,
        .hljs-string {
            color: #42803c;
            color: var(--hue-4, #42803c)
        }

        .hljs-built_in,
        .hljs-class .hljs-title {
            color: #9a6a01;
            color: var(--hue-6-2, #9a6a01)
        }

        .hljs-attr,
        .hljs-number,
        .hljs-selector-attr,
        .hljs-selector-class,
        .hljs-selector-pseudo,
        .hljs-template-variable,
        .hljs-type,
        .hljs-variable {
            color: #986801;
            color: var(--hue-6, #986801)
        }

        .hljs-bullet,
        .hljs-link,
        .hljs-meta,
        .hljs-selector-id,
        .hljs-symbol,
        .hljs-title {
            color: #336ae3;
            color: var(--hue-2, #336ae3)
        }

        .hljs-emphasis {
            font-style: italic
        }

        .hljs-strong {
            font-weight: 700
        }

        .hljs-link {
            text-decoration: underline
        }
    </style>
    <style>
        var:hover {
            text-decoration: underline;
            cursor: pointer
        }

        var.respec-hl {
            color: var(--color, #000);
            background-color: var(--bg-color);
            box-shadow: 0 0 0 2px var(--bg-color)
        }

        @media (prefers-color-scheme:dark) {
            var.respec-hl {
                filter: saturate(.9) brightness(.9)
            }
        }

        var.respec-hl-c1 {
            --bg-color: #f4d200
        }

        var.respec-hl-c2 {
            --bg-color: #ff87a2
        }

        var.respec-hl-c3 {
            --bg-color: #96e885
        }

        var.respec-hl-c4 {
            --bg-color: #3eeed2
        }

        var.respec-hl-c5 {
            --bg-color: #eacfb6
        }

        var.respec-hl-c6 {
            --bg-color: #82ddff
        }

        var.respec-hl-c7 {
            --bg-color: #ffbcf2
        }

        @media print {
            var.respec-hl {
                background: 0 0;
                color: #000;
                box-shadow: unset
            }
        }
    </style>
    <style>
        var {
            position: relative;
            cursor: pointer
        }

        var[data-type]::after,
        var[data-type]::before {
            position: absolute;
            left: 50%;
            top: -6px;
            opacity: 0;
            transition: opacity .4s;
            pointer-events: none
        }

        var[data-type]::before {
            content: "";
            transform: translateX(-50%);
            border-width: 4px 6px 0 6px;
            border-style: solid;
            border-color: transparent;
            border-top-color: #222
        }

        var[data-type]::after {
            content: attr(data-type);
            transform: translateX(-50%) translateY(-100%);
            background: #222;
            text-align: center;
            font-family: "Dank Mono", "Fira Code", monospace;
            font-style: normal;
            padding: 6px;
            border-radius: 3px;
            color: #daca88;
            text-indent: 0;
            font-weight: 400
        }

        var[data-type]:hover::after,
        var[data-type]:hover::before {
            opacity: 1
        }
    </style>
    <style>
        :root {
            --assertion-border: #aaa;
            --assertion-bg: #eee;
            --assertion-text: black
        }

        .assert {
            border-left: .5em solid #aaa;
            padding: .3em;
            border-color: #aaa;
            border-color: var(--assertion-border);
            background: #eee;
            background: var(--assertion-bg);
            color: #000;
            color: var(--assertion-text)
        }

        @media (prefers-color-scheme:dark) {
            :root {
                --assertion-border: #444;
                --assertion-bg: var(--borderedblock-bg);
                --assertion-text: var(--text)
            }
        }
    </style>
    <script id="initialUserConfig" type="application/json">{
  "group": "webperf",
  "github": "https://github.com/w3c/network-error-logging/",
  "shortname": "network-error-logging",
  "specStatus": "WD",
  "xref": [
    "network-reporting",
    "fetch",
    "hr-time",
    "html",
    "infra",
    "mixed-content",
    "referrer-policy",
    "reporting",
    "resource-timing",
    "secure-contexts",
    "url"
  ],
  "editors": [
    {
      "name": "Douglas Creager",
      "url": "https://dcreager.net/",
      "company": "GitHub",
      "w3cid": "103120"
    },
    {
      "name": "Ian Clelland",
      "company": "Google",
      "w3cid": "76841"
    }
  ],
  "formerEditors": [
    {
      "name": "Ilya Grigorik",
      "url": "https://www.igvita.com/",
      "company": "Google",
      "retiredDate": "2019-08-01"
    },
    {
      "name": "Julia Tuttle",
      "company": "Google",
      "retiredDate": "2017-09-01"
    },
    {
      "name": "Arvind Jain",
      "company": "Google",
      "retiredDate": "2015-01-01"
    },
    {
      "name": "Alois Reitbauer",
      "company": "Compuware Corp.",
      "retiredDate": "2014-10-01"
    },
    {
      "name": "Jatinder Mann",
      "company": "Microsoft",
      "retiredDate": "2014-02-01"
    }
  ],
  "gitRevision": "5e200d5445c3907701a513ace40aa19352743d47",
  "publishDate": "2025-05-05",
  "publishISODate": "2025-05-05T00:00:00.000Z",
  "generatedSubtitle": "W3C Working Draft 05 May 2025"
}</script>
    <link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2021/W3C-WD">
    <link rel="stylesheet" media="(prefers-color-scheme: dark)" href="https://www.w3.org/StyleSheets/TR/2021/dark.css">
</head>

<body class="h-entry"
    data-cite="network-reporting fetch hr-time html infra mixed-content referrer-policy reporting resource-timing secure-contexts url">
    <div class="head">
        <p class="logos"><a class="logo" href="https://www.w3.org/"><img  alt="W3C" height="48"
                    src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72">
            </a></p>
        <h1 id="title" class="title">网络错误日志记录</h1>
        <p id="w3c-state"><a href="https://www.w3.org/standards/types#WD">W3C 规范草案</a> <time class="dt-published"
                datetime="2025-05-05">2025年5月5日</time></p>
        <details open="">
            <summary>关于本文件的更多信息</summary>
            <dl>
                <dt>本版本：</dt>
                <dd>
                    <a class="u-url"
                        href="https://www.w3.org/TR/2025/WD-network-error-logging-20250505/">https://www.w3.org/TR/2025/WD-network-error-logging-20250505/</a>
                </dd>
                <dt>最新发布版本：</dt>
                <dd>
                    <a
                        href="https://www.w3.org/TR/network-error-logging/">https://www.w3.org/TR/network-error-logging/</a>
                </dd>
                <dt>最新编辑草稿：</dt>
                <dd><a
                        href="https://w3c.github.io/network-error-logging/">https://w3c.github.io/network-error-logging/</a>
                </dd>
                <dt>历史记录：</dt>
                <dd>
                    <a
                        href="https://www.w3.org/standards/history/network-error-logging/">https://www.w3.org/standards/history/network-error-logging/</a>
                </dd>
                <dd>
                    <a href="https://github.com/w3c/network-error-logging/commits/">提交历史</a>
                </dd>
                <dt>编辑：</dt>
                <dd class="editor p-author h-card vcard" data-editor-id="103120">
                    <a class="u-url url p-name fn" href="https://dcreager.net/">Douglas Creager</a> (<span
                        class="p-org org h-org">GitHub</span>)
                </dd>
                <dd class="editor p-author h-card vcard" data-editor-id="76841">
                    <span class="p-name fn">Ian Clelland</span> (<span class="p-org org h-org">Google</span>)
                </dd>
                <dt>
                    历任编辑：
                </dt>
                <dd class="editor p-author h-card vcard">
                    <a class="u-url url p-name fn" href="https://www.igvita.com/">Ilya Grigorik</a> (<span
                        class="p-org org h-org">Google</span>) - 截止至 <time datetime="2019-08-01">2019年8月1日</time>
                </dd>
                <dd class="editor p-author h-card vcard">
                    <span class="p-name fn">Julia Tuttle</span> (<span class="p-org org h-org">Google</span>) - 截止至
                    <time datetime="2017-09-01">2017年9月1日</time>
                </dd>
                <dd class="editor p-author h-card vcard">
                    <span class="p-name fn">Arvind Jain</span> (<span class="p-org org h-org">Google</span>) - 截止至
                    <time datetime="2015-01-01">2015年1月1日</time>
                </dd>
                <dd class="editor p-author h-card vcard">
                    <span class="p-name fn">Alois Reitbauer</span> (<span class="p-org org h-org">Compuware
                        Corp.</span>) - 截止至 <time datetime="2014-10-01">2014年10月1日</time>
                </dd>
                <dd class="editor p-author h-card vcard">
                    <span class="p-name fn">Jatinder Mann</span> (<span class="p-org org h-org">Microsoft</span>) -
                    截止至 <time datetime="2014-02-01">2014年2月1日</time>
                </dd>
                <dt>反馈：</dt>
                <dd>
                    <a href="https://github.com/w3c/network-error-logging/">GitHub w3c/network-error-logging</a>
                    (<a href="https://github.com/w3c/network-error-logging/pulls/">拉取请求</a>,
                    <a href="https://github.com/w3c/network-error-logging/issues/new/choose">新建问题</a>,
                    <a href="https://github.com/w3c/network-error-logging/issues/">所有问题</a>)
                </dd>
            </dl>
        </details>


        <p class="copyright">
            <a href="https://www.w3.org/policies/#copyright">Copyright</a>
            ©
            2025

            <a href="https://www.w3.org/">World Wide Web Consortium</a>.
            <abbr title="World Wide Web Consortium">W3C</abbr><sup>®</sup>
            <a href="https://www.w3.org/policies/#Legal_Disclaimer">liability</a>,
            <a href="https://www.w3.org/policies/#W3C_Trademarks">trademark</a> and
            <a rel="license" href="https://www.w3.org/copyright/software-license-2023/"
                title="W3C Software and Document Notice and License">permissive document license</a> rules apply.
        </p>
        <hr title="Separator for header">
    </div>
    <section id="abstract" class="introductory">
        <h2>摘要</h2>
        <p>本文档定义了一种机制，使开发者能够为网页应用声明网络错误报告策略。用户代理可以利用该策略报告其在获取所请求资源时遇到的网络错误，这些错误阻止了请求的成功获取。</p>
    </section>

    <section id="sotd" class="introductory">
        <h2>本文档状态</h2>
        <p><em>本节描述了本文档在发布时的状态。当前 <abbr title="World Wide Web Consortium">W3C</abbr>
                的出版物列表和本技术报告的最新修订版可在
                <a href="https://www.w3.org/TR/"><abbr title="World Wide Web Consortium">W3C</abbr> 标准与草案索引</a>中找到，
                地址：https://www.w3.org/TR/。</em></p>
        <p>
            本文档由 <a href="https://www.w3.org/groups/wg/webperf">Web 性能工作组</a> 作为
            <a href="https://www.w3.org/policies/process/20231103/#recs-and-notes">推荐标准流程</a>
            的工作草案出版。
        </p>
        <p>作为工作草案发布并不代表 <abbr title="World Wide Web Consortium">W3C</abbr> 及其成员的认可。</p>
        <p>
            本文为草案文档，可能随时被更新、替换或废弃。引用本文档应仅作为工作进展，不应作其他用途。

        </p>
        <p>

            本文档由一在
            <a href="https://www.w3.org/policies/patent-policy/"><abbr title="World Wide Web Consortium">W3C</abbr>
                专利政策</a>
            下运作的小组产生。

            <abbr title="World Wide Web Consortium">W3C</abbr> 维护了
            <a rel="disclosure" href="https://www.w3.org/groups/wg/webperf/ipr">与本小组成果相关的专利公开的公开列表</a>，
            该页面同时还包含专利披露说明。若个人实际知晓某专利，且认为其包含
            <a href="https://www.w3.org/policies/patent-policy/#def-essential">必要声明</a>，
            必须依照
            <a href="https://www.w3.org/policies/patent-policy/#sec-Disclosure">W3C 专利政策第6节</a>披露此信息。

        </p>
        <p>
            本文档受
            <a id="w3c_process_revision" href="https://www.w3.org/policies/process/20231103/">2023年11月3日 <abbr
                    title="World Wide Web Consortium">W3C</abbr> 流程文件</a>管理。
        </p>
    </section>
    <nav id="toc">
        <h2 class="introductory" id="table-of-contents">目录</h2>
        <ol class="toc">
            <li class="tocline"><a class="tocxref" href="#abstract">摘要</a></li>
            <li class="tocline"><a class="tocxref" href="#sotd">本文档状态</a></li>
            <li class="tocline"><a class="tocxref" href="#introduction"><bdi class="secno">1. </bdi>引言</a>
            </li>
            <li class="tocline"><a class="tocxref" href="#conformance"><bdi class="secno">2. </bdi>一致性</a></li>
            <li class="tocline"><a class="tocxref" href="#concepts"><bdi class="secno">3. </bdi>概念</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#network-requests"><bdi class="secno">3.1
                            </bdi>网络请求</a></li>
                    <li class="tocline"><a class="tocxref" href="#network-errors"><bdi class="secno">3.2 </bdi>网络错误</a>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#network-error-reports"><bdi class="secno">3.3
                            </bdi>网络错误报告</a></li>
                    <li class="tocline"><a class="tocxref" href="#nel-policies"><bdi class="secno">3.4 </bdi>NEL 策略</a>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#sampling-rates"><bdi class="secno">3.5 </bdi>采样率</a>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#policy-cache"><bdi class="secno">3.6 </bdi>策略缓存</a>
                    </li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#policy-delivery"><bdi class="secno">4. </bdi>策略传递</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#nel-response-header"><bdi class="secno">4.1
                            </bdi><code>NEL</code> 响应头</a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#the-report_to-member"><bdi class="secno">4.1.1
                                    </bdi><code>report_to</code> 字段</a></li>
                            <li class="tocline"><a class="tocxref" href="#the-max_age-member"><bdi class="secno">4.1.2
                                    </bdi><code>max_age</code> 字段</a></li>
                            <li class="tocline"><a class="tocxref" href="#the-include_subdomains-member"><bdi
                                        class="secno">4.1.3 </bdi><code>include_subdomains</code> 字段</a></li>
                            <li class="tocline"><a class="tocxref" href="#the-success_fraction-member"><bdi
                                        class="secno">4.1.4 </bdi><code>success_fraction</code> 字段</a></li>
                            <li class="tocline"><a class="tocxref" href="#the-failure_fraction-member"><bdi
                                        class="secno">4.1.5 </bdi><code>failure_fraction</code> 字段</a></li>
                            <li class="tocline"><a class="tocxref" href="#the-request_headers-member"><bdi
                                        class="secno">4.1.6 </bdi><code>request_headers</code> 字段</a></li>
                            <li class="tocline"><a class="tocxref" href="#the-response_headers-member"><bdi
                                        class="secno">4.1.7 </bdi><code>response_headers</code> 字段</a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#process-policy-headers"><bdi class="secno">4.2
                            </bdi>处理策略头</a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#report-delivery"><bdi class="secno">5. </bdi>报告传递</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#choose-a-policy-for-a-request"><bdi class="secno">5.1
                            </bdi>为请求选择策略</a></li>
                    <li class="tocline"><a class="tocxref" href="#extract-request-headers"><bdi class="secno">5.2
                            </bdi>提取请求头</a></li>
                    <li class="tocline"><a class="tocxref" href="#extract-response-headers"><bdi class="secno">5.3
                            </bdi>提取响应头</a></li>
                    <li class="tocline"><a class="tocxref" href="#generate-a-network-error-report"><bdi
                                class="secno">5.4 </bdi>生成网络错误报告</a></li>
                    <li class="tocline"><a class="tocxref" href="#deliver-a-network-report"><bdi class="secno">5.5
                            </bdi>传递网络报告</a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#predefined-network-error-types"><bdi class="secno">6.
                    </bdi>预定义网络错误类型</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#dns-resolution-errors"><bdi class="secno">6.1
                            </bdi>DNS 解析错误</a></li>
                    <li class="tocline"><a class="tocxref" href="#secure-connection-establishment-errors"><bdi
                                class="secno">6.2 </bdi>安全连接建立错误</a></li>
                    <li class="tocline"><a class="tocxref" href="#transmission-of-request-and-response-errors"><bdi
                                class="secno">6.3 </bdi>请求和响应传输错误</a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#examples"><bdi class="secno">7. </bdi>示例</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#sample-policy-definitions"><bdi class="secno">7.1
                            </bdi>策略定义示例</a></li>
                    <li class="tocline"><a class="tocxref" href="#sample-network-error-reports"><bdi class="secno">7.2
                            </bdi>网络错误报告示例</a></li>
                    <li class="tocline"><a class="tocxref" href="#dns-misconfiguration"><bdi class="secno">7.3 </bdi>DNS
                            配置错误</a></li>
                    <li class="tocline"><a class="tocxref" href="#monitoring-cache-validation"><bdi class="secno">7.4
                            </bdi>缓存校验监控</a></li>
                    <li class="tocline"><a class="tocxref" href="#origins-with-multiple-ip-addresses"><bdi
                                class="secno">7.5 </bdi>多IP地址的源站</a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#use-cases"><bdi class="secno">8. </bdi>使用场景</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#reporting-of-navigation-failures"><bdi
                                class="secno">8.1 </bdi>导航失败的报告</a></li>
                    <li class="tocline"><a class="tocxref"
                            href="#reporting-of-first-party-subresource-fetch-failures"><bdi class="secno">8.2
                            </bdi>第一方子资源拉取失败的报告</a></li>
                    <li class="tocline"><a class="tocxref"
                            href="#reporting-of-third-party-subresource-fetch-failures"><bdi class="secno">8.3
                            </bdi>第三方子资源拉取失败的报告</a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#privacy-considerations"><bdi class="secno">9. </bdi>隐私注意事项</a>
            </li>
            <li class="tocline"><a class="tocxref" href="#iana-considerations"><bdi class="secno">10. </bdi>IANA
                    注意事项</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#nel"><bdi class="secno">10.1
                            </bdi><code>NEL</code></a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#index"><bdi class="secno">A. </bdi>索引</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#index-defined-here"><bdi class="secno">A.1
                            </bdi>本规范定义的术语</a></li>
                    <li class="tocline"><a class="tocxref" href="#index-defined-elsewhere"><bdi class="secno">A.2
                            </bdi>引用规范定义的术语</a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#acknowledgments"><bdi class="secno">B.
                    </bdi>致谢</a></li>
            <li class="tocline"><a class="tocxref" href="#references"><bdi class="secno">C. </bdi>参考文献</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#normative-references"><bdi class="secno">C.1
                            </bdi>规范性引用</a></li>
                </ol>
            </li>
        </ol>
    </nav>

    <section id="introduction">
        <div class="header-wrapper">
            <h2 id="x1-introduction"><bdi class="secno">1. </bdi>引言</h2><a class="self-link" href="#introduction"
                aria-label="Permalink for Section 1."></a>
        </div>

        <p>精准衡量网页应用的性能特性对于帮助网站开发者理解如何改进他们的网页应用至关重要。最糟糕的情况是，由于网络错误导致应用或某个特定资源加载失败。要解决此类故障，开发者需要用户代理协助，识别此类失败何时、何地以及为何发生。
        </p>

        <p>目前，应用开发者无法获取来自终端用户的网页应用可用性实时数据。例如，如果用户因 DNS
            查询失败、连接超时、连接被重置或其他原因导致页面加载失败，站点开发者无法检测和解决此问题。请注意，这类网络错误无法仅通过服务端检测，因为按定义，客户端可能根本无法成功与服务器建立连接。</p>

        <p>现有方法（如合成监控）通过在预定的地理位置布置监控节点来提供部分解决方案，但需要额外的基础设施投入，且无法为真实终端用户提供真正全球范围内且接近实时的可用性数据。</p>

        <p>网络错误日志（NEL）通过定义一种机制来满足这一需求，使网页应用能够声明一种报告策略，用户代理可据此为给定的源点上报网络错误。网页应用通过返回包含 <a href="#dfn-nel"
                class="internalDFN" data-link-type="dfn" id="ref-for-dfn-nel-1"><code>NEL</code></a> HTTP 响应头字段选择使用
            NEL，该头描述期望的 <a href="#dfn-nel-policies" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-nel-policies-1">NEL 策略</a>。该策略指示用户代理记录对此源点的请求信息，并尝试将这些信息发送到此前使用 <cite><a
                    data-matched-text="[[[REPORTING]]]" href="https://www.w3.org/TR/reporting-1/">Reporting
                    API</a></cite> 配置的终端组。如其名所示，NEL
            报告主要用于描述<em>错误</em>。但为了统计不同客户端群体的错误<em>比率</em>，也必须了解有多少<em>成功</em>的请求发生；这些成功请求也可通过 NEL 机制进行报告。</p>

        <p>例如，如果用户代理因 TCP 连接被中断无法从 <code>https://www.example.com</code> 获取资源，用户代理会通过 Reporting API 队列如下报告：</p>

        <dl>
            <dt>type</dt>
            <dd><code>"network-error"</code></dd>
            <dt>endpoint group</dt>
            <dd>由 <a href="#dfn-report_to" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-report_to-1"><code>report_to</code></a> 字段配置的终端组</dd>
            <dt>data</dt>
            <dd>
                <pre class="highlight" aria-busy="false"><code class="hljs json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"referrer"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://referrer.com/"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"sampling_fraction"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1.0</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"server_ip"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"192.0.2.42"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"protocol"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"http/1.1"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"elapsed_time"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">321</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"phase"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"connection"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"tcp.aborted"</span>
<span class="hljs-punctuation">}</span></code></pre>
            </dd>
        </dl>

        <p>
            有关报告中各字段及其格式说明，请参见 <a href="#generate-a-network-error-report" class="sec-ref"><bdi class="secno">5.4
                </bdi>生成网络错误报告</a>；有关 NEL 注册和上报流程的更多实例，请参见 <a href="#examples" class="sec-ref"><bdi class="secno">7.
                </bdi>示例</a>。
        </p>
    </section>

    <section id="conformance">
        <div class="header-wrapper">
            <h2 id="x2-conformance"><bdi class="secno">2. </bdi>一致性</h2><a class="self-link" href="#conformance"
                aria-label="Permalink for Section 2."></a>
        </div>
        <p>本规范中除标为非规范性外，所有作者指南、图示、示例和注释均为非规范性内容。规范中其余部分均为规范性内容。</p>
        <p>
            本文档中的关键词 <em class="rfc2119">MAY</em>、<em class="rfc2119">MUST</em>、<em class="rfc2119">MUST NOT</em>、<em
                class="rfc2119">OPTIONAL</em>、<em class="rfc2119">REQUIRED</em> 及 <em class="rfc2119">SHOULD</em>，
            其解释见 <a href="https://www.rfc-editor.org/info/bcp14">BCP 14</a>
            [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc2119"
                    title="Key words for use in RFCs to Indicate Requirement Levels">RFC2119</a></cite>] [<cite><a
                    class="bibref" data-link-type="biblio" href="#bib-rfc8174"
                    title="Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words">RFC8174</a></cite>]
            ，仅当全部大写出现时按上述含义解释。
        </p>
        <p>以祈使句出现的规范性要求（如“去除所有前导空格”或“返回 false 并终止这些步骤”）应与引导算法时所用的关键词（如“must”、“should”、“may”等）对应理解。</p>
        <p>部分一致性要求针对属性、方法或对象提出，此类要求应理解为针对用户代理的要求。</p>
        <p>以算法或具体步骤方式表述的一致性要求，可以采用任何实现方式，只要最终效果等价。（本规范给出的算法旨在易于理解而非追求性能。）</p>
    </section>

    <section id="concepts">
        <div class="header-wrapper">
            <h2 id="x3-concepts"><bdi class="secno">3. </bdi>概念</h2><a class="self-link" href="#concepts"
                aria-label="Permalink for Section 3."></a>
        </div>

        <section id="network-requests">
            <div class="header-wrapper">
                <h3 id="x3-1-network-requests"><bdi class="secno">3.1 </bdi>网络请求</h3><a class="self-link"
                    href="#network-requests" aria-label="Permalink for Section 3.1"></a>
            </div>

            <p>
                当 <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#user-agent"
                    id="ref-for-index-term-user-agent-1">用户代理</a>尝试通过网络为某个<a data-link-type="dfn"
                    href="https://fetch.spec.whatwg.org/#concept-request" id="ref-for-index-term-request-1">请求</a>进行<a
                    href="https://fetch.spec.whatwg.org/#http-network-fetch"
                    id="ref-for-index-term-http-network-fetch-1">HTTP 网络获取</a>资源时，就会发生一次<dfn
                    data-lt="network requests|network request" id="dfn-network-requests" tabindex="0"
                    aria-haspopup="dialog" data-dfn-type="dfn">网络请求</dfn>。
            </p>

            <p>
                如果已知用户代理处于离线状态（即 <code>navigator.</code>
                <a data-link-type="attribute"
                    href="https://html.spec.whatwg.org/multipage/system-state.html#dom-navigator-online"
                    id="ref-for-index-term-online-attribute-for-navigatoronline-1"><code>onLine</code></a> 返回
                <code>false</code>），<a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request"
                    id="ref-for-index-term-request-2">请求</a> <em class="rfc2119">不得</em>产生 <a
                    href="#dfn-network-requests" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-network-requests-1">网络请求</a>。
            </p>

            <p>
                如果请求因 <a data-link-type="dfn" href="https://www.w3.org/TR/mixed-content/#mixed-content"
                    id="ref-for-index-term-mixed-content-1">混合内容</a> 或 <a data-link-type="dfn" data-lt="CORS protocol"
                    href="https://fetch.spec.whatwg.org/#cors-protocol" id="ref-for-index-term-cors-protocol-1">CORS</a>
                失败被阻止，该 <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request"
                    id="ref-for-index-term-request-3">请求</a> <em class="rfc2119">不得</em>产生 <a
                    href="#dfn-network-requests" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-network-requests-2">网络请求</a>。任何 <a data-link-type="dfn"
                    href="https://fetch.spec.whatwg.org/#cors-preflight-request"
                    id="ref-for-index-term-cors-preflight-request-1">CORS 预检请求</a> <em class="rfc2119">必须</em>产生它自己的 <a
                    href="#dfn-network-requests" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-network-requests-3">网络请求</a>。
            </p>

            <div class="note" role="note" id="issue-container-generatedID">
                <div role="heading" class="note-title marker" id="h-note" aria-level="4"><span>注</span></div>
                <p class="">
                    对于按照 [<cite><a class="bibref" data-link-type="biblio" href="#bib-fetch"
                            title="Fetch Standard">FETCH</a></cite>] 标准服务请求的用户代理，一次 <a href="#dfn-network-requests"
                        class="internalDFN" data-link-type="dfn" id="ref-for-dfn-network-requests-4">网络请求</a>对应于一次 <a
                        href="https://fetch.spec.whatwg.org/#http-network-fetch"
                        id="ref-for-index-term-http-network-fetch-2">HTTP 网络获取</a> 算法的执行。
                </p>
            </div>

            <p>
                无论采用哪种 fetch 算法和底层应用、传输协议，服务一次 <a href="#dfn-network-requests" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-network-requests-5">网络请求</a>均包含以下几个<dfn data-lt="phase|phases" id="dfn-phase"
                    tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">阶段</dfn>：
            </p>

            <ol>
                <li>
                    <dfn id="dfn-dns-resolution" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">DNS
                        解析</dfn>：用户代理使用域名系统
                    [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc1034"
                            title="Domain names - concepts and facilities">RFC1034</a></cite>] 将域名解析为可为该域服务 HTTP
                    <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request"
                        id="ref-for-index-term-request-5">请求</a>的 <a data-link-type="dfn"
                        href="https://url.spec.whatwg.org/#ip-address" id="ref-for-index-term-ip-address-1">IP 地址</a> 的
                    <dfn data-plurals="servers" id="dfn-server" class="externalDFN" data-no-export=""
                        data-dfn-type="dfn"><a href="https://httpwg.org/specs/rfc9110.html#core.semantics"
                            id="ref-for-index-term-server-1">服务器</a></dfn>。
                </li>

                <li>
                    <dfn id="dfn-secure-connection-establishment" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">安全连接建立</dfn>：用户代理与 <a data-link-type="dfn"
                        href="https://httpwg.org/specs/rfc9110.html#core.semantics"
                        id="ref-for-index-term-server-2">服务器</a> 建立连接，并在此连接上建立安全通道。
                </li>

                <li>
                    <dfn id="dfn-transmission-of-request-and-response" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">请求和响应传输</dfn>：安全通道建立后，用户代理可以发送 HTTP <a data-link-type="dfn"
                        href="https://fetch.spec.whatwg.org/#concept-request"
                        id="ref-for-index-term-request-6">请求</a>，并从 <a data-link-type="dfn"
                        href="https://httpwg.org/specs/rfc9110.html#core.semantics"
                        id="ref-for-index-term-server-3">服务器</a> 接收 <a data-link-type="dfn"
                        href="https://fetch.spec.whatwg.org/#concept-response"
                        id="ref-for-index-term-response-1">响应</a>。
                </li>
            </ol>

            <p>
                唯一必需的<a href="#dfn-phase" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-phase-1">阶段</a>是<a
                    href="#dfn-transmission-of-request-and-response" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-transmission-of-request-and-response-1">请求和响应传输</a>；其他<a href="#dfn-phase"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-phase-2">阶段</a>对于每个 <a
                    href="#dfn-network-requests" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-network-requests-6">网络请求</a>可能不是必需的。例如，用户代理本地可以缓存 DNS 结果，从而免除后续对同一域名的 <a
                    href="#dfn-dns-resolution" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-dns-resolution-1">DNS 解析</a>。同样，HTTP <a
                    href="https://httpwg.org/specs/rfc9112.html#persistent.connections"
                    id="ref-for-index-term-persistent-connections-1">持久连接</a>允许打开一个连接后为同一<a data-link-type="dfn"
                    href="https://fetch.spec.whatwg.org/#network-partition-key"
                    id="ref-for-index-term-network-partition-key-1">分区密钥</a>的多个请求复用。但如果多个<a href="#dfn-phase"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-phase-3">阶段</a>依次发生，其顺序应如上。
            </p>

            <div class="note" id="issue-container-generatedID-0">
                <div role="heading" class="ednote-title marker" id="h-ednote" aria-level="4"><span>编者注</span>
                </div>
                <p class="">
                    我们希望将这些 <a href="#dfn-phase" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-phase-4">阶段</a>的定义移至 [<cite><a class="bibref" data-link-type="biblio"
                            href="#bib-fetch" title="Fetch Standard">FETCH</a></cite>]， 以便于复用。
                </p>
            </div>

            <p>
                如果用户代理能够从服务器接收有效 HTTP 响应，且该响应状态码不是 <dfn id="dfn-4xx" class="externalDFN" data-no-export=""
                    data-dfn-type="dfn"><a href="https://httpwg.org/specs/rfc9110.html#status.4xx"
                        id="ref-for-index-term-4xx-1">4xx</a></dfn> 或 <dfn id="dfn-5xx" class="externalDFN"
                    data-no-export="" data-dfn-type="dfn"><a href="https://httpwg.org/specs/rfc9110.html#status.5xx"
                        id="ref-for-index-term-5xx-1">5xx</a></dfn>，则此 <a href="#dfn-network-requests"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-network-requests-7">网络请求</a>被认为是<dfn
                    data-lt="succeed|succeeded|successful" id="dfn-succeed" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">成功</dfn>的。
            </p>

            <p>
                如果未被判定为 <a href="#dfn-succeed" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-succeed-1">成功</a>，则该 <a href="#dfn-network-requests" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-network-requests-8">网络请求</a>为<dfn
                    data-lt="fail|failures|failed" id="dfn-fail" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">失败</dfn>。
            </p>

            <div class="note" role="note" id="issue-container-generatedID-1">
                <div role="heading" class="note-title marker" id="h-note-0" aria-level="4"><span>注</span></div>
                <p class="">
                    注意：HTTP 错误响应（即，状态码为 <a data-link-type="dfn" href="https://httpwg.org/specs/rfc9110.html#status.4xx"
                        id="ref-for-index-term-4xx-2">4xx</a> 或
                    <a data-link-type="dfn" href="https://httpwg.org/specs/rfc9110.html#status.5xx"
                        id="ref-for-index-term-5xx-2">5xx</a>）会被视为<a href="#dfn-fail" class="internalDFN"
                        data-link-type="dfn" id="ref-for-dfn-fail-1">失败</a>，因此会受 <a href="#dfn-nel-policies"
                        class="internalDFN" data-link-type="dfn" id="ref-for-dfn-nel-policies-2">NEL 策略</a>的<a
                        href="#dfn-failure-sampling-rate" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-failure-sampling-rate-1">失败采样率</a>
                    而<strong>非</strong><a href="#dfn-successful-sampling-rate" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-successful-sampling-rate-1">成功采样率</a>控制。
                </p>
            </div>
        </section>

        <section id="network-errors">
            <div class="header-wrapper">
                <h3 id="x3-2-network-errors"><bdi class="secno">3.2 </bdi>网络错误</h3><a class="self-link"
                    href="#network-errors" aria-label="Permalink for Section 3.2"></a>
            </div>

            <p>
                导致某 <a href="#dfn-network-requests" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-network-requests-9">网络请求</a><a href="#dfn-fail" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-fail-2">失败</a>的错误状态被称为<dfn
                    data-lt="network errors|network error" id="dfn-network-errors" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">网络错误</dfn>。
            </p>

            <p>
                每个 <a href="#dfn-network-errors" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-network-errors-1">网络错误</a>都有一个<dfn data-lt="types|type" id="dfn-types" tabindex="0"
                    aria-haspopup="dialog" data-dfn-type="dfn">类型</dfn>，为字符串。
            </p>

            <p>
                每个 <a href="#dfn-network-errors" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-network-errors-2">网络错误</a>都有一个 <dfn data-lt-nodefault="" data-lt="type-phase"
                    id="dfn-type-phase" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">阶段</dfn>，用于描述错误发生在哪一<a
                    href="#dfn-phase" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-phase-5">阶段</a>：
            </p>

            <dl>
                <dt><code>dns</code></dt>
                <dd>错误发生在 <a href="#dfn-dns-resolution" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-dns-resolution-2">DNS 解析</a>阶段</dd>
                <dt><code>connection</code></dt>
                <dd>
                    错误发生在 <a href="#dfn-secure-connection-establishment" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-secure-connection-establishment-1">安全连接建立</a>阶段
                </dd>

                <dt><code>application</code></dt>
                <dd>
                    错误发生在 <a href="#dfn-transmission-of-request-and-response" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-transmission-of-request-and-response-2">请求和响应传输</a>阶段
                </dd>
            </dl>

            <p>
                <a href="#predefined-network-error-types" class="sec-ref"><bdi class="secno">6.
                    </bdi>预定义网络错误类型</a>中定义了若干预定义的 <a href="#dfn-network-errors" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-network-errors-3">网络错误</a><a href="#dfn-types" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-types-1">类型</a>。
            </p>
        </section>

        <section id="network-error-reports">
            <div class="header-wrapper">
                <h3 id="x3-3-network-error-reports"><bdi class="secno">3.3 </bdi>网络错误报告</h3><a class="self-link"
                    href="#network-error-reports" aria-label="Permalink for Section 3.3"></a>
            </div>

            <p>
                <dfn data-lt="network error reports|network error report" id="dfn-network-error-reports" tabindex="0"
                    aria-haspopup="dialog" data-dfn-type="dfn">网络错误报告</dfn> 是一个 <cite><a
                        data-matched-text="[[[REPORTING]]]" href="https://www.w3.org/TR/reporting-1/">Reporting
                        API</a></cite>
                <a data-link-type="dfn" href="https://www.w3.org/TR/reporting-1/#report"
                    id="ref-for-index-term-report-1">报告</a>，用于描述
                一个 <a href="#dfn-network-errors" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-network-errors-4">网络错误</a>。
            </p>

            <p>
                <a href="#dfn-network-error-reports" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-network-error-reports-1">网络错误报告</a>的 <a data-link-type="dfn"
                    href="https://www.w3.org/TR/reporting-1/#report-type" id="ref-for-index-term-report-type-1">报告类型</a>
                是 <code>network-error</code>。
            </p>
            <p>
                <a href="#dfn-network-error-reports" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-network-error-reports-2">网络错误报告</a> <strong>不会</strong> <a data-link-type="dfn"
                    href="https://www.w3.org/TR/reporting-1/#visible-to-reportingobservers"
                    id="ref-for-index-term-visible-to-reportingobservers-1">暴露给 <code>ReportingObserver</code></a>。
            </p>

            <div class="note" role="note" id="issue-container-generatedID-2">
                <div role="heading" class="note-title marker" id="h-note-1" aria-level="4"><span>注</span></div>
                <p class="">
                    <a href="#dfn-network-error-reports" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-network-error-reports-3">网络错误报告</a>不会暴露给 <a data-link-type="dfn"
                        href="https://www.w3.org/TR/reporting-1/#visible-to-reportingobservers"
                        id="ref-for-index-term-visible-to-reportingobservers-2"><code>ReportingObserver</code></a>，
                    因为报告只应由接收请求的服务器管理员或所有者可见。如果它们对 <a data-link-type="dfn"
                        href="https://www.w3.org/TR/reporting-1/#visible-to-reportingobservers"
                        id="ref-for-index-term-visible-to-reportingobservers-3">ReportingObserver</a> 可见，
                    那么报告也将对<em>发起者</em>可见。对于跨源请求，这可能会泄露有关服务器网络配置的信息给其无法控制的第三方。
                </p>
            </div>
        </section>

        <section id="nel-policies">
            <div class="header-wrapper">
                <h3 id="x3-4-nel-policies"><bdi class="secno">3.4 </bdi>NEL 策略</h3><a class="self-link"
                    href="#nel-policies" aria-label="Permalink for Section 3.4"></a>
            </div>

            <p>
                <dfn data-lt="NEL policies|NEL policy" data-export="" id="dfn-nel-policies" data-plurals="nel policies"
                    tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">NEL 策略</dfn>
                用于指示用户代理是否要收集发往某个
                <a href="#dfn-network-requests" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-network-requests-10">网络请求</a>的 <a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin"
                    id="ref-for-index-term-origin-1">origin</a> 的报告，如果需要，则指定报告发送目的地。
                <a href="#dfn-nel-policies" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-nel-policies-3">NEL
                    策略</a> 通过 HTTP
                <dfn data-plurals="response header" id="dfn-response-headers" class="externalDFN" data-no-export=""
                    data-dfn-type="dfn"><a href="https://httpwg.org/specs/rfc9110.html#fields"
                        id="ref-for-index-term-response-headers-1">响应头</a></dfn> 下发给用户代理。
            </p>

            <p>
                每个 <a href="#dfn-nel-policies" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-nel-policies-4">NEL 策略</a>都有一个<dfn id="dfn-received-ip-address" tabindex="0"
                    aria-haspopup="dialog" data-dfn-type="dfn">接收 IP 地址</dfn>，即用户代理收到 NEL 策略时服务器的 <a
                    data-link-type="dfn" href="https://url.spec.whatwg.org/#ip-address"
                    id="ref-for-index-term-ip-address-2">IP 地址</a>。
            </p>

            <p>
                每个 <a href="#dfn-nel-policies" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-nel-policies-6">NEL 策略</a>有一个<dfn data-lt-nodefault="" data-lt="policy origin"
                    id="dfn-policy-origin" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">源点</dfn>。
            </p>

            <p>
                每个 <a href="#dfn-nel-policies" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-nel-policies-7">NEL 策略</a>有一个 <dfn data-plurals="subdomain" id="dfn-subdomains"
                    tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">子域</dfn> 标志，值可为 <code>include</code> 或
                <code>exclude</code>。
            </p>
            <p>
            </p>
            <p>
                每个 <a href="#dfn-nel-policies" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-nel-policies-8">NEL 策略</a>有一个请求头列表<dfn data-lt-nodefault=""
                    data-lt="policy request headers" id="dfn-policy-request-headers" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">（policy request headers）</dfn>
                和响应头列表<dfn data-lt-nodefault="" data-lt="policy response headers" id="dfn-policy-response-headers"
                    tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">（policy response headers）</dfn>，每个列表中的元素均为<a
                    data-link-type="dfn" href="https://fetch.spec.whatwg.org/#header-name"
                    id="ref-for-index-term-header-names-1">头名称</a>。
            </p>

            <p>
                每个 <a href="#dfn-nel-policies" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-nel-policies-9">NEL 策略</a>有一个 <dfn id="dfn-reporting-group" tabindex="0"
                    aria-haspopup="dialog" data-dfn-type="dfn">报告组</dfn>，即报告将发送到的 Reporting <a data-link-type="dfn"
                    href="https://w3c.github.io/reporting/network-reporting.html#endpoint-group"
                    id="ref-for-index-term-endpoint-group-1">终端组</a>名称。
            </p>

            <p>
                每个 <a href="#dfn-nel-policies" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-nel-policies-10">NEL 策略</a>有一个 <dfn id="dfn-ttl" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">ttl</dfn>，表示该策略有效的秒数。
            </p>

            <p>
                每个 <a href="#dfn-nel-policies" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-nel-policies-11">NEL 策略</a>有一个 <dfn id="dfn-creation" tabindex="0"
                    aria-haspopup="dialog" data-dfn-type="dfn">创建时间</dfn>，即用户代理收到策略的时间戳。
            </p>

            <p>
                当从<a href="#dfn-creation" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-creation-1">创建时间</a>到<a data-link-type="dfn"
                    href="https://www.w3.org/TR/hr-time-3/#dfn-wall-clock"
                    id="ref-for-index-term-wall-clock-1">挂钟</a>的<a data-link-type="dfn"
                    href="https://www.w3.org/TR/hr-time-3/#wall-clock-unsafe-current-time"
                    id="ref-for-index-term-unsafe-current-time-for-wall-clock-1">当前不安全时间</a>
                时长大于 172800 秒（48 小时）时，<a href="#dfn-nel-policies" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-nel-policies-12">NEL 策略</a>为<dfn id="dfn-stale" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">过时</dfn>。
            </p>

            <p>
                当从<a href="#dfn-creation" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-creation-2">创建时间</a>到<a data-link-type="dfn"
                    href="https://www.w3.org/TR/hr-time-3/#dfn-wall-clock"
                    id="ref-for-index-term-wall-clock-2">挂钟</a>的<a data-link-type="dfn"
                    href="https://www.w3.org/TR/hr-time-3/#wall-clock-unsafe-current-time"
                    id="ref-for-index-term-unsafe-current-time-for-wall-clock-2">当前不安全时间</a>
                时长大于其 <a href="#dfn-ttl" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-ttl-1">ttl</a> 时，<a
                    href="#dfn-nel-policies" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-nel-policies-13">NEL 策略</a>为<dfn id="dfn-expired" tabindex="0"
                    aria-haspopup="dialog" data-dfn-type="dfn">已过期</dfn>。
            </p>
        </section>

        <section id="sampling-rates">
            <div class="header-wrapper">
                <h3 id="x3-5-sampling-rates"><bdi class="secno">3.5 </bdi>采样率</h3><a class="self-link"
                    href="#sampling-rates" aria-label="Permalink for Section 3.5"></a>
            </div>

            <p>
                期望服务大量流量的<a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin"
                    id="ref-for-index-term-origin-2">源点</a>可能无法承载为其所有 <a href="#dfn-network-requests"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-network-requests-11">网络请求</a>生成的完整 NEL
                报告。源点可定义<dfn data-lt="sampling rate|sampling rates" id="dfn-sampling-rate" tabindex="0"
                    aria-haspopup="dialog" data-dfn-type="dfn">采样率</dfn>限制每个用户代理上报的 NEL 报告数量。由于<a href="#dfn-succeed"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-succeed-2">成功</a>请求通常远多于<a href="#dfn-fail"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-fail-3">失败</a>请求，源点可为不同情形指定不同的采样率。
            </p>

            <p>
                每个 <a href="#dfn-nel-policies" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-nel-policies-14">NEL 策略</a>有一个 <dfn id="dfn-successful-sampling-rate" tabindex="0"
                    aria-haspopup="dialog" data-dfn-type="dfn">成功采样率</dfn>，值在 0.0–1.0 之间。
            </p>

            <p>
                每个 <a href="#dfn-nel-policies" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-nel-policies-15">NEL 策略</a>有一个 <dfn id="dfn-failure-sampling-rate" tabindex="0"
                    aria-haspopup="dialog" data-dfn-type="dfn">失败采样率</dfn>，值在 0.0–1.0 之间。
            </p>
        </section>

        <section id="policy-cache">
            <div class="header-wrapper">
                <h3 id="x3-6-policy-cache"><bdi class="secno">3.6 </bdi>策略缓存</h3><a class="self-link"
                    href="#policy-cache" aria-label="Permalink for Section 3.6"></a>
            </div>

            <p>
                合规的用户代理<em class="rfc2119">必须</em>提供一个<dfn id="dfn-policy-cache" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">策略缓存</dfn>，即用于保存 <a href="#dfn-nel-policies" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-nel-policies-16">NEL 策略</a> 的存储机制，键为 (<a data-link-type="dfn"
                    href="https://fetch.spec.whatwg.org/#network-partition-key"
                    id="ref-for-index-term-network-partition-key-2">网络分区密钥</a>, <a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin"
                    id="ref-for-index-term-origin-3">源点</a>) 二元组。
            </p>

            <p>
                此存储机制为不透明、厂商自定义且不暴露给 Web，但<em class="rfc2119">必须</em>提供下列方法，供本文档定义的算法使用：
            </p>

            <ul>
                <li>插入、更新和删除 <a href="#dfn-nel-policies" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-nel-policies-17">NEL 策略</a>。</li>
                <li>检索某个 <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin"
                        id="ref-for-index-term-origin-4">源点</a>和 <a data-link-type="dfn"
                        href="https://fetch.spec.whatwg.org/#network-partition-key"
                        id="ref-for-index-term-network-partition-key-3">网络分区密钥</a>下的 <a href="#dfn-nel-policies"
                        class="internalDFN" data-link-type="dfn" id="ref-for-dfn-nel-policies-18">NEL 策略</a>（如有）。</li>
                <li>清空缓存。</li>
            </ul>
        </section>

    </section>

    <section id="policy-delivery">
        <div class="header-wrapper">
            <h2 id="x4-policy-delivery"><bdi class="secno">4. </bdi>策略传递</h2><a class="self-link"
                href="#policy-delivery" aria-label="Permalink for Section 4."></a>
        </div>

        <p>
            <a data-link-type="dfn" href="https://httpwg.org/specs/rfc9110.html#core.semantics"
                id="ref-for-index-term-server-5">服务器</a><em class="rfc2119">可以</em>通过 <a href="#dfn-nel-policies"
                class="internalDFN" data-link-type="dfn" id="ref-for-dfn-nel-policies-19">NEL 策略</a>
            以及 <a href="#dfn-nel" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-nel-2"><code>NEL</code></a>
            HTTP <a data-link-type="dfn" href="https://httpwg.org/specs/rfc9110.html#fields"
                id="ref-for-index-term-response-headers-2">响应头</a>为其管理的 origin 定义相应策略。
        </p>

        <section id="nel-response-header">
            <div class="header-wrapper">
                <h3 id="x4-1-nel-response-header"><bdi class="secno">4.1 </bdi><code>NEL</code> 响应头</h3><a
                    class="self-link" href="#nel-response-header" aria-label="Permalink for Section 4.1"></a>
            </div>

            <p>
                <dfn id="dfn-nel" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn"><code>NEL</code></dfn>
                <a data-link-type="dfn" href="https://httpwg.org/specs/rfc9110.html#fields"
                    id="ref-for-index-term-response-headers-3">响应头</a>用于将 <a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin"
                    id="ref-for-index-term-origin-5">origin</a> 的 <a href="#dfn-nel-policies" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-nel-policies-20">NEL 策略</a>传递给用户代理。<a href="#dfn-nel"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-nel-3"><code>NEL</code></a>
                头的 ABNF（扩展巴科斯-诺尔范式）[<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc5234"
                        title="Augmented BNF for Syntax Specifications: ABNF">RFC5234</a></cite>] 语法如下：
            </p>

            <pre
                aria-busy="false"><code class="hljs abnf"><span class="hljs-attribute">NEL</span> <span class="hljs-operator">=</span> json-field-value</code></pre>

            <p>
                该响应头的值按照 <a href="https://datatracker.ietf.org/doc/html/draft-reschke-http-jfv#json-field-value"
                    id="ref-for-index-term-json-field-value-1">json-field-value</a> 的定义作为一个 JSON 对象数组来解释。数组中的每个对象为该
                origin 定义一个 <a href="#dfn-nel-policies" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-nel-policies-21">NEL 策略</a>。用户代理<em
                    class="rfc2119">必须</em>只处理数组中的第一个有效策略，忽略数组中的其余策略。
            </p>

            <p>用户代理<em class="rfc2119">必须</em>忽略任何未知或无效的字段或值，凡不符合本规范定义语法的均忽略。一个有效的<a href="#dfn-nel" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-nel-4"><code>NEL</code></a>响应头<em
                    class="rfc2119">必须</em>至少包含一个符合本规范所有 “<em class="rfc2119">必需</em>” 字段的对象。</p>

            <p>为防止通过脚本攻击劫持错误上报，对于通过 <code>meta</code> 元素指定的 <a href="#dfn-nel" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-nel-5"><code>NEL</code></a>头，用户代理<em class="rfc2119">必须</em>忽略。<a
                    href="#dfn-nel-policies" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-nel-policies-22">NEL 策略</a>必须通过<a href="#dfn-nel" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-nel-6"><code>NEL</code></a>
                <a data-link-type="dfn" href="https://httpwg.org/specs/rfc9110.html#fields"
                    id="ref-for-index-term-response-headers-4">响应头</a>下发。
            </p>

            <div class="note" role="note" id="issue-container-generatedID-3">
                <div role="heading" class="note-title marker" id="h-note-2" aria-level="4"><span>注</span></div>
                <p class="">对 <code>meta</code> 元素的限制与 [<cite><a class="bibref" data-link-type="biblio" href="#bib-csp"
                            title="Content Security Policy Level 3">CSP</a></cite>] 规范保持一致，后者同样因安全理由只允许通过 HTTP 响应头注册上报。
                </p>
            </div>

            <section id="the-report_to-member">
                <div class="header-wrapper">
                    <h4 id="x4-1-1-the-report_to-member"><bdi class="secno">4.1.1 </bdi><code>report_to</code> 字段</h4><a
                        class="self-link" href="#the-report_to-member" aria-label="Permalink for Section 4.1.1"></a>
                </div>

                <p>
                    <dfn id="dfn-report_to" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn"><code>report_to</code></dfn> 字段指定本 <a data-link-type="dfn"
                        href="https://w3c.github.io/reporting/network-reporting.html#endpoint-group"
                        id="ref-for-index-term-endpoint-group-2">终端组</a>（endpoint group），NEL 报告将被发送到此组。
                    注册 <a href="#dfn-nel-policies" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-nel-policies-23">NEL 策略</a><em class="rfc2119">必须</em>包含该字段；若仅为移除先前注册，可<em
                        class="rfc2119">可选</em>，详见 <a href="#dfn-max_age" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-max_age-1"><code>max_age</code></a>。如存在，此字段值<em
                        class="rfc2119">必须</em>为字符串；其它类型则解析失败。
                </p>

                <div class="note" role="note" id="issue-container-generatedID-4">
                    <div role="heading" class="note-title marker" id="h-note-3" aria-level="5"><span>注</span></div>
                    <p class="">
                        为提升 NEL 报告投递成功率，<a data-link-type="dfn"
                            href="https://httpwg.org/specs/rfc9110.html#core.semantics"
                            id="ref-for-index-term-server-6">服务器</a>应将 <code>report_to</code> 设为包含至少一个位于独立（不与资源 origin
                        共用基础设施）的 alternative origin 的 <a data-link-type="dfn"
                            href="https://w3c.github.io/reporting/network-reporting.html#endpoint-group"
                            id="ref-for-index-term-endpoint-group-3">终端组</a>；否则当资源 origin
                        自身出现网络故障时报告可能无法发送。另外建议配置多个端点做备用。
                    </p>
                </div>
            </section>

            <section id="the-max_age-member">
                <div class="header-wrapper">
                    <h4 id="x4-1-2-the-max_age-member"><bdi class="secno">4.1.2 </bdi><code>max_age</code> 字段
                    </h4><a class="self-link" href="#the-max_age-member" aria-label="Permalink for Section 4.1.2"></a>
                </div>

                <p>
                    <em class="rfc2119">必需</em>字段 <dfn id="dfn-max_age" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn"><code>max_age</code></dfn> 指定本 <a href="#dfn-nel-policies"
                        class="internalDFN" data-link-type="dfn" id="ref-for-dfn-nel-policies-25">NEL
                        策略</a>的有效期（以秒为单位的非负整数）。其值<em class="rfc2119">必须</em>为非负整数，否则解析失败。
                </p>

                <p>
                    <code>0</code> 表示应将该 <a href="#dfn-nel-policies" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-nel-policies-26">origin</a> 的所有 NEL 策略从 <a href="#dfn-policy-cache"
                        class="internalDFN" data-link-type="dfn" id="ref-for-dfn-policy-cache-1">策略缓存</a>中移除。
                </p>

                <div class="note" role="note" id="issue-container-generatedID-5">
                    <div role="heading" class="note-title marker" id="h-note-4" aria-level="5"><span>注</span></div>
                    <p class="">
                        为确保 NEL 报告被交付，<a data-link-type="dfn"
                            href="https://httpwg.org/specs/rfc9110.html#core.semantics"
                            id="ref-for-index-term-server-7">服务器</a>还应确保相关 Reporting <a data-link-type="dfn"
                            href="https://w3c.github.io/reporting/network-reporting.html#endpoint-group"
                            id="ref-for-index-term-endpoint-group-4">终端组</a>的 <code>max_age</code> 配置也充分长。若 Reporting
                        策略过期，NEL 报告也无法送达，即使 NEL 策略本身仍然有效。
                    </p>
                </div>
            </section>

            <section id="the-include_subdomains-member">
                <div class="header-wrapper">
                    <h4 id="x4-1-3-the-include_subdomains-member"><bdi class="secno">4.1.3
                        </bdi><code>include_subdomains</code> 字段
                    </h4><a class="self-link" href="#the-include_subdomains-member"
                        aria-label="Permalink for Section 4.1.3"></a>
                </div>

                <p>
                    <em class="rfc2119">可选</em>字段 <dfn id="dfn-include_subdomains" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn"><code>include_subdomains</code></dfn> 是布尔值，用于开启本 <a href="#dfn-nel-policies"
                        class="internalDFN" data-link-type="dfn" id="ref-for-dfn-nel-policies-27">NEL 策略</a>对该 origin
                    的所有子域生效（无限深度）。若对象中不存在该字段，或其值不为 <code>true</code>，则此策略不作用于子域。
                </p>

                <div class="note" role="note" id="issue-container-generatedID-6">
                    <div role="heading" class="note-title marker" id="h-note-5" aria-level="5"><span>注</span></div>
                    <p class="">
                        若需 NEL 报告能覆盖子域，应确保 Reporting <a data-link-type="dfn"
                            href="https://w3c.github.io/reporting/network-reporting.html#endpoint-group"
                            id="ref-for-index-term-endpoint-group-5">终端组</a>也配置了 <code>include_subdomains</code> 为
                        true。否则，若 Reporting 策略未覆盖该子域，NEL 报告即使策略开启对该子域，也无法送达。
                    </p>
                </div>
            </section>

            <section id="the-success_fraction-member">
                <div class="header-wrapper">
                    <h4 id="x4-1-4-the-success_fraction-member"><bdi class="secno">4.1.4
                        </bdi><code>success_fraction</code> 字段
                    </h4><a class="self-link" href="#the-success_fraction-member"
                        aria-label="Permalink for Section 4.1.4"></a>
                </div>

                <p>
                    <em class="rfc2119">可选</em>字段 <dfn id="dfn-success_fraction" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn"><code>success_fraction</code></dfn> 定义对本 origin 的
                    <a href="#dfn-succeed" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-succeed-3">成功</a> <a
                        href="#dfn-network-requests" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-network-requests-12">网络请求</a> 的 NEL 报告采样率。
                    若值存在，<em class="rfc2119">必须</em>为 [<code>0.0</code>, <code>1.0</code>] 区间内的数字；否则解析失败。
                    若未配置，则用户代理<em>不会</em>采集成功网络请求的 NEL 报告。
                </p>
            </section>

            <section id="the-failure_fraction-member">
                <div class="header-wrapper">
                    <h4 id="x4-1-5-the-failure_fraction-member"><bdi class="secno">4.1.5
                        </bdi><code>failure_fraction</code> 字段
                    </h4><a class="self-link" href="#the-failure_fraction-member"
                        aria-label="Permalink for Section 4.1.5"></a>
                </div>

                <p>
                    <em class="rfc2119">可选</em>字段 <dfn id="dfn-failure_fraction" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn"><code>failure_fraction</code></dfn> 定义对本 origin
                    <a href="#dfn-fail" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-fail-4">失败</a> <a
                        href="#dfn-network-requests" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-network-requests-14">网络请求</a> 的 NEL 报告采样率。若值存在，<em class="rfc2119">必须</em>为
                    [<code>0.0</code>, <code>1.0</code>] 区间内的数字，否则解析失败。
                    若未配置，用户代理将对<em>所有</em>失败网络请求都采集 NEL 报告。
                </p>
            </section>

            <section id="the-request_headers-member">
                <div class="header-wrapper">
                    <h4 id="x4-1-6-the-request_headers-member"><bdi class="secno">4.1.6
                        </bdi><code>request_headers</code> 字段
                    </h4><a class="self-link" href="#the-request_headers-member"
                        aria-label="Permalink for Section 4.1.6"></a>
                </div>

                <p>
                    <em class="rfc2119">可选</em>字段 <dfn id="dfn-request_headers" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn"><code>request_headers</code></dfn> 定义哪些 <a data-lt="policy request headers"
                        href="#dfn-policy-request-headers" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-policy-request-headers-1">请求头</a>的 <a data-lt="header name" data-link-type="dfn"
                        href="https://fetch.spec.whatwg.org/#header-name" id="ref-for-index-term-header-names-2">名称</a>和
                    <a data-lt="header
          value" data-link-type="dfn" href="https://fetch.spec.whatwg.org/#header-value"
                        id="ref-for-index-term-header-value-1">值</a> 将被包含在本 origin 的 <a
                        href="#dfn-network-error-reports" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-network-error-reports-4">网络错误报告</a>中。值如存在<em class="rfc2119">必须</em>为字符串数组。
                </p>
            </section>

            <section id="the-response_headers-member">
                <div class="header-wrapper">
                    <h4 id="x4-1-7-the-response_headers-member"><bdi class="secno">4.1.7
                        </bdi><code>response_headers</code> 字段
                    </h4><a class="self-link" href="#the-response_headers-member"
                        aria-label="Permalink for Section 4.1.7"></a>
                </div>

                <p>
                    <em class="rfc2119">可选</em>字段 <dfn id="dfn-response_headers" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn"><code>response_headers</code></dfn> 定义哪些 <a
                        data-lt="policy response headers" href="#dfn-policy-response-headers" class="internalDFN"
                        data-link-type="dfn" id="ref-for-dfn-policy-response-headers-1">响应头</a>的
                    <a data-lt="header name" data-link-type="dfn" href="https://fetch.spec.whatwg.org/#header-name"
                        id="ref-for-index-term-header-names-3">名称</a>和 <a data-lt="header
          value" data-link-type="dfn" href="https://fetch.spec.whatwg.org/#header-value"
                        id="ref-for-index-term-header-value-2">值</a> 将被包含在本 origin 的 <a
                        href="#dfn-network-error-reports" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-network-error-reports-5">网络错误报告</a>中。值如存在<em class="rfc2119">必须</em>为字符串数组。
                </p>
            </section>
        </section>

        <section id="process-policy-headers">
            <div class="header-wrapper">
                <h3 id="x4-2-process-policy-headers"><bdi class="secno">4.2 </bdi>处理策略头</h3><a class="self-link"
                    href="#process-policy-headers" aria-label="Permalink for Section 4.2"></a>
            </div>

            <p>
                给定一个 <a href="#dfn-network-requests" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-network-requests-16">网络请求</a>（<var>request</var>）及其对应的 <a data-link-type="dfn"
                    href="https://fetch.spec.whatwg.org/#concept-response"
                    id="ref-for-index-term-response-2">响应</a>（<var>response</var>），本算法将从中提取 <a href="#dfn-nel-policies"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-nel-policies-29">NEL 策略</a>，并据此更新
                <a href="#dfn-policy-cache" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-policy-cache-2">策略缓存</a>。
            </p>

            <ol class="algorithm">
                <li>
                    若满足以下任一条件，则终止：
                    <ul>
                        <li>
                            对 <var>request</var> 的 <a data-link-type="dfn"
                                href="https://www.w3.org/TR/secure-contexts/#is-origin-trustworthy"
                                id="ref-for-index-term-is-origin-potentially-trustworthy-1">origin 是否可信</a> 算法执行结果不是
                            <code>Potentially Trustworthy</code>。
                        </li>
                        <li>
                            <var>response</var> 不包含名为 <code>NEL</code> 的 <a data-link-type="dfn"
                                href="https://httpwg.org/specs/rfc9110.html#fields"
                                id="ref-for-index-term-response-headers-5">响应头</a>。
                        </li>
                    </ul>
                </li>

                <li>
                    令 <var>origin</var> 为 <var>request</var> 的 <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin"
                        id="ref-for-index-term-origin-11">origin</a>。
                </li>

                <li>
                    令 <var>key</var> 为 <a data-link-type="dfn"
                        href="https://fetch.spec.whatwg.org/#determine-the-network-partition-key"
                        id="ref-for-index-term-determine-the-network-partition-key-1">确定网络分区密钥</a>算法在 <var>request</var>
                    的 <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-reserved-client"
                        id="ref-for-index-term-reserved-client-for-request-1">reserved client</a> 上的结果。
                </li>

                <li>
                    令 <var>header</var> 为名为 <code>NEL</code> 的 <a data-link-type="dfn"
                        href="https://httpwg.org/specs/rfc9110.html#fields"
                        id="ref-for-index-term-response-headers-6">响应头</a>的值。
                </li>

                <li>
                    令 <var>list</var> 为 [<cite><a class="bibref" data-link-type="biblio" href="#bib-http-jfv"
                            title="A JSON Encoding for HTTP Header Field Values">HTTP-JFV</a></cite>] 4 节算法在
                    <var>header</var> 上的结果。若出错或结果为空则终止。
                </li>

                <li>
                    令 <var>item</var> 为 <var>list</var> 的第一个元素。
                </li>

                <li>
                    若 <var>item</var> 未包含 <a href="#dfn-max_age" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-max_age-2"><code>max_age</code></a> 字段，或该字段值不是数字，则终止。
                </li>

                <li>
                    若 <var>item</var> 的 <a href="#dfn-max_age" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-max_age-3"><code>max_age</code></a> 字段值为 <code>0</code>，则移除 <a
                        href="#dfn-policy-cache" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-policy-cache-3">策略缓存</a>中 <a data-lt="policy origin" href="#dfn-policy-origin"
                        class="internalDFN" data-link-type="dfn" id="ref-for-dfn-policy-origin-1">origin</a> 为
                    <var>origin</var> 的任何 <a href="#dfn-nel-policies" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-nel-policies-30">NEL 策略</a>，并跳过余下步骤。
                </li>

                <li>
                    若 <var>item</var> 未包含 <a href="#dfn-report_to" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-report_to-3"><code>report_to</code></a> 字段，或该字段不是字符串，则终止。
                </li>

                <li>
                    若 <var>item</var> 含有 <a href="#dfn-success_fraction" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-success_fraction-1"><code>success_fraction</code></a> 字段，且其值不在 [0.0, 1.0]
                    范围，则终止。
                </li>

                <li>
                    若 <var>item</var> 含有 <a href="#dfn-failure_fraction" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-failure_fraction-1"><code>failure_fraction</code></a> 字段，且其值不在 [0.0, 1.0]
                    范围，则终止。
                </li>

                <li>
                    若 <var>item</var> 含有 <a href="#dfn-request_headers" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-request_headers-1"><code>request_headers</code></a> 字段，其值非数组或数组中有非字符串元素，则终止。
                </li>

                <li>
                    若 <var>item</var> 含有 <a href="#dfn-response_headers" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-response_headers-1"><code>response_headers</code></a> 字段，其值非数组或数组中有非字符串元素，则终止。
                </li>

                <li>
                    <p>
                        令 <var>policy</var> 为新建的 <a href="#dfn-nel-policies" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-nel-policies-31">NEL 策略</a>，其属性如下：
                    </p>

                    <dl>
                        <dt><a href="#dfn-received-ip-address" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-received-ip-address-1">接收 IP 地址</a></dt>
                        <dd>
                            用户代理收到 <var>response</var> 时 <a data-link-type="dfn"
                                href="https://url.spec.whatwg.org/#ip-address" id="ref-for-index-term-ip-address-3">服务器
                                IP 地址</a>
                            <div class="note" id="issue-container-generatedID-7">
                                <div role="heading" class="ednote-title marker" id="h-ednote-0" aria-level="4">
                                    <span>编者注</span>
                                </div>
                                <p class="">
                                    [<cite><a class="bibref" data-link-type="biblio" href="#bib-fetch"
                                            title="Fetch Standard">FETCH</a></cite>] 中需要更明确地传递。
                                </p>
                            </div>
                        </dd>

                        <dt><a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin"
                                id="ref-for-index-term-origin-12">origin</a></dt>
                        <dd><var>origin</var></dd>

                        <dt><a href="#dfn-subdomains" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-subdomains-1">子域</a> 标志</dt>
                        <dd>
                            若 <var>item</var> 有 <a href="#dfn-include_subdomains" class="internalDFN"
                                data-link-type="dfn"
                                id="ref-for-dfn-include_subdomains-1"><code>include_subdomains</code></a> 且值为
                            <code>true</code>，则为 <code>include</code>，否则为 <code>exclude</code>
                        </dd>

                        <dt><a data-lt="policy request headers" href="#dfn-policy-request-headers" class="internalDFN"
                                data-link-type="dfn" id="ref-for-dfn-policy-request-headers-2">请求头</a></dt>
                        <dd>
                            <var>item</var> 的 <a href="#dfn-request_headers" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-request_headers-2"><code>request_headers</code></a>
                            字段值
                        </dd>

                        <dt><a data-lt="policy response headers" href="#dfn-policy-response-headers" class="internalDFN"
                                data-link-type="dfn" id="ref-for-dfn-policy-response-headers-2">响应头</a>
                        </dt>
                        <dd>
                            <var>item</var> 的 <a href="#dfn-response_headers" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-response_headers-2"><code>response_headers</code></a> 字段值
                        </dd>

                        <dt><a href="#dfn-reporting-group" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-reporting-group-1">报告组</a></dt>
                        <dd><var>item</var> 的 <a href="#dfn-report_to" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-report_to-4"><code>report_to</code></a> 字段值</dd>

                        <dt><a href="#dfn-ttl" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-ttl-2">ttl</a>
                        </dt>
                        <dd><var>item</var> 的 <a href="#dfn-max_age" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-max_age-4"><code>max_age</code></a> 字段值</dd>

                        <dt><a href="#dfn-creation" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-creation-3">创建时间</a></dt>
                        <dd><a data-link-type="dfn" href="https://www.w3.org/TR/hr-time-3/#dfn-wall-clock"
                                id="ref-for-index-term-wall-clock-3">挂钟</a> 的 <a data-link-type="dfn"
                                href="https://www.w3.org/TR/hr-time-3/#wall-clock-unsafe-current-time"
                                id="ref-for-index-term-unsafe-current-time-for-wall-clock-3">当前不安全时间</a>
                        </dd>

                        <dt><a href="#dfn-successful-sampling-rate" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-successful-sampling-rate-2">成功采样率</a></dt>
                        <dd>
                            <var>item</var> 的 <a href="#dfn-success_fraction" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-success_fraction-2"><code>success_fraction</code></a> 字段值，如无则为
                            <code>0.0</code>
                        </dd>

                        <dt><a href="#dfn-failure-sampling-rate" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-failure-sampling-rate-2">失败采样率</a></dt>
                        <dd>
                            <var>item</var> 的 <a href="#dfn-failure_fraction" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-failure_fraction-2"><code>failure_fraction</code></a> 字段值，如无则为
                            <code>1.0</code>
                        </dd>
                    </dl>
                </li>

                <li>
                    若 <a href="#dfn-policy-cache" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-policy-cache-4">策略缓存</a>中已存在 (<var>key</var>, <var>origin</var>) 项，则以
                    <var>policy</var> 替换；否则插入 <var>policy</var> 到 (<var>key</var>, <var>origin</var>)。
                </li>

            </ol>
        </section>
    </section>

    <section id="report-delivery">
        <div class="header-wrapper">
            <h2 id="x5-report-delivery"><bdi class="secno">5. </bdi>报告传递</h2><a class="self-link"
                href="#report-delivery" aria-label="Permalink for Section 5."></a>
        </div>

        <section id="choose-a-policy-for-a-request">
            <div class="header-wrapper">
                <h3 id="x5-1-choose-a-policy-for-a-request"><bdi class="secno">5.1 </bdi>为请求选择策略
                </h3><a class="self-link" href="#choose-a-policy-for-a-request"
                    aria-label="Permalink for Section 5.1"></a>
            </div>

            <p>
                给定一个 <a href="#dfn-network-requests" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-network-requests-17">网络请求</a>（<var>request</var>），本算法用于确定在 <a
                    href="#dfn-policy-cache" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-policy-cache-6">策略缓存</a>中，应为该 <a href="#dfn-network-requests" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-network-requests-18">网络请求</a>生成报告采用哪个 <a
                    href="#dfn-nel-policies" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-nel-policies-32">NEL 策略</a>。
            </p>

            <ol class="algorithm">

                <li>
                    令 <var>origin</var> 为 <var>request</var> 的 <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin"
                        id="ref-for-index-term-origin-13">origin</a>。
                </li>

                <li>
                    令 <var>key</var> 为对 <var>request</var> 的 <a data-link-type="dfn"
                        href="https://fetch.spec.whatwg.org/#determine-the-network-partition-key"
                        id="ref-for-index-term-determine-the-network-partition-key-2">reserved client</a>
                    执行“确定网络分区密钥”算法的结果。
                </li>

                <li>
                    如果 (<var>key</var>, <var>origin</var>) 项存在于 <a href="#dfn-policy-cache" class="internalDFN"
                        data-link-type="dfn" id="ref-for-dfn-policy-cache-7">策略缓存</a>中：
                    <ol>
                        <li>令 <var>policy</var> 为该项。</li>
                        <li>如果 <var>policy</var> 没有 <a href="#dfn-expired" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-expired-1">过期</a>，则返回它。</li>
                    </ol>
                </li>

                <li>
                    对于 <var>origin</var> 的每个 <var>父origin</var>（即 <a
                        href="https://www.rfc-editor.org/rfc/rfc6797#section-8.2"
                        id="ref-for-index-term-superdomain-match-1">超级域匹配</a>）：

                    <ol>
                        <li>
                            如果 (<var>key</var>, <var>parent origin</var>) 项存在于 <a href="#dfn-policy-cache"
                                class="internalDFN" data-link-type="dfn" id="ref-for-dfn-policy-cache-8">策略缓存</a>中：
                            <ol>
                                <li>令 <var>policy</var> 为该项。</li>
                                <li>
                                    如果 <var>policy</var> 没有 <a href="#dfn-expired" class="internalDFN"
                                        data-link-type="dfn" id="ref-for-dfn-expired-2">过期</a> 且其 <a
                                        href="#dfn-subdomains" class="internalDFN" data-link-type="dfn"
                                        id="ref-for-dfn-subdomains-2">subdomains</a> 标志为 <code>include</code>，则返回它。
                                </li>
                            </ol>
                        </li>
                    </ol>
                </li>

                <li>
                    返回 <code>无策略</code>。
                </li>

            </ol>

        </section>

        <section id="extract-request-headers">
            <div class="header-wrapper">
                <h3 id="x5-2-extract-request-headers"><bdi class="secno">5.2 </bdi>提取请求头</h3><a class="self-link"
                    href="#extract-request-headers" aria-label="Permalink for Section 5.2"></a>
            </div>

            <p>
                给定一个 <a href="#dfn-network-requests" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-network-requests-19">网络请求</a>（<var>request</var>）和 <a href="#dfn-nel-policies"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-nel-policies-33">NEL
                    策略</a>（<var>policy</var>），本算法根据策略指示从请求中提取头部值。
            </p>

            <ol class="algorithm">

                <li>
                    令 <var>headers</var> 为新建的空 ECMAScript 对象。
                </li>

                <li>
                    对于 <var>policy</var> 的 <a data-lt="policy request headers" href="#dfn-policy-request-headers"
                        class="internalDFN" data-link-type="dfn" id="ref-for-dfn-policy-request-headers-3">请求头</a>
                    列表中的每个 <var>header name</var>：

                    <ol>
                        <li>
                            如果 <var>request</var> 的 <a data-link-type="dfn"
                                href="https://fetch.spec.whatwg.org/#concept-request-header-list"
                                id="ref-for-index-term-header-list-for-request-1">头部列表</a>不<a data-link-type="dfn"
                                href="https://fetch.spec.whatwg.org/#header-list-contains"
                                id="ref-for-index-term-contain-for-header-list-1">包含</a>
                            <var>header name</var>，则跳至下一个 <var>header name</var>。
                        </li>

                        <li>
                            令 <var>values</var> 为空 ECMAScript 列表。
                        </li>

                        <li>
                            对于 <var>request</var> 的 <a data-link-type="dfn"
                                href="https://fetch.spec.whatwg.org/#concept-request-header-list"
                                id="ref-for-index-term-header-list-for-request-2">头部列表</a>中
                            <a data-lt="header name" data-link-type="dfn"
                                href="https://fetch.spec.whatwg.org/#header-name"
                                id="ref-for-index-term-header-names-4">名称</a>为 <var>header name</var> 的每个
                            <var>header</var>，将 <var>header</var> 的 <a data-lt="header value" data-link-type="dfn"
                                href="https://fetch.spec.whatwg.org/#header-value"
                                id="ref-for-index-term-header-value-3">值</a>加入 <var>values</var>。
                        </li>

                        <li>
                            在 <var>headers</var> 上新增属性，其名为 <var>header name</var>，值为 <var>values</var>。
                        </li>
                    </ol>
                </li>

                <li>
                    返回 <var>headers</var>。
                </li>

            </ol>

        </section>

        <section id="extract-response-headers">
            <div class="header-wrapper">
                <h3 id="x5-3-extract-response-headers"><bdi class="secno">5.3 </bdi>提取响应头</h3><a class="self-link"
                    href="#extract-response-headers" aria-label="Permalink for Section 5.3"></a>
            </div>

            <p>
                给定 <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response"
                    id="ref-for-index-term-response-3">响应</a>（<var>response</var>）和 <a href="#dfn-nel-policies"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-nel-policies-34">NEL 策略</a>
                （<var>policy</var>），本算法按照策略指示从响应中提取头部值。
            </p>

            <ol class="algorithm">

                <li>
                    令 <var>headers</var> 为新建的空 ECMAScript 对象。
                </li>

                <li>
                    对于 <var>policy</var> 的 <a data-lt="policy response headers" href="#dfn-policy-response-headers"
                        class="internalDFN" data-link-type="dfn" id="ref-for-dfn-policy-response-headers-3">响应头</a>
                    列表中的每个 <var>header name</var>：

                    <ol>
                        <li>
                            如果 <var>response</var> 的 <a data-link-type="dfn"
                                href="https://fetch.spec.whatwg.org/#concept-response-header-list"
                                id="ref-for-index-term-header-list-for-response-1">头部列表</a>
                            不<a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#header-list-contains"
                                id="ref-for-index-term-contain-for-header-list-2">包含</a>
                            <var>header name</var>，则跳至下一个 <var>header name</var>。
                        </li>

                        <li>
                            令 <var>values</var> 为空 ECMAScript 列表。
                        </li>

                        <li>
                            对 <var>response</var> 的 <a data-link-type="dfn"
                                href="https://fetch.spec.whatwg.org/#concept-response-header-list"
                                id="ref-for-index-term-header-list-for-response-2">头部列表</a>中名称为 <var>header name</var>
                            的每个 <var>header</var>，将 <var>header</var> 的 <a data-lt="header value" data-link-type="dfn"
                                href="https://fetch.spec.whatwg.org/#header-value"
                                id="ref-for-index-term-header-value-4">值</a>加入 <var>values</var>。
                        </li>

                        <li>
                            在 <var>headers</var> 上新增属性，其名为 <var>header name</var>，值为 <var>values</var>。
                        </li>
                    </ol>
                </li>

                <li>
                    返回 <var>headers</var>。
                </li>

            </ol>

        </section>

        <section id="generate-a-network-error-report-0">
            <div class="header-wrapper">
                <h3 id="generate-a-network-error-report" data-dfn-type="dfn" data-export=""><bdi class="secno">5.4
                    </bdi>生成网络错误报告</h3><a class="self-link" href="#generate-a-network-error-report"
                    aria-label="Permalink for Section 5.4"></a>
            </div>

            <p>
                给定 <a href="#dfn-network-requests" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-network-requests-20">网络请求</a>（<var>request</var>）及其对应的
                <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response"
                    id="ref-for-index-term-response-4">响应</a>（<var>response</var>），如果有匹配的 <a href="#dfn-nel-policies"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-nel-policies-35">NEL 策略</a>要求报告，则本算法为
                <var>request</var> 生成报告并返回报告及 NEL 策略，否则返回 null。
            </p>

            <ol class="algorithm">

                <li>
                    如果对 <var>request</var> 的 <a data-link-type="dfn"
                        href="https://www.w3.org/TR/secure-contexts/#is-origin-trustworthy"
                        id="ref-for-index-term-is-origin-potentially-trustworthy-2">origin 是否可信</a>算法结果不是
                    <code>Potentially Trustworthy</code>，返回 null。
                </li>

                <li>
                    令 <var>origin</var> 为 <var>request</var> 的 <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin"
                        id="ref-for-index-term-origin-15">origin</a>。
                </li>

                <li>
                    令 <var>policy</var> 为对 <var>request</var> 调用<a href="#choose-a-policy-for-a-request"
                        class="sec-ref"><bdi class="secno">5.1 </bdi>为请求选择策略</a>的结果。若 <var>policy</var>
                    为<code>无策略</code>，返回 null。
                </li>

                <li>
                    确定本次请求的有效采样率：

                    <ul>
                        <li>
                            如果 <var>request</var> <a href="#dfn-succeed" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-succeed-5">成功</a>，令 <var>sampling rate</var> 为 <var>policy</var> 的 <a
                                href="#dfn-successful-sampling-rate" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-successful-sampling-rate-3">成功采样率</a>。
                        </li>
                        <li>
                            如果 <var>request</var> <a href="#dfn-fail" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-fail-6">失败</a>，令 <var>sampling rate</var> 为 <var>policy</var> 的 <a
                                href="#dfn-failure-sampling-rate" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-failure-sampling-rate-3">失败采样率</a>。
                        </li>
                    </ul>
                </li>

                <li>
                    判断本次请求是否应上报。令 <var>roll</var> 为 0.0~1.0 间的随机数。如 <var>roll</var> > <var>sampling rate</var>，返回 null。
                </li>

                <li>
                    令 <var>report body</var> 为新 ECMAScript 对象，包含以下属性：[<cite><a class="bibref" data-link-type="biblio"
                            href="#bib-ecma-262" title="ECMAScript Language Specification">ECMA-262</a></cite>]

                    <dl>
                        <dt><code>sampling_fraction</code></dt>
                        <dd><var>sampling rate</var></dd>

                        <dt><code>elapsed_time</code></dt>
                        <dd>
                            从资源拉取开始到用户代理完成或中止所用的时间（毫秒数）。
                        </dd>

                        <dt><code>phase</code></dt>
                        <dd>
                            若 <var>request</var> <a href="#dfn-fail" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-fail-7">失败</a>，则为其 <a data-lt="type-phase" href="#dfn-type-phase"
                                class="internalDFN" data-link-type="dfn" id="ref-for-dfn-type-phase-1">阶段</a>；如果
                            <var>request</var> <a href="#dfn-succeed" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-succeed-6">成功</a>，则为 <code>"application"</code>。
                        </dd>

                        <dt><code>type</code></dt>
                        <dd>
                            若 <var>request</var> <a href="#dfn-fail" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-fail-8">失败</a>，则为其 <a href="#dfn-types" class="internalDFN"
                                data-link-type="dfn" id="ref-for-dfn-types-2">类型</a>；若 <var>request</var> <a
                                href="#dfn-succeed" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-succeed-7">成功</a>，为 <code>"ok"</code>。
                        </dd>
                    </dl>
                </li>

                <li>
                    如果 <var>report body</var> 的 <code>phase</code> 属性不是 <code>dns</code>，则附加以下属性：
                    <dl>
                        <dt><code>server_ip</code></dt>
                        <dd>用户代理实际发送请求到的<a data-link-type="dfn"
                                href="https://httpwg.org/specs/rfc9110.html#core.semantics"
                                id="ref-for-index-term-server-9">服务器</a>的 IP 地址（如有）；否则为空字符串。
                            <ul>
                                <li>IPv4 用点分十进制表示。</li>
                                <li>IPv6 用 <code>x:x:x:x:x:x:x:x</code> 形式表示。</li>
                            </ul>
                        </dd>

                        <dt><code>protocol</code></dt>
                        <dd>
                            拉取资源使用的<a
                                href="https://www.w3.org/TR/resource-timing/#dom-performanceresourcetiming-nexthopprotocol"
                                id="ref-for-index-term-network-protocol-1">网络协议</a>（以 ALPN Protocol ID 标识，如有）；否则为
                            <code>""</code>。
                        </dd>
                    </dl>
                </li>

                <li>
                    如果 <var>report body</var> 的 <code>phase</code> 不是 <code>dns</code> 或
                    <code>connection</code>，则附加以下属性：
                    <dl>
                        <dt><code>referrer</code></dt>
                        <dd>
                            由 <a data-link-type="dfn" href="https://www.w3.org/TR/referrer-policy/#referrer-policy"
                                id="ref-for-index-term-referrer-policy-1">referrer policy</a> 以及 <a data-link-type="dfn"
                                href="https://fetch.spec.whatwg.org/#concept-request-client"
                                id="ref-for-index-term-client-for-request-1">client</a> 决定的 <var>request</var> 的
                            referrer。
                        </dd>

                        <dt><code>method</code></dt>
                        <dd><var>request</var> 的
                            <a href="https://httpwg.org/specs/rfc9110.html#method"
                                id="ref-for-index-term-request-method-1">请求方法</a>。
                        </dd>

                        <dt><code>request_headers</code></dt>
                        <dd>
                            对 <var>request</var> 和 <var>policy</var> 执行<a href="#extract-request-headers"
                                class="sec-ref"><bdi class="secno">5.2 </bdi>提取请求头</a>的结果。
                        </dd>

                        <dt><code>response_headers</code></dt>
                        <dd>
                            对 <var>response</var> 和 <var>policy</var> 执行<a href="#extract-response-headers"
                                class="sec-ref"><bdi class="secno">5.3 </bdi>提取响应头</a>的结果。
                        </dd>

                        <dt><code>status_code</code></dt>
                        <dd>
                            HTTP 响应的<a href="https://httpwg.org/specs/rfc9110.html#status.code"
                                id="ref-for-index-term-status-code-1">状态码</a>（如有）；否则为 <code>0</code>。
                        </dd>
                    </dl>
                </li>

                <li>
                    如果 <var>origin</var> 不等于 <var>policy</var> 的 <a data-lt="policy origin" href="#dfn-policy-origin"
                        class="internalDFN" data-link-type="dfn" id="ref-for-dfn-policy-origin-2">origin</a>，且
                    <var>policy</var> 的
                    <a href="#dfn-subdomains" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-subdomains-3">subdomains</a> 标志为 <code>include</code>，并且 <var>report body</var>
                    的 <code>phase</code> 不是 <code>dns</code>，
                    返回 null。

                    <div class="note" role="note" id="issue-container-generatedID-8">
                        <div role="heading" class="note-title marker" id="h-note-6" aria-level="4"><span>注</span></div>
                        <p class="">
                            此步骤确保<a data-lt="subdomains" href="#dfn-subdomains" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-subdomains-4">子域</a><a href="#dfn-nel-policies" class="internalDFN"
                                data-link-type="dfn" id="ref-for-dfn-nel-policies-36">NEL 策略</a>只能用于在<a
                                href="#dfn-policy-origin" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-policy-origin-3">策略源点</a>的子域上的<a href="#dfn-dns-resolution"
                                class="internalDFN" data-link-type="dfn" id="ref-for-dfn-dns-resolution-3">DNS 解析</a><a
                                href="#dfn-phase" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-phase-6">阶段</a>生成报告。详情见<a href="#privacy-considerations"
                                class="sec-ref"><bdi class="secno">9. </bdi>隐私注意事项</a>。
                        </p>
                    </div>
                </li>

                <li>
                    如果 <var>report body</var> 的 <code>phase</code> 不是 <code>dns</code>，且 <var>report body</var> 的
                    <code>server_ip</code> 属性非空且不等于 <var>policy</var> 的 <a href="#dfn-received-ip-address"
                        class="internalDFN" data-link-type="dfn" id="ref-for-dfn-received-ip-address-2">接收 IP 地址</a>：

                    <ol>
                        <li>
                            令 <var>report body</var> 的 <code>phase</code> 设为 <code>dns</code>。
                        </li>
                        <li>
                            令 <var>report body</var> 的 <code>type</code> 设为 <code>dns.address_changed</code>。
                        </li>
                        <li>
                            清空 <var>report body</var> 的
                            <code>request_headers</code>、<code>response_headers</code>、<code>status_code</code> 和
                            <code>elapsed_time</code> 属性。
                        </li>
                        <li class="assert">
                            断言：<var>report body</var> 内所有在 <a href="#dfn-dns-resolution" class="internalDFN"
                                data-link-type="dfn" id="ref-for-dfn-dns-resolution-4">DNS 解析</a>期间不可用的信息都已被清除。
                        </li>
                    </ol>

                    <div class="note" role="note" id="issue-container-generatedID-9">
                        <div role="heading" class="note-title marker" id="h-note-7" aria-level="4"><span>注</span>
                        </div>
                        <p class="">
                            当服务器与策略的 IP 地址不匹配时，此步骤会“降级”NEL 报告，仅允许其携带 <a href="#dfn-dns-resolution" class="internalDFN"
                                data-link-type="dfn" id="ref-for-dfn-dns-resolution-5">DNS
                                解析</a>相关信息。这样做目的是隐私保护，确保最后只有域名持有者能收到该报告，否则不可追踪到具体服务器。详见 <a
                                href="#privacy-considerations" class="sec-ref"><bdi class="secno">9. </bdi>隐私注意事项</a> 和
                            <a href="#origins-with-multiple-ip-addresses" class="sec-ref"><bdi class="secno">7.5
                                </bdi>多 IP 地址源站</a>。
                        </p>
                    </div>
                </li>

                <li>
                    如果 <var>policy</var> 已经 <a href="#dfn-stale" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-stale-1">过时</a>，则从 <a href="#dfn-policy-cache" class="internalDFN"
                        data-link-type="dfn" id="ref-for-dfn-policy-cache-9">策略缓存</a>中删除 <var>policy</var>。
                </li>

                <li>
                    返回 <var>report body</var> 与 <var>policy</var>。
                </li>
            </ol>

        </section>
        <section id="deliver-a-network-report-0">
            <div class="header-wrapper">
                <h3 id="deliver-a-network-report" data-dfn-type="dfn" data-export=""><bdi class="secno">5.5
                    </bdi>投递网络报告</h3><a class="self-link" href="#deliver-a-network-report"
                    aria-label="Permalink for Section 5.5"></a>
            </div>

            <p>
                给定一份 ECMAScript 对象（<var>report body</var>，通常由
                <a href="#generate-a-network-error-report">生成网络错误报告</a>返回，随后由调用规范补充）及其匹配的 <a href="#dfn-nel-policies"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-nel-policies-39">NEL
                    策略</a>（<var>policy</var>）和 <a href="#dfn-network-requests" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-network-requests-21">网络请求</a>（<var>request</var>），本算法负责队列化报告以进行投递。
            </p>

            <ol class="algorithm">
                <li>
                    <p>令 <var>url</var> 为 <var>request</var> 的 URL。</p>
                </li>
                <li>
                    <p>移除 <var>url</var> 的 <a data-link-type="dfn"
                            href="https://url.spec.whatwg.org/#concept-url-fragment"
                            id="ref-for-index-term-fragment-for-url-1">片段</a>。</p>
                </li>
                <li>
                    <p>
                        如果 <var>report body</var> 的 <code>phase</code> 属性为
                        <code>dns</code> 或 <code>connection</code>：
                    </p>
                    <ol>
                        <li>
                            <p>移除 <var>url</var> 的 <a data-link-type="dfn"
                                    href="https://url.spec.whatwg.org/#concept-url-path"
                                    id="ref-for-index-term-path-for-url-1">路径</a>和<a data-link-type="dfn"
                                    href="https://url.spec.whatwg.org/#concept-url-query"
                                    id="ref-for-index-term-query-for-url-1">查询</a>。</p>
                        </li>
                    </ol>
                </li>
                <li>
                    <p>以如下参数<a data-link-type="dfn"
                            href="https://w3c.github.io/reporting/network-reporting.html#generate-a-network-report"
                            id="ref-for-index-term-generate-a-network-report-1">生成一个网络报告</a>：</p>

                    <dl>
                        <dt>type</dt>
                        <dd><code>network-error</code></dd>
                        <dt>data</dt>
                        <dd><var>report body</var></dd>
                        <dt>endpoint group</dt>
                        <dd><var>policy</var> 的 <a href="#dfn-reporting-group" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-reporting-group-2">报告组</a></dd>
                        <dt>url</dt>
                        <dd>对 <var>url</var> 执行 <a data-link-type="dfn"
                                href="https://url.spec.whatwg.org/#concept-url-serializer"
                                id="ref-for-index-term-url-serializer-1">URL 序列化器</a> 的结果。
                        </dd>
                    </dl>
                </li>

            </ol>
        </section>
    </section>

    <section id="predefined-network-error-types">
        <div class="header-wrapper">
            <h2 id="x6-predefined-network-error-types"><bdi class="secno">6. </bdi>预定义网络错误类型</h2><a class="self-link"
                href="#predefined-network-error-types" aria-label="Permalink for Section 6."></a>
        </div>

        <p>
            本节定义了若干预定义的<a href="#dfn-network-errors" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-network-errors-7">网络错误</a><a href="#dfn-types" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-types-3">类型</a>。
        </p>

        <p>
            用户代理<em class="rfc2119">可以</em>扩展该列表，添加自定义<a href="#dfn-network-errors" class="internalDFN"
                data-link-type="dfn" id="ref-for-dfn-network-errors-8">网络错误</a>
            <a href="#dfn-types" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-types-4">类型</a>，例如为新协议或现有协议的更详细错误描述增加支持。此时，用户代理<em
                class="rfc2119">应当</em>遵循点分命名（<code>[group].[optional-subgroup].[error-name]</code>）格式，以便对错误报告进行一致和简化的处理——比如收集器可以按类别/子组聚合展示。
        </p>

        <section id="dns-resolution-errors">
            <div class="header-wrapper">
                <h3 id="x6-1-dns-resolution-errors"><bdi class="secno">6.1 </bdi>DNS 解析错误</h3><a class="self-link"
                    href="#dns-resolution-errors" aria-label="Permalink for Section 6.1"></a>
            </div>

            <p>
                本节内所有<a href="#dfn-network-errors" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-network-errors-9">网络错误</a>均发生在<a href="#dfn-dns-resolution" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-dns-resolution-6">DNS 解析</a>阶段，故其<a data-lt="type-phase"
                    href="#dfn-type-phase" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-type-phase-2">phase</a>为 <code>dns</code>。
            </p>

            <dl>
                <dt><code>dns.unreachable</code></dt>
                <dd>DNS 服务器不可达</dd>
                <dt><code>dns.name_not_resolved</code></dt>
                <dd>DNS 服务器有响应，但无法解析该地址</dd>
                <dt><code>dns.failed</code></dt>
                <dd>由于非上述原因，请求 DNS 服务器失败</dd>
                <dt><code>dns.address_changed</code></dt>
                <dd>
                    指定请求的 <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin"
                        id="ref-for-index-term-origin-17">origin</a> 的 IP 地址自对应<a href="#dfn-nel-policies"
                        class="internalDFN" data-link-type="dfn" id="ref-for-dfn-nel-policies-40">NEL 策略</a>下发以来发生了变更
                </dd>
            </dl>
        </section>

        <section id="secure-connection-establishment-errors">
            <div class="header-wrapper">
                <h3 id="x6-2-secure-connection-establishment-errors"><bdi class="secno">6.2 </bdi>安全连接建立错误</h3><a
                    class="self-link" href="#secure-connection-establishment-errors"
                    aria-label="Permalink for Section 6.2"></a>
            </div>

            <p>
                本节内所有<a href="#dfn-network-errors" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-network-errors-10">网络错误</a>均发生在<a href="#dfn-secure-connection-establishment"
                    class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-secure-connection-establishment-2">安全连接建立</a>阶段，故其<a data-lt="type-phase"
                    href="#dfn-type-phase" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-type-phase-3">phase</a>为 <code>connection</code>。
            </p>

            <dl>
                <dt><code>tcp.timed_out</code></dt>
                <dd>与服务器的 TCP 连接超时</dd>

                <dt><code>tcp.closed</code></dt>
                <dd>TCP 连接被服务器关闭</dd>

                <dt><code>tcp.reset</code></dt>
                <dd>TCP 连接被重置</dd>

                <dt><code>tcp.refused</code></dt>
                <dd>服务器拒绝建立 TCP 连接</dd>

                <dt><code>tcp.aborted</code></dt>
                <dd>TCP 连接被中止</dd>

                <dt><code>tcp.address_invalid</code></dt>
                <dd>IP 地址无效</dd>

                <dt><code>tcp.address_unreachable</code></dt>
                <dd>IP 地址不可达</dd>

                <dt><code>tcp.failed</code></dt>
                <dd>由于非上述原因，TCP 连接失败</dd>
            </dl>

            <dl>
                <dt><code>tls.version_or_cipher_mismatch</code></dt>
                <dd>TLS 连接因协议版本或加密套件不匹配而中止</dd>

                <dt><code>tls.bad_client_auth_cert</code></dt>
                <dd>TLS 连接因客户端证书无效而中止</dd>

                <dt><code>tls.cert.name_invalid</code></dt>
                <dd>TLS 连接因证书名称无效而中止</dd>

                <dt><code>tls.cert.date_invalid</code></dt>
                <dd>TLS 连接因证书日期无效而中止</dd>

                <dt><code>tls.cert.authority_invalid</code></dt>
                <dd>TLS 连接因签发机构无效而中止</dd>

                <dt><code>tls.cert.invalid</code></dt>
                <dd>TLS 连接因证书无效而中止</dd>

                <dt><code>tls.cert.revoked</code></dt>
                <dd>TLS 连接因服务器证书已吊销而中止</dd>

                <dt><code>tls.cert.pinned_key_not_in_cert_chain</code></dt>
                <dd>TLS 连接因密钥钉扎错误而中止</dd>

                <dt><code>tls.protocol.error</code></dt>
                <dd>TLS 连接因 TLS 协议错误而中止</dd>

                <dt><code>tls.failed</code></dt>
                <dd>由于非上述原因，TLS 连接失败</dd>
            </dl>
        </section>

        <section id="transmission-of-request-and-response-errors">
            <div class="header-wrapper">
                <h3 id="x6-3-transmission-of-request-and-response-errors"><bdi class="secno">6.3 </bdi>请求和响应传输错误</h3><a
                    class="self-link" href="#transmission-of-request-and-response-errors"
                    aria-label="Permalink for Section 6.3"></a>
            </div>

            <p>
                本节内所有<a href="#dfn-network-errors" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-network-errors-11">网络错误</a>均发生在<a href="#dfn-transmission-of-request-and-response"
                    class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-transmission-of-request-and-response-3">请求和响应传输</a>阶段，故其<a data-lt="type-phase"
                    href="#dfn-type-phase" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-type-phase-4">phase</a>为 <code>application</code>。
            </p>

            <dl>
                <dt><code>http.error</code></dt>
                <dd>
                    用户代理成功接收到响应，但其状态码为 <a data-link-type="dfn" href="https://httpwg.org/specs/rfc9110.html#status.4xx"
                        id="ref-for-index-term-4xx-3">4xx</a>
                    或 <a data-link-type="dfn" href="https://httpwg.org/specs/rfc9110.html#status.5xx"
                        id="ref-for-index-term-5xx-3">5xx</a>
                </dd>

                <dt><code>http.protocol.error</code></dt>
                <dd>因 HTTP 协议错误导致连接中止</dd>

                <dt><code>http.response.invalid</code></dt>
                <dd>响应为空、长度不符、编码不合法等导致用户代理无法处理响应的情况</dd>

                <dt><code>http.response.redirect_loop</code></dt>
                <dd>因检测到重定向循环请求被中止</dd>

                <dt><code>http.failed</code></dt>
                <dd>因协议错误导致连接失败（不属于上面的具体情况）</dd>

            </dl>

            <dl>
                <dt><code>abandoned</code></dt>
                <dd>用户在请求完成前中止了资源拉取</dd>

                <dt><code>unknown</code></dt>
                <dd>错误类型未知</dd>
            </dl>
        </section>

    </section>

    <section id="examples">
        <div class="header-wrapper">
            <h2 id="x7-examples"><bdi class="secno">7. </bdi>示例</h2><a class="self-link" href="#examples"
                aria-label="Permalink for Section 7."></a>
        </div>

        <section id="sample-policy-definitions">
            <div class="header-wrapper">
                <h3 id="x7-1-sample-policy-definitions"><bdi class="secno">7.1 </bdi>策略定义示例</h3><a class="self-link"
                    href="#sample-policy-definitions" aria-label="Permalink for Section 7.1"></a>
            </div>

            <div class="example" id="example-1">
                <div class="marker">
                    <a class="self-link" href="#example-1">示例<bdi> 1</bdi></a>
                </div>
                <pre
                    aria-busy="false"><code class="hljs css">&gt; GET / HTTP/<span class="hljs-number">1.1</span>
&gt; Host: example.com

&lt; HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">200</span> OK
&lt; ...
&lt; Report-To: {"group": <span class="hljs-string">"network-errors"</span>, <span class="hljs-string">"max_age"</span>: <span class="hljs-number">2592000</span>,
              <span class="hljs-string">"endpoints"</span>: [{"url": <span class="hljs-string">"https://example.com/upload-reports"</span>}]}
&lt; NEL: {"report_to": <span class="hljs-string">"network-errors"</span>, <span class="hljs-string">"max_age"</span>: <span class="hljs-number">2592000</span>}</code></pre>
            </div>

            <p>
                该 <code>NEL</code> 响应头定义了一个 <a href="#dfn-nel-policies" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-nel-policies-41">NEL 策略</a>，指示用户代理将关于 <code>example.com</code> 的网络错误报告发送到名为
                <code>network-errors</code> 的 <a data-link-type="dfn"
                    href="https://w3c.github.io/reporting/network-reporting.html#endpoint-group"
                    id="ref-for-index-term-endpoint-group-6">终端组</a>。该策略有效期为 2592000 秒（30 天）。
            </p>

            <p>注意，上述注册仅当响应来自于<a data-link-type="dfn"
                    href="https://www.w3.org/TR/secure-contexts/#potentially-trustworthy-origin"
                    id="ref-for-index-term-potentially-trustworthy-origin-1">潜在可信源点</a>时才会成功。</p>

            <div class="example" id="example-2">
                <div class="marker">
                    <a class="self-link" href="#example-2">示例<bdi> 2</bdi></a>
                </div>
                <pre aria-busy="false"><code class="hljs css">&gt; GET / HTTP/<span class="hljs-number">1.1</span>
&gt; Host: example.com

&lt; HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">200</span> OK
&lt; ...
&lt; NEL: {"max_age": <span class="hljs-number">0</span>}</code></pre>
            </div>

            <p>
                此 <code>NEL</code> 响应头指示用户代理移除 <code>example.com</code> 的所有现有 <a href="#dfn-nel-policies"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-nel-policies-42">NEL 策略</a>。
            </p>

        </section>
        <section id="sample-network-error-reports">
            <div class="header-wrapper">
                <h3 id="x7-2-sample-network-error-reports"><bdi class="secno">7.2 </bdi>网络错误报告示例
                </h3><a class="self-link" href="#sample-network-error-reports"
                    aria-label="Permalink for Section 7.2"></a>
            </div>


            <p>
                本节包含 <a href="#dfn-network-errors" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-network-errors-12">网络错误</a><a data-link-type="dfn"
                    href="https://www.w3.org/TR/reporting-1/#report"
                    id="ref-for-index-term-report-2">报告</a>的示例，当用户代理在某个已经注册了<a href="#dfn-nel-policies"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-nel-policies-43">NEL 策略</a>的 <a
                    data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin"
                    id="ref-for-index-term-origin-18">origin</a> 上遇到网络错误时，用户代理可能会队列化这些报告。我们展示了使用 [<cite><a
                        class="bibref" data-link-type="biblio" href="#bib-reporting"
                        title="Reporting API">REPORTING</a></cite>] API 上传时生成的完整报告载荷；载荷的 <code>body</code> 字段包含 <a
                    href="#dfn-network-errors" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-network-errors-13">网络错误</a><a data-link-type="dfn" data-lt="body"
                    href="https://www.w3.org/TR/reporting-1/#report-body"
                    id="ref-for-index-term-body-for-report-1">报告体</a>。
            </p>

            <div class="example" id="example-3">
                <div class="marker">
                    <a class="self-link" href="#example-3">示例<bdi> 3</bdi></a>
                </div>
                <pre aria-busy="false"><code class="hljs json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"age"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"network-error"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://www.example.com/"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"body"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"sampling_fraction"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.5</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"referrer"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"http://example.com/"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"server_ip"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2001:DB8:0:0:0:0:0:42"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"protocol"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"h2"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"method"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"GET"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"request_headers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"response_headers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"status_code"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">200</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"elapsed_time"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">823</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"phase"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"application"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"http.protocol.error"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span></code></pre>
            </div>

            <p>
                该报告表示用户代理尝试从 <code>example.com</code> 导航到 <code>www.example.com</code>，其成功解析为
                <code>2001:DB8::42</code>。但虽然用户代理从服务器通过 HTTP/2（<code>h2</code>）协议接收到 <a
                    href="https://httpwg.org/specs/rfc9110.html#status.200" id="ref-for-index-term-200-response-1">200
                    响应</a>，却在过程中遇到协议错误，最终放弃导航。用户代理在导航开始 823 毫秒后终止导航。最后，在网络错误发生后立即发送本报告，即报告 age 为 0。
            </p>

            <div class="example" id="example-4">
                <div class="marker">
                    <a class="self-link" href="#example-4">示例<bdi> 4</bdi></a>
                </div>
                <pre aria-busy="false"><code class="hljs json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"age"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"network-error"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://widget.com/thing.js"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"body"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"sampling_fraction"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1.0</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"referrer"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://www.example.com/"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"server_ip"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"protocol"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"method"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"GET"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"request_headers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"response_headers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"status_code"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"elapsed_time"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">143</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"phase"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"dns"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"dns.name_not_resolved"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span></code></pre>
            </div>

            <p>
                上述报告表示用户代理尝试从 <code>https://www.example.com/</code> 获取 <code>https://widget.com/thing.js</code>，但无法解析
                DNS 名称（<code>widget.com</code>），请求在 143 毫秒后被用户代理中止。因先前请求 <code>widget.com</code> 时曾下发有效 <a
                    href="#dfn-nel-policies" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-nel-policies-44">NEL 策略</a>，本次请求产生了 <a href="#dfn-network-errors"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-network-errors-14">网络错误</a><a
                    data-link-type="dfn" href="https://www.w3.org/TR/reporting-1/#report"
                    id="ref-for-index-term-report-3">报告</a>。报告上传于错误发生后立即，即 age 为 0。
            </p>

        </section>

        <section id="dns-misconfiguration">
            <div class="header-wrapper">
                <h3 id="x7-3-dns-misconfiguration"><bdi class="secno">7.3 </bdi>DNS 配置错误</h3><a class="self-link"
                    href="#dns-misconfiguration" aria-label="Permalink for Section 7.3"></a>
            </div>


            <div class="example" id="example-5">
                <div class="marker">
                    <a class="self-link" href="#example-5">示例<bdi> 5</bdi></a>
                </div>
                <pre
                    aria-busy="false"><code class="hljs css">&gt; GET / HTTP/<span class="hljs-number">1.1</span>
&gt; Host: example.com

&lt; HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">200</span> OK
&lt; ...
&lt; Report-To: {"group": <span class="hljs-string">"network-errors"</span>, <span class="hljs-string">"max_age"</span>: <span class="hljs-number">2592000</span>,
              <span class="hljs-string">"endpoints"</span>: [{"url": <span class="hljs-string">"https://example.com/upload-reports"</span>}]}
&lt; NEL: {"report_to": <span class="hljs-string">"network-errors"</span>, <span class="hljs-string">"max_age"</span>: <span class="hljs-number">2592000</span>, <span class="hljs-string">"include_subdomains"</span>: true}</code></pre>
            </div>

            <p>
                此 <code>NEL</code> 响应头允许 <code>example.com</code> 的所有者检测 DNS 配置错误——例如遗忘添加解析
                <code>new-subdomain.example.com</code> 到 IP 地址的新资源记录。当用户代理尝试请求 <code>new-subdomain.example.com</code>
                时，可能会生成如下报告：
            </p>

            <div class="example" id="example-6">
                <div class="marker">
                    <a class="self-link" href="#example-6">示例<bdi> 6</bdi></a>
                </div>
                <pre aria-busy="false"><code class="hljs json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"age"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"network-error"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://new-subdomain.example.com/"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"body"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"sampling_fraction"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1.0</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"server_ip"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"protocol"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"http/1.1"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"method"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"GET"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"request_headers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"response_headers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"status_code"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"elapsed_time"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">48</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"phase"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"dns"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"dns.name_not_resolved"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span></code></pre>
            </div>

        </section>

        <section id="monitoring-cache-validation">
            <div class="header-wrapper">
                <h3 id="x7-4-monitoring-cache-validation"><bdi class="secno">7.4 </bdi>缓存校验监控</h3>
                <a class="self-link" href="#monitoring-cache-validation" aria-label="Permalink for Section 7.4"></a>
            </div>


            <div class="example" id="example-7">
                <div class="marker">
                    <a class="self-link" href="#example-7">示例<bdi> 7</bdi></a>
                </div>
                <pre aria-busy="false"><code class="hljs css">&gt; GET / HTTP/<span class="hljs-number">1.1</span>
&gt; Host: example.com

&lt; HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">200</span> OK
&lt; ...
&lt; Report-To: {"group": <span class="hljs-string">"network-errors"</span>, <span class="hljs-string">"max_age"</span>: <span class="hljs-number">2592000</span>,
              <span class="hljs-string">"endpoints"</span>: [{"url": <span class="hljs-string">"https://example.com/upload-reports"</span>}]}
&lt; NEL: {"report_to": <span class="hljs-string">"network-errors"</span>, <span class="hljs-string">"max_age"</span>: <span class="hljs-number">2592000</span>, <span class="hljs-string">"success_fraction"</span>: <span class="hljs-number">1.0</span>,
        <span class="hljs-string">"request_headers"</span>: [<span class="hljs-string">"If-None-Match"</span>], <span class="hljs-string">"response_headers"</span>: [<span class="hljs-string">"ETag"</span>]}
&lt; ETag: <span class="hljs-number">01234</span>abcd</code></pre>
            </div>

            <p>
                在本例中，<code>example.com</code> 的所有者使用 <dfn id="dfn-etag" class="externalDFN" data-no-export=""
                    data-dfn-type="dfn"><a href="https://httpwg.org/specs/rfc9110.html#field.etag"
                        id="ref-for-index-term-etag-1"><code>ETag</code></a></dfn> 响应头标识对应资源的不同版本。用户代理随后可使用 <dfn
                    id="dfn-if-none-match" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a
                        href="https://httpwg.org/specs/rfc9110.html#field.if-none-match"
                        id="ref-for-index-term-if-none-match-1"><code>If-None-Match</code></a></dfn>
                请求头告知服务器客户端已缓存的资源版本，从而在副本有效时避免生成和下发内容。
            </p>

            <p>
                通过让该域名的 <code>NEL</code> 响应头包含 <a href="#dfn-request_headers" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-request_headers-3"><code>request_headers</code></a> 和 <a
                    href="#dfn-response_headers" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-response_headers-3"><code>response_headers</code></a> 字段，浏览器将在 NEL 报告中包含 <a
                    data-link-type="dfn" href="https://httpwg.org/specs/rfc9110.html#field.if-none-match"
                    id="ref-for-index-term-if-none-match-2"><code>If-None-Match</code></a> 请求头和 <a data-link-type="dfn"
                    href="https://httpwg.org/specs/rfc9110.html#field.etag"
                    id="ref-for-index-term-etag-2"><code>ETag</code></a> 响应头的副本，从而让站点所有者追踪缓存策略效果。
            </p>

            <p>
                基于上述，考虑以下事件流程：
            </p>

            <ol>
                <li>
                    <p>
                        用户代理向 <code>example.com</code> 发送 <a data-link-type="dfn"
                            href="https://fetch.spec.whatwg.org/#concept-request"
                            id="ref-for-index-term-request-8">请求</a>，收到 <a data-link-type="dfn"
                            href="https://fetch.spec.whatwg.org/#concept-response"
                            id="ref-for-index-term-response-5">成功响应</a>，响应中含有 <a data-link-type="dfn"
                            href="https://httpwg.org/specs/rfc9110.html#field.etag"
                            id="ref-for-index-term-etag-3"><code>ETag</code></a>。用户代理将生成如下 NEL 报告：
                    </p>

                    <div class="example" id="example-8">
                        <div class="marker">
                            <a class="self-link" href="#example-8">示例<bdi> 8</bdi></a>
                        </div>
                        <pre aria-busy="false"><code class="hljs json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"age"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"network-error"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://example.com/"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"body"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"sampling_fraction"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1.0</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"server_ip"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"192.0.2.1"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"protocol"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"http/1.1"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"method"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"GET"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"request_headers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"response_headers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"ETag"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"01234abcd"</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"status_code"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">200</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"elapsed_time"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1392</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"phase"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"application"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ok"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span></code></pre>
                    </div>
                </li>

                <li>
                    <p>
                        之后用户代理又发送一次 <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request"
                            id="ref-for-index-term-request-9">请求</a>，本地仍有原始资源副本，并在 <a data-link-type="dfn"
                            href="https://httpwg.org/specs/rfc9110.html#field.if-none-match"
                            id="ref-for-index-term-if-none-match-3"><code>If-None-Match</code></a>
                        请求头中添加其版本。服务器检查该版本仍然有效，并返回 <code>304</code> 响应，表示缓存依然有效。用户代理将生成如下报告：
                    </p>

                    <div class="example" id="example-9">
                        <div class="marker">
                            <a class="self-link" href="#example-9">示例<bdi> 9</bdi></a>
                        </div>
                        <pre aria-busy="false"><code class="hljs css">{
  "age": <span class="hljs-number">0</span>,
  <span class="hljs-string">"type"</span>: <span class="hljs-string">"network-error"</span>,
  <span class="hljs-string">"url"</span>: <span class="hljs-string">"https://example.com/"</span>,
  <span class="hljs-string">"body"</span>: {
    "sampling_fraction": <span class="hljs-number">1.0</span>,
    <span class="hljs-string">"server_ip"</span>: <span class="hljs-string">"192.0.2.1"</span>,
    <span class="hljs-string">"protocol"</span>: <span class="hljs-string">"http/1.1"</span>,
    <span class="hljs-string">"method"</span>: <span class="hljs-string">"GET"</span>,
    <span class="hljs-string">"request_headers"</span>: {
      "If-<span class="hljs-attribute">None</span>-Match": [<span class="hljs-string">"01234abcd"</span>]
    },
    "response_headers": {
      "ETag": [<span class="hljs-string">"01234abcd"</span>]
    },
    "status_code": <span class="hljs-number">304</span>,
    <span class="hljs-string">"elapsed_time"</span>: <span class="hljs-number">45</span>,
    <span class="hljs-string">"phase"</span>: <span class="hljs-string">"application"</span>,
    <span class="hljs-string">"type"</span>: <span class="hljs-string">"ok"</span>
  }
}</code></pre>
                    </div>
                </li>

                <li>
                    <p>
                        晚些时候，用户代理再次向 <code>example.com</code> 发送 <a data-link-type="dfn"
                            href="https://fetch.spec.whatwg.org/#concept-request"
                            id="ref-for-index-term-request-10">请求</a>，缓存依然，与前例一样带了 <a data-link-type="dfn"
                            href="https://httpwg.org/specs/rfc9110.html#field.if-none-match"
                            id="ref-for-index-term-if-none-match-4"><code>If-None-Match</code></a>，但服务器此时检测到有新版本，生成并下发新内容及新的
                        <a data-link-type="dfn" href="https://httpwg.org/specs/rfc9110.html#field.etag"
                            id="ref-for-index-term-etag-4"><code>ETag</code></a>，用户代理生成如下报告：
                    </p>

                    <div class="example" id="example-10">
                        <div class="marker">
                            <a class="self-link" href="#example-10">示例<bdi> 10</bdi></a>
                        </div>
                        <pre aria-busy="false"><code class="hljs css">{
  "age": <span class="hljs-number">0</span>,
  <span class="hljs-string">"type"</span>: <span class="hljs-string">"network-error"</span>,
  <span class="hljs-string">"url"</span>: <span class="hljs-string">"https://example.com/"</span>,
  <span class="hljs-string">"body"</span>: {
    "sampling_fraction": <span class="hljs-number">1.0</span>,
    <span class="hljs-string">"server_ip"</span>: <span class="hljs-string">"192.0.2.1"</span>,
    <span class="hljs-string">"protocol"</span>: <span class="hljs-string">"http/1.1"</span>,
    <span class="hljs-string">"method"</span>: <span class="hljs-string">"GET"</span>,
    <span class="hljs-string">"request_headers"</span>: {
      "If-<span class="hljs-attribute">None</span>-Match": [<span class="hljs-string">"01234abcd"</span>]
    },
    "response_headers": {
      "ETag": [<span class="hljs-string">"56789ef01"</span>]
    },
    "status_code": <span class="hljs-number">200</span>,
    <span class="hljs-string">"elapsed_time"</span>: <span class="hljs-number">935</span>,
    <span class="hljs-string">"phase"</span>: <span class="hljs-string">"application"</span>,
    <span class="hljs-string">"type"</span>: <span class="hljs-string">"ok"</span>
  }
}</code></pre>
                    </div>
                </li>
            </ol>
        </section>

        <section id="origins-with-multiple-ip-addresses">
            <div class="header-wrapper">
                <h3 id="x7-5-origins-with-multiple-ip-addresses"><bdi class="secno">7.5 </bdi>多 IP 地址的源站</h3><a
                    class="self-link" href="#origins-with-multiple-ip-addresses"
                    aria-label="Permalink for Section 7.5"></a>
            </div>

            <p>
                对于 <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin"
                    id="ref-for-index-term-origin-19">origin</a> 的 <a data-link-type="dfn"
                    href="https://www.rfc-editor.org/rfc/rfc1034#section-3.1"
                    id="ref-for-index-term-domain-name-3">域名</a>解析为多个 IP 地址的情况，NEL 有时会“降级”错误报告，仅保留更少的出错信息，因为用户代理无法确认 <a
                    data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin"
                    id="ref-for-index-term-origin-20">origin</a> 的拥有者和实际 <a data-link-type="dfn"
                    href="https://httpwg.org/specs/rfc9110.html#core.semantics"
                    id="ref-for-index-term-server-13">服务器</a>的拥有者一致。
            </p>

            <p>
                例如，假设 <code>example.com</code> 由三个不同 IP 地址的 <a data-link-type="dfn"
                    href="https://httpwg.org/specs/rfc9110.html#core.semantics"
                    id="ref-for-index-term-server-14">服务器</a> 负责，服务端将 DNS 解析为
                <code>192.0.2.1</code>、<code>192.0.2.2</code>、<code>192.0.2.3</code>，并依靠用户代理对其请求进行负载均衡。服务所有者会下发如下 <a
                    href="#dfn-nel-policies" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-nel-policies-45">NEL 策略</a>：
            </p>

            <div class="example" id="example-11">
                <div class="marker">
                    <a class="self-link" href="#example-11">示例<bdi> 11</bdi></a>
                </div>
                <pre
                    aria-busy="false"><code class="hljs css">&gt; GET / HTTP/<span class="hljs-number">1.1</span>
&gt; Host: example.com

&lt; HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">200</span> OK
&lt; ...
&lt; Report-To: {"group": <span class="hljs-string">"network-errors"</span>, <span class="hljs-string">"max_age"</span>: <span class="hljs-number">2592000</span>,
              <span class="hljs-string">"endpoints"</span>: [{"url": <span class="hljs-string">"https://example.com/upload-reports"</span>}]}
&lt; NEL: {"report_to": <span class="hljs-string">"network-errors"</span>, <span class="hljs-string">"max_age"</span>: <span class="hljs-number">2592000</span>,
        <span class="hljs-string">"success_fraction"</span>: <span class="hljs-number">1.0</span>, <span class="hljs-string">"failure_fraction"</span>: <span class="hljs-number">1.0</span>}</code></pre>
            </div>

            <p>
                基于上述，考虑如下事件序列：
            </p>

            <ol>
                <li>
                    <p>
                        用户代理向 <code>192.0.2.1</code> 发送 <a data-link-type="dfn"
                            href="https://fetch.spec.whatwg.org/#concept-request"
                            id="ref-for-index-term-request-12">请求</a>，收到 <a data-link-type="dfn"
                            href="https://fetch.spec.whatwg.org/#concept-response"
                            id="ref-for-index-term-response-6">成功响应</a>。响应中也包含上述 <a href="#dfn-nel-policies"
                            class="internalDFN" data-link-type="dfn" id="ref-for-dfn-nel-policies-46">NEL
                            策略</a>，用户代理将策略的 <a href="#dfn-received-ip-address" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-received-ip-address-3">接收 IP 地址</a> 设为 <code>192.0.2.1</code>。由于接收 IP 地址与服务器
                        IP 地址匹配（成功请求必然如此），生成如下 NEL 报告：
                    </p>

                    <div class="example" id="example-12">
                        <div class="marker">
                            <a class="self-link" href="#example-12">示例<bdi> 12</bdi></a>
                        </div>
                        <pre aria-busy="false"><code class="hljs json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"age"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"network-error"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://example.com/"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"body"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"sampling_fraction"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1.0</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"server_ip"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"192.0.2.1"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"protocol"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"http/1.1"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"method"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"GET"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"request_headers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"response_headers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"status_code"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">200</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"elapsed_time"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">57</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"phase"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"application"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ok"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span></code></pre>
                    </div>
                </li>

                <li>
                    <p>
                        用户代理再向 <code>192.0.2.2</code> 发送请求收到成功响应，此响应同样包含 <a href="#dfn-nel-policies" class="internalDFN"
                            data-link-type="dfn" id="ref-for-dfn-nel-policies-47">NEL 策略</a>，用户代理将策略的 <a
                            href="#dfn-received-ip-address" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-received-ip-address-5">接收 IP 地址</a> 更新为 <code>192.0.2.2</code>，由于匹配，生成如下报告：
                    </p>

                    <div class="example" id="example-13">
                        <div class="marker">
                            <a class="self-link" href="#example-13">示例<bdi> 13</bdi></a>
                        </div>
                        <pre aria-busy="false"><code class="hljs json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"age"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"network-error"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://example.com/"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"body"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"sampling_fraction"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1.0</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"server_ip"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"192.0.2.2"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"protocol"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"http/1.1"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"method"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"GET"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"request_headers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"response_headers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"status_code"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">200</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"elapsed_time"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">34</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"phase"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"application"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ok"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span></code></pre>
                    </div>
                </li>

                <li>
                    <p>
                        用户代理再尝试向 <code>192.0.2.3</code> 发送请求，但无法建立连接。此时策略仍在 <a href="#dfn-policy-cache"
                            class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-policy-cache-10">策略缓存</a>中，理想状况下用户代理会生成 about <a href="#dfn-fail"
                            class="internalDFN" data-link-type="dfn" id="ref-for-dfn-fail-9">失败</a>
                        <a href="#dfn-network-requests" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-network-requests-22">网络请求</a> 的 <code>tcp.timed_out</code> 报告。但实际上由于策略中的“接收
                        IP 地址” (<code>192.0.2.2</code>) 与本次请求实际的服务器 IP 不符，用户代理无法确认 <code>192.0.2.3</code> 是否归属于
                        <code>example.com</code> 拥有者，因此必须降级为 <code>dns.address_changed</code>：
                    </p>

                    <div class="example" id="example-14">
                        <div class="marker">
                            <a class="self-link" href="#example-14">示例<bdi> 14</bdi></a>
                        </div>
                        <pre aria-busy="false"><code class="hljs json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"age"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"network-error"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://example.com/"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"body"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"sampling_fraction"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1.0</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"server_ip"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"192.0.2.3"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"protocol"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"http/1.1"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"method"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"GET"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"request_headers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"response_headers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"status_code"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"elapsed_time"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"phase"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"dns"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"dns.address_changed"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span></code></pre>
                    </div>
                </li>

                <li>
                    <p>
                        用户代理再试图向 <code>192.0.2.1</code> 发送新请求，但依然无法建立连接。尽管用户代理曾经从 <code>192.0.2.1</code> 获得过 <a
                            href="#dfn-nel-policies" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-nel-policies-49">NEL 策略</a>，但策略记录的“接收 IP 地址”仅保留最近一次获取时的（这里为
                        <code>192.0.2.2</code>），因此依然需要降级为 <code>dns.address_changed</code>：
                    </p>

                    <div class="example" id="example-15">
                        <div class="marker">
                            <a class="self-link" href="#example-15">示例<bdi> 15</bdi></a>
                        </div>
                        <pre aria-busy="false"><code class="hljs json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"age"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"network-error"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://example.com/"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"body"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"sampling_fraction"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1.0</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"server_ip"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"192.0.2.1"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"protocol"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"http/1.1"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"method"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"GET"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"request_headers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"response_headers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"status_code"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"elapsed_time"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"phase"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"dns"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"dns.address_changed"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span></code></pre>
                    </div>
                </li>
            </ol>
        </section>
    </section>

    <section id="use-cases">
        <div class="header-wrapper">
            <h2 id="x8-use-cases"><bdi class="secno">8. </bdi>使用场景</h2><a class="self-link" href="#use-cases"
                aria-label="Permalink for Section 8."></a>
        </div>

        <section id="reporting-of-navigation-failures">
            <div class="header-wrapper">
                <h3 id="x8-1-reporting-of-navigation-failures"><bdi class="secno">8.1 </bdi>导航失败的报告</h3><a
                    class="self-link" href="#reporting-of-navigation-failures"
                    aria-label="Permalink for Section 8.1"></a>
            </div>

            <p>用户发起的导航请求（如点击链接、地址栏直接输入，由用户操作触发的脚本导航等），可能因多种连接性问题而失败：如 DNS 失败、TCP 错误、TLS
                协议违规等。这些错误可能由网络配置错误、临时路由问题、服务器宕机、恶意软件或针对用户的攻击等原因造成。</p>

            <p>在这种情况下，目标主机往往无法意识到导航失败，因为其根本看不到该请求进入自己的基础设施，也无法调查问题原因。为了解决这个问题，主机可以向用户代理注册一个<a href="#dfn-nel-policies"
                    class="internalDFN" data-link-type="dfn" id="ref-for-dfn-nel-policies-50">NEL
                    策略</a>，指定这些失败报告应投递到哪里，以便进行后续分析。</p>
        </section>

        <section id="reporting-of-first-party-subresource-fetch-failures">
            <div class="header-wrapper">
                <h3 id="x8-2-reporting-of-first-party-subresource-fetch-failures"><bdi class="secno">8.2
                    </bdi>第一方子资源拉取失败的报告</h3><a class="self-link"
                    href="#reporting-of-first-party-subresource-fetch-failures"
                    aria-label="Permalink for Section 8.2"></a>
            </div>

            <p>一个典型的应用需要几十个资源，这些资源通常通过 HTML、CSS 或 JavaScript 进行拉取。应用本身可以通过 <code>onerror</code>
                回调等方式观察到部分失败，但无法获知导致失败的详细网络错误原因，例如 DNS 故障、TCP 错误、TLS 协议错误等。</p>

            <p>为解决这一问题，应用可以为用于拉取子资源的第一方主机向用户代理注册相关的<a href="#dfn-nel-policies" class="internalDFN" data-link-type="dfn"
                    id="ref-for-dfn-nel-policies-51">NEL 策略</a>。这样，只要策略存在且遇到某一已注册<a data-link-type="dfn"
                    href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin"
                    id="ref-for-index-term-origin-21">origin</a>资源的网络错误时，用户代理就会报告详细的网络错误，帮助开发者排查故障。</p>
        </section>

        <section id="reporting-of-third-party-subresource-fetch-failures">
            <div class="header-wrapper">
                <h3 id="x8-3-reporting-of-third-party-subresource-fetch-failures"><bdi class="secno">8.3
                    </bdi>第三方子资源拉取失败的报告</h3><a class="self-link"
                    href="#reporting-of-third-party-subresource-fetch-failures"
                    aria-label="Permalink for Section 8.3"></a>
            </div>

            <p>当资源被第三方嵌入时，资源提供者通常无法埋点或观察到失败。例如 <code>example.com</code> 在站点中嵌入了 <code>widget.com/thing.js</code> 资源，而访问
                <code>example.com</code> 的用户如果因网络错误拉取该资源失败，<code>widget.com</code> 主机既不知晓也无法检测此失败。
            </p>

            <p>为解决该问题，<code>widget.com</code> 可以为自身主机注册 NEL 策略。这样，只要策略生效，无论资源是从第一方还是第三方 origin 拉取，只要遇到网络错误——只要目标<a
                    data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin"
                    id="ref-for-index-term-origin-22">origin</a>注册了<a href="#dfn-nel-policies" class="internalDFN"
                    data-link-type="dfn" id="ref-for-dfn-nel-policies-53">NEL 策略</a>，用户代理就会报告网络错误并使服务商能够排查问题。</p>
        </section>
    </section>

    <section id="privacy-considerations">
        <div class="header-wrapper">
            <h2 id="x9-privacy-considerations"><bdi class="secno">9. </bdi>隐私注意事项</h2><a class="self-link"
                href="#privacy-considerations" aria-label="Permalink for Section 9."></a>
        </div>

        <p>
            NEL 提供的网络错误报告有可能暴露用户网络配置的新信息。例如攻击者可以滥用 NEL 上报来探测用户的网络结构，或者扫描用户内网服务器。此外，类似 HSTS、HPKP 和 CSP 钉扎策略，已存储的<a
                href="#dfn-nel-policies" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-nel-policies-54">NEL
                策略</a>也可被用作“超级 Cookie”，通过定制唯一的（每用户）上报 URI 用于标识符，替代或协同 HTTP cookie 实现跟踪。
        </p>

        <p>
            为降低上述风险，NEL 注册仅限于<a data-link-type="dfn"
                href="https://www.w3.org/TR/secure-contexts/#potentially-trustworthy-origin"
                id="ref-for-index-term-potentially-trustworthy-origin-2">潜在可信源点</a>，网络错误报告的投递同样只允许发往<a
                data-link-type="dfn" href="https://www.w3.org/TR/secure-contexts/#potentially-trustworthy-origin"
                id="ref-for-index-term-potentially-trustworthy-origin-3">潜在可信源点</a>。这样可防止短暂的 HTTP MITM 利用 NEL 作为持久追踪器。
        </p>

        <p>
            此外，NEL 的 <a href="#dfn-policy-cache" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-policy-cache-11">策略缓存</a>按<a data-link-type="dfn"
                href="https://fetch.spec.whatwg.org/#network-partition-key"
                id="ref-for-index-term-network-partition-key-4">网络分区密钥</a>进行分区，使得同一站点在不同嵌套场景下存储的<a
                href="#dfn-nel-policies" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-nel-policies-55">NEL
                策略</a>不会被另一上下文复用（比如，被不同顶级站点嵌入时）。
        </p>

        <p>
            NEL 旨在补充现有服务端监控功能。NEL 报告应只发给当前被请求服务的所有者。对于<a href="#dfn-dns-resolution" class="internalDFN"
                data-link-type="dfn" id="ref-for-dfn-dns-resolution-7">DNS 解析</a>阶段发生的错误，只有当 NEL 策略由该错误<dfn
                id="dfn-domain-namespace-tree" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a
                    href="https://www.rfc-editor.org/rfc/rfc1034#section-3.1"
                    id="ref-for-index-term-domain-name-4">域名命名树</a></dfn>的所有者下发时，NEL 才会上报错误。对于发生在<a
                href="#dfn-secure-connection-establishment" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-secure-connection-establishment-3">安全连接建立</a>或 <a
                href="#dfn-transmission-of-request-and-response" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-transmission-of-request-and-response-4">请求与响应传输</a>阶段的错误，则只有 NEL 策略来自请求实际发往服务器的所有者时才会上报。
        </p>

        <p>
            上述原因解释了 NEL 策略的<a href="#dfn-received-ip-address" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-received-ip-address-9">接收 IP 地址</a>和<a href="#dfn-subdomains" class="internalDFN"
                data-link-type="dfn" id="ref-for-dfn-subdomains-5">子域</a>标志的处理方式。通过检查策略的接收 IP 是否与<a data-link-type="dfn"
                href="https://httpwg.org/specs/rfc9110.html#core.semantics"
                id="ref-for-index-term-server-19">服务器</a>IP一致，NEL 将策略的信任边界同时扩展到服务器，使其不仅仅信任策略<a data-lt="policy origin"
                href="#dfn-policy-origin" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-policy-origin-5">origin</a>，还要求校验实际通信服务器。这样可防止如 DNS 重绑定攻击（一方下发长期有效 NEL，随后变更 name
            server，把该 origin 指向另一个自己不控制服务器，导致用户代理把第二台服务器的报告发给攻击者）。
        </p>

        <p>
            同样，<a data-lt="subdomains" href="#dfn-subdomains" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-subdomains-6">子域</a>相关的 NEL 策略也有限制，只允许在<a href="#dfn-policy-origin" class="internalDFN"
                data-link-type="dfn" id="ref-for-dfn-policy-origin-7">策略源点</a>子域的<a href="#dfn-dns-resolution"
                class="internalDFN" data-link-type="dfn" id="ref-for-dfn-dns-resolution-8">DNS 解析</a><a
                href="#dfn-phase" class="internalDFN" data-link-type="dfn"
                id="ref-for-dfn-phase-7">阶段</a>时上报。此时还未连接服务器，因此只需验证策略是由该 <a data-link-type="dfn"
                href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin"
                id="ref-for-index-term-origin-23">origin</a>的超级域送达即可，允许域名所有者以 NEL 检测<a href="#dns-misconfiguration"
                class="sec-ref"><bdi class="secno">7.3 </bdi>DNS 配置错误</a>，防止恶意 DNS 收集不属于所有者的信息。
        </p>

        <p>
            为防止信息泄露，NEL 关于某个 <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request"
                id="ref-for-index-term-request-20">请求</a> 的报告不会包含服务器在处理该请求时无法看到的任何信息。对<a href="#dfn-dns-resolution"
                class="internalDFN" data-link-type="dfn" id="ref-for-dfn-dns-resolution-9">DNS 解析阶段</a>的错误，报告内容仅限于 DNS
            层可获取信息。这可防止服务器滥用 NEL 收集更多用户信息。注意 NEL 报告会包含网站公网 IP（<code>server_ip</code> 字段），该 IP 未必总被服务端知晓（如位于负载均衡后）。
        </p>

        <div class="note" role="note" id="issue-container-generatedID-10">
            <div role="heading" class="note-title marker" id="h-note-8" aria-level="3"><span>注</span></div>
            <p class="">
                例如，NEL 报告不会包含任何关于具体使用了哪台 DNS <a href="https://www.rfc-editor.org/rfc/rfc1034#section-5"
                    id="ref-for-index-term-resolver-1">解析器</a>解析请求<a data-link-type="dfn"
                    href="https://fetch.spec.whatwg.org/#concept-request" id="ref-for-index-term-request-22">domain
                    name</a>的信息。
            </p>
        </div>

        <p>除上述约束外，用户代理<em class="rfc2119">必须</em>：</p>

        <ul>
            <li>用户清除浏览数据（cookie、站点数据、历史记录等）时，清空已保存的 NEL 策略。</li>
            <li>在投递网络错误报告时拒绝处理 Set-Cookie 响应头。</li>
        </ul>

        <p>开发部署 NEL 时<em class="rfc2119">应当</em>考虑 NEL 报告投递给指定收集器后的隐私影响。例如，报告可能包含带有敏感数据的 URL（如“能力型
            URL”），需要特殊防护（见[<cite><a class="bibref" data-link-type="biblio" href="#bib-capability-urls"
                    title="Good Practices for Capability URLs">CAPABILITY-URLS</a></cite>]），
            并可能需要开发者自行部署 NEL 收集器以防止这类 URL 被第三方收到。
        </p>
    </section>

    <section id="iana-considerations">
        <div class="header-wrapper">
            <h2 id="x10-iana-considerations"><bdi class="secno">10. </bdi>IANA 注意事项</h2><a class="self-link"
                href="#iana-considerations" aria-label="Permalink for Section 10."></a>
        </div>

        <p>应按如下登记更新永久消息头字段注册表（见[<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc3864"
                    title="Registration Procedures for Message Header Fields">RFC3864</a></cite>]）：</p>

        <section id="nel">
            <div class="header-wrapper">
                <h3 id="x10-1-nel"><bdi class="secno">10.1 </bdi><code>NEL</code></h3><a class="self-link" href="#nel"
                    aria-label="Permalink for Section 10.1"></a>
            </div>

            <dl>
                <dt>Header field name</dt>
                <dd><code>NEL</code></dd>
                <dt>Applicable protocol</dt>
                <dd>http</dd>
                <dt>Status</dt>
                <dd>standard</dd>
                <dt>Author/Change controller</dt>
                <dd><abbr title="World Wide Web Consortium">W3C</abbr></dd>
                <dt>Specification document</dt>
                <dd>本规范（见<a href="#dfn-nel" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-nel-7"><code>NEL</code></a> 响应头）</dd>
            </dl>
        </section>
    </section>
    <section id="index" class="appendix">
        <div class="header-wrapper">
            <h2 id="a-index"><bdi class="secno">A. </bdi>索引</h2><a class="self-link" href="#index"
                aria-label="Permalink for Appendix A."></a>
        </div>
        <section id="index-defined-here">
            <div class="header-wrapper">
                <h3 id="a-1-terms-defined-by-this-specification"><bdi class="secno">A.1 </bdi>本规范定义的术语</h3><a
                    class="self-link" href="#index-defined-here" aria-label="Permalink for Appendix A.1"></a>
            </div>

            <ul class="index">
                <li>
                    <a class="index-term" href="#dfn-creation">creation（创建）</a>
                    <span class="print-only">§3.4</span>
                </li>
                <li>
                    <a class="index-term" href="#dfn-dns-resolution">DNS resolution（DNS 解析）</a>
                    <span class="print-only">§3.1</span>
                </li>
                <li>
                    <a class="index-term" href="#dfn-expired">expired（已过期）</a>
                    <span class="print-only">§3.4</span>
                </li>
                <li>
                    <a class="index-term" href="#dfn-fail">failed（失败）</a>
                    <span class="print-only">§3.1</span>
                </li>
                <li>
                    <a class="index-term" href="#dfn-failure-sampling-rate">failure sampling rate（失败采样率）</a>
                    <span class="print-only">§3.5</span>
                </li>
                <li>
                    <a class="index-term" href="#dfn-failure_fraction">failure_fraction</a>
                    <span class="print-only">§4.1.5</span>
                </li>
                <li>
                    <a class="index-term" href="#dfn-include_subdomains">include_subdomains</a>
                    <span class="print-only">§4.1.3</span>
                </li>
                <li>
                    <a class="index-term" href="#dfn-max_age">max_age</a>
                    <span class="print-only">§4.1.2</span>
                </li>
                <li>
                    <a class="index-term" href="#dfn-nel">NEL</a>
                    <span class="print-only">§4.1</span>
                </li>
                <li>
                    <a class="index-term" href="#dfn-nel-policies">NEL policy（NEL 策略）</a>
                    <span class="print-only">§3.4</span>
                </li>
                <li>
                    <a class="index-term" href="#dfn-network-errors">network error（网络错误）</a>
                    <span class="print-only">§3.2</span>
                </li>
                <li>
                    <a class="index-term" href="#dfn-network-error-reports">network error report（网络错误报告）</a>
                    <span class="print-only">§3.3</span>
                </li>
                <li>
                    <a class="index-term" href="#dfn-network-requests">network request（网络请求）</a>
                    <span class="print-only">§3.1</span>
                </li>
                <li>
                    <a class="index-term" href="#dfn-policy-origin">origin（源点）</a>
                    <span class="print-only">§3.4</span>
                </li>
                <li>
                    <a class="index-term" href="#dfn-type-phase">phase（阶段）</a>
                    <span class="print-only">§3.2</span>
                </li>
                <li>
                    <a class="index-term" href="#dfn-phase">phases（各阶段）</a>
                    <span class="print-only">§3.1</span>
                </li>
                <li>
                    <a class="index-term" href="#dfn-policy-cache">policy cache（策略缓存）</a>
                    <span class="print-only">§3.6</span>
                </li>
                <li>
                    <a class="index-term" href="#dfn-received-ip-address">received IP address（接收 IP 地址）</a>
                    <span class="print-only">§3.4</span>
                </li>
                <li>
                    <a class="index-term" href="#dfn-report_to">report_to</a>
                    <span class="print-only">§4.1.1</span>
                </li>
                <li>
                    <a class="index-term" href="#dfn-reporting-group">reporting group（报告组）</a>
                    <span class="print-only">§3.4</span>
                </li>
                <li>
                    <a class="index-term" href="#dfn-policy-request-headers">request headers（策略请求头）</a>
                    <span class="print-only">§3.4</span>
                </li>
                <li>
                    <a class="index-term" href="#dfn-request_headers">request_headers</a>
                    <span class="print-only">§4.1.6</span>
                </li>
                <li>
                    <a class="index-term" href="#dfn-policy-response-headers">response headers（策略响应头）</a>
                    <span class="print-only">§3.4</span>
                </li>
                <li>
                    <a class="index-term" href="#dfn-response_headers">response_headers</a>
                    <span class="print-only">§4.1.7</span>
                </li>
                <li>
                    <a class="index-term" href="#dfn-sampling-rate">sampling rates（采样率）</a>
                    <span class="print-only">§3.5</span>
                </li>
                <li>
                    <a class="index-term" href="#dfn-secure-connection-establishment">Secure connection
                        establishment（安全连接建立）</a>
                    <span class="print-only">§3.1</span>
                </li>
                <li>
                    <a class="index-term" href="#dfn-stale">stale（过时）</a>
                    <span class="print-only">§3.4</span>
                </li>
                <li>
                    <a class="index-term" href="#dfn-subdomains">subdomains（子域）</a>
                    <span class="print-only">§3.4</span>
                </li>
                <li>
                    <a class="index-term" href="#dfn-success_fraction">success_fraction</a>
                    <span class="print-only">§4.1.4</span>
                </li>
                <li>
                    <a class="index-term" href="#dfn-succeed">successful（成功）</a>
                    <span class="print-only">§3.1</span>
                </li>
                <li>
                    <a class="index-term" href="#dfn-successful-sampling-rate">successful sampling rate（成功采样率）</a>
                    <span class="print-only">§3.5</span>
                </li>
                <li>
                    <a class="index-term" href="#dfn-transmission-of-request-and-response">Transmission of request and
                        response（请求与响应传输）</a>
                    <span class="print-only">§3.1</span>
                </li>
                <li>
                    <a class="index-term" href="#dfn-ttl">ttl</a>
                    <span class="print-only">§3.4</span>
                </li>
                <li>
                    <a class="index-term" href="#dfn-types">type（类型）</a>
                    <span class="print-only">§3.2</span>
                </li>
            </ul>
        </section>
        <section id="index-defined-elsewhere">
            <div class="header-wrapper">
                <h3 id="a-2-terms-defined-by-reference"><bdi class="secno">A.2 </bdi>引用规范定义的术语</h3><a class="self-link"
                    href="#index-defined-elsewhere" aria-label="Permalink for Appendix A.2"></a>
            </div>

            <ul class="index">
                <li>
                    [<cite><a class="bibref" data-link-type="biblio" href="#bib-fetch">FETCH</a></cite>] 定义如下内容：
                    <ul>
                        <li>
                            <span class="index-term" data-href="https://fetch.spec.whatwg.org/#concept-request-client"
                                id="index-term-client-for-request" tabindex="0" aria-haspopup="dialog">client (for
                                <code>request</code>)</span>
                        </li>
                        <li>
                            <span class="index-term" data-href="https://fetch.spec.whatwg.org/#header-list-contains"
                                id="index-term-contain-for-header-list" tabindex="0" aria-haspopup="dialog">contain (for
                                header list)</span>
                        </li>
                        <li>
                            <span class="index-term" data-href="https://fetch.spec.whatwg.org/#cors-protocol"
                                id="index-term-cors-protocol" tabindex="0" aria-haspopup="dialog">CORS protocol（CORS
                                协议）</span>
                        </li>
                        <li>
                            <span class="index-term" data-href="https://fetch.spec.whatwg.org/#cors-preflight-request"
                                id="index-term-cors-preflight-request" tabindex="0"
                                aria-haspopup="dialog">CORS-preflight request（CORS预检请求）</span>
                        </li>
                        <li>
                            <span class="index-term"
                                data-href="https://fetch.spec.whatwg.org/#determine-the-network-partition-key"
                                id="index-term-determine-the-network-partition-key" tabindex="0"
                                aria-haspopup="dialog">determine the network partition key（确定网络分区密钥）</span>
                        </li>
                        <li>
                            <span class="index-term"
                                data-href="https://fetch.spec.whatwg.org/#concept-request-header-list"
                                id="index-term-header-list-for-request" tabindex="0" aria-haspopup="dialog">header list
                                (for <code>request</code>)</span>
                        </li>
                        <li>
                            <span class="index-term"
                                data-href="https://fetch.spec.whatwg.org/#concept-response-header-list"
                                id="index-term-header-list-for-response" tabindex="0" aria-haspopup="dialog">header list
                                (for <code>response</code>)</span>
                        </li>
                        <li>
                            <span class="index-term" data-href="https://fetch.spec.whatwg.org/#header-name"
                                id="index-term-header-names" tabindex="0" aria-haspopup="dialog">header names</span>
                        </li>
                        <li>
                            <span class="index-term" data-href="https://fetch.spec.whatwg.org/#header-value"
                                id="index-term-header-value" tabindex="0" aria-haspopup="dialog">header value</span>
                        </li>
                        <li>
                            <span class="index-term" data-href="https://fetch.spec.whatwg.org/#http-network-fetch"
                                id="index-term-http-network-fetch" tabindex="0" aria-haspopup="dialog">HTTP-network
                                fetch（HTTP网络获取）</span>
                        </li>
                        <li>
                            <span class="index-term" data-href="https://fetch.spec.whatwg.org/#network-partition-key"
                                id="index-term-network-partition-key" tabindex="0" aria-haspopup="dialog">network
                                partition key（网络分区密钥）</span>
                        </li>
                        <li>
                            <span class="index-term" data-href="https://fetch.spec.whatwg.org/#concept-request"
                                id="index-term-request" tabindex="0" aria-haspopup="dialog">request（请求）</span>
                        </li>
                        <li>
                            <span class="index-term"
                                data-href="https://fetch.spec.whatwg.org/#concept-request-reserved-client"
                                id="index-term-reserved-client-for-request" tabindex="0" aria-haspopup="dialog">reserved
                                client (for <code>request</code>)</span>
                        </li>
                        <li>
                            <span class="index-term" data-href="https://fetch.spec.whatwg.org/#concept-response"
                                id="index-term-response" tabindex="0" aria-haspopup="dialog">response（响应）</span>
                        </li>
                    </ul>
                </li>
                <li>
                    [<cite><a class="bibref" data-link-type="biblio" href="#bib-hr-time">HR-TIME</a></cite>] 定义如下内容：
                    <ul>
                        <li>
                            <span class="index-term" data-href="https://www.w3.org/TR/hr-time-3/#dfn-duration-from"
                                id="index-term-duration-from" tabindex="0" aria-haspopup="dialog">duration from</span>
                        </li>
                        <li>
                            <span class="index-term"
                                data-href="https://www.w3.org/TR/hr-time-3/#wall-clock-unsafe-current-time"
                                id="index-term-unsafe-current-time-for-wall-clock" tabindex="0"
                                aria-haspopup="dialog">unsafe current time (for wall clock)</span>
                        </li>
                        <li>
                            <span class="index-term" data-href="https://www.w3.org/TR/hr-time-3/#dfn-wall-clock"
                                id="index-term-wall-clock" tabindex="0" aria-haspopup="dialog">wall clock（挂钟）</span>
                        </li>
                    </ul>
                </li>
                <li>
                    [<cite><a class="bibref" data-link-type="biblio" href="#bib-html">HTML</a></cite>] 定义如下内容：
                    <ul>
                        <li>
                            <span class="index-term"
                                data-href="https://html.spec.whatwg.org/multipage/system-state.html#dom-navigator-online"
                                id="index-term-online-attribute-for-navigatoronline" tabindex="0"
                                aria-haspopup="dialog"><code>onLine</code> 属性（NavigatorOnLine）</span>
                        </li>
                        <li>
                            <span class="index-term"
                                data-href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin"
                                id="index-term-origin" tabindex="0" aria-haspopup="dialog">origin（源点）</span>
                        </li>
                    </ul>
                </li>
                <li>
                    [<cite><a class="bibref" data-link-type="biblio" href="#bib-http-jfv">HTTP-JFV</a></cite>] 定义如下内容：
                    <ul>
                        <li>
                            <span class="index-term"
                                data-href="https://datatracker.ietf.org/doc/html/draft-reschke-http-jfv#json-field-value"
                                id="index-term-json-field-value" tabindex="0"
                                aria-haspopup="dialog">json-field-value</span>
                        </li>
                    </ul>
                </li>
                <li>
                    [<cite><a class="bibref" data-link-type="biblio" href="#bib-infra">INFRA</a></cite>] 定义如下内容：
                    <ul>
                        <li>
                            <span class="index-term" data-href="https://infra.spec.whatwg.org/#user-agent"
                                id="index-term-user-agent" tabindex="0" aria-haspopup="dialog">user agent（用户代理）</span>
                        </li>
                    </ul>
                </li>
                <li>
                    [<cite><a class="bibref" data-link-type="biblio" href="#bib-mixed-content">MIXED-CONTENT</a></cite>]
                    定义如下内容：
                    <ul>
                        <li>
                            <span class="index-term" data-href="https://www.w3.org/TR/mixed-content/#mixed-content"
                                id="index-term-mixed-content" tabindex="0" aria-haspopup="dialog">mixed
                                content（混合内容）</span>
                        </li>
                    </ul>
                </li>
                <li>
                    [<cite><a class="bibref" data-link-type="biblio"
                            href="#bib-network-reporting">NETWORK-REPORTING</a></cite>] 定义如下内容：
                    <ul>
                        <li>
                            <span class="index-term"
                                data-href="https://w3c.github.io/reporting/network-reporting.html#endpoint-group"
                                id="index-term-endpoint-group" tabindex="0" aria-haspopup="dialog">endpoint
                                group（终端组）</span>
                        </li>
                        <li>
                            <span class="index-term"
                                data-href="https://w3c.github.io/reporting/network-reporting.html#generate-a-network-report"
                                id="index-term-generate-a-network-report" tabindex="0" aria-haspopup="dialog">Generate a
                                network report（生成网络报告）</span>
                        </li>
                    </ul>
                </li>
                <li>
                    [<cite><a class="bibref" data-link-type="biblio"
                            href="#bib-referrer-policy">REFERRER-POLICY</a></cite>] 定义如下内容：
                    <ul>
                        <li>
                            <span class="index-term" data-href="https://www.w3.org/TR/referrer-policy/#referrer-policy"
                                id="index-term-referrer-policy" tabindex="0" aria-haspopup="dialog">referrer
                                policy（引用策略）</span>
                        </li>
                    </ul>
                </li>
                <li>
                    [<cite><a class="bibref" data-link-type="biblio" href="#bib-reporting">REPORTING</a></cite>] 定义如下内容：
                    <ul>
                        <li>
                            <span class="index-term" data-href="https://www.w3.org/TR/reporting-1/#report-body"
                                id="index-term-body-for-report" tabindex="0" aria-haspopup="dialog">body (for
                                <code>report</code>)</span>
                        </li>
                        <li>
                            <span class="index-term" data-href="https://www.w3.org/TR/reporting-1/#report"
                                id="index-term-report" tabindex="0" aria-haspopup="dialog">report（报告）</span>
                        </li>
                        <li>
                            <span class="index-term" data-href="https://www.w3.org/TR/reporting-1/#report-type"
                                id="index-term-report-type" tabindex="0" aria-haspopup="dialog">report type（报告类型）</span>
                        </li>
                        <li>
                            <span class="index-term"
                                data-href="https://www.w3.org/TR/reporting-1/#visible-to-reportingobservers"
                                id="index-term-visible-to-reportingobservers" tabindex="0"
                                aria-haspopup="dialog">visible to ReportingObservers（对 ReportingObserver 可见）</span>
                        </li>
                    </ul>
                </li>
                <li>
                    [<cite><a class="bibref" data-link-type="biblio"
                            href="#bib-resource-timing-2">RESOURCE-TIMING-2</a></cite>] 定义如下内容：
                    <ul>
                        <li>
                            <span class="index-term"
                                data-href="https://www.w3.org/TR/resource-timing/#dom-performanceresourcetiming-nexthopprotocol"
                                id="index-term-network-protocol" tabindex="0" aria-haspopup="dialog">network
                                protocol（网络协议）</span>
                        </li>
                    </ul>
                </li>
                <li>
                    [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc1034">RFC1034</a></cite>] 定义如下内容：
                    <ul>
                        <li>
                            <span class="index-term" data-href="https://www.rfc-editor.org/rfc/rfc1034#section-3.1"
                                id="index-term-domain-name" tabindex="0" aria-haspopup="dialog">domain name（域名）</span>
                        </li>
                        <li>
                            <span class="index-term" data-href="https://www.rfc-editor.org/rfc/rfc1034#section-5"
                                id="index-term-resolver" tabindex="0" aria-haspopup="dialog">resolver（解析器）</span>
                        </li>
                    </ul>
                </li>
                <li>
                    [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc6797">RFC6797</a></cite>] 定义如下内容：
                    <ul>
                        <li>
                            <span class="index-term" data-href="https://www.rfc-editor.org/rfc/rfc6797#section-8.2"
                                id="index-term-superdomain-match" tabindex="0" aria-haspopup="dialog">superdomain
                                match（超级域匹配）</span>
                        </li>
                    </ul>
                </li>
                <li>
                    [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc9110">RFC9110</a></cite>] 定义如下内容：
                    <ul>
                        <li>
                            <span class="index-term" data-href="https://httpwg.org/specs/rfc9110.html#status.200"
                                id="index-term-200-response" tabindex="0" aria-haspopup="dialog">200 response</span>
                        </li>
                        <li>
                            <span class="index-term" data-href="https://httpwg.org/specs/rfc9110.html#status.4xx"
                                id="index-term-4xx" tabindex="0" aria-haspopup="dialog">4xx</span>
                        </li>
                        <li>
                            <span class="index-term" data-href="https://httpwg.org/specs/rfc9110.html#status.5xx"
                                id="index-term-5xx" tabindex="0" aria-haspopup="dialog">5xx</span>
                        </li>
                        <li>
                            <span class="index-term" data-href="https://httpwg.org/specs/rfc9110.html#field.etag"
                                id="index-term-etag" tabindex="0" aria-haspopup="dialog">ETag</span>
                        </li>
                        <li>
                            <span class="index-term"
                                data-href="https://httpwg.org/specs/rfc9110.html#field.if-none-match"
                                id="index-term-if-none-match" tabindex="0" aria-haspopup="dialog">If-None-Match</span>
                        </li>
                        <li>
                            <span class="index-term" data-href="https://httpwg.org/specs/rfc9110.html#method"
                                id="index-term-request-method" tabindex="0" aria-haspopup="dialog">request
                                method（请求方法）</span>
                        </li>
                        <li>
                            <span class="index-term" data-href="https://httpwg.org/specs/rfc9110.html#fields"
                                id="index-term-response-headers" tabindex="0" aria-haspopup="dialog">response
                                headers（响应头）</span>
                        </li>
                        <li>
                            <span class="index-term" data-href="https://httpwg.org/specs/rfc9110.html#core.semantics"
                                id="index-term-server" tabindex="0" aria-haspopup="dialog">server（服务器）</span>
                        </li>
                        <li>
                            <span class="index-term" data-href="https://httpwg.org/specs/rfc9110.html#status.code"
                                id="index-term-status-code" tabindex="0" aria-haspopup="dialog">status code（状态码）</span>
                        </li>
                    </ul>
                </li>
                <li>
                    [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc9112">RFC9112</a></cite>] 定义如下内容：
                    <ul>
                        <li>
                            <span class="index-term"
                                data-href="https://httpwg.org/specs/rfc9112.html#persistent.connections"
                                id="index-term-persistent-connections" tabindex="0" aria-haspopup="dialog">persistent
                                connections（持久连接）</span>
                        </li>
                    </ul>
                </li>
                <li>
                    [<cite><a class="bibref" data-link-type="biblio"
                            href="#bib-secure-contexts">SECURE-CONTEXTS</a></cite>] 定义如下内容：
                    <ul>
                        <li>
                            <span class="index-term"
                                data-href="https://www.w3.org/TR/secure-contexts/#is-origin-trustworthy"
                                id="index-term-is-origin-potentially-trustworthy" tabindex="0" aria-haspopup="dialog">Is
                                origin potentially trustworthy?（源点是否可信）</span>
                        </li>
                        <li>
                            <span class="index-term"
                                data-href="https://www.w3.org/TR/secure-contexts/#potentially-trustworthy-origin"
                                id="index-term-potentially-trustworthy-origin" tabindex="0"
                                aria-haspopup="dialog">potentially trustworthy origin（潜在可信源点）</span>
                        </li>
                    </ul>
                </li>
                <li>
                    [<cite><a class="bibref" data-link-type="biblio" href="#bib-url">URL</a></cite>] 定义如下内容：
                    <ul>
                        <li>
                            <span class="index-term" data-href="https://url.spec.whatwg.org/#concept-url-fragment"
                                id="index-term-fragment-for-url" tabindex="0" aria-haspopup="dialog">fragment (for
                                <code>url</code>)（片段）</span>
                        </li>
                        <li>
                            <span class="index-term" data-href="https://url.spec.whatwg.org/#ip-address"
                                id="index-term-ip-address" tabindex="0" aria-haspopup="dialog">IP address</span>
                        </li>
                        <li>
                            <span class="index-term" data-href="https://url.spec.whatwg.org/#concept-url-path"
                                id="index-term-path-for-url" tabindex="0" aria-haspopup="dialog">path (for
                                <code>url</code>)（路径）</span>
                        </li>
                        <li>
                            <span class="index-term" data-href="https://url.spec.whatwg.org/#concept-url-query"
                                id="index-term-query-for-url" tabindex="0" aria-haspopup="dialog">query (for
                                <code>url</code>)（查询）</span>
                        </li>
                        <li>
                            <span class="index-term" data-href="https://url.spec.whatwg.org/#concept-url-serializer"
                                id="index-term-url-serializer" tabindex="0" aria-haspopup="dialog">URL serializer（URL
                                序列化器）</span>
                        </li>
                    </ul>
                </li>
            </ul>
        </section>
    </section>
    <section class="appendix" id="acknowledgments">
        <div class="header-wrapper">
            <h2 id="b-acknowledgments"><bdi class="secno">B. </bdi>致谢</h2><a class="self-link" href="#acknowledgments"
                aria-label="Permalink for Appendix B."></a>
        </div>

        <p>本文件根据 [<cite><a class="bibref" data-link-type="biblio" href="#bib-csp"
                    title="Content Security Policy Level 3">CSP</a></cite>] 和 [<cite><a class="bibref"
                    data-link-type="biblio" href="#bib-rfc6797"
                    title="HTTP Strict Transport Security (HSTS)">RFC6797</a></cite>] 规范的许可，复用了部分内容。此外，特别感谢 Julia
            Tuttle、Chris Bentzel、Todd
            Reifsteck、Aaron Heady 和 Mark Nottingham 对本工作所做出的宝贵评论与贡献。</p>
    </section>

    <section id="references" class="appendix">
        <div class="header-wrapper">
            <h2 id="c-references"><bdi class="secno">C. </bdi>参考文献</h2><a class="self-link" href="#references"
                aria-label="Permalink for Appendix C."></a>
        </div>
        <section id="normative-references">
            <div class="header-wrapper">
                <h3 id="c-1-normative-references"><bdi class="secno">C.1 </bdi>规范性引用</h3><a class="self-link"
                    href="#normative-references" aria-label="Permalink for Appendix C.1"></a>
            </div>

            <dl class="bibliography">
                <dt id="bib-capability-urls">[CAPABILITY-URLS]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/capability-urls/"><cite>能力型URL的良好实践</cite></a>。Jeni
                    Tennison。W3C。2014年2月18日。第一公开工作草案。URL: <a
                        href="https://www.w3.org/TR/capability-urls/">https://www.w3.org/TR/capability-urls/</a>
                </dd>
                <dt id="bib-csp">[CSP]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/CSP3/"><cite>内容安全策略第3级</cite></a>。Mike West;
                    Antonio Sartori。W3C。2025年4月30日。W3C工作草案。URL: <a
                        href="https://www.w3.org/TR/CSP3/">https://www.w3.org/TR/CSP3/</a>
                </dd>
                <dt id="bib-ecma-262">[ECMA-262]</dt>
                <dd>
                    <a href="https://tc39.es/ecma262/multipage/"><cite>ECMAScript 语言规范</cite></a>。
                    Ecma International。URL: <a
                        href="https://tc39.es/ecma262/multipage/">https://tc39.es/ecma262/multipage/</a>
                </dd>
                <dt id="bib-fetch">[fetch]</dt>
                <dd>
                    <a href="https://fetch.spec.whatwg.org/"><cite>Fetch 标准</cite></a>。Anne van Kesteren。WHATWG。
                    现行标准。URL: <a href="https://fetch.spec.whatwg.org/">https://fetch.spec.whatwg.org/</a>
                </dd>
                <dt id="bib-hr-time">[hr-time]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/hr-time-3/"><cite>高分辨率时间</cite></a>。Yoav Weiss。W3C。2024年11月7日。W3C
                    工作草案。URL: <a href="https://www.w3.org/TR/hr-time-3/">https://www.w3.org/TR/hr-time-3/</a>
                </dd>
                <dt id="bib-html">[html]</dt>
                <dd>
                    <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML 标准</cite></a>。Anne van Kesteren;
                    Domenic Denicola; Dominic Farolino; Ian Hickson; Philip Jägenstedt; Simon Pieters。WHATWG。现行标准。URL:
                    <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
                </dd>
                <dt id="bib-http-jfv">[HTTP-JFV]</dt>
                <dd>
                    <a href="https://datatracker.ietf.org/doc/html/draft-reschke-http-jfv"><cite>HTTP 头字段值的 JSON
                            编码</cite></a>。J. Reschke。IETF。2017年10月24日。现行 Internet-Draft。URL: <a
                        href="https://datatracker.ietf.org/doc/html/draft-reschke-http-jfv">https://datatracker.ietf.org/doc/html/draft-reschke-http-jfv</a>
                </dd>
                <dt id="bib-infra">[infra]</dt>
                <dd>
                    <a href="https://infra.spec.whatwg.org/"><cite>Infra 标准</cite></a>。Anne van Kesteren; Domenic
                    Denicola。WHATWG。现行标准。URL: <a
                        href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
                </dd>
                <dt id="bib-mixed-content">[mixed-content]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/mixed-content/"><cite>混合内容</cite></a>。Emily Stark; Mike
                    West; Carlos IbarraLopez。W3C。2023年2月23日。候选推荐。URL: <a
                        href="https://www.w3.org/TR/mixed-content/">https://www.w3.org/TR/mixed-content/</a>
                </dd>
                <dt id="bib-network-reporting">[network-reporting]</dt>
                <dd>
                    <a
                        href="https://w3c.github.io/reporting/network-reporting.html"><cite>网络报告API</cite></a>。W3C。编辑草案。URL:
                    <a
                        href="https://w3c.github.io/reporting/network-reporting.html">https://w3c.github.io/reporting/network-reporting.html</a>
                </dd>
                <dt id="bib-referrer-policy">[referrer-policy]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/referrer-policy/"><cite>引用策略</cite></a>。Jochen Eisinger;
                    Emily Stark。W3C。2017年1月26日。W3C候选推荐。URL: <a
                        href="https://www.w3.org/TR/referrer-policy/">https://www.w3.org/TR/referrer-policy/</a>
                </dd>
                <dt id="bib-reporting">[REPORTING]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/reporting-1/"><cite>报告 API</cite></a>。Douglas Creager; Ian
                    Clelland; Mike West。W3C。2024年8月13日。W3C 工作草案。URL: <a
                        href="https://www.w3.org/TR/reporting-1/">https://www.w3.org/TR/reporting-1/</a>
                </dd>
                <dt id="bib-resource-timing-2">[RESOURCE-TIMING-2]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/resource-timing/"><cite>资源计时</cite></a>。Yoav Weiss; Noam
                    Rosenthal。W3C。2025年2月13日。候选推荐。URL: <a
                        href="https://www.w3.org/TR/resource-timing/">https://www.w3.org/TR/resource-timing/</a>
                </dd>
                <dt id="bib-rfc1034">[RFC1034]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc1034"><cite>域名——概念与机制</cite></a>。P.
                    Mockapetris。IETF。1987年11月。国际标准。URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc1034">https://www.rfc-editor.org/rfc/rfc1034</a>
                </dd>
                <dt id="bib-rfc1123">[RFC1123]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc1123"><cite>互联网主机需求——应用与支持</cite></a>。R. Braden, Ed.
                    IETF。1989年10月。国际标准。URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc1123">https://www.rfc-editor.org/rfc/rfc1123</a>
                </dd>
                <dt id="bib-rfc2119">[RFC2119]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc2119"><cite>在RFC中指示需求等级的关键字</cite></a>。S.
                    Bradner。IETF。1997年3月。最佳当前实践。URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc2119">https://www.rfc-editor.org/rfc/rfc2119</a>
                </dd>
                <dt id="bib-rfc3864">[RFC3864]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc3864"><cite>消息头字段注册流程</cite></a>。G. Klyne; M. Nottingham;
                    J. Mogul。IETF。2004年9月。最佳当前实践。URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc3864">https://www.rfc-editor.org/rfc/rfc3864</a>
                </dd>
                <dt id="bib-rfc4291">[RFC4291]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc4291"><cite>IPv6 地址架构</cite></a>。R. Hinden; S.
                    Deering。IETF。2006年2月。草案标准。URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc4291">https://www.rfc-editor.org/rfc/rfc4291</a>
                </dd>
                <dt id="bib-rfc5234">[RFC5234]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc5234"><cite>语法规范的增强BNF</cite></a>。D. Crocker, Ed.; P.
                    Overell。IETF。2008年1月。国际标准。URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc5234">https://www.rfc-editor.org/rfc/rfc5234</a>
                </dd>
                <dt id="bib-rfc6797">[RFC6797]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc6797"><cite>HTTP 严格传输安全（HSTS）</cite></a>。J. Hodges; C.
                    Jackson; A. Barth。IETF。2012年11月。提案标准。URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc6797">https://www.rfc-editor.org/rfc/rfc6797</a>
                </dd>
                <dt id="bib-rfc8174">[RFC8174]</dt>
                <dd>
                    <a href="https://www.rfc-editor.org/rfc/rfc8174"><cite>RFC 2119 关键字大小写歧义</cite></a>。B.
                    Leiba。IETF。2017年5月。最佳当前实践。URL: <a
                        href="https://www.rfc-editor.org/rfc/rfc8174">https://www.rfc-editor.org/rfc/rfc8174</a>
                </dd>
                <dt id="bib-rfc9110">[RFC9110]</dt>
                <dd>
                    <a href="https://httpwg.org/specs/rfc9110.html"><cite>HTTP 语义</cite></a>。R. Fielding, Ed.;
                    M. Nottingham, Ed.; J. Reschke, Ed. IETF。2022年6月。国际标准。URL: <a
                        href="https://httpwg.org/specs/rfc9110.html">https://httpwg.org/specs/rfc9110.html</a>
                </dd>
                <dt id="bib-rfc9112">[RFC9112]</dt>
                <dd>
                    <a href="https://httpwg.org/specs/rfc9112.html"><cite>HTTP/1.1</cite></a>。R. Fielding, Ed.; M.
                    Nottingham, Ed.; J. Reschke, Ed. IETF。2022年6月。国际标准。URL: <a
                        href="https://httpwg.org/specs/rfc9112.html">https://httpwg.org/specs/rfc9112.html</a>
                </dd>
                <dt id="bib-secure-contexts">[secure-contexts]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/secure-contexts/"><cite>安全上下文</cite></a>。Mike West。W3C。
                    2023年11月10日。候选推荐。URL: <a
                        href="https://www.w3.org/TR/secure-contexts/">https://www.w3.org/TR/secure-contexts/</a>
                </dd>
                <dt id="bib-url">[url]</dt>
                <dd>
                    <a href="https://url.spec.whatwg.org/"><cite>URL 标准</cite></a>。Anne van Kesteren。WHATWG。
                    现行标准。URL: <a href="https://url.spec.whatwg.org/">https://url.spec.whatwg.org/</a>
                </dd>
            </dl>
        </section>
    </section>
    <p role="navigation" id="back-to-top">
        <a href="#title"><abbr title="返回顶部">↑</abbr></a>
    </p>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-network-requests"
        aria-label="Links in this document to definition: network request">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-network-requests"
                aria-label="Permalink for definition: network request. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-network-requests-1" title="§ 3.1 Network requests">§ 3.1 Network requests</a> <a
                    href="#ref-for-dfn-network-requests-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-network-requests-3" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-network-requests-4" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-network-requests-5" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-network-requests-6" title="Reference 6">(6)</a> <a
                    href="#ref-for-dfn-network-requests-7" title="Reference 7">(7)</a> <a
                    href="#ref-for-dfn-network-requests-8" title="Reference 8">(8)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-network-requests-9" title="§ 3.2 Network errors">§ 3.2 Network errors</a>
            </li>
            <li>
                <a href="#ref-for-dfn-network-requests-10" title="§ 3.4 NEL policies">§ 3.4 NEL policies</a>
            </li>
            <li>
                <a href="#ref-for-dfn-network-requests-11" title="§ 3.5 Sampling rates">§ 3.5 Sampling rates</a>
            </li>
            <li>
                <a href="#ref-for-dfn-network-requests-12" title="§ 4.1.4 The success_fraction member">§ 4.1.4 The
                    success_fraction member</a> <a href="#ref-for-dfn-network-requests-13" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-network-requests-14" title="§ 4.1.5 The failure_fraction member">§ 4.1.5 The
                    failure_fraction member</a> <a href="#ref-for-dfn-network-requests-15" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-network-requests-16" title="§ 4.2 Process policy headers">§ 4.2 Process policy
                    headers</a>
            </li>
            <li>
                <a href="#ref-for-dfn-network-requests-17" title="§ 5.1 Choose a policy for a request">§ 5.1 Choose a
                    policy for a request</a> <a href="#ref-for-dfn-network-requests-18" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-network-requests-19" title="§ 5.2 Extract request headers">§ 5.2 Extract request
                    headers</a>
            </li>
            <li>
                <a href="#ref-for-dfn-network-requests-20" title="§ 5.4 Generate a network error report">§ 5.4 Generate
                    a network error report</a>
            </li>
            <li>
                <a href="#ref-for-dfn-network-requests-21" title="§ 5.5 Deliver a network report">§ 5.5 Deliver a
                    network report</a>
            </li>
            <li>
                <a href="#ref-for-dfn-network-requests-22" title="§ 7.5 Origins with multiple IP addresses">§ 7.5
                    Origins with multiple IP addresses</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-phase"
        aria-label="Links in this document to definition: phases">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-phase"
                aria-label="Permalink for definition: phases. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-phase-1" title="§ 3.1 Network requests">§ 3.1 Network requests</a> <a
                    href="#ref-for-dfn-phase-2" title="Reference 2">(2)</a> <a href="#ref-for-dfn-phase-3"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-phase-4" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-phase-5" title="§ 3.2 Network errors">§ 3.2 Network errors</a>
            </li>
            <li>
                <a href="#ref-for-dfn-phase-6" title="§ 5.4 Generate a network error report">§ 5.4 Generate a network
                    error report</a>
            </li>
            <li>
                <a href="#ref-for-dfn-phase-7" title="§ 9. Privacy Considerations">§ 9. Privacy Considerations</a> <a
                    href="#ref-for-dfn-phase-8" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-dns-resolution"
        aria-label="Links in this document to definition: DNS resolution">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-dns-resolution"
                aria-label="Permalink for definition: DNS resolution. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-dns-resolution-1" title="§ 3.1 Network requests">§ 3.1 Network requests</a>
            </li>
            <li>
                <a href="#ref-for-dfn-dns-resolution-2" title="§ 3.2 Network errors">§ 3.2 Network errors</a>
            </li>
            <li>
                <a href="#ref-for-dfn-dns-resolution-3" title="§ 5.4 Generate a network error report">§ 5.4 Generate a
                    network error report</a> <a href="#ref-for-dfn-dns-resolution-4" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-dns-resolution-5" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-dns-resolution-6" title="§ 6.1 DNS resolution errors">§ 6.1 DNS resolution
                    errors</a>
            </li>
            <li>
                <a href="#ref-for-dfn-dns-resolution-7" title="§ 9. Privacy Considerations">§ 9. Privacy
                    Considerations</a> <a href="#ref-for-dfn-dns-resolution-8" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-dns-resolution-9" title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-secure-connection-establishment"
        aria-label="Links in this document to definition: Secure connection establishment">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-secure-connection-establishment"
                aria-label="Permalink for definition: Secure connection establishment. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-secure-connection-establishment-1" title="§ 3.2 Network errors">§ 3.2 Network
                    errors</a>
            </li>
            <li>
                <a href="#ref-for-dfn-secure-connection-establishment-2"
                    title="§ 6.2 Secure connection establishment errors">§ 6.2 Secure connection establishment
                    errors</a>
            </li>
            <li>
                <a href="#ref-for-dfn-secure-connection-establishment-3" title="§ 9. Privacy Considerations">§ 9.
                    Privacy Considerations</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-transmission-of-request-and-response"
        aria-label="Links in this document to definition: Transmission of request and response">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-transmission-of-request-and-response"
                aria-label="Permalink for definition: Transmission of request and response. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-transmission-of-request-and-response-1" title="§ 3.1 Network requests">§ 3.1
                    Network requests</a>
            </li>
            <li>
                <a href="#ref-for-dfn-transmission-of-request-and-response-2" title="§ 3.2 Network errors">§ 3.2 Network
                    errors</a>
            </li>
            <li>
                <a href="#ref-for-dfn-transmission-of-request-and-response-3"
                    title="§ 6.3 Transmission of request and response errors">§ 6.3 Transmission of request and response
                    errors</a>
            </li>
            <li>
                <a href="#ref-for-dfn-transmission-of-request-and-response-4" title="§ 9. Privacy Considerations">§ 9.
                    Privacy Considerations</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-succeed"
        aria-label="Links in this document to definition: successful">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-succeed"
                aria-label="Permalink for definition: successful. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-succeed-1" title="§ 3.1 Network requests">§ 3.1 Network requests</a>
            </li>
            <li>
                <a href="#ref-for-dfn-succeed-2" title="§ 3.5 Sampling rates">§ 3.5 Sampling rates</a>
            </li>
            <li>
                <a href="#ref-for-dfn-succeed-3" title="§ 4.1.4 The success_fraction member">§ 4.1.4 The
                    success_fraction member</a> <a href="#ref-for-dfn-succeed-4" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-succeed-5" title="§ 5.4 Generate a network error report">§ 5.4 Generate a network
                    error report</a> <a href="#ref-for-dfn-succeed-6" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-succeed-7" title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-fail"
        aria-label="Links in this document to definition: failed">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-fail"
                aria-label="Permalink for definition: failed. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-fail-1" title="§ 3.1 Network requests">§ 3.1 Network requests</a>
            </li>
            <li>
                <a href="#ref-for-dfn-fail-2" title="§ 3.2 Network errors">§ 3.2 Network errors</a>
            </li>
            <li>
                <a href="#ref-for-dfn-fail-3" title="§ 3.5 Sampling rates">§ 3.5 Sampling rates</a>
            </li>
            <li>
                <a href="#ref-for-dfn-fail-4" title="§ 4.1.5 The failure_fraction member">§ 4.1.5 The failure_fraction
                    member</a> <a href="#ref-for-dfn-fail-5" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-fail-6" title="§ 5.4 Generate a network error report">§ 5.4 Generate a network
                    error report</a> <a href="#ref-for-dfn-fail-7" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-fail-8" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-fail-9" title="§ 7.5 Origins with multiple IP addresses">§ 7.5 Origins with
                    multiple IP addresses</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-network-errors"
        aria-label="Links in this document to definition: network error">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-network-errors"
                aria-label="Permalink for definition: network error. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-network-errors-1" title="§ 3.2 Network errors">§ 3.2 Network errors</a> <a
                    href="#ref-for-dfn-network-errors-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-network-errors-3" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-network-errors-4" title="§ 3.3 Network error reports">§ 3.3 Network error
                    reports</a>
            </li>
            <li>
                <a href="#ref-for-dfn-network-errors-5" title="§ 5.4 Generate a network error report">§ 5.4 Generate a
                    network error report</a> <a href="#ref-for-dfn-network-errors-6" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-network-errors-7" title="§ 6. Predefined network error types">§ 6. Predefined
                    network error types</a> <a href="#ref-for-dfn-network-errors-8" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-network-errors-9" title="§ 6.1 DNS resolution errors">§ 6.1 DNS resolution
                    errors</a>
            </li>
            <li>
                <a href="#ref-for-dfn-network-errors-10" title="§ 6.2 Secure connection establishment errors">§ 6.2
                    Secure connection establishment errors</a>
            </li>
            <li>
                <a href="#ref-for-dfn-network-errors-11" title="§ 6.3 Transmission of request and response errors">§ 6.3
                    Transmission of request and response errors</a>
            </li>
            <li>
                <a href="#ref-for-dfn-network-errors-12" title="§ 7.2 Sample Network Error Reports">§ 7.2 Sample Network
                    Error Reports</a> <a href="#ref-for-dfn-network-errors-13" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-network-errors-14" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-network-errors-15" title="Reference 4">(4)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-types"
        aria-label="Links in this document to definition: type">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-types"
                aria-label="Permalink for definition: type. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-types-1" title="§ 3.2 Network errors">§ 3.2 Network errors</a>
            </li>
            <li>
                <a href="#ref-for-dfn-types-2" title="§ 5.4 Generate a network error report">§ 5.4 Generate a network
                    error report</a>
            </li>
            <li>
                <a href="#ref-for-dfn-types-3" title="§ 6. Predefined network error types">§ 6. Predefined network error
                    types</a> <a href="#ref-for-dfn-types-4" title="Reference 2">(2)</a> <a href="#ref-for-dfn-types-5"
                    title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-type-phase"
        aria-label="Links in this document to definition: phase">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-type-phase"
                aria-label="Permalink for definition: phase. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-type-phase-1" title="§ 5.4 Generate a network error report">§ 5.4 Generate a
                    network error report</a>
            </li>
            <li>
                <a href="#ref-for-dfn-type-phase-2" title="§ 6.1 DNS resolution errors">§ 6.1 DNS resolution errors</a>
            </li>
            <li>
                <a href="#ref-for-dfn-type-phase-3" title="§ 6.2 Secure connection establishment errors">§ 6.2 Secure
                    connection establishment errors</a>
            </li>
            <li>
                <a href="#ref-for-dfn-type-phase-4" title="§ 6.3 Transmission of request and response errors">§ 6.3
                    Transmission of request and response errors</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-network-error-reports"
        aria-label="Links in this document to definition: network error report">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-network-error-reports"
                aria-label="Permalink for definition: network error report. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-network-error-reports-1" title="§ 3.3 Network error reports">§ 3.3 Network error
                    reports</a> <a href="#ref-for-dfn-network-error-reports-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-network-error-reports-3" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-network-error-reports-4" title="§ 4.1.6 The request_headers member">§ 4.1.6 The
                    request_headers member</a>
            </li>
            <li>
                <a href="#ref-for-dfn-network-error-reports-5" title="§ 4.1.7 The response_headers member">§ 4.1.7 The
                    response_headers member</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-nel-policies"
        aria-label="Links in this document to definition: NEL policy">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-nel-policies"
                aria-label="Permalink for definition: NEL policy. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-nel-policies-1" title="§ 1. Introduction">§ 1. Introduction</a>
            </li>
            <li>
                <a href="#ref-for-dfn-nel-policies-2" title="§ 3.1 Network requests">§ 3.1 Network requests</a>
            </li>
            <li>
                <a href="#ref-for-dfn-nel-policies-3" title="§ 3.4 NEL policies">§ 3.4 NEL policies</a> <a
                    href="#ref-for-dfn-nel-policies-4" title="Reference 2">(2)</a> <a href="#ref-for-dfn-nel-policies-5"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-nel-policies-6" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-nel-policies-7" title="Reference 5">(5)</a> <a href="#ref-for-dfn-nel-policies-8"
                    title="Reference 6">(6)</a> <a href="#ref-for-dfn-nel-policies-9" title="Reference 7">(7)</a> <a
                    href="#ref-for-dfn-nel-policies-10" title="Reference 8">(8)</a> <a
                    href="#ref-for-dfn-nel-policies-11" title="Reference 9">(9)</a> <a
                    href="#ref-for-dfn-nel-policies-12" title="Reference 10">(10)</a> <a
                    href="#ref-for-dfn-nel-policies-13" title="Reference 11">(11)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-nel-policies-14" title="§ 3.5 Sampling rates">§ 3.5 Sampling rates</a> <a
                    href="#ref-for-dfn-nel-policies-15" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-nel-policies-16" title="§ 3.6 Policy cache">§ 3.6 Policy cache</a> <a
                    href="#ref-for-dfn-nel-policies-17" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-nel-policies-18" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-nel-policies-19" title="§ 4. Policy delivery">§ 4. Policy delivery</a>
            </li>
            <li>
                <a href="#ref-for-dfn-nel-policies-20" title="§ 4.1 NEL response header">§ 4.1 NEL response header</a>
                <a href="#ref-for-dfn-nel-policies-21" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-nel-policies-22" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-nel-policies-23" title="§ 4.1.1 The report_to member">§ 4.1.1 The report_to
                    member</a> <a href="#ref-for-dfn-nel-policies-24" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-nel-policies-25" title="§ 4.1.2 The max_age member">§ 4.1.2 The max_age member</a>
                <a href="#ref-for-dfn-nel-policies-26" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-nel-policies-27" title="§ 4.1.3 The include_subdomains member">§ 4.1.3 The
                    include_subdomains member</a> <a href="#ref-for-dfn-nel-policies-28" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-nel-policies-29" title="§ 4.2 Process policy headers">§ 4.2 Process policy
                    headers</a> <a href="#ref-for-dfn-nel-policies-30" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-nel-policies-31" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-nel-policies-32" title="§ 5.1 Choose a policy for a request">§ 5.1 Choose a policy
                    for a request</a>
            </li>
            <li>
                <a href="#ref-for-dfn-nel-policies-33" title="§ 5.2 Extract request headers">§ 5.2 Extract request
                    headers</a>
            </li>
            <li>
                <a href="#ref-for-dfn-nel-policies-34" title="§ 5.3 Extract response headers">§ 5.3 Extract response
                    headers</a>
            </li>
            <li>
                <a href="#ref-for-dfn-nel-policies-35" title="§ 5.4 Generate a network error report">§ 5.4 Generate a
                    network error report</a> <a href="#ref-for-dfn-nel-policies-36" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-nel-policies-37" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-nel-policies-38" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-nel-policies-39" title="§ 5.5 Deliver a network report">§ 5.5 Deliver a network
                    report</a>
            </li>
            <li>
                <a href="#ref-for-dfn-nel-policies-40" title="§ 6.1 DNS resolution errors">§ 6.1 DNS resolution
                    errors</a>
            </li>
            <li>
                <a href="#ref-for-dfn-nel-policies-41" title="§ 7.1 Sample Policy Definitions">§ 7.1 Sample Policy
                    Definitions</a> <a href="#ref-for-dfn-nel-policies-42" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-nel-policies-43" title="§ 7.2 Sample Network Error Reports">§ 7.2 Sample Network
                    Error Reports</a> <a href="#ref-for-dfn-nel-policies-44" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-nel-policies-45" title="§ 7.5 Origins with multiple IP addresses">§ 7.5 Origins
                    with multiple IP addresses</a> <a href="#ref-for-dfn-nel-policies-46" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-nel-policies-47" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-nel-policies-48" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-nel-policies-49" title="Reference 5">(5)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-nel-policies-50" title="§ 8.1 Reporting of Navigation Failures">§ 8.1 Reporting of
                    Navigation Failures</a>
            </li>
            <li>
                <a href="#ref-for-dfn-nel-policies-51"
                    title="§ 8.2 Reporting of First-party Subresource Fetch Failures">§ 8.2 Reporting of First-party
                    Subresource Fetch Failures</a> <a href="#ref-for-dfn-nel-policies-52" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-nel-policies-53"
                    title="§ 8.3 Reporting of Third-party Subresource Fetch Failures">§ 8.3 Reporting of Third-party
                    Subresource Fetch Failures</a>
            </li>
            <li>
                <a href="#ref-for-dfn-nel-policies-54" title="§ 9. Privacy Considerations">§ 9. Privacy
                    Considerations</a> <a href="#ref-for-dfn-nel-policies-55" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-nel-policies-56" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-nel-policies-57" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-nel-policies-58" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-nel-policies-59" title="Reference 6">(6)</a> <a
                    href="#ref-for-dfn-nel-policies-60" title="Reference 7">(7)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-received-ip-address"
        aria-label="Links in this document to definition: received IP address">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-received-ip-address"
                aria-label="Permalink for definition: received IP address. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-received-ip-address-1" title="§ 4.2 Process policy headers">§ 4.2 Process policy
                    headers</a>
            </li>
            <li>
                <a href="#ref-for-dfn-received-ip-address-2" title="§ 5.4 Generate a network error report">§ 5.4
                    Generate a network error report</a>
            </li>
            <li>
                <a href="#ref-for-dfn-received-ip-address-3" title="§ 7.5 Origins with multiple IP addresses">§ 7.5
                    Origins with multiple IP addresses</a> <a href="#ref-for-dfn-received-ip-address-4"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-received-ip-address-5" title="Reference 3">(3)</a>
                <a href="#ref-for-dfn-received-ip-address-6" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-received-ip-address-7" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-received-ip-address-8" title="Reference 6">(6)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-received-ip-address-9" title="§ 9. Privacy Considerations">§ 9. Privacy
                    Considerations</a> <a href="#ref-for-dfn-received-ip-address-10" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-received-ip-address-11" title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-policy-origin"
        aria-label="Links in this document to definition: origin">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-policy-origin"
                aria-label="Permalink for definition: origin. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-policy-origin-1" title="§ 4.2 Process policy headers">§ 4.2 Process policy
                    headers</a>
            </li>
            <li>
                <a href="#ref-for-dfn-policy-origin-2" title="§ 5.4 Generate a network error report">§ 5.4 Generate a
                    network error report</a> <a href="#ref-for-dfn-policy-origin-3" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-policy-origin-4" title="§ 9. Privacy Considerations">§ 9. Privacy
                    Considerations</a> <a href="#ref-for-dfn-policy-origin-5" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-policy-origin-6" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-policy-origin-7" title="Reference 4">(4)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-subdomains"
        aria-label="Links in this document to definition: subdomains">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-subdomains"
                aria-label="Permalink for definition: subdomains. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-subdomains-1" title="§ 4.2 Process policy headers">§ 4.2 Process policy
                    headers</a>
            </li>
            <li>
                <a href="#ref-for-dfn-subdomains-2" title="§ 5.1 Choose a policy for a request">§ 5.1 Choose a policy
                    for a request</a>
            </li>
            <li>
                <a href="#ref-for-dfn-subdomains-3" title="§ 5.4 Generate a network error report">§ 5.4 Generate a
                    network error report</a> <a href="#ref-for-dfn-subdomains-4" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-subdomains-5" title="§ 9. Privacy Considerations">§ 9. Privacy Considerations</a>
                <a href="#ref-for-dfn-subdomains-6" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-policy-request-headers"
        aria-label="Links in this document to definition: request headers">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-policy-request-headers"
                aria-label="Permalink for definition: request headers. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-policy-request-headers-1" title="§ 4.1.6 The request_headers member">§ 4.1.6 The
                    request_headers member</a>
            </li>
            <li>
                <a href="#ref-for-dfn-policy-request-headers-2" title="§ 4.2 Process policy headers">§ 4.2 Process
                    policy headers</a>
            </li>
            <li>
                <a href="#ref-for-dfn-policy-request-headers-3" title="§ 5.2 Extract request headers">§ 5.2 Extract
                    request headers</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-policy-response-headers"
        aria-label="Links in this document to definition: response headers">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-policy-response-headers"
                aria-label="Permalink for definition: response headers. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-policy-response-headers-1" title="§ 4.1.7 The response_headers member">§ 4.1.7 The
                    response_headers member</a>
            </li>
            <li>
                <a href="#ref-for-dfn-policy-response-headers-2" title="§ 4.2 Process policy headers">§ 4.2 Process
                    policy headers</a>
            </li>
            <li>
                <a href="#ref-for-dfn-policy-response-headers-3" title="§ 5.3 Extract response headers">§ 5.3 Extract
                    response headers</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-reporting-group"
        aria-label="Links in this document to definition: reporting group">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-reporting-group"
                aria-label="Permalink for definition: reporting group. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-reporting-group-1" title="§ 4.2 Process policy headers">§ 4.2 Process policy
                    headers</a>
            </li>
            <li>
                <a href="#ref-for-dfn-reporting-group-2" title="§ 5.5 Deliver a network report">§ 5.5 Deliver a network
                    report</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-ttl"
        aria-label="Links in this document to definition: ttl">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-ttl"
                aria-label="Permalink for definition: ttl. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-ttl-1" title="§ 3.4 NEL policies">§ 3.4 NEL policies</a>
            </li>
            <li>
                <a href="#ref-for-dfn-ttl-2" title="§ 4.2 Process policy headers">§ 4.2 Process policy headers</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-creation"
        aria-label="Links in this document to definition: creation">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-creation"
                aria-label="Permalink for definition: creation. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-creation-1" title="§ 3.4 NEL policies">§ 3.4 NEL policies</a> <a
                    href="#ref-for-dfn-creation-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-creation-3" title="§ 4.2 Process policy headers">§ 4.2 Process policy headers</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-stale"
        aria-label="Links in this document to definition: stale">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-stale"
                aria-label="Permalink for definition: stale. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-stale-1" title="§ 5.4 Generate a network error report">§ 5.4 Generate a network
                    error report</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-expired"
        aria-label="Links in this document to definition: expired">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-expired"
                aria-label="Permalink for definition: expired. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-expired-1" title="§ 5.1 Choose a policy for a request">§ 5.1 Choose a policy for a
                    request</a> <a href="#ref-for-dfn-expired-2" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-sampling-rate"
        aria-label="Links in this document to definition: sampling rates">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-sampling-rate"
                aria-label="Permalink for definition: sampling rates. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-sampling-rate-1" title="§ 4.1.4 The success_fraction member">§ 4.1.4 The
                    success_fraction member</a>
            </li>
            <li>
                <a href="#ref-for-dfn-sampling-rate-2" title="§ 4.1.5 The failure_fraction member">§ 4.1.5 The
                    failure_fraction member</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-successful-sampling-rate"
        aria-label="Links in this document to definition: successful sampling rate">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-successful-sampling-rate"
                aria-label="Permalink for definition: successful sampling rate. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-successful-sampling-rate-1" title="§ 3.1 Network requests">§ 3.1 Network
                    requests</a>
            </li>
            <li>
                <a href="#ref-for-dfn-successful-sampling-rate-2" title="§ 4.2 Process policy headers">§ 4.2 Process
                    policy headers</a>
            </li>
            <li>
                <a href="#ref-for-dfn-successful-sampling-rate-3" title="§ 5.4 Generate a network error report">§ 5.4
                    Generate a network error report</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-failure-sampling-rate"
        aria-label="Links in this document to definition: failure sampling rate">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-failure-sampling-rate"
                aria-label="Permalink for definition: failure sampling rate. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-failure-sampling-rate-1" title="§ 3.1 Network requests">§ 3.1 Network requests</a>
            </li>
            <li>
                <a href="#ref-for-dfn-failure-sampling-rate-2" title="§ 4.2 Process policy headers">§ 4.2 Process policy
                    headers</a>
            </li>
            <li>
                <a href="#ref-for-dfn-failure-sampling-rate-3" title="§ 5.4 Generate a network error report">§ 5.4
                    Generate a network error report</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-policy-cache"
        aria-label="Links in this document to definition: policy cache">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-policy-cache"
                aria-label="Permalink for definition: policy cache. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-policy-cache-1" title="§ 4.1.2 The max_age member">§ 4.1.2 The max_age member</a>
            </li>
            <li>
                <a href="#ref-for-dfn-policy-cache-2" title="§ 4.2 Process policy headers">§ 4.2 Process policy
                    headers</a> <a href="#ref-for-dfn-policy-cache-3" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-policy-cache-4" title="Reference 3">(3)</a> <a href="#ref-for-dfn-policy-cache-5"
                    title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-policy-cache-6" title="§ 5.1 Choose a policy for a request">§ 5.1 Choose a policy
                    for a request</a> <a href="#ref-for-dfn-policy-cache-7" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-policy-cache-8" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-policy-cache-9" title="§ 5.4 Generate a network error report">§ 5.4 Generate a
                    network error report</a>
            </li>
            <li>
                <a href="#ref-for-dfn-policy-cache-10" title="§ 7.5 Origins with multiple IP addresses">§ 7.5 Origins
                    with multiple IP addresses</a>
            </li>
            <li>
                <a href="#ref-for-dfn-policy-cache-11" title="§ 9. Privacy Considerations">§ 9. Privacy
                    Considerations</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-nel"
        aria-label="Links in this document to definition: NEL">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-nel"
                aria-label="Permalink for definition: NEL. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-nel-1" title="§ 1. Introduction">§ 1. Introduction</a>
            </li>
            <li>
                <a href="#ref-for-dfn-nel-2" title="§ 4. Policy delivery">§ 4. Policy delivery</a>
            </li>
            <li>
                <a href="#ref-for-dfn-nel-3" title="§ 4.1 NEL response header">§ 4.1 NEL response header</a> <a
                    href="#ref-for-dfn-nel-4" title="Reference 2">(2)</a> <a href="#ref-for-dfn-nel-5"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-nel-6" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-nel-7" title="§ 10.1 NEL">§ 10.1 NEL</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-report_to"
        aria-label="Links in this document to definition: report_to">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-report_to"
                aria-label="Permalink for definition: report_to. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-report_to-1" title="§ 1. Introduction">§ 1. Introduction</a>
            </li>
            <li>
                <a href="#ref-for-dfn-report_to-2" title="§ 4.1.1 The report_to member">§ 4.1.1 The report_to member</a>
            </li>
            <li>
                <a href="#ref-for-dfn-report_to-3" title="§ 4.2 Process policy headers">§ 4.2 Process policy headers</a>
                <a href="#ref-for-dfn-report_to-4" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-max_age"
        aria-label="Links in this document to definition: max_age">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-max_age"
                aria-label="Permalink for definition: max_age. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-max_age-1" title="§ 4.1.1 The report_to member">§ 4.1.1 The report_to member</a>
            </li>
            <li>
                <a href="#ref-for-dfn-max_age-2" title="§ 4.2 Process policy headers">§ 4.2 Process policy headers</a>
                <a href="#ref-for-dfn-max_age-3" title="Reference 2">(2)</a> <a href="#ref-for-dfn-max_age-4"
                    title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-include_subdomains"
        aria-label="Links in this document to definition: include_subdomains">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-include_subdomains"
                aria-label="Permalink for definition: include_subdomains. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-include_subdomains-1" title="§ 4.2 Process policy headers">§ 4.2 Process policy
                    headers</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-success_fraction"
        aria-label="Links in this document to definition: success_fraction">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-success_fraction"
                aria-label="Permalink for definition: success_fraction. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-success_fraction-1" title="§ 4.2 Process policy headers">§ 4.2 Process policy
                    headers</a> <a href="#ref-for-dfn-success_fraction-2" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-failure_fraction"
        aria-label="Links in this document to definition: failure_fraction">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-failure_fraction"
                aria-label="Permalink for definition: failure_fraction. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-failure_fraction-1" title="§ 4.2 Process policy headers">§ 4.2 Process policy
                    headers</a> <a href="#ref-for-dfn-failure_fraction-2" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-request_headers"
        aria-label="Links in this document to definition: request_headers">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-request_headers"
                aria-label="Permalink for definition: request_headers. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-request_headers-1" title="§ 4.2 Process policy headers">§ 4.2 Process policy
                    headers</a> <a href="#ref-for-dfn-request_headers-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-request_headers-3" title="§ 7.4 Monitoring cache validation">§ 7.4 Monitoring
                    cache validation</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-response_headers"
        aria-label="Links in this document to definition: response_headers">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-response_headers"
                aria-label="Permalink for definition: response_headers. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-response_headers-1" title="§ 4.2 Process policy headers">§ 4.2 Process policy
                    headers</a> <a href="#ref-for-dfn-response_headers-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-response_headers-3" title="§ 7.4 Monitoring cache validation">§ 7.4 Monitoring
                    cache validation</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-client-for-request"
        aria-label="Links in this document to definition: client (for request)">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://fetch.spec.whatwg.org/#concept-request-client"
                aria-label="Permalink for definition: client (for request). Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-client-for-request-1" title="§ 5.4 Generate a network error report">§ 5.4
                    Generate a network error report</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-index-term-contain-for-header-list"
        aria-label="Links in this document to definition: contain (for header list)">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://fetch.spec.whatwg.org/#header-list-contains"
                aria-label="Permalink for definition: contain (for header list). Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-contain-for-header-list-1" title="§ 5.2 Extract request headers">§ 5.2
                    Extract request headers</a>
            </li>
            <li>
                <a href="#ref-for-index-term-contain-for-header-list-2" title="§ 5.3 Extract response headers">§ 5.3
                    Extract response headers</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-cors-protocol"
        aria-label="Links in this document to definition: CORS protocol">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://fetch.spec.whatwg.org/#cors-protocol"
                aria-label="Permalink for definition: CORS protocol. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-cors-protocol-1" title="§ 3.1 Network requests">§ 3.1 Network requests</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-index-term-cors-preflight-request"
        aria-label="Links in this document to definition: CORS-preflight request">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://fetch.spec.whatwg.org/#cors-preflight-request"
                aria-label="Permalink for definition: CORS-preflight request. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-cors-preflight-request-1" title="§ 3.1 Network requests">§ 3.1 Network
                    requests</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-index-term-determine-the-network-partition-key"
        aria-label="Links in this document to definition: determine the network partition key">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://fetch.spec.whatwg.org/#determine-the-network-partition-key"
                aria-label="Permalink for definition: determine the network partition key. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-determine-the-network-partition-key-1"
                    title="§ 4.2 Process policy headers">§ 4.2 Process policy headers</a>
            </li>
            <li>
                <a href="#ref-for-index-term-determine-the-network-partition-key-2"
                    title="§ 5.1 Choose a policy for a request">§ 5.1 Choose a policy for a request</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-index-term-header-list-for-request"
        aria-label="Links in this document to definition: header list (for request)">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://fetch.spec.whatwg.org/#concept-request-header-list"
                aria-label="Permalink for definition: header list (for request). Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-header-list-for-request-1" title="§ 5.2 Extract request headers">§ 5.2
                    Extract request headers</a> <a href="#ref-for-index-term-header-list-for-request-2"
                    title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-index-term-header-list-for-response"
        aria-label="Links in this document to definition: header list (for response)">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://fetch.spec.whatwg.org/#concept-response-header-list"
                aria-label="Permalink for definition: header list (for response). Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-header-list-for-response-1" title="§ 5.3 Extract response headers">§ 5.3
                    Extract response headers</a> <a href="#ref-for-index-term-header-list-for-response-2"
                    title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-header-names"
        aria-label="Links in this document to definition: header names">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://fetch.spec.whatwg.org/#header-name"
                aria-label="Permalink for definition: header names. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-header-names-1" title="§ 3.4 NEL policies">§ 3.4 NEL policies</a>
            </li>
            <li>
                <a href="#ref-for-index-term-header-names-2" title="§ 4.1.6 The request_headers member">§ 4.1.6 The
                    request_headers member</a>
            </li>
            <li>
                <a href="#ref-for-index-term-header-names-3" title="§ 4.1.7 The response_headers member">§ 4.1.7 The
                    response_headers member</a>
            </li>
            <li>
                <a href="#ref-for-index-term-header-names-4" title="§ 5.2 Extract request headers">§ 5.2 Extract request
                    headers</a>
            </li>
            <li>
                <a href="#ref-for-index-term-header-names-5" title="§ 5.3 Extract response headers">§ 5.3 Extract
                    response headers</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-header-value"
        aria-label="Links in this document to definition: header value">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://fetch.spec.whatwg.org/#header-value"
                aria-label="Permalink for definition: header value. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-header-value-1" title="§ 4.1.6 The request_headers member">§ 4.1.6 The
                    request_headers member</a>
            </li>
            <li>
                <a href="#ref-for-index-term-header-value-2" title="§ 4.1.7 The response_headers member">§ 4.1.7 The
                    response_headers member</a>
            </li>
            <li>
                <a href="#ref-for-index-term-header-value-3" title="§ 5.2 Extract request headers">§ 5.2 Extract request
                    headers</a>
            </li>
            <li>
                <a href="#ref-for-index-term-header-value-4" title="§ 5.3 Extract response headers">§ 5.3 Extract
                    response headers</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-http-network-fetch"
        aria-label="Links in this document to definition: HTTP-network fetch">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://fetch.spec.whatwg.org/#http-network-fetch"
                aria-label="Permalink for definition: HTTP-network fetch. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-http-network-fetch-1" title="§ 3.1 Network requests">§ 3.1 Network
                    requests</a> <a href="#ref-for-index-term-http-network-fetch-2" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-network-partition-key"
        aria-label="Links in this document to definition: network partition key">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://fetch.spec.whatwg.org/#network-partition-key"
                aria-label="Permalink for definition: network partition key. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-network-partition-key-1" title="§ 3.1 Network requests">§ 3.1 Network
                    requests</a>
            </li>
            <li>
                <a href="#ref-for-index-term-network-partition-key-2" title="§ 3.6 Policy cache">§ 3.6 Policy cache</a>
                <a href="#ref-for-index-term-network-partition-key-3" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-index-term-network-partition-key-4" title="§ 9. Privacy Considerations">§ 9. Privacy
                    Considerations</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-request"
        aria-label="Links in this document to definition: request">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://fetch.spec.whatwg.org/#concept-request"
                aria-label="Permalink for definition: request. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-request-1" title="§ 3.1 Network requests">§ 3.1 Network requests</a> <a
                    href="#ref-for-index-term-request-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-index-term-request-3" title="Reference 3">(3)</a> <a
                    href="#ref-for-index-term-request-4" title="Reference 4">(4)</a> <a
                    href="#ref-for-index-term-request-5" title="Reference 5">(5)</a> <a
                    href="#ref-for-index-term-request-6" title="Reference 6">(6)</a>
            </li>
            <li>
                <a href="#ref-for-index-term-request-7" title="§ 5.4 Generate a network error report">§ 5.4 Generate a
                    network error report</a>
            </li>
            <li>
                <a href="#ref-for-index-term-request-8" title="§ 7.4 Monitoring cache validation">§ 7.4 Monitoring cache
                    validation</a> <a href="#ref-for-index-term-request-9" title="Reference 2">(2)</a> <a
                    href="#ref-for-index-term-request-10" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-index-term-request-11" title="§ 7.5 Origins with multiple IP addresses">§ 7.5 Origins
                    with multiple IP addresses</a> <a href="#ref-for-index-term-request-12" title="Reference 2">(2)</a>
                <a href="#ref-for-index-term-request-13" title="Reference 3">(3)</a> <a
                    href="#ref-for-index-term-request-14" title="Reference 4">(4)</a> <a
                    href="#ref-for-index-term-request-15" title="Reference 5">(5)</a> <a
                    href="#ref-for-index-term-request-16" title="Reference 6">(6)</a>
            </li>
            <li>
                <a href="#ref-for-index-term-request-17" title="§ 9. Privacy Considerations">§ 9. Privacy
                    Considerations</a> <a href="#ref-for-index-term-request-18" title="Reference 2">(2)</a> <a
                    href="#ref-for-index-term-request-19" title="Reference 3">(3)</a> <a
                    href="#ref-for-index-term-request-20" title="Reference 4">(4)</a> <a
                    href="#ref-for-index-term-request-21" title="Reference 5">(5)</a> <a
                    href="#ref-for-index-term-request-22" title="Reference 6">(6)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-index-term-reserved-client-for-request"
        aria-label="Links in this document to definition: reserved client (for request)">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://fetch.spec.whatwg.org/#concept-request-reserved-client"
                aria-label="Permalink for definition: reserved client (for request). Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-reserved-client-for-request-1" title="§ 4.2 Process policy headers">§ 4.2
                    Process policy headers</a>
            </li>
            <li>
                <a href="#ref-for-index-term-reserved-client-for-request-2"
                    title="§ 5.1 Choose a policy for a request">§ 5.1 Choose a policy for a request</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-response"
        aria-label="Links in this document to definition: response">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://fetch.spec.whatwg.org/#concept-response"
                aria-label="Permalink for definition: response. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-response-1" title="§ 3.1 Network requests">§ 3.1 Network requests</a>
            </li>
            <li>
                <a href="#ref-for-index-term-response-2" title="§ 4.2 Process policy headers">§ 4.2 Process policy
                    headers</a>
            </li>
            <li>
                <a href="#ref-for-index-term-response-3" title="§ 5.3 Extract response headers">§ 5.3 Extract response
                    headers</a>
            </li>
            <li>
                <a href="#ref-for-index-term-response-4" title="§ 5.4 Generate a network error report">§ 5.4 Generate a
                    network error report</a>
            </li>
            <li>
                <a href="#ref-for-index-term-response-5" title="§ 7.4 Monitoring cache validation">§ 7.4 Monitoring
                    cache validation</a>
            </li>
            <li>
                <a href="#ref-for-index-term-response-6" title="§ 7.5 Origins with multiple IP addresses">§ 7.5 Origins
                    with multiple IP addresses</a> <a href="#ref-for-index-term-response-7" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-duration-from"
        aria-label="Links in this document to definition: duration from">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://www.w3.org/TR/hr-time-3/#dfn-duration-from"
                aria-label="Permalink for definition: duration from. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-duration-from-1" title="§ 3.4 NEL policies">§ 3.4 NEL policies</a> <a
                    href="#ref-for-index-term-duration-from-2" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-index-term-unsafe-current-time-for-wall-clock"
        aria-label="Links in this document to definition: unsafe current time (for wall clock)">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://www.w3.org/TR/hr-time-3/#wall-clock-unsafe-current-time"
                aria-label="Permalink for definition: unsafe current time (for wall clock). Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-unsafe-current-time-for-wall-clock-1" title="§ 3.4 NEL policies">§ 3.4 NEL
                    policies</a> <a href="#ref-for-index-term-unsafe-current-time-for-wall-clock-2"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-index-term-unsafe-current-time-for-wall-clock-3"
                    title="§ 4.2 Process policy headers">§ 4.2 Process policy headers</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-wall-clock"
        aria-label="Links in this document to definition: wall clock">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://www.w3.org/TR/hr-time-3/#dfn-wall-clock"
                aria-label="Permalink for definition: wall clock. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-wall-clock-1" title="§ 3.4 NEL policies">§ 3.4 NEL policies</a> <a
                    href="#ref-for-index-term-wall-clock-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-index-term-wall-clock-3" title="§ 4.2 Process policy headers">§ 4.2 Process policy
                    headers</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-index-term-online-attribute-for-navigatoronline"
        aria-label="Links in this document to definition: onLine attribute (for NavigatorOnLine)">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://html.spec.whatwg.org/multipage/system-state.html#dom-navigator-online"
                aria-label="Permalink for definition: onLine attribute (for NavigatorOnLine). Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-online-attribute-for-navigatoronline-1" title="§ 3.1 Network requests">§
                    3.1 Network requests</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-origin"
        aria-label="Links in this document to definition: origin">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin"
                aria-label="Permalink for definition: origin. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-origin-1" title="§ 3.4 NEL policies">§ 3.4 NEL policies</a>
            </li>
            <li>
                <a href="#ref-for-index-term-origin-2" title="§ 3.5 Sampling rates">§ 3.5 Sampling rates</a>
            </li>
            <li>
                <a href="#ref-for-index-term-origin-3" title="§ 3.6 Policy cache">§ 3.6 Policy cache</a> <a
                    href="#ref-for-index-term-origin-4" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-index-term-origin-5" title="§ 4.1 NEL response header">§ 4.1 NEL response header</a>
            </li>
            <li>
                <a href="#ref-for-index-term-origin-6" title="§ 4.1.2 The max_age member">§ 4.1.2 The max_age member</a>
            </li>
            <li>
                <a href="#ref-for-index-term-origin-7" title="§ 4.1.6 The request_headers member">§ 4.1.6 The
                    request_headers member</a>
            </li>
            <li>
                <a href="#ref-for-index-term-origin-8" title="§ 4.1.7 The response_headers member">§ 4.1.7 The
                    response_headers member</a>
            </li>
            <li>
                <a href="#ref-for-index-term-origin-9" title="§ 4.2 Process policy headers">§ 4.2 Process policy
                    headers</a> <a href="#ref-for-index-term-origin-10" title="Reference 2">(2)</a> <a
                    href="#ref-for-index-term-origin-11" title="Reference 3">(3)</a> <a
                    href="#ref-for-index-term-origin-12" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-index-term-origin-13" title="§ 5.1 Choose a policy for a request">§ 5.1 Choose a
                    policy for a request</a>
            </li>
            <li>
                <a href="#ref-for-index-term-origin-14" title="§ 5.4 Generate a network error report">§ 5.4 Generate a
                    network error report</a> <a href="#ref-for-index-term-origin-15" title="Reference 2">(2)</a> <a
                    href="#ref-for-index-term-origin-16" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-index-term-origin-17" title="§ 6.1 DNS resolution errors">§ 6.1 DNS resolution
                    errors</a>
            </li>
            <li>
                <a href="#ref-for-index-term-origin-18" title="§ 7.2 Sample Network Error Reports">§ 7.2 Sample Network
                    Error Reports</a>
            </li>
            <li>
                <a href="#ref-for-index-term-origin-19" title="§ 7.5 Origins with multiple IP addresses">§ 7.5 Origins
                    with multiple IP addresses</a> <a href="#ref-for-index-term-origin-20" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-index-term-origin-21"
                    title="§ 8.2 Reporting of First-party Subresource Fetch Failures">§ 8.2 Reporting of First-party
                    Subresource Fetch Failures</a>
            </li>
            <li>
                <a href="#ref-for-index-term-origin-22"
                    title="§ 8.3 Reporting of Third-party Subresource Fetch Failures">§ 8.3 Reporting of Third-party
                    Subresource Fetch Failures</a>
            </li>
            <li>
                <a href="#ref-for-index-term-origin-23" title="§ 9. Privacy Considerations">§ 9. Privacy
                    Considerations</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-json-field-value"
        aria-label="Links in this document to definition: json-field-value">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://datatracker.ietf.org/doc/html/draft-reschke-http-jfv#json-field-value"
                aria-label="Permalink for definition: json-field-value. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-json-field-value-1" title="§ 4.1 NEL response header">§ 4.1 NEL response
                    header</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-user-agent"
        aria-label="Links in this document to definition: user agent">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://infra.spec.whatwg.org/#user-agent"
                aria-label="Permalink for definition: user agent. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-user-agent-1" title="§ 3.1 Network requests">§ 3.1 Network requests</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-mixed-content"
        aria-label="Links in this document to definition: mixed content">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://www.w3.org/TR/mixed-content/#mixed-content"
                aria-label="Permalink for definition: mixed content. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-mixed-content-1" title="§ 3.1 Network requests">§ 3.1 Network requests</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-endpoint-group"
        aria-label="Links in this document to definition: endpoint group">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://w3c.github.io/reporting/network-reporting.html#endpoint-group"
                aria-label="Permalink for definition: endpoint group. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-endpoint-group-1" title="§ 3.4 NEL policies">§ 3.4 NEL policies</a>
            </li>
            <li>
                <a href="#ref-for-index-term-endpoint-group-2" title="§ 4.1.1 The report_to member">§ 4.1.1 The
                    report_to member</a> <a href="#ref-for-index-term-endpoint-group-3" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-index-term-endpoint-group-4" title="§ 4.1.2 The max_age member">§ 4.1.2 The max_age
                    member</a>
            </li>
            <li>
                <a href="#ref-for-index-term-endpoint-group-5" title="§ 4.1.3 The include_subdomains member">§ 4.1.3 The
                    include_subdomains member</a>
            </li>
            <li>
                <a href="#ref-for-index-term-endpoint-group-6" title="§ 7.1 Sample Policy Definitions">§ 7.1 Sample
                    Policy Definitions</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-index-term-generate-a-network-report"
        aria-label="Links in this document to definition: Generate a network report">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://w3c.github.io/reporting/network-reporting.html#generate-a-network-report"
                aria-label="Permalink for definition: Generate a network report. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-generate-a-network-report-1" title="§ 5.5 Deliver a network report">§ 5.5
                    Deliver a network report</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-referrer-policy"
        aria-label="Links in this document to definition: referrer policy">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://www.w3.org/TR/referrer-policy/#referrer-policy"
                aria-label="Permalink for definition: referrer policy. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-referrer-policy-1" title="§ 5.4 Generate a network error report">§ 5.4
                    Generate a network error report</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-body-for-report"
        aria-label="Links in this document to definition: body (for report)">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://www.w3.org/TR/reporting-1/#report-body"
                aria-label="Permalink for definition: body (for report). Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-body-for-report-1" title="§ 7.2 Sample Network Error Reports">§ 7.2 Sample
                    Network Error Reports</a>
            </li>
            <li>
                <a href="#ref-for-index-term-body-for-report-2" title="§ 9. Privacy Considerations">§ 9. Privacy
                    Considerations</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-report"
        aria-label="Links in this document to definition: report">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://www.w3.org/TR/reporting-1/#report"
                aria-label="Permalink for definition: report. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-report-1" title="§ 3.3 Network error reports">§ 3.3 Network error
                    reports</a>
            </li>
            <li>
                <a href="#ref-for-index-term-report-2" title="§ 7.2 Sample Network Error Reports">§ 7.2 Sample Network
                    Error Reports</a> <a href="#ref-for-index-term-report-3" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-report-type"
        aria-label="Links in this document to definition: report type">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://www.w3.org/TR/reporting-1/#report-type"
                aria-label="Permalink for definition: report type. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-report-type-1" title="§ 3.3 Network error reports">§ 3.3 Network error
                    reports</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-index-term-visible-to-reportingobservers"
        aria-label="Links in this document to definition: visible to ReportingObservers">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://www.w3.org/TR/reporting-1/#visible-to-reportingobservers"
                aria-label="Permalink for definition: visible to ReportingObservers. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-visible-to-reportingobservers-1" title="§ 3.3 Network error reports">§ 3.3
                    Network error reports</a> <a href="#ref-for-index-term-visible-to-reportingobservers-2"
                    title="Reference 2">(2)</a> <a href="#ref-for-index-term-visible-to-reportingobservers-3"
                    title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-network-protocol"
        aria-label="Links in this document to definition: network protocol">
        <span class="caret"></span>
        <div>
            <a class="self-link"
                href="https://www.w3.org/TR/resource-timing/#dom-performanceresourcetiming-nexthopprotocol"
                aria-label="Permalink for definition: network protocol. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-network-protocol-1" title="§ 5.4 Generate a network error report">§ 5.4
                    Generate a network error report</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-domain-name"
        aria-label="Links in this document to definition: domain name">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://www.rfc-editor.org/rfc/rfc1034#section-3.1"
                aria-label="Permalink for definition: domain name. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-domain-name-1" title="§ 5.4 Generate a network error report">§ 5.4 Generate
                    a network error report</a> <a href="#ref-for-index-term-domain-name-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-index-term-domain-name-3" title="§ 7.5 Origins with multiple IP addresses">§ 7.5
                    Origins with multiple IP addresses</a>
            </li>
            <li>
                <a href="#ref-for-index-term-domain-name-4" title="§ 9. Privacy Considerations">§ 9. Privacy
                    Considerations</a> <a href="#ref-for-index-term-domain-name-5" title="Reference 2">(2)</a> <a
                    href="#ref-for-index-term-domain-name-6" title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-resolver"
        aria-label="Links in this document to definition: resolver">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://www.rfc-editor.org/rfc/rfc1034#section-5"
                aria-label="Permalink for definition: resolver. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-resolver-1" title="§ 9. Privacy Considerations">§ 9. Privacy
                    Considerations</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-superdomain-match"
        aria-label="Links in this document to definition: superdomain match">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://www.rfc-editor.org/rfc/rfc6797#section-8.2"
                aria-label="Permalink for definition: superdomain match. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-superdomain-match-1" title="§ 5.1 Choose a policy for a request">§ 5.1
                    Choose a policy for a request</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-200-response"
        aria-label="Links in this document to definition: 200 response">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://httpwg.org/specs/rfc9110.html#status.200"
                aria-label="Permalink for definition: 200 response. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-200-response-1" title="§ 7.2 Sample Network Error Reports">§ 7.2 Sample
                    Network Error Reports</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-4xx"
        aria-label="Links in this document to definition: 4xx">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://httpwg.org/specs/rfc9110.html#status.4xx"
                aria-label="Permalink for definition: 4xx. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-4xx-1" title="§ 3.1 Network requests">§ 3.1 Network requests</a> <a
                    href="#ref-for-index-term-4xx-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-index-term-4xx-3" title="§ 6.3 Transmission of request and response errors">§ 6.3
                    Transmission of request and response errors</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-5xx"
        aria-label="Links in this document to definition: 5xx">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://httpwg.org/specs/rfc9110.html#status.5xx"
                aria-label="Permalink for definition: 5xx. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-5xx-1" title="§ 3.1 Network requests">§ 3.1 Network requests</a> <a
                    href="#ref-for-index-term-5xx-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-index-term-5xx-3" title="§ 6.3 Transmission of request and response errors">§ 6.3
                    Transmission of request and response errors</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-etag"
        aria-label="Links in this document to definition: ETag">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://httpwg.org/specs/rfc9110.html#field.etag"
                aria-label="Permalink for definition: ETag. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-etag-1" title="§ 7.4 Monitoring cache validation">§ 7.4 Monitoring cache
                    validation</a> <a href="#ref-for-index-term-etag-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-index-term-etag-3" title="Reference 3">(3)</a> <a href="#ref-for-index-term-etag-4"
                    title="Reference 4">(4)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-if-none-match"
        aria-label="Links in this document to definition: If-None-Match">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://httpwg.org/specs/rfc9110.html#field.if-none-match"
                aria-label="Permalink for definition: If-None-Match. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-if-none-match-1" title="§ 7.4 Monitoring cache validation">§ 7.4 Monitoring
                    cache validation</a> <a href="#ref-for-index-term-if-none-match-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-index-term-if-none-match-3" title="Reference 3">(3)</a> <a
                    href="#ref-for-index-term-if-none-match-4" title="Reference 4">(4)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-request-method"
        aria-label="Links in this document to definition: request method">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://httpwg.org/specs/rfc9110.html#method"
                aria-label="Permalink for definition: request method. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-request-method-1" title="§ 5.4 Generate a network error report">§ 5.4
                    Generate a network error report</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-response-headers"
        aria-label="Links in this document to definition: response headers">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://httpwg.org/specs/rfc9110.html#fields"
                aria-label="Permalink for definition: response headers. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-response-headers-1" title="§ 3.4 NEL policies">§ 3.4 NEL policies</a>
            </li>
            <li>
                <a href="#ref-for-index-term-response-headers-2" title="§ 4. Policy delivery">§ 4. Policy delivery</a>
            </li>
            <li>
                <a href="#ref-for-index-term-response-headers-3" title="§ 4.1 NEL response header">§ 4.1 NEL response
                    header</a> <a href="#ref-for-index-term-response-headers-4" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-index-term-response-headers-5" title="§ 4.2 Process policy headers">§ 4.2 Process
                    policy headers</a> <a href="#ref-for-index-term-response-headers-6" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-server"
        aria-label="Links in this document to definition: server">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://httpwg.org/specs/rfc9110.html#core.semantics"
                aria-label="Permalink for definition: server. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-server-1" title="§ 3.1 Network requests">§ 3.1 Network requests</a> <a
                    href="#ref-for-index-term-server-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-index-term-server-3" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-index-term-server-4" title="§ 3.4 NEL policies">§ 3.4 NEL policies</a>
            </li>
            <li>
                <a href="#ref-for-index-term-server-5" title="§ 4. Policy delivery">§ 4. Policy delivery</a>
            </li>
            <li>
                <a href="#ref-for-index-term-server-6" title="§ 4.1.1 The report_to member">§ 4.1.1 The report_to
                    member</a>
            </li>
            <li>
                <a href="#ref-for-index-term-server-7" title="§ 4.1.2 The max_age member">§ 4.1.2 The max_age member</a>
            </li>
            <li>
                <a href="#ref-for-index-term-server-8" title="§ 4.2 Process policy headers">§ 4.2 Process policy
                    headers</a>
            </li>
            <li>
                <a href="#ref-for-index-term-server-9" title="§ 5.4 Generate a network error report">§ 5.4 Generate a
                    network error report</a> <a href="#ref-for-index-term-server-10" title="Reference 2">(2)</a> <a
                    href="#ref-for-index-term-server-11" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-index-term-server-12" title="§ 7.4 Monitoring cache validation">§ 7.4 Monitoring cache
                    validation</a>
            </li>
            <li>
                <a href="#ref-for-index-term-server-13" title="§ 7.5 Origins with multiple IP addresses">§ 7.5 Origins
                    with multiple IP addresses</a> <a href="#ref-for-index-term-server-14" title="Reference 2">(2)</a>
                <a href="#ref-for-index-term-server-15" title="Reference 3">(3)</a> <a
                    href="#ref-for-index-term-server-16" title="Reference 4">(4)</a> <a
                    href="#ref-for-index-term-server-17" title="Reference 5">(5)</a>
            </li>
            <li>
                <a href="#ref-for-index-term-server-18" title="§ 9. Privacy Considerations">§ 9. Privacy
                    Considerations</a> <a href="#ref-for-index-term-server-19" title="Reference 2">(2)</a> <a
                    href="#ref-for-index-term-server-20" title="Reference 3">(3)</a> <a
                    href="#ref-for-index-term-server-21" title="Reference 4">(4)</a> <a
                    href="#ref-for-index-term-server-22" title="Reference 5">(5)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-status-code"
        aria-label="Links in this document to definition: status code">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://httpwg.org/specs/rfc9110.html#status.code"
                aria-label="Permalink for definition: status code. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-status-code-1" title="§ 5.4 Generate a network error report">§ 5.4 Generate
                    a network error report</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-index-term-persistent-connections"
        aria-label="Links in this document to definition: persistent connections">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://httpwg.org/specs/rfc9112.html#persistent.connections"
                aria-label="Permalink for definition: persistent connections. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-persistent-connections-1" title="§ 3.1 Network requests">§ 3.1 Network
                    requests</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-index-term-is-origin-potentially-trustworthy"
        aria-label="Links in this document to definition: Is origin potentially trustworthy?">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://www.w3.org/TR/secure-contexts/#is-origin-trustworthy"
                aria-label="Permalink for definition: Is origin potentially trustworthy?. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-is-origin-potentially-trustworthy-1" title="§ 4.2 Process policy headers">§
                    4.2 Process policy headers</a>
            </li>
            <li>
                <a href="#ref-for-index-term-is-origin-potentially-trustworthy-2"
                    title="§ 5.4 Generate a network error report">§ 5.4 Generate a network error report</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-index-term-potentially-trustworthy-origin"
        aria-label="Links in this document to definition: potentially trustworthy origin">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://www.w3.org/TR/secure-contexts/#potentially-trustworthy-origin"
                aria-label="Permalink for definition: potentially trustworthy origin. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-potentially-trustworthy-origin-1" title="§ 7.1 Sample Policy Definitions">§
                    7.1 Sample Policy Definitions</a>
            </li>
            <li>
                <a href="#ref-for-index-term-potentially-trustworthy-origin-2" title="§ 9. Privacy Considerations">§ 9.
                    Privacy Considerations</a> <a href="#ref-for-index-term-potentially-trustworthy-origin-3"
                    title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-fragment-for-url"
        aria-label="Links in this document to definition: fragment (for url)">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://url.spec.whatwg.org/#concept-url-fragment"
                aria-label="Permalink for definition: fragment (for url). Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-fragment-for-url-1" title="§ 5.5 Deliver a network report">§ 5.5 Deliver a
                    network report</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-ip-address"
        aria-label="Links in this document to definition: IP address">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://url.spec.whatwg.org/#ip-address"
                aria-label="Permalink for definition: IP address. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-ip-address-1" title="§ 3.1 Network requests">§ 3.1 Network requests</a>
            </li>
            <li>
                <a href="#ref-for-index-term-ip-address-2" title="§ 3.4 NEL policies">§ 3.4 NEL policies</a>
            </li>
            <li>
                <a href="#ref-for-index-term-ip-address-3" title="§ 4.2 Process policy headers">§ 4.2 Process policy
                    headers</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-path-for-url"
        aria-label="Links in this document to definition: path (for url)">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://url.spec.whatwg.org/#concept-url-path"
                aria-label="Permalink for definition: path (for url). Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-path-for-url-1" title="§ 5.5 Deliver a network report">§ 5.5 Deliver a
                    network report</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-query-for-url"
        aria-label="Links in this document to definition: query (for url)">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://url.spec.whatwg.org/#concept-url-query"
                aria-label="Permalink for definition: query (for url). Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-query-for-url-1" title="§ 5.5 Deliver a network report">§ 5.5 Deliver a
                    network report</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-url-serializer"
        aria-label="Links in this document to definition: URL serializer">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="https://url.spec.whatwg.org/#concept-url-serializer"
                aria-label="Permalink for definition: URL serializer. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-index-term-url-serializer-1" title="§ 5.5 Deliver a network report">§ 5.5 Deliver a
                    network report</a>
            </li>
        </ul>
    </div>
    <script id="respec-highlight-vars">(() => {
            // @ts-check

            if (document.respec) {
                document.respec.ready.then(setupVarHighlighter);
            } else {
                setupVarHighlighter();
            }

            function setupVarHighlighter() {
                document
                    .querySelectorAll("var")
                    .forEach(varElem => varElem.addEventListener("click", highlightListener));
            }

            function highlightListener(ev) {
                ev.stopPropagation();
                const { target: varElem } = ev;
                const hightligtedElems = highlightVars(varElem);
                const resetListener = () => {
                    const hlColor = getHighlightColor(varElem);
                    hightligtedElems.forEach(el => removeHighlight(el, hlColor));
                    [...HL_COLORS.keys()].forEach(key => HL_COLORS.set(key, true));
                };
                if (hightligtedElems.length) {
                    document.body.addEventListener("click", resetListener, { once: true });
                }
            }

            // availability of highlight colors. colors from var.css
            const HL_COLORS = new Map([
                ["respec-hl-c1", true],
                ["respec-hl-c2", true],
                ["respec-hl-c3", true],
                ["respec-hl-c4", true],
                ["respec-hl-c5", true],
                ["respec-hl-c6", true],
                ["respec-hl-c7", true],
            ]);

            function getHighlightColor(target) {
                // return current colors if applicable
                const { value } = target.classList;
                const re = /respec-hl-\w+/;
                const activeClass = re.test(value) && value.match(re);
                if (activeClass) return activeClass[0];

                // first color preference
                if (HL_COLORS.get("respec-hl-c1") === true) return "respec-hl-c1";

                // otherwise get some other available color
                return [...HL_COLORS.keys()].find(c => HL_COLORS.get(c)) || "respec-hl-c1";
            }

            function highlightVars(varElem) {
                const textContent = norm(varElem.textContent);
                const parent = varElem.closest(".algorithm, section");
                const highlightColor = getHighlightColor(varElem);

                const varsToHighlight = [...parent.querySelectorAll("var")].filter(
                    el =>
                        norm(el.textContent) === textContent &&
                        el.closest(".algorithm, section") === parent
                );

                // update availability of highlight color
                const colorStatus = varsToHighlight[0].classList.contains("respec-hl");
                HL_COLORS.set(highlightColor, colorStatus);

                // highlight vars
                if (colorStatus) {
                    varsToHighlight.forEach(el => removeHighlight(el, highlightColor));
                    return [];
                } else {
                    varsToHighlight.forEach(el => addHighlight(el, highlightColor));
                }
                return varsToHighlight;
            }

            function removeHighlight(el, highlightColor) {
                el.classList.remove("respec-hl", highlightColor);
                // clean up empty class attributes so they don't come in export
                if (!el.classList.length) el.removeAttribute("class");
            }

            function addHighlight(elem, highlightColor) {
                elem.classList.add("respec-hl", highlightColor);
            }

            /**
             * Same as `norm` from src/core/utils, but our build process doesn't allow
             * imports in runtime scripts, so duplicated here.
             * @param {string} str
             */
            function norm(str) {
                return str.trim().replace(/\s+/g, " ");
            }
        })()</script>
    <script id="respec-dfn-panel">(() => {
                                               // @ts-check
                                               if (document.respec) {
                                                   document.respec.ready.then(setupPanel);
                                               } else {
                                                   setupPanel();
                                               }

                                               function setupPanel() {
                                                   const listener = panelListener();
                                                   document.body.addEventListener("keydown", listener);
                                                   document.body.addEventListener("click", listener);
                                               }

                                               function panelListener() {
                                                   /** @type {HTMLElement} */
                                                   let panel = null;
                                                   return event => {
                                                       const { target, type } = event;

                                                       if (!(target instanceof HTMLElement)) return;

                                                       // For keys, we only care about Enter key to activate the panel
                                                       // otherwise it's activated via a click.
                                                       if (type === "keydown" && event.key !== "Enter") return;

                                                       const action = deriveAction(event);

                                                       switch (action) {
                                                           case "show": {
                                                               hidePanel(panel);
                                                               /** @type {HTMLElement} */
                                                               const dfn = target.closest("dfn, .index-term");
                                                               panel = document.getElementById(`dfn-panel-for-${dfn.id}`);
                                                               const coords = deriveCoordinates(event);
                                                               displayPanel(dfn, panel, coords);
                                                               break;
                                                           }
                                                           case "dock": {
                                                               panel.style.left = null;
                                                               panel.style.top = null;
                                                               panel.classList.add("docked");
                                                               break;
                                                           }
                                                           case "hide": {
                                                               hidePanel(panel);
                                                               panel = null;
                                                               break;
                                                           }
                                                       }
                                                   };
                                               }

                                               /**
                                                * @param {MouseEvent|KeyboardEvent} event
                                                */
                                               function deriveCoordinates(event) {
                                                   const target = /** @type HTMLElement */ (event.target);

                                                   // We prevent synthetic AT clicks from putting
                                                   // the dialog in a weird place. The AT events sometimes
                                                   // lack coordinates, so they have clientX/Y = 0
                                                   const rect = target.getBoundingClientRect();
                                                   if (
                                                       event instanceof MouseEvent &&
                                                       event.clientX >= rect.left &&
                                                       event.clientY >= rect.top
                                                   ) {
                                                       // The event probably happened inside the bounding rect...
                                                       return { x: event.clientX, y: event.clientY };
                                                   }

                                                   // Offset to the middle of the element
                                                   const x = rect.x + rect.width / 2;
                                                   // Placed at the bottom of the element
                                                   const y = rect.y + rect.height;
                                                   return { x, y };
                                               }

                                               /**
                                                * @param {Event} event
                                                */
                                               function deriveAction(event) {
                                                   const target = /** @type {HTMLElement} */ (event.target);
                                                   const hitALink = !!target.closest("a");
                                                   if (target.closest("dfn:not([data-cite]), .index-term")) {
                                                       return hitALink ? "none" : "show";
                                                   }
                                                   if (target.closest(".dfn-panel")) {
                                                       if (hitALink) {
                                                           return target.classList.contains("self-link") ? "hide" : "dock";
                                                       }
                                                       const panel = target.closest(".dfn-panel");
                                                       return panel.classList.contains("docked") ? "hide" : "none";
                                                   }
                                                   if (document.querySelector(".dfn-panel:not([hidden])")) {
                                                       return "hide";
                                                   }
                                                   return "none";
                                               }

                                               /**
                                                * @param {HTMLElement} dfn
                                                * @param {HTMLElement} panel
                                                * @param {{ x: number, y: number }} clickPosition
                                                */
                                               function displayPanel(dfn, panel, { x, y }) {
                                                   panel.hidden = false;
                                                   // distance (px) between edge of panel and the pointing triangle (caret)
                                                   const MARGIN = 20;

                                                   const dfnRects = dfn.getClientRects();
                                                   // Find the `top` offset when the `dfn` can be spread across multiple lines
                                                   let closestTop = 0;
                                                   let minDiff = Infinity;
                                                   for (const rect of dfnRects) {
                                                       const { top, bottom } = rect;
                                                       const diffFromClickY = Math.abs((top + bottom) / 2 - y);
                                                       if (diffFromClickY < minDiff) {
                                                           minDiff = diffFromClickY;
                                                           closestTop = top;
                                                       }
                                                   }

                                                   const top = window.scrollY + closestTop + dfnRects[0].height;
                                                   const left = x - MARGIN;
                                                   panel.style.left = `${left}px`;
                                                   panel.style.top = `${top}px`;

                                                   // Find if the panel is flowing out of the window
                                                   const panelRect = panel.getBoundingClientRect();
                                                   const SCREEN_WIDTH = Math.min(window.innerWidth, window.screen.width);
                                                   if (panelRect.right > SCREEN_WIDTH) {
                                                       const newLeft = Math.max(MARGIN, x + MARGIN - panelRect.width);
                                                       const newCaretOffset = left - newLeft;
                                                       panel.style.left = `${newLeft}px`;
                                                       /** @type {HTMLElement} */
                                                       const caret = panel.querySelector(".caret");
                                                       caret.style.left = `${newCaretOffset}px`;
                                                   }

                                                   // As it's a dialog, we trap focus.
                                                   // TODO: when <dialog> becomes a implemented, we should really
                                                   // use that.
                                                   trapFocus(panel, dfn);
                                               }

                                               /**
                                                * @param {HTMLElement} panel
                                                * @param {HTMLElement} dfn
                                                * @returns
                                                */
                                               function trapFocus(panel, dfn) {
                                                   /** @type NodeListOf<HTMLAnchorElement> elements */
                                                   const anchors = panel.querySelectorAll("a[href]");
                                                   // No need to trap focus
                                                   if (!anchors.length) return;

                                                   // Move focus to first anchor element
                                                   const first = anchors.item(0);
                                                   first.focus();

                                                   const trapListener = createTrapListener(anchors, panel, dfn);
                                                   panel.addEventListener("keydown", trapListener);

                                                   // Hiding the panel releases the trap
                                                   const mo = new MutationObserver(records => {
                                                       const [record] = records;
                                                       const target = /** @type HTMLElement */ (record.target);
                                                       if (target.hidden) {
                                                           panel.removeEventListener("keydown", trapListener);
                                                           mo.disconnect();
                                                       }
                                                   });
                                                   mo.observe(panel, { attributes: true, attributeFilter: ["hidden"] });
                                               }

                                               /**
                                                *
                                                * @param {NodeListOf<HTMLAnchorElement>} anchors
                                                * @param {HTMLElement} panel
                                                * @param {HTMLElement} dfn
                                                * @returns
                                                */
                                               function createTrapListener(anchors, panel, dfn) {
                                                   const lastIndex = anchors.length - 1;
                                                   let currentIndex = 0;
                                                   return event => {
                                                       switch (event.key) {
                                                           // Hitting "Tab" traps us in a nice loop around elements.
                                                           case "Tab": {
                                                               event.preventDefault();
                                                               currentIndex += event.shiftKey ? -1 : +1;
                                                               if (currentIndex < 0) {
                                                                   currentIndex = lastIndex;
                                                               } else if (currentIndex > lastIndex) {
                                                                   currentIndex = 0;
                                                               }
                                                               anchors.item(currentIndex).focus();
                                                               break;
                                                           }

                                                           // Hitting "Enter" on an anchor releases the trap.
                                                           case "Enter":
                                                               hidePanel(panel);
                                                               break;

                                                           // Hitting "Escape" returns focus to dfn.
                                                           case "Escape":
                                                               hidePanel(panel);
                                                               dfn.focus();
                                                               return;
                                                       }
                                                   };
                                               }

                                               /** @param {HTMLElement} panel */
                                               function hidePanel(panel) {
                                                   if (!panel) return;
                                                   panel.hidden = true;
                                                   panel.classList.remove("docked");
                                               }
                                           })()</script>
    <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
    <script src="/dropdown.js"></script>
</body>

</html>