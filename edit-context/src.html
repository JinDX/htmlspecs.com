<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="generator" content="ReSpec 35.6.0">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <style>
        span.example-title {
            text-transform: none
        }

        :is(aside, div).example,
        div.illegal-example {
            padding: .5em;
            margin: 1em 0;
            position: relative;
            clear: both
        }

        div.illegal-example {
            color: red
        }

        div.illegal-example p {
            color: #000
        }

        aside.example div.example {
            border-left-width: .1em;
            border-color: #999;
            background: #fff
        }
    </style>
    <style>
        .issue-label {
            text-transform: initial
        }

        .warning>p:first-child {
            margin-top: 0
        }

        .warning {
            padding: .5em;
            border-left-width: .5em;
            border-left-style: solid
        }

        span.warning {
            padding: .1em .5em .15em
        }

        .issue.closed span.issue-number {
            text-decoration: line-through
        }

        .issue.closed span.issue-number::after {
            content: " (Closed)";
            font-size: smaller
        }

        .warning {
            border-color: #f11;
            border-color: var(--warning-border, #f11);
            border-width: .2em;
            border-style: solid;
            background: #fbe9e9;
            background: var(--warning-bg, #fbe9e9);
            color: #000;
            color: var(--text, #000)
        }

        .warning-title:before {
            content: "⚠";
            font-size: 1.3em;
            float: left;
            padding-right: .3em;
            margin-top: -.3em
        }

        li.task-list-item {
            list-style: none
        }

        input.task-list-item-checkbox {
            margin: 0 .35em .25em -1.6em;
            vertical-align: middle
        }

        .issue a.respec-gh-label {
            padding: 5px;
            margin: 0 2px 0 2px;
            font-size: 10px;
            text-transform: none;
            text-decoration: none;
            font-weight: 700;
            border-radius: 4px;
            position: relative;
            bottom: 2px;
            border: none;
            display: inline-block
        }
    </style>
    <style>
        pre.idl {
            padding: 1em;
            position: relative
        }

        pre.idl>code {
            color: #000;
            color: var(--text, #000)
        }

        @media print {
            pre.idl {
                white-space: pre-wrap
            }
        }

        .idlHeader {
            display: block;
            width: 150px;
            background: #8ccbf2;
            background: var(--def-border, #8ccbf2);
            color: #fff;
            color: var(--defrow-border, #fff);
            font-family: sans-serif;
            font-weight: 700;
            margin: -1em 0 1em -1em;
            height: 28px;
            line-height: 28px
        }

        .idlHeader a.self-link {
            margin-left: .3cm;
            text-decoration: none;
            border-bottom: none;
            color: inherit
        }

        .idlID {
            font-weight: 700;
            color: #005a9c
        }

        .idlType {
            color: #005a9c
        }

        .idlName {
            color: #ff4500
        }

        .idlName a {
            color: #ff4500;
            border-bottom: 1px dotted #ff4500;
            text-decoration: none
        }

        a.idlEnumItem {
            color: #000;
            border-bottom: 1px dotted #ccc;
            text-decoration: none
        }

        .idlSuperclass {
            font-style: italic;
            color: #005a9c
        }

        .idlDefaultValue,
        .idlParamName {
            font-style: italic
        }

        .extAttr {
            color: #666
        }

        .idlSectionComment {
            color: gray
        }

        .idlIncludes a {
            font-weight: 700
        }

        .respec-button-copy-paste:focus {
            text-decoration: none;
            border-color: #51a7e8;
            outline: 0;
            box-shadow: 0 0 5px rgba(81, 167, 232, .5)
        }

        .respec-button-copy-paste:is(:focus:hover, .selected:focus) {
            border-color: #51a7e8
        }

        .respec-button-copy-paste:is(:hover, :active, .zeroclipboard-is-hover, .zeroclipboard-is-active) {
            text-decoration: none;
            background-color: #ddd;
            background-image: linear-gradient(#eee, #ddd);
            border-color: #ccc
        }

        .respec-button-copy-paste:is(:active, .selected, .zeroclipboard-is-active) {
            background-color: #dcdcdc;
            background-image: none;
            border-color: #b5b5b5;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, .15)
        }

        .respec-button-copy-paste.selected:hover {
            background-color: #cfcfcf
        }

        .respec-button-copy-paste:is(:disabled, :disabled:hover, .disabled, .disabled:hover) {
            color: rgba(102, 102, 102, .5);
            cursor: default;
            background-color: rgba(229, 229, 229, .5);
            background-image: none;
            border-color: rgba(197, 197, 197, .5);
            box-shadow: none
        }

        @media print {
            .respec-button-copy-paste {
                visibility: hidden
            }
        }
    </style>
    <style>
        dfn {
            cursor: pointer
        }

        .dfn-panel {
            position: absolute;
            z-index: 35;
            min-width: 300px;
            max-width: 500px;
            padding: .5em .75em;
            margin-top: .6em;
            font-family: "Helvetica Neue", sans-serif;
            font-size: small;
            background: #fff;
            background: var(--indextable-hover-bg, #fff);
            color: #000;
            color: var(--text, #000);
            box-shadow: 0 1em 3em -.4em rgba(0, 0, 0, .3), 0 0 1px 1px rgba(0, 0, 0, .05);
            box-shadow: 0 1em 3em -.4em var(--tocsidebar-shadow, rgba(0, 0, 0, .3)), 0 0 1px 1px var(--tocsidebar-shadow, rgba(0, 0, 0, .05));
            border-radius: 2px
        }

        .dfn-panel:not(.docked)>.caret {
            position: absolute;
            top: -9px
        }

        .dfn-panel:not(.docked)>.caret::after,
        .dfn-panel:not(.docked)>.caret::before {
            content: "";
            position: absolute;
            border: 10px solid transparent;
            border-top: 0;
            border-bottom: 10px solid #fff;
            border-bottom-color: var(--indextable-hover-bg, #fff);
            top: 0
        }

        .dfn-panel:not(.docked)>.caret::before {
            border-bottom: 9px solid #a2a9b1;
            border-bottom-color: var(--indextable-hover-bg, #a2a9b1)
        }

        .dfn-panel * {
            margin: 0
        }

        .dfn-panel b {
            display: block;
            color: #000;
            color: var(--text, #000);
            margin-top: .25em
        }

        .dfn-panel ul a[href] {
            color: #333;
            color: var(--text, #333)
        }

        .dfn-panel>div {
            display: flex
        }

        .dfn-panel a.self-link {
            font-weight: 700;
            margin-right: auto
        }

        .dfn-panel .marker {
            padding: .1em;
            margin-left: .5em;
            border-radius: .2em;
            text-align: center;
            white-space: nowrap;
            font-size: 90%;
            color: #040b1c
        }

        .dfn-panel .marker.dfn-exported {
            background: #d1edfd;
            box-shadow: 0 0 0 .125em #1ca5f940
        }

        .dfn-panel .marker.idl-block {
            background: #8ccbf2;
            box-shadow: 0 0 0 .125em #0670b161
        }

        .dfn-panel a:not(:hover) {
            text-decoration: none !important;
            border-bottom: none !important
        }

        .dfn-panel a[href]:hover {
            border-bottom-width: 1px
        }

        .dfn-panel ul {
            padding: 0
        }

        .dfn-panel li {
            margin-left: 1em
        }

        .dfn-panel.docked {
            position: fixed;
            left: .5em;
            top: unset;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - .75em * 2 - .5em - .2em * 2);
            max-height: 30vh;
            overflow: auto
        }
    </style>


    <title>EditContext API</title>



    <style id="respec-mainstyle">
        @keyframes pop {
            0% {
                transform: scale(1, 1)
            }

            25% {
                transform: scale(1.25, 1.25);
                opacity: .75
            }

            100% {
                transform: scale(1, 1)
            }
        }

        a.internalDFN {
            color: inherit;
            border-bottom: 1px solid #99c;
            text-decoration: none
        }

        a.externalDFN {
            color: inherit;
            border-bottom: 1px dotted #ccc;
            text-decoration: none
        }

        a.bibref {
            text-decoration: none
        }

        .respec-offending-element:target {
            animation: pop .25s ease-in-out 0s 1
        }

        .respec-offending-element,
        a[href].respec-offending-element {
            text-decoration: red wavy underline
        }

        @supports not (text-decoration:red wavy underline) {
            .respec-offending-element:not(pre) {
                display: inline-block
            }

            .respec-offending-element {
                background: url(data:image/gif;base64,R0lGODdhBAADAPEAANv///8AAP///wAAACwAAAAABAADAEACBZQjmIAFADs=) bottom repeat-x
            }
        }

        #references :target {
            background: #eaf3ff;
            animation: pop .4s ease-in-out 0s 1
        }

        cite .bibref {
            font-style: italic
        }

        a[href].orcid {
            padding-left: 4px;
            padding-right: 4px
        }

        a[href].orcid>svg {
            margin-bottom: -2px
        }

        ol.tof,
        ul.tof {
            list-style: none outside none
        }

        .caption {
            margin-top: .5em;
            font-style: italic
        }

        #issue-summary>ul {
            column-count: 2
        }

        #issue-summary li {
            list-style: none;
            display: inline-block
        }

        details.respec-tests-details {
            margin-left: 1em;
            display: inline-block;
            vertical-align: top
        }

        details.respec-tests-details>* {
            padding-right: 2em
        }

        details.respec-tests-details[open] {
            z-index: 999999;
            position: absolute;
            border: thin solid #cad3e2;
            border-radius: .3em;
            background-color: #fff;
            padding-bottom: .5em
        }

        details.respec-tests-details[open]>summary {
            border-bottom: thin solid #cad3e2;
            padding-left: 1em;
            margin-bottom: 1em;
            line-height: 2em
        }

        details.respec-tests-details>ul {
            width: 100%;
            margin-top: -.3em
        }

        details.respec-tests-details>li {
            padding-left: 1em
        }

        .self-link:hover {
            opacity: 1;
            text-decoration: none;
            background-color: transparent
        }

        aside.example .marker>a.self-link {
            color: inherit
        }

        .header-wrapper {
            display: flex;
            align-items: baseline
        }

        :is(h2, h3, h4, h5, h6):not(#toc>h2, #abstract>h2, #sotd>h2, .head>h2) {
            position: relative;
            left: -.5em
        }

        :is(h2, h3, h4, h5, h6):not(#toch2)+a.self-link {
            color: inherit;
            order: -1;
            position: relative;
            left: -1.1em;
            font-size: 1rem;
            opacity: .5
        }

        :is(h2, h3, h4, h5, h6)+a.self-link::before {
            content: "§";
            text-decoration: none;
            color: var(--heading-text)
        }

        :is(h2, h3)+a.self-link {
            top: -.2em
        }

        :is(h4, h5, h6)+a.self-link::before {
            color: #000
        }

        @media (max-width:767px) {
            dd {
                margin-left: 0
            }
        }

        @media print {
            .removeOnSave {
                display: none
            }
        }
    </style>
    <meta name="color-scheme" content="light">
    <meta name="revision" content="1a30b4bb8781c562aac0f2e33fbdc8e36529f91c">
    <meta name="description"
        content="EditContext is an API that allows authors to more directly participate in the text input process.">
    <link rel="canonical" href="https://www.w3.org/TR/edit-context/">
    <style>
        .hljs {
            --base: #fafafa;
            --mono-1: #383a42;
            --mono-2: #686b77;
            --mono-3: #717277;
            --hue-1: #0b76c5;
            --hue-2: #336ae3;
            --hue-3: #a626a4;
            --hue-4: #42803c;
            --hue-5: #ca4706;
            --hue-5-2: #c91243;
            --hue-6: #986801;
            --hue-6-2: #9a6a01
        }

        @media (prefers-color-scheme:dark) {
            .hljs {
                --base: #282c34;
                --mono-1: #abb2bf;
                --mono-2: #818896;
                --mono-3: #5c6370;
                --hue-1: #56b6c2;
                --hue-2: #61aeee;
                --hue-3: #c678dd;
                --hue-4: #98c379;
                --hue-5: #e06c75;
                --hue-5-2: #be5046;
                --hue-6: #d19a66;
                --hue-6-2: #e6c07b
            }
        }

        .hljs {
            display: block;
            overflow-x: auto;
            padding: .5em;
            color: #383a42;
            color: var(--mono-1, #383a42);
            background: #fafafa;
            background: var(--base, #fafafa)
        }

        .hljs-comment,
        .hljs-quote {
            color: #717277;
            color: var(--mono-3, #717277);
            font-style: italic
        }

        .hljs-doctag,
        .hljs-formula,
        .hljs-keyword {
            color: #a626a4;
            color: var(--hue-3, #a626a4)
        }

        .hljs-deletion,
        .hljs-name,
        .hljs-section,
        .hljs-selector-tag,
        .hljs-subst {
            color: #ca4706;
            color: var(--hue-5, #ca4706);
            font-weight: 700
        }

        .hljs-literal {
            color: #0b76c5;
            color: var(--hue-1, #0b76c5)
        }

        .hljs-addition,
        .hljs-attribute,
        .hljs-meta-string,
        .hljs-regexp,
        .hljs-string {
            color: #42803c;
            color: var(--hue-4, #42803c)
        }

        .hljs-built_in,
        .hljs-class .hljs-title {
            color: #9a6a01;
            color: var(--hue-6-2, #9a6a01)
        }

        .hljs-attr,
        .hljs-number,
        .hljs-selector-attr,
        .hljs-selector-class,
        .hljs-selector-pseudo,
        .hljs-template-variable,
        .hljs-type,
        .hljs-variable {
            color: #986801;
            color: var(--hue-6, #986801)
        }

        .hljs-bullet,
        .hljs-link,
        .hljs-meta,
        .hljs-selector-id,
        .hljs-symbol,
        .hljs-title {
            color: #336ae3;
            color: var(--hue-2, #336ae3)
        }

        .hljs-emphasis {
            font-style: italic
        }

        .hljs-strong {
            font-weight: 700
        }

        .hljs-link {
            text-decoration: underline
        }
    </style>
    <style>
        var:hover {
            text-decoration: underline;
            cursor: pointer
        }

        var.respec-hl {
            color: var(--color, #000);
            background-color: var(--bg-color);
            box-shadow: 0 0 0 2px var(--bg-color)
        }

        @media (prefers-color-scheme:dark) {
            var.respec-hl {
                filter: saturate(.9) brightness(.9)
            }
        }

        var.respec-hl-c1 {
            --bg-color: #f4d200
        }

        var.respec-hl-c2 {
            --bg-color: #ff87a2
        }

        var.respec-hl-c3 {
            --bg-color: #96e885
        }

        var.respec-hl-c4 {
            --bg-color: #3eeed2
        }

        var.respec-hl-c5 {
            --bg-color: #eacfb6
        }

        var.respec-hl-c6 {
            --bg-color: #82ddff
        }

        var.respec-hl-c7 {
            --bg-color: #ffbcf2
        }

        @media print {
            var.respec-hl {
                background: 0 0;
                color: #000;
                box-shadow: unset
            }
        }
    </style>
    <style>
        var {
            position: relative;
            cursor: pointer
        }

        var[data-type]::after,
        var[data-type]::before {
            position: absolute;
            left: 50%;
            top: -6px;
            opacity: 0;
            transition: opacity .4s;
            pointer-events: none
        }

        var[data-type]::before {
            content: "";
            transform: translateX(-50%);
            border-width: 4px 6px 0 6px;
            border-style: solid;
            border-color: transparent;
            border-top-color: #222
        }

        var[data-type]::after {
            content: attr(data-type);
            transform: translateX(-50%) translateY(-100%);
            background: #222;
            text-align: center;
            font-family: "Dank Mono", "Fira Code", monospace;
            font-style: normal;
            padding: 6px;
            border-radius: 3px;
            color: #daca88;
            text-indent: 0;
            font-weight: 400
        }

        var[data-type]:hover::after,
        var[data-type]:hover::before {
            opacity: 1
        }
    </style>
    <script id="initialUserConfig" type="application/json">{
  "github": "w3c/edit-context",
  "specStatus": "WD",
  "shortName": "edit-context",
  "editors": [
    {
      "name": "Dan Clark",
      "mailto": "daniec@microsoft.com",
      "company": "Microsoft",
      "w3cid": 113024,
      "url": "mailto:daniec@microsoft.com"
    }
  ],
  "formerEditors": [
    {
      "name": "Shih-ling Keng",
      "mailto": "shihken@microsoft.com",
      "company": "Microsoft",
      "w3cid": 126951,
      "retiredDate": "2025-11-10",
      "url": "mailto:shihken@microsoft.com"
    },
    {
      "name": "Anupam Snigdha",
      "mailto": "snianu@microsoft.com",
      "company": "Microsoft",
      "w3cid": 126950,
      "retiredDate": "2025-11-10",
      "url": "mailto:snianu@microsoft.com"
    },
    {
      "name": "Bo Cupp",
      "mailto": "pcupp@microsoft.com",
      "company": "Microsoft",
      "w3cid": 126951,
      "retiredDate": "2025-11-10",
      "url": "mailto:pcupp@microsoft.com"
    }
  ],
  "wgPublicList": "public-editing-tf",
  "otherLinks": [
    {
      "key": "Participate",
      "data": [
        {
          "value": "We are on GitHub.",
          "href": "https://github.com/w3c/edit-context"
        },
        {
          "value": "File a bug.",
          "href": "https://github.com/w3c/edit-context/issues"
        },
        {
          "value": "Commit history.",
          "href": "https://github.com/w3c/edit-context/commits/gh-pages"
        },
        {
          "value": "Mailing list.",
          "href": "http://lists.w3.org/Archives/Public/public-editing-tf/"
        }
      ]
    }
  ],
  "group": "webediting",
  "edDraftURI": "https://w3c.github.io/edit-context/",
  "xref": [
    "WebIDL",
    "DOM",
    "HTML",
    "geometry-1",
    "uievents",
    "infra",
    "input-events"
  ],
  "gitRevision": "1a30b4bb8781c562aac0f2e33fbdc8e36529f91c",
  "publishDate": "2025-11-12",
  "previousMaturity": "WD",
  "previousPublishDate": "2025-09-09",
  "publishISODate": "2025-11-12T00:00:00.000Z",
  "generatedSubtitle": "W3C Working Draft 12 November 2025"
}</script>
    <link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2021/W3C-WD">
</head>

<body class="h-entry" data-cite="WEBIDL WebIDL DOM HTML geometry-1 uievents infra input-events">
    <div class="head">
        <p class="logos"><a class="logo" href="https://www.w3.org/"><img crossorigin="" alt="W3C" height="48"
                    src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72">
            </a></p>
        <h1 id="title" class="title">EditContext API</h1>
        <p id="w3c-state"><a href="https://www.w3.org/standards/types#WD">W3C Working Draft</a> <time
                class="dt-published" datetime="2025-11-12">12 November 2025</time></p>
        <details open="">
            <summary>More details about this document</summary>
            <dl>
                <dt>This version:</dt>
                <dd>
                    <a class="u-url"
                        href="https://www.w3.org/TR/2025/WD-edit-context-20251112/">https://www.w3.org/TR/2025/WD-edit-context-20251112/</a>
                </dd>
                <dt>Latest published version:</dt>
                <dd>
                    <a href="https://www.w3.org/TR/edit-context/">https://www.w3.org/TR/edit-context/</a>
                </dd>
                <dt>Latest editor's draft:</dt>
                <dd><a href="https://w3c.github.io/edit-context/">https://w3c.github.io/edit-context/</a></dd>
                <dt>History:</dt>
                <dd>
                    <a
                        href="https://www.w3.org/standards/history/edit-context/">https://www.w3.org/standards/history/edit-context/</a>
                </dd>
                <dd>
                    <a href="https://github.com/w3c/edit-context/commits/">Commit history</a>
                </dd>





                <dt>Editor:</dt>
                <dd class="editor p-author h-card vcard" data-editor-id="113024">
                    <a class="ed_mailto u-email email p-name" href="mailto:daniec@microsoft.com">Dan Clark</a> (<span
                        class="p-org org h-org">Microsoft</span>)
                </dd>
                <dt>
                    Former editors:
                </dt>
                <dd class="editor p-author h-card vcard" data-editor-id="126951">
                    <a class="ed_mailto u-email email p-name" href="mailto:shihken@microsoft.com">Shih-ling Keng</a>
                    (<span class="p-org org h-org">Microsoft</span>) - Until <time datetime="2025-11-10">10 November
                        2025</time>
                </dd>
                <dd class="editor p-author h-card vcard" data-editor-id="126950">
                    <a class="ed_mailto u-email email p-name" href="mailto:snianu@microsoft.com">Anupam Snigdha</a>
                    (<span class="p-org org h-org">Microsoft</span>) - Until <time datetime="2025-11-10">10 November
                        2025</time>
                </dd>
                <dd class="editor p-author h-card vcard" data-editor-id="126951">
                    <a class="ed_mailto u-email email p-name" href="mailto:pcupp@microsoft.com">Bo Cupp</a> (<span
                        class="p-org org h-org">Microsoft</span>) - Until <time datetime="2025-11-10">10 November
                        2025</time>
                </dd>

                <dt>Feedback:</dt>
                <dd>
                    <a href="https://github.com/w3c/edit-context/">GitHub w3c/edit-context</a>
                    (<a href="https://github.com/w3c/edit-context/pulls/">pull requests</a>,
                    <a href="https://github.com/w3c/edit-context/issues/new/choose">new issue</a>,
                    <a href="https://github.com/w3c/edit-context/issues/">open issues</a>)
                </dd>
                <dd><a
                        href="mailto:public-editing-tf@w3.org?subject=%5Bedit-context%5D%20YOUR%20TOPIC%20HERE">public-editing-tf@w3.org</a>
                    with subject line <kbd>[edit-context] <em>… message topic …</em></kbd> (<a rel="discussion"
                        href="https://lists.w3.org/Archives/Public/public-editing-tf">archives</a>)</dd>

                <dt>Participate</dt>
                <dd>
                    <a href="https://github.com/w3c/edit-context">We are on GitHub.</a>
                </dd>
                <dd>
                    <a href="https://github.com/w3c/edit-context/issues">File a bug.</a>
                </dd>
                <dd>
                    <a href="https://github.com/w3c/edit-context/commits/gh-pages">Commit history.</a>
                </dd>
                <dd>
                    <a href="http://lists.w3.org/Archives/Public/public-editing-tf/">Mailing list.</a>
                </dd>
            </dl>
        </details>


        <p class="copyright">
            <a href="https://www.w3.org/policies/#copyright">Copyright</a>
            ©
            2025

            <a href="https://www.w3.org/">World Wide Web Consortium</a>.
            <abbr title="World Wide Web Consortium">W3C</abbr><sup>®</sup>
            <a href="https://www.w3.org/policies/#Legal_Disclaimer">liability</a>,
            <a href="https://www.w3.org/policies/#W3C_Trademarks">trademark</a> and
            <a rel="license" href="https://www.w3.org/copyright/software-license-2023/"
                title="W3C Software and Document Notice and License">permissive document license</a> rules apply.
        </p>
        <hr title="Separator for header">
    </div>
    <section id="abstract" class="introductory">
        <h2>Abstract</h2>
        <p><a data-link-type="idl" data-lt="EditContext" href="#dom-editcontext" class="internalDFN"
                id="ref-for-dom-editcontext-1"><code>EditContext</code></a> is an API that allows authors to more
            directly participate in the text input process.</p>
    </section>
    <section id="sotd" class="introductory">
        <h2>Status of This Document</h2>
        <p><em>This section describes the status of this
                document at the time of its publication. A list of current <abbr
                    title="World Wide Web Consortium">W3C</abbr>
                publications and the latest revision of this technical report can be found
                in the
                <a href="https://www.w3.org/TR/"><abbr title="World Wide Web Consortium">W3C</abbr> standards and drafts
                    index</a>.</em></p>
        <p>
            This document was published by the <a href="https://www.w3.org/groups/wg/webediting">Web Editing Working
                Group</a> as
            a Working Draft using the
            <a href="https://www.w3.org/policies/process/20250818/#recs-and-notes">Recommendation track</a>.
        </p>
        <p>Publication as a Working Draft does not
            imply endorsement by <abbr title="World Wide Web Consortium">W3C</abbr> and its Members. </p>
        <p>
            This is a draft document and may be updated, replaced, or obsoleted by other
            documents at any time. It is inappropriate to cite this document as other
            than a work in progress.

        </p>
        <p>

            This document was produced by a group
            operating under the
            <a href="https://www.w3.org/policies/patent-policy/"><abbr title="World Wide Web Consortium">W3C</abbr>
                Patent
                Policy</a>.


            <abbr title="World Wide Web Consortium">W3C</abbr> maintains a
            <a rel="disclosure" href="https://www.w3.org/groups/wg/webediting/ipr">public list of any patent
                disclosures</a>
            made in connection with the deliverables of
            the group; that page also includes
            instructions for disclosing a patent. An individual who has actual
            knowledge of a patent that the individual believes contains
            <a href="https://www.w3.org/policies/patent-policy/#def-essential">Essential Claim(s)</a>
            must disclose the information in accordance with
            <a href="https://www.w3.org/policies/patent-policy/#sec-Disclosure">section 6 of the <abbr
                    title="World Wide Web Consortium">W3C</abbr> Patent Policy</a>.

        </p>
        <p>
            This document is governed by the
            <a id="w3c_process_revision" href="https://www.w3.org/policies/process/20250818/">18 August 2025 <abbr
                    title="World Wide Web Consortium">W3C</abbr> Process Document</a>.
        </p>
    </section>
    <nav id="toc">
        <h2 class="introductory" id="table-of-contents">Table of Contents</h2>
        <ol class="toc">
            <li class="tocline"><a class="tocxref" href="#abstract">Abstract</a></li>
            <li class="tocline"><a class="tocxref" href="#sotd">Status of This Document</a></li>
            <li class="tocline"><a class="tocxref" href="#introduction"><bdi class="secno">1. </bdi>Introduction</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#background"><bdi class="secno">1.1 </bdi>Background
                            and Motivation</a></li>
                    <li class="tocline"><a class="tocxref" href="#editcontext-model"><bdi class="secno">1.2 </bdi>The
                            EditContext Model</a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#editcontext-state"><bdi class="secno">1.2.1
                                    </bdi>EditContext state</a></li>
                            <li class="tocline"><a class="tocxref" href="#association-and-activation"><bdi
                                        class="secno">1.2.2 </bdi>Association and activation</a></li>
                            <li class="tocline"><a class="tocxref" href="#edit-context-differences"><bdi
                                        class="secno">1.2.3 </bdi>Differences for an EditContext editing host</a></li>
                            <li class="tocline"><a class="tocxref" href="#editcontext-events"><bdi class="secno">1.2.4
                                    </bdi>EditContext events</a></li>
                            <li class="tocline"><a class="tocxref" href="#event-loop-changes"><bdi class="secno">1.2.5
                                    </bdi>Event loop changes</a></li>
                            <li class="tocline"><a class="tocxref" href="#examples"><bdi class="secno">1.2.6
                                    </bdi>Examples</a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#interactions"><bdi class="secno">1.3
                            </bdi>Interactions with Other Editing Primitives </a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#conformance"><bdi class="secno">2. </bdi>Conformance</a></li>
            <li class="tocline"><a class="tocxref" href="#editcontext-api"><bdi class="secno">3. </bdi>EditContext
                    API</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#extensions-to-the-htmlelement-interface"><bdi
                                class="secno">3.1 </bdi>Extensions to the HTMLElement interface</a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#handle-input-for-editcontext"><bdi
                                        class="secno">3.1.1 </bdi><span class="export" data-export="">Handle input for
                                        EditContext</span></a></li>
                            <li class="tocline"><a class="tocxref" href="#editcontext-handled-inputtype"><bdi
                                        class="secno">3.1.2 </bdi><span>EditContext-handled inputType</span></a></li>
                            <li class="tocline"><a class="tocxref" href="#update-the-editcontext"><bdi
                                        class="secno">3.1.3 </bdi><span>Update the EditContext</span></a></li>
                            <li class="tocline"><a class="tocxref" href="#update-the-text-edit-context"><bdi
                                        class="secno">3.1.4 </bdi><span>Update the Text Edit Context</span></a></li>
                            <li class="tocline"><a class="tocxref" href="#dispatch-text-update-event"><bdi
                                        class="secno">3.1.5 </bdi><span>Dispatch text update event</span></a></li>
                            <li class="tocline"><a class="tocxref" href="#dispatch-text-format-update-event"><bdi
                                        class="secno">3.1.6 </bdi><span>Dispatch text format update event</span></a>
                            </li>
                            <li class="tocline"><a class="tocxref" href="#dispatch-character-bounds-update-event"><bdi
                                        class="secno">3.1.7 </bdi><span>Dispatch character bounds update
                                        event</span></a></li>
                            <li class="tocline"><a class="tocxref" href="#deactivate-an-editcontext"><bdi
                                        class="secno">3.1.8 </bdi><span>Deactivate an EditContext</span></a></li>
                            <li class="tocline"><a class="tocxref" href="#determine-the-active-editcontext"><bdi
                                        class="secno">3.1.9 </bdi><span>Determine the active EditContext</span></a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#editcontext-interface"><bdi class="secno">3.2
                            </bdi>EditContext Interface</a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#editcontext-events-0"><bdi class="secno">4. </bdi>EditContext
                    Events</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#textupdateevent"><bdi class="secno">4.1
                            </bdi>TextUpdateEvent</a></li>
                    <li class="tocline"><a class="tocxref" href="#textformatupdateevent"><bdi class="secno">4.2
                            </bdi>TextFormatUpdateEvent</a></li>
                    <li class="tocline"><a class="tocxref" href="#characterboundsupdateevent"><bdi class="secno">4.3
                            </bdi>CharacterBoundsUpdateEvent</a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#idl-index"><bdi class="secno">A. </bdi>IDL Index</a></li>
            <li class="tocline"><a class="tocxref" href="#contributors"><bdi class="secno">B. </bdi>Contributors</a>
            </li>
            <li class="tocline"><a class="tocxref" href="#references"><bdi class="secno">C. </bdi>References</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#normative-references"><bdi class="secno">C.1
                            </bdi>Normative references</a></li>
                    <li class="tocline"><a class="tocxref" href="#informative-references"><bdi class="secno">C.2
                            </bdi>Informative references</a></li>
                </ol>
            </li>
        </ol>
    </nav>
    <section id="introduction">
        <div class="header-wrapper">
            <h2 id="x1-introduction"><bdi class="secno">1. </bdi>Introduction</h2><a class="self-link"
                href="#introduction" aria-label="Permalink for Section 1."></a>
        </div>

        <section id="background" class="informative">
            <div class="header-wrapper">
                <h3 id="x1-1-background-and-motivation"><bdi class="secno">1.1 </bdi>Background and Motivation</h3><a
                    class="self-link" href="#background" aria-label="Permalink for Section 1.1"></a>
            </div>
            <p><em>This section is non-normative.</em></p>

            <p>Modern operating systems provide mechanisms to produce text in a variety of ways: speech-to-text, virtual
                keyboards, handwriting recognition and many more. When an app wants to consume text input from these
                various sources, it must first provide a view of its currently editable text to the operating system.
                The view of editable text provides a common language that apps (having a variety of different document
                models) and sources of text (having a variety of different input methods) can both understand. Both the
                apps and input sources communicate with one another by expressing their desired changes to the state of
                the common view as an event that the other can handle to facilitate the text input process.</p>
            <p>For the purposes of this document, a producer of text is known as a <dfn
                    data-plurals="text input methods" id="dfn-text-input-method" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">Text Input Method</dfn>. The view provided by an app which wants to consume text
                is called a <dfn data-plurals="text edit contexts" id="dfn-text-edit-context" tabindex="0"
                    aria-haspopup="dialog" data-dfn-type="dfn">Text Edit Context</dfn>. The service provided by the OS
                to facilitate the editing of text in the <a data-link-type="dfn|abstract-op"
                    href="#dfn-text-edit-context" class="internalDFN" id="ref-for-dfn-text-edit-context-1">Text Edit
                    Context</a> by the <a data-link-type="dfn|abstract-op" href="#dfn-text-input-method"
                    class="internalDFN" id="ref-for-dfn-text-input-method-1">Text Input Methods</a> is called a <dfn
                    id="dfn-text-input-service" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">Text Input
                    Service</dfn>.</p>
            <figure id="many-input-methods">
                <img src="images/many-input-methods.jpg" alt="">
                <figcaption><a class="self-link" href="#many-input-methods">Figure <bdi class="figno">1</bdi></a> <span
                        class="fig-title">Many <a data-link-type="dfn|abstract-op" href="#dfn-text-input-method"
                            class="internalDFN" id="ref-for-dfn-text-input-method-2">Text Input Methods</a> using a <a
                            data-link-type="dfn|abstract-op" href="#dfn-text-input-service" class="internalDFN"
                            id="ref-for-dfn-text-input-service-1">Text Input Service</a> to communicate with many apps
                        through their <a data-link-type="dfn|abstract-op" href="#dfn-text-edit-context"
                            class="internalDFN" id="ref-for-dfn-text-edit-context-2">Text Edit Contexts</a>.</span>
                </figcaption>
            </figure>
            <p>Here’s a typical flow for the text input process in more detail:</p>
            <ol>
                <li>A user places focus into an editable region of the app.</li>
                <li>The app produces a <a data-link-type="dfn|abstract-op" href="#dfn-text-edit-context"
                        class="internalDFN" id="ref-for-dfn-text-edit-context-3">Text Edit Context</a> describing its
                    editable region according to the standards set forth by the <a data-link-type="dfn|abstract-op"
                        href="#dfn-text-input-service" class="internalDFN" id="ref-for-dfn-text-input-service-2">Text
                        Input Service</a> and provides that <a data-link-type="dfn|abstract-op"
                        href="#dfn-text-edit-context" class="internalDFN" id="ref-for-dfn-text-edit-context-4">Text Edit
                        Context</a> to the <a data-link-type="dfn|abstract-op" href="#dfn-text-input-service"
                        class="internalDFN" id="ref-for-dfn-text-input-service-3">Text Input Service</a>.</li>
                <li>The <a data-link-type="dfn|abstract-op" href="#dfn-text-input-service" class="internalDFN"
                        id="ref-for-dfn-text-input-service-4">Text Input Service</a> triggers a <a
                        data-link-type="dfn|abstract-op" href="#dfn-text-input-method" class="internalDFN"
                        id="ref-for-dfn-text-input-method-3">Text Input Method</a> to provide some user interface for
                    capturing text input from the user and provides the <a data-link-type="dfn|abstract-op"
                        href="#dfn-text-input-method" class="internalDFN" id="ref-for-dfn-text-input-method-4">Text
                        Input Method</a> the app generated <a data-link-type="dfn|abstract-op"
                        href="#dfn-text-edit-context" class="internalDFN" id="ref-for-dfn-text-edit-context-5">Text Edit
                        Context</a>.</li>
                <li>The <a data-link-type="dfn|abstract-op" href="#dfn-text-input-method" class="internalDFN"
                        id="ref-for-dfn-text-input-method-5">Text Input Method</a> reads the location of selection and
                    nearby text from the <a data-link-type="dfn|abstract-op" href="#dfn-text-edit-context"
                        class="internalDFN" id="ref-for-dfn-text-edit-context-6">Text Edit Context</a> to help tailor
                    its user experience.</li>
                <li>The <a data-link-type="dfn|abstract-op" href="#dfn-text-input-method" class="internalDFN"
                        id="ref-for-dfn-text-input-method-6">Text Input Method</a> may also read screen coordinates for
                    where the selection and editable region are located so that it can properly position its user
                    interface next to the text being edited.</li>
                <li>The user interacts with the <a data-link-type="dfn|abstract-op" href="#dfn-text-input-method"
                        class="internalDFN" id="ref-for-dfn-text-input-method-7">Text Input Method</a> user interface to
                    input text in some <a data-link-type="dfn|abstract-op" href="#dfn-text-input-method"
                        class="internalDFN" id="ref-for-dfn-text-input-method-8">Text Input Method</a>-specific way.
                </li>
                <li>The <a data-link-type="dfn|abstract-op" href="#dfn-text-input-method" class="internalDFN"
                        id="ref-for-dfn-text-input-method-9">Text Input Method</a> describes its desired modifications
                    to the text and selection in the <a data-link-type="dfn|abstract-op" href="#dfn-text-edit-context"
                        class="internalDFN" id="ref-for-dfn-text-edit-context-7">Text Edit Context</a> in response to
                    the user’s input.</li>
                <li>The app handles an event describing the desired modifications to its <a
                        data-link-type="dfn|abstract-op" href="#dfn-text-edit-context" class="internalDFN"
                        id="ref-for-dfn-text-edit-context-8">Text Edit Context</a> and renders the result to the user.
                </li>
            </ol>
            <figure id="text-input-process">
                <img src="images/text-input-process.jpg" alt="">
                <figcaption><a class="self-link" href="#text-input-process">Figure <bdi class="figno">2</bdi></a> <span
                        class="fig-title">A sequence diagram illustrating a typical flow for text input.</span>
                </figcaption>
            </figure>
            <p>Existing user agents handle the details of this text input process so that the author’s responsibility
                ends at declaring what elements of the document represent an editable region. Authors express which
                regions are editable using input elements, textarea elements, contenteditable elements, or by setting
                the <a data-link-type="attribute"
                    href="https://html.spec.whatwg.org/multipage/interaction.html#designMode"><code>designMode</code></a>
                attribute to "<code>on</code>" to mark an entire document as editable. </p>
            <p>As an editable region of the document is <a
                    href="https://html.spec.whatwg.org/multipage/interaction.html#focused">focused</a>, the user agent
                automatically produces the <a data-link-type="dfn|abstract-op" href="#dfn-text-edit-context"
                    class="internalDFN" id="ref-for-dfn-text-edit-context-9">Text Edit Context</a> from the contents of
                the editable region and the position of the selection within it. When a <a
                    data-link-type="dfn|abstract-op" href="#dfn-text-input-method" class="internalDFN"
                    id="ref-for-dfn-text-input-method-10">Text Input Method</a> produces text, the user agent translates
                the events against its <a data-link-type="dfn|abstract-op" href="#dfn-text-edit-context"
                    class="internalDFN" id="ref-for-dfn-text-edit-context-10">Text Edit Context</a> into a set of DOM
                and style modifications – only some of which are described using existing events that an author can
                handle. </p>
            <p>Authors that want to produce sophisticated editing experiences may be challenged by the current approach.
                If, for example, the text and selection are rendered to a canvas, user agents are unable to produce a <a
                    data-link-type="dfn|abstract-op" href="#dfn-text-edit-context" class="internalDFN"
                    id="ref-for-dfn-text-edit-context-11">Text Edit Context</a> to drive the text input process. Authors
                compensate by resorting to offscreen editable elements, but this approach comes with negative
                implications for accessibility, it deteriorates the input experience, and requires complex code to
                synchronize the position of the text in the offscreen editable element with the corresponding text in
                the canvas. </p>
            <p>With the introduction of this EditContext API, authors can more directly participate in the protocol for
                text input and avoid the pitfalls described above.</p>
        </section>
        <section id="editcontext-model">
            <div class="header-wrapper">
                <h3 id="x1-2-the-editcontext-model"><bdi class="secno">1.2 </bdi>The EditContext Model</h3><a
                    class="self-link" href="#editcontext-model" aria-label="Permalink for Section 1.2"></a>
            </div>

            <p>
                The <a data-link-type="dfn|abstract-op" href="#dfn-text-input-service" class="internalDFN"
                    id="ref-for-dfn-text-input-service-5">Text Input Service</a> and <a data-link-type="dfn|abstract-op"
                    href="#dfn-text-edit-context" class="internalDFN" id="ref-for-dfn-text-edit-context-12">Text Edit
                    Context</a> are abstractions representing the common aspects of text input across many operating
                systems.
                An <a data-link-type="idl" data-lt="EditContext" href="#dom-editcontext" class="internalDFN"
                    id="ref-for-dom-editcontext-2"><code>EditContext</code></a> is a JavaScript reflection of the <a
                    data-link-type="dfn|abstract-op" href="#dfn-text-edit-context" class="internalDFN"
                    id="ref-for-dfn-text-edit-context-13">Text Edit Context</a>.
                When changes are made to the <a data-link-type="dfn|abstract-op" href="#dfn-text-edit-context"
                    class="internalDFN" id="ref-for-dfn-text-edit-context-14">Text Edit Context</a> by the <a
                    data-link-type="dfn|abstract-op" href="#dfn-text-input-service" class="internalDFN"
                    id="ref-for-dfn-text-input-service-6">Text Input Service</a>, those changes are reflected to the
                author asynchronously in the form of events which are dispatched against the <a
                    data-link-type="dfn|abstract-op" href="#dfn-active-editcontext" class="internalDFN"
                    id="ref-for-dfn-active-editcontext-1">active EditContext</a>.
                When the author makes changes to the <a data-link-type="dfn|abstract-op" href="#dfn-active-editcontext"
                    class="internalDFN" id="ref-for-dfn-active-editcontext-2">active EditContext</a>, those changes will
                be reflected in the <a data-link-type="dfn|abstract-op" href="#dfn-text-edit-context"
                    class="internalDFN" id="ref-for-dfn-text-edit-context-15">Text Edit Context</a> during the next
                lifecycle update.
            </p>
            <section id="editcontext-state">
                <div class="header-wrapper">
                    <h4 id="x1-2-1-editcontext-state"><bdi class="secno">1.2.1 </bdi>EditContext state</h4><a
                        class="self-link" href="#editcontext-state" aria-label="Permalink for Section 1.2.1"></a>
                </div>
                <p>
                    Both the <a data-link-type="dfn|abstract-op" href="#dfn-text-edit-context" class="internalDFN"
                        id="ref-for-dfn-text-edit-context-16">Text Edit Context</a> and <a data-link-type="idl"
                        data-lt="EditContext" href="#dom-editcontext" class="internalDFN"
                        id="ref-for-dom-editcontext-3"><code>EditContext</code></a> have a <a
                        data-link-type="dfn|abstract-op" href="#dfn-text-state" class="internalDFN"
                        id="ref-for-dfn-text-state-1">text state</a> which holds the information exchanged in the
                    aforementioned updates. The <dfn id="dfn-text-state" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">text state</dfn> consists of:
                </p>
                <ul>
                    <li><dfn id="dfn-text" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">text</dfn> which is a
                        <a data-link-type="interface" data-lt="DOMString"
                            href="https://webidl.spec.whatwg.org/#idl-DOMString"><code>DOMString</code></a> representing
                        editable content. The initial value is the empty string.
                    </li>
                    <li><dfn id="dfn-selection-start" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">selection
                            start</dfn> which refers to the offset in <a data-link-type="dfn|abstract-op"
                            href="#dfn-text" class="internalDFN" id="ref-for-dfn-text-1">text</a> where the selection
                        starts. The initial value is 0.</li>
                    <li><dfn id="dfn-selection-end" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">selection
                            end</dfn> which refers to the offset in <a data-link-type="dfn|abstract-op" href="#dfn-text"
                            class="internalDFN" id="ref-for-dfn-text-2">text</a> where the selection ends. The initial
                        value is 0. <a data-link-type="dfn|abstract-op" href="#dfn-selection-end" class="internalDFN"
                            id="ref-for-dfn-selection-end-1">selection end</a> may be less than <a
                            data-link-type="dfn|abstract-op" href="#dfn-selection-start" class="internalDFN"
                            id="ref-for-dfn-selection-start-1">selection start</a> in the case of a "backwards"
                        selection (in reverse of document order).</li>
                    <li><dfn id="dfn-is-composing" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">is
                            composing</dfn> which indicates if there is an active composition. The initial value is
                        false.</li>
                    <li><dfn id="dfn-composition-start" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">composition start</dfn> which refers to the offset in <a
                            data-link-type="dfn|abstract-op" href="#dfn-text" class="internalDFN"
                            id="ref-for-dfn-text-3">text</a> representing the start position of the text being actively
                        composed. The initial value is 0.</li>
                    <li><dfn id="dfn-composition-end" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">composition end</dfn> which refers to the offset in <a
                            data-link-type="dfn|abstract-op" href="#dfn-text" class="internalDFN"
                            id="ref-for-dfn-text-4">text</a> representing the end position of the text being actively
                        composed. The initial value is 0. <a data-link-type="dfn|abstract-op"
                            href="#dfn-composition-end" class="internalDFN"
                            id="ref-for-dfn-composition-end-1">composition end</a> must always be greater than or equal
                        to <a data-link-type="dfn|abstract-op" href="#dfn-composition-start" class="internalDFN"
                            id="ref-for-dfn-composition-start-1">composition start</a>.</li>
                    <li><dfn id="dfn-text-formats" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">text
                            formats</dfn> which is an array of <a data-link-type="dfn|abstract-op"
                            href="#dfn-text-format" class="internalDFN" id="ref-for-dfn-text-format-1">text format</a>.
                        The array is initially empty.</li>
                    <li><dfn id="dfn-control-bounds" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">control
                            bounds</dfn> is a <a data-link-type="interface" data-lt="DOMRect"
                            href="https://www.w3.org/TR/geometry-1/#domrect"><code>DOMRect</code></a> describing the
                        area of the viewport in which <a data-link-type="dfn|abstract-op" href="#dfn-text"
                            class="internalDFN" id="ref-for-dfn-text-5">text</a> is displayed. It is in the <a
                            data-link-type="dfn|abstract-op" href="#dfn-client-coordinate-system" class="internalDFN"
                            id="ref-for-dfn-client-coordinate-system-1">client coordinate system</a> and the initial x,
                        y, width, and height are all 0.</li>
                    <li><dfn id="dfn-selection-bounds" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">selection
                            bounds</dfn> is a <a data-link-type="interface" data-lt="DOMRect"
                            href="https://www.w3.org/TR/geometry-1/#domrect"><code>DOMRect</code></a> describing the
                        position of selection. It is in the <a data-link-type="dfn|abstract-op"
                            href="#dfn-client-coordinate-system" class="internalDFN"
                            id="ref-for-dfn-client-coordinate-system-2">client coordinate system</a> and the initial x,
                        y, width, and height are all 0.</li>
                    <li><dfn id="dfn-codepoint-rects-start-index" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">codepoint rects start index</dfn> which is an offset into <a
                            data-link-type="dfn|abstract-op" href="#dfn-text" class="internalDFN"
                            id="ref-for-dfn-text-6">text</a> that respresents the position before the first codepoint
                        whose location is reported by the first member of <a data-link-type="dfn|abstract-op"
                            href="#dfn-codepoint-rects" class="internalDFN" id="ref-for-dfn-codepoint-rects-1">codepoint
                            rects</a> array.</li>
                    <li><dfn id="dfn-codepoint-rects" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">codepoint
                            rects</dfn> is an array of <a data-link-type="interface" data-lt="DOMRect"
                            href="https://www.w3.org/TR/geometry-1/#domrect"><code>DOMRect</code></a> defining the
                        bounding box of each codepoint. The array is initially empty.</li>
                </ul>
                <p><dfn id="dfn-text-format" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">text format</dfn>
                    is a struct that indicates decorative properties that should be applied to the ranges of <a
                        data-link-type="dfn|abstract-op" href="#dfn-text" class="internalDFN"
                        id="ref-for-dfn-text-7">text</a>. The struct contains:</p>
                <ul>
                    <li><dfn id="dfn-range-start" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">range
                            start</dfn> which is an offset into <a data-link-type="dfn|abstract-op" href="#dfn-text"
                            class="internalDFN" id="ref-for-dfn-text-8">text</a> that respresents the position before
                        the first codepoint that should be decorated.</li>
                    <li><dfn id="dfn-range-end" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">range end</dfn>
                        which is an offset into <a data-link-type="dfn|abstract-op" href="#dfn-text" class="internalDFN"
                            id="ref-for-dfn-text-9">text</a> that respresents the position after the last codepoint that
                        should be decorated.</li>
                    <li><dfn id="dfn-underline-style" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">underline
                            style</dfn>, a <a data-link-type="idl" data-lt="UnderlineStyle" href="#dom-underlinestyle"
                            class="internalDFN" id="ref-for-dom-underlinestyle-1"><code>UnderlineStyle</code></a> which
                        is the preferred underline style of the decorated <a data-link-type="dfn|abstract-op"
                            href="#dfn-text" class="internalDFN" id="ref-for-dfn-text-10">text</a> range.</li>
                    <li><dfn id="dfn-underline-thickness" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">underline thickness</dfn>, a <a data-link-type="idl"
                            data-lt="UnderlineThickness" href="#dom-underlinethickness" class="internalDFN"
                            id="ref-for-dom-underlinethickness-1"><code>UnderlineThickness</code></a> which is the
                        preferred underline thickness of the decorated <a data-link-type="dfn|abstract-op"
                            href="#dfn-text" class="internalDFN" id="ref-for-dfn-text-11">text</a> range.</li>
                </ul>
                <div class="note" role="note" id="issue-container-generatedID">
                    <div role="heading" class="note-title marker" id="h-note" aria-level="4"><span>Note</span></div>
                    <p class="">
                        <a data-link-type="dfn|abstract-op" href="#dfn-codepoint-rects" class="internalDFN"
                            id="ref-for-dfn-codepoint-rects-2">Codepoint rects</a> provides the means for the user agent
                        to query a range of
                        <a data-link-type="dfn|abstract-op" href="#dfn-text" class="internalDFN"
                            id="ref-for-dfn-text-12">text</a> for positioning information. The <a
                            data-link-type="dfn|abstract-op" href="#dfn-text-input-service" class="internalDFN"
                            id="ref-for-dfn-text-input-service-7">Text Input Service</a> will use this
                        information, in tandem with the <a data-link-type="dfn|abstract-op" href="#dfn-control-bounds"
                            class="internalDFN" id="ref-for-dfn-control-bounds-1">control bounds</a> and <a
                            data-link-type="dfn|abstract-op" href="#dfn-selection-bounds" class="internalDFN"
                            id="ref-for-dfn-selection-bounds-1">selection bounds</a>, to
                        support the Text Input Method in properly displaying its user interface. For example,
                        the info can be used to position an IME window adjacent to text being composed.
                        Different platforms may require different positions to be cached to fulfill queries
                        from the <a data-link-type="dfn|abstract-op" href="#dfn-text-input-service" class="internalDFN"
                            id="ref-for-dfn-text-input-service-8">Text Input Service</a>. The user agent will indicate
                        which positions are
                        required by firing <a data-link-type="idl" data-lt="CharacterBoundsUpdateEvent"
                            href="#dom-characterboundsupdateevent" class="internalDFN"
                            id="ref-for-dom-characterboundsupdateevent-1"><code>CharacterBoundsUpdateEvent</code></a>.
                    </p>
                </div>
                <p>
                    <a data-link-type="dfn|abstract-op" href="#dfn-control-bounds" class="internalDFN"
                        id="ref-for-dfn-control-bounds-2">Control bounds</a>, <a data-link-type="dfn|abstract-op"
                        href="#dfn-selection-bounds" class="internalDFN" id="ref-for-dfn-selection-bounds-2">selection
                        bounds</a>, and <a data-link-type="dfn|abstract-op" href="#dfn-codepoint-rects"
                        class="internalDFN" id="ref-for-dfn-codepoint-rects-3">codepoint rects</a> are given in the
                    <dfn id="dfn-client-coordinate-system" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">client coordinate system</dfn>, which is defined as a two-dimensional
                    Cartesian
                    coordinate system (x, y) where the origin is the top-left corner of the
                    <a href="https://drafts.csswg.org/cssom-view/#layout-viewport">layout viewport</a>,
                    the x-axis points towards the top-right of the
                    <a href="https://drafts.csswg.org/cssom-view/#layout-viewport">layout viewport</a>,
                    and the y-axis points towards the bottom-left of the
                    <a href="https://drafts.csswg.org/cssom-view/#layout-viewport">layout viewport</a>.
                    The units of the client coordinate system are
                    <a href="https://drafts.csswg.org/css-values/#px">CSS pixels</a>.
                </p>
                <div class="note" role="note" id="issue-container-generatedID-0">
                    <div role="heading" class="note-title marker" id="h-note-0" aria-level="4"><span>Note</span></div>
                    <div class="">
                        <p>
                            Since EditContext bounds are defined in
                            <a data-lt="client coordinate system" href="#dfn-client-coordinate-system"
                                class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-client-coordinate-system-3">client coordinates</a>, the coordinates
                            indicating a given piece of content on a page will change as the user scrolls the
                            document even if the content itself does not change position in the document. A
                            scenario where authors may want to take this into account is the case where the user
                            scrolls the page where the user has an active composition. If the author does not
                            update the EditContext's bounds information (e.g. during a scroll event listener),
                            the IME window may no longer line up with the text being composed for the duration
                            of the composition.
                        </p>
                        <p>
                            However, some platforms do not adjust IME windows during an active composition,
                            so updating bounds information mid-composition does not guarantee that the IME
                            window will be repositioned until it's closed and reopened.
                        </p>
                    </div>
                </div>
            </section>
            <section id="association-and-activation">
                <div class="header-wrapper">
                    <h4 id="x1-2-2-association-and-activation"><bdi class="secno">1.2.2 </bdi>Association and activation
                    </h4><a class="self-link" href="#association-and-activation"
                        aria-label="Permalink for Section 1.2.2"></a>
                </div>
                <p>
                    An <a data-link-type="idl" data-lt="EditContext" href="#dom-editcontext" class="internalDFN"
                        id="ref-for-dom-editcontext-4"><code>EditContext</code></a> has an <dfn data-for="edit-context"
                        data-plurals="associated elements" id="dfn-associated-element" tabindex="0"
                        aria-haspopup="dialog" data-dfn-type="dfn">associated element</dfn>, an <a
                        data-link-type="interface" data-lt="HTMLElement"
                        href="https://html.spec.whatwg.org/multipage/dom.html#htmlelement"><code>HTMLElement</code></a>.
                    An element becomes an <a data-link-type="idl" data-lt="EditContext" href="#dom-editcontext"
                        class="internalDFN" id="ref-for-dom-editcontext-5"><code>EditContext</code></a>'s <a
                        href="#dfn-associated-element" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-associated-element-1">associated element </a>by assigning
                    the <a data-link-type="idl" data-lt="EditContext" href="#dom-editcontext" class="internalDFN"
                        id="ref-for-dom-editcontext-6"><code>EditContext</code></a> to the element's <a
                        data-link-type="idl" href="#dom-htmlelement-editcontext" class="internalDFN"
                        id="ref-for-dom-htmlelement-editcontext-1"><code>editContext</code></a> property.
                    An <a data-link-type="interface" data-lt="HTMLElement"
                        href="https://html.spec.whatwg.org/multipage/dom.html#htmlelement"><code>HTMLElement</code></a>
                    can be <a data-lt="associated element" href="#dfn-associated-element" class="internalDFN"
                        data-link-type="dfn" id="ref-for-dfn-associated-element-2">associated</a> with at most one <a
                        data-link-type="idl" data-lt="EditContext" href="#dom-editcontext" class="internalDFN"
                        id="ref-for-dom-editcontext-7"><code>EditContext</code></a>.
                </p>
                <div class="note" role="note" id="issue-container-generatedID-1">
                    <div role="heading" class="note-title marker" id="h-note-1" aria-level="4"><span>Note</span></div>
                    <p class="">
                        An <a data-link-type="idl" data-lt="EditContext" href="#dom-editcontext" class="internalDFN"
                            id="ref-for-dom-editcontext-8"><code>EditContext</code></a> keeps its <a
                            data-link-type="dfn|abstract-op" href="#dfn-associated-element" class="internalDFN"
                            id="ref-for-dfn-associated-element-3">associated element</a> alive, so developers
                        should be aware that assigning an <a data-link-type="idl" data-lt="EditContext"
                            href="#dom-editcontext" class="internalDFN"
                            id="ref-for-dom-editcontext-9"><code>EditContext</code></a> to an element's
                        <a data-link-type="idl" href="#dom-htmlelement-editcontext" class="internalDFN"
                            id="ref-for-dom-htmlelement-editcontext-2"><code>editContext</code></a> property will
                        prevent the element from being garbage
                        collected until the property is cleared or the <a data-link-type="idl" data-lt="EditContext"
                            href="#dom-editcontext" class="internalDFN"
                            id="ref-for-dom-editcontext-10"><code>EditContext</code></a> is garbage collected.
                    </p>
                </div>
                <p>
                    If an <a data-link-type="idl" data-lt="EditContext" href="#dom-editcontext" class="internalDFN"
                        id="ref-for-dom-editcontext-11"><code>EditContext</code></a>'s <a href="#dfn-associated-element"
                        class="internalDFN" data-link-type="dfn" id="ref-for-dfn-associated-element-4">associated
                        element</a>'s
                    <a href="https://dom.spec.whatwg.org/#concept-tree-parent">parent</a> is not
                    <a href="https://w3c.github.io/editing/docs/execCommand/#editable">editable</a> and
                    is not a <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document">Document</a>
                    whose <a data-link-type="attribute"
                        href="https://html.spec.whatwg.org/multipage/interaction.html#designMode"><code>designMode</code></a>
                    attribute is "<code>on</code>",
                    then the <a href="#dfn-associated-element" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-associated-element-5">associated element</a> becomes an <dfn class="export"
                        data-export="" id="dfn-editcontext-editing-host" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">EditContext editing host</dfn>.
                    An <a href="#dfn-editcontext-editing-host" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-editcontext-editing-host-1">EditContext editing host</a> is a type of <a
                        data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/interaction.html#editing-host">editing host</a>
                    whose behaviors
                    are described in <a href="#edit-context-differences"
                        data-matched-text="[[[#edit-context-differences]]]" class="sec-ref"><bdi class="secno">1.2.3
                        </bdi>Differences for an EditContext editing host</a>.
                </p>
                <div class="note" role="note" id="issue-container-generatedID-2">
                    <div role="heading" class="note-title marker" id="h-note-2" aria-level="4"><span>Note</span></div>
                    <div class="">
                        <p>
                            There are a couple implications of this. Firstly, if an element that is already
                            an <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/interaction.html#editing-host">editing
                                host</a> due to
                            <code><a data-link-type="element-attr" href="https://html.spec.whatwg.org/multipage/interaction.html#attr-contenteditable">contenteditable</a></code>
                            becomes an <a data-link-type="idl" data-lt="EditContext" href="#dom-editcontext"
                                class="internalDFN" id="ref-for-dom-editcontext-12"><code>EditContext</code></a>'s <a
                                href="#dfn-associated-element" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-associated-element-6">associated element</a>, then that element
                            becomes an <a href="#dfn-editcontext-editing-host" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-editcontext-editing-host-2">EditContext editing host</a>. In other
                            words, if both <a data-link-type="idl" data-lt="EditContext" href="#dom-editcontext"
                                class="internalDFN" id="ref-for-dom-editcontext-13"><code>EditContext</code></a>
                            and
                            <code><a data-link-type="element-attr" href="https://html.spec.whatwg.org/multipage/interaction.html#attr-contenteditable">contenteditable</a></code>
                            are set on an element, the EditContext
                            behavior "wins".
                        </p>
                        <p>
                            Secondly, if an element is
                            <a href="https://w3c.github.io/editing/docs/execCommand/#editable">editable</a>
                            but not an <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/interaction.html#editing-host">editing
                                host</a> (i.e. it is a child in the subtree of an
                            <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/interaction.html#editing-host">editing
                                host</a>), then becoming an <a data-link-type="idl" data-lt="EditContext"
                                href="#dom-editcontext" class="internalDFN"
                                id="ref-for-dom-editcontext-14"><code>EditContext</code></a>'s <a
                                href="#dfn-associated-element" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-associated-element-7">associated element</a>
                            has no effect on that element. This is analogous to the behavior of
                            <code><a data-link-type="element-attr" href="https://html.spec.whatwg.org/multipage/interaction.html#attr-contenteditable">contenteditable</a></code>,
                            where setting
                            <code><a data-link-type="element-attr" href="https://html.spec.whatwg.org/multipage/interaction.html#attr-contenteditable">contenteditable</a></code>
                            to "<code>true</code>" on an
                            <a href="https://w3c.github.io/editing/docs/execCommand/#editable">editable</a>
                            element that is not an <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/interaction.html#editing-host">editing
                                host</a> has no effect. Taken together, these
                            rules imply that an editable tree of nodes will follow either the
                            <a data-link-type="idl" data-lt="EditContext" href="#dom-editcontext" class="internalDFN"
                                id="ref-for-dom-editcontext-15"><code>EditContext</code></a> behavior or non-<a
                                data-link-type="idl" data-lt="EditContext" href="#dom-editcontext" class="internalDFN"
                                id="ref-for-dom-editcontext-16"><code>EditContext</code></a> behavior, but the behaviors
                            cannot be mixed.
                        </p>
                    </div>
                </div>
                <p>
                    A <a data-link-type="interface" data-lt="Document"
                        href="https://dom.spec.whatwg.org/#document"><code>Document</code></a> has an <dfn
                        id="dfn-active-editcontext" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">active
                        EditContext</dfn>, which may be null.
                </p>
                <div class="issue" id="issue-container-number-1">
                    <div role="heading" class="issue-title marker" id="h-issue" aria-level="4"><span>Issue 1</span>
                    </div>
                    <p class="">
                        The following paragraph can be removed once the behavior change lands
                        in [<cite><a class="bibref" data-link-type="biblio" href="#bib-input-events"
                                title="Input Events Level 1">input-events</a></cite>].
                    </p>
                </div>
                <p>
                    When an <a data-link-type="dfn|abstract-op" href="#dfn-editcontext-editing-host" class="internalDFN"
                        id="ref-for-dfn-editcontext-editing-host-3">EditContext editing host</a> receives text input
                    from the
                    <a data-link-type="dfn|abstract-op" href="#dfn-text-input-service" class="internalDFN"
                        id="ref-for-dfn-text-input-service-9">Text Input Service</a>, as the
                    <a href="https://www.w3.org/TR/uievents/#default-action">default action</a> for the
                    <a href="https://www.w3.org/TR/uievents/#event-type-beforeinput">beforeinput</a>
                    event fired as a result of that input the user agent must run
                    <a data-link-type="dfn|abstract-op" href="#dfn-handle-input-for-editcontext" class="internalDFN"
                        id="ref-for-dfn-handle-input-for-editcontext-1">Handle Input for EditContext</a> given the <a
                        data-link-type="dfn|abstract-op" href="#dfn-editcontext-editing-host" class="internalDFN"
                        id="ref-for-dfn-editcontext-editing-host-4">EditContext editing host</a> .
                </p>
            </section>
            <section id="differences-for-an-editcontext-editing-host">
                <div class="header-wrapper">
                    <h4 id="edit-context-differences"><bdi class="secno">1.2.3 </bdi>Differences for an EditContext
                        editing host</h4><a class="self-link" href="#edit-context-differences"
                        aria-label="Permalink for Section 1.2.3"></a>
                </div>
                <div>
                    <p>
                        In many ways, an <a href="#dfn-editcontext-editing-host" class="internalDFN"
                            data-link-type="dfn" id="ref-for-dfn-editcontext-editing-host-5">EditContext editing
                            host</a> behaves in the same way as other types of <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/interaction.html#editing-host">editing
                            host</a>,
                        e.g. for a
                        <code><a data-link-type="element-attr" href="https://html.spec.whatwg.org/multipage/interaction.html#attr-contenteditable">contenteditable</a></code>
                        element. Notable similarities include:
                    </p>
                    <ul>
                        <li>
                            Each child node of the <a href="#dfn-editcontext-editing-host" class="internalDFN"
                                data-link-type="dfn" id="ref-for-dfn-editcontext-editing-host-6">EditContext editing
                                host</a> becomes <a
                                href="https://w3c.github.io/editing/docs/execCommand/#editable">editable</a>,
                            unless that node has a
                            <code><a data-link-type="element-attr" href="https://html.spec.whatwg.org/multipage/interaction.html#attr-contenteditable">contenteditable</a></code>
                            attribute set to "<code>false</code>".
                        </li>
                        <li>The user agent handles focus and caret navigation for any editable element in the <a
                                href="#dfn-editcontext-editing-host" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-editcontext-editing-host-7">EditContext editing host</a> (except when
                            the
                            <a data-link-type="dfn|abstract-op" href="#dfn-associated-element" class="internalDFN"
                                id="ref-for-dfn-associated-element-8">associated element</a> is a <a
                                data-link-type="element"
                                href="https://html.spec.whatwg.org/multipage/canvas.html#canvas">canvas</a>; see below
                            in this section).
                        </li>
                        <li>
                            The <a href="#dfn-editcontext-editing-host" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-editcontext-editing-host-8">EditContext editing host</a> receives key
                            events and the <a
                                href="https://www.w3.org/TR/uievents/#event-type-beforeinput">beforeinput</a>
                            event as specified in [<cite><a class="bibref" data-link-type="biblio" href="#bib-uievents"
                                    title="UI Events">uievents</a></cite>].
                        </li>
                    </ul>

                    <p>
                        There are also some ways that an <a href="#dfn-editcontext-editing-host" class="internalDFN"
                            data-link-type="dfn" id="ref-for-dfn-editcontext-editing-host-9">EditContext editing
                            host</a>
                        differs from other types of <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/interaction.html#editing-host">editing
                            hosts</a>:
                    </p>
                    <ul>
                        <li>
                            When the <a data-link-type="interface" data-lt="Document"
                                href="https://dom.spec.whatwg.org/#document"><code>Document</code></a> being edited has
                            an <a data-link-type="dfn|abstract-op" href="#dfn-active-editcontext" class="internalDFN"
                                id="ref-for-dfn-active-editcontext-3">active EditContext</a>, the user agent must not
                            update the DOM
                            as a direct result of a user action in the <a href="#dfn-editcontext-editing-host"
                                class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-editcontext-editing-host-10">EditContext editing host</a>
                            (e.g., keyboard input in an editable region, deleting or formatting text, ...).
                        </li>
                        <li>
                            When the <a data-link-type="interface" data-lt="Document"
                                href="https://dom.spec.whatwg.org/#document"><code>Document</code></a> being edited has
                            an <a data-link-type="dfn|abstract-op" href="#dfn-active-editcontext" class="internalDFN"
                                id="ref-for-dfn-active-editcontext-4">active EditContext</a>, the user agent must not
                            fire the
                            <a href="https://www.w3.org/TR/uievents/#event-type-input">input</a> event
                            against the <a href="#dfn-editcontext-editing-host" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-editcontext-editing-host-11">EditContext editing host</a> as a direct
                            result of user action
                            event as specified in [<cite><a class="bibref" data-link-type="biblio" href="#bib-uievents"
                                    title="UI Events">uievents</a></cite>].
                        </li>
                        <li>
                            When the <a data-link-type="interface" data-lt="Document"
                                href="https://dom.spec.whatwg.org/#document"><code>Document</code></a> being edited has
                            an <a data-link-type="dfn|abstract-op" href="#dfn-active-editcontext" class="internalDFN"
                                id="ref-for-dfn-active-editcontext-5">active EditContext</a>, the user agent must not
                            fire
                            <a href="https://www.w3.org/TR/uievents/#events-compositionevents">composition events</a>
                            against the
                            <a href="#dfn-editcontext-editing-host" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-editcontext-editing-host-12">EditContext editing host</a> as a direct
                            result of user action. Instead they will be fired against the <a data-link-type="idl"
                                data-lt="EditContext" href="#dom-editcontext" class="internalDFN"
                                id="ref-for-dom-editcontext-17"><code>EditContext</code></a> as part
                            of <a data-link-type="dfn|abstract-op" data-lt="update the EditContext"
                                href="#dfn-update-the-editcontext" class="internalDFN"
                                id="ref-for-dfn-update-the-editcontext-1">updating the EditContext</a> or <a
                                data-link-type="dfn|abstract-op" data-lt="deactivate an EditContext"
                                href="#dfn-deactivate-an-editcontext" class="internalDFN"
                                id="ref-for-dfn-deactivate-an-editcontext-1">deactivating the EditContext</a>.
                        </li>
                        <li>
                            <p>
                                When the <a data-link-type="dfn|abstract-op" href="#dfn-active-editcontext"
                                    class="internalDFN" id="ref-for-dfn-active-editcontext-6">active EditContext</a>'s
                                <a data-link-type="dfn|abstract-op" href="#dfn-associated-element" class="internalDFN"
                                    id="ref-for-dfn-associated-element-9">associated element</a> is a <a
                                    data-link-type="element"
                                    href="https://html.spec.whatwg.org/multipage/canvas.html#canvas">canvas</a>, there
                                are further differences:
                            </p>
                            <ul>
                                <li>
                                    The user agent is unable to handle caret navigation and selection since it doesn't
                                    have information
                                    about how text is laid out in the <a data-link-type="element"
                                        href="https://html.spec.whatwg.org/multipage/canvas.html#canvas">canvas</a>, so
                                    the author has to implement caret navigation and selection.
                                </li>
                                <li>
                                    The user agent is unable to present inline spelling and grammar suggestions since it
                                    doesn't have information
                                    about how the text is laid out in the <a data-link-type="element"
                                        href="https://html.spec.whatwg.org/multipage/canvas.html#canvas">canvas</a>, so
                                    if the author wants to support spelling and grammar suggestions,
                                    they have to implement that themselves.
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>

            </section>
            <section id="editcontext-events">
                <div class="header-wrapper">
                    <h4 id="x1-2-4-editcontext-events"><bdi class="secno">1.2.4 </bdi>EditContext events</h4><a
                        class="self-link" href="#editcontext-events" aria-label="Permalink for Section 1.2.4"></a>
                </div>
                <p>
                    The user agent fires several types of events against the <a data-link-type="idl"
                        data-lt="EditContext" href="#dom-editcontext" class="internalDFN"
                        id="ref-for-dom-editcontext-18"><code>EditContext</code></a> in order to
                    inform the author when they must update the state of the DOM in response to changes
                    from the <a data-link-type="dfn|abstract-op" href="#dfn-text-input-service" class="internalDFN"
                        id="ref-for-dfn-text-input-service-10">Text Input Service</a>, or respond to a query from the <a
                        data-link-type="dfn|abstract-op" href="#dfn-text-input-service" class="internalDFN"
                        id="ref-for-dfn-text-input-service-11">Text Input Service</a>.
                    Since the timings of <a data-link-type="dfn|abstract-op" href="#dfn-text-input-service"
                        class="internalDFN" id="ref-for-dfn-text-input-service-12">Text Input Service</a>s are
                    platform-specific, authors should
                    avoid taking dependencies on the timing of these events.
                </p>
                <ul>
                    <li>
                        The user agent must fire <a data-link-type="idl" data-lt="TextUpdateEvent"
                            href="#dom-textupdateevent" class="internalDFN"
                            id="ref-for-dom-textupdateevent-1"><code>TextUpdateEvent</code></a> when the <a
                            data-link-type="dfn|abstract-op" href="#dfn-text-input-service" class="internalDFN"
                            id="ref-for-dfn-text-input-service-13">Text Input Service</a> indicates
                        that the user has made changes to the text, the selection, or the composition range
                        properties of the EditContext. When the author receives this event, they must render
                        the changes back to the page's view so the user can see what they are typing.
                    </li>
                    <li>
                        <p>
                            The user agent must fire <a data-link-type="idl" data-lt="TextFormatUpdateEvent"
                                href="#dom-textformatupdateevent" class="internalDFN"
                                id="ref-for-dom-textformatupdateevent-1"><code>TextFormatUpdateEvent</code></a> when the
                            <a data-link-type="dfn|abstract-op" href="#dfn-text-input-service" class="internalDFN"
                                id="ref-for-dfn-text-input-service-14">Text Input Service</a>
                            indicates that certain formats should be applied to the text being composed. When
                            the author receives this event, they must render the formatting change back to
                            the page's view to aid the user with their IME composition.
                        </p>
                        <div class="note" role="note" id="issue-container-generatedID-3">
                            <div role="heading" class="note-title marker" id="h-note-3" aria-level="4"><span>Note</span>
                            </div>
                            <p class="">
                                User agents can adjust the <a data-link-type="idl" data-lt="UnderlineStyle"
                                    href="#dom-underlinestyle" class="internalDFN"
                                    id="ref-for-dom-underlinestyle-2"><code>UnderlineStyle</code></a> or <a
                                    data-link-type="idl" data-lt="UnderlineThickness" href="#dom-underlinethickness"
                                    class="internalDFN"
                                    id="ref-for-dom-underlinethickness-2"><code>UnderlineThickness</code></a> before
                                dispatching the <a data-link-type="idl" data-lt="TextFormatUpdateEvent"
                                    href="#dom-textformatupdateevent" class="internalDFN"
                                    id="ref-for-dom-textformatupdateevent-2"><code>TextFormatUpdateEvent</code></a> to
                                mitigate fingerprinting risks. This may
                                be especially relevant when input methods with distinctive styling characteristics
                                are used.
                            </p>
                        </div>
                    </li>
                    <li>
                        <p>
                            The user agent must fire <a data-link-type="idl" data-lt="CharacterBoundsUpdateEvent"
                                href="#dom-characterboundsupdateevent" class="internalDFN"
                                id="ref-for-dom-characterboundsupdateevent-2"><code>CharacterBoundsUpdateEvent</code></a>
                            when the
                            <a data-link-type="dfn|abstract-op" href="#dfn-text-input-service" class="internalDFN"
                                id="ref-for-dfn-text-input-service-15">Text Input Service</a> indicates that it requires
                            character bounds information
                            to support the <a data-link-type="dfn|abstract-op" href="#dfn-text-input-method"
                                class="internalDFN" id="ref-for-dfn-text-input-method-11">Text Input Method</a> in
                            properly displaying its user interface.
                            After receiving <a data-link-type="idl" data-lt="CharacterBoundsUpdateEvent"
                                href="#dom-characterboundsupdateevent" class="internalDFN"
                                id="ref-for-dom-characterboundsupdateevent-3"><code>CharacterBoundsUpdateEvent</code></a>,
                            the author must compute the
                            requested character bounds and call <a data-link-type="idl"
                                href="#dom-editcontext-updatecharacterbounds" class="internalDFN"
                                id="ref-for-dom-editcontext-updatecharacterbounds-1"><code>updateCharacterBounds</code></a>
                            to
                            update the character bounds in the EditContext's <a data-link-type="dfn|abstract-op"
                                href="#dfn-text-state" class="internalDFN" id="ref-for-dfn-text-state-2">text state</a>.
                            The author
                            should perform the <a data-link-type="idl" href="#dom-editcontext-updatecharacterbounds"
                                class="internalDFN"
                                id="ref-for-dom-editcontext-updatecharacterbounds-2"><code>updateCharacterBounds</code></a>
                            call synchronously
                            within the <a data-link-type="idl" data-lt="CharacterBoundsUpdateEvent"
                                href="#dom-characterboundsupdateevent" class="internalDFN"
                                id="ref-for-dom-characterboundsupdateevent-4"><code>CharacterBoundsUpdateEvent</code></a>
                            event handler if possible; if not,
                            it is permissible to call it asynchronously.
                            Upon receiving <a data-link-type="idl" href="#dom-editcontext-updatecharacterbounds"
                                class="internalDFN"
                                id="ref-for-dom-editcontext-updatecharacterbounds-3"><code>updateCharacterBounds</code></a>,
                            the user agent must
                            pass the character bounds information on to the <a data-link-type="dfn|abstract-op"
                                href="#dfn-text-input-service" class="internalDFN"
                                id="ref-for-dfn-text-input-service-16">Text Input Service</a>.
                        </p>
                        <div class="note" role="note" id="issue-container-generatedID-4">
                            <div role="heading" class="note-title marker" id="h-note-4" aria-level="4"><span>Note</span>
                            </div>
                            <p class="">
                                The longer the author delays the <a data-link-type="idl"
                                    href="#dom-editcontext-updatecharacterbounds" class="internalDFN"
                                    id="ref-for-dom-editcontext-updatecharacterbounds-4"><code>updateCharacterBounds</code></a>
                                call,
                                the higher the likelihood that the user will observe a visual stutter as the
                                IME window repositions itself in the middle of a composition.
                            </p>
                        </div>
                    </li>
                </ul>
            </section>
            <section id="event-loop-changes">
                <div class="header-wrapper">
                    <h4 id="x1-2-5-event-loop-changes"><bdi class="secno">1.2.5 </bdi>Event loop changes</h4><a
                        class="self-link" href="#event-loop-changes" aria-label="Permalink for Section 1.2.5"></a>
                </div>
                <p>
                    A new step will be introduced as a substep within the <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#update-the-rendering">Update the
                        rendering</a> step
                    in the HTML Event Loops Processing Model, immediately following step 15 (which runs
                    the focusing steps for <a data-link-type="interface" data-lt="Document"
                        href="https://dom.spec.whatwg.org/#document"><code>Document</code></a>s whose
                    <a href="https://html.spec.whatwg.org/#focused-area-of-the-document">focused area</a>s
                    become non-focusable). The step is: For each
                    <a href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active">fully
                        active</a>
                    <a data-link-type="interface" data-lt="Document"
                        href="https://dom.spec.whatwg.org/#document"><code>Document</code></a> <var>doc</var>, <a
                        data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task">queue a global
                        task</a> on the <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source">DOM
                        manipulation task source</a>
                    given <var>doc</var>'s <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global">relevant
                        global object</a> to run
                    the <a data-link-type="dfn|abstract-op" href="#dfn-update-the-text-edit-context" class="internalDFN"
                        id="ref-for-dfn-update-the-text-edit-context-1">Update the Text Edit Context</a> steps given
                    <var>doc</var>.
                </p>
            </section>
            <section id="examples" class="informative">
                <div class="header-wrapper">
                    <h4 id="x1-2-6-examples"><bdi class="secno">1.2.6 </bdi>Examples</h4><a class="self-link"
                        href="#examples" aria-label="Permalink for Section 1.2.6"></a>
                </div>
                <p><em>This section is non-normative.</em></p>

                <p>Using an <a data-link-type="idl" data-lt="EditContext" href="#dom-editcontext" class="internalDFN"
                        id="ref-for-dom-editcontext-19"><code>EditContext</code></a>, an author can mark a region of the
                    document editable by <a data-lt="associated element" href="#dfn-associated-element"
                        class="internalDFN" data-link-type="dfn" id="ref-for-dfn-associated-element-10">associating</a>
                    an <a data-link-type="idl" data-lt="EditContext" href="#dom-editcontext" class="internalDFN"
                        id="ref-for-dom-editcontext-20"><code>EditContext</code></a> object with an element as shown in
                    the example below: </p>
                <aside class="example" id="example-associate-an-editcontext-with-an-element">
                    <div class="marker">
                        <a class="self-link" href="#example-associate-an-editcontext-with-an-element">Example<bdi>
                                1</bdi></a><span class="example-title">: Associate an EditContext with an Element</span>
                    </div>
                    <pre
                        aria-busy="false"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"module"</span>&gt;</span><span class="language-javascript">
    <span class="hljs-keyword">let</span> canvas = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">"canvas"</span>)
    canvas.<span class="hljs-property">editContext</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EditContext</span>()
    <span class="hljs-comment">// When the associated element is focused, the EditContext is automatically activated.</span>
    canvas.<span class="hljs-title function_">focus</span>();
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">canvas</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span></code></pre>
                </aside>

                <p>In the example below, the author is using a canvas to draw an editable region that allows the user to
                    input a single line of text rendered with a monospace font. The text for the editable region is
                    maintained by the author as a String. The text offsets for the selection in the editable region are
                    maintained by the author as a pair of Numbers: selectionStart and selectionEnd. The Numbers refer to
                    the count of the number of UTF-16 codepoints to the left of the start and end of the selection
                    respectively. For the sake of communicating the bounding boxes for the current selection and the
                    editable region of the document to Text Input Services, the author also computes the bounding
                    rectangle in CSS pixels for the selection and the editable region of the document. The offset of the
                    rectangle is expressed relative to the origin of the canvas element since that is the element to
                    which the author has <a data-lt="associated element" href="#dfn-associated-element"
                        class="internalDFN" data-link-type="dfn" id="ref-for-dfn-associated-element-11">associated</a>
                    an EditContext. Since the model for the author’s representation of text and selection location
                    matches the form expected by the EditContext API, the author can simply assign those properties to
                    the EditContext <a data-lt="associated element" href="#dfn-associated-element" class="internalDFN"
                        data-link-type="dfn" id="ref-for-dfn-associated-element-12">associated</a> with the canvas
                    whenever those values change. </p>

                <aside class="example" id="example-using-editcontext-with-editing-model-view-and-controller">
                    <div class="marker">
                        <a class="self-link"
                            href="#example-using-editcontext-with-editing-model-view-and-controller">Example<bdi>
                                2</bdi></a><span class="example-title">: Using EditContext with editing model, view, and
                            controller</span>
                    </div>
                    <pre
                        aria-busy="false"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"module"</span>&gt;</span><span class="language-javascript">
    <span class="hljs-comment">// This example is built on top of example 1.</span>
    <span class="hljs-comment">// Only the added logic is shown here for brevity.</span>
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">EditingModel</span> {
        <span class="hljs-title function_">constructor</span>(<span class="hljs-params">text, selectionStart, selectionEnd</span>) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">text</span> = text  
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">selectionStart</span> = selectionStart
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">selectionEnd</span> = selectionEnd
        }  
    }  

    <span class="hljs-keyword">class</span> <span class="hljs-title class_">EditingView</span> {  
        <span class="hljs-title function_">constructor</span>(<span class="hljs-params">canvas, model</span>) {  
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">canvas</span> = canvas 
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">model</span> = model 
        } 

        <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) {
            <span class="hljs-comment">// render the text</span>
            <span class="hljs-keyword">let</span> canvasContext2D = <span class="hljs-variable language_">this</span>.<span class="hljs-property">canvas</span>.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">"2d"</span>);
            canvasContext2D.<span class="hljs-title function_">strokeText</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">model</span>.<span class="hljs-property">text</span>);

            <span class="hljs-comment">// render the selection (implementation omitted for brevity)</span>
        } 

        <span class="hljs-title function_">computeSelectionBound</span>(<span class="hljs-params"></span>) { 
            <span class="hljs-comment">// implementation omitted for brevity </span>
        } 

        <span class="hljs-title function_">computeControlBound</span>(<span class="hljs-params"></span>) { 
            <span class="hljs-comment">// implementation omitted for brevity </span>
        } 
    }

    <span class="hljs-keyword">class</span> <span class="hljs-title class_">EditingController</span> {
        <span class="hljs-title function_">constructor</span>(<span class="hljs-params">model, view, editContext</span>) {  
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">view</span> = view
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">model</span> = model
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">editContext</span> = editContext
        }

        <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) {
            view.<span class="hljs-title function_">render</span>()

            <span class="hljs-comment">// keep EditContext in sync, which essentially means</span>
            <span class="hljs-comment">// rendering the plain text view of the model.</span>
            <span class="hljs-keyword">let</span> editContext = <span class="hljs-variable language_">this</span>.<span class="hljs-property">canvas</span>.<span class="hljs-property">editContext</span>  
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">editContext</span>.<span class="hljs-title function_">updateText</span>(<span class="hljs-number">0</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">model</span>.<span class="hljs-property">text</span>.<span class="hljs-property">length</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">model</span>.<span class="hljs-property">text</span>)
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">editContext</span>.<span class="hljs-title function_">updateSelection</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">model</span>.<span class="hljs-property">selectionStart</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">model</span>.<span class="hljs-property">selectionEnd</span>)

            <span class="hljs-keyword">let</span> selectionBounds = view.<span class="hljs-title function_">computeSelectionBound</span>()  
            <span class="hljs-keyword">let</span> controlBounds = view.<span class="hljs-title function_">computeControlBound</span>()  

            <span class="hljs-comment">// These bounds have x, y, width and height members  </span>
            <span class="hljs-comment">// so they can be assigned directly to EditContext.</span>
            editContext.<span class="hljs-title function_">updateSelectionBounds</span>(selectionBounds)
            editContext.<span class="hljs-title function_">updateControlBounds</span>(controlBounds)
        }
    }

    <span class="hljs-keyword">let</span> canvas = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">"canvas"</span>)
    canvas.<span class="hljs-property">editContext</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EditContext</span>()
    <span class="hljs-keyword">let</span> editingModel = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EditingModel</span>(<span class="hljs-string">""</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)
    <span class="hljs-keyword">let</span> editingView = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EditingView</span>(canvas, editingModel)
    <span class="hljs-keyword">let</span> editingController = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EditingController</span>(editingModel,
        editingView, canvas.<span class="hljs-property">editContext</span>);

    editingController.<span class="hljs-title function_">render</span>() 
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">canvas</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span></code></pre>
                </aside>

                <p>Building on the previous example, in response to user input, authors should handle the events of both
                    the editable element (in this case a canvas) and the EditContext.</p>

                <p>Input events against the DOM continue to describe the user’s intent</p>

                <p>The below example shows how to handle <a data-link-type="idl" data-lt="TextUpdateEvent"
                        href="#dom-textupdateevent" class="internalDFN"
                        id="ref-for-dom-textupdateevent-2"><code>TextUpdateEvent</code></a>, <a data-link-type="idl"
                        data-lt="TextFormatUpdateEvent" href="#dom-textformatupdateevent" class="internalDFN"
                        id="ref-for-dom-textformatupdateevent-3"><code>TextFormatUpdateEvent</code></a>, and <a
                        data-link-type="idl" data-lt="CharacterBoundsUpdateEvent" href="#dom-characterboundsupdateevent"
                        class="internalDFN"
                        id="ref-for-dom-characterboundsupdateevent-5"><code>CharacterBoundsUpdateEvent</code></a> to
                    update the model and render the result to the canvas.</p>
                <aside class="example"
                    id="example-event-handlers-for-textupdateevent-textformatupdateevent-and-characterboundsupdateevent">
                    <div class="marker">
                        <a class="self-link"
                            href="#example-event-handlers-for-textupdateevent-textformatupdateevent-and-characterboundsupdateevent">Example<bdi>
                                3</bdi></a><span class="example-title">: Event handlers for TextUpdateEvent,
                            TextFormatUpdateEvent, and CharacterBoundsUpdateEvent</span>
                    </div>
                    <pre aria-busy="false"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">
    <span class="hljs-comment">// This example is built on top of example 1 and example 2.</span>
    <span class="hljs-comment">// Only the added logic is shown here for brevity.</span>
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">EditingModel</span> {
        <span class="hljs-title function_">updateText</span>(<span class="hljs-params">updateRangeStart, updateRangeEnd, updateText</span>) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">text</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">text</span>.<span class="hljs-title function_">substring</span>(<span class="hljs-number">0</span>, updateRangeStart) + updateText
                        + <span class="hljs-variable language_">this</span>.<span class="hljs-property">text</span>.<span class="hljs-title function_">substring</span>(updateRangeEnd)
        }

        <span class="hljs-title function_">updateSelection</span>(<span class="hljs-params">selectionStart, selectionEnd</span>) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">selectionStart</span> = selectionStart
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">selectionEnd</span> = selectionEnd
        }

        <span class="hljs-title function_">updateTextFormats</span>(<span class="hljs-params">textFormats</span>) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">textFormats</span> = textFormats
        }
    }

    <span class="hljs-keyword">class</span> <span class="hljs-title class_">EditingView</span> {
        <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) {
            <span class="hljs-comment">// render the text (implementation omitted for brevity)</span>

            <span class="hljs-comment">// render the selection (implementation omitted for brevity)</span>

            <span class="hljs-comment">// render the IME decoration</span>
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">model</span>.<span class="hljs-property">textFormats</span>.<span class="hljs-title function_">forEach</span>( <span class="hljs-function"><span class="hljs-params">textFormat</span> =&gt;</span> {
                <span class="hljs-comment">// For brevity, these variables' initialization are omitted:</span>
                <span class="hljs-comment">// anchorX: the x coordinate of the beginning of the string</span>
                <span class="hljs-comment">// lineY: the y coordinate of the underline</span>
                <span class="hljs-comment">// charWidth: the width of the character (here we are using a mono-spaced font)</span>
                <span class="hljs-comment">// thickWidth/thinWidth: pre-defined width for thick/thin lines.</span>
                <span class="hljs-keyword">let</span> lineStartX = anchorX + textFormat.<span class="hljs-property">rangeStart</span> * charWidth;
                <span class="hljs-keyword">let</span> lineEndX = anchorX + textFormat.<span class="hljs-property">rangeEnd</span> * charWidth;
                
                canvasContext2D.<span class="hljs-property">lineWidth</span> = (textFormat.<span class="hljs-property">underlineThickness</span> == <span class="hljs-string">'Thick'</span>)?
                                            thickWidth : thinWidth;
                canvasContext2D.<span class="hljs-title function_">beginPath</span>();
                canvasContext2D.<span class="hljs-title function_">moveTo</span>(lineStartX, lineY);
                canvasContext2D.<span class="hljs-title function_">lineTo</span>(lineEndX, lineY);
                canvasContext2D.<span class="hljs-title function_">stroke</span>();
            })
        }

        <span class="hljs-title function_">computeCharacterBounds</span>(<span class="hljs-params">rangeStart, rangeEnd</span>) {
            <span class="hljs-comment">// implementation omitted for brevity</span>
        }
    }

    <span class="hljs-keyword">class</span> <span class="hljs-title class_">EditingController</span> {
        <span class="hljs-title function_">handleTextUpdate</span>(<span class="hljs-params">updateRangeStart, updateRangeEnd, text, 
                         selectionStart, selectionEnd</span>) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">model</span>.<span class="hljs-title function_">updateText</span>(updateRangeStart, updateRangeEnd, text)
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">model</span>.<span class="hljs-title function_">updateSelection</span>(selectionStart, selectionEnd)
        }

        <span class="hljs-title function_">handleTextFormatUpdate</span>(<span class="hljs-params">textFormats</span>) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">model</span>.<span class="hljs-title function_">updateTextFormats</span>(textFormats);
        }

        <span class="hljs-title function_">handleCharacterBoundsUpdate</span>(<span class="hljs-params">rangeStart, rangeEnd</span>) {
            characterBounds = <span class="hljs-variable language_">this</span>.<span class="hljs-property">view</span>.<span class="hljs-title function_">computeCharacterBounds</span>(rangeStart, rangeEnd);
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">editContext</span>.<span class="hljs-title function_">updateCharacterBounds</span>(rangeStart, characterBounds);
        }
    }

    <span class="hljs-comment">// When the user is typing, EditContext will receive textupdate events,</span>
    <span class="hljs-comment">// which can be used to update the editor's model.</span>
    editContext.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"textupdate"</span>, <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {
        editingController.<span class="hljs-title function_">handleTextUpdate</span>(e.<span class="hljs-property">updateRangeStart</span>, e.<span class="hljs-property">updateRangeEnd</span>, e.<span class="hljs-property">text</span>,
                                        e.<span class="hljs-property">selectionStart</span>, e.<span class="hljs-property">selectionEnd</span>)
    });

    <span class="hljs-comment">// EditContext will also receive textformatupdate event for IME decoration.</span>
    <span class="hljs-comment">// Ex. thin/thick underline for the "phrase mode" in Japanese IME.</span>
    editContext.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"textformatupdate"</span>, <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {
        editingcontroller.<span class="hljs-title function_">handleTextFormatUpdate</span>(e.<span class="hljs-title function_">getTextFormats</span>());
    });

    <span class="hljs-comment">// When receiving CharacterBoundsUpdate event, the author is responsible to compute</span>
    <span class="hljs-comment">// the bounds of characters from rangeStart to rangeEnd, and call</span>
    <span class="hljs-comment">// EditContext.updateCharacterBounds to update the character bounds in EditContext.</span>
    editContext.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"characterboundsupdate"</span>, <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {
        editingcontroller.<span class="hljs-title function_">handleCharacterBoundsUpdate</span>(e.<span class="hljs-property">rangeStart</span>, e.<span class="hljs-property">rangeEnd</span>);
    });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre>
                </aside>
            </section>
        </section>
        <section id="interactions" class="informative">
            <div class="header-wrapper">
                <h3 id="x1-3-interactions-with-other-editing-primitives"><bdi class="secno">1.3 </bdi>Interactions with
                    Other Editing Primitives </h3><a class="self-link" href="#interactions"
                    aria-label="Permalink for Section 1.3"></a>
            </div>
            <p><em>This section is non-normative.</em></p>

            <p>An author doesn’t have to use a canvas element with an EditContext. In the example below the author uses
                a div to establish an editable region of the document and renders the contents into that editable region
                using various other styled elements, images and text. This allows the author to leverage other built-in
                editing primitives from the user agent such as selection and spellcheck. </p>

            <aside class="example" id="example-how-native-selection-can-be-leveraged-to-handle-caret-navigation">
                <div class="marker">
                    <a class="self-link"
                        href="#example-how-native-selection-can-be-leveraged-to-handle-caret-navigation">Example<bdi>
                            4</bdi></a><span class="example-title">: How native selection can be leveraged to handle
                        caret navigation.</span>
                </div>
                <pre aria-busy="false"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">
    <span class="hljs-comment">// This example reuses EditModel and EditController in Example 2 and 3.</span>
    <span class="hljs-keyword">let</span> div = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">"div"</span>) 
    div.<span class="hljs-property">editContext</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EditContext</span>() 
    div.<span class="hljs-title function_">focus</span>();

    <span class="hljs-keyword">class</span> <span class="hljs-title class_">EditingView</span> {  
        <span class="hljs-title function_">constructor</span>(<span class="hljs-params">div, model</span>) {  
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">div</span> = div 
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">model</span> = model 
        } 

        <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) {
            <span class="hljs-comment">// render the text</span>
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">div</span>.<span class="hljs-property">innerText</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">model</span>.<span class="hljs-property">text</span>

            <span class="hljs-comment">// render the selection (implementation omitted for brevity)</span>
        }

        <span class="hljs-title function_">computeSelectionBound</span>(<span class="hljs-params"></span>) { 
            <span class="hljs-comment">// implementation omitted for brevity </span>
        } 

        <span class="hljs-title function_">computeControlBound</span>(<span class="hljs-params"></span>) { 
            <span class="hljs-comment">// implementation omitted for brevity </span>
        } 

        <span class="hljs-title function_">computeCharacterBounds</span>(<span class="hljs-params">rangeStart, rangeEnd</span>) {
            <span class="hljs-comment">// implementation omitted for brevity</span>
        }
    }

    <span class="hljs-keyword">class</span> <span class="hljs-title class_">EditingController</span> {
        <span class="hljs-title function_">handleSelectionChange</span>(<span class="hljs-params"></span>) {
            <span class="hljs-comment">// Authors are responsible to map the selection from the DOM space to the</span>
            <span class="hljs-comment">// plain text space. One approach is to use range.toString() to get the plain text</span>
            <span class="hljs-comment">// before the selection start/end, and use the text length as the selection index.</span>
            <span class="hljs-keyword">let</span> s = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getSelection</span>()
            <span class="hljs-keyword">let</span> range = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Range</span>()
            range.<span class="hljs-title function_">setEnd</span>(s.<span class="hljs-property">anchorNode</span>, s.<span class="hljs-property">anchorOffset</span>)
            range.<span class="hljs-title function_">setStartBefore</span>(parentContainer)
            <span class="hljs-keyword">let</span> selectionStart = range.<span class="hljs-title function_">toString</span>().<span class="hljs-property">length</span>

            range.<span class="hljs-title function_">setEnd</span>(s.<span class="hljs-property">focusNode</span>, s.<span class="hljs-property">focusOffset</span>)
            range.<span class="hljs-title function_">setStartBefore</span>(parentContainer)
            <span class="hljs-keyword">let</span> selectionEnd = range.<span class="hljs-title function_">toString</span>().<span class="hljs-property">length</span>

            <span class="hljs-comment">// Update model</span>
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">model</span>.<span class="hljs-title function_">updateSelection</span>(selectionStart, selectionEnd)

            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">render</span>()
        }
    }

    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"selectionchange"</span>, <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {
        editingController.<span class="hljs-title function_">handleSelectionChange</span>()
    });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre>
            </aside>

            <aside class="example"
                id="example-how-beforeinput-can-be-used-to-catch-insertreplacementtext-to-apply-spelling-changes">
                <div class="marker">
                    <a class="self-link"
                        href="#example-how-beforeinput-can-be-used-to-catch-insertreplacementtext-to-apply-spelling-changes">Example<bdi>
                            5</bdi></a><span class="example-title">: How beforeinput can be used to catch
                        insertReplacementText to apply spelling changes</span>
                </div>
                <pre aria-busy="false"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">
    <span class="hljs-comment">// This example is built on top of example 4.</span>
    <span class="hljs-comment">// Only the added logic is shown here for brevity.</span>
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">EditingController</span> {
        <span class="hljs-title function_">handleSpellCheck</span>(<span class="hljs-params">newText, range</span>) {
            <span class="hljs-keyword">let</span> updateRangeStart = range.<span class="hljs-property">startOffset</span>
            <span class="hljs-keyword">let</span> updateRangeEnd = range.<span class="hljs-property">endOffset</span>

            <span class="hljs-comment">// Update model</span>
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">model</span>.<span class="hljs-title function_">updateText</span>(updateRangeStart, updateRangeEnd, newText)
            <span class="hljs-keyword">let</span> newCaretPosition = updateRangeStart + newText.<span class="hljs-property">length</span>
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">model</span>.<span class="hljs-title function_">updateSelection</span>(newCaretPosition, newCaretPosition)

            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">render</span>()
        }
    }

    div.<span class="hljs-property">spellcheck</span> = <span class="hljs-literal">true</span>;
    div.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"beforeinput"</span>, <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {
        <span class="hljs-keyword">if</span> (e.<span class="hljs-property">inputType</span> === <span class="hljs-string">"insertReplacementText"</span>) { <span class="hljs-comment">// for spellcheck</span>
            <span class="hljs-keyword">let</span> newText = e.<span class="hljs-property">dataTransfer</span>.<span class="hljs-title function_">getData</span>(<span class="hljs-string">"text"</span>);
            <span class="hljs-keyword">let</span> range = e.<span class="hljs-title function_">getTargetRanges</span>()[<span class="hljs-number">0</span>];
            editingController.<span class="hljs-title function_">handleSpellCheck</span>(newText, range)
        }
    })
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre>
            </aside>

            <aside class="example"
                id="example-how-beforeinput-can-be-used-to-catch-deletebydrag-and-insertfromdrop-to-apply-drag-and-drop-changes">
                <div class="marker">
                    <a class="self-link"
                        href="#example-how-beforeinput-can-be-used-to-catch-deletebydrag-and-insertfromdrop-to-apply-drag-and-drop-changes">Example<bdi>
                            6</bdi></a><span class="example-title">: How beforeinput can be used to catch deleteByDrag
                        and insertFromDrop to apply drag and drop changes</span>
                </div>
                <pre aria-busy="false"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">
    <span class="hljs-comment">// This example is built on top of example 4.</span>
    <span class="hljs-comment">// Only the added logic is shown here for brevity.</span>
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">EditingController</span> {
        <span class="hljs-title function_">handleDeleteByDrag</span>(<span class="hljs-params"></span>) {
            <span class="hljs-comment">// Update model</span>
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">model</span>.<span class="hljs-title function_">updateText</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">model</span>.<span class="hljs-property">selectionStart</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">model</span>.<span class="hljs-property">selectionEnd</span>, <span class="hljs-string">""</span>)

            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">render</span>()
        }

        <span class="hljs-title function_">handleInsertFromDrop</span>(<span class="hljs-params">newText, caretPosition</span>) {
            <span class="hljs-comment">// Update model</span>
            editingModel.<span class="hljs-title function_">updateText</span>(caretPosition, caretPosition, newText)
            editingModel.<span class="hljs-title function_">updateSelection</span>(caretPosition, caretPosition + newText.<span class="hljs-property">length</span>)

            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">render</span>()
        }
    }

    div.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"beforeinput"</span>, <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {
        <span class="hljs-keyword">if</span> (e.<span class="hljs-property">inputType</span> === <span class="hljs-string">"deleteByDrag"</span>) {
            editingController.<span class="hljs-title function_">handleDeleteByDrag</span>()
        } 
        
        <span class="hljs-keyword">if</span> (e.<span class="hljs-property">inputType</span> === <span class="hljs-string">"insertFromDrop"</span>) {
            newText = e.<span class="hljs-property">dataTransfer</span>.<span class="hljs-title function_">getData</span>(<span class="hljs-string">'text/plain'</span>);
            <span class="hljs-keyword">let</span> selection = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getSelection</span>();
            <span class="hljs-keyword">let</span> caretPosition = selection.<span class="hljs-property">anchorOffset</span>;

            editingController.<span class="hljs-title function_">handleInsertFromDrop</span>(newText, caretPosition)
        }
    })
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre>
            </aside>

        </section>
    </section>
    <section id="conformance">
        <div class="header-wrapper">
            <h2 id="x2-conformance"><bdi class="secno">2. </bdi>Conformance</h2><a class="self-link" href="#conformance"
                aria-label="Permalink for Section 2."></a>
        </div>
        <p>As well as sections marked as non-normative, all authoring guidelines, diagrams, examples, and notes in this
            specification are non-normative. Everything else in this specification is normative.</p>
        <p>
            This specification defines conformance criteria that apply to a single
            product: the user agent that implements the interfaces that
            it contains.
        </p>
        <p>
            Conformance requirements phrased as algorithms or specific steps may be
            implemented in any manner, so long as the end result is equivalent. (In
            particular, the algorithms defined in this specification are intended
            to be easy to follow, and not intended to be performant.)
        </p>
    </section>



    <section data-dfn-for="EditContext" id="editcontext-api">
        <div class="header-wrapper">
            <h2 id="x3-editcontext-api"><bdi class="secno">3. </bdi>EditContext API</h2><a class="self-link"
                href="#editcontext-api" aria-label="Permalink for Section 3."></a>
        </div>


        <section data-dfn-for="Element" id="extensions-to-the-htmlelement-interface">
            <div class="header-wrapper">
                <h3 id="x3-1-extensions-to-the-htmlelement-interface"><bdi class="secno">3.1 </bdi>Extensions to the
                    HTMLElement interface</h3><a class="self-link" href="#extensions-to-the-htmlelement-interface"
                    aria-label="Permalink for Section 3.1"></a>
            </div>

            <pre class="idl def" id="webidl-1194002304"><span class="idlHeader"><a class="self-link" href="#webidl-1194002304">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-htmlelement-partial-1" data-title="HTMLElement">partial interface <a data-idl="partial" data-link-type="interface" data-title="HTMLElement" class="idlID" data-dfn-for="HTMLElement" href="https://html.spec.whatwg.org/multipage/dom.html#htmlelement">HTMLElement</a> {<span data-idl="" class="idlAttribute" id="idl-def-htmlelement-editcontext" data-title="editContext" data-dfn-for="HTMLElement">
     attribute<span class="idlType"> <a data-link-type="idl" href="#dom-editcontext" class="internalDFN" id="ref-for-dom-editcontext-21"><code>EditContext</code></a>?</span> <dfn data-export="" data-dfn-type="attribute" id="dom-htmlelement-editcontext" data-idl="attribute" data-title="editContext" data-dfn-for="HTMLElement" data-type="EditContext" data-lt="editContext" data-local-lt="HTMLElement.editContext" class="idlName" tabindex="0" aria-haspopup="dialog"><code>editContext</code></dfn>;</span>
};</span></code></pre>
            <p>An <a data-link-type="interface" data-lt="HTMLElement"
                    href="https://html.spec.whatwg.org/multipage/dom.html#htmlelement"><code>HTMLElement</code></a> has
                an internal slot [[EditContext]], which is a reference to an <a data-link-type="idl"
                    data-lt="EditContext" href="#dom-editcontext" class="internalDFN"
                    id="ref-for-dom-editcontext-22"><code>EditContext</code></a> and is intially null.</p>
            <dl>
                <dt>editContext</dt>
                <dd>The <a data-link-type="idl" href="#dom-htmlelement-editcontext" class="internalDFN"
                        id="ref-for-dom-htmlelement-editcontext-3"><code>editContext</code></a> getter steps are to
                    return the value of <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this">this</a>'s
                    internal [[EditContext]] slot.</dd>
                <dd>The <a data-link-type="idl" href="#dom-htmlelement-editcontext" class="internalDFN"
                        id="ref-for-dom-htmlelement-editcontext-4"><code>editContext</code></a> setter must follow these
                    steps:
                    <div class="algorithm">
                        <dl>
                            <dt>Input</dt>
                            <dd><var>editContext</var></dd>
                            <dt>Output</dt>
                            <dd>None</dd>
                        </dl>
                        <ol>
                            <li>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this">this</a>'s <a
                                    data-link-type="dfn"
                                    href="https://dom.spec.whatwg.org/#concept-element-local-name">local name</a> is
                                neither a <a data-link-type="dfn"
                                    href="https://dom.spec.whatwg.org/#valid-shadow-host-name">valid shadow host
                                    name</a> nor "<code>canvas</code>", then <a data-link-type="dfn"
                                    href="https://webidl.spec.whatwg.org/#dfn-throw">throw</a> a "<a
                                    data-link-type="exception"
                                    href="https://webidl.spec.whatwg.org/#notsupportederror"><code>NotSupportedError</code></a>"
                                <a data-link-type="interface" data-lt="DOMException"
                                    href="https://webidl.spec.whatwg.org/#idl-DOMException"><code>DOMException</code></a>.
                            </li>
                            <li>If <var>editContext</var> is not null, then:
                                <ol>
                                    <li>If <var>editContext</var>'s <a href="#dfn-associated-element"
                                            class="internalDFN" data-link-type="dfn"
                                            id="ref-for-dfn-associated-element-13">associated element</a> is equal to <a
                                            data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this">this</a>,
                                        then terminate these steps.</li>
                                    <li>If <var>editContext</var>'s <a href="#dfn-associated-element"
                                            class="internalDFN" data-link-type="dfn"
                                            id="ref-for-dfn-associated-element-14">associated element</a> is not null,
                                        then <a data-link-type="dfn"
                                            href="https://webidl.spec.whatwg.org/#dfn-throw">throw</a> a "<a
                                            data-link-type="exception"
                                            href="https://webidl.spec.whatwg.org/#notsupportederror"><code>NotSupportedError</code></a>"
                                        <a data-link-type="interface" data-lt="DOMException"
                                            href="https://webidl.spec.whatwg.org/#idl-DOMException"><code>DOMException</code></a>.
                                    </li>
                                </ol>
                            </li>
                            <li>Let <var>oldEditContext</var> be the value of <a data-link-type="dfn"
                                    href="https://webidl.spec.whatwg.org/#this">this</a>'s internal [[EditContext]]
                                slot.</li>
                            <li>
                                If <var>oldEditContext</var> is not null and <var>oldEditContext</var> is <a
                                    data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this">this</a>'s
                                <a href="https://dom.spec.whatwg.org/#concept-node-document">node document</a>'s
                                <a data-link-type="dfn|abstract-op" href="#dfn-active-editcontext" class="internalDFN"
                                    id="ref-for-dfn-active-editcontext-7">active EditContext</a>, then:
                                <ol>
                                    <li>Run the steps to <a data-link-type="dfn|abstract-op"
                                            href="#dfn-deactivate-an-editcontext" class="internalDFN"
                                            id="ref-for-dfn-deactivate-an-editcontext-2">deactivate an EditContext</a>
                                        with <var>oldEditContext</var>.</li>
                                    <li>
                                        If <var>oldEditContext</var>'s <a href="#dfn-associated-element"
                                            class="internalDFN" data-link-type="dfn"
                                            id="ref-for-dfn-associated-element-15">associated element</a> is not equal
                                        to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this">this</a>,
                                        then terminate these steps.
                                    </li>
                                    <li>
                                        If <var>editContext</var> is not null, <var>editContext</var>'s <a
                                            href="#dfn-associated-element" class="internalDFN" data-link-type="dfn"
                                            id="ref-for-dfn-associated-element-16">associated element</a> is not null
                                        and <var>editContext</var>'s
                                        <a href="#dfn-associated-element" class="internalDFN" data-link-type="dfn"
                                            id="ref-for-dfn-associated-element-17">associated element</a> is not equal
                                        to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this">this</a>,
                                        then <a data-link-type="dfn"
                                            href="https://webidl.spec.whatwg.org/#dfn-throw">throw</a> a "<a
                                            data-link-type="exception"
                                            href="https://webidl.spec.whatwg.org/#notsupportederror"><code>NotSupportedError</code></a>"
                                        <a data-link-type="interface" data-lt="DOMException"
                                            href="https://webidl.spec.whatwg.org/#idl-DOMException"><code>DOMException</code></a>.
                                    </li>
                                </ol>
                            </li>
                            <li>If <var>oldEditContext</var> is not null, set <var>oldEditContext</var>'s <a
                                    href="#dfn-associated-element" class="internalDFN" data-link-type="dfn"
                                    id="ref-for-dfn-associated-element-18">associated element</a> to null.</li>
                            <li>If <var>editContext</var> is not null, then set <var>editContext</var>'s <a
                                    href="#dfn-associated-element" class="internalDFN" data-link-type="dfn"
                                    id="ref-for-dfn-associated-element-19">associated element</a> to <a
                                    data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this">this</a>.
                            </li>
                            <li>Set <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this">this</a>'s
                                internal [[EditContext]] slot to be <var>editContext</var>.</li>
                        </ol>
                    </div>
                </dd>
            </dl>
            <section id="handle-input-for-editcontext">
                <div class="header-wrapper">
                    <h4 id="x3-1-1-handle-input-for-editcontext"><bdi class="secno">3.1.1 </bdi><dfn class="export"
                            data-export="" id="dfn-handle-input-for-editcontext" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">Handle input for EditContext</dfn></h4><a class="self-link"
                        href="#handle-input-for-editcontext" aria-label="Permalink for Section 3.1.1"></a>
                </div>
                <div class="algorithm">
                    <dl>
                        <dt>Input</dt>
                        <dd><var>element</var>, the <a data-link-type="interface" data-lt="HTMLElement"
                                href="https://html.spec.whatwg.org/multipage/dom.html#htmlelement"><code>HTMLElement</code></a>
                            receiving the input</dd>
                        <dt>Output</dt>
                        <dd>None</dd>
                    </dl>
                    <ol>
                        <li>
                            Let <var>editContext</var> be <var>element</var>'s
                            <a href="https://dom.spec.whatwg.org/#concept-node-document">node document</a>'s
                            <a data-link-type="dfn|abstract-op" href="#dfn-active-editcontext" class="internalDFN"
                                id="ref-for-dfn-active-editcontext-8">active EditContext</a>
                        </li>
                        <li>
                            If <var>editContext</var> is null, return.
                        </li>
                        <li>
                            <p>
                                Run the steps to <a data-link-type="dfn|abstract-op" href="#dfn-update-the-editcontext"
                                    class="internalDFN" id="ref-for-dfn-update-the-editcontext-2">Update the
                                    EditContext</a> given <var>editContext</var> and the
                                <a data-link-type="dfn|abstract-op" href="#dfn-text-edit-context" class="internalDFN"
                                    id="ref-for-dfn-text-edit-context-17">Text Edit Context</a>'s <a
                                    data-link-type="dfn|abstract-op" href="#dfn-text-state" class="internalDFN"
                                    id="ref-for-dfn-text-state-3">text state</a>'s <a data-link-type="dfn|abstract-op"
                                    href="#dfn-text" class="internalDFN" id="ref-for-dfn-text-13">text</a>, <a
                                    data-link-type="dfn|abstract-op" href="#dfn-text-formats" class="internalDFN"
                                    id="ref-for-dfn-text-formats-1">text formats</a>,
                                <a data-link-type="dfn|abstract-op" href="#dfn-selection-start" class="internalDFN"
                                    id="ref-for-dfn-selection-start-2">selection start</a>, <a
                                    data-link-type="dfn|abstract-op" href="#dfn-selection-end" class="internalDFN"
                                    id="ref-for-dfn-selection-end-2">selection end</a>, <a
                                    data-link-type="dfn|abstract-op" href="#dfn-is-composing" class="internalDFN"
                                    id="ref-for-dfn-is-composing-1">is composing</a>, <a
                                    data-link-type="dfn|abstract-op" href="#dfn-composition-start" class="internalDFN"
                                    id="ref-for-dfn-composition-start-2">composition start</a>,
                                and <a data-link-type="dfn|abstract-op" href="#dfn-composition-end" class="internalDFN"
                                    id="ref-for-dfn-composition-end-2">composition end</a>.
                            </p>
                            <div class="note" role="note" id="issue-container-generatedID-5">
                                <div role="heading" class="note-title marker" id="h-note-5" aria-level="4">
                                    <span>Note</span>
                                </div>
                                <p class="">
                                    Since <a data-link-type="dfn|abstract-op" href="#dfn-text-edit-context"
                                        class="internalDFN" id="ref-for-dfn-text-edit-context-18">Text Edit Context</a>
                                    is an abstraction over the common aspects
                                    of text input across different operating systems, the determination of
                                    the values in the <a data-link-type="dfn|abstract-op" href="#dfn-text-edit-context"
                                        class="internalDFN" id="ref-for-dfn-text-edit-context-19">Text Edit Context</a>
                                    is explicitly not given in this
                                    specification. They will vary across different operating systems and
                                    input devices.
                                </p>
                            </div>
                        </li>
                    </ol>
                </div>

            </section>
            <section id="editcontext-handled-inputtype">
                <div class="header-wrapper">
                    <h4 id="x3-1-2-editcontext-handled-inputtype"><bdi class="secno">3.1.2 </bdi><dfn
                            id="dfn-editcontext-handled-inputtype" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">EditContext-handled inputType</dfn></h4><a class="self-link"
                        href="#editcontext-handled-inputtype" aria-label="Permalink for Section 3.1.2"></a>
                </div>
                <div class="algorithm">
                    An <a href="https://www.w3.org/TR/uievents/#dom-inputevent-inputtype">inputType</a> is an
                    <a data-link-type="dfn|abstract-op" href="#dfn-editcontext-handled-inputtype" class="internalDFN"
                        id="ref-for-dfn-editcontext-handled-inputtype-1">EditContext-handled inputType</a> if it is one
                    of the following:
                    <ul>
                        <li><code>insertText</code></li>
                        <li><code>insertTranspose</code></li>
                        <li><code>deleteWordBackward</code></li>
                        <li><code>deleteWordForward</code></li>
                        <li><code>deleteContent</code></li>
                        <li><code>deleteContentBackward</code></li>
                        <li><code>deleteContentForward</code></li>
                    </ul>
                    <div class="note" role="note" id="issue-container-generatedID-6">
                        <div role="heading" class="note-title marker" id="h-note-6" aria-level="4"><span>Note</span>
                        </div>
                        <div class="">
                            The <a href="https://www.w3.org/TR/uievents/#dom-inputevent-inputtype">inputType</a>s
                            handled by <a data-link-type="idl" data-lt="EditContext" href="#dom-editcontext"
                                class="internalDFN" id="ref-for-dom-editcontext-23"><code>EditContext</code></a>
                            are those which operate only on raw text. Other <a
                                href="https://www.w3.org/TR/uievents/#dom-inputevent-inputtype">inputType</a>s
                            that depend on formats, clipboard/dragdrop, undo, or browser UI like spellcheck cannot be
                            handled by
                            <a data-link-type="idl" data-lt="EditContext" href="#dom-editcontext" class="internalDFN"
                                id="ref-for-dom-editcontext-24"><code>EditContext</code></a> since <a
                                data-link-type="idl" data-lt="EditContext" href="#dom-editcontext" class="internalDFN"
                                id="ref-for-dom-editcontext-25"><code>EditContext</code></a>'s state does not include
                            these concepts. If an author wants their
                            application to handle those <a
                                href="https://www.w3.org/TR/uievents/#dom-inputevent-inputtype">inputType</a>s,
                            they need to process them manually in a <a
                                href="https://www.w3.org/TR/uievents/#event-type-beforeinput">beforeinput</a>
                            event handler.
                        </div>
                    </div>
                </div>

            </section>
            <section id="update-the-editcontext">
                <div class="header-wrapper">
                    <h4 id="x3-1-3-update-the-editcontext"><bdi class="secno">3.1.3 </bdi><dfn
                            id="dfn-update-the-editcontext" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">Update the EditContext</dfn></h4><a class="self-link"
                        href="#update-the-editcontext" aria-label="Permalink for Section 3.1.3"></a>
                </div>
                <div class="algorithm">
                    <dl>
                        <dt>Input</dt>
                        <dd><var>editContext</var>, an <a data-link-type="idl" data-lt="EditContext"
                                href="#dom-editcontext" class="internalDFN"
                                id="ref-for-dom-editcontext-26"><code>EditContext</code></a></dd>
                        <dd><var>text</var>, a string</dd>
                        <dd><var>textFormats</var>, an array of <a data-link-type="dfn|abstract-op"
                                href="#dfn-text-format" class="internalDFN" id="ref-for-dfn-text-format-2">text
                                format</a>s from the <a data-link-type="dfn|abstract-op" href="#dfn-text-input-service"
                                class="internalDFN" id="ref-for-dfn-text-input-service-17">Text Input Service</a></dd>
                        <dd><var>selectionStart</var>, the new position for the start of the selection</dd>
                        <dd><var>selectionEnd</var>, the new position for the end of the selection</dd>
                        <dd><var>isComposing</var>, a boolean indicating whether composition should be active at the end
                            of the update</dd>
                        <dd><var>replacementRangeStart</var>, the start position of the current composition (0 if there
                            is no composition)</dd>
                        <dd><var>replacementRangeEnd</var>, the end position of the current composition (0 if there is
                            no composition)</dd>
                        <dt>Output</dt>
                        <dd>None</dd>
                    </dl>
                    <ol>
                        <li>
                            If <var>isComposing</var> is true, <var>text</var> is not empty, and
                            <var>editContext</var>'s <a data-link-type="dfn|abstract-op" href="#dfn-is-composing"
                                class="internalDFN" id="ref-for-dfn-is-composing-2">is composing</a> is false.
                            <ol>
                                <li><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire">Fire
                                        an event</a> named <a
                                        href="https://w3c.github.io/uievents/#event-type-compositionstart">compositionstart</a>
                                    at <var>editContext</var> using <a data-link-type="interface"
                                        data-lt="CompositionEvent"
                                        href="https://www.w3.org/TR/uievents/#compositionevent"><code>CompositionEvent</code></a>.
                                </li>
                                <li>set <var>editContext</var>'s <a data-link-type="dfn|abstract-op"
                                        href="#dfn-is-composing" class="internalDFN" id="ref-for-dfn-is-composing-3">is
                                        composing</a> to true.</li>
                            </ol>
                        </li>
                        <li>
                            If <var>text</var> is empty:
                            <ol>
                                <li>If <var>editContext</var>'s <a data-link-type="dfn|abstract-op"
                                        href="#dfn-is-composing" class="internalDFN" id="ref-for-dfn-is-composing-4">is
                                        composing</a> is false, return.</li>
                                <li>
                                    If <var>editContext</var>'s <a data-link-type="dfn|abstract-op"
                                        href="#dfn-is-composing" class="internalDFN" id="ref-for-dfn-is-composing-5">is
                                        composing</a> is true and <var>isComposing</var> is false, then:
                                    <ol>
                                        <li>Set <var>editContext</var>'s <a data-link-type="dfn|abstract-op"
                                                href="#dfn-is-composing" class="internalDFN"
                                                id="ref-for-dfn-is-composing-6">is composing</a> to false.</li>
                                        <li>
                                            <a data-link-type="dfn"
                                                href="https://dom.spec.whatwg.org/#concept-event-fire">Fire an event</a>
                                            named
                                            <a
                                                href="https://w3c.github.io/uievents/#event-type-compositionend">compositionend</a>
                                            at <var>editContext</var> using <a data-link-type="interface"
                                                data-lt="CompositionEvent"
                                                href="https://www.w3.org/TR/uievents/#compositionevent"><code>CompositionEvent</code></a>.
                                        </li>
                                        <li>Return.</li>
                                    </ol>
                                </li>
                            </ol>
                        </li>
                        <li>If <var>editContext</var>'s <a data-link-type="dfn|abstract-op" href="#dfn-is-composing"
                                class="internalDFN" id="ref-for-dfn-is-composing-7">is composing</a> is true, then:
                            <ol>
                                <li>Let <var>insertionStart</var> be <var>replacementRangeStart</var>.</li>
                                <li>Let <var>insertionEnd</var> be <var>replacementRangeEnd</var>.</li>
                            </ol>
                        </li>
                        <li>Otherwise:
                            <ol>
                                <li>Let <var>insertionStart</var> be <var>selectionStart</var>.</li>
                                <li>Let <var>insertionEnd</var> be <var>selectionEnd</var>.</li>
                            </ol>
                        </li>
                        <li>
                            Replace the substring of <var>editContext</var>'s <a data-link-type="dfn|abstract-op"
                                href="#dfn-text" class="internalDFN" id="ref-for-dfn-text-14">text</a> in the range of
                            <var>insertionStart</var> and <var>insertionEnd</var> with <var>text</var>
                        </li>
                        <li>Set <var>editContext</var>'s <a data-link-type="dfn|abstract-op" href="#dfn-selection-start"
                                class="internalDFN" id="ref-for-dfn-selection-start-3">selection start</a> to
                            <var>selectionStart</var>.
                        </li>
                        <li>Set <var>editContext</var>'s <a data-link-type="dfn|abstract-op" href="#dfn-selection-end"
                                class="internalDFN" id="ref-for-dfn-selection-end-3">selection end</a> to
                            <var>selectionEnd</var>.
                        </li>
                        <li>Set <var>editContext</var>'s <a data-link-type="dfn|abstract-op"
                                href="#dfn-composition-start" class="internalDFN"
                                id="ref-for-dfn-composition-start-3">composition start</a> to <var>insertionStart</var>.
                        </li>
                        <li>Set <var>editContext</var>'s <a data-link-type="dfn|abstract-op" href="#dfn-composition-end"
                                class="internalDFN" id="ref-for-dfn-composition-end-3">composition end</a> to
                            <var>editContext</var>'s <a data-link-type="dfn|abstract-op" href="#dfn-composition-start"
                                class="internalDFN" id="ref-for-dfn-composition-start-4">composition start</a> plus the
                            length of <var>text</var>.
                        </li>
                        <li><a data-link-type="dfn|abstract-op" href="#dfn-dispatch-text-update-event"
                                class="internalDFN" id="ref-for-dfn-dispatch-text-update-event-1">Dispatch text update
                                event</a> given <var>editContext</var> and <var>text</var>.</li>
                        <li>
                            If <var>editContext</var>'s <a data-link-type="dfn|abstract-op" href="#dfn-is-composing"
                                class="internalDFN" id="ref-for-dfn-is-composing-8">is composing</a> is true, then:
                            <ol>
                                <li><a data-link-type="dfn|abstract-op" href="#dfn-dispatch-text-format-update-event"
                                        class="internalDFN"
                                        id="ref-for-dfn-dispatch-text-format-update-event-1">Dispatch text format update
                                        event</a> given <var>editContext</var> and <var>textFormats</var>.</li>
                                <li><a data-link-type="dfn|abstract-op"
                                        href="#dfn-dispatch-character-bounds-update-event" class="internalDFN"
                                        id="ref-for-dfn-dispatch-character-bounds-update-event-1">Dispatch character
                                        bounds update event</a> given <var>editContext</var>.</li>
                                <li>If <var>isComposing</var> is false, then:
                                    <ol>
                                        <li>Set <var>editContext</var>'s <a data-link-type="dfn|abstract-op"
                                                href="#dfn-is-composing" class="internalDFN"
                                                id="ref-for-dfn-is-composing-9">is composing</a> to false.</li>
                                        <li>
                                            <a data-link-type="dfn"
                                                href="https://dom.spec.whatwg.org/#concept-event-fire">Fire an event</a>
                                            named
                                            <a
                                                href="https://w3c.github.io/uievents/#event-type-compositionend">compositionend</a>
                                            at <var>editContext</var> using <a data-link-type="interface"
                                                data-lt="CompositionEvent"
                                                href="https://www.w3.org/TR/uievents/#compositionevent"><code>CompositionEvent</code></a>.
                                        </li>
                                    </ol>
                                </li>
                            </ol>
                        </li>
                    </ol>
                </div>

            </section>
            <section id="update-the-text-edit-context">
                <div class="header-wrapper">
                    <h4 id="x3-1-4-update-the-text-edit-context"><bdi class="secno">3.1.4 </bdi><dfn
                            id="dfn-update-the-text-edit-context" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">Update the Text Edit Context</dfn></h4><a class="self-link"
                        href="#update-the-text-edit-context" aria-label="Permalink for Section 3.1.4"></a>
                </div>
                <div class="algorithm">
                    <dl>
                        <dt>Input</dt>
                        <dd><var>document</var>, a <a data-link-type="interface" data-lt="Document"
                                href="https://dom.spec.whatwg.org/#document"><code>Document</code></a></dd>
                        <dt>Output</dt>
                        <dd>None</dd>
                    </dl>
                    <ol>
                        <li>Let <var>oldActiveEditContext</var> be <var>document</var>'s <a
                                data-link-type="dfn|abstract-op" href="#dfn-active-editcontext" class="internalDFN"
                                id="ref-for-dfn-active-editcontext-9">active EditContext</a>.</li>
                        <li>Let <var>newActiveEditContext</var> be the result of running the steps to <a
                                data-link-type="dfn|abstract-op" href="#dfn-determine-the-active-editcontext"
                                class="internalDFN" id="ref-for-dfn-determine-the-active-editcontext-1">determine the
                                active EditContext</a> given <var>document</var>.</li>
                        <li>If <var>oldActiveEditContext</var> is not null, then run the steps to <a
                                data-link-type="dfn|abstract-op" href="#dfn-deactivate-an-editcontext"
                                class="internalDFN" id="ref-for-dfn-deactivate-an-editcontext-3">deactivate an
                                EditContext</a> given <var>oldActiveEditContext</var>.</li>
                        <li>If <var>newActiveEditContext</var> is not null, then:
                            <ol>
                                <li>Update the <a data-link-type="dfn|abstract-op" href="#dfn-text-edit-context"
                                        class="internalDFN" id="ref-for-dfn-text-edit-context-20">Text Edit
                                        Context</a>'s <a data-link-type="dfn|abstract-op" href="#dfn-text-state"
                                        class="internalDFN" id="ref-for-dfn-text-state-4">text state</a> to match the
                                    values in <var>editContext</var>'s <a data-link-type="dfn|abstract-op"
                                        href="#dfn-text-state" class="internalDFN" id="ref-for-dfn-text-state-5">text
                                        state</a>.</li>
                            </ol>
                        </li>
                        <li>Set the <var>document</var>'s <a data-link-type="dfn|abstract-op"
                                href="#dfn-active-editcontext" class="internalDFN"
                                id="ref-for-dfn-active-editcontext-10">active EditContext</a> to
                            <var>newActiveEditContext</var>.
                        </li>
                    </ol>
                    <div class="note" role="note" id="issue-container-generatedID-7">
                        <div role="heading" class="note-title marker" id="h-note-7" aria-level="4"><span>Note</span>
                        </div>
                        <p class="">
                            Note that the steps to update the <a data-link-type="dfn|abstract-op"
                                href="#dfn-text-edit-context" class="internalDFN"
                                id="ref-for-dfn-text-edit-context-21">Text Edit Context</a>'s <a
                                data-link-type="dfn|abstract-op" href="#dfn-text-state" class="internalDFN"
                                id="ref-for-dfn-text-state-6">text state</a> are dependent on the nature of the
                            abstraction created over a platform-specific <a data-link-type="dfn|abstract-op"
                                href="#dfn-text-input-service" class="internalDFN"
                                id="ref-for-dfn-text-input-service-18">Text Input Service</a>.
                            Those details are not part of this specification.
                        </p>
                    </div>
                </div>

            </section>
            <section id="dispatch-text-update-event">
                <div class="header-wrapper">
                    <h4 id="x3-1-5-dispatch-text-update-event"><bdi class="secno">3.1.5 </bdi><dfn
                            id="dfn-dispatch-text-update-event" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">Dispatch text update event</dfn></h4><a class="self-link"
                        href="#dispatch-text-update-event" aria-label="Permalink for Section 3.1.5"></a>
                </div>
                <div class="algorithm">
                    <dl>
                        <dt>Input</dt>
                        <dd><var>editContext</var>, an <a data-link-type="idl" data-lt="EditContext"
                                href="#dom-editcontext" class="internalDFN"
                                id="ref-for-dom-editcontext-27"><code>EditContext</code></a></dd>
                        <dd><var>text</var>, a string</dd>
                        <dt>Output</dt>
                        <dd>None</dd>
                    </dl>
                    <ol>
                        <li>
                            <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire">Fire an
                                event</a> named "textupdate" at <var>editContext</var> using <a data-link-type="idl"
                                data-lt="TextUpdateEvent" href="#dom-textupdateevent" class="internalDFN"
                                id="ref-for-dom-textupdateevent-3"><code>TextUpdateEvent</code></a>, with
                            <a data-link-type="idl" href="#dom-textupdateevent-text" class="internalDFN"
                                id="ref-for-dom-textupdateevent-text-1"><code>text</code></a> initialized to
                            <var>text</var>,
                            <a data-link-type="idl" href="#dom-textupdateevent-selectionstart" class="internalDFN"
                                id="ref-for-dom-textupdateevent-selectionstart-1"><code>selectionStart</code></a>
                            initialized to |<var>editContext</var>'s <a data-link-type="dfn|abstract-op"
                                href="#dfn-selection-start" class="internalDFN"
                                id="ref-for-dfn-selection-start-4">selection start</a>, and
                            <a data-link-type="idl" href="#dom-textupdateevent-selectionend" class="internalDFN"
                                id="ref-for-dom-textupdateevent-selectionend-1"><code>selectionEnd</code></a>
                            initialized to <var>editContext</var>'s <a data-link-type="dfn|abstract-op"
                                href="#dfn-selection-end" class="internalDFN" id="ref-for-dfn-selection-end-4">selection
                                end</a>.
                        </li>
                    </ol>
                </div>

            </section>
            <section id="dispatch-text-format-update-event">
                <div class="header-wrapper">
                    <h4 id="x3-1-6-dispatch-text-format-update-event"><bdi class="secno">3.1.6 </bdi><dfn
                            id="dfn-dispatch-text-format-update-event" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">Dispatch text format update event</dfn></h4><a class="self-link"
                        href="#dispatch-text-format-update-event" aria-label="Permalink for Section 3.1.6"></a>
                </div>
                <div class="algorithm">
                    <dl>
                        <dt>Input</dt>
                        <dd><var>editContext</var>, an <a data-link-type="idl" data-lt="EditContext"
                                href="#dom-editcontext" class="internalDFN"
                                id="ref-for-dom-editcontext-28"><code>EditContext</code></a></dd>
                        <dd><var>textFormats</var>, an array of <a data-link-type="dfn|abstract-op"
                                href="#dfn-text-format" class="internalDFN" id="ref-for-dfn-text-format-3">text
                                format</a>s from the <a data-link-type="dfn|abstract-op" href="#dfn-text-input-service"
                                class="internalDFN" id="ref-for-dfn-text-input-service-19">Text Input Service</a></dd>
                        <dt>Output</dt>
                        <dd>None</dd>
                    </dl>
                    <ol>
                        <li>
                            Let <var>formats</var> be an array of <a data-link-type="idl" data-lt="TextFormat"
                                href="#dom-textformat" class="internalDFN"
                                id="ref-for-dom-textformat-1"><code>TextFormat</code></a>, initially empty.
                        </li>
                        <li>
                            For each <a data-link-type="dfn|abstract-op" href="#dfn-text-format" class="internalDFN"
                                id="ref-for-dfn-text-format-4">text format</a> <var>format</var> in
                            <var>textFormats</var>,
                            <ol>
                                <li>Let <var>textFormat</var> be a new <a data-link-type="idl" data-lt="TextFormat"
                                        href="#dom-textformat" class="internalDFN"
                                        id="ref-for-dom-textformat-2"><code>TextFormat</code></a>. with
                                    <var>rangeStart</var>, <var>rangeEnd</var>, <var>underlineStyle</var>,
                                    <var>underlineThickness</var>.
                                </li>
                                <li>Set <var>textFormat</var>'s <a data-link-type="idl"
                                        href="#dom-textformat-rangestart" class="internalDFN"
                                        id="ref-for-dom-textformat-rangestart-1"><code>rangeStart</code></a> to
                                    <var>format</var>'s <a data-link-type="dfn|abstract-op" href="#dfn-range-start"
                                        class="internalDFN" id="ref-for-dfn-range-start-1">range start</a>.
                                </li>
                                <li>Set <var>textFormat</var>'s <a data-link-type="idl" href="#dom-textformat-rangeend"
                                        class="internalDFN"
                                        id="ref-for-dom-textformat-rangeend-1"><code>rangeEnd</code></a> to
                                    <var>format</var>'s <a data-link-type="dfn|abstract-op" href="#dfn-range-end"
                                        class="internalDFN" id="ref-for-dfn-range-end-1">range end</a>.
                                </li>
                                <li>Set <var>textFormat</var>'s <a data-link-type="idl"
                                        href="#dom-textformat-underlinestyle" class="internalDFN"
                                        id="ref-for-dom-textformat-underlinestyle-1"><code>underlineStyle</code></a> to
                                    <var>format</var>'s <a data-link-type="dfn|abstract-op" href="#dfn-underline-style"
                                        class="internalDFN" id="ref-for-dfn-underline-style-1">underline style</a>.
                                </li>
                                <li>Set <var>textFormat</var>'s <a data-link-type="idl"
                                        href="#dom-textformat-underlinethickness" class="internalDFN"
                                        id="ref-for-dom-textformat-underlinethickness-1"><code>underlineThickness</code></a>
                                    to <var>format</var>'s <a data-link-type="dfn|abstract-op"
                                        href="#dfn-underline-thickness" class="internalDFN"
                                        id="ref-for-dfn-underline-thickness-1">underline thickness</a>.</li>
                                <li>Append <var>textFormat</var> to <var>formats</var></li>
                            </ol>
                        </li>
                        <li>
                            <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire">Fire an
                                event</a> named "textformatupdate" at <var>editContext</var> using <a
                                data-link-type="idl" data-lt="TextFormatUpdateEvent" href="#dom-textformatupdateevent"
                                class="internalDFN"
                                id="ref-for-dom-textformatupdateevent-4"><code>TextFormatUpdateEvent</code></a> with
                            the <a data-link-type="idl" data-lt="TextFormatUpdateEvent"
                                href="#dom-textformatupdateevent" class="internalDFN"
                                id="ref-for-dom-textformatupdateevent-5"><code>TextFormatUpdateEvent</code></a>'s <a
                                data-link-type="dfn|abstract-op" href="#dfn-text-format-list" class="internalDFN"
                                id="ref-for-dfn-text-format-list-1">text format list</a> initialized to
                            <var>formats</var>.
                        </li>
                    </ol>
                </div>

            </section>
            <section id="dispatch-character-bounds-update-event">
                <div class="header-wrapper">
                    <h4 id="x3-1-7-dispatch-character-bounds-update-event"><bdi class="secno">3.1.7 </bdi><dfn
                            id="dfn-dispatch-character-bounds-update-event" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">Dispatch character bounds update event</dfn></h4><a class="self-link"
                        href="#dispatch-character-bounds-update-event" aria-label="Permalink for Section 3.1.7"></a>
                </div>
                <div class="algorithm">
                    <dl>
                        <dt>Input</dt>
                        <dd><var>editContext</var>, an <a data-link-type="idl" data-lt="EditContext"
                                href="#dom-editcontext" class="internalDFN"
                                id="ref-for-dom-editcontext-29"><code>EditContext</code></a></dd>
                        <dt>Output</dt>
                        <dd>None</dd>
                    </dl>
                    <ol>
                        <li>
                            <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire">Fire an
                                event</a> named "characterboundsupdate" at <var>editContext</var> using <a
                                data-link-type="idl" data-lt="CharacterBoundsUpdateEvent"
                                href="#dom-characterboundsupdateevent" class="internalDFN"
                                id="ref-for-dom-characterboundsupdateevent-6"><code>CharacterBoundsUpdateEvent</code></a>
                            with
                            <a data-link-type="idl" href="#dom-characterboundsupdateevent-rangestart"
                                class="internalDFN"
                                id="ref-for-dom-characterboundsupdateevent-rangestart-1"><code>rangeStart</code></a>
                            initialized to <var>editContext</var>'s <a data-link-type="dfn|abstract-op"
                                href="#dfn-composition-start" class="internalDFN"
                                id="ref-for-dfn-composition-start-5">composition start</a> and
                            <a data-link-type="idl" href="#dom-characterboundsupdateevent-rangeend" class="internalDFN"
                                id="ref-for-dom-characterboundsupdateevent-rangeend-1"><code>rangeEnd</code></a>
                            initialized to <var>editContext</var>'s <a data-link-type="dfn|abstract-op"
                                href="#dfn-composition-end" class="internalDFN"
                                id="ref-for-dfn-composition-end-4">composition end</a>.
                        </li>
                    </ol>
                </div>

            </section>
            <section id="deactivate-an-editcontext">
                <div class="header-wrapper">
                    <h4 id="x3-1-8-deactivate-an-editcontext"><bdi class="secno">3.1.8 </bdi><dfn
                            id="dfn-deactivate-an-editcontext" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">Deactivate an EditContext</dfn></h4><a class="self-link"
                        href="#deactivate-an-editcontext" aria-label="Permalink for Section 3.1.8"></a>
                </div>
                <div class="algorithm">
                    <dl>
                        <dt>Input</dt>
                        <dd><var>editContext</var>, an <a data-link-type="idl" data-lt="EditContext"
                                href="#dom-editcontext" class="internalDFN"
                                id="ref-for-dom-editcontext-30"><code>EditContext</code></a></dd>
                        <dt>Output</dt>
                        <dd>None</dd>
                    </dl>
                    <ol>
                        <li>Set <var>editContext</var>'s <a data-link-type="dfn|abstract-op" href="#dfn-is-composing"
                                class="internalDFN" id="ref-for-dfn-is-composing-10">is composing</a> to false.</li>
                        <li>
                            <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire">Fire an
                                event</a> named
                            <a href="https://w3c.github.io/uievents/#event-type-compositionend">compositionend</a>
                            at <var>editContext</var> using <a data-link-type="interface" data-lt="CompositionEvent"
                                href="https://www.w3.org/TR/uievents/#compositionevent"><code>CompositionEvent</code></a>.
                        </li>
                    </ol>
                </div>

            </section>
            <section id="determine-the-active-editcontext">
                <div class="header-wrapper">
                    <h4 id="x3-1-9-determine-the-active-editcontext"><bdi class="secno">3.1.9 </bdi><dfn
                            id="dfn-determine-the-active-editcontext" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">Determine the active EditContext</dfn></h4><a class="self-link"
                        href="#determine-the-active-editcontext" aria-label="Permalink for Section 3.1.9"></a>
                </div>
                <div class="algorithm">
                    <dl>
                        <dt>Input</dt>
                        <dd><var>document</var>, a <a data-link-type="interface" data-lt="Document"
                                href="https://dom.spec.whatwg.org/#document"><code>Document</code></a></dd>
                        <dt>Output</dt>
                        <dd>An <a data-link-type="idl" data-lt="EditContext" href="#dom-editcontext" class="internalDFN"
                                id="ref-for-dom-editcontext-31"><code>EditContext</code></a>, or null.</dd>
                    </dl>
                    <ol>
                        <li>Let <var>traversable</var> be <var>document</var>'s <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/document-sequences.html#node-navigable">node
                                navigable</a>'s <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-traversable">top-level
                                traversable</a>.</li>
                        <li>If <var>traversable</var> is null, return null.</li>
                        <li>
                            Let <var>focused</var> be the <a
                                href="https://html.spec.whatwg.org/multipage/interaction.html#dom-anchor">DOM anchor</a>
                            of the <a
                                href="https://html.spec.whatwg.org/multipage/interaction.html#currently-focused-area-of-a-top-level-traversable">currently
                                focused area of a top-level traversable</a>
                            given <var>traversable</var>.
                        </li>
                        <li>
                            <p>If <var>focused</var> is null or if the <a data-link-type="dfn"
                                    href="https://dom.spec.whatwg.org/#concept-shadow-including-root">shadow-including
                                    root</a> of <var>focused</var> is not <var>document</var>, return null.</p>
                            <div class="note" role="note" id="issue-container-generatedID-8">
                                <div role="heading" class="note-title marker" id="h-note-8" aria-level="4">
                                    <span>Note</span>
                                </div>
                                <p class="">
                                    The purpose of getting <var>focusable</var> through the <a data-link-type="dfn"
                                        href="https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-traversable">top-level
                                        traversable</a> is that
                                    we want there to be only one <a data-link-type="dfn|abstract-op"
                                        href="#dfn-active-editcontext" class="internalDFN"
                                        id="ref-for-dfn-active-editcontext-11">active EditContext</a> at a time per
                                    <a data-link-type="dfn"
                                        href="https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-traversable">top-level
                                        traversable</a>. So if system focus is in some other document, this
                                    document can't have an <a data-link-type="dfn|abstract-op"
                                        href="#dfn-active-editcontext" class="internalDFN"
                                        id="ref-for-dfn-active-editcontext-12">active EditContext</a>.
                                </p>
                            </div>
                        </li>
                        <li>Let <var>editContext</var> be null.</li>
                        <li>While <var>focused</var> is not null and <var>focused</var> is <a
                                href="https://w3c.github.io/editing/docs/execCommand/#editable">editable</a>:
                            <ol>
                                <li>Set <var>editContext</var> to the value of <var>focused</var>'s internal
                                    [[EditContext]] slot.</li>
                                <li>Let <var>parent</var> be <var>focused</var>'s <a
                                        href="https://dom.spec.whatwg.org/#concept-tree-parent">parent</a>.</li>
                                <li>
                                    If <var>parent</var> is null and <var>focused</var>'s <a
                                        href="https://dom.spec.whatwg.org/#concept-tree-root">root</a>
                                    is a <a data-link-type="dfn"
                                        href="https://dom.spec.whatwg.org/#concept-shadow-root">shadow root</a>, let
                                    <var>parent</var> be <var>focused</var>'s
                                    <a href="https://dom.spec.whatwg.org/#concept-tree-root">root</a>'s
                                    <a href="https://dom.spec.whatwg.org/#concept-documentfragment-host">host</a>.
                                </li>
                                <li>Set <var>focused</var> to <var>parent</var>.</li>
                            </ol>
                        </li>
                        <li>Return <var>editContext</var>.</li>
                    </ol>
                    <div class="note" role="note" id="issue-container-generatedID-9">
                        <div role="heading" class="note-title marker" id="h-note-9" aria-level="4"><span>Note</span>
                        </div>
                        <p class="">
                            If an <a data-link-type="idl" data-lt="EditContext" href="#dom-editcontext"
                                class="internalDFN" id="ref-for-dom-editcontext-32"><code>EditContext</code></a>'s <a
                                data-link-type="dfn|abstract-op" href="#dfn-associated-element" class="internalDFN"
                                id="ref-for-dfn-associated-element-20">associated element</a>'s parent is editable, that
                            <a data-link-type="idl" data-lt="EditContext" href="#dom-editcontext" class="internalDFN"
                                id="ref-for-dom-editcontext-33"><code>EditContext</code></a>
                            can't become the <a data-link-type="dfn|abstract-op" href="#dfn-active-editcontext"
                                class="internalDFN" id="ref-for-dfn-active-editcontext-13">active EditContext</a>. This
                            is the case regardless of whether that
                            parent is editable due to another <a data-link-type="idl" data-lt="EditContext"
                                href="#dom-editcontext" class="internalDFN"
                                id="ref-for-dom-editcontext-34"><code>EditContext</code></a> or due to
                            <code><a data-link-type="element-attr" href="https://html.spec.whatwg.org/multipage/interaction.html#attr-contenteditable">contenteditable</a></code>.
                        </p>
                    </div>
                </div>

            </section>
        </section>
        <section id="editcontext-interface-0">
            <div class="header-wrapper">
                <h3 id="editcontext-interface"><bdi class="secno">3.2 </bdi>EditContext Interface</h3><a
                    class="self-link" href="#editcontext-interface" aria-label="Permalink for Section 3.2"></a>
            </div>
            <pre class="idl def" id="webidl-1706524934"><span class="idlHeader"><a class="self-link" href="#webidl-1706524934">WebIDL</a></span><code><span data-idl="" class="idlDictionary" id="idl-def-editcontextinit" data-title="EditContextInit">dictionary <dfn data-export="" data-dfn-type="dictionary" id="dom-editcontextinit" data-idl="dictionary" data-title="EditContextInit" data-dfn-for="" class="idlID" tabindex="0" aria-haspopup="dialog"><code>EditContextInit</code></dfn> {<span data-idl="" class="idlMember" id="idl-def-editcontextinit-text" data-title="text" data-dfn-for="EditContextInit"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <dfn data-export="" data-dfn-type="dict-member" id="dom-editcontextinit-text" data-idl="field" data-title="text" data-dfn-for="EditContextInit" data-type="DOMString" class="idlName" tabindex="0" aria-haspopup="dialog"><code>text</code></dfn>;</span><span data-idl="" class="idlMember" id="idl-def-editcontextinit-selectionstart" data-title="selectionStart" data-dfn-for="EditContextInit"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="dict-member" id="dom-editcontextinit-selectionstart" data-idl="field" data-title="selectionStart" data-dfn-for="EditContextInit" data-type="unsigned long" class="idlName" tabindex="0" aria-haspopup="dialog"><code>selectionStart</code></dfn>;</span><span data-idl="" class="idlMember" id="idl-def-editcontextinit-selectionend" data-title="selectionEnd" data-dfn-for="EditContextInit"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="dict-member" id="dom-editcontextinit-selectionend" data-idl="field" data-title="selectionEnd" data-dfn-for="EditContextInit" data-type="unsigned long" class="idlName" tabindex="0" aria-haspopup="dialog"><code>selectionEnd</code></dfn>;</span>
};</span><span data-idl="" class="idlInterface" id="idl-def-editcontext" data-title="EditContext">

[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=Window</span>]
interface <dfn data-export="" data-dfn-type="interface" id="dom-editcontext" data-idl="interface" data-title="EditContext" data-dfn-for="" class="idlID" tabindex="0" aria-haspopup="dialog"><code>EditContext</code></dfn> : <span class="idlSuperclass"><a data-link-type="interface" href="https://dom.spec.whatwg.org/#eventtarget">EventTarget</a></span> {<span data-idl="" class="idlConstructor" id="idl-def-editcontext-constructor-options" data-title="constructor" data-dfn-for="EditContext">
    <dfn data-export="" data-dfn-type="constructor" id="dom-editcontext-constructor" data-idl="constructor" data-title="constructor" data-dfn-for="EditContext" data-lt="constructor()|constructor(options)" data-local-lt="EditContext.constructor|EditContext.constructor()|constructor" tabindex="0" aria-haspopup="dialog"><code>constructor</code></dfn>(optional<span class="idlType"> <a data-link-type="idl" href="#dom-editcontextinit" class="internalDFN" id="ref-for-dom-editcontextinit-1"><code>EditContextInit</code></a></span> <span class="idlParamName">options</span> = {});</span><span data-idl="" class="idlMethod" id="idl-def-editcontext-updatetext-rangestart-rangeend-text" data-title="updateText" data-dfn-for="EditContext"><span class="idlType">

    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a></span> <dfn data-export="" data-dfn-type="method" id="dom-editcontext-updatetext" data-idl="operation" data-title="updateText" data-dfn-for="EditContext" data-type="undefined" data-lt="updateText()|updateText(rangeStart, rangeEnd, text)" data-local-lt="EditContext.updateText|EditContext.updateText()|updateText" class="idlName" tabindex="0" aria-haspopup="dialog"><code>updateText</code></dfn>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <span class="idlParamName">rangeStart</span>,<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <span class="idlParamName">rangeEnd</span>,<span class="idlType">
        <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">text</span>);</span><span data-idl="" class="idlMethod" id="idl-def-editcontext-updateselection-start-end" data-title="updateSelection" data-dfn-for="EditContext"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a></span> <dfn data-export="" data-dfn-type="method" id="dom-editcontext-updateselection" data-idl="operation" data-title="updateSelection" data-dfn-for="EditContext" data-type="undefined" data-lt="updateSelection()|updateSelection(start, end)" data-local-lt="EditContext.updateSelection|EditContext.updateSelection()|updateSelection" class="idlName" tabindex="0" aria-haspopup="dialog"><code>updateSelection</code></dfn>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <span class="idlParamName">start</span>,<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <span class="idlParamName">end</span>);</span><span data-idl="" class="idlMethod" id="idl-def-editcontext-updatecontrolbounds-controlbounds" data-title="updateControlBounds" data-dfn-for="EditContext"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a></span> <dfn data-export="" data-dfn-type="method" id="dom-editcontext-updatecontrolbounds" data-idl="operation" data-title="updateControlBounds" data-dfn-for="EditContext" data-type="undefined" data-lt="updateControlBounds()|updateControlBounds(controlBounds)" data-local-lt="EditContext.updateControlBounds|EditContext.updateControlBounds()|updateControlBounds" class="idlName" tabindex="0" aria-haspopup="dialog"><code>updateControlBounds</code></dfn>(<span class="idlType"><a data-link-type="interface" href="https://www.w3.org/TR/geometry-1/#domrect">DOMRect</a></span> <span class="idlParamName">controlBounds</span>);</span><span data-idl="" class="idlMethod" id="idl-def-editcontext-updateselectionbounds-selectionbounds" data-title="updateSelectionBounds" data-dfn-for="EditContext"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a></span> <dfn data-export="" data-dfn-type="method" id="dom-editcontext-updateselectionbounds" data-idl="operation" data-title="updateSelectionBounds" data-dfn-for="EditContext" data-type="undefined" data-lt="updateSelectionBounds()|updateSelectionBounds(selectionBounds)" data-local-lt="EditContext.updateSelectionBounds|EditContext.updateSelectionBounds()|updateSelectionBounds" class="idlName" tabindex="0" aria-haspopup="dialog"><code>updateSelectionBounds</code></dfn>(<span class="idlType"><a data-link-type="interface" href="https://www.w3.org/TR/geometry-1/#domrect">DOMRect</a></span> <span class="idlParamName">selectionBounds</span>);</span><span data-idl="" class="idlMethod" id="idl-def-editcontext-updatecharacterbounds-rangestart-characterbounds" data-title="updateCharacterBounds" data-dfn-for="EditContext"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a></span> <dfn data-export="" data-dfn-type="method" id="dom-editcontext-updatecharacterbounds" data-idl="operation" data-title="updateCharacterBounds" data-dfn-for="EditContext" data-type="undefined" data-lt="updateCharacterBounds()|updateCharacterBounds(rangeStart, characterBounds)" data-local-lt="EditContext.updateCharacterBounds|EditContext.updateCharacterBounds()|updateCharacterBounds" class="idlName" tabindex="0" aria-haspopup="dialog"><code>updateCharacterBounds</code></dfn>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <span class="idlParamName">rangeStart</span>,<span class="idlType"> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="interface" href="https://www.w3.org/TR/geometry-1/#domrect">DOMRect</a>&gt;</span> <span class="idlParamName">characterBounds</span>);</span><span data-idl="" class="idlMethod" id="idl-def-editcontext-attachedelements" data-title="attachedElements" data-dfn-for="EditContext"><span class="idlType">

    <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="interface" href="https://html.spec.whatwg.org/multipage/dom.html#htmlelement">HTMLElement</a>&gt;</span> <dfn data-export="" data-dfn-type="method" id="dom-editcontext-attachedelements" data-idl="operation" data-title="attachedElements" data-dfn-for="EditContext" data-type="sequence" data-lt="attachedElements()" data-local-lt="EditContext.attachedElements|EditContext.attachedElements()|attachedElements" class="idlName" tabindex="0" aria-haspopup="dialog"><code>attachedElements</code></dfn>();</span><span data-idl="" class="idlAttribute" id="idl-def-editcontext-text" data-title="text" data-dfn-for="EditContext">

    readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <dfn data-export="" data-dfn-type="attribute" id="dom-editcontext-text" data-idl="attribute" data-title="text" data-dfn-for="EditContext" data-type="DOMString" data-lt="text" data-local-lt="EditContext.text" class="idlName" tabindex="0" aria-haspopup="dialog"><code>text</code></dfn>;</span><span data-idl="" class="idlAttribute" id="idl-def-editcontext-selectionstart" data-title="selectionStart" data-dfn-for="EditContext">
    readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="attribute" id="dom-editcontext-selectionstart" data-idl="attribute" data-title="selectionStart" data-dfn-for="EditContext" data-type="unsigned long" data-lt="selectionStart" data-local-lt="EditContext.selectionStart" class="idlName" tabindex="0" aria-haspopup="dialog"><code>selectionStart</code></dfn>;</span><span data-idl="" class="idlAttribute" id="idl-def-editcontext-selectionend" data-title="selectionEnd" data-dfn-for="EditContext">
    readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="attribute" id="dom-editcontext-selectionend" data-idl="attribute" data-title="selectionEnd" data-dfn-for="EditContext" data-type="unsigned long" data-lt="selectionEnd" data-local-lt="EditContext.selectionEnd" class="idlName" tabindex="0" aria-haspopup="dialog"><code>selectionEnd</code></dfn>;</span><span data-idl="" class="idlAttribute" id="idl-def-editcontext-characterboundsrangestart" data-title="characterBoundsRangeStart" data-dfn-for="EditContext">
    readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="attribute" id="dom-editcontext-characterboundsrangestart" data-idl="attribute" data-title="characterBoundsRangeStart" data-dfn-for="EditContext" data-type="unsigned long" data-lt="characterBoundsRangeStart" data-local-lt="EditContext.characterBoundsRangeStart" class="idlName" tabindex="0" aria-haspopup="dialog"><code>characterBoundsRangeStart</code></dfn>;</span><span data-idl="" class="idlMethod" id="idl-def-editcontext-characterbounds" data-title="characterBounds" data-dfn-for="EditContext"><span class="idlType">
    <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="interface" href="https://www.w3.org/TR/geometry-1/#domrect">DOMRect</a>&gt;</span> <dfn data-export="" data-dfn-type="method" id="dom-editcontext-characterbounds" data-idl="operation" data-title="characterBounds" data-dfn-for="EditContext" data-type="sequence" data-lt="characterBounds()" data-local-lt="EditContext.characterBounds|EditContext.characterBounds()|characterBounds" class="idlName" tabindex="0" aria-haspopup="dialog"><code>characterBounds</code></dfn>();</span><span data-idl="" class="idlAttribute" id="idl-def-editcontext-ontextupdate" data-title="ontextupdate" data-dfn-for="EditContext">

    attribute<span class="idlType"> <a data-link-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span> <dfn data-export="" data-dfn-type="attribute" id="dom-editcontext-ontextupdate" data-idl="attribute" data-title="ontextupdate" data-dfn-for="EditContext" data-type="EventHandler" data-lt="ontextupdate" data-local-lt="EditContext.ontextupdate" class="idlName" tabindex="0" aria-haspopup="dialog"><code>ontextupdate</code></dfn>;</span><span data-idl="" class="idlAttribute" id="idl-def-editcontext-ontextformatupdate" data-title="ontextformatupdate" data-dfn-for="EditContext">
    attribute<span class="idlType"> <a data-link-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span> <dfn data-export="" data-dfn-type="attribute" id="dom-editcontext-ontextformatupdate" data-idl="attribute" data-title="ontextformatupdate" data-dfn-for="EditContext" data-type="EventHandler" data-lt="ontextformatupdate" data-local-lt="EditContext.ontextformatupdate" class="idlName" tabindex="0" aria-haspopup="dialog"><code>ontextformatupdate</code></dfn>;</span><span data-idl="" class="idlAttribute" id="idl-def-editcontext-oncharacterboundsupdate" data-title="oncharacterboundsupdate" data-dfn-for="EditContext">
    attribute<span class="idlType"> <a data-link-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span> <dfn data-export="" data-dfn-type="attribute" id="dom-editcontext-oncharacterboundsupdate" data-idl="attribute" data-title="oncharacterboundsupdate" data-dfn-for="EditContext" data-type="EventHandler" data-lt="oncharacterboundsupdate" data-local-lt="EditContext.oncharacterboundsupdate" class="idlName" tabindex="0" aria-haspopup="dialog"><code>oncharacterboundsupdate</code></dfn>;</span><span data-idl="" class="idlAttribute" id="idl-def-editcontext-oncompositionstart" data-title="oncompositionstart" data-dfn-for="EditContext">
    attribute<span class="idlType"> <a data-link-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span> <dfn data-export="" data-dfn-type="attribute" id="dom-editcontext-oncompositionstart" data-idl="attribute" data-title="oncompositionstart" data-dfn-for="EditContext" data-type="EventHandler" data-lt="oncompositionstart" data-local-lt="EditContext.oncompositionstart" class="idlName" tabindex="0" aria-haspopup="dialog"><code>oncompositionstart</code></dfn>;</span><span data-idl="" class="idlAttribute" id="idl-def-editcontext-oncompositionend" data-title="oncompositionend" data-dfn-for="EditContext">
    attribute<span class="idlType"> <a data-link-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span> <dfn data-export="" data-dfn-type="attribute" id="dom-editcontext-oncompositionend" data-idl="attribute" data-title="oncompositionend" data-dfn-for="EditContext" data-type="EventHandler" data-lt="oncompositionend" data-local-lt="EditContext.oncompositionend" class="idlName" tabindex="0" aria-haspopup="dialog"><code>oncompositionend</code></dfn>;</span>
};</span></code></pre>
            <dl>
                <dt>text</dt>
                <dd>The <a data-link-type="idl" href="#dom-editcontext-text" class="internalDFN"
                        id="ref-for-dom-editcontext-text-1"><code>text</code></a> getter steps are to return <a
                        data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this">this</a>'s <a
                        data-link-type="dfn|abstract-op" href="#dfn-text" class="internalDFN"
                        id="ref-for-dfn-text-15">text</a>.</dd>

                <dt>selectionStart</dt>
                <dd>The <a data-link-type="idl" href="#dom-editcontext-selectionstart" class="internalDFN"
                        id="ref-for-dom-editcontext-selectionstart-1"><code>selectionStart</code></a> getter steps are
                    to return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this">this</a>'s <a
                        data-link-type="dfn|abstract-op" href="#dfn-selection-start" class="internalDFN"
                        id="ref-for-dfn-selection-start-5">selection start</a>.</dd>

                <dt>selectionEnd</dt>
                <dd>The <a data-link-type="idl" href="#dom-editcontext-selectionend" class="internalDFN"
                        id="ref-for-dom-editcontext-selectionend-1"><code>selectionEnd</code></a> getter steps are to
                    return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this">this</a>'s <a
                        data-link-type="dfn|abstract-op" href="#dfn-selection-end" class="internalDFN"
                        id="ref-for-dfn-selection-end-5">selection end</a>.</dd>

                <dt>characterBounds</dt>
                <dd>The <a data-link-type="idl" href="#dom-editcontext-characterbounds" class="internalDFN"
                        id="ref-for-dom-editcontext-characterbounds-1"><code>characterBounds</code></a> getter steps are
                    to return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this">this</a>'s <a
                        data-link-type="dfn|abstract-op" href="#dfn-codepoint-rects" class="internalDFN"
                        id="ref-for-dfn-codepoint-rects-4">codepoint rects</a>.</dd>

                <dt>characterBoundsRangeStart</dt>
                <dd>The <a data-link-type="idl" href="#dom-editcontext-characterboundsrangestart" class="internalDFN"
                        id="ref-for-dom-editcontext-characterboundsrangestart-1"><code>characterBoundsRangeStart</code></a>
                    getter steps are to return <a data-link-type="dfn"
                        href="https://webidl.spec.whatwg.org/#this">this</a>'s <a data-link-type="dfn|abstract-op"
                        href="#dfn-codepoint-rects-start-index" class="internalDFN"
                        id="ref-for-dfn-codepoint-rects-start-index-1">codepoint rects start index</a>.</dd>

                <dt>updateText() method</dt>
                <dd>
                    <p>
                        The method must follow these steps:
                    </p>
                    <div class="algorithm">
                        <dl>
                            <dt>Input</dt>
                            <dd><var>rangeStart</var>, an unsigned long</dd>
                            <dd><var>rangeEnd</var>, an unsigned long</dd>
                            <dd><var>newText</var>, a DOMString</dd>
                            <dt>Output</dt>
                            <dd>None</dd>
                        </dl>
                        <ol>
                            <li>
                                Replace the substring of <a data-link-type="dfn|abstract-op" href="#dfn-text"
                                    class="internalDFN" id="ref-for-dfn-text-16">text</a> in the range of
                                <var>rangeStart</var> and <var>rangeEnd</var> with <var>newText</var>
                                <div class="note" role="note" id="issue-container-generatedID-10">
                                    <div role="heading" class="note-title marker" id="h-note-10" aria-level="3">
                                        <span>Note</span>
                                    </div>
                                    <div class="">It's permissible that <var>rangeStart</var> &gt; <var>rangeEnd</var>.
                                        The substring between the indices should be replaced in the same way as when
                                        <var>rangeStart</var> &lt;= <var>rangeEnd</var>.
                                    </div>
                                </div>
                            </li>
                        </ol>
                    </div>
                </dd>
                <dt>updateSelection() method</dt>
                <dd>
                    <p>
                        The method must follow these steps:
                    </p>
                    <div class="algorithm">
                        <dl>
                            <dt>Input</dt>
                            <dd><var>start</var>, an unsigned long</dd>
                            <dd><var>end</var>, an unsigned long</dd>
                            <dt>Output</dt>
                            <dd>None</dd>
                        </dl>
                        <ol>
                            <li>
                                set <a data-link-type="dfn|abstract-op" href="#dfn-selection-start" class="internalDFN"
                                    id="ref-for-dfn-selection-start-6">selection start</a> to <var>start</var>
                            </li>
                            <li>
                                set <a data-link-type="dfn|abstract-op" href="#dfn-selection-end" class="internalDFN"
                                    id="ref-for-dfn-selection-end-6">selection end</a> to <var>end</var>
                            </li>
                        </ol>
                    </div>
                </dd>
                <dt>updateSelectionBounds() method</dt>
                <dd>
                    <p>
                        The method must follow these steps:
                    </p>
                    <div class="algorithm">
                        <dl>
                            <dt>Input</dt>
                            <dd><var>selectionBounds</var>, a <a data-link-type="interface" data-lt="DOMRect"
                                    href="https://www.w3.org/TR/geometry-1/#domrect"><code>DOMRect</code></a></dd>
                            <dt>Output</dt>
                            <dd>None</dd>
                        </dl>
                        <ol>
                            <li>
                                set <a data-link-type="dfn|abstract-op" href="#dfn-selection-bounds" class="internalDFN"
                                    id="ref-for-dfn-selection-bounds-3">selection bounds</a> to
                                <var>selectionBounds</var>
                            </li>
                        </ol>
                    </div>
                </dd>
                <dt>updateControlBounds() method</dt>
                <dd>
                    <p>
                        The method must follow these steps:
                    </p>
                    <div class="algorithm">
                        <dl>
                            <dt>Input</dt>
                            <dd><var>controlBounds</var>, a <a data-link-type="interface" data-lt="DOMRect"
                                    href="https://www.w3.org/TR/geometry-1/#domrect"><code>DOMRect</code></a></dd>
                            <dt>Output</dt>
                            <dd>None</dd>
                        </dl>
                        <ol>
                            <li>
                                set <a data-link-type="dfn|abstract-op" href="#dfn-control-bounds" class="internalDFN"
                                    id="ref-for-dfn-control-bounds-3">control bounds</a> to <var>controlBounds</var>
                            </li>
                        </ol>
                    </div>
                </dd>
                <dt>updateCharacterBounds() method</dt>
                <dd>
                    <p>
                        The method must follow these steps:
                    </p>
                    <div class="algorithm">
                        <dl>
                            <dt>Input</dt>
                            <dd><var>rangeStart</var>, an unsigned long</dd>
                            <dd><var>characterBounds</var>, an array of <a data-link-type="interface" data-lt="DOMRect"
                                    href="https://www.w3.org/TR/geometry-1/#domrect"><code>DOMRect</code></a></dd>
                            <dt>Output</dt>
                            <dd>None</dd>
                        </dl>
                        <ol>
                            <li>
                                set <a data-link-type="dfn|abstract-op" href="#dfn-codepoint-rects-start-index"
                                    class="internalDFN" id="ref-for-dfn-codepoint-rects-start-index-2">codepoint rects
                                    start index</a> to <var>rangeStart</var>.
                            </li>
                            <li>
                                set <a data-link-type="dfn|abstract-op" href="#dfn-codepoint-rects" class="internalDFN"
                                    id="ref-for-dfn-codepoint-rects-5">codepoint rects</a> to
                                <var>characterBounds</var>.
                            </li>
                        </ol>
                    </div>
                </dd>
                <dt>attachedElements() method</dt>
                <dd>
                    <p>The method returns a list with one item which is the the <a data-link-type="idl"
                            data-lt="EditContext" href="#dom-editcontext" class="internalDFN"
                            id="ref-for-dom-editcontext-35"><code>EditContext</code></a>'s <a
                            href="#dfn-associated-element" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-associated-element-21">associated element</a>, or an empty list if the <a
                            data-link-type="idl" data-lt="EditContext" href="#dom-editcontext" class="internalDFN"
                            id="ref-for-dom-editcontext-36"><code>EditContext</code></a>'s <a
                            href="#dfn-associated-element" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-associated-element-22">associated element</a> is null.</p>
                    <div class="note" role="note" id="issue-container-generatedID-11">
                        <div role="heading" class="note-title marker" id="h-note-11" aria-level="3"><span>Note</span>
                        </div>
                        <p class="">
                            This method returns a list instead of a single element for forward compatibility if <a
                                data-link-type="idl" data-lt="EditContext" href="#dom-editcontext" class="internalDFN"
                                id="ref-for-dom-editcontext-37"><code>EditContext</code></a> is ever granted the ability
                            to have multiple <a href="#dfn-associated-element" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-associated-element-23">associated elements</a>.
                        </p>
                    </div>
                </dd>

                <dt>ontextupdate</dt>
                <dd>
                    <p>The event handler for <a data-link-type="idl" data-lt="TextUpdateEvent"
                            href="#dom-textupdateevent" class="internalDFN"
                            id="ref-for-dom-textupdateevent-4"><code>TextUpdateEvent</code></a>.</p>
                </dd>

                <dt>oncharacterboundsupdate</dt>
                <dd>
                    <p>The event handler for <a data-link-type="idl" data-lt="CharacterBoundsUpdateEvent"
                            href="#dom-characterboundsupdateevent" class="internalDFN"
                            id="ref-for-dom-characterboundsupdateevent-7"><code>CharacterBoundsUpdateEvent</code></a>.
                    </p>
                </dd>

                <dt>ontextformatupdate</dt>
                <dd>
                    <p>The event handler for <a data-link-type="idl" data-lt="TextFormatUpdateEvent"
                            href="#dom-textformatupdateevent" class="internalDFN"
                            id="ref-for-dom-textformatupdateevent-6"><code>TextFormatUpdateEvent</code></a>.</p>
                </dd>

                <dt>oncompositionstart</dt>
                <dd>
                    <p>The event handler for the <a
                            href="https://w3c.github.io/uievents/#event-type-compositionstart">compositionstart</a>
                        event.</p>
                </dd>

                <dt>oncompositionend</dt>
                <dd>
                    <p>The event handler for the <a
                            href="https://w3c.github.io/uievents/#event-type-compositionend">compositionend</a> event.
                    </p>
                </dd>
            </dl>
        </section>
    </section>

    <section data-dfn-for="EditContextEvents" id="editcontext-events-0">
        <div class="header-wrapper">
            <h2 id="x4-editcontext-events"><bdi class="secno">4. </bdi>EditContext Events</h2><a class="self-link"
                href="#editcontext-events-0" aria-label="Permalink for Section 4."></a>
        </div>

        <section id="textupdateevent">
            <div class="header-wrapper">
                <h3 id="x4-1-textupdateevent"><bdi class="secno">4.1 </bdi>TextUpdateEvent</h3><a class="self-link"
                    href="#textupdateevent" aria-label="Permalink for Section 4.1"></a>
            </div>

            <pre class="idl def" id="webidl-1353943793"><span class="idlHeader"><a class="self-link" href="#webidl-1353943793">WebIDL</a></span><code><span data-idl="" class="idlDictionary" id="idl-def-textupdateeventinit" data-title="TextUpdateEventInit">dictionary <dfn data-export="" data-dfn-type="dictionary" id="dom-textupdateeventinit" data-idl="dictionary" data-title="TextUpdateEventInit" data-dfn-for="" class="idlID" tabindex="0" aria-haspopup="dialog"><code>TextUpdateEventInit</code></dfn> : <span class="idlSuperclass"><a data-link-type="dictionary" href="https://dom.spec.whatwg.org/#dictdef-eventinit">EventInit</a></span> {<span data-idl="" class="idlMember" id="idl-def-textupdateeventinit-updaterangestart" data-title="updateRangeStart" data-dfn-for="TextUpdateEventInit"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="dict-member" id="dom-textupdateeventinit-updaterangestart" data-idl="field" data-title="updateRangeStart" data-dfn-for="TextUpdateEventInit" data-type="unsigned long" class="idlName" tabindex="0" aria-haspopup="dialog"><code>updateRangeStart</code></dfn>;</span><span data-idl="" class="idlMember" id="idl-def-textupdateeventinit-updaterangeend" data-title="updateRangeEnd" data-dfn-for="TextUpdateEventInit"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="dict-member" id="dom-textupdateeventinit-updaterangeend" data-idl="field" data-title="updateRangeEnd" data-dfn-for="TextUpdateEventInit" data-type="unsigned long" class="idlName" tabindex="0" aria-haspopup="dialog"><code>updateRangeEnd</code></dfn>;</span><span data-idl="" class="idlMember" id="idl-def-textupdateeventinit-text" data-title="text" data-dfn-for="TextUpdateEventInit"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <dfn data-export="" data-dfn-type="dict-member" id="dom-textupdateeventinit-text" data-idl="field" data-title="text" data-dfn-for="TextUpdateEventInit" data-type="DOMString" class="idlName" tabindex="0" aria-haspopup="dialog"><code>text</code></dfn>;</span><span data-idl="" class="idlMember" id="idl-def-textupdateeventinit-selectionstart" data-title="selectionStart" data-dfn-for="TextUpdateEventInit"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="dict-member" id="dom-textupdateeventinit-selectionstart" data-idl="field" data-title="selectionStart" data-dfn-for="TextUpdateEventInit" data-type="unsigned long" class="idlName" tabindex="0" aria-haspopup="dialog"><code>selectionStart</code></dfn>;</span><span data-idl="" class="idlMember" id="idl-def-textupdateeventinit-selectionend" data-title="selectionEnd" data-dfn-for="TextUpdateEventInit"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="dict-member" id="dom-textupdateeventinit-selectionend" data-idl="field" data-title="selectionEnd" data-dfn-for="TextUpdateEventInit" data-type="unsigned long" class="idlName" tabindex="0" aria-haspopup="dialog"><code>selectionEnd</code></dfn>;</span><span data-idl="" class="idlMember" id="idl-def-textupdateeventinit-compositionstart" data-title="compositionStart" data-dfn-for="TextUpdateEventInit"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="dict-member" id="dom-textupdateeventinit-compositionstart" data-idl="field" data-title="compositionStart" data-dfn-for="TextUpdateEventInit" data-type="unsigned long" class="idlName" tabindex="0" aria-haspopup="dialog"><code>compositionStart</code></dfn>;</span><span data-idl="" class="idlMember" id="idl-def-textupdateeventinit-compositionend" data-title="compositionEnd" data-dfn-for="TextUpdateEventInit"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="dict-member" id="dom-textupdateeventinit-compositionend" data-idl="field" data-title="compositionEnd" data-dfn-for="TextUpdateEventInit" data-type="unsigned long" class="idlName" tabindex="0" aria-haspopup="dialog"><code>compositionEnd</code></dfn>;</span>
};</span><span data-idl="" class="idlInterface" id="idl-def-textupdateevent" data-title="TextUpdateEvent">

[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=Window</span>]
interface <dfn data-export="" data-dfn-type="interface" id="dom-textupdateevent" data-idl="interface" data-title="TextUpdateEvent" data-dfn-for="" class="idlID" tabindex="0" aria-haspopup="dialog"><code>TextUpdateEvent</code></dfn> : <span class="idlSuperclass"><a data-link-type="interface" href="https://dom.spec.whatwg.org/#event">Event</a></span> {<span data-idl="" class="idlConstructor" id="idl-def-textupdateevent-constructor-type-options" data-title="constructor" data-dfn-for="TextUpdateEvent">
    <dfn data-export="" data-dfn-type="constructor" id="dom-textupdateevent-constructor" data-idl="constructor" data-title="constructor" data-dfn-for="TextUpdateEvent" data-lt="constructor()|constructor(type)|constructor(type, options)" data-local-lt="TextUpdateEvent.constructor|TextUpdateEvent.constructor()|constructor" tabindex="0" aria-haspopup="dialog"><code>constructor</code></dfn>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">type</span>, optional<span class="idlType"> <a data-link-type="idl" href="#dom-textupdateeventinit" class="internalDFN" id="ref-for-dom-textupdateeventinit-1"><code>TextUpdateEventInit</code></a></span> <span class="idlParamName">options</span> = {});</span><span data-idl="" class="idlAttribute" id="idl-def-textupdateevent-updaterangestart" data-title="updateRangeStart" data-dfn-for="TextUpdateEvent">
    readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="attribute" id="dom-textupdateevent-updaterangestart" data-idl="attribute" data-title="updateRangeStart" data-dfn-for="TextUpdateEvent" data-type="unsigned long" data-lt="updateRangeStart" data-local-lt="TextUpdateEvent.updateRangeStart" class="idlName" tabindex="0" aria-haspopup="dialog"><code>updateRangeStart</code></dfn>;</span><span data-idl="" class="idlAttribute" id="idl-def-textupdateevent-updaterangeend" data-title="updateRangeEnd" data-dfn-for="TextUpdateEvent">
    readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="attribute" id="dom-textupdateevent-updaterangeend" data-idl="attribute" data-title="updateRangeEnd" data-dfn-for="TextUpdateEvent" data-type="unsigned long" data-lt="updateRangeEnd" data-local-lt="TextUpdateEvent.updateRangeEnd" class="idlName" tabindex="0" aria-haspopup="dialog"><code>updateRangeEnd</code></dfn>;</span><span data-idl="" class="idlAttribute" id="idl-def-textupdateevent-text" data-title="text" data-dfn-for="TextUpdateEvent">
    readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <dfn data-export="" data-dfn-type="attribute" id="dom-textupdateevent-text" data-idl="attribute" data-title="text" data-dfn-for="TextUpdateEvent" data-type="DOMString" data-lt="text" data-local-lt="TextUpdateEvent.text" class="idlName" tabindex="0" aria-haspopup="dialog"><code>text</code></dfn>;</span><span data-idl="" class="idlAttribute" id="idl-def-textupdateevent-selectionstart" data-title="selectionStart" data-dfn-for="TextUpdateEvent">
    readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="attribute" id="dom-textupdateevent-selectionstart" data-idl="attribute" data-title="selectionStart" data-dfn-for="TextUpdateEvent" data-type="unsigned long" data-lt="selectionStart" data-local-lt="TextUpdateEvent.selectionStart" class="idlName" tabindex="0" aria-haspopup="dialog"><code>selectionStart</code></dfn>;</span><span data-idl="" class="idlAttribute" id="idl-def-textupdateevent-selectionend" data-title="selectionEnd" data-dfn-for="TextUpdateEvent">
    readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="attribute" id="dom-textupdateevent-selectionend" data-idl="attribute" data-title="selectionEnd" data-dfn-for="TextUpdateEvent" data-type="unsigned long" data-lt="selectionEnd" data-local-lt="TextUpdateEvent.selectionEnd" class="idlName" tabindex="0" aria-haspopup="dialog"><code>selectionEnd</code></dfn>;</span>
};</span></code></pre>
            <dl>
                <dt><a data-link-type="idl" href="#dom-textupdateevent-updaterangestart" class="internalDFN"
                        id="ref-for-dom-textupdateevent-updaterangestart-1"><code>updateRangeStart</code></a>, of type
                    unsigned long, readonly</dt>
                <dd>The start position of the range that is to be replaced.</dd>

                <dt><a data-link-type="idl" href="#dom-textupdateevent-updaterangeend" class="internalDFN"
                        id="ref-for-dom-textupdateevent-updaterangeend-1"><code>updateRangeEnd</code></a>, of type
                    unsigned long, readonly</dt>
                <dd>The end position of the range that is to be replaced.</dd>

                <dt><a data-link-type="idl" href="#dom-textupdateevent-text" class="internalDFN"
                        id="ref-for-dom-textupdateevent-text-2"><code>text</code></a>, of type <a
                        data-link-type="interface" data-lt="DOMString"
                        href="https://webidl.spec.whatwg.org/#idl-DOMString"><code>DOMString</code></a>, readonly</dt>
                <dd>The new string that is to replace the old string in the range.</dd>

                <dt><a data-link-type="idl" href="#dom-textupdateevent-selectionstart" class="internalDFN"
                        id="ref-for-dom-textupdateevent-selectionstart-2"><code>selectionStart</code></a>, of type
                    unsigned long, readonly</dt>
                <dd>The start position of the selection after the text replacement.</dd>

                <dt><a data-link-type="idl" href="#dom-textupdateevent-selectionend" class="internalDFN"
                        id="ref-for-dom-textupdateevent-selectionend-2"><code>selectionEnd</code></a>, of type unsigned
                    long, readonly</dt>
                <dd>The end position of the selection after the text replacement.</dd>
            </dl>
        </section>
        <section id="textformatupdateevent">
            <div class="header-wrapper">
                <h3 id="x4-2-textformatupdateevent"><bdi class="secno">4.2 </bdi>TextFormatUpdateEvent</h3><a
                    class="self-link" href="#textformatupdateevent" aria-label="Permalink for Section 4.2"></a>
            </div>

            <pre class="idl def" id="webidl-1736300795"><span class="idlHeader"><a class="self-link" href="#webidl-1736300795">WebIDL</a></span><code><span data-idl="" class="idlEnum" id="idl-def-underlinestyle" data-title="UnderlineStyle">enum <dfn data-export="" data-dfn-type="enum" id="dom-underlinestyle" data-idl="enum" data-title="UnderlineStyle" data-dfn-for="" class="idlID" tabindex="0" aria-haspopup="dialog"><code>UnderlineStyle</code></dfn> { <span class="idlEnumItem">"<dfn data-export="" data-dfn-type="enum-value" id="dom-underlinestyle-none" data-idl="enum-value" data-title="none" data-dfn-for="UnderlineStyle" tabindex="0" aria-haspopup="dialog"><code>none</code></dfn>"</span>, <span class="idlEnumItem">"<dfn data-export="" data-dfn-type="enum-value" id="dom-underlinestyle-solid" data-idl="enum-value" data-title="solid" data-dfn-for="UnderlineStyle" tabindex="0" aria-haspopup="dialog"><code>solid</code></dfn>"</span>, <span class="idlEnumItem">"<dfn data-export="" data-dfn-type="enum-value" id="dom-underlinestyle-dotted" data-idl="enum-value" data-title="dotted" data-dfn-for="UnderlineStyle" tabindex="0" aria-haspopup="dialog"><code>dotted</code></dfn>"</span>, <span class="idlEnumItem">"<dfn data-export="" data-dfn-type="enum-value" id="dom-underlinestyle-dashed" data-idl="enum-value" data-title="dashed" data-dfn-for="UnderlineStyle" tabindex="0" aria-haspopup="dialog"><code>dashed</code></dfn>"</span>, <span class="idlEnumItem">"<dfn data-export="" data-dfn-type="enum-value" id="dom-underlinestyle-wavy" data-idl="enum-value" data-title="wavy" data-dfn-for="UnderlineStyle" tabindex="0" aria-haspopup="dialog"><code>wavy</code></dfn>"</span> };</span><span data-idl="" class="idlEnum" id="idl-def-underlinethickness" data-title="UnderlineThickness">
enum <dfn data-export="" data-dfn-type="enum" id="dom-underlinethickness" data-idl="enum" data-title="UnderlineThickness" data-dfn-for="" class="idlID" tabindex="0" aria-haspopup="dialog"><code>UnderlineThickness</code></dfn> { <span class="idlEnumItem">"<dfn data-export="" data-dfn-type="enum-value" id="dom-underlinethickness-none" data-idl="enum-value" data-title="none" data-dfn-for="UnderlineThickness" tabindex="0" aria-haspopup="dialog"><code>none</code></dfn>"</span>, <span class="idlEnumItem">"<dfn data-export="" data-dfn-type="enum-value" id="dom-underlinethickness-thin" data-idl="enum-value" data-title="thin" data-dfn-for="UnderlineThickness" tabindex="0" aria-haspopup="dialog"><code>thin</code></dfn>"</span>, <span class="idlEnumItem">"<dfn data-export="" data-dfn-type="enum-value" id="dom-underlinethickness-thick" data-idl="enum-value" data-title="thick" data-dfn-for="UnderlineThickness" tabindex="0" aria-haspopup="dialog"><code>thick</code></dfn>"</span> };</span><span data-idl="" class="idlDictionary" id="idl-def-textformatinit" data-title="TextFormatInit">

dictionary <dfn data-export="" data-dfn-type="dictionary" id="dom-textformatinit" data-idl="dictionary" data-title="TextFormatInit" data-dfn-for="" class="idlID" tabindex="0" aria-haspopup="dialog"><code>TextFormatInit</code></dfn> {<span data-idl="" class="idlMember" id="idl-def-textformatinit-rangestart" data-title="rangeStart" data-dfn-for="TextFormatInit"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="dict-member" id="dom-textformatinit-rangestart" data-idl="field" data-title="rangeStart" data-dfn-for="TextFormatInit" data-type="unsigned long" class="idlName" tabindex="0" aria-haspopup="dialog"><code>rangeStart</code></dfn>;</span><span data-idl="" class="idlMember" id="idl-def-textformatinit-rangeend" data-title="rangeEnd" data-dfn-for="TextFormatInit"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="dict-member" id="dom-textformatinit-rangeend" data-idl="field" data-title="rangeEnd" data-dfn-for="TextFormatInit" data-type="unsigned long" class="idlName" tabindex="0" aria-haspopup="dialog"><code>rangeEnd</code></dfn>;</span><span data-idl="" class="idlMember" id="idl-def-textformatinit-underlinestyle" data-title="underlineStyle" data-dfn-for="TextFormatInit"><span class="idlType">
    <a data-link-type="idl" href="#dom-underlinestyle" class="internalDFN" id="ref-for-dom-underlinestyle-3"><code>UnderlineStyle</code></a></span> <dfn data-export="" data-dfn-type="dict-member" id="dom-textformatinit-underlinestyle" data-idl="field" data-title="underlineStyle" data-dfn-for="TextFormatInit" data-type="UnderlineStyle" class="idlName" tabindex="0" aria-haspopup="dialog"><code>underlineStyle</code></dfn>;</span><span data-idl="" class="idlMember" id="idl-def-textformatinit-underlinethickness" data-title="underlineThickness" data-dfn-for="TextFormatInit"><span class="idlType">
    <a data-link-type="idl" href="#dom-underlinethickness" class="internalDFN" id="ref-for-dom-underlinethickness-3"><code>UnderlineThickness</code></a></span> <dfn data-export="" data-dfn-type="dict-member" id="dom-textformatinit-underlinethickness" data-idl="field" data-title="underlineThickness" data-dfn-for="TextFormatInit" data-type="UnderlineThickness" class="idlName" tabindex="0" aria-haspopup="dialog"><code>underlineThickness</code></dfn>;</span>
};</span><span data-idl="" class="idlInterface" id="idl-def-textformat" data-title="TextFormat">

[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=Window</span>]
interface <dfn data-export="" data-dfn-type="interface" id="dom-textformat" data-idl="interface" data-title="TextFormat" data-dfn-for="" class="idlID" tabindex="0" aria-haspopup="dialog"><code>TextFormat</code></dfn> {<span data-idl="" class="idlConstructor" id="idl-def-textformat-constructor-options" data-title="constructor" data-dfn-for="TextFormat">
    <dfn data-export="" data-dfn-type="constructor" id="dom-textformat-constructor" data-idl="constructor" data-title="constructor" data-dfn-for="TextFormat" data-lt="constructor()|constructor(options)" data-local-lt="TextFormat.constructor|TextFormat.constructor()|constructor" tabindex="0" aria-haspopup="dialog"><code>constructor</code></dfn>(optional<span class="idlType"> <a data-link-type="idl" href="#dom-textformatinit" class="internalDFN" id="ref-for-dom-textformatinit-1"><code>TextFormatInit</code></a></span> <span class="idlParamName">options</span> = {});</span><span data-idl="" class="idlAttribute" id="idl-def-textformat-rangestart" data-title="rangeStart" data-dfn-for="TextFormat">
    readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="attribute" id="dom-textformat-rangestart" data-idl="attribute" data-title="rangeStart" data-dfn-for="TextFormat" data-type="unsigned long" data-lt="rangeStart" data-local-lt="TextFormat.rangeStart" class="idlName" tabindex="0" aria-haspopup="dialog"><code>rangeStart</code></dfn>;</span><span data-idl="" class="idlAttribute" id="idl-def-textformat-rangeend" data-title="rangeEnd" data-dfn-for="TextFormat">
    readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="attribute" id="dom-textformat-rangeend" data-idl="attribute" data-title="rangeEnd" data-dfn-for="TextFormat" data-type="unsigned long" data-lt="rangeEnd" data-local-lt="TextFormat.rangeEnd" class="idlName" tabindex="0" aria-haspopup="dialog"><code>rangeEnd</code></dfn>;</span><span data-idl="" class="idlAttribute" id="idl-def-textformat-underlinestyle" data-title="underlineStyle" data-dfn-for="TextFormat">
    readonly attribute<span class="idlType"> <a data-link-type="idl" href="#dom-underlinestyle" class="internalDFN" id="ref-for-dom-underlinestyle-4"><code>UnderlineStyle</code></a></span> <dfn data-export="" data-dfn-type="attribute" id="dom-textformat-underlinestyle" data-idl="attribute" data-title="underlineStyle" data-dfn-for="TextFormat" data-type="UnderlineStyle" data-lt="underlineStyle" data-local-lt="TextFormat.underlineStyle" class="idlName" tabindex="0" aria-haspopup="dialog"><code>underlineStyle</code></dfn>;</span><span data-idl="" class="idlAttribute" id="idl-def-textformat-underlinethickness" data-title="underlineThickness" data-dfn-for="TextFormat">
    readonly attribute<span class="idlType"> <a data-link-type="idl" href="#dom-underlinethickness" class="internalDFN" id="ref-for-dom-underlinethickness-4"><code>UnderlineThickness</code></a></span> <dfn data-export="" data-dfn-type="attribute" id="dom-textformat-underlinethickness" data-idl="attribute" data-title="underlineThickness" data-dfn-for="TextFormat" data-type="UnderlineThickness" data-lt="underlineThickness" data-local-lt="TextFormat.underlineThickness" class="idlName" tabindex="0" aria-haspopup="dialog"><code>underlineThickness</code></dfn>;</span>
};</span><span data-idl="" class="idlDictionary" id="idl-def-textformatupdateeventinit" data-title="TextFormatUpdateEventInit">

dictionary <dfn data-export="" data-dfn-type="dictionary" id="dom-textformatupdateeventinit" data-idl="dictionary" data-title="TextFormatUpdateEventInit" data-dfn-for="" class="idlID" tabindex="0" aria-haspopup="dialog"><code>TextFormatUpdateEventInit</code></dfn> : <span class="idlSuperclass"><a data-link-type="dictionary" href="https://dom.spec.whatwg.org/#dictdef-eventinit">EventInit</a></span> {<span data-idl="" class="idlMember" id="idl-def-textformatupdateeventinit-textformats" data-title="textFormats" data-dfn-for="TextFormatUpdateEventInit"><span class="idlType">
    <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="idl" href="#dom-textformat" class="internalDFN" id="ref-for-dom-textformat-3"><code>TextFormat</code></a>&gt;</span> <dfn data-export="" data-dfn-type="dict-member" id="dom-textformatupdateeventinit-textformats" data-idl="field" data-title="textFormats" data-dfn-for="TextFormatUpdateEventInit" data-type="sequence" class="idlName" tabindex="0" aria-haspopup="dialog"><code>textFormats</code></dfn>;</span>
};</span><span data-idl="" class="idlInterface" id="idl-def-textformatupdateevent" data-title="TextFormatUpdateEvent">

[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=Window</span>]
interface <dfn data-export="" data-dfn-type="interface" id="dom-textformatupdateevent" data-idl="interface" data-title="TextFormatUpdateEvent" data-dfn-for="" class="idlID" tabindex="0" aria-haspopup="dialog"><code>TextFormatUpdateEvent</code></dfn> : <span class="idlSuperclass"><a data-link-type="interface" href="https://dom.spec.whatwg.org/#event">Event</a></span> {<span data-idl="" class="idlConstructor" id="idl-def-textformatupdateevent-constructor-type-options" data-title="constructor" data-dfn-for="TextFormatUpdateEvent">
    <dfn data-export="" data-dfn-type="constructor" id="dom-textformatupdateevent-constructor" data-idl="constructor" data-title="constructor" data-dfn-for="TextFormatUpdateEvent" data-lt="constructor()|constructor(type)|constructor(type, options)" data-local-lt="TextFormatUpdateEvent.constructor|TextFormatUpdateEvent.constructor()|constructor" tabindex="0" aria-haspopup="dialog"><code>constructor</code></dfn>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">type</span>, optional<span class="idlType"> <a data-link-type="idl" href="#dom-textformatupdateeventinit" class="internalDFN" id="ref-for-dom-textformatupdateeventinit-1"><code>TextFormatUpdateEventInit</code></a></span> <span class="idlParamName">options</span> = {});</span><span data-idl="" class="idlMethod" id="idl-def-textformatupdateevent-gettextformats" data-title="getTextFormats" data-dfn-for="TextFormatUpdateEvent"><span class="idlType">
    <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="idl" href="#dom-textformat" class="internalDFN" id="ref-for-dom-textformat-4"><code>TextFormat</code></a>&gt;</span> <dfn data-export="" data-dfn-type="method" id="dom-textformatupdateevent-gettextformats" data-idl="operation" data-title="getTextFormats" data-dfn-for="TextFormatUpdateEvent" data-type="sequence" data-lt="getTextFormats()" data-local-lt="TextFormatUpdateEvent.getTextFormats|TextFormatUpdateEvent.getTextFormats()|getTextFormats" class="idlName" tabindex="0" aria-haspopup="dialog"><code>getTextFormats</code></dfn>();</span>
};</span></code></pre>
            <dl>
                <dt><a data-link-type="idl" href="#dom-textformat-rangestart" class="internalDFN"
                        id="ref-for-dom-textformat-rangestart-2"><code>rangeStart</code></a>, of type unsigned long,
                    readonly</dt>
                <dd>An offset that respresents the position before the first codepoint that should be decorated.</dd>
                <dt><a data-link-type="idl" href="#dom-textformat-rangeend" class="internalDFN"
                        id="ref-for-dom-textformat-rangeend-2"><code>rangeEnd</code></a>, of type unsigned long,
                    readonly</dt>
                <dd>An offset that respresents the position after the last codepoint that should be decorated.</dd>
                <dt><a data-link-type="idl" href="#dom-textformat-underlinestyle" class="internalDFN"
                        id="ref-for-dom-textformat-underlinestyle-2"><code>underlineStyle</code></a>, of type <a
                        data-link-type="idl" data-lt="UnderlineStyle" href="#dom-underlinestyle" class="internalDFN"
                        id="ref-for-dom-underlinestyle-5"><code>UnderlineStyle</code></a>, readonly</dt>
                <dd>The preferred underline style of the decorated text range.</dd>
                <dt><a data-link-type="idl" href="#dom-textformat-underlinethickness" class="internalDFN"
                        id="ref-for-dom-textformat-underlinethickness-2"><code>underlineThickness</code></a>, of type <a
                        data-link-type="idl" data-lt="UnderlineThickness" href="#dom-underlinethickness"
                        class="internalDFN" id="ref-for-dom-underlinethickness-5"><code>UnderlineThickness</code></a>,
                    readonly</dt>
                <dd> The preferred underline thickness of the decorated text range.</dd>
                <dt><a data-link-type="idl" href="#dom-textformatupdateevent-gettextformats" class="internalDFN"
                        id="ref-for-dom-textformatupdateevent-gettextformats-1"><code>getTextFormats</code></a> method
                </dt>
                <dd>Returns <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this">this</a>'s <a
                        data-link-type="dfn|abstract-op" href="#dfn-text-format-list" class="internalDFN"
                        id="ref-for-dfn-text-format-list-2">text format list</a>.</dd>
            </dl>
            <p>A <a data-link-type="idl" data-lt="TextFormatUpdateEvent" href="#dom-textformatupdateevent"
                    class="internalDFN" id="ref-for-dom-textformatupdateevent-7"><code>TextFormatUpdateEvent</code></a>
                has an associated <dfn id="dfn-text-format-list" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">text format list</dfn>, a list of zero or more <a
                    data-link-type="dfn|abstract-op" href="#dfn-text-format" class="internalDFN"
                    id="ref-for-dfn-text-format-5">text format</a>s.</p>
        </section>
        <section id="characterboundsupdateevent">
            <div class="header-wrapper">
                <h3 id="x4-3-characterboundsupdateevent"><bdi class="secno">4.3 </bdi>CharacterBoundsUpdateEvent</h3><a
                    class="self-link" href="#characterboundsupdateevent" aria-label="Permalink for Section 4.3"></a>
            </div>

            <pre class="idl def" id="webidl-1965075523"><span class="idlHeader"><a class="self-link" href="#webidl-1965075523">WebIDL</a></span><code><span data-idl="" class="idlDictionary" id="idl-def-characterboundsupdateeventinit" data-title="CharacterBoundsUpdateEventInit">dictionary <dfn data-export="" data-dfn-type="dictionary" id="dom-characterboundsupdateeventinit" data-idl="dictionary" data-title="CharacterBoundsUpdateEventInit" data-dfn-for="" class="idlID" tabindex="0" aria-haspopup="dialog"><code>CharacterBoundsUpdateEventInit</code></dfn> : <span class="idlSuperclass"><a data-link-type="dictionary" href="https://dom.spec.whatwg.org/#dictdef-eventinit">EventInit</a></span> {<span data-idl="" class="idlMember" id="idl-def-characterboundsupdateeventinit-rangestart" data-title="rangeStart" data-dfn-for="CharacterBoundsUpdateEventInit"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="dict-member" id="dom-characterboundsupdateeventinit-rangestart" data-idl="field" data-title="rangeStart" data-dfn-for="CharacterBoundsUpdateEventInit" data-type="unsigned long" class="idlName" tabindex="0" aria-haspopup="dialog"><code>rangeStart</code></dfn>;</span><span data-idl="" class="idlMember" id="idl-def-characterboundsupdateeventinit-rangeend" data-title="rangeEnd" data-dfn-for="CharacterBoundsUpdateEventInit"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="dict-member" id="dom-characterboundsupdateeventinit-rangeend" data-idl="field" data-title="rangeEnd" data-dfn-for="CharacterBoundsUpdateEventInit" data-type="unsigned long" class="idlName" tabindex="0" aria-haspopup="dialog"><code>rangeEnd</code></dfn>;</span>
};</span><span data-idl="" class="idlInterface" id="idl-def-characterboundsupdateevent" data-title="CharacterBoundsUpdateEvent">

[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=Window</span>]
interface <dfn data-export="" data-dfn-type="interface" id="dom-characterboundsupdateevent" data-idl="interface" data-title="CharacterBoundsUpdateEvent" data-dfn-for="" class="idlID" tabindex="0" aria-haspopup="dialog"><code>CharacterBoundsUpdateEvent</code></dfn> : <span class="idlSuperclass"><a data-link-type="interface" href="https://dom.spec.whatwg.org/#event">Event</a></span> {<span data-idl="" class="idlConstructor" id="idl-def-characterboundsupdateevent-constructor-type-options" data-title="constructor" data-dfn-for="CharacterBoundsUpdateEvent">
    <dfn data-export="" data-dfn-type="constructor" id="dom-characterboundsupdateevent-constructor" data-idl="constructor" data-title="constructor" data-dfn-for="CharacterBoundsUpdateEvent" data-lt="constructor()|constructor(type)|constructor(type, options)" data-local-lt="CharacterBoundsUpdateEvent.constructor|CharacterBoundsUpdateEvent.constructor()|constructor" tabindex="0" aria-haspopup="dialog"><code>constructor</code></dfn>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">type</span>, optional<span class="idlType"> <a data-link-type="idl" href="#dom-characterboundsupdateeventinit" class="internalDFN" id="ref-for-dom-characterboundsupdateeventinit-1"><code>CharacterBoundsUpdateEventInit</code></a></span> <span class="idlParamName">options</span> = {});</span><span data-idl="" class="idlAttribute" id="idl-def-characterboundsupdateevent-rangestart" data-title="rangeStart" data-dfn-for="CharacterBoundsUpdateEvent">
    readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="attribute" id="dom-characterboundsupdateevent-rangestart" data-idl="attribute" data-title="rangeStart" data-dfn-for="CharacterBoundsUpdateEvent" data-type="unsigned long" data-lt="rangeStart" data-local-lt="CharacterBoundsUpdateEvent.rangeStart" class="idlName" tabindex="0" aria-haspopup="dialog"><code>rangeStart</code></dfn>;</span><span data-idl="" class="idlAttribute" id="idl-def-characterboundsupdateevent-rangeend" data-title="rangeEnd" data-dfn-for="CharacterBoundsUpdateEvent">
    readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="attribute" id="dom-characterboundsupdateevent-rangeend" data-idl="attribute" data-title="rangeEnd" data-dfn-for="CharacterBoundsUpdateEvent" data-type="unsigned long" data-lt="rangeEnd" data-local-lt="CharacterBoundsUpdateEvent.rangeEnd" class="idlName" tabindex="0" aria-haspopup="dialog"><code>rangeEnd</code></dfn>;</span>
};</span></code></pre>
            <dl>
                <dt><a data-link-type="idl" href="#dom-characterboundsupdateevent-rangestart" class="internalDFN"
                        id="ref-for-dom-characterboundsupdateevent-rangestart-2"><code>rangeStart</code></a>, of type
                    unsigned long, readonly
                </dt>
                <dd>The start position of the range where the character bounds are needed by <a
                        data-link-type="dfn|abstract-op" href="#dfn-text-input-service" class="internalDFN"
                        id="ref-for-dfn-text-input-service-20">Text Input Service</a>
                </dd>
                <dt><a data-link-type="idl" href="#dom-characterboundsupdateevent-rangeend" class="internalDFN"
                        id="ref-for-dom-characterboundsupdateevent-rangeend-2"><code>rangeEnd</code></a>, of type
                    unsigned long, readonly
                </dt>
                <dd>The end position of the range where the character bounds are needed by <a
                        data-link-type="dfn|abstract-op" href="#dfn-text-input-service" class="internalDFN"
                        id="ref-for-dfn-text-input-service-21">Text Input Service</a>
                </dd>
            </dl>
        </section>
    </section>
    <section id="idl-index" class="appendix">
        <div class="header-wrapper">
            <h2 id="a-idl-index"><bdi class="secno">A. </bdi>IDL Index</h2><a class="self-link" href="#idl-index"
                aria-label="Permalink for Appendix A."></a>
        </div>

        <pre class="idl def" id="actual-idl-index"><span class="idlHeader"><a class="self-link" href="#actual-idl-index">WebIDL</a></span><code><span data-idl="" class="idlInterface" data-title="HTMLElement">partial interface <a data-idl="partial" data-link-type="interface" data-title="HTMLElement" class="idlID" data-dfn-for="HTMLElement" href="https://html.spec.whatwg.org/multipage/dom.html#htmlelement">HTMLElement</a> {<span data-idl="" class="idlAttribute" data-title="editContext" data-dfn-for="HTMLElement">
     attribute<span class="idlType"> <a data-link-type="idl" href="#dom-editcontext" class="internalDFN" id="ref-for-dom-editcontext-38"><code>EditContext</code></a>?</span> <dfn data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="editContext" data-dfn-for="HTMLElement" data-type="EditContext" data-lt="editContext" data-local-lt="HTMLElement.editContext" class="idlName"><code>editContext</code></dfn>;</span>
};</span>

<span data-idl="" class="idlDictionary" data-title="EditContextInit">dictionary <dfn data-export="" data-dfn-type="dictionary" data-idl="dictionary" data-title="EditContextInit" data-dfn-for="" class="idlID"><code>EditContextInit</code></dfn> {<span data-idl="" class="idlMember" data-title="text" data-dfn-for="EditContextInit"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <dfn data-export="" data-dfn-type="dict-member" data-idl="field" data-title="text" data-dfn-for="EditContextInit" data-type="DOMString" class="idlName"><code>text</code></dfn>;</span><span data-idl="" class="idlMember" data-title="selectionStart" data-dfn-for="EditContextInit"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="dict-member" data-idl="field" data-title="selectionStart" data-dfn-for="EditContextInit" data-type="unsigned long" class="idlName"><code>selectionStart</code></dfn>;</span><span data-idl="" class="idlMember" data-title="selectionEnd" data-dfn-for="EditContextInit"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="dict-member" data-idl="field" data-title="selectionEnd" data-dfn-for="EditContextInit" data-type="unsigned long" class="idlName"><code>selectionEnd</code></dfn>;</span>
};</span><span data-idl="" class="idlInterface" data-title="EditContext">

[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=Window</span>]
interface <dfn data-export="" data-dfn-type="interface" data-idl="interface" data-title="EditContext" data-dfn-for="" class="idlID"><code>EditContext</code></dfn> : <span class="idlSuperclass"><a data-link-type="interface" href="https://dom.spec.whatwg.org/#eventtarget">EventTarget</a></span> {<span data-idl="" class="idlConstructor" data-title="constructor" data-dfn-for="EditContext">
    <dfn data-export="" data-dfn-type="constructor" data-idl="constructor" data-title="constructor" data-dfn-for="EditContext" data-lt="constructor()|constructor(options)" data-local-lt="EditContext.constructor|EditContext.constructor()|constructor"><code>constructor</code></dfn>(optional<span class="idlType"> <a data-link-type="idl" href="#dom-editcontextinit" class="internalDFN" id="ref-for-dom-editcontextinit-2"><code>EditContextInit</code></a></span> <span class="idlParamName">options</span> = {});</span><span data-idl="" class="idlMethod" data-title="updateText" data-dfn-for="EditContext"><span class="idlType">

    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a></span> <dfn data-export="" data-dfn-type="method" data-idl="operation" data-title="updateText" data-dfn-for="EditContext" data-type="undefined" data-lt="updateText()|updateText(rangeStart, rangeEnd, text)" data-local-lt="EditContext.updateText|EditContext.updateText()|updateText" class="idlName"><code>updateText</code></dfn>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <span class="idlParamName">rangeStart</span>,<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <span class="idlParamName">rangeEnd</span>,<span class="idlType">
        <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">text</span>);</span><span data-idl="" class="idlMethod" data-title="updateSelection" data-dfn-for="EditContext"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a></span> <dfn data-export="" data-dfn-type="method" data-idl="operation" data-title="updateSelection" data-dfn-for="EditContext" data-type="undefined" data-lt="updateSelection()|updateSelection(start, end)" data-local-lt="EditContext.updateSelection|EditContext.updateSelection()|updateSelection" class="idlName"><code>updateSelection</code></dfn>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <span class="idlParamName">start</span>,<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <span class="idlParamName">end</span>);</span><span data-idl="" class="idlMethod" data-title="updateControlBounds" data-dfn-for="EditContext"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a></span> <dfn data-export="" data-dfn-type="method" data-idl="operation" data-title="updateControlBounds" data-dfn-for="EditContext" data-type="undefined" data-lt="updateControlBounds()|updateControlBounds(controlBounds)" data-local-lt="EditContext.updateControlBounds|EditContext.updateControlBounds()|updateControlBounds" class="idlName"><code>updateControlBounds</code></dfn>(<span class="idlType"><a data-link-type="interface" href="https://www.w3.org/TR/geometry-1/#domrect">DOMRect</a></span> <span class="idlParamName">controlBounds</span>);</span><span data-idl="" class="idlMethod" data-title="updateSelectionBounds" data-dfn-for="EditContext"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a></span> <dfn data-export="" data-dfn-type="method" data-idl="operation" data-title="updateSelectionBounds" data-dfn-for="EditContext" data-type="undefined" data-lt="updateSelectionBounds()|updateSelectionBounds(selectionBounds)" data-local-lt="EditContext.updateSelectionBounds|EditContext.updateSelectionBounds()|updateSelectionBounds" class="idlName"><code>updateSelectionBounds</code></dfn>(<span class="idlType"><a data-link-type="interface" href="https://www.w3.org/TR/geometry-1/#domrect">DOMRect</a></span> <span class="idlParamName">selectionBounds</span>);</span><span data-idl="" class="idlMethod" data-title="updateCharacterBounds" data-dfn-for="EditContext"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a></span> <dfn data-export="" data-dfn-type="method" data-idl="operation" data-title="updateCharacterBounds" data-dfn-for="EditContext" data-type="undefined" data-lt="updateCharacterBounds()|updateCharacterBounds(rangeStart, characterBounds)" data-local-lt="EditContext.updateCharacterBounds|EditContext.updateCharacterBounds()|updateCharacterBounds" class="idlName"><code>updateCharacterBounds</code></dfn>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <span class="idlParamName">rangeStart</span>,<span class="idlType"> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="interface" href="https://www.w3.org/TR/geometry-1/#domrect">DOMRect</a>&gt;</span> <span class="idlParamName">characterBounds</span>);</span><span data-idl="" class="idlMethod" data-title="attachedElements" data-dfn-for="EditContext"><span class="idlType">

    <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="interface" href="https://html.spec.whatwg.org/multipage/dom.html#htmlelement">HTMLElement</a>&gt;</span> <dfn data-export="" data-dfn-type="method" data-idl="operation" data-title="attachedElements" data-dfn-for="EditContext" data-type="sequence" data-lt="attachedElements()" data-local-lt="EditContext.attachedElements|EditContext.attachedElements()|attachedElements" class="idlName"><code>attachedElements</code></dfn>();</span><span data-idl="" class="idlAttribute" data-title="text" data-dfn-for="EditContext">

    readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <dfn data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="text" data-dfn-for="EditContext" data-type="DOMString" data-lt="text" data-local-lt="EditContext.text" class="idlName"><code>text</code></dfn>;</span><span data-idl="" class="idlAttribute" data-title="selectionStart" data-dfn-for="EditContext">
    readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="selectionStart" data-dfn-for="EditContext" data-type="unsigned long" data-lt="selectionStart" data-local-lt="EditContext.selectionStart" class="idlName"><code>selectionStart</code></dfn>;</span><span data-idl="" class="idlAttribute" data-title="selectionEnd" data-dfn-for="EditContext">
    readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="selectionEnd" data-dfn-for="EditContext" data-type="unsigned long" data-lt="selectionEnd" data-local-lt="EditContext.selectionEnd" class="idlName"><code>selectionEnd</code></dfn>;</span><span data-idl="" class="idlAttribute" data-title="characterBoundsRangeStart" data-dfn-for="EditContext">
    readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="characterBoundsRangeStart" data-dfn-for="EditContext" data-type="unsigned long" data-lt="characterBoundsRangeStart" data-local-lt="EditContext.characterBoundsRangeStart" class="idlName"><code>characterBoundsRangeStart</code></dfn>;</span><span data-idl="" class="idlMethod" data-title="characterBounds" data-dfn-for="EditContext"><span class="idlType">
    <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="interface" href="https://www.w3.org/TR/geometry-1/#domrect">DOMRect</a>&gt;</span> <dfn data-export="" data-dfn-type="method" data-idl="operation" data-title="characterBounds" data-dfn-for="EditContext" data-type="sequence" data-lt="characterBounds()" data-local-lt="EditContext.characterBounds|EditContext.characterBounds()|characterBounds" class="idlName"><code>characterBounds</code></dfn>();</span><span data-idl="" class="idlAttribute" data-title="ontextupdate" data-dfn-for="EditContext">

    attribute<span class="idlType"> <a data-link-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span> <dfn data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="ontextupdate" data-dfn-for="EditContext" data-type="EventHandler" data-lt="ontextupdate" data-local-lt="EditContext.ontextupdate" class="idlName"><code>ontextupdate</code></dfn>;</span><span data-idl="" class="idlAttribute" data-title="ontextformatupdate" data-dfn-for="EditContext">
    attribute<span class="idlType"> <a data-link-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span> <dfn data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="ontextformatupdate" data-dfn-for="EditContext" data-type="EventHandler" data-lt="ontextformatupdate" data-local-lt="EditContext.ontextformatupdate" class="idlName"><code>ontextformatupdate</code></dfn>;</span><span data-idl="" class="idlAttribute" data-title="oncharacterboundsupdate" data-dfn-for="EditContext">
    attribute<span class="idlType"> <a data-link-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span> <dfn data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="oncharacterboundsupdate" data-dfn-for="EditContext" data-type="EventHandler" data-lt="oncharacterboundsupdate" data-local-lt="EditContext.oncharacterboundsupdate" class="idlName"><code>oncharacterboundsupdate</code></dfn>;</span><span data-idl="" class="idlAttribute" data-title="oncompositionstart" data-dfn-for="EditContext">
    attribute<span class="idlType"> <a data-link-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span> <dfn data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="oncompositionstart" data-dfn-for="EditContext" data-type="EventHandler" data-lt="oncompositionstart" data-local-lt="EditContext.oncompositionstart" class="idlName"><code>oncompositionstart</code></dfn>;</span><span data-idl="" class="idlAttribute" data-title="oncompositionend" data-dfn-for="EditContext">
    attribute<span class="idlType"> <a data-link-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span> <dfn data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="oncompositionend" data-dfn-for="EditContext" data-type="EventHandler" data-lt="oncompositionend" data-local-lt="EditContext.oncompositionend" class="idlName"><code>oncompositionend</code></dfn>;</span>
};</span>

<span data-idl="" class="idlDictionary" data-title="TextUpdateEventInit">dictionary <dfn data-export="" data-dfn-type="dictionary" data-idl="dictionary" data-title="TextUpdateEventInit" data-dfn-for="" class="idlID"><code>TextUpdateEventInit</code></dfn> : <span class="idlSuperclass"><a data-link-type="dictionary" href="https://dom.spec.whatwg.org/#dictdef-eventinit">EventInit</a></span> {<span data-idl="" class="idlMember" data-title="updateRangeStart" data-dfn-for="TextUpdateEventInit"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="dict-member" data-idl="field" data-title="updateRangeStart" data-dfn-for="TextUpdateEventInit" data-type="unsigned long" class="idlName"><code>updateRangeStart</code></dfn>;</span><span data-idl="" class="idlMember" data-title="updateRangeEnd" data-dfn-for="TextUpdateEventInit"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="dict-member" data-idl="field" data-title="updateRangeEnd" data-dfn-for="TextUpdateEventInit" data-type="unsigned long" class="idlName"><code>updateRangeEnd</code></dfn>;</span><span data-idl="" class="idlMember" data-title="text" data-dfn-for="TextUpdateEventInit"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <dfn data-export="" data-dfn-type="dict-member" data-idl="field" data-title="text" data-dfn-for="TextUpdateEventInit" data-type="DOMString" class="idlName"><code>text</code></dfn>;</span><span data-idl="" class="idlMember" data-title="selectionStart" data-dfn-for="TextUpdateEventInit"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="dict-member" data-idl="field" data-title="selectionStart" data-dfn-for="TextUpdateEventInit" data-type="unsigned long" class="idlName"><code>selectionStart</code></dfn>;</span><span data-idl="" class="idlMember" data-title="selectionEnd" data-dfn-for="TextUpdateEventInit"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="dict-member" data-idl="field" data-title="selectionEnd" data-dfn-for="TextUpdateEventInit" data-type="unsigned long" class="idlName"><code>selectionEnd</code></dfn>;</span><span data-idl="" class="idlMember" data-title="compositionStart" data-dfn-for="TextUpdateEventInit"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="dict-member" data-idl="field" data-title="compositionStart" data-dfn-for="TextUpdateEventInit" data-type="unsigned long" class="idlName"><code>compositionStart</code></dfn>;</span><span data-idl="" class="idlMember" data-title="compositionEnd" data-dfn-for="TextUpdateEventInit"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="dict-member" data-idl="field" data-title="compositionEnd" data-dfn-for="TextUpdateEventInit" data-type="unsigned long" class="idlName"><code>compositionEnd</code></dfn>;</span>
};</span><span data-idl="" class="idlInterface" data-title="TextUpdateEvent">

[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=Window</span>]
interface <dfn data-export="" data-dfn-type="interface" data-idl="interface" data-title="TextUpdateEvent" data-dfn-for="" class="idlID"><code>TextUpdateEvent</code></dfn> : <span class="idlSuperclass"><a data-link-type="interface" href="https://dom.spec.whatwg.org/#event">Event</a></span> {<span data-idl="" class="idlConstructor" data-title="constructor" data-dfn-for="TextUpdateEvent">
    <dfn data-export="" data-dfn-type="constructor" data-idl="constructor" data-title="constructor" data-dfn-for="TextUpdateEvent" data-lt="constructor()|constructor(type)|constructor(type, options)" data-local-lt="TextUpdateEvent.constructor|TextUpdateEvent.constructor()|constructor"><code>constructor</code></dfn>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">type</span>, optional<span class="idlType"> <a data-link-type="idl" href="#dom-textupdateeventinit" class="internalDFN" id="ref-for-dom-textupdateeventinit-2"><code>TextUpdateEventInit</code></a></span> <span class="idlParamName">options</span> = {});</span><span data-idl="" class="idlAttribute" data-title="updateRangeStart" data-dfn-for="TextUpdateEvent">
    readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="updateRangeStart" data-dfn-for="TextUpdateEvent" data-type="unsigned long" data-lt="updateRangeStart" data-local-lt="TextUpdateEvent.updateRangeStart" class="idlName"><code>updateRangeStart</code></dfn>;</span><span data-idl="" class="idlAttribute" data-title="updateRangeEnd" data-dfn-for="TextUpdateEvent">
    readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="updateRangeEnd" data-dfn-for="TextUpdateEvent" data-type="unsigned long" data-lt="updateRangeEnd" data-local-lt="TextUpdateEvent.updateRangeEnd" class="idlName"><code>updateRangeEnd</code></dfn>;</span><span data-idl="" class="idlAttribute" data-title="text" data-dfn-for="TextUpdateEvent">
    readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <dfn data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="text" data-dfn-for="TextUpdateEvent" data-type="DOMString" data-lt="text" data-local-lt="TextUpdateEvent.text" class="idlName"><code>text</code></dfn>;</span><span data-idl="" class="idlAttribute" data-title="selectionStart" data-dfn-for="TextUpdateEvent">
    readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="selectionStart" data-dfn-for="TextUpdateEvent" data-type="unsigned long" data-lt="selectionStart" data-local-lt="TextUpdateEvent.selectionStart" class="idlName"><code>selectionStart</code></dfn>;</span><span data-idl="" class="idlAttribute" data-title="selectionEnd" data-dfn-for="TextUpdateEvent">
    readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="selectionEnd" data-dfn-for="TextUpdateEvent" data-type="unsigned long" data-lt="selectionEnd" data-local-lt="TextUpdateEvent.selectionEnd" class="idlName"><code>selectionEnd</code></dfn>;</span>
};</span>

<span data-idl="" class="idlEnum" data-title="UnderlineStyle">enum <dfn data-export="" data-dfn-type="enum" data-idl="enum" data-title="UnderlineStyle" data-dfn-for="" class="idlID"><code>UnderlineStyle</code></dfn> { <span class="idlEnumItem">"<dfn data-export="" data-dfn-type="enum-value" data-idl="enum-value" data-title="none" data-dfn-for="UnderlineStyle"><code>none</code></dfn>"</span>, <span class="idlEnumItem">"<dfn data-export="" data-dfn-type="enum-value" data-idl="enum-value" data-title="solid" data-dfn-for="UnderlineStyle"><code>solid</code></dfn>"</span>, <span class="idlEnumItem">"<dfn data-export="" data-dfn-type="enum-value" data-idl="enum-value" data-title="dotted" data-dfn-for="UnderlineStyle"><code>dotted</code></dfn>"</span>, <span class="idlEnumItem">"<dfn data-export="" data-dfn-type="enum-value" data-idl="enum-value" data-title="dashed" data-dfn-for="UnderlineStyle"><code>dashed</code></dfn>"</span>, <span class="idlEnumItem">"<dfn data-export="" data-dfn-type="enum-value" data-idl="enum-value" data-title="wavy" data-dfn-for="UnderlineStyle"><code>wavy</code></dfn>"</span> };</span><span data-idl="" class="idlEnum" data-title="UnderlineThickness">
enum <dfn data-export="" data-dfn-type="enum" data-idl="enum" data-title="UnderlineThickness" data-dfn-for="" class="idlID"><code>UnderlineThickness</code></dfn> { <span class="idlEnumItem">"<dfn data-export="" data-dfn-type="enum-value" data-idl="enum-value" data-title="none" data-dfn-for="UnderlineThickness"><code>none</code></dfn>"</span>, <span class="idlEnumItem">"<dfn data-export="" data-dfn-type="enum-value" data-idl="enum-value" data-title="thin" data-dfn-for="UnderlineThickness"><code>thin</code></dfn>"</span>, <span class="idlEnumItem">"<dfn data-export="" data-dfn-type="enum-value" data-idl="enum-value" data-title="thick" data-dfn-for="UnderlineThickness"><code>thick</code></dfn>"</span> };</span><span data-idl="" class="idlDictionary" data-title="TextFormatInit">

dictionary <dfn data-export="" data-dfn-type="dictionary" data-idl="dictionary" data-title="TextFormatInit" data-dfn-for="" class="idlID"><code>TextFormatInit</code></dfn> {<span data-idl="" class="idlMember" data-title="rangeStart" data-dfn-for="TextFormatInit"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="dict-member" data-idl="field" data-title="rangeStart" data-dfn-for="TextFormatInit" data-type="unsigned long" class="idlName"><code>rangeStart</code></dfn>;</span><span data-idl="" class="idlMember" data-title="rangeEnd" data-dfn-for="TextFormatInit"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="dict-member" data-idl="field" data-title="rangeEnd" data-dfn-for="TextFormatInit" data-type="unsigned long" class="idlName"><code>rangeEnd</code></dfn>;</span><span data-idl="" class="idlMember" data-title="underlineStyle" data-dfn-for="TextFormatInit"><span class="idlType">
    <a data-link-type="idl" href="#dom-underlinestyle" class="internalDFN" id="ref-for-dom-underlinestyle-6"><code>UnderlineStyle</code></a></span> <dfn data-export="" data-dfn-type="dict-member" data-idl="field" data-title="underlineStyle" data-dfn-for="TextFormatInit" data-type="UnderlineStyle" class="idlName"><code>underlineStyle</code></dfn>;</span><span data-idl="" class="idlMember" data-title="underlineThickness" data-dfn-for="TextFormatInit"><span class="idlType">
    <a data-link-type="idl" href="#dom-underlinethickness" class="internalDFN" id="ref-for-dom-underlinethickness-6"><code>UnderlineThickness</code></a></span> <dfn data-export="" data-dfn-type="dict-member" data-idl="field" data-title="underlineThickness" data-dfn-for="TextFormatInit" data-type="UnderlineThickness" class="idlName"><code>underlineThickness</code></dfn>;</span>
};</span><span data-idl="" class="idlInterface" data-title="TextFormat">

[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=Window</span>]
interface <dfn data-export="" data-dfn-type="interface" data-idl="interface" data-title="TextFormat" data-dfn-for="" class="idlID"><code>TextFormat</code></dfn> {<span data-idl="" class="idlConstructor" data-title="constructor" data-dfn-for="TextFormat">
    <dfn data-export="" data-dfn-type="constructor" data-idl="constructor" data-title="constructor" data-dfn-for="TextFormat" data-lt="constructor()|constructor(options)" data-local-lt="TextFormat.constructor|TextFormat.constructor()|constructor"><code>constructor</code></dfn>(optional<span class="idlType"> <a data-link-type="idl" href="#dom-textformatinit" class="internalDFN" id="ref-for-dom-textformatinit-2"><code>TextFormatInit</code></a></span> <span class="idlParamName">options</span> = {});</span><span data-idl="" class="idlAttribute" data-title="rangeStart" data-dfn-for="TextFormat">
    readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="rangeStart" data-dfn-for="TextFormat" data-type="unsigned long" data-lt="rangeStart" data-local-lt="TextFormat.rangeStart" class="idlName"><code>rangeStart</code></dfn>;</span><span data-idl="" class="idlAttribute" data-title="rangeEnd" data-dfn-for="TextFormat">
    readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="rangeEnd" data-dfn-for="TextFormat" data-type="unsigned long" data-lt="rangeEnd" data-local-lt="TextFormat.rangeEnd" class="idlName"><code>rangeEnd</code></dfn>;</span><span data-idl="" class="idlAttribute" data-title="underlineStyle" data-dfn-for="TextFormat">
    readonly attribute<span class="idlType"> <a data-link-type="idl" href="#dom-underlinestyle" class="internalDFN" id="ref-for-dom-underlinestyle-7"><code>UnderlineStyle</code></a></span> <dfn data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="underlineStyle" data-dfn-for="TextFormat" data-type="UnderlineStyle" data-lt="underlineStyle" data-local-lt="TextFormat.underlineStyle" class="idlName"><code>underlineStyle</code></dfn>;</span><span data-idl="" class="idlAttribute" data-title="underlineThickness" data-dfn-for="TextFormat">
    readonly attribute<span class="idlType"> <a data-link-type="idl" href="#dom-underlinethickness" class="internalDFN" id="ref-for-dom-underlinethickness-7"><code>UnderlineThickness</code></a></span> <dfn data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="underlineThickness" data-dfn-for="TextFormat" data-type="UnderlineThickness" data-lt="underlineThickness" data-local-lt="TextFormat.underlineThickness" class="idlName"><code>underlineThickness</code></dfn>;</span>
};</span><span data-idl="" class="idlDictionary" data-title="TextFormatUpdateEventInit">

dictionary <dfn data-export="" data-dfn-type="dictionary" data-idl="dictionary" data-title="TextFormatUpdateEventInit" data-dfn-for="" class="idlID"><code>TextFormatUpdateEventInit</code></dfn> : <span class="idlSuperclass"><a data-link-type="dictionary" href="https://dom.spec.whatwg.org/#dictdef-eventinit">EventInit</a></span> {<span data-idl="" class="idlMember" data-title="textFormats" data-dfn-for="TextFormatUpdateEventInit"><span class="idlType">
    <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="idl" href="#dom-textformat" class="internalDFN" id="ref-for-dom-textformat-5"><code>TextFormat</code></a>&gt;</span> <dfn data-export="" data-dfn-type="dict-member" data-idl="field" data-title="textFormats" data-dfn-for="TextFormatUpdateEventInit" data-type="sequence" class="idlName"><code>textFormats</code></dfn>;</span>
};</span><span data-idl="" class="idlInterface" data-title="TextFormatUpdateEvent">

[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=Window</span>]
interface <dfn data-export="" data-dfn-type="interface" data-idl="interface" data-title="TextFormatUpdateEvent" data-dfn-for="" class="idlID"><code>TextFormatUpdateEvent</code></dfn> : <span class="idlSuperclass"><a data-link-type="interface" href="https://dom.spec.whatwg.org/#event">Event</a></span> {<span data-idl="" class="idlConstructor" data-title="constructor" data-dfn-for="TextFormatUpdateEvent">
    <dfn data-export="" data-dfn-type="constructor" data-idl="constructor" data-title="constructor" data-dfn-for="TextFormatUpdateEvent" data-lt="constructor()|constructor(type)|constructor(type, options)" data-local-lt="TextFormatUpdateEvent.constructor|TextFormatUpdateEvent.constructor()|constructor"><code>constructor</code></dfn>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">type</span>, optional<span class="idlType"> <a data-link-type="idl" href="#dom-textformatupdateeventinit" class="internalDFN" id="ref-for-dom-textformatupdateeventinit-2"><code>TextFormatUpdateEventInit</code></a></span> <span class="idlParamName">options</span> = {});</span><span data-idl="" class="idlMethod" data-title="getTextFormats" data-dfn-for="TextFormatUpdateEvent"><span class="idlType">
    <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="idl" href="#dom-textformat" class="internalDFN" id="ref-for-dom-textformat-6"><code>TextFormat</code></a>&gt;</span> <dfn data-export="" data-dfn-type="method" data-idl="operation" data-title="getTextFormats" data-dfn-for="TextFormatUpdateEvent" data-type="sequence" data-lt="getTextFormats()" data-local-lt="TextFormatUpdateEvent.getTextFormats|TextFormatUpdateEvent.getTextFormats()|getTextFormats" class="idlName"><code>getTextFormats</code></dfn>();</span>
};</span>

<span data-idl="" class="idlDictionary" data-title="CharacterBoundsUpdateEventInit">dictionary <dfn data-export="" data-dfn-type="dictionary" data-idl="dictionary" data-title="CharacterBoundsUpdateEventInit" data-dfn-for="" class="idlID"><code>CharacterBoundsUpdateEventInit</code></dfn> : <span class="idlSuperclass"><a data-link-type="dictionary" href="https://dom.spec.whatwg.org/#dictdef-eventinit">EventInit</a></span> {<span data-idl="" class="idlMember" data-title="rangeStart" data-dfn-for="CharacterBoundsUpdateEventInit"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="dict-member" data-idl="field" data-title="rangeStart" data-dfn-for="CharacterBoundsUpdateEventInit" data-type="unsigned long" class="idlName"><code>rangeStart</code></dfn>;</span><span data-idl="" class="idlMember" data-title="rangeEnd" data-dfn-for="CharacterBoundsUpdateEventInit"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="dict-member" data-idl="field" data-title="rangeEnd" data-dfn-for="CharacterBoundsUpdateEventInit" data-type="unsigned long" class="idlName"><code>rangeEnd</code></dfn>;</span>
};</span><span data-idl="" class="idlInterface" data-title="CharacterBoundsUpdateEvent">

[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=Window</span>]
interface <dfn data-export="" data-dfn-type="interface" data-idl="interface" data-title="CharacterBoundsUpdateEvent" data-dfn-for="" class="idlID"><code>CharacterBoundsUpdateEvent</code></dfn> : <span class="idlSuperclass"><a data-link-type="interface" href="https://dom.spec.whatwg.org/#event">Event</a></span> {<span data-idl="" class="idlConstructor" data-title="constructor" data-dfn-for="CharacterBoundsUpdateEvent">
    <dfn data-export="" data-dfn-type="constructor" data-idl="constructor" data-title="constructor" data-dfn-for="CharacterBoundsUpdateEvent" data-lt="constructor()|constructor(type)|constructor(type, options)" data-local-lt="CharacterBoundsUpdateEvent.constructor|CharacterBoundsUpdateEvent.constructor()|constructor"><code>constructor</code></dfn>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">type</span>, optional<span class="idlType"> <a data-link-type="idl" href="#dom-characterboundsupdateeventinit" class="internalDFN" id="ref-for-dom-characterboundsupdateeventinit-2"><code>CharacterBoundsUpdateEventInit</code></a></span> <span class="idlParamName">options</span> = {});</span><span data-idl="" class="idlAttribute" data-title="rangeStart" data-dfn-for="CharacterBoundsUpdateEvent">
    readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="rangeStart" data-dfn-for="CharacterBoundsUpdateEvent" data-type="unsigned long" data-lt="rangeStart" data-local-lt="CharacterBoundsUpdateEvent.rangeStart" class="idlName"><code>rangeStart</code></dfn>;</span><span data-idl="" class="idlAttribute" data-title="rangeEnd" data-dfn-for="CharacterBoundsUpdateEvent">
    readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="rangeEnd" data-dfn-for="CharacterBoundsUpdateEvent" data-type="unsigned long" data-lt="rangeEnd" data-local-lt="CharacterBoundsUpdateEvent.rangeEnd" class="idlName"><code>rangeEnd</code></dfn>;</span>
};</span></code></pre>
    </section>
    <section id="contributors">
        <div class="header-wrapper">
            <h2 id="b-contributors"><bdi class="secno">B. </bdi>Contributors</h2><a class="self-link"
                href="#contributors" aria-label="Permalink for Section B."></a>
        </div>

        <div class="note" id="issue-container-generatedID-12">
            <div role="heading" class="ednote-title marker" id="h-ednote" aria-level="3"><span>Editor's note</span>
            </div>
            <p class="">
                Add contributors
            </p>
        </div>
    </section>




    <section id="references" class="appendix">
        <div class="header-wrapper">
            <h2 id="c-references"><bdi class="secno">C. </bdi>References</h2><a class="self-link" href="#references"
                aria-label="Permalink for Appendix C."></a>
        </div>
        <section id="normative-references">
            <div class="header-wrapper">
                <h3 id="c-1-normative-references"><bdi class="secno">C.1 </bdi>Normative references</h3><a
                    class="self-link" href="#normative-references" aria-label="Permalink for Appendix C.1"></a>
            </div>

            <dl class="bibliography">
                <dt id="bib-dom">[dom]</dt>
                <dd>
                    <a href="https://dom.spec.whatwg.org/"><cite>DOM Standard</cite></a>. Anne van Kesteren. WHATWG.
                    Living Standard. URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
                </dd>
                <dt id="bib-geometry-1">[geometry-1]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/geometry-1/"><cite>Geometry Interfaces Module Level 1</cite></a>.
                    Simon Pieters; Chris Harrelson. W3C. 4 December 2018. W3C Candidate Recommendation. URL: <a
                        href="https://www.w3.org/TR/geometry-1/">https://www.w3.org/TR/geometry-1/</a>
                </dd>
                <dt id="bib-html">[html]</dt>
                <dd>
                    <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML Standard</cite></a>. Anne van Kesteren;
                    Domenic Denicola; Dominic Farolino; Ian Hickson; Philip Jägenstedt; Simon Pieters. WHATWG. Living
                    Standard. URL: <a
                        href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
                </dd>
                <dt id="bib-uievents">[uievents]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/uievents/"><cite>UI Events</cite></a>. Gary Kacmarcik; Travis
                    Leithead. W3C. 7 September 2024. W3C Working Draft. URL: <a
                        href="https://www.w3.org/TR/uievents/">https://www.w3.org/TR/uievents/</a>
                </dd>
                <dt id="bib-webidl">[webidl]</dt>
                <dd>
                    <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL Standard</cite></a>. Edgar Chen; Timothy Gu.
                    WHATWG. Living Standard. URL: <a
                        href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
                </dd>
            </dl>
        </section>
        <section id="informative-references">
            <div class="header-wrapper">
                <h3 id="c-2-informative-references"><bdi class="secno">C.2 </bdi>Informative references</h3><a
                    class="self-link" href="#informative-references" aria-label="Permalink for Appendix C.2"></a>
            </div>

            <dl class="bibliography">
                <dt id="bib-input-events">[input-events]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/input-events-1/"><cite>Input Events Level 1</cite></a>. Johannes
                    Wilm. W3C. 28 September 2023. W3C Working Draft. URL: <a
                        href="https://www.w3.org/TR/input-events-1/">https://www.w3.org/TR/input-events-1/</a>
                </dd>
            </dl>
        </section>
    </section>
    <p role="navigation" id="back-to-top">
        <a href="#title"><abbr title="Back to Top">↑</abbr></a>
    </p>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-text-input-method"
        aria-label="Links in this document to definition: Text Input Method">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-text-input-method"
                aria-label="Permalink for definition: Text Input Method. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-text-input-method-1" title="§ 1.1 Background and Motivation">§ 1.1 Background and
                    Motivation</a> <a href="#ref-for-dfn-text-input-method-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-text-input-method-3" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-text-input-method-4" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-text-input-method-5" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-text-input-method-6" title="Reference 6">(6)</a> <a
                    href="#ref-for-dfn-text-input-method-7" title="Reference 7">(7)</a> <a
                    href="#ref-for-dfn-text-input-method-8" title="Reference 8">(8)</a> <a
                    href="#ref-for-dfn-text-input-method-9" title="Reference 9">(9)</a> <a
                    href="#ref-for-dfn-text-input-method-10" title="Reference 10">(10)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-text-input-method-11" title="§ 1.2.4 EditContext events">§ 1.2.4 EditContext
                    events</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-text-edit-context"
        aria-label="Links in this document to definition: Text Edit Context">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-text-edit-context"
                aria-label="Permalink for definition: Text Edit Context. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-text-edit-context-1" title="§ 1.1 Background and Motivation">§ 1.1 Background and
                    Motivation</a> <a href="#ref-for-dfn-text-edit-context-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-text-edit-context-3" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-text-edit-context-4" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-text-edit-context-5" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-text-edit-context-6" title="Reference 6">(6)</a> <a
                    href="#ref-for-dfn-text-edit-context-7" title="Reference 7">(7)</a> <a
                    href="#ref-for-dfn-text-edit-context-8" title="Reference 8">(8)</a> <a
                    href="#ref-for-dfn-text-edit-context-9" title="Reference 9">(9)</a> <a
                    href="#ref-for-dfn-text-edit-context-10" title="Reference 10">(10)</a> <a
                    href="#ref-for-dfn-text-edit-context-11" title="Reference 11">(11)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-text-edit-context-12" title="§ 1.2 The EditContext Model">§ 1.2 The EditContext
                    Model</a> <a href="#ref-for-dfn-text-edit-context-13" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-text-edit-context-14" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-text-edit-context-15" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-text-edit-context-16" title="§ 1.2.1 EditContext state">§ 1.2.1 EditContext
                    state</a>
            </li>
            <li>
                <a href="#ref-for-dfn-text-edit-context-17" title="§ 3.1.1 Handle input for EditContext">§ 3.1.1 Handle
                    input for EditContext</a> <a href="#ref-for-dfn-text-edit-context-18" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-text-edit-context-19" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-text-edit-context-20" title="§ 3.1.4 Update the Text Edit Context">§ 3.1.4 Update
                    the Text Edit Context</a> <a href="#ref-for-dfn-text-edit-context-21" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-text-input-service"
        aria-label="Links in this document to definition: Text Input Service">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-text-input-service"
                aria-label="Permalink for definition: Text Input Service. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-text-input-service-1" title="§ 1.1 Background and Motivation">§ 1.1 Background and
                    Motivation</a> <a href="#ref-for-dfn-text-input-service-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-text-input-service-3" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-text-input-service-4" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-text-input-service-5" title="§ 1.2 The EditContext Model">§ 1.2 The EditContext
                    Model</a> <a href="#ref-for-dfn-text-input-service-6" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-text-input-service-7" title="§ 1.2.1 EditContext state">§ 1.2.1 EditContext
                    state</a> <a href="#ref-for-dfn-text-input-service-8" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-text-input-service-9" title="§ 1.2.2 Association and activation">§ 1.2.2
                    Association and activation</a>
            </li>
            <li>
                <a href="#ref-for-dfn-text-input-service-10" title="§ 1.2.4 EditContext events">§ 1.2.4 EditContext
                    events</a> <a href="#ref-for-dfn-text-input-service-11" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-text-input-service-12" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-text-input-service-13" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-text-input-service-14" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-text-input-service-15" title="Reference 6">(6)</a> <a
                    href="#ref-for-dfn-text-input-service-16" title="Reference 7">(7)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-text-input-service-17" title="§ 3.1.3 Update the EditContext">§ 3.1.3 Update the
                    EditContext</a>
            </li>
            <li>
                <a href="#ref-for-dfn-text-input-service-18" title="§ 3.1.4 Update the Text Edit Context">§ 3.1.4 Update
                    the Text Edit Context</a>
            </li>
            <li>
                <a href="#ref-for-dfn-text-input-service-19" title="§ 3.1.6 Dispatch text format update event">§ 3.1.6
                    Dispatch text format update event</a>
            </li>
            <li>
                <a href="#ref-for-dfn-text-input-service-20" title="§ 4.3 CharacterBoundsUpdateEvent">§ 4.3
                    CharacterBoundsUpdateEvent</a> <a href="#ref-for-dfn-text-input-service-21"
                    title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-text-state"
        aria-label="Links in this document to definition: text state">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-text-state"
                aria-label="Permalink for definition: text state. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-text-state-1" title="§ 1.2.1 EditContext state">§ 1.2.1 EditContext state</a>
            </li>
            <li>
                <a href="#ref-for-dfn-text-state-2" title="§ 1.2.4 EditContext events">§ 1.2.4 EditContext events</a>
            </li>
            <li>
                <a href="#ref-for-dfn-text-state-3" title="§ 3.1.1 Handle input for EditContext">§ 3.1.1 Handle input
                    for EditContext</a>
            </li>
            <li>
                <a href="#ref-for-dfn-text-state-4" title="§ 3.1.4 Update the Text Edit Context">§ 3.1.4 Update the Text
                    Edit Context</a> <a href="#ref-for-dfn-text-state-5" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-text-state-6" title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-text"
        aria-label="Links in this document to definition: text">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-text"
                aria-label="Permalink for definition: text. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-text-1" title="§ 1.2.1 EditContext state">§ 1.2.1 EditContext state</a> <a
                    href="#ref-for-dfn-text-2" title="Reference 2">(2)</a> <a href="#ref-for-dfn-text-3"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-text-4" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-text-5" title="Reference 5">(5)</a> <a href="#ref-for-dfn-text-6"
                    title="Reference 6">(6)</a> <a href="#ref-for-dfn-text-7" title="Reference 7">(7)</a> <a
                    href="#ref-for-dfn-text-8" title="Reference 8">(8)</a> <a href="#ref-for-dfn-text-9"
                    title="Reference 9">(9)</a> <a href="#ref-for-dfn-text-10" title="Reference 10">(10)</a> <a
                    href="#ref-for-dfn-text-11" title="Reference 11">(11)</a> <a href="#ref-for-dfn-text-12"
                    title="Reference 12">(12)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-text-13" title="§ 3.1.1 Handle input for EditContext">§ 3.1.1 Handle input for
                    EditContext</a>
            </li>
            <li>
                <a href="#ref-for-dfn-text-14" title="§ 3.1.3 Update the EditContext">§ 3.1.3 Update the EditContext</a>
            </li>
            <li>
                <a href="#ref-for-dfn-text-15" title="§ 3.2 EditContext Interface">§ 3.2 EditContext Interface</a> <a
                    href="#ref-for-dfn-text-16" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-selection-start"
        aria-label="Links in this document to definition: selection start">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-selection-start"
                aria-label="Permalink for definition: selection start. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-selection-start-1" title="§ 1.2.1 EditContext state">§ 1.2.1 EditContext state</a>
            </li>
            <li>
                <a href="#ref-for-dfn-selection-start-2" title="§ 3.1.1 Handle input for EditContext">§ 3.1.1 Handle
                    input for EditContext</a>
            </li>
            <li>
                <a href="#ref-for-dfn-selection-start-3" title="§ 3.1.3 Update the EditContext">§ 3.1.3 Update the
                    EditContext</a>
            </li>
            <li>
                <a href="#ref-for-dfn-selection-start-4" title="§ 3.1.5 Dispatch text update event">§ 3.1.5 Dispatch
                    text update event</a>
            </li>
            <li>
                <a href="#ref-for-dfn-selection-start-5" title="§ 3.2 EditContext Interface">§ 3.2 EditContext
                    Interface</a> <a href="#ref-for-dfn-selection-start-6" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-selection-end"
        aria-label="Links in this document to definition: selection end">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-selection-end"
                aria-label="Permalink for definition: selection end. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-selection-end-1" title="§ 1.2.1 EditContext state">§ 1.2.1 EditContext state</a>
            </li>
            <li>
                <a href="#ref-for-dfn-selection-end-2" title="§ 3.1.1 Handle input for EditContext">§ 3.1.1 Handle input
                    for EditContext</a>
            </li>
            <li>
                <a href="#ref-for-dfn-selection-end-3" title="§ 3.1.3 Update the EditContext">§ 3.1.3 Update the
                    EditContext</a>
            </li>
            <li>
                <a href="#ref-for-dfn-selection-end-4" title="§ 3.1.5 Dispatch text update event">§ 3.1.5 Dispatch text
                    update event</a>
            </li>
            <li>
                <a href="#ref-for-dfn-selection-end-5" title="§ 3.2 EditContext Interface">§ 3.2 EditContext
                    Interface</a> <a href="#ref-for-dfn-selection-end-6" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-is-composing"
        aria-label="Links in this document to definition: is composing">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-is-composing"
                aria-label="Permalink for definition: is composing. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-is-composing-1" title="§ 3.1.1 Handle input for EditContext">§ 3.1.1 Handle input
                    for EditContext</a>
            </li>
            <li>
                <a href="#ref-for-dfn-is-composing-2" title="§ 3.1.3 Update the EditContext">§ 3.1.3 Update the
                    EditContext</a> <a href="#ref-for-dfn-is-composing-3" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-is-composing-4" title="Reference 3">(3)</a> <a href="#ref-for-dfn-is-composing-5"
                    title="Reference 4">(4)</a> <a href="#ref-for-dfn-is-composing-6" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-is-composing-7" title="Reference 6">(6)</a> <a href="#ref-for-dfn-is-composing-8"
                    title="Reference 7">(7)</a> <a href="#ref-for-dfn-is-composing-9" title="Reference 8">(8)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-is-composing-10" title="§ 3.1.8 Deactivate an EditContext">§ 3.1.8 Deactivate an
                    EditContext</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-composition-start"
        aria-label="Links in this document to definition: composition start">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-composition-start"
                aria-label="Permalink for definition: composition start. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-composition-start-1" title="§ 1.2.1 EditContext state">§ 1.2.1 EditContext
                    state</a>
            </li>
            <li>
                <a href="#ref-for-dfn-composition-start-2" title="§ 3.1.1 Handle input for EditContext">§ 3.1.1 Handle
                    input for EditContext</a>
            </li>
            <li>
                <a href="#ref-for-dfn-composition-start-3" title="§ 3.1.3 Update the EditContext">§ 3.1.3 Update the
                    EditContext</a> <a href="#ref-for-dfn-composition-start-4" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-composition-start-5" title="§ 3.1.7 Dispatch character bounds update event">§
                    3.1.7 Dispatch character bounds update event</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-composition-end"
        aria-label="Links in this document to definition: composition end">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-composition-end"
                aria-label="Permalink for definition: composition end. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-composition-end-1" title="§ 1.2.1 EditContext state">§ 1.2.1 EditContext state</a>
            </li>
            <li>
                <a href="#ref-for-dfn-composition-end-2" title="§ 3.1.1 Handle input for EditContext">§ 3.1.1 Handle
                    input for EditContext</a>
            </li>
            <li>
                <a href="#ref-for-dfn-composition-end-3" title="§ 3.1.3 Update the EditContext">§ 3.1.3 Update the
                    EditContext</a>
            </li>
            <li>
                <a href="#ref-for-dfn-composition-end-4" title="§ 3.1.7 Dispatch character bounds update event">§ 3.1.7
                    Dispatch character bounds update event</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-text-formats"
        aria-label="Links in this document to definition: text formats">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-text-formats"
                aria-label="Permalink for definition: text formats. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-text-formats-1" title="§ 3.1.1 Handle input for EditContext">§ 3.1.1 Handle input
                    for EditContext</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-control-bounds"
        aria-label="Links in this document to definition: control bounds">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-control-bounds"
                aria-label="Permalink for definition: control bounds. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-control-bounds-1" title="§ 1.2.1 EditContext state">§ 1.2.1 EditContext state</a>
                <a href="#ref-for-dfn-control-bounds-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-control-bounds-3" title="§ 3.2 EditContext Interface">§ 3.2 EditContext
                    Interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-selection-bounds"
        aria-label="Links in this document to definition: selection bounds">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-selection-bounds"
                aria-label="Permalink for definition: selection bounds. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-selection-bounds-1" title="§ 1.2.1 EditContext state">§ 1.2.1 EditContext
                    state</a> <a href="#ref-for-dfn-selection-bounds-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-selection-bounds-3" title="§ 3.2 EditContext Interface">§ 3.2 EditContext
                    Interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-codepoint-rects-start-index"
        aria-label="Links in this document to definition: codepoint rects start index">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-codepoint-rects-start-index"
                aria-label="Permalink for definition: codepoint rects start index. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-codepoint-rects-start-index-1" title="§ 3.2 EditContext Interface">§ 3.2
                    EditContext Interface</a> <a href="#ref-for-dfn-codepoint-rects-start-index-2"
                    title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-codepoint-rects"
        aria-label="Links in this document to definition: codepoint rects">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-codepoint-rects"
                aria-label="Permalink for definition: codepoint rects. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-codepoint-rects-1" title="§ 1.2.1 EditContext state">§ 1.2.1 EditContext state</a>
                <a href="#ref-for-dfn-codepoint-rects-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-codepoint-rects-3" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-codepoint-rects-4" title="§ 3.2 EditContext Interface">§ 3.2 EditContext
                    Interface</a> <a href="#ref-for-dfn-codepoint-rects-5" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-text-format"
        aria-label="Links in this document to definition: text format">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-text-format"
                aria-label="Permalink for definition: text format. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-text-format-1" title="§ 1.2.1 EditContext state">§ 1.2.1 EditContext state</a>
            </li>
            <li>
                <a href="#ref-for-dfn-text-format-2" title="§ 3.1.3 Update the EditContext">§ 3.1.3 Update the
                    EditContext</a>
            </li>
            <li>
                <a href="#ref-for-dfn-text-format-3" title="§ 3.1.6 Dispatch text format update event">§ 3.1.6 Dispatch
                    text format update event</a> <a href="#ref-for-dfn-text-format-4" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-text-format-5" title="§ 4.2 TextFormatUpdateEvent">§ 4.2 TextFormatUpdateEvent</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-range-start"
        aria-label="Links in this document to definition: range start">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-range-start"
                aria-label="Permalink for definition: range start. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-range-start-1" title="§ 3.1.6 Dispatch text format update event">§ 3.1.6 Dispatch
                    text format update event</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-range-end"
        aria-label="Links in this document to definition: range end">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-range-end"
                aria-label="Permalink for definition: range end. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-range-end-1" title="§ 3.1.6 Dispatch text format update event">§ 3.1.6 Dispatch
                    text format update event</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-underline-style"
        aria-label="Links in this document to definition: underline style">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-underline-style"
                aria-label="Permalink for definition: underline style. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-underline-style-1" title="§ 3.1.6 Dispatch text format update event">§ 3.1.6
                    Dispatch text format update event</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-underline-thickness"
        aria-label="Links in this document to definition: underline thickness">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-underline-thickness"
                aria-label="Permalink for definition: underline thickness. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-underline-thickness-1" title="§ 3.1.6 Dispatch text format update event">§ 3.1.6
                    Dispatch text format update event</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-client-coordinate-system"
        aria-label="Links in this document to definition: client coordinate system">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-client-coordinate-system"
                aria-label="Permalink for definition: client coordinate system. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-client-coordinate-system-1" title="§ 1.2.1 EditContext state">§ 1.2.1 EditContext
                    state</a> <a href="#ref-for-dfn-client-coordinate-system-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-client-coordinate-system-3" title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-associated-element"
        aria-label="Links in this document to definition: associated element">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-associated-element"
                aria-label="Permalink for definition: associated element. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-associated-element-1" title="§ 1.2.2 Association and activation">§ 1.2.2
                    Association and activation</a> <a href="#ref-for-dfn-associated-element-2"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-associated-element-3" title="Reference 3">(3)</a>
                <a href="#ref-for-dfn-associated-element-4" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-associated-element-5" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-associated-element-6" title="Reference 6">(6)</a> <a
                    href="#ref-for-dfn-associated-element-7" title="Reference 7">(7)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-associated-element-8"
                    title="§ 1.2.3 Differences for an EditContext editing host">§ 1.2.3 Differences for an EditContext
                    editing host</a> <a href="#ref-for-dfn-associated-element-9" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-associated-element-10" title="§ 1.2.6 Examples">§ 1.2.6 Examples</a> <a
                    href="#ref-for-dfn-associated-element-11" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-associated-element-12" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-associated-element-13" title="§ 3.1 Extensions to the HTMLElement interface">§ 3.1
                    Extensions to the HTMLElement interface</a> <a href="#ref-for-dfn-associated-element-14"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-associated-element-15" title="Reference 3">(3)</a>
                <a href="#ref-for-dfn-associated-element-16" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-associated-element-17" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-associated-element-18" title="Reference 6">(6)</a> <a
                    href="#ref-for-dfn-associated-element-19" title="Reference 7">(7)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-associated-element-20" title="§ 3.1.9 Determine the active EditContext">§ 3.1.9
                    Determine the active EditContext</a>
            </li>
            <li>
                <a href="#ref-for-dfn-associated-element-21" title="§ 3.2 EditContext Interface">§ 3.2 EditContext
                    Interface</a> <a href="#ref-for-dfn-associated-element-22" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-associated-element-23" title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-editcontext-editing-host"
        aria-label="Links in this document to definition: EditContext editing host">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-editcontext-editing-host"
                aria-label="Permalink for definition: EditContext editing host. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-editcontext-editing-host-1" title="§ 1.2.2 Association and activation">§ 1.2.2
                    Association and activation</a> <a href="#ref-for-dfn-editcontext-editing-host-2"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-editcontext-editing-host-3"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-editcontext-editing-host-4"
                    title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-editcontext-editing-host-5"
                    title="§ 1.2.3 Differences for an EditContext editing host">§ 1.2.3 Differences for an EditContext
                    editing host</a> <a href="#ref-for-dfn-editcontext-editing-host-6" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-editcontext-editing-host-7" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-editcontext-editing-host-8" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-editcontext-editing-host-9" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-editcontext-editing-host-10" title="Reference 6">(6)</a> <a
                    href="#ref-for-dfn-editcontext-editing-host-11" title="Reference 7">(7)</a> <a
                    href="#ref-for-dfn-editcontext-editing-host-12" title="Reference 8">(8)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-active-editcontext"
        aria-label="Links in this document to definition: active EditContext">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-active-editcontext"
                aria-label="Permalink for definition: active EditContext. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-active-editcontext-1" title="§ 1.2 The EditContext Model">§ 1.2 The EditContext
                    Model</a> <a href="#ref-for-dfn-active-editcontext-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-active-editcontext-3"
                    title="§ 1.2.3 Differences for an EditContext editing host">§ 1.2.3 Differences for an EditContext
                    editing host</a> <a href="#ref-for-dfn-active-editcontext-4" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-active-editcontext-5" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-active-editcontext-6" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-active-editcontext-7" title="§ 3.1 Extensions to the HTMLElement interface">§ 3.1
                    Extensions to the HTMLElement interface</a>
            </li>
            <li>
                <a href="#ref-for-dfn-active-editcontext-8" title="§ 3.1.1 Handle input for EditContext">§ 3.1.1 Handle
                    input for EditContext</a>
            </li>
            <li>
                <a href="#ref-for-dfn-active-editcontext-9" title="§ 3.1.4 Update the Text Edit Context">§ 3.1.4 Update
                    the Text Edit Context</a> <a href="#ref-for-dfn-active-editcontext-10" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-active-editcontext-11" title="§ 3.1.9 Determine the active EditContext">§ 3.1.9
                    Determine the active EditContext</a> <a href="#ref-for-dfn-active-editcontext-12"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-active-editcontext-13" title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-htmlelement-editcontext"
        aria-label="Links in this document to definition: editContext">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-htmlelement-editcontext"
                aria-label="Permalink for definition: editContext. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-htmlelement-editcontext-1" title="§ 1.2.2 Association and activation">§ 1.2.2
                    Association and activation</a> <a href="#ref-for-dom-htmlelement-editcontext-2"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-htmlelement-editcontext-3" title="§ 3.1 Extensions to the HTMLElement interface">§
                    3.1 Extensions to the HTMLElement interface</a> <a href="#ref-for-dom-htmlelement-editcontext-4"
                    title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-handle-input-for-editcontext"
        aria-label="Links in this document to definition: Handle input for EditContext">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-handle-input-for-editcontext"
                aria-label="Permalink for definition: Handle input for EditContext. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-handle-input-for-editcontext-1" title="§ 1.2.2 Association and activation">§ 1.2.2
                    Association and activation</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-editcontext-handled-inputtype"
        aria-label="Links in this document to definition: EditContext-handled inputType">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-editcontext-handled-inputtype"
                aria-label="Permalink for definition: EditContext-handled inputType. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-editcontext-handled-inputtype-1" title="§ 3.1.2 EditContext-handled inputType">§
                    3.1.2 EditContext-handled inputType</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-update-the-editcontext"
        aria-label="Links in this document to definition: Update the EditContext">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-update-the-editcontext"
                aria-label="Permalink for definition: Update the EditContext. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-update-the-editcontext-1"
                    title="§ 1.2.3 Differences for an EditContext editing host">§ 1.2.3 Differences for an EditContext
                    editing host</a>
            </li>
            <li>
                <a href="#ref-for-dfn-update-the-editcontext-2" title="§ 3.1.1 Handle input for EditContext">§ 3.1.1
                    Handle input for EditContext</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-update-the-text-edit-context"
        aria-label="Links in this document to definition: Update the Text Edit Context">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-update-the-text-edit-context"
                aria-label="Permalink for definition: Update the Text Edit Context. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-update-the-text-edit-context-1" title="§ 1.2.5 Event loop changes">§ 1.2.5 Event
                    loop changes</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-dispatch-text-update-event"
        aria-label="Links in this document to definition: Dispatch text update event">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-dispatch-text-update-event"
                aria-label="Permalink for definition: Dispatch text update event. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-dispatch-text-update-event-1" title="§ 3.1.3 Update the EditContext">§ 3.1.3
                    Update the EditContext</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-dispatch-text-format-update-event"
        aria-label="Links in this document to definition: Dispatch text format update event">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-dispatch-text-format-update-event"
                aria-label="Permalink for definition: Dispatch text format update event. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-dispatch-text-format-update-event-1" title="§ 3.1.3 Update the EditContext">§
                    3.1.3 Update the EditContext</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-dispatch-character-bounds-update-event"
        aria-label="Links in this document to definition: Dispatch character bounds update event">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-dispatch-character-bounds-update-event"
                aria-label="Permalink for definition: Dispatch character bounds update event. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-dispatch-character-bounds-update-event-1" title="§ 3.1.3 Update the EditContext">§
                    3.1.3 Update the EditContext</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-deactivate-an-editcontext"
        aria-label="Links in this document to definition: Deactivate an EditContext">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-deactivate-an-editcontext"
                aria-label="Permalink for definition: Deactivate an EditContext. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-deactivate-an-editcontext-1"
                    title="§ 1.2.3 Differences for an EditContext editing host">§ 1.2.3 Differences for an EditContext
                    editing host</a>
            </li>
            <li>
                <a href="#ref-for-dfn-deactivate-an-editcontext-2"
                    title="§ 3.1 Extensions to the HTMLElement interface">§ 3.1 Extensions to the HTMLElement
                    interface</a>
            </li>
            <li>
                <a href="#ref-for-dfn-deactivate-an-editcontext-3" title="§ 3.1.4 Update the Text Edit Context">§ 3.1.4
                    Update the Text Edit Context</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-determine-the-active-editcontext"
        aria-label="Links in this document to definition: Determine the active EditContext">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-determine-the-active-editcontext"
                aria-label="Permalink for definition: Determine the active EditContext. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-determine-the-active-editcontext-1" title="§ 3.1.4 Update the Text Edit Context">§
                    3.1.4 Update the Text Edit Context</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-editcontextinit"
        aria-label="Links in this document to definition: EditContextInit">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-editcontextinit"
                aria-label="Permalink for definition: EditContextInit. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-editcontextinit-1" title="§ 3.2 EditContext Interface">§ 3.2 EditContext
                    Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-editcontextinit-2" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-editcontextinit-text"
        aria-label="Links in this document to definition: text">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-editcontextinit-text"
                aria-label="Permalink for definition: text. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-editcontextinit-selectionstart"
        aria-label="Links in this document to definition: selectionStart">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-editcontextinit-selectionstart"
                aria-label="Permalink for definition: selectionStart. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-editcontextinit-selectionend"
        aria-label="Links in this document to definition: selectionEnd">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-editcontextinit-selectionend"
                aria-label="Permalink for definition: selectionEnd. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-editcontext"
        aria-label="Links in this document to definition: EditContext">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-editcontext"
                aria-label="Permalink for definition: EditContext. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-editcontext-1" title="§ Abstract">§ Abstract</a>
            </li>
            <li>
                <a href="#ref-for-dom-editcontext-2" title="§ 1.2 The EditContext Model">§ 1.2 The EditContext Model</a>
            </li>
            <li>
                <a href="#ref-for-dom-editcontext-3" title="§ 1.2.1 EditContext state">§ 1.2.1 EditContext state</a>
            </li>
            <li>
                <a href="#ref-for-dom-editcontext-4" title="§ 1.2.2 Association and activation">§ 1.2.2 Association and
                    activation</a> <a href="#ref-for-dom-editcontext-5" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-editcontext-6" title="Reference 3">(3)</a> <a href="#ref-for-dom-editcontext-7"
                    title="Reference 4">(4)</a> <a href="#ref-for-dom-editcontext-8" title="Reference 5">(5)</a> <a
                    href="#ref-for-dom-editcontext-9" title="Reference 6">(6)</a> <a href="#ref-for-dom-editcontext-10"
                    title="Reference 7">(7)</a> <a href="#ref-for-dom-editcontext-11" title="Reference 8">(8)</a> <a
                    href="#ref-for-dom-editcontext-12" title="Reference 9">(9)</a> <a href="#ref-for-dom-editcontext-13"
                    title="Reference 10">(10)</a> <a href="#ref-for-dom-editcontext-14" title="Reference 11">(11)</a> <a
                    href="#ref-for-dom-editcontext-15" title="Reference 12">(12)</a> <a
                    href="#ref-for-dom-editcontext-16" title="Reference 13">(13)</a>
            </li>
            <li>
                <a href="#ref-for-dom-editcontext-17" title="§ 1.2.3 Differences for an EditContext editing host">§
                    1.2.3 Differences for an EditContext editing host</a>
            </li>
            <li>
                <a href="#ref-for-dom-editcontext-18" title="§ 1.2.4 EditContext events">§ 1.2.4 EditContext events</a>
            </li>
            <li>
                <a href="#ref-for-dom-editcontext-19" title="§ 1.2.6 Examples">§ 1.2.6 Examples</a> <a
                    href="#ref-for-dom-editcontext-20" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-editcontext-21" title="§ 3.1 Extensions to the HTMLElement interface">§ 3.1
                    Extensions to the HTMLElement interface</a> <a href="#ref-for-dom-editcontext-22"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-editcontext-23" title="§ 3.1.2 EditContext-handled inputType">§ 3.1.2
                    EditContext-handled inputType</a> <a href="#ref-for-dom-editcontext-24" title="Reference 2">(2)</a>
                <a href="#ref-for-dom-editcontext-25" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-editcontext-26" title="§ 3.1.3 Update the EditContext">§ 3.1.3 Update the
                    EditContext</a>
            </li>
            <li>
                <a href="#ref-for-dom-editcontext-27" title="§ 3.1.5 Dispatch text update event">§ 3.1.5 Dispatch text
                    update event</a>
            </li>
            <li>
                <a href="#ref-for-dom-editcontext-28" title="§ 3.1.6 Dispatch text format update event">§ 3.1.6 Dispatch
                    text format update event</a>
            </li>
            <li>
                <a href="#ref-for-dom-editcontext-29" title="§ 3.1.7 Dispatch character bounds update event">§ 3.1.7
                    Dispatch character bounds update event</a>
            </li>
            <li>
                <a href="#ref-for-dom-editcontext-30" title="§ 3.1.8 Deactivate an EditContext">§ 3.1.8 Deactivate an
                    EditContext</a>
            </li>
            <li>
                <a href="#ref-for-dom-editcontext-31" title="§ 3.1.9 Determine the active EditContext">§ 3.1.9 Determine
                    the active EditContext</a> <a href="#ref-for-dom-editcontext-32" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-editcontext-33" title="Reference 3">(3)</a> <a href="#ref-for-dom-editcontext-34"
                    title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dom-editcontext-35" title="§ 3.2 EditContext Interface">§ 3.2 EditContext
                    Interface</a> <a href="#ref-for-dom-editcontext-36" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-editcontext-37" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-editcontext-38" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-editcontext-constructor"
        aria-label="Links in this document to definition: constructor">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-editcontext-constructor"
                aria-label="Permalink for definition: constructor. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-editcontext-updatetext"
        aria-label="Links in this document to definition: updateText">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-editcontext-updatetext"
                aria-label="Permalink for definition: updateText. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-editcontext-updateselection"
        aria-label="Links in this document to definition: updateSelection">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-editcontext-updateselection"
                aria-label="Permalink for definition: updateSelection. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-editcontext-updatecontrolbounds"
        aria-label="Links in this document to definition: updateControlBounds">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-editcontext-updatecontrolbounds"
                aria-label="Permalink for definition: updateControlBounds. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-editcontext-updateselectionbounds"
        aria-label="Links in this document to definition: updateSelectionBounds">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-editcontext-updateselectionbounds"
                aria-label="Permalink for definition: updateSelectionBounds. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-editcontext-updatecharacterbounds"
        aria-label="Links in this document to definition: updateCharacterBounds">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-editcontext-updatecharacterbounds"
                aria-label="Permalink for definition: updateCharacterBounds. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-editcontext-updatecharacterbounds-1" title="§ 1.2.4 EditContext events">§ 1.2.4
                    EditContext events</a> <a href="#ref-for-dom-editcontext-updatecharacterbounds-2"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-editcontext-updatecharacterbounds-3"
                    title="Reference 3">(3)</a> <a href="#ref-for-dom-editcontext-updatecharacterbounds-4"
                    title="Reference 4">(4)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-editcontext-attachedelements"
        aria-label="Links in this document to definition: attachedElements">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-editcontext-attachedelements"
                aria-label="Permalink for definition: attachedElements. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-editcontext-text"
        aria-label="Links in this document to definition: text">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-editcontext-text"
                aria-label="Permalink for definition: text. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-editcontext-text-1" title="§ 3.2 EditContext Interface">§ 3.2 EditContext
                    Interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-editcontext-selectionstart"
        aria-label="Links in this document to definition: selectionStart">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-editcontext-selectionstart"
                aria-label="Permalink for definition: selectionStart. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-editcontext-selectionstart-1" title="§ 3.2 EditContext Interface">§ 3.2
                    EditContext Interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-editcontext-selectionend"
        aria-label="Links in this document to definition: selectionEnd">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-editcontext-selectionend"
                aria-label="Permalink for definition: selectionEnd. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-editcontext-selectionend-1" title="§ 3.2 EditContext Interface">§ 3.2 EditContext
                    Interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-editcontext-characterboundsrangestart"
        aria-label="Links in this document to definition: characterBoundsRangeStart">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-editcontext-characterboundsrangestart"
                aria-label="Permalink for definition: characterBoundsRangeStart. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-editcontext-characterboundsrangestart-1" title="§ 3.2 EditContext Interface">§ 3.2
                    EditContext Interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-editcontext-characterbounds"
        aria-label="Links in this document to definition: characterBounds">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-editcontext-characterbounds"
                aria-label="Permalink for definition: characterBounds. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-editcontext-characterbounds-1" title="§ 3.2 EditContext Interface">§ 3.2
                    EditContext Interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-editcontext-ontextupdate"
        aria-label="Links in this document to definition: ontextupdate">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-editcontext-ontextupdate"
                aria-label="Permalink for definition: ontextupdate. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-editcontext-ontextformatupdate"
        aria-label="Links in this document to definition: ontextformatupdate">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-editcontext-ontextformatupdate"
                aria-label="Permalink for definition: ontextformatupdate. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-editcontext-oncharacterboundsupdate"
        aria-label="Links in this document to definition: oncharacterboundsupdate">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-editcontext-oncharacterboundsupdate"
                aria-label="Permalink for definition: oncharacterboundsupdate. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-editcontext-oncompositionstart"
        aria-label="Links in this document to definition: oncompositionstart">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-editcontext-oncompositionstart"
                aria-label="Permalink for definition: oncompositionstart. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-editcontext-oncompositionend"
        aria-label="Links in this document to definition: oncompositionend">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-editcontext-oncompositionend"
                aria-label="Permalink for definition: oncompositionend. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-textupdateeventinit"
        aria-label="Links in this document to definition: TextUpdateEventInit">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textupdateeventinit"
                aria-label="Permalink for definition: TextUpdateEventInit. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-textupdateeventinit-1" title="§ 4.1 TextUpdateEvent">§ 4.1 TextUpdateEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-textupdateeventinit-2" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-textupdateeventinit-updaterangestart"
        aria-label="Links in this document to definition: updateRangeStart">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textupdateeventinit-updaterangestart"
                aria-label="Permalink for definition: updateRangeStart. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-textupdateeventinit-updaterangeend"
        aria-label="Links in this document to definition: updateRangeEnd">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textupdateeventinit-updaterangeend"
                aria-label="Permalink for definition: updateRangeEnd. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-textupdateeventinit-text"
        aria-label="Links in this document to definition: text">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textupdateeventinit-text"
                aria-label="Permalink for definition: text. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-textupdateeventinit-selectionstart"
        aria-label="Links in this document to definition: selectionStart">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textupdateeventinit-selectionstart"
                aria-label="Permalink for definition: selectionStart. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-textupdateeventinit-selectionend"
        aria-label="Links in this document to definition: selectionEnd">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textupdateeventinit-selectionend"
                aria-label="Permalink for definition: selectionEnd. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-textupdateeventinit-compositionstart"
        aria-label="Links in this document to definition: compositionStart">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textupdateeventinit-compositionstart"
                aria-label="Permalink for definition: compositionStart. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-textupdateeventinit-compositionend"
        aria-label="Links in this document to definition: compositionEnd">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textupdateeventinit-compositionend"
                aria-label="Permalink for definition: compositionEnd. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-textupdateevent"
        aria-label="Links in this document to definition: TextUpdateEvent">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textupdateevent"
                aria-label="Permalink for definition: TextUpdateEvent. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-textupdateevent-1" title="§ 1.2.4 EditContext events">§ 1.2.4 EditContext
                    events</a>
            </li>
            <li>
                <a href="#ref-for-dom-textupdateevent-2" title="§ 1.2.6 Examples">§ 1.2.6 Examples</a>
            </li>
            <li>
                <a href="#ref-for-dom-textupdateevent-3" title="§ 3.1.5 Dispatch text update event">§ 3.1.5 Dispatch
                    text update event</a>
            </li>
            <li>
                <a href="#ref-for-dom-textupdateevent-4" title="§ 3.2 EditContext Interface">§ 3.2 EditContext
                    Interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-textupdateevent-constructor"
        aria-label="Links in this document to definition: constructor">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textupdateevent-constructor"
                aria-label="Permalink for definition: constructor. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-textupdateevent-updaterangestart"
        aria-label="Links in this document to definition: updateRangeStart">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textupdateevent-updaterangestart"
                aria-label="Permalink for definition: updateRangeStart. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-textupdateevent-updaterangestart-1" title="§ 4.1 TextUpdateEvent">§ 4.1
                    TextUpdateEvent</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-textupdateevent-updaterangeend"
        aria-label="Links in this document to definition: updateRangeEnd">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textupdateevent-updaterangeend"
                aria-label="Permalink for definition: updateRangeEnd. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-textupdateevent-updaterangeend-1" title="§ 4.1 TextUpdateEvent">§ 4.1
                    TextUpdateEvent</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-textupdateevent-text"
        aria-label="Links in this document to definition: text">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textupdateevent-text"
                aria-label="Permalink for definition: text. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-textupdateevent-text-1" title="§ 3.1.5 Dispatch text update event">§ 3.1.5
                    Dispatch text update event</a>
            </li>
            <li>
                <a href="#ref-for-dom-textupdateevent-text-2" title="§ 4.1 TextUpdateEvent">§ 4.1 TextUpdateEvent</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-textupdateevent-selectionstart"
        aria-label="Links in this document to definition: selectionStart">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textupdateevent-selectionstart"
                aria-label="Permalink for definition: selectionStart. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-textupdateevent-selectionstart-1" title="§ 3.1.5 Dispatch text update event">§
                    3.1.5 Dispatch text update event</a>
            </li>
            <li>
                <a href="#ref-for-dom-textupdateevent-selectionstart-2" title="§ 4.1 TextUpdateEvent">§ 4.1
                    TextUpdateEvent</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-textupdateevent-selectionend"
        aria-label="Links in this document to definition: selectionEnd">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textupdateevent-selectionend"
                aria-label="Permalink for definition: selectionEnd. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-textupdateevent-selectionend-1" title="§ 3.1.5 Dispatch text update event">§ 3.1.5
                    Dispatch text update event</a>
            </li>
            <li>
                <a href="#ref-for-dom-textupdateevent-selectionend-2" title="§ 4.1 TextUpdateEvent">§ 4.1
                    TextUpdateEvent</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-underlinestyle"
        aria-label="Links in this document to definition: UnderlineStyle">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-underlinestyle"
                aria-label="Permalink for definition: UnderlineStyle. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-underlinestyle-1" title="§ 1.2.1 EditContext state">§ 1.2.1 EditContext state</a>
            </li>
            <li>
                <a href="#ref-for-dom-underlinestyle-2" title="§ 1.2.4 EditContext events">§ 1.2.4 EditContext
                    events</a>
            </li>
            <li>
                <a href="#ref-for-dom-underlinestyle-3" title="§ 4.2 TextFormatUpdateEvent">§ 4.2
                    TextFormatUpdateEvent</a> <a href="#ref-for-dom-underlinestyle-4" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-underlinestyle-5" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-underlinestyle-6" title="§ A. IDL Index">§ A. IDL Index</a> <a
                    href="#ref-for-dom-underlinestyle-7" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-underlinestyle-none"
        aria-label="Links in this document to definition: none">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-underlinestyle-none"
                aria-label="Permalink for definition: none. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-underlinestyle-solid"
        aria-label="Links in this document to definition: solid">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-underlinestyle-solid"
                aria-label="Permalink for definition: solid. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-underlinestyle-dotted"
        aria-label="Links in this document to definition: dotted">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-underlinestyle-dotted"
                aria-label="Permalink for definition: dotted. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-underlinestyle-dashed"
        aria-label="Links in this document to definition: dashed">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-underlinestyle-dashed"
                aria-label="Permalink for definition: dashed. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-underlinestyle-wavy"
        aria-label="Links in this document to definition: wavy">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-underlinestyle-wavy"
                aria-label="Permalink for definition: wavy. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-underlinethickness"
        aria-label="Links in this document to definition: UnderlineThickness">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-underlinethickness"
                aria-label="Permalink for definition: UnderlineThickness. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-underlinethickness-1" title="§ 1.2.1 EditContext state">§ 1.2.1 EditContext
                    state</a>
            </li>
            <li>
                <a href="#ref-for-dom-underlinethickness-2" title="§ 1.2.4 EditContext events">§ 1.2.4 EditContext
                    events</a>
            </li>
            <li>
                <a href="#ref-for-dom-underlinethickness-3" title="§ 4.2 TextFormatUpdateEvent">§ 4.2
                    TextFormatUpdateEvent</a> <a href="#ref-for-dom-underlinethickness-4" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-underlinethickness-5" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-underlinethickness-6" title="§ A. IDL Index">§ A. IDL Index</a> <a
                    href="#ref-for-dom-underlinethickness-7" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-underlinethickness-none"
        aria-label="Links in this document to definition: none">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-underlinethickness-none"
                aria-label="Permalink for definition: none. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-underlinethickness-thin"
        aria-label="Links in this document to definition: thin">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-underlinethickness-thin"
                aria-label="Permalink for definition: thin. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-underlinethickness-thick"
        aria-label="Links in this document to definition: thick">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-underlinethickness-thick"
                aria-label="Permalink for definition: thick. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-textformatinit"
        aria-label="Links in this document to definition: TextFormatInit">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textformatinit"
                aria-label="Permalink for definition: TextFormatInit. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-textformatinit-1" title="§ 4.2 TextFormatUpdateEvent">§ 4.2
                    TextFormatUpdateEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-textformatinit-2" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-textformatinit-rangestart"
        aria-label="Links in this document to definition: rangeStart">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textformatinit-rangestart"
                aria-label="Permalink for definition: rangeStart. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-textformatinit-rangeend"
        aria-label="Links in this document to definition: rangeEnd">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textformatinit-rangeend"
                aria-label="Permalink for definition: rangeEnd. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-textformatinit-underlinestyle"
        aria-label="Links in this document to definition: underlineStyle">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textformatinit-underlinestyle"
                aria-label="Permalink for definition: underlineStyle. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-textformatinit-underlinethickness"
        aria-label="Links in this document to definition: underlineThickness">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textformatinit-underlinethickness"
                aria-label="Permalink for definition: underlineThickness. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-textformat"
        aria-label="Links in this document to definition: TextFormat">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textformat"
                aria-label="Permalink for definition: TextFormat. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-textformat-1" title="§ 3.1.6 Dispatch text format update event">§ 3.1.6 Dispatch
                    text format update event</a> <a href="#ref-for-dom-textformat-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-textformat-3" title="§ 4.2 TextFormatUpdateEvent">§ 4.2 TextFormatUpdateEvent</a>
                <a href="#ref-for-dom-textformat-4" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-textformat-5" title="§ A. IDL Index">§ A. IDL Index</a> <a
                    href="#ref-for-dom-textformat-6" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-textformat-constructor"
        aria-label="Links in this document to definition: constructor">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textformat-constructor"
                aria-label="Permalink for definition: constructor. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-textformat-rangestart"
        aria-label="Links in this document to definition: rangeStart">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textformat-rangestart"
                aria-label="Permalink for definition: rangeStart. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-textformat-rangestart-1" title="§ 3.1.6 Dispatch text format update event">§ 3.1.6
                    Dispatch text format update event</a>
            </li>
            <li>
                <a href="#ref-for-dom-textformat-rangestart-2" title="§ 4.2 TextFormatUpdateEvent">§ 4.2
                    TextFormatUpdateEvent</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-textformat-rangeend"
        aria-label="Links in this document to definition: rangeEnd">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textformat-rangeend"
                aria-label="Permalink for definition: rangeEnd. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-textformat-rangeend-1" title="§ 3.1.6 Dispatch text format update event">§ 3.1.6
                    Dispatch text format update event</a>
            </li>
            <li>
                <a href="#ref-for-dom-textformat-rangeend-2" title="§ 4.2 TextFormatUpdateEvent">§ 4.2
                    TextFormatUpdateEvent</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-textformat-underlinestyle"
        aria-label="Links in this document to definition: underlineStyle">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textformat-underlinestyle"
                aria-label="Permalink for definition: underlineStyle. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-textformat-underlinestyle-1" title="§ 3.1.6 Dispatch text format update event">§
                    3.1.6 Dispatch text format update event</a>
            </li>
            <li>
                <a href="#ref-for-dom-textformat-underlinestyle-2" title="§ 4.2 TextFormatUpdateEvent">§ 4.2
                    TextFormatUpdateEvent</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-textformat-underlinethickness"
        aria-label="Links in this document to definition: underlineThickness">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textformat-underlinethickness"
                aria-label="Permalink for definition: underlineThickness. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-textformat-underlinethickness-1"
                    title="§ 3.1.6 Dispatch text format update event">§ 3.1.6 Dispatch text format update event</a>
            </li>
            <li>
                <a href="#ref-for-dom-textformat-underlinethickness-2" title="§ 4.2 TextFormatUpdateEvent">§ 4.2
                    TextFormatUpdateEvent</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-textformatupdateeventinit"
        aria-label="Links in this document to definition: TextFormatUpdateEventInit">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textformatupdateeventinit"
                aria-label="Permalink for definition: TextFormatUpdateEventInit. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-textformatupdateeventinit-1" title="§ 4.2 TextFormatUpdateEvent">§ 4.2
                    TextFormatUpdateEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-textformatupdateeventinit-2" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-textformatupdateeventinit-textformats"
        aria-label="Links in this document to definition: textFormats">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textformatupdateeventinit-textformats"
                aria-label="Permalink for definition: textFormats. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-textformatupdateevent"
        aria-label="Links in this document to definition: TextFormatUpdateEvent">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textformatupdateevent"
                aria-label="Permalink for definition: TextFormatUpdateEvent. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-textformatupdateevent-1" title="§ 1.2.4 EditContext events">§ 1.2.4 EditContext
                    events</a> <a href="#ref-for-dom-textformatupdateevent-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-textformatupdateevent-3" title="§ 1.2.6 Examples">§ 1.2.6 Examples</a>
            </li>
            <li>
                <a href="#ref-for-dom-textformatupdateevent-4" title="§ 3.1.6 Dispatch text format update event">§ 3.1.6
                    Dispatch text format update event</a> <a href="#ref-for-dom-textformatupdateevent-5"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-textformatupdateevent-6" title="§ 3.2 EditContext Interface">§ 3.2 EditContext
                    Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-textformatupdateevent-7" title="§ 4.2 TextFormatUpdateEvent">§ 4.2
                    TextFormatUpdateEvent</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-textformatupdateevent-constructor"
        aria-label="Links in this document to definition: constructor">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textformatupdateevent-constructor"
                aria-label="Permalink for definition: constructor. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-textformatupdateevent-gettextformats"
        aria-label="Links in this document to definition: getTextFormats">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textformatupdateevent-gettextformats"
                aria-label="Permalink for definition: getTextFormats. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-textformatupdateevent-gettextformats-1" title="§ 4.2 TextFormatUpdateEvent">§ 4.2
                    TextFormatUpdateEvent</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-text-format-list"
        aria-label="Links in this document to definition: text format list">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-text-format-list"
                aria-label="Permalink for definition: text format list. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-text-format-list-1" title="§ 3.1.6 Dispatch text format update event">§ 3.1.6
                    Dispatch text format update event</a>
            </li>
            <li>
                <a href="#ref-for-dfn-text-format-list-2" title="§ 4.2 TextFormatUpdateEvent">§ 4.2
                    TextFormatUpdateEvent</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-characterboundsupdateeventinit"
        aria-label="Links in this document to definition: CharacterBoundsUpdateEventInit">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-characterboundsupdateeventinit"
                aria-label="Permalink for definition: CharacterBoundsUpdateEventInit. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-characterboundsupdateeventinit-1" title="§ 4.3 CharacterBoundsUpdateEvent">§ 4.3
                    CharacterBoundsUpdateEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-characterboundsupdateeventinit-2" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-characterboundsupdateeventinit-rangestart"
        aria-label="Links in this document to definition: rangeStart">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-characterboundsupdateeventinit-rangestart"
                aria-label="Permalink for definition: rangeStart. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-characterboundsupdateeventinit-rangeend"
        aria-label="Links in this document to definition: rangeEnd">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-characterboundsupdateeventinit-rangeend"
                aria-label="Permalink for definition: rangeEnd. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-characterboundsupdateevent"
        aria-label="Links in this document to definition: CharacterBoundsUpdateEvent">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-characterboundsupdateevent"
                aria-label="Permalink for definition: CharacterBoundsUpdateEvent. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-characterboundsupdateevent-1" title="§ 1.2.1 EditContext state">§ 1.2.1
                    EditContext state</a>
            </li>
            <li>
                <a href="#ref-for-dom-characterboundsupdateevent-2" title="§ 1.2.4 EditContext events">§ 1.2.4
                    EditContext events</a> <a href="#ref-for-dom-characterboundsupdateevent-3"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-characterboundsupdateevent-4"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-characterboundsupdateevent-5" title="§ 1.2.6 Examples">§ 1.2.6 Examples</a>
            </li>
            <li>
                <a href="#ref-for-dom-characterboundsupdateevent-6"
                    title="§ 3.1.7 Dispatch character bounds update event">§ 3.1.7 Dispatch character bounds update
                    event</a>
            </li>
            <li>
                <a href="#ref-for-dom-characterboundsupdateevent-7" title="§ 3.2 EditContext Interface">§ 3.2
                    EditContext Interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-characterboundsupdateevent-constructor"
        aria-label="Links in this document to definition: constructor">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-characterboundsupdateevent-constructor"
                aria-label="Permalink for definition: constructor. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-characterboundsupdateevent-rangestart"
        aria-label="Links in this document to definition: rangeStart">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-characterboundsupdateevent-rangestart"
                aria-label="Permalink for definition: rangeStart. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-characterboundsupdateevent-rangestart-1"
                    title="§ 3.1.7 Dispatch character bounds update event">§ 3.1.7 Dispatch character bounds update
                    event</a>
            </li>
            <li>
                <a href="#ref-for-dom-characterboundsupdateevent-rangestart-2"
                    title="§ 4.3 CharacterBoundsUpdateEvent">§ 4.3 CharacterBoundsUpdateEvent</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-characterboundsupdateevent-rangeend"
        aria-label="Links in this document to definition: rangeEnd">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-characterboundsupdateevent-rangeend"
                aria-label="Permalink for definition: rangeEnd. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-characterboundsupdateevent-rangeend-1"
                    title="§ 3.1.7 Dispatch character bounds update event">§ 3.1.7 Dispatch character bounds update
                    event</a>
            </li>
            <li>
                <a href="#ref-for-dom-characterboundsupdateevent-rangeend-2" title="§ 4.3 CharacterBoundsUpdateEvent">§
                    4.3 CharacterBoundsUpdateEvent</a>
            </li>
        </ul>
    </div>
    <script id="respec-highlight-vars">(() => {
            // @ts-check

            if (document.respec) {
                document.respec.ready.then(setupVarHighlighter);
            } else {
                setupVarHighlighter();
            }

            function setupVarHighlighter() {
                document
                    .querySelectorAll("var")
                    .forEach(varElem => varElem.addEventListener("click", highlightListener));
            }

            function highlightListener(ev) {
                ev.stopPropagation();
                const { target: varElem } = ev;
                const hightligtedElems = highlightVars(varElem);
                const resetListener = () => {
                    const hlColor = getHighlightColor(varElem);
                    hightligtedElems.forEach(el => removeHighlight(el, hlColor));
                    [...HL_COLORS.keys()].forEach(key => HL_COLORS.set(key, true));
                };
                if (hightligtedElems.length) {
                    document.body.addEventListener("click", resetListener, { once: true });
                }
            }

            // availability of highlight colors. colors from var.css
            const HL_COLORS = new Map([
                ["respec-hl-c1", true],
                ["respec-hl-c2", true],
                ["respec-hl-c3", true],
                ["respec-hl-c4", true],
                ["respec-hl-c5", true],
                ["respec-hl-c6", true],
                ["respec-hl-c7", true],
            ]);

            function getHighlightColor(target) {
                // return current colors if applicable
                const { value } = target.classList;
                const re = /respec-hl-\w+/;
                const activeClass = re.test(value) && value.match(re);
                if (activeClass) return activeClass[0];

                // first color preference
                if (HL_COLORS.get("respec-hl-c1") === true) return "respec-hl-c1";

                // otherwise get some other available color
                return [...HL_COLORS.keys()].find(c => HL_COLORS.get(c)) || "respec-hl-c1";
            }

            function highlightVars(varElem) {
                const textContent = norm(varElem.textContent);
                const parent = varElem.closest(".algorithm, section");
                const highlightColor = getHighlightColor(varElem);

                const varsToHighlight = [...parent.querySelectorAll("var")].filter(
                    el =>
                        norm(el.textContent) === textContent &&
                        el.closest(".algorithm, section") === parent
                );

                // update availability of highlight color
                const colorStatus = varsToHighlight[0].classList.contains("respec-hl");
                HL_COLORS.set(highlightColor, colorStatus);

                // highlight vars
                if (colorStatus) {
                    varsToHighlight.forEach(el => removeHighlight(el, highlightColor));
                    return [];
                } else {
                    varsToHighlight.forEach(el => addHighlight(el, highlightColor));
                }
                return varsToHighlight;
            }

            function removeHighlight(el, highlightColor) {
                el.classList.remove("respec-hl", highlightColor);
                // clean up empty class attributes so they don't come in export
                if (!el.classList.length) el.removeAttribute("class");
            }

            function addHighlight(elem, highlightColor) {
                elem.classList.add("respec-hl", highlightColor);
            }

            /**
             * Same as `norm` from src/core/utils, but our build process doesn't allow
             * imports in runtime scripts, so duplicated here.
             * @param {string} str
             */
            function norm(str) {
                return str.trim().replace(/\s+/g, " ");
            }
        })()</script>
    <script id="respec-dfn-panel">(() => {
                                               // @ts-check
                                               if (document.respec) {
                                                   document.respec.ready.then(setupPanel);
                                               } else {
                                                   setupPanel();
                                               }

                                               function setupPanel() {
                                                   const listener = panelListener();
                                                   document.body.addEventListener("keydown", listener);
                                                   document.body.addEventListener("click", listener);
                                               }

                                               function panelListener() {
                                                   /** @type {HTMLElement} */
                                                   let panel = null;
                                                   return event => {
                                                       const { target, type } = event;

                                                       if (!(target instanceof HTMLElement)) return;

                                                       // For keys, we only care about Enter key to activate the panel
                                                       // otherwise it's activated via a click.
                                                       if (type === "keydown" && event.key !== "Enter") return;

                                                       const action = deriveAction(event);

                                                       switch (action) {
                                                           case "show": {
                                                               hidePanel(panel);
                                                               /** @type {HTMLElement} */
                                                               const dfn = target.closest("dfn, .index-term");
                                                               panel = document.getElementById(`dfn-panel-for-${dfn.id}`);
                                                               const coords = deriveCoordinates(event);
                                                               displayPanel(dfn, panel, coords);
                                                               break;
                                                           }
                                                           case "dock": {
                                                               panel.style.left = null;
                                                               panel.style.top = null;
                                                               panel.classList.add("docked");
                                                               break;
                                                           }
                                                           case "hide": {
                                                               hidePanel(panel);
                                                               panel = null;
                                                               break;
                                                           }
                                                       }
                                                   };
                                               }

                                               /**
                                                * @param {MouseEvent|KeyboardEvent} event
                                                */
                                               function deriveCoordinates(event) {
                                                   const target = /** @type HTMLElement */ (event.target);

                                                   // We prevent synthetic AT clicks from putting
                                                   // the dialog in a weird place. The AT events sometimes
                                                   // lack coordinates, so they have clientX/Y = 0
                                                   const rect = target.getBoundingClientRect();
                                                   if (
                                                       event instanceof MouseEvent &&
                                                       event.clientX >= rect.left &&
                                                       event.clientY >= rect.top
                                                   ) {
                                                       // The event probably happened inside the bounding rect...
                                                       return { x: event.clientX, y: event.clientY };
                                                   }

                                                   // Offset to the middle of the element
                                                   const x = rect.x + rect.width / 2;
                                                   // Placed at the bottom of the element
                                                   const y = rect.y + rect.height;
                                                   return { x, y };
                                               }

                                               /**
                                                * @param {Event} event
                                                */
                                               function deriveAction(event) {
                                                   const target = /** @type {HTMLElement} */ (event.target);
                                                   const hitALink = !!target.closest("a");
                                                   if (target.closest("dfn:not([data-cite]), .index-term")) {
                                                       return hitALink ? "none" : "show";
                                                   }
                                                   if (target.closest(".dfn-panel")) {
                                                       if (hitALink) {
                                                           return target.classList.contains("self-link") ? "hide" : "dock";
                                                       }
                                                       const panel = target.closest(".dfn-panel");
                                                       return panel.classList.contains("docked") ? "hide" : "none";
                                                   }
                                                   if (document.querySelector(".dfn-panel:not([hidden])")) {
                                                       return "hide";
                                                   }
                                                   return "none";
                                               }

                                               /**
                                                * @param {HTMLElement} dfn
                                                * @param {HTMLElement} panel
                                                * @param {{ x: number, y: number }} clickPosition
                                                */
                                               function displayPanel(dfn, panel, { x, y }) {
                                                   panel.hidden = false;
                                                   // distance (px) between edge of panel and the pointing triangle (caret)
                                                   const MARGIN = 20;

                                                   const dfnRects = dfn.getClientRects();
                                                   // Find the `top` offset when the `dfn` can be spread across multiple lines
                                                   let closestTop = 0;
                                                   let minDiff = Infinity;
                                                   for (const rect of dfnRects) {
                                                       const { top, bottom } = rect;
                                                       const diffFromClickY = Math.abs((top + bottom) / 2 - y);
                                                       if (diffFromClickY < minDiff) {
                                                           minDiff = diffFromClickY;
                                                           closestTop = top;
                                                       }
                                                   }

                                                   const top = window.scrollY + closestTop + dfnRects[0].height;
                                                   const left = x - MARGIN;
                                                   panel.style.left = `${left}px`;
                                                   panel.style.top = `${top}px`;

                                                   // Find if the panel is flowing out of the window
                                                   const panelRect = panel.getBoundingClientRect();
                                                   const SCREEN_WIDTH = Math.min(window.innerWidth, window.screen.width);
                                                   if (panelRect.right > SCREEN_WIDTH) {
                                                       const newLeft = Math.max(MARGIN, x + MARGIN - panelRect.width);
                                                       const newCaretOffset = left - newLeft;
                                                       panel.style.left = `${newLeft}px`;
                                                       /** @type {HTMLElement} */
                                                       const caret = panel.querySelector(".caret");
                                                       caret.style.left = `${newCaretOffset}px`;
                                                   }

                                                   // As it's a dialog, we trap focus.
                                                   // TODO: when <dialog> becomes a implemented, we should really
                                                   // use that.
                                                   trapFocus(panel, dfn);
                                               }

                                               /**
                                                * @param {HTMLElement} panel
                                                * @param {HTMLElement} dfn
                                                * @returns
                                                */
                                               function trapFocus(panel, dfn) {
                                                   /** @type NodeListOf<HTMLAnchorElement> elements */
                                                   const anchors = panel.querySelectorAll("a[href]");
                                                   // No need to trap focus
                                                   if (!anchors.length) return;

                                                   // Move focus to first anchor element
                                                   const first = anchors.item(0);
                                                   first.focus();

                                                   const trapListener = createTrapListener(anchors, panel, dfn);
                                                   panel.addEventListener("keydown", trapListener);

                                                   // Hiding the panel releases the trap
                                                   const mo = new MutationObserver(records => {
                                                       const [record] = records;
                                                       const target = /** @type HTMLElement */ (record.target);
                                                       if (target.hidden) {
                                                           panel.removeEventListener("keydown", trapListener);
                                                           mo.disconnect();
                                                       }
                                                   });
                                                   mo.observe(panel, { attributes: true, attributeFilter: ["hidden"] });
                                               }

                                               /**
                                                *
                                                * @param {NodeListOf<HTMLAnchorElement>} anchors
                                                * @param {HTMLElement} panel
                                                * @param {HTMLElement} dfn
                                                * @returns
                                                */
                                               function createTrapListener(anchors, panel, dfn) {
                                                   const lastIndex = anchors.length - 1;
                                                   let currentIndex = 0;
                                                   return event => {
                                                       switch (event.key) {
                                                           // Hitting "Tab" traps us in a nice loop around elements.
                                                           case "Tab": {
                                                               event.preventDefault();
                                                               currentIndex += event.shiftKey ? -1 : +1;
                                                               if (currentIndex < 0) {
                                                                   currentIndex = lastIndex;
                                                               } else if (currentIndex > lastIndex) {
                                                                   currentIndex = 0;
                                                               }
                                                               anchors.item(currentIndex).focus();
                                                               break;
                                                           }

                                                           // Hitting "Enter" on an anchor releases the trap.
                                                           case "Enter":
                                                               hidePanel(panel);
                                                               break;

                                                           // Hitting "Escape" returns focus to dfn.
                                                           case "Escape":
                                                               hidePanel(panel);
                                                               dfn.focus();
                                                               return;
                                                       }
                                                   };
                                               }

                                               /** @param {HTMLElement} panel */
                                               function hidePanel(panel) {
                                                   if (!panel) return;
                                                   panel.hidden = true;
                                                   panel.classList.remove("docked");
                                               }
                                           })()</script>
    <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
</body>

</html>