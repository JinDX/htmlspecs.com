<!DOCTYPE html>
<html lang="zh-hans">

<head>
    <meta charset="utf-8">
    <!-- <meta name="generator" content="ReSpec 35.6.0"> -->
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <style>
        span.example-title {
            text-transform: none
        }

        :is(aside, div).example,
        div.illegal-example {
            padding: .5em;
            margin: 1em 0;
            position: relative;
            clear: both
        }

        div.illegal-example {
            color: red
        }

        div.illegal-example p {
            color: #000
        }

        aside.example div.example {
            border-left-width: .1em;
            border-color: #999;
            background: #fff
        }
    </style>
    <style>
        .issue-label {
            text-transform: initial
        }

        .warning>p:first-child {
            margin-top: 0
        }

        .warning {
            padding: .5em;
            border-left-width: .5em;
            border-left-style: solid
        }

        span.warning {
            padding: .1em .5em .15em
        }

        .issue.closed span.issue-number {
            text-decoration: line-through
        }

        .issue.closed span.issue-number::after {
            content: " (Closed)";
            font-size: smaller
        }

        .warning {
            border-color: #f11;
            border-color: var(--warning-border, #f11);
            border-width: .2em;
            border-style: solid;
            background: #fbe9e9;
            background: var(--warning-bg, #fbe9e9);
            color: #000;
            color: var(--text, #000)
        }

        .warning-title:before {
            content: "⚠";
            font-size: 1.3em;
            float: left;
            padding-right: .3em;
            margin-top: -.3em
        }

        li.task-list-item {
            list-style: none
        }

        input.task-list-item-checkbox {
            margin: 0 .35em .25em -1.6em;
            vertical-align: middle
        }

        .issue a.respec-gh-label {
            padding: 5px;
            margin: 0 2px 0 2px;
            font-size: 10px;
            text-transform: none;
            text-decoration: none;
            font-weight: 700;
            border-radius: 4px;
            position: relative;
            bottom: 2px;
            border: none;
            display: inline-block
        }
    </style>
    <style>
        pre.idl {
            padding: 1em;
            position: relative
        }

        pre.idl>code {
            color: #000;
            color: var(--text, #000)
        }

        @media print {
            pre.idl {
                white-space: pre-wrap
            }
        }

        .idlHeader {
            display: block;
            width: 150px;
            background: #8ccbf2;
            background: var(--def-border, #8ccbf2);
            color: #fff;
            color: var(--defrow-border, #fff);
            font-family: sans-serif;
            font-weight: 700;
            margin: -1em 0 1em -1em;
            height: 28px;
            line-height: 28px
        }

        .idlHeader a.self-link {
            margin-left: .3cm;
            text-decoration: none;
            border-bottom: none;
            color: inherit
        }

        .idlID {
            font-weight: 700;
            color: #005a9c
        }

        .idlType {
            color: #005a9c
        }

        .idlName {
            color: #ff4500
        }

        .idlName a {
            color: #ff4500;
            border-bottom: 1px dotted #ff4500;
            text-decoration: none
        }

        a.idlEnumItem {
            color: #000;
            border-bottom: 1px dotted #ccc;
            text-decoration: none
        }

        .idlSuperclass {
            font-style: italic;
            color: #005a9c
        }

        .idlDefaultValue,
        .idlParamName {
            font-style: italic
        }

        .extAttr {
            color: #666
        }

        .idlSectionComment {
            color: gray
        }

        .idlIncludes a {
            font-weight: 700
        }

        .respec-button-copy-paste:focus {
            text-decoration: none;
            border-color: #51a7e8;
            outline: 0;
            box-shadow: 0 0 5px rgba(81, 167, 232, .5)
        }

        .respec-button-copy-paste:is(:focus:hover, .selected:focus) {
            border-color: #51a7e8
        }

        .respec-button-copy-paste:is(:hover, :active, .zeroclipboard-is-hover, .zeroclipboard-is-active) {
            text-decoration: none;
            background-color: #ddd;
            background-image: linear-gradient(#eee, #ddd);
            border-color: #ccc
        }

        .respec-button-copy-paste:is(:active, .selected, .zeroclipboard-is-active) {
            background-color: #dcdcdc;
            background-image: none;
            border-color: #b5b5b5;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, .15)
        }

        .respec-button-copy-paste.selected:hover {
            background-color: #cfcfcf
        }

        .respec-button-copy-paste:is(:disabled, :disabled:hover, .disabled, .disabled:hover) {
            color: rgba(102, 102, 102, .5);
            cursor: default;
            background-color: rgba(229, 229, 229, .5);
            background-image: none;
            border-color: rgba(197, 197, 197, .5);
            box-shadow: none
        }

        @media print {
            .respec-button-copy-paste {
                visibility: hidden
            }
        }
    </style>
    <style>
        dfn {
            cursor: pointer
        }

        .dfn-panel {
            position: absolute;
            z-index: 35;
            min-width: 300px;
            max-width: 500px;
            padding: .5em .75em;
            margin-top: .6em;
            font-family: "Helvetica Neue", sans-serif;
            font-size: small;
            background: #fff;
            background: var(--indextable-hover-bg, #fff);
            color: #000;
            color: var(--text, #000);
            box-shadow: 0 1em 3em -.4em rgba(0, 0, 0, .3), 0 0 1px 1px rgba(0, 0, 0, .05);
            box-shadow: 0 1em 3em -.4em var(--tocsidebar-shadow, rgba(0, 0, 0, .3)), 0 0 1px 1px var(--tocsidebar-shadow, rgba(0, 0, 0, .05));
            border-radius: 2px
        }

        .dfn-panel:not(.docked)>.caret {
            position: absolute;
            top: -9px
        }

        .dfn-panel:not(.docked)>.caret::after,
        .dfn-panel:not(.docked)>.caret::before {
            content: "";
            position: absolute;
            border: 10px solid transparent;
            border-top: 0;
            border-bottom: 10px solid #fff;
            border-bottom-color: var(--indextable-hover-bg, #fff);
            top: 0
        }

        .dfn-panel:not(.docked)>.caret::before {
            border-bottom: 9px solid #a2a9b1;
            border-bottom-color: var(--indextable-hover-bg, #a2a9b1)
        }

        .dfn-panel * {
            margin: 0
        }

        .dfn-panel b {
            display: block;
            color: #000;
            color: var(--text, #000);
            margin-top: .25em
        }

        .dfn-panel ul a[href] {
            color: #333;
            color: var(--text, #333)
        }

        .dfn-panel>div {
            display: flex
        }

        .dfn-panel a.self-link {
            font-weight: 700;
            margin-right: auto
        }

        .dfn-panel .marker {
            padding: .1em;
            margin-left: .5em;
            border-radius: .2em;
            text-align: center;
            white-space: nowrap;
            font-size: 90%;
            color: #040b1c
        }

        .dfn-panel .marker.dfn-exported {
            background: #d1edfd;
            box-shadow: 0 0 0 .125em #1ca5f940
        }

        .dfn-panel .marker.idl-block {
            background: #8ccbf2;
            box-shadow: 0 0 0 .125em #0670b161
        }

        .dfn-panel a:not(:hover) {
            text-decoration: none !important;
            border-bottom: none !important
        }

        .dfn-panel a[href]:hover {
            border-bottom-width: 1px
        }

        .dfn-panel ul {
            padding: 0
        }

        .dfn-panel li {
            margin-left: 1em
        }

        .dfn-panel.docked {
            position: fixed;
            left: .5em;
            top: unset;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - .75em * 2 - .5em - .2em * 2);
            max-height: 30vh;
            overflow: auto
        }
    </style>


    <title>EditContext API</title>



    <style id="respec-mainstyle">
        @keyframes pop {
            0% {
                transform: scale(1, 1)
            }

            25% {
                transform: scale(1.25, 1.25);
                opacity: .75
            }

            100% {
                transform: scale(1, 1)
            }
        }

        a.internalDFN {
            color: inherit;
            border-bottom: 1px solid #99c;
            text-decoration: none
        }

        a.externalDFN {
            color: inherit;
            border-bottom: 1px dotted #ccc;
            text-decoration: none
        }

        a.bibref {
            text-decoration: none
        }

        .respec-offending-element:target {
            animation: pop .25s ease-in-out 0s 1
        }

        .respec-offending-element,
        a[href].respec-offending-element {
            text-decoration: red wavy underline
        }

        @supports not (text-decoration:red wavy underline) {
            .respec-offending-element:not(pre) {
                display: inline-block
            }

            .respec-offending-element {
                background: url(data:image/gif;base64,R0lGODdhBAADAPEAANv///8AAP///wAAACwAAAAABAADAEACBZQjmIAFADs=) bottom repeat-x
            }
        }

        #references :target {
            background: #eaf3ff;
            animation: pop .4s ease-in-out 0s 1
        }

        cite .bibref {
            font-style: italic
        }

        a[href].orcid {
            padding-left: 4px;
            padding-right: 4px
        }

        a[href].orcid>svg {
            margin-bottom: -2px
        }

        ol.tof,
        ul.tof {
            list-style: none outside none
        }

        .caption {
            margin-top: .5em;
            font-style: italic
        }

        #issue-summary>ul {
            column-count: 2
        }

        #issue-summary li {
            list-style: none;
            display: inline-block
        }

        details.respec-tests-details {
            margin-left: 1em;
            display: inline-block;
            vertical-align: top
        }

        details.respec-tests-details>* {
            padding-right: 2em
        }

        details.respec-tests-details[open] {
            z-index: 999999;
            position: absolute;
            border: thin solid #cad3e2;
            border-radius: .3em;
            background-color: #fff;
            padding-bottom: .5em
        }

        details.respec-tests-details[open]>summary {
            border-bottom: thin solid #cad3e2;
            padding-left: 1em;
            margin-bottom: 1em;
            line-height: 2em
        }

        details.respec-tests-details>ul {
            width: 100%;
            margin-top: -.3em
        }

        details.respec-tests-details>li {
            padding-left: 1em
        }

        .self-link:hover {
            opacity: 1;
            text-decoration: none;
            background-color: transparent
        }

        aside.example .marker>a.self-link {
            color: inherit
        }

        .header-wrapper {
            display: flex;
            align-items: baseline
        }

        :is(h2, h3, h4, h5, h6):not(#toc>h2, #abstract>h2, #sotd>h2, .head>h2) {
            position: relative;
            left: -.5em
        }

        :is(h2, h3, h4, h5, h6):not(#toch2)+a.self-link {
            color: inherit;
            order: -1;
            position: relative;
            left: -1.1em;
            font-size: 1rem;
            opacity: .5
        }

        :is(h2, h3, h4, h5, h6)+a.self-link::before {
            content: "§";
            text-decoration: none;
            color: var(--heading-text)
        }

        :is(h2, h3)+a.self-link {
            top: -.2em
        }

        :is(h4, h5, h6)+a.self-link::before {
            color: #000
        }

        @media (max-width:767px) {
            dd {
                margin-left: 0
            }
        }

        @media print {
            .removeOnSave {
                display: none
            }
        }
    </style>
    <meta name="color-scheme" content="light">
    <!-- <meta name="revision" content="1a30b4bb8781c562aac0f2e33fbdc8e36529f91c"> -->
    <meta name="description" content="EditContext 是一个允许作者更直接参与文本输入过程的 API。">
    <link rel="canonical" href="https://www.w3.org/TR/edit-context/">
    <style>
        .hljs {
            --base: #fafafa;
            --mono-1: #383a42;
            --mono-2: #686b77;
            --mono-3: #717277;
            --hue-1: #0b76c5;
            --hue-2: #336ae3;
            --hue-3: #a626a4;
            --hue-4: #42803c;
            --hue-5: #ca4706;
            --hue-5-2: #c91243;
            --hue-6: #986801;
            --hue-6-2: #9a6a01
        }

        @media (prefers-color-scheme:dark) {
            .hljs {
                --base: #282c34;
                --mono-1: #abb2bf;
                --mono-2: #818896;
                --mono-3: #5c6370;
                --hue-1: #56b6c2;
                --hue-2: #61aeee;
                --hue-3: #c678dd;
                --hue-4: #98c379;
                --hue-5: #e06c75;
                --hue-5-2: #be5046;
                --hue-6: #d19a66;
                --hue-6-2: #e6c07b
            }
        }

        .hljs {
            display: block;
            overflow-x: auto;
            padding: .5em;
            color: #383a42;
            color: var(--mono-1, #383a42);
            background: #fafafa;
            background: var(--base, #fafafa)
        }

        .hljs-comment,
        .hljs-quote {
            color: #717277;
            color: var(--mono-3, #717277);
            font-style: italic
        }

        .hljs-doctag,
        .hljs-formula,
        .hljs-keyword {
            color: #a626a4;
            color: var(--hue-3, #a626a4)
        }

        .hljs-deletion,
        .hljs-name,
        .hljs-section,
        .hljs-selector-tag,
        .hljs-subst {
            color: #ca4706;
            color: var(--hue-5, #ca4706);
            font-weight: 700
        }

        .hljs-literal {
            color: #0b76c5;
            color: var(--hue-1, #0b76c5)
        }

        .hljs-addition,
        .hljs-attribute,
        .hljs-meta-string,
        .hljs-regexp,
        .hljs-string {
            color: #42803c;
            color: var(--hue-4, #42803c)
        }

        .hljs-built_in,
        .hljs-class .hljs-title {
            color: #9a6a01;
            color: var(--hue-6-2, #9a6a01)
        }

        .hljs-attr,
        .hljs-number,
        .hljs-selector-attr,
        .hljs-selector-class,
        .hljs-selector-pseudo,
        .hljs-template-variable,
        .hljs-type,
        .hljs-variable {
            color: #986801;
            color: var(--hue-6, #986801)
        }

        .hljs-bullet,
        .hljs-link,
        .hljs-meta,
        .hljs-selector-id,
        .hljs-symbol,
        .hljs-title {
            color: #336ae3;
            color: var(--hue-2, #336ae3)
        }

        .hljs-emphasis {
            font-style: italic
        }

        .hljs-strong {
            font-weight: 700
        }

        .hljs-link {
            text-decoration: underline
        }
    </style>
    <style>
        var:hover {
            text-decoration: underline;
            cursor: pointer
        }

        var.respec-hl {
            color: var(--color, #000);
            background-color: var(--bg-color);
            box-shadow: 0 0 0 2px var(--bg-color)
        }

        @media (prefers-color-scheme:dark) {
            var.respec-hl {
                filter: saturate(.9) brightness(.9)
            }
        }

        var.respec-hl-c1 {
            --bg-color: #f4d200
        }

        var.respec-hl-c2 {
            --bg-color: #ff87a2
        }

        var.respec-hl-c3 {
            --bg-color: #96e885
        }

        var.respec-hl-c4 {
            --bg-color: #3eeed2
        }

        var.respec-hl-c5 {
            --bg-color: #eacfb6
        }

        var.respec-hl-c6 {
            --bg-color: #82ddff
        }

        var.respec-hl-c7 {
            --bg-color: #ffbcf2
        }

        @media print {
            var.respec-hl {
                background: 0 0;
                color: #000;
                box-shadow: unset
            }
        }
    </style>
    <style>
        var {
            position: relative;
            cursor: pointer
        }

        var[data-type]::after,
        var[data-type]::before {
            position: absolute;
            left: 50%;
            top: -6px;
            opacity: 0;
            transition: opacity .4s;
            pointer-events: none
        }

        var[data-type]::before {
            content: "";
            transform: translateX(-50%);
            border-width: 4px 6px 0 6px;
            border-style: solid;
            border-color: transparent;
            border-top-color: #222
        }

        var[data-type]::after {
            content: attr(data-type);
            transform: translateX(-50%) translateY(-100%);
            background: #222;
            text-align: center;
            font-family: "Dank Mono", "Fira Code", monospace;
            font-style: normal;
            padding: 6px;
            border-radius: 3px;
            color: #daca88;
            text-indent: 0;
            font-weight: 400
        }

        var[data-type]:hover::after,
        var[data-type]:hover::before {
            opacity: 1
        }
    </style>
    <script id="initialUserConfig" type="application/json">{
  "github": "w3c/edit-context",
  "specStatus": "WD",
  "shortName": "edit-context",
  "editors": [
    {
      "name": "Dan Clark",
      "mailto": "daniec@microsoft.com",
      "company": "Microsoft",
      "w3cid": 113024,
      "url": "mailto:daniec@microsoft.com"
    }
  ],
  "formerEditors": [
    {
      "name": "Shih-ling Keng",
      "mailto": "shihken@microsoft.com",
      "company": "Microsoft",
      "w3cid": 126951,
      "retiredDate": "2025-11-10",
      "url": "mailto:shihken@microsoft.com"
    },
    {
      "name": "Anupam Snigdha",
      "mailto": "snianu@microsoft.com",
      "company": "Microsoft",
      "w3cid": 126950,
      "retiredDate": "2025-11-10",
      "url": "mailto:snianu@microsoft.com"
    },
    {
      "name": "Bo Cupp",
      "mailto": "pcupp@microsoft.com",
      "company": "Microsoft",
      "w3cid": 126951,
      "retiredDate": "2025-11-10",
      "url": "mailto:pcupp@microsoft.com"
    }
  ],
  "wgPublicList": "public-editing-tf",
  "otherLinks": [
    {
      "key": "Participate",
      "data": [
        {
          "value": "We are on GitHub.",
          "href": "https://github.com/w3c/edit-context"
        },
        {
          "value": "File a bug.",
          "href": "https://github.com/w3c/edit-context/issues"
        },
        {
          "value": "Commit history.",
          "href": "https://github.com/w3c/edit-context/commits/gh-pages"
        },
        {
          "value": "Mailing list.",
          "href": "http://lists.w3.org/Archives/Public/public-editing-tf/"
        }
      ]
    }
  ],
  "group": "webediting",
  "edDraftURI": "https://w3c.github.io/edit-context/",
  "xref": [
    "WebIDL",
    "DOM",
    "HTML",
    "geometry-1",
    "uievents",
    "infra",
    "input-events"
  ],
  "gitRevision": "1a30b4bb8781c562aac0f2e33fbdc8e36529f91c",
  "publishDate": "2025-11-12",
  "previousMaturity": "WD",
  "previousPublishDate": "2025-09-09",
  "publishISODate": "2025-11-12T00:00:00.000Z",
  "generatedSubtitle": "W3C Working Draft 12 November 2025"
}</script>
    <link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2021/W3C-WD">
</head>

<body class="h-entry" data-cite="WEBIDL WebIDL DOM HTML geometry-1 uievents infra input-events">
    <div class="head">
        <p class="logos"><a class="logo" href="https://www.w3.org/"><img crossorigin="" alt="W3C" height="48"
                    src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72">
            </a></p>
        <h1 id="title" class="title">EditContext API 编辑上下文接口</h1>
        <p id="w3c-state"><a href="https://www.w3.org/standards/types#WD">W3C 工作草案</a> <time class="dt-published"
                datetime="2025-11-12">2025年11月12日</time></p>
        <details open="">
            <summary>关于本文档的更多细节</summary>
            <dl>
                <dt>本版本：</dt>
                <dd>
                    <a class="u-url"
                        href="https://www.w3.org/TR/2025/WD-edit-context-20251112/">https://www.w3.org/TR/2025/WD-edit-context-20251112/</a>
                </dd>
                <dt>最新发布版本：</dt>
                <dd>
                    <a href="https://www.w3.org/TR/edit-context/">https://www.w3.org/TR/edit-context/</a>
                </dd>
                <dt>最新编辑者草稿：</dt>
                <dd><a href="https://w3c.github.io/edit-context/">https://w3c.github.io/edit-context/</a></dd>
                <dt>历史：</dt>
                <dd>
                    <a
                        href="https://www.w3.org/standards/history/edit-context/">https://www.w3.org/standards/history/edit-context/</a>
                </dd>
                <dd>
                    <a href="https://github.com/w3c/edit-context/commits/">提交历史</a>
                </dd>

                <dt>编辑：</dt>
                <dd class="editor p-author h-card vcard" data-editor-id="113024">
                    <a class="ed_mailto u-email email p-name" href="mailto:daniec@microsoft.com">Dan Clark</a> (<span
                        class="p-org org h-org">微软</span>)
                </dd>
                <dt>
                    前编辑：
                </dt>
                <dd class="editor p-author h-card vcard" data-editor-id="126951">
                    <a class="ed_mailto u-email email p-name" href="mailto:shihken@microsoft.com">Shih-ling Keng</a>
                    (<span class="p-org org h-org">微软</span>) - 至 <time datetime="2025-11-10">2025年11月10日</time>
                </dd>
                <dd class="editor p-author h-card vcard" data-editor-id="126950">
                    <a class="ed_mailto u-email email p-name" href="mailto:snianu@microsoft.com">Anupam Snigdha</a>
                    (<span class="p-org org h-org">微软</span>) - 至 <time datetime="2025-11-10">2025年11月10日</time>
                </dd>
                <dd class="editor p-author h-card vcard" data-editor-id="126951">
                    <a class="ed_mailto u-email email p-name" href="mailto:pcupp@microsoft.com">Bo Cupp</a> (<span
                        class="p-org org h-org">微软</span>) - 至 <time datetime="2025-11-10">2025年11月10日</time>
                </dd>

                <dt>反馈：</dt>
                <dd>
                    <a href="https://github.com/w3c/edit-context/">GitHub w3c/edit-context</a>
                    (<a href="https://github.com/w3c/edit-context/pulls/">拉取请求</a>,
                    <a href="https://github.com/w3c/edit-context/issues/new/choose">新建议</a>,
                    <a href="https://github.com/w3c/edit-context/issues/">开放的建议</a>)
                </dd>
                <dd><a
                        href="mailto:public-editing-tf@w3.org?subject=%5Bedit-context%5D%20YOUR%20TOPIC%20HERE">public-editing-tf@w3.org</a>
                    主题行 <kbd>[edit-context] <em>… 信息主题 …</em></kbd> (<a rel="discussion"
                        href="https://lists.w3.org/Archives/Public/public-editing-tf">存档</a>)</dd>

                <dt>参与</dt>
                <dd>
                    <a href="https://github.com/w3c/edit-context">我们在 GitHub。</a>
                </dd>
                <dd>
                    <a href="https://github.com/w3c/edit-context/issues">提交 bug。</a>
                </dd>
                <dd>
                    <a href="https://github.com/w3c/edit-context/commits/gh-pages">提交历史。</a>
                </dd>
                <dd>
                    <a href="http://lists.w3.org/Archives/Public/public-editing-tf/">邮件列表。</a>
                </dd>
            </dl>
        </details>


        <p class="copyright">
            <a href="https://www.w3.org/policies/#copyright">Copyright</a>
            ©
            2025

            <a href="https://www.w3.org/">World Wide Web Consortium</a>.
            <abbr title="World Wide Web Consortium">W3C</abbr><sup>®</sup>
            <a href="https://www.w3.org/policies/#Legal_Disclaimer">liability</a>,
            <a href="https://www.w3.org/policies/#W3C_Trademarks">trademark</a> and
            <a rel="license" href="https://www.w3.org/copyright/software-license-2023/"
                title="W3C Software and Document Notice and License">permissive document license</a> rules apply.
        </p>
        <hr title="Separator for header">
    </div>
    <section id="abstract" class="introductory">
        <h2>摘要</h2>
        <p><a data-link-type="idl" data-lt="EditContext" href="#dom-editcontext" class="internalDFN"
                id="ref-for-dom-editcontext-1"><code>EditContext</code></a> 是一个 API，允许作者更直接参与文本输入流程。</p>
    </section>
    <section id="sotd" class="introductory">
        <h2>本文档状态</h2>
        <p><em>本节描述了该文档在发布时的状态。当前 <abbr title="World Wide Web Consortium">W3C</abbr>
                的出版物列表以及本技术报告的最新修订可在
                <a href="https://www.w3.org/TR/"><abbr title="World Wide Web Consortium">W3C</abbr> 标准和草案索引</a>中查阅。</em>
        </p>
        <p>
            本文档由 <a href="https://www.w3.org/groups/wg/webediting">Web 编辑工作组</a>
            作为工作草案发布，采用
            <a href="https://www.w3.org/policies/process/20250818/#recs-and-notes">推荐路线</a>。
        </p>
        <p>作为工作草案发布不代表 <abbr title="World Wide Web Consortium">W3C</abbr> 及其成员的认可。</p>
        <p>
            本文档为草稿，有可能随时被更新、替换或废弃。引用此文档时只适合作为正在进行中的工作。

        </p>
        <p>

            本文档由在
            <a href="https://www.w3.org/policies/patent-policy/"><abbr title="World Wide Web Consortium">W3C</abbr>
                专利政策</a>
            下运作的组织编写。

            <abbr title="World Wide Web Consortium">W3C</abbr> 维持着
            <a rel="disclosure" href="https://www.w3.org/groups/wg/webediting/ipr">与工作成果相关的专利公开名单</a>
            该页面还包含披露专利的说明。知晓专利并认为其包含
            <a href="https://www.w3.org/policies/patent-policy/#def-essential">必要权利要求</a>
            的个人必须根据
            <a href="https://www.w3.org/policies/patent-policy/#sec-Disclosure">W3C 专利政策第6条</a>
            披露相关信息。

        </p>
        <p>
            本文档受
            <a id="w3c_process_revision" href="https://www.w3.org/policies/process/20250818/">2025年8月18日 <abbr
                    title="World Wide Web Consortium">W3C</abbr> 流程文档</a>
            管理。
        </p>
    </section>
    <nav id="toc">
        <h2 class="introductory" id="table-of-contents">目录</h2>
        <ol class="toc">
            <li class="tocline"><a class="tocxref" href="#abstract">摘要</a></li>
            <li class="tocline"><a class="tocxref" href="#sotd">本文档状态</a></li>
            <li class="tocline"><a class="tocxref" href="#introduction"><bdi class="secno">1. </bdi>引言</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#background"><bdi class="secno">1.1 </bdi>背景和动机</a>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#editcontext-model"><bdi class="secno">1.2
                            </bdi>EditContext 模型</a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#editcontext-state"><bdi class="secno">1.2.1
                                    </bdi>EditContext 状态</a></li>
                            <li class="tocline"><a class="tocxref" href="#association-and-activation"><bdi
                                        class="secno">1.2.2 </bdi>关联与激活</a></li>
                            <li class="tocline"><a class="tocxref" href="#edit-context-differences"><bdi
                                        class="secno">1.2.3 </bdi>EditContext 编辑宿主的区别</a></li>
                            <li class="tocline"><a class="tocxref" href="#editcontext-events"><bdi class="secno">1.2.4
                                    </bdi>EditContext 事件</a></li>
                            <li class="tocline"><a class="tocxref" href="#event-loop-changes"><bdi class="secno">1.2.5
                                    </bdi>事件循环变更</a></li>
                            <li class="tocline"><a class="tocxref" href="#examples"><bdi class="secno">1.2.6
                                    </bdi>实例</a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#interactions"><bdi class="secno">1.3
                            </bdi>与其他编辑原语的交互 </a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#conformance"><bdi class="secno">2. </bdi>一致性</a></li>
            <li class="tocline"><a class="tocxref" href="#editcontext-api"><bdi class="secno">3. </bdi>EditContext
                    API</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#extensions-to-the-htmlelement-interface"><bdi
                                class="secno">3.1 </bdi>对 HTMLElement 接口的扩展</a>
                        <ol class="toc">
                            <li class="tocline"><a class="tocxref" href="#handle-input-for-editcontext"><bdi
                                        class="secno">3.1.1 </bdi><span class="export" data-export="">处理 EditContext
                                        的输入</span></a></li>
                            <li class="tocline"><a class="tocxref" href="#editcontext-handled-inputtype"><bdi
                                        class="secno">3.1.2 </bdi><span>EditContext 处理的 inputType</span></a></li>
                            <li class="tocline"><a class="tocxref" href="#update-the-editcontext"><bdi
                                        class="secno">3.1.3 </bdi><span>更新 EditContext</span></a></li>
                            <li class="tocline"><a class="tocxref" href="#update-the-text-edit-context"><bdi
                                        class="secno">3.1.4 </bdi><span>更新文本编辑上下文</span></a></li>
                            <li class="tocline"><a class="tocxref" href="#dispatch-text-update-event"><bdi
                                        class="secno">3.1.5 </bdi><span>分发文本更新事件</span></a></li>
                            <li class="tocline"><a class="tocxref" href="#dispatch-text-format-update-event"><bdi
                                        class="secno">3.1.6 </bdi><span>分发文本格式更新事件</span></a>
                            </li>
                            <li class="tocline"><a class="tocxref" href="#dispatch-character-bounds-update-event"><bdi
                                        class="secno">3.1.7 </bdi><span>分发字符边界更新事件</span></a></li>
                            <li class="tocline"><a class="tocxref" href="#deactivate-an-editcontext"><bdi
                                        class="secno">3.1.8 </bdi><span>停用 EditContext</span></a></li>
                            <li class="tocline"><a class="tocxref" href="#determine-the-active-editcontext"><bdi
                                        class="secno">3.1.9 </bdi><span>确定活动的 EditContext</span></a></li>
                        </ol>
                    </li>
                    <li class="tocline"><a class="tocxref" href="#editcontext-interface"><bdi class="secno">3.2
                            </bdi>EditContext 接口</a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#editcontext-events-0"><bdi class="secno">4. </bdi>EditContext
                    事件</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#textupdateevent"><bdi class="secno">4.1
                            </bdi>TextUpdateEvent</a></li>
                    <li class="tocline"><a class="tocxref" href="#textformatupdateevent"><bdi class="secno">4.2
                            </bdi>TextFormatUpdateEvent</a></li>
                    <li class="tocline"><a class="tocxref" href="#characterboundsupdateevent"><bdi class="secno">4.3
                            </bdi>CharacterBoundsUpdateEvent</a></li>
                </ol>
            </li>
            <li class="tocline"><a class="tocxref" href="#idl-index"><bdi class="secno">A. </bdi>IDL 索引</a></li>
            <li class="tocline"><a class="tocxref" href="#contributors"><bdi class="secno">B. </bdi>贡献者</a>
            </li>
            <li class="tocline"><a class="tocxref" href="#references"><bdi class="secno">C. </bdi>参考文献</a>
                <ol class="toc">
                    <li class="tocline"><a class="tocxref" href="#normative-references"><bdi class="secno">C.1
                            </bdi>规范性引用</a></li>
                    <li class="tocline"><a class="tocxref" href="#informative-references"><bdi class="secno">C.2
                            </bdi>参考性引用</a></li>
                </ol>
            </li>
        </ol>
    </nav>
    <section id="introduction">
        <div class="header-wrapper">
            <h2 id="x1-introduction"><bdi class="secno">1. </bdi>引言</h2><a class="self-link" href="#introduction"
                aria-label="第 1 部分的永久链接。"></a>
        </div>

        <section id="background" class="informative">
            <div class="header-wrapper">
                <h3 id="x1-1-background-and-motivation"><bdi class="secno">1.1 </bdi>背景和动机</h3><a class="self-link"
                    href="#background" aria-label="第 1.1 部分的永久链接。"></a>
            </div>
            <p><em>本节为非规范性内容。</em></p>

            <p>现代操作系统提供了多种生成文本的机制：语音转文本、虚拟键盘、手写识别等。应用想要从这些不同来源接收文本输入，首先必须向操作系统提供其当前可编辑文本的视图。可编辑文本的视图提供了一种通用语言，使得具有各种不同文档模型的应用和具有各种不同输入方式的文本来源都能理解。应用和输入来源双方都通过将其对公共视图状态的期望更改表达为事件，并由对方处理，从而完成文本输入过程。
            </p>
            <p>在本文档中，文本的生产者称为 <dfn data-plurals="text input methods" id="dfn-text-input-method" tabindex="0"
                    aria-haspopup="dialog" data-dfn-type="dfn">Text Input Method</dfn>（文本输入法）。希望消费文本的应用所提供的视图称为 <dfn
                    data-plurals="text edit contexts" id="dfn-text-edit-context" tabindex="0" aria-haspopup="dialog"
                    data-dfn-type="dfn">Text Edit Context</dfn>（文本编辑上下文）。操作系统为 <a data-link-type="dfn|abstract-op"
                    href="#dfn-text-edit-context" class="internalDFN" id="ref-for-dfn-text-edit-context-1">Text Edit
                    Context</a> 被 <a data-link-type="dfn|abstract-op" href="#dfn-text-input-method" class="internalDFN"
                    id="ref-for-dfn-text-input-method-1">Text Input Methods</a> 编辑所提供的服务称为 <dfn
                    id="dfn-text-input-service" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">Text Input
                    Service</dfn>（文本输入服务）。</p>
            <figure id="many-input-methods">
                <img src="https://www.w3.org/TR/edit-context/images/many-input-methods.jpg" alt="">
                <figcaption><a class="self-link" href="#many-input-methods">图 <bdi class="figno">1</bdi></a> <span
                        class="fig-title">多个 <a data-link-type="dfn|abstract-op" href="#dfn-text-input-method"
                            class="internalDFN" id="ref-for-dfn-text-input-method-2">Text Input Methods</a> 使用同一个 <a
                            data-link-type="dfn|abstract-op" href="#dfn-text-input-service" class="internalDFN"
                            id="ref-for-dfn-text-input-service-1">Text Input Service</a>，通过各自的 <a
                            data-link-type="dfn|abstract-op" href="#dfn-text-edit-context" class="internalDFN"
                            id="ref-for-dfn-text-edit-context-2">Text Edit Contexts</a> 与多个应用进行通信。</span>
                </figcaption>
            </figure>
            <p>下面是一个更详细的典型文本输入流程：</p>
            <ol>
                <li>用户将焦点置于应用中的某个可编辑区域。</li>
                <li>应用生成一个 <a data-link-type="dfn|abstract-op" href="#dfn-text-edit-context" class="internalDFN"
                        id="ref-for-dfn-text-edit-context-3">Text Edit Context</a>，按照 <a
                        data-link-type="dfn|abstract-op" href="#dfn-text-input-service" class="internalDFN"
                        id="ref-for-dfn-text-input-service-2">Text
                        Input Service</a> 规定的标准描述其可编辑区域，并将该 <a data-link-type="dfn|abstract-op"
                        href="#dfn-text-edit-context" class="internalDFN" id="ref-for-dfn-text-edit-context-4">Text Edit
                        Context</a> 提供给 <a data-link-type="dfn|abstract-op" href="#dfn-text-input-service"
                        class="internalDFN" id="ref-for-dfn-text-input-service-3">Text Input Service</a>。</li>
                <li><a data-link-type="dfn|abstract-op" href="#dfn-text-input-service" class="internalDFN"
                        id="ref-for-dfn-text-input-service-4">Text Input Service</a> 触发某个 <a
                        data-link-type="dfn|abstract-op" href="#dfn-text-input-method" class="internalDFN"
                        id="ref-for-dfn-text-input-method-3">Text Input Method</a>，为用户提供捕获文本输入的用户界面，并将应用生成的 <a
                        data-link-type="dfn|abstract-op" href="#dfn-text-input-method" class="internalDFN"
                        id="ref-for-dfn-text-input-method-4">Text
                        Input Method</a> 所需的 <a data-link-type="dfn|abstract-op" href="#dfn-text-edit-context"
                        class="internalDFN" id="ref-for-dfn-text-edit-context-5">Text Edit
                        Context</a> 一并提供给它。</li>
                <li><a data-link-type="dfn|abstract-op" href="#dfn-text-input-method" class="internalDFN"
                        id="ref-for-dfn-text-input-method-5">Text Input Method</a> 从 <a data-link-type="dfn|abstract-op"
                        href="#dfn-text-edit-context" class="internalDFN" id="ref-for-dfn-text-edit-context-6">Text Edit
                        Context</a> 读取选区位置及其附近文本，以便定制其用户体验。</li>
                <li><a data-link-type="dfn|abstract-op" href="#dfn-text-input-method" class="internalDFN"
                        id="ref-for-dfn-text-input-method-6">Text Input Method</a>
                    还可以读取选区和可编辑区域在屏幕上的坐标，从而将其用户界面正确地定位在被编辑文本附近。</li>
                <li>用户通过 <a data-link-type="dfn|abstract-op" href="#dfn-text-input-method" class="internalDFN"
                        id="ref-for-dfn-text-input-method-7">Text Input Method</a> 的用户界面，以某种该 <a
                        data-link-type="dfn|abstract-op" href="#dfn-text-input-method" class="internalDFN"
                        id="ref-for-dfn-text-input-method-8">Text Input Method</a> 特定的方式输入文本。
                </li>
                <li><a data-link-type="dfn|abstract-op" href="#dfn-text-input-method" class="internalDFN"
                        id="ref-for-dfn-text-input-method-9">Text Input Method</a> 根据用户输入，描述其希望对 <a
                        data-link-type="dfn|abstract-op" href="#dfn-text-edit-context" class="internalDFN"
                        id="ref-for-dfn-text-edit-context-7">Text Edit Context</a> 中的文本和选区进行的修改。</li>
                <li>应用处理描述对其 <a data-link-type="dfn|abstract-op" href="#dfn-text-edit-context" class="internalDFN"
                        id="ref-for-dfn-text-edit-context-8">Text Edit Context</a> 所需修改的事件，并将结果渲染给用户。
                </li>
            </ol>
            <figure id="text-input-process">
                <img src="https://www.w3.org/TR/edit-context/images/text-input-process.jpg" alt="">
                <figcaption><a class="self-link" href="#text-input-process">图 <bdi class="figno">2</bdi></a> <span
                        class="fig-title">展示典型文本输入流程的时序图。</span>
                </figcaption>
            </figure>
            <p>现有用户代理会处理上述文本输入流程中的细节，因此作者的职责仅限于声明文档中哪些元素代表可编辑区域。作者通过使用 input 元素、textarea 元素、contenteditable 元素，或将 <a
                    data-link-type="attribute"
                    href="https://html.spec.whatwg.org/multipage/interaction.html#designMode"><code>designMode</code></a>
                属性设置为 "<code>on</code>" 来标记整个文档为可编辑，从而表达哪些区域是可编辑的。 </p>
            <p>当文档中的某个可编辑区域被 <a href="https://html.spec.whatwg.org/multipage/interaction.html#focused">focused</a>
                时，用户代理会自动根据该可编辑区域的内容及其中的选区位置生成 <a data-link-type="dfn|abstract-op" href="#dfn-text-edit-context"
                    class="internalDFN" id="ref-for-dfn-text-edit-context-9">Text Edit Context</a>。当某个 <a
                    data-link-type="dfn|abstract-op" href="#dfn-text-input-method" class="internalDFN"
                    id="ref-for-dfn-text-input-method-10">Text Input Method</a> 生成文本时，用户代理会将针对其 <a
                    data-link-type="dfn|abstract-op" href="#dfn-text-edit-context" class="internalDFN"
                    id="ref-for-dfn-text-edit-context-10">Text Edit Context</a> 的事件转换为一系列 DOM
                和样式修改——目前只有一部分通过现有事件暴露给作者可以处理。 </p>
            <p>希望提供复杂编辑体验的作者可能会受到现有方式的限制。例如，如果文本和选区被渲染到 canvas 中，用户代理就无法生成驱动文本输入过程的 <a data-link-type="dfn|abstract-op"
                    href="#dfn-text-edit-context" class="internalDFN" id="ref-for-dfn-text-edit-context-11">Text Edit
                    Context</a>。作者通常会借助离屏可编辑元素来弥补，但这种方式会对可访问性产生负面影响、降低输入体验，并且需要复杂的代码来同步离屏可编辑元素中的文本位置与 canvas 中相应文本的位置。
            </p>
            <p>通过引入 EditContext API，作者可以更直接地参与文本输入协议，从而避免上述问题。</p>
        </section>
        <section id="editcontext-model">
            <div class="header-wrapper">
                <h3 id="x1-2-the-editcontext-model"><bdi class="secno">1.2 </bdi>EditContext 模型</h3><a class="self-link"
                    href="#editcontext-model" aria-label="第 1.2 部分的永久链接。"></a>
            </div>

            <p>
                <a data-link-type="dfn|abstract-op" href="#dfn-text-input-service" class="internalDFN"
                    id="ref-for-dfn-text-input-service-5">Text Input Service</a> 和 <a data-link-type="dfn|abstract-op"
                    href="#dfn-text-edit-context" class="internalDFN" id="ref-for-dfn-text-edit-context-12">Text Edit
                    Context</a> 是在许多操作系统上抽象出文本输入共性的一组概念。
                <a data-link-type="idl" data-lt="EditContext" href="#dom-editcontext" class="internalDFN"
                    id="ref-for-dom-editcontext-2"><code>EditContext</code></a> 是 <a data-link-type="dfn|abstract-op"
                    href="#dfn-text-edit-context" class="internalDFN" id="ref-for-dfn-text-edit-context-13">Text Edit
                    Context</a> 的 JavaScript 映射。
                当 <a data-link-type="dfn|abstract-op" href="#dfn-text-edit-context" class="internalDFN"
                    id="ref-for-dfn-text-edit-context-14">Text Edit Context</a> 被 <a data-link-type="dfn|abstract-op"
                    href="#dfn-text-input-service" class="internalDFN" id="ref-for-dfn-text-input-service-6">Text Input
                    Service</a> 修改时，这些更改会以事件的形式异步反映给作者，这些事件会派发到 <a data-link-type="dfn|abstract-op"
                    href="#dfn-active-editcontext" class="internalDFN" id="ref-for-dfn-active-editcontext-1">active
                    EditContext</a> 上。
                当作者对 <a data-link-type="dfn|abstract-op" href="#dfn-active-editcontext" class="internalDFN"
                    id="ref-for-dfn-active-editcontext-2">active EditContext</a> 进行更改时，这些更改会在下一次生命周期更新时反映到 <a
                    data-link-type="dfn|abstract-op" href="#dfn-text-edit-context" class="internalDFN"
                    id="ref-for-dfn-text-edit-context-15">Text Edit Context</a> 中。
            </p>
            <section id="editcontext-state">
                <div class="header-wrapper">
                    <h4 id="x1-2-1-editcontext-state"><bdi class="secno">1.2.1 </bdi>EditContext 状态</h4><a
                        class="self-link" href="#editcontext-state" aria-label="第 1.2.1 部分的永久链接。"></a>
                </div>
                <p>
                    <a data-link-type="dfn|abstract-op" href="#dfn-text-edit-context" class="internalDFN"
                        id="ref-for-dfn-text-edit-context-16">Text Edit Context</a> 和 <a data-link-type="idl"
                        data-lt="EditContext" href="#dom-editcontext" class="internalDFN"
                        id="ref-for-dom-editcontext-3"><code>EditContext</code></a> 都具有一个 <a
                        data-link-type="dfn|abstract-op" href="#dfn-text-state" class="internalDFN"
                        id="ref-for-dfn-text-state-1">text state</a>，保存前述更新中交换的信息。<dfn id="dfn-text-state" tabindex="0"
                        aria-haspopup="dialog" data-dfn-type="dfn">text state</dfn> 由以下内容组成：
                </p>
                <ul>
                    <li><dfn id="dfn-text" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">text</dfn>：一个 <a
                            data-link-type="interface" data-lt="DOMString"
                            href="https://webidl.spec.whatwg.org/#idl-DOMString"><code>DOMString</code></a>，表示可编辑内容。初始值为空字符串。
                    </li>
                    <li><dfn id="dfn-selection-start" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">selection
                            start</dfn>：指向 <a data-link-type="dfn|abstract-op" href="#dfn-text" class="internalDFN"
                            id="ref-for-dfn-text-1">text</a> 中选区起始位置的偏移量。初始值为 0。</li>
                    <li><dfn id="dfn-selection-end" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">selection
                            end</dfn>：指向 <a data-link-type="dfn|abstract-op" href="#dfn-text" class="internalDFN"
                            id="ref-for-dfn-text-2">text</a> 中选区结束位置的偏移量。初始值为 0。对于“反向”选区（顺序与文档顺序相反），<a
                            data-link-type="dfn|abstract-op" href="#dfn-selection-end" class="internalDFN"
                            id="ref-for-dfn-selection-end-1">selection end</a> 可以小于 <a data-link-type="dfn|abstract-op"
                            href="#dfn-selection-start" class="internalDFN" id="ref-for-dfn-selection-start-1">selection
                            start</a>。</li>
                    <li><dfn id="dfn-is-composing" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">is
                            composing</dfn>：指示当前是否存在激活的合成。初始值为 false。</li>
                    <li><dfn id="dfn-composition-start" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">composition start</dfn>：指向 <a data-link-type="dfn|abstract-op"
                            href="#dfn-text" class="internalDFN" id="ref-for-dfn-text-3">text</a>
                        中正在进行合成的文本起始位置的偏移量。初始值为 0。</li>
                    <li><dfn id="dfn-composition-end" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">composition end</dfn>：指向 <a data-link-type="dfn|abstract-op"
                            href="#dfn-text" class="internalDFN" id="ref-for-dfn-text-4">text</a>
                        中正在进行合成的文本结束位置的偏移量。初始值为 0。<a data-link-type="dfn|abstract-op" href="#dfn-composition-end"
                            class="internalDFN" id="ref-for-dfn-composition-end-1">composition end</a> 必须始终大于或等于 <a
                            data-link-type="dfn|abstract-op" href="#dfn-composition-start" class="internalDFN"
                            id="ref-for-dfn-composition-start-1">composition start</a>。</li>
                    <li><dfn id="dfn-text-formats" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">text
                            formats</dfn>：一个由 <a data-link-type="dfn|abstract-op" href="#dfn-text-format"
                            class="internalDFN" id="ref-for-dfn-text-format-1">text format</a> 组成的数组。该数组初始为空。</li>
                    <li><dfn id="dfn-control-bounds" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">control
                            bounds</dfn>：一个 <a data-link-type="interface" data-lt="DOMRect"
                            href="https://www.w3.org/TR/geometry-1/#domrect"><code>DOMRect</code></a>，描述视口中显示 <a
                            data-link-type="dfn|abstract-op" href="#dfn-text" class="internalDFN"
                            id="ref-for-dfn-text-5">text</a> 的区域。它使用 <a data-link-type="dfn|abstract-op"
                            href="#dfn-client-coordinate-system" class="internalDFN"
                            id="ref-for-dfn-client-coordinate-system-1">client coordinate system</a>，其初始 x、y、width 和
                        height 均为 0。</li>
                    <li><dfn id="dfn-selection-bounds" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">selection
                            bounds</dfn>：一个 <a data-link-type="interface" data-lt="DOMRect"
                            href="https://www.w3.org/TR/geometry-1/#domrect"><code>DOMRect</code></a>，描述选区的位置。它使用 <a
                            data-link-type="dfn|abstract-op" href="#dfn-client-coordinate-system" class="internalDFN"
                            id="ref-for-dfn-client-coordinate-system-2">client coordinate system</a>，其初始 x、y、width 和
                        height 均为 0。</li>
                    <li><dfn id="dfn-codepoint-rects-start-index" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">codepoint rects start index</dfn>：指向 <a data-link-type="dfn|abstract-op"
                            href="#dfn-text" class="internalDFN" id="ref-for-dfn-text-6">text</a> 中的一个偏移量，表示在 <a
                            data-link-type="dfn|abstract-op" href="#dfn-codepoint-rects" class="internalDFN"
                            id="ref-for-dfn-codepoint-rects-1">codepoint
                            rects</a> 数组第一个成员所报告的位置之前的那个码点位置。</li>
                    <li><dfn id="dfn-codepoint-rects" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">codepoint
                            rects</dfn>：一个由 <a data-link-type="interface" data-lt="DOMRect"
                            href="https://www.w3.org/TR/geometry-1/#domrect"><code>DOMRect</code></a>
                        组成的数组，用于定义每个码点的边界框。该数组初始为空。</li>
                </ul>
                <p><dfn id="dfn-text-format" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">text format</dfn>
                    是一个结构体，用于指示应应用于某些 <a data-link-type="dfn|abstract-op" href="#dfn-text" class="internalDFN"
                        id="ref-for-dfn-text-7">text</a> 范围的装饰属性。该结构体包含：</p>
                <ul>
                    <li><dfn id="dfn-range-start" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">range
                            start</dfn>：指向 <a data-link-type="dfn|abstract-op" href="#dfn-text" class="internalDFN"
                            id="ref-for-dfn-text-8">text</a> 中的一个偏移量，表示要被装饰的第一个码点之前的位置。</li>
                    <li><dfn id="dfn-range-end" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">range end</dfn>
                        ：指向 <a data-link-type="dfn|abstract-op" href="#dfn-text" class="internalDFN"
                            id="ref-for-dfn-text-9">text</a> 中的一个偏移量，表示要被装饰的最后一个码点之后的位置。</li>
                    <li><dfn id="dfn-underline-style" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">underline
                            style</dfn>：一个 <a data-link-type="idl" data-lt="UnderlineStyle" href="#dom-underlinestyle"
                            class="internalDFN" id="ref-for-dom-underlinestyle-1"><code>UnderlineStyle</code></a>，表示被装饰
                        <a data-link-type="dfn|abstract-op" href="#dfn-text" class="internalDFN"
                            id="ref-for-dfn-text-10">text</a> 范围的首选下划线样式。
                    </li>
                    <li><dfn id="dfn-underline-thickness" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">underline thickness</dfn>：一个 <a data-link-type="idl"
                            data-lt="UnderlineThickness" href="#dom-underlinethickness" class="internalDFN"
                            id="ref-for-dom-underlinethickness-1"><code>UnderlineThickness</code></a>，表示被装饰 <a
                            data-link-type="dfn|abstract-op" href="#dfn-text" class="internalDFN"
                            id="ref-for-dfn-text-11">text</a> 范围的首选下划线粗细。</li>
                </ul>
                <div class="note" role="note" id="issue-container-generatedID">
                    <div role="heading" class="note-title marker" id="h-note" aria-level="4"><span>Note</span></div>
                    <p class="">
                        <a data-link-type="dfn|abstract-op" href="#dfn-codepoint-rects" class="internalDFN"
                            id="ref-for-dfn-codepoint-rects-2">Codepoint rects</a> 为用户代理提供了一种手段，可以针对一定范围的
                        <a data-link-type="dfn|abstract-op" href="#dfn-text" class="internalDFN"
                            id="ref-for-dfn-text-12">text</a> 进行位置查询。<a data-link-type="dfn|abstract-op"
                            href="#dfn-text-input-service" class="internalDFN"
                            id="ref-for-dfn-text-input-service-7">Text Input Service</a> 会结合 <a
                            data-link-type="dfn|abstract-op" href="#dfn-control-bounds" class="internalDFN"
                            id="ref-for-dfn-control-bounds-1">control bounds</a> 和 <a data-link-type="dfn|abstract-op"
                            href="#dfn-selection-bounds" class="internalDFN"
                            id="ref-for-dfn-selection-bounds-1">selection bounds</a> 使用这些信息，
                        以支持 Text Input Method 正确显示其用户界面。例如，这些信息可用于将 IME 窗口定位到正在合成的文本附近。
                        不同平台为了响应来自 <a data-link-type="dfn|abstract-op" href="#dfn-text-input-service"
                            class="internalDFN" id="ref-for-dfn-text-input-service-8">Text Input Service</a>
                        的查询，可能需要缓存不同的位置信息。
                        用户代理会通过触发 <a data-link-type="idl" data-lt="CharacterBoundsUpdateEvent"
                            href="#dom-characterboundsupdateevent" class="internalDFN"
                            id="ref-for-dom-characterboundsupdateevent-1"><code>CharacterBoundsUpdateEvent</code></a>
                        来指示需要哪些位置。
                    </p>
                </div>
                <p>
                    <a data-link-type="dfn|abstract-op" href="#dfn-control-bounds" class="internalDFN"
                        id="ref-for-dfn-control-bounds-2">Control bounds</a>、<a data-link-type="dfn|abstract-op"
                        href="#dfn-selection-bounds" class="internalDFN" id="ref-for-dfn-selection-bounds-2">selection
                        bounds</a> 和 <a data-link-type="dfn|abstract-op" href="#dfn-codepoint-rects" class="internalDFN"
                        id="ref-for-dfn-codepoint-rects-3">codepoint rects</a> 使用
                    <dfn id="dfn-client-coordinate-system" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">client coordinate system</dfn> 表示。该坐标系被定义为一个二维笛卡尔坐标系 (x, y)，其原点位于
                    <a href="https://drafts.csswg.org/cssom-view/#layout-viewport">layout viewport</a> 的左上角，
                    x 轴指向 <a href="https://drafts.csswg.org/cssom-view/#layout-viewport">layout viewport</a> 的右上方，
                    y 轴指向 <a href="https://drafts.csswg.org/cssom-view/#layout-viewport">layout viewport</a> 的左下方。
                    client 坐标系的单位为
                    <a href="https://drafts.csswg.org/css-values/#px">CSS 像素</a>。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-0">
                    <div role="heading" class="note-title marker" id="h-note-0" aria-level="4"><span>Note</span></div>
                    <div class="">
                        <p>
                            由于 EditContext 的各类 bounds 是使用 <a data-lt="client coordinate system"
                                href="#dfn-client-coordinate-system" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-client-coordinate-system-3">client coordinates</a> 定义的，
                            页面上某段内容对应的坐标会随着用户滚动文档而变化，即便该内容在文档中的位置并未改变。
                            一个需要作者考虑此问题的场景是：用户在存在激活合成的情况下滚动页面。
                            如果作者没有更新 EditContext 的 bounds 信息（例如在滚动事件监听函数中更新），
                            IME 窗口在整个合成过程中就可能不再与正在合成的文本对齐。
                        </p>
                        <p>
                            然而，某些平台在激活合成期间不会调整 IME 窗口的位置，
                            因此在合成中途更新 bounds 信息并不能保证 IME 窗口会立即重新定位，
                            而可能要等到关闭并重新打开之后才会重新定位。
                        </p>
                    </div>
                </div>
            </section>
            <section id="association-and-activation">
                <div class="header-wrapper">
                    <h4 id="x1-2-2-association-and-activation"><bdi class="secno">1.2.2 </bdi>关联与激活
                    </h4><a class="self-link" href="#association-and-activation" aria-label="第 1.2.2 部分的永久链接。"></a>
                </div>
                <p>
                    一个 <a data-link-type="idl" data-lt="EditContext" href="#dom-editcontext" class="internalDFN"
                        id="ref-for-dom-editcontext-4"><code>EditContext</code></a> 具有一个 <dfn data-for="edit-context"
                        data-plurals="associated elements" id="dfn-associated-element" tabindex="0"
                        aria-haspopup="dialog" data-dfn-type="dfn">associated element</dfn>，即一个 <a
                        data-link-type="interface" data-lt="HTMLElement"
                        href="https://html.spec.whatwg.org/multipage/dom.html#htmlelement"><code>HTMLElement</code></a>。
                    当把某个 <a data-link-type="idl" data-lt="EditContext" href="#dom-editcontext" class="internalDFN"
                        id="ref-for-dom-editcontext-5"><code>EditContext</code></a> 赋值给元素的 <a data-link-type="idl"
                        href="#dom-htmlelement-editcontext" class="internalDFN"
                        id="ref-for-dom-htmlelement-editcontext-1"><code>editContext</code></a> 属性时，该元素就成为该 <a
                        href="#dfn-associated-element" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-associated-element-1">associated element </a>。
                    一个 <a data-link-type="interface" data-lt="HTMLElement"
                        href="https://html.spec.whatwg.org/multipage/dom.html#htmlelement"><code>HTMLElement</code></a>
                    至多可以与一个 <a data-link-type="idl" data-lt="EditContext" href="#dom-editcontext" class="internalDFN"
                        id="ref-for-dom-editcontext-7"><code>EditContext</code></a> <a data-lt="associated element"
                        href="#dfn-associated-element" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-associated-element-2">associated</a>。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-1">
                    <div role="heading" class="note-title marker" id="h-note-1" aria-level="4"><span>Note</span></div>
                    <p class="">
                        一个 <a data-link-type="idl" data-lt="EditContext" href="#dom-editcontext" class="internalDFN"
                            id="ref-for-dom-editcontext-8"><code>EditContext</code></a> 会保持其 <a
                            data-link-type="dfn|abstract-op" href="#dfn-associated-element" class="internalDFN"
                            id="ref-for-dfn-associated-element-3">associated element</a> 存活，
                        因此开发者需要注意，将某个 <a data-link-type="idl" data-lt="EditContext" href="#dom-editcontext"
                            class="internalDFN" id="ref-for-dom-editcontext-9"><code>EditContext</code></a> 赋值给元素的
                        <a data-link-type="idl" href="#dom-htmlelement-editcontext" class="internalDFN"
                            id="ref-for-dom-htmlelement-editcontext-2"><code>editContext</code></a> 属性，
                        会阻止该元素被垃圾回收，直到该属性被清除，或该 <a data-link-type="idl" data-lt="EditContext" href="#dom-editcontext"
                            class="internalDFN" id="ref-for-dom-editcontext-10"><code>EditContext</code></a> 本身被垃圾回收。
                    </p>
                </div>
                <p>
                    如果某个 <a data-link-type="idl" data-lt="EditContext" href="#dom-editcontext" class="internalDFN"
                        id="ref-for-dom-editcontext-11"><code>EditContext</code></a> 的 <a href="#dfn-associated-element"
                        class="internalDFN" data-link-type="dfn" id="ref-for-dfn-associated-element-4">associated
                        element</a> 的
                    <a href="https://dom.spec.whatwg.org/#concept-tree-parent">父节点</a> 既不是
                    <a href="https://w3c.github.io/editing/docs/execCommand/#editable">editable</a>，也不是其
                    <a data-link-type="attribute"
                        href="https://html.spec.whatwg.org/multipage/interaction.html#designMode"><code>designMode</code></a>
                    属性为 "<code>on</code>" 的 <a data-link-type="dfn"
                        href="https://dom.spec.whatwg.org/#concept-document">Document</a>，
                    则该 <a href="#dfn-associated-element" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-associated-element-5">associated element</a> 会成为一个 <dfn class="export"
                        data-export="" id="dfn-editcontext-editing-host" tabindex="0" aria-haspopup="dialog"
                        data-dfn-type="dfn">EditContext editing host</dfn>。
                    <a href="#dfn-editcontext-editing-host" class="internalDFN" data-link-type="dfn"
                        id="ref-for-dfn-editcontext-editing-host-1">EditContext editing host</a> 是一种 <a
                        data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/interaction.html#editing-host">editing host</a>，
                    其行为在 <a href="#edit-context-differences" data-matched-text="[[[#edit-context-differences]]]"
                        class="sec-ref"><bdi class="secno">1.2.3
                        </bdi>Differences for an EditContext editing host</a> 中有详细描述。
                </p>
                <div class="note" role="note" id="issue-container-generatedID-2">
                    <div role="heading" class="note-title marker" id="h-note-2" aria-level="4"><span>Note</span></div>
                    <div class="">
                        <p>
                            这其中有几点影响。首先，如果某个元素已经因为
                            <code><a data-link-type="element-attr" href="https://html.spec.whatwg.org/multipage/interaction.html#attr-contenteditable">contenteditable</a></code>
                            而成为一个 <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/interaction.html#editing-host">editing
                                host</a>，
                            然后又成为某个 <a data-link-type="idl" data-lt="EditContext" href="#dom-editcontext"
                                class="internalDFN" id="ref-for-dom-editcontext-12"><code>EditContext</code></a> 的 <a
                                href="#dfn-associated-element" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-associated-element-6">associated element</a>，
                            那么该元素会成为 <a href="#dfn-editcontext-editing-host" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-editcontext-editing-host-2">EditContext editing host</a>。
                            换言之，如果在一个元素上同时设置了 <a data-link-type="idl" data-lt="EditContext" href="#dom-editcontext"
                                class="internalDFN" id="ref-for-dom-editcontext-13"><code>EditContext</code></a>
                            和
                            <code><a data-link-type="element-attr" href="https://html.spec.whatwg.org/multipage/interaction.html#attr-contenteditable">contenteditable</a></code>，
                            则以 EditContext 的行为为准。
                        </p>
                        <p>
                            其次，如果某个元素是
                            <a href="https://w3c.github.io/editing/docs/execCommand/#editable">editable</a>，
                            但本身不是 <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/interaction.html#editing-host">editing
                                host</a>（即它是某个 <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/interaction.html#editing-host">editing
                                host</a> 子树中的子节点），
                            那么将其设为某个 <a data-link-type="idl" data-lt="EditContext" href="#dom-editcontext"
                                class="internalDFN" id="ref-for-dom-editcontext-14"><code>EditContext</code></a> 的 <a
                                href="#dfn-associated-element" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-associated-element-7">associated element</a>
                            对该元素不会产生任何影响。这与
                            <code><a data-link-type="element-attr" href="https://html.spec.whatwg.org/multipage/interaction.html#attr-contenteditable">contenteditable</a></code>
                            的行为类似：为一个
                            <a href="https://w3c.github.io/editing/docs/execCommand/#editable">editable</a> 且不是 <a
                                data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/interaction.html#editing-host">editing
                                host</a> 的元素设置
                            <code><a data-link-type="element-attr" href="https://html.spec.whatwg.org/multipage/interaction.html#attr-contenteditable">contenteditable</a></code>
                            为 "<code>true</code>" 并不会产生效果。综合来看，这些规则意味着，一个可编辑的节点树将要么遵循
                            <a data-link-type="idl" data-lt="EditContext" href="#dom-editcontext" class="internalDFN"
                                id="ref-for-dom-editcontext-15"><code>EditContext</code></a> 行为，要么遵循非 <a
                                data-link-type="idl" data-lt="EditContext" href="#dom-editcontext" class="internalDFN"
                                id="ref-for-dom-editcontext-16"><code>EditContext</code></a> 行为，两者不能混用。
                        </p>
                    </div>
                </div>
                <p>
                    一个 <a data-link-type="interface" data-lt="Document"
                        href="https://dom.spec.whatwg.org/#document"><code>Document</code></a> 具有一个 <dfn
                        id="dfn-active-editcontext" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">active
                        EditContext</dfn>，其值可以为 null。
                </p>
                <div class="issue" id="issue-container-number-1">
                    <div role="heading" class="issue-title marker" id="h-issue" aria-level="4"><span>Issue 1</span>
                    </div>
                    <p class="">
                        一旦行为更改在 [<cite><a class="bibref" data-link-type="biblio" href="#bib-input-events"
                                title="Input Events Level 1">input-events</a></cite>] 中落地，下面这一段即可移除。
                    </p>
                </div>
                <p>
                    当某个 <a data-link-type="dfn|abstract-op" href="#dfn-editcontext-editing-host" class="internalDFN"
                        id="ref-for-dfn-editcontext-editing-host-3">EditContext editing host</a> 从
                    <a data-link-type="dfn|abstract-op" href="#dfn-text-input-service" class="internalDFN"
                        id="ref-for-dfn-text-input-service-9">Text Input Service</a> 接收到文本输入时，
                    作为由该输入触发的 <a href="https://www.w3.org/TR/uievents/#event-type-beforeinput">beforeinput</a> 事件的
                    <a href="https://www.w3.org/TR/uievents/#default-action">默认动作</a>，
                    用户代理必须对该 <a data-link-type="dfn|abstract-op" href="#dfn-editcontext-editing-host"
                        class="internalDFN" id="ref-for-dfn-editcontext-editing-host-4">EditContext editing host</a> 运行
                    <a data-link-type="dfn|abstract-op" href="#dfn-handle-input-for-editcontext" class="internalDFN"
                        id="ref-for-dfn-handle-input-for-editcontext-1">Handle Input for EditContext</a>。
                </p>
            </section>
            <section id="differences-for-an-editcontext-editing-host">
                <div class="header-wrapper">
                    <h4 id="edit-context-differences"><bdi class="secno">1.2.3 </bdi>EditContext 编辑宿主的区别</h4><a
                        class="self-link" href="#edit-context-differences" aria-label="第 1.2.3 部分的永久链接。"></a>
                </div>
                <div>
                    <p>
                        在许多方面，一个 <a href="#dfn-editcontext-editing-host" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-editcontext-editing-host-5">EditContext editing
                            host</a> 的行为与其他类型的 <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/interaction.html#editing-host">editing
                            host</a>（例如设置了
                        <code><a data-link-type="element-attr" href="https://html.spec.whatwg.org/multipage/interaction.html#attr-contenteditable">contenteditable</a></code>
                        的元素）相同。显著的相似点包括：
                    </p>
                    <ul>
                        <li>
                            <a href="#dfn-editcontext-editing-host" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-editcontext-editing-host-6">EditContext editing
                                host</a> 的每个子节点都会变为
                            <a href="https://w3c.github.io/editing/docs/execCommand/#editable">editable</a>，
                            除非该节点的
                            <code><a data-link-type="element-attr" href="https://html.spec.whatwg.org/multipage/interaction.html#attr-contenteditable">contenteditable</a></code>
                            属性被设置为 "<code>false</code>"。
                        </li>
                        <li>用户代理会为 <a href="#dfn-editcontext-editing-host" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-editcontext-editing-host-7">EditContext editing host</a> 中任意可编辑元素（当
                            <a data-link-type="dfn|abstract-op" href="#dfn-associated-element" class="internalDFN"
                                id="ref-for-dfn-associated-element-8">associated element</a> 为 <a
                                data-link-type="element"
                                href="https://html.spec.whatwg.org/multipage/canvas.html#canvas">canvas</a>
                            时除外；见本节后文）处理焦点和光标导航。
                        </li>
                        <li>
                            <a href="#dfn-editcontext-editing-host" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-editcontext-editing-host-8">EditContext editing host</a> 会按 [<cite><a
                                    class="bibref" data-link-type="biblio" href="#bib-uievents"
                                    title="UI Events">uievents</a></cite>] 的规定接收键盘事件及 <a
                                href="https://www.w3.org/TR/uievents/#event-type-beforeinput">beforeinput</a> 事件。
                        </li>
                    </ul>

                    <p>
                        同时，一个 <a href="#dfn-editcontext-editing-host" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-editcontext-editing-host-9">EditContext editing
                            host</a> 也有一些与其他 <a data-link-type="dfn"
                            href="https://html.spec.whatwg.org/multipage/interaction.html#editing-host">editing
                            hosts</a> 不同的地方：
                    </p>
                    <ul>
                        <li>
                            当被编辑的 <a data-link-type="interface" data-lt="Document"
                                href="https://dom.spec.whatwg.org/#document"><code>Document</code></a> 存在 <a
                                data-link-type="dfn|abstract-op" href="#dfn-active-editcontext" class="internalDFN"
                                id="ref-for-dfn-active-editcontext-3">active EditContext</a> 时，
                            用户代理不得因为在 <a href="#dfn-editcontext-editing-host" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-editcontext-editing-host-10">EditContext editing host</a> 中的某个用户操作
                            （例如在可编辑区域中的键盘输入、删除或格式化文本等）
                            而直接更新 DOM。
                        </li>
                        <li>
                            当被编辑的 <a data-link-type="interface" data-lt="Document"
                                href="https://dom.spec.whatwg.org/#document"><code>Document</code></a> 存在 <a
                                data-link-type="dfn|abstract-op" href="#dfn-active-editcontext" class="internalDFN"
                                id="ref-for-dfn-active-editcontext-4">active EditContext</a> 时，
                            用户代理不得按照 [<cite><a class="bibref" data-link-type="biblio" href="#bib-uievents"
                                    title="UI Events">uievents</a></cite>] 的规定，
                            因用户操作而在 <a href="#dfn-editcontext-editing-host" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-editcontext-editing-host-11">EditContext editing host</a> 上触发
                            <a href="https://www.w3.org/TR/uievents/#event-type-input">input</a> 事件。
                        </li>
                        <li>
                            当被编辑的 <a data-link-type="interface" data-lt="Document"
                                href="https://dom.spec.whatwg.org/#document"><code>Document</code></a> 存在 <a
                                data-link-type="dfn|abstract-op" href="#dfn-active-editcontext" class="internalDFN"
                                id="ref-for-dfn-active-editcontext-5">active EditContext</a> 时，
                            用户代理不得因用户操作在 <a href="#dfn-editcontext-editing-host" class="internalDFN"
                                data-link-type="dfn" id="ref-for-dfn-editcontext-editing-host-12">EditContext editing
                                host</a> 上触发
                            <a href="https://www.w3.org/TR/uievents/#events-compositionevents">composition events</a>。
                            相反，这些事件会在 <a data-link-type="idl" data-lt="EditContext" href="#dom-editcontext"
                                class="internalDFN" id="ref-for-dom-editcontext-17"><code>EditContext</code></a> 上触发，
                            作为 <a data-link-type="dfn|abstract-op" data-lt="update the EditContext"
                                href="#dfn-update-the-editcontext" class="internalDFN"
                                id="ref-for-dfn-update-the-editcontext-1">updating the EditContext</a> 或 <a
                                data-link-type="dfn|abstract-op" data-lt="deactivate an EditContext"
                                href="#dfn-deactivate-an-editcontext" class="internalDFN"
                                id="ref-for-dfn-deactivate-an-editcontext-1">deactivating the EditContext</a> 的一部分。
                        </li>
                        <li>
                            <p>
                                当 <a data-link-type="dfn|abstract-op" href="#dfn-active-editcontext" class="internalDFN"
                                    id="ref-for-dfn-active-editcontext-6">active EditContext</a> 的
                                <a data-link-type="dfn|abstract-op" href="#dfn-associated-element" class="internalDFN"
                                    id="ref-for-dfn-associated-element-9">associated element</a> 是一个 <a
                                    data-link-type="element"
                                    href="https://html.spec.whatwg.org/multipage/canvas.html#canvas">canvas</a>
                                时，还存在以下差异：
                            </p>
                            <ul>
                                <li>
                                    用户代理无法处理光标导航和选区，因为它并不知道文本在 <a data-link-type="element"
                                        href="https://html.spec.whatwg.org/multipage/canvas.html#canvas">canvas</a>
                                    中的布局方式，
                                    因此作者必须自行实现光标导航和选区。
                                </li>
                                <li>
                                    用户代理无法呈现内联拼写和语法建议，因为同样缺乏文本在 <a data-link-type="element"
                                        href="https://html.spec.whatwg.org/multipage/canvas.html#canvas">canvas</a>
                                    中的布局信息；
                                    如果作者希望支持拼写和语法建议，就必须自行实现这些功能。
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>

            </section>
            <section id="editcontext-events">
                <div class="header-wrapper">
                    <h4 id="x1-2-4-editcontext-events"><bdi class="secno">1.2.4 </bdi>EditContext 事件</h4><a
                        class="self-link" href="#editcontext-events" aria-label="第 1.2.4 部分的永久链接。"></a>
                </div>
                <p>
                    用户代理会在 <a data-link-type="idl" data-lt="EditContext" href="#dom-editcontext" class="internalDFN"
                        id="ref-for-dom-editcontext-18"><code>EditContext</code></a> 上触发多种事件，
                    以告知作者何时必须在 DOM 中更新状态来响应来自 <a data-link-type="dfn|abstract-op" href="#dfn-text-input-service"
                        class="internalDFN" id="ref-for-dfn-text-input-service-10">Text Input Service</a> 的更改，
                    或响应来自 <a data-link-type="dfn|abstract-op" href="#dfn-text-input-service" class="internalDFN"
                        id="ref-for-dfn-text-input-service-11">Text Input Service</a> 的查询。
                    由于 <a data-link-type="dfn|abstract-op" href="#dfn-text-input-service" class="internalDFN"
                        id="ref-for-dfn-text-input-service-12">Text Input Service</a> 的时序是平台相关的，
                    作者应避免依赖这些事件触发时机的具体细节。
                </p>
                <ul>
                    <li>
                        当 <a data-link-type="dfn|abstract-op" href="#dfn-text-input-service" class="internalDFN"
                            id="ref-for-dfn-text-input-service-13">Text Input Service</a> 表明用户对 EditContext
                        的文本、选区或合成范围属性进行了更改时，
                        用户代理必须触发 <a data-link-type="idl" data-lt="TextUpdateEvent" href="#dom-textupdateevent"
                            class="internalDFN" id="ref-for-dom-textupdateevent-1"><code>TextUpdateEvent</code></a>。
                        当作者收到该事件时，必须将这些更改渲染回页面视图，让用户看到自己正在输入的内容。
                    </li>
                    <li>
                        <p>
                            当 <a data-link-type="dfn|abstract-op" href="#dfn-text-input-service" class="internalDFN"
                                id="ref-for-dfn-text-input-service-14">Text Input Service</a>
                            表明应对正在合成的文本应用某些格式时，
                            用户代理必须触发 <a data-link-type="idl" data-lt="TextFormatUpdateEvent"
                                href="#dom-textformatupdateevent" class="internalDFN"
                                id="ref-for-dom-textformatupdateevent-1"><code>TextFormatUpdateEvent</code></a>。
                            当作者收到该事件时，必须将格式更改渲染回页面视图，以帮助用户进行 IME 合成。
                        </p>
                        <div class="note" role="note" id="issue-container-generatedID-3">
                            <div role="heading" class="note-title marker" id="h-note-3" aria-level="4"><span>Note</span>
                            </div>
                            <p class="">
                                为降低指纹识别风险，用户代理可以在分发 <a data-link-type="idl" data-lt="TextFormatUpdateEvent"
                                    href="#dom-textformatupdateevent" class="internalDFN"
                                    id="ref-for-dom-textformatupdateevent-2"><code>TextFormatUpdateEvent</code></a> 之前，
                                调整 <a data-link-type="idl" data-lt="UnderlineStyle" href="#dom-underlinestyle"
                                    class="internalDFN"
                                    id="ref-for-dom-underlinestyle-2"><code>UnderlineStyle</code></a> 或 <a
                                    data-link-type="idl" data-lt="UnderlineThickness" href="#dom-underlinethickness"
                                    class="internalDFN"
                                    id="ref-for-dom-underlinethickness-2"><code>UnderlineThickness</code></a>。
                                当使用具有显著样式特征的输入法时，这一点尤其重要。
                            </p>
                        </div>
                    </li>
                    <li>
                        <p>
                            当 <a data-link-type="dfn|abstract-op" href="#dfn-text-input-service" class="internalDFN"
                                id="ref-for-dfn-text-input-service-15">Text Input Service</a> 表明其需要字符边界信息，
                            以便支持 <a data-link-type="dfn|abstract-op" href="#dfn-text-input-method" class="internalDFN"
                                id="ref-for-dfn-text-input-method-11">Text Input Method</a> 正确显示其用户界面时，
                            用户代理必须触发 <a data-link-type="idl" data-lt="CharacterBoundsUpdateEvent"
                                href="#dom-characterboundsupdateevent" class="internalDFN"
                                id="ref-for-dom-characterboundsupdateevent-2"><code>CharacterBoundsUpdateEvent</code></a>。
                            收到 <a data-link-type="idl" data-lt="CharacterBoundsUpdateEvent"
                                href="#dom-characterboundsupdateevent" class="internalDFN"
                                id="ref-for-dom-characterboundsupdateevent-3"><code>CharacterBoundsUpdateEvent</code></a>
                            后，
                            作者必须计算所请求的字符边界，并调用 <a data-link-type="idl" href="#dom-editcontext-updatecharacterbounds"
                                class="internalDFN"
                                id="ref-for-dom-editcontext-updatecharacterbounds-1"><code>updateCharacterBounds</code></a>，
                            以更新 EditContext 的 <a data-link-type="dfn|abstract-op" href="#dfn-text-state"
                                class="internalDFN" id="ref-for-dfn-text-state-2">text state</a> 中的字符边界信息。
                            如果可能，作者应在 <a data-link-type="idl" data-lt="CharacterBoundsUpdateEvent"
                                href="#dom-characterboundsupdateevent" class="internalDFN"
                                id="ref-for-dom-characterboundsupdateevent-4"><code>CharacterBoundsUpdateEvent</code></a>
                            事件处理函数中同步调用
                            <a data-link-type="idl" href="#dom-editcontext-updatecharacterbounds" class="internalDFN"
                                id="ref-for-dom-editcontext-updatecharacterbounds-2"><code>updateCharacterBounds</code></a>；
                            若无法同步调用，异步调用也是允许的。
                            用户代理在收到 <a data-link-type="idl" href="#dom-editcontext-updatecharacterbounds"
                                class="internalDFN"
                                id="ref-for-dom-editcontext-updatecharacterbounds-3"><code>updateCharacterBounds</code></a>
                            调用后，
                            必须将字符边界信息传递给 <a data-link-type="dfn|abstract-op" href="#dfn-text-input-service"
                                class="internalDFN" id="ref-for-dfn-text-input-service-16">Text Input Service</a>。
                        </p>
                        <div class="note" role="note" id="issue-container-generatedID-4">
                            <div role="heading" class="note-title marker" id="h-note-4" aria-level="4"><span>Note</span>
                            </div>
                            <p class="">
                                作者延迟调用 <a data-link-type="idl" href="#dom-editcontext-updatecharacterbounds"
                                    class="internalDFN"
                                    id="ref-for-dom-editcontext-updatecharacterbounds-4"><code>updateCharacterBounds</code></a>
                                的时间越长，
                                用户在合成过程中观察到 IME 窗口中途重新定位并产生视觉卡顿的概率就越高。
                            </p>
                        </div>
                    </li>
                </ul>
            </section>
            <section id="event-loop-changes">
                <div class="header-wrapper">
                    <h4 id="x1-2-5-event-loop-changes"><bdi class="secno">1.2.5 </bdi>事件循环变更</h4><a class="self-link"
                        href="#event-loop-changes" aria-label="第 1.2.5 部分的永久链接。"></a>
                </div>
                <p>
                    在 HTML 事件循环处理模型中，会在 <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#update-the-rendering">Update the
                        rendering</a> 步骤中新增一个子步骤，紧跟在第 15 步（为其
                    <a href="https://html.spec.whatwg.org/#focused-area-of-the-document">focused area</a> 变为不可聚焦的
                    <a data-link-type="interface" data-lt="Document"
                        href="https://dom.spec.whatwg.org/#document"><code>Document</code></a> 运行 focusing steps）之后。
                    该步骤为：对每个
                    <a href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active">fully
                        active</a> 的
                    <a data-link-type="interface" data-lt="Document"
                        href="https://dom.spec.whatwg.org/#document"><code>Document</code></a> <var>doc</var>，
                    使用 <var>doc</var> 的 <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global">relevant
                        global object</a>，
                    在 <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source">DOM
                        manipulation task source</a> 上
                    <a data-link-type="dfn"
                        href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task">queue a global
                        task</a>，
                    来运行给定 <var>doc</var> 的 <a data-link-type="dfn|abstract-op" href="#dfn-update-the-text-edit-context"
                        class="internalDFN" id="ref-for-dfn-update-the-text-edit-context-1">Update the Text Edit
                        Context</a> 步骤。
                </p>
            </section>
            <section id="examples" class="informative">
                <div class="header-wrapper">
                    <h4 id="x1-2-6-examples"><bdi class="secno">1.2.6 </bdi>示例</h4><a class="self-link" href="#examples"
                        aria-label="第 1.2.6 部分的永久链接。"></a>
                </div>
                <p><em>本节为非规范性内容。</em></p>

                <p>借助 <a data-link-type="idl" data-lt="EditContext" href="#dom-editcontext" class="internalDFN"
                        id="ref-for-dom-editcontext-19"><code>EditContext</code></a>，作者可以通过将一个 <a
                        data-lt="associated element" href="#dfn-associated-element" class="internalDFN"
                        data-link-type="dfn" id="ref-for-dfn-associated-element-10">associating</a>
                    的 <a data-link-type="idl" data-lt="EditContext" href="#dom-editcontext" class="internalDFN"
                        id="ref-for-dom-editcontext-20"><code>EditContext</code></a> 对象附加到某个元素上来标记文档的某个区域为可编辑，如下例所示：
                </p>
                <aside class="example" id="example-associate-an-editcontext-with-an-element">
                    <div class="marker">
                        <a class="self-link" href="#example-associate-an-editcontext-with-an-element">Example<bdi>
                                1</bdi></a><span class="example-title">：将 EditContext 与元素关联</span>
                    </div>
                    <pre
                        aria-busy="false"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"module"</span>&gt;</span><span class="language-javascript">
    <span class="hljs-keyword">let</span> canvas = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">"canvas"</span>)
    canvas.<span class="hljs-property">editContext</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EditContext</span>()
    <span class="hljs-comment">// 当关联的元素获得焦点时，EditContext 会自动激活。</span>
    canvas.<span class="hljs-title function_">focus</span>();
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">canvas</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span></code></pre>
                </aside>

                <p>在下面的示例中，作者使用 canvas 来绘制一个可编辑区域，使用户可以输入使用等宽字体渲染的单行文本。该可编辑区域的文本由作者以 String 的形式维护；选区在可编辑区域中的文本偏移由作者以一对
                    Number（selectionStart 和 selectionEnd）维护，这两个 Number 表示从文本起始处到选区起点和终点分别包含多少个 UTF-16
                    码点。为了便于将当前选区和可编辑区域的边界矩形（使用 CSS 像素）告知文本输入服务，作者还会计算选区及可编辑区域在文档中的边界矩形。这些矩形的偏移相对于 canvas 元素的原点给出，因为作者正是将
                    EditContext <a data-lt="associated element" href="#dfn-associated-element" class="internalDFN"
                        data-link-type="dfn" id="ref-for-dfn-associated-element-11">associated</a>
                    到该 canvas 元素上的。由于作者对文本和选区位置的表示方式与 EditContext API 期望的形式一致，作者只需在这些值变化时，将它们赋值给与 canvas <a
                        data-lt="associated element" href="#dfn-associated-element" class="internalDFN"
                        data-link-type="dfn" id="ref-for-dfn-associated-element-12">associated</a> 的 EditContext 即可。
                </p>

                <aside class="example" id="example-using-editcontext-with-editing-model-view-and-controller">
                    <div class="marker">
                        <a class="self-link"
                            href="#example-using-editcontext-with-editing-model-view-and-controller">Example<bdi>
                                2</bdi></a><span class="example-title">：在编辑模型、视图和控制器中使用 EditContext</span>
                    </div>
                    <pre
                        aria-busy="false"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"module"</span>&gt;</span><span class="language-javascript">
    <span class="hljs-comment">// 本示例构建在示例 1 之上。</span>
    <span class="hljs-comment">// 为简洁起见，仅展示新增逻辑。</span>
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">EditingModel</span> {
        <span class="hljs-title function_">constructor</span>(<span class="hljs-params">text, selectionStart, selectionEnd</span>) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">text</span> = text  
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">selectionStart</span> = selectionStart
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">selectionEnd</span> = selectionEnd
        }  
    }  

    <span class="hljs-keyword">class</span> <span class="hljs-title class_">EditingView</span> {  
        <span class="hljs-title function_">constructor</span>(<span class="hljs-params">canvas, model</span>) {  
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">canvas</span> = canvas 
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">model</span> = model 
        } 

        <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) {
            <span class="hljs-comment">// 渲染文本</span>
            <span class="hljs-keyword">let</span> canvasContext2D = <span class="hljs-variable language_">this</span>.<span class="hljs-property">canvas</span>.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">"2d"</span>);
            canvasContext2D.<span class="hljs-title function_">strokeText</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">model</span>.<span class="hljs-property">text</span>);

            <span class="hljs-comment">// 渲染选区（具体实现略）</span>
        } 

        <span class="hljs-title function_">computeSelectionBound</span>(<span class="hljs-params"></span>) { 
            <span class="hljs-comment">// 具体实现略 </span>
        } 

        <span class="hljs-title function_">computeControlBound</span>(<span class="hljs-params"></span>) { 
            <span class="hljs-comment">// 具体实现略 </span>
        } 
    }

    <span class="hljs-keyword">class</span> <span class="hljs-title class_">EditingController</span> {
        <span class="hljs-title function_">constructor</span>(<span class="hljs-params">model, view, editContext</span>) {  
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">view</span> = view
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">model</span> = model
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">editContext</span> = editContext
        }

        <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) {
            view.<span class="hljs-title function_">render</span>()

            <span class="hljs-comment">// 让 EditContext 保持同步，本质上就是</span>
            <span class="hljs-comment">// 渲染模型的纯文本视图。</span>
            <span class="hljs-keyword">let</span> editContext = <span class="hljs-variable language_">this</span>.<span class="hljs-property">canvas</span>.<span class="hljs-property">editContext</span>  
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">editContext</span>.<span class="hljs-title function_">updateText</span>(<span class="hljs-number">0</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">model</span>.<span class="hljs-property">text</span>.<span class="hljs-property">length</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">model</span>.<span class="hljs-property">text</span>)
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">editContext</span>.<span class="hljs-title function_">updateSelection</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">model</span>.<span class="hljs-property">selectionStart</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">model</span>.<span class="hljs-property">selectionEnd</span>)

            <span class="hljs-keyword">let</span> selectionBounds = view.<span class="hljs-title function_">computeSelectionBound</span>()  
            <span class="hljs-keyword">let</span> controlBounds = view.<span class="hljs-title function_">computeControlBound</span>()  

            <span class="hljs-comment">// 这些 bounds 拥有 x、y、width 和 height 成员  </span>
            <span class="hljs-comment">// 因此可以直接赋值给 EditContext。</span>
            editContext.<span class="hljs-title function_">updateSelectionBounds</span>(selectionBounds)
            editContext.<span class="hljs-title function_">updateControlBounds</span>(controlBounds)
        }
    }

    <span class="hljs-keyword">let</span> canvas = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">"canvas"</span>)
    canvas.<span class="hljs-property">editContext</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EditContext</span>()
    <span class="hljs-keyword">let</span> editingModel = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EditingModel</span>(<span class="hljs-string">""</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)
    <span class="hljs-keyword">let</span> editingView = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EditingView</span>(canvas, editingModel)
    <span class="hljs-keyword">let</span> editingController = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EditingController</span>(editingModel,
        editingView, canvas.<span class="hljs-property">editContext</span>);

    editingController.<span class="hljs-title function_">render</span>() 
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">canvas</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span></code></pre>
                </aside>

                <p>在前一个示例的基础上，作者在响应用户输入时，应同时处理可编辑元素（本例中为 canvas）和 EditContext 上的事件。</p>

                <p>针对 DOM 的输入事件继续描述用户的意图。</p>

                <p>下面的示例展示了如何处理 <a data-link-type="idl" data-lt="TextUpdateEvent" href="#dom-textupdateevent"
                        class="internalDFN" id="ref-for-dom-textupdateevent-2"><code>TextUpdateEvent</code></a>、<a
                        data-link-type="idl" data-lt="TextFormatUpdateEvent" href="#dom-textformatupdateevent"
                        class="internalDFN"
                        id="ref-for-dom-textformatupdateevent-3"><code>TextFormatUpdateEvent</code></a> 和 <a
                        data-link-type="idl" data-lt="CharacterBoundsUpdateEvent" href="#dom-characterboundsupdateevent"
                        class="internalDFN"
                        id="ref-for-dom-characterboundsupdateevent-5"><code>CharacterBoundsUpdateEvent</code></a>，
                    以更新模型并将结果渲染到 canvas。</p>
                <aside class="example"
                    id="example-event-handlers-for-textupdateevent-textformatupdateevent-and-characterboundsupdateevent">
                    <div class="marker">
                        <a class="self-link"
                            href="#example-event-handlers-for-textupdateevent-textformatupdateevent-and-characterboundsupdateevent">Example<bdi>
                                3</bdi></a><span class="example-title">：TextUpdateEvent、TextFormatUpdateEvent 与
                            CharacterBoundsUpdateEvent 的事件处理程序</span>
                    </div>
                    <pre aria-busy="false"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">
    <span class="hljs-comment">// 本示例构建在示例 1 和示例 2 之上。</span>
    <span class="hljs-comment">// 为简洁起见，仅展示新增逻辑。</span>
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">EditingModel</span> {
        <span class="hljs-title function_">updateText</span>(<span class="hljs-params">updateRangeStart, updateRangeEnd, updateText</span>) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">text</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">text</span>.<span class="hljs-title function_">substring</span>(<span class="hljs-number">0</span>, updateRangeStart) + updateText
                        + <span class="hljs-variable language_">this</span>.<span class="hljs-property">text</span>.<span class="hljs-title function_">substring</span>(updateRangeEnd)
        }

        <span class="hljs-title function_">updateSelection</span>(<span class="hljs-params">selectionStart, selectionEnd</span>) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">selectionStart</span> = selectionStart
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">selectionEnd</span> = selectionEnd
        }

        <span class="hljs-title function_">updateTextFormats</span>(<span class="hljs-params">textFormats</span>) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">textFormats</span> = textFormats
        }
    }

    <span class="hljs-keyword">class</span> <span class="hljs-title class_">EditingView</span> {
        <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) {
            <span class="hljs-comment">// 渲染文本（实现略）</span>

            <span class="hljs-comment">// 渲染选区（实现略）</span>

            <span class="hljs-comment">// 渲染 IME 装饰</span>
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">model</span>.<span class="hljs-property">textFormats</span>.<span class="hljs-title function_">forEach</span>( <span class="hljs-function"><span class="hljs-params">textFormat</span> =&gt;</span> {
                <span class="hljs-comment">// 为简洁起见，以下变量的初始化略去：</span>
                <span class="hljs-comment">// anchorX：字符串起始位置的 x 坐标</span>
                <span class="hljs-comment">// lineY：下划线的 y 坐标</span>
                <span class="hljs-comment">// charWidth：字符宽度（此处使用等宽字体）</span>
                <span class="hljs-comment">// thickWidth/thinWidth：预定义的粗/细线宽度。</span>
                <span class="hljs-keyword">let</span> lineStartX = anchorX + textFormat.<span class="hljs-property">rangeStart</span> * charWidth;
                <span class="hljs-keyword">let</span> lineEndX = anchorX + textFormat.<span class="hljs-property">rangeEnd</span> * charWidth;
                
                canvasContext2D.<span class="hljs-property">lineWidth</span> = (textFormat.<span class="hljs-property">underlineThickness</span> == <span class="hljs-string">'Thick'</span>)?
                                            thickWidth : thinWidth;
                canvasContext2D.<span class="hljs-title function_">beginPath</span>();
                canvasContext2D.<span class="hljs-title function_">moveTo</span>(lineStartX, lineY);
                canvasContext2D.<span class="hljs-title function_">lineTo</span>(lineEndX, lineY);
                canvasContext2D.<span class="hljs-title function_">stroke</span>();
            })
        }

        <span class="hljs-title function_">computeCharacterBounds</span>(<span class="hljs-params">rangeStart, rangeEnd</span>) {
            <span class="hljs-comment">// 实现略</span>
        }
    }

    <span class="hljs-keyword">class</span> <span class="hljs-title class_">EditingController</span> {
        <span class="hljs-title function_">handleTextUpdate</span>(<span class="hljs-params">updateRangeStart, updateRangeEnd, text, 
                         selectionStart, selectionEnd</span>) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">model</span>.<span class="hljs-title function_">updateText</span>(updateRangeStart, updateRangeEnd, text)
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">model</span>.<span class="hljs-title function_">updateSelection</span>(selectionStart, selectionEnd)
        }

        <span class="hljs-title function_">handleTextFormatUpdate</span>(<span class="hljs-params">textFormats</span>) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">model</span>.<span class="hljs-title function_">updateTextFormats</span>(textFormats);
        }

        <span class="hljs-title function_">handleCharacterBoundsUpdate</span>(<span class="hljs-params">rangeStart, rangeEnd</span>) {
            characterBounds = <span class="hljs-variable language_">this</span>.<span class="hljs-property">view</span>.<span class="hljs-title function_">computeCharacterBounds</span>(rangeStart, rangeEnd);
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">editContext</span>.<span class="hljs-title function_">updateCharacterBounds</span>(rangeStart, characterBounds);
        }
    }

    <span class="hljs-comment">// 当用户输入时，EditContext 会接收 textupdate 事件，</span>
    <span class="hljs-comment">// 可用它来更新编辑器模型。</span>
    editContext.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"textupdate"</span>, <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {
        editingController.<span class="hljs-title function_">handleTextUpdate</span>(e.<span class="hljs-property">updateRangeStart</span>, e.<span class="hljs-property">updateRangeEnd</span>, e.<span class="hljs-property">text</span>,
                                        e.<span class="hljs-property">selectionStart</span>, e.<span class="hljs-property">selectionEnd</span>)
    });

    <span class="hljs-comment">// EditContext 还会接收 textformatupdate 事件，用于 IME 装饰。</span>
    <span class="hljs-comment">// 例如，日文 IME “短语模式” 中的粗/细下划线。</span>
    editContext.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"textformatupdate"</span>, <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {
        editingcontroller.<span class="hljs-title function_">handleTextFormatUpdate</span>(e.<span class="hljs-title function_">getTextFormats</span>());
    });

    <span class="hljs-comment">// 收到 CharacterBoundsUpdate 事件时，作者有责任计算</span>
    <span class="hljs-comment">// 从 rangeStart 到 rangeEnd 之间字符的边界，并调用</span>
    <span class="hljs-comment">// EditContext.updateCharacterBounds 来更新 EditContext 中的字符边界。</span>
    editContext.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"characterboundsupdate"</span>, <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {
        editingcontroller.<span class="hljs-title function_">handleCharacterBoundsUpdate</span>(e.<span class="hljs-property">rangeStart</span>, e.<span class="hljs-property">rangeEnd</span>);
    });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre>
                </aside>
            </section>
        </section>
        <section id="interactions" class="informative">
            <div class="header-wrapper">
                <h3 id="x1-3-interactions-with-other-editing-primitives"><bdi class="secno">1.3 </bdi>与其他编辑原语的交互 </h3><a
                    class="self-link" href="#interactions" aria-label="第 1.3 部分的永久链接。"></a>
            </div>
            <p><em>本节为非规范性内容。</em></p>

            <p>作者并不一定要将 EditContext 与 canvas 元素配合使用。在下面的示例中，作者使用 div
                来建立文档中的可编辑区域，并通过各种样式化元素、图片和文本将内容渲染到该可编辑区域中。这使得作者可以利用用户代理提供的其他内置编辑原语，如选区与拼写检查。 </p>

            <aside class="example" id="example-how-native-selection-can-be-leveraged-to-handle-caret-navigation">
                <div class="marker">
                    <a class="self-link"
                        href="#example-how-native-selection-can-be-leveraged-to-handle-caret-navigation">Example<bdi>
                            4</bdi></a><span class="example-title">：如何利用原生选区来处理光标导航。</span>
                </div>
                <pre aria-busy="false"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">
    <span class="hljs-comment">// 本示例复用示例 2 和示例 3 中的 EditModel 和 EditController。</span>
    <span class="hljs-keyword">let</span> div = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">"div"</span>) 
    div.<span class="hljs-property">editContext</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EditContext</span>() 
    div.<span class="hljs-title function_">focus</span>();

    <span class="hljs-keyword">class</span> <span class="hljs-title class_">EditingView</span> {  
        <span class="hljs-title function_">constructor</span>(<span class="hljs-params">div, model</span>) {  
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">div</span> = div 
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">model</span> = model 
        } 

        <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) {
            <span class="hljs-comment">// 渲染文本</span>
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">div</span>.<span class="hljs-property">innerText</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">model</span>.<span class="hljs-property">text</span>

            <span class="hljs-comment">// 渲染选区（实现略）</span>
        }

        <span class="hljs-title function_">computeSelectionBound</span>(<span class="hljs-params"></span>) { 
            <span class="hljs-comment">// 实现略 </span>
        } 

        <span class="hljs-title function_">computeControlBound</span>(<span class="hljs-params"></span>) { 
            <span class="hljs-comment">// 实现略 </span>
        } 

        <span class="hljs-title function_">computeCharacterBounds</span>(<span class="hljs-params">rangeStart, rangeEnd</span>) {
            <span class="hljs-comment">// 实现略</span>
        }
    }

    <span class="hljs-keyword">class</span> <span class="hljs-title class_">EditingController</span> {
        <span class="hljs-title function_">handleSelectionChange</span>(<span class="hljs-params"></span>) {
            <span class="hljs-comment">// 作者需要负责将 DOM 空间中的选区映射到纯文本空间。</span>
            <span class="hljs-comment">// 一种方式是使用 range.toString() 获取选区起止位置之前的纯文本，</span>
            <span class="hljs-comment">// 然后使用文本长度作为选区索引。</span>
            <span class="hljs-keyword">let</span> s = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getSelection</span>()
            <span class="hljs-keyword">let</span> range = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Range</span>()
            range.<span class="hljs-title function_">setEnd</span>(s.<span class="hljs-property">anchorNode</span>, s.<span class="hljs-property">anchorOffset</span>)
            range.<span class="hljs-title function_">setStartBefore</span>(parentContainer)
            <span class="hljs-keyword">let</span> selectionStart = range.<span class="hljs-title function_">toString</span>().<span class="hljs-property">length</span>

            range.<span class="hljs-title function_">setEnd</span>(s.<span class="hljs-property">focusNode</span>, s.<span class="hljs-property">focusOffset</span>)
            range.<span class="hljs-title function_">setStartBefore</span>(parentContainer)
            <span class="hljs-keyword">let</span> selectionEnd = range.<span class="hljs-title function_">toString</span>().<span class="hljs-property">length</span>

            <span class="hljs-comment">// 更新模型</span>
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">model</span>.<span class="hljs-title function_">updateSelection</span>(selectionStart, selectionEnd)

            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">render</span>()
        }
    }

    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"selectionchange"</span>, <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {
        editingController.<span class="hljs-title function_">handleSelectionChange</span>()
    });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre>
            </aside>

            <aside class="example"
                id="example-how-beforeinput-can-be-used-to-catch-insertreplacementtext-to-apply-spelling-changes">
                <div class="marker">
                    <a class="self-link"
                        href="#example-how-beforeinput-can-be-used-to-catch-insertreplacementtext-to-apply-spelling-changes">Example<bdi>
                            5</bdi></a><span class="example-title">：如何使用 beforeinput 捕获 insertReplacementText
                        以应用拼写修改</span>
                </div>
                <pre aria-busy="false"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">
    <span class="hljs-comment">// 本示例构建在示例 4 之上。</span>
    <span class="hljs-comment">// 为简洁起见，仅展示新增逻辑。</span>
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">EditingController</span> {
        <span class="hljs-title function_">handleSpellCheck</span>(<span class="hljs-params">newText, range</span>) {
            <span class="hljs-keyword">let</span> updateRangeStart = range.<span class="hljs-property">startOffset</span>
            <span class="hljs-keyword">let</span> updateRangeEnd = range.<span class="hljs-property">endOffset</span>

            <span class="hljs-comment">// 更新模型</span>
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">model</span>.<span class="hljs-title function_">updateText</span>(updateRangeStart, updateRangeEnd, newText)
            <span class="hljs-keyword">let</span> newCaretPosition = updateRangeStart + newText.<span class="hljs-property">length</span>
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">model</span>.<span class="hljs-title function_">updateSelection</span>(newCaretPosition, newCaretPosition)

            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">render</span>()
        }
    }

    div.<span class="hljs-property">spellcheck</span> = <span class="hljs-literal">true</span>;
    div.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"beforeinput"</span>, <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {
        <span class="hljs-keyword">if</span> (e.<span class="hljs-property">inputType</span> === <span class="hljs-string">"insertReplacementText"</span>) { <span class="hljs-comment">// 拼写检查</span>
            <span class="hljs-keyword">let</span> newText = e.<span class="hljs-property">dataTransfer</span>.<span class="hljs-title function_">getData</span>(<span class="hljs-string">"text"</span>);
            <span class="hljs-keyword">let</span> range = e.<span class="hljs-title function_">getTargetRanges</span>()[<span class="hljs-number">0</span>];
            editingController.<span class="hljs-title function_">handleSpellCheck</span>(newText, range)
        }
    })
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre>
            </aside>

            <aside class="example"
                id="example-how-beforeinput-can-be-used-to-catch-deletebydrag-and-insertfromdrop-to-apply-drag-and-drop-changes">
                <div class="marker">
                    <a class="self-link"
                        href="#example-how-beforeinput-can-be-used-to-catch-deletebydrag-and-insertfromdrop-to-apply-drag-and-drop-changes">Example<bdi>
                            6</bdi></a><span class="example-title">：如何使用 beforeinput 捕获 deleteByDrag 和 insertFromDrop
                        以应用拖放修改</span>
                </div>
                <pre aria-busy="false"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">
    <span class="hljs-comment">// 本示例构建在示例 4 之上。</span>
    <span class="hljs-comment">// 为简洁起见，仅展示新增逻辑。</span>
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">EditingController</span> {
        <span class="hljs-title function_">handleDeleteByDrag</span>(<span class="hljs-params"></span>) {
            <span class="hljs-comment">// 更新模型</span>
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">model</span>.<span class="hljs-title function_">updateText</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">model</span>.<span class="hljs-property">selectionStart</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">model</span>.<span class="hljs-property">selectionEnd</span>, <span class="hljs-string">""</span>)

            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">render</span>()
        }

        <span class="hljs-title function_">handleInsertFromDrop</span>(<span class="hljs-params">newText, caretPosition</span>) {
            <span class="hljs-comment">// 更新模型</span>
            editingModel.<span class="hljs-title function_">updateText</span>(caretPosition, caretPosition, newText)
            editingModel.<span class="hljs-title function_">updateSelection</span>(caretPosition, caretPosition + newText.<span class="hljs-property">length</span>)

            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">render</span>()
        }
    }

    div.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"beforeinput"</span>, <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {
        <span class="hljs-keyword">if</span> (e.<span class="hljs-property">inputType</span> === <span class="hljs-string">"deleteByDrag"</span>) {
            editingController.<span class="hljs-title function_">handleDeleteByDrag</span>()
        } 
        
        <span class="hljs-keyword">if</span> (e.<span class="hljs-property">inputType</span> === <span class="hljs-string">"insertFromDrop"</span>) {
            newText = e.<span class="hljs-property">dataTransfer</span>.<span class="hljs-title function_">getData</span>(<span class="hljs-string">'text/plain'</span>);
            <span class="hljs-keyword">let</span> selection = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getSelection</span>();
            <span class="hljs-keyword">let</span> caretPosition = selection.<span class="hljs-property">anchorOffset</span>;

            editingController.<span class="hljs-title function_">handleInsertFromDrop</span>(newText, caretPosition)
        }
    })
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre>
            </aside>

        </section>
    </section>
    <section id="conformance">
        <div class="header-wrapper">
            <h2 id="x2-conformance"><bdi class="secno">2. </bdi>一致性</h2><a class="self-link" href="#conformance"
                aria-label="第 2 节的永久链接。"></a>
        </div>
        <p>除标记为非规范性的章节外，本规范中的所有编写指南、图表、示例和注释均为非规范性内容。本规范中的其他所有内容均为规范性内容。</p>
        <p>
            本规范定义的符合性标准适用于单一产品：实现本规范所包含接口的用户代理。
        </p>
        <p>
            以算法或具体步骤表述的符合性要求可以以任何方式实现，只要最终结果等效即可。（尤其是，本规范中定义的算法旨在易于理解，而非追求性能。）
        </p>
    </section>



    <section data-dfn-for="EditContext" id="editcontext-api">
        <div class="header-wrapper">
            <h2 id="x3-editcontext-api"><bdi class="secno">3. </bdi>EditContext API</h2><a class="self-link"
                href="#editcontext-api" aria-label="第 3 节的永久链接。"></a>
        </div>


        <section data-dfn-for="Element" id="extensions-to-the-htmlelement-interface">
            <div class="header-wrapper">
                <h3 id="x3-1-extensions-to-the-htmlelement-interface"><bdi class="secno">3.1 </bdi>对 HTMLElement 接口的扩展
                </h3><a class="self-link" href="#extensions-to-the-htmlelement-interface" aria-label="第 3.1 节的永久链接"></a>
            </div>

            <pre class="idl def" id="webidl-1194002304"><span class="idlHeader"><a class="self-link" href="#webidl-1194002304">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-htmlelement-partial-1" data-title="HTMLElement">partial interface <a data-idl="partial" data-link-type="interface" data-title="HTMLElement" class="idlID" data-dfn-for="HTMLElement" href="https://html.spec.whatwg.org/multipage/dom.html#htmlelement">HTMLElement</a> {<span data-idl="" class="idlAttribute" id="idl-def-htmlelement-editcontext" data-title="editContext" data-dfn-for="HTMLElement">
     attribute<span class="idlType"> <a data-link-type="idl" href="#dom-editcontext" class="internalDFN" id="ref-for-dom-editcontext-21"><code>EditContext</code></a>?</span> <dfn data-export="" data-dfn-type="attribute" id="dom-htmlelement-editcontext" data-idl="attribute" data-title="editContext" data-dfn-for="HTMLElement" data-type="EditContext" data-lt="editContext" data-local-lt="HTMLElement.editContext" class="idlName" tabindex="0" aria-haspopup="dialog"><code>editContext</code></dfn>;</span>
};</span></code></pre>
            <p><a data-link-type="interface" data-lt="HTMLElement"
                    href="https://html.spec.whatwg.org/multipage/dom.html#htmlelement"><code>HTMLElement</code></a>
                具有一个内部槽 [[EditContext]]，它是对一个 <a data-link-type="idl" data-lt="EditContext" href="#dom-editcontext"
                    class="internalDFN" id="ref-for-dom-editcontext-22"><code>EditContext</code></a> 的引用，初始值为 null。</p>
            <dl>
                <dt>editContext</dt>
                <dd><a data-link-type="idl" href="#dom-htmlelement-editcontext" class="internalDFN"
                        id="ref-for-dom-htmlelement-editcontext-3"><code>editContext</code></a> getter 的步骤是返回 <a
                        data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this">this</a> 的内部 [[EditContext]]
                    槽的值。</dd>
                <dd><a data-link-type="idl" href="#dom-htmlelement-editcontext" class="internalDFN"
                        id="ref-for-dom-htmlelement-editcontext-4"><code>editContext</code></a> setter 必须遵循以下步骤：
                    <div class="algorithm">
                        <dl>
                            <dt>输入</dt>
                            <dd><var>editContext</var></dd>
                            <dt>输出</dt>
                            <dd>无</dd>
                        </dl>
                        <ol>
                            <li>如果 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this">this</a> 的 <a
                                    data-link-type="dfn"
                                    href="https://dom.spec.whatwg.org/#concept-element-local-name">local name</a> 既不是 <a
                                    data-link-type="dfn"
                                    href="https://dom.spec.whatwg.org/#valid-shadow-host-name">valid shadow host
                                    name</a>，也不是 "<code>canvas</code>"，则 <a data-link-type="dfn"
                                    href="https://webidl.spec.whatwg.org/#dfn-throw">抛出</a> 一个 "<a
                                    data-link-type="exception"
                                    href="https://webidl.spec.whatwg.org/#notsupportederror"><code>NotSupportedError</code></a>"
                                <a data-link-type="interface" data-lt="DOMException"
                                    href="https://webidl.spec.whatwg.org/#idl-DOMException"><code>DOMException</code></a>。
                            </li>
                            <li>如果 <var>editContext</var> 不为 null，则：
                                <ol>
                                    <li>如果 <var>editContext</var> 的 <a href="#dfn-associated-element"
                                            class="internalDFN" data-link-type="dfn"
                                            id="ref-for-dfn-associated-element-13">associated element</a> 等于 <a
                                            data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this">this</a>，
                                        则终止这些步骤。</li>
                                    <li>如果 <var>editContext</var> 的 <a href="#dfn-associated-element"
                                            class="internalDFN" data-link-type="dfn"
                                            id="ref-for-dfn-associated-element-14">associated element</a> 不为 null，
                                        则 <a data-link-type="dfn"
                                            href="https://webidl.spec.whatwg.org/#dfn-throw">抛出</a> 一个 "<a
                                            data-link-type="exception"
                                            href="https://webidl.spec.whatwg.org/#notsupportederror"><code>NotSupportedError</code></a>"
                                        <a data-link-type="interface" data-lt="DOMException"
                                            href="https://webidl.spec.whatwg.org/#idl-DOMException"><code>DOMException</code></a>。
                                    </li>
                                </ol>
                            </li>
                            <li>令 <var>oldEditContext</var> 为 <a data-link-type="dfn"
                                    href="https://webidl.spec.whatwg.org/#this">this</a> 的内部 [[EditContext]] 槽的值。</li>
                            <li>
                                如果 <var>oldEditContext</var> 不为 null 且 <var>oldEditContext</var> 是 <a
                                    data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this">this</a> 的
                                <a href="https://dom.spec.whatwg.org/#concept-node-document">node document</a> 的
                                <a data-link-type="dfn|abstract-op" href="#dfn-active-editcontext" class="internalDFN"
                                    id="ref-for-dfn-active-editcontext-7">active EditContext</a>，则：
                                <ol>
                                    <li>对 <var>oldEditContext</var> 运行 <a data-link-type="dfn|abstract-op"
                                            href="#dfn-deactivate-an-editcontext" class="internalDFN"
                                            id="ref-for-dfn-deactivate-an-editcontext-2">Deactivate an EditContext</a>
                                        的步骤。</li>
                                    <li>
                                        如果 <var>oldEditContext</var> 的 <a href="#dfn-associated-element"
                                            class="internalDFN" data-link-type="dfn"
                                            id="ref-for-dfn-associated-element-15">associated element</a> 不等于 <a
                                            data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this">this</a>，
                                        则终止这些步骤。
                                    </li>
                                    <li>
                                        如果 <var>editContext</var> 不为 null，且 <var>editContext</var> 的 <a
                                            href="#dfn-associated-element" class="internalDFN" data-link-type="dfn"
                                            id="ref-for-dfn-associated-element-16">associated element</a> 不为 null，
                                        并且 <var>editContext</var> 的
                                        <a href="#dfn-associated-element" class="internalDFN" data-link-type="dfn"
                                            id="ref-for-dfn-associated-element-17">associated element</a> 不等于 <a
                                            data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this">this</a>，
                                        则 <a data-link-type="dfn"
                                            href="https://webidl.spec.whatwg.org/#dfn-throw">抛出</a> 一个 "<a
                                            data-link-type="exception"
                                            href="https://webidl.spec.whatwg.org/#notsupportederror"><code>NotSupportedError</code></a>"
                                        <a data-link-type="interface" data-lt="DOMException"
                                            href="https://webidl.spec.whatwg.org/#idl-DOMException"><code>DOMException</code></a>。
                                    </li>
                                </ol>
                            </li>
                            <li>如果 <var>oldEditContext</var> 不为 null，将 <var>oldEditContext</var> 的 <a
                                    href="#dfn-associated-element" class="internalDFN" data-link-type="dfn"
                                    id="ref-for-dfn-associated-element-18">associated element</a> 设为 null。</li>
                            <li>如果 <var>editContext</var> 不为 null，则将 <var>editContext</var> 的 <a
                                    href="#dfn-associated-element" class="internalDFN" data-link-type="dfn"
                                    id="ref-for-dfn-associated-element-19">associated element</a> 设为 <a
                                    data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this">this</a>。
                            </li>
                            <li>将 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this">this</a> 的内部
                                [[EditContext]] 槽设置为 <var>editContext</var>。</li>
                        </ol>
                    </div>
                </dd>
            </dl>
            <section id="handle-input-for-editcontext">
                <div class="header-wrapper">
                    <h4 id="x3-1-1-handle-input-for-editcontext"><bdi class="secno">3.1.1 </bdi><dfn class="export"
                            data-export="" id="dfn-handle-input-for-editcontext" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">处理 EditContext 的输入</dfn></h4><a class="self-link"
                        href="#handle-input-for-editcontext" aria-label="第 3.1.1 节的永久链接。"></a>
                </div>
                <div class="algorithm">
                    <dl>
                        <dt>输入</dt>
                        <dd><var>element</var>，接收输入的 <a data-link-type="interface" data-lt="HTMLElement"
                                href="https://html.spec.whatwg.org/multipage/dom.html#htmlelement"><code>HTMLElement</code></a>
                        </dd>
                        <dt>输出</dt>
                        <dd>无</dd>
                    </dl>
                    <ol>
                        <li>
                            令 <var>editContext</var> 为 <var>element</var> 的
                            <a href="https://dom.spec.whatwg.org/#concept-node-document">node document</a> 的
                            <a data-link-type="dfn|abstract-op" href="#dfn-active-editcontext" class="internalDFN"
                                id="ref-for-dfn-active-editcontext-8">active EditContext</a>
                        </li>
                        <li>
                            如果 <var>editContext</var> 为 null，则返回。
                        </li>
                        <li>
                            <p>
                                针对给定的 <var>editContext</var>，并使用 <a data-link-type="dfn|abstract-op"
                                    href="#dfn-text-edit-context" class="internalDFN"
                                    id="ref-for-dfn-text-edit-context-17">Text Edit Context</a> 的 <a
                                    data-link-type="dfn|abstract-op" href="#dfn-text-state" class="internalDFN"
                                    id="ref-for-dfn-text-state-3">text state</a> 中的 <a data-link-type="dfn|abstract-op"
                                    href="#dfn-text" class="internalDFN" id="ref-for-dfn-text-13">text</a>、<a
                                    data-link-type="dfn|abstract-op" href="#dfn-text-formats" class="internalDFN"
                                    id="ref-for-dfn-text-formats-1">text formats</a>、
                                <a data-link-type="dfn|abstract-op" href="#dfn-selection-start" class="internalDFN"
                                    id="ref-for-dfn-selection-start-2">selection start</a>、<a
                                    data-link-type="dfn|abstract-op" href="#dfn-selection-end" class="internalDFN"
                                    id="ref-for-dfn-selection-end-2">selection end</a>、<a
                                    data-link-type="dfn|abstract-op" href="#dfn-is-composing" class="internalDFN"
                                    id="ref-for-dfn-is-composing-1">is composing</a>、<a data-link-type="dfn|abstract-op"
                                    href="#dfn-composition-start" class="internalDFN"
                                    id="ref-for-dfn-composition-start-2">composition start</a>、
                                以及 <a data-link-type="dfn|abstract-op" href="#dfn-composition-end" class="internalDFN"
                                    id="ref-for-dfn-composition-end-2">composition end</a>，
                                运行 <a data-link-type="dfn|abstract-op" href="#dfn-update-the-editcontext"
                                    class="internalDFN" id="ref-for-dfn-update-the-editcontext-2">Update the
                                    EditContext</a> 的步骤。
                            </p>
                            <div class="note" role="note" id="issue-container-generatedID-5">
                                <div role="heading" class="note-title marker" id="h-note-5" aria-level="4">
                                    <span>Note</span>
                                </div>
                                <p class="">
                                    由于 <a data-link-type="dfn|abstract-op" href="#dfn-text-edit-context"
                                        class="internalDFN" id="ref-for-dfn-text-edit-context-18">Text Edit Context</a>
                                    是对不同操作系统上文本输入共性方面的抽象，
                                    因此本规范明确不会给出如何确定 <a data-link-type="dfn|abstract-op" href="#dfn-text-edit-context"
                                        class="internalDFN" id="ref-for-dfn-text-edit-context-19">Text Edit Context</a>
                                    中这些取值的方式。它们会因不同的操作系统和输入设备而异。
                                </p>
                            </div>
                        </li>
                    </ol>
                </div>

            </section>
            <section id="editcontext-handled-inputtype">
                <div class="header-wrapper">
                    <h4 id="x3-1-2-editcontext-handled-inputtype"><bdi class="secno">3.1.2 </bdi><dfn
                            id="dfn-editcontext-handled-inputtype" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">EditContext 处理的 inputType</dfn></h4><a class="self-link"
                        href="#editcontext-handled-inputtype" aria-label="第 3.1.2 节的永久链接。"></a>
                </div>
                <div class="algorithm">
                    如果某个 <a href="https://www.w3.org/TR/uievents/#dom-inputevent-inputtype">inputType</a> 属于以下之一，则它是一个
                    <a data-link-type="dfn|abstract-op" href="#dfn-editcontext-handled-inputtype" class="internalDFN"
                        id="ref-for-dfn-editcontext-handled-inputtype-1">EditContext-handled inputType</a>：
                    <ul>
                        <li><code>insertText</code></li>
                        <li><code>insertTranspose</code></li>
                        <li><code>deleteWordBackward</code></li>
                        <li><code>deleteWordForward</code></li>
                        <li><code>deleteContent</code></li>
                        <li><code>deleteContentBackward</code></li>
                        <li><code>deleteContentForward</code></li>
                    </ul>
                    <div class="note" role="note" id="issue-container-generatedID-6">
                        <div role="heading" class="note-title marker" id="h-note-6" aria-level="4"><span>Note</span>
                        </div>
                        <div class="">
                            由 <a data-link-type="idl" data-lt="EditContext" href="#dom-editcontext" class="internalDFN"
                                id="ref-for-dom-editcontext-23"><code>EditContext</code></a>
                            处理的 <a href="https://www.w3.org/TR/uievents/#dom-inputevent-inputtype">inputType</a>
                            是那些仅对原始文本进行操作的类型。其他依赖格式、剪贴板/拖放、撤销或浏览器 UI（如拼写检查）的 <a
                                href="https://www.w3.org/TR/uievents/#dom-inputevent-inputtype">inputType</a>
                            无法由
                            <a data-link-type="idl" data-lt="EditContext" href="#dom-editcontext" class="internalDFN"
                                id="ref-for-dom-editcontext-24"><code>EditContext</code></a> 处理，因为 <a
                                data-link-type="idl" data-lt="EditContext" href="#dom-editcontext" class="internalDFN"
                                id="ref-for-dom-editcontext-25"><code>EditContext</code></a> 的状态不包含这些概念。如果作者希望其应用处理这些 <a
                                href="https://www.w3.org/TR/uievents/#dom-inputevent-inputtype">inputType</a>，
                            则需要在 <a href="https://www.w3.org/TR/uievents/#event-type-beforeinput">beforeinput</a>
                            事件处理程序中手动处理它们。
                        </div>
                    </div>
                </div>

            </section>
            <section id="update-the-editcontext">
                <div class="header-wrapper">
                    <h4 id="x3-1-3-update-the-editcontext"><bdi class="secno">3.1.3 </bdi><dfn
                            id="dfn-update-the-editcontext" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">更新
                            EditContext</dfn></h4><a class="self-link" href="#update-the-editcontext"
                        aria-label="第 3.1.3 节的永久链接。"></a>
                </div>
                <div class="algorithm">
                    <dl>
                        <dt>输入</dt>
                        <dd><var>editContext</var>，一个 <a data-link-type="idl" data-lt="EditContext"
                                href="#dom-editcontext" class="internalDFN"
                                id="ref-for-dom-editcontext-26"><code>EditContext</code></a></dd>
                        <dd><var>text</var>，一个字符串</dd>
                        <dd><var>textFormats</var>，来自 <a data-link-type="dfn|abstract-op" href="#dfn-text-input-service"
                                class="internalDFN" id="ref-for-dfn-text-input-service-17">Text Input Service</a> 的 <a
                                data-link-type="dfn|abstract-op" href="#dfn-text-format" class="internalDFN"
                                id="ref-for-dfn-text-format-2">text
                                format</a> 数组</dd>
                        <dd><var>selectionStart</var>，选区起点的新位置</dd>
                        <dd><var>selectionEnd</var>，选区终点的新位置</dd>
                        <dd><var>isComposing</var>，一个布尔值，指示在更新结束时合成是否应处于激活状态</dd>
                        <dd><var>replacementRangeStart</var>，当前合成的起始位置（若无合成则为 0）</dd>
                        <dd><var>replacementRangeEnd</var>，当前合成的结束位置（若无合成则为 0）</dd>
                        <dt>输出</dt>
                        <dd>无</dd>
                    </dl>
                    <ol>
                        <li>
                            如果 <var>isComposing</var> 为 true、<var>text</var> 非空，并且
                            <var>editContext</var> 的 <a data-link-type="dfn|abstract-op" href="#dfn-is-composing"
                                class="internalDFN" id="ref-for-dfn-is-composing-2">is composing</a> 为 false，则：
                            <ol>
                                <li><a data-link-type="dfn"
                                        href="https://dom.spec.whatwg.org/#concept-event-fire">触发事件</a>，其名称为 <a
                                        href="https://w3c.github.io/uievents/#event-type-compositionstart">compositionstart</a>，
                                    目标为 <var>editContext</var>，并使用 <a data-link-type="interface"
                                        data-lt="CompositionEvent"
                                        href="https://www.w3.org/TR/uievents/#compositionevent"><code>CompositionEvent</code></a>。
                                </li>
                                <li>将 <var>editContext</var> 的 <a data-link-type="dfn|abstract-op"
                                        href="#dfn-is-composing" class="internalDFN" id="ref-for-dfn-is-composing-3">is
                                        composing</a> 设为 true。</li>
                            </ol>
                        </li>
                        <li>
                            如果 <var>text</var> 为空：
                            <ol>
                                <li>如果 <var>editContext</var> 的 <a data-link-type="dfn|abstract-op"
                                        href="#dfn-is-composing" class="internalDFN" id="ref-for-dfn-is-composing-4">is
                                        composing</a> 为 false，则返回。</li>
                                <li>
                                    如果 <var>editContext</var> 的 <a data-link-type="dfn|abstract-op"
                                        href="#dfn-is-composing" class="internalDFN" id="ref-for-dfn-is-composing-5">is
                                        composing</a> 为 true 且 <var>isComposing</var> 为 false，则：
                                    <ol>
                                        <li>将 <var>editContext</var> 的 <a data-link-type="dfn|abstract-op"
                                                href="#dfn-is-composing" class="internalDFN"
                                                id="ref-for-dfn-is-composing-6">is composing</a> 设为 false。</li>
                                        <li>
                                            <a data-link-type="dfn"
                                                href="https://dom.spec.whatwg.org/#concept-event-fire">触发事件</a>，
                                            其名称为
                                            <a
                                                href="https://w3c.github.io/uievents/#event-type-compositionend">compositionend</a>，
                                            目标为 <var>editContext</var>，并使用 <a data-link-type="interface"
                                                data-lt="CompositionEvent"
                                                href="https://www.w3.org/TR/uievents/#compositionevent"><code>CompositionEvent</code></a>。
                                        </li>
                                        <li>返回。</li>
                                    </ol>
                                </li>
                            </ol>
                        </li>
                        <li>如果 <var>editContext</var> 的 <a data-link-type="dfn|abstract-op" href="#dfn-is-composing"
                                class="internalDFN" id="ref-for-dfn-is-composing-7">is composing</a> 为 true，则：
                            <ol>
                                <li>令 <var>insertionStart</var> 为 <var>replacementRangeStart</var>。</li>
                                <li>令 <var>insertionEnd</var> 为 <var>replacementRangeEnd</var>。</li>
                            </ol>
                        </li>
                        <li>否则：
                            <ol>
                                <li>令 <var>insertionStart</var> 为 <var>selectionStart</var>。</li>
                                <li>令 <var>insertionEnd</var> 为 <var>selectionEnd</var>。</li>
                            </ol>
                        </li>
                        <li>
                            将 <var>editContext</var> 的 <a data-link-type="dfn|abstract-op" href="#dfn-text"
                                class="internalDFN" id="ref-for-dfn-text-14">text</a> 中
                            <var>insertionStart</var> 到 <var>insertionEnd</var> 范围内的子串替换为 <var>text</var>
                        </li>
                        <li>将 <var>editContext</var> 的 <a data-link-type="dfn|abstract-op" href="#dfn-selection-start"
                                class="internalDFN" id="ref-for-dfn-selection-start-3">selection start</a> 设为
                            <var>selectionStart</var>。
                        </li>
                        <li>将 <var>editContext</var> 的 <a data-link-type="dfn|abstract-op" href="#dfn-selection-end"
                                class="internalDFN" id="ref-for-dfn-selection-end-3">selection end</a> 设为
                            <var>selectionEnd</var>。
                        </li>
                        <li>将 <var>editContext</var> 的 <a data-link-type="dfn|abstract-op" href="#dfn-composition-start"
                                class="internalDFN" id="ref-for-dfn-composition-start-3">composition start</a> 设为
                            <var>insertionStart</var>。
                        </li>
                        <li>将 <var>editContext</var> 的 <a data-link-type="dfn|abstract-op" href="#dfn-composition-end"
                                class="internalDFN" id="ref-for-dfn-composition-end-3">composition end</a> 设为
                            <var>editContext</var> 的 <a data-link-type="dfn|abstract-op" href="#dfn-composition-start"
                                class="internalDFN" id="ref-for-dfn-composition-start-4">composition start</a> 加上
                            <var>text</var> 的长度。
                        </li>
                        <li>针对给定的 <var>editContext</var> 和 <var>text</var>，执行 <a data-link-type="dfn|abstract-op"
                                href="#dfn-dispatch-text-update-event" class="internalDFN"
                                id="ref-for-dfn-dispatch-text-update-event-1">Dispatch text update
                                event</a>。</li>
                        <li>
                            如果 <var>editContext</var> 的 <a data-link-type="dfn|abstract-op" href="#dfn-is-composing"
                                class="internalDFN" id="ref-for-dfn-is-composing-8">is composing</a> 为 true，则：
                            <ol>
                                <li>针对给定的 <var>editContext</var> 和 <var>textFormats</var>，执行 <a
                                        data-link-type="dfn|abstract-op" href="#dfn-dispatch-text-format-update-event"
                                        class="internalDFN"
                                        id="ref-for-dfn-dispatch-text-format-update-event-1">Dispatch text format update
                                        event</a>。</li>
                                <li>针对给定的 <var>editContext</var>，执行 <a data-link-type="dfn|abstract-op"
                                        href="#dfn-dispatch-character-bounds-update-event" class="internalDFN"
                                        id="ref-for-dfn-dispatch-character-bounds-update-event-1">Dispatch character
                                        bounds update event</a>。</li>
                                <li>如果 <var>isComposing</var> 为 false，则：
                                    <ol>
                                        <li>将 <var>editContext</var> 的 <a data-link-type="dfn|abstract-op"
                                                href="#dfn-is-composing" class="internalDFN"
                                                id="ref-for-dfn-is-composing-9">is composing</a> 设为 false。</li>
                                        <li>
                                            <a data-link-type="dfn"
                                                href="https://dom.spec.whatwg.org/#concept-event-fire">触发事件</a>，
                                            其名称为
                                            <a
                                                href="https://w3c.github.io/uievents/#event-type-compositionend">compositionend</a>，
                                            目标为 <var>editContext</var>，并使用 <a data-link-type="interface"
                                                data-lt="CompositionEvent"
                                                href="https://www.w3.org/TR/uievents/#compositionevent"><code>CompositionEvent</code></a>。
                                        </li>
                                    </ol>
                                </li>
                            </ol>
                        </li>
                    </ol>
                </div>

            </section>
            <section id="update-the-text-edit-context">
                <div class="header-wrapper">
                    <h4 id="x3-1-4-update-the-text-edit-context"><bdi class="secno">3.1.4 </bdi><dfn
                            id="dfn-update-the-text-edit-context" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">更新文本编辑上下文</dfn></h4><a class="self-link"
                        href="#update-the-text-edit-context" aria-label="第 3.1.4 节的永久链接。"></a>
                </div>
                <div class="algorithm">
                    <dl>
                        <dt>输入</dt>
                        <dd><var>document</var>，一个 <a data-link-type="interface" data-lt="Document"
                                href="https://dom.spec.whatwg.org/#document"><code>Document</code></a></dd>
                        <dt>输出</dt>
                        <dd>无</dd>
                    </dl>
                    <ol>
                        <li>令 <var>oldActiveEditContext</var> 为 <var>document</var> 的 <a
                                data-link-type="dfn|abstract-op" href="#dfn-active-editcontext" class="internalDFN"
                                id="ref-for-dfn-active-editcontext-9">active EditContext</a>。</li>
                        <li>令 <var>newActiveEditContext</var> 为对 <var>document</var> 运行 <a
                                data-link-type="dfn|abstract-op" href="#dfn-determine-the-active-editcontext"
                                class="internalDFN" id="ref-for-dfn-determine-the-active-editcontext-1">Determine the
                                active EditContext</a> 步骤的结果。</li>
                        <li>如果 <var>oldActiveEditContext</var> 不为 null，则对 <var>oldActiveEditContext</var> 运行 <a
                                data-link-type="dfn|abstract-op" href="#dfn-deactivate-an-editcontext"
                                class="internalDFN" id="ref-for-dfn-deactivate-an-editcontext-3">Deactivate an
                                EditContext</a> 的步骤。</li>
                        <li>如果 <var>newActiveEditContext</var> 不为 null，则：
                            <ol>
                                <li>更新 <a data-link-type="dfn|abstract-op" href="#dfn-text-edit-context"
                                        class="internalDFN" id="ref-for-dfn-text-edit-context-20">Text Edit
                                        Context</a> 的 <a data-link-type="dfn|abstract-op" href="#dfn-text-state"
                                        class="internalDFN" id="ref-for-dfn-text-state-4">text state</a>，使其与
                                    <var>editContext</var> 的 <a data-link-type="dfn|abstract-op" href="#dfn-text-state"
                                        class="internalDFN" id="ref-for-dfn-text-state-5">text
                                        state</a> 中的取值一致。
                                </li>
                            </ol>
                        </li>
                        <li>将 <var>document</var> 的 <a data-link-type="dfn|abstract-op" href="#dfn-active-editcontext"
                                class="internalDFN" id="ref-for-dfn-active-editcontext-10">active EditContext</a> 设为
                            <var>newActiveEditContext</var>。
                        </li>
                    </ol>
                    <div class="note" role="note" id="issue-container-generatedID-7">
                        <div role="heading" class="note-title marker" id="h-note-7" aria-level="4"><span>Note</span>
                        </div>
                        <p class="">
                            注意：更新 <a data-link-type="dfn|abstract-op" href="#dfn-text-edit-context" class="internalDFN"
                                id="ref-for-dfn-text-edit-context-21">Text Edit Context</a> 的 <a
                                data-link-type="dfn|abstract-op" href="#dfn-text-state" class="internalDFN"
                                id="ref-for-dfn-text-state-6">text state</a> 的步骤取决于对特定平台 <a
                                data-link-type="dfn|abstract-op" href="#dfn-text-input-service" class="internalDFN"
                                id="ref-for-dfn-text-input-service-18">Text Input Service</a> 所创建抽象的性质。
                            这些细节不属于本规范的一部分。
                        </p>
                    </div>
                </div>

            </section>
            <section id="dispatch-text-update-event">
                <div class="header-wrapper">
                    <h4 id="x3-1-5-dispatch-text-update-event"><bdi class="secno">3.1.5 </bdi><dfn
                            id="dfn-dispatch-text-update-event" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">分发文本更新事件</dfn></h4><a class="self-link"
                        href="#dispatch-text-update-event" aria-label="第 3.1.5 节的永久链接。"></a>
                </div>
                <div class="algorithm">
                    <dl>
                        <dt>输入</dt>
                        <dd><var>editContext</var>，一个 <a data-link-type="idl" data-lt="EditContext"
                                href="#dom-editcontext" class="internalDFN"
                                id="ref-for-dom-editcontext-27"><code>EditContext</code></a></dd>
                        <dd><var>text</var>，一个字符串</dd>
                        <dt>输出</dt>
                        <dd>无</dd>
                    </dl>
                    <ol>
                        <li>
                            <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire">触发事件</a>，其名称为
                            "textupdate"，目标为 <var>editContext</var>，并使用 <a data-link-type="idl"
                                data-lt="TextUpdateEvent" href="#dom-textupdateevent" class="internalDFN"
                                id="ref-for-dom-textupdateevent-3"><code>TextUpdateEvent</code></a>，其中
                            <a data-link-type="idl" href="#dom-textupdateevent-text" class="internalDFN"
                                id="ref-for-dom-textupdateevent-text-1"><code>text</code></a> 初始化为
                            <var>text</var>，
                            <a data-link-type="idl" href="#dom-textupdateevent-selectionstart" class="internalDFN"
                                id="ref-for-dom-textupdateevent-selectionstart-1"><code>selectionStart</code></a>
                            初始化为 <var>editContext</var> 的 <a data-link-type="dfn|abstract-op"
                                href="#dfn-selection-start" class="internalDFN"
                                id="ref-for-dfn-selection-start-4">selection start</a>，以及
                            <a data-link-type="idl" href="#dom-textupdateevent-selectionend" class="internalDFN"
                                id="ref-for-dom-textupdateevent-selectionend-1"><code>selectionEnd</code></a>
                            初始化为 <var>editContext</var> 的 <a data-link-type="dfn|abstract-op" href="#dfn-selection-end"
                                class="internalDFN" id="ref-for-dfn-selection-end-4">selection
                                end</a>。
                        </li>
                    </ol>
                </div>

            </section>
            <section id="dispatch-text-format-update-event">
                <div class="header-wrapper">
                    <h4 id="x3-1-6-dispatch-text-format-update-event"><bdi class="secno">3.1.6 </bdi><dfn
                            id="dfn-dispatch-text-format-update-event" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">分发文本格式更新事件</dfn></h4><a class="self-link"
                        href="#dispatch-text-format-update-event" aria-label="第 3.1.6 节的永久链接。"></a>
                </div>
                <div class="algorithm">
                    <dl>
                        <dt>输入</dt>
                        <dd><var>editContext</var>，一个 <a data-link-type="idl" data-lt="EditContext"
                                href="#dom-editcontext" class="internalDFN"
                                id="ref-for-dom-editcontext-28"><code>EditContext</code></a></dd>
                        <dd><var>textFormats</var>，来自 <a data-link-type="dfn|abstract-op" href="#dfn-text-input-service"
                                class="internalDFN" id="ref-for-dfn-text-input-service-19">Text Input Service</a> 的 <a
                                data-link-type="dfn|abstract-op" href="#dfn-text-format" class="internalDFN"
                                id="ref-for-dfn-text-format-3">text
                                format</a> 数组</dd>
                        <dt>输出</dt>
                        <dd>无</dd>
                    </dl>
                    <ol>
                        <li>
                            令 <var>formats</var> 为一个 <a data-link-type="idl" data-lt="TextFormat" href="#dom-textformat"
                                class="internalDFN" id="ref-for-dom-textformat-1"><code>TextFormat</code></a> 数组，初始为空。
                        </li>
                        <li>
                            对于 <var>textFormats</var> 中的每个 <a data-link-type="dfn|abstract-op" href="#dfn-text-format"
                                class="internalDFN" id="ref-for-dfn-text-format-4">text format</a> <var>format</var>：
                            <ol>
                                <li>令 <var>textFormat</var> 为一个新的 <a data-link-type="idl" data-lt="TextFormat"
                                        href="#dom-textformat" class="internalDFN"
                                        id="ref-for-dom-textformat-2"><code>TextFormat</code></a>，其包含
                                    <var>rangeStart</var>、<var>rangeEnd</var>、<var>underlineStyle</var>、<var>underlineThickness</var>。
                                </li>
                                <li>将 <var>textFormat</var> 的 <a data-link-type="idl" href="#dom-textformat-rangestart"
                                        class="internalDFN"
                                        id="ref-for-dom-textformat-rangestart-1"><code>rangeStart</code></a> 设为
                                    <var>format</var> 的 <a data-link-type="dfn|abstract-op" href="#dfn-range-start"
                                        class="internalDFN" id="ref-for-dfn-range-start-1">range start</a>。
                                </li>
                                <li>将 <var>textFormat</var> 的 <a data-link-type="idl" href="#dom-textformat-rangeend"
                                        class="internalDFN"
                                        id="ref-for-dom-textformat-rangeend-1"><code>rangeEnd</code></a> 设为
                                    <var>format</var> 的 <a data-link-type="dfn|abstract-op" href="#dfn-range-end"
                                        class="internalDFN" id="ref-for-dfn-range-end-1">range end</a>。
                                </li>
                                <li>将 <var>textFormat</var> 的 <a data-link-type="idl"
                                        href="#dom-textformat-underlinestyle" class="internalDFN"
                                        id="ref-for-dom-textformat-underlinestyle-1"><code>underlineStyle</code></a> 设为
                                    <var>format</var> 的 <a data-link-type="dfn|abstract-op" href="#dfn-underline-style"
                                        class="internalDFN" id="ref-for-dfn-underline-style-1">underline style</a>。
                                </li>
                                <li>将 <var>textFormat</var> 的 <a data-link-type="idl"
                                        href="#dom-textformat-underlinethickness" class="internalDFN"
                                        id="ref-for-dom-textformat-underlinethickness-1"><code>underlineThickness</code></a>
                                    设为 <var>format</var> 的 <a data-link-type="dfn|abstract-op"
                                        href="#dfn-underline-thickness" class="internalDFN"
                                        id="ref-for-dfn-underline-thickness-1">underline thickness</a>。</li>
                                <li>将 <var>textFormat</var> 追加到 <var>formats</var></li>
                            </ol>
                        </li>
                        <li>
                            <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire">触发事件</a>，其名称为
                            "textformatupdate"，目标为 <var>editContext</var>，并使用 <a data-link-type="idl"
                                data-lt="TextFormatUpdateEvent" href="#dom-textformatupdateevent" class="internalDFN"
                                id="ref-for-dom-textformatupdateevent-4"><code>TextFormatUpdateEvent</code></a>，且将该 <a
                                data-link-type="idl" data-lt="TextFormatUpdateEvent" href="#dom-textformatupdateevent"
                                class="internalDFN"
                                id="ref-for-dom-textformatupdateevent-5"><code>TextFormatUpdateEvent</code></a> 的 <a
                                data-link-type="dfn|abstract-op" href="#dfn-text-format-list" class="internalDFN"
                                id="ref-for-dfn-text-format-list-1">text format list</a> 初始化为
                            <var>formats</var>。
                        </li>
                    </ol>
                </div>

            </section>
            <section id="dispatch-character-bounds-update-event">
                <div class="header-wrapper">
                    <h4 id="x3-1-7-dispatch-character-bounds-update-event"><bdi class="secno">3.1.7 </bdi><dfn
                            id="dfn-dispatch-character-bounds-update-event" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">分发字符边界更新事件</dfn></h4><a class="self-link"
                        href="#dispatch-character-bounds-update-event" aria-label="第 3.1.7 节的永久链接。"></a>
                </div>
                <div class="algorithm">
                    <dl>
                        <dt>输入</dt>
                        <dd><var>editContext</var>，一个 <a data-link-type="idl" data-lt="EditContext"
                                href="#dom-editcontext" class="internalDFN"
                                id="ref-for-dom-editcontext-29"><code>EditContext</code></a></dd>
                        <dt>输出</dt>
                        <dd>无</dd>
                    </dl>
                    <ol>
                        <li>
                            <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire">触发事件</a>，其名称为
                            "characterboundsupdate"，目标为 <var>editContext</var>，并使用 <a data-link-type="idl"
                                data-lt="CharacterBoundsUpdateEvent" href="#dom-characterboundsupdateevent"
                                class="internalDFN"
                                id="ref-for-dom-characterboundsupdateevent-6"><code>CharacterBoundsUpdateEvent</code></a>，其中
                            <a data-link-type="idl" href="#dom-characterboundsupdateevent-rangestart"
                                class="internalDFN"
                                id="ref-for-dom-characterboundsupdateevent-rangestart-1"><code>rangeStart</code></a>
                            初始化为 <var>editContext</var> 的 <a data-link-type="dfn|abstract-op"
                                href="#dfn-composition-start" class="internalDFN"
                                id="ref-for-dfn-composition-start-5">composition start</a>，并将
                            <a data-link-type="idl" href="#dom-characterboundsupdateevent-rangeend" class="internalDFN"
                                id="ref-for-dom-characterboundsupdateevent-rangeend-1"><code>rangeEnd</code></a>
                            初始化为 <var>editContext</var> 的 <a data-link-type="dfn|abstract-op"
                                href="#dfn-composition-end" class="internalDFN"
                                id="ref-for-dfn-composition-end-4">composition end</a>。
                        </li>
                    </ol>
                </div>

            </section>
            <section id="deactivate-an-editcontext">
                <div class="header-wrapper">
                    <h4 id="x3-1-8-deactivate-an-editcontext"><bdi class="secno">3.1.8 </bdi><dfn
                            id="dfn-deactivate-an-editcontext" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">停用 EditContext</dfn></h4><a class="self-link"
                        href="#deactivate-an-editcontext" aria-label="第 3.1.8 节的永久链接。"></a>
                </div>
                <div class="algorithm">
                    <dl>
                        <dt>输入</dt>
                        <dd><var>editContext</var>，一个 <a data-link-type="idl" data-lt="EditContext"
                                href="#dom-editcontext" class="internalDFN"
                                id="ref-for-dom-editcontext-30"><code>EditContext</code></a></dd>
                        <dt>输出</dt>
                        <dd>无</dd>
                    </dl>
                    <ol>
                        <li>将 <var>editContext</var> 的 <a data-link-type="dfn|abstract-op" href="#dfn-is-composing"
                                class="internalDFN" id="ref-for-dfn-is-composing-10">is composing</a> 设为 false。</li>
                        <li>
                            <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire">触发事件</a>，其名称为
                            <a href="https://w3c.github.io/uievents/#event-type-compositionend">compositionend</a>，
                            目标为 <var>editContext</var>，并使用 <a data-link-type="interface" data-lt="CompositionEvent"
                                href="https://www.w3.org/TR/uievents/#compositionevent"><code>CompositionEvent</code></a>。
                        </li>
                    </ol>
                </div>

            </section>
            <section id="determine-the-active-editcontext">
                <div class="header-wrapper">
                    <h4 id="x3-1-9-determine-the-active-editcontext"><bdi class="secno">3.1.9 </bdi><dfn
                            id="dfn-determine-the-active-editcontext" tabindex="0" aria-haspopup="dialog"
                            data-dfn-type="dfn">确定活动的 EditContext</dfn></h4><a class="self-link"
                        href="#determine-the-active-editcontext" aria-label="第 3.1.9 节的永久链接。"></a>
                </div>
                <div class="algorithm">
                    <dl>
                        <dt>输入</dt>
                        <dd><var>document</var>，一个 <a data-link-type="interface" data-lt="Document"
                                href="https://dom.spec.whatwg.org/#document"><code>Document</code></a></dd>
                        <dt>输出</dt>
                        <dd>一个 <a data-link-type="idl" data-lt="EditContext" href="#dom-editcontext" class="internalDFN"
                                id="ref-for-dom-editcontext-31"><code>EditContext</code></a>，或 null。</dd>
                    </dl>
                    <ol>
                        <li>令 <var>traversable</var> 为 <var>document</var> 的 <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/document-sequences.html#node-navigable">node
                                navigable</a> 的 <a data-link-type="dfn"
                                href="https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-traversable">top-level
                                traversable</a>。</li>
                        <li>如果 <var>traversable</var> 为 null，则返回 null。</li>
                        <li>
                            令 <var>focused</var> 为在给定 <var>traversable</var> 的情况下，
                            <a
                                href="https://html.spec.whatwg.org/multipage/interaction.html#currently-focused-area-of-a-top-level-traversable">top-level
                                traversable 当前聚焦区域</a> 的
                            <a href="https://html.spec.whatwg.org/multipage/interaction.html#dom-anchor">DOM anchor</a>。
                        </li>
                        <li>
                            <p>如果 <var>focused</var> 为 null，或者 <var>focused</var> 的 <a data-link-type="dfn"
                                    href="https://dom.spec.whatwg.org/#concept-shadow-including-root">shadow-including
                                    root</a> 不等于 <var>document</var>，则返回 null。</p>
                            <div class="note" role="note" id="issue-container-generatedID-8">
                                <div role="heading" class="note-title marker" id="h-note-8" aria-level="4">
                                    <span>Note</span>
                                </div>
                                <p class="">
                                    通过 <a data-link-type="dfn"
                                        href="https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-traversable">top-level
                                        traversable</a> 获取 <var>focusable</var> 的目的，是希望每个
                                    <a data-link-type="dfn"
                                        href="https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-traversable">top-level
                                        traversable</a> 在任一时刻只有一个 <a data-link-type="dfn|abstract-op"
                                        href="#dfn-active-editcontext" class="internalDFN"
                                        id="ref-for-dfn-active-editcontext-11">active EditContext</a>。
                                    因此，如果系统焦点在另一个文档中，则该文档不能拥有 <a data-link-type="dfn|abstract-op"
                                        href="#dfn-active-editcontext" class="internalDFN"
                                        id="ref-for-dfn-active-editcontext-12">active EditContext</a>。
                                </p>
                            </div>
                        </li>
                        <li>令 <var>editContext</var> 为 null。</li>
                        <li>当 <var>focused</var> 不为 null 且 <var>focused</var> 为 <a
                                href="https://w3c.github.io/editing/docs/execCommand/#editable">editable</a> 时：
                            <ol>
                                <li>将 <var>editContext</var> 设为 <var>focused</var> 的内部 [[EditContext]] 槽的值。</li>
                                <li>令 <var>parent</var> 为 <var>focused</var> 的 <a
                                        href="https://dom.spec.whatwg.org/#concept-tree-parent">parent</a>。</li>
                                <li>
                                    如果 <var>parent</var> 为 null 且 <var>focused</var> 的 <a
                                        href="https://dom.spec.whatwg.org/#concept-tree-root">root</a>
                                    是一个 <a data-link-type="dfn"
                                        href="https://dom.spec.whatwg.org/#concept-shadow-root">shadow root</a>，则令
                                    <var>parent</var> 为 <var>focused</var> 的
                                    <a href="https://dom.spec.whatwg.org/#concept-tree-root">root</a> 的
                                    <a href="https://dom.spec.whatwg.org/#concept-documentfragment-host">host</a>。
                                </li>
                                <li>将 <var>focused</var> 设为 <var>parent</var>。</li>
                            </ol>
                        </li>
                        <li>返回 <var>editContext</var>。</li>
                    </ol>
                    <div class="note" role="note" id="issue-container-generatedID-9">
                        <div role="heading" class="note-title marker" id="h-note-9" aria-level="4"><span>Note</span>
                        </div>
                        <p class="">
                            如果某个 <a data-link-type="idl" data-lt="EditContext" href="#dom-editcontext"
                                class="internalDFN" id="ref-for-dom-editcontext-32"><code>EditContext</code></a> 的 <a
                                data-link-type="dfn|abstract-op" href="#dfn-associated-element" class="internalDFN"
                                id="ref-for-dfn-associated-element-20">associated element</a> 的父节点是 editable，那么该 <a
                                data-link-type="idl" data-lt="EditContext" href="#dom-editcontext" class="internalDFN"
                                id="ref-for-dom-editcontext-33"><code>EditContext</code></a>
                            不能成为 <a data-link-type="dfn|abstract-op" href="#dfn-active-editcontext" class="internalDFN"
                                id="ref-for-dfn-active-editcontext-13">active EditContext</a>。
                            无论该父节点是因为另一个 <a data-link-type="idl" data-lt="EditContext" href="#dom-editcontext"
                                class="internalDFN" id="ref-for-dom-editcontext-34"><code>EditContext</code></a> 还是因为
                            <code><a data-link-type="element-attr" href="https://html.spec.whatwg.org/multipage/interaction.html#attr-contenteditable">contenteditable</a></code>
                            而变为 editable，都是如此。
                        </p>
                    </div>
                </div>

            </section>
        </section>
        <section id="editcontext-interface-0">
            <div class="header-wrapper">
                <h3 id="editcontext-interface"><bdi class="secno">3.2 </bdi>EditContext 接口</h3><a class="self-link"
                    href="#editcontext-interface" aria-label="第 3.2 节的永久链接。"></a>
            </div>
            <pre class="idl def" id="webidl-1706524934"><span class="idlHeader"><a class="self-link" href="#webidl-1706524934">WebIDL</a></span><code><span data-idl="" class="idlDictionary" id="idl-def-editcontextinit" data-title="EditContextInit">dictionary <dfn data-export="" data-dfn-type="dictionary" id="dom-editcontextinit" data-idl="dictionary" data-title="EditContextInit" data-dfn-for="" class="idlID" tabindex="0" aria-haspopup="dialog"><code>EditContextInit</code></dfn> {<span data-idl="" class="idlMember" id="idl-def-editcontextinit-text" data-title="text" data-dfn-for="EditContextInit"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <dfn data-export="" data-dfn-type="dict-member" id="dom-editcontextinit-text" data-idl="field" data-title="text" data-dfn-for="EditContextInit" data-type="DOMString" class="idlName" tabindex="0" aria-haspopup="dialog"><code>text</code></dfn>;</span><span data-idl="" class="idlMember" id="idl-def-editcontextinit-selectionstart" data-title="selectionStart" data-dfn-for="EditContextInit"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="dict-member" id="dom-editcontextinit-selectionstart" data-idl="field" data-title="selectionStart" data-dfn-for="EditContextInit" data-type="unsigned long" class="idlName" tabindex="0" aria-haspopup="dialog"><code>selectionStart</code></dfn>;</span><span data-idl="" class="idlMember" id="idl-def-editcontextinit-selectionend" data-title="selectionEnd" data-dfn-for="EditContextInit"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="dict-member" id="dom-editcontextinit-selectionend" data-idl="field" data-title="selectionEnd" data-dfn-for="EditContextInit" data-type="unsigned long" class="idlName" tabindex="0" aria-haspopup="dialog"><code>selectionEnd</code></dfn>;</span>
};</span><span data-idl="" class="idlInterface" id="idl-def-editcontext" data-title="EditContext">

[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=Window</span>]
interface <dfn data-export="" data-dfn-type="interface" id="dom-editcontext" data-idl="interface" data-title="EditContext" data-dfn-for="" class="idlID" tabindex="0" aria-haspopup="dialog"><code>EditContext</code></dfn> : <span class="idlSuperclass"><a data-link-type="interface" href="https://dom.spec.whatwg.org/#eventtarget">EventTarget</a></span> {<span data-idl="" class="idlConstructor" id="idl-def-editcontext-constructor-options" data-title="constructor" data-dfn-for="EditContext">
    <dfn data-export="" data-dfn-type="constructor" id="dom-editcontext-constructor" data-idl="constructor" data-title="constructor" data-dfn-for="EditContext" data-lt="constructor()|constructor(options)" data-local-lt="EditContext.constructor|EditContext.constructor()|constructor" tabindex="0" aria-haspopup="dialog"><code>constructor</code></dfn>(optional<span class="idlType"> <a data-link-type="idl" href="#dom-editcontextinit" class="internalDFN" id="ref-for-dom-editcontextinit-1"><code>EditContextInit</code></a></span> <span class="idlParamName">options</span> = {});</span><span data-idl="" class="idlMethod" id="idl-def-editcontext-updatetext-rangestart-rangeend-text" data-title="updateText" data-dfn-for="EditContext"><span class="idlType">

    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a></span> <dfn data-export="" data-dfn-type="method" id="dom-editcontext-updatetext" data-idl="operation" data-title="updateText" data-dfn-for="EditContext" data-type="undefined" data-lt="updateText()|updateText(rangeStart, rangeEnd, text)" data-local-lt="EditContext.updateText|EditContext.updateText()|updateText" class="idlName" tabindex="0" aria-haspopup="dialog"><code>updateText</code></dfn>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <span class="idlParamName">rangeStart</span>,<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <span class="idlParamName">rangeEnd</span>,<span class="idlType">
        <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">text</span>);</span><span data-idl="" class="idlMethod" id="idl-def-editcontext-updateselection-start-end" data-title="updateSelection" data-dfn-for="EditContext"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a></span> <dfn data-export="" data-dfn-type="method" id="dom-editcontext-updateselection" data-idl="operation" data-title="updateSelection" data-dfn-for="EditContext" data-type="undefined" data-lt="updateSelection()|updateSelection(start, end)" data-local-lt="EditContext.updateSelection|EditContext.updateSelection()|updateSelection" class="idlName" tabindex="0" aria-haspopup="dialog"><code>updateSelection</code></dfn>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <span class="idlParamName">start</span>,<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <span class="idlParamName">end</span>);</span><span data-idl="" class="idlMethod" id="idl-def-editcontext-updatecontrolbounds-controlbounds" data-title="updateControlBounds" data-dfn-for="EditContext"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a></span> <dfn data-export="" data-dfn-type="method" id="dom-editcontext-updatecontrolbounds" data-idl="operation" data-title="updateControlBounds" data-dfn-for="EditContext" data-type="undefined" data-lt="updateControlBounds()|updateControlBounds(controlBounds)" data-local-lt="EditContext.updateControlBounds|EditContext.updateControlBounds()|updateControlBounds" class="idlName" tabindex="0" aria-haspopup="dialog"><code>updateControlBounds</code></dfn>(<span class="idlType"><a data-link-type="interface" href="https://www.w3.org/TR/geometry-1/#domrect">DOMRect</a></span> <span class="idlParamName">controlBounds</span>);</span><span data-idl="" class="idlMethod" id="idl-def-editcontext-updateselectionbounds-selectionbounds" data-title="updateSelectionBounds" data-dfn-for="EditContext"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a></span> <dfn data-export="" data-dfn-type="method" id="dom-editcontext-updateselectionbounds" data-idl="operation" data-title="updateSelectionBounds" data-dfn-for="EditContext" data-type="undefined" data-lt="updateSelectionBounds()|updateSelectionBounds(selectionBounds)" data-local-lt="EditContext.updateSelectionBounds|EditContext.updateSelectionBounds()|updateSelectionBounds" class="idlName" tabindex="0" aria-haspopup="dialog"><code>updateSelectionBounds</code></dfn>(<span class="idlType"><a data-link-type="interface" href="https://www.w3.org/TR/geometry-1/#domrect">DOMRect</a></span> <span class="idlParamName">selectionBounds</span>);</span><span data-idl="" class="idlMethod" id="idl-def-editcontext-updatecharacterbounds-rangestart-characterbounds" data-title="updateCharacterBounds" data-dfn-for="EditContext"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a></span> <dfn data-export="" data-dfn-type="method" id="dom-editcontext-updatecharacterbounds" data-idl="operation" data-title="updateCharacterBounds" data-dfn-for="EditContext" data-type="undefined" data-lt="updateCharacterBounds()|updateCharacterBounds(rangeStart, characterBounds)" data-local-lt="EditContext.updateCharacterBounds|EditContext.updateCharacterBounds()|updateCharacterBounds" class="idlName" tabindex="0" aria-haspopup="dialog"><code>updateCharacterBounds</code></dfn>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <span class="idlParamName">rangeStart</span>,<span class="idlType"> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="interface" href="https://www.w3.org/TR/geometry-1/#domrect">DOMRect</a>&gt;</span> <span class="idlParamName">characterBounds</span>);</span><span data-idl="" class="idlMethod" id="idl-def-editcontext-attachedelements" data-title="attachedElements" data-dfn-for="EditContext"><span class="idlType">

    <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="interface" href="https://html.spec.whatwg.org/multipage/dom.html#htmlelement">HTMLElement</a>&gt;</span> <dfn data-export="" data-dfn-type="method" id="dom-editcontext-attachedelements" data-idl="operation" data-title="attachedElements" data-dfn-for="EditContext" data-type="sequence" data-lt="attachedElements()" data-local-lt="EditContext.attachedElements|EditContext.attachedElements()|attachedElements" class="idlName" tabindex="0" aria-haspopup="dialog"><code>attachedElements</code></dfn>();</span><span data-idl="" class="idlAttribute" id="idl-def-editcontext-text" data-title="text" data-dfn-for="EditContext">

    readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <dfn data-export="" data-dfn-type="attribute" id="dom-editcontext-text" data-idl="attribute" data-title="text" data-dfn-for="EditContext" data-type="DOMString" data-lt="text" data-local-lt="EditContext.text" class="idlName" tabindex="0" aria-haspopup="dialog"><code>text</code></dfn>;</span><span data-idl="" class="idlAttribute" id="idl-def-editcontext-selectionstart" data-title="selectionStart" data-dfn-for="EditContext">
    readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="attribute" id="dom-editcontext-selectionstart" data-idl="attribute" data-title="selectionStart" data-dfn-for="EditContext" data-type="unsigned long" data-lt="selectionStart" data-local-lt="EditContext.selectionStart" class="idlName" tabindex="0" aria-haspopup="dialog"><code>selectionStart</code></dfn>;</span><span data-idl="" class="idlAttribute" id="idl-def-editcontext-selectionend" data-title="selectionEnd" data-dfn-for="EditContext">
    readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="attribute" id="dom-editcontext-selectionend" data-idl="attribute" data-title="selectionEnd" data-dfn-for="EditContext" data-type="unsigned long" data-lt="selectionEnd" data-local-lt="EditContext.selectionEnd" class="idlName" tabindex="0" aria-haspopup="dialog"><code>selectionEnd</code></dfn>;</span><span data-idl="" class="idlAttribute" id="idl-def-editcontext-characterboundsrangestart" data-title="characterBoundsRangeStart" data-dfn-for="EditContext">
    readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="attribute" id="dom-editcontext-characterboundsrangestart" data-idl="attribute" data-title="characterBoundsRangeStart" data-dfn-for="EditContext" data-type="unsigned long" data-lt="characterBoundsRangeStart" data-local-lt="EditContext.characterBoundsRangeStart" class="idlName" tabindex="0" aria-haspopup="dialog"><code>characterBoundsRangeStart</code></dfn>;</span><span data-idl="" class="idlMethod" id="idl-def-editcontext-characterbounds" data-title="characterBounds" data-dfn-for="EditContext"><span class="idlType">
    <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="interface" href="https://www.w3.org/TR/geometry-1/#domrect">DOMRect</a>&gt;</span> <dfn data-export="" data-dfn-type="method" id="dom-editcontext-characterbounds" data-idl="operation" data-title="characterBounds" data-dfn-for="EditContext" data-type="sequence" data-lt="characterBounds()" data-local-lt="EditContext.characterBounds|EditContext.characterBounds()|characterBounds" class="idlName" tabindex="0" aria-haspopup="dialog"><code>characterBounds</code></dfn>();</span><span data-idl="" class="idlAttribute" id="idl-def-editcontext-ontextupdate" data-title="ontextupdate" data-dfn-for="EditContext">

    attribute<span class="idlType"> <a data-link-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span> <dfn data-export="" data-dfn-type="attribute" id="dom-editcontext-ontextupdate" data-idl="attribute" data-title="ontextupdate" data-dfn-for="EditContext" data-type="EventHandler" data-lt="ontextupdate" data-local-lt="EditContext.ontextupdate" class="idlName" tabindex="0" aria-haspopup="dialog"><code>ontextupdate</code></dfn>;</span><span data-idl="" class="idlAttribute" id="idl-def-editcontext-ontextformatupdate" data-title="ontextformatupdate" data-dfn-for="EditContext">
    attribute<span class="idlType"> <a data-link-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span> <dfn data-export="" data-dfn-type="attribute" id="dom-editcontext-ontextformatupdate" data-idl="attribute" data-title="ontextformatupdate" data-dfn-for="EditContext" data-type="EventHandler" data-lt="ontextformatupdate" data-local-lt="EditContext.ontextformatupdate" class="idlName" tabindex="0" aria-haspopup="dialog"><code>ontextformatupdate</code></dfn>;</span><span data-idl="" class="idlAttribute" id="idl-def-editcontext-oncharacterboundsupdate" data-title="oncharacterboundsupdate" data-dfn-for="EditContext">
    attribute<span class="idlType"> <a data-link-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span> <dfn data-export="" data-dfn-type="attribute" id="dom-editcontext-oncharacterboundsupdate" data-idl="attribute" data-title="oncharacterboundsupdate" data-dfn-for="EditContext" data-type="EventHandler" data-lt="oncharacterboundsupdate" data-local-lt="EditContext.oncharacterboundsupdate" class="idlName" tabindex="0" aria-haspopup="dialog"><code>oncharacterboundsupdate</code></dfn>;</span><span data-idl="" class="idlAttribute" id="idl-def-editcontext-oncompositionstart" data-title="oncompositionstart" data-dfn-for="EditContext">
    attribute<span class="idlType"> <a data-link-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span> <dfn data-export="" data-dfn-type="attribute" id="dom-editcontext-oncompositionstart" data-idl="attribute" data-title="oncompositionstart" data-dfn-for="EditContext" data-type="EventHandler" data-lt="oncompositionstart" data-local-lt="EditContext.oncompositionstart" class="idlName" tabindex="0" aria-haspopup="dialog"><code>oncompositionstart</code></dfn>;</span><span data-idl="" class="idlAttribute" id="idl-def-editcontext-oncompositionend" data-title="oncompositionend" data-dfn-for="EditContext">
    attribute<span class="idlType"> <a data-link-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span> <dfn data-export="" data-dfn-type="attribute" id="dom-editcontext-oncompositionend" data-idl="attribute" data-title="oncompositionend" data-dfn-for="EditContext" data-type="EventHandler" data-lt="oncompositionend" data-local-lt="EditContext.oncompositionend" class="idlName" tabindex="0" aria-haspopup="dialog"><code>oncompositionend</code></dfn>;</span>
};</span></code></pre>
            <dl>
                <dt>text</dt>
                <dd><a data-link-type="idl" href="#dom-editcontext-text" class="internalDFN"
                        id="ref-for-dom-editcontext-text-1"><code>text</code></a> getter 的步骤是返回 <a data-link-type="dfn"
                        href="https://webidl.spec.whatwg.org/#this">this</a> 的 <a data-link-type="dfn|abstract-op"
                        href="#dfn-text" class="internalDFN" id="ref-for-dfn-text-15">text</a>。</dd>

                <dt>selectionStart</dt>
                <dd><a data-link-type="idl" href="#dom-editcontext-selectionstart" class="internalDFN"
                        id="ref-for-dom-editcontext-selectionstart-1"><code>selectionStart</code></a> getter 的步骤是返回 <a
                        data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this">this</a> 的 <a
                        data-link-type="dfn|abstract-op" href="#dfn-selection-start" class="internalDFN"
                        id="ref-for-dfn-selection-start-5">selection start</a>。</dd>

                <dt>selectionEnd</dt>
                <dd><a data-link-type="idl" href="#dom-editcontext-selectionend" class="internalDFN"
                        id="ref-for-dom-editcontext-selectionend-1"><code>selectionEnd</code></a> getter 的步骤是返回 <a
                        data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this">this</a> 的 <a
                        data-link-type="dfn|abstract-op" href="#dfn-selection-end" class="internalDFN"
                        id="ref-for-dfn-selection-end-5">selection end</a>。</dd>

                <dt>characterBounds</dt>
                <dd><a data-link-type="idl" href="#dom-editcontext-characterbounds" class="internalDFN"
                        id="ref-for-dom-editcontext-characterbounds-1"><code>characterBounds</code></a> getter 的步骤是返回 <a
                        data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this">this</a> 的 <a
                        data-link-type="dfn|abstract-op" href="#dfn-codepoint-rects" class="internalDFN"
                        id="ref-for-dfn-codepoint-rects-4">codepoint rects</a>。</dd>

                <dt>characterBoundsRangeStart</dt>
                <dd><a data-link-type="idl" href="#dom-editcontext-characterboundsrangestart" class="internalDFN"
                        id="ref-for-dom-editcontext-characterboundsrangestart-1"><code>characterBoundsRangeStart</code></a>
                    getter 的步骤是返回 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this">this</a> 的 <a
                        data-link-type="dfn|abstract-op" href="#dfn-codepoint-rects-start-index" class="internalDFN"
                        id="ref-for-dfn-codepoint-rects-start-index-1">codepoint rects start index</a>。</dd>

                <dt>updateText() method</dt>
                <dd>
                    <p>
                        该方法必须遵循以下步骤：
                    </p>
                    <div class="algorithm">
                        <dl>
                            <dt>输入</dt>
                            <dd><var>rangeStart</var>，一个 unsigned long</dd>
                            <dd><var>rangeEnd</var>，一个 unsigned long</dd>
                            <dd><var>newText</var>，一个 DOMString</dd>
                            <dt>输出</dt>
                            <dd>无</dd>
                        </dl>
                        <ol>
                            <li>
                                将 <a data-link-type="dfn|abstract-op" href="#dfn-text" class="internalDFN"
                                    id="ref-for-dfn-text-16">text</a> 中
                                <var>rangeStart</var> 到 <var>rangeEnd</var> 范围内的子串替换为 <var>newText</var>
                                <div class="note" role="note" id="issue-container-generatedID-10">
                                    <div role="heading" class="note-title marker" id="h-note-10" aria-level="3">
                                        <span>Note</span>
                                    </div>
                                    <div class="">允许 <var>rangeStart</var> &gt; <var>rangeEnd</var>。
                                        位于这两个索引之间的子串应当以与 <var>rangeStart</var> &lt;= <var>rangeEnd</var> 时相同的方式被替换。
                                    </div>
                                </div>
                            </li>
                        </ol>
                    </div>
                </dd>
                <dt>updateSelection() method</dt>
                <dd>
                    <p>
                        该方法必须遵循以下步骤：
                    </p>
                    <div class="algorithm">
                        <dl>
                            <dt>输入</dt>
                            <dd><var>start</var>，一个 unsigned long</dd>
                            <dd><var>end</var>，一个 unsigned long</dd>
                            <dt>输出</dt>
                            <dd>无</dd>
                        </dl>
                        <ol>
                            <li>
                                将 <a data-link-type="dfn|abstract-op" href="#dfn-selection-start" class="internalDFN"
                                    id="ref-for-dfn-selection-start-6">selection start</a> 设为 <var>start</var>
                            </li>
                            <li>
                                将 <a data-link-type="dfn|abstract-op" href="#dfn-selection-end" class="internalDFN"
                                    id="ref-for-dfn-selection-end-6">selection end</a> 设为 <var>end</var>
                            </li>
                        </ol>
                    </div>
                </dd>
                <dt>updateSelectionBounds() method</dt>
                <dd>
                    <p>
                        该方法必须遵循以下步骤：
                    </p>
                    <div class="algorithm">
                        <dl>
                            <dt>输入</dt>
                            <dd><var>selectionBounds</var>，一个 <a data-link-type="interface" data-lt="DOMRect"
                                    href="https://www.w3.org/TR/geometry-1/#domrect"><code>DOMRect</code></a></dd>
                            <dt>输出</dt>
                            <dd>无</dd>
                        </dl>
                        <ol>
                            <li>
                                将 <a data-link-type="dfn|abstract-op" href="#dfn-selection-bounds" class="internalDFN"
                                    id="ref-for-dfn-selection-bounds-3">selection bounds</a> 设为
                                <var>selectionBounds</var>
                            </li>
                        </ol>
                    </div>
                </dd>
                <dt>updateControlBounds() method</dt>
                <dd>
                    <p>
                        该方法必须遵循以下步骤：
                    </p>
                    <div class="algorithm">
                        <dl>
                            <dt>输入</dt>
                            <dd><var>controlBounds</var>，一个 <a data-link-type="interface" data-lt="DOMRect"
                                    href="https://www.w3.org/TR/geometry-1/#domrect"><code>DOMRect</code></a></dd>
                            <dt>输出</dt>
                            <dd>无</dd>
                        </dl>
                        <ol>
                            <li>
                                将 <a data-link-type="dfn|abstract-op" href="#dfn-control-bounds" class="internalDFN"
                                    id="ref-for-dfn-control-bounds-3">control bounds</a> 设为 <var>controlBounds</var>
                            </li>
                        </ol>
                    </div>
                </dd>
                <dt>updateCharacterBounds() method</dt>
                <dd>
                    <p>
                        该方法必须遵循以下步骤：
                    </p>
                    <div class="algorithm">
                        <dl>
                            <dt>输入</dt>
                            <dd><var>rangeStart</var>，一个 unsigned long</dd>
                            <dd><var>characterBounds</var>，一个由 <a data-link-type="interface" data-lt="DOMRect"
                                    href="https://www.w3.org/TR/geometry-1/#domrect"><code>DOMRect</code></a> 组成的数组</dd>
                            <dt>输出</dt>
                            <dd>无</dd>
                        </dl>
                        <ol>
                            <li>
                                将 <a data-link-type="dfn|abstract-op" href="#dfn-codepoint-rects-start-index"
                                    class="internalDFN" id="ref-for-dfn-codepoint-rects-start-index-2">codepoint rects
                                    start index</a> 设为 <var>rangeStart</var>。
                            </li>
                            <li>
                                将 <a data-link-type="dfn|abstract-op" href="#dfn-codepoint-rects" class="internalDFN"
                                    id="ref-for-dfn-codepoint-rects-5">codepoint rects</a> 设为
                                <var>characterBounds</var>。
                            </li>
                        </ol>
                    </div>
                </dd>
                <dt>attachedElements() method</dt>
                <dd>
                    <p>该方法返回一个只有一项的列表，该项为该 <a data-link-type="idl" data-lt="EditContext" href="#dom-editcontext"
                            class="internalDFN" id="ref-for-dom-editcontext-35"><code>EditContext</code></a> 的 <a
                            href="#dfn-associated-element" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-associated-element-21">associated element</a>；如果该 <a data-link-type="idl"
                            data-lt="EditContext" href="#dom-editcontext" class="internalDFN"
                            id="ref-for-dom-editcontext-36"><code>EditContext</code></a> 的 <a
                            href="#dfn-associated-element" class="internalDFN" data-link-type="dfn"
                            id="ref-for-dfn-associated-element-22">associated element</a> 为 null，则返回空列表。</p>
                    <div class="note" role="note" id="issue-container-generatedID-11">
                        <div role="heading" class="note-title marker" id="h-note-11" aria-level="3"><span>Note</span>
                        </div>
                        <p class="">
                            该方法返回列表而非单个元素，是为了前向兼容：如果将来 <a data-link-type="idl" data-lt="EditContext"
                                href="#dom-editcontext" class="internalDFN"
                                id="ref-for-dom-editcontext-37"><code>EditContext</code></a> 被赋予拥有多个 <a
                                href="#dfn-associated-element" class="internalDFN" data-link-type="dfn"
                                id="ref-for-dfn-associated-element-23">associated elements</a> 的能力。
                        </p>
                    </div>
                </dd>

                <dt>ontextupdate</dt>
                <dd>
                    <p><a data-link-type="idl" data-lt="TextUpdateEvent" href="#dom-textupdateevent" class="internalDFN"
                            id="ref-for-dom-textupdateevent-4"><code>TextUpdateEvent</code></a> 的事件处理程序。</p>
                </dd>

                <dt>oncharacterboundsupdate</dt>
                <dd>
                    <p><a data-link-type="idl" data-lt="CharacterBoundsUpdateEvent"
                            href="#dom-characterboundsupdateevent" class="internalDFN"
                            id="ref-for-dom-characterboundsupdateevent-7"><code>CharacterBoundsUpdateEvent</code></a>
                        的事件处理程序。
                    </p>
                </dd>

                <dt>ontextformatupdate</dt>
                <dd>
                    <p><a data-link-type="idl" data-lt="TextFormatUpdateEvent" href="#dom-textformatupdateevent"
                            class="internalDFN"
                            id="ref-for-dom-textformatupdateevent-6"><code>TextFormatUpdateEvent</code></a> 的事件处理程序。</p>
                </dd>

                <dt>oncompositionstart</dt>
                <dd>
                    <p><a href="https://w3c.github.io/uievents/#event-type-compositionstart">compositionstart</a>
                        事件的事件处理程序。</p>
                </dd>

                <dt>oncompositionend</dt>
                <dd>
                    <p><a href="https://w3c.github.io/uievents/#event-type-compositionend">compositionend</a> 事件的事件处理程序。
                    </p>
                </dd>
            </dl>
        </section>
    </section>

    <section data-dfn-for="EditContextEvents" id="editcontext-events-0">
        <div class="header-wrapper">
            <h2 id="x4-editcontext-events"><bdi class="secno">4. </bdi>EditContext 事件</h2><a class="self-link"
                href="#editcontext-events-0" aria-label="第 4 节的永久链接。"></a>
        </div>

        <section id="textupdateevent">
            <div class="header-wrapper">
                <h3 id="x4-1-textupdateevent"><bdi class="secno">4.1 </bdi>TextUpdateEvent</h3><a class="self-link"
                    href="#textupdateevent" aria-label="第 4.1 节的永久链接"></a>
            </div>

            <pre class="idl def" id="webidl-1353943793"><span class="idlHeader"><a class="self-link" href="#webidl-1353943793">WebIDL</a></span><code><span data-idl="" class="idlDictionary" id="idl-def-textupdateeventinit" data-title="TextUpdateEventInit">dictionary <dfn data-export="" data-dfn-type="dictionary" id="dom-textupdateeventinit" data-idl="dictionary" data-title="TextUpdateEventInit" data-dfn-for="" class="idlID" tabindex="0" aria-haspopup="dialog"><code>TextUpdateEventInit</code></dfn> : <span class="idlSuperclass"><a data-link-type="dictionary" href="https://dom.spec.whatwg.org/#dictdef-eventinit">EventInit</a></span> {<span data-idl="" class="idlMember" id="idl-def-textupdateeventinit-updaterangestart" data-title="updateRangeStart" data-dfn-for="TextUpdateEventInit"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="dict-member" id="dom-textupdateeventinit-updaterangestart" data-idl="field" data-title="updateRangeStart" data-dfn-for="TextUpdateEventInit" data-type="unsigned long" class="idlName" tabindex="0" aria-haspopup="dialog"><code>updateRangeStart</code></dfn>;</span><span data-idl="" class="idlMember" id="idl-def-textupdateeventinit-updaterangeend" data-title="updateRangeEnd" data-dfn-for="TextUpdateEventInit"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="dict-member" id="dom-textupdateeventinit-updaterangeend" data-idl="field" data-title="updateRangeEnd" data-dfn-for="TextUpdateEventInit" data-type="unsigned long" class="idlName" tabindex="0" aria-haspopup="dialog"><code>updateRangeEnd</code></dfn>;</span><span data-idl="" class="idlMember" id="idl-def-textupdateeventinit-text" data-title="text" data-dfn-for="TextUpdateEventInit"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <dfn data-export="" data-dfn-type="dict-member" id="dom-textupdateeventinit-text" data-idl="field" data-title="text" data-dfn-for="TextUpdateEventInit" data-type="DOMString" class="idlName" tabindex="0" aria-haspopup="dialog"><code>text</code></dfn>;</span><span data-idl="" class="idlMember" id="idl-def-textupdateeventinit-selectionstart" data-title="selectionStart" data-dfn-for="TextUpdateEventInit"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="dict-member" id="dom-textupdateeventinit-selectionstart" data-idl="field" data-title="selectionStart" data-dfn-for="TextUpdateEventInit" data-type="unsigned long" class="idlName" tabindex="0" aria-haspopup="dialog"><code>selectionStart</code></dfn>;</span><span data-idl="" class="idlMember" id="idl-def-textupdateeventinit-selectionend" data-title="selectionEnd" data-dfn-for="TextUpdateEventInit"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="dict-member" id="dom-textupdateeventinit-selectionend" data-idl="field" data-title="selectionEnd" data-dfn-for="TextUpdateEventInit" data-type="unsigned long" class="idlName" tabindex="0" aria-haspopup="dialog"><code>selectionEnd</code></dfn>;</span><span data-idl="" class="idlMember" id="idl-def-textupdateeventinit-compositionstart" data-title="compositionStart" data-dfn-for="TextUpdateEventInit"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="dict-member" id="dom-textupdateeventinit-compositionstart" data-idl="field" data-title="compositionStart" data-dfn-for="TextUpdateEventInit" data-type="unsigned long" class="idlName" tabindex="0" aria-haspopup="dialog"><code>compositionStart</code></dfn>;</span><span data-idl="" class="idlMember" id="idl-def-textupdateeventinit-compositionend" data-title="compositionEnd" data-dfn-for="TextUpdateEventInit"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="dict-member" id="dom-textupdateeventinit-compositionend" data-idl="field" data-title="compositionEnd" data-dfn-for="TextUpdateEventInit" data-type="unsigned long" class="idlName" tabindex="0" aria-haspopup="dialog"><code>compositionEnd</code></dfn>;</span>
};</span><span data-idl="" class="idlInterface" id="idl-def-textupdateevent" data-title="TextUpdateEvent">

[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=Window</span>]
interface <dfn data-export="" data-dfn-type="interface" id="dom-textupdateevent" data-idl="interface" data-title="TextUpdateEvent" data-dfn-for="" class="idlID" tabindex="0" aria-haspopup="dialog"><code>TextUpdateEvent</code></dfn> : <span class="idlSuperclass"><a data-link-type="interface" href="https://dom.spec.whatwg.org/#event">Event</a></span> {<span data-idl="" class="idlConstructor" id="idl-def-textupdateevent-constructor-type-options" data-title="constructor" data-dfn-for="TextUpdateEvent">
    <dfn data-export="" data-dfn-type="constructor" id="dom-textupdateevent-constructor" data-idl="constructor" data-title="constructor" data-dfn-for="TextUpdateEvent" data-lt="constructor()|constructor(type)|constructor(type, options)" data-local-lt="TextUpdateEvent.constructor|TextUpdateEvent.constructor()|constructor" tabindex="0" aria-haspopup="dialog"><code>constructor</code></dfn>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">type</span>, optional<span class="idlType"> <a data-link-type="idl" href="#dom-textupdateeventinit" class="internalDFN" id="ref-for-dom-textupdateeventinit-1"><code>TextUpdateEventInit</code></a></span> <span class="idlParamName">options</span> = {});</span><span data-idl="" class="idlAttribute" id="idl-def-textupdateevent-updaterangestart" data-title="updateRangeStart" data-dfn-for="TextUpdateEvent">
    readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="attribute" id="dom-textupdateevent-updaterangestart" data-idl="attribute" data-title="updateRangeStart" data-dfn-for="TextUpdateEvent" data-type="unsigned long" data-lt="updateRangeStart" data-local-lt="TextUpdateEvent.updateRangeStart" class="idlName" tabindex="0" aria-haspopup="dialog"><code>updateRangeStart</code></dfn>;</span><span data-idl="" class="idlAttribute" id="idl-def-textupdateevent-updaterangeend" data-title="updateRangeEnd" data-dfn-for="TextUpdateEvent">
    readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="attribute" id="dom-textupdateevent-updaterangeend" data-idl="attribute" data-title="updateRangeEnd" data-dfn-for="TextUpdateEvent" data-type="unsigned long" data-lt="updateRangeEnd" data-local-lt="TextUpdateEvent.updateRangeEnd" class="idlName" tabindex="0" aria-haspopup="dialog"><code>updateRangeEnd</code></dfn>;</span><span data-idl="" class="idlAttribute" id="idl-def-textupdateevent-text" data-title="text" data-dfn-for="TextUpdateEvent">
    readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <dfn data-export="" data-dfn-type="attribute" id="dom-textupdateevent-text" data-idl="attribute" data-title="text" data-dfn-for="TextUpdateEvent" data-type="DOMString" data-lt="text" data-local-lt="TextUpdateEvent.text" class="idlName" tabindex="0" aria-haspopup="dialog"><code>text</code></dfn>;</span><span data-idl="" class="idlAttribute" id="idl-def-textupdateevent-selectionstart" data-title="selectionStart" data-dfn-for="TextUpdateEvent">
    readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="attribute" id="dom-textupdateevent-selectionstart" data-idl="attribute" data-title="selectionStart" data-dfn-for="TextUpdateEvent" data-type="unsigned long" data-lt="selectionStart" data-local-lt="TextUpdateEvent.selectionStart" class="idlName" tabindex="0" aria-haspopup="dialog"><code>selectionStart</code></dfn>;</span><span data-idl="" class="idlAttribute" id="idl-def-textupdateevent-selectionend" data-title="selectionEnd" data-dfn-for="TextUpdateEvent">
    readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="attribute" id="dom-textupdateevent-selectionend" data-idl="attribute" data-title="selectionEnd" data-dfn-for="TextUpdateEvent" data-type="unsigned long" data-lt="selectionEnd" data-local-lt="TextUpdateEvent.selectionEnd" class="idlName" tabindex="0" aria-haspopup="dialog"><code>selectionEnd</code></dfn>;</span>
};</span></code></pre>
            <dl>
                <dt><a data-link-type="idl" href="#dom-textupdateevent-updaterangestart" class="internalDFN"
                        id="ref-for-dom-textupdateevent-updaterangestart-1"><code>updateRangeStart</code></a>, of type
                    unsigned long, readonly</dt>
                <dd>要被替换的范围的起始位置。</dd>

                <dt><a data-link-type="idl" href="#dom-textupdateevent-updaterangeend" class="internalDFN"
                        id="ref-for-dom-textupdateevent-updaterangeend-1"><code>updateRangeEnd</code></a>, of type
                    unsigned long, readonly</dt>
                <dd>要被替换的范围的结束位置。</dd>

                <dt><a data-link-type="idl" href="#dom-textupdateevent-text" class="internalDFN"
                        id="ref-for-dom-textupdateevent-text-2"><code>text</code></a>, of type <a
                        data-link-type="interface" data-lt="DOMString"
                        href="https://webidl.spec.whatwg.org/#idl-DOMString"><code>DOMString</code></a>, readonly</dt>
                <dd>用于替换该范围内旧字符串的新字符串。</dd>

                <dt><a data-link-type="idl" href="#dom-textupdateevent-selectionstart" class="internalDFN"
                        id="ref-for-dom-textupdateevent-selectionstart-2"><code>selectionStart</code></a>, of type
                    unsigned long, readonly</dt>
                <dd>文本替换后选区的起始位置。</dd>

                <dt><a data-link-type="idl" href="#dom-textupdateevent-selectionend" class="internalDFN"
                        id="ref-for-dom-textupdateevent-selectionend-2"><code>selectionEnd</code></a>, of type unsigned
                    long, readonly</dt>
                <dd>文本替换后选区的结束位置。</dd>
            </dl>
        </section>
        <section id="textformatupdateevent">
            <div class="header-wrapper">
                <h3 id="x4-2-textformatupdateevent"><bdi class="secno">4.2 </bdi>TextFormatUpdateEvent</h3><a
                    class="self-link" href="#textformatupdateevent" aria-label="第 4.2 节的永久链接。"></a>
            </div>

            <pre class="idl def" id="webidl-1736300795"><span class="idlHeader"><a class="self-link" href="#webidl-1736300795">WebIDL</a></span><code><span data-idl="" class="idlEnum" id="idl-def-underlinestyle" data-title="UnderlineStyle">enum <dfn data-export="" data-dfn-type="enum" id="dom-underlinestyle" data-idl="enum" data-title="UnderlineStyle" data-dfn-for="" class="idlID" tabindex="0" aria-haspopup="dialog"><code>UnderlineStyle</code></dfn> { <span class="idlEnumItem">"<dfn data-export="" data-dfn-type="enum-value" id="dom-underlinestyle-none" data-idl="enum-value" data-title="none" data-dfn-for="UnderlineStyle" tabindex="0" aria-haspopup="dialog"><code>none</code></dfn>"</span>, <span class="idlEnumItem">"<dfn data-export="" data-dfn-type="enum-value" id="dom-underlinestyle-solid" data-idl="enum-value" data-title="solid" data-dfn-for="UnderlineStyle" tabindex="0" aria-haspopup="dialog"><code>solid</code></dfn>"</span>, <span class="idlEnumItem">"<dfn data-export="" data-dfn-type="enum-value" id="dom-underlinestyle-dotted" data-idl="enum-value" data-title="dotted" data-dfn-for="UnderlineStyle" tabindex="0" aria-haspopup="dialog"><code>dotted</code></dfn>"</span>, <span class="idlEnumItem">"<dfn data-export="" data-dfn-type="enum-value" id="dom-underlinestyle-dashed" data-idl="enum-value" data-title="dashed" data-dfn-for="UnderlineStyle" tabindex="0" aria-haspopup="dialog"><code>dashed</code></dfn>"</span>, <span class="idlEnumItem">"<dfn data-export="" data-dfn-type="enum-value" id="dom-underlinestyle-wavy" data-idl="enum-value" data-title="wavy" data-dfn-for="UnderlineStyle" tabindex="0" aria-haspopup="dialog"><code>wavy</code></dfn>"</span> };</span><span data-idl="" class="idlEnum" id="idl-def-underlinethickness" data-title="UnderlineThickness">
enum <dfn data-export="" data-dfn-type="enum" id="dom-underlinethickness" data-idl="enum" data-title="UnderlineThickness" data-dfn-for="" class="idlID" tabindex="0" aria-haspopup="dialog"><code>UnderlineThickness</code></dfn> { <span class="idlEnumItem">"<dfn data-export="" data-dfn-type="enum-value" id="dom-underlinethickness-none" data-idl="enum-value" data-title="none" data-dfn-for="UnderlineThickness" tabindex="0" aria-haspopup="dialog"><code>none</code></dfn>"</span>, <span class="idlEnumItem">"<dfn data-export="" data-dfn-type="enum-value" id="dom-underlinethickness-thin" data-idl="enum-value" data-title="thin" data-dfn-for="UnderlineThickness" tabindex="0" aria-haspopup="dialog"><code>thin</code></dfn>"</span>, <span class="idlEnumItem">"<dfn data-export="" data-dfn-type="enum-value" id="dom-underlinethickness-thick" data-idl="enum-value" data-title="thick" data-dfn-for="UnderlineThickness" tabindex="0" aria-haspopup="dialog"><code>thick</code></dfn>"</span> };</span><span data-idl="" class="idlDictionary" id="idl-def-textformatinit" data-title="TextFormatInit">

dictionary <dfn data-export="" data-dfn-type="dictionary" id="dom-textformatinit" data-idl="dictionary" data-title="TextFormatInit" data-dfn-for="" class="idlID" tabindex="0" aria-haspopup="dialog"><code>TextFormatInit</code></dfn> {<span data-idl="" class="idlMember" id="idl-def-textformatinit-rangestart" data-title="rangeStart" data-dfn-for="TextFormatInit"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="dict-member" id="dom-textformatinit-rangestart" data-idl="field" data-title="rangeStart" data-dfn-for="TextFormatInit" data-type="unsigned long" class="idlName" tabindex="0" aria-haspopup="dialog"><code>rangeStart</code></dfn>;</span><span data-idl="" class="idlMember" id="idl-def-textformatinit-rangeend" data-title="rangeEnd" data-dfn-for="TextFormatInit"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="dict-member" id="dom-textformatinit-rangeend" data-idl="field" data-title="rangeEnd" data-dfn-for="TextFormatInit" data-type="unsigned long" class="idlName" tabindex="0" aria-haspopup="dialog"><code>rangeEnd</code></dfn>;</span><span data-idl="" class="idlMember" id="idl-def-textformatinit-underlinestyle" data-title="underlineStyle" data-dfn-for="TextFormatInit"><span class="idlType">
    <a data-link-type="idl" href="#dom-underlinestyle" class="internalDFN" id="ref-for-dom-underlinestyle-3"><code>UnderlineStyle</code></a></span> <dfn data-export="" data-dfn-type="dict-member" id="dom-textformatinit-underlinestyle" data-idl="field" data-title="underlineStyle" data-dfn-for="TextFormatInit" data-type="UnderlineStyle" class="idlName" tabindex="0" aria-haspopup="dialog"><code>underlineStyle</code></dfn>;</span><span data-idl="" class="idlMember" id="idl-def-textformatinit-underlinethickness" data-title="underlineThickness" data-dfn-for="TextFormatInit"><span class="idlType">
    <a data-link-type="idl" href="#dom-underlinethickness" class="internalDFN" id="ref-for-dom-underlinethickness-3"><code>UnderlineThickness</code></a></span> <dfn data-export="" data-dfn-type="dict-member" id="dom-textformatinit-underlinethickness" data-idl="field" data-title="underlineThickness" data-dfn-for="TextFormatInit" data-type="UnderlineThickness" class="idlName" tabindex="0" aria-haspopup="dialog"><code>underlineThickness</code></dfn>;</span>
};</span><span data-idl="" class="idlInterface" id="idl-def-textformat" data-title="TextFormat">

[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=Window</span>]
interface <dfn data-export="" data-dfn-type="interface" id="dom-textformat" data-idl="interface" data-title="TextFormat" data-dfn-for="" class="idlID" tabindex="0" aria-haspopup="dialog"><code>TextFormat</code></dfn> {<span data-idl="" class="idlConstructor" id="idl-def-textformat-constructor-options" data-title="constructor" data-dfn-for="TextFormat">
    <dfn data-export="" data-dfn-type="constructor" id="dom-textformat-constructor" data-idl="constructor" data-title="constructor" data-dfn-for="TextFormat" data-lt="constructor()|constructor(options)" data-local-lt="TextFormat.constructor|TextFormat.constructor()|constructor" tabindex="0" aria-haspopup="dialog"><code>constructor</code></dfn>(optional<span class="idlType"> <a data-link-type="idl" href="#dom-textformatinit" class="internalDFN" id="ref-for-dom-textformatinit-1"><code>TextFormatInit</code></a></span> <span class="idlParamName">options</span> = {});</span><span data-idl="" class="idlAttribute" id="idl-def-textformat-rangestart" data-title="rangeStart" data-dfn-for="TextFormat">
    readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="attribute" id="dom-textformat-rangestart" data-idl="attribute" data-title="rangeStart" data-dfn-for="TextFormat" data-type="unsigned long" data-lt="rangeStart" data-local-lt="TextFormat.rangeStart" class="idlName" tabindex="0" aria-haspopup="dialog"><code>rangeStart</code></dfn>;</span><span data-idl="" class="idlAttribute" id="idl-def-textformat-rangeend" data-title="rangeEnd" data-dfn-for="TextFormat">
    readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="attribute" id="dom-textformat-rangeend" data-idl="attribute" data-title="rangeEnd" data-dfn-for="TextFormat" data-type="unsigned long" data-lt="rangeEnd" data-local-lt="TextFormat.rangeEnd" class="idlName" tabindex="0" aria-haspopup="dialog"><code>rangeEnd</code></dfn>;</span><span data-idl="" class="idlAttribute" id="idl-def-textformat-underlinestyle" data-title="underlineStyle" data-dfn-for="TextFormat">
    readonly attribute<span class="idlType"> <a data-link-type="idl" href="#dom-underlinestyle" class="internalDFN" id="ref-for-dom-underlinestyle-4"><code>UnderlineStyle</code></a></span> <dfn data-export="" data-dfn-type="attribute" id="dom-textformat-underlinestyle" data-idl="attribute" data-title="underlineStyle" data-dfn-for="TextFormat" data-type="UnderlineStyle" data-lt="underlineStyle" data-local-lt="TextFormat.underlineStyle" class="idlName" tabindex="0" aria-haspopup="dialog"><code>underlineStyle</code></dfn>;</span><span data-idl="" class="idlAttribute" id="idl-def-textformat-underlinethickness" data-title="underlineThickness" data-dfn-for="TextFormat">
    readonly attribute<span class="idlType"> <a data-link-type="idl" href="#dom-underlinethickness" class="internalDFN" id="ref-for-dom-underlinethickness-4"><code>UnderlineThickness</code></a></span> <dfn data-export="" data-dfn-type="attribute" id="dom-textformat-underlinethickness" data-idl="attribute" data-title="underlineThickness" data-dfn-for="TextFormat" data-type="UnderlineThickness" data-lt="underlineThickness" data-local-lt="TextFormat.underlineThickness" class="idlName" tabindex="0" aria-haspopup="dialog"><code>underlineThickness</code></dfn>;</span>
};</span><span data-idl="" class="idlDictionary" id="idl-def-textformatupdateeventinit" data-title="TextFormatUpdateEventInit">

dictionary <dfn data-export="" data-dfn-type="dictionary" id="dom-textformatupdateeventinit" data-idl="dictionary" data-title="TextFormatUpdateEventInit" data-dfn-for="" class="idlID" tabindex="0" aria-haspopup="dialog"><code>TextFormatUpdateEventInit</code></dfn> : <span class="idlSuperclass"><a data-link-type="dictionary" href="https://dom.spec.whatwg.org/#dictdef-eventinit">EventInit</a></span> {<span data-idl="" class="idlMember" id="idl-def-textformatupdateeventinit-textformats" data-title="textFormats" data-dfn-for="TextFormatUpdateEventInit"><span class="idlType">
    <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="idl" href="#dom-textformat" class="internalDFN" id="ref-for-dom-textformat-3"><code>TextFormat</code></a>&gt;</span> <dfn data-export="" data-dfn-type="dict-member" id="dom-textformatupdateeventinit-textformats" data-idl="field" data-title="textFormats" data-dfn-for="TextFormatUpdateEventInit" data-type="sequence" class="idlName" tabindex="0" aria-haspopup="dialog"><code>textFormats</code></dfn>;</span>
};</span><span data-idl="" class="idlInterface" id="idl-def-textformatupdateevent" data-title="TextFormatUpdateEvent">

[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=Window</span>]
interface <dfn data-export="" data-dfn-type="interface" id="dom-textformatupdateevent" data-idl="interface" data-title="TextFormatUpdateEvent" data-dfn-for="" class="idlID" tabindex="0" aria-haspopup="dialog"><code>TextFormatUpdateEvent</code></dfn> : <span class="idlSuperclass"><a data-link-type="interface" href="https://dom.spec.whatwg.org/#event">Event</a></span> {<span data-idl="" class="idlConstructor" id="idl-def-textformatupdateevent-constructor-type-options" data-title="constructor" data-dfn-for="TextFormatUpdateEvent">
    <dfn data-export="" data-dfn-type="constructor" id="dom-textformatupdateevent-constructor" data-idl="constructor" data-title="constructor" data-dfn-for="TextFormatUpdateEvent" data-lt="constructor()|constructor(type)|constructor(type, options)" data-local-lt="TextFormatUpdateEvent.constructor|TextFormatUpdateEvent.constructor()|constructor" tabindex="0" aria-haspopup="dialog"><code>constructor</code></dfn>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">type</span>, optional<span class="idlType"> <a data-link-type="idl" href="#dom-textformatupdateeventinit" class="internalDFN" id="ref-for-dom-textformatupdateeventinit-1"><code>TextFormatUpdateEventInit</code></a></span> <span class="idlParamName">options</span> = {});</span><span data-idl="" class="idlMethod" id="idl-def-textformatupdateevent-gettextformats" data-title="getTextFormats" data-dfn-for="TextFormatUpdateEvent"><span class="idlType">
    <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="idl" href="#dom-textformat" class="internalDFN" id="ref-for-dom-textformat-4"><code>TextFormat</code></a>&gt;</span> <dfn data-export="" data-dfn-type="method" id="dom-textformatupdateevent-gettextformats" data-idl="operation" data-title="getTextFormats" data-dfn-for="TextFormatUpdateEvent" data-type="sequence" data-lt="getTextFormats()" data-local-lt="TextFormatUpdateEvent.getTextFormats|TextFormatUpdateEvent.getTextFormats()|getTextFormats" class="idlName" tabindex="0" aria-haspopup="dialog"><code>getTextFormats</code></dfn>();</span>
};</span></code></pre>
            <dl>
                <dt><a data-link-type="idl" href="#dom-textformat-rangestart" class="internalDFN"
                        id="ref-for-dom-textformat-rangestart-2"><code>rangeStart</code></a>, of type unsigned long,
                    readonly</dt>
                <dd>表示应当被装饰的第一个码点之前位置的偏移量。</dd>
                <dt><a data-link-type="idl" href="#dom-textformat-rangeend" class="internalDFN"
                        id="ref-for-dom-textformat-rangeend-2"><code>rangeEnd</code></a>, of type unsigned long,
                    readonly</dt>
                <dd>表示应当被装饰的最后一个码点之后位置的偏移量。</dd>
                <dt><a data-link-type="idl" href="#dom-textformat-underlinestyle" class="internalDFN"
                        id="ref-for-dom-textformat-underlinestyle-2"><code>underlineStyle</code></a>, of type <a
                        data-link-type="idl" data-lt="UnderlineStyle" href="#dom-underlinestyle" class="internalDFN"
                        id="ref-for-dom-underlinestyle-5"><code>UnderlineStyle</code></a>, readonly</dt>
                <dd>被装饰文本范围的首选下划线样式。</dd>
                <dt><a data-link-type="idl" href="#dom-textformat-underlinethickness" class="internalDFN"
                        id="ref-for-dom-textformat-underlinethickness-2"><code>underlineThickness</code></a>, of type <a
                        data-link-type="idl" data-lt="UnderlineThickness" href="#dom-underlinethickness"
                        class="internalDFN" id="ref-for-dom-underlinethickness-5"><code>UnderlineThickness</code></a>,
                    readonly</dt>
                <dd>被装饰文本范围的首选下划线粗细。</dd>
                <dt><a data-link-type="idl" href="#dom-textformatupdateevent-gettextformats" class="internalDFN"
                        id="ref-for-dom-textformatupdateevent-gettextformats-1"><code>getTextFormats</code></a> method
                </dt>
                <dd>返回 <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this">this</a> 的 <a
                        data-link-type="dfn|abstract-op" href="#dfn-text-format-list" class="internalDFN"
                        id="ref-for-dfn-text-format-list-2">text format list</a>。</dd>
            </dl>
            <p><a data-link-type="idl" data-lt="TextFormatUpdateEvent" href="#dom-textformatupdateevent"
                    class="internalDFN" id="ref-for-dom-textformatupdateevent-7"><code>TextFormatUpdateEvent</code></a>
                具有一个关联的 <dfn id="dfn-text-format-list" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">text
                    format list</dfn>，它是一个包含零个或多个 <a data-link-type="dfn|abstract-op" href="#dfn-text-format"
                    class="internalDFN" id="ref-for-dfn-text-format-5">text format</a> 的列表。</p>
        </section>
        <section id="characterboundsupdateevent">
            <div class="header-wrapper">
                <h3 id="x4-3-characterboundsupdateevent"><bdi class="secno">4.3 </bdi>CharacterBoundsUpdateEvent</h3><a
                    class="self-link" href="#characterboundsupdateevent" aria-label="第 4.3 节的永久链接。"></a>
            </div>

            <pre class="idl def" id="webidl-1965075523"><span class="idlHeader"><a class="self-link" href="#webidl-1965075523">WebIDL</a></span><code><span data-idl="" class="idlDictionary" id="idl-def-characterboundsupdateeventinit" data-title="CharacterBoundsUpdateEventInit">dictionary <dfn data-export="" data-dfn-type="dictionary" id="dom-characterboundsupdateeventinit" data-idl="dictionary" data-title="CharacterBoundsUpdateEventInit" data-dfn-for="" class="idlID" tabindex="0" aria-haspopup="dialog"><code>CharacterBoundsUpdateEventInit</code></dfn> : <span class="idlSuperclass"><a data-link-type="dictionary" href="https://dom.spec.whatwg.org/#dictdef-eventinit">EventInit</a></span> {<span data-idl="" class="idlMember" id="idl-def-characterboundsupdateeventinit-rangestart" data-title="rangeStart" data-dfn-for="CharacterBoundsUpdateEventInit"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="dict-member" id="dom-characterboundsupdateeventinit-rangestart" data-idl="field" data-title="rangeStart" data-dfn-for="CharacterBoundsUpdateEventInit" data-type="unsigned long" class="idlName" tabindex="0" aria-haspopup="dialog"><code>rangeStart</code></dfn>;</span><span data-idl="" class="idlMember" id="idl-def-characterboundsupdateeventinit-rangeend" data-title="rangeEnd" data-dfn-for="CharacterBoundsUpdateEventInit"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="dict-member" id="dom-characterboundsupdateeventinit-rangeend" data-idl="field" data-title="rangeEnd" data-dfn-for="CharacterBoundsUpdateEventInit" data-type="unsigned long" class="idlName" tabindex="0" aria-haspopup="dialog"><code>rangeEnd</code></dfn>;</span>
};</span><span data-idl="" class="idlInterface" id="idl-def-characterboundsupdateevent" data-title="CharacterBoundsUpdateEvent">

[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=Window</span>]
interface <dfn data-export="" data-dfn-type="interface" id="dom-characterboundsupdateevent" data-idl="interface" data-title="CharacterBoundsUpdateEvent" data-dfn-for="" class="idlID" tabindex="0" aria-haspopup="dialog"><code>CharacterBoundsUpdateEvent</code></dfn> : <span class="idlSuperclass"><a data-link-type="interface" href="https://dom.spec.whatwg.org/#event">Event</a></span> {<span data-idl="" class="idlConstructor" id="idl-def-characterboundsupdateevent-constructor-type-options" data-title="constructor" data-dfn-for="CharacterBoundsUpdateEvent">
    <dfn data-export="" data-dfn-type="constructor" id="dom-characterboundsupdateevent-constructor" data-idl="constructor" data-title="constructor" data-dfn-for="CharacterBoundsUpdateEvent" data-lt="constructor()|constructor(type)|constructor(type, options)" data-local-lt="CharacterBoundsUpdateEvent.constructor|CharacterBoundsUpdateEvent.constructor()|constructor" tabindex="0" aria-haspopup="dialog"><code>constructor</code></dfn>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">type</span>, optional<span class="idlType"> <a data-link-type="idl" href="#dom-characterboundsupdateeventinit" class="internalDFN" id="ref-for-dom-characterboundsupdateeventinit-1"><code>CharacterBoundsUpdateEventInit</code></a></span> <span class="idlParamName">options</span> = {});</span><span data-idl="" class="idlAttribute" id="idl-def-characterboundsupdateevent-rangestart" data-title="rangeStart" data-dfn-for="CharacterBoundsUpdateEvent">
    readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="attribute" id="dom-characterboundsupdateevent-rangestart" data-idl="attribute" data-title="rangeStart" data-dfn-for="CharacterBoundsUpdateEvent" data-type="unsigned long" data-lt="rangeStart" data-local-lt="CharacterBoundsUpdateEvent.rangeStart" class="idlName" tabindex="0" aria-haspopup="dialog"><code>rangeStart</code></dfn>;</span><span data-idl="" class="idlAttribute" id="idl-def-characterboundsupdateevent-rangeend" data-title="rangeEnd" data-dfn-for="CharacterBoundsUpdateEvent">
    readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="attribute" id="dom-characterboundsupdateevent-rangeend" data-idl="attribute" data-title="rangeEnd" data-dfn-for="CharacterBoundsUpdateEvent" data-type="unsigned long" data-lt="rangeEnd" data-local-lt="CharacterBoundsUpdateEvent.rangeEnd" class="idlName" tabindex="0" aria-haspopup="dialog"><code>rangeEnd</code></dfn>;</span>
};</span></code></pre>
            <dl>
                <dt><a data-link-type="idl" href="#dom-characterboundsupdateevent-rangestart" class="internalDFN"
                        id="ref-for-dom-characterboundsupdateevent-rangestart-2"><code>rangeStart</code></a>, of type
                    unsigned long, readonly
                </dt>
                <dd><a data-link-type="dfn|abstract-op" href="#dfn-text-input-service" class="internalDFN"
                        id="ref-for-dfn-text-input-service-20">Text Input Service</a> 所需字符边界信息范围的起始位置
                </dd>
                <dt><a data-link-type="idl" href="#dom-characterboundsupdateevent-rangeend" class="internalDFN"
                        id="ref-for-dom-characterboundsupdateevent-rangeend-2"><code>rangeEnd</code></a>, of type
                    unsigned long, readonly
                </dt>
                <dd><a data-link-type="dfn|abstract-op" href="#dfn-text-input-service" class="internalDFN"
                        id="ref-for-dfn-text-input-service-21">Text Input Service</a> 所需字符边界信息范围的结束位置
                </dd>
            </dl>
        </section>
    </section>
    <section id="idl-index" class="appendix">
        <div class="header-wrapper">
            <h2 id="a-idl-index"><bdi class="secno">A. </bdi>IDL 索引</h2><a class="self-link" href="#idl-index"
                aria-label="附录 A 的永久链接。"></a>
        </div>

        <pre class="idl def" id="actual-idl-index"><span class="idlHeader"><a class="self-link" href="#actual-idl-index">WebIDL</a></span><code><span data-idl="" class="idlInterface" data-title="HTMLElement">partial interface <a data-idl="partial" data-link-type="interface" data-title="HTMLElement" class="idlID" data-dfn-for="HTMLElement" href="https://html.spec.whatwg.org/multipage/dom.html#htmlelement">HTMLElement</a> {<span data-idl="" class="idlAttribute" data-title="editContext" data-dfn-for="HTMLElement">
     attribute<span class="idlType"> <a data-link-type="idl" href="#dom-editcontext" class="internalDFN" id="ref-for-dom-editcontext-38"><code>EditContext</code></a>?</span> <dfn data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="editContext" data-dfn-for="HTMLElement" data-type="EditContext" data-lt="editContext" data-local-lt="HTMLElement.editContext" class="idlName"><code>editContext</code></dfn>;</span>
};</span>

<span data-idl="" class="idlDictionary" data-title="EditContextInit">dictionary <dfn data-export="" data-dfn-type="dictionary" data-idl="dictionary" data-title="EditContextInit" data-dfn-for="" class="idlID"><code>EditContextInit</code></dfn> {<span data-idl="" class="idlMember" data-title="text" data-dfn-for="EditContextInit"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <dfn data-export="" data-dfn-type="dict-member" data-idl="field" data-title="text" data-dfn-for="EditContextInit" data-type="DOMString" class="idlName"><code>text</code></dfn>;</span><span data-idl="" class="idlMember" data-title="selectionStart" data-dfn-for="EditContextInit"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="dict-member" data-idl="field" data-title="selectionStart" data-dfn-for="EditContextInit" data-type="unsigned long" class="idlName"><code>selectionStart</code></dfn>;</span><span data-idl="" class="idlMember" data-title="selectionEnd" data-dfn-for="EditContextInit"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="dict-member" data-idl="field" data-title="selectionEnd" data-dfn-for="EditContextInit" data-type="unsigned long" class="idlName"><code>selectionEnd</code></dfn>;</span>
};</span><span data-idl="" class="idlInterface" data-title="EditContext">

[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=Window</span>]
interface <dfn data-export="" data-dfn-type="interface" data-idl="interface" data-title="EditContext" data-dfn-for="" class="idlID"><code>EditContext</code></dfn> : <span class="idlSuperclass"><a data-link-type="interface" href="https://dom.spec.whatwg.org/#eventtarget">EventTarget</a></span> {<span data-idl="" class="idlConstructor" data-title="constructor" data-dfn-for="EditContext">
    <dfn data-export="" data-dfn-type="constructor" data-idl="constructor" data-title="constructor" data-dfn-for="EditContext" data-lt="constructor()|constructor(options)" data-local-lt="EditContext.constructor|EditContext.constructor()|constructor"><code>constructor</code></dfn>(optional<span class="idlType"> <a data-link-type="idl" href="#dom-editcontextinit" class="internalDFN" id="ref-for-dom-editcontextinit-2"><code>EditContextInit</code></a></span> <span class="idlParamName">options</span> = {});</span><span data-idl="" class="idlMethod" data-title="updateText" data-dfn-for="EditContext"><span class="idlType">

    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a></span> <dfn data-export="" data-dfn-type="method" data-idl="operation" data-title="updateText" data-dfn-for="EditContext" data-type="undefined" data-lt="updateText()|updateText(rangeStart, rangeEnd, text)" data-local-lt="EditContext.updateText|EditContext.updateText()|updateText" class="idlName"><code>updateText</code></dfn>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <span class="idlParamName">rangeStart</span>,<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <span class="idlParamName">rangeEnd</span>,<span class="idlType">
        <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">text</span>);</span><span data-idl="" class="idlMethod" data-title="updateSelection" data-dfn-for="EditContext"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a></span> <dfn data-export="" data-dfn-type="method" data-idl="operation" data-title="updateSelection" data-dfn-for="EditContext" data-type="undefined" data-lt="updateSelection()|updateSelection(start, end)" data-local-lt="EditContext.updateSelection|EditContext.updateSelection()|updateSelection" class="idlName"><code>updateSelection</code></dfn>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <span class="idlParamName">start</span>,<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <span class="idlParamName">end</span>);</span><span data-idl="" class="idlMethod" data-title="updateControlBounds" data-dfn-for="EditContext"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a></span> <dfn data-export="" data-dfn-type="method" data-idl="operation" data-title="updateControlBounds" data-dfn-for="EditContext" data-type="undefined" data-lt="updateControlBounds()|updateControlBounds(controlBounds)" data-local-lt="EditContext.updateControlBounds|EditContext.updateControlBounds()|updateControlBounds" class="idlName"><code>updateControlBounds</code></dfn>(<span class="idlType"><a data-link-type="interface" href="https://www.w3.org/TR/geometry-1/#domrect">DOMRect</a></span> <span class="idlParamName">controlBounds</span>);</span><span data-idl="" class="idlMethod" data-title="updateSelectionBounds" data-dfn-for="EditContext"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a></span> <dfn data-export="" data-dfn-type="method" data-idl="operation" data-title="updateSelectionBounds" data-dfn-for="EditContext" data-type="undefined" data-lt="updateSelectionBounds()|updateSelectionBounds(selectionBounds)" data-local-lt="EditContext.updateSelectionBounds|EditContext.updateSelectionBounds()|updateSelectionBounds" class="idlName"><code>updateSelectionBounds</code></dfn>(<span class="idlType"><a data-link-type="interface" href="https://www.w3.org/TR/geometry-1/#domrect">DOMRect</a></span> <span class="idlParamName">selectionBounds</span>);</span><span data-idl="" class="idlMethod" data-title="updateCharacterBounds" data-dfn-for="EditContext"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a></span> <dfn data-export="" data-dfn-type="method" data-idl="operation" data-title="updateCharacterBounds" data-dfn-for="EditContext" data-type="undefined" data-lt="updateCharacterBounds()|updateCharacterBounds(rangeStart, characterBounds)" data-local-lt="EditContext.updateCharacterBounds|EditContext.updateCharacterBounds()|updateCharacterBounds" class="idlName"><code>updateCharacterBounds</code></dfn>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <span class="idlParamName">rangeStart</span>,<span class="idlType"> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="interface" href="https://www.w3.org/TR/geometry-1/#domrect">DOMRect</a>&gt;</span> <span class="idlParamName">characterBounds</span>);</span><span data-idl="" class="idlMethod" data-title="attachedElements" data-dfn-for="EditContext"><span class="idlType">

    <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="interface" href="https://html.spec.whatwg.org/multipage/dom.html#htmlelement">HTMLElement</a>&gt;</span> <dfn data-export="" data-dfn-type="method" data-idl="operation" data-title="attachedElements" data-dfn-for="EditContext" data-type="sequence" data-lt="attachedElements()" data-local-lt="EditContext.attachedElements|EditContext.attachedElements()|attachedElements" class="idlName"><code>attachedElements</code></dfn>();</span><span data-idl="" class="idlAttribute" data-title="text" data-dfn-for="EditContext">

    readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <dfn data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="text" data-dfn-for="EditContext" data-type="DOMString" data-lt="text" data-local-lt="EditContext.text" class="idlName"><code>text</code></dfn>;</span><span data-idl="" class="idlAttribute" data-title="selectionStart" data-dfn-for="EditContext">
    readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="selectionStart" data-dfn-for="EditContext" data-type="unsigned long" data-lt="selectionStart" data-local-lt="EditContext.selectionStart" class="idlName"><code>selectionStart</code></dfn>;</span><span data-idl="" class="idlAttribute" data-title="selectionEnd" data-dfn-for="EditContext">
    readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="selectionEnd" data-dfn-for="EditContext" data-type="unsigned long" data-lt="selectionEnd" data-local-lt="EditContext.selectionEnd" class="idlName"><code>selectionEnd</code></dfn>;</span><span data-idl="" class="idlAttribute" data-title="characterBoundsRangeStart" data-dfn-for="EditContext">
    readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="characterBoundsRangeStart" data-dfn-for="EditContext" data-type="unsigned long" data-lt="characterBoundsRangeStart" data-local-lt="EditContext.characterBoundsRangeStart" class="idlName"><code>characterBoundsRangeStart</code></dfn>;</span><span data-idl="" class="idlMethod" data-title="characterBounds" data-dfn-for="EditContext"><span class="idlType">
    <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="interface" href="https://www.w3.org/TR/geometry-1/#domrect">DOMRect</a>&gt;</span> <dfn data-export="" data-dfn-type="method" data-idl="operation" data-title="characterBounds" data-dfn-for="EditContext" data-type="sequence" data-lt="characterBounds()" data-local-lt="EditContext.characterBounds|EditContext.characterBounds()|characterBounds" class="idlName"><code>characterBounds</code></dfn>();</span><span data-idl="" class="idlAttribute" data-title="ontextupdate" data-dfn-for="EditContext">

    attribute<span class="idlType"> <a data-link-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span> <dfn data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="ontextupdate" data-dfn-for="EditContext" data-type="EventHandler" data-lt="ontextupdate" data-local-lt="EditContext.ontextupdate" class="idlName"><code>ontextupdate</code></dfn>;</span><span data-idl="" class="idlAttribute" data-title="ontextformatupdate" data-dfn-for="EditContext">
    attribute<span class="idlType"> <a data-link-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span> <dfn data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="ontextformatupdate" data-dfn-for="EditContext" data-type="EventHandler" data-lt="ontextformatupdate" data-local-lt="EditContext.ontextformatupdate" class="idlName"><code>ontextformatupdate</code></dfn>;</span><span data-idl="" class="idlAttribute" data-title="oncharacterboundsupdate" data-dfn-for="EditContext">
    attribute<span class="idlType"> <a data-link-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span> <dfn data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="oncharacterboundsupdate" data-dfn-for="EditContext" data-type="EventHandler" data-lt="oncharacterboundsupdate" data-local-lt="EditContext.oncharacterboundsupdate" class="idlName"><code>oncharacterboundsupdate</code></dfn>;</span><span data-idl="" class="idlAttribute" data-title="oncompositionstart" data-dfn-for="EditContext">
    attribute<span class="idlType"> <a data-link-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span> <dfn data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="oncompositionstart" data-dfn-for="EditContext" data-type="EventHandler" data-lt="oncompositionstart" data-local-lt="EditContext.oncompositionstart" class="idlName"><code>oncompositionstart</code></dfn>;</span><span data-idl="" class="idlAttribute" data-title="oncompositionend" data-dfn-for="EditContext">
    attribute<span class="idlType"> <a data-link-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span> <dfn data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="oncompositionend" data-dfn-for="EditContext" data-type="EventHandler" data-lt="oncompositionend" data-local-lt="EditContext.oncompositionend" class="idlName"><code>oncompositionend</code></dfn>;</span>
};</span>

<span data-idl="" class="idlDictionary" data-title="TextUpdateEventInit">dictionary <dfn data-export="" data-dfn-type="dictionary" data-idl="dictionary" data-title="TextUpdateEventInit" data-dfn-for="" class="idlID"><code>TextUpdateEventInit</code></dfn> : <span class="idlSuperclass"><a data-link-type="dictionary" href="https://dom.spec.whatwg.org/#dictdef-eventinit">EventInit</a></span> {<span data-idl="" class="idlMember" data-title="updateRangeStart" data-dfn-for="TextUpdateEventInit"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="dict-member" data-idl="field" data-title="updateRangeStart" data-dfn-for="TextUpdateEventInit" data-type="unsigned long" class="idlName"><code>updateRangeStart</code></dfn>;</span><span data-idl="" class="idlMember" data-title="updateRangeEnd" data-dfn-for="TextUpdateEventInit"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="dict-member" data-idl="field" data-title="updateRangeEnd" data-dfn-for="TextUpdateEventInit" data-type="unsigned long" class="idlName"><code>updateRangeEnd</code></dfn>;</span><span data-idl="" class="idlMember" data-title="text" data-dfn-for="TextUpdateEventInit"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <dfn data-export="" data-dfn-type="dict-member" data-idl="field" data-title="text" data-dfn-for="TextUpdateEventInit" data-type="DOMString" class="idlName"><code>text</code></dfn>;</span><span data-idl="" class="idlMember" data-title="selectionStart" data-dfn-for="TextUpdateEventInit"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="dict-member" data-idl="field" data-title="selectionStart" data-dfn-for="TextUpdateEventInit" data-type="unsigned long" class="idlName"><code>selectionStart</code></dfn>;</span><span data-idl="" class="idlMember" data-title="selectionEnd" data-dfn-for="TextUpdateEventInit"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="dict-member" data-idl="field" data-title="selectionEnd" data-dfn-for="TextUpdateEventInit" data-type="unsigned long" class="idlName"><code>selectionEnd</code></dfn>;</span><span data-idl="" class="idlMember" data-title="compositionStart" data-dfn-for="TextUpdateEventInit"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="dict-member" data-idl="field" data-title="compositionStart" data-dfn-for="TextUpdateEventInit" data-type="unsigned long" class="idlName"><code>compositionStart</code></dfn>;</span><span data-idl="" class="idlMember" data-title="compositionEnd" data-dfn-for="TextUpdateEventInit"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="dict-member" data-idl="field" data-title="compositionEnd" data-dfn-for="TextUpdateEventInit" data-type="unsigned long" class="idlName"><code>compositionEnd</code></dfn>;</span>
};</span><span data-idl="" class="idlInterface" data-title="TextUpdateEvent">

[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=Window</span>]
interface <dfn data-export="" data-dfn-type="interface" data-idl="interface" data-title="TextUpdateEvent" data-dfn-for="" class="idlID"><code>TextUpdateEvent</code></dfn> : <span class="idlSuperclass"><a data-link-type="interface" href="https://dom.spec.whatwg.org/#event">Event</a></span> {<span data-idl="" class="idlConstructor" data-title="constructor" data-dfn-for="TextUpdateEvent">
    <dfn data-export="" data-dfn-type="constructor" data-idl="constructor" data-title="constructor" data-dfn-for="TextUpdateEvent" data-lt="constructor()|constructor(type)|constructor(type, options)" data-local-lt="TextUpdateEvent.constructor|TextUpdateEvent.constructor()|constructor"><code>constructor</code></dfn>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">type</span>, optional<span class="idlType"> <a data-link-type="idl" href="#dom-textupdateeventinit" class="internalDFN" id="ref-for-dom-textupdateeventinit-2"><code>TextUpdateEventInit</code></a></span> <span class="idlParamName">options</span> = {});</span><span data-idl="" class="idlAttribute" data-title="updateRangeStart" data-dfn-for="TextUpdateEvent">
    readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="updateRangeStart" data-dfn-for="TextUpdateEvent" data-type="unsigned long" data-lt="updateRangeStart" data-local-lt="TextUpdateEvent.updateRangeStart" class="idlName"><code>updateRangeStart</code></dfn>;</span><span data-idl="" class="idlAttribute" data-title="updateRangeEnd" data-dfn-for="TextUpdateEvent">
    readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="updateRangeEnd" data-dfn-for="TextUpdateEvent" data-type="unsigned long" data-lt="updateRangeEnd" data-local-lt="TextUpdateEvent.updateRangeEnd" class="idlName"><code>updateRangeEnd</code></dfn>;</span><span data-idl="" class="idlAttribute" data-title="text" data-dfn-for="TextUpdateEvent">
    readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <dfn data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="text" data-dfn-for="TextUpdateEvent" data-type="DOMString" data-lt="text" data-local-lt="TextUpdateEvent.text" class="idlName"><code>text</code></dfn>;</span><span data-idl="" class="idlAttribute" data-title="selectionStart" data-dfn-for="TextUpdateEvent">
    readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="selectionStart" data-dfn-for="TextUpdateEvent" data-type="unsigned long" data-lt="selectionStart" data-local-lt="TextUpdateEvent.selectionStart" class="idlName"><code>selectionStart</code></dfn>;</span><span data-idl="" class="idlAttribute" data-title="selectionEnd" data-dfn-for="TextUpdateEvent">
    readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="selectionEnd" data-dfn-for="TextUpdateEvent" data-type="unsigned long" data-lt="selectionEnd" data-local-lt="TextUpdateEvent.selectionEnd" class="idlName"><code>selectionEnd</code></dfn>;</span>
};</span>

<span data-idl="" class="idlEnum" data-title="UnderlineStyle">enum <dfn data-export="" data-dfn-type="enum" data-idl="enum" data-title="UnderlineStyle" data-dfn-for="" class="idlID"><code>UnderlineStyle</code></dfn> { <span class="idlEnumItem">"<dfn data-export="" data-dfn-type="enum-value" data-idl="enum-value" data-title="none" data-dfn-for="UnderlineStyle"><code>none</code></dfn>"</span>, <span class="idlEnumItem">"<dfn data-export="" data-dfn-type="enum-value" data-idl="enum-value" data-title="solid" data-dfn-for="UnderlineStyle"><code>solid</code></dfn>"</span>, <span class="idlEnumItem">"<dfn data-export="" data-dfn-type="enum-value" data-idl="enum-value" data-title="dotted" data-dfn-for="UnderlineStyle"><code>dotted</code></dfn>"</span>, <span class="idlEnumItem">"<dfn data-export="" data-dfn-type="enum-value" data-idl="enum-value" data-title="dashed" data-dfn-for="UnderlineStyle"><code>dashed</code></dfn>"</span>, <span class="idlEnumItem">"<dfn data-export="" data-dfn-type="enum-value" data-idl="enum-value" data-title="wavy" data-dfn-for="UnderlineStyle"><code>wavy</code></dfn>"</span> };</span><span data-idl="" class="idlEnum" data-title="UnderlineThickness">
enum <dfn data-export="" data-dfn-type="enum" data-idl="enum" data-title="UnderlineThickness" data-dfn-for="" class="idlID"><code>UnderlineThickness</code></dfn> { <span class="idlEnumItem">"<dfn data-export="" data-dfn-type="enum-value" data-idl="enum-value" data-title="none" data-dfn-for="UnderlineThickness"><code>none</code></dfn>"</span>, <span class="idlEnumItem">"<dfn data-export="" data-dfn-type="enum-value" data-idl="enum-value" data-title="thin" data-dfn-for="UnderlineThickness"><code>thin</code></dfn>"</span>, <span class="idlEnumItem">"<dfn data-export="" data-dfn-type="enum-value" data-idl="enum-value" data-title="thick" data-dfn-for="UnderlineThickness"><code>thick</code></dfn>"</span> };</span><span data-idl="" class="idlDictionary" data-title="TextFormatInit">

dictionary <dfn data-export="" data-dfn-type="dictionary" data-idl="dictionary" data-title="TextFormatInit" data-dfn-for="" class="idlID"><code>TextFormatInit</code></dfn> {<span data-idl="" class="idlMember" data-title="rangeStart" data-dfn-for="TextFormatInit"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="dict-member" data-idl="field" data-title="rangeStart" data-dfn-for="TextFormatInit" data-type="unsigned long" class="idlName"><code>rangeStart</code></dfn>;</span><span data-idl="" class="idlMember" data-title="rangeEnd" data-dfn-for="TextFormatInit"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="dict-member" data-idl="field" data-title="rangeEnd" data-dfn-for="TextFormatInit" data-type="unsigned long" class="idlName"><code>rangeEnd</code></dfn>;</span><span data-idl="" class="idlMember" data-title="underlineStyle" data-dfn-for="TextFormatInit"><span class="idlType">
    <a data-link-type="idl" href="#dom-underlinestyle" class="internalDFN" id="ref-for-dom-underlinestyle-6"><code>UnderlineStyle</code></a></span> <dfn data-export="" data-dfn-type="dict-member" data-idl="field" data-title="underlineStyle" data-dfn-for="TextFormatInit" data-type="UnderlineStyle" class="idlName"><code>underlineStyle</code></dfn>;</span><span data-idl="" class="idlMember" data-title="underlineThickness" data-dfn-for="TextFormatInit"><span class="idlType">
    <a data-link-type="idl" href="#dom-underlinethickness" class="internalDFN" id="ref-for-dom-underlinethickness-6"><code>UnderlineThickness</code></a></span> <dfn data-export="" data-dfn-type="dict-member" data-idl="field" data-title="underlineThickness" data-dfn-for="TextFormatInit" data-type="UnderlineThickness" class="idlName"><code>underlineThickness</code></dfn>;</span>
};</span><span data-idl="" class="idlInterface" data-title="TextFormat">

[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=Window</span>]
interface <dfn data-export="" data-dfn-type="interface" data-idl="interface" data-title="TextFormat" data-dfn-for="" class="idlID"><code>TextFormat</code></dfn> {<span data-idl="" class="idlConstructor" data-title="constructor" data-dfn-for="TextFormat">
    <dfn data-export="" data-dfn-type="constructor" data-idl="constructor" data-title="constructor" data-dfn-for="TextFormat" data-lt="constructor()|constructor(options)" data-local-lt="TextFormat.constructor|TextFormat.constructor()|constructor"><code>constructor</code></dfn>(optional<span class="idlType"> <a data-link-type="idl" href="#dom-textformatinit" class="internalDFN" id="ref-for-dom-textformatinit-2"><code>TextFormatInit</code></a></span> <span class="idlParamName">options</span> = {});</span><span data-idl="" class="idlAttribute" data-title="rangeStart" data-dfn-for="TextFormat">
    readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="rangeStart" data-dfn-for="TextFormat" data-type="unsigned long" data-lt="rangeStart" data-local-lt="TextFormat.rangeStart" class="idlName"><code>rangeStart</code></dfn>;</span><span data-idl="" class="idlAttribute" data-title="rangeEnd" data-dfn-for="TextFormat">
    readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="rangeEnd" data-dfn-for="TextFormat" data-type="unsigned long" data-lt="rangeEnd" data-local-lt="TextFormat.rangeEnd" class="idlName"><code>rangeEnd</code></dfn>;</span><span data-idl="" class="idlAttribute" data-title="underlineStyle" data-dfn-for="TextFormat">
    readonly attribute<span class="idlType"> <a data-link-type="idl" href="#dom-underlinestyle" class="internalDFN" id="ref-for-dom-underlinestyle-7"><code>UnderlineStyle</code></a></span> <dfn data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="underlineStyle" data-dfn-for="TextFormat" data-type="UnderlineStyle" data-lt="underlineStyle" data-local-lt="TextFormat.underlineStyle" class="idlName"><code>underlineStyle</code></dfn>;</span><span data-idl="" class="idlAttribute" data-title="underlineThickness" data-dfn-for="TextFormat">
    readonly attribute<span class="idlType"> <a data-link-type="idl" href="#dom-underlinethickness" class="internalDFN" id="ref-for-dom-underlinethickness-7"><code>UnderlineThickness</code></a></span> <dfn data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="underlineThickness" data-dfn-for="TextFormat" data-type="UnderlineThickness" data-lt="underlineThickness" data-local-lt="TextFormat.underlineThickness" class="idlName"><code>underlineThickness</code></dfn>;</span>
};</span><span data-idl="" class="idlDictionary" data-title="TextFormatUpdateEventInit">

dictionary <dfn data-export="" data-dfn-type="dictionary" data-idl="dictionary" data-title="TextFormatUpdateEventInit" data-dfn-for="" class="idlID"><code>TextFormatUpdateEventInit</code></dfn> : <span class="idlSuperclass"><a data-link-type="dictionary" href="https://dom.spec.whatwg.org/#dictdef-eventinit">EventInit</a></span> {<span data-idl="" class="idlMember" data-title="textFormats" data-dfn-for="TextFormatUpdateEventInit"><span class="idlType">
    <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="idl" href="#dom-textformat" class="internalDFN" id="ref-for-dom-textformat-5"><code>TextFormat</code></a>&gt;</span> <dfn data-export="" data-dfn-type="dict-member" data-idl="field" data-title="textFormats" data-dfn-for="TextFormatUpdateEventInit" data-type="sequence" class="idlName"><code>textFormats</code></dfn>;</span>
};</span><span data-idl="" class="idlInterface" data-title="TextFormatUpdateEvent">

[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=Window</span>]
interface <dfn data-export="" data-dfn-type="interface" data-idl="interface" data-title="TextFormatUpdateEvent" data-dfn-for="" class="idlID"><code>TextFormatUpdateEvent</code></dfn> : <span class="idlSuperclass"><a data-link-type="interface" href="https://dom.spec.whatwg.org/#event">Event</a></span> {<span data-idl="" class="idlConstructor" data-title="constructor" data-dfn-for="TextFormatUpdateEvent">
    <dfn data-export="" data-dfn-type="constructor" data-idl="constructor" data-title="constructor" data-dfn-for="TextFormatUpdateEvent" data-lt="constructor()|constructor(type)|constructor(type, options)" data-local-lt="TextFormatUpdateEvent.constructor|TextFormatUpdateEvent.constructor()|constructor"><code>constructor</code></dfn>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">type</span>, optional<span class="idlType"> <a data-link-type="idl" href="#dom-textformatupdateeventinit" class="internalDFN" id="ref-for-dom-textformatupdateeventinit-2"><code>TextFormatUpdateEventInit</code></a></span> <span class="idlParamName">options</span> = {});</span><span data-idl="" class="idlMethod" data-title="getTextFormats" data-dfn-for="TextFormatUpdateEvent"><span class="idlType">
    <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="idl" href="#dom-textformat" class="internalDFN" id="ref-for-dom-textformat-6"><code>TextFormat</code></a>&gt;</span> <dfn data-export="" data-dfn-type="method" data-idl="operation" data-title="getTextFormats" data-dfn-for="TextFormatUpdateEvent" data-type="sequence" data-lt="getTextFormats()" data-local-lt="TextFormatUpdateEvent.getTextFormats|TextFormatUpdateEvent.getTextFormats()|getTextFormats" class="idlName"><code>getTextFormats</code></dfn>();</span>
};</span>

<span data-idl="" class="idlDictionary" data-title="CharacterBoundsUpdateEventInit">dictionary <dfn data-export="" data-dfn-type="dictionary" data-idl="dictionary" data-title="CharacterBoundsUpdateEventInit" data-dfn-for="" class="idlID"><code>CharacterBoundsUpdateEventInit</code></dfn> : <span class="idlSuperclass"><a data-link-type="dictionary" href="https://dom.spec.whatwg.org/#dictdef-eventinit">EventInit</a></span> {<span data-idl="" class="idlMember" data-title="rangeStart" data-dfn-for="CharacterBoundsUpdateEventInit"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="dict-member" data-idl="field" data-title="rangeStart" data-dfn-for="CharacterBoundsUpdateEventInit" data-type="unsigned long" class="idlName"><code>rangeStart</code></dfn>;</span><span data-idl="" class="idlMember" data-title="rangeEnd" data-dfn-for="CharacterBoundsUpdateEventInit"><span class="idlType">
    <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="dict-member" data-idl="field" data-title="rangeEnd" data-dfn-for="CharacterBoundsUpdateEventInit" data-type="unsigned long" class="idlName"><code>rangeEnd</code></dfn>;</span>
};</span><span data-idl="" class="idlInterface" data-title="CharacterBoundsUpdateEvent">

[<span class="extAttr"><a data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=Window</span>]
interface <dfn data-export="" data-dfn-type="interface" data-idl="interface" data-title="CharacterBoundsUpdateEvent" data-dfn-for="" class="idlID"><code>CharacterBoundsUpdateEvent</code></dfn> : <span class="idlSuperclass"><a data-link-type="interface" href="https://dom.spec.whatwg.org/#event">Event</a></span> {<span data-idl="" class="idlConstructor" data-title="constructor" data-dfn-for="CharacterBoundsUpdateEvent">
    <dfn data-export="" data-dfn-type="constructor" data-idl="constructor" data-title="constructor" data-dfn-for="CharacterBoundsUpdateEvent" data-lt="constructor()|constructor(type)|constructor(type, options)" data-local-lt="CharacterBoundsUpdateEvent.constructor|CharacterBoundsUpdateEvent.constructor()|constructor"><code>constructor</code></dfn>(<span class="idlType"><a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">type</span>, optional<span class="idlType"> <a data-link-type="idl" href="#dom-characterboundsupdateeventinit" class="internalDFN" id="ref-for-dom-characterboundsupdateeventinit-2"><code>CharacterBoundsUpdateEventInit</code></a></span> <span class="idlParamName">options</span> = {});</span><span data-idl="" class="idlAttribute" data-title="rangeStart" data-dfn-for="CharacterBoundsUpdateEvent">
    readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="rangeStart" data-dfn-for="CharacterBoundsUpdateEvent" data-type="unsigned long" data-lt="rangeStart" data-local-lt="CharacterBoundsUpdateEvent.rangeStart" class="idlName"><code>rangeStart</code></dfn>;</span><span data-idl="" class="idlAttribute" data-title="rangeEnd" data-dfn-for="CharacterBoundsUpdateEvent">
    readonly attribute<span class="idlType"> <a data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <dfn data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="rangeEnd" data-dfn-for="CharacterBoundsUpdateEvent" data-type="unsigned long" data-lt="rangeEnd" data-local-lt="CharacterBoundsUpdateEvent.rangeEnd" class="idlName"><code>rangeEnd</code></dfn>;</span>
};</span></code></pre>
    </section>
    <section id="contributors">
        <div class="header-wrapper">
            <h2 id="b-contributors"><bdi class="secno">B. </bdi>贡献者</h2><a class="self-link" href="#contributors"
                aria-label="附录 B 的永久链接。"></a>
        </div>

        <div class="note" id="issue-container-generatedID-12">
            <div role="heading" class="ednote-title marker" id="h-ednote" aria-level="3"><span>编辑者注</span>
            </div>
            <p class="">
                添加贡献者
            </p>
        </div>
    </section>




    <section id="references" class="appendix">
        <div class="header-wrapper">
            <h2 id="c-references"><bdi class="secno">C. </bdi>参考文献</h2><a class="self-link" href="#references"
                aria-label="附录 C 的永久链接。"></a>
        </div>
        <section id="normative-references">
            <div class="header-wrapper">
                <h3 id="c-1-normative-references"><bdi class="secno">C.1 </bdi>规范性引用</h3><a class="self-link"
                    href="#normative-references" aria-label="附录 C.1 的永久链接"></a>
            </div>

            <dl class="bibliography">
                <dt id="bib-dom">[dom]</dt>
                <dd>
                    <a href="https://dom.spec.whatwg.org/"><cite>DOM 标准</cite></a>。Anne van Kesteren。WHATWG。
                    现行标准。URL：<a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
                </dd>
                <dt id="bib-geometry-1">[geometry-1]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/geometry-1/"><cite>几何接口模块 第 1 级</cite></a>。
                    Simon Pieters；Chris Harrelson。W3C。2018 年 12 月 4 日。W3C 候选推荐标准。URL：<a
                        href="https://www.w3.org/TR/geometry-1/">https://www.w3.org/TR/geometry-1/</a>
                </dd>
                <dt id="bib-html">[html]</dt>
                <dd>
                    <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML 标准</cite></a>。Anne van Kesteren；
                    Domenic Denicola；Dominic Farolino；Ian Hickson；Philip Jägenstedt；Simon Pieters。WHATWG。现行
                    标准。URL：<a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
                </dd>
                <dt id="bib-uievents">[uievents]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/uievents/"><cite>UI 事件</cite></a>。Gary Kacmarcik；Travis
                    Leithead。W3C。2024 年 9 月 7 日。W3C 工作草案。URL：<a
                        href="https://www.w3.org/TR/uievents/">https://www.w3.org/TR/uievents/</a>
                </dd>
                <dt id="bib-webidl">[webidl]</dt>
                <dd>
                    <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL 标准</cite></a>。Edgar Chen；Timothy Gu。
                    WHATWG。现行标准。URL：<a href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
                </dd>
            </dl>
        </section>
        <section id="informative-references">
            <div class="header-wrapper">
                <h3 id="c-2-informative-references"><bdi class="secno">C.2 </bdi>参考性引用</h3><a class="self-link"
                    href="#informative-references" aria-label="附录 C.2 的永久链接。"></a>
            </div>

            <dl class="bibliography">
                <dt id="bib-input-events">[input-events]</dt>
                <dd>
                    <a href="https://www.w3.org/TR/input-events-1/"><cite>输入事件 第 1 级</cite></a>。Johannes
                    Wilm。W3C。2023 年 9 月 28 日。W3C 工作草案。URL：<a
                        href="https://www.w3.org/TR/input-events-1/">https://www.w3.org/TR/input-events-1/</a>
                </dd>
            </dl>
        </section>
    </section>
    <p role="navigation" id="back-to-top">
        <a href="#title"><abbr title="返回顶部">↑</abbr></a>
    </p>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-text-input-method"
        aria-label="Links in this document to definition: Text Input Method">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-text-input-method"
                aria-label="Permalink for definition: Text Input Method. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-text-input-method-1" title="§ 1.1 Background and Motivation">§ 1.1 Background and
                    Motivation</a> <a href="#ref-for-dfn-text-input-method-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-text-input-method-3" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-text-input-method-4" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-text-input-method-5" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-text-input-method-6" title="Reference 6">(6)</a> <a
                    href="#ref-for-dfn-text-input-method-7" title="Reference 7">(7)</a> <a
                    href="#ref-for-dfn-text-input-method-8" title="Reference 8">(8)</a> <a
                    href="#ref-for-dfn-text-input-method-9" title="Reference 9">(9)</a> <a
                    href="#ref-for-dfn-text-input-method-10" title="Reference 10">(10)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-text-input-method-11" title="§ 1.2.4 EditContext events">§ 1.2.4 EditContext
                    events</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-text-edit-context"
        aria-label="Links in this document to definition: Text Edit Context">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-text-edit-context"
                aria-label="Permalink for definition: Text Edit Context. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-text-edit-context-1" title="§ 1.1 Background and Motivation">§ 1.1 Background and
                    Motivation</a> <a href="#ref-for-dfn-text-edit-context-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-text-edit-context-3" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-text-edit-context-4" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-text-edit-context-5" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-text-edit-context-6" title="Reference 6">(6)</a> <a
                    href="#ref-for-dfn-text-edit-context-7" title="Reference 7">(7)</a> <a
                    href="#ref-for-dfn-text-edit-context-8" title="Reference 8">(8)</a> <a
                    href="#ref-for-dfn-text-edit-context-9" title="Reference 9">(9)</a> <a
                    href="#ref-for-dfn-text-edit-context-10" title="Reference 10">(10)</a> <a
                    href="#ref-for-dfn-text-edit-context-11" title="Reference 11">(11)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-text-edit-context-12" title="§ 1.2 The EditContext Model">§ 1.2 The EditContext
                    Model</a> <a href="#ref-for-dfn-text-edit-context-13" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-text-edit-context-14" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-text-edit-context-15" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-text-edit-context-16" title="§ 1.2.1 EditContext state">§ 1.2.1 EditContext
                    state</a>
            </li>
            <li>
                <a href="#ref-for-dfn-text-edit-context-17" title="§ 3.1.1 Handle input for EditContext">§ 3.1.1 Handle
                    input for EditContext</a> <a href="#ref-for-dfn-text-edit-context-18" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-text-edit-context-19" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-text-edit-context-20" title="§ 3.1.4 Update the Text Edit Context">§ 3.1.4 Update
                    the Text Edit Context</a> <a href="#ref-for-dfn-text-edit-context-21" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-text-input-service"
        aria-label="Links in this document to definition: Text Input Service">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-text-input-service"
                aria-label="Permalink for definition: Text Input Service. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-text-input-service-1" title="§ 1.1 Background and Motivation">§ 1.1 Background and
                    Motivation</a> <a href="#ref-for-dfn-text-input-service-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-text-input-service-3" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-text-input-service-4" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-text-input-service-5" title="§ 1.2 The EditContext Model">§ 1.2 The EditContext
                    Model</a> <a href="#ref-for-dfn-text-input-service-6" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-text-input-service-7" title="§ 1.2.1 EditContext state">§ 1.2.1 EditContext
                    state</a> <a href="#ref-for-dfn-text-input-service-8" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-text-input-service-9" title="§ 1.2.2 Association and activation">§ 1.2.2
                    Association and activation</a>
            </li>
            <li>
                <a href="#ref-for-dfn-text-input-service-10" title="§ 1.2.4 EditContext events">§ 1.2.4 EditContext
                    events</a> <a href="#ref-for-dfn-text-input-service-11" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-text-input-service-12" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-text-input-service-13" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-text-input-service-14" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-text-input-service-15" title="Reference 6">(6)</a> <a
                    href="#ref-for-dfn-text-input-service-16" title="Reference 7">(7)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-text-input-service-17" title="§ 3.1.3 Update the EditContext">§ 3.1.3 Update the
                    EditContext</a>
            </li>
            <li>
                <a href="#ref-for-dfn-text-input-service-18" title="§ 3.1.4 Update the Text Edit Context">§ 3.1.4 Update
                    the Text Edit Context</a>
            </li>
            <li>
                <a href="#ref-for-dfn-text-input-service-19" title="§ 3.1.6 Dispatch text format update event">§ 3.1.6
                    Dispatch text format update event</a>
            </li>
            <li>
                <a href="#ref-for-dfn-text-input-service-20" title="§ 4.3 CharacterBoundsUpdateEvent">§ 4.3
                    CharacterBoundsUpdateEvent</a> <a href="#ref-for-dfn-text-input-service-21"
                    title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-text-state"
        aria-label="Links in this document to definition: text state">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-text-state"
                aria-label="Permalink for definition: text state. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-text-state-1" title="§ 1.2.1 EditContext state">§ 1.2.1 EditContext state</a>
            </li>
            <li>
                <a href="#ref-for-dfn-text-state-2" title="§ 1.2.4 EditContext events">§ 1.2.4 EditContext events</a>
            </li>
            <li>
                <a href="#ref-for-dfn-text-state-3" title="§ 3.1.1 Handle input for EditContext">§ 3.1.1 Handle input
                    for EditContext</a>
            </li>
            <li>
                <a href="#ref-for-dfn-text-state-4" title="§ 3.1.4 Update the Text Edit Context">§ 3.1.4 Update the Text
                    Edit Context</a> <a href="#ref-for-dfn-text-state-5" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-text-state-6" title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-text"
        aria-label="Links in this document to definition: text">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-text"
                aria-label="Permalink for definition: text. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-text-1" title="§ 1.2.1 EditContext state">§ 1.2.1 EditContext state</a> <a
                    href="#ref-for-dfn-text-2" title="Reference 2">(2)</a> <a href="#ref-for-dfn-text-3"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-text-4" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-text-5" title="Reference 5">(5)</a> <a href="#ref-for-dfn-text-6"
                    title="Reference 6">(6)</a> <a href="#ref-for-dfn-text-7" title="Reference 7">(7)</a> <a
                    href="#ref-for-dfn-text-8" title="Reference 8">(8)</a> <a href="#ref-for-dfn-text-9"
                    title="Reference 9">(9)</a> <a href="#ref-for-dfn-text-10" title="Reference 10">(10)</a> <a
                    href="#ref-for-dfn-text-11" title="Reference 11">(11)</a> <a href="#ref-for-dfn-text-12"
                    title="Reference 12">(12)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-text-13" title="§ 3.1.1 Handle input for EditContext">§ 3.1.1 Handle input for
                    EditContext</a>
            </li>
            <li>
                <a href="#ref-for-dfn-text-14" title="§ 3.1.3 Update the EditContext">§ 3.1.3 Update the EditContext</a>
            </li>
            <li>
                <a href="#ref-for-dfn-text-15" title="§ 3.2 EditContext Interface">§ 3.2 EditContext Interface</a> <a
                    href="#ref-for-dfn-text-16" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-selection-start"
        aria-label="Links in this document to definition: selection start">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-selection-start"
                aria-label="Permalink for definition: selection start. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-selection-start-1" title="§ 1.2.1 EditContext state">§ 1.2.1 EditContext state</a>
            </li>
            <li>
                <a href="#ref-for-dfn-selection-start-2" title="§ 3.1.1 Handle input for EditContext">§ 3.1.1 Handle
                    input for EditContext</a>
            </li>
            <li>
                <a href="#ref-for-dfn-selection-start-3" title="§ 3.1.3 Update the EditContext">§ 3.1.3 Update the
                    EditContext</a>
            </li>
            <li>
                <a href="#ref-for-dfn-selection-start-4" title="§ 3.1.5 Dispatch text update event">§ 3.1.5 Dispatch
                    text update event</a>
            </li>
            <li>
                <a href="#ref-for-dfn-selection-start-5" title="§ 3.2 EditContext Interface">§ 3.2 EditContext
                    Interface</a> <a href="#ref-for-dfn-selection-start-6" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-selection-end"
        aria-label="Links in this document to definition: selection end">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-selection-end"
                aria-label="Permalink for definition: selection end. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-selection-end-1" title="§ 1.2.1 EditContext state">§ 1.2.1 EditContext state</a>
            </li>
            <li>
                <a href="#ref-for-dfn-selection-end-2" title="§ 3.1.1 Handle input for EditContext">§ 3.1.1 Handle input
                    for EditContext</a>
            </li>
            <li>
                <a href="#ref-for-dfn-selection-end-3" title="§ 3.1.3 Update the EditContext">§ 3.1.3 Update the
                    EditContext</a>
            </li>
            <li>
                <a href="#ref-for-dfn-selection-end-4" title="§ 3.1.5 Dispatch text update event">§ 3.1.5 Dispatch text
                    update event</a>
            </li>
            <li>
                <a href="#ref-for-dfn-selection-end-5" title="§ 3.2 EditContext Interface">§ 3.2 EditContext
                    Interface</a> <a href="#ref-for-dfn-selection-end-6" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-is-composing"
        aria-label="Links in this document to definition: is composing">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-is-composing"
                aria-label="Permalink for definition: is composing. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-is-composing-1" title="§ 3.1.1 Handle input for EditContext">§ 3.1.1 Handle input
                    for EditContext</a>
            </li>
            <li>
                <a href="#ref-for-dfn-is-composing-2" title="§ 3.1.3 Update the EditContext">§ 3.1.3 Update the
                    EditContext</a> <a href="#ref-for-dfn-is-composing-3" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-is-composing-4" title="Reference 3">(3)</a> <a href="#ref-for-dfn-is-composing-5"
                    title="Reference 4">(4)</a> <a href="#ref-for-dfn-is-composing-6" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-is-composing-7" title="Reference 6">(6)</a> <a href="#ref-for-dfn-is-composing-8"
                    title="Reference 7">(7)</a> <a href="#ref-for-dfn-is-composing-9" title="Reference 8">(8)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-is-composing-10" title="§ 3.1.8 Deactivate an EditContext">§ 3.1.8 Deactivate an
                    EditContext</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-composition-start"
        aria-label="Links in this document to definition: composition start">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-composition-start"
                aria-label="Permalink for definition: composition start. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-composition-start-1" title="§ 1.2.1 EditContext state">§ 1.2.1 EditContext
                    state</a>
            </li>
            <li>
                <a href="#ref-for-dfn-composition-start-2" title="§ 3.1.1 Handle input for EditContext">§ 3.1.1 Handle
                    input for EditContext</a>
            </li>
            <li>
                <a href="#ref-for-dfn-composition-start-3" title="§ 3.1.3 Update the EditContext">§ 3.1.3 Update the
                    EditContext</a> <a href="#ref-for-dfn-composition-start-4" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-composition-start-5" title="§ 3.1.7 Dispatch character bounds update event">§
                    3.1.7 Dispatch character bounds update event</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-composition-end"
        aria-label="Links in this document to definition: composition end">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-composition-end"
                aria-label="Permalink for definition: composition end. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-composition-end-1" title="§ 1.2.1 EditContext state">§ 1.2.1 EditContext state</a>
            </li>
            <li>
                <a href="#ref-for-dfn-composition-end-2" title="§ 3.1.1 Handle input for EditContext">§ 3.1.1 Handle
                    input for EditContext</a>
            </li>
            <li>
                <a href="#ref-for-dfn-composition-end-3" title="§ 3.1.3 Update the EditContext">§ 3.1.3 Update the
                    EditContext</a>
            </li>
            <li>
                <a href="#ref-for-dfn-composition-end-4" title="§ 3.1.7 Dispatch character bounds update event">§ 3.1.7
                    Dispatch character bounds update event</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-text-formats"
        aria-label="Links in this document to definition: text formats">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-text-formats"
                aria-label="Permalink for definition: text formats. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-text-formats-1" title="§ 3.1.1 Handle input for EditContext">§ 3.1.1 Handle input
                    for EditContext</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-control-bounds"
        aria-label="Links in this document to definition: control bounds">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-control-bounds"
                aria-label="Permalink for definition: control bounds. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-control-bounds-1" title="§ 1.2.1 EditContext state">§ 1.2.1 EditContext state</a>
                <a href="#ref-for-dfn-control-bounds-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-control-bounds-3" title="§ 3.2 EditContext Interface">§ 3.2 EditContext
                    Interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-selection-bounds"
        aria-label="Links in this document to definition: selection bounds">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-selection-bounds"
                aria-label="Permalink for definition: selection bounds. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-selection-bounds-1" title="§ 1.2.1 EditContext state">§ 1.2.1 EditContext
                    state</a> <a href="#ref-for-dfn-selection-bounds-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-selection-bounds-3" title="§ 3.2 EditContext Interface">§ 3.2 EditContext
                    Interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-codepoint-rects-start-index"
        aria-label="Links in this document to definition: codepoint rects start index">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-codepoint-rects-start-index"
                aria-label="Permalink for definition: codepoint rects start index. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-codepoint-rects-start-index-1" title="§ 3.2 EditContext Interface">§ 3.2
                    EditContext Interface</a> <a href="#ref-for-dfn-codepoint-rects-start-index-2"
                    title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-codepoint-rects"
        aria-label="Links in this document to definition: codepoint rects">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-codepoint-rects"
                aria-label="Permalink for definition: codepoint rects. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-codepoint-rects-1" title="§ 1.2.1 EditContext state">§ 1.2.1 EditContext state</a>
                <a href="#ref-for-dfn-codepoint-rects-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-codepoint-rects-3" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-codepoint-rects-4" title="§ 3.2 EditContext Interface">§ 3.2 EditContext
                    Interface</a> <a href="#ref-for-dfn-codepoint-rects-5" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-text-format"
        aria-label="Links in this document to definition: text format">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-text-format"
                aria-label="Permalink for definition: text format. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-text-format-1" title="§ 1.2.1 EditContext state">§ 1.2.1 EditContext state</a>
            </li>
            <li>
                <a href="#ref-for-dfn-text-format-2" title="§ 3.1.3 Update the EditContext">§ 3.1.3 Update the
                    EditContext</a>
            </li>
            <li>
                <a href="#ref-for-dfn-text-format-3" title="§ 3.1.6 Dispatch text format update event">§ 3.1.6 Dispatch
                    text format update event</a> <a href="#ref-for-dfn-text-format-4" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-text-format-5" title="§ 4.2 TextFormatUpdateEvent">§ 4.2 TextFormatUpdateEvent</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-range-start"
        aria-label="Links in this document to definition: range start">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-range-start"
                aria-label="Permalink for definition: range start. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-range-start-1" title="§ 3.1.6 Dispatch text format update event">§ 3.1.6 Dispatch
                    text format update event</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-range-end"
        aria-label="Links in this document to definition: range end">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-range-end"
                aria-label="Permalink for definition: range end. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-range-end-1" title="§ 3.1.6 Dispatch text format update event">§ 3.1.6 Dispatch
                    text format update event</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-underline-style"
        aria-label="Links in this document to definition: underline style">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-underline-style"
                aria-label="Permalink for definition: underline style. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-underline-style-1" title="§ 3.1.6 Dispatch text format update event">§ 3.1.6
                    Dispatch text format update event</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-underline-thickness"
        aria-label="Links in this document to definition: underline thickness">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-underline-thickness"
                aria-label="Permalink for definition: underline thickness. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-underline-thickness-1" title="§ 3.1.6 Dispatch text format update event">§ 3.1.6
                    Dispatch text format update event</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-client-coordinate-system"
        aria-label="Links in this document to definition: client coordinate system">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-client-coordinate-system"
                aria-label="Permalink for definition: client coordinate system. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-client-coordinate-system-1" title="§ 1.2.1 EditContext state">§ 1.2.1 EditContext
                    state</a> <a href="#ref-for-dfn-client-coordinate-system-2" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-client-coordinate-system-3" title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-associated-element"
        aria-label="Links in this document to definition: associated element">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-associated-element"
                aria-label="Permalink for definition: associated element. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-associated-element-1" title="§ 1.2.2 Association and activation">§ 1.2.2
                    Association and activation</a> <a href="#ref-for-dfn-associated-element-2"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-associated-element-3" title="Reference 3">(3)</a>
                <a href="#ref-for-dfn-associated-element-4" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-associated-element-5" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-associated-element-6" title="Reference 6">(6)</a> <a
                    href="#ref-for-dfn-associated-element-7" title="Reference 7">(7)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-associated-element-8"
                    title="§ 1.2.3 Differences for an EditContext editing host">§ 1.2.3 Differences for an EditContext
                    editing host</a> <a href="#ref-for-dfn-associated-element-9" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-associated-element-10" title="§ 1.2.6 Examples">§ 1.2.6 Examples</a> <a
                    href="#ref-for-dfn-associated-element-11" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-associated-element-12" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-associated-element-13" title="§ 3.1 Extensions to the HTMLElement interface">§ 3.1
                    Extensions to the HTMLElement interface</a> <a href="#ref-for-dfn-associated-element-14"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-associated-element-15" title="Reference 3">(3)</a>
                <a href="#ref-for-dfn-associated-element-16" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-associated-element-17" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-associated-element-18" title="Reference 6">(6)</a> <a
                    href="#ref-for-dfn-associated-element-19" title="Reference 7">(7)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-associated-element-20" title="§ 3.1.9 Determine the active EditContext">§ 3.1.9
                    Determine the active EditContext</a>
            </li>
            <li>
                <a href="#ref-for-dfn-associated-element-21" title="§ 3.2 EditContext Interface">§ 3.2 EditContext
                    Interface</a> <a href="#ref-for-dfn-associated-element-22" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-associated-element-23" title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-editcontext-editing-host"
        aria-label="Links in this document to definition: EditContext editing host">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-editcontext-editing-host"
                aria-label="Permalink for definition: EditContext editing host. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-editcontext-editing-host-1" title="§ 1.2.2 Association and activation">§ 1.2.2
                    Association and activation</a> <a href="#ref-for-dfn-editcontext-editing-host-2"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-editcontext-editing-host-3"
                    title="Reference 3">(3)</a> <a href="#ref-for-dfn-editcontext-editing-host-4"
                    title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-editcontext-editing-host-5"
                    title="§ 1.2.3 Differences for an EditContext editing host">§ 1.2.3 Differences for an EditContext
                    editing host</a> <a href="#ref-for-dfn-editcontext-editing-host-6" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-editcontext-editing-host-7" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-editcontext-editing-host-8" title="Reference 4">(4)</a> <a
                    href="#ref-for-dfn-editcontext-editing-host-9" title="Reference 5">(5)</a> <a
                    href="#ref-for-dfn-editcontext-editing-host-10" title="Reference 6">(6)</a> <a
                    href="#ref-for-dfn-editcontext-editing-host-11" title="Reference 7">(7)</a> <a
                    href="#ref-for-dfn-editcontext-editing-host-12" title="Reference 8">(8)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-active-editcontext"
        aria-label="Links in this document to definition: active EditContext">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-active-editcontext"
                aria-label="Permalink for definition: active EditContext. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-active-editcontext-1" title="§ 1.2 The EditContext Model">§ 1.2 The EditContext
                    Model</a> <a href="#ref-for-dfn-active-editcontext-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-active-editcontext-3"
                    title="§ 1.2.3 Differences for an EditContext editing host">§ 1.2.3 Differences for an EditContext
                    editing host</a> <a href="#ref-for-dfn-active-editcontext-4" title="Reference 2">(2)</a> <a
                    href="#ref-for-dfn-active-editcontext-5" title="Reference 3">(3)</a> <a
                    href="#ref-for-dfn-active-editcontext-6" title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-active-editcontext-7" title="§ 3.1 Extensions to the HTMLElement interface">§ 3.1
                    Extensions to the HTMLElement interface</a>
            </li>
            <li>
                <a href="#ref-for-dfn-active-editcontext-8" title="§ 3.1.1 Handle input for EditContext">§ 3.1.1 Handle
                    input for EditContext</a>
            </li>
            <li>
                <a href="#ref-for-dfn-active-editcontext-9" title="§ 3.1.4 Update the Text Edit Context">§ 3.1.4 Update
                    the Text Edit Context</a> <a href="#ref-for-dfn-active-editcontext-10" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dfn-active-editcontext-11" title="§ 3.1.9 Determine the active EditContext">§ 3.1.9
                    Determine the active EditContext</a> <a href="#ref-for-dfn-active-editcontext-12"
                    title="Reference 2">(2)</a> <a href="#ref-for-dfn-active-editcontext-13" title="Reference 3">(3)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-htmlelement-editcontext"
        aria-label="Links in this document to definition: editContext">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-htmlelement-editcontext"
                aria-label="Permalink for definition: editContext. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-htmlelement-editcontext-1" title="§ 1.2.2 Association and activation">§ 1.2.2
                    Association and activation</a> <a href="#ref-for-dom-htmlelement-editcontext-2"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-htmlelement-editcontext-3" title="§ 3.1 Extensions to the HTMLElement interface">§
                    3.1 Extensions to the HTMLElement interface</a> <a href="#ref-for-dom-htmlelement-editcontext-4"
                    title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-handle-input-for-editcontext"
        aria-label="Links in this document to definition: Handle input for EditContext">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-handle-input-for-editcontext"
                aria-label="Permalink for definition: Handle input for EditContext. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-handle-input-for-editcontext-1" title="§ 1.2.2 Association and activation">§ 1.2.2
                    Association and activation</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-editcontext-handled-inputtype"
        aria-label="Links in this document to definition: EditContext-handled inputType">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-editcontext-handled-inputtype"
                aria-label="Permalink for definition: EditContext-handled inputType. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-editcontext-handled-inputtype-1" title="§ 3.1.2 EditContext-handled inputType">§
                    3.1.2 EditContext-handled inputType</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-update-the-editcontext"
        aria-label="Links in this document to definition: Update the EditContext">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-update-the-editcontext"
                aria-label="Permalink for definition: Update the EditContext. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-update-the-editcontext-1"
                    title="§ 1.2.3 Differences for an EditContext editing host">§ 1.2.3 Differences for an EditContext
                    editing host</a>
            </li>
            <li>
                <a href="#ref-for-dfn-update-the-editcontext-2" title="§ 3.1.1 Handle input for EditContext">§ 3.1.1
                    Handle input for EditContext</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-update-the-text-edit-context"
        aria-label="Links in this document to definition: Update the Text Edit Context">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-update-the-text-edit-context"
                aria-label="Permalink for definition: Update the Text Edit Context. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-update-the-text-edit-context-1" title="§ 1.2.5 Event loop changes">§ 1.2.5 Event
                    loop changes</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-dispatch-text-update-event"
        aria-label="Links in this document to definition: Dispatch text update event">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-dispatch-text-update-event"
                aria-label="Permalink for definition: Dispatch text update event. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-dispatch-text-update-event-1" title="§ 3.1.3 Update the EditContext">§ 3.1.3
                    Update the EditContext</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-dispatch-text-format-update-event"
        aria-label="Links in this document to definition: Dispatch text format update event">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-dispatch-text-format-update-event"
                aria-label="Permalink for definition: Dispatch text format update event. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-dispatch-text-format-update-event-1" title="§ 3.1.3 Update the EditContext">§
                    3.1.3 Update the EditContext</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-dispatch-character-bounds-update-event"
        aria-label="Links in this document to definition: Dispatch character bounds update event">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-dispatch-character-bounds-update-event"
                aria-label="Permalink for definition: Dispatch character bounds update event. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-dispatch-character-bounds-update-event-1" title="§ 3.1.3 Update the EditContext">§
                    3.1.3 Update the EditContext</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-deactivate-an-editcontext"
        aria-label="Links in this document to definition: Deactivate an EditContext">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-deactivate-an-editcontext"
                aria-label="Permalink for definition: Deactivate an EditContext. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-deactivate-an-editcontext-1"
                    title="§ 1.2.3 Differences for an EditContext editing host">§ 1.2.3 Differences for an EditContext
                    editing host</a>
            </li>
            <li>
                <a href="#ref-for-dfn-deactivate-an-editcontext-2"
                    title="§ 3.1 Extensions to the HTMLElement interface">§ 3.1 Extensions to the HTMLElement
                    interface</a>
            </li>
            <li>
                <a href="#ref-for-dfn-deactivate-an-editcontext-3" title="§ 3.1.4 Update the Text Edit Context">§ 3.1.4
                    Update the Text Edit Context</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dfn-determine-the-active-editcontext"
        aria-label="Links in this document to definition: Determine the active EditContext">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-determine-the-active-editcontext"
                aria-label="Permalink for definition: Determine the active EditContext. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-determine-the-active-editcontext-1" title="§ 3.1.4 Update the Text Edit Context">§
                    3.1.4 Update the Text Edit Context</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-editcontextinit"
        aria-label="Links in this document to definition: EditContextInit">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-editcontextinit"
                aria-label="Permalink for definition: EditContextInit. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-editcontextinit-1" title="§ 3.2 EditContext Interface">§ 3.2 EditContext
                    Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-editcontextinit-2" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-editcontextinit-text"
        aria-label="Links in this document to definition: text">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-editcontextinit-text"
                aria-label="Permalink for definition: text. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-editcontextinit-selectionstart"
        aria-label="Links in this document to definition: selectionStart">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-editcontextinit-selectionstart"
                aria-label="Permalink for definition: selectionStart. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-editcontextinit-selectionend"
        aria-label="Links in this document to definition: selectionEnd">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-editcontextinit-selectionend"
                aria-label="Permalink for definition: selectionEnd. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-editcontext"
        aria-label="Links in this document to definition: EditContext">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-editcontext"
                aria-label="Permalink for definition: EditContext. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-editcontext-1" title="§ Abstract">§ Abstract</a>
            </li>
            <li>
                <a href="#ref-for-dom-editcontext-2" title="§ 1.2 The EditContext Model">§ 1.2 The EditContext Model</a>
            </li>
            <li>
                <a href="#ref-for-dom-editcontext-3" title="§ 1.2.1 EditContext state">§ 1.2.1 EditContext state</a>
            </li>
            <li>
                <a href="#ref-for-dom-editcontext-4" title="§ 1.2.2 Association and activation">§ 1.2.2 Association and
                    activation</a> <a href="#ref-for-dom-editcontext-5" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-editcontext-6" title="Reference 3">(3)</a> <a href="#ref-for-dom-editcontext-7"
                    title="Reference 4">(4)</a> <a href="#ref-for-dom-editcontext-8" title="Reference 5">(5)</a> <a
                    href="#ref-for-dom-editcontext-9" title="Reference 6">(6)</a> <a href="#ref-for-dom-editcontext-10"
                    title="Reference 7">(7)</a> <a href="#ref-for-dom-editcontext-11" title="Reference 8">(8)</a> <a
                    href="#ref-for-dom-editcontext-12" title="Reference 9">(9)</a> <a href="#ref-for-dom-editcontext-13"
                    title="Reference 10">(10)</a> <a href="#ref-for-dom-editcontext-14" title="Reference 11">(11)</a> <a
                    href="#ref-for-dom-editcontext-15" title="Reference 12">(12)</a> <a
                    href="#ref-for-dom-editcontext-16" title="Reference 13">(13)</a>
            </li>
            <li>
                <a href="#ref-for-dom-editcontext-17" title="§ 1.2.3 Differences for an EditContext editing host">§
                    1.2.3 Differences for an EditContext editing host</a>
            </li>
            <li>
                <a href="#ref-for-dom-editcontext-18" title="§ 1.2.4 EditContext events">§ 1.2.4 EditContext events</a>
            </li>
            <li>
                <a href="#ref-for-dom-editcontext-19" title="§ 1.2.6 Examples">§ 1.2.6 Examples</a> <a
                    href="#ref-for-dom-editcontext-20" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-editcontext-21" title="§ 3.1 Extensions to the HTMLElement interface">§ 3.1
                    Extensions to the HTMLElement interface</a> <a href="#ref-for-dom-editcontext-22"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-editcontext-23" title="§ 3.1.2 EditContext-handled inputType">§ 3.1.2
                    EditContext-handled inputType</a> <a href="#ref-for-dom-editcontext-24" title="Reference 2">(2)</a>
                <a href="#ref-for-dom-editcontext-25" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-editcontext-26" title="§ 3.1.3 Update the EditContext">§ 3.1.3 Update the
                    EditContext</a>
            </li>
            <li>
                <a href="#ref-for-dom-editcontext-27" title="§ 3.1.5 Dispatch text update event">§ 3.1.5 Dispatch text
                    update event</a>
            </li>
            <li>
                <a href="#ref-for-dom-editcontext-28" title="§ 3.1.6 Dispatch text format update event">§ 3.1.6 Dispatch
                    text format update event</a>
            </li>
            <li>
                <a href="#ref-for-dom-editcontext-29" title="§ 3.1.7 Dispatch character bounds update event">§ 3.1.7
                    Dispatch character bounds update event</a>
            </li>
            <li>
                <a href="#ref-for-dom-editcontext-30" title="§ 3.1.8 Deactivate an EditContext">§ 3.1.8 Deactivate an
                    EditContext</a>
            </li>
            <li>
                <a href="#ref-for-dom-editcontext-31" title="§ 3.1.9 Determine the active EditContext">§ 3.1.9 Determine
                    the active EditContext</a> <a href="#ref-for-dom-editcontext-32" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-editcontext-33" title="Reference 3">(3)</a> <a href="#ref-for-dom-editcontext-34"
                    title="Reference 4">(4)</a>
            </li>
            <li>
                <a href="#ref-for-dom-editcontext-35" title="§ 3.2 EditContext Interface">§ 3.2 EditContext
                    Interface</a> <a href="#ref-for-dom-editcontext-36" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-editcontext-37" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-editcontext-38" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-editcontext-constructor"
        aria-label="Links in this document to definition: constructor">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-editcontext-constructor"
                aria-label="Permalink for definition: constructor. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-editcontext-updatetext"
        aria-label="Links in this document to definition: updateText">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-editcontext-updatetext"
                aria-label="Permalink for definition: updateText. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-editcontext-updateselection"
        aria-label="Links in this document to definition: updateSelection">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-editcontext-updateselection"
                aria-label="Permalink for definition: updateSelection. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-editcontext-updatecontrolbounds"
        aria-label="Links in this document to definition: updateControlBounds">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-editcontext-updatecontrolbounds"
                aria-label="Permalink for definition: updateControlBounds. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-editcontext-updateselectionbounds"
        aria-label="Links in this document to definition: updateSelectionBounds">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-editcontext-updateselectionbounds"
                aria-label="Permalink for definition: updateSelectionBounds. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-editcontext-updatecharacterbounds"
        aria-label="Links in this document to definition: updateCharacterBounds">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-editcontext-updatecharacterbounds"
                aria-label="Permalink for definition: updateCharacterBounds. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-editcontext-updatecharacterbounds-1" title="§ 1.2.4 EditContext events">§ 1.2.4
                    EditContext events</a> <a href="#ref-for-dom-editcontext-updatecharacterbounds-2"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-editcontext-updatecharacterbounds-3"
                    title="Reference 3">(3)</a> <a href="#ref-for-dom-editcontext-updatecharacterbounds-4"
                    title="Reference 4">(4)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-editcontext-attachedelements"
        aria-label="Links in this document to definition: attachedElements">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-editcontext-attachedelements"
                aria-label="Permalink for definition: attachedElements. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-editcontext-text"
        aria-label="Links in this document to definition: text">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-editcontext-text"
                aria-label="Permalink for definition: text. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-editcontext-text-1" title="§ 3.2 EditContext Interface">§ 3.2 EditContext
                    Interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-editcontext-selectionstart"
        aria-label="Links in this document to definition: selectionStart">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-editcontext-selectionstart"
                aria-label="Permalink for definition: selectionStart. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-editcontext-selectionstart-1" title="§ 3.2 EditContext Interface">§ 3.2
                    EditContext Interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-editcontext-selectionend"
        aria-label="Links in this document to definition: selectionEnd">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-editcontext-selectionend"
                aria-label="Permalink for definition: selectionEnd. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-editcontext-selectionend-1" title="§ 3.2 EditContext Interface">§ 3.2 EditContext
                    Interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-editcontext-characterboundsrangestart"
        aria-label="Links in this document to definition: characterBoundsRangeStart">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-editcontext-characterboundsrangestart"
                aria-label="Permalink for definition: characterBoundsRangeStart. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-editcontext-characterboundsrangestart-1" title="§ 3.2 EditContext Interface">§ 3.2
                    EditContext Interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-editcontext-characterbounds"
        aria-label="Links in this document to definition: characterBounds">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-editcontext-characterbounds"
                aria-label="Permalink for definition: characterBounds. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-editcontext-characterbounds-1" title="§ 3.2 EditContext Interface">§ 3.2
                    EditContext Interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-editcontext-ontextupdate"
        aria-label="Links in this document to definition: ontextupdate">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-editcontext-ontextupdate"
                aria-label="Permalink for definition: ontextupdate. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-editcontext-ontextformatupdate"
        aria-label="Links in this document to definition: ontextformatupdate">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-editcontext-ontextformatupdate"
                aria-label="Permalink for definition: ontextformatupdate. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-editcontext-oncharacterboundsupdate"
        aria-label="Links in this document to definition: oncharacterboundsupdate">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-editcontext-oncharacterboundsupdate"
                aria-label="Permalink for definition: oncharacterboundsupdate. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-editcontext-oncompositionstart"
        aria-label="Links in this document to definition: oncompositionstart">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-editcontext-oncompositionstart"
                aria-label="Permalink for definition: oncompositionstart. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-editcontext-oncompositionend"
        aria-label="Links in this document to definition: oncompositionend">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-editcontext-oncompositionend"
                aria-label="Permalink for definition: oncompositionend. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-textupdateeventinit"
        aria-label="Links in this document to definition: TextUpdateEventInit">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textupdateeventinit"
                aria-label="Permalink for definition: TextUpdateEventInit. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-textupdateeventinit-1" title="§ 4.1 TextUpdateEvent">§ 4.1 TextUpdateEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-textupdateeventinit-2" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-textupdateeventinit-updaterangestart"
        aria-label="Links in this document to definition: updateRangeStart">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textupdateeventinit-updaterangestart"
                aria-label="Permalink for definition: updateRangeStart. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-textupdateeventinit-updaterangeend"
        aria-label="Links in this document to definition: updateRangeEnd">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textupdateeventinit-updaterangeend"
                aria-label="Permalink for definition: updateRangeEnd. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-textupdateeventinit-text"
        aria-label="Links in this document to definition: text">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textupdateeventinit-text"
                aria-label="Permalink for definition: text. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-textupdateeventinit-selectionstart"
        aria-label="Links in this document to definition: selectionStart">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textupdateeventinit-selectionstart"
                aria-label="Permalink for definition: selectionStart. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-textupdateeventinit-selectionend"
        aria-label="Links in this document to definition: selectionEnd">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textupdateeventinit-selectionend"
                aria-label="Permalink for definition: selectionEnd. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-textupdateeventinit-compositionstart"
        aria-label="Links in this document to definition: compositionStart">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textupdateeventinit-compositionstart"
                aria-label="Permalink for definition: compositionStart. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-textupdateeventinit-compositionend"
        aria-label="Links in this document to definition: compositionEnd">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textupdateeventinit-compositionend"
                aria-label="Permalink for definition: compositionEnd. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-textupdateevent"
        aria-label="Links in this document to definition: TextUpdateEvent">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textupdateevent"
                aria-label="Permalink for definition: TextUpdateEvent. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-textupdateevent-1" title="§ 1.2.4 EditContext events">§ 1.2.4 EditContext
                    events</a>
            </li>
            <li>
                <a href="#ref-for-dom-textupdateevent-2" title="§ 1.2.6 Examples">§ 1.2.6 Examples</a>
            </li>
            <li>
                <a href="#ref-for-dom-textupdateevent-3" title="§ 3.1.5 Dispatch text update event">§ 3.1.5 Dispatch
                    text update event</a>
            </li>
            <li>
                <a href="#ref-for-dom-textupdateevent-4" title="§ 3.2 EditContext Interface">§ 3.2 EditContext
                    Interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-textupdateevent-constructor"
        aria-label="Links in this document to definition: constructor">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textupdateevent-constructor"
                aria-label="Permalink for definition: constructor. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-textupdateevent-updaterangestart"
        aria-label="Links in this document to definition: updateRangeStart">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textupdateevent-updaterangestart"
                aria-label="Permalink for definition: updateRangeStart. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-textupdateevent-updaterangestart-1" title="§ 4.1 TextUpdateEvent">§ 4.1
                    TextUpdateEvent</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-textupdateevent-updaterangeend"
        aria-label="Links in this document to definition: updateRangeEnd">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textupdateevent-updaterangeend"
                aria-label="Permalink for definition: updateRangeEnd. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-textupdateevent-updaterangeend-1" title="§ 4.1 TextUpdateEvent">§ 4.1
                    TextUpdateEvent</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-textupdateevent-text"
        aria-label="Links in this document to definition: text">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textupdateevent-text"
                aria-label="Permalink for definition: text. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-textupdateevent-text-1" title="§ 3.1.5 Dispatch text update event">§ 3.1.5
                    Dispatch text update event</a>
            </li>
            <li>
                <a href="#ref-for-dom-textupdateevent-text-2" title="§ 4.1 TextUpdateEvent">§ 4.1 TextUpdateEvent</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-textupdateevent-selectionstart"
        aria-label="Links in this document to definition: selectionStart">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textupdateevent-selectionstart"
                aria-label="Permalink for definition: selectionStart. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-textupdateevent-selectionstart-1" title="§ 3.1.5 Dispatch text update event">§
                    3.1.5 Dispatch text update event</a>
            </li>
            <li>
                <a href="#ref-for-dom-textupdateevent-selectionstart-2" title="§ 4.1 TextUpdateEvent">§ 4.1
                    TextUpdateEvent</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-textupdateevent-selectionend"
        aria-label="Links in this document to definition: selectionEnd">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textupdateevent-selectionend"
                aria-label="Permalink for definition: selectionEnd. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-textupdateevent-selectionend-1" title="§ 3.1.5 Dispatch text update event">§ 3.1.5
                    Dispatch text update event</a>
            </li>
            <li>
                <a href="#ref-for-dom-textupdateevent-selectionend-2" title="§ 4.1 TextUpdateEvent">§ 4.1
                    TextUpdateEvent</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-underlinestyle"
        aria-label="Links in this document to definition: UnderlineStyle">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-underlinestyle"
                aria-label="Permalink for definition: UnderlineStyle. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-underlinestyle-1" title="§ 1.2.1 EditContext state">§ 1.2.1 EditContext state</a>
            </li>
            <li>
                <a href="#ref-for-dom-underlinestyle-2" title="§ 1.2.4 EditContext events">§ 1.2.4 EditContext
                    events</a>
            </li>
            <li>
                <a href="#ref-for-dom-underlinestyle-3" title="§ 4.2 TextFormatUpdateEvent">§ 4.2
                    TextFormatUpdateEvent</a> <a href="#ref-for-dom-underlinestyle-4" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-underlinestyle-5" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-underlinestyle-6" title="§ A. IDL Index">§ A. IDL Index</a> <a
                    href="#ref-for-dom-underlinestyle-7" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-underlinestyle-none"
        aria-label="Links in this document to definition: none">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-underlinestyle-none"
                aria-label="Permalink for definition: none. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-underlinestyle-solid"
        aria-label="Links in this document to definition: solid">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-underlinestyle-solid"
                aria-label="Permalink for definition: solid. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-underlinestyle-dotted"
        aria-label="Links in this document to definition: dotted">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-underlinestyle-dotted"
                aria-label="Permalink for definition: dotted. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-underlinestyle-dashed"
        aria-label="Links in this document to definition: dashed">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-underlinestyle-dashed"
                aria-label="Permalink for definition: dashed. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-underlinestyle-wavy"
        aria-label="Links in this document to definition: wavy">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-underlinestyle-wavy"
                aria-label="Permalink for definition: wavy. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-underlinethickness"
        aria-label="Links in this document to definition: UnderlineThickness">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-underlinethickness"
                aria-label="Permalink for definition: UnderlineThickness. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-underlinethickness-1" title="§ 1.2.1 EditContext state">§ 1.2.1 EditContext
                    state</a>
            </li>
            <li>
                <a href="#ref-for-dom-underlinethickness-2" title="§ 1.2.4 EditContext events">§ 1.2.4 EditContext
                    events</a>
            </li>
            <li>
                <a href="#ref-for-dom-underlinethickness-3" title="§ 4.2 TextFormatUpdateEvent">§ 4.2
                    TextFormatUpdateEvent</a> <a href="#ref-for-dom-underlinethickness-4" title="Reference 2">(2)</a> <a
                    href="#ref-for-dom-underlinethickness-5" title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-underlinethickness-6" title="§ A. IDL Index">§ A. IDL Index</a> <a
                    href="#ref-for-dom-underlinethickness-7" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-underlinethickness-none"
        aria-label="Links in this document to definition: none">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-underlinethickness-none"
                aria-label="Permalink for definition: none. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-underlinethickness-thin"
        aria-label="Links in this document to definition: thin">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-underlinethickness-thin"
                aria-label="Permalink for definition: thin. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-underlinethickness-thick"
        aria-label="Links in this document to definition: thick">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-underlinethickness-thick"
                aria-label="Permalink for definition: thick. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-textformatinit"
        aria-label="Links in this document to definition: TextFormatInit">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textformatinit"
                aria-label="Permalink for definition: TextFormatInit. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-textformatinit-1" title="§ 4.2 TextFormatUpdateEvent">§ 4.2
                    TextFormatUpdateEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-textformatinit-2" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-textformatinit-rangestart"
        aria-label="Links in this document to definition: rangeStart">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textformatinit-rangestart"
                aria-label="Permalink for definition: rangeStart. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-textformatinit-rangeend"
        aria-label="Links in this document to definition: rangeEnd">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textformatinit-rangeend"
                aria-label="Permalink for definition: rangeEnd. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-textformatinit-underlinestyle"
        aria-label="Links in this document to definition: underlineStyle">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textformatinit-underlinestyle"
                aria-label="Permalink for definition: underlineStyle. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-textformatinit-underlinethickness"
        aria-label="Links in this document to definition: underlineThickness">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textformatinit-underlinethickness"
                aria-label="Permalink for definition: underlineThickness. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-textformat"
        aria-label="Links in this document to definition: TextFormat">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textformat"
                aria-label="Permalink for definition: TextFormat. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-textformat-1" title="§ 3.1.6 Dispatch text format update event">§ 3.1.6 Dispatch
                    text format update event</a> <a href="#ref-for-dom-textformat-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-textformat-3" title="§ 4.2 TextFormatUpdateEvent">§ 4.2 TextFormatUpdateEvent</a>
                <a href="#ref-for-dom-textformat-4" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-textformat-5" title="§ A. IDL Index">§ A. IDL Index</a> <a
                    href="#ref-for-dom-textformat-6" title="Reference 2">(2)</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-textformat-constructor"
        aria-label="Links in this document to definition: constructor">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textformat-constructor"
                aria-label="Permalink for definition: constructor. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-textformat-rangestart"
        aria-label="Links in this document to definition: rangeStart">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textformat-rangestart"
                aria-label="Permalink for definition: rangeStart. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-textformat-rangestart-1" title="§ 3.1.6 Dispatch text format update event">§ 3.1.6
                    Dispatch text format update event</a>
            </li>
            <li>
                <a href="#ref-for-dom-textformat-rangestart-2" title="§ 4.2 TextFormatUpdateEvent">§ 4.2
                    TextFormatUpdateEvent</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-textformat-rangeend"
        aria-label="Links in this document to definition: rangeEnd">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textformat-rangeend"
                aria-label="Permalink for definition: rangeEnd. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-textformat-rangeend-1" title="§ 3.1.6 Dispatch text format update event">§ 3.1.6
                    Dispatch text format update event</a>
            </li>
            <li>
                <a href="#ref-for-dom-textformat-rangeend-2" title="§ 4.2 TextFormatUpdateEvent">§ 4.2
                    TextFormatUpdateEvent</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-textformat-underlinestyle"
        aria-label="Links in this document to definition: underlineStyle">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textformat-underlinestyle"
                aria-label="Permalink for definition: underlineStyle. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-textformat-underlinestyle-1" title="§ 3.1.6 Dispatch text format update event">§
                    3.1.6 Dispatch text format update event</a>
            </li>
            <li>
                <a href="#ref-for-dom-textformat-underlinestyle-2" title="§ 4.2 TextFormatUpdateEvent">§ 4.2
                    TextFormatUpdateEvent</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-textformat-underlinethickness"
        aria-label="Links in this document to definition: underlineThickness">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textformat-underlinethickness"
                aria-label="Permalink for definition: underlineThickness. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-textformat-underlinethickness-1"
                    title="§ 3.1.6 Dispatch text format update event">§ 3.1.6 Dispatch text format update event</a>
            </li>
            <li>
                <a href="#ref-for-dom-textformat-underlinethickness-2" title="§ 4.2 TextFormatUpdateEvent">§ 4.2
                    TextFormatUpdateEvent</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-textformatupdateeventinit"
        aria-label="Links in this document to definition: TextFormatUpdateEventInit">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textformatupdateeventinit"
                aria-label="Permalink for definition: TextFormatUpdateEventInit. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-textformatupdateeventinit-1" title="§ 4.2 TextFormatUpdateEvent">§ 4.2
                    TextFormatUpdateEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-textformatupdateeventinit-2" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-textformatupdateeventinit-textformats"
        aria-label="Links in this document to definition: textFormats">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textformatupdateeventinit-textformats"
                aria-label="Permalink for definition: textFormats. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-textformatupdateevent"
        aria-label="Links in this document to definition: TextFormatUpdateEvent">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textformatupdateevent"
                aria-label="Permalink for definition: TextFormatUpdateEvent. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-textformatupdateevent-1" title="§ 1.2.4 EditContext events">§ 1.2.4 EditContext
                    events</a> <a href="#ref-for-dom-textformatupdateevent-2" title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-textformatupdateevent-3" title="§ 1.2.6 Examples">§ 1.2.6 Examples</a>
            </li>
            <li>
                <a href="#ref-for-dom-textformatupdateevent-4" title="§ 3.1.6 Dispatch text format update event">§ 3.1.6
                    Dispatch text format update event</a> <a href="#ref-for-dom-textformatupdateevent-5"
                    title="Reference 2">(2)</a>
            </li>
            <li>
                <a href="#ref-for-dom-textformatupdateevent-6" title="§ 3.2 EditContext Interface">§ 3.2 EditContext
                    Interface</a>
            </li>
            <li>
                <a href="#ref-for-dom-textformatupdateevent-7" title="§ 4.2 TextFormatUpdateEvent">§ 4.2
                    TextFormatUpdateEvent</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-textformatupdateevent-constructor"
        aria-label="Links in this document to definition: constructor">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textformatupdateevent-constructor"
                aria-label="Permalink for definition: constructor. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-textformatupdateevent-gettextformats"
        aria-label="Links in this document to definition: getTextFormats">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-textformatupdateevent-gettextformats"
                aria-label="Permalink for definition: getTextFormats. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-textformatupdateevent-gettextformats-1" title="§ 4.2 TextFormatUpdateEvent">§ 4.2
                    TextFormatUpdateEvent</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-text-format-list"
        aria-label="Links in this document to definition: text format list">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dfn-text-format-list"
                aria-label="Permalink for definition: text format list. Activate to close this dialog.">Permalink</a>

        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dfn-text-format-list-1" title="§ 3.1.6 Dispatch text format update event">§ 3.1.6
                    Dispatch text format update event</a>
            </li>
            <li>
                <a href="#ref-for-dfn-text-format-list-2" title="§ 4.2 TextFormatUpdateEvent">§ 4.2
                    TextFormatUpdateEvent</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-characterboundsupdateeventinit"
        aria-label="Links in this document to definition: CharacterBoundsUpdateEventInit">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-characterboundsupdateeventinit"
                aria-label="Permalink for definition: CharacterBoundsUpdateEventInit. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-characterboundsupdateeventinit-1" title="§ 4.3 CharacterBoundsUpdateEvent">§ 4.3
                    CharacterBoundsUpdateEvent</a>
            </li>
            <li>
                <a href="#ref-for-dom-characterboundsupdateeventinit-2" title="§ A. IDL Index">§ A. IDL Index</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-characterboundsupdateeventinit-rangestart"
        aria-label="Links in this document to definition: rangeStart">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-characterboundsupdateeventinit-rangestart"
                aria-label="Permalink for definition: rangeStart. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-characterboundsupdateeventinit-rangeend"
        aria-label="Links in this document to definition: rangeEnd">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-characterboundsupdateeventinit-rangeend"
                aria-label="Permalink for definition: rangeEnd. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-characterboundsupdateevent"
        aria-label="Links in this document to definition: CharacterBoundsUpdateEvent">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-characterboundsupdateevent"
                aria-label="Permalink for definition: CharacterBoundsUpdateEvent. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-characterboundsupdateevent-1" title="§ 1.2.1 EditContext state">§ 1.2.1
                    EditContext state</a>
            </li>
            <li>
                <a href="#ref-for-dom-characterboundsupdateevent-2" title="§ 1.2.4 EditContext events">§ 1.2.4
                    EditContext events</a> <a href="#ref-for-dom-characterboundsupdateevent-3"
                    title="Reference 2">(2)</a> <a href="#ref-for-dom-characterboundsupdateevent-4"
                    title="Reference 3">(3)</a>
            </li>
            <li>
                <a href="#ref-for-dom-characterboundsupdateevent-5" title="§ 1.2.6 Examples">§ 1.2.6 Examples</a>
            </li>
            <li>
                <a href="#ref-for-dom-characterboundsupdateevent-6"
                    title="§ 3.1.7 Dispatch character bounds update event">§ 3.1.7 Dispatch character bounds update
                    event</a>
            </li>
            <li>
                <a href="#ref-for-dom-characterboundsupdateevent-7" title="§ 3.2 EditContext Interface">§ 3.2
                    EditContext Interface</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-characterboundsupdateevent-constructor"
        aria-label="Links in this document to definition: constructor">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-characterboundsupdateevent-constructor"
                aria-label="Permalink for definition: constructor. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>Not referenced in this document.</li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-characterboundsupdateevent-rangestart"
        aria-label="Links in this document to definition: rangeStart">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-characterboundsupdateevent-rangestart"
                aria-label="Permalink for definition: rangeStart. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-characterboundsupdateevent-rangestart-1"
                    title="§ 3.1.7 Dispatch character bounds update event">§ 3.1.7 Dispatch character bounds update
                    event</a>
            </li>
            <li>
                <a href="#ref-for-dom-characterboundsupdateevent-rangestart-2"
                    title="§ 4.3 CharacterBoundsUpdateEvent">§ 4.3 CharacterBoundsUpdateEvent</a>
            </li>
        </ul>
    </div>
    <div class="dfn-panel" hidden="" role="dialog" aria-modal="true"
        id="dfn-panel-for-dom-characterboundsupdateevent-rangeend"
        aria-label="Links in this document to definition: rangeEnd">
        <span class="caret"></span>
        <div>
            <a class="self-link" href="#dom-characterboundsupdateevent-rangeend"
                aria-label="Permalink for definition: rangeEnd. Activate to close this dialog.">Permalink</a>
            <span class="marker dfn-exported"
                title="Definition can be referenced by other specifications">exported</span>
        </div>
        <p><b>Referenced in:</b></p>
        <ul>
            <li>
                <a href="#ref-for-dom-characterboundsupdateevent-rangeend-1"
                    title="§ 3.1.7 Dispatch character bounds update event">§ 3.1.7 Dispatch character bounds update
                    event</a>
            </li>
            <li>
                <a href="#ref-for-dom-characterboundsupdateevent-rangeend-2" title="§ 4.3 CharacterBoundsUpdateEvent">§
                    4.3 CharacterBoundsUpdateEvent</a>
            </li>
        </ul>
    </div>
    <script id="respec-highlight-vars">(() => {
            // @ts-check

            if (document.respec) {
                document.respec.ready.then(setupVarHighlighter);
            } else {
                setupVarHighlighter();
            }

            function setupVarHighlighter() {
                document
                    .querySelectorAll("var")
                    .forEach(varElem => varElem.addEventListener("click", highlightListener));
            }

            function highlightListener(ev) {
                ev.stopPropagation();
                const { target: varElem } = ev;
                const hightligtedElems = highlightVars(varElem);
                const resetListener = () => {
                    const hlColor = getHighlightColor(varElem);
                    hightligtedElems.forEach(el => removeHighlight(el, hlColor));
                    [...HL_COLORS.keys()].forEach(key => HL_COLORS.set(key, true));
                };
                if (hightligtedElems.length) {
                    document.body.addEventListener("click", resetListener, { once: true });
                }
            }

            // availability of highlight colors. colors from var.css
            const HL_COLORS = new Map([
                ["respec-hl-c1", true],
                ["respec-hl-c2", true],
                ["respec-hl-c3", true],
                ["respec-hl-c4", true],
                ["respec-hl-c5", true],
                ["respec-hl-c6", true],
                ["respec-hl-c7", true],
            ]);

            function getHighlightColor(target) {
                // return current colors if applicable
                const { value } = target.classList;
                const re = /respec-hl-\w+/;
                const activeClass = re.test(value) && value.match(re);
                if (activeClass) return activeClass[0];

                // first color preference
                if (HL_COLORS.get("respec-hl-c1") === true) return "respec-hl-c1";

                // otherwise get some other available color
                return [...HL_COLORS.keys()].find(c => HL_COLORS.get(c)) || "respec-hl-c1";
            }

            function highlightVars(varElem) {
                const textContent = norm(varElem.textContent);
                const parent = varElem.closest(".algorithm, section");
                const highlightColor = getHighlightColor(varElem);

                const varsToHighlight = [...parent.querySelectorAll("var")].filter(
                    el =>
                        norm(el.textContent) === textContent &&
                        el.closest(".algorithm, section") === parent
                );

                // update availability of highlight color
                const colorStatus = varsToHighlight[0].classList.contains("respec-hl");
                HL_COLORS.set(highlightColor, colorStatus);

                // highlight vars
                if (colorStatus) {
                    varsToHighlight.forEach(el => removeHighlight(el, highlightColor));
                    return [];
                } else {
                    varsToHighlight.forEach(el => addHighlight(el, highlightColor));
                }
                return varsToHighlight;
            }

            function removeHighlight(el, highlightColor) {
                el.classList.remove("respec-hl", highlightColor);
                // clean up empty class attributes so they don't come in export
                if (!el.classList.length) el.removeAttribute("class");
            }

            function addHighlight(elem, highlightColor) {
                elem.classList.add("respec-hl", highlightColor);
            }

            /**
             * Same as `norm` from src/core/utils, but our build process doesn't allow
             * imports in runtime scripts, so duplicated here.
             * @param {string} str
             */
            function norm(str) {
                return str.trim().replace(/\s+/g, " ");
            }
        })()</script>
    <script id="respec-dfn-panel">(() => {
                                               // @ts-check
                                               if (document.respec) {
                                                   document.respec.ready.then(setupPanel);
                                               } else {
                                                   setupPanel();
                                               }

                                               function setupPanel() {
                                                   const listener = panelListener();
                                                   document.body.addEventListener("keydown", listener);
                                                   document.body.addEventListener("click", listener);
                                               }

                                               function panelListener() {
                                                   /** @type {HTMLElement} */
                                                   let panel = null;
                                                   return event => {
                                                       const { target, type } = event;

                                                       if (!(target instanceof HTMLElement)) return;

                                                       // For keys, we only care about Enter key to activate the panel
                                                       // otherwise it's activated via a click.
                                                       if (type === "keydown" && event.key !== "Enter") return;

                                                       const action = deriveAction(event);

                                                       switch (action) {
                                                           case "show": {
                                                               hidePanel(panel);
                                                               /** @type {HTMLElement} */
                                                               const dfn = target.closest("dfn, .index-term");
                                                               panel = document.getElementById(`dfn-panel-for-${dfn.id}`);
                                                               const coords = deriveCoordinates(event);
                                                               displayPanel(dfn, panel, coords);
                                                               break;
                                                           }
                                                           case "dock": {
                                                               panel.style.left = null;
                                                               panel.style.top = null;
                                                               panel.classList.add("docked");
                                                               break;
                                                           }
                                                           case "hide": {
                                                               hidePanel(panel);
                                                               panel = null;
                                                               break;
                                                           }
                                                       }
                                                   };
                                               }

                                               /**
                                                * @param {MouseEvent|KeyboardEvent} event
                                                */
                                               function deriveCoordinates(event) {
                                                   const target = /** @type HTMLElement */ (event.target);

                                                   // We prevent synthetic AT clicks from putting
                                                   // the dialog in a weird place. The AT events sometimes
                                                   // lack coordinates, so they have clientX/Y = 0
                                                   const rect = target.getBoundingClientRect();
                                                   if (
                                                       event instanceof MouseEvent &&
                                                       event.clientX >= rect.left &&
                                                       event.clientY >= rect.top
                                                   ) {
                                                       // The event probably happened inside the bounding rect...
                                                       return { x: event.clientX, y: event.clientY };
                                                   }

                                                   // Offset to the middle of the element
                                                   const x = rect.x + rect.width / 2;
                                                   // Placed at the bottom of the element
                                                   const y = rect.y + rect.height;
                                                   return { x, y };
                                               }

                                               /**
                                                * @param {Event} event
                                                */
                                               function deriveAction(event) {
                                                   const target = /** @type {HTMLElement} */ (event.target);
                                                   const hitALink = !!target.closest("a");
                                                   if (target.closest("dfn:not([data-cite]), .index-term")) {
                                                       return hitALink ? "none" : "show";
                                                   }
                                                   if (target.closest(".dfn-panel")) {
                                                       if (hitALink) {
                                                           return target.classList.contains("self-link") ? "hide" : "dock";
                                                       }
                                                       const panel = target.closest(".dfn-panel");
                                                       return panel.classList.contains("docked") ? "hide" : "none";
                                                   }
                                                   if (document.querySelector(".dfn-panel:not([hidden])")) {
                                                       return "hide";
                                                   }
                                                   return "none";
                                               }

                                               /**
                                                * @param {HTMLElement} dfn
                                                * @param {HTMLElement} panel
                                                * @param {{ x: number, y: number }} clickPosition
                                                */
                                               function displayPanel(dfn, panel, { x, y }) {
                                                   panel.hidden = false;
                                                   // distance (px) between edge of panel and the pointing triangle (caret)
                                                   const MARGIN = 20;

                                                   const dfnRects = dfn.getClientRects();
                                                   // Find the `top` offset when the `dfn` can be spread across multiple lines
                                                   let closestTop = 0;
                                                   let minDiff = Infinity;
                                                   for (const rect of dfnRects) {
                                                       const { top, bottom } = rect;
                                                       const diffFromClickY = Math.abs((top + bottom) / 2 - y);
                                                       if (diffFromClickY < minDiff) {
                                                           minDiff = diffFromClickY;
                                                           closestTop = top;
                                                       }
                                                   }

                                                   const top = window.scrollY + closestTop + dfnRects[0].height;
                                                   const left = x - MARGIN;
                                                   panel.style.left = `${left}px`;
                                                   panel.style.top = `${top}px`;

                                                   // Find if the panel is flowing out of the window
                                                   const panelRect = panel.getBoundingClientRect();
                                                   const SCREEN_WIDTH = Math.min(window.innerWidth, window.screen.width);
                                                   if (panelRect.right > SCREEN_WIDTH) {
                                                       const newLeft = Math.max(MARGIN, x + MARGIN - panelRect.width);
                                                       const newCaretOffset = left - newLeft;
                                                       panel.style.left = `${newLeft}px`;
                                                       /** @type {HTMLElement} */
                                                       const caret = panel.querySelector(".caret");
                                                       caret.style.left = `${newCaretOffset}px`;
                                                   }

                                                   // As it's a dialog, we trap focus.
                                                   // TODO: when <dialog> becomes a implemented, we should really
                                                   // use that.
                                                   trapFocus(panel, dfn);
                                               }

                                               /**
                                                * @param {HTMLElement} panel
                                                * @param {HTMLElement} dfn
                                                * @returns
                                                */
                                               function trapFocus(panel, dfn) {
                                                   /** @type NodeListOf<HTMLAnchorElement> elements */
                                                   const anchors = panel.querySelectorAll("a[href]");
                                                   // No need to trap focus
                                                   if (!anchors.length) return;

                                                   // Move focus to first anchor element
                                                   const first = anchors.item(0);
                                                   first.focus();

                                                   const trapListener = createTrapListener(anchors, panel, dfn);
                                                   panel.addEventListener("keydown", trapListener);

                                                   // Hiding the panel releases the trap
                                                   const mo = new MutationObserver(records => {
                                                       const [record] = records;
                                                       const target = /** @type HTMLElement */ (record.target);
                                                       if (target.hidden) {
                                                           panel.removeEventListener("keydown", trapListener);
                                                           mo.disconnect();
                                                       }
                                                   });
                                                   mo.observe(panel, { attributes: true, attributeFilter: ["hidden"] });
                                               }

                                               /**
                                                *
                                                * @param {NodeListOf<HTMLAnchorElement>} anchors
                                                * @param {HTMLElement} panel
                                                * @param {HTMLElement} dfn
                                                * @returns
                                                */
                                               function createTrapListener(anchors, panel, dfn) {
                                                   const lastIndex = anchors.length - 1;
                                                   let currentIndex = 0;
                                                   return event => {
                                                       switch (event.key) {
                                                           // Hitting "Tab" traps us in a nice loop around elements.
                                                           case "Tab": {
                                                               event.preventDefault();
                                                               currentIndex += event.shiftKey ? -1 : +1;
                                                               if (currentIndex < 0) {
                                                                   currentIndex = lastIndex;
                                                               } else if (currentIndex > lastIndex) {
                                                                   currentIndex = 0;
                                                               }
                                                               anchors.item(currentIndex).focus();
                                                               break;
                                                           }

                                                           // Hitting "Enter" on an anchor releases the trap.
                                                           case "Enter":
                                                               hidePanel(panel);
                                                               break;

                                                           // Hitting "Escape" returns focus to dfn.
                                                           case "Escape":
                                                               hidePanel(panel);
                                                               dfn.focus();
                                                               return;
                                                       }
                                                   };
                                               }

                                               /** @param {HTMLElement} panel */
                                               function hidePanel(panel) {
                                                   if (!panel) return;
                                                   panel.hidden = true;
                                                   panel.classList.remove("docked");
                                               }
                                           })()</script>
    <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
    <script src="/dropdown.js"></script>
</body>

</html>